{"version":3,"sources":["jquery/workportal/desktop/widget/project.dashboard.menu/bizagi.workportal.desktop.widgets.project.dashboard.menu.js","jquery/workportal/desktop/widget/project.dashboard.menu.activity.plan/bizagi.workportal.desktop.widgets.project.dashboard.menu.activity.plan.js","jquery/workportal/desktop/widget/project.content.dashboard/bizagi.workportal.desktop.widgets.project.content.dashboard.js","jquery/workportal/desktop/widget/project.plan/bizagi.workportal.desktop.widgets.project.plan.js","jquery/workportal/desktop/widget/project.plan.activity.sidebar/bizagi.workportal.desktop.widgets.project.plan.activity.sidebar.js","jquery/workportal/desktop/widget/project.plan.activity.action/bizagi.workportal.desktop.widgets.project.plan.activity.action.js","jquery/workportal/desktop/widget/project.plan.activity.time/bizagi.workportal.desktop.widgets.project.plan.activity.time.js","jquery/workportal/desktop/widget/project.plan.activity.progress/bizagi.workportal.desktop.widgets.project.plan.activity.progress.js","jquery/workportal/desktop/widget/project.plan.activity.subprocesses/bizagi.workportal.desktop.widgets.project.plan.activity.subprocesses.js","jquery/workportal/desktop/widget/project.plan.activity.parent/bizagi.workportal.desktop.widgets.project.plan.activity.parent.js","jquery/workportal/desktop/widget/project.plan.activity.users/bizagi.workportal.desktop.widgets.project.plan.activity.users.js"],"names":["bizagi","workportal","widgets","widget","extend","onDiscussionsMenuStatusChange","ev","params","this","updateDiscussionsIcons","hasDiscussionsOrComment","sub","$","proxy","toggle","clean","unsub","injector","register","project","dashboard","menu","init","workportalFacade","dataService","_super","loadTemplates","project-dashboard-menu","getTemplate","concat","renderContent","content","postRender","self","contextsLeftSidebarCaseDashboard","forEach","context","updateView","event","args","$content","getContent","empty","argsTemplate","showFormOverview","menuDashboard","showFormActivity","showCommentsOptionMenu","showFilesOptionMenu","showTimeLineOptionMenu","showPlanOptionMenu","contextPlanOptionMenu","contextFormActivityOptionMenu","contextualized","plan","render","appendTo","showContextByMenuDashboard","type","toUpperCase","addClass","siblings","removeClass","handlerEvents","paramsGetPlan","idPlan","id","when","callGetPlan","then","responsePlan","pub","loadContentById","preventDefault","$item","target","closest","hasClass","util","autoSave","done","document","data","getLevelNavigator","newLevelNavigator","parseInt","refreshLastItemBreadcrumb","histName","level","defer","Deferred","getPlan","always","response","status","undefined","resolve","reject","promise","subMenuHandler","$comments","$files","$timeline","on","off","activity","project-content-dashboard","template","setTimeout","window","trigger","base","planCreate","project-plan","project-plan-popup","templateHomePlan","$contentWidget","form","buttonShowPopupPlanToAdd","onShowPopupPlan","showPopupAddPlan","paramsNewPlan","planChild","indexOf","servicesPlan","services","behaviors","planParent","getPlanAsParent","clone","nameItemNavigator","localization","getResource","serviceloadDataPlan","project-plan-activity-sidebar","onNotifyLoadInfoPlan","parans","idActivitySelected","loadData","getDateServer","subscribe","loadedWithDataActivities","loadedWithDataFirstParent","unsubscribe","sidebar","notifier","dateFormat","timeFormat","estimatedFinishDateTime","beforeUserAssignedActivity","activity-action-main","activity-action-editionpopup","dialogBox","onNotifyLoadInfoActivityExecution","onNotifyExpandedRightSidebar","currentActivity","activities","filter","idUserCreator","currentUser","idUser","userAssigned","currentActivityName","name","showEditAction","tmpl","append","initilizeActionMenu","initializeTempleteAndEvents","plugins","activityEdition","initPluginPopupEdition","formEditActivity","assignee","date","duration","buttonCancel","buttonUpdate","onClickPopupButtonCancel","onClickPopupButtonUpdate","onDeleteDate","onTypeDuration","select","onSelectMenu","popupEditActivity","formContent","initializeAutoComplete","element","url","serviceLocator","getUrl","autocomplete","minLength","source","request","ajax","domain","userName","fullName","term","organization","pag","pagSize","orderField","success","map","users","item","label","user","value","ui","val","IdAssignee","focus","change","initializeDatePicker","datepicker","onSelect","getTime","dateFormatter","getDateFormatByDatePickerJqueryUI","initializeSpiner","desactivateDateByDuration","newValue","isNumeric","spinner","min","max","placeHolder","spin","keyCode","fieldDurationActive","activateElement","currentTarget","find","length","onClickOpenPopupEdition","dialog","resizable","draggable","height","width","modal","title","maximize","open","onOpenPopupEdition","close","onClosePopupEdition","activityDate","isEmpty","estimatedFinishDate","isNaN","formatInvariant","Date","getDateFromInvariant","isMinimumDate","setUserAssignedById","removePopupWidgets","callGetDataUsers","responseUsers","next","html","remove","validateParamsOfFormEditActivity","idUserAssigned","updateActivity","progress","startDate","allowEdition","description","finishDate","items","editActivityPlan","refreshAllWidgets","showSucessMessage","onClickFavorite","favoriteOptions","idObject","idCase","favoriteType","addFavorite","favoritesData","guidFavorite","idFavorites","delFavorite","messageValidationField","replace","toLowerCase","csvIdUsers","userIds","getUsersData","action","EXECUTING_ACTIVITY","FINISHED_ACTIVITY","datePickerRegional","plan-time-main","onNotifyLoadInfoActivitySummary","getStateActivity","time","fromDate","getFormattedDate","getFirstDate","dataProgressWidget","getDataByScenarios","unitTime","auxUnitTime","updateWidget","contentTemplate","relativeTime","getRelativeTime","now","minutes","messageDescripionDifference","keywordResource","messageTime","$barRemainingDate","widthNumberDays","css","toString","percentBar","currentState","colorBar","getColorByCreatedAndEstimatedDate","toDate","callGetEffectiveDuration","getColorBar","getPercentBar","getKeywordResourceDescriptionBar","getUnitTime","getUTCDate","dateObj","monthNames","getMonth","formatDate","d","getEffectiveDuration","plan-progress-main","plan-progress-popup-edit","onNotifyUpdateItemFromRender","activityToShow","valuePercentBarComplete","canEdit","popupEditProgress","initPluginPopupEditProgress","formEditProgress","sliderProgress","slider","orientation","range","from","to","step","slide","onChangesliderProgress","each","vals","i","el","numericTextBoxPlugin","format","onChangeNumericTextBoxProgress","decimals","buttonChangeProgress","onShowPopupEditProgress","onClickCancel","onSubmitFormChangeProgress","updateProgressUI","listItems","activityWork","hide","show","text","newPercentProgress","templatePopupEditProgress","onOpenPopupPlan","detach","previusValueProgress","prop","project-subprocesses","project-subprocesses-tootip-custom-properties","subprocesses","plan-parent-main","getPlanParent","parent","idParent","radNumber","nameParent","displayName","idWorkflow","idWorkItem","idTask","onClickGoToParentCase","routingExecute","usersMap","usersInformation","globalHandlersService","get","usersAssignees","plan-users-main","activityRunning","cvsGuidUsers","activitiesUsers","ownerUserId","ownerUserGuid","push","guidUser","userType","picture","guid","index","userId","userGuid","userAssignedGuid","inArray","justAssignees","addEventHandlersModal","showCreatorInformation","renderUserProfilesAndImages","allUsers","usersAssignee","isOwner","isAssignee","usersAdapter","createJsonUserInfo","userCreator","userInfo","username","email","getInitials","userinformation","obj","$li","console","log","not","userSelected","$target","usersActivities","userParam","getIsAssignee","getIsOwner","usertooltip","usersGuids","join","getUsersAssignees","getUserAssignee","tasks","types","actUser","click","stopPropagation","publish","widgetName","BIZAGI_WORKPORTAL_WIDGET_USERS_MODAL","closeVisible","modalParameters","refreshInbox"],"mappings":"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","sourcesContent":["/**\r\n * Name: BizAgi Desktop Widget Dashboard menu (left sidebar) * \r\n * @author Valeria Vanegas\r\n */\n\n\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.project.dashboard.menu\", {}, {\n\n  /**\r\n                                                                                                   * Handler when discussions menu status change\r\n                                                                                                   * @param {*} ev \r\n                                                                                                   * @param {*} params \r\n                                                                                                   */\n  onDiscussionsMenuStatusChange: function onDiscussionsMenuStatusChange(ev, params) {\n    var self = this;\n    self.updateDiscussionsIcons(params.hasDiscussionsOrComment);\n  },\n\n  /**\r\n      * Update discussions icon on sidebar menu\r\n      * The icon is different when there is other discussion or there are comments\r\n      * @param {*} hasDiscussionsOrComment \r\n      */\n  updateDiscussionsIcons: function updateDiscussionsIcons(hasDiscussionsOrComment) {\n    var self = this;\n\n    self.sub(\"UPDATE_DISCUSSIONS_MENU_STATUS\", $.proxy(self.onDiscussionsMenuStatusChange, self));\n\n    $(\".bz-icon-discussion-comment\").toggle(hasDiscussionsOrComment);\n    $(\".bz-icon-discussion-no-comment\").toggle(!hasDiscussionsOrComment);\n    self.params.hasDiscussionsOrComment = hasDiscussionsOrComment;\n  },\n\n  /**\r\n      * Detach events\r\n      */\n  clean: function clean() {\n    var self = this;\n    self.unsub(\"UPDATE_DISCUSSIONS_MENU_STATUS\", $.proxy(self.onDiscussionsMenuStatusChange, self));\n  } });\n\n\nbizagi.injector.register(\"bizagi.workportal.widgets.project.dashboard.menu\", [\"workportalFacade\", \"dataService\", bizagi.workportal.widgets.project.dashboard.menu], true);","/*\r\n *   Name: Bizagi Workportal project Dashboard Menu Activity Plan\r\n *   Author: Elkin Fernando Siabato Cruz\r\n */\n\nbizagi.workportal.widgets.project.dashboard.menu.extend(\"bizagi.workportal.widgets.project.dashboard.menu.activity.plan\", {}, {\n\n  /**\r\n                                                                                                                                 *   Constructor\r\n                                                                                                                                 */\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n    self.params = params || {};\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    //Load templates\n    self.loadTemplates({\n      \"project-dashboard-menu\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.project.dashboard.menu.activity.plan\").concat(\"#project-dashboard-menu2\") });\n\n  },\n\n  /**\r\n      * Renders the template defined in the widget\r\n      */\n  renderContent: function renderContent() {\n    var self = this;\n    self.content = $(\"<div></div>\");\n    return self.content;\n  },\n\n  /**\r\n      * links events with handlers\r\n      */\n  postRender: function postRender() {\n    var self = this;\n    self._super();\n    //Handlers\n    self.params.contextsLeftSidebarCaseDashboard.forEach(function (context) {\n      self.sub(context, $.proxy(self.updateView, self));\n    });\n  },\n\n  /**\r\n      * Update view\r\n      * @param event\r\n      * @param params\r\n      */\n  updateView: function updateView(event, params) {\n    var self = this;\n    self.params = $.extend(self.params, params.args);\n    self.clean();\n    var $content = self.getContent().empty();\n\n    var argsTemplate = {\n      showFormOverview: self.params.menuDashboard.showFormOverview,\n      showFormActivity: self.params.menuDashboard.showFormActivity,\n      showCommentsOptionMenu: self.params.menuDashboard.showCommentsOptionMenu,\n      showFilesOptionMenu: self.params.menuDashboard.showFilesOptionMenu,\n      showTimeLineOptionMenu: self.params.menuDashboard.showTimeLineOptionMenu,\n      showPlanOptionMenu: self.params.menuDashboard.showPlanOptionMenu,\n      contextPlanOptionMenu: self.params.menuDashboard.contextPlanOptionMenu,\n      contextFormActivityOptionMenu: self.params.menuDashboard.contextFormActivityOptionMenu,\n      contextualized: self.params.plan.contextualized };\n\n\n    //Update widget\n    var template = self.getTemplate(\"project-dashboard-menu\");\n    template.render(argsTemplate).appendTo($content);\n\n    if (self.params.showContextByMenuDashboard) {\n      $(\"li[data-context='\" + event.type.toUpperCase() + \"']\", self.content).addClass(\"active\").siblings().removeClass(\"active\");\n    }\n\n    self.updateDiscussionsIcons(self.params.hasDiscussionsOrComment);\n    self.handlerEvents();\n\n    var paramsGetPlan = { idPlan: self.params.plan.id };\n    $.when(self.callGetPlan(paramsGetPlan)).then(function (responsePlan) {\n      $.extend(self.params.plan, responsePlan);\n      self.pub(\"notify\", {\n        type: \"LOAD_INFO_PLAN\",\n        args: self.params });\n\n    });\n  },\n\n  /**\r\n      *   Load Content By Id\r\n      */\n  loadContentById: function loadContentById(event) {\n    var self = this;\n    event.preventDefault();\n    var $item = $(event.target).closest(\"li\");\n\n    if (!$item.hasClass(\"active\")) {\n      $.when(bizagi.util.autoSave()).done(function () {\n        $(document).data('auto-save', '');\n\n        var showContextByMenuDashboard = $item.data(\"context\");\n        if (showContextByMenuDashboard) {\n          var getLevelNavigator = self.pub(\"notify\", { type: \"NAVIGATOR_GETLEVEL\" });\n          var currentLevelNavigator = parseInt(getLevelNavigator[0]);\n          var nameItemNavigator = \"\";\n          var newLevelNavigator = currentLevelNavigator;\n\n          self.params.refreshLastItemBreadcrumb = false;\n          self.pub(\"notify\", {\n            type: showContextByMenuDashboard.toUpperCase(),\n            args: $.extend(self.params, { showContextByMenuDashboard: showContextByMenuDashboard,\n              histName: nameItemNavigator,\n              level: newLevelNavigator }) });\n\n          $(\"li[data-context='\" + self.params.showContextByMenuDashboard.toUpperCase() + \"']\", self.content).addClass(\"active\").siblings().removeClass(\"active\");\n        }\n      });\n    }\n  },\n\n  /**\r\n      * Call services\r\n      */\n\n  callGetPlan: function callGetPlan(params) {\n    var self = this;\n    var defer = $.Deferred();\n    self.dataService.getPlan(params).always(function (response) {\n      if (response.status === 200 || response.status === 201 || response.status === undefined) {\n        defer.resolve(response);\n      } else\n      {\n        defer.reject();\n      }\n    });\n\n    return defer.promise();\n  },\n\n  subMenuHandler: function subMenuHandler() {\n    var self = this;\n    var content = self.getContent();\n    var $comments = $(\"[data-context='ACTIVITYPLANCOMMENTS']\", content);\n    var $files = $(\"[data-context='ACTIVITYPLANFILES']\", content);\n    var $timeline = $(\"[data-context='ACTIVITYPLANTIMELINE']\", content);\n\n    $(\".ui-bizagi-wp-project-tab-submenu a\", content).on(\"click\", function () {\n      $comments.toggle();\n      $files.toggle();\n      $timeline.toggle();\n    });\n  },\n\n  /**\r\n      * Handler events\r\n      */\n  handlerEvents: function handlerEvents() {\n    var self = this;\n    var content = self.getContent();\n    self.subMenuHandler();\n    $(\".ui-bizagi-wp-project-tab-links a\", content).on(\"click\", $.proxy(self.loadContentById, self));\n  },\n\n  /**\r\n      * Clean widgets and events\r\n      */\n  clean: function clean() {\n    var self = this;\n    var content = self.getContent();\n\n    self._super();\n\n    if (self.params && self.params.contextsLeftSidebarCaseDashboard) {\n      self.params.contextsLeftSidebarCaseDashboard.forEach(function (context) {\n        self.unsub(context, $.proxy(self.updateView, self));\n      });\n    }\n\n    $(\".ui-bizagi-wp-project-tab-links a\", content).off();\n  } });\n\n\n\nbizagi.injector.register(\"bizagi.workportal.widgets.project.dashboard.menu.activity.plan\", [\"workportalFacade\", \"dataService\", bizagi.workportal.widgets.project.dashboard.menu.activity.plan], true);","/*\r\n *   Name: Bizagi Workportal Project Content Dashboard\r\n *   Author: Elkin Fernando Siabato Cruz\r\n */\n\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.project.content.dashboard\", {}, {\n\n  /*\r\n                                                                                                      *   Constructor\r\n                                                                                                      */\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    //Load templates\n    self.loadTemplates({\n      \"project-content-dashboard\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.project.content.dashboard\").concat(\"#project-plan-content-dashboard\") });\n\n\n  },\n\n  /*\r\n      * Renders the template defined in the widget\r\n      */\n  renderContent: function renderContent() {\n    var self = this;\n\n    var template = self.getTemplate(\"project-content-dashboard\");\n    self.content = template.render({});\n\n    return self.content;\n  },\n  postRender: function postRender() {\n    var self = this;\n\n    setTimeout(function () {\n      $(window).trigger(\"resize\"); //Simulate resize for fix when load first time.\n    }, 1000);\n\n  } });\n\n\n\nbizagi.injector.register(\"bizagi.workportal.widgets.project.content.dashboard\", [\"workportalFacade\", \"dataService\", bizagi.workportal.widgets.project.content.dashboard], true);","/*\r\n *   Name: Bizagi Workportal Desktop Project Plan\r\n *   Author: Elkin Fernando Siabato Cruz\r\n */\n\nbizagi.workportal.widgets.project.base.extend(\"bizagi.workportal.widgets.project.plan\", {}, {\n  /*\r\n                                                                                               *   Constructor\r\n                                                                                               */\n  init: function init(workportalFacade, dataService, planCreate, params) {\n\n    var self = this;\n\n    //Call base\n    self._super(workportalFacade, dataService, params);\n    self.params = $.extend(self.params, params);\n    self.planCreate = planCreate;\n\n    //Load templates\n    self.loadTemplates({\n      \"project-plan\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.project.plan\").concat(\"#project-plan-wrapper\"),\n      \"project-plan-popup\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.project.plan\").concat(\"#project-plan-popup-template\") });\n\n  },\n\n  /*\r\n      * Renders the template defined in the widget\r\n      */\n  renderContent: function renderContent() {\n    var self = this;\n    var templateHomePlan = self.getTemplate(\"project-plan\");\n    self.content = templateHomePlan.render({});\n    return self.content;\n  },\n\n  /*\r\n      * Post render and links events with handlers\r\n      */\n  postRender: function postRender() {\n    var self = this;\n    var $contentWidget = self.getContent();\n    //reference for html elements\n    self.form = {\n      buttonShowPopupPlanToAdd: $(\"#buttonShowPopupCreatePlan\", $contentWidget) };\n\n    self.form.buttonShowPopupPlanToAdd.on(\"click\", $.proxy(self.onShowPopupPlan, self));\n  },\n\n  onShowPopupPlan: function onShowPopupPlan() {\n    var self = this;\n    var contextualized = typeof self.params.plan.contextualized === \"undefined\" ? true : self.params.plan.contextualized;\n    self.planCreate.showPopupAddPlan(self.params, self.dataService, contextualized);\n    self.planCreate.unsub('planCreated');\n    self.planCreate.sub('planCreated', function (ev, params) {\n      var paramsNewPlan = params.paramsNewPlan;\n      self.params.planChild = {};\n\n      //Set planparent if we are on activity plan\n      if (self.params.showContextByMenuDashboard.indexOf(\"ACTIVITYPLAN\") != -1) {\n        var servicesPlan = new bizagi.workportal.services.behaviors.plan(self.dataService);\n        self.params.planParent = servicesPlan.getPlanAsParent(self.params.plan);\n      }\n      self.params.planChild = bizagi.clone(paramsNewPlan);\n\n      self.pub(\"notify\", {\n        type: \"UPDATE_LASTCRUMBPARAMS_INFO\",\n        args: {\n          planChild: self.params.planChild } });\n\n\n\n      self.params.menuDashboard.contextPlanOptionMenu = \"PLANACTIVITIES\";\n\n      var getLevelNavigator = self.pub(\"notify\", { type: \"NAVIGATOR_GETLEVEL\" });\n      var currentLevelNavigator = parseInt(getLevelNavigator[0], 10);\n      var newLevelNavigator = currentLevelNavigator + 1;\n      var nameItemNavigator = bizagi.localization.getResource(\"workportal-project-casedashboard-plan\");\n\n      self.pub(\"notify\", {\n        type: \"PLANACTIVITIES\",\n        args: $.extend(self.params, { showContextByMenuDashboard: \"PLANACTIVITIES\",\n          histName: nameItemNavigator,\n          level: newLevelNavigator }) });\n\n    });\n  } });\n\n\nbizagi.injector.register(\"bizagi.workportal.widgets.project.plan\", [\"workportalFacade\", \"dataService\", \"bizagi.workportal.widgets.project.plan.create\", bizagi.workportal.widgets.project.plan], true);","/*\r\n *   Name: Bizagi Workportal Project Activity Sidebar\r\n *   Author: Elkin Fernando Siabato Cruz\r\n */\n\nbizagi.workportal.widgets.project.base.extend(\"bizagi.workportal.widgets.project.plan.activity.sidebar\", {}, {\n\n  /*\r\n                                                                                                                *   Constructor\r\n                                                                                                                */\n  init: function init(workportalFacade, dataService, serviceloadDataPlan, params) {\n    var self = this;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    self.serviceloadDataPlan = serviceloadDataPlan;\n\n    //Load templates\n    self.loadTemplates({\n      \"project-plan-activity-sidebar\": bizagi.getTemplate(\"bizagi.workportal.desktop.project.plan.activity.sidebar\").concat(\"#project-plan-activity-sidebar\") });\n\n  },\n\n  /*\r\n      * Renders the template defined in the widget\r\n      */\n  renderContent: function renderContent() {\n    var self = this;\n\n    var template = self.getTemplate(\"project-plan-activity-sidebar\");\n    self.content = template.render({});\n\n    return self.content;\n  },\n  postRender: function postRender() {\n    var self = this;\n    self.sub(\"LOAD_INFO_PLAN\", $.proxy(self.onNotifyLoadInfoPlan, self));\n  },\n\n  onNotifyLoadInfoPlan: function onNotifyLoadInfoPlan(event, parans) {\n    var self = this;\n    if (self.params.plan.idActivitySelected) {\n\n      var params = { idPlan: self.params.plan.id };\n      self.serviceloadDataPlan.loadData(params, self.getDateServer, self.params);\n      self.serviceloadDataPlan.subscribe(\"loadedWithDataActivities\", $.proxy(self.loadedWithDataActivities, self));\n      self.serviceloadDataPlan.subscribe(\"loadedWithDataFirstParent\", $.proxy(self.loadedWithDataFirstParent, self));\n    }\n  },\n\n  loadedWithDataActivities: function loadedWithDataActivities() {\n    var self = this;\n    self.pub(\"notify\", {\n      type: \"LOADED_ACTIVITIES_PLAN\",\n      args: self.params });\n\n    self.pub(\"notify\", {\n      type: \"LOAD_INFO_SUMMARY_PROGRESS_PLAN\",\n      args: self.params });\n\n    self.pub(\"notify\", {\n      type: \"LOAD_INFO_ACTIVITY_SUMMARY\",\n      args: self.params });\n\n    self.pub(\"notify\", {\n      type: \"LOAD_INFO_ACTIVITIES_PLAN\",\n      args: self.params });\n\n  },\n\n  loadedWithDataFirstParent: function loadedWithDataFirstParent() {\n    var self = this;\n    self.pub(\"notify\", {\n      type: \"LOAD_INFO_SUMMARY_PLAN\",\n      args: self.params });\n\n  },\n\n  clean: function clean() {\n    var self = this;\n    if (self.serviceloadDataPlan) {\n      self.serviceloadDataPlan.unsubscribe(\"loadedWithDataActivities\", $.proxy(self.loadedWithDataActivities, self));\n      self.serviceloadDataPlan.unsubscribe(\"loadedWithDataFirstParent\", $.proxy(self.loadedWithDataFirstParent, self));\n    }\n  } });\n\n\n\nbizagi.injector.register(\"bizagi.workportal.widgets.project.plan.activity.sidebar\", [\"workportalFacade\", \"dataService\", \"bizagi.workportal.services.behaviors.loadDataPlan\", bizagi.workportal.widgets.project.plan.activity.sidebar], true);","/*\r\n *   Name: Bizagi Workportal Desktop Project Plan Activity Action\r\n *   Author: Elkin Fernando Siabato Cruz\r\n */\n\nbizagi.workportal.widgets.project.base.extend(\"bizagi.workportal.widgets.project.plan.activity.action\", {}, {\n\n  /**\r\n                                                                                                               *   Constructor\r\n                                                                                                               */\n  init: function init(workportalFacade, dataService, notifier, params) {\n    var self = this;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    self.dateFormat = bizagi.localization.getResource(\"dateFormat\");\n    self.timeFormat = bizagi.localization.getResource(\"timeFormat\");\n    self.estimatedFinishDateTime; //Save complete date and time, because datepicker dont save time\n\n    self.beforeUserAssignedActivity = \"\";\n    self.notifier = notifier;\n\n\n    //Load templates\n    self.loadTemplates({\n      \"activity-action-main\": bizagi.getTemplate(\"bizagi.workportal.desktop.project.plan.activity.action\").concat(\"#project-plan-activity-action\"),\n      \"activity-action-editionpopup\": bizagi.getTemplate(\"bizagi.workportal.desktop.project.plan.activity.action\").concat(\"#project-plan-activity-action-editionpopup\") });\n\n\n    self.dialogBox = {};\n  },\n\n  /**\r\n      *\r\n      * @returns {*|jQuery|HTMLElement}\r\n      */\n  renderContent: function renderContent() {\n    var self = this;\n    self.content = $(\"<div></div>\");\n    return self.content;\n  },\n\n  /**\r\n      *\r\n      */\n  postRender: function postRender() {\n    var self = this;\n    self.sub(\"LOAD_INFO_ACTIVITY_SUMMARY\", $.proxy(self.onNotifyLoadInfoActivityExecution, self));\n    self.sub(\"EXPANDED_RIGHT_SIDEBAR\", $.proxy(self.onNotifyExpandedRightSidebar, self));\n  },\n\n  /**\r\n      * Notifies when an event is raised\r\n      */\n  onNotifyLoadInfoActivityExecution: function onNotifyLoadInfoActivityExecution(event, params) {\n    var self = this;\n    self.params = $.extend(self.params, params.args);\n\n    var $content = self.getContent().empty();\n\n    var currentActivity = {};\n    if (self.params.plan.idActivitySelected) {\n      currentActivity = self.params.plan.activities.filter(function (activity) {\n        return activity.id.toUpperCase() === self.params.plan.idActivitySelected.toUpperCase();\n      })[0];\n    }\n\n    if (self.params.plan.idUserCreator === bizagi.currentUser.idUser || currentActivity.userAssigned == bizagi.currentUser.idUser) {\n\n      var argsTemplate = {};\n      argsTemplate.currentActivityName = currentActivity.name;\n      argsTemplate.showEditAction = true;\n      if (self.params.plan.idUserCreator !== bizagi.currentUser.idUser) {\n        argsTemplate.showEditAction = false;\n      }\n\n      var tmpl = self.getTemplate(\"activity-action-main\");\n      $content.append(tmpl.render(argsTemplate));\n\n      if (argsTemplate.showEditAction) {\n        self.initilizeActionMenu();\n        self.beforeUserAssignedActivity = currentActivity.userAssigned;\n        self.content.append($content);\n        self.initializeTempleteAndEvents();\n      }\n    }\n  },\n\n  initializeTempleteAndEvents: function initializeTempleteAndEvents() {\n    var self = this;\n    self.plugins = {};\n    self.plugins.activityEdition = self.initPluginPopupEdition();\n\n    self.formEditActivity = {\n      assignee: $(\"#activity-form-assignee\", self.plugins.activityEdition),\n      date: $(\"#activity-form-date\", self.plugins.activityEdition),\n      duration: $(\"#activity-form-duration\", self.plugins.activityEdition),\n      buttonCancel: $(\"#ui-bizagi-wp-project-popupform-action-cancel\", self.plugins.activityEdition),\n      buttonUpdate: $(\"#ui-bizagi-wp-project-popupform-action-update\", self.plugins.activityEdition) };\n\n\n    self.formEditActivity.buttonCancel.on(\"click\", $.proxy(self.onClickPopupButtonCancel, self));\n    self.formEditActivity.buttonUpdate.on(\"click\", $.proxy(self.onClickPopupButtonUpdate, self));\n\n    self.formEditActivity.date.on(\"keydown\", $.proxy(self.onDeleteDate, self));\n    self.formEditActivity.duration.on(\"keyup\", $.proxy(self.onTypeDuration, self));\n  },\n\n  /**\r\n      *\r\n      */\n  onNotifyExpandedRightSidebar: function onNotifyExpandedRightSidebar() {\n    var self = this;\n    self.initilizeActionMenu();\n  },\n\n  /**\r\n      *\r\n      */\n  initilizeActionMenu: function initilizeActionMenu() {\n    var self = this;\n    $(\"#ui-bizagi-wp-project-plan-activity-action .menu\", self.content).menu({\n      select: $.proxy(self.onSelectMenu, self) }).\n    removeClass(\"ui-widget-content\");\n  },\n\n  /**\r\n      *\r\n      * @returns dialogBox.formContent\r\n      */\n  initPluginPopupEdition: function initPluginPopupEdition() {\n    var self = this;\n    var popupEditActivity = self.getTemplate(\"activity-action-editionpopup\");\n    self.dialogBox.formContent = popupEditActivity.render({});\n    return self.dialogBox.formContent;\n\n  },\n\n  /**\r\n      *\r\n      * @param element\r\n      */\n  initializeAutoComplete: function initializeAutoComplete(element) {\n    var self = this;\n    var url = self.dataService.serviceLocator.getUrl(\"admin-getUsersList\");\n\n    element.autocomplete({\n      minLength: 2,\n      source: function source(request, response) {\n        $.ajax({\n          url: url,\n          data: {\n            domain: \"\",\n            userName: \"\",\n            fullName: request.term,\n            organization: \"\",\n            pag: 1,\n            pagSize: 100,\n            orderField: \"fullName\" },\n\n          success: function success(data) {\n            response($.map(data.users, function (item) {\n              return {\n                label: item.user,\n                value: item.idUser };\n\n            }));\n          } });\n\n      },\n      select: function select(event, ui) {\n        var name = ui.item.label;\n        element.val(name);\n        self.formEditActivity.IdAssignee = ui.item.value;\n        return false;\n      },\n      focus: function focus() {\n        return false;\n      },\n      change: function change(event, ui) {\n        if (ui.item === null) {\n          self.formEditActivity.IdAssignee = null;\n          self.formEditActivity.assignee.val(\"\");\n        }\n        return false;\n      } });\n\n\n\n  },\n\n  /**\r\n      *\r\n      * @param element\r\n      */\n  initializeDatePicker: function initializeDatePicker(element) {\n    var self = this;\n    element.datepicker({\n      onSelect: function onSelect() {\n        self.formEditActivity.duration.val(\"\");\n        self.estimatedFinishDateTime = self.formEditActivity.date.datepicker(\"getDate\") ? self.formEditActivity.date.datepicker(\"getDate\").getTime() : undefined;\n      } });\n\n    element.datepicker(\"option\", \"dateFormat\", bizagi.util.dateFormatter.getDateFormatByDatePickerJqueryUI());\n  },\n\n  /**\r\n      *\r\n      * @param element\r\n      */\n  initializeSpiner: function initializeSpiner(element) {\n    var self = this;\n    function desactivateDateByDuration(event, newValue) {\n      var value = newValue || $(event.target).val();\n      if (bizagi.util.isNumeric(value) && parseInt(value, 10) > 0) {\n        self.formEditActivity.date.val(\"\");\n        self.estimatedFinishDateTime = undefined;\n      } else {\n        $(event.target).val(\"\");\n      }\n    }\n\n    element.spinner({\n      min: 1,\n      max: 1000,\n      placeHolder: bizagi.localization.getResource(\"workportal-hours\"),\n      change: function change(event) {\n        desactivateDateByDuration(event);\n      },\n      spin: function spin(event, ui) {\n        desactivateDateByDuration(event, ui.value);\n      } });\n\n  },\n\n  /***\r\n      * Events\r\n      * @param event\r\n      */\n\n  onDeleteDate: function onDeleteDate(event) {\n    var self = this;\n    if (event.keyCode === 8) {\n      $(event.target).val(\"\");\n      self.fieldDurationActive(true);\n    }\n  },\n\n  /**\r\n      *\r\n      * @param event\r\n      */\n  onTypeDuration: function onTypeDuration(event) {\n    var self = this;\n    var $target = $(event.target);\n    if ($target.val() !== \"\") {\n      self.estimatedFinishDateTime = undefined;\n    } else {\n      self.activateElement(self.form.date);\n    }\n  },\n\n  /**\r\n      * When select menu\r\n      * @param event\r\n      * @param ui\r\n      */\n  onSelectMenu: function onSelectMenu(event, ui) {\n    var self = this;\n    if ($(event.currentTarget).find(\"i\").length === 0) {\n      var item = $(ui.item).data(\"item\");\n      switch (item) {\n        case \"edit\":\n          self.onClickOpenPopupEdition();\n          break;}\n\n    }\n  },\n\n  /**\r\n      *\r\n      */\n  onClickOpenPopupEdition: function onClickOpenPopupEdition() {\n    var self = this;\n    self.initializeTempleteAndEvents();\n    self.dialogBox.formContent.dialog({\n      resizable: false,\n      draggable: false,\n      height: \"auto\",\n      width: \"600px\",\n      modal: true,\n      title: bizagi.localization.getResource(\"workportal-project-plan-title-activity-properties\"),\n      maximize: true,\n      open: $.proxy(self.onOpenPopupEdition, self),\n      close: $.proxy(self.onClosePopupEdition, self) });\n\n  },\n\n  /**\r\n     *\r\n     */\n  onOpenPopupEdition: function onOpenPopupEdition() {\n    var self = this;\n    var currentActivity = self.params.plan.activities.filter(function (activity) {\n      return activity.id.toUpperCase() === self.params.plan.idActivitySelected.toUpperCase();\n    })[0];\n\n    var activityDate = currentActivity && !bizagi.util.isEmpty(currentActivity.estimatedFinishDate) ? currentActivity.estimatedFinishDate : \"\";\n    if (!isNaN(activityDate)) {\n      activityDate = bizagi.util.dateFormatter.formatInvariant(new Date(activityDate));\n    }\n    var estimatedFinishDate = activityDate ? bizagi.util.dateFormatter.getDateFromInvariant(activityDate) : \"\";\n    var isMinimumDate = estimatedFinishDate instanceof Date ? estimatedFinishDate.getTime() < self.getDateServer() : false;\n\n    self.initializeAutoComplete(self.formEditActivity.assignee);\n    self.initializeDatePicker(self.formEditActivity.date);\n    self.initializeSpiner(self.formEditActivity.duration);\n\n    if (currentActivity.userAssigned) {\n      self.setUserAssignedById(currentActivity.userAssigned);\n    }\n\n    self.formEditActivity.date.datepicker(\"option\", \"minDate\", new Date(self.getDateServer()));\n\n    if (currentActivity.estimatedFinishDate && isMinimumDate) {\n      self.formEditActivity.date.datepicker(\"option\", \"minDate\", estimatedFinishDate); //set minimum because, if date is past\n    }\n\n    if (currentActivity.estimatedFinishDate) {\n      if (estimatedFinishDate) {\n        self.formEditActivity.date.datepicker(\"setDate\", estimatedFinishDate);\n      }\n      self.estimatedFinishDateTime = currentActivity.estimatedFinishDate;\n    }\n\n    if (currentActivity.duration) {\n      self.formEditActivity.duration.val(parseInt(currentActivity.duration, 10));\n    }\n  },\n\n  /**\r\n      * When close popup edition\r\n      */\n  onClosePopupEdition: function onClosePopupEdition() {\n    var self = this;\n    self.removePopupWidgets();\n  },\n\n  /**\r\n      *\r\n      * @param idUser\r\n      */\n  setUserAssignedById: function setUserAssignedById(idUser) {\n    var self = this;\n    //Show images users\n    self.callGetDataUsers(idUser).then(function (responseUsers) {\n      self.formEditActivity.assignee.val(responseUsers[0].name);\n    });\n    self.formEditActivity.IdAssignee = idUser;\n  },\n\n  /**\r\n      *\r\n      * @param event\r\n      */\n  onClickPopupButtonCancel: function onClickPopupButtonCancel(event) {\n    var self = this;\n    event.preventDefault();\n    self.removePopupWidgets();\n  },\n\n  /**\r\n     * Remove popup widgets\r\n     */\n  removePopupWidgets: function removePopupWidgets() {\n    var self = this;\n    self.formEditActivity.assignee.next().find(\"span\").html(\"\");\n    self.dialogBox.formContent.remove();\n    $(\"#ui-datepicker-div\").remove();\n  },\n\n  /**\r\n      *  Triggered when click update plan activity\r\n      */\n  onClickPopupButtonUpdate: function onClickPopupButtonUpdate() {\n    var self = this;\n    if (self.validateParamsOfFormEditActivity()) {\n      var currentActivity = self.params.plan.activities.filter(function (activity) {\n        return activity.id.toUpperCase() === self.params.plan.idActivitySelected.toUpperCase();\n      })[0];\n      var idUserAssigned = self.formEditActivity.IdAssignee || bizagi.currentUser.idUser;\n      if (self.formEditActivity.duration.val() != \"\") {\n        self.params.plan.activities.filter(function (activity) {\n          return activity.id.toUpperCase() === self.params.plan.idActivitySelected.toUpperCase();\n        })[0].estimatedFinishDate = \"\";\n      }\n      var updateActivity = {\n        progress: currentActivity.progress,\n        id: currentActivity.id,\n        startDate: currentActivity.startDate,\n        duration: self.formEditActivity.duration.val(),\n        userAssigned: idUserAssigned,\n        allowEdition: currentActivity.allowEdition,\n        description: currentActivity.description,\n        name: currentActivity.name,\n        idPlan: currentActivity.idPlan,\n        estimatedFinishDate: self.estimatedFinishDateTime,\n        finishDate: currentActivity.finishDate,\n        items: currentActivity.items };\n\n      $.when(self.dataService.editActivityPlan(updateActivity)).done(function () {\n        currentActivity = $.extend(currentActivity, updateActivity);\n        self.removePopupWidgets();\n\n        if (self.beforeUserAssignedActivity !== self.formEditActivity.IdAssignee) {\n          self.pub(\"notify\", {\n            type: \"ACTIVITYPLANCOMMENTS\",\n            args: $.extend(self.params, { refreshAllWidgets: true }) });\n\n        } else\n        {\n          self.pub(\"notify\", {\n            type: self.params.showContextByMenuDashboard,\n            args: self.params });\n\n        }\n\n        self.removePopupWidgets();\n        self.notifier.showSucessMessage(bizagi.localization.getResource(\"workportal-project-plan-activity-update-message\"));\n      });\n    }\n  },\n\n  /***\r\n      * Events\r\n      */\n  onClickFavorite: function onClickFavorite(event) {\n    event.preventDefault();\n    var self = this;\n    var favoriteOptions = {};\n    if ($(event.target).hasClass(\"bz-icon-star-outline\")) {\n      favoriteOptions = {\n        idObject: self.params.idCase,\n        favoriteType: \"CASES\" };\n\n      $.when(self.dataService.addFavorite(favoriteOptions)).done(function (favoritesData) {\n        self.params.guidFavorite = favoritesData.idFavorites;\n        $(event.target).removeClass(\"bz-icon-star-outline\");\n        $(event.target).addClass(\"bz-icon-star\");\n      });\n    } else\n    {\n      favoriteOptions = {\n        idObject: self.params.guidFavorite,\n        favoriteType: \"CASES\" };\n\n      $.when(self.dataService.delFavorite(favoriteOptions)).done(function () {\n        $(event.target).addClass(\"bz-icon-star-outline\");\n        $(event.target).removeClass(\"bz-icon-star\");\n      });\n    }\n  },\n\n  /**\r\n      * Clean events and plugins\r\n      */\n  clean: function clean() {\n    var self = this;\n    self.unsub(\"LOAD_INFO_ACTIVITY_SUMMARY\", $.proxy(self.onNotifyLoadInfoActivityExecution, self));\n    self.unsub(\"EXPANDED_RIGHT_SIDEBAR\", $.proxy(self.onNotifyExpandedRightSidebar, self));\n  },\n\n  /**\r\n      * Validate form edit plan activity\r\n      * @returns {boolean}\r\n      */\n  validateParamsOfFormEditActivity: function validateParamsOfFormEditActivity() {\n    var self = this;\n    var userAssigned = self.formEditActivity.assignee;\n    if (userAssigned.val() && userAssigned.val() !== \"\" && self.formEditActivity.IdAssignee) {\n      return true;\n    } else {\n      var messageValidationField = bizagi.localization.getResource(\"workportal-general-error-field-required\");\n      messageValidationField = messageValidationField.replace(\"{0}\", bizagi.localization.getResource(\"workportal-project-plan-assignee\").toLowerCase());\n      userAssigned.next().find(\"span\").html(messageValidationField);\n      return false;\n    }\n  },\n\n  /**\r\n      * Call services\r\n      */\n  callGetDataUsers: function callGetDataUsers(csvIdUsers) {\n    var self = this,\n    defer = $.Deferred();\n    var params = {\n      userIds: csvIdUsers,\n      width: 50,\n      height: 50 };\n\n\n    self.dataService.getUsersData(params).always(function (response) {\n      defer.resolve(response);\n    });\n    return defer.promise();\n  } });\n\n\nbizagi.injector.register(\"bizagi.workportal.widgets.project.plan.activity.action\", [\"workportalFacade\", \"dataService\", \"notifier\", bizagi.workportal.widgets.project.plan.activity.action]);","/*\r\n *   Name: Bizagi Workportal Desktop Project Plan Activity Time\r\n *   Author: Elkin Fernando Siabato Cruz\r\n */\n/***\r\n     * TODO IMPORTANT: This widget is development with TDD, test this file when changes\r\n     */\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.project.plan.activity.time\", {}, {\n\n  /*\r\n                                                                                                       *   Constructor\r\n                                                                                                       *\r\n                                                                                                       */\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    //Constants\n    self.EXECUTING_ACTIVITY = \"EXECUTING\";\n    self.FINISHED_ACTIVITY = \"FINISHED\";\n\n    //Regional\n    self.datePickerRegional = bizagi.localization.getResource(\"datePickerRegional\");\n\n    //Load templates\n    self.loadTemplates({\n      \"plan-time-main\": bizagi.getTemplate(\"bizagi.workportal.desktop.project.plan.activity.time\").concat(\"#project-plan-activity-time\") });\n\n  },\n\n  renderContent: function renderContent() {\n    var self = this;\n    self.content = $(\"<div></div>\");\n    return self.content;\n  },\n\n  postRender: function postRender() {\n    var self = this;\n    self.sub(\"LOAD_INFO_ACTIVITY_SUMMARY\", $.proxy(self.onNotifyLoadInfoActivitySummary, self));\n  },\n\n  /**\r\n      * Notifies when an event is raised\r\n      */\n  onNotifyLoadInfoActivitySummary: function onNotifyLoadInfoActivitySummary(event, params) {\n    var self = this;\n    self.params = $.extend(self.params, params.args);\n    self.getContent().empty();\n\n    var currentActivity = self.params.plan.activities.filter(function (activity) {\n      return activity.id === self.params.plan.idActivitySelected;\n    })[0];\n\n    if (currentActivity.startDate) {\n      self.getStateActivity(currentActivity);\n\n      var argsTemplate = {\n        time: {\n          fromDate: self.getFormattedDate(new Date(self.getFirstDate(currentActivity))) } };\n\n\n      var dataProgressWidget = self.getDataByScenarios(currentActivity, true);\n\n      $.when(dataProgressWidget.unitTime).done(function (auxUnitTime) {\n        dataProgressWidget = $.extend(dataProgressWidget, {\n          unitTime: auxUnitTime });\n\n        self.updateWidget($.extend(argsTemplate.time, dataProgressWidget));\n      });\n\n    }\n  },\n  updateWidget: function updateWidget(argsTemplate) {\n    var self = this;\n    var $content = self.getContent().empty();\n    var contentTemplate = self.getTemplate(\"plan-time-main\");\n\n    var relativeTime = bizagi.util.dateFormatter.getRelativeTime(new Date(Date.now() - argsTemplate.unitTime.minutes * 60 * 1000), null, false);\n\n    var messageDescripionDifference = bizagi.localization.getResource(\"workportal-project-activity-state-\" + argsTemplate.keywordResource);\n    argsTemplate.messageTime = messageDescripionDifference.replace(\"%s\", relativeTime);\n\n    contentTemplate.\n    render(argsTemplate).\n    appendTo($content);\n\n    //Begin Adjust status bar next to the number days\n    var $barRemainingDate = $(\".remaining-days .time-remaining\", $content);\n    var widthNumberDays = $(\".remaining-days .days\", $content).width();\n    $barRemainingDate.css(\"padding-left\", (widthNumberDays + 7).toString() + \"px\");\n\n    var $barCompletedDate = $(\".remaining-days .bar-completed\", $content);\n\n    $barCompletedDate.css(\"width\", argsTemplate.percentBar + \"%\");\n    //End Adjust status bar next to the number days\n\n  },\n  getStateActivity: function getStateActivity(activity) {\n    var self = this;\n    if (activity.finishDate) {\n      activity.currentState = self.FINISHED_ACTIVITY;\n      return self.FINISHED_ACTIVITY;\n    } else\n    {\n      activity.currentState = self.EXECUTING_ACTIVITY;\n      return self.EXECUTING_ACTIVITY;\n    }\n  },\n  getFirstDate: function getFirstDate(activity) {\n    var self = this;\n    if (activity.currentState === self.EXECUTING_ACTIVITY) {\n      return activity.startDate;\n    } else {\n      return activity.finishDate;\n    }\n  },\n  getDataByScenarios: function getDataByScenarios(activity) {\n    var self = this;\n    var response = {\n      colorBar: null,\n      percentBar: 100,\n      keywordResource: null,\n      unitTime: null };\n\n    var params = {};\n    switch (activity.currentState) {\n      case self.EXECUTING_ACTIVITY:\n        response.keywordResource = \"opened\";\n        response.colorBar = self.getColorByCreatedAndEstimatedDate(activity);\n\n        params = {\n          idUser: bizagi.currentUser.idUser,\n          fromDate: activity.startDate,\n          toDate: Date.now() };\n\n        response.unitTime = self.callGetEffectiveDuration(params);\n\n        break;\n      case self.FINISHED_ACTIVITY:\n        response.colorBar = \"Gray\";\n        response.keywordResource = \"closed\";\n        params = {\n          idUser: bizagi.currentUser.idUser,\n          fromDate: activity.finishDate,\n          toDate: Date.now() };\n\n        response.unitTime = self.callGetEffectiveDuration(params);\n        break;}\n\n    return response;\n  },\n\n  getColorBar: function getColorBar(activity) {\n    var self = this;\n    return self.getDataByScenarios(activity).colorBar;\n  },\n  getPercentBar: function getPercentBar(activity) {\n    var self = this;\n    return self.getDataByScenarios(activity).percentBar;\n  },\n  getKeywordResourceDescriptionBar: function getKeywordResourceDescriptionBar(activity) {\n    var self = this;\n    return self.getDataByScenarios(activity).keywordResource;\n  },\n  getUnitTime: function getUnitTime(activity) {\n    var self = this;\n    return self.getDataByScenarios(activity).unitTime;\n  },\n\n  getColorByCreatedAndEstimatedDate: function getColorByCreatedAndEstimatedDate(activity) {\n    var self = this;\n    var response = \"Red\";\n    if (activity.estimatedFinishDate) {\n      if (Date.now() < activity.estimatedFinishDate) {\n        var theSameDay = new Date().getUTCDate() === new Date(activity.estimatedFinishDate).getUTCDate();\n        if (theSameDay) {\n          response = \"Yellow\";\n        } else\n        {\n          response = \"Green\";\n        }\n      }\n    }\n    return response;\n  },\n\n  getFormattedDate: function getFormattedDate(dateObj) {\n    var self = this;\n    var monthsNames = self.datePickerRegional.monthNames;\n    var shortMonth = dateObj.getMonth();\n\n    return monthsNames[shortMonth] + \" \" + bizagi.util.dateFormatter.formatDate(dateObj, \"dd hh:mm tt\", bizagi.localization.getResource(\"datePickerRegional\"));\n  },\n\n  /**\r\n      * Call services\r\n      */\n  callGetEffectiveDuration: function callGetEffectiveDuration(params) {\n    var self = this;\n    var d = $.Deferred();\n    $.when(\n    self.dataService.getEffectiveDuration(params)).\n    done(function (data) {\n      d.resolve(data);\n    });\n    return d.promise();\n  } });\n\n\n\nbizagi.injector.register(\"bizagi.workportal.widgets.project.plan.activity.time\", [\"workportalFacade\", \"dataService\", bizagi.workportal.widgets.project.plan.activity.time], true);","/*\r\n *   Name: Bizagi Workportal Desktop Project Plan Activity Progress\r\n *   Author: Elkin Fernando Siabato Cruz\r\n */\n\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.project.plan.activity.progress\", {}, {\n\n  /*\r\n                                                                                                           *   Constructor\r\n                                                                                                           */\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    self.plugins = {};\n    self.dialogBox = {};\n\n    //Load templates\n    self.loadTemplates({\n      \"plan-progress-main\": bizagi.getTemplate(\"bizagi.workportal.desktop.project.plan.activity.progress\").concat(\"#project-plan-activity-progress\"),\n      \"plan-progress-popup-edit\": bizagi.getTemplate(\"bizagi.workportal.desktop.project.plan.activity.progress\").concat(\"#project-plan-activity-edit-progress\") });\n\n  },\n\n  renderContent: function renderContent() {\n    var self = this;\n    self.content = $(\"<div></div>\");\n    return self.content;\n  },\n\n  postRender: function postRender() {\n    var self = this;\n    self.sub(\"LOAD_INFO_ACTIVITY_SUMMARY\", $.proxy(self.onNotifyLoadInfoActivityExecution, self));\n    self.sub(\"UPDATE_ITEMS_FROM_FORMRENDER\", $.proxy(self.onNotifyUpdateItemFromRender, self));\n  },\n\n  /**\r\n      * Notifies when an event is raised\r\n      */\n  onNotifyLoadInfoActivityExecution: function onNotifyLoadInfoActivityExecution(event, params) {\n    var self = this;\n    self.params = $.extend(self.params, params.args);\n    var $content = self.getContent().empty();\n\n    var activityToShow = self.params.plan.activities.filter(function (activity) {\n      return activity.id.toUpperCase() == self.params.plan.idActivitySelected.toUpperCase();\n    })[0];\n\n    var argsTemplate = {};\n    argsTemplate.valuePercentBarComplete = 0;\n    argsTemplate.progress = {\n      progress: activityToShow.progress,\n      canEdit: activityToShow.items.length === 0 };\n\n\n    if (argsTemplate.progress.progress) {\n      argsTemplate.valuePercentBarComplete = argsTemplate.progress.progress;\n    }\n\n    //Update widget\n    var templateMain = self.getTemplate(\"plan-progress-main\");\n    templateMain.render(argsTemplate).appendTo($content);\n\n    self.plugins.popupEditProgress = self.initPluginPopupEditProgress();\n\n    var popupEditProgress = self.plugins.popupEditProgress;\n\n    self.formEditProgress = {\n      sliderProgress: $(\"#sliderProgress\", popupEditProgress).slider({\n        orientation: \"horizontal\",\n        range: \"min\",\n        max: 100,\n        width: 100,\n        from: 5,\n        to: 50,\n        step: 1,\n        value: argsTemplate.valuePercentBarComplete,\n        slide: $.proxy(self.onChangesliderProgress, self),\n        change: $.proxy(self.onChangesliderProgress, self) }).\n      each(function () {\n        var vals = $(this).slider(\"option\", \"max\") - $(this).slider(\"option\", \"min\");\n        for (var i = 0; i <= vals; i += 10) {\n          var el = $(\"<label class='step'>\" + i + \"</label>\").css(\"left\", i / vals * 100 + \"%\");\n          $(this).append(el);\n        }\n      }),\n      numericTextBoxPlugin: $(\"#inputProgressNumericTextBox\", popupEditProgress).spinner({\n        format: \"n0\",\n        min: 0,\n        max: 100,\n        spin: $.proxy(self.onChangeNumericTextBoxProgress, self),\n        change: $.proxy(self.onChangeNumericTextBoxProgress, self),\n        value: argsTemplate.valuePercentBarComplete,\n        decimals: 0 }),\n\n      buttonChangeProgress: $(\"#button-accept-change-progress\", popupEditProgress),\n      buttonCancel: $(\"#button-cancel-change-progress\", popupEditProgress) };\n\n\n    //Handlers\n    $(\".action-open-popup-edit-progress\", $content).on(\"click\", $.proxy(self.onShowPopupEditProgress, self));\n\n    self.formEditProgress.buttonCancel.on(\"click\", $.proxy(self.onClickCancel, self));\n    self.formEditProgress.buttonChangeProgress.on(\"click\", $.proxy(self.onSubmitFormChangeProgress, self));\n\n    self.updateProgressUI(argsTemplate.valuePercentBarComplete);\n    self.formEditProgress.numericTextBoxPlugin.spinner(\"value\", argsTemplate.valuePercentBarComplete);\n\n  },\n\n  onNotifyUpdateItemFromRender: function onNotifyUpdateItemFromRender(event, params) {\n    var self = this;\n    var listItems = params.args.items;\n    var activityWork = params.args.activityWork;\n\n    var progress;\n    if (listItems.length > 0) {\n      //Hide edit progress\n      $(\".action-open-popup-edit-progress\", self.content).hide();\n    } else {\n      $(\".action-open-popup-edit-progress\", self.content).show();\n    }\n    //set new progress\n    $(\".bz-wp-timestamp span\", self.content).text(activityWork);\n    $(\".bz-wp-progress-bar\", self.content).css(\"width\", activityWork + \"%\");\n\n  },\n\n  updateProgressUI: function updateProgressUI(newPercentProgress) {\n    var self = this,\n    $content = self.getContent();\n\n    $(\".bz-wp-timestamp span\", $content).text(newPercentProgress);\n\n    //Begin Adjust status bar next to the number days\n    var $barRemainingDate = $(\".remaining-days .time-remaining\", $content);\n    var widthNumberDays = $(\".remaining-days .days\", $content).width();\n    $barRemainingDate.css(\"padding-left\", (widthNumberDays + 7).toString() + \"px\");\n\n    var $barCompletedDate = $(\".remaining-days .bar-completed\", $content);\n\n    $barCompletedDate.css(\"width\", newPercentProgress.toString() + \"%\");\n    //End Adjust status bar next to the number days\n  },\n\n  initPluginPopupEditProgress: function initPluginPopupEditProgress() {\n    var self = this;\n    var templatePopupEditProgress = self.getTemplate(\"plan-progress-popup-edit\");\n    self.dialogBox.formContent = templatePopupEditProgress.render();\n    return self.dialogBox.formContent;\n\n  },\n  /*\r\n      * UI\r\n      */\n\n  onShowPopupEditProgress: function onShowPopupEditProgress() {\n    var self = this;\n\n    self.dialogBox.formContent.dialog({\n      resizable: false,\n      draggable: false,\n      height: \"auto\",\n      width: \"600px\",\n      modal: true,\n      title: bizagi.localization.getResource(\"workportal-project-plan-progress-title\"),\n      maximize: true,\n      open: $.proxy(self.onOpenPopupPlan, self),\n      close: function close() {\n        self.dialogBox.formContent.dialog(\"destroy\");\n        self.dialogBox.formContent.detach();\n      } });\n\n\n    self.previusValueProgress = self.formEditProgress.sliderProgress.slider(\"value\");\n\n  },\n\n  onChangeNumericTextBoxProgress: function onChangeNumericTextBoxProgress(event) {\n    var self = this;\n    var newValue = self.formEditProgress.numericTextBoxPlugin.spinner(\"value\");\n    self.formEditProgress.sliderProgress.slider(\"value\", newValue);\n  },\n\n  onChangesliderProgress: function onChangesliderProgress(event) {\n    var self = this;\n    var newValue = self.formEditProgress.sliderProgress.slider(\"value\");\n    self.formEditProgress.numericTextBoxPlugin.spinner(\"value\", newValue);\n  },\n\n  onClickCancel: function onClickCancel(event) {\n    event.preventDefault();\n    var self = this;\n\n    self.dialogBox.formContent.dialog(\"destroy\");\n    self.dialogBox.formContent.detach();\n    //return before value progress\n    self.formEditProgress.sliderProgress.slider(\"value\", self.previusValueProgress);\n    self.formEditProgress.numericTextBoxPlugin.spinner(\"value\", self.previusValueProgress);\n  },\n\n  onSubmitFormChangeProgress: function onSubmitFormChangeProgress(event) {\n    event.preventDefault();\n    var self = this;\n\n    self.formEditProgress.buttonChangeProgress.prop(\"disabled\", true);\n\n    var activityToShow = self.params.plan.activities.filter(function (activity) {\n      return activity.id == self.params.plan.idActivitySelected;\n    })[0];\n    var params = $.extend(activityToShow, {\n      progress: self.formEditProgress.numericTextBoxPlugin.spinner(\"value\"),\n      idPlan: self.params.plan.id });\n\n    $.when(self.dataService.editActivityPlan(params)).done(function () {\n      self.formEditProgress.buttonChangeProgress.prop(\"disabled\", false);\n      activityToShow.progress = self.formEditProgress.numericTextBoxPlugin.spinner(\"value\");\n      self.updateProgressUI(activityToShow.progress);\n      self.dialogBox.formContent.dialog(\"destroy\");\n      self.dialogBox.formContent.detach();\n    });\n  } });\n\n\n\nbizagi.injector.register(\"bizagi.workportal.widgets.project.plan.activity.progress\", [\"workportalFacade\", \"dataService\", bizagi.workportal.widgets.project.plan.activity.progress], true);","/*\r\n *   Name: Bizagi Workportal Desktop Project Plan Activity Subprocesses Controller\r\n *   Author: Elkin Fernando Siabato Cruz\r\n */\n\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.project.plan.activity.subprocesses\", {}, {\n  /*\r\n                                                                                                               *   Constructor\r\n                                                                                                               */\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    //Load templates\n    self.loadTemplates({\n      \"project-subprocesses\": bizagi.getTemplate(\"bizagi.workportal.desktop.project.plan.activity.subprocesses\").concat(\"#project-plan-activity-plan-subprocesses-wrapper\"),\n      \"project-subprocesses-tootip-custom-properties\": bizagi.getTemplate(\"bizagi.workportal.desktop.project.plan.activity.subprocesses\").concat(\"#project-activity-plan-subprocesses-tooltip-custom-properties-wrapper\") });\n\n  },\n\n  /*\r\n      * Renders the template defined in the widget\r\n      */\n  renderContent: function renderContent() {\n    var self = this;\n    self.content = $(\"<div></div>\");\n    return self.content;\n  },\n\n  /*\r\n      * links events with handlers\r\n      */\n  postRender: function postRender() {\n    var self = this;\n  } });\n\n\n\nbizagi.injector.register(\"bizagi.workportal.widgets.project.plan.activity.subprocesses\", [\"workportalFacade\", \"dataService\", bizagi.workportal.widgets.project.plan.activity.subprocesses]);","/*\r\n *   Name: Bizagi Workportal Desktop Project Plan Activity Parent\r\n *   Author: Elkin Fernando Siabato Cruz\r\n */\n\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.project.plan.activity.parent\", {}, {\n\n  /*\r\n                                                                                                         *   Constructor\r\n                                                                                                         */\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    //Load templates\n    self.loadTemplates({\n      \"plan-parent-main\": bizagi.getTemplate(\"bizagi.workportal.desktop.project.plan.activity.parent\").concat(\"#project-plan-activity-parent\") });\n\n  },\n\n  renderContent: function renderContent() {\n    var self = this;\n    self.content = $(\"<div></div>\");\n    return self.content;\n  },\n\n  postRender: function postRender() {\n    var self = this;\n    self.sub(\"LOAD_INFO_ACTIVITY_SUMMARY\", $.proxy(self.onNotifyLoadInfoActivityExecution, self));\n  },\n\n  /**\r\n      * Notifies when an event is raised\r\n      */\n\n  onNotifyLoadInfoActivityExecution: function onNotifyLoadInfoActivityExecution(event, params) {\n    var self = this;\n    self.params = $.extend(self.params, params.args);\n    var $content = self.getContent().empty();\n\n    $.when(self.dataService.getPlanParent({ idPlan: self.params.plan.id })).done(function (planParent) {\n      self.params.plan.parent = planParent;\n      if (self.params.plan.parent) {\n        var argsTemplate = {};\n        argsTemplate.parent = {\n          idParent: self.params.plan.parent.radNumber,\n          nameParent: self.params.plan.parent.displayName,\n          idCase: self.params.plan.parent.idCase,\n          idWorkflow: self.params.plan.parent.idWorkflow,\n          idWorkItem: self.params.plan.parent.idWorkItem,\n          idTask: self.params.plan.parent.idTask };\n\n\n        //Update widget\n        var contentTemplate = self.getTemplate(\"plan-parent-main\");\n        contentTemplate.\n        render(argsTemplate).\n        appendTo($content);\n\n        $(\"#go-to-parent-case\", $content).on(\"click\", $.proxy(self.onClickGoToParentCase, self));\n      }\n    });\n\n\n  },\n\n  onClickGoToParentCase: function onClickGoToParentCase(event) {\n    event.preventDefault();\n    var self = this;\n    self.routingExecute($(event.target).closest(\"#go-to-parent-case\"));\n  } });\n\n\nbizagi.injector.register(\"bizagi.workportal.widgets.project.plan.activity.parent\", [\"workportalFacade\", \"dataService\", bizagi.workportal.widgets.project.plan.activity.parent], true);","/*\r\n *   Name: Bizagi Workportal Desktop Project Plan Activity Users Controller\r\n *   Author: Elkin Fernando Siabato Cruz\r\n */\n\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.project.plan.activity.users\", {}, {\n  /*\r\n                                                                                                        *   Constructor\r\n                                                                                                        */\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n\n    self.usersMap = {};\n    self.plugins = {};\n    self.usersInformation = [];\n    self.globalHandlersService = bizagi.injector.get('globalHandlersService');\n    self.usersAssignees = [];\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    //Load templates\n    //The load template the users plan because they are the same\n    self.loadTemplates({\n      \"plan-users-main\": bizagi.getTemplate(\"bizagi.workportal.desktop.project.plan.users\").concat(\"#project-plan-users\") });\n\n  },\n\n  /*\r\n      * Renders the template defined in the widget\r\n      */\n  renderContent: function renderContent() {\n    var self = this;\n    self.content = $(\"<div></div>\");\n    return self.content;\n  },\n\n  /*\r\n      * links events with handlers\r\n      */\n  postRender: function postRender() {\n    var self = this;\n    self.sub(\"LOAD_INFO_ACTIVITY_SUMMARY\", $.proxy(self.onNotifyLoadInfoActivityExecution, self));\n  },\n\n  /*\r\n      * validate if the activity is running\r\n      */\n  activityRunning: function activityRunning(activity) {\n    return activity.startDate !== null && activity.finishDate === null;\n  },\n\n  onNotifyLoadInfoActivityExecution: function onNotifyLoadInfoActivityExecution(event, params) {\n    var self = this,\n    cvsGuidUsers = [],\n    activitiesUsers = [],\n    $content = self.getContent().empty();\n    self.params = $.extend(self.params, params.args);\n\n    var ownerUserId = self.params.plan.idUserCreator;\n    var ownerUserGuid = self.params.plan.idUserCreator;\n\n    activitiesUsers.push({ \"idUser\": ownerUserId, \"guidUser\": ownerUserGuid, \"userType\": [\"owner\"] });\n    self.usersMap[\"-\" + ownerUserId + \"-\"] = {\n      picture: \"\",\n      id: ownerUserId,\n      guid: ownerUserGuid,\n      name: \"\",\n      userType: [\"owner\"] };\n\n    cvsGuidUsers.push(ownerUserGuid);\n    $.each(self.params.plan.activities, function (index, activity) {\n      if (self.activityRunning(activity)) {\n        var userId = activity.userAssigned;\n        var userGuid = activity.userAssignedGuid;\n        if (userId === ownerUserId) {\n          if ($.inArray(\"Assigned\", activitiesUsers[0].userType) === -1) {\n            activitiesUsers[0].userType.push(\"Assigned\");\n            self.usersMap[\"-\" + ownerUserId + \"-\"].userType.push(\"Assigned\");\n          }\n        } else\n        {\n          self.usersMap[\"-\" + userId + \"-\"] = {\n            picture: \"\",\n            id: userId,\n            name: \"\",\n            userType: [\"Assigned\"] };\n\n          if (activitiesUsers.filter(function (user) {return user.idUser == userId;}).length === 0) {\n            var id = userGuid ? userGuid : userId;\n            activitiesUsers.push({ \"idUser\": id, \"userGuid\": id, \"userType\": [\"Assigned\"] });\n            cvsGuidUsers.push(id);\n          }\n        }\n      }\n    });\n    self.activitiesUsers = activitiesUsers;\n\n    //Update widget\n    var contentTemplate = self.getTemplate(\"plan-users-main\");\n    contentTemplate.\n    render({\n      assignee: self.justAssignees(activitiesUsers),\n      label: bizagi.localization.getResource(\"workportal-project-plan-assignee\") }).\n\n    appendTo($content);\n    self.addEventHandlersModal();\n    $.when(self.callGetDataUsers(cvsGuidUsers)).then(function () {\n      self.showCreatorInformation(ownerUserId);\n      self.renderUserProfilesAndImages();\n    });\n  },\n\n  /**\r\n      * return standar userAdapter information with only assigned users\r\n      * @param {Array} allUsers \r\n      */\n  justAssignees: function justAssignees(allUsers) {\n    var usersAssignee = [];\n    allUsers.map(function (user) {\n      var isOwner = user.userType.indexOf(\"owner\") !== -1;\n      var isAssignee = user.userType.indexOf(\"Assigned\") !== -1;\n      usersAssignee.push(usersAdapter.createJsonUserInfo(user.idUser, \"\", \"\", \"\", \"\", \"\", isAssignee, isOwner, [], []));\n    });\n    return usersAdapter.justAssignees(usersAssignee);\n  },\n\n  /**\r\n      * show the information of the creator case\r\n      * @param {string} ownerUserId guid user creator\r\n      */\n  showCreatorInformation: function showCreatorInformation(ownerUserId) {\n    var self = this;\n    var userCreator = self.usersMap[\"-\" + ownerUserId + \"-\"];\n    var userInfo = usersAdapter.createJsonUserInfo(\n    userCreator.id,\n    userCreator.name,\n    userCreator.username,\n    userCreator.picture ? userCreator.picture : undefined,\n    userCreator.email,\n    userCreator.name.getInitials(),\n    false,\n    true,\n    [],\n    []);\n\n    self.content.find(\".ui-bizagi-wp-project-plan-users .ui-bizagi-wp-project-users-creator-info\").userinformation(self, { user: userInfo });\n  },\n\n  /**\r\n      * UI\r\n      */\n\n  renderUserProfilesAndImages: function renderUserProfilesAndImages() {\n    var self = this;\n    $.each(self.usersMap, function (i, obj) {\n      var $li = $(\".ui-bizagi-wp-userlist li[data-iduser=\" + obj.id + \"]\", self.content);\n      if (obj.picture !== \"\") {\n        $li.find(\"img\").prop(\"src\", obj.picture);\n      } else\n      {\n        $li.find(\"img\").hide();\n        if (obj.name !== undefined) {\n          $li.find(\"span\").html(obj.name.getInitials());\n        } else\n        {\n          console.log(\"obj.name is undefined\");\n        }\n\n      }\n    });\n    $(\".ui-bizagi-wp-userlist li\", self.content).not(\".moreUsers\").on('mouseenter', function (ev) {\n      var $target = $(ev.target);\n      var userId = $(this).data(\"iduser\");\n      var userSelected;\n      $.each(self.usersMap, function (i, obj) {\n        if (obj.id === userId)\n        userSelected = obj;\n      });\n      var usersActivities = self.usersAssignees.find(function (assignee) {\n        return assignee.userAssigned === userSelected.id;\n      });\n      var activities = [];\n      if (usersActivities)\n      usersActivities.activities.map(function (activity) {\n        activities.push(activity.name);\n      });\n      var userParam = usersAdapter.createJsonUserInfo(userSelected.id, userSelected.name, userSelected.username, userSelected.picture, userSelected.email, userSelected.name.getInitials(), self.getIsAssignee(userSelected), self.getIsOwner(userSelected), activities, undefined);\n\n      $target.parent().usertooltip(self, { target: $target, user: userParam });\n    });\n  },\n\n  getIsAssignee: function getIsAssignee(userSelected) {\n    if (userSelected.userType.indexOf(\"Assigned\") > -1) {\n      return true;\n    }\n    return false;\n  },\n\n  getIsOwner: function getIsOwner(userSelected) {\n    if (userSelected.userType.indexOf(\"owner\") > -1) {\n      return true;\n    }\n    return false;\n  },\n  /*\r\n      *  Get data for users\r\n      */\n  callGetDataUsers: function callGetDataUsers(cvsGuidUsers) {\n    var self = this,\n    params = {},\n    defer = $.Deferred();\n    params = {\n      usersGuids: cvsGuidUsers.join(),\n      width: 50,\n      height: 50 };\n\n    $.when(self.dataService.getUsersData(params)).always(function (response) {\n      self.usersInformation = response;\n      for (var i = 0, length = response.length; i < length; i += 1) {\n        if (typeof response[i].name === \"undefined\") {\n          bizagi.log(response[i] + \" Id Not Found\", response, \"error\");\n        } else {\n          if (self.usersMap[\"-\" + response[i].id + \"-\"]) {\n            self.usersMap[\"-\" + response[i].id + \"-\"].picture += response[i].picture ? \"data:image/png;base64,\" + response[i].picture : \"\";\n            self.usersMap[\"-\" + response[i].id + \"-\"].name = response[i].name || \"\";\n            self.usersMap[\"-\" + response[i].id + \"-\"].username = response[i].username || \"\";\n            self.usersMap[\"-\" + response[i].id + \"-\"].email = response[i].email || \"\";\n          } else\n          {\n            console.log(\"The object is undefined\");\n          }\n        }\n      }\n      self.getUsersAssignees();\n      defer.resolve();\n    });\n    return defer.promise();\n  },\n\n  getUsersAssignees: function getUsersAssignees() {\n    var self = this;\n    for (var i = 0; i < self.usersInformation.length; i++) {\n      self.usersAssignees.push(self.getUserAssignee(self.usersInformation[i]));\n    }\n\n  },\n\n  getUserAssignee: function getUserAssignee(user) {\n    var self = this;\n    var tasks = [];\n    $.each(self.params.plan.activities, function (index, activity) {\n      var userId = activity.userAssigned;\n      if (userId === user.id && self.activityRunning(activity)) {\n        tasks.push({ \"name\": activity.name });\n      }\n    });\n    user.tasks = tasks;\n    var types = self.activitiesUsers.find(function (actUser) {\n      return actUser.idUser == user.id;\n    });\n    user.userType = types.userType;\n\n    var userAssignees = usersAdapter.createJsonUserInfo(\n    user.id,\n    user.name,\n    user.username,\n    user.picture ? \"data:image/png;base64,\" + user.picture : undefined,\n    user.email,\n    user.name.getInitials(),\n    self.getIsAssignee(user),\n    self.getIsOwner(user),\n    user.tasks,\n    []);\n\n    return userAssignees;\n  },\n\n  addEventHandlersModal: function addEventHandlersModal() {\n    var self = this;\n    $(\".moreUsers\").click(function (event) {\n      event.preventDefault();\n      event.stopPropagation();\n      var usersAssignees = self.usersAssignees || [];\n      self.globalHandlersService.publish(\"showDialogWidget\", {\n        widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_USERS_MODAL,\n        closeVisible: true,\n        data: usersAssignees,\n        maximize: true,\n        modalParameters: {\n          title: bizagi.localization.getResource(\"workportal-project-users-title\") + \" (\" + usersAssignees.length + \")\",\n          width: 790,\n          height: 526,\n          refreshInbox: false } });\n\n\n    });\n  } });\n\n\n\nbizagi.injector.register(\"bizagi.workportal.widgets.project.plan.activity.users\", [\"workportalFacade\", \"dataService\", bizagi.workportal.widgets.project.plan.activity.users], true);"]}