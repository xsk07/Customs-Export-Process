{"version":3,"sources":["jquery/rendering/js/services/bizagi.render.services.service.js","jquery/rendering/js/services/bizagi.render.services.multiactionservice.js","jquery/rendering/js/base/command/bizagi.command.controllers.controller.js","jquery/rendering/js/base/command/bizagi.command.controllers.action.js","jquery/rendering/js/base/container/bizagi.rendering.form.js","jquery/rendering/js/base/render/bizagi.rendering.render.js","jquery/rendering/js/base/render/bizagi.rendering.combo.js","jquery/rendering/js/base/render/bizagi.rendering.date.js","jquery/rendering/js/base/render/bizagi.rendering.extendedText.js","jquery/rendering/js/base/render/bizagi.rendering.grid.js","jquery/rendering/js/base/render/bizagi.rendering.label.js","jquery/rendering/js/base/render/bizagi.rendering.search.js","jquery/rendering/js/base/render/layout/bizagi.rendering.layout.render.js","jquery/rendering/js/base/render/bizagi.rendering.handSignature.js","jquery/rendering/js/base/render/column/bizagi.rendering.columns.column.js","jquery/rendering/js/desktop/container/dialog/bizagi.rendering.desktop.dialog.form.js","jquery/rendering/js/desktop/container/dialog/bizagi.rendering.desktop.dialog.startForm.js","jquery/rendering/js/desktop/render/bizagi.rendering.desktop.combo.js","jquery/rendering/js/services/bizagi.render.services.endPoints.js","jquery/rendering/js/services/bizagi.render.services.context.js","jquery/rendering/js/services/bizagi.render.services.metadataMultiactionservice.js","jquery/rendering/js/base/command/bizagi.command.controllers.validation.js","jquery/rendering/js/base/bizagi.rendering.element.js","jquery/rendering/js/base/container/bizagi.rendering.container.js","jquery/rendering/js/desktop/container/bizagi.rendering.desktop.container.js","jquery/rendering/js/base/container/bizagi.rendering.formTemplate.js","jquery/rendering/js/base/container/bizagi.rendering.layout.js","jquery/rendering/js/base/container/bizagi.rendering.accordion.js","jquery/rendering/js/base/container/bizagi.rendering.accordionItem.js","jquery/rendering/js/base/container/bizagi.rendering.group.js","jquery/rendering/js/base/container/bizagi.rendering.section.js","jquery/rendering/js/base/container/bizagi.rendering.horizontal.js","jquery/rendering/js/base/container/bizagi.rendering.panel.js","jquery/rendering/js/base/container/bizagi.rendering.contentPanel.js","jquery/rendering/js/base/container/bizagi.rendering.searchForm.js","jquery/rendering/js/base/container/bizagi.rendering.tab.js","jquery/rendering/js/base/container/bizagi.rendering.tabItem.js","jquery/rendering/js/base/render/bizagi.rendering.render.base.js","jquery/rendering/js/desktop/render/bizagi.rendering.desktop.render.js","jquery/rendering/js/base/render/bizagi.rendering.collectionnavigator.js","jquery/rendering/js/base/render/bizagi.rendering.check.js","jquery/rendering/js/base/render/bizagi.rendering.number.js","jquery/rendering/js/base/render/bizagi.rendering.numberScientificNotation.js","jquery/rendering/js/base/render/bizagi.rendering.hidden.js","jquery/rendering/js/base/render/bizagi.rendering.text.js","jquery/rendering/js/base/render/bizagi.rendering.readonly.js","jquery/rendering/js/base/render/bizagi.rendering.button.js","jquery/rendering/js/base/render/bizagi.rendering.fileprint.js","jquery/rendering/js/base/render/bizagi.rendering.link.js","jquery/rendering/js/base/render/bizagi.rendering.checkList.js","jquery/rendering/js/base/render/layout/bizagi.rendering.layout.image.js","jquery/rendering/js/base/render/layout/bizagi.rendering.layout.link.js","jquery/rendering/js/base/render/layout/bizagi.rendering.layout.label.js","jquery/rendering/js/base/render/layout/bizagi.rendering.layout.text.js","jquery/rendering/js/base/render/layout/bizagi.rendering.layout.upload.js","jquery/rendering/js/base/render/layout/bizagi.rendering.layout.boolean.js","jquery/rendering/js/base/render/layout/bizagi.rendering.layout.dateTime.js","jquery/rendering/js/base/render/layout/bizagi.rendering.layout.number.js","jquery/rendering/js/base/render/layout/bizagi.rendering.layout.money.js","jquery/rendering/js/base/render/layout/bizagi.rendering.layout.placeholder.js","jquery/rendering/js/base/render/bizagi.rendering.geolocation.js","jquery/rendering/js/base/render/bizagi.rendering.upload.js","jquery/rendering/js/desktop/render/bizagi.rendering.desktop.upload.js","jquery/rendering/js/base/render/bizagi.rendering.ecm.js","jquery/rendering/js/base/render/bizagi.rendering.yesno.js","jquery/rendering/js/base/render/bizagi.rendering.letter.js","jquery/rendering/js/base/render/bizagi.rendering.formLink.js","jquery/rendering/js/base/render/bizagi.rendering.document.js","jquery/rendering/js/base/render/bizagi.rendering.cascadingCombo.js","jquery/rendering/js/base/render/bizagi.rendering.list.js","jquery/rendering/js/base/render/bizagi.rendering.multiSelect.js","jquery/rendering/js/base/render/bizagi.rendering.searchList.js","jquery/rendering/js/base/render/bizagi.rendering.money.js","jquery/rendering/js/base/render/bizagi.rendering.radio.js","jquery/rendering/js/base/render/bizagi.rendering.userfield.js","jquery/rendering/js/base/render/bizagi.rendering.image.js","jquery/rendering/js/base/render/column/bizagi.rendering.columns.readonly.js","jquery/rendering/js/base/render/column/bizagi.rendering.columns.document.js","jquery/rendering/js/base/render/column/bizagi.rendering.columns.letter.js","jquery/rendering/js/desktop/render/column/bizagi.rendering.desktop.columns.column.js","jquery/rendering/js/base/render/column/bizagi.rendering.columns.combo.js","jquery/rendering/js/base/render/column/bizagi.rendering.columns.search.js","jquery/rendering/js/base/render/column/bizagi.rendering.columns.date.js","jquery/rendering/js/base/render/column/bizagi.rendering.columns.hidden.js","jquery/rendering/js/desktop/container/dialog/bizagi.rendering.desktop.dialog.search.js","jquery/rendering/js/desktop/container/dialog/bizagi.rendering.desktop.dialog.searchUser.js","jquery/rendering/js/desktop/container/dialog/bizagi.rendering.desktop.dialog.letter.js","jquery/rendering/js/desktop/container/bizagi.rendering.desktop.form.js","jquery/rendering/js/desktop/container/bizagi.rendering.desktop.panel.js","jquery/rendering/js/desktop/container/bizagi.rendering.desktop.contentPanel.js","jquery/rendering/js/desktop/container/bizagi.rendering.desktop.nestedForm.js","jquery/rendering/js/desktop/container/bizagi.rendering.desktop.tab.js","jquery/rendering/js/desktop/container/bizagi.rendering.desktop.tabItem.js","jquery/rendering/js/desktop/container/bizagi.rendering.desktop.horizontal.js","jquery/rendering/js/desktop/container/bizagi.rendering.desktop.layout.js","jquery/rendering/js/desktop/container/bizagi.rendering.desktop.accordion.js","jquery/rendering/js/desktop/container/bizagi.rendering.desktop.accordionItem.js","jquery/rendering/js/desktop/container/bizagi.rendering.desktop.group.js","jquery/rendering/js/desktop/container/bizagi.rendering.desktop.section.js","jquery/rendering/js/desktop/container/bizagi.rendering.desktop.searchForm.js","jquery/rendering/js/desktop/render/bizagi.rendering.desktop.text.js","jquery/rendering/js/desktop/render/bizagi.rendering.desktop.readonly.js","jquery/rendering/js/desktop/render/bizagi.rendering.desktop.extendedText.js","jquery/rendering/js/desktop/render/bizagi.rendering.desktop.label.js","jquery/rendering/js/desktop/render/query/bizagi.rendering.desktop.queryLabel.js","jquery/rendering/js/desktop/render/bizagi.rendering.desktop.number.js","jquery/rendering/js/desktop/render/query/bizagi.rendering.desktop.queryNumber.js","jquery/rendering/js/desktop/render/bizagi.rendering.desktop.date.js","jquery/rendering/js/desktop/render/query/bizagi.rendering.desktop.queryDate.js","jquery/rendering/js/desktop/render/bizagi.rendering.desktop.yesno.js","jquery/rendering/js/desktop/render/bizagi.rendering.desktop.check.js","jquery/rendering/js/desktop/render/bizagi.rendering.desktop.cascadingCombo.js","jquery/rendering/js/desktop/render/bizagi.rendering.desktop.search.js","jquery/rendering/js/desktop/render/bizagi.rendering.desktop.formLink.js","jquery/rendering/js/desktop/render/bizagi.rendering.desktop.association.js","jquery/rendering/js/desktop/render/query/bizagi.rendering.desktop.querySearchUser.js","jquery/rendering/js/bizagi.rendering.facade.js","jquery/common/bizagi/js/services/bizagi.dom.mildware.js","jquery/rendering/js/desktop/render/query/bizagi.rendering.desktop.queryCombo.js","jquery/rendering/js/desktop/render/query/bizagi.rendering.desktop.queryCascadingCombo.js","jquery/rendering/js/desktop/render/bizagi.rendering.desktop.collectionnavigator.js","jquery/rendering/js/desktop/render/bizagi.rendering.desktop.ecm.js","jquery/rendering/js/desktop/render/bizagi.rendering.desktop.grid.bizagi.js","jquery/rendering/js/desktop/render/bizagi.rendering.desktop.grid.grouped.js","jquery/rendering/js/desktop/render/bizagi.rendering.desktop.letter.js","jquery/rendering/js/desktop/render/bizagi.rendering.desktop.button.js","jquery/rendering/js/desktop/render/bizagi.rendering.desktop.uiPathButton.js","jquery/rendering/js/desktop/render/bizagi.rendering.desktop.fileprint.js","jquery/rendering/js/desktop/render/bizagi.rendering.desktop.link.js","jquery/rendering/js/desktop/render/layout/bizagi.rendering.desktop.layout.render.js","jquery/rendering/js/desktop/render/layout/bizagi.rendering.desktop.layout.placeholder.js","jquery/rendering/js/desktop/render/layout/bizagi.rendering.desktop.layout.boolean.js","jquery/rendering/js/desktop/render/layout/bizagi.rendering.desktop.layout.image.js","jquery/rendering/js/desktop/render/layout/bizagi.rendering.desktop.layout.link.js","jquery/rendering/js/desktop/render/layout/bizagi.rendering.desktop.layout.label.js","jquery/rendering/js/desktop/render/layout/bizagi.rendering.desktop.layout.text.js","jquery/rendering/js/desktop/render/layout/bizagi.rendering.desktop.layout.dateTime.js","jquery/rendering/js/desktop/render/layout/bizagi.rendering.desktop.layout.number.js","jquery/rendering/js/desktop/render/layout/bizagi.rendering.desktop.layout.money.js","jquery/rendering/js/desktop/render/layout/bizagi.rendering.desktop.layout.upload.js","jquery/rendering/js/desktop/render/bizagi.rendering.desktop.geolocation.js","jquery/rendering/js/desktop/render/bizagi.rendering.desktop.hidden.js","jquery/rendering/js/desktop/render/bizagi.rendering.desktop.money.js","jquery/rendering/js/desktop/render/query/bizagi.rendering.desktop.queryMoney.js","jquery/rendering/js/desktop/render/bizagi.rendering.desktop.radio.js","jquery/rendering/js/desktop/render/query/bizagi.rendering.desktop.queryRadio.js","jquery/rendering/js/desktop/render/query/bizagi.rendering.desktop.queryState.js","jquery/rendering/js/desktop/render/query/bizagi.rendering.desktop.queryCaseState.js","jquery/rendering/js/desktop/render/query/bizagi.rendering.desktop.queryGrid.js","jquery/rendering/js/desktop/render/bizagi.rendering.desktop.list.js","jquery/rendering/js/desktop/render/bizagi.rendering.desktop.multiSelect.js","jquery/rendering/js/desktop/render/bizagi.rendering.desktop.handSignature.js","jquery/rendering/js/desktop/render/query/bizagi.rendering.desktop.queryList.js","jquery/rendering/js/desktop/render/query/bizagi.rendering.desktop.queryMultiSelect.js","jquery/rendering/js/desktop/render/bizagi.rendering.desktop.userfield.js","jquery/rendering/js/desktop/render/bizagi.rendering.desktop.document.js","jquery/rendering/js/desktop/render/bizagi.rendering.desktop.image.js","jquery/rendering/js/desktop/render/column/bizagi.rendering.desktop.columns.combo.js","jquery/rendering/js/desktop/render/column/bizagi.rendering.desktop.columns.document.js","jquery/rendering/js/desktop/render/column/bizagi.rendering.desktop.columns.letter.js","jquery/rendering/js/desktop/render/column/bizagi.rendering.desktop.columns.search.js","jquery/rendering/js/desktop/render/column/bizagi.rendering.desktop.columns.date.js","jquery/rendering/js/desktop/render/column/bizagi.rendering.desktop.columns.text.js","jquery/rendering/js/desktop/render/column/bizagi.rendering.desktop.columns.searchList.js","jquery/rendering/js/desktop/render/column/bizagi.rendering.desktop.columns.number.js","jquery/rendering/js/desktop/render/column/bizagi.rendering.desktop.columns.numberScientificNotation.js","jquery/rendering/js/desktop/render/column/bizagi.rendering.desktop.columns.upload.js","jquery/rendering/js/desktop/render/column/bizagi.rendering.desktop.columns.radio.js","jquery/rendering/js/desktop/render/column/bizagi.rendering.desktop.columns.list.js","jquery/rendering/js/desktop/render/column/bizagi.rendering.desktop.columns.image.js","jquery/rendering/js/desktop/render/column/bizagi.rendering.desktop.columns.uploadecm.js","jquery/rendering/js/desktop/render/column/bizagi.rendering.desktop.columns.link.js","jquery/rendering/js/desktop/render/column/bizagi.rendering.desktop.columns.button.js","jquery/rendering/js/desktop/render/column/bizagi.rendering.desktop.columns.actions.js","jquery/rendering/js/desktop/render/column/bizagi.rendering.desktop.columns.exclusiveCheck.js","jquery/rendering/js/desktop/render/column/bizagi.rendering.desktop.columns.readonly.js","jquery/rendering/js/desktop/render/column/bizagi.rendering.desktop.columns.hidden.js","jquery/rendering/js/base/bizagi.rendering.base.factory.js","jquery/rendering/js/desktop/bizagi.rendering.desktop.factory.js","jquery/rendering/js/desktop/render/bizagi.rendering.desktop.searchList.js","jquery/rendering/js/base/render/bizagi.rendering.association.js","jquery/rendering/js/base/render/bizagi.rendering.getUser.js","jquery/rendering/js/desktop/render/bizagi.rendering.desktop.getUser.js","jquery/rendering/js/base/render/query/bizagi.rendering.queryProcess.js","jquery/rendering/js/desktop/render/query/bizagi.rendering.desktop.queryProcess.js","jquery/rendering/js/base/render/query/bizagi.rendering.querySearchUser.js","jquery/rendering/js/base/render/query/bizagi.rendering.queryAdvanced.js","jquery/rendering/js/bizagi.rendering.device.factory.js","jquery/workportal/js/base/command/bizagi.workportal.command.printform.js","jquery/common/bizagi.internals/bizagi.rendering.desktop.overrides.js","jquery/rendering/js/desktop/render/query/bizagi.rendering.desktop.queryDateAdvanced.js","jquery/rendering/js/desktop/render/bizagi.rendering.desktop.polymorphicLauncher.js","jquery/rendering/js/plugins/common/jquery.mobiscroll.js","jquery/rendering/js/desktop/render/query/bizagi.rendering.desktop.querySuggest.js","jquery/rendering/js/desktop/render/query/bizagi.rendering.desktop.queryExtendedText.js","jquery/rendering/js/desktop/render/query/bizagi.rendering.desktop.queryText.js","jquery/rendering/js/desktop/render/query/bizagi.rendering.desktop.queryCheck.js","jquery/rendering/js/desktop/render/query/bizagi.rendering.desktop.queryYesNo.js","jquery/rendering/js/desktop/render/query/bizagi.rendering.desktop.querySearch.js","jquery/rendering/js/desktop/container/bizagi.rendering.desktop.queryForm.js","jquery/rendering/js/desktop/container/bizagi.rendering.desktop.formTemplate.js","jquery/rendering/js/desktop/render/query/bizagi.rendering.desktop.queryTextAdvanced.js","jquery/rendering/js/desktop/render/query/bizagi.rendering.desktop.queryNumberAdvanced.js","jquery/rendering/js/desktop/render/query/bizagi.rendering.desktop.queryMoneyAdvanced.js","jquery/rendering/js/base/render/bizagi.rendering.comboSelected.js","jquery/rendering/js/desktop/render/bizagi.rendering.desktop.comboSelected.js","jquery/rendering/js/desktop/container/bizagi.rendering.desktop.usersForm.js","jquery/rendering/js/base/render/bizagi.rendering.userPassword.js","jquery/rendering/js/base/render/bizagi.rendering.stakeholder.js","jquery/rendering/js/desktop/render/bizagi.rendering.desktop.stakeholder.js","jquery/rendering/js/desktop/render/bizagi.rendering.desktop.userPassword.js","jquery/rendering/js/desktop/render/bizagi.rendering.desktop.gridActions.js","jquery/rendering/js/desktop/render/bizagi.rendering.desktop.numberScientificNotation.js","jquery/rendering/js/base/render/bizagi.rendering.actionLauncher.js","jquery/rendering/js/base/render/bizagi.rendering.range.js","jquery/rendering/js/base/render/bizagi.rendering.rangeDate.js","jquery/rendering/js/base/render/bizagi.rendering.rangeMoney.js","jquery/rendering/js/base/render/bizagi.rendering.rangeNumber.js","jquery/rendering/js/desktop/render/bizagi.rendering.desktop.actionLauncher.js","jquery/rendering/js/desktop/render/bizagi.rendering.desktop.range.js","jquery/rendering/js/desktop/render/bizagi.rendering.desktop.rangeDate.js","jquery/rendering/js/desktop/render/bizagi.rendering.desktop.rangeMoney.js","jquery/rendering/js/desktop/render/bizagi.rendering.desktop.rangeNumber.js","jquery/rendering/js/base/render/bizagi.rendering.entityTemplate.js","jquery/rendering/js/desktop/render/bizagi.rendering.desktop.entityTemplate.js","jquery/rendering/js/desktop/render/bizagi.rendering.desktop.checkList.js","jquery/rendering/js/desktop/render/bizagi.rendering.desktop.activityCheckList.js","jquery/rendering/js/base/render/bizagi.rendering.polymorphicLauncher.js"],"names":["_typeof","obj","Symbol","iterator","constructor","prototype","bizagi","render","services","endPoints","getEndPoints","params","renderHandlerPathRest","context","form-get-data","proxyPrefix","form-submit-data","form-submit-data-upload","render-property-refresh","render-multiaction","render-upload-cancel-image","render-upload-data-url","render-upload-add-url","render-upload-delete-url","render-ecm-upload-url","render-multiaction-metadata","render-grid-edit-url","render-grid-save-url","render-grid-add-url","render-grid-rollback-url","render-grid-commit-url","render-grid-checkpoint-url","render-save-entity","render-stakeholder-associated","render-search-default-image","render-search-form-get-data","render-search-advanced-url","render-letter-notEditable-url","render-letter-content-url","render-letter-save-url","render-letter-content-icons","render-userfield-definition","render-document-generate","render-document-generateAllDocuments","render-processes-startform","render-processes-getstartform","render-entity-layout-image64","render-entity-layout-imageByteArray","render-entity-layout-upload-files","render-query-getUsersList","case-handler-getCaseSummary","case-handler-getCaseSummaryByGuid","case-handler-getCaseAssignees","case-handler-getWorkItems","case-handler-getWorkItemsByGuid","admin-getUsersList","admin-getUsersList-FromPreferences","admin-getUsersList-ForStakeholders","admin-getUsersList-ForXpathIdBossUser","admin-getUsersList-ForXpathIdDelegate","admin-getUsersForAssignation","admin-users-config","admin-usersform","admin-GenerateDataToSendByEmail","admin-sendUserEmail","sharepointProxyPrefix","alert","$","Class","extend","init","this","util","isEmpty","getUrl","service","setProxyPrefix","BA_ACTION_PARAMETER_PREFIX","BA_CONTEXT_PARAMETER_PREFIX","BA_PAGE_CACHE","BA_MULTIACTION_WITH_LIMIT_NUMBER","BA_MULTIACTION_WITH_LIMIT_QUEUE","serviceLocator","multiactionService","multiactionservice","multiactionServiceWithLimit","guid","Math","override","enableECMMetadataMultiaction","multiactionMetadataService","metadatamultiactionservice","userfieldRequests","deviceType","isSmartphoneDevice","deviceEnum","smartphone","isTabletDevice","tablet","desktop","deviceCode","getDeviceCode","multiaction","multiactionWithLimit","metadataECMMultiaction","getFormData","data","action","idProcess","idOrganization","idForm","idEntity","surrogateKey","idRender","xpathContext","requestedForm","recordXPath","summaryForm","idCase","idWorkitem","idTask","idPageCache","contextType","guidEntity","isRefresh","isActionStartForm","additionalXpaths","idStartScope","readOnlyForm","printversion","recordXpath","downloadOfflineForm","editable","prepare","chrono","initAndStart","ajaxParams","url","type","dataType","serviceType","avoidLoader","ajax","pipe","response","stopAndLog","form","properties","transformGridDataToReadOnly","_data","hasOwnProperty","id","allowAdd","allowDelete","allowEdit","allowGrouping","allowMore","allowSearch","each","key","value","e","getSearchFormData","xpath","idSearchForm","processDataValues","o","submitData","resolveData","contexttype","transitions","surrogatekey","forcePlanCompletion","actionType","toString","toUpperCase","debug","beforeSend","xhr","status","renderingService","name","newName","isEmptyObject","search","substr","getPropertyData","extra","property","sessionId","guidentity","pxpath","prows","ppage","undefined","pfilter","psort","porder","pcaseId","pguidEntity","psurrogatedKey","pactionXpath","ptemplateGuid","pparameters","multiactionConnection","push","getData","getSearchData","term","getCollapseData","collapseState","getGridData","sort","order","page","rows","searchFilter","getGridDataExclusivesSelected","xpathfilter","getUploadCancelImage","pathToBase","getUploadFileUrl","fileId","verifyPathToBase","jQuery","param","getXSRFToken","downloadFile","self","fileUrl","queue","processData","then","binary_file","readFileAsJSON","arguments","contentType","getResponseHeader","media","byteArrayToBlob","stringToByteArray","def","Deferred","reader","FileReader","onloadend","reject","responseText","result","readAsText","promise","binary","getUploadFileEntityUrl","isContextContainerWidgetRender","xpathActions","getUploadAddUrl","getUploadAddFileUrl","isUserPreferences","deleteImage","deleteUploadFile","getECMMetadata","idFileUpload","xPath","idAttrib","interceptor","intercept","source","checkOutFile","cancelCheckOut","deleteECMFile","updateECMFileContent","metaValues","updateECMMetadata","getFileProperties","getFile","getAllDocuments","idWorkItem","getUploadFileEntity","uploadECMFile","fileUpload","fileName","getECMFileUrl","p_sessionId","isFileOnECM","idUpload","read","editGridRecord","addGridRecord","addGridRecordData","saveGridRecord","disableServerGridValidations","deleteGridRecord","getFlipAssociation","flipstate","parseJSON","rollbackGridAction","getSearchDefaultImage","processDataCriteria","criteria","submitSearch","JSON","encode","allowFullSearch","maxRecords","associateStakeholder","associatedUser","refreshAssociateStakeholder","getLetterNotEditableUrl","getLetterContent","getCanGenerateLetter","saveLetterContent","content","fullUrl","getLetterEditorIconsPath","executeButton","getFilePrint","disposition","editLinkForm","saveLinkForm","rollbackLinkForm","commitLinkForm","commitGridAction","sendCheckpoint","sendCheckpointAction","getUserfieldDefinition","userfield","guidUserfield","device","refreshControl","refreshGridCell","column","typeRender","executeRule","rule","create","executeInterface","executeSAPConnector","guidsap","executeConnector","guidConnector","executePipeline","pipeline","generateDocumentTemplate","append","h_pageCacheId","contextXpath","xpathcontext","groupMappingId","groupMapping","xpathAttribute","controlId","getAllDocumentsDownloadUrl","getCaseNumber","replace","isMobile","getCaseAssignees","getWorkitems","onlyUserWorkItems","getGridExportFile","exportType","sendEmail","to","subject","message","selected","invalidatePageCache","getUsersList","getUsersListFromQueryForm","getUsersListFromPreferences","getUsersListForXpathIdBossUser","getUsersListForXpathIdDelegate","getUsersListForStakeholders","getUsersForAssignation","getUsersForm","generateDataToSendByEmail","sendUserEmail","eMailTo","body","getConfiguration","indexOf","getTemplate","forcePersonalizedColumns","templateType","templateGuid","isDefaultTemplate","detectDevice","hasStartForm","guidWFClass","getStartForm","guidprocess","surrogatedKey","mappingstakeholders","cache","editActionForm","getActions","extendParams","ptags","pmaxitems","executeActions","pguidConstructor","pguidAction","getPolymorphicActions","serializePolymorphicActions","values","actions","getParents","node","parents","fillTree","list","children","getChildren","child","displayName","hasConstructor","guidObject","guidConstructor","length","getEntityImage64","width","height","entity","getFilesDataForLayoutUploadControl","processUploadFile","verifyMobilePathToBase","formData","isMashupContext","replaceAll","limit","batch","batchTimer","maxNumberOfActions","deferredBatchExecuting","resolve","disabledRequests","circularDependencies","replicateServiceMethods","getService","eval","proxyMethod","method","parameters","apply","originalPrepare","add","makeCircularDependenciesError","error","messageTmpl","localization","getResource","printf","dependencyFrom","dependencyTo","deferred","h_action","detectCircularDependencies","addNode","clearTimeout","batchTimeout","tag","singleAction","fn","resolveDependencies","i","multiactionError","fire","setTimeout","Object","keys","item","when","execute","rejectDeferreds","done","responses","fail","errorMessage","finalResponse","parse","disableRequests","validateIfBatchIsExecuting","THROW_ERROR","dateFormat","buildConditions","conditions","bGridDetected","bCheckEditability","innerDependencies","operator","expressions","buildConditionOperator","sJsCondition","expression","simple","bGDetected","searchGridReferenceInCondition","buildSimpleCondition","complex","conditionsOperator","condition","sXpath","sArgument","ensureValueJs","ensureEditable","control","renderId","containerId","gridXpathInfo","processGridXpath","gridXpath","remainingXpath","includes","detectedArgumentType","detectConditionArgumentType","argumentType","buildXpath","boolean","argument","buildArgument","enableActionIsChangedSupport","getRender","getRenderById","breakActionWithUnavailableRenders","Error","getColumn","renderType","normalizeType","isRelatedEntityRender","showTime","test","number","toLowerCase","Number","NaN","date","dateFormatter","getDateFromInvariant","Date","setHours","formatInvariant","setMilliseconds","Array","isArray","map","stringify","searchGridReferenceInXpath","isEditable","showRenderNotFoundError","isVisible","visible","isParentVisible","parent","evalGridXpath","evalXpath","grid","gridColumn","cellValue","getCellCurrentValue","index","isString","display","renderToEval","renders","getRenders","rendersToEval","bIsGrid","getColumnDateCorrectFunction","getValue","mapValue","isFileUploaded","isValidEmail","match","RegExp","isButtonPressed","pressed","isGridButtonPressed","arrGridXpath","columns","isChanged","_isChanged","isControlChanged","changed","controlChanged","isGridColumnChanged","gridToEval","xpathColumn","columnChanged","getColumnById","columnToEval","grep","onDeletedGridRow","rowDeleted","idMatches","exec","showContainerNotFoundError","getCurrentDate","includeTime","currentDate","invariantDate","isNaN","isNumeric","getTime","matches","searchForGridReference","commands","command","searchForGridReferenceInCommand","substring","bGridReferenceFound","getGridControl","getControlCell","getColumnDateValueDateAndTime","getColumnDateValueOnlyDate","getColumnDateValueForNoValue","controllers","controller","validations","canvas","enableDebug","_super","initializeValidations","validationBox","appendTo","widget","ui","bizagi_notifications","expand","triggerGlobalHandler","collapse","hide","itemIcon","minimized","clearEnabled","title","orientation","bind","onNotificationClick","buildValidations","fnValidations","buildAllValidations","showErrorMessage","showErrorAlertDialog","showValidationMessage","showAlertMessage","showInfoMessage","focus","icon","itemAdditionalClass","performValidationFn","clearValidationMessages","lastActionButton","getLastActionButton","validating","performValidations","countValidationMessages","hideValidationMessages","setValidationMessage","isIE8","retype","unbind","not","showValidationMessages","expandNotificationBox","autofocus","isExpandedNotificationBox","invalidElements","bRendersValid","validateRenders","bFormValid","triggerHandler","sJSCode","enabled","buildValidation","validationCommand","logError","sStatement","evalValidation","sJsValidation","gridReference","validateEditability","validateEditabilityOnValidations","tokens","sGridStatement","bValid","isValid","forEach","element","showValidationMessageById","console","log","overridesInitiated","configureOverrides","globalDependencies","initialCallFunctions","funtionsToExecuteARefreshCommand","initialCallFunctionsDeferred","buildActions","internalSubmitActions","initialCallTimeout","initialCallIncrements","actionsHistory","period","processInternalSubmitAction","buildAction","isSummaryOrGlobalForm","typeForm","evalClientAction","serverCommand","concat","elseCommands","isClientAction","dontExecute","len","hashes","executeOnlyClientActions","hash","md5","hashC","unbindActions","handle","refreshActions","newActions","_","dependencies","dependenciesId","buildFunction","renderById","inArray","addDependency","actionDependencies","commandDependencies","container","commandNames","hasDependency","hasRefreshCommand","args","actionDependenciesInstance","ev","j","gridColumns","searchGridColumns","asyncFn","tryToExecuteFunction","enableExecuteRefreshAction","sJsAction","sJsElseAction","bAutomaticRestore","bCondition","queueAction","isServerCommand","buildCommand","buildRestoreCommand","elseCommand","commandType","isRecentAction","prefix","runAction","timeOutActionsHistory","detectCommandArgumentType","commandGridDetected","controlType","parseBoolean","ruleObj","guidRule","xpathContextRow","interfaceObj","guidInterface","connectorObj","pipelineObj","guidPipeline","restoreRender","originalProperties","textFormat","changeRenderBackground","background","changeRenderForeground","color","changeRenderVisibility","changeRenderEditability","changeRenderRequired","required","restoreContainer","getContainer","changeContainerBackground","backgroundColor","changeContainerVisibility","toogleContainer","changeContainerEditability","isValidRender","newVisualChange","getVisualChange","isGridComponent","ready","lenIndex","indexes","getIndexes","changeCellBackgroundColor","logVisualChange","changeBackgroundColor","changeButtonBackground","getButton","css","addClass","style","setProperty","changeCellColor","changeColor","changeButtonForeground","changeColumnVisibility","changeCellVisibility","renderingDeferred","changeVisibility","changeButtonVisibility","isMobileDevice","changeFormButtonVisibility","show","changeEditabilityOnReadOnlyForms","displayAsReadOnly","changeColumnEditability","changeCellEditability","changeEditability","changeButtonEditability","removeAttr","attr","triggerClick","btnProperties","buttons","find","el","buttonExecutionHandler","warn","changeColumnRequired","changeCellRequired","changeRequired","changeRenderValue","fromAction","changeCellValue","asyncRenderDeferred","setDisplayValue","changeRenderMinValue","changeCellMinValue","normalizeQueryType","changeMinValue","changeRenderMaxValue","changeCellMaxValue","changeMaxValue","executeCalculatedField","runFormula","bizagiQueue","refreshContainer","internalQueue","addParallel","refreshCell","submitFormData","interfaceObject","interface","submitRender","submitOnChange","cleanRenderData","promises","gridPromises","cleanCellData","cleanData","visualChanges","changeActiveItem","loadingDeferred","setAsActiveContainer","findIndex","navigation","getNavigation","setNavigationButtons","changes","cell","refreshActionBehavior","restoreAppearanceAfterRefresh","ELEMENT_TYPE_CONTAINER","ELEMENT_TYPE_RENDER","ELEMENT_TYPE_COLUMN","renderFactory","dataService","resources","observableElement","disposed","initializeData","subscribers","getXpathContext","getPageCache","getXpath","getFormContainer","getElementType","resize","size","layout","isScrolledIntoView","effect","eventType","trigger","event","one","getRenderedElement","getMode","getParams","getFormType","isReadyToSave","getCustomHandlers","dispose","timeOutDispose","off","disposeTime","isDisposed","processFailMessage","isOfflineForm","errorType","validationController","code","startLoading","endLoading","beforeToRefresh","afterToRefresh","getResourceByKey","resource","fallback","restoreAppearance","getOrientation","rendering","TYPE_QUERY_FORM","uniqueId","ceil","random","childrenHash","elements","createRenderElement","createContainerElement","createFormElement","originalElement","clone","mode","processDuplicateRender","registerRender","isDesign","getElement","getElementsByType","clonedElement","isClone","cloneRender","internalRender","applyContainerDefaults","html","renderContainerHtml","postRenderContainer","renderContainer","isRendered","replaceTag","replaceSelector","replaceChildrenTag","replaceChildrenHtml","replaceFirstWithoutPatterns","executeChildrenPostRender","configureHandlers","applyPlaceHolderPolyfill","configureDesignView","configureLayoutView","config","window","placeHolderConfig","forceApply","Placeholders","enable","childrenElements","childElement","postRenderElement","renderChildrenHtml","temp","renderElement","collectRenderValues","renderValues","canBeSent","collectData","hasChanged","collectRenderValuesQueryForm","canBeSentQueryForm","collectDataQueryForm","firstChild","getRendersByXpath","hasValidGrids","childrenPromises","getFocus","getCustomHandler","customHandlers","timeOutChildrenDispose","saveChildrenVisualChanges","unregisterChildren","removeActions","currentContainer","replaceWith","triggerChildrenActions","restoreChildrenVisualChanges","childrenVisualChanges","always","refreshDesignContainer","messageValidation","l","triggerRenderChange","registerActions","actionController","unregisterRender","replaceChild","splice","getChildById","restoreElementAppearance","containsGrid","countByRenderType","isSearchesQueryForm","rangeQuery","delay","overlay","counter","countByRenderTypeWithParams","getChildrenSumHeight","excludeElement","containerHeight","renderHeight","getChildreCount","rendersById","rendersByXpath","rendersByXpathId","rendersByType","pageCacheId","compatibilityVersion","userConfirmationMessage","hasRule","paramsRender","processPath","breadCrumb","split","allowValidateAndSaveAction","enableActionValidateAndSave","enableExecuteQuickActions","isFeatureEnabled","allowExecuteQuickActions","useQuickActions","hasQuickActions","initializeButtons","originalProcessButton","processButton","isRoutingDisabled","applicationParent","isOfflineFormsV2Supported","button","caption","ordinal","next","nextWithoutValidations","cancel","back","createnewcase","validate","save","quickAction","routing","refresh","buildButtonStyle","setParam","xpathId","listRendesByType","getRenderByType","listRendesByTypeLength","renderKey","listRender","getGridByColumn","grids","columnsIds","template","fasttmpl","helptext","helpText","queryForm","globalForm","allowQuickActions","complexGatewayContainer","hasClass","activeTransitions","processButtons","mainForm","$canvas","getValidationsContainer","validation","readyDeferred","checkboxLabel","transitionId","removeClass","format","newFontSize","bold","isIE","italic","underline","strikethru","strStyle","getContextType","getEndPointAction","formtype","getButtons","on","preventDefault","stopImmediatePropagation","buttonProperties","btn","prop","propagateExternalEvents","timeOutButton","contains","document","documentElement","get","routingDisabled","processDefer","preProcessButton","postProcessButton","setLoaderDeferred","loaderDeferred","deleteLoaderDeferred","isLoaderDeferredSet","useOrSetLoaderDeferred","getLoaderPromise","appendWaitForLoader","getResolveOrReject","defer","getAllTabs","getAllTabsLength","innerTabsLoading","confirmationStatus","getConfirmationStatus","hasConfirmation","showConfirmationBox","submitForm","customHandler","validateForm","saveForm","isNativeMobileDevice","allowOnlineActions","collectRenderValuesForSubmit","deferredsToWait","deferreds","saveParams","offlineType","removeCaseSyncError","removeSyncErrorOnSubmit","removeStartCaseSyncError","removeTaskCaseSyncError","internalSubmitFormOffline","internalSubmitForm","checkWidgetsData","isComplexGatewayPainted","executeButtonAction","loading","start","countProps","showMessageBox","waitingDeferreds","isSaveForDraft","online","syncDeferred","syncParams","stop","offlineAction","buttonPropertiesAction","radNumber","showToastOnSuccessSync","showMobileToast","IdCase","caseNumber","CaseNumber","isOfflineRefreshWithEdition","shouldRefresh","refreshForm","showNotification","text","recreateNativeButtons","bHasValidations","alertMessage","propertiesToDisplayMessages","validationToDisplayMessages","messages","modalError","failHandler","partialSubmitFormOffline","animate","scrollTop","submitDataAction","performAction","checkpointAction","commitAction","prepareCheckpointAction","prepareCommitAction","getButtonAction","flowControlDeferred","sendRollbackAction","jqxhrList","abortAll","res","res2","messageType","addValidationMessage","validationMessage","addErrorMessage","options","selectedTabs","getSelectedTabs","selectedSection","getSelectedSection","isEdited","tabContainers","tabs","tabContainer","tab","activeTab","addSubmitAction","waitingTemplate","waitingOverlay","waitingMessage","tmpl","isSharePoint","getSize","position","getOffset","top","min-height","min-width","outerHeight","left","outerWidth","remove","getFocusedElement","setFocusedElement","errorJson","setSize","offset","updateOriginalValue","executeSubmitData","isRefreshingAfterSync","clearOnlyServer","join","internalSubmitOnChange","bRefreshForm","notCollect","cancelPreviousRequest","focusIdentifier","idCaseObject","IdScope","objMessage","strMessage","connection","pop","abort","buttonId","checkpointUrl","commitUrl","rollbackUrl","timeOutController","getFloatingButton","evt","click","isConnected","configureNetworkHandlers","BIZAGI_ENVIRONMENT","handleConnectionChange","handleOfflineSyncEvent","formParams","hasSyncError","offlineFormId","paramsId","database","validateLocalDataForTaskExists","dataResult","applySyncLoader","tasks","isStart","isSyncLoaderRunning","loaderIndex","processQuickButton","isEnable","some","formProperties","hasButtonsConfirmation","needsUserConfirmation","buttonConfirmationMsg","hasFormConfirmation","formConfirmationMsg","saveWorkInProgress","isStartForm","formType","contextEvent","processTemplate","controls","processedTemplate","g1","g2","string","layoutCollection","getCss","layoutGuid","layoutguid","loadStyle","getContextEvent","stripslashes","activate","active","cssclass","expandedIcon","getExpandedIcon","collapsedIcon","getCollapsedIcon","expandedClassIcon","bImmediate","displayAs","sectionContent","renderSectionContent","getBreadcrumb","unshift","getParentDisplayName","getSectionParent","originalParams","getSectionOrientationRTL","cssClass","panel","renderResult","performSearch","searchParams","refreshResults","getRemoteData","collectSearchValues","isMapEmpty","maxRows","dataUrl","records","totalPages","deviceMaxRecordsExceeded","onSearchFinished","errorObject","submitArray","operation","getCriteriaOperation","criteriaData","typeSearch","parseAdditionalProperties","tabItems","tooltip","tabOrientation","getActiveTab","loadOnDemand","containsFocusedElement","setActiveTab","selectedTab","renderTabContent","postRenderTimeout","maxRendersPerScreen","rendersExecuted","renderOptimization","startOptimization","stopOptimization","included","includedInResult","maxLength","trim","valueFormat","isHidden","editabilityEnabled","labelAlign","valueAlign","originalValue","previousValue","calculateInitialLayoutProperties","displayType","getDefaultLabelAlign","getDefaultValueAlign","getRTLAlign","renderWidth","calculateRenderWidth","labelWidth","valueWidth","label","layoutType","renderTemplateName","renderTemplate","encodeString","isFullRender","parseFloat","isExtendedText","isExtended","displayOptionClass","getDisplayOptionClass","labelAlignClass","getAlignClass","valueAlignClass","flexAlignClass","mapAlignClassName","columnAlign","stringLabelWidth","stringValueWidth","printVersion","showFullRender","internalRenderControl","state","replaceControlHtml","resolveResult","renderControl","renderReadOnly","configureSubmitOnChange","isLabelFormat","executePostRender","_element","timeOutRender","internalPostRender","getControl","emptyControlByAsyncRenderDeferred","processLayout","postRenderPrintVersion","postRender","postRenderReadOnly","performExecutionModeMethods","performDesignModeMethods","configureHandlersQueryForm","configureHandlersReadOnly","internalSetInitialValue","internalSetInitialValueFlag","inlineAdd","hasValue","isQueryForm","filter","messageData","isQuery","val","columnEditable","controlValueIsChanged","changeFontBold","changeFontItalic","changeFontUnderline","changeFontStrikethru","changeFontSize","setValue","triggerEvents","identicalObjects","checkRequired","changeRequiredLabel","triggerRenderValidate","validateInputRetype","enableCheck","displayValue","getDisplayValue","sanitizeHTML","getLabel","mustImplement","getControlFiller","readOnlyValue","isObject","encodeHtmlText","changeDisplayOption","changeLabelAlign","alignType","changeValueAlign","customizeRenderWidth","getElementsToStylize","originalColor","currentStyle","getFormattingLabel","compareValue","baseValue","defaultValue","forceCollectData","getNormalizedDate","fullFormat","compareValueObj","_findAction","targetObj","guidAction","objectValue","valuestrikethru","valueunderline","empty","emptyControlByChangeEditability","changeEditabilityCellControl","renderColumn","decorated","getDecorated","internalRenderCellControl","onCellChange","labelElement","controlElement","prepend","saveGridChildrenVisualChanges","controlFiller","currentElement","restoreGridChildrenVisualChanges","restoreGridAppearance","refreshDesignControl","clearDisplayValue","input","change","is","getRenderId","tryCatch","queryValue","searchType","newParameter","orderType","displayXpath","force","displayOnly","time","defaultControl","first","innerControl","autoScrollBottom","timeOutEffect","align","submitOnChangexpathContext","getCacheIdCase","percent2Number","getIdCase","getIdWorkitem","getidTask","getSessionId","backgroundImage","needBGPaint","background-color","background-image","closest","startActionExecution","actionExecutionDeferred","endActionExecution","readyActionExecution","isFromCreatedRow","isNewRow","submitInvalidatePageCacheRequest","pageCacheToInvalidate","isDesignMode","isExecutionMode","preventDefaultForAnchorTag","isSharepointContext","isWebpartContext","getMainForm","currentForm","fromRender","setInterceptionObserver","$context","callbackFn","intersectionObserver","IntersectionObserver","pluginInitialized","disconnect","POLL_INTERVAL","observe","setResizeObserver","resizeObserver","ResizeObserver","decorateRenders","restoreCellAppearance","gridChildrenVisualChanges","formatValue","processLabelLayout","processControlLayout","warm","$label","changeFontColor","changeTextDecoration","$control","$elements","$element","textDecoration","getCellBackgroundFunction","true","columnDate","changeInputBackgroundColor","false","default","processClassicRetype","hint","processRenderHint","showIcon","iconError","iconHelp","isIE9","isNewRenderForm","hideIcon","span","keypress","blur","openAutomatically","elementForm","containerForm","querySelector","transform","classList","sections","closeAllSections","getContainerIcons","visibleIcon","$containerIcons","$errorIcon","$helpIcon","mouseover","stopPropagation","tooltipClass","items","reg","attributes","_title","dialog","_getMaxZindex","containerIcons","errorIcon","iconContainer","hasLocalData","enableTyping","complementData","isDependant","getParentCombo","valueControl","renderCombo","renderComboTemplate","dataPromise","getTemplateName","emptyValue","emptyLabelForCombo","getTemplateParams","unique","randomNumber","formatItem","showEmpty","showCurrentData","getDummyData","remoteDataLoaded","recalculate","allowActions","msgObj","auxMsg","resetData","combo","getSelectedValue","currentValue","parseAdditionalValues","newItem","hidden","bCurrentDataFound","emptyFound","dataValue","comboData","isExtraItem","escapeValue","preprocessValue","_value","tmpValue","findDataValueById","validateValue","translated","withAddForm","withEditForm","allowDetail","inlineEdit","getKeys","pointer","totalRows","inlineAddRecords","row","showPreview","drawControls","drawActions","drawControl","drawForms","drawPreview","templateItem","hasData","getTotalRows","getRow","getNextRow","getPreviousRow","getFirstRow","getLastRow","setPointer","isTherePendingInlineRow","addKey","newId","removeKey","navigationform","getParameters","submitAddRequest","addUrl","temporalRecord","submitEditRequest","editUrl","submitDeleteRequest","deleteUrl","submitSaveRequest","saveUrl","dataFail","submitRollbackRequest","validateControls","randomId","allowDecimals","getDefaultAllowDecimals","numDecimals","BIZAGI_DEFAULT_CURRENCY_INFO","decimalDigits","symbol","positiveFormat","negativeFormat","decimalSymbol","decimalSeparator","digitGroupSymbol","groupSeparator","groupDigits","setGroupDigits","colorize","colorizeOnNegative","dataTypeMinValue","calculateMinValue","dataTypeMaxValue","calculateMaxValue","isAndroidDevice","numericInput","numeric","attachRetypeDouble","attachFormatCurrency","removeValidations","formatNumericInput","$input","digitGroupSeparator","minValue","getMinValue","maxValue","getMaxValue","percentage","inputValue","inputLength","oldVal","isInvalidFormat","tempValue","asNumber","messageToShow","isValidRenderMessage","parseInt","executeFormatCurrencyPlugin","formatCurrency","regions","language","tmpData","isIE11","clipboardData","originalEvent","totalVal","keydown","keyUnicode","charCode","keyCode","formatTimeout","floatPart","selectionStart","selectionEnd","currentPosition","keyup","character","String","fromCharCode","roundToDecimalPlace","removeTrailingZeros","positive","regExp","defaultvalue","numberToFixedString","re","validMessage","getDefaultGroupDigits","thousands","performMinValue","newValue","performMaxValue","createTooltip","currentTitle","toolTipZindex","getMaxZindex","zIndex","timeOutFocus","numericSN","ud","timeFormat","datePickerRegional","formatDate","getDateFormat","indexDateTimeSeparation","lastIndexOf","datePickerFormat","timePickerFormat","i18n","uppercaseDatePlaceholder","rtl","intHandler","isNow","dateControl","getDateControl","timeControl","getTimeControl","onChangeHandler","updatingTime","getNormalizeDate","getFullYear","getTimeFormat","setValueFromCalendarButtons","hasMaxLines","maxLines","regularExpressionExpression","regularExpressionMessage","regularExpression","isEmptyField","textarea","validationMessages","regEx","valueToDisplay","areThereEditableColumns","areThereTotalizedColumns","initProperties","enabledChecks","exclusiveChanges","originalEnabledChecks","columnProperties","groupBy","isExclusive","hasExclusiveCheck","columnRender","singleInstance","totalize","reverse","showSummary","rowsPerPage","initEditabilityProperties","initAddAndDeleteProperties","isSortable","keyColumn","skipInitialLoad","allowFilter","groupSummary","groupText","groupCollapsed","groupOrder","formShowMode","floatingHeader","sortBy","sortOrder","addLabel","editLabel","deleteLabel","exportOptionsLabel","detailLabel","tableCssClass","alreadySaved","overrideGetRemoteData","cellOverrides","isRTL","changeOrderData","rowKey","reverseDataRows","shift","removeRemainingColumns","numColumns","remainingColumns","getColumnType","columnIndex","getGridTemplate","applyTemplate","columnInitializers","initialize","encodeXpath","sortType","spliceRowData","spliceIndex","spliceRowDataVisible","spliceRowDataEditable","rowTemplate","total","buildCellXpathFilter","dataResp","collectGridChange","isPressed","configureColumnSubmitOnChange","keysToDelete","columnExclusiveChanges","columnEnabledChecks","columnXpath","canColumnBeSent","checkedObject","v","cellOverride","getCellOverride","getCellValue","setError","changeCellProperties","saveGrid","tmpEditable","changeColumnsEditability","newRows","saveInlineAddedRows","saveRows","getDepthData","target","isBoolean","updateAffectedCellManually","canBeExported","hasErrors","getDataNewRows","merge","uniqueMessages","isValueValid","k","messagesLength","gridValidationMessage","columnVisible","setCellOverrides","len_v","newRecords","handleJSONResponse","submitForGridChange","timeOutColumn","getEnabledChecks","cleanNewRecords","setRowAsSaved","hasColorHeader","headerFormat","isRTLOrientation","canBeExport","getExclusiveChangeByRow","idRow","isCurrentGridCell","columnId","getIndexForCurrentCell","allowDinamiclabel","bindingValue","configureHelpText","performLabelLineBreak","advancedSearch","submitVersion","searchForms","allowSuggest","allowTyping","allowClear","searchLength","enableLocalStorage","expireCache","h_contexttype","enableQuerySuggestBehavior","regexC","hideStatus","selectedValue","mask","regex","showDesignValidations","decodedValue","decodeURI","isNull","getFormattedValue","getDesignModeValue","formatBoolean","formatMonetaryValue","formatDecimalValue","formatDateValue","submitOnChangexpathContextRow","runButtonAction","error_obj","getErrorFormatted","filesCount","horizontal","checkListGroup","vertical","templateUri","useDefaultImage","getImage64","getImageUri","replaceMultiple","allowSendInMail","getValueFilesByData","dataFiles","valueAuxFiles","getDataFilesWithoutScope","valueResult","err","formContainer","files","getUploadXpath","indexHour","dateObj","formattedDateTime","showsymbol","currencySymbol","geolocation","navigator","allowUpdate","getCurrentPosition","succes_callback","fail_callback","getErrorMessage","PERMISSION_DENIED","POSITION_UNAVAILABLE","TIMEOUT","performPrecision","latitude","longitude","toPrecision","maxFileSizeOfProperty","maxSize","maxFileSizeOfUser","BIZAGI_SETTINGS","UploadMaxFileSize","maxfiles","validExtensions","singleExtensions","defExtensions","haveFiles","noFiles","file","renderUploadItem","replaceFilesHtml","itemTemplate","getTemplateItemName","buildItemUrl","filename","deleteUploadItem","fileItem","newRow","buildAddParams","BIZAGI_SESSION_NAME","getUploadXpathContext","setRenderRequired","validateObjectStructure","uploadId","validateArrayStructure","reduce","isFormatValid","validator","bzValidator","errors","base","upload","isClicked","bindEmailDialog","checkMaxFiles","bizagiSendEmail","bindExternalPopup","isInGrid","field","currentPopup","widgetName","workportal","widgets","BIZAGI_WORKPORTAL_WIDGET_GENERICIFRAME","widgetURL","injectCss","modalParameters","afterLoad","getElementById","labels","getElementsByTagName","innerText","checked","parentElement","previousSibling","textContent","afterLoadParams","pluginUpload","bizagiUpload","renderReference","dialogTemplate","idSession","networkSpeed","onUploadFileCompletedCallback","onUploadFileCompleted","onChangeFile","onCheckMaxSize","checkMaxSize","onValidate","maxAllowedFiles","uploadedFiles","dialogTitle","blobFile","downloadBlobFile","openUploadDialog","doc","dialogBox","checkFileTypes","maxFilesLimit","closeUploadDialog","modal","close","resizeStop","uploadForm","uploadIFrame","timeoutFn","contentWindow","timeoutForFn","submit","uploadField","cssExtended","previousCheck","uploadWrapper","errorList","toFind","insertBefore","slice","isMaintenanceWindow","fileControl","showError","documentMode","stringEndsWithValidExtension","stringToCheck","acceptableExtensionsArray","endsWith","errorContainer","arrayItems","maxFiles","q_xpath","showMetadata","listControl","fileProperties","getFileExtension","isImage","lengthValues","renderFileLayout","loader","productBuildToAbout","replaceItemHtml","metadataTemplate","metaData","ecm_ecmStatus","ecmStatus","ecm_isVisible","ecm_allowUpdateMetadata","allowUpdateMetadata","ecm_allowDelete","ecm_allowUpdateContent","allowUpdateContent","ecm_allowView","allowView","ecm_allowCheckOut","allowCheckOut","ecm_allowCancelCheckOut","allowCancelCheckOut","ecm_allowEdit","idFileUploads","extension","cookie","lockUploadItem","unlockUploadItem","isEmptyValue","letterOpened","getContextXpath","maximized","likeButton","getFormLinkXpath","executeSubmitOnChange","saveFormLinkData","submitCommitRequest","submitCheckpointRequest","submitDataRequest","downloadalldocuments","allowGenerate","preRenderControl","downloadAllDocuments","documents","getControlHtml","renderDocumentsHtml","renderActionsHtml","noActivateButton","allowgenerate","activateButton","getDocumentXpath","renderDocumentItem","getTemplateItem","joined","buildAllDocumentsUrl","caseId","workitemId","htmlControl","updateControlForPrintMode","validateContainer","replaceActionsHtml","buttonExecuted","$generateLink","isPropagationStopped","documentTemplateGenerate","attachEvents","downloadAllFiles","deleteDocumentTemplate","resolveDeleteDocumentTemplate","resolveDocumentTemplateGenerate","messageText","autoOpenDocuments","showDocumentPreview","returnCssTypeFile","lenght","redrawDocuments","documentContainer","renderAllDocumentDownload","removeDeleteButton","startIndex","restOfWord","finishIndex","downloadAllDocumentsLink","getErrorTemplate","getTemplateDownload","getTemplateReadonly","getDocumentFile","getAllDocumentFiles","dependants","parentCombo","initializingCascadingCombo","bindDependantCombo","isInitialValue","deferredVisible","parentValue","dependantCombo","onChangeFunction","refreshDependantCombo","focusDependant","cleanInput","isEventBinded","unbindDependantCombo","dependant","inputCombo","parentLength","parentArray","configured","itemSelected","listSize","normalizeData","getDataValue","addElement","removeElement","idToRemove","markAsChecked","found","isChecked","canAddMoreItems","$tagsContainer","toArray","acc","getElementWidth","MORE_OPTION_WIDTH","styles","getComputedStyle","filterList","query","$container","stringContainer","stringToSearch","addSelectedElements","findItemById","hasSearchForm","removeLastElement","getListItems","BASE_IMAGE","EMPTY_IMAGE","EMPTY_VALUE","DELAY_TO_SAVE","RESOURCES_FALLBACK","DONE_BUTTON","EDIT_BUTTON","CLEAR_BUTTON","UPLOAD_SUCCESS","UPLOAD_ERROR","TITLE_DONE","TITLE_DRAW","TITLE_EDIT","STATE_TYPE","edit","draw","success","saveDeferred","saveTimestamp","currentState","render_signature_action_edit","render_signature_action_done","render_signature_action_clear","getSignatureContainer","initialized","renderSignature","setState","BzjSignature","setData","binaryValue","Blob","b64toBlob","isValidField","getBase64","base64","dataFile","buildAddFileParams","FormData","isVersion2OrSuperior","blob","blobTob64","getDataUrl","charAt","executeFormFailHandler","assign","saveSignature","dataImage","postSignature","executePartialSaveForm","collectDataToSave","signature","postSignatureOnline","getDataFileFromSignature","saveImageOffline","path","buildOfflineImageId","blobImage","getFormParams","operationType","saveOfflineImage","offlineId","fileService","getOfflineImageName","isSignature","tmpTimeStamp","buildItemUrlOffline","imageId","loadImageFromForm","getOfflineImage","db","AttachmentType","$actions","setActions","isTaskForm","buildOfflineFileLoadingKey","atob","array","Uint8Array","setSignature","initialWidth","entries","entry","contentRect","selectorClass","contextClass","getSignatureContext","onSignatureClear","getFileDependencies","fileDependencies","loadFile","renderUserfieldControl","extendedData","userEditableControl","getEditableControl","renderComplex","loadUserfieldReadOnly","userReadOnlyControl","getReadonlyControl","getReadonlyValue","setEditableValue","getEditableValue","getPropertyValue","propertyName","jqXHR","textStatus","errorThrown","getRenderElements","getServerResourceURL","userfieldGuid","getRenderValue","showDialog","showPopup","initialParams","userfieldName","startUserfieldLoading","endUserfieldLoading","getUserfieldControl","isColumn","getControlXpathContext","getUserFieldInstance","replicateUserfieldMethods","timeOutUserField","userfieldInstance","isUserPreference","formCompatibilityVersion","initializeWidthAndHeight","isAutoWidth","isAutoHeight","currentUser","idUser","forceBase64","getFileService","resolveBlobFromPath","buildFullItemUrl","decoratedClass","showColumn","readonly","isReadonly","instanceDecoratedClass","applyOverrides","propertyOverrides","invalidElement","overrideDecoratedRenderProperties","renderSummary","postRenderSummary","getCell","setSurrogateKey","setDefaultValue","getCompositeValue","overrideProperties","getSortName","getAnyDecoratedInstance","getSortColumn","timeOutDecorated","arrayEach","originalGetControl","cellIcon","applyColumnStyles","originalGetData","getDataForAllCells","findDataById","fetchingData","valueForGrid","tableCell","compositeValue","formattedDate","POPUP_WIDTH","POPUP_HEIGHT","dialogParams","extraButtons","dialogDeferred","showDialogBox","renderDialogBox","reverseButtons","showSaveButton","showCancelButton","saveButtonLabel","cancelButtonLabel","performActions","isPlanForm","allowGetOriginalFormValues","formValues","onSave","currentTarget","closeDialogBox","asyncTabsDef","onCancel","objButtons","nameButon","resizable","open","isWebpart","maximize","unmaximize","adjustOverlay","_appresize","screen","focusFirstControl","controlHtml","isValidControlForFocus","timeoutEffect","isOnGrid","rewriteContextType","removeTransitions","errorTemplate","getCommonTemplate","customizeDialogBox","adjustButtonPositionDialogForm","adjustButtonPosition","refreshParams","childrenContainer","availableHeight","ResizeSensor","fitSizes","clientHeight","overlayHeight","overlayBody","overlayCanvas","timeoutRecalculate","instance","otherOptions","unbindAutoSaveForm","renderSearchDialog","getSearchContainerData","_form","searchForm","loadSearchTab","currentSearchForm","dialogBoxDeferred","searchFormContainer","defaultButtons","searchTriggeredBy","popupWidth","popupHeight","detach","addButtons","searchFormToLoad","otherElements","isDefault","searchFormData","divMessage","nicEditor","iconsPath","fullPanel","panelInstance","templateParts","nicEditors","findEditor","setContent","newContent","getContent","initFormButton","isEntityForm","configureBindAutoSave","deferredSave","autoSaveEvents","beforeUnloadFunction","newData","buildProcessPath","scroll","callback","autoSaveFunction","haveAutosaveAssociated","saveFormDelegate","proxy","idAutoSave","getIdentifierFormForAutosave","functionSaveFormDelegate","autoSaveIdentifier","autoSaveHandlers","saveBox","showSaveBox","getChanges","pathProcess","maxButtonSupported","maxButtonForQuickActions","buttonsToShow","getListWithPriority","formButtons","maxButtons","listButtons","additional","priority","ranked","contentPanel","formDisplayName","visibleTab","timeoutResize","resizeInPopUpHTML","beforeActivate","newTab","timeoutHeader","tabItem","tabHeader$","at","heightActivitiFormContainer","renderForm","buttonContainer","heightButtonContainer","tabReadyDeferred","tabActiveDeferred","resizeTimeout","canSkipThisFormType","timeoutLoading","setInterval","clearInterval","header","iCount","innerChild","jCount","renderedElement","accordion","autoHeight","accordionItem","group","styleSufix","expanded","toggleClass","toggle","isOpen","section","orderSection","isActive","breadCrumbElements","querySelectorAll","openSectionFromClick","addEventListener","call","stepsBack","getAttribute","goBack","containerAnimation","headerSection","removeEventListener","getFormOrientation","scrollIntoView","behavior","block","openSection","setAsActive","direction","sectionParent","sectionProperties","sectionParams","getFormParent","removeAnimationClasses","restoreSectionsOutOfPath","msOrder","sectionsToOpen","depth","translateWithoutAnimation","openFormWithoutAnimation","openSectionWithoutAnimation","lastElement","treeIdentifier","ancestors","goBackInPath","steps","DOMElement","className","hideActionsColumn","jqgrid","resultsGrid","searchCriteria","results","criteriaContainer","resultsContainer","dataReady","resizeResults","retypeDouble","disabled","labelStrikethrough","valueStrikethrough","formatUnderline","isLabelToFormat","$formatElements","getElementsToStylized","formatStrikeThrough","strikeThrough","labelUnderline","valueUnderline","extendedText","actualMaxLength","autoExtend","minHeight","overflow","timeoutAutoExtended","changeHeightAutoExtended","resolvedValue","br2nl","removeProperty","scrollHeight","inputDate","configureMobiscollCalendar","calendarInstance","mobiscroll","getCalendarInstance","timeoutKeyDown","compareDates","getVal","setVal","fecValid","getDateFromFormat","elementCalendar","controlElements","fakeDiv","calendar","touchUi","anchor","focusOnClose","min","max","dateWheels","select","selectType","lang","languages","BIZAGI_LANGUAGE","handler","inst","clear","onSet","onDayChange","onChange","setDateFromTimeSelector","valueText","fnControl","onClear","onBeforeShow","opt","option","onShow","onClose","firstDate","secondDate","funcNormalice","currentDateString","setSeconds","getFullFormatedDate","currentTime","fullDate","formatISO","dateFromFormat","ci","callBack","disablePopup","disable","yesno","removeData","optiongroup","parsedValue","check","performStyles","showLetters","isPreferencesDialog","onResizeCloseDialog","resizeCombo","idDropdown","comboDropDown","dropDownDestroy","keyUpFunction","keyDownFunction","showLoadingData","hideLoadingData","internalComboDropDown","padding","margin","my","of","collision","selectTmp","objSelected","containerDropdown","containerControl","last","containerRender","findDataByValue","scrollPosition","userAgent","appVersion","contFormScroll","repositionInterval","datasource","dropDwn","objParent","widthChild","widthControl","containerDialog","scrollParent","scrollerParent","$comboDialog","$comboWrapper","tg","dropDownValidClose","recalculateComboOffset","delegate","onComboItemSelected","makeArray","dropDown","dropDownReposition","dropDownContainer","validateValueInDatasource","isKeyByKey","selectedKey","altKey","ctrlKey","metaKey","shiftKey","selectPreviousElement","selectNextElement","selectFirstElement","selectLastElement","typingForCombos","isSelectingItem","selectItemByKeyUp","actual","previous","prev","selectedId","selectedLabel","comboValue","emptySelection","keyByKey","equalsToValue","tvalue","nValue","compareValIn","compareVal","dataLength","getValueFromData","getInternetExplorerVersion","selectMenu","preferences","menuContext","originalRefreshPositionMethod","selectmenu","_refreshPosition","newelement","cascadingCombo","changeRequiredControl","collectionnavigator","navigationControls","getCanvas","showRow","refreshControls","paginationActions","isValidRow","saveChanges","updateRow","addRow","editRow","showDetailForm","cancelChanges","configureButtonsForm","refreshForwardButtons","refreshBackButtons","refreshPagination","refreshTotal","refreshRemoveAction","nextControl","getInnerControl","lastControl","previousControl","firstControl","removeButton","eSave","eCancel","setFocus","navigationPage","loadForm","editPage","showInlineRow","isValidKey","bindRenderChangeEvent","arrayCollectionNavigator","hasChildren","getChildCollectionNavigator","saveChangesChildren","removeInlineAddRecord","fetchData","removeNavigationForm","addInlineRow","newid","addPage","removeRow","addNavigationForm","collectionControls","outerHTML","forms","getActionsTemplate","actionClass","buttonClass","contextPagination","ecm","showRenderOptions","isECM","configureUploadHandlers","reference","extraData","buildUpgradeParams","isUpdatingECM","onUpdateUploadFileCompleted","waiting","controlContent","insertAfter","imageConfig","originalData","metadataParams","image","requestFile","imgURL","src","imageZoom","dataItem","hover","setControlEvents","multiClickControl","modalEcm","displayOptionsContent","configureToggleHandlers","isAsync","asynCheckEnabled","asyncCheckTimeout","IsFileOnECM","toggleOptions","fileMetadata","download","URL","createObjectURL","globalControl","makeStringMetaDataControler","valueMatch","makeDatetimeMetaDataControler","separator","numericFormat","lastChar","makeBooleanMetaDataControler","ecmMetaDataFieldEdit","metadatavalue","metadatapostvalue","spanMetaDataValue","validateData","checkData","isValidFields","metadata","editButtons","actualValue","idMetadata","metadataValues","inputMetaDataValue","validationFunction","datepicker","changeYear","onSelect","dateText","makeDecimalMetaDataControler","rnd","folder","BIZAGI_PATH_TO_BASE","scriptData","controlList","isValidBase","$arrayEcmControls","ctrl","metadataContext","currentField","isRTLDirection","showActionColumn","cellMetadata","pendingActions","editableGrid","columnActions","columnActionParams","actionsColumn","xpath-column","hasTotalizer","columnwidth","headerStyles","hasActions","buildColumnModel","applyGridPlugin","updateData","initialLoadDone","buttonsComponent","applyColumnsWidth","pager","scrollableArea","bizagi_grid_desktop","buttonsPst","smartPagination","gridDefaultSortBy","getHeaderStyles","gridRtl","table","emptyTable","specialColumn","rowButtons","rowButtonsRtl","specialCell","buttonsRtl","dynamicPager","summary","summaryCell","exportOptions","details","enableXlsExport","enablePdfExport","tooltips","errorsMessage","pageRequested","hasColumnChanges","sortRequestedPage","sortRequested","sortName","drawCell","cellReady","onCellReady","rowSelected","deleteRow","moreRows","saveAddedRows","beforeInlineAdd","inlineAddDeferred","afterInlineAdd","showFormDetails","cancelEdition","removeNewRecords","showGridExportOptions","performExportGrid","printParams","performCollapseGrid","rowdblclick","canEditRow","businessKey","triggerGridPluginHandler","columnModel","columnLabel","summarizeBy","bizAgiProperties","dataReadyDeferred","loadChanges","rowIndex","rowChanges","columnData","mapChangeValue","applyColumnsWidthUpdate","hasNewRecordsToSave","newKeys","errDef","skipSubmitData","drawEditableCell","drawReadonlyCell","originalEditable","originalFormat","isNewRecord","isSubmitOnChange","isExclusiveControl","max-width","applySummaryColumnStyles","addFormDialog","maximizeGridPopup","addExclusiveChange","executeSubmitEditRequest","editInlineRow","changeRowEditable","cellVisible","enableGridRefreshAfterCellRefresh","rowLength","getCellValueFormatted","checks","calculateFetchData","originalrowsPerPage","dataToSend","moreRowsCommon","enablePrintFromEditForm","workportal-widget-dialog-box-print","printFormCommand","printform","print","prepareAddAction","hasRefresh","exportPst","expMenuDirection","exportPstWrapperCss","exportPstContentCss","hasVisibleActions","$content","collapseHeaderCss","$gridWrapper","$collapseIcon","updateCollapseState","isAcrobatInstalled","checkAdobePlugin","browser","msie","downloadExportedGrid","getRowIndexByKey","installed","ActiveXObject","formatGrid","tableControl","closeButton","parentPromise","inlineAddPromise","columnWidth","widthToApply","resizableColumns","elementChild","textDecorator","$tableContext","enableColorHeaderGrid","formatted","simpleXpath","convertProperties","bizagi_grid_grouped_desktop","groupByColumns","headerRow","emptyCell","ADVANCED_SEARCH_ID","ADVANCED_ADDITION_ID","CLEAR_SEARCH_ID","NO_RESULTS_SEARCH_ID","SEARCH_DELAY","SEARCH_MAX_RECORDS","searchImage","deferredReference","searchInput","applyAutocompletePlugin","selection","oSel","createRange","moveStart","moveEnd","hideAutocompleteLoading","autocomplete","showSearchDialog","alignForSuggest","rtlClassForSuggest","autoFocus","noResults","req","activeRequestTerm","now","parseRequest","encodeURIComponent","expireKey","requestKey","expire","getItemLocalStorage","processRequest","suggestMenu","menu","suggestContainer","controlContainer","itemWidth","calculateSuggestionWidth","suggestList","_renderItem","ul","renderClearItem","renderAdvancedItem","renderAddItem","renderSearchItem","_resizeMenu","searchItem","suggestions","addToSuggestions","allSuggestions","request","expireTime","setItemLocalStorage","showAutocompleteLoading","parseValue","performTermMatches","labelWithoutFormat","additionallabel","showAddRecordDialog","dataHasXpath","searchDialog","mapping","setDisplayValueToControl","renderControlSearchForm","addForm","allowNew","getValueId","currentId","getValueLabel","letter","showLetterDialog","wasGenerated","canGenerate","buttonInput","timeoutRemoveAttr","validateGridsOnButtonClick","htmlMessage","draggable","rpabot","bzToast","getMaxZIndex","initializeRobot","robotInstance","runRobot","UiPathRobot","getProcesses","disabledButton","robotName","queueMessage","toast","relaunch","setLoaderStatus","addItem","onClickIcon","onCanStartJob","startJob","inputs","outputs","controlsInForm","areAllControlsInForm","allControlsFound","getRobotInputs","onStatus","processResults","processOutput","successMessage","setSuccessStatus","enableButton","InnerException","Message","setErrorStatus","handleNotFoundControls","controlsNotFound","robotResult","output","responseValue","robotArgumentName","relatedControl","rpaArgs","resp","arg","fileprint","mozilla","idFrame","fileURL","iframe","frm","revokeObjectURL","link","linkSolver","linkPrefix","linkType","windowParams","windowObjReference","linktarget","layoutRender","layoutPlaceholder","layoutBoolean","layoutImage","urlCreator","webkitURL","imageUrl","renderParams","idcase","idworkitem","contextxpath","layoutLink","onClickElement","referenceType","layoutLabel","layoutText","layoutDateTime","layoutNumber","layoutMoney","layoutUpload","getHTMLFiles","formLink","executeExitRule","hasexitrule","isThisFormReadOnly","executeEntryRule","hasentryrule","openFormLink","canBeSaved","openFormLinkDialog","handleFailRuleExecution","handleOnSaveDialog","getFormLinkXpathContext","parentXpathContext","$link","$buttonLink","cordinate","msg","coordinate","coords","money","showSymbol","radio","radiogroup","onOptionGroupChange","selectable2","multiple","focusSelectedItem","elList","multiSelect","timeoutSelectedItems","onToggleDataView","onUnselectElement","onShowSelectedElements","totalValues","$ChildToAdd","$viewMore","renderFloatView","updateArrow","$floatList","showFloatListView","floatListHandlers","$containerControl","$containerRender","timeoutMouseDown","destroyFloatView","$list","closeFloatView","$listView","floatViewIsCollapsed","valuesToShow","$tagElements","$floatListContext","$listContainer","checkbox","$search","handSignature","imageElement","createElement","autoSave","debounce2","toDataURL","onSignatureEdit","onSignatureSave","sizeRatio","renderSignatureValue","mappedValue","valueObj","userfieldWrapper","sControl","exists","createUserfieldInstance","timeOutTrigger","loadUserfield","dynamicFunction","isUserField","styleContent","styleGuid","str","ex","defaultUserField","designUserField","userfieldDefinition","basicUserField","formDialog","load","callInside","BACloseWindow","controlName","applyDocumentTemplatesFormat","documentList","returnType","tem","N","ua","M","sayswho","appName","count","printFn","pdf","timeoutPrint","autoOpen","joinedDocument","$item","imgWidth","imgHeight","flashVersion","timeoutDefaultProperties","containerChildsSize","containerChildsHeightSum","baseImageURL","resizableImgNode","border-top-width","border-left-width","border-right-width","border-down-width","isImageGreaterThanContainer","controlWidth","timeoutAdjustImage","isAuto","$imgWidth","wSize","isPostRendered","deleteHandler","border","line-height","imageWrapper","isImageLoaded","widthBase","htmlImage","timeoutAdjustContainer","isInlineRow","xpathPath","originalRenderCellControl","originalRenderElement","resolveValue","readOnly","originalMethod","applyUploadPlugin","undelegate","originalApplyUploadPlugin","uploadRender","originalRenderControl","originalInternalPostRender","caller","configureHandlersActions","renderDraftControl","viewMore","events","overflowMenu","gridChanges","tmpCheck","simpleXpathArray","templates","loadOverrides","initAsyncStuff","loadTemplates","loadTemplate","templateDestination","templateService","resolvedTemplate","containerParams","mobileform","formTemplate","usersForm","nestedForm","mobilegroup","mobiletext","association","searchList","actionLauncher","entityTemplate","polymorphicLauncher","getSearchRender","getQueryRender","getUser","rangeDate","rangeMoney","rangeNumber","activityCheckList","columnParams","exclusiveCheck","uploadecm","numberScientificNotation","queryExtendedText","queryText","queryCheck","queryYesNo","queryNumber","queryMoney","queryDate","queryCombo","queryCascadingCombo","querySuggest","queryLabel","queryList","queryMultiSelect","querySearch","queryRadio","queryState","queryCaseState","queryProcess","querySearchUser","factory","tmplIcons","enableCustomizations","getJavaScript","isAdvanced","advancedQuery","getAdvancedQueryRender","hiddenControlsWithDataType","grouped","uiPathButton","getLayoutRender","getRangeRender","userPassword","comboSelected","stakeholder","gridActions","queryTextAdvanced","queryNumberAdvanced","queryMoneyAdvanced","queryDateAdvanced","SEARCH_MIN_LENGTH","padding-right","attachKeyEvents","selectedValues","isNewItem","appendFoundItem","minLength","deleteItem","newElement","before","li","stringValue","templateWithValues","allowFlip","flipped","leftData","rightData","processPropertyValue","flip","makeJsonBase","getColumnData","getRightAssociation","formatJson","associationData","leftId","idRight","rightId","removeValue","leftXpath","rightXpath","leftFactName","rightFactName","closeElement","togglepanels","animated","idLeft","setBindToClose","ol","classCss","getLeftName","allowDelegatedUser","bindSearchUserPlugin","clearValue","filters","displayNames","searchButtonName","clearButtonName","valuesToSelect","renderFactoryReference","getResourceReference","selectItem","onItemSelectedSuccess","searchUsers","filterData","callSearchUserEndpointByContext","editingUser","allowAddUser","menuSecurity","UserAdmin","bizagiSearchUser","callSearchUserEndpointInUsersForm","callSearchUserEndpointInUserPreferencesForm","callSearchUserEndpointInOtherCases","xpathIsDelegated","getOptions","iduser","user","loadtemplates","wrapper","getWrapper","loadData","renderData","wrapperElement","linkApplication","process","itemElement","idParent","idContCategory","setupLinks","idCategory","elementRender","processSelect","parentType","routeProcess","iconProcess","getUserData","MAX_TAGS_SUPPORTED","OPERATORS","like","defaultLabel","appliesTo","equals","equal","not-equals","starts-with","ends-with","greater-equals-than","less-equals-than","between","is-null","wildcard","skip","filterType","DATATYPE","currentFilter","controlInitial","controlEnd","queryFilter","processComplexValue","isCurrentDefaultFilter","renderReadOnlyFilter","getCurrentFilter","$templateFilterReadonly","filterName","$filterValueContainer","isCurrentBetweenFilter","renderReadOnlyBetween","isCurrentTagFilter","renderReadOnlyTags","from","getTagId","formatTagItem","configureFilterHandlers","configureTagHandlers","configureDefaultHandlers","isModeWildcard","filterTagExist","filterOptionIsShowed","clickOnFilter","onToggleDataOptions","valueTag","$tagInput","getValidTagValue","addTag","removeLastTag","tagId","removeTag","$buttonClean","setCurrentFilter","isCurrentNullFilter","showHideCleanButton","destroyFilterContent","setSelectedFilter","onFilterChange","tagIsAdded","newTagItem","tagItem","isMaximumTagsValid","$templateItem","tags","lastTag","performTagItems","listString","$listTag","cleanDataFilter","getCurrentAction","defineLiteControl","typeFilter","getSearchType","performQueryValue","newQueryValue","formatInputValue","getRenderProperties","propertiesRender","typeControl","renderProperties","getRequiredProperties","isRange","isMinimumValue","isMinimum","isMaximumValue","isMaximum","setLiteControls","renderLiteControl","getTemplateByType","operators","$cleanButton","onToggleHideElement","elementClass","$buttonClose","idFilter","isCurrentFilter","isCurrentWildcardFilter","isCurrentContainsFilter","isCurrentStartsWithFilter","isCurrentEqualsThanFilter","isCurrentEndsWithFilter","currentAction","defaultFilter","prepareForSetValue","setFilter","performDataValue","dataList","performListValue","noFilterSettled","queryFormId","username","execution_device","cachedFactory","getRenderFactory","getDataService","executionDeferred","deviceFactory","getFactory","subscribe","unsubscribe","publish","update","ownerDocument","location","queryString","getQueryString","sendExecutingPostMessageWebparts","refreshing","lastWidth","lastHeight","configureOpenForm","configureRefresh","configureRouting","configureRenderError","configureResize","configureGlobalHandlers","enableE2EInterface","transformGridControl","processForm","getFailDeferred","jsonErrorMessage","fastEmpty","canvasParent","timeoutTrigger","forceResize","triggerParams","renderBehavior","postMessageSocket","heightCanvas","innerHeight","iframeCommunicator","BIZAGI_WORKPORTAL_WIDGET_PRINT","refreshInbox","referrer","referrerParams","selfButton","frameTemplate","headerTemplate","executePrintWidgetAction","objFrame","strFrameName","jFrame","printID","jFrameHeader","environment","productBuild","build","frames","objDoc","objDocStr","innerHTML","write","win","styleLoading","timeoutClose","tmpWindowTitle","timeoutRemove","timeoutWidgetAction","enableDeprecatedProperties","renderInterface","controlInterface","isRequired","getDisplayNameObj","getDisplayNameText","getDisplayValueText","elm","getType","setControlValue","setControlDisplayValue","gridControlInterface","getColumnByXpath","getColumnByName","resultColumn","getRecord","getNewRows","extendControlInterface","getGridButtonsPanel","getGridPaginationPanel","getGridHeaderPanel","uploadInterface","getFiles","listOfFiles","hasFile","booleanInterface","checkByName","comboInterface","getComboArrow","getComboOptions","_getInterface","interfaz","_getExtendedInterfaceByControl","extendedInterface","extendObject","objToExtend","keyToExtend","valueToExtend","_extendControlInterface","getInterface","e2e","dialogIsOpen","setScopeDefinition","facade","formReady","deferredForm","m","_getAllrenders","_findRenderByProperty","propertyvalue","controlClass","getRenderByXpath","getRenderByDisplayName","getRenderByValue","getNotificationPanel","getMessages","messagesHtml","hasMessage","getFormButtonByCaption","getFormButtons","checkIncludedAll","_rendersFounded","r","rType","iType","_matchedRender","getSearchParams","checkedChildren","isControlVisible","queryAdvanced","TOOLTIP_TITLE","TOOLTIP_CONTENT","filterToSet","configureWildcardHandlers","templateTooltip","updateCleanButton","showTooltip","$inputWildcard","textAdvanced","$controlInitial","$inputFiler","configureInternalHandlers","getInputControl","$inputControl","newListValue","initial","end","numberEnd","numberInitial","numberAdvanced","$numberMin","$numberMax","$numberInitial","controlTag","decimalFormat","formatDecimal","observer","notify","moneyAdvanced","maxUndefinedYear","minUndefinedYear","dateEnd","dateInitial","dateAdvanced","$dateMin","$dateMax","$dateInitial","leftValues","rightValues","orderArraySelected","a","b","nA","nB","dataListArray","renderControlReadOnly","showInitialData","selectedItemsToUpdate","orderArrayList","orderList","filterFunction","removeItem","selectInput","dataSelected","dataSelectedToRemove","dataOptions","showListBoxComboData","collectedValues","sendMailControl","passwordControl","paramsSave","formAction","sendMail","password","redirectErrorPage","href","passwordMinLength","passwordMaxLength","generateRandomPassword","processSave","userFormData","createUser","updateUser","getLengthPassword","chars","randomPassword","randomPosition","floor","saveValue","collectedData","getCollectedData","domain","fullName","userName","resultUser","userId","expiredAccountControl","lockedAccountControl","expiredAccount","lockedAccount","valuePassword","userNames","entities","valueXpath","currentPage","refreshStakeholderList","bizagiControl","maxElemShow","maxPageToShow","selectedItems","addInstance","addGrid","goToBack","removeAssociated","onKeyUpFilter","paramField","gridDataService","onGetData","onGetDataFail","tempGrid","dataColumns","tempColumns","iColumn","objectColumn","idData","idInstance","nameInstance","newDataRows","iRow","stateInstance","tooltipLink","gridTmp","tooltipUnassociated","tempPagination","totalRecords","pageToshow","pagerData","pagination","pages","pageNumber","paginationHtml","$pager","bizagiPagination","actualPage","listElement","clickCallBack","setRowsEvents","onLinkClick","executeLinkClickIfProceed","refreshStakeholderValue","onStakeAssociatedFail","confirmationMsg","C","CryptoJS","userFormsSpanner","enc","Utf8","userFormsCode","Latin1","resultMain","algo","AES","createEncryptor","CBC","pad","Pkcs7","iv","finalize","resultMainFinal","Base64","spanTmp","attachFormatScientificNotation","scientificNotationFormat","scientificNotationNumber","deferredActions","engine","templateEngine","autoGenerateData","selecttemplate","processPropertyValueArgs","tagslist","maxItems","processPropertyValueDataTmplArgs","defaultAllowActions","allowactions","isHorizontal","templatetype","executeActionImmediately","processPropertyValueExecuteAction","notifyExecution","actionName","templateDefined","actionManager","guidProcess","processStartForm","processActionFormCollection","processActionForm","addActionToQueue","actionsList","additionalXpath","idParentWorkitem","entityXpath","newValueActionsList","removeActionToQueue","controlValue","countSameActions","getPropertiesActionLaucher","actionsLaucher","setRanageControls","minControl","maxControl","$maxCanvas","$minCanvas","renderRangeControl","defineRangeControl","dateMin","suscribe","dateMax","typeRangeControl","moneyMin","moneyMax","numberMin","numberMax","appendContent","templateArguments","actionsContainer","configureQueueVisibility","templateData","totalActions","moreActionsManager","isMoreActions","lessActions","moreActions","actionsVertical","isExpanded","moreButtonTitle","BIZAGI_WORKPORTAL_WIDGET_DIALOGNAV","maximizeOnly","moreActionsTemp","actionLauncherControls","moreVerticalButton","configureMoreActionsHandler","onActionClicked","expr","FilterAction","moreButton","startAndThen","kendoTooltip","autoHide","multipleSelection","act","executeAction","showConfirmationDialog","notifications","INotifications","showSucessMessage","savedData","editMode","xpathContextWithKey","xpathContextWithoutKey","IdEntity","startForm","confirmTemplate","confirmContent","confirmationMessage","confirmContentParams","actionsToExecuteContainer","listOfActions","getMappingAction","removeActionSelector","openActionSelector","extraParameters","dataAction","actionsToExecuteTitle","range","guidTemplate","htmlTemplate","skipRefresh","entityTemplateControls","checkList","itemId","updateDisplay","onCheckListGroupChange","addButton","newItemName","goalActivity","additionalElements","notifyLoadItems","activityWork","$divContainer","activityDescription","prepareNewItem","repaintControl","itemSelectedName","itemContent","setSelectionRange","addSelectedHandlers","refreshValue","resolved","which","checkListHtml","completed","allCheckedItems","every","idActivity","validationResolvedItems","valid","getTagList","processPropertyValueExecuteConstructor","displayNamee","taglist","treeActionsList","getTreeItems","level","templateTreeItem","$targetData","$node","cachedValue","pageCache","$target","c","u","eq","d","f","F","p","J","z","B","y","g","h","x","offsetHeight","w","E","O","D","P","K","H","toFixed","I","round","sin","PI","fadeIn","formatResult","headerText","theme","wheels","showLabel","setText","cancelText","wheelDelta","detail","G","func","s","fadeOut","t","A","q","defaults","n","scroller","themes","settings","presets","preset","methods","showOnFocus","changedTouches","pageY","abs","L","isDisabled","getInst","destroy","setDefaults","dateOrder","timeWheels","startYear","endYear","monthNames","monthNamesShort","dayNames","dayNamesShort","shortYearCutoff","monthText","dayText","yearText","hourText","minuteText","secText","ampmText","stepHour","stepMinute","stepSecond","minDate","parseDate","maxDate","getHours","getMinutes","getSeconds","ap","Q","0","1","getDate","getDay","invalid","dates","getMonth","daysOfWeek","daysOfMonth","setDate","datetime","getYear","inputClass","android","ios","jqm","jqmBody","jqmHeader","jqmWheel","jqmClickPick","jqmSet","jqmCancel"],"mappings":"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","sourcesContent":["function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /*\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: BizAgi Rendering Services\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: Diego Parra\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This class will provide a facade to access to rendering REST services\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\n$.Class.extend(\"bizagi.render.services.service\",\n{\n  // Statics\n  BA_ACTION_PARAMETER_PREFIX: \"p_\",\n  BA_CONTEXT_PARAMETER_PREFIX: \"h_\",\n  BA_PAGE_CACHE: \"pageCacheId\",\n  BA_MULTIACTION_WITH_LIMIT_NUMBER: 5,\n  BA_MULTIACTION_WITH_LIMIT_QUEUE: \"multiaction\" },\n\n{\n  /*\r\n   *   Constructor\r\n   */\n  init: function init(params) {\n    params = params || {};\n    params.context = params.context || \"workflow\";\n    params.proxyPrefix = !bizagi.util.isEmpty(params.proxyPrefix) ? params.proxyPrefix : \"\";\n    this.serviceLocator = new bizagi.render.services.context(params);\n    this.multiactionService = new bizagi.render.services.multiactionservice(this);\n    this.multiactionServiceWithLimit = new bizagi.render.services.multiactionservice(this, this.Class.BA_MULTIACTION_WITH_LIMIT_NUMBER, this.Class.BA_MULTIACTION_WITH_LIMIT_QUEUE);\n    this.guid = Math.guid();\n\n    if (bizagi.override.enableECMMetadataMultiaction) {\n      this.multiactionMetadataService = new bizagi.render.services.metadatamultiactionservice(this);\n    }\n\n    // Userfield definitions mini-cache\n    this.userfieldRequests = {};\n\n    this.deviceType = params.deviceType || (bizagi.util.isSmartphoneDevice() ? bizagi.deviceEnum.smartphone : bizagi.util.isTabletDevice() ? bizagi.deviceEnum.tablet : bizagi.deviceEnum.desktop);\n    this.deviceCode = bizagi.util.getDeviceCode();\n  },\n\n  /*\r\n      *   Return the multiaction-service\r\n      */\n  multiaction: function multiaction() {\n    return this.multiactionService;\n  },\n\n  /*\r\n     *   Return the multiaction-service\r\n     */\n  multiactionWithLimit: function multiactionWithLimit() {\n    return this.multiactionServiceWithLimit;\n  },\n\n  metadataECMMultiaction: function metadataECMMultiaction() {\n    return bizagi.override.enableECMMetadataMultiaction ? this.multiactionMetadataService : this;\n  },\n  /*\r\n      *   SINGLE SERVICES METHODS\r\n      */\n\n  /*\r\n          *   Gets form data\r\n          *   Returns a promise of the data being retrieved\r\n          */\n  getFormData: function getFormData(params) {\n    var self = this;\n\n    // Check if the params contains mocked data\n    if (params && params.data) {\n      return params.data;\n    }\n\n    // Define data\n    params = params || {};\n    var data = {};\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = params.action || \"LOADFORM\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"devicetype\"] = self.deviceType;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"devicecode\"] = self.deviceCode;\n\n    if (params.idProcess)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idProcess\"] = params.idProcess;\n    if (params.idOrganization)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idOrganization\"] = params.idOrganization;\n    if (params.idForm)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idForm\"] = params.idForm;\n    if (params.idEntity)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idEntity\"] = params.idEntity;\n    if (params.surrogateKey)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"surrogateKey\"] = params.surrogateKey;\n    if (params.idRender)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    if (params.xpathContext)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    if (params.requestedForm)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"requestedForm\"] = params.requestedForm;\n    if (params.recordXPath)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"recordXPath\"] = params.recordXPath;\n    if (params.summaryForm)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"summaryForm\"] = params.summaryForm;\n    if (params.idCase)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idCase\"] = params.idCase;\n    if (params.idWorkitem)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idWorkitem\"] = params.idWorkitem;\n    if (params.idTask)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idTask\"] = params.idTask;\n    if (params.idPageCache)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    if (params.contextType)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contextType;\n    if (params.guidEntity)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"guidEntity\"] = params.guidEntity;\n    if (!bizagi.util.isEmpty(params.isRefresh))\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"isRefresh\"] = params.isRefresh;\n    if (params.isActionStartForm)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"isActionStartForm\"] = params.isActionStartForm;\n    if (params.additionalXpaths)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"additionalXpaths\"] = params.additionalXpaths;\n    if (params.idStartScope)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idStartScope\"] = params.idStartScope;\n    if (typeof params.readOnlyForm !== \"undefined\")\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"readonlyform\"] = params.readOnlyForm;\n    if (typeof params.printversion !== \"undefined\")\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"printForm\"] = params.printversion;\n    if (typeof params.recordXpath !== \"undefined\")\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"recordlauncherxpath\"] = params.recordXpath;\n    if (params.guid)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"guid\"] = params.guid;\n    if (params.downloadOfflineForm)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"downloadofflineform\"] = 1;\n\n    if (params.editable === false) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"DisplayFormAsReadOnly\"] = true;\n    }\n\n    // Support parameter from ui\n    // Parameters that affects all the same attributes of render\n    if (params.printversion) {\n      //Print limit grid rows\n      var BA_ALL_PARAMETER_PREFIX = \"all_\";\n\n      if (params[self.Class.BA_ACTION_PARAMETER_PREFIX + BA_ALL_PARAMETER_PREFIX + \"rows\"]) {\n        data[self.Class.BA_ACTION_PARAMETER_PREFIX + BA_ALL_PARAMETER_PREFIX + \"rows\"] = params[self.Class.BA_ACTION_PARAMETER_PREFIX + BA_ALL_PARAMETER_PREFIX + \"rows\"];\n      }\n    }\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n\n    // Call ajax and returns promise\n    bizagi.chrono.initAndStart(\"data\");\n    var ajaxParams = {\n      url: params.url || self.serviceLocator.getUrl(\"form-get-data\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\",\n      serviceType: params.action || \"LOAD\" };\n\n    if (params.downloadOfflineForm) {\n      ajaxParams.avoidLoader = true;\n    }\n    return $.ajax(ajaxParams).\n    pipe(function (response) {\n      bizagi.chrono.stopAndLog(\"data\");\n\n      // Transform data for read only version\n      if (params.printversion) {\n        try {\n          response.form.properties.editable = \"False\";\n\n          var transformGridDataToReadOnly = function transformGridDataToReadOnly(_data) {\n            if (_data == null) {\n              return _data;\n            }\n            if (_data.hasOwnProperty('type') && _data.type == 'grid') {\n              _data.id = data.id + \"-print\";\n              _data.allowAdd = \"False\";\n              _data.allowDelete = \"False\";\n              _data.allowEdit = \"False\";\n              _data.allowGrouping = \"False\";\n              _data.allowMore = \"False\";\n              _data.allowSearch = \"False\";\n            } else {\n              $.each(data, function (key, value) {\n                if (_typeof(value) == 'object') {\n                  _data[key] = transformGridDataToReadOnly(_data[key]);\n                }\n              });\n            }\n            return _data;\n          };\n          response = transformGridDataToReadOnly(response);\n        } catch (e) {\n        }\n      }\n\n      return response;\n    });\n  },\n  /*\r\n      *   Gets a search form data\r\n      *   Returns a promise of the data being retrieved\r\n      */\n  getSearchFormData: function getSearchFormData(params) {\n    var self = this;\n\n    // Define data\n    params = params || {};\n    var data = {};\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"SEARCHFORM\";\n    if (params.xpath)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    if (params.idRender)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    if (params.xpathContext)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    if (params.idSearchForm)\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"searchForm\"] = params.idSearchForm;\n    if (params.idPageCache)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-search-form-get-data\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\",\n      serviceType: \"SEARCHFORM\" });\n\n  },\n\n  processDataValues: function processDataValues(data) {\n    var o;\n    data = $.extend(true, {}, data);\n    for (o in data) {\n      if (data.hasOwnProperty(o) && $.type(data[o]) == \"object\") {\n        // for search\n        if (data[o].hasOwnProperty(\"id\")) {\n          data[o] = data[o].id;\n        }\n      }\n    }\n    return data;\n  },\n  /*\r\n      *   Sends a form action to the server\r\n      */\n  submitData: function submitData(params) {\n    var self = this;\n\n    // Define data\n    data = self.resolveData(params.data || {}, params.xpathContext);\n    data = self.processDataValues(data);\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = params.action;\n\n    // Fill optional parameters\n    params = params || {};\n    if (params.xpath)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    if (params.idRender)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    if (params.xpathContext)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    if (params.idPageCache)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    if (params.guidEntity)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"guidEntity\"] = params.guidEntity;\n    if (params.contexttype)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype;\n    if (params.transitions)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"transitions\"] = params.transitions;\n    if (params.surrogatekey)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"surrogateKey\"] = params.surrogatekey;\n    if (params.forcePlanCompletion)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"forcePlanCompletion\"] = params.forcePlanCompletion;\n\n    /* if (params.isActionStartForm)\r\n                                                                                                        data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"isActionStartForm\"] = params.isActionStartForm;\r\n                                                                                                        */\n    var actionType = params.action.toString().toUpperCase();\n\n    // Log submit data\n    bizagi.debug(\"Data sent\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"form-submit-data\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\",\n      serviceType: actionType,\n      beforeSend: function beforeSend(xhr, status) {\n        xhr.renderingService = true;\n      } });\n\n  },\n  /*\r\n      * Get data processing xpathcontext\r\n      */\n  resolveData: function resolveData(data, xpathContext) {\n    var name, newName, value;\n    if (!$.isEmptyObject(data) && xpathContext) {\n      if (xpathContext.search(/\\[id=\\d+\\]/) !== -1) {\n        for (name in data) {\n          if (name.search(/\\[id=\\d+\\]/) !== -1 && xpathContext == name.substr(0, name.search(/\\]/) + 1)) {\n            newName = name.substr(name.search(/\\]/) + 2);\n            value = data[name];\n            data[newName] = value;\n            delete data[name];\n          }\n        }\n      }\n    }\n    return data;\n  },\n  /*\r\n      *   Fetch a property from the server\r\n      *   Params:\r\n      *   -   xpath\r\n      *   -   idRender\r\n      *   -   xpathContext\r\n      *   -   property\r\n      */\n  getPropertyData: function getPropertyData(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"PROCESSPROPERTYVALUE\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"propertyName\"] = params.property;\n\n    if (params.sessionId)\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"sessionId\"] = params.sessionId;\n    if (params.contexttype)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype;\n    if (params.guidentity)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"guidEntity\"] = params.guidentity;\n    if (params.surrogatekey)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"surrogateKey\"] = params.surrogatekey;\n    if (params.pxpath)\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"xpath\"] = params.pxpath;\n    if (params.prows)\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"rows\"] = params.prows;\n    if (params.ppage)\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"page\"] = params.ppage;\n    if (params.pfilter != undefined && params.pfilter != null)\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"filter\"] = params.pfilter;\n    /*else\r\n                                                                              data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"filter\"] = \"\";*/\n    if (params.psort != undefined && params.psort != null)\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"sort\"] = params.psort;\n    if (params.porder)\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"order\"] = params.porder;\n    if (params.pcaseId)\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"caseId\"] = params.pcaseId;\n    if (params.pguidEntity)\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"guidEntity\"] = params.pguidEntity;\n    if (params.psurrogatedKey) {\n      data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"surrogatedKey\"] = params.psurrogatedKey;\n    }\n    if (params.pactionXpath) {\n      data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"actionXpath\"] = params.pactionXpath;\n    }\n    if (params.ptemplateGuid) {\n      data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"templateGuid\"] = params.ptemplateGuid;\n    }\n    if (params.pparameters) {\n      data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"parameters\"] = params.pparameters;\n    }\n\n    // Log submit data\n    bizagi.debug(\"Property refresh for '\" + params.xpath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    // TODO: change REST library in order to support extra HTTP parameters\n    // Please be careful with dataType parameter\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-property-refresh\"),\n      data: data,\n      type: \"POST\",\n      dataType: params.dataType || \"json\",\n      serviceType: \"PROCESSPROPERTYVALUE\",\n      beforeSend: function beforeSend(xhr, status) {\n        bizagi.multiactionConnection = bizagi.multiactionConnection || [];\n        bizagi.multiactionConnection.push(xhr);\n      } });\n\n\n  },\n  /*\r\n      *   Refresh the data property from the server\r\n      *   Params:\r\n      *   -   xpath\r\n      *   -   idRender\r\n      *   -   xpathContext\r\n      */\n  getData: function getData(params) {\n    return this.getPropertyData($.extend(params, {\n      property: \"data\" }));\n\n  },\n  /*\r\n      *   Refresh the data property from the server\r\n      *   This version is to fetch search data\r\n      *   Params:\r\n      *   -   xpath\r\n      *   -   idRender\r\n      *   -   xpathContext\r\n      *   -   term\r\n      */\n  getSearchData: function getSearchData(params) {\n    var self = this;\n    params.extra = params.extra || {};\n    params.extra[self.Class.BA_ACTION_PARAMETER_PREFIX + \"term\"] = params.term;\n\n    return this.getPropertyData($.extend(params, {\n      property: \"data\" }));\n\n  },\n\n  /*\r\n      * Refresh tha data property from the server\r\n      * Params:\r\n      *   -   collapsestate\r\n      */\n  getCollapseData: function getCollapseData(params) {\n    var self = this;\n    params.extra = params.extra || {};\n\n    params.extra[self.Class.BA_ACTION_PARAMETER_PREFIX + \"collapseState\"] = params.collapseState;\n\n    return this.getPropertyData($.extend(params, {\n      property: \"collapseState\" }));\n\n  },\n\n  /*\r\n      *   Refresh the data property from the server\r\n      *   This version is to fetch grid data\r\n      *   Params:\r\n      *   -   xpath\r\n      *   -   idRender\r\n      *   -   xpathContext\r\n      *   -   sort\r\n      *   -   page\r\n      *   -   rows\r\n      */\n  getGridData: function getGridData(params) {\n    var self = this;\n    params.extra = params.extra || {};\n\n    params.extra[self.Class.BA_ACTION_PARAMETER_PREFIX + \"sort\"] = params.sort;\n    params.extra[self.Class.BA_ACTION_PARAMETER_PREFIX + \"order\"] = params.order;\n    params.extra[self.Class.BA_ACTION_PARAMETER_PREFIX + \"page\"] = params.page;\n    params.extra[self.Class.BA_ACTION_PARAMETER_PREFIX + \"rows\"] = params.rows;\n    params.extra[self.Class.BA_ACTION_PARAMETER_PREFIX + \"searchFilter\"] = params.searchFilter;\n    params.extra[self.Class.BA_ACTION_PARAMETER_PREFIX + \"value\"] = params.value;\n\n    return this.getPropertyData($.extend(params, {\n      property: \"data\" }));\n\n  },\n\n  getGridDataExclusivesSelected: function getGridDataExclusivesSelected(params) {\n    var self = this;\n    params.extra = params.extra || {};\n    params.extra[self.Class.BA_ACTION_PARAMETER_PREFIX + \"rows\"] = params.rows;\n    params.extra[self.Class.BA_ACTION_PARAMETER_PREFIX + \"value\"] = params.value;\n    params.extra[self.Class.BA_ACTION_PARAMETER_PREFIX + \"xpathfilter\"] = params.xpathfilter;\n    return this.getPropertyData($.extend(params, {\n      property: \"exclusivesSelected\" }));\n\n  },\n\n  /*\r\n      *   Returns the upload plugin cancel image\r\n      */\n  getUploadCancelImage: function getUploadCancelImage() {\n    return bizagi.services.ajax.pathToBase + this.serviceLocator.getUrl(\"render-upload-cancel-image\");\n  },\n  /*\r\n      *   Returns the upload file url for each file\r\n      */\n  getUploadFileUrl: function getUploadFileUrl(params) {\n    var self = this;\n    var url = this.serviceLocator.getUrl(\"render-upload-data-url\");\n    var data = {};\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"PROCESSPROPERTYVALUE\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"propertyName\"] = params.property || \"fileContent\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"fileId\"] = params.fileId;\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"sessionId\"] = params.sessionId;\n    params.contexttype ? data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype : \"\";\n    return self.verifyPathToBase(bizagi.services.ajax.pathToBase, url) + \"?\" + jQuery.param(data) + \"&xsrf=\" + bizagi.getXSRFToken();\n  },\n\n  downloadFile: function downloadFile(params) {\n    var self = this;\n    var fileUrl = self.getUploadFileUrl(params);\n\n    return $.ajax({\n      url: fileUrl,\n      type: \"GET\",\n      queue: params.queue,\n      dataType: \"binary\",\n      processData: false //Always false for binary dataType\n    }).\n    then(function (binary_file) {\n      if (binary_file.type == \"application/json\") {\n        return self.readFileAsJSON(binary_file);\n      }\n\n      if (typeof binary_file == \"string\") {\n        var xhr = arguments[2];\n        var contentType = xhr.getResponseHeader('Content-type');\n        binary_file = bizagi.util.media.byteArrayToBlob(self.stringToByteArray(binary_file), contentType);\n      }\n      return binary_file;\n    });\n  },\n\n  readFileAsJSON: function readFileAsJSON(binary_file) {\n    var def = new $.Deferred();\n    var reader = new FileReader();\n    reader.onloadend = function () {\n      def.reject({ responseText: reader.result });\n    };\n    reader.readAsText(binary_file);\n    return def.promise();\n  },\n\n  stringToByteArray: function stringToByteArray(binary) {\n    return bizagi.util.stringToByteArray(binary);\n  },\n\n\n  getUploadFileEntityUrl: function getUploadFileEntityUrl(params) {\n    var self = this;\n    var url = this.serviceLocator.getUrl(\"render-upload-data-url\");\n    var data = {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"PROCESSPROPERTYVALUETEMPLATE\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"propertyName\"] = \"fileContent\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"fileId\"] = params.fileId;\n    if (params.isContextContainerWidgetRender) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n      data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"sessionId\"] = params.sessionId;\n      data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"xpathactions\"] = params.xpathActions;\n    } else {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"surrogateKey\"] = params.surrogatekey;\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"guidEntity\"] = params.guidentity;\n    }\n\n    return self.verifyPathToBase(bizagi.services.ajax.pathToBase, url) + \"?\" + jQuery.param(data);\n  },\n\n  /*\r\n      *   Returns the upload add url\r\n      */\n  getUploadAddUrl: function getUploadAddUrl() {\n    var self = this;\n    var url = this.serviceLocator.getUrl(\"render-upload-add-url\");\n    var data = {};\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"ADDFILE\";\n\n    return self.verifyPathToBase(bizagi.services.ajax.pathToBase, url) + \"?\" + jQuery.param(data);\n  },\n  /*\r\n      *   Returns the upload add url\r\n      */\n  getUploadAddFileUrl: function getUploadAddFileUrl(isUserPreferences) {\n    var self = this;\n    var url = this.serviceLocator.getUrl(\"form-submit-data-upload\");\n    var data = {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = isUserPreferences === true ? \"SAVEUSERIMAGE\" : \"savefile\";\n\n    return self.verifyPathToBase(bizagi.services.ajax.pathToBase, url) + \"?\" + jQuery.param(data);\n  },\n\n  deleteImage: function deleteImage(params) {\n    var self = this;\n\n    var data = params.extra || {};\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"DELETEUSERIMAGE\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    params.contexttype ? data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype : \"\";\n\n    // Log submit data\n    bizagi.debug(\"Removing image '\" + params.xpath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-upload-delete-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\" });\n\n  },\n\n  /*\r\n      *   Returns the upload add url\r\n      */\n  deleteUploadFile: function deleteUploadFile(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"REMOVERELATION\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    params.contexttype ? data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype : \"\";\n\n    // Log submit data\n    bizagi.debug(\"Removing file in upload '\" + params.xpath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-upload-delete-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\" });\n\n\n  },\n  /*\r\n      * Return file meta data\r\n      */\n  getECMMetadata: function getECMMetadata(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n    data.action = \"getECMMetadata\";\n    data.idFileUpload = params.idFileUpload;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data.xpathContext = params.xpathContext;\n    data.xPath = params.xPath;\n    data.idAttrib = params.idAttrib;\n    if (params.sessionId) {\n      data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"sessionId\"] = params.sessionId;\n    }\n    // Log submit data\n    bizagi.debug(\"Get file metadata '\" + params.xPath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-ecm-upload-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\",\n      interceptor: {\n        intercept: true,\n        source: \"rendering_\" + self.guid } });\n\n\n\n  },\n  /*\r\n      * Checkout a file\r\n      **/\n  checkOutFile: function checkOutFile(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n    data.action = \"checkOutFile\";\n    data.idFileUpload = params.idFileUpload;\n    data.xPath = params.xPath;\n    data.idAttrib = params.idAttrib;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data.xpathContext = params.xpathContext;\n\n\n    // Log submit data\n    bizagi.debug(\"file checkout '\" + params.xPath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-ecm-upload-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\" });\n\n  },\n  /*\r\n      * cancelCheckOut\r\n      **/\n  cancelCheckOut: function cancelCheckOut(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n    data.action = \"cancelCheckOut\";\n    data.idFileUpload = params.idFileUpload;\n    data.xPath = params.xPath;\n    data.idAttrib = params.idAttrib;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data.xpathContext = params.xpathContext;\n\n    // Log submit data\n    bizagi.debug(\"file checkout '\" + params.xPath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-ecm-upload-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\" });\n\n  },\n  /*\r\n      * Checkout a file\r\n      **/\n  deleteECMFile: function deleteECMFile(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n    data.action = \"delete\";\n    data.idFileUpload = params.idFileUpload;\n    data.xPath = params.xPath;\n    data.idAttrib = params.idAttrib;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data.xpathContext = params.xpathContext;\n\n    // Log submit data\n    bizagi.debug(\"delete file'\" + params.xPath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-ecm-upload-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\" });\n\n  },\n  /*\r\n      *  Update ECM file content\r\n      **/\n  updateECMFileContent: function updateECMFileContent(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n    data.action = \"updateECMFileContent\";\n    data.idFileUpload = params.idFileUpload;\n    data.xPath = params.xPath;\n    data.idAttrib = params.idAttrib;\n\n    data.metaValues = params.metaValues;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data.xpathContext = params.xpathContext;\n\n    // Log submit data\n    bizagi.debug(\"Update file content '\" + params.xPath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-ecm-upload-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\" });\n\n  },\n  /*\r\n      *  Update file content\r\n      **/\n  updateECMMetadata: function updateECMMetadata(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n    data.action = \"updateECMMetadata\";\n    data.idFileUpload = params.idFileUpload;\n    data.xPath = params.xPath;\n    data.idAttrib = params.idAttrib;\n\n    data.metaValues = params.metaValues;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data.xpathContext = params.xpathContext;\n\n    // Log submit data\n    bizagi.debug(\"Update file meta data '\" + params.xPath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-ecm-upload-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\" });\n\n  },\n  getFileProperties: function getFileProperties(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n    data.action = \"getFileProperties\";\n    data.idFileUpload = params.idFileUpload;\n    data.xPath = params.xPath;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data.xpathContext = params.xpathContext;\n\n    // Log submit data\n    bizagi.debug(\"Get file properties '\" + params.xPath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-ecm-upload-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\",\n      interceptor: {\n        intercept: true,\n        source: \"rendering_\" + self.guid } });\n\n\n  },\n  /**\r\n      * Get file item\r\n      * @param params\r\n      * @returns {{}|*}\r\n      */\n  getFile: function getFile(params) {\n    var self = this;\n    var url = this.serviceLocator.getUrl(\"render-upload-data-url\");\n    var data = {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"PROCESSPROPERTYVALUE\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"propertyName\"] = params.property || \"fileContent\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"fileId\"] = params.fileId;\n\n    params.contexttype ? data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype : \"\";\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || url,\n      data: $.param(data),\n      type: \"GET\",\n      dataType: \"binary\",\n      processData: false });\n\n  },\n\n  /**\r\n      * Document Templates generate rest service\r\n      * @param params\r\n      * @returns {string}\r\n      */\n  getAllDocuments: function getAllDocuments(params) {\n    var self = this;\n    var url = this.serviceLocator.getUrl(\"render-document-generateAllDocuments\");\n    var data = {};\n\n    data[\"contextXpath\"] = params.xpathContext;\n    data[\"xpathAttribute\"] = params.xpath;\n    data[\"idCase\"] = params.idCase;\n    data[\"idWorkItem\"] = params.idWorkItem;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || url,\n      data: $.param(data),\n      type: \"GET\",\n      dataType: \"binary\",\n      processData: false });\n\n  },\n\n  getUploadFileEntity: function getUploadFileEntity(params) {\n    var self = this;\n    var url = this.serviceLocator.getUrl(\"render-upload-data-url\");\n    var data = {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"PROCESSPROPERTYVALUETEMPLATE\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"propertyName\"] = \"fileContent\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"fileId\"] = params.fileId;\n\n    if (params.isContextContainerWidgetRender) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n      data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"xpathactions\"] = params.xpathActions;\n    } else {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"surrogateKey\"] = params.surrogatekey;\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"guidEntity\"] = params.guidentity;\n    }\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare) return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || url,\n      data: $.param(data),\n      type: \"GET\",\n      dataType: \"binary\",\n      processData: false });\n\n  },\n\n  uploadECMFile: function uploadECMFile(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n    data.action = \"uploadECMFile\";\n    data.fileUpload = params.fileUpload; // Content of file\n    data.xPath = params.xPath;\n\n    data.idAttrib = params.idAttrib;\n    data.fileName = params.fileName;\n    data.metaValues = params.metaValues;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data.xpathContext = params.xpathContext;\n\n    // Log submit data\n    bizagi.debug(\"Upload ECM file '\" + params.xPath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-ecm-upload-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\" });\n\n  },\n  getECMFileUrl: function getECMFileUrl(params) {\n    var self = this;\n    var url = params.url || self.serviceLocator.getUrl(\"render-ecm-upload-url\") + \"File\";\n\n    // Define data\n    var data = params.extra || {};\n\n    data.action = \"viewECMFile\";\n    data.idFileUpload = params.idFileUpload;\n    data.xPath = params.xPath;\n    data.idAttrib = params.idAttrib;\n\n    data.fileName = params.fileName;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data.xpathContext = params.xpathContext;\n    if (params.sessionId) {\n      data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"sessionId\"] = params.sessionId;\n    }\n    if (params.p_sessionId) {\n      data.p_sessionId = params.p_sessionId;\n    }\n\n\n    // Log submit data\n    bizagi.debug(\"View uploaded file '\" + params.xPath + \"'\", data);\n\n    return self.verifyPathToBase(bizagi.services.ajax.pathToBase, url) + \"?\" + jQuery.param(data) + \"&xsrf=\" + bizagi.getXSRFToken();\n  },\n  /*\r\n      *\r\n      */\n  isFileOnECM: function isFileOnECM(params) {\n    var self = this;\n\n    // Define data\n    var data = {};\n    data[\"action\"] = \"isFileOnECM\";\n    data[\"idUpload\"] = params.idUpload;\n\n    // Call ajax and returns promise\n    return $.read(self.serviceLocator.getUrl(\"render-ecm-upload-url\"), data);\n  },\n  /*\r\n      *   Start a grid record edition\r\n      */\n  editGridRecord: function editGridRecord(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"EDITRELATION\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n\n    if (params.contexttype) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype;\n    }\n\n    // Log submit data\n    bizagi.debug(\"Sending edit request for relation '\" + params.xpath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-grid-edit-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\",\n      serviceType: \"EDITRELATION\" });\n\n  },\n  /*\r\n      *   Sends a grid request to add a new row\r\n      *   The server returns the new row in json\r\n      */\n  addGridRecord: function addGridRecord(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"ADDRELATION\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    if (params.contexttype) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype;\n    }\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n\n    // Log submit data\n    bizagi.debug(\"Sending add request for grid '\" + params.xpath + \"'\", data);\n\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-grid-add-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\",\n      serviceType: \"ADDRELATION\" });\n\n  },\n  /*\r\n      *   Sends a grid request to add a new row, and sending the data at the same time\r\n      *   The server returns the new row in json\r\n      */\n  addGridRecordData: function addGridRecordData(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"ADDRELATIONWITHDATA\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    if (params.contexttype) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype;\n    }\n\n    // Build data to submit\n    var submitData = self.processDataValues(params.submitData || {});\n    for (key in submitData) {\n      data[key] = submitData[key];\n    }\n\n    // Log submit data\n    bizagi.debug(\"Sending add request for grid '\" + params.xpath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-grid-add-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\",\n      serviceType: \"ADDRELATIONWITHDATA\" });\n\n  },\n  /*\r\n      *   Submits the grid record data to the server\r\n      */\n  saveGridRecord: function saveGridRecord(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"SAVERELATION\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n\n    if (params.contexttype) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype;\n    }\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"disableServerGridValidations\"] = params.disableServerGridValidations || false;\n\n    // Send the submitted data page cache because it cointains the grid's form page cache\n    if (params.submitData.idPageCache) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.submitData.idPageCache;\n      delete params.submitData.idPageCache;\n    }\n\n    var submitData = params.submitData || {};\n\n    // Build data to submit\n    submitData = self.processDataValues(submitData);\n\n    for (key in submitData) {\n      data[key] = submitData[key];\n    }\n\n    // Log submit data\n    bizagi.debug(\"Sending save request for grid '\" + params.xpath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-grid-save-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\",\n      serviceType: \"SAVERELATION\" });\n\n  },\n  /*\r\n      *   Deletes a grid record in the server\r\n      */\n  deleteGridRecord: function deleteGridRecord(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"REMOVERELATION\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    if (params.contexttype) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype;\n    }\n\n    // Log submit data\n    bizagi.debug(\"Sending delete request for grid '\" + params.xpath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-grid-save-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\",\n      serviceType: \"REMOVERELATION\" });\n\n  },\n\n  /*\r\n      * Get association flipped status\r\n      */\n  getFlipAssociation: function getFlipAssociation(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"PROCESSPROPERTYVALUE\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.id;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"propertyName\"] = \"flipped\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"flipstate\"] = params.flipstate;\n    if (params.contexttype) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype;\n    }\n\n    // Log request data\n    bizagi.debug(\"Sending request for flip association control '\" + params.xpath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-property-refresh\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"text\" }).\n    pipe(function (response) {\n      try {\n        // Try to attempt to parse JSON\n        return bizagi.services.ajax.parseJSON(response);\n      } catch (e) {\n        // If JSON is not valid we need to return the original text response\n        return response;\n      }\n    });\n  },\n  /*\r\n      *   Cancels an add or edit request for a grid\r\n      */\n  rollbackGridAction: function rollbackGridAction(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"ROLLBACK\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n\n    if (params.contexttype) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype;\n    }\n\n    // Log submit data\n    bizagi.debug(\"Sending rollback request for grid '\" + params.xpath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-grid-rollback-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\",\n      serviceType: \"ROLLBACK\" });\n\n  },\n  /*\r\n      *   Returns the search render default image\r\n      */\n  getSearchDefaultImage: function getSearchDefaultImage() {\n    return bizagi.services.ajax.pathToBase + this.serviceLocator.getUrl(\"render-search-default-image\");\n  },\n\n  processDataCriteria: function processDataCriteria(criteria) {\n    var o;\n    criteria = $.extend(true, [], criteria);\n    for (o in criteria) {\n      if (criteria.hasOwnProperty(o) && criteria[o].hasOwnProperty(\"value\") && $.type(criteria[o].value) == \"object\") {\n        // for search\n        if (criteria[o].value.hasOwnProperty(\"id\") && criteria[o].value.hasOwnProperty(\"label\")) {\n          criteria[o].value = criteria[o].value.id;\n        }\n      }\n    }\n    return criteria;\n  },\n\n  /*\r\n      *   Perform entity search in the server\r\n      */\n  submitSearch: function submitSearch(params) {\n    var self = this,criteria;\n\n    // Define data\n    var data = params.extra || {};\n\n    var sort = params.sort && params.sort !== \"\" ? params.sort : \"\";\n\n    if (params.order && params.order !== \"\" && sort !== \"\")\n    sort += \" \" + params.order;\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"SEARCHENTITYFORRENDER\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"searchForm\"] = params.idSearchForm;\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"sort\"] = sort;\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"page\"] = params.page;\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"pageSize\"] = params.rows;\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"searchFilter\"] = params.searchFilter;\n\n    criteria = self.processDataCriteria(params.criteria);\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"searchCriteria\"] = JSON.encode(criteria);\n\n    // Optional search params\n    if (params.allowFullSearch)\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"allowFullSearch\"] = params.allowFullSearch;\n    if (params.maxRecords)\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"maxRowsAllowed\"] = params.maxRecords;\n\n    // Log submit data\n    bizagi.debug(\"Performing advanced search\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-search-advanced-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\",\n      serviceType: \"SEARCHENTITYFORRENDER\" });\n\n  },\n\n  /*\r\n      *   Submits the stakeholder associated\r\n      */\n  associateStakeholder: function associateStakeholder(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"SAVE\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"surrogateKey\"] = params.surrogateKey;\n    data[\"associatedUser\"] = params.associatedUser;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"guidEntity\"] = params.guidentity;\n\n    // Log submit data\n    bizagi.debug(\"Property refresh for '\" + params.xpath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    // TODO: change REST library in order to support extra HTTP parameters\n    // Please be careful with dataType parameter\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-stakeholder-associated\"),\n      data: data,\n      type: \"POST\",\n      dataType: params.dataType || \"json\" });\n\n  },\n\n  /*\r\n      *   Refresh the stakeholder associated list\r\n      */\n  refreshAssociateStakeholder: function refreshAssociateStakeholder(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"PROCESSPROPERTYVALUE\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"propertyName\"] = params.property;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n\n    // Log submit data\n    bizagi.debug(\"Property refresh for '\" + params.xpath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    // TODO: change REST library in order to support extra HTTP parameters\n    // Please be careful with dataType parameter\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-stakeholder-associated\"),\n      data: data,\n      type: \"POST\",\n      dataType: params.dataType || \"json\",\n      serviceType: \"PROCESSPROPERTYVALUE\" });\n\n  },\n\n  /*\r\n      *   Gets the link to the letter\r\n      */\n  getLetterNotEditableUrl: function getLetterNotEditableUrl(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"GETLETTER\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n\n    // Call ajax and returns promise\n    var url = params.url || self.serviceLocator.getUrl(\"render-letter-notEditable-url\");\n    return self.verifyPathToBase(bizagi.services.ajax.pathToBase, url) + \"?\" + jQuery.param(data);\n  },\n  /*\r\n      *   Gets the content for editable letters\r\n      */\n  getLetterContent: function getLetterContent(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"GETLETTER\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-letter-content-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"html\" }).\n    pipe(function (response) {\n      try {\n        return bizagi.services.ajax.parseJSON(response);\n      } catch (e) {\n        return response;\n      }\n    });\n  },\n  /*\r\n      *   Get the can generate letter flag\r\n      */\n  getCanGenerateLetter: function getCanGenerateLetter(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"CANGENERATELETTER\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: self.serviceLocator.getUrl(\"render-letter-content-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\" });\n\n  },\n  /*\r\n      *   Saves the content for editable letters\r\n      */\n  saveLetterContent: function saveLetterContent(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"UPDATELETTER\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n\n    // Define content\n    var content = params.content || \"\";\n\n    // Define url\n    var url = params.url || self.serviceLocator.getUrl(\"render-letter-save-url\");\n    var fullUrl = url + \"?\" + jQuery.param(data);\n\n    // Log submit data\n    bizagi.debug(\"Save request for letter sent to: \" + fullUrl, content);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: fullUrl,\n      data: content,\n      type: \"POST\",\n      dataType: \"html\" });\n\n  },\n  /*\r\n      *   Returns the icons path for the letter plugin\r\n      */\n  getLetterEditorIconsPath: function getLetterEditorIconsPath() {\n    return bizagi.services.ajax.pathToBase + this.serviceLocator.getUrl(\"render-letter-content-icons\");\n  },\n  /*\r\n      *   Executes a button action in the server\r\n      */\n  executeButton: function executeButton(params) {\n    return this.getPropertyData($.extend(params, {\n      property: \"buttonRule\" }));\n\n  },\n  /**\r\n      * Executes a fileprint action in the server\r\n      * @param params\r\n      * @returns {{}|*}\r\n      */\n  getFilePrint: function getFilePrint(params) {\n    var self = this;\n    var url = this.serviceLocator.getUrl(\"render-upload-data-url\");\n    var data = {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"PROCESSPROPERTYVALUE\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"propertyName\"] = \"data\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"disposition\"] = params.disposition;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n\n    params.contexttype ? data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype : \"\";\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || url,\n      data: $.param(data),\n      type: \"GET\",\n      dataType: \"binary\",\n      processData: false });\n\n  },\n\n  /*\r\n      *   Start a link form edition\r\n      */\n  editLinkForm: function editLinkForm(params) {\n    // Actually it does the same than edit grid records\n    return this.editGridRecord(params);\n  },\n  /*\r\n      *   Saves the content of the link form\r\n      */\n  saveLinkForm: function saveLinkForm(params) {\n    // Actually it does the same than edit grid records\n    //return this.saveGridRecord(params);\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"SAVEFORMLINKRELATION\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n\n    if (params.contexttype) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype;\n    }\n\n    // Send the submitted data page cache because it cointains the grid's form page cache\n    if (params.submitData.idPageCache) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.submitData.idPageCache;\n      delete params.submitData.idPageCache;\n    }\n\n    var submitData = params.submitData || {};\n\n    // Build data to submit\n    submitData = self.processDataValues(submitData);\n\n    for (key in submitData) {\n      data[key] = submitData[key];\n    }\n\n    // Log submit data\n    bizagi.debug(\"Sending save request for grid '\" + params.xpath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-grid-save-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\",\n      serviceType: \"SAVEFORMLINKRELATION\" });\n\n  },\n  /*\r\n      *   Rollbacks the link form edition\r\n      */\n  rollbackLinkForm: function rollbackLinkForm(params) {\n    // Actually it does the same than rollback grid records\n    return this.rollbackGridAction(params);\n  },\n  /*   Commit the link form edition\r\n      */\n  commitLinkForm: function commitLinkForm(params) {\n    // Actually it does the same than rollback grid records\n    return this.commitGridAction(params);\n  },\n  /*   Sends schekpoint action\r\n      */\n  sendCheckpoint: function sendCheckpoint(params) {\n    // Actually it does the same than rollback grid records\n    return this.sendCheckpointAction(params);\n  },\n  /*\r\n      *   Loads the userfield definition\r\n      */\n  getUserfieldDefinition: function getUserfieldDefinition(params) {\n    var self = this;\n    params = params || {};\n\n    // Check in deferreds cache\n    if (self.userfieldRequests[params.userfield])\n    return self.userfieldRequests[params.userfield];\n\n    // Required params: idCase\n    self.userfieldRequests[params.userfield] = $.read(self.serviceLocator.getUrl(\"render-userfield-definition\"),\n    {\n      guidUserfield: params.userfield,\n      device: params.device || \"desktop\" });\n\n\n\n    // Return deferred\n    return self.userfieldRequests[params.userfield];\n  },\n  /**\r\n      *  Get render json for one render o container\r\n      *  @param {object} params object with idRender,idPageCache\r\n      */\n  refreshControl: function refreshControl(params) {\n    var self = this;\n    params = params || {};\n\n    var data = {};\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"REFRESH\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    params.xpathContext ? data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext : \"\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    params.contexttype ? data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype : \"\";\n    params.idForm ? data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idForm\"] = params.idForm : \"\";\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare) {\n      return data;\n    }\n\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"form-get-data\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\",\n      serviceType: \"PARTIALREFRESH\" });\n\n  },\n  /**\r\n      *  Get render json for one render o container\r\n      *  @param {object} params object with idRender,idPageCache\r\n      */\n  refreshGridCell: function refreshGridCell(params) {\n    var self = this;\n    params = params || {};\n\n    var data = {};\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"REFRESHGRIDCELL\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"guidcolumn\"] = params.column;\n    params.xpathContext ? data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext : \"\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    params.idForm ? data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idForm\"] = params.idForm : \"\";\n    params.typeRender ? data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"typeRender\"] = params.typeRender : \"\";\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare) {\n      return data;\n    }\n\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"form-get-data\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\" });\n\n  },\n  /**\r\n      * Request to execute rule on server\r\n      * @param {object} params h_pageCacheId, guidrule\r\n      */\n  executeRule: function executeRule(params) {\n    var self = this;\n\n\n    var data = {};\n    params = params || {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"EXECUTERULE\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"guidrule\"] = params.rule || \"\";\n    params.xpathContext ? data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext : \"\";\n    params.contexttype ? data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype : \"\";\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare) {\n      return data;\n    }\n\n    return $.create(self.serviceLocator.getUrl(\"form-submit-data\"), data);\n  },\n  /**\r\n      * Request to execute interface on server\r\n      * @param {object} params h_pageCacheId, guidinterface\r\n      */\n  executeInterface: function executeInterface(params) {\n    var self = this;\n    var data = {};\n    params = params || {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"EXECUTEINTERFACE\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"guidinterface\"] = params[\"interface\"] || \"\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext || \"\";\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare) {\n      return data;\n    }\n\n    return $.create(self.serviceLocator.getUrl(\"form-submit-data\"), data);\n  },\n  /**\r\n      * Request to execute SAP Connecor\r\n      * @param {object} params h_pageCacheId, guidinterface\r\n      */\n  executeSAPConnector: function executeSAPConnector(params) {\n    var self = this;\n    var data = {};\n    params = params || {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"EXECUTESAP\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"guidsap\"] = params.guidsap || \"\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext || \"\";\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare) {\n      return data;\n    }\n\n    return $.create(self.serviceLocator.getUrl(\"form-submit-data\"), data);\n  },\n  /**\r\n      * Request to execute a Bizagi connector\r\n      * @param params\r\n      * @return {{}}\r\n      */\n  executeConnector: function executeConnector(params) {\n    var self = this;\n    var data = {};\n    params = params || {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"EXECUTECONNECTOR\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"guidConnector\"] = params.guidConnector || \"\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext || \"\";\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare) {\n      return data;\n    }\n\n    return $.create(self.serviceLocator.getUrl(\"form-submit-data\"), data);\n  },\n\n  /**\r\n      * Request to execute pipeline on server\r\n      * @param {object} params h_pageCacheId, guidpipeline\r\n      */\n  executePipeline: function executePipeline(params) {\n    var self = this;\n    var data = {};\n    params = params || {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"EXECUTEPIPELINE\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"guidpipeline\"] = params.pipeline || \"\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext || \"\";\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare) {\n      return data;\n    }\n\n    return $.create(self.serviceLocator.getUrl(\"form-submit-data\"), data);\n  },\n\n  /*\r\n      *   Document Templates generate rest service\r\n      */\n  generateDocumentTemplate: function generateDocumentTemplate(params) {\n    var self = this;\n    params = params || {};\n    params.append = params.append ? params.append : false;\n\n    return $.create(\n    self.serviceLocator.getUrl(\"render-document-generate\"),\n    {\n      h_pageCacheId: params.idPageCache,\n      contextXpath: params.xpathcontext,\n      groupMappingId: params.groupMapping,\n      xpathAttribute: params.xpath,\n      append: params.append,\n      controlId: params.id });\n\n\n  },\n  /*\r\n      *   Document Templates generate rest service\r\n      */\n  getAllDocumentsDownloadUrl: function getAllDocumentsDownloadUrl(params) {\n    var self = this;\n    var url = this.serviceLocator.getUrl(\"render-document-generateAllDocuments\");\n    var data = {};\n    data[\"h_pageCacheId\"] = params.idPageCache;\n    data[\"contextXpath\"] = params.xpathContext;\n    data[\"xpathAttribute\"] = params.xpath;\n    data[\"idCase\"] = params.idCase;\n    data[\"idWorkItem\"] = params.idWorkItem;\n    data[\"p_sessionId\"] = params.sessionId;\n\n    return self.verifyPathToBase(bizagi.services.ajax.pathToBase, url) + \"?\" + jQuery.param(data) + \"&xsrf=\" + bizagi.getXSRFToken();\n\n  },\n\n\n  getCaseNumber: function getCaseNumber(params) {\n    var self = this;\n    //this function use sendEMail\n    //and not possible use dat ain ajax\n    //this is workaround (rhonyp)\n    return $.ajax({\n      url: self.serviceLocator.getUrl(\"case-handler-getCaseSummary\").replace(\"{idCase}\", params.idCase) + \"?eventAsTasks=false&onlyUserWorkItems=true&mobileDevice=\" + bizagi.isMobile(),\n      type: \"GET\",\n      dataType: \"json\" });\n\n  },\n\n  getCaseAssignees: function getCaseAssignees(params) {\n    var self = this;\n    params = params || {};\n\n    // Required params: idCase\n    return $.read(\n    self.serviceLocator.getUrl(\"case-handler-getCaseAssignees\"), {\n      idCase: params.idCase }).\n\n    pipe(function (response) {\n      return response;\n    });\n  },\n\n  getWorkitems: function getWorkitems(params) {\n    var self = this;\n    params = params || {};\n\n    return $.read(self.serviceLocator.getUrl(\"case-handler-getWorkItems\"), {\n      idCase: params.idCase,\n      onlyUserWorkItems: params.onlyUserWorkItems || \"\" });\n\n  },\n\n  /**\r\n      * Executes a grid export action in the server\r\n      * @param params\r\n      * @returns {string}\r\n      */\n  getGridExportFile: function getGridExportFile(params) {\n    var self = this;\n    var url = this.serviceLocator.getUrl(\"render-upload-data-url\");\n    var data = {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"PROCESSPROPERTYVALUE\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"propertyName\"] = params.exportType;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"disposition\"] = params.disposition;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"sort\"] = params.sort;\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"idForm\"] = params.idForm;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n\n    params.contexttype ? data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype : \"\";\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare) return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || url,\n      data: $.param(data),\n      type: \"GET\",\n      dataType: \"binary\",\n      processData: false });\n\n  },\n\n  /*\r\n      * Executes a send email action in the server\r\n      */\n  sendEmail: function sendEmail(params) {\n    var self = this;\n    params = params || {};\n\n    var data = {};\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"PROCESSPROPERTYVALUE\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"propertyName\"] = params.property || \"sendEmail\";\n    params.xpathContext ? data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext : \"\";\n\n    // Email parameters\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"to\"] = params.to;\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"subject\"] = params.subject;\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"message\"] = params.message;\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"selected\"] = JSON.encode(params.selected);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare) {\n      return data;\n    }\n\n    var url = params.url || self.serviceLocator.getUrl(\"form-get-data\");\n\n    return $.create(url, data);\n  },\n\n  /*\r\n      * Request to invalidates page cache in server, since it is no needed anymore\r\n      */\n  invalidatePageCache: function invalidatePageCache(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"INVALIDATEPAGECACHE\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"form-submit-data\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\",\n      serviceType: \"INVALIDATEPAGECACHE\" });\n\n  },\n\n  /*\r\n      * Search users usign parameters suchs as userName, fullName, domain and organization\r\n      * @params { domain: (string), userName: (string), fullName: (string), organization: (string), page: (int), pageSize: (int) }\r\n      * @return {deferred} ajax object with JSON content\r\n      */\n  getUsersList: function getUsersList(params) {\n    var self = this;\n\n    return $.read(self.serviceLocator.getUrl(\"admin-getUsersList\"), params);\n  },\n  /*\r\n     * Search users usign parameters suchs as userName, fullName, domain and organization\r\n     * @params { domain: (string), userName: (string), fullName: (string), organization: (string), page: (int), pageSize: (int) }\r\n     * @return {deferred} ajax object with JSON content\r\n     */\n  getUsersListFromQueryForm: function getUsersListFromQueryForm(params) {\n    var self = this;\n\n    return $.read(self.serviceLocator.getUrl(\"render-query-getUsersList\"), params);\n  },\n  /*\r\n      * Search users for preferences usign parameters suchs as userName, fullName, domain and organization\r\n      * @params { domain: (string), userName: (string), fullName: (string), organization: (string), page: (int), pageSize: (int) }\r\n      * @return {deferred} ajax object with JSON content\r\n      */\n  getUsersListFromPreferences: function getUsersListFromPreferences(params) {\n    return $.read(this.serviceLocator.getUrl(\"admin-getUsersList-FromPreferences\"), params);\n  },\n\n  /**\r\n      * Get Users when the context is the boss field and User Form\r\n      * @param {*} params \r\n      */\n  getUsersListForXpathIdBossUser: function getUsersListForXpathIdBossUser(params) {\n    return $.read(this.serviceLocator.getUrl(\"admin-getUsersList-ForXpathIdBossUser\"), params);\n  },\n\n  /**\r\n      * Get Users when the context is the delegate field and User Form\r\n      * @param {*} params \r\n      */\n  getUsersListForXpathIdDelegate: function getUsersListForXpathIdDelegate(params) {\n    return $.read(this.serviceLocator.getUrl(\"admin-getUsersList-ForXpathIdDelegate\"), params);\n  },\n\n  /*\r\n      * Search users for Stakeholders\r\n      * @params { domain: (string), userName: (string), fullName: (string), organization: (string), page: (int), pageSize: (int) }\r\n      * @return {deferred} ajax object with JSON content\r\n      */\n  getUsersListForStakeholders: function getUsersListForStakeholders(params) {\n    return $.read(this.serviceLocator.getUrl(\"admin-getUsersList-ForStakeholders\"), params);\n  },\n\n  /*\r\n      * Search users usign parameters suchs as userName, fullName, domain and organization\r\n      * @params { domain: (string), userName: (string), fullName: (string), organization: (string), page: (int), pageSize: (int) }\r\n      * @return {deferred} ajax object with JSON content\r\n      */\n  getUsersForAssignation: function getUsersForAssignation(params) {\n    var self = this;\n\n    return $.read(self.serviceLocator.getUrl(\"admin-getUsersForAssignation\"), params);\n  },\n\n  /**\r\n      * Get Users Creation/Edition Form\r\n      */\n  getUsersForm: function getUsersForm(params) {\n    var self = this;\n    return $.create(self.serviceLocator.getUrl(\"admin-usersform\"), params);\n  },\n  /**\r\n      *   Return generate Data To Send By Email\r\n      */\n  generateDataToSendByEmail: function generateDataToSendByEmail(params) {\n    var self = this;\n    params = params || {};\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: self.serviceLocator.getUrl(\"admin-GenerateDataToSendByEmail\"),\n      data: params,\n      type: \"POST\",\n      dataType: \"json\" });\n\n  },\n  /**\r\n      * Return generate Send user password Mail\r\n      */\n  sendUserEmail: function sendUserEmail(params) {\n    var self = this;\n    params = params || {};\n    var data = {\n      action: \"SendUserEmail\",\n      emailTo: params.eMailTo,\n      subject: params.subject,\n      body: params.body };\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: self.serviceLocator.getUrl(\"admin-sendUserEmail\"),\n      data: params,\n      type: \"POST\",\n      dataType: \"json\" });\n\n  },\n\n  /**\r\n      * Get bizagi configuration\r\n      * @param {Function}   type callback function when the file load is succed\r\n      * @return {deferred} ajax object with JSON content\r\n      */\n  getConfiguration: function getConfiguration() {\n    var self = this;\n    var url = self.serviceLocator.getUrl(\"admin-users-config\");\n\n    return $.read(url);\n  },\n\n  /**\r\n      * Validate if url has 'http' string, in that case is not necesary add the pathToBase prefix\r\n      */\n  verifyPathToBase: function verifyPathToBase(pathToBase, url) {\n\n    if (url.indexOf(\"http\") != -1 && pathToBase != \"\") {\n      return url;\n    } else {\n      return pathToBase + url;\n    }\n\n  },\n\n  /**\r\n      * Get template of entity\r\n      * @param params { guid, prepare}\r\n      */\n  getTemplate: function getTemplate(params) {\n    var self = this;\n    var data = {};\n    params = params || {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"LOADTEMPLATE\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = \"entity\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"guidEntity\"] = params.guid;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"isProcessData\"] = params.forcePersonalizedColumns;\n\n    if (params.templateType) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"templatetype\"] = params.templateType;\n    }\n\n    if (params.templateGuid) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"templateguid\"] = params.templateGuid;\n    }\n\n    if (params.isDefaultTemplate != undefined) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"isDefaultTemplate\"] = params.isDefaultTemplate;\n    }\n\n    // Fix device type since on mobility there are tablet_ios, tablet_android, smartphone_ios, smartphone_ios\n    // and the service recives either tablet or smartphone\n    var deviceType = bizagi.util.detectDevice();\n    if (bizagi.util.isTabletDevice()) {\n      deviceType = \"tablet\";\n    } else if (bizagi.util.isSmartphoneDevice()) {\n      deviceType = \"mobile\";\n    }\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"devicetype\"] = deviceType;\n\n    // When prepare is true just return data, this feature is used by multiaction service\n    if (params.prepare) {\n      return data;\n    }\n\n    return $.create(self.serviceLocator.getUrl(\"form-get-data\"), data);\n  },\n\n  /**\r\n      * Chek if an entity has startform\r\n      * @param params\r\n      * @return {*}\r\n      */\n  hasStartForm: function hasStartForm(params) {\n    var self = this;\n    var data = {};\n\n    if (params.guidWFClass) {\n      data.guidWFClass = params.guidWFClass;\n    }\n\n    return $.read(self.serviceLocator.getUrl(\"render-processes-startform\"), data);\n  },\n\n  /**\r\n      * Get the start form of the case\r\n      * @param params\r\n      * @return {*}\r\n      */\n  getStartForm: function getStartForm(params) {\n    var self = this;\n    var data = {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"LOADSTARTFORM\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"guidprocess\"] = params.guidprocess;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"isActionStartForm\"] = true;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"devicetype\"] = self.deviceType;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"devicecode\"] = self.deviceCode;\n\n    if (params.idStartScope) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idStartScope\"] = params.idStartScope;\n    }\n    if (params.idCase) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idCase\"] = params.idCase;\n    }\n    if (params.idStartScope) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idStartScope\"] = params.idStartScope;\n    }\n    if (params.idWorkitem) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idWorkitem\"] = params.idWorkitem;\n    }\n    if (params.additionalXpaths) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"additionalXpaths\"] = params.additionalXpaths;\n    }\n    if (params.surrogatedKey) {\n      data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"surrogatedKey\"] = params.surrogatedKey;\n    }\n    if (params.recordXpath) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"recordlauncherxpath\"] = params.recordXpath;\n    }\n    if (params.mappingstakeholders) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"mappingstakeholders\"] = params.mappingstakeholders;\n    }\n\n    return $.ajax({\n      url: self.serviceLocator.getUrl(\"form-get-data\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\",\n      cache: true });\n\n  },\n  /*\r\n      *   Start a link form edition\r\n      */\n  editActionForm: function editActionForm(params) {\n    // Actually it does the same than edit grid records\n    return this.editGridRecord(params);\n  },\n\n  /**\r\n      * Get list of actions in action launcher\r\n      * @param params\r\n      * @return {*}\r\n      */\n  getActions: function getActions(params) {\n    var self = this;\n    var extendParams = $.extend(params, { prepare: true });\n\n    var data = self.getPropertyData(extendParams) || [];\n\n    if (params.ptags) {\n      data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"tags\"] = params.ptags;\n    }\n\n    if (params.pmaxitems) {\n      data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"maxitems\"] = params.pmaxitems;\n    }\n\n    if (params.prepare) {\n      return data;\n    }\n\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-property-refresh\"),\n      data: data,\n      type: \"POST\",\n      dataType: params.dataType || \"json\",\n      serviceType: \"PROCESSPROPERTYVALUE\",\n      beforeSend: function beforeSend(xhr, status) {\n        bizagi.multiactionConnection = bizagi.multiactionConnection || [];\n        bizagi.multiactionConnection.push(xhr);\n      } });\n\n\n  },\n\n  /**\r\n      * Execute actions or constructors\r\n      * @param params\r\n      */\n  executeActions: function executeActions(params) {\n    var self = this;\n    var extendParams = $.extend({}, params, { prepare: true });\n    var data = self.getPropertyData(extendParams) || [];\n\n    if (params.pguidConstructor) {\n      data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"guidConstructor\"] = params.pguidConstructor;\n    }\n\n    if (params.pguidAction) {\n      data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"guidAction\"] = params.pguidAction;\n    }\n    if (params.prepare) {\n      return data;\n    }\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-property-refresh\"),\n      data: data,\n      type: \"POST\",\n      dataType: params.dataType || \"json\",\n      serviceType: \"PROCESSPROPERTYVALUE\" });\n\n\n  },\n\n  /**\r\n      * Get list of actions in action launcher\r\n      * @param params\r\n      * @return {*}\r\n      */\n  getPolymorphicActions: function getPolymorphicActions(params) {\n    var self = this;\n    var extendParams = $.extend(params, { prepare: true });\n    var data = self.getPropertyData(extendParams) || [];\n\n    if (params.ptags) {\n      data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"tags\"] = params.ptags;\n    }\n\n    if (params.additionalXpaths) {\n      data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"additionalXpaths\"] = params.additionalXpaths;\n    }\n\n    if (params.prepare) {\n      return data;\n    }\n\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-property-refresh\"),\n      data: data,\n      type: \"POST\",\n      dataType: params.dataType || \"json\",\n      serviceType: \"PROCESSPROPERTYVALUE\" });\n\n  },\n\n  /**\r\n      * Make a JSON tree of polymorphic constructors categories\r\n      * @param values\r\n      * @return {Array}\r\n      */\n  serializePolymorphicActions: function serializePolymorphicActions(values) {\n    // json serializer\n    var actions = [];\n    var GUID_ENTITY = 0,DISPLAY_NAME = 1,XPATHCONTEXT = 2,TYPE = 3,GUID_OBJECT = 4,GUID_CONSTRUCTOR = 5,GUID_PARENT_ENTITY = 6;\n\n    /**\r\n                                                                                                                                 * Get children by guid of entity\r\n                                                                                                                                 * @param guid\r\n                                                                                                                                 * @return {Array}\r\n                                                                                                                                 */\n    var getChildren = function getChildren(guid) {\n      var children = [];\n      guid = guid || \"\";\n\n      $.each(values, function (key, value) {\n        if (value[GUID_PARENT_ENTITY] == guid) {\n          children.push(value);\n        }\n      });\n      return children;\n    };\n\n    /**\r\n        * Get parents by action object\r\n        * @param node\r\n        * @return {string}\r\n        */\n    var getParents = function getParents(node) {\n      node = node || {};\n      var parents = \"\";\n\n      $.each(values, function (key, value) {\n        if (value[GUID_ENTITY] == node[GUID_PARENT_ENTITY]) {\n          parents += getParents(value) + value[DISPLAY_NAME] + \" > \";\n        }\n      });\n      return parents;\n    };\n\n\n    /**\r\n        * Make a tree of actions\r\n        * @param list\r\n        * @param guid\r\n        * @return {*}\r\n        */\n    var fillTree = function fillTree(list, guid) {\n      var node;\n      var children = getChildren(guid);\n      $.each(children, function (key, value) {\n        var child = fillTree([], value[GUID_ENTITY]);\n        node = {\n          \"guidEntity\": value[GUID_ENTITY],\n          \"displayName\": value[DISPLAY_NAME],\n          \"hasConstructor\": value[GUID_CONSTRUCTOR] ? true : false,\n          \"type\": value[TYPE],\n          \"guidObject\": value[GUID_OBJECT],\n          \"guidConstructor\": value[GUID_CONSTRUCTOR],\n          \"xpathContext\": value[XPATHCONTEXT],\n          \"children\": child,\n          \"parents\": getParents(value) };\n\n        if (node.guidConstructor !== \"\" || node.children.length > 0) {\n          list.push(node);\n        }\n      });\n\n      return list;\n    };\n    fillTree(actions, \"\");\n    return actions;\n  },\n\n  /**\r\n      * Gets the image for an entity xpath\r\n      * @param params\r\n      */\n  getEntityImage64: function getEntityImage64(params) {\n    var self = this,\n    data = {\n      width: params.data,\n      height: params.height,\n      xpath: params.xpath },\n\n    url = self.serviceLocator.getUrl(\"render-entity-layout-image64\").replace(\"{entity}\", params.entity).replace(\"{surrogateKey}\", params.surrogateKey);\n\n    return $.ajax({\n      url: url,\n      data: data });\n\n  },\n\n  /**\r\n      * Get data files when user access from my stuff, because there is no scope\r\n      */\n  getFilesDataForLayoutUploadControl: function getFilesDataForLayoutUploadControl(params) {\n    var self = this;\n    return $.read(self.serviceLocator.getUrl(\"render-entity-layout-upload-files\"), params);\n  },\n\n  /**\r\n      * Process an upload file into the server\r\n      * @param {} params\r\n      * @returns {}\r\n      */\n  processUploadFile: function processUploadFile(params) {\n    return $.ajax({\n      url: this.verifyMobilePathToBase(bizagi.services.ajax.pathToBase || \"\", params.url),\n      data: params.formData,\n      type: \"POST\",\n      contentType: false,\n      processData: false });\n\n  },\n\n  /**\r\n      * Commit an add or edit request for a grid\r\n      * @param params\r\n      * @returns {*}\r\n      */\n  commitGridAction: function commitGridAction(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"COMMIT\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n\n    if (params.contexttype) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype;\n    }\n\n    // Log submit data\n    bizagi.debug(\"Sending rollback request for grid '\" + params.xpath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-grid-commit-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\",\n      serviceType: \"COMMIT\" });\n\n  },\n  /*\r\n      *   Commit an add or edit request for a grid\r\n      */\n  sendCheckpointAction: function sendCheckpointAction(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"CHECKPOINT\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n\n    if (params.contexttype) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype;\n    }\n\n    // Log submit data\n    bizagi.debug(\"Sending checkpoint request for grid '\" + params.xpath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-grid-checkpoint-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\",\n      serviceType: \"CHECKPOINT\" });\n\n  },\n\n  /**\r\n      * Validate if url has 'http' string, in that case is not necesary add the pathToBase prefix\r\n      */\n  verifyMobilePathToBase: function verifyMobilePathToBase(pathToBase, url) {\n    return bizagi.util.isMashupContext() ? (url || \"\").replaceAll(pathToBase, \"\") : url;\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /*\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: BizAgi Rendering Services\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: Diego Parra\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This class will provide a facade to access to multiaction rendering REST services\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n$.Class.extend(\"bizagi.render.services.multiactionservice\", {\n  // Statics\n  BA_ACTION_PARAMETER_PREFIX: \"p_\",\n  BA_CONTEXT_PARAMETER_PREFIX: \"h_\",\n  BA_PAGE_CACHE: \"pageCacheId\" },\n{\n\n  /* \r\n  *   Constructor\r\n  */\n  init: function init(service, limit, queue) {\n    this.service = service;\n    this.serviceLocator = service.serviceLocator;\n\n    // Multiaction - batch stuff\n    this.batch = {};\n    this.batchTimer = 50;\n    this.maxNumberOfActions = limit || 0;\n    this.queue = queue || null;\n    this.deferredBatchExecuting = $.Deferred();\n    this.deferredBatchExecuting.resolve();\n    this.disabledRequests = false;\n    this.circularDependencies = new bizagi.circularDependencies();\n\n    // Create proxyed version of methods\n    this.replicateServiceMethods();\n  },\n\n  /*\r\n     *   Returns the internal service\r\n     */\n  getService: function getService() {\n    return this.service;\n  },\n\n  /*\r\n     *   Create a proxied multiaction version for service calls\r\n     */\n  replicateServiceMethods: function replicateServiceMethods() {\n    var self = this;\n    for (var key in this.service.Class.prototype) {\n      // Omit the folowing methods\n      if (key == \"init\" || key == \"constructor\" || key == \"Class\" || key == \"multiaction\") continue;\n\n      // Replicate instance methods\n      self[key] = eval('var tmp = function(){ return this.proxyMethod(this.getService().' + key + ', arguments);};tmp');\n    }\n  },\n\n  /*\r\n     *   Perform the proxy call for each service method\r\n     */\n  proxyMethod: function proxyMethod(method, parameters) {\n    var service = this.service;\n\n    // Check if has only one argument, else execute directly\n    if (!parameters || parameters.length != 1) {\n      return method.apply(service, parameters);\n    }\n\n    // Check if the argument is object, else execute directly\n    if (_typeof(parameters[0]) != \"object\") {\n      return method.apply(service, parameters);\n    }\n\n    var params = parameters[0];\n\n    // If the caller is requesting a prepare call, just execute the method with the current parameters\n    if (params.prepare == true) return method.apply(service, parameters);\n\n    // Prepare the ajax instead of sending it\n    var originalPrepare = params.prepare;\n    params.prepare = true;\n\n    var action = method.apply(service, parameters);\n    if (originalPrepare === undefined || originalPrepare == null) delete params.prepare;else\n    params.prepare = originalPrepare;\n    return this.add(action);\n  },\n\n  /**\r\n     * This method make a standard error message\r\n     */\n  makeCircularDependenciesError: function makeCircularDependenciesError(error) {\n    var messageTmpl = bizagi.localization.getResource(\"render-actions-loop-validation\");\n\n    return printf(messageTmpl, error.dependencyFrom, error.dependencyTo);\n  },\n\n\n  /*\r\n     *   Add an action to be performed in a multiaction, and be resolved later\r\n     *   returns a deferred\r\n     */\n  add: function add(action) {\n    var self = this;\n    var deferred = new $.Deferred();\n\n    var name = action.h_action || \"unnamed\";\n\n    // Put here all actions to ignore in circular dependencies\n    var exceptionActions = [\"PROCESSPROPERTYVALUE\", \"LOADTEMPLATE\", \"ADDRELATIONWITHDATA\", \"GETFILE\"];\n\n    if (exceptionActions.indexOf(name) < 0 && bizagi.override.detectCircularDependencies) {\n      self.circularDependencies.addNode(name, action);\n    }\n\n    // First clear previous timeout\n    clearTimeout(self.batchTimeout);\n    var tag = action.tag = Math.guid();\n    var singleAction = { action: action, deferred: deferred };\n    self.batch[tag] = singleAction;\n\n    var fn = function fn() {\n      var resolveDependencies = self.circularDependencies.resolve();\n\n      if (resolveDependencies.error) {\n        // Reset Queue\n        for (var i in self.batch) {\n          var message = resolveDependencies.error.multiactionError;\n          self.batch[i].deferred.reject(message);\n        }\n        self.batch = {};\n      } else\n      if (!self.disabledRequests) {\n        self.deferredBatchExecuting = self.fire();\n      }\n    };\n\n    // Start a new timeout\n    self.batchTimeout = setTimeout(fn, self.batchTimer);\n\n    // If we have a limit, then fire it again\n    if (self.maxNumberOfActions != 0) {\n      if (Object.keys(self.batch).length >= self.maxNumberOfActions) {\n        clearTimeout(self.batchTimeout);\n        fn();\n      }\n    }\n\n    return deferred.promise();\n  },\n  /*\r\n     *   Fires up the multiaction\r\n     */\n  fire: function fire() {\n    var self = this;\n    var batch = {};\n\n    // Prepare actions and clone batch manually\n    var actions = [];\n    $.each(self.batch, function (tag, item) {\n      actions.push(item.action);\n      batch[tag] = item;\n    });\n\n    // Reset batch\n    self.batch = {};\n\n    // Fire ajax \n    return $.when(self.execute({ actions: actions, rejectDeferreds: false })).\n    done(function (responses) {\n\n      // Process each response\n      $.each(responses, function (i, response) {\n        var tag = response.tag;\n        if (!response.error) {\n          batch[tag].deferred.resolve(response.result);\n        } else {\n          batch[tag].deferred.reject(response.error, response, response.error.message);\n        }\n\n        // Remove paired tag from collection\n        delete batch[tag];\n      });\n\n      // Check if there are unpaired actions so we need to trigger fail deferred\n      $.each(batch, function (i, item) {\n        item.deferred.reject({ type: \"not-processed\", message: \"Operation didn't executed\" }, '', \"Operation didn't executed\");\n      });\n    }).fail(function (xhr, type, error) {\n\n      // Check if there are unpaired actions so we need to trigger fail deferred\n      var errorMessage = typeof error !== \"undefined\" ? error.message : error || \"Operation didn't executed\";\n      $.each(batch, function (i, item) {\n        item.deferred.reject({ type: \"not-processed\", message: errorMessage }, '', \"Operation didn't executed\");\n      });\n    });\n  },\n  /*\r\n     *   Sends a multiaction to the server\r\n     */\n  execute: function execute(params) {\n    var self = this;\n\n    // Define data\n    var data = {};\n    var rejectDeferreds = params.rejectDeferreds !== undefined ? params.rejectDeferreds : true;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"multiaction\";\n\n    // Check action tag\n    $.each(params.actions, function (i, action) {\n      action[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"tag\"] = action.tag || i;\n      delete action.tag;\n    });\n\n    // Fill optional parameters\n    params = params || {};\n    if (params.actions) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"actions\"] = JSON.encode(params.actions);\n    }\n\n    // Log submit data\n    bizagi.debug(\"Performing multi-action\", data);\n\n    // Call ajax and returns promise\n    var deferred = new $.Deferred();\n    $.ajax({\n      url: self.serviceLocator.getUrl(\"render-multiaction\"),\n      data: data,\n      queue: this.queue,\n      type: \"POST\",\n      dataType: \"json\",\n      serviceType: \"MULTIACTION\",\n      beforeSend: function beforeSend(xhr, status) {\n        xhr.renderingService = true;\n        bizagi.multiactionConnection = bizagi.multiactionConnection || [];\n        bizagi.multiactionConnection.push(xhr);\n      } }).\n\n    done(function (responses) {\n      for (i in responses) {\n        if (typeof responses[i] !== \"function\") {\n          var response = responses[i];\n          if (response.error) {\n            if (rejectDeferreds) {\n              deferred.reject(response.error, \"servererror\", response);\n              return;\n            }\n\n          }\n        }\n      }\n      deferred.resolve(responses);\n\n    }).fail(function (xhr) {\n      var response = xhr.responseText || xhr;\n      var finalResponse = {};\n      // Try to parse the response\n      try {\n        finalResponse = JSON.parse(response);\n      } catch (e) {}\n      deferred.reject(xhr, \"servererror\", finalResponse);\n    });\n\n    return deferred.promise();\n  },\n\n  /**\r\n      * Disable the request, restart the form is mandatory who calls this method \r\n      * or unexpected behavior will happen on the form\r\n      */\n  disableRequests: function disableRequests() {\n    var self = this;\n    self.disabledRequests = true;\n  },\n\n  /**\r\n      * Identify if batch action is running, by default is resolved\r\n      * @returns Deferred object if batch action is running\r\n      */\n  validateIfBatchIsExecuting: function validateIfBatchIsExecuting() {\n    var self = this;\n    return self.deferredBatchExecuting;\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /*\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: BizAgi Rendering Command controller \r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: Diego Parra\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This script will define basic stuff for action and validation controllers\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\n$.Class.extend(\"bizagi.command.controllers.controller\", {\n  /* \r\n                                                          *   Set to true in order to debug\r\n                                                          */\n  THROW_ERROR: true },\n\n{\n  /*  \r\n  *   Constructor\r\n  */\n  init: function init(form) {\n    this.form = form;\n    this.dateFormat = form.getResource(\"dateFormat\");\n  },\n  /*\r\n     *   Returns the condition in JS\r\n     */\n  buildConditions: function buildConditions(conditions, bGridDetected, bCheckEditability, innerDependencies) {\n    var self = this;\n    var operator = conditions.expressions && conditions.expressions.length > 1 ? self.buildConditionOperator(conditions.operator) : conditions.operator;\n    innerDependencies = innerDependencies || [];\n\n    // Define if a grid has been detected\n    bGridDetected = bGridDetected || false;\n    bCheckEditability = bCheckEditability || false;\n\n    //  Validate trtue and false conditions\n    if (operator == \"true\")\n    return \"true\";\n    if (operator == \"false\")\n    return \"false\";\n\n    var sJsCondition = \"\";\n\n    for (var i = 0; i < conditions.expressions.length; i++) {\n      var expression = conditions.expressions[i];\n\n      if (expression.simple) {\n        var bGDetected = self.searchGridReferenceInCondition(expression.simple);\n        sJsCondition += self.buildSimpleCondition(expression.simple, bGDetected, bCheckEditability, innerDependencies);\n\n      } else if (expression.complex) {\n        sJsCondition += \"(\" + self.buildConditions(expression.complex, bGridDetected, bCheckEditability, innerDependencies) + \") \";\n      }\n\n      // Adds operator\n      sJsCondition += i < conditions.expressions.length - 1 ? operator : \"\";\n    }\n\n    return sJsCondition;\n  },\n  /*\r\n     *   Builds the condition operator\r\n     */\n  buildConditionOperator: function buildConditionOperator(conditionsOperator) {\n    if (conditionsOperator == \"and\")\n    return \" && \";\n    if (conditionsOperator == \"or\")\n    return \" || \";\n    return conditionsOperator;\n  },\n  /*\r\n     *   Builds a simple condition\r\n     */\n  buildSimpleCondition: function buildSimpleCondition(condition, bGridDetected, bCheckEditability, innerDependencies) {\n    var self = this;\n    var sXpath;\n    var xpath;\n    var sArgument = \"\";\n    var operator = condition.operator;\n    var ensureValueJs = \"\";\n    var ensureEditable = \"\";\n    var ensureVisible = \"\";\n\n    // Define if a grid has been detected\n    bGridDetected = bGridDetected || false;\n    bCheckEditability = bCheckEditability || false;\n\n    // List of controls excluded to editability validation\n    // Just keep empty the value of element\n    var excludeEditabilityRule = { \"boolean\": \"\" };\n    var control = condition.xpath && condition.renderId ?\n    condition.xpath + '.' + condition.renderId :\n    condition.xpath || condition.renderId || condition.containerId;\n\n\n    if (bGridDetected && condition.containerId) {\n      var gridXpathInfo = self.processGridXpath(condition.xpath);\n      control = gridXpathInfo.gridXpath + \".\" + condition.containerId + \"[].\" + gridXpathInfo.remainingXpath + \".\" + condition.renderId;\n    }\n\n    if (!innerDependencies.includes(control)) {\n      innerDependencies.push(control);\n    }\n\n    var detectedArgumentType = self.detectConditionArgumentType(control, condition.argumentType);\n\n    // Build xpath\n    sXpath = self.buildXpath(control, detectedArgumentType, bGridDetected);\n    if (detectedArgumentType != \"boolean\") {\n      ensureValueJs += \"!bizagi.util.isEmpty(\" + sXpath + \") && \";\n    }\n\n    // Check if the render is editable, only when the parameter is provided\n    if (bCheckEditability && control && control.length > 0 && !excludeEditabilityRule.hasOwnProperty(detectedArgumentType)) {\n      ensureEditable = \"self.isVisible('\" + control + \"') && self.isEditable('\" + control + \"') && \";\n    }\n\n    // Build argument\n    if (!bizagi.util.isEmpty(condition.argument)) {\n      sArgument = self.buildArgument(condition.argument, detectedArgumentType, bGridDetected);\n\n      // If the argument is xpath it must be filled to for some operators\n      if (detectedArgumentType == \"xpath\") {\n        ensureValueJs += \"!bizagi.util.isEmpty(\" + sArgument + \") && \";\n      }\n\n    } else if (condition.argument === \"\") {\n      // Also check the case when the argument is empty\n      sArgument = \"\\\"\\\"\";\n    }\n\n    // Build condition\n\n    if (operator == \"includes\") {\n      return ensureEditable + ensureValueJs + \"self.includes(\" + sXpath + \",\" + sArgument + \") \";\n    }\n    //if (operator == \"changes\") return \"true\";\n    if (operator == \"changes\") {\n      // If key enableActionIsChangedSupport is true, allow to evaluate the valid control\n      // that execute the action \"is changed\" (see ticket TM12723)\n      if (bizagi.override && !bizagi.override.enableActionIsChangedSupport) {\n        return \"self.isChanged(\" + sXpath + \", params.changed)\";\n      } else {\n        if (bGridDetected) {\n          return \"self.isGridColumnChanged(\" + sXpath + \", params,'\" + control + \"')\";\n        } else {\n          return \"self.isControlChanged(\" + sXpath + \", params,'\" + control + \"')\";\n        }\n      }\n    }\n    if (operator == \"equals\")\n    return ensureEditable + ensureValueJs + sXpath + \" == \" + sArgument;\n    if (operator == \"not-equals\")\n    return ensureEditable + sXpath + \" != \" + sArgument;\n    if (operator == \"less-than\")\n    return ensureEditable + ensureValueJs + sXpath + \" < \" + sArgument;\n    if (operator == \"less-equals-than\")\n    return ensureEditable + ensureValueJs + sXpath + \" <= \" + sArgument;\n    if (operator == \"greater-than\")\n    return ensureEditable + ensureValueJs + sXpath + \" > \" + sArgument;\n    if (operator == \"greater-equals-than\")\n    return ensureEditable + ensureValueJs + sXpath + \" >= \" + sArgument;\n    if (operator == \"like\")\n    return ensureEditable + ensureValueJs + sXpath + \".toString().indexOf(\" + sArgument + \") >= 0 \";\n    if (operator == \"is-empty\") {\n      if (detectedArgumentType != \"entity\") {\n        return ensureEditable + \"bizagi.util.isEmpty(\" + sXpath + \")\";\n      } else {\n        return ensureEditable + \"(\" + sXpath + \" == 0 || bizagi.util.isEmpty(\" + sXpath + \"))\";\n      }\n    }\n    if (operator == \"is-not-empty\") {\n      if (detectedArgumentType != \"entity\") {\n        return ensureEditable + \"!bizagi.util.isEmpty(\" + sXpath + \")\";\n      } else {\n        return ensureEditable + \"(\" + sXpath + \" != 0 && !bizagi.util.isEmpty(\" + sXpath + \"))\";\n      }\n    }\n    if (operator == \"is-true\")\n    return ensureEditable + \"( \" + sXpath + \" == true || \" + sXpath + \" == 'true' )\";\n    if (operator == \"is-false\")\n    return ensureEditable + \"( \" + sXpath + \" == false || \" + sXpath + \" == 'false' || \" + sXpath + \" == 'False' )\";\n    if (operator == \"does-not-contain\")\n    return ensureEditable + \"(bizagi.util.isEmpty(\" + sXpath + \") || \" + sXpath + \".toString().indexOf(\" + sArgument + \") < 0 )\";\n    if (operator == \"contains\")\n    return ensureEditable + ensureValueJs + sXpath + \".toString().indexOf(\" + sArgument + \") >= 0 \";\n    if (operator == \"begins-with\")\n    return ensureEditable + ensureValueJs + sXpath + \".toString().startsWith(\" + sArgument + \") == true \";\n    if (operator == \"does-not-begins-with\")\n    return ensureEditable + ensureValueJs + sXpath + \".toString().startsWith(\" + sArgument + \") == false \";\n    if (operator == \"file-uploaded\") {\n      xpath = control;\n      if (bGridDetected && xpath) {\n        xpath = xpath.replaceAll(\"[]\", \"[' + i + ']\");\n      }\n      return ensureEditable + \"self.isFileUploaded('\" + xpath + \"') \";\n    }\n    if (operator == \"file-not-uploaded\") {\n      xpath = control;\n      if (bGridDetected && xpath) {\n        xpath = xpath.replaceAll(\"[]\", \"[' + i + ']\");\n      }\n      return ensureEditable + \"!self.isFileUploaded('\" + xpath + \"') \";\n    }\n    if (operator == \"is-invalid-email\")\n    return ensureEditable + \"!self.isValidEmail(\" + sXpath + \") \";\n    if (operator == \"letter-edited\")\n    return \"false\"; //TODO\n    if (operator == \"letter-not-edited\")\n    return \"false\"; //TODO\n    if (operator == \"cell-change\")\n    return \"column == \" + sArgument;\n\n    if (operator == \"on-press\") {\n      if (bGridDetected) {\n        var id = self.buildXpath(control, \"id\", bGridDetected);\n        return \"self.isGridButtonPressed(\" + id + \", params.pressed)\";\n      } else {\n        return \"self.isButtonPressed('\" + control + \"', params.pressed)\";\n      }\n    }\n    if (operator == \"on-load\") {\n      return \"true\";\n    }\n\n    // ondelete behavior on grid control  \n    if (operator == 'on-deleted-row') {\n      xpath = control || \"\";\n      return \"self.onDeletedGridRow('\" + xpath + \"', params.rowDeleted)\";\n    }\n\n    // If there is another operator code throw exception\n    throw new \"There is no implementation for operator code \"() + operator;\n  },\n  /*\r\n     *   Detects the argument type based on the render\r\n     */\n  detectConditionArgumentType: function detectConditionArgumentType(control, argumentType) {\n    var self = this;\n\n    if (argumentType === undefined || argumentType == \"const\") {\n\n      // Search render\n      var form = self.form;\n      var render = form.getRender(control) || form.getRenderById(control);\n\n      // If the render doesn't exist, is because it has the visible property assigned to false\n      // and isn't present in the form's metadata, for this case returns the default value (text)\n      if (render == null) {\n        if (bizagi.override && bizagi.override.breakActionWithUnavailableRenders) {\n          throw new Error(\"RenderNotFoundException in method detectConditionArgumentType of bizagi.command.controllers.controller\");\n        } else {\n          return 'text';\n        }\n\n      }\n\n      // Check if the render is a grid\n      if (render.properties.type == \"grid\") {\n        var gridXpath = self.processGridXpath(control);\n\n        if (gridXpath.remainingXpath === \"\") {\n          // The target is the grid\n          return \"xpath\";\n        } else {\n          render = render.getColumn(gridXpath.remainingXpath);\n          if (render == null) {\n            throw new Error(\"RenderNotFoundException in method detectConditionArgumentType of bizagi.command.controllers.controller\");\n          }\n        }\n      }\n\n      var dataType = render.properties.dataType;\n      var renderType = bizagi.util.normalizeType(render.properties.type);\n\n      if (self.isRelatedEntityRender(renderType)) {\n        return 'entity';\n      }\n\n      // Number\n      if (dataType == 1 || dataType == 2 || dataType == 3 || dataType == 4 || dataType == 6 || dataType == 7 || dataType == 10 || dataType == 11) {\n        return 'number';\n      }\n\n      // Money\n      if (dataType == 8) {\n        return 'money';\n      }\n\n      // Date\n      if (dataType == 12 || dataType == 13) {\n        if (render.properties.showTime == true) {\n          return 'datetime';\n        } else {\n          return 'date';\n        }\n      }\n\n      // Boolean\n      if (dataType == 5) {\n        return 'boolean';\n      }\n\n      // Button\n      if (renderType == \"button\") {\n        return \"button\";\n      }\n\n      // form\n      if (\"form\" === renderType || /queryForm/i.test(renderType)) {\n        return \"form\";\n      }\n\n      // Default\n      return 'text';\n\n    } else if (argumentType == \"xpath\" || argumentType == \"function\" || argumentType == \"entity\") {\n      return argumentType;\n    }\n\n    // Default return text\n    return 'text';\n  },\n  /*\r\n     *   Detects if a render type must be binded to a xpath with related entity\r\n     */\n  isRelatedEntityRender: function isRelatedEntityRender(renderType) {\n    return [\"combo\", \"list\", \"radio\", \"search\", \"searchCombo\", \"columnCombo\", \"columnSearch\", \"queryMultiSelect\"].includes(renderType) || /^cascadingcombo$/i.test(renderType);\n  },\n\n  buildXpath: function buildXpath(xpath, argumentType, bGridDetected) {\n    var self = this;\n\n    // Define if a grid has been detected\n    bGridDetected = bGridDetected || false;\n\n    // Process grid xpaths\n    if (bGridDetected) {\n      xpath = xpath.replaceAll(\"[]\", \"[' + i + ']\");\n    }\n\n    if (argumentType == 'xpath' && !bGridDetected) {\n      return \"self.evalXpath('\" + xpath + \"', '\" + self.detectConditionArgumentType(xpath, \"const\") + \"')\";\n    } else if (argumentType == 'id') {\n      return \"'\" + xpath + \"'\";\n    } else if (argumentType == 'function') {\n      var xpathArgumentType = self.detectConditionArgumentType(xpath, \"const\");\n      return \"self.evalXpath('\" + xpath + \"', '\" + xpathArgumentType + \"')\";\n    } else if (bGridDetected) {\n      return \"self.evalGridXpath(params, '\" + xpath + \"', '\" + argumentType + \"')\";\n    }\n\n    return \"self.evalXpath('\" + xpath + \"', '\" + argumentType + \"')\";\n  },\n  buildArgument: function buildArgument(argument, argumentType, bGridDetected, xpathContext) {\n    var self = this;\n    var number;\n\n    // Define if a grid has been detected\n    bGridDetected = bGridDetected || false;\n\n    if (argumentType == 'text') {\n      // Text\n      argument = argument == null ? \"\" : argument;\n      argument = typeof argument != 'string' ? argument.toString() : argument;\n      if (argument.indexOf(\"'\") != -1)\n      argument = argument.replaceAll(\"'\", \"\\\\'\");\n\n      // Remove line breaks because they will fail with the eval command\n      if (argument.indexOf(\"\\n\") != -1)\n      argument = argument.replaceAll(\"\\n\", \"\");\n\n      return \"'\" + argument.toString() + \"'\";\n    }\n    if (argumentType == 'boolean') {\n      // Boolean\n      if (typeof argument == \"string\") {\n        return argument == \"Default\" ? argument : eval(argument.toLowerCase()) == true ? \"true\" : \"false\";\n      } else {\n        return eval(argument) == true ? \"true\" : \"false\";\n      }\n    }\n    if (argumentType == 'number') {\n      // Number\n      number = new Number(argument);\n      if (number == NaN)\n      return \"-99999999\";\n      return number.toString();\n    }\n    if (argumentType == 'money') {\n      // MONEY\n      number = new Number(argument);\n      if (number == NaN)\n      return \"-99999999\";\n      return number.toString();\n    }\n    if (argumentType == 'date') {\n      //Date\n      var date = bizagi.util.dateFormatter.getDateFromInvariant(argument);\n      if (!date || date == 0)\n      date = new Date(0);\n\n      // Remove time\n      date.setHours(0, 0, 0, 0);\n\n      return \"bizagi.util.dateFormatter.getDateFromInvariant('\" + bizagi.util.dateFormatter.formatInvariant(date) + \"').setHours(0,0,0,0)\";\n    }\n    if (argumentType == 'datetime') {\n      //Date\n      var date = bizagi.util.dateFormatter.getDateFromInvariant(argument, true);\n      if (!date || date == 0) {\n        date = new Date(0);\n      }\n      //date.setSeconds(0);\n      date.setMilliseconds(0);\n\n      return \"bizagi.util.dateFormatter.getDateFromInvariant('\" + bizagi.util.dateFormatter.formatInvariant(date, true) + \"', true).getTime()\";\n    }\n    if (argumentType == 'color') {\n      // Color\n      return \"'\" + argument.toString() + \"'\";\n    }\n    if (argumentType == 'entity') {\n\n      if (bizagi.util.isEmpty(argument)) {\n        return null;\n      }\n      try {\n        argument = _typeof(argument) != \"object\" ? JSON.parse(argument) : argument;\n      } catch (e) {\n        argument = argument || {};\n      }\n\n      if (argument && argument.id) {\n        // Entity value\n        result = argument.id;\n      } else if (argument && Array.isArray(argument.value)) {\n        // Entity multi values\n        var result = argument.value.map(function (value) {\n          return value.id;\n        });\n      } else {\n        // Entity value\n        result = argument.id || argument;\n      }\n\n      return JSON.stringify(result);\n    }\n    if (argumentType == 'xpath') {\n      // Xpath value\n      var xpath = argument.toString();\n\n      bGridDetected = self.searchGridReferenceInXpath(xpath);\n\n      // Process grid xpaths\n      if (bGridDetected) {\n        xpath = xpath.replaceAll(\"[]\", \"[' + i + ']\");\n      }\n\n      if (xpathContext) {\n        xpath = xpathContext + \".\" + xpath;\n      }\n\n      return self.buildXpath(xpath, argumentType, bGridDetected);\n    }\n    if (argumentType == 'json') {\n      // Xpath value\n      return JSON.encode(argument);\n    }\n    if (argumentType == 'function') {\n      if (argument == \"BAToday\") {\n        return \"self.getCurrentDate()\";\n      }\n      if (argument == \"BANow\") {\n        return \"self.getCurrentDate(true)\";\n      }\n\n      // If there is another function type code throw exception\n      throw \"There is no implementation for function \" + argument;\n    }\n\n    if (argumentType == undefined) {\n      return null;\n    }\n\n    // If there is another argument type code throw exception\n    throw \"There is no implementation for argument type \" + argumentType;\n  },\n  /*\r\n     *   Evals if an xpath is editable\r\n     */\n  isEditable: function isEditable(xpath) {\n    var self = this;\n    // For the submit action we need only one render to perform the server action\n    var render = self.getRender(xpath);\n    if (render == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showRenderNotFoundError(xpath);\n      }\n      return;\n    }\n\n    return render.properties.editable;\n  },\n\n  isVisible: function isVisible(xpath) {\n    var self = this;\n\n    var render = self.getRender(xpath);\n    if (render == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showRenderNotFoundError(xpath);\n      }\n      return;\n    }\n\n    if (render.properties.visible) {\n      return self.isParentVisible(render.parent);\n    } else {\n      var renderType = bizagi.util.normalizeType(render.properties.type);\n      if (/^hidden$/i.test(renderType)) {\n        return true;\n      } else {\n        return false;\n      }\n    }\n  },\n\n  isParentVisible: function isParentVisible(render) {\n    var self = this;\n    if (render.parent) {\n      if (render.properties.visible) {\n        return self.isParentVisible(render.parent);\n      } else {\n        return false;\n      }\n    } else {\n      return render.properties.visible;\n    }\n  },\n\n  /* \r\n     *   Evals an xpath to find a render and return its value\r\n     */\n  evalGridXpath: function evalGridXpath(params, xpath, argumentType) {\n    var self = this;\n\n    if (params === undefined) {\n      return this.evalXpath(xpath, argumentType);\n    }\n\n    var grid = params.grid;\n\n    if (grid === undefined || grid === null) {\n      if (self.Class.THROW_ERROR) {\n        self.showRenderNotFoundError(xpath);\n      }\n      return null;\n    }\n\n    // Grid renders\n    var gridXpath = self.processGridXpath(xpath);\n\n    // Return the value\n    var gridColumn = grid.getColumn(gridXpath.remainingXpath);\n\n    if (!gridColumn) {\n      return false;\n      //throw \"There is no a valid render for xpath \" + xpath;\n    }\n\n    var cellValue = grid.getCellCurrentValue(gridXpath.index, gridXpath.remainingXpath);\n\n    if (gridColumn.properties.type == \"columnRadio\") {\n      if (cellValue && !bizagi.util.isString(cellValue)) {\n        if (cellValue.length > 0 && cellValue[0].length > 0)\n        cellValue = cellValue[0][0];else\n\n        cellValue = cellValue.id;\n      } else\n      if (!bizagi.util.isString(cellValue))\n      cellValue = 0;\n    }\n\n    if (gridColumn.properties.type == \"columnCombo\") {\n      cellValue = cellValue && cellValue.id ? cellValue.id : 0;\n    }\n\n    if (gridColumn.properties.type == \"columnSearch\") {\n      cellValue = cellValue && cellValue.id ? cellValue.id : 0;\n    }\n\n    if (gridColumn.properties.type == \"columnDate\") {\n      if (cellValue) {\n        cellValue = !gridColumn.properties.showTime ?\n        bizagi.util.dateFormatter.getDateFromInvariant(cellValue).setHours(0, 0, 0, 0) :\n        bizagi.util.dateFormatter.getDateFromInvariant(cellValue);\n      }\n    }\n    // Parse empty values\n    if (bizagi.util.isEmpty(cellValue)) {\n      // If the render is a boolean return false for actions\n      if (argumentType == \"boolean\") {\n        if (gridColumn.properties.display == \"check\") {\n          return false;\n        } else {\n          return null;\n        }\n      }\n    }\n\n    // Parse boolean and non-empty date types\n    if (argumentType == \"boolean\") {\n      return eval(self.buildArgument(cellValue, argumentType));\n    }\n\n    return cellValue;\n  },\n\n  /* \r\n     *   Evals an xpath to find a render and return its value\r\n     */\n  evalXpath: function evalXpath(xpath, argumentType) {\n    var self = this,i,renderToEval;\n\n    var renders = self.getRenders(xpath);\n    if (renders == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showRenderNotFoundError(xpath);\n      }\n      return null;\n    }\n\n    var rendersToEval = [];\n    $.each(renders, function (i, render) {\n      if (render.properties.editable) {\n        rendersToEval.push(render);\n      }\n    });\n\n    // If no render has been found skip editable validation\n    if (rendersToEval.length === 0) {\n      $.each(renders, function (i, render) {\n        rendersToEval.push(render);\n      });\n    }\n\n    i = 0;\n    while (i < rendersToEval.length) {\n      renderToEval = rendersToEval[i++];\n      var bIsGrid = renderToEval.properties.type == 'grid';\n      if (!bIsGrid) {\n        // Normal renders\n        var value = renderToEval.getValue();\n        var renderType = bizagi.util.normalizeType(renderToEval.properties.type || \"\");\n\n        if (argumentType === undefined || argumentType === \"undefined\") {\n          return value;\n        }\n\n        // If the render is a combo and the value is null return 0 for validations and actions\n        if ([\"combo\", \"list\", \"search\", \"radio\"].includes(renderType) || /^cascadingcombo$/i.test(renderType)) {\n          if (bizagi.util.isEmpty(value) || value.id == \"\") {\n            value = 0;\n          }\n        }\n\n        // If the render is a queryMultiSelect and the value is empty array of objects\n        // return mapValue for validations and actions\n        if (/^queryMultiSelect$/i.test(renderType)) {\n          return renderToEval && renderToEval.mapValue(value);\n        }\n\n        if (renderType === \"comboSelected\") {\n          return typeof value === \"string\" ? JSON.parse(value).value : value;\n        }\n\n        if (bizagi.util.isEmpty(value)) {\n          // If the render is a check and the value is null return false for validations and actions\n          if (renderType === \"boolean\" && renderToEval.properties.display === \"check\") {\n            return false;\n          }\n\n          return value;\n        }\n\n        if (argumentType === \"xpath\") {\n          return eval(self.buildArgument(xpath, argumentType));\n        } else {\n          return eval(self.buildArgument(value, argumentType));\n        }\n      } else {\n\n        // Grid renders\n        var gridXpath = self.processGridXpath(xpath);\n\n        // Return the value\n        var gridColumn = renderToEval.getColumn(gridXpath.remainingXpath);\n\n        if (!gridColumn) {\n          continue;\n        }\n\n        var cellValue = renderToEval.getCellCurrentValue(gridXpath.index, gridXpath.remainingXpath);\n\n        if (gridColumn.properties.type == \"columnRadio\") {\n          if (cellValue && !bizagi.util.isString(cellValue)) {\n            if (cellValue.length > 0 && cellValue[0].length > 0)\n            cellValue = cellValue[0][0];else\n\n            cellValue = cellValue.id;\n          } else\n          if (!bizagi.util.isString(cellValue))\n          cellValue = 0;\n        }\n\n        if (gridColumn.properties.type == \"columnCombo\" || gridColumn.properties.type == \"columnSearch\" || gridColumn.properties.type == \"columnList\") {\n          if (cellValue && cellValue.id)\n          cellValue = cellValue.id;else\n          if (typeof cellValue != \"number\" && typeof cellValue != \"string\")\n          cellValue = 0;\n        }\n\n        // Parse empty values\n        if (bizagi.util.isEmpty(cellValue)) {\n          // If the render is a boolean return false for actions\n          if (argumentType == \"boolean\") {\n            if (gridColumn.properties.display == \"check\") {\n              return false;\n            } else {\n              return null;\n            }\n          }\n        }\n\n        // Parse boolean and non-empty date types\n        if (argumentType == \"boolean\" || argumentType == \"date\" && !bizagi.util.isEmpty(cellValue)) {\n          return eval(self.buildArgument(cellValue, argumentType));\n        }\n\n        if (typeof gridColumn != \"undefined\" && typeof gridColumn.properties != \"undefined\" && typeof gridColumn.properties.type != \"undefined\" && gridColumn.properties.type == \"columnDate\") {\n          //cellValue = (cellValue && !gridColumn.properties.showTime)?bizagi.util.dateFormatter.getDateFromInvariant(cellValue).setHours(0,0,0,0):bizagi.util.dateFormatter.getDateFromInvariant(cellValue);\n          cellValue = self.getColumnDateCorrectFunction(cellValue, gridColumn.properties.showTime)(cellValue);\n        }\n\n        return cellValue;\n      }\n      throw \"There is no a valid render for xpath \" + xpath;\n    }\n  },\n  /*\r\n     *   Check if the upload render has any files uploaded\r\n     */\n  isFileUploaded: function isFileUploaded(xpath) {\n    var self = this;\n\n    var value = self.evalXpath(xpath);\n\n    if (value && value.length) {\n      if (value.length > 0)\n      return true;\n    }\n\n    return false;\n  },\n  /*\r\n     *   Check if a render has a valid email value\r\n     */\n  isValidEmail: function isValidEmail(value) {\n    var regex = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/gi;\n    if (value && value.match(new RegExp(regex))) {\n      return true;\n    }\n    return false;\n  },\n  /**\r\n     * Compare two elements, data of html and renderId to action\r\n     */\n  isButtonPressed: function isButtonPressed(control, pressed) {\n    // Check if the control is a button\n    var render = this.getRenderById(control);\n    if (typeof render === \"undefined\" || render === null || !/^button$/i.test(bizagi.util.normalizeType(render.properties.type))) {\n      return false;\n    }\n\n    return pressed;\n  },\n  /*\r\n     * Compare two elements, data of html and renderId to action\r\n     */\n  isGridButtonPressed: function isGridButtonPressed(control, pressed) {\n    // Check if the control is a button\n    var arrGridXpath = this.processGridXpath(control);\n    var gridXpath = arrGridXpath.gridXpath;\n    var render = this.getRender(gridXpath);\n    var column = arrGridXpath.remainingXpath || \"\";\n\n\n    if (pressed && render && render.columns) {\n      $.each(render.columns, function (key, value) {\n        if ((value.properties.xpath === column || value.properties.id === column) && value.properties.type === \"columnButton\") {\n          pressed = true;\n        }\n      });\n    }\n    return pressed;\n  },\n\n  /**\r\n     * Check if a control has been changed\r\n     */\n  isChanged: function isChanged(value, _isChanged) {\n    if (value === undefined || value === null) {\n      return false;\n    }\n\n    return _isChanged;\n  },\n\n  /**\r\n      * Check if a control has been changed\r\n      */\n  isControlChanged: function isControlChanged(value, params, control) {\n    if (value == null) return false;\n\n    if (params.changed) {\n      var renderToEval = this.getRender(control);\n      var controlChanged = params.render;\n      if (renderToEval == null || controlChanged == null) return false;\n\n      return controlChanged.properties.id === renderToEval.properties.id &&\n      controlChanged.properties.xpath === renderToEval.properties.xpath;\n    }\n\n    return false;\n  },\n\n  /**\r\n      * Check if a column has been changed\r\n      */\n  isGridColumnChanged: function isGridColumnChanged(value, params, control) {\n    if (value == null) return false;\n\n    if (params.changed) {\n      var arrGridXpath = this.processGridXpath(control);\n      var gridXpath = arrGridXpath.gridXpath;\n      var gridToEval = this.getRender(gridXpath);\n\n      if (gridToEval == null) return false;\n\n      var xpathColumn = arrGridXpath.remainingXpath || \"\";\n      var columnChanged = !!params.id ? params.render.getColumnById(params.id) : params.render.getColumn(params.column);\n      var columnToEval = gridToEval.getColumn(xpathColumn);\n\n      if (columnToEval && columnChanged) {\n        return columnToEval.properties.xpath === columnChanged.properties.xpath &&\n        columnToEval.properties.id === columnChanged.properties.id;\n      }\n\n      return false;\n    }\n  },\n\n  /**\r\n     * Check if a control has the item\r\n     */\n  includes: function includes(value, argument) {\n    if (typeof value == \"undefined\" || value === null) {\n      return false;\n    }\n    if (typeof argument == \"undefined\" || argument === null) {\n      return false;\n    }\n    var inArray = $.grep(value, function (e) {\n      return e.id == argument;\n    });\n    if (inArray.length > 0) {\n      return true;\n    }\n    return false;\n  },\n\n  /**\r\n     *  Check if the grid has been deleted a row\r\n     */\n  onDeletedGridRow: function onDeletedGridRow(xpath, rowDeleted) {\n    var self = this;\n    var grid = self.getRender(xpath) || {};\n\n    if (grid && rowDeleted) {\n      return true;\n    } else {\n      return false;\n    }\n  },\n\n  /*\r\n     *   Wrapper for get renders, return null if no renders have been found\r\n     */\n  getRenders: function getRenders(xpath) {\n    var self = this,\n    form = self.form,\n    regex = /id=([\\w-]+)/gi;\n    var renders = null;\n\n    // Check if the xpath is an id\n    var idMatches = regex.exec(xpath);\n    if (idMatches && idMatches.length > 1) {\n      var render = self.getRenderById(idMatches[1]);\n      if (render) {\n        if (render.length == 0)\n        return null;else\n        {\n          renders = [];\n          renders.push(render);\n          return renders;\n        }\n      } else {\n        return null;\n      }\n\n    }\n\n    renders = form.getRenders(xpath);\n    if (renders.length == 0)\n    return null;\n    return renders;\n  },\n  /*\r\n     *   Wrapper for get only one editable render\r\n     */\n  getRender: function getRender(xpath) {\n    var self = this,\n    form = self.form;\n\n    return form.getRender(xpath);\n  },\n  /*\r\n     *   Wrapper to get a render by id\r\n     */\n  getRenderById: function getRenderById(id) {\n    var self = this,\n    form = self.form;\n\n    return form.getRenderById(id);\n  },\n  /* \r\n     *   Helper function to detect metadata errors\r\n     */\n  showRenderNotFoundError: function showRenderNotFoundError(xpath) {\n    bizagi.debug(\"Cannot find render in DOM: \" + xpath);\n  },\n  /* \r\n     *   Helper function to detect metadata errors\r\n     */\n  showContainerNotFoundError: function showContainerNotFoundError(containerId) {\n    bizagi.debug(\"Cannot find container in DOM: \" + containerId);\n  },\n  /*\r\n     *   Returns the current date\r\n     */\n  getCurrentDate: function getCurrentDate(includeTime) {\n    var currentDate = new Date();\n    var invariantDate = bizagi.util.dateFormatter.getDateFromInvariant(bizagi.util.dateFormatter.formatInvariant(currentDate));\n    if (!includeTime && invariantDate && !isNaN(Date.parse(invariantDate)) && !$.isNumeric(invariantDate)) {\n      invariantDate.setHours(0, 0, 0, 0);\n    }\n    return invariantDate.getTime();\n\n  },\n  /*\r\n     *   Return the grid xpath parts\r\n     */\n  processGridXpath: function processGridXpath(xpath) {\n    // Eval using regular expressions\n    var regex = new RegExp(/([\\w\\.-]*)\\[(\\d*)\\]\\.([\\w\\.|\\w-\\.]*)/g);\n    var matches = regex.exec(xpath);\n    var index, remainingXpath, gridXpath;\n    if (matches) {\n      gridXpath = matches[1];\n      index = matches[2];\n      remainingXpath = matches[3];\n    } else {\n      index = \"\";\n      remainingXpath = \"\";\n    }\n\n    return { xpath: xpath, index: index, remainingXpath: remainingXpath, gridXpath: gridXpath };\n  },\n  /*\r\n     *   Check if an action/validation contains reference to a grid\r\n     */\n  searchForGridReference: function searchForGridReference(conditions, commands) {\n    var self = this;\n    var i;\n    // Check in conditions\n    if (conditions) {\n      return self.searchGridReferenceInCondition(conditions);\n    }\n\n    // Check in commands\n    if (commands) {\n      for (i in commands) {\n        var command = commands[i];\n        return self.searchForGridReferenceInCommand(command);\n      }\n    }\n\n    return null;\n  },\n  /*\r\n      *   Check if an action/validation contains reference to a grid\r\n      */\n  searchForGridReferenceInCommand: function searchForGridReferenceInCommand(command) {\n    if (command.xpath && command.xpath.indexOf(\"[]\") > 0) {\n      return command.xpath.substring(0, command.xpath.indexOf(\"[]\"));\n    } else if (command.renderId && command.renderId.indexOf(\"[]\") > 0) {\n      return command.renderId.substring(0, command.renderId.indexOf(\"[]\"));\n    }\n\n    // Check in argument if argumentType is xpath\n    if (command.argumentType == 'xpath') {\n      if (command.argument.indexOf(\"[]\") > 0) {\n        return command.argument.substring(0, command.argument.indexOf(\"[]\"));\n      }\n    }\n  },\n\n  /*\r\n     *   Check if a condition contains reference to a grid\r\n     */\n  searchGridReferenceInCondition: function searchGridReferenceInCondition(condition) {\n    var self = this;\n    var bGridReferenceFound;\n    if (typeof condition === \"string\" || typeof condition === \"boolean\")\n    return null;\n    if (condition.expressions) {\n      for (i in condition.expressions) {\n        if (condition.expressions.hasOwnProperty(i)) {\n          bGridReferenceFound = self.searchGridReferenceInCondition(condition.expressions[i]);\n          if (bGridReferenceFound)\n          return bGridReferenceFound;\n        }\n      }\n\n    } else if (condition.simple) {\n      return self.searchGridReferenceInCondition(condition.simple);\n\n    } else if (condition.complex) {\n      return self.searchGridReferenceInCondition(condition.complex);\n    } else {\n      // Looking for grid reference within xpath\n      if (condition.xpath || condition.renderId) {\n        // Check in condition.xpath\n        bGridReferenceFound = self.searchGridReferenceInXpath(condition.xpath) || self.searchGridReferenceInXpath(condition.renderId);\n        if (bGridReferenceFound)\n        return bGridReferenceFound;\n\n        // Check in argument if argumentType is xpath\n        if (condition.argumentType == 'xpath') {\n          bGridReferenceFound = self.searchGridReferenceInXpath(condition.argument);\n          if (bGridReferenceFound)\n          return bGridReferenceFound;\n\n        }\n\n      }\n    }\n\n    return null;\n  },\n  /*\r\n     *   Check if a xpath contains a grid reference\r\n     */\n  searchGridReferenceInXpath: function searchGridReferenceInXpath(xpath) {\n    // Check in condition.xpath\n    if (xpath && xpath.indexOf(\"[]\") > 0) {\n      return xpath.substring(0, xpath.indexOf(\"[]\"));\n    }\n    return null;\n  },\n  getGridControl: function getGridControl(xpath, surrogateKey) {\n    var self = this;\n    var remainingXpath = self.processGridXpath(xpath).remainingXpath;\n    var grid = self.getRender(xpath);\n    var column = grid.getControlCell(surrogateKey, remainingXpath);\n\n    return column;\n\n  },\n\n  //#region No side effects functions\n  getColumnDateCorrectFunction: function getColumnDateCorrectFunction(value, showTime) {\n    var self = this;\n    if (!value) return self.getColumnDateValueForNoValue;\n    if (value && showTime) return self.getColumnDateValueDateAndTime;\n    if (value && !showTime) return self.getColumnDateValueOnlyDate;\n    return value;\n  },\n\n  getColumnDateValueForNoValue: function getColumnDateValueForNoValue(value) {\n    return bizagi.util.dateFormatter.getDateFromInvariant(value);\n  },\n\n  getColumnDateValueOnlyDate: function getColumnDateValueOnlyDate(value) {\n    return bizagi.util.dateFormatter.getDateFromInvariant(value).setHours(0, 0, 0, 0);\n  },\n\n  getColumnDateValueDateAndTime: function getColumnDateValueDateAndTime(value) {\n    return bizagi.util.dateFormatter.getDateFromInvariant(value, true).getTime();\n  }\n\n  //#endregion side effects functions\n});","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /*\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: Bizagi Rendering Validation controller\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: Diego Parra\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This script will parse and execute all the validations defined for the form\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\nbizagi.command.controllers.controller.extend(\"bizagi.command.controllers.action\", {\n  overridesInitiated: false },\n{\n  /* \r\n  *   Constructor\r\n  */\n  init: function init(form, actions) {\n    var self = this;\n    // Configure after refresh compatibility\n    self.configureOverrides();\n\n    // Call base\n    this._super(form);\n\n    // Set a new hash containing all the dependencies subscribing the events\n    self.globalDependencies = {};\n    self.initialCallFunctions = {};\n    self.funtionsToExecuteARefreshCommand = [];\n    self.initialCallFunctionsDeferred = new $.Deferred();\n\n    // Build actions\n    if (actions)\n    self.buildActions(actions);\n\n    // Keep references\n    self.actions = actions;\n    self.internalSubmitActions = {};\n\n    // Set initial timer to trigger initial functions using a setTimeout, and distributing them in differente timespans\n    self.initialCallTimeout = 25;\n    self.initialCallIncrements = 25;\n    self.actionsHistory = {};\n    self.period = 50;\n  },\n  /*\r\n     *   Adds an internal submit action to be executed with all the given rules\r\n     */\n  processInternalSubmitAction: function processInternalSubmitAction(xpath, action) {\n    var self = this;\n\n    // if the action is registered, don't add it again\n    // only one internal submit action is allowed per control\n    if (self.internalSubmitActions[xpath])\n    return;\n\n    // Add to hash and build it\n    self.internalSubmitActions[xpath] = action;\n    self.buildAction(action, true);\n  },\n\n  isSummaryOrGlobalForm: function isSummaryOrGlobalForm() {\n    var self = this;\n    var result = false;\n\n    if (self.form.properties.typeForm === \"SummaryForm\" || self.form.properties.typeForm === \"GlobalForm\") result = true;\n    return result;\n  },\n\n  evalClientAction: function evalClientAction(action) {\n    var self = this,i = 0,serverCommand = false,command;\n    var commands = [].concat(action.commands, action.elseCommands);\n    var length = commands.length;\n\n    for (; i < length; i++) {\n      command = commands[i];\n      if (!self.isClientAction(command)) {\n        serverCommand = true;\n        break;\n      }\n    }\n\n    if (serverCommand) {\n      action.enabled = false;\n    }\n  },\n\n  /* Process all given  actions*/\n  buildActions: function buildActions(actions, dontExecute) {\n    var self = this,i,len;\n    var hashes = {};\n    self.funtionsToExecuteARefreshCommand = [];\n\n    // Added in BA56628, it is removed because it affects the actions in global, summary, and record view forms\n    // if (self.form.properties.displayAsReadOnly && self.isSummaryOrGlobalForm())\n    //    actions = [];\n\n    var executeOnlyClientActions = self.isSummaryOrGlobalForm();\n\n    for (i = 0, len = actions.length; i < len; i++) {\n      // If action is not \"valid\" we can omit that instruction\n      try {\n        var action = actions[i];\n        var hash = bizagi.util.md5(JSON.stringify(action.conditions));\n        var hashC = bizagi.util.md5(JSON.stringify(action.commands));\n        if (hashes[hash]) {\n          if (hashes[hash].indexOf(hashC) === -1) {\n            // si la condicion es igual y los comandos diferentes\n            executeOnlyClientActions && self.evalClientAction(action);\n            self.buildAction(action, dontExecute);\n            hashes[hash].push(hashC);\n          }\n        } else {\n          executeOnlyClientActions && self.evalClientAction(action);\n          self.buildAction(action, dontExecute);\n          hashes[hash] = [hashC];\n        }\n      } catch (e) {\n        // Handle the exception\n        if (e.message !== \"RenderNotFoundException\") {\n          bizagi.logError(\"Action cannot be parsed: \" + e.message, actions[i]);\n        }\n      }\n    }\n  },\n  /*\r\n     *   Remove all current handlers\r\n     */\n  unbindActions: function unbindActions() {\n    var self = this;\n\n    // Remove all previous handlers\n    $.each(self.globalDependencies, function (i, render) {\n      render.unbind(\"renderchange.action\");\n    });\n\n    self.globalDependencies = {};\n\n    // Reset timers and collections\n    $.each(self.initialCallFunctions, function (i, handle) {\n      clearTimeout(handle);\n    });\n    self.initialCallFunctions = {};\n  },\n  /* \r\n     *   Re-execute actions, cleaning the handlers first\r\n     */\n  refreshActions: function refreshActions(newActions) {\n    var self = this;\n\n    self.initialCallTimeout = 25;\n    self.initialCallFunctions = {};\n\n    newActions = newActions || [];\n\n    // Build the actions again\n    self.actions = self.actions.concat(newActions);\n    self.buildActions(self.actions, true);\n\n    // Build internal actions again\n    $.each(self.internalSubmitActions, function (_, action) {\n      try {\n        self.buildAction(action, false);\n      } catch (e) {\n        // Handle the exception\n        if (e.message !== \"RenderNotFoundException\") {\n          bizagi.logError(\"Action cannot be parsed: \" + e.message, action);\n        }\n      }\n    });\n  },\n  /* Process a single action*/\n  buildAction: function buildAction(action, dontExecute) {\n    var self = this;\n    var form = self.form;\n    var dependencies = [];\n    var dependenciesId = [];\n    var innerDependencies = [];\n    action.commands = action.commands || [];\n    action.elseCommands = action.elseCommands || [];\n\n    var isEnabled = action.enabled != undefined ? action.enabled : true;\n\n    if (!isEnabled) return;\n\n    // If the condition operator is true, we gotta dig in the actions to check if it modifies a grid\n    // To include an auto-dependency, so each time the grid is changed that condition will be executed\n    if (action.conditions && action.conditions.operator == \"true\") {\n      $.each(action.commands, function (_, command) {\n        var gridReference = self.searchGridReferenceInXpath(command.xpath);\n        if (gridReference) {\n          if (!innerDependencies.includes(gridReference))\n          innerDependencies.push(gridReference);\n        }\n      });\n    }\n\n    function isValidDependency(type) {\n      var notValid = [\"groupedgrid\", \"collectionnavigator\"];\n\n      return notValid.indexOf(type) === -1;\n    }\n\n    function addDependency(render) {\n      if (isValidDependency(render.properties.type)) {\n        dependenciesId.push(render.properties.id);\n        dependencies.push(render);\n      }\n    }\n\n\n    // Build anonymous function\n    var fn = self.buildFunction(action.conditions, action.commands, action.elseCommands, innerDependencies);\n\n    // Find dependencies to attach triggers\n    if (innerDependencies) {\n      for (var i = 0; i < innerDependencies.length; i++) {\n        if (typeof innerDependencies[i] != \"undefined\") {\n          var renders = form.getRenders(innerDependencies[i]);\n          if (renders.length === 0) {\n            var renderById = form.getRenderById(innerDependencies[i]);\n            renders = renderById ? [renderById] : null;\n          }\n\n          if (renders) {\n            $.each(renders, function (_, render) {\n              if ($.inArray(render.properties.id, dependenciesId) < 0 && render.properties.editable) {\n                addDependency(render);\n              }\n            });\n            if (dependencies.length === 0) {\n              addDependency(renders[0]);\n            }\n          }\n        }\n      }\n    }\n\n    var actionDependencies = function actionDependencies(fn) {\n      this.commandDependencies =\n      action.commands.concat(action.elseCommands).map(function (command) {\n        return command.xpath || command.container || command.renderId;\n      });\n\n      this.commandNames =\n      action.commands.concat(action.elseCommands).map(function (command) {\n        return command.command;\n      });\n\n      this.fn = fn;\n    };\n\n    actionDependencies.prototype = {\n      hasDependency: function hasDependency(xpath) {\n        if (xpath == null) return false;\n\n        return this.commandDependencies.indexOf(xpath) >= 0;\n      },\n\n      hasRefreshCommand: function hasRefreshCommand() {\n        return this.commandNames.indexOf('refresh') >= 0;\n      },\n      execute: function execute(args) {\n        return fn(self, args);\n      } };\n\n\n    self.funtionsToExecuteARefreshCommand = self.funtionsToExecuteARefreshCommand || [];\n    var actionDependenciesInstance = new actionDependencies(fn);\n    if (!actionDependenciesInstance.hasRefreshCommand()) {\n      self.funtionsToExecuteARefreshCommand.push(actionDependenciesInstance);\n    }\n\n    // Attach handlers\n    $.each(dependencies, function (_, render) {\n      render.bind(\"renderchange.action\", function (ev, args) {\n        args = args || {};\n\n        // Default changed argument to true\n        args.changed = args.changed !== undefined ? args.changed : true;\n\n        // If a grid action has been performed, try to filter it by column, to avoid execute all grid actions each time                \n        if (args.column) {\n          for (var j = 0; j < action.gridColumns.length; j++) {\n            if (args.column == action.gridColumns[j]) {\n              // Call function\n              fn(self, args);\n              return;\n            }\n          }\n        } else {\n          // Call function\n          fn(self, args);\n        }\n      });\n\n      // Add to global dependencies hash\n      self.globalDependencies[render.properties.id] = render;\n\n      // If render is a grid ... trigger function at this point\n      if (render.properties.type === 'grid') {\n        dontExecute = true;\n\n        // Search column dependencies\n        action.gridColumns = [];\n        self.searchGridColumns(action.conditions, action.gridColumns);\n      }\n    });\n\n    // Check if it has to execute\n    if (dontExecute)\n    return;\n\n    // Execute the action because it must execute when the page loads with pre-defined value\n    // Create an async function to trigger it later\n    var asyncFn = function asyncFn(self) {\n\n      var guid = Math.guid();\n      // Create the timeout\n      var handle = setTimeout(function () {\n        try {\n          // TODO: Define render to set parameter to \"fn\" function\n          fn(self);\n          delete self.initialCallFunctions[guid];\n        } catch (e) {\n        } finally\n        {\n          clearTimeout(handle);\n        }\n      }, self.initialCallTimeout);\n\n      // Save a reference\n      self.initialCallFunctions[guid] = handle;\n      self.initialCallTimeout += self.initialCallIncrements;\n    };\n\n    // Run it\n    asyncFn(self);\n  },\n\n  tryToExecuteFunction: function tryToExecuteFunction(xpath) {\n    if (bizagi.override && bizagi.override.enableExecuteRefreshAction === true) {\n      for (var index = 0; index < this.funtionsToExecuteARefreshCommand.length; index++) {\n        var fn = this.funtionsToExecuteARefreshCommand[index];\n\n        if (fn.hasDependency(xpath)) {\n          fn.execute();\n        }\n      }\n    }\n  },\n\n  /*\r\n     * Creates the function to execute based on the action metadata\r\n     */\n  buildFunction: function buildFunction(conditions, commands, elseCommands, innerDependencies) {\n    var self = this;\n\n    var gridReference = self.searchForGridReference(conditions, commands);\n    var bGridDetected = gridReference != null ? gridReference : false;\n    var sJsCondition = \"\";\n    var sJsAction = \"\";\n    var sStatement;\n    var sJsElseAction = \"\";\n    var bAutomaticRestore = elseCommands ? false : true;\n    var bCondition = conditions ? true : false;\n    var i;\n\n    // Build Condition\n    if (bCondition) {\n      sJsCondition += self.buildConditions(conditions, bGridDetected, false, innerDependencies);\n    }\n\n    // Build and execute actions\n    for (i = 0; i < commands.length; i++) {\n      // Parse command\n      var queueAction = self.isServerCommand(commands[i]) ? \"addParallel\" : \"add\";\n      var command = self.buildCommand(commands[i], bGridDetected);\n\n      // Check if command ending with semicolon and remove it\n      command = command.indexOf(\";\") >= 1 ? command.replace(\";\", \"\") : command;\n      sJsAction += \"actionQueue.\" + queueAction + \"(function(){return \" + command + \" ;}); \\r\\n\";\n\n      if (bAutomaticRestore) {\n        sJsElseAction += self.buildRestoreCommand(commands[i], bGridDetected);\n      }\n    }\n\n    // Build non-automatic else commands\n    if (!bAutomaticRestore) {\n      sJsElseAction += \"var actionQueue = new bizagiQueue(); \\r\\n\";\n      sJsElseAction += \"if (params.render){params.render.startActionExecution();} \\r\\n\";\n      for (i = 0; i < elseCommands.length; i++) {\n        var queueAction = self.isServerCommand(elseCommands[i]) ? \"addParallel\" : \"add\";\n        var elseCommand = self.buildCommand(elseCommands[i], bGridDetected);\n        // Check if command ending with semicolon and remove it\n        elseCommand = elseCommand.indexOf(\";\") >= 1 ? elseCommand.replace(\";\", \"\") : elseCommand;\n        sJsElseAction += \"actionQueue.\" + queueAction + \"(function(){return \" + elseCommand + \" ;}); \\r\\n\";\n      }\n      sJsElseAction += \"var execute = actionQueue.execute().always(function(){ \\r\\n\";\n      sJsElseAction += \"if (params.render){ params.render.endActionExecution();} \\r\\n });\\r\\n\";\n      sJsElseAction += \"self.form.appendWaitForLoader({ promise: execute, create: true });\\r\\n\";\n    }\n\n    // Build final function\n    //sStatement = \"var baTmpFn = function(self, i, column){ \\r\\n\";\n    sStatement = \"var baTmpFn = function(self, params){ \\r\\n\";\n    sStatement += \"params = params || {};\\r\\n\";\n    if (bGridDetected) {\n      sStatement += \"var i = params.key;\\r\\n\";\n      sStatement += \"var column = params.column;\\r\\n\";\n    }\n    if (bCondition) {\n      sStatement += \"if (\" + sJsCondition + \"){ \\r\\n\";\n    }\n\n    // Creates defferreds\n    sStatement += \"var actionQueue = new bizagiQueue(); \\r\\n\";\n    sStatement += \"if (params.render){params.render.startActionExecution();} \\r\\n\";\n    sStatement += sJsAction;\n    sStatement += \"var execute = actionQueue.execute().always(function(){ \\r\\n\";\n    sStatement += \"if (params.render){ params.render.endActionExecution();} \\r\\n });\\r\\n\";\n    sStatement += \"self.form.appendWaitForLoader({ promise: execute, create: true });\\r\\n\";\n\n    if (bCondition) {\n      sStatement += \"\\r\\n } \";\n      if (sJsElseAction.length > 0) {\n        sStatement += \"else { \\r\\n\" + sJsElseAction + \" }\\r\\n\";\n      }\n    }\n\n    sStatement += \"};\\r\\n\";\n\n\n    if (!bGridDetected) {\n      sStatement += \"baTmpFn\";\n    } else {\n      var sGridStatement = \"var baGridTmpFn = function(self, args){ \\r\\n\";\n      sGridStatement += \"args = args || {};\\r\\n\";\n      sGridStatement += \"\\t var grid = args.render || self.form.getRender('\" + gridReference + \"') || []; \\r\\n\";\n      sGridStatement += \"\\t grid = grid.grid ? grid : (self.form.getRender('\" + gridReference + \"') || []); \\r\\n\";\n      sGridStatement += \"\\t args.grid = grid; \\r\\n\";\n      sGridStatement += \"if(args.surrogateKey === undefined){\\r\\n\";\n      sGridStatement += \"\\t var data = grid.getIndexes();\\r\\n\";\n      sGridStatement += \"\\t $.each(data, function(i, index) {\\r\\n\";\n      sGridStatement += \"\\t\\t args.key = index; \\r\\n\";\n      sGridStatement += \"\\t\\t baTmpFn(self, args);\\r\\n\";\n      sGridStatement += \"\\t });\\r\\n\";\n      sGridStatement += \"} else {\\r\\n\";\n      sGridStatement += \"\\t args.key = args.surrogateKey; \\r\\n\";\n      sGridStatement += \"\\t\\t baTmpFn(self, args ); \\r\\n\";\n      sGridStatement += \"}\\r\\n\";\n      sGridStatement += \"};\\r\\n\";\n      sStatement += sGridStatement;\n      sStatement += \"baGridTmpFn\";\n    }\n\n    // Return interpreted function\n    return eval(sStatement);\n  },\n\n  /*\r\n     *   This method checks if a command must be performed by the client, or by the server\r\n     */\n  isServerCommand: function isServerCommand(command) {\n    var commandType = command.command;\n\n    return [\"refresh\", \"submit-data\", \"execute-rule\", \"execute-interface\", \"execute-sap\", \"execute-connector\", \"execute-excel-bot\", \"execute-pipeline\"].includes(commandType);\n  },\n\n  isClientAction: function isClientAction(command) {\n    var commandType = command.command;\n\n    return [\"background-color\", \"forecolor\", \"visible\", \"required\", \"collapse\", \"set-active\"].includes(commandType);\n  },\n\n  isRecentAction: function isRecentAction(prefix, command) {\n    var self = this;\n    var tag = prefix + \"@\" + command;\n    if (self.actionsHistory[tag] != null) {\n      return true;\n    }\n    $.when(self.runAction(prefix, command)).done(function () {\n      delete self.actionsHistory[tag];\n      bizagi.log(\"resolve \" + tag);\n    });\n    return false;\n  },\n\n  runAction: function runAction(prefix, command) {\n    var self = this;\n    var tag = prefix + \"@\" + command;\n    self.actionsHistory[tag] = new $.Deferred();\n    var timeOutActionsHistory = setTimeout(self.actionsHistory[tag].resolve, self.period);\n    self.actionsHistory[tag].done(clearTimeout.bind(null, timeOutActionsHistory));\n    return self.actionsHistory[tag].promise();\n  },\n  /*\r\n     *   Builds the action JS\r\n     */\n  buildCommand: function buildCommand(command, bGridDetected) {\n    var self = this;\n\n    // Define if a grid has been detected\n    bGridDetected = bGridDetected || false;\n\n    var gridReference = bGridDetected;\n\n    // Parse argument\n    var commandType = command.command;\n    var detectedArgumentType = self.detectCommandArgumentType(command.argumentType, commandType);\n    var argument = self.buildArgument(command.argument, detectedArgumentType, bGridDetected, command.xpathContext);\n    var xpath = command.xpath;\n\n    var commandGridDetected = self.searchForGridReferenceInCommand(command);\n    if (commandGridDetected && command.containerId) {\n      var gridXpathInfo = self.processGridXpath(xpath);\n      xpath = gridXpathInfo.gridXpath + \".\" + command.containerId + \"[].\" + gridXpathInfo.remainingXpath + \".\" + command.renderId;\n    } else\n    if (xpath && command.renderId) {\n      xpath = xpath + \".\" + command.renderId;\n    } else\n    if (bGridDetected && command.renderId) {\n      xpath = command.renderId;\n    }\n    // If a render id is given, we use it with priority over only xpath\n    else if (command.renderId) {\n        xpath = \"id=\" + command.renderId + \"\";\n      }\n\n    // Process grid xpaths\n    if (bGridDetected && xpath) {\n      xpath = xpath.replaceAll(\"[]\", \"[' + i + ']\");\n    }\n\n    if (command.xpath && command.xpath.length > 0 || command.renderId && command.renderId.length > 0) {\n      // Build render command\n      switch (commandType) {\n        case 'background-color':\n          if (command.controlType === \"activityFlowButton\") {\n            return \"self.changeButtonBackground('\" + xpath + \"', \" + argument + \");\";\n          } else {\n            return \"self.changeRenderBackground('\" + xpath + \"', \" + argument + \");\";\n          }\n          break;\n        case 'forecolor':\n          if (command.controlType === \"activityFlowButton\") {\n            return \"self.changeButtonForeground('\" + xpath + \"', \" + argument + \");\";\n          } else {\n            return \"self.changeRenderForeground('\" + xpath + \"', \" + argument + \");\";\n          }\n          break;\n        case 'visible':\n          if (command.controlType === \"activityFlowButton\") {\n            return \"self.changeButtonVisibility('\" + xpath + \"', \" + argument + \");\";\n          } else {\n            return \"self.changeRenderVisibility('\" + xpath + \"', \" + argument + \");\";\n          }\n          break;\n        case 'readonly':\n          if (command.controlType === \"activityFlowButton\") {\n            return \"self.changeButtonEditability('\" + xpath + \"', \" + argument + \");\";\n          } else {\n            return \"self.changeRenderEditability('\" + xpath + \"', '\" + argument + \"');\";\n          }\n          break;\n        case 'required':\n          return \"self.changeRenderRequired('\" + xpath + \"', \" + argument + \");\";\n          break;\n        case 'set-value':\n          // Check specific argument type\n          if (bGridDetected && command.argumentType === \"xpath\" && !!command.xpathContext) {\n            // When we are going to evaluate a xpath is necessary add a xpathcontext if it exist\n            if (typeof command.xpathContext !== \"undefined\") {\n              command.argument = command.xpathContext + \".\" + command.argument;\n            }\n            argument = self.buildArgument(command.argument, detectedArgumentType, bGridDetected);\n          }\n\n          return \"self.changeRenderValue('\" + xpath + \"', \" + argument + \");\";\n          break;\n        case 'set-min':\n          return \"self.changeRenderMinValue('\" + xpath + \"', \" + argument + \");\";\n          break;\n        case 'set-max':\n          return \"self.changeRenderMaxValue('\" + xpath + \"', \" + argument + \");\";\n          break;\n        case 'calculate':\n          return \"self.executeCalculatedField('\" + xpath + \"');\";\n          break;\n        case 'submit-value':\n          return \"self.submitRender('\" + xpath + \"', '\" + argument + \"');\";\n          break;\n        case 'clean-data':\n          return \"self.cleanRenderData('\" + xpath + \"');\";\n          break;\n\n        // New Features                                        \n        case 'refresh':\n          commandGridDetected = self.searchForGridReferenceInCommand(command);\n\n          if (commandGridDetected) {\n            return \"self.refreshGridCell('\" + xpath + \"', \" + \"'\" + (command.xpathContext || \"\") + \"'\" + \");\";\n          } else {\n            return \"self.refreshControl('\" + xpath + \"', \" + \"'\" + (command.xpathContext || \"\") + \"','\" + commandType + \"');\";\n          }\n          break;\n        case 'trigger-click':\n          return \"self.triggerClick('\" + xpath + \"');\";\n          break;}\n\n\n    } else {\n      // Build container command\n      switch (commandType) {\n        case 'background-color':\n          return \"self.changeContainerBackground('\" + command.container + \"', \" + argument + \");\";\n          break;\n        case 'visible':\n          return \"self.changeContainerVisibility('\" + command.container + \"', \" + argument + \");\";\n          break;\n        case 'collapse':\n          return \"self.toogleContainer('\" + command.container + \"', \" + !bizagi.util.parseBoolean(argument) + \");\";\n          break;\n        case 'set-active':\n          return \"self.changeActiveItem('\" + command.container + \"');\";\n          break;\n        case 'readonly':\n          return \"self.changeContainerEditability('\" + command.container + \"', '\" + argument + \"');\";\n          break;\n\n        // New Features                                        \n        case 'refresh':\n          // Set prepare parameter to multiaction purposes \n          return \"self.refreshContainer('\" + command.container + \"', \" + \"'\" + (command.xpathContext || \"\") + \"'\" + \");\";\n          break;}\n\n    }\n\n    // Global  actions without specific target\n    if (commandType === 'submit-data') {\n      return \"self.submitFormData();\";\n    }\n\n    if (commandType === 'execute-rule') {\n      var ruleObj = command.argument || {};\n      var guidRule = \"\";\n      try {\n        guidRule = JSON.parse(ruleObj).guid;\n      } catch (e) {\n      }\n\n      var xpathContext = command.xpathContext || \"\";\n      if (bGridDetected) {\n        var xpathContextRow = gridReference + \"[id=%s]\";\n        return \"self.executeRule('\" + guidRule + \"', printf('\" + xpathContextRow + \"',i) ,'\" + commandType + \"');\";\n      } else {\n        return \"self.executeRule('\" + guidRule + \"','\" + xpathContext + \"','\" + commandType + \"');\";\n      }\n    }\n\n    if (commandType === 'execute-interface') {\n      var interfaceObj = command.argument || {};\n      var guidInterface = \"\";\n\n      try {\n        guidInterface = JSON.parse(interfaceObj).guid;\n      } catch (e) {\n      }\n\n      xpathContext = command.xpathContext || \"\";\n      if (bGridDetected) {\n        xpathContextRow = gridReference + \"[id=%s]\";\n        return \"self.executeInterface('\" + guidInterface + \"', printf('\" + xpathContextRow + \"',i));\";\n      } else {\n        return \"self.executeInterface('\" + guidInterface + \"','\" + xpathContext + \"');\";\n      }\n    }\n\n    if (commandType === 'execute-sap') {\n      var connectorObj = command.argument || {};\n      var guidsap = \"\";\n\n      try {\n        guidsap = JSON.parse(connectorObj).guid;\n      } catch (e) {\n      }\n\n      xpathContext = command.xpathContext || \"\";\n      if (bGridDetected) {\n        xpathContextRow = gridReference + \"[id=%s]\";\n        return \"self.executeSAPConnector('\" + guidsap + \"', printf('\" + xpathContextRow + \"',i));\";\n      } else {\n        return \"self.executeSAPConnector('\" + guidsap + \"','\" + xpathContext + \"');\";\n      }\n    }\n\n    if (commandType === 'execute-connector' || commandType === 'execute-excel-bot') {\n      var connectorObj = command.argument || {};\n      var guidConnector = \"\";\n\n      try {\n        guidConnector = JSON.parse(connectorObj).guid;\n      } catch (e) {\n      }\n\n      xpathContext = command.xpathContext || \"\";\n      if (bGridDetected) {\n        xpathContextRow = gridReference + \"[id=%s]\";\n        return \"self.executeConnector('\" + guidConnector + \"', printf('\" + xpathContextRow + \"',i));\";\n      } else {\n        return \"self.executeConnector('\" + guidConnector + \"','\" + xpathContext + \"');\";\n      }\n    }\n\n    // Command to execute Pipeline\n    if (commandType === 'execute-pipeline') {\n      var pipelineObj = command.argument || {};\n      var guidPipeline = \"\";\n\n      try {\n        guidPipeline = JSON.parse(pipelineObj).guid;\n      } catch (e) {\n      }\n\n      xpathContext = command.xpathContext || \"\";\n      if (bGridDetected) {\n        xpathContextRow = gridReference + \"[id=%s]\";\n        return \"self.executePipeline('\" + guidPipeline + \"', printf('\" + xpathContextRow + \"',i));\";\n      } else {\n        return \"self.executePipeline('\" + guidPipeline + \"','\" + xpathContext + \"');\";\n      }\n    }\n\n    bizagi.log(\"There is no definition for commandType: \" + commandType);\n    return \"\";\n  },\n  /* \r\n     *   Builds the JS command to restore automatically a command when condition is not met\r\n     */\n  buildRestoreCommand: function buildRestoreCommand(command, bGridDetected) {\n    var xpath = command.xpath;\n    var commandType = command.command;\n\n    // Define if a grid has been detected\n    bGridDetected = bGridDetected || false;\n\n    // If a render id is given, we use it with priority over only xpath\n    if (command.renderId) {\n      xpath = \"id=\" + command.renderId + \"\";\n    }\n\n    // Process grid xpaths\n    if (bGridDetected) {\n      xpath = xpath.replaceAll(\"[]\", \"[' + i + ']\");\n    }\n\n    // Build restore action\n    if (xpath && xpath.length > 0) {\n      return \"self.restoreRender('\" + xpath + \"', '\" + commandType + \"');\";\n    } else {\n      return \"self.restoreContainer('\" + command.container + \"', '\" + commandType + \"');\";\n    }\n  },\n  /* \r\n     *   Detect the command argument type based on the command type\r\n     */\n  detectCommandArgumentType: function detectCommandArgumentType(argumentType, commandType) {\n    if (argumentType === undefined) {\n      return argumentType;\n\n    } else if (argumentType == \"const\") {\n\n      if (commandType == 'background-color')\n      return 'color';\n      if (commandType == 'forecolor')\n      return 'color';\n      if (commandType == 'visible')\n      return 'boolean';\n      if (commandType == 'readonly')\n      return 'boolean';\n      if (commandType == 'required')\n      return 'boolean';\n      if (commandType == 'set-value')\n      return 'text';\n      if (commandType == 'collapse')\n      return 'boolean';\n      if (commandType == 'set-active')\n      return 'number';\n      if (commandType == 'set-min')\n      return 'text';\n      if (commandType == 'set-max')\n      return 'text';\n      if (commandType == 'calculate')\n      return undefined;\n      if (commandType == 'refresh')\n      return undefined;\n      if (commandType == 'submit-value')\n      return 'json';\n\n    } else if (argumentType === \"xpath\" || argumentType === \"entity\" || argumentType === \"function\") {\n      return argumentType;\n    }\n\n    bizagi.log(\"There is no definition for commandType: \" + commandType);\n    return null;\n  },\n  /* \r\n     *   Builds the JS command to restore a render when condition is not met\r\n     */\n  restoreRender: function restoreRender(xpath, commandType) {\n    var self = this;\n    var renders = self.getRenders(xpath);\n    if (renders == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showRenderNotFoundError(xpath);\n      }\n      return;\n    }\n\n    $.each(renders, function (i, render) {\n      var properties = render.originalProperties;\n      var textFormat = properties.textFormat || {};\n      if (commandType == 'background-color')\n      self.changeRenderBackground(xpath, textFormat.background || '');\n      if (commandType == 'forecolor')\n      self.changeRenderForeground(xpath, textFormat.color || 'none');\n      if (commandType == 'visible')\n      self.changeRenderVisibility(xpath, properties.visible != undefined ? properties.visible : true);\n      if (commandType == 'readonly')\n      self.changeRenderEditability(xpath, properties.editable != undefined ? properties.editable : true);\n      if (commandType == 'required')\n      self.changeRenderRequired(xpath, properties.required != undefined ? properties.required : false);\n      // NOte: Command 6 does not have restoration\n    });\n  },\n  /* \r\n     *   Builds the JS command to restore a container when condition is not met\r\n     */\n  restoreContainer: function restoreContainer(containerId, commandType) {\n    var self = this;\n    var form = self.form;\n    var container = form.getContainer(containerId);\n    if (container == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showContainerNotFoundError(xpath);\n      }\n      return;\n    }\n\n    var properties = container.originalProperties;\n    if (commandType == 'background-color')\n    self.changeContainerBackground(containerId, properties.backgroundColor || 'none');\n    if (commandType == 'visible')\n    self.changeContainerVisibility(containerId, properties.visible != undefined ? properties.visible : true);\n    if (commandType == 'collapse')\n    self.toogleContainer(containerId, true);\n    // NOte: Command 8 does not have restoration\n    if (commandType == 'readonly')\n    self.changeContainerEditability(containerId, properties.editable != undefined ? properties.editable : true);\n  },\n  /* \r\n     *   Sets a new color for the background of the render\r\n     *   Applies also to grid cells!\r\n     */\n  changeRenderBackground: function changeRenderBackground(xpath, argument) {\n    var self = this;\n    var renders = self.getRenders(xpath);\n    if (renders == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showRenderNotFoundError(xpath);\n      }\n      return;\n    }\n\n    $.each(renders, function (i, render) {\n      // Execute commands over valid renders\n      if (self.isValidRender(render)) {\n        var newVisualChange = self.getVisualChange(render, \"backgroundColor\", argument);\n\n        //Detects if is the grid component, and set the desired properties\n        if (!self.isGridComponent(render, xpath)) {\n          // Normal renders\n          $.when(render.ready()).done(function () {\n            render.changeBackgroundColor(argument);\n            self.logVisualChange(newVisualChange);\n          });\n\n        } else {\n          // Grid renders\n          var gridXpath = self.processGridXpath(xpath);\n          newVisualChange.xpath = gridXpath.remainingXpath;\n\n          $.when(render.ready()).done(function () {\n            if (!bizagi.util.isEmpty(gridXpath.index)) {\n              render.changeCellBackgroundColor(gridXpath.index, gridXpath.remainingXpath, argument);\n              newVisualChange.indexes.push(gridXpath.index);\n            } else {\n              var indexes = render.getIndexes(),j,lenIndex;\n              for (j = 0, lenIndex = indexes.length; j < lenIndex; j++) {\n                render.changeCellBackgroundColor(indexes[j], gridXpath.remainingXpath, argument);\n                newVisualChange.indexes.push(indexes[j]);\n              }\n            }\n\n            // Add visual changes\n            self.logVisualChange(newVisualChange);\n          });\n        }\n      }\n\n    });\n  },\n  /*\r\n      *   Sets a new color for the background of the button\r\n      *   Applies also to grid cells!\r\n      */\n  changeButtonBackground: function changeButtonBackground(xpath, argument) {\n    var self = this;\n    var guid = xpath.substring(3);\n    var element = self.form.getButton(guid);\n\n    element.css(\"background-image\", \"none\");\n    element.addClass(\"ui-fast-transition\");\n\n    if (typeof element[0] !== \"undefined\") {\n      element[0].style.setProperty(\"background-color\", argument, \"important\");\n    }\n  },\n\n  /* \r\n     *   Sets a new color for the foreground of the render\r\n     */\n  changeRenderForeground: function changeRenderForeground(xpath, argument) {\n    var self = this;\n    var renders = self.getRenders(xpath);\n    if (renders == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showRenderNotFoundError(xpath);\n      }\n      return;\n    }\n\n    $.each(renders, function (i, render) {\n      // Execute commands over valid renders\n      if (self.isValidRender(render)) {\n        var newVisualChange = self.getVisualChange(render, \"color\", argument);\n\n        //Detects if is the grid component, and set the desired properties\n        if (!self.isGridComponent(render, xpath)) {\n          // Normal renders\n          $.when(render.ready()).done(function () {\n            render.changeColor(argument);\n            self.logVisualChange(newVisualChange);\n          });\n\n        } else {\n          // Grid renders\n          var gridXpath = self.processGridXpath(xpath);\n          newVisualChange.xpath = gridXpath.remainingXpath;\n\n          $.when(render.ready()).done(function () {\n            if (!bizagi.util.isEmpty(gridXpath.index)) {\n              render.changeCellColor(gridXpath.index, gridXpath.remainingXpath, argument);\n              newVisualChange.indexes.push(gridXpath.index);\n            } else {\n              var indexes = render.getIndexes(),j,lenIndex;\n              for (j = 0, lenIndex = indexes.length; j < lenIndex; j++) {\n                render.changeCellColor(indexes[j], gridXpath.remainingXpath, argument);\n                newVisualChange.indexes.push(indexes[j]);\n              }\n            }\n\n            // Add visual changes\n            self.logVisualChange(newVisualChange);\n          });\n        }\n      }\n    });\n  },\n  /*\r\n      *   Sets a new color for the foreground of the render\r\n      */\n  changeButtonForeground: function changeButtonForeground(xpath, argument) {\n    var self = this;\n    var guid = xpath.substring(3);\n    var element = self.form.getButton(guid);\n    element.css(\"color\", argument, \"!important\");\n  },\n  /* \r\n     *   Changes the visibility of the render\r\n     */\n  changeRenderVisibility: function changeRenderVisibility(xpath, argument) {\n    var self = this;\n    var renders = self.getRenders(xpath);\n    if (renders == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showRenderNotFoundError(xpath);\n      }\n      return;\n    }\n\n    $.each(renders, function (i, render) {\n      // Execute commands over valid renders\n      if (self.isValidRender(render)) {\n        var newVisualChange = self.getVisualChange(render, \"visibility\", argument);\n\n        //Detects if is the grid component, and set the desired properties\n        if (!self.isGridComponent(render, xpath)) {\n          // Normal renders\n          $.when(render.ready()).done(function () {\n            $.when(render.renderingDeferred).done(function () {\n              render.changeVisibility(argument);\n              self.logVisualChange(newVisualChange);\n            });\n          });\n        } else {\n          // Grid renders\n          var gridXpath = self.processGridXpath(xpath);\n          newVisualChange.xpath = gridXpath.remainingXpath;\n\n          $.when(render.ready()).done(function () {\n            if (!bizagi.util.isEmpty(gridXpath.index)) {\n              render.changeCellVisibility(gridXpath.index, gridXpath.remainingXpath, argument);\n              newVisualChange.indexes.push(gridXpath.index);\n            } else {\n              render.changeColumnVisibility(gridXpath.remainingXpath, argument);\n              var indexes = render.getIndexes(),j,lenIndex;\n              for (j = 0, lenIndex = indexes.length; j < lenIndex; j++) {\n                render.changeCellVisibility(indexes[j], gridXpath.remainingXpath, argument);\n                newVisualChange.indexes.push(indexes[j]);\n              }\n            }\n\n            // Add visual changes\n            self.logVisualChange(newVisualChange);\n          });\n        }\n      }\n    });\n  },\n  /*\r\n      *   Changes the visibility of the button\r\n      */\n  changeButtonVisibility: function changeButtonVisibility(xpath, argument) {\n    var self = this;\n    var guid = xpath.substring(3);\n    var visible = bizagi.util.parseBoolean(argument) == true;\n\n    if (bizagi.util.isMobileDevice()) {\n      self.changeFormButtonVisibility(guid, visible);\n    } else {\n      var element = self.form.getButton(guid);\n      if (visible) {\n        element.show();\n        element.css(\"display\", \"\");\n      } else {\n        element.hide();\n      }\n    }\n  },\n\n\n  /* \r\n     *   Changes the editability of the render\r\n     */\n  changeRenderEditability: function changeRenderEditability(xpath, argument) {\n    var self = this;\n\n    if (!bizagi.override.changeEditabilityOnReadOnlyForms && self.form.properties.displayAsReadOnly) return;\n\n    var renders = self.getRenders(xpath);\n    if (renders == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showRenderNotFoundError(xpath);\n      }\n      return;\n    }\n\n    $.each(renders, function (i, render) {\n      // Execute commands over valid renders\n      if (self.isValidRender(render)) {\n        var newVisualChange = self.getVisualChange(render, \"editability\", argument);\n\n        //Detects if is the grid component, and set the desired properties\n        if (!self.isGridComponent(render, xpath)) {\n          // Normal renders\n          $.when(render.ready()).done(function () {\n            $.when(render.renderingDeferred).done(function () {\n              render.changeEditability(argument);\n              self.logVisualChange(newVisualChange);\n            });\n          });\n        } else {\n          // Grid renders\n          var gridXpath = self.processGridXpath(xpath);\n          newVisualChange.xpath = gridXpath.remainingXpath;\n\n          $.when(render.ready()).done(function () {\n            if (!bizagi.util.isEmpty(gridXpath.index)) {\n              render.changeCellEditability(gridXpath.index, gridXpath.remainingXpath, argument);\n              newVisualChange.indexes.push(gridXpath.index);\n            } else {\n              render.changeColumnEditability(gridXpath.remainingXpath, argument);\n              var indexes = render.getIndexes(),j,lenIndex;\n              for (j = 0, lenIndex = indexes.length; j < lenIndex; j++) {\n                render.changeCellEditability(indexes[j], gridXpath.remainingXpath, argument);\n                newVisualChange.indexes.push(indexes[j]);\n              }\n            }\n\n            // Add visual changes\n            self.logVisualChange(newVisualChange);\n          });\n        }\n      }\n    });\n  },\n  /*\r\n      *   Changes the editability of the button\r\n      */\n  changeButtonEditability: function changeButtonEditability(xpath, argument) {\n    var self = this;\n    var guid = xpath.substring(3);\n    var element = self.form.getButton(guid);\n    if (bizagi.util.parseBoolean(argument) == true) {\n      element.removeAttr(\"disabled\");\n    } else {\n      element.attr(\"disabled\", \"disabled\");\n    }\n  },\n  /*\r\n      *  trigger Click button\r\n      */\n  triggerClick: function triggerClick(xpath) {\n    var self = this;\n    var guid = xpath.substring(3);\n    var btnProperties = self.form.buttons.find(function (el) {return el.id == guid;});\n    if (btnProperties) {\n      self.form.buttonExecutionHandler(btnProperties);\n    } else {\n      console.warn(\"Button properties were not found\");\n    }\n  },\n\n  /* \r\n     *   Changes the required value of the render\r\n     */\n  changeRenderRequired: function changeRenderRequired(xpath, argument) {\n    var self = this;\n    var renders = self.getRenders(xpath);\n    var rendersToEval = [];\n\n    if (renders == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showRenderNotFoundError(xpath);\n      }\n      return;\n    }\n\n    $.each(renders, function (i, render) {\n      if (bizagi.util.parseBoolean(render.properties.editable)) {\n        rendersToEval.push(render);\n      }\n    });\n\n    if (rendersToEval.length === 0) {\n      rendersToEval = renders;\n    }\n\n    $.each(rendersToEval, function (i, render) {\n      // Execute commands over valid renders\n      if (self.isValidRender(render)) {\n        var newVisualChange = self.getVisualChange(render, \"required\", argument);\n\n        //Detects if is the grid component, and set the desired properties\n        if (!self.isGridComponent(render, xpath)) {\n          // Normal renders\n          $.when(render.ready()).done(function () {\n            $.when(render.renderingDeferred).done(function () {\n              render.changeRequired(argument);\n              self.logVisualChange(newVisualChange);\n            });\n          });\n        } else {\n          // Grid renders\n          var gridXpath = self.processGridXpath(xpath);\n          newVisualChange.xpath = gridXpath.remainingXpath;\n\n          $.when(render.ready()).done(function () {\n            if (!bizagi.util.isEmpty(gridXpath.index)) {\n              render.changeCellRequired(gridXpath.index, gridXpath.remainingXpath, argument);\n              newVisualChange.indexes.push(gridXpath.index);\n            } else {\n              render.changeColumnRequired(gridXpath.remainingXpath, argument);\n              var indexes = render.getIndexes(),j,lenIndex;\n              for (j = 0, lenIndex = indexes.length; j < lenIndex; j++) {\n                render.changeCellRequired(indexes[j], gridXpath.remainingXpath, argument);\n                newVisualChange.indexes.push(indexes[j]);\n              }\n            }\n\n            // Add visual changes\n            self.logVisualChange(newVisualChange);\n          });\n        }\n      }\n    });\n  },\n  /* \r\n     *   Changes the render internal value\r\n     */\n  changeRenderValue: function changeRenderValue(xpath, argument) {\n    var self = this;\n\n    if (argument != null && _typeof(argument) === \"object\") {\n      argument = $.extend(argument, { fromAction: true });\n    }\n\n    var renders = self.getRenders(xpath);\n    if (renders == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showRenderNotFoundError(xpath);\n      }\n      return;\n    }\n\n    // Eval only an editable render\n    var rendersToEval = [];\n    $.each(renders, function (i, render) {\n      if (render.properties.editable) {\n        rendersToEval.push(render);\n      }\n    });\n\n    // If no render has been found skip editable validation\n    if (rendersToEval.length == 0) {\n      $.each(renders, function (i, render) {\n        rendersToEval.push(render);\n      });\n    }\n\n    $.each(rendersToEval, function (i, render) {\n      //Detects if is the grid component, and set the desired properties\n      if (!self.isGridComponent(render, xpath)) {\n        // Normal renders\n        $.when(render.ready()).done(function () {\n          if (render.asyncRenderDeferred) {\n            $.when(render.asyncRenderDeferred).done(function () {\n              render.setDisplayValue(argument);\n            });\n          } else {\n            render.setDisplayValue(argument);\n          }\n        });\n      } else {\n        // Grid renders\n        var gridXpath = self.processGridXpath(xpath);\n        $.when(render.ready()).done(function () {\n          if (!bizagi.util.isEmpty(gridXpath.index)) {\n            render.changeCellValue(gridXpath.index, gridXpath.remainingXpath, argument);\n\n          } else {\n            var indexes = render.getIndexes(),j,lenIndex;\n            for (j = 0, lenIndex = indexes.length; j < lenIndex; j++) {\n              render.changeCellValue(indexes[j], gridXpath.remainingXpath, argument);\n            }\n          }\n        });\n      }\n    });\n  },\n  /**\r\n      * Changes the render minimum value\r\n      * @param xpath\r\n      * @param argument\r\n      */\n  changeRenderMinValue: function changeRenderMinValue(xpath, argument) {\n    var self = this;\n    var renders = self.getRenders(xpath);\n\n    if (renders == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showRenderNotFoundError(xpath);\n      }\n      return;\n    }\n\n    $.each(renders, function (i, render) {\n      var newVisualChange = self.getVisualChange(render, \"minValue\", argument);\n      //Detects if is the grid component, and set the desired properties\n      if (!self.isGridComponent(render, xpath)) {\n\n        // Normal renders\n        $.when(render.ready()).done(function () {\n          var renderType = bizagi.util.normalizeQueryType(render.properties.type);\n          if ([\"number\", \"date\", \"money\"].includes(renderType)) {\n            render.changeMinValue(argument);\n            self.logVisualChange(newVisualChange);\n          }\n        });\n\n      } else {\n        // Grid renders\n        var gridXpath = self.processGridXpath(xpath);\n        newVisualChange.xpath = gridXpath.remainingXpath;\n\n        $.when(render.ready()).done(function () {\n          if (!bizagi.util.isEmpty(gridXpath.index)) {\n            render.changeCellMinValue(gridXpath.index, gridXpath.remainingXpath, argument);\n            newVisualChange.indexes.push(gridXpath.index);\n          } else {\n            var indexes = render.getIndexes(),j,lenIndex;\n            for (j = 0, lenIndex = indexes.length; j < lenIndex; j++) {\n              render.changeCellMinValue(indexes[j], gridXpath.remainingXpath, argument);\n              newVisualChange.indexes.push(indexes[j]);\n            }\n          }\n\n          // Add visual changes\n          self.logVisualChange(newVisualChange);\n        });\n      }\n    });\n  },\n  /* \r\n     *   Changes the render max value\r\n     */\n  changeRenderMaxValue: function changeRenderMaxValue(xpath, argument) {\n    var self = this;\n    var renders = self.getRenders(xpath);\n    if (renders == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showRenderNotFoundError(xpath);\n      }\n      return;\n    }\n\n    $.each(renders, function (i, render) {\n      var newVisualChange = self.getVisualChange(render, \"maxValue\", argument);\n\n      //Detects if is the grid component, and set the desired properties\n      if (!self.isGridComponent(render, xpath)) {\n        // Normal renders\n        $.when(render.ready()).done(function () {\n          render.changeMaxValue(argument);\n          self.logVisualChange(newVisualChange);\n        });\n\n      } else {\n        // Grid renders\n        var gridXpath = self.processGridXpath(xpath);\n        $.when(render.ready()).done(function () {\n          if (!bizagi.util.isEmpty(gridXpath.index)) {\n            render.changeCellMaxValue(gridXpath.index, gridXpath.remainingXpath, argument);\n            newVisualChange.indexes.push(gridXpath.index);\n          } else {\n            var indexes = render.getIndexes(),j,lenIndex;\n            for (j = 0, lenIndex = indexes.length; j < lenIndex; j++) {\n              render.changeCellMaxValue(indexes[j], gridXpath.remainingXpath, argument);\n              newVisualChange.indexes.push(indexes[j]);\n            }\n          }\n\n          // Add visual changes\n          self.logVisualChange(newVisualChange);\n        });\n      }\n    });\n  },\n  /* \r\n     *   Changes the render max value\r\n     */\n  executeCalculatedField: function executeCalculatedField(xpath) {\n    var self = this;\n    var renders = self.getRenders(xpath);\n    if (renders == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showRenderNotFoundError(xpath);\n      }\n      return;\n    }\n\n    $.each(renders, function (i, render) {\n      $.when(render.ready()).done(function () {\n        render.runFormula();\n      });\n    });\n  },\n  /* \r\n     *   Refresh the render internal value using ajax\r\n     */\n  refreshControl: function refreshControl(xpath, xpathContext, commandType) {\n    var self = this;\n    var renders = self.getRenders(xpath) || self.form.getContainer(xpath);\n    var queue = new bizagiQueue();\n\n    if (renders == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showRenderNotFoundError(xpath);\n      }\n      return;\n    }\n\n    // Process matching renders\n    $.each(renders, function (i, render) {\n      queue.add(render.ready().pipe(function () {\n        return render.refreshControl({ xpath: xpath, xpathContext: xpathContext });\n      }));\n    });\n\n    // Return queue deferred\n    return queue.execute();\n  },\n  /* \r\n     *   Refresh the render internal value using ajax\r\n     */\n  refreshContainer: function refreshContainer(containerId, xpathContext) {\n    var self = this;\n    var container = self.form.getContainer(containerId);\n\n    if (container == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showRenderNotFoundError(containerId);\n      }\n      return;\n    }\n\n    return $.when(container.ready()).\n    pipe(function () {\n      return container.refreshContainer({ xpathContext: xpathContext });\n    });\n  },\n  /**\r\n      * Refresh a cell of grid\r\n      */\n  refreshGridCell: function refreshGridCell(xpath, xpathContext) {\n    var self = this;\n    var queue = new bizagiQueue();\n    var def = new $.Deferred();\n    var renders = self.getRenders(xpath) || self.form.getContainer(xpath);\n\n    if (renders == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showRenderNotFoundError(xpath);\n      }\n      return null;\n    }\n\n    // Eval only an editable render\n    var rendersToEval = [];\n    $.each(renders, function (i, render) {\n      if (render.properties.editable) {\n        rendersToEval.push(render);\n        return false;\n      }\n    });\n\n    // If no render has been found skip editable validation\n    if (rendersToEval.length == 0) {\n      $.each(renders, function (i, render) {\n        rendersToEval.push(render);\n        return false;\n      });\n    }\n\n    if (rendersToEval.length === 0) {\n      return;\n    }\n\n    // Check xpathContext of the form (addForm or editForm)\n    if (self.form && self.form.properties.xpathContext !== \"\") {\n      xpathContext = xpathContext !== \"\" ? self.form.properties.xpathContext + \".\" + xpathContext : self.form.properties.xpathContext;\n    }\n\n    queue.add(def.promise());\n\n    $.when.apply($, $.map(rendersToEval, function (grid) {\n      grid.ready();\n    })).\n    done(function () {\n      var len = rendersToEval.length;\n      var internalQueue = new bizagiQueue();\n      for (var i = 0; i < len; i++) {\n        var grid = rendersToEval[i];\n\n        var gridXpath = self.processGridXpath(xpath);\n        if (!bizagi.util.isEmpty(gridXpath.index)) {\n          // Process a specific row\n          internalQueue.add(grid.refreshCell({\n            key: gridXpath.index,\n            column: gridXpath.remainingXpath,\n            xpathContext: xpathContext }));\n\n        } else {\n          // Process all rows\n          var indexes = grid.getIndexes();\n          var lenIndex = indexes.length;\n          for (var j = 0; j < lenIndex; j++) {\n            internalQueue.addParallel(grid.refreshCell({\n              key: indexes[j],\n              column: gridXpath.remainingXpath,\n              xpathContext: xpathContext }));\n\n          }\n        }\n      }\n\n      $.when(internalQueue.execute()).\n      done(function () {\n        def.resolve();\n      });\n    });\n\n\n    return queue.execute();\n  },\n  /**\r\n      * This function execute action to save all data of render, but\r\n      * the server service dont execute any rule on the server\r\n      */\n  submitFormData: function submitFormData(params) {\n    var self = this;\n\n    // For the submit action we need only the whole form to perform the server action\n    var form = self.form;\n\n    // Process the action\n    return $.when(form.ready()).\n    pipe(function () {\n      return form.submitData(params);\n    });\n  },\n  /**\r\n      * This function send a request to the server to execute a rule\r\n      */\n  executeRule: function executeRule(rule, xpathContext, commandType) {\n    var self = this;\n    // For the execute rule  action we need only the whole form to perform the server action\n    var form = self.form;\n    var prefix = rule + \".\" + xpathContext;\n    if (self.isRecentAction(prefix, commandType)) {\n      return;\n    } else {\n      // Process the action\n      return $.when(form.ready()).\n      pipe(function () {\n        return form.executeRule({ rule: rule, xpathContext: xpathContext });\n      });\n    }\n  },\n  executeInterface: function executeInterface(interfaceObject, xpathContext) {\n    var self = this;\n    // For the execute rule  action we need only the whole form to perform the server action\n    var form = self.form;\n\n    // Process the action\n    return $.when(form.ready()).\n    pipe(function () {\n      return form.executeInterface({ \"interface\": interfaceObject, xpathContext: xpathContext });\n    });\n  },\n\n\n  executeSAPConnector: function executeSAPConnector(guidsap, xpathContext) {\n    var self = this;\n    var form = self.form;\n    return $.when(form.ready).pipe(function () {\n      return form.executeSAPConnector({ guidsap: guidsap, xpathContext: xpathContext });\n    });\n  },\n\n  executeConnector: function executeConnector(guidConnector, xpathContext) {\n    var self = this;\n    var form = self.form;\n    return $.when(form.ready).pipe(function () {\n      return form.executeConnector({ guidConnector: guidConnector, xpathContext: xpathContext });\n    });\n  },\n\n  executePipeline: function executePipeline(pipeline, xpathContext) {\n    var self = this;\n    // For the execute pipeline  action we need only the whole form to perform the server action\n    var form = self.form;\n\n    // Process the action\n    return $.when(form.ready()).\n    pipe(function () {\n      return form.executePipeline({ pipeline: pipeline, xpathContext: xpathContext });\n    });\n  },\n  /*\r\n     *   Submit the given render and refresh dependencies after that\r\n     */\n  submitRender: function submitRender(xpath, argument) {\n    var self = this;\n    // For the submit action we need only one render to perform the server action\n    var render = self.getRender(xpath);\n    if (render == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showRenderNotFoundError(xpath);\n      }\n      return;\n    }\n\n    // Process the action in the render\n    return $.when(render.ready()).pipe(function () {\n      return render.submitOnChange();\n    });\n  },\n  /*\r\n     * Cleans current value\r\n     */\n  cleanRenderData: function cleanRenderData(xpath) {\n    var self = this;\n    var renders = self.getRenders(xpath);\n    var promises = [];\n\n    if (renders == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showRenderNotFoundError(xpath);\n      }\n      return;\n    }\n\n    $.each(renders, function (i, render) {\n      //Detects if is the grid component, and set the desired properties\n      if (!self.isGridComponent(render, xpath)) {\n        // Normal renders\n        promises.push($.when(render.ready()).then(function () {\n          return $.when(render.renderingDeferred).then(function () {\n            return $.when(render.cleanData()).then(function () {\n              return self.changeRenderRequired(xpath, render.properties.required != undefined ? render.properties.required : false);\n            });\n          });\n        }));\n      } else {\n        // Grid renders\n        var gridXpath = self.processGridXpath(xpath);\n        promises.push($.when(render.ready()).then(function () {\n          var gridPromises = [];\n\n          if (!bizagi.util.isEmpty(gridXpath.index)) {\n            gridPromises.push($.when(render.cleanCellData(gridXpath.index, gridXpath.remainingXpath)));\n          } else {\n            var indexes = render.getIndexes(),j,lenIndex;\n            for (j = 0, lenIndex = indexes.length; j < lenIndex; j++) {\n              gridPromises.push($.when(render.cleanCellData(indexes[j], gridXpath.remainingXpath)));\n            }\n          }\n\n          return $.when.apply($, gridPromises);\n        }));\n      }\n    });\n\n    return $.when.apply($, promises);\n  },\n  /* \r\n     *   Changes container background color\r\n     */\n  changeContainerBackground: function changeContainerBackground(containerId, argument) {\n    var self = this;\n    var form = self.form;\n    var container = form.getContainer(containerId);\n    if (container == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showContainerNotFoundError(containerId);\n      }\n      return;\n    }\n\n    $.when(container.ready()).done(function () {\n      container.changeBackgroundColor(argument);\n      container.visualChanges[\"backgroundColor\"] = argument;\n    });\n  },\n  /* \r\n     *   Shows or hides a container\r\n     */\n  changeContainerVisibility: function changeContainerVisibility(containerId, argument) {\n    var self = this;\n    var form = self.form;\n    var container = form.getContainer(containerId);\n    if (container == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showContainerNotFoundError(containerId);\n      }\n      return;\n    }\n\n    $.when(container.ready(true)).done(function () {\n      $.when(container.renderingDeferred).done(function () {\n        container.changeVisibility(argument);\n        container.visualChanges[\"visibility\"] = argument;\n      });\n    });\n  },\n  /* \r\n     *   Expand or collapse a group container\r\n     */\n  toogleContainer: function toogleContainer(containerId, argument) {\n    var self = this;\n    var form = self.form;\n    var container = form.getContainer(containerId);\n    if (container == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showContainerNotFoundError(containerId);\n      }\n      return;\n    }\n    if (/group/i.test(container.properties.type)) {\n      $.when(container.ready()).done(function () {\n        container.toogleContainer(argument);\n      });\n    }\n  },\n  /* \r\n     *   Select a determinate sub-container in a tab or an accordion\r\n     */\n  changeActiveItem: function changeActiveItem(containerId) {\n    var self = this;\n    var form = self.form;\n    var container = form.getContainer(containerId);\n    if (container == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showContainerNotFoundError(containerId);\n      }\n      return;\n    }\n    if (container.properties.type === \"tabItem\" && container.loadingDeferred) {\n      container.loadingDeferred.resolve();\n    }\n    $.when(container.ready()).done(function () {\n      container.setAsActiveContainer();\n    });\n  },\n  /* \r\n     *   Changes container editability\r\n     */\n  changeContainerEditability: function changeContainerEditability(containerId, argument) {\n    var self = this;\n\n    if (!bizagi.override.changeEditabilityOnReadOnlyForms && self.form.properties.displayAsReadOnly) return;\n\n    var form = self.form;\n    var container = form.getContainer(containerId);\n    if (container == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showContainerNotFoundError(containerId);\n      }\n      return;\n    }\n\n    $.when(container.ready()).done(function () {\n      container.changeEditability(argument);\n      container.visualChanges[\"editability\"] = argument;\n    });\n  },\n  /*\r\n     *   Search for grid columns\r\n     */\n  searchGridColumns: function searchGridColumns(condition, gridColumns) {\n    var self = this;\n    var column;\n    if (typeof condition === \"string\" || typeof condition === \"boolean\")\n    return null;\n    if (condition.expressions) {\n      var j, lenIndex;\n      for (j = 0, lenIndex = condition.expressions.length; j < lenIndex; j++) {\n        self.searchGridColumns(condition.expressions[j], gridColumns);\n      }\n\n    } else if (condition.simple) {\n      return self.searchGridColumns(condition.simple, gridColumns);\n\n    } else if (condition.complex) {\n      return self.searchGridColumns(condition.complex, gridColumns);\n    } else {\n      var xpath = condition.xpath || condition.renderId;\n      if (xpath) {\n        // Check in condition.xpath\n        if (xpath && xpath.indexOf(\"[]\") > 0) {\n          column = xpath.substring(xpath.indexOf(\"[]\") + 3);\n          gridColumns.push(column);\n        }\n\n        // Check in argument if argumentType is xpath\n        if (condition.argumentType === 'xpath') {\n          if (condition.argument.indexOf(\"[]\") > 0) {\n            column = condition.argument.substring(condition.argument.indexOf(\"[]\") + 3);\n            gridColumns.push(column);\n          }\n        }\n      }\n    }\n\n    return null;\n  },\n  /**/\n\n  isGridComponent: function isGridComponent(render, xpath) {\n    var renderType = bizagi.util.normalizeType(render.properties.type);\n    return /grid$/i.test(renderType) && xpath.indexOf('[') >= 0;\n  },\n  /**/\n\n  isValidRender: function isValidRender(render) {\n    var notValid = [\"collectionnavigator\"];\n\n    return notValid.indexOf(render.properties.type) === -1;\n  },\n\n  /**\r\n      * Helper to override the visibility and editability in mobile devices. \r\n      * @param {} guid\r\n      * @param {} visible\r\n      * @returns {}\r\n      */\n  changeFormButtonVisibility: function changeFormButtonVisibility(guid, visible) {\n    var self = this;\n    var form = self.form;\n    var buttons = form.buttons && form.buttons.length ? form.buttons : form.properties.buttons || [];\n    var index = buttons.findIndex(function (item) {return item.id === guid;});\n    var navigation = form.getNavigation();\n\n    if (index !== -1)\n    buttons[index].visible = visible;\n\n    form.buttons = buttons || [];\n    navigation.setNavigationButtons(form);\n  },\n\n  /**\r\n      * Create new object of visual changes\r\n      * @param element\r\n      * @param command\r\n      * @param argument\r\n      * @returns {Object}\r\n      */\n  getVisualChange: function getVisualChange(element, command, argument) {\n    return new Object({\n      element: element,\n      command: command,\n      argument: argument,\n      indexes: [],\n      xpath: \"\" });\n\n  },\n\n  /**\r\n      * Add changes to log\r\n      * @param changes\r\n      */\n  logVisualChange: function logVisualChange(changes) {\n    if (changes.indexes.length > 0) {\n      for (var i = 0; i < changes.indexes.length; i++) {\n        var cell = changes.element.getControlCell(changes.indexes[i], changes.xpath);\n        if (cell) cell.visualChanges[changes.command] = changes.argument;\n      }\n    } else {\n      changes.element.visualChanges[changes.command] = changes.argument;\n    }\n  },\n\n  /**\r\n      * Configuration of overrides for compatibility After Refresh capability\r\n      * By Default the key restoreAppearanceAfterRefresh is true\r\n      */\n  configureOverrides: function configureOverrides() {\n    // Initialize overrides just once\n    if (!this.Class.overridesInitiated) {\n      // If there is a previous configuration removing the 11.2.4 behavior, just configure the 11.2.3 behavior compatibility automatically\n      if (!bizagi.override.enableExecuteRefreshAction && typeof bizagi.override.refreshActionBehavior == \"undefined\") {\n        bizagi.override.refreshActionBehavior = \"DEPRECATED-11.2.3\";\n      }\n      var behavior = bizagi.override.refreshActionBehavior = bizagi.override.refreshActionBehavior || \"11.2.5\";\n      switch (behavior) {\n        case \"DEPRECATED-11.2.3\": // The same behavior as 11.2.3 and previous versions \n          bizagi.override.enableExecuteRefreshAction = false;\n          bizagi.override.restoreAppearanceAfterRefresh = false;\n          break;\n        case \"DEPRECATED-11.2.4\": // The same behavior as 11.2.4 version\n          bizagi.override.enableExecuteRefreshAction = true;\n          bizagi.override.restoreAppearanceAfterRefresh = false;\n          break;\n        case \"11.2.5\": // The same behavior as 11.2.5 version \n        default:\n          bizagi.override.enableExecuteRefreshAction = false;\n          bizagi.override.restoreAppearanceAfterRefresh = true;\n          break;}\n\n      this.Class.overridesInitiated = true;\n    }\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /**\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: Bizagi Form Container Class\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: UI Forms Team\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This script will define a form container class that defines basic stuff regarding the device\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\n$.Class.extend(\"bizagi.rendering.form\", {}, {\n  /*\r\n                                              *   Constructor\r\n                                              */\n  init: function init(params) {\n    var self = this;\n    var data = params.data;\n    var device = bizagi.util.detectDevice();\n\n    // Creates a hashtable to maintain references by id\n    self.rendersById = {};\n    self.rendersByXpath = {};\n    self.rendersByXpathId = {};\n    self.rendersByType = {};\n\n    // Set page cache id\n    self.idPageCache = data.pageCacheId;\n    // Set compatibilityVersion,  According to the form definition, this property comes in to help support and compatibility of the form when it is offline, and is required to download blob files for some controls (image, upload).\n    // https://bizagidev.visualstudio.com/Bizagi%20Core/_git/Bizagi.Core/commit/41f82d9d0bc0d49b00985aefb8b87404c31466ab\n    self.compatibilityVersion = data.properties.compatibilityVersion || 0;\n\n    // Set default mode\n    self.mode = params.mode || \"execution\";\n    self.focus = params.focus;\n\n    // Set rendering params\n    self.params = params;\n\n    // Call base\n    this._super(params);\n\n    // Define confirmation message \n    var message = \"\";\n\n    if (device !== \"desktop\") {\n      message = this.getResource(\"render-form-user-confirmation-message\").replace(/<br(\\/| \\/)>/g, \"\\n\");\n    } else {\n      message = this.getResource(\"render-form-user-confirmation-message\");\n    }\n\n    // Default properties\n    var properties = self.properties;\n    properties.sessionId = data.sessionId;\n    properties.displayAsReadOnly = bizagi.util.parseBoolean(data.displayAsReadOnly) || false;\n    properties.userConfirmationMessage = properties.userConfirmationMessage || message;\n    properties.orientation = properties.orientation || \"ltr\";\n    properties.hasRule = bizagi.util.parseBoolean(properties.hasRule) || false;\n    properties.contexttype = params.contexttype || \"\";\n    properties.paramsRender = params.paramsRender || {};\n    properties.processPath = params.data.processPath ? params.data.processPath.replaceAll(\"|/|\", \"  &rsaquo;  \") : \"\";\n    properties.breadCrumb = params.data.processPath ? params.data.processPath.split(\"|/|\") : [];\n    properties.type = properties.type || \"form\";\n\n    // Set validations & actions\n    this.validations = data.validations;\n    this.actions = data.actions;\n\n    // Enable the \"Validate and Save\" action for Form Buttons\n    self.allowValidateAndSaveAction = bizagi.override && bizagi.override.enableActionValidateAndSave === true;\n\n    // Enable execution of Quick actions\n    var enableExecuteQuickActions = bizagi.util.isFeatureEnabled(\"enableExecuteQuickActions\");\n    var allowExecuteQuickActions = enableExecuteQuickActions !== null ? enableExecuteQuickActions : true;\n    self.useQuickActions = allowExecuteQuickActions && self.hasQuickActions(data, allowExecuteQuickActions);\n\n    // Initialize buttons\n    self.initializeButtons(data);\n\n    // Define transitions to Complex Gateway\n    if (data.transitions) {\n      self.transitions = data.transitions;\n    }\n\n    this.originalProcessButton = this.processButton;\n\n    //Custom behaviour for application parent activated.\n    self.isRoutingDisabled = false;\n    if (params.applicationParent) {\n      switch (params.applicationParent) {\n        case 'NEWWORKPORTAL':\n          self.isRoutingDisabled = true;\n          break;}\n\n    }\n\n    self.isOfflineFormsV2Supported = bizagi.util.isMobileDevice() && bizagi.util.isOfflineFormsV2Supported();\n    self.isOfflineForm = bizagi.util.isOfflineForm({ context: self });\n    self.rendersById[properties.id] = self;\n  },\n\n  /*\r\n     *   Initializes button metadata\r\n     */\n  initializeButtons: function initializeButtons(data) {\n    var self = this;\n\n    self.buttons = [];\n\n    // Process buttons\n    if (data.buttons) {\n      $.each(data.buttons, function (i, item) {\n        var button = item.button.properties;\n\n        // Process caption\n        button.caption = !bizagi.util.isEmpty(button.caption) && self.getResource(button.caption) !== button.caption ? self.getResource(button.caption) : button.caption;\n\n        // Process actions\n        if (button.actions) {\n          $.each(button.actions, function (i, action) {\n            button[action] = true;\n          });\n        }\n\n        // Add other properties\n        button.ordinal = i;\n        button.action = button.next ? \"next\" :\n        button.nextWithoutValidations ? \"nextWithoutValidations\" :\n        button.submitData ? \"save\" :\n        button.cancel ? \"cancel\" :\n        button.back ? \"back\" :\n        button.createnewcase ? \"createnewcase\" :\n        button.validate ? \"validate\" : \"\";\n\n        // Explicit add save operation\n        button.save = button.action === \"save\";\n\n        // Allow Quick action\n        button.quickAction = button.type === \"quickactions\";\n\n        // Add inherent behaviours\n        if (button.next || button.back || button.nextWithoutValidations) {\n          button.routing = true;\n        }\n\n        if (button.hasRule) {\n          button.executeRule = true;\n        }\n\n        if (self.allowValidateAndSaveAction && button.validate) {\n          button.submitData = true;\n          button.refresh = true;\n          button.save = true;\n          if (button.action === \"next\" || button.action === \"createnewcase\") {\n            button.refresh = false;\n          }\n        }\n\n        // Prepare button style\n        button.style = self.buildButtonStyle(button);\n\n        // Add to button array\n        self.buttons.push(button);\n      });\n    }\n  },\n\n  /*\r\n     *   Get the original params used to fetch the form\r\n     */\n  getParams: function getParams() {\n    return this.params;\n  },\n\n  setParam: function setParam(property, value) {\n    if (this.params) {\n      this.params[property] = value;\n    }\n  },\n\n  /*\r\n     *   Get current rendering mode\r\n     */\n  getMode: function getMode() {\n    return this.mode;\n  },\n  /*\r\n     *   Get the custom handlers set for this execution\r\n     */\n  getCustomHandlers: function getCustomHandlers() {\n    var self = this;\n    if (self.params) {\n      return self.params.customHandlers;\n    }\n  },\n  /*\r\n     * Method to index renders\r\n     */\n  registerRender: function registerRender(render) {\n    var self = this;\n    var xpath = render.properties.xpath;\n    var id = render.properties.id;\n    var type = render.properties.type;\n    var xpathId = xpath ? xpath + \".\" + id : undefined;\n\n    self.rendersById[id] = render;\n    if (xpath) {\n      if (!self.rendersByXpath[xpath]) {\n        self.rendersByXpath[xpath] = [];\n      }\n      self.rendersByXpath[xpath].push(render);\n    }\n\n    if (xpathId) {\n      if (!self.rendersByXpathId[xpathId]) {\n        self.rendersByXpathId[xpathId] = [];\n      }\n      self.rendersByXpathId[xpathId].push(render);\n    }\n\n    if (!self.rendersByType[type]) {\n      self.rendersByType[type] = [];\n    }\n    self.rendersByType[type].push(render);\n  },\n  /*\r\n     * Method to unregister render\r\n     */\n  unregisterRender: function unregisterRender(render) {\n    var self = this;\n\n    if (self.rendersById[render.properties.id]) {\n      delete self.rendersById[render.properties.id];\n    }\n\n    if (render.properties.xpath) {\n      if ($.isArray(self.rendersByXpath[render.properties.xpath]) &&\n      self.rendersByXpath[render.properties.xpath].length > 1) {\n        var index = self.rendersByXpath[render.properties.xpath].findIndex(function (element) {\n          return bizagi.util.md5(JSON.stringify(element.properties)) === bizagi.util.md5(JSON.stringify(render.properties));\n        });\n        index !== -1 && self.rendersByXpath[render.properties.xpath].splice(index, 1);\n      } else {\n        delete self.rendersByXpath[render.properties.xpath];\n      }\n      if (render.properties.id) {\n        if ($.isArray(self.rendersByXpathId[render.properties.xpath + '.' + render.properties.id]) &&\n        self.rendersByXpathId[render.properties.xpath + '.' + render.properties.id].length > 1) {\n          var index = self.rendersByXpathId[render.properties.xpath + '.' + render.properties.id].findIndex(function (element) {\n            return bizagi.util.md5(JSON.stringify(element.properties)) === bizagi.util.md5(JSON.stringify(render.properties));\n          });\n          index !== -1 && self.rendersByXpathId[render.properties.xpath + '.' + render.properties.id].splice(index, 1);\n        } else {\n          delete self.rendersByXpathId[render.properties.xpath + '.' + render.properties.id];\n        }\n      }\n    }\n\n    // Unregister from renders by type\n    if (render.properties.type) {\n      var listRendesByType = self.getRenderByType(render.properties.type);\n      var listRendesByTypeLength = listRendesByType.length;\n      var renderKey = render.properties.id || render.properties.xpath;\n\n      for (var i = 0; i < listRendesByTypeLength; i++) {\n        var listRender = listRendesByType[i];\n        if (typeof listRender.properties.id != \"undefined\" && listRender.properties.id == renderKey ||\n        typeof listRender.properties.xpath != \"undefined\" && listRender.properties.xpath == renderKey) {\n          // Unregister element\n          self.rendersByType[render.properties.type].splice(i, 1);\n          break;\n        }\n      }\n    }\n  },\n  /*\r\n     * Method to access a render by id\r\n     */\n  getRenderById: function getRenderById(id) {\n    var self = this;\n\n    return self.rendersById[id];\n  },\n\n  getGridByColumn: function getGridByColumn(id) {\n    var self = this;\n    var grids = self.getRenderByType('grid');\n    var i = 0,columnIndex;\n\n    for (; i < grids.length; i++) {\n      columnIndex = grids[i].columnsIds.indexOf(id);\n      if (columnIndex != -1) {\n        return grids[i];\n      }\n    }\n\n    return null;\n  },\n\n  /*\r\n     *   Method to find all the renders matching an xpath inside the container\r\n     */\n  getRenders: function getRenders(xpath) {\n    var self = this;\n\n    // Remove [] filters for grid columns xpaths to fully identify the grid as the xpath target\n    if (xpath && xpath.indexOf)\n    if (xpath.indexOf(\"[\") > 0) {\n      xpath = xpath.substring(0, xpath.indexOf(\"[\"));\n    }\n\n    return self.rendersByXpathId[xpath] ?\n    self.rendersByXpathId[xpath] : self.rendersByXpath[xpath] ?\n    self.rendersByXpath[xpath] : [];\n  },\n  /**\r\n      * Get all render with the same type\r\n      */\n  getRenderByType: function getRenderByType(type) {\n    var self = this;\n\n    // Check that type is defined\n    if (typeof type == \"string\" && type.length > 0) {\n      // Search controls by type\n      return self.rendersByType[type] ? self.rendersByType[type] : [];\n    }\n    return [];\n  },\n\n  /*\r\n     *   Build the container html\r\n     */\n  renderContainer: function renderContainer() {\n    var self = this;\n    var properties = this.properties;\n    var template = self.renderFactory.getTemplate(\"form\");\n    var idCase = \"\";\n\n    // Render the form\n    // TODO: Unify markup of forms. Currently the template has validations to apply a different markup if it is \n    //a query form. In the future, all forms should have the same markup to minimize complexity. See form.tmpl.html.\n    var html = $.fasttmpl(template, {\n      buttons: self.buttons,\n      transitions: self.transitions,\n      uniqueId: properties.uniqueId,\n      helptext: properties.helpText,\n      mode: self.getMode(),\n      queryForm: self.getFormType() === \"queryForm\",\n      summaryForm: self.params.summaryForm || false,\n      globalForm: self.properties.displayAsReadOnly || false,\n      idCase: idCase,\n      displayName: self.params.displayName || idCase,\n      processPath: properties.processPath,\n      breadCrumb: properties.breadCrumb,\n      orientation: properties.orientation,\n      isEmpty: bizagi.util.isEmpty(self.children) && bizagi.util.isEmpty(self.transitions), // Sections and Gateway\n      allowQuickActions: self.useQuickActions // Quick actions\n    });\n\n    // Render children\n    html = self.replaceChildrenHtml(html, self.renderChildrenHtml());\n    return html;\n  },\n  /*\r\n     *   Process the html rendering object\r\n     */\n  postRenderContainer: function postRenderContainer(form) {\n    var self = this;\n    var mode = self.getMode();\n\n    // Add a mode class\n    form.addClass(\"ui-bizagi-rendering-mode-\" + mode);\n\n    // Call base\n    this._super(form);\n  },\n  /*\r\n     *   Template method to implement in each device to customize the container's behaviour to add handlers\r\n     */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    var complexGatewayContainer;\n    var form = self.container;\n\n    if (form.length > 1) {\n      $(form).each(function () {\n        if ($(this).hasClass('ui-bizagi-container-complexgateway')) {\n          complexGatewayContainer = this;\n        }\n      });\n    } else {\n      complexGatewayContainer = $(\".ui-bizagi-container-complexgateway\", form);\n    }\n\n    // activeTransitions is used to store ids of activities in Complex Gateway\n    self.activeTransitions = {};\n\n    // Process buttons\n    self.processButtons(form);\n\n    // Check for dom included event\n    self.bind(\"ondomincluded\", function (e, mainForm) {\n      var $canvas = self.getValidationsContainer(mainForm);\n\n      // Creates validation controller after the form is ready\n      self.validationController = new bizagi.command.controllers.validation(self, self.validations, $canvas);\n      // Creates action controller after the form is ready\n      self.actionController = new bizagi.command.controllers.action(self, self.actions);\n\n      // Resolve this deferred to start executing DOM dependant plugins\n      self.readyDeferred.resolve();\n    });\n\n    // Set events for complex gateway interface\n    $(complexGatewayContainer).find(\".ui-checkbox\").bind(\"click\", function () {\n      var checkboxLabel = $(\"label\", this);\n\n      var transitionId = checkboxLabel.data(\"value\") || \"\";\n      if (typeof self.activeTransitions[transitionId] == \"undefined\") {\n        self.activeTransitions[transitionId] = false;\n      }\n\n      if (bizagi.util.parseBoolean(checkboxLabel.data(\"checked\"))) {\n        // Uncheck element\n        checkboxLabel.removeClass(\"ui-checkbox-state-checked\");\n        checkboxLabel.removeClass(\"bz-check\").addClass(\"bz-full-ball\");\n        checkboxLabel.data(\"checked\", false);\n        self.activeTransitions[transitionId] = false;\n      } else {\n        // Check element\n        checkboxLabel.addClass(\"ui-checkbox-state-checked\");\n        checkboxLabel.addClass(\"bz-mo-icon\").addClass(\"bz-check\").removeClass(\"bz-full-ball\");\n        checkboxLabel.data(\"checked\", true);\n        self.activeTransitions[transitionId] = true;\n      }\n    });\n\n\n  },\n  /*\r\n     *   Template method to implement in each device to customize the render's behaviour when rendering in design mode\r\n     */\n  configureDesignView: function configureDesignView() {\n    var self = this;\n\n\n    // Check for dom included event\n    self.bind(\"ondomincluded\", function () {\n      // Resolve this deferred to start executing DOM dependant plugins\n      self.readyDeferred.resolve();\n    });\n  },\n  /*\r\n     *   Format form buttons to allow further customization\r\n     */\n  buildButtonStyle: function buildButtonStyle(button) {\n\n    var style = {};\n    if (button.format) {\n      if (button.format.size) {\n        if (button.format.size != \"0\") {\n          var newFontSize = 100 + Number(button.format.size) * 10 + \"%\";\n          style[\"font-size\"] = newFontSize + \" !important\";\n        }\n      }\n      if (button.format.bold) {\n        style[\"font-weight\"] = \"bold !important\";\n        if (bizagi.util.isIE()) {\n          style[\"font-family\"] = \"'Open Sans', 'Helvetica Neue', Arial, Helvetica, sans-serif !important\";\n        }\n      }\n      if (button.format.italic) {\n        style[\"font-style\"] = \"italic !important\";\n      }\n      if (button.format.underline || button.format.strikethru) {\n        var strikethru = bizagi.util.parseBoolean(button.format.strikethru) ? \"line-through \" : \"\";\n        var underline = bizagi.util.parseBoolean(button.format.underline) ? \"underline \" : \"\";\n        style[\"text-decoration\"] = strikethru + underline + \" !important\";\n      }\n      if (button.format.background) {\n        style[\"background-color\"] = button.format.background + \" !important\";\n        style[\"background-image\"] = \"none !important\";\n      }\n      if (button.format.color) {\n        style[\"color\"] = button.format.color + \" !important\";\n      }\n    }\n\n    var strStyle = \"\";\n    for (key in style) {\n      strStyle += key + \":\" + style[key] + \";\";\n    }\n    return strStyle;\n  },\n  /*\r\n     *   Returns the in-memory processed element\r\n     *   Returns a promise\r\n     */\n  render: function render() {\n    var self = this;\n\n    // Creates a deferred, so we can check when form has been included in dom\n    if (!self.readyDeferred)\n    self.readyDeferred = new $.Deferred();\n\n    // Call base\n    var result = this._super();\n\n    return result;\n  },\n  /*\r\n     *   Sets a promise that the form will be included in the DOM\r\n     *   so we can apply some tedious plugins that require that\r\n     */\n  ready: function ready() {\n    var self = this;\n\n    return self.readyDeferred.promise();\n  },\n  /*\r\n     *   Returns the xpath context of the element\r\n     */\n  getXpathContext: function getXpathContext() {\n    return this.properties.xpathContext || \"\";\n  },\n  /*\r\n     *  Return context type, when the parent form is entity\r\n     */\n  getContextType: function getContextType() {\n    return this.properties.contexttype || \"\";\n  },\n\n  /*\r\n     * Return the endpoint action, when the form will be refresh\r\n     */\n  getEndPointAction: function getEndPointAction() {\n    var self = this,\n    properties = self.properties;\n\n    if (properties.formtype == \"startform\")\n    return \"LOADSTARTFORM\";\n\n    return undefined;\n\n  },\n\n  /*\r\n     *   Returns the page cache id for the element\r\n     */\n  getPageCache: function getPageCache() {\n    return this.idPageCache;\n  },\n  /*\r\n     *   Returns the form containing the element\r\n     */\n  getFormContainer: function getFormContainer() {\n    return this;\n  },\n  /*\r\n     *   Method to process button actions in the form\r\n     */\n  processButtons: function processButtons() {\n    var self = this;\n    var buttons = self.getButtons();\n    // Don't process buttons if they are undefined in the template\n    if (!buttons || buttons.length === 0) return;\n    // Attach a handler for each button\n    buttons.on(\"click\", function (e) {\n      e.preventDefault();\n      e.stopImmediatePropagation();\n      var button = $(this);\n      var ordinal = button.attr(\"ordinal\");\n      var buttonProperties = self.buttons.find(function (btn) {\n        return btn.ordinal == ordinal;\n      });\n      // Disable button to prevent multiple click actions\n      button.prop(\"disabled\", true);\n      if (button.hasOwnProperty('disabled')) {\n        button.button(\"disable\"); // Setting styles\n      }\n      // External Events\n      self.propagateExternalEvents(e);\n      // Execute button\n      // QAF-1418 - add setTimeout\n      var timeOutButton = setTimeout(function () {\n        $.when(self.buttonExecutionHandler(buttonProperties)).always(function () {\n          if ($.contains(document.documentElement, button.get(0))) {//check if button is still in DOM\n            button.prop(\"disabled\", false); //enable button\n            if (button.hasOwnProperty('enable')) {\n              button.button(\"enable\"); //Setting styles\n            }\n          }\n        });\n        clearTimeout(timeOutButton);\n      }, 100);\n    });\n  },\n  buttonExecutionHandler: function buttonExecutionHandler(buttonProperties) {\n    var self = this;\n    self.startLoading();\n    self.lastActionButton = buttonProperties;\n    if (buttonProperties.action === \"next\") {\n      buttonProperties.routingDisabled = self.isRoutingDisabled;\n    }\n    return $.when(self.processButton(buttonProperties)).always(function () {\n      self.processDefer = undefined;\n      self.endLoading();\n    });\n  },\n  /*\r\n     * Execute codes just before sending information to server\r\n     */\n  preProcessButton: function preProcessButton(buttonProperties) {\n    return true;\n  },\n  /*\r\n     * Execute codes just after sending information to server\r\n     */\n  postProcessButton: function postProcessButton(responses, buttonProperties) {\n    return true; // true means continue\n  },\n\n  setLoaderDeferred: function setLoaderDeferred() {\n    var self = this;\n\n    self.loaderDeferred = $.Deferred().resolve();\n  },\n\n  deleteLoaderDeferred: function deleteLoaderDeferred() {\n    var self = this;\n\n    if (self.isLoaderDeferredSet()) {\n      $.when(self.loaderDeferred.promise()).done(function () {\n        delete self.loaderDeferred;\n      }).fail(function () {\n        delete self.loaderDeferred;\n      });\n    }\n  },\n\n  useOrSetLoaderDeferred: function useOrSetLoaderDeferred() {\n    var self = this;\n\n    if (!self.isLoaderDeferredSet()) {\n      self.setLoaderDeferred();\n    }\n  },\n\n  getLoaderPromise: function getLoaderPromise() {\n    var self = this;\n\n    if (self.isLoaderDeferredSet()) {\n      return self.loaderDeferred.promise();\n    } else {\n      return;\n    }\n  },\n\n  isLoaderDeferredSet: function isLoaderDeferredSet() {\n    var self = this;\n\n    if (self.loaderDeferred) {\n      return true;\n    } else {\n      return false;\n    }\n  },\n\n  appendWaitForLoader: function appendWaitForLoader(params) {\n    var self = this;\n    var promise = params.promise;\n    var create = params.create || false;\n\n    if (!self.isLoaderDeferredSet()) {\n      if (create) {\n        self.setLoaderDeferred();\n      } else {\n        return;\n      }\n    }\n\n    self.loaderDeferred = self.loaderDeferred.then(function () {\n      return function () {\n        return promise;\n      }();\n    });\n  },\n\n  getResolveOrReject: function getResolveOrReject() {\n    var self = this;\n    var deferred = $.Deferred();\n\n    if (self.isLoaderDeferredSet()) {\n      $.when(self.loaderDeferred.promise()).done(function () {\n        deferred.resolve();\n      }).fail(function () {\n        deferred.resolve();\n      });\n    } else {\n      deferred.resolve();\n    }\n\n    return deferred.promise();\n  },\n\n  /*\r\n     *   Executes a single button action\r\n     */\n  processButton: function processButton(buttonProperties) {\n    var self = this;\n    var defer = $.Deferred();\n    var properties = self.properties;\n    if (!buttonProperties.routing) {\n      bizagi.chrono.initAndStart(\"submitForm\");\n    }\n    bizagi.chrono.init(\"waiting\");\n\n    // First hide and clear validation box\n    self.validationController.clearValidationMessages();\n\n    // Resolve asynchronous tabItems\n    var form = self.getFormContainer();\n    var getAllTabs = form.getRenderByType(\"tabItem\");\n    var getAllTabsLength = getAllTabs.length;\n\n    form.innerTabsLoading = true;\n\n    self.useOrSetLoaderDeferred();\n\n    // Check\n    for (var i = 0; i < getAllTabsLength; i++) {\n      var render = getAllTabs[i];\n      // Resolve internal deferred\n      if (render.loadingDeferred && render.parent.container) {\n        render.loadingDeferred.resolve();\n      }\n    }\n\n    delete form.innerTabsLoading;\n\n    $.when(self.ready(), self.getResolveOrReject()).done(function () {\n      self.deleteLoaderDeferred();\n      // Validate the form\n      var valid = bizagi.util.parseBoolean(buttonProperties.validate) ? self.validationController.performValidations() : true;\n      if (valid) {\n\n        if ([\"save\", \"next\", \"back\", \"createnewcase\", \"nextWithoutValidations\"].includes(buttonProperties.action) && !self.isOfflineForm) {\n          $(document).data('auto-save', '');\n        }\n\n        // Check for user confirmation if configured and the button is configured to enroute\n        var confirmationStatus = self.getConfirmationStatus(properties, buttonProperties);\n\n        if (confirmationStatus.hasConfirmation) {\n          self.endLoading();\n          $.when(bizagi.showConfirmationBox(confirmationStatus.message, null, false)).done(function () {\n            // Submits the form\n            if (self.preProcessButton(buttonProperties)) {\n              //Trigger the event after ProcessButton\n              self.triggerGlobalHandler(\"renderActionButton\", buttonProperties);\n              $.when(self.submitForm(buttonProperties)).done(function () {\n                defer.resolve();\n              }).fail(function () {\n                defer.reject(arguments);\n              });\n            }\n          }).fail(function () {\n            defer.reject();\n          });\n\n        } else {\n          if (self.preProcessButton(buttonProperties)) {\n            //Trigger the event after ProcessButton\n            self.triggerGlobalHandler(\"renderActionButton\", buttonProperties);\n            $.when(self.submitForm(buttonProperties)).done(function () {\n              $(document).trigger(\"FORMACTION\", buttonProperties);\n              defer.resolve();\n            }).fail(function () {\n              defer.reject(arguments);\n            });\n          }\n        }\n\n      } else {\n\n        self.endLoading();\n        if (buttonProperties.submitData) {\n          $.when(self.submitData()).done(function () {\n            defer.reject();\n          });\n        } else {\n          defer.reject();\n        }\n\n        self.validationController.expandNotificationBox();\n      }\n\n      var customHandler = self.getCustomHandler(\"afterFormButtonClick\");\n      if (customHandler) {\n        customHandler(buttonProperties);\n      }\n    });\n\n    return defer.promise();\n  },\n  /*\r\n     *   Public method to perform validations externally\r\n     */\n  validateForm: function validateForm() {\n    var self = this;\n\n    // First hide and clear validation box\n    self.validationController.clearValidationMessages();\n\n    // Validate the form\n    return self.validationController.performValidations();\n  },\n  /*\r\n     *   Submits all the form to the server and returns a deferred to check when the process finishes\r\n     */\n  saveForm: function saveForm() {\n    var self = this;\n\n    // Avoid the execution of server actions for mobile offline\n    if (bizagi.util.isNativeMobileDevice() && !this.allowOnlineActions()) {\n      return $.when(function () {\n        return null;\n      });\n    }\n\n    // Collect data\n    var data = self.collectRenderValuesForSubmit();\n\n    // Check if there are deferreds to wait\n    var deferredsToWait = null;\n    if (data.deferreds) {\n      deferredsToWait = $.when.apply($, data.deferreds);\n      delete data.deferreds;\n    }\n\n    // Wait for deferreds\n    return $.when(deferredsToWait).pipe(function () {\n      self.startLoading();\n\n      var saveParams = {\n        action: \"SAVE\",\n        data: data,\n        idCase: self.params.idCase,\n        idWorkitem: self.params.idWorkitem,\n        xpathContext: self.properties.xpathContext,\n        idPageCache: self.properties.idPageCache,\n        isOfflineForm: self.isOfflineForm || false };\n\n\n      if (self.isOfflineForm) {\n        saveParams.offlineType = self.params.offlineType;\n      }\n\n      // Submit the form\n      return $.when(self.dataService.submitData(saveParams)).\n      always(function () {\n        self.endLoading();\n      });\n    });\n  },\n  removeCaseSyncError: function removeCaseSyncError() {\n    var editPromise = undefined;\n    if (!this.removeSyncErrorOnSubmit) return;\n    this.removeSyncErrorOnSubmit = false;\n    var offlineType = this.params.offlineType == \"task\" ? \"task\" : \"start\";\n    var editPromise = offlineType == \"start\" ? this.dataService.removeStartCaseSyncError(this.params) :\n    this.dataService.removeTaskCaseSyncError(this.params);\n    return editPromise;\n  },\n  /*\r\n     *   Creates a json array with key values to send to the server\r\n     */\n  submitForm: function submitForm(buttonProperties) {\n    var self = this;\n    var defer = $.Deferred();\n\n    $.when(self.isReadyToSave()).\n    then(function () {\n      if (self.isOfflineForm) {\n        $.when(self.removeCaseSyncError()).\n        then(\n        //Even if the removeSyncError promise fails the internalSubmit should be executed without break the promise chain\n        function () {return self.internalSubmitFormOffline(buttonProperties);},\n        function () {return self.internalSubmitFormOffline(buttonProperties);}).\n\n        then(function () {\n          defer.resolve();\n        }).fail(function () {\n          defer.reject(arguments);\n        });\n      } else\n      {\n        $.when(self.internalSubmitForm(buttonProperties)).\n        done(function () {\n          defer.resolve();\n        }).fail(function () {\n          defer.reject(arguments);\n        });\n      }\n    }).\n    fail(function () {\n      self.endLoading();\n      bizagi.log(\"The form is not saved, no changes were found\");\n      defer.reject();\n    });\n    return defer.promise();\n  },\n  checkWidgetsData: function checkWidgetsData() {\n    //\n  },\n  isComplexGatewayPainted: function isComplexGatewayPainted() {\n    return false;\n  },\n\n  /**\r\n      * Get last action button\r\n      * @returns {*}\r\n      */\n  getLastActionButton: function getLastActionButton() {\n    return this.lastActionButton;\n  },\n\n  /**\r\n      * Internal - Creates a json array with key values to send to the database\r\n      * @param {} buttonProperties\r\n      * @returns {}\r\n      */\n  internalSubmitFormOffline: function internalSubmitFormOffline(buttonProperties) {\n    var self = this;\n    var message = \"\";\n    var data;\n    var defer = $.Deferred();\n\n    if (self.isOfflineForm && self.properties && !self.properties.idPageCache) {\n      self.properties.idPageCache = \"\";\n    }\n\n    // Fill data hash\n    if (buttonProperties.submitData || buttonProperties.executeRule || buttonProperties.save) {\n      // Collect data\n      data = self.collectRenderValuesForSubmit();\n    } else {\n      // When the action is validate            \n      return;\n    }\n\n    var executeButtonAction = null;\n\n    // Start asynchronous operation\n    bizagi.loading.start();\n\n    // Prepare actions\n    if (buttonProperties.executeRule) {// When the button has to execute any rule (MUST SUBMIT DATA BEFORE ALWAYS)\n\n      // in offline this don't happend => Reset data because when an execute rule operation has been performed, it saved already all the data\n      if (data == undefined) {\n        data = {};\n      }\n\n      executeButtonAction = self.dataService.executeButton({\n        idRender: buttonProperties.id,\n        xpathContext: self.properties.xpathContext || \"\",\n        idPageCache: self.properties.idPageCache,\n        prepare: true });\n\n      executeButtonAction.tag = \"executeRule_\" + buttonProperties.id;\n    }\n\n    if (self.transitions) {\n      var transitions = [];\n      $.each(this.activeTransitions, function (key, value) {\n        value ? transitions.push(key) : \"\";\n      });\n\n      if (bizagi.util.countProps(transitions) == 0) {\n        bizagi.showMessageBox(\n        bizagi.localization.getResource(\"render-widget-complexgateway-path\"),\n        bizagi.localization.getResource(\"render-widget-complexgateway-error\"), \"info\", false);\n\n        self.endLoading();\n        return \"\";\n      }\n    }\n\n    var waitingDeferreds = [];\n    var deferredsToWait = null;\n\n    if (data && data.deferreds) {\n      deferredsToWait = $.when.apply($, data.deferreds);\n      waitingDeferreds.push(deferredsToWait);\n      delete data.deferreds;\n    }\n\n    // Assemble the actions\n    var actions = [];\n\n    if (executeButtonAction) {\n      actions.push(executeButtonAction);\n    }\n\n    $.when.apply($, waitingDeferreds).done(function () {\n      $.when(self.dataService.submitData({\n        action: buttonProperties.action,\n        data: data,\n        xpathContext: self.properties.xpathContext,\n        idPageCache: self.properties.idPageCache,\n        idForm: self.properties.id,\n        prepare: true,\n        transitions: transitions || \"\",\n        idCase: self.params.idCase,\n        idWorkitem: self.params.idWorkitem,\n        isOfflineForm: self.isOfflineForm || false,\n        offlineType: self.params.offlineType || \"\",\n        actions: actions })).\n      then(function (responses) {\n\n        if (!self.postProcessButton(responses, buttonProperties)) {\n          return;\n        }\n\n        //Offline action stored\n        var isSaveForDraft = self.params.offlineType !== \"task\" && buttonProperties.action === \"save\";\n        if (self.online && self.isOfflineFormsV2Supported && !isSaveForDraft) {\n          var syncDeferred = new $.Deferred();\n          var syncParams = $.extend({ deferred: syncDeferred }, self.params);\n          $(document).trigger(\"tryPushCase.offline\", syncParams);\n        }\n\n        //Backward comp\n        if (!self.isOfflineFormsV2Supported) {\n          $(document).trigger(\"tryPushData.offline\");\n        }\n\n        $.when(syncDeferred).\n        then(function (result) {\n          bizagi.loading.stop();\n          if (buttonProperties.routing) {\n            if (!self.online && self.isOfflineFormsV2Supported) {\n              self.triggerHandler(\"routing\", {\n                offlineAction: buttonProperties.action,\n                idCase: self.params.idCase,\n                idWorkitem: self.params.idWorkitem,\n                buttonPropertiesAction: buttonProperties.action,\n                radNumber: self.params.radNumber });\n\n            } else {\n              //Show toast synchronized\n              if (self.showToastOnSuccessSync) {\n                self.showToastOnSuccessSync = false;\n                bizagi.util.showMobileToast({\n                  type: \"success\",\n                  message: bizagi.localization.getResource(\"workportal-offline-sync-success\") });\n\n              }\n              self.triggerHandler(\"routing\", {\n                idCase: result.IdCase,\n                caseNumber: result.CaseNumber,\n                buttonPropertiesAction: buttonProperties.action });\n\n            }\n          } else {\n\n            //The case was not sync\n            if (!self.online && result == undefined) {\n              self.isOfflineRefreshWithEdition = true;\n            }\n            // After successfully response refresh the form\n            if (buttonProperties.refresh || result && result.shouldRefresh) {\n              self.refreshForm();\n            }\n            if (self.showToastOnSuccessSync && self.online) {\n              self.showToastOnSuccessSync = false;\n              bizagi.util.showMobileToast({\n                type: \"success\",\n                message: bizagi.localization.getResource(\"workportal-offline-save-and-sync-success\") });\n\n            } else {\n              var message = bizagi.localization.getResource(\"workportal-mobile-offline-form-successful\", \"Saved\");\n              bizagi.util.showNotification({ text: message, stop: false, type: \"success\" });\n            }\n          }\n          defer.resolve();\n        }).\n        fail(function (error) {\n          bizagi.loading.stop();\n          bizagi.util.recreateNativeButtons(self);\n          var message = bizagi.localization.getResource(\"workportal-mobile-offline-sync-fail\", \"Synchronization failed\");\n          bizagi.util.showNotification({ text: message, stop: false, type: \"error\" });\n          if ($.isArray(error)) {\n            var responses = error;\n            var bHasValidations;\n            var alertMessage = \"\";\n            $.each(responses, function (i, response) {\n              var propertiesToDisplayMessages = self.validationToDisplayMessages(bHasValidations, response.result.type, response.result.messages, alertMessage);\n              bHasValidations = propertiesToDisplayMessages.bHasValidations;\n              alertMessage = propertiesToDisplayMessages.alertMessage;\n            });\n            if (bHasValidations && alertMessage !== \"\") {\n              bizagi.modalError.show(alertMessage, 'workportal-general-word-information', false);\n            }\n          }\n          self.failHandler(error);\n          defer.reject(error);\n        });\n      }).fail(function (error) {\n        var message = bizagi.localization.getResource(\"workportal-mobile-offline-sync-fail\", \"Synchronization failed\");\n        bizagi.util.showNotification({ text: message, stop: false, type: \"error\" });\n        defer.reject(error);\n      });\n    });\n\n  },\n\n  /**\r\n      * To save handSignature or any filetype render after editting in offline mode\r\n      * @param {Array} data - RederValues from collecData() \r\n      */\n  partialSubmitFormOffline: function partialSubmitFormOffline(data) {\n    var self = this;\n    var defer = $.Deferred();\n\n    $.when(self.dataService.submitData({\n      action: \"save\",\n      data: data,\n      xpathContext: self.properties.xpathContext,\n      idPageCache: self.properties.idPageCache,\n      idForm: self.properties.id,\n      prepare: true,\n      transitions: \"\",\n      idCase: self.params.idCase,\n      idWorkitem: self.params.idWorkitem,\n      isOfflineForm: self.isOfflineForm || false,\n      offlineType: self.params.offlineType || \"\",\n      actions: [] })).\n\n    fail(function (error) {\n      var message = bizagi.localization.getResource(\"workportal-mobile-offline-form-fail\", \"Not saved\");\n      bizagi.util.showNotification({ text: message, stop: false, type: \"error\" });\n      defer.reject(error);\n    });\n\n    return defer.promise();\n  },\n\n  /*\r\n     *   Internal - Creates a json array with key values to send to the server\r\n     */\n  internalSubmitForm: function internalSubmitForm(buttonProperties) {\n    var self = this;\n    var defer = $.Deferred();\n    var data = {};\n\n    // Fill data hash\n    if (buttonProperties.submitData || buttonProperties.executeRule || buttonProperties.createnewcase || buttonProperties.back) {\n      // Collect data\n      data = self.collectRenderValuesForSubmit();\n    }\n\n    // Start asynchronous operation\n    $.when(self.startLoading()).done(function () {\n      $('html, body').animate({ scrollTop: $('.ui-bizagi-loading-icon') }, 'slow');\n    });\n\n    var submitDataAction = null;\n    var executeButtonAction = null;\n    var performAction = null;\n    var checkpointAction = null;\n    var commitAction = null;\n    var waitingDeferreds = [];\n    var deferredsToWait = null;\n\n    // Prepare actions\n    if (buttonProperties.executeRule) {// When the button has to execute any rule (MUST SUBMIT DATA BEFORE ALWAYS)\n\n      if (data.deferreds) {\n        deferredsToWait = $.when.apply($, data.deferreds);\n        waitingDeferreds.push(deferredsToWait);\n        delete data.deferreds;\n      }\n\n      submitDataAction = self.dataService.submitData({\n        action: \"SUBMITDATA\",\n        data: data,\n        xpathContext: self.properties.xpathContext,\n        idPageCache: self.properties.idPageCache,\n        prepare: true });\n\n      submitDataAction.tag = \"submitData\";\n\n      checkpointAction = self.prepareCheckpointAction(buttonProperties.id);\n\n      // Reset data because when an execute rule operation has been performed, it saved already all the data\n      data = {};\n      executeButtonAction = self.dataService.executeButton({\n        idRender: buttonProperties.id,\n        xpathContext: self.properties.xpathContext || \"\",\n        idPageCache: self.properties.idPageCache,\n        prepare: true });\n\n      executeButtonAction.tag = \"executeRule\";\n\n      commitAction = self.prepareCommitAction(buttonProperties.id);\n    }\n\n    if (buttonProperties.next || buttonProperties.back || buttonProperties.save || buttonProperties.createnewcase || buttonProperties.nextWithoutValidations) {\n      // Verify transitions\n      if (self.transitions) {\n        var transitions = [];\n        $.each(this.activeTransitions, function (key, value) {\n          value ? transitions.push(key) : \"\";\n        });\n\n        if (bizagi.util.countProps(transitions) == 0) {\n          bizagi.showMessageBox(bizagi.localization.getResource(\"render-widget-complexgateway-path\"), bizagi.\n          localization.getResource(\"render-widget-complexgateway-error\"), \"info\", false);\n          self.endLoading();\n          defer.reject();\n          return defer.promise();\n        }\n      }\n\n      if (data && data.deferreds) {\n        deferredsToWait = $.when.apply($, data.deferreds);\n        waitingDeferreds.push(deferredsToWait);\n        delete data.deferreds;\n      }\n\n\n      performAction = self.dataService.submitData({\n        action: self.getButtonAction(buttonProperties.action),\n        forcePlanCompletion: buttonProperties.forcePlanCompletion,\n        data: data,\n        xpathContext: self.properties.xpathContext,\n        idPageCache: self.properties.idPageCache,\n        prepare: true,\n        transitions: transitions || \"\",\n        contexttype: self.properties.contextType,\n        surrogatekey: self.properties.surrogateKey });\n\n      performAction.tag = \"performAction\";\n    }\n\n    // Assemble the actions\n    var actions = [];\n\n    if (executeButtonAction) {\n      actions.push(submitDataAction);\n      actions.push(checkpointAction);\n      actions.push(executeButtonAction);\n      actions.push(commitAction);\n    }\n\n    if (performAction) {\n      actions.push(performAction);\n    }\n\n    // Execute the batch\n    bizagi.chrono.initAndStart(\"submitForm-ajax\");\n\n\n    //Evaluate if there are deferreds to evaluate, like inline add in grid, that must send a ADDRELATIONWITHDATA before to savedata\n    var flowControlDeferred = new $.Deferred();\n    if (data && data.deferreds) {\n      $.when.apply(this, data.deferreds).\n      done(function (response) {\n        flowControlDeferred.resolve(response);\n      }).\n      fail(function () {\n        flowControlDeferred.reject();\n        console.log(\"Error: It was not possible resolve async actions on form \");\n      });\n    } else {\n      flowControlDeferred.resolve();\n    }\n\n    waitingDeferreds.push(flowControlDeferred);\n\n    $.when.apply($, waitingDeferreds).done(function () {\n      $.when(self.dataService.multiaction().execute({ actions: actions })).done(function (responses) {\n        bizagi.chrono.stop(\"submitForm-ajax\");\n        // End asynchronous operation\n        self.endLoading();\n        // Find validations\n        var bHasValidations;\n        var alertMessage = \"\";\n        $.each(responses, function (i, response) {\n\n          var propertiesToDisplayMessages = self.validationToDisplayMessages(bHasValidations, response.result.type, response.result.messages, alertMessage);\n          bHasValidations = propertiesToDisplayMessages.bHasValidations;\n          alertMessage = propertiesToDisplayMessages.alertMessage;\n\n        });\n\n        if (!bHasValidations) {\n          // Everything went ok .. succesfully response from the server\n          if (!self.postProcessButton(responses, buttonProperties)) {\n            return;\n          }\n\n          // After successfully response refresh the form\n          if (buttonProperties.refresh) {\n            self.refreshForm();\n          }\n\n          // If needs routing publish an event\n          if (buttonProperties.routing) {\n            bizagi.jqxhrList.abortAll(\"rendering_\" + self.dataService.guid);\n            self.triggerHandler(\"routing\", {\n              idCase: self.params.idCase,\n              routingDisabled: buttonProperties.routingDisabled });\n\n          }\n\n          // Create case\n          if (buttonProperties.createnewcase) {\n            if (responses.length > 0) {\n              bizagi.jqxhrList.abortAll(\"rendering_\" + self.dataService.guid);\n              self.triggerHandler(\"routing\", {\n                idCase: responses[0].result.IdCase,\n                caseNumber: responses[0].result.CaseNumber });\n\n            }\n          }\n        } else {\n          if (alertMessage !== \"\") {/*If there is an alertMessage show in a modal error*/\n            bizagi.modalError.show(alertMessage, 'workportal-general-word-information', false);\n          }\n          if (buttonProperties.executeRule) {\n            self.sendRollbackAction(buttonProperties.id);\n          }\n        }\n\n        defer.resolve();\n      }).fail(function (res, res2, response) {\n        if (buttonProperties.executeRule) {\n          self.sendRollbackAction(buttonProperties.id);\n        }\n\n        if (response && response.error && (response.error.errorType === \"WaitForCompletionPlanException\" ||\n        response.error.errorType === \"InvalidPlanStateException\" || response.error.errorType === \"CustomMessageException\")) {\n          self.endLoading();\n          $.when(bizagi.showConfirmationBox(bizagi.localization.getResource(response.error.message), null, false)).then(function () {\n            return $.when(self.internalSubmitForm($.extend({}, buttonProperties, { forcePlanCompletion: true })));\n          }).done(function () {\n            defer.resolve();\n          }).fail(function () {\n            defer.reject();\n          });\n        } else {\n          self.failHandler(response);\n          defer.reject(response);\n        }\n      });\n    });\n    return defer.promise();\n  },\n  validationToDisplayMessages: function validationToDisplayMessages(bHasValidations, messageType, message, alertMessage) {\n    var self = this;\n\n    if (messageType == \"validationMessages\") {\n      // Something went wrong, we gotta display messages in notifications grid\n      self.addValidationMessage(message);\n      bHasValidations = true;\n    }\n    if (messageType == \"alertMessages\") {\n      // Something went wrong, we gotta display alert message\n      if (alertMessage === \"\") {\n        alertMessage = message;\n      } else {\n        alertMessage = alertMessage + \"\\n\\n\" + message;\n      }\n\n      bHasValidations = true;\n    }\n\n    return { \"bHasValidations\": bHasValidations, \"alertMessage\": alertMessage };\n  },\n\n  /*\r\n     *   Add a validation message to the form\r\n     */\n  addValidationMessage: function addValidationMessage(validationMessage, focus, icon, itemAdditionalClass, autofocus, type) {\n    var self = this;\n\n    // Clean messages for mobile offline\n    if (bizagi.util.isNativeMobileDevice() && !this.allowOnlineActions())\n    this.clearValidationMessages();\n\n    if (!self.validationController) {\n      var $canvas = self.getValidationsContainer();\n      self.validationController = new bizagi.command.controllers.validation(self, undefined, $canvas);\n    }\n\n    if (typeof validationMessage == \"string\") {\n      self.validationController.showValidationMessage(validationMessage, focus, icon, itemAdditionalClass, type);\n    } else {\n      $.each(validationMessage, function (i, message) {\n        self.validationController.showValidationMessage(message, focus, icon, itemAdditionalClass, type);\n      });\n    }\n    self.validationController.expandNotificationBox(autofocus);\n  },\n  /*\r\n     *   Public method to perform validations externally\r\n     */\n  clearValidationMessages: function clearValidationMessages(params) {\n    var self = this;\n\n    // First hide and clear validation box\n    if (self.validationController) {\n      self.validationController.clearValidationMessages(params);\n    }\n\n  },\n  /*\r\n     *   Add an error message to the form\r\n     */\n  addErrorMessage: function addErrorMessage(errorMessage) {\n    var self = this;\n\n    // Clean messages for mobile offline\n    if (bizagi.util.isNativeMobileDevice() && !this.allowOnlineActions())\n    this.clearValidationMessages();\n\n    if (self.validationController) {\n      self.validationController.showErrorMessage(errorMessage);\n      self.validationController.expandNotificationBox();\n    }\n  },\n  /*\r\n     *   Refresh the current form\r\n     */\n  refreshForm: function refreshForm(focus) {\n    var self = this;\n    var properties = self.properties;\n    var deferred = $.Deferred();\n\n    focus = focus || self.getFocus();\n\n    // Normalize new focus structure if not present\n    if (focus && !focus.id) {\n      focus = {\n        id: focus };\n\n    }\n\n    var options = {\n      idCase: self.params.idCase || \"\",\n      idWorkitem: self.params.idWorkitem || \"\",\n      idTask: self.params.idTask || \"\",\n      focus: focus,\n      selectedTabs: self.getSelectedTabs(),\n      selectedSection: self.getSelectedSection(),\n      xpathContext: properties.xpathContext,\n      idPageCache: properties.idPageCache,\n      isRefresh: true,\n      contextType: self.getContextType() || \"\",\n      action: self.getEndPointAction(),\n      idStartScope: self.properties.idStartScope || \"\" };\n\n\n    if (self.isOfflineRefreshWithEdition) {\n      options.isEdited = true;\n      self.isOfflineRefreshWithEdition = false;\n    }\n\n    // Notify the refresh event so the consumer takes the decision about what to do\n    self.startLoading();\n    $.when(self.triggerHandler(\"refresh\", options)).done(function () {\n      deferred.resolve();\n    }).fail(function () {\n      deferred.reject();\n    }).always(function () {\n      self.endLoading();\n    });\n\n    return deferred.promise();\n  },\n  /*\r\n     *   Get opened tabs configuration\r\n     */\n  getSelectedTabs: function getSelectedTabs() {\n    var self = this;\n    var tabContainers = self.getElementsByType(\"tab\");\n    var tabs = $.map(tabContainers, function (tabContainer) {\n      return { tab: tabContainer.properties.id, selected: tabContainer.activeTab };\n    });\n    var selectedTabs = {};\n    for (var i = 0, length = tabs.length; i < length; i++) {\n      selectedTabs[tabs[i].tab] = tabs[i].selected;\n    }\n    return selectedTabs;\n  },\n\n  /**\r\n      * Get the actual section selected\r\n      */\n  getSelectedSection: function getSelectedSection() {\n    var params = this.getParams() || {};\n    return params.selectedSection;\n  },\n  /*\r\n     *   Template method to get the buttons objects\r\n     */\n  getButtons: function getButtons() {\n  },\n  /*\r\n     *   Adds an action on the fly to process the submit on change\r\n     */\n  addSubmitAction: function addSubmitAction(xpath, action) {\n    var self = this;\n    self.actionController.processInternalSubmitAction(xpath, action);\n  },\n  /**\r\n      *   Adds an overlay to the form, and sets a waiting message\r\n      *\r\n      *   @argument {bool} delay Apply delay\r\n      */\n  startLoading: function startLoading() {\n    var self = this;\n    var waitingTemplate = self.renderFactory.getTemplate(\"form-waiting\");\n\n    if (self.waitingOverlay && self.waitingMessage)\n    return;\n\n    // This hack is only for desktop\n    if (!bizagi.util.isTabletDevice()) {\n      // Detect canvas parent with scroll\n      var isSharePoint = self.params.context === \"sharepoint\";\n      var canvas = self.params.canvas;\n      if (isSharePoint) {\n        canvas = bizagi.util.scrollTop(canvas);\n\n        if (!!!canvas.context) {\n          canvas = $(\"body\", $(document));\n        }\n      } else {\n        canvas = $(\"body\", $(document));\n      }\n\n      // Configures overlay\n      var size = this.getSize();\n      var position = this.getOffset();\n      if (size.height == $(window).height()) {\n        position.top = 0;\n      }\n      self.waitingOverlay = $('<div class=\"ui-widget-overlay\" />').appendTo(canvas);\n      self.waitingMessage = $.tmpl(waitingTemplate).appendTo(canvas);\n      self.waitingOverlay.css({\n        \"height\": \"100%\",\n        \"width\": \"100%\",\n        \"min-height\": size.height,\n        \"min-width\": size.width });\n\n      self.waitingMessage.css({\n        \"top\": position.top + Math.ceil((size.height - self.waitingMessage.outerHeight()) / 2) + \"px\",\n        \"left\": Math.ceil((size.width - self.waitingMessage.outerWidth()) / 2) + \"px\" });\n\n      canvas.css(\"position\", \"relative\");\n\n    } else {\n      // Configures overlay\n      self.waitingOverlay = $('<div class=\"ui-widget-overlay\" />').appendTo(\"body\", $(document));\n      self.waitingMessage = $.tmpl(waitingTemplate).appendTo(\"body\", $(document));\n    }\n  },\n  /*\r\n     *   Removes the overlay and restores the form edition\r\n     */\n  endLoading: function endLoading() {\n    var self = this;\n    if (self.waitingOverlay && self.waitingMessage) {\n      self.waitingOverlay.remove();\n      self.waitingMessage.remove();\n      self.waitingOverlay = null;\n      self.waitingMessage = null;\n\n      var canvas = self.params.canvas;\n\n      if (canvas != undefined)\n      canvas.css(\"position\", \"\");\n    }\n  },\n  /*\r\n     *   Get the focused render in the current request\r\n     */\n  getFocusedElement: function getFocusedElement() {\n    var self = this;\n    return self.focus;\n  },\n  /*\r\n     *   Set the focused render in the current request\r\n     */\n  setFocusedElement: function setFocusedElement(focus) {\n    var self = this;\n    self.focus = focus;\n  },\n  /*\r\n     *   Publish a global event that the facade will replicate\r\n     */\n  triggerGlobalHandler: function triggerGlobalHandler(eventType, data) {\n    return this.triggerHandler(\"globalHandler\", { eventType: eventType, data: data });\n  },\n  /*\r\n     *   Generic handler to attach fail workflow for some operations\r\n     */\n  failHandler: function failHandler(error) {\n    var self = this;\n\n    // Check if the error is in multiaction format\n    try {\n      error = JSON.parse(error);\n    } catch (e) {\n    }\n\n    //This double validation has the purpose to get the real error object from two different levels ( error.error or error.error.error )\n    if (error && error.length && error.length > 1) error = error[0];\n    if (error.error) error = error.error;\n    if (error.error) error = error.error;\n\n    // Handle normal messages\n    if (_typeof(error) == \"object\" && error.message) {\n      if (error.errorType === \"WaitForCompletionPlanException\" || error.errorType === \"InvalidPlanStateException\" || error.errorType === \"CustomMessageException\") {\n        error = bizagi.localization.getResource(error.message);\n      } else {\n        error = error.message;\n      }\n\n    } else if (typeof error == \"string\") {\n      // Parse to json\n      try {\n        var errorJson = JSON.parse(error);\n        if (errorJson.errorType === \"WaitForCompletionPlanException\" || errorJson.errorType === \"InvalidPlanStateException\" || error.errorType === \"CustomMessageException\") {\n          errorJson.message = bizagi.localization.getResource(errorJson.message);\n        }\n        error = errorJson.message;\n      } catch (e) {\n      }\n    }\n\n    // Workflow engine error, we gotta show it with error\n    self.addErrorMessage(error);\n    self.endLoading();\n  },\n  /* \r\n     *   Resizes the element\r\n     */\n  resize: function resize(size) {\n    // Just save the size, for reference\n    this.setSize(size);\n  },\n  /*\r\n     *   Sets the internal size for the form\r\n     */\n  setSize: function setSize(size) {\n    this.size = size;\n  },\n  /*\r\n     *   Gets the internal size for the form\r\n     */\n  getSize: function getSize() {\n    if (this.size) {\n      return this.size;\n    }\n    var canvas = this.params.canvas ? this.params.canvas : this.getFormContainer().container;\n\n    var canvasWidth = canvas.width();\n    var canvasHeight = canvas.height();\n\n    return {\n      width: canvasWidth,\n      height: canvasHeight };\n\n  },\n  getOffset: function getOffset() {\n    var canvas = this.getFormContainer().container;\n\n    return canvas.offset();\n  },\n\n  /**\r\n      * This function execute action to save all data of render, but\r\n      * the server service dont execute any rule on the server\r\n      */\n  submitData: function submitData(args) {\n    var self = this;\n\n    // Avoid the execution of server actions for mobile offline\n    if (bizagi.util.isNativeMobileDevice() && !this.allowOnlineActions())\n    return;\n\n    // Collect data\n    var data = self.collectRenderValuesForSubmit();\n\n    // Check is offline form        \n    var isOfflineForm = bizagi.util.isOfflineForm({ context: self });\n    if (isOfflineForm && self.properties && !self.properties.idPageCache) {\n      self.properties.idPageCache = \"\";\n    }\n\n    // Mark data collected as original values\n    $.each(data, function (key, value) {\n      var renders = self.getRenders(key);\n      $.each(renders, function (i, render) {\n        render.updateOriginalValue();\n      });\n    });\n\n    // Don't do anything if there is no data\n    if ($.isEmptyObject(data)) {\n      self.isOfflineRefreshWithEdition = false;\n      return;\n    }\n\n    var waitingDeferreds = [];\n    var deferredsToWait = null;\n    var executeSubmitData = null;\n\n    if (data && data.deferreds) {\n      deferredsToWait = $.when.apply($, data.deferreds);\n      waitingDeferreds.push(deferredsToWait);\n      delete data.deferreds;\n    }\n\n    // Call the service\n    if (isOfflineForm) {\n      executeSubmitData = self.dataService.submitData({\n        action: self.isRefreshingAfterSync ? \"submitdata\" : \"save\",\n        data: data,\n        xpathContext: self.properties.xpathContext,\n        contexttype: self.properties.contexttype || \"\",\n        isOfflineForm: isOfflineForm,\n        offlineType: self.params.offlineType,\n        idCase: self.params.idCase,\n        idWorkitem: self.params.idWorkitem });\n\n    } else {\n      executeSubmitData = self.dataService.multiaction().submitData({\n        action: \"SUBMITDATA\",\n        data: data,\n        idPageCache: self.properties.idPageCache,\n        xpathContext: self.properties.xpathContext,\n        contexttype: self.properties.contexttype || \"\" });\n\n    }\n\n    return $.when.apply($, waitingDeferreds).then(function () {\n      return $.when(executeSubmitData).fail(function (message) {\n        message = self.processFailMessage(message);\n      });\n    });\n  },\n\n  /**\r\n      * This function send a request to the server to execute a rule\r\n      */\n  executeRule: function executeRule(args) {\n    var self = this;\n    var properties = self.properties;\n    var xpathContext = args.xpathContext;\n    var deferred = $.Deferred();\n\n    // Concat inheritance context\n    if (properties.xpathContext !== \"\") {\n      xpathContext = xpathContext !== \"\" ? properties.xpathContext + \".\" + xpathContext : properties.xpathContext;\n    }\n\n    // Perform the service\n    $.when(self.dataService.multiaction().executeRule({\n      idPageCache: properties.idPageCache,\n      rule: args.rule,\n      xpathContext: xpathContext,\n      contexttype: self.properties.contexttype || \"\" })).\n    done(function (message) {\n      var type = message && message.type ? message.type : \"\";\n      var form = self.getFormContainer();\n\n      // Check for validation messages\n      self.getFormContainer().clearValidationMessages({ clearOnlyServer: true });\n\n      if ([\"validationMessages\", \"alertMessages\"].includes(type)) {\n        if (type === \"alertMessages\") {\n          bizagi.modalError && bizagi.modalError.show(message.messages.join(\"\\n\\n\"), 'workportal-general-word-information', false);\n        } else {\n          form.addValidationMessage.apply(self, [message.messages, undefined, undefined, undefined, false, \"serverMessage\"]);\n        }\n\n        deferred.reject(message);\n      } else {\n        deferred.resolve(message);\n      }\n    }).fail(function (message) {\n      message = self.processFailMessage(message);\n      deferred.reject(message);\n    });\n\n    return deferred.promise();\n  },\n\n  /**\r\n      * This function send a request to the server to execute an interface\r\n      */\n  executeInterface: function executeInterface(args) {\n    var self = this;\n    var properties = self.properties;\n    var xpathContext = args.xpathContext;\n\n    if (properties.xpathContext != \"\") {\n      // Concat inheritance context\n      xpathContext = xpathContext != \"\" ? properties.xpathContext + \".\" + xpathContext : properties.xpathContext;\n    }\n\n    // Perform the service\n    return $.when(self.dataService.multiaction().executeInterface({\n      idPageCache: properties.idPageCache,\n      \"interface\": args[\"interface\"],\n      xpathContext: xpathContext,\n      contexttype: self.properties.contexttype || \"\" })).\n    done(function (message) {\n      // Check for validation messages\n      self.getFormContainer().clearValidationMessages();\n      if (message && message.type == \"validationMessages\") {\n        self.getFormContainer().addValidationMessage(message.messages);\n      }\n\n    }).fail(function (message) {\n      message = self.processFailMessage(message);\n    });\n  },\n\n  /**\r\n      * This function send a request to the server to execute an SAP connector\r\n      */\n  executeSAPConnector: function executeSAPConnector(args) {\n    var self = this;\n    var properties = self.properties;\n    var xpathContext = args.xpathContext;\n\n    if (properties.xpathContext != \"\") {\n      // Concat inheritance context\n      xpathContext = xpathContext != \"\" ? properties.xpathContext + \".\" + xpathContext : properties.xpathContext;\n    }\n\n    // Perform the service\n    return $.when(self.dataService.multiaction().executeSAPConnector({\n      idPageCache: properties.idPageCache,\n      guidsap: args.guidsap,\n      xpathContext: xpathContext,\n      contexttype: self.properties.contexttype || \"\" })).\n    done(function (message) {\n      // Check for validation messages\n      self.getFormContainer().clearValidationMessages();\n      if (message && message.type == \"validationMessages\") {\n        self.getFormContainer().addValidationMessage(message.messages);\n      }\n\n    }).fail(function (message) {\n      message = self.processFailMessage(message);\n    });\n\n  },\n\n  /**\r\n      * This function send a request to the server to execute an Connector\r\n      */\n  executeConnector: function executeConnector(args) {\n    var self = this;\n    var properties = self.properties;\n    var xpathContext = args.xpathContext;\n\n    if (properties.xpathContext != \"\") {\n      // Concat inheritance context\n      xpathContext = xpathContext != \"\" ? properties.xpathContext + \".\" + xpathContext : properties.\n      xpathContext;\n    }\n\n    // Perform the service\n    return $.when(self.dataService.multiaction().executeConnector({\n      idPageCache: properties.idPageCache,\n      guidConnector: args.guidConnector,\n      xpathContext: xpathContext,\n      contexttype: self.properties.contexttype || \"\" })).\n    done(function (message) {\n      // Check for validation messages\n      self.getFormContainer().clearValidationMessages();\n      if (message && message.type == \"validationMessages\") {\n        self.getFormContainer().addValidationMessage(message.messages);\n      }\n\n    }).fail(function (message) {\n      message = self.processFailMessage(message);\n    });\n\n  },\n\n  /**\r\n      * This function send a request to the server to execute an pipeline\r\n      */\n  executePipeline: function executePipeline(args) {\n    var self = this;\n    var properties = self.properties;\n    var xpathContext = args.xpathContext;\n\n    if (properties.xpathContext != \"\") {\n      // Concat inheritance context\n      xpathContext = xpathContext != \"\" ? properties.xpathContext + \".\" + xpathContext : properties.xpathContext;\n    }\n\n    // Perform the service\n    return $.when(self.dataService.multiaction().executePipeline({\n      idPageCache: properties.idPageCache,\n      pipeline: args.pipeline,\n      xpathContext: xpathContext,\n      contexttype: self.properties.contexttype || \"\" })).\n    done(function (message) {\n      // Check for validation messages\n      self.getFormContainer().clearValidationMessages();\n      if (message && message.type == \"validationMessages\") {\n        self.getFormContainer().addValidationMessage(message.messages);\n      }\n\n    }).fail(function (message) {\n      message = self.processFailMessage(message);\n    });\n  },\n\n  /*\r\n     *   Re-binds pending actions that could not be set because the renders did not exist when the form loaded\r\n     */\n  refreshActions: function refreshActions(actions) {\n    var self = this;\n    self.actionController.refreshActions(actions);\n  },\n\n  /***/\n  tryToExecuteFunction: function tryToExecuteFunction(xpath) {\n    if (this.getMode() == \"execution\") {\n      this.actionController && this.actionController.tryToExecuteFunction(xpath);\n    }\n  },\n\n  /*\r\n     *   Re-binds pending actions that could not be set because the renders did not exist when the form loaded\r\n     */\n  removeActions: function removeActions() {\n    var self = this;\n    self.actionController.unbindActions();\n  },\n  /*\r\n     *   Iterate through all renders and collect the data to send, then update original values for each render\r\n     */\n  collectRenderValuesForSubmit: function collectRenderValuesForSubmit(data) {\n    var self = this;\n    data = data || {};\n\n    // Collect data\n    self.collectRenderValues(data);\n\n    // Mark data collected as original values\n    $.each(data, function (key, value) {\n      var renders = self.getRenders(key);\n      $.each(renders, function (i, render) {\n        render.updateOriginalValue();\n      });\n    });\n\n    return data;\n  },\n\n  /**\r\n      *\r\n      * @param params {data, bRefreshForm,properties}\r\n      * @returns {*}\r\n      */\n  internalSubmitOnChange: function internalSubmitOnChange(params) {\n    params = params || {};\n    var self = this;\n    var properties = params.properties;\n    var defer = new $.Deferred();\n    var data = params.data || {};\n    var bRefreshForm = typeof params.bRefreshForm != \"undefined\" ? params.bRefreshForm : true;\n    var notCollect = params.notCollect ? params.notCollect : undefined;\n\n    // Collect data\n    if (!(notCollect && !$.isEmptyObject(data))) {\n      self.collectRenderValuesForSubmit(data);\n    }\n\n    self.startLoading();\n\n    var deferredsToWait = null;\n    if (data.deferreds) {\n      deferredsToWait = $.when.apply($, data.deferreds);\n      delete data.deferreds;\n    }\n\n    $.when(deferredsToWait).then(function () {\n      // Submit the form\n      self.dataService.multiaction().submitData({\n        action: \"SUBMITONCHANGE\",\n        data: data,\n        idRender: properties.id,\n        xpath: properties.xpath,\n        xpathContext: self.properties.xpathContext,\n        idPageCache: properties.idPageCache,\n        contexttype: properties.contexttype }).\n      done(function (response) {\n        // Cancel previous multiactions and process property value\n        self.cancelPreviousRequest();\n        // After successfully response refresh the form\n        self.endLoading();\n        // If response message has error in validation, do not refresh the form\n        // and show validation message\n        if (response && response.type == \"validationMessages\") {\n          if (typeof self.clearValidationMessages == \"function\") {\n            self.clearValidationMessages();\n          }\n\n          self.addValidationMessage(response.messages);\n          defer.resolve();\n        } else if (bRefreshForm) {\n          var focusIdentifier = {\n            id: properties.id,\n            xpath: properties.xpath };\n\n          if (properties.idCase !== undefined) {\n            $.extend(focusIdentifier, {\n              idCaseObject: bizagi.cache.idCaseObject });\n\n          }\n          if (response.IdScope) {\n            self.properties.idStartScope = response.IdScope;\n          }\n          $.when(self.refreshForm(focusIdentifier)).done(function () {\n            defer.resolve();\n          }).fail(function () {\n            defer.resolve();\n          });\n        } else {\n          defer.resolve();\n        }\n      }).fail(function (message) {\n        self.endLoading();\n        var objMessage = _typeof(message) == 'object' ? message.responseText ? JSON.parse(message.responseText) : message : {};\n        var strMessage = objMessage.message || message;\n        var type = objMessage.type || \"error\";\n\n        // Omit processing when the ajax didn't process\n        if (![\"not-processed\", \"not-shown\"].includes(type)) {\n          // Clear previous validations\n          self.validationController.clearValidationMessages();\n\n          if (objMessage.type === \"alert\") {\n            self.validationController.showAlertMessage(strMessage);\n          } else {\n            self.validationController.showErrorMessage(strMessage);\n          }\n        }\n\n        defer.resolve();\n      });\n    });\n\n    return defer.promise();\n  },\n\n  cancelPreviousRequest: function cancelPreviousRequest() {\n    if (bizagi.multiactionConnection && bizagi.multiactionConnection.length) {\n      var length = bizagi.multiactionConnection.length;\n      var i = 0,connection;\n      for (; i < length; i++) {\n        connection = bizagi.multiactionConnection.pop();\n        if (connection && connection.abort) {\n          bizagi.showErrorAlertDialog = false;\n          connection.abort();\n        }\n      }\n    }\n  },\n\n  prepareCheckpointAction: function prepareCheckpointAction(buttonId) {\n    var self = this;\n\n    var checkpointAction = self.dataService.sendCheckpoint({\n      url: self.properties.checkpointUrl,\n      idRender: buttonId,\n      xpath: \"\",\n      xpathContext: self.properties.xpathContext,\n      idPageCache: self.properties.idPageCache,\n      prepare: true });\n\n\n    checkpointAction.tag = \"checkpoint\";\n\n    return checkpointAction;\n  },\n\n  prepareCommitAction: function prepareCommitAction(buttonId) {\n    var self = this;\n\n    var commitAction = self.dataService.commitLinkForm({\n      url: self.properties.commitUrl,\n      idRender: buttonId,\n      xpath: \"\",\n      xpathContext: self.properties.xpathContext,\n      idPageCache: self.properties.idPageCache,\n      prepare: true });\n\n\n    commitAction.tag = \"commit\";\n\n    return commitAction;\n  },\n\n  sendRollbackAction: function sendRollbackAction(buttonId) {\n    var self = this;\n\n    self.dataService.rollbackLinkForm({\n      url: self.properties.rollbackUrl,\n      idRender: buttonId,\n      xpath: \"\",\n      xpathContext: self.properties.xpathContext,\n      idPageCache: self.properties.idPageCache });\n\n  },\n\n  dispose: function dispose() {\n    var self = this;\n    self.endLoading();\n\n    var timeOutController = setTimeout(function () {\n      if (self.params) {\n        delete self.params.canvas;\n      }\n      delete self.params;\n      delete self.control;\n      if (self.validationController) {\n        self.unbind(\"rendervalidate\");\n        delete self.validationController;\n      }\n\n      if (self.actionController) {\n        self.actionController.unbindActions();\n        delete self.actionController;\n      }\n      clearTimeout(timeOutController);\n    }, bizagi.override.disposeTime || 50);\n\n    // Call base\n    self._super();\n  },\n  getButton: function getButton(guid) {\n    return $(\".ui-bizagi-button[data-id='\" + guid + \"']\", this.container);\n  },\n\n  getFloatingButton: function getFloatingButton(guid) {\n    return $(\"li[data-id='\" + guid + \"']\", this.container);\n  },\n\n  propagateExternalEvents: function propagateExternalEvents(evt) {\n    // Menu-Overflow\n    var $menuOverflow = $(\".bz-overflow-menu\");\n    if ($menuOverflow)\n    $(document).trigger('click.overflow');\n\n    // ECM with preview image\n    var zoomIsOpen = $(\".jquery-image-zoom\") && $(\".jquery-image-zoom\").css(\"display\") == \"block\";\n\n    if (zoomIsOpen)\n    $(\"div.jquery-image-zoom a\").click();\n  },\n\n  getButtonAction: function getButtonAction(action) {\n    return this.allowValidateAndSaveAction && action === \"validate\" ? \"save\" : action;\n  },\n\n  /***/\n  isConnected: function isConnected() {\n    return true;\n  },\n\n  /**\r\n      * Add handlers to network management\r\n      */\n  configureNetworkHandlers: function configureNetworkHandlers() {\n    var self = this;\n    self.online = bizagi.util.isConnected();\n    if (self.isOfflineForm && bizagi.util.isMobileDevice() && (\"\" + BIZAGI_ENVIRONMENT).toLowerCase() === \"debug\") {\n      self.online = self.getParams().online;\n      console.log(\"CONNECTED: \", self.online);\n    }\n\n    // Update the online status based on connectivity\n    if (bizagi.util.isNativeMobileDevice() || bizagi.util.isMobileDevice() && (\"\" + BIZAGI_ENVIRONMENT).toLowerCase() === \"debug\") {\n      $(document).off(\"online.form\");\n      $(document).on(\"online.form\", this.handleConnectionChange.bind(self));\n\n      $(document).off(\"offline.form\");\n      $(document).on(\"offline.form\", this.handleConnectionChange.bind(self));\n\n      //Connection gained with form opened\n      $(document).off(\"offline-notify-form-sync-event\");\n      $(document).on(\"offline-notify-form-sync-event\", this.handleOfflineSyncEvent.bind(self));\n    }\n  },\n\n  /**\r\n      * Event handler\r\n      * @param event\r\n      */\n  handleConnectionChange: function handleConnectionChange(event) {\n    var form = this.getFormContainer();\n    if (bizagi.util.isMobileDevice() && (\"\" + BIZAGI_ENVIRONMENT).toLowerCase() === \"debug\") {\n      this.online = event.type === \"online\";\n    } else {\n      this.online = bizagi.util.isConnected();\n    }\n\n    // You lost connection.\n    if (event.type === \"offline\") {\n      form.triggerHandler(\"offlineForm\");\n    }\n\n    // You are now back online.\n    if (event.type === \"online\") {\n      form.triggerHandler(\"onlineForm\");\n    }\n  },\n\n  /**\r\n      * Push successful hanlder, refresh form and copy current work\r\n      */\n  handleOfflineSyncEvent: function handleOfflineSyncEvent(event, params) {\n    var self = this;\n    var formParams = self.params || {};\n    if (formParams.hasSyncError) {\n      return;\n    }\n    var offlineFormId = formParams.idCase + \"-\" + formParams.idWorkitem;\n    switch (params.type) {\n      case \"download-form-success\":\n        /**\r\n                                     * 1. Store current data in offline submit\r\n                                     * 2. Refresh form\r\n                                     * 3. Merge data using offline isEdited method\r\n                                     */\n        var paramsId = params.idCase + \"-\" + params.idWorkitem;\n        if (offlineFormId === paramsId) {\n          console.log(\"Form downloaded successfully. It will be refreshed\", params);\n\n          $.when(self.dataService.database.validateLocalDataForTaskExists(paramsId).then(function (dataResult) {\n            if (dataResult === true) {\n              self.isOfflineRefreshWithEdition = true;\n            }\n\n            $.when(self.refreshForm(null, false)).then(function () {\n              applySyncLoader(false);\n            });\n          }));\n        }\n        break;\n      case \"push-tasks-started\":\n        if (params.tasks != undefined && params.tasks[offlineFormId]) {\n          applySyncLoader(true);\n        }\n        break;\n      case \"push-tasks-error\":\n        applySyncLoader(false);\n        if (self.validationController != undefined) {\n          self.validationController.clearValidationMessages();\n          self.validationController.showErrorMessage(params.message);\n        }\n        break;\n      case \"fetch-tasks-started\":\n        if (params.tasks != undefined && params.tasks[offlineFormId]) {\n          applySyncLoader(true);\n        }\n        break;\n      case \"download-finished\":{\n          applySyncLoader(false);\n          break;\n        }\n      case \"download-error\":\n        applySyncLoader(false);\n        break;\n      default:\n        console.warn(\"Event hast not implementation in bizagi.rendering.form - handleOfflineSyncEvent\", params.type, params);\n        break;}\n\n\n    function applySyncLoader(isStart) {\n      var loaders = 3;\n      var proceed = false;\n      if (isStart) {\n        proceed = !(self.isSyncLoaderRunning === true);\n      } else\n      {\n        proceed = self.isSyncLoaderRunning === true;\n      }\n      if (proceed) {\n        self.isSyncLoaderRunning = isStart;\n        for (var loaderIndex = 0; loaderIndex < loaders; loaderIndex++) {\n          if (isStart) {\n            bizagi.loading.start();\n          } else\n          {\n            bizagi.loading.stop();\n          }\n        }\n      }\n    }\n  },\n\n  /**\r\n      * Check if allow to call the button actions\r\n      * @returns {boolean|*}\r\n      */\n  allowOnlineActions: function allowOnlineActions() {\n    if (typeof this.online === \"undefined\") return true;\n    return this.online || !this.online && this.isOfflineForm;\n  },\n\n  /**\r\n      * Method to process button actions in the form\r\n      * @param ordinal\r\n      */\n  processQuickButton: function processQuickButton(ordinal) {\n    var self = this;\n    var buttonProperties = self.buttons.find(function (btn) {\n      return btn.ordinal == ordinal;\n    });\n\n    if (buttonProperties) {\n\n      self.startLoading();\n\n      self.lastActionButton = buttonProperties;\n      if (buttonProperties.action === \"next\") {\n        buttonProperties.routingDisabled = self.isRoutingDisabled;\n      }\n\n      // Execute button - QAF-1418 - add setTimeout\n      setTimeout(function () {\n        $.when(self.processButton(buttonProperties)).always(function () {\n          self.processDefer = undefined;\n          self.endLoading();\n        });\n      }, 100);\n\n    }\n\n  },\n\n  /**\r\n      * Check if quick actions are configured\r\n      * @param data\r\n      * @param isEnable\r\n      * @returns {boolean}\r\n      */\n  hasQuickActions: function hasQuickActions(data, isEnable) {\n\n    if (!isEnable) return false;\n\n    return (data.buttons || []).some(function (item) {\n      var button = item.button.properties;\n      return button && button.type === \"quickactions\";\n    });\n\n  },\n\n  /**\r\n      * Perform validation container\r\n      * @param form\r\n      * @param mainForm\r\n      * @returns {*}\r\n      */\n  getValidationsContainer: function getValidationsContainer(mainForm) {\n    var form = this;\n    var formContainer = typeof mainForm !== \"undefined\" ? mainForm : form;\n\n    return formContainer.container;\n\n  },\n\n  /**\r\n      * Return if exist confirmation user and the message\r\n      * @param {*} formProperties \r\n      * @param {*} buttonProperties \r\n      */\n  getConfirmationStatus: function getConfirmationStatus(formProperties, buttonProperties) {\n    var hasButtonsConfirmation = bizagi.util.parseBoolean(buttonProperties.needsUserConfirmation) || false;\n    var buttonConfirmationMsg = buttonProperties.userConfirmationMessage || \"\";\n\n    var hasFormConfirmation = bizagi.util.parseBoolean(formProperties.needsUserConfirmation) && bizagi.util.parseBoolean(buttonProperties.routing);\n    var formConfirmationMsg = formProperties.userConfirmationMessage || \"\";\n\n    var messageConfirmation = hasButtonsConfirmation ? buttonConfirmationMsg : formConfirmationMsg;\n\n    return {\n      hasConfirmation: hasButtonsConfirmation || hasFormConfirmation,\n      message: messageConfirmation };\n\n  },\n\n  saveWorkInProgress: function saveWorkInProgress() {\n    var self = this;\n    var data = self.collectRenderValuesForSubmit();\n    if (!bizagi.util.isEmpty(data)) {\n      return self.dataService.submitData({\n        action: 'submitdata',\n        data: data,\n        xpathContext: self.properties.xpathContext,\n        idPageCache: self.properties.idPageCache,\n        idForm: self.properties.id,\n        prepare: true,\n        idCase: self.params.idCase,\n        idWorkitem: self.params.idWorkitem,\n        isOfflineForm: self.isOfflineForm || false,\n        offlineType: self.params.offlineType || \"\",\n        actions: [] });\n\n    } else {\n      return $.Deferred().resolve(undefined).promise();\n    }\n  },\n\n  /**\r\n      * Check if it is a start form\r\n      * @returns {*|boolean}\r\n      */\n  isStartForm: function isStartForm() {\n    var form = this.getFormContainer();\n    var formType = form && form.properties && form.properties.formtype || \"\";\n\n    return /startform/i.test(formType);\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /*\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: Bizagi Render Class\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: UI Forms Team\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This script will define a base render class with common stuff related to all renders\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\nbizagi.rendering.element.extend(\"bizagi.rendering.render\", {\n  postRenderTimeout: 0,\n  maxRendersPerScreen: 50,\n  rendersExecuted: 0,\n  renderOptimization: false,\n  TYPE_QUERY_FORM: \"queryForm\",\n  startOptimization: function startOptimization() {\n    bizagi.rendering.render.postRenderTimeout = 500;\n    bizagi.rendering.render.rendersExecuted = 0;\n    // Cancelled optimization temporally, because its on experimental stage\n    bizagi.rendering.render.renderOptimization = false;\n  },\n  stopOptimization: function stopOptimization() {\n    bizagi.rendering.render.postRenderTimeout = 0;\n    bizagi.rendering.render.rendersExecuted = 0;\n    bizagi.rendering.render.renderOptimization = false;\n  } },\n{\n  /*\r\n  *   Update or init the element data\r\n  */\n  initializeData: function initializeData(data) {\n    var self = this;\n\n    // Call base\n    self._super(data);\n\n    var form = self.getFormContainer();\n\n    // Fill default properties\n    var properties = self.properties;\n\n    properties.included = typeof properties.included != \"undefined\" ? bizagi.util.parseBoolean(properties.included) : false;\n    properties.uniqueId = Math.ceil(Math.random() * 1000000);\n    properties.displayName = properties.displayName || \"\";\n    properties.editable = typeof properties.editable != \"undefined\" ? bizagi.util.parseBoolean(properties.editable) : true;\n    properties.visible = typeof properties.visible != \"undefined\" ? bizagi.util.parseBoolean(properties.visible) : true;\n    properties.includedInResult = typeof properties.includedInResult != \"undefined\" ? bizagi.util.parseBoolean(properties.includedInResult) : false;\n\n    var renderType = bizagi.util.normalizeType(properties.type);\n    if (/^hidden$/i.test(renderType) || /^queryHidden$/i.test(renderType)) {\n      properties.visible = false;\n    }\n\n    properties.required = typeof properties.required != \"undefined\" ? bizagi.util.parseBoolean(properties.required) : false;\n    properties.submitOnChange = typeof properties.submitOnChange != \"undefined\" ? bizagi.util.parseBoolean(properties.submitOnChange) : false;\n    properties.maxLength = properties.maxLength || 0;\n    properties.helpText = bizagi.util.trim(properties.helpText) || \"\";\n    properties.textFormat = properties.textFormat || {};\n    properties.valueFormat = properties.valueFormat || {};\n    properties.isHidden = typeof properties.isHidden != \"undefined\" ? bizagi.util.parseBoolean(properties.isHidden) : false;\n    properties.visible = properties.isHidden ? false : properties.visible;\n    //BUG 26867 -    Verify if the control was editable in sometime. Apply only in the column grid (canBeSent). \n    //Change the value property on changeEditability, changeEditabilityCellControl\n    properties.editabilityEnabled = false;\n\n    // Old color and background color\n    if (properties.color) {\n      properties.textFormat.color = properties.color;\n    }\n\n    if (properties.backgroundColor) {\n      properties.textFormat.backgroundColor = properties.backgroundColor;\n    }\n\n    // Non-editable fields cannot be required\n    properties.required = properties.editable ? properties.required : false;\n\n    // Override orientation from parent if not set\n    properties.orientation = properties.orientation || \"auto\";\n\n    // Check contexttype\n    properties.contexttype = form.params && form.params.data && form.params.data.contextType ? form.params.data.contextType : \"\";\n\n    // Save original properties\n    self.originalProperties = {\n      textFormat: {\n        color: properties.textFormat.color,\n        backgroundColor: properties.textFormat.backgroundColor },\n\n      valueFormat: {\n        color: properties.textFormat.color,\n        backgroundColor: properties.textFormat.backgroundColor },\n\n      visible: properties.visible,\n      editable: properties.editable,\n      required: properties.required,\n      labelAlign: properties.labelAlign,\n      valueAlign: properties.valueAlign };\n\n\n    // Create value property\n    self.value = typeof properties.value !== \"undefined\" ? properties.value : null;\n\n    // Register original value property\n    self.properties.originalValue = self.value;\n    self.properties.previousValue = self.value;\n\n    // Calculate layout properties\n    self.calculateInitialLayoutProperties();\n  },\n  /*\r\n     *   Calculate aligns, display types, rtl and widths\r\n     */\n  calculateInitialLayoutProperties: function calculateInitialLayoutProperties() {\n    var self = this;\n    var properties = self.properties;\n\n    // Set visual defaults\n    properties.displayType = properties.displayType || \"normal\";\n    properties.labelAlign = properties.labelAlign || self.getDefaultLabelAlign(properties.displayType);\n    properties.valueAlign = properties.valueAlign || self.getDefaultValueAlign(properties.displayType);\n\n    // Check rtl orientation\n    if (properties.orientation === \"rtl\") {\n      properties.labelAlign = self.getRTLAlign(properties.labelAlign);\n      properties.valueAlign = self.getRTLAlign(properties.valueAlign);\n    }\n\n    // Calculate render with\n    var renderWidth = self.calculateRenderWidth(properties.labelWidth, properties.valueWidth, properties.displayType);\n    properties.labelWidth = renderWidth.label;\n    properties.valueWidth = renderWidth.control;\n\n    if (properties.layoutType === \"percentage\") {\n      properties.valueWidth = renderWidth.control;\n    }\n\n    if (properties.labelWidth == 0) {\n      properties.displayType = \"value\";\n      properties.valueWidth = renderWidth.control;\n    }\n\n    if (properties.valueWidth == 0) {\n      properties.displayType = \"label\";\n    }\n\n    if (properties.type === \"userfield\") {\n      if ([\"both\", \"normal\", \"reversed\"].includes(properties.displayType)) {\n        properties.valueWidth = properties.valueWidth || 50;\n        properties.labelWidth = properties.labelWidth || 50;\n      } else if (properties.displayType === \"vertical\") {\n        properties.valueWidth = 100;\n        properties.labelWidth = 100;\n      } else if (properties.displayType === \"label\") {\n        properties.valueWidth = 0;\n        properties.labelWidth = 100;\n      } else {\n        properties.valueWidth = 100;\n        properties.labelWidth = 0;\n      }\n    }\n  },\n  /*\r\n     *   Returns the element type\r\n     */\n  getElementType: function getElementType() {\n    return bizagi.rendering.element.ELEMENT_TYPE_RENDER;\n  },\n  /*\r\n     *   Returns the html templated element\r\n     */\n  render: function render(renderTemplateName) {\n    return this.renderElement(renderTemplateName);\n  },\n  /*\r\n     *   Returns the html templated element\r\n     */\n  renderElement: function renderElement(renderTemplateName) {\n    var self = this;\n    var properties = self.properties;\n    var form = self.getFormContainer();\n    // Start rendering deferred\n    self.renderingDeferred = new $.Deferred();\n\n    // Set render template\n    renderTemplateName = renderTemplateName || \"render\";\n    var renderTemplate = self.renderFactory.getTemplate(renderTemplateName);\n\n    // Resolve render label\n    var label = properties.displayName;\n    if (typeof label == \"string\") {\n      // Replace line breaks for html line breaks\n      label = bizagi.util.encodeString(label);\n    }\n\n    var isFullRender = bizagi.util.detectDevice() !== \"desktop\" && (properties.type === \"association\" || properties.type === \"uploadecm\" || (properties.type === \"actionLauncher\" || properties.type === \"polymorphicLauncher\") && bizagi.util.isTabletDevice() || properties.type === \"grid\" && !bizagi.util.isTabletDevice());\n    var labelWidth = parseFloat(properties.labelWidth);\n\n    // Render template\n    var html = $.fasttmpl(renderTemplate, {\n      label: label,\n      helpText: properties.helpText,\n      editable: properties.editable,\n      isExtendedText: properties.type == \"text\" && properties.isExtended,\n      orientation: properties.orientation,\n      uniqueId: properties.uniqueId,\n      id: properties.id,\n      xpath: properties.xpath,\n      tag: properties.tag,\n      displayType: properties.displayType,\n      displayOptionClass: self.getDisplayOptionClass(properties.displayType),\n      labelAlignClass: self.getAlignClass(properties.labelAlign),\n      valueAlignClass: self.getAlignClass(properties.valueAlign),\n      flexAlignClass: bizagi.util.mapAlignClassName(properties.columnAlign),\n      labelWidth: labelWidth,\n      stringLabelWidth: labelWidth + (properties.layoutType == 'pixels' ? 'px' : '%'),\n      valueWidth: parseFloat(properties.valueWidth),\n      stringValueWidth: parseFloat(properties.valueWidth) + (properties.layoutType == 'pixels' ? 'px' : '%'),\n      layoutType: properties.layoutType,\n      isDesign: self.getMode() === \"design\",\n      messageValidation: properties.messageValidation,\n      printVersion: form.params.printversion,\n      cssClass: properties.cssclass || \"\",\n      includedInResult: properties.includedInResult,\n      included: properties.included,\n      type: properties.type,\n      showFullRender: isFullRender,\n      required: properties.required });\n\n\n    // Render internal control html\n    var result = self.internalRenderControl();\n    if (!result) {\n      result = \"\";\n    }\n\n    // Check if this is an async element or not\n    var async = _typeof(result) === \"object\" && result.done;\n    if (!async) {\n      html = self.replaceControlHtml(html, result);\n\n    } else {\n      if (result.state() === \"resolved\") {\n        // Fetch resolved result\n        html = self.replaceControlHtml(html, self.resolveResult(result));\n        self.asyncRenderDeferred = null;\n      } else {\n        // Wait for result\n        self.asyncRenderDeferred = result;\n        html = self.replaceControlHtml(html, \"\");\n      }\n    }\n\n    return html;\n  },\n  /*\r\n     *   Returns the resolved result from a promise when the promise has been executed already\r\n     */\n  resolveResult: function resolveResult(promise) {\n    return bizagi.resolveResult(promise);\n  },\n  /*\r\n     *   Check if the jquery element is ready or not\r\n     */\n  isRendered: function isRendered() {\n    var self = this;\n    if (!self.renderingDeferred) {\n      return false;\n    }\n    return self.renderingDeferred.promise();\n  },\n  /*\r\n     *   Renders the control html\r\n     */\n  internalRenderControl: function internalRenderControl() {\n    var self = this;\n    var properties = self.properties;\n    self.control = null;\n\n    if (self.renderFactory.printVersion) {\n      properties.editable = false;\n      return self.renderControl();\n    } else if (properties.editable) {\n      return self.renderControl();\n    }\n\n    return self.renderReadOnly();\n  },\n  /*\r\n     *   Template method to implement in each device to customize each render after processed\r\n     */\n  postRenderElement: function postRenderElement(element) {\n    var self = this;\n    var properties = self.properties;\n\n    // Set element variable\n    self.element = element;\n\n    if (properties.submitOnChange)\n    self.configureSubmitOnChange();\n\n    // Process internal layout\n    isLabelFormat = true;\n\n    var executePostRender = function executePostRender(_element) {\n      if (bizagi.rendering.render.renderOptimization &&\n      bizagi.rendering.render.rendersExecuted > bizagi.rendering.render.maxRendersPerScreen) {\n\n        // Execute post-render control\n        var timeOutRender = setTimeout(function () {\n          self.internalPostRender(_element);\n          bizagi.rendering.render.postRenderTimeout += 50;\n          clearTimeout(timeOutRender);\n        }, bizagi.rendering.render.postRenderTimeout);\n\n      } else {\n        self.internalPostRender(_element);\n      }\n      bizagi.rendering.render.rendersExecuted++;\n    };\n\n    if (self.asyncRenderDeferred) {\n      // Wait for async result\n      $.when(self.asyncRenderDeferred).\n      done(function (html) {\n        var control = self.getControl();\n        if (typeof self.emptyControlByAsyncRenderDeferred == \"function\") {\n          self.emptyControlByAsyncRenderDeferred();\n        }\n        control.append(html);\n\n        // Execute post-render control\n        executePostRender(element);\n        self.processLayout(!isLabelFormat, self.properties.valueFormat || {});\n      });\n    } else {\n      // Execute post-render control\n      executePostRender(element);\n    }\n  },\n  /*\r\n     *   Executes the post render handlers\r\n     */\n  internalPostRender: function internalPostRender(element) {\n    var self = this;\n    var properties = self.properties;\n    var mode = self.getMode();\n\n    self.control = self.getControl();\n\n    // Resolve rendering deferred\n    if (self.renderingDeferred) {\n      self.renderingDeferred.resolve();\n    }\n\n    // Execute post-renders\n    if (properties.editable) {\n      // Post-render editable version\n      if (self.renderFactory.printVersion && self.postRenderPrintVersion) {\n        self.postRenderPrintVersion();\n      } else {\n        self.postRender();\n      }\n\n    } else {\n      // Post-render readonly version\n      self.postRenderReadOnly(element);\n    }\n\n    // Perform execution mode methods\n    if (mode == \"execution\") {\n      self.performExecutionModeMethods();\n    } else {\n      self.performDesignModeMethods();\n    }\n\n    self.processLayout(isLabelFormat, self.properties.textFormat || {});\n    self.processLayout(!isLabelFormat, self.properties.valueFormat || {});\n  },\n  /*\r\n     *   Execute runtime only methods\r\n     */\n  performExecutionModeMethods: function performExecutionModeMethods() {\n    var self = this;\n    var properties = self.properties;\n    if (self.getFormType() == self.Class.TYPE_QUERY_FORM) {\n      self.configureHandlersQueryForm();\n    }\n\n    // Apply handlers\n    if (properties.editable) {\n      self.configureHandlers();\n    } else {\n      self.configureHandlersReadOnly();\n    }\n\n    // Set initial value\n    self.internalSetInitialValue();\n  },\n  /**\r\n      * Execute design only methods\r\n      */\n  performDesignModeMethods: function performDesignModeMethods() {\n    var self = this;\n\n    // Execute custom code for each render\n    self.configureDesignView();\n\n    // Set initial value\n    self.internalSetInitialValue();\n  },\n  /*\r\n     *   Replaces a {{control}} string in the specified element\r\n     */\n  replaceControlHtml: function replaceControlHtml(html, replace) {\n    html = html || \"\";\n    replace = replace || \"\";\n    return html.replaceFirstWithoutPatterns(\"{{control}}\", replace);\n  },\n  /*\r\n     *   Return the rendered element\r\n     */\n  getRenderedElement: function getRenderedElement() {\n    if (bizagi.util.isEmpty(this.element)) {\n      bizagi.log(\" render hasn't been rendered!\", this, \"error\");\n    }\n\n    return this.element;\n  },\n  /*\r\n     *   Sets the initial value for the renders\r\n     */\n  internalSetInitialValue: function internalSetInitialValue() {\n    var self = this;\n    var properties = self.properties;\n    self.internalSetInitialValueFlag = true;\n\n    // Set the initial value\n    if (properties.editable) {\n      if (!bizagi.util.isEmpty(self.value)) {\n        self.setDisplayValue(self.value);\n      }\n    } else {\n      if (!bizagi.util.isEmpty(self.value)) {\n        self.setDisplayValue(self.value);\n      }\n    }\n    self.internalSetInitialValueFlag = false;\n  },\n  /*\r\n     * Public method to determine if a value is valid or not\r\n     */\n  isValid: function isValid(invalidElements) {\n    var self = this;\n    var properties = self.properties;\n    var message;\n    var inlineAdd = self.grid && self.grid.properties && self.grid.properties.inlineAdd;\n\n    // Don't check non-editable renders\n    if (bizagi.util.parseBoolean(properties.visible) === false) {\n      return true;\n    }\n    // Don't check non-editable renders\n    if (bizagi.util.parseBoolean(properties.editable) === false && !inlineAdd) {\n      return true;\n    }\n\n    // Clear error message\n    self.setValidationMessage(\"\");\n\n    // Check required\n    if (bizagi.util.parseBoolean(properties.required)) {\n      var form = self.getFormContainer();\n      var hasValue = false;\n      var renders = self.grid ? [self] : form.getRenders(properties.xpath);\n      var isQueryForm = /^query/i.test(properties.type);\n\n      renders.filter(function (render) {\n        return render.properties.id == properties.id;\n      }).forEach(function (render) {\n        if (render.hasValue() && (render.properties.editable || inlineAdd)) {\n          hasValue = true;\n          return false;\n        }\n      });\n\n      if (!hasValue && !self.properties.isClone) {\n        message = self.getResource(\"render-required-text\").replaceAll(\"#label#\", properties.displayName);\n        var messageData = { xpath: properties.xpath, message: message, id: properties.id };\n\n        if (isQueryForm) {\n          messageData = $.extend({}, messageData, {\n            id: properties.id,\n            isQuery: isQueryForm });\n\n        }\n\n        invalidElements.push(messageData);\n        return false;\n      }\n    }\n\n    // Check retypes\n    if (properties.retype == \"duplicate\") {\n      // Don't process cloned renders, just originals\n      if (self.cloneRender) {\n        if (self.cloneRender.getValue() != self.getValue()) {\n          message = self.getResource(\"render-text-retype-error\");\n          invalidElements.push({ xpath: properties.xpath, message: message });\n          return false;\n        }\n      }\n    } else if (properties.retype == \"double\") {\n      var control = $(\"input\", self.element);\n\n      //Waits until the control has the second value written\n      if (control && control.data(\"oldValue\")) {\n        if (control.val() === \"\") {\n\n          message = self.getResource(\"render-text-retype-error\");\n          invalidElements.push({\n            xpath: properties.xpath,\n            message: message });\n\n\n          return false;\n        } else if (control.val() != control.data(\"oldValue\")) {\n          message = self.getResource(\"render-text-retype-error\");\n          invalidElements.push({ xpath: properties.xpath, message: message });\n\n          return false;\n        }\n      }\n    }\n\n    // Check maxlength\n    var columnEditable = self.grid && self.grid.getColumn ? self.grid.getColumn(self.properties.xpath).properties.editable : true;\n    if (properties.type !== \"userPassword\" && properties.maxLength !== undefined && properties.maxLength > 0 && bizagi.util.isNumeric(properties.maxLength)) {\n      if (columnEditable || !columnEditable && self.controlValueIsChanged()) {\n        var maxLength = new Number(properties.maxLength);\n        var value = self.getValue();\n\n        if (value && value.toString().length > maxLength) {\n          message = self.getResource(\"render-text-maxLength-error\").replaceAll(\"#maxLength#\", maxLength);\n          invalidElements.push({ xpath: properties.xpath, message: message });\n          return false;\n        }\n      }\n    }\n\n    return true;\n  },\n\n  /*\r\n     *   Check if a render has no value for required validation\r\n     */\n  hasValue: function hasValue() {\n    var self = this;\n    // Next line decides if only spaces are accepted as valid texts or not. Anyway the spaces are still saved as self.value has not changed\n    var value = self.getValue();\n\n    if (value && self.properties.type === \"text\") {\n      value = typeof value === \"string\" ? value.trim() : value;\n    }\n\n    return !bizagi.util.isEmpty(value);\n  },\n  /*\r\n     *   Template method to implement in each device to customize each render after processed\r\n     */\n  postRender: function postRender() {\n  },\n  /*\r\n     *   Template method to implement in each device to customize each render after processed in read-only mode\r\n     */\n  postRenderReadOnly: function postRenderReadOnly() {\n  },\n  /*\r\n     *   Template method to implement in each device to customize the render's behaviour to add handlers\r\n     */\n  configureHandlers: function configureHandlers() {\n  },\n  /*\r\n     *   Template method to implement in each device to customize the render's behaviour to add handlers when the control is readonly\r\n     */\n  configureHandlersReadOnly: function configureHandlersReadOnly() {\n  },\n  /*\r\n     *   Template method to implement in each device to customize the render's behaviour when rendering in design mode\r\n     */\n  configureDesignView: function configureDesignView() {\n  },\n  /*\r\n     *   Method to process the render the layout\r\n     */\n  processLayout: function processLayout(isLabelFormat, format) {\n    var self = this;\n    var properties = self.properties;\n\n    if (self.getControl() == null) return;\n\n    // Set customizations\n    format = format || {};\n\n    if (format.color) {\n      self.changeColor(format.color, isLabelFormat);\n    }\n    if (format.background) {\n      self.changeBackgroundColor(format.background);\n    }\n    //if bold is true in modeler, we receive nothing in execution (!formal.bold)\n    if (format.bold || !format.bold || !isLabelFormat) {\n      self.changeFontBold(format.bold, isLabelFormat);\n    }\n    if (format.italic) {\n      self.changeFontItalic(format.italic, isLabelFormat);\n    }\n    if (format.underline) {\n      self.changeFontUnderline(format.underline, isLabelFormat);\n    }\n    if (format.strikethru) {\n      self.changeFontStrikethru(format.strikethru, isLabelFormat);\n    }\n    if (format.size) {\n      self.changeFontSize(format.size, isLabelFormat);\n    }\n\n    // Set required and visiblity\n    properties.required = properties.required != undefined ? bizagi.util.parseBoolean(properties.required) : false;\n    var visible = properties.visible != undefined ? bizagi.util.parseBoolean(properties.visible) : true;\n    if (properties.required) {\n      self.changeRequired(properties.required);\n    }\n    if (!visible) {\n      if (self.grid) {\n        self.changeCellVisibility(visible);\n      } else {\n        self.changeVisibility(visible);\n      }\n    }\n  },\n  /*\r\n     *   Sets the internal value\r\n     */\n  setValue: function setValue(value, triggerEvents) {\n    var self = this;\n    triggerEvents = triggerEvents !== undefined ? triggerEvents : true;\n\n    if (!bizagi.util.identicalObjects(value, self.value)) {\n      // set previous value\n      self.properties.previousValue = self.properties.originalValue = self.value;\n\n      // Change internal value\n      self.value = self.properties.value = value;\n      if (self.properties.required && self.getMode() == \"execution\") {\n\n        if (self.checkRequired([])) {\n          self.changeRequiredLabel(false);\n        } else {\n          self.changeRequiredLabel(true);\n        }\n      }\n\n      // Trigger events\n      if (triggerEvents && !self.internalSetInitialValueFlag) {\n        self.triggerRenderChange();\n        self.triggerRenderValidate();\n      }\n    }\n  },\n\n  checkRequired: function checkRequired(invalidElements) {\n    var self = this;\n    var properties = self.properties;\n\n    if (bizagi.util.parseBoolean(properties.required)) {\n      if (!self.hasValue()) {\n        message = self.getResource(\"render-required-text\").replaceAll(\"#label#\", properties.displayName);\n        invalidElements.push({\n          xpath: properties.xpath,\n          message: message });\n\n        return false;\n      }\n    }\n    return true;\n  },\n\n  validateInputRetype: function validateInputRetype() {\n    var self = this;\n    if (self.properties.retype && self.cloneRender) {\n      return self.getValue() == self.cloneRender.getValue();\n    }\n    return true;\n  },\n\n  /*\r\n     *   Triggers the render change event\r\n     */\n  triggerRenderChange: function triggerRenderChange(params) {\n    var self = this;\n    params = params || {};\n    params.changed = params.changed !== undefined ? params.changed : true;\n    self.triggerHandler(\"renderchange\", { render: self, changed: params.changed });\n  },\n  /*\r\n     *   Triggers the render validate event\r\n     */\n  triggerRenderValidate: function triggerRenderValidate() {\n    var self = this;\n    self.triggerHandler(\"rendervalidate\", { render: self });\n  },\n  /*\r\n     *   Sets the value in the rendered control\r\n     */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n    var control = self.getControl();\n\n    // Set internal value\n    self.setValue(value, false);\n\n    if (!self.properties.editable && (self.properties.display !== \"check\" || self.properties.display === \"check\" && bizagi.override.enableCheck === true)) {\n      // Render as simple value\n      var displayValue = self.getDisplayValue(value);\n      if (typeof displayValue == \"string\" || typeof displayValue == \"number\") {\n        displayValue = bizagi.util.sanitizeHTML(displayValue);\n        $(control).html(\"<label class='readonly-control'>\" + displayValue + \"</label>\");\n      }\n    }\n  },\n  /*\r\n     *   Returns the internal value\r\n     */\n  getValue: function getValue() {\n    return this.value;\n  },\n  /*\r\n     *   Returns the value to display, ex. non-editable renders\r\n     */\n  getDisplayValue: function getDisplayValue() {\n    return this.getValue();\n  },\n  /*\r\n     *   Template method to get the label element\r\n     */\n  getLabel: function getLabel() {\n    bizagi.util.mustImplement(\"getLabel\");\n  },\n  /*\r\n     *   Template method to get the control element\r\n     */\n  getControl: function getControl() {\n    bizagi.util.mustImplement(\"getControl\");\n  },\n  /*\r\n     *   Template method to get the control filler element\r\n     */\n  getControlFiller: function getControlFiller() {\n    bizagi.util.mustImplement(\"getControlFiller\");\n  },\n  /*\r\n     *   Template method to implement in each children to customize each control\r\n     */\n  renderControl: function renderControl() {\n  },\n  /*\r\n     *   Adds a validation message to the render\r\n     */\n  setValidationMessage: function setValidationMessage(message) {\n    this.validationMessage = message;\n  },\n  /*\r\n     *   Method to render non editable values\r\n     */\n  renderReadOnly: function renderReadOnly() {\n    var result = this.getValue();\n    var readOnlyValue = \"\";\n\n    if (bizagi.util.isObject(result) && typeof result.value !== \"undefined\") {\n      readOnlyValue = bizagi.util.sanitizeHTML(result.value);\n    } else if (!bizagi.util.isEmpty(result)) {\n      if (bizagi.util.isString(result)) {\n        readOnlyValue = bizagi.util.encodeHtmlText(result);\n      } else {\n        readOnlyValue = result;\n      }\n    }\n\n    return readOnlyValue;\n  },\n\n  /*\r\n     *  Method to render print version\r\n     */\n  postRenderPrintVersion: function postRenderPrintVersion() {\n  },\n\n  /*\r\n     *   Customizes render display type with custom css classes\r\n     */\n  changeDisplayOption: function changeDisplayOption(displayType) {\n    this.properties.displayType = displayType;\n  },\n\n  /*\r\n     *   Return the right display option class\r\n     */\n  getDisplayOptionClass: function getDisplayOptionClass(displayType) {\n    return \"\";\n  },\n\n  /*\r\n     *   Customizes render label align\r\n     */\n  changeLabelAlign: function changeLabelAlign(alignType) {\n    this.properties.labelAlign = alignType;\n  },\n\n  /*\r\n     *   Customizes render value align\r\n     */\n  changeValueAlign: function changeValueAlign(alignType) {\n    this.properties.valueAlign = alignType;\n  },\n\n  /*\r\n     *   Return the right align class\r\n     */\n  getAlignClass: function getAlignClass(alignType) {\n    return \"\";\n  },\n\n  /*\r\n     *   Customizes render label and value width\r\n     */\n  customizeRenderWidth: function customizeRenderWidth() {\n  },\n\n  /* Customizes render color*/\n  changeColor: function changeColor(color, isLabelFormat) {\n    var self = this;\n    var control = self.getControl();\n    var label = self.getLabel();\n    var isLabelFormat = typeof isLabelFormat != \"undefined\" || isLabelFormat != null ? isLabelFormat : true;\n\n    if (control && label) {\n      if (color != 'none') {\n        // Hide - show the render\n        if (self.properties.displayType === \"value\" || !isLabelFormat) {\n          self.getElementsToStylize(self.getControl()).css(\"color\", color, \"!important\");\n          self.getControl().find(\"*\").each(function (i, element) {\n            self.getElementsToStylize(element).css(\"color\", color, \"!important\");\n          });\n        } else {\n          self.element.each(function () {\n            this.style.setProperty('color', color, 'important');\n          });\n\n          if (self.properties.type == \"grid\") {\n            self.getControl().find(\".bz-mobile-grid__header-title\").each(function () {\n              this.style.setProperty('color', color, 'important');\n            });\n          }\n\n          self.getLabel().find(\"label\").css(\"color\", color, \"!important\");\n          if (self.properties.editable === false) {\n            self.getElementsToStylize(self.getControl()).css(\"color\", color, \"!important\");\n            self.getElementsToStylize($(\"label\", self.getControl()).css(\"color\", color, \"!important\"));\n          }\n        }\n      } else {\n        self.element.css(\"color\", \"\");\n        self.getLabel().find(\"label\").css(\"color\", \"\");\n        self.getControl().css(\"color\", \"\");\n\n        self.getControl().find(\"input, textarea\").each(function (i, element) {\n          var originalColor = $(element).data(\"originalColor\") || \"\";\n          self.getElementsToStylize(element).css(\"color\", originalColor);\n        });\n      }\n    }\n  },\n\n  /* Customizes render background color*/\n  changeBackgroundColor: function changeBackgroundColor(color) {\n    var self = this;\n    var control = self.getControl();\n    var label = self.getLabel();\n\n    if (control && label) {\n      if (color != 'none') {\n        self.element.each(function () {\n          this.style.setProperty('background-color', color, 'important');\n        });\n\n        if (typeof label.find('label').style !== \"undefined\") {\n          self.getLabel().find(\"label\").style(\"background-color\", color, \"important\");\n        } else {\n          self.getLabel().find(\"label\").css(\"background-color\", color, \"!important\");\n        }\n\n        var currentStyle = self.getLabel().attr(\"style\");\n        currentStyle += \"; background-color:\" + color + \"!important\";\n        self.getLabel().attr(\"style\", currentStyle);\n      } else {\n        self.element.css(\"background-color\", \"\");\n        self.getLabel().find(\"label\").css(\"background-color\", \"\");\n        self.getControl().css(\"background-color\", \"\");\n        self.getControl().find(\"input, textarea\").each(function (i, element) {\n          var originalColor = $(element).data(\"originalColor\") || \"\";\n          $(element).css(\"background-color\", originalColor);\n        });\n      }\n    }\n  },\n\n  /* Returns the formatting label to be used for bold, italic, underline, strikethrough and size*/\n  getFormattingLabel: function getFormattingLabel() {\n    var self = this;\n    return self.getLabel().find(\"label\");\n  },\n\n  /* Customizes the font weight */\n  changeFontBold: function changeFontBold(bold, isLabelFormat) {\n    var self = this;\n    var isLabelFormat = typeof isLabelFormat != \"undefined\" || isLabelFormat != null ? isLabelFormat : true;\n\n    // Hide - show the render\n    if (bizagi.util.parseBoolean(bold) != false && isLabelFormat) {\n      self.getFormattingLabel().css(\"font-weight\", \"bold\", \"!important\");\n      self.getControl().find(\"*\").each(function (i, element) {\n        $(element).css(\"font-weight\", \"bold\", \"!important\");\n      });\n\n    } else {\n      if (isLabelFormat)\n      self.getFormattingLabel().css(\"font-weight\", \"normal\", \"!important\");\n    }\n    if (!isLabelFormat) {\n      if (bizagi.util.parseBoolean(bold) == true) {\n        self.getControl().find(\"*\").each(function (i, element) {\n          $(element).css(\"font-weight\", \"bold\", \"!important\");\n        });\n      } else {\n        if (!(self.surrogateKey && self.surrogateKey == \"summary\")) {\n          self.getControl().find(\"*\").each(function (i, element) {\n            $(element).css(\"font-weight\", \"normal\", \"!important\");\n          });\n          self.getControl().css(\"font-weight\", \"normal\", \"!important\");\n        }\n      }\n    }\n  },\n\n  controlValueIsChanged: function controlValueIsChanged() {\n    var self = this;\n    var properties = self.properties;\n    var value = self.getValue();\n    var compareValue = properties.originalValue;\n    var baseValue = properties.defaultValue;\n    var result = true;\n    var renderType = bizagi.util.normalizeType(properties.type);\n    var form = self.getFormContainer();\n\n    //To force to send value when control's retype is duplicate, fixed to start forms.\n    if (properties.retype === \"duplicate\" && self.cloneRender && form.isStartForm()) return true;\n\n    // Flag to force to collect data\n    if ($.forceCollectData) {\n      return true;\n    }\n\n    // Verify if control has been ready\n    if (renderType === \"grid\" && self.ready().state() === \"pending\") {\n      return false;\n    }\n\n    if ([\"combo\", \"queryCombo\", \"list\", \"queryList\", \"radio\", \"queryRadio\"].includes(renderType) || /^cascadingcombo$/i.test(renderType)) {\n      if (value && value.length !== undefined) {\n        value = value[0];\n      }\n      if (compareValue && compareValue.length !== undefined) {\n        compareValue = compareValue[0];\n      }\n      if (baseValue && baseValue.length !== undefined) {\n        baseValue = baseValue[0];\n      }\n      value = value && value.id ? value.id : value;\n      compareValue = compareValue && compareValue.id ? compareValue.id : compareValue;\n      baseValue = baseValue && baseValue.id ? baseValue.id : baseValue;\n      if (typeof baseValue != \"undefined\" && baseValue != null) {\n        result = compareValue == value && compareValue != baseValue ? false : true;\n      } else {\n        result = compareValue == value ? false : true;\n      }\n    } else if (renderType === \"boolean\" || renderType === \"queryBoolean\" || renderType === \"queryCheck\") {\n      result = bizagi.util.parseBoolean(compareValue) == bizagi.util.parseBoolean(value) ? false : true;\n    } else if (renderType === \"searchNumber\") {\n      result = !!value;\n    } else if (renderType === \"number\") {\n      if ((value === null || value === \"\") && (compareValue === null || compareValue === \"\")) {\n        result = false;\n      } else {\n        result = compareValue === value ? false : true;\n      }\n    } else if (renderType === \"text\") {\n      if ((value === null || value === \"\") && (compareValue === null || compareValue === \"\")) {\n        result = false;\n      } else {\n        result = compareValue === value ? false : true;\n      }\n    } else if (renderType === \"date\") {\n      if (!compareValue && !value) {\n        result = false;\n      } else {\n        if (!properties.showTime) {\n          value = bizagi.util.getNormalizedDate(value, properties.fullFormat);\n          compareValue = bizagi.util.getNormalizedDate(compareValue, properties.fullFormat);\n        }\n\n        result = compareValue == value ? false : true;\n      }\n    } else if (renderType === \"actionLauncher\") {\n      //Object must be an array\n      result = false;\n      var compareValueObj = [];\n      try {\n        if (typeof compareValue === \"string\") {\n          compareValueObj = JSON.parse(compareValue);\n        } else {\n          compareValueObj = compareValue;\n        }\n      } catch (e) {\n      }\n\n      var _findAction = function _findAction(guid, targetObj) {\n        guid = guid || \"\";\n        targetObj = targetObj || [];\n        var result = false;\n        for (var i = 0, l = targetObj.length; i < l; i++) {\n          if (targetObj[i].guidAction == guid) {\n            result = true;\n            break;\n          }\n        }\n        return result;\n      };\n\n      if (compareValueObj.length == value.length) {\n        for (var i = 0, l = compareValueObj.length; i < l; i++) {\n          if (!_findAction(compareValueObj[i].guidAction, value)) {\n            result = true;\n          }\n        }\n\n      } else {\n        result = true;\n      }\n    } else if (renderType === \"polymorphicLauncher\" || renderType === \"entityTemplate\") {\n      //Object must be an array\n      if (compareValue.length != value.length) {\n        result = true;\n      } else {\n        result = JSON.encode(value) == JSON.encode(compareValue) ? false : true;\n      }\n    } else if (renderType === \"searchList\") {\n      var objectValue = {};\n      try {\n        objectValue = JSON.parse(value);\n      } catch (e) {\n        console.log(\"Error when detect change value on searchList control\");\n      }\n      result = JSON.encode(compareValue) == JSON.encode(objectValue.value) ? false : true;\n    } else if ([\"signature\", \"image\"].includes(renderType)) {\n      // When a image/signature is uploaded or removed from a Form,\n      // the change is saved automatically to the activity's scope\n      result = false;\n    } else {\n      result = compareValue === value ? false : true;\n    }\n\n    return result;\n  },\n\n  /* Customizes the font italic style */\n  changeFontItalic: function changeFontItalic(italic, isLabelFormat) {\n    var self = this;\n    var isLabelFormat = typeof isLabelFormat != \"undefined\" || isLabelFormat != null ? isLabelFormat : true;\n\n    // Hide - show the render\n    if (self.properties.displayType == \"value\" || !isLabelFormat) {\n      if (bizagi.util.parseBoolean(italic) == true) {\n        if (isLabelFormat)\n        self.getFormattingLabel().css(\"font-style\", \"italic\", \"!important\");\n\n        if (self.properties.editable) {\n          self.getControl().find(\"*\").each(function (i, element) {\n            self.getElementsToStylize(element).css(\"font-style\", \"italic\", \"!important\");\n          });\n        } else {\n          self.getElementsToStylize(self.getControl()).css(\"font-style\", \"italic\", \"!important\");\n        }\n      } else {\n        if (isLabelFormat)\n        self.getFormattingLabel().css(\"font-style\", \"normal\", \"!important\");\n\n        if (self.properties.editable) {\n          self.getControl().find(\"*\").each(function (i, element) {\n            self.getElementsToStylize(element).css(\"font-style\", \"normal\", \"!important\");\n          });\n        } else {\n          self.getElementsToStylize(self.getControl()).css(\"font-style\", \"normal\", \"!important\");\n        }\n      }\n    } else {\n      if (bizagi.util.parseBoolean(italic) == true) {\n        self.getFormattingLabel().css(\"font-style\", \"italic\", \"!important\");\n      } else {\n        self.getFormattingLabel().css(\"font-style\", \"normal\", \"!important\");\n      }\n    }\n  },\n\n  /* Customizes the font underline */\n  changeFontUnderline: function changeFontUnderline(underline, isLabelFormat) {\n    var self = this;\n    var textFormat = self.properties.textFormat || {};\n    var valueFormat = self.properties.valueFormat || {};\n    var strikethru = bizagi.util.parseBoolean(textFormat.strikethru) ? \"line-through \" : \"\";\n    var valuestrikethru = bizagi.util.parseBoolean(valueFormat.strikethru) ? \"line-through \" : \"\";\n    var isLabelFormat = typeof isLabelFormat != \"undefined\" || isLabelFormat != null ? isLabelFormat : true;\n\n    // Hide - show the render\n    if (bizagi.util.parseBoolean(underline) == true && isLabelFormat) {\n      self.getFormattingLabel().css(\"text-decoration\", strikethru + \"underline\", \"!important\");\n      self.getControl().each(function (i, element) {\n        self.getElementsToStylize(element).css(\"text-decoration\", strikethru + \"underline\");\n      });\n    } else {\n      if (isLabelFormat)\n      self.getFormattingLabel().css(\"text-decoration\", strikethru, \"!important\");\n    }\n    if (self.properties.displayType == \"value\" || !isLabelFormat) {\n      if (bizagi.util.parseBoolean(underline) == true) {\n        if (self.properties.editable) {\n          self.getControl().find(\"*\").each(function (i, element) {\n            self.getElementsToStylize(element).css(\"text-decoration\", valuestrikethru + \"underline\", \"!important\");\n          });\n        } else {\n          self.getElementsToStylize(self.getControl()).css(\"text-decoration\", valuestrikethru + \"underline\", \"!important\");\n        }\n      } else {\n        self.getControl().find(\"*\").each(function (i, element) {\n          self.getElementsToStylize(element).css(\"text-decoration\", valuestrikethru, \"!important\");\n        });\n      }\n    }\n  },\n\n  /* Customizes the font Strikethrough property */\n  changeFontStrikethru: function changeFontStrikethru(strikethru, isLabelFormat) {\n    var self = this;\n    var textFormat = self.properties.textFormat || {};\n    var valueFormat = self.properties.valueFormat || {};\n    var underline = bizagi.util.parseBoolean(textFormat.underline) ? \"underline \" : \"\";\n    var valueunderline = bizagi.util.parseBoolean(valueFormat.underline) ? \"underline \" : \"\";\n    var isLabelFormat = typeof isLabelFormat != \"undefined\" || isLabelFormat != null ? isLabelFormat : true;\n\n    // Hide - show the render\n    if (bizagi.util.parseBoolean(strikethru) == true && isLabelFormat) {\n      self.getFormattingLabel().css(\"text-decoration\", underline + \"line-through\", \"!important\");\n    } else {\n      if (isLabelFormat)\n      self.getFormattingLabel().css(\"text-decoration\", underline, \"!important\");\n    }\n\n    if (self.properties.displayType == \"value\" || !isLabelFormat) {\n      if (bizagi.util.parseBoolean(strikethru) == true) {\n        if (self.properties.editable) {\n          self.getControl().find(\"*\").each(function (i, element) {\n            self.getElementsToStylize(element).css(\"text-decoration\", valueunderline + \"line-through\", \"!important\");\n          });\n        } else {\n          self.getElementsToStylize(self.getControl()).css(\"text-decoration\", valueunderline + \"line-through\", \"!important\");\n        }\n      } else {\n        if (self.properties.editable) {\n          self.getControl().find(\"*\").each(function (i, element) {\n            self.getElementsToStylize(element).css(\"text-decoration\", valueunderline, \"!important\");\n          });\n        } else {\n          self.getElementsToStylize(self.getControl()).css(\"text-decoration\", valueunderline, \"!important\");\n        }\n      }\n    }\n  },\n\n  /* Customizes the font size property */\n  changeFontSize: function changeFontSize(size, isLabelFormat) {\n    var self = this;\n    var isLabelFormat = typeof isLabelFormat != \"undefined\" || isLabelFormat != null ? isLabelFormat : true;\n\n    // Hide - show the render\n    if (size != \"0\") {\n      var label = self.getFormattingLabel();\n      var newFontSize = 100 + Number(size) * 10 + \"%\";\n      if (isLabelFormat) {\n        label.css(\"font-size\", newFontSize, \"!important\");\n      }\n      if (self.properties.displayType == \"value\" || !isLabelFormat) {\n        var control = self.getControl();\n        if (_typeof(control.children()) == \"object\" && control.children().length > 0) {\n          self.getElementsToStylize(control.children()).css(\"font-size\", newFontSize, \"!important\");\n        } else {\n          self.getElementsToStylize(control).css(\"font-size\", newFontSize, \"!important\");\n          // Next line applies to Cascading combo and combo in order to increase the control space with large value fonts\n          if (self.properties.type.indexOf(\"ombo\") != -1 && size > 4) (\".ui-selectmenu\", control).children(0).height(2 * size + 20);\n        }\n\n        self.getElementsToStylize(control.find(\".ui-bizagi-render-date\")).css(\"line-height\", \"normal\");\n      }\n    }\n  },\n\n  /**\r\n      * in mobiles, don't apply styles to icon's elements\r\n      */\n  getElementsToStylize: function getElementsToStylize(context) {\n    return $(context);\n  },\n\n  /* Changes the render visibility*/\n  changeVisibility: function changeVisibility(argument) {\n    var self = this;\n    var properties = self.properties;\n\n    // Hide - show the render\n    if (bizagi.util.parseBoolean(argument) == true) {\n      if (properties.type !== \"hidden\") {\n        self.element.show();\n        self.element.css(\"display\", \"\");\n\n        if (properties.required) {\n          if (!self.hasValue()) {\n            self.changeRequiredLabel(true);\n          }\n        }\n      }\n    } else if (self.element) {\n      self.element.hide();\n    }\n\n    // Update properties\n    properties.visible = argument;\n  },\n  /* Changes the render editability*/\n  changeEditability: function changeEditability(argument) {\n    var self = this;\n    var properties = self.properties;\n    var control = self.getControl();\n\n    // Renders again\n    properties.editable = argument == \"Default\" ? self.originalProperties.editable : bizagi.util.parseBoolean(argument);\n    properties.editabilityEnabled = properties.editabilityEnabled || properties.editable;\n\n    // Clears control\n    control.empty();\n\n    if (typeof self.internalRenderControl == \"function\") {\n      $.when(self.internalRenderControl()).done(function (html) {\n        if (typeof self.emptyControlByChangeEditability == \"function\")\n        self.emptyControlByChangeEditability();\n        if (!self.asyncRenderDeferred)\n        control.append(html);\n        self.postRenderElement(self.element);\n      });\n    }\n  },\n\n  /**\r\n      * Change cell editability and attach bindings\r\n      * @param argument\r\n      * @param key\r\n      * @param xpath\r\n      */\n  changeEditabilityCellControl: function changeEditabilityCellControl(argument, key, xpath) {\n    var self = this;\n    var properties = self.properties;\n    var renderColumn = self.grid.getColumn(xpath);\n    var decorated = renderColumn.getDecorated(key);\n\n    // Renders again\n    properties.editable = argument === \"Default\" ? self.originalProperties.editable : bizagi.util.parseBoolean(argument);\n    properties.editabilityEnabled = properties.editabilityEnabled || properties.editable;\n\n    // Render cell control\n    self.internalRenderCellControl(properties.editable, key, renderColumn, decorated);\n  },\n\n  /**\r\n      * Render cell control by command action\r\n      * @param editable\r\n      * @param key\r\n      * @param renderColumn\r\n      * @param decorated\r\n      */\n  internalRenderCellControl: function internalRenderCellControl(editable, key, renderColumn, decorated) {\n    var self = this;\n    var control = self.getControl();\n\n    // Clears control\n    control.empty();\n\n    if (typeof self.internalRenderControl == \"function\") {\n\n      $.when(self.internalRenderControl()).done(function (html) {\n\n        if (!self.asyncRenderDeferred) {\n          control.append(html);\n        }\n\n        self.postRenderElement(self.element);\n\n        if (editable) {\n\n          renderColumn.bind(\"rendered\", function () {\n            renderColumn.readyDeferred.resolve();\n          });\n\n          decorated.unbind(\"renderchange\");\n\n          // If the render changes set the flag on\n          decorated.bind(\"renderchange\", function (render, args) {\n            renderColumn.changed = true;\n            self.grid.onCellChange(renderColumn, null, key, args);\n          });\n\n        }\n      });\n    }\n  },\n\n  changeRequired: function changeRequired(argument) {\n    var self = this;\n    var properties = self.properties;\n\n    var label = properties.displayName || \"\";\n    var labelElement = $(\"label\", self.getLabel());\n    var controlElement = self.getControl();\n\n    // Update properties\n    properties.required = argument;\n\n    // Changes label\n    if (self.getMode() == \"execution\" && self.checkRequired([])) {\n      self.changeRequiredLabel(false);\n    } else if (bizagi.util.parseBoolean(argument) == true && properties.editable) {\n      if (self.properties.orientation == \"rtl\") {\n        controlElement.prepend('<div class=\"ui-bizagi-render-control-required-rtl\"></div>');\n      } else {\n        controlElement.addClass('control-required');\n        controlElement.prepend('<div class=\"ui-bizagi-render-control-required\"></div>');\n      }\n    } else {\n      // if element has required label and through action change it, remove element.\n      if (self.properties.orientation == \"rtl\") {\n        $(\".ui-bizagi-render-control-required-rtl\", controlElement).remove();\n      } else {\n        controlElement.removeClass('control-required');\n        $(\".ui-bizagi-render-control-required\", controlElement).remove();\n      }\n    }\n\n    // Set text, HTML is more suitable for the content\n    labelElement.html(label);\n\n    // Perform validations again to check if the form is valid after this change\n    self.triggerRenderValidate();\n  },\n  /**\r\n      * This method just make a toggle of red label indicator\r\n      * Does't change internal value of control, if you need it\r\n      * please use changeRequired method\r\n      *\r\n      * @argument {boolean} argument\r\n      */\n  changeRequiredLabel: function changeRequiredLabel(argument) {\n    var self = this;\n    var properties = self.properties;\n\n    var label = properties.displayName || \"\";\n    var labelElement = $(\"label\", self.getLabel());\n    var controlElement = self.getControl();\n\n    // Changes label\n    if (bizagi.util.parseBoolean(argument) == true && properties.editable) {\n      if (self.properties.orientation == \"rtl\") {\n        controlElement.prepend('<div class=\"ui-bizagi-render-control-required-rtl\"></div>');\n      } else {\n        controlElement.addClass('control-required');\n        controlElement.append('<div class=\"ui-bizagi-render-control-required\"></div>');\n      }\n    } else {\n      // if element has required label and through action change it, remove element.\n      if (self.properties.orientation == \"rtl\") {\n        $(\".ui-bizagi-render-control-required-rtl\", controlElement).remove();\n      } else {\n        controlElement.removeClass('control-required');\n        $(\".ui-bizagi-render-control-required\", controlElement).remove();\n      }\n    }\n\n    // Set text, HTML is more suitable for the content\n    labelElement.html(label);\n\n    // Perform validations again to check if the form is valid after this change\n    self.triggerRenderValidate();\n  },\n  /*\r\n     *   Refresh the control with a new data\r\n     */\n  refreshControl: function refreshControl(args) {\n    var self = this;\n    var properties = self.properties;\n    var originalValue = self.value;\n    var form = self.getFormContainer();\n    var idForm = form.properties.id || \"\";\n\n    args = args || {};\n\n    // Start waiting\n    self.startLoading();\n\n    // Execute personalized stuff before to refresh it\n    self.beforeToRefresh();\n\n    // Call the ajax service\n    return $.when(self.dataService.multiaction().refreshControl({\n      xpath: properties.xpath,\n      idRender: properties.id,\n      idPageCache: properties.idPageCache,\n      xpathContext: properties.xpathContext || args.xpathContext,\n      idForm: idForm })).\n    pipe(function (data) {\n      if (self.grid && bizagi.override.restoreAppearanceAfterRefresh) {\n        self.saveGridChildrenVisualChanges();\n      }\n      // Clear variables\n      self.control = self.controlFiller = self.label = null;\n\n      // Update properties data\n      var currentElement = self.element;\n      self.initializeData(data.render);\n\n      // Render the control again\n      return $.when(self.render()).pipe(function (html) {\n        var result = $(html);\n        //Dont remove unused rendered var\n        var rendered = self.postRenderElement(result);\n        self.properties.originalValue = self.value;\n        return result;\n      }).pipe(function (result) {\n\n        // When the content has been post-renderized, replace it\n        currentElement.replaceWith(result);\n\n        // Prevent multiple refresh on grid\n        if (!self.grid) {\n          self.triggerRenderChange({ changed: false });\n        }\n\n        if (bizagi.override.restoreAppearanceAfterRefresh) {\n          if (self.grid) {\n            self.restoreGridChildrenVisualChanges();\n            self.restoreGridAppearance();\n          } else {\n            self.restoreAppearance();\n          }\n        }\n\n        // Execute personalized stuff before to refresh it\n        self.afterToRefresh();\n      });\n\n    }).fail(function (message) {\n      var message = self.processFailMessage(message);\n\n    }).always(function () {\n      self.endLoading();\n    });\n  },\n\n  /*\r\n      *   Refresh the control with a new data\r\n      */\n  refreshDesignControl: function refreshDesignControl(data) {\n    var self = this;\n    var properties = self.properties;\n\n    // Execute personalized stuff before to refresh it\n    self.beforeToRefresh();\n\n    // Clear variables\n    self.control = self.controlFiller = self.label = null;\n\n    $.extend(data.render.properties, {\n      xpath: properties.xpath,\n      idRender: properties.id,\n      xpathContext: properties.xpathContext || \"form\",\n      idPageCache: properties.idPageCache });\n\n\n    // Update properties data\n    var currentElement = self.element;\n    self.initializeData(data.render);\n\n    // Render the control again\n    return $.when(self.render()).pipe(function (html) {\n      var result = $(html);\n      //Dont remove unused rendered var\n      var rendered = self.postRenderElement(result);\n      self.properties.originalValue = self.value;\n      return result;\n    }).pipe(function (result) {\n      // When the content has been post-renderized, replace it\n      currentElement.replaceWith(result);\n      self.triggerRenderChange();\n\n      // Execute personalized stuff before to refresh it\n      self.beforeToRefresh();\n    });\n  },\n\n  /*\r\n     * Cleans current value\r\n     */\n  cleanData: function cleanData() {\n    var self = this;\n\n    self.setValue(\"\");\n    self.clearDisplayValue();\n  },\n\n  /*\r\n      *   Sets the value in the rendered control\r\n      */\n  clearDisplayValue: function clearDisplayValue() {\n    var self = this;\n    var control = self.getControl();\n    var input = control.find(\"input\");\n\n    if (input.length > 0) {\n      input.val(self.getValue());\n    } else if (self.properties.editable === false) {\n      $(control).html(\"<label class='readonly-control'></label>\");\n    }\n  },\n\n  /*\r\n     *   Updates original value for some comparisons\r\n     */\n  updateOriginalValue: function updateOriginalValue() {\n    var self = this;\n    self.properties.originalValue = self.value;\n  },\n  /*\r\n     *   Add the render data to the given collection in order to send data to the server\r\n     */\n  collectData: function collectData(renderValues) {\n    var self = this;\n    var properties = self.properties;\n\n    // Add the render value\n    var xpath = properties.xpath;\n    var value = self.getValue();\n\n    if (self.controlValueIsChanged()) {\n      // Filter by valid xpaths and valid values\n      if (!bizagi.util.isEmpty(xpath)) {\n        if (!bizagi.util.isEmpty(value)) {\n          renderValues[properties.xpath] = value;\n        } else if (value === \"\" || value === null) {\n          renderValues[properties.xpath] = \"\";\n        }\n      }\n    }\n\n    //Validate if the input has a retype configured and check that both values matches, otherwise delete the original value\n    if (!self.validateInputRetype()) {\n      renderValues[properties.xpath] = \"\";\n    }\n  },\n\n  hasChanged: function hasChanged(result) {\n    var self = this;\n    if (self.controlValueIsChanged()) {\n      result.push(true);\n      return true;\n    } else {\n      return false;\n    }\n  },\n\n  /*\r\n     *  Configure additional Handlers for queryForm type\r\n     */\n  configureHandlersQueryForm: function configureHandlersQueryForm() {\n    var self = this;\n    var checkIncluded = self.element.find(\".ui-bizagi-render-control-included\");\n    checkIncluded.change(function () {\n      self.properties.included = $(this).is(\":checked\");\n    });\n  },\n  getRenderId: function getRenderId() {\n    var self = this;\n\n    return bizagi.util.tryCatch(\n    function () {return self.properties.id;},\n    null);\n\n  },\n  /*\r\n     *   Add the render data to the given collection in order to send data to the server\r\n     */\n  collectDataQueryForm: function collectDataQueryForm(renderValues) {\n    var self = this;\n    var properties = self.properties;\n    var xpath = properties.xpath;\n    var value = self.getValue();\n    var queryValue = null;\n    if (!bizagi.util.isEmpty(xpath)) {\n      if (value !== null && typeof value !== \"undefined\") {\n        var isObject = typeof value.id !== \"undefined\";\n        if (isObject) {\n          queryValue = !bizagi.util.isEmpty(value.id) ? [value] : null;\n        } else {\n          queryValue = value !== \"\" ? value : null;\n        }\n      }\n      if (queryValue !== null || properties.included) {\n        var searchType = (self.properties.typeSearch || self.properties.rangeQuery || \"NONE\").toUpperCase();\n        var newParameter = {\n          \"value\": queryValue,\n          \"included\": self.properties.included,\n          \"xpath\": properties.xpath,\n          \"searchType\": searchType,\n          \"orderType\": \"NONE\",\n          \"renderId\": self.getRenderId() };\n\n\n        if (typeof properties.displayXpath !== \"undefined\" && properties.displayXpath !== \"\") {\n          newParameter.displayXpath = properties.displayXpath;\n        }\n\n        renderValues.push(newParameter);\n      }\n    }\n  },\n\n  /*\r\n     *  Method to determine if the render value can be sent to the server or not\r\n     */\n  canBeSent: function canBeSent() {\n    var self = this,force;\n    var properties = self.properties;\n    var displayOnly = bizagi.util.parseBoolean(properties.displayOnly) || false;\n    var editable = bizagi.util.parseBoolean(properties.editable) || bizagi.util.parseBoolean(properties.editabilityEnabled);\n\n    // Don't send the clones\n    if (properties.isClone) {\n      return false;\n    }\n\n    // The render can be sent if it is editable and is not \"display only\"\n    if (!displayOnly && editable) {\n      return true;\n    }\n\n    if (properties.xpath) {\n      var form = self.getFormContainer();\n      if (form.getRenders(properties.xpath).length == 1) {\n        force = $.forceCollectData ? $.forceCollectData.toString() : false;\n        $.forceCollectData = force ? undefined : $.forceCollectData;\n        if (self.controlValueIsChanged()) {\n          $.forceCollectData = force ? bizagi.util.parseBoolean(force) : $.forceCollectData;\n          return true;\n        }\n        $.forceCollectData = force ? bizagi.util.parseBoolean(force) : $.forceCollectData;\n      }\n    }\n\n    return false;\n  },\n  /*\r\n     *  Method to determine if the render value can be sent to search\r\n     */\n  canBeSentQueryForm: function canBeSentQueryForm() {\n    var self = this,force;\n    var properties = self.properties;\n    // Don't send the clones\n    if (properties.isClone) {\n      return false;\n    }\n    return true;\n  },\n  /*\r\n     *   Focus on the current element\r\n     */\n  focus: function focus(time) {\n    var self = this;\n\n    // Focus is only allowed when the render is visible\n    if (!self.properties.visible) return;\n\n    // Call base\n    this._super();\n    var layout = $(\"#ui-bizagi-wp-app-render-form-content\");\n\n    // Configures effect\n    var effect = function effect() {\n      var control = self.getControl();\n      var defaultControl = self.properties.type != \"grid\" ? $(\"input, select, option, textarea\", control) : $(\"input, select, option, textarea\", control).first();\n      if (defaultControl.length > 0) {\n\n        // Focus control\n        $.each(defaultControl, function (i) {\n          var innerControl = defaultControl[i];\n          if ($(innerControl).attr(\"type\") != \"hidden\" && $(innerControl).css(\"display\") != \"none\" && $(innerControl).css(\"visibility\") != \"hidden\") {\n\n            try {\n              if (!bizagi.util.isIE()) {\n                bizagi.util.autoScrollBottom(layout);\n              }\n              innerControl.focus();\n            } catch (e) {\n            }\n          }\n        });\n      }\n    };\n\n    // Wait until the render is ready to apply the focus effect\n    $.when(self.ready()).\n    done(function () {\n      // Run effect\n      if (time > 0) {\n        var timeOutEffect = setTimeout(function () {\n          effect();\n          clearTimeout(timeOutEffect);\n        }, time);\n      } else {\n        effect();\n      }\n    });\n  },\n\n  /*\r\n     *   Resolves default align for each display type\r\n     */\n  getDefaultLabelAlign: function getDefaultLabelAlign(displayType) {\n    return \"default\";\n  },\n\n  /*\r\n     *   Resolves default value align for each display type\r\n     */\n  getDefaultValueAlign: function getDefaultValueAlign(displayType) {\n    return \"default\";\n  },\n  /*\r\n     *   Transform the align type when using RTL orientation\r\n     */\n  getRTLAlign: function getRTLAlign(align) {\n    /* if (align === \"default\"){ \r\n                                                return \"right\";\r\n                                            } */\n    return align;\n  },\n\n  /*\r\n     *   Enables submit on change feature for the current render\r\n     */\n  configureSubmitOnChange: function configureSubmitOnChange() {\n    var self = this;\n    var properties = self.properties;\n    var xpath = \"\";\n    var id = properties.id;\n\n    if (!properties.editable) return;\n\n    // Build action\n    properties.dependencies = properties.dependencies || 'all';\n\n    if (properties.xpath) {\n      if (properties.submitOnChangexpathContext) {\n        xpath = properties.submitOnChangexpathContext + \".\" + properties.xpath;\n      } else {\n        xpath = properties.xpath;\n      }\n    } else {\n      if (properties.submitOnChangexpathContext) {\n        xpath = properties.submitOnChangexpathContext + \".\" + properties.id;\n      } else {\n        xpath = properties.id;\n      }\n    }\n\n    var action = {\n      \"conditions\": {\n        \"expressions\": [\n        {\n          \"simple\": {\n            \"xpath\": xpath,\n            \"renderId\": properties.id,\n            \"operator\": \"changes\",\n            \"argumentType\": \"const\" } }] },\n\n\n\n\n      \"commands\": [\n      {\n        \"xpath\": xpath,\n        \"command\": 'submit-value',\n        \"argument\": properties.dependencies }],\n\n\n      \"dependencies\": [xpath],\n      \"elseCommands\": [] };\n\n\n    if (properties.submitOnChangexpathContext && self.grid) {\n      action.conditions.expressions[0].simple.containerId = self.grid.properties.id;\n    }\n\n    // Add action when form ends its rendering\n    $.when(self.ready()).done(function () {\n      var form = self.getFormContainer();\n      form.addSubmitAction(xpath + '.' + id, action);\n    });\n  },\n\n  /*\r\n     *   Sends all the info to the server then refreshes the form\r\n     *   Returns a deferred\r\n     */\n  submitOnChange: function submitOnChange(data, bRefreshForm, notCollect) {\n    var self = this;\n    var defer = $.Deferred();\n\n    // Add context parameter\n    if (self.properties.contexttype != \"\" && data) {\n      data[self.dataService.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = self.properties.contexttype;\n    }\n\n    $.when(self.isReadyToSave()).done(function () {\n      self.internalSubmitOnChange(data, bRefreshForm, notCollect).done(function () {\n        defer.resolve();\n      }).fail(function () {\n        defer.reject();\n      });\n    });\n\n    return defer.promise();\n  },\n\n  getCacheIdCase: function getCacheIdCase() {\n    var self = this;\n    var idCase = self.getParams().idCase;\n\n    if (bizagi.cache === undefined) {\n      bizagi.cache = {};\n      bizagi.cache.idCaseObject = {\n        idCase: idCase !== undefined ? idCase : bizagi.cache.idCase !== undefined ? bizagi.cache.idCase : undefined };\n\n    } else {\n      if (idCase !== undefined && bizagi.cache.idCaseObject !== undefined) {\n        bizagi.cache.idCaseObject.idCase = idCase;\n      } else {\n        if (idCase !== undefined && bizagi.cache.idCaseObject === undefined) {\n          bizagi.cache.idCaseObject = {};\n          bizagi.cache.idCaseObject.idCase = idCase;\n        }\n      }\n    }\n\n    if (idCase === undefined) {\n      if (bizagi.cache.idCaseObject === undefined) {\n        idCase = undefined;\n      } else {\n        idCase = bizagi.cache.idCaseObject.idCase;\n      }\n    } else {\n      idCase = idCase;\n    }\n\n    return idCase;\n  },\n  /*\r\n     *   Internal method\r\n     *   Sends all the info to the server then refreshes the form\r\n     *   Returns a deferred\r\n     */\n  internalSubmitOnChange: function internalSubmitOnChange(data, bRefreshForm, notCollect) {\n    var self = this;\n    var form = self.getFormContainer();\n    var properties = self.properties;\n    var parameters = {\n      data: data,\n      bRefreshForm: bRefreshForm,\n      notCollect: notCollect,\n      properties: {\n        idCase: self.getCacheIdCase(),\n        id: properties.id,\n        xpath: properties.xpath,\n        idPageCache: properties.idPageCache,\n        contexttype: properties.contexttype } };\n\n\n\n    return form.internalSubmitOnChange(parameters);\n  },\n  /*\r\n     *   Returns a promise that will resolve when the element is ready\r\n     */\n  ready: function ready() {\n    var self = this;\n    return $.when(self.parent.ready(), self.isRendered());\n  },\n  /*\r\n     *   Get the custom handlers set for this execution\r\n     */\n  getCustomHandlers: function getCustomHandlers() {\n    var self = this;\n    var form = self.getFormContainer();\n\n    if (form) {\n      return form.getCustomHandlers();\n    }\n    return null;\n  },\n  /*\r\n     *   Get the custom handlers set for this execution\r\n     */\n  getCustomHandler: function getCustomHandler(key) {\n    var self = this;\n    var customHandlers = self.getCustomHandlers();\n\n    if (customHandlers) {\n      return customHandlers[key];\n    }\n    return null;\n  },\n  /*\r\n     *   Calculates render label and value width\r\n     */\n  calculateRenderWidth: function calculateRenderWidth(labelWidth, valueWidth, displayType) {\n    var self = this;\n    // Read values\n    // If the label width or the value width are 0, the BAS means that no value is used, so we need to adjust them to 50%\n    if (valueWidth == \"100\" && typeof labelWidth === \"undefined\") {\n      labelWidth = \"0\";\n    } else {\n      labelWidth = labelWidth ? labelWidth != \"0\" ? labelWidth : \"50\" : \"50%\";\n    }\n    valueWidth = valueWidth ? valueWidth != \"0\" ? valueWidth : \"50\" : \"50%\";\n\n    if (displayType == \"normal\" || displayType == \"both\" || displayType == \"reversed\") {\n\n      // Special case with lower values, so they want both fields in \"auto\" width\n      if (labelWidth && bizagi.util.percent2Number(labelWidth) < 5 &&\n      valueWidth && bizagi.util.percent2Number(valueWidth) < 5) {\n        return { label: 0, control: 100 };\n      }\n      // Normalize percentages\n      if (labelWidth && !valueWidth) {\n        labelWidth = bizagi.util.percent2Number(labelWidth);\n        valueWidth = 100 - labelWidth;\n\n      } else if (!labelWidth && valueWidth) {\n        valueWidth = bizagi.util.percent2Number(valueWidth);\n        labelWidth = 100 - valueWidth;\n      } else {\n        labelWidth = bizagi.util.percent2Number(labelWidth);\n        valueWidth = bizagi.util.percent2Number(valueWidth);\n\n        // Check 100% percentage\n        if (labelWidth + valueWidth != 100 && typeof self.properties != \"undefined\" && self.properties.layoutType != \"pixels\") {\n          valueWidth = 100 - labelWidth;\n        }\n      }\n    } else {\n      labelWidth = 100;\n      valueWidth = 100;\n    }\n\n    return { label: labelWidth, control: valueWidth };\n  },\n  /*\r\n     *   Get param value idCase\r\n     */\n  getIdCase: function getIdCase() {\n    var self = this;\n    return self.getFormContainer().params.idCase || bizagi.context.idCase;\n  },\n  /*\r\n     *   Get param value idWorkitem\r\n     */\n  getIdWorkitem: function getIdWorkitem() {\n    var self = this;\n    return self.getFormContainer().params.idWorkitem || bizagi.context.idWorkitem;\n  },\n  /*\r\n     *   Get param value idTask\r\n     */\n  getidTask: function getidTask() {\n    var self = this;\n    return self.getFormContainer().params.idTask || bizagi.context.idTask;\n  },\n  /*\r\n     *   Get param value sessionId\r\n     */\n  getSessionId: function getSessionId() {\n    var self = this;\n    return self.getFormContainer().properties.sessionId;\n  },\n\n  /*\r\n     *   CELL STUFF\r\n     *   TODO: Move to other place\r\n     */\n\n  /* Customizes cell color*/\n  changeCellColor: function changeCellColor(color) {\n    var self = this;\n    var control = self.getControl();\n    if (control) {\n      if (color != 'none') {\n        control.css(\"color\", color);\n        control.find(\"input, textarea, label\").each(function (i, element) {\n          $(element).css(\"color\", color);\n        });\n      } else {\n        control.css(\"color\", \"\");\n        control.find(\"input, textarea, label\").each(function (i, element) {\n          $(element).css(\"color\", \"\");\n        });\n      }\n    }\n  },\n\n  /**\r\n      * Customizes cell background color\r\n      * @param color\r\n      */\n  changeCellBackgroundColor: function changeCellBackgroundColor(color) {\n    var self = this;\n    var control = self.getControl();\n    var backgroundColor = \"\";\n    var backgroundImage = \"\";\n\n    if (control) {\n      if (color != 'none') {\n        backgroundColor = color;\n        backgroundImage = \"none\";\n      }\n\n      if (self.properties.editable) {\n        var needBGPaint = false;\n\n        control.find(\"input, textarea, .ui-selectmenu\").each(function (i, element) {\n\n          if ((element.type == \"text\" || element.type == \"textarea\") && !$(element).hasClass('ui-select-data'))\n          needBGPaint = true;\n\n          $(element).css({\n            \"background-color\": backgroundColor,\n            \"background-image\": backgroundImage });\n\n        });\n\n        if (!needBGPaint) {\n          control.closest(\"td\").each(function (i, element) {\n            $(element).css({\n              \"background-color\": backgroundColor,\n              \"background-image\": backgroundImage });\n\n          });\n        }\n\n      } else {\n        control.each(function (i, element) {\n          //TODO: Validar si se aplican los estilos en tablet aun sin esta linea, cuidado con desktop\n          var item = $(element).hasClass(\"ui-bizagi-cell-readonly\") ? control.closest(\"td\") : $(element);\n          item.css({\n            \"background-color\": backgroundColor,\n            \"background-image\": backgroundImage });\n\n        });\n      }\n    }\n\n\n  },\n\n  /**\r\n      * Changes the cell visibility\r\n      * @param argument\r\n      */\n  changeCellVisibility: function changeCellVisibility(argument) {\n    var self = this;\n    var properties = self.properties;\n    var control = self.getControl();\n\n    if (control) {\n      // Hide - show the render\n      if (bizagi.util.parseBoolean(argument) == true) {\n        //control.show();\n        control.css(\"visibility\", \"visible\");\n        control.css(\"display\", \"\");\n\n        self.element && self.element.show();\n      } else {\n        //control.hide();\n        control.css(\"visibility\", \"hidden\");\n      }\n    }\n\n    // Update properties\n    properties.visible = argument;\n  },\n\n  /**\r\n      * Changes the cell required\r\n      * @param argument\r\n      */\n  changeCellRequired: function changeCellRequired(argument) {\n    var self = this;\n    var properties = self.properties;\n    var control = self.getControl();\n\n    if (control) {\n      // Check if argument is true and control donot have any value\n      if (bizagi.util.parseBoolean(argument) == true && bizagi.util.isEmpty(self.value)) {\n        control.addClass('control-required');\n        control.append('<div class=\"ui-bizagi-render-control-required\"></div>');\n      } else {\n        control.removeClass('control-required');\n        $(\".ui-bizagi-render-control-required\", control).remove();\n      }\n      // Update properties\n      properties.required = argument;\n    }\n  },\n\n  /**\r\n      * Method to create deferred at the moment to start multiaction\r\n      */\n  startActionExecution: function startActionExecution() {\n    var self = this;\n    self.startLoading();\n    self.actionExecutionDeferred = new $.Deferred();\n  },\n\n  /**\r\n      * method to resolve the deferred when multiaction finish\r\n      */\n  endActionExecution: function endActionExecution() {\n    var self = this;\n    self.endLoading();\n    if (self.actionExecutionDeferred) self.actionExecutionDeferred.resolve();\n    delete self.actionExecutionDeferred;\n  },\n\n  /**\r\n      * Method to return the promise to anyone that needs to know if multiaction ended\r\n      * @returns {*}\r\n      */\n  readyActionExecution: function readyActionExecution() {\n    var self = this;\n    if (!self.actionExecutionDeferred) return $.when(true);\n    return self.actionExecutionDeferred.promise();\n  },\n\n  /**\r\n      * Verifies is the elements was inside a new row in a grid\r\n      * @returns {boolean}\r\n      */\n  isFromCreatedRow: function isFromCreatedRow() {\n    var self = this;\n\n    if (self.grid) {\n      var i = self.grid.columns.length;\n\n      while (i-- > 0) {\n        if (self.grid.columns[i].properties.xpath == self.properties.xpath) {\n          if (self.grid.columns[i].isNewRow == true) {\n            return true;\n          }\n        }\n      }\n    }\n    return false;\n  },\n  /**\r\n      * Submits a invalidate page cache request\r\n      * @param params\r\n      */\n  submitInvalidatePageCacheRequest: function submitInvalidatePageCacheRequest(params) {\n    var self = this,\n    properties = self.properties;\n    var pageCacheToInvalidate = params ? params.idPageCache : properties.idPageCache;\n\n\n    self.dataService.invalidatePageCache({ idPageCache: pageCacheToInvalidate });\n  },\n\n  /**\r\n      * Check is design mode\r\n      */\n  isDesignMode: function isDesignMode() {\n    return this.getMode() === \"design\";\n  },\n\n  /**\r\n      * Check is design mode\r\n      */\n  isExecutionMode: function isExecutionMode() {\n    return this.getMode() === \"execution\";\n  },\n\n  /***/\n  preventDefaultForAnchorTag: function preventDefaultForAnchorTag() {\n    if (bizagi.util.isSharepointContext() || bizagi.util.isWebpartContext()) {\n      $(\"a[href='#']\", this.getControl()).click(function (ev) {\n        ev.preventDefault();\n      });\n    }\n  },\n\n  getMainForm: function getMainForm(currentForm) {\n    var fromRender = currentForm.params.fromRender;\n    if (typeof fromRender != \"undefined\")\n    this.getMainForm(fromRender.getFormContainer());else\n\n    return currentForm;\n  },\n\n  /**\r\n      * Provides a way to asynchronously observe changes in the intersection\r\n      * of a target element with an ancestor element\r\n      * @param $context\r\n      * @param callbackFn\r\n      */\n  setInterceptionObserver: function setInterceptionObserver($context, callbackFn) {\n    var self = this;\n\n    var intersectionObserver = new IntersectionObserver(function () {\n      if (!self.pluginInitialized && $context.width() !== 0) {\n\n        // Execute callback\n        if (typeof callbackFn === \"function\") {\n          callbackFn();\n        }\n\n        // Close\n        intersectionObserver.disconnect();\n      }\n    });\n\n    intersectionObserver.POLL_INTERVAL = 100; // Time in milliseconds.\n    intersectionObserver.observe($context.get(0));\n  },\n\n  /**\r\n      * Provides a way to asynchronously observe changes in the resize\r\n      * of a target element\r\n      * @param $context\r\n      * @param callbackFn\r\n      */\n  setResizeObserver: function setResizeObserver($context, callbackFn) {\n    var self = this;\n\n    var resizeObserver = new ResizeObserver(function () {\n      if (!self.pluginInitialized && $context.width() !== 0) {\n\n        // Execute callback\n        if (typeof callbackFn === \"function\") {\n          callbackFn();\n        }\n\n        // Close\n        resizeObserver.disconnect();\n      }\n    });\n    resizeObserver.observe($context.get(0));\n  },\n\n  /**\r\n      * Restore appearance of grid\r\n      */\n  restoreGridAppearance: function restoreGridAppearance() {\n    var self = this;\n    var indexes = self.getIndexes();\n\n    self.restoreAppearance();\n\n    if (self.columns.length > 0) {\n      $.each(self.columns, function (j, column) {\n        for (var i = 0; i < indexes.length; i++) {\n          column.decorateRenders[indexes[i]].restoreCellAppearance();\n        }\n      });\n    }\n  },\n\n  /**\r\n      * Save visual changes of children in grid\r\n      */\n  saveGridChildrenVisualChanges: function saveGridChildrenVisualChanges() {\n    var self = this;\n    var indexes = self.getIndexes();\n\n    self.gridChildrenVisualChanges = [];\n\n    if (self.columns.length > 0) {\n      $.each(self.columns, function (j, column) {\n        if (column.properties.xpath) {\n          for (var i = 0; i < indexes.length; i++) {\n            var cell = column.decorateRenders[indexes[i]];\n\n            if (cell && cell.properties)\n            self.gridChildrenVisualChanges[cell.properties.id + indexes[i]] = cell.visualChanges;\n          }\n\n        }\n      });\n    }\n  },\n\n  /**\r\n      * Restore visual changes of children in grid\r\n      */\n  restoreGridChildrenVisualChanges: function restoreGridChildrenVisualChanges() {\n    var self = this;\n    var indexes = self.getIndexes();\n    if (self.columns.length > 0) {\n      $.each(self.columns, function (j, column) {\n        if (column.properties.xpath) {\n          for (var i = 0; i < indexes.length; i++) {\n            var cell = column.decorateRenders[indexes[i]];\n\n            if (cell && cell.properties)\n            cell.visualChanges = self.gridChildrenVisualChanges[cell.properties.id + indexes[i]] || {};\n          }\n\n        }\n      });\n    }\n\n    delete self.gridChildrenVisualChanges;\n  },\n\n  /**\r\n      * Restore appearance of cell\r\n      */\n  restoreCellAppearance: function restoreCellAppearance() {\n    var self = this;\n\n    for (var command in self.visualChanges) {\n      switch (command) {\n        case \"color\":\n          self.changeCellColor(self.visualChanges[command]);\n          break;\n        case \"backgroundColor\":\n          self.changeCellBackgroundColor(self.visualChanges[command]);\n          break;\n        case \"required\":\n          self.changeCellRequired(self.visualChanges[command]);\n          break;\n        case \"editability\":\n          self.changeEditabilityCellControl(self.visualChanges[command], self.surrogateKey, self.properties.xpath);\n          break;\n        case \"visibility\":\n          self.changeCellVisibility(self.visualChanges[command]);\n          break;\n        case \"minValue\":\n          self.changeMinValue(self.visualChanges[command]);\n          break;\n        case \"maxValue\":\n          self.changeMaxValue(self.visualChanges[command]);\n          break;}\n\n    }\n  },\n\n  /**\r\n      * Method to perform the format to value\r\n      * @param value\r\n      * @returns {*}\r\n      */\n  formatValue: function formatValue(value) {\n    return value;\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /**\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: Bizagi Render Combo Class\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: UI Forms Team\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This script will define basic stuff for combo renders\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\n$.Class.extend(\"bizagi.rendering.combo\", {}, {\n\n  /*\r\n                                               *   Update or init the element data\r\n                                               */\n  initializeData: function initializeData(data) {\n    var self = this;\n\n    // Call base\n    self._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n\n    properties.hasLocalData = properties.data || false;\n    // TODO: Review additional value in radio control\n    properties.value = properties.value && properties.value.length > 0 ? properties.value[0] : properties.defaultValue && properties.defaultValue.length > 0 ? properties.defaultValue[0] : null;\n\n    if (typeof properties.enableTyping === \"undefined\") properties.enableTyping = true;\n    if (properties.value && properties.value.id === undefined) properties.value = null;\n    this.value = properties.value;\n\n    // Add empty node if configured\n    if (properties.hasLocalData) {\n      properties.data = this.complementData(properties.data);\n    }\n\n    // This line is to set a flag to fetch the data when rendering, or on demand, by default is false, overriding it on desktop implementation\n    properties.loadOnDemand = false;\n  },\n\n\n  /*\r\n     *   Template method to implement in each children to customize each control\r\n     */\n  renderControl: function renderControl() {\n    var self = this;\n    var params = {};\n    var renderType = bizagi.util.normalizeType(self.properties.type);\n\n    if (self.isDependant && self.properties && /^cascadingcombo$/i.test(renderType) && self.getParentCombo) {\n      var valueControl = self.getParentCombo().getValue();\n      if (valueControl && valueControl.id) {\n        params[self.Class.BA_ACTION_PARAMETER_PREFIX + \"parent\"] = valueControl.id;\n      }\n    }\n\n    return self.renderCombo(params);\n  },\n\n  /*\r\n     *   Renders the combo\r\n     */\n  renderCombo: function renderCombo(params) {\n    var self = this;\n    var properties = self.properties;\n\n    if (properties.loadOnDemand) {\n      // Render the combo without data\n      var html = self.renderComboTemplate();\n      return html;\n    } else {\n\n      // Set data promise \n      var defer = new $.Deferred();\n      var dataPromise = self.getData(params);\n\n      // Attach callback \n      $.when(dataPromise).done(function (data) {\n        // Render combo\n        var html = self.renderComboTemplate(data);\n        self.properties.data = data;\n        defer.resolve(html);\n\n      }).fail(function (data) {\n        var html = self.renderComboTemplate({});\n        defer.resolve(html);\n      });\n\n      // Returns a promise so we can hold post-render method until this is done\n      return defer.promise();\n    }\n  },\n\n  renderComboTemplate: function renderComboTemplate(data) {\n    var self = this;\n    var properties = self.properties;\n    var template = self.renderFactory.getTemplate(self.getTemplateName());\n    var emptyValue = bizagi.override.emptyLabelForCombo || self.getResource(\"render-combo-empty-selection\");\n    var value = properties.value ? \"\" : emptyValue;\n    data = data || self.properties.data || {};\n\n    if (self.properties.type === \"columnCombo\" && value === \"\" && _typeof(properties.value) === \"object\" && properties.value.id === \"\" && (properties.value.value === \"\" || properties.value.value === self.getResource(\"render-combo-empty-value\"))) {\n      value = self.getResource(\"render-combo-empty-selection\");\n    }\n\n    var html = $.fasttmpl(template, $.extend(self.getTemplateParams(), {\n      id: properties.id,\n      xpath: properties.xpath,\n      unique: bizagi.util.randomNumber(10000, 1000000),\n      idPageCache: properties.idPageCache,\n      items: data,\n      align: properties.valueAlign,\n      value: value,\n      editable: properties.editable }));\n\n\n\n    return html;\n  },\n\n\n  /*\r\n     *   Template method to implement in each device to customize each render after processed in read-only mode\r\n     */\n  postRenderReadOnly: function postRenderReadOnly() {\n    var self = this;\n    self._super();\n    var item = self.getValue();\n    var control = self.getControl();\n\n    if (self.control && self.control.parent()) {\n      self.control.parent().addClass(\"ui-bizagi-noneditable-\" + self.properties.displayType);\n    }\n    if (item) {\n\n      if (item.value != null && typeof item.value === \"boolean\") {\n        if (bizagi.util.parseBoolean(item.value) === true) {\n          item.value = this.getResource(\"render-boolean-yes\");\n\n        } else if (bizagi.util.parseBoolean(item.value) == false) {\n          item.value = this.getResource(\"render-boolean-no\");\n        }\n      }\n\n      // Returns the cached value from the properties to avoid server side fetching\n      if (self.getResource(\"render-combo-empty-value\") === item.value || self.getResource(\"render-combo-empty-selection\") === item.value) {\n        control.text(\"\");\n      } else {\n        control.html(\"<label class='readonly-control'>\" + self.formatItem(item.value) + \"</label>\");\n      }\n    } else {\n      // Render empty \n      control.text(\"\");\n    }\n  },\n\n  /*\r\n     *   Gets the template used by the combo render\r\n     *   can be overriden in subclasses to reuse logic and just change the template\r\n     */\n  getTemplateName: function getTemplateName() {\n    return \"combo\";\n  },\n\n  /*\r\n     *   Determines if we need to show the empty node or not\r\n     *   Can be overriden to change behaviour\r\n     */\n  showEmpty: function showEmpty() {\n    return true;\n  },\n\n  /*\r\n     *   Determines if we need to show the current data regardless if it belongs to data or not\r\n     *   Can be overriden to change behaviour\r\n     */\n  showCurrentData: function showCurrentData() {\n    return true;\n  },\n\n  /*\r\n     *   Fetch the data into a deferred\r\n     */\n  getData: function getData(params) {\n    var self = this;\n    var properties = self.properties;\n    var defer = new $.Deferred();\n    var mode = self.getMode();\n    var isOfflineForm = bizagi.util.isOfflineForm({ context: self });\n\n    // Just execute ajax calls when rendering in execution mode\n    if (mode !== \"execution\") return self.getDummyData();\n\n    if (properties.hasLocalData || isOfflineForm) {\n\n      // Resolve with local data    \n      defer.resolve(properties.data);\n\n    } else {\n      var renderType = bizagi.util.normalizeType(properties.type);\n\n      // Check if the data has been cached\n      if (properties.remoteDataLoaded && !/^cascadingcombo$/i.test(renderType)) {\n        defer.resolve(properties.data);\n      } else {\n        // Go to server\n        self.dataService.multiaction().getData({\n          url: properties.dataUrl,\n          xpath: properties.xpath,\n          idRender: properties.id,\n          xpathContext: properties.xpathContext,\n          idPageCache: properties.idPageCache,\n          extra: params,\n          contexttype: self.properties.contexttype || null }).\n        done(function (data) {\n\n          // Resolve the data\n          if (!properties.recalculate) {\n            properties.remoteDataLoaded = true;\n          }\n          properties.data = self.complementData(data);\n          defer.resolve(properties.data);\n\n        }).fail(function (data) {\n\n          var allowActions = true;\n          var form = self.getFormContainer();\n\n          if (bizagi.util.isNativeMobileDevice() && typeof form !== \"undefined\")\n          allowActions = form.allowOnlineActions();\n\n          if (data.type === \"not-processed\" && allowActions)\n          return;\n\n          // Show error from server\n          var msgObj = self.properties.displayName + \": \";\n\n          if (typeof data === \"string\") {\n            var auxMsg = JSON && JSON.parse(data) || $.parseJSON(data);\n          } else {\n            var auxMsg = data;\n          }\n\n          msgObj += auxMsg.message;\n\n          form.addValidationMessage(msgObj);\n\n          defer.reject(data);\n        });\n      }\n    }\n\n    return defer.promise();\n  },\n\n  /*\r\n     *   Creates a set of dummy data in order to display it when rendering in design or layout mode\r\n     */\n  getDummyData: function getDummyData() {\n    var self = this;\n    var properties = self.properties;\n    if (properties.data) {\n      return properties.data;\n\n    } else {\n      properties.data = [];\n      properties.data = self.complementData(properties.data);\n\n      // Add another data\n      properties.data.push({ id: \"\", value: \"Item 1\" });\n      properties.data.push({ id: \"\", value: \"Item 2\" });\n\n      return properties.data;\n    }\n  },\n\n  /*\r\n     *   Resets the data in order to fetch it again when needed\r\n     */\n  resetData: function resetData() {\n    var self = this;\n    var properties = self.properties;\n\n    properties.hasLocalData = false;\n    properties.data = null;\n    properties.remoteDataLoaded = false;\n  },\n\n  /* \r\n     *   Gets the display value of the render\r\n     */\n  getDisplayValue: function getDisplayValue() {\n    var self = this;\n\n    if (self.combo && self.combo.length > 0) {\n      // When there is a combo painted, we fetch the selected value from it\n      return self.getSelectedValue();\n    } else {\n      var displayValue = \"\";\n      var item = self.getValue();\n\n      if (item) {\n        // Check on cached propert from server first if the key exists\n        displayValue = self.formatItem(item.value);\n      }\n\n      return displayValue;\n    }\n  },\n\n\n  /*\r\n     *   Returns the selected value in the template\r\n     */\n  getSelectedValue: function getSelectedValue() {\n  },\n\n  /*\r\n     *   Adds custom parameters to process the template\r\n     */\n  getTemplateParams: function getTemplateParams() {\n    return {};\n  },\n\n  /**\r\n      * Formats value of each item\r\n      * @param {string, boolean or array} value\r\n      * @example\r\n      * value = \"string\" => \"string\"\r\n      * value = true => \"yes\" or \"si\", the localized value\r\n      * value = false => \"no\", the localized value\r\n      * value = [\"string 1\", \"string 2\"] => \"string 1 - string 2\"\r\n      * @returns {string}\r\n      */\n  formatItem: function formatItem(value) {\n\n    if (value !== undefined && value !== null) {\n      if ($.isArray(value)) {\n\n        for (var i = 0, length = value.length; i < length; i++) {\n          if (value[i] != null && typeof value[i] === \"boolean\") {\n            if (bizagi.util.parseBoolean(value[i]) === true) {\n              value[i] = this.getResource(\"render-boolean-yes\");\n            } else if (bizagi.util.parseBoolean(value[i]) === false) {\n              value[i] = this.getResource(\"render-boolean-no\");\n            }\n          }\n        }\n        return value.join(\" - \");\n      } else {\n        return value;\n      }\n    } else {\n      return \"\";\n    }\n  },\n\n  /*\r\n     *   Add the render data to the given collection in order to send data to the server\r\n     */\n  collectData: function collectData(renderValues) {\n    var self = this;\n    var properties = self.properties;\n\n    // Add the render value\n    var xpath = properties.xpath;\n    var value = self.getValue();\n\n    if (self.controlValueIsChanged()) {\n      // Filter by valid xpaths and valid values\n      // Remove empty validation for value for combos        \n      if (!bizagi.util.isEmpty(xpath) && value !== null && typeof value !== \"undefined\") {\n        // Add a validation because sometimes value contains an empty not null object\n        if (_typeof(value) === \"object\" && (value.id === undefined || value.id === \"\")) {\n          renderValues[properties.xpath] = \"\";\n        } else {\n          // Add the value to the server\n          renderValues[properties.xpath] = typeof value.id !== \"undefined\" ? value.id : \"\";\n        }\n      }\n    }\n  },\n\n  controlValueIsChanged: function controlValueIsChanged() {\n    var self = this;\n    var properties = self.properties;\n    var currentValue = self.getValue();\n    var originalValue = properties.originalValue;\n    var defaultValue = properties.defaultValue;\n\n    var result = true;\n\n    if ($.forceCollectData) {\n      return result;\n    }\n\n    currentValue = currentValue && currentValue.length !== undefined ? currentValue[0] : currentValue;\n    originalValue = originalValue && originalValue.length !== undefined ? originalValue[0] : originalValue;\n    defaultValue = defaultValue && defaultValue.length !== undefined ? defaultValue[0] : defaultValue;\n\n    currentValue = currentValue && currentValue.id !== undefined ? currentValue.id : currentValue;\n    originalValue = originalValue && originalValue.id !== undefined ? originalValue.id : originalValue;\n    defaultValue = defaultValue && defaultValue.id !== undefined ? defaultValue.id : defaultValue;\n\n    if (defaultValue !== undefined) {\n      if (defaultValue != originalValue || defaultValue != currentValue) {\n        result = true;\n      } else {\n        result = false;\n      }\n    } else {\n      result = currentValue != originalValue ? true : false;\n    }\n\n    return result;\n  },\n\n  /*\r\n     * Parses additional values info in order to format them correctly\r\n     */\n  parseAdditionalValues: function parseAdditionalValues(data) {\n    var self = this;\n\n    return $.map(data, function (item) {\n      var value = item.value ? self.formatItem(item.value) : item;\n      var newItem = { id: item.id, value: value };\n\n      if (item.hidden) newItem.hidden = true;\n      return item;\n    });\n  },\n\n  /*\r\n     *   Complement data from server before control implementation\r\n     */\n  complementData: function complementData(data) {\n    var self = this;\n    var properties = self.properties;\n\n    var bCurrentDataFound = false;\n    $.each(data, function (i, item) {\n\n      if (item.value !== undefined && item.value !== null) {\n        item.value = self.formatItem(item.value);\n        if (properties.value) {\n          if (item.id == properties.value.id) {\n            bCurrentDataFound = true;\n          }\n        }\n      } else {\n        item.value = \"\";\n      }\n    });\n\n    // Add empty node if configured\n    if (self.showEmpty()) {\n      var emptyFound = false;\n      for (var i = 0, length = data.length; i < length; i++) {\n        if (data[i].id === \"\") {\n          emptyFound = true;\n          break;\n        }\n      }\n\n      if (!emptyFound) {\n        var dataValue = bizagi.override.emptyLabelForCombo || bizagi.localization.getResource(\"render-combo-empty-value\");\n        data.unshift({ id: \"\", value: dataValue });\n      }\n    }\n\n    if (properties.value) {\n      if (!bCurrentDataFound && self.showCurrentData()) {\n        data.unshift({ id: properties.value.id, value: properties.value.value, hidden: true });\n      }\n    }\n\n    // Add additional value\n    return self.parseAdditionalValues(data);\n  },\n\n  /*\r\n     *   Check if a render has no value for required validation\r\n     */\n  hasValue: function hasValue() {\n    var self = this;\n    var currentValue = self.getValue();\n\n    if (bizagi.util.isEmpty(currentValue)) return false;\n    if (Object.prototype.toString.apply(currentValue) === \"[object Object]\" && (bizagi.util.isEmpty(currentValue.id) || currentValue.id == 0)) return false;\n\n    // Else\n    return true;\n  },\n\n  /*\r\n     * Cleans current data\r\n     */\n  cleanData: function cleanData() {\n    var self = this;\n    var value = { id: \"\", label: \"\" };\n\n    self.setDisplayValue(value);\n    self.setValue(value, false);\n  },\n\n  beforeToRefresh: function beforeToRefresh() {\n    this.column && !this.column.comboData && this.getData();\n  },\n\n  isExtraItem: function isExtraItem() {\n    var self = this;\n    var data = self.value || {};\n    var value = data.value || \"\";\n\n    return value === \"\" || value === self.getResource(\"render-combo-empty-selection\") || value === self.getResource(\"render-combo-empty-value\");\n  },\n\n  escapeValue: function escapeValue(value) {\n    if (bizagi.util.isString(value)) {\n      var valueToReturn = value.replaceAll(\"<\", \"&lt;\").replaceAll(\">\", \"&gt;\");\n      return valueToReturn;\n    } else {\n      return value;\n    }\n  },\n\n  /**\r\n      *  Maps the value, when this one comes from actions\r\n      * @param value\r\n      * @returns {*}\r\n      */\n  mapValue: function mapValue(value) {\n    if (value && value.fromAction) {\n      return {\n        id: value.value,\n        value: value.label,\n        label: value.label };\n\n    }\n\n    return value;\n  },\n\n  /*\r\n      *  Preprocess value before setValue\r\n      */\n  preprocessValue: function preprocessValue(value) {\n    var self = this;\n    if (typeof value === \"undefined\" || value === null) return value;\n    var _value = {\n      id: \"\",\n      value: undefined };\n\n    // If the value comes from an action.\n    if (value.fromAction) {\n      value = {\n        id: value.value,\n        value: value.label };\n\n    }\n    if (typeof value === \"number\" || typeof value === \"string\") {\n      _value.id = typeof value === \"string\" ? Number(value) : value;\n      var tmpValue = self.findDataValueById(_value.id);\n      _value.value = tmpValue ? tmpValue.value : \"\";\n    } else if (_typeof(value) === \"object\") {\n      // define the object id\n      if (typeof value.id !== \"undefined\" && value.id !== null) {\n        if (typeof value.id === \"string\" && value.id !== \"\") {\n          _value.id = Number(value.id);\n          if (isNaN(_value.id)) _value.id = value.id;\n        } else {\n          _value.id = value.id;\n        }\n        if (_value.id !== \"\" && (typeof value.value === \"undefined\" || value.value === null || value.value === \"\")) {\n          var tmpValue = self.findDataValueById(_value.id);\n          _value.value = tmpValue ? tmpValue.value : value.value;\n        }\n      }\n      //define the object value\n      if (typeof value.value !== \"undefined\" && value.value !== null && value.value !== \"\") {\n        if (typeof value.value === \"boolean\") {\n          _value.value = value.value ? self.getResource(\"render-boolean-yes\") : self.getResource(\"render-boolean-no\");\n        } else if (Array.isArray(value.value)) {\n          _value.value = value.value.map(function (el) {\n            return typeof el === \"boolean\" ? el ? self.getResource(\"render-boolean-yes\") : self.getResource(\"render-boolean-no\") : el;\n          }).join(\" - \");\n        } else {\n          _value.value = value.value;\n        }\n      }\n    }\n    return _value;\n  },\n\n  validateValue: function validateValue(value) {\n    if (value.id != undefined && (typeof value.id === \"number\" && value.id !== null || typeof value.id === \"string\" && value.id.length > 0)) {\n      if (value.value !== null && typeof value.value === \"boolean\") {\n        translated = true;\n        if (bizagi.util.parseBoolean(value.value) === true) {\n          value.value = bizagi.localization.getResource(\"render-boolean-yes\");\n        } else if (bizagi.util.parseBoolean(value.value) === false) {\n          value.value = bizagi.localization.getResource(\"render-boolean-no\");\n        }\n      } else if (value.value != null && _typeof(value.value) === \"object\") {\n        for (var i = 0, length = value.value.length; i < length; i++) {\n          if (value.value[i] != null && typeof value.value[i] === \"boolean\") {\n            if (bizagi.util.parseBoolean(value.value[i]) === true) {\n              value.value[i] = bizagi.localization.getResource(\"render-boolean-yes\");\n            } else if (bizagi.util.parseBoolean(value.value[i]) === false) {\n              value.value[i] = bizagi.localization.getResource(\"render-boolean-no\");\n            }\n          }\n        }\n      }\n    }\n\n    return value;\n  },\n\n  /**\r\n      * Finds an element in the combo data values by id\r\n      * @param {int} id\r\n      * @returns {Object}\r\n      */\n  findDataValueById: function findDataValueById(id) {\n    return (this.properties.data || []).find(function (e) {\n      return e.id == id;\n    });\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /*\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: BizAgi Render Date Class\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: UI Forms Team\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This script will define basic stuff for date renders\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\n$.Class.extend(\"bizagi.rendering.date\", {}, {\n  /*\r\n                                               *   Update or init the element data\r\n                                               */\n  initializeData: function initializeData(data) {\n    var self = this;\n    var ud = bizagi.util.dateFormatter;\n\n    // Call base\n    this._super(data);\n\n    // Fill default properties\n    var properties = self.properties;\n    var dateFormat = self.getResource(\"dateFormat\");\n    var timeFormat = self.getResource(\"timeFormat\");\n\n    // We will hold here the value to display\n    properties.displayValue = \"\";\n    properties.showTime = properties.showTime !== undefined ? bizagi.util.parseBoolean(properties.showTime) : false;\n    properties.dateFormat = properties.dateFormat || dateFormat;\n    properties.timeFormat = properties.timeFormat || timeFormat;\n    properties.fullFormat = properties.dateFormat;\n\n    // Check if it has the showtime property\n    if (properties.showTime) {\n      if (properties.fullFormat.search(/[h|H]+/gi) === -1) {\n        properties.fullFormat = properties.fullFormat + \" \" + properties.timeFormat;\n      }\n    }\n\n    // Read always parameter from server in invariant format\n    if (properties.value) {\n      var date = ud.getDateFromInvariant(properties.value, properties.showTime);\n      // Format date to current format\n      if (date != 0) {\n        // Value must always hold the value with invariant format\n        self.value = properties.value;\n        var datePickerRegional = bizagi.localization.getResource(\"datePickerRegional\");\n        properties.displayValue = bizagi.util.dateFormatter.formatDate(date, properties.fullFormat, datePickerRegional);\n      } else {\n        self.value = null;\n      }\n    }\n\n    // Fix dateFormat for datepicker\n    dateFormat = self.getDateFormat(properties.fullFormat);\n\n    var indexDateTimeSeparation = properties.fullFormat.substring(0, properties.fullFormat.indexOf(\":\")).lastIndexOf(\" \");\n    if (!properties.showTime)\n    properties.fullFormat =\n    indexDateTimeSeparation > 0 ? properties.fullFormat.substring(0, indexDateTimeSeparation) : properties.fullFormat;\n\n    properties.datePickerFormat = dateFormat.datePickerFormat;\n    properties.timePickerFormat = dateFormat.timePickerFormat;\n\n    self.i18n = bizagi.localization.getResource(\"datePickerRegional\");\n  },\n\n  /*\r\n      *   Template method to implement in each children to customize each control\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var properties = self.properties;\n    var template = self.renderFactory.getTemplate(\"date\");\n    var fullFormat = properties.fullFormat;\n\n    // Render template\n    var html = $.fasttmpl(template, {\n      id: properties.id,\n      showTime: properties.showTime,\n      value: properties.value,\n      editable: properties.editable,\n      dateFormat: bizagi.override && bizagi.override.uppercaseDatePlaceholder === true ? fullFormat.toUpperCase() : fullFormat,\n      rtl: properties.orientation == \"rtl\" });\n\n    return html;\n  },\n\n  /*\r\n      *   Template method to implement in each device to customize the render's behaviour to add handlers\r\n      */\n  configureHandlers: function configureHandlers(intHandler, isNow) {\n    var self = this;\n    var properties = self.properties;\n\n    // Set control references\n    var dateControl = self.getDateControl();\n    var timeControl = self.getTimeControl();\n\n    // Attach change event\n    dateControl.bind(\"change\", function () {\n      self.onChangeHandler();\n    });\n\n    if (properties.showTime) {\n      timeControl.bind(\"change\", function (e, isNow) {\n        if (self.updatingTime) {\n          delete self.updatingTime;\n          return;\n        }\n        self.onChangeHandler(isNow);\n      });\n    }\n  },\n\n  /*\r\n      *   Formats the date time value to the hidden control\r\n      */\n  onChangeHandler: function onChangeHandler() {\n  },\n\n  getDisplayValue: function getDisplayValue(value) {\n    var self = this;\n    var properties = self.properties;\n    var displayValue;\n\n    if (!properties.displayValue && value) {\n      var date = bizagi.util.dateFormatter.getDateFromInvariant(value, properties.showTime);\n      var datePickerRegional = bizagi.localization.getResource(\"datePickerRegional\");\n      displayValue = bizagi.util.dateFormatter.formatDate(date, properties.fullFormat, datePickerRegional);\n    } else {\n      displayValue = \"\";\n    }\n\n    // We can return the display value isntance\n    return properties.displayValue || displayValue || \"\";\n  },\n\n  /*\r\n      *   Add the render data to the given collection in order to send data to the server\r\n      */\n  collectData: function collectData(renderValues) {\n    var self = this;\n    var properties = self.properties;\n\n    // Add the render value\n    var xpath = properties.xpath;\n    var value = self.getValue();\n\n    if (self.controlValueIsChanged()) {\n      // Filter by valid xpaths and valid values\n      if (!bizagi.util.isEmpty(xpath)) {\n        if (!bizagi.util.isEmpty(value)) {\n          // Formats the value in full invariant (with time) in order to send to the server\n          var date = bizagi.util.dateFormatter.getDateFromInvariant(value, properties.showTime);\n          if (typeof date != \"undefined\")\n          if (date !== 0) {\n            if (!properties.showTime) {\n              date.setHours(0, 0, 0, 0);\n            }\n            renderValues[properties.xpath] = bizagi.util.dateFormatter.formatInvariant(date, true);\n          }\n        } else if (value === \"\") {\n          renderValues[properties.xpath] = \"\";\n        }\n      }\n    }\n  },\n\n  /*\r\n      *   Gets the date control\r\n      */\n  getDateControl: function getDateControl() {\n  },\n\n  /*\r\n      *   Gets the time control\r\n      */\n  getTimeControl: function getTimeControl() {\n  },\n\n  /*\r\n      * Public method to determine if a value is valid or not\r\n      */\n  isValid: function isValid(invalidElements) {\n    var self = this,\n    properties = self.properties;\n\n    // Call base\n    var bValid = this._super(invalidElements);\n    var value = self.getValue();\n    if (value) {\n      if (bizagi.util.parseBoolean(properties.editable) === true) {\n        value = self.getNormalizeDate(bizagi.util.dateFormatter.getDateFromInvariant(value, properties.showTime));\n        var message;\n\n        // Check that we have a valid data\n        if (value != 0) {\n          // Check min value\n          if (properties.minValue && (typeof properties.minValue === \"string\" || typeof properties.minValue == \"number\")) {\n            var minValue = self.getNormalizeDate(\n            typeof properties.minValue == \"string\" ?\n            bizagi.util.dateFormatter.getDateFromInvariant(properties.minValue, properties.showTime) :\n            new Date(properties.minValue));\n\n\n            if (value < minValue) {\n              message = this.getResource(\"render-date-minimum-validation\").\n              replaceAll(\"#label#\", properties.displayName).\n              replaceAll(\"#minValue#\", bizagi.util.dateFormatter.formatDate(minValue, properties.fullFormat));\n              invalidElements.push({\n                xpath: properties.xpath,\n                message: message });\n\n              bValid = false;\n            }\n          }\n\n          // Check max value\n          if (properties.maxValue && (typeof properties.maxValue == \"string\" || typeof properties.maxValue == \"number\")) {\n            var maxValue = self.getNormalizeDate(\n            typeof properties.maxValue == \"string\" ?\n            bizagi.util.dateFormatter.getDateFromInvariant(properties.maxValue, properties.showTime) :\n            new Date(properties.maxValue));\n\n\n            if (value > maxValue) {\n              message = this.getResource(\"render-date-maximum-validation\").\n              replaceAll(\"#label#\", properties.displayName).\n              replaceAll(\"#maxValue#\", bizagi.util.dateFormatter.formatDate(maxValue, properties.fullFormat));\n              invalidElements.push({\n                xpath: properties.xpath,\n                message: message });\n\n              bValid = false;\n            }\n          }\n        }\n      }\n    }\n    return bValid;\n  },\n\n  /**\r\n      * Translate standar date format to jquery date picker\r\n      * @property {string} format Control's date format\r\n      * @returns {JSON object} A JSON Object whith the date and time format\r\n      */\n  getDateFormat: function getDateFormat(format) {\n    var datePickerFormat = format;\n    var timePickerFormat = undefined;\n    var init;\n\n    if (format.search(\"h\") != -1 || format.search(\"H\") != -1) {\n      if (format.search(\"h\") != -1) {\n        init = format.search(\"h\");\n      } else {\n        init = format.search(\"H\");\n      }\n\n      datePickerFormat = format.substring(0, init - 1);\n      timePickerFormat = format.substr(init);\n    }\n\n    // Fix month\n    if (datePickerFormat.indexOf(\"MMMM\") >= 0) {\n      datePickerFormat = datePickerFormat.replaceAll(\"MMMM\", \"MM\");\n    } else if (datePickerFormat.indexOf(\"MMM\") >= 0) {\n      // Month name short\n      datePickerFormat = datePickerFormat.replaceAll(\"MMM\", \"M\");\n    } else if (datePickerFormat.indexOf(\"MM\") >= 0) {\n      // Month two digits\n      datePickerFormat = datePickerFormat.replaceAll(\"MM\", \"mm\");\n    } else if (datePickerFormat.indexOf(\"M\") >= 0) {\n      // Month one digits\n      datePickerFormat = datePickerFormat.replaceAll(\"M\", \"m\");\n    }\n\n    // Fix years\n    if (datePickerFormat.search(\"yyyy\") != -1) {\n      datePickerFormat = datePickerFormat.replaceAll(\"yyyy\", \"yy\");\n    } else {\n      if (datePickerFormat.search(\"yy\") != -1) {\n        datePickerFormat = datePickerFormat.replaceAll(\"yy\", \"y\");\n      }\n    }\n\n    datePickerFormat = datePickerFormat.replaceAll(\"dddd\", \"DD\"); // Fix days\n\n    return {\n      datePickerFormat: datePickerFormat,\n      timePickerFormat: timePickerFormat };\n\n  },\n\n  /*\r\n      *   Template method to implement in each device to customize each render after processed\r\n      */\n  postRender: function postRender() {\n    var self = this;\n    var properties = self.properties;\n    // Call base\n    this._super();\n    if (typeof properties.maxValue == \"undefined\")\n    properties.maxValue = \"12/31/\" + parseInt(new Date().getFullYear() + 200).toString() + \" 00:00:00\"; //Current year + 200 IE or 9999\n    if (typeof properties.minValue == \"undefined\")\n    properties.minValue = \"01/01/\" + parseInt(new Date().getFullYear() - 200).toString() + \" 00:00:00\"; //Current year - 200 IE or 1753 for SQL Server compat\n  },\n\n  /**\r\n      * Sets milliseconds to 0 in date\r\n      * @param {Date} date date to be treated\r\n      * @returns {Date} date converted with milliseconds 0\r\n      */\n  getNormalizeDate: function getNormalizeDate(date) {\n    var self = this;\n    if (date != 0 && date != null) {\n      if (!self.properties.showTime) {\n        date.setHours(0, 0, 0, 0);\n      } else date.setMilliseconds(0);\n    }\n    return date;\n  },\n\n  /**\r\n      * Configure the timeformat\r\n      */\n  getTimeFormat: function getTimeFormat(format) {\n    return format.replaceAll(\"m\", \"i\").replaceAll(\"tt\", \"A\");\n  },\n\n  /**\r\n      * Sets value to the control\r\n      * @param {Date} date date to asign\r\n      * @returns {}\r\n      */\n  setValueFromCalendarButtons: function setValueFromCalendarButtons(date) {\n    var self = this;\n    if (date) date = self.getNormalizeDate(date);else\n    {\n      value = null;\n      self.setValue(\"\");\n      self.setDisplayValue(\"\");\n    }\n  },\n\n  /*\r\n      *   Changes the render min value\r\n      */\n  changeMinValue: function changeMinValue(value) {\n    var self = this;\n    var properties = self.properties;\n    var ud = bizagi.util.dateFormatter;\n\n    // Set value in control\n    if (value && properties.editable) {\n      if (typeof value === \"number\") {\n        value = ud.formatInvariant(self.getNormalizeDate(new Date(value)), properties.showTime); // Set as invariant\n      } else {\n        value = self.getNormalizeDate(_typeof(value) === \"object\" ? value : ud.getDateFromInvariant(value, properties.showTime));\n        value = ud.formatInvariant(value);\n      }\n      properties.minValue = value;\n    }\n  },\n\n  /*\r\n      *   Changes the render max value\r\n      */\n  changeMaxValue: function changeMaxValue(value) {\n    var self = this;\n    var properties = self.properties;\n    var ud = bizagi.util.dateFormatter;\n\n    // Set value in control\n    if (value && properties.editable) {\n      if (typeof value === \"number\") {\n        value = ud.formatInvariant(self.getNormalizeDate(new Date(value)), properties.showTime); // Set as invariant\n      } else {\n        value = self.getNormalizeDate(_typeof(value) === \"object\" ? value : ud.getDateFromInvariant(value, properties.showTime));\n        value = ud.formatInvariant(value);\n      }\n      properties.maxValue = value;\n    }\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /**\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: Bizagi Render Text Class\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: UI Forms Team\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This script will define basic stuff for text renders\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\n$.Class.extend(\"bizagi.rendering.extendedText\", {}, {\n\n  /**\r\n                                                       * Update or init the element data\r\n                                                       * @param {} data\r\n                                                       */\n  initializeData: function initializeData(data) {\n    var self = this;\n\n    // Call base\n    self._super(data);\n\n    // Check if offline forms is supported\n    this.isOfflineForm = bizagi.util.isOfflineForm({ context: self });\n    this.hasMaxLines = this.properties.maxLines ? true : false;\n\n    // Fill default properties\n    var properties = this.properties;\n\n    // Fill default properties\n    properties.maxLines = this.properties.maxLines || 6;\n\n    if (properties.regularExpressionExpression) {\n      var message = properties.regularExpressionMessage || self.getResource(\"render-text-regular-expression-default-message\");\n\n      properties.regularExpression = { \"expression\": properties.regularExpressionExpression, \"message\": message };\n    }\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      */\n  renderControl: function renderControl() {\n    var template = this.renderFactory.getTemplate(\"extendedText\");\n\n    // Render template\n    var html = $.fasttmpl(template, {\n      id: this.properties.id,\n      isEmptyField: typeof this.properties.value === \"undefined\",\n      editable: this.properties.editable });\n\n\n    return html;\n  },\n\n  /**\r\n      * Template method to implement in each device to customize each render after processed\r\n      */\n  postRender: function postRender() {\n    var self = this;\n    self._super();\n\n    var control = self.getControl();\n    self.textarea = control.find(\"textarea\");\n\n    // If is textarea, then enable resize element.\n    if (self.textarea) {\n      self.textarea.css({ resize: \"both\" });\n    } else {\n      self.textarea.css({ resize: \"none\" });\n    }\n\n    // Attach event for retype double\n    if (self.properties.retype === \"double\")\n    self.attachRetypeDouble();\n  },\n\n  /**\r\n      * Function virtual implements on children (desktop,samrtphone...).\r\n      */\n  attachRetypeDouble: function attachRetypeDouble() {\n  },\n\n  /**\r\n      * Template method to implement in each device to customize the render's behaviour to add handlers\r\n      */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    var properties = self.properties;\n\n    // Set the default maxlength for the input if is 0 or undefined set to infinity\n    // this resolve issue with scope strings that don't have maxlength\n    if (properties.maxLength)\n    self.textarea.prop('maxlength', properties.maxLength);\n\n    if (properties.maxLines) {\n      self.textarea.prop('rows', properties.maxLines);\n    } else {\n      self.textarea.prop('rows', 6);\n    }\n\n    // Attach change event\n    self.textarea.bind(\"change\", function () {\n\n      // Updates internal value\n      self.setValue(self.textarea.val());\n\n      // Check that the value is valid\n      var validationMessages = [];\n      if (properties.retype !== \"duplicate\") {\n        if (self.isValid(validationMessages) || typeof properties.regularExpression === \"undefined\") {\n          // Update value again triggering handlers\n          self.setValue(self.textarea.val(), true);\n        } else {\n          // Set error message\n          var message = validationMessages[0].message;\n          bizagi.showMessageBox(message, \"Bizagi\", \"error\");\n        }\n      }\n    });\n\n    // Attach blur event\n    self.textarea.bind(\"blur\", function () {\n      // Updates internal value\n      self.setValue(self.textarea.val());\n    });\n  },\n\n  /**\r\n      * Public method to determine if a value is valid or not\r\n      * @param {} invalidElements\r\n      * @returns {}\r\n      */\n  isValid: function isValid(invalidElements) {\n    var self = this;\n    var properties = self.properties;\n    var message;\n\n    // Call base\n    var bValid = this._super(invalidElements);\n    var value = self.getValue();\n    var regEx = new RegExp(\".*?(<|\\\\u003C)(.+?)(>|\\\\u003E)(.?)|eval\\\\(|eval\\\\u0028\", \"g\");\n\n    // Offline capability\n    if (this.isOfflineForm && bizagi.util.isMobileDevice()) {\n      value = value && _typeof(value) === \"object\" && value.value ? value.value : value;\n    }\n\n    // Check regular expression\n    if (properties.regularExpression) {\n      if (properties.editable) {\n        if (value && (value.match(regEx) || !value.match(new RegExp(properties.regularExpression.expression)) && self.properties && self.properties.xpath === \"userName\")) {\n          message = properties.regularExpression.message;\n          invalidElements.push({ xpath: properties.xpath, message: message });\n          bValid = false;\n        } else {\n          if (value && (value.match(regEx) || !value.match(new RegExp(properties.regularExpression.expression)))) {\n            message = properties.regularExpression.message;\n            invalidElements.push({ xpath: properties.xpath, message: message });\n            bValid = false;\n          }\n        }\n      }\n    } else {\n      if (value && value.match(new RegExp(\".*?eval\\\\(\", \"g\")) && value.match(new RegExp(\".*?eval\\\\u0028\", \"g\"))) {\n        if (properties.editable) {\n          message = this.getResource(\"render-text-regular-expression-default-message\");\n          invalidElements.push({ xpath: properties.xpath, message: message });\n          bValid = false;\n        }\n      }\n    }\n\n    return bValid;\n  },\n\n  /**\r\n      * Sets the value in the rendered control\r\n      * @param {} value\r\n      * @returns {}\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n    var control = self.getControl();\n\n    if (self.properties.editable == false) {\n      // Render as simple value\n      if (typeof value == \"string\") {\n\n        // Replace line breaks for html line breaks\n        var valueToDisplay = bizagi.util.encodeHtmlText(self.getDisplayValue());\n\n        control.html(valueToDisplay);\n      }\n    }\n\n    // Set internal value\n    self.setValue(value, false);\n  },\n\n  /**\r\n      * Add the render data to the given collection in order to send data to the server\r\n      * @param {} renderValues\r\n      * @returns {}\r\n      */\n  collectData: function collectData(renderValues) {\n    // Call base\n    this._super(renderValues);\n  },\n\n\n  /**\r\n      * Helptext tooltip\r\n      * @param {} control\r\n      * @param {} currentValue\r\n      * @param {} currentTitle\r\n      */\n  createTooltip: function createTooltip(control, currentValue, currentTitle) {\n    control.data(\"oldValue\", currentValue);\n    control.val(\"\");\n\n    if (control.data('ui-tooltip')) control.tooltip('destroy');\n\n    control.attr(\"title\", currentTitle);\n    control.tooltip();\n\n    var toolTipZindex = $.getMaxZindex();\n    control.tooltip().on(\"tooltipopen\", function (event, ui) {\n      ui.tooltip.zIndex(toolTipZindex);\n    });\n\n    // Create new tooltip\n    control.tooltip(\"open\");\n\n    var timeOutFocus = setTimeout(function () {\n      control.focus();\n      clearTimeout(timeOutFocus);\n    }, 100);\n  },\n\n  //#region No side effects functions\n  /**\r\n   * Gets the string with the correct size\r\n   * @param {string} value String value to validate\r\n   * @param {Int} maxLength Maximum size of the string\r\n   * @returns {string} String value validated\r\n   */\n  validateValue: function validateValue(value, maxLength) {\n    if (maxLength < 1 || value.length <= maxLength) return value;\n    return value.substr(0, maxLength);\n  }\n  //#endregion No side effects functions\n});","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /**\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: Bizagi Render Grid Class\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: UI Forms Team\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This script will define basic stuff for grids\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\n$.Class.extend(\"bizagi.rendering.grid\", {}, {\n\n  /*\r\n                                               *   Update or init the element data\r\n                                               */\n  initializeData: function initializeData(data) {\n    var self = this;\n\n    // Call base\n    this._super(data);\n    self.originalProperties = bizagi.clone(data.properties);\n\n    // Fill default properties\n    var properties = this.properties;\n\n    self.initProperties();\n\n    // Set columns\n    var areThereEditableColumns;\n    var areThereTotalizedColumns;\n    self.columns = [];\n    self.columnsIds = [];\n    self.enabledChecks = {};\n    self.exclusiveChanges = {};\n    self.originalEnabledChecks = [];\n    $.each(data.elements, function (i, column) {\n      var columnProperties = column.render.properties;\n\n      // the groupby property is taken of column\n      if (columnProperties.groupBy) {\n        properties.groupBy = columnProperties.xpath || \"\";\n        properties.allowGrouping = !bizagi.util.isEmpty(properties.groupBy) ? true : false;\n      }\n\n      if (/columnBoolean/i.test(columnProperties.type) && columnProperties.isExclusive) {\n        properties.hasExclusiveCheck = true;\n        column.render.properties.required = false;\n        self.enabledChecks[columnProperties.xpath] = [];\n      }\n\n      // If inlineEdit is false then all columns must be read only\n      if (!self.properties.inlineEdit) {\n        column.render.properties.editable = false;\n      }\n\n      // Create renderColumns\n      var columnRender = self.renderFactory.getColumn({\n        type: columnProperties.type,\n        data: column.render,\n        parent: self,\n        singleInstance: properties.singleInstance });\n\n\n      self.columns.push(columnRender);\n      self.columnsIds.push(column.render.properties.id);\n\n      if (columnProperties.editable) {\n        areThereEditableColumns = true;\n      }\n\n      if (columnProperties.totalize && columnProperties.totalize.operation) {\n        areThereTotalizedColumns = true;\n\n        // Default summary format\n        columnProperties.totalize.format = columnProperties.totalize.format || {};\n        columnProperties.totalize.format.bold = columnProperties.totalize.format.bold !== undefined ? columnProperties.totalize.format.bold : true;\n      }\n    });\n\n    // Reverse columns when using right to left orientation\n    if (properties.orientation === \"rtl\")\n    self.columns = self.columns.reverse();\n\n    // Turn off inline edit if there are any editable columns        \n    if (properties.inlineEdit && !areThereEditableColumns) {\n      properties.inlineEdit = false;\n      properties.allowEdit = false;\n    }\n\n    // Check if the grid has totalizers\n    if (areThereTotalizedColumns) {\n      properties.showSummary = true;\n      properties.rowsPerPage = 0;\n    }\n  },\n\n  initProperties: function initProperties() {\n    var self = this;\n    var form = self.getFormContainer();\n    var properties = self.properties;\n\n    /** Edit properties\r\n                                       * @default editable true\r\n                                       * @default  allowAdd true\r\n                                       */\n    $.extend(properties, self.initEditabilityProperties(\n    properties.editable,\n    properties.allowEdit,\n    properties.inlineEdit,\n    properties.withEditForm),\n    self.initAddAndDeleteProperties(\n    properties.editable,\n    properties.allowAdd,\n    properties.inlineAdd,\n    properties.allowDelete));\n\n\n    /* Define details properties*/\n    properties.allowDetail = bizagi.util.parseBoolean(properties.allowDetail) != null ? bizagi.util.parseBoolean(properties.allowDetail) : false;\n    properties.isSortable = bizagi.util.parseBoolean(properties.isSortable) != null ? bizagi.util.parseBoolean(properties.isSortable) : true;\n\n    /* Define general properties */\n    properties.keyColumn = \"\";\n    properties.data = properties.data || null;\n    properties.displayType = \"value\";\n    properties.skipInitialLoad = properties.skipInitialLoad || false;\n    properties.allowMore = bizagi.util.parseBoolean(properties.allowMore) || false;\n    properties.allowFilter = bizagi.util.parseBoolean(properties.allowFilter) || false;\n    properties.allowGrouping = false;\n    properties.groupBy = \"\";\n    properties.groupSummary = properties.groupSummary || null;\n    properties.groupText = this.getResource(\"render-grid-group-text\");\n    properties.groupCollapsed = bizagi.util.parseBoolean(properties.groupCollapsed) || false;\n    properties.groupOrder = properties.groupOrder || \"asc\";\n    properties.formShowMode = bizagi.util.parseBoolean(properties.formShowMode) || \"popup\";\n    properties.floatingHeader = bizagi.util.parseBoolean(properties.floatingHeader) || false;\n\n    properties.sortBy = properties.sortBy ? properties.sortBy : properties.data && properties.data.sort ? properties.data.sort : properties.keyColumn;\n    properties.sortOrder = properties.sortOrder !== undefined && properties.sortOrder !== null ? properties.sortOrder === \"True\" ? \"asc\" : \"desc\" : properties.data && properties.data.order ? properties.data.order : \"asc\";\n    properties.sort = properties.sortBy + \" \" + properties.sortOrder;\n\n    properties.rowsPerPage = properties.allowGrouping ? 1000 : properties.rowsPerPage || 20;\n    properties.page = 1;\n    properties.records = 0;\n    properties.totalPages = 0;\n\n    properties.addLabel = properties.addLabel || $.trim(this.getResource(\"render-grid-add-label\")) + \" \" + properties.displayName;\n    properties.editLabel = properties.editLabel || $.trim(this.getResource(\"render-grid-edit-label\")) + \" \" + properties.displayName;\n    properties.deleteLabel = properties.deleteLabel || this.getResource(\"render-ecm-confirm-bt-delete\") + \" \" + properties.displayName;\n    properties.exportOptionsLabel = properties.exportOptionsLabel || this.getResource(\"render-grid-export-options-label\") + properties.displayName;\n    properties.detailLabel = properties.detailLabel || this.getResource(\"render-collection-navigator-details-form\");\n\n    // Apply style to entire table\n    properties.tableCssClass = properties.cssClass || \"\";\n\n    properties.alreadySaved = false;\n\n    // When grid open in modal window and the parent is entity\n    if (properties.contexttype != \"entity\") {\n      properties.contexttype = typeof self.parent.getContextType == 'function' ? self.parent.getContextType() : \"\";\n    }\n\n    // Define if it is editable or not        \n    /* This part change all cells in the table to no editable,\r\n     * you must use it when the parent container has noeditable property,\r\n     * so this table is noeditable too.\r\n     */\n    try {\n      if (self.parent && typeof self.parent.properties.editable == \"boolean\" && !self.parent.properties.editable || !properties.editable) {\n        properties.editable = false;\n        properties.allowEdit = false;\n        properties.inlineEdit = false;\n        properties.allowAdd = false;\n        properties.inlineAdd = false;\n        properties.allowDelete = false;\n      }\n    } catch (e) {\n    }\n\n    // If grid has not allowEdit property in true, all fields within the grid\n    // must be no editables, so these lines changes this behavior\n    if (!properties.allowEdit || !properties.inlineEdit && !properties.withEditForm) {\n      properties.editable = false;\n    }\n\n    // Calculate render width\n    properties.labelWidth = 0;\n    properties.valueWidth = \"100%\";\n\n    // This property will be used to make custom grids with another data source\n    properties.overrideGetRemoteData = properties.overrideGetRemoteData || undefined;\n    //this property use to create a single decorated or a array of decorated\n    properties.singleInstance = bizagi.util.isEmpty(properties.singleInstance) ? true : properties.singleInstance;\n\n    // Check if the grid its opened whitin dialog form and has contextType\n    properties.contextType = form.params && form.params.data && form.params.data.contextType ? form.params.data.contextType : null;\n\n    // Create a collection to collect changes\n    self.changes = {};\n\n    // Create a collection to override properties per cell\n    self.cellOverrides = {};\n\n    // Check orientation and change order of data if its necesary (rtl)\n    if (self.isRTL() && properties.data != null) {\n      properties.data.rows = self.changeOrderData(properties.data.rows);\n    }\n  },\n\n  initEditabilityProperties: function initEditabilityProperties(editable, allowEdit, inlineEdit, withEditForm) {\n    // Set default values\n    editable = bizagi.util.parseBoolean(editable) !== null ? bizagi.util.parseBoolean(editable) : true;\n    allowEdit = bizagi.util.parseBoolean(allowEdit) !== null ? bizagi.util.parseBoolean(allowEdit) : true;\n    inlineEdit = bizagi.util.parseBoolean(inlineEdit) !== null ? bizagi.util.parseBoolean(inlineEdit) : true;\n    withEditForm = bizagi.util.parseBoolean(withEditForm) !== null ? bizagi.util.parseBoolean(withEditForm) : false;\n\n    if (!editable) {\n      allowEdit = inlineEdit = withEditForm = false;\n    }\n\n    return {\n      editable: editable,\n      allowEdit: allowEdit,\n      inlineEdit: inlineEdit,\n      withEditForm: withEditForm };\n\n  },\n\n  initAddAndDeleteProperties: function initAddAndDeleteProperties(editable, allowAdd, inlineAdd, allowDelete) {\n    // Set default values\n    editable = bizagi.util.parseBoolean(editable) !== null ? bizagi.util.parseBoolean(editable) : true;\n    allowAdd = bizagi.util.parseBoolean(allowAdd) != null ? bizagi.util.parseBoolean(allowAdd) : true;\n    inlineAdd = bizagi.util.parseBoolean(inlineAdd) != null ? bizagi.util.parseBoolean(inlineAdd) : true;\n    // Define Delete \n    allowDelete = bizagi.util.parseBoolean(allowDelete) != null ? bizagi.util.parseBoolean(allowDelete) : true;\n\n    if (!allowAdd) {\n      inlineAdd = false;\n    }\n\n    if (!editable) {\n      allowAdd = inlineAdd = allowDelete = false;\n    }\n\n    return {\n      allowAdd: allowAdd,\n      inlineAdd: inlineAdd,\n      allowDelete: allowDelete };\n\n  },\n\n  /*\r\n     *   Check if a render has no value for required validation\r\n     */\n  hasValue: function hasValue() {\n    return this.properties.data && this.properties.data.rows.length > 0;\n  },\n\n  isRTL: function isRTL() {\n    var properties = this.properties;\n    if (!properties) return true;\n    return typeof properties.orientation == \"string\" && properties.orientation.toUpperCase() == \"RTL\" ? true : false;\n  },\n\n  changeOrderData: function changeOrderData(data) {\n    var reverseDataRows = [];\n    var rows = data || [];\n    var rowKey;\n\n    $.each(rows, function (key, value) {\n      // Extract row key\n      rowKey = value.shift();\n      reverseDataRows = value.reverse();\n      // add element in the start\n      reverseDataRows.unshift(rowKey);\n\n      rows[key] = reverseDataRows;\n    });\n\n    return rows;\n  },\n\n  /**\r\n      * Specific fix RTL with localizated\r\n      * @param data\r\n      * @returns {*|Array}\r\n      */\n  removeRemainingColumns: function removeRemainingColumns(data, numColumns) {\n    var rows = data || [];\n    var remainingColumns = 0;\n    if (rows.length > 0) {\n      // \"- 1\" because the first column represent id row\n      remainingColumns = rows[0].length - numColumns - 1;\n    }\n    if (remainingColumns > 0) {\n      $.each(rows, function (key, value) {\n        // Remove remaining columns\n        for (var i = 0; i < remainingColumns; i++) {\n          value.pop();\n        }\n      });\n    }\n    return rows;\n  },\n\n  /* \r\n      *   Gets a column definition by xpath\r\n      */\n  getColumn: function getColumn(xpath) {\n    var self = this;\n    var result = null;\n    $.each(self.columns, function (i, column) {\n      if (\n      column.properties.xpath == xpath ||\n      column.properties.id == xpath ||\n      column.properties.xpath + \".\" + column.properties.id == xpath)\n      {\n        result = column;\n      }\n    });\n\n    return result;\n  },\n\n  getColumnType: function getColumnType(id) {\n    var self = this;\n    var columnIndex = self.columnsIds.indexOf(id);\n\n    if (columnIndex != -1) {\n      return self.columns[columnIndex].properties.type;\n    }\n\n    return null;\n  },\n\n  /***\r\n      * Get a specific column using the id\r\n      * @param id\r\n      * @returns {*|null}\r\n      */\n  getColumnById: function getColumnById(id) {\n    var columnIndex = this.columnsIds.indexOf(id);\n\n    return columnIndex !== -1 ? this.columns[columnIndex] : null;\n  },\n\n  /*\r\n      *   Template method to implement in each children to customize each control\r\n      *   Returns a promise that will be resolved when all the columns has been loaded\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var properties = this.properties;\n    var defer = new $.Deferred();\n\n    // Set dummy data when not in execution mode\n    var mode = self.getMode();\n    if (mode !== \"execution\") {\n      properties.data = self.getDummyData();\n    }\n\n    var template = self.getGridTemplate();\n\n    // Render template\n    var html = self.applyTemplate(template);\n\n    // Initialize columns\n    var columnInitializers = [];\n    $.each(self.columns, function (i, column) {\n\n      // Add to column initializer array so we can synch out the promises\n      var result = column.initialize();\n      if (result)\n      columnInitializers.push(result);\n    });\n\n    // Resolve when all columns has been loaded\n    $.when.apply($, columnInitializers).done(function () {\n      defer.resolve(html);\n    });\n\n    return defer.promise();\n  },\n  /*\r\n      *   Template method to implement in each device to customize each render after processed\r\n      */\n  postRender: function postRender() {\n    var self = this;\n    var control = self.getControl();\n\n    // Call base\n    this._super();\n\n    // Make control to behave as a block container\n    // TODO: Move to instances. This does not apply to mobiles\n    control.addClass(\"ui-bizagi-render-grid-container\").\n    addClass(\"ui-bizagi-render-display-block\");\n  },\n\n  /*\r\n      *   Returns the grid template to be used\r\n      */\n  getGridTemplate: function getGridTemplate() {\n    return this.renderFactory.getTemplate(\"grid\");\n  },\n\n  /*\r\n      *   Applies the template to the render and returns the resolved element\r\n      */\n  applyTemplate: function applyTemplate(template) {\n    var self = this,\n    properties = self.properties;\n    orientation = self.properties.orientation;\n\n    return $.fasttmpl(template, {\n      id: bizagi.util.encodeXpath(properties.xpath),\n      displayName: bizagi.util.encodeXpath(properties.displayName),\n      allowAdd: properties.allowAdd,\n      addLabel: properties.addLabel });\n\n  },\n  /*\r\n      *   Method to render non editable values\r\n      *   Returns a promise that will be resolved when all the columns has been loaded\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    var self = this;\n\n    // Override read-only presets\n    //  properties.allowAdd = false;\n    // Render the same, just change some presets\n    return self.renderControl();\n  },\n  /*\r\n      *   Fetch the data into a deferred\r\n      */\n  getRemoteData: function getRemoteData(params) {\n    var self = this;\n    var properties = self.properties;\n\n    // Set params\n    params = params || {};\n    $.extend(params, {\n      url: properties.dataUrl,\n      xpath: properties.xpath,\n      idRender: properties.id,\n      xpathContext: properties.xpathContext,\n      contexttype: properties.contextType,\n      idPageCache: properties.idPageCache,\n      sort: properties.sortBy,\n      order: properties.sortType,\n      page: properties.page,\n      rows: properties.rowsPerPage,\n      searchFilter: properties.searchFilter,\n      orientation: properties.orientation || \"ltr\" });\n\n\n    // Check if a custom method has been given\n    if (properties.overrideGetRemoteData) {\n      return properties.overrideGetRemoteData(params);\n    } else {\n      // Resolve with remote data\n      return self.dataService.multiaction().getGridData(params).then(function (data) {\n        self.originalProperties = self.originalProperties || {};\n        self.originalProperties.data = bizagi.clone(data);\n\n        // Resolve with fetched data\n        properties.page = data.page;\n        properties.records = data.records;\n        properties.totalPages = data.totalPages;\n\n        return data;\n      }).fail(function (error) {\n        console.error(error.message || \"Error\");\n      });\n    }\n  },\n  /*\r\n      insert a blank item in the selected column in the data matrix\r\n      */\n  spliceRowData: function spliceRowData(data, index) {\n    var self = this;\n    var mode = self.getMode();\n    if (mode === \"execution\" && data && data.rows) {\n      $.each(data.rows, function (key, value) {\n        var spliceIndex = index || data.rows[key].length;\n        data.rows[key].splice(spliceIndex, 0, \"\");\n      });\n    }\n  },\n\n  spliceRowDataVisible: function spliceRowDataVisible(data, index) {\n    var self = this;\n    var mode = self.getMode();\n    if (mode === \"execution\" && data && data.visible) {\n      $.each(data.visible, function (key, value) {\n        var spliceIndex = index || data.visible[key].length;\n        data.visible[key].splice(spliceIndex, 0, true);\n      });\n    }\n  },\n\n  spliceRowDataEditable: function spliceRowDataEditable(data, index) {\n    var self = this;\n    var mode = self.getMode();\n    if (mode === \"execution\" && data && data.editable) {\n      $.each(data.editable, function (key, value) {\n        var spliceIndex = index || data.editable[key].length;\n        data.editable[key].splice(spliceIndex, 0, true);\n      });\n    }\n  },\n\n  /*\r\n      *   Creates a set of dummy data in order to display it when rendering in design or layout mode\r\n      */\n  getDummyData: function getDummyData() {\n    var self = this;\n    var properties = self.properties;\n    if (properties.data) {\n      return properties.data;\n\n    } else {\n      var rowTemplate = [\"1\"];\n\n      // Add a value for each column\n      for (var i = 0; i < self.columns.length; i++) {\n        rowTemplate.push(\"\");\n      }\n\n      var data = {\n        \"page\": 1,\n        \"total\": 1,\n        \"records\": 1,\n        \"rows\": [rowTemplate] };\n\n\n      return data;\n    }\n  },\n  /*\r\n      *   Submits a grid edit record request for the given id\r\n      *   Returns a deferred\r\n      */\n  submitEditRequest: function submitEditRequest(id) {\n    var self = this,\n    properties = self.properties;\n\n    var xpath = properties.xpath + self.buildCellXpathFilter(id);\n\n    return self.dataService.editGridRecord({\n      url: properties.editUrl,\n      idRender: properties.id,\n      xpath: xpath,\n      xpathContext: properties.xpathContext,\n      idPageCache: properties.idPageCache,\n      contexttype: properties.contextType });\n\n  },\n  /*\r\n      *   Submits a grid edit record request for the given id\r\n      *   Returns a deferred\r\n      */\n  submitSaveRequest: function submitSaveRequest(id, data) {\n    var self = this,\n    properties = self.properties;\n\n    // Check if there are deferreds to wait\n    var deferredsToWait = null;\n    if (data.deferreds) {\n      deferredsToWait = $.when.apply($, data.deferreds);\n      delete data.deferreds;\n    }\n\n    // Calculate xpath context\n    var xpathContext = properties.xpathContext.length > 0 ? properties.xpathContext + \".\" + properties.xpath + self.buildCellXpathFilter(id) : properties.xpath + self.buildCellXpathFilter(id);\n\n    return $.when(deferredsToWait).pipe(function () {\n      self.startLoading();\n      return self.dataService.saveGridRecord({\n        url: properties.saveUrl,\n        idRender: properties.id,\n        xpath: properties.xpath,\n        xpathContext: xpathContext,\n        submitData: data,\n        contexttype: properties.contextType,\n        disableServerGridValidations: data.disableServerGridValidations || false }).\n      pipe(function (dataResp) {\n        self.endLoading();\n        return dataResp;\n      }).fail(function (dataFail) {\n        var form = self.getFormContainer();\n        var message = dataFail.responseText ? dataFail.responseText : typeof dataFail == \"string\" ? dataFail : dataFail.toString();\n        //Convert String to object\n        if (typeof message == \"string\") {\n          try {\n            message = JSON.parse(message).message;\n          } catch (e) {\n            message = message.match(/\"message\":(.*)\",/)[0];\n            message = message.substr(11, message.length - 13);\n          }\n\n        } else if (!message.message) {\n          message = dataFail;\n        }\n        form.validateForm();\n        form.clearValidationMessages();\n        form.addValidationMessage(message);\n      });\n    });\n  },\n  /*\r\n      *   Submits a grid delete record request for the given id\r\n      *   Returns a deferred\r\n      */\n  submitDeleteRequest: function submitDeleteRequest(id) {\n    var self = this,\n    properties = self.properties;\n\n    var xpath = properties.xpath + self.buildCellXpathFilter(id);\n\n    return self.dataService.deleteGridRecord({\n      url: properties.deleteUrl,\n      idRender: properties.id,\n      xpath: xpath,\n      xpathContext: properties.xpathContext,\n      idPageCache: properties.idPageCache,\n      contexttype: properties.contextType }).\n    pipe(function (data) {\n      if (data.type == \"validationMessages\") {\n        var form = self.getFormContainer();\n        var message = data.messages.join(\" \");\n        form.failHandler({ message: message });\n      }\n\n      return data;\n    });\n  },\n  /*\r\n      *   Submits a grid add record request\r\n      *   Returns a deferred when done, the server returns an id for the new record\r\n      */\n  submitAddRequest: function submitAddRequest() {\n    var self = this,\n    properties = self.properties;\n\n    var request = self.dataService.addGridRecord({\n      url: properties.addUrl,\n      idRender: properties.id,\n      xpath: properties.xpath,\n      xpathContext: properties.xpathContext,\n      contexttype: properties.contextType,\n      idPageCache: properties.idPageCache });\n\n\n    var filterResponse = request.pipe(function (data) {\n      // Parses response\n      return data.idEntity;\n    });\n\n    return filterResponse.promise();\n  },\n  /*\r\n      *   Submits a grid rollback request\r\n      *   Returns a deferred when done\r\n      */\n  submitRollbackRequest: function submitRollbackRequest(params) {\n    var self = this,\n    properties = self.properties;\n\n    return self.dataService.rollbackGridAction({\n      url: properties.rollbackUrl,\n      idRender: properties.id,\n      xpath: properties.xpath,\n      xpathContext: properties.xpathContext,\n      idPageCache: params ? params.idPageCache : properties.idPageCache,\n      contexttype: self.properties.contexttype || \"\" });\n\n  },\n  /**\r\n      * Collect a single cell change made in the grid to send the data when the user saves the form\r\n      * @param params\r\n      */\n  collectGridChange: function collectGridChange(params) {\n    var self = this;\n    params = params || {};\n    var id = params.id;\n    var dataType = params.dataType;\n    var xpath = params.xpath;\n    var value = params.value;\n    var trigger = typeof params.trigger !== \"undefined\" ? params.trigger : true;\n    var isPressed = params.pressed || false;\n    var renderType = dataType && bizagi.util.normalizeType(dataType);\n    var renderId = params.renderId || \"\";\n\n    self.changes[id] = self.changes[id] || {};\n\n    if (/^columnsearch$/i.test(renderType) && value && typeof value.id !== \"undefined\") {\n      self.changes[id][xpath] = value.id;\n    } else {\n      self.changes[id][xpath] = value;\n    }\n\n    if (trigger) {\n      self.triggerRenderChange({ key: id, column: xpath, pressed: isPressed, id: renderId });\n    }\n  },\n  /*\r\n      *   Configures a column to perform a submit on change when the user changes a cell\r\n      */\n  configureColumnSubmitOnChange: function configureColumnSubmitOnChange(xpath) {\n    var self = this;\n    var properties = self.properties;\n    var id = properties.id;\n\n    // Build action\n    var action = {\n      commands: [{\n        xpath: properties.xpath,\n        command: 'submit-value',\n        argument: 'all' }],\n\n      conditions: {\n        operator: 'and',\n        expressions: [\n        {\n          simple: {\n            operator: 'cell-change',\n            xpath: properties.xpath + '[].' + xpath,\n            argumentType: 'text',\n            argument: xpath } }] },\n\n\n\n\n      dependencies: [properties.xpath] };\n\n\n    // Add action when form ends its rendering\n    $.when(self.ready()).\n    done(function () {\n      var form = self.getFormContainer();\n      form.addSubmitAction(xpath + '.' + id, action);\n    });\n  },\n  /*\r\n      *   Add the render data to the given collection in order to send data to the server\r\n      */\n  collectData: function collectData(renderValues) {\n    var self = this;\n    var properties = self.properties;\n    var keysToDelete = [];\n\n    if (self.exclusiveChanges) {\n      //Add filter to parse all checks in tru to false. DON'T CHANGE CODE ORDER\n      for (var xpath in self.exclusiveChanges) {//Brings the xpath columns with changes\n        var columnExclusiveChanges = self.exclusiveChanges[xpath];\n        var columnEnabledChecks = self.enabledChecks[xpath];\n        if (columnExclusiveChanges && columnEnabledChecks) {\n          // If there are any change, its needed to include as a change the filter to set all rows in false\n          var xpathExclusiveFilter = properties.xpath + \"[\" + xpath + \"=true].\" + xpath;\n          renderValues[xpathExclusiveFilter] = false;\n        }\n      }\n    }\n\n    for (var id in self.changes) {\n      // Dont collect data from totalizers \n      if (id != \"summary\") {\n        for (var columnXpath in self.changes[id]) {\n          // Check if the render can submit data\n          if (self.canColumnBeSent(id, columnXpath)) {\n            var xpath = properties.xpath + self.buildCellXpathFilter(id) + \".\" + columnXpath;\n            var value = self.changes[id][columnXpath];\n\n            renderValues[xpath] = value;\n          }\n        }\n      }\n\n      // Clean changes \n      keysToDelete.push(id);\n\n    }\n    //If any exclusive check is true, set the new value in renderValues. DON'T CHANGE CODE ORDER\n    if (self.exclusiveChanges) {\n      for (var xpath in self.exclusiveChanges) {//Brings the xpath columns with changes\n        var columnExclusiveChanges = self.exclusiveChanges[xpath];\n        var columnEnabledChecks = self.enabledChecks[xpath];\n        if (columnExclusiveChanges && columnEnabledChecks) {\n          var checkedObject = self.exclusiveChanges[xpath];\n          if (checkedObject && checkedObject.value) {\n            var columnSimpleXpathEnabled = properties.xpath + self.buildCellXpathFilter(checkedObject.key) + \".\" + xpath;\n            renderValues[columnSimpleXpathEnabled] = checkedObject.value;\n          }\n        }\n      }\n    }\n\n    // Clean changes array in order to prevent duplicate data\n    // when execute SUBMITDATA in multiaction, that make and error\n    // in circular dependencies, specially when we add inline record\n    $.each(keysToDelete, function (key, v) {\n      delete self.changes[v];\n    });\n  },\n\n  hasChanged: function hasChanged(result) {\n    var self = this;\n    if (!$.isEmptyObject(self.changes)) {\n      result.push(true);\n      return true;\n    } else {\n      if (!$.isEmptyObject(self.exclusiveChanges)) {\n        result.push(true);\n        return true;\n      } else {\n        return false;\n      }\n    }\n  },\n\n  /*\r\n      *   Check if a column data can be sent to the server\r\n      */\n  canColumnBeSent: function canColumnBeSent(id, columnXpath) {\n    var self = this,i,j,xpath;\n    for (i in self.columns) {\n      if (self.columns.hasOwnProperty(i)) {\n        var column = self.columns[i];\n        if (column.properties.type !== \"columnUserfield\") {\n          if (column.properties.xpath == columnXpath) {\n            var cellOverride = self.getCellOverride(id, column.columnIndex - 1);\n            return column.canBeSent(id, cellOverride);\n          }\n        } else {\n          for (j in column.properties) {\n            if (column.properties.hasOwnProperty(j)) {\n              if (Object.prototype.toString.apply(column.properties[j]) === \"[object String]\") {\n                xpath = column.properties[j].substr(column.properties[j].lastIndexOf(\".\") + 1);\n                if (xpath === columnXpath) {\n                  return true;\n                }\n              }\n            }\n          }\n        }\n\n      }\n    }\n\n    return false;\n  },\n  /* \r\n      *  Method to determine if the render value can be sent to the server or not\r\n      */\n  canBeSent: function canBeSent() {\n    var self = this;\n    var properties = self.properties;\n    var displayOnly = bizagi.util.parseBoolean(properties.displayOnly) || false;\n\n    // The render can be sent if it is \"display only\" and inline Edit is available\n    if (!displayOnly && (properties.inlineEdit || properties.inlineAdd || !$.isEmptyObject(self.changes))) {\n      return true;\n    }\n    return false;\n  },\n  /*\r\n      *   Return the value for a requested cell\r\n      */\n  getCellValue: function getCellValue(key, xpath) {\n    var self = this;\n    var data = self.properties.data.rows;\n    for (var i = 0; i < data.length; i++) {\n      if (data[i][0] == key) {\n        for (var j = 0; j < self.columns.length; j++) {\n          if (self.columns[j].properties.xpath == xpath) {\n            var result = data[i][j + 1];\n            return result;\n          }\n        }\n      }\n    }\n    return null;\n  },\n  /*\r\n      *\r\n      */\n  getCellCurrentValue: function getCellCurrentValue(key, xpath) {\n    var self = this;\n\n    var control = self.getControlCell(key, xpath);\n    if (control && typeof control.getValue === \"function\") {\n      return control.getValue();\n    }\n    return null;\n  },\n  /*\r\n      *   Gets control\r\n      */\n  getControlCell: function getControlCell(key, xpath) {\n    var self = this;\n    var control = null;\n    if (typeof self.columns != \"undefined\")\n    for (var j = 0; j < self.columns.length; j++) {\n      if (\n      self.columns[j].properties.xpath == xpath ||\n      self.columns[j].properties.id == xpath ||\n      self.columns[j].properties.xpath + \".\" + self.columns[j].properties.id == xpath)\n      {\n        control = self.columns[j].getDecorated(key);\n        break;\n      }\n    }\n\n\n    return control;\n  },\n\n  changeRequired: function changeRequired(argument) {\n    this.properties.required = argument;\n    this.changeRequiredLabel(argument);\n  },\n\n  changeRequiredLabel: function changeRequiredLabel(argument) {\n    var control = this.getControl();\n\n    if (control.length > 0) {\n      if (this.getMode() !== \"execution\") {\n        if (bizagi.util.parseBoolean(argument) == true && this.properties.editable) {\n          control.addClass(\"grid-control-required\");\n        } else {\n          control.removeClass(\"grid-control-required\");\n        }\n      } else {\n        if (bizagi.util.parseBoolean(argument) == true && !this.hasValue() && this.properties.editable) {\n          control.addClass(\"grid-control-required\");\n        } else {\n          control.removeClass(\"grid-control-required\");\n        }\n      }\n    }\n\n    this.triggerRenderValidate();\n  },\n\n  /*\r\n      *   Fetch the data again and updates the content\r\n      */\n  refresh: function refresh() {\n  },\n  /*\r\n      *   Sets an error on the cell\r\n      */\n  setError: function setError(key, columnXpath) {\n  },\n  /*\r\n      *   Changes the background for a cell\r\n      */\n  changeCellBackgroundColor: function changeCellBackgroundColor(key, xpath, argument) {\n  },\n  /*\r\n      *   Changes the background for a cell\r\n      */\n  changeCellColor: function changeCellColor(key, xpath, argument) {\n  },\n  /*\r\n      *   Changes the visibility for a cell\r\n      */\n  changeCellVisibility: function changeCellVisibility(key, xpath, argument) {\n  },\n  /*\r\n      *  Changes the required for cell\r\n      */\n  changeCellRequired: function changeCellRequired(key, xpath, argument) {\n  },\n  /*\r\n      *   Changes the editability for a cell\r\n      */\n  changeCellEditability: function changeCellEditability(key, xpath, argument) {\n  },\n  /*\r\n      *  Refresh behaviors of cell\r\n      */\n  changeCellProperties: function changeCellProperties(key, xpath, argument) {\n\n  },\n  /*\r\n      *  Changes the max value for a cell\r\n      */\n  changeCellMaxValue: function changeCellMaxValue(key, xpath, argument) {\n\n  },\n  /*\r\n      *  Changes the min value for a cell\r\n      */\n  changeCellMinValue: function changeCellMinValue(key, xpath, argument) {\n\n  },\n\n  /*\r\n     *   Changes the editability for a column\r\n     */\n  changeColumnEditability: function changeColumnEditability(xpath, argument) {\n  },\n  /*\r\n      *   Changes the visibility for a column\r\n      */\n  changeColumnVisibility: function changeColumnVisibility(xpath, argument) {\n  },\n  /*\r\n      *   Changes the required for a column\r\n      */\n  changeColumnRequired: function changeColumnRequired(xpath, argument) {\n  },\n\n  /*\r\n      *  Clean data of cell\r\n      */\n  cleanCellData: function cleanCellData(key, xpath) {\n  },\n\n  changeEditability: function changeEditability(argument) {\n    var self = this;\n    var control = self.getControl();\n\n    self.saveGrid().done(function () {\n      var tmpEditable = argument == \"Default\" ? self.originalProperties.editable : bizagi.util.parseBoolean(argument);\n\n      // Clears control\n      control.empty();\n\n      var originalProperties = self.originalProperties;\n\n      $.extend(self.properties, self.initEditabilityProperties(\n      tmpEditable,\n      originalProperties.allowEdit,\n      originalProperties.inlineEdit,\n      originalProperties.withEditForm),\n      self.initAddAndDeleteProperties(\n      tmpEditable,\n      originalProperties.allowAdd,\n      originalProperties.inlineAdd,\n      originalProperties.allowDelete));\n\n\n      self.properties.editabilityEnabled = self.properties.editabilityEnabled || self.properties.editable;\n\n      // argument because it is necessary to propagate the default value to the column controls\n      if (!tmpEditable) {\n        self.changeColumnsEditability(false);\n      } else if (self.properties.allowEdit && self.properties.inlineEdit) {\n        self.changeColumnsEditability(argument);\n      }\n\n      if (typeof self.internalRenderControl == \"function\") {\n        $.when(self.internalRenderControl()).done(function (html) {\n          control.append(html);\n          self.postRenderElement(self.element);\n        });\n      }\n    });\n\n  },\n\n  saveGrid: function saveGrid() {\n    var self = this;\n    var defer = $.Deferred();\n\n    var rows = $(\"[data-bizagi-component=rows]\", self.element).find(\"[data-new-row=true]\");\n\n    if (rows.length > 0) {\n      var newRows = $.map(rows, function (row, i) {\n        return $(row).data(\"business-key\");\n      });\n\n      self.saveInlineAddedRows(newRows).done(function () {\n        $.when(self.saveRows()).done(function () {\n          self.refresh();\n          defer.resolve();\n        });\n      });\n    } else {\n      defer.resolve();\n    }\n\n    return defer.promise();\n  },\n\n  changeColumnsEditability: function changeColumnsEditability(value) {\n    var self = this;\n    var columns = self.columns || [];\n\n    $.each(columns, function (i, column) {\n      column.properties.editable = value == \"Default\" ? column.originalProperties.editable : bizagi.util.parseBoolean(value);\n    });\n  },\n\n  /**\r\n      *   Refresh behaviors of cell\r\n      */\n  refreshCell: function refreshCell(params) {\n    var self = this;\n    var properties = self.properties;\n    var key = params.key;\n    var column = params.column;\n    var xpathContext = params.xpathContext !== \"\" ? params.xpathContext + \".\" + self.properties.xpath + self.buildCellXpathFilter(key) : self.properties.xpath + self.buildCellXpathFilter(key);\n    var cell = self.getControlCell(key, params.column);\n    var form = self.getFormContainer();\n    var idForm = form.properties.id;\n\n    if (!cell) {\n      return;\n    }\n\n    // Execute personalized stuff before to refresh it\n    cell.beforeToRefresh();\n\n    // Call service\n    return $.when(self.dataService.multiaction().refreshGridCell({\n      idRender: properties.id,\n      column: cell.properties.id,\n      idPageCache: properties.idPageCache,\n      xpathContext: xpathContext,\n      idForm: idForm,\n      typeRender: bizagi.util.normalizeType(cell.properties.type) })).\n    done(function (data) {\n      // Extract values\n      var getDepthData = function getDepthData(target) {\n        if (target && _typeof(target) == \"object\" && target.length >= 1) {\n          return target[0].length >= 1 ? target[0][0] : target[0];\n        }\n        return \"\";\n      };\n      var newValue = getDepthData(data.rows);\n      var editable = getDepthData(data.editable);\n      if (!bizagi.util.isBoolean(editable)) {\n        editable = editable || true;\n      }\n      var visible = getDepthData(data.visible);\n      if (!bizagi.util.isBoolean(visible)) {\n        visible = visible || true;\n      }\n\n      // Change Visibility & Editability\n      self.changeCellVisibility(key, column, visible);\n      self.changeCellEditability(key, column, editable);\n\n      // Change control value\n      var cellValue = cell.formatValue(newValue);\n\n      cell.setValue(cellValue);\n      cell.setDisplayValue(cellValue);\n\n      // Trigger grid change\n      self.triggerRenderChange({ key: key, column: column, changed: false });\n\n      if (bizagi.override.restoreAppearanceAfterRefresh) {\n        cell.restoreCellAppearance();\n      }\n\n      // Update the affected cell manually after a refresh\n      //TODO:temporary solution\n      //review the DRAGON-5982 \n      if (cell.column != undefined && bizagi.util.detectDevice() == \"desktop\") {\n        self.updateAffectedCellManually(key, cellValue, cell.column.columnIndex);\n      }\n\n      // Execute personalized stuff after to refresh it\n      self.afterToRefresh({ action: \"refreshCell\" });\n    });\n  },\n\n  /*\r\n      *   Triggers the render change event\r\n      */\n  triggerRenderChange: function triggerRenderChange(params) {\n    var self = this;\n    params = params || {};\n    // Property to verify exporting updated grids\n    if (!bizagi.util.isEmpty(params) && params.changed != false)\n    self.properties.canBeExported = false;\n    self.triggerHandler(\"renderchange\", {\n      render: self,\n      surrogateKey: params.key,\n      column: params.column,\n      changed: params.changed,\n      rowDeleted: params.rowDeleted,\n      pressed: params.pressed,\n      id: params.id || \"\" });\n\n  },\n\n  /*\r\n      *   Validate the grid\r\n      */\n  validate: function validate() {\n    this.isValid([]);\n  },\n  /* \r\n      * Public method to determine if a value is valid or not\r\n      */\n  isValid: function isValid(invalidElements) {\n    var self = this;\n    var bValid = true;\n\n    // Clear error message\n    self.hasErrors = false;\n    self.setValidationMessage(\"\");\n\n    // Check for required columns and null values\n    if (self.properties.data && self.properties.data.rows) {\n      var newRows = self.getDataNewRows();\n      // Preserve elements in data.rows\n      // Check required\n      if (newRows.length == 0 && bizagi.util.parseBoolean(self.properties.required)) {\n        if (!self.hasValue()) {\n          message = self.getResource(\"render-required-text\").replaceAll(\"#label#\", self.properties.displayName);\n          invalidElements.push({\n            xpath: self.properties.xpath,\n            message: message });\n\n          bValid = false;\n        }\n      }\n\n      var data = $.merge($.merge([], self.properties.data.rows), newRows);\n\n      for (var i = 0; i < self.columns.length; i++) {\n        var messages = [];\n        var uniqueMessages = {};\n\n        for (var j = 0; j < data.length; j++) {\n          var value = data[j][i + 1];\n          var key = data[j][0];\n          var xpath = self.columns[i].properties.xpath;\n          if (self.changes[key] !== undefined && self.changes[key][self.columns[i].properties.xpath] !== undefined) {\n            value = self.changes[key][self.columns[i].properties.xpath];\n          }\n\n          // Check if the column is valid\n          var valueValid = self.columns[i].isValueValid(key, value, messages, self.getCellOverride(key, i));\n          if (!valueValid) {\n            bValid = false;\n\n            self.hasErrors = true;\n            self.setError(key, self.columns[i].properties.xpath);\n          }\n        }\n        for (var k = 0, messagesLength = messages.length; k < messagesLength; k++) {\n          if (uniqueMessages[messages[k]] == null) {\n            uniqueMessages[messages[k]] = messages[k];\n          }\n        }\n\n        if (messages.length > 0) {\n          var gridValidationMessage = self.getResource(\"render-grid-validation\").replaceAll(\"#grid#\", self.properties.displayName);\n          for (key in uniqueMessages) {\n            invalidElements.push({\n              xpath: self.properties.xpath,\n              message: gridValidationMessage + \" \" + key });\n\n          }\n        }\n      }\n    }\n\n    return bValid;\n  },\n  /*\r\n      *   Enables submit on change feature for the current render\r\n      */\n  configureSubmitOnChange: function configureSubmitOnChange() {\n    // Don't do anything we will trigger submit on change manually only when the grid add or edit form has been edited   \n  },\n  /*\r\n      *   Get cell override\r\n      */\n  getCellOverride: function getCellOverride(key, column) {\n    var self = this;\n\n    // Convert to numbers\n    column = Number(column);\n\n    // Find overrides\n    var columnProperties = self.columns[column].properties;\n    if (!self.cellOverrides[key])\n    self.cellOverrides[key] = {};\n    if (!self.cellOverrides[key][column]) {\n      self.cellOverrides[key][column] = {\n        visible: columnProperties.columnVisible && columnProperties.visible,\n        editable: columnProperties.editable,\n        required: columnProperties.required };\n\n    }\n\n    return self.cellOverrides[key][column];\n  },\n\n  /*\r\n      * Set cell overrides based on the data\r\n      */\n  setCellOverrides: function setCellOverrides(data, columns) {\n    var self = this;\n    var key;\n\n    // Init visibility overrides\n    if (data.visible) {\n      for (var i = 0, len = data.visible.length; i < len; i++) {\n        key = data.visible[i][0];\n        for (var j = 0, len_v = data.visible[i].length; j < len_v; j++) {\n\n          // Skip key columns\n          if (j > 0) {\n            var columnVisible = self.getCellOverride(key, j - 1).visible;\n            self.cellOverrides[key][j - 1].visible = columnVisible ? bizagi.util.parseBoolean(data.visible[i][j]) : false;\n          }\n        }\n      }\n    }\n\n    // Init editability overrides\n    if (data.editable) {\n      for (var i = 0, len = data.editable.length; i < len; i++) {\n        key = data.editable[i][0];\n        for (var j = 0, len_v = data.editable[i].length; j < len_v; j++) {\n          // Skip key columns\n          if (j > 0) {\n            var columnEditable = columns ? bizagi.util.parseBoolean(columns[j - 1].properties.editable) : true;\n            self.getCellOverride(key, j - 1).editable = columnEditable ? bizagi.util.parseBoolean(data.editable[i][j]) : false;\n          }\n        }\n      }\n    }\n\n    // Init required overrides\n    if (data.required) {\n      for (var i = 0, len = data.required.length; i < len; i++) {\n        key = data.required[i][0];\n        for (var j = 0, len_v = data.required[i].length; j < len_v; j++) {\n          // Skip key columns\n          if (j > 0)\n          self.getCellOverride(key, j - 1).required = bizagi.util.parseBoolean(data.required[i][j]);\n        }\n      }\n    }\n  },\n  /*\r\n      *   Returns the row indexes for the data\r\n      */\n  getIndexes: function getIndexes() {\n    var self = this;\n    var data = $.merge(self.properties.data.rows, self.getDataNewRows());\n    return $.map(data, function (item, i) {\n      return item[0];\n    });\n  },\n  /**\r\n      *  Return object with value of all new records unsaved within the grid\r\n      *  @return {object} all new records\r\n      */\n  getDataNewRows: function getDataNewRows() {\n    var self = this;\n    var newRows = [];\n\n    if (_typeof(self.newRecords) == \"object\" && !$.isEmptyObject(self.newRecords)) {\n      $.each(self.newRecords, function (rowKey) {\n        var cellValue = [];\n        cellValue.push(rowKey);\n        for (var i = 0, length = self.columns.length; i < length; i++) {\n          cellValue.push(self.getCellCurrentValue(rowKey, self.columns[i].properties.xpath));\n        }\n        // Add cell value row to new rows\n        newRows.push(cellValue);\n      });\n    }\n    return newRows;\n  },\n\n  /**\r\n      * Return the object with the required url to access the exported grid to the desired format\r\n      * @param params\r\n      * @returns {*}\r\n      */\n  getGridExportFile: function getGridExportFile(params) {\n    var self = this;\n    var properties = self.properties;\n\n    return self.dataService.getGridExportFile({\n      idRender: properties.id,\n      xpathContext: properties.xpathContext || \"\",\n      idPageCache: properties.idPageCache,\n      disposition: params.disposition,\n      exportType: params.exportType,\n      sort: properties.sort,\n      idForm: self.getFormContainer().properties.id }).\n    then(function (response) {\n      return bizagi.util.handleJSONResponse(response);\n    });\n  },\n\n  submitForGridChange: function submitForGridChange() {\n    var self = this;\n    return self.submitOnChange(null, false);\n  },\n\n  dispose: function dispose() {\n    var self = this;\n\n    var timeOutColumn = setTimeout(function () {\n      if (self.columns) {\n        $.each(self.columns, function (i, column) {\n          column.dispose();\n        });\n      }\n      clearTimeout(timeOutColumn);\n    }, bizagi.override.disposeTime || 50);\n\n    // Call base\n    self._super();\n  },\n\n  getEnabledChecks: function getEnabledChecks(params) {\n    var self = this;\n    var properties = self.properties;\n    params = params || {};\n    $.extend(params, {\n      url: properties.dataUrl,\n      xpath: properties.xpath,\n      idRender: properties.id,\n      xpathContext: properties.xpathContext,\n      contexttype: properties.contextType,\n      idPageCache: properties.idPageCache,\n      rows: properties.rowsPerPage,\n      xpathfilter: params.xpath });\n\n    // Default ajax call\n    var defer = new $.Deferred();\n    // Resolve with remote data\n    self.dataService.multiaction().getGridDataExclusivesSelected(params).done(function (data) {\n      // Resolve with fetched data\n      properties.page = data.page;\n      properties.records = data.records;\n      properties.totalPages = data.totalPages;\n\n      // Check RTL\n      if (self.isRTL()) {\n        data.rows = self.changeOrderData(data.rows);\n      }\n      defer.resolve(data);\n    });\n    return defer.promise();\n  },\n\n  buildCellXpathFilter: function buildCellXpathFilter(key) {\n    if (bizagi.util.isNumeric(key)) return \"[id=\" + key + \"]\";\n    return \"[id='\" + key + \"']\";\n  },\n\n  cleanNewRecords: function cleanNewRecords() {\n    // Mark it as saved\n    this.newRecords = {};\n  },\n\n  /**\r\n      * Set inline added new row as saved, removing data new-row attribute\r\n      * @param key\r\n      */\n  setRowAsSaved: function setRowAsSaved(key) {\n    var $control = this.getControl();\n    var $row = $(\"[data-bizagi-component=rows]\", $control).\n    find(\"tr[data-business-key=\" + key + \"]\");\n\n    $row.attr(\"data-new-row\", 'false');\n  },\n\n  /**\r\n      *\r\n      * Customizes render background color\r\n      *\r\n      * This method is called when the backgroud color is setted by Form Designer\r\n      *\r\n      * @param color\r\n      */\n  changeBackgroundColor: function changeBackgroundColor(color) {\n    this._super(color);\n\n    var control = this.getControl();\n\n    control.find(\".bz-rn-grid-header-title, .bz-rn-grid-header-title-rtl\").\n    css(\"background-color\", color, \"!important\");\n\n    control.find(\".bz-rn-grid-container-foother, .bz-rn-grid-container-foother-rtl\").\n    css(\"background-color\", color, \"!important\");\n\n    return this;\n  },\n\n  /**\r\n      * Check has header format\r\n      * @returns {boolean}\r\n      */\n  hasColorHeader: function hasColorHeader() {\n    var headerFormat = this.properties.headerFormat || {};\n\n    return headerFormat ? !bizagi.util.isEmpty(headerFormat.color) : false;\n  },\n\n  /**\r\n      * Check if the orientation is RTL\r\n      * @param parent\r\n      * @param orientation\r\n      * @returns {*|boolean|boolean}\r\n      */\n  isRTLOrientation: function isRTLOrientation(parent, orientation) {\n    if ((!orientation || orientation === \"auto\") && parent) {\n      return this.isRTLOrientation(parent.parent, parent.properties.orientation);\n    }\n\n    return /^rtl$/i.test(orientation);\n  },\n\n  /**\r\n      * Check If has changes for send to server\r\n      * @returns {boolean}\r\n      */\n  canBeExport: function canBeExport() {\n    var self = this;\n\n    // Check If normal column-control has changes\n    for (var id in self.changes) {\n      // Don't collect data from totalizers\n      if (id !== \"summary\") {\n        for (var columnXpath in self.changes[id]) {\n          // Check if the render can submit data\n          if (self.canColumnBeSent(id, columnXpath)) return false;\n        }\n      }\n    }\n\n    // Check If exclusive-check control has changes\n    if (self.exclusiveChanges) {\n      for (var xpath in self.exclusiveChanges) {\n        // Brings the xpath columns with changes\n        if (self.exclusiveChanges[xpath] && self.enabledChecks[xpath]) return false;\n      }\n    }\n\n    // Don't have changes\n    return true;\n  },\n\n  /**\r\n      * Get exclusive-check change by Row\r\n      * @param idRow\r\n      * @returns {{}}\r\n      */\n  getExclusiveChangeByRow: function getExclusiveChangeByRow(idRow) {\n    var value = {};\n\n    for (var xpath in this.enabledChecks) {\n      if (this.enabledChecks.hasOwnProperty(xpath)) {\n        var obj = (this.enabledChecks[xpath] || []).\n        find(function (el) {\n          return el.id == idRow && el.changed;\n        });\n\n        if (obj) {\n          value[xpath] = obj.value;\n        }\n      }\n    }\n\n    return value;\n  },\n\n  /**\r\n      * Check If xpath or id of column is valid\r\n      * @param columnXpath\r\n      * @param columnId\r\n      * @param xpath\r\n      * @returns {boolean}\r\n      */\n  isCurrentGridCell: function isCurrentGridCell(columnXpath, columnId, xpath) {\n    return columnXpath === xpath || columnId === xpath || columnXpath + \".\" + columnId === xpath;\n  },\n\n  /**\r\n      * Get index for current cell\r\n      * @param xpath\r\n      * @returns {number|number}\r\n      */\n  getIndexForCurrentCell: function getIndexForCurrentCell(xpath) {\n    var self = this;\n\n    return (self.columns || []).findIndex(function (cell) {\n      return self.isCurrentGridCell(cell.properties.xpath, cell.properties.id, xpath);\n    }) || 0;\n  },\n\n  /**\r\n      * Check if it is a Summary o Global Form\r\n      * @returns {*|boolean}\r\n      */\n  isSummaryOrGlobalForm: function isSummaryOrGlobalForm() {\n    var form = this.getFormContainer();\n    var properties = form && form.properties || {};\n\n    return form && [\"SummaryForm\", \"GlobalForm\"].includes(properties.typeForm);\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /**\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: Bizagi Render Label Class\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: UI Forms Team\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This script will define basic stuff for labels\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n$.Class.extend(\"bizagi.rendering.label\", {}, {\n\n  /**\r\n                                                * Update or init the element data\r\n                                                * @param {} data\r\n                                                * @returns {}\r\n                                                */\n  initializeData: function initializeData(data) {\n    var self = this;\n\n    // Call base\n    self._super(data);\n\n    // A label itself is never \"required\" as other controls\n    var properties = self.properties;\n    properties.required = false;\n\n    // Set properties\n    self.properties.displayType = \"label\";\n    //self.properties.labelAlign = self.originalProperties.labelAlign || \"left\";\n    self.properties.displayName = data.properties.displayName || \"\";\n\n    if (bizagi.util.parseBoolean(self.properties.allowDinamiclabel)) {\n      this.properties.displayName = data.properties.displayName || bizagi.localization.getResource(\"render-label-default-display-name\");\n    }\n\n    self.bindingValue();\n\n    // Calculate layout properties\n    self.calculateInitialLayoutProperties();\n  },\n\n  /**\r\n      * Template method to implement in each device to customize each render after processed\r\n      */\n  postRender: function postRender() {\n    this._super();\n    // Just apply display-type: label, align it to the left\n    this.changeDisplayOption(\"label\");\n    //this.changeLabelAlign(this.properties.labelAlign || \"left\");\n\n    if (typeof this.configureHelpText == \"function\")\n    this.configureHelpText();\n  },\n\n  /**\r\n      * Template method to implement in each device to customize each render after processed in read-only mode\r\n      */\n  postRenderReadOnly: function postRenderReadOnly() {\n    this._super();\n    // Just apply display-type: label, align it to the left\n    this.changeDisplayOption(\"label\");\n    this.changeLabelAlign(this.properties.labelAlign || \"left\");\n  },\n\n  /**\r\n      * Public method to determine if a value is valid or not\r\n      * @param {} invalidElements\r\n      */\n  isValid: function isValid(invalidElements) {\n    // Automatically this render is valid, so we can't check a required label\n  },\n\n  /**\r\n      * Method to determine if the render value can be sent to the server or not\r\n      * @returns {}\r\n      */\n  canBeSent: function canBeSent() {\n    // This render cannot be sent because it is full ajax\n    return false;\n  },\n\n  bindingValue: function bindingValue() {\n    var self = this;\n\n    if (self.properties.allowDinamiclabel && self.properties.value) {\n      if (_typeof(self.properties.value) === \"object\" && self.properties.value[0]) {\n        self.properties.displayName = self.properties.value[0].value;\n      } else if (typeof self.properties.value === \"string\" && self.properties.value !== \"\") {\n        self.properties.displayName = self.performLabelLineBreak(self.properties.value);\n      }\n    }\n  },\n\n  controlValueIsChanged: function controlValueIsChanged() {\n    //Labels never change\n    return false;\n  },\n\n  /**\r\n      * Process the break line character\r\n      * @param value\r\n      * @returns {string}\r\n      */\n  performLabelLineBreak: function performLabelLineBreak(value) {\n    var label = value || \"\";\n\n    return label.replace(/\\\\n/gm, \"\\n\");\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /*\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: Bizagi Render Search Class\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: UI Forms Team\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This script will define basic stuff for search renders\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\n$.Class.extend(\"bizagi.rendering.search\", {}, {\n  /**\r\n                                                 * Update or init the element data\r\n                                                 * @param {} data\r\n                                                 * @returns {}\r\n                                                 */\n  initializeData: function initializeData(data) {\n    var self = this;\n\n    var submitOnChange = data.properties.submitOnChange;\n    if (self.getMode() === \"execution\") {\n      // Normalize submitOnChange property\n      // QAF-3297 - Compatibility for old versions of advanced search where the \"submitOnChange\" property default is true\n      // New \"submitVersion\" property default is 2\n      if (data.properties.advancedSearch) {\n        submitOnChange = typeof submitOnChange !== \"undefined\" ? submitOnChange : (data.properties.submitVersion || 1) > 1 ? false : true;\n      }\n    }\n\n    // Call base\n    self._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n    properties.submitOnChange = bizagi.util.parseBoolean(submitOnChange) || false;\n\n    properties.searchForms = properties.searchForms || [];\n\n    // Default maxRecords is 20\n    properties.maxRecords = Number(properties.maxRecords) || 20;\n    properties.advancedSearch = bizagi.util.parseBoolean(properties.advancedSearch) === null ? false : bizagi.util.parseBoolean(properties.advancedSearch);\n    properties.allowSuggest = bizagi.util.parseBoolean(properties.allowSuggest) !== null ? bizagi.util.parseBoolean(properties.allowSuggest) : false;\n    properties.allowFullSearch = properties.allowFullSearch || false;\n    properties.allowAdd = bizagi.util.parseBoolean(properties.allowAdd) || false;\n    properties.allowTyping = bizagi.util.parseBoolean(properties.allowTyping) !== null ? bizagi.util.parseBoolean(properties.allowTyping) : false;\n    properties.allowTyping = bizagi.util.parseBoolean(properties.allowSuggest) ? true : properties.allowTyping;\n    properties.allowClear = bizagi.util.parseBoolean(properties.allowClear) !== null ? bizagi.util.parseBoolean(properties.allowClear) : false;\n    properties.editable = bizagi.util.parseBoolean(properties.editable) !== null ? bizagi.util.parseBoolean(properties.editable) : true;\n\n    // This length defines the behavior of the suggest, 2 characters are used by default meaning after 2 characters are written the search will take place\n    properties.searchLength = properties.searchLength || 2;\n\n    // Expire local storage cache\n    properties.enableLocalStorage = false;\n    properties.expireCache = 1000 * 60 * 15; // 15 minutes\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @returns {}\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var properties = self.properties;\n    var template = self.renderFactory.getTemplate(\"search\");\n\n    return $.fasttmpl(template, {\n      id: properties.id,\n      xpath: properties.xpath,\n      allowTyping: properties.allowTyping,\n      advancedSearch: properties.advancedSearch,\n      allowSuggest: properties.allowSuggest,\n      editable: properties.editable,\n      allowClear: properties.allowClear,\n      hasValue: self.hasValue() });\n\n  },\n\n  /**\r\n      * Fetch the data into a deferred\r\n      * @param {} params\r\n      * @returns {}\r\n      */\n  getData: function getData(params) {\n    var self = this;\n    var properties = self.properties;\n    var defer = new $.Deferred();\n    var form = self.getFormContainer();\n    var contextType = form.getContextType() || form.params.contexttype || false;\n\n    params = params || {};\n\n    // Verify context type\n    if (self.properties.contexttype) {\n      params.h_contexttype = self.properties.contexttype;\n    } else if (contextType) {\n      params.h_contexttype = contextType;\n    }\n\n    params.h_contexttype = self.properties.enableQuerySuggestBehavior ? \"metadata\" : params.h_contexttype;\n\n    // QA-471 When the contexttype is metadata it does not send xpathcontext\n    if (params && params.h_contexttype && params.h_contexttype === 'metadata') {\n      properties.xpathContext = '';\n    }\n\n    // BA35025 - JFA\n    if (properties.term.indexOf(\"\\'\") > -1) {\n      var regexC = new RegExp(\"\\'\", \"g\");\n      properties.term = properties.term.replace(regexC, \"\\\\'\\\\'\");\n    }\n\n    // QAF-6448 - JFA\n    if (properties.term.indexOf(\"\\\"\") > -1) {\n      var regexC = new RegExp(\"\\\"\", \"g\");\n      properties.term = properties.term.replace(regexC, \"\\\"\");\n    }\n\n    // Resolve with remote data\n    self.dataService.multiaction().getSearchData({\n      url: properties.dataUrl,\n      contexttype: params.h_contexttype,\n      xpath: properties.xpath,\n      idRender: properties.id,\n      xpathContext: properties.xpathContext,\n      idPageCache: properties.idPageCache,\n      term: properties.allowFullSearch ? \"%\" + properties.term : properties.term,\n      extra: params }).\n    done(function (data) {\n      // Resolve with fetched data\n      properties.data = data;\n      defer.resolve(properties.data);\n    }).fail(function (data) {\n      var hideStatus = data.hideStatus || false;\n\n      defer.resolve({});\n\n      if (!hideStatus) {\n        self.trigger(\"onSearchError\", data);\n      }\n    });\n\n    return defer.promise(defer);\n  },\n\n  /**\r\n      * Sets the internal value\r\n      * @param {} value\r\n      * @param {} triggerEvents\r\n      * @returns {}\r\n      */\n  setValue: function setValue(value, triggerEvents) {\n    var self = this;\n    triggerEvents = triggerEvents !== undefined ? triggerEvents : true;\n\n    self._super(value, triggerEvents);\n\n    if (value != undefined) {\n      this.value = value;\n      this.selectedValue = value.label;\n    } else {\n      this.value = null;\n      this.selectedValue = null;\n    }\n  },\n\n  /* Maps the value, when this one comes from actions*/\n  mapValue: function mapValue(value) {\n    if (value && value.fromAction) {\n      return {\n        id: value.value,\n        value: value.label,\n        label: value.label };\n\n    }\n\n    return value;\n  },\n\n  /*\r\n     *   Add the render data to the given collection in order to send data to the server\r\n      */\n  collectData: function collectData(renderValues) {\n    var self = this;\n    var xpath = self.properties.xpath;\n    var value = self.getValue();\n\n    if (self.controlValueIsChanged()) {\n      // Filter by valid xpaths and valid values\n      // Remove empty validation for value for combos\n      if (!bizagi.util.isEmpty(xpath) && value !== null && typeof value !== \"undefined\") {\n        // Add a validation because sometimes value contains an empty not null object\n        if (_typeof(value) == \"object\" && value.id === undefined)\n        return;\n        // Add the value to the server\n        renderValues[xpath] = value;\n      }\n    }\n  },\n\n  /**\r\n      * Submits the selected data to the server in order to be saved\r\n      * @returns {}\r\n      */\n  submitData: function submitData() {\n    var self = this;\n    var data = {};\n\n    // Add current data\n    if (!self.grid) {\n      data[self.properties.xpath] = self.getValue();\n    }\n\n    // Executes submit on change\n    self.submitOnChange(data, undefined, false);\n  },\n\n  /**\r\n      * Check if control is valid or not\r\n      * @param {} invalidElements\r\n      * @returns {}\r\n      */\n  isValid: function isValid(invalidElements) {\n    return this._super(invalidElements);\n  },\n\n  hasValue: function hasValue() {\n    var value = this.getValue();\n\n    if (typeof value == \"undefined\" || value == null) return false;\n\n    if (_typeof(value) === \"object\" && value.id !== \"\" && typeof value.id !== \"undefined\") return true;\n    return !bizagi.util.isEmpty(value);\n  },\n\n  /**\r\n      * Formats value of each item\r\n      * @param {string, boolean or array} value\r\n      * @example\r\n      * value = \"string\" => \"string\"\r\n      * value = true => \"yes\" or \"si\", the localized value\r\n      * value = false => \"no\", the localized value\r\n      * value = [\"string 1\", \"string 2\"] => \"string 1 - string 2\"\r\n      * @returns {string}\r\n      */\n  formatItem: function formatItem(value) {\n    return bizagi.util.formatItem(value);\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /*\r\n                                                                                                                                                                                                                                                                                                                                                                               *   Name: BizAgi Render Layout Render Class\r\n                                                                                                                                                                                                                                                                                                                                                                               *   Author: Andrs Fernando Muoz\r\n                                                                                                                                                                                                                                                                                                                                                                               *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                               *   -   This script will define a base layout render class with common stuff related to all renders\r\n                                                                                                                                                                                                                                                                                                                                                                               */\n\n$.Class.extend(\"bizagi.rendering.layoutRender\", {}, {\n  /*\r\n                                                       *   Returns the html templated element\r\n                                                       */\n  renderElement: function renderElement(template) {\n    var self = this;\n    var properties = self.properties;\n    var form = self.getFormContainer();\n    // Start rendering deferred\n    self.renderingDeferred = new $.Deferred();\n\n    // Set render template\n    template = template || \"render-layout\";\n    var renderTemplate = self.renderFactory.getTemplate(template);\n\n    // Resolve render label\n    var label = properties.displayName;\n\n    if (typeof label == \"string\") {\n      label = bizagi.util.encodeString(label);\n    }\n\n    // Render template\n    var html = $.fasttmpl(renderTemplate, {\n      label: label,\n      isExtendedText: properties.type == \"text\" && properties.isExtended,\n      orientation: properties.orientation,\n      uniqueId: properties.uniqueId,\n      id: properties.id,\n      isDesign: self.getMode() === \"design\",\n      messageValidation: properties.messageValidation,\n      printVersion: form.params.printversion,\n      cssClass: properties.cssclass || \"\",\n      hide: properties.hide });\n\n\n    // Render internal control html\n    var result = self.internalRenderControl();\n    if (!result) {\n      result = \"\";\n    }\n\n    // Check if this is an async element or not\n    var async = _typeof(result) === \"object\" && result.done;\n    if (!async) {\n      html = self.replaceControlHtml(html, result);\n\n    } else {\n      if (result.state() === \"resolved\") {\n        // Fetch resolved result\n        html = self.replaceControlHtml(html, self.resolveResult(result));\n        self.asyncRenderDeferred = null;\n      } else {\n        // Wait for result\n        self.asyncRenderDeferred = result;\n        html = self.replaceControlHtml(html, \"\");\n      }\n    }\n\n    return html;\n  },\n\n  /*\r\n     *   Template method to get the control element\r\n     */\n  getControl: function getControl() {\n    var self = this;\n    if (!self.control || self.control instanceof jQuery && self.control.length === 0) {\n      self.control = self.element;\n    }\n    if (!self.control || self.control.length == 0) {\n      return null;\n    }\n    return self.control;\n  },\n\n  /*\r\n     * Customizes the font italic style *\r\n     */\n  changeFontItalic: function changeFontItalic(italic) {\n    if (bizagi.util.parseBoolean(italic)) {\n      this.getControl().css(\"font-style\", \"italic\", \"!important\");\n    } else {\n      this.getControl().css(\"font-style\", \"normal\", \"!important\");\n    }\n    return this;\n  },\n\n  /*\r\n     * Customizes the font underline\r\n     */\n  changeFontUnderline: function changeFontUnderline(underline) {\n    var valueFormat = this.properties.valueFormat || {},\n    valuestrikethru = bizagi.util.parseBoolean(valueFormat.strikethru) ? \"line-through \" : \"\";\n\n    if (bizagi.util.parseBoolean(underline)) {\n      this.getControl().css(\"text-decoration\", valuestrikethru + \"underline\", \"!important\");\n    } else {\n      this.getControl().find(\"*\").each(function (i, element) {\n        $(element).css(\"text-decoration\", valuestrikethru, \"!important\");\n      });\n    }\n\n    return this;\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /**\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: Bizagi Render HandSignature Class\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: UI Forms Team\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This script will define basic stuff for HandSignature control\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n$.Class.extend(\"bizagi.rendering.handSignature\", {}, {\n\n  BASE_IMAGE: \"data:image/png;base64,\",\n  EMPTY_IMAGE: \"R0lGODlhAQABAIAAAP7//wAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw==\",\n  EMPTY_VALUE: \"\",\n  DELAY_TO_SAVE: 1000,\n\n  // Fallback if resources\n  RESOURCES_FALLBACK: {\n    DONE_BUTTON: \"Done\",\n    EDIT_BUTTON: \"Edit\",\n    CLEAR_BUTTON: \"Clear\",\n    UPLOAD_SUCCESS: \"Your signature have been uploaded successfully\",\n    UPLOAD_ERROR: \"The signature have not been uploaded. Try again\",\n    TITLE_DONE: \"Click \\\"Done\\\" to upload the signature\",\n    TITLE_DRAW: \"Draw here your signature\",\n    TITLE_EDIT: \"Click \\\"Edit\\\" to start drawing\" },\n\n\n  // Type of state\n  STATE_TYPE: {\n    edit: 1,\n    draw: 2,\n    done: 3,\n    success: 4,\n    error: 5 },\n\n\n  /**\r\n                 * Whether or not is plugin initialized\r\n                 * @var isOfflineForm boolean\r\n                 */\n  pluginInitialized: false,\n\n  saveDeferred: null,\n  saveTimestamp: 0,\n\n  /**\r\n                     * Update or init the element data\r\n                     * @param data\r\n                     */\n  initializeData: function initializeData(data) {\n    // Call base\n    this._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n\n    properties.editable = bizagi.util.parseBoolean(properties.editable) === true;\n    properties.addUrl = properties.addUrl || this.dataService.serviceLocator.getUrl(\"form-submit-data-upload\");\n    properties.deleteUrl = properties.deleteUrl || this.dataService.serviceLocator.getUrl(\"render-upload-delete-url\");\n    properties.isChanged = false;\n\n    this.currentState = this.STATE_TYPE.edit;\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @returns {*|jQuery}\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var properties = self.properties;\n    var template = self.renderFactory.getTemplate(\"hand-signature\");\n\n    return $.fasttmpl(template, {\n      id: properties.id,\n      xpath: properties.xpath,\n      editable: properties.editable,\n      isDesign: !self.isExecutionMode(),\n      render_signature_action_edit: self.getResourceByKey(\"render-signature-action-edit\", self.RESOURCES_FALLBACK.EDIT_BUTTON),\n      render_signature_action_done: self.getResourceByKey(\"render-signature-action-done\", self.RESOURCES_FALLBACK.DONE_BUTTON),\n      render_signature_action_clear: self.getResourceByKey(\"render-signature-action-clear\", self.RESOURCES_FALLBACK.CLEAR_BUTTON) });\n\n  },\n\n  /**\r\n      * After rendering element\r\n      */\n  postRender: function postRender() {\n    var self = this;\n\n    // Apply plugin\n    if (this.isExecutionMode()) {\n      var $container = self.getSignatureContainer();\n\n      // Wait until current element is rendered\n      self.setResizeObserver($container, function (initialized) {\n        self.renderSignature();\n        self.setState(self.currentState);\n\n        if ([self.STATE_TYPE.draw, self.STATE_TYPE.done].includes(self.currentState)) {\n          $container.BzjSignature(\"enable\");\n        }\n      });\n    }\n  },\n\n  /**\r\n      * Render after processed in read-only mode\r\n      */\n  postRenderReadOnly: function postRenderReadOnly() {\n    var self = this;\n\n    // Apply plugin\n    if (this.isExecutionMode()) {\n      var $container = self.getSignatureContainer();\n\n      // Wait until current element is rendered\n      self.setResizeObserver($container, function () {\n        self.renderSignature();\n      });\n    }\n  },\n\n  /**\r\n      * Method to render non editable values\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    var self = this;\n    var properties = self.properties;\n    var template = self.renderFactory.getTemplate(\"hand-signature-readonly\");\n\n    return $.fasttmpl(template, {\n      id: properties.id,\n      xpath: properties.xpath,\n      editable: properties.editable,\n      isDesign: !self.isExecutionMode() });\n\n  },\n\n  setData: function setData(value) {\n    var self = this;\n    var previousValue = self.getData();\n\n    if (bizagi.util.isEmpty(value)) {\n      this.properties.binaryValue = null;\n    } else {\n      if (value instanceof Blob) {\n        this.properties.binaryValue = value;\n      } else {\n        this.properties.binaryValue = bizagi.util.b64toBlob(value, \"image/png\");\n      }\n    }\n\n    if (previousValue != this.properties.binaryValue) {\n\n      if (self.properties.required && self.isExecutionMode()) {\n        var isValidField = !self.checkRequired([]);\n        self.changeRequiredLabel(isValidField);\n      }\n\n      if (this.properties.isChanged) {\n        self.triggerRenderChange();\n        self.triggerRenderValidate();\n      }\n    }\n  },\n\n  getData: function getData() {\n    return this.properties.binaryValue || [];\n  },\n\n  getBase64: function getBase64() {\n    return this.properties.base64 || \"\";\n  },\n\n  /**\r\n      * Returns the internal value\r\n      * @returns {*|Array}\r\n      */\n  getValue: function getValue() {\n    return this.properties.value || [];\n  },\n\n  /**\r\n      * Check if a render has no value for required validation\r\n      */\n  hasValue: function hasValue() {\n    if (!this.pluginInitialized) {\n      return !bizagi.util.isEmpty(this.properties.value);\n    } else {\n      var value = this.getData();\n      return !bizagi.util.isEmpty(value);\n    }\n  },\n\n  /**\r\n      * Check if control is valid or not\r\n      * @param invalidElements\r\n      * @returns {boolean}\r\n      */\n  isValid: function isValid(invalidElements) {\n    var self = this;\n\n    // Don't check non-visible renders\n    if (bizagi.util.parseBoolean(self.properties.visible) === false) {\n      return true;\n    }\n\n    // Don't check non-editable renders\n    if (bizagi.util.parseBoolean(self.properties.editable) === false) {\n      return true;\n    }\n\n    // Clear error message\n    self.setValidationMessage(\"\");\n\n    // Check required\n    if (self.properties.required && !self.hasValue()) {\n      var message = self.getResource(\"render-required-text\").replaceAll(\"#label#\", self.properties.displayName);\n      invalidElements.push({ xpath: self.properties.xpath, message: message });\n      return false;\n    }\n\n    return true;\n  },\n\n  /**\r\n      * Method to determine if the render value can be sent to the server or not\r\n      * @returns {boolean}\r\n      */\n  canBeSent: function canBeSent() {\n    var form = this.getFormContainer();\n    if (!form.isOfflineForm) return true;\n    return this.properties.isChanged;\n  },\n\n  /**\r\n      * Process an upload file into the server\r\n      * @param {} dataFile\r\n      * @returns {}\r\n      */\n  processUploadFile: function processUploadFile(dataFile) {\n    var data = {\n      url: this.properties.addUrl,\n      formData: this.buildAddFileParams(dataFile) };\n\n\n    return this.dataService.processUploadFile(data);\n  },\n\n  /**\r\n      * Build add params to send to the server\r\n      * @param {} dataFile\r\n      * @returns {}\r\n      */\n  buildAddFileParams: function buildAddFileParams(dataFile) {\n    var self = this;\n    var properties = self.properties;\n    var prefix = self.Class.BA_CONTEXT_PARAMETER_PREFIX;\n\n    // Get form data for POSTing\n    var formData = new FormData();\n    var form = self.getFormContainer();\n\n    // Build add params to send to the server\n    formData.append(prefix + \"xpath\", properties.xpath);\n    formData.append(prefix + \"idRender\", properties.id);\n    formData.append(prefix + \"xpathContext\", properties.xpathContext);\n    formData.append(prefix + self.Class.BA_PAGE_CACHE, properties.idPageCache);\n    formData.append(self.Class.BA_ACTION_PARAMETER_PREFIX + \"sessionId\", form.properties.sessionId);\n    formData.append(prefix + \"action\", \"savefile\");\n\n    var fileName = \"signature_\" + bizagi.util.randomNumber() + \".png\";\n    formData.append(self.properties.xpath, dataFile, fileName);\n\n    if (properties.contexttype) {\n      formData.append(prefix + \"contexttype\", properties.contexttype);\n    }\n\n    try {\n      if (typeof BIZAGI_SESSION_NAME !== \"undefined\") {\n        formData.append(BIZAGI_SESSION_NAME, form.properties.sessionId);\n      } else {\n        formData.append(\"JSESSIONID\", form.properties.sessionId);\n      }\n    } catch (e) {\n      formData.append(\"JSESSIONID\", form.properties.sessionId);\n    }\n\n    return formData;\n  },\n\n  /**\r\n      * Builds the upload item url\r\n      * @param params\r\n      * @returns {*}\r\n      */\n  buildItemUrl: function buildItemUrl() {\n    var self = this;\n    var form = self.getFormContainer();\n    var properties = self.properties;\n    var isVersion2OrSuperior = form.properties.compatibilityVersion >= 2;\n    var url = \"\";\n\n    if (!this.isExecutionMode()) return $.Deferred().resolve(url).promise();\n\n    var parameters = {\n      url: properties.dataUrl,\n      xpath: properties.xpath,\n      idRender: properties.id,\n      xpathContext: properties.xpathContext,\n      idPageCache: properties.idPageCache,\n      property: \"fileFullContent\",\n      queue: \"onlineimages\",\n      sessionId: form.properties.sessionId,\n      contexttype: properties.contexttype || undefined,\n      dataType: \"text\" };\n\n\n    if (isVersion2OrSuperior) {\n\n      if (bizagi.util.isEmpty(self.properties.value) && !self.hasValue()) return $.Deferred().resolve(\"\").promise();\n\n      parameters.property = \"fileBinaryContent\";\n      parameters.sessionId = form.properties.sessionId;\n\n      return self.dataService.downloadFile(parameters).\n      then(function (blob) {\n        self.setData(blob);\n        if (blob == null || window.Blob && blob instanceof Blob && blob.size === 0) return null;\n        return bizagi.util.blobTob64(blob, false);\n      }).\n      then(function (base64) {\n        return bizagi.util.getDataUrl(base64, properties.url);\n      });\n    }\n\n    return self.dataService.multiaction().getPropertyData(parameters, \"text\").\n    then(function (data) {\n      if (data.charAt(0) === \"\\\"\") data = data.slice(1, -1);\n      if (data !== \"\") url = self.BASE_IMAGE + data;\n      self.setData(bizagi.util.b64toBlob(data));\n      return url;\n    });\n  },\n\n  /**\r\n      * Call the form failhandler with an specific error\r\n      * @param {} error\r\n      * @returns {}\r\n      */\n  executeFormFailHandler: function executeFormFailHandler(error) {\n    var error_obj = bizagi.util.getErrorFormatted(error);\n    var message = error_obj;\n\n    if (typeof error_obj === \"undefined\" || error_obj && !error_obj.message) {\n      message = Object.assign({}, _typeof(error_obj) === \"object\" ? error_obj : {}, {\n        \"message\": bizagi.localization.getResource(\"workportal-general-error\") });\n\n    }\n\n    this.getFormContainer().failHandler(message);\n  },\n\n  /**\r\n      * Save data control\r\n      * @returns {*}\r\n      */\n  saveSignature: function saveSignature(dataImage) {\n    var self = this;\n\n    var defer = new $.Deferred();\n    var form = self.getFormContainer();\n\n\n    form.useOrSetLoaderDeferred();\n    form.appendWaitForLoader({ promise: defer.promise() });\n\n    return $.when(self.postSignature(dataImage)).\n    then(function (base64) {\n      self.setData(base64);\n      self.properties.url = bizagi.util.getDataUrl(base64, self.EMPTY_VALUE);\n      self.executePartialSaveForm();\n      defer.resolve();\n    }).fail(function (error) {\n      self.executeFormFailHandler(error);\n      defer.reject();\n    });\n  },\n\n  executePartialSaveForm: function executePartialSaveForm() {\n    var self = this;\n    var data = {};\n    var form = this.getFormContainer();\n\n    if (!form.isOfflineForm) return;\n    self.collectDataToSave(data);\n    form.partialSubmitFormOffline(data).then(function () {\n      //console.log(\"Signature saved\");\n    });\n  },\n\n  /**\r\n      * Delete image\r\n      * @returns {*}\r\n      */\n  deleteImage: function deleteImage() {\n    return this.dataService.deleteImage({\n      url: this.properties.deleteUrl,\n      idRender: this.properties.id,\n      xpath: this.properties.xpath,\n      xpathContext: this.properties.xpathContext,\n      idPageCache: this.properties.idPageCache,\n      contexttype: this.properties.contexttype });\n\n  },\n\n  /**\r\n      * Execute upload image\r\n      * @param dataImage\r\n      * @returns {*}\r\n      */\n  postSignature: function postSignature(dataImage) {\n    var signature = dataImage.replace(/^data:image\\/(png|jpg|jpeg);base64,/, \"\");\n    return this.postSignatureOnline(signature);\n  },\n\n  /**\r\n      * Execute upload image for online mode\r\n      * @param signature\r\n      * @returns {*}\r\n      */\n  postSignatureOnline: function postSignatureOnline(signature) {\n    var self = this;\n    var dataFile = self.getDataFileFromSignature(signature);\n\n    if (bizagi.util.isEmpty(dataFile)) {\n      return self.getData();\n    }\n\n    return self.processUploadFile(dataFile).then(function () {\n      self.properties.isChanged = true;\n      return signature;\n    });\n  },\n\n  /**\r\n      * Clean html because some scenarios render twice\r\n      */\n  emptyControlByAsyncRenderDeferred: function emptyControlByAsyncRenderDeferred() {\n    var $control = this.getControl();\n    $control.empty();\n  },\n\n  // region // #region METHODS TO OFFLINE\n\n  /**\r\n   * Create an image offline\r\n   * @param path File in Browser or Path in Mobile Devices\r\n   * @param promise Promise to be resolved when save is completed\r\n   */\n  saveImageOffline: function saveImageOffline(path) {\n    var self = this;\n    var id = self.buildOfflineImageId();\n\n    return $.when(function () {\n      return path;\n    }()).then(function (blobImage) {\n      // Save the image as attachment\n      var formParams = self.getFormParams();\n      var parameters = {\n        idCase: formParams.idCase,\n        idWorkitem: formParams.idWorkitem,\n        id: id,\n        operationType: \"edition\",\n        offlineType: formParams.offlineType };\n\n\n      return self.dataService.saveOfflineImage(parameters, blobImage);\n    });\n  },\n\n  /**\r\n      * Add the render data to the given collection in order to send data to the server\r\n      * @param {} renderValues\r\n      * @returns {}\r\n      */\n  collectDataToSave: function collectDataToSave(renderValues) {\n    var self = this;\n    if (self.isOfflineForm && bizagi.util.isOfflineFormsV2Supported()) {\n      if (!self.properties.isChanged) return;\n\n      renderValues[self.properties.xpath] = {\n        offlineId: self.buildOfflineImageId(),\n        name: self.dataService.fileService.getOfflineImageName(self.getValue()),\n        isSignature: true };\n\n    }\n  },\n\n  /**\r\n      * This method allows wait until the signature is persisted to execute the form save \r\n      * @param {*} renderValues \r\n      * @returns \r\n      */\n  collectData: function collectData(renderValues) {\n    var self = this;\n    if (self.saveTimestamp == 0) return;\n    var tmpTimeStamp = new Date().getTime() - self.saveTimestamp;\n\n    if (tmpTimeStamp < self.DELAY_TO_SAVE) {\n      var def = new $.Deferred();\n      setTimeout(function () {\n        $.when(self.saveDeferred).always(function () {\n          def.resolve();\n        });\n      }, self.DELAY_TO_SAVE + 10 - tmpTimeStamp);\n      renderValues.deferreds = renderValues.deferreds || [];\n      renderValues.deferreds.push(def.promise());\n    } else\n    if (self.saveDeferred) {\n      renderValues.deferreds = renderValues.deferreds || [];\n      renderValues.deferreds.push(self.saveDeferred.promise());\n    }\n  },\n\n  /**\r\n      * Builds the upload item url\r\n      * @returns {*}\r\n      */\n  buildItemUrlOffline: function buildItemUrlOffline() {\n    var self = this;\n    var properties = self.properties;\n    var formParams = self.getFormParams();\n    var imageId = self.buildOfflineImageId();\n    var loadImageFromForm = !properties.isChanged;\n\n    var parameters = {\n      idCase: formParams.idCase,\n      idWorkitem: formParams.idWorkitem,\n      id: imageId,\n      offlineType: formParams.offlineType,\n      loadImageFromForm: loadImageFromForm };\n\n\n    return $.when(self.dataService.getOfflineImage(parameters, bizagi.util.db.AttachmentType.Blob)).\n    then(function (blob) {\n      self.setData(blob);\n      if (blob == null || window.Blob && blob instanceof Blob && blob.size === 0) return null;\n      return bizagi.util.blobTob64(blob, false);\n    }).\n    then(function (base64) {\n      return bizagi.util.getDataUrl(base64, properties.url);\n    });\n  },\n\n  // endregion // #endregion\n\n  // region // #region UTILS TO CONTROL\n\n  /**\r\n   * Update actions\r\n   * @param state\r\n   */\n  setState: function setState(state) {\n    var self = this;\n    var $actions = $(\".bz-actions\", this.getControl());\n    var message = \"\";\n\n    self.currentState = state;\n\n    switch (state) {\n      case self.STATE_TYPE.edit:\n        message = self.getResourceByKey(\"render-signature-title-edit\", self.RESOURCES_FALLBACK.TITLE_EDIT);\n        break;\n      case self.STATE_TYPE.draw:\n        message = self.getResourceByKey(\"render-signature-title-draw\", self.RESOURCES_FALLBACK.TITLE_DRAW);\n        break;\n      case self.STATE_TYPE.done:\n        message = self.getResourceByKey(\"render-signature-title-done\", self.RESOURCES_FALLBACK.TITLE_DONE);\n        break;}\n\n\n    // Update message\n    $(\".bz-actions__status\", $actions).text(message);\n\n    // Update actions\n    self.setActions(state);\n  },\n\n  /**\r\n      * Update action state\r\n      * @param state\r\n      */\n  setActions: function setActions(state) {\n    var self = this;\n    var $actions = $(\".bz-actions\", this.getControl());\n\n    if ([self.STATE_TYPE.draw].includes(state)) {\n      // Hidden action\n      $actions.find(\"[data-action='edit']\").addClass(\"bz-hidden\");\n\n      // Show actions\n      $actions.find(\"[data-action='clear']\").removeClass(\"bz-hidden\");\n      $actions.find(\"[data-action='save']\").removeClass(\"bz-hidden\");\n    } else if ([self.STATE_TYPE.edit].includes(state)) {\n      // Show actions\n      $actions.find(\"[data-action='edit']\").removeClass(\"bz-hidden\");\n\n      // Hidden action\n      $actions.find(\"[data-action='clear']\").addClass(\"bz-hidden\");\n      $actions.find(\"[data-action='save']\").addClass(\"bz-hidden\");\n    }\n  },\n\n  buildOfflineImageId: function buildOfflineImageId() {\n    var self = this;\n    var form = self.getFormContainer();\n    var isVersion2OrSuperior = form.properties.compatibilityVersion >= 2;\n    var isStartForm = !form.properties.isTaskForm;\n\n    return self.dataService.fileService.buildOfflineImageId(self.properties.value, self.properties.xpathContext, self.properties.xpath, isVersion2OrSuperior, isStartForm);\n  },\n\n  buildOfflineFileLoadingKey: function buildOfflineFileLoadingKey() {\n    var self = this;\n    var form = self.getFormContainer();\n    var idCase = form.getParams().idCase;\n    var idWorkitem = form.getParams().idWorkitem;\n\n    var key = idCase;\n    if (!bizagi.util.isEmpty(idWorkitem)) key += \"-\" + idWorkitem;\n    key += \"-\";\n    if (!bizagi.util.isEmpty(self.properties.xpathContext)) key += \"-\" + self.properties.xpathContext;\n    key += self.properties.xpath;\n\n    return key;\n  },\n\n  getDataFileFromSignature: function getDataFileFromSignature(signature) {\n    try {\n      var binary = atob(signature);\n      var array = bizagi.util.stringToByteArray(binary);\n\n      return new Blob([new Uint8Array(array)], { type: \"image/png\" });\n    } catch (e) {\n      return \"\";\n    }\n  },\n\n  setSignature: function setSignature($container) {\n    var url = this.properties && this.properties.url;\n\n    try {\n      if (!bizagi.util.isEmpty(url)) {\n        $container.BzjSignature(\"reset\");\n        $container.BzjSignature(\"setData\", url);\n      }\n    } catch (err) {\n    }\n  },\n\n  /**\r\n      * Provides a way to asynchronously observe changes in the resize\r\n      * of a target element\r\n      * @param $context\r\n      * @param callbackFn\r\n      */\n  setResizeObserver: function setResizeObserver($context, callbackFn) {\n    var self = this;\n    var initialWidth = 0;\n\n    var resizeObserver = new ResizeObserver(function (entries) {\n      var entry = entries[0];\n      if (entry.contentRect) {\n        if (initialWidth !== entry.contentRect.width && entry.contentRect.width !== 0) {\n          initialWidth = entry.contentRect.width;\n          if (typeof callbackFn === \"function\") {\n            callbackFn();\n          }\n        }\n      }\n    });\n\n    resizeObserver.observe($context.get(0));\n  },\n\n  /**\r\n      * Get container of control\r\n      * @param selectorClass\r\n      * @returns {*}\r\n      */\n  getSignatureContainer: function getSignatureContainer(selectorClass) {\n    var contextClass = selectorClass || \".bz-signature__container\";\n    return this.getSignatureContext(contextClass);\n  },\n\n  /**\r\n      * Get context of control\r\n      * @param selectorClass\r\n      * @returns {jQuery|HTMLElement}\r\n      */\n  getSignatureContext: function getSignatureContext(selectorClass) {\n    var $control = this.getControl();\n    return $(selectorClass, $control);\n  },\n\n  onSignatureClear: function onSignatureClear() {\n    //To implement in the specific class\n  },\n\n  cleanData: function cleanData() {\n    var form = this.getFormContainer();\n\n    var result = this.onSignatureClear(this.getSignatureContainer());\n\n    form.useOrSetLoaderDeferred();\n    form.appendWaitForLoader({ promise: result.promise() });\n\n    return result;\n  }\n  // endregion // #endregion\n});","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /**\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: Bizagi Render Column Decorator Class\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: Bizagi UI Forms\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This script will define basic stuff for Columns\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\nbizagi.rendering.element.extend(\"bizagi.rendering.columns.column\", {}, {\n  /*\r\n                                                                         *   Constructor\r\n                                                                         */\n  init: function init(params) {\n    // Call base\n    this._super(params);\n\n    // Save original properties\n    this.originalProperties = JSON.parse(JSON.encode(this.properties));\n\n    this.decoratedClass = params.decorated;\n    this.data = params.data;\n    if (params.singleInstance) {\n      this.decorated = new this.decoratedClass({\n        data: this.data,\n        parent: this.parent,\n        renderFactory: this.renderFactory,\n        dataService: this.dataService });\n\n      this.decorated.getControl = this.getControl;\n      params.decorated = this.decorated;\n      this.decorated.properties.isColumn = true;\n    } else {\n      this.decorateRenders = [];\n    }\n    this.grid = params.parent;\n\n    // Set base column styles\n    var properties = this.properties;\n\n    properties.columnVisible = bizagi.util.parseBoolean(properties.columnVisible) != null ? bizagi.util.parseBoolean(properties.columnVisible) : true;\n    properties.align = properties.align || 'center';\n    properties.textFormat = properties.textFormat || {};\n    properties.submitOnChange = typeof properties.submitOnChange != \"undefined\" ? bizagi.util.parseBoolean(properties.submitOnChange) : false;\n    properties.singleInstance = params.singleInstance;\n    properties.editable = typeof properties.editable != \"undefined\" ? bizagi.util.parseBoolean(properties.editable) : true;\n    properties.visible = typeof properties.visible != \"undefined\" ? bizagi.util.parseBoolean(properties.visible) : true;\n    properties.required = typeof properties.required != \"undefined\" ? bizagi.util.parseBoolean(properties.required) : false;\n    properties.showColumn = typeof properties.showColumn != \"undefined\" ? bizagi.util.parseBoolean(properties.showColumn) : true;\n    properties.isSortable = typeof properties.isSortable != \"undefined\" ? bizagi.util.parseBoolean(properties.isSortable) : true;\n\n    // Define if it is editable or not        \n    try {\n      if (params.parent && typeof params.parent.properties.editable == \"boolean\" && !params.parent.properties.editable) {\n        properties.editable = false;\n      }\n    } catch (e) {\n    }\n\n    // Define if the column is readonly\n    this.readonly = properties.readonly !== undefined ? properties.readonly : false;\n    if (this.readonly) properties.editable = required = false;\n  },\n\n  /*\r\n     *   Return true if the column is read-only, so we can make a quick render\r\n     */\n  isReadonly: function isReadonly() {\n    return false;\n  },\n\n  /*\r\n     *   Method to retrieve the decorated control\r\n     */\n  getControl: function getControl() {\n    var self = this;\n    return $(\".ui-bizagi-render-control\", self.element || self.observableElement);\n  },\n  /*\r\n     *   Returns the decorated cell instance to use\r\n     */\n  getDecorated: function getDecorated(surrogateKey) {\n    var self = this;\n    var properties = self.properties;\n    if (properties.singleInstance) {\n      return self.decorated;\n    } else {\n      var decorated = self.decorateRenders[surrogateKey];\n      if (decorated == undefined) {\n        if (_typeof(self.decorateRenders) != \"object\") {\n          self.decorateRenders = [];\n        }\n        var instanceDecoratedClass = new this.decoratedClass({\n          data: bizagi.clone(this.data),\n          parent: this.parent,\n          renderFactory: this.renderFactory,\n          dataService: this.dataService });\n\n        decorated = instanceDecoratedClass;\n        self.decorateRenders[surrogateKey] = instanceDecoratedClass;\n\n        // Set surrogate key to all controls\n        decorated.surrogateKey = surrogateKey;\n\n        // Execute decorated overrides\n        self.applyOverrides(decorated);\n\n        var dataType = bizagi.util.normalizeType(decorated.properties.type);\n        // Also override setDisplayValue on summary row for non numeric columns\n        if (surrogateKey === \"summary\" && !/columnMoney/i.test(dataType) && !/columnNumber/i.test(dataType)) {\n\n          decorated.setDisplayValue = function (value) {\n            var control = this.getControl();\n\n            // Replace line breaks for html line breaks\n            control.html(value);\n          };\n        }\n      }\n      return decorated;\n    }\n  },\n  /*\r\n     *   Set a ready function to execute when the render has been inserted in the dom\r\n     */\n  ready: function ready() {\n    return this.readyDeferred.promise();\n  },\n  /*\r\n     *   Load stuff needed for the column\r\n     *   It could return a promise if the column need to load async stuff\r\n     */\n  initialize: function initialize() {\n    // Override to do any stuff needed here\n  },\n  /* \r\n     *  Method to determine if the render value can be sent to the server or not\r\n     */\n  canBeSent: function canBeSent(surrogateKey, cellOverrides) {\n    var self = this;\n    var decorated = self.getDecorated(surrogateKey);\n\n    if (cellOverrides) {\n      decorated.properties.visible = cellOverrides.visible;\n      decorated.properties.editable = cellOverrides.editable;\n    }\n    return decorated.canBeSent() || !self.properties.editable && self.hasChanged() || !decorated.properties.editable && self.hasChanged();\n  },\n  /*\r\n     *   Method to check if a value is valid or not in this render\r\n     */\n  isValueValid: function isValueValid(surrogateKey, value, messages, propertyOverrides) {\n    var self = this;\n    var decorated = self.getDecorated(surrogateKey);\n    var invalidElements = [];\n\n    if (propertyOverrides.visible) {\n      self.setValue(surrogateKey, value);\n\n      // Override properties\n      decorated.properties = $.extend(decorated.properties, propertyOverrides);\n\n      if (self.grid && typeof decorated.grid === \"undefined\") {\n        decorated.grid = self.grid;\n      }\n\n      // Validate field\n      decorated.isValid(invalidElements);\n    }\n\n    if (invalidElements.length > 0) {\n      $.each(invalidElements, function (i, invalidElement) {\n        messages.push(invalidElement.message);\n      });\n      return false;\n    }\n\n    return true;\n  },\n  /*\r\n     *   Apply custom overrides to each decorated instance\r\n     */\n  applyOverrides: function applyOverrides(decorated) {\n  },\n  /*\r\n     *   Returns the in-memory processed element \r\n     *   so the caller could append it to any place\r\n     */\n  render: function render(surrogateKey, value) {\n    try {\n      var self = this;\n      var properties = self.properties;\n      // Set grid and id references to the control in order to render the content\n      var decorated = self.getDecorated(surrogateKey);\n      decorated.grid = self.grid;\n      decorated.column = this;\n      decorated.surrogateKey = surrogateKey;\n\n      // Set cell value\n      self.setValue(surrogateKey, value);\n\n      // Override render properties\n      self.overrideDecoratedRenderProperties(surrogateKey);\n\n      // Set flag to check when a render has changed\n      self.changed = false;\n\n      // If the render is not editable return the readonly version of the column\n      //Fix: Uncaught RangeError: Maximum call stack size exceeded\n      if (!properties.editable && arguments[3] !== \"CALLER_RENDER_READ_ONLY_COLUMNSLINK\")\n      return self.renderReadOnly.apply(self, arguments);\n\n      // Returns the decorated render inside a custom layout for columns\n      self.readyDeferred = new $.Deferred();\n      var cell = decorated.render(\"cell\");\n\n      // If the render changes set the flag on\n      decorated.bind(\"renderchange\", function () {\n        self.changed = true;\n      });\n\n      self.bind(\"rendered\", function () {\n        self.readyDeferred.resolve();\n      });\n      return cell;\n\n    } catch (e) {\n      console.log(e);\n      return \"\";\n    }\n  },\n  /*\r\n     *   Post process the element after it has been rendered\r\n     */\n  postRender: function postRender(surrogateKey, cell) {\n    var self = this;\n    var decorated = self.getDecorated(surrogateKey);\n    decorated.postRenderElement(cell);\n  },\n  /*\r\n     *   Returns the in-memory processed element when the element is read-only\r\n     */\n  renderReadOnly: function renderReadOnly(surrogateKey, value) {\n    var self = this;\n    // Set grid and id references to the control in order to render the content\n    var decorated = self.getDecorated(surrogateKey);\n    decorated.grid = self.grid;\n    decorated.column = this;\n    decorated.surrogateKey = surrogateKey;\n\n    // Set cell value\n    self.setValue(surrogateKey, value);\n\n    // Override render properties\n    self.overrideDecoratedRenderProperties(surrogateKey);\n\n    // Changes editable to false to render read-only\n    decorated.properties.editable = false;\n\n    // Perform the internal render\n    self.readyDeferred = new $.Deferred();\n    var result = decorated.render(\"cell.readonly\");\n\n    self.bind(\"rendered\", function () {\n      self.readyDeferred.resolve();\n    });\n\n    // Returns the decorated render inside a custom layout for columns\n    return result;\n  },\n\n  /*\r\n     *  Returns the html template to draw the summary cell\r\n     */\n  renderSummary: function renderSummary(key, value) {\n    var self = this;\n    var result = self.renderFactory.getTemplate(\"cell.summary\");\n    return $.tmpl(result).html();\n  },\n\n  /*\r\n     *   Post process the element after it has been rendered\r\n     */\n  postRenderReadOnly: function postRenderReadOnly(surrogateKey, cell) {\n    var self = this;\n    var decorated = self.getDecorated(surrogateKey);\n    var editable = self.properties.editable;\n    decorated.properties.editable = false;\n    if (self.properties.singleInstance) {\n      decorated.element = cell;\n    }\n    decorated.postRenderElement(cell);\n    decorated.properties.editable = editable;\n  },\n\n  /*\r\n     * Return false to all columns that doesn't need special treatment (like number or currency)\r\n     */\n  postRenderSummary: function postRenderSummary() {\n    return false;\n  },\n\n  /*\r\n     *   Returns the cell html to be inserted in the table\r\n     */\n  getCell: function getCell() {\n    return this.decorated.getDisplayValue();\n  },\n  /*\r\n     *   Sets the surrogate key for this row\r\n     */\n  setSurrogateKey: function setSurrogateKey(key) {\n    this.surrogateKey = key;\n  },\n  /*\r\n     *   Sets the internal value, only must be called internally\r\n     */\n  setValue: function setValue(surrogateKey, value) {\n    var self = this;\n\n    var decorated = self.getDecorated(surrogateKey);\n    if (decorated != \"undefined\" && decorated != null) {\n\n      decorated.properties.originalValue = value;\n      decorated.properties.previousValue = value;\n\n      if (surrogateKey != 'summary' && (value === null || value === undefined) && (self.properties.defaultvalue !== undefined || self.properties.defaultValue !== undefined) && decorated.grid != undefined) {\n        value = self.setDefaultValue(surrogateKey, decorated);\n      }\n\n      decorated.properties.value = value;\n      decorated.setValue(value, false);\n    }\n  },\n\n  /*\r\n     * Set the cell default value and make this action as a change to send it to server\r\n     */\n  setDefaultValue: function setDefaultValue(surrogateKey, decorated) {\n    var self = this;\n    var value = undefined;\n\n    if (self.properties.defaultvalue !== null && self.properties.defaultvalue !== undefined) {\n      value = self.properties.defaultvalue;\n    } else {\n      if (self.properties.defaultValue !== null && self.properties.defaultValue !== undefined) {\n        value = self.properties.defaultValue;\n      }\n    }\n\n    decorated.grid.changes[surrogateKey] = decorated.grid.changes[surrogateKey] || {};\n    decorated.grid.changes[surrogateKey][self.properties.xpath] = value;\n\n    return value;\n  },\n  /*\r\n     *   Gets the internal value\r\n     */\n  getValue: function getValue(surrogateKey) {\n    var self = this;\n    var decorated = self.getDecorated(surrogateKey);\n    return decorated.getValue();\n  },\n  /*\r\n     *   Gets the composite value (applies for non-standard render values)\r\n     */\n  getCompositeValue: function getCompositeValue(surrogateKey) {\n    return this.getValue(surrogateKey);\n  },\n  /*\r\n     *   Returns the element type\r\n     */\n  getElementType: function getElementType() {\n    return bizagi.rendering.element.ELEMENT_TYPE_COLUMN;\n  },\n  /*\r\n     *   Determines if a render has changed its value\r\n     */\n  hasChanged: function hasChanged() {\n    return this.changed;\n  },\n  /*\r\n     *   Triggers an event inside the control\r\n     */\n  trigger: function trigger(eventType, data) {\n    if (this.decorated)\n    this.decorated.trigger(eventType, data);\n  },\n  /*\r\n     *   Triggers an event handler inside the control\r\n     */\n  triggerHandler: function triggerHandler(eventType, data) {\n    if (this.decorated)\n    this.decorated.triggerHandler(eventType, data);\n  },\n  /*\r\n     *   Binds to an event\r\n     */\n  bind: function bind(eventType, fn) {\n    if (this.decorated)\n    this.decorated.bind(eventType, fn);\n  },\n  /*\r\n     *   Unbinds to an event\r\n     */\n  unbind: function unbind(eventType, fn) {\n    if (this.decorated)\n    this.decorated.unbind(eventType, fn);\n  },\n  /*\r\n     *   Override decorated properties\r\n     */\n  overrideDecoratedRenderProperties: function overrideDecoratedRenderProperties(surrogateKey) {\n    var self = this;\n    var decorated = self.getDecorated(surrogateKey);\n\n    // Override decorated control properties\n    decorated.properties.editable = this.properties.editable;\n    decorated.properties.visible = this.properties.visible;\n    decorated.properties.required = this.properties.required;\n  },\n\n  overrideProperties: function overrideProperties(properties) {\n    var self = this;\n\n    self.properties.editable = properties.editable || self.properties.editable;\n    self.properties.visible = properties.visible || self.properties.visible;\n    self.properties.required = properties.required || self.properties.required;\n  },\n\n  /*\r\n     *   Returns the xpath used to sort the grid\r\n     */\n  getSortName: function getSortName() {\n    var self = this;\n\n    // Check if there is an override for the default behaviour \n    var decorated = self.getAnyDecoratedInstance();\n    if (decorated && decorated.getSortColumn) {\n      return decorated.getSortColumn();\n    }\n\n    // Default behaviour\n    return self.properties.xpath;\n  },\n\n  /*\r\n     *   Returns any of the decorated instances, if there are none, return null\r\n     */\n  getAnyDecoratedInstance: function getAnyDecoratedInstance() {\n    var self = this;\n    var first;\n\n    // Get the first key for the hash\n    for (first in this.decorateRenders) {break;}\n\n    // Return the first decorated render\n    if (first) return this.decorateRenders[first];\n\n    return null;\n  },\n\n  dispose: function dispose() {\n    var self = this;\n\n    var timeOutDecorated = setTimeout(function () {\n      if (self.decorated) {\n        self.decorated.unbind(\"renderchange\");\n        self.decorated.dispose();\n      }\n\n      if (self.decorateRenders) {\n        bizagi.util.arrayEach(self.decorateRenders, function (key, render) {\n          if (render) {\n            render.unbind(\"renderchange\");\n            render.dispose();\n          }\n        });\n      }\n      clearTimeout(timeOutDecorated);\n    }, bizagi.override.disposeTime || 50);\n\n    // Call base\n    self._super();\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /*\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: Bizagi Desktop Form Dialog Implementation\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: Diego Parra\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This script will shows a form inside a popup dialog in order to edit\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\n// Extends itself\n$.Class.extend(\"bizagi.rendering.dialog.form\", {\n  POPUP_WIDTH: 768,\n  POPUP_HEIGHT: 550 },\n{\n  /* \r\n  *   Constructor\r\n  */\n  init: function init(dataService, renderFactory, dialogParams) {\n    var self = this;\n    var doc = window.document;\n\n    //Attach the desired extra buttons, everyone need to have the localization id, so the label could match\n    self.buttons = {};\n\n    for (var item in dialogParams.extraButtons) {\n      self.buttons[bizagi.localization.getResource(item)] = dialogParams.extraButtons[item];\n    }\n\n    // Define instance variables\n    this.dataService = dataService;\n    this.renderFactory = renderFactory;\n    this.dialogDeferred = new $.Deferred();\n    dialogParams = self.dialogParams = dialogParams || {};\n\n    // Draw dialog box\n    self.dialogBox = $(\"<div class='ui-bizagi-component-loading'/>\");\n    self.dialogBox.empty();\n    self.dialogBox.appendTo(\"body\", doc);\n\n    // Create dialog box\n    self.showDialogBox(self.dialogBox, dialogParams).\n    done(function (data) {\n      self.dialogDeferred.resolve(data);\n    }).\n    fail(function () {\n      self.dialogDeferred.reject({ idPageCache: self.form.getPageCache() });\n    });\n  },\n  /*\r\n     *   Render the form\r\n     *   The params are the same that will be send to the ajax service\r\n     *   Returns a deferred\r\n     */\n  render: function render(params) {\n    var self = this;\n\n    // Fill dialog box\n    self.renderDialogBox(self.dialogBox, params);\n\n    // Return promise\n    return self.dialogDeferred.promise();\n  },\n  /*\r\n     *   Shows the dialog box in the browser\r\n     *   Returns a promise that the dialog will be closed\r\n     */\n  showDialogBox: function showDialogBox(dialogBox, dialogParams, reverseButtons) {\n    var self = this;\n    var reverseButtons = self.dialogParams.orientation == \"rtl\" ? true : false;\n\n    // Define buttons\n    var buttons = {};\n    var defer = new $.Deferred();\n\n    // Define options\n    var showSaveButton = bizagi.util.parseBoolean(dialogParams.showSaveButton) !== null ? bizagi.util.parseBoolean(dialogParams.showSaveButton) : true;\n    var showCancelButton = bizagi.util.parseBoolean(dialogParams.showCancelButton) !== null ? bizagi.util.parseBoolean(dialogParams.showCancelButton) : true;\n    var saveButtonLabel = dialogParams.saveButtonLabel ? dialogParams.saveButtonLabel : bizagi.localization.getResource(\"render-form-dialog-box-save\");\n    var cancelButtonLabel = dialogParams.cancelButtonLabel ? dialogParams.cancelButtonLabel : bizagi.localization.getResource(\"render-form-dialog-box-cancel\");\n    var maximized = bizagi.util.parseBoolean(dialogParams.maximized) !== null ? bizagi.util.parseBoolean(dialogParams.maximized) : false;\n\n    var performActions = function performActions(event) {\n      // Perform validations\n      var valid = self.dialogParams.isPlanForm ? true : self.form.validateForm();\n      if (valid) {\n        // Collect data\n        var data = {};\n\n        if (dialogParams.forceCollectData) {\n          // Turn on flag to force to collect all data on the form\n          $.forceCollectData = true;\n          self.form.collectRenderValues(data);\n          // Turn off flag\n          $.forceCollectData = false;\n        } else {\n          self.form.collectRenderValues(data);\n        }\n\n        if (dialogParams.allowGetOriginalFormValues) {\n          data.formValues = self.form.children;\n        }\n\n        // Add page cache for this form\n        data.idPageCache = self.form.getPageCache();\n\n        // Call user callback\n        if (dialogParams.onSave && !$(event.currentTarget).prop(\"disabled\")) {\n          $(event.currentTarget).prop(\"disabled\", true);\n          $(event.currentTarget).button(\"disable\"); //Setting styles\n          $.when(dialogParams.onSave(data)).\n          done(function (result) {\n            $(event.currentTarget).prop(\"disabled\", false);\n            $(event.currentTarget).button(\"enable\"); //Setting styles\n            if (result == null || result == true || result.type == \"success\") {\n              defer.resolve(data);\n              self.closeDialogBox();\n            } else if ([\"validationMessages\", \"alertMessages\"].includes(result.type)) {\n              // Add validation messages\n              if (result.type === \"validationMessages\") {\n                self.form.addValidationMessage(result.messages);\n              } else {\n                bizagi.modalError.show(result.messages, 'workportal-general-word-information', false);\n              }\n\n              // Update original value to use as reference to other futures changes in the dialogBox\n              $.each(data, function (key, value) {\n                var renders = self.form.getRenders(key);\n                $.each(renders, function (i, render) {\n                  render.updateOriginalValue();\n                });\n              });\n            } else if (result.type === \"error\") {\n              // Add error messages \n              self.form.addErrorMessage(result.message);\n            }\n          }).fail(function () {\n            $(event.currentTarget).prop(\"disabled\", false);\n            $(event.currentTarget).button(\"enable\"); //Setting styles\n          });\n        } else {\n          defer.resolve();\n          self.closeDialogBox();\n        }\n      }\n    };\n\n    if (showSaveButton) {\n      buttons[saveButtonLabel] = function (event) {\n        if (self.form) {\n          // load tabs\n          var form = self.form,\n          asyncTabsDef = $.Deferred(),\n          getAllTabs = form.getRenderByType(\"tabItem\"),\n          getAllTabsLength = getAllTabs.length;\n\n          form.innerTabsLoading = true;\n\n          $(event.currentTarget).prop(\"disabled\", true);\n          form.useOrSetLoaderDeferred();\n\n          // Check\n          for (var i = 0; i < getAllTabsLength; i++) {\n            var render = getAllTabs[i];\n            // Resolve internal deferred\n            if (render.loadingDeferred && render.parent.container) {\n              render.loadingDeferred.resolve();\n            }\n          }\n\n          delete form.innerTabsLoading;\n          // Resolve task deferred\n          asyncTabsDef.resolve({ event: event });\n\n          $.when(asyncTabsDef.promise(), form.getLoaderPromise()).done(function (response) {\n            var event = response.event;\n\n            $(event.currentTarget).prop(\"disabled\", false);\n            form.deleteLoaderDeferred();\n\n            performActions(event);\n          }).fail(function () {\n            $(event.currentTarget).prop(\"disabled\", false);\n            form.deleteLoaderDeferred();\n\n            performActions(event);\n          });\n        }\n      };\n    }\n    if (showCancelButton) {\n      buttons[cancelButtonLabel] = function () {\n        dialogParams.onCancel && dialogParams.onCancel();\n        defer.reject();\n        self.closeDialogBox();\n      };\n    }\n\n    //Attach the desired extra buttons \n    self.buttons = $.extend(buttons, self.buttons);\n\n    //Orientation RTL - OrderBut\n    if (self.dialogParams.orientation == \"rtl\") {\n      var objButtons;\n      var nameButon;\n      for (var prop in buttons) {\n        objButtons = buttons[prop];\n        nameButon = prop;\n        break;\n      }\n\n      delete buttons[nameButon];\n      buttons[nameButon] = objButtons;\n\n    }\n\n    // Creates a dialog\n    dialogBox.dialog({\n      width: this.Class.POPUP_WIDTH,\n      height: this.Class.POPUP_HEIGHT,\n      title: dialogParams.title,\n      modal: true,\n      buttons: self.buttons,\n      resizable: false, // This one is to avoid a memory leak, DO NOT CHANGE PLEASE\n      maximized: maximized,\n      open: function open(event, ui) {\n        if (maximized && typeof isWebpart == \"undefined\") {\n          // remove scroll bar\n          $(\"body\", window.document).css(\"position\", \"fixed\");\n        }\n        if (bizagi.util.isSharepointContext() || bizagi.util.isWebpartContext()) {\n          $(document).trigger(\"hide-webpart-scroll\");\n        }\n      },\n      close: function close() {\n        // set scroll bar\n        $(\"body\", window.document).css(\"position\", \"static\");\n        dialogParams.onCancel && dialogParams.onCancel();\n        defer.reject();\n        self.closeDialogBox();\n      },\n      resizeStop: function resizeStop(event, ui) {\n        if (self.form) {\n          self.form.resize(ui.size);\n        }\n      },\n      maximize: function maximize(e) {\n        if (self.form) {\n          self.form.triggerHandler(\"maximazedForm\");\n          self.dialogBox.trigger(\"resize\");\n        }\n      },\n      unmaximize: function unmaximize(e) {\n        if (self.form) {\n          self.form.triggerHandler(\"unmaximazedForm\");\n          self.dialogBox.trigger(\"resize\");\n        }\n      } });\n\n\n    self.adjustOverlay();\n\n    // Return promise\n    return defer.promise();\n  },\n  _appresize: function _appresize(args) {\n    var self = this;\n    $(self.dialogBox).dialog('widget').css({\n      left: window.screen.width / 2 - self.Class.POPUP_WIDTH / 2 + \"px\",\n      top: window.screen.height / 2 - self.Class.POPUP_HEIGHT / 2 + \"px\",\n      width: self.Class.POPUP_WIDTH + \"px\",\n      height: self.Class.POPUP_HEIGHT + \"px\" }).\n    show();\n\n  },\n  /*\r\n     *   Closes the dialog box\r\n     */\n  closeDialogBox: function closeDialogBox() {\n    var self = this;\n    var dialogBox = self.dialogBox;\n\n    // set scroll bar\n    $(\"body\", window.document).css(\"position\", \"static\");\n    if (bizagi.util.isSharepointContext() || bizagi.util.isWebpartContext()) {\n      $(document).trigger(\"show-webpart-scroll\");\n    }\n    dialogBox.dialog('destroy');\n    dialogBox.remove();\n    // Send the form to the hell, please dont remove this line, make a several bugs!!\n    self.dispose();\n  },\n  /**\r\n      * Sets the focus to the first control\r\n      */\n  focusFirstControl: function focusFirstControl(form, time) {\n    var self = this;\n    // Configures effect\n    var effect = function effect() {\n      var $allControls = $(\"input:visible, select:visible, option:visible, textarea:visible\", form.container);\n      var defaultControl = $allControls.not(\".bz-input-icon--date .bz-input-icon__input, .ui-bizagi-render-search\");\n      if (defaultControl.length > 0) {\n        // fix for retype double\n        var controlHtml = $(defaultControl[0]).closest(\".ui-bizagi-render\");\n        var xpath = controlHtml.length > 0 ? controlHtml.data(\"render-xpath\") : \"\";\n        var control = xpath ? form.getRender(xpath) : \"\";\n        if (control) {\n          if (control.properties && control.properties.retype && control.properties.retype === \"double\") {\n            return;\n          }\n        }\n        // Focus control\n        var innerControl = defaultControl[0];\n        if (self.isValidControlForFocus(innerControl, form)) {\n          try {\n            innerControl.focus();\n            $(innerControl).triggerHandler(\"focusInput\");\n          } catch (e) {\n          }\n        }\n      } else {\n        var innerControl = $(\".ui-bizagi-render\", form.container)[0];\n        if (innerControl) {\n          $(innerControl).attr(\"tabindex\", 0);\n\n          innerControl.focus();\n\n          $(innerControl).removeAttr(\"tabindex\");\n        }\n      }\n    };\n\n    // Run effect\n    if (time > 0) {\n      var timeoutEffect = setTimeout(function () {\n        effect();\n        clearTimeout(timeoutEffect);\n      }, time);\n    } else {\n      effect();\n    }\n  },\n\n  isValidControlForFocus: function isValidControlForFocus(control, form) {\n    var result = true;\n    var container = $(control).closest('[data-render-id]');\n    var id = container.data('render-id');\n    var isOnGrid = id && container.length ? container.data('bizagi-component') == 'cellContent' : false;\n\n    if (id && isOnGrid) {\n      var grid = form.getGridByColumn(id);\n      var type = grid ? grid.getColumnType(id) : null;\n      if (type && type == 'columnCombo') {\n        result = false;\n      }\n    }\n\n    return result;\n  },\n\n  /*\r\n     * Renders the dialog box content\r\n     */\n  renderDialogBox: function renderDialogBox(dialogBox, params) {\n    var self = this;\n    var def = new $.Deferred();\n\n    // Clear dialog box\n    dialogBox.empty();\n\n    // Check context\n    try {\n      if (self.form && self.form.params.data.contextType) {\n        params.contextType = self.form.params.data.contextType;\n      }\n    } catch (e) {}\n    if (params.rewriteContextType === true) {\n\n    } //self.properties.contextType\n\n    // Load template and data\n    return $.when(self.dataService.getFormData(params)).pipe(function (data) {\n      // Apply recordXpath\n      if (params.recordXPath) {\n        data.form.properties.recordXpath = params.recordXPath;\n      }\n\n      // Apply contextType\n      data.form.contextType = params.contextType;\n      if (params.rewriteContextType) {\n        data.form.contextType = undefined;\n      }\n\n      // Apply editable param\n      if (params.editable === false) {\n        data.form.properties.editable = false;\n\n        // The actions don't apply in dialog form\n        self.removeActions(data.form);\n      }\n\n      // Apply required param\n      if (params.required === false) {\n        data.form.properties.required = false;\n      }\n\n      // The transitions don't apply in dialog form\n      self.removeTransitions(data.form);\n\n      // Render dialog template\n      self.form = self.renderFactory.getContainer({\n        type: \"form\",\n        data: data.form,\n        canvas: self.dialogBox,\n        focus: params.focus || false,\n        selectedTabs: params.selectedTabs,\n        isRefresh: params.isRefresh || false,\n        requestedForm: params.requestedForm,\n        fromRender: params.fromRender });\n\n\n      def.resolve(self.form);\n\n      // Return rendering promise\n      return self.form.render();\n    }, function (message) {\n      /*** FAIL FILTER **/\n      var errorTemplate = self.renderFactory.getCommonTemplate(\"form-error\");\n      if (_typeof(message) == \"object\" && message.responseText) {\n        var objMessage = JSON.parse(message.responseText);\n        message = \"Error:\" + objMessage.errorType + \"<br>\" + objMessage.message || \" Error in form \";\n      }\n\n      // Clear dialog box\n      $(\"*\", dialogBox).remove();\n\n      $.tmpl(errorTemplate, {\n        message: message }).\n      appendTo(dialogBox);\n    }).done(function (element) {\n      // Remove button container\n      $(\".ui-bizagi-button-container\", element).remove();\n\n      // Append form  in the dialog\n      $('.ui-bizagi-loading-message', dialogBox).remove();\n      dialogBox.data(\"loading\", false);\n      dialogBox.removeClass(\"ui-bizagi-component-loading\");\n      dialogBox.html(element);\n\n      // Customize dialog box\n      dialogBox = self.customizeDialogBox(dialogBox);\n\n      // Publish an event to check if the form has been set in the DOM\n      self.form.triggerHandler(\"ondomincluded\", self.form);\n\n      if (bizagi.override.adjustButtonPositionDialogForm)\n      self.adjustButtonPosition(dialogBox);\n\n      // Scroll to element if has scroll top set\n      if (params.scrollTop) {\n        // Restore scroll at same position\n        self.form.container.parent().scrollTop(params.scrollTop);\n      } else {\n        // Focus into first control\n        self.focusFirstControl(self.form, 150);\n      }\n\n      // Attach a refresh handler to recreate all the form\n      self.form.bind(\"refresh\", function (_, refreshParams) {\n        // Check current scroll in parent\n        refreshParams.scrollTop = self.form.container.parent().scrollTop();\n        refreshParams = $.extend({\n          focus: focus,\n          selectedTabs: self.form.getSelectedTabs(),\n          isRefresh: true,\n          mainForm: params.mainForm },\n        refreshParams);\n\n        return self.renderDialogBox(dialogBox, refreshParams);\n      });\n    });\n\n    return def.promise();\n  },\n\n  adjustButtonPosition: function adjustButtonPosition(dialogBox) {\n    var childrenContainer = dialogBox.find(\".ui-bizagi-container:first\")[0];\n    var titleHeight = 29;\n    var buttonHeight = 58;\n    var availableHeight = dialogBox.parent().height() - titleHeight - buttonHeight;\n\n    new ResizeSensor(childrenContainer, function () {\n      availableHeight = dialogBox.parent().height() - titleHeight - buttonHeight;\n      fitSizes();\n    });\n\n    var fitSizes = function fitSizes() {\n      if (childrenContainer.clientHeight > availableHeight) {\n        dialogBox.height(availableHeight - 20);\n        $(\".ui-dialog-buttonpane\", dialogBox.parent()).css(\"top\", titleHeight + availableHeight);\n      } else {\n        dialogBox.height(childrenContainer.clientHeight + 20);\n        $(\".ui-dialog-buttonpane\", dialogBox.parent()).css(\"top\", titleHeight + dialogBox.height());\n      }\n    };\n\n    fitSizes();\n  },\n\n  /*\r\n     *   This method can be overriden in order to customize the dialog form rendering\r\n     */\n  customizeDialogBox: function customizeDialogBox(dialogBox) {\n    return dialogBox;\n  },\n\n  /*\r\n     * This method removes the transitions\r\n     */\n  removeTransitions: function removeTransitions(data) {\n    data = data || {};\n\n    if (data.transitions) {\n      delete data.transitions;\n    }\n  },\n\n  /*\r\n     * This method removes the actions\r\n     */\n  removeActions: function removeActions(data) {\n    data = data || {};\n\n    if (data.actions) {\n      delete data.actions;\n    }\n  },\n\n  dispose: function dispose() {\n    var self = this;\n    if (self.form) self.form.dispose();\n    bizagi.util.dispose(self.buttons);\n    bizagi.util.dispose(self);\n  },\n\n  adjustOverlay: function adjustOverlay() {\n    var overlay = $(\".ui-widget-overlay.ui-front\");\n    var body = $(\"body\");\n    var canvas = $(\"#render-canvas\");\n    var overlayHeight = parseInt(overlay.height());\n    var overlayBody = parseInt(body.height());\n    var overlayCanvas = parseInt(canvas.height());\n\n    if (overlayHeight < overlayBody) {\n      overlay.height(overlayBody);\n      overlayHeight = overlayBody;\n    }\n    if (overlayHeight < overlayCanvas) {\n      overlay.height(overlayCanvas);\n    }\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /**\r\n                                                                                                                                                                                                                                                                                                                                                                                * Show a startform within a dialog box\r\n                                                                                                                                                                                                                                                                                                                                                                                * Based on dialog.form developed by Diego Parra\r\n                                                                                                                                                                                                                                                                                                                                                                                *\r\n                                                                                                                                                                                                                                                                                                                                                                                * @author Edward Morales\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\n$.Class.extend(\"bizagi.rendering.dialog.startForm\", {\n  POPUP_WIDTH: 900,\n  POPUP_HEIGHT: 650 },\n{\n\n  /**\r\n   * Constructor\r\n   * @param dataService\r\n   * @param renderFactory\r\n   * @param dialogParams\r\n   */\n  init: function init(dataService, renderFactory, dialogParams) {\n    var self = this;\n    var doc = window.document;\n\n    // Object whit reference and actions of buttons\n    self.buttons = {};\n\n    for (var item in dialogParams.extraButtons) {\n      self.buttons[bizagi.localization.getResource(item)] = dialogParams.extraButtons[item];\n    }\n\n    // Define instance variables\n    this.dataService = dataService;\n    this.renderFactory = renderFactory;\n    this.dialogDeferred = new $.Deferred();\n    dialogParams = self.dialogParams = dialogParams || {};\n\n    // Draw dialog box\n    self.dialogBox = $(\"<div class='ui-bizagi-component-loading'/>\");\n    self.dialogBox.empty();\n    self.dialogBox.appendTo(\"body\", doc);\n\n    // Create dialog box\n    self.showDialogBox(self.dialogBox, dialogParams).\n    done(function (data) {\n      self.dialogDeferred.resolve(data);\n    }).\n    fail(function () {\n      self.dialogDeferred.reject();\n    });\n  },\n\n  /*\r\n      *   Render the form\r\n      *   The params are the same that will be send to the ajax service\r\n      *   Returns a deferred\r\n      */\n  render: function render(params) {\n    var self = this;\n\n    // Fill dialog box\n    self.renderDialogBox(self.dialogBox, params);\n\n    // Return promise\n    return self.dialogDeferred.promise();\n  },\n  /*\r\n      *   Shows the dialog box in the browser\r\n      *   Returns a promise that the dialog will be closed\r\n      */\n  showDialogBox: function showDialogBox(dialogBox, dialogParams) {\n    var self = this;\n\n    // Define buttons\n    var buttons = {};\n    var defer = new $.Deferred();\n\n    // Define options\n    var showSaveButton = bizagi.util.parseBoolean(dialogParams.showSaveButton) !== null ? bizagi.util.parseBoolean(dialogParams.showSaveButton) : true;\n    var showCancelButton = bizagi.util.parseBoolean(dialogParams.showCancelButton) !== null ? bizagi.util.parseBoolean(dialogParams.showCancelButton) : true;\n    var saveButtonLabel = dialogParams.saveButtonLabel ? dialogParams.saveButtonLabel : bizagi.localization.getResource(\"render-form-dialog-box-save\");\n    var cancelButtonLabel = dialogParams.cancelButtonLabel ? dialogParams.cancelButtonLabel : bizagi.localization.getResource(\"render-form-dialog-box-cancel\");\n    var maximized = bizagi.util.parseBoolean(dialogParams.maximized) !== null ? bizagi.util.parseBoolean(dialogParams.maximized) : false;\n\n    if (showSaveButton) {\n      buttons[saveButtonLabel] = function () {\n        if (self.form) {\n          // Perform validations\n          if (self.form.validateForm()) {\n\n            // Collect data\n            var data = {};\n\n            if (dialogParams.forceCollectData) {\n              // Turn on flag to force to collect all data on the form\n              $.forceCollectData = true;\n              self.form.collectRenderValues(data);\n              // Turn off flag\n              $.forceCollectData = false;\n            } else {\n              self.form.collectRenderValues(data);\n            }\n\n            if (dialogParams.allowGetOriginalFormValues) {\n\n              data.formValues = self.form.children;\n            }\n\n            // Add page cache for this form\n            data.idPageCache = self.form.getPageCache();\n\n            // Call user callback\n            if (dialogParams.onSave) {\n              $.when(dialogParams.onSave(data)).\n              done(function (result) {\n                if (result == null || result == true || result.type == \"success\") {\n                  defer.resolve();\n                  self.closeDialogBox();\n                } else if ([\"validationMessages\", \"alertMessages\"].includes(result.type)) {\n                  // Add validation messages\n                  if (result.type === \"validationMessages\") {\n                    self.form.addValidationMessage(result.messages);\n                  } else {\n                    bizagi.modalError.show(result.messages, 'workportal-general-word-information', false);\n                  }\n\n                  // Update original value to use as reference to other futures changes in the dialogBox\n                  $.each(data, function (key) {\n                    var renders = self.form.getRenders(key);\n                    $.each(renders, function (i, render) {\n                      render.updateOriginalValue();\n                    });\n                  });\n                } else if (result.type === \"error\") {\n                  // Add error messages\n                  self.form.addErrorMessage(result.message);\n                }\n              });\n\n            } else {\n              defer.resolve();\n              self.closeDialogBox();\n            }\n          }\n        }\n      };\n    }\n    if (showCancelButton) {\n      buttons[cancelButtonLabel] = function () {\n        dialogParams.onCancel && dialogParams.onCancel();\n        self.closeDialogBox();\n      };\n    }\n\n    //Attach the desired extra buttons\n    self.buttons = $.extend(buttons, self.buttons);\n\n    // Creates a dialog\n    dialogBox.dialog({\n      width: this.Class.POPUP_WIDTH,\n      height: this.Class.POPUP_HEIGHT,\n      title: dialogParams.title,\n      modal: true,\n      buttons: self.buttons,\n      resizable: false, // This one is to avoid a memory leak, DO NOT CHANGE PLEASE\n      maximized: maximized,\n      open: function open() {\n        if (maximized) {\n          // remove scroll bar\n          $(\"body\", window.document).css(\"position\", \"fixed\");\n        }\n      },\n      close: function close() {\n        // set scroll bar\n        $(\"body\", window.document).css(\"position\", \"static\");\n\n        defer.reject();\n        self.closeDialogBox();\n      },\n      resizeStop: function resizeStop(event, ui) {\n        if (self.form) {\n          self.form.resize(ui.size);\n        }\n      },\n      maximize: function maximize(e) {\n        if (self.form) {\n          self.form.triggerHandler(\"maximazedForm\");\n        }\n      },\n      unmaximize: function unmaximize(e) {\n        if (self.form) {\n          self.form.triggerHandler(\"unmaximazedForm\");\n        }\n      } });\n\n\n    self.adjustOverlay();\n\n    // Return promise\n    return defer.promise();\n  },\n  _appresize: function _appresize() {\n    var self = this;\n    $(self.dialogBox).dialog('widget').css({\n      left: window.screen.width / 2 - self.Class.POPUP_WIDTH / 2 + \"px\",\n      top: window.screen.height / 2 - self.Class.POPUP_HEIGHT / 2 + \"px\",\n      width: self.Class.POPUP_WIDTH + \"px\",\n      height: self.Class.POPUP_HEIGHT + \"px\" }).\n    show();\n\n  },\n  /*\r\n      *   Closes the dialog box\r\n      */\n  closeDialogBox: function closeDialogBox() {\n    var self = this;\n    var dialogBox = self.dialogBox;\n    // set scroll bar\n    $(\"body\", window.document).css(\"position\", \"static\");\n    dialogBox.dialog('destroy');\n    dialogBox.remove();\n    self.dispose();\n  },\n\n  /*\r\n      * Renders the dialog box content\r\n      */\n  renderDialogBox: function renderDialogBox(dialogBox, params) {\n    var self = this;\n    var def = new $.Deferred();\n\n    // Clear dialog box\n    dialogBox.empty();\n\n    // Check context\n    try {\n      if (self.form && self.form.params.data.contextType) {\n        params.contextType = self.form.params.data.contextType;\n      }\n    } catch (e) {\n    }\n\n    // Load template and data\n    return $.when(self.dataService.getStartForm(params)).pipe(function (data) {\n\n      // Apply contextType\n      data.form.contextType = params.contextType;\n\n      // Apply editable param\n      if (params.editable == false) {\n        data.form.properties.editable = false;\n\n        // The actions don't apply in dialog form\n        self.removeActions(data.form);\n      }\n\n      // The transitions don't apply in dialog form\n      self.removeTransitions(data.form);\n\n      // Render dialog template\n      self.form = self.renderFactory.getContainer({\n        type: \"form\",\n        data: data.form,\n        focus: params.focus || false,\n        selectedTabs: params.selectedTabs,\n        isRefresh: params.isRefresh || false });\n\n\n      def.resolve(self.form);\n\n      // Return rendering promise\n      return self.form.render();\n    }, function (message) {\n      /*** FAIL FILTER **/\n      var errorTemplate = self.renderFactory.getCommonTemplate(\"form-error\");\n      if (_typeof(message) == \"object\" && message.responseText) {\n        var objMessage = JSON.parse(message.responseText);\n        message = \"Error:\" + objMessage.errorType + \"<br>\" + objMessage.message || \" Error in form \";\n      }\n\n      // Clear dialog box\n      $(\"*\", dialogBox).remove();\n\n      $.tmpl(errorTemplate, {\n        message: message }).\n      appendTo(dialogBox);\n    }).done(function (element) {\n      // Remove button container\n      $(\".ui-bizagi-button-container\", element).remove();\n\n      // Append form  in the dialog\n      $('.ui-bizagi-loading-message', dialogBox).remove();\n      dialogBox.data(\"loading\", false);\n      dialogBox.removeClass(\"ui-bizagi-component-loading\");\n      dialogBox.html(element);\n\n      // Customize dialog box\n      dialogBox = self.customizeDialogBox(dialogBox);\n\n      // Publish an event to check if the form has been set in the DOM\n      self.form.triggerHandler(\"ondomincluded\");\n\n      var timeoutRecalculate = setTimeout(function () {\n        if (self.dialogParams.maximized) {\n          var instance = self.dialogBox.data(\"ui-dialog\");\n          instance.recalculate && instance.recalculate();\n        }\n        clearTimeout(timeoutRecalculate);\n      }, 650);\n\n\n      // Attach a refresh handler to recreate all the form\n      self.form.bind(\"refresh\", function (_, refreshParams) {\n        // Check current scroll in parent\n        refreshParams = $.extend({\n          focus: focus,\n          selectedTabs: self.form.getSelectedTabs(),\n          isRefresh: true },\n        params, refreshParams);\n\n        return self.renderDialogBox(dialogBox, refreshParams);\n      });\n    });\n\n    return def.promise();\n  },\n  /*\r\n      *   This method can be overriden in order to customize the dialog form rendering\r\n      */\n  customizeDialogBox: function customizeDialogBox(dialogBox) {\n    return dialogBox;\n  },\n\n  /*\r\n      * This method removes the transitions\r\n      */\n  removeTransitions: function removeTransitions(data) {\n    data = data || {};\n\n    if (data.transitions) {\n      delete data.transitions;\n    }\n  },\n\n  /*\r\n      * This method removes the actions\r\n      */\n  removeActions: function removeActions(data) {\n    data = data || {};\n\n    if (data.actions) {\n      delete data.actions;\n    }\n  },\n\n  dispose: function dispose() {\n    var self = this;\n    if (self.form) {\n      self.form.dispose();\n    }\n    bizagi.util.dispose(self.buttons);\n    bizagi.util.dispose(self);\n  },\n\n  adjustOverlay: function adjustOverlay() {\n    var overlay = $(\".ui-widget-overlay\");\n    var body = $(\"body\");\n    var overlayHeight = parseInt(overlay.height()),overlayBody = parseInt(body.height());\n\n    if (overlayHeight < overlayBody) {\n      overlay.height(overlayBody);\n    }\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /**\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: Bizagi Desktop Render Combo Extension\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: UI Forms Team\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This script will redefine the combo render class to adjust to desktop devices\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\n// Extends from render Desktop base\nbizagi.rendering.desktop.render.extend(\"bizagi.rendering.desktop.combo\", bizagi.rendering.combo.prototype);\n// Extends itself\nbizagi.rendering.desktop.combo.extend(\"bizagi.rendering.desktop.combo\", {}, {\n\n  /*\r\n                                                                              *   Update or init the element data\r\n                                                                              */\n  initializeData: function initializeData(data) {\n    // Call base\n    this._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n\n    // ON desktop implementation we will load the async combos on demand\n    properties.loadOnDemand = true;\n  },\n\n  /*\r\n     *   Template method to implement in each device to customize each render after processed\r\n     */\n  postRender: function postRender() {\n    this.inputCombo = $(\".ui-selectmenu-value\", this.getControl());\n    this.selectedValue = this.properties.value;\n\n    // Call base\n    this._super();\n  },\n\n  /*\r\n     *   Template method to implement in each device to customize the render's behaviour to add handlers\r\n     */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n\n    self.inputCombo.focus(function () {\n      $(this).select();\n    });\n\n    self.inputCombo.blur(function () {\n      // Avoid to see the item selected when using the navigation keys\n      self.setDisplayValue(self.getValue());\n\n      if (!self.isExtraItem()) {\n        self.setDisplayValue(self.value);\n      }\n    });\n\n    //Triggered only when the form exists inside a dialog and is performed the maximize action\n    self.getFormContainer().bind(\"maximazedForm unmaximazedForm\", function (e) {\n      if (self.isPreferencesDialog(self.inputCombo)) {\n        self.onResizeCloseDialog();\n      } else {\n        self.resizeCombo();\n      }\n    });\n\n    self.inputCombo.click(function () {\n      var idDropdown = \"dd-\" + self.inputCombo.attr(\"id\");\n\n      if ($(\"#\" + idDropdown, self.getControl().parent()).length === 0) {\n        self.comboDropDown();\n      } else {\n        // Close combo if clicked twice\n        self.dropDownDestroy($(\"#\" + idDropdown));\n      }\n      self.inputCombo.focus();\n    });\n\n    // Bind clicks to fake UI in order to simulate select clicks\n    if ($(\".ui-selectmenu-btn\", self.control).length > 1 && typeof window.addEventListener != \"undefined\") {\n      $(\".ui-selectmenu-btn\", self.control)[0].addEventListener(\"click\", function () {\n        self.inputCombo[0].click();\n      });\n    } else {\n      $(\".ui-selectmenu-btn\", self.control).bind(\"click.combo\", function () {\n        self.inputCombo.trigger(\"click\");\n      });\n    }\n\n    self.inputCombo.keyup(function (e) {\n      self.keyUpFunction(e);\n    });\n\n    self.inputCombo.keydown(function (e) {\n      self.keyDownFunction(e);\n    });\n\n    // Call base\n    self._super();\n  },\n  /*\r\n     *   Makes the combo drops down, also fetch the data first if the combo is set to load on demand\r\n     */\n  comboDropDown: function comboDropDown() {\n    var self = this;\n\n    self.showLoadingData();\n\n    $.when(self.getData()).done(function (data) {\n      self.hideLoadingData();\n\n      try {\n        self.internalComboDropDown(data);\n      } catch (e) {\n        bizagi.log(e.message);\n      }\n    });\n  },\n\n  /*\r\n     *   Show loading message\r\n     */\n  showLoadingData: function showLoadingData() {\n    var self = this;\n    var body = $(\"body\", document);\n    var loading = self.loading = $(\"<div class='ui-select-dropdown open loading'><ul><li class='ui-bizagi-render-loading ui-bizagi-loading'></li></ul></div>\");\n\n    // Add width\n    loading.css(\"width\", self.inputCombo.outerWidth() + \"px\");\n    $(\"li\", loading).css({ padding: 0, margin: 0 });\n    loading.css(\"overflow\", \"hidden\");\n    loading.appendTo(body);\n    loading.position({\n      my: \"left top\",\n      at: \"left bottom\",\n      of: self.inputCombo,\n      collision: \"none flip\" });\n\n  },\n  /*\r\n     *   Remove loading message\r\n     */\n  hideLoadingData: function hideLoadingData() {\n    this.loading.remove();\n  },\n  /*\r\n     *   Draws the mini-popup\r\n     */\n  internalComboDropDown: function internalComboDropDown(data) {\n    var self = this;\n    var selectTmp = {};\n    var objSelected = {};\n\n    // Remove the old list\n    $(\".ui-select-dropdown.open\").remove();\n\n    /** temp templates **/\n    var tempCombo = \"<ul role='listbox' id='listbox-${id}' aria-labelledby='label-${id}' aria-expanded='true'>\" +\n    \"   {{each datasource}}{{if typeof hidden == 'undefined'}}\" +\n    \"       <li id='opt-${id}' data-value='${id}' role='option' tabindex='0' aria-selected='false'>${value}</li>{{/if}}\" +\n    \"   {{/each}}\" +\n    \"</ul>\";\n\n    var containerDropdown = $(\"<div class='ui-select-dropdown open bz-combo__list--comfortable' role='popup'></div>\");\n\n    /* control reference */\n    var containerControl = self.inputCombo.parents(\".ui-bizagi-control\").last();\n    var containerRender = containerControl.closest(\".ui-bizagi-render\");\n\n    var idDropdown = \"dd-\" + self.inputCombo.attr(\"id\");\n    var selectedValue = self.findDataByValue(self.inputCombo.val());\n    var scrollPosition = 0;\n    var orientation = self.properties.orientation === \"rtl\" ? \"ui-bizagi-rtl\" : \"\";\n\n    //fix for QA-507 only IE\n    if (navigator.userAgent.indexOf(\"MSIE\") !== -1 || navigator.appVersion.indexOf(\"Trident/\") > 0) {\n      var contFormScroll = containerRender.closest(\".ui-dialog-content\");\n      if (contFormScroll.length > 0) {\n        contFormScroll.css(\"overflow-y\", \"hidden\");\n      }\n    }\n\n    data = data || self.properties.data;\n\n    self.properties.data = data;\n\n    self.repositionInterval;\n\n    containerRender.addClass(\"ac-is-visible\");\n    containerControl.addClass(\"ac-is-visible ac-clear-floats\");\n    containerDropdown.attr(\"id\", idDropdown);\n\n    self.inputCombo.attr(\"aria-expanded\", \"true\");\n\n    for (var i = 0; i < data.length; i++) {\n      if (data[i].value !== null && typeof data[i].value == \"boolean\") {\n        if (bizagi.util.parseBoolean(data[i].value) === true) {\n          data[i].value = this.getResource(\"render-boolean-yes\");\n        } else if (bizagi.util.parseBoolean(data[i].value) === false) {\n          data[i].value = this.getResource(\"render-boolean-no\");\n        }\n      }\n    }\n\n    if (data.length > 1000) {\n      selectTmp = self.getResource(\"render-combo-too-many-elements\");\n    } else {\n      selectTmp = $.tmpl(tempCombo, {\n        id: self.properties.id,\n        datasource: data });\n\n    }\n\n    var dropDwn = containerDropdown.append(selectTmp);\n    containerControl.append(dropDwn);\n\n    var objParent = $(\".ui-selectmenu\", self.control);\n    $(dropDwn).find(\"li:last-child\").css(\"padding-bottom\", \"13px\");\n\n    var widthChild = dropDwn.width();\n    var widthControl = objParent.width();\n\n    dropDwn.width(widthControl < widthChild ? widthChild : widthControl);\n\n    // Apply to combo in the modal\n    if (self.isPreferencesDialog(containerRender)) {\n      var containerDialog = containerRender.closest(\".ui-dialog-content\");\n      var scrollParent = $.scrollerParent(dropDwn[0]);\n      var $comboDialog = $(containerDialog);\n\n      var top = dropDwn.offset().top - $comboDialog.offset().top;\n      var left = dropDwn.offset().left - $comboDialog.offset().left;\n\n      // Container\n      var $comboWrapper = $(\"<div/>\", {\n        css: {\n          \"position\": \"absolute\",\n          \"top\": top,\n          \"left\": left } });\n\n\n\n      $comboWrapper.attr(\"id\", \"wrapper-\" + idDropdown);\n      $comboWrapper.appendTo($comboDialog);\n      $(dropDwn).appendTo($comboWrapper);\n\n      // When is scrolled the content of the dialog then close the drop-down list\n      $(scrollParent).off(\"scroll.combo\").on(\"scroll.combo\", function (evt) {\n        var tg = $(evt.target);\n        self.dropDownValidClose(tg, dropDwn);\n\n        $(scrollParent).unbind(\"scroll.combo\");\n      });\n    }\n\n    dropDwn.position({\n      my: \"left top\",\n      at: \"left bottom\",\n      of: $(\".ui-selectmenu\", self.control),\n      collision: \"fit\" }).\n    hide();\n\n    dropDwn.show();\n\n    // Fix for QA-507 only IE\n    if ((navigator.userAgent.indexOf(\"MSIE\") !== -1 || navigator.appVersion.indexOf(\"Trident/\") > 0) && contFormScroll.length > 0) {\n      contFormScroll.css(\"overflow-y\", \"auto\");\n    }\n\n    //SUITE 9379 - ComboBox offset in resizing when the combobox is opened\n    self.recalculateComboOffset(dropDwn, objParent);\n\n    dropDwn.data(\"formWidth\", containerControl.width());\n    dropDwn.data(\"parentCombo\", self.control);\n\n    dropDwn.addClass(orientation);\n\n    if (selectedValue !== -1 && $(\"li\", dropDwn).length > 0) {\n      //Checks if the selected element is empty string, it's normal for cascading combos\n      if (selectedValue && selectedValue.id === \"\") {\n        objSelected = $(\"li[data-value='']\", dropDwn);\n      } else {\n        objSelected = $(\"li[data-value='\" + selectedValue.id + \"']\", dropDwn);\n      }\n\n      if (objSelected.length !== 0) {\n        objSelected.addClass(\"ui-selected\");\n        objSelected.addClass(\"active\");\n\n        objSelected.attr(\"aria-selected\", \"true\");\n        self.inputCombo.attr(\"aria-activedescendant\", \"opt-\" + selectedValue.id);\n\n        scrollPosition = parseInt(objSelected.position().top);\n        dropDwn.scrollTop(scrollPosition);\n      }\n    }\n\n    dropDwn.delegate(\"li\", \"click\", function () {\n      var valId = $(this).data(\"value\") ? $(this).data(\"value\") : \"\";\n      var val = { id: valId, value: $(this).text() };\n\n      //Prevents stores the value twice when the element seached match with the clicked\n      //It helps to keep track the last selected\n      var id = self.getValue();\n      id = id && id.id ? id.id : 0;\n\n      if (val.id !== id) {\n        self.onComboItemSelected(val);\n      } else {\n        if (val.value !== self.inputCombo.val()) {\n          self.setDisplayValue({ value: val.value });\n        }\n      }\n\n      //'select' will stand at first character of the string, 'focus' will stand at the last character of the string\n      self.inputCombo.select();\n\n      // Animation effect\n      dropDwn.hide();\n      self.dropDownDestroy(dropDwn);\n\n      $(document).unbind(\"click.closecombo\");\n    });\n\n    // Stop bubbling outside the dropdown\n    $.makeArray(dropDwn, self.getControl()).bind(\"click\", function (e) {\n      e.preventDefault();\n      return false;\n    });\n\n    $(document).one(\"click.closecombo\", function (e) {\n      var tg = $(e.target);\n      self.dropDownValidClose(tg, dropDwn);\n    });\n  },\n\n  /*\r\n      * validate when fire event form document and window\r\n      */\n  dropDownValidClose: function dropDownValidClose(target, dropDown) {\n    dropDown.hide();\n    this.dropDownDestroy(dropDown);\n    $(document).unbind(\"click.closecombo\");\n  },\n  /*\r\n      * set a new dropdown position\r\n      */\n  dropDownReposition: function dropDownReposition(dropDown, containerForm) {\n    var self = this;\n    if (containerForm.width() != dropDown.data(\"formWidth\")) {\n      var objParent = $(\".ui-selectmenu\", self.control);\n      dropDown.width(self.control.width() < 100 ? 100 : objParent.width());\n\n      var control = dropDown.data(\"parentCombo\") || objParent;\n      dropDown.position({\n        my: \"left top\",\n        at: \"left bottom\",\n        of: $(\".ui-selectmenu-value\", control),\n        collision: \"none\" });\n\n\n      dropDown.data(\"formWidth\", containerForm.width());\n    }\n  },\n  /*\r\n      * destroy dropdown\r\n      */\n  dropDownDestroy: function dropDownDestroy(dropDown) {\n    var self = this;\n    var control = self.inputCombo ? self.inputCombo : $(\".ui-selectmenu-value\", self.getControl());\n    var containerControl = control.closest(\".ui-bizagi-control\");\n    var containerRender = containerControl.closest(\".ui-bizagi-render\");\n    var idDropdown = \"\" + dropDown.attr(\"id\");\n    self.inputCombo.attr(\"aria-expanded\", \"false\");\n\n    // fix for SUITE-9507\n    if (containerControl.hasClass(\"ac-is-visible\")) containerControl.removeClass(\"ac-is-visible\");\n    if (containerControl.hasClass(\"ac-clear-floats\")) containerControl.removeClass(\"ac-clear-floats\");\n    if (containerRender.hasClass(\"ac-is-visible\")) containerRender.removeClass(\"ac-is-visible\");\n\n    dropDown.remove();\n\n    var dropDownContainer = $(\"#wrapper-\" + idDropdown);\n    if (dropDownContainer && dropDownContainer.length > 0)\n    dropDownContainer.remove();\n\n    $(document).unbind(\"mousedown.closecombo\");\n    $(document).unbind(\"mouseup.resizecombo\");\n    $(window).unbind(\"resize.resizecombo\");\n    $(window).unbind(\"mouseup.closecombo\");\n\n    if (self.repositionInterval) clearInterval(self.repositionInterval);\n  },\n\n  validateValueInDatasource: function validateValueInDatasource(triggerEvents, isKeyByKey) {\n    var self = this;\n    var selected = self.inputCombo.val();\n    var selectedKey = self.findDataByValue(selected, isKeyByKey);\n\n    if (!self.value) {\n      self.value = { id: \"\" };\n    }\n\n    if (selectedKey.id > 0) {\n      if (!triggerEvents) {\n        self.setValue({ id: selectedKey.id }, false);\n        self.setDisplayValue(selectedKey);\n      } else {\n        self.setValue({ id: selectedKey.id });\n        self.setDisplayValue(selectedKey);\n      }\n    } else if (selectedKey.id === \"\") {\n      if (self.value.id != selectedKey.id) {\n        self.setValue(selectedKey, false);\n      }\n      self.setDisplayValue(selectedKey);\n    } else {\n      self.setDisplayValue(self.selectedValue);\n    }\n  },\n\n  /*\r\n      *   Keydown listener\r\n      */\n  keyDownFunction: function keyDownFunction(e) {\n    var self = this;\n    var idDropdown = \"dd-\" + self.inputCombo.attr(\"id\");\n    var dropDown = $(\"#\" + idDropdown);\n    var active = $(\"li.active\", dropDown);\n\n    e = e ? e : window.event;\n\n    // Need to implement hiding select on \"Escape\" and \"Enter\".\n    if (e.altKey || e.ctrlKey || e.metaKey) {\n      return 1;\n    }\n\n    if (dropDown.length === 0 && !self.properties.data) {\n      self.comboDropDown(self.combo);\n      dropDown = $(\"#\" + idDropdown);\n    }\n\n    //Tab or Shift + Tab\n    if (e.shiftKey && e.keyCode == 9 || e.keyCode == 9) {\n      if (active.length > 0) {\n        self.inputCombo.val(active.text());\n      }\n      self.focusDependant = true;\n      self.validateValueInDatasource(true, true);\n      dropDown.remove();\n      return 1;\n      //return 0;\n    }\n\n    if (27 == e.keyCode) {\n      self.setDisplayValue(self.selectedValue);\n      dropDown.remove();\n    }\n\n    if (9 == e.keyCode || 13 == e.keyCode) {\n      if (active.length > 0) {\n        self.inputCombo.val(active.text());\n      }\n      self.validateValueInDatasource(true, true);\n      dropDown.remove();\n      return 1;\n    }\n\n    if (e.keyCode == \"38\" || e.keyCode == \"37\") {\n      // up arrow\n      self.selectPreviousElement(dropDown);\n      return 0;\n    } else if (e.keyCode == \"40\" || e.keyCode == \"39\") {\n      // down arrow\n      self.selectNextElement(dropDown);\n      return 0;\n    }\n\n    if (e.keyCode == 36) {\n      self.selectFirstElement(dropDown);\n      return 0;\n    } else if (e.keyCode == 35) {\n      self.selectLastElement(dropDown);\n      return 0;\n    }\n\n    self.properties.enableTyping = typeof bizagi.override.typingForCombos == \"boolean\" ? bizagi.override.typingForCombos : self.properties.enableTyping;\n\n    if (!self.properties.enableTyping) {\n      e.preventDefault();\n      e.stopPropagation();\n      return false;\n    }\n    return 1;\n  },\n\n  /*\r\n      *   KeyUp listener\r\n      */\n  keyUpFunction: function keyUpFunction(e) {\n    var self = this;\n    var idDropdown = \"dd-\" + self.inputCombo.attr(\"id\");\n    var dropDown = $(\"#\" + idDropdown);\n\n    e = e ? e : window.event;\n\n    if (\n    e.altKey ||\n    e.ctrlKey ||\n    e.metaKey ||\n    13 == e.keyCode ||\n    9 == e.keyCode ||\n    27 == e.keyCode ||\n    e.keyCode == 16 ||\n    e.keyCode == 36 ||\n    e.keyCode == 35 ||\n    e.keyCode == 33 ||\n    e.keyCode == 34)\n    {\n      return 0;\n    }\n\n    if (dropDown.length === 0) {\n      self.comboDropDown(self.combo);\n      dropDown = $(\"#\" + idDropdown);\n    }\n\n    var isSelectingItem = false;\n    if (e.keyCode >= 37 && e.keyCode <= 40) {\n      // Keyboard Arrows\n      isSelectingItem = true;\n    }\n    self.selectItemByKeyUp(isSelectingItem);\n\n    return 1;\n  },\n  /*\r\n      * Select letter by letter\r\n      */\n  selectItemByKeyUp: function selectItemByKeyUp(isSelectingItem) {\n    var self = this,\n    objSelected;\n\n    if (bizagi.util.parseBoolean(isSelectingItem) == null) {\n      isSelectingItem = false;\n    }\n\n    var idDropdown = \"dd-\" + self.inputCombo.attr(\"id\");\n    var dropDown = $(\"#\" + idDropdown);\n\n    $(\".active\", dropDown).removeClass(\"active\");\n\n    var selectedKey = self.findDataByValue(self.inputCombo.val(), true, isSelectingItem);\n    if (selectedKey !== -1) {\n      objSelected = $(\"li[data-value='\" + selectedKey.id + \"']\", dropDown);\n      objSelected.addClass(\"active\");\n      self.inputCombo.attr(\"aria-activedescendant\", \"opt-\" + selectedKey.id);\n    } else {\n      objSelected = $(\"li.ui-selected\", dropDown);\n    }\n\n    if (dropDown.length > 0 && objSelected.length > 0) {\n      scrollPosition = parseInt(objSelected.position().top);\n      dropDown.scrollTop(scrollPosition);\n    }\n  },\n\n  selectFirstElement: function selectFirstElement(dropDown) {\n    var self = this;\n    var actual = $(\"li:first\", dropDown);\n\n    $(\"li\", dropDown).removeClass(\"active\");\n    actual.addClass(\"active\");\n    scrollPosition = actual.position().top;\n    dropDown.scrollTop(scrollPosition);\n\n    self.inputCombo.val($(actual).text());\n  },\n\n  selectLastElement: function selectLastElement(dropDown) {\n    var self = this;\n    var actual = $(\"li:last\", dropDown);\n\n    $(\"li\", dropDown).removeClass(\"active\");\n    actual.addClass(\"active\");\n    scrollPosition = actual.position().top;\n    dropDown.scrollTop(scrollPosition);\n\n    self.inputCombo.val($(actual).text());\n  },\n\n  /*\r\n      * Handler key Up\r\n      */\n  selectPreviousElement: function selectPreviousElement(dropDown) {\n    var self = this;\n    var scrollPosition = 0;\n    var actual = $(\"li.active\", dropDown);\n\n    if (actual.length === 0) {\n      actual = $(\"li:first\", dropDown);\n    }\n\n    var previous = actual.prev();\n\n    if (previous.length !== 0) {\n      actual.removeClass(\"active\");\n      $(previous).addClass(\"active\");\n      scrollPosition = $(previous).position().top;\n\n      dropDown.scrollTop(scrollPosition);\n      self.inputCombo.val($(previous).text());\n    }\n  },\n\n  /*\r\n      *Handler key Down\r\n      */\n  selectNextElement: function selectNextElement(dropDown) {\n    var self = this;\n    var scrollPosition = 0;\n    var actual = $(\"li.active\", dropDown);\n\n    if (actual.length === 0) actual = $(\"li:first\", dropDown);\n\n    var next = actual.next();\n\n    if (next.length !== 0) {\n      actual.removeClass(\"active\");\n      $(next).addClass(\"active\");\n      scrollPosition = $(next).position().top;\n\n      dropDown.scrollTop(scrollPosition);\n      self.inputCombo.val($(next).text());\n    }\n  },\n\n  /*\r\n      *   Handler to react when a combo item is selected\r\n      */\n  onComboItemSelected: function onComboItemSelected(val) {\n    var self = this;\n    var selectedId = val.id || \"\";\n    var selectedLabel = val.value || \"\";\n\n    self.properties.originalValue = self.getValue();\n\n    if (selectedId === \"\") {\n      self.inputCombo.val(\"\");\n    } else {\n      self.inputCombo.val(selectedLabel);\n    }\n\n    self.setValue({ id: selectedId });\n    self.setDisplayValue({ id: selectedId, value: selectedLabel });\n  },\n\n  /*\r\n      *   Sets the value in the rendered control\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n    var properties = self.properties;\n    var comboValue = \"\";\n    var comboValueValid = true;\n    var control;\n\n    value = self.mapValue(value);\n    value = self.preprocessValue(value);\n\n    if (properties.editable && value !== null) {\n      // If set display value were assigned from render action\n      if (_typeof(value) === \"object\" && value.label !== undefined) {\n        var id = bizagi.util.isNumeric(value.id) ? value.id : value.value;\n\n        var displayValue = value.label;\n\n        if (!bizagi.util.isString(displayValue) && bizagi.util.isString(value.value)) {\n          displayValue = value.value;\n        }\n\n        comboValue = self.findDataById(id).value || value.label;\n        self.setValue({ id: id, value: displayValue });\n\n      } else {\n        if (typeof value === \"number\" || typeof value === \"string\" || value.id) {\n          if (value.id) {\n            var translated = false; //When the parametric entity have a boolean attribute\n            if (value.value != null && typeof value.value === \"boolean\") {\n              translated = true;\n              if (bizagi.util.parseBoolean(value.value) === true) {\n                value.value = this.getResource(\"render-boolean-yes\");\n              } else if (bizagi.util.parseBoolean(value.value) === false) {\n                value.value = this.getResource(\"render-boolean-no\");\n              }\n            } else if (value.value != null && _typeof(value.value) === \"object\") {\n              for (var i = 0; i < value.value.length; i++) {\n                if (value.value[i] != null && typeof value.value[i] === \"boolean\") {\n                  if (bizagi.util.parseBoolean(value.value[i]) === true) {\n                    value.value[i] = this.getResource(\"render-boolean-yes\");\n                  } else if (bizagi.util.parseBoolean(value.value[i]) === false) {\n                    value.value[i] = this.getResource(\"render-boolean-no\");\n                  }\n                }\n              }\n            }\n            if (translated) {\n              comboValue = value.value;\n            } else {\n              comboValue = self.findDataById(value.id).value || value.value;\n            }\n          } else {\n            comboValue = self.findDataById(Number(value)).value || value.label;\n          }\n        } else {\n          comboValue = _typeof(value.value) == \"object\" ? value.value.join(\" - \") : value.value;\n        }\n\n        if (properties.hasLocalData || properties.remoteDataLoaded) {\n          comboValueValid = self.findDataByValue(comboValue);\n          if (comboValueValid === -1) {\n            comboValue = \"\";\n          }\n        }\n\n        if (value && value.id) {\n          // Check if the value is a json object\n          if (value.id != undefined && (typeof value.id === \"number\" && value.id > 0 || typeof value.id === \"string\" && value.id.length > 0)) {\n            if (self.value == null || self.value == undefined) {\n              self.setValue({ id: value.id });\n            } else if (self.value.id != value.id) {\n              self.setValue({ id: value.id });\n            }\n          } else {\n            if (self.value == null || self.value == undefined) {\n              self.setValue({ id: value });\n            } else if (self.value.id != value) {\n              self.setValue({ id: value });\n            }\n          }\n        }\n      }\n\n      if (self.inputCombo) {\n        self.inputCombo.val(value.value);\n        $(self.inputCombo).attr(\"title\", value.value);\n      } else {\n        control = $(\".ui-selectmenu-value\", self.getControl());\n        control && control.val(value.value);\n      }\n    } else {\n      if (!properties.editable && value !== null) {\n        if (typeof value === \"number\" || typeof value === \"string\") {\n          comboValue = self.findDataById(Number(value)).value;\n          control = self.getControl();\n          control.html(\n          \"<label class='readonly-control'>\" +\n          self.escapeValue(self.formatItem(comboValue)) +\n          \"</label>\");\n\n        } else {\n          if (_typeof(value) === \"object\") {\n\n            if (value.label !== undefined) {\n              id = bizagi.util.isNumeric(value.id) ? value.id : value.value;\n\n              comboValue = self.findDataById(id).value || value.label;\n\n              if ($.isArray(comboValue)) {\n                comboValue = comboValue.join(\" - \");\n              }\n\n              self.setValue({ id: id, value: comboValue });\n            } else {\n              if (self.value == null || self.value == undefined) {\n                self.setValue(value);\n              } else if (self.value.id != value.id) {\n                self.setValue(value);\n              }\n            }\n\n            self.control.html(\n            \"<label class='readonly-control'>\" +\n            self.escapeValue(self.formatItem(value.label || value.value)) +\n            \"</label>\");\n\n          }\n        }\n      } else {\n        if (value === null && properties.editable) {\n          var emptySelection = self.getResource(\"render-combo-empty-selection\");\n          self.inputCombo.val(emptySelection);\n          $(self.inputCombo).attr(\"title\", \"\");\n        } else {\n          if (value === null && !properties.editable) {\n            self.getControl().text(\"\");\n          }\n        }\n      }\n    }\n  },\n\n  /*\r\n      *   Sets the value in the rendered control\r\n      */\n  clearDisplayValue: function clearDisplayValue() {\n    var self = this;\n    var control = self.getControl();\n\n    if (self.inputCombo) {\n      var emptySelection = bizagi.override.emptyLabelForCombo || self.getResource(\"render-combo-empty-selection\");\n      self.inputCombo.val(emptySelection);\n    } else if (!self.properties.editable) {\n      $(control).html(\"<label class='readonly-control'></label>\");\n    }\n\n    self.value = self.properties.value = self.selectedValue;\n  },\n  /*\r\n      * Cleans current data\r\n      */\n  cleanData: function cleanData() {\n    this.value = this.properties.value = this.selectedValue = { id: \"\", value: \"\" };\n    this.clearDisplayValue();\n  },\n  /*\r\n      *   Returns the selected value in the template\r\n      */\n  getSelectedValue: function getSelectedValue() {\n    return this.selectedValue;\n  },\n  /*\r\n      *   Find elements within a data source\r\n      */\n  findDataById: function findDataById(id) {\n    var result = (this.properties.data || []).find(function (value) {\n      return value.id == id;\n    }) || {};\n\n    return result;\n  },\n\n  findDataByValue: function findDataByValue(val, keyByKey, equalsToValue) {\n    var self = this;\n    var result = -1;\n\n    if (val !== undefined && val !== null && self.properties.data != undefined) {\n      if (keyByKey) {\n        var value;\n        var tvalue;\n        var nValue;\n        var compareValIn;\n        var compareVal;\n        var i = -1;\n        var dataLength = self.properties.data.length - 1;\n\n        while (i++ < dataLength) {\n          value = self.properties.data[i];\n\n          compareValIn =\n          _typeof(val) == \"object\" ? val.join(\" - \") : typeof val === \"boolean\" ? val.toString() : val;\n          compareVal = $.trim(compareValIn).\n          substring(0, compareValIn.length).\n          toLowerCase();\n\n          if (_typeof(value) === \"object\" && _typeof(value.value) === \"object\") {\n            tvalue = _typeof(value.value) == \"object\" ? value.value.join(\" - \") : value.value;\n          } else {\n            tvalue = $.trim(value.value);\n          }\n\n          nValue = String(tvalue).toLowerCase();\n\n          if (equalsToValue) {\n            if (nValue == compareVal && nValue.length == compareVal.length) {\n              result = { id: value.id, value: value.value };\n              i = dataLength;\n            }\n          } else {\n            // Search item by Begin\n            if (nValue.indexOf(compareVal) == 0) {\n              result = { id: value.id, value: value.value };\n              i = dataLength;\n            }\n          }\n        }\n      } else {\n        if (self.getValue()) {\n          result = self.getValue();\n\n          if (!result.value) {\n            result.value = self.inputCombo.val();\n          }\n        }\n      }\n    }\n\n    return result;\n  },\n\n  setValue: function setValue(val, triggerEvents) {\n    var self = this;\n\n    if (val === null) val = { id: \"\" };\n\n    if (!!val) {\n      var id = _typeof(val) === \"object\" ? self.getValueFromData(val.id) || \"\" : typeof val === \"number\" || typeof val === \"string\" ? self.getValueFromData(val) : \"\";\n      var label = typeof val.value !== \"undefined\" && val.value !== null ? val.value : self.findDataById(id).value || \"\";\n      self.selectedValue = { id: id, value: label };\n      this._super(self.selectedValue, triggerEvents);\n    }\n  },\n\n  getValueFromData: function getValueFromData(dataValue) {\n    var value = Number(dataValue);\n    if (isNaN(value)) value = dataValue;\n    return value;\n  },\n\n  recalculateComboOffset: function recalculateComboOffset(dropDwn, objParent) {\n    if (bizagi.util.isIE() && bizagi.util.getInternetExplorerVersion() == 9) {\n      if (dropDwn.width() !== objParent.width()) {\n        var offset = objParent.width() - dropDwn.width();\n        dropDwn.width(objParent.width() + offset);\n      }\n    }\n  },\n\n  /**\r\n      * Workaround: Action isn't a parameter is temporally\r\n      * TODO: Fix after Genome\r\n      * @param {} action\r\n      * @returns {}\r\n      */\n  resizeCombo: function resizeCombo() {\n    var selectMenu = $(\".ui-selectmenu\", this.control);\n    var dropDwn = $(\".ui-select-dropdown.open\", this.element);\n    var widthControl = selectMenu.width();\n\n    if (dropDwn && dropDwn.get(0) && dropDwn.width() !== widthControl) {\n      dropDwn.width(widthControl);\n    }\n  },\n\n  changeRequired: function changeRequired(argument) {\n    this.properties.required = argument;\n    this.changeRequiredLabel(argument);\n  },\n\n  changeRequiredLabel: function changeRequiredLabel(argument) {\n    var control = this.getControl();\n    if (control.length > 0) {\n      if (this.getMode() !== \"execution\") {\n        if (bizagi.util.parseBoolean(argument) == true && this.properties.editable) {\n          control.addClass(\"control-required\");\n        } else {\n          control.removeClass(\"control-required\");\n        }\n      } else {\n        if (bizagi.util.parseBoolean(argument) == true && !this.hasValue() && this.properties.editable) {\n          control.addClass(\"control-required\");\n        } else {\n          control.removeClass(\"control-required\");\n        }\n      }\n    }\n    this.triggerRenderValidate();\n  },\n\n  changeCellRequired: function changeCellRequired(argument) {\n    this.changeRequired(argument);\n  },\n\n  /**\r\n      * Check if dialog is preferences view\r\n      * @param container\r\n      * @returns {*|Array|boolean}\r\n      */\n  isPreferencesDialog: function isPreferencesDialog(container) {\n    var preferences = container && container.closest(\".bz-wp-userpreferences-main\") || [];\n    return preferences && preferences.length > 0;\n  },\n\n  /**\r\n      * Workaround: Action isn't a parameter is temporally\r\n      * @param {} action\r\n      * @returns {}\r\n      */\n  onResizeCloseDialog: function onResizeCloseDialog() {\n    var selectMenu = $(\".ui-selectmenu\", this.control);\n    var menuContext = selectMenu.closest(\".ui-dialog-content\");\n    var dropDwn = $(\".ui-select-dropdown.open\", menuContext);\n\n    this.dropDownValidClose(undefined, dropDwn);\n  },\n\n  //#region Format\n\n  /**\r\n   * Customizes the font underline\r\n   * It does not apply when we use the render.base component\r\n   * @param underline\r\n   * @param isLabelFormat\r\n   */\n  changeFontUnderline: function changeFontUnderline(underline, isLabelFormat) {\n    var self = this;\n    var textFormat = self.properties.textFormat || {};\n    var valueFormat = self.properties.valueFormat || {};\n\n    var labelStrikethrough = bizagi.util.parseBoolean(textFormat.strikethru) ? \"line-through \" : \"\";\n    var valueStrikethrough = bizagi.util.parseBoolean(valueFormat.strikethru) ? \"line-through \" : \"\";\n    var formatUnderline = bizagi.util.parseBoolean(underline) ? \"underline\" : \"\";\n\n    var isLabelToFormat = typeof isLabelFormat != \"undefined\" || isLabelFormat != null ? isLabelFormat : true;\n    var $formatElements = isLabelToFormat ? self.getFormattingLabel() : self.getElementsToStylized(self.getControl());\n    var formatStrikeThrough = isLabelToFormat ? labelStrikethrough : valueStrikethrough;\n\n    self.changeTextDecoration($formatElements, formatStrikeThrough + formatUnderline);\n  },\n\n  /**\r\n      * Customizes the font Strikethrough property\r\n      * It does not apply when we use the render.base component\r\n      * @param strikeThrough\r\n      * @param isLabelFormat\r\n      */\n  changeFontStrikethru: function changeFontStrikethru(strikeThrough, isLabelFormat) {\n    var self = this;\n    var textFormat = self.properties.textFormat || {};\n    var valueFormat = self.properties.valueFormat || {};\n\n    var labelUnderline = bizagi.util.parseBoolean(textFormat.underline) ? \"underline \" : \"\";\n    var valueUnderline = bizagi.util.parseBoolean(valueFormat.underline) ? \"underline \" : \"\";\n    var formatStrikeThrough = bizagi.util.parseBoolean(strikeThrough) ? \"line-through\" : \"\";\n\n    var isLabelToFormat = typeof isLabelFormat != \"undefined\" || isLabelFormat != null ? isLabelFormat : true;\n    var $formatElements = isLabelToFormat ? self.getFormattingLabel() : self.getElementsToStylized(self.getControl());\n    var formatUnderline = isLabelToFormat ? labelUnderline : valueUnderline;\n\n    self.changeTextDecoration($formatElements, formatUnderline + formatStrikeThrough);\n  },\n\n  /**\r\n      * Context to apply styles\r\n      * @param context\r\n      * @returns {jQuery|HTMLElement}\r\n      */\n  getElementsToStylized: function getElementsToStylized(context) {\n    return $(\"input.ui-selectmenu-value, label.readonly-control\", context);\n  },\n\n  /**\r\n      * Customizes the font Strikethrough or underline property\r\n      * @param {} $element\r\n      * @param {} textDecoration\r\n      * @returns {}\r\n      */\n  changeTextDecoration: function changeTextDecoration($element, textDecoration) {\n    if (textDecoration === undefined) return this;\n    if ($element === undefined) return this;\n\n    textDecoration && $element.css(\"text-decoration\", textDecoration);\n\n    return this;\n  }\n\n  //#endregion Format\n});\n\n\n// We override original select menu refresh position method to adjust custom stuff\nvar originalRefreshPositionMethod = $.ui.selectmenu.prototype._refreshPosition;\n$.ui.selectmenu.prototype._refreshPosition = function () {\n\n  // Set initial heigth to zero\n  this.list.height(0);\n\n  // Call original method\n  var result = originalRefreshPositionMethod.apply(this, arguments);\n\n  // Return original response\n  this.list.css(\"width\", this.newelement.width() + \"px\");\n  return result;\n};","/*\r\n*   Name: BizAgi Services Rendering End Points\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script defines all the end-points used to retrieve ajax stuff\r\n*   -   All urls must be relative to the base application\r\n*/\n\n// Create or define namespace\nbizagi.render = typeof bizagi.render !== \"undefined\" ? bizagi.render : {};\nbizagi.render.services = typeof bizagi.render.services !== \"undefined\" ? bizagi.render.services : {};\nbizagi.render.services.endPoints = [];\n\n// Creates a endpoint hash factory to resolve custom requirements\nbizagi.render.services.getEndPoints = function (params) {\n\n  var renderHandlerPathRest = \"Rest/Handlers/Render\";\n  var renderUploadHandlerPathRest = \"Rest/Handlers/Render/Upload\";\n  var renderFileHandlerPathRest = \"Rest/Handlers/RenderFile\";\n  var letterHandlerPathRest = \"Rest/Handlers/Letter\";\n  var multiActionHandlerPathRest = \"Rest/Handlers/MultiAction\";\n  var metadataHandlerPathRest = \"Rest/Handlers/Metadata\";\n  var metadataMultiactionHandlerPathRest = \"Rest/Handlers/MetadataMultiAction\";\n  // Default workportal end-points\n  if (params.context == \"workflow\") {\n    return {\n      \"form-get-data\": params.proxyPrefix + renderHandlerPathRest,\n      \"form-submit-data\": params.proxyPrefix + renderHandlerPathRest,\n      \"form-submit-data-upload\": params.proxyPrefix + renderUploadHandlerPathRest,\n      \"render-property-refresh\": params.proxyPrefix + renderHandlerPathRest,\n      \"render-multiaction\": params.proxyPrefix + multiActionHandlerPathRest,\n      \"render-upload-cancel-image\": params.proxyPrefix + \"jquery/rendering/css/desktop/plugins/other/images/upload-cancel.png\",\n      \"render-upload-data-url\": params.proxyPrefix + renderFileHandlerPathRest,\n      \"render-upload-add-url\": params.proxyPrefix + renderUploadHandlerPathRest,\n      \"render-upload-delete-url\": params.proxyPrefix + renderHandlerPathRest,\n      \"render-ecm-upload-url\": params.proxyPrefix + metadataHandlerPathRest,\n      \"render-multiaction-metadata\": params.proxyPrefix + metadataMultiactionHandlerPathRest,\n      \"render-grid-edit-url\": params.proxyPrefix + renderHandlerPathRest,\n      \"render-grid-save-url\": params.proxyPrefix + renderHandlerPathRest,\n      \"render-grid-add-url\": params.proxyPrefix + renderHandlerPathRest,\n      \"render-grid-rollback-url\": params.proxyPrefix + renderHandlerPathRest,\n      \"render-grid-commit-url\": params.proxyPrefix + renderHandlerPathRest,\n      \"render-grid-checkpoint-url\": params.proxyPrefix + renderHandlerPathRest,\n      \"render-save-entity\": params.proxyPrefix + renderHandlerPathRest,\n      \"render-stakeholder-associated\": params.proxyPrefix + renderHandlerPathRest,\n      \"render-search-default-image\": params.proxyPrefix + \"jquery/rendering/css/desktop/images/bizagi_xpress.png\",\n      \"render-search-form-get-data\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=metadata\",\n      \"render-search-advanced-url\": params.proxyPrefix + \"Rest/Handlers/Query\",\n      \"render-letter-notEditable-url\": params.proxyPrefix + letterHandlerPathRest,\n      \"render-letter-content-url\": params.proxyPrefix + letterHandlerPathRest,\n      \"render-letter-save-url\": params.proxyPrefix + renderHandlerPathRest,\n      \"render-letter-content-icons\": params.proxyPrefix + \"jquery/rendering/css/desktop/plugins/other/images/nicEditorIcons.gif\",\n      \"render-userfield-definition\": params.proxyPrefix + \"Rest/Userfields/{guidUserfield}/UserfieldDependency/{device}\",\n      \"render-document-generate\": params.proxyPrefix + \"Rest/DocumentTemplates/CaseTemplates\",\n      \"render-document-generateAllDocuments\": params.proxyPrefix + \"Rest/DocumentTemplates/TemplatesConcatFilesToPDF\",\n      \"render-processes-startform\": params.proxyPrefix + \"Rest/Processes/HasStartForm\",\n      \"render-processes-getstartform\": params.proxyPrefix + \"Rest/Processes/HasStartForm\",\n      \"render-entity-layout-image64\": params.proxyPrefix + \"Api/Entities/{entity}/Picture/{surrogateKey}/Base64\",\n      \"render-entity-layout-imageByteArray\": params.proxyPrefix + \"Api/Entities/{entity}/Picture/{surrogateKey}/Array?xpath={xpath}&width={width}&height={height}&idcase={idcase}&idworkitem={idworkitem}&contextxpath={contextxpath}&h_={hash}\",\n      \"render-entity-layout-upload-files\": params.proxyPrefix + \"Api/Entities/{entity}/Files/{surrogateKey}/Array?xpath={xpath}\",\n      \"render-query-getUsersList\": params.proxyPrefix + \"Rest/Users/SearchUsersForQueryFormsById/{queryFormId}/\",\n      \"case-handler-getCaseSummary\": params.proxyPrefix + \"Rest/Cases/{idCase}/SummaryGuid\",\n      \"case-handler-getCaseSummaryByGuid\": params.proxyPrefix + \"Rest/Cases/{guid}/SummaryByGuid\",\n      \"case-handler-getCaseAssignees\": params.proxyPrefix + \"Rest/Cases/{idCase}/AssigneesGuid\",\n      \"case-handler-getWorkItems\": params.proxyPrefix + \"Rest/Cases/{idCase}/WorkItems\",\n      \"case-handler-getWorkItemsByGuid\": params.proxyPrefix + \"Rest/Cases/{guid}/WorkItemsByGuid\",\n      \"admin-getUsersList\": params.proxyPrefix + \"Rest/Users/SearchUsers\",\n      \"admin-getUsersList-FromPreferences\": params.proxyPrefix + \"Rest/Users/SearchUsersFromPreferences\",\n      \"admin-getUsersList-ForStakeholders\": params.proxyPrefix + \"Rest/Users/SearchUsersForStakeholders\",\n      \"admin-getUsersList-ForXpathIdBossUser\": params.proxyPrefix + \"Rest/Users/SearchUsersForBosses\",\n      \"admin-getUsersList-ForXpathIdDelegate\": params.proxyPrefix + \"Rest/Users/SearchUsersForDelegates\",\n      \"admin-getUsersForAssignation\": params.proxyPrefix + \"Rest/Users/UsersForAssignation\",\n      \"admin-users-config\": params.proxyPrefix + \"Api/Authentication/BizagiConfig\",\n      //users administration\n      \"admin-usersform\": params.proxyPrefix + \"Rest/Handlers/Render\",\n      \"admin-GenerateDataToSendByEmail\": params.proxyPrefix + \"Rest/Users/GenerateDataToSendByEmail\",\n      \"admin-sendUserEmail\": params.proxyPrefix + \"Rest/Users/SendUserEmail\" };\n\n  }\n  // Sharepoint end-points (must be customized for each project)\n  if (params.context == \"sharepoint\" || params.context == \"portal\") {\n    if (typeof params.sharepointProxyPrefix === \"undefined\") alert(\"sharepointProxyPrefix param is requiered to build endpoints when context is 'sharepoint'\");\n    return {\n      \"form-get-data\": params.sharepointProxyPrefix + renderHandlerPathRest,\n      \"form-submit-data\": params.sharepointProxyPrefix + renderHandlerPathRest,\n      \"form-submit-data-upload\": params.sharepointProxyPrefix + renderUploadHandlerPathRest,\n      \"render-property-refresh\": params.sharepointProxyPrefix + renderHandlerPathRest,\n      \"render-multiaction\": params.sharepointProxyPrefix + multiActionHandlerPathRest,\n      \"render-upload-cancel-image\": \"jquery/rendering/css/desktop/plugins/other/images/upload-cancel.png\",\n      \"render-upload-data-url\": params.sharepointProxyPrefix + renderFileHandlerPathRest,\n      \"render-upload-add-url\": params.sharepointProxyPrefix + renderUploadHandlerPathRest,\n      \"render-upload-delete-url\": params.sharepointProxyPrefix + renderHandlerPathRest,\n      \"render-ecm-upload-url\": params.sharepointProxyPrefix + metadataHandlerPathRest,\n      \"render-grid-edit-url\": params.sharepointProxyPrefix + renderHandlerPathRest,\n      \"render-grid-save-url\": params.sharepointProxyPrefix + renderHandlerPathRest,\n      \"render-grid-add-url\": params.sharepointProxyPrefix + renderHandlerPathRest,\n      \"render-grid-rollback-url\": params.sharepointProxyPrefix + renderHandlerPathRest,\n      \"render-grid-commit-url\": params.sharepointProxyPrefix + renderHandlerPathRest,\n      \"render-grid-checkpoint-url\": params.sharepointProxyPrefix + renderHandlerPathRest,\n      \"render-save-entity\": params.sharepointProxyPrefix + renderHandlerPathRest,\n      \"render-stakeholder-associated\": params.proxyPrefix + renderHandlerPathRest,\n      \"render-search-default-image\": \"jquery/css/bizagi/desktop/images/bizagi_xpress.png\",\n      \"render-search-form-get-data\": params.sharepointProxyPrefix + renderHandlerPathRest + \"?h_contexttype=metadata\",\n      \"render-search-advanced-url\": params.sharepointProxyPrefix + \"Rest/Handlers/Query\",\n      \"render-letter-notEditable-url\": params.sharepointProxyPrefix + letterHandlerPathRest,\n      \"render-letter-content-url\": params.sharepointProxyPrefix + letterHandlerPathRest,\n      \"render-letter-save-url\": params.sharepointProxyPrefix + renderHandlerPathRest,\n      \"render-letter-content-icons\": \"jquery/css/plugins/other/images/nicEditorIcons.gif\",\n      \"render-userfield-definition\": params.sharepointProxyPrefix + \"Rest/Userfields/{guidUserfield}/UserfieldDependency/{device}\",\n      \"render-document-generate\": params.sharepointProxyPrefix + \"Rest/DocumentTemplates/CaseTemplates\",\n      \"render-document-generateAllDocuments\": params.sharepointProxyPrefix + \"Rest/DocumentTemplates/TemplatesConcatFilesToPDF\",\n      \"render-processes-startform\": params.proxyPrefix + \"Rest/Processes/HasStartForm\",\n      \"render-processes-getstartform\": params.proxyPrefix + \"Rest/Processes/HasStartForm\",\n      \"render-entity-layout-image64\": params.proxyPrefix + \"Api/Entities/{entity}/Picture/{surrogateKey}/Base64\",\n      \"render-entity-layout-imageByteArray\": params.proxyPrefix + \"Api/Entities/{entity}/Picture/{surrogateKey}/Array?xpath={xpath}&width={width}&height={height}&idcase={idcase}&idworkitem={idworkitem}&contextxpath={contextxpath}&h_={hash}\",\n      \"case-handler-getCaseSummary\": params.sharepointProxyPrefix + \"Rest/Cases/{idCase}/Summary\",\n      \"case-handler-getCaseSummaryByGuid\": params.sharepointProxyPrefix + \"Rest/Cases/{guid}/SummaryByGuid\",\n      \"case-handler-getWorkItems\": params.sharepointProxyPrefix + \"Rest/Cases/{idCase}/WorkItems\",\n      \"case-handler-getWorkItemsByGuid\": params.proxyPrefix + \"Rest/Cases/{guid}/WorkItemsByGuid\" };\n\n  }\n\n  if (params.context == \"entitymanagement\") {\n    return {\n      \"form-get-data\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=entity\",\n      \"form-submit-data\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=entity\",\n      \"form-submit-data-upload\": params.proxyPrefix + renderUploadHandlerPathRest + \"?h_contexttype=entity\",\n      \"render-property-refresh\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=entity\",\n      \"render-upload-cancel-image\": \"jquery/rendering/css/desktop/plugins/other/images/upload-cancel.png\",\n      \"render-upload-data-url\": params.proxyPrefix + renderFileHandlerPathRest + \"?h_contexttype=entity\",\n      \"render-upload-add-url\": params.proxyPrefix + renderUploadHandlerPathRest + \"?h_contexttype=entity\",\n      \"render-upload-delete-url\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=entity\",\n      \"render-grid-edit-url\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=entity\",\n      \"render-grid-save-url\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=entity\",\n      \"render-grid-add-url\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=entity\",\n      \"render-grid-rollback-url\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=entity\",\n      \"render-grid-commit-url\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=entity\",\n      \"render-grid-checkpoint-url\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=entity\",\n      \"render-search-default-image\": \"jquery/rendering/css/desktop/images/bizagi_xpress.png\",\n      \"render-search-form-get-data\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=metadata\",\n      \"render-search-advanced-url\": params.proxyPrefix + \"Rest/Handlers/Query\" + \"?h_contexttype=entity\",\n      \"render-letter-notEditable-url\": params.proxyPrefix + letterHandlerPathRest + \"?h_contexttype=entity\",\n      \"render-letter-content-url\": params.proxyPrefix + letterHandlerPathRest + \"?h_contexttype=entity\",\n      \"render-letter-save-url\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=entity\",\n      \"render-letter-content-icons\": \"jquery/rendering/css/desktop/plugins/other/images/nicEditorIcons.gif\" };\n\n  }\n\n  if (params.context == \"search\") {\n    return {\n      \"form-get-data\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=metadata\",\n      \"form-submit-data\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=metadata\",\n      \"form-submit-data-upload\": params.proxyPrefix + renderUploadHandlerPathRest + \"?h_contexttype=metadata\",\n      \"render-property-refresh\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=metadata\",\n      \"render-upload-cancel-image\": \"jquery/rendering/css/desktop/plugins/other/images/upload-cancel.png\",\n      \"render-upload-data-url\": params.proxyPrefix + renderFileHandlerPathRest + \"?h_contexttype=metadata\",\n      \"render-upload-add-url\": params.proxyPrefix + renderUploadHandlerPathRest + \"?h_contexttype=metadata\",\n      \"render-upload-delete-url\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=metadata\",\n      \"render-grid-edit-url\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=metadata\",\n      \"render-grid-save-url\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=metadata\",\n      \"render-grid-add-url\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=metadata\",\n      \"render-grid-rollback-url\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=metadata\",\n      \"render-grid-commit-url\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=metadata\",\n      \"render-grid-checkpoint-url\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=metadata\",\n      \"render-search-default-image\": \"jquery/rendering/css/desktop/images/bizagi_xpress.png\",\n      \"render-search-form-get-data\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=metadata\",\n      \"render-search-advanced-url\": params.proxyPrefix + \"Rest/Handlers/Query\" + \"?h_contexttype=metadata\",\n      \"render-letter-notEditable-url\": params.proxyPrefix + letterHandlerPathRest + \"?h_contexttype=metadata\",\n      \"render-letter-content-url\": params.proxyPrefix + letterHandlerPathRest + \"?h_contexttype=metadata\",\n      \"render-letter-save-url\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=metadata\",\n      \"render-letter-content-icons\": \"jquery/rendering/css/desktop/plugins/other/images/nicEditorIcons.gif\" };\n\n  }\n\n  return {};\n};","/*\r\n*   Name: BizAgi Rendering Service Context Factory\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will define the endpoints to be used based on the given context\r\n*/\n\n$.Class.extend(\"bizagi.render.services.context\", {}, {\n  /* \r\n                                                       *   Constructor\r\n                                                       */\n  init: function init(params) {\n    this.context = params.context;\n    this.endPoints = bizagi.render.services.getEndPoints(params);\n    this.proxyPrefix = !bizagi.util.isEmpty(params.proxyPrefix) ? params.proxyPrefix : \"\";\n  },\n\n  /*\r\n     *   Returns the given url for a specified service\r\n     */\n  getUrl: function getUrl(service) {\n    if (this.endPoints[service] == null) {\n      alert(\"No endpoint defined for: \" + service);\n    }\n    return this.endPoints[service];\n  },\n\n  setProxyPrefix: function setProxyPrefix(params) {\n    this.proxyPrefix = !bizagi.util.isEmpty(params.proxyPrefix) ? params.proxyPrefix : \"\";\n    this.endPoints = bizagi.render.services.getEndPoints(params);\n  } });","/*\r\n *   Name: BizAgi Rendering Services\r\n *   Author: Einer Perez\r\n *   Comments:\r\n *   -   This class will provide a facade to access to multiaction rendering REST services\r\n */\nbizagi.render.services.multiactionservice.extend(\"bizagi.render.services.metadatamultiactionservice\", {\n  // Statics\n  BA_ACTION_PARAMETER_PREFIX: \"p_\",\n  BA_CONTEXT_PARAMETER_PREFIX: \"h_\",\n  BA_PAGE_CACHE: \"h_pageCacheId\" },\n{\n\n  /*\r\n  *   Sends a multiaction to the server\r\n  */\n  execute: function execute(params) {\n    var self = this;\n\n    // Define data\n    var data = {};\n    var rejectDeferreds = params.rejectDeferreds !== undefined ? params.rejectDeferreds : true;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"multiaction\";\n\n    // Check action tag\n    $.each(params.actions, function (i, action) {\n      action[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"tag\"] = action.tag || i;\n      if (action[self.Class.BA_PAGE_CACHE]) {\n        data[self.Class.BA_PAGE_CACHE] = action[self.Class.BA_PAGE_CACHE];\n      }\n      delete action[self.Class.BA_PAGE_CACHE];\n      delete action.tag;\n    });\n\n    // Fill optional parameters\n    params = params || {};\n    if (params.actions) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"actions\"] = JSON.encode(params.actions);\n    }\n\n    // Log submit data\n    bizagi.debug(\"Performing multi-action metadata\", data);\n\n    // Call ajax and returns promise\n    var deferred = new $.Deferred();\n    $.ajax({\n      url: self.serviceLocator.getUrl(\"render-multiaction-metadata\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\",\n      serviceType: \"MULTIACTION\",\n      beforeSend: function beforeSend(xhr, status) {\n        bizagi.multiactionConnection = bizagi.multiactionConnection || [];\n        bizagi.multiactionConnection.push(xhr);\n      } }).\n\n    done(function (responses) {\n      for (i in responses) {\n        if (typeof responses[i] !== \"function\") {\n          var response = responses[i];\n          if (response.error) {\n            if (rejectDeferreds) {\n              deferred.reject(this, \"servererror\", response);\n              return;\n            }\n\n          }\n        }\n      }\n      deferred.resolve(responses);\n\n    }).fail(function (xhr) {\n      var response = xhr.responseText || xhr;\n      var finalResponse;\n      // Try to parse the response\n      try {\n        finalResponse = JSON.parse(response);\n      } catch (e) {}\n      deferred.reject(xhr, \"servererror\", finalResponse);\n    });\n\n    return deferred.promise();\n  } });","/**\r\n *   Name: Bizagi Rendering Validation controller\r\n *   Author: Diego Parra\r\n *   Comments:\r\n *   -   This script will parse and execute all the validations defined for the form\r\n */\n\nbizagi.command.controllers.controller.extend(\"bizagi.command.controllers.validation\", {}, {\n\n  /* \r\n                                                                                            *   Constructor\r\n                                                                                            */\n  init: function init(form, validations, canvas) {\n    // Enable evalValidation function with console log trace\n    this.enableDebug = false;\n\n    // Call base\n    this._super(form);\n\n    // Perform notifications\n    this.initializeValidations(canvas, validations);\n  },\n\n  /**\r\n      * Perform validations component\r\n      * @param canvas\r\n      * @param validations\r\n      */\n  initializeValidations: function initializeValidations(canvas, validations) {\n    var self = this;\n    var validationBox = $('<div />').appendTo(canvas);\n\n    //Notifies that a modal view appear/disappear\n    $.widget(\"ui.bizagi_notifications\", $.ui.bizagi_notifications, {\n      expand: function expand() {\n        this._super();\n        self.form.triggerGlobalHandler(\"modalViewDidAppear\", {});\n      },\n      collapse: function collapse() {\n        this._super();\n        self.form.triggerGlobalHandler(\"modalViewDidDisappear\", {});\n      },\n      hide: function hide() {\n        this._super();\n        self.form.triggerGlobalHandler(\"modalViewDidDisappear\", {});\n      } });\n\n\n    // Apply plugin\n    validationBox.bizagi_notifications({\n      itemIcon: \"ui-icon-circle-close\",\n      minimized: false,\n      clearEnabled: false,\n      title: bizagi.localization.getResource(\"render-form-validations-header-text\"),\n      device: bizagi.util.detectDevice(),\n      orientation: self.form.properties.orientation });\n\n\n    // Bind click\n    validationBox.bind(\"itemClick\", function (e, ui) {\n      self.onNotificationClick(ui.data);\n    });\n\n    // Build validations\n    if (validations) {\n      self.buildValidations(validations);\n    }\n\n    // Keep references\n    self.validationBox = validationBox;\n    self.validations = validations || [];\n  },\n\n  /* \r\n     *   Method to incorporate automatic validation rules \r\n     */\n  buildValidations: function buildValidations(validations) {\n    var self = this;\n    var fnValidations = self.buildAllValidations(validations);\n\n    self.form.bind(\"rendervalidate\", function () {\n      return fnValidations(self);\n    });\n  },\n\n  /* \r\n     *   Method to add a simple error message in the validation box\r\n     */\n  showErrorMessage: function showErrorMessage(message) {\n    bizagi.showErrorAlertDialog = false;\n    this.showValidationMessage(message, null, \"ui-icon-circle-close\", \"ui-state-error\");\n  },\n\n  /* \r\n     *   Method to add a simple alert message in the validation box\r\n     */\n  showAlertMessage: function showAlertMessage(message) {\n    this.showValidationMessage(message, null, \"ui-icon-alert\", \"ui-state-highlight\");\n  },\n\n  /* \r\n     *   Method to add a simple info message in the validation box\r\n     */\n  showInfoMessage: function showInfoMessage(message) {\n    this.showValidationMessage(message, null, \"ui-icon-info\", \"ui-state-highlight\");\n  },\n\n  /* \r\n     *   Method to add a simple validation message in the validation box\r\n     */\n  showValidationMessage: function showValidationMessage(message, focus, icon, itemAdditionalClass, type, renderId) {\n    var self = this;\n    var form = self.form;\n    var render = null;\n\n    if (renderId) {\n      render = form.getRenderById(renderId) || null;\n    } else {\n      render = focus ? form.getRender(focus) : null;\n    }\n\n    bizagi.showErrorAlertDialog = false;\n\n    // Method to perform validations after the render has been changed, or the notifications has been clicked\n    var performValidationFn = function performValidationFn() {\n      // First hide and clear validation box\n      self.clearValidationMessages();\n\n      var lastActionButton = form ? form.getLastActionButton() : {};\n      var skipValidation = lastActionButton && lastActionButton.action === \"nextWithoutValidations\";\n\n      if (!skipValidation) {\n        // Run validations\n        self.validating = true;\n        self.performValidations();\n        self.validating = false;\n      }\n\n      // Attempt to hide if there are no validations\n      if (self.countValidationMessages() == 0) {\n        self.hideValidationMessages();\n        self.form.triggerGlobalHandler(\"modalViewDidDisappear\", {});\n      } else {\n        self.form.triggerGlobalHandler(\"modalViewDidAppear\", {});\n      }\n\n      //form.triggerGlobalHandler(\"modalViewDidDisappear\", {});\n    };\n    self.form.triggerGlobalHandler(\"modalViewDidAppear\", {});\n    // Add message\n    self.validationBox.bizagi_notifications(\"addNotification\", message, focus, icon, itemAdditionalClass, performValidationFn, type, renderId);\n\n    if (render) {\n      // Add error message to render\n      render.setValidationMessage(message);\n\n      if (!bizagi.util.isIE8()) {\n\n        // Bind event when render change\n        if (!self.validating) render.bind(\"rendervalidate\", function () {\n          performValidationFn();\n          if (render.properties.retype != \"double\") {\n            render.unbind(\"rendervalidate\");\n          }\n        });\n      }\n    }\n  },\n\n  /*\r\n     *   Count the number of validation messages\r\n     */\n  countValidationMessages: function countValidationMessages() {\n    return this.validationBox.bizagi_notifications(\"count\");\n  },\n\n  /*\r\n     *   Remove all the validations\r\n     */\n  clearValidationMessages: function clearValidationMessages(params) {\n    var validationsBoxes = $(\".ui-bizagi-notifications-container\", \"body\").not(\".ui-bizagi-log-container\");\n\n    return validationsBoxes.bizagi_notifications(\"clearAll\", undefined, params);\n  },\n\n  /*\r\n     *   Hide the validation notifications box\r\n     */\n  hideValidationMessages: function hideValidationMessages() {\n    return this.validationBox.bizagi_notifications(\"hide\");\n  },\n\n  /*\r\n     *   Show the validation notifications box\r\n     */\n  showValidationMessages: function showValidationMessages() {\n    return this.validationBox.bizagi_notifications(\"show\");\n  },\n\n  /*\r\n     *   Expand the notification box\r\n     */\n  expandNotificationBox: function expandNotificationBox(autofocus) {\n    // Select first error and expand notifications\n    if (autofocus !== false) this.validationBox.bizagi_notifications(\"autoFocusFirstError\");\n    return this.validationBox.bizagi_notifications(\"expand\");\n  },\n\n  isExpandedNotificationBox: function isExpandedNotificationBox() {\n    return this.validationBox.bizagi_notifications(\"isExpanded\") && this.validationBox.bizagi_notifications(\"isContentVisible\");\n  },\n\n  /*\r\n     *   Run all validation rules in the form container\r\n     */\n  performValidations: function performValidations(invalidElements) {\n    var self = this;\n\n    // First hide and clear validation box\n    self.clearValidationMessages();\n    self.validationBox.bizagi_notifications(\"initBatch\");\n\n    // Run render validations\n    var bRendersValid = self.validateRenders(invalidElements);\n\n    // Run form validations\n    var bFormValid = self.validations.length > 0 ? self.form.triggerHandler(\"rendervalidate\") : true;\n    self.validationBox.bizagi_notifications(\"endBatch\");\n\n    // Show validations if invalid\n    if (!bFormValid || !bRendersValid) {\n      self.validationBox.bizagi_notifications(\"show\");\n      return false;\n    }\n\n    return true;\n  },\n\n  /* PRIVATE METHODS */\n\n  /*  \r\n                        *   Construct validations javascript rules\r\n                        */\n  buildAllValidations: function buildAllValidations(validations) {\n    var self = this;\n    var sJSCode = \"\";\n\n    for (var i = 0; i < validations.length; i++) {\n\n      var isEnabled = validations[i].enabled != undefined ? validations[i].enabled : true;\n      if (isEnabled) {\n        // If validation is not \"valid\" we can omit that instruction\n        try {\n          sJSCode += self.buildValidation(validations[i].conditions, validations[i].validationCommand);\n        } catch (e) {\n          if (e.message != \"RenderNotFoundException\") {\n            bizagi.logError(\"Validation cannot be parsed: \" + e.message, validations[i]);\n          }\n        }\n      }\n    }\n\n    // Build final function\n    var sStatement = \"var baTmpFn = function(self, params){\\r\\n var bValid = true;\\r\\n \" + sJSCode + \"\\r\\n return bValid;}; baTmpFn\";\n\n    // Return interpreted function\n    return self.evalValidation(sStatement);\n  },\n\n  /*\r\n     *   Build a single javascript validation rule\r\n     */\n  buildValidation: function buildValidation(conditions, validationCommand) {\n    var self = this;\n    var sJsCondition = \"\";\n    var sJsValidation = \"\";\n\n    // Detect grid references\n    var gridReference = self.searchForGridReference(conditions);\n    var bGridDetected = gridReference != null;\n    var validateEditability = typeof bizagi.override.validateEditabilityOnValidations != \"undefined\" ? bizagi.override.validateEditabilityOnValidations : true;\n\n    // Build Conditions\n    sJsCondition += \"( \" + self.buildConditions(conditions, bGridDetected, validateEditability) + \" )\";\n\n    // Fix message for quotes and break lines\n    validationCommand.message = validationCommand.message.replace(/'/g, \"\\\\'\");\n    validationCommand.message = validationCommand.message.replace(/\\n/g, \" \");\n\n    // Build Message\n    var focus = validationCommand.focus || \"\";\n    if (bGridDetected) focus = gridReference;\n    if (validationCommand.tokens)\n    sJsValidation += \"self.showValidationMessage(' \" + validationCommand.message + \"', '\" + focus + \"', JSON.parse('\" + JSON.encode(validationCommand.tokens) + \"')); bValid = false;\\r\\n\";else\n\n    sJsValidation += \"self.showValidationMessage(' \" + validationCommand.message + \"', '\" + focus + \"'); bValid = false;\\r\\n\";\n\n    // Build final statement\n    if (!bGridDetected) {\n\n\n      return \"if (\" + sJsCondition + \"){\\r\\n \" + sJsValidation + \" \\r\\n}\";\n    } else {\n      var sGridStatement = \"var grid = self.form.getRender('\" + gridReference + \"');\\r\\n\";\n      sGridStatement += \"if(grid === null) return true;\\r\\n\";\n      sGridStatement += \"var data = grid.getIndexes();\\r\\n\";\n      sGridStatement += \"var bGridValid = true;\\r\\n\";\n      sGridStatement += \"$.each(data, function(_, i) {\\r\\n\";\n      sGridStatement += \"if (\" + sJsCondition + \"){\\r\\n bGridValid = false; \\r\\n}\";\n      sGridStatement += \"});\\r\\n\";\n      sGridStatement += \"if (bGridValid == false){\\r\\n \" + sJsValidation + \"\\r\\n}\";\n      return sGridStatement;\n    }\n  },\n\n  /* \r\n     *   Method triggered when the validation item has been clicked\r\n     */\n  onNotificationClick: function onNotificationClick(data) {\n    var self = this;\n    var form = self.form;\n    var xpath = data.focus;\n    var renderId = data.id;\n\n    if (xpath) {\n      var render = renderId ? form.getRenderById(renderId) : form.getRender(xpath);\n\n      if (render) {\n        render.focus();\n      }\n    }\n  },\n\n  /* \r\n     *   Method to loop\r\n     */\n  validateRenders: function validateRenders(invalidElements) {\n    var self = this;\n    invalidElements = invalidElements || [];\n\n    // Do a check\n    var bValid = self.form.isValid(invalidElements);\n    if (!bValid) {\n      invalidElements.forEach(function (element) {\n        if (element.id) {\n          // Parameters: message, xpath, icon, itemAdditionalClass, type, renderId\n          self.showValidationMessageById(element.message, element.xpath, element.id);\n        } else if (element.message || element.xpath) {\n          self.showValidationMessage(element.message, element.xpath);\n        }\n      });\n    }\n\n    return bValid;\n  },\n\n  /*\r\n     *\tEval validation string, for debug purposes\r\n     */\n  evalValidation: function evalValidation(command) {\n    var self = this;\n\n    if (self.enableDebug && console != undefined) {\n      console.log(command);\n    }\n\n    return eval(command);\n  },\n\n  /**\r\n      * Method to add a simple validation message in the validation box\r\n      * @param message\r\n      * @param xpath\r\n      * @param renderId\r\n      */\n  showValidationMessageById: function showValidationMessageById(message, xpath, renderId) {\n    this.showValidationMessage(message, xpath, undefined, false, undefined, renderId);\n  } });","/*\r\n*   Name: BizAgi Element Class\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will define a base class with common stuff related to all renders and containers\r\n*/\n\n$.Class.extend(\"bizagi.rendering.element\", {\n  ELEMENT_TYPE_CONTAINER: 1,\n  ELEMENT_TYPE_RENDER: 2,\n  ELEMENT_TYPE_COLUMN: 3 },\n{\n\n  /*\r\n  *   Constructor\r\n  */\n  init: function init(params) {\n    // Set render factory\n    this.renderFactory = params.renderFactory;\n\n    // Set data service\n    this.dataService = params.dataService;\n\n    // Set reference to parent\n    this.parent = params.parent;\n\n    // Set l10n service\n    this.resources = bizagi.localization;\n\n    // Set the observable element\n    this.observableElement = $(\"<div />\");\n\n    // Set the dispose flag\n    this.disposed = false;\n\n    // Update data\n    this.initializeData(params.data);\n\n    // Define an object to hold the subscribe collection\n    this.subscribers = [];\n  },\n\n  /*\r\n     *   Update or init the element data\r\n     */\n  initializeData: function initializeData(data) {\n    var self = this;\n\n    // Set the internal data\n    this.properties = {};\n    if (data && data.properties) this.properties = data.properties;\n\n    // Set xpath context\n    this.properties.xpathContext = this.getXpathContext();\n\n    // Set page cache\n    this.properties.idPageCache = this.getPageCache();\n\n    //History of visual changes from actions\n    self.visualChanges = self.visualChanges || {};\n  },\n\n  /*\r\n     *   Returns the xpath context of the element\r\n     */\n  getXpathContext: function getXpathContext() {\n    // By default return parent's xpath context\n    // This method is overriden in form container which contains the real xpath context\n\n    return this.parent != undefined && typeof this.parent.getXpathContext == \"function\" ? this.parent.getXpathContext() : \"\";\n  },\n\n  /*\r\n     *   Returns the xpath of the element\r\n     */\n  getXpath: function getXpath() {\n    return this.properties.xpath;\n  },\n  /*\r\n     *   Returns the page cache for the current element\r\n     */\n  getPageCache: function getPageCache() {\n    // By default return parent's page cache\n    // This method is overriden in form container which contains the real page cache\n\n    return this.parent != undefined && typeof this.parent.getPageCache == \"function\" ? this.parent.getPageCache() : \"\";\n  },\n\n  /*\r\n     *   Returns the form containing the element\r\n     */\n  getFormContainer: function getFormContainer() {\n    // By default return parent's form container\n    // This method is overriden in form container which returns itself\n    if (typeof this.parent != \"undefined\")\n    return this.parent.getFormContainer();\n  },\n\n\n  /*\r\n     *   Returns the mapped resource\r\n     */\n  getResource: function getResource(key) {\n    return this.resources.getResource(key);\n  },\n\n  /*\r\n     *   Returns the element type\r\n     */\n  getElementType: function getElementType() {},\n\n  /*\r\n                                                *   Resizes the element\r\n                                                */\n  resize: function resize(size) {\n\n  },\n\n  /*\r\n     *   Focus on the current element\r\n     */\n  focus: function focus() {\n\n    if (this.properties.required) {\n      var layout = $(\"#ui-bizagi-wp-app-render-form-content\");\n      // Check if element is visible into scroll\n      if (!bizagi.util.isScrolledIntoView(this.element, layout)) {\n        $(this.element).attr('tabindex', -1).focus();\n      }\n      if (this.element) {\n        this.element.effect('highlight', 2000);\n      }\n    }\n\n    //Check if the element has parent\n    if (this.parent && typeof this.parent.focus == 'function') {\n      this.parent.focus();\n    }\n  },\n\n  /*\r\n     *   Publish a global event that the facade will replicate\r\n     */\n  triggerGlobalHandler: function triggerGlobalHandler(eventType, data) {\n    if (this.disposed) return null;\n    if (this.parent) return this.parent.triggerGlobalHandler(eventType, data);\n    return null;\n  },\n\n  /*\r\n     *   Triggers an event inside the control\r\n     */\n  trigger: function trigger(eventType, data) {\n    if (this.disposed) return null;\n    if (this.observableElement) return this.observableElement.trigger(eventType, data);\n    return null;\n  },\n\n  /*\r\n     *   Triggers an event handler inside the control\r\n     */\n  triggerHandler: function triggerHandler(eventType, data) {\n    if (this.disposed) return null;\n    if (this.observableElement) return this.observableElement.triggerHandler(eventType, data);\n    return null;\n  },\n\n  /*\r\n     *   Binds to an event\r\n     */\n  bind: function bind(eventType, fn) {\n    if (this.disposed) return null;\n    if (this.observableElement) return this.observableElement.bind(eventType, fn);\n    this.subscribers.push({ event: eventType });\n    return null;\n  },\n\n  /*\r\n     *   Un-binds to an event\r\n     */\n  unbind: function unbind(eventType, fn) {\n    if (this.disposed) return null;\n    if (this.observableElement) return this.observableElement.unbind(eventType, fn);\n    return null;\n  },\n\n  /*\r\n     *   Binds a one time event\r\n     */\n  one: function one(eventType, fn) {\n    if (this.disposed) return null;\n    if (this.observableElement) return this.observableElement.one(eventType, fn);\n    this.subscribers.push({ event: eventType });\n    return null;\n  },\n\n  /*\r\n     *   Return the rendered element\r\n     */\n  getRenderedElement: function getRenderedElement() {},\n\n  /*\r\n                                                        *   Get current rendering mode\r\n                                                        */\n  getMode: function getMode() {\n    if (this.parent) return this.parent.getMode();\n  },\n\n  /*\r\n     *   Get current rendering params\r\n     */\n  getParams: function getParams() {\n    if (this.parent) return this.parent.getParams();\n  },\n\n  /*\r\n     * Get current form type (ex. queryform, form)\r\n     */\n  getFormType: function getFormType() {\n    var self = this;\n\n    var form = self.getFormContainer();\n    return form.properties.type || \"form\";\n  },\n\n  /*\r\n     *   Returns a promise that will resolve when the element is ready\r\n     */\n  ready: function ready() {},\n\n  /*\r\n                              *   Returns a promise that will resolve when the element is ready to save\r\n                              */\n  isReadyToSave: function isReadyToSave() {},\n\n  /*\r\n                                              *   Get the custom handlers set for this execution\r\n                                              */\n  getCustomHandlers: function getCustomHandlers() {\n    return null;\n  },\n\n  /*\r\n     *   Dispose the class so we can detect when a class is invalid already\r\n     */\n  dispose: function dispose() {\n    var self = this;\n    self.disposed = true;\n\n    var timeOutDispose = setTimeout(function () {\n      if (self.subscribers != null) {\n        // Remove all subcriptions\n        $.each(self.subscribers, function (i, item) {\n          self.unbind(item.event);\n        });\n      }\n      delete self.subscribers;\n\n      if (self.observableElement) self.observableElement.off();\n      bizagi.util.dispose(self);\n      clearTimeout(timeOutDispose);\n    }, bizagi.override.disposeTime || 50);\n  },\n\n  /*\r\n     *   Check if the current object is disposed\r\n     */\n  isDisposed: function isDisposed() {\n    return this.disposed;\n  },\n\n  /*\r\n     *   This method process the error or alert messages coming from the server, and adds them to the validation controller\r\n     */\n  processFailMessage: function processFailMessage(message) {\n    var self = this;\n    var form = self.getFormContainer();\n    var isOfflineForm = bizagi.util.isOfflineForm({ context: self });\n\n    if (message.errorType === \"CustomMessageException\") {\n      // Clear previous validations\n      form.validationController.clearValidationMessages();\n      var error = bizagi.localization.getResource(message.message);\n      form.validationController.showErrorMessage(error);\n    } else if (message.errorType === \"InvalidCaseStateException\") {\n      var params = form.getParams();\n\n      form.validationController.clearValidationMessages();\n\n      // Redirection Here\n      form.container.trigger(\"routing\", { idCase: params.idCase || bizagi.context.idCase });\n    } else {\n      var message = message || {};\n      message = typeof message == \"string\" ? JSON.parse(message) : message;\n      var type = message.type || \"error\";\n      var code = message.code || \"code\";\n      message = message.responseText || message.message || message;\n\n      // Omit processing when the ajax didn't process\n      if (type === \"not-processed\") return;\n      if (type === \"not-shown\") return;\n      if (isOfflineForm && code === \"AUTH_ERROR\") return;\n\n      // Clear previous validations\n      form.validationController.clearValidationMessages();\n      if (type == \"alert\") {\n        form.validationController.showAlertMessage(message);\n      } else {\n        form.validationController.showErrorMessage(message);\n      }\n    }\n\n    return message;\n  },\n\n  /*\r\n     *   Sets a waiting overlay above the current element\r\n     */\n  startLoading: function startLoading() {/* Override in implementations */},\n\n  /*\r\n                                                                             *   Removes the waiting overlay\r\n                                                                             */\n  endLoading: function endLoading() {/* Override in implementations */},\n\n  /**\r\n                                                                          *   Prepare control to remove it from the render, that allows to\r\n                                                                          *   clean all elements of the control or to do any stuff before to remove\r\n                                                                          */\n  beforeToRefresh: function beforeToRefresh() {\n    /* Implement in each render and container if you need */\n  },\n\n  /**\r\n      *   Run before that the control has been refreshed\r\n      */\n  afterToRefresh: function afterToRefresh() {\n    /* Implement in each render and container if you need */\n    if (bizagi.override && bizagi.override.enableExecuteRefreshAction === true) {\n      var formContainer = this.getFormContainer();\n      formContainer.tryToExecuteFunction(this.properties.xpath || this.properties.id);\n    }\n  },\n\n  /**\r\n      * This method returns the localized version of the resource\r\n      * @param resource\r\n      * @param fallback\r\n      * @returns {string}\r\n      */\n  getResourceByKey: function getResourceByKey(resource, fallback) {\n    fallback = fallback || resource;\n\n    return bizagi.localization.getResource(resource, fallback);\n  },\n  /**\r\n      * Restore appearance using type of command\r\n      */\n  restoreAppearance: function restoreAppearance() {\n    var self = this;\n\n    for (var command in self.visualChanges) {\n\n      switch (command) {\n        case \"color\":\n          self.changeColor(self.visualChanges[command]);\n          break;\n        case \"backgroundColor\":\n          self.changeBackgroundColor(self.visualChanges[command]);\n          break;\n        case \"required\":\n          self.changeRequired(self.visualChanges[command]);\n          break;\n        case \"editability\":\n          self.changeEditability(self.visualChanges[command]);\n          break;\n        case \"visibility\":\n          self.changeVisibility(self.visualChanges[command]);\n          break;\n        case \"minValue\":\n          self.changeMinValue(self.visualChanges[command]);\n          break;\n        case \"maxValue\":\n          self.changeMaxValue(self.visualChanges[command]);\n          break;}\n\n    }\n  },\n\n  getOrientation: function getOrientation() {\n    var control = this;\n    while (control) {\n      properties = control.properties || {};\n      if (properties.orientation !== \"auto\") return properties.orientation;\n      control = control.parent;\n    }\n    return \"auto\";\n  } });","/*\r\n *   Name: BizAgi Container Class\r\n *   Author: Diego Parra\r\n *   Comments:\r\n *   -   This script will define a base container class with common stuff related to all containers\r\n */\n\nbizagi.rendering.element.extend(\"bizagi.rendering.container\", {\n  TYPE_QUERY_FORM: \"queryForm\" },\n{\n\n  /*\r\n  *   Update or init the element data\r\n  */\n  initializeData: function initializeData(data) {\n    var self = this;\n\n    // Call base\n    self._super(data);\n\n    // Set defaults\n    var properties = self.properties;\n    properties.uniqueId = Math.ceil(Math.random() * 1000000);\n    properties.editable = typeof properties.editable != \"undefined\" ? bizagi.util.parseBoolean(properties.editable) : true;\n    properties.visible = typeof properties.visible != \"undefined\" ? bizagi.util.parseBoolean(properties.visible) : true;\n\n    // Override orientation from parent if not set\n    properties.orientation = properties.orientation || \"auto\";\n\n    // Save original properties\n    this.originalProperties = JSON.parse(JSON.encode(properties));\n\n    // Create children\n    this.children = [];\n    this.childrenHash = {};\n\n    if (data.elements) {\n      $.each(data.elements, function (i, element) {\n        if (element.render) {\n          self.createRenderElement(element);\n        } else if (element.container) {\n          self.createContainerElement(element);\n        } else if (element.form) {\n          self.createFormElement(element);\n        }\n      });\n    }\n  },\n\n  /*\r\n     *   Creates a render element\r\n     */\n  createRenderElement: function createRenderElement(element) {\n    var self = this;\n    var properties = self.properties;\n    var originalElement;\n\n    // Replicate editable property when container is not editable\n    if (properties.editable == false) {\n      element.render.properties.editable = properties.editable;\n      /*if (element.render.properties.type == \"grid\")\r\n                                                                    element.render.properties.inlineEdit = false;*/\n    }\n\n    // Replicate required property when container is not required\n    if (properties.required === false) {\n      element.render.properties.required = properties.required;\n    }\n\n    //clone originalElement to apply duplicate render properties correctly\n    if (element.render.properties.retype == \"duplicate\") {\n      originalElement = bizagi.clone(element);\n    }\n\n    var render = self.renderFactory.getRender({\n      type: element.render.properties.type,\n      data: element.render,\n      dataService: self.dataService,\n      parent: self,\n      mode: self.getMode() });\n\n\n    // Add to children\n    self.children.push(render);\n\n    // Check for duplicate\n    if (element.render.properties.retype == \"duplicate\") {\n      self.processDuplicateRender(render, originalElement);\n    }\n\n    //TODO: at this point not posible add the retype double at this point not exist input\n\n    // Register in form container\n    self.getFormContainer().registerRender(render);\n  },\n  /*\r\n     *   Creates a container element\r\n     */\n  createContainerElement: function createContainerElement(element) {\n    var self = this;\n    var properties = self.properties;\n\n    // Replicate editable property when container is not editable\n    if (properties.editable == false) {\n      element.container.properties.editable = properties.editable;\n    }\n\n    // Replicate required property when container is not required\n    if (properties.required === false) {\n      element.container.properties.required = properties.required;\n    }\n\n    var container = self.renderFactory.getContainer({\n      type: element.container.properties.type,\n      data: element.container,\n      parent: self,\n      dataService: self.dataService,\n      mode: self.getMode(),\n      isDesign: self.getMode() === \"design\" });\n\n\n    self.children.push(container);\n\n    // Register in form container\n    self.getFormContainer().registerRender(container);\n  },\n  /*\r\n     *   Creates a form element\r\n     */\n  createFormElement: function createFormElement(element) {\n    var self = this;\n    var properties = self.properties;\n\n    // Replicate editable property when container is not editable\n    if (properties.editable == false) {\n      element.container.properties.editable = properties.editable;\n    }\n\n    var form = self.renderFactory.getContainer({\n      type: element.form.properties.type || \"form\",\n      data: element.form,\n      parent: self,\n      dataService: self.dataService,\n      mode: self.getMode() });\n\n    self.children.push(form);\n  },\n  /*\r\n     *   Gets the current container\r\n     */\n  getElement: function getElement() {\n    var self = this;\n    return self.container;\n  },\n  /*\r\n     *   Gets a collection for all elements matching a type\r\n     */\n  getElementsByType: function getElementsByType(type, elements) {\n    elements = elements || [];\n    var self = this;\n\n    // Iterate through elements\n    $.each(self.children, function (i, child) {\n      if (child.properties.type == type) {\n        elements.push(child);\n      }\n      if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) {\n        child.getElementsByType(type, elements);\n      }\n    });\n\n    return elements;\n  },\n  /*\r\n     *   Process renders with duplicate property\r\n     */\n  processDuplicateRender: function processDuplicateRender(render, element) {\n    var self = this;\n    var clonedElement = JSON.parse(JSON.encode(element.render));\n\n    // Changes properties\n    clonedElement.properties.displayName = clonedElement.properties.displayName + \" \" + self.getResource(\"render-text-duplicate-label-sufix\");\n    clonedElement.properties.xpath = clonedElement.properties.xpath + \".clone\";\n    clonedElement.properties.isClone = true;\n\n    // Creates clone\n    var clone = self.renderFactory.getRender({\n      type: clonedElement.properties.type,\n      data: clonedElement,\n      parent: self,\n      mode: self.getMode() });\n\n\n    // Associates with main render\n    render.cloneRender = clone;\n\n    // Add to collection\n    self.children.push(clone);\n  },\n  /*\r\n     *   Returns the element type\r\n     */\n  getElementType: function getElementType() {\n    return bizagi.rendering.element.ELEMENT_TYPE_CONTAINER;\n  },\n  /*\r\n     *   Returns the in-memory processed element\r\n     */\n  render: function render() {\n    var self = this,\n    mode = self.getMode(),\n    result;\n\n    // Render container\n    result = self.internalRender();\n\n    // Apply container defaults\n    self.applyContainerDefaults();\n\n    // Add container id\n    result.attr(\"data-container-id\", self.properties.id);\n\n    //Add container tag property\n    if (self.properties.tag) {\n      result.attr(\"data-tag\", self.properties.tag);\n    }\n\n    //Add class to the requested form, to specify if is add form, edit form, or detail form\n    if (self.params)\n    if (self.params.requestedForm)\n    result.addClass(self.params.requestedForm);\n\n    return result;\n  },\n  /*\r\n     *   Internal  rendering\r\n     */\n  internalRender: function internalRender() {\n    var self = this;\n\n    // Render the container\n    var html = self.renderContainerHtml();\n\n    // Convert html string to jquery object\n    var container = self.container = $(html);\n\n    // Post-render\n    self.postRenderContainer(container);\n\n    return self.container;\n  },\n  /*\r\n     *   Renders container html\r\n     */\n  renderContainerHtml: function renderContainerHtml() {\n    var self = this;\n    // Start rendering deferred\n    self.renderingDeferred = self.renderingDeferred || new $.Deferred();\n\n    return this.renderContainer();\n  },\n  /*\r\n     *   Check if the jquery element is ready or not\r\n     */\n  isRendered: function isRendered() {\n    var self = this;\n    if (!self.renderingDeferred)\n    return false;\n    return self.renderingDeferred.promise();\n  },\n  /*\r\n     *   Return the rendered element\r\n     */\n  getRenderedElement: function getRenderedElement() {\n    if (bizagi.util.isEmpty(this.container))\n    alert(\"container hasn't been rendered!\");\n\n    return this.container;\n  },\n  /*\r\n     *   Set container defaults\r\n     */\n  applyContainerDefaults: function applyContainerDefaults() {\n    var self = this,\n    properties = self.properties;\n\n    // Set customizations\n    if (properties.backgroundColor)\n    self.changeBackgroundColor(properties.backgroundColor);\n\n    // Set editability and visiblity\n    if (!properties.visible)\n    self.changeVisibility(properties.visible);\n  },\n  /*\r\n     *  Changes background color\r\n     */\n  changeBackgroundColor: function changeBackgroundColor(color) {\n    var self = this;\n    var properties = self.properties;\n\n    properties.backgroundColor = color;\n\n    // Iterate through elements\n    $.each(self.children, function (i, child) {\n      if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) {\n        child.changeBackgroundColor(color);\n\n      } else if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_RENDER) {\n        child.changeBackgroundColor(color);\n      }\n    });\n  },\n  /*\r\n     *   Hides / Show container\r\n     */\n  changeVisibility: function changeVisibility(argument) {\n    var self = this;\n    var properties = self.properties;\n\n    // Store in properties\n    properties.visible = bizagi.util.parseBoolean(argument);\n\n    // Hide - show the render\n    if (properties.visible) {\n      self.container.show();\n\n    } else {\n      self.container.hide();\n    }\n  },\n  /* Changes editability */\n  changeEditability: function changeEditability(argument) {\n    var self = this;\n    var properties = self.properties;\n\n    // Store in properties\n    properties.editable = argument == \"Default\" ? self.originalProperties.editable : bizagi.util.parseBoolean(argument);\n\n    // Iterate through elements\n    $.each(self.children, function (i, child) {\n      if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) {\n        $.when(child.ready()).done(function () {\n          child.changeEditability(argument);\n        });\n      } else if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_RENDER) {\n        child.changeEditability(argument);\n      }\n    });\n  },\n  /*\r\n     *   Replaces a <x/> tag in the container for the specified \"replace\" element\r\n     */\n  replaceTag: function replaceTag(container, tag, replace) {\n    bizagi.util.replaceSelector(container, tag, replace);\n  },\n  /*\r\n     *   Replaces a <children/> tag in the container for the specified \"replace\" element\r\n     */\n  replaceChildrenTag: function replaceChildrenTag(container, replace) {\n    this.replaceTag(container, \".children\", replace);\n  },\n  /*\r\n     *   Replaces a {{children}} string in the specified element\r\n     */\n  replaceChildrenHtml: function replaceChildrenHtml(html, replace) {\n    return html.replaceFirstWithoutPatterns(\"{{children}}\", replace);\n  },\n  /*\r\n     *   Template method to render the container layout, returns a string with all the builded html,\r\n     *   must be overriden in all children\r\n     */\n  renderContainer: function renderContainer() {\n  },\n  /*\r\n     *   Template method to process each jquery object\r\n     *   must be overriden in each container\r\n     */\n  postRenderContainer: function postRenderContainer(container) {\n    var self = this;\n    var mode = self.getMode();\n\n    // Resolve rendering deferred\n    if (self.renderingDeferred)\n    self.renderingDeferred.resolve();\n\n    // Process children elements\n    self.container = container;\n    self.executeChildrenPostRender(container);\n\n    if (mode == \"execution\") {\n      // Apply handlers\n      self.configureHandlers();\n      self.applyPlaceHolderPolyfill();\n\n    }\n    if (mode == \"design\") {\n      // Configure view\n      self.configureDesignView();\n    }\n    if (mode == \"layout\") {\n      // Configure view\n      self.configureDesignView();\n      self.configureLayoutView();\n    }\n  },\n\n  applyPlaceHolderPolyfill: function applyPlaceHolderPolyfill() {\n    var self = this;\n    var config = window.placeHolderConfig || {};\n    if (('placeholder' in $('<input>')[0] || 'placeHolder' in $('<input>')[0]) && !config.forceApply) {\n      // don't run the polyfill when the browser has native support\n      return;\n    }\n    Placeholders.enable();\n  },\n  /*\r\n     *   Process container children\r\n     */\n  executeChildrenPostRender: function executeChildrenPostRender(container) {\n    var self = this;\n    var childrenElements = container.children();\n\n    $.each(childrenElements, function (i, childElement) {\n      childElement = $(childElement);\n      var id = Number(childElement.data(\"unique-id\"));\n      if (id) {\n        var child = self.childrenHash[id];\n        if (child) {\n          var type = child.getElementType();\n          if (type == bizagi.rendering.element.ELEMENT_TYPE_RENDER)\n          child.postRenderElement(childElement);\n          if (type == bizagi.rendering.element.ELEMENT_TYPE_CONTAINER)\n          child.postRenderContainer(childElement);\n        }\n      } else {\n        self.executeChildrenPostRender(childElement);\n      }\n    });\n  },\n  /*\r\n     *   Template method to implement in each device to customize the container's behaviour to add handlers\r\n     */\n  configureHandlers: function configureHandlers() {\n  },\n  /*\r\n     *   Template method to implement in each device to customize the render's behaviour when rendering in design mode\r\n     */\n  configureDesignView: function configureDesignView() {\n  },\n  /*\r\n     *   Template method to implement in each device to customize the container's behaviour to show layout\r\n     */\n  configureLayoutView: function configureLayoutView() {\n\n  },\n  /**\r\n      *   Renders all children html\r\n      */\n  renderChildrenHtml: function renderChildrenHtml() {\n    var self = this;\n    var temp = \"\";\n\n    $.each(self.children, function (i, child) {\n      var type = child.getElementType();\n      if (type == bizagi.rendering.element.ELEMENT_TYPE_RENDER)\n      temp += child.renderElement();\n      if (type == bizagi.rendering.element.ELEMENT_TYPE_CONTAINER)\n      temp += child.renderContainerHtml();\n      self.childrenHash[child.properties.uniqueId] = child;\n    });\n\n    return temp;\n  },\n  /*\r\n     *   Iterate through all the renders in the container and fills the hashtable\r\n     */\n  collectRenderValues: function collectRenderValues(renderValues) {\n    var self = this;\n    if (self.children) {\n      $.each(self.children, function (i, child) {\n        if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) {\n          // Go though container\n          child.collectRenderValues(renderValues);\n\n        } else if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_RENDER) {\n          // Check if the render can be sent to the server\n          if (child.canBeSent()) {\n            child.collectData(renderValues);\n          }\n        }\n      });\n    }\n  },\n\n  /*\r\n     *   Iterate through all the renders and check if has changed\r\n     */\n  hasChanged: function hasChanged(result) {\n    var self = this;\n    result = result || [];\n\n    if (!result.length) {\n      if (self.children) {\n        $.each(self.children, function (i, child) {\n          if (result.length || child.hasChanged(result)) {\n            return false;\n          }\n        });\n      }\n    } else {\n      return result;\n    }\n  },\n\n  /*\r\n     *    Creates a json array parameters to search result\r\n     */\n  collectRenderValuesQueryForm: function collectRenderValuesQueryForm(renderValues) {\n    var self = this;\n    $.each(self.children, function (i, child) {\n      if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) {\n        // Go though container\n        child.collectRenderValuesQueryForm(renderValues);\n\n      } else if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_RENDER) {\n        // Check if the render can be sent to the server\n        if (child.canBeSentQueryForm()) {\n          child.collectDataQueryForm(renderValues);\n        }\n      }\n    });\n  },\n  /*\r\n     *   Gets the first child\r\n     */\n  firstChild: function firstChild() {\n    return this.children[0];\n  },\n  /*\r\n     *   Method to find all the renders matching an xpath inside the container\r\n     */\n  getRenders: function getRenders(xpath, renders) {\n    var self = this;\n\n    renders = renders || [];\n\n    // Remove [] filters for grid columns xpaths to fully identify the grid as the xpath target\n    if (xpath.indexOf(\"[\") > 0) {\n      xpath = xpath.substring(0, xpath.indexOf(\"[\"));\n    }\n\n    $.each(self.children, function (i, child) {\n      if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) {\n        // Go though container\n        child.getRenders(xpath, renders);\n\n      } else if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_RENDER) {\n        if (xpath == child.properties.xpath) {\n          renders.push(child);\n        }\n      }\n    });\n\n    return renders;\n  },\n  /*\r\n     *   Gets the first editable render\r\n     */\n  getRender: function getRender(xpath) {\n    var self = this;\n    var renders = self.getRenders(xpath);\n    var result = null;\n    $.each(renders, function (i, render) {\n      if (render.properties.editable) {\n        if (result == null)\n        result = render;\n      }\n    });\n\n    // if no render has been found, skip editable condition\n    if (result == null) {\n      $.each(renders, function (i, render) {\n        result = render;\n      });\n    }\n\n    return result;\n  },\n\n  /*\r\n      *   Gets all renders by xpath\r\n      */\n  getRendersByXpath: function getRendersByXpath(xpath) {\n    var self = this;\n    return self.getRenders(xpath);\n  },\n\n  /*\r\n     *   Gets a container by the id\r\n     */\n  getContainer: function getContainer(id) {\n    var self = this;\n\n    if (self.properties.id == id)\n    return this;\n\n    var result;\n    $.each(self.children, function (i, child) {\n      if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) {\n        // Go though container\n        var o = child.getContainer(id);\n        if (o != null) {\n          result = o;\n          return false;\n        }\n      }\n    });\n\n    return result;\n  },\n  /*\r\n     *   Validate all renders in the container\r\n     */\n  isValid: function isValid(invalidElements) {\n    var self = this;\n\n    if (self.children) {\n      $.each(self.children, function (i, child) {\n        if (child.properties.visible) {\n          if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) {\n            // Go though container\n            child.isValid(invalidElements);\n          } else if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_RENDER) {\n            // Go to the render\n            child.isValid(invalidElements);\n          }\n        }\n      });\n    }\n\n    return invalidElements.length == 0;\n  },\n\n  /*\r\n     *   Validate all grids in the container\r\n     */\n  hasValidGrids: function hasValidGrids(invalidElements) {\n    var self = this;\n\n    $.each(self.children, function (i, child) {\n      if (child.properties.visible) {\n        if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) {\n          // Go though container\n          child.hasValidGrids(invalidElements);\n\n        } else if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_RENDER && typeof child.grid != \"undefined\") {\n          // Go to the render\n          child.isValid(invalidElements);\n        }\n      }\n    });\n\n    return invalidElements.length == 0;\n  },\n  /*\r\n     *   Returns a promise that will resolve when the element is ready\r\n     */\n  ready: function ready() {\n    var self = this;\n    return $.when(self.parent.ready(), self.isRendered());\n  },\n  /*\r\n     *   Returns a promise that will resolve when the element is ready to save\r\n     */\n  isReadyToSave: function isReadyToSave() {\n    var self = this;\n    var childrenPromises = $.map(self.children, function (child) {\n      return child.isReadyToSave();\n    });\n    return $.when.apply($, childrenPromises);\n  },\n  /*\r\n     *   Return the current focuses container\r\n     */\n  getFocus: function getFocus() {\n    var self = this;\n    var focus;\n    $.each(self.children, function (i, child) {\n      if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) {\n        var result = child.getFocus();\n        if (!bizagi.util.isEmpty(result)) {\n          focus = result;\n        }\n      }\n    });\n\n    return focus;\n  },\n  /*\r\n     *   Get the custom handlers set for this execution\r\n     */\n  getCustomHandlers: function getCustomHandlers() {\n    var self = this;\n    var form = self.getFormContainer();\n\n    if (form) {\n      return form.getCustomHandlers();\n    }\n  },\n  /*\r\n     *   Get the custom handlers set for this execution\r\n     */\n  getCustomHandler: function getCustomHandler(key) {\n    var self = this;\n    var customHandlers = self.getCustomHandlers();\n\n    if (customHandlers) {\n      return customHandlers[key];\n    }\n  },\n  /*\r\n     *   Dispose the class so we can detect when a class is invalid already\r\n     */\n  dispose: function dispose() {\n    var self = this;\n\n    // Iterate through elements\n    var timeOutChildrenDispose = setTimeout(function () {\n      if (self.children) {\n        $.each(self.children, function (i, child) {\n          child.dispose();\n        });\n      }\n      clearTimeout(timeOutChildrenDispose);\n    }, bizagi.override.disposeTime || 50);\n\n    // Call base\n    self._super();\n  },\n\n  /*\r\n     *   Refresh the current container\r\n     */\n  refreshContainer: function refreshContainer(args) {\n    var self = this;\n    var properties = self.properties;\n    var form = self.getFormContainer();\n\n    // Start waiting\n    self.startLoading();\n\n    // Execute personalized stuff before to refresh it\n    self.beforeToRefresh();\n\n    // Call the service\n    return $.when(self.dataService.multiaction().refreshControl({\n      xpath: properties.xpath,\n      idRender: properties.id,\n      idPageCache: properties.idPageCache,\n      xpathContext: properties.xpathContext || args.xpathContext,\n      contexttype: self.properties.contexttype || \"\",\n      idForm: form && form.properties && form.properties.id ? form.properties.id : \"\" //To fix BA56877.\n    })).done(function (data) {\n\n      if (!self.isDisposed()) {\n        if (bizagi.override.restoreAppearanceAfterRefresh) {\n          self.saveChildrenVisualChanges(self);\n        }\n\n        // Unregister children of container to replace in hash self.rendersById and self.rendersByXpath\n        self.unregisterChildren();\n        delete self.children;\n        delete self.childrenHash;\n\n        self.getFormContainer().removeActions();\n\n        // update editable\n        if (self.properties.editable === false) {\n          data.container && data.container.properties ? data.container.properties.editable = false : \"\";\n        }\n\n        // Update the data\n        self.initializeData(data.container);\n\n        // Render the container again\n        var currentContainer = self.container;\n        var result = self.render();\n\n        if (self.properties.type == \"tabItem\") {\n          $(result).addClass(\"childrenActive\");\n        }\n\n        currentContainer.replaceWith(result);\n\n        // Rebind the actions\n        var actions = data.container && data.container.actions ? data.container.actions : [];\n        self.getFormContainer().refreshActions(actions);\n\n        self.triggerChildrenActions();\n\n        if (bizagi.override.restoreAppearanceAfterRefresh) {\n          self.restoreChildrenVisualChanges(self);\n          delete self.childrenVisualChanges;\n          self.restoreAppearance(data.container);\n        }\n\n        // Execute personalized stuff after to refresh it\n        self.afterToRefresh();\n\n      }\n    }).fail(function (message) {\n      message = self.processFailMessage(message);\n\n    }).always(function () {\n      self.endLoading();\n    });\n  },\n\n  /*\r\n      *   Refresh the current container\r\n      */\n  refreshDesignContainer: function refreshDesignContainer(data) {\n    var self = this;\n    var properties = self.properties;\n\n    // Execute personalized stuff before to refresh it\n    self.beforeToRefresh(data);\n    //self.setActiveTab(data.elements);\n\n    $.extend(data.properties, {\n      editable: properties.editable,\n      contexttype: properties.contexttype || \"\",\n      idPageCache: properties.idPageCache,\n      idRender: properties.id,\n      messageValidation: properties.messageValidation,\n      uniqueId: properties.uniqueId,\n      visible: properties.visible,\n      xpath: properties.xpath,\n      mode: \"design\",\n      xpathContext: properties.xpathContext || \"\" });\n\n\n\n    if (!self.isDisposed()) {\n      // Unregister children of container to replace in hash self.rendersById and self.rendersByXpath\n      self.unregisterChildren();\n      delete self.children;\n      delete self.childrenHash;\n\n      // update editable\n      if (self.properties.editable === false) {\n        data.container && data.container.properties ? data.container.properties.editable = false : \"\";\n      }\n\n      // Update the data\n      self.initializeData(data.container);\n\n      // Render the container again\n      var currentContainer = self.container;\n      var result = self.render();\n\n      if (self.properties.type == \"tabItem\") {\n        $(result).addClass(\"childrenActive\");\n      }\n\n      currentContainer && currentContainer.replaceWith(result);\n\n      // Execute personalized stuff after to refresh it\n      self.afterToRefresh();\n    }\n  },\n\n  beforeToRefresh: function beforeToRefresh() {\n    var self = this;\n\n    // Call beforeToRefresh of each children\n    for (var i = 0; i < self.children.length; i++) {\n      self.children[i].beforeToRefresh();\n    }\n  },\n\n  afterToRefresh: function afterToRefresh() {\n    var self = this;\n\n    if (bizagi.override && bizagi.override.enableExecuteRefreshAction === true) {\n      var formContainer = self.getFormContainer();\n      formContainer.tryToExecuteFunction(self.properties.id);\n    }\n\n    // Call beforeToRefresh of each children\n    for (var i = 0; i < self.children.length; i++) {\n      self.children[i].afterToRefresh();\n    }\n  },\n\n  /*\r\n     *   Re-execute children actions\r\n     */\n  triggerChildrenActions: function triggerChildrenActions() {\n    var self = this;\n    var children = self.children;\n\n    for (var i = 0, l = children.length; i < l; i++) {\n      var child = children[i];\n      var type = child.getElementType();\n\n      if (type === bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) {\n        child.triggerChildrenActions();\n      } else if (type === bizagi.rendering.element.ELEMENT_TYPE_RENDER) {\n        child.triggerRenderChange({ changed: false });\n      }\n    }\n  },\n\n\n  /*\r\n     * register actions container\r\n     */\n  registerActions: function registerActions(actions) {\n    var self = this;\n    var form = self.getFormContainer();\n\n    if (actions) {\n      form.actionController.buildActions(actions);\n    }\n  },\n\n  /*\r\n     * unregister children container\r\n     */\n  unregisterChildren: function unregisterChildren() {\n    var self = this;\n\n    var form = self.getFormContainer();\n    var children = self.children;\n\n    for (var i = 0, l = children.length; i < l; i++) {\n      var child = children[i];\n      var type = child.getElementType();\n\n      if (type === bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) {\n        child.unregisterChildren();\n      } else if (type === bizagi.rendering.element.ELEMENT_TYPE_RENDER) {\n        form.unregisterRender(child);\n      }\n    }\n  },\n  /*\r\n     * Replace child\r\n     */\n  replaceChild: function replaceChild(element) {\n    var self = this;\n\n    var children = self.children;\n\n    for (var i = 0, l = children.length; i < l; i++) {\n      var child = children[i];\n\n      if (child.properties.uniqueId == element.properties.uniqueId) {\n        children.splice(i, 1);\n        children.splice(i, 0, element);\n        break;\n      }\n    }\n  },\n  /*\r\n     * Gets child\r\n     */\n  getChildById: function getChildById(id) {\n\n    var self = this;\n\n    var children = self.children;\n\n    for (var i = 0, l = children.length; i < l; i++) {\n      var child = children[i];\n\n      if (child.properties.id == id) {\n        return child;\n      }\n    }\n\n    return null;\n  },\n\n  /**\r\n      * Restore appearance of container\r\n      * @param data\r\n      */\n  restoreAppearance: function restoreAppearance(data) {\n    var self = this;\n\n    self._super();\n\n    (data.elements || []).forEach(function (element) {\n      self.restoreElementAppearance(element.container || element.render);\n    });\n\n  },\n\n  /**\r\n      * Restore appearance of control\r\n      * @param data\r\n      */\n  restoreElementAppearance: function restoreElementAppearance(data) {\n    var self = this;\n    var element = self.getChildById(data.properties.id);\n\n    if (!!element) element.restoreAppearance(data);\n  },\n\n  /**\r\n      * Save visual changes of children\r\n      * @param data\r\n      */\n  saveChildrenVisualChanges: function saveChildrenVisualChanges(data) {\n    var self = this;\n    self.childrenVisualChanges = self.childrenVisualChanges || {};\n\n    (data.children || []).forEach(function (element) {\n      var type = element.getElementType();\n\n      if (type === bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) {\n        self.childrenVisualChanges[element.properties.id] = element.visualChanges;\n        self.saveChildrenVisualChanges(element);\n      } else if (type === bizagi.rendering.element.ELEMENT_TYPE_RENDER) {\n        self.childrenVisualChanges[element.properties.id] = element.visualChanges;\n      }\n    });\n\n  },\n\n  /**\r\n      * Restore visual changes of children\r\n      * @param data\r\n      */\n  restoreChildrenVisualChanges: function restoreChildrenVisualChanges(data) {\n    var self = this;\n\n    (data.children || []).forEach(function (element) {\n\n      var type = element.getElementType();\n      var visualChanges = self.childrenVisualChanges && self.childrenVisualChanges[element.properties.id] || {};\n\n      if (type === bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) {\n        element.visualChanges = visualChanges;\n        self.restoreChildrenVisualChanges(element);\n      } else if (type === bizagi.rendering.element.ELEMENT_TYPE_RENDER) {\n        element.visualChanges = visualChanges;\n      }\n\n    });\n  } });","/*\r\n*   Name: Bizagi Desktop Container Extension\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will redefine the container class to adjust to desktop devices\r\n*/\n\n// Extends itself\nbizagi.rendering.container.extend(\"bizagi.rendering.desktop.container\", {}, {\n\n  /*\r\n                                                                              *   Constructor\r\n                                                                              */\n  initializeData: function initializeData(params) {\n    // Call base\n    this._super(params);\n\n    // Checks if the container contains grids\n    this.containsGrid = this.countByRenderType(\"grid\") != 0;\n  },\n  /**\r\n      * createRenderElement desktop. Consider stakeholder's searches form and ignore multiselect control\r\n      * @param {*} element \r\n      */\n  createRenderElement: function createRenderElement(element) {\n    var self = this;\n    var formProperties = self.getFormContainer() && self.getFormContainer().properties;\n    if (formProperties.isSearchesQueryForm) {\n      var properties = element.render.properties;\n      if (properties.rangeQuery && properties.rangeQuery != \"none\") {\n        properties.xpath = properties.xpath + \"@\" + properties.rangeQuery;\n      }\n      if (properties.type !== \"multiselect\") {\n        self._super(element);\n      }\n    } else {\n      self._super(element);\n    }\n  },\n  /* \r\n     *   Resizes the container to adjust it to the container\r\n     */\n  resize: function resize(size) {\n    var self = this;\n    var container = self.container;\n    var width = container.width();\n\n    // Don't resize thin or invisible containers\n    if (width < 300) return;\n\n    // Don't resize if there are no grid renders\n    if (this.containsGrid == false) return;\n\n    $.each(self.children, function (i, child) {\n      $.when(child.isRendered()).\n      done(function () {\n        child.resize({ width: width });\n      });\n    });\n  },\n\n  /*\r\n     *   Starts waiting signal for async stuff\r\n     */\n  startLoading: function startLoading() {\n    var self = this;\n    var element = self.container;\n    if (element) {\n      element.startLoading({ delay: 250, overlay: true });\n    }\n  },\n\n  /*\r\n     *   Ends waiting for async stuff\r\n     */\n  endLoading: function endLoading() {\n    var self = this;\n\n    var element = self.container;\n    if (element) {\n      element.endLoading();\n    }\n  },\n\n  /*\r\n     *   Counts how many renders belong to the container with some render type\r\n     */\n  countByRenderType: function countByRenderType(type) {\n    var self = this;\n    var counter = 0;\n    for (var i = 0; i < self.children.length; i++) {\n      var child = self.children[i];\n      if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) {\n        counter += child.countByRenderType(type);\n      }\n\n      if (child.properties.type == type) counter++;\n    }\n\n    return counter;\n  },\n\n  /*\r\n     *   Counts how many renders belong to the container with some render type excluding by param\r\n     */\n  countByRenderTypeWithParams: function countByRenderTypeWithParams(type, param) {\n    var self = this;\n    var counter = 0;\n    for (var i = 0; i < self.children.length; i++) {\n      var child = self.children[i];\n      if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) {\n        counter += child.countByRenderType(type);\n      }\n\n      if (child.properties.type == type && param == child.properties.height) counter++;\n    }\n\n    return counter;\n  },\n\n  /*\r\n     *   Template method to implement in each device to customize the container's behaviour to show layout\r\n     */\n  configureLayoutView: function configureLayoutView() {\n    var self = this;\n    var container = self.container;\n  },\n\n  /*\r\n     * Return the sumatory of the height of all children\r\n     */\n  getChildrenSumHeight: function getChildrenSumHeight(excludeElement) {\n    var self = this;\n    var counter = 0;\n    for (var i = 0; i < self.children.length; i++) {\n      var child = self.children[i];\n      if (excludeElement && excludeElement == child.properties.type && child.properties.height == -1) {\n        // do nothing (exclude the element)\n      } else {\n        if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) {\n          var containerHeight = $(child.container).height();\n          counter += containerHeight != null ? containerHeight : 0;\n        } else if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_RENDER) {\n          var renderHeight = $(child.element).height();\n          counter += renderHeight != null ? renderHeight : 0;\n        }\n      }\n    }\n\n    return counter;\n  },\n\n  /*\r\n     * Return the count of children\r\n     */\n  getChildreCount: function getChildreCount() {\n    var self = this;\n\n    return self.children.length;\n  } });","/**\r\n * Render a new type of form called template\r\n *\r\n * @author Edward Morales\r\n */\n$.Class.extend(\"bizagi.rendering.formTemplate\", {\n\n  /**\r\n                                                   *   Constructor\r\n                                                   */\n  init: function init(params) {\n    this._super(params);\n    if (params.paramsRender && params.paramsRender.contextEvent) {\n      self.contextEvent = params.paramsRender.contextEvent;\n    }\n  },\n\n  /**\r\n      * Process controls on template\r\n      * @param template\r\n      * @param controls\r\n      * @return {*}\r\n      */\n  processTemplate: function processTemplate(template, controls) {\n    var regexControl = /\\{\\{([\\w:]*)\\s*(\\{[\"':,-\\[\\]\\w\\s]*\\})\\}\\}/g;\n    var regexRepeater = /\\{\\{(((repeater)\\s*(\\{[\"':,-\\[\\]\\w\\s]*\\}))|([\\/repeater]+:item)|(\\/repeater)|(repeater)|(separator))\\}\\}/g;\n\n    // Remove all repeaters key words\n    var processedTemplate = template.replace(regexRepeater, \"\");\n\n    // replace controls\n    processedTemplate = processedTemplate.replace(regexControl, function (match, g1, g2, offset, string) {\n      var parameters = JSON.parse(g2);\n\n      return controls[parameters.id] || '';\n    });\n\n    processedTemplate = processedTemplate.replace(/{{([\\w:]*)\\s*}}/g, function () {\n      return '';\n    });\n\n\n    return processedTemplate;\n  },\n\n  /**\r\n      * Render layout container\r\n      * @return {*}\r\n      */\n  renderContainer: function renderContainer() {\n    var self = this;\n    var layoutCollection = self.getRenderByType(\"layout\");\n    var layout = layoutCollection.length > 0 ? layoutCollection[0] : {};\n    var template = typeof layout.getTemplate == \"function\" ? layout.getTemplate() : \"\";\n    var css = typeof layout.getCss == \"function\" ? layout.getCss() : \"\";\n    var mode = self.getMode();\n    var layoutGuid = self.properties.layoutguid || Math.guid();\n\n    var controls = {};\n\n    /**\r\n                        * Render all elements within first layout container\r\n                        */\n    if (layout.children) {\n      $.each(layout.children, function (i, child) {\n        // ignore layoutPlaceholder control in execution\n        if (!(mode == 'execution' && child.properties.type == 'layoutPlaceholder')) {\n\n          var type = child.getElementType();\n          if (type == bizagi.rendering.element.ELEMENT_TYPE_RENDER) {\n            controls[child.properties.id] = child.renderElement();\n          }\n          if (type == bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) {\n            controls[child.properties.id] = child.renderContainerHtml();\n          }\n          self.childrenHash[child.properties.uniqueId] = child;\n        }\n      });\n    }\n\n    // Load css\n    bizagi.util.loadStyle(css, layoutGuid);\n\n    return self.processTemplate(template, controls);\n  },\n\n  /**\r\n      * Get the context in which loads the formTemplate\r\n      *\r\n      */\n  getContextEvent: function getContextEvent() {\n    return self.contextEvent;\n  } });","$.Class.extend(\"bizagi.rendering.layout\", {}, {\n\n  /**\r\n                                                 * Get html template\r\n                                                 * @return {*}\r\n                                                 */\n  getTemplate: function getTemplate() {\n    var self = this;\n    var mode = self.getMode();\n    var html = self.properties.html || \"\";\n\n    // Add a container, this is important in design to calculate the scroll \n    if (mode == 'design' && html) {\n      html = \"<div class='bz-design-template'>\" + html + \"</div>\";\n    }\n\n    return bizagi.util.stripslashes(html);\n  },\n\n  /**\r\n      * Get string css of layout container\r\n      * @return {*}\r\n      */\n  getCss: function getCss() {\n    var self = this;\n    var css = self.properties.css || \"\";\n\n    var mode = self.getMode();\n    if (mode == \"design\") {\n      css = css && css.desktop;\n    }\n\n    return bizagi.util.stripslashes(css);\n  },\n\n\n  /*\r\n      *   Template method to process each jquery object\r\n      *   must be overriden in each container\r\n      */\n  postRenderContainer: function postRenderContainer(container) {\n    var self = this;\n    var mode = self.getMode();\n\n    // Resolve rendering deferred\n    if (self.renderingDeferred)\n    self.renderingDeferred.resolve();\n\n    // Process children elements\n    self.container = container;\n    self.executeChildrenPostRender(container);\n\n    if (mode == \"execution\") {\n      // Apply handlers\n      self.configureHandlers();\n    }\n    if (mode == \"design\") {\n      // Configure view\n      self.configureDesignView();\n    }\n    if (mode == \"layout\") {\n      // Configure view\n      self.configureDesignView();\n      self.configureLayoutView();\n    }\n  } });","/*\r\n*   Name: BizAgi Accordion Container Class\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will define a accordion container class for all devices\r\n*/\n\n$.Class.extend(\"bizagi.rendering.accordion\", {}, {\n\n  /*\r\n                                                   *   Constructor\r\n                                                   */\n  initializeData: function initializeData(params) {\n    var self = this;\n\n    // Call base\n    this._super(params);\n\n    // Enumerate the children appending a property\n    $.each(self.children, function (i, child) {\n      child.properties.ordinal = i;\n    });\n  },\n\n\n  /*\r\n     *   Render the container layout\r\n     */\n  renderContainer: function renderContainer() {\n    var self = this;\n    var properties = self.properties;\n    var template = self.renderFactory.getTemplate(\"accordion\");\n\n    // Render the accordion\n    var html = $.fasttmpl(template, {\n      uniqueId: properties.uniqueId });\n\n\n    // Render children\n    html = self.replaceChildrenHtml(html, self.renderChildrenHtml());\n    return html;\n  } });","/*\r\n*   Name: BizAgi Accordion Item Container Class\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will define a accordion item class for all devices\r\n*/\n\n$.Class.extend(\"bizagi.rendering.accordionItem\", {}, {\n\n  /*\r\n                                                       *   Render the container layout\r\n                                                       */\n  renderContainer: function renderContainer() {\n    var self = this;\n    var properties = this.properties;\n    var template = self.renderFactory.getTemplate(\"accordionItem\");\n\n    // Render the accordionItem\n    var html = $.fasttmpl(template, {\n      id: properties.id,\n      ordinal: properties.ordinal,\n      displayName: properties.displayName,\n      orientation: properties.orientation,\n      uniqueId: properties.uniqueId });\n\n\n    // Render children\n    html = self.replaceChildrenHtml(html, self.renderChildrenHtml());\n    return html;\n  },\n\n  /*\r\n     *   Fires when the accordionItem is selected \r\n     */\n  activate: function activate() {\n    var self = this;\n    self.active = true;\n  },\n\n  /*  \r\n     *   Return the current focuses container\r\n     */\n  getFocus: function getFocus() {\n    var self = this;\n    var focus = self._super();\n    if (bizagi.util.isEmpty(focus) && self.active) {\n      focus = self.properties.id;\n    }\n\n    return focus;\n  } });","/*\r\n*   Name: Bizagi Group Container Class\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will define a group container class for all devices\r\n*/\n\n$.Class.extend(\"bizagi.rendering.group\", {}, {\n\n  /*\r\n                                               *   Constructor\r\n                                               */\n  initializeData: function initializeData(params) {\n    var self = this;\n\n    // Call base\n    self._super(params);\n\n    // Default properties\n    var properties = self.properties;\n\n    properties.helpText = properties.helpText || properties.displayName;\n\n    // Extend css property \n    properties.cssclass = properties.cssclass || \"cssClassContainer\";\n\n    properties.collapse = typeof properties.collapse != \"undefined\" && bizagi.util.parseBoolean(properties.collapse) ? true : false;\n  },\n\n  /*\r\n     *   Render the container layout\r\n     */\n  renderContainer: function renderContainer() {\n    var self = this;\n    var properties = this.properties;\n    var template = self.renderFactory.getTemplate(\"group\");\n\n    // Define icons\n    self.expandedIcon = self.getExpandedIcon();\n    self.collapsedIcon = self.getCollapsedIcon();\n\n    // Render the panel\n    var html = $.fasttmpl(template, {\n      expandedClassIcon: self.expandedIcon,\n      displayName: properties.displayName,\n      editable: properties.editable,\n      orientation: properties.orientation,\n      uniqueId: properties.uniqueId,\n      collapse: properties.collapse,\n      isDesign: self.getMode() !== \"execution\",\n      messageValidation: properties.messageValidation,\n      cssclass: properties.cssclass,\n      guid: properties.guid });\n\n\n    // Render children\n    html = self.replaceChildrenHtml(html, self.renderChildrenHtml());\n    return html;\n  },\n\n  /*\r\n     *   Returns the expanded icon\r\n     */\n  getExpandedIcon: function getExpandedIcon() {},\n\n  /*\r\n                                                  *   Returns the collapsed icon\r\n                                                  */\n  getCollapsedIcon: function getCollapsedIcon() {},\n\n  /* \r\n                                                    *   Expands or collapse the container \r\n                                                    */\n  toogleContainer: function toogleContainer(argument, bImmediate) {} });","/*\r\n *   Name: Bizagi Section Container Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define a section container class for all devices\r\n */\n\n$.Class.extend(\n\"bizagi.rendering.section\",\n{},\n{\n  /**\r\n   * Constructor\r\n   * @param {object} params - section information\r\n   */\n  initializeData: function initializeData(params) {\n    var self = this;\n\n    // Call base\n    self._super(params);\n\n    // Default properties\n    var properties = self.properties;\n\n    properties.helpText = properties.helpText || properties.displayName;\n    properties.displayAs = properties.displayAs || \"section\";\n  },\n\n  /**\r\n      * Render the trigger of the section.\r\n      * @returns string with html code.\r\n      */\n  renderContainer: function renderContainer() {\n    var self = this;\n    var properties = this.properties;\n    var template = this.renderFactory.getTemplate(\"section-header\");\n\n    // Render the section trigger\n    var html = $.fasttmpl(template, {\n      displayName: properties.displayName,\n      editable: properties.editable,\n      orientation: properties.orientation,\n      uniqueId: properties.uniqueId,\n      isDesign: self.getMode() !== \"execution\",\n      messageValidation: properties.messageValidation,\n      guid: properties.guid });\n\n    this.sectionContent = $(this.renderSectionContent())[0];\n    return html;\n  },\n\n  /**\r\n      * Render the content of the section.\r\n      * Overwritable on devices.\r\n      */\n  renderSectionContent: function renderSectionContent() {},\n\n  /**\r\n                                                             * Return the breadcrumb of the section.\r\n                                                             * @returns An array with breadcrumb. For example: [\"activity\", \"parent section\", \"child section\"]\r\n                                                             */\n  getBreadcrumb: function getBreadcrumb() {\n    var container = this;\n    var breadCrumb = [];\n\n    while (container) {\n      var properties = container.properties || {};\n      var params = container.params || {};\n\n      if (properties.type === \"section\") {\n        var displayName = properties.displayName ? properties.displayName : \"\";\n        breadCrumb.unshift(displayName);\n      } else if (params.type === \"form\") {\n        breadCrumb.unshift(this.getResourceByKey(\"render-section-breadcrumb-main-form\", \"Main form\"));\n      }\n      container = container.parent;\n    }\n    return breadCrumb;\n  },\n\n  /**\r\n      * Gets the display name of the previous section or form.\r\n      * @returns String with the display name\r\n      */\n  getParentDisplayName: function getParentDisplayName() {\n    var self = this;\n    var parent = self.getSectionParent(self.parent);\n    var displayName = \"\";\n\n    //TODO Improve this code implementation \n    if (parent.properties.type == \"form\") {\n      if (parent.properties.formtype && parent.properties.formtype == \"startform\") {\n        displayName = parent.params && parent.params.originalParams && parent.params.originalParams.displayName ? parent.params.originalParams.displayName : \"\";\n      } else\n      {\n        displayName = parent.properties.displayName || parent.params.displayName || parent.params.radNumber || parent.params.idCase;\n      }\n    } else {\n      displayName = parent.properties.displayName || \"\";\n    }\n\n    return displayName;\n  },\n\n  /**\r\n      * Gets the section's parent.\r\n      * @returns Object parent\r\n      */\n  getSectionParent: function getSectionParent(parent) {\n    if (parent.properties.type === \"section\" || !parent.parent) {\n      return parent;\n    } else {\n      return this.getSectionParent(parent.parent);\n    }\n  },\n\n  /**\r\n      * Gets if the section's  orientation is RTL.\r\n      * @returns Object\r\n      */\n  getSectionOrientationRTL: function getSectionOrientationRTL(obj) {\n    if (obj && obj.properties && obj.properties.orientation && obj.properties.orientation === \"ltr\") return false;\n    if (obj && obj.properties && obj.properties.orientation && obj.properties.orientation === \"rtl\") return true;\n    if (obj.parent) return this.getSectionOrientationRTL(obj.parent);\n    return false;\n  } });","/*\r\n*   Name: BizAgi Horizontal Container Class\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will define a tab item class for all devices\r\n*/\n\n\n$.Class.extend(\"bizagi.rendering.horizontal\", {}, {\n\n  /*\r\n                                                    *   Render the container layout\r\n                                                    */\n  renderContainer: function renderContainer() {\n    var self = this;\n    var properties = this.properties;\n    var template = self.renderFactory.getTemplate(\"horizontal\");\n\n    // Render the container\n    var html = $.fasttmpl(template, {\n      uniqueId: properties.uniqueId });\n\n\n    // Render children\n    html = self.replaceChildrenHtml(html, self.renderChildrenHtml());\n    return html;\n  } });","/*\r\n*   Name: Bizagi Panel Container Class\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will define a panel container class for all devices\r\n*/\n\n$.Class.extend(\"bizagi.rendering.panel\", {}, {\n\n  /*\r\n                                               *   Constructor\r\n                                               */\n  initializeData: function initializeData(params) {\n    var self = this;\n\n    // Call base\n    self._super(params);\n\n    // Override properties\n    var properties = self.properties;\n    properties.displayName = properties.displayName || \"\";\n\n    if (properties.type == \"nestedForm\") {\n      var formContainer = self.getFormContainer();\n      formContainer.rendersById[properties.idForm] = self;\n    }\n  },\n\n\n  /*\r\n     *   Render the container layout\r\n     */\n  renderContainer: function renderContainer() {\n    var self = this;\n    var properties = this.properties;\n    var template = self.renderFactory.getTemplate(\"panel\");\n\n    // Render the panel\n    var html = $.fasttmpl(template, {\n      displayName: properties.displayName,\n      loading: properties.loading,\n      message: properties.message,\n      orientation: properties.orientation,\n      uniqueId: properties.uniqueId,\n      cssClass: properties.cssclass });\n\n\n    // Render children\n    html = self.replaceChildrenHtml(html, self.renderChildrenHtml());\n    return html;\n  },\n\n  /*\r\n     *   Process the html rendering object\r\n     */\n  postRenderContainer: function postRenderContainer(panel) {\n    var self = this;\n    var properties = self.properties;\n\n    // Set height\n    if (properties.height) {\n      panel.height(properties.height);\n    }\n\n    // Call base\n    self._super(panel);\n  } });","/*\r\n*   Name: Bizagi Panel Container Class\r\n*   Author: David Romero\r\n*   Comments:\r\n*   -   This script will define a panel container class for all devices\r\n*/\n\n$.Class.extend(\"bizagi.rendering.contentPanel\", {}, {\n\n  /*\r\n                                                      *   Constructor\r\n                                                      */\n  initializeData: function initializeData(params) {\n    var self = this;\n\n    // Call base\n    self._super(params);\n\n    // Override properties\n    var properties = self.properties;\n    properties.displayName = properties.displayName || \"\";\n  },\n\n\n  /*\r\n     *   Render the container layout\r\n     */\n  renderContainer: function renderContainer() {\n    var self = this;\n    var properties = this.properties;\n    var template = self.renderFactory.getTemplate(\"contentPanel\");\n\n    // Render the panel\n    var html = $.fasttmpl(template, {\n      displayName: properties.displayName,\n      mode: self.getMode(),\n      uniqueId: properties.uniqueId,\n      isDesign: self.getMode() === \"design\",\n      messageValidation: properties.messageValidation,\n      cssClass: properties.cssclass,\n      guid: properties.guid });\n\n\n    // Render children\n    html = self.replaceChildrenHtml(html, self.renderChildrenHtml());\n    return html;\n  },\n\n  /*\r\n     *   Process the html rendering object\r\n     */\n  postRenderContainer: function postRenderContainer(panel) {\n    // Call base\n    this._super(panel);\n  } });","/**\r\n *   Name: Bizagi Panel Container Class\r\n *   Author: Bizagi UI Forms\r\n *   Comments:\r\n *   -   This script will define a panel container class for all devices\r\n */\n\n$.Class.extend(\"bizagi.rendering.searchForm\", {}, {\n\n  /*\r\n                                                    *   Render the container layout\r\n                                                    */\n  renderContainer: function renderContainer() {\n    var self = this;\n    var properties = this.properties;\n    var template = self.renderFactory.getTemplate(\"searchForm\");\n\n    if (properties.contexttype !== \"entity\" && self.parent) {\n      properties.contexttype = typeof self.parent.getContextType == 'function' ? self.parent.getContextType() : \"\";\n    }\n\n    // Render the panel\n    var html = $.fasttmpl(template, {\n      displayName: properties.displayName,\n      uniqueId: properties.uniqueId });\n\n\n    // Render children\n    html = self.replaceChildrenHtml(html, self.renderChildrenHtml());\n\n    // Render result\n    html = html.replaceFirstWithoutPatterns(\"{{result}}\", self.renderResult());\n\n    return html;\n  },\n\n  /*\r\n     *   Perform a search and render the results\r\n     */\n  performSearch: function performSearch(searchParams) {\n    var properties = this.properties;\n\n    // Set parameter to search\n    properties.searchParams = searchParams;\n\n    // Submit the search to the server\n    this.submitSearch();\n  },\n\n  /*\r\n     *   Submits the query to the server\r\n     */\n  submitSearch: function submitSearch() {\n    // Makes the results to update its contents\n    this.refreshResults();\n  },\n\n  /*\r\n     *   Returns a promise that will resolve when the element is ready\r\n     */\n  ready: function ready() {\n    return this.parent.ready();\n  },\n\n  /*\r\n     *   Method to fill the result data\r\n     *   (THIS IS CALLED WITHIN GRID RENDER SCOPE)\r\n     */\n  getRemoteData: function getRemoteData(params) {\n    var self = this;\n    var properties = self.properties;\n    var defer = new $.Deferred();\n\n    // Collect data\n    var data = self.collectSearchValues();\n\n    if (bizagi.util.isMapEmpty(data)) {\n      bizagi.showMessageBox(this.getResource(\"render-search-advanced-no-filters\"), this.getResource(\"render-form-dialog-box-search\"), \"error\");\n      return null;\n    }\n\n    params.rows = properties.searchParams && properties.searchParams.maxRecords && properties.searchParams.maxRecords > 0 ? properties.searchParams.maxRecords : params.rows;\n\n    // The Grid only support one row per page in smartphone (DRAGON-41733 / QAF-3916)         \n    if (properties.searchParams && typeof properties.searchParams.maxRows !== \"undefined\") {\n      params.rows = properties.searchParams.maxRows || params.rows;\n    }\n\n    // Resolve with remote data\n    self.dataService.submitSearch($.extend(params, {\n      url: properties.dataUrl,\n      idRender: properties.idRender,\n      idPageCache: properties.idPageCache,\n      idSearchForm: properties.id,\n      allowFullSearch: properties.searchParams.allowFullSearch ? properties.searchParams.allowFullSearch : null,\n      maxRecords: properties.searchParams.maxRecords > 0 ? properties.searchParams.maxRecords : null,\n      criteria: data })).\n\n    done(function (response) {\n\n      // Resolve with fetched data    \n      properties.page = response.page;\n      properties.records = response.records;\n      properties.totalPages = response.totalPages || 0;\n\n      //In tablets are allowed about 10000 records as maximum\n      if (response.records > 10000) {\n        properties.deviceMaxRecordsExceeded = true;\n        response.deviceMaxRecordsExceeded = true;\n      } else {\n        delete properties.deviceMaxRecordsExceeded;\n      }\n\n      defer.resolve(response);\n\n      // Call virtual method\n      self.onSearchFinished();\n    }).fail(function (errorObject) {\n      bizagi.showErrorAlertDialog = false;\n      if (errorObject.responseText) {\n        try {\n          var message = JSON.parse(errorObject.responseText).message;\n          bizagi.showMessageBox(message, \"\", \"error\");\n        } catch (e) {\n        }\n      }\n      defer.reject();\n    });\n\n    return defer.promise();\n  },\n\n  /*\r\n     *   Iterate through all the renders in the container and fills the hashtable\r\n     *   - Overriden because server needs this in array\r\n     */\n  collectSearchValues: function collectSearchValues() {\n    var self = this;\n\n    // Collect data\n    var data = {};\n    this.collectRenderValues(data);\n\n    // Changes to array\n    var submitArray = [];\n    for (key in data) {\n      var xpath = key;\n      var value = data[key];\n      var operation = self.getCriteriaOperation(self.getRender(xpath));\n      var criteriaData = {};\n      if (!bizagi.util.isEmpty(value)) {\n        criteriaData[\"xpath\"] = xpath;\n        criteriaData[\"value\"] = value;\n        criteriaData[\"operation\"] = operation;\n        submitArray.push(criteriaData);\n      }\n    }\n\n    return submitArray;\n  },\n\n  /*\r\n     *   This method find out the criterial operation to be executed according to\r\n     *   data type. Text renders use LIKE operation, but other data types such like\r\n     *   numerics use exact match operatiors\r\n     */\n  getCriteriaOperation: function getCriteriaOperation(render) {\n    var self = this;\n    var properties = self.properties;\n\n    var operation = \"EQUALS\";\n    if (render.properties.dataType == \"15\") {\n      if (typeof render.properties.typeSearch === \"undefined\" || render.properties.typeSearch === \"approx\") {\n        if (properties.allowFullSearch) {\n          operation = \"FULLLIKE\";\n        } else {\n          operation = \"LIKE\";\n        }\n      }\n    }\n    return operation;\n  },\n\n  /*\r\n     *   Render the result controls for the query\r\n     *   Resolved in each device\r\n     */\n  renderResult: function renderResult() {\n  },\n\n  /*\r\n     *   Refresh the result panel, making it to query data with current criteria\r\n     */\n  refreshResults: function refreshResults() {\n  },\n\n  /*\r\n     *   Function to parse the dataType\r\n     */\n  parseAdditionalProperties: function parseAdditionalProperties(dataType) {\n\n    // Number\n    if (dataType == 1 || dataType == 2 || dataType == 3 ||\n    dataType == 4 || dataType == 6 || dataType == 7 ||\n    dataType == 10 || dataType == 11) {\n      return { type: \"columnNumber\" };\n    }\n\n    // Oracle Number\n    if (dataType == 29) {\n      return { type: \"columnNumberScientificNotation\" };\n    }\n\n    // Money\n    if (dataType == 8) {\n      return { type: \"columnMoney\" };\n    }\n\n    // Date\n    if (dataType == 12 || dataType == 13) {\n      return { type: \"columnDate\" };\n    }\n\n    // Boolean\n    if (dataType == 5) {\n      return { type: \"columnBoolean\" };\n    }\n\n    // Text\n    return { type: \"columnText\" };\n  },\n\n  /*\r\n     *\r\n     */\n  onSearchFinished: function onSearchFinished() {\n    // Empty function, overrided for Tablet version for now\n  } });","/*\r\n *   Name: BizAgi Tab Container Class\r\n *   Author: Diego Parra\r\n *   Comments:\r\n *   -   This script will define a tab container class for all devices\r\n */\n\n$.Class.extend(\"bizagi.rendering.tab\", {}, {\n\n  /*\r\n                                              *   Constructor\r\n                                              */\n  initializeData: function initializeData(params) {\n    var self = this;\n\n    // Call base\n    this._super(params);\n\n    // Default properties\n    var properties = self.properties;\n    properties.helpText = properties.helpText || properties.displayName;\n\n    // Extend css property\n    properties.cssclass = properties.cssclass || \"\";\n  },\n\n  /*\r\n      *   Render the container layout\r\n      */\n  renderContainer: function renderContainer() {\n    var self = this;\n    var properties = this.properties;\n    var tabItems = $.map(self.children, function (child, key) {\n      child.properties.counter = key;\n      child.properties.tooltip = child.properties.tooltip || child.properties.displayName || \"\";\n      return child.properties;\n    });\n    var template = self.renderFactory.getTemplate(\"tab\");\n    var mode = self.getMode();\n\n    // Render the tab\n    var html = $.fasttmpl(template, {\n      id: properties.id,\n      tabs: tabItems,\n      mode: mode,\n      isDesign: self.getMode() !== \"execution\",\n      editable: properties.editable,\n      tabOrientation: properties.orientation,\n      uniqueId: properties.uniqueId,\n      cssclass: properties.cssclass });\n\n\n    // Get active container based on focus\n    var activeTab = self.activeTab = self.getActiveTab();\n\n    // Render children\n    for (var i = 0, length = self.children.length; i < length; i++) {\n      // Load on demand other tabs besides the first one\n      self.children[i].properties.loadOnDemand = i != activeTab;\n    }\n    html = self.replaceChildrenHtml(html, self.renderChildrenHtml());\n    return html;\n  },\n\n  /*\r\n      *   Return the active tab containing the focus, or the first tab\r\n      */\n  getActiveTab: function getActiveTab() {\n    var self = this;\n    var properties = self.properties;\n    var formParams = this.getFormContainer().getParams();\n    var mode = self.getMode();\n\n    if (mode === \"execution\") {\n      if (!formParams.isRefresh && properties.activeTab) {\n        self.getFormContainer().setFocusedElement(properties.activeTab);\n      }\n    }\n\n    var selectedTabs = formParams && formParams.selectedTabs ? formParams.selectedTabs : {};\n\n    // Fetch from selected tabs collection\n    if (selectedTabs[self.properties.id] >= 0) {\n      return selectedTabs[self.properties.id];\n    }\n\n    // Check for focused elements\n    for (var i = 0, length = self.children.length; i < length; i++) {\n      // Load on demand other tabs besides the first one\n      if (self.children[i].containsFocusedElement()) return i;\n    }\n    return 0;\n  },\n\n  /**\r\n      * Update position of tab\r\n      * @param index\r\n      */\n  setActiveTab: function setActiveTab(index) {\n    var self = this;\n\n    self.triggerHandler(\"selected\", { index: index, tab: self.children[index] });\n\n    if (self.children[index]) {\n      var form = self.getFormContainer();\n\n      self.children[index].activate();\n      self.activeTab = index;\n\n      var selectedTab = {};\n      selectedTab[self.children[index].parent.properties.id] = index;\n      form.setParam(\"selectedTabs\", selectedTab);\n    }\n  } });","/**\r\n *   Name: Bizagi Tab Item Container Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define a tab item class for all devices\r\n */\n\n$.Class.extend(\"bizagi.rendering.tabItem\", {}, {\n\n  /*\r\n                                                 *   Render the container layout\r\n                                                 */\n  renderContainer: function renderContainer() {\n    var self = this;\n    var properties = this.properties;\n    var template = self.renderFactory.getTemplate(\"tabItem\");\n\n    // Render the tabItem\n    var html = $.fasttmpl(template, {\n      id: properties.id,\n      uniqueId: properties.uniqueId,\n      counter: properties.counter,\n      tabOrientation: properties.orientation,\n      isDesign: self.getMode() !== \"execution\" });\n\n\n    // Render content\n    html = self.renderTabContent(html);\n\n    return html;\n  },\n\n  /*\r\n     * Renders the tab content\r\n     */\n  renderTabContent: function renderTabContent(html) {\n    // Render children\n    return this.replaceChildrenHtml(html, this.renderChildrenHtml());\n  },\n\n  /*\r\n     *   Fires when the tab is selected \r\n     */\n  activate: function activate() {\n    this.active = true;\n  },\n\n  /*  \r\n     *   Return the current focuses container\r\n     */\n  getFocus: function getFocus() {\n    var self = this;\n    var focus = self._super();\n    if (bizagi.util.isEmpty(focus) && self.active) {\n      focus = self.properties.id;\n    }\n\n    return focus;\n  },\n\n  /*\r\n     *   Return true if this tab contains the active focused element\r\n     */\n  containsFocusedElement: function containsFocusedElement() {\n    var self = this;\n    var focus = self.getFormContainer().getFocusedElement();\n\n    if (focus) {\n\n      // Locate element\n      if (focus.xpath) {\n        // Search by xpath and id\n        var elements = self.getFormContainer().getRenders(focus.xpath);\n        var element;\n\n        $.each(elements, function (i, item) {\n          // Just select editable control\n          if (item.properties.id == focus.id && item.properties.editable) {\n            element = item;\n          }\n        });\n      } else {\n        // Search just using id\n        var element = self.getFormContainer().getContainer(focus) || self.getFormContainer().getRenderById(focus);\n      }\n\n      // Search element parent\n      if (element) {\n        while (element.parent) {\n          if (element.properties.id == self.properties.id || element.parent.properties.id == self.properties.id) return true;\n          element = element.parent;\n        }\n      }\n    }\n\n    return false;\n  } });","/*\r\n *   Name: Bizagi Render Base Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define a base render class with common stuff related to all renders\r\n */\n\n$.Class.extend(\"bizagi.rendering.render.base\", {}, {\n\n  /**\r\n                                                      * Method to process the render the layout\r\n                                                      * @param {boolean} isLabelFormat\r\n                                                      * @param {string} format\r\n                                                      */\n  processLayout: function processLayout(isLabelFormat, format) {\n    var properties = this.properties;\n\n    if (typeof isLabelFormat !== \"boolean\") {\n      console.warm(\"error calling processLayout, 'isLabelFormat' is not boolean\");\n      return;\n    }\n\n    if (isLabelFormat) {\n      this.processLabelLayout(format);\n    } else {\n      this.processControlLayout(format);\n\n      // Set required and visiblity\n      properties.required = typeof properties.required !== \"undefined\" ? bizagi.util.parseBoolean(properties.required) : false;\n      var visible = typeof properties.visible !== \"undefined\" ? bizagi.util.parseBoolean(properties.visible) : true;\n\n      if (properties.required) {\n        this.changeRequired(properties.required);\n      }\n\n      if (!visible) {\n        this.changeVisibility(visible);\n      }\n    }\n  },\n\n  /**\r\n      * Method to process the label in the layout\r\n      * @param {} format\r\n      * @returns {}\r\n      */\n  processLabelLayout: function processLabelLayout(format) {\n    var $label = this.getLabel();\n    if ($label == null) return;\n\n    // Set customizations\n    format = format || {};\n    if (typeof format.bold === \"undefined\") {\n      format.bold = true; // Default value\n    }\n\n    this.changeBackgroundColor(format.background).\n    changeFontColor($label, format.color).\n    changeFontBold($label, format.bold).\n    changeFontSize($label, format.size).\n    changeFontItalic($label, format.italic).\n    changeTextDecoration($label, (format.underline ? \"underline\" : \"\") + (format.strikethru ? \" line-through\" : \"\"));\n  },\n\n  /**\r\n      * Method to process the control in the layout\r\n      * @param {} format\r\n      * @returns {}\r\n      */\n  processControlLayout: function processControlLayout(format) {\n    var $control = this.getControl();\n    var $elements = this.getElementsToStylize($control);\n\n    // Set customizations\n    format = format || {};\n\n    this.changeFontColor($elements, format.color).\n    changeFontBold($elements, format.bold).\n    changeFontItalic($elements, format.italic).\n    changeFontSize($elements, format.size).\n    changeTextDecoration($elements, (format.underline ? \"underline\" : \"\") + (format.strikethru ? \" line-through\" : \"\"));\n  },\n\n  /**\r\n      * Customizes render color\r\n      * @param {} color\r\n      * @returns {}\r\n      */\n  changeColor: function changeColor(color) {\n    var $label = this.getLabel();\n    var $control = this.getControl();\n    var $elements = this.getElementsToStylize($control);\n\n    return this.\n    changeFontColor($label, color).\n    changeFontColor($elements, color);\n  },\n\n  /**\r\n      * Customizes render color\r\n      * @param {} $element\r\n      * @param {} color\r\n      * @returns {}\r\n      */\n  changeFontColor: function changeFontColor($element, color) {\n    if ($element === undefined) return this;\n    if (color === undefined) return this;\n\n    var style = color !== \"none\" ? color : \"\";\n    $element.css(\"color\", style);\n\n    return this;\n  },\n\n  /**\r\n      * Customizes the font size property\r\n      * @param {} $element\r\n      * @param {} size\r\n      * @returns {}\r\n      */\n  changeFontSize: function changeFontSize($element, size) {\n    if (size === undefined) return this;\n    if ($element === undefined) return this;\n\n    if (size !== \"0\") {\n      var newFontSize = 100 + Number(size) * 10 + \"%\";\n      $element.css(\"font-size\", newFontSize);\n    }\n\n    return this;\n  },\n\n  /**\r\n      * Customizes the font Strikethrough or underline property\r\n      * @param {} $element\r\n      * @param {} textDecoration\r\n      * @returns {}\r\n      */\n  changeTextDecoration: function changeTextDecoration($element, textDecoration) {\n    if (textDecoration === undefined) return this;\n    if ($element === undefined) return this;\n\n    textDecoration && $element.css(\"text-decoration\", textDecoration);\n\n    return this;\n  },\n\n  /**\r\n      * Customizes the font italic style\r\n      * @param {} $element\r\n      * @param {} italic\r\n      * @returns {}\r\n      */\n  changeFontItalic: function changeFontItalic($element, italic) {\n    var style = bizagi.util.parseBoolean(italic) ? \"italic\" : \"normal\";\n\n    $element.css(\"font-style\", style);\n\n    return this;\n  },\n\n  /**\r\n      * Customizes the font weight\r\n      * @param {} $label\r\n      * @param {} bold\r\n      * @returns {}\r\n      */\n  changeFontBold: function changeFontBold($label, bold) {\n    var style = bizagi.util.parseBoolean(bold) ? \"bold\" : \"normal\";\n\n    $label.css(\"font-weight\", style);\n\n    return this;\n  },\n\n  /**\r\n      * Customizes render background color\r\n      * @param {} color\r\n      * @returns {}\r\n      */\n  changeBackgroundColor: function changeBackgroundColor(color) {\n    if (typeof color === \"undefined\") return this;\n\n    if (color !== \"none\") {\n      this.element.css(\"background-color\", color);\n    } else {\n      this.element.css(\"background-color\", \"\");\n    }\n\n    return this;\n  },\n\n  /**\r\n      * Customizes render cell background color\r\n      * @param {} color\r\n      * @returns {}\r\n      */\n  changeCellBackgroundColor: function changeCellBackgroundColor(color) {\n    return this.getCellBackgroundFunction(this.properties.editable.toString(), this.properties.type)(color);\n  },\n\n  getCellBackgroundFunction: function getCellBackgroundFunction(editable, type) {\n    var options = {\n      'true': { //editable\n        'columnDate': this.changeInputBackgroundColor.bind(this) },\n\n      'false': { //no editable\n        'default': this.changeBackgroundColor.bind(this) //labels o valores no editables \n      },\n      'default': this.changeBackgroundColor.bind(this) //labels o valores no editables \n    };\n\n    return options[editable][type] || options['default'];\n  },\n\n  changeInputBackgroundColor: function changeInputBackgroundColor(color) {\n    if (typeof color === \"undefined\") return this;\n\n    if (color !== \"none\") {\n      $(\".bz-input-icon\", this.element).css(\"background-color\", color);\n    } else {\n      $(\".bz-input-icon\", this.element).css(\"background-color\", \"\");\n    }\n\n    return this;\n  },\n\n  /**\r\n      * This method just make a toggle of red label indicator\r\n      * @argument {boolean} argument\r\n      */\n  changeRequiredLabel: function changeRequiredLabel() {\n  },\n\n  /**\r\n      * Change cell required and attach bindings\r\n      * @param argument\r\n      */\n  changeCellRequired: function changeCellRequired(argument) {\n    this.changeRequired(argument);\n  },\n\n  /**\r\n      * \r\n      */\n  getRTLAlign: function getRTLAlign(align) {\n    if (typeof align == \"undefined\" || align == \"\") {\n      return \"default\";\n    }\n    return align;\n  },\n\n  /**\r\n      * TODO: This override should be removed after genome, just because the align shoudnt be depend of the display type\r\n      */\n  getDefaultLabelAlign: function getDefaultLabelAlign() {\n    return \"default\";\n  },\n\n  /**\r\n      * TODO: This override should be removed after genome, just because the align shoudnt be depend of the display type\r\n      */\n  getDefaultValueAlign: function getDefaultValueAlign() {\n    return \"default\";\n  } });","/*\r\n*   Name: Bizagi Desktop Render Extension\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will redefine the render class to adjust to desktop devices\r\n*/\n\n// Extends from render base\nbizagi.rendering.render.extend(\"bizagi.rendering.desktop.render\", {}, {\n\n  /*\r\n                                                                        *   Template method to implement in each device to customize each render after processed\r\n                                                                        */\n  postRender: function postRender() {\n    var self = this;\n    var properties = self.properties;\n\n    // Call base\n    this._super();\n\n    // Add classic retype validation\n    if (properties.retype == \"double\") {\n      self.processClassicRetype();\n    }\n\n    // Add hint feature\n    if (properties.hint) {\n      self.processRenderHint();\n    }\n\n    // Hide icons if no helptext is provided\n    if (properties.helpText && properties.helpText.length > 0) {\n      self.showIcon(\"help\");\n    }\n  },\n\n  postRenderReadOnly: function postRenderReadOnly() {\n    var self = this;\n    var properties = self.properties;\n\n    if (properties.helpText && properties.helpText.length > 0) {\n      self.showIcon(\"help\");\n    }\n  },\n\n  // #region Process Layout\n  /*\r\n  *   Method to process the render the layout\r\n  */\n  processLayout: function processLayout(isLabelFormat, format) {\n    this._super(isLabelFormat, format);\n  },\n\n  // #endregion\n\n  /*\r\n  *   Starts waiting signal for async stuff\r\n  */\n  startLoading: function startLoading() {\n    var self = this;\n    var element = self.element;\n    if (element) {\n      element.startLoading({ delay: 250, overlay: true });\n    }\n  },\n\n  /*\r\n     *   Ends waiting for async stuff\r\n     */\n  endLoading: function endLoading() {\n    var self = this;\n\n    var element = self.element;\n    if (element) {\n      element.endLoading();\n    }\n  },\n\n  /*\r\n     *   Template method to get the label element\r\n     */\n  getLabel: function getLabel() {\n    var self = this;\n    if (!self.label) {\n      self.label = $(\".ui-bizagi-label\", self.element || self.observableElement);\n    }\n    return self.label;\n  },\n\n  /*\r\n     *   Template method to get the control element\r\n     */\n  getControl: function getControl() {\n    var self = this;\n    if (!self.control || self.control instanceof jQuery && self.control.length === 0) {\n      self.control = $(\".ui-bizagi-render-control\", self.element || self.observableElement);\n    }\n    if (!self.control || self.control.length == 0) {\n      return null;\n    }\n    return self.control;\n  },\n\n  /*\r\n     *   Template method to get the control filler element\r\n     */\n  getControlFiller: function getControlFiller() {\n    var self = this;\n    if (!self.controlFiller) self.controlFiller = $(\".ui-bizagi-control\", self.element || self.observableElement);\n    return self.controlFiller;\n  },\n\n  /* \r\n     *   Adds a validation message to the render\r\n     */\n  setValidationMessage: function setValidationMessage(message) {\n    var self = this;\n\n    // Call base\n    self._super(message);\n\n    // DiegoP: Please don't remove this line again, this is intended to avoid performance problems in IE8\n    if (!bizagi.util.isIE8()) {\n\n      // Wait until element is ready\n      $.when(self.ready()).\n      done(function () {\n        var element = self.element;\n\n        // Set tooltip\n        var iconError = $(\".ui-bizagi-render-icon-error\", element);\n        var iconHelp = $(\".ui-bizagi-render-icon-help\", element);\n\n        if (message && message.length > 0) {\n          self.showIcon(\"error\");\n          if (bizagi.util.isIE9()) {\n            iconError.attr(\"data-title\", message);\n          } else {\n            iconError.attr(\"title\", message);\n          }\n\n          iconError.tooltip();\n          $(iconError).parent().removeClass('ui-hidden');\n\n          if (self.isNewRenderForm)\n          $(iconError).parent().removeClass('bz-forms-icons__hidden');\n\n        } else {\n          self.hideIcon(\"error\");\n          if ($(iconHelp).text() == \"\") {\n            $(iconError).parent().addClass('ui-hidden');\n\n            if (self.isNewRenderForm)\n            $(iconError).parent().addClass('bz-forms-icons__hidden');\n          }\n        }\n      });\n    }\n  },\n\n  /* \r\n     *   Attach handlers to implement the classic retype option\r\n     */\n  processClassicRetype: function processClassicRetype() {},\n\n  /* \r\n                                                            *   Attach effects to implement render hint\r\n                                                            */\n  processRenderHint: function processRenderHint() {\n    var self = this,\n    element = self.element,\n    properties = self.properties;\n\n    var input = $(\"input[type!=hidden], select\", element);\n    if (!input) return;\n\n    var span = input.parent();\n    if (!span) return;\n\n    // Add hint label\n    span.prepend('<label class=\"ui-bizagi-render-hint\">' + properties.hint + '</label>');\n    var hint = $(\".ui-bizagi-render-hint\", element);\n\n    // Bind events\n    input.focus(function () {\n      hint.addClass(\"focus\");\n    });\n    input.keypress(function () {\n      hint.addClass(\"has-text\").removeClass(\"focus\");\n    });\n    input.blur(function () {\n      if ($(this).val() == \"\") {\n        hint.removeClass(\"has-text\").removeClass(\"focus\");\n      }\n    });\n    hint.click(function () {\n      input.focus();\n    });\n  },\n\n  /**\r\n      * Focus on the current element\r\n      * @param {*} time \r\n      */\n  focus: function focus(time) {\n    var render = this;\n\n    while (render) {\n      var properties = render.properties || {};\n      var params = render.params || {};\n      if (properties.type === \"section\") {\n        render.openAutomatically();\n        break;\n      } else if (properties.type === \"form\" || params.type === \"form\") {\n        var elementForm = render.getElement()[0];\n        var containerForm = elementForm ? elementForm.querySelector(\".ui-bizagi-container-form-wrapper-animation\") : null;\n        if (containerForm !== null && containerForm !== undefined && containerForm.style.transform !== \"\") {\n          containerForm.style.transform = \"\";\n          $(\".ui-bizagi-main-section\", containerForm)[0].classList.remove(\"ui-bizagi-section-animation-fade-out\");\n          var form = this.getFormContainer() || {};\n          var sections = form.rendersByType ? form.rendersByType[\"section\"] : [];\n          if (sections.length > 0) sections[0].closeAllSections();\n        }\n      }\n      render = render.parent;\n    }\n\n    this._super(time);\n  },\n\n  /*\r\n     *   Return the right display option class\r\n     */\n  getDisplayOptionClass: function getDisplayOptionClass(displayType) {\n    // Set display type\n    if (displayType == \"normal\" ||\n    displayType == \"both\") {\n      return \"ui-bizagi-render-display-normal\";\n\n    } else if (displayType == \"vertical\") {\n      return \"ui-bizagi-render-display-vertical\";\n\n    } else if (displayType == \"reversed\") {\n      return \"ui-bizagi-render-display-reversed\";\n\n    } else if (displayType == \"verticalReversed\") {\n      return \"ui-bizagi-render-display-vertical-reversed\";\n\n    } else if (displayType == \"label\") {\n      return \"ui-bizagi-render-display-label\";\n\n    } else if (displayType == \"value\") {\n      return \"ui-bizagi-render-display-value\";\n    }\n    return \"\";\n  },\n\n  /*\r\n     *   Customizes render display type with custom css classes\r\n     */\n  changeDisplayOption: function changeDisplayOption(displayType) {\n    var self = this,\n    el = self.element;\n\n    // Call base\n    self._super(displayType);\n\n    // Clean old display type\n    el.removeClass(\"ui-bizagi-render-display-normal ui-bizagi-render-display-vertical ui-bizagi-render-display-reversed\").\n    removeClass(\"ui-bizagi-render-display-vertical-reversed ui-bizagi-render-display-label ui-bizagi-render-display-value\");\n\n    // Set display type\n    el.addClass(self.getDisplayOptionClass(displayType));\n  },\n\n  /*\r\n     *   Return the right align class\r\n     */\n  getAlignClass: function getAlignClass(alignType) {\n    // Set label align\n    if (alignType == \"left\") {\n      return \"ui-bizagi-render-align-left\";\n\n    } else if (alignType == \"center\") {\n      return \"ui-bizagi-render-align-center\";\n\n    } else if (alignType == \"right\") {\n      return \"ui-bizagi-render-align-right\";\n    } else if (alignType == \"justify\") {\n      return \"ui-bizagi-render-align-justify\";\n    }\n    return \"\";\n  },\n\n  /*\r\n     *   Customizes render label align\r\n     */\n  changeLabelAlign: function changeLabelAlign(alignType) {\n    var self = this;\n\n    // Get label\n    var label = self.getLabel();\n\n    // Remove old label align\n    label.removeClass(\"ui-bizagi-render-align-left ui-bizagi-render-align-center ui-bizagi-render-align-right\");\n\n    // Set label align\n    label.addClass(self.getAlignClass(alignType));\n\n    // Call base\n    this._super(alignType);\n  },\n\n  /*\r\n     *   Customizes render value align\r\n     */\n  changeValueAlign: function changeValueAlign(alignType) {\n    var self = this;\n\n    // Get control\n    var controlFiller = self.getControlFiller();\n\n    // Remove old value align\n    controlFiller.removeClass(\"ui-bizagi-render-align-left ui-bizagi-render-align-center ui-bizagi-render-align-right\");\n\n    // Set value align\n    controlFiller.addClass(self.getAlignClass(alignType));\n\n    // Call base\n    this._super(alignType);\n  },\n\n  /* Return the icons container*/\n  getContainerIcons: function getContainerIcons() {\n    return $(\".ui-bizagi-render-icons\", this.element);\n  },\n\n  /*\r\n     *   Show a notification icon\r\n     */\n  showIcon: function showIcon(icon) {\n    var self = this;\n    var $containerIcons = self.getContainerIcons();\n    var $errorIcon = $(\".ui-bizagi-render-icon-error\", $containerIcons);\n    var $helpIcon = $(\".ui-bizagi-render-icon-help\", $containerIcons);\n    var visibleIcon;\n\n    $containerIcons.removeClass('ui-hidden');\n\n    if (self.isNewRenderForm)\n    $containerIcons.removeClass('bz-forms-icons__hidden');\n\n    if (icon == \"error\") {\n      visibleIcon = $errorIcon.css(\"display\", \"inline-block\");\n    }\n    if (icon == \"help\") {\n      visibleIcon = $helpIcon.css(\"display\", \"inline-block\");\n    }\n\n    if ($helpIcon.is(':visible') && $errorIcon.is(':visible')) {\n      $containerIcons.css({ 'width': '48px', 'min-width': \"48px\" });\n    } else if ($helpIcon.is(':visible') || $errorIcon.is(':visible')) {\n      $containerIcons.css({ 'width': '24px', 'min-width': \"24px\" });\n    }\n\n    // Make sure that icon container is visible\n    self.getControlFiller().addClass(\"ui-bizagi-state-show-icons\");\n\n    // Add hover handler in order to lazy-add the tooltip plugin\n    visibleIcon.mouseover(function (e) {\n      e.preventDefault();\n      e.stopPropagation();\n      if (visibleIcon.data(\"tooltip\") === undefined) {\n        // Apply tooltip plugin\n        visibleIcon.tooltip({\n          tooltipClass: 'ui-widget-content ui-help-tooltip',\n          items: visibleIcon.attr(\"title\") ? \".ui-icon[title]\" : \".ui-icon[data-title]\",\n          content: function content() {\n            var reg = /<\\s*script[^>]*>[\\s\\S]*?(<\\s*\\/script[^>]*>|$)/ig;\n            var element = $(this);\n            var replaceHTML = !element.hasClass(\"ui-bizagi-render-icon-error\");\n            //set the title as 'content' to apply possible html tags or styles included in original title\n            if (element[0] && element[0].attributes[\"data-title\"]) {\n              var text = element[0].attributes[\"data-title\"].value;\n              if (reg.test(text)) {\n                return bizagi.util.sanitizeHTML(text);\n              } else {\n                return text;\n              }\n            } else if (element[0] && element[0].title) {\n              var _title = element[0].title;\n              element[0].title = \"\";\n              if (reg.test(_title)) {\n                return bizagi.util.sanitizeHTML(_title);\n              } else {\n                return _title;\n              }\n            }\n          } });\n\n\n        visibleIcon.tooltip(\"open\");\n        $(\".ui-help-tooltip\").css(\"z-index\", $.ui.dialog.prototype._getMaxZindex());\n      }\n    });\n  },\n\n  /*\r\n     *   Show a notification icon\r\n     */\n  hideIcon: function hideIcon(icon) {\n    var self = this;\n    var containerIcons = $(\".ui-bizagi-render-icons\", self.element);\n    var errorIcon = $(\".ui-bizagi-render-icon-error\", self.element);\n    var helpIcon = $(\".ui-bizagi-render-icon-help\", self.element);\n\n    if (helpIcon.is(':visible') && errorIcon.is(':visible')) {\n      containerIcons.css({ 'width': '24px', 'min-width': \"24px\" });\n    }\n\n    if (icon == \"error\") {\n      $(\".ui-bizagi-render-icon-error\", self.element).css(\"display\", \"none\");\n    }\n    if (icon == \"help\") {\n      $(\".ui-bizagi-render-icon-help\", self.element).css(\"display\", \"none\");\n    }\n\n    // Hide icon container if no icons are shown\n    var iconContainer = $(\".ui-bizagi-render-icons span\", self.element);\n    if (iconContainer.length > 0 && iconContainer[0].style.display != \"none\") {\n      self.getControlFiller().removeClass(\"ui-bizagi-state-show-icons\");\n    }\n  },\n\n  /**\r\n      * Execute design only methods\r\n      */\n  performDesignModeMethods: function performDesignModeMethods() {\n    // Set all controls read-only\n    var control = this.getControl();\n\n    // Valid control\n    if (control !== null) {\n      $(\"input, select, button, textarea\", control).attr(\"readonly\", true);\n    }\n\n    // Call base\n    this._super();\n  } });","/*\r\n*   Name: Bizagi Render CollectionNavigator\r\n*   Author: UI Forms Team\r\n*   Comments:\r\n*   -   This script will define basic stuff for collection navigator renders\r\n*/\n\n$.Class.extend(\"bizagi.rendering.collectionnavigator\", {}, {\n\n  initializeData: function initializeData(params) {\n    var self = this;\n\n    self._super(params);\n\n    var properties = self.properties;\n    properties.allowAdd = typeof properties.allowAdd != \"undefined\" ? bizagi.util.parseBoolean(properties.allowAdd) : true;\n    properties.withAddForm = properties.withAddForm && properties.allowAdd;\n    properties.allowEdit = typeof properties.allowEdit != \"undefined\" ? bizagi.util.parseBoolean(properties.allowEdit) : true;\n    properties.withEditForm = properties.withEditForm && properties.allowEdit;\n    properties.allowDetail = typeof properties.allowDetail != \"undefined\" ? bizagi.util.parseBoolean(properties.allowDetail) : false;\n    properties.inlineAdd = typeof properties.inlineAdd != \"undefined\" ? bizagi.util.parseBoolean(properties.inlineAdd) : true;\n    properties.inlineAdd = properties.inlineAdd && properties.allowAdd;\n    properties.inlineEdit = typeof properties.inlineEdit != \"undefined\" ? bizagi.util.parseBoolean(properties.inlineEdit) : true;\n    properties.inlineEdit = properties.inlineEdit && properties.allowEdit;\n    properties.allowDelete = typeof properties.allowDelete != \"undefined\" ? bizagi.util.parseBoolean(properties.allowDelete) : true;\n\n    self.orientation = self.properties.orientation || \"ltr\",\n    self.data = self.properties.data;\n    self.keys = self.data ? self.getKeys(self.data.rows) : [];\n    self.pointer = 0;\n    self.totalRows = 0;\n    self.inlineAddRecords = [];\n\n    if (self.data) {\n      self.totalRows = self.data.rows.length;\n    }\n  },\n  /*\r\n     * Normalize keys\r\n     */\n  getKeys: function getKeys(rows) {\n    rows = rows || [];\n    var keys = [];\n\n    for (var i = 0, l = rows.length; i < l; i++) {\n      var row = rows[i];\n      keys.push(row[0]);\n    }\n    return keys;\n  },\n\n  /*\r\n     *   Render the control\r\n     */\n  renderControl: function renderControl() {\n    var self = this;\n    var properties = this.properties;\n    var templateItem = \"collectionnavigator\";\n    var template = self.renderFactory.getTemplate(templateItem);\n    var mode = self.getMode();\n\n    // Render the container\n    var html = $.fasttmpl(template, {\n      uniqueId: properties.uniqueId,\n      displayName: properties.displayName ? properties.displayName : \"\",\n      id: properties.id,\n      guid: properties.guid,\n      showPreview: self.showPreview(),\n      mode: mode,\n      orientation: self.getFormContainer().properties.orientation });\n\n\n    html = self.drawControls(html);\n\n    return html;\n  },\n\n  /*\r\n     * Render version readonly of control\r\n     */\n  renderReadOnly: function renderReadOnly() {\n    return this.renderControl();\n  },\n\n  /*\r\n     * Draw navigation controls\r\n     */\n  drawControls: function drawControls(html) {\n\n  },\n\n  /*\r\n     *  render several actions in the navigation palete\r\n     *  ex. save, cancel \r\n     */\n  drawActions: function drawActions(controls) {\n\n  },\n\n  /*\r\n     * Render navigation controls (next, previous, last, first. etc )\r\n     */\n  drawControl: function drawControl(controls) {\n\n  },\n\n  /*\r\n     * Draw forms options (add form, edit form, navigation form)\r\n     */\n  drawForms: function drawForms(controls) {\n\n  },\n\n  /*\r\n     * Draw a preview views, it will be show when the collection hasn't records\r\n     */\n  drawPreview: function drawPreview() {\n    var self = this;\n    var mode = self.getMode();\n    var templateItem = mode === \"execution\" ? \"collectionnavigator-execution\" : \"collectionnavigator-preview\";\n    var template = self.renderFactory.getTemplate(templateItem);\n    var html = $.tmpl(template);\n\n    self.canvas.append(html);\n\n  },\n\n  /*\r\n     * Returns true if the collection has data\r\n     */\n  hasData: function hasData() {\n    return this.getTotalRows() > 0;\n  },\n\n  /*\r\n     * Returns the key of current row\r\n     */\n  getRow: function getRow() {\n    return this.keys[this.pointer];\n  },\n\n  /*\r\n     * Returns the key of next row\r\n     */\n  getNextRow: function getNextRow() {\n    var self = this;\n\n    if (self.getTotalRows() > self.pointer + 1)\n    self.pointer += 1;\n\n    return self.getRow();\n  },\n\n  /*\r\n     * Returns the key of previous row\r\n     */\n  getPreviousRow: function getPreviousRow() {\n    var self = this;\n\n    if (self.pointer > 0)\n    self.pointer -= 1;\n\n    return self.getRow();\n  },\n\n  /*\r\n     * Returns the key of first row\r\n     */\n  getFirstRow: function getFirstRow() {\n    var self = this;\n\n    self.pointer = 0;\n    return self.getRow();\n  },\n\n  /*\r\n     * Returns the key of last row\r\n     */\n  getLastRow: function getLastRow() {\n    var self = this;\n\n    self.pointer = self.keys.length - 1;\n    return self.getRow();\n  },\n\n  /*\r\n     * Returns the total numbers of rows in collection\r\n     */\n  getTotalRows: function getTotalRows() {\n    return this.keys.length;\n  },\n\n  getIndexes: function getIndexes() {\n    return this.properties.data.rows;\n  },\n\n  /*\r\n     * Sets the pointer to a specific position\r\n     */\n  setPointer: function setPointer(index) {\n    this.pointer = index - 1;\n  },\n\n  /*\r\n     * Returns true is there is a inline row pending to save\r\n     */\n  isTherePendingInlineRow: function isTherePendingInlineRow() {\n    return this.inlineAddRecords.length > 0;\n  },\n\n  /*\r\n     * Adds new row to collection\r\n     */\n  addKey: function addKey(newId) {\n    this.keys.push(newId);\n  },\n\n  /*\r\n     * Removes row in collection\r\n     */\n  removeKey: function removeKey() {\n    var self = this;\n    var index = self.pointer;\n\n    if (index >= 0) {\n      self.keys.splice(index, 1);\n\n      var totalRows = self.getTotalRows();\n      if (totalRows > 0 && index >= totalRows) {\n        self.setPointer(totalRows);\n      }\n    }\n  },\n\n  /*\r\n     * Returns true if the control should show the preview view\r\n     * ex. if the collection is empty \r\n     */\n  showPreview: function showPreview() {\n    var self = this;\n    var mode = self.getMode();\n    var properties = self.properties;\n\n    if (mode == \"execution\") {\n      return !self.hasData();\n    } else {\n      return !bizagi.util.parseBoolean(properties.navigationform);\n    }\n  },\n\n  /*\r\n     * Returns the parameters needed for the request\r\n     */\n  getParameters: function getParameters(params) {\n    var self = this;\n\n    var parameters = {};\n    var properties = self.properties;\n    var recordXpath = properties.xpath + \"[id=\" + params.id + \"]\";\n\n    parameters.idRender = properties.id;\n    parameters.recordXPath = recordXpath;\n    parameters.xpathContext = properties.xpathContext;\n    parameters.idPageCache = properties.idPageCache;\n    parameters.requestedForm = params.requestedForm;\n    parameters.contextType = properties.contextType || properties.contexttype;\n    parameters.url = params.url;\n    parameters.editable = params.editable;\n    orientation: properties.orientation || \"ltr\";\n\n\n    return parameters;\n  },\n\n  /*\r\n     *   Submits a collection navigator add record request\r\n     *   Returns a deferred when done, the server returns an id for the new record\r\n     */\n  submitAddRequest: function submitAddRequest() {\n    var self = this;\n    var properties = self.properties;\n\n    var request = self.dataService.addGridRecord({\n      url: properties.addUrl,\n      idRender: properties.id,\n      xpath: properties.xpath,\n      xpathContext: properties.xpathContext,\n      contexttype: properties.contextType || properties.contexttype,\n      idPageCache: properties.idPageCache,\n      orientation: properties.orientation || \"ltr\" });\n\n\n    var filterResponse = request.pipe(function (data) {\n      // Parses response\n      self.properties.temporalRecord = true;\n      return data.idEntity;\n    });\n\n    return filterResponse.promise();\n  },\n\n  /*\r\n     *   Submits a edit record request for the given id \r\n     *   Returns a deferred\r\n     */\n  submitEditRequest: function submitEditRequest(id) {\n    var self = this;\n    var properties = self.properties;\n    var xpath = properties.xpath + \"[id=\" + id + \"]\";\n\n    return self.dataService.editGridRecord({\n      url: properties.editUrl,\n      idRender: properties.id,\n      xpath: xpath,\n      xpathContext: properties.xpathContext,\n      idPageCache: properties.idPageCache,\n      contexttype: properties.contextType || properties.contexttype || '',\n      orientation: properties.orientation || \"ltr\" });\n\n  },\n\n  /*\r\n     *   Submits a collection delete record request for the given id \r\n     *   Returns a deferred\r\n     */\n  submitDeleteRequest: function submitDeleteRequest(id) {\n    var self = this;\n    var properties = self.properties;\n    var xpath = properties.xpath + \"[id=\" + id + \"]\";\n\n    return self.dataService.deleteGridRecord({\n      url: properties.deleteUrl,\n      idRender: properties.id,\n      xpath: xpath,\n      xpathContext: properties.xpathContext,\n      idPageCache: properties.idPageCache,\n      contexttype: properties.contextType || properties.contexttype }).\n    pipe(function (data) {\n      if (data.type == \"validationMessages\") {\n        var form = self.getFormContainer();\n        var message = data.messages.join(\" \");\n        form.failHandler({ message: message });\n      }\n\n      return data;\n    });\n  },\n\n  /*\r\n     *   Submits a collection navigator edit record request for the given id \r\n     *   Returns a deferred\r\n     */\n  submitSaveRequest: function submitSaveRequest(id, data) {\n    var self = this;\n    var properties = self.properties;\n    var defer = $.Deferred();\n\n    // Calculate xpath context\n    var xpathContext = properties.xpathContext.length > 0 ? properties.xpathContext + \".\" + properties.xpath + \"[id=\" + id + \"]\" : properties.xpath + \"[id=\" + id + \"]\";\n\n    var deferredsToWait = null;\n    if (data.deferreds) {\n      deferredsToWait = $.when.apply($, data.deferreds);\n      delete data.deferreds;\n    }\n\n    $.when(deferredsToWait).then(function () {\n      if (!bizagi.util.isEmpty(data) || self.properties.temporalRecord) {\n        data.idPageCache = data.idPageCache || self.form.getPageCache();\n        self.dataService.saveGridRecord({\n          url: properties.saveUrl,\n          idRender: properties.id,\n          xpath: properties.xpath,\n          xpathContext: xpathContext,\n          contexttype: properties.contextType || properties.contexttype || \"\",\n          submitData: data }).\n        done(function (response) {\n          delete self.properties.temporalRecord;\n          defer.resolve(response);\n        }).fail(function (dataFail) {\n          var form = self.getFormContainer();\n          var message = dataFail.responseText ? dataFail.responseText : typeof dataFail == \"string\" ? dataFail : dataFail.toString();\n          //Convert String to object\n          if (typeof message == \"string\") {\n            try {\n              message = JSON.parse(message).message;\n            } catch (e) {\n              message = message.match(/\"message\":(.*)\",/)[0];\n              message = message.substr(11, message.length - 13);\n            }\n\n          } else if (!message.message) {\n            message = dataFail;\n          }\n          form.validateForm();\n          form.clearValidationMessages();\n          form.addValidationMessage(message);\n        });\n      } else {\n        defer.resolve();\n      }\n    });\n\n    return defer.promise();\n  },\n\n  /*\r\n     *   Submits a collection navigator rollback request\r\n     *   Returns a deferred when done\r\n     */\n  submitRollbackRequest: function submitRollbackRequest(error) {\n    var self = this;\n    var properties = self.properties;\n\n    return self.dataService.rollbackGridAction({\n      url: properties.rollbackUrl,\n      idRender: properties.id,\n      xpath: properties.xpath,\n      xpathContext: properties.xpathContext,\n      idPageCache: error.idPageCache,\n      contexttype: self.properties.contexttype || \"\" });\n\n  },\n  /*\r\n     *   Fetch the data into a deferred\r\n     */\n  getRemoteData: function getRemoteData(params) {\n    var self = this;\n    var properties = self.properties;\n\n    // Set params\n    params = params || {};\n    $.extend(params, {\n      url: properties.dataUrl,\n      xpath: properties.xpath,\n      idRender: properties.id,\n      xpathContext: properties.xpathContext,\n      contexttype: properties.contextType || properties.contexttype,\n      idPageCache: properties.idPageCache });\n\n\n\n    return self.dataService.getData(params);\n  },\n\n  isValid: function isValid(invalidElements) {\n    var form = this.form;\n\n    if (typeof form !== \"undefined\" && this.totalRows > 0) {\n      (form.children || []).forEach(function (child) {\n        if (child.properties.visible) {\n          if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) {\n            // Go though container\n            child.isValid(invalidElements);\n\n          } else if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_RENDER) {\n            // Go to the render\n            if (!child.isValid(invalidElements)) {\n              var content = invalidElements[invalidElements.length - 1];\n              invalidElements[invalidElements.length - 1] = $.extend(content, {\n                id: child.properties.id });\n\n            }\n          }\n        }\n      });\n    }\n\n    return invalidElements.length === 0;\n  },\n\n  validateControls: function validateControls(invalidElements) {\n    if (!this.form) return false;\n    return this.form.validationController.performValidations(invalidElements);\n  } });","/**\r\n *   Name: Bizagi Render Check Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for check renders\r\n */\n\n$.Class.extend(\"bizagi.rendering.check\", {}, {\n\n  /**\r\n                                                * Update or init the element data\r\n                                                * @param {} data\r\n                                                */\n  initializeData: function initializeData(data) {\n    // Call base\n    this._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n    properties.value = typeof properties.value != \"undefined\" ? bizagi.util.parseBoolean(properties.value) : null;\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      */\n  renderControl: function renderControl() {\n    var template = this.renderFactory.getTemplate(\"check\");\n    var randomId = bizagi.util.randomNumber(100, 10000000);\n\n    // Render template\n    var html = $.fasttmpl(template, {\n      id: randomId,\n      editable: this.properties.editable });\n\n\n    return html;\n  },\n\n  /**\r\n      * Method to render non editable values\r\n      * @returns {*|jQuery}\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    return this.renderControl();\n  },\n\n  /**\r\n      * Template method to implement in each device to customize each render after processed\r\n      */\n  postRender: function postRender() {\n    // Call base\n    this._super();\n  },\n\n  /**\r\n      * Gets the display value of the render\r\n      */\n  getDisplayValue: function getDisplayValue() {\n    var value = this.getValue();\n\n    if (bizagi.util.parseBoolean(value) === true) {\n      return this.getResource(\"render-boolean-yes\");\n    } else if (bizagi.util.parseBoolean(value) === false) {\n      return this.getResource(\"render-boolean-no\");\n    } else {\n      return \"\";\n    }\n  },\n\n  /**\r\n      * Check if a render has no value for required validation\r\n      */\n  hasValue: function hasValue() {\n    var value = this.getValue();\n\n    if (bizagi.util.isEmpty(value)) return false;\n\n    var booleanValue = bizagi.util.parseBoolean(value);\n\n    return !(booleanValue === false && this.properties.required);\n  } });","/*\r\n*   Name: Bizagi Render Number Class\r\n*   Author: UI Forms Team\r\n*   Comments:\r\n*   -   This script will define basic stuff for numbers\r\n*/\n\n$.Class.extend(\"bizagi.rendering.number\", {}, {\n\n  /**\r\n                                                 * Update or init the element data\r\n                                                 * @param data\r\n                                                 */\n  initializeData: function initializeData(data) {\n    var self = this;\n\n    // Call base\n    self._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n    var format = this.getResource(\"numericFormat\");\n\n    properties.allowDecimals = typeof properties.allowDecimals !== \"undefined\" ? bizagi.util.parseBoolean(properties.allowDecimals) : this.getDefaultAllowDecimals(properties.dataType);\n    properties.numDecimals = properties.allowDecimals ? properties.numDecimals ? properties.numDecimals : typeof BIZAGI_DEFAULT_CURRENCY_INFO !== \"undefined\" ? BIZAGI_DEFAULT_CURRENCY_INFO.decimalDigits : 2 : 0;\n    properties.symbol = '';\n    properties.positiveFormat = format.positiveFormat;\n    properties.negativeFormat = format.negativeFormat;\n    properties.decimalSymbol = typeof BIZAGI_DEFAULT_CURRENCY_INFO !== \"undefined\" ? BIZAGI_DEFAULT_CURRENCY_INFO.decimalSeparator : format.decimalSymbol;\n    properties.digitGroupSymbol = typeof BIZAGI_DEFAULT_CURRENCY_INFO !== \"undefined\" ? BIZAGI_DEFAULT_CURRENCY_INFO.groupSeparator : format.digitGroupSymbol;\n    properties.groupDigits = this.setGroupDigits();\n    properties.colorize = properties.colorizeOnNegative || false;\n    properties.dataTypeMinValue = this.calculateMinValue(properties.dataType);\n    properties.dataTypeMaxValue = this.calculateMaxValue(properties.dataType);\n\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @returns {*|jQuery}\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"number\");\n\n    // Render template\n    var html = $.fasttmpl(template, {\n      id: self.properties.id,\n      editable: self.properties.editable,\n      value: bizagi.isMobile() ? self.getDisplayValue() : \"\", // Only apply to mobile because in the template value is required (Bug: 11624)\n      type: bizagi.util.isAndroidDevice() ? \"tel\" : \"text\", // Change type control for android device\n      isDesign: self.getMode() !== \"execution\" });\n\n\n    return html;\n  },\n\n  /**\r\n      * Template method to implement in each device to customize each render after processed\r\n      */\n  postRender: function postRender() {\n    var self = this;\n\n    self._super();\n\n    var control = self.getControl();\n    var properties = self.properties;\n\n    self.numericInput = control.find(\"input\");\n\n    // Add numeric plugin to avoid invalid keystrokes\n    self.numericInput.numeric(self.properties.decimalSymbol);\n\n    // Attach event for retype double\n    if (properties.retype === \"double\") {\n      self.attachRetypeDouble();\n    }\n  },\n\n  /**\r\n      * Method to customize the render's behaviour to add handlers\r\n      */\n  configureHandlers: function configureHandlers() {\n    // Attach Format Currency Plugin to format the input\n    this.attachFormatCurrency();\n  },\n\n  /**\r\n      * Removes Validation Messages\r\n      */\n  removeValidations: function removeValidations() {\n    var form = this.getFormContainer().parent || this.getFormContainer();\n\n    form.clearValidationMessages();\n  },\n\n  /**\r\n      * Function virtual implements on children (desktop,smartphone...).\r\n      * @returns {}\r\n      */\n  attachRetypeDouble: function attachRetypeDouble() {\n  },\n  formatNumericInput: function formatNumericInput($input) {\n    var self = this;\n    var properties = self.properties;\n    var message = bizagi.localization.getResource(\"render-number-retype-fail\");\n    var form = self.getFormContainer();\n\n    if (typeof form.validationController == \"undefined\") {\n      var $canvas = form.getValidationsContainer();\n      form.validationController = new bizagi.command.controllers.validation(form, self.validations, $canvas);\n    }\n\n    var validationController = form.validationController || form.parent.validationController;\n    var decimalSeparator = \".\";\n    var digitGroupSeparator = \",\";\n\n    if (typeof BIZAGI_DEFAULT_CURRENCY_INFO == \"undefined\") {\n      decimalSeparator = self.getResource(\"numericFormat\").decimalSymbol || \".\";\n      digitGroupSeparator = self.getResource(\"numericFormat\").digitGroupSymbol || \",\";\n    } else\n    {\n      decimalSeparator = BIZAGI_DEFAULT_CURRENCY_INFO.decimalSeparator;\n      digitGroupSeparator = BIZAGI_DEFAULT_CURRENCY_INFO.groupSeparator;\n    }\n\n    var minValue = self.getMinValue();\n    var maxValue = self.getMaxValue();\n\n    if (properties.percentage) self.numericInput.val(self.numericInput.val().replace(\"%\", \"\"));\n    var inputValue = self.numericInput.val();\n    inputValue = decimalSeparator == \",\" ? inputValue.replace(/\\,0+$/, '') : inputValue.replace(/\\.0+$/, '');\n    inputValue = inputValue.replace(properties.symbol, \"\");\n    //Replace all the ocurrences of the digitGroupSeparator\n    inputValue = bizagi.util.replaceAll(inputValue, digitGroupSeparator, \"\");\n    if (inputValue.toString().indexOf(decimalSeparator) != -1) {\n      if (decimalSeparator == \",\") inputValue = inputValue.replace(/([0-9]+(\\,[0-9]+[1-9])?)(\\,?0+$)/, '$1');\n      if (decimalSeparator == \".\") inputValue = inputValue.replace(/([0-9]+(\\.[0-9]+[1-9])?)(\\.?0+$)/, '$1');\n    }\n\n    if (inputValue != undefined && inputValue.length > 0) self.numericInput.val(inputValue);\n\n    if (/(.+)-$/.test(inputValue)) {\n      inputValue = inputValue.replace(/(.+)-$/, '-$1');\n      self.numericInput.val(inputValue);\n    }\n\n    var inputLength = inputValue.replace(/[^0-9]+/g, \"\").length;\n    var xPath = self.properties.xpath;\n    var oldVal = self.numericInput.val();\n\n\n    if (self.isInvalidFormat != null && self.isInvalidFormat == true ||\n    inputValue != \"\" && [\"$\", \"\", \"\", \"\", properties.symbol].indexOf(inputValue) != -1) {\n      self.setValue(\"\");\n      self.getControl().find(\"input\").val(\"\");\n      self.numericInput.val(\"\");\n      return;\n    }\n\n    if (bizagi.util.trim(inputValue) == \"\") {\n      self.setValue(\"\");\n      return;\n    }\n\n    //The \",\" is changed to \".\" For the correct operation of \"parseFloat ()\"\n    var tempValue = parseFloat(inputValue.replace(\",\", \".\"));\n    if (isNaN(tempValue)) {\n      tempValue = self.numericInput.asNumber();\n    }\n\n    if (minValue !== undefined && minValue != null && tempValue < minValue) {\n      message = bizagi.localization.getResource(\"render-numeric-minimum-validation\").\n      replaceAll(\"#label#\", properties.displayName + \" (\" + oldVal + \")\").\n      replaceAll(\"#minValue#\", minValue.toString());\n    } else\n    if (maxValue !== undefined && maxValue !== null && tempValue > maxValue) {\n      message = bizagi.localization.getResource(\"render-numeric-maximum-validation\").\n      replaceAll(\"#label#\", properties.displayName + \" (\" + oldVal + \")\").\n      replaceAll(\"#maxValue#\", maxValue.toString());\n    } else\n    message = message + \" \" + oldVal + \"\";\n\n\n    // Do datatype validations\n    if (\n    minValue !== undefined && minValue !== null && tempValue < minValue ||\n    maxValue !== undefined && maxValue !== null && tempValue > maxValue ||\n    self.properties.dataType == 10 && inputLength > 15 ||\n    self.properties.dataType == 1 && inputLength > 19 ||\n    self.properties.dataType == 11 && inputLength > 7 ||\n    self.properties.dataType == 11 && inputLength > 7 ||\n    oldVal.match(/[^$,-.()\\d]/))\n    {\n      if (typeof validationController != \"undefined\" && validationController != null) {\n        self.removeValidations();\n\n        var messageToShow = message;\n        if (messageToShow.indexOf(oldVal) === -1) {\n          messageToShow = message + \" \" + oldVal + \"\";\n        }\n\n        validationController.showValidationMessage(messageToShow, xPath);\n        self.isValidRender = false;\n        self.isValidRenderMessage = messageToShow;\n      }\n      message = message.replace(oldVal, \"\");\n      return;\n    } else\n    {\n      self.isValidRender = true;\n      self.isValidRenderMessage = \"\";\n    }\n\n    // Fix decimals specially when it starts with 0 (0000234 -> 234, 00000 -> 0)\n    if ($input.value.toString().length > 0 && !properties.allowDecimals && !properties.groupDigits) {\n      $input.value = $input.value.toString().replace(/^0+/, '');\n      if (properties.symbol.length > 0) $input.value = $input.value.toString().replace(properties.symbol + \"0\", properties.symbol);\n      $input.value = $input.value.toString().replace(/^0+/, '');\n      if ($input.value.replaceAll('0', '').length == 0)\n      $input.value = properties.symbol + \"0\";else\n      if ($input.value.toString() == parseInt($input.value)) $input.value = properties.symbol + $input.value;\n    } else {\n      //Fix type money when number start with 0 (0000234 -> 234, 00000 -> 0)\n      if (self.properties.type === \"money\" || self.properties.type === \"number\" || self.properties.type === \"columnMoney\" || self.properties.type === \"columnNumber\") {\n        $input.value = $input.value.toString().replace(/^0+/, '');\n        if ($input.value === \"\") {\n          $input.value = 0;\n        }\n      }\n    }\n    self.executeFormatCurrencyPlugin();\n\n    // Updates internal value\n    self.setValue(self.numericInput.asNumber({\n      symbol: properties.symbol,\n      positiveFormat: properties.positiveFormat,\n      negativeFormat: properties.negativeFormat,\n      decimalSymbol: properties.decimalSymbol,\n      digitGroupSymbol: properties.digitGroupSymbol,\n      groupDigits: properties.groupDigits }));\n\n\n    if (properties.percentage) {\n      if (self.numericInput && self.numericInput.val().indexOf(\"%\") == -1)\n      self.numericInput.val(self.numericInput.val() + '%');\n    }\n    message = message.replace(oldVal, \"\");\n\n  },\n  /**\r\n      * Adds the format currency plugin\r\n      * @returns {}\r\n      */\n  attachFormatCurrency: function attachFormatCurrency() {\n    var self = this;\n    var properties = self.properties;\n    self.isValidRender = self.isValidRender || true;\n\n    // Extend formatCurrency language\n    if ($.formatCurrency.regions[bizagi.language] == null)\n    $.formatCurrency.regions[bizagi.language] = this.getResource(\"numericFormat\");\n\n    // Attach events\n    self.numericInput.blur(function () {\n      self.formatNumericInput(this);\n    })\n\n    // Avoiding pasting invalid characters\n    .bind('paste', function (e) {\n      try {\n        var tmpData = bizagi.util.isIE() || bizagi.util.isIE11() ? window.clipboardData.getData(\"text\") : e.originalEvent.clipboardData.getData(\"Text\");\n\n\n\n        // Next lines checks if there is something different to numbers symbol, decimalSymbol and digitGroupSybol\n        var totalVal = \"/[^0-9\";\n        if (properties.decimalSymbol.length > 0) {\n          totalVal += properties.decimalSymbol;\n        }\n        // Next lines only for currency type\n        if (properties.dataType == 8) {\n          if (properties.symbol.length > 0) {\n            totalVal += properties.symbol;\n          }\n          if (properties.digitGroupSymbol.length > 0) {\n            totalVal += properties.digitGroupSymbol;\n          }\n        }\n        totalVal += \"\\\\-\\\\s]/gi\";\n        try {\n          if (tmpData.replace(eval(totalVal), '').length != tmpData.length)\n          e.preventDefault();\n        }\n        catch (e) {\n        }\n      }\n      catch (e) {\n        bizagi.log(\"Error to pasting content\");\n        self.isInvalidFormat = true;\n      }\n    })\n    // Now we implement keydown instead of keyup in order to include preventDefault\n    .keydown(function (e) {\n      self.previousValue = this.value;\n      e = window.event && window.event.preventDefault ? window.event : e;\n      var keyUnicode = e.charCode || e.keyCode;\n      // Validation for currency info\n      if (typeof BIZAGI_DEFAULT_CURRENCY_INFO != \"undefined\")\n      if (BIZAGI_DEFAULT_CURRENCY_INFO.decimalDigits == 0) properties.allowDecimals = false;\n      if (properties.dataType < 5 || properties.dataType == 8 && properties.allowDecimals == false)\n      if (keyUnicode == 188 || keyUnicode == 190 || keyUnicode == 110)\n      e.preventDefault();\n      if (this.value)\n      if (e !== undefined && this.value.length > 0 && (properties.dataType == 8 || properties.dataType == 10)) {\n        // Just numbers\n        if (keyUnicode > 47 && keyUnicode < 58) {\n          if (self.formatTimeout) {\n            clearTimeout(self.formatTimeout);\n          }\n\n          var floatPart = this.value + \"\";\n          //var  floatPart = stringPart.replaceAll(properties.digitGroupSymbol, \"\").replaceAll(properties.symbol,\"\").trim().replaceAll(properties.decimalSymbol,\".\");\n          if (properties.digitGroupSymbol && properties.digitGroupSymbol.length > 0) {\n            floatPart = floatPart.replaceAll(properties.digitGroupSymbol, \"\");\n          }\n          if (properties.symbol.length > 0) {\n            floatPart = floatPart.replaceAll(properties.symbol, \"\");\n          }\n\n          floatPart = $.trim(floatPart);\n          if (properties.decimalSymbol && properties.decimalSymbol.length > 0) {\n            floatPart = floatPart.replaceAll(properties.decimalSymbol, \".\");\n          }\n          // If increasing one digit (x10) will overtake the maxValue\n          if (floatPart * 10 > properties.dataTypeMaxValue) {\n            e.preventDefault();\n          }\n        } else\n        if (keyUnicode == 109 || keyUnicode == 189) {\n          if (this.selectionStart != 0 || this.selectionEnd != this.value.length) {\n            var currentPosition = this.selectionEnd;\n            this.value = properties.symbol + \"-\" + this.value.replace(properties.symbol, \"\");\n            this.selectionStart = this.selectionEnd = currentPosition + 1;\n          } else if (this.selectionStart == 0 && this.selectionEnd == this.value.length) {\n            this.value = \"-\";\n            this.selectionStart = this.selectionEnd = this.value.length;\n          }\n        }\n      }\n    }).\n\n    keyup(function (e) {\n      e = window.event || e;\n      var keyUnicode = e.charCode || e.keyCode;\n      if (e !== undefined) {\n        switch (keyUnicode) {\n          case 16:\n            break; // Shift\n          case 17:\n            break; // Ctrl\n          case 13:\n            break; // Intro\n          case 18:\n            break; // Alt\n          case 27:\n            this.value = '';\n            break; // Esc: clear entry\n          case 35:\n            break; // End\n          case 36:\n            break; // Home\n          case 37:\n            break; // cursor left\n          case 38:\n            break; // cursor up\n          case 39:\n            break; // cursor right\n          case 40:\n            break; // cursor down\n          case 78:\n            break; // N (Opera 9.63+ maps the \".\" from the number key section to the \"N\" key too!) (See: http://unixpapa.com/js/key.html search for \". Del\")\n          case 110:\n            break; // . number block (Opera 9.63+ maps the \".\" from the number block to the \"N\" key (78) !!!)\n          case 188:\n            break; // , comma\n          case 190:\n            break; // .\n          default:\n            {\n\n            }}\n\n      }\n    }).keypress(function (e) {\n      e = window.event && window.event.preventDefault ? window.event : e;\n      var keyUnicode = e.charCode || e.keyCode;\n      if (typeof e !== \"undefined\") {\n        if (keyUnicode == 35 || keyUnicode == 37 || keyUnicode == 39) {\n          e.preventDefault();\n        } else if (properties.dataType != 8 && keyUnicode == 36) {\n          e.preventDefault();\n        }\n\n        // When no decimals are permited\n        var character = String.fromCharCode(keyUnicode);\n        if (properties.allowDecimals === false && properties.numDecimals === 0 && character === properties.decimalSymbol)\n        e.preventDefault();\n      }\n    });\n\n  },\n\n  executeFormatCurrencyPlugin: function executeFormatCurrencyPlugin() {\n    var self = this;\n    var properties = self.properties;\n\n    if (self.numericInput) {\n      self.numericInput.formatCurrency({\n        symbol: properties.symbol,\n        positiveFormat: properties.positiveFormat,\n        negativeFormat: properties.negativeFormat,\n        decimalSymbol: properties.decimalSymbol,\n        digitGroupSymbol: properties.digitGroupSymbol,\n        groupDigits: properties.groupDigits,\n        roundToDecimalPlace: properties.numDecimals,\n        colorize: properties.colorize });\n\n    }\n\n    if (properties.dataType !== 8 && bizagi.override.removeTrailingZeros === true) {\n      var value = self.numericInput.val();\n      var positive = true;\n\n      if (value.indexOf(\")\") !== -1) {\n        positive = false;\n        value = value.replace(\"(\", \"\").replace(\")\", \"\");\n      }\n\n      var regExp = new RegExp(\"(\" + properties.decimalSymbol + \"\\\\d*?[1-9])0+$\", \"g\");\n      value = value.replace(regExp, \"$1\");\n\n      regExp = new RegExp(\"\\\\\" + properties.decimalSymbol + \"0+$\", \"g\");\n      value = value.replace(regExp, \"\");\n      self.numericInput.val(value);\n\n      if (!positive) self.numericInput.val(\"(\" + value + \")\");\n    }\n\n    if (properties.percentage)\n    self.numericInput.val(self.numericInput.val() + '%');\n  },\n\n  /**\r\n      * Returns the display value of the render\r\n      * @returns {*}\r\n      */\n  getDisplayValue: function getDisplayValue() {\n    var self = this;\n    var properties = self.properties;\n    var control = self.getControl();\n    var value = self.getValue() !== undefined && self.getValue() !== null ? self.getValue() : properties.defaultValue || properties.defaultvalue || $(\"input\", control).val() || \"\";\n\n    // Workaround to get the display value by the format currency plugin, because it requires a control\n    var label = $('<label/>').html(bizagi.util.numberToFixedString(value));\n\n    label.formatCurrency({\n      symbol: properties.symbol,\n      positiveFormat: properties.positiveFormat,\n      negativeFormat: properties.negativeFormat,\n      decimalSymbol: properties.decimalSymbol,\n      digitGroupSymbol: properties.digitGroupSymbol,\n      groupDigits: properties.groupDigits,\n      roundToDecimalPlace: properties.numDecimals,\n      colorize: properties.colorize });\n\n\n    if (properties.percentage)\n    label = $('<label/>').html(label.text() + '%');\n\n    // Removing unrequired zeros as requested by BA26331\n    if (!properties.editable && properties.dataType !== 8 && bizagi.override.removeTrailingZeros === true) {\n      value = label.text();\n      var positive = true;\n\n      if (value.toString().indexOf(\")\") !== -1) {\n        positive = false;\n        value = value.replace(\"(\", \"\").replace(\")\", \"\");\n      }\n\n      var re = new RegExp(\"(\" + properties.decimalSymbol + \"\\\\d*?[1-9])0+$\", \"g\");\n      value = value.replace(re, \"$1\");\n\n      re = new RegExp(\"\\\\\" + properties.decimalSymbol + \"0+$\", \"g\");\n      value = value.replace(re, \"\");\n\n      if (!positive) value = \"(\" + value + \")\";\n      return value;\n    }\n\n    return label.text();\n  },\n\n  /**\r\n      * Public method to determine if a value is valid or not\r\n      * @param invalidElements\r\n      * @returns {*}\r\n      */\n  isValid: function isValid(invalidElements) {\n    var self = this;\n    var properties = self.properties;\n\n    // Call base\n    var bValid = this._super(invalidElements);\n    var value = self.getValue();\n    var message;\n    var minValue = self.getMinValue();\n    var maxValue = self.getMaxValue();\n\n    if (typeof value == \"string\" && value != \"\") {\n      value = Number(value);\n    }\n\n    // Check min value\n    if (self.hasValue()) {\n      if (!bizagi.util.isEmpty(minValue)) {\n        if (value < minValue) {\n          message = this.getResource(\"render-numeric-minimum-validation\").replaceAll(\"#label#\", properties.displayName.toString() + \" (\" + value + \")\").replaceAll(\"#minValue#\", minValue.toString());\n          invalidElements.push({ xpath: properties.xpath, message: message });\n          bValid = false;\n        }\n      }\n      // Check max value\n      if (!bizagi.util.isEmpty(maxValue)) {\n        if (value > maxValue) {\n          message = this.getResource(\"render-numeric-maximum-validation\").replaceAll(\"#label#\", properties.displayName.toString() + \" (\" + value + \")\").replaceAll(\"#maxValue#\", maxValue.toString());\n          invalidElements.push({ xpath: properties.xpath, message: message });\n          bValid = false;\n        }\n      }\n\n    }\n\n    if (self.isValidRender === false && !(bValid && bizagi.util.isMobileDevice())) {\n      bValid = false;\n      var validMessage = self.isValidRenderMessage ? self.isValidRenderMessage : \"error\";\n      invalidElements.push({ xpath: properties.xpath, message: validMessage });\n    }\n\n    return bValid;\n  },\n\n  /**\r\n      * Get minimum value\r\n      * @returns {*}\r\n      */\n  getMinValue: function getMinValue() {\n    var minValue = this.properties.minValue;\n\n    if (minValue !== undefined && minValue !== null)\n    return minValue;\n\n    return this.properties.dataTypeMinValue;\n  },\n\n  /**\r\n      * Get maximum value\r\n      * @returns {*}\r\n      */\n  getMaxValue: function getMaxValue() {\n    var maxValue = this.properties.maxValue;\n\n    if (maxValue !== undefined && maxValue !== null)\n    return maxValue;\n\n    return this.properties.dataTypeMaxValue;\n  },\n\n  /**\r\n      * Return the allow decimals default property based on the datatype\r\n      * @param dataType\r\n      * @returns {boolean}\r\n      */\n  getDefaultAllowDecimals: function getDefaultAllowDecimals(dataType) {\n    if (dataType) {\n      // Integer data types\n      if (dataType === 1 || dataType === 2 || dataType === 3 || dataType === 4 || dataType === 7) {\n        return false;\n      }\n      // Decimal and money data types\n      if (dataType === 6 || dataType === 8 || dataType === 10 || dataType === 11) {\n        return true;\n      }\n    }\n    return false;\n  },\n  /**\r\n      * Return the group digits default property based on the datatype\r\n      * @param dataType\r\n      * @returns {boolean}\r\n      */\n  getDefaultGroupDigits: function getDefaultGroupDigits(dataType) {\n    if (dataType) {\n      // Integer data types\n      if (dataType === 1 || dataType === 2 || dataType === 3 || dataType === 4 || dataType === 7) {\n        return false;\n      }\n\n      // Decimal data types\n      if (dataType === 6 || dataType === 8 || dataType === 10 || dataType === 11) {\n        return true;\n      }\n    }\n    return false;\n  },\n\n  /**\r\n      * Return the group digits default property based on digitGroupSymbol\r\n      * @returns {*}\r\n      */\n  setGroupDigits: function setGroupDigits() {\n    var self = this;\n    if (typeof self.properties.thousands !== \"undefined\") {\n      if (self.properties.digitGroupSymbol) {//some cultures\n        return bizagi.util.parseBoolean(self.properties.thousands);\n      } else {\n        return false;\n      }\n    } else if (self.properties.digitGroupSymbol) {//some cultures\n      return this.getDefaultGroupDigits(self.properties.dataType);\n    } else {\n      return false;\n    }\n  },\n\n  /**\r\n      * Calculate Minimum Value\r\n      * @param dataType\r\n      * @returns {*}\r\n      */\n  calculateMinValue: function calculateMinValue(dataType) {\n    if (dataType === 8 || dataType === 10) {\n      return -922337203685477; // Money\n    }\n    if (dataType === 4) {\n      return 0; // tinyint\n    }\n    if (dataType === 3) {\n      return -32768; // smallint\n    }\n    if (dataType === 2) {\n      return -2147483648; // int\n    }\n    if (dataType === 1) {\n      return -999999999999999; // bigint\n    }\n    return null;\n  },\n\n  /**\r\n      * Calculate Maximum Value\r\n      * @param dataType\r\n      * @returns {*}\r\n      */\n  calculateMaxValue: function calculateMaxValue(dataType) {\n    if (dataType === 8 || dataType === 10) {\n      return 922337203685477; // Money\n    }\n    if (dataType === 4) {\n      return 255; // tinyint\n    }\n    if (dataType === 3) {\n      return 32767; // smallint\n    }\n    if (dataType === 2) {\n      return 2147483647; // int\n    }\n    if (dataType === 1) {\n      return 999999999999999; // bigint\n    }\n    return null;\n  },\n\n  /**\r\n      * Calculate min value\r\n      * @param value\r\n      * @returns {number}\r\n      */\n  performMinValue: function performMinValue(value) {\n    var newValue = Number(value);\n\n    if (isNaN(newValue)) {\n      newValue = this.calculateMinValue(this.properties.dataType);\n    }\n\n    return newValue;\n  },\n\n  /**\r\n      * Calculate min value\r\n      * @param value\r\n      * @returns {number}\r\n      */\n  performMaxValue: function performMaxValue(value) {\n    var newValue = Number(value);\n\n    if (isNaN(newValue)) {\n      newValue = this.calculateMaxValue(this.properties.dataType);\n    }\n\n    return newValue;\n  },\n\n  /**\r\n      * Changes the render minimum value\r\n      * @param value\r\n      */\n  changeMinValue: function changeMinValue(value) {\n    var newValue = this.performMinValue(value);\n\n    this.properties.minValue = this.properties.dataTypeMinValue = newValue;\n  },\n  /**\r\n      * Changes the render maximum value\r\n      * @param value\r\n      */\n  changeMaxValue: function changeMaxValue(value) {\n    var newValue = this.performMaxValue(value);\n\n    this.properties.maxValue = this.properties.dataTypeMaxValue = newValue;\n  },\n\n  createTooltip: function createTooltip(control, currentValue, currentTitle) {\n    control.data(\"oldValue\", currentValue);\n    control.val(\"\");\n\n    try {\n      // Destroy tooltips\n      control.tooltip(\"destroy\");\n    } catch (e) {\n    }\n\n    control.attr(\"title\", currentTitle);\n    control.tooltip();\n\n    var toolTipZindex = $.getMaxZindex();\n    control.tooltip().on(\"tooltipopen\", function (event, ui) {\n      ui.tooltip.zIndex(toolTipZindex);\n    });\n\n    // Create new tooltip\n    control.tooltip(\"open\");\n\n    var timeOutFocus = setTimeout(function () {\n      control.focus();\n      clearTimeout(timeOutFocus);\n    }, 100);\n  } });","\n/*\r\n*   Name: Bizagi Render Number Scientific notation Class\r\n*   Author: Laura Ariza\r\n*   Comments:\r\n*   -   This script will define basic stuff for scientific notation numbers\r\n*/\n\n$.Class.extend(\"bizagi.rendering.numberScientificNotation\", {\n  /*\r\n                                                               *   Update or init the element data\r\n                                                               */\n  initializeData: function initializeData(data) {\n    var self = this;\n\n    // Call base\n    this._super(data);\n\n    // Fill default properties\n    var properties = self.properties;\n\n    properties.decimalSymbol = typeof BIZAGI_DEFAULT_CURRENCY_INFO !== \"undefined\" ?\n    BIZAGI_DEFAULT_CURRENCY_INFO.decimalSeparator : format.decimalSymbol;\n  },\n\n  renderControl: function renderControl() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"numberScientificNotation\");\n\n    // Render template\n    var html = $.fasttmpl(template, {});\n    return html;\n  },\n\n  /*\r\n      * Template method to implement in each device to customize each render after processed\r\n      */\n  postRender: function postRender() {\n    var self = this;\n    var control = self.getControl();\n    self.numericInput = control.find(\"input\");\n    // Add numeric plugin to avoid invalid keystrokes\n    self.numericInput.numericSN(self.properties.decimalSymbol);\n\n  },\n\n  getDisplayValue: function getDisplayValue() {\n    var self = this;\n    return self.getValue().replace('.', self.properties.decimalSymbol);\n  },\n\n  setValue: function setValue(value) {\n    var self = this;\n    value = (value || '').toString().replace(self.properties.decimalSymbol, '.');\n    self._super(value);\n  },\n  controlValueIsChanged: function controlValueIsChanged() {\n    var self = this;\n    var properties = self.properties;\n    var value = self.getValue() || \"\";\n    var compareValue = properties.originalValue || \"\";\n    var result = true;\n\n    // Flag to force to collect data\n    if ($.forceCollectData) {\n      return true;\n    }\n    result = compareValue.toLowerCase() == value.toLowerCase() ? false : true;\n    return result;\n  } });","/**\r\n *   Name: Bizagi Render Hidden Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for hiddens\r\n */\n\n$.Class.extend(\"bizagi.rendering.hidden\", {}, {\n\n  /**\r\n                                                 * Returns the in-memory processed element\r\n                                                 */\n  renderControl: function renderControl() {\n    if (this.getMode() === \"design\") {\n      return \"<div>\" + bizagi.localization.getResource(\"render-hidden-displayName\") + \"</div>\";\n    } else {\n      return \"<div />\";\n    }\n  },\n\n  /**\r\n      * Template method to implement in each device to customize each render after processed\r\n      */\n  postRender: function postRender() {\n    var properties = this.properties;\n\n    // Call base\n    this._super();\n\n    // Set the initial value\n    if (properties.value !== undefined) {\n      this.setDisplayValue(properties.value);\n    }\n  } });","/**\r\n *   Name: Bizagi Render Text Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for text renders\r\n */\n\n$.Class.extend(\"bizagi.rendering.text\", {}, {\n\n  /**\r\n                                               * Update or init the element data\r\n                                               * @param data\r\n                                               */\n  initializeData: function initializeData(data) {\n    // Call base\n    this._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n\n    if (properties.regularExpressionExpression) {\n      var message = properties.regularExpressionMessage || this.getResource(\"render-text-regular-expression-default-message\");\n      properties.regularExpression = { \"expression\": properties.regularExpressionExpression, \"message\": message };\n    }\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @returns {*}\r\n      */\n  renderControl: function renderControl() {\n    var template = this.renderFactory.getTemplate(\"text\");\n\n    // Render template\n    var html = $.fasttmpl(template, {\n      id: this.properties.id,\n      value: this.properties.value,\n      isEmptyField: typeof this.properties.value === \"undefined\",\n      helpText: this.properties.helpText,\n      editable: this.properties.editable });\n\n\n    return html;\n  },\n\n  /**\r\n      * Method to render non editable values\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    var template = this.renderFactory.getTemplate(\"text-read-only\");\n    var value = this.getValue();\n\n    if (bizagi.util.isString(value)) {\n      value = value.replaceAll(\"`\", \"&#96;\");\n    }\n\n    // Render template\n    return $.fasttmpl(template, { value: value, editable: this.properties.editable });\n  },\n\n  /**\r\n      * Template method to implement in each device to customize each render after processed\r\n      */\n  postRender: function postRender() {\n    // Call base\n    this._super();\n\n    this.input = this.getControl().find(\"input\");\n\n    //Attach event for retype double\n    if (this.properties.retype === \"double\")\n    this.attachRetypeDouble();\n  },\n\n  /**\r\n      * function virtual implements on children (desktop,samrtphone...).\r\n      */\n  attachRetypeDouble: function attachRetypeDouble() {\n  },\n\n  /**\r\n      * Template method to implement in each device to customize the render's behaviour to add handlers\r\n      */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    var properties = self.properties;\n\n    // Check mask property\n    if (properties.mask)\n    self.input.mask({ mask: properties.mask });\n\n    // Attach change event\n    self.input.bind(\"change\", function () {\n\n      // Updates internal value\n      self.setValue(self.input.val(), false);\n\n      // Check that the value is valid\n      var validationMessages = [];\n      if (properties.retype !== \"duplicate\") {\n        if (self.isValid(validationMessages) || typeof properties.regularExpression === \"undefined\") {\n          // Update value again triggering handlers\n          self.setValue(self.input.val(), true);\n        }\n      }\n\n    }).keypress(function (e) {\n      e = window.event || e;\n      var keyUnicode = e.charCode || e.keyCode;\n\n      if (e !== undefined) {\n        if (keyUnicode == 13) {\n          $(this).trigger(\"change\");\n        }\n      }\n    });\n    //QA33146 - maxlength does not support in Android Devices. \n    if (bizagi.util.isAndroidDevice() && properties.maxLength > 0) {\n      self.input.bind(\"keyup\", function (e) {\n        var inputLength = $(this).val() && $(this).val().length;\n        if (inputLength >= properties.maxLength) {\n          e.preventDefault();\n          e.target.value = e.target.value.substring(0, properties.maxLength);\n        }\n      });\n    }\n  },\n\n  /**\r\n      * Public method to determine if a value is valid or not\r\n      * @param invalidElements\r\n      * @returns {*}\r\n      */\n  isValid: function isValid(invalidElements) {\n    var self = this;\n    var properties = self.properties;\n    // Call base\n    var bValid = this._super(invalidElements);\n    var value = self.getValue();\n\n    // When the form have big data, block browser executing RegExp. QAF-1418.\n    // Check regular expression\n    if (typeof value == \"string\") {\n      if (properties.regularExpression) {\n        if (properties.editable) {\n          var regex = new RegExp(\"\");\n          try {\n            regex = new RegExp(properties.regularExpression.expression);\n          }\n          catch (e) {\n            if (bizagi.override.showDesignValidations) {\n              bizagi.log(e);\n              invalidElements.push({ xpath: properties.xpath, message: e.message });\n              bValid = false;\n            }\n          }\n\n          if (value && (value.match(new RegExp(\".*?(<|\\\\u003C)(.+?)(>|\\\\u003E)(.?)|eval\\\\(|eval\\\\u0028\", \"g\")) || !value.match(regex) && self.properties && self.properties.xpath === \"userName\")) {\n            var message = properties.regularExpression.message;\n            invalidElements.push({ xpath: properties.xpath, message: message });\n            bValid = false;\n          } else {\n            if (value && (value.match(new RegExp(\".*?(<|\\\\u003C)(.+?)(>|\\\\u003E)(.?)|eval\\\\(|eval\\\\u0028\", \"g\")) || !value.match(regex))) {\n              var message = properties.regularExpression.message;\n              invalidElements.push({ xpath: properties.xpath, message: message });\n              bValid = false;\n            }\n          }\n        }\n      } else {\n        // Strange behavior on IE. When matchs are united on IE have is very slow\n        // solution, divide matchs\n        //.*? means for more information search: \"Lazy matching regexp\"\n        if (value && value.match(new RegExp(\".*?eval\\\\(\", \"g\")) && value.match(new RegExp(\".*?eval\\\\u0028\", \"g\"))) {\n          if (properties.editable) {\n            var message = this.getResource(\"render-text-regular-expression-default-message\");\n\n            invalidElements.push({ xpath: properties.xpath, message: message });\n            bValid = false;\n          }\n        }\n      }\n    }\n\n    return bValid;\n  },\n\n  /**\r\n      * Sets the value in the rendered control\r\n      * @param value\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n    var control = self.getControl();\n    var decodedValue = bizagi.util.decodeURI(value);\n\n    if (!bizagi.util.parseBoolean(self.properties.editable)) {\n      // Render as simple value\n      if (typeof value === \"string\") {\n        // Replace line breaks for html line breaks\n        var valueToDisplay = bizagi.util.encodeHtmlText(self.getDisplayValue());\n\n        control.html(\"<label class='readonly-control'>\" + valueToDisplay + \"</label>\");\n      } else {\n        if (bizagi.util.isNull(value)) {\n          control.html(\"\");\n        }\n      }\n    }\n\n    // Set internal value\n    self.setValue(decodedValue, false);\n  },\n\n  /**\r\n      * Extend setValue to fix all encode data from database\r\n      * @param value\r\n      */\n  setValue: function setValue(value) {\n    this._super(value);\n  },\n\n  /**\r\n      * Helptext tooltip\r\n      * @param {} control\r\n      * @param {} currentValue\r\n      * @param {} currentTitle\r\n      */\n  createTooltip: function createTooltip(control, currentValue, currentTitle) {\n    control.data(\"oldValue\", currentValue);\n    control.val(\"\");\n\n    if (control.data('ui-tooltip')) control.tooltip('destroy');\n\n    control.attr(\"title\", currentTitle);\n    control.tooltip();\n\n    var toolTipZindex = $.getMaxZindex();\n    control.tooltip().on(\"tooltipopen\", function (event, ui) {\n      ui.tooltip.zIndex(toolTipZindex);\n    });\n\n    // Create new tooltip\n    control.tooltip(\"open\");\n\n    var timeOutFocus = setTimeout(function () {\n      control.focus();\n      clearTimeout(timeOutFocus);\n    }, 100);\n  },\n\n\n  //#region No side effects functions\n  /**\r\n   * Gets the string with the correct size\r\n   * @param {string} value String value to validate\r\n   * @param {Integer} maxLength Maximum size of the string\r\n   * @returns {string} String value validated\r\n   */\n  validateValue: function validateValue(value, maxLength) {\n    if (typeof value !== \"string\" || maxLength < 1 || value.length <= maxLength) return value;\n    return value.substr(0, maxLength);\n  }\n  //#endregion No side effects functions\n});","/**\r\n *   Name: Bizagi Render Readonly Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for readonly renders\r\n */\n\n$.Class.extend(\"bizagi.rendering.readonly\", {}, {\n\n  /**\r\n                                                   * Update or init the element data\r\n                                                   * @param data\r\n                                                   */\n  initializeData: function initializeData(data) {\n    // Call base\n    this._super(data);\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @returns {*}\r\n      */\n  renderControl: function renderControl() {\n    var template = this.renderFactory.getTemplate(\"readonly-value\");\n    var value = this.getMode() == 'execution' ?\n    this.getFormattedValue(this.properties.value, this.properties.dataType) :\n    this.getDesignModeValue(this.properties.renderType);\n\n    // Render template\n    var html = $.fasttmpl(template, {\n      id: this.properties.id,\n      value: value });\n\n\n    return html;\n  },\n\n  /**\r\n      * Method to render non editable values\r\n      * @returns {*|jQuery}\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    return this.renderControl();\n  },\n\n  /**\r\n      *  Sets the value in the rendered control\r\n      * @param value\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    // DON'T DO ANYTHING\n  },\n\n  /**\r\n      * Sets the internal value\r\n      * @param value\r\n      * @param triggerEvents\r\n      */\n  setValue: function setValue(value, triggerEvents) {\n    // DON'T DO ANYTHING\n  },\n\n  /**\r\n      * Get data value with format\r\n      * @param value\r\n      * @param dataType\r\n      */\n  getFormattedValue: function getFormattedValue(value, dataType) {\n    if (bizagi.util.isEmpty(value)) return \"\";\n\n    // If dataType is integer\n    if ([1, 2, 3, 4, 7].includes(dataType)) return value;\n\n    // If dataType is boolean\n    if ([5, 17].includes(dataType)) return bizagi.util.formatBoolean(value);\n\n    // If dataType is monetary\n    if ([8].includes(dataType)) return bizagi.util.formatMonetaryValue(value);\n\n    // If dataType is real or float\n    if ([6, 10, 11].includes(dataType)) return bizagi.util.formatDecimalValue(value);\n\n    // If dataType is date\n    if ([12, 13].includes(dataType)) return bizagi.util.formatDateValue(value);\n\n    // Otherwise, If dataType is string\n    return bizagi.util.sanitizeHTML(value) || \"\";\n  },\n\n  /***/\n  getDesignModeValue: function getDesignModeValue(renderType) {\n\n    // If dataType is integer\n    if (renderType == 'number') return '123';\n    if (renderType == 'string') return 'abc';\n    if (renderType == 'date') return '1/1/1900';\n    if (renderType == 'boolean') return 'false';\n    if (renderType == 'currency') return '$123';\n\n    return \"\";\n  },\n\n  /** \r\n      * Customizes render background color\r\n      * @param {} color\r\n      * @returns {}\r\n      */\n  changeBackgroundColor: function changeBackgroundColor(color) {\n    if (typeof color === \"undefined\") return this;\n\n    if (color !== \"none\") {\n      this.element.style(\"background\", color, \"important\");\n    } else {\n      this.element.css(\"background\", \"\");\n    }\n\n    return this;\n  },\n\n  /**\r\n      * Gets jQuery Object to stylize\r\n      * @param {jQuery Object} $context jQuery Object\r\n      */\n  getElementsToStylize: function getElementsToStylize($context) {\n    return $(\".bz-input--readonly\", $context);\n  } });","/**\r\n *   Name: Bizagi Render Button Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for button renders\r\n */\n\n$.Class.extend(\"bizagi.rendering.button\", {}, {\n\n  /**\r\n                                                 * Update or init the element data\r\n                                                 * @param {} data\r\n                                                 * @returns {}\r\n                                                 */\n  initializeData: function initializeData(data) {\n    // Call base\n    this._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n    properties.caption = properties.caption || \"\";\n\n    // set default value from normal to value\n    properties.displayType = \"value\";\n\n    // A button cannot be required\n    properties.required = false;\n\n    // This flag enable/disable default behaviors of buttons\n    // auto save and execute rule\n    properties.preventDefault = properties.preventDefault || false;\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @returns {}\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"button\");\n\n    // Render template\n    return $.fasttmpl(template, {\n      caption: self.properties.caption,\n      cssClass: self.properties.cssclass || \"\",\n      editable: self.properties.editable });\n\n  },\n\n  /**\r\n      * Method to render non editable values\r\n      * @returns {}\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    // Executes the same template than normal render\n    return this.renderControl();\n  },\n\n  /**\r\n      * Template method to implement in each device to customize each render after processed in read-only mode\r\n      */\n  postRenderReadOnly: function postRenderReadOnly() {\n    // call base\n    this._super();\n\n    this.getLabel().addClass('bz-form-label--hidden');\n  },\n\n  /**\r\n      * Template method to implement in each device to customize the render behaviour after to be processed\r\n      */\n  postRender: function postRender() {\n    // call base\n    this._super();\n\n    this.getLabel().addClass('bz-form-label--hidden');\n  },\n\n  /**\r\n      * Saves the form\r\n      * @returns {}\r\n      */\n  saveForm: function saveForm() {\n    var form = this.getFormContainer();\n    return form.saveForm();\n  },\n\n  /**\r\n      * Executes the button action\r\n      * @returns {}\r\n      */\n  executeButton: function executeButton() {\n    var self = this;\n    var properties = self.properties;\n    var xpathContext = properties.xpathContext || \"\";\n\n    if (properties.submitOnChangexpathContextRow) {\n      xpathContext = xpathContext ? xpathContext + \".\" + properties.submitOnChangexpathContextRow : properties.submitOnChangexpathContextRow;\n    }\n\n    // Set the loading feedback\n    self.getFormContainer().startLoading();\n\n    return self.dataService.multiaction().executeButton({\n      idRender: properties.id,\n      xpath: properties.xpath || \"\",\n      xpathContext: xpathContext || \"\",\n      idPageCache: properties.idPageCache }).\n    always(function () {\n      self.getFormContainer().endLoading();\n      return arguments ? arguments[0] : undefined;\n    });\n  },\n\n  /**\r\n      * Refresh the current form\r\n      * @returns {}\r\n      */\n  refreshForm: function refreshForm() {\n    var form = this.getFormContainer();\n    form.refreshForm(this.properties.id);\n  },\n\n  /**\r\n      * Process the button actions workflow\r\n      * @returns {}\r\n      */\n  processButton: function processButton() {\n    var self = this;\n\n    if (self.properties.editable) {\n      // Save the form prior opening the dialog\n      self.runButtonAction();\n    }\n  },\n\n  /**\r\n      * Triggers the render change event\r\n      * @param {} params\r\n      * @returns {}\r\n      */\n  triggerRenderChange: function triggerRenderChange(params) {\n    var self = this;\n    params = params || {};\n\n    var pressed = params.pressed || false;\n\n    self.triggerHandler(\"renderchange\", { render: self, pressed: pressed });\n  },\n\n  /**\r\n      * Run button actions\r\n      * @returns {}\r\n      */\n  runButtonAction: function runButtonAction() {\n    var self = this;\n\n    // Save the form prior opening the dialog\n    self.getFormContainer().clearValidationMessages();\n\n    self.saveForm().pipe(function () {\n      return self.executeButton();\n    }).done(function (result) {\n\n      var type = result && result.type ? result.type : \"\";\n\n      if (result == null || result == true || result.result === \"success\" || result.type === \"success\") {\n        return self.refreshForm();\n      } else if ([\"validationMessages\", \"alertMessages\"].includes(type)) {\n        try {\n          if (type === \"alertMessages\") {\n            bizagi.modalError && bizagi.modalError.show(result.messages.join(\"\\n\\n\"), 'workportal-general-word-information', false);\n          } else {\n            // Add validation messages\n            self.getFormContainer().addValidationMessage(result.messages);\n          }\n        } catch (e) {\n        }\n      }\n    }).fail(function (error) {\n\n      try {\n        // Add error messages\n        var error_obj = bizagi.util.getErrorFormatted(error);\n        var message = typeof error_obj === \"undefined\" ? {\n          \"message\": bizagi.localization.getResource(\"workportal-general-error\") } :\n        error_obj;\n\n        self.getFormContainer().failHandler(message);\n      } catch (e) {\n      }\n\n    });\n\n  },\n\n  processLayout: function processLayout(isLabelFormat, format) {\n    if (isLabelFormat) {\n      this.changeBackgroundColor(format.background);\n      this._super(!isLabelFormat, format);\n    }\n  },\n\n  changeBackgroundColor: function changeBackgroundColor(color) {\n    if (typeof color === \"undefined\") return this;\n\n    if (color !== \"none\") {\n      this.getElementsToStylize(this.getControl()).style(\"background\", color, \"important\");\n    } else {\n      this.getElementsToStylize(this.getControl()).css(\"background\", \"\");\n    }\n\n    return this;\n  },\n\n  getElementsToStylize: function getElementsToStylize($context) {\n    return $(\"input\", $context);\n  },\n\n  /**\r\n      *  Method to determine if the render value can be sent to the server or not\r\n      * @returns {}\r\n      */\n  canBeSent: function canBeSent() {\n    // This render cannot be sent because it is full ajax\n    return false;\n  },\n  /*\r\n     *   Enables submit on change feature for the current render\r\n     */\n  configureSubmitOnChange: function configureSubmitOnChange() {\n    var self = this;\n    var properties = self.properties;\n    var renderId = \"\";\n\n    if (!properties.editable) return;\n\n    // Build action\n    properties.dependencies = properties.dependencies || 'all';\n\n    if (properties.submitOnChangexpathContext) {\n      renderId = properties.submitOnChangexpathContext + \".\" + properties.id;\n    } else {\n      renderId = properties.id;\n    }\n\n    var action = {\n      \"conditions\": {\n        \"expressions\": [\n        {\n          \"simple\": {\n            \"renderId\": renderId,\n            \"operator\": \"changes\",\n            \"argumentType\": \"const\" } }] },\n\n\n\n\n      \"commands\": [\n      {\n        \"xpath\": renderId,\n        \"command\": 'submit-value',\n        \"argument\": properties.dependencies }],\n\n\n      \"dependencies\": [renderId],\n      \"elseCommands\": [] };\n\n\n\n    // Add action when form ends its rendering\n    $.when(self.ready()).done(function () {\n      var form = self.getFormContainer();\n      form.addSubmitAction(renderId, action);\n    });\n  } });","/**\r\n *   Name: Bizagi Render Fileprint Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for fileprint renders\r\n */\n\n$.Class.extend(\"bizagi.rendering.fileprint\", {}, {\n\n  /**\r\n                                                    * Update or init the element data\r\n                                                    * @param data\r\n                                                    */\n  initializeData: function initializeData(data) {\n    // Call base\n    this._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n    var caption = $.trim(properties.caption);\n\n    properties.caption = !bizagi.util.isEmpty(caption) ? caption : \"render-fileprint-property-caption\";\n    properties.filesCount = properties.filesCount ? properties.filesCount : 0;\n\n    // set default value from normal to value\n    properties.displayType = \"value\";\n\n    // Calculate layout properties\n    this.calculateInitialLayoutProperties();\n\n    // A button cannot be required\n    properties.required = false;\n  },\n\n  /**\r\n      * Method to implement in each children to customize each control\r\n      * @returns {*|jQuery}\r\n      */\n  renderControl: function renderControl() {\n    var template = this.renderFactory.getTemplate(\"fileprint\");\n\n    return $.fasttmpl(template, {\n      caption: this.properties.caption });\n\n  },\n\n  /**\r\n      * Method to render non editable values\r\n      * @returns {*}\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    // Executes the same template than normal render\n    return this.renderControl();\n  },\n\n  /**\r\n      * Downloads the file and try to open it\r\n      */\n  downloadFile: function downloadFile() {\n    return this.dataService.getFilePrint({\n      idRender: this.properties.id,\n      xpathContext: this.properties.xpathContext || \"\",\n      idPageCache: this.properties.idPageCache,\n      contexttype: this.properties.contexttype,\n      disposition: \"download\" }).\n    then(function (response) {\n      return bizagi.util.handleJSONResponse(response);\n    });\n  } });","/**\r\n *   Name: Bizagi Render Simple Link Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for link renders\r\n */\n\n$.Class.extend(\"bizagi.rendering.link\", {}, {\n\n  /**\r\n                                               * Update or init the element data\r\n                                               * @param {} data\r\n                                               * @returns {}\r\n                                               */\n  initializeData: function initializeData(data) {\n    // Call base\n    this._super(data);\n\n    // Set properties\n    var properties = this.properties;\n    properties.required = false;\n    properties.displayType = \"value\";\n\n    // Calculate layout properties\n    this.calculateInitialLayoutProperties();\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @returns {}\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"link\");\n\n    // Render template\n    return $.fasttmpl(template, {\n      displayName: self.properties.displayName,\n      align: self.properties.valueAlign,\n      editable: self.properties.editable });\n\n  },\n\n  /**\r\n      * Template method to implement in each device to customize each render after processed\r\n      */\n  postRender: function postRender() {\n    this._super();\n    this.getLabel().addClass(\"bz-form-label--hidden\");\n  },\n\n  /**\r\n      * Method to render non editable values\r\n      * @returns {*}\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    // Executes the same template than normal render\n    return this.renderControl();\n  },\n\n  /**\r\n      * Template method to implement in each device to customize each render after processed in read-only mode\r\n      */\n  postRenderReadOnly: function postRenderReadOnly() {\n    this._super();\n    this.getLabel().addClass(\"bz-form-label--hidden\");\n  },\n\n  /**\r\n      * Public method to determine if a value is valid or not\r\n      * @param invalidElements\r\n      */\n  isValid: function isValid(invalidElements) {\n    // Automatically this render is valid, so we can't check a required link\n  },\n\n  /**\r\n      * Sets the value in the rendered control\r\n      * @param value\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    // Do nothing\n  },\n\n  /**\r\n      * Method to determine if the render value can be sent to the server or not\r\n      * @returns {boolean}\r\n      */\n  canBeSent: function canBeSent() {\n    return false;\n  } });","/*\r\n *   Name: BizAgi Render Radio Class\r\n *   Author: Ivan Ricardo Taimal Narvaez\r\n *   Comments:\r\n *   -   This script will define basic stuff for radio renders\r\n */\n\n$.Class.extend(\"bizagi.rendering.checkList\", {}, {\n\n  /*\r\n                                                    *   Update or init the element data\r\n                                                    */\n  initializeData: function initializeData(data) {\n    var self = this;\n    // Call base\n    this._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n    properties.horizontal = bizagi.util.parseBoolean(properties.horizontal) || false;\n    self.setValue(properties.items);\n    self.updateOriginalValue();\n  },\n\n  /*\r\n      *   Template method to implement in each device to customize each render after processed\r\n      */\n  postRender: function postRender() {\n    var self = this;\n    var control = self.getControl();\n\n    // Call base\n    self._super();\n    self.checkListGroup = $(\".ui-bizagi-render-checkList .ui-bizagi-render-checkList-item\", control);\n  },\n\n  /*\r\n      *   Template method to implement in each children to customize each control\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var properties = self.properties;\n    var template = self.renderFactory.getTemplate(self.getTemplateName());\n    var items = self.properties.items || [];\n\n    var html = $.fasttmpl(template, $.extend(self.getTemplateParams(), {\n      id: properties.id,\n      xpath: properties.xpath,\n      unique: bizagi.util.randomNumber(10000, 1000000),\n      idPageCache: properties.idPageCache,\n      items: items }));\n\n    return html;\n  },\n\n  /*\r\n      *   Gets the template used by the combo render\r\n      *   can be overriden in subclasses to reuse logic and just change the template\r\n      */\n  getTemplateName: function getTemplateName() {\n    return \"checkList\";\n  },\n\n  /*\r\n      *   Determines if we need to show the empty node or not\r\n      *   Can be overriden to change behaviour\r\n      */\n  showEmpty: function showEmpty() {\n    return false;\n  },\n\n  /*\r\n      *   Determines if we need to show the current data regardless if it belongs to data or not\r\n      *   Can be overriden to change behaviour\r\n      */\n  showCurrentData: function showCurrentData() {\n    return false;\n  },\n\n  /*\r\n      *   Adds custom parameters to process the template\r\n      */\n  getTemplateParams: function getTemplateParams() {\n    var self = this;\n    var properties = self.properties;\n\n    return {\n      vertical: !properties.horizontal };\n\n  },\n  /*\r\n      * Cleans current data\r\n      */\n  cleanData: function cleanData() {\n\n  },\n\n  setValue: function setValue(value) {;\n    this.value = bizagi.clone(value);\n  },\n\n  getValue: function getValue(data) {;\n    return this.value || [];\n  } });","/*\r\n*   Name: BizAgi render layout Image Class\r\n*   Author: Andrs Fernando Muoz\r\n*   Comments:\r\n*   -   This script will define basic stuff for non editable image control inside templates\r\n*/\n\n$.Class.extend(\"bizagi.rendering.layoutImage\", {}, {\n  /*\r\n                                                      * Constructor\r\n                                                      */\n  init: function init(params) {\n    // Call base\n    this._super(params);\n  },\n\n  /*\r\n      * Template method to implement in each children to customize each control\r\n      */\n  renderControl: function renderControl() {\n    var self = this,\n    mode = self.getMode(),\n    useDefaultImage = false,\n    valueObj = self.properties.value || {},\n    uri = \"\";\n\n    //\n    var templateUri = self.renderFactory.getTemplate(\"layout-image\");\n\n    //Solucion temporal mientras se ajusta la respuesta del servicio cambiar despues de demo de 21/07/2015\n    /*if (value.value && value.value !== \"\" && value.value.length > 100){\r\n        var template64 = self.renderFactory.getTemplate(\"layout-image64\");\r\n        return $.fasttmpl(template64, { url: value.value, useDefaultImage: useDefaultImage });\r\n    }*/\n\n    /* if (mode === 'execution' && valueObj.value && valueObj.value.length > 0) {\r\n            uri = self.getImageUri();\r\n        }\r\n        else{\r\n            useDefaultImage = true;\r\n        } */\n\n    return $.fasttmpl(templateUri, { useDefaultImage: true });\n  },\n\n  /**\r\n      * Gets the base 64 image, specify in each device in order to change the size\r\n      */\n  getImage64: function getImage64() {\n    var self = this;\n    //Gets the real value of the image\n    var params = {\n      xpath: self.properties.xpath,\n      entity: self.value.guid,\n      surrogateKey: self.value.surrogateKey,\n      width: 96,\n      height: 96 };\n\n\n    return self.dataService.getEntityImage64(params);\n  },\n\n  /**\r\n      * Gets the url to get the array image, specify in each device in order to change the size\r\n      */\n  getImageUri: function getImageUri() {\n    var self = this;\n\n    var map = {\n      entity: self.value.guid,\n      surrogateKey: self.value.surrogateKey,\n      xpath: self.properties.xpath,\n      width: 96,\n      height: 96,\n      hash: self.value.value };\n\n\n    return self.dataService.serviceLocator.getUrl(\"render-entity-layout-imageByteArray\").replaceMultiple(map);\n  } });","/*\r\n *   Name: BizAgi Render Layout Simple Link Class\r\n *   Author: Andrs Fernando Muoz\r\n *   Comments:\r\n *   -   This script will define basic stuff for non editable link renders inside templates\r\n */\n\n$.Class.extend(\"bizagi.rendering.layoutLink\", {}, {\n  /*\r\n                                                     * Constructor\r\n                                                     */\n  init: function init(params) {\n    // Call base\n    this._super(params);\n  },\n\n  /*\r\n      * Template method to implement in each children to customize each control\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"layout-link\");\n    // Render template\n    var html = $.fasttmpl(template, { displayName: self.properties.displayName });\n    return html;\n  } });","/*\r\n *   Name: BizAgi Render Layout Label Class\r\n *   Author: Mauricio Snchez\r\n *   Comments:\r\n *   -   This script will define basic stuff for labels inside templates\r\n */\n\n$.Class.extend(\"bizagi.rendering.layoutLabel\", {}, {\n\n  /*\r\n                                                      * Constructor\r\n                                                      */\n  init: function init(params) {\n    // Call base\n    this._super(params);\n\n    this.properties.required = false;\n\n    // Set properties\n    this.properties.displayType = \"label\";\n    this.properties.labelAlign = this.originalProperties.labelAlign || \"left\";\n\n    // Calculate layout properties\n    this.calculateInitialLayoutProperties();\n\n\n  },\n\n  /*\r\n      * Template method to implement in each children to customize each control\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"layout-label\");\n    var value = self.properties.displayName || self.properties.value || \"\";\n    // Render template\n    var html = $.fasttmpl(template, { value: value });\n    return html;\n  } });","/*\r\n*   Name: BizAgi Render Layout Text Class\r\n*   Author: Mauricio Sanchez\r\n*   Comments:\r\n*   -   This script will define basic stuff for text renders inside templates\r\n*/\n\n$.Class.extend(\"bizagi.rendering.layoutText\", {}, {\n  /*\r\n                                                     * Constructor\r\n                                                     */\n  init: function init(params) {\n    // Call base\n    this._super(params);\n  },\n\n  initializeData: function initializeData(data) {\n    var self = this;\n    // Call base\n    this._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n    //properties.editable = false;\n  },\n\n  /*\r\n      * Template method to implement in each children to customize each control\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"layout-text\");\n    // Render template\n    var html = $.fasttmpl(template, { value: self.properties.value, editable: self.properties.editable });\n    return html;\n  },\n  /*\r\n      *   Method to render non editable values\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    var self = this;\n    // Executes the same template than normal render\n    return self.renderControl();\n  } });","/**\r\n *   Name: Bizagi Render Layout Simple Upload Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for non editable upload renders inside templates\r\n */\n\n$.Class.extend(\"bizagi.rendering.layoutUpload\", {}, {\n\n  /**\r\n                                                       *   Update or init the element data\r\n                                                       */\n  initializeData: function initializeData(data) {\n    var self = this;\n    // Call base\n    this._super(data);\n\n    var form = self.getFormContainer();\n\n    // Fill default properties\n    var properties = this.properties;\n\n    properties.editable = true;\n    properties.allowDelete = true;\n    properties.contexttype = form.params && form.params.data && form.params.data.contextType ? form.params.data.contextType : \"\";\n    properties.allowSendInMail = properties.allowSendInMail || false;\n  },\n\n  /**\r\n      * Get value files by data\r\n      */\n  getValueFilesByData: function getValueFilesByData(properties) {\n    var self = this;\n    var defer = $.Deferred();\n    var dataFiles;\n\n    if (properties.value.value) {//Normal entityTemplate in form QAF-2319\n      dataFiles = properties.value.value;\n    } else {//QAF-2210\n      dataFiles = properties.value;\n    }\n\n    var valueAuxFiles;\n    try {\n      if (self.isContextContainerWidgetRender()) {\n        valueAuxFiles = JSON.parse(\"{ \\\"files\\\": \" + dataFiles + \"}\");\n        defer.resolve(properties, valueAuxFiles);\n      } else {//context: my stuff\n        $.when(self.getDataFilesWithoutScope()).done(function (valueResult) {\n          valueAuxFiles = JSON.parse(\"{ \\\"files\\\": \" + valueResult + \"}\");\n          defer.resolve(properties, valueAuxFiles);\n        });\n      }\n    } catch (err) {\n      valueAuxFiles = JSON.parse(\"{ \\\"files\\\": []}\");\n      defer.resolve(properties, valueAuxFiles);\n      console.warn(\"Exception converting data files. Error: \", err);\n    }\n\n    return defer.promise();\n  },\n\n  isContextContainerWidgetRender: function isContextContainerWidgetRender() {\n    var self = this;\n    var formContainer = self.getFormContainer();\n\n    return formContainer.params.paramsRender && formContainer.params.paramsRender.idRender;\n  },\n\n  /**\r\n      * Get data files when access from My stuff\r\n      */\n  getDataFilesWithoutScope: function getDataFilesWithoutScope() {\n    var self = this;\n    //Gets the real value of the image\n    var params = {\n      xpath: self.properties.xpath,\n      entity: self.value.guid,\n      surrogateKey: self.value.surrogateKey };\n\n\n    return self.dataService.getFilesDataForLayoutUploadControl(params);\n  },\n\n  /**\r\n      *   Returns the internal value\r\n      */\n  getValue: function getValue() {\n    return this.files;\n  },\n\n  /**\r\n      *   Returns the xpath to be used\r\n      */\n  getUploadXpath: function getUploadXpath() {\n    return this.properties.xpath;\n  } });","/*\r\n*   Name: BizAgi Render Layout Boolean Class\r\n*   Author: Alexander Mejia\r\n*   Comments:\r\n*   -   This script will define basic stuff for boolean renders inside templates\r\n*/\n\n$.Class.extend(\"bizagi.rendering.layoutBoolean\", {}, {\n  /*\r\n                                                        * Constructor\r\n                                                        */\n  init: function init(params) {\n    // Call base\n    this._super(params);\n  },\n\n  initializeData: function initializeData(data) {\n    var self = this;\n    // Call base\n    this._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n    properties.editable = false;\n  },\n\n  /*\r\n      * Template method to implement in each children to customize each control\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"layout-boolean\");\n    // Render template\n    var html = $.fasttmpl(template, { value: this.properties.value });\n    return html;\n  },\n  /*\r\n      *   Method to render non editable values\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    var self = this;\n    // Executes the same template than normal render\n    return self.renderControl();\n  },\n\n  setValue: function setValue(value, triggerEvents) {\n    if (value === null || value === \"\") {\n      this.properties.value = \"\";\n    } else\n    if (value.toString().toLowerCase() === \"true\" || value.toString().toLowerCase() === \"false\") {\n      this.properties.value = bizagi.util.parseBoolean(value) ? this.getResource(\"render-boolean-yes\") : this.getResource(\"render-boolean-no\");\n    }\n    this._super(this.properties.value, triggerEvents);\n  } });","/**\r\n * Name: BizAgi Render Layout DateTime Class\r\n * Author: Andres Fernando Muoz\r\n * Comments:\r\n * - This script will define basic stuff for text renders inside templates\r\n */\n\n$.Class.extend(\"bizagi.rendering.layoutDateTime\", {}, {\n  /**\r\n                                                         * Constructor\r\n                                                         */\n  init: function init(params) {\n    // Call base\n    this._super(params);\n  },\n\n  /**\r\n      *\r\n      * @param data\r\n      */\n  initializeData: function initializeData(data) {\n    var self = this;\n    // Call base\n    self._super(data);\n\n    // Fill default properties\n    var properties = self.properties;\n    var dateFormat = self.getResource(\"dateFormat\");\n    var timeFormat = self.getResource(\"timeFormat\");\n\n    // We will hold here the value to display\n    properties.displayValue = \"\";\n    properties.showTime = properties.showTime !== undefined ? bizagi.util.parseBoolean(properties.showTime) : false;\n    properties.dateFormat = properties.dateFormat || dateFormat;\n    properties.timeFormat = properties.timeFormat || timeFormat;\n    properties.fullFormat = properties.dateFormat;\n\n    // Check if it has the showtime property\n    if (properties.showTime) {\n      if (properties.fullFormat.search(/[h|H]+/ig) === -1) {\n        properties.fullFormat = properties.fullFormat + ' ' + properties.timeFormat;\n      }\n    } else\n    {\n      var indexHour = properties.fullFormat.search(/[h|H]+/ig);\n      if (indexHour !== -1) {\n        properties.fullFormat = properties.fullFormat.substring(0, indexHour - 1);\n      }\n    }\n\n    // Read always parameter from server in invariant format\n    if (properties.value) {\n      var date = bizagi.util.dateFormatter.getDateFromInvariant(properties.value, properties.showTime);\n\n      // Format date to current format\n      if (date != 0) {\n        var datePickerRegional = bizagi.localization.getResource(\"datePickerRegional\");\n        self.value = properties.value; // Value must always hold the value with invariant format\n        properties.displayValue = bizagi.util.dateFormatter.formatDate(date, properties.fullFormat, datePickerRegional);\n      } else\n      {\n        self.value = null;\n      }\n    } else\n    {\n      self.value = null;\n      properties.value = \"\";\n      properties.displayValue = \"\";\n    }\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"layout-date-time\");\n    var value = self.properties.value === null || self.properties.value === \"\" ? \"\" : self.properties.value;\n\n    // Render template\n    return $.fasttmpl(template, { value: value });\n  },\n\n  /**\r\n      * Sets the value in the rendered control\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this,dateObj;\n    var properties = self.properties;\n    var dateControl = self.getDateControl();\n    var INVARIANT_FORMAT = \"MM/dd/yyyy H:mm:ss\";\n    self.i18n = bizagi.localization.getResource(\"datePickerRegional\");\n\n    if (value.length == INVARIANT_FORMAT.length || value.length == INVARIANT_FORMAT.length + 1) {\n      dateObj = bizagi.util.dateFormatter.getDateFromInvariant(value, true);\n    } else\n    {\n      dateObj = bizagi.util.dateFormatter.getDateFromInvariant(value);\n      if (dateObj && !isNaN(Date.parse(dateObj)) && !$.isNumeric(dateObj)) {\n        dateObj.setHours(0, 0, 0, 0);\n      }\n\n    }\n    // Set value in input\n    if (value && !isNaN(Date.parse(value))) {\n      var formattedDateTime = bizagi.util.dateFormatter.formatDate(dateObj, properties.fullFormat, self.i18n);\n      dateControl.text(formattedDateTime);\n    }\n  },\n\n  /**\r\n      * Gets the date control\r\n      */\n  getDateControl: function getDateControl() {\n    var self = this;\n    self.dateControl = $(\".ui-bizagi-render-date-time\", self.getControl());\n    return self.dateControl;\n  } });","/*\r\n*   Name: BizAgi Render Layout number Class\r\n*   Author: Andres Fernando Muoz\r\n*   Comments:\r\n*   -   This script will define basic stuff for text renders inside templates\r\n*/\n\n$.Class.extend(\"bizagi.rendering.layoutNumber\", {}, {\n  /*\r\n                                                       * Constructor\r\n                                                       */\n  init: function init(params) {\n    // Call base\n    this._super(params);\n  },\n  /*\r\n      *   Update or init the element data\r\n      */\n  initializeData: function initializeData(data) {\n    var self = this;\n    // Call base\n    this._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n    var format = this.getResource(\"numericFormat\");\n\n    properties.allowDecimals = typeof properties.allowDecimals !== \"undefined\" ? bizagi.util.parseBoolean(properties.allowDecimals) : this.getDefaultAllowDecimals(properties.dataType);\n    properties.numDecimals = properties.allowDecimals ? properties.numDecimals ? properties.numDecimals : typeof BIZAGI_DEFAULT_CURRENCY_INFO !== \"undefined\" ? BIZAGI_DEFAULT_CURRENCY_INFO.decimalDigits : 2 : 0;\n    properties.symbol = '';\n    properties.positiveFormat = format.positiveFormat;\n    properties.negativeFormat = format.negativeFormat;\n    properties.decimalSymbol = typeof BIZAGI_DEFAULT_CURRENCY_INFO !== \"undefined\" ? BIZAGI_DEFAULT_CURRENCY_INFO.decimalSeparator : format.decimalSymbol;\n    properties.digitGroupSymbol = typeof BIZAGI_DEFAULT_CURRENCY_INFO !== \"undefined\" ? BIZAGI_DEFAULT_CURRENCY_INFO.groupSeparator : format.digitGroupSymbol;\n    properties.groupDigits = this.getDefaultGroupDigits(properties.dataType);\n    properties.colorize = properties.colorizeOnNegative || false;\n  },\n\n  /*\r\n      * Template method to implement in each children to customize each control\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"layout-number\");\n    // Render template\n    var html = $.fasttmpl(template, { value: self.properties.value });\n    return html;\n  },\n  /*\r\n      *   Method to render non editable values\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    var self = this;\n    // Executes the same template than normal render\n    return self.renderControl();\n  },\n\n  /*\r\n      *   Returns the display value of the render\r\n      */\n  getDisplayValue: function getDisplayValue(value) {\n    var self = this;\n    var properties = self.properties;\n    var control = self.getControl();\n\n    // Workaround to get the display value by the format currency plugin, because it requires a control\n    var label = $('<label/>').html(value);\n    var regExp2 = /[\\u20AC \\u0024\\u00A3]/;\n    if (!value.toString().match(regExp2)) {\n      label.formatCurrency(\n      {\n        symbol: properties.symbol,\n        positiveFormat: properties.positiveFormat,\n        negativeFormat: properties.negativeFormat,\n        decimalSymbol: properties.decimalSymbol,\n        digitGroupSymbol: properties.digitGroupSymbol,\n        groupDigits: properties.groupDigits,\n        roundToDecimalPlace: properties.numDecimals,\n        colorize: properties.colorize });\n\n    }\n    return label.text();\n  },\n\n  /*\r\n      *   Return the allow decimals default property based on the datatype\r\n      */\n  getDefaultAllowDecimals: function getDefaultAllowDecimals(dataType) {\n    if (dataType) {\n      // Integer data types\n      if (dataType == 1 || dataType == 2 || dataType == 3 || dataType == 4 || dataType == 7) {\n        return false;\n      }\n      // Decimal data types\n      if (dataType == 6 || dataType == 8 || dataType == 10 || dataType == 11) {\n        return true;\n      }\n    }\n    return false;\n  },\n  /*\r\n      *   Return the group digits default property based on the datatype\r\n      */\n  getDefaultGroupDigits: function getDefaultGroupDigits(dataType) {\n    if (dataType) {\n      // Integer data types\n      if (dataType == 1 || dataType == 2 || dataType == 3 || dataType == 4 || dataType == 7) {\n        return false;\n      }\n      // Decimal data types\n      if (dataType == 6 || dataType == 8 || dataType == 10 || dataType == 11) {\n        return true;\n      }\n    }\n    return false;\n  } });","/*\r\n*   Name: BizAgi Render Layout Money Class\r\n*   Author: Andrs Fernando Muoz\r\n*   Comments:\r\n*   -   This script will define basic stuff for money renders inside templates\r\n*/\n\n$.Class.extend(\"bizagi.rendering.layoutMoney\", {}, {\n  /*\r\n                                                      * Constructor\r\n                                                      */\n  init: function init(params) {\n    // Call base\n    this._super(params);\n  },\n\n  /*\r\n      *   Update or init the element data\r\n      */\n  initializeData: function initializeData(data) {\n    var self = this;\n    // Call base\n    this._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n    var format = this.getResource(\"numericFormat\");\n\n    // Configures symbol\n    properties.showsymbol = typeof properties.showsymbol !== \"undefined\" ? properties.showsymbol : true;\n\n    if (properties.showsymbol) {\n      properties.symbol = properties.currencySymbol ? properties.currencySymbol :\n      typeof BIZAGI_DEFAULT_CURRENCY_INFO !== \"undefined\" ? BIZAGI_DEFAULT_CURRENCY_INFO.symbol : format.symbol;\n    } else\n    {\n      properties.symbol = \"\";\n    }\n    properties.groupDigits = true;\n  } });","/*\r\n *   Name: BizAgi Render Layout Label Class\r\n *   Author: Mauricio Snchez\r\n *   Comments:\r\n *   -   This script will define basic stuff for labels inside templates\r\n */\n\n$.Class.extend(\"bizagi.rendering.layoutPlaceholder\", {}, {\n\n  /*\r\n                                                            * Constructor\r\n                                                            */\n  init: function init(params) {\n    // Call base\n    this._super(params);\n\n  },\n\n  /*\r\n      *   Update or init the element data\r\n      */\n  initializeData: function initializeData(data) {\n    var self = this;\n    // Call base\n    this._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n\n  },\n\n  /*\r\n      * Template method to implement in each children to customize each control\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"layout-placeholder\");\n    var value = self.properties.value || self.properties.displayName || \"\";\n    // Render template\n    var html = $.fasttmpl(template, { value: value });\n    return html;\n  } });","/**\r\n *   Name: Bizagi Render Geolocation control\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for geolocation renders\r\n */\n\n$.Class.extend(\"bizagi.rendering.geolocation\", {}, {\n\n  /**\r\n                                                      * Constructor\r\n                                                      * @param {} data\r\n                                                      */\n  init: function init(data) {\n    // Call base\n    this._super(data);\n    this.geolocation = window.navigator.geolocation;\n\n    var properties = this.properties;\n    properties.allowUpdate = bizagi.util.parseBoolean(properties.allowUpdate) === true;\n\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"geolocation\");\n\n    // Render template\n    var html = $.fasttmpl(template, self.properties);\n    return html;\n  },\n\n  /**\r\n      * Public method to determine if a value is valid or not\r\n      * @param {} invalidElements\r\n      */\n  isValid: function isValid(invalidElements) {\n    // Call base\n    return this._super(invalidElements);\n  },\n\n  /**\r\n      * Sets the value in the rendered control\r\n      * @param {} value\r\n      * @returns {}\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    // Set internal value\n    this.setValue(value, false);\n  },\n\n  /**\r\n      * Template method to implement in each device to customize the render's behaviour to add handlers\r\n      * @returns {}\r\n      */\n  configureHandlers: function configureHandlers() {\n\n  },\n\n  /**\r\n      * Sets the value in the rendered control\r\n      * @param {} succes_callback\r\n      * @param {} fail_callback\r\n      */\n  getCurrentPosition: function getCurrentPosition(succes_callback, fail_callback) {\n    var self = this;\n\n    if (typeof self.geolocation === \"undefined\") {\n      if (fail_callback)\n      fail_callback(bizagi.localization.getResource(\"render-control-unsuported-by-browser\").replace(\"{0}\", self.properties.type));\n      return;\n    }\n\n    var onSuccess = function onSuccess(position) {\n      if (succes_callback)\n      succes_callback(position);\n    };\n\n    var onError = function onError(error) {\n      var strMessage = self.getErrorMessage(error);\n\n      if (fail_callback)\n      fail_callback(strMessage);\n    };\n\n    return self.geolocation.getCurrentPosition(onSuccess, onError);\n  },\n\n  /**\r\n      * Get message of error\r\n      * @param error\r\n      * @returns {*|string}\r\n      */\n  getErrorMessage: function getErrorMessage(error) {\n    var strMessage = \"\";\n\n    // Check for known errors\n    switch (error.code) {\n      case error.PERMISSION_DENIED:\n      case 1:\n        strMessage = bizagi.localization.getResource(\"render-geolocation-permission-denied\");\n        break;\n      case error.POSITION_UNAVAILABLE:\n      case 2:\n        strMessage = bizagi.localization.getResource(\"render-geolocation-position-unavailable\");\n        break;\n      case error.TIMEOUT:\n      case 3:\n        strMessage = bizagi.localization.getResource(\"render-geolocation-timeout\");\n        break;\n      default:\n        strMessage = \"WD: \" + bizagi.localization.getResource(\"render-geolocation-permission-denied\");\n        break;}\n\n\n    return strMessage;\n  },\n\n  /**\r\n      * Change precision number of coordinates\r\n      * @param data\r\n      * @returns {*}\r\n      */\n  performPrecision: function performPrecision(data) {\n    var geolocation = data.split(\" \") || \"\";\n\n    if (!geolocation) return data;\n\n    try {\n      var latitude = parseFloat(geolocation[0].trim());\n      var longitude = parseFloat(geolocation[1].trim());\n\n      return latitude.toPrecision(10) + \" \" + longitude.toPrecision(10);\n    } catch (e) {\n      return data;\n    }\n  } });","/**\r\n *   Name: Bizagi Render Upload Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for uploads\r\n */\n\n$.Class.extend(\"bizagi.rendering.upload\", {}, {\n  /***\r\n                                                 * Update or init the element data\r\n                                                 * @param data\r\n                                                 */\n  initializeData: function initializeData(data) {\n    var self = this;\n\n    // Call base\n    self._super(data);\n\n    var form = self.getFormContainer();\n\n    // Fill default properties\n    var properties = this.properties;\n\n    var maxFileSizeOfProperty = Number(properties.maxSize) || 0;\n    var maxFileSizeOfUser = typeof BIZAGI_SETTINGS !== \"undefined\" && typeof BIZAGI_SETTINGS.UploadMaxFileSize !== \"undefined\" ? Number(BIZAGI_SETTINGS.UploadMaxFileSize) : 4091904;\n\n    properties.maxSize = maxFileSizeOfProperty || maxFileSizeOfUser;\n    properties.maxfiles = Number(properties.maxfiles) || 999;\n    properties.validExtensions = properties.validExtensions || \"\";\n\n    if (properties.validExtensions.length > 0 && properties.validExtensions.indexOf(\".\") < 0) {\n      var singleExtensions = properties.validExtensions.replace(/\\ /gi, '').split(\";\");\n      var defExtensions = [];\n\n      for (var i = 0; i < singleExtensions.length; i++) {\n        if (singleExtensions[i].length > 0) {\n          defExtensions.push(\"*.\" + singleExtensions[i]);\n        } else {\n          //Removes the empty element\n          var index = singleExtensions.indexOf(singleExtensions[i]);\n          singleExtensions.splice(i, 1);\n        }\n      }\n\n      properties.validExtensions = defExtensions.join(\";\");\n    }\n\n    properties.addUrl = properties.addUrl || self.dataService.getUploadAddUrl();\n    properties.deleteUrl = properties.deleteUrl || undefined;\n    properties.editable = bizagi.util.parseBoolean(properties.editable) || false;\n    properties.allowDelete = bizagi.util.parseBoolean(properties.allowDelete) !== null && properties.editable ? bizagi.util.parseBoolean(properties.allowDelete) : false;\n\n    properties.contexttype = form.params && form.params.data && form.params.data.contextType ? form.params.data.contextType : \"\";\n    properties.allowSendInMail = properties.allowSendInMail || false;\n\n    // Set files property\n    self.files = properties.value || [];\n    self.filesCount = self.files.length;\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @returns {*|jQuery}\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var properties = self.properties;\n    var template = self.renderFactory.getTemplate(\"upload\");\n\n    // Render template\n    var html = $.fasttmpl(template, {\n      xpath: bizagi.util.encodeXpath(self.getUploadXpath()),\n      editable: properties.editable,\n      haveFiles: self.filesCount !== 0,\n      noFiles: self.filesCount === 0,\n      allowSendInMail: properties.allowSendInMail });\n\n\n    // Render current children\n    var items = \"\";\n    for (var i = 0; i < self.filesCount; i++) {\n      var file = { id: self.files[i][0], fileName: self.files[i][1] };\n      var item = self.renderUploadItem(file);\n\n      items += item;\n    }\n\n    html = self.replaceFilesHtml(html, items);\n    return html;\n  },\n\n  /**\r\n      * Method to render non editable values\r\n      * @returns {*|*|jQuery}\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    return this.renderControl();\n  },\n\n  /**\r\n      * Renders a single upload item\r\n      * @param file\r\n      * @returns {jQuery|*}\r\n      */\n  renderUploadItem: function renderUploadItem(file) {\n    var self = this;\n    var mode = self.getMode();\n    var itemTemplate = self.getTemplateItemName();\n    var template = self.renderFactory.getTemplate(itemTemplate);\n    var form = self.getFormContainer();\n    var printVersion = form.params && form.params.printversion;\n\n    // Don't render urls when not running in execution mode\n    var url = !self.isExecutionMode() ? \"\" : self.buildItemUrl(file); // TODO: Review if need it: javascript:void(0);\n\n    var html = $.fasttmpl(template, {\n      id: file.id,\n      mode: mode,\n      url: url,\n      allowDelete: self.properties.allowDelete,\n      filename: bizagi.util.decodeURI(file.fileName),\n      editable: self.properties.editable,\n      printVersion: printVersion || false });\n\n\n    return html;\n  },\n\n  /**\r\n      * Builds the upload item url\r\n      * @param file\r\n      * @returns {*}\r\n      */\n  buildItemUrl: function buildItemUrl(file) {\n    var self = this;\n    var properties = self.properties;\n    var form = self.getFormContainer();\n\n    return self.dataService.getUploadFileUrl({\n      idRender: properties.id,\n      xpath: self.getUploadXpath(),\n      xpathContext: properties.xpathContext,\n      idPageCache: properties.idPageCache,\n      fileId: file.id,\n      sessionId: form.properties.sessionId,\n      contexttype: properties.contexttype });\n\n  },\n\n  /**\r\n      * Replaces a {{files}} tag in the container for the specified \"replace\" element\r\n      * @param html\r\n      * @param replace\r\n      * @returns {*}\r\n      */\n  replaceFilesHtml: function replaceFilesHtml(html, replace) {\n    return html.replace(\"{{files}}\", replace);\n  },\n\n  /**\r\n      * Removes a file from the upload control\r\n      * @param item\r\n      * @param fileId\r\n      * @returns {*} Returns a deferred\r\n      */\n  deleteUploadItem: function deleteUploadItem(item, fileId) {\n    var self = this;\n    var properties = self.properties;\n    var xpath = self.getUploadXpath() + (bizagi.util.isNumeric(fileId) ? \"[id=\" + fileId + \"]\" : \"[id='\" + fileId + \"']\");\n\n    return self.dataService.deleteUploadFile({\n      url: properties.deleteUrl,\n      idRender: properties.id,\n      xpath: xpath,\n      xpathContext: properties.xpathContext,\n      idPageCache: properties.idPageCache,\n      contexttype: properties.contexttype }).\n    pipe(function () {\n\n      // Subtract counter\n      self.filesCount = self.filesCount - 1;\n\n      // Remove from local collection\n      self.files = $.grep(self.files, function (fileItem) {\n        return fileItem[0] != fileId;\n      });\n    });\n  },\n\n  /**\r\n      * Method to determine if the render value can be sent to the server or not\r\n      * @returns {boolean}\r\n      */\n  canBeSent: function canBeSent() {\n    // This render cannot be sent because it is full ajax\n    return false;\n  },\n\n  /**\r\n      * Sets the internal value\r\n      * @param value\r\n      * @param triggerEvents\r\n      */\n  setValue: function setValue(value, triggerEvents) {\n    var self = this;\n\n    // Set files property\n    self.files = value || []; // Dont remove this line\n    self.filesCount = self.files.length;\n\n    // Call base\n    self._super(value, triggerEvents);\n  },\n\n  /**\r\n      * Returns the internal value\r\n      * @returns {*}\r\n      */\n  getValue: function getValue() {\n    return this.files;\n  },\n\n  /**\r\n      * Public method to determine if a value is valid or not\r\n      * @param invalidElements\r\n      * @returns {boolean}\r\n      */\n  isValid: function isValid(invalidElements) {\n    var self = this;\n    var properties = self.properties;\n    var message;\n    var bValid = true;\n\n    // Clear error message\n    self.setValidationMessage(\"\");\n\n    // Check required\n    if (properties.required && properties.editable) {\n      var newRow = self.grid && self.grid.isFromCreatedRow.apply(self);\n\n      if (self.filesCount <= 0 && !newRow) {\n        var inlineEdit = self.grid ? self.grid.properties.inlineEdit : true;\n\n        if (inlineEdit) {\n          message = self.getResource(\"render-required-upload\").replaceAll(\"#label#\", properties.displayName);\n          invalidElements.push({ xpath: properties.xpath, message: message });\n          bValid = false;\n        }\n      }\n    }\n\n    return bValid;\n  },\n\n  /**\r\n      * Build add params to send to the server\r\n      */\n  buildAddParams: function buildAddParams() {\n    var self = this;\n    var properties = self.properties;\n    var form = self.getFormContainer();\n    var data = {};\n    var prefix = self.Class.BA_CONTEXT_PARAMETER_PREFIX;\n\n    data[prefix + \"xpath\"] = self.getUploadXpath();\n    data[prefix + \"idRender\"] = properties.id;\n    data[prefix + \"xpathContext\"] = properties.xpathContext;\n    data[prefix + self.Class.BA_PAGE_CACHE] = properties.idPageCache;\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"sessionId\"] = form.properties.sessionId;\n    data[prefix + \"contexttype\"] = properties.contexttype;\n\n    try {\n      if (typeof BIZAGI_SESSION_NAME !== \"undefined\") {\n        data[BIZAGI_SESSION_NAME] = form.properties.sessionId;\n      } else {\n        data[\"JSESSIONID\"] = form.properties.sessionId;\n      }\n    } catch (e) {\n      data[\"JSESSIONID\"] = form.properties.sessionId;\n    }\n\n    return data;\n  },\n\n  /**\r\n      * Returns the xpath to be used\r\n      * @returns {*}\r\n      */\n  getUploadXpath: function getUploadXpath() {\n    return this.properties.xpath;\n  },\n\n  /**\r\n      * Returns the xpathContext to be used\r\n      * @returns {*}\r\n      */\n  getUploadXpathContext: function getUploadXpathContext() {\n    return this.getXpathContext() || this.properties.xpathContext;\n  },\n\n  checkRequired: function checkRequired(invalidElements) {\n    var self = this;\n    var properties = self.properties;\n\n    if (bizagi.util.parseBoolean(properties.required)) {\n      if (self.grid && self.grid.properties.inlineAdd === true) {\n        if (!self.hasValue() && !self.getControl().parents(\"tr\").data(\"new-row\")) {\n          self.setRenderRequired(invalidElements, properties);\n          return false;\n        }\n      } else {\n        if (!self.hasValue()) {\n          self.setRenderRequired(invalidElements, properties);\n          return false;\n        }\n      }\n    }\n\n    return true;\n  },\n\n  setRenderRequired: function setRenderRequired(invalidElements, properties) {\n    var self = this;\n    var message = self.getResource(\"render-required-text\").replaceAll(\"#label#\", properties.displayName);\n    invalidElements.push({ xpath: properties.xpath, message: message });\n  },\n\n  /**\r\n      * Templates\r\n      */\n  getTemplateItemName: function getTemplateItemName() {\n    return \"uploadItem\";\n  },\n\n  /**\r\n      * Method to perform the format to value\r\n      * @param value\r\n      * @returns {((*)[]|*)[]}\r\n      */\n  formatValue: function formatValue(value) {\n    var validateObjectStructure = function validateObjectStructure(item) {\n      return !!(item.uploadId && item.fileName);\n    };\n    var validateArrayStructure = function validateArrayStructure(item) {\n      return !!(item[0] && item[1]);\n    };\n\n    return (value || []).reduce(function (result, item) {\n      var isFormatValid = false;\n      var validator = bizagi.util.bzValidator(item).\n      add(validateObjectStructure).\n      validate(function (response) {\n        isFormatValid = response.errors && !response.errors.length;\n        if (isFormatValid) {\n          result.push([item.uploadId, item.fileName]);\n        }\n      });\n\n      if (!isFormatValid) {\n        validator.add(validateArrayStructure, \"The value is not in a valid format\").\n        validate(function (response) {\n          if (response.errors && response.errors.length > 0) {\n            console.warn(response.errors);\n          } else {\n            result.push([item]);\n          }\n        });\n      }\n\n      return result;\n    }, []);\n  } });","/**\r\n *   Name: Bizagi Desktop Render Upload Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the upload render class in order to provide a compatibility to browsers without flash installed\r\n */\n\n// Extends from render base\nbizagi.rendering.desktop.render.extend(\"bizagi.rendering.desktop.upload\", bizagi.rendering.render.base.prototype);\n// Extends from render Desktop base\nbizagi.rendering.desktop.upload.extend(\"bizagi.rendering.desktop.upload\", {\n  // Statics\n  BA_ACTION_PARAMETER_PREFIX: bizagi.render.services.service.BA_ACTION_PARAMETER_PREFIX,\n  BA_CONTEXT_PARAMETER_PREFIX: bizagi.render.services.service.BA_CONTEXT_PARAMETER_PREFIX,\n  BA_PAGE_CACHE: bizagi.render.services.service.BA_PAGE_CACHE },\nbizagi.rendering.upload.prototype);\n\n// Extends itself\nbizagi.rendering.desktop.upload.extend(\"bizagi.rendering.desktop.upload\", {}, {\n\n  /**\r\n                                                                                 * Template method to implement in each children to customize each control\r\n                                                                                 * @returns {*|jQuery}\r\n                                                                                 */\n  renderControl: function renderControl() {\n    var self = this;\n    var properties = self.properties;\n    var template = self.renderFactory.getTemplate(\"upload\");\n\n    // Render template\n    var html = $.fasttmpl(template, {\n      xpath: bizagi.util.encodeXpath(self.getUploadXpath()),\n      editable: properties.editable,\n      haveFiles: self.filesCount != 0,\n      allowSendInMail: properties.allowSendInMail });\n\n\n    // Render current children\n    var items = \"\";\n    for (var i = 0; i < self.filesCount; i++) {\n      var file = { id: self.files[i][0], fileName: self.files[i][1] };\n      var item = self.renderUploadItem(file);\n      items += item;\n    }\n\n    html = self.replaceFilesHtml(html, items);\n    return html;\n  },\n\n  /**\r\n      * Returns the html templated element\r\n      * @returns {*}\r\n      */\n  renderElement: function renderElement() {\n    return this._super(\"render-base\");\n  },\n\n  /**\r\n      * Template method to implement in each device to customize each render after processed\r\n      */\n  postRender: function postRender() {\n    var self = this;\n\n    // Call base\n    self._super();\n\n    self.isClicked = false;\n    if (self.properties.allowSendInMail) self.bindEmailDialog();\n\n    self.checkMaxFiles();\n\n    self.preventDefaultForAnchorTag();\n  },\n\n  postRenderReadOnly: function postRenderReadOnly() {\n    var self = this;\n    self._super();\n\n    if (self.properties.allowSendInMail)\n    self.bindEmailDialog();\n  },\n\n  changeRequired: function changeRequired(argument) {\n    this.properties.required = argument;\n    this.changeRequiredLabel(argument);\n  },\n\n  changeRequiredLabel: function changeRequiredLabel(argument) {\n    var control = this.getControl();\n\n    if (control.length > 0) {\n      if (this.getMode() !== \"execution\") {\n        if (bizagi.util.parseBoolean(argument) === true && this.properties.editable) {\n          control.addClass(\"control-required\");\n        } else {\n          control.removeClass(\"control-required\");\n        }\n      } else {\n        if (bizagi.util.parseBoolean(argument) === true && !this.hasValue() && this.properties.editable) {\n          control.addClass(\"control-required\");\n        } else {\n          control.removeClass(\"control-required\");\n        }\n      }\n    }\n\n    this.triggerRenderValidate();\n  },\n\n  changeCellRequired: function changeCellRequired(argument) {\n    this.changeRequired(argument);\n  },\n\n  /**\r\n      * Adds a validation message to the render TODO:Remover al genomizar\r\n      * @param message\r\n      */\n  setValidationMessage: function setValidationMessage(message) {\n    this._super(message);\n    var iconError = $(\".ui-bizagi-render-icon-error\", this.element);\n    $(iconError).parent().removeClass(\"ui-hidden\");\n  },\n\n  /**\r\n      * Bind dialog for send email\r\n      */\n  bindEmailDialog: function bindEmailDialog() {\n    var self = this;\n    var control = self.getControl();\n    var xpathContext = self.getXpathContext() || \"\";\n    var xpath = self.properties.xpath;\n    var template = self.properties.orientation === \"rtl\" ? \"dialog-send-email-rtl\" : \"dialog-send-email\";\n\n    $(\".ui-bizagi-render-upload-sendmail\", control).bizagiSendEmail({\n      tmpl: self.renderFactory.getTemplate(template),\n      value: self.value,\n      self: self,\n      dataService: self.dataService,\n      properties: self.properties,\n      xpath: xpath,\n      xpathContext: xpathContext });\n\n\n  },\n\n  bindExternalPopup: function bindExternalPopup() {\n    var self = this;\n    var control = self.getControl();\n    var params = self.getParams();\n    var properties = self.properties;\n    var isInGrid = self.grid ? true : false;\n\n    var options = {\n      idCase: params.idCase || bizagi.context.idCase,\n      idWorkitem: params.idWorkitem || bizagi.context.idWorkitem,\n      field: properties.xpath.split(\".\")[properties.xpath.split(\".\").length - 1] };\n\n\n    var xpathContext = self.getXpathContext();\n    var xpath = properties.xpath;\n\n    if (isInGrid || xpathContext !== \"\") {\n      if (typeof xpathContext == \"string\") {\n        $.extend(options, { xPath: xpathContext.split(\"[\")[0] + \".\" + xpath });\n      } else {\n        $.extend(options, { xPath: self.grid.properties.xpath + \".\" + xpath });\n      }\n    } else {\n      $.extend(options, { xPath: xpath });\n    }\n\n    $(\".ui-bizagi-render-upload-sendmail\", control).tooltip();\n\n    $(\".ui-bizagi-render-upload-sendmail\", control).click(function () {\n      var url = \"App/Upload/SendAttachedDocs.aspx?\";\n      url += \"idCase=\" + options.idCase;\n      url += \"&idWorkitem=\" + options.idWorkitem;\n      url += \"&xPath=\" + options.xPath;\n      url += \"&field=\" + options.field;\n\n      self.dataService.getCaseNumber({\n        idCase: options.idCase }).\n      done(function (response) {\n        var caseNumber = response.caseNumber;\n        caseNumber = caseNumber ? caseNumber : options.idCase;\n        url += \"&radNumber=\" + caseNumber;\n\n        // fix for SUITE-8927\n        var values = [];\n        if (self.value) {\n          for (var i = 0; i < self.value.length; i++) {\n            values.push(self.value[i][1]);\n          }\n        }\n\n        self.currentPopup = \"genericiframe\";\n        $(document).triggerHandler(\"showDialogWidget\", {\n          widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_GENERICIFRAME,\n          widgetURL: url,\n          injectCss: [\".ui-bizagi-old-render*\", \".ui-bizagi-old-render-upload\"],\n          modalParameters: {\n            title: \"Send attached documents\",\n            id: \"sendEmail\" },\n\n          afterLoad: function afterLoad(params) {\n            var input = document.getElementById(\"btnClose\");\n            if (input) {\n              input.style.display = \"none\";\n            }\n            input = document.getElementById(\"btnCloseConfirm\");\n            if (input) {\n              input.style.display = \"none\";\n            }\n\n            // fix for SUITE-8927\n            if (params) {\n              if (params.values) {\n                var values = params.values;\n                var labels = document.getElementsByTagName(\"label\");\n                if (labels) {\n                  for (var i = 0; i < labels.length; i++) {\n                    var label = labels[i];\n                    // fix for SUITE-8927\n                    if (label.innerText !== undefined) {\n                      if (values.indexOf(label.innerText) === -1) {\n                        if (label.control) {\n                          label.control.checked = false;\n                          label.parentElement.style.display = \"none\";\n                        } else {\n                          label.previousSibling.checked = false;\n                          label.parentElement.style.display = \"none\";\n                        }\n\n                      }\n                    }\n                    if (label.textContent !== undefined) {\n                      if (values.indexOf(label.textContent) === -1) {\n                        if (label.control) {\n                          label.control.checked = false;\n                          label.parentElement.style.display = \"none\";\n                        } else {\n                          label.previousSibling.checked = false;\n                          label.parentElement.style.display = \"none\";\n                        }\n                      }\n                    }\n                  }\n                }\n              }\n            }\n          },\n          afterLoadParams: {\n            values: values } });\n\n\n      });\n\n    });\n\n  },\n\n  /**\r\n      * Template method to implement in each device to customize the render's behaviour to add handlers\r\n      */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    var control = self.getControl();\n    var properties = self.properties;\n    // Call base\n    self._super();\n\n    self.pluginUpload = $(\".ui-bizagi-render-upload-wrapper\", control).bizagiUpload({\n      renderReference: this,\n      dialogTemplate: self.renderFactory.getTemplate(\"upload.dialog\"),\n      properties: {\n        url: properties.addUrl,\n        xpath: this.getUploadXpath(),\n        idRender: properties.id,\n        xpathContext: self.getUploadXpathContext(),\n        idPageCache: properties.idPageCache,\n        idSession: properties.sessionId,\n        validExtensions: properties.validExtensions,\n        maxSize: properties.maxSize,\n        contexttype: properties.contexttype,\n        networkSpeed: networkSpeed() },\n\n      onUploadFileCompletedCallback: self.onUploadFileCompleted,\n      onChangeFile: self.onChangeFile,\n      onCheckMaxSize: self.checkMaxSize,\n      onValidate: self.validate,\n      maxAllowedFiles: properties.maxfiles,\n      uploadedFiles: self.filesCount,\n      dialogTitle: self.getResource(\"render-upload-link-label\") });\n\n\n    control.off(\"click\").on(\"click\", \".bz-file-name\", function (evt) {\n      evt.preventDefault();\n      var item = $(this).closest(\".ui-bizagi-render-upload-item\");\n      self.downloadFile(item.data());\n    });\n\n    control.on(\"click\", \".bz-btn-icn--delete\", function () {\n      var item = $(this).closest(\".ui-bizagi-render-upload-item\");\n      var file = item.data();\n      $.when(self.deleteUploadItem(item, file.id)).done(function () {\n        // Remove item\n        item.hide();\n\n        // Detach item\n        item.remove();\n\n        // Check maxFiles\n        self.checkMaxFiles();\n\n        //Set Value\n        self.setValue(self.files, false);\n\n        // Trigger change\n        self.triggerRenderChange();\n      });\n    });\n  },\n\n  configureHandlersReadOnly: function configureHandlersReadOnly() {\n    var self = this;\n    var control = self.getControl();\n    control.off(\"click\").on(\"click\", \".bz-file-name\", function (evt) {\n      var item = $(this).closest(\".ui-bizagi-render-upload-item\");\n      self.downloadFile(item.data());\n    });\n  },\n\n  /**\r\n      * Download file\r\n      * @param file\r\n      */\n  downloadFile: function downloadFile(file) {\n    var self = this;\n    var properties = self.properties;\n\n    self.dataService.getFile({\n      idRender: properties.id,\n      xpath: properties.xpath,\n      xpathContext: self.getXpathContext(),\n      idPageCache: properties.idPageCache,\n      fileId: file.id,\n      contexttype: properties.contexttype }).\n    then(function (response) {\n      return bizagi.util.handleJSONResponse(response);\n    }).then(function (blobFile) {\n      bizagi.util.downloadBlobFile(blobFile, file.filename);\n    }).fail(function (err) {\n      var form = self.getFormContainer();\n      form && form.failHandler(err);\n    });\n  },\n\n  /**\r\n      * Opens a dialog in order to upload file per file\r\n      */\n  openUploadDialog: function openUploadDialog() {\n    var self = this;\n    var properties = self.properties;\n    var doc = window.document;\n\n    // Reset Flag\n    self.isClicked = false;\n\n    var dialogBox = self.dialogBox = $(\"<div class='ui-bizagi-component-loading'/>\");\n    dialogBox.empty();\n    dialogBox.appendTo(\"body\", doc);\n\n    // Define buttons\n    var buttons = {};\n\n    // Select button\n    buttons[self.getResource(\"render-upload-dialog-select\")] = function (e) {\n      e.stopPropagation();\n      if (!self.isClicked) {\n        self.isClicked = true;\n        if (self.checkMaxSize() && self.checkFileTypes() && !self.maxFilesLimit()) {\n          $.when(self.processUploadFile()).done(function (data) {\n            self.onUploadFileCompleted(data);\n            self.closeUploadDialog();\n          });\n        } else {\n          self.isClicked = false;\n        }\n      }\n    };\n\n    // Cancel button\n    buttons[self.getResource(\"text-cancel\")] = function () {\n      self.closeUploadDialog();\n    };\n\n    // Creates a dialog\n    dialogBox.dialog({\n      width: 500,\n      height: 350,\n      title: self.getResource(\"render-upload-link-label\"),\n      modal: true,\n      buttons: buttons,\n      close: function close() {\n        self.closeUploadDialog();\n      },\n      resizeStop: function resizeStop(event, ui) {\n        if (self.form) {\n          self.form.resize(ui.size);\n        }\n      } });\n\n\n    // Render template\n    var dialogTemplate = self.renderFactory.getTemplate(\"upload.dialog\");\n    $.tmpl(dialogTemplate, {\n      url: properties.addUrl,\n      xpath: properties.xpath,\n      idRender: properties.id,\n      xpathContext: properties.xpathContext,\n      idPageCache: properties.idPageCache,\n      idSession: properties.sessionId,\n      validExtensions: properties.validExtensions.replace(\";\", \",\"),\n      maxSize: properties.maxSize,\n      contexttype: properties.contexttype }).\n    appendTo(dialogBox);\n    $(\".ui-bizagi-loading-message\").remove();\n  },\n\n  /**\r\n      * Process an upload file into the server\r\n      * @returns {*}\r\n      */\n  processUploadFile: function processUploadFile() {\n    var self = this;\n    var defer = new $.Deferred();\n    var dialogBox = self.dialogBox;\n    var uploadForm = $(\"form\", dialogBox);\n    var uploadIFrame = $(\"iframe\", uploadForm);\n\n    // When the iframe loads the user we need to evaluate the response and close the dialog\n    var timeoutFn = function timeoutFn() {\n      try {\n        var response = \"\";\n        if (uploadIFrame[0].contentWindow) {\n          var iframeContent = bizagi.util.isIE8() ? $(uploadIFrame[0].contentWindow.document.body) :\n          $(uploadIFrame[0].contentWindow.eval(\"document.body\"));\n\n          response = iframeContent.text();\n        }\n        if (response.length > 0) {\n          defer.resolve(response);\n        } else {\n          var timeoutForFn = setTimeout(function () {\n            timeoutFn();\n            clearTimeout(timeoutForFn);\n          }, 50);\n        }\n      } catch (e) {\n        // Nothing todo, just close the window and show error message\n        self.closeUploadDialog();\n        window.alert(\"Error:\" + e.toString());\n      }\n    };\n\n    // Execute the timed function in order to check when the response has arrived\n    timeoutFn();\n\n    // Submit the form\n    uploadForm.submit();\n\n    return defer.promise();\n  },\n\n  /**\r\n      * Close the upload dialog\r\n      */\n  closeUploadDialog: function closeUploadDialog() {\n    var self = this;\n    self.isClicked = false;\n    self.dialogBox.dialog(\"destroy\");\n    self.dialogBox.remove();\n  },\n\n  /**\r\n      * Verify if control reached maximum number of files\r\n      */\n  maxFilesLimit: function maxFilesLimit() {\n    return this.filesCount >= this.properties.maxfiles;\n  },\n\n  /**\r\n      * Check if the max files condition is true to hide the upload link\r\n      */\n  checkMaxFiles: function checkMaxFiles() {\n    var self = this;\n    var properties = self.properties;\n    var control = self.getControl();\n    var uploadField = $(\".ui-bizagi-render-upload-wrapper\", control);\n\n    if (self.maxFilesLimit()) {\n      //Hide upload element             \n      bizagi.util.cssExtended(uploadField.find(\"a\"), \"display:none!important\");\n\n      //Disable the control, to prevent further click events\n      self.enabled = false;\n\n    } else {\n      // show upload element\n      bizagi.util.cssExtended(uploadField.find(\"a\"), \"display:block!important\");\n\n      //Enable the control, to prevent further click events\n      self.enabled = true;\n    }\n\n    //Checks if the files count is equals to 0, to show the no files dialog\n    if (self.filesCount == 0) {\n      $(\".no-files\", control).css(\"display\", \"block\");\n    } else {\n      $(\".no-files\", control).hide();\n    }\n  },\n\n  onChangeFile: function onChangeFile(files) {\n    var self = this;\n    var i = 0;\n    var length;\n    var file;\n    var maxSize = self.properties.maxSize;\n\n    if (files) {\n\n      length = files.length;\n\n      for (; i < length;) {\n\n        file = files[i++];\n\n        if (file.size > maxSize) {\n          self.previousCheck = false;\n          return;\n        }\n      }\n    }\n\n    self.previousCheck = true;\n  },\n\n  /**\r\n      * Resolves default value align for each display type\r\n      * @param displayType\r\n      * @returns {string}\r\n      */\n  getDefaultValueAlign: function getDefaultValueAlign() {//displayType is not more important for align values \n    return \"\";\n  },\n\n  /**\r\n      * Handler to process server response after a file has been uploaded\r\n      * @param renderReference\r\n      * @param response\r\n      */\n  onUploadFileCompleted: function onUploadFileCompleted(renderReference, response) {\n    var self = renderReference;\n    var control = self.getControl();\n    var uploadWrapper = $(\".ui-bizagi-render-upload-wrapper\", control);\n\n    // Pre-parse response because in IE sometimes the server returns the JSON enclosed with some weird <FONT> tags\n    response = response.replace(/<.+>({.*})\\r?\\n?.*<.+>/gm, \"$1\");\n\n    // Check if previous call return a valid json\n    try {\n      var result = JSON.parse(response);\n    } catch (e) {\n      // Invalid json, try to catch error response\n      var errorList = [\n      {\n        toFind: \"Maximum request length\",\n        message: self.getResource(\"render-upload-alert-maxsize\").replace(\"{0}\", self.properties.maxSize) }];\n\n\n\n      $.each(errorList, function (key, validation) {\n        if (response.indexOf(validation.toFind) >= 0 && !result) {\n          result = { type: \"error\", message: validation.message };\n        }\n      });\n\n      if (!result) {\n        // Dont mapped \n        result = { type: \"error\", message: \"Error:\" + result };\n      }\n    }\n\n    if (result.type != \"error\") {\n      // Locate it before the upload wrapper\n      var newItem = self.renderUploadItem({ id: result.id, fileName: result.fileName });\n      $(newItem).insertBefore(uploadWrapper);\n\n      self.processControlLayout(self.properties.valueFormat);\n\n      // Increment counter\n      self.filesCount = self.filesCount + 1;\n\n      //Copy the files value but not its reference\n      var files = self.files.slice();\n\n      //Add the new item to this temporal array\n      files.push([result.id, result.fileName]);\n\n      // Check maxFiles\n      self.checkMaxFiles();\n      //Set Value\n      self.setValue(files, false);\n\n\n      // Trigger change\n      self.triggerRenderChange();\n\n      if (typeof self.grid != \"undefined\" && typeof self.grid.properties != \"undefined\") {\n        self.grid.properties.canBeExported = true;\n      }\n    } else {\n\n      //HTTP Error 404.13 is launched when the max file size configurated for iis is reached. the Request to the server is blocked \n      if (result.message === \"Error:undefined\" && response.indexOf(\"HTTP Error 404.13\") > -1)\n      result.message = self.getResource(\"render-upload-iis-maxsize\");\n      // Show server error\n      if (!result.isMaintenanceWindow) bizagi.showMessageBox(result.message);\n    }\n  },\n\n  //#region Render-Base    \n\n  changeFontItalic: function changeFontItalic($element, italic) {\n\n    this._super($element, italic);\n\n    if ($element.hasClass(\"ui-bizagi-render-control\") && bizagi.util.parseBoolean(italic)) {\n      this.getElementsToStylize(control).css(\"padding\", \"0 .1em\");\n    }\n\n    return this;\n  },\n\n  getElementsToStylize: function getElementsToStylize(context) {\n    return $(\".ui-bizagi-render-upload-item .bz-file-name, .no-files\", context);\n  },\n\n  //#endregion\n\n  /**\r\n   * checkMaxSize\r\n   * @param {object} renderReference\r\n   */\n  checkMaxSize: function checkMaxSize(renderReference) {\n    var self = renderReference;\n    var properties = self.properties;\n    var dialogBox = self.dialogBox;\n    var fileControl = $(\"input[type=file]\", dialogBox).get(0);\n\n    // Dont exist any fucking way to know file size in IEx, just skip this validation\n    if (fileControl.files != undefined) {\n      if (fileControl.files.length > 0) {\n        if (fileControl.files[0].size === 0) {\n          self.showError(self.getResource(\"render-upload-error-file-empty\").\n          replace(\"%s\", fileControl.files[0].name));\n          return false;\n        }\n        if (fileControl.files[0].size > properties.maxSize) {\n          self.showError(self.getResource(\"render-upload-alert-maxsize\").replace(\"{0}\", properties.maxSize));\n          return false;\n        }\n        return true;\n      } else {\n        self.showError(self.getResource(\"render-required-upload\").replace(\"#label#\", \"\"));\n        return false;\n      }\n    } else {\n      if (bizagi.util.isIE()) {\n        if (fileControl.value === \"\" || !fileControl.value) {\n          self.showError(self.getResource(\"render-required-upload\").replace(\"#label#\", \"\"));\n          return false;\n        } else {\n          if (self.previousCheck) {\n            return true;\n          } else {\n            if (document.documentMode > 9) {\n              self.showError(self.getResource(\"render-upload-alert-maxsize\").\n              replace(\"{0}\", properties.maxSize));\n              return false;\n            } else {\n              return true;\n            }\n          }\n        }\n      } else {\n        return true;\n      }\n    }\n  },\n\n  checkFileTypes: function checkFileTypes() {\n    var self = this;\n    var properties = self.properties;\n    var dialogBox = self.dialogBox;\n    var file = $(\"input[type=file]\", dialogBox).val();\n\n    if (properties.validExtensions && properties.validExtensions.length > 0) {\n      var validExtensions = properties.validExtensions.replaceAll(\"*.\", \"\").split(\";\");\n      if (!self.stringEndsWithValidExtension(file, validExtensions, true)) {\n        self.showError(self.getResource(\"render-upload-allowed-extensions\") + properties.validExtensions);\n        return false;\n      }\n    }\n    return true;\n  },\n\n  /**\r\n      * Additional validations\r\n      * @param renderReference\r\n      * @returns {boolean}\r\n      */\n  validate: function validate(renderReference) {\n    var self = renderReference;\n    var properties = self.properties;\n    var fileControl = $(\"input[type=file]\", self.dialogBox).get(0) || {};\n\n    //Verifies that the file name is not repeated\n    if (self.files) {\n      for (var i = 0; i < self.files.length; i++) {\n        var fileName = self.files[i][1];\n        if (fileName.toUpperCase() == fileControl.files[0].name.toUpperCase()) {\n          self.showError(self.getResource(\"render-upload-error-file-exists\"));\n          return false;\n        }\n      }\n    }\n\n    return true;\n  },\n\n  stringEndsWithValidExtension: function stringEndsWithValidExtension(stringToCheck, acceptableExtensionsArray, required) {\n    if (required == false && stringToCheck.length == 0) return true;\n\n    for (var i = 0; i < acceptableExtensionsArray.length; i++) {\n      if (acceptableExtensionsArray[i].toLowerCase() == \"*\") return true;\n      if (stringToCheck.toLowerCase().endsWith(acceptableExtensionsArray[i].toLowerCase())) return true;\n    }\n\n    return false;\n  },\n\n  showError: function showError(message) {\n    var self = this;\n    var errorContainer = $(\"#alert-file-upload\", self.dialogBox);\n\n    // Empty container\n    errorContainer.empty();\n    errorContainer.show();\n\n    errorContainer.html(message);\n  },\n\n  /**\r\n      * Cleans current value\r\n      */\n  cleanData: function cleanData() {\n    var self = this;\n    self.setValue(null);\n\n    return $.when(self.clearDisplayValue());\n  },\n\n  /**\r\n      * Sets the value in the rendered control\r\n      */\n  clearDisplayValue: function clearDisplayValue() {\n    var self = this;\n    var control = self.getControl();\n\n    var arrayItems = control.find(\".ui-bizagi-render-upload-item\");\n    var promises = [];\n\n    $.each(arrayItems, function (index, value) {\n      var item = $(value);\n      var file = item.data();\n\n      if (file) {\n        var promise = $.when(self.deleteUploadItem(item, file.id)).done(function () {\n          // Detach item\n          item.remove();\n\n          // Trigger change\n          self.triggerRenderChange();\n        });\n        promises.push(promise);\n      }\n    });\n\n    // Remove items\n    arrayItems.hide();\n\n    // Check maxFiles\n    self.filesCount = 0;\n    self.checkMaxFiles();\n\n    return $.when.apply($, promises);\n  },\n\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n    var properties = self.properties,control,item;\n\n    if (properties.editable) {\n      if (value && value.length === 0) {\n        control = self.getControl();\n        item = control.find(\".ui-bizagi-render-upload-item\");\n        item.hide();\n        item.remove();\n        self.checkMaxFiles();\n      }\n    }\n\n    self._super(value);\n  },\n\n  getLabel: function getLabel() {\n    return $(\"label\", this._super());\n  } });","/**\r\n *   Name: Bizagi Render ECM upload control\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for ECM Control\r\n */\n\n$.Class.extend(\"bizagi.rendering.ecm\", {}, {\n\n  /**\r\n                                              * Update or init the element data\r\n                                              * @param data\r\n                                              */\n  initializeData: function initializeData(data) {\n    var self = this;\n    // Call base\n    this._super(data);\n\n    var self = this;\n    var properties = self.properties;\n\n    properties.maxSize = Number(properties.maxSize) || (typeof BIZAGI_SETTINGS !== \"undefined\" && typeof BIZAGI_SETTINGS.UploadMaxFileSize !== \"undefined\" ? Number(BIZAGI_SETTINGS.UploadMaxFileSize) : properties.maxSize = Number(properties.maxSize) || 4091904);\n    properties.maxFiles = Number(properties.maxfiles) || 999;\n    properties.validExtensions = properties.validExtensions || \"\";\n\n    if (properties.validExtensions.length > 0 && properties.validExtensions.indexOf(\".\") < 0) {\n      var singleExtensions = properties.validExtensions.split(\";\");\n      for (var i = 0; i < singleExtensions.length; i++) {\n        singleExtensions[i] = \"*.\" + singleExtensions[i];\n      }\n      properties.validExtensions = singleExtensions.join(\";\");\n    }\n\n    properties.addUrl = self.dataService.serviceLocator.getUrl(\"render-ecm-upload-url\") + \"?action=uploadECMFile\";\n    properties.editUrl = self.dataService.serviceLocator.getUrl(\"render-ecm-upload-url\") + \"?action=updateECMFileContent\";\n    properties.deleteUrl = properties.deleteUrl || undefined;\n    properties.allowDelete = bizagi.util.parseBoolean(properties.allowDelete) !== null ? bizagi.util.parseBoolean(properties.allowDelete) : true;\n    properties.q_xpath = bizagi.util.encodeXpath(properties.xpath);\n    properties.showMetadata = properties.showMetadata === undefined || properties.showMetadata === null ? true : bizagi.util.parseBoolean(properties.showMetadata);\n\n    var dateFormat = this.getResource(\"dateFormat\");\n    var timeFormat = this.getResource(\"timeFormat\");\n\n    // We will hold here the value to display\n    properties.displayValue = \"\";\n    properties.showTime = properties.showTime !== undefined ? bizagi.util.parseBoolean(properties.showTime) : false;\n    properties.dateFormat = properties.dateFormat || dateFormat;\n    properties.timeFormat = properties.timeFormat || timeFormat;\n    properties.fullFormat = properties.dateFormat;\n\n    // Set files property\n    self.files = properties.value || [];\n    self.filesCount = self.files.length;\n\n    properties.xpathContext = this.parent.properties.xpathContext || properties.xpathContext || \"\";\n\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @param listControl\r\n      * @param fileProperties\r\n      * @returns {*}\r\n      */\n  renderControl: function renderControl(listControl, fileProperties) {\n    var self = this;\n    var properties = self.properties;\n    var template = self.renderFactory.getTemplate(\"ecm\");\n    var mode = self.getMode();\n    var defer = new $.Deferred();\n\n    properties.value = fileProperties ? [[fileProperties.idFileUpload, fileProperties.fileName]] : self.value;\n    var html = $.fasttmpl(template, properties, {\n      getFileExtension: self.getFileExtension,\n      isImage: self.isImage });\n\n\n    if (self.properties.value != undefined) {\n\n      var lengthValues = self.properties.value.length;\n\n      if (lengthValues === 0) {\n        defer.resolve(html);\n      }\n\n      $.each(self.properties.value, function (key, value) {\n        var data = {};\n\n        data.idFileUpload = value[0];\n        data.fileName = value[1];\n        data.idPageCache = self.properties.idPageCache;\n        data.xpathContext = self.getXpathContext();\n        data.xPath = self.properties.xpath;\n        data.editable = self.properties.editable;\n        data.idAttrib = self.properties.idAttrib;\n\n        var form = self.getFormContainer();\n        if (form && form.properties && form.properties.sessionId) {\n          data.sessionId = form.properties.sessionId;\n        }\n\n        if (mode === \"execution\") {\n          $.when(self.renderFileLayout(data, fileProperties)).done(function (item) {\n            lengthValues--;\n\n            if (bizagi.loader.productBuildToAbout && bizagi.loader.productBuildToAbout.indexOf(\"10.4\") === 0) {\n              item = item.replaceAll(\"Handlers/MetadataFile\", \"Handlers/Metadata\");\n            }\n\n            html = self.replaceItemHtml(html, self.properties.id + \"-\" + data.idFileUpload, item);\n            if (lengthValues === 0) {\n              defer.resolve(html);\n            }\n          });\n\n        }\n      });\n    } else {\n      defer.resolve(html);\n    }\n    return defer.promise();\n  },\n\n  replaceItemHtml: function replaceItemHtml(html, id, replace) {\n    return html.replace(\"{{\" + id + \"}}\", replace);\n  },\n\n  renderFileLayout: function renderFileLayout(data, fileProperties) {\n    var self = this;\n    var form = self.getFormContainer();\n    var metadataTemplate = self.renderFactory.getTemplate(\"ecm-metadata\");\n\n    var deferred = $.Deferred();\n\n    $.when(self.dataService.getECMMetadata(data),\n    fileProperties ? [fileProperties] : self.dataService.getFileProperties(data)).\n    done(function (metaData, fileProperties) {\n\n      fileProperties[0].data = data;\n\n      // Make xpath context\n      fileProperties[0].xpathContext = fileProperties[0].xpathContext || form.properties.xpathContext || \"\";\n      fileProperties[0].xpath = self.properties.xpath;\n\n      metaData[0].filename = data.fileName;\n      metaData[0].url = self.buildItemUrl(fileProperties[0]);\n\n      // Define File Properties\n      metaData[0].ecm_ecmStatus = fileProperties[0].ecmStatus;\n      metaData[0].ecm_isVisible = fileProperties[0].isVisible;\n      metaData[0].ecm_allowUpdateMetadata = fileProperties[0].allowUpdateMetadata;\n      metaData[0].ecm_allowDelete = fileProperties[0].allowDelete;\n      metaData[0].ecm_allowUpdateContent = fileProperties[0].allowUpdateContent;\n      metaData[0].ecm_allowView = fileProperties[0].allowView;\n      metaData[0].ecm_allowCheckOut = fileProperties[0].allowCheckOut;\n      metaData[0].ecm_allowCancelCheckOut = fileProperties[0].allowCancelCheckOut;\n      metaData[0].ecm_allowEdit = data.editable && fileProperties[0].allowEdit;\n      metaData[0].ecm_ecmStatus = fileProperties[0].ecmStatus;\n      metaData[0].idFileUploads = fileProperties[0].idFileUpload;\n      metaData[0].xpath = fileProperties[0].xpath;\n      metaData[0].value = bizagi.util.parseBoolean(fileProperties[0].value);\n      metaData[0].deviceType = bizagi.detectDevice();\n\n      var html = $.fasttmpl(metadataTemplate, metaData[0]);\n      deferred.resolve(html);\n    });\n\n    return deferred.promise();\n  },\n\n  isImage: function isImage(file) {\n    var extension = this.getFileExtension(file);\n    var image = [\"JPG\", \"JPEG\", \"GIF\", \"PNG\", \"BMP\"];\n\n    return image.indexOf(extension.toUpperCase()) > -1 ? true : false;\n  },\n\n  replaceFilesHtml: function replaceFilesHtml(html, replace) {\n    return html.replace(\"{{files}}\", replace);\n  },\n\n  /**\r\n      * Method to render non editable values\r\n      * @returns {*}\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    return this.renderControl();\n  },\n\n  /**\r\n      * Method to determine if the render value can be sent to the server or not\r\n      * @returns {boolean}\r\n      */\n  canBeSent: function canBeSent() {\n    // This render cannot be sent because it is full ajax\n    return false;\n  },\n\n  /**\r\n      * Builds the upload item url\r\n      * @param file\r\n      * @returns {*}\r\n      */\n  buildItemUrl: function buildItemUrl(file) {\n    var self = this;\n    var p_sessionId = bizagi.cookie(\"JSESSIONID\");\n\n    if (!file.data) {\n      file.data = { fileName: file.fileName, idAttrib: file.idAttrib };\n    }\n\n    return self.dataService.getECMFileUrl({\n      idFileUpload: file.idFileUpload,\n      xPath: file.xpath || file.xPath,\n      xpathContext: file.xpathContext,\n      idAttrib: file.data.idAttrib,\n      idPageCache: self.properties.idPageCache,\n      fileName: file.data.fileName.replace(/ /g, \"_\"),\n      p_sessionId: p_sessionId,\n      sessionId: file.data.sessionId || \"\" });\n\n  },\n\n  buildAddParams: function buildAddParams() {\n    var self = this;\n    var properties = self.properties;\n    var data = {};\n\n    // data.fileExt = properties.validExtensions;\n    // data.fileDesc = properties.validExtensions ? self.getResource(\"render-upload-allowed-extensions\") + properties.validExtensions : \"\";\n    data.xPath = properties.xpath;\n    data.idAttrib = properties.idAttrib;\n    data.xpathContext = properties.xpathContext;\n    data.metaValues = [];\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = properties.idPageCache;\n\n    return data;\n  },\n\n  /**\r\n      * Get name of file extension\r\n      * @param fileName\r\n      * @returns {*}\r\n      */\n  getFileExtension: function getFileExtension(fileName) {\n    fileName = fileName || \"\";\n    return fileName.split(\".\").pop();\n  },\n\n  /**\r\n      * Sets the internal value\r\n      * @param value\r\n      * @param triggerEvents\r\n      */\n  setValue: function setValue(value, triggerEvents) {\n    var self = this;\n    var properties = self.properties;\n\n    // Call base\n    self._super(value, triggerEvents);\n\n    // Set files property\n    self.files = properties.value || [];\n    self.filesCount = self.files.length ? self.files.length : properties.value;\n  },\n\n  /**\r\n      * Gets xpath context\r\n      * @returns {*|string}\r\n      */\n  getXpathContext: function getXpathContext() {\n    return this.properties.xpathContext || \"\";\n  },\n\n  /**\r\n      * Returns the xpath to be used\r\n      * @returns {*}\r\n      */\n  getUploadXpath: function getUploadXpath() {\n    return this.properties.xpath;\n  },\n\n  /**\r\n      * Removes a file from the ECM control\r\n      * @param item\r\n      * @param fileId\r\n      * @returns {*} Returns a deferred\r\n      */\n  deleteUploadItem: function deleteUploadItem(item, fileId) {\n    var self = this;\n    var properties = self.properties;\n\n    var params = {\n      idFileUpload: fileId,\n      xPath: properties.xpath,\n      idAttrib: properties.idAttrib,\n      idPageCache: properties.idPageCache,\n      xpathContext: self.getXpathContext() };\n\n\n    return self.dataService.deleteECMFile(params).pipe(function () {\n\n      // Subtract counter\n      self.filesCount = self.filesCount - 1;\n\n      // Remove from local collection\n      self.files = $.grep(self.files, function (fileItem) {\n        return fileItem[0] != fileId;\n      });\n    });\n  },\n\n  /**\r\n      * Lock a file from the ECM control\r\n      * @param item\r\n      * @param fileId\r\n      * @returns {*} Returns a deferred\r\n      */\n  lockUploadItem: function lockUploadItem(fileId) {\n    var self = this;\n    var properties = self.properties;\n\n    var params = {\n      idFileUpload: fileId,\n      xPath: properties.xpath,\n      idAttrib: properties.idAttrib,\n      idPageCache: properties.idPageCache,\n      xpathContext: self.getXpathContext() };\n\n\n    return self.dataService.checkOutFile(params);\n  },\n\n  /**\r\n      * Unlock a file from the ECM control\r\n      * @param item\r\n      * @param fileId\r\n      * @returns {*} Returns a deferred\r\n      */\n  unlockUploadItem: function unlockUploadItem(fileId) {\n    var self = this;\n    var properties = self.properties;\n\n    var params = {\n      idFileUpload: fileId,\n      xPath: properties.xpath,\n      idAttrib: properties.idAttrib,\n      idPageCache: properties.idPageCache,\n      xpathContext: self.getXpathContext() };\n\n\n    return self.dataService.cancelCheckOut(params);\n  } });","/**\r\n *   Name: Bizagi Render Yes-no Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for yes-no renders\r\n */\n\n$.Class.extend(\"bizagi.rendering.yesno\", {}, {\n\n  /**\r\n                                                * Update or init the element data\r\n                                                * @param {} data\r\n                                                */\n  initializeData: function initializeData(data) {\n    // Call base\n    this._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n    properties.value = typeof properties.value != \"undefined\" ? bizagi.util.parseBoolean(properties.value) : null;\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      */\n  renderControl: function renderControl() {\n    var template = this.renderFactory.getTemplate(\"yesno\");\n    var randomId = bizagi.util.randomNumber(100, 10000000);\n\n    // Render template\n    var html = $.fasttmpl(template, {\n      id: randomId,\n      editable: this.properties.editable });\n\n\n    return html;\n  },\n\n  /**\r\n      * Gets the display value of the render\r\n      */\n  getDisplayValue: function getDisplayValue() {\n    var value = this.getValue();\n\n    if (bizagi.util.parseBoolean(value) === true) {\n      return this.getResource(\"render-boolean-yes\");\n    } else if (bizagi.util.parseBoolean(value) === false) {\n      return this.getResource(\"render-boolean-no\");\n    } else {\n      return \"\";\n    }\n  },\n\n  /**\r\n      * Check if a render has no value for required validation\r\n      * @returns {boolean}\r\n      */\n  hasValue: function hasValue() {\n    var value = this.getValue();\n\n    if (bizagi.util.isEmptyValue(value)) return false;\n    return bizagi.util.parseBoolean(value) !== null;\n  } });","/**\r\n *   Name: Bizagi Render Letter Class\r\n*   Author: Diego Parra\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for letter renders\r\n */\n\n$.Class.extend(\"bizagi.rendering.letter\", {}, {\n\n  /**\r\n                                                 * Update or init the element data\r\n                                                 * @param {} data\r\n                                                 */\n  initializeData: function initializeData(data) {\n    // Call base\n    this._super(data);\n\n    // Create a variable to check if the letter has been opened when editable\n    this.letterOpened = false;\n  },\n\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @returns {}\r\n      */\n  renderControl: function renderControl() {\n    var template = this.renderFactory.getTemplate(\"letter\");\n\n    // Render template\n    return $.fasttmpl(template);\n  },\n\n\n  /**\r\n      * Method to render non editable values\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    var template = this.renderFactory.getTemplate(\"letter.readonly\");\n\n    // Render template\n    return $.fasttmpl(template);\n  },\n\n  /**\r\n      * Returns the letter content from the server\r\n      */\n  getLetterContent: function getLetterContent() {\n    // Set flag to true\n    this.letterOpened = true;\n\n    return this.dataService.getLetterContent({\n      url: this.properties.getUrl,\n      idRender: this.properties.id,\n      xpath: this.getXpath(),\n      xpathContext: this.getContextXpath(),\n      idPageCache: this.properties.idPageCache });\n\n  },\n\n  /**\r\n      * Sends the content to the server in order to save\r\n      * @param {} content\r\n      */\n  saveLetterContent: function saveLetterContent(content) {\n    return this.dataService.saveLetterContent({\n      url: this.properties.saveUrl,\n      idRender: this.properties.id,\n      xpath: this.getXpath(),\n      xpathContext: this.getContextXpath(),\n      idPageCache: this.properties.idPageCache,\n      content: content });\n\n  },\n\n  /**\r\n      * Returns the letter content from the server\r\n      */\n  getCanGenerateLetter: function getCanGenerateLetter() {\n    return this.dataService.getCanGenerateLetter({\n      idRender: this.properties.id,\n      xpath: this.getXpath(),\n      xpathContext: this.getContextXpath(),\n      idPageCache: this.properties.idPageCache });\n\n  },\n\n  /**\r\n      * Saves the form\r\n      */\n  saveForm: function saveForm() {\n    var self = this;\n    var form = self.getFormContainer();\n    return form.saveForm();\n  },\n\n  isValid: function isValid(invalidElements) {\n    var self = this;\n    var properties = self.properties;\n    var message;\n\n    // Don't check non-editable renders\n    if (bizagi.util.parseBoolean(properties.visible) == false) return true;\n\n    // Don't check non-editable renders\n    if (bizagi.util.parseBoolean(properties.editable) == false) return true;\n\n    // Clear error message\n    self.setValidationMessage(\"\");\n\n    // Check required\n    if (properties.required) {\n      if (self.letterOpened == false) {\n        message = self.getResource(\"render-letter-required-text\").replaceAll(\"#label#\", properties.displayName);\n        invalidElements.push({ xpath: properties.xpath, message: message });\n        return false;\n      }\n    }\n\n    return true;\n  },\n\n  /**\r\n      * Returns the current xpath\r\n      */\n  getXpath: function getXpath() {\n    return this.properties.xpath;\n  },\n\n  /**\r\n      * Returns the current context xpath\r\n      */\n  getContextXpath: function getContextXpath() {\n    return this.properties.xpathContext;\n  } });","/**\r\n *   Name: Bizagi Render Form Link Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for form link renders\r\n */\n\n$.Class.extend(\"bizagi.rendering.formLink\", {}, {\n\n  /**\r\n                                                   * Update or init the element data\r\n                                                   * @param data\r\n                                                   */\n  initializeData: function initializeData(data) {\n    // Call base\n    this._super(data);\n\n    // Set properties\n    var properties = this.properties;\n\n    properties.displayType = \"value\";\n    properties.maximized = bizagi.util.parseBoolean(this.properties.maximized) != null ? bizagi.util.parseBoolean(this.properties.maximized) : false;\n\n    // Calculate layout properties\n    this.calculateInitialLayoutProperties();\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @returns {*|jQuery}\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var properties = self.properties;\n    var template = self.renderFactory.getTemplate(\"formLink\");\n\n    // Render template\n    return $.fasttmpl(template, {\n      id: properties.id,\n      align: properties.valueAlign,\n      displayName: properties.displayName,\n      value: properties.value,\n      editable: properties.editable,\n      likeButton: bizagi.util.parseBoolean(properties.likeButton) || false });\n\n  },\n\n  /**\r\n      * Method to render non editable values\r\n      * @returns {*|*|jQuery}\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    // Executes the same template than normal render\n    return this.renderControl();\n\n  },\n\n  /**\r\n      * Method to customize each render after processed\r\n      */\n  postRender: function postRender() {\n    this._super();\n    this.getLabel().addClass(\"bz-form-label--hidden\");\n  },\n\n  /**\r\n      * Method to customize each render after processed in read-only mode\r\n      */\n  postRenderReadOnly: function postRenderReadOnly() {\n    this._super();\n    this.getLabel().addClass(\"bz-form-label--hidden\");\n  },\n\n  /**\r\n      * Submits a edit request for a link display form\r\n      * @returns {*} Returns a deferred\r\n      */\n  submitEditRequest: function submitEditRequest() {\n    var self = this;\n    var properties = self.properties;\n\n    // Don't send request when the link is not editable\n    if (!properties.editable && !properties.value) return null;\n\n    return self.dataService.editLinkForm({\n      url: properties.editUrl,\n      idRender: properties.id,\n      xpath: self.getFormLinkXpath(),\n      xpathContext: properties.xpathContext,\n      idPageCache: properties.idPageCache });\n\n  },\n\n  /**\r\n      * Submits a link save request for the displayed form\r\n      * @param data\r\n      * @returns {*} Returns a deferred\r\n      */\n  submitSaveRequest: function submitSaveRequest(data) {\n    var self = this;\n    var properties = self.properties;\n\n    // Don't send request when the link is not editable\n    if (!properties.editable && !properties.value) return null;\n\n    var xpath = self.getFormLinkXpath();\n    var xpathContext = xpath;\n\n    if (typeof properties.xpathContext !== \"undefined\" && properties.xpathContext !== \"\") {\n      xpathContext = xpath ? properties.xpathContext + \".\" + xpath : properties.xpathContext;\n    }\n\n    return self.dataService.saveLinkForm({\n      url: properties.saveUrl,\n      idRender: properties.id,\n      xpathContext: xpathContext,\n      submitData: data }).\n    done(function (response) {\n      var executeSubmitOnChange = true;\n\n      if (response && response.type === \"validationMessages\")\n      executeSubmitOnChange = false;\n\n      if (executeSubmitOnChange)\n      self.submitOnChange({});\n    });\n  },\n\n  /**\r\n      * Sends all the data to the server then refreshes the form\r\n      * @param data\r\n      * @returns {*} Returns a promise\r\n      */\n  saveFormLinkData: function saveFormLinkData(data) {\n    var self = this;\n    var properties = self.properties;\n\n    var xpath = self.getFormLinkXpath();\n    var xpathContext = xpath;\n\n    if (typeof properties.xpathContext !== \"undefined\" && properties.xpathContext !== \"\") {\n      xpathContext = xpath ? properties.xpathContext + \".\" + xpath : properties.xpathContext;\n    }\n\n    var submitData = $.extend({}, data);\n    delete submitData.idPageCache;\n\n    return $.when(!bizagi.util.isEmpty(submitData) ? self.dataService.multiaction().submitData({\n      action: \"SAVE\",\n      data: submitData,\n      idPageCache: data.idPageCache,\n      xpathContext: xpathContext }) :\n    undefined);\n  },\n\n  /**\r\n      * Submits a rollback request\r\n      * @param params\r\n      * @returns {*} Returns a deferred when done\r\n      */\n  submitRollbackRequest: function submitRollbackRequest(params) {\n    var self = this;\n    var properties = self.properties;\n\n    return $.when(function () {\n      // Don't send request when the link is not editable\n      if (!properties.editable && !properties.value) {\n        return null;\n      } else {\n        return self.dataService.rollbackLinkForm({\n          url: properties.rollbackUrl,\n          idRender: properties.id,\n          xpath: self.getFormLinkXpath(),\n          xpathContext: properties.xpathContext,\n          idPageCache: params ? params.idPageCache : properties.idPageCache });\n\n      }\n    }());\n  },\n\n  /**\r\n      * Submits a commit request\r\n      * @returns {*} Returns a deferred when done\r\n      */\n  submitCommitRequest: function submitCommitRequest() {\n    var self = this;\n    var properties = self.properties;\n\n    return $.when(function () {\n      // Don't send request when the link is not editable\n      if (!properties.editable && !properties.value) {\n        return null;\n      } else {\n        return self.dataService.commitLinkForm({\n          url: properties.commitUrl,\n          idRender: properties.id,\n          xpath: self.getFormLinkXpath(),\n          xpathContext: properties.xpathContext,\n          idPageCache: properties.idPageCache });\n\n      }\n    }());\n  },\n\n  /**\r\n      * Submits a checkpoint request\r\n      * @returns {*} Returns a deferred when done\r\n      */\n  submitCheckpointRequest: function submitCheckpointRequest() {\n    var self = this;\n    var properties = self.properties;\n\n    return $.when(function () {\n      // Don't send request when the link is not editable\n      if (!properties.editable && !properties.value) {\n        return null;\n      } else {\n        return self.dataService.sendCheckpoint({\n          url: properties.checkpointUrl,\n          idRender: properties.id,\n          xpath: self.getFormLinkXpath(),\n          xpathContext: properties.xpathContext,\n          idPageCache: properties.idPageCache });\n\n      }\n    }());\n  },\n\n  /**\r\n      * Submits a submitData request\r\n      * @returns {*} Returns a deferred when done\r\n      */\n  submitDataRequest: function submitDataRequest() {\n    var self = this;\n    var properties = self.properties;\n\n    return $.when(function () {\n      // Don't send request when the link is not editable\n      if (!properties.editable && !properties.value) {\n        return null;\n      } else {\n        return self.dataService.submitData({\n          url: properties.checkpointUrl,\n          action: \"SUBMITDATA\",\n          idRender: properties.id,\n          xpath: self.getFormLinkXpath(),\n          xpathContext: properties.xpathContext,\n          idPageCache: properties.idPageCache });\n\n      }\n    }());\n  },\n\n  /**\r\n      * Public method to determine if a value is valid or not\r\n      * @param invalidElements\r\n      */\n  isValid: function isValid(invalidElements) {\n    // Automatically this render is valid, so we can't check a required link\n  },\n\n  /**\r\n      * Get Form Link xpath to use\r\n      * @returns {*}\r\n      */\n  getFormLinkXpath: function getFormLinkXpath() {\n    return this.properties.xpath;\n  },\n\n  /**\r\n      * Method to determine if the render value can be sent to the server or not\r\n      * @returns {boolean}\r\n      */\n  canBeSent: function canBeSent() {\n    return false;\n  },\n\n  /**\r\n      * Sets the value in the rendered control\r\n      * @param value\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    // Don't do anything\n  },\n\n  /*\r\n     * Cleans current value\r\n     */\n  cleanData: function cleanData() {\n    // Don't do anything\n  } });","/**\r\n *   Name: Bizagi Render Document Generator\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for document generator render\r\n */\n\n$.Class.extend(\"bizagi.rendering.document\", {}, {\n\n  /**\r\n                                                   * Update or init the element data\r\n                                                   * @param data\r\n                                                   */\n  initializeData: function initializeData(data) {\n    // Call base\n    this._super(data);\n\n    var properties = this.properties;\n\n    properties.validate = bizagi.util.parseBoolean(properties.validate) != null ? bizagi.util.parseBoolean(properties.validate) : false;\n    properties.downloadalldocuments = properties.downloadalldocuments ? properties.downloadalldocuments : false;\n    properties.allowGenerate = properties.allowGenerate !== undefined ? properties.allowGenerate : true;\n    properties.append = properties.append ? properties.append : false;\n\n    if (properties.caption) {\n      properties.caption = $.trim(properties.caption);\n\n      if (properties.caption.length === 0) {\n        properties.caption = this.getResource(\"render-documentgenerator-button-label\");\n      }\n    } else {\n      properties.caption = this.getResource(\"render-documentgenerator-button-label\");\n    }\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @returns {*}\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n\n    self.preRenderControl();\n\n    var properties = self.properties;\n    var mode = self.getMode();\n    var downloadAllDocuments = properties.downloadalldocuments;\n    var allowGenerate = properties.allowGenerate;\n    var template = self.renderFactory.getTemplate(self.getTemplate());\n    var documents = properties.value || [];\n    var noFiles = documents ? documents.length === 0 : true;\n\n    // Render template\n    var html = self.getControlHtml(template, mode, downloadAllDocuments, allowGenerate, properties, noFiles);\n\n    // Render current children\n    var items = this.renderDocumentsHtml(documents);\n    items += this.renderActionsHtml(documents, noFiles, downloadAllDocuments);\n\n    html = self.replaceFilesHtml(html, items);\n    return html;\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @param template\r\n      * @param mode\r\n      * @param downloadAllDocuments\r\n      * @param allowGenerate\r\n      * @param properties\r\n      * @param noFiles\r\n      * @returns {*|jQuery}\r\n      */\n  getControlHtml: function getControlHtml(template, mode, downloadAllDocuments, allowGenerate, properties, noFiles) {\n    var self = this;\n\n    return $.fasttmpl(template, {\n      noActivateButton: false,\n      editable: mode !== \"execution\",\n      mode: mode,\n      downloadalldocuments: downloadAllDocuments,\n      required: properties.required,\n      allowgenerate: allowGenerate,\n      xpath: self.getXpath(properties.xpath),\n      append: properties.append,\n      caption: properties.caption,\n      noFiles: noFiles,\n      allowSendInMail: properties.allowSendInMail });\n\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @param xpath\r\n      * @returns {*}\r\n      */\n  getXpath: function getXpath(xpath) {\n    return xpath;\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      */\n  preRenderControl: function preRenderControl() {\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @returns {boolean}\r\n      */\n  activateButton: function activateButton() {\n    return true;\n  },\n\n  /**\r\n      * Returns the xpath to be used\r\n      * @param xpath\r\n      * @returns {*}\r\n      */\n  getDocumentXpath: function getDocumentXpath(xpath) {\n    return xpath;\n  },\n\n  /**\r\n      * Returns the xpath to be used\r\n      * @returns {*}\r\n      */\n  getContextXpath: function getContextXpath() {\n    return this.properties.xpathContext;\n  },\n\n  /**\r\n      * Renders a single document item\r\n      * @param file\r\n      * @returns {*|jQuery}\r\n      */\n  renderDocumentItem: function renderDocumentItem(file) {\n    var self = this;\n    var mode = self.getMode();\n    var template = self.renderFactory.getTemplate(self.getTemplateItem());\n    var url = self.buildItemUrl(file);\n\n    // Don't render urls when not running in execution mode\n    if (mode !== \"execution\") url = \"javascript:void(0);\";\n\n    var html = $.fasttmpl(template, {\n      url: url,\n      allowDelete: self.properties.allowDelete,\n      filename: file.fileName,\n      id: file.id,\n      mode: mode,\n      editable: self.properties.editable,\n      joined: false });\n\n\n    return html;\n  },\n\n  /**\r\n      * Builds the upload item url\r\n      * @param file\r\n      * @returns {*}\r\n      */\n  buildItemUrl: function buildItemUrl(file) {\n    var self = this;\n    var properties = self.properties;\n\n    return self.dataService.getUploadFileUrl({\n      idRender: properties.id,\n      xpath: self.getDocumentXpath(properties.xpath),\n      xpathContext: self.getContextXpath(),\n      idPageCache: properties.idPageCache,\n      fileId: file.id,\n      sessionId: self.getSessionId() });\n\n  },\n\n  /**\r\n      * Builds the download all items item url\r\n      * @returns {*}\r\n      */\n  buildAllDocumentsUrl: function buildAllDocumentsUrl() {\n    var self = this;\n    var properties = self.properties;\n\n    return self.dataService.getAllDocumentsDownloadUrl({\n      xpath: self.getDocumentXpath(properties.xpath),\n      xpathContext: self.getContextXpath(),\n      idPageCache: properties.idPageCache,\n      idCase: properties.caseId,\n      idWorkItem: properties.workitemId,\n      sessionId: self.getSessionId() });\n\n  },\n\n  /**\r\n      * Template method to implement in each device to customize each render after processed (Virtual method)\r\n      * @returns {string}\r\n      */\n  postRender: function postRender() {\n    // Call base\n    this._super();\n\n    return \"<div></div>\";\n  },\n\n  /**\r\n      * Template method to implement in each device to customize each render after processed in read-only mode\r\n      */\n  postRenderReadOnly: function postRenderReadOnly() {\n    var self = this;\n    var mode = self.getMode();\n\n    if (mode !== \"design\") {\n      var control = self.getControl();\n      var htmlControl = self.renderControl();\n\n      control.append(htmlControl);\n\n      self.updateControlForPrintMode(control);\n\n      // Execute the same as post-render\n      self.postRender();\n    }\n  },\n\n  /**\r\n      * Saves the form before the document generation\r\n      * @returns {*}\r\n      */\n  validateContainer: function validateContainer() {\n    // Check if the form is valid, then generate\n    var form = this.getFormContainer();\n    return form.validateForm();\n  },\n\n  /**\r\n      * Saves the form before the document generation\r\n      * @returns {*}\r\n      */\n  save: function save() {\n    var form = this.getFormContainer();\n\n    return form.saveForm();\n  },\n\n  /**\r\n      * Replaces a {{files}} tag in the container for the specified \"replace\" element\r\n      * @param html\r\n      * @param replace\r\n      * @returns {*}\r\n      */\n  replaceFilesHtml: function replaceFilesHtml(html, replace) {\n    return html.replace(\"{{files}}\", replace);\n  },\n\n  /**\r\n      * Replaces a {{actions}} tag in the container for the specified \"replace\" element\r\n      * @param html\r\n      * @param replace\r\n      * @returns {*}\r\n      */\n  replaceActionsHtml: function replaceActionsHtml(html, replace) {\n    return html.replace(\"{{actions}}\", replace);\n  },\n\n  /**\r\n      * Method to determine if the render value can be sent to the server or not\r\n      * @returns {boolean}\r\n      */\n  canBeSent: function canBeSent() {\n    // This render cannot be sent because it is full ajax\n    return false;\n  },\n\n  /**\r\n      * Method to determine if the render value can be sent to the server or not\r\n      * @param invalidElements\r\n      * @returns {boolean}\r\n      */\n  isValid: function isValid(invalidElements) {\n    var self = this;\n    var properties = self.properties;\n    var message;\n\n    // Don't check non-editable renders\n    if (bizagi.util.parseBoolean(properties.visible) === false) return true;\n\n    // Don't check non-editable renders\n    if (bizagi.util.parseBoolean(properties.editable) === false) return true;\n\n    // Clear error message\n    self.setValidationMessage(\"\");\n\n    // Check required\n    if (properties.required && !properties.buttonExecuted) {\n      if (self.value) {\n        if (self.value.length > 0) return true;\n        message = self.getResource(\"render-document-required-text\");\n        invalidElements.push({ xpath: properties.xpath, message: message });\n        return false;\n      }\n    }\n\n    return true;\n  },\n\n  /**\r\n      * Template method to implement in each device to customize the render's behaviour to add handlers\r\n      */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n\n    // Call base\n    self._super();\n\n    // Attach handler\n    var $generateLink = $(\".ui-bizagi-button-documentgenerator\", self.getControl());\n\n    if (self.isExecutionMode()) {\n      $generateLink.click(function (e) {\n        if (e.isPropagationStopped()) return;\n        e.stopPropagation();\n\n        self.properties.buttonExecuted = true;\n\n        if (self.properties.validate) {\n          // Check if the form is valid, then generate\n          var isValid = self.validateContainer();\n          if (isValid) {\n            self.documentTemplateGenerate();\n          }\n        } else {\n          // Just generate the form\n          self.documentTemplateGenerate();\n        }\n\n        self.properties.buttonExecuted = false;\n      });\n\n      // Configure basic handlers\n      self.attachEvents();\n    }\n  },\n\n  /**\r\n      * Method to customize the render's behaviour to add handlers when the control is readonly\r\n      */\n  configureHandlersReadOnly: function configureHandlersReadOnly() {\n    if (this.isExecutionMode()) {\n      this.attachEvents();\n    }\n  },\n\n  /**\r\n      *  Configure event handlers\r\n      */\n  attachEvents: function attachEvents() {\n    var self = this;\n    var $control = self.getControl();\n\n    // Configure download handler for document item\n    $(\".ui-bizagi-document-upload-item a > span\", $control).click(function (e) {\n      if (e.isPropagationStopped()) return;\n      e.stopPropagation();\n\n      var $item = $(this).closest(\".ui-bizagi-document-upload-item\");\n      var file = $item.data();\n\n      if (!file.joined) {\n        self.downloadFile(file);\n      } else {\n        self.downloadAllFiles({ filename: \"TemplatesConcatFilesToPDF.pdf\" });\n      }\n    });\n\n    // Configure preview handler\n    $(\".ui-bizagi-container-documents-item-delete\", $control).click(function (e) {\n      if (e.isPropagationStopped()) return;\n      e.stopPropagation();\n\n      self.deleteDocumentTemplate($(this).data(\"filename\"));\n    });\n  },\n\n  /**\r\n      * Creates the event of generation of templates.\r\n      * @param filename\r\n      */\n  deleteDocumentTemplate: function deleteDocumentTemplate(filename) {\n    var self = this;\n    var params = {\n      xpath: self.properties.xpath + \"[fileName='\" + filename + \"']\",\n      idRender: self.properties.id,\n      xpathContext: self.getContextXpath(),\n      idPageCache: self.properties.idPageCache };\n\n\n    self.startLoading();\n\n    $.when(self.dataService.deleteUploadFile(params)).\n    done(function () {\n      $.when(self.dataService.multiaction().getPropertyData({\n        xpath: self.properties.xpath,\n        idRender: self.properties.id,\n        xpathContext: self.getContextXpath(),\n        idPageCache: self.properties.idPageCache,\n        property: \"value\" })).\n      done(function (documents) {\n        self.resolveDeleteDocumentTemplate(documents, false, self.properties.downloadalldocuments);\n\n        // Finish loading\n        self.endLoading();\n      });\n    });\n  },\n\n  /**\r\n      * Creates the event of generation of templates.\r\n      */\n  documentTemplateGenerate: function documentTemplateGenerate() {\n    var self = this;\n    var properties = self.properties;\n\n    self.startLoading();\n\n    //Get the context xPath\n    properties.xpathcontext = self.getContextXpath();\n    properties.xpath = self.getDocumentXpath(properties.xpath);\n\n    self.save().done(function () {\n\n      bizagi.showErrorAlertDialog = false;\n\n      $.when(self.dataService.generateDocumentTemplate(properties)).\n      done(function () {\n\n        // Fetch again the value property\n        $.when(self.dataService.multiaction().getPropertyData({\n          xpath: properties.xpath,\n          idRender: properties.id,\n          xpathContext: self.getContextXpath(),\n          idPageCache: properties.idPageCache,\n          property: \"value\" })).\n        done(function (documents) {\n          self.resolveDocumentTemplateGenerate(documents, false, properties.downloadalldocuments);\n\n          // Finish loading\n          self.endLoading();\n        });\n\n      }).fail(function (error) {\n        self.endLoading();\n\n        // Add error messages\n        self.showErrorMessage(error);\n      });\n    }).fail(function (message) {\n      self.endLoading();\n\n      // Add error messages\n      self.showErrorMessage(message);\n    });\n  },\n\n  /**\r\n      * Show the error message when something went wrong with the service.\r\n      * @param error\r\n      */\n  showErrorMessage: function showErrorMessage(error) {\n    var self = this;\n    var form = self.getFormContainer();\n    var messageText = self.resources.getResource('render-upload-alert-maxsize').replace(\"{0}\", BIZAGI_SETTINGS.UploadMaxFileSize);\n\n    try {\n      messageText = error && typeof error.responseText !== \"undefined\" ? JSON.parse(error.responseText.replace(/(\\r\\n|\\n|\\r)/gm, \"\")).message : error;\n    } catch (e) {\n    }\n\n    form.addErrorMessage(messageText);\n    form.endLoading();\n  },\n\n  /**\r\n      * Shows the document if the flag is set. (virtual Function)\r\n      */\n  autoOpenDocuments: function autoOpenDocuments() {\n  },\n\n  /**\r\n      * Template method to implement in each device to customize each render after processed (Virtual method)\r\n      * @param url\r\n      * @param filename\r\n      */\n  showDocumentPreview: function showDocumentPreview(url, filename) {\n  },\n\n  /**\r\n      * Identifies the extension of the file in a simpler way that ECM does\r\n      * @param file\r\n      * @returns {string}\r\n      */\n  returnCssTypeFile: function returnCssTypeFile(file) {\n\n    if (file == undefined || file.lenght === 0) {\n      return \"ui-bizagi-document-upload-item-generic-file\";\n    }\n\n    var extension = file.substr(file.lastIndexOf('.') + 1);\n\n    switch (extension) {\n      case 'docx':\n        return \"ui-bizagi-document-upload-item-doc\";\n      case 'pdf':\n        return \"ui-bizagi-document-upload-item-pdf\";\n      case 'xlsx':\n        return \"ui-bizagi-document-upload-item-xls\";\n      default:\n        return \"ui-bizagi-document-upload-item-generic-file\";}\n\n  },\n\n  /**\r\n      * Redraw documents when needed\r\n      * @param documents\r\n      * @param noFiles\r\n      * @param downloadAllDocuments\r\n      */\n  redrawDocuments: function redrawDocuments(documents, noFiles, downloadAllDocuments) {\n    var self = this;\n    var control = self.getControl();\n    var html = \"\";\n    var documentContainer = $(\"[data-component='files']\", control);\n\n    // Clear current links\n    documentContainer.empty();\n\n    // Draw links again\n    html += this.renderDocumentsHtml(documents);\n\n    // Check if there are documents and the flag to download all are available to show the link.\n    html += this.renderActionsHtml(documents, noFiles, downloadAllDocuments);\n\n    documentContainer.append(html);\n\n    //Set value\n    self.setValue(documents);\n  },\n\n  /**\r\n      * This method must be implemented by the specific class of each device. (Virtual method)\r\n      * @param file\r\n      * @returns {*|*|*}\r\n      */\n  renderAllDocumentDownload: function renderAllDocumentDownload(file) {\n    var self = this;\n    var properties = self.properties;\n    var mode = self.getMode();\n\n    var template = self.renderFactory.getTemplate(self.getTemplateItem());\n    var url = self.buildAllDocumentsUrl();\n\n    // Don't render urls when not running in execution mode\n    if (mode !== \"execution\") url = \"javascript:void(0);\";\n\n    var html = $.fasttmpl(template, {\n      url: url,\n      allowDelete: properties.allowDelete,\n      filename: file.fileName,\n      mode: mode,\n      joined: true });\n\n\n    return self.removeDeleteButton(html);\n  },\n\n  /**\r\n      * removeDeleteButton\r\n      * @param html\r\n      * @returns {*}\r\n      */\n  removeDeleteButton: function removeDeleteButton(html) {\n    var startIndex = html.indexOf(\"<span class=\\\"ui-bizagi-container-documents-item-delete\");\n\n    if (startIndex > 0) {\n      var restOfWord = html.substring(startIndex);\n      var finishIndex = restOfWord.indexOf(\"</span>\") + 7;\n\n      return html.substring(0, startIndex) + restOfWord.substring(finishIndex);\n    } else {\n      return html;\n    }\n  },\n\n  /**\r\n      * Process request of DeleteDocumentTemplate action\r\n      * @param documents\r\n      * @param noFiles\r\n      * @param downloadAllDocuments\r\n      */\n  resolveDocumentTemplateGenerate: function resolveDocumentTemplateGenerate(documents, noFiles, downloadAllDocuments) {\n    // Redraw documents\n    this.redrawDocuments(documents, noFiles, downloadAllDocuments);\n    this.value = documents;\n\n    // This does not apply for mobile.\n    this.autoOpenDocuments();\n    this.configureHandlers();\n  },\n\n  /**\r\n      * Process request of DocumentTemplateGenerate action\r\n      * @param documents\r\n      * @param noFiles\r\n      * @param downloadAllDocuments\r\n      */\n  resolveDeleteDocumentTemplate: function resolveDeleteDocumentTemplate(documents, noFiles, downloadAllDocuments) {\n    // Redraw documents\n    this.redrawDocuments(documents, noFiles, downloadAllDocuments);\n    this.value = documents;\n\n    // This does not apply for mobile.\n    this.configureHandlers();\n  },\n\n  /**\r\n      * Method to renders the documents\r\n      * @param documents\r\n      * @returns {string}\r\n      */\n  renderDocumentsHtml: function renderDocumentsHtml(documents) {\n    var items = \"\";\n\n    for (var i = 0; i < documents.length; i++) {\n      var document = { id: documents[i][0], fileName: documents[i][1] };\n      var item = this.renderDocumentItem(document);\n\n      items += item;\n    }\n\n    return items;\n  },\n\n  /**\r\n      * Methos to renders action of document\r\n      * @param documents\r\n      * @param noFiles\r\n      * @param downloadAllDocuments\r\n      * @returns {string}\r\n      */\n  renderActionsHtml: function renderActionsHtml(documents, noFiles, downloadAllDocuments) {\n    var actions = \"\";\n\n    if (downloadAllDocuments && !noFiles && documents.length > 0) {\n      var downloadAllDocumentsLink = { fileName: this.getResource(\"render-document-downloadalldocuments\") };\n      var action = this.renderAllDocumentDownload(downloadAllDocumentsLink);\n\n      actions += action;\n    }\n\n    return actions;\n  },\n\n  getTemplate: function getTemplate() {\n    return \"document\";\n  },\n\n  getTemplateItem: function getTemplateItem() {\n    return \"document-item\";\n  },\n\n  getErrorTemplate: function getErrorTemplate() {\n    return \"form-error\";\n  },\n\n  getTemplateDownload: function getTemplateDownload() {\n    return \"document-download\";\n  },\n\n  getTemplateReadonly: function getTemplateReadonly() {\n    return \"document-readonly\";\n  },\n\n  /**\r\n      * Get blob file\r\n      * @param file\r\n      * @returns {*}\r\n      */\n  getDocumentFile: function getDocumentFile(file) {\n    var self = this;\n    var properties = self.properties;\n\n    return self.dataService.getFile({\n      idRender: properties.id,\n      xpath: self.getDocumentXpath(properties.xpath),\n      xpathContext: self.getContextXpath(),\n      idPageCache: properties.idPageCache,\n      fileId: file.id,\n      contexttype: properties.contexttype }).\n    then(function (response) {\n      return bizagi.util.handleJSONResponse(response);\n    });\n  },\n\n  /**\r\n      * Get the download all items item\r\n      * @returns {*}\r\n      */\n  getAllDocumentFiles: function getAllDocumentFiles() {\n    return this.dataService.getAllDocuments({\n      xpath: this.getDocumentXpath(this.properties.xpath),\n      xpathContext: this.getContextXpath(),\n      idPageCache: this.properties.idPageCache,\n      idCase: this.properties.caseId,\n      idWorkItem: this.properties.workitemId }).\n    then(function (response) {\n      return bizagi.util.handleJSONResponse(response);\n    });\n  },\n\n  /**\r\n      * Download file\r\n      * @param file\r\n      */\n  downloadFile: function downloadFile(file) {\n    var self = this;\n\n    this.getDocumentFile(file).then(function (blobFile) {\n      bizagi.util.downloadBlobFile(blobFile, file.filename);\n    }).fail(function (error) {\n      var form = self.getFormContainer();\n      form && form.failHandler(error);\n    });\n  },\n\n  /**\r\n      * Download file\r\n      * @param file\r\n      */\n  downloadAllFiles: function downloadAllFiles(file) {\n    var self = this;\n\n    this.getAllDocumentFiles().then(function (blobFile) {\n      bizagi.util.downloadBlobFile(blobFile, file.filename);\n    }).fail(function (error) {\n      var form = self.getFormContainer();\n      form && form.failHandler(error);\n    });\n  } });","/*\r\n*   Name: Bizagi Render Cascading Combo Class\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will define basic stuff for cascading combo renders\r\n*/\n\n$.Class.extend(\"bizagi.rendering.cascadingCombo\", {\n  // Statics\n  BA_ACTION_PARAMETER_PREFIX: bizagi.render.services.service.BA_ACTION_PARAMETER_PREFIX,\n  BA_CONTEXT_PARAMETER_PREFIX: bizagi.render.services.service.BA_CONTEXT_PARAMETER_PREFIX },\n{\n\n  /*\r\n  *   Constructor\r\n  */\n  init: function init(params) {\n    var self = this;\n\n    // Call base\n    self._super(params);\n\n    // Create dependency collection\n    self.dependants = [];\n    self.isDependant = false;\n  },\n\n  /*\r\n     *   Update or init the element data\r\n     */\n  initializeData: function initializeData(data) {\n    var self = this;\n\n    // Call base\n    self._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n    properties.hasLocalData = bizagi.util.isEmpty(properties.parentCombo) ? properties.hasLocalData : false;\n\n    if (properties.value && properties.value.id === undefined)\n    properties.value = null;\n\n    self.value = properties.value;\n\n    // Add empty node if configured\n    if (properties.hasLocalData)\n    properties.data = self.complementData(properties.data);\n  },\n\n  /*\r\n     *   Template method to implement in each children to customize each control\r\n     */\n  renderControl: function renderControl() {\n    var self = this;\n    var mode = self.getMode();\n\n    // Check if this is a dependant combo\n    var parentCombo = self.parentCombo = self.getParentCombo();\n    if (parentCombo != null) {\n      var renderType = bizagi.util.normalizeType(parentCombo.properties.type);\n\n      if (/^cascadingcombo$/i.test(renderType)) {\n        self.isDependant = true;\n      }\n    }\n\n    // Apply element plugin, set a flag to avoid dependant combo ajax requests\n    self.initializingCascadingCombo = true;\n\n    // Call base\n    var result = this._super();\n\n    if (mode !== \"execution\") {\n      self.initializingCascadingCombo = false;\n    }\n\n    return result;\n  },\n\n  /*\r\n     *   Template method to implement in each device to customize the render's behaviour to add handlers\r\n     */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    self.initializingCascadingCombo = false;\n\n    // Bind with parent combo\n    if (self.isDependant) {\n      self.parentCombo.bindDependantCombo(self);\n    }\n  },\n\n  configureHandlersReadOnly: function configureHandlersReadOnly() {\n    var self = this;\n    self.initializingCascadingCombo = false;\n\n    // Bind with parent combo\n    if (self.isDependant) {\n      self.parentCombo.bindDependantCombo(self);\n    }\n  },\n  /*\r\n     *   Refresh the combo, after it has been painted\r\n     */\n  refresh: function refresh(params, isInitialValue) {\n    var self = this;\n\n    // Wait until current element is rendered\n    $.when(self.isRendered()).done(function () {\n\n      // Unbind previous handler\n      // self.parentCombo.unbindDependantCombo(self);\n\n      // Clear current control\n      var control = self.getControl();\n      var mode = self.getMode();\n      control.empty();\n\n      // Render combo again\n      $.when(self.renderCombo(params)).then(function (html) {\n        // Append new element\n        control.html(html);\n\n        // Post-render method\n        self.postRender();\n\n        if (mode == \"execution\") {\n          self.configureHandlers();\n        }\n\n        // Set current value\n        if (self.getValue() !== undefined) {\n          self.setDisplayValue(self.getValue());\n        }\n\n        if (self.deferredVisible) {\n          self.deferredVisible.resolve();\n        }\n\n        self.trigger(\"select\", [self.value, isInitialValue]);\n\n      });\n    });\n  },\n\n  /*\r\n     *   Fetch the data into a deferred\r\n     */\n  getData: function getData(params) {\n    var self = this;\n    var mode = self.getMode();\n\n    // Just execute ajax calls when rendering in execution mode\n    if (mode != \"execution\") return self.getDummyData();\n\n    // Do not load dependant combos when there are no parent id\n    if (self.isDependant) {\n      if (self.parentCombo && params) {\n        self.properties.remoteDataLoaded = false;\n      }\n\n      // Return an empty array when there are no parent defined when the combo is dependant\n\n      var parentValue = self.parentCombo.selectedValue ? self.parentCombo.selectedValue.id : '';\n\n      if (parentValue != '') {\n        params = params || {};\n        if (!params[self.Class.BA_ACTION_PARAMETER_PREFIX + \"parent\"]) {\n          params[self.Class.BA_ACTION_PARAMETER_PREFIX + \"parent\"] = parentValue;\n        }\n        return this._super(params);\n      } else {\n        return [];\n      }\n    }\n\n    return this._super(params);\n  },\n\n\n  /* \r\n     *   Bind the combos to create the cascading feature\r\n     */\n  bindDependantCombo: function bindDependantCombo(dependantCombo) {\n    var self = this;\n    var renderType = bizagi.util.normalizeType(dependantCombo.properties.type);\n\n    // Check it is a cascading combo\n    if (/^cascadingcombo$/i.test(renderType)) {\n\n      // Append to dependant combos\n      self.dependants.push(dependantCombo);\n\n      // When this combo is selected we need to make the other combo to auto fill with an extra filter\n      dependantCombo.onChangeFunction = function (event, item, isInitialValue) {\n        // Fill items for next combo\n        self.refreshDependantCombo(dependantCombo, item.id, self.focusDependant, isInitialValue);\n\n        //if initial value is true, it prevents deleting the next combo\n        if (!isInitialValue) {\n          // Clean next inputs\n          dependantCombo.cleanInput();\n        }\n      };\n\n      if (!self.isEventBinded(\"select\")) {\n        self.bind(\"select\", dependantCombo.onChangeFunction);\n      }\n\n      // After the event binding has been made, we need to fill the new dependant render if this instance (the parent) has a value\n      if (!bizagi.util.isEmpty(self.getValue())) {\n\n        // Auto fill dependant items with current value\n        if (self.properties.hasLocalData) {\n          self.refreshDependantCombo(dependantCombo, self.getValue().id);\n        }\n\n      }\n    }\n  },\n  isEventBinded: function isEventBinded(event) {\n    if (typeof $._data(this.observableElement.get(0), \"events\") === \"undefined\") {\n      return false;\n    } else {\n      if (typeof $._data(this.observableElement.get(0), \"events\")[event] === \"undefined\") {\n        return false;\n      } else {\n        return true;\n      }\n    }\n  },\n\n\n  /* \r\n     *   Unbind the combos that are being redrawn\r\n     */\n  unbindDependantCombo: function unbindDependantCombo(dependantCombo) {\n    // When this combo is selected we need to make the other combo to auto fill with an extra filter\n    this.unbind(\"select\", dependantCombo.onChangeFunction);\n  },\n\n  /*\r\n     *   Fills the next dependant combo based on the given value\r\n     */\n  refreshDependantCombo: function refreshDependantCombo(dependant, parentValue, focus, isInitialValue) {\n    var self = this;\n    var params = {};\n    params[self.Class.BA_ACTION_PARAMETER_PREFIX + \"parent\"] = parentValue;\n\n    dependant.deferredVisible = $.Deferred();\n\n    if (!isInitialValue) {\n      // Clear dependant value\n      dependant.setValue(\"\", false);\n    }\n\n    dependant.refresh(params, isInitialValue);\n\n    if (focus) {\n      $.when(dependant.deferredVisible.promise()).done(function () {\n        dependant.inputCombo.trigger(\"click\");\n      });\n    }\n  },\n\n  /*\r\n     *   Empty html when render from action\r\n      */\n\n  emptyControlByChangeEditability: function emptyControlByChangeEditability() {\n    var control = this.getControl();\n    control.empty();\n  },\n\n  /* \r\n     *   Cleans the combo value\r\n     */\n  cleanInput: function cleanInput() {\n    this.triggerHandler(\"select\", { id: 0 });\n  },\n\n  /*\r\n     *   Search for the other cascading combo refering this one, by idRender\r\n     */\n  getParentCombo: function getParentCombo() {\n    var self = this;\n    var properties = self.properties;\n\n    // Check if parentCombo is defined\n    if (properties.parentCombo === undefined)\n    return null;\n\n    // Get form reference\n    var form = self.getFormContainer();\n    var renderType = bizagi.util.normalizeType(self.properties.type);\n    var controls = /^cascadingcombo$/i.test(renderType) ? form.getRenderByType(properties.type) : [];\n\n    var i = 0;\n    var j = 0;\n    var parents = [];\n\n    var control = null;\n\n    for (; i < controls.length; i++) {\n      if (properties.parentCombo === controls[i].properties.id) {\n        parents.push({ control: controls[i], index: i });\n      }\n    }\n\n    if (parents.length > 1) {\n      var parentLength, parent, xpathParent, parentArray;\n\n      for (; j < parents.length; j++) {\n        parent = parents[j].control;\n        xpathParent = parent.properties.xpath;\n        parentArray = xpathParent.split(\".\");\n        parentLength = parentArray.length;\n        xpathParent = parentArray.slice(0, parentLength - 1).join(\".\");\n\n        if (xpathParent === properties.xpath) {\n          control = controls[parents[j].index];\n          break;\n        }\n      }\n    } else {\n      control = form.getRenderById(properties.parentCombo);\n    }\n\n    // Return parent combo\n    return control;\n  },\n\n  /* \r\n     *  Method to determine if the render value can be sent to the server or not\r\n     */\n  canBeSent: function canBeSent() {\n    var self = this;\n\n    // If the render has dependants we can't send to the server\n    return self._super() && bizagi.util.isMapEmpty(self.dependants);\n  },\n\n  /*\r\n     *   Determines if we need to show the current data regardless if it belongs to data or not\r\n     *   Can be overriden to change behaviour\r\n     */\n  showCurrentData: function showCurrentData() {\n    var mode = this.getMode();\n\n    if (mode != \"execution\") return true;\n    return false;\n  },\n\n  /*\r\n     *   Enables submit on change feature for the current render\r\n     */\n  configureSubmitOnChange: function configureSubmitOnChange() {\n    var self = this;\n\n    if (!self.configured) {\n      // Call super\n      self._super();\n      self.configured = true;\n    }\n  },\n\n  internalSubmitOnChange: function internalSubmitOnChange(data, bRefreshForm) {\n    var self = this;\n    var defer = new $.Deferred();\n\n    if (self.isDependant && self.canBeSent() && self.itemSelected !== undefined)\n    return self._super(data, bRefreshForm);\n    return defer.resolve();\n  },\n  /*\r\n     *   Sets the initial value for the renders\r\n     */\n  internalSetInitialValue: function internalSetInitialValue() {\n    var self = this;\n    // Call original method\n    self._super();\n\n    if (self.value && self.isDependant == false) {\n      self.internalSetInitialValueFlag = true;\n      self.trigger(\"select\", [self.value, true]);\n    }\n\n    self.internalSetInitialValueFlag = false;\n  } });","/*\r\n*   Name: Bizagi Render List Class\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will define basic stuff for list renders\r\n*/\n\n$.Class.extend(\"bizagi.rendering.list\", {}, {\n\n  /**\r\n                                               * Update or init the element data\r\n                                               * @param {} data \r\n                                               * @returns {} \r\n                                               */\n  initializeData: function initializeData(data) {\n    // Call base\n    this._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n    properties.listSize = properties.listSize || 0;\n  },\n\n  /**\r\n      * Gets the template used by the combo render can be overriden in subclasses\r\n      * to reuse logic and just change the template\r\n      * @returns {} \r\n      */\n  getTemplateName: function getTemplateName() {\n    return \"list\";\n  },\n\n  /**\r\n      * Determines if we need to show the current data regardless if it belongs\r\n      * to data or not Can be overriden to change behaviour    \r\n      * @returns {} \r\n      */\n  showCurrentData: function showCurrentData() {\n    return false;\n  } });","/**\r\n *   Name: Bizagi Render MultiSelect Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for multiselect renders\r\n */\n\n$.Class.extend(\"bizagi.rendering.multiSelect\", {}, {\n\n  /**\r\n                                                      * Update or init the element data\r\n                                                      * @param data\r\n                                                      */\n  initializeData: function initializeData(data) {\n    // Call base\n    this._super(data);\n\n    if (Array.isArray(this.value)) {\n      this.value = this.properties.value = JSON.encode({ \"value\": this.value });\n      this.properties.originalValue = this.properties.previousValue = this.value;\n    }\n\n    // Fill default properties\n    var properties = this.properties;\n    properties.editable = bizagi.util.parseBoolean(properties.editable) !== null ? bizagi.util.parseBoolean(properties.editable) : true;\n    properties.enableTyping = bizagi.util.parseBoolean(properties.enableTyping) !== null ? bizagi.util.parseBoolean(properties.enableTyping) : true;\n    properties.maxRecords = Number(properties.maxRecords) || 20;\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @returns {*|jQuery}\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var properties = self.properties;\n    var template = self.renderFactory.getTemplate(\"list-multiselect\");\n\n    return $.fasttmpl(template, {\n      id: properties.id,\n      xpath: properties.xpath,\n      editable: properties.editable,\n      align: properties.valueAlign },\n    {\n      formatItem: self.formatItem });\n\n  },\n\n  /**\r\n      * Method to render non editable values\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    var self = this;\n    var properties = self.properties;\n    var template = self.renderFactory.getTemplate(\"list-multiselect\");\n\n    return $.fasttmpl(template, {\n      id: properties.id,\n      xpath: properties.xpath,\n      editable: properties.editable,\n      align: properties.valueAlign },\n    {\n      formatItem: self.formatItem });\n\n  },\n\n  /**\r\n      * Fetch the data into a deferred\r\n      * @returns {*[]}\r\n      */\n  getData: function getData() {\n    var self = this;\n    var defer = new $.Deferred();\n    var properties = this.properties;\n\n    // Go to server\n    self.dataService.multiaction().getData({\n      url: properties.dataUrl,\n      xpath: properties.xpath,\n      idRender: properties.id,\n      xpathContext: properties.xpathContext,\n      contexttype: properties.contexttype || null,\n      idPageCache: properties.idPageCache }).\n    done(function (data) {\n      properties.data = self.normalizeData(data);\n\n      defer.resolve(properties.data);\n\n    }).fail(function (data) {\n      var allowActions = true;\n      var form = self.getFormContainer();\n\n      if (bizagi.util.isNativeMobileDevice() && typeof form !== \"undefined\") {\n        allowActions = form.allowOnlineActions();\n      }\n\n      if (data.type === \"not-processed\" && allowActions) return;\n\n      defer.reject(data);\n    });\n\n    return defer.promise();\n  },\n\n  /**\r\n      * Sets the internal value\r\n      * @param value\r\n      * @param triggerEvents\r\n      */\n  setValue: function setValue(value, triggerEvents) {\n    triggerEvents = triggerEvents !== undefined ? triggerEvents : true;\n\n    if (Array.isArray(value)) {\n      value = JSON.encode({ \"value\": value });\n    }\n\n    this._super(value, triggerEvents);\n  },\n\n  /**\r\n      * Sets the value in the rendered control\r\n      * @param value\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n\n    // Set internal value\n    self.setValue(value, false);\n  },\n\n  /**\r\n      * Method to determine if the render value can be sent to the server or not\r\n      * @returns {boolean}\r\n      */\n  canBeSent: function canBeSent() {\n    return true;\n  },\n\n  /**\r\n      * Returns the internal value\r\n      * @returns {*|Array}\r\n      */\n  getValue: function getValue() {\n    return this.value || [];\n  },\n\n  /**\r\n      * Get list of data\r\n      * @returns {*|Array}\r\n      */\n  getDataValue: function getDataValue() {\n    var list;\n\n    try {\n      list = JSON.parse(this.value);\n\n      return list.value || [];\n    } catch (e) {\n      return [];\n    }\n  },\n\n  /**\r\n      * Check if a render has no value for required validation\r\n      * @returns {*|Array|boolean}\r\n      */\n  hasValue: function hasValue() {\n    var values = this.getDataValue();\n\n    return values && values.length > 0;\n  },\n\n  getElementsToStylize: function getElementsToStylize(context) {\n    return $(\".bz-multiselect .bz-multiselect__tag:not(.bz-multiselect__plus)\", context);\n  },\n\n  /**\r\n      * Add elements to global value\r\n      * @param value\r\n      */\n  addElement: function addElement(value) {\n    var newValue = this.getDataValue();\n\n    newValue.push(value);\n\n    this.setValue(newValue);\n  },\n\n  /**\r\n      * Remove elements to global value\r\n      * @param value\r\n      */\n  removeElement: function removeElement(value) {\n    var idToRemove = value.id;\n    var newValue = this.getDataValue().\n    filter(function (item) {\n      return item.id !== idToRemove;\n    });\n\n    this.setValue(newValue);\n  },\n\n  /**\r\n      * Submit the selected data to the server in order to be saved\r\n      */\n  submitData: function submitData() {\n    var data = {};\n\n    // Add current data\n    data[this.properties.xpath] = this.getValue();\n\n    // Executes submit on change\n    this.submitOnChange(data);\n  },\n\n  /**\r\n      * Mark a item how checked\r\n      * @param id\r\n      * @returns {*}\r\n      */\n  markAsChecked: function markAsChecked(id) {\n    var self = this;\n\n    return self.selected.some(function (item, index) {\n      var found = item.id === id;\n\n      if (found) self.selected.splice(index, 1);\n      return found;\n    });\n  },\n\n  isChecked: function isChecked(values, id) {\n    return values.some(function (item) {\n      return item.id == id;\n    });\n  },\n\n  /**\r\n      * Method to verify if can add more items\r\n      * @param $tagsContainer\r\n      * @returns {boolean}\r\n      */\n  canAddMoreItems: function canAddMoreItems($tagsContainer) {\n    var self = this;\n    var containerWidth = parseInt($tagsContainer.css(\"width\"));\n    var $children = $tagsContainer.children();\n\n    var childrenWidth = $children.\n    toArray().\n    reduce(function (acc, child) {\n      acc += self.getElementWidth(child);\n      return acc;\n    }, 0);\n\n    return containerWidth > childrenWidth + self.Class.MORE_OPTION_WIDTH;\n\n  },\n\n  /**\r\n      * getElementWidth\r\n      * @param element\r\n      * @returns {*}\r\n      */\n  getElementWidth: function getElementWidth(element) {\n    var styles = window.getComputedStyle(element);\n    var outerWidth = $(element).outerWidth();\n    return outerWidth + [\n    \"padding-left\",\n    \"padding-right\",\n    \"margin-left\",\n    \"margin-right\"].\n    reduce(function (acc, property) {\n      acc += parseInt(styles[property]);\n      return acc;\n    }, 0);\n  },\n\n  /**\r\n      * Filtering list of elements\r\n      * @param query\r\n      * @param $container\r\n      */\n  filterList: function filterList(query, $container) {\n\n    $container.filter(function () {\n      var stringContainer = $(this).text().toUpperCase();\n      var stringToSearch = query.toUpperCase();\n\n      if (stringContainer.indexOf(stringToSearch) >= 0) {\n        return $(this);\n      } else {\n        $(this).hide();\n      }\n    }).show();\n\n  },\n\n  /**\r\n      * addSelectedElements\r\n      */\n  addSelectedElements: function addSelectedElements() {\n  },\n\n  /**\r\n      * Find item by id\r\n      * @param id\r\n      * @returns {[]}\r\n      */\n  findItemById: function findItemById(id) {\n    return (this.properties.data || []).find(function (item) {\n      return item.id == id;\n    });\n  },\n\n  /**\r\n      * Formats value of each item\r\n      * @param {string, boolean or array} value\r\n      * @example\r\n      * value = \"string\" => \"string\"\r\n      * value = true => \"yes\" or \"si\", the localized value\r\n      * value = false => \"no\", the localized value\r\n      * value = [\"string 1\", \"string 2\"] => \"string 1 - string 2\"\r\n      * @returns {string}\r\n      */\n  formatItem: function formatItem(value) {\n    return bizagi.util.formatItem(value);\n  },\n\n  /**\r\n      * Complement data from server before control implementation\r\n      * @param data\r\n      */\n  normalizeData: function normalizeData(data) {\n    (data || []).forEach(function (item) {\n      item.value = typeof item.value !== \"undefined\" && item.value !== null ? item.value : \"\";\n    });\n\n    return data;\n  } });","/*\r\n*   Name: Bizagi Render Search List Control\r\n*   Author: UI Forms Team\r\n*/\n\n$.Class.extend(\"bizagi.rendering.searchList\", {}, {\n\n  /**\r\n                                                     * Update or init the element data\r\n                                                     * @param {} data \r\n                                                     * @returns {} \r\n                                                     */\n  initializeData: function initializeData(data) {\n    var self = this;\n\n    // Call base\n    self._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n    properties.maxRecords = Number(properties.maxRecords) || 20;\n    properties.editable = bizagi.util.parseBoolean(properties.editable) !== null ? bizagi.util.parseBoolean(properties.editable) : true;\n\n    // Set value\n    self.setValue(properties.value);\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @returns {} \r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var properties = self.properties;\n    var template = self.renderFactory.getTemplate(\"searchList\");\n\n    return $.fasttmpl(template, {\n      id: properties.id,\n      xpath: properties.xpath,\n      value: properties.value,\n      allowTyping: properties.allowTyping,\n      items: properties.value,\n      hasSearchForm: properties.searchForms ? true : false,\n      editable: properties.editable },\n    {\n      formatItem: self.formatItem });\n\n  },\n\n  /**\r\n      * Method to render non editable values\r\n      * @returns {} \r\n      */\n  renderReadOnly: function renderReadOnly() {\n    return this.renderControl();\n  },\n\n  /**\r\n      * Sets the internal value\r\n      * @param {} value \r\n      * @returns {} \r\n      */\n  setValue: function setValue(value) {\n    this.value = JSON.encode({ \"value\": value });\n    this.triggerRenderChange();\n  },\n\n  /**\r\n      * Add elements to global value\r\n      * @param value = { id:integer,value:[string || array] }\r\n      * @returns {} \r\n      */\n  addElement: function addElement(value) {\n    var list = JSON.parse(this.value);\n\n    list.value.push(value);\n\n    this.setValue(list.value);\n  },\n\n  /**\r\n      * Remove elements to global value\r\n      * @param value = { id:integer }\r\n      * @returns {} \r\n      */\n  removeElement: function removeElement(value) {\n    var list = JSON.parse(this.value);\n    var result = [];\n\n    $.each(list.value, function (key, val) {\n      if (val.id != value.id) {\n        result.push({ id: val.id, value: val.value });\n      }\n    });\n\n    this.setValue(result);\n  },\n\n  /**\r\n      * Remove last element to global value\r\n      * @returns {} \r\n      */\n  removeLastElement: function removeLastElement() {\n    var list = JSON.parse(this.value);\n\n    if (list.value.length > 0) {\n      list.value.pop();\n      this.setValue(list.value);\n    }\n  },\n\n  /**\r\n      * Fetch the data into a deferred\r\n      * @param {} params \r\n      * @returns {} \r\n      */\n  getData: function getData(params) {\n    var self = this;\n    var properties = self.properties;\n    var defer = new $.Deferred();\n\n    // Resolve with remote data\n    self.dataService.getSearchData({\n      url: properties.dataUrl,\n      xpath: properties.xpath,\n      idRender: properties.id,\n      xpathContext: properties.xpathContext,\n      idPageCache: properties.idPageCache,\n      term: properties.term,\n      extra: params }).\n    done(function (data) {\n      // Resolve with fetched data\n      properties.data = data;\n      defer.resolve(properties.data);\n    }).fail(function (data) {\n      var hideStatus = data.hideStatus || false;\n\n      defer.resolve({});\n\n      if (!hideStatus) {\n        self.trigger(\"onSearchError\", data);\n      }\n    });\n\n    return defer.promise();\n  },\n\n  /**\r\n      * Submits the selected data to the server in order to be saved\r\n      * @returns {} \r\n      */\n  submitData: function submitData() {\n    var data = {};\n\n    // Add current data\n    data[this.properties.xpath] = this.getValue();\n\n    // Executes submit on change\n    this.submitOnChange(data);\n  },\n\n  /**\r\n      * Method to determine if the render value can be sent to the server or not\r\n      * @returns {} \r\n      */\n  canBeSent: function canBeSent() {\n    return true;\n  },\n\n  /**\r\n      * Check if the control has value\r\n      * @returns {} \r\n      */\n  hasValue: function hasValue() {\n    var list = this.getListItems();\n\n    return list.length > 0;\n  },\n\n  getListItems: function getListItems() {\n    var value = this.getValue();\n    var finalValue = typeof value === \"string\" ? JSON.parse(value).value : value.value;\n\n    return finalValue || [];\n  },\n\n  /**\r\n      * Formats value of each item\r\n      * @param {string, boolean or array} value\r\n      * @example\r\n      * value = \"string\" => \"string\"\r\n      * value = true => \"yes\" or \"si\", the localized value\r\n      * value = false => \"no\", the localized value\r\n      * value = [\"string 1\", \"string 2\"] => \"string 1 - string 2\"\r\n      * @returns {string}\r\n      */\n  formatItem: function formatItem(value) {\n    return bizagi.util.formatItem(value);\n  } });","/**\r\n *   Name: Bizagi Render Money Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for money numbers\r\n */\n\n$.Class.extend(\"bizagi.rendering.money\", {}, {\n\n  /**\r\n                                                * Update or init the element data\r\n                                                * @param {} data\r\n                                                * @returns {}\r\n                                                */\n  initializeData: function initializeData(data) {\n    var self = this;\n\n    // Call base\n    self._super(data);\n\n    // Fill default properties\n    var properties = self.properties;\n    var format = this.getResource(\"numericFormat\");\n\n    // Configures symbol\n    properties.showsymbol = typeof properties.showsymbol !== \"undefined\" ? properties.showsymbol : true;\n\n    if (properties.showsymbol) {\n      var symbol = typeof BIZAGI_DEFAULT_CURRENCY_INFO !== \"undefined\" ? BIZAGI_DEFAULT_CURRENCY_INFO.symbol : format.symbol;\n      properties.symbol = properties.currencySymbol ? properties.currencySymbol : symbol;\n    } else {\n      properties.symbol = \"\";\n    }\n\n    properties.groupDigits = true;\n  } });","/**\r\n *   Name: Bizagi Render Radio Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for radio renders\r\n */\n\n$.Class.extend(\"bizagi.rendering.radio\", {}, {\n\n  /**\r\n                                                * Update or init the element data\r\n                                                * @param data\r\n                                                */\n  initializeData: function initializeData(data) {\n    var self = this;\n    // Call base\n    this._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n    properties.horizontal = bizagi.util.parseBoolean(properties.horizontal) || false;\n\n    // Set a random identifier to fix a problem when using radio buttons inside grids and the plugin mismatch the elements because all of them have the same name\n    properties.unique = bizagi.util.randomNumber(1000, 1000000);\n  },\n\n  /**\r\n      * Gets the template used by the combo render\r\n      * Can be overridden in subclasses to reuse logic and just change the template\r\n      * @returns {string}\r\n      */\n  getTemplateName: function getTemplateName() {\n    return \"radio\";\n  },\n\n  /**\r\n      * Determines if we need to show the empty node or not\r\n      * Can be overridden to change behaviour\r\n      * @returns {boolean}\r\n      */\n  showEmpty: function showEmpty() {\n    return false;\n  },\n\n  /**\r\n      * Determines if we need to show the current data regardless if it belongs to data or not\r\n      * Can be overridden to change behaviour\r\n      * @returns {boolean}\r\n      */\n  showCurrentData: function showCurrentData() {\n    return false;\n  },\n\n  /**\r\n      * Adds custom parameters to process the template\r\n      * @returns {{vertical: boolean}}\r\n      */\n  getTemplateParams: function getTemplateParams() {\n    var self = this;\n    var properties = self.properties;\n\n    return {\n      vertical: !properties.horizontal,\n      horizontal: properties.horizontal };\n\n  },\n\n  /**\r\n      * Cleans current data\r\n      */\n  cleanData: function cleanData() {\n    var self = this;\n    var value = { id: \"\", label: \"\" };\n    var selectedItem = self.element.find(\".ui-radio-state-checked\");\n\n    selectedItem.removeClass(\"ui-radio-state-checked\");\n    self.setDisplayValue(value);\n    self.setValue(value, false);\n    self.clearDisplayValue();\n  },\n\n  /**\r\n      * Check value of control is changed\r\n      * @returns {boolean}\r\n      */\n  controlValueIsChanged: function controlValueIsChanged() {\n    var self = this;\n    var properties = self.properties;\n\n    var value = self.getValue();\n    var compareValue = properties.originalValue;\n    var baseValue = properties.defaultValue;\n\n    var result = true;\n\n    if (value && value.length !== undefined) {\n      value = value[0];\n    }\n    if (compareValue && compareValue.length !== undefined) {\n      compareValue = compareValue[0];\n    }\n    if (baseValue && baseValue.length !== undefined) {\n      baseValue = baseValue[0];\n    }\n\n    value = value && value.id !== undefined ? value.id : value;\n    compareValue = compareValue && compareValue.id !== undefined ? compareValue.id : compareValue;\n    baseValue = baseValue && baseValue.id !== undefined ? baseValue.id : baseValue;\n\n    if (baseValue !== undefined) {\n      if (baseValue == value && value == compareValue) {\n        result = false;\n      } else {\n        if ((value === null || value === \"\") && (compareValue === null || compareValue === \"\")) {\n          result = false;\n        } else {\n          result = compareValue == value ? false : true;\n        }\n      }\n    } else {\n      if ((value === null || value === \"\") && (compareValue === null || compareValue === \"\")) {\n        result = false;\n      } else {\n        result = compareValue == value ? false : true;\n      }\n    }\n\n    return result;\n  },\n  /**\r\n      * Clean html because some scenarios render twice\r\n      */\n  emptyControlByAsyncRenderDeferred: function emptyControlByAsyncRenderDeferred() {\n    var control = this.getControl();\n    control.empty();\n  } });","/*\r\n*   Name: BizAgi User field render\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will define the basic behavior for userfields\r\n*/\n$.Class.extend(\"bizagi.rendering.userfieldDefinition\", {}, {\n\n  /*************************************************************/\n  /* Private section of the userfield                          */\n  /*************************************************************/\n\n  /*\r\n                                                                  *   Method to be overriden by userfields in order to ensure that custom files are loaded before the execution\r\n                                                                  */\n  getFileDependencies: function getFileDependencies() {\n    return null;\n  },\n\n  postRender: function postRender() {\n    var self = this;\n\n    // Call base\n    self._super();\n\n    var defer = $.Deferred();\n    var fileDependencies = self.getFileDependencies();\n    if (fileDependencies && fileDependencies.length > 0) {\n      bizagi.loader.loadFile(fileDependencies).\n      then(function () {\n        // After all dependencies has been resolved\n        self.internalRenderControl();\n        defer.resolve();\n      });\n\n    } else {\n      $.when(self.renderUserfieldControl()).done(function () {\n        defer.resolve();\n      });\n    }\n\n    return defer.promise();\n  },\n\n  renderUserfieldControl: function renderUserfieldControl() {\n    var self = this;\n    var control = self.getControl();\n    var properties = self.properties;\n    var def = new $.Deferred();\n\n    if (properties.extendedData && properties.extendedData.length > 0) {\n      self.extendedData = bizagi.services.ajax.parseJSON(properties.extendedData);\n    } else {\n      self.extendedData = {};\n    }\n\n\n    var loadUserfield = function loadUserfield() {\n      var userEditableControl = self.getEditableControl();\n      if (userEditableControl) {\n        self.input = control.html(userEditableControl);\n      }\n      self.renderComplex();\n      def.resolve();\n    };\n\n\n    loadUserfield();\n\n\n    return def.promise();\n  },\n\n  postRenderReadOnly: function postRenderReadOnly() {\n    var self = this;\n    var control = self.getControl();\n    var properties = self.properties;\n\n    if (properties.extendedData && properties.extendedData.length > 0) {\n      self.extendedData = bizagi.services.ajax.parseJSON(properties.extendedData);\n    } else {\n      self.extendedData = {};\n    }\n\n    var loadUserfieldReadOnly = function loadUserfieldReadOnly() {\n      try {\n        var userReadOnlyControl = self.getReadonlyControl();\n        if (userReadOnlyControl) {\n          self.input = control.html(userReadOnlyControl);\n        }\n        self.renderComplex();\n\n      } catch (error) {\n        var displayName = self.properties.displayName || \"Widget\";\n        control.html(\"<h6>\" + displayName + \"</h6>\");\n      }\n\n    };\n\n    if (self.ready) {\n      self.ready().done(function () {\n        loadUserfieldReadOnly();\n      });\n    } else {\n      loadUserfieldReadOnly();\n    }\n  },\n\n  getDisplayValue: function getDisplayValue() {\n    var self = this;\n    return self.getReadonlyValue();\n  },\n\n  /*\r\n     *   Sets the value in the rendered control \r\n     */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n\n    // Call base\n    self.setValue(value);\n\n    // Set editable value in control\n    self.setEditableValue(value);\n  },\n\n  getValue: function getValue() {\n    var self = this;\n    return self.getEditableValue();\n  },\n\n  getPropertyValue: function getPropertyValue(propertyName, params) {\n    var self = this;\n    var properties = self.properties;\n    var defer = new $.Deferred();\n    var form = self.getFormContainer();\n\n    form.useOrSetLoaderDeferred();\n    form.appendWaitForLoader({ promise: defer.promise() });\n\n    self.dataService.multiaction().getPropertyData({\n      url: properties.dataUrl,\n      xpath: properties.xpath,\n      idRender: properties.id,\n      xpathContext: properties.xpathContext,\n      idPageCache: properties.idPageCache,\n      property: propertyName,\n      extra: params,\n      dataType: params ? params.dataType : null }).\n    done(function (data) {\n      if (data.type == \"error\") {\n        // Workflow engine error, we gotta show it with error\n        self.getFormContainer().addErrorMessage(data.message);\n        defer.reject(data);\n      } else {\n        defer.resolve(data);\n      }\n    }).fail(function (jqXHR, textStatus, errorThrown) {\n      defer.reject(jqXHR, textStatus, errorThrown);\n    });\n\n    return defer.promise();\n  },\n\n  /*\r\n     *   Saves the form\r\n     */\n  saveForm: function saveForm() {\n    var self = this;\n    var form = self.getFormContainer();\n    return form.saveForm();\n  },\n\n  /**\r\n     * Returns all the elements that match the given xpath\r\n     */\n  getRenderElements: function getRenderElements(xpath) {\n    var self = this;\n    var result = $();\n    var controls = self.getFormContainer().getRenders(xpath);\n    $.each(controls, function (i, item) {\n      result = result.add($(item.element));\n    });\n\n    return result;\n  },\n\n  getServerResourceURL: function getServerResourceURL(resource) {\n    var self = this;\n    var url = \"Rest/Userfields/{0}/resource/{1}/{2}\";\n    url = url.replace(\"{0}\", self.properties.userfieldGuid);\n    resource = resource.replace(\"\\\\\", \"__\").replace(\"/\", \"__\");\n    var device = bizagi.util.detectDevice();\n    url = url.replace(\"{1}\", device);\n    url = url.replace(\"{2}\", resource);\n    //Rest/Userfields/{0}/resource/desktop/{1}\n    return url;\n  },\n\n  /**\r\n     * Returns all the elements that match the given xpath\r\n     */\n  getRenderValue: function getRenderValue(xpath) {\n    var self = this;\n    var controls = self.getFormContainer().getRenders(xpath);\n    var control;\n    $.each(controls, function (index, item) {\n      if (!control || item.properties.editable) {\n        control = item;\n      }\n    });\n    if (control) {\n      return control.getValue();\n    } else {\n      return null;\n    }\n  },\n\n  /*\r\n     *   Refresh the current form\r\n     */\n  refreshForm: function refreshForm() {\n    var self = this;\n    var properties = self.properties;\n\n    var form = self.getFormContainer();\n    form.refreshForm(properties.id);\n  },\n\n  /*\r\n     * Shows a jquery dialog\r\n     */\n  showDialog: function showDialog(url, params) {\n    bizagi.util.mustImplement(\"Must implement the showDialog method\");\n  },\n\n  /*\r\n     *   Shows a browser popup\r\n     */\n  showPopup: function showPopup(url, params) {\n    bizagi.util.mustImplement(\"Must implement the showPopup method\");\n  },\n\n  updateOriginalValue: function updateOriginalValue() {\n    var self = this;\n    self.properties.originalValue = self.value = self.properties.value;\n  } });\n\n\n\n\n\n$.Class.extend(\"bizagi.rendering.basicUserField\", {}, {\n\n  /*************************************************************/\n  /* methods to be overriden by the implementations            */\n  /*************************************************************/\n  getEditableControl: function getEditableControl() {\n  },\n\n  renderComplex: function renderComplex() {\n  },\n\n  // Returns the value of the control\n  getEditableValue: function getEditableValue() {\n    return bizagi.rendering.render.prototype.getValue.apply(this, arguments);\n  },\n\n  // \n  setEditableValue: function setEditableValue(value) {\n    return bizagi.rendering.render.prototype.setValue.apply(this, arguments);\n  },\n\n  getReadonlyControl: function getReadonlyControl() {\n  },\n\n  getReadonlyValue: function getReadonlyValue() {\n    // if the method is not overriden then call the parent method \n    return bizagi.rendering.render.prototype.getDisplayValue.apply(this, arguments);\n  },\n\n  dispose: function dispose() {\n    var self = this;\n\n    // Call base\n    self._super();\n  } });\n\n\n\n/*\r\n        *   This control will wrap any userfield in order to load the code remotely, \r\n        *   when executing renderControl, which is an async method\r\n        */\n$.Class.extend(\"bizagi.rendering.userfieldWrapper\", {}, {\n\n  /*\r\n                                                          *   Constructor\r\n                                                          */\n  init: function init(params) {\n    var self = this;\n\n    // Call base\n    self._super(params);\n    // Save userfield guid and name\n    self.initialParams = params;\n    self.userfieldGuid = this.properties.userfieldGuid;\n    self.userfieldName = this.properties.control;\n  },\n\n  /*\r\n     *   Starts waiting signal for async stuff\r\n     */\n  startUserfieldLoading: function startUserfieldLoading() {\n  },\n\n  /*\r\n     *   Ends waiting for async stuff\r\n     */\n  endUserfieldLoading: function endUserfieldLoading() {\n  },\n\n  /*\r\n     *   Returns the in-memory processed element\r\n     */\n  internalPostRender: function internalPostRender() {\n    var self = this;\n    self.startUserfieldLoading();\n    $.when(self.getUserfieldControl()).\n    done(function (control) {\n      control.element = self.element;\n\n      // Add grid and surrogatekey properties if the userfield is a column userfield\n      if (self.column) {\n        control.isColumn = true;\n        control.grid = self.grid;\n        control.surrogateKey = self.surrogateKey;\n        control.properties.xpathContext = self.getControlXpathContext(control);\n        control.getControl = self.column.getControl;\n      }\n\n      return control.internalPostRender();\n    }).\n    always(function () {\n      self.endUserfieldLoading();\n    });\n  },\n\n  /*\r\n     *   Helper for userfields to fetch the xpathContext\r\n     */\n  getControlXpathContext: function getControlXpathContext(control) {\n    var self = this;\n    var properties = control.properties;\n\n    if (control.isColumn) {\n      return properties.xpathContext.length > 0 ? properties.xpathContext + \".\" + control.grid.properties.xpath + \"[id=\" + control.surrogateKey + \"]\" : control.grid.properties.xpath + \"[id=\" + control.surrogateKey + \"]\";\n    }\n\n    return properties.xpathContext;\n  },\n\n\n  getUserFieldInstance: function getUserFieldInstance(params) {\n    console.log(\"not implemented\");\n  },\n\n  /*\r\n     *   Replicate all userfield methods to this instance in order to create a proxy\r\n     */\n  replicateUserfieldMethods: function replicateUserfieldMethods(control) {\n    var self = this;\n    for (var key in control.Class.prototype) {\n      // Omit the folowing methods\n      if (key == \"init\" || key == \"constructor\" || key == \"Class\" || key == \"subscribe\" || key == \"unsubscribe\" ||\n      key == \"publish\" || key == \"render\" || key == \"triggerHandler\" || key == \"dispose\") continue;\n\n      // Replicate instance methods\n      self[key] = eval('var tmp = function(){ if (this.userfieldInstance) return this.userfieldInstance.' + key + '.apply(this.userfieldInstance, arguments); return null;};tmp');\n    }\n\n    // Replicate properties and value\n    control.properties = self.properties;\n    control.value = self.value;\n  },\n\n  dispose: function dispose() {\n    var self = this;\n\n    var timeOutUserField = setTimeout(function () {\n      if (self.userfieldInstance) {\n        self.userfieldInstance.unbind(\"renderchange\");\n        self.userfieldInstance.dispose();\n      }\n      clearTimeout(timeOutUserField);\n    }, bizagi.override.disposeTime || 50);\n\n    // Call base\n    self._super();\n  } });","/**\r\n *   Name: Bizagi Render Image Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for image control\r\n */\n\n$.Class.extend(\"bizagi.rendering.image\", {\n  // Statics\n  BA_ACTION_PARAMETER_PREFIX: bizagi.render.services.service.BA_ACTION_PARAMETER_PREFIX,\n  BA_CONTEXT_PARAMETER_PREFIX: bizagi.render.services.service.BA_CONTEXT_PARAMETER_PREFIX,\n  BA_PAGE_CACHE: bizagi.render.services.service.BA_PAGE_CACHE },\n{\n\n  BASE_IMAGE: \"data:image/png;base64,\",\n\n  /**\r\n                                         * Update or init the element data\r\n                                         * @param data\r\n                                         */\n  initializeData: function initializeData(data) {\n    var self = this;\n\n    // Call base\n    self._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n    var maxSize = 4091904;\n\n    if (properties.maxSize) {\n      maxSize = Number(properties.maxSize);\n    } else if (typeof BIZAGI_SETTINGS !== \"undefined\" && typeof BIZAGI_SETTINGS.UploadMaxFileSize !== \"undefined\") {\n      maxSize = Number(BIZAGI_SETTINGS.UploadMaxFileSize);\n    }\n\n    properties.maxSize = maxSize;\n    properties.editable = bizagi.util.parseBoolean(properties.editable) === true;\n    properties.validExtensions = properties.validExtensions || \"\";\n    properties.isChanged = false;\n\n    if (properties.validExtensions.length > 0 && properties.validExtensions.indexOf(\".\") < 0) {\n      var singleExtensions = properties.validExtensions.replace(/\\ /gi, '').split(\";\");\n\n      for (var i = 0; i < singleExtensions.length; i++) {\n        if (singleExtensions[i].length != 0) {\n          singleExtensions[i] = \"*.\" + singleExtensions[i].replaceAll(\" \", \"\");\n        } else {\n          //Removes the empty element\n          var index = singleExtensions.indexOf(singleExtensions[i]);\n          singleExtensions.splice(i, 1);\n        }\n      }\n\n      properties.validExtensions = singleExtensions.join(\";\");\n    }\n\n    properties.addUrl = properties.addUrl || self.dataService.getUploadAddFileUrl(properties.isUserPreference);\n    properties.allowDelete = bizagi.util.parseBoolean(properties.allowDelete) !== null;\n\n    this.formCompatibilityVersion = this.getFormContainer().compatibilityVersion;\n    self.initializeWidthAndHeight();\n\n  },\n\n  /**\r\n      * Update or init the element data\r\n      * @param data\r\n      */\n  initializeWidthAndHeight: function initializeWidthAndHeight() {\n    var properties = this.properties;\n\n    properties.isAutoWidth = false;\n    properties.isAutoHeight = false;\n\n    if (properties.width === -1) {\n      properties.width = \"100%\";\n      properties.isAutoWidth = true;\n    } else {\n      properties.width = properties.width + \"px\";\n    }\n\n    if (properties.height === -1) {\n      properties.height = \"auto\";\n      properties.isAutoHeight = true;\n    } else {\n      properties.height = properties.height + \"px\";\n    }\n  },\n\n  setData: function setData(value) {\n    var self = this;\n    var previousValue = self.getData();\n    if (bizagi.util.isEmpty(value)) {\n      this.properties.binaryValue = null;\n    } else {\n      this.properties.binaryValue = value instanceof Blob ? value : bizagi.util.b64toBlob(value, \"image/png\");\n    }\n\n    if (previousValue != this.properties.binaryValue) {\n\n      if (self.properties.required && self.isExecutionMode()) {\n        var isValidField = !self.checkRequired([]);\n        self.changeRequiredLabel(isValidField);\n      }\n\n      if (this.properties.isChanged) {\n        self.triggerRenderChange();\n        self.triggerRenderValidate();\n      }\n    }\n  },\n\n  getData: function getData() {\n    return this.properties.binaryValue || [];\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @returns {*}\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"image\");\n\n    return self.buildItemUrl().\n    then(function (dataUrl) {\n      if (!self.isDisposed()) {\n        self.properties.url = dataUrl !== \"\" ? dataUrl : \"\";\n\n        if (!bizagi.util.isEmpty(self.properties.url)) {\n          if (self.formCompatibilityVersion < 2)\n          self.properties.value = [[0, \"uploaded\"]];\n        } else {\n          self.properties.value = [];\n        }\n\n        self.setValue(self.properties.value);\n\n        var html = $.fasttmpl(template, { url: self.properties.url });\n        return html;\n      }\n    });\n  },\n\n  /**\r\n      * Method to render non editable values\r\n      * @returns {*}\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    var template = this.renderFactory.getTemplate(\"image-readonly\");\n    var html = $.fasttmpl(template);\n\n    return html;\n  },\n\n  /**\r\n      * This method return the name of template of items, please make a override in each device\r\n      * @returns {*}\r\n      */\n  getTemplateItem: function getTemplateItem() {\n    return this.renderFactory.getTemplate(\"image-item\");\n  },\n\n  /**\r\n      * Renders a single upload item\r\n      * @param file\r\n      * @returns {*}\r\n      */\n  renderUploadItem: function renderUploadItem() {\n    var self = this;\n    var mode = self.getMode();\n    var template = self.getTemplateItem();\n\n    return self.buildItemUrl().\n    then(function (dataUrl) {\n      var url = dataUrl || \"\";\n\n      var html = $.fasttmpl(template, {\n        url: url,\n        allowDelete: self.properties.allowDelete,\n        editable: self.properties.editable,\n        mode: mode });\n\n\n      self.properties.url = url;\n\n      return html;\n    });\n  },\n\n  /**\r\n      * Builds the upload item url\r\n      * @param params\r\n      * @returns {*}\r\n      */\n  buildItemUrl: function buildItemUrl(params) {\n    var self = this;\n    var form = self.getFormContainer();\n    var properties = self.properties;\n    var isVersion2OrSuperior = form.properties.compatibilityVersion >= 2;\n    var url = \"\";\n\n    if (!this.isExecutionMode()) return $.Deferred().resolve(\"\").promise();\n\n    var parameters = {\n      url: properties.dataUrl,\n      xpath: properties.xpath,\n      idRender: properties.id,\n      xpathContext: properties.xpathContext,\n      idPageCache: properties.idPageCache,\n      contexttype: properties.contexttype,\n      property: params && params.property ? params.property : \"fileContent\",\n      dataType: \"text\" };\n\n\n    if (properties.isUserPreference) {\n      self.currentUser = bizagi.currentUser.idUser;\n      parameters.xpathContext = \"@Context.Users[id == \" + self.currentUser + \"]\";\n      parameters.contexttype = \"entity\";\n      parameters.surrogatekey = self.currentUser;\n    }\n\n    if (isVersion2OrSuperior) {\n      if (bizagi.util.isEmpty(self.properties.value) && !self.hasValue()) return $.Deferred().resolve(\"\").promise();\n\n      // forceBase64 - Allow to get the thumbnail image on desktop devices\n      if (!self.properties.forceBase64) {\n        parameters.sessionId = form.properties.sessionId;\n        parameters.property = \"fileBinaryContent\";\n        return self.dataService.downloadFile(parameters).\n        then(function (blob) {\n          self.setData(blob);\n          if (blob == null || window.Blob && blob instanceof Blob && blob.size === 0) return null;\n          return bizagi.util.blobTob64(blob, false);\n        }).\n        then(function (base64) {\n          return bizagi.util.getDataUrl(base64, properties.url);\n        });\n      }\n    }\n\n    return self.dataService.multiaction().getPropertyData(parameters, \"text\").\n    then(function (data) {\n      if (data.charAt(0) === \"\\\"\") data = data.slice(1, -1);\n      if (data !== \"\") url = self.BASE_IMAGE + data;\n      self.setData(bizagi.util.b64toBlob(data));\n      return url;\n    });\n  },\n\n  buildItemUrlOffline: function buildItemUrlOffline() {\n    var self = this;\n    var properties = self.properties;\n    var formParams = self.getFormParams();\n    var loadImageFromForm = !properties.isChanged;\n    var id = self.buildOfflineImageId();\n\n    var parameters = {\n      idCase: formParams.idCase,\n      idWorkitem: formParams.idWorkitem,\n      id: id,\n      offlineType: formParams.offlineType,\n      loadImageFromForm: loadImageFromForm };\n\n\n    return $.when(self.dataService.getOfflineImage(parameters, bizagi.util.db.AttachmentType.Blob)).\n    then(function (blob) {\n      self.setData(blob);\n      if (blob == null || window.Blob && blob instanceof Blob && blob.size === 0) return null;\n      return bizagi.util.blobTob64(blob, false);\n    }).\n    then(function (base64) {\n      return bizagi.util.getDataUrl(base64, properties.url);\n    });\n  },\n\n  /**\r\n      * Create an image offline\r\n      * @param path File in Browser or Path in Mobile Devices\r\n      * @param promise Promise to be resolved when save is completed\r\n      */\n  saveImageOffline: function saveImageOffline(path) {\n    var self = this;\n    var id = self.buildOfflineImageId();\n    var fileName = self.fileProperties !== undefined ? self.fileProperties.name : path.name;\n\n    return self.dataService.getFileService().resolveBlobFromPath(path, fileName).\n    then(function (blobImage) {\n      // Save the image as attachment\n      var formParams = self.getFormParams();\n      var parameters = {\n        idCase: formParams.idCase,\n        idWorkitem: formParams.idWorkitem,\n        id: id,\n        operationType: \"edition\",\n        offlineType: formParams.offlineType };\n\n\n      return self.dataService.saveOfflineImage(parameters, blobImage);\n    });\n  },\n\n  /**\r\n      * Builds the upload item url in real size\r\n      * @returns {*}\r\n      */\n  buildFullItemUrl: function buildFullItemUrl() {\n    return this.buildItemUrl({ \"property\": \"fileFullContent\" });\n  },\n\n  /**\r\n      * Method to determine if the render value can be sent to the server or not\r\n      * @returns {boolean}\r\n      */\n  canBeSent: function canBeSent() {\n    return this.properties.isChanged;\n  },\n\n  /**\r\n      * Returns the internal value\r\n      * @returns {*|Array}\r\n      */\n  getValue: function getValue() {\n    return this.properties.value || [];\n  },\n\n  /**\r\n      * Check if control is valid or not\r\n      * @param invalidElements\r\n      * @returns {boolean}\r\n      */\n  isValid: function isValid(invalidElements) {\n    var self = this;\n\n    // Don't check non-editable renders\n    if (bizagi.util.parseBoolean(self.properties.visible) === false) {\n      return true;\n    }\n\n    // Don't check non-editable renders\n    if (bizagi.util.parseBoolean(self.properties.editable) === false) {\n      return true;\n    }\n\n    // Clear error message\n    self.setValidationMessage(\"\");\n\n    // Check required\n    if (self.properties.required) {\n      var newRow = self.grid && self.grid.isFromCreatedRow.apply(self);\n\n      if (!newRow) {\n        if (!self.hasValue()) {\n          var message = self.getResource(\"render-required-text\").replaceAll(\"#label#\", self.properties.displayName);\n          invalidElements.push({ xpath: self.properties.xpath, message: message });\n          return false;\n        }\n      }\n    }\n\n    return true;\n  },\n\n  /**\r\n      * Build add params to send to the server\r\n      */\n  buildAddParams: function buildAddParams() {\n    var self = this;\n    var properties = self.properties;\n    var form = self.getFormContainer();\n    var data = {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = self.getUploadXpath();\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = properties.id;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = properties.xpathContext;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = properties.idPageCache;\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"sessionId\"] = form.properties.sessionId;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = 'savefile';\n\n    if (properties.contexttype) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = properties.contexttype;\n    }\n\n    try {\n      if (typeof BIZAGI_SESSION_NAME !== \"undefined\") {\n        data[BIZAGI_SESSION_NAME] = form.properties.sessionId;\n      } else {\n        data[\"JSESSIONID\"] = form.properties.sessionId;\n      }\n    } catch (e) {\n      data[\"JSESSIONID\"] = form.properties.sessionId;\n    }\n\n    return data;\n  },\n\n  /**\r\n      * Returns the xpath to be used\r\n      * @returns {*}\r\n      */\n  getUploadXpath: function getUploadXpath() {\n    return this.properties.xpath;\n  },\n\n  /**\r\n      * Clean html because some scenarios render twice\r\n      */\n  emptyControlByAsyncRenderDeferred: function emptyControlByAsyncRenderDeferred() {\n    var $control = this.getControl();\n    $control.empty();\n  },\n\n  buildOfflineImageId: function buildOfflineImageId() {\n    var self = this;\n    var form = self.getFormContainer();\n    var isVersion2OrSuperior = form.properties.compatibilityVersion >= 2;\n\n    return self.dataService.fileService.buildOfflineImageId(self.properties.value, self.properties.xpathContext, self.properties.xpath, isVersion2OrSuperior);\n  } });","/**\r\n *   Name: Bizagi Render Column ReadOnly Decorator Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for readonly-columns\r\n */\n\n// Extends itself\n$.Class.extend(\"bizagi.rendering.columns.readonly\", {}, {\n\n  /*\r\n                                                          *   Constructor\r\n                                                          */\n  init: function init(params) {\n    // Call base\n    this._super(params);\n\n    // Set base column styles\n    var properties = this.properties;\n\n    // Define the column as readonly\n    properties.editable = required = false;\n  },\n\n  /**\r\n      * Return true if the column is read-only, so we can make a quick render\r\n      */\n  isReadonly: function isReadonly() {\n    return true;\n  },\n\n  /**\r\n      * Method to check if a value is valid or not in this render\r\n      */\n  isValueValid: function isValueValid() {\n    // It is always valid because the column is readonly\n    return true;\n  } });","/*\r\n*   Name: BizAgi Render Document Generator\r\n*   Author: Mauricio Gonzalez\r\n*   Comments:\r\n*   -   This script will define basic stuff for document generator render\r\n*/\n\n$.Class.extend(\"bizagi.rendering.columns.document\", {}, {});","/*\r\n*   Name: BizAgi Render Letter\r\n*   Author: Alexander Mejia\r\n*   Comments:\r\n*   -   This script will define basic stuff for letter render\r\n*/\n\n$.Class.extend(\"bizagi.rendering.columns.letter\", {}, {});","/*\r\n*   Name: BizAgi Desktop Column Decorator Extension\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will redefine the column decorator class to adjust to desktop devices\r\n*/\n\n// Extends itself\nbizagi.rendering.columns.column.extend(\"bizagi.rendering.desktop.columns.column\", {}, {\n\n  /*\r\n                                                                                        *   Apply custom overrides to each decorated instance\r\n                                                                                        */\n  applyOverrides: function applyOverrides(decorated) {\n    if (!decorated) return;\n\n    // Hacks the getControl method in the decorated render to add features\n    if (decorated.getControl) {\n      this.originalGetControl = decorated.getControl;\n      decorated.getControl = this.getControl;\n    }\n\n    /* Customizes the font weight */\n    decorated.getFormattingLabel = function (bold) {\n      var self = this;\n      return self.getControl();\n    };\n  },\n\n  /*\r\n     *   Template method to get the control element\r\n     *   This code runs under the decorated element context\r\n     */\n  getControl: function getControl() {\n    var self = this;\n    var result = this._super();\n\n    if (!result || result.length == 0) {\n      result = $(\".ui-bizagi-cell-readonly\", self.element || self.observableElement);\n    }\n\n    return result;\n  },\n\n  /*\r\n     *   Post process the element after it has been rendered\r\n     */\n  postRenderReadOnly: function postRenderReadOnly(surrogateKey, cell) {\n    var self = this;\n    var properties = self.properties;\n\n    // Call base\n    this._super(surrogateKey, cell);\n\n    // Just draw render if the cell layout has been filled\n    if (cell && cell.length > 0) {\n      var cellIcon = $(\".ui-bizagi-cell-icon\", cell);\n      if (!properties.editable) cellIcon.remove();\n\n      // Apply styles to cell\n      self.applyColumnStyles(cell);\n\n      if (properties.align == \"left\") {\n        cellIcon.addClass(\"ui-bizagi-cell-icon-right\");\n      }\n    }\n  },\n\n  /*\r\n     *   Apply column styles to a specified element\r\n     */\n  applyColumnStyles: function applyColumnStyles(element) {\n    var self = this;\n    var properties = self.properties;\n\n    // Set cell back color\n    if (properties.textFormat.background) {\n      element.css(\"background-color\", properties.textFormat.background);\n      element.css(\"background-image\", \"none\");\n    }\n  } });","/*\r\n*   Name: BizAgi Render Combo Column Decorator Class\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will define basic stuff for Combo Columns\r\n*/\n\n$.Class.extend(\"bizagi.rendering.columns.combo\", {}, {\n\n  /*\r\n                                                       *   Constructor\r\n                                                       */\n  init: function init(params) {\n    // Call base\n    this._super(params);\n\n    // Set base column styles\n    var properties = this.properties;\n    properties.recalculate = bizagi.util.parseBoolean(properties.recalculate) || false;\n\n    if (bizagi.util.isOfflineForm({ context: this })) {\n      properties.recalculate = false;\n    }\n  },\n\n\n  /*\r\n     *   Apply custom overrides to each decorated instance\r\n     */\n  applyOverrides: function applyOverrides(decorated) {\n    var properties = this.properties;\n\n    this._super(decorated);\n\n    if (!properties.recalculate) {\n      decorated.originalGetData = decorated.getData;\n      decorated.getData = this.getDataForAllCells;\n      decorated.findDataById = this.findDataById;\n    }\n  },\n\n  findDataById: function findDataById(id) {\n    var self = this;\n    var result = {};\n    if (this.column && this.column.comboData) {\n      $.each(this.column.comboData, function (key, value) {\n        if (value.id == id) {\n          result = value;\n        }\n      });\n    }\n\n    return result;\n  },\n\n  /*\r\n     *   Single data fetch for all the cells\r\n     */\n  getDataForAllCells: function getDataForAllCells(params) {\n    var column = this.column;\n    if (column.comboData) return column.comboData;\n    if (column.fetchingData) return column.dataPromise;\n\n    // Start fetching\n    column.fetchingData = true;\n    column.dataPromise = $.when(this.originalGetData(params)).\n    pipe(function (result) {\n      column.comboData = result;\n      column.fetchingData = false;\n      return result;\n    });\n\n    return column.dataPromise;\n  },\n\n  /*\r\n     *   Sets the internal value\r\n     */\n  setValue: function setValue(surrogateKey, value) {\n    var self = this;\n    var decorated = self.getDecorated(surrogateKey);\n    if (decorated === null) {\n      return;\n    }\n\n    // Perform default set value when rendering summary row\n    if (surrogateKey == \"summary\") return self._super(surrogateKey, value);\n\n    if (value && bizagi.util.isString(value)) {\n      self._super(surrogateKey, value);\n    } else if (value && value.length > 0) {\n      // Create the value property\n      var newValue = {\n        id: value[0][0],\n        value: value[0].length > 2 ? $.grep(value[0], function (item, i) {return i != 0;}) : value[0][1] };\n\n      // Call base\n      self._super(surrogateKey, newValue);\n      decorated.selectedValue = newValue.value;\n    } else if (value && value.id && value.value) {\n      self._super(surrogateKey, value);\n      decorated.selectedValue = value.value;\n    } else if (self.properties.type == \"columnRadio\") {\n      self._super(surrogateKey, null);\n      decorated.selectedValue = value;\n    } else if (value && typeof value == \"number\") {\n      self._super(surrogateKey, value);\n    } else {\n      // Set null values when the entry array is null\n      self._super(surrogateKey, null);\n      decorated.selectedValue = \"\";\n    }\n  },\n\n  /*\r\n     * Set the cell default value and make this action as a change to send it to server\r\n     */\n  setDefaultValue: function setDefaultValue(surrogateKey, decorated) {\n    var self = this;\n    var value = self.properties.defaultValue[0];\n\n    decorated.grid.changes[surrogateKey] = decorated.grid.changes[surrogateKey] || {};\n    decorated.grid.changes[surrogateKey][self.properties.xpath] = value.id;\n\n    return value;\n  },\n\n  /*\r\n     *   Gets the internal value\r\n     */\n  getCompositeValue: function getCompositeValue(surrogateKey) {\n    var self = this;\n    var decorated = self.getDecorated(surrogateKey);\n    var value = decorated.getValue();\n    var label = decorated.getSelectedValue();\n\n    // Build value for grid data\n    var valueForGrid = [];\n    if (value && (value.id > 0 || bizagi.util.isString(value.id))) {\n      valueForGrid.push([]);\n      valueForGrid[0].push(value.id);\n      valueForGrid[0].push(label);\n    } else {\n      valueForGrid.push([]);\n    }\n\n    return valueForGrid;\n  },\n\n  /*\r\n     *   Gets the internal value\r\n     */\n  getValue: function getValue(surrogateKey) {\n    var self = this;\n    var decorated = self.getDecorated(surrogateKey);\n    var value = decorated.getValue();\n    if (value) return value.id;\n    return value;\n  },\n\n  /*\r\n     *   Returns the in-memory processed element \r\n     *   so the caller could append it to any place\r\n     */\n  render: function render(surrogateKey, value, tableCell) {\n    var self = this;\n    var decorated = self.getDecorated(surrogateKey);\n    var properties = self.properties;\n\n    // If the control needs to recalculate data, reset it on the decorated render\n    if (properties.recalculate) {\n      decorated.resetData();\n    }\n\n    // Change the xpath context\n    var xpathContext = properties.xpathContext.length > 0 ? properties.xpathContext + \".\" + self.grid.properties.xpath + \"[id=\" + surrogateKey + \"]\" : self.grid.properties.xpath + \"[id=\" + surrogateKey + \"]\";\n    decorated.properties.xpathContext = xpathContext;\n\n    // Render the control\n    var result = this._super(surrogateKey, value, tableCell);\n\n    return result;\n  },\n\n  renderReadOnly: function renderReadOnly(key, value) {\n    var self = this;\n    var decorated = self.getDecorated(key);\n    var properties = self.properties;\n\n    // Change the xpath context\n    var xpathContext = properties.xpathContext.length > 0 ? properties.xpathContext + \".\" + self.grid.properties.xpath + \"[id=\" + key + \"]\" : self.grid.properties.xpath + \"[id=\" + key + \"]\";\n    decorated.properties.xpathContext = xpathContext;\n\n    // Render the control\n    var result = this._super(key, value);\n\n    return result;\n  } });","/**\r\n *   Name: BizAgi Render Combo Column Decorator Class\r\n *   Author: Diego Parra\r\n *   Comments:\r\n *   -   This script will define basic stuff for Combo Columns\r\n */\n\n$.Class.extend(\"bizagi.rendering.columns.search\", {}, {\n  /*\r\n                                                        *   Constructor\r\n                                                        */\n  init: function init(params) {\n    // Call base\n    this._super(params);\n  },\n\n  /**\r\n      * Apply custom overrides to each decorated instance\r\n      * @param decorated\r\n      */\n  applyOverrides: function applyOverrides(decorated) {\n    this._super(decorated);\n\n    // Change the xpath context\n    var xpathContext;\n\n    if (this.properties.xpathContext.length > 0) {\n      xpathContext = this.properties.xpathContext + \".\" + this.grid.properties.xpath + \"[id=\" + decorated.surrogateKey + \"]\";\n    } else {\n      xpathContext = this.grid.properties.xpath + \"[id=\" + decorated.surrogateKey + \"]\";\n    }\n\n    decorated.properties.xpathContext = xpathContext;\n  },\n\n  /*\r\n     *   Returns the in-memory processed element\r\n     *   so the caller could append it to any place\r\n     */\n  render: function render(surrogateKey, value, tableCell) {\n    var self = this;\n    var decorated = self.getDecorated(surrogateKey);\n    var properties = self.properties;\n\n    // If the control needs to recalculate data, reset it on the decorated render\n    if (properties.recalculate) {\n      decorated.resetData();\n    }\n\n    // Render the control\n    var result = this._super(surrogateKey, value, tableCell);\n\n    return result;\n  },\n\n  /*\r\n     *   Gets the internal value\r\n     */\n  getValue: function getValue(surrogateKey) {\n    var self = this;\n    var decorated = self.getDecorated(surrogateKey);\n    var value = decorated.getValue();\n    return value;\n  },\n\n  setValue: function setValue(surrogateKey, value) {\n    var self = this;\n    var decorated = self.getDecorated(surrogateKey);\n    if (decorated === null) {\n      return;\n    }\n\n    // Perform default set value when rendering summary row\n    if (surrogateKey == \"summary\") return self._super(surrogateKey, value);\n\n    var compositeValue = self.getCompositeValue(surrogateKey);\n    if (!!compositeValue && typeof compositeValue.id !== \"undefined\" && compositeValue.id == value) {\n      value = compositeValue;\n    }\n\n    if (value && value.length > 0) {\n      // Create the value property\n      var newValue = {\n        id: value[0][0],\n        value: value[0].length > 2 ? $.grep(value[0], function (item, i) {\n          return i != 0;\n        }) : value[0][1] };\n\n      // Call base\n      self._super(surrogateKey, newValue);\n      decorated.selectedValue = newValue.value;\n    } else if (value && value.id && value.value) {\n      self._super(surrogateKey, value);\n      decorated.selectedValue = value.value;\n    } else if (value && value.id && value.label) {\n      self._super(surrogateKey, value);\n      decorated.selectedValue = value.label;\n    } else {\n      self._super(surrogateKey, value);\n      decorated.selectedValue = \"\";\n    }\n  } });","/**\r\n*   Name: Bizagi Render Date Column Decorator Class\r\n*   Author: UI Forms Team\r\n*   Comments:\r\n*   -   This script will define basic stuff for Date Columns\r\n*/\n\n\n$.Class.extend(\"bizagi.rendering.columns.date\", {}, {\n\n  /*\r\n                                                      *   Sets the internal value\r\n                                                      */\n  setValue: function setValue(surrogateKey, value) {\n    var self = this;\n    var decorated = self.getDecorated(surrogateKey);\n    if (decorated === null) return;\n\n    self._super(surrogateKey, value);\n    if ((value === null || value === undefined) && self.properties.defaultvalue !== undefined) {\n      value = self.setDefaultValue(surrogateKey, decorated);\n    }\n\n    // Perform default set value when rendering summary row\n    if (surrogateKey === \"summary\") return self._super(surrogateKey, value);\n\n    if (value == null) {\n      decorated.setValue(value, false);\n      decorated.properties.displayValue = \"\";\n    }\n\n    var date = bizagi.util.dateFormatter.getDateFromInvariant(value, decorated.properties.showTime);\n\n    if (date === 0) {\n      // force another attempt in order to check invariant format for the value with time or without time (reverse option)\n      date = bizagi.util.dateFormatter.getDateFromInvariant(value, !decorated.properties.showTime);\n    }\n    // Format date to current format\n    if (date !== 0) {\n      var datePickerRegional = bizagi.localization.getResource(\"datePickerRegional\");\n      var formattedDate = bizagi.util.dateFormatter.formatDate(date, decorated.properties.fullFormat, datePickerRegional);\n\n      // Set formatted value in display value property\n      decorated.properties.displayValue = formattedDate;\n\n      // Send original value to decorated control, because it must be with invariant format\n      decorated.setValue(value, false);\n    }\n  },\n\n  /*\r\n     * Set the cell default value and make this action as a change to send it to server\r\n     */\n  setDefaultValue: function setDefaultValue(surrogateKey, decorated) {\n    var self = this;\n    var value = self.properties.defaultvalue;\n\n    decorated.grid.changes[surrogateKey] = decorated.grid.changes[surrogateKey] || {};\n\n    value = bizagi.util.dateFormatter.getDateFromInvariant(value, decorated.properties.showTime || false);\n\n    value = bizagi.util.dateFormatter.formatInvariant(value, true);\n    decorated.grid.changes[surrogateKey][self.properties.xpath] = value;\n\n    return value;\n  } });","/**\r\n *   Name: Bizgi Render Hidden Column Decorator Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for hidden-columns\r\n */\n\n$.Class.extend(\"bizagi.rendering.columns.hidden\", {}, {\n\n  /**\r\n                                                         * Method to determine if the render value can be sent to the server or not\r\n                                                         * @returns {}\r\n                                                         */\n  canBeSent: function canBeSent() {\n    return true;\n  } });","/*\r\n *   Name: Bizagi Desktop Search Dialog Implementation\r\n *   Author: Diego Parra\r\n *   Comments:\r\n *   -   This script will shows a search form inside a popup dialog in order to edit\r\n */\n\n// Extends itself\n$.Class.extend(\"bizagi.rendering.dialog.search\", {\n  POPUP_WIDTH: 800,\n  POPUP_HEIGHT: 600 },\n{\n  /* \r\n  *   Constructor\r\n  */\n  init: function init(dataService, renderFactory, searchForms, searchParams, otherOptions) {\n    var self = this;\n    var doc = window.document;\n    otherOptions = otherOptions || {};\n\n    this.dataService = dataService;\n    this.renderFactory = renderFactory;\n    this.searchForms = searchForms;\n    this.searchParams = searchParams;\n    this.dialogDeferred = new $.Deferred();\n    this.extraButtons = otherOptions.hasOwnProperty(\"buttons\") ? otherOptions.buttons : false;\n\n    // Draw dialog box\n    self.dialogBox = $(\"<div class='ui-bizagi-component-loading'/>\");\n    self.dialogBox.empty();\n    self.dialogBox.appendTo(\"body\", doc);\n\n    // Create dialog box\n    self.showDialogBox(self.dialogBox).\n    done(function (data) {\n      self.dialogDeferred.resolve(data);\n      self.form.unbindAutoSaveForm();\n    }).\n    fail(function () {\n      self.dialogDeferred.reject();\n      self.form.unbindAutoSaveForm();\n    });\n  },\n  /*\r\n     *   Render the form\r\n     *   The params are the same that will be send to the ajax service\r\n     *   Returns a deferred\r\n     */\n  render: function render(params) {\n    var self = this;\n\n    // Render search dialog\n    self.renderSearchDialog(params);\n\n    // Return promise\n    return self.dialogDeferred.promise();\n  },\n  renderSearchDialog: function renderSearchDialog(params) {\n    var self = this;\n    self.form = null;\n    // Creates a dialog\n    $.when(self.getSearchContainerData(params)).\n    pipe(function (data) {\n\n      // Render dialog form\n      if (typeof data.form.properties != \"undefined\")\n      data.form.properties.orientation = params.orientation || \"ltr\";\n\n      var _form = self.renderFactory.getContainer({\n        type: \"form\",\n        data: data.form,\n        canvas: self.dialogBox });\n\n\n      if (params.contexttype) {\n        _form.properties.contexttype = params.contexttype;\n      }\n\n      // Save form reference\n      self.form = _form;\n\n      // Return rendering promise\n      return self.form.render();\n    }).\n    done(function (element) {\n      // Remove button container\n      $(\".ui-bizagi-button-container\", element).remove();\n\n      // Append form  in the dialog\n      $('.ui-bizagi-loading-message', self.dialogBox).remove();\n      element.appendTo(self.dialogBox);\n\n      // Publish an event to check if the form has been set in the DOM\n      self.form.triggerHandler(\"ondomincluded\");\n\n      // Check if there is a tab container (when there are more than one search form)\n      var tabContainer = self.form.firstChild().properties.type == \"tab\" ? self.form.firstChild() : null;\n      if (tabContainer) {\n\n        // Bind select tab event\n        tabContainer.bind(\"selected\", function (e, ui) {\n          var searchForm = self.searchForms[ui.index];\n\n          $.when(self.loadSearchTab(params, ui.tab, searchForm)).\n          done(function () {\n            // Set currents search form\n            self.currentSearchForm = ui.tab.firstChild();\n            self.currentSearchForm.triggerHandler(\"ondomincluded\");\n          });\n        });\n\n        // Select first tab\n        tabContainer.container.tabs(\"option\", \"active\", 0);\n        self.currentSearchForm = tabContainer.firstChild().firstChild();\n        self.currentSearchForm.triggerHandler(\"ondomincluded\");\n\n      } else {\n\n        // Set currents search form\n        self.currentSearchForm = self.form.firstChild();\n        self.currentSearchForm.triggerHandler(\"ondomincluded\");\n      }\n\n      // Focus into first control\n      self.focusFirstControl(self.currentSearchForm, 100);\n\n      // Add row selected handlers to resolve the deferred\n      self.currentSearchForm.bind(\"instanceSelected\", function (ev, ui) {\n        self.closeDialogBox();\n        self.dialogBoxDeferred.resolve({\n          id: ui.id,\n          label: '' });\n\n      });\n\n      // Event handler to searchList control\n      self.currentSearchForm.bind(\"multiSelect\", function (ev, ui) {\n        self.closeDialogBox();\n        self.dialogBoxDeferred.resolve({\n          id: ui.id,\n          label: ui.data });\n\n      });\n    });\n  },\n  /**\r\n     * Sets the focus to the first control\r\n     */\n  focusFirstControl: function focusFirstControl(form, time) {\n    // Configures effect\n    var effect = function effect() {\n      var defaultControl = $(\"input:visible, select:visible, option:visible, textarea:visible\", form.container);\n      if (defaultControl.length > 0) {\n        // Focus control\n        var innerControl = defaultControl[0];\n        try {\n          innerControl.focus();\n        } catch (e) {};\n      }\n    };\n\n    // Run effect\n    if (time > 0) {\n      setTimeout(effect, time);\n\n    } else {\n      effect();\n    }\n  },\n  /*\r\n     *   Loads a search tab on demand inside an already rendered dialog\r\n     */\n  loadSearchTab: function loadSearchTab(params, tab, searchForm) {\n    var self = this;\n    var defer = new $.Deferred();\n\n    // If the tab has children it is loaded already\n    if (tab.children.length > 0)\n    return null;\n\n    // Load search form data\n    $.when(self.getSearchFormData(params, searchForm)).\n    pipe(function (data) {\n      // Render data inside selected tab\n      var searchFormContainer = self.renderFactory.getContainer({\n        type: \"searchForm\",\n        data: data.form });\n\n      tab.children.push(searchFormContainer);\n\n      return searchFormContainer.render();\n    }).\n    done(function (element) {\n      // Remove button container\n      $(\".ui-bizagi-button-container\", element).remove();\n\n      tab.container.append(element);\n      defer.resolve();\n    });\n\n    return defer.promise();\n  },\n  /*\r\n     *   Shows the dialog box in the browser\r\n     *   Returns a promise that the dialog will be closed\r\n     */\n  showDialogBox: function showDialogBox(dialogBox, reverseButtons) {\n    var self = this;\n    var reverseButtons = self.searchParams.orientation == \"rtl\" ? true : false;\n    // Define buttons\n    var buttons = [];\n    self.dialogBoxDeferred = new $.Deferred();\n\n    var defaultButtons = [\n    {\n      text: bizagi.localization.getResource(\"render-form-dialog-box-search\"),\n      click: function click() {\n        if (self.searchParams) {\n          self.searchParams.searchTriggeredBy = \"button\";\n        }\n        // Perform search\n        self.currentSearchForm.performSearch(self.searchParams);\n      } },\n\n    {\n      text: bizagi.localization.getResource(\"render-form-dialog-box-cancel\"),\n      click: function click() {\n        self.dialogBoxDeferred.reject();\n        self.closeDialogBox();\n      } }];\n\n\n    if (this.extraButtons) {\n      buttons.push(this.extraButtons);\n    }\n    buttons = buttons.concat(defaultButtons);\n\n    if (reverseButtons)\n    buttons.reverse();\n\n    var popupWidth = this.Class.POPUP_WIDTH;\n    var popupHeight = this.Class.POPUP_HEIGHT;\n\n    if (popupWidth > $(window).width())\n    popupWidth = $(window).width() * 0.9;\n\n    // Creates a dialog\n    dialogBox.\n    addClass(\"ui-bizagi-dialog-search\").\n    dialog({\n      title: bizagi.localization.getResource(\"render-search-dialog-title\"),\n      width: popupWidth,\n      height: popupHeight,\n      resizable: false, // This one is to avoid a memory leak, DO NOT CHANGE PLEASE\n      modal: true,\n      buttons: buttons,\n      close: function close() {\n        self.dialogBoxDeferred.reject();\n        self.closeDialogBox();\n      },\n      resizeStop: function resizeStop(event, ui) {\n        self.form.resize(ui.size);\n      },\n      maximize: function maximize(e) {\n        if (self.currentSearchForm) {\n          self.currentSearchForm.triggerHandler(\"maximazedForm\");\n          self.dialogBox.trigger(\"resize\");\n        }\n      },\n      unmaximize: function unmaximize(e) {\n        if (self.currentSearchForm) {\n          self.currentSearchForm.triggerHandler(\"unmaximazedForm\");\n          self.dialogBox.trigger(\"resize\");\n        }\n      } });\n\n\n    // Return promise\n    return self.dialogBoxDeferred.promise();\n  },\n\n  /*\r\n     *   Closes the dialog box\r\n     */\n  closeDialogBox: function closeDialogBox() {\n    var self = this;\n    var dialogBox = self.dialogBox;\n    dialogBox.dialog('destroy');\n    dialogBox.detach();\n    // Invalidate searchform page cache in the server\n    var pageCacheToInvalidate = self.currentSearchForm.getPageCache();\n    self.dataService.invalidatePageCache({ idPageCache: pageCacheToInvalidate });\n  },\n\n  /**\r\n     * Add buttons to dialog box\r\n     */\n\n  addButtons: function addButtons(params) {\n\n\n  },\n  /*     \r\n     *   Creates the search dialog sub-containers\r\n     */\n  getSearchContainerData: function getSearchContainerData(params) {\n    var self = this;\n    var deferred = new $.Deferred();\n    var data = {\n      form: {\n        properties: {},\n        elements: [] } };\n\n\n    var container = data.form;\n    var searchFormToLoad = self.searchForms[0];\n\n    // When there are more than one search form, render a tab container\n    if (self.searchForms.length > 1) {\n\n      var tabContainer = {};\n      tabContainer.properties = {\n        type: \"tab\" };\n\n      tabContainer.elements = [];\n      var otherElements = [];\n\n      $.each(self.searchForms, function (i, searchForm) {\n        var isDefault = searchForm[\"default\"] || false;\n\n        // Create tab item\n        var tab = {};\n        tab.properties = {\n          id: i,\n          type: 'tabItem',\n          displayName: searchForm.caption };\n\n        tab.elements = [];\n\n        // Append children \n        if (isDefault) {\n\n          tabContainer.elements.push({\n            container: tab });\n\n\n          // Set properties to load default container\n          container = tab;\n          searchFormToLoad = self.searchForms[0];\n\n        } else {\n          otherElements.push({\n            container: tab });\n\n\n        }\n      });\n\n      // Append no defaults elements\n      $.each(otherElements, function (i, element) {\n        tabContainer.elements.push(element);\n      });\n\n      data.form.elements.push({\n        container: tabContainer });\n\n    }\n\n    // Loads default form\n    $.when(self.getSearchFormData(params, searchFormToLoad)).done(function (searchFormData) {\n      if (searchFormData) {\n        container.elements.push(searchFormData);\n        // Add a reference to inner search form pagecache\n        container.pageCacheId = searchFormData.form.pageCacheId;\n        // Resolve deferred\n        deferred.resolve(data);\n      }\n    }).fail(function () {\n      console.log(\"Error\");\n    });\n\n    return deferred.promise();\n  },\n  /*\r\n     *   Loads a search form\r\n     */\n  getSearchFormData: function getSearchFormData(params, searchForm) {\n    var self = this;\n    //Check if exist form\n    if (searchForm == undefined || searchForm.id == undefined) {\n      var strMessage = bizagi.localization.getResource(\"render-search-without-form\");\n      var divMessage = $(\"<div>\").append(strMessage);\n      self.dialogBox.dialog(\"close\");\n\n      $(divMessage).dialog({\n        modal: true,\n        buttons: [{\n          text: bizagi.localization.getResource(\"render-form-dialog-box-close\"),\n          click: function click() {\n            $(this).dialog(\"close\");\n          } }],\n\n        maximize: function maximize(e) {\n          console.log(\"please check if executed, which form trigger the event 'dialog.search'\");\n        },\n        unmaximize: function unmaximize(e) {\n          console.log(\"please check if executed, which form trigger the event 'dialog.search'\");\n        } });\n\n\n      return false;\n    }\n\n    return self.dataService.getSearchFormData($.extend(params, {\n      idSearchForm: searchForm.id,\n      url: searchForm.url })).\n\n    pipe(function (data) {\n      // Append search render properties\n      data.form.properties.idRender = params.idRender;\n\n      return data;\n    });\n  },\n\n  dispose: function dispose() {\n    var self = this;\n    self.form.dispose();\n    bizagi.util.dispose(self.buttons);\n    bizagi.util.dispose(self);\n  } });","/**\r\n * Description of file\r\n *\r\n * @author: Jeison Borja\r\n */\n\nbizagi.rendering.dialog.search.extend(\"bizagi.rendering.dialog.searchUser\", {}, {\n  /*\r\n                                                                                   * Constructor\r\n                                                                                   */\n  init: function init(dataService, renderFactory, searchForms, searchParams, otherOptions) {\n    // Call base\n    this._super(dataService, renderFactory, searchForms, searchParams, otherOptions);\n  },\n\n  getSearchFormData: function getSearchFormData(params) {\n    return {\n      \"form\": {\n        \"properties\":\n        {\n          \"id\": \"3ad923cf-f21e-439e-90b5-f2df8ffe4559\",\n          \"type\": \"searchForm\",\n          \"displayName\": \"SearchWFuser\",\n          \"xpathContext\": \"\",\n          \"columns\": [\n          { \"caption\": \"idUser\", \"dataType\": 7, \"xpath\": \"idUser\" },\n          { \"caption\": \"userName\", \"dataType\": 15, \"xpath\": \"userName\" },\n          { \"caption\": \"domain\", \"dataType\": 15, \"xpath\": \"domain\" },\n          { \"caption\": \"fullName\", \"dataType\": 15, \"xpath\": \"fullName\" },\n          { \"caption\": \"enabledForAssignation\", \"dataType\": 5, \"xpath\": \"enabledForAssignation\" },\n          { \"caption\": \"enabled\", \"dataType\": 5, \"xpath\": \"enabled\" }] },\n\n\n        \"elements\": [\n        {\n          \"render\": {\n            \"properties\": {\n              \"id\": \"e0babe1d-7924-4d2a-8fb3-b915b746dbe6\",\n              \"type\": \"searchText\",\n              \"xpath\": \"domain\",\n              \"displayName\": \"domain\",\n              \"dataType\": 15 } } },\n\n\n\n        {\n          \"render\": {\n            \"properties\": {\n              \"id\": \"87b14b2e-992d-4e40-a17b-eecbcbc2466a\",\n              \"type\": \"searchText\",\n              \"xpath\": \"userName\",\n              \"displayName\": \"userName\",\n              \"dataType\": 15 } } },\n\n\n\n        {\n          \"render\": {\n            \"properties\": {\n              \"id\": \"c5d137d9-a392-4d8e-9088-d5eba64b4c2a\",\n              \"type\": \"searchText\",\n              \"xpath\": \"fullName\",\n              \"displayName\": \"fullName\",\n              \"dataType\": 15 } } }],\n\n\n\n\n        \"buttons\": [],\n        \"sessionId\": \"bcy5gtv11xxao4oy4xrlk3o3\",\n        \"pageCacheId\": 1876964702 },\n\n      \"type\": \"form\" };\n\n  } });","/*\r\n*   Name: Bizagi Desktop Letter Dialog Implementation\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will shows a letter inside a popup dialog in order to edit\r\n*/\n\n// Extends itself\n$.Class.extend(\"bizagi.rendering.dialog.letter\", {\n  POPUP_WIDTH: 800,\n  POPUP_HEIGHT: 550 },\n{\n\n  /* \r\n  *   Constructor\r\n  */\n  init: function init(dataService, renderFactory) {\n    this.dataService = dataService;\n    this.renderFactory = renderFactory;\n  },\n\n  /*\r\n     *   Render the letter content\r\n     *   The params are the same that will be send to the ajax service\r\n     *   Returns a deferred\r\n     */\n  render: function render(content) {\n    var self = this;\n    var doc = window.document;\n    var template = self.renderFactory.getTemplate(\"letter.dialog\");\n\n    // Render template\n    var dialog = $.tmpl(template);\n\n    // Append form  in the dialog\n    dialog.appendTo(\"body\", doc);\n\n    // Set height and width manually to adjust to the container\n    var textarea = $(\"#ui-bizagi-rtfeditor\", dialog);\n    textarea.width(this.Class.POPUP_WIDTH - 30);\n    textarea.height(this.Class.POPUP_HEIGHT - 150);\n\n    // Apply plugin\n    new nicEditor({\n      iconsPath: self.dataService.getLetterEditorIconsPath(),\n      fullPanel: true }).\n    panelInstance('ui-bizagi-rtfeditor');\n\n    // Create a templateParts array to hold the full html separated by body tags\n    self.templateParts = content.split(/(<body>|<\\/body>)/ig);\n\n    // Set data\n    nicEditors.findEditor(\"ui-bizagi-rtfeditor\").setContent(content);\n\n    // Create dialog box\n    return self.showDialogBox(dialog);\n  },\n\n  /*\r\n     *   Shows the dialog box in the browser\r\n     *   Returns a promise that the dialog will be closed\r\n     */\n  showDialogBox: function showDialogBox(dialogBox) {\n    var self = this;\n\n    // Define buttons\n    var buttons = {};\n    var defer = new $.Deferred();\n\n    buttons[bizagi.localization.getResource(\"render-letter-dialog-box-save\")] = function () {\n      var newContent = nicEditors.findEditor(\"ui-bizagi-rtfeditor\").getContent();\n\n      // Destroy dialog\n      dialogBox.dialog('destroy');\n      dialogBox.remove();\n\n      // Append content to template, because the plugine removed html, head and body tags\n      //  - Actually there is an incosistent behaviour between IE8 and IE9\n      //  - In IE8, the templateParts doesn't include the <body> in the splitted array\n      //  - In IE9, the templateParts includes the <body> in the splitted array\n      if (self.templateParts[1] == \"<body>\") {\n\n        // Remove empty headers, rare behaviour in IE9\n        self.templateParts[2] = newContent.replaceAll(\"<header></header>\", \"\");\n\n        // Return new content\n        defer.resolve(self.templateParts.join(\"\"));\n\n      } else {\n        // Return new content\n        defer.resolve(self.templateParts[0] + \"<body>\" + newContent + \"</body>\" + (self.templateParts.length > 2 ? self.templateParts[2] : \"\"));\n      }\n\n\n    };\n    buttons[bizagi.localization.getResource(\"render-letter-dialog-box-cancel\")] = function () {\n      dialogBox.dialog('close');\n    };\n\n    // Creates a dialog\n    dialogBox.dialog({\n      width: this.Class.POPUP_WIDTH,\n      height: this.Class.POPUP_HEIGHT,\n      title: bizagi.localization.getResource(\"render-letter-dialog-title\"),\n      modal: true,\n      buttons: buttons,\n      close: function close(ev, ui) {\n        dialogBox.dialog('destroy');\n        dialogBox.remove();\n        defer.reject();\n      } });\n\n\n    // Return promise\n    return defer.promise();\n  } });","/**\r\n *   Name: Bizagi Desktop Form Extension\r\n *   Author: Diego Parra\r\n *   Comments:\r\n *   -   This script will redefine the form class to adjust to desktop devices\r\n *   -   Will apply a desktop form template\r\n */\n\n// Extends from container desktop base\nbizagi.rendering.desktop.container.extend(\"bizagi.rendering.desktop.form\", bizagi.rendering.form.prototype);\n// Auto extend\nbizagi.rendering.desktop.form.extend(\"bizagi.rendering.desktop.form\", {}, {\n\n  /* \r\n                                                                            *   Template method to implement in each device to customize each container after processed\r\n                                                                            */\n  postRenderContainer: function postRenderContainer(container) {\n    var self = this;\n\n    // Apply plugin\n    if (self.useQuickActions) {\n      self.initFormButton();\n    }\n\n    // Call base\n    self._super(container);\n\n    if (self.getMode() !== \"execution\") return;\n\n    // Style buttons\n    var buttons = self.getButtons();\n    buttons.button();\n\n    //Set button length\n    var lengthButtons = buttons ? buttons.length : 0;\n\n    if (lengthButtons && self.params.type === \"form\" && self.params.isEntityForm !== true) {\n\n      $(document).data('auto-save', self.properties.id);\n      self.configureBindAutoSave(function (deferredSave) {\n        self.autoSaveEvents(deferredSave);\n      });\n\n      //bind event beforeunload\n      self.beforeUnloadFunction = function (e) {\n\n        var newData = {};\n        self.collectRenderValues(newData);\n        //if there are changes in the form show a message\n        if (!$.isEmptyObject(newData) && $(document).data('auto-save')) {\n          return bizagi.localization.getResource(\"confirmation-savebox-message2\");\n        }\n        return;\n      };\n      $(window).unbind('beforeunload').bind('beforeunload', self.beforeUnloadFunction);\n    } else {\n      if ($._data(document)['events'] && !$._data(document)['events']['save-form']) {\n        self.configureBindAutoSave(function (deferredSave) {\n          deferredSave.resolve();\n        });\n      }\n    }\n\n    self.buildProcessPath();\n    var ecmContainer = typeof isWebpart !== \"undefined\" ? $(document) : $(\"#ui-bizagi-wp-app-render-form-content\");\n    ecmContainer.scroll(function () {\n      $(\".modal-ecm\", this).hide();\n    });\n  },\n\n  /**\r\n      * Configure autoSave with callback\r\n      * @param callback\r\n      */\n  configureBindAutoSave: function configureBindAutoSave(callback) {\n    var self = this;\n\n    //bind event auto-save\n    self.autoSaveFunction = function (e, deferredSave) {\n      callback(deferredSave);\n    };\n\n    //Keeps the reference of the function required for handling autoSave\n    if (self.haveAutosaveAssociated()) {\n      // Unbind previous events in order to prevent propagation //QAF-2521\n      $(document).unbind(\"save-form\", self.saveFormDelegate);\n    } else {\n      self.saveFormDelegate = $.proxy(self.autoSaveFunction, self);\n    }\n    // Bind event with actual reference of form\n    $(document).unbind(\"save-form\").bind(\"save-form\", {\n      idAutoSave: self.getIdentifierFormForAutosave(),\n      functionSaveFormDelegate: self.saveFormDelegate },\n    self.saveFormDelegate);\n  },\n\n  /**\r\n      * Call from child widgets\r\n      */\n  unbindAutoSaveForm: function unbindAutoSaveForm() {\n    var self = this;\n    if (self.saveFormDelegate) {\n      $(document).unbind(\"save-form\", self.saveFormDelegate);\n    }\n  },\n\n  /**\r\n      * Get a identifier for knows if form have autoSave associated\r\n      * @returns {*}\r\n      */\n  getIdentifierFormForAutosave: function getIdentifierFormForAutosave() {\n    var self = this;\n    return self.properties.id ? self.properties.id.concat(\"_\" + self.properties.uniqueId) : self.properties.uniqueId;\n  },\n\n  /**\r\n      * Determine if form have autosave associated, if yes, rewrite function saveFormDelegate\r\n      * @returns {boolean}\r\n      */\n  haveAutosaveAssociated: function haveAutosaveAssociated() {\n    var result = false;\n    var self = this;\n    var autoSaveIdentifier = self.getIdentifierFormForAutosave();\n    var autoSaveHandlers = $._data($(document)[0], 'events')[\"save-form\"] || [];\n    for (var i = 0, length = autoSaveHandlers.length; i < length; i += 1) {\n      if (autoSaveHandlers[i].data.idAutoSave === autoSaveIdentifier) {\n        self.saveFormDelegate = autoSaveHandlers[i].data.functionSaveFormDelegate;\n        result = true;\n        break;\n      }\n    }\n    return result;\n  },\n\n  /*\r\n     * Auto Save Events\r\n     */\n  autoSaveEvents: function autoSaveEvents(deferredSave, saveBox) {\n    var self = this;\n    var data = {};\n    var changes = [];\n    var form = self.getFormContainer();\n    form.hasChanged(changes);\n\n    /* \r\n                              *saving changes to validate or not the contents into a table\r\n                              */\n    if (changes.length > 0) {\n\n      $.when(bizagi.showSaveBox(bizagi.localization.getResource(\"confirmation-savebox-message1\"), \"Bizagi\", \"warning\", self.properties.orientation)).done(function () {\n        self.collectRenderValues(data);\n        $.when(self.saveForm(data)).done(function () {\n          //unbinding the save-form\n          if (self.saveFormDelegate) {\n            $(document).unbind(\"save-form\", self.saveFormDelegate);\n          }\n          if (bizagi.util.isSharepointContext())\n          $(document).data('auto-save', '');\n\n          deferredSave.resolve();\n        });\n      }).fail(function (params) {\n        if (params == \"cancel\") {\n          deferredSave.reject();\n        } else {\n          deferredSave.resolve();\n\n          //unbinding the save-form function in case if is still bound\n          if (self.saveFormDelegate)\n          $(document).unbind(\"save-form\", self.saveFormDelegate);\n\n          if (bizagi.util.isSharepointContext())\n          $(document).data('auto-save', '');\n        }\n      });\n    } else {\n      //unbinding the save-form function in case if is still bound\n      if (self.saveFormDelegate)\n      $(document).unbind(\"save-form\", self.saveFormDelegate);\n\n      deferredSave.resolve();\n    }\n  },\n\n  /*\r\n     *   Template method to get the buttons objects \r\n     */\n  getButtons: function getButtons() {\n    var self = this;\n    var container = self.container;\n\n    return $(\".ui-bizagi-button-container .ui-bizagi-button\", container);\n  },\n\n  /*\r\n     *   Template method to implement in each device to customize the container's behaviour to show layout\r\n     */\n  configureLayoutView: function configureLayoutView() {\n    // Do nothing\n  },\n\n  /*\r\n     *   Dispose the class so we can detect when a class is invalid already\r\n     */\n  dispose: function dispose() {\n    var self = this;\n\n    // Remove  the document handlers for auto-save\n    $(window).unbind('beforeunload', self.beforeUnloadFunction);\n\n    $(document).unbind(\"save-form\", self.saveFormDelegate);\n\n    // Call base\n    self._super();\n  },\n  /*\r\n     *   Submits all the form to the server and returns a deferred to check when the process finishes\r\n     */\n  saveForm: function saveForm(data) {\n    var self = this;\n\n    // Check is offline form\n    var isOfflineForm = bizagi.util.isOfflineForm({ context: self });\n\n    // Collect data\n    data = self.collectRenderValuesForSubmit(data);\n\n    // Check if there are deferreds to wait\n    var deferredsToWait = null;\n    if (data.deferreds) {\n      deferredsToWait = $.when.apply($, data.deferreds);\n      delete data.deferreds;\n    }\n\n    // Wait for deferreds\n    return $.when(deferredsToWait).pipe(function () {\n      self.startLoading();\n\n      // Submit the form\n      return self.dataService.submitData({\n        action: \"SAVE\",\n        data: data,\n        xpathContext: self.properties.xpathContext,\n        idPageCache: self.properties.idPageCache,\n        isOfflineForm: isOfflineForm || false }).\n      always(self.endLoading.bind(self));\n    });\n  },\n  /*\r\n     * Gets changes of current navigation form\r\n     */\n  getChanges: function getChanges() {\n    var self = this;\n    var data = {};\n\n    if (typeof self.collectRenderValues != \"undefined\") {\n      self.collectRenderValues(data);\n    }\n\n    return data;\n  },\n  /*\r\n      *build path process\r\n      */\n  buildProcessPath: function buildProcessPath(container) {\n    var self = this;\n    var properties = self.properties;\n    var mode = self.getMode();\n    var queryForm = self.getFormType() == \"queryForm\";\n    var summaryForm = self.params.summaryForm || false;\n    var globalForm = self.properties.displayAsReadOnly || false;\n    if (mode == \"execution\" && !queryForm && !summaryForm && !globalForm && self.properties.processPath && self.properties.processPath.length > 0) {\n      var template = self.renderFactory.getTemplate(\"form-process-path\");\n      var html = $.fasttmpl(template, { processPath: properties.processPath });\n      self.pathProcess = html;\n    } else {\n      self.pathProcess = \"\";\n    }\n  },\n\n  /**\r\n      * Initialize the form buttons\r\n      */\n  initFormButton: function initFormButton() {\n    var self = this;\n    var form = self.getFormContainer();\n    var maxButtonSupported = bizagi.override && bizagi.override.maxButtonForQuickActions > 0 ? bizagi.override.maxButtonForQuickActions : 6;\n    var buttons = self.buttons || [];\n    var buttonsToShow = self.getListWithPriority(buttons, maxButtonSupported);\n\n    if (buttonsToShow.length > 0) {\n      $(\".ui-bizagi-button-container.bz-form-buttons\", form.container).formButtons({\n        maxButtons: maxButtonSupported,\n        buttons: buttonsToShow,\n        click: function click(element, params) {\n          self.processQuickButton(params.ordinal);\n        } });\n\n    }\n  },\n\n  getListWithPriority: function getListWithPriority(listButtons, maxButtonSupported) {\n    return listButtons.filter(function (item) {\n      return bizagi.util.parseBoolean(item.visible) !== false;\n    }).map(function (item, index) {\n      return Object.assign(item, {\n        visible: bizagi.util.parseBoolean(item.visible) !== false,\n        additional: index + 1 > maxButtonSupported,\n        priority: item.quickAction !== true ? 1 : index,\n        ranked: true,\n        index: index });\n\n    });\n  } });","/*\r\n*   Name: Bizagi Desktop Panel Extension\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will redefine the panel class to adjust to desktop devices\r\n*/\n\n// Extends from container desktop base\nbizagi.rendering.desktop.container.extend(\"bizagi.rendering.desktop.panel\", bizagi.rendering.panel.prototype);\n// Extends itself\nbizagi.rendering.desktop.panel.extend(\"bizagi.rendering.desktop.panel\", {}, {});","/*\r\n*   Name: Bizagi Desktop ContentPanel Extension\r\n*   Author: David Romero\r\n*   Comments:\r\n*   -   This script will redefine the content panel class to adjust to desktop devices\r\n*/\n\n// Extends from container desktop base\nbizagi.rendering.desktop.container.extend(\"bizagi.rendering.desktop.contentPanel\", bizagi.rendering.contentPanel.prototype);\n// Extends itself\nbizagi.rendering.desktop.contentPanel.extend(\"bizagi.rendering.desktop.contentPanel\", {}, {});","/**\r\n *   Name: Bizagi Desktop Nested Form Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define a nested form container class for all devices\r\n */\n\n// Extends from container desktop panel base\nbizagi.rendering.desktop.panel.extend(\"bizagi.rendering.desktop.nestedForm\", {}, {\n\n  /*\r\n                                                                                   *   Template method to implement in each device to customize the render's behaviour when rendering in design mode\r\n                                                                                   */\n  configureDesignView: function configureDesignView() {\n    var self = this;\n    var properties = self.properties;\n    var container = self.container;\n\n    container.removeClass(\"ui-bizagi-container-panel\");\n    container.addClass(\"ui-bizagi-container-nestedform\");\n\n    var title = $(\"<span class= 'ui-bizagi-container-nestedform-title'/>\");\n    title.text(\"Nested Form: \" + properties.formDisplayName);\n    container.prepend(title);\n  } });","/*\r\n*   Name: Bizagi Desktop Tab Container Extension\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will redefine the tab class to adjust to desktop devices\r\n*/\n\n// Extends from container desktop base\nbizagi.rendering.desktop.container.extend(\"bizagi.rendering.desktop.tab\", bizagi.rendering.tab.prototype);\n// Auto extend\nbizagi.rendering.desktop.tab.extend(\"bizagi.rendering.desktop.tab\", {}, {\n\n  /* \r\n                                                                          *   Template method to implement in each device to customize each container after processed\r\n                                                                          */\n  postRenderContainer: function postRenderContainer(tab) {\n    var self = this;\n\n    // Call base\n    self._super(tab);\n\n    // Apply tabs widget\n    tab.tabs({\n      active: self.activeTab,\n      activate: function activate(event, ui) {\n        self.children[self.activeTab].visibleTab();\n        // BUGFIX for grids inside tabs\n        var timeoutResize = setTimeout(\n        function () {\n          self.resize({ width: self.container.width(), height: self.container.height() });\n          if (typeof self.getParams() != \"undefined\")\n          if (self.getParams().context == \"sharepoint\" || window.self !== window.top)\n          self.resizeInPopUpHTML();\n          clearTimeout(timeoutResize);\n        },\n        50);\n      },\n      beforeActivate: function beforeActivate(event, ui) {\n        var index = ui.newTab.index();\n\n        self.setActiveTab(index);\n      } });\n\n\n    var timeoutHeader = setTimeout(function () {\n      self.children.forEach(function (tabItem) {\n        var properties = tabItem.properties;\n        if (properties.tooltip) {\n          var tabHeader$ = $(\"a[href=#ui-bizagi-tab-\" + properties.id + \"]\", tab);\n          tabHeader$.tooltip({\n            content: tabHeader$.attr(\"title\"),\n            position: {\n              at: \"center top-55\" } });\n\n\n        }\n      });\n      clearTimeout(timeoutHeader);\n    }, 10);\n\n  },\n  resizeInPopUpHTML: function resizeInPopUpHTML() {\n    var self = this;\n    if ($(\".activitiFormContainer\").length > 0) {\n      var heightActivitiFormContainer = $(\".activitiFormContainer\").height() || 0;\n      var renderForm = $(\".activitiFormContainer #ui-bizagi-webpart-render-container\");\n      var buttonContainer = $(\".ui-bizagi-button-container\", \".activitiFormContainer\");\n      var params = self.getParams();\n      if (params.idWorkitem || buttonContainer.length > 0) {\n        //display buttons\n        var heightButtonContainer = buttonContainer.height() || 0;\n        renderForm.height(heightActivitiFormContainer - 110 - heightButtonContainer);\n      } else {\n        //NOT display buttons\n        renderForm.height(heightActivitiFormContainer - 110);\n      }\n    }\n  },\n  /*\r\n     *   Template method to implement in each device to customize the container's behaviour to show layout\r\n     */\n  configureLayoutView: function configureLayoutView() {\n    // Do nothing\n  } });","/**\r\n *   Name: Bizagi Desktop TabItem Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the tab item class to adjust to desktop devices\r\n */\n\n// Extends from container desktop base\nbizagi.rendering.desktop.container.extend(\"bizagi.rendering.desktop.tabItem\", bizagi.rendering.tabItem.prototype);\n// Extends itself\nbizagi.rendering.desktop.tabItem.extend(\"bizagi.rendering.desktop.tabItem\", {}, {\n\n  /*\r\n                                                                                  *   Constructor\r\n                                                                                  */\n  init: function init(params) {\n    var self = this;\n\n    // Call base\n    this._super(params);\n\n    // Set tab ready deferred\n    self.tabReadyDeferred = new $.Deferred();\n    self.loadingDeferred = new $.Deferred();\n    self.tabActiveDeferred = new $.Deferred();\n  },\n\n  /* \r\n     *   Resizes the container to adjust it to the container\r\n     */\n  resize: function resize(size) {\n    var self = this,\n    container = self.container;\n    var width = container.width();\n\n    // Set a timeout to resize the tab only when the tab is visible\n    // Will try only ten times to avoid infinite cycles\n    var counter = 0;\n    var resizeTimeout = function resizeTimeout() {\n      if (counter > 10) return;\n      if (container.is(\":visible\")) {\n        $.each(self.children, function (i, child) {\n          child.resize({ width: width });\n        });\n      } else {\n        counter++;\n        var timeoutResize = setTimeout(function () {\n          resizeTimeout();\n          clearTimeout(timeoutResize);\n        }, 200);\n      }\n    };\n    $.when(self.ready()).done(function () {\n      resizeTimeout();\n    });\n  },\n\n  /* \r\n     *   Change selected item \r\n     */\n  setAsActiveContainer: function setAsActiveContainer(argument) {\n    var self = this;\n\n    $.when(self.ready()).done(function () {\n      // Changes item\n      var tabContainer = self.parent;\n      if (tabContainer.container.data(\"ui-tabs\")) {\n        tabContainer.container.tabs(\"option\", \"active\", self.container.data(\"tab-counter\"));\n      }\n    });\n  },\n\n  /*\r\n     *   Fires when the tab is selected manually\r\n     */\n  activate: function activate() {\n    this._super();\n    if (this.loadingDeferred) this.loadingDeferred.resolve();\n  },\n\n  /*\r\n     *   Fires when the tab is visible\r\n     */\n  visibleTab: function visibleTab() {\n    if (this.tabActiveDeferred) this.tabActiveDeferred.resolve();\n  },\n\n  /* \r\n     *   Focus on container\r\n     */\n  focus: function focus() {\n    // Activate the tab if it hasn't been loaded\n    this.activate();\n\n    // Set this tab as an active container\n    this.setAsActiveContainer();\n\n    // Call base\n    this._super();\n  },\n\n  /*\r\n     * Renders the tab content\r\n     */\n  renderTabContent: function renderTabContent(html) {\n    var self = this;\n    var properties = this.properties;\n\n    var form = self.getFormContainer();\n\n    // Render children\n    if (properties.loadOnDemand === undefined || properties.loadOnDemand == false || form.innerTabsLoading || form.params.printversion || self.canSkipThisFormType(form.properties.type)) {\n      html = self.replaceChildrenHtml(html, self.renderChildrenHtml());\n      self.tabReadyDeferred.resolve();\n      self.tabActiveDeferred.resolve();\n      return html;\n    } else {\n      // Defer execution for a while to improve first tab pkerformance\n      self.startLoading();\n\n      // Start a timeout, when the timeout finishes, it resolves the deferred therefore loading the tab\n      if (self.getMode() == \"execution\") {\n        var timeoutLoading = setTimeout(function () {\n          if (self.loadingDeferred) {\n            self.loadingDeferred.resolve();\n          }\n          clearTimeout(timeoutLoading);\n        }, 10500);\n      }\n\n      $.when(self.loadingDeferred.promise()).\n      done(function () {\n        if (!self.isDisposed()) {\n          $.when(self.parent.ready()).done(function () {\n            self.replaceChildrenTag(self.container, self.renderChildrenHtml());\n            self.postRenderContainer(self.container);\n            self.endLoading();\n\n            // Resolve tab deferred when tab is ready\n            self.tabReadyDeferred.resolve();\n            self.tabActiveDeferred.resolve();\n          });\n        } else {\n          // Reject tab deferred when tab is not valid\n          self.tabReadyDeferred.reject();\n          self.tabActiveDeferred.reject();\n        }\n      });\n\n      // Set a div in order to asynchonously resolve this\n      html = self.replaceChildrenHtml(html, '<div class=\"children\"/>');\n      return html;\n    }\n  },\n\n  canSkipThisFormType: function canSkipThisFormType(formType) {\n    var self = this;\n    var mode = self.getMode();\n\n    return mode == 'execution' ? /^queryForm$/i.test(formType) : false;\n  },\n  /*\r\n     *   Returns promise to hold any execution until the content is ready\r\n     */\n  ready: function ready(argument) {\n    var self = this;\n\n    if (bizagi.util.parseBoolean(argument) && self.container && self.container.length) {\n      if (self.loadingDeferred) {\n        self.loadingDeferred.resolve();\n      }\n      $.when(self.tabReadyDeferred.promise()).done(function () {\n        self.activate();\n      });\n    }\n\n    if (bizagi.util.parseBoolean(argument)) {\n      if (!(self.container && self.container.length)) {\n        var id = setInterval(function () {\n          if (self.container && self.container.length) {\n            clearInterval(id);\n            if (self.loadingDeferred) {\n              self.loadingDeferred.resolve();\n            }\n          }\n        }, 50);\n      }\n    }\n\n    // Merge promises\n    return $.when(\n    self.tabReadyDeferred.promise(),\n    self.parent.ready(),\n    self.tabActiveDeferred.promise());\n\n  },\n\n  /* \r\n     *   Hides / Show container \r\n     */\n  changeVisibility: function changeVisibility(argument) {\n    var self = this;\n    var properties = self.properties;\n\n    self._super(argument);\n\n    var tabContainer = self.parent.container;\n    var id = \"ui-bizagi-tab-\" + properties.id;\n    var header = $(\"ul li[aria-controls = '\" + id + \"']\", tabContainer);\n    var activeTab = self.parent.getActiveTab();\n\n    $.when(self.ready()).\n    done(function () {\n      // Hide - show the render\n      if (properties.visible) {\n        header && header.show();\n        self.setAsActiveContainer();\n      } else {\n        if (self.getMode() === \"execution\") {\n          header && header.hide();\n        }\n      }\n    }).\n    always(function () {\n      if (tabContainer.data(\"ui-tabs\")) {\n        tabContainer.tabs(\"option\", \"active\", activeTab);\n      }\n    });\n\n  },\n\n  afterToRefresh: function afterToRefresh() {\n    this._super();\n    $(this.parent.container).tabs(\"refresh\");\n  } });","/*\r\n*   Name: Bizagi Desktop Horizontal Container Extension\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will redefine the horizontal container class to adjust to desktop devices\r\n*/\n\n// Extends from container desktop base\nbizagi.rendering.desktop.container.extend(\"bizagi.rendering.desktop.horizontal\", bizagi.rendering.horizontal.prototype);\n// Auto extend\nbizagi.rendering.desktop.horizontal.extend(\"bizagi.rendering.desktop.horizontal\", {}, {\n\n  /* \r\n                                                                                        *   Template method to implement in each device to customize each container after processed\r\n                                                                                        */\n  postRenderContainer: function postRenderContainer(container) {\n    var self = this;\n    var children = self.children;\n    var iCount = children.length;\n\n    // Call base\n    self._super(container);\n\n    // Process each child\n    $.each(children, function (i, child) {\n      // Process width\n      var renderWidth = child.properties.width;\n      if (renderWidth == null || renderWidth.length == 0) {\n        // Set default size\n        renderWidth = 100 / iCount;\n      } else {\n        // Set custom size\n        renderWidth = bizagi.util.percent2Number(renderWidth);\n      }\n\n      (function (j, innerChild, jCount) {\n        $.when(innerChild.ready()).done(function () {\n          var renderedElement = innerChild.getRenderedElement();\n          // Set width\n          if (j != jCount - 1) {\n            renderedElement.css({ width: renderWidth + \"%\" });\n          } else {\n            renderedElement.css({ width: renderWidth + \"%\" });\n          }\n\n          renderedElement.addClass('ui-panel-area');\n\n          // Set class for last render\n          if (j == jCount - 1) {\n            renderedElement.addClass(\"ui-bizagi-render-last\");\n          }\n        });\n      })(i, child, iCount);\n    });\n  } });","/**\r\n *   Name: Bizagi Desktop Layout Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the layout class to adjust to desktop devices\r\n */\n\n// Extends from container desktop base\nbizagi.rendering.desktop.container.extend(\"bizagi.rendering.desktop.layout\", bizagi.rendering.layout.prototype);\n// Extends itself\nbizagi.rendering.desktop.layout.extend(\"bizagi.rendering.desktop.layout\", {}, {});","/*\r\n*   Name: Bizagi Desktop Accordion Container Extension\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will redefine the accordion class to adjust to desktop devices\r\n*/\n\n// Extends from container desktop base\nbizagi.rendering.desktop.container.extend(\"bizagi.rendering.desktop.accordion\", bizagi.rendering.accordion.prototype);\n// Extends itself\nbizagi.rendering.desktop.accordion.extend(\"bizagi.rendering.desktop.accordion\", {}, {\n\n  /* \r\n                                                                                      *   Template method to implement in each device to customize each container after processed\r\n                                                                                      */\n  postRenderContainer: function postRenderContainer(accordion) {\n    var self = this;\n\n    // Call base\n    self._super(accordion);\n\n    // Apply accordion widget\n    // Enable accordeon\n    accordion.accordion({\n      autoHeight: false });\n\n  },\n\n  /*\r\n     *   Template method to implement in each device to customize the container's behaviour to show layout\r\n     */\n  configureLayoutView: function configureLayoutView() {\n    // Do nothing\n  } });","/*\r\n*   Name: Bizagi Desktop AccordionItem Extension\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will redefine the accordion item class to adjust to desktop devices\r\n*/\n\n// Extends from container desktop base\nbizagi.rendering.desktop.container.extend(\"bizagi.rendering.desktop.accordionItem\", bizagi.rendering.accordionItem.prototype);\n// Extends itself\nbizagi.rendering.desktop.accordionItem.extend(\"bizagi.rendering.desktop.accordionItem\", {}, {\n\n  /* \r\n                                                                                              *   Change selected item \r\n                                                                                              */\n  setAsActiveContainer: function setAsActiveContainer(argument) {\n    var self = this;\n\n    $.when(self.ready()).\n    done(function () {\n      var accordionContainer = self.parent;\n\n      // Changes item\n      accordionContainer.container.accordion(\"option\", \"active\", self.properties.ordinal);\n    });\n  },\n\n  /* \r\n     *   Focus on container\r\n     */\n  focus: function focus() {\n    var self = this;\n\n    self.activate();\n    self.setAsActiveContainer();\n\n    // Call base\n    this._super();\n  } });","/*\r\n*   Name: Bizagi Desktop Group Extension\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will redefine the group class to adjust to desktop devices\r\n*/\n\n// Extends from container desktop base\nbizagi.rendering.desktop.container.extend(\"bizagi.rendering.desktop.group\", bizagi.rendering.group.prototype);\n// Auto extend\nbizagi.rendering.desktop.group.extend(\"bizagi.rendering.desktop.group\", {}, {\n\n  /**\r\n                                                                               * Template method to implement in each device to customize each container after processed\r\n                                                                               * @param {} group \r\n                                                                               * @returns {} \r\n                                                                               */\n  postRenderContainer: function postRenderContainer(group) {\n    var self = this;\n    var properties = self.properties;\n    var styleSufix = properties.orientation == \"rtl\" ? \"-rtl\" : \"\";\n\n    // Call base\n    self._super(group);\n\n    var icon = $(\".ui-icon\", $(\".ui-bizagi-container-group-header:first\", self.container));\n    var header = $(\".ui-bizagi-container-group-header\", self.container);\n\n    // Define expanded property\n    if (bizagi.util.parseBoolean(properties.collapse)) {\n      properties.expanded = false;\n      icon.addClass(\"ui-state-collapse\" + styleSufix).removeClass(\"ui-state-expand\" + styleSufix);\n    } else {\n      properties.expanded = true;\n      icon.addClass(\"ui-state-expand\" + styleSufix).removeClass(\"ui-state-collapse\" + styleSufix);\n    }\n  },\n\n  /**\r\n      * Template method to implement in each device to customize the container's behaviour to add handlers\r\n      * @returns {} \r\n      */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    var properties = self.properties;\n    var styleSufix = properties.orientation == \"rtl\" ? \"-rtl\" : \"\";\n    var group = self.container;\n    var icon;\n\n    // Delegate event click\n    var header = $(\".ui-bizagi-container-group-header:first\", group);\n    $(header).click(function (e) {\n      if (e.preventDefault)\n      e.preventDefault();\n\n      icon = $(\".ui-icon\", group);\n      icon.toggleClass(\"ui-icon-triangle-1-s ui-icon-triangle-1-n\");\n\n      $(\".ui-bizagi-container-group-wrapper:first\", group).toggle();\n\n      if (properties.expanded) {\n        properties.expanded = false;\n        icon.addClass(\"ui-state-collapse\" + styleSufix).removeClass(\"ui-state-expand\" + styleSufix);\n        $(this).addClass(\"group-collapse\").removeClass(\"group-expand\");\n      } else {\n        properties.expanded = true;\n        icon.addClass(\"ui-state-expand\" + styleSufix).removeClass(\"ui-state-collapse\" + styleSufix);\n        $(this).addClass(\"group-expand\").removeClass(\"group-collapse\");\n      }\n    });\n  },\n\n  /**\r\n     * Check if group its open\r\n     * \r\n     * @return boolean\r\n     */\n  isOpen: function isOpen() {\n    if (this.properties.expanded) {\n      return true;\n    } else {\n      return false;\n    }\n  },\n\n  /**\r\n      * Focus on container     \r\n      * @returns {} \r\n      */\n  focus: function focus() {\n    // Expand container\n    this.expand();\n\n    // Call base\n    this._super();\n  },\n\n  /**\r\n      * Expands group container \r\n      * @returns {} \r\n      */\n  expand: function expand() {\n    var self = this;\n    var group = self.container;\n    var header = $(\".ui-bizagi-container-group-header:first\", group);\n\n    if (!self.isOpen())\n    $(header).trigger(\"click\");\n  },\n\n  /**\r\n      * Collapses group container \r\n      * @returns {} \r\n      */\n  collapse: function collapse() {\n    var self = this;\n    var group = self.container;\n    var header = $(\".ui-bizagi-container-group-header:first\", group);\n\n    if (self.isOpen())\n    $(header).trigger(\"click\");\n  },\n\n  /**     \r\n      * Expands or collapse the container \r\n      * @param {} argument      \r\n      */\n  toogleContainer: function toogleContainer(argument) {\n    var self = this;\n\n    if (argument) {\n      self.expand();\n    } else {\n      self.collapse();\n    }\n  } });","/*\r\n *   Name: Bizagi Desktop Section Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the section class to adjust to desktop devices\r\n */\n\n// Extends from container desktop base\nbizagi.rendering.desktop.container.extend(\"bizagi.rendering.desktop.section\", bizagi.rendering.section.prototype);\n// Auto extend\nbizagi.rendering.desktop.section.extend(\"bizagi.rendering.desktop.section\", {}, {\n\n\n  /**\r\n                                                                                   * Render the trigger of the section.\r\n                                                                                   * @returns string with html code.\r\n                                                                                   */\n  renderContainer: function renderContainer() {\n    var self = this;\n    var properties = this.properties;\n    var template = this.renderFactory.getTemplate(\"section-header\");\n\n    // Render the section trigger\n    var html = $.fasttmpl(template, {\n      displayName: properties.displayName,\n      editable: properties.editable,\n      orientation: self.getOrientation(),\n      uniqueId: properties.uniqueId,\n      isDesign: self.getMode() !== \"execution\",\n      messageValidation: properties.messageValidation,\n      guid: properties.guid,\n      displayAs: properties.displayAs });\n\n    this.sectionContent = $(this.renderSectionContent())[0];\n    return html;\n  },\n\n  /**\r\n      * Render the content of the section.\r\n      * @returns string with html code. \r\n      */\n  renderSectionContent: function renderSectionContent() {\n    var self = this;\n    var template = this.renderFactory.getTemplate(\"section-content\");\n    var properties = this.properties;\n    var breadCrumb = this.getBreadcrumb();\n    this.orderSection = breadCrumb.length - 1;\n    var html = $.fasttmpl(template, {\n      displayName: properties.displayName,\n      editable: properties.editable,\n      orientation: self.getOrientation(),\n      uniqueId: properties.uniqueId,\n      isDesign: self.getMode() !== \"execution\",\n      messageValidation: properties.messageValidation,\n      guid: properties.guid,\n      breadCrumb: breadCrumb });\n\n\n    html = this.replaceChildrenHtml(html, this.renderChildrenHtml());\n    return html;\n  },\n\n  /**\r\n      * Template method to implement in each device to customize each container after processed\r\n      * @param {} section \r\n      * @returns {} \r\n      */\n  postRenderContainer: function postRenderContainer(section) {\n    section.closest(\".ui-bizagi-container-form-wrapper-animation\").append(this.sectionContent);\n    // Call base\n    this._super(section);\n    if (this.isActive()) this.openAutomatically();\n  },\n\n  /**\r\n      * Template method to implement in each device to customize the container's behaviour to add handlers\r\n      */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    var container = self.container[0];\n    var form = self.getFormContainer();\n    var printVersion = form.params && form.params.printversion;\n\n    var header = container.querySelector(\".ui-bizagi-container-section-header\");\n    var breadCrumb = this.sectionContent.querySelector(\".ui-bizagi-container-section-breadcrumb\");\n    var breadCrumbElements = breadCrumb.querySelectorAll(\".ui-bizagi-container-section-breadcrumb-element\");\n\n    this.openSectionFromClick = this.openSectionFromClick.bind(this);\n    if (!printVersion) {\n      header.addEventListener(\"click\", this.openSectionFromClick);\n      Array.prototype.forEach.call(breadCrumbElements, function (element) {\n        var stepsBack = parseInt(element.getAttribute('data-steps-back'));\n        if (stepsBack !== 0)\n        element.addEventListener('click', function () {\n          self.goBack(stepsBack);\n        });\n      });\n    } else {\n      header.classList.add(\"ui-bizagi-section-print\");\n    }\n  },\n\n  /**\r\n      * Execute the post render method for section's children\r\n      * @param {*} container \r\n      */\n  executeChildrenPostRender: function executeChildrenPostRender(container) {\n    var self = this;\n    var childrenElements = $(\".ui-bizagi-container-section-children\", this.sectionContent).children();\n\n    $.each(childrenElements, function (i, childElement) {\n      childElement = $(childElement);\n      var id = Number(childElement.data(\"unique-id\"));\n      if (id) {\n        var child = self.childrenHash[id];\n        if (child) {\n          var type = child.getElementType();\n          if (type == bizagi.rendering.element.ELEMENT_TYPE_RENDER)\n          child.postRenderElement(childElement);\n          if (type == bizagi.rendering.element.ELEMENT_TYPE_CONTAINER)\n          child.postRenderContainer(childElement);\n        }\n      } else {\n        self.executeChildrenPostRender(childElement);\n      }\n    });\n  },\n\n  /**\r\n      * Open section from a manual click\r\n      * @param ev - ClickEvent object\r\n      */\n  openSectionFromClick: function openSectionFromClick(ev) {\n    var self = this;\n    var container = self.container[0];\n    var containerAnimation = this.sectionContent.parentElement;\n    var headerSection = container.querySelector(\".ui-bizagi-container-section-header\");\n    headerSection.removeEventListener(\"click\", this.openSectionFromClick);\n    if (!bizagi.util.isIE() && this.getFormOrientation() !== \"rtl\") containerAnimation.scrollIntoView({ behavior: \"smooth\", block: \"start\" });\n    this.openSection().then(function () {\n      headerSection.addEventListener(\"click\", self.openSectionFromClick);\n    });\n    this.setAsActive();\n  },\n\n  /**\r\n      * Expand a section with animation\r\n      * @return promise when the section is expanded\r\n      */\n  openSection: function openSection() {\n    var defer = new $.Deferred();\n    var containerAnimation = this.sectionContent.parentElement;\n    var direction = this.getFormOrientation() === \"rtl\" ? 1 : -1;\n    var sectionParent = this.getSectionParent();\n    var sectionProperties = sectionParent && sectionParent.properties || {};\n    var sectionParams = sectionParent && sectionParent.params || {};\n    if (sectionProperties.type === \"form\" || sectionParams.type === \"form\") sectionParent = this.getFormParent(sectionParent);\n    containerAnimation.classList.remove('ui-bizagi-container-form-wrapper-animation-inactive');\n    containerAnimation.style.transform = 'translateX(' + 100 * this.orderSection * direction + '%)';\n    setTimeout(function () {\n      defer.resolve();\n    }, 600);\n\n    this.removeAnimationClasses(sectionParent.sectionContent);\n    sectionParent.sectionContent.classList.add('ui-bizagi-section-animation-fade-out');\n    this.restoreSectionsOutOfPath();\n    this.removeAnimationClasses(this.sectionContent);\n    this.sectionContent.classList.add('ui-bizagi-section-animation-fade-in');\n    this.sectionContent.style.order = this.orderSection;\n    this.sectionContent.style.msOrder = this.orderSection;\n    return defer.promise();\n  },\n\n  /**\r\n      * Expand a section without animation\r\n     */\n  openAutomatically: function openAutomatically() {\n    this.closeAllSections();\n\n    var sectionsToOpen = [];\n    var section = this;\n    var properties = section.properties || {};\n    var params = section.params || {};\n    var depth = this.orderSection;\n    while (properties.type !== \"form\" && params.type !== \"form\") {\n      sectionsToOpen.push(section);\n      section = section.getSectionParent();\n      properties = section.properties || {};\n      params = section.params || {};\n    }\n    this.translateWithoutAnimation(depth);\n    this.openFormWithoutAnimation();\n    for (var i = sectionsToOpen.length - 1; i >= 0; i--) {\n      sectionsToOpen[i].openSectionWithoutAnimation(i === 0);\n    }\n    this.setAsActive();\n  },\n\n  /**\r\n      * Translate the animation container without animation\r\n      * @param {*} depth - Depth of section to open\r\n      */\n  translateWithoutAnimation: function translateWithoutAnimation(depth) {\n    var containerAnimation = this.sectionContent.parentElement;\n    var direction = this.getFormOrientation() === \"rtl\" ? 1 : -1;\n    containerAnimation.classList.add('ui-bizagi-container-form-wrapper-animation-inactive');\n    containerAnimation.style.transform = 'translateX(' + 100 * depth * direction + '%)';\n  },\n\n  /**\r\n      * Open a specific section without animation\r\n      */\n  openSectionWithoutAnimation: function openSectionWithoutAnimation(lastElement) {\n    this.sectionContent.style.order = this.orderSection;\n    this.sectionContent.style.msOrder = this.orderSection;\n    this.removeAnimationClasses(this.sectionContent);\n    this.sectionContent.classList.add('ui-bizagi-section-without-animation');\n    this.sectionContent.classList.add(lastElement ? 'ui-bizagi-section-animation-fade-in' : 'ui-bizagi-section-animation-fade-out');\n  },\n\n  openFormWithoutAnimation: function openFormWithoutAnimation() {\n    var section = this.getFormParent();\n    section.sectionContent.style.order = section.orderSection;\n    section.sectionContent.style.msOrder = section.orderSection;\n    this.removeAnimationClasses(section.sectionContent);\n    section.sectionContent.classList.add('ui-bizagi-section-without-animation');\n    section.sectionContent.classList.add('ui-bizagi-section-animation-fade-out');\n  },\n\n  /**\r\n      * Close all sections \r\n      */\n  closeAllSections: function closeAllSections(treeIdentifier) {\n    var form = this.getFormContainer() || {};\n    var sections = form.rendersByType ? form.rendersByType[\"section\"] : [];\n    sections.forEach(function (section) {\n      section.removeAnimationClasses(section.sectionContent);\n      section.sectionContent.classList.add('ui-bizagi-container-section-initial-state');\n      section.sectionContent.style.order = 99999;\n      section.sectionContent.style.msOrder = 99999;\n    });\n  },\n\n  /**\r\n      * Restore a section and its descendants to initial state\r\n      */\n  restoreSectionsOutOfPath: function restoreSectionsOutOfPath() {\n    var ancestors = [];\n    var container = this.getSectionParent();\n    var properties = container.properties || {};\n    var params = container.params || {};\n    while (properties.type !== \"form\" && params.type !== \"form\") {\n      ancestors.push(properties.id);\n      container = container.getSectionParent();\n      properties = container.properties || {};\n      params = container.params || {};\n    }\n\n\n    var form = this.getFormContainer() || {};\n    var sections = form.rendersByType ? form.rendersByType[\"section\"] : [];\n    sections.forEach(function (section) {\n      if (!ancestors.includes(section.properties.id) && section.sectionContent) {\n        section.removeAnimationClasses(section.sectionContent);\n        section.sectionContent.classList.add('ui-bizagi-container-section-initial-state');\n        section.sectionContent.style.order = 99999;\n        section.sectionContent.style.msOrder = 99999;\n      }\n    });\n  },\n\n  /**\r\n      * Go back over the breadcrumb\r\n      * @param {*} steps - Steps to go back\r\n      */\n  goBackInPath: function goBackInPath(steps) {\n    var containerAnimation = this.sectionContent.parentElement;\n    var section = this;\n    var direction = this.getFormOrientation() === \"rtl\" ? 1 : -1;\n    containerAnimation.classList.remove('ui-bizagi-container-form-wrapper-animation-inactive');\n    for (var i = 0; i < steps; i++) {\n      this.removeAnimationClasses(section.sectionContent);\n      section.sectionContent.classList.add('ui-bizagi-section-animation-fade-in-out');\n      section = section.getSectionParent();\n      if (section.properties.type !== 'section') section = this.getFormParent();\n    }\n    this.removeAnimationClasses(section.sectionContent);\n    section.sectionContent.classList.add('ui-bizagi-section-animation-fade-in');\n    containerAnimation.style.transform = 'translateX(' + 100 * section.orderSection * direction + '%)';\n    return section;\n  },\n\n  /**\r\n      * Remove animation classes of a section\r\n      * @param {*} DOMElement - Section container \r\n      */\n  removeAnimationClasses: function removeAnimationClasses(DOMElement) {\n    var classList = [\n    'ui-bizagi-section-animation-fade-in',\n    'ui-bizagi-section-animation-fade-out',\n    'ui-bizagi-section-animation-fade-in-out',\n    'ui-bizagi-section-hide-in-background',\n    'ui-bizagi-container-section-initial-state',\n    'ui-bizagi-section-without-animation'];\n\n    classList.forEach(function (className) {\n      DOMElement.classList.remove(className);\n    });\n  },\n\n  getSectionParent: function getSectionParent() {\n    var section = this;\n    while (section.parent) {\n      section = section.parent;\n      var params = section.params || {};\n      var properties = section.properties || {};\n      if (properties.type === \"section\" || properties.type === \"form\" || params.type === \"form\") {\n        return section;\n      }\n    }\n    return this;\n  },\n\n  getFormParent: function getFormParent() {\n    var form = this.getFormContainer();\n    return {\n      sectionContent: $(\".ui-bizagi-main-section\", form.container)[0],\n      orderSection: 0,\n      setAsActive: function setAsActive() {\n        form.setParam(\"selectedSection\", undefined);\n      } };\n\n  },\n\n  /**\r\n      * Check if the section is currently active, even after a refresh\r\n      */\n  isActive: function isActive() {\n    var form = this.getFormContainer();\n    var params = form.getParams() || {};\n    return params.selectedSection === this.properties.id;\n  },\n\n  /**\r\n      * Mark the section as active, and mark its parent section as inactive\r\n      */\n  setAsActive: function setAsActive() {\n    var form = this.getFormContainer();\n    form.setParam(\"selectedSection\", this.properties.id);\n  },\n\n  /**\r\n      * Shift the form to the right until the required section is visible, \r\n      * and then transform the invisible sections so that they are not accessible\r\n      * @param {number} stepsBack - Levels to go back\r\n      */\n  goBack: function goBack(stepsBack) {\n    var section = this.goBackInPath(stepsBack);\n    section.setAsActive();\n  },\n\n  /**\r\n      * Get the orientation of the section. If the orientation if \"auto\", search recursively.\r\n      */\n  getOrientation: function getOrientation() {\n    var container = this;\n    while (container) {\n      properties = container.properties || {};\n      if (properties.orientation !== \"auto\") return properties.orientation;\n      container = container.parent;\n    }\n    return \"auto\";\n  },\n\n  /**\r\n      * get the orientation of the form, to know in which direction to animate the movement\r\n      */\n  getFormOrientation: function getFormOrientation() {\n    var form = this.getFormContainer() || {};\n    var properties = form.properties || {};\n    return (properties.orientation || \"auto\").toLowerCase();\n  } });","/**\r\n *   Name: Bizagi Desktop SearchForm Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the search form class to adjust to desktop devices\r\n */\n\n// Extends from container desktop form base\nbizagi.rendering.desktop.form.extend(\"bizagi.rendering.desktop.searchForm\", bizagi.rendering.searchForm.prototype);\n// Extends itself\nbizagi.rendering.desktop.searchForm.extend(\"bizagi.rendering.desktop.searchForm\", {}, {\n\n  /*\r\n                                                                                        *   Render the results of the query\r\n                                                                                        *   Resolved in each device\r\n                                                                                        */\n  renderResult: function renderResult() {\n    var self = this;\n    var properties = self.properties;\n\n    // Creates grid definition\n    var data = {};\n    data.properties = {\n      displayName: self.getResource(\"render-search-advanced-results-label\"),\n      type: 'grid',\n      xpath: 'searchForm' + properties.id,\n      id: properties.id,\n      skipInitialLoad: true,\n      rowsPerPage: 10,\n      inlineAdd: false,\n      allowDelete: false,\n      allowAdd: false,\n      hideActionsColumn: true,\n      floatingHeader: true,\n      sortBy: properties.sortBy,\n      sortOrder: properties.sortOrder,\n      overrideGetRemoteData: function overrideGetRemoteData(params) {\n        return self.getRemoteData(params);\n      } };\n\n\n    data.elements = [];\n\n    // Creates columns\n    var columns = properties.columns;\n    $.each(columns, function (i) {\n      var column = {\n        render: {} };\n\n      //TODO insert dataType and TextFormat properties\n      column.render.properties = {\n        displayName: columns[i].caption,\n        xpath: columns[i].xpath,\n        editable: false };\n\n      $.extend(column.render.properties, self.parseAdditionalProperties(columns[i].dataType));\n      // Next conditional added to print only columns and not labels\n      // if type = label then column is not rendered on the results table\n      if (columns[i].dataType == 0) {\n        column.render.properties.columnVisible = false;\n      }\n      //if column is number or monetary push allowDecimals property\n      if (columns[i].dataType == 7 || columns[i].dataType == 8) {\n        column.render.properties.allowDecimals = columns[i].allowDecimals;\n      }\n\n      //if column is real or float set allowDecimals property to true\n      if (columns[i].dataType == 10 || columns[i].dataType == 11) column.render.properties.allowDecimals = true;\n\n      //if column is date push showtime property\n      if (columns[i].dataType == 12) {\n        column.render.properties.showTime = columns[i].showTime;\n      }\n\n      data.elements.push(column);\n    });\n\n    var grid = self.renderFactory.getRender({\n      type: \"grid\",\n      data: data,\n      parent: self,\n      mode: self.getMode(),\n      jqgrid: false });\n\n\n    // Saves reference\n    self.resultsGrid = grid;\n\n    return grid.render();\n  },\n\n  /*\r\n     *   Template method to process each jquery object\r\n     *   must be overriden in each container\r\n     */\n  postRenderContainer: function postRenderContainer(container) {\n    var self = this;\n    var searchCriteria = container.find(\".ui-bizagi-container-search-criteria\");\n    var results = container.find(\".ui-bizagi-container-search-results\");\n    var childrenElements = searchCriteria.children();\n    var mode = self.getMode();\n\n    // Process children elements\n    self.container = container;\n    $.each(childrenElements, function (i, childElement) {\n      childElement = $(childElement);\n      var id = Number(childElement.data(\"unique-id\"));\n      if (id) {\n        var child = self.childrenHash[id];\n        if (child) {\n          var type = child.getElementType();\n          if (type == bizagi.rendering.element.ELEMENT_TYPE_RENDER) child.postRenderElement(childElement);\n          if (type == bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) child.postRenderContainer(childElement);\n        }\n      }\n    });\n\n    // Process result\n    var grid = $(results.children()[0]);\n    self.resultsGrid.postRenderElement(grid);\n\n    if (mode == \"execution\") {\n      // Apply handlers\n      self.configureHandlers();\n    }\n    if (mode == \"design\") {\n      // Configure view\n      self.configureDesignView();\n    }\n    if (mode == \"layout\") {\n      // Configure view\n      self.configureDesignView();\n      self.configureLayoutView();\n    }\n  },\n\n  /*\r\n     *   Template method to implement in each device to customize the container's behaviour to add handlers\r\n     */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n\n    // Saves reference\n    self.criteriaContainer = $(\".ui-bizagi-container-search-criteria\", self.container);\n    self.resultsContainer = $(\".ui-bizagi-container-search-results\", self.container);\n\n    // Bind to grid row select event\n    self.resultsGrid.bind(\"rowSelected\", function (e, ui) {\n      if (self.properties.searchParams.hasOwnProperty('multiSelect')) {\n        self.trigger(\"multiSelect\", ui);\n      } else {\n        // Trigger event to bubble up to main container\n        self.trigger(\"instanceSelected\", ui);\n      }\n    });\n\n    return self;\n  },\n\n  /*\r\n     *   Refresh the result panel, making it to query data with current criteria\r\n     */\n  refreshResults: function refreshResults() {\n    var self = this;\n    var resultsGrid = self.resultsGrid;\n\n    // Makes the grid to refresh\n    resultsGrid.refresh();\n    $.when(resultsGrid.dataReady()).\n    done(function () {\n\n      // Shows result container\n      self.resultsContainer.show();\n\n      self.resizeResults();\n    });\n  },\n\n  /* \r\n     *   Resizes the container to adjust it to the container\r\n     */\n  resize: function resize() {\n    var self = this;\n    // Resize results\n    self.resizeResults();\n  },\n\n  /* \r\n     Resizes the container to split the view\r\n     */\n  resizeResults: function resizeResults() {\n    var self = this;\n    var resultsGrid = self.resultsGrid;\n\n    if (self.resultsContainer.is(':visible')) {\n      self.criteriaContainer.height(\"auto\");\n\n    } else {\n      self.criteriaContainer.height(\"100%\");\n    }\n\n    // Resize grid results\n    resultsGrid.resize({\n      width: self.criteriaContainer.width(),\n      onSearchFinished: function onSearchFinished() {\n        var self = this;\n        if (self.properties)\n        if (self.properties.records == 0) {\n          $(\".ui-bizagi-container-search-results\", self.container).show();\n          $(\".ui-bizagi-container-search-results .ui-jqgrid-title\", self.container).hide();\n        } else {\n          $(\".ui-bizagi-container-search-results .ui-jqgrid-title\", self.container).show();\n        }\n      } });\n\n  } });","/**\r\n *   Name: Bizagi Desktop Render Text Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the text render class to adjust to desktop devices\r\n */\n\n// Extends from render desktop base\nbizagi.rendering.desktop.render.extend(\"bizagi.rendering.desktop.text\", bizagi.rendering.text.prototype);\n// Extends itself\nbizagi.rendering.desktop.text.extend(\"bizagi.rendering.desktop.text\", {}, {\n\n  /**\r\n                                                                             *   Template method to implement in each device to customize each render after processed\r\n                                                                             */\n  postRender: function postRender() {\n    // Call base\n    this._super();\n\n    // Define max length of element\n    if (this.properties.maxLength > 0)\n    this.input.attr(\"maxlength\", this.properties.maxLength);\n  },\n\n  /**\r\n      *   Sets the value in the rendered control\r\n      * @param {} value\r\n      * @returns {}\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n    var decodedValue = bizagi.util.decodeURI(value);\n\n    value = this.validateValue(decodedValue, self.properties.maxLength);\n\n    // Call base\n    self.setValue(value);\n    this._super(value);\n\n    // Set value in input\n    if (!bizagi.util.isEmpty(value) && this.properties.editable) {\n      this.input && this.input.val(value);\n    } else {\n      if (value === null && this.properties.editable) {\n        this.input && this.input.val(\"\");\n      }\n    }\n  },\n\n  attachRetypeDouble: function attachRetypeDouble() {\n    var self = this;\n    var element = self.element;\n\n    var input = $(\"input\", element);\n    if (!input || input.length == 0) return;\n\n    // Apply blur handler to check value\n    input.blur(function () {\n      var control = $(this);\n      self.retypeDouble(control);\n    });\n  },\n\n  changeRequired: function changeRequired(argument) {\n    this.properties.required = argument;\n    this.changeRequiredLabel(argument);\n  },\n\n  changeRequiredLabel: function changeRequiredLabel(argument) {\n    var control = this.getControl();\n    control.tooltip({ disabled: true });\n\n    if (control.length > 0) {\n      if (this.getMode() !== \"execution\") {\n        if (bizagi.util.parseBoolean(argument) == true && this.properties.editable) {\n          control.addClass(\"control-required\");\n        } else {\n          control.removeClass(\"control-required\");\n        }\n      } else {\n        if (bizagi.util.parseBoolean(argument) == true && !this.hasValue() && this.properties.editable) {\n          control.addClass(\"control-required\");\n        } else {\n          control.removeClass(\"control-required\");\n        }\n      }\n    }\n\n    this.triggerRenderValidate();\n  },\n\n  changeCellRequired: function changeCellRequired(argument) {\n    this.changeRequired(argument);\n  },\n\n  retypeDouble: function retypeDouble(control) {\n    var self = this;\n    var currentValue = control.val();\n    var isVisible = $(control).attr(\"type\") !== \"hidden\" && $(control).css(\"display\") !== \"none\" && $(control).css(\"visibility\") !== \"hidden\";\n\n    if (isVisible && $(this).data(\"newValue\") == undefined) {\n\n      if (!control.data(\"oldValue\") || $(this).data(\"oldValue\") === \"\") {\n        // Check that there is something in the value or if a value has already been set\n        if (currentValue === \"\" || currentValue === control.data(\"newValue\")) return;\n\n        self.createTooltip(control, currentValue, self.getResource(\"render-number-retype\"));\n      } else {\n        // Check that there is something in the value\n        if (currentValue === \"\") return;\n\n        if (currentValue != control.data(\"oldValue\")) {\n          self.setValue(\"\");\n\n          self.createTooltip(control, \"\", self.getResource(\"render-text-retype-error\"));\n        } else {\n          control.data(\"newValue\", currentValue);\n          control.data(\"oldValue\", \"\");\n\n          // Destroy tooltips\n          control.tooltip(\"destroy\");\n        }\n      }\n    }\n  },\n\n  collectData: function collectData(renderValues) {\n    var self = this;\n\n    // Add the render value\n    var xpath = self.properties.xpath;\n\n    // replace strange character\n    var value = self.getValue();\n\n    if (value != null && typeof value !== \"undefined\" && typeof value !== \"number\") {\n      value = value.replaceAll(String.fromCharCode(\"030\"), '');\n      value = value.replaceAll(String.fromCharCode(\"018\"), '');\n      value = value.replaceAll(String.fromCharCode(\"016\"), '');\n    }\n\n    if (self.controlValueIsChanged()) {\n      // Filter by valid xpaths and valid values\n      if (!bizagi.util.isEmpty(xpath)) {\n        if (!bizagi.util.isEmpty(value)) {\n          renderValues[xpath] = value;\n        } else if (value === \"\") {\n          renderValues[xpath] = \"\";\n        }\n      }\n    }\n\n    //Validate if the input has a retype configured and check that both values matches, otherwise delete the original value\n    if (!self.validateInputRetype()) {\n      renderValues[self.properties.xpath] = \"\";\n    }\n  },\n\n  /**\r\n      * Customizes the font underline\r\n      * It does not apply when we use the render.base component\r\n      * @param underline\r\n      * @param isLabelFormat\r\n      */\n  changeFontUnderline: function changeFontUnderline(underline, isLabelFormat) {\n    var self = this;\n    var textFormat = self.properties.textFormat || {};\n    var valueFormat = self.properties.valueFormat || {};\n\n    var labelStrikethrough = bizagi.util.parseBoolean(textFormat.strikethru) ? \"line-through \" : \"\";\n    var valueStrikethrough = bizagi.util.parseBoolean(valueFormat.strikethru) ? \"line-through \" : \"\";\n    var formatUnderline = bizagi.util.parseBoolean(underline) ? \"underline\" : \"\";\n\n    var isLabelToFormat = typeof isLabelFormat != \"undefined\" || isLabelFormat != null ? isLabelFormat : true;\n    var $formatElements = isLabelToFormat ? self.getFormattingLabel() : self.getElementsToStylized(self.getControl());\n    var formatStrikeThrough = isLabelToFormat ? labelStrikethrough : valueStrikethrough;\n\n    self.changeTextDecoration($formatElements, formatStrikeThrough + formatUnderline);\n  },\n\n  /**\r\n      * Customizes the font Strikethrough property\r\n      * It does not apply when we use the render.base component\r\n      * @param strikeThrough\r\n      * @param isLabelFormat\r\n      */\n  changeFontStrikethru: function changeFontStrikethru(strikeThrough, isLabelFormat) {\n    var self = this;\n    var textFormat = self.properties.textFormat || {};\n    var valueFormat = self.properties.valueFormat || {};\n\n    var labelUnderline = bizagi.util.parseBoolean(textFormat.underline) ? \"underline \" : \"\";\n    var valueUnderline = bizagi.util.parseBoolean(valueFormat.underline) ? \"underline \" : \"\";\n    var formatStrikeThrough = bizagi.util.parseBoolean(strikeThrough) ? \"line-through\" : \"\";\n\n    var isLabelToFormat = typeof isLabelFormat != \"undefined\" || isLabelFormat != null ? isLabelFormat : true;\n    var $formatElements = isLabelToFormat ? self.getFormattingLabel() : self.getElementsToStylized(self.getControl());\n\n    var formatUnderline = isLabelToFormat ? labelUnderline : valueUnderline;\n\n    self.changeTextDecoration($formatElements, formatUnderline + formatStrikeThrough);\n  },\n\n  /**\r\n      * Context to apply styles\r\n      * @param context\r\n      * @returns {jQuery|HTMLElement}\r\n      */\n  getElementsToStylized: function getElementsToStylized(context) {\n    return $(\"input.ui-bizagi-render-text, label.readonly-control\", context);\n  },\n\n  /**\r\n      * Customizes the font Strikethrough or underline property\r\n      * @param {} $element\r\n      * @param {} textDecoration\r\n      * @returns {}\r\n      */\n  changeTextDecoration: function changeTextDecoration($element, textDecoration) {\n    if (textDecoration === undefined) return this;\n    if ($element === undefined) return this;\n\n    textDecoration && $element.css(\"text-decoration\", textDecoration);\n\n    return this;\n  } });","/**\r\n *   Name: Bizagi Desktop Render Readonly Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the readonly render class to adjust to desktop devices\r\n */\n\n// Extends from render Desktop base\nbizagi.rendering.desktop.render.extend(\"bizagi.rendering.desktop.readonly\", bizagi.rendering.render.base.prototype);\n// Extends from render Desktop base\nbizagi.rendering.desktop.readonly.extend(\"bizagi.rendering.desktop.readonly\", bizagi.rendering.readonly.prototype);\n// Extends itself\nbizagi.rendering.desktop.readonly.extend(\"bizagi.rendering.desktop.readonly\", {}, {\n\n  /**\r\n                                                                                     * Returns the html templated element\r\n                                                                                     * @returns {*}\r\n                                                                                     */\n  renderElement: function renderElement() {\n    return this._super(\"render-base\");\n  },\n\n  /**\r\n      * Template method to get the label element\r\n      * @returns {jQuery|HTMLElement}\r\n      */\n  getLabel: function getLabel() {\n    return $(\"label\", this._super());\n  } });","/*\r\n *   Name: Bizagi Desktop Render Text Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the text render class to adjust to desktop devices\r\n */\n\n// Extends from render desktop base\nbizagi.rendering.desktop.render.extend(\"bizagi.rendering.desktop.extendedText\", bizagi.rendering.extendedText.prototype);\n// Extends itself\nbizagi.rendering.desktop.extendedText.extend(\"bizagi.rendering.desktop.extendedText\", {\n\n  //#region Side effects functions\n\n  /**\r\n   * Is triggered after the control exists in the DOM\r\n   */\n  postRender: function postRender() {\n    this._super();\n\n    if (bizagi.util.isIE8()) {\n      this.textarea.attr(\"cols\", \"5000\");\n    }\n  },\n\n  /**\r\n      * Is triggered after the control exists in the DOM when it's readonly\r\n      */\n  postRenderReadOnly: function postRenderReadOnly() {\n    this._super();\n    $(this.getControl()).addClass(\"ui-bizagi-text-extended-readonly\");\n  },\n\n  /**\r\n      *   Template method to implement in each device to customize the render's behaviour to add handlers\r\n      */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    var properties = self.properties;\n\n    // Call base\n    self._super();\n\n    // Define max length of element\n    if (properties.maxLength > 0) {\n\n      self.textarea.attr(\"maxlength\", properties.maxLength);\n      self.actualMaxLength = properties.maxLength;\n\n    }\n\n    self.ready().done(function () {\n      // auto extend\n      if (properties.autoExtend) {\n        var minHeight = self.textarea.css(\"height\");\n        var valMinHeight;\n\n        if (properties.maxLines === undefined) {\n          if (typeof minHeight == \"string\" && minHeight.search(\"px\") !== -1) {\n            valMinHeight = Number(minHeight.split(\"px\")[0]);\n\n            if (valMinHeight <= 150)\n            minHeight = \"150px\";\n          } else {\n            minHeight = \"150px\";\n          }\n        }\n\n        // set textarea styles\n        self.textarea.css({ overflow: \"hidden\", resize: \"none\", minHeight: minHeight });\n\n        var timeoutAutoExtended = setTimeout(function () {\n          self.changeHeightAutoExtended(self.textarea[0]);\n          clearTimeout(timeoutAutoExtended);\n        }, 100);\n\n        self.textarea.bind(\"keyup\", function () {\n          self.changeHeightAutoExtended(this);\n        });\n      }\n    });\n  },\n\n  /**\r\n      *   Sets the value in the rendered control\r\n      * @param {} value\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n    var control = self.getControl();\n    value = this.validateValue(typeof value == \"string\" ? value : \"\", self.properties.maxLength);\n\n    // Call base\n    self.setValue(value);\n\n    // Set value in input\n    var resolvedValue = $.br2nl(value);\n    if (self.textarea) self.textarea.val(resolvedValue);\n\n    if (!bizagi.util.parseBoolean(self.properties.editable)) {\n      // Render as simple value\n      if (typeof value === \"string\") {\n        // Replace line breaks for html line breaks\n        var valueToDisplay = bizagi.util.encodeHtmlText(self.getDisplayValue());\n\n        control.html(\"<label class='readonly-control'>\" + valueToDisplay + \"</label>\");\n      } else {\n        if (bizagi.util.isNull(value)) {\n          control.html(\"\");\n        }\n      }\n    }\n  },\n\n  /**\r\n      * Gets control's value\r\n      * @param {} renderValues\r\n      */\n  collectData: function collectData(renderValues) {\n    var self = this;\n    var properties = self.properties;\n\n    // Add the render value\n    var xpath = properties.xpath;\n\n    // replace strange character\n    var value = self.getValue();\n\n    if (self.getValue() != null && typeof self.getValue() != \"undefined\") {\n      value = self.getValue().replaceAll(String.fromCharCode(\"030\"), '');\n      value = self.getValue().replaceAll(String.fromCharCode(\"018\"), '');\n      value = self.getValue().replaceAll(String.fromCharCode(\"016\"), '');\n    }\n\n    if ($.controlValueIsChanged(self)) {\n      // Filter by valid xpaths and valid values\n      if (!bizagi.util.isEmpty(xpath)) {\n        if (!bizagi.util.isEmpty(value)) {\n          renderValues[xpath] = value;\n        } else if (value === \"\") {\n          renderValues[xpath] = \"\";\n        }\n      }\n    }\n\n    // Validate if the input has a retype configured and check that both values matches,\n    // otherwise delete the original value\n    if (!self.validateInputRetype()) {\n      renderValues[properties.xpath] = \"\";\n    }\n  },\n\n  /**\r\n      * Cleans current value\r\n      */\n  cleanData: function cleanData() {\n    this.setValue(\"\");\n    this.setDisplayValue(this.getValue());\n\n    // Reset height\n    if (this.textarea) {\n      this.textarea[0].style.removeProperty(\"height\");\n    }\n  },\n\n  /**\r\n      * function virtual implements on children (desktop,smartphone...)\r\n      */\n  attachRetypeDouble: function attachRetypeDouble() {\n    var self = this;\n    var element = self.element;\n\n    var input = $(\"input, textarea\", element);\n    if (!input || input.length == 0) return;\n\n    // Apply blur handler to check value\n    input.blur(function () {\n      var control = $(this);\n      var previousValue = self.previousValue;\n      var value = self.value;\n\n      if (previousValue != null && value != previousValue) {\n        if ($(this).data(\"newValue\") != undefined && control.val() != $(this).data(\"newValue\"))\n        $(this).data().newValue = undefined;\n      }\n\n      self.retypeDouble(control);\n    });\n  },\n\n  /**\r\n      * Changes required status\r\n      * @param {} argument\r\n      */\n  changeRequired: function changeRequired(argument) {\n    this.properties.required = argument;\n    this.changeRequiredLabel(argument);\n  },\n\n  /**\r\n      * Changes label's required status\r\n      * @param {} argument\r\n      */\n  changeRequiredLabel: function changeRequiredLabel(argument) {\n    var control = this.getControl();\n\n    if (control.length > 0) {\n      if (this.getMode() !== \"execution\") {\n        if (bizagi.util.parseBoolean(argument) == true && this.properties.editable) {\n          control.addClass('control-required');\n        } else {\n          control.removeClass('control-required');\n        }\n      } else {\n        if (bizagi.util.parseBoolean(argument) == true && !this.hasValue() && this.properties.editable) {\n          control.addClass('control-required');\n        } else {\n          control.removeClass('control-required');\n        }\n      }\n    }\n\n    this.triggerRenderValidate();\n  },\n\n  /**\r\n      * Changes cell's required status\r\n      * @param {} argument\r\n      */\n  changeCellRequired: function changeCellRequired(argument) {\n    this.changeRequired(argument);\n  },\n\n  /**\r\n      * Validates the double value from retype\r\n      * @param {jQuery Object} control jQuery Object\r\n      */\n  retypeDouble: function retypeDouble(control) {\n    var self = this;\n    var currentValue = control.val();\n    var isVisible = $(control).attr(\"type\") != \"hidden\" && $(control).css(\"display\") != \"none\" && $(control).css(\"visibility\") != \"hidden\";\n\n    if (isVisible && $(this).data(\"newValue\") == undefined) {\n\n      if (!control.data(\"oldValue\") || $(this).data(\"oldValue\") == \"\") {\n        // Check that there is something in the value or if a value has already been set\n        if (currentValue == \"\" || currentValue == control.data(\"newValue\")) return;\n\n        self.createTooltip(control, currentValue, self.getResource(\"render-number-retype\"));\n      } else {\n        // Check that there is something in the value\n        if (currentValue == \"\") return;\n\n        if (currentValue != control.data(\"oldValue\")) {\n          self.setValue(\"\");\n          self.createTooltip(control, \"\", self.getResource(\"render-text-retype-fail\"));\n        } else {\n          control.data(\"newValue\", currentValue);\n          control.data(\"oldValue\", \"\");\n          // Destroy tooltips\n          control.tooltip(\"destroy\");\n        }\n      }\n    }\n  },\n\n  /**\r\n      * Changes control's height when it's auto extended\r\n      * @param {Object} control HTML Object\r\n      */\n  changeHeightAutoExtended: function changeHeightAutoExtended(control) {\n    if (control.scrollHeight < this.properties.maxLines * 20) {\n      control.style.height = this.properties.maxLines * 20;\n    } else {\n      control.style.height = control.scrollHeight + \"px\";\n    }\n  },\n\n  /**\r\n     * Customizes the font underline\r\n     * It does not apply when we use the render.base component\r\n     * @param underline\r\n     * @param isLabelFormat\r\n     */\n  changeFontUnderline: function changeFontUnderline(underline, isLabelFormat) {\n    var self = this;\n    var textFormat = self.properties.textFormat || {};\n    var valueFormat = self.properties.valueFormat || {};\n\n    var labelStrikethrough = bizagi.util.parseBoolean(textFormat.strikethru) ? \"line-through \" : \"\";\n    var valueStrikethrough = bizagi.util.parseBoolean(valueFormat.strikethru) ? \"line-through \" : \"\";\n    var formatUnderline = bizagi.util.parseBoolean(underline) ? \"underline\" : \"\";\n\n    var isLabelToFormat = typeof isLabelFormat != \"undefined\" || isLabelFormat != null ? isLabelFormat : true;\n    var $formatElements = isLabelToFormat ? self.getFormattingLabel() : self.getElementsToStylized(self.getControl());\n    var formatStrikeThrough = isLabelToFormat ? labelStrikethrough : valueStrikethrough;\n\n    self.changeTextDecoration($formatElements, formatStrikeThrough + formatUnderline);\n  },\n\n  /**\r\n      * Customizes the font Strikethrough property\r\n      * It does not apply when we use the render.base component\r\n      * @param strikeThrough\r\n      * @param isLabelFormat\r\n      */\n  changeFontStrikethru: function changeFontStrikethru(strikeThrough, isLabelFormat) {\n    var self = this;\n    var textFormat = self.properties.textFormat || {};\n    var valueFormat = self.properties.valueFormat || {};\n\n    var labelUnderline = bizagi.util.parseBoolean(textFormat.underline) ? \"underline \" : \"\";\n    var valueUnderline = bizagi.util.parseBoolean(valueFormat.underline) ? \"underline \" : \"\";\n    var formatStrikeThrough = bizagi.util.parseBoolean(strikeThrough) ? \"line-through\" : \"\";\n\n    var isLabelToFormat = typeof isLabelFormat != \"undefined\" || isLabelFormat != null ? isLabelFormat : true;\n    var $formatElements = isLabelToFormat ? self.getFormattingLabel() : self.getElementsToStylized(self.getControl());\n\n    var formatUnderline = isLabelToFormat ? labelUnderline : valueUnderline;\n\n    self.changeTextDecoration($formatElements, formatUnderline + formatStrikeThrough);\n  },\n\n  /**\r\n      * Context to apply styles\r\n      * @param context\r\n      * @returns {jQuery|HTMLElement}\r\n      */\n  getElementsToStylized: function getElementsToStylized(context) {\n    return $(\"input.ui-bizagi-render-text, label.readonly-control\", context);\n  },\n\n  /**\r\n      * Customizes the font Strikethrough or underline property\r\n      * @param {} $element\r\n      * @param {} textDecoration\r\n      * @returns {}\r\n      */\n  changeTextDecoration: function changeTextDecoration($element, textDecoration) {\n    if (textDecoration === undefined) return this;\n    if ($element === undefined) return this;\n\n    textDecoration && $element.css(\"text-decoration\", textDecoration);\n\n    return this;\n  }\n  //#endregion Side effects functions\n});","/*\r\n*   Name: Bizagi Desktop Render Label Extension\r\n*   Author: UI Forms Team\r\n*   Comments:\r\n*   -   This script will redefine the label render class to adjust to desktop devices\r\n*/\n\n// Extends from render Desktop base\nbizagi.rendering.desktop.render.extend(\"bizagi.rendering.desktop.label\", bizagi.rendering.label.prototype);\n// Extends itself\nbizagi.rendering.desktop.label.extend(\"bizagi.rendering.desktop.label\", {}, {\n\n  /**\r\n                                                                               * Method to render non editable values\r\n                                                                               */\n  renderReadOnly: function renderReadOnly() {\n    this.setValue(this.properties.displayName);\n    return this._super();\n  },\n\n  /**\r\n      * Template method to implement in each device to customize each render after processed     \r\n      */\n  postRender: function postRender() {\n    // Apply a css class\n    this.getLabel().addClass(\"ui-bizagi-render-label\");\n  },\n\n  /**\r\n      * Method to render non editable values     \r\n      */\n  postRenderReadOnly: function postRenderReadOnly() {\n    // Apply a css class\n    this.getLabel().addClass(\"ui-bizagi-render-label\");\n  } });","/*\r\n *   Name: BizAgi Desktop Render Query Label Extension\r\n *   Author: Paola Herrera\r\n *   Comments:\r\n *   -   This script will redefine the number render class to adjust to desktop devices\r\n */\n\n// Extends itself\nbizagi.rendering.desktop.label.extend(\"bizagi.rendering.desktop.queryLabel\", {}, {});","/*\r\n*   Name: Bizagi Desktop Render Number Extension\r\n*   Author: UI Forms Team\r\n*   Comments:\r\n*   -   This script will redefine the number render class to adjust to desktop devices\r\n*/\n\n// Extends from render desktop base\nbizagi.rendering.desktop.render.extend(\"bizagi.rendering.desktop.number\", bizagi.rendering.number.prototype);\n// Extends itself\nbizagi.rendering.desktop.number.extend(\"bizagi.rendering.desktop.number\", {}, {\n\n  /**\r\n                                                                                 *   Sets the value in the rendered control\r\n                                                                                 * @param {} value\r\n                                                                                 * @returns {}\r\n                                                                                 */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n\n    // Call base\n    self._super(value);\n\n    // Set value in input\n    if (value != null && self.properties.editable) {\n      self.numericInput.val(bizagi.util.numberToFixedString(value));\n\n      self.value = self.properties.value = value;\n\n      // Formats the input\n      self.executeFormatCurrencyPlugin();\n    }\n  },\n\n  attachRetypeDouble: function attachRetypeDouble() {\n    var self = this;\n    var element = self.element;\n\n    var input = $(\"input\", element);\n    if (!input || input.length === 0) return;\n\n    // Apply blur handler to check value\n    input.blur(function () {\n      var control = $(this);\n      var previousValue = self.previousValue;\n      var value = self.value;\n      var typeControl = self.parent.properties.type;\n\n      if (typeControl === \"grid\") {\n        if (previousValue != null && value !== previousValue) {\n          if ($(this).data(\"newValue\") !== undefined && control.val() !== $(this).data(\"newValue\")) {\n            $(this).data().newValue = undefined;\n          }\n        }\n        self.retypeDouble(control);\n      } else {\n        self.retypeDouble(control);\n      }\n    });\n  },\n\n  retypeDouble: function retypeDouble(control) {\n    var self = this;\n    var currentValue = control.val();\n    var isVisible = $(control).attr(\"type\") !== \"hidden\" && $(control).css(\"display\") !== \"none\" && $(control).css(\"visibility\") !== \"hidden\";\n\n    if (isVisible && $(this).data(\"newValue\") === undefined) {\n\n      if (!control.data(\"oldValue\") || $(this).data(\"oldValue\") === \"\") {\n\n        // Check that there is something in the value or if a value has already been set\n        if (currentValue === \"\" || currentValue === control.data(\"newValue\"))\n        return;\n\n        self.createTooltip(control, currentValue, self.getResource(\"render-number-retype\"));\n      } else {\n        // Check that there is something in the value\n        if (currentValue === \"\") return;\n\n        if (currentValue !== control.data(\"oldValue\")) {\n          self.setValue(\"\");\n\n          self.createTooltip(control, \"\", self.getResource(\"render-text-retype-error\"));\n        } else {\n          control.data(\"newValue\", control.val());\n          control.data(\"oldValue\", \"\");\n\n          try {\n            // Destroy tooltips\n            control.tooltip(\"destroy\");\n          } catch (e) {\n          }\n        }\n      }\n    }\n  },\n\n  changeCellRequired: function changeCellRequired(argument) {\n    this.changeRequired(argument);\n  },\n\n  changeRequired: function changeRequired(argument) {\n    this.properties.required = argument;\n    this.changeRequiredLabel(argument);\n  },\n\n  changeRequiredLabel: function changeRequiredLabel(argument) {\n    var control = this.getControl();\n    if (control.length > 0) {\n      if (this.getMode() !== \"execution\") {\n        if (bizagi.util.parseBoolean(argument) === true && this.properties.editable) {\n          control.addClass(\"control-required\");\n        } else {\n          control.removeClass(\"control-required\");\n        }\n      } else {\n        if (bizagi.util.parseBoolean(argument) === true && !this.hasValue() && this.properties.editable) {\n          control.addClass(\"control-required\");\n        } else {\n          control.removeClass(\"control-required\");\n        }\n      }\n    }\n\n    this.triggerRenderValidate();\n  },\n\n  /**\r\n     * Customizes the font underline\r\n     * It does not apply when we use the render.base component\r\n     * @param underline\r\n     * @param isLabelFormat\r\n     */\n  changeFontUnderline: function changeFontUnderline(underline, isLabelFormat) {\n    var self = this;\n    var textFormat = self.properties.textFormat || {};\n    var valueFormat = self.properties.valueFormat || {};\n\n    var labelStrikethrough = bizagi.util.parseBoolean(textFormat.strikethru) ? \"line-through \" : \"\";\n    var valueStrikethrough = bizagi.util.parseBoolean(valueFormat.strikethru) ? \"line-through \" : \"\";\n    var formatUnderline = bizagi.util.parseBoolean(underline) ? \"underline\" : \"\";\n\n    var isLabelToFormat = typeof isLabelFormat != \"undefined\" || isLabelFormat != null ? isLabelFormat : true;\n    var $formatElements = isLabelToFormat ? self.getFormattingLabel() : self.getElementsToStylized(self.getControl());\n    var formatStrikeThrough = isLabelToFormat ? labelStrikethrough : valueStrikethrough;\n\n    self.changeTextDecoration($formatElements, formatStrikeThrough + formatUnderline);\n  },\n\n  /**\r\n      * Customizes the font Strikethrough property\r\n      * It does not apply when we use the render.base component\r\n      * @param strikeThrough\r\n      * @param isLabelFormat\r\n      */\n  changeFontStrikethru: function changeFontStrikethru(strikeThrough, isLabelFormat) {\n    var self = this;\n    var textFormat = self.properties.textFormat || {};\n    var valueFormat = self.properties.valueFormat || {};\n\n    var labelUnderline = bizagi.util.parseBoolean(textFormat.underline) ? \"underline \" : \"\";\n    var valueUnderline = bizagi.util.parseBoolean(valueFormat.underline) ? \"underline \" : \"\";\n    var formatStrikeThrough = bizagi.util.parseBoolean(strikeThrough) ? \"line-through\" : \"\";\n\n    var isLabelToFormat = typeof isLabelFormat != \"undefined\" || isLabelFormat != null ? isLabelFormat : true;\n    var $formatElements = isLabelToFormat ? self.getFormattingLabel() : self.getElementsToStylized(self.getControl());\n\n    var formatUnderline = isLabelToFormat ? labelUnderline : valueUnderline;\n\n    self.changeTextDecoration($formatElements, formatUnderline + formatStrikeThrough);\n  },\n\n  /**\r\n      * Context to apply styles\r\n      * @param context\r\n      * @returns {jQuery|HTMLElement}\r\n      */\n  getElementsToStylized: function getElementsToStylized(context) {\n    return $(\"input.ui-bizagi-render-numeric, label.readonly-control\", context);\n  },\n\n  /**\r\n      * Customizes the font Strikethrough or underline property\r\n      * @param {} $element\r\n      * @param {} textDecoration\r\n      * @returns {}\r\n      */\n  changeTextDecoration: function changeTextDecoration($element, textDecoration) {\n    if (textDecoration === undefined) return this;\n    if ($element === undefined) return this;\n\n    textDecoration && $element.css(\"text-decoration\", textDecoration);\n\n    return this;\n  } });","/**\r\n *   Name: Bizagi Desktop Render Query Number Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the number render class to adjust to desktop devices\r\n */\n\n// Extends itself\nbizagi.rendering.desktop.number.extend(\"bizagi.rendering.desktop.queryNumber\", {}, {\n\n  /*\r\n                                                                                      *   Sets the value in the rendered control\r\n                                                                                      */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n    var properties = self.properties;\n\n    // Call base\n    this._super(value);\n\n    if (value !== null && properties.editable) {\n      self.setValue(self.numericInput.asNumber({\n        symbol: properties.symbol,\n        positiveFormat: properties.positiveFormat,\n        negativeFormat: properties.negativeFormat,\n        decimalSymbol: properties.decimalSymbol,\n        digitGroupSymbol: properties.digitGroupSymbol,\n        groupDigits: properties.groupDigits }));\n\n    }\n  } });","/**\r\n *   Name: Bizagi Desktop Render Date Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the Date render class to adjust to desktop devices\r\n */\n\n// Extends from render base\nbizagi.rendering.desktop.render.extend(\"bizagi.rendering.desktop.date\", bizagi.rendering.render.base.prototype);\n// Extends from render desktop base\nbizagi.rendering.desktop.date.extend(\"bizagi.rendering.desktop.date\", bizagi.rendering.date.prototype);\n// Extends itself\nbizagi.rendering.desktop.date.extend(\"bizagi.rendering.desktop.date\", {}, {\n\n  //#region Side effects functions\n  /**\r\n   * Returns the html templated element\r\n   * @returns {*}\r\n   */\n  renderElement: function renderElement(renderTemplateName) {\n    // The renderTemplateName parameter only apply to advanced queries\n    return this._super(renderTemplateName || \"render-base\");\n  },\n\n  /**\r\n      * Method to render non editable values\r\n      * @returns {*|jQuery}\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    var self = this;\n    var properties = self.properties;\n    var ud = bizagi.util.dateFormatter;\n\n    var date = ud.getDateFromInvariant(self.getValue(), properties.showTime);\n    var value = ud.formatDate(date, properties.fullFormat, self.i18n);\n\n    var data = {\n      value: self.getMode() !== \"execution\" ? properties.fullFormat : value,\n      editable: properties.editable };\n\n\n    var template = this.renderFactory.getTemplate(\"readonly\");\n    return $.fasttmpl(template, data);\n  },\n\n  /**\r\n      * Translate standar date format to jquery date picker\r\n      * @property {DOM Object} context Control\r\n      * @returns {jQuery object} jQuery Object whith the element to stylize\r\n      */\n  getElementsToStylize: function getElementsToStylize(context) {\n    return $(\".bz-input-icon__input, .bz-input--readonly, .readonly-control\", context);\n  },\n\n  /*\r\n      *   Template method to implement in each device to customize the render's behaviour to add handlers\r\n      */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    var dateControl = self.getDateControl();\n    var inputDate = $(\".bz-input-icon__input\", dateControl);\n\n    self.configureMobiscollCalendar();\n    self.calendarInstance = $(\".bz-hidden\", dateControl).mobiscroll(\"getInst\");\n\n    // Bind event on input date\n    inputDate.on(\"focusInput\", function (e) {\n      //Para lograr la compatibilidad con las formas de inicio es necesario manejar el focus del input con validaciones para no mostrar el calendario cuando no es necesario po el autofocus de los dialog.\n      if (!self.getCalendarInstance().isVisible()) {\n        self.getCalendarInstance().show(false, true);\n        inputDate.focus();\n      }\n    }).\n    on(\"keydown\", function (e) {\n      if (e.keyCode == \"9\") self.getCalendarInstance().hide();\n      var timeoutKeyDown = setTimeout(function () {\n        var value = inputDate.val();\n        if (bizagi.util.isEmpty(value)) {\n          if (self.compareDates(value, self.getCalendarInstance().getVal()))\n          self.setValueFromCalendarButtons(null, function (v) {\n            self.getCalendarInstance().setVal(v, false, false, false);\n            self.setValue(\"\");\n            self.setDisplayValue(\"\");\n          });\n        } else {\n          var fecValid = self.getNormalizeDate(\n          bizagi.util.dateFormatter.getDateFromFormat(value, self.properties.fullFormat, self.i18n));\n\n          if (fecValid == 0) {\n            self.setValue(\"\");\n            self.getCalendarInstance().setVal(null);\n          } else {\n            if (self.compareDates(inputDate.val(), self.getCalendarInstance().getVal())) {\n              self.getCalendarInstance().setVal(fecValid, false, false, false);\n              self.onChangeHandler();\n            }\n          }\n        }\n        if (e.keyCode == \"13\") self.onChangeHandler();\n        clearTimeout(timeoutKeyDown);\n      }, 1);\n    }).\n    on(\"blur\", function (e) {\n      if (self.compareDates(inputDate.val(), self.getCalendarInstance().getVal())) self.onChangeHandler();\n    });\n\n    dateControl.click(function (e) {\n      self.getCalendarInstance().show(false, true);\n      inputDate.focus();\n    });\n  },\n\n  /**\r\n      * Initializes the Mobiscroll Calendar with the indicated configuration\r\n      */\n  configureMobiscollCalendar: function configureMobiscollCalendar() {\n    var self = this;\n    var properties = self.properties;\n    self.elementCalendar = null;\n    var controlElements = properties.showTime ? [\"calendar\", \"time\"] : [\"calendar\"];\n    var dateControl = self.getDateControl();\n    var fakeDiv = $(\".bz-hidden\", dateControl);\n    var inputDate = $(\".bz-input-icon__input\", dateControl);\n    var orientation = self.getOrientation();\n\n    fakeDiv.mobiscroll().calendar({\n      touchUi: false,\n      display: \"bubble\",\n      animate: false,\n      anchor: dateControl.get(0),\n      focusOnClose: inputDate.get(0),\n      controls: controlElements,\n      min: self.getNormalizeDate(new Date(properties.minValue)),\n      max: self.getNormalizeDate(new Date(properties.maxValue)),\n      defaultValue: self.getDisplayValue(),\n      timeFormat: properties.timePickerFormat ? self.getTimeFormat(properties.timePickerFormat) : \"\",\n      dateFormat: properties.datePickerFormat,\n      dateWheels: 'dd/MM/yyyy',\n      select: \"single\",\n      selectType: \"Day\",\n      rtl: orientation && orientation === \"rtl\",\n      lang: bizagi.util.languages[BIZAGI_LANGUAGE] || bizagi.localization.language || \"en\",\n      cssClass: \"mbsc-bizagi-theme\",\n      buttons: self.properties.showTime ?\n      [\n      {\n        text: self.getResource(\"render-timeentry-now\"),\n        handler: function handler() {\n          self.setValueFromCalendarButtons(new Date(), function (v) {\n            self.getCalendarInstance().setVal(v, false, false, false);\n            self.getCalendarInstance().hide();\n          });\n        },\n        cssClass: \"mbsc-fr-btn mbsc-btnNow\" },\n\n      {\n        text: self.getResource(\"render-plugin-search-users-select-link\"),\n        handler: \"set\",\n        cssClass: \"mbsc-fr-btn mbsc-btnSet\" },\n\n      {\n        text: self.getResource(\"render-plugin-search-users-clear-button-name\"),\n        handler: function handler(e, inst) {\n          inst.clear();\n        },\n        cssClass: \"mbsc-fr-btn mbsc-btnClear\" }] :\n\n\n      [\n      {\n        text: self.getResource(\"render-timeentry-now\"),\n        handler: function handler() {\n          self.setValueFromCalendarButtons(new Date(), function (v) {\n            self.getCalendarInstance().setVal(v, false, false, false);\n            self.getCalendarInstance().hide();\n          });\n        },\n        cssClass: \"mbsc-fr-btn mbsc-btnNow\" },\n\n      {\n        text: self.getResource(\"render-plugin-search-users-clear-button-name\"),\n        handler: function handler(e, inst) {\n          inst.clear();\n        },\n        cssClass: \"mbsc-fr-btn mbsc-btnClear\" }],\n\n\n      onSet: function onSet() {\n        self.onChangeHandler();\n      },\n      onDayChange: function onDayChange(obj) {\n        self.setValueFromCalendarButtons(obj.date, function (v) {\n          self.getCalendarInstance().setVal(v, false, false, false);\n          if (!self.properties.showTime) self.getCalendarInstance().hide();\n        });\n      },\n      onChange: function onChange(obj) {\n        if (self.elementCalendar) {\n          var c = $(\".mbsc-sc-whl-anim\", self.elementCalendar).length;\n          if (c == 0) {\n            self.setDateFromTimeSelector(obj.valueText);\n          } else {\n            var fnControl = setInterval(function () {\n              if (!self.elementCalendar || $(\".mbsc-sc-whl-anim\", self.elementCalendar).length == 0) {\n                self.setDateFromTimeSelector(obj.valueText);\n                clearInterval(fnControl);\n              }\n            }, 100);\n          }\n        }\n      },\n      onClear: function onClear() {\n        self.setValueFromCalendarButtons(null, function (v) {\n          self.getCalendarInstance().setVal(v, false, false, false);\n          self.getCalendarInstance().hide();\n        });\n      },\n      onBeforeShow: function onBeforeShow(opt, inst) {\n        inst.option({\n          max: bizagi.util.dateFormatter.getDateFromInvariant(properties.maxValue, properties.showTime),\n          min: bizagi.util.dateFormatter.getDateFromInvariant(properties.minValue, properties.showTime) });\n\n      },\n      onShow: function onShow(event) {\n        self.elementCalendar = calendar = $(\".mbsc-fr-popup\", event.target);\n        //Para customizar los botones del calendario\n        $(\".mbsc-btnNow\", calendar).\n        parent().\n        addClass(\"mbsc-div-btnNow\");\n        $(\".mbsc-btnSet\", calendar).\n        parent().\n        addClass(\"mbsc-div-btnSet\");\n      },\n      onClose: function onClose() {\n        self.elementCalendar = null;\n      } });\n\n  },\n\n  /**\r\n      * Sets the date selected from the time selector\r\n      * @param {String} value New value\r\n      * @returns {}\r\n      */\n  setDateFromTimeSelector: function setDateFromTimeSelector(value) {\n    var self = this;\n    self.setValueFromCalendarButtons(bizagi.util.dateFormatter.getDateFromFormat(value, self.properties.fullFormat), function (v) {\n      self.getCalendarInstance().setVal(v, false, false, false);\n      if (!self.properties.showTime) self.getCalendarInstance().hide();\n    });\n  },\n\n  /**\r\n      * Compares two dates and and determines if they are equal\r\n      * @param {Date} firsDate first date to compare\r\n      * @param {Date} secondDate second date to compare\r\n      * @returns {boolean} true o false\r\n      */\n  compareDates: function compareDates(firstDate, secondDate) {\n    var self = this;\n    var util = bizagi.util.dateFormatter;\n    var funcNormalice = self.getNormalizeDate;\n    firstDate = funcNormalice.call(\n    self,\n    typeof firstDate != \"string\" ? firstDate : util.getDateFromFormat(firstDate, self.properties.fullFormat, self.i18n));\n\n    secondDate = funcNormalice.call(\n    self,\n    typeof secondDate != \"string\" ? secondDate : util.getDateFromFormat(secondDate, self.properties.fullFormat, self.i18n));\n\n\n    if (!firstDate && !secondDate) return false;\n    if (!firstDate && secondDate || firstDate && !secondDate) return true;\n    if (firstDate.getTime() != secondDate.getTime()) return true;\n    return false;\n  },\n\n  /**\r\n      * Gets Mobiscroll Calendar's instance\r\n      * @returns {Object} Mobiscroll's instance\r\n      */\n  getCalendarInstance: function getCalendarInstance() {\n    return this.calendarInstance || (this.calendarInstance = $(\".bz-hidden\", this.getDateControl()).mobiscroll(\"getInst\"));\n  },\n\n  /*\r\n      *   Template method to implement in each device to customize the render's behaviour when rendering in design mode\r\n      */\n  configureDesignView: function configureDesignView() {\n  },\n  /*\r\n      *   Gets the date control\r\n      */\n\n  getDateControl: function getDateControl() {\n    return this.properties.editable ? $(\".bz-input-icon, .bz-input\", this.getControl()) : this.getControl();\n  },\n\n  removeValidations: function removeValidations() {\n    var self = this;\n    var form = self.getFormContainer();\n    if (form.clearValidationMessages) {\n      form.clearValidationMessages();\n    } else {\n      if (form.getFormContainer().parent && form.getFormContainer().parent.getFormContainer) {\n        form = form.getFormContainer().parent.getFormContainer();\n        if (form.clearValidationMessages) {\n          form.clearValidationMessages();\n        }\n      }\n    }\n  },\n\n  changeRequired: function changeRequired(argument) {\n    this.properties.required = argument;\n    this.changeRequiredLabel(argument);\n  },\n\n  changeRequiredLabel: function changeRequiredLabel(argument) {\n    var self = this;\n    var properties = self.properties;\n    var control = self.getControl();\n\n    if (control.length > 0) {\n      if (self.getMode() !== \"execution\") {\n        if (bizagi.util.parseBoolean(argument) == true && properties.editable) {\n          control.addClass(\"control-required\");\n        } else {\n          control.removeClass(\"control-required\");\n        }\n      } else {\n        if (bizagi.util.parseBoolean(argument) == true && !self.hasValue() && properties.editable) {\n          control.addClass(\"control-required\");\n        } else {\n          control.removeClass(\"control-required\");\n        }\n      }\n    }\n    self.triggerRenderValidate();\n  },\n\n  changeCellRequired: function changeCellRequired(argument) {\n    this.changeRequired(argument);\n  },\n  /*\r\n      *   Formats the date time value to the hidden control\r\n      */\n  onChangeHandler: function onChangeHandler(isNow) {\n    var self = this;\n    var properties = self.properties;\n    var currentDate = self.getNormalizeDate(self.getCalendarInstance().getVal());\n    var currentDateString = \"\";\n    var ud = bizagi.util.dateFormatter;\n\n    if (!currentDate || currentDate == 0) {\n      return;\n    }\n    //Attemp set the value of the datepicker control. If not valid go back to the previous.\n    var previousValue = self.value;\n\n    //sets the value with the current format date, changed to use the same displayValue method\n    if (isNow == true) {\n      currentDate = self.getNormalizeDate(new Date());\n      currentDateString = ud.formatDate(currentDate, \"MM/dd/yyyy HH:mm:ss\");\n      self.value = currentDateString;\n    } else {\n      self.value = ud.formatInvariant(currentDate, properties.showTime);\n    }\n    //Set seconds in 0 when control have default format and showTime enabled\n    if (properties.showTime && !properties.fullFormat.includes(\"s\")) {\n      currentDate.setSeconds(0);\n      self.value = ud.formatInvariant(currentDate, properties.showTime);\n    }\n\n    if (isNow || currentDate) {\n      var form = self.getFormContainer();\n\n      if (typeof form.validationController === \"undefined\") {\n        var $canvas = form.getValidationsContainer();\n        form.validationController = new bizagi.command.controllers.validation(form, self.validations, $canvas);\n      }\n\n      self.removeValidations();\n      if (!self.isValid([])) {\n        var oldVal = self.getCalendarInstance().getVal();\n        var message = bizagi.localization.getResource(\"workportal-general-invalid-date\");\n        message = message.replace(\"{0}\", properties.displayName);\n\n        var validationController = form.validationController || form.parent.validationController;\n        validationController.showValidationMessage(message + \" \" + oldVal);\n      }\n\n      self.value = previousValue;\n      currentDateString = ud.formatDate(currentDate, \"MM/dd/yyyy HH:mm:ss\");\n      self.setValue(currentDateString);\n      self.setDisplayValue(currentDateString);\n    }\n  },\n\n  getLabel: function getLabel() {\n    var self = this;\n    if (!self.label) {\n      self.label = $(\".ui-bizagi-label > label\", self.element || self.observableElement);\n    }\n\n    return self.label;\n  },\n\n  hideIcon: function hideIcon(icon) {\n    var self = this;\n    self._super(icon);\n\n    var containerIcons = $(\".ui-bizagi-render-icons\", self.element);\n    var errorIcon = $(\".ui-bizagi-render-icon-error\", self.element);\n    var helpIcon = $(\".ui-bizagi-render-icon-help\", self.element);\n\n    if (!helpIcon.is(\":visible\") && !errorIcon.is(\":visible\")) {\n      containerIcons.css({ width: \"1px\", \"min-width\": \"1px\" });\n    }\n  },\n  /**\r\n      * Apply the final format that will be showed on the input\r\n      */\n  getFullFormatedDate: function getFullFormatedDate(currentDate, currentTime) {\n    var fullDate = \"\";\n    var ud = bizagi.util.dateFormatter;\n\n    if (currentDate.length > 0) {\n      fullDate = currentDate;\n    } else if (currentDate !== undefined) {\n      fullDate = ud.formatISO(currentDate, false);\n    } else {\n      fullDate = ud.formatISO(new Date(), false);\n    }\n\n    fullDate += currentTime;\n    var dateFromFormat = ud.getDateFromFormat(fullDate, \"yyyy-MM-dd H:m\");\n\n    return ud.formatDate(dateFromFormat !== 0 ? dateFromFormat : currentDate, \"yyyy-MM-dd H:mm:ss\");\n  },\n\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n    if (self.getMode() !== \"execution\") {\n      return;\n    }\n\n    var properties = self.properties;\n    var dateControl = self.getControl();\n    var ud = bizagi.util.dateFormatter;\n\n    if (bizagi.util.isNumeric(value) && value !== 0) {\n      value = ud.formatInvariant(new Date(value), properties.showTime);\n    }\n\n    if (value) {\n      if (typeof value == \"string\") {\n        value = self.getNormalizeDate(ud.getDateFromInvariant(value, properties.showTime));\n      } else {\n        value = self.getNormalizeDate(value);\n      }\n    }\n\n    // Assert that the date could be parsed\n    var ci = self.getCalendarInstance();\n    if (properties.editable && ci.setVal) ci.setVal(value);\n    self.setValue(ud.formatInvariant(value, true));\n    properties.displayValue = ud.formatDate(value, properties.fullFormat, self.i18n);\n\n    var input = properties.editable ? $(\".bz-input-icon__input, .bz-input--readonly\", dateControl) : $(\".readonly-control\", dateControl);\n    // Set display value\n    if (typeof properties.displayValue === \"string\" || typeof properties.displayValue === \"number\") {\n      if (properties.editable) {\n        input.prop(\"value\", properties.displayValue);\n      } else {\n        input.html(properties.displayValue);\n      }\n      input.prop(\"title\", properties.displayValue);\n    }\n  },\n\n  /**\r\n      * Sets value to the control and execute a callback function\r\n      * @param {Date} date date to asign\r\n      * @param {Function} callBack function to execute\r\n      * @returns {}\r\n      */\n  setValueFromCalendarButtons: function setValueFromCalendarButtons(date, callBack) {\n    this._super(date);\n    if (typeof callBack === \"function\") callBack(date);\n    this.onChangeHandler();\n  },\n\n  cleanData: function cleanData() {\n    this.setValue(\"\");\n    this.setDisplayValue(\"\");\n  },\n\n  disablePopup: function disablePopup() {\n    if (this.getCalendarInstance()) this.getCalendarInstance().disable();\n  }\n\n  //#endregion Side effects functions\n});","/**\r\n *   Name: Bizagi Desktop queryDate\r\n *   Author: Ivn Ricardo Taimal Narvez\r\n *   Comments:\r\n *   -\r\n */\n\n// Extends itself\nbizagi.rendering.desktop.date.extend(\"bizagi.rendering.desktop.queryDate\", {}, {\n\n  /*\r\n                                                                                  *   Add the render data to the given collection in order to send data to the server\r\n                                                                                  */\n  collectDataQueryForm: function collectDataQueryForm(renderValues) {\n    var self = this;\n    var properties = self.properties;\n    var xpath = properties.xpath;\n    var value = self.getValue();\n\n    var queryValue = null;\n    var changed = self.controlValueIsChanged();\n    if (!bizagi.util.isEmpty(xpath)) {\n      if (value !== null && typeof value !== \"undefined\" && value !== \"\") {\n        queryValue = value;\n      }\n      if (queryValue !== null || properties.included) {\n        var searchType = self.properties.typeSearch || self.properties.rangeQuery || \"NONE\";\n        searchType = searchType.toUpperCase();\n\n        renderValues.push({\n          \"value\": queryValue,\n          \"included\": self.properties.included,\n          \"xpath\": properties.xpath,\n          \"searchType\": searchType,\n          \"orderType\": \"NONE\",\n          \"renderId\": self.getRenderId() });\n\n      }\n    }\n  } });","/**\r\n *   Name: Bizagi Desktop Render Yes-No Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the Yes-No render class to adjust to desktop devices\r\n */\n\n// Extends from render Desktop base\nbizagi.rendering.desktop.render.extend(\"bizagi.rendering.desktop.yesno\", bizagi.rendering.yesno.prototype);\n// Extends itself\nbizagi.rendering.desktop.yesno.extend(\"bizagi.rendering.desktop.yesno\", {}, {\n\n  /**\r\n                                                                               * Template method to implement in each device to customize each render after processed\r\n                                                                               */\n  postRender: function postRender() {\n    var control = this.getControl();\n\n    // Call base \n    this._super();\n\n    // Set control container to behave as a block\n    control.addClass(\"ui-bizagi-render-display-block\");\n    control.addClass(\"ui-bizagi-render-boolean-yesno\");\n\n    // Remove data for cell refresh\n    if (control[0]) {\n      $.removeData(control[0]);\n    }\n\n    // Apply plugins\n    control.optiongroup({ orientation: this.properties.orientation });\n  },\n\n  /**\r\n      * Template method to implement in each device to customize the render's behaviour to add handlers\r\n      */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    var control = self.getControl();\n\n    // Call base\n    self._super();\n\n    // Bind change event\n    control.bind(\"optiongroupchange\", function (evt, ui) {\n      // Only change the internal value when it truly changes\n      if (bizagi.util.parseBoolean(self.value) !== bizagi.util.parseBoolean(ui.value)) {\n        self.setValue(ui.value);\n      }\n    });\n  },\n\n  /**\r\n      * Template method to implement in each device to customize the render's behaviour\r\n      * when rendering in design mode\r\n      */\n  configureDesignView: function configureDesignView() {\n    var control = this.getControl();\n\n    // Unbind plugin handlers\n    control.find(\"input\").unbind(\"click\");\n  },\n\n  /**\r\n      * Sets the value in the rendered control\r\n      * @param {} value\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    var control = this.getControl();\n\n    // Call base\n    this._super(value);\n\n    // Set value in control\n    if (value != null && this.properties.editable) {\n      var parsedValue = bizagi.util.parseBoolean(value);\n\n      if (parsedValue != null) {\n        control.optiongroup(\"setValue\", parsedValue.toString());\n      }\n    }\n  },\n\n  /**\r\n      * Cleans current value\r\n      */\n  cleanData: function cleanData() {\n    var value = null;\n\n    this.setDisplayValue(value);\n    this.clearDisplayValue();\n  },\n\n  /**\r\n      * Sets the value in the rendered control\r\n      */\n  clearDisplayValue: function clearDisplayValue() {\n    var selectedItem = this.element.find(\".ui-radio-state-checked\");\n    selectedItem.removeClass(\"ui-radio-state-checked\");\n  } });","/**\r\n *   Name: BizAgi Desktop Render Check Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the Check render class to adjust to desktop devices\r\n */\n\n// Extends from render Desktop base\nbizagi.rendering.desktop.render.extend(\"bizagi.rendering.desktop.check\", bizagi.rendering.check.prototype);\n// Extends itself\nbizagi.rendering.desktop.check.extend(\"bizagi.rendering.desktop.check\", {}, {\n\n  /**\r\n                                                                               * Template method to implement in each device to customize each render after processed\r\n                                                                               */\n  postRender: function postRender() {\n    var $control = this.getControl();\n\n    // Call base\n    this._super();\n\n    this.input = $control.find(\"label\");\n    this.performStyles();\n  },\n\n  postRenderReadOnly: function postRenderReadOnly() {\n    var $control = this.getControl();\n    var showLetters = bizagi.override.enableCheck === true && !this.properties.editable;\n    this.input = $control.find(\"label\");\n\n    if (!showLetters) {\n      this.performStyles();\n\n      // Set as disabled\n      var check = $(\"input\", $control);\n      check.attr(\"readonly\", \"readonly\");\n      check.attr(\"disabled\", \"disabled\");\n    }\n  },\n\n  /**\r\n      * Method to render non editable values\r\n      * @returns {jQuery|*}\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    var html = \"\";\n    var showLetters = bizagi.override.enableCheck === true && !this.properties.editable;\n\n    if (!showLetters) {\n      html = this._super();\n    } else {\n      var template = this.renderFactory.getTemplate(\"readonly\");\n      var randomId = bizagi.util.randomNumber(100, 10000000);\n\n      // Render template\n      html = $.fasttmpl(template, {\n        id: randomId,\n        editable: this.properties.editable });\n\n    }\n\n    return html;\n  },\n\n  /**\r\n      * Template method to implement in each device to customize the render's behaviour to add handlers\r\n      */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n\n    // Call base\n    self._super();\n\n    // Bind change event\n    if (!bizagi.util.isIE()) {\n      // PLUGIN IMPLEMENTATION\n      self.input.bind(\"checkchange\", function (evt, ui) {\n        self.setValue(ui.value);\n      });\n    } else {\n      // NON PLUGIN IMPLEMENTATION\n      self.input.bind(\"change\", function (evt, ui) {\n        var value = $(\"input\", self.input).is(\":checked\");\n\n        self.setValue(value);\n        self.setDisplayValue(value);\n      });\n    }\n  },\n\n  /**\r\n      * Template method to implement in each device to customize the render's behaviour when rendering in design mode\r\n      */\n  configureDesignView: function configureDesignView() {\n    var $control = this.getControl();\n\n    // Unbind plugin handlers\n    $control.find(\"input\").unbind(\"click\");\n  },\n\n  /**\r\n      * Sets the value in the rendered control\r\n      * @param value\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n    var parsedValue = bizagi.util.parseBoolean(value);\n    var showLetters = bizagi.override.enableCheck === true && !this.properties.editable;\n\n    // Call base\n    this._super(parsedValue);\n\n    if (!showLetters) {\n\n      if (!bizagi.util.isIE()) {\n        // PLUGIN IMPLEMENTATION\n        try {\n          if (parsedValue === true) {\n            self.input.check(\"checkItem\");\n          } else {\n            self.input.check(\"uncheckItem\");\n          }\n        } catch (e) {}\n      } else if (self.input) {\n        // NON PLUGIN IMPLEMENTATION\n        if (parsedValue === true) {\n          self.input.addClass(\"ui-checkbox-state-checked\");\n          $(\"input\", self.input).attr(\"checked\", \"checked\");\n        } else {\n          self.input.removeClass(\"ui-checkbox-state-checked\");\n          $(\"input\", self.input).removeAttr(\"checked\");\n        }\n      }\n    } else if (self.input) {\n      self.input.val(this.getDisplayValue());\n    }\n  },\n\n  /**\r\n      * Cleans current value\r\n      */\n  cleanData: function cleanData() {\n    this.setDisplayValue(false);\n    this.setValue(false, false);\n  },\n\n  /**\r\n      * Modify styles\r\n      */\n  performStyles: function performStyles() {\n    var self = this;\n    var $control = self.getControl();\n\n    // Set control container to behave as a block\n    $control.addClass(\"ui-bizagi-render-display-block\");\n    $control.addClass(\"ui-bizagi-render-boolean-yesno\");\n\n    if (self.properties.required) {\n      $(\".ui-bizagi-render-control-required\", $control).css({ height: \"22px\" });\n    }\n\n    // Apply plugins\n    if (!bizagi.util.isIE()) {\n      // JUST FOR NON IE-BROWSERS\n      self.input.check();\n    } else {\n      $control.removeClass();\n      $control.addClass(\"ui-bizagi-render-control ui-bizagi-render-boolean-yesno-ie\");\n      $control.find(\"label\").addClass(\"checkbox-ie\");\n    }\n  },\n\n  changeRequired: function changeRequired(argument) {\n    this.properties.required = argument;\n    this.changeRequiredLabel(argument);\n  },\n\n  changeRequiredLabel: function changeRequiredLabel(argument) {\n    var control = this.getControl();\n\n    if (control.length > 0) {\n      if (this.getMode() !== \"execution\") {\n        if (bizagi.util.parseBoolean(argument) == true && this.properties.editable) {\n          control.addClass(\"control-required\");\n        } else {\n          control.removeClass(\"control-required\");\n        }\n      } else {\n        if (bizagi.util.parseBoolean(argument) == true && !this.hasValue() && this.properties.editable) {\n          control.addClass(\"control-required\");\n        } else {\n          control.removeClass(\"control-required\");\n        }\n      }\n    }\n    this.triggerRenderValidate();\n  },\n\n  changeCellRequired: function changeCellRequired(argument) {\n    this.changeRequired(argument);\n  },\n\n  changeFontSize: function changeFontSize(size, isLabelFormat) {\n    //this is required Just to avoid change the font size in this control\n    if (isLabelFormat) {\n      this._super(size, isLabelFormat);\n    }\n  } });","/**\r\n *   Name: Bizagi Desktop Render Cascading combo Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the cascading combo render class to adjust to desktop devices\r\n */\n\n// Extends from render desktop base\nbizagi.rendering.desktop.render.extend(\"bizagi.rendering.desktop.cascadingCombo\", bizagi.rendering.combo.prototype);\n// Extends itself\nbizagi.rendering.desktop.cascadingCombo.extend(\"bizagi.rendering.desktop.cascadingCombo\", bizagi.rendering.cascadingCombo.prototype);\n// Extends itself\nbizagi.rendering.desktop.cascadingCombo.extend(\"bizagi.rendering.desktop.cascadingCombo\", {\n  // Statics\n  BA_ACTION_PARAMETER_PREFIX: bizagi.render.services.service.BA_ACTION_PARAMETER_PREFIX,\n  BA_CONTEXT_PARAMETER_PREFIX: bizagi.render.services.service.BA_CONTEXT_PARAMETER_PREFIX },\n{\n\n  /*\r\n  *   Template method to implement in each device to customize each render after processed\r\n  */\n  postRender: function postRender() {\n    var self = this;\n\n    // Call desktop.combo method\n    bizagi.rendering.desktop.combo.prototype.postRender.apply(self, arguments);\n    self.processLayout(false, self.properties.valueFormat || {});\n  },\n\n  /*\r\n     *   Template method to implement in each device to customize the render's behaviour to add handlers\r\n     */\n  configureHandlers: function configureHandlers() {\n    // Call base\n    this._super();\n\n    // Call desktop.combo method\n    bizagi.rendering.desktop.combo.prototype.configureHandlers.apply(this, arguments);\n  },\n\n  comboDropDown: function comboDropDown() {\n    // Call desktop.combo method\n    bizagi.rendering.desktop.combo.prototype.comboDropDown.apply(this, arguments);\n  },\n\n  showLoadingData: function showLoadingData() {\n    // Call desktop.combo method\n    bizagi.rendering.desktop.combo.prototype.showLoadingData.apply(this, arguments);\n  },\n\n  hideLoadingData: function hideLoadingData() {\n    // Call desktop.combo method\n    bizagi.rendering.desktop.combo.prototype.hideLoadingData.apply(this, arguments);\n  },\n\n  internalComboDropDown: function internalComboDropDown() {\n    // Call desktop.combo method\n    bizagi.rendering.desktop.combo.prototype.internalComboDropDown.apply(this, arguments);\n  },\n\n  resizeCombo: function resizeCombo() {\n    // Call desktop.combo method\n    bizagi.rendering.desktop.combo.prototype.resizeCombo.apply(this, arguments);\n  },\n\n  validateValueInDatasource: function validateValueInDatasource() {\n    // Call desktop.combo method\n    bizagi.rendering.desktop.combo.prototype.validateValueInDatasource.apply(this, arguments);\n  },\n\n  /*\r\n     *   Keydown listener\r\n     */\n  keyDownFunction: function keyDownFunction(e) {\n    // Call desktop.combo method\n    bizagi.rendering.desktop.combo.prototype.keyDownFunction.apply(this, arguments);\n  },\n\n  /*\r\n     *   KeyUp listener\r\n     */\n  keyUpFunction: function keyUpFunction(e) {\n    // Call desktop.combo method\n    bizagi.rendering.desktop.combo.prototype.keyUpFunction.apply(this, arguments);\n  },\n\n  /*\r\n     * Select letter by letter\r\n     */\n  selectItemByKeyUp: function selectItemByKeyUp() {\n    // Call desktop.combo method\n    bizagi.rendering.desktop.combo.prototype.selectItemByKeyUp.apply(this, arguments);\n  },\n\n  selectFirstElement: function selectFirstElement() {\n    // Call desktop.combo method\n    bizagi.rendering.desktop.combo.prototype.selectFirstElement.apply(this, arguments);\n  },\n\n  selectLastElement: function selectLastElement() {\n    // Call desktop.combo method\n    bizagi.rendering.desktop.combo.prototype.selectLastElement.apply(this, arguments);\n  },\n\n  /*\r\n     * Handler key Up\r\n     */\n  selectPreviousElement: function selectPreviousElement() {\n    // Call desktop.combo method\n    bizagi.rendering.desktop.combo.prototype.selectPreviousElement.apply(this, arguments);\n  },\n  /*\r\n     *Handler key Down\r\n     */\n  selectNextElement: function selectNextElement() {\n    // Call desktop.combo method\n    bizagi.rendering.desktop.combo.prototype.selectNextElement.apply(this, arguments);\n  },\n\n  /*\r\n     *   Sets the value in the rendered control\r\n     */\n  setDisplayValue: function setDisplayValue() {\n    // Call desktop.combo method\n    bizagi.rendering.desktop.combo.prototype.setDisplayValue.apply(this, arguments);\n  },\n\n  /*\r\n     *   Sets the value in the rendered control\r\n     */\n  clearDisplayValue: function clearDisplayValue() {\n    // Call desktop.combo method\n    bizagi.rendering.desktop.combo.prototype.clearDisplayValue.apply(this, arguments);\n  },\n\n  /*\r\n     *   Returns the selected value in the template\r\n     */\n  getSelectedValue: function getSelectedValue() {\n    // Call desktop.combo method\n    return bizagi.rendering.desktop.combo.prototype.getSelectedValue.apply(this, arguments);\n  },\n\n  /*\r\n     *   Handler to react when a combo item is selected\r\n     */\n  onComboItemSelected: function onComboItemSelected() {\n    this.itemSelected = true;\n    // Call desktop.combo method\n    return bizagi.rendering.desktop.combo.prototype.onComboItemSelected.apply(this, arguments);\n  },\n\n  postRenderPrintVersion: function postRenderPrintVersion() {\n    var control = this.getControl();\n\n    control.empty();\n    control.append(this.value.value);\n  },\n\n  /*\r\n     * validate when fire event form document and window\r\n     */\n  dropDownValidClose: function dropDownValidClose() {\n    return bizagi.rendering.desktop.combo.prototype.dropDownValidClose.apply(this, arguments);\n  },\n\n  /*\r\n     * set a new dropdown position\r\n     */\n  dropDownReposition: function dropDownReposition(dropDown, containerForm) {\n    return bizagi.rendering.desktop.combo.prototype.dropDownReposition.apply(this, arguments);\n  },\n\n  /*\r\n     * destroy dropdown\r\n     */\n  dropDownDestroy: function dropDownDestroy(dropDown) {\n    return bizagi.rendering.desktop.combo.prototype.dropDownDestroy.apply(this, arguments);\n  },\n\n  /*\r\n     *   Find elements within a data source\r\n     */\n  findDataById: function findDataById() {\n    return bizagi.rendering.desktop.combo.prototype.findDataById.apply(this, arguments);\n  },\n\n  findDataByValue: function findDataByValue() {\n    return bizagi.rendering.desktop.combo.prototype.findDataByValue.apply(this, arguments);\n  },\n\n  recalculateComboOffset: function recalculateComboOffset() {\n    return bizagi.rendering.desktop.combo.prototype.recalculateComboOffset.apply(this, arguments);\n  },\n  /**\r\n      * Check if dialog is preferences view\r\n      */\n  isPreferencesDialog: function isPreferencesDialog(container) {\n    return bizagi.rendering.desktop.combo.prototype.isPreferencesDialog.apply(this, arguments);\n  },\n\n  setValue: function setValue(val, triggerEvents) {\n    var self = this;\n    triggerEvents = triggerEvents !== undefined ? triggerEvents : true;\n\n    if (val === '') {\n      val = { id: \"\", value: \"\" };\n    }\n\n    if (!!val) {\n      var id = val.id || \"\";\n      var label = val.value || self.findDataById(id).value;\n\n      self.selectedValue = { id: id, value: label };\n\n      if (!self.internalSetInitialValueFlag) {\n        if (self.value === null || self.value.id !== val.id) {\n          self.triggerHandler(\"select\", [{ id: id, value: label }, false]);\n        }\n      }\n\n      this._super(self.selectedValue, triggerEvents);\n    }\n  },\n\n  /*\r\n      * Cleans current data\r\n      */\n  cleanData: function cleanData() {\n    var self = this;\n\n    self.value = self.properties.value = self.selectedValue = { id: \"\", value: \"\" };\n    self.setValue(self.value, false);\n    self.setDisplayValue(self.value);\n    self.clearDisplayValue();\n  },\n\n  changeRequired: function changeRequired(argument) {\n    return bizagi.rendering.desktop.combo.prototype.changeRequired.apply(this, arguments);\n  },\n\n  changeRequiredLabel: function changeRequiredLabel(argument) {\n    return bizagi.rendering.desktop.combo.prototype.changeRequiredLabel.apply(this, arguments);\n  },\n\n  changeRequiredControl: function changeRequiredControl(argument) {\n    return bizagi.rendering.desktop.combo.prototype.changeRequiredControl.apply(this, arguments);\n  },\n\n  //#region Format\n\n  /**\r\n   * Customizes the font underline\r\n   * It does not apply when we use the render.base component\r\n   * @param underline\r\n   * @param isLabelFormat\r\n   */\n  changeFontUnderline: function changeFontUnderline(underline, isLabelFormat) {\n    // Call desktop.combo method\n    bizagi.rendering.desktop.combo.prototype.changeFontUnderline.apply(this, arguments);\n  },\n\n  /**\r\n      * Customizes the font Strikethrough property\r\n      * It does not apply when we use the render.base component\r\n      * @param strikeThrough\r\n      * @param isLabelFormat\r\n      */\n  changeFontStrikethru: function changeFontStrikethru(strikeThrough, isLabelFormat) {\n    // Call desktop.combo method\n    bizagi.rendering.desktop.combo.prototype.changeFontStrikethru.apply(this, arguments);\n  },\n\n  /**\r\n      * Context to apply styles\r\n      * @param context\r\n      * @returns {jQuery|HTMLElement}\r\n      */\n  getElementsToStylized: function getElementsToStylized(context) {\n    // Call desktop.combo method\n    return bizagi.rendering.desktop.combo.prototype.getElementsToStylized.apply(this, arguments);\n  },\n\n  /**\r\n      * Customizes the font Strikethrough or underline property\r\n      * @param {} $element\r\n      * @param {} textDecoration\r\n      * @returns {}\r\n      */\n  changeTextDecoration: function changeTextDecoration($element, textDecoration) {\n    // Call desktop.combo method\n    return bizagi.rendering.desktop.combo.prototype.changeTextDecoration.apply(this, arguments);\n  }\n\n  //#endregion Format\n});\n\n// We override original select menu refresh position method to adjust custom stuff\nvar originalRefreshPositionMethod = $.ui.selectmenu.prototype._refreshPosition;\n$.ui.selectmenu.prototype._refreshPosition = function () {\n  // Set initial height to zero\n  this.list.height(0);\n\n  // Call original method\n  var result = originalRefreshPositionMethod.apply(this, arguments);\n\n  // Return original response\n  this.list.css(\"width\", this.newelement.width() + \"px\");\n  return result;\n};","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /**\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: Bizagi Desktop Render Search Extension\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: Bizagi UI Forms\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This script will redefine the search render class to adjust to desktop devices\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\n// Extends from render Desktop base\nbizagi.rendering.desktop.render.extend(\"bizagi.rendering.desktop.search\", bizagi.rendering.search.prototype);\n// Extends itself\nbizagi.rendering.desktop.search.extend(\"bizagi.rendering.desktop.search\", {\n  ADVANCED_SEARCH_ID: -1,\n  ADVANCED_ADDITION_ID: -2,\n  CLEAR_SEARCH_ID: -3,\n  NO_RESULTS_SEARCH_ID: -4,\n  SEARCH_DELAY: 750,\n  SEARCH_MAX_RECORDS: 50 },\n{\n  /**\r\n   *   Update or init the element data\r\n   * @param {} data submitData\r\n   * @returns {}\r\n   */\n  initializeData: function initializeData(data) {\n    var self = this;\n\n    // Call base\n    self._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n    properties.searchImage = properties.searchImage || this.dataService.getSearchDefaultImage();\n\n    // Store reference of all ajax request in order to run only one instance of them\n    self.deferredReference = null;\n  },\n\n  /**\r\n      *   Template method to implement in each device to customize each render after processed\r\n      * @returns {}\r\n      */\n  postRender: function postRender() {\n    var self = this;\n    var control = self.getControl();\n\n    // Call base\n    self._super();\n\n    // Apply plugin\n    self.searchInput = $(\"input\", control);\n    self.advancedSearch = $(\"button\", control);\n\n    if (self.properties.advancedSearch) {\n      control.addClass('ui-bizagi-advanced-search');\n    }\n\n    self.applyAutocompletePlugin();\n  },\n\n  postRenderReadOnly: function postRenderReadOnly() {\n    this.setDisplayValue(this.properties.value);\n  },\n\n  /**\r\n      * Template method to implement in each device to customize the render's behaviour to add handlers\r\n      * @returns {}\r\n      */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n\n    // Call base\n    self._super();\n\n    // Bind select event\n    var searchInput = self.searchInput;\n    searchInput.bind(\"autocompleteselect\", function (e, ui) {\n      // ui.item.id == self.Class.CLEAR_SEARCH_ID || was taken off in order to allow rule execution when clicking on clear\n      if (ui.item.id == self.Class.ADVANCED_SEARCH_ID || ui.item.id == self.Class.ADVANCED_ADDITION_ID || ui.item.id == self.Class.CLEAR_SEARCH_ID || ui.item.id == self.Class.NO_RESULTS_SEARCH_ID)\n      return false;\n\n      self.setValue(ui.item);\n      self.selectedValue = ui.item.value;\n\n      // Format additional label\n      ui.item.value = self.formatItem(ui.item.value);\n\n      //IE 8 Focus fix - SUITE-9517\n      if (document.selection) {\n        // Set focus on the element\n        searchInput.focus();\n\n        // Create empty selection range\n        var oSel = document.selection.createRange();\n\n        // Move selection start and end to 0 position\n        oSel.moveStart(\"character\", -self.selectedValue.length);\n\n        // Move selection start and end to desired position\n        oSel.moveStart(\"character\", 0);\n        oSel.moveEnd(\"character\", self.selectedValue.length);\n        oSel.select();\n      }\n\n      return true;\n    });\n\n    self.bind(\"onSearchError\", function (e, data) {\n      var form = self.getFormContainer();\n      form.clearValidationMessages();\n\n      try {\n        // Add information of control\n        var msgObj = self.properties.displayName + \": \";\n        msgObj += JSON.parse(data.responseText).message;\n        form.addValidationMessage(msgObj, \"\", \"ui-icon-alert\");\n      } catch (e) {\n        // If data does not json string, show data content\n        form.addValidationMessage(data);\n      }\n\n      self.hideAutocompleteLoading();\n    });\n\n    // Bind click event\n    searchInput.click(function () {\n      // close if already visible\n      if (searchInput.autocomplete(\"widget\").is(\":visible\")) {\n        searchInput.autocomplete(\"close\");\n        return;\n      }\n\n      searchInput.autocomplete(\"search\", $(searchInput).val());\n    });\n\n    // Bind click event\n    self.advancedSearch.click(function () {\n      self.showSearchDialog();\n    });\n\n    // Allow delete item If It's a suggest and \"allow clear\" property is enable\n    if (!self.properties.advancedSearch) {\n      var suggestFocus = function suggestFocus(event) {\n        if (this.value === \"\" && self.properties.allowClear) {\n          var value = { id: \"\" };\n\n          self.setDisplayValue(value);\n          self.setValue(value);\n        } else {\n          self.setDisplayValue(self.getValue());\n        }\n      };\n\n      searchInput.on(\"blur\", suggestFocus);\n    }\n  },\n\n  /**\r\n      * Apply autocomplete capabilities to a single input\r\n      * @returns {}\r\n      */\n  applyAutocompletePlugin: function applyAutocompletePlugin() {\n    var self = this;\n    var searchInput = self.searchInput;\n    var orientation = self.getFormContainer().properties.orientation;\n    var alignForSuggest = orientation == \"rtl\" ? \"right\" : \"left\";\n    var rtlClassForSuggest = orientation == \"rtl\" ? \" suggest-rtl\" : \"\";\n    var idDropdown = \"sg-\" + self.properties.id;\n\n    // Apply autocomplete plugin\n    searchInput.autocomplete({\n      autoFocus: true,\n      messages: {\n        noResults: null, //\"No search results.\",\n        results: function results() {\n        } },\n\n      search: function search(event, ui) {\n      },\n      source: function source(req, add) {\n        // active search\n        self.activeRequestTerm = req.term;\n\n        // Check local storage\n        var now = new Date().getTime();\n        var parseRequest = encodeURIComponent(req.term);\n        var expireKey = self.properties.xpath + \"_\" + parseRequest + \"_expire\";\n        var requestKey = self.properties.xpath + \"_\" + parseRequest;\n        var expire = bizagi.util.getItemLocalStorage(expireKey);\n\n        if (expire && self.properties.enableLocalStorage && now < expire) {\n          try {\n            var data = JSON.parse(bizagi.util.getItemLocalStorage(requestKey));\n            add(data);\n            self.hideAutocompleteLoading();\n          } catch (e) {\n            self.processRequest(req, add);\n          }\n        } else {\n          self.processRequest(req, add);\n        }\n      },\n      open: function open() {\n        var suggestMenu = searchInput.data(\"ui-autocomplete\").menu.element;\n        var suggestStyles = { top: 0, left: 0 };\n        var suggestContainer = searchInput.closest(\".ui-bizagi-control\");\n        var controlContainer = suggestContainer.parent();\n        var itemWidth = self.calculateSuggestionWidth();\n\n        $('li', suggestMenu).each(function () {\n          $(this).addClass(rtlClassForSuggest);\n\n          if ($(this).index() % 2 < 1) $(this).addClass(\"biz-ui-even\");\n        });\n\n        // Fix position to prevent the scroll of autocomplete\n        suggestMenu.css(suggestStyles);\n        suggestMenu.attr(\"id\", idDropdown);\n\n        suggestContainer.addClass(\"ac-is-visible\");\n        controlContainer.addClass(\"ac-is-visible ac-clear-floats\");\n\n        var suggestList = suggestMenu.appendTo(suggestContainer);\n\n        // Apply to combo in the modal\n        if (self.isPreferencesDialog(suggestContainer)) {\n          var $comboDialog = $(suggestContainer.closest(\".ui-dialog-content\"));\n          var top = suggestList.offset().top - $comboDialog.offset().top;\n          var left = suggestList.offset().left - $comboDialog.offset().left;\n\n          var dropDownContainer = $(\"#wrapper-\" + idDropdown);\n          if (dropDownContainer && dropDownContainer.length > 0) dropDownContainer.remove();\n\n          // Container\n          var $comboWrapper = $(\"<div/>\", {\n            id: \"wrapper-\" + idDropdown,\n            css: {\n              \"position\": \"absolute\",\n              \"top\": top,\n              \"left\": left } });\n\n\n\n          $comboWrapper.appendTo($comboDialog);\n          $(suggestList).appendTo($comboWrapper);\n        }\n\n        suggestList.position({\n          my: alignForSuggest + \" top\",\n          at: alignForSuggest + \" bottom\",\n          of: this,\n          collision: \"flipfit\" });\n\n\n        suggestList.css(\"z-index\", $.getMaxZindex() + 10);\n\n        // Add data to check if element is visible\n        suggestList.attr(\"visible\", true);\n\n        // Apply with to menu and items\n        $(\".ui-bizagi-render-search-item\", suggestList).width(itemWidth);\n        $(\".ui-bizagi-render-search-item-label\", suggestList).width(itemWidth);\n\n        suggestList.width(itemWidth);\n        self.hideAutocompleteLoading();\n      },\n      close: function close() {\n        searchInput.data(\"ui-autocomplete\").menu.element.attr(\"visible\", false);\n      },\n      delay: this.Class.SEARCH_DELAY });\n\n\n    // Special rendering\n    searchInput.data(\"ui-autocomplete\")._renderItem = function (ul, item) {\n      // Render for clear search\n      if (item.id == self.Class.CLEAR_SEARCH_ID) {\n        return self.renderClearItem(ul, item).appendTo(ul);\n      }\n      // Render for advanced search\n      if (item.id == self.Class.ADVANCED_SEARCH_ID) {\n        return self.renderAdvancedItem(ul, item).appendTo(ul);\n      }\n\n      // Render for allow addition\n      if (item.id == self.Class.ADVANCED_ADDITION_ID) {\n        return self.renderAddItem(ul, item).appendTo(ul);\n      }\n\n      // Normal rendering\n      return self.renderSearchItem(item).appendTo(ul);\n    };\n\n    // We override original select menu resize\n    searchInput.data(\"ui-autocomplete\")._resizeMenu = function () {\n      var ul = this.menu.element;\n      ul.outerWidth(this.element.outerWidth());\n    };\n  },\n\n  /**\r\n      *   Renders a search item\r\n      * @param {} item\r\n      * @returns {}\r\n      */\n  renderSearchItem: function renderSearchItem(item) {\n    var self = this;\n    var properties = self.properties;\n    var template = self.renderFactory.getTemplate(\"searchItem\");\n\n    var searchItem = $.tmpl(template, {\n      image: properties.searchImage,\n      label: item.label,\n      orientation: self.properties.orientation || \"lrt\" });\n\n\n    searchItem.data(\"item.autocomplete\", item);\n\n    return searchItem;\n  },\n\n  /**\r\n      * Renders the advanced item\r\n      * @returns {}\r\n      */\n  renderAdvancedItem: function renderAdvancedItem() {\n    var self = this;\n    var searchItem = self.renderSearchItem({\n      id: self.Class.ADVANCED_SEARCH_ID,\n      label: this.getResource(\"render-search-advanced-label\") });\n\n\n    // Bind click event\n    searchItem.click(function () {\n      self.showSearchDialog();\n    });\n\n    return searchItem;\n  },\n\n  /**\r\n      * Renders the advanced item\r\n      * @returns {}\r\n      */\n  renderClearItem: function renderClearItem() {\n    var self = this;\n    var searchItem = self.renderSearchItem({\n      id: self.Class.CLEAR_SEARCH_ID,\n      label: this.getResource(\"render-search-clear-label\") });\n\n\n    // Bind click event\n    searchItem.click(function () {\n      var value = { id: \"\" };\n\n      self.setDisplayValue(value);\n      self.setValue(value);\n    });\n\n    return searchItem;\n  },\n\n  /**\r\n      * Renders the add item\r\n      * @returns {}\r\n      */\n  renderAddItem: function renderAddItem() {\n    var data = { id: this.Class.ADVANCED_ADDITION_ID, label: this.getResource(\"render-search-add-label\") };\n    var searchItem = this.renderSearchItem(data);\n\n    return searchItem;\n  },\n\n  /**\r\n      *   Process the request data for the autocomplete control\r\n      * @param {} req\r\n      * @param {} add\r\n      * @returns {}\r\n      */\n  processRequest: function processRequest(req, add) {\n    var self = this;\n    var properties = self.properties;\n    // Create array for response objects\n    var suggestions = [];\n\n    if (self.properties.allowSuggest && req.term.length >= self.properties.searchLength) {\n      self.showAutocompleteLoading();\n\n      // Update term property to reflect the search\n      properties.term = req.term;\n\n      /**\r\n                                   * Cancel previous request in order to improve the performance\r\n                                   */\n      if (this.deferredReference && typeof this.deferredReference.reject === \"function\" && this.deferredReference.state() !== \"resolved\") {\n        this.deferredReference.reject({ hideStatus: true });\n      }\n\n      self.deferredReference = this.getData().done(function (data) {\n\n        if (data && data.length > 0) {\n          data = data.slice(0, properties.maxRecords);\n\n          if (data.length > self.Class.SEARCH_MAX_RECORDS) {\n            data = data.slice(0, self.Class.SEARCH_MAX_RECORDS);\n\n            suggestions.push({\n              id: self.Class.NO_RESULTS_SEARCH_ID,\n              label: self.getResource(\"render-search-maximum-records-allowed\"),\n              value: \"\" });\n\n          } else {\n            data = data.slice(0, properties.maxRecords);\n          }\n\n          $.each(data, function (i, val) {\n            if (properties.maxRecords == 0 || i < properties.maxRecords) {\n              var parseValue = bizagi.util.performTermMatches(val.value, req.term);\n              var labelWithoutFormat = bizagi.util.performTermMatches(val.value, req.term, true);\n\n              suggestions.push({\n                id: val.id,\n                label: parseValue,\n                labelWithoutFormat: labelWithoutFormat,\n                value: val.value });\n\n            }\n          });\n        } else {\n          suggestions.push({\n            id: self.Class.NO_RESULTS_SEARCH_ID,\n            label: self.getResource(\"render-grid-no-records\"),\n            value: \"\" });\n\n        }\n\n        addToSuggestions(suggestions, req.term);\n\n        self.hideAutocompleteLoading();\n      });\n    } else {\n      addToSuggestions(suggestions, req.term);\n    }\n\n    /*\r\n      *   Method to add the special items to the suggestions\r\n      */\n    function addToSuggestions(allSuggestions, request) {\n      // Add the clear option\n      if (properties.allowClear && self.value !== undefined) {\n        allSuggestions.push({ id: self.Class.CLEAR_SEARCH_ID, label: \"\", value: \"\" });\n      }\n      // Add additional option if advanced search is on\n      if (properties.advancedSearch) {\n        allSuggestions.push({ id: self.Class.ADVANCED_SEARCH_ID, label: \"\", value: \"\" });\n      }\n\n      // Add additional option if allow addition is on\n      if (properties.allowAdd) {\n        allSuggestions.push({ id: self.Class.ADVANCED_ADDITION_ID, label: \"\", value: \"\" });\n      }\n\n      // Create local storage to improve the speed\n      var expireTime = new Date().getTime() + self.properties.expireCache;\n      var parseRequest = encodeURIComponent(request);\n\n      if (self.properties.enableLocalStorage) {\n        var expireKey = self.properties.xpath + \"_\" + parseRequest + \"_expire\";\n        var requestKey = self.properties.xpath + \"_\" + parseRequest;\n\n        bizagi.util.setItemLocalStorage(expireKey, expireTime);\n        bizagi.util.setItemLocalStorage(requestKey, JSON.encode(allSuggestions));\n      }\n\n      // Pass array to callback\n      add(allSuggestions);\n    }\n  },\n\n  /**\r\n      *   Returns the desired width for the suggestion menu\r\n      * @returns {}\r\n      */\n  calculateSuggestionWidth: function calculateSuggestionWidth() {\n    var suggestMenu = this.searchInput.data(\"ui-autocomplete\").menu.element;\n    return suggestMenu.width();\n  },\n  /**\r\n      *   Sets the value in the rendered control\r\n      * @param {} value\r\n      * @returns {}\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n    var properties = self.properties;\n    var label = \"\";\n\n    value = self.mapValue(value);\n\n    if (value != undefined && value != null) {\n      if (properties.editable) {\n        if (typeof value.value !== \"undefined\" && value.value) {\n          if (typeof value.labelWithoutFormat !== \"undefined\") {\n            self.searchInput.val(value.labelWithoutFormat);\n          } else {\n            self.searchInput.val(self.formatItem(value.value));\n          }\n\n          self.setValue(value);\n        } else if (value.additionallabel && value.label) {\n          label = value.label + \" - \" + value.additionallabel;\n          self.searchInput.val(label);\n        } else if (value.label) {\n          self.searchInput.val(value.label);\n        } else if (value && typeof value.id !== \"undefined\" && value.id === \"\") {\n          self.searchInput.val(\"\");\n        } else if (_typeof(value) != \"object\") {\n          self.searchInput.val(value);\n        }\n      } else {\n        var control = self.getControl();\n\n        if (typeof value.labelWithoutFormat !== \"undefined\") {\n          label = value.labelWithoutFormat;\n        } else {\n          label = value.label || value.value;\n        }\n\n        if (label !== undefined && label !== null) {\n          if (_typeof(label) == \"object\") {\n            label = label.join(\" - \");\n          }\n        } else {\n          label = \"\";\n        }\n\n        if (typeof label === \"string\") {\n          if (value.additionallabel) {\n            label += \" - \" + value.additionallabel;\n          }\n\n          label = bizagi.util.sanitizeHTML(label);\n        }\n\n        control.html(label);\n      }\n    }\n  },\n\n  /**\r\n      *   Returns the value to display, ex. non-editable renders\r\n      * @returns {}\r\n      */\n  getDisplayValue: function getDisplayValue() {\n    return this.selectedValue;\n  },\n\n  /**\r\n      * Open Add new record dialog\r\n      * @returns {}\r\n      */\n  showAddRecordDialog: function showAddRecordDialog() {\n    var self = this;\n    var properties = self.properties;\n    var buttons = {\n      text: bizagi.localization.getResource(\"render-form-dialog-box-add\"),\n      click: function click() {\n        // Show dialog with add form\n        var dialog = new bizagi.rendering.dialog.form(self.dataService, self.renderFactory, {\n          showSaveButton: properties.editable,\n          title: bizagi.localization.getResource(\"render-dialog-entity\"),\n          orientation: self.properties.orientation || \"ltr\",\n          onSave: function onSave(data) {\n            // Remove pagecache from data\n            var idPageCache = data.idPageCache;\n            var defer = $.Deferred();\n\n            var params = {\n              action: \"SAVE\",\n              data: data,\n              idPageCache: idPageCache,\n              guidEntity: properties.entity,\n              contexttype: \"entity\" };\n\n\n            // Check if the add form has data\n            var formData = {};\n            // Turn on flag to force to collect all data on the form\n            $.forceCollectData = true;\n\n            dialog.form.collectRenderValues(formData);\n\n            // Turn off flag\n            $.forceCollectData = false;\n\n            if (!bizagi.util.isMapEmpty(formData)) {\n              $.when(self.dataService.submitData(params)).done(function (response) {\n\n                // Set the previous added record to search grid form\n                function dataHasXpath(xpath) {\n                  var render = self.searchDialog.currentSearchForm.getRender(xpath);\n\n                  if (_typeof(render) == \"object\" && render != null) {\n                    return { \"found\": true, \"obj\": render };\n                  }\n\n                  return { \"found\": false, \"obj\": {} };\n                }\n\n                if (response && response.type === \"validationMessages\") {\n                  defer.resolve(response);\n                } else {\n                  for (var i in formData) {\n                    var mapping = dataHasXpath(i);\n                    if (mapping.found) {\n                      mapping.obj.setValue(formData[i]);\n                      self.setDisplayValueToControl(mapping.obj, dialog.form, i, formData);\n                    }\n                  }\n\n                  self.searchDialog.currentSearchForm.performSearch({\n                    allowFullSearch: properties.allowFullSearch,\n                    maxRecords: properties.maxRecords });\n\n\n                  if (dialog.form.properties.needsUserConfirmation) {\n                    $.when(bizagi.showConfirmationBox(dialog.form.properties.userConfirmationMessage, null, false)).done(function () {\n                      defer.resolve(data);\n                      dialog.closeDialogBox();\n                    }).fail(function () {\n                      defer.reject();\n                    });\n                  } else {\n                    defer.resolve(data);\n                    dialog.closeDialogBox();\n                  }\n                }\n              }).fail(function (jqXHR, type, message) {\n                if (type == \"parsererror\") {\n                  defer.resolve({\n                    type: \"error\",\n                    message: message.message });\n\n                } else {\n                  defer.reject(arguments);\n                }\n              });\n            } else {\n              // Form has not data\n              bizagi.showMessageBox(self.getResource(\"render-search-advanced-no-filters\"), \"\", \"error\");\n              defer.resolve();\n            }\n\n            return defer.promise();\n          },\n          close: function close() {\n            dialog.dialog('destroy');\n            dialog.remove();\n          } });\n\n        dialog.render({\n          idRender: properties.id,\n          idPageCache: properties.idPageCache,\n          requestedForm: \"addForm\",\n          guidEntity: properties.entity,\n          contextType: 'entity' }).\n        fail(function () {\n\n        });\n      } };\n\n\n    return { buttons: buttons };\n  },\n\n  /**\r\n      * Set display value by control type, when add new record\r\n      * @param renderControlSearchForm\r\n      * @param addForm\r\n      * @param xpath\r\n      * @param formData\r\n      */\n  setDisplayValueToControl: function setDisplayValueToControl(renderControlSearchForm, addForm, xpath, formData) {\n    if (renderControlSearchForm.properties.type === \"searchSuggest\") {\n      renderControlSearchForm.setDisplayValue(addForm.getRender(xpath).getDisplayValue());\n    } else {\n      renderControlSearchForm.setDisplayValue(formData[xpath]);\n    }\n  },\n\n  /**\r\n      *   Opens the search dialog\r\n      * @returns {}\r\n      */\n  showSearchDialog: function showSearchDialog() {\n    var self = this;\n    var properties = self.properties;\n    var extraButtons;\n    var contextType = properties.searchForms.length > 0 && properties.searchForms[0].type === \"searchForm\" ? \"metadata\" : \"entity\";\n\n    // Define add button\n    if (properties.allowNew) {\n      extraButtons = self.showAddRecordDialog();\n    }\n\n    // Show search dialog\n    self.searchDialog = new bizagi.rendering.dialog.search(self.dataService, self.renderFactory, properties.searchForms, {\n      allowFullSearch: properties.allowFullSearch,\n      maxRecords: properties.maxRecords,\n      orientation: properties.orientation || \"ltr\" },\n    extraButtons);\n\n    self.searchDialog.render({\n      idRender: properties.id,\n      xpath: properties.xpath,\n      xpathContext: properties.xpathContext,\n      idPageCache: properties.idPageCache,\n      contexttype: contextType,\n      orientation: properties.orientation || \"ltr\" }).\n    done(function (item) {\n      // Set data\n      self.setValue(item);\n\n      self.readyActionExecution().done(function () {\n        var form = self.getFormContainer();\n\n        if (!self.properties.submitOnChange) {\n          $.when(form.submitData()).done(function () {\n            self.refreshControl();\n          });\n        }\n      });\n\n    });\n  },\n\n  showAutocompleteLoading: function showAutocompleteLoading() {\n    $(\"i\", this.getControl()).addClass(\"ui-autocomplete-loading\");\n  },\n\n  hideAutocompleteLoading: function hideAutocompleteLoading() {\n    $(\"i\", this.getControl()).removeClass(\"ui-autocomplete-loading\");\n  },\n\n  /**\r\n      * Cleans current data\r\n      * @returns {}\r\n      */\n  cleanData: function cleanData() {\n    var self = this;\n    var control = self.getControl();\n    var value = { id: \"\" };\n\n    self.setDisplayValue(value);\n    self.setValue(value, false);\n\n    if (!self.properties.editable) {\n      $(control).html(\"<label class='readonly-control'></label>\");\n    }\n  },\n\n  changeRequired: function changeRequired(argument) {\n    this.properties.required = argument;\n    this.changeRequiredLabel(argument);\n  },\n\n  changeRequiredLabel: function changeRequiredLabel(argument) {\n    var control = this.getControl();\n\n    if (control.length > 0) {\n      if (this.getMode() !== \"execution\") {\n        if (bizagi.util.parseBoolean(argument) == true && this.properties.editable) {\n          control.addClass('control-required');\n        } else {\n          control.removeClass('control-required');\n        }\n      } else {\n        if (bizagi.util.parseBoolean(argument) == true && !this.hasValue() && this.properties.editable) {\n          control.addClass('control-required');\n        } else {\n          control.removeClass('control-required');\n        }\n      }\n    }\n\n    this.triggerRenderValidate();\n  },\n\n  changeCellRequired: function changeCellRequired(argument) {\n    this.changeRequired(argument);\n  },\n\n  /**\r\n      * Get valid id of control\r\n      * @param value\r\n      * @returns {number}\r\n      */\n  getValueId: function getValueId(value) {\n    var currentId = value.id || \"\";\n\n    // Check if it's a virtual entity\n    if (bizagi.util.isString(currentId) && /idEntity(.*)businessKey/ig.test(currentId)) return currentId;\n    return bizagi.util.isNumeric(currentId) ? currentId : value.value;\n  },\n\n  /**\r\n      * Check valid label of control\r\n      * @param value\r\n      */\n  getValueLabel: function getValueLabel(value) {\n    var displayValue = value.label;\n\n    if (!bizagi.util.isString(displayValue) && bizagi.util.isString(value.value)) {\n      displayValue = value.value;\n    }\n\n    return displayValue;\n  },\n\n  /**\r\n      * Check if dialog is preferences view\r\n      * @param container\r\n      * @returns {*|Array|boolean}\r\n      */\n  isPreferencesDialog: function isPreferencesDialog(container) {\n    var preferences = container && container.closest(\".bz-wp-userpreferences-main\") || [];\n    return preferences && preferences.length > 0;\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /**\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: Bizagi Desktop Render Form Link Extension\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: UI Forms Team\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This script will redefine the link render class to adjust to desktop devices\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\n// Extends from render Desktop base\nbizagi.rendering.desktop.render.extend(\"bizagi.rendering.desktop.formLink\", {\n  BA_ACTION_PARAMETER_PREFIX: \"p_\",\n  BA_CONTEXT_PARAMETER_PREFIX: \"h_\",\n  BA_PAGE_CACHE: \"pageCacheId\" },\nbizagi.rendering.formLink.prototype);\n// Extends itself\nbizagi.rendering.desktop.formLink.extend(\"bizagi.rendering.desktop.formLink\", {}, {\n  /**\r\n                                                                                     * Customize the render's behaviour to add handlers\r\n                                                                                     */\n  configureHandlers: function configureHandlers() {\n    this.attachEvents();\n  },\n\n  /**\r\n      * Customize the render's behaviour\r\n      * to add handlers when the control is readonly\r\n      */\n  configureHandlersReadOnly: function configureHandlersReadOnly() {\n    this.attachEvents();\n  },\n\n  /**\r\n      * Execute the rule action\r\n      * @param propertyName\r\n      * @returns {*}\r\n      */\n  executeRule: function executeRule(propertyName) {\n    var defer = new $.Deferred();\n\n    this.dataService.multiaction().getPropertyData({\n      url: this.properties.dataUrl,\n      xpath: this.properties.xpath,\n      idRender: this.properties.id,\n      xpathContext: this.properties.xpathContext,\n      idPageCache: this.properties.idPageCache,\n      property: propertyName }).\n    done(function (data) {\n      if (data.type === \"error\") {\n        // Workflow engine error\n        defer.reject(data);\n      } else if (data.messages != null) {\n        var message = data.messages[0];\n        defer.reject({ type: data.type, message: message });\n      } else {\n        defer.resolve(data);\n      }\n    }).fail(function (jqXHR, textStatus, errorThrown) {\n      defer.reject({ type: \"error\", message: jqXHR.message });\n    });\n    return defer.promise();\n  },\n\n  /**\r\n      * Validation of rule on exit\r\n      * @returns {*}\r\n      */\n  executeExitRule: function executeExitRule(data) {\n    var self = this;\n    var deferred = new $.Deferred();\n    if (self.properties.hasexitrule && !self.isThisFormReadOnly()) {\n      return self.saveFormLinkData(data).then(function () {\n        return self.executeRule(\"exitrule\");\n      });\n    } else {\n      deferred.resolve();\n    }\n    return deferred.promise();\n  },\n\n  /**\r\n      * Execution of rule before the formLink on enter\r\n      * @returns {*}\r\n      */\n  executeEntryRule: function executeEntryRule() {\n    var deferred = new $.Deferred();\n\n    if (this.properties.hasentryrule && !this.isThisFormReadOnly()) {\n      return this.executeRule(\"entryrule\");\n    } else {\n      deferred.resolve();\n    }\n\n    return deferred.promise();\n  },\n\n  /**\r\n      * Submits a link save request for the displayed form\r\n      * @param data\r\n      * @returns {*} Returns a deferred\r\n      */\n  submitSaveRequest: function submitSaveRequest(data) {\n    var self = this;\n    var properties = self.properties;\n\n    // Don't send request when the link is not editable\n    if (!properties.editable && !properties.value) {\n      return null;\n    }\n\n    var xpath = self.getFormLinkXpath();\n    var xpathContext = xpath;\n\n    if (typeof properties.xpathContext !== \"undefined\" && properties.xpathContext !== \"\") {\n      xpathContext = xpath ? properties.xpathContext + \".\" + xpath : properties.xpathContext;\n    }\n\n    return self.dataService.saveLinkForm({\n      url: properties.saveUrl,\n      idRender: properties.id,\n      xpathContext: xpathContext,\n      submitData: data });\n\n  },\n\n  /**\r\n      * Check if display is readonly\r\n      * @returns {undefined|boolean}\r\n      */\n  isThisFormReadOnly: function isThisFormReadOnly() {\n    var form = this.getFormContainer();\n    return form && form.properties.displayAsReadOnly;\n  },\n\n  /**\r\n      * Opens the link display form inside a dialog\r\n      */\n  openFormLink: function openFormLink() {\n    var self = this;\n    var properties = self.properties;\n    var form = self.getFormContainer();\n\n    if (typeof properties.canBeSaved == \"undefined\") {\n      properties.canBeSaved = true;\n    }\n\n    // When the link is not editable, then the form can't have save button\n    if (properties.editable === false || form.properties.displayAsReadOnly) {\n      properties.canBeSaved = false;\n    }\n\n    return $.when(form.properties.editable && !self.isThisFormReadOnly() ? form.submitData() : undefined).then(function () {\n      // Send edit request\n      return $.when(self.submitEditRequest()).then(function () {\n        return self.executeEntryRule().then(function () {\n          self.openFormLinkDialog();\n        }).fail(function (response) {\n          self.submitRollbackRequest();\n          self.handleFailRuleExecution(response);\n        });\n      }).fail(function () {\n        console.warn(\"EDITRELATION action Fails\");\n      });\n    });\n  },\n\n  /**\r\n      * Show dialog with new form\r\n      */\n  openFormLinkDialog: function openFormLinkDialog() {\n    var self = this;\n    var properties = self.properties;\n    var form = self.getFormContainer();\n\n    // Show dialog with new form after that\n    self.dialog = new bizagi.rendering.dialog.form(self.dataService, self.renderFactory, {\n      showSaveButton: properties.canBeSaved,\n      isPlanForm: properties.isPlanForm || false, //If this formLink is in a plan form\n      maximized: properties.maximized,\n      title: properties.displayName,\n      orientation: properties.orientation || \"ltr\",\n      onSave: function onSave(data) {\n        var def = new $.Deferred();\n        var deferredsToWait = null;\n\n        if (data && data.deferreds) {\n          deferredsToWait = $.when.apply($, data.deferreds);\n          delete data.deferreds;\n        }\n\n        $.when(deferredsToWait).then(function () {\n          self.handleOnSaveDialog(data).then(function (response) {\n            def.resolve(response);\n            form.refreshForm();\n          }).fail(function () {\n            def.reject();\n          });\n        });\n        return def.promise();\n      },\n      close: function close() {\n      } });\n\n\n    // Open dialog\n    self.dialog.render({\n      idRender: properties.id,\n      xpathContext: self.getFormLinkXpathContext(),\n      idPageCache: properties.idPageCache,\n      recordXPath: self.getFormLinkXpath(),\n      requestedForm: \"linkform\",\n      editable: properties.editable,\n      url: properties.editPage,\n      fromRender: self,\n      mainForm: self.getMainForm(self.getFormContainer()) }).\n    fail(function (data) {\n      // Sends a rollback request to delete checkpoints\n      $.when(self.submitRollbackRequest(data)).done(function () {\n        self.submitInvalidatePageCacheRequest(data);\n      });\n    });\n  },\n\n  /**\r\n      * Add an error message to the form\r\n      * @param response\r\n      */\n  handleFailRuleExecution: function handleFailRuleExecution(response) {\n    if (response.type === \"alertMessages\") {\n      bizagi.modalError &&\n      bizagi.modalError.show(response.message, \"workportal-general-word-information\", false);\n    } else {\n      var form = this.getFormContainer();\n      if (response.type === \"validationMessages\") {\n        form.validationController.showErrorMessage(response.message);\n      } else {\n        form.addErrorMessage(response.message);\n      }\n    }\n  },\n\n  /**\r\n      * Manage the action execution on save action\r\n      * @param data\r\n      * @returns {*}\r\n      */\n  handleOnSaveDialog: function handleOnSaveDialog(data) {\n    var self = this;\n\n    return self.executeExitRule(data).then(function () {\n      var def = new $.Deferred();\n      //If has exit rule, the data has been processed previously (executeExitRule()),\n      //then is only needed process the form and do a commit with the submitSaveRequest.\n      var submitData = self.properties.hasexitrule ? { idPageCache: data.idPageCache } : data;\n      self.submitSaveRequest(submitData).then(function (result) {\n        if (result.type === \"error\") {\n          // Workflow engine error\n          def.reject(result);\n        } else if (result.messages != null) {\n          var message = result.messages[0];\n          def.reject({ type: result.type, message: message });\n        } else {\n          def.resolve(result);\n        }\n      }).fail(function (jqXHR) {\n        def.reject({ type: \"error\", message: jqXHR.message });\n      });\n      return def.promise();\n    }).fail(function (response) {\n      self.handleFailRuleExecution(response);\n      return response;\n    });\n  },\n\n  /**\r\n      * Get context of FormLink\r\n      * @returns {string|*}\r\n      */\n  getFormLinkXpathContext: function getFormLinkXpathContext() {\n    var self = this;\n    var xpathContext = self.properties.xpathContext;\n    var parentXpathContext = self.getXpathContext();\n\n    if (parentXpathContext && xpathContext) {\n      if (xpathContext.indexOf(parentXpathContext) === 0) {\n        return xpathContext;\n      } else {\n        return parentXpathContext + \".\" + xpathContext;\n      }\n    } else {\n      return xpathContext;\n    }\n  },\n\n  /**\r\n      * Configure event handlers\r\n      */\n  attachEvents: function attachEvents() {\n    var self = this;\n    var $link = $(\".ui-bizagi-render-link\", self.getControl());\n\n    // Define dialog\n    self.dialog = null;\n\n    // Bind click event\n    $link.on(\"click\", function () {\n      // Open the link inside a dialog\n      var $buttonLink = $(this);\n      $buttonLink.prop(\"disabled\", true);\n\n      $.when(self.openFormLink()).always(function () {\n        $buttonLink.prop(\"disabled\", false);\n      });\n    });\n  },\n\n  /**\r\n      * Customizes render color\r\n      * @param color\r\n      */\n  changeColor: function changeColor(color) {\n    var self = this;\n    var control = self.getControl();\n    var label = self.getLabel();\n\n    if (control && label) {\n      if (color !== \"none\") {\n        self.getControl().find(\"a\").css(\"color\", color, \"!important\");\n\n        if (typeof self.getControl().find(\"a\").style == \"function\") {\n          self.getControl().find(\"a\").style(\"color\", color, \"!important\");\n        }\n      } else {\n        self.getControl().find(\"a\").css(\"color\", \"\");\n\n        if (typeof self.getControl().find(\"a\").style == \"function\") {\n          self.getControl().find(\"a\").style(\"color\", \"\");\n        }\n      }\n    }\n    self._super(color);\n  },\n\n  /**\r\n      * Customizes render font style\r\n      */\n  changeFontBold: function changeFontBold() {\n    var self = this;\n    var control = self.getControl().children();\n    var textFormat = self.properties.textFormat;\n\n    if (typeof textFormat.bold !== \"undefined\") {\n      if (_typeof(control) == \"object\" && control.length > 0) {\n        self.getElementsToStylize(control).css(\"font-weight\", \"bold\", \"!important\");\n      }\n    }\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /*\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: BizAgi Desktop Render Association Extension\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: Edward Morales\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This script will redefine the Association control\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\n// Extends from render Desktop base\nbizagi.rendering.desktop.render.extend(\"bizagi.rendering.desktop.association\", bizagi.rendering.render.base.prototype);\n// Extends from render Desktop base\nbizagi.rendering.desktop.association.extend(\"bizagi.rendering.desktop.association\", bizagi.rendering.association.prototype);\n// Extends itself\nbizagi.rendering.desktop.association.extend(\"bizagi.rendering.desktop.association\", {}, {\n\n  /*\r\n                                                                                          *   Template method to implement in each device to customize each render after processed\r\n                                                                                          */\n  postRender: function postRender() {\n    var self = this;\n\n  },\n\n  /*\r\n     *   Template method to implement in each device to customize the render's behaviour to add handlers\r\n     */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"association\");\n    var control = self.getControl();\n\n    // Call base\n    self._super();\n\n    // Set close event to element into self.properties.value\n    $(\"ol .deleteBotton\", control).bind(\"click\", function () {\n      self.closeElement($(this).parent(\"li\"));\n    });\n\n    // Apply accordion control\n    $(\".bz-render-association-accordion\", control).togglepanels({\n      header: \"> div > h3\",\n      autoHeight: false,\n      animated: false });\n\n\n    $.when(self.isRendered()).\n    done(function () {\n      var firstGroup = $(\".bz-render-association-accordion h3\", control).first();\n      firstGroup.click();\n    });\n\n\n    if (self.properties.allowFlip) {\n      // Bind event for flip botton\n      $(\".bz-render-association .flip-arrow\", control).bind(\"click\", function () {\n        $(control).empty();\n        // Define flipped\n        self.properties.flipped = !self.properties.flipped;\n\n        // Send flip data to server\n        self.properties.flipstate = self.properties.flipped;\n\n        self.dataService.getFlipAssociation(self.properties);\n\n        // Render template  \n        $.tmpl(template, self.properties, {\n          getColumnData: self.getColumnData,\n          getRightAssociation: self.getRightAssociation }).\n        appendTo(control);\n\n        self.internalPostRender();\n      });\n    }\n\n    if (self.properties.editable) {\n      $(\".bz-render-association bz-render-association-check-mask, .bz-render-association .bz-render-association-check\", control).bind(\"click\", function (e) {\n        e.stopPropagation();\n        var input = $(this);\n        var idLeft = $(this).parents(\"ol\").data(\"id\");\n        var idRight = $(this).data(\"id\");\n\n        if (input.prop(\"checked\")) {\n          // check element\n          input.prop(\"checked\", true);\n\n          // Add element to global value\n          self.addElement(idLeft, idRight);\n        } else {\n          // uncheck\n          input.prop(\"checked\", false);\n\n          // Remove from JSON\n          self.removeElement(idLeft, idRight);\n        }\n      });\n\n      $(\".bz-render-association .bz-render-association-left-container li\", control).bind(\"click\", function (e, ui) {\n        e.stopPropagation();\n\n        var input = $(this).find(\"input\").length > 0 ? $(this).find(\"input\") : $(this);\n        var mask = $(\".bz-render-association-check-mask\", $(this));\n        var idLeft = $(this).parent(\"ol\").data(\"id\");\n        var idRight = $(this).data(\"id\") || $(this).parents(\"li\").data(\"id\");\n\n        if (input.prop(\"checked\")) {\n          // uncheck\n          input.removeAttr(\"checked\");\n          mask.removeClass(\"checked\");\n          mask.addClass(\"unchecked\");\n\n          // Remove from JSON\n          self.removeElement(idLeft, idRight);\n\n        } else {\n          // check element\n          input.prop(\"checked\", true);\n          mask.removeClass(\"unchecked\");\n          mask.addClass(\"checked\");\n\n          // Add element to global value\n          self.addElement(idLeft, idRight);\n        }\n\n      });\n    }\n  },\n\n  /**\r\n     * Set Bind event to delete botton\r\n     */\n  setBindToClose: function setBindToClose(element) {\n    var self = this;\n    element.find(\".deleteBotton\").bind(\"click\", function () {\n      self.closeElement($(this).parent(\"li\"));\n    });\n  },\n\n  /**\r\n     * Execute close action\r\n     */\n  closeElement: function closeElement(element) {\n    var self = this;\n    var ol = element.parent(\"ol\");\n    // Remove from JSON\n    self.removeElement($(ol).data(\"id\"), element.data(\"id\"));\n\n    // Remove element\n    element.hide(\"highlight\", 1000, function () {\n      $(this).remove();\n    });\n  },\n\n\n\n  /*\r\n     *   Method to render non editable values\r\n     */\n  postRenderReadOnly: function postRenderReadOnly() {\n    var self = this;\n    var control = self.getControl();\n    var template = self.renderFactory.getTemplate(\"association\");\n\n    self.properties.classCss = \"read-only\";\n\n    // Make json base, create self.properties.formatJson\n    self.makeJsonBase();\n\n    // Render template  \n    $.tmpl(template, self.properties, {\n      getColumnData: self.getColumnData,\n      getRightAssociation: self.getRightAssociation,\n      getLeftName: self.getLeftName }).\n    appendTo(control);\n\n    // Apply accordion control\n    $(\".bz-render-association-accordion\", control).togglepanels({\n      header: \"> div > h3\",\n      autoHeight: false });\n\n\n    $.when(self.isRendered()).\n    done(function () {\n      var firstGroup = $(\".bz-render-association-accordion h3\", control).first();\n      firstGroup.click();\n    });\n\n    if (self.properties.allowFlip) {\n      // Bind event for flip botton\n      $(\".bz-render-association .flip-arrow\", control).bind(\"click\", function () {\n        $(control).empty();\n        // Define flipped\n        self.properties.flipped = !self.properties.flipped;\n\n        self.postRenderReadOnly();\n      });\n    }\n  },\n\n  /*\r\n     *   Add the render data to the given collection in order to send data to the server\r\n     */\n  collectData: function collectData(renderValues) {\n    var self = this;\n\n    // Call base method\n    self._super(renderValues);\n  },\n\n  /*\r\n     * Method to render non editable values\r\n     */\n  renderReadOnly: function renderReadOnly() {\n    var result = this.getValue();\n    return _typeof(result) === \"object\" ? \"\" : result;\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /*\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: BizAgi Render Query Search User\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: Jeison Borja\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This script will define desktop stuff for query search user renders\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Modified by: Andrs F. Muoz\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   - This control Implemments the search users plugin\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\n// Extends from render Desktop base\nbizagi.rendering.desktop.render.extend(\"bizagi.rendering.desktop.querySearchUser\", bizagi.rendering.querySearchUser.prototype);\n// Extends itself\nbizagi.rendering.desktop.querySearchUser.extend(\"bizagi.rendering.desktop.querySearchUser\", {}, {\n  /*\r\n                                                                                                   *   Update or init the element data\r\n                                                                                                   */\n  initializeData: function initializeData(data) {\n    // Call base\n    this._super(data);\n  },\n\n  /*\r\n      * Template method to implement in each device to customize each render after processed\r\n      */\n  postRender: function postRender() {\n    var self = this;\n    // Call base\n    self.input = $(\".ui-bizagi-render-text\", self.getControl());\n    // Call base\n    this._super();\n  },\n\n  /*\r\n      *   Sets the value in the rendered control\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    if (_typeof(value) === \"object\") {\n      if (_typeof(value[0]) === \"object\" && value[0].label !== undefined) {\n        value = value[0].label;\n      } else\n      {\n        value = value.label;\n      }\n    } else\n    {\n      value = '';\n    }\n\n    var self = this,\n    properties = self.properties;\n\n    // Call base\n    this._super(value);\n\n    // Set value in input\n    if (!bizagi.util.isEmpty(value) && properties.editable) {\n      self.input.val(value);\n    }\n  },\n\n  /*\r\n      * Template method to implement in each device to customize the render's behaviour to add handlers\r\n      */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    var control = self.getControl();\n\n    self.bindSearchUserPlugin(control);\n  },\n\n  /*\r\n      * Binds the search user plugin\r\n      */\n  bindSearchUserPlugin: function bindSearchUserPlugin(control) {\n    var self = this;\n    var idForm = self.getFormContainer().properties.id;\n\n    var options = {\n      title: self.getResource(\"render-plugin-search-users-title\"),\n      filters: [\"domain\", \"userName\", \"fullName\"],\n      displayNames: [\n      self.getResource(\"render-plugin-search-users-domain\"),\n      self.getResource(\"render-plugin-search-users-user-name\"),\n      self.getResource(\"render-plugin-search-users-full-name\")],\n      searchButtonName: self.getResource(\"render-plugin-search-users-search-button-name\"),\n      clearButtonName: self.getResource(\"render-plugin-search-users-clear-button-name\"),\n      valuesToSelect: [\"iduser\", \"username\"], //\"iduser\",\"username\",\"user\",\"domain\",\"email\"\n      renderFactoryReference: self.renderFactory,\n      getResourceReference: self.getResource.bind(self),\n      selectItem: function selectItem() {\n        var deferred = $.Deferred();\n        deferred.done(function (data) {\n          self.onItemSelectedSuccess(data);\n        }).fail(function (error) {\n          bizagi.log(error);\n        });\n        return deferred;\n      },\n      searchUsers: function searchUsers(filterData) {\n        return self.dataService.getUsersListFromQueryForm($.extend(filterData, { queryFormId: idForm }));\n      },\n      showError: function showError(error) {\n        bizagi.log(error);\n      },\n      showMessageBox: function showMessageBox(message) {\n        bizagi.showMessageBox(bizagi.localization.getResource(message), \"Bizagi\", \"warning\");\n      } };\n\n\n    opt = options;\n\n    $('#btn-get-user', control).bizagiSearchUser(options);\n  },\n  /*\r\n     * returns the opt var for unit testing\r\n     * */\n  getOptions: function getOptions() {\n    return opt;\n  },\n\n  onItemSelectedSuccess: function onItemSelectedSuccess(itemSelected) {\n    var self = this;\n    var control = self.getControl();\n    $(\".ui-bizagi-render-text\", control).val(itemSelected.username);\n    var item = {};\n    item.id = itemSelected.iduser;\n    item.label = itemSelected.username;\n    item.value = itemSelected.username;\n    self.setValue(item);\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /*\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: BizAgi Rendering\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: Diego Parra\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This script will process a rendering page by calling an ajax service to retrieve the model,\r\n                                                                                                                                                                                                                                                                                                                                                                                *       and then process it to create base layout, and then call the device render factory\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\n// Define BizAgi Rendering namespace\nbizagi.rendering = bizagi.rendering || {};\n\n/*\r\n                                            *   This class will define a method to process the page\r\n                                            *   1. Fetch the data\r\n                                            *   2. Call the device factory to appropriately render the content\r\n                                            */\n$.Class.extend(\"bizagi.rendering.facade\", {\n  form: undefined,\n  executionDeferred: new $.Deferred() },\n{\n  /*\r\n  *   Constructor\r\n  */\n  init: function init(params) {\n    params = params || {};\n\n    // Set observable element\n    this.observableElement = $({});\n\n    // Injection of Device, only for print version purpose\n    var device = params.device || \"\";\n\n    // Defines a device factory for all rendering\n    this.deviceFactory = new bizagi.rendering.device.factory();\n\n    // Creates a data service instance\n    this.dataService = new bizagi.render.services.service(params);\n\n    // Retrieves the render factory\n    this.renderFactory = this.deviceFactory.getRenderFactory(this.dataService, device);\n  },\n  getFactory: function getFactory() {\n    var self = this;\n    return {\n      deviceFactory: self.deviceFactory,\n      dataService: self.dataService,\n      renderFactory: self.renderFactory };\n\n  },\n  /*\r\n     *   Subscribe method\r\n     */\n  subscribe: function subscribe() {\n    this.observableElement.bind.apply(this.observableElement, arguments);\n  },\n  /*\r\n     *   Unsubscribe method\r\n     */\n  unsubscribe: function unsubscribe() {\n    this.observableElement.unbind.apply(this.observableElement, arguments);\n  },\n  /*\r\n     *   Publish method\r\n     */\n  publish: function publish() {\n    return this.observableElement.triggerHandler.apply(this.observableElement, arguments);\n  },\n  /*\r\n     *   This method will re-execute the process\r\n     */\n  update: function update(params) {\n    var self = this;\n\n    // Update rendering mode\n    if (params.mode)\n    self.mode = params.mode;\n\n    // Enable form buttons on desktop view\n    return self.execute($.extend({\n      canvas: self.canvas,\n      mode: self.mode },\n    params));\n  },\n  /*\r\n     *   Start point method to use in the main javascript pages\r\n     *   This method will process everything and attach the html directly to the dom\r\n     */\n  execute: function execute(params) {\n    var self = this;\n    var doc = this.ownerDocument;\n    var body = $(\"body\", doc);\n    params = params || {};\n\n    // Creates ready deferred\n    if (self.executionDeferred && self.executionDeferred.state) {\n      if (self.executionDeferred.state() == \"resolved\") {\n        self.executionDeferred = $.Deferred();\n      }\n    } else {\n      self.executionDeferred = $.Deferred();\n    }\n\n    // Performance measurement stuff\n    bizagi.chrono.initAndStart(\"rendering+data\", true);\n    bizagi.rendering.render.startOptimization();\n\n    // Override mode\n    if (typeof params.mode === \"undefined\") {\n      if (!bizagi.util.isEmpty(window.location.search)) {\n        var queryString = bizagi.util.getQueryString();\n        params.mode = queryString[\"mode\"];\n      }\n    }\n\n    // If the canvas is not given, we need to create one\n    var canvas = self.canvas = params.canvas = params.canvas || $(\"<div />\").appendTo(body);\n    self.mode = params.mode;\n\n    self.sendExecutingPostMessageWebparts();\n\n    self.process(params).done(function (form) {\n\n      // Clear canvas    \n      if (!params.refreshing) {\n        canvas.empty();\n      }\n\n      // Append content\n      canvas.append(form.container);\n\n      // Include process path\n      $(form.pathProcess).insertBefore(form.container);\n\n      // Keep reference in class\n      self.form = form;\n      self.form.setSize({ width: self.lastWidth, height: self.lastHeight });\n\n      // Save window size variables\n      var timeoutResize = setTimeout(function () {\n        self.lastWidth = $(window).width();\n        self.lastHeight = $(window).height();\n        if (window.self !== window.top)\n        self.resizeInPopUpHTML();\n        clearTimeout(timeoutResize);\n      }, 2000);\n\n      // Publish an event to check if the form has been set in the DOM\n      form.triggerHandler(\"ondomincluded\");\n\n      // Notify to module users that the form has been rendered\n      self.publish(\"rendering-formRendered\", { form: form });\n      //Configure triggers\n      self.configureOpenForm(form);\n\n      // Configure handlers\n      self.configureRefresh(form, canvas);\n      self.configureRouting(form, canvas);\n      self.configureRenderError(form, canvas);\n      self.configureResize(form);\n      self.configureGlobalHandlers(form);\n\n      // Check if it is a summary form\n      if (params.summaryForm) {\n        form.container.addClass(\"ui-bizagi-summary-form\");\n      }\n\n      // Ends main timer and log everything\n      bizagi.chrono.stopAndLog(\"rendering\");\n      bizagi.chrono.stopAndLog(\"rendering+data\");\n      bizagi.chrono.stopAndLog(\"submitForm\");\n      bizagi.chrono.stopAndLog(\"submitForm-ajax\");\n      bizagi.chrono.stopAndLog(\"waiting\");\n\n      // Resolves deferred\n      bizagi.rendering.render.stopOptimization();\n\n      // Expose public reference of form\n      if (bizagi.override.enableE2EInterface) {\n        self.Class.form = self.form;\n        self.Class.executionDeferred.resolve(self.form);\n      }\n\n      self.executionDeferred.resolve(self.form);\n\n    }).fail(function (message, errorType) {\n\n      $.when(self.renderFactory).\n      done(function (renderFactory) {\n\n        if (typeof message === \"undefined\" || message === \"\") {\n          message = bizagi.localization.getResource(\"render-error-unknown\");\n        }\n\n        var errorTemplate = renderFactory.getCommonTemplate(\"form-error\");\n        // Fill canvas\n        canvas.empty();\n        canvas.append($.tmpl(errorTemplate, {\n          message: message }));\n\n        self.publish(\"rendering-formRenderedError\", message);\n        self.canvas.triggerHandler(\"errorform\", message);\n        // Ends main timer and log everything\n        bizagi.chrono.stopAndLog(\"rendering\");\n        bizagi.chrono.stopAndLog(\"rendering+data\");\n\n        self.executionDeferred.reject();\n      });\n    });\n\n    return self.executionDeferred.promise();\n  },\n  /*\r\n     *   Returns the execution deferred to determine if the component is ready or not\r\n     */\n  ready: function ready() {\n    return this.executionDeferred.promise();\n  },\n  /*\r\n     *   Loads data and render factory in order to process the form\r\n     *   Returns a deferred to set callbacks when the process is done\r\n     */\n  process: function process(params) {\n    var self = this;\n    var defer = new $.Deferred();\n\n    // Call get form data service\n    var dataPromise = self.dataService.getFormData(params);\n\n    var canvas = self.canvas || params.canvas;\n\n    bizagi.showErrorAlertDialog = false;\n    // Set callback when requests have been done\n    $.when(dataPromise, self.renderFactory).\n    done(function (data, renderFactory) {\n      bizagi.showErrorAlertDialog = true;\n\n      // When there is no data trigger an event\n      if (bizagi.util.isEmpty(data)) {\n        self.publish(\"no-data-found\");\n        defer.fail();\n        return;\n      }\n\n      if (data && data.type == \"reload\") {\n        var form = self.form;\n        if (form) {\n          form.endLoading();\n          form.dispose();\n        }\n        // Trigger handler on canvas\n        canvas.triggerHandler(\"routing\", data);\n\n      } else if (data && data.type == \"suspended\") {\n        var errorTemplate = renderFactory.getTemplate(\"info-message\");\n        var message = bizagi.localization.getResource(\"render-case-suspended\");\n        var errorHtml = $.tmpl(errorTemplate, {\n          message: message });\n\n        // Remove loading icon from summary container\n        errorHtml.appendTo(canvas);\n\n        defer.fail();\n\n      } else if (data && data.type != \"error\") {\n        if (params.hasOwnProperty('printversion')) {\n          data = self.transformGridControl(data);\n          data.form.properties.editable = \"False\";\n        }\n\n        bizagi.chrono.initAndStart(\"rendering\");\n        params.type = data.form && data.form.properties.type || params.type;\n        var form = self.processForm(data.form, renderFactory, params);\n\n        // Resolve deferred\n        defer.resolve(form);\n\n      } else {\n        self.getFailDeferred(data, defer);\n      }\n    }).fail(function (errorMessage) {\n      self.getFailDeferred(errorMessage, defer);\n    });\n\n    return defer.promise();\n  },\n  /**\r\n      * In the print version widget when grid control was rendered, the main render has broken\r\n      * Is necesary change id of grid control to fixed these  problems\r\n      */\n  transformGridControl: function transformGridControl(data) {\n    var self = this;\n    if (data == null) {\n      return data;\n    }\n\n    if (data.hasOwnProperty('type') && data.type == 'grid') {\n      data.id = data.id + \"-print\";\n      data.allowAdd = \"False\";\n      data.allowDelete = \"False\";\n      data.allowEdit = \"False\";\n      data.allowGrouping = \"False\";\n      data.allowMore = \"False\";\n      data.allowSearch = \"False\";\n    } else {\n      $.each(data, function (key, value) {\n        if (_typeof(value) == 'object') {\n          data[key] = self.transformGridControl(data[key]);\n        }\n      });\n    }\n    return data;\n  },\n  /**\r\n      * Resolve deferred\r\n      */\n  getFailDeferred: function getFailDeferred(errorMessage, defer) {\n    var self = this;\n    var message = \"\";\n    var jsonErrorMessage = {};\n    try {\n      jsonErrorMessage = JSON.parse(errorMessage.responseText);\n    } catch (e) {\n      jsonErrorMessage = { message: errorMessage.responseText, errorType: \"ERRORUNKNOWN\" };\n    }\n\n\n    if (jsonErrorMessage.message) {\n      message += \"<br>Error Type: \" + jsonErrorMessage.errorType;\n      message += \"<br>Error Message: \" + jsonErrorMessage.message;\n    } else {\n      if (jsonErrorMessage.errorType == \"JSharpNotSupportedException\") {\n        message += \"<br>Error Message: \" + bizagi.localization.getResource(\"jsharp-required\");\n      }\n    }\n\n    // Error in metadata InvalidFormMetadata\n    if (jsonErrorMessage.errorType == 'ERRORUNKNOWN') {\n      defer.reject(message, jsonErrorMessage.errorType);\n    } else {\n\n      defer.reject(message);\n    }\n  },\n  /*\r\n     *   Process the form\r\n     */\n  processForm: function processForm(data, renderFactory, params) {\n    var form = renderFactory.getContainer($.extend(params, {\n      type: params.type || \"form\",\n      data: data }));\n\n\n    // Render the full form\n    form.render();\n\n    return form;\n  },\n  /*\r\n     *   Performs a resize\r\n     */\n  resize: function resize(args) {\n    var self = this;\n    if (self.form) {\n      self.form.trigger(\"renderresize\", args);\n    }\n  },\n  /*\r\n     *   Binds a refresh handler to detect when the whole form needs to fetch all data from server\r\n     */\n  configureRefresh: function configureRefresh(form, canvas) {\n    var self = this;\n\n    // Attach a refresh handler to recreate all the form\n    form.bind(\"refresh\", function (_, refreshParams) {\n\n      // Find the scroll top\n      var parent = form.container.parent();\n      parent = bizagi.util.scrollTop(parent);\n      var scrollTop = parent.scrollTop();\n\n      $(self.form).trigger(\"onRefreshStarted\");\n\n      //Dispose current form\n      form.dispose(refreshParams);\n      canvas.fastEmpty();\n      var canvasParent = canvas.parent();\n      if (canvasParent.find(\".ui-bizagi-button-container\").length > 0) {\n        canvasParent.find(\".ui-bizagi-button-container\").remove();\n      }\n\n      if (self.executionDeferred && self.executionDeferred.state) {\n        if (self.executionDeferred.state() == \"resolved\") {\n          self.executionDeferred = $.Deferred();\n        }\n      }\n\n      var formParams = self.form.getParams();\n      if (bizagi.util.isMobileDevice() && formParams.isOfflineForm === true) {\n        $.extend(refreshParams, {\n          isOfflineForm: true,\n          offlineType: formParams.offlineType,\n          isOpen: formParams.isOpen });\n\n        refreshParams.online = (\"\" + BIZAGI_ENVIRONMENT).toLowerCase() === \"debug\" ?\n        form.online : bizagi.util.isConnected();\n      }\n\n      // Re-execute process\n      $.when(self.execute($.extend(refreshParams, {\n        canvas: canvas,\n        refreshing: true,\n        idCase: formParams.idCase,\n        displayName: formParams.displayName }))).\n      done(function () {\n\n        // Restore scroll at same position\n        var timeoutTrigger = setTimeout(function () {\n          parent.scrollTop(scrollTop);\n          $(self.form).trigger(\"onRefreshFinished\");\n          clearTimeout(timeoutTrigger);\n        }, 100);\n      });\n\n      return self.executionDeferred.promise();\n    });\n  },\n  /*\r\n     *   Binds a resize hanlder to configure the resize behaviour\r\n     */\n  configureResize: function configureResize(form) {\n    var self = this;\n\n    // Attach resize handler\n    form.bind(\"renderresize\", function (_, args) {\n      args = args || {};\n      // Just allow one resize at a time\n      if (self.resizeTimeout)\n      return;\n      var resizeFn = function resizeFn() {\n        // Call resize event in form\n        var width = $(window).width();\n        var height = $(window).height();\n        if (args.forceResize || width != self.lastWidth) {\n\n          // Logging stuff\n          bizagi.chrono.initAndStart(\"resize\");\n\n          // Perform resize\n          form.resize({\n            width: width,\n            height: height });\n\n          self.lastWidth = width;\n          self.lastHeight = height;\n\n          // Logging stuff\n          bizagi.chrono.stopAndLog(\"resize\");\n          bizagi.chrono.log(\"resize\");\n        }\n\n        self.resizeTimeout = null;\n        clearTimeout(self.resizeTimeout);\n      };\n      self.resizeTimeout = setTimeout(resizeFn, 0);\n\n    });\n    self.resize();\n  },\n  /*\r\n     *   Binds a routing handler to detect when the workportal need to enroute the case\r\n     */\n  configureRouting: function configureRouting(form, canvas) {\n    // Attach a routing handler to notify to the caller\n    form.bind(\"routing\", function (context, triggerParams) {\n      //Dispose current form\n      form.dispose();\n\n      // Trigger handler on canvas\n      canvas.triggerHandler(\"routing\", triggerParams);\n    });\n  },\n  /*\r\n     *   Binds a generic handler that will be replicated to facade instantiators\r\n     */\n  configureGlobalHandlers: function configureGlobalHandlers(form) {\n    var self = this;\n\n    // Attach a routing handler to notify to the caller\n    form.bind(\"globalHandler\", function (_, args) {\n      // Trigger handler on canvas\n      return self.publish(args.eventType, args.data);\n    });\n  },\n  /*\r\n     *   Bind trigger for form opening\r\n     */\n  configureOpenForm: function configureOpenForm(form) {\n    $(document).trigger(\"openForm\", { form: form });\n  },\n\n  /*\r\n     * Binds error form handler to detect when the render element nop posible get information or error in server\r\n     */\n  configureRenderError: function configureRenderError(form, canvas) {\n    var self = this;\n\n    form.bind(\"formRenderingError\", function (event, errorMessage) {\n      $.when(self.renderFactory).\n      done(function (renderFactory) {\n        var message = \"<br>Error: \";\n\n        errorMessage = errorMessage.replace(/(\\r\\n|\\n|\\r)/gm, \"\");\n\n        var jsonErrorMessage = JSON.parse(errorMessage);\n        if (jsonErrorMessage.message) {\n          message += jsonErrorMessage.message;\n          message += \"<br>Error Type: \" + jsonErrorMessage.errorType;\n        }\n        var errorTemplate = renderFactory.getCommonTemplate(\"form-error\");\n        // Fill canvas\n        canvas.empty();\n        canvas.append($.tmpl(errorTemplate, {\n          message: message }));\n\n        //send the type error to differentiate between a form and an item for render\n        self.canvas.triggerHandler(\"errorform\", \"renderItemError\");\n        // Ends main timer and log everything\n        bizagi.chrono.stopAndLog(\"rendering+data\");\n        bizagi.chrono.stopAndLog(\"rendering\");\n      });\n    });\n  },\n\n  dispose: function dispose() {\n    var self = this;\n    if (self.form) {\n      self.form.dispose();\n    }\n    bizagi.util.dispose(self);\n  },\n\n  resizeInPopUpHTML: function resizeInPopUpHTML() {\n    if ($(\".activitiFormContainer\").length > 0 && bizagi.util.getQueryString().type != \"cases\") {\n      var heightActivitiFormContainer = $(\".activitiFormContainer\").height() || 0;\n      var renderForm = $(\".activitiFormContainer #ui-bizagi-webpart-render-container\");\n      var buttonContainer = $(\".ui-bizagi-button-container\", \".activitiFormContainer\");\n      var heightButtonContainer = buttonContainer.outerHeight() || 0;\n      var renderBehavior = bizagi.util.getQueryString().renderBehavior || \"\";\n      renderBehavior = renderBehavior.replace(\"#\", \"\");\n\n      if (renderBehavior == \"PopUp\") {\n        if (typeof self.postMessageSocket == \"undefined\") {\n          var heightCanvas = $(\".activitiFormContainer\").height() - 50 || 396;\n          $(\"#render-canvas\").height(heightCanvas);\n          $(\"#render-canvas\").css(\"overflowY\", \"scroll\");\n        } else $(\".activitiFormContainer\").height($(\".activitiFormContainer\").height() + $(\".ui-bizagi-button-container\").height() + 30);\n        $(\".ui-bizagi-button-container\").css(\"position\", \"absolute\");\n        $(\".ui-bizagi-button-container\").appendTo(\".activitiFormContainer\");\n        if ($(\".ui-bizagi-button-container\").length > 1) {\n          $(\".ui-bizagi-button-container:first\").hide();\n          renderForm.css(\"marginTop\", \"-17px\");\n        }\n      }\n      if (buttonContainer.length > 0) {\n        //display buttons\n        renderForm.height(heightActivitiFormContainer - 97 - heightButtonContainer);\n      }\n      if ($(\".ui-bizagi-button-container\").children().length == 0)\n      $(\"#render-canvas\").height($(\"#render-canvas\").height() + heightButtonContainer);else\n      {\n        buttonContainer.width(\"100%\");\n        buttonContainer.css(\"marginLeft\", 0);\n        buttonContainer.css(\"bottom\", 0);\n      }\n    } else if (bizagi.util.getQueryString().type == \"render\") {\n      $(\"html\").css(\"overflowX\", \"hidden\");\n      $(\"#render\").height() <= window.innerHeight + 5 ? $(\"html\").css(\"overflowY\", \"hidden\") :\n      $(\"html\").css(\"overflowY\", \"scroll\");\n      $(\".ui-widget-overlay\").height(650);\n    }\n  },\n\n  sendExecutingPostMessageWebparts: function sendExecutingPostMessageWebparts() {\n    if (bizagi && bizagi.iframeCommunicator) {\n      bizagi.iframeCommunicator.trigger(\"executing-rendering\", {});\n    }\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /**\r\n                                                                                                                                                                                                                                                                                                                                                                                * Expose interface to access to render controls and their properties\r\n                                                                                                                                                                                                                                                                                                                                                                                *\r\n                                                                                                                                                                                                                                                                                                                                                                                * @author: Edward Morales\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\n\n/**\r\n                                                                                                                                                                                                                                                                                                                                                                                    * Locators\r\n                                                                                                                                                                                                                                                                                                                                                                                    *\r\n                                                                                                                                                                                                                                                                                                                                                                                    * bizagi.e2e.getRenderById(id)\r\n                                                                                                                                                                                                                                                                                                                                                                                    * bizagi.e2e.getRenderByType(type)\r\n                                                                                                                                                                                                                                                                                                                                                                                    * bizagi.e2e.getRenderByXpath(xpath)\r\n                                                                                                                                                                                                                                                                                                                                                                                    * bizagi.e2e.getRenderByDisplayName(displayName)\r\n                                                                                                                                                                                                                                                                                                                                                                                    * bizagi.e2e.getRenderByValue(value)\r\n                                                                                                                                                                                                                                                                                                                                                                                    * bizagi.e2e.getNotificationPanel()\r\n                                                                                                                                                                                                                                                                                                                                                                                    * bizagi.e2e.getFormButtonByCaption(caption)\r\n                                                                                                                                                                                                                                                                                                                                                                                    * bizagi.e2e.getFormButtons()\r\n                                                                                                                                                                                                                                                                                                                                                                                    */\n\n/**\r\n                                                                                                                                                                                                                                                                                                                                                                                        * Standar interface for each control\r\n                                                                                                                                                                                                                                                                                                                                                                                        * -----------------------------------\r\n                                                                                                                                                                                                                                                                                                                                                                                        * locator.isRequired()\r\n                                                                                                                                                                                                                                                                                                                                                                                        * locator.getControl()\r\n                                                                                                                                                                                                                                                                                                                                                                                        * locator.getDisplayNameObj()\r\n                                                                                                                                                                                                                                                                                                                                                                                        * locator.getDisplayNameText()\r\n                                                                                                                                                                                                                                                                                                                                                                                        * locator.getValue()\r\n                                                                                                                                                                                                                                                                                                                                                                                        * locator.getDisplayValueText()\r\n                                                                                                                                                                                                                                                                                                                                                                                        * locator.getFocus()\r\n                                                                                                                                                                                                                                                                                                                                                                                        * locator.find(element)\r\n                                                                                                                                                                                                                                                                                                                                                                                        * locator.getType()\r\n                                                                                                                                                                                                                                                                                                                                                                                        * locator.setControlValue(value)\r\n                                                                                                                                                                                                                                                                                                                                                                                        * locator.setControlDisplayValue(value)\r\n                                                                                                                                                                                                                                                                                                                                                                                        *\r\n                                                                                                                                                                                                                                                                                                                                                                                        *\r\n                                                                                                                                                                                                                                                                                                                                                                                        * Interface for Grid\r\n                                                                                                                                                                                                                                                                                                                                                                                        * -----------------------------------\r\n                                                                                                                                                                                                                                                                                                                                                                                        * locator.getColumnByXpath(xpath)\r\n                                                                                                                                                                                                                                                                                                                                                                                        * locator.getColumnByName(name)\r\n                                                                                                                                                                                                                                                                                                                                                                                        * locator.getRecord(id)\r\n                                                                                                                                                                                                                                                                                                                                                                                        * locator.getNewRows()\r\n                                                                                                                                                                                                                                                                                                                                                                                        * locator.getCell(id, xpath)\r\n                                                                                                                                                                                                                                                                                                                                                                                        * locator.getGridButtonsPanel()\r\n                                                                                                                                                                                                                                                                                                                                                                                        * locator.getGridPaginationPanel()\r\n                                                                                                                                                                                                                                                                                                                                                                                        * locator.getGridHeaderPanel()\r\n                                                                                                                                                                                                                                                                                                                                                                                        *\r\n                                                                                                                                                                                                                                                                                                                                                                                        *\r\n                                                                                                                                                                                                                                                                                                                                                                                        * Interface for Upload and ColumnUpload\r\n                                                                                                                                                                                                                                                                                                                                                                                        * -----------------------------------\r\n                                                                                                                                                                                                                                                                                                                                                                                        * locator.getFiles()\r\n                                                                                                                                                                                                                                                                                                                                                                                        * locator.hasFile()\r\n                                                                                                                                                                                                                                                                                                                                                                                        *\r\n                                                                                                                                                                                                                                                                                                                                                                                        *\r\n                                                                                                                                                                                                                                                                                                                                                                                        * Interface for Boolean and ColumnBoolean\r\n                                                                                                                                                                                                                                                                                                                                                                                        * -----------------------------------\r\n                                                                                                                                                                                                                                                                                                                                                                                        * locator.checkByName(name)\r\n                                                                                                                                                                                                                                                                                                                                                                                        * locator.isChecked(name)\r\n                                                                                                                                                                                                                                                                                                                                                                                        *\r\n                                                                                                                                                                                                                                                                                                                                                                                        *\r\n                                                                                                                                                                                                                                                                                                                                                                                        * Interface for Combo and ColumnCombo\r\n                                                                                                                                                                                                                                                                                                                                                                                        * -----------------------------------\r\n                                                                                                                                                                                                                                                                                                                                                                                        * locator.getComboArrow()\r\n                                                                                                                                                                                                                                                                                                                                                                                        * locator.getComboOptions()\r\n                                                                                                                                                                                                                                                                                                                                                                                        *\r\n                                                                                                                                                                                                                                                                                                                                                                                        */\n\n\n/**\r\n                                                                                                                                                                                                                                                                                                                                                                                            *  Class that allow extend default functionality by kind of control\r\n                                                                                                                                                                                                                                                                                                                                                                                            */\nvar renderInterface = function () {\n  var self = this;\n\n  /**\r\n                    * Public interface for each render control\r\n                    * This method is merged with control and has\r\n                    * access to all properties of them\r\n                    */\n  var controlInterface = function () {\n    return {\n      isRequired: function isRequired() {\n        var self = this;\n        return self.properties.required;\n      },\n      getControl: function getControl() {\n        var self = this;\n        return self.control;\n      },\n      getDisplayNameObj: function getDisplayNameObj() {\n        var self = this;\n        return self.getLabel();\n      },\n      getDisplayNameText: function getDisplayNameText() {\n        var self = this;\n        return self.properties.displayName;\n      },\n      getValue: function getValue() {\n        var self = this;\n        return self.value;\n      },\n      getDisplayValueText: function getDisplayValueText() {\n        var self = this;\n        return self.getDisplayValue();\n      },\n      getFocus: function getFocus() {\n        var self = this;\n        return self.focus() ? true : false;\n      },\n      find: function find(elm) {\n        var self = this;\n        var control = self.getControl();\n        return control.find(elm);\n      },\n      getType: function getType() {\n        var self = this;\n        return self.properties.type;\n      },\n      setControlValue: function setControlValue(value) {\n        var self = this;\n        self.setValue(value);\n      },\n      setControlDisplayValue: function setControlDisplayValue(value) {\n        var self = this;\n        self.setDisplayValue(value);\n      } };\n\n  }();\n\n  /**\r\n        * Public interface for grid control\r\n        */\n  var gridControlInterface = function () {\n    return {\n      getColumnByXpath: function getColumnByXpath(xpath) {\n        var self = this;\n        return typeof xpath === \"undefined\" ? {} : this.getColumn(xpath);\n      },\n      getColumnByName: function getColumnByName(name) {\n        var self = this;\n        var resultColumn = {};\n        $.each(self.columns, function (key, column) {\n          if (column.properties.displayName === name) {\n            resultColumn = column;\n          }\n        });\n\n        return resultColumn;\n      },\n      getRecord: function getRecord(id) {\n        var self = this;\n        return $('[data-business-key=\"' + id + '\"]', self.getControl());\n      },\n      getNewRows: function getNewRows() {\n        var self = this;\n        return $('[data-new-row=\"' + true + '\"]', self.getControl());\n      },\n      getCell: function getCell(id, xpath) {\n        var self = this;\n        var control = self.getControlCell(id, xpath);\n\n        // Extend control with public interfacecontrol\n        control = renderInterface.extendControlInterface(control);\n        return control;\n      },\n      getGridButtonsPanel: function getGridButtonsPanel() {\n        var self = this;\n        return $('[data-bizagi-component=\"buttons\"]', self.getControl());\n      },\n      getGridPaginationPanel: function getGridPaginationPanel() {\n        var self = this;\n        return $('[data-bizagi-component=\"pager\"]', self.getControl());\n      },\n      getGridHeaderPanel: function getGridHeaderPanel() {\n        var self = this;\n        return $('[data-bizagi-component=\"columns\"]', self.getControl());\n      } };\n\n  }();\n\n  var uploadInterface = function () {\n    return {\n      getFiles: function getFiles() {\n        var self = this;\n        var listOfFiles = [];\n        if (self.files) {\n          $.each(self.files, function (key, value) {\n            listOfFiles.push(value[1]);\n          });\n        }\n        return listOfFiles;\n      },\n      hasFile: function hasFile(fileName) {\n        var self = this;\n        var files = self.getFiles();\n        var result = false;\n        if (files.length > 0) {\n          $.each(files, function (key, value) {\n            if (value.indexOf(fileName) >= 0) {\n              result = true;\n            }\n          });\n        }\n        return result;\n      } };\n\n  }();\n\n  var booleanInterface = function () {\n    return {\n      checkByName: function checkByName(name) {\n        var self = this;\n        var control = self.getControl();\n        var label = $(\".ui-bizagi-render-boolean-yesno label\", control);\n        $.each(label, function (key, value) {\n          if (value && $.trim($(value).text()) == name) {\n            value.click();\n          }\n        });\n      },\n      isChecked: function isChecked(name) {\n        var self = this;\n        var control = self.getControl();\n        var label = $(\"label.ui-radio-state-checked\", control);\n        var checked = false;\n\n        if (label.length > 0) {\n          $.each(label, function (key, value) {\n            if (value && $.trim($(value).text()) == name) {\n              checked = true;\n            }\n          });\n        }\n        return checked;\n      } };\n\n  }();\n\n\n  var comboInterface = function () {\n    return {\n      getComboArrow: function getComboArrow() {\n        var self = this;\n        return $(\".ui-selectmenu-btn\", self.getControl());\n      },\n\n      getComboOptions: function getComboOptions() {\n        var self = this;\n        return $(\".ui-select-dropdown ul\", self.getControl().parent());\n      } };\n\n  }();\n\n\n  self._getInterface = function (control) {\n    var interfaz;\n    switch (control) {\n      case \"generic\":\n        interfaz = controlInterface;\n        break;\n      case \"grid\":\n        interfaz = gridControlInterface;\n        break;\n      case \"upload\":\n        interfaz = uploadInterface;\n        break;\n      case \"boolean\":\n        interfaz = booleanInterface;\n        break;\n      case \"combo\":\n        interfaz = comboInterface;\n        break;}\n\n\n    return interfaz;\n  };\n\n  self._getExtendedInterfaceByControl = function (control) {\n    var type = typeof control !== \"undefined\" && control.properties && control.properties.type ? control.properties.type : \"\";\n    var extendedInterface;\n    var objEspecificInterface = [];\n\n    var extendObject = function extendObject(control, objToExtend) {\n      if (objToExtend.length > 0) {\n        $.each(objToExtend, function (keyToExtend, valueToExtend) {\n          if (_typeof(valueToExtend) === \"object\") {\n            $.each(valueToExtend, function (key, value) {\n              control[key] = value;\n            });\n          }\n        });\n      }\n      return control;\n    };\n\n    switch (type) {\n      case \"grid\":\n        objEspecificInterface = [self._getInterface(\"generic\"), self._getInterface(\"grid\")];\n        extendedInterface = extendObject(control, objEspecificInterface);\n        break;\n      case \"upload\":\n      case \"columnUpload\":\n        objEspecificInterface = [self._getInterface(\"generic\"), self._getInterface(\"upload\")];\n        extendedInterface = extendObject(control, objEspecificInterface);\n        break;\n      case \"boolean\":\n      case \"columnBoolean\":\n        objEspecificInterface = [self._getInterface(\"generic\"), self._getInterface(\"boolean\")];\n        extendedInterface = extendObject(control, objEspecificInterface);\n        break;\n      case \"combo\":\n      case \"columnCombo\":\n        objEspecificInterface = [self._getInterface(\"generic\"), self._getInterface(\"combo\")];\n        extendedInterface = extendObject(control, objEspecificInterface);\n        break;\n      default:\n        objEspecificInterface = [self._getInterface(\"generic\")];\n        extendedInterface = extendObject(control, objEspecificInterface);\n        break;}\n\n\n    return extendedInterface;\n  };\n\n  self._extendControlInterface = function (control) {\n    var result;\n    if (!control) {\n      return;\n    }\n\n    if (control.length && control.length > 1) {\n      result = [];\n      $.each(control, function (key, value) {\n        result.push(self._getExtendedInterfaceByControl(value));\n      });\n    } else if (control.length && control.length == 1) {\n      result = self._getExtendedInterfaceByControl(control[0]);\n    } else {\n      result = self._getExtendedInterfaceByControl(control);\n    }\n\n    // Set auto focus\n    typeof result.focus === \"function\" ? result.focus() : \"\";\n\n    return result;\n  };\n\n  // Public methods\n  return {\n    getInterface: self._getInterface,\n    extendControlInterface: self._extendControlInterface };\n\n}();\n\n\n/**\r\n      * Public access interface that provide locators and new functionalities\r\n      */\nbizagi.e2e = function () {\n  var self = this;\n  var dialogIsOpen = false;\n\n  var setScopeDefinition = function setScopeDefinition() {\n    if (!dialogIsOpen) {\n      self.form = bizagi.rendering.facade.form;\n      self.formReady = bizagi.rendering.facade.executionDeferred.promise();\n\n      if (!self.form) {\n        $.when(self.formReady).done(function (deferredForm) {\n          self.form = deferredForm;\n        }).fail(function (m) {\n          console.log(\"Error: \" + m.toString());\n        });\n      }\n    }\n  };\n\n  bizagi.rendering.dialog.form.extend(\"bizagi.rendering.dialog.form\", {}, {\n    renderDialogBox: function renderDialogBox(dialogBox, params) {\n      $.when(this._super(dialogBox, params)).done(function (form) {\n        dialogIsOpen = true;\n        self.form = form;\n      });\n    },\n    closeDialogBox: function closeDialogBox() {\n      dialogIsOpen = false;\n      this._super();\n    } });\n\n\n  bizagi.rendering.searchForm.extend(\"bizagi.rendering.searchForm\", {}, {\n    configureHandlers: function configureHandlers(container) {\n      $.when(this._super(container)).done(function (form) {\n        dialogIsOpen = true;\n        self.form = form.getFormContainer();\n      });\n    },\n    closeDialogBox: function closeDialogBox() {\n      dialogIsOpen = false;\n      this._super();\n    } });\n\n\n  bizagi.rendering.dialog.search.extend(\"bizagi.rendering.dialog.search\", {}, {\n    closeDialogBox: function closeDialogBox() {\n      dialogIsOpen = false;\n      this._super();\n    } });\n\n\n\n  /**\r\n           * Get all controls within form\r\n           * @returns {{rendersById: (*|bizagi.rendering.form.rendersById), rendersByXpath: (*|bizagi.rendering.form.rendersByXpath), rendersByType: (*|bizagi.rendering.form.rendersByType)}}\r\n           * @private\r\n           */\n  self._getAllrenders = function () {\n    var result = {\n      rendersById: self.form.rendersById,\n      rendersByXpath: self.form.rendersByXpath,\n      rendersByType: self.form.rendersByType };\n\n\n    return result;\n  };\n\n  self._findRenderByProperty = function (property, propertyvalue) {\n    var result = [];\n    var renders = self._getAllrenders() || {};\n\n    if (property) {\n      $.each(renders.rendersById, function (controlId, controlClass) {\n        if (controlClass.properties.hasOwnProperty(property)) {\n          if (controlClass.properties[property] == propertyvalue) {\n            result.push(controlClass);\n          }\n        }\n      });\n    }\n    return result;\n  };\n\n  /**\r\n      * Find controls by id\r\n      * @param id\r\n      * @returns {*}\r\n      */\n  self.getRenderById = function (id) {\n    setScopeDefinition();\n    id = id || \"\";\n    return renderInterface.extendControlInterface(self.form.getRenderById(id));\n  };\n\n  /**\r\n      * Find controls by type\r\n      * @param type\r\n      * @returns {*}\r\n      */\n  self.getRenderByType = function (type) {\n    setScopeDefinition();\n    type = type || \"\";\n    return renderInterface.extendControlInterface(self.form.getRenderByType(type));\n  };\n\n  /**\r\n      * Find controls by Xpath\r\n      * @param xpath\r\n      * @returns {*}\r\n      */\n  self.getRenderByXpath = function (xpath) {\n    setScopeDefinition();\n    xpath = xpath || \"\";\n    return renderInterface.extendControlInterface(self.form.getRender(xpath));\n  };\n\n\n  self.getRenderByDisplayName = function (displayName) {\n    setScopeDefinition();\n    return renderInterface.extendControlInterface(self._findRenderByProperty(\"displayName\", displayName));\n  };\n\n  self.getRenderByValue = function (value) {\n    setScopeDefinition();\n    return renderInterface.extendControlInterface(self._findRenderByProperty(\"value\", value));\n  };\n\n  self.getNotificationPanel = function () {\n    setScopeDefinition();\n    return function () {\n      var getControl = function getControl() {\n        return $(\".ui-bizagi-notifications-container-bottom .ui-bizagi-notifications-content\");\n      };\n\n      var getMessages = function getMessages() {\n        var response = [];\n        var messagesHtml = $(\".ui-bizagi-notification-item\", getControl());\n\n        if (messagesHtml.length > 0) {\n          $.each(messagesHtml, function (key, value) {\n            response.push($.trim($(value).find(\"label\").text()));\n          });\n        }\n        return response;\n      };\n      var hasMessage = function hasMessage(message) {\n        var messages = getMessages();\n        var result = false;\n        if (message !== \"\" && messages.length > 0) {\n          $.each(messages, function (key, value) {\n            if (value.indexOf(message) >= 0) {\n              result = true;\n            }\n          });\n        }\n        return result;\n      };\n\n      return {\n        getMessages: getMessages,\n        hasMessage: hasMessage };\n\n    }();\n  };\n\n  self.getFormButtonByCaption = function (caption) {\n    setScopeDefinition();\n    var buttons = self.form.getButtons();\n    var render = $(\"<button>\");\n\n    // Find button by display name\n    $.each(buttons, function (key, value) {\n      if (value.value === caption) {\n        render = value;\n      }\n    });\n\n    return render;\n  };\n\n  self.getFormButtons = function () {\n    setScopeDefinition();\n    return self.form.getButtons();\n  };\n\n  /**\r\n      * Check if render is on the DOM\r\n      * @returns {boolean}\r\n      */\n  self.ready = function () {\n    return bizagi.rendering.facade.executionDeferred.state() === \"resolved\" ? true : false;\n  };\n\n  return {\n    getRenderById: self.getRenderById,\n    getRenderByType: self.getRenderByType,\n    getRenderByXpath: self.getRenderByXpath,\n    getRenderByDisplayName: self.getRenderByDisplayName,\n    getRenderByValue: self.getRenderByValue,\n    getNotificationPanel: self.getNotificationPanel(),\n    getFormButtonByCaption: self.getFormButtonByCaption,\n    getFormButtons: self.getFormButtons,\n    ready: self.ready };\n\n}();","/*\r\n*   Name: BizAgi Desktop querycombo\r\n*   Author: Ivan Ricardo Taimal Narvaez\r\n*   Comments:\r\n*   -\r\n*/\n\nbizagi.rendering.desktop.combo.extend(\"bizagi.rendering.desktop.queryCombo\", {}, {\n  /*\r\n                                                                                   *  configure Handlers for check, column included in the response\r\n                                                                                   */});","/**\r\n *   Name: Bizagi Desktop queryCascadingCombo\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -\r\n */\n\nbizagi.rendering.desktop.cascadingCombo.extend(\"bizagi.rendering.desktop.queryCascadingCombo\", {}, {\n  /*\r\n                                                                                                      *  configure Handlers for check, column included in the response\r\n                                                                                                      */\n  initializeData: function initializeData(data) {\n    var self = this;\n\n    // Call base\n    this._super(data);\n    self.properties.contexttype = self.properties.contexttype || \"metadata\";\n  },\n\n  postRender: function postRender() {\n    var self = this;\n\n    if (self.parentCombo !== null && self.isDependant) {\n      self.parentCombo.isRendered().done(function () {\n        $(\".ui-bizagi-render-control-included\", self.parentCombo.getRenderedElement()).hide();\n      });\n    }\n\n    this._super();\n  },\n\n  /*\r\n      *   Template method to implement in each children to customize each control\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var mode = self.getMode();\n\n    // Check if this is a dependant combo\n    var parentCombo = self.parentCombo = self.getParentCombo();\n    if (parentCombo !== null) {\n      if (parentCombo.properties.type === \"queryCascadingCombo\") {\n        self.isDependant = true;\n      }\n    }\n\n    // Apply element plugin, set a flag to avoid dependant combo ajax requests\n    self.initializingCascadingCombo = true;\n\n    // Call base\n    var result = this._super();\n\n    if (mode !== \"execution\") {\n      self.initializingCascadingCombo = false;\n    }\n\n    return result;\n  },\n\n  /*\r\n      *   Bind the combos to create the cascading feature\r\n      */\n  bindDependantCombo: function bindDependantCombo(dependantCombo) {\n    var self = this;\n    var properties = self.properties;\n\n    // Check it is a cascading combo\n    if (dependantCombo.properties.type === \"queryCascadingCombo\") {\n\n      // Append to dependant combos\n      self.dependants.push(dependantCombo);\n\n      // When this combo is selected we need to make the other combo to auto fill with an extra filter\n      dependantCombo.onChangeFunction = function (event, item, isInitialValue) {\n        // Fill items for next combo\n\n        self.refreshDependantCombo(dependantCombo, item.id, false, isInitialValue);\n\n        //if initial value is true, it prevents deleting the next combo\n        if (!isInitialValue) {\n          // Clean next inputs\n          dependantCombo.cleanInput();\n        }\n      };\n\n      if (!self.isEventBinded(\"select\")) {\n        self.bind(\"select\", dependantCombo.onChangeFunction);\n      }\n\n      // After the event binding has been made, we need to fill the new dependant render if this instance (the parent) has a value\n      if (!bizagi.util.isEmpty(self.getValue())) {\n\n        // Auto fill dependant items with current value\n        if (properties.hasLocalData) {\n          self.refreshDependantCombo(dependantCombo, self.getValue().id);\n        }\n\n      }\n    }\n  },\n  /*\r\n      *  Method to determine if the render value can be sent to search\r\n      */\n  canBeSentQueryForm: function canBeSentQueryForm() {\n    return true;\n  } });","/**\r\n *   Name: Bizagi Render CollectionNavigator\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for collection navigator renders\r\n */\n\n// Extends from render Desktop base\nbizagi.rendering.desktop.render.extend(\"bizagi.rendering.desktop.collectionnavigator\", bizagi.rendering.collectionnavigator.prototype);\n// Extends itself\nbizagi.rendering.desktop.collectionnavigator.extend(\"bizagi.rendering.desktop.collectionnavigator\", {}, {\n  /*\r\n                                                                                                          *   Update or init the element data\r\n                                                                                                          */\n  initializeData: function initializeData(data) {\n    data.properties.displayType = \"value\";\n\n    // Call base\n    this._super(data);\n  },\n  /*\r\n     *   Template method to implement in each device to customize each render after processed\r\n     */\n  postRender: function postRender() {\n    var self = this;\n\n    // Call base\n    self._super();\n\n    var control = self.getControl();\n    self.navigationControls = control.find(\".bz-collectionnavigator-controls\");\n    self.canvas = self.getCanvas();\n    $('[title]', control).tooltip();\n  },\n  /*\r\n     *   Template method to implement in each device to customize the render's behaviour to add handlers\r\n     */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n\n    // Call base\n    self._super();\n\n    $.when(self.isRendered()).done(function () {\n      if (self.hasData())\n      self.showRow(self.getFirstRow());\n\n      self.refreshControls();\n    });\n\n    var controls = self.navigationControls.find(\".bz-navigation-controls\");\n    controls.on(\"click\", \"span\", function (ev) {\n      var target = ev.currentTarget;\n\n      if (!$(target).hasClass(\"ui-state-disabled\")) {\n        self.paginationActions(target);\n      }\n\n    });\n\n    var currentRow = self.navigationControls.find(\".bz-navigation-current-row\");\n    currentRow.on(\"change\", function (ev) {\n\n      if (self.isValidRow()) {\n        var value = $(this).val();\n\n        $.when(self.saveChanges()).done(function () {\n          self.updateRow(value);\n        });\n      }\n\n    });\n\n    // Add Form\n    var add = self.navigationControls.find(\".bz-collectionnavigator-addform\");\n    add.on(\"click\", function (ev) {\n      var target = ev.currentTarget;\n\n      if (!$(target).hasClass(\"ui-state-disabled\")) {\n        if (self.hasData() && self.isValidRow()) {\n          $.when(self.saveChanges()).done(function () {\n            self.addRow();\n          });\n        } else if (!self.hasData()) {\n          self.addRow();\n        }\n      }\n\n    });\n\n    // Edit Form\n    var edit = self.navigationControls.find(\".bz-collectionnavigator-editform\");\n    edit.on(\"click\", function (ev) {\n      var target = ev.currentTarget;\n\n      if (!$(target).hasClass(\"ui-state-disabled\")) {\n        if (self.isValidRow()) {\n          $.when(self.saveChanges()).done(function () {\n            self.editRow();\n          });\n        }\n      }\n\n    });\n\n    // Detail Form\n    var detail = self.navigationControls.find(\".bz-collectionnavigator-detailform\");\n    detail.on(\"click\", function (ev) {\n      var target = ev.currentTarget;\n\n      if (!$(target).hasClass(\"ui-state-disabled\")) {\n        if (self.isValidRow()) {\n          $.when(self.saveChanges()).done(function () {\n            self.showDetailForm();\n          });\n        }\n      }\n\n    });\n\n    //Save Form\n    var save = self.navigationControls.find(\".bz-collectionnavigator-save\");\n    save.on(\"click\", function (ev) {\n      var target = ev.currentTarget;\n\n      if (!$(target).hasClass(\"ui-state-disabled\")) {\n        if (self.isValidRow()) {\n          var properties = self.properties;\n          var refreshForm = !properties.inlineEdit && self.isTherePendingInlineRow();\n\n          $.when(self.saveChanges()).done(function () {\n            self.showRow(self.getRow());\n          });\n        }\n      }\n\n    });\n\n    //Cancel\n    var cancel = self.navigationControls.find(\".bz-collectionnavigator-cancel\");\n    cancel.on(\"click\", function (ev) {\n      var target = ev.currentTarget;\n\n      if (!$(target).hasClass(\"ui-state-disabled\")) {\n        self.cancelChanges();\n      }\n    });\n\n    self.configureButtonsForm();\n  },\n\n  /*\r\n     *   Template method to implement in each device to customize each render after processed in read-only mode\r\n     */\n  postRenderReadOnly: function postRenderReadOnly() {\n    this.postRender();\n    this.configureHandlers();\n  },\n\n  /*\r\n     * Each time an action is executed, is necessary to refresh \r\n     * the navigation controls\r\n     */\n  refreshControls: function refreshControls() {\n    var self = this;\n\n    self.refreshForwardButtons();\n    self.refreshBackButtons();\n    self.refreshPagination();\n    self.refreshTotal();\n    self.refreshRemoveAction();\n  },\n  /*\r\n     * Enabled o disabled a control (next or last)\r\n     */\n  refreshForwardButtons: function refreshForwardButtons() {\n    var self = this;\n    var nextControl = self.getInnerControl(\"navigation\", \"next\");\n    var lastControl = self.getInnerControl(\"navigation\", \"last\");\n    var keys = self.keys.length;\n\n    if (self.hasData() && self.pointer < keys - 1) {\n      nextControl.removeClass(\"ui-state-disabled\");\n      lastControl.removeClass(\"ui-state-disabled\");\n    } else {\n      nextControl.addClass(\"ui-state-disabled\");\n      lastControl.addClass(\"ui-state-disabled\");\n    }\n  },\n  /*\r\n     * Enabled o disabled a control (previous or first)\r\n     */\n  refreshBackButtons: function refreshBackButtons() {\n    var self = this;\n    var previousControl = self.getInnerControl(\"navigation\", \"previous\");\n    var firstControl = self.getInnerControl(\"navigation\", \"first\");\n\n    if (self.hasData() && self.pointer > 0) {\n      previousControl.removeClass(\"ui-state-disabled\");\n      firstControl.removeClass(\"ui-state-disabled\");\n    } else {\n      previousControl.addClass(\"ui-state-disabled\");\n      firstControl.addClass(\"ui-state-disabled\");\n    }\n  },\n\n  /*\r\n     * Enabled o disabled the remove button\r\n     */\n  refreshRemoveAction: function refreshRemoveAction() {\n    var self = this;\n    var properties = self.properties;\n\n    if (properties.editable) {\n      var removeButton = self.getInnerControl(\"navigation\", \"remove\");\n\n      if (self.hasData() && !self.isTherePendingInlineRow()) {\n        removeButton.removeClass(\"ui-state-disabled\");\n      } else {\n        removeButton.addClass(\"ui-state-disabled\");\n      }\n    }\n  },\n\n  /*\r\n     * Updates the current row\r\n     */\n  refreshPagination: function refreshPagination() {\n    var self = this;\n\n    var control = self.getInnerControl(\"navigation\", \"current\");\n    var keys = self.keys.length;\n\n    if (keys > 0) {\n      control.val(self.pointer + 1);\n      control.removeClass(\"ui-state-disabled\");\n    } else {\n      control.val(self.pointer);\n      control.addClass(\"ui-state-disabled\");\n    }\n  },\n\n  /*\r\n     * Updates the total of rows in collection\r\n     */\n  refreshTotal: function refreshTotal() {\n    var self = this;\n\n    self.totalRows = self.getTotalRows();\n    var total = self.getInnerControl(\"navigation\", \"total\");\n    total.text(self.totalRows);\n  },\n\n  /*\r\n     * Enabled o disabled the save and cancel actions\r\n     */\n  refreshActions: function refreshActions(eSave, eCancel) {\n    var self = this;\n    var save = self.navigationControls.find(\".bz-collectionnavigator-save\");\n    var cancel = self.navigationControls.find(\".bz-collectionnavigator-cancel\");\n\n    eSave ? save.removeClass(\"ui-state-disabled\") : save.addClass(\"ui-state-disabled\");\n    eCancel ? cancel.removeClass(\"ui-state-disabled\") : cancel.addClass(\"ui-state-disabled\");\n  },\n\n  /*\r\n     * Gets the specific control\r\n     */\n  getInnerControl: function getInnerControl(section, action) {\n    var self = this;\n    var properties = self.properties;\n    var group = $(\"div[data-navigation-id='\" + properties.id + \"']\");\n\n    if (section) {\n      if (action === \"next\") {\n        return group.find(\".bz-navigation-next\");\n      }\n      if (action === \"last\") {\n        return group.find(\".bz-navigation-last\");\n      }\n      if (action === \"previous\") {\n        return group.find(\".bz-navigation-previous\");\n      }\n      if (action === \"first\") {\n        return group.find(\".bz-navigation-first\");\n      }\n      if (action === \"current\") {\n        return group.find(\".bz-navigation-current-row\");\n      }\n      if (action === \"total\") {\n        return group.find(\".bz-navigation-total-rows\");\n      }\n      if (action === \"add\") {\n        return group.find(\".bz-navigation-add\");\n      }\n      if (action === \"remove\") {\n        return group.find(\".bz-navigation-remove\");\n      }\n      if (action === \"save\") {\n        return group.find(\".bz-collectionnavigator-save\");\n      }\n      if (action === \"cancel\") {\n        return group.find(\".bz-collectionnavigator-cancel\");\n      }\n    }\n\n    return undefined;\n  },\n\n  /*\r\n     * Shows the navigation form, with the data specified in the row[id]\r\n     */\n  showRow: function showRow(id, setFocus) {\n    var self = this;\n    var properties = self.properties;\n\n    if (id) {\n      var data = {\n        id: id,\n        requestedForm: \"navigationForm\",\n        url: self.properties.navigationPage,\n        editable: properties.editable ? properties.inlineEdit : false };\n\n\n      $.when(self.renderForm(self.getParameters(data))).done(function (form) {\n        self.loadForm(form, setFocus);\n        self.refreshControls();\n      });\n    }\n  },\n  /*\r\n     * Shows the navigation form, with the data specified in the row[id]\r\n     */\n  showDetailForm: function showDetailForm() {\n    var self = this;\n    var properties = self.properties;\n\n    // Show dialog with new form after that\n    var dialog = new bizagi.rendering.dialog.form(self.dataService, self.renderFactory, {\n      title: properties.detailLabel || bizagi.localization.getResource(\"render-grid-details-form\"),\n      showSaveButton: false,\n      cancelButtonLabel: bizagi.localization.getResource(\"render-form-dialog-box-close\") });\n\n\n    dialog.render(self.getParameters({\n      id: self.getRow(),\n      requestedForm: \"detailForm\",\n      url: properties.editPage,\n      editable: false }));\n\n  },\n  /*\r\n     * Shows the navigation form inline, with the data specified in the row[id]\r\n     */\n  showInlineRow: function showInlineRow(id, setFocus) {\n    var self = this;\n    var data = {\n      id: id,\n      requestedForm: \"navigationForm\",\n      url: self.properties.navigationPage,\n      editable: true };\n\n\n    self.startLoading();\n\n    $.when(self.renderForm(self.getParameters(data))).done(function (data) {\n      self.loadForm(data, setFocus);\n      self.refreshControls();\n    }).always(function () {\n      self.endLoading();\n    });\n  },\n\n  /*\r\n     * Updates the navigation form, with the data specified in the row[id]\r\n     */\n  updateRow: function updateRow(id) {\n    var self = this;\n\n    if ($.isNumeric(id) && self.isValidKey(id)) {\n      id = parseInt(id);\n      self.setPointer(id);\n      self.showRow(self.getRow());\n      self.refreshControls();\n    } else {\n      self.refreshPagination();\n    }\n  },\n  /*\r\n     * Returns true if the key is within the range. Otherwise it returns false\r\n     */\n  isValidKey: function isValidKey(key) {\n    if (key <= 0) return false;\n    if (key > this.keys.length) return false;\n    return true;\n  },\n  /*\r\n     * Renders the navigation form\r\n     */\n  renderForm: function renderForm(params) {\n    var self = this;\n    var defer = new $.Deferred();\n    var form = self.getFormContainer();\n\n    form.useOrSetLoaderDeferred();\n    form.appendWaitForLoader({ promise: defer.promise() });\n\n    // Load template and data\n    $.when(self.dataService.getFormData(params)).pipe(function (data) {\n\n      // Apply contextType\n      data.form.contextType = params.contextType;\n\n      //delete buttons\n      delete data.form.buttons;\n\n      // Apply editable param\n      if (params.editable == false) {\n        data.form.properties.editable = false;\n      }\n\n      // The transitions don't apply in collection navigator\n      self.removeTransitions(data.form);\n      var formContainer = self.getFormContainer();\n\n      // Render dialog template\n      self.form = self.renderFactory.getContainer({\n        type: \"form\",\n        data: data.form,\n        canvas: formContainer.params.canvas || formContainer.container,\n        focus: params.focus || false,\n        selectedTabs: params.selectedTabs,\n        isRefresh: params.isRefresh || false });\n\n\n      self.form.render();\n\n      formContainer.rendersById = $.extend(formContainer.rendersById, self.form.rendersById);\n\n      // Publish an event to check if the form has been set in the DOM\n      self.form.triggerHandler(\"ondomincluded\", self.getFormContainer());\n\n      // Attach a refresh handler to recreate all the form\n      self.form.bind(\"refresh\", function (_, refreshParams) {\n        self.showRow(self.getRow());\n      });\n\n      self.bindRenderChangeEvent(self.form.children);\n\n      defer.resolve(self.form);\n    });\n\n    return defer.promise();\n  },\n\n  /*\r\n     * This method binds the render change event of each control \r\n     * at the current form\r\n     */\n  bindRenderChangeEvent: function bindRenderChangeEvent(children) {\n    var self = this;\n    children = children || [];\n\n    for (var i = 0, l = children.length; i < l; i++) {\n      var child = children[i];\n      var type = child.getElementType();\n      var changes;\n\n      if (type == bizagi.rendering.element.ELEMENT_TYPE_RENDER) {\n        child.bind(\"renderchange\", function (ev, params) {\n          params = params || {};\n          var render = params.render;\n          var changed = params.changed;\n          var isEmpty;\n\n          if (render && (render.properties.type == \"collectionnavigator\" || render.properties.type == \"grid\")) {\n            isEmpty = false;\n            if (!changed && render.properties.type == \"grid\") {\n              changes = [];\n              var temp = $.forceCollectData;\n              $.forceCollectData = false;\n              self.form.hasChanged(changes);\n              $.forceCollectData = temp;\n              isEmpty = changes.length === 0 ? true : false;\n            }\n          } else {\n            changes = [];\n            self.form.hasChanged(changes);\n            isEmpty = changes.length === 0 ? true : false;\n          }\n\n          self.refreshActions(!isEmpty, !isEmpty);\n          self.triggerRenderChange();\n        });\n      } else if (type == bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) {\n        self.bindRenderChangeEvent(child.children);\n      }\n    }\n  },\n\n  /*\r\n     * Returns the elements html (canvas), where will be located the navigation form \r\n     */\n  getCanvas: function getCanvas() {\n    var control = this.getControl();\n    return control.find(\".bz-collectionnavigator-navigationform\");\n  },\n  /*\r\n     * Return true if the data of navigation form is valid\r\n     */\n  isValidRow: function isValidRow() {\n    if (!this.form) return false;\n    return this.form.validationController.performValidations();\n  },\n\n  /*\r\n     * Saves changes in navigation form\r\n     */\n  saveChanges: function saveChanges() {\n    var self = this;\n    var data = self.getChanges();\n    var arrayCollectionNavigator = [];\n    var hasChildren = false;\n\n    if (self.form) {\n      var children = self.getChildCollectionNavigator(self.form.children, arrayCollectionNavigator);\n      hasChildren = children.length > 0 ? true : false;\n\n      return $.when(function () {\n        if (hasChildren) {\n          return self.saveChangesChildren(arrayCollectionNavigator);\n        }\n      }).then(function () {\n        return self.submitSaveRequest(self.getRow(), data).\n        pipe(function (response) {\n          response = response || {};\n          if (response.type == \"success\") {\n            // Mark data collected as original values\n            self.form.collectRenderValuesForSubmit();\n            self.removeInlineAddRecord();\n            self.refreshControls();\n            self.refreshActions(false, false);\n\n            return self.fetchData();\n          } else {\n            if (response.type == \"validationMessages\") {\n              var form = self.getFormContainer();\n              var message = response.messages.join(\" \");\n              form.failHandler({ message: message });\n            }\n            return false;\n          }\n        });\n      });\n    } else {\n      self.removeInlineAddRecord();\n      self.refreshControls();\n      self.refreshActions(false, false);\n    }\n\n    return true;\n  },\n  /*\r\n     * Cancel changes\r\n     */\n  cancelChanges: function cancelChanges() {\n    var self = this;\n    self.refreshActions(false, false);\n\n    if (self.inlineAddRecords.length > 0) {\n      self.removeKey();\n      self.inlineAddRecords.pop();\n      self.submitRollbackRequest({ idPageCache: self.form.properties.idPageCache });\n      self.refreshTotal();\n      self.refreshControls();\n\n      if (self.getTotalRows() == 0) {\n        self.removeNavigationForm();\n        self.drawPreview();\n      } else {\n        self.showRow(self.getRow());\n      }\n    } else {\n      var data = self.getChanges();\n      if (!$.isEmptyObject(data)) {\n        self.showRow(self.getRow());\n      }\n    }\n\n  },\n  /*\r\n     * Gets changes of current navigation form\r\n     */\n  getChanges: function getChanges() {\n    var self = this;\n    var data = {};\n\n    if (self.form) {\n      self.form.collectRenderValues(data);\n    }\n\n    $.each(data, function (key, value) {\n      var renders = self.form.getRenders(key);\n      $.each(renders, function (i, render) {\n        render.updateOriginalValue();\n      });\n    });\n\n    return data;\n  },\n  /*\r\n     *  Adds a row inline to collection\r\n     */\n  addInlineRow: function addInlineRow() {\n    var self = this;\n    var setFocus = true;\n\n    // Send add request\n    $.when(self.submitAddRequest()).\n    done(function (newid) {\n      self.refreshActions(true, true);\n      self.inlineAddRecords.push(newid);\n      self.addKey(newid);\n      self.showInlineRow(self.getLastRow(), setFocus);\n      self.refreshTotal();\n      self.refreshControls();\n    });\n  },\n  /*\r\n     *  Adds a row to collection\r\n     */\n  addRow: function addRow() {\n    var self = this;\n    var properties = self.properties;\n\n    // Send add request\n    $.when(self.submitAddRequest()).done(function (newid) {\n\n      // Show dialog with new form after that\n      var dialog = new bizagi.rendering.dialog.form(self.dataService, self.renderFactory, {\n        title: properties.addLabel,\n        orientation: properties.orientation || \"ltr\",\n        onSave: function onSave(data) {\n          if (properties.contextType) {\n            data[self.dataService.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = properties.contextType;\n          }\n          return self.submitSaveRequest(newid, data);\n        } });\n\n\n      dialog.render(self.getParameters({\n        id: newid,\n        requestedForm: \"addForm\",\n        url: properties.addPage,\n        editable: true })).\n      done(function () {\n        // Set loading status\n        self.startLoading();\n\n        $.when(self.fetchData()).done(function () {\n          self.showRow(self.getLastRow());\n        });\n\n        self.endLoading();\n      }).fail(function (error) {\n        $.when(self.submitRollbackRequest(error)).done(function () {\n          self.submitInvalidatePageCacheRequest(error);\n        });\n      });\n    });\n  },\n  /*\r\n     * Edits a row in the collection with Form\r\n     */\n  editRow: function editRow() {\n    var self = this;\n    var properties = self.properties;\n    var id = self.getRow();\n\n    // Send edit request\n    $.when(self.submitEditRequest(id)).done(function () {\n\n      // Show dialog with new form\n      var dialog = new bizagi.rendering.dialog.form(self.dataService, self.renderFactory, {\n        title: properties.editLabel,\n        orientation: properties.orientation || \"ltr\",\n        onSave: function onSave(data) {\n          return self.submitSaveRequest(id, data);\n        } });\n\n\n      dialog.render(self.getParameters({\n        id: id,\n        requestedForm: \"editForm\",\n        url: self.properties.editPage,\n        editable: true })).\n      done(function () {\n        $.when(self.fetchData()).done(function () {\n          self.showRow(self.getRow());\n        });\n      }).fail(function (error) {\n        $.when(self.submitRollbackRequest(error)).done(function () {\n          self.submitInvalidatePageCacheRequest(error);\n        });\n      });\n    });\n  },\n  /*\r\n     * removes current row\r\n     */\n  removeRow: function removeRow() {\n    var self = this;\n    var id = self.getRow();\n\n    bizagi.showConfirmationBox(this.getResource(\"render-grid-delete-confirmation\")).done(function () {\n      // Do a collection record deletion\n      $.when(self.submitDeleteRequest(id)).done(function (data) {\n        data = data || {};\n        if (data.type == \"success\") {\n          // Set loading status\n          self.startLoading();\n          self.removeKey();\n          self.refreshTotal();\n          self.refreshControls();\n          if (self.getTotalRows() == 0) {\n            self.removeNavigationForm();\n            self.drawPreview();\n          } else {\n            self.showRow(self.getRow());\n          }\n\n          self.endLoading();\n        }\n      });\n    });\n  },\n\n  /*\r\n     * Removes of local list the rows added inline\r\n     */\n  removeInlineAddRecord: function removeInlineAddRecord() {\n    var self = this;\n\n    if (self.isTherePendingInlineRow()) {\n      self.inlineAddRecords.pop();\n    }\n  },\n  /*\r\n     * Loads form in canvas\r\n     */\n  loadForm: function loadForm(form, setFocus) {\n    var self = this;\n\n    self.removeNavigationForm();\n    var buttons = form.container.find(\".ui-bizagi-button-container\");\n    buttons.remove();\n    self.addNavigationForm(form.container);\n\n    if (setFocus) {\n      self.focusFirstControl(form);\n    }\n  },\n  /*\r\n     * Method to process button actions in the form\r\n     */\n  configureButtonsForm: function configureButtonsForm() {\n    var self = this;\n    var form = self.getFormContainer();\n\n    form.processButton = function (buttonProperties) {\n      // Deferred is defined in order to avoid a permanent overlay after submitting with custom buttons\n      var deferred = $.Deferred();\n      var valid = true;\n\n      if (!self.form || buttonProperties.action === \"\") {\n        form.originalProcessButton.apply(form, [buttonProperties]).done(function () {\n          deferred.resolve();\n        }).fail(function () {\n          deferred.reject();\n        });\n      } else if (buttonProperties.action === \"save\") {\n        $.when(self.saveChanges()).done(function () {\n          form.originalProcessButton.apply(form, [buttonProperties]).done(function () {\n            deferred.resolve();\n          }).fail(function () {\n            deferred.reject();\n          });\n        }).fail(function (error) {\n          self.processFailMessage(error);\n          deferred.resolve();\n        });\n      } else if ([\"next\", \"createnewcase\"].includes(buttonProperties.action)) {\n        // Process to save form\n        valid = bizagi.util.parseBoolean(buttonProperties.validate) ? self.isValidRow() : true;\n        if (valid) {\n          $.when(self.saveChanges()).done(function () {\n            form.originalProcessButton.apply(form, [buttonProperties]).done(function () {\n              deferred.resolve();\n            }).fail(function () {\n              deferred.reject();\n            });\n          }).fail(function (error) {\n            self.processFailMessage(error);\n            deferred.resolve();\n          });\n        } else {\n          form.originalProcessButton.apply(form, [buttonProperties]).done(function () {\n            deferred.resolve();\n          }).fail(function () {\n            deferred.reject();\n          });\n        }\n      } else if (buttonProperties.action === \"nextWithoutValidations\") {\n        $.when(self.saveChanges()).done(function () {\n          form.originalProcessButton.apply(form, [buttonProperties]).done(function () {\n            deferred.resolve();\n          }).fail(function () {\n            deferred.reject();\n          });\n        }).fail(function (error) {\n          self.processFailMessage(error);\n          deferred.resolve();\n        });\n      } else if (buttonProperties.action === \"validate\") {\n        form.originalProcessButton.apply(form, [buttonProperties]).done(function () {\n          deferred.resolve();\n        }).fail(function () {\n          deferred.reject();\n        });\n      }\n\n      return deferred.promise();\n    };\n  },\n  /*\r\n     * Removes navigation form\r\n     */\n  removeNavigationForm: function removeNavigationForm() {\n    this.canvas.children().remove();\n  },\n  /*\r\n     * Adds navigation form\r\n     */\n  addNavigationForm: function addNavigationForm(content) {\n    this.canvas.append(content);\n  },\n  /*\r\n     *   Method to fetch data from the server and then update the data\r\n     */\n  fetchData: function fetchData() {\n    var self = this;\n    var defer = new $.Deferred();\n    var form = self.getFormContainer();\n\n    form.useOrSetLoaderDeferred();\n    form.appendWaitForLoader({ promise: defer.promise() });\n\n    // Start loading to avoid multiple calls to the server\n    self.startLoading();\n    $.when(self.getRemoteData()).done(function (data) {\n      self.endLoading();\n      if (self.disposed) return;\n      if (data) {\n        self.refresh(data);\n        defer.resolve();\n      } else {\n        defer.reject();\n      }\n    });\n\n    return defer.promise();\n  },\n  /*\r\n     * Verify if data is different the filter\r\n     */\n  refresh: function refresh(data) {\n    var self = this;\n    var keys = self.getKeys(data.rows);\n    self.keys = keys;\n\n    if (keys.indexOf(self.getRow()) == -1) {\n      self.totalRows = keys.length;\n      self.pointer = self.pointer > 0 ? self.pointer - 1 : self.pointer;\n      if (self.totalRows == 0) {\n        self.removeNavigationForm();\n        self.drawPreview();\n        self.refreshControls();\n      }\n    }\n  },\n  /*\r\n     * Sets the focus to the first control\r\n     */\n  focusFirstControl: function focusFirstControl(form, time) {\n    // Configures effect\n    var effect = function effect() {\n      var defaultControl = $(\"input:visible, select:visible, option:visible, textarea:visible\", form.container).not(\".ui-bizagi-render-date,.ui-bizagi-render-search\");\n      if (defaultControl.length > 0) {\n        // Focus control\n        var innerControl = defaultControl[0];\n        try {\n          innerControl.focus();\n        } catch (e) {\n        }\n      }\n    };\n\n    // Run effect\n    if (time > 0) {\n      var timeoutEffect = setTimeout(function () {\n        effect();\n        clearTimeout(timeoutEffect);\n      }, time);\n    } else {\n      effect();\n    }\n  },\n  /*\r\n     * Return array with children of type collectionnavigator\r\n     */\n  getChildCollectionNavigator: function getChildCollectionNavigator(children, arrayCollectionNavigator) {\n    var self = this;\n    children = children || [];\n\n    for (var i = 0, l = children.length; i < l; i++) {\n      var child = children[i];\n      var type = child.getElementType();\n      if (type == bizagi.rendering.element.ELEMENT_TYPE_RENDER) {\n        if (child.properties.type == \"collectionnavigator\" || child.properties.type == \"grid\") {\n          arrayCollectionNavigator.push(child);\n        }\n      } else if (type == bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) {\n        self.getChildCollectionNavigator(child.children, arrayCollectionNavigator);\n      }\n    }\n    return arrayCollectionNavigator;\n  },\n  /*\r\n     *save changes for children of type collectionnavigator\r\n     */\n  saveChangesChildren: function saveChangesChildren(arrayCollectionNavigator) {\n    var promises = [];\n    for (var i = 0, l = arrayCollectionNavigator.length; i < l; i++) {\n      if (arrayCollectionNavigator[i].properties.type == \"collectionnavigator\") {\n        var promise = arrayCollectionNavigator[i].saveChanges();\n        promises.push(promise);\n      }\n    }\n    return $.when.apply($, promises);\n  },\n\n  drawControls: function drawControls(html) {\n    var self = this;\n    var properties = self.properties;\n\n    html = $(html);\n    var controls = self.collectionControls = $(\".bz-collectionnavigator-controls\", html);\n\n    self.drawForms(controls);\n    self.drawControl(controls);\n\n    if (properties.editable)\n    self.drawActions(controls);\n\n    return html[0].outerHTML;\n  },\n  /*  render several actions in the navigation palete\r\n     *  ex. save, cancel \r\n     */\n  drawActions: function drawActions(controls) {\n    var self = this;\n    var actions = $(\".actions-group\", controls);\n\n    var template = self.renderFactory.getTemplate(\"collectionnavigator-actions\");\n    var html = $.tmpl(template);\n    html.appendTo(actions);\n\n    return controls;\n  },\n\n  /*\r\n     * Render navigation controls (next, previous, last, first. etc )\r\n     */\n  drawControl: function drawControl(controls) {\n    var self = this;\n    var properties = self.properties;\n    var editable = properties.editable;\n    var control = $(\".control-group\", controls);\n\n    var template = self.renderFactory.getTemplate(\"collectionnavigator-control\");\n    var html = $.tmpl(template, {\n      inlineAdd: editable && properties.inlineAdd,\n      allowDelete: editable && properties.allowDelete,\n      total: self.totalRows });\n\n\n    html.appendTo(control);\n\n    return controls;\n  },\n\n  /*\r\n     * Draw forms options (add form, edit form, navigation form)\r\n     */\n  drawForms: function drawForms(controls) {\n    var self = this;\n    var properties = self.properties;\n    var withAddForm = properties.withAddForm;\n    var withEditForm = properties.withEditForm;\n    var allowDetail = properties.allowDetail;\n    var html = null;\n    var forms = $(\".bz-navigation-group\", controls);\n\n    if (properties.editable && (withAddForm || withEditForm || allowDetail)) {\n      forms.addClass(\"group-visible\");\n\n      if (withAddForm) {\n        html = self.getActionsTemplate(\"add\");\n        html.appendTo(forms);\n      }\n\n      if (withEditForm) {\n        html = self.getActionsTemplate(\"edit\");\n        html.appendTo(forms);\n      }\n\n      if (allowDetail) {\n        html = self.getActionsTemplate(\"details\");\n        html.appendTo(forms);\n      }\n\n    } else {\n      forms.addClass(\"group-no-visible\");\n    }\n\n\n    return controls;\n  },\n\n  /*\r\n     * This method removes the transitions\r\n     */\n  removeTransitions: function removeTransitions(data) {\n    data = data || {};\n\n    if (data.transitions) {\n      delete data.transitions;\n    }\n  },\n\n  collectData: function collectData(renderValues) {\n    var saveDeferred;\n    if (this.isRendered()) {\n      saveDeferred = this.saveChanges();\n\n      if (saveDeferred !== true) {\n        renderValues.deferreds = renderValues.deferreds || [];\n        renderValues.deferreds.push(saveDeferred);\n      }\n    }\n  },\n\n  getActionsTemplate: function getActionsTemplate(type) {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"collectionnavigator-form-button\");\n    var html = null;\n\n    switch (type) {\n      case \"add\":\n        html = $.tmpl(template, {\n          actionClass: \"bz-collectionnavigator-addform\",\n          buttonClass: \"ui-icon bz-collectionnavigator-addform-icon\",\n          title: bizagi.localization.getResource(\"render-collection-navigator-add-form\") });\n\n        break;\n      case \"edit\":\n        html = $.tmpl(template, {\n          actionClass: \"bz-collectionnavigator-editform\",\n          buttonClass: \"ui-icon bz-collectionnavigator-editform-icon\",\n          title: bizagi.localization.getResource(\"render-collection-navigator-edit-form\") });\n\n        break;\n      case \"details\":\n        html = $.tmpl(template, {\n          actionClass: \"bz-collectionnavigator-detailform\",\n          buttonClass: \"ui-icon bz-collectionnavigator-detailform-icon\",\n          title: bizagi.localization.getResource(\"render-collection-navigator-details-form\") });\n\n        break;}\n\n\n    return html;\n  },\n\n  /**\r\n      * Perform actions for the pagination grid\r\n      * @param contextPagination\r\n      */\n  paginationActions: function paginationActions(contextPagination) {\n    var self = this;\n\n    if ($(contextPagination).hasClass(\"bz-navigation-next\") && self.isValidRow()) {\n      $.when(self.saveChanges()).done(function () {\n        self.showRow(self.getNextRow());\n      });\n    } else if ($(contextPagination).hasClass(\"bz-navigation-previous\") && self.isValidRow()) {\n      $.when(self.saveChanges()).done(function () {\n        self.showRow(self.getPreviousRow());\n      });\n    } else if ($(contextPagination).hasClass(\"bz-navigation-first\") && self.isValidRow()) {\n      $.when(self.saveChanges()).done(function () {\n        self.showRow(self.getFirstRow());\n      });\n    } else if ($(contextPagination).hasClass(\"bz-navigation-last\") && self.isValidRow()) {\n      $.when(self.saveChanges()).done(function () {\n        self.showRow(self.getLastRow());\n      });\n    } else if ($(contextPagination).hasClass(\"bz-navigation-remove\")) {\n      if (self.hasData()) {\n        self.removeRow();\n      }\n    } else if ($(contextPagination).hasClass(\"bz-navigation-add\")) {\n      if (self.hasData() && self.isValidRow()) {\n        $.when(self.saveChanges()).done(function () {\n          self.addInlineRow();\n        });\n      } else if (!self.hasData()) {\n        self.addInlineRow();\n      }\n    }\n\n  } });","/**\r\n *   Name: Bizagi Desktop Render ECM file upload control\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script extend some functionalities of file upload control\r\n */\n\n// Extends from render Desktop base\nbizagi.rendering.desktop.render.extend(\"bizagi.rendering.desktop.ecm\", {\n  // Statics\n  BA_ACTION_PARAMETER_PREFIX: bizagi.render.services.service.BA_ACTION_PARAMETER_PREFIX,\n  BA_CONTEXT_PARAMETER_PREFIX: bizagi.render.services.service.BA_CONTEXT_PARAMETER_PREFIX,\n  BA_PAGE_CACHE: bizagi.render.services.service.BA_PAGE_CACHE },\nbizagi.rendering.ecm.prototype);\n\n// Extends itself\nbizagi.rendering.desktop.ecm.extend(\"bizagi.rendering.desktop.ecm\", {}, {\n  renderControl: function renderControl(listControl, fileProperties) {\n  },\n  /*\r\n     *   Template method to implement in each device to customize each render after processed\r\n     */\n  postRender: function postRender() {\n    var self = this;\n    var control = self.getControl();\n    var properties = self.properties;\n    var dateFormat = this.getResource(\"dateFormat\");\n    var timeFormat = this.getResource(\"timeFormat\");\n    var mode = self.getMode();\n\n    // Call base\n    self._super();\n\n    properties.maxSize = Number(properties.maxSize) || (typeof BIZAGI_SETTINGS !== \"undefined\" && typeof BIZAGI_SETTINGS.UploadMaxFileSize !== \"undefined\" ? Number(BIZAGI_SETTINGS.UploadMaxFileSize) : properties.maxSize = Number(properties.maxSize) || 4091904);\n    properties.maxFiles = Number(properties.maxfiles) || 999;\n    properties.validExtensions = properties.validExtensions || \"\";\n\n    if (properties.validExtensions.length > 0 && properties.validExtensions.indexOf(\".\") < 0) {\n      var singleExtensions = properties.validExtensions.split(\";\");\n\n      for (var i = 0, length = singleExtensions.length; i < length; i++) {\n        singleExtensions[i] = \"*.\" + singleExtensions[i];\n      }\n\n      properties.validExtensions = singleExtensions.join(\";\");\n    }\n\n    properties.addUrl = properties.addUrl || self.dataService.getUploadAddUrl();\n    properties.deleteUrl = properties.deleteUrl || undefined;\n    properties.allowDelete = bizagi.util.parseBoolean(properties.allowDelete) !== null ? bizagi.util.parseBoolean(properties.allowDelete) : true;\n    properties.q_xpath = bizagi.util.encodeXpath(self.getUploadXpath());\n\n    // We will hold here the value to display\n    properties.displayValue = \"\";\n    properties.showTime = properties.showTime !== undefined ? bizagi.util.parseBoolean(properties.showTime) : false;\n    properties.dateFormat = properties.dateFormat || dateFormat;\n    properties.timeFormat = properties.timeFormat || timeFormat;\n    properties.fullFormat = properties.dateFormat;\n\n    // Fix dateFormat for datepicker\n    properties.datePickerFormat = properties.dateFormat.replaceAll(\"M\", \"m\"); // Fix months\n    properties.datePickerFormat = properties.datePickerFormat.replaceAll(\"yyyy\", \"yy\"); // Fix years\n    properties.datePickerFormat = properties.datePickerFormat.replaceAll(\"dddd\", \"DD\"); // Fix days\n    properties.datePickerFormat = properties.datePickerFormat.replaceAll(\"mmmm\", \"MM\"); // Fix days\n\n    // Set files property\n    self.files = properties.value || [];\n    self.filesCount = self.files.length;\n\n    // define xpath context if coming from grid column\n    properties.xpathContext = this.parent.properties.xpathContext || properties.xpathContext || \"\";\n\n    // Set control container to behave as a block\n    control.addClass(\"ui-bizagi-render-display-block\");\n    control.addClass(\"ui-bizagi-render-upload\");\n    control.addClass(\"ui-bizagi-render-ecm\");\n    $(control).closest(\".ui-bizagi-control-wrapper\").addClass(\"ui-bizagi-control-wrapper-ecm\");\n\n    // First run show render options\n    self.properties.showRenderOptions = true;\n\n    // Call service and render control\n    if (mode == \"execution\") {\n      self.renderUploadItem();\n    } else {\n      control.append(\"<div class='ui-icon ecm-file'></div>\");\n    }\n\n    // Check number of files and hide or show button to upload\n    self.checkMaxFiles();\n\n\n    self.preventDefaultForAnchorTag();\n  },\n  /*\r\n     *   Template method to implement in each device to customize the render's behaviour to add handlers\r\n     */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    var control = self.getControl();\n\n    // Call base\n    self._super();\n\n    data = self.buildAddParams();\n    data.networkSpeed = networkSpeed();\n\n    $(\".biz-render-ecm-upload-wrapper\", control).bizagiUpload({\n      renderReference: this,\n      dialogTemplate: self.renderFactory.getTemplate(\"upload.ecm.dialog\"),\n\n      properties: data,\n      uploadedFiles: self.filesCount,\n      isECM: true,\n\n      onUploadFileCompletedCallback: self.onUploadFileCompleted,\n      dialogTitle: self.getResource(\"render-upload-link-label\") });\n\n  },\n\n  configureUploadHandlers: function configureUploadHandlers(reference, extraData, control) {\n    var self = reference;\n    var data = self.buildUpgradeParams(control);\n\n    $(control).bizagiUpload({\n      renderReference: self,\n      dialogTemplate: self.renderFactory.getTemplate(\"upload.ecm.dialog\"),\n\n      properties: data,\n      uploadedFiles: self.filesCount,\n      isECM: true,\n      isUpdatingECM: true,\n\n      onUploadFileCompletedCallback: self.onUpdateUploadFileCompleted,\n      dialogTitle: self.getResource(\"render-upload-link-label\") });\n\n\n  },\n\n  onUpdateUploadFileCompleted: function onUpdateUploadFileCompleted(renderReference, data, control, response) {\n    var self = renderReference;\n\n    control.empty();\n    self.waiting(control, true);\n    self.filesCount++;\n\n    self.renderFileLayout(self, data, control, response);\n  },\n\n  renderUploadItem: function renderUploadItem(listControl, fileProperties) {\n    var self = this;\n    var mode = self.getMode();\n    var control = self.getControl();\n    var template = self.renderFactory.getTemplate(\"upload-ecm-view-default\");\n    var properties = self.properties;\n\n    properties.value = fileProperties ? [[fileProperties.idFileUpload, fileProperties.fileName]] : self.value;\n\n    // If there's an error it displays a dialog and stops this method\n    if (typeof fileProperties != \"undefined\" && typeof fileProperties.status != \"undefined\" && fileProperties.status == \"error\") {\n      bizagi.showMessageBox(fileProperties.message);\n      return;\n    }\n\n    $.when($.tmpl(template, properties, {\n      getFileExtension: self.getFileExtension,\n      isImage: self.isImage,\n      allowSendInMail: properties.allowSendInMail })).\n    done(function (controlContent) {\n      // Append content\n      if (listControl && listControl.length > 0) {\n        controlContent.insertAfter(listControl.last());\n      } else {\n        control.append(controlContent);\n      }\n\n      //Remove load information tab\n      control.find(\".uploadifyQueueItem\").remove();\n\n      // Load metadata for each file\n      if (self.properties.value != undefined) {\n        $.each(self.properties.value, function (key, value) {\n          var data = {};\n\n          data.idFileUpload = value[0] || value.uploadId;\n          data.fileName = value[1] || value.fileName;\n          data.idPageCache = self.properties.idPageCache;\n          data.xpathContext = self.getXpathContext();\n\n          data.xPath = self.properties.xpath;\n          data.idAttrib = self.properties.idAttrib;\n\n          if (mode == \"execution\") {\n            self.renderFileLayout(self, data, $(\".\" + self.properties.id + \"-\" + data.idFileUpload, control), fileProperties);\n          }\n        });\n      }\n\n      // set event sendmail\n      if (self.properties.allowSendInMail) {\n        self.bindEmailDialog();\n      }\n    });\n  },\n\n  /**\r\n      * Bind dialog for send email\r\n      */\n  bindEmailDialog: function bindEmailDialog() {\n    var self = this;\n    var control = self.getControl();\n    var xpathContext = self.getXpathContext() || \"\";\n    var xpath = self.properties.xpath;\n\n    $(\".ui-bizagi-render-ecm-sendmail\", control).bizagiSendEmail({\n      tmpl: self.renderFactory.getTemplate(\"dialog-send-email\"),\n      value: self.value,\n      self: self,\n      dataService: self.dataService,\n      properties: self.properties,\n      xpath: xpath,\n      xpathContext: xpathContext });\n\n  },\n\n  /**\r\n      * Render file layout     \r\n      */\n  renderFileLayout: function renderFileLayout(self, data, fileControl, fileProperties) {\n    self = self || this;\n    var form = self.getFormContainer();\n    var metadataTemplate = self.renderFactory.getTemplate(\"upload-ecm-view-default-metadata\");\n\n    var imageConfig = { zIndex: $.getMaxZindex() + 1 };\n    var originalData = $.extend({}, data);\n    var metadataParams = fileProperties ? [fileProperties] : self.dataService.metadataECMMultiaction().getFileProperties(originalData);\n\n    $.when(self.dataService.metadataECMMultiaction().getECMMetadata(data), metadataParams).\n    done(function (metaData, fileProperties) {\n\n      self.waiting(fileControl, true);\n\n      if (Array.isArray(fileProperties)) {\n        fileProperties = fileProperties[0];\n      }\n\n      if (Array.isArray(metaData)) {\n        metaData = metaData[0];\n      }\n\n      fileProperties.data = data;\n\n      // Make xpath context\n      fileProperties.xpathContext = fileProperties.xpathContext || form.properties.xpathContext || \"\";\n      fileProperties.xpath = self.properties.xpath;\n\n      metaData.filename = data.fileName;\n\n      // Define File Properties\n      metaData.ecm_ecmStatus = fileProperties.ecmStatus;\n      metaData.ecm_isVisible = fileProperties.isVisible;\n      metaData.ecm_allowUpdateMetadata = fileProperties.allowUpdateMetadata;\n      metaData.ecm_allowDelete = fileProperties.allowDelete;\n      metaData.ecm_allowUpdateContent = fileProperties.allowUpdateContent;\n      metaData.ecm_allowView = fileProperties.allowView;\n      metaData.ecm_allowCheckOut = fileProperties.allowCheckOut;\n      metaData.ecm_allowCancelCheckOut = fileProperties.allowCancelCheckOut;\n      metaData.ecm_allowEdit = fileProperties.allowEdit;\n      metaData.idFileUploads = fileProperties.idFileUpload;\n      metaData.xpath = fileProperties.xpath;\n      metaData.value = bizagi.util.parseBoolean(fileProperties.value);\n\n      // Check if file its image\n      var container = fileControl.parent().find('.extension:last');\n      if (self.isImage(metaData.filename)) {\n\n        // Append image\n        container.empty();\n        container.append('<img>');\n        var image = container.find('img');\n\n        // Add class thumbnail\n        container.addClass('thumb-image');\n\n        self.requestFile({ id: metaData.idFileUploads, filename: metaData.filename }, false).then(function (imgURL) {\n          image.attr({ src: imgURL, width: 32, height: 32 });\n        });\n\n        image.imageZoom(imageConfig);\n\n        $(\".checkuot , .readonly\", fileControl.parent()).off(\"click\").on('click', function () {\n          image.click();\n        });\n      } else {\n        fileControl.parent().find('li:first').off(\"click\").on('click', function (e) {\n          e.stopPropagation();\n          self.requestFile({ id: metaData.idFileUploads, filename: metaData.filename }, true);\n        });\n      }\n\n      // Check if file is visible\n      if (fileProperties.isVisible) {\n        fileControl.empty();\n\n        var dataItem = $.extend(metaData, {\n          showMetadata: self.properties.showMetadata,\n          orientation: form.properties.orientation || \"ltr\" });\n\n\n        $.when($.tmpl(metadataTemplate, dataItem).appendTo(fileControl)).done(function () {\n          // Bind options\n          $(\".ecm-options-slide li\", fileControl).hover(function () {\n            $(this).toggleClass(\"ecm-options-slide-hover\");\n          });\n\n          $(\".filename_download\", fileControl).off(\"click\").on('click', function (e) {\n            e.stopPropagation();\n            self.requestFile({ id: metaData.idFileUploads, filename: metaData.filename }, true);\n          });\n\n          // Check if file its image\n          if (self.isImage(metaData.filename)) {\n            $(\".filename a\", fileControl).imageZoom(imageConfig);\n          }\n\n          // Set global events\n          self.setControlEvents(fileControl, data);\n\n          // Make Instance of file upload\n          if (metaData.ecm_allowUpdateContent) {\n            self.configureUploadHandlers(self, data, fileControl, fileProperties);\n          }\n\n          // Verify security of file\n          switch (fileProperties.ecmStatus) {\n            case 1: //LOCAL\n              break;\n            case 2: //PERSISTED\n              fileControl.parent().find(\".checkuot\").css(\"visibility\", \"hidden\");\n              fileControl.parent().find(\".checkuot\").hide();\n\n              break;\n            case 3: //DELETED\n              break;\n            case 4: //READONLY\n              // Hide control options\n              $(\".emc-options\", fileControl).hide();\n\n              // Disable event to edit meta data                                \n              fileControl.parent().find(\".readonly\").css(\"visibility\", \"visible\");\n              fileControl.parent().find(\".readonly\").show();\n              break;\n            case 5: //CHECKEDOUT\n              fileControl.parent().find(\".checkuot\").css(\"visibility\", \"visible\");\n              fileControl.parent().find(\".checkuot\").show();\n              break;\n            case 6: //UNDEFINED\n              bizagi.debug(\"ECM control return undefined status\", fileProperties);\n              break;\n            default:\n              fileControl.parent().find(\".checkuot\").css(\"visibility\", \"hidden\").hide();\n              fileControl.parent().find(\".readonly\").css(\"visibility\", \"hidden\").hide();\n              break;}\n\n\n          // Set Events\n          // Check if the control its readonly\n          if (bizagi.util.parseBoolean(self.properties.editable)) {\n            var multiClickControl = true;\n            fileControl.data(\"pluginAvailable\", false);\n\n            $(\".emc-options\", fileControl).on('click', function (evt) {\n              evt.stopPropagation();\n\n              // Block multi click\n              if (multiClickControl) {\n                multiClickControl = false;\n\n                var toggleOptions = function toggleOptions(fileControl) {\n                  var def = new $.Deferred();\n                  var modalEcm = $(\".modal-ecm\", fileControl);\n                  var control = self.control;\n                  // Show slide options\n                  if (modalEcm.is(\":visible\")) {\n                    $(\".modal-ecm\", control).hide();\n                    $(\".ecm-options-slide\", modalEcm).hide();\n                    modalEcm.hide();\n                    def.resolve(true);\n                  } else {\n\n                    var displayOptionsContent = function displayOptionsContent() {\n                      $(\".modal-ecm\", control).hide();\n                      $(\".ecm-options-slide\", modalEcm).show();\n\n                      modalEcm.show().position({\n                        my: \"center top\",\n                        at: \"center bottom\",\n                        of: $(\".emc-options\", fileControl),\n                        collision: \"none\" });\n\n                    };\n\n                    //  Hides the control when click somewhere else\n                    self.configureToggleHandlers();\n\n                    def.resolve(true);\n\n                    //Check if is the ECM is Async \n                    if (self.properties.isAsync !== undefined) {\n\n                      if (!metaData.ecm_allowUpdateContent)\n                      $(\".ecm-options-upgrade\", modalEcm).hide();\n\n                      //it's a flag to prevent multiple sever queries\n                      if (self.asynCheckEnabled === undefined) {\n\n                        self.asynCheckEnabled = true;\n\n                        self.asyncCheckTimeout = setTimeout(function () {\n                          //Clear the flag, to enable the interaction\n                          // Equal to undefined and not null, could be side efects if changed to null. \n                          self.asynCheckEnabled = undefined;\n                          self.asyncCheckTimeout = undefined;\n                          clearTimeout(self.asyncCheckTimeout);\n                        }, 2000);\n\n                        //Checks if the control already have check if the file is on ECM\n                        if (!data.IsFileOnECM) {\n\n                          //Pre hide the elements, so when the services response, show or hide the elements we need\n                          $(\".ecm-options-checkout\", modalEcm).hide();\n                          $(\".ecm-options-cancelcheckout\", modalEcm).hide();\n                          $(\".ecm-options-upgrade\", modalEcm).hide();\n\n                          //invokes the server to retrieve the file status\n                          $.when(self.dataService.isFileOnECM({ \"idUpload\": data.idFileUpload })).\n                          done(function (result) {\n\n                            //Checks the service response, and show/hide the desired controls\n                            if (result.IsFileOnECM) {\n\n                              if (metaData.ecm_allowUpdateContent)\n                              $(\".ecm-options-upgrade\", modalEcm).show();\n\n                              if (metaData.ecm_allowCheckOut)\n                              $(\".ecm-options-checkout\", modalEcm).show();\n\n                              if (metaData.ecm_allowCancelCheckOut)\n                              $(\".ecm-options-cancelcheckout\", modalEcm).show();\n                            }\n\n                            //Stores the server response, so if the response is true, prevents the service recall\n                            data.IsFileOnECM = result.IsFileOnECM;\n\n                            //Show the content\n                            displayOptionsContent();\n\n                          }).fail(function (error) {\n                            bizagi.log(\"isFileOnECM error\");\n                          });\n                        } else {\n                          displayOptionsContent();\n                        }\n                      }\n                    } else {\n                      displayOptionsContent();\n                    }\n                  }\n\n                  return def.promise();\n                };\n\n                $.when(toggleOptions(fileControl)).done(function () {\n                  multiClickControl = true;\n                });\n              }\n            });\n          } else {\n            $(\".emc-options\", fileControl).hide();\n            $(self.getControl()).trigger('ecmLoaded', { container: container });\n          }\n        });\n      }\n    });\n  },\n\n  requestFile: function requestFile(fileMetadata, download) {\n    var self = this;\n    download = typeof download !== \"undefined\" ? download : true;\n    var properties = self.properties;\n\n    return self.dataService.getFile({\n      idRender: properties.id,\n      xpath: properties.xpath,\n      xpathContext: self.getXpathContext(),\n      idPageCache: properties.idPageCache,\n      fileId: fileMetadata.id,\n      contexttype: properties.contexttype }).\n    then(function (response) {\n      return bizagi.util.handleJSONResponse(response);\n    }).then(function (blobFile) {\n      if (download) {\n        bizagi.util.downloadBlobFile(blobFile, fileMetadata.filename);\n      } else {\n        return window.URL.createObjectURL(blobFile);\n      }\n    }).fail(function (err) {\n      var form = self.getFormContainer();\n      form && form.failHandler(err);\n    });\n  },\n\n  /*\r\n     * Bind events for control\r\n     */\n  setControlEvents: function setControlEvents(control, params) {\n    var self = this;\n    var properties = self.properties;\n    var globalControl = self.getControl();\n\n    // Bind for delete options\n    $(\".ecm-options-delete\", control).on('click', function (e) {\n      e.stopPropagation();\n\n      $(\".emc-options\", control).click();\n      var message = $(\".biz-render-ecm-delete-confirmation\", globalControl).first().clone();\n      message.dialog({\n        resizable: false,\n        modal: true,\n        title: self.getResource(\"render-ecm-confirm-title\"),\n        buttons: [\n        {\n          text: self.getResource(\"render-ecm-confirm-bt-delete\"),\n          click: function click() {\n            delete params.prepare; // Ensure run Ajax\n            self.dataService.deleteECMFile(params);\n            $(this).dialog(\"close\");\n            control.parent(\"ul\").hide(\"highlight\", {}, 100);\n\n            //Set files in a temporal array\n            var files = [].concat(self.files);\n\n            //Remove element form files array\n            for (var i = 0; i < files.length; i++) {\n              if (files[i][0] == params.idFileUpload) files.splice(i, 1);\n            }\n\n            //Set Value\n            self.setValue(files);\n\n            // Check maxFiles\n            self.checkMaxFiles();\n          } },\n\n        {\n          text: self.getResource(\"render-ecm-confirm-bt-cancel\"),\n          click: function click() {\n            $(this).dialog(\"close\");\n          } }] });\n\n\n\n    });\n\n    // Bind for cancelcheckout options\n    $(\".ecm-options-cancelcheckout\", control).on('click', function (e) {\n      e.stopPropagation();\n\n      //Close popup\n      $(\".emc-options\", control).click();\n\n      self.waiting(control, false);\n      control.find(\".filename\").empty();\n\n      delete params.prepare; // Ensure run Ajax\n      $.when(self.dataService.cancelCheckOut(params)).\n      done(function (fileProperties) {\n        self.renderFileLayout(self, params, control, fileProperties);\n      });\n    });\n\n    // Bind for checkout options\n    $(\".ecm-options-checkout\", control).off('click').on('click', function (e) {\n      e.stopPropagation();\n\n      //Close popup\n      $(\".meta-data-wrapper\", control).click();\n      self.waiting(control, false);\n      control.find(\".filename\").empty();\n\n      delete params.prepare; // Ensure run Ajax\n      $.when(self.dataService.checkOutFile(params)).done(\n      function (fileProperties) {\n        self.renderFileLayout(self, params, control, fileProperties);\n      });\n    });\n\n    // Bind for edit metadata\n    // Check if the ECM status is READONLY = 4\n    if ($(\".ecm-metadata-value\", control).data(\"ecmstatus\") != 4 && $(\".ecm-metadata-value\", control).data(\"allowupdatemetadata\")) {\n      $(\".ecm-metadata-value\", control).bind('activeeditmode', function (e) {\n        e.stopPropagation();\n\n        // Check read only\n        if (!$(this).data(\"readonly\")) {\n          // Check propagation\n          if ($(this).data(\"edit-mode\") == \"false\" || $(this).data(\"edit-mode\") == \"\") {\n            $(this).data(\"edit-mode\", \"true\");\n\n            switch ($(this).data(\"metadatatype\")) {\n              case \"STRING\":\n                self.makeStringMetaDataControler($(this), control);\n                break;\n              case \"INTEGER\":\n                self.makeStringMetaDataControler($(this), control, function (value) {\n                  // validation function\n                  var valueMatch = value.match(/\\d+/);\n                  return valueMatch != null && valueMatch[0] == valueMatch['input'];\n                });\n                break;\n              case \"DATETIME\":\n                self.makeDatetimeMetaDataControler($(this), control);\n                break;\n              case \"DECIMAL\":\n                self.makeStringMetaDataControler($(this), control, function (value, separator) {\n                  // validation function\n                  var numericFormat = self.getResource('numericFormat');\n\n                  var reg = new RegExp(\"\\\\d+(\\\\\" + numericFormat.decimalSymbol + \"\\\\d)*\");\n                  var valueMatch = value.match(reg);\n                  try {\n                    var lastChar = value.substr(value.length - 1, 1);\n                  } catch (e) {\n                    return false;\n                  }\n                  return valueMatch != null && (valueMatch[0] == valueMatch['input'] || lastChar == numericFormat.decimalSymbol);\n                });\n                break;\n              case \"BOOL\":\n                self.makeBooleanMetaDataControler($(this), control);\n                break;\n              default:\n                self.makeStringMetaDataControler($(this), control);\n                break;}\n\n          }\n        }\n      });\n    }\n\n    // Set events for done and cancel button\n    $(\".ecm-metadata-done\", control).on('click', function (e) {\n      e.stopPropagation();\n      var control = $(this).parent('td');\n      var ecmMetaDataFieldEdit = $(\".ecm-metadata-field-edit\", control);\n      var metadatavalue = \"\";\n      var metadatapostvalue = \"\";\n\n      // Define metadataValue\n      switch (control.data('metadatatype')) {\n        case 'STRING':\n        case 'DECIMAL':\n        case 'INTEGER':\n          metadatavalue = $(\".ecm-metadata-input\", control).val();\n          metadatapostvalue = $(\".ecm-metadata-input\", control).val();\n          break;\n        case 'BOOL':\n          metadatavalue = $(\".biz-render-ecm-upload-boolean input:checked\", control).val();\n          metadatapostvalue = bizagi.util.parseBoolean(metadatavalue) ? 'True' : 'False';\n          metadatavalue = metadatavalue == 'False' ? self.getResource('render-boolean-no') : self.getResource('render-boolean-yes');\n          break;\n        case 'DATETIME':\n          metadatavalue = $(\".ecm-metadata-input\", control).val();\n          if (metadatavalue) {\n            var date = bizagi.util.dateFormatter.getDateFromFormat(metadatavalue, self.properties.datePickerFormat);\n            metadatapostvalue = bizagi.util.dateFormatter.formatInvariant(date, true);\n          }\n          break;}\n\n      // Update metadata\n      control.data('value', metadatapostvalue);\n\n      var spanMetaDataValue = $(\"<span></span>\").addClass(\"ecm-metadata-text\").text(metadatavalue);\n      ecmMetaDataFieldEdit.replaceWith(spanMetaDataValue);\n\n      // Show and hide elements\n      $(\".ecm-metadata-edit\", control).css('display', 'block');\n      $(\".ecm-metadata-done\", control).hide();\n      $(\".ecm-metadata-cancel\", control).hide();\n      control.data(\"edit-mode\", \"false\");\n    });\n\n    $(\".ecm-options-edit\", control).on('click', function (evt, data) {\n      var modalEcm = control;\n      var validateData = data && data.checkData || false;\n\n      evt.stopPropagation();\n\n      // Close popup            \n      if ($(\".emc-options\", control).css(\"display\") === \"block\")\n      $(\".modal-ecm\", control).hide();\n\n      // If data is valid then return \t\n      if (validateData && self.isValidFields(modalEcm)) return;\n\n      if ($(\".ecm-options-edit\", modalEcm).data('editmode') == 'true') {\n        return;\n      } else {\n        $(\".ecm-options-edit\", modalEcm).data('editmode', 'true'); // Active edit mode\n      }\n\n      var template = self.renderFactory.getTemplate(\"upload-ecm-view-default-edit-buttons\");\n      var metadata = [];\n\n      // Render template\n      var editButtons = $.tmpl(template);\n\n      // Enable edit mode for all elements available in the control\n      $(\".ecm-metadata-value[data-allowUpdateMetadata=true]\", control).trigger('activeeditmode');\n\n      // Show save and cancel buttons\n      editButtons.insertAfter($('table', control));\n      $(\".biz-render-ecm-metadata-edit\", control).show(500);\n\n      // Set events to save and cancel buttons\n      // Save button\n      $(\".biz-render-ecm-metadata-edit button:first\", control).on('click', function (evt) {\n        var error = false;\n        var modalEcm = control;\n\n        evt.stopPropagation();\n\n        // verify all mandatory fields\n        $.each($(\".ecm-metadata-value[data-mandatory='true']\", control), function (key, field) {\n          var type = $(field).data('metadatatype');\n          var actualValue;\n\n          if (type == \"BOOL\") {\n            actualValue = $(\".biz-render-ecm-upload-boolean input:checked\", field).val();\n          } else {\n            actualValue = $(field).find('.ecm-metadata-field-edit').val();\n          }\n\n          if (actualValue === \"\" || actualValue === null) {\n            $(field).find('input').attr('placeholder', self.getResource(\"render-ecm-tooltip-mandatory\"));\n            $(field).parent().find('.ecm-metadata-key').addClass(\"mandatory-error\");\n            $(field).parent().effect('highlight', 500);\n\n            error = true;\n          } else {\n            $(field).parent().find('.ecm-metadata-key').removeClass(\"mandatory-error\");\n          }\n        });\n\n        if (error) return;\n\n        $(\".ecm-metadata-done\", control).click();\n        $(\".biz-render-ecm-metadata-edit\", control).hide(300, function () {\n          $(\".biz-render-ecm-metadata-edit\", control).remove();\n        });\n\n        $.each($(\".ecm-metadata-value\", control), function (key, value) {\n          // uses the key as an index for the  ecm-metadata-key and ecm-metadata-value\n          metadata.push({\n            idMetadata: $($(\".ecm-metadata-key\", control)[key]).data(\"idmetadata\"),\n            value: $(value).data(\"value\") });\n\n        });\n\n        params.metaValues = JSON.encode({ metadataValues: metadata });\n\n        delete params.prepare; // Ensure run Ajax\n        $.when(self.dataService.updateECMMetadata(params)).done(function (fileProperties) {\n          $(\".ecm-options-edit\", modalEcm).data('editmode', 'false');\n        });\n      });\n\n      // Cancel button\n      $(\".biz-render-ecm-metadata-edit button:last\", control).on('click', function (evt) {\n        var modalEcm = control;\n\n        evt.stopPropagation();\n\n        $(\".ecm-metadata-cancel\", control).click();\n        $(\".biz-render-ecm-metadata-edit button:first\", control).unbind('click');\n        if ($('.ecm-options-slide', modalEcm).is(':visible')) {\n          $(\".emc-options\", control).click();\n        }\n        $(\".biz-render-ecm-metadata-edit\", control).hide(500, function () {\n          $(\".biz-render-ecm-metadata-edit\", control).remove();\n        });\n        $(\".ecm-options-edit\", modalEcm).data('editmode', 'false');\n      });\n\n    });\n\n    $(\".ecm-metadata-cancel\", control).on('click', function (e) {\n      e.stopPropagation();\n      var control = $(this).parent('td');\n      var inputMetaDataValue = $(\".ecm-metadata-field-edit\", control);\n      var spanMetaDataValue = $(\"<span></span>\").addClass(\"ecm-metadata-text\").text(inputMetaDataValue.data('original-value'));\n\n      inputMetaDataValue.replaceWith(spanMetaDataValue);\n\n      // Show and hide elements\n      $(\".ecm-metadata-edit\", control).css('display', 'block');\n      $(\".ecm-metadata-done\", control).hide();\n      $(\".ecm-metadata-cancel\", control).hide();\n\n      control.data(\"edit-mode\", \"false\");\n    });\n  },\n\n  /*\r\n     * Make input field for edit string metadata\r\n     */\n  makeStringMetaDataControler: function makeStringMetaDataControler(field, control, validationFunction) {\n    var spanMetaDataValue = $(\".ecm-metadata-text\", field);\n    var inputMetaDataValue = $(\"<input></input>\").addClass(\"ecm-metadata-field-edit ecm-metadata-input\").val(spanMetaDataValue.text());\n\n    // Persist in data tag the original value\n    inputMetaDataValue.data('original-value', spanMetaDataValue.text());\n\n    // Change element\n    spanMetaDataValue.replaceWith(inputMetaDataValue);\n\n    inputMetaDataValue.focus();\n\n    // Show and hide elements\n    $(\".ecm-metadata-edit\", field).hide();\n    $(\".ecm-metadata-done\", field).css('visibility', 'visible').show();\n    $(\".ecm-metadata-cancel\", field).css('visibility', 'visible').show();\n\n    // Set event for enter key press\n    $(\".ecm-metadata-input\", field).bind(\"keyup\", function (e) {\n      var inputValue = inputMetaDataValue.val();\n      if (validationFunction) {\n        if (validationFunction(inputValue) || inputValue == \"\") {\n          inputMetaDataValue.data(\"latestdonevalue\", inputValue);\n        } else {\n          inputMetaDataValue.val(inputMetaDataValue.data(\"latestdonevalue\") || \"\");\n        }\n      }\n    });\n  },\n  /*\r\n     * Make input field for edit string metadata\r\n     */\n  makeDatetimeMetaDataControler: function makeDatetimeMetaDataControler(field, control) {\n    var self = this;\n    var spanMetaDataValue = $(\".ecm-metadata-text\", field);\n    var inputMetaDataValue = $(\"<input></input>\").addClass(\"ecm-metadata-field-edit ecm-metadata-input\").val(spanMetaDataValue.text());\n\n    // Persist in data tag the original value\n    inputMetaDataValue.data('original-value', spanMetaDataValue.text());\n\n    // Change element\n    spanMetaDataValue.replaceWith(inputMetaDataValue);\n    inputMetaDataValue.datepicker({\n      dateFormat: self.properties.datePickerFormat,\n      changeYear: true,\n      onSelect: function onSelect(dateText, inst) {\n        inputMetaDataValue.val(dateText + \" 00:00 AM\");\n      } });\n\n\n    // Show and hide elements\n    $(\".ecm-metadata-edit\", field).hide();\n    $(\".ecm-metadata-done\", field).css('visibility', 'visible').show();\n    $(\".ecm-metadata-cancel\", field).css('visibility', 'visible').show();\n\n    // Set event for enter key press\n    $(\".ecm-metadata-input\", field).bind(\"keypress\", function (e) {\n      if (e.keyCode == 13) {\n        $(\".ecm-metadata-done\", control).trigger('click');\n      }\n    });\n  },\n\n  /**\r\n      * Make input field for edit string metadata     \r\n      */\n  makeDecimalMetaDataControler: function makeDecimalMetaDataControler(field, control) {\n    var self = this;\n    var separator = self.getResource('decimalSymbol');\n    self.makeStringMetaDataControler($(this), control, function (value, separator) {\n      // validation function\n      var reg = new RegExp(\"\\\\d+(\\\\\" + separator + \"\\\\d)*\");\n      var valueMatch = value.match(reg);\n      return valueMatch != null && (valueMatch[0] == valueMatch['input'] || valueMatch[1] == undefined);\n    });\n\n  },\n\n  /**\r\n      * Make input field for edit string metadata     \r\n      */\n  makeBooleanMetaDataControler: function makeBooleanMetaDataControler(field, control) {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"upload-ecm-view-default-yesno\");\n    var spanMetaDataValue = $(\".ecm-metadata-text\", field);\n    var metadatavalue = $(field).data(\"value\") || false;\n    var checked = bizagi.util.parseBoolean(metadatavalue) ? true : false;\n    var randomNumber = Math.ceil(Math.random() * 100);\n\n    var inputMetaDataValue = $.tmpl(template, { id: self.properties.id, checked: checked, rnd: randomNumber });\n\n    // Persist in data tag the original value\n    inputMetaDataValue.data('original-value', spanMetaDataValue.text());\n\n    // Change element\n    spanMetaDataValue.replaceWith(inputMetaDataValue);\n\n    // Show and hide elements\n    $(\".ecm-metadata-edit\", field).hide();\n    $(\".ecm-metadata-done\", field).css('visibility', 'visible').show();\n    $(\".ecm-metadata-cancel\", field).css('visibility', 'visible').show();\n\n  },\n\n  /**\r\n      * Check if file its image or not     \r\n      */\n  isImage: function isImage(file) {\n    var extension = this.getFileExtension(file);\n    var image = [\"JPG\", \"JPEG\", \"GIF\", \"PNG\", \"BMP\"];\n\n    return $.inArray(extension.toUpperCase(), image) > -1 ? true : false;\n  },\n\n  /**\r\n      * Template method to implement in each device to customize each render after processed in read-only mode     \r\n      */\n  postRenderReadOnly: function postRenderReadOnly() {\n    var self = this;\n    var control = self.getControl();\n    var mode = self.getMode();\n\n    if (mode != \"execution\") {\n      control.append(\"<div class='ui-icon upload-file'></div>\");\n      return;\n    }\n\n    // Set control container to behave as a block\n    control.addClass(\"ui-bizagi-render-display-block\");\n    control.addClass(\"ui-bizagi-render-upload\");\n\n    // Remove upload wrapper\n    $(\".biz-render-ecm-upload-wrapper\", control).remove();\n\n    // First run show render options\n    self.properties.showRenderOptions = false;\n\n    // Call service and render control\n    self.renderUploadItem();\n\n    $(\".emc-options\", control).remove();\n  },\n\n  /**\r\n      * Build add params to send to the server\r\n      */\n  buildAddParams: function buildAddParams() {\n    var properties = this.properties;\n\n    var data = {\n      url: properties.addUrl,\n      xPath: properties.xpath,\n      idAttrib: properties.idAttrib,\n      xpathContext: properties.xpathContext,\n      metaValues: [],\n      idPageCache: properties.idPageCache,\n      folder: BIZAGI_PATH_TO_BASE,\n      contexttype: properties.contexttype,\n      validExtensions: properties.validExtensions,\n      maxSize: properties.maxSize };\n\n\n    var scriptData = {};\n    $.extend(scriptData, scriptData, data);\n    data.scriptData = scriptData;\n\n    return data;\n  },\n\n  /**\r\n      * Build add params to send to the server     \r\n      */\n  buildUpgradeParams: function buildUpgradeParams(fileControl) {\n    var properties = this.properties;\n\n    var data = {\n      url: properties.editUrl,\n      xPath: properties.xpath,\n      idFileUpload: $(\".ecm-options-upgrade > input\", fileControl).data(\"idfileupload\"),\n      idPageCache: properties.idPageCache,\n      idAttrib: properties.idAttrib,\n      xpathContext: this.getXpathContext(),\n      folder: BIZAGI_PATH_TO_BASE,\n      validExtensions: properties.validExtensions,\n      maxSize: properties.maxSize };\n\n\n    var scriptData = {};\n    $.extend(scriptData, scriptData, data);\n    data.scriptData = scriptData;\n\n    return data;\n  },\n\n  /**\r\n      * Check if the max files condition is true to hide the upload link    \r\n      */\n  checkMaxFiles: function checkMaxFiles() {\n    var self = this;\n    var properties = self.properties;\n    var control = self.getControl();\n    var uploadWrapper = $(\".biz-render-ecm-upload-wrapper\", control);\n\n    if (properties.maxFiles > 0 && self.filesCount >= properties.maxFiles) {\n      uploadWrapper.hide();\n    } else if (self.filesCount < properties.maxFiles) {\n      // Show upload link\n      uploadWrapper.show();\n    }\n  },\n\n  /**\r\n      * Handler to process server response after a file has been uploaded     \r\n      */\n  onUploadFileCompleted: function onUploadFileCompleted(renderReference, result) {\n    var self = renderReference;\n    var control = self.getControl();\n\n    if (result.type != \"error\") {\n\n      self.properties.showRenderOptions = false;\n      var controlList = $(\".biz-render-ecm-view-default\", control);\n      controlList = controlList.length > 0 ? controlList : $(\".biz-render-ecm-delete-confirmation\", control);\n\n      // Increment counter\n      self.filesCount = self.filesCount + 1;\n\n      // Check maxFiles\n      self.checkMaxFiles();\n\n      //Set files in temporal array\n      var files = [].concat(self.files);\n      files.push([result.idFileUpload, result.fileName]);\n\n      //Set Value\n      self.setValue(files, false);\n\n      // Trigger change\n      self.triggerRenderChange();\n\n      self.renderUploadItem(controlList, result);\n    } else {\n      // Show server error\n      if (!result.isMaintenanceWindow) bizagi.showMessageBox(result.message);\n    }\n  },\n\n  /**\r\n      * Check if all meta data fields that's right     \r\n      */\n  isValid: function isValid(invalidElements) {\n    var self = this;\n    var control = self.getControl();\n    var message = [];\n    var error = false;\n    var properties = self.properties;\n    var bValid = true;\n\n    var isNewRow = self.grid && self.grid.isFromCreatedRow.apply(self);\n    var isValidBase = (properties.required || properties.editable) && !isNewRow ? self._super(invalidElements) : true;\n\n    if (properties.required) {\n      bValid = isNewRow ? true : isValidBase;\n\n      if (self.filesCount == 0 && bValid) {\n\n        invalidElements.push({\n          xPath: properties.xpath,\n          message: self.getResource('render-required-text').replaceAll('#label#', properties.displayName) });\n\n\n        bValid = false;\n      }\n    }\n\n    if (properties.editable) {\n      bValid = isNewRow ? true : isValidBase;\n\n      if (!isNewRow) {\n        var $arrayEcmControls = $(\"ul:visible\", control).find(\".ecm-metadata-value[data-mandatory='true']\");\n\n        $.each($arrayEcmControls, function (key, value) {\n          if ($('.ecm-metadata-text', value).text() == \"\") {\n            message.push($(value).data(\"mandatoryfield\"));\n            error = true;\n          }\n        });\n      }\n    }\n\n    if (error) {\n      var errorMessage = self.getResource('render-required-text').replaceAll('#label#', message.join(', '));\n      invalidElements.push({ xPath: properties.xpath, message: errorMessage });\n\n      // If it has error, enable editable view. Then, open popup\n      if ($(\".ecm-options-edit\", control).data('editmode') != \"true\") {\n        $(\".ecm-options-edit\", control).trigger('click', { checkData: true });\n      }\n    }\n\n    return bValid;\n  },\n\n  /*\r\n      * Cleans current value\r\n      */\n  cleanData: function cleanData() {\n    this.setValue(null);\n    this.clearDisplayValue();\n  },\n\n  /**\r\n      * Sets the value in the rendered control     \r\n      */\n  clearDisplayValue: function clearDisplayValue() {\n    var self = this;\n    var control = self.getControl();\n    var arrayItems = control.find(\".biz-render-ecm-view-default\");\n    var length = arrayItems.length - 1;\n\n    $.each(arrayItems, function (index, value) {\n      var item = $(value);\n      var file = item.data();\n\n      if (file) {\n        $.when(self.deleteUploadItem(item, file.id)).done(function () {\n          // Detach item\n          item.remove();\n\n          // Trigger change\n          self.triggerRenderChange();\n        });\n      }\n    });\n\n    // Remove items\n    arrayItems.hide();\n\n    // Check maxFiles\n    self.filesCount = 0;\n    self.checkMaxFiles();\n  },\n\n  /**\r\n      * Add waiting message     \r\n      */\n  waiting: function waiting(ctrl, visible) {\n    ctrl.find(\".ecm-file-name\").css(\"visibility\", visible ? \"visible\" : \"hidden\");\n    ctrl.find(\"table\").css(\"visibility\", visible ? \"visible\" : \"hidden\");\n    ctrl.css(\"background\", visible ? \"\" : \"transparent\");\n\n    if (visible) {\n      ctrl.removeClass(\"waiting\");\n    } else {\n      ctrl.addClass(\"waiting\");\n    }\n  },\n\n  /**\r\n      * Hides the control when click somewhere else          \r\n      */\n  configureToggleHandlers: function configureToggleHandlers() {\n    $(document.body).off(\"click\").on(\"click\", function (e) {\n      if (!$(e.target).hasClass(\"emc-options\") && !$(e.target).hasClass(\"ui-icon-gear\")) {\n        $(\".modal-ecm\", this).hide();\n        $(\"#content-wrapper, .bz-rn-grid-data-wraper\").unbind('scroll');\n        $(document.body).unbind('click');\n      }\n    });\n\n    $(\"#content-wrapper, .bz-rn-grid-data-wraper, .ui-bizagi-dialog-search\").off(\"scroll\").on(\"scroll\", function (e) {\n      if (!$(e.target).hasClass(\"emc-options\") && !$(e.target).hasClass(\"ui-icon-gear\")) {\n        $(\".modal-ecm\", this).hide();\n        $(document.body).unbind('click');\n        $(\"#content-wrapper, .bz-rn-grid-data-wraper\").unbind('scroll');\n      }\n    });\n  },\n\n  /**\r\n      * Validate required field     \r\n      */\n  isValidFields: function isValidFields(metadataContext) {\n    var isValid = true;\n    var $arrayEcmControls = $(metadataContext).find(\".ecm-metadata-value[data-mandatory='true']\");\n\n    $.each($arrayEcmControls, function (key, value) {\n      var currentField = $('.ecm-metadata-text', value).text();\n      if (bizagi.util.isEmpty(currentField)) {\n        isValid = false;\n        return;\n      }\n    });\n\n    return isValid;\n  } });","/*\r\n *   Name: Bizagi Desktop Render Grid Extension\r\n *   Author: oscaro\r\n *   Comments:\r\n *   -   This script will redefine the grid render class to adjust to desktop devices\r\n */\n\n// Extends from render desktop base\nbizagi.rendering.desktop.render.extend(\"bizagi.rendering.desktop.grid.bizagi\", bizagi.rendering.grid.prototype);\n// Extends itself\nbizagi.rendering.desktop.grid.bizagi.extend(\"bizagi.rendering.desktop.grid.bizagi\", {}, {\n  /*\r\n                                                                                          *   Update or init the element data\r\n                                                                                          */\n  initializeData: function initializeData(data) {\n    var self = this;\n\n    this.isRTLDirection = this.isRTLOrientation(this.parent, data && data.properties ? data.properties.orientation : \"\");\n    data.properties.orientation = this.isRTLDirection ? \"rtl\" : data.properties.orientation;\n\n    self.showActionColumn(data);\n\n    // Create a single instance for each cell\n    data.properties.singleInstance = false;\n\n    // Call base\n    this._super(data);\n\n    // Create a data-structure to keep track of each cell properties\n    this.cellMetadata = {};\n\n    // Create a collection to save grid cell changes to execute after it is loaded\n    this.pendingActions = [];\n\n    // Fill default properties\n    var properties = this.properties;\n\n    // set collapse grid\n    this.collapseState = properties.collapseState;\n\n    // Just apply display-type: vertical, align it to the left\n    properties.displayType = \"vertical\";\n    properties.labelAlign = \"left\";\n\n  },\n\n  /*\r\n       If grid has allow some action (Delete, Edit or Detail action), show the action column in grid render.\r\n      */\n  showActionColumn: function showActionColumn(data) {\n    var self = this;\n    var mode = self.getMode();\n    var form = self.getFormContainer();\n    var properties = data.properties || {};\n    var editableGrid = bizagi.util.parseBoolean(properties.editable) != null ? bizagi.util.parseBoolean(properties.editable) : true;\n    var columnActions = bizagi.util.parseBoolean(properties.columnActions) != null ? bizagi.util.parseBoolean(properties.columnActions) : false;\n\n    // If print version mode then columns actions are disabled\n    if (form.getParams() && form.getParams().printversion) {\n      columnActions = false;\n    }\n\n    self.columnActionParams = {\n      columnActions: columnActions,\n      allowDelete: typeof properties.allowDelete == \"undefined\" && editableGrid ? true : false,\n      allowEdit: typeof properties.allowEdit == \"undefined\" && editableGrid ? true : false,\n      allowDetail: typeof properties.allowDetail == \"undefined\" ? false : true,\n      withEditForm: typeof properties.withEditForm == \"undefined\" ? false : true };\n\n\n    if (!data.properties.hideActionsColumn && mode === \"execution\") {\n      var actionsColumn = {\n        \"render\": {\n          \"properties\": {\n            \"id\": \"e51580f3-fd6c-49c0-8c69-73dff93723e5\",\n            \"type\": \"columnActions\",\n            \"xpath-column\": \"constant(\\\"\\\")\",\n            \"displayName\": \"\",\n            \"submitOnChange\": false,\n            \"totalize\": {\n              \"format\": {} },\n\n            \"hasTotalizer\": false,\n            \"preventDefault\": true,\n            \"columnwidth\": \"24px\",\n            \"headerStyles\": {\n              \"header\": \"width: 24px\",\n              \"label\": \"width: 24px\" },\n\n            \"cssclass\": \"bz-grid-header-actions\" } } };\n\n\n\n\n      if (!self.isRTLDirection) {\n        data.elements.splice(0, 0, actionsColumn);\n\n        self.spliceRowData(data.properties.data, 1);\n        self.spliceRowDataVisible(data.properties.data, 1);\n        self.spliceRowDataEditable(data.properties.data, 1);\n      } else {\n        data.elements.push(actionsColumn);\n\n        self.spliceRowData(data.properties.data);\n      }\n    }\n  },\n\n  /*\r\n      *   hasActions\r\n      */\n  hasActions: function hasActions(columnActionParams) {\n    var self = this;\n    if (typeof self.columnActionParams === \"undefined\") {\n      return false;\n    }\n    return self.columnActionParams.columnActions && (self.columnActionParams.allowDelete || self.columnActionParams.allowEdit && self.columnActionParams.withEditForm || self.columnActionParams.allowDetail);\n  },\n\n  getGridTemplate: function getGridTemplate() {\n    return this.renderFactory.getTemplate(\"grid.bizagi\");\n  },\n  /*\r\n     *   Template method to implement in each device to customize each render after processed\r\n     */\n  postRender: function postRender() {\n    var self = this;\n    var properties = self.properties;\n    var control = self.getControl();\n\n    // Call base \n    this._super();\n\n    // Find component holder\n    var grid = self.grid = $(\">div\", control);\n    // Build column metadata\n    var columns = self.buildColumnModel();\n\n    // Hide common label\n    self.getLabel().hide();\n\n    // Reset new records\n    self.cleanNewRecords();\n\n    self.applyGridPlugin();\n\n    // Set initial data\n    if (properties.data) {\n      if (properties.data === \"\" || properties.data.rows.length === 0 && properties.data.page > 1) {\n        self.fetchData(undefined, self.sortBy, self.sortType);\n\n      } else {\n        self.updateData(properties.data);\n\n        // Trigger change in order to start up the actions when the controls is ready\n        $.when(self.ready()).\n        done(function () {\n          self.triggerRenderChange({ changed: false });\n        });\n      }\n    }\n\n    self.initialLoadDone = true;\n    for (var i in self.pendingActions) {\n      if (typeof self.pendingActions[i].method == \"function\") {\n        self.pendingActions[i].method.apply(self, self.pendingActions[i].arguments);\n      }\n    }\n\n    // Set tooltip\n    var buttonsComponent = $(\"[data-bizagi-component='buttons'] li[title!='']\", self.getControl());\n    buttonsComponent.tooltip();\n\n    buttonsComponent = $(\"[data-bizagi-component='cellContent'] button[title!='']\", self.getControl());\n    buttonsComponent.tooltip();\n\n    // Add tooltips to header\n    var columComponent = $(\"[data-bizagi-component='columns'] th > div[title!='']\", self.getControl());\n    columComponent.tooltip();\n\n    //apply columns width\n    self.applyColumnsWidth(grid, columns);\n  },\n\n  /**\r\n      * WARNING: This method here is required in order to avoid changes in the font weigth for the grid\r\n      */\n  changeFontBold: function changeFontBold() {\n    return this;\n  },\n\n  /*\r\n     * Apply grid plugin\r\n     */\n  applyGridPlugin: function applyGridPlugin() {\n    var self = this;\n    var grid = self.grid;\n    var properties = self.properties;\n    var mode = self.getMode();\n\n    var pager = self.renderFactory.getTemplate(\"bizagi.grid.pagination\");\n\n    var form = self.getFormContainer();\n    var canvas = form.container;\n    if (form.params && form.params.context == \"search\" && form.parent && form.parent.params && form.parent.params.canvas) {\n      canvas = form.parent.params.canvas;\n    } else if (form.params && form.params.canvas) {\n      canvas = form.params.canvas;\n    }\n\n    var scrollableArea = canvas.css('overflow-y') == 'scroll' || canvas.css('overflow-y') == 'auto' ? canvas : canvas.scrollParent();\n\n    grid.bizagi_grid_desktop({\n      columns: self.buildColumnModel(),\n      showSummary: properties.showSummary,\n      title: properties.displayName,\n      mode: self.getMode(),\n      scrollableArea: scrollableArea,\n      floatingHeader: properties.floatingHeader || false,\n      hasExclusiveCheck: properties.hasExclusiveCheck || false,\n      tableCssClass: \"\",\n      sortBy: properties.sortBy || \"\",\n      collapse: mode !== \"execution\" ? false : true, // por defecto las grillas seran colapsables en ejecucion\n      collapseState: mode !== \"execution\" ? false : self.collapseState,\n      buttonsPst: mode !== \"execution\" ? false : properties.buttonsPst,\n      sortOrder: properties.sortOrder || \"\",\n      smartPagination: true,\n      sortType: bizagi.override.gridDefaultSortBy || \"asc\",\n      isSortable: properties.isSortable,\n      headerStyles: self.getHeaderStyles(),\n      orientation: properties.orientation || \"ltr\",\n      template: {\n        grid: self.renderFactory.getTemplate(\"bizagi.grid.grid\"),\n        gridRtl: self.renderFactory.getTemplate(\"bizagi.grid.grid.rtl\"),\n        waiting: self.renderFactory.getTemplate(\"bizagi.grid.waiting\"),\n        table: self.renderFactory.getTemplate(\"bizagi.grid.table\"),\n        emptyTable: self.renderFactory.getTemplate(\"bizagi.grid.table.empty\"),\n        column: self.renderFactory.getTemplate(\"bizagi.grid.column\"),\n        specialColumn: self.renderFactory.getTemplate(\"bizagi.grid.column.special\"),\n        row: self.renderFactory.getTemplate(\"bizagi.grid.row\"),\n        rowButtons: self.renderFactory.getTemplate(\"bizagi.grid.row.buttons\"),\n        rowButtonsRtl: self.renderFactory.getTemplate(\"bizagi.grid.row.buttons.rtl\"),\n        cell: self.renderFactory.getTemplate(\"bizagi.grid.cell\"),\n        specialCell: self.renderFactory.getTemplate(\"bizagi.grid.cell.special\"),\n        pager: pager,\n        buttons: self.renderFactory.getTemplate(\"bizagi.grid.buttons\"),\n        buttonsRtl: self.renderFactory.getTemplate(\"bizagi.grid.buttons.rtl\"),\n        dynamicPager: self.renderFactory.getTemplate(\"bizagi.grid.dynamicpager\"),\n        summary: self.renderFactory.getTemplate(\"bizagi.grid.summary\"),\n        summaryCell: self.renderFactory.getTemplate(\"bizagi.grid.summaryCell\"),\n        exportOptions: self.renderFactory.getTemplate(\"bizagi.grid.exportOptions\") },\n\n      actions: {\n        add: properties.allowAdd,\n        edit: properties.allowEdit && properties.withEditForm && properties.data != null,\n        remove: properties.allowDelete,\n        details: properties.allowDetail,\n        inlineAdd: properties.inlineAdd,\n        allowMore: properties.allowMore,\n        enableXlsExport: properties.enableXlsExport,\n        enablePdfExport: properties.enablePdfExport },\n\n      tooltips: {\n        addLabel: properties.addLabel,\n        editLabel: properties.editLabel,\n        deleteLabel: properties.deleteLabel,\n        detailLabel: properties.detailLabel,\n        exportOptionsLabel: properties.exportOptionsLabel },\n\n      isValid: function isValid() {\n        // Validate records \n        var errorsMessage = [];\n        var form = self.getFormContainer();\n\n        // fix for SUITE-8696\n        if (form.validationController !== undefined) {\n          form.validationController.clearValidationMessages();\n        }\n\n        self.isValid(errorsMessage);\n\n        if (errorsMessage.length > 0) {\n          // Show validation message\n          for (var i = 0; i < errorsMessage.length; i++) {\n            form.validationController.showValidationMessage(errorsMessage[i].message, errorsMessage[i].xpath);\n          }\n\n          return false;\n        } else {\n          return true;\n        }\n      },\n      pageRequested: function pageRequested(ui) {\n        if (mode !== \"execution\") return;\n\n        var hasColumnChanges = self.changes && Object.keys(self.changes).length >= 1 ||\n        self.exclusiveChanges && Object.keys(self.exclusiveChanges).length >= 1;\n\n        if (!self.isSummaryOrGlobalForm() && hasColumnChanges) {\n          $.when(self.getFormContainer().saveForm()).done(function () {\n            self.sortRequestedPage(ui);\n          });\n        } else {\n          self.sortRequestedPage(ui);\n        }\n      },\n      sortRequested: function sortRequested(ui) {\n        if (mode != \"execution\" || typeof ui.sortBy === \"undefined\") return;\n\n        // Get column sort xpath\n        var sortName;\n        var getColumn = self.getColumn(ui.sortBy);\n        if (getColumn) {\n          sortName = getColumn.getSortName();\n        } else {\n          getColumn = self.getColumn(ui.sortBy.split(\".\")[0]);\n\n          if (getColumn) {\n            sortName = getColumn.getSortName();\n          }\n        }\n\n        if (ui.sortBy.split(\".\").length > 1) {\n          if (ui.sortBy.split(\".\")[0] == sortName) {\n            sortName = ui.sortBy;\n          }\n        }\n\n        // Perform the sort\n        self.fetchData(ui.page, sortName, ui.sortType);\n      },\n      drawCell: function drawCell(ui) {\n        return self.drawCell(ui.column, ui.key, ui.value, ui.isNewRow);\n      },\n      cellReady: function cellReady(ui) {\n        return self.onCellReady(ui.column, ui.key, ui.cell, ui.isNewRow);\n      },\n      rowSelected: function rowSelected(ui) {\n        if (mode != \"execution\") return;\n\n        self.triggerHandler(\"rowSelected\", { id: ui.key });\n      },\n      addRow: function addRow() {\n        if (mode != \"execution\") return;\n\n        self.addRow.apply(self, arguments);\n      },\n      editRow: function editRow(ui) {\n        if (mode != \"execution\") return;\n\n        if (self.properties.withEditForm)\n        self.editRow(ui.key);\n      },\n      deleteRow: function deleteRow(ui) {\n        if (mode != \"execution\") return;\n\n        self.deleteRow(ui.key);\n      },\n      moreRows: function moreRows(ui) {\n        if (mode != \"execution\") return;\n\n        self.moreRows(ui);\n      },\n      saveAddedRows: function saveAddedRows(ui) {\n        $.when(self.saveInlineAddedRows(ui.keys)).done(function () {\n          //save edited inline rows\n          if (self.properties.inlineEdit) {\n            $.when(self.saveRows()).\n            done(function () {\n              self.refresh();\n\n              self.properties.canBeExported = true;\n            });\n          } else {\n            self.refresh();\n          }\n        });\n      },\n      beforeInlineAdd: function beforeInlineAdd() {\n        self.inlineAddDeferred = new $.Deferred();\n      },\n      afterInlineAdd: function afterInlineAdd() {\n        if (self.inlineAddDeferred) {\n          self.inlineAddDeferred.resolve();\n          self.properties.canBeExported = $(\"li[data-action='save']\", self.grid).is(\":visible\") ? false : true;\n        }\n      },\n      showFormDetails: function showFormDetails(id) {\n        self.showFormDetails(id.key);\n      },\n      cancelEdition: function cancelEdition(ui) {\n        ui.refresh = true;\n        self.removeNewRecords(ui);\n      },\n      removeNewRecords: function removeNewRecords(ui) {\n        self.removeNewRecords(ui);\n      },\n      showGridExportOptions: function showGridExportOptions() {\n        self.showGridExportOptions();\n      },\n      performExportGrid: function performExportGrid(printParams) {\n        self.performExportGrid(printParams);\n      },\n      performCollapseGrid: function performCollapseGrid() {\n        self.performCollapseGrid();\n      },\n      rowdblclick: function rowdblclick(ui) {\n        if (mode != \"execution\") return;\n\n        if (self.canEditRow())\n        self.editRow(ui.businessKey);\n      } });\n\n\n  },\n\n  /*\r\n     *   Triggers the grid plugin event\r\n     */\n  triggerGridPluginHandler: function triggerGridPluginHandler() {\n    try {\n      var args = Array.prototype.slice.call(arguments, 0);\n      return this.grid.bizagi_grid_desktop.apply(this.grid, args);\n    } catch (e) {\n    }\n  },\n\n  /*\r\n     *   Method to render non editable values\r\n     */\n  postRenderReadOnly: function postRenderReadOnly() {\n    // Do the same as the post-render            \n    this.postRender();\n  },\n  /**\r\n      *   Creates the column model required to initialize the grid plugin\r\n      */\n  buildColumnModel: function buildColumnModel() {\n    var self = this;\n    var columns = self.columns;\n\n    // Create id column first\n    var keyColumn = {\n      name: \"id\",\n      index: 0,\n      label: \"id\",\n      hidden: true,\n      key: true,\n      tooltip: \"\" };\n\n\n    // Add to column model\n    var columnModel = [];\n    columnModel.push(keyColumn);\n\n    $.each(columns, function (index, column) {\n\n      // Set grid column\n      column.columnIndex = index + 1;\n\n      var dataType = bizagi.util.normalizeType(column.properties.type);\n      var columnLabel = !bizagi.util.isEmpty(column.properties.displayName) ? column.properties.displayName : \" \";\n      var gridColumn = {\n        name: column.properties.xpath,\n        index: index + 1,\n        label: columnLabel,\n        key: false,\n        tooltip: column.properties.tooltip || \"\",\n        hidden: !column.properties.visible || /columnHidden/i.test(dataType) || column.properties.columnVisible == false,\n        summarizeBy: column.properties.totalize && column.properties.totalize.operation ? column.properties.totalize.operation : undefined,\n        bizAgiProperties: column.properties };\n\n\n      columnModel.push(gridColumn);\n    });\n\n    return columnModel;\n  },\n  /**\r\n      * Makes the grid to refresh\r\n      */\n  refresh: function refresh() {\n    var self = this;\n    if (self.parent && self.parent.properties && self.parent.properties.searchParams && self.parent.properties.searchParams.searchTriggeredBy) {\n      self.fetchData(1);\n    } else {\n      self.fetchData();\n    }\n  },\n  /*\r\n     *   Holds the execution until the grid data is ready after a load operation\r\n     */\n  dataReady: function dataReady() {\n    return this.dataReadyDeferred != null ? this.dataReadyDeferred.promise() : null;\n  },\n  /*\r\n     * Update data from local changes\r\n     */\n  loadChanges: function loadChanges(rows) {\n    var self = this;\n    // get data from the rows\n    for (var rowIndex = 0; rowIndex < rows.length; rowIndex++) {\n      var rowChanges = self.changes[rows[rowIndex][0]];\n      if (self.exclusiveChanges) {\n        rowChanges = $.extend(rowChanges || {}, self.getExclusiveChangeByRow(rows[rowIndex][0]));\n      }\n      // search for changes\n      if (rowChanges !== undefined) {\n        // update all rowChanges in data\n        for (var xpath in rowChanges) {\n          if (rowChanges.hasOwnProperty(xpath)) {\n            var columnData = self.getColumn(xpath);\n            rows[rowIndex][columnData.columnIndex] = self.mapChangeValue(columnData.properties.type, rowChanges[xpath], columnData.comboData);\n          }\n        }\n      }\n    }\n  },\n\n  mapChangeValue: function mapChangeValue(type, change, data) {\n    data = data || [];\n    var value = change;\n    if (change !== null && typeof change !== \"undefined\") {\n      if (type == \"columnCombo\" || type == \"columnRadio\") {\n        if (!bizagi.util.isArray(change)) {\n          var item = data.find(function (el) {\n            return el.id == change;\n          });\n\n          if (item) {\n            value = [[item.id, item.value]];\n          }\n        }\n      }\n    }\n\n    return value;\n  },\n\n  /*\r\n     *   Method to set data and update the grid\r\n     */\n  updateData: function updateData(data) {\n    var self = this;\n    var grid = self.grid;\n    var columns = self.columns;\n\n    // Set value in control\n    if (data) {\n      self.properties.data = data;\n      self.setCellOverrides(data, columns);\n      self.triggerGridPluginHandler(\"setData\", data);\n\n      //apply columns width\n      self.applyColumnsWidthUpdate(grid, columns);\n\n      self.processLayout(isLabelFormat, self.properties.textFormat || {});\n      self.processLayout(!isLabelFormat, self.properties.valueFormat || {});\n    }\n  },\n  /*\r\n     *   Method to fetch data from the server and then update the data\r\n     */\n  fetchData: function fetchData(page, sortBy, sortType) {\n    var self = this;\n    var properties = self.properties;\n\n    self.dataReadyDeferred = new $.Deferred();\n    self.sortBy = sortBy;\n    self.sortType = sortType;\n\n    // Define defaults\n    page = page || properties.page || 1;\n    sortBy = sortBy || properties.sortBy || \"\";\n    sortType = sortType || properties.sortOrder || \"asc\";\n\n    // Update control properties\n    properties.page = page;\n    properties.sortBy = sortBy;\n    properties.sortType = sortType;\n    properties.sort = sortBy + \" \" + sortType;\n\n    // Start loading to avoid multiple calls to the server\n    self.startLoading();\n\n    $.when(self.getRemoteData()).\n    then(function (data) {\n      self.endLoading();\n      if (self.disposed) return;\n      if (data) {\n\n        if (!properties.hideActionsColumn) {\n          if (!self.isRTLDirection) {\n            self.spliceRowData(data, 1);\n\n            self.spliceRowDataVisible(data, 1);\n            self.spliceRowDataEditable(data, 1);\n          } else {\n            self.spliceRowData(data);\n          }\n        }\n\n        if (self.isRTL()) {\n          //remove one extra column from backend. A unnecessary guid to Front-End.\n          //In BPM Project a note says:\n          ////NOTES: At this time there is no way to know whether an Entity has Localized attributes,\n          ////so, the Query Engine will always get Guid values for every Parametric Entity\n          data.rows = self.removeRemainingColumns(data.rows, self.columns.length);\n\n          data.rows = self.changeOrderData(data.rows);\n        }\n        self.loadChanges(data.rows);\n        self.updateData(data);\n\n        if (self.properties.changed !== false || self.properties.method === \"delete\") {\n          self.triggerRenderChange({ changed: false });\n          delete self.properties.changed;\n          delete self.properties.method;\n        }\n\n        if (self.properties.textFormat && typeof self.properties.textFormat.color != \"undefined\") {\n          $(\".bz-rn-grid-header-title, .bz-rn-grid-header-title-rtl\", self.grid).\n          style(\"color\", self.properties.textFormat.color, \"important\");\n        }\n\n        if (self.properties.textFormat && typeof self.properties.textFormat.background != \"undefined\") {\n          $(\".bz-rn-grid-cn-header, .bz-rn-grid-cn-header-rtl\", self.grid).\n          css(\"backgroundColor\", self.properties.textFormat.background);\n\n          $(\".bz-rn-grid-container-foother, .bz-rn-grid-container-foother-rtl\", self.grid).\n          css(\"backgroundColor\", self.properties.textFormat.background);\n        }\n\n        $(\"th\", self.grid).css(\"fontWeight\", \"400\");\n        self.dataReadyDeferred.resolve();\n      }\n    }).fail(function (data) {\n      self.endLoading();\n    });\n  },\n  /*\r\n     *   Returns a promise that will resolve when the element is ready to save\r\n     */\n  isReadyToSave: function isReadyToSave() {\n    var self = this;\n\n    // Save pending inline add rows\n    if (self.grid && self.properties.inlineAdd && (self.properties.allowEdit || this.hasNewRecordsToSave())) {\n      var errorsMessage = [];\n      var newKeys = self.triggerGridPluginHandler(\"getNewRowKeys\");\n      var form = self.getFormContainer();\n\n      // Save new rows then save the whole screen\n      if (newKeys && newKeys.length > 0 && self.isValid(errorsMessage)) {\n        self.properties.alreadySaved = true;\n        return self.saveInlineAddedRows(newKeys).\n        then(function () {\n          self.refresh();\n        });\n      }\n\n      // Show validation message\n      if (errorsMessage.length > 0) {\n        var errDef = $.Deferred();\n\n        errorsMessage.forEach(function (error, index) {\n          form.validationController.showValidationMessage(error.message, error.xpath);\n        });\n\n        errDef.reject(\"error\");\n\n        return errDef.promise();\n      }\n    }\n\n    return null;\n  },\n\n  /*\r\n     *   Add the render data to the given collection in order to send data to the server\r\n     */\n  collectData: function collectData(renderValues) {\n    var self = this;\n    var form = self.getFormContainer();\n    var lastActionButton = form ? form.getLastActionButton() : {};\n    var skipSubmitData = lastActionButton && lastActionButton.action === \"next\";\n    var errorsMessage = [];\n    var saveDeferred;\n    var newKeys;\n\n    // Save pending inline add rows\n    if (self.grid && (self.properties.inlineAdd || self.properties.inlineEdit)) {\n\n      try {\n        newKeys = self.triggerGridPluginHandler(\"getNewRowKeys\");\n        newKeys = newKeys || [];\n      } catch (e) {\n        newKeys = [];\n      }\n\n      if (newKeys && newKeys.length > 0 && skipSubmitData) {\n        self.properties.alreadySaved = false;\n\n        if (!self.isValid(errorsMessage)) return renderValues;\n      }\n\n      // Save new rows then save the whole screen\n      if (newKeys && newKeys.length > 0 && !self.properties.alreadySaved && self.isValid(errorsMessage)) {\n        saveDeferred = self.saveInlineAddedRows(newKeys).\n        then(function () {\n          self.refresh();\n        });\n\n        // Add to deferred collections in order to sync when saving\n        renderValues.deferreds = renderValues.deferreds || [];\n        renderValues.deferreds.push(saveDeferred);\n      }\n\n      if (newKeys && newKeys.length > 0 && !self.isValid(errorsMessage) && saveDeferred) {\n        self.cleanNewRecords();\n      }\n\n      // Remove adding keys from current changes\n      for (var i = 0; i < newKeys.length; i++) {\n        if (self.changes[newKeys[i]]) {\n          delete self.changes[newKeys[i]];\n        }\n      }\n\n    }\n\n    // Call base method\n    self._super(renderValues);\n  },\n\n  sortRequestedPage: function sortRequestedPage(ui) {\n    var self = this;\n    var sortName;\n    var getColumn = self.getColumn(ui.sortBy);\n\n    if (getColumn) {\n      sortName = getColumn.getSortName();\n    } else {\n      getColumn = self.getColumn(ui.sortBy.split(\".\")[0]);\n      if (getColumn) {\n        sortName = getColumn.getSortName();\n      }\n    }\n\n    if (ui.sortBy.split(\".\").length > 1) {\n      if (ui.sortBy.split(\".\")[0] == sortName) {\n        sortName = ui.sortBy;\n      }\n    }\n\n    self.fetchData(ui.page, sortName, ui.sortType);\n  },\n\n  /*\r\n     *   Customizes the content drawing inside the cell\r\n     */\n  drawCell: function drawCell(column, key, value, isNewRow) {\n    var self = this;\n\n    if (column.key) return value;\n\n    // Get render column\n    var cellOverride = self.getCellOverride(key, column.index - 1);\n    var columnIndex = column.index - 1;\n    var renderColumn = self.columns[columnIndex];\n\n    // Fix issue suite-8559, data with null records        \n    self.newRecords = self.newRecords || {};\n\n    // Get cell properties\n    if (!self.cellMetadata[key]) self.cellMetadata[key] = {};\n    if (!self.cellMetadata[key][columnIndex]) self.cellMetadata[key][columnIndex] = {};\n\n    var properties = self.cellMetadata[key][columnIndex].properties || renderColumn.properties;\n    var visible = properties.visible !== undefined ? properties.visible : true;\n    var editable = properties.editable !== undefined ? properties.editable : true;\n\n\n    // Apply overrides from cellOverrides\n    visible = cellOverride.visible;\n    editable = properties.editable ? cellOverride.editable : false;\n\n    // Show editable cell when we are performing inline add operation\n    if (isNewRow && column.bizAgiProperties.type !== \"columnFormLink\") {/*FIX: QAF-1883*/\n      editable = true;\n    }\n\n    renderColumn.properties.displayType = 'value';\n\n    if (column.bizAgiProperties.type === \"columnActions\") {\n      editable = true;\n    }\n\n    // If the cell we are drawing is the summary cell, we need to make it readonly\n    if (key == \"summary\") {\n      editable = false;\n    }\n\n    // Do the render\n    if (visible) {\n      if (editable) {\n        return self.drawEditableCell(renderColumn, properties, key, value, isNewRow);\n      } else {\n        return self.drawReadonlyCell(renderColumn, properties, key, value);\n      }\n    } else {\n      // This line is just to instantiate the decorator for actions and validations. TM02298\n      self.drawReadonlyCell(renderColumn, properties, key, value);\n      return \"<label></label>\";\n    }\n  },\n\n  /*\r\n     *   Draws the editable version for the cell\r\n     */\n  drawEditableCell: function drawEditableCell(renderColumn, properties, key, value, isNewRow) {\n    var self = this;\n    var defer = new $.Deferred();\n\n    // Set editable\n    var originalEditable = renderColumn.properties.editable;\n    renderColumn.properties.editable = true;\n\n    // Fix problem when required property lose\n    renderColumn.overrideProperties({ required: properties.required });\n\n    // Render cell\n    $.when(renderColumn.render(key, value)).done(function (cell) {\n      // Register array with new records, just when this is a newrecord\n      if (isNewRow && !self.newRecords[key]) {\n        self.newRecords[key] = {};\n      }\n\n      // convert all row visible\n      for (var j = 0; j < self.columns.length; j++) {\n        self.cellOverrides[key] = self.cellOverrides[key] || {};\n        self.getCellOverride(key, j).visible = self.getCellOverride(key, j).visible != undefined ? self.getCellOverride(key, j).visible : true;\n      }\n\n      // Add change handler\n      renderColumn.getDecorated(key).\n      unbind(\"renderchange.draweditable\").\n      bind(\"renderchange.draweditable\", function (render, args) {\n        self.onCellChange(renderColumn, cell, key, args);\n      });\n\n      // Resolve cell\n      defer.resolve(cell);\n    });\n\n    // Restore editable\n    renderColumn.properties.editable = originalEditable;\n\n    // Return promise\n    return defer.promise();\n  },\n  /*\r\n     *   Draws the readonly version for the cell\r\n     */\n  drawReadonlyCell: function drawReadonlyCell(renderColumn, properties, key, value) {\n    var result = \"\";\n\n    // Use totalizer format when printing summary row\n    if (key === \"summary\") {\n      var originalFormat = renderColumn.properties.textFormat;\n      if (renderColumn.properties.totalize) {\n        renderColumn.properties.textFormat = renderColumn.properties.totalize.format;\n      }\n\n      result = renderColumn.renderSummary(key, value);\n\n      // Restore column format\n      renderColumn.properties.textFormat = originalFormat;\n    } else {\n      result = renderColumn.renderReadOnly(key, value);\n    }\n\n    return result;\n  },\n  /*\r\n     *   Defines the handler when a cell changes its value\r\n     */\n  onCellChange: function onCellChange(renderColumn, cell, key, args) {\n    var self = this;\n    var _value = renderColumn.getValue(key);\n    var compositeValue = renderColumn.getCompositeValue(key);\n\n    var isNewRecord = self.triggerGridPluginHandler(\"isNewRecord\", key);\n    var newKeys;\n    var errorsMessage = [];\n    var trigger = isNewRecord ? false : true;\n    var dataType = renderColumn.properties.type;\n\n    try {\n      if (dataType == \"columnDate\" && renderColumn.data.properties.showTime == true) {\n\n        if (!bizagi.util.isEmpty(_value)) {\n          var date = bizagi.util.dateFormatter.getDateFromInvariant(_value, true);\n          _value = bizagi.util.dateFormatter.formatInvariant(date, true);\n        } else if (_value === \"\") {\n          _value = \"\";\n        }\n      } else {\n\n        if (dataType == \"columnDate\") {\n\n          if (!bizagi.util.isEmpty(_value)) {\n            var date = bizagi.util.dateFormatter.getDateFromInvariant(_value, false);\n            date.setHours(0, 0, 0, 0);\n            _value = bizagi.util.dateFormatter.formatInvariant(date, true);\n          } else if (_value === \"\") {\n            _value = \"\";\n          }\n\n        } else {\n          if (dataType === \"columnSearch\") {\n\n            var isSubmitOnChange = false;\n\n            if (self.properties.submitOnChange)\n            isSubmitOnChange = renderColumn.properties.advancedSearch || false;\n\n            if (isNewRecord && self.properties.inlineAdd && isSubmitOnChange) {\n              self.collectGridChange($.extend(args, {\n                id: key,\n                xpath: renderColumn.properties.xpath || renderColumn.properties.id,\n                value: _value,\n                compositeValue: compositeValue,\n                columnIndex: renderColumn.columnIndex,\n                trigger: trigger,\n                dataType: dataType,\n                renderId: renderColumn.properties.id }));\n\n\n              try {\n                newKeys = self.triggerGridPluginHandler(\"getNewRowKeys\");\n              } catch (e) {\n                newKeys = [];\n              }\n\n              args.render.startActionExecution();\n\n              var saveDeferred = self.saveInlineAddedRows(newKeys);\n              // Remove adding keys from current changes\n              for (var i = 0; i < newKeys.length; i++) {\n                if (self.changes[newKeys[i]]) {\n                  delete self.changes[newKeys[i]];\n                }\n              }\n\n              $.when(saveDeferred).done(function () {\n                //Save edited rows\n                if (!bizagi.util.isEmpty(self.changes)) {\n                  $.when(self.saveRows()).done(function () {\n                    self.refresh();\n                  });\n                } else {\n                  self.refresh();\n                }\n\n                args.render.endActionExecution();\n              });\n\n              return;\n            }\n          }\n        }\n      }\n\n      var isExclusiveControl = dataType === \"columnBoolean\" && renderColumn.properties.isExclusive;\n\n      if (!isExclusiveControl && (self.properties.allowEdit || isNewRecord)) {\n        self.collectGridChange($.extend(args, {\n          id: key,\n          xpath: renderColumn.properties.xpath || renderColumn.properties.id,\n          value: _value,\n          compositeValue: compositeValue,\n          columnIndex: renderColumn.columnIndex,\n          trigger: trigger,\n          dataType: dataType,\n          renderId: renderColumn.properties.id }));\n\n      }\n\n      if (isExclusiveControl && self.properties.allowEdit) {\n        self.triggerGridPluginHandler(\"deleteCellExclusiveValues\", renderColumn.columnIndex);\n      }\n\n      // Update change in grid's component data\n      self.triggerGridPluginHandler(\"changeCellValue\", key, renderColumn.columnIndex, _value);\n\n      // If the column has totalizers then we need to refresh the summary\n      if (renderColumn.properties.totalize && renderColumn.properties.totalize.operation) {\n        self.triggerGridPluginHandler(\"refreshSummary\", renderColumn.columnIndex);\n      }\n    } catch (error) {\n      bizagi.log(error.message);\n    }\n  },\n\n  /*\r\n     *   Executes when the cell is ready and inserted into the DOM\r\n     */\n  onCellReady: function onCellReady(column, key, cell, isNewRow) {\n    var self = this;\n\n    // Get render column\n    var columnIndex = column.index - 1;\n    var cellOverride = self.getCellOverride(key, columnIndex);\n    var renderColumn = self.columns[columnIndex];\n    var properties = self.cellMetadata[key][columnIndex].properties || renderColumn.properties;\n    var visible = properties.visible !== undefined ? properties.visible : true;\n    var editable = properties.editable !== undefined ? properties.editable : true;\n\n    // apply overrides\n    visible = cellOverride.visible;\n\n    if (column.bizAgiProperties.columnwidth) {\n      if (/boolean/i.test(column.bizAgiProperties.type)) {\n        $(cell).css({\n          \"min-width\": column.bizAgiProperties.columnwidth,\n          \"width\": column.bizAgiProperties.columnwidth });\n\n      } else {\n        $(cell).css({\n          \"min-width\": column.bizAgiProperties.columnwidth,\n          \"max-width\": column.bizAgiProperties.columnwidth });\n\n      }\n    }\n\n    // If the cell we are drawing is the summary cell, we need to make it readonly\n    if (key == \"summary\")\n    editable = false;\n\n    // Show editable cell when we are performing inline add operation\n    if (isNewRow) {\n      editable = true;\n    }\n\n    // Show editable cell when we are performing inline add operation\n    if (column.bizAgiProperties.type === \"columnActions\") {\n      editable = true;\n    }\n\n    if (visible) {\n\n      if (editable) {\n\n        // Set editable\n        var originalEditable = renderColumn.properties.editable;\n        renderColumn.properties.editable = editable;\n\n        // Set xpath context for submitonchange action\n        if (renderColumn.properties.submitOnChange) {\n          var control = renderColumn.getDecorated(key);\n          if (control) {\n            control.properties.submitOnChangexpathContext = self.properties.xpath + \"[]\";\n            control.properties.submitOnChangexpathContextRow = self.properties.xpath + \"[id=\" + key + \"]\";\n          }\n        }\n\n        // Execute cell post render\n        renderColumn.postRender(key, cell);\n\n        // Restore editable\n        renderColumn.properties.editable = originalEditable;\n\n      } else {\n\n        if (key == \"summary\") {\n          //apply styles to summary cells\n          if (!renderColumn.postRenderSummary(key, cell)) {\n            self.applySummaryColumnStyles(cell, properties);\n          }\n\n        } else {\n          // Call post-render\n          renderColumn.postRenderReadOnly(key, cell);\n        }\n\n      }\n\n    }\n  },\n\n  /*\r\n     *   Get aligning class\r\n     */\n  getAlignClass: function getAlignClass(alignType) {\n    switch (alignType) {\n      case 'right':\n        return \"ui-bizagi-grid-align-right\";\n        break;\n      case 'left':\n        return \"ui-bizagi-grid-align-left\";\n        break;\n      case 'center':\n        return \"ui-bizagi-grid-align-center\";\n        break;\n      case 'justify':\n        return \"ui-bizagi-grid-align-justify\";\n        break;}\n\n\n  },\n  /**\r\n      *  Adds a row to the grid\r\n      */\n  addRow: function addRow(addFormDialog) {\n    var self = this;\n    var properties = self.properties;\n    var reverseButtons = properties.orientation == \"rtl\" ? true : false;\n    var buttons = [];\n\n    if (addFormDialog) {\n      // Send add request\n      if (addFormDialog.open) {\n        return;\n      } else {\n        addFormDialog.open = true;\n      }\n    }\n    $.when(self.submitAddRequest()).\n    done(function (newid) {\n\n      // Show dialog with new form after that\n      var dialog = new bizagi.rendering.dialog.form(self.dataService, self.renderFactory, {\n        title: properties.addLabel,\n        orientation: properties.orientation || \"ltr\",\n        maximized: bizagi.override.maximizeGridPopup || false,\n        onSave: function onSave(data) {\n          if (properties.contextType) {\n            data[self.dataService.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = properties.contextType;\n          }\n          return self.submitSaveRequest(newid, data);\n        },\n        onCancel: function onCancel() {\n        } });\n\n\n      buttons[0] = {\n        text: bizagi.localization.getResource(\"render-form-dialog-box-save\"),\n        click: function click(data) {\n          if (properties.contextType) {\n            data[self.dataService.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = properties.contextType;\n          }\n          return self.submitSaveRequest(newid, data);\n        } };\n\n\n      buttons[1] = {\n        text: bizagi.localization.getResource(\"render-form-dialog-box-cancel\"),\n        click: function click() {\n          self.submitRollbackRequest();\n        } };\n\n\n      if (reverseButtons)\n      buttons.reverse();\n\n      var recordXpath = properties.xpath + \"[id=\" + newid + \"]\";\n      dialog.render({\n        idRender: properties.id,\n        recordXPath: recordXpath,\n        xpathContext: properties.xpathContext,\n        idPageCache: properties.idPageCache,\n        requestedForm: \"addForm\",\n        contextType: properties.contextType,\n        url: properties.addPage,\n        fromRender: self,\n        mainForm: self.getMainForm(self.getFormContainer()) }).\n\n      done(function (data) {\n        // Set loading status\n        self.addExclusiveChange(newid, data);\n        self.startLoading();\n\n        if (!properties.submitOnChange) {\n          // Reload grid\n          self.fetchData();\n\n        } else {\n          // Submits the entire form\n          self.submitOnChange().always(function () {\n            self.endLoading();\n          });\n        }\n      }).\n      fail(function (data) {\n        addFormDialog.open = false;\n        $.when(self.submitRollbackRequest(data)).done(function () {\n          self.submitInvalidatePageCacheRequest(data);\n        });\n      });\n    });\n  },\n\n  /* Return true of the grid is editable and has edit form*/\n  canEditRow: function canEditRow() {\n    var self = this;\n    var properties = self.properties;\n    return properties.allowEdit && properties.withEditForm && properties.data != null;\n  },\n  /**\r\n      *  Edits a row in the grid with Form\r\n      *\r\n      */\n  editRow: function editRow(id) {\n\n    if (id == 0 || id == undefined) {\n      bizagi.showMessageBox(bizagi.localization.getResource(\"render-grid-message-no-selected-row\"), bizagi.localization.getResource(\"render-grid-header-no-selected-row\"));\n      return;\n    }\n\n    var self = this;\n    var properties = self.properties;\n\n    //Checks if there is any pending changes in the selected row\n    if (self.changes[id] !== undefined || self.exclusiveChanges && Object.keys(self.exclusiveChanges).length >= 1) {\n\n      var data = $.extend(self.changes[id], {});\n      data.idPageCache = properties.idPageCache;\n      data.disableServerGridValidations = true;\n\n      $(\".ui-tooltip\").remove();\n\n      $.when(self.submitSaveRequest(id, data)).done(function () {\n\n        // Set loading status\n        self.startLoading();\n\n        if (!properties.submitOnChange) {\n          // Reload grid\n          self.fetchData();\n\n        } else {\n          // Submits the entire form\n          self.submitForGridChange().always(function () {\n            self.endLoading();\n\n            // Send edit request\n            self.executeSubmitEditRequest(id, function (data) {\n              self.addExclusiveChange(id, data);\n            });\n          });\n        }\n      });\n    } else {\n      self.executeSubmitEditRequest(id, function (data) {\n        self.addExclusiveChange(id, data);\n      });\n    }\n  },\n\n  /*\r\n     * Gets the format header and builds a object with a css string for label and header\r\n     */\n  getHeaderStyles: function getHeaderStyles() {\n    var self = this;\n    var label = \"\";\n    var header = \"\";\n    var properties = self.properties;\n\n    if (properties.headerFormat) {\n      var format = properties.headerFormat;\n\n      if (format.color) {\n        label += \"color: \" + format.color + \" !important;\";\n      }\n\n      if (format.background) {\n        header += \"background-color: \" + format.background + \";\";\n      }\n\n      label += \"font-weight: \" + (format.bold ? \"bold; \" : \"normal; \");\n\n      if (format.italic) {\n        label += \"font-style: italic; \";\n      }\n\n      if (format.underline || format.strikethru) {\n        var strikethru = bizagi.util.parseBoolean(format.strikethru) ? \"line-through \" : \"\";\n        var underline = bizagi.util.parseBoolean(format.underline) ? \"underline \" : \"\";\n\n        label += \"text-decoration: \" + strikethru + underline + \";\";\n      }\n\n      if (format.size && format.size != \"0\") {\n        var newFontSize = 100 + Number(format.size) * 10 + \"%\";\n        label += \"font-size: \" + newFontSize + \";\";\n      }\n\n    }\n\n    return { label: label, header: header };\n  },\n\n  /**\r\n      * Deprecated method\r\n      *\r\n      * Edit record without form\r\n      * @param int id\r\n      * @returns\r\n      */\n  editInlineRow: function editInlineRow(id) {\n    var self = this;\n    var control = self.getControl();\n\n    if (id == 0 || id == undefined) {\n      bizagi.showMessageBox(bizagi.localization.getResource(\"render-grid-message-no-selected-row\"), bizagi.localization.getResource(\"render-grid-header-no-selected-row\"));\n      return;\n    }\n\n    // Show save and cancel buttons\n    var buttons = $(\"[data-bizagi-component=buttons]\", control);\n    buttons.find(\"[data-action=save]\").css(\"display\", \"inline-block\");\n    buttons.find(\"[data-action=cancel]\").css(\"display\", \"inline-block\");\n\n    // Change row to editable\n    self.changeRowEditable(id, true);\n\n  },\n  /*\r\n     * Change all cells in the row\r\n     */\n  changeRowEditable: function changeRowEditable(id, editable) {\n  },\n  /*\r\n     *   Changes the background for a cell\r\n     */\n  changeCellBackgroundColor: function changeCellBackgroundColor(key, xpath, argument) {\n    var self = this;\n\n    if (self.initialLoadDone) {\n      var control = self.getControlCell(key, xpath);\n      if (control) {\n        control.changeCellBackgroundColor(argument);\n      }\n    } else {\n      self.pendingActions.push({\n        method: self.changeCellBackgroundColor,\n        arguments: arguments });\n\n    }\n\n\n  },\n  /*\r\n     *   Changes the background for a cell\r\n     */\n  changeCellColor: function changeCellColor(key, xpath, argument) {\n    var self = this;\n\n    if (self.initialLoadDone) {\n      var control = self.getControlCell(key, xpath);\n\n      control && control.changeColor(argument);\n    } else {\n      self.pendingActions.push({\n        method: self.changeCellColor,\n        arguments: arguments });\n\n    }\n  },\n  /**\r\n      * Changes the visibility for a cell\r\n      * @param key\r\n      * @param xpath\r\n      * @param argument\r\n      */\n  changeCellVisibility: function changeCellVisibility(key, xpath, argument) {\n    var self = this;\n\n    if (self.initialLoadDone) {\n\n      var control = self.getControlCell(key, xpath);\n      if (control) {\n        control.changeCellVisibility(argument);\n\n        var index = (self.columns || []).findIndex(function (cell) {\n          return self.isCurrentGridCell(cell.properties.xpath, cell.properties.id, xpath);\n        }) || 0;\n\n        var column = self.getColumn(xpath);\n        var cellVisible = column && column.properties.columnVisible && argument;\n\n        self.cellOverrides[key] = self.cellOverrides[key] || {};\n        self.getCellOverride(key, index).visible = cellVisible;\n      }\n    } else {\n      self.pendingActions.push({\n        method: self.changeCellVisibility,\n        arguments: arguments });\n\n    }\n  },\n\n  /**\r\n      * Changes the editability for a cell\r\n      * @param key\r\n      * @param xpath\r\n      * @param argument\r\n      */\n  changeCellEditability: function changeCellEditability(key, xpath, argument) {\n    var self = this;\n\n    if (self.initialLoadDone) {\n\n      var control = self.getControlCell(key, xpath);\n      if (control && control.control) {\n        control.changeEditabilityCellControl(argument, key, xpath);\n\n        var index = (self.columns || []).findIndex(function (cell) {\n          return self.isCurrentGridCell(cell.properties.xpath, cell.properties.id, xpath);\n        }) || 0;\n\n        self.cellOverrides[key] = self.cellOverrides[key] || {};\n        self.getCellOverride(key, index).editable = argument;\n      }\n    } else {\n      self.pendingActions.push({ method: self.changeEditability, arguments: arguments });\n    }\n  },\n\n  changeColumnEditability: function changeColumnEditability(xpath, argument) {\n    var self = this;\n    if (self.initialLoadDone) {\n      var column = self.getColumn(xpath);\n      if (column) {\n        column.properties.editable = argument === \"Default\" ? self.originalProperties.editable : bizagi.util.parseBoolean(argument);\n      }\n    } else {\n      self.pendingActions.push({ method: self.changeEditability, arguments: arguments });\n    }\n  },\n\n  changeColumnVisibility: function changeColumnVisibility(xpath, argument) {\n    var self = this;\n    if (self.initialLoadDone) {\n      var column = self.getColumn(xpath);\n      if (column) {\n        column.properties.visible = argument === \"Default\" ? self.originalProperties.visible : bizagi.util.parseBoolean(argument);\n      }\n    } else {\n      self.pendingActions.push({ method: self.changeCellVisibility, arguments: arguments });\n    }\n  },\n\n  changeColumnRequired: function changeColumnRequired(xpath, argument) {\n    var self = this;\n    if (self.initialLoadDone) {\n      var column = self.getColumn(xpath);\n      if (column) {\n        column.properties.required = argument === \"Default\" ? self.originalProperties.required : bizagi.util.parseBoolean(argument);\n      }\n    } else {\n      self.pendingActions.push({\n        method: self.changeCellRequired,\n        arguments: arguments });\n\n    }\n  },\n\n  afterToRefresh: function afterToRefresh() {\n    var self = this;\n    var action, form;\n    var args = Array.prototype.slice.call(arguments);\n\n    if (bizagi.override.enableGridRefreshAfterCellRefresh) {\n      if (args[0] && bizagi.util.isObject(args[0])) {\n        action = args[0].action;\n\n        if (action == \"refreshCell\") {\n          form = self.getFormContainer();\n          $.when(form.getLoaderPromise()).done(function () {\n            form.actionController.refreshControl(self.properties.xpath, form.properties.xpathContext, \"refresh\");\n          });\n        }\n      }\n    }\n  },\n\n  /**\r\n      * Clean data of cell\r\n      * @param key\r\n      * @param xpath\r\n      * @returns {*}\r\n      */\n  cleanCellData: function cleanCellData(key, xpath) {\n    var self = this;\n\n    if (self.initialLoadDone) {\n      var control = self.getControlCell(key, xpath);\n      if (control) {\n        return $.when(control.cleanData()).then(function () {\n          var index = (self.columns || []).findIndex(function (cell) {\n            return self.isCurrentGridCell(cell.properties.xpath, cell.properties.id, xpath);\n          }) || 0;\n\n          var rows = self.properties.data.rows;\n          var i = 0;\n          var rowLength = rows.length;\n\n          for (; i < rowLength; i++) {\n            if (Number(key) === rows[i][0]) {\n              rows[i][index + 1] = \"\";\n              break;\n            }\n          }\n          self.cellOverrides[key] = self.cellOverrides[key] || {};\n          self.getCellOverride(key, index).value = null;\n        });\n      }\n    } else {\n      self.pendingActions.push({\n        method: self.cleanData,\n        arguments: \"\" });\n\n    }\n  },\n  /**\r\n      * Changes the required for cell\r\n      * @param key\r\n      * @param xpath\r\n      * @param argument\r\n      */\n  changeCellRequired: function changeCellRequired(key, xpath, argument) {\n    var self = this;\n\n    if (self.initialLoadDone) {\n      var control = self.getControlCell(key, xpath);\n      if (control) {\n        control.changeCellRequired(argument);\n        var index = (self.columns || []).findIndex(function (cell) {\n          return self.isCurrentGridCell(cell.properties.xpath, cell.properties.id, xpath);\n        }) || 0;\n\n        self.cellOverrides[key] = self.cellOverrides[key] || {};\n        self.getCellOverride(key, index).required = argument;\n      }\n    } else {\n      self.pendingActions.push({\n        method: self.changeCellRequired,\n        arguments: arguments });\n\n    }\n  },\n  /*\r\n     *  Changes the required for cell\r\n     */\n  changeCellValue: function changeCellValue(key, xpath, argument) {\n    var self = this;\n\n    if (self.initialLoadDone) {\n      var control = self.getControlCell(key, xpath);\n      if (control) {\n        control.setDisplayValue(argument);\n\n        var renderColumn = control.column || {};\n        var dataType = renderColumn.properties && renderColumn.properties.type;\n        var _value = self.getCellValueFormatted(renderColumn, renderColumn.getValue(key));\n\n        control.triggerHandler(\"renderchange\", { render: self, changed: true });\n\n        self.collectGridChange({\n          id: key,\n          xpath: renderColumn.properties.xpath,\n          value: _value,\n          compositeValue: renderColumn.getCompositeValue(key),\n          columnIndex: control.columnIndex,\n          trigger: false,\n          dataType: dataType,\n          renderId: renderColumn.properties.id });\n\n      }\n    } else {\n      self.pendingActions.push({\n        method: self.setDisplayValue,\n        arguments: arguments });\n\n    }\n  },\n\n  /*\r\n      *   Changes the max value for a cell\r\n      */\n  changeCellMaxValue: function changeCellMaxValue(key, xpath, argument) {\n    var self = this;\n\n    if (self.initialLoadDone) {\n      var control = self.getControlCell(key, xpath);\n      if (control) {\n        control.changeMaxValue(argument);\n      }\n    } else {\n      self.pendingActions.push({\n        method: self.changeMaxValue,\n        arguments: arguments });\n\n    }\n  },\n  /*\r\n      *   Changes the min value for a cell\r\n      */\n  changeCellMinValue: function changeCellMinValue(key, xpath, argument) {\n    var self = this;\n\n    if (self.initialLoadDone) {\n      var control = self.getControlCell(key, xpath);\n      if (control) {\n        control.changeMinValue(argument);\n      }\n    } else {\n      self.pendingActions.push({\n        method: self.changeMinValue,\n        arguments: arguments });\n\n    }\n  },\n  /**\r\n      *  Deletes  a row to the grid\r\n      */\n  deleteRow: function deleteRow(id) {\n    var self = this;\n\n    if (!id || id == 0) {\n      bizagi.showMessageBox(bizagi.localization.getResource(\"render-grid-message-no-selected-row\"), bizagi.localization.getResource(\"render-grid-header-no-selected-row\"));\n      return;\n    }\n\n    bizagi.showConfirmationBox(this.getResource(\"render-grid-delete-confirmation\")).\n    done(function () {\n      self.startLoading();\n      $.when(self.saveRows()).then(function () {\n        // Do a grid record deletion\n        return $.when(self.submitDeleteRequest(id)).then(function (data) {\n          // Remove temporal record\n          self.removeNewRecords({ keys: [id] });\n\n          // Check if the answer of request was valid\n          // if there an rule validation on delete action, the answer could be invalid\n          // data.type == \"validationMessage\"\n          if (data.type == \"success\") {\n            // Trigger the event\n            //'key' must be included to trigger a single call to actions and validations\n            //line 310 bizagi.command.controllers.action\n            self.triggerRenderChange({ rowDeleted: true, changed: false, key: id });\n            //For exclusive checks - Remove check over list\n            for (var key in self.enabledChecks) {\n              var checks = self.enabledChecks[key];\n              var index = checks.findIndex(function (el) {\n                return el.id == id;\n              });\n              checks.splice(index, 1);\n            }\n          }\n\n          // Reload grid\n          self.properties.changed = false;\n          self.properties.method = \"delete\";\n\n          self.calculateFetchData(data, id);\n        });\n      }).always(function () {\n        self.endLoading();\n      });\n    });\n  },\n\n  calculateFetchData: function calculateFetchData(data, id) {\n    var self = this,rows;\n    var properties = self.properties;\n\n    if (data.type === \"success\") {\n      rows = properties.data && properties.data.rows;\n      if (rows.length === 1 && rows[0][0] === Number(id)) {\n        if (properties.page > 1) {\n          return self.fetchData(properties.page - 1);\n        }\n      }\n    }\n\n    return self.fetchData();\n  },\n\n  saveRows: function saveRows() {\n    var self = this;\n    var data = {};\n    var form = self.getFormContainer();\n\n    self.collectData(data);\n\n    if ($.isEmptyObject(data)) {\n      return;\n    } else {\n      return self.dataService.submitData({\n        action: \"SUBMITDATA\",\n        data: data,\n        xpathContext: form.properties.xpathContext,\n        idPageCache: form.properties.idPageCache });\n\n    }\n  },\n\n  moreRows: function moreRows(ui) {\n    var self = this;\n    var properties = self.properties;\n\n    if (typeof properties.originalrowsPerPage === \"undefined\") {\n      properties.originalrowsPerPage = properties.rowsPerPage;\n    }\n    properties.rowsPerPage += properties.originalrowsPerPage;\n\n    var dataToSend = {};\n    self.collectData(dataToSend);\n\n    if (jQuery.isEmptyObject(dataToSend)) {\n      self.moreRowsCommon(ui);\n      return;\n    }\n    // Send the data\n    self.dataService.submitData({\n      action: \"SUBMITDATA\",\n      data: dataToSend,\n      idRender: properties.id,\n      xpath: properties.xpath,\n      xpathContext: properties.xpathContext,\n      idPageCache: properties.idPageCache }).\n    done(function () {\n      self.moreRowsCommon(ui);\n    });\n\n  },\n\n  moreRowsCommon: function moreRowsCommon(ui) {\n    var self = this;\n    var properties = self.properties;\n\n    self.fetchData(ui.page, ui.sortBy, ui.sortType);\n\n    $.when(self.dataReadyDeferred).done(function () {\n\n      if (properties.records != 0)\n      if (properties.records + 1 <= properties.rowsPerPage) {\n        $(\".ui-bizagi-grid-dynamic-pager\", self.getControl()).hide();\n      }\n\n    });\n  },\n\n  executeSubmitEditRequest: function executeSubmitEditRequest(id, callback) {\n    var self = this;\n    var properties = self.properties;\n    var reverseButtons = properties.orientation == \"rtl\" ? true : false;\n    var buttons = [];\n\n    var showSaveButton = self.getFormContainer().properties.displayAsReadOnly == true ? false : true;\n\n    $.when(self.submitEditRequest(id)).\n    done(function () {\n      // Show dialog with new form after that\n      var recordXpath = properties.xpath + \"[id=\" + id + \"]\";\n\n      var dialog = new bizagi.rendering.dialog.form(self.dataService, self.renderFactory, {\n        title: properties.editLabel,\n        showSaveButton: showSaveButton,\n        orientation: properties.orientation || \"ltr\",\n        maximized: bizagi.override.maximizeGridPopup || false,\n        onSave: function onSave(data) {\n          return self.submitSaveRequest(id, data);\n        }, //Setup the print functionality\n        extraButtons: bizagi.override.enablePrintFromEditForm ? {\n          \"workportal-widget-dialog-box-print\": function workportalWidgetDialogBoxPrint() {\n            self.printFormCommand = new bizagi.workportal.command.printform(self.renderFactory);\n\n            var printParams = {\n              idRender: properties.id,\n              recordXPath: recordXpath,\n              xpathContext: properties.xpathContext,\n              idPageCache: properties.idPageCache,\n              requestedForm: \"editForm\",\n              contextType: properties.contextType,\n              fileName: properties.displayName };\n\n\n            self.printFormCommand.print(printParams);\n          } } :\n        {} });\n\n\n      buttons[0] = {\n        text: bizagi.localization.getResource(\"render-form-dialog-box-save\"),\n        click: function click(data) {\n          return self.submitSaveRequest(id, data);\n        } };\n\n\n      if (reverseButtons)\n      buttons.reverse();\n\n      dialog.render({\n        idRender: properties.id,\n        recordXPath: recordXpath,\n        xpathContext: properties.xpathContext,\n        idPageCache: properties.idPageCache,\n        requestedForm: \"editForm\",\n        url: properties.editPage,\n        contextType: properties.contextType }).\n\n      done(function (data) {\n        if (callback) {\n          callback(data);\n        }\n        // Set loading status\n        self.startLoading();\n\n        if (!properties.submitOnChange) {\n          // Reload grid\n          self.fetchData();\n\n        } else {\n          // Submits the entire form\n          self.submitOnChange().always(function () {\n            self.endLoading();\n          });\n        }\n\n      }).\n      fail(function (data) {\n        $.when(self.submitRollbackRequest(data)).done(function () {\n          self.submitInvalidatePageCacheRequest(data);\n        });\n      });\n    });\n  },\n  /**\r\n      *  Show details with record information\r\n      */\n  showFormDetails: function showFormDetails(id) {\n    var self = this;\n    var properties = self.properties;\n\n    if (id == 0 || id == undefined) {\n      bizagi.showMessageBox(bizagi.localization.getResource(\"render-grid-message-no-selected-row\"), bizagi.localization.getResource(\"render-grid-header-no-selected-row\"));\n      return;\n    }\n\n    var dialog = new bizagi.rendering.dialog.form(self.dataService, self.renderFactory, {\n      title: properties.detailLabel || bizagi.localization.getResource(\"render-grid-details-form\"),\n      showSaveButton: false,\n      maximized: bizagi.override.maximizeGridPopup || false,\n      cancelButtonLabel: bizagi.localization.getResource(\"render-form-dialog-box-close\") });\n\n\n    // Show dialog with new form after that\n    var recordXpath = properties.xpath + \"[id=\" + id + \"]\";\n    dialog.render({\n      idRender: properties.id,\n      recordXPath: recordXpath,\n      xpathContext: properties.xpathContext,\n      idPageCache: properties.idPageCache,\n      requestedForm: \"detailForm\",\n      url: properties.editPage,\n      editable: false });\n\n  },\n  /**\r\n      * Retrieve the data for the new rows and push them into the server\r\n      * @param keys\r\n      * @returns {*}\r\n      */\n  saveInlineAddedRows: function saveInlineAddedRows(keys) {\n    var self = this;\n    var queue = [];\n\n    for (var i = 0; i < keys.length; i++) {\n      queue.push(self.prepareAddAction(keys[i]));\n    }\n\n    // Set Flag to prevent duplicate records (modal window)\n    self.properties.alreadySaved = true;\n\n    var form = self.getFormContainer();\n    var defer = new $.Deferred();\n\n    form.useOrSetLoaderDeferred();\n    form.appendWaitForLoader({\n      promise: defer.promise() });\n\n\n    // Perform the batch\n    return $.when.apply($, queue).always(function () {\n      defer.resolve();\n    });\n  },\n  /*\r\n     *   Prepares the add action\r\n     */\n  prepareAddAction: function prepareAddAction(key) {\n    var self = this;\n    var properties = self.properties;\n\n    // Build submit data\n    var submitData = self.changes[key];\n\n    return self.dataService.multiaction().addGridRecordData({\n      url: properties.addUrl,\n      idRender: properties.id,\n      xpath: properties.xpath,\n      xpathContext: properties.xpathContext,\n      contexttype: properties.contexttype,\n      idPageCache: properties.idPageCache,\n      submitData: submitData }).\n    then(function (data) {\n      delete self.changes[key];\n      delete self.cellOverrides[key];\n      delete self.newRecords[key];\n\n      // Remove new records\n      self.setRowAsSaved(key);\n\n      return data;\n    });\n  },\n  /*\r\n     * Removes invalid records\r\n     */\n  removeNewRecords: function removeNewRecords(ui) {\n    var self = this;\n    var hasRefresh = false;\n\n    if (ui && ui.refresh) {\n      hasRefresh = self.changes && Object.keys(self.changes).length > 0 && !self.isValid([]);\n    }\n\n    if (ui && ui.keys) {\n      $.each(ui.keys, function (_, key) {\n        if (self.newRecords[key]) {\n          delete self.newRecords[key];\n        }\n      });\n    }\n\n    // Refresh grid\n    if (hasRefresh) {\n      self.properties.changed = false;\n      self.refresh();\n    }\n  },\n\n  /*\r\n     * Show the print menu options\r\n     */\n  showGridExportOptions: function showGridExportOptions() {\n    var self = this;\n    var exportPst;\n    var content = self.getControl();\n    var changes = [];\n\n    var form = self.getFormContainer();\n    var expMenuDirection = self.properties.buttonsPst === true ? \"top\" : \"bottom\";\n    var isRTLOrientation = self.properties.orientation === \"rtl\";\n\n    var exportPstWrapperCss = isRTLOrientation ? \".ui-bizagi-grid-export-options-wrapper-rtl\" : \".ui-bizagi-grid-export-options-wrapper\";\n    var exportPstContentCss = isRTLOrientation ? \".ui-bizagi-grid-export-options-content-rtl\" : \".ui-bizagi-grid-export-options-content\";\n\n    if (self.properties.buttonsPst === true) {\n      exportPst = $(exportPstWrapperCss, content).outerHeight();\n    } else {\n      exportPst = -1 * $(exportPstContentCss, content).outerHeight();\n    }\n\n    // Adjust the print options wrapper to the required position, upper the print options button\n    $(exportPstContentCss, content).css(expMenuDirection, exportPst);\n\n    if ($(exportPstContentCss, content).hasClass('hidden')) {\n      $(exportPstContentCss, content).removeClass('hidden');\n      $(exportPstContentCss, content).show();\n    } else {\n      $(exportPstContentCss, content).addClass('hidden');\n    }\n\n    if (form) {\n\n      if (self.hasChanged(changes) && self.properties.alreadySaved === false && form.properties.editable || self.properties.canBeExported === false && form.properties.editable) {\n        var hasVisibleActions = $(\"li[data-action='save']\", self.grid).is(\":visible\");\n\n        if (!self.hasChanged(changes) && self.properties.alreadySaved === false && !hasVisibleActions || self.canBeExport()) {\n          self.properties.canBeExported = true;\n        } else {\n          // When the table has totalizer counts as change,  although that is not a change\n          if (!(Object.keys(self.changes).length === 1 && self.changes.summary)) {\n            $(\"#print-grid-save-first\", content).show();\n            $(\"#print-grid-pdf\", content).hide();\n            $(\"#print-grid-xls\", content).hide();\n          }\n        }\n      } else {\n        self.properties.canBeExported = true;\n      }\n    }\n\n  },\n\n  /**\r\n      * Executes collapse grid\r\n      */\n  performCollapseGrid: function performCollapseGrid() {\n    var self = this;\n    var $content = self.getControl();\n    var isRTLOrientation = self.properties.orientation === \"rtl\";\n    var collapseHeaderCss = isRTLOrientation ? \".bz-rn-grid-cn-header-rtl\" : \".bz-rn-grid-cn-header\";\n\n    var $gridWrapper = $(\".bz-rn-grid-wrapper\", $content);\n    var $collapseIcon = $(collapseHeaderCss + \" .ui-icon\", $content);\n\n    if (!isRTLOrientation) {\n      var $header = $(\".bz-rn-grid-cn-header\", $content);\n      $header.toggleClass(\"bz-rn-grid-header-state-collapsed\").\n      toggleClass(\"bz-rn-grid-header-state-active\");\n    }\n\n    $collapseIcon.toggleClass(\"ui-state-collapse\").toggleClass(\"ui-state-expand\");\n    $gridWrapper.toggleClass(\"bz-rn-grid-body-collapse\");\n\n    self.collapseState = $gridWrapper.hasClass(\"bz-rn-grid-body-collapse\");\n    self.triggerGridPluginHandler(\"updateCollapseState\", self.collapseState);\n\n    self.updateCollapseState();\n  },\n\n  /**\r\n      * Update collapse grid state\r\n      * @returns {*}\r\n      */\n  updateCollapseState: function updateCollapseState() {\n    var properties = this.properties;\n    var params = {\n      url: properties.dataUrl,\n      xpath: properties.xpath,\n      idRender: properties.id,\n      xpathContext: properties.xpathContext,\n      contexttype: properties.contextType,\n      idPageCache: properties.idPageCache,\n      collapseState: this.collapseState };\n\n\n    // Example of process property value\n    return this.dataService.multiaction().getCollapseData(params);\n  },\n\n  /**\r\n      * Executes the grid export\r\n      * @param params (Object) exportType: \"pdfExport\" Handles the print functionality showing a message warning the user\r\n      * to install Adobe Acrobat, if he haven't installed\r\n      */\n  performExportGrid: function performExportGrid(params) {\n    var self = this;\n    var result = true;\n\n    if (params.exportType === \"pdfExport\") {\n      var isAcrobatInstalled = self.checkAdobePlugin();\n      if ($.browser.msie && !isAcrobatInstalled) {\n        result = false;\n\n        $.when(bizagi.showMessageBox(bizagi.localization.getResource(\"workportal-acrobat-message\"))).\n        done(function () {\n          self.downloadExportedGrid(params);\n        });\n      }\n    }\n\n    if (result)\n    self.downloadExportedGrid(params);\n  },\n\n  /*\r\n     * Updates manually the affected cell \r\n     * @param key: the key of the affected cells's column\r\n     * @param newValue: the new value to store in the affected cell\r\n     * @param columnIndex: the column index of the cells's column\r\n     */\n  updateAffectedCellManually: function updateAffectedCellManually(key, newValue, columnIndex) {\n    var self = this;\n    var i = self.columns.length;\n    var rowIndex = self.getRowIndexByKey(key);\n\n    //updates the value manually if is different than the current\n    if (typeof rowIndex !== \"undefined\" && self.properties.data.rows[rowIndex][columnIndex] !== newValue) {\n      self.properties.data.rows[rowIndex][columnIndex] = newValue;\n\n      //Refresh the summary\n      var summary = $(\".ui-bizagi-grid-summary\", self.grid);\n      summary.empty();\n      summary.html(self.grid.bizagi_grid_desktop(\"drawSummary\"));\n      self.grid.bizagi_grid_desktop(\"postRenderSummary\", summary);\n    }\n  },\n\n  /*\r\n     * Get the row index using the key as a reference\r\n     */\n  getRowIndexByKey: function getRowIndexByKey(key) {\n    var self = this;\n    var i = self.properties.data.rows.length;\n\n    while (i-- > 0) {\n      if (key == self.properties.data.rows[i][0]) {\n        return i;\n      }\n    }\n  },\n\n  /**\r\n      * Checks if the Adobe Acrobat is installed\r\n      * @returns {*}\r\n      */\n  checkAdobePlugin: function checkAdobePlugin() {\n    var installed;\n    try {\n      installed = new ActiveXObject('AcroPDF.PDF');\n    } catch (e) {\n      bizagi.log(e);\n    }\n\n    if (!installed) {\n      try {\n        // Older Ie\n        installed = new ActiveXObject('PDF.PdfCtrl');\n      } catch (e) {\n        bizagi.log(e);\n      }\n    }\n\n    return installed;\n  },\n\n  /**\r\n      * Download the created file\r\n      * @param params\r\n      */\n  downloadExportedGrid: function downloadExportedGrid(params) {\n    var self = this;\n\n    self.getGridExportFile(params).then(function (blobFile) {\n      var fileName = self.properties.displayName;\n      fileName += params.exportType === \"xlsExport\" ? \".xlsx\" : \".pdf\";\n\n      bizagi.util.downloadBlobFile(blobFile, fileName);\n    }).fail(function (err) {\n      var form = self.getFormContainer();\n      form && form.failHandler(err);\n    });\n  },\n\n  /*\r\n     *\r\n     */\n  formatGrid: function formatGrid(control) {\n    //var control = printContent,\n    var tableControl = $('.ui-bizagi-grid-table', control);\n    var closeButton = $('.ui-jqgrid-titlebar-close', control);\n\n    $(\"th.ui-bizagi-column-hidden, td.ui-bizagi-grid-key, .bz-rn-grid-container-foother\", control).remove();\n\n    //Remove click event\n    $(\"[data-action], ul li, .ui-bizagi-grid-column, tr, th\", tableControl).unbind(\"click\");\n\n    // Remove close button\n    $(closeButton).remove();\n  },\n  /*\r\n     *   Returns a promise that will resolve when the element is ready\r\n     */\n  ready: function ready() {\n    var self = this;\n    var parentPromise = self._super();\n    var inlineAddPromise = self.inlineAddDeferred ? self.inlineAddDeferred.promise() : null;\n    return $.when(parentPromise, inlineAddPromise);\n  },\n\n  /*\r\n     * Apply Columns Width in postrender\r\n     */\n  applyColumnsWidth: function applyColumnsWidth(grid, columns) {\n\n    for (var i = 0; i < columns.length; i++) {\n      var column = grid.find(\".resizableColumn\")[i];\n\n      if (column) {\n        var columnIndex = $(column).find(\">.ui-bizagi-grid-column\");\n        var index = columnIndex.length == 1 ? Number($(column).find(\">.ui-bizagi-grid-column\").data(\"column-index\")) : i;\n        var columnWidth = columns[index].bizAgiProperties.columnwidth;\n        var widthToApply = \"auto\";\n\n        if (columns[index].bizAgiProperties && columnWidth && columnWidth != \"auto\") {\n          widthToApply = columnWidth;\n        }\n        $(column).css(\"width\", widthToApply);\n        $(column).find(\".ui-bizagi-grid-column\").css(\"width\", \"auto\");\n      }\n    }\n  },\n\n  /*\r\n     * Apply Columns Width in update (add or delete a row)\r\n     */\n  applyColumnsWidthUpdate: function applyColumnsWidthUpdate(grid, columns) {\n\n    var self = this,index = null,column = null,columnIndex = null,columnWidth = null,widthToApply = null;\n    var resizableColumns = grid.find(\".resizableColumn\");\n    var length = resizableColumns.length;\n\n    for (var i = 0; i < length; i++) {\n      column = resizableColumns[i];\n      columnIndex = $(column).find(\">.ui-bizagi-grid-column\");\n      index = columnIndex.length == 1 ? Number($(column).find(\">.ui-bizagi-grid-column\").data(\"column-index\")) - 1 : i;\n\n      columnWidth = columns[index].properties.columnwidth;\n      widthToApply = \"auto\";\n\n      if (columns[index].properties && columnWidth && columnWidth != \"auto\") {\n        widthToApply = columnWidth;\n      }\n\n      $(column).css(\"width\", widthToApply);\n      $(column).find(\".ui-bizagi-grid-column\").css(\"width\", \"auto\");\n    }\n\n  },\n\n  /*\r\n     *   Apply summary column styles to a specified element\r\n     */\n  applySummaryColumnStyles: function applySummaryColumnStyles(element, properties) {\n    var self = this;\n    var elementChild = element.find(\".ui-bizagi-grid-summary-readonly\");\n\n    if (properties.totalize != null && properties.totalize.format != null) {\n      var format = properties.totalize.format;\n      var textDecorator = \"\";\n\n      // Set cell back color\n      if (format.background) {\n        element.css(\"background-color\", format.background);\n        element.css(\"background-image\", \"none\");\n      }\n      if (format.size && format.size != \"0\") {\n        var size = format.size.toString();\n        var operator = size.substring(0, 1);\n        var value = size.substring(1, size.length);\n        value = operator == \"+\" ? 100 + 10 * Number(value) : 100 - 10 * Number(value);\n        elementChild.css(\"font-size\", value + \"%\");\n      }\n      if (format.italic) {\n        elementChild.css(\"font-style\", \"italic\");\n      }\n      if (format.color) {\n        $(\"label\", elementChild).css(\"color\", format.color);\n      }\n      if (format.underline) {\n        textDecorator += \"underline \";\n      }\n      if (format.strikethru) {\n        textDecorator += \"line-through\";\n      }\n      if (format.bold == true || format.bold == undefined) {\n        elementChild.css(\"font-weight\", \"bold\");\n      }\n      elementChild.css(\"text-decoration\", textDecorator);\n    }\n  },\n\n  /* Return the icons container*/\n  getContainerIcons: function getContainerIcons() {\n    return $(\"> .ui-bizagi-control > .ui-bizagi-control-wrapper > .ui-bizagi-render-icons\", this.element);\n  },\n\n  /**\r\n      * Customizes render color\r\n      * @param color\r\n      * @param isLabelFormat\r\n      */\n  changeColor: function changeColor(color, isLabelFormat) {\n    var self = this;\n    var control = self.getControl();\n    var label = self.getLabel();\n    var isLabelFormat = typeof isLabelFormat !== \"undefined\" || isLabelFormat != null ? isLabelFormat : true;\n\n    if (control && label) {\n      if (color != \"none\") {\n        // Hide - show the render\n        if (self.properties.displayType === \"value\" || !isLabelFormat) {\n          self.getElementsToStylize(self.getControl()).css(\"color\", color, \"!important\");\n          self.getControl().find(\"*\").\n          each(function (i, element) {\n            self.getElementsToStylize(element).css(\"color\", color, \"!important\");\n          });\n        } else {\n          self.element.each(function () {\n            this.style.setProperty('color', color, 'important');\n          });\n\n          // Container of header\n          self.getControl().find(\"[data-bizagi-component=header] span\").each(function () {\n            this.style.setProperty('color', color, 'important');\n          });\n\n          self.getLabel().find(\"label\").css(\"color\", color, \"!important\");\n\n          if (!self.properties.editable) {\n            var $tableContext = self.getControl();\n\n            self.getElementsToStylize($tableContext).css(\"color\", color, \"!important\");\n\n            // Container of content\n            if (bizagi.override && bizagi.override.enableColorHeaderGrid === true && self.hasColorHeader()) {\n              $tableContext = $tableContext.find(\"[data-bizagi-component=rows]\");\n            }\n\n            self.getElementsToStylize($(\"label\", $tableContext).css(\"color\", color, \"!important\"));\n          }\n\n        }\n      } else {\n        this._super(color, isLabelFormat);\n      }\n    }\n  },\n\n  /**\r\n      * Check has new record to save\r\n      * @returns {Array|boolean}\r\n      */\n  hasNewRecordsToSave: function hasNewRecordsToSave() {\n    var newKeys;\n\n    try {\n      newKeys = this.triggerGridPluginHandler(\"getNewRowKeys\");\n    } catch (e) {\n      newKeys = [];\n    }\n\n    return newKeys && newKeys.length > 0 && !this.properties.alreadySaved;\n  },\n\n  /**\r\n      * Get Cell value with format\r\n      * @param renderColumn\r\n      * @param _value\r\n      * @returns {string}\r\n      */\n  getCellValueFormatted: function getCellValueFormatted(renderColumn, _value) {\n    var dataType = renderColumn.properties.type;\n    var formatted = _value;\n\n    if (dataType === \"columnDate\") {\n      var columnProperties = renderColumn.data.properties;\n\n      if (!bizagi.util.isEmpty(formatted)) {\n        // Formats the value in full invariant (with time) in order to send to the server\n        var date = bizagi.util.dateFormatter.getDateFromInvariant(formatted, columnProperties.showTime);\n\n        if (typeof date != \"undefined\" && date !== 0) {\n          if (!columnProperties.showTime) {\n            date.setHours(0, 0, 0, 0);\n          }\n\n          formatted = bizagi.util.dateFormatter.formatInvariant(date, true);\n        }\n      } else if (_value === \"\") {\n        formatted = \"\";\n      }\n    }\n\n    return formatted;\n  },\n\n  addExclusiveChange: function addExclusiveChange(id, data) {\n    var self = this;\n    if (this.properties.hasExclusiveCheck) {\n\n      for (var xpath in data) {\n\n        var column = self.columns.find(function (el) {\n          return el.properties.xpath == xpath;\n        });\n\n        // Check if some of the changes from the edit or add form match with the exclusive controls in the grid\n        var value = data[xpath];\n\n        if (column && column.properties.isExclusive && value) {\n          self.exclusiveChanges[xpath] = {\n            xpath: xpath,\n            simpleXpath: xpath,\n            value: value,\n            key: id };\n\n        }\n      }\n\n    }\n\n  } });","/**\r\n *   Name: Bizagi Smartphone Render Grouped Grid Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the Grouped Grid render class to adjust to smartphone devices\r\n */\n\n// Extends from Grid desktop base\nbizagi.rendering.desktop.grid.bizagi.extend(\"bizagi.rendering.desktop.grid.grouped\", {}, {\n  /*\r\n                                                                                           *   Update or init the element data\r\n                                                                                           */\n  initializeData: function initializeData(data) {\n    var self = this;\n\n    data.properties.hideActionsColumn = true;\n    data.properties = self.convertProperties(data.properties);\n    // Parse data through group engine\n\n    // Create a single instance for each cell\n    data.properties.singleInstance = false;\n\n    // Call base\n    this._super(data);\n\n    // Create a data-structure to keep track of each cell properties\n    this.cellMetadata = {};\n\n    // Create a collection to save grid cell changes to execute after it is loaded\n    this.pendingActions = [];\n\n    // Fill default properties\n    var properties = this.properties;\n\n    properties.withEditForm = properties.allowEdit;\n\n\n    // set collapse grid\n    this.collapseState = properties.collapseState;\n\n    // Just apply display-type: vertical, align it to the left\n    properties.displayType = \"vertical\";\n    properties.labelAlign = \"left\";\n\n  },\n\n  /*\r\n     *   Customizes the content drawing inside the cell\r\n     */\n  drawCell: function drawCell(column, key, value, isNewRow) {\n    var self = this;\n    if (column.key) {\n      return value;\n    }\n\n    // Get render column\n    var cellOverride = self.getCellOverride(key, column.index - 1);\n    var columnIndex = column.index - 1;\n    var renderColumn = self.columns[columnIndex];\n\n    // Fix issue suite-8559, data with null records\n    /* console.log(self.newRecords);*/\n    self.newRecords = self.newRecords || {};\n\n    // Get cell properties\n    if (!self.cellMetadata[key]) {\n      self.cellMetadata[key] = {};\n    }\n    if (!self.cellMetadata[key][columnIndex]) {\n      self.cellMetadata[key][columnIndex] = {};\n    }\n    var properties = self.cellMetadata[key][columnIndex].properties || renderColumn.originalProperties;\n    var visible = properties.visible !== undefined ? properties.visible : true;\n    var editable = properties.editable !== undefined ? properties.editable : true;\n\n    // Apply overrides from cellOverrides\n    visible = cellOverride.visible;\n    editable = properties.editable ? cellOverride.editable : false;\n\n    // Show editable cell when we are performing inline add operation\n    if (isNewRow)\n    editable = true;\n\n    renderColumn.properties.displayType = 'value';\n\n    // If the cell we are drawing is the summary cell, we need to make it readonly\n    if (typeof key === \"string\" && key.indexOf(\"summary\") >= 0) {\n      editable = false;\n    }\n    // Do the render\n    if (visible) {\n      if (editable)\n      return self.drawEditableCell(renderColumn, properties, key, value, isNewRow);else\n\n      return self.drawReadonlyCell(renderColumn, properties, key, value);\n\n    } else {\n      return \"<label></label>\";\n    }\n  },\n\n  /*\r\n     *   Draws the readonly version for the cell\r\n     */\n  drawReadonlyCell: function drawReadonlyCell(renderColumn, properties, key, value) {\n    var self = this;\n    var result = \"\";\n\n    // Use totalizer format when printing summary row\n    if (typeof key === \"string\" && key.indexOf(\"summary\") >= 0) {\n      var originalFormat = renderColumn.properties.textFormat;\n      if (renderColumn.properties.totalize) {\n        renderColumn.properties.textFormat = renderColumn.properties.totalize.format;\n      }\n\n      result = renderColumn.renderSummary(key, value);\n\n      // Restore column format\n      renderColumn.properties.textFormat = originalFormat;\n    } else {\n      result = renderColumn.renderReadOnly(key, value);\n    }\n    return result;\n  },\n\n  /*\r\n     *   Executes when the cell is ready and inserted into the DOM\r\n     */\n  onCellReady: function onCellReady(column, key, cell, isNewRow) {\n    var self = this;\n\n    // Get render column\n    var columnIndex = column.index - 1;\n    var renderColumn = self.columns[columnIndex];\n    var properties = self.cellMetadata[key][columnIndex].properties || renderColumn.originalProperties;\n    var visible = properties.visible !== undefined ? properties.visible : true;\n    var editable = properties.editable !== undefined ? properties.editable : true;\n\n    // If the cell we are drawing is the summary cell, we need to make it readonly\n    if (typeof key === \"string\" && key.indexOf(\"summary\") >= 0)\n    editable = false;\n\n    // Show editable cell when we are performing inline add operation\n    if (isNewRow) {\n      editable = true;\n    }\n\n    if (visible) {\n\n      if (editable) {\n\n        // Set editable\n        var originalEditable = renderColumn.properties.editable;\n        renderColumn.properties.editable = editable;\n\n        // Set xpath context for submitonchange action\n        if (renderColumn.properties.submitOnChange) {\n          var control = renderColumn.getDecorated(key);\n          if (control) {\n            control.properties.submitOnChangexpathContext = self.properties.xpath + \"[]\";\n          }\n        }\n\n        // Execute cell post render\n        renderColumn.postRender(key, cell);\n\n        // Restore editable\n        renderColumn.properties.editable = originalEditable;\n\n      } else {\n\n        if (typeof key === \"string\" && key.indexOf(\"summary\") >= 0) {\n          //apply styles to summary cells\n          if (!renderColumn.postRenderSummary(key, cell)) {\n            self.applySummaryColumnStyles(cell, properties);\n          }\n\n        } else {\n          // Call post-render\n          renderColumn.postRenderReadOnly(key, cell);\n        }\n      }\n    }\n  },\n\n  // Reserverd to make convertions of control properties\n  convertProperties: function convertProperties(properties) {\n\n    // Change inline add\n    properties.inlineAdd = false;\n\n    // Change inline edit\n    properties.inlineEdit = false;\n\n    return properties;\n  },\n\n  /**\r\n      * WARNING: This method here is required in order to avoid changes in the font weigth for the grid\r\n      */\n  changeFontBold: function changeFontBold() {\n    return this;\n  },\n\n  /*\r\n     * Applies grid plugin \r\n     */\n  applyGridPlugin: function applyGridPlugin() {\n    var self = this,\n    grid = self.grid,\n    properties = self.properties,\n    mode = self.getMode();\n\n    var pager = self.renderFactory.getTemplate(\"bizagi.grid.pagination\");\n\n    var scrollableArea = self.getFormContainer().params.canvas.scrollParent();\n    // Apply grid plugin\n    grid.bizagi_grid_grouped_desktop({\n      columns: self.buildColumnModel(),\n      showSummary: properties.showSummary,\n      title: properties.displayName,\n      mode: self.getMode(),\n      scrollableArea: scrollableArea,\n      floatingHeader: properties.floatingHeader || false,\n      tableCssClass: \"\",\n      sortBy: properties.sortBy || \"\",\n      sortOrder: properties.sortOrder || \"\",\n      isSortable: properties.isSortable,\n      smartPagination: true,\n      collapse: mode !== \"execution\" ? false : true, // por defecto las grillas seran colapsables en ejecucion\n      collapseState: mode !== \"execution\" ? false : self.collapseState,\n      buttonsPst: mode !== \"execution\" ? false : properties.buttonsPst,\n      sortType: bizagi.override.gridDefaultSortBy || \"asc\",\n      headerStyles: self.getHeaderStyles(),\n      groupByColumns: self.groupByColumns() || [],\n      template: {\n        grid: self.renderFactory.getTemplate(\"bizagi.grid.grid\"),\n        waiting: self.renderFactory.getTemplate(\"bizagi.grid.waiting\"),\n        table: self.renderFactory.getTemplate(\"bizagi.grid.grouped.table\"),\n        emptyTable: self.renderFactory.getTemplate(\"bizagi.grid.table.empty\"),\n        column: self.renderFactory.getTemplate(\"bizagi.grid.grouped.column\"),\n        specialColumn: self.renderFactory.getTemplate(\"bizagi.grid.column.special\"),\n        row: self.renderFactory.getTemplate(\"bizagi.grid.grouped.row\"),\n        headerRow: self.renderFactory.getTemplate(\"bizagi.grid.grouped.header.row\"),\n        rowButtons: self.renderFactory.getTemplate(\"bizagi.grid.row.buttons\"),\n        cell: self.renderFactory.getTemplate(\"bizagi.grid.cell\"),\n        emptyCell: self.renderFactory.getTemplate(\"bizagi.grid.grouped.emptyCell\"),\n        specialCell: self.renderFactory.getTemplate(\"bizagi.grid.cell.special\"),\n        pager: pager,\n        buttons: self.renderFactory.getTemplate(\"bizagi.grid.buttons\"),\n        dynamicPager: self.renderFactory.getTemplate(\"bizagi.grid.dynamicpager\"),\n        summary: self.renderFactory.getTemplate(\"bizagi.grid.grouped.summary\"),\n        summaryCell: self.renderFactory.getTemplate(\"bizagi.grid.grouped.summaryCell\"),\n        exportOptions: self.renderFactory.getTemplate(\"bizagi.grid.exportOptions\") },\n\n      actions: {\n        add: properties.allowAdd,\n        edit: properties.allowEdit && properties.withEditForm && properties.data != null,\n        remove: properties.allowDelete,\n        details: properties.allowDetail,\n        inlineAdd: properties.inlineAdd,\n        allowMore: properties.allowMore,\n        enableXlsExport: properties.enableXlsExport,\n        enablePdfExport: properties.enablePdfExport },\n\n      tooltips: {\n        addLabel: properties.addLabel,\n        editLabel: properties.editLabel,\n        deleteLabel: properties.deleteLabel,\n        detailLabel: properties.detailLabel,\n        exportOptionsLabel: properties.exportOptionsLabel },\n\n      isValid: function isValid() {\n        // Validate records\n        var errorsMessage = [];\n        var form = self.getFormContainer();\n\n        // fix for SUITE-8696\n        if (form.validationController !== undefined) {\n          form.validationController.clearValidationMessages();\n        }\n\n        self.isValid(errorsMessage);\n\n        if (errorsMessage.length > 0) {\n          // Show validation message\n          for (var i = 0; i < errorsMessage.length; i++) {\n            form.validationController.showValidationMessage(errorsMessage[i].message, errorsMessage[i].xpath);\n          }\n\n          return false;\n        } else {\n          return true;\n        }\n      },\n      pageRequested: function pageRequested(ui) {\n        if (mode !== \"execution\") return;\n\n        var sortName;\n        var getColumn = self.getColumn(ui.sortBy);\n        if (getColumn) {\n          sortName = getColumn.getSortName();\n        } else {\n          getColumn = self.getColumn(ui.sortBy.split(\".\")[0]);\n          if (getColumn) {\n            sortName = getColumn.getSortName();\n          }\n        }\n\n        if (ui.sortBy.split(\".\").length > 1) {\n          if (ui.sortBy.split(\".\")[0] == sortName) {\n            sortName = ui.sortBy;\n          }\n        }\n\n        self.fetchData(ui.page, sortName, ui.sortType);\n\n      },\n      sortRequested: function sortRequested(ui) {\n        if (mode !== \"execution\") return;\n\n        // Get column sort xpath\n        var sortName;\n        var getColumn = self.getColumn(ui.sortBy);\n        if (getColumn) {\n          sortName = getColumn.getSortName();\n        } else {\n          getColumn = self.getColumn(ui.sortBy.split(\".\")[0]);\n          if (getColumn) {\n            sortName = getColumn.getSortName();\n          }\n        }\n\n        if (ui.sortBy.split(\".\").length > 1) {\n          if (ui.sortBy.split(\".\")[0] == sortName) {\n            sortName = ui.sortBy;\n          }\n        }\n\n        // Perform the sort\n        self.fetchData(ui.page, sortName, ui.sortType);\n      },\n      drawCell: function drawCell(ui) {\n        return self.drawCell(ui.column, ui.key, ui.value, ui.isNewRow);\n      },\n      cellReady: function cellReady(ui) {\n        return self.onCellReady(ui.column, ui.key, ui.cell, ui.isNewRow);\n      },\n      rowSelected: function rowSelected(ui) {\n        if (mode !== \"execution\") return;\n        self.triggerHandler(\"rowSelected\", { id: ui.key });\n      },\n      addRow: function addRow() {\n        if (mode !== \"execution\") return;\n        self.addRow.apply(self, arguments);\n      },\n      editRow: function editRow(ui) {\n        if (mode !== \"execution\") return;\n\n        if (self.properties.withEditForm) {\n          self.editRow(ui.key);\n        }\n      },\n      deleteRow: function deleteRow(ui) {\n        if (mode !== \"execution\") return;\n        self.deleteRow(ui.key);\n      },\n      moreRows: function moreRows(ui) {\n        if (mode !== \"execution\") return;\n        self.moreRows(ui);\n      },\n      saveAddedRows: function saveAddedRows(ui) {\n        self.saveInlineAddedRows(ui.keys).done(function () {\n          self.refresh();\n        });\n      },\n      beforeInlineAdd: function beforeInlineAdd() {\n        self.inlineAddDeferred = new $.Deferred();\n      },\n      afterInlineAdd: function afterInlineAdd() {\n        if (self.inlineAddDeferred) {\n          self.inlineAddDeferred.resolve();\n        }\n      },\n      showFormDetails: function showFormDetails(id) {\n        self.showFormDetails(id.key);\n      },\n      cancelEdition: function cancelEdition(ui) {\n        self.removeNewRecords(ui);\n      },\n      removeNewRecords: function removeNewRecords(ui) {\n        self.removeNewRecords(ui);\n      },\n      showGridExportOptions: function showGridExportOptions() {\n        self.showGridExportOptions();\n      },\n      performExportGrid: function performExportGrid(printParams) {\n        self.performExportGrid(printParams);\n      },\n      performCollapseGrid: function performCollapseGrid() {\n        self.performCollapseGrid();\n      },\n      rowdblclick: function rowdblclick(ui) {\n        if (mode != \"execution\") return;\n\n        if (self.canEditRow())\n        self.editRow(ui.businessKey);\n      } });\n\n\n  },\n\n  /*\r\n     * Returns an array with the position of columns set to group by property\r\n     */\n  groupByColumns: function groupByColumns() {\n    var self = this;\n    var groupByColumns = [];\n\n    for (var i = 0, l = self.columns.length; i < l; i++) {\n      var column = self.columns[i];\n      if (column.properties.groupBy) {\n        groupByColumns.push(i + 1);\n      }\n    }\n\n    return groupByColumns;\n  },\n\n  /*\r\n     *\r\n     */\n  triggerGridPluginHandler: function triggerGridPluginHandler() {\n    var self = this;\n    var args = Array.prototype.slice.call(arguments, 0);\n\n    return self.grid.bizagi_grid_grouped_desktop.apply(self.grid, args);\n  },\n\n\n  /*\r\n     *   Method to fetch data from the server and then update the data\r\n     */\n  fetchData: function fetchData(page, sortBy, sortType) {\n    var self = this;\n    var properties = self.properties;\n    self.dataReadyDeferred = new $.Deferred();\n\n    // Define defaults\n    page = page || properties.page || 1;\n    sortBy = sortBy || properties.sortBy || \"id\";\n    sortType = sortType || properties.sortOrder || \"asc\";\n\n    // Update control properties\n    properties.page = page;\n    properties.sortBy = sortBy;\n    properties.sortType = sortType;\n    properties.sort = sortBy + \" \" + sortType;\n\n    // Start loading to avoid multiple calls to the server\n    self.startLoading();\n\n    $.when(self.getRemoteData()).then(function (data) {\n      self.endLoading();\n      if (self.disposed) return;\n      if (data) {\n        self.loadChanges(data.rows);\n        self.updateData(data);\n        self.triggerRenderChange();\n        self.dataReadyDeferred.resolve();\n      }\n    });\n  } });","/**\r\n *   Name: Bizagi Desktop Render Letter Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the letter render class to adjust to desktop devices\r\n */\n\n// Extends from render Desktop base\nbizagi.rendering.desktop.render.extend(\"bizagi.rendering.desktop.letter\", bizagi.rendering.letter.prototype);\n// Extends itself\nbizagi.rendering.desktop.letter.extend(\"bizagi.rendering.desktop.letter\", {}, {\n\n  /**\r\n                                                                                 * Template method to implement in each device to customize each render\r\n                                                                                 * after processed\r\n                                                                                 */\n  postRender: function postRender() {\n    var button = $(\":button\", this.getControl());\n\n    // Stylize button\n    button.button();\n  },\n\n  /**\r\n      * Template method to implement in each device to customize the render's\r\n      * behaviour to add handlers\r\n      */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    var button = $(\":button\", self.getControl());\n\n    // Call base\n    self._super();\n\n    // Bind event\n    button.click(function () {\n      // Save the form prior opening the dialog\n      $.when(self.saveForm()).done(function () {\n        // Show letter dialog\n        self.showLetterDialog();\n      });\n    });\n  },\n\n  /**\r\n      *  Method to render non editable values\r\n      */\n  postRenderReadOnly: function postRenderReadOnly() {\n\n  },\n\n  /**\r\n      * Template method to implement in each device to customize the render's behaviour\r\n      * to add handlers when the control is readonly\r\n      */\n  configureHandlersReadOnly: function configureHandlersReadOnly() {\n    var self = this;\n    var control = self.getControl();\n    var url = self.dataService.getLetterNotEditableUrl({\n      idRender: self.properties.id,\n      xpath: self.getXpath(),\n      xpathContext: self.getContextXpath(),\n      idPageCache: self.properties.idPageCache });\n\n\n    // Bind click\n    $(\".ui-bizagi-render-letter-readonly\", control).click(function () {\n      // Save the form prior opening the link\n      $.when(self.saveForm()).done(function () {\n        $.when(self.getCanGenerateLetter()).\n        done(function (wasGenerated) {\n          // Save content in server\n          if (wasGenerated && bizagi.util.parseBoolean(wasGenerated.canGenerate))\n            // Open the url in a new window\n            window.open(url);else\n          {\n            bizagi.showMessageBox(bizagi.localization.getResource(\"render-letter-not-generated\"));\n          }\n        });\n      });\n    });\n  },\n\n  /**\r\n      * Shows letter dialog\r\n      */\n  showLetterDialog: function showLetterDialog() {\n    var self = this;\n    var dialog = new bizagi.rendering.dialog.letter(self.dataService, self.renderFactory);\n\n    $.when(self.getCanGenerateLetter()).\n    done(function (wasGenerated) {\n      // Save content in server\n      if (wasGenerated && bizagi.util.parseBoolean(wasGenerated.canGenerate)) {\n        $.when(self.getLetterContent()).\n        pipe(function (content) {\n          return dialog.render(content);\n        }).done(function (newContent) {\n          // Save content in server\n          self.saveLetterContent(newContent);\n        });\n      } else {\n        bizagi.showMessageBox(bizagi.localization.getResource(\"render-letter-not-generated\"));\n      }\n    });\n  } });","/**\r\n *   Name: Bizagi Desktop Render Button Extension\r\n *   Author: Bizagi UI Forms\r\n *   Comments:\r\n *   -   This script will redefine the button render class to adjust to desktop devices\r\n */\n\n// Extends from render Desktop base \nbizagi.rendering.desktop.render.extend(\"bizagi.rendering.desktop.button\", bizagi.rendering.render.base.prototype);\n// Extends from render Desktop base\nbizagi.rendering.desktop.button.extend(\"bizagi.rendering.desktop.button\", bizagi.rendering.button.prototype);\n// Extends itself\nbizagi.rendering.desktop.button.extend(\"bizagi.rendering.desktop.button\", {}, {\n\n  /**\r\n                                                                                 * Template method to implement in each device to customize each render after processed\r\n                                                                                 * @returns {}\r\n                                                                                 */\n  postRender: function postRender() {\n    var self = this;\n    var control = self.getControl();\n    var button = $(\":button\", control);\n    var buttonInput = $(control.find(\"input\"));\n\n    // Stylize button\n    button.button();\n\n    buttonInput.addClass(\"ui-button--ellipsis\");\n    buttonInput.attr(\"title\", $(control.find(\"input\")).val());\n  },\n\n  /**\r\n      * Template method to implement in each device to customize the render's behaviour to add handlers\r\n      * @returns {}\r\n      */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    var button = $(\":button\", self.getControl());\n\n    // Call base\n    self._super();\n\n    // Bind event\n    button.on(\"click\", function () {\n      //disable button to avoid multiple clicks\n      $(\"input\", self.element).attr(\"disabled\", true);\n\n      // Process button actions\n      self.processButton();\n\n      var timeoutRemoveAttr = setTimeout(function () {\n        //allow button to be clickeable again\n        $(\"input\", self.element).removeAttr(\"disabled\");\n        clearTimeout(timeoutRemoveAttr);\n      }, 1500);\n    });\n  },\n\n  /**\r\n      * Method to render non editable values\r\n      * @returns {}\r\n      */\n  postRenderReadOnly: function postRenderReadOnly() {\n    // Execute the same as post-render\n    this.postRender();\n\n    // Set as disabled\n    var button = $(\":button\", this.getControl());\n    button.button(\"option\", \"disabled\", \"true\");\n  },\n\n  /**\r\n      * Process the button actions workflow\r\n      * @returns {}\r\n      */\n  processButton: function processButton() {\n    var self = this;\n    var properties = self.properties;\n    var mode = self.getMode();\n\n    if (properties.editable) {\n\n      if (typeof self.getFormContainer != \"undefined\")\n\n      var form = self.getFormContainer();\n\n      if (bizagi.override.validateGridsOnButtonClick != false && mode == \"execution\" && form &&\n      !form.hasValidGrids([])) {\n        form.validationController.performValidations();\n      } else {\n        // Check if action need conformation\n        if (properties.needsUserConfirmation) {\n          var htmlMessage = $(\"<div>\").append(properties.userConfirmationMessage);\n          var defer = $.Deferred();\n\n          $(htmlMessage).dialog({\n            modal: true,\n            width: 500,\n            height: 250,\n            draggable: false,\n            resizable: true,\n            maximize: false,\n            title: properties.caption || properties.displayName,\n            buttons: [{\n              text: bizagi.localization.getResource(\"confirmation-box-ok\"),\n              click: function click() {\n                defer.resolve();\n                self.triggerRenderChange({ pressed: true });\n                $(this).dialog(\"close\");\n              } },\n            {\n              text: bizagi.localization.getResource(\"confirmation-box-cancel\"),\n              click: function click() {\n                defer.reject();\n                $(this).dialog(\"close\");\n              } }] });\n\n\n\n          if (!properties.preventDefault) {\n            $.when(defer.promise()).done(function () {\n              self.runButtonAction();\n            });\n          }\n        } else {\n          if (!properties.preventDefault)\n          self.runButtonAction();\n\n          // Trigger change\n          self.triggerRenderChange({ pressed: true });\n        }\n      }\n    }\n  } });","/**\r\n *   Name: Bizagi Desktop Render Button Extension\r\n *   Author: Bizagi UI Forms\r\n *   Comments:\r\n *   -   This script will redefine the button render class to adjust to desktop devices\r\n */\n\n// Extends itself\nbizagi.rendering.desktop.button.extend(\n\"bizagi.rendering.desktop.uiPathButton\", {},\n{\n  /**\r\n   * Update or init the element data\r\n   * @param {*} data \r\n   */\n  initializeData: function initializeData(data) {\n    this._super(data);\n    this.properties.rpabot = this.properties.rpabot || {};\n  },\n  /**\r\n      * Template method to implement in each device to customize each render after processed\r\n      * @returns {}\r\n      */\n  postRender: function postRender() {\n    this._super();\n\n    if (this.getMode() === \"execution\") {\n      bizagi.bzToast.init({\n        zIndex: bizagi.util.getMaxZIndex() + 1 });\n\n      this.initializeRobot();\n    }\n  },\n\n  /**\r\n      * Template method to implement in each device to customize the render's behaviour to add handlers\r\n      * @returns {}\r\n      */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    var button = $(\":button\", self.getControl());\n\n    // Call base\n    self._super();\n\n    // Bind event\n    button.on(\"click\", function () {\n      if (self.robotInstance) {\n        self.runRobot();\n      }\n    });\n  },\n  /**\r\n      * Get and init robot instance\r\n      */\n  initializeRobot: function initializeRobot() {\n    var self = this;\n\n    UiPathRobot.getProcesses().then(\n    function (results) {\n      if (results.length === 0) {\n        var message = self.getResourceByKey(\"workportal-rpa-uipath-error-proccess-not-found\", \"UIPath processes cannot be found or are not available.\");\n        bizagi.showMessageBox(message, \"Error\");\n        self.disabledButton();\n        return;\n      }\n\n      // Get the ID for the sample process\n      self.robotInstance = results.find(function (i) {\n        return i.name.includes(self.properties.rpabot.robotName);\n      });\n\n      if (!self.robotInstance) {\n        var message = self.getResourceByKey(\"workportal-rpa-error-bot-not-found\", \"bot is not found\");\n        bizagi.showMessageBox(self.properties.rpabot.robotName + \" \" + message, \"Error\");\n        self.disabledButton();\n      }\n    },\n    function (err) {\n      var message = self.getResourceByKey(\"workportal-rpa-error-loading-bots\", \"Something went wrong,\");\n      bizagi.showMessageBox(message + \" \" + err, \"Error\");\n      self.disabledButton();\n    });\n\n  },\n  /**\r\n      * Create toast for bot and put on queue\r\n      */\n  runRobot: function runRobot() {\n    var self = this;\n    self.disabledButton();\n    var queueMessage = self.getResourceByKey(\"workportal-rpa-bot-queue\", \"The bot is being executed, please wait\");\n\n    if (!self.properties.toast) {\n      self.properties.toast = bizagi.bzToast.addItem({\n        title: self.properties.rpabot.robotName,\n        content: queueMessage,\n        onClickIcon: function onClickIcon(item) {\n          if (item.status === \"error\") {\n            item.relaunch().setLoaderStatus().setContent(queueMessage);\n          }\n        },\n        onCanStartJob: function onCanStartJob() {\n          self.startJob();\n        } });\n\n    } else {\n      self.properties.toast.relaunch().setLoaderStatus().setContent(queueMessage);\n    }\n  },\n  /**\r\n      * Verify if all required inputs and outputs are in form, then execute bot task. \r\n      */\n  startJob: function startJob() {\n    var self = this;\n    var toast = self.properties.toast;\n    var properties = self.properties;\n\n    var inputs = properties.rpabot.inputs || [];\n    var outputs = properties.rpabot.outputs || [];\n\n    var controlsInForm = this.areAllControlsInForm(inputs.concat(outputs));\n    if (controlsInForm.allControlsFound) {\n      var inputs = self.getRobotInputs();\n      self.disabledButton();\n      toast.setLoaderStatus();\n\n      self.robotInstance.\n      start(inputs).\n      onStatus(function (status) {\n        toast.setContent(status);\n      }).\n      then(\n      function (processResults) {\n        self.processOutput(processResults);\n\n        var successMessage = self.getResourceByKey(\"workportal-rpa-bot-executed-succesfully\", \"Bot executed succesfully\");\n        toast.setSuccessStatus().setContent(successMessage);\n        self.properties.toast = undefined;\n        self.enableButton();\n      },\n      //error function\n      function (err) {\n        var message = err.InnerException ? err.InnerException.Message : self.getResourceByKey(\"workportal-rpa-bot-error-executed\", \"There is an error in the bot execution\");\n        toast.setErrorStatus().setContent(message);\n        self.enableButton();\n      });\n\n    } else {\n      self.handleNotFoundControls(controlsInForm.controlsNotFound);\n    }\n  },\n  /**\r\n      * Set the getted value from output robot in control with xpath in form.\r\n      * @param {*} robotResult \r\n      */\n  processOutput: function processOutput(robotResult) {\n    var form = this.getFormContainer();\n    var outputs = this.properties.rpabot.outputs || [];\n\n    outputs.forEach(function (output) {\n      var responseValue = robotResult[output.robotArgumentName];\n      if (responseValue) {\n        var relatedControl = form.getRenders(output.xpath)[0];\n        if (!bizagi.util.isEmpty(relatedControl)) {\n          relatedControl.setDisplayValue(responseValue);\n        }\n      }\n    });\n  },\n  /**\r\n      * Disabled button for user can't click it.\r\n      */\n  disabledButton: function disabledButton() {\n    var input = $(\"input\", this.getControl());\n    input.attr(\"disabled\", true).addClass(\"ui-state-disabled rpa-disabled\");\n\n  },\n  /**\r\n      * Enavle button for user can click it.\r\n      */\n  enableButton: function enableButton() {\n    var input = $(\"input\", this.getControl());\n    input.removeAttr(\"disabled\").removeClass(\"ui-state-disabled rpa-disabled\");\n  },\n  /**\r\n      * Return a object with required inputs and their values.\r\n      */\n  getRobotInputs: function getRobotInputs() {\n    var form = this.getFormContainer();\n    var args = {};\n    var inputs = this.properties.rpabot.inputs || [];\n\n    inputs.forEach(function (input) {\n      var relatedControl = form.getRenders(input.xpath)[0];\n      var value = \"\";\n      if (!bizagi.util.isEmpty(relatedControl)) {\n        value = relatedControl.getValue();\n      }\n      args[input.robotArgumentName] = value;\n    });\n\n    return args;\n  },\n  /**\r\n      * Return if the controls in parameters are in form. If any control isn't form return the control's xpath.\r\n      * @param {*} rpaArgs \r\n      */\n  areAllControlsInForm: function areAllControlsInForm(rpaArgs) {\n    var form = this.getFormContainer();\n    var resp = {\n      allControlsFound: true,\n      controlsNotFound: [] };\n\n    rpaArgs = rpaArgs || [];\n    rpaArgs.forEach(function (arg) {\n      var relatedControl = form.getRenders(arg.xpath)[0];\n      if (bizagi.util.isEmpty(relatedControl)) {\n        resp.allControlsFound = false;\n        resp.controlsNotFound.push(arg.xpath);\n      }\n    });\n    return resp;\n  },\n  /**\r\n      * Show modal message when any required input or output aren't in form.\r\n      * @param {*} controls \r\n      */\n  handleNotFoundControls: function handleNotFoundControls(controls) {\n    var message = this.getResourceByKey(\"workportal-rpa-controls-not-found\", \"Controls associated with the bots inputs and outputs are not within the form\");\n    this.properties.toast.setErrorStatus().setContent(message);\n\n    message += \":\";\n    controls.forEach(function (i) {\n      message += i + \",\\n\";\n    });\n    bizagi.showMessageBox(message, \"Error\");\n\n    this.disabledButton();\n  } });","/**\r\n *   Name: Bizagi Desktop Render fileprint Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the fileprint render class to adjust to desktop devices\r\n */\n\n// Extends from render Desktop base\nbizagi.rendering.desktop.render.extend(\"bizagi.rendering.desktop.fileprint\", bizagi.rendering.fileprint.prototype);\n// Extends itself\nbizagi.rendering.desktop.fileprint.extend(\"bizagi.rendering.desktop.fileprint\", {}, {\n\n  /**\r\n                                                                                       * Method to customize each render after processed\r\n                                                                                       */\n  postRender: function postRender() {\n    var button = $(\":button\", this.getControl());\n\n    // Stylize button\n    button.button();\n  },\n\n  /**\r\n      * Method to customize the render's behaviour to add handlers\r\n      */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    var properties = self.properties;\n    var button = $(\":button\", self.getControl());\n\n    // Call base\n    self._super();\n\n    if (properties.filesCount > 0) {\n      // Bind event\n      button.click(function () {\n        // Process button actions\n        self.processButton();\n      });\n    } else {\n      button.button(\"option\", \"disabled\", \"true\");\n    }\n  },\n\n  /**\r\n      * Method to render non editable values\r\n      * @returns {}\r\n      */\n  postRenderReadOnly: function postRenderReadOnly() {\n    var self = this;\n    var form = self.getFormContainer();\n    var typeForm = form.properties.typeForm;\n\n    // Execute the same as post-render\n    this.postRender();\n\n    // Set as disabled\n    var button = $(\":button\", this.getControl());\n\n    if (typeForm === \"SummaryForm\" || typeForm === \"GlobalForm\") {\n      self.configureHandlers();\n    } else {\n      button.button(\"option\", \"disabled\", \"true\");\n    }\n  },\n\n  /**\r\n      * Process the button actions workflow\r\n      */\n  processButton: function processButton() {\n    var self = this;\n    var form = self.getFormContainer();\n    var typeForm = form.properties.typeForm;\n\n    if (self.properties.editable || typeForm === \"SummaryForm\" || typeForm === \"GlobalForm\") {\n      self.runButtonAction();\n    }\n  },\n\n  /**\r\n      * Run button actions\r\n      */\n  runButtonAction: function runButtonAction() {\n    var self = this;\n    var form = self.getFormContainer();\n\n    // Clear previous validations\n    form.clearValidationMessages();\n\n    // Set the loading feedback\n    form.startLoading();\n\n    self.downloadFile().then(function (blobFile) {\n      if ($.browser.mozilla) {\n        bizagi.util.downloadBlobFile(blobFile, \"PDF.pdf\");\n      } else {\n        // Remove previous iframe\n        var control = self.getControl();\n        $(\"iframe\", control).remove();\n\n        // Render new iframe\n        var idFrame = \"bz-render-fileprint-iframe-\" + new Date().getTime();\n        var tmpl = self.renderFactory.getTemplate(\"fileprint-iframe\");\n        var fileURL = window.URL.createObjectURL(blobFile);\n        var iframe = $.tmpl(tmpl, {\n          url: fileURL,\n          id: idFrame });\n\n\n        control.append(iframe);\n\n        // Print iframe\n        var frm = document.getElementById(idFrame).contentWindow;\n        if (typeof frm.print != \"undefined\" && !bizagi.util.isIE()) {\n          frm.print();\n        } else {\n          bizagi.util.downloadBlobFile(blobFile, \"PDF.pdf\");\n        }\n\n        // No longer need to read the blob so it's revoked\n        window.URL.revokeObjectURL(fileURL);\n      }\n    }).fail(function (error) {\n      form && form.failHandler(error);\n    }).always(function () {\n      // Finish loading\n      form && form.endLoading();\n    });\n  } });","/**\r\n *   Name: Bizagi Desktop Render Link Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the link render class to adjust to desktop devices\r\n */\n\nbizagi.rendering.desktop.render.extend(\"bizagi.rendering.desktop.link\", bizagi.rendering.render.base.prototype);\n// Extends from render desktop base\nbizagi.rendering.desktop.link.extend(\"bizagi.rendering.desktop.link\", bizagi.rendering.link.prototype);\n// Extends itself\nbizagi.rendering.desktop.link.extend(\"bizagi.rendering.desktop.link\", {}, {\n\n  /**\r\n                                                                             * Template method to implement in each device to customize each render after processed\r\n                                                                             * @returns {}\r\n                                                                             */\n  postRender: function postRender() {\n  },\n\n  /**\r\n      * Template method to implement in each device to customize the render's behaviour to add handlers\r\n      * @returns {}\r\n      */\n  configureHandlers: function configureHandlers() {\n    this.attachEvents();\n  },\n\n  /**\r\n      * Template method to implement in each device to customize the render's behaviour\r\n      * to add handlers when the control is readonly\r\n      */\n  configureHandlersReadOnly: function configureHandlersReadOnly() {\n    this.attachEvents();\n  },\n\n  /**\r\n      * Solve action to link\r\n      * @param args\r\n      */\n  linkSolver: function linkSolver(args) {\n    args = args || {};\n    var self = this;\n    var url = args.url || \"\";\n    var target = args.target || \"_blank\";\n\n    if (bizagi.override.linkPrefix === true && url) {\n      if (url.indexOf(\"http\") === -1 && url.indexOf(\"\\\\\\\\\") === -1) {\n        url = \"//\" + bizagi.util.trim(url);\n      }\n    }\n\n    switch (args.linkType) {\n      case \"newwindow\":\n        var windowParamsPatter = \"width=%s,height=%s,resizable,scrollbars=yes,status=1,toolbar=yes\";\n        var windowParams = printf(windowParamsPatter, window.screen.width, window.screen.height);\n        self.windowObjReference = window.open(url, target, windowParams);\n        break;\n      case \"newtab\":\n        self.windowObjReference = window.open(url, target);\n        break;\n      default:\n        self.windowObjReference = window.open(url, target);\n        break;}\n\n  },\n\n  /**\r\n      * Method to render non editable values\r\n      * @returns {}\r\n      */\n  postRenderReadOnly: function postRenderReadOnly() {\n    // Execute the same as post-render\n    this.postRender();\n  },\n\n  /**\r\n      * Configure event handlers\r\n      */\n  attachEvents: function attachEvents() {\n    var self = this;\n    var control = self.getControl();\n    var properties = self.properties;\n    var link = $(\".ui-bizagi-render-link\", control);\n\n    if (properties.value) {\n      // Modify href\n      link.attr(\"href\", properties.value);\n      link.attr(\"target\", \"_blank\");\n\n      link.click(function () {\n        //if the container form of this component is detail, executes the link\n        self.linkSolver({ linkType: properties.linktarget, url: properties.value });\n        return false;\n      });\n    } else {\n      link.addClass(\"ui-state-disabled\");\n    }\n\n\n    self.preventDefaultForAnchorTag();\n  },\n\n  processLayout: function processLayout(isLabelFormat) {\n    if (!isLabelFormat) {\n      this._super(isLabelFormat, this.properties.textFormat);\n    } else {\n      if (typeof this.properties.textFormat.background !== \"undefined\") {\n        this._super(isLabelFormat, { background: this.properties.textFormat.background });\n      }\n    }\n  },\n\n  getElementsToStylize: function getElementsToStylize($context) {\n    return $(\".ui-bizagi-render-link\", $context);\n  } });","/*\r\n*   Name: Bizagi Desktop Render Template Text Extension\r\n*   Author: Andres Fernando Munoz\r\n*   Comments:\r\n*   -   This script will redefine the layout render class to adjust to desktop devices\r\n*/\n\n// Extends from render desktop base\nbizagi.rendering.desktop.render.extend(\"bizagi.rendering.desktop.layoutRender\", bizagi.rendering.layoutRender.prototype);","/*\r\n *   Name: BizAgi Render Layout Label Class\r\n *   Author: Mauricio Snchez\r\n *   Comments:\r\n *   -   This script will define basic stuff for labels inside templates\r\n */\n\nbizagi.rendering.desktop.layoutRender.extend(\"bizagi.rendering.desktop.layoutPlaceholder\", bizagi.rendering.layoutPlaceholder.prototype);","/*\r\n*   Name: BizAgi Render Layout Boolean Class\r\n*   Author: Alexander Mejia\r\n*   Comments:\r\n*   -   This script will define basic stuff for boolean renders inside templates\r\n*/\n\nbizagi.rendering.desktop.layoutRender.extend(\"bizagi.rendering.desktop.layoutBoolean\", bizagi.rendering.layoutBoolean.prototype);","/*\r\n*   Name: Bizagi render layout image\r\n*   Author: Andres Fernando Munoz\r\n*   Comments:\r\n*   -   This script will redefine the non editable image render class to adjust to desktop devices\r\n*/\n\n// Extends from layoutRender desktop base\nbizagi.rendering.desktop.layoutRender.extend(\"bizagi.rendering.desktop.layoutImage\", bizagi.rendering.layoutImage.prototype);\n// Extends itself\nbizagi.rendering.desktop.layoutImage.extend(\"bizagi.rendering.desktop.layoutImage\", {}, {\n  /**\r\n                                                                                           * Gets the url to get the array image\r\n                                                                                           */\n\n  postRender: function postRender() {\n\n    var self = this;\n    var control = self.getControl();\n\n    if (self.value && typeof self.value.value !== \"undefined\" && self.value.value !== \"\" && self.value.value !== null) {\n      //Get image of customer in binary format\n      var url = self.getImageUri();\n      $.ajax({\n        url: url,\n        type: \"GET\",\n        dataType: \"binary\",\n        processData: false,\n        success: function success(blob) {\n\n          if (typeof blob == \"string\") {\n            var xhr = arguments[2];\n            var contentType = xhr.getResponseHeader('Content-type');\n            blob = bizagi.util.byteArrayToBlob(bizagi.util.stringToByteArray(blob), contentType);\n          }\n\n          var urlCreator = window.URL || window.webkitURL;\n          var imageUrl = urlCreator.createObjectURL(blob);\n\n          $(control).find('img').attr(\"src\", imageUrl);\n        } });\n\n    }\n  },\n\n  getImageUri: function getImageUri() {\n    var self = this;\n\n    var templateControl = self.parent.parent;\n    var renderParams = templateControl.properties.paramsRender || {};\n\n    var map = {\n      entity: self.value.guid,\n      surrogateKey: self.value.surrogateKey,\n      xpath: self.properties.xpath,\n      width: 96,\n      height: 96,\n      hash: self.value.value,\n      idcase: renderParams.idRender ? bizagi.context.idCase : \"_\",\n      idworkitem: renderParams.idRender ? bizagi.context.idWorkitem : \"_\",\n      contextxpath: renderParams.idRender ? renderParams.xpathActions : \"_\" };\n\n\n    return self.dataService.serviceLocator.getUrl(\"render-entity-layout-imageByteArray\").replaceMultiple(map);\n  } });","/**\r\n * Name: Bizagi Desktop Render Link Extension\r\n * Author: Andres Fernando Munoz\r\n * Comments:\r\n * -   This script will redefine the non editable link render class to adjust to desktop devices\r\n * -   This control is based on the link render control\r\n */\n\n// Extends from layoutRender desktop base\nbizagi.rendering.desktop.layoutRender.extend(\"bizagi.rendering.desktop.layoutLink\", bizagi.rendering.layoutLink.prototype);\n// Extends itself\nbizagi.rendering.desktop.layoutLink.extend(\"bizagi.rendering.desktop.layoutLink\", {}, {\n\n  /**\r\n                                                                                         * Template method to implement in each device to customize each render after processed\r\n                                                                                         */\n  postRender: function postRender() {\n    var self = this;\n    var element = self.element;\n\n    // Call base\n    self._super();\n    if (element) {\n      $(element).on('click', $.proxy(self.onClickElement, self));\n    }\n  },\n  /**\r\n      * When click over link\r\n      */\n  onClickElement: function onClickElement() {\n    var self = this;\n    var properties = self.properties || {};\n    var args = {\n      displayName: properties.displayName,\n      reference: properties.reference,\n      referenceType: properties.referenceType,\n      xpath: properties.xpath,\n      contextEvent: self.getFormContainer().getContextEvent ? self.getFormContainer().getContextEvent() : '' };\n\n    self.triggerGlobalHandler(\"DATA-NAVIGATION\", args);\n  } });","/*\r\n *   Name: Bizagi Desktop Render Template Label Extension\r\n *   Author: Mauricio Snchez\r\n *   Comments:\r\n *   -   This script will redefine the label render class inside templates to adjust to desktop devices\r\n */\n\n// Extends from layoutRender desktop base\nbizagi.rendering.desktop.layoutRender.extend(\"bizagi.rendering.desktop.layoutLabel\", bizagi.rendering.layoutLabel.prototype);\n// Extends itself\nbizagi.rendering.desktop.layoutLabel.extend(\"bizagi.rendering.desktop.layoutLabel\", {}, {\n\n  setValue: function setValue(val, triggerEvents) {\n    var self = this;\n    self.properties.displayName = val;\n    this._super(val, triggerEvents);\n    var control = self.getControl();\n    if (control) {\n      $(\".ui-bizagi-render-label\", control).text(val);\n    }\n  } });","/*\r\n*   Name: Bizagi Desktop Render Template Text Extension\r\n*   Author: Mauricio Sanchez\r\n*   Comments:\r\n*   -   This script will redefine the text render class inside templates to adjust to desktop devices\r\n*/\n\n// Extends from layoutRender desktop base\nbizagi.rendering.desktop.layoutRender.extend(\"bizagi.rendering.desktop.layoutText\", bizagi.rendering.layoutText.prototype);","/*\r\n*   Name: Bizagi Desktop Render Template dateTime Extension\r\n*   Author: Andres Fernando Munoz\r\n*   Comments:\r\n*   -   This script will redefine the date time render class inside templates to adjust to desktop devices\r\n*/\n\n// Extends from layoutRender desktop base\nbizagi.rendering.desktop.layoutRender.extend(\"bizagi.rendering.desktop.layoutDateTime\", bizagi.rendering.layoutDateTime.prototype);","/**\r\n * Name: Bizagi Desktop Render Template number Extension\r\n * Author: Mauricio Sanchez\r\n * Comments:\r\n * - This script will redefine the number render class inside templates to adjust to desktop devices\r\n */\n\n// Extends from layoutRender desktop base\nbizagi.rendering.desktop.layoutRender.extend(\"bizagi.rendering.desktop.layoutNumber\", bizagi.rendering.layoutNumber.prototype);\n// Extends itself\nbizagi.rendering.desktop.layoutNumber.extend(\"bizagi.rendering.desktop.layoutNumber\", {}, {\n\n  /**\r\n                                                                                             * Sets the value in the rendered control\r\n                                                                                             */\n  setValue: function setValue(val, triggerEvents) {\n    var self = this;\n    var control = self.getControl();\n\n    if (self.getMode() === \"execution\") {\n      val = val === null || val === \"\" ? \"\" : self.getDisplayValue(val);\n    }\n\n    self.properties.displayName = val;\n\n    this._super(val, triggerEvents);\n    if (control) {\n      $(\".ui-bizagi-render-number\", control).text(val);\n    }\n  } });","/**\r\n * Name: Bizagi Desktop Render Template Money Extension\r\n * Author: Andres Fernando Munoz\r\n * Comments:\r\n * - This script will redefine the money render class inside templates to adjust to desktop devices\r\n */\n\n// Extends from layoutRender desktop base\nbizagi.rendering.desktop.layoutRender.extend(\"bizagi.rendering.desktop.layoutMoney\", bizagi.rendering.layoutNumber.prototype);\n// Extends itself\nbizagi.rendering.desktop.layoutMoney.extend(\"bizagi.rendering.desktop.layoutMoney\", bizagi.rendering.layoutMoney.prototype);\n// Extends itself\nbizagi.rendering.desktop.layoutMoney.extend(\"bizagi.rendering.desktop.layoutMoney\", {}, {\n\n  /**\r\n                                                                                           * Sets the value in the rendered control\r\n                                                                                           */\n  setValue: function setValue(val, triggerEvents) {\n    var self = this;\n    var control = self.getControl();\n\n    if (self.getMode() === \"execution\") {\n      val = val === null || val === \"\" ? \"\" : self.getDisplayValue(val);\n    }\n    self.properties.displayName = val;\n\n    this._super(val, triggerEvents);\n    if (control) {\n      $(\".ui-bizagi-render-number\", control).text(val);\n    }\n  } });","/**\r\n *   Name: Bizagi Desktop Render Layout Upload\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define the upload on entity template\r\n */\n\n// Extends from layoutRender desktop base\nbizagi.rendering.desktop.layoutRender.extend(\"bizagi.rendering.desktop.layoutUpload\", bizagi.rendering.layoutUpload.prototype);\n// Extends itself\nbizagi.rendering.desktop.layoutUpload.extend(\"bizagi.rendering.desktop.layoutUpload\", {}, {\n\n  /**\r\n                                                                                             *   Template method to implement in each children to customize each control\r\n                                                                                             */\n  renderControl: function renderControl() {\n    var self = this;\n    var properties = self.properties;\n    var defer = $.Deferred();\n    var mode = self.getMode();\n\n    if (mode === \"execution\") {\n      $.when(self.getValueFilesByData(bizagi.clone(properties))).\n      done(function (properties, valueResult) {\n        self.properties = properties;\n        self.files = valueResult.files;\n        defer.resolve(self.getHTMLFiles(properties));\n      });\n    } else {\n      self.files = [];\n      defer.resolve(self.getHTMLFiles());\n    }\n\n    return defer.promise();\n  },\n\n  getHTMLFiles: function getHTMLFiles() {\n    var self = this;\n    self.filesCount = self.files.length;\n\n    var template = self.renderFactory.getTemplate(\"layout-upload\");\n\n    // Render template\n    var html = $.fasttmpl(template, {\n      xpath: bizagi.util.encodeXpath(self.getUploadXpath()),\n      noFiles: self.filesCount == 0 });\n\n\n    // Render current children\n    var items = \"\";\n    for (var i = 0; i < self.filesCount; i++) {\n      var file = { id: self.files[i][0], fileName: self.files[i][1] };\n      items += self.renderUploadItem(file);\n    }\n\n    html = self.replaceFilesHtml(html, items);\n\n    return html;\n  },\n\n  /**\r\n      *   Replaces a {{files}} tag in the container for the specified \"replace\" element\r\n      */\n  replaceFilesHtml: function replaceFilesHtml(html, replace) {\n    return html.replace(\"{{files}}\", replace);\n  },\n\n  /**\r\n      *   Renders a single upload item\r\n      */\n  renderUploadItem: function renderUploadItem(file) {\n    var self = this;\n    var properties = self.properties;\n    var template = self.renderFactory.getTemplate(\"layout-uploadItem\");\n\n    return $.fasttmpl(template, {\n      allowDelete: properties.allowDelete,\n      filename: file.fileName,\n      id: file.id,\n      mode: self.getMode(),\n      editable: properties.editable });\n\n  },\n\n  /**\r\n      * Method to customize the container's behaviour to add handlers\r\n      */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    var $control = self.getControl();\n\n    if (self.isExecutionMode()) {\n      $(\".ui-bizagi-render-upload-layout-item\", $control).on(\"click\", function (e) {\n        e.stopPropagation();\n\n        self.downloadFile($(this).data());\n      });\n    }\n  },\n\n  /**\r\n      * Download the upload item\r\n      * @param file\r\n      * @returns {*}\r\n      */\n  downloadFile: function downloadFile(file) {\n    var self = this;\n    var properties = self.properties;\n    var form = self.getFormContainer();\n\n    return self.dataService.getUploadFileEntity({\n      isContextContainerWidgetRender: self.isContextContainerWidgetRender(),\n      xpath: self.getUploadXpath(),\n      fileId: file.id,\n      idRender: form.properties.paramsRender.idRender || \"undefined\",\n      xpathContext: properties.xpathContext,\n      idPageCache: form.properties.paramsRender.idPageCache || \"undefined\",\n      xpathActions: form.properties.paramsRender.xpathActions || \"undefined\",\n      surrogatekey: self.properties.value.surrogateKey,\n      guidentity: self.properties.value.guid }).\n    then(function (blobFile) {\n      bizagi.util.downloadBlobFile(blobFile, file.filename);\n    }).fail(function (error) {\n      form && form.failHandler(error);\n    });\n  } });","/**\r\n *   Name: Bizagi Render Geolocation control\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for form link renders\r\n */\n// Extends from render desktop base\nbizagi.rendering.desktop.render.extend(\"bizagi.rendering.desktop.geolocation\", bizagi.rendering.geolocation.prototype);\n// Extends itself\nbizagi.rendering.desktop.geolocation.extend(\"bizagi.rendering.desktop.geolocation\", {}, {\n\n  /**\r\n                                                                                           * Method to customize each render after processed in read-only mode\r\n                                                                                           */\n  renderReadOnly: function renderReadOnly() {\n    return this.renderControl();\n  },\n\n  postRenderReadOnly: function postRenderReadOnly() {\n    this.postRender();\n  },\n\n  postRender: function postRender() {\n    // Call base\n    this._super();\n\n    this.cordinate = $(\".ui-geolocation-cordinate\", this.getControl());\n  },\n\n  /**\r\n      * Template method to implement in each device to customize the render's behaviour to add handlers\r\n      */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n\n    if (self.isExecutionMode()) {\n      var control = self.getControl();\n\n      // If the control doesn't have a value set the position\n      if (self.value == null) {\n        self.setDisplayValue().then(function () {\n        }).fail(function (msg) {\n          self.cordinate.html(\"<span style='color: red'>\" + msg + \"</span>\");\n        });\n      }\n\n      $(\".ui-bizagi-render-geolocation\", control).bind(\"click\", function () {\n        self.cordinate.empty();\n        // This retun a promise if is usefull\n        self.setDisplayValue().then(function () {\n        }).fail(function (msg) {\n          self.cordinate.html(\"<span style='color: red'>\" + msg + \"</span>\");\n        });\n      });\n    }\n  },\n\n  /**\r\n      * Sets the value in the rendered control\r\n      * @param value\r\n      * @returns {*}\r\n      */\n\n  clearDisplayValue: function clearDisplayValue() {\n    var self = this;\n    var control = self.getControl();\n    var input = control.find(\"span\");\n\n    if (input.length > 0) {\n      input.val(\"\");\n    }\n  },\n\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n    var def = new $.Deferred();\n\n    if (value != null && value !== \"\") {\n      self.cordinate.html(self.performPrecision(value));\n\n      // Set internal value\n      self.setValue(value, false);\n      def.resolve();\n    } else {\n\n      var onSuccess = function onSuccess(position) {\n        var coordinate = position.coords.latitude + \" \" + position.coords.longitude;\n\n        self.cordinate.html(self.performPrecision(coordinate));\n\n        // Set internal value\n        self.setValue(coordinate, false);\n        def.resolve();\n      };\n\n      // onError Callback receives a PositionError object\n      var onError = function onError(msg) {\n        self.cordinate.html(self.properties.value);\n        def.reject(msg);\n      };\n\n      self.getCurrentPosition(onSuccess, onError);\n    }\n\n    return def.promise();\n  } });","/**\r\n  *   Name: Bizagi Desktop Render HIdden Extension\r\n  *   Author: UI Forms Team\r\n  *   Comments:\r\n  *   -   This script will redefine the hidden render class to adjust to desktop devices\r\n  */\n\n// Extends from render Desktop base\nbizagi.rendering.desktop.render.extend(\"bizagi.rendering.desktop.hidden\", bizagi.rendering.hidden.prototype);\n// Extends itself\nbizagi.rendering.desktop.hidden.extend(\"bizagi.rendering.desktop.hidden\", {}, {});","/*\r\n*   Name: Bizagi Desktop Render Money Extension\r\n*   Author: UI Forms Team\r\n*   Comments:\r\n*   -   This script will redefine the money render class to adjust to desktop devices\r\n*/\n\n// Extends from render desktop base\nbizagi.rendering.desktop.render.extend(\"bizagi.rendering.desktop.money\", bizagi.rendering.number.prototype);\n// Extends itself\nbizagi.rendering.desktop.money.extend(\"bizagi.rendering.desktop.money\", bizagi.rendering.money.prototype);\n// Extends itself\nbizagi.rendering.desktop.money.extend(\"bizagi.rendering.desktop.money\", {}, {\n\n  /*\r\n                                                                              *   Sets the value in the rendered control\r\n                                                                              */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n    var properties = self.properties;\n\n    // Call base\n    this._super(value);\n\n    // Set value in input\n    if (value !== undefined && value !== null && properties.editable) {\n      self.numericInput.val(bizagi.util.numberToFixedString(value));\n\n      // Formats the input\n      self.executeFormatCurrencyPlugin();\n    }\n  },\n\n  changeCellRequired: function changeCellRequired(argument) {\n    this.changeRequired(argument);\n  },\n\n  changeRequired: function changeRequired(argument) {\n    this.properties.required = argument;\n    this.changeRequiredLabel(argument);\n  },\n\n  changeRequiredLabel: function changeRequiredLabel(argument) {\n    var control = this.getControl();\n\n    if (control.length > 0) {\n      if (this.getMode() !== \"execution\") {\n        if (bizagi.util.parseBoolean(argument) === true && this.properties.editable) {\n          control.addClass(\"control-required\");\n        } else {\n          control.removeClass(\"control-required\");\n        }\n      } else {\n        if (bizagi.util.parseBoolean(argument) === true && !this.hasValue() && this.properties.editable) {\n          control.addClass(\"control-required\");\n        } else {\n          control.removeClass(\"control-required\");\n        }\n      }\n    }\n\n    this.triggerRenderValidate();\n  },\n\n  /**\r\n     * Customizes the font underline\r\n     * It does not apply when we use the render.base component\r\n     * @param underline\r\n     * @param isLabelFormat\r\n     */\n  changeFontUnderline: function changeFontUnderline(underline, isLabelFormat) {\n    var self = this;\n    var textFormat = self.properties.textFormat || {};\n    var valueFormat = self.properties.valueFormat || {};\n\n    var labelStrikethrough = bizagi.util.parseBoolean(textFormat.strikethru) ? \"line-through \" : \"\";\n    var valueStrikethrough = bizagi.util.parseBoolean(valueFormat.strikethru) ? \"line-through \" : \"\";\n    var formatUnderline = bizagi.util.parseBoolean(underline) ? \"underline\" : \"\";\n\n    var isLabelToFormat = typeof isLabelFormat != \"undefined\" || isLabelFormat != null ? isLabelFormat : true;\n    var $formatElements = isLabelToFormat ? self.getFormattingLabel() : self.getElementsToStylized(self.getControl());\n    var formatStrikeThrough = isLabelToFormat ? labelStrikethrough : valueStrikethrough;\n\n    self.changeTextDecoration($formatElements, formatStrikeThrough + formatUnderline);\n  },\n\n  /**\r\n      * Customizes the font Strikethrough property\r\n      * It does not apply when we use the render.base component\r\n      * @param strikeThrough\r\n      * @param isLabelFormat\r\n      */\n  changeFontStrikethru: function changeFontStrikethru(strikeThrough, isLabelFormat) {\n    var self = this;\n    var textFormat = self.properties.textFormat || {};\n    var valueFormat = self.properties.valueFormat || {};\n\n    var labelUnderline = bizagi.util.parseBoolean(textFormat.underline) ? \"underline \" : \"\";\n    var valueUnderline = bizagi.util.parseBoolean(valueFormat.underline) ? \"underline \" : \"\";\n    var formatStrikeThrough = bizagi.util.parseBoolean(strikeThrough) ? \"line-through\" : \"\";\n\n    var isLabelToFormat = typeof isLabelFormat != \"undefined\" || isLabelFormat != null ? isLabelFormat : true;\n    var $formatElements = isLabelToFormat ? self.getFormattingLabel() : self.getElementsToStylized(self.getControl());\n\n    var formatUnderline = isLabelToFormat ? labelUnderline : valueUnderline;\n\n    self.changeTextDecoration($formatElements, formatUnderline + formatStrikeThrough);\n  },\n\n  /**\r\n      * Context to apply styles\r\n      * @param context\r\n      * @returns {jQuery|HTMLElement}\r\n      */\n  getElementsToStylized: function getElementsToStylized(context) {\n    return $(\"input.ui-bizagi-render-numeric, label.readonly-control\", context);\n  },\n\n  /**\r\n      * Customizes the font Strikethrough or underline property\r\n      * @param {} $element\r\n      * @param {} textDecoration\r\n      * @returns {}\r\n      */\n  changeTextDecoration: function changeTextDecoration($element, textDecoration) {\n    if (textDecoration === undefined) return this;\n    if ($element === undefined) return this;\n\n    textDecoration && $element.css(\"text-decoration\", textDecoration);\n\n    return this;\n  } });","/**\r\n *   Name: Bizagi Desktop Render Query Money Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the query money render class to adjust to desktop devices\r\n */\n\n// Extends itself\nbizagi.rendering.desktop.money.extend(\"bizagi.rendering.desktop.queryMoney\", {}, {\n\n  /**\r\n                                                                                    * Adds the format currency plugin\r\n                                                                                    */\n  attachFormatCurrency: function attachFormatCurrency() {\n    var self = this;\n    var properties = self.properties;\n    if (properties.showSymbol) {\n\n      if (properties.symbol === '' && typeof bizagi != \"undefined\" && properties.dataType == 8 && typeof bizagi.currentUser != \"undefined\") {\n        if (typeof bizagi.currentUser.symbol != \"undefined\") {\n          properties.symbol = bizagi.currentUser.symbol;\n        }\n      }\n    }\n\n    // Call base\n    this._super();\n  } });","/**\r\n *   Name: Bizagi Desktop Render list Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the list render class to adjust to desktop devices\r\n */\n\n// Extends from render desktop base\nbizagi.rendering.desktop.render.extend(\"bizagi.rendering.desktop.radio\", bizagi.rendering.combo.prototype);\n// Extends itself\nbizagi.rendering.desktop.radio.extend(\"bizagi.rendering.desktop.radio\", bizagi.rendering.radio.prototype);\n// Extends itself\nbizagi.rendering.desktop.radio.extend(\"bizagi.rendering.desktop.radio\", {}, {\n\n  /**\r\n                                                                               * Template method to implement in each device to customize each render after processed\r\n                                                                               */\n  postRender: function postRender() {\n    var self = this;\n    var control = self.getControl();\n\n    // Call base \n    self._super();\n\n    // Set control container to behave as a block\n    control.addClass(\"ui-bizagi-render-display-block\");\n    control.addClass(\"ui-bizagi-render-boolean-yesno\");\n\n    self.properties.unique = Math.ceil(Math.random() * 1000);\n\n\n    // Apply plugin\n    self.radiogroup = $(\".ui-bizagi-render-radio\", control);\n    self.radiogroup.optiongroup({ orientation: self.properties.orientation });\n    if (self.selectedValue) {\n      self.radiogroup.optiongroup(\"setValue\", self.selectedValue);\n    }\n  },\n\n  /**\r\n      * Template method to implement in each device to customize the render's behaviour to add handlers\r\n      */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n\n    // Call base\n    self._super();\n\n    // Bind handler\n    self.radiogroup.bind(\"optiongroupchange\", function (event, ui) {\n      // Updates internal value\n      self.onOptionGroupChange(ui);\n    });\n  },\n\n  onOptionGroupChange: function onOptionGroupChange(ui) {\n    var self = this;\n    var newValue = { id: ui.value, value: ui.text };\n    self.selectedValue = newValue.value;\n    self.setValue(newValue);\n  },\n\n  /**\r\n      * Template method to implement in each device to customize the render's behaviour when rendering in design mode\r\n      */\n  configureDesignView: function configureDesignView() {\n    var self = this;\n    var control = self.getControl();\n\n    // Unbind plugin handlers\n    control.find(\"input\").unbind(\"click\");\n  },\n\n  /**\r\n      * Sets the value in the rendered control\r\n      * @param value\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n    var properties = self.properties;\n\n    if (properties.editable) {\n      if (value !== undefined && value.id != \"\") {\n        self.radiogroup.optiongroup(\"setValue\", value.id || value.value);\n      }\n    }\n  },\n\n  /**\r\n      * Sets the value in the rendered control\r\n      */\n  clearDisplayValue: function clearDisplayValue() {\n    var self = this;\n    var control = self.getControl();\n    if (self.radiogroup) {\n      if ($.data(self.radiogroup[0])['ui-optiongroup']) {\n        self.radiogroup.optiongroup(\"setValue\", 0);\n      } else {\n        $(control).html(\"<label class='readonly-control'></label>\");\n      }\n    } else if (!self.properties.editable) {\n      $(control).html(\"<label class='readonly-control'></label>\");\n    }\n  },\n\n  /**\r\n      * Returns the selected value in the template\r\n      * @returns {*}\r\n      */\n  getSelectedValue: function getSelectedValue() {\n    return this.selectedValue;\n  },\n\n  /**\r\n      * Customizes the font underline\r\n      * It does not apply when we use the render.base component\r\n      * @param underline\r\n      * @param isLabelFormat\r\n      */\n  changeFontUnderline: function changeFontUnderline(underline, isLabelFormat) {\n    var self = this;\n    var textFormat = self.properties.textFormat || {};\n    var valueFormat = self.properties.valueFormat || {};\n\n    var labelStrikethrough = bizagi.util.parseBoolean(textFormat.strikethru) ? \"line-through \" : \"\";\n    var valueStrikethrough = bizagi.util.parseBoolean(valueFormat.strikethru) ? \"line-through \" : \"\";\n    var formatUnderline = bizagi.util.parseBoolean(underline) ? \"underline\" : \"\";\n\n    var isLabelToFormat = typeof isLabelFormat != \"undefined\" || isLabelFormat != null ? isLabelFormat : true;\n    var $formatElements = isLabelToFormat ? self.getFormattingLabel() : self.getElementsToStylized(self.getControl());\n    var formatStrikeThrough = isLabelToFormat ? labelStrikethrough : valueStrikethrough;\n\n    self.changeTextDecoration($formatElements, formatStrikeThrough + formatUnderline);\n  },\n\n  /**\r\n      * Customizes the font Strikethrough property\r\n      * It does not apply when we use the render.base component\r\n      * @param strikeThrough\r\n      * @param isLabelFormat\r\n      */\n  changeFontStrikethru: function changeFontStrikethru(strikeThrough, isLabelFormat) {\n    var self = this;\n    var textFormat = self.properties.textFormat || {};\n    var valueFormat = self.properties.valueFormat || {};\n\n    var labelUnderline = bizagi.util.parseBoolean(textFormat.underline) ? \"underline \" : \"\";\n    var valueUnderline = bizagi.util.parseBoolean(valueFormat.underline) ? \"underline \" : \"\";\n    var formatStrikeThrough = bizagi.util.parseBoolean(strikeThrough) ? \"line-through\" : \"\";\n\n    var isLabelToFormat = typeof isLabelFormat != \"undefined\" || isLabelFormat != null ? isLabelFormat : true;\n    var $formatElements = isLabelToFormat ? self.getFormattingLabel() : self.getElementsToStylized(self.getControl());\n\n    var formatUnderline = isLabelToFormat ? labelUnderline : valueUnderline;\n\n    self.changeTextDecoration($formatElements, formatUnderline + formatStrikeThrough);\n  },\n\n  /**\r\n      * Context to apply styles\r\n      * @param context\r\n      * @returns {jQuery|HTMLElement}\r\n      */\n  getElementsToStylized: function getElementsToStylized(context) {\n    return $(\".ui-bizagi-render-radio label, label.readonly-control\", context);\n  },\n\n  /**\r\n      * Customizes the font Strikethrough or underline property\r\n      * @param {} $element\r\n      * @param {} textDecoration\r\n      * @returns {}\r\n      */\n  changeTextDecoration: function changeTextDecoration($element, textDecoration) {\n    if (textDecoration === undefined) return this;\n    if ($element === undefined) return this;\n\n    textDecoration && $element.css(\"text-decoration\", textDecoration);\n\n    return this;\n  } });","/*\r\n *   Name: BizAgi Desktop Render Query Radio Extension\r\n *   Author: Paola Herrera\r\n *   Comments:\r\n *   -   This script will redefine the query list render class to adjust to desktop devices\r\n */\n\n// Extends itself\nbizagi.rendering.desktop.radio.extend(\"bizagi.rendering.desktop.queryRadio\", {}, {\n  /*\r\n                                                                                    *   Template method to implement in each device to customize each render after processed\r\n                                                                                    */\n  postRender: function postRender() {\n    var self = this;\n    var control = self.getControl();\n\n    // Call base\n    this._super();\n\n    // Remove yesno class\n    control.removeClass(\"ui-bizagi-render-boolean-yesno\");\n  } });","/*\r\n* *   Name: BizAgi Desktop Render Query State Extension\r\n*   Author: Paola Herrera\r\n*   Comments:\r\n*   -   This script will redefine the query list render class to adjust to desktop devices\r\n*/\n\n// Extends itself\nbizagi.rendering.desktop.radio.extend(\"bizagi.rendering.desktop.queryState\", {}, {\n\n  /*\r\n                                                                                    *   Update or init the element data\r\n                                                                                    */\n  initializeData: function initializeData(data) {\n    var self = this;\n    var horizontal = typeof data.properties.horizontal !== \"undefined\" ? bizagi.util.parseBoolean(data.properties.horizontal) : true;\n    // Call base\n    this._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n    properties.horizontal = horizontal;\n    if (typeof properties.defaultValue == \"undefined\" && properties.value === null) {\n      self.setValue({ id: \"0\" }, false);\n    }\n  },\n  /*\r\n      *   Returns the internal value\r\n      */\n  getValue: function getValue() {\n    if (this.value && this.value.id && !isNaN(this.value.id)) {\n      return { id: parseInt(this.value.id), value: this.value.value };\n    } else {\n      return this.value;\n    }\n  },\n  /*\r\n      *   Sets the value in the rendered control\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    value.id = value.id + \"\";\n    this._super(value);\n  } });","/*\r\n* *   Name: BizAgi Desktop Render Query Case State Extension\r\n*   Author: Ivn Ricardo Taimal Narvez\r\n*   Comments:\r\n*   -   This script will redefine the query list render class to adjust to desktop devices\r\n*/\n\n// Extends itself\nbizagi.rendering.desktop.radio.extend(\"bizagi.rendering.desktop.queryCaseState\", {}, {\n\n  /*\r\n                                                                                        *   Update or init the element data\r\n                                                                                        */\n  initializeData: function initializeData(data) {\n    var self = this;\n    var horizontal = typeof data.properties.horizontal !== \"undefined\" ? bizagi.util.parseBoolean(data.properties.horizontal) : true;\n    // Call base\n    this._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n    properties.horizontal = horizontal;\n    if (typeof properties.defaultValue == \"undefined\" && properties.value === null) {\n      self.setValue({ id: \"0\" }, false);\n    }\n  },\n  /*\r\n      *   Returns the internal value\r\n      */\n  getValue: function getValue() {\n    if (this.value && this.value.id && !isNaN(this.value.id)) {\n      return { id: parseInt(this.value.id), value: this.value.value };\n    } else {\n      return this.value;\n    }\n  },\n  /*\r\n      *   Sets the value in the rendered control\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    value.id = value.id + \"\";\n    this._super(value);\n  } });","/*\r\n *   Name: BizAgi Desktop Render queryGrid Extension\r\n *   Author: Ivn Ricardo Taimal Narvez\r\n *   Comments:\r\n *   -   This script will redefine the queryGrid render class to adjust to desktop devices\r\n */\n\n// Extends itself\nbizagi.rendering.desktop.panel.extend(\"bizagi.rendering.desktop.queryGrid\", {}, {\n\n  /*\r\n                                                                                   *   Update or init the element data,  concat children xpath\r\n                                                                                   */\n  initializeData: function initializeData(data) {\n    var self = this;\n    console.log('sucede initializeData queryGrid');\n\n    // Call base\n    self._super(data);\n\n    // Set defaults\n    var properties = self.properties;\n    properties.uniqueId = Math.ceil(Math.random() * 1000000);\n    properties.editable = typeof properties.editable != \"undefined\" ? bizagi.util.parseBoolean(properties.editable) : true;\n    properties.visible = typeof properties.visible != \"undefined\" ? bizagi.util.parseBoolean(properties.visible) : true;\n\n    // Override orientation from parent if not set\n    properties.orientation = properties.orientation || (self.parent ? self.parent.properties.orientation : \"ltr\");\n\n    // Save original properties\n    this.originalProperties = JSON.parse(JSON.encode(properties));\n\n    // Create children\n    this.children = [];\n    this.childrenHash = {};\n    if (data.elements) {\n      $.each(data.elements, function (i, element) {\n        element.render.properties.xpath = self.properties.xpath + \".\" + element.render.properties.xpath;\n        if (element.render) {\n          self.createRenderElement(element);\n        } else\n        if (element.container) {\n          self.createContainerElement(element);\n        } else\n        if (element.form) {\n          self.createFormElement(element);\n        }\n      });\n    }\n  } });","/*  \r\n*   Name: Bizagi Desktop Render list Extension\r\n*   Author: Bizagi UI Forms\r\n*   Comments:\r\n*   -   This script will redefine the list render class to adjust to desktop devices\r\n*/\n\nbizagi.rendering.desktop.render.extend(\"bizagi.rendering.desktop.list\", bizagi.rendering.render.base.prototype);\n// Extends from render desktop base\nbizagi.rendering.desktop.list.extend(\"bizagi.rendering.desktop.list\", bizagi.rendering.combo.prototype);\n// Extends itself\nbizagi.rendering.desktop.list.extend(\"bizagi.rendering.desktop.list\", bizagi.rendering.list.prototype);\n// Extends itself\nbizagi.rendering.desktop.list.extend(\"bizagi.rendering.desktop.list\", {}, {\n\n  /**\r\n                                                                             * Template method to implement in each device to customize each render after processed\r\n                                                                             * @returns {} \r\n                                                                             */\n  postRender: function postRender() {\n    var self = this;\n    var control = self.getControl();\n    var properties = self.properties;\n\n    // Call base \n    self._super();\n\n    // Set control container to behave as a block\n    control.addClass(\"ui-bizagi-render-display-block\");\n    control.addClass(\"ui-bizagi-render-boolean-yesno\");\n\n    // Apply plugin\n    self.list = $(\".ui-bizagi-render-list\", control);\n\n    self.list.selectable2({\n      closest: false,\n      multiple: false,\n      select: function select(e, ui) {\n\n        if (e.isPropagationStopped()) return;\n\n        var selected = $(\"li[tabindex='0']\", this);\n        var value = $(selected).data(\"value\");\n        var label = $(selected).text();\n\n        // Updates internal value\n        var newValue = { id: value, value: label };\n        self.setValue(newValue);\n        self.selectedValue = newValue.value;\n        self.focusSelectedItem(selected);\n\n        e.stopPropagation();\n      } });\n\n\n    // Apply list size\n    if (properties.listSize > 0) {\n      var listSize = Number(properties.listSize) * 23;\n      self.list.height(listSize + \"px\");\n    }\n  },\n\n  focusSelectedItem: function focusSelectedItem(elList) {\n    var self = this;\n\n    $.when(self.ready()).done(function () {\n      elList.focus(0);\n    });\n  },\n\n  /**\r\n      * Template method to implement in each device to customize the render's behaviour\r\n      * to add handlers     \r\n      * @returns {} \r\n      */\n  configureHandlers: function configureHandlers() {\n    // Call base\n    this._super();\n  },\n\n  /**\r\n      * Template method to implement in each device to customize the render's behaviour\r\n      * when rendering in design mode\r\n      * @returns {} \r\n      */\n  configureDesignView: function configureDesignView() {\n    var self = this;\n\n    // Call base\n    self._super();\n\n    // Un-bind selection handlers\n    if (self.properties.editable) {\n      self.list.unbind(\"mousedown.selectable\");\n      self.list.unbind(\"focus.selectable\");\n      self.list.unbind(\"blur.selectable\");\n      self.list.unbind(\"keydown.selectable\");\n    }\n  },\n\n  /**\r\n      * Sets the value in the rendered control\r\n      * @param {} value \r\n      * @returns {} \r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n    value = this.mapValue(value);\n\n    if (self.properties.editable) {\n      if (value !== undefined && value.id !== \"\") {\n        self.list.selectable2(\"select\", \"[id='ui-bizagi-list-\" + value.id + \"']\");\n      }\n    }\n  },\n\n  /**\r\n      * Sets the value in the rendered control\r\n      * @returns {} \r\n      */\n  clearDisplayValue: function clearDisplayValue() {\n    var self = this;\n    var control = self.getControl();\n    var selected = control.find(\".ui-state-active\");\n\n    if (selected.length > 0) {\n      // Updates internal value\n      var newValue = self.getValue();\n\n      self.selectedValue = newValue.value;\n      selected.removeClass(\"ui-state-focus ui-selected ui-state-active\");\n    } else if (!self.properties.editable) {\n      $(control).html(\"<label class='readonly-control'></label>\");\n    }\n  },\n\n  /**\r\n      * Returns the selected value in the template\r\n      * @returns {} \r\n      */\n  getSelectedValue: function getSelectedValue() {\n    return this.selectedValue;\n  },\n\n  /**\r\n      * Cleans current data\r\n      * @returns {} \r\n      */\n  cleanData: function cleanData() {\n    var self = this;\n    self.value = self.properties.value = self.selectedValue = { id: \"\", value: \"\" };\n    self.clearDisplayValue();\n  },\n\n  getLabel: function getLabel() {\n    return $(\"label\", this._super());\n  },\n\n  getElementsToStylize: function getElementsToStylize($context) {\n    return $(\"ul li\", $context);\n  },\n\n  changeRequired: function changeRequired(argument) {\n    this.properties.required = argument;\n    this.changeRequiredLabel(argument);\n  },\n\n  changeRequiredLabel: function changeRequiredLabel(argument) {\n    var control = this.getControl();\n    if (this.getMode() !== \"execution\") {\n      if (bizagi.util.parseBoolean(argument) == true && this.properties.editable) {\n        control.addClass(\"control-required\");\n      } else {\n        control.removeClass(\"control-required\");\n      }\n    } else {\n      if (bizagi.util.parseBoolean(argument) == true && !this.hasValue() && this.properties.editable) {\n        control.addClass(\"control-required\");\n      } else {\n        control.removeClass(\"control-required\");\n      }\n    }\n    this.triggerRenderValidate();\n  },\n\n  changeCellRequired: function changeCellRequired(argument) {\n    this.changeRequired(argument);\n  } });","/**\r\n *   Name: Bizagi Desktop Render MultiSelect Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the multiSelect render class to adjust to desktop devices\r\n */\n\n// Extends from render Desktop base\nbizagi.rendering.desktop.render.extend(\"bizagi.rendering.desktop.multiSelect\", bizagi.rendering.render.base.prototype);\n// Extends from render Desktop base\nbizagi.rendering.desktop.multiSelect.extend(\"bizagi.rendering.desktop.multiSelect\", bizagi.rendering.multiSelect.prototype);\n// Extends itself\nbizagi.rendering.desktop.multiSelect.extend(\"bizagi.rendering.desktop.multiSelect\", {\n  MORE_OPTION_WIDTH: 40 },\n{\n\n  /**\r\n   * Update or init the element data\r\n   * @param data\r\n   */\n  initializeData: function initializeData(data) {\n    // Call base\n    this._super(data);\n\n    this.isNewRenderForm = true;\n  },\n\n  /**\r\n      * Template method to implement in each device to customize each render after processed\r\n      */\n  postRender: function postRender() {\n    var $control = this.getControl();\n    this.multiSelect = $(\".bz-multiselect\", $control);\n\n    // Call base\n    this._super();\n  },\n\n  /**\r\n      * Returns the html templated element\r\n      * @returns {*}\r\n      */\n  renderElement: function renderElement() {\n    return this._super(\"render-base\");\n  },\n\n  /**\r\n      * Template method to implement in each device to customize each render after processed in read-only mode\r\n      */\n  postRenderReadOnly: function postRenderReadOnly() {\n    var $control = this.getControl();\n    this.multiSelect = $(\".bz-multiselect\", $control);\n\n    // Call base\n    this._super();\n  },\n\n  /**\r\n      * Sets the value in the rendered control\r\n      * @param value\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n\n    // Set internal value\n    self._super(value);\n\n    var timeoutSelectedItems = setTimeout(function () {\n      self.addSelectedElements();\n      clearTimeout(timeoutSelectedItems);\n    }, 100);\n  },\n\n  /**\r\n      * Template method to implement in each device to customize the render's behaviour to add handlers\r\n      */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    var $control = self.getControl();\n\n    $(\".bz-multiselect\", $control).\n    on(\"click, mousedown.multiselect\", function (evt) {\n      if ($(evt.target).hasClass(\"bz-multiselect__tags\") || $(evt.target).hasClass(\"bz-multiselect__arrow\")) {\n        self.onToggleDataView(evt);\n      }\n    });\n\n    $('ul.bz-multiselect__tags', $control).\n    on(\"click\", \"li div.bz-btn-icn\", this.onUnselectElement.bind(this)).\n    on(\"click\", \"li.bz-multiselect__plus\", this.onShowSelectedElements.bind(this));\n  },\n\n  /**\r\n      * Template method to implement in each device to customize the render's behaviour to add handlers when the control is readonly\r\n      */\n  configureHandlersReadOnly: function configureHandlersReadOnly() {\n    var $control = this.getControl();\n\n    $('ul.bz-multiselect__tags', $control).\n    on(\"click\", \"li.bz-multiselect__plus\", this.onShowSelectedElements.bind(this));\n  },\n\n  /**\r\n      * addSelectedElements\r\n      */\n  addSelectedElements: function addSelectedElements() {\n    var self = this;\n    var $control = this.getControl();\n    var values = this.getDataValue() || [];\n    var totalValues = values.length;\n    var $tagsContainer = $('ul.bz-multiselect__tags', $control);\n    var editable = this.properties.editable;\n    var template = this.renderFactory.getTemplate(\"list-multiselect-tag\");\n\n    $tagsContainer.empty();\n\n    if (totalValues > 0) {\n\n      if (this.getFormContainer().params.printversion) {\n        $control.html(values.map(function (el) {\n          return self.formatItem(el.value);\n        }).join(\", \"));\n      } else {\n\n        for (var i = 0; i < totalValues; i++) {\n          var item = values[i];\n          var data = { id: item.id, value: item.value, editable: editable };\n          var $ChildToAdd = $.tmpl(template, data, {\n            formatItem: self.formatItem });\n\n\n          $tagsContainer.append($ChildToAdd);\n\n          // Process the control in the layout\n          this.processControlLayout(this.properties.valueFormat || {});\n\n          if (!this.canAddMoreItems($tagsContainer)) {\n            // Remove last item added\n            $tagsContainer.\n            children().\n            last().\n            remove();\n\n            // Add the view mode item\n            var $viewMore = $.tmpl(this.renderFactory.getTemplate(\"list-multiselect-view-more\"), {\n              value: totalValues - i,\n              index: i });\n\n\n            $tagsContainer.append($viewMore);\n            break;\n          }\n        }\n      }\n    }\n\n  },\n\n  /**\r\n      * Get data and render the float list view\r\n      */\n  renderFloatView: function renderFloatView() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"list-multiselect-item\");\n\n    self.updateArrow();\n\n    $.when(self.getData()).done(function (data) {\n      try {\n        var params = { datasource: data };\n        var options = {\n          selected: self.getDataValue(),\n          isChecked: function isChecked(id) {\n            return self.markAsChecked.call(this, id);\n          },\n          formatItem: self.formatItem };\n\n\n        var $floatList = self.showFloatListView(template, params, options);\n        self.floatListHandlers($floatList);\n\n      } catch (e) {\n        bizagi.log(e.message);\n      }\n    }).fail(function (data) {\n      var auxMsg = \"\";\n      var msgObj = self.properties.displayName + \": \";\n      var form = self.getFormContainer();\n\n      if (typeof data == \"string\") {\n        auxMsg = JSON && JSON.parse(data) || $.parseJSON(data);\n      } else {\n        auxMsg = data;\n      }\n\n      msgObj += auxMsg.message;\n\n      // Show error from server\n      form.addValidationMessage(msgObj);\n    });\n  },\n\n  /**\r\n      * Show float list view\r\n      * @param template\r\n      * @param data\r\n      * @param options\r\n      */\n  showFloatListView: function showFloatListView(template, data, options) {\n    var self = this;\n    var $control = self.getControl();\n    var $containerControl = $control.closest(\".ui-bizagi-control-wrapper\");\n    var $containerRender = $containerControl.closest(\".bz-form-old-item\");\n\n    var $floatList = $.tmpl(template, data, options);\n    var widthControl = self.multiSelect.width();\n\n    $containerRender.addClass(\"bz-multiselect__visible\");\n    $containerControl.addClass(\"bz-multiselect__visible bz-multiselect__floats\");\n    $containerControl.append($floatList);\n\n    $floatList.width(widthControl);\n\n    $floatList.position({\n      my: \"left top\",\n      at: \"left bottom\",\n      of: self.multiSelect,\n      collision: \"fit\" }).\n    hide();\n\n    // Display view\n    $floatList.show();\n\n    // Stop bubbling outside the dropdown\n    $floatList.on(\"mousedown\", function (ev) {\n      ev.preventDefault();\n      return false;\n    });\n\n    // Add global handler to close the float view\n    var timeoutMouseDown = setTimeout(function () {\n      $(document).one(\"mousedown.multiselect\", function (evt) {\n        $floatList.trigger('closeView');\n      });\n      clearTimeout(timeoutMouseDown);\n    }, 0);\n\n    return $floatList;\n  },\n\n  /**\r\n      * Destroy the float list view\r\n      * @param $list\r\n      */\n  destroyFloatView: function destroyFloatView($list) {\n    var $control = this.getControl();\n    var $containerControl = $control.closest(\".ui-bizagi-control-wrapper\");\n    var $containerRender = $containerControl.closest(\".bz-form-old-item\");\n\n    if ($containerControl.hasClass(\"bz-multiselect__visible\"))\n    $containerControl.removeClass(\"bz-multiselect__visible\");\n\n    if ($containerControl.hasClass(\"bz-multiselect__floats\"))\n    $containerControl.removeClass(\"bz-multiselect__floats\");\n\n    if ($containerRender.hasClass(\"bz-multiselect__visible\"))\n    $containerRender.removeClass(\"bz-multiselect__visible\");\n\n    $list.remove();\n  },\n\n  /**\r\n      * Update the float list view\r\n      */\n  closeFloatView: function closeFloatView() {\n    var $control = this.getControl();\n    var $containerControl = $control.closest(\".ui-bizagi-control-wrapper\");\n    var $containerRender = $containerControl.closest(\".bz-form-old-item\");\n\n    var $listView = $($containerRender).find(\".bz-multiselect__content\");\n\n    $listView.hide();\n\n    this.updateArrow();\n    this.destroyFloatView($listView);\n  },\n\n  updateArrow: function updateArrow() {\n    var $control = this.getControl();\n\n    $control.find(\".bz-multiselect__arrow\").\n    toggleClass(\"bz-multiselect__arrow-collapse\");\n  },\n\n  floatViewIsCollapsed: function floatViewIsCollapsed() {\n    var $listView = $(\".bz-multiselect__content\", this.element);\n\n    return $listView && $listView.length > 0;\n  },\n\n  changeRequired: function changeRequired(argument) {\n    this.properties.required = argument;\n    this.changeRequiredLabel(argument);\n  },\n\n  changeRequiredLabel: function changeRequiredLabel(argument) {\n    var control = this.getControl();\n\n    if (control.length > 0) {\n      if (this.getMode() !== \"execution\") {\n        if (bizagi.util.parseBoolean(argument) === true && this.properties.editable) {\n          control.addClass(\"control-required\");\n        } else {\n          control.removeClass(\"control-required\");\n        }\n      } else {\n        if (bizagi.util.parseBoolean(argument) === true && !this.hasValue() && this.properties.editable) {\n          control.addClass(\"control-required\");\n        } else {\n          control.removeClass(\"control-required\");\n        }\n      }\n    }\n\n    this.triggerRenderValidate();\n  },\n\n  changeCellRequired: function changeCellRequired(argument) {\n    this.changeRequired(argument);\n  },\n\n  onUnselectElement: function onUnselectElement(ev) {\n    var $element = $(ev.target);\n    var idToRemove = $element.data(\"id\");\n\n    // Remove element\n    this.removeElement({ id: idToRemove });\n    this.addSelectedElements();\n  },\n\n  onShowSelectedElements: function onShowSelectedElements(ev) {\n    var self = this;\n    var $element = $(ev.currentTarget);\n    var index = $element.data('index');\n\n    var valuesToShow = (this.getDataValue() || []).slice(index);\n    var template = this.renderFactory.getTemplate(\"list-multiselect-tags\");\n    var $listView = this.showFloatListView(template, {\n      datasource: valuesToShow,\n      editable: self.properties.editable },\n    {\n      formatItem: self.formatItem });\n\n\n    var $tagElements = $('ul.bz-multiselect__tags', $listView);\n\n    $tagElements.on(\"click, mousedown\", \"li div.bz-btn-icn\", function (ev) {\n      self.onUnselectElement(ev);\n      $listView.remove();\n      ev.stopPropagation();\n    });\n\n    $listView.on(\"closeView\", function () {\n      $tagElements.off(\"click\", \"li div.bz-btn-icn\", self.onUnselectElement.bind(self));\n      $listView.remove();\n    });\n\n  },\n\n  onToggleDataView: function onToggleDataView(evt) {\n    this.floatViewIsCollapsed() ? this.closeFloatView() : this.renderFloatView();\n  },\n\n  floatListHandlers: function floatListHandlers($floatListContext) {\n    var self = this;\n    var $listContainer = $floatListContext.find(\".bz-multiselect__list li\");\n    var checkbox = $listContainer.find(\"input[type=checkbox]\");\n    var $search = $floatListContext.find(\".bz-multiselect__search_input\");\n    if (this.properties.enableTyping) {\n      $search.bind(\"change keypress keyup mousedown\", function (evt) {\n        evt.stopPropagation();\n        self.filterList(this.value, $listContainer);\n      });\n    } else {\n      $search.addClass(\"bz-multiselect__search--disabled\");\n    }\n\n    checkbox.change(function () {\n      var $context = $(this);\n      var isChecked = $context.is(\":checked\");\n      var id = $context.data(\"id\");\n      var element = self.findItemById(id);\n      var value = element.value;\n\n      var newValue = { id: id, value: value };\n\n      if (isChecked) {\n        self.addElement(newValue);\n      } else {\n        self.removeElement(newValue);\n      }\n\n      self.addSelectedElements();\n    });\n\n    $floatListContext.on(\"closeView\", function () {\n      self.closeFloatView();\n\n      $(document).unbind(\"mousedown.multiselect\");\n    });\n  },\n\n  /**\r\n      * Template method to get the label element\r\n      * @returns {jQuery|HTMLElement}\r\n      */\n  getLabel: function getLabel() {\n    return $(\"label\", this._super());\n  } });","/**\r\n *   Name: Bizagi Render Hand Signature Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the Hand Signature render class to adjust to desktop devices\r\n */\n\n// Extends from render base\nbizagi.rendering.desktop.render.extend(\"bizagi.rendering.desktop.handSignature\", bizagi.rendering.render.base.prototype);\n// Extends from render Desktop base\nbizagi.rendering.desktop.handSignature.extend(\"bizagi.rendering.desktop.handSignature\", {\n  // Statics\n  BA_ACTION_PARAMETER_PREFIX: bizagi.render.services.service.BA_ACTION_PARAMETER_PREFIX,\n  BA_CONTEXT_PARAMETER_PREFIX: bizagi.render.services.service.BA_CONTEXT_PARAMETER_PREFIX,\n  BA_PAGE_CACHE: bizagi.render.services.service.BA_PAGE_CACHE },\nbizagi.rendering.handSignature.prototype);\n// Extends itself\nbizagi.rendering.desktop.handSignature.extend(\"bizagi.rendering.desktop.handSignature\", {}, {\n\n  /**\r\n                                                                                               * Returns the html templated element\r\n                                                                                               * @returns {*}\r\n                                                                                               */\n  renderElement: function renderElement() {\n    return this._super(\"render-base\");\n  },\n\n  /**\r\n      * Render after processed in read-only mode\r\n      */\n  postRenderReadOnly: function postRenderReadOnly() {\n    var self = this;\n    var form = self.getFormContainer();\n    var printVersion = form.params && form.params.printversion;\n\n    // Apply plugin\n    if (this.isExecutionMode()) {\n      if (printVersion) {\n        self.postRenderPrintVersion();\n      } else {\n        var $container = self.getSignatureContainer();\n\n        // Wait until current element is rendered\n        self.setResizeObserver($container, function () {\n          self.renderSignature();\n        });\n      }\n    }\n  },\n\n  postRenderPrintVersion: function postRenderPrintVersion() {\n    var $container = this.getSignatureContainer();\n    var imageElement = document.createElement(\"img\");\n\n    this.buildItemUrl().then(function (dataUrl) {\n      imageElement.src = dataUrl;\n      $container.append(imageElement);\n    });\n  },\n\n  changeRequired: function changeRequired(argument) {\n    this.properties.required = argument;\n    this.changeRequiredLabel(argument);\n  },\n\n  changeRequiredLabel: function changeRequiredLabel(argument) {\n    var control = this.getControl();\n\n    if (control.length > 0) {\n      if (this.getMode() !== \"execution\") {\n        if (bizagi.util.parseBoolean(argument) === true && this.properties.editable) {\n          control.addClass(\"control-required\");\n        } else {\n          control.removeClass(\"control-required\");\n        }\n      } else {\n        if (bizagi.util.parseBoolean(argument) === true && !this.hasValue() && this.properties.editable) {\n          control.addClass(\"control-required\");\n        } else {\n          control.removeClass(\"control-required\");\n        }\n      }\n    }\n\n    this.triggerRenderValidate();\n  },\n\n  changeCellRequired: function changeCellRequired(argument) {\n    this.changeRequired(argument);\n  },\n\n  getLabel: function getLabel() {\n    return $(\"label\", this._super());\n  },\n\n  /**\r\n      * Add action handlers\r\n      */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    var $actions = $(\".bz-actions\", this.getControl());\n    var $container = self.getSignatureContainer();\n    var autoSave = bizagi.util.debounce2(function (params) {\n      if (!changed) return;\n\n      var data = Array.prototype.slice.call(params || []);\n      var dataImage = (data && data[0] || []).dataImage || \"\";\n\n      self.saveDeferred = $.when(self.saveSignature(dataImage));\n    }, self.DELAY_TO_SAVE);\n\n    var changed = false;\n\n    $container.bind(\"change\", function () {\n      changed = true;\n      if ($(this).BzjSignature(\"isModified\")) {\n        self.saveTimestamp = new Date().getTime();\n        var $canvas = $(\".bz-signature__container-canvas\", this)[0];\n        var dataImage = $canvas.toDataURL(\"image/png\");\n        autoSave.fire({ dataImage: dataImage });\n        self.setData(dataImage.replace(/^data:image\\/(png|jpg|jpeg);base64,/, \"\"));\n        self.properties.url = dataImage;\n        self.setState(self.STATE_TYPE.done);\n      }\n    });\n\n    $actions.on(\"click\", \"[data-action='clear']\", function () {\n      changed = true;\n      autoSave.cancel();\n      self.onSignatureClear($container);\n    });\n\n    $actions.on(\"click\", \"[data-action='edit']\", function () {\n      self.onSignatureEdit($container);\n      changed = false;\n    });\n\n    $actions.on(\"click\", \"[data-action='save']\", function () {\n      if (!changed) {\n        self.setState(self.STATE_TYPE.edit);\n        $container.BzjSignature(\"disable\");\n        return;\n      }\n\n      self.onSignatureSave($container, autoSave);\n      changed = false;\n    });\n\n  },\n\n  onSignatureClear: function onSignatureClear($container) {\n    var self = this;\n    $container.BzjSignature(\"reset\");\n\n    if (self.hasValue()) {\n      self.setData(self.EMPTY_VALUE);\n      self.properties.url = self.EMPTY_VALUE;\n      self.saveDeferred = $.when(self.deleteImage()).done(function () {\n        self.setData(self.EMPTY_VALUE);\n        self.properties.url = self.EMPTY_VALUE;\n      }).fail(function (error) {\n        self.executeFormFailHandler(error);\n      });\n    }\n\n    return $.when(self.saveDeferred);\n  },\n\n  onSignatureEdit: function onSignatureEdit($container) {\n    this.setState(this.STATE_TYPE.draw);\n    $container.BzjSignature(\"enable\");\n  },\n\n  onSignatureSave: function onSignatureSave($container, autoSave) {\n    var self = this;\n\n    $container.BzjSignature(\"disable\");\n\n    if ($container && $container.BzjSignature(\"isModified\")) {\n      var $canvas = $(\".bz-signature__container-canvas\", $container)[0];\n\n      autoSave.cancel();\n      self.saveSignature($canvas.toDataURL(\"image/png\")).always(function () {\n        self.setState(self.STATE_TYPE.edit);\n      });\n    } else {\n      self.setState(self.STATE_TYPE.edit);\n    }\n  },\n\n\n  /**\r\n      * Apply plugin\r\n      */\n  renderSignature: function renderSignature() {\n    var self = this;\n    var $container = self.getSignatureContainer();\n    var config = {\n      sizeRatio: 3,\n      cssclass: \"bz-signature__container-canvas\",\n      color: \"#000\",\n      background: \"#FFFFFF\" };\n\n\n    $container.empty();\n    $container.BzjSignature(config);\n    $container.BzjSignature(\"disable\");\n\n    if (self.pluginInitialized && self.properties.url) {\n      self.setSignature($container);\n    } else {\n      self.renderSignatureValue($container);\n    }\n\n    // Required for resize observer\n    self.pluginInitialized = true;\n  },\n\n  /**\r\n      * Set data to control\r\n      * @param $container\r\n      * @returns {*}\r\n      */\n  renderSignatureValue: function renderSignatureValue($container) {\n    var self = this;\n\n    return self.buildItemUrl().then(function (dataUrl) {\n      if (!self.isDisposed()) {\n        var url = dataUrl !== \"\" ? dataUrl : \"\";\n        self.properties.url = url;\n\n        if (!bizagi.util.isEmpty(url)) {\n          $container.BzjSignature(\"setData\", url);\n        } else {\n          self.setData(self.EMPTY_VALUE);\n        }\n      }\n    });\n  } });","/*\r\n *   Name: BizAgi Desktop Render Query List Extension\r\n *   Author: Paola Herrera\r\n *   Comments:\r\n *   -   This script will redefine the query list render class to adjust to desktop devices\r\n */\n\nbizagi.rendering.desktop.list.extend(\"bizagi.rendering.desktop.queryList\", {}, {});","/**\r\n *   Name: BizAgi Desktop Render Query MultiSelect Extension\r\n *   Author: Alexander Mejia\r\n *   Comments:\r\n *   -   This script will redefine the query multi select render class to adjust to desktop devices\r\n */\n\n// Extends itself\nbizagi.rendering.desktop.multiSelect.extend(\"bizagi.rendering.desktop.queryMultiSelect\", {}, {\n\n  /**\r\n                                                                                                * Fetch the data into a deferred\r\n                                                                                                * @returns {*[]}\r\n                                                                                                */\n  getData: function getData() {\n    var properties = this.properties;\n\n    return properties.data ? this.normalizeData(properties.data) : [];\n  },\n  /*\r\n     *   Add the render data to the given collection in order to send data to the server\r\n     */\n  collectDataQueryForm: function collectDataQueryForm(renderValues) {\n    var self = this;\n    var properties = self.properties;\n    var xpath = properties.xpath;\n    var queryValue = self.mapValue(self.getValue());\n\n    if (!bizagi.util.isEmpty(xpath) && (!bizagi.util.isEmpty(queryValue) || properties.included)) {\n      var searchType = (self.properties.typeSearch || self.properties.rangeQuery || \"NONE\").toUpperCase();\n      var newParameter = {\n        \"value\": queryValue,\n        \"included\": self.properties.included,\n        \"xpath\": properties.xpath,\n        \"searchType\": searchType,\n        \"orderType\": \"NONE\",\n        \"renderId\": self.getRenderId() };\n\n\n      if (typeof properties.displayXpath !== \"undefined\" && properties.displayXpath !== \"\") {\n        newParameter.displayXpath = properties.displayXpath;\n      }\n\n      renderValues.push(newParameter);\n    }\n  },\n\n  mapValue: function mapValue(value) {\n    var mappedValue = value || [];\n    var valueObj = Array.isArray(mappedValue) ? {} : JSON.parse(value);\n\n    if (!bizagi.util.isEmpty(value) && typeof valueObj.value !== \"undefined\") {\n      mappedValue = !bizagi.util.isEmpty(valueObj.value) ? value : [];\n    }\n\n    return mappedValue;\n  } });","/**\r\n *   Name: Bizagi User Field render Desktop Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define the basic behaviour for userfields\r\n */\n\nbizagi.rendering.desktop.render.extend(\"bizagi.rendering.desktop.userfieldWrapper\", bizagi.rendering.userfieldWrapper.prototype);\nbizagi.rendering.desktop.userfieldWrapper.extend(\"bizagi.rendering.desktop.userfieldWrapper\", {}, {\n\n  /**\r\n                                                                                                     *  Load userfield\r\n                                                                                                     */\n  getUserfieldControl: function getUserfieldControl() {\n    var self = this;\n    var sControl = self.userfieldName;\n    var mode = self.getMode();\n    var exists = eval(\"typeof bizagi.rendering.desktop.\" + sControl + \" !== 'undefined'\");\n    var def = new $.Deferred();\n\n    if (exists) {\n      // Creates the userfield instance\n      // Set true argument for tabItem\n      $.when(self.parent.ready()).done(function () {\n        def.resolve(self.createUserfieldInstance(sControl));\n      });\n\n    } else {\n      if (mode != \"execution\") {\n        var timeOutTrigger = setTimeout(function () {\n          $.when(self.triggerGlobalHandler(\"loadUserField\", { userfield: self.userfieldGuid, device: \"Desktop\" })).\n          pipe(function (result) {\n            if (result) {\n              // Creates the userfield instance\n              def.resolve(self.createUserfieldInstance(sControl));\n            }\n          });\n          clearTimeout(timeOutTrigger);\n        }, 10);\n\n      } else\n      {\n        // Call ajax service in order to retrieve user field definitions\n        $.when(self.dataService.getUserfieldDefinition({\n          userfield: self.userfieldGuid,\n          device: \"desktop\" })).\n        pipe(function (data) {\n          // Load userfield in memory\n          self.loadUserfield(data);\n\n          // Creates the userfield instance\n          def.resolve(self.createUserfieldInstance(sControl));\n        });\n      }\n    }\n\n    return def.promise();\n  },\n\n  /**\r\n      * Creates the userfield instance when the userfield prototype is loaded in memory\r\n      */\n  createUserfieldInstance: function createUserfieldInstance(sControl) {\n    var self = this;\n    var control;\n    try {\n      // Create a dynamic function to avoid problem with eval calls when minifying the code\n      var dynamicFunction = \"var baDynamicFn = function(renderParams){ \\r\\n\";\n      dynamicFunction += \"return new bizagi.rendering.desktop.\" + sControl + \"(renderParams);\\r\\n\";\n      dynamicFunction += \"}\\r\\n\";\n      dynamicFunction += \"baDynamicFn\";\n      dynamicFunction = eval(dynamicFunction);\n\n      // Call the dynamic function\n      control = dynamicFunction(self.initialParams);\n    } catch (e) {\n      // If the call fails, return the default user field\n      control = self.getUserFieldInstance(self.initialParams);\n    }\n\n    control.properties.isUserField = true;\n\n    // Save userfield instance\n    self.userfieldInstance = control;\n\n    // Create proxy methods from the wrapper to the userfield instance\n    self.replicateUserfieldMethods(control);\n\n    // Replicate renderchange event from wrapped element to grid if applies\n    self.userfieldInstance.bind(\"renderchange\", function () {\n      self.triggerHandler(\"renderchange\", arguments);\n    });\n\n    return control;\n  },\n\n  /**\r\n      * Load userfield into memory\r\n      */\n  loadUserfield: function loadUserfield(data) {\n    var self = this;\n    var styleContent = \"\";\n\n    self.properties.styleGuid = self.properties.styleGuid || Math.guid();\n\n    try {\n      // Parse data\n      try {\n        data = eval(data);\n      } catch (e) {\n        bizagi.log(\"Could not parse result userfield \" + self.userfieldName, e.message);\n      }\n\n      // Iterate elements\n      $.each(data, function (index, val) {\n        if (val.type === \"js\") {\n          try {var\n            replaceWithDevice = function replaceWithDevice(str) {\n              return str.replace(/bizagi.rendering/gi, \"bizagi.rendering.desktop\");\n            };\n\n            val.content = val.content.replace(/bizagi\\.rendering\\.[^\\s]+\\.extend(\\s|\\n|\\s)*\\((\\s|\\n|\\s)*\\\"bizagi\\.rendering\\.[^\\s]+\\\"/gmi, replaceWithDevice);\n            window.eval(val.content);\n          } catch (ex) {\n            bizagi.log(\"Could not parse result userfield3 \" + self.userfieldName, ex.message);\n          }\n        }\n        if (val.type === \"css\") {\n          styleContent += val.content;\n        }\n      });\n\n      if ($.trim(styleContent) !== \"\") {\n        bizagi.util.loadStyle(styleContent, self.properties.styleGuid);\n      }\n\n      // Replicate userfield methods to the wrapper\n      var control = eval(\"bizagi.rendering.\" + self.userfieldName);\n\n    } catch (e) {\n      bizagi.log(\"Could not parse result userfield \" + self.userfieldName, e.message);\n    }\n  },\n\n  getUserFieldInstance: function getUserFieldInstance(params) {\n    var mode = this.getMode();\n\n    // If the call fails, return the default user field\n    return mode === \"execution\" ? new bizagi.rendering.desktop.defaultUserField(params) : new bizagi.rendering.desktop.designUserField(params);\n  },\n\n  /*\r\n     *   Starts waiting signal for async stuff\r\n     */\n  startUserfieldLoading: function startUserfieldLoading() {\n    this.element.addClass('bz-form-userfield__loader');\n    this.startLoading();\n  },\n\n  /*\r\n     *   Ends waiting for async stuff\r\n     */\n  endUserfieldLoading: function endUserfieldLoading() {\n    this.element.removeClass('bz-form-userfield__loader');\n    this.endLoading();\n  } });\n\n\n// Auto-extension\nbizagi.rendering.desktop.render.extend(\"bizagi.rendering.desktop.basicUserField\", bizagi.rendering.userfieldDefinition.prototype);\nbizagi.rendering.desktop.basicUserField.extend(\"bizagi.rendering.desktop.basicUserField\", bizagi.rendering.basicUserField.prototype);\nbizagi.rendering.desktop.basicUserField.extend(\"bizagi.rendering.desktop.basicUserField\", {}, {\n  /*\r\n                                                                                                * Shows a jquery dialog\r\n                                                                                                */\n  showDialog: function showDialog(url, params) {\n    var self = this;\n    var formDialog = $(\"<div class='iframeContent'><iframe scrolling='yes' id='innerFrameContent' src='\" + url + \"' style='width:100%;height:100%;border:0'  /></div>\");\n    var iframe = $(\"#innerFrameContent\", formDialog);\n\n    // The following procedure adds the \"closeWindow\" function, this will serve as callback from the\n    // window, also it's going to serve as brigde to update data back into bizagi fields.\n    iframe.load(function () {\n      iframe.callInside(function (params) {\n        // This script will execute inside the iframe context\n        this.BACloseWindow = function (controls, submitForm) {\n          // close dialog\n          params.formDialog.dialog(\"close\");\n\n          // Executes the callback to assign values and submit form (if requested)\n          params.formDialog.callback(controls, submitForm);\n        };\n\n      }, {\n        formDialog: formDialog,\n        container: self });\n\n\n      // Callback function which will update the values in bizagi\n      formDialog.callback = function (controls, submitForm) {\n        $.each(controls, function (index, item) {\n          if (!item.xpath) {\n            bizagi.showMessageBox('Error calling closeWindow, the xpath was not defined.', 'Userfield error');\n          }\n          if (!item.value) {\n            bizagi.showMessageBox('Error calling closeWindow, the value was not defined.', 'Userfield error');\n          }\n\n          self.getFormContainer().getRender(item.xpath).setDisplayValue(item.value);\n        });\n\n        // If the closeWindow was call with \"submitForm\" then execute the submit on change\n        if (submitForm) {\n          self.submitOnChange();\n        }\n      };\n    });\n\n    formDialog.dialog({ height: params.height, width: params.width, title: params.title });\n  },\n\n  /*\r\n     *   Shows a browser popup\r\n     */\n  showPopup: function showPopup(url, params) {\n    var self = this;\n\n    // Callback function which will update the values in bizagi\n    var callbackFn = function callbackFn(controls, submitForm) {\n      $.each(controls, function (index, item) {\n        if (!item.xpath) {\n          bizagi.showMessageBox('Error calling closeWindow, the xpath was not defined.', 'Userfield error');\n        }\n\n        if (!item.value) {\n          bizagi.showMessageBox('Error calling closeWindow, the value was not defined.', 'Userfield error');\n        }\n\n        self.getFormContainer().getRender(item.xpath).setDisplayValue(item.value);\n      });\n\n      // If the closeWindow was call with \"submitForm\" then execute the submit on change\n      if (submitForm) {\n        self.submitOnChange();\n      }\n    };\n\n    bizagi.showPopup(url, params, callbackFn);\n  } });\n\n\n/*\r\n        *   Default implementation for user fields\r\n        */\nbizagi.rendering.desktop.basicUserField.extend(\"bizagi.rendering.desktop.defaultUserField\", {}, {\n\n  /*\r\n                                                                                                  *   Template method to implement in each device to customize each render after processed\r\n                                                                                                  */\n  getEditableControl: function getEditableControl() {\n    var self = this;\n    var control = self.getControl();\n    var properties = self.properties;\n    var controlName = properties.control;\n\n    self.input = $(\"<label>Userfield: \" + controlName + \" not found</label>\").appendTo(control);\n  },\n\n  /*\r\n     *  Dont send the data to the server\r\n     */\n  collectData: function collectData(renderValues) {\n  },\n\n  getDisplayValue: function getDisplayValue() {\n    var self = this;\n    var properties = self.properties;\n    var controlName = properties.control;\n\n    return \"Userfield: \" + controlName + \" not found\";\n  },\n\n  getReadonlyControl: function getReadonlyControl() {\n    var self = this;\n    var control = self.getControl();\n    var properties = self.properties;\n    var controlName = properties.control;\n    var mycontrol = $(\"<label>Userfield: \" + controlName + \" not found</label>\").appendTo(control);\n\n    return mycontrol;\n  } });","/**\r\n *   Name: Bizagi Desktop Render Document Generator Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the document generator render class to adjust to desktop devices\r\n */\n\n// Extends from render Desktop base\nbizagi.rendering.desktop.render.extend(\"bizagi.rendering.desktop.document\", bizagi.rendering.document.prototype);\n// Extends itself\nbizagi.rendering.desktop.document.extend(\"bizagi.rendering.desktop.document\", {}, {\n\n  /**\r\n                                                                                     * Method to customize each render after processed\r\n                                                                                     */\n  postRender: function postRender() {\n    var self = this;\n    self.applyDocumentTemplatesFormat();\n\n    if (self.properties.allowSendInMail) {\n      self.bindEmailDialog();\n    }\n  },\n\n  /**\r\n      * Method to render non editable values\r\n      * @returns {string}\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    return \"\";\n  },\n\n  /**\r\n      * Bind dialog for send email\r\n      */\n  bindEmailDialog: function bindEmailDialog() {\n    var self = this;\n    var control = self.getControl();\n    var xpathContext = self.properties.xpathContext || \"\";\n    var xpath = self.properties.xpath;\n\n    $(\".ui-bizagi-render-documentgenerator-sendmail\", control).bizagiSendEmail({\n      tmpl: self.renderFactory.getTemplate(\"dialog-send-email\"),\n      value: self.value,\n      self: self,\n      dataService: self.dataService,\n      properties: self.properties,\n      xpath: xpath,\n      xpathContext: xpathContext });\n\n  },\n\n  /**\r\n      * Put formatting to the documents that are generated by the control\r\n      */\n  applyDocumentTemplatesFormat: function applyDocumentTemplatesFormat() {\n    var self = this;\n    var control = self.getControl();\n\n    // Set control container to behave as a block\n    control.addClass(\"ui-bizagi-render-display-block\");\n    // Resolve the type of the document based on the extension and put the icon to acconding to it\n    var documentList = $(\".ui-bizagi-document-upload-item\", control);\n\n    $.each(documentList, function (index, value) {\n      $(\".ui-bizagi-document-type\", value).addClass(\"ui-bizagi-document-extension\");\n      var returnType = self.returnCssTypeFile($(\"a > span\", value).html());\n      $(\".ui-bizagi-document-type\", value).addClass(returnType);\n    });\n  },\n\n  /**\r\n      * Method to correct the visualization of the link in the print mode.\r\n      * @param control\r\n      */\n  updateControlForPrintMode: function updateControlForPrintMode(control) {\n\n    //clear item that be dont render\n    $('.ui-bizagi-render-button', control).each(function () {\n      $(this).remove();\n    });\n\n    $('.ui-bizagi-div-error-container', control).each(function () {\n      $(this).remove();\n    });\n\n    $('.ui-bizagi-document-type', control).each(function () {\n      $(this).remove();\n    });\n\n    $('a', control).each(function () {\n      $(this).attr('target', '_blank').attr('title', $('span', this).html()).css('text-decoration', 'none');\n    });\n\n    $('ol', control).each(function () {\n      $(this).removeClass('ui-bizagi-container-documents');\n      $(this).addClass('ui-bizagi-container-documents-print');\n    });\n  },\n\n  /**\r\n      * Previews the document inside a dialog\r\n      * @param url\r\n      * @param filename\r\n      */\n  showDocumentPreview: function showDocumentPreview(url, filename) {\n    navigator.sayswho = function () {\n      var N = navigator.appName,ua = navigator.userAgent,tem;\n      var M = ua.match(/(opera|chrome|safari|firefox|msie)\\/?\\s*(\\.?\\d+(\\.\\d+)*)/i);\n      if (M && (tem = ua.match(/version\\/([\\.\\d]+)/i)) != null) M[2] = tem[1];\n      M = M ? [M[1], M[2]] : [N, navigator.appVersion, '-?'];\n\n      return M;\n    }();\n\n    var self = this;\n    var dialogBox = $(\"<div style='overflow:hidden;'></div>\");\n\n    dialogBox.empty();\n    dialogBox.appendTo(\"body\", window.document);\n\n    // Create embed object\n    var template = !$.browser.mozilla && !$.browser.msie ?\n    self.renderFactory.getTemplate(\"document-item-preview\") :\n    self.renderFactory.getTemplate(\"document-item-preview-object\");\n\n    dialogBox.append($.fasttmpl(template, {\n      url: url }));\n\n\n    // Create dialog buttons\n    var buttons = {};\n    buttons[self.getResource(\"confirmation-box-ok\")] = function () {\n      // No longer need to read the blob so it's revoked\n      !bizagi.util.isIE() ? window.URL.revokeObjectURL(url) : \"\";\n      dialogBox.dialog('destroy');\n      dialogBox.remove();\n    };\n\n    if (navigator.sayswho[0] !== \"Firefox\") {\n      buttons[self.getResource(\"render-actions-print\")] = function () {\n        // Print the document\n        var count = 0;\n        var printFn = function printFn(pdf) {\n          //Wait until PDF is ready to print    \n          if (!document.getElementById('ui-bizagi-document-pdf-preview') && count < 5) {\n            count += 1;\n            var timeoutPrint = setTimeout(function () {\n              printFn(pdf);\n              clearTimeout(timeoutPrint);\n            }, 1000);\n          } else {\n            if (!$.browser.mozilla && !$.browser.msie) {\n              document.getElementById('ui-bizagi-document-pdf-preview').focus();\n              document.getElementById('ui-bizagi-document-pdf-preview').contentWindow.print();\n            } else {\n              $(\".ui-bizagi-document-pdf-preview\").focus();\n              $(\".ui-bizagi-document-pdf-preview\")[0].print();\n            }\n          }\n        };\n        printFn($(\"#ui-bizagi-document-pdf-preview\", dialogBox)[0]);\n      };\n    }\n\n    // Create dialog\n    dialogBox.dialog({\n      width: 800,\n      height: 600,\n      title: filename,\n      maximized: false,\n      modal: true,\n      buttons: buttons,\n      close: function close() {\n        // No longer need to read the blob so it's revoked\n        !bizagi.util.isIE() ? window.URL.revokeObjectURL(url) : \"\";\n        dialogBox.dialog('destroy');\n        dialogBox.remove();\n      } });\n\n\n  },\n\n  /**\r\n      * Redraw documents when needed\r\n      * @param documents\r\n      * @param noFiles\r\n      * @param downloadAllDocuments\r\n      */\n  redrawDocuments: function redrawDocuments(documents, noFiles, downloadAllDocuments) {\n    this._super(documents, noFiles, downloadAllDocuments);\n\n    // Add icons\n    this.applyDocumentTemplatesFormat();\n  },\n\n  /**\r\n      * Shows the document if the flag is set.\r\n      */\n  autoOpenDocuments: function autoOpenDocuments() {\n    var self = this;\n    var properties = self.properties;\n    var control = self.getControl();\n\n    if (properties.autoOpen) {\n      if (properties.downloadalldocuments) {\n        //Show only the joined document\n        var joinedDocument = $(\".ui-bizagi-document-upload-item[data-joined=true]\", control);\n\n        if (joinedDocument && joinedDocument.length === 1) {\n          var fileName = joinedDocument.attr(\"data-filename\");\n\n          self.getAllDocumentFiles({ filename: fileName }).then(function (blobFile) {\n            var fileURL = bizagi.util.isIE() ? joinedDocument.attr(\"data-url\") + \"&h_disposition=inline\" : window.URL.createObjectURL(blobFile);\n\n            self.showDocumentPreview(fileURL, fileName);\n\n            // No longer need to read the blob so it's revoked\n            !bizagi.util.isIE() ? window.URL.revokeObjectURL(fileURL) : \"\";\n          }).fail(function (error) {\n            var form = self.getFormContainer();\n            form && form.failHandler(error);\n          });\n        }\n      } else {\n        // Auto-open documents if flag is set\n        $.each($(\".ui-bizagi-document-upload-item\", control), function () {\n          var $item = $(this).data();\n          var fileName = $item.filename;\n\n          // show only preview for files that are pdf\n          var extension = fileName.substr(fileName.lastIndexOf('.') + 1);\n\n          if (extension.toUpperCase() === \"PDF\" && !$item.joined) {\n            self.getDocumentFile($item).then(function (blobFile) {\n              var fileURL = bizagi.util.isIE() ? $item.url + \"&h_disposition=inline\" : window.URL.createObjectURL(blobFile);\n              self.showDocumentPreview(fileURL, fileName);\n            }).fail(function (error) {\n              var form = self.getFormContainer();\n              form && form.failHandler(error);\n            });\n          }\n        });\n      }\n    }\n  } });","/**\r\n *   Name: BizAgi Render Image\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the image render class to adjust to desktop devices\r\n */\n\n// Extends from render Desktop base\nbizagi.rendering.desktop.render.extend(\"bizagi.rendering.desktop.image\", {\n  // Statics\n  BA_ACTION_PARAMETER_PREFIX: bizagi.render.services.service.BA_ACTION_PARAMETER_PREFIX,\n  BA_CONTEXT_PARAMETER_PREFIX: bizagi.render.services.service.BA_CONTEXT_PARAMETER_PREFIX,\n  BA_PAGE_CACHE: bizagi.render.services.service.BA_PAGE_CACHE },\nbizagi.rendering.image.prototype);\n\n// Extends itself\nbizagi.rendering.desktop.image.extend(\"bizagi.rendering.desktop.image\", {}, {\n\n  /**\r\n                                                                               * Update or init the element data\r\n                                                                               * @param data\r\n                                                                               */\n  initializeData: function initializeData(data) {\n    // Call base\n    this._super(data);\n\n    // Allow to get the thumbnail image on desktop devices\n    this.properties.forceBase64 = true;\n    this.properties.value = this.properties.value || [];\n  },\n\n  /**\r\n      * Template method to implement in each device to customize each render after processed\r\n      */\n  postRender: function postRender() {\n    var self = this;\n    var control = self.getControl();\n    var properties = self.properties;\n    var mode = self.getMode();\n    var template = self.renderFactory.getTemplate(\"images\");\n    var containerHeight;\n    var imgWidth = self.properties.width;\n    var imgHeight = self.properties.height;\n\n    // Flash to define flash version\n    self.properties.flashVersion = false;\n\n    // Render template\n    var html = $.fasttmpl(template, {\n      xpath: bizagi.util.encodeXpath(self.getUploadXpath()),\n      editable: properties.editable,\n      url: self.properties.url,\n      allowDelete: properties.allowDelete,\n      mode: mode });\n\n\n    $(\".image-wrapper\", control).empty().append(html);\n\n    //If is not any image include, load the default properties of the controls\n    if (mode === \"design\" || mode === \"layout\" || self.properties.url.length === 0) {\n\n      var timeoutDefaultProperties = setTimeout(function () {\n        if (imgHeight === \"auto\") {\n\n          // if null means that container is the form\n          if (self.parent.properties.type === \"grid\") {\n            containerHeight = $(control).height() + \"px\";\n            bizagi.util.cssExtended($(\".image-wrapper\", control), 'width:100%!important');\n          } else {\n            var parent = self.parent.properties.type === \"panel\" ? self.parent.parent : self.parent;\n            var height = control.height();\n\n            containerHeight = parent.container.height() - 17;\n\n            var containerChildsSize = self.parent.getChildreCount();\n            var containerChildsHeightSum = self.parent.getChildrenSumHeight(\"image\");\n\n            if (typeof self.getFormContainer().properties !== \"undefined\" &&\n            self.parent.properties.id == self.getFormContainer().properties.id) {\n              containerHeight = 50;\n            } else if (containerChildsSize > 1) {\n              containerHeight = containerHeight - (containerChildsHeightSum - height);\n            }\n\n            $(\".image-wrapper\", control).height(containerHeight);\n          }\n\n          imgHeight = containerHeight;\n\n        }\n\n        $('a', control).css({ width: imgWidth, height: imgHeight });\n\n        $(\".resizable_img\", control).css({ width: imgWidth, height: imgHeight });\n        clearTimeout(timeoutDefaultProperties);\n      }, 150);\n\n      if ($(\".resizable_img\", control).hasClass('background-image')) {\n        //Creates an image node to store the sample image, and resize it to the control required dimensions\n\n        // Image url pattern\n        var pattern = /url\\(|\\)|\"|'/g;\n        var baseImageURL = $(\".resizable_img\", control).css('background-image').replace(pattern, \"\");\n\n        // Creates the image node with the base image URL\n        var resizableImgNode = $('<img src=' + baseImageURL + '>');\n\n        resizableImgNode.css({ width: imgWidth, height: imgHeight });\n\n        // Append the created node\n        $(\".resizable_img\", control).append(resizableImgNode);\n\n        //Reset the styles, and make room to the created image node\n        $(\".resizable_img\", control).css({\n          'background-image': 'none',\n          'border-top-width': '0',\n          'border-left-width': '0',\n          'border-right-width': '0',\n          'border-down-width': '0',\n          'padding': '0',\n          'display': 'inline-block' });\n\n      }\n\n      // Otherwise, set the styles to adjust the image in the center, regardless his dimesions\n    } else {\n      var isImageGreaterThanContainer = false;\n      var controlWidth = control.width();\n\n      var timeoutAdjustImage = setTimeout(function () {\n        var isAuto = self.properties.isAutoWidth;\n\n        if (isAuto && self.parent.properties.type === \"grid\") {\n          var $imgWidth = $(\".img\", control).width();\n          if ($imgWidth < controlWidth && 0 < $imgWidth) {\n            imgWidth = $imgWidth;\n          } else if ($imgWidth >= controlWidth) {\n            imgWidth = controlWidth - 20;\n            isImageGreaterThanContainer = true;\n          }\n\n          $('a', control).css({ height: \"auto\" });\n        } else {\n          $('a', control).css({ width: imgWidth, height: \"auto\" });\n        }\n\n        $(\".img, .ui-bizagi-render-image-wrapper .image-file\", control).\n        css({ width: imgWidth, height: \"auto\" });\n        $(\".ui-bizagi-render-upload-wrapper\", control).addClass(\"uploaded\");\n\n        var wSize = 48;\n        if ((self.properties.width + \"\").indexOf(\"px\") !== -1) {\n          wSize = (self.properties.width + \"\").replace(\"px\", \"\");\n        }\n\n        $(\".ui-bizagi-render-image-wrapper .image-file\", control).addClass('w-size-' + wSize);\n        $(\"img\", control).css(\"width\", imgWidth);\n        $(\"img\", control).css(\"height\", \"auto\");\n\n\n        if (isAuto && Number($('a', control).css(\"width\").slice(0, -2)) >\n        Number($(\".img\", control).css(\"width\").slice(0, -2))) {\n          $('a', control).css({ width: $(\".img\", control).css(\"width\") });\n        }\n\n        if (isAuto && isImageGreaterThanContainer && self.parent.properties.type === \"grid\") {\n          $('a', control).closest(\".ui-bizagi-render\").css(\"text-align\", \"left\");\n        }\n        clearTimeout(timeoutAdjustImage);\n      }, 50);\n    }\n\n    self.preventDefaultForAnchorTag();\n\n    // Resolve a deferred after the postRender\n    if (self.isPostRendered) self.isPostRendered.resolve();\n\n  },\n\n  /**\r\n      * isReadyToSave\r\n      * @returns {*}\r\n      */\n  isReadyToSave: function isReadyToSave() {\n    return this.ready();\n  },\n\n  /**\r\n      * Template method to implement in each device to customize the render's behaviour to add handlers\r\n      */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    var control = self.getControl();\n    var properties = self.properties;\n\n    // Call base\n    self._super();\n\n    self.deleteHandler();\n\n    $(\".ui-bizagi-render-image-wrapper\", control).bizagiUpload({\n      renderReference: this,\n      dialogTemplate: self.renderFactory.getTemplate(\"image-dialog\"),\n      properties: {\n        scriptData: self.buildAddParams(),\n        url: properties.addUrl,\n        xpath: properties.xpath,\n        validExtensions: properties.validExtensions,\n        maxSize: properties.maxSize },\n\n      onUploadFileCompletedCallback: self.onUploadFileCompleted,\n      dialogTitle: self.getResource(\"render-upload-link-label\") });\n\n\n    // Bind handlers\n    //  * Item Mouse over\n    control.delegate(\".ui-bizagi-render-upload-item\", \"mouseover\", function () {\n      var item = $(this);\n      $(\".ui-bizagi-render-upload-icon\", item).css(\"display\", \"inline-block\");\n      item.removeClass(\"ui-state-default\").addClass(\"ui-state-hover\");\n    });\n\n    //  * Item Mouse out\n    control.delegate(\".ui-bizagi-render-upload-item\", \"mouseout\", function () {\n      var item = $(this);\n      $(\".ui-bizagi-render-upload-icon\", item).css(\"display\", \"none\");\n      item.addClass(\"ui-state-default\").removeClass(\"ui-state-hover\");\n    });\n\n  },\n\n  deleteHandler: function deleteHandler() {\n    var self = this;\n    var control = self.getControl();\n\n\n    $(\".delete-button\", control).bind(\"click\", function (e) {\n      e.stopPropagation();\n      self.deleteImage();\n    });\n  },\n\n  /**\r\n      * Remove the current image\r\n      */\n  deleteImage: function deleteImage() {\n    var self = this;\n    var properties = self.properties;\n\n    return self.dataService.deleteImage({\n      url: properties.deleteUrl,\n      idRender: properties.id,\n      xpath: properties.xpath,\n      xpathContext: properties.xpathContext,\n      idPageCache: properties.idPageCache,\n      contexttype: properties.contexttype }).\n    done(function () {\n      self.properties.value = [];\n      self.refreshControl();\n    });\n  },\n\n  /**\r\n      * Template method to implement in each device to customize the render's behaviour when rendering in design mode\r\n      */\n  configureDesignView: function configureDesignView() {\n    var self = this;\n    var control = self.getControl();\n\n    // Call base\n    self._super();\n\n    $(\"*:not(.ui-bizagi-render-control-required)\", control).css({\n      padding: \"0px\",\n      margin: \"0px\",\n      border: \"0px\",\n      'line-height': '0px',\n      position: 'relative',\n      display: 'inline-block',\n      top: '0' });\n\n\n    $(\".image-file\", control).css({ width: self.properties.width, height: self.properties.height });\n  },\n\n  renderReadOnly: function renderReadOnly() {\n    return this.renderControl();\n  },\n  /**\r\n      * Template method to implement in each device to customize each render after processed in read-only mode\r\n      */\n  postRenderReadOnly: function postRenderReadOnly() {\n    var self = this;\n    var control = self.getControl();\n    var template = self.renderFactory.getTemplate(\"images\");\n    var mode = self.getMode();\n\n    // Render template\n    var html = $.fasttmpl(template, {\n      xpath: bizagi.util.encodeXpath(self.getUploadXpath()),\n      editable: false,\n      url: self.properties.url,\n      allowDelete: false,\n      mode: mode });\n\n\n    $(\".ui-bizagi-render-upload-wrapper\", control).empty().append(html);\n\n    $(\"a,.img, .ui-bizagi-render-image-wrapper .image-file, .ui-bizagi-render-image-wrapper\", control).css({\n      width: self.properties.width,\n      height: self.properties.height });\n\n  },\n\n  getTemplateItem: function getTemplateItem() {\n    return this.renderFactory.getTemplate(\"image-item\");\n  },\n\n  /**\r\n      * Opens a dialog in order to upload file per file\r\n      */\n  openUploadDialog: function openUploadDialog() {\n    var self = this;\n    var properties = self.properties;\n    var doc = window.document;\n\n    var dialogBox = self.dialogBox = $(\"<div class='ui-bizagi-component-loading'/>\");\n    dialogBox.empty();\n    dialogBox.appendTo(\"body\", doc);\n\n    // Define buttons\n    var buttons = {};\n\n    // Select button\n    buttons[self.getResource(\"render-upload-dialog-select\")] = function () {\n      if (self.checkMaxSize() && self.checkFileTypes()) {\n        $.when(self.processUploadFile()).done(function (data) {\n          self.onUploadFileCompleted(data);\n          self.closeUploadDialog();\n        });\n      }\n    };\n\n    // Cancel button\n    buttons[self.getResource(\"text-cancel\")] = function () {\n      self.closeUploadDialog();\n    };\n\n    // Creates a dialog\n    dialogBox.dialog({\n      width: 500,\n      height: 200,\n      title: self.getResource(\"render-upload-link-label\"),\n      modal: true,\n      buttons: buttons,\n      close: function close() {\n        self.closeUploadDialog();\n      },\n      resizeStop: function resizeStop(event, ui) {\n        if (self.form) {\n          self.form.resize(ui.size);\n        }\n      } });\n\n\n    // Render template\n    var dialogTemplate = self.renderFactory.getTemplate(\"image-dialog\");\n    $.tmpl(dialogTemplate, {\n      scriptData: self.buildAddParams(),\n      url: properties.addUrl,\n      xpath: properties.xpath,\n      validExtensions: properties.validExtensions.replace(\";\", \",\"),\n      maxSize: properties.maxSize }).\n    appendTo(dialogBox);\n    $('.ui-bizagi-loading-message').remove();\n\n  },\n\n  /**\r\n      * Close the upload dialog\r\n      */\n  closeUploadDialog: function closeUploadDialog() {\n    var self = this;\n    self.dialogBox.dialog('destroy');\n    self.dialogBox.remove();\n  },\n\n  /**\r\n      * Handler to process server response after a file has been uploaded\r\n      * @param renderReference\r\n      * @param response\r\n      */\n  onUploadFileCompleted: function onUploadFileCompleted(renderReference, response) {\n    var self = renderReference;\n    var control = self.getControl();\n    var imageWrapper = $(\".ui-bizagi-render-image-wrapper\", control);\n    var result = JSON.parse(response);\n    var imgWidth = 0;\n    var controlWidth = control.width();\n    var isImageLoaded = control.find(\".img\").size() > 0;\n    var widthBase = control.find(\".resizable_img\").width();\n\n    if (self.properties.isAutoWidth) {\n      imgWidth = self.properties.type != \"image\" ? control.width() : \"99%\";\n    } else {\n      imgWidth = self.properties.width;\n    }\n\n    // Set width\n    $(\".uploadifyQueueItem\", control).css({ width: self.properties.width });\n\n    if (result.type !== \"error\") {\n      // Allow the update image\n      if (bizagi.util.isEmpty(self.properties.value))\n      self.properties.value = [[0, \"uploaded\"]];\n\n      $.when(self.renderUploadItem()).done(function (htmlImage) {\n        // Empty container and add new image\n        $(imageWrapper).empty();\n        $(imageWrapper).append(htmlImage);\n        self.deleteHandler();\n\n        // Trigger change\n        self.triggerRenderChange();\n\n        var timeoutAdjustContainer = setTimeout(function () {\n          var isImageGreaterThanContainer = false;\n          var isAuto = self.properties.isAutoWidth;\n\n          if (isAuto && self.parent.properties.type === \"grid\") {\n\n            if ($(\".img\", control).width() < controlWidth) {\n              imgWidth = $(\".img\", control).width();\n            } else if ($(\".img\", control).width() >= controlWidth) {\n              imgWidth = controlWidth - 20;\n              isImageGreaterThanContainer = true;\n            }\n\n            if (!isImageLoaded) {\n              $('a', control).closest(\"td\").css(\"width\", widthBase);\n            }\n\n            $('a', control).css({ height: \"auto\" });\n\n          } else {\n            $('a', control).css({ width: imgWidth, height: \"auto\" });\n          }\n\n          $(\".img, .ui-bizagi-render-image-wrapper .image-file\", control).\n          css({ width: imgWidth, height: \"auto\" });\n\n          $(\".ui-bizagi-render-upload-wrapper\", control).addClass(\"uploaded\");\n\n          var wSize = 48;\n          if ((self.properties.width + \"\").indexOf(\"px\") !== -1) {\n            wSize = (self.properties.width + \"\").replace(\"px\", \"\");\n          }\n\n          $(\".ui-bizagi-render-image-wrapper .image-file\", control).addClass('w-size-' + wSize);\n\n          $(\"img\", control).css(\"width\", imgWidth);\n          $(\"img\", control).css(\"height\", \"auto\");\n          $('.image-wrapper', control).css(\"height\", \"auto\");\n\n\n          if (isAuto && Number($('a', control).css(\"width\").slice(0, -2)) >\n          Number($(\".img\", control).css(\"width\").slice(0, -2))) {\n            $('a', control).css({ width: $(\".img\", control).css(\"width\") });\n          }\n\n          if (self.parent.properties.type === \"grid\" && isAuto) {\n            if (isImageGreaterThanContainer) {\n              $('a', control).closest(\".ui-bizagi-render\").css(\"text-align\", \"left\");\n            } else {\n              if (self.properties.columnAlign) {\n                $('a', control).closest(\".ui-bizagi-render\").\n                css(\"text-align\", self.properties.columnAlign);\n                $('.image-wrapper', control).css(\"text-align\", self.properties.columnAlign);\n              } else {\n                $('a', control).closest(\".ui-bizagi-render\").css(\"text-align\", \"center\");\n              }\n            }\n          }\n          clearTimeout(timeoutAdjustContainer);\n        }, 50);\n\n      });\n    } else {\n      // Show server error\n      if (!result.isMaintenanceWindow) bizagi.showMessageBox(result.message);\n    }\n  },\n\n  /**\r\n      * Build add params to send to the server\r\n      * @returns {Array}\r\n      */\n  buildAddParams: function buildAddParams() {\n    var self = this;\n    var properties = self.properties;\n    var form = self.getFormContainer();\n\n    var data = [];\n    var action = \"savefile\";\n\n    if (properties.isUserPreference) {\n      action = \"SAVEUSERIMAGE\";\n      data.push({ key: self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\", value: \"entity\" });\n      data.push({ key: self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"surrogateKey\", value: self.currentUser });\n    }\n\n    data.push({ key: self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\", value: self.getUploadXpath() });\n    data.push({ key: self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\", value: properties.id });\n    data.push({ key: self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\", value: properties.xpathContext });\n    data.push({\n      key: self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE,\n      value: properties.idPageCache });\n\n    data.push({ key: self.Class.BA_ACTION_PARAMETER_PREFIX + \"sessionId\", value: form.properties.sessionId });\n    data.push({ key: self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\", value: action });\n\n    if (properties.contexttype) {\n      data.push({ key: self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\", value: properties.contexttype });\n    }\n\n    try {\n      if (typeof BIZAGI_SESSION_NAME !== \"undefined\") {\n        data.push({ key: BIZAGI_SESSION_NAME, value: form.properties.sessionId });\n      } else {\n        data.push({ key: \"JSESSIONID\", value: form.properties.sessionId });\n      }\n    } catch (e) {\n      data.push({ key: \"JSESSIONID\", value: form.properties.sessionId });\n    }\n\n    return data;\n  },\n\n  checkMaxSize: function checkMaxSize() {\n    var self = this;\n    var properties = self.properties;\n    var dialogBox = self.dialogBox;\n    var fileControl = $(\"input[type=file]\", dialogBox).get(0) || {};\n\n    // Dont exist any fucking way to know file size in IEx, just skip this validation\n    if (fileControl.files != undefined) {\n      if (fileControl.files.length > 0) {\n        if (fileControl.files[0].size > properties.maxSize) {\n          self.showError(self.getResource(\"render-upload-alert-maxsize\").replace(\"{0}\", properties.maxSize));\n          return false;\n        }\n        return true;\n      } else {\n        self.showError(self.getResource(\"render-required-upload\").replace(\"#label#\", \"\"));\n        return false;\n      }\n    } else {\n      if (bizagi.util.isIE()) {\n        if (fileControl.value === \"\" || !fileControl.value) {\n          self.showError(self.getResource(\"render-required-upload\").replace(\"#label#\", \"\"));\n          return false;\n        } else {\n          return true;\n        }\n      } else {\n        return true;\n      }\n    }\n  },\n\n  checkFileTypes: function checkFileTypes() {\n    var self = this;\n    var properties = self.properties;\n    var dialogBox = self.dialogBox;\n    var file = $(\"input[type=file]\", dialogBox).val();\n\n    if (properties.validExtensions && properties.validExtensions.length > 0) {\n      var validExtensions = properties.validExtensions.replaceAll(\"*.\", \"\").split(\";\");\n      if (!self.stringEndsWithValidExtension(file, validExtensions, true)) {\n        self.showError(self.getResource(\"render-upload-allowed-extensions\") + properties.validExtensions);\n        return false;\n      }\n    }\n    return true;\n  },\n\n  stringEndsWithValidExtension: function stringEndsWithValidExtension(stringToCheck, acceptableExtensionsArray, required) {\n    if (required == false && stringToCheck.length == 0) return true;\n\n    for (var i = 0; i < acceptableExtensionsArray.length; i++) {\n      if (acceptableExtensionsArray[i].toLowerCase() == \"*\") return true;\n      if (stringToCheck.toLowerCase().endsWith(acceptableExtensionsArray[i].toLowerCase())) return true;\n    }\n\n    return false;\n  },\n\n  showError: function showError(message) {\n    var self = this;\n    var errorContainer = $(\"#alert-file-upload\", self.dialogBox);\n\n    // Empty container\n    errorContainer.empty();\n    errorContainer.show();\n\n    errorContainer.html(message);\n  },\n\n  changeRequired: function changeRequired(argument) {\n    this.properties.required = argument;\n    this.changeRequiredLabel(argument);\n  },\n\n  changeRequiredLabel: function changeRequiredLabel(argument) {\n    var control = this.getControl();\n\n    if (control.length > 0) {\n      if (this.getMode() !== \"execution\") {\n        if (bizagi.util.parseBoolean(argument) == true && this.properties.editable) {\n          control.addClass(\"control-required\");\n        } else {\n          control.removeClass(\"control-required\");\n        }\n      } else {\n        if (bizagi.util.parseBoolean(argument) == true && !this.hasValue() && this.properties.editable) {\n          control.addClass(\"control-required\");\n        } else {\n          control.removeClass(\"control-required\");\n        }\n      }\n    }\n\n    this.triggerRenderValidate();\n  },\n\n  changeCellRequired: function changeCellRequired(argument) {\n    this.changeRequired(argument);\n  },\n\n  /**\r\n      * Process an upload file into the server\r\n      * @returns {*}\r\n      */\n  processUploadFile: function processUploadFile() {\n    var self = this;\n    var defer = new $.Deferred();\n    var dialogBox = self.dialogBox;\n    var uploadForm = $(\"form\", dialogBox);\n    var uploadIFrame = $(\"iframe\", uploadForm);\n\n    // When the iframe loads the user we need to evaluate the response and close the dialog\n    var timeoutFn = function timeoutFn() {\n      try {\n        var response = \"\";\n        if (uploadIFrame[0].contentWindow) {\n          var iframeContent = bizagi.util.isIE8() ? $(uploadIFrame[0].contentWindow.document.body) :\n          $(uploadIFrame[0].contentWindow.eval(\"document.body\"));\n\n          response = iframeContent.text();\n        }\n        if (response.length > 0) {\n          defer.resolve(response);\n        } else {\n          var timeoutForFn = setTimeout(function () {\n            timeoutFn();\n            clearTimeout(timeoutForFn);\n          }, 50);\n        }\n      } catch (error) {\n        // Nothing to do, just close the window and show error message\n        self.closeUploadDialog();\n        bizagi.showMessageBox(error.toString());\n      }\n    };\n\n    // Execute the timed function in order to check when the response has arrived\n    timeoutFn();\n\n    // Submit the form\n    uploadForm.submit();\n\n    return defer.promise();\n  },\n\n  /**\r\n      * Cleans current value\r\n      */\n  cleanData: function cleanData() {\n    if (!this.hasValue()) return;\n    return $.when(this.deleteImage());\n  } });","/*\r\n*   Name: BizAgi Desktop Column Decorator Extension\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will redefine the column decorator class to adjust to desktop devices\r\n*/\n\n// Extends from columns desktop base\nbizagi.rendering.desktop.columns.column.extend(\"bizagi.rendering.desktop.columns.combo\", bizagi.rendering.columns.combo.prototype);\n// Extends itself\nbizagi.rendering.desktop.columns.combo.extend(\"bizagi.rendering.desktop.columns.combo\", {}, {\n\n  /*\r\n                                                                                              *   Post process the element after it has been rendered\r\n                                                                                              */\n  postRender: function postRender(surrogateKey, cell, tableCell) {\n    // Call base\n    this._super(surrogateKey, cell, tableCell);\n\n    var self = this,\n    mode = self.getMode();\n\n    // Apply styles to input\n    var input = $(\".ui-selectmenu-status\", cell);\n    this.applyColumnStyles(input);\n\n    // Remove padding for td\n    if (this.properties.editable && tableCell) {\n      tableCell.addClass(\"ui-bizagi-cell-combo\");\n    }\n\n    if (mode === \"execution\") {\n\n      var decorated = this.getDecorated(surrogateKey),\n      control = decorated.getControl();\n\n      // Check if its new row\n      if (control.parents(\"tr\").data(\"new-row\")) {\n        //Set the column with this attribute, so when the control is evaluated in isValid(), validated\n        //also if it is required, and belongs from a new row\n        self.isNewRow = true;\n      } else {\n        self.isNewRow = false;\n      }\n    }\n  },\n\n  /*\r\n     *   Post process the element after it has been rendered\r\n     */\n  postRenderReadOnly: function postRenderReadOnly(surrogateKey, cell, tableCell) {\n    // Call base\n    this._super(surrogateKey, cell, tableCell);\n\n    // Apply styles to input\n    var input = $(\".ui-selectmenu-status\", cell);\n    this.applyColumnStyles(input);\n\n    // Add padding for td\n    if (tableCell)\n    tableCell.removeClass(\"ui-bizagi-cell-combo\");\n  },\n\n  /*\r\n      *   Apply custom overrides to each decorated instance\r\n      */\n  applyOverrides: function applyOverrides(decorated) {\n    var self = this;\n    this._super(decorated);\n    // Hacks the upload render to add features\n    decorated.getUploadXpath = this.getUploadXpath;\n\n    decorated.cleanData = function () {\n      var self = this;\n\n      self.value = self.properties.value = self.selectedValue = { id: 0, value: self.getResource(\"render-combo-empty-value\") };\n      self.setValue(self.value);\n      var control = self.getControl();\n      var input = control.find(\"input\");\n      if (input) {\n        input.val(self.getValue().value);\n      }\n    };\n  } });","/**\r\n *   Name: Bizagi Desktop Render Document Generator Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the document generator render class to adjust to desktop devices\r\n */\n\n// Extends from columns desktop base\nbizagi.rendering.desktop.columns.column.extend(\"bizagi.rendering.desktop.columns.document\", bizagi.rendering.columns.document.prototype);\n// Extends itself\nbizagi.rendering.desktop.columns.document.extend(\"bizagi.rendering.desktop.columns.document\", {}, {\n\n  /**\r\n                                                                                                     * Apply custom overrides to each decorated instance\r\n                                                                                                     * @param decorated\r\n                                                                                                     */\n  applyOverrides: function applyOverrides(decorated) {\n    var self = this;\n    var mode = self.getMode();\n    self._super(decorated);\n\n    decorated.getControlHtml = self.getControlHtml;\n\n    if (mode !== \"design\") {\n      self.surrogateKey = decorated.surrogateKey;\n\n      decorated.getXpath = this.getXpath;\n      decorated.getDocumentXpath = this.getDocumentXpath;\n      decorated.getContextXpath = this.getContextXpath;\n      decorated.documentTemplateGenerate = this.documentTemplateGenerate;\n      decorated.preRenderControl = this.preRenderControl;\n      decorated.deleteDocumentTemplate = this.deleteDocumentTemplate;\n      decorated.getTemplateItem = this.getTemplateItem;\n      decorated.properties.xpathContext = self.getContextXpath();\n    }\n  },\n\n  getTemplateItem: function getTemplateItem() {\n    return \"document-column-item\";\n  },\n\n  /**\r\n      * Creates the event of generation of templates.\r\n      */\n  documentTemplateGenerate: function documentTemplateGenerate() {\n    var self = this;\n    var properties = self.properties;\n    self.startLoading();\n    //Get the context xPath\n    properties.xpathcontext = self.getContextXpath();\n    properties.xpath = self.getDocumentXpath(properties.xpath);\n    properties.buttonExecuted = true;\n\n    var grid = self.parent;\n    var form = self.getFormContainer();\n\n    $.when(form.submitData()).\n    done(function () {\n      $.when(self.dataService.generateDocumentTemplate(properties)).\n      done(function (response) {\n        $.when(grid.refresh()).\n        done(function () {\n          self.autoOpenDocuments();\n        });\n\n        self.endLoading();\n      }).fail(function () {\n        self.showErrorMessage();\n        self.endLoading();\n      });\n    }).fail(function (message) {\n      // Add error messages\n      self.getFormContainer().addErrorMessage(message);\n      self.endLoading();\n    });\n\n    properties.buttonExecuted = false;\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @param template\r\n      * @param mode\r\n      * @param downloadalldocuments\r\n      * @param allowGenerate\r\n      * @param properties\r\n      * @param noFiles\r\n      * @returns {*}\r\n      */\n  getControlHtml: function getControlHtml(template, mode, downloadalldocuments, allowGenerate, properties, noFiles) {\n    var self = this;\n    var isInlineRow = true;\n\n    for (var i = 0; i < self.parent.properties.data.rows.length; i++) {\n      if (self.parent.properties.data.rows[i][0] == self.surrogateKey) {\n        isInlineRow = false;\n        break;\n      }\n    }\n\n    var html = $.fasttmpl(template, {\n      noActivateButton: isInlineRow,\n      editable: mode !== \"execution\",\n      downloadalldocuments: downloadalldocuments,\n      required: properties.required,\n      allowgenerate: allowGenerate,\n      xpath: self.getXpath(properties.xpath),\n      append: properties.append ? properties.append : false,\n      caption: properties.caption,\n      noFiles: noFiles,\n      allowSendInMail: properties.allowSendInMail,\n      mode: mode });\n\n\n    return html.replace(\"ui-bizagi-document-upload-item-design\", \"ui-bizagi-document-upload-item-design-column\");\n  },\n\n  /**\r\n      * Apply custom overrides to each decorated instance\r\n      * @param xpath\r\n      * @returns {string}\r\n      */\n  getXpath: function getXpath(xpath) {\n    var xpathPath = xpath;\n    var index = xpathPath.indexOf(this.grid.properties.xpath);\n\n    if (index != -1) {\n      xpathPath = xpathPath.substr(index + this.grid.properties.xpath.length + 1);\n    }\n\n    return this.grid.properties.xpath + \"[id=\" + this.surrogateKey + \"].\" + xpathPath;\n  },\n\n  /**\r\n      * Returns the xpath to be used\r\n      * @param xpath\r\n      * @returns {*|string}\r\n      */\n  getDocumentXpath: function getDocumentXpath(xpath) {\n    var xpathPath = xpath;\n    var index = xpathPath.indexOf(this.grid.properties.xpath);\n\n    if (index != -1) {\n      xpathPath = xpathPath.substr(index + this.grid.properties.xpath.length + 1);\n    }\n\n    return xpathPath;\n  },\n\n  /**\r\n      * Post process the element after it has been rendered\r\n      * @param surrogateKey\r\n      * @param cell\r\n      * @param tableCell\r\n      */\n  postRenderReadOnly: function postRenderReadOnly(surrogateKey, cell, tableCell) {\n    // Call base\n    this._super(surrogateKey, cell, tableCell);\n  },\n\n  /**\r\n      * Returns the xpath to be used\r\n      * @returns {string}\r\n      */\n  getContextXpath: function getContextXpath() {\n    var self = this;\n    var form = self.getFormContainer();\n    var xpathContext = form.properties.xpathContext ? form.properties.xpathContext + \".\" : \"\";\n    return xpathContext + this.grid.properties.xpath + \"[id=\" + this.surrogateKey + \"]\";\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      */\n  preRenderControl: function preRenderControl() {\n    if (this.value != undefined && this.properties.value != undefined) {\n      this.properties.value = this.value;\n    }\n  },\n\n  /**\r\n      * Creates the event of generation of templates.\r\n      * @param filename\r\n      */\n  deleteDocumentTemplate: function deleteDocumentTemplate(filename) {\n    var self = this;\n    var grid = self.parent;\n    var params = {};\n\n    params.xpath = self.properties.xpath + \"[fileName='\" + filename + \"']\";\n    params.idRender = self.properties.id;\n    params.xpathContext = self.getContextXpath();\n    params.idPageCache = self.properties.idPageCache;\n\n    $.when(self.dataService.deleteUploadFile(params)).done(function () {\n      grid.refresh();\n    });\n  } });","/*\r\n*   Name: BizAgi Desktop Letter Column Decorator Extension\r\n*   Author: Alexander Mejia\r\n*   Comments:\r\n*   -   This script will redefine the letter column decorator class to adjust to desktop devices\r\n*/\n\n// Extends from columns desktop base\nbizagi.rendering.desktop.columns.column.extend(\"bizagi.rendering.desktop.columns.letter\", bizagi.rendering.columns.letter.prototype);\n// Extends itself\nbizagi.rendering.desktop.columns.letter.extend(\"bizagi.rendering.desktop.columns.letter\", {}, {\n\n  /*\r\n                                                                                                *   Apply custom overrides to each decorated instance\r\n                                                                                                */\n  applyOverrides: function applyOverrides(decorated) {\n    var self = this;\n    var properties = self.properties;\n    var mode = self.getMode();\n\n    //Call base\n    self._super(decorated);\n\n    // Hacks some methods to add features\n    decorated.getContextXpath = self.getContextXpath;\n    decorated.getXpath = self.getXpath;\n    decorated.getControl = self.getControl;\n    decorated.setDisplayValue = self.setDisplayValue;\n\n    decorated.postRenderReadOnly = function (element) {\n      var html = decorated.renderReadOnly.apply(decorated);\n      var control = $(\".ui-bizagi-cell\", element);\n      control.append(html);\n    };\n  },\n\n  /*\r\n     *   Returns the current context xpath  \r\n     */\n  getContextXpath: function getContextXpath() {\n    var self = this;\n    var mode = self.getMode();\n    var properties = self.properties;\n\n    if (mode === \"execution\") {\n\n      return properties.xpathContext && properties.xpathContext.length > 0 ?\n      properties.xpathContext + \".\" + self.grid.properties.xpath + \"[id=\" + self.surrogateKey + \"]\" :\n      self.grid.properties.xpath + \"[id=\" + self.surrogateKey + \"]\";\n    }\n\n    return \"\";\n\n  },\n\n  /*\r\n     *   Returns the current xpath  \r\n     */\n  getXpath: function getXpath() {\n    var self = this;\n    var properties = self.properties;\n\n    var xpathPath = properties.xpath;\n    var index = xpathPath.indexOf(self.grid.properties.xpath);\n    if (index != -1) {xpathPath = xpathPath.substr(index + self.grid.properties.xpath.length + 1);}\n\n    return xpathPath;\n  },\n\n  /* \r\n     * Post process the element after it has been rendered\r\n     */\n  postRender: function postRender(surrogateKey, cell) {\n\n    // Call base\n    this._super(surrogateKey, cell);\n\n    var self = this;\n    var mode = self.getMode();\n\n    this.setSurrogateKey(surrogateKey);\n    if (mode == \"execution\") {\n\n      var decorated = this.getDecorated(surrogateKey);\n      var control = decorated.getControl();\n\n      // Check if its new row\n      if (control.parents(\"tr\").data(\"new-row\")) {\n        // Show message:  Please save record before to generate a letter\n        control.html(bizagi.localization.getResource('render-grid-column-letter-mandatory-key'));\n      }\n    }\n  },\n\n  /*\r\n     *   Template method to get the control element\r\n     *   This will execute under the decorated element context\r\n     */\n  getControl: function getControl() {\n    var self = this;\n    var properties = self.properties;\n\n    if (properties.editable) {return $(\".ui-bizagi-render-control\", self.element);}\n\n    return $(\".ui-bizagi-cell\", self.element);\n  },\n\n  /*\r\n     * Override function\r\n     */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n    // Set internal value\n    self.setValue(value, false);\n  } });","/**\r\n *   Name: Bizagi Desktop Column Decorator Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the column decorator class to adjust to desktop devices\r\n */\n\n// Extends from columns desktop base\nbizagi.rendering.desktop.columns.column.extend(\"bizagi.rendering.desktop.columns.search\", bizagi.rendering.columns.search.prototype);\n// Extends itself\nbizagi.rendering.desktop.columns.search.extend(\"bizagi.rendering.desktop.columns.search\", {}, {\n\n  /*\r\n                                                                                                *   Post process the element after it has been rendered\r\n                                                                                                */\n  postRender: function postRender(surrogateKey, cell) {\n    // Call base\n    this._super(surrogateKey, cell);\n\n    var decorated = this.getDecorated(surrogateKey);\n\n    // Apply styles to input\n    var input = $(\".ui-selectmenu-status\", decorated.getControl());\n    this.applyColumnStyles(input);\n\n    // Remove padding for td\n    if (this.properties.editable) {\n      decorated.getControl().addClass(\"ui-bizagi-cell-search\");\n    }\n  },\n\n  /*\r\n     *   Post process the element after it has been rendered\r\n     */\n  postRenderReadOnly: function postRenderReadOnly(surrogateKey, cell, tableCell) {\n    // Call base\n    this._super(surrogateKey, cell);\n\n    // Apply styles to input\n    var input = $(\".ui-selectmenu-status\", cell);\n    this.applyColumnStyles(input);\n  },\n\n  /**\r\n      * Apply custom overrides to each decorated instance\r\n      * @param decorated\r\n      */\n  applyOverrides: function applyOverrides(decorated) {\n    this._super(decorated);\n\n    decorated.refreshControl = this.refreshControl;\n\n    // Only apply to advanced search control\n    if (decorated.properties.advancedSearch) {\n      var originalRenderCellControl = decorated.internalRenderCellControl;\n\n      // Override to base function\n      decorated.internalRenderCellControl = function (editable, key, renderColumn, decorated) {\n        var self = this;\n\n        // Set editable\n        var originalEditable = renderColumn.properties.editable;\n        renderColumn.properties.editable = editable;\n\n        $.when(renderColumn.render(key, decorated.getValue(key))).done(function (cell) {\n\n          // Update cell content\n          self.element && self.element.find(\"[data-bizagi-component=cellContent] > div\").replaceWith(cell);\n\n          // Call to base\n          originalRenderCellControl.call(self, editable, key, renderColumn, decorated);\n        });\n\n        // Restore editable\n        renderColumn.properties.editable = originalEditable;\n\n      };\n    }\n  },\n\n  refreshControl: function refreshControl() {\n    this.grid.refreshCell({\n      key: this.surrogateKey,\n      column: this.properties.xpath,\n      xpathContext: this.getFormContainer().properties.xpathContext });\n\n  } });","/*\r\n*   Name: Bizagi Desktop Date Column Decorator Extension\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will redefine the date column decorator class to adjust to desktop devices\r\n*/\n\n// Extends from columns desktop base\nbizagi.rendering.desktop.columns.column.extend(\"bizagi.rendering.desktop.columns.date\", bizagi.rendering.columns.date.prototype);\n// Extends itself\nbizagi.rendering.desktop.columns.date.extend(\"bizagi.rendering.desktop.columns.date\", {}, {\n\n  /*\r\n                                                                                            *   Apply custom overrides to each decorated instance\r\n                                                                                            */\n  applyOverrides: function applyOverrides(decorated) {\n    var self = this;\n    decorated.originalRenderElement = decorated.renderElement;\n\n    decorated.renderElement = function () {\n      return this.originalRenderElement(\"render-base\");\n    };\n    self._super(decorated);\n  },\n\n  resolveValue: function resolveValue(context, value) {\n    var result = \"\";\n    if (bizagi.util.isString(value) || bizagi.util.isNumeric(value)) {\n      result = value;\n    }\n\n    if (bizagi.util.isArray(value)) {\n      var indexes = context.grid.getIndexes();\n      var surrogateKey = context.surrogateKey;\n      var index = indexes.indexOf(surrogateKey);\n      if (index !== -1) {\n        result = value[index];\n      }\n    }\n    return result;\n  },\n\n  /*\r\n     *   Post process the element after it has been rendered\r\n     */\n  postRender: function postRender(surrogateKey, cell) {\n    // Call base\n    this._super(surrogateKey, cell);\n\n    var self = this;\n    var properties = self.properties;\n    var decorated = this.getDecorated(surrogateKey);\n    // Call base\n    //decorated.properties.showTime = false;\n    decorated.properties.showTime = properties.showTime ? properties.showTime : false;\n\n    // Apply styles to input\n    var input = $(\".bz-input-icon\", cell);\n    this.applyColumnStyles(input);\n  },\n\n\n  /*\r\n     *   Post process the element after it has been rendered\r\n     */\n  postRenderReadOnly: function postRenderReadOnly(surrogateKey, cell) {\n    // Call base\n    this._super(surrogateKey, cell);\n\n    var self = this;\n    var properties = self.properties;\n    var decorated = this.getDecorated(surrogateKey);\n    // Call base, but resuming the original show time property when rendering not editable\n    decorated.properties.showTime = properties.showTime ? properties.showTime : false;\n  } });","/*\r\n*   Name: BizAgi Desktop Text Column Decorator Extension\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will redefine the text column decorator class to adjust to desktop devices\r\n*/\n\n// Extends from column\nbizagi.rendering.desktop.columns.column.extend(\"bizagi.rendering.desktop.columns.text\", {}, {\n\n  /*\r\n                                                                                              *   Post process the element after it has been rendered\r\n                                                                                              */\n  postRender: function postRender(surrogateKey, cell) {\n    // Call base\n    this._super(surrogateKey, cell);\n\n    // Apply styles to input\n    var input = $(\"input, textarea\", cell);\n    this.applyColumnStyles(input);\n  },\n\n  postRenderReadOnly: function postRenderReadOnly(surrogateKey, cell) {\n    var self = this;\n    var properties = self.properties;\n\n    if (properties.autoExtend) {\n      var readOnly = cell.find(\".ui-bizagi-cell-readonly\");\n      if (readOnly.length > 0) {\n        readOnly.css(\"max-height\", \"none\");\n      }\n    }\n\n    self._super(surrogateKey, cell);\n  },\n\n  attachRetypeDouble: function attachRetypeDouble() {\n    var self = this;\n    var element = self.element;\n\n    var input = $(\"input\", element);\n    if (!input || input.length == 0) return;\n\n    // Apply blur handler to check value\n    input.blur(function () {\n      var control = $(this);\n      var previousValue = self.previousValue;\n      var value = self.value;\n\n      if (previousValue != null && value != previousValue) {\n        if ($(this).data(\"newValue\") != undefined && control.val() != $(this).data(\"newValue\")) {\n          $(this).data().newValue = undefined;\n        }\n      }\n      self.retypeDouble(control);\n\n    });\n  },\n  /**\r\n     * Apply custom overrides to each decorated instance\r\n     * @param decorated\r\n     */\n  applyOverrides: function applyOverrides(decorated) {\n    this._super(decorated);\n\n    var originalRenderCellControl = decorated.internalRenderCellControl;\n\n    // Override to base function\n    decorated.internalRenderCellControl = function (editable, key, renderColumn, decorated) {\n      var self = this;\n\n      // Set editable\n      var originalEditable = renderColumn.properties.editable;\n      renderColumn.properties.editable = editable;\n\n      $.when(renderColumn.render(key, decorated.getValue(key))).done(function (cell) {\n        // Update cell content\n        self.element && self.element.find(\"[data-bizagi-component=cellContent] > div\").replaceWith(cell);\n\n        // Call to base\n        originalRenderCellControl.call(self, editable, key, renderColumn, decorated);\n      });\n\n      // Restore editable\n      renderColumn.properties.editable = originalEditable;\n    };\n\n  } });","/*\r\n*   Name: BizAgi Desktop Seacrh List Column Decorator Extension\r\n*   Author: Paola Herrera\r\n*   Comments:\r\n*   -   This script will redefine the text column decorator class to adjust to desktop devices\r\n*/\n\n// Extends from column\nbizagi.rendering.desktop.columns.column.extend(\"bizagi.rendering.desktop.columns.searchList\", {}, {\n\n  /*\r\n                                                                                                     *   Constructor\r\n                                                                                                     */\n  init: function init(params) {\n    // Call base\n    this._super(params);\n\n    // Set base column styles\n    var properties = this.properties;\n  },\n  /*\r\n      *   Returns the in-memory processed element\r\n      *   so the caller could append it to any place\r\n      */\n  render: function render(surrogateKey, value, tableCell) {\n    var self = this;\n    var decorated = self.getDecorated(surrogateKey);\n    var properties = self.properties;\n\n    // If the control needs to recalculate data, reset it on the decorated render\n    if (properties.recalculate) {\n      decorated.resetData();\n    }\n\n    // Change the xpath context\n    var xpathContext = properties.xpathContext.length > 0 ? properties.xpathContext + \".\" + self.grid.properties.xpath + \"[id=\" + surrogateKey + \"]\" : self.grid.properties.xpath + \"[id=\" + surrogateKey + \"]\";\n    decorated.properties.xpathContext = xpathContext;\n\n    // Render the control\n    var result = this._super(surrogateKey, value, tableCell);\n\n    return result;\n  },\n\n  /*\r\n      *   Sets the internal value, only must be called internally\r\n      */\n  setValue: function setValue(surrogateKey, value) {\n    var self = this;\n\n    var decorated = self.getDecorated(surrogateKey);\n    if (decorated != \"undefined\" && decorated != null) {\n\n      decorated.properties.originalValue = value;\n      decorated.properties.previousValue = value;\n\n      if ((value === null || value === undefined) && self.properties.defaultvalue !== undefined && decorated.grid != undefined) {\n        value = self.setDefaultValue(surrogateKey, decorated);\n      }\n\n      if (value === null || value === undefined) value = [];\n\n      decorated.properties.value = value;\n      decorated.setValue(value, false);\n    }\n  } });","/*\r\n*   Name: BizAgi Desktop Number Column Decorator Extension\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will redefine the number column decorator class to adjust to desktop devices\r\n*/\n\n// Extends from column\nbizagi.rendering.desktop.columns.column.extend(\"bizagi.rendering.desktop.columns.number\", {}, {\n\n  /*\r\n                                                                                                *   Post process the element after it has been rendered\r\n                                                                                                */\n  postRender: function postRender(surrogateKey, cell) {\n    // Call base\n    this._super(surrogateKey, cell);\n\n    // Apply styles to input\n    var input = $(\"input\", cell);\n    this.applyColumnStyles(input);\n  },\n  renderSummary: function renderSummary(key, value) {\n    var self = this;\n    return self.renderReadOnly(key, value);\n  },\n  postRenderSummary: function postRenderSummary(key, value) {\n    var self = this;\n    self.postRenderReadOnly(key, value);\n    return true;\n  },\n  /**\r\n      * Apply custom overrides to each decorated instance\r\n      * @param decorated\r\n      */\n  applyOverrides: function applyOverrides(decorated) {\n    this._super(decorated);\n\n    var originalRenderCellControl = decorated.internalRenderCellControl;\n\n    // Override to base function\n    decorated.internalRenderCellControl = function (editable, key, renderColumn, decorated) {\n      var self = this;\n\n      // Set editable\n      var originalEditable = renderColumn.properties.editable;\n      renderColumn.properties.editable = editable;\n\n      $.when(renderColumn.render(key, decorated.getValue(key))).done(function (cell) {\n\n        // Update cell content\n        self.element && self.element.find(\"[data-bizagi-component=cellContent] > div\").replaceWith(cell);\n\n        // Call to base\n        originalRenderCellControl.call(self, editable, key, renderColumn, decorated);\n      });\n\n      // Restore editable\n      renderColumn.properties.editable = originalEditable;\n    };\n  } });","/*\r\n *   Name: BizAgi Desktop NumberScientificNotation Column Decorator Extension\r\n *   Author: Laura Ariza\r\n *   Comments:\r\n *   -   This script define a render control that support scientific notation format in a column\r\n */\n\nbizagi.rendering.desktop.columns.column.extend(\"bizagi.rendering.desktop.columns.numberScientificNotation\", {}, {\n  /*\r\n                                                                                                                   *   Post process the element after it has been rendered\r\n                                                                                                                   */\n  postRender: function postRender(surrogateKey, cell) {\n    // Call base\n    this._super(surrogateKey, cell);\n\n    // Apply styles to input\n    var input = $(\"input\", cell);\n    this.applyColumnStyles(input);\n  },\n  renderSummary: function renderSummary(key, value) {\n    var self = this;\n    return self.renderReadOnly(key, value);\n  },\n  postRenderSummary: function postRenderSummary(key, value) {\n    var self = this;\n    self.postRenderReadOnly(key, value);\n    return true;\n  } });","/**\r\n *   Name: Bizagi Desktop Upload Column Decorator Extension\r\n *   Author: Bizagi UI Forms\r\n *   Comments:\r\n *   -   This script will redefine the upload column decorator class to adjust to desktop devices\r\n */\n\n// Extends from column\nbizagi.rendering.desktop.columns.column.extend(\"bizagi.rendering.desktop.columns.upload\", {}, {\n\n  /**\r\n                                                                                                 * Apply custom overrides to each decorated instance\r\n                                                                                                 * @param {} decorated\r\n                                                                                                 * @returns {}\r\n                                                                                                 */\n  applyOverrides: function applyOverrides(decorated) {\n    var self = this;\n    var mode = self.getMode();\n\n    self._super(decorated);\n\n    // Hacks the upload render to add features\n    decorated.getUploadXpath = self.getUploadXpath;\n\n    // Hack apply upload plugin method in order to execute it only when the control is inserted in the DOM\n    if (mode !== \"design\" && mode !== \"layout\") {\n\n      var originalMethod = decorated.applyUploadPlugin;\n\n      decorated.getXpathContext = function () {\n        var that = this;\n        var xpath = that.grid.properties.xpath + \"[id=\" + that.surrogateKey + \"]\";\n\n        if (that.properties.xpathContext.length > 0) {\n          return that.properties.xpathContext + \".\" + xpath;\n        } else {\n          return xpath;\n        }\n      };\n\n      decorated.getUploadXpathContext = function () {\n        return this.properties.xpathContext.length > 0 ? this.properties.xpathContext : \"\";\n      };\n\n      decorated.applyUploadPlugin = function () {\n        var control = this.getControl();\n\n        originalMethod.apply(decorated, arguments);\n\n        control.undelegate(\".ui-bizagi-render-upload-item\", \"mouseover\");\n        control.undelegate(\".ui-bizagi-render-upload-item\", \"mouseout\");\n\n        $(\".ui-bizagi-render-upload-icon\", control).css(\"display\", \"inline-block\");\n\n        // fix to firefox and chrome\n        $(\".ui-bizagi-render-upload-wrapper object\", control).css({ position: 'relative' });\n\n        $(\".ui-bizagi-render-upload-queue\", control).css({ 'max-width': \"150px\" });\n\n      };\n\n      decorated.postRender = function () {\n        var self = this;\n        var control = self.getControl();\n\n        if (self.properties.allowSendInMail) {\n          self.bindEmailDialog();\n        }\n\n        //Set control container to behave as a block\n        control.addClass(\"ui-bizagi-render-display-block\");\n        control.addClass(\"ui-bizagi-render-upload\");\n        self.checkMaxFiles();\n      };\n\n      decorated.buildItemUrl = function (file) {\n        var self = this;\n        var properties = self.properties;\n        var form = self.getFormContainer();\n\n        return self.dataService.getUploadFileUrl({\n          idRender: properties.id,\n          xpath: self.getUploadXpath(),\n          xpathContext: properties.xpathContext,\n          idPageCache: properties.idPageCache,\n          fileId: file.id,\n          sessionId: form.properties.sessionId,\n          contexttype: properties.contexttype });\n\n      };\n    }\n\n    decorated.buildItemUrl = function (file) {\n      var self = this;\n      var properties = self.properties;\n      var form = self.getFormContainer();\n      var xpathContext = self.getXpathContext();\n\n      return self.dataService.getUploadFileUrl({\n        idRender: properties.id,\n        xpath: properties.xpath,\n        xpathContext: xpathContext,\n        idPageCache: properties.idPageCache,\n        fileId: file.id,\n        sessionId: form.properties.sessionId,\n        contexttype: properties.contexttype });\n\n    };\n\n    decorated.processUploadFile = function () {\n      var self = this;\n      var dialogBox = self.dialogBox;\n      var defer = new $.Deferred();\n      var uploadForm = $(\"form\", dialogBox);\n      var uploadIFrame = $(\"iframe\", uploadForm);\n      var xpathContext = self.getXpathContext();\n\n      // Change xpath context within form element\n      $(\"[name=h_xpathContext]\", uploadForm).val(xpathContext);\n\n      // When the iframe loads the user we need to evaluate the response and close the dialog\n      var timeoutFn = function timeoutFn() {\n        try {\n          var response = \"\";\n          if (uploadIFrame[0].contentWindow) {\n            var iframeContent = bizagi.util.isIE8() ? $(uploadIFrame[0].contentWindow.document.body) :\n            $(uploadIFrame[0].contentWindow.eval(\"document.body\"));\n\n            response = iframeContent.text();\n          }\n          if (response.length > 0) {\n            defer.resolve(response);\n          } else {\n            var timeoutForFn = setTimeout(function () {\n              timeoutFn();\n              clearTimeout(timeoutForFn);\n            }, 50);\n          }\n        } catch (e) {\n          // Nothing todo, just close the window and show error message\n          self.closeUploadDialog();\n          window.alert(e.toString());\n        }\n      };\n\n      // Execute the timed function in order to check when the response has arrived\n      timeoutFn();\n\n      // Submit the form\n      uploadForm.submit();\n\n      return defer.promise();\n    };\n  },\n\n  /**\r\n      * Returns the in-memory processed element when the element is read-only\r\n      * @param {} surrogateKey\r\n      * @param {} value\r\n      * @returns {}\r\n      */\n  renderReadOnly: function renderReadOnly(surrogateKey, value) {\n    var self = this;\n    var cell;\n\n    var decorated = this.getDecorated(surrogateKey);\n    self.setValue(surrogateKey, value);\n    self.setSurrogateKey(surrogateKey);\n\n    self.applyOverrides(decorated);\n    // Set grid and id references to the control in order to render the content\n    decorated.grid = this.grid;\n    decorated.column = this;\n    decorated.surrogateKey = surrogateKey;\n\n    // Set ready deferred\n    self.readyDeferred = new $.Deferred();\n\n    // We need to render the inner control as read-only\n    if (decorated.files.length > 0) {\n      // Changes editable to false to render read-only\n      var editable = this.properties.editable;\n      decorated.properties.editable = false;\n      cell = decorated.render(\"cell.upload\");\n      decorated.properties.editable = editable;\n    }\n\n    // Attach rendered handler\n    self.bind(\"rendered\", function () {\n      self.readyDeferred.resolve();\n    });\n\n    return cell;\n  },\n\n  /**\r\n      * Post process the element after it has been rendered\r\n      * @param {} surrogateKey\r\n      * @param {} cell\r\n      * @returns {}\r\n      */\n  postRenderReadOnly: function postRenderReadOnly(surrogateKey, cell) {\n    var self = this;\n\n    // Call base\n    self._super(surrogateKey, cell);\n\n\n    var decorated = self.getDecorated(surrogateKey);\n\n    if (decorated.files.length == 0) {\n      var message = self.getResource(\"render-upload-no-files\");\n      $(\".ui-bizagi-cell-readonly\", cell).html(message);\n\n      // Set cell icon to the right\n      var cellIcon = $(\".ui-bizagi-cell-icon\", cell);\n      cellIcon.addClass(\"ui-bizagi-cell-icon-right\");\n    } else {\n      // Just draw render if the cell layout has been filled\n      if (cell && cell.length > 0) {\n        // Apply styles to cell\n        self.applyColumnStyles(cell);\n      }\n    }\n  },\n\n  /**\r\n      * Post process the element after it has been rendered\r\n      * @param {} surrogateKey\r\n      * @param {} cell\r\n      * @returns {}\r\n      */\n  postRender: function postRender(surrogateKey, cell) {\n    var self = this;\n    var mode = self.getMode();\n\n    // Call base\n    self._super(surrogateKey, cell);\n\n    self.setSurrogateKey(surrogateKey);\n\n    if (mode != \"design\") {\n\n      var decorated = this.getDecorated(surrogateKey);\n      var control = decorated.getControl();\n\n      // Check if its new row\n      if (control.parents(\"tr\").data(\"new-row\")) {\n        // Show message:  Please save record before to upload a file\n        control.html(bizagi.localization.getResource('render-grid-column-upload-mandatory-key'));\n\n        //Set the column with this attribute, so when the control is evaluated in isValid(), validated\n        //also if it is required, and belongs from a new row\n        self.isNewRow = true;\n      } else {\n        self.isNewRow = false;\n      }\n    }\n  },\n\n  canBeSent: function canBeSent() {\n    return false;\n  },\n\n  /**\r\n      * Returns the xpath to be used\r\n      * @returns {}\r\n      */\n  getUploadXpath: function getUploadXpath() {\n    return this.grid.properties.xpath + \"[id=\" + this.surrogateKey + \"].\" + this.properties.xpath;\n  } });","/*\r\n *   Name: Bizagi Desktop Radio Column Decorator Extension\r\n *   Author: Bizagi UI Forms\r\n *   Comments:\r\n *   -   This script will redefine the Radio column decorator class to adjust to desktop devices\r\n */\n\n// Extends from column\nbizagi.rendering.desktop.columns.combo.extend(\"bizagi.rendering.desktop.columns.radio\", {}, {\n  /*\r\n                                                                                               *   Apply custom overrides to each decorated instance\r\n                                                                                               */\n  applyOverrides: function applyOverrides(decorated) {\n    var self = this;\n    this._super(decorated);\n    // Hacks the upload render to add features\n    decorated.getUploadXpath = this.getUploadXpath;\n\n    decorated.cleanData = function () {\n      var self = this;\n      var value = { id: \"\", label: \"\" };\n      var selectedItem = self.element.find(\".ui-radio-state-checked\");\n\n      selectedItem.removeClass(\"ui-radio-state-checked\");\n      self.setDisplayValue(value);\n      self.setValue(value);\n    };\n  } });","/*\r\n*   Name: BizAgi Desktop Radio Column Decorator Extension\r\n*   Author: Maria Camila Angel\r\n*   Comments:\r\n*   -   This script will redefine the text column decorator class to adjust to desktop devices\r\n*/\n\n// Extends from column\nbizagi.rendering.desktop.columns.combo.extend(\"bizagi.rendering.desktop.columns.list\", {}, {\n  /*\r\n                                                                                             *   Apply custom overrides to each decorated instance\r\n                                                                                             */\n  applyOverrides: function applyOverrides(decorated) {\n    var self = this;\n    this._super(decorated);\n    // Hacks the upload render to add features\n    decorated.getUploadXpath = this.getUploadXpath;\n\n    decorated.cleanData = function () {\n      var self = this;\n      var control = self.getControl();\n      var selected = control.find(\".ui-state-active\");\n      var newValue = self.getValue();\n\n      self.value = self.properties.value = self.selectedValue = { id: \"\", value: \"\" };\n      self.selectedValue = newValue.value;\n      selected.removeClass(\"ui-state-focus ui-selected ui-state-active\");\n    };\n  } });","/*\r\n *   Name: BizAgi Desktop Text Column Decorator Extension\r\n *   Author: Diego Parra\r\n *   Comments:\r\n *   -   This script will redefine the image column decorator class to adjust to desktop devices\r\n */\n\n// Extends from column\nbizagi.rendering.desktop.columns.column.extend(\"bizagi.rendering.desktop.columns.image\", {}, {\n  /*\r\n                                                                                               *   Apply custom overrides to each decorated instance\r\n                                                                                               */\n  applyOverrides: function applyOverrides(decorated) {\n    var self = this;\n    var properties = self.properties;\n    var mode = self.getMode();\n    this._super(decorated);\n\n\n    // Hacks the upload render to add features\n    decorated.getUploadXpath = this.getUploadXpath;\n\n    // hack apply upload plugin method in order to execute it only when the control is inserted in the DOM\n    var originalApplyUploadPlugin = decorated.applyUploadPlugin;\n    if (decorated.properties.flashVersion) {\n      decorated.applyUploadPlugin = function () {\n        var uploadRender = this,\n        control = uploadRender.getControl();\n        originalApplyUploadPlugin.apply(decorated, arguments);\n        control.undelegate(\".ui-bizagi-render-upload-item\", \"mouseover\");\n        control.undelegate(\".ui-bizagi-render-upload-item\", \"mouseout\");\n        $(\".ui-bizagi-render-upload-icon\", control).css(\"display\", \"inline-block\");\n\n        // fix to firefox and chrome\n        $(\".ui-bizagi-render-upload-wrapper object\", control).css({\n          position: 'relative' });\n\n      };\n    }\n\n\n    // Hack renderControl and post render to avoid processing when using inline add\n    var originalRenderControl = decorated.renderControl;\n    var originalInternalPostRender = decorated.internalPostRender;\n    //var originalPostRender = decorated.postRender;\n    decorated.renderControl = function () {\n      return \"\";\n    };\n\n    decorated.internalPostRender = function () {\n      var control = decorated.getControl();\n\n      // Check if its new row\n      if (control.parents(\"tr\").data(\"new-row\")) {\n        // Show message:  Please save record before to upload a file\n        control.html(bizagi.localization.getResource('render-grid-column-upload-mandatory-key'));\n\n        //Set the column with this attribute, so when the control is evaluated in isValid(), validated\n        //also if it is required, and belongs from a new row\n        self.isNewRow = true;\n      } else {\n\n        self.isNewRow = false;\n\n        $.when(originalRenderControl.apply(decorated, arguments)).done(function (html) {\n          if (control.hasClass(\"ui-bizagi-render-control\") ||\n          control.hasClass(\"ui-bizagi-cell-readonly\")) {\n            control.append(html);\n            originalInternalPostRender.apply(decorated, arguments);\n          }\n        });\n      }\n    };\n\n    decorated.buildAddParams = function () {\n      var self = this,\n      properties = self.properties,\n      form = self.getFormContainer();\n\n      var data = [];\n\n      data.push({ key: self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\", value: properties.xpath });\n      data.push({ key: self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\", value: properties.id });\n      data.push({ key: self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\", value: properties.xpathContext });\n      data.push({ key: self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE, value: properties.idPageCache });\n      data.push({ key: self.Class.BA_ACTION_PARAMETER_PREFIX + \"sessionId\", value: form.properties.sessionId });\n      data.push({ key: self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\", value: 'savefile' });\n      properties.contexttype ? data.push({ key: self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\", value: properties.contexttype }) : \"\";\n\n      try {\n        BIZAGI_SESSION_NAME != undefined ? data.push({ key: BIZAGI_SESSION_NAME, value: form.properties.sessionId }) : data.push({ key: \"JSESSIONID\", value: form.properties.sessionId });\n      } catch (e) {\n        data.push({ key: \"JSESSIONID\", value: form.properties.sessionId });\n      }\n\n      return data;\n    };\n\n    decorated.refreshControl = this.refreshControl;\n\n    // Change xpath context\n    if (mode === \"execution\") {\n      if (properties.xpathContext.length > 0) {\n        decorated.properties.xpathContext = properties.xpathContext + \".\" + self.grid.properties.xpath + \"[id=\" + decorated.surrogateKey + \"]\";\n      } else {\n        decorated.properties.xpathContext = self.grid.properties.xpath + \"[id=\" + decorated.surrogateKey + \"]\";\n      }\n    }\n  },\n  /*\r\n     *   Returns the xpath to be used  \r\n     */\n  getUploadXpath: function getUploadXpath() {\n    return this.grid.properties.xpath + \"[id=\" + this.surrogateKey + \"].\" + this.properties.xpath;\n  },\n\n  refreshControl: function refreshControl() {\n    this.grid.refreshCell({ key: this.surrogateKey, column: this.properties.xpath, xpathContext: this.getFormContainer().properties.xpathContext });\n  },\n\n  canBeSent: function canBeSent() {\n    return false;\n  } });","/*\r\n *   Name: Bizagi Desktop Text Column Decorator Extension\r\n *   Author: Diego Parra\r\n *   Comments:\r\n *   -   This script will redefine the text column decorator class to adjust to desktop devices\r\n */\n\n// Extends from column\nbizagi.rendering.desktop.columns.column.extend(\"bizagi.rendering.desktop.columns.uploadecm\", {}, {\n  /*\r\n                                                                                                   *   Apply custom overrides to each decorated instance\r\n                                                                                                   */\n  applyOverrides: function applyOverrides(decorated) {\n    var self = this;\n    this._super(decorated);\n\n    // Hacks the upload render to add features\n    decorated.getUploadXpath = this.getUploadXpath;\n\n    // hack apply upload plugin method in order to execute it only when the control is inserted in the DOM\n    var originalMethod = decorated.applyUploadPlugin;\n    decorated.applyUploadPlugin = function () {\n      var uploadRender = this;\n      var control = uploadRender.getControl();\n\n      originalMethod.apply(decorated, arguments);\n      control.undelegate(\".ui-bizagi-render-upload-item\", \"mouseover\");\n      control.undelegate(\".ui-bizagi-render-upload-item\", \"mouseout\");\n      $(\".ui-bizagi-render-upload-icon\", control).css(\"display\", \"inline-block\");\n\n      // fix to firefox and chrome\n      $(\".ui-bizagi-render-upload-wrapper object\", control).css({\n        position: 'relative' });\n\n    };\n\n    decorated.buildAddParams = function () {\n      var self = this;\n      var properties = self.properties;\n      var data = {};\n\n      var columnXpath = self.getUploadXpath(self.surrogateKey);\n      columnXpath = columnXpath.split(\".\");\n      var xpathContext = self.getXpathContext(self.surrogateKey);\n\n      data.url = properties.addUrl;\n      data.xpath = properties.xpath;\n      data.idAttrib = properties.idAttrib;\n      data.xpathContext = xpathContext;\n      data.metaValues = [];\n      data.idPageCache = properties.idPageCache;\n      data.contexttype = \"entity\";\n      data.validExtensions = properties.validExtensions;\n      data.maxSize = properties.maxSize;\n\n      return data;\n    };\n\n\n    decorated.getXpathContext = function () {\n      var self = this;\n      var xpath = self.grid.properties.xpath + \"[id=\" + self.surrogateKey + \"]\";\n\n      return self.properties.xpathContext.length > 0 ? self.properties.xpathContext + \".\" + xpath : xpath;\n    };\n\n\n  },\n  /*\r\n     *   Returns the in-memory processed element when the element is read-only\r\n     */\n  renderReadOnly: function renderReadOnly(surrogateKey, value) {\n    var self = this;\n    var cell;\n\n    var decorated = this.getDecorated(surrogateKey);\n    decorated.setValue(value);\n    self.setValue(surrogateKey, value);\n    self.setSurrogateKey(surrogateKey);\n\n    self.applyOverrides(decorated);\n    // Set grid and id references to the control in order to render the content\n    decorated.grid = this.grid;\n    decorated.column = this;\n    decorated.surrogateKey = surrogateKey;\n\n    // Set ready deferred\n    self.readyDeferred = new $.Deferred();\n\n    // We need to render the inner control as read-only\n    if (decorated.files.length > 0) {\n      // Changes editable to false to render read-only\n      var editable = this.properties.editable;\n      decorated.properties.editable = false;\n      cell = decorated.render(\"cell.upload\");\n    }\n\n    // Attach rendered handler\n    self.bind(\"rendered\", function () {\n      self.readyDeferred.resolve();\n    });\n\n    return cell;\n  },\n  /*\r\n     *   Post process the element after it has been rendered\r\n     */\n  postRenderReadOnly: function postRenderReadOnly(surrogateKey, cell) {\n    // Call base\n    this._super(surrogateKey, cell);\n\n    var self = this;\n    var decorated = this.getDecorated(surrogateKey);\n    if (decorated.files.length == 0) {\n      var message = self.getResource(\"render-upload-no-files\");\n      $(\".ui-bizagi-cell-readonly\", cell).html(message);\n\n      // Set cell icon to the right\n      var cellIcon = $(\".ui-bizagi-cell-icon\", cell);\n      cellIcon.addClass(\"ui-bizagi-cell-icon-right\");\n    } else {\n      // Just draw render if the cell layout has been filled\n      if (cell && cell.length > 0) {\n        // Apply styles to cell\n        self.applyColumnStyles(cell);\n      }\n    }\n  },\n  /*\r\n     *   Post process the element after it has been rendered\r\n     */\n  postRender: function postRender(surrogateKey, cell) {\n    // Call base\n    this._super(surrogateKey, cell);\n\n    var self = this;\n    var mode = self.getMode();\n\n    this.setSurrogateKey(surrogateKey);\n    if (mode == \"execution\") {\n\n      var decorated = this.getDecorated(surrogateKey);\n      var control = decorated.getControl();\n\n      // Check if its new row\n      if (control.parents(\"tr\").data(\"new-row\")) {\n        // Show message:  Please save record before to upload a file\n        control.html(bizagi.localization.getResource('render-grid-column-upload-mandatory-key'));\n\n        // Set the column with this attribute, so when the control is evaluated in isValid(), validated\n        // also if it is required, and belongs from a new row\n        self.isNewRow = true;\n      } else {\n        self.isNewRow = false;\n      }\n    }\n  },\n  /*\r\n     *   Returns the xpath to be used  \r\n     */\n  getUploadXpath: function getUploadXpath(surrogateKey) {\n    var self = this;\n    surrogateKey = this.surrogateKey || surrogateKey || \"\";\n    var xpath = self.grid.properties.xpath + \"[id=\" + self.surrogateKey + \"].\" + self.properties.xpath;\n\n    return self.properties.xpathContext.length > 0 ? self.properties.xpathContext + \".\" + xpath : xpath;\n  } });","/**\r\n *   Name: Bizagi Desktop Link Column Decorator Extension\r\n *   Author: UI Forms Team\r\n *   -   This script will redefine the link column decorator class to adjust to desktop devices\r\n */\n\n// Extends from column\nbizagi.rendering.desktop.columns.column.extend(\"bizagi.rendering.desktop.columns.link\", {}, {\n\n  /*\r\n                                                                                              *   Apply custom overrides to each decorated instance\r\n                                                                                              */\n  applyOverrides: function applyOverrides(decorated) {\n    var self = this;\n    this._super(decorated);\n    decorated.getControl = this.getControl;\n    // Hacks the getControl method in the decorated render to add features\n    if (decorated.properties.type === \"columnFormLink\") {\n      decorated.getFormLinkXpath = this.getFormLinkXpath;\n    }\n    // Hack renderControl and post render to avoid processing when using inline add\n    var originalRenderControl = decorated.renderControl;\n    var originalInternalPostRender = decorated.internalPostRender;\n\n    decorated.internalPostRender = function () {\n      var control = decorated.getControl();\n      // Check if its new row\n      if (control.parents(\"tr\").data(\"new-row\")) {\n        // Show message:  Please save record before to upload a file\n        control.html('<label style=\"font-weight: normal;\">' + bizagi.localization.getResource('render-grid-column-button-mandatory-key') + '</label>');\n        //Set the column with this attribute, so when the control is evaluated in isValid(), validated\n        //also if it is required, and belongs from a new row\n        self.isNewRow = true;\n      } else {\n        self.isNewRow = false;\n        $.when(originalRenderControl.apply(decorated, arguments)).done(function (html) {\n          if (control.hasClass(\"ui-bizagi-render-control\") ||\n          control.hasClass(\"ui-bizagi-cell-readonly\")) {\n            originalInternalPostRender.apply(decorated, arguments);\n          }\n        });\n      }\n    };\n  },\n\n  /*\r\n     *   Template method to get the control element\r\n     *   This will execute under the decorated element context\r\n     */\n  getControl: function getControl() {\n    var self = this;\n    var properties = self.properties;\n    var controlElement = self.element || self.observableElement;\n\n    if (properties.editable) {\n      return $(\".ui-bizagi-render-control\", controlElement);\n    } else {\n      if ($(\".ui-bizagi-cell-readonly\", controlElement).length > 0) {\n        return $(\".ui-bizagi-cell-readonly\", controlElement);\n      } else {\n        return $(\".ui-bizagi-render-control\", controlElement);\n      }\n    }\n  },\n\n  /*\r\n     *   Returns the in-memory processed element\r\n     *   so the caller could append it to any place\r\n     */\n  render: function render(surrogateKey, value, tableCell, caller) {\n    var self = this;\n    var decorated = self.getDecorated(surrogateKey);\n\n    // Change the xpath context\n    decorated.properties.xpathContext = self.grid.properties.xpath + \"[id=\" + surrogateKey + \"]\";\n\n    if (self.grid.properties.xpathContext && decorated.properties.xpathContext.indexOf(self.grid.properties.xpathContext) == -1)\n    decorated.properties.xpathContext = self.grid.properties.xpathContext + \".\" + decorated.properties.xpathContext;\n\n    // Render the control\n    var result = this._super(surrogateKey, value, tableCell, caller);\n\n    return result;\n  },\n  /*\r\n     *   Returns the cell html to be inserted in the table\r\n     */\n  renderReadOnly: function renderReadOnly(surrogateKey, value, tableCell) {\n    var self = this;\n\n    // Render the control editable\n    if (typeof self.properties.canBeSaved == \"undefined\") self.properties.canBeSaved = self.properties.editable == true;\n    var result = this.render(surrogateKey, value, tableCell, \"CALLER_RENDER_READ_ONLY_COLUMNSLINK\");\n\n    return result;\n  },\n\n  /*\r\n     *   Post process the element after it has been rendered\r\n     */\n  postRenderReadOnly: function postRenderReadOnly(surrogateKey, cell, tableCell) {\n    var self = this;\n\n    // Render the control editable\n    this.postRender(surrogateKey, cell, tableCell);\n  },\n\n  /*\r\n     *   Get Form Link xpath to use\r\n     */\n  getFormLinkXpath: function getFormLinkXpath() {\n    // Calculate layout properties to maximized property\n    this.properties.maximized = bizagi.util.parseBoolean(this.properties.maximized) != null ? bizagi.util.parseBoolean(this.properties.maximized) : false;\n    this.calculateInitialLayoutProperties();\n\n    if (!this.properties.xpath) {\n      return;\n    }\n    return this.properties.xpath;\n  } });","/**\r\n * Grid control Column Button\r\n *\r\n * @author Edward Morales\r\n */\nbizagi.rendering.desktop.columns.column.extend(\"bizagi.rendering.desktop.columns.button\", {}, {\n  applyOverrides: function applyOverrides(decorated) {\n    var self = this;\n    var properties = self.properties;\n    var mode = self.getMode();\n    this._super(decorated);\n\n    decorated.configureHandlers = function () {\n      var self = this;\n      var control = decorated.getControl();\n      var button = $(\":button\", control);\n\n      button.bind(\"click\", function (e) {\n        decorated.processButton.apply(self);\n\n      });\n    };\n  },\n\n  /*\r\n     *   Post process the element after it has been rendered\r\n     */\n  postRender: function postRender(surrogateKey, cell) {\n    // Call base\n    this._super(surrogateKey, cell);\n\n    var self = this;\n    var mode = self.getMode();\n\n    this.setSurrogateKey(surrogateKey);\n    if (mode == \"execution\") {\n\n      var decorated = this.getDecorated(surrogateKey);\n      var control = decorated.getControl();\n\n      // Check if its new row\n      if (control.parents(\"tr\").data(\"new-row\")) {\n        // Show message:  Please save record before to click the button\n        control.html(bizagi.localization.getResource('render-grid-column-button-mandatory-key'));\n\n        //Set the column with this attribute, so when the control is evaluated in isValid(), validated\n        //also if it is required, and belongs from a new row\n        self.isNewRow = true;\n      } else {\n        self.isNewRow = false;\n      }\n    }\n  },\n\n  /*\r\n     *   Post process the element after it has been rendered\r\n     */\n  postRenderReadOnly: function postRenderReadOnly(surrogateKey, cell) {\n    var self = this;\n    var properties = self.properties;\n\n    // Call base\n    this._super(surrogateKey, cell);\n\n  },\n  /*\r\n     *   Returns the in-memory processed element when the element is read-only\r\n     */\n  renderReadOnly: function renderReadOnly(surrogateKey, value) {\n    var self = this;\n    var cell;\n\n    var decorated = this.getDecorated(surrogateKey);\n    self.setSurrogateKey(surrogateKey);\n\n    self.applyOverrides(decorated);\n    // Set grid and id references to the control in order to render the content\n    decorated.grid = this.grid;\n    decorated.column = this;\n    decorated.surrogateKey = surrogateKey;\n\n    // Set ready deferred\n    self.readyDeferred = new $.Deferred();\n\n    // We need to render the inner control as read-only\n\n    // Changes editable to false to render read-only\n    var editable = this.properties.editable;\n    decorated.properties.editable = false;\n    cell = decorated.render(\"cell.button\");\n    decorated.properties.editable = editable;\n\n\n    // Attach rendered handler\n    self.bind(\"rendered\", function () {\n      self.readyDeferred.resolve();\n    });\n\n    return cell;\n  } });","/**\r\n *   Name: Bizagi Desktop Actions Column Decorator Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the text column decorator class to adjust to desktop devices\r\n */\n\n// Extends from column\nbizagi.rendering.desktop.columns.column.extend(\"bizagi.rendering.desktop.columns.actions\", {}, {\n\n  /*\r\n                                                                                                  *   Post process the element after it has been rendered\r\n                                                                                                  */\n  postRender: function postRender(surrogateKey, cell) {\n    // Call base\n    var self = this;\n    var mode = self.getMode();\n\n    this._super(surrogateKey, cell);\n\n    self.configureHandlersActions(surrogateKey);\n\n    $(\".ui-bizagi-render\", cell).css(\"overflow\", \"auto\");\n\n\n    if (mode == \"execution\") {\n      var decorated = this.getDecorated(surrogateKey);\n      var control = decorated.getControl();\n      // Check if its new row\n      if (control.parents(\"tr\").data(\"new-row\")) {\n        control.html(self.renderDraftControl());\n      }\n    }\n\n  },\n\n  /**\r\n      * Configure additional Handlers\r\n      * @param surrogateKey\r\n      */\n  configureHandlersActions: function configureHandlersActions(surrogateKey) {\n    var self = this;\n    var decorated = self.getDecorated(surrogateKey);\n    var viewMore = decorated.element.find(\".gn-bz-grid__more\");\n    var items = [];\n\n    // Add selection events for the draft rows\n    decorated.element.on(\"click\", \".gn-bz-grid__delete\", function (events) {\n      var $context = $(this).closest(\"tr[data-new-row='true']\");\n\n      $context.trigger(\"delete-row\");\n    });\n\n    if (self.grid.columnActionParams.allowDetail) {\n      items.push({\n        name: self.parent.properties.detailLabel,\n        icon: \"icon-detail\",\n        fn: function fn() {\n          self.grid.showFormDetails(surrogateKey);\n        } });\n\n    }\n\n    if (self.grid.columnActionParams.allowEdit && self.grid.columnActionParams.withEditForm) {\n      items.push({\n        name: self.parent.properties.editLabel,\n        icon: \"icon-edit\",\n        fn: function fn() {\n          self.grid.editRow(surrogateKey);\n        } });\n\n    }\n\n    if (self.grid.columnActionParams.allowDelete) {\n      items.push({\n        name: self.parent.properties.deleteLabel,\n        icon: \"icon-delete\",\n        fn: function fn() {\n          self.grid.deleteRow(surrogateKey);\n        } });\n\n    }\n\n    viewMore.overflowMenu({ items: items });\n  },\n\n  renderDraftControl: function renderDraftControl() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"gridActions-delete\");\n\n    // Render template\n    var html = $.fasttmpl(template, {});\n    return html;\n  } });","/*\r\n *   Name: BizAgi Desktop Actions Column Decorator Extension\r\n *   Author: Cristian Olaya\r\n *           Ivn Ricardo Taimal\r\n *   Comments:\r\n *   -   This script will redefine the text column decorator class to adjust to desktop devices\r\n */\n\n// Extends from column\nbizagi.rendering.desktop.columns.column.extend(\"bizagi.rendering.desktop.columns.exclusiveCheck\", {}, {\n\n  /*\r\n                                                                                                         *   Returns the in-memory processed element\r\n                                                                                                         *   so the caller could append it to any place\r\n                                                                                                         */\n  render: function render(surrogateKey, value) {\n\n    var self = this;\n    // Set flag to check when a render has changed\n    self.changed = false;\n    var properties = self.properties;\n    var gridChanges = self.grid.changes;\n    // Set grid and id references to the control in order to render the content\n    var decorated = self.getDecorated(surrogateKey);\n    decorated.grid = self.grid;\n    decorated.column = this;\n    decorated.surrogateKey = surrogateKey;\n\n    // Set cell value\n\n    if (self.getMode() == \"execution\") {\n      self.setValue(surrogateKey, value || false);\n      var tmpCheck = self.grid.enabledChecks[self.properties.xpath].find(function (el) {\n        return el.id == surrogateKey;\n      });\n      if (typeof tmpCheck == \"undefined\") {\n        self.grid.enabledChecks[self.properties.xpath].push({\n          id: surrogateKey,\n          value: value || false,\n          originalValue: value || false,\n          changed: false });\n\n      }\n    }\n\n    if (value == null) {\n      self.changed = true;\n      var obj = {};\n      obj[self.properties.xpath] = self.getValue(surrogateKey);\n      if (bizagi.util.isEmpty(gridChanges[surrogateKey])) gridChanges[surrogateKey] = {};\n      gridChanges[surrogateKey] = $.extend({}, gridChanges[surrogateKey], obj);\n    }\n\n    // Override render properties\n    self.overrideDecoratedRenderProperties(surrogateKey);\n\n\n    // If the render is not editable return the readonly version of the column\n    if (!properties.editable)\n    return self.renderReadOnly.apply(self, arguments);\n\n    // Returns the decorated render inside a custom layout for columns\n    self.readyDeferred = new $.Deferred();\n    var cell = decorated.render(\"cell\");\n\n    // If the render changes set the flag on\n    decorated.bind(\"renderchange\", function () {\n      self.changed = true;\n      var checkList = self.grid.enabledChecks[self.properties.xpath];\n\n      checkList.forEach(function (el) {\n        if (el.id == surrogateKey) {\n          el.value = decorated.value;\n          el.changed = true;\n        } else\n        if (decorated.value && el.value) {\n          var tmpDecorated = self.getDecorated(el.id);\n          tmpDecorated.setDisplayValue(false);\n          self.setValue(el.id, false);\n          el.value = false;\n          el.changed = true;\n        }\n      });\n\n      var simpleXpathArray = self.properties.xpath.split(\".\");\n      self.grid.exclusiveChanges[self.properties.xpath] = {\n        xpath: self.properties.xpath,\n        simpleXpath: simpleXpathArray[simpleXpathArray.length - 1],\n        value: self.getValue(surrogateKey),\n        key: surrogateKey };\n\n    });\n\n    self.bind(\"rendered\", function () {\n      self.readyDeferred.resolve();\n    });\n\n\n    return cell;\n  },\n\n  /*\r\n      *   Post process the element after it has been rendered\r\n      */\n  postRender: function postRender(surrogateKey, cell) {\n    // Call base\n    this._super(surrogateKey, cell);\n\n    var self = this;\n    var mode = self.getMode();\n\n    this.setSurrogateKey(surrogateKey);\n    if (mode == \"execution\") {\n\n      var decorated = this.getDecorated(surrogateKey);\n      var control = decorated.getControl();\n\n      // Check if its new row\n      if (control.parents(\"tr\").data(\"new-row\")) {\n        // Show a disabled check box\n        control.html('<input type=\"checkbox\" name=\"exclusiveCheck\" title=\"' + bizagi.localization.getResource('render-grid-column-button-mandatory-key') + '\" disabled=\"disabled\" style=\"width:16.5px;height:16.5px;\">');\n\n        //Set the column with this attribute, so when the control is evaluated in isValid(), validated\n        //also if it is required, and belongs from a new row\n        self.isNewRow = true;\n      } else {\n        self.isNewRow = false;\n      }\n    }\n  },\n\n  isValueValid: function isValueValid(surrogateKey, value, invalidElements, propertyOverrides) {\n    var self = this;\n    self.grid.enabledChecks = self.grid.enabledChecks || {};\n    var checkedValues = (self.grid.enabledChecks[self.properties.xpath] || []).filter(function (el) {\n      return el.value;\n    });\n\n    if (checkedValues.length > 1) {\n      var message = self.getResource(\"render-exclusive-column-check-error\").replaceAll(\"#label#\", self.properties.displayName);\n      /* var messageData = {xpath: self.properties.xpath, message: message}; */\n      invalidElements.push(message);\n      return false;\n    } else {\n      return true;\n    }\n\n  } });","/**\r\n *   Name: Bizagi Desktop Column Decorator Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the column decorator class to adjust to desktop devices\r\n */\n\n// Extends from columns desktop base\nbizagi.rendering.desktop.columns.column.extend(\"bizagi.rendering.desktop.columns.readonly\", bizagi.rendering.columns.readonly.prototype);\n// Extends itself\nbizagi.rendering.desktop.columns.readonly.extend(\"bizagi.rendering.desktop.columns.readonly\", {}, {});","/**\r\n *   Name: Bizagi Render Hidden Column Decorator Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the hidden render class to adjust to desktop devices\r\n */\n\n// Extends from columns desktop base\nbizagi.rendering.desktop.columns.column.extend(\"bizagi.rendering.desktop.columns.hidden\", bizagi.rendering.columns.hidden.prototype);\n// Extends itself\nbizagi.rendering.desktop.columns.hidden.extend(\"bizagi.rendering.desktop.columns.hidden\", {}, {});","/*\r\n *   Name: Bizagi Base Render Factory\r\n *   Author: Diego Parra\r\n *   Comments:\r\n *   -   This script will define an abstract render factory in order to do common stuff for all device factories\r\n */\n\n$.Class.extend(\"bizagi.rendering.base.factory\", {}, {\n  /* \r\n                                                      *   Constructor\r\n                                                      */\n  init: function init(dataService) {\n    this.templates = {};\n    this.dataService = dataService;\n  },\n\n  /**\r\n     * Load client resources in order to override a default behavior\r\n     */\n  loadOverrides: function loadOverrides() {\n  },\n  /*\r\n     *   This function will load asynchronous stuff needed in the module\r\n     */\n  initAsyncStuff: function initAsyncStuff() {\n    return $.when.apply($, [this.loadOverrides(), this.loadTemplates()]);\n  },\n  /*\r\n     *   Load all the templates used for rendering\r\n     */\n  loadTemplates: function loadTemplates() {\n  },\n  /*\r\n     *   Load one template and save it internally\r\n     */\n  loadTemplate: function loadTemplate(template, templateDestination) {\n    var self = this;\n\n    // Go fetch the template\n    return bizagi.templateService.getTemplate(templateDestination, template).\n    done(function (resolvedTemplate) {\n      self.templates[template] = resolvedTemplate;\n    });\n  },\n  /*\r\n     * Returns a common  used template for the framework\r\n     */\n  getCommonTemplate: function getCommonTemplate(template) {\n    return this.templates[template];\n  },\n  /*\r\n     *   Returns the appropiate container based on the container type\r\n     */\n  getContainer: function getContainer(params) {\n    // TODO: REMOVE IMPLEMENTATION\n\n    var type = params.type;\n    var data = params.data;\n    var containerParams = $.extend(params, {\n      renderFactory: this,\n      dataService: params.dataService || this.dataService });\n\n\n    if (type == \"form\") {\n      return new bizagi.rendering.form(containerParams);\n    }\n\n    if (type == \"mobileform\") {\n      return new bizagi.rendering.mobileform(containerParams);\n    }\n\n    if (type == \"template\") {\n      return new bizagi.rendering.formTemplate(containerParams);\n    }\n\n    if (type == \"queryForm\") {\n      return new bizagi.rendering.queryForm(containerParams);\n    }\n\n    if (type == \"layout\") {\n      return new bizagi.rendering.layout(containerParams);\n    }\n\n    if (type == \"usersForm\") {\n      return new bizagi.rendering.usersForm(containerParams);\n    }\n\n    if (type == \"panel\") {\n      return new bizagi.rendering.panel(containerParams);\n    }\n\n    if (type == \"section\") {\n      return new bizagi.rendering.section(containerParams);\n    }\n\n    if (type == \"contentPanel\" || type == \"contentpanel\") {\n      return new bizagi.rendering.contentPanel(containerParams);\n    }\n\n    if (type.toLowerCase() == \"nestedform\") {\n      return new bizagi.rendering.nestedForm(containerParams);\n    }\n\n    if (type == \"tab\") {\n      return new bizagi.rendering.tab(containerParams);\n    }\n\n    if (type == \"tabItem\" || type == \"tabitem\") {\n      return new bizagi.rendering.tabItem(containerParams);\n    }\n\n    if (type == \"horizontal\") {\n      return new bizagi.rendering.horizontal(containerParams);\n    }\n\n    if (type == \"accordion\") {\n      return new bizagi.rendering.accordion(containerParams);\n    }\n\n    if (type == \"accordionItem\") {\n      return new bizagi.rendering.accordionItem(containerParams);\n    }\n\n    if (type == \"group\") {\n      return new bizagi.rendering.group(containerParams);\n    }\n\n    if (type == \"mobilegroup\") {\n      return new bizagi.rendering.mobilegroup(containerParams);\n    }\n\n    if (type == \"searchForm\") {\n      containerParams.context = \"search\";\n      containerParams.contexttype = \"metadata\";\n      return new bizagi.rendering.searchForm(containerParams);\n    }\n\n    // No type supported\n    bizagi.log(type + \" not supported in render factory\", data, \"error\");\n    return null;\n  },\n  /*\r\n     *   Returns the appropiate render based on the render type\r\n     */\n  getRender: function getRender(params) {\n\n    // TODO: REMOVE IMPLEMENTATION\n    var type = params.type;\n    var data = params.data;\n    var renderParams = $.extend(params, {\n      renderFactory: this,\n      dataService: params.dataService || this.dataService });\n\n\n    if (!type)\n    type = \"label\";\n\n    if (type == \"text\") {\n      var isExtended = bizagi.util.parseBoolean(data.properties.isExtended) || false;\n\n      if (isExtended) {\n        // Creates one extended render\n        return new bizagi.rendering.extendedText(renderParams);\n      }\n\n      // Creates one normal text render\n      return new bizagi.rendering.text(renderParams);\n    }\n    if (type == \"mobiletext\") {\n      return new bizagi.rendering.mobiletext(renderParams);\n    }\n\n    if (type == \"association\") {\n      return new bizagi.rendering.association(renderParams);\n    }\n\n    if (type == \"label\") {\n      return new bizagi.rendering.label(renderParams);\n    }\n\n    if (type == \"hidden\") {\n      return new bizagi.rendering.hidden(renderParams);\n    }\n\n    if (type == \"number\") {\n      return new bizagi.rendering.number(renderParams);\n    }\n\n    if (type == \"money\") {\n      return new bizagi.rendering.money(renderParams);\n    }\n\n    if (type == \"date\") {\n      return new bizagi.rendering.date(renderParams);\n    }\n\n    if (type == \"boolean\") {\n      var display = data.properties.display || \"option\";\n\n      if (display == \"check\") {\n        // Creates one check render\n        return new bizagi.rendering.check(renderParams);\n      }\n\n      // Creates one yes-no render\n      return new bizagi.rendering.yesno(renderParams);\n    }\n\n    if (type == \"combo\") {\n      return new bizagi.rendering.combo(renderParams);\n    }\n\n    if (/^cascadingcombo$/i.test(type)) {\n      return new bizagi.rendering.cascadingCombo(renderParams);\n    }\n\n    if (type == \"list\") {\n      return new bizagi.rendering.list(renderParams);\n    }\n\n    if (type == \"multiSelect\") {\n      return new bizagi.rendering.multiSelect(renderParams);\n    }\n\n    if (type == \"radio\") {\n      return new bizagi.rendering.radio(renderParams);\n    }\n\n    if (type == \"image\") {\n      // Override for test purposes\n      return new bizagi.rendering.image(renderParams);\n    }\n    if (type == \"uploadecm\") {\n      // Check if its ECM file            \n      return new bizagi.rendering.ecm(renderParams);\n    }\n\n    if (type == \"upload\") {\n      return new bizagi.rendering.upload(renderParams);\n    }\n    if (type == \"grid\") {\n      return new bizagi.rendering.grid(renderParams);\n    }\n\n    if (type == \"groupedgrid\") {\n      return new bizagi.rendering.grid(renderParams);\n    }\n\n    if (type == \"search\") {\n      return new bizagi.rendering.search(renderParams);\n    }\n\n    if (type == \"suggest\") {\n      renderParams.data.properties.enableQuerySuggestBehavior = true;\n      return new bizagi.rendering.search(renderParams);\n    }\n\n    if (type == \"searchList\") {\n      return new bizagi.rendering.searchList(renderParams);\n    }\n\n    if (type == \"letter\") {\n      return new bizagi.rendering.letter(renderParams);\n    }\n\n    if (type == \"button\") {\n      return new bizagi.rendering.button(renderParams);\n    }\n\n    if (type == \"formLink\") {\n      return new bizagi.rendering.formLink(renderParams);\n    }\n\n    if (type == \"link\") {\n      return new bizagi.rendering.link(renderParams);\n    }\n\n    if (type == \"layoutImage\") {\n      return new bizagi.rendering.layoutImage(renderParams);\n    }\n\n    if (type == \"layoutLink\") {\n      return new bizagi.rendering.layoutLink(renderParams);\n    }\n\n    if (type == \"layoutLabel\") {\n      return new bizagi.rendering.layoutLabel(renderParams);\n    }\n\n    if (type == \"layoutText\") {\n      return new bizagi.rendering.layoutText(renderParams);\n    }\n\n    if (type == \"layoutDateTime\") {\n      return new bizagi.rendering.layoutDateTime(renderParams);\n    }\n\n    if (type == \"layoutNumber\") {\n      return new bizagi.rendering.layoutNumber(renderParams);\n    }\n\n    if (type == \"layoutMoney\") {\n      return new bizagi.rendering.layoutMoney(renderParams);\n    }\n\n    if (type == \"layoutPlaceholder\") {\n      return new bizagi.rendering.layoutPlaceholder(renderParams);\n    }\n\n    if (type == \"actionLauncher\") {\n      return new bizagi.rendering.actionLauncher(renderParams);\n    }\n\n    if (type == \"layoutBoolean\") {\n      return new bizagi.rendering.layoutBoolean(renderParams);\n    }\n\n    if (type == \"layoutUpload\") {\n      return new bizagi.rendering.layoutUpload(renderParams);\n    }\n\n    if (type == \"entityTemplate\") {\n      return new bizagi.rendering.entityTemplate(renderParams);\n    }\n\n    if (type == \"polymorphicLauncher\") {\n      return new bizagi.rendering.polymorphicLauncher(renderParams);\n    }\n\n    if (type == \"userfield\") {\n      return new bizagi.rendering.userfieldWrapper(renderParams);\n    }\n\n    // Check search renders (starts with \"search\")\n    if (type.indexOf(\"search\") == 0) {\n      return this.getSearchRender(params);\n    }\n\n    if (type.indexOf(\"query\") == 0) {\n      return this.getQueryRender(params);\n    }\n\n    if (type == \"document\") {\n      return new bizagi.rendering.document(renderParams);\n    }\n\n    if (type == \"image\") {\n      return new bizagi.rendering.image(renderParams);\n    }\n    if (type == \"fileprint\") {\n      return new bizagi.rendering.fileprint(renderParams);\n    }\n    if (type == \"geolocation\") {\n      return new bizagi.rendering.geolocation(renderParams);\n    }\n\n    if (type == \"collectionnavigator\") {\n      return new bizagi.rendering.collectionnavigator(renderParams);\n    }\n\n    if (type == \"getUser\") {\n      return new bizagi.rendering.getUser(renderParams);\n    }\n\n    if (type == \"rangeDate\") {\n      return new bizagi.rendering.rangeDate(renderParams);\n    }\n\n    if (type == \"rangeMoney\") {\n      return new bizagi.rendering.rangeMoney(renderParams);\n    }\n\n    if (type == \"rangeNumber\") {\n      return new bizagi.rendering.rangeNumber(renderParams);\n    }\n\n    if (type == \"activityCheckList\") {\n      return new bizagi.rendering.activityCheckList(renderParams);\n    }\n\n    // No type supported\n    bizagi.log(type + \" not supported in render factory\", data, \"error\");\n    return null;\n  },\n  /*\r\n     *   Returns the appropiate column based on the render type\r\n     */\n  getColumn: function getColumn(params) {\n    var type = params.type;\n    var data = params.data;\n    var columnParams = $.extend(params, {\n      renderFactory: this,\n      dataService: params.dataService || this.dataService,\n      singleInstance: bizagi.util.isEmpty(params.singleInstance) ? true : params.singleInstance });\n\n\n    if (type == \"columnText\") {\n      var isExtended = bizagi.util.parseBoolean(data.properties.isExtended) || false;\n\n      if (isExtended) {\n        // Creates one extended render\n        columnParams.decorated = bizagi.rendering.extendedText;\n      } else {\n        // Creates one normal text render\n        columnParams.decorated = bizagi.rendering.text;\n      }\n      return new bizagi.rendering.columns.text(columnParams);\n    }\n\n    if (type == \"columnSearchList\") {\n      columnParams.decorated = bizagi.rendering.searchList;\n      return new bizagi.rendering.columns.searchList(columnParams);\n    }\n\n    if (type == \"columnNumber\") {\n      columnParams.decorated = bizagi.rendering.number;\n      return new bizagi.rendering.columns.number(columnParams);\n    }\n\n    if (type == \"columnMoney\") {\n      columnParams.decorated = bizagi.rendering.money;\n      return new bizagi.rendering.columns.number(columnParams);\n    }\n\n    if (type == \"columnDate\") {\n      columnParams.decorated = bizagi.rendering.date;\n      return new bizagi.rendering.columns.date(columnParams);\n    }\n\n    if (type == \"columnBoolean\") {\n      var display = data.properties.display || \"option\";\n\n      if (display == \"check\") {\n        // Creates one check render\n        columnParams.decorated = bizagi.rendering.check;\n        if (params.data.properties.isExclusive) {\n          return new bizagi.rendering.columns.exclusiveCheck(columnParams);\n        }\n      } else {\n        // Creates one yes-no render\n        columnParams.decorated = bizagi.rendering.yesno;\n      }\n      return new bizagi.rendering.columns.column(columnParams);\n    }\n\n    if (type == \"columnCombo\") {\n      columnParams.decorated = bizagi.rendering.combo;\n      return new bizagi.rendering.columns.combo(columnParams);\n    }\n\n    if (type == \"columnRadio\") {\n      columnParams.decorated = bizagi.rendering.radio;\n      return new bizagi.rendering.columns.radio(columnParams);\n    }\n\n    if (type == \"columnList\") {\n      columnParams.decorated = bizagi.rendering.list;\n      return new bizagi.rendering.columns.list(columnParams);\n    }\n\n    if (type == \"columnHidden\") {\n      columnParams.decorated = bizagi.rendering.hidden;\n      return new bizagi.rendering.columns.column(columnParams);\n    }\n\n    if (type == \"columnUpload\") {\n      columnParams.decorated = bizagi.rendering.upload;\n      return new bizagi.rendering.columns.upload(columnParams);\n    }\n\n    if (type == \"columnImage\") {\n      columnParams.decorated = bizagi.rendering.image;\n      return new bizagi.rendering.columns.image(columnParams);\n    }\n\n    if (type == \"columnUploadEcm\") {\n      columnParams.decorated = bizagi.rendering.ecm;\n      return new bizagi.rendering.columns.uploadecm(columnParams);\n    }\n    if (type == \"columnLink\") {\n      columnParams.decorated = bizagi.rendering.link;\n      return new bizagi.rendering.columns.link(columnParams);\n    }\n\n    if (type == \"columnFormLink\") {\n      columnParams.decorated = bizagi.rendering.formLink;\n      return new bizagi.rendering.columns.link(columnParams);\n    }\n\n    if (type == \"columnUserfield\") {\n      columnParams.decorated = bizagi.rendering.userfieldWrapper;\n      return new bizagi.rendering.columns.column(columnParams);\n    }\n\n    if (type == \"columnSearch\") {\n      columnParams.decorated = bizagi.rendering.search;\n      return new bizagi.rendering.columns.search(columnParams);\n    }\n\n    if (type == \"columnLabel\") {\n      columnParams.decorated = bizagi.rendering.label;\n      return new bizagi.rendering.columns.column(columnParams);\n    }\n\n    if (type == \"columnReadonly\") {\n      columnParams.decorated = bizagi.rendering.label;\n      return new bizagi.rendering.columns.readonly(columnParams);\n    }\n\n    if (type == \"columnDocument\") {\n      columnParams.decorated = bizagi.rendering.document;\n      return new bizagi.rendering.columns.document(columnParams);\n    }\n\n    if (type == \"columnLetter\") {\n      columnParams.decorated = bizagi.rendering.letter;\n      return new bizagi.rendering.columns.letter(columnParams);\n    }\n\n    if (type == \"columnButton\") {\n      columnParams.decorated = bizagi.rendering.button;\n      return new bizagi.rendering.columns.button(columnParams);\n    }\n\n    // No type supported\n    bizagi.log(type + \" not supported in render factory\", data, \"error\");\n    return null;\n  },\n  /*\r\n     *   Returns the appropiate search render based on the type\r\n     */\n  getSearchRender: function getSearchRender(params) {\n    var type = params.type;\n    var data = params.data;\n    var searchParams = $.extend(params, {\n      renderFactory: this,\n      dataService: params.dataService || this.dataService });\n\n\n    if (type == \"searchText\") {\n      var isExtended = bizagi.util.parseBoolean(data.properties.isExtended) || false;\n\n      if (isExtended) {\n        // Creates one extended render\n        return new bizagi.rendering.extendedText(searchParams);\n      }\n\n      // Creates one normal text render\n      return new bizagi.rendering.text(searchParams);\n    }\n\n    if (type == \"searchBoolean\") {\n      var display = data.properties.display || \"option\";\n\n      if (display == \"check\") {\n        // Creates one check render\n        return new bizagi.rendering.check(searchParams);\n      }\n\n      // Creates one yes-no render\n      return new bizagi.rendering.yesno(searchParams);\n    }\n\n    if (type == \"searchNumber\") {\n      if (data.properties.dataType == 29) {\n        //Creates a Scientific Notation render\n        return new bizagi.rendering.numberScientificNotation(searchParams);\n      }\n      return new bizagi.rendering.number(searchParams);\n    }\n\n    if (type == \"searchMoney\") {\n      return new bizagi.rendering.money(searchParams);\n    }\n\n    if (type == \"searchDate\") {\n      return new bizagi.rendering.date(searchParams);\n    }\n\n    if (type == \"searchCombo\") {\n      return new bizagi.rendering.combo(searchParams);\n    }\n\n    if (type == \"searchSuggest\") {\n      return new bizagi.rendering.search(searchParams);\n    }\n\n    if (type == \"searchLabel\") {\n      return new bizagi.rendering.label(searchParams);\n    }\n\n    // No type supported\n    bizagi.log(type + \" not supported in render factory\", data, \"error\");\n    return null;\n  },\n  /*\r\n     *   Returns the appropiate search render based on the type\r\n     */\n  getQueryRender: function getQueryRender(params) {\n    var type = params.type;\n    var data = params.data;\n    var searchParams = $.extend(params, {\n      renderFactory: this,\n      dataService: params.dataService || this.dataService });\n\n\n    if (type == \"queryText\") {\n      var isExtended = bizagi.util.parseBoolean(data.properties.isExtended) || false;\n\n      if (isExtended) {\n        // Creates one extended render\n        return new bizagi.rendering.queryExtendedText(searchParams);\n      }\n\n      // Creates one normal text render\n      return new bizagi.rendering.queryText(searchParams);\n    }\n\n    if (type == \"queryBoolean\") {\n      var display = data.properties.display || \"option\";\n\n      if (display == \"check\") {\n        // Creates one check render\n        return new bizagi.rendering.queryCheck(searchParams);\n      }\n\n      // Creates one yes-no render\n      return new bizagi.rendering.queryYesNo(searchParams);\n    }\n\n    if (type == \"queryNumber\") {\n\n      return new bizagi.rendering.queryNumber(searchParams);\n    }\n\n    if (type == \"queryMoney\") {\n      return new bizagi.rendering.queryMoney(searchParams);\n    }\n\n    if (type == \"queryDate\") {\n      return new bizagi.rendering.queryDate(searchParams);\n    }\n\n    if (type == \"queryCombo\") {\n      return new bizagi.rendering.queryCombo(searchParams);\n    }\n\n    if (type == \"queryCascadingCombo\") {\n      return new bizagi.rendering.queryCascadingCombo(searchParams);\n    }\n\n    if (type == \"querySuggest\") {\n      return new bizagi.rendering.querySuggest(searchParams);\n    }\n\n    if (type == \"queryLabel\") {\n      return new bizagi.rendering.queryLabel(searchParams);\n    }\n\n    if (type == \"queryList\") {\n      return new bizagi.rendering.queryList(searchParams);\n    }\n\n    if (type == \"queryMultiSelect\") {\n      return new bizagi.rendering.queryMultiSelect(searchParams);\n    }\n\n    if (type == \"querySearch\") {\n      return new bizagi.rendering.querySearch(searchParams);\n    }\n\n    if (type == \"queryRadio\") {\n      return new bizagi.rendering.queryRadio(searchParams);\n    }\n\n    if (type == \"queryState\") {\n      return new bizagi.rendering.queryState(searchParams);\n    }\n\n    if (type == \"queryCaseState\") {\n      return new bizagi.rendering.queryCaseState(searchParams);\n    }\n\n    if (type == \"queryProcess\") {\n      return new bizagi.rendering.queryProcess(searchParams);\n    }\n\n    if (type == \"querySearchUser\") {\n      return new bizagi.rendering.querySearchUser(searchParams);\n    }\n\n    if (type == \"queryHidden\") {\n      return new bizagi.rendering.hidden(searchParams);\n    }\n\n    // No type supported\n    bizagi.log(type + \" not supported in render factory\", data, \"error\");\n    return null;\n  },\n  /*\r\n     *   Method to fetch templates from a private dictionary\r\n     */\n  getTemplate: function getTemplate(template) {\n    var self = this;\n    return self.templates[template];\n  } });","/*\r\n *   Name: Bizagi Desktop Render Factory\r\n *   Author: Diego Parra\r\n *   Comments:\r\n *   -   This script will define a render factory to create desktop versions of each render type\r\n */\n\nbizagi.rendering.base.factory.extend(\"bizagi.rendering.desktop.factory\", {}, {\n  /**\r\n                                                                                * Constructor\r\n                                                                                */\n  init: function init(dataService) {\n    // Call base\n    this._super(dataService);\n\n    // Desktop implementation\n    this.printVersion = false;\n  },\n\n  /**\r\n      * Load all the templates used for rendering\r\n      */\n  loadTemplates: function loadTemplates() {\n    var self = this;\n    var defer = new $.Deferred();\n\n    $.when(\n    // Icons\n    self.loadTemplate(\"icons\", bizagi.getTemplate(\"common.bizagi.rendering.icons\")),\n\n    // Common\n    self.loadTemplate(\"form-error\", bizagi.getTemplate(\"bizagi.rendering.desktop.form-error\")),\n    self.loadTemplate(\"form-waiting\", bizagi.getTemplate(\"bizagi.rendering.desktop.form-waiting\")),\n    self.loadTemplate(\"info-message\", bizagi.getTemplate(\"common.bizagi.desktop.info-message\")),\n    // Containers\n    self.loadTemplate(\"form\", bizagi.getTemplate(\"bizagi.rendering.desktop.form\") + \"#ui-bizagi-render-form\"),\n    self.loadTemplate(\"form-process-path\", bizagi.getTemplate(\"bizagi.rendering.desktop.form\") + \"#ui-bizagi-render-form-process-path\"),\n    self.loadTemplate(\"panel\", bizagi.getTemplate(\"bizagi.rendering.desktop.panel\")),\n    self.loadTemplate(\"contentPanel\", bizagi.getTemplate(\"bizagi.rendering.desktop.contentPanel\")),\n    self.loadTemplate(\"tab\", bizagi.getTemplate(\"bizagi.rendering.desktop.tab\")),\n    self.loadTemplate(\"tabItem\", bizagi.getTemplate(\"bizagi.rendering.desktop.tabItem\")),\n    self.loadTemplate(\"collectionnavigator\", bizagi.getTemplate(\"bizagi.rendering.desktop.collectionnavigator\") + \"#ui-bizagi-render-collectionnavigator\"),\n    self.loadTemplate(\"collectionnavigator-form-button\", bizagi.getTemplate(\"bizagi.rendering.desktop.collectionnavigator\") + \"#ui-bizagi-render-collectionnavigator-form-button\"),\n    self.loadTemplate(\"collectionnavigator-control\", bizagi.getTemplate(\"bizagi.rendering.desktop.collectionnavigator\") + \"#ui-bizagi-render-collectionnavigator-control\"),\n    self.loadTemplate(\"collectionnavigator-actions\", bizagi.getTemplate(\"bizagi.rendering.desktop.collectionnavigator\") + \"#ui-bizagi-render-collectionnavigator-actions\"),\n    self.loadTemplate(\"collectionnavigator-preview\", bizagi.getTemplate(\"bizagi.rendering.desktop.collectionnavigator\") + \"#ui-bizagi-render-collectionnavigator-preview\"),\n    self.loadTemplate(\"collectionnavigator-execution\", bizagi.getTemplate(\"bizagi.rendering.desktop.collectionnavigator\") + \"#ui-bizagi-render-collectionnavigator-execution\"),\n    self.loadTemplate(\"horizontal\", bizagi.getTemplate(\"bizagi.rendering.desktop.horizontal\")),\n    self.loadTemplate(\"accordion\", bizagi.getTemplate(\"bizagi.rendering.desktop.accordion\")),\n    self.loadTemplate(\"accordionItem\", bizagi.getTemplate(\"bizagi.rendering.desktop.accordionItem\")),\n    self.loadTemplate(\"group\", bizagi.getTemplate(\"bizagi.rendering.desktop.group\")),\n    self.loadTemplate(\"section-header\", bizagi.getTemplate(\"bizagi.rendering.desktop.section\") + \"#ui-bizagi-container-section\"),\n    self.loadTemplate(\"section-content\", bizagi.getTemplate(\"bizagi.rendering.desktop.section\") + \"#ui-bizagi-container-section-content\"),\n    self.loadTemplate(\"searchForm\", bizagi.getTemplate(\"bizagi.rendering.desktop.searchForm\")),\n    // Renders\n    self.loadTemplate(\"render\", bizagi.getTemplate(\"bizagi.rendering.desktop.render\")),\n    self.loadTemplate(\"render-base\", bizagi.getTemplate(\"bizagi.rendering.desktop.render.base\")),\n\n    self.loadTemplate(\"render-layout\", bizagi.getTemplate(\"bizagi.rendering.desktop.render.layout\")),\n\n    self.loadTemplate(\"render-userPassword\", bizagi.getTemplate(\"bizagi.rendering.desktop.userPassword\") + \"#bz-rendering-userPassword\"),\n    self.loadTemplate(\"render-getUser\", bizagi.getTemplate(\"bizagi.rendering.desktop.getUser\") + \"#bz-rendering-getUser\"),\n    self.loadTemplate(\"render-user-email\", bizagi.getTemplate(\"bizagi.rendering.desktop.userEmail\") + \"#bz-rendering-user-email\"),\n    self.loadTemplate(\"render-comboSelected\", bizagi.getTemplate(\"bizagi.rendering.desktop.comboSelected\") + \"#bz-rendering-comboSelected\"),\n    self.loadTemplate(\"render-comboSelectedReadOnly\", bizagi.getTemplate(\"bizagi.rendering.desktop.comboSelected\") + \"#bz-rendering-comboSelected-ReadOnly\"),\n    self.loadTemplate(\"render-querySearchUser\", bizagi.getTemplate(\"bizagi.rendering.desktop.querySearchUser\") + \"#ui-bizagi-render-querySearchUser\"),\n    self.loadTemplate(\"text\", bizagi.getTemplate(\"bizagi.rendering.desktop.text\") + \"#ui-bizagi-render-text\"),\n    self.loadTemplate(\"text-read-only\", bizagi.getTemplate(\"bizagi.rendering.desktop.text\") + \"#ui-bizagi-render-text-read-only\"),\n    self.loadTemplate(\"extendedText\", bizagi.getTemplate(\"bizagi.rendering.desktop.extendedText\")),\n    self.loadTemplate(\"number\", bizagi.getTemplate(\"bizagi.rendering.desktop.number\")),\n    self.loadTemplate(\"numberScientificNotation\", bizagi.getTemplate(\"bizagi.rendering.desktop.numberScientificNotation\") + \"#bz-rendering-numberScientificNotation\"),\n    self.loadTemplate(\"date\", bizagi.getTemplate(\"bizagi.rendering.desktop.date\")),\n    self.loadTemplate(\"yesno\", bizagi.getTemplate(\"bizagi.rendering.desktop.yesno\")),\n    self.loadTemplate(\"check\", bizagi.getTemplate(\"bizagi.rendering.desktop.check\")),\n    self.loadTemplate(\"combo\", bizagi.getTemplate(\"bizagi.rendering.desktop.combo\")),\n    self.loadTemplate(\"list\", bizagi.getTemplate(\"bizagi.rendering.desktop.list\")),\n    self.loadTemplate(\"geolocation\", bizagi.getTemplate(\"bizagi.rendering.desktop.geolocation\")),\n    self.loadTemplate(\"radio\", bizagi.getTemplate(\"bizagi.rendering.desktop.radio\")),\n    self.loadTemplate(\"image\", bizagi.getTemplate(\"bizagi.rendering.desktop.image\") + \"#ui-bizagi-render-image\"),\n    self.loadTemplate(\"images\", bizagi.getTemplate(\"bizagi.rendering.desktop.image\") + \"#ui-bizagi-render-images\"),\n    self.loadTemplate(\"image-dialog\", bizagi.getTemplate(\"bizagi.rendering.desktop.image\") + \"#ui-bizagi-render-image-dialog\"),\n    self.loadTemplate(\"image-item\", bizagi.getTemplate(\"bizagi.rendering.desktop.image\") + \"#ui-bizagi-render-image-item\"),\n    self.loadTemplate(\"upload-ecm-view-default\", bizagi.getTemplate(\"bizagi.rendering.desktop.ecm\") + \"#biz-render-ecm-view-default\"),\n    self.loadTemplate(\"upload-ecm-view-default-metadata\", bizagi.getTemplate(\"bizagi.rendering.desktop.ecm\") + \"#biz-render-ecm-view-default-metadata\"),\n    self.loadTemplate(\"upload-ecm-view-default-yesno\", bizagi.getTemplate(\"bizagi.rendering.desktop.ecm\") + \"#biz-render-ecm-view-default-yesno\"),\n    self.loadTemplate(\"upload-ecm-view-default-edit-buttons\", bizagi.getTemplate(\"bizagi.rendering.desktop.ecm\") + \"#biz-render-ecm-view-default-edit-buttons\"),\n    self.loadTemplate(\"document\", bizagi.getTemplate(\"bizagi.rendering.desktop.document\") + \"#bz-document-generator\"),\n    self.loadTemplate(\"document-item\", bizagi.getTemplate(\"bizagi.rendering.desktop.document\") + \"#bz-document-generator-item\"),\n    self.loadTemplate(\"document-column-item\", bizagi.getTemplate(\"bizagi.rendering.desktop.document\") + \"#bz-document-generator-column-item\"),\n    self.loadTemplate(\"document-item-preview\", bizagi.getTemplate(\"bizagi.rendering.desktop.document\") + \"#bz-document-generator-item-preview\"),\n    self.loadTemplate(\"document-item-preview-object\", bizagi.getTemplate(\"bizagi.rendering.desktop.document\") + \"#bz-document-generator-item-preview-object\"),\n    self.loadTemplate(\"uploadItem\", bizagi.getTemplate(\"bizagi.rendering.desktop.uploadItem\")),\n    self.loadTemplate(\"upload\", bizagi.getTemplate(\"bizagi.rendering.desktop.upload\")),\n    self.loadTemplate(\"upload.dialog\", bizagi.getTemplate(\"bizagi.rendering.desktop.upload.dialog\")),\n    self.loadTemplate(\"upload.template.dialog\", bizagi.getTemplate(\"bizagi.rendering.desktop.upload.template.dialog\")),\n    self.loadTemplate(\"upload.ecm.dialog\", bizagi.getTemplate(\"bizagi.rendering.desktop.upload.ecm.dialog\")),\n    self.loadTemplate(\"dialog-send-email\", bizagi.getTemplate(\"bizagi.rendering.desktop.dialog-sendEmail\") + \"#dialog-send-email\"),\n    self.loadTemplate(\"dialog-send-email-rtl\", bizagi.getTemplate(\"bizagi.rendering.desktop.dialog-sendEmail\") + \"#dialog-send-email-rtl\"),\n    self.loadTemplate(\"grid\", bizagi.getTemplate(\"bizagi.rendering.desktop.grid\")),\n    self.loadTemplate(\"cell\", bizagi.getTemplate(\"bizagi.rendering.desktop.cell\")),\n    self.loadTemplate(\"cell.readonly\", bizagi.getTemplate(\"bizagi.rendering.desktop.cell.readonly\")),\n    self.loadTemplate(\"cell.summary\", bizagi.getTemplate(\"bizagi.rendering.desktop.cell.summary\")),\n    self.loadTemplate(\"cell.upload\", bizagi.getTemplate(\"bizagi.rendering.desktop.cell.upload\")),\n    self.loadTemplate(\"cell.button\", bizagi.getTemplate(\"bizagi.rendering.desktop.cell.button\")),\n    self.loadTemplate(\"search\", bizagi.getTemplate(\"bizagi.rendering.desktop.search\")),\n    self.loadTemplate(\"searchItem\", bizagi.getTemplate(\"bizagi.rendering.desktop.searchItem\")),\n    self.loadTemplate(\"searchList\", bizagi.getTemplate(\"bizagi.rendering.desktop.searchList\") + \"#bz-searchList\"),\n    self.loadTemplate(\"searchListTag\", bizagi.getTemplate(\"bizagi.rendering.desktop.searchList\") + \"#bz-searchList-tag\"),\n    self.loadTemplate(\"letter\", bizagi.getTemplate(\"bizagi.rendering.desktop.letter\")),\n    self.loadTemplate(\"letter.readonly\", bizagi.getTemplate(\"bizagi.rendering.desktop.letter.readonly\")),\n    self.loadTemplate(\"letter.dialog\", bizagi.getTemplate(\"bizagi.rendering.desktop.dialog-letter\")),\n    self.loadTemplate(\"button\", bizagi.getTemplate(\"bizagi.rendering.desktop.button\")),\n    self.loadTemplate(\"fileprint\", bizagi.getTemplate(\"bizagi.rendering.desktop.fileprint\") + \"#ui-bizagi-render-fileprint\"),\n    self.loadTemplate(\"fileprint-object\", bizagi.getTemplate(\"bizagi.rendering.desktop.fileprint\") + \"#ui-bizagi-render-fileprint-object\"),\n    self.loadTemplate(\"fileprint-iframe\", bizagi.getTemplate(\"bizagi.rendering.desktop.fileprint\") + \"#ui-bizagi-render-fileprint-iframe\"),\n    self.loadTemplate(\"link\", bizagi.getTemplate(\"bizagi.rendering.desktop.link\")),\n    self.loadTemplate(\"formLink\", bizagi.getTemplate(\"bizagi.rendering.desktop.formLink\")),\n    self.loadTemplate(\"association\", bizagi.getTemplate(\"bizagi.rendering.desktop.association\")),\n    self.loadTemplate(\"stakeholder\", bizagi.getTemplate(\"bizagi.rendering.desktop.stakeholder\") + \"#bz-rendering-stakeholder\"),\n    self.loadTemplate(\"stakeholder-grid\", bizagi.getTemplate(\"bizagi.rendering.desktop.stakeholder\") + \"#bz-rendering-stakeholder-grid\"),\n    self.loadTemplate(\"stakeholder-paginator\", bizagi.getTemplate(\"bizagi.rendering.desktop.stakeholder\") + \"#bz-rendering-stakeholder-paginator\"),\n    self.loadTemplate(\"queryProcess\", bizagi.getTemplate(\"bizagi.rendering.desktop.queryProcess\") + \"#ui-bizagi-render-query-process\"),\n    self.loadTemplate(\"checkList\", bizagi.getTemplate(\"bizagi.rendering.desktop.checkList\") + \"#bz-rendering-checkList\"),\n    self.loadTemplate(\"checkList-disabled\", bizagi.getTemplate(\"bizagi.rendering.desktop.checkList\") + \"#bz-rendering-checkList-disabled\"),\n    self.loadTemplate(\"readonly\", bizagi.getTemplate(\"bizagi.rendering.desktop.readonly\") + \"#readonly\"),\n    self.loadTemplate(\"readonly-gn\", bizagi.getTemplate(\"bizagi.rendering.desktop.readonly\") + \"#readonly-gn\"),\n\n    self.loadTemplate(\"readonly-value\", bizagi.getTemplate(\"bizagi.rendering.desktop.readonly\") + \"#readonly-value\"),\n\n    // Hand Signature\n    self.loadTemplate(\"hand-signature\", bizagi.getTemplate(\"bizagi.rendering.desktop.handSignature\") + \"#bz-signature\"),\n    self.loadTemplate(\"hand-signature-readonly\", bizagi.getTemplate(\"bizagi.rendering.desktop.handSignature\") + \"#bz-signature-readonly\"),\n\n    //render layout controls\n    self.loadTemplate(\"layout-link\", bizagi.getTemplate(\"bizagi.rendering.desktop.layout.link\")),\n    self.loadTemplate(\"layout-image\", bizagi.getTemplate(\"bizagi.rendering.desktop.layout.image\") + \"#ui-bizagi-render-layout-image\"),\n    self.loadTemplate(\"layout-image64\", bizagi.getTemplate(\"bizagi.rendering.desktop.layout.image\") + \"#ui-bizagi-render-layout-image64\"),\n    self.loadTemplate(\"layout-label\", bizagi.getTemplate(\"bizagi.rendering.desktop.layout.label\")),\n    self.loadTemplate(\"layout-text\", bizagi.getTemplate(\"bizagi.rendering.desktop.layout.text\")),\n    self.loadTemplate(\"layout-upload\", bizagi.getTemplate(\"bizagi.rendering.desktop.layout.upload\")),\n    self.loadTemplate(\"layout-uploadItem\", bizagi.getTemplate(\"bizagi.rendering.desktop.layout.uploadItem\")),\n    self.loadTemplate(\"layout-date-time\", bizagi.getTemplate(\"bizagi.rendering.desktop.layout.dateTime\")),\n    self.loadTemplate(\"layout-number\", bizagi.getTemplate(\"bizagi.rendering.desktop.layout.number\")),\n    self.loadTemplate(\"layout-money\", bizagi.getTemplate(\"bizagi.rendering.desktop.layout.money\")),\n    self.loadTemplate(\"layout-placeholder\", bizagi.getTemplate(\"bizagi.rendering.desktop.layout.placeholder\")),\n    self.loadTemplate(\"layout-boolean\", bizagi.getTemplate(\"bizagi.rendering.desktop.layout.yesno\")),\n\n    //action launcher\n    self.loadTemplate(\"render-actionLauncher\", bizagi.getTemplate(\"bizagi.rendering.desktop.actionLauncher\") + \"#bz-rendering-actionLauncher\"),\n    self.loadTemplate(\"render-actionLauncher-horizontal\", bizagi.getTemplate(\"bizagi.rendering.desktop.actionLauncher\") + \"#bz-rendering-actionLauncher-horizontal\"),\n    self.loadTemplate(\"render-actionLauncher-horizontal-more\", bizagi.getTemplate(\"bizagi.rendering.desktop.actionLauncher\") + \"#bz-rendering-actionLauncher-horizontal-more\"),\n    self.loadTemplate(\"render-actionLauncher-vertical\", bizagi.getTemplate(\"bizagi.rendering.desktop.actionLauncher\") + \"#bz-rendering-actionLauncher-vertical\"),\n    self.loadTemplate(\"render-actionLauncher-actions-to-execute\", bizagi.getTemplate(\"bizagi.rendering.desktop.actionLauncher\") + \"#bz-rendering-actionLauncher-actions-to-execute\"),\n    self.loadTemplate(\"render-actionLauncher-design\", bizagi.getTemplate(\"bizagi.rendering.desktop.actionLauncher\") + \"#bz-rendering-actionLauncher-design\"),\n    self.loadTemplate(\"render-actionLauncher-confirm\", bizagi.getTemplate(\"bizagi.rendering.desktop.actionLauncher\") + \"#bz-rendering-actionLauncher-confirm\"),\n\n    self.loadTemplate(\"render-polymorphicLauncher\", bizagi.getTemplate(\"bizagi.rendering.desktop.polymorphicLauncher\") + \"#bz-rendering-polymorphicLauncher\"),\n    self.loadTemplate(\"render-polymorphicLauncher-vertical-tree\", bizagi.getTemplate(\"bizagi.rendering.desktop.polymorphicLauncher\") + \"#bz-rendering-polymorphicLauncher-vertical-tree\"),\n    self.loadTemplate(\"render-polymorphicLauncher-vertical-tree-item\", bizagi.getTemplate(\"bizagi.rendering.desktop.polymorphicLauncher\") + \"#bz-rendering-polymorphicLauncher-vertical-tree-item\"),\n    self.loadTemplate(\"render-polymorphicLauncher-actions-to-execute\", bizagi.getTemplate(\"bizagi.rendering.desktop.polymorphicLauncher\") + \"#bz-rendering-polymorphicLauncher-actions-to-execute\"),\n    self.loadTemplate(\"render-polymorphicLauncher-design\", bizagi.getTemplate(\"bizagi.rendering.desktop.polymorphicLauncher\") + \"#bz-rendering-polymorphicLauncher-design\"),\n    self.loadTemplate(\"render-polymorphicLauncher-confirm\", bizagi.getTemplate(\"bizagi.rendering.desktop.polymorphicLauncher\") + \"#bz-rendering-polymorphicLauncher-confirm\"),\n\n    bizagi.override.enablePrintFromEditForm ? self.loadTemplate(\"print-frame\", bizagi.getTemplate(\"bizagi.workportal.desktop.widget.print\") + \"#bz-wp-widget-print-frame\") : null, bizagi.override.enablePrintFromEditForm ? self.loadTemplate(\"print-frame-header\", bizagi.getTemplate(\"bizagi.workportal.desktop.widget.print\") + \"#bz-wp-widget-print-frame-header\") : null,\n\n    //Bizagi grid\n    self.loadTemplate(\"grid.bizagi\", bizagi.getTemplate(\"bizagi.rendering.desktop.grid.component\")),\n    self.loadTemplate(\"bizagi.grid.grid\", bizagi.getTemplate(\"bizagi.rendering.desktop.grid.bizagi\") + \"#ui-bizagi-grid\"),\n    self.loadTemplate(\"bizagi.grid.grid.rtl\", bizagi.getTemplate(\"bizagi.rendering.desktop.grid.bizagi\") + \"#ui-bizagi-grid-rtl\"),\n    self.loadTemplate(\"bizagi.grid.waiting\", bizagi.getTemplate(\"bizagi.rendering.desktop.grid.bizagi\") + \"#ui-bizagi-grid-waiting\"),\n    self.loadTemplate(\"bizagi.grid.table\", bizagi.getTemplate(\"bizagi.rendering.desktop.grid.bizagi\") + \"#ui-bizagi-grid-table\"),\n    self.loadTemplate(\"bizagi.grid.table.empty\", bizagi.getTemplate(\"bizagi.rendering.desktop.grid.bizagi\") + \"#ui-bizagi-grid-table-empty\"),\n    self.loadTemplate(\"bizagi.grid.column\", bizagi.getTemplate(\"bizagi.rendering.desktop.grid.bizagi\") + \"#ui-bizagi-grid-column\"),\n    self.loadTemplate(\"bizagi.grid.column.special\", bizagi.getTemplate(\"bizagi.rendering.desktop.grid.bizagi\") + \"#ui-bizagi-grid-column-special\"),\n    self.loadTemplate(\"bizagi.grid.row\", bizagi.getTemplate(\"bizagi.rendering.desktop.grid.bizagi\") + \"#ui-bizagi-grid-row\"),\n    self.loadTemplate(\"bizagi.grid.row.buttons\", bizagi.getTemplate(\"bizagi.rendering.desktop.grid.bizagi\") + \"#ui-bizagi-grid-row-buttons\"),\n    self.loadTemplate(\"bizagi.grid.row.buttons.rtl\", bizagi.getTemplate(\"bizagi.rendering.desktop.grid.bizagi\") + \"#ui-bizagi-grid-row-buttons-rtl\"),\n    self.loadTemplate(\"bizagi.grid.cell\", bizagi.getTemplate(\"bizagi.rendering.desktop.grid.bizagi\") + \"#ui-bizagi-grid-cell\"),\n    self.loadTemplate(\"bizagi.grid.cell.special\", bizagi.getTemplate(\"bizagi.rendering.desktop.grid.bizagi\") + \"#ui-bizagi-grid-cell-special\"),\n    //Grig Pager based on inboxgrid pager\n    self.loadTemplate(\"bizagi.grid.pagination\", bizagi.getTemplate(\"bizagi.rendering.desktop.grid.bizagi\") + \"#ui-bizagi-grid-pagination\"),\n    self.loadTemplate(\"bizagi.grid.pager\", bizagi.getTemplate(\"bizagi.rendering.desktop.grid.bizagi\") + \"#ui-bizagi-grid-pager\"),\n    self.loadTemplate(\"bizagi.grid.buttons\", bizagi.getTemplate(\"bizagi.rendering.desktop.grid.bizagi\") + \"#ui-bizagi-grid-buttons\"),\n    self.loadTemplate(\"bizagi.grid.buttons.rtl\", bizagi.getTemplate(\"bizagi.rendering.desktop.grid.bizagi\") + \"#ui-bizagi-grid-buttons-rtl\"),\n    self.loadTemplate(\"bizagi.grid.dynamicpager\", bizagi.getTemplate(\"bizagi.rendering.desktop.grid.bizagi\") + \"#ui-bizagi-grid-dynamic-pager\"),\n    self.loadTemplate(\"bizagi.grid.summary\", bizagi.getTemplate(\"bizagi.rendering.desktop.grid.bizagi\") + \"#ui-bizagi-grid-summary\"),\n    self.loadTemplate(\"bizagi.grid.summaryCell\", bizagi.getTemplate(\"bizagi.rendering.desktop.grid.bizagi\") + \"#ui-bizagi-grid-summary-cell\"),\n    // Grouped grid\n    self.loadTemplate(\"bizagi.grid.grouped.table\", bizagi.getTemplate(\"bizagi.rendering.desktop.grid.bizagi\") + \"#ui-bizagi-grid-grouped-table\"),\n    self.loadTemplate(\"bizagi.grid.grouped.column\", bizagi.getTemplate(\"bizagi.rendering.desktop.grid.bizagi\") + \"#ui-bizagi-grid-grouped-column\"),\n    self.loadTemplate(\"bizagi.grid.grouped.row\", bizagi.getTemplate(\"bizagi.rendering.desktop.grid.bizagi\") + \"#ui-bizagi-grid-grouped-row\"),\n    self.loadTemplate(\"bizagi.grid.grouped.header.row\", bizagi.getTemplate(\"bizagi.rendering.desktop.grid.bizagi\") + \"#ui-bizagi-grid-grouped-header-row\"),\n    self.loadTemplate(\"bizagi.grid.grouped.summary\", bizagi.getTemplate(\"bizagi.rendering.desktop.grid.bizagi\") + \"#ui-bizagi-grid-grouped-summary\"),\n    self.loadTemplate(\"bizagi.grid.grouped.summaryCell\", bizagi.getTemplate(\"bizagi.rendering.desktop.grid.bizagi\") + \"#ui-bizagi-grid-grouped-summary-cell\"),\n    self.loadTemplate(\"bizagi.grid.grouped.emptyCell\", bizagi.getTemplate(\"bizagi.rendering.desktop.grid.bizagi\") + \"#ui-bizagi-grid-grouped-empty-cell\"),\n    //plugin search user\n    self.loadTemplate(\"bizagi.plugin.search.user\", bizagi.getTemplate(\"bizagi.plugin.searchuser\") + \"#ui-bizagi-plugin-search-user\"),\n    self.loadTemplate(\"gridActions\", bizagi.getTemplate(\"bizagi.rendering.desktop.gridActions\") + \"#ui-bizagi-grid-actions-more\"),\n    self.loadTemplate(\"gridActions-delete\", bizagi.getTemplate(\"bizagi.rendering.desktop.gridActions\") + \"#ui-bizagi-grid-actions-delete\"),\n\n    // List multi-select\n    self.loadTemplate(\"list-multiselect\", bizagi.getTemplate(\"bizagi.rendering.desktop.multiSelect\") + \"#bz-list-multiselect\"),\n    self.loadTemplate(\"list-multiselect-item\", bizagi.getTemplate(\"bizagi.rendering.desktop.multiSelect\") + \"#bz-list-multiselect-item\"),\n    self.loadTemplate(\"list-multiselect-tag\", bizagi.getTemplate(\"bizagi.rendering.desktop.multiSelect\") + \"#bz-list-multiselect-tag\"),\n    self.loadTemplate(\"list-multiselect-tags\", bizagi.getTemplate(\"bizagi.rendering.desktop.multiSelect\") + \"#bz-list-multiselect-tags\"),\n    self.loadTemplate(\"list-multiselect-view-more\", bizagi.getTemplate(\"bizagi.rendering.desktop.multiSelect\") + \"#bz-list-multiselect-view-more\"),\n\n    //Range control\n    self.loadTemplate(\"render-range\", bizagi.getTemplate(\"bizagi.rendering.desktop.range\") + \"#bz-rendering-range\"),\n\n    // Query Forms\n    self.loadTemplate(\"query.advanced\", bizagi.getTemplate(\"bizagi.rendering.desktop.queryAdvanced\") + \"#bz-query-advanced\"), //EXTERNAL CONTAINER\n    self.loadTemplate(\"query.advanced.readonly\", bizagi.getTemplate(\"bizagi.rendering.desktop.queryAdvanced\") + \"#bz-query-advanced-readonly\"), //EXTERNAL CONTAINER READONLY\n    self.loadTemplate(\"query.advanced-item\", bizagi.getTemplate(\"bizagi.rendering.desktop.queryAdvanced\") + \"#bz-query-advanced-item\"), //ITEM OF DROPDOWN FILTER\n    self.loadTemplate(\"query.advanced-filter\", bizagi.getTemplate(\"bizagi.rendering.desktop.queryAdvanced\") + \"#bz-query-advanced-filter\"), //FILTER WORD\n\n    self.loadTemplate(\"query.advanced-content\", bizagi.getTemplate(\"bizagi.rendering.desktop.queryAdvanced\") + \"#bz-query-advanced-content\"), //FILTER CONTENT\n    self.loadTemplate(\"query.advanced-input\", bizagi.getTemplate(\"bizagi.rendering.desktop.queryAdvanced\") + \"#bz-query-advanced-filter_input\"), //FILTER INPUT\n    self.loadTemplate(\"query.advanced-text\", bizagi.getTemplate(\"bizagi.rendering.desktop.queryAdvanced\") + \"#bz-query-advanced-filter_text\"), //FILTER TEXT\n    self.loadTemplate(\"query.advanced-date\", bizagi.getTemplate(\"bizagi.rendering.desktop.queryAdvanced\") + \"#bz-query-advanced-filter_date\"), //FILTER DATE\n\n    self.loadTemplate(\"query.advanced-pill\", bizagi.getTemplate(\"bizagi.rendering.desktop.queryAdvanced\") + \"#bz-query-advanced__pills\"), // PILLS\n    self.loadTemplate(\"query.advanced-tooltip\", bizagi.getTemplate(\"bizagi.rendering.desktop.queryAdvanced\") + \"#bz-query-advanced__wildcard-tooltip\"), // WILDCARDS TOOLTIP\n\n    self.loadTemplate(\"bizagi.grid.exportOptions\", bizagi.getTemplate(\"bizagi.rendering.desktop.grid.bizagi\") + \"#ui-bizagi-grid-export-options\")).done(function () {\n      var tmplIcons = $.fasttmpl(self.getTemplate(\"icons\"));\n      var svgStoreCounter = $(\"head\").find('#genome-forms-icons').length;\n\n      if (svgStoreCounter === 0) {\n        $(\"head\").append(tmplIcons);\n      }\n\n      // Resolve when all templates are loaded\n      defer.resolve();\n\n    });\n\n    return defer.promise();\n  },\n\n  /**\r\n      * Load javascripts after render has been rendered\r\n      */\n  loadOverrides: function loadOverrides() {\n    // Load custom javascript overrides\n    if (bizagi.enableCustomizations) {\n      return bizagi.util.loadFile({\n        src: bizagi.getJavaScript(\"bizagi.rendering.desktop.overrides\"),\n        type: \"js\" });\n\n    }\n\n    return;\n  },\n\n  getContainer: function getContainer(params) {\n    var self = this;\n    var type = params.type;\n    var data = params.data;\n    var containerParams = $.extend(params, {\n      renderFactory: this,\n      dataService: params.dataService || this.dataService });\n\n\n    if (type == \"form\") {\n      return new bizagi.rendering.desktop.form(containerParams);\n    }\n\n    if (type == \"template\") {\n      return new bizagi.rendering.desktop.formTemplate(containerParams);\n    }\n\n    if (type == \"queryForm\") {\n      return new bizagi.rendering.desktop.queryForm(containerParams);\n    }\n\n    if (type == \"layout\") {\n      return new bizagi.rendering.desktop.layout(containerParams);\n    }\n\n    if (type == \"usersForm\") {\n      return new bizagi.rendering.desktop.usersForm(containerParams);\n    }\n\n    if (type == \"panel\") {\n      return new bizagi.rendering.desktop.panel(containerParams);\n    }\n\n    if (/^contentpanel$/i.test(type)) {\n      return new bizagi.rendering.desktop.contentPanel(containerParams);\n    }\n\n    if (/^nestedform$/i.test(type)) {\n      return new bizagi.rendering.desktop.nestedForm(containerParams);\n    }\n\n    if (type == \"tab\") {\n      return new bizagi.rendering.desktop.tab(containerParams);\n    }\n\n    if (/^tabitem$/i.test(type)) {\n      return new bizagi.rendering.desktop.tabItem(containerParams);\n    }\n\n    if (type == \"horizontal\") {\n      return new bizagi.rendering.desktop.horizontal(containerParams);\n    }\n\n    if (type == \"accordion\") {\n      return new bizagi.rendering.desktop.accordion(containerParams);\n    }\n\n    if (type == \"accordionItem\") {\n      return new bizagi.rendering.desktop.accordionItem(containerParams);\n    }\n\n    if (type == \"group\") {\n      return new bizagi.rendering.desktop.group(containerParams);\n    }\n\n    if (type == \"section\") {\n      return new bizagi.rendering.desktop.section(containerParams);\n    }\n\n    if (type == \"searchForm\") {\n      containerParams.context = \"search\";\n      containerParams.contexttype = \"metadata\";\n      return new bizagi.rendering.desktop.searchForm(containerParams);\n    }\n\n    if (type == \"mobileform\") {\n      return new bizagi.rendering.mobileform(containerParams);\n    }\n    if (type == \"mobilegroup\") {\n      return new bizagi.rendering.mobilegroup(containerParams);\n    }\n\n    if (type == \"mobiletext\") {\n      return new bizagi.rendering.mobiletext(renderParams);\n    }\n\n    // No type supported\n    bizagi.log(type + \" not supported in render factory\", data, \"error\");\n    return null;\n  },\n\n  /*\r\n      *   Returns the appropriate render based on the render type\r\n      */\n  getRender: function getRender(params) {\n    var self = this;\n    var type = params.type;\n    var data = params.data;\n    var properties = data.properties;\n    var isAdvanced = bizagi.util.parseBoolean(properties.advancedQuery) || false;\n    var renderParams = $.extend(params, {\n      renderFactory: this,\n      dataService: params.dataService || this.dataService });\n\n\n    if (!type)\n    type = \"label\";\n\n    // Data searches using advanced query\n    if (!/^query/i.test(type) && isAdvanced) {\n      return self.getAdvancedQueryRender(renderParams);\n    }\n\n    if (type === \"text\") {\n      var isExtended = bizagi.util.parseBoolean(data.properties.isExtended) || false;\n\n      // Creates one extended render\n      if (isExtended) {\n        return new bizagi.rendering.desktop.extendedText(renderParams);\n      }\n\n      // Creates one normal text render\n      return new bizagi.rendering.desktop.text(renderParams);\n    }\n\n    if (type === \"association\") {\n      return new bizagi.rendering.desktop.association(renderParams);\n    }\n\n    if (type === \"label\") {\n      if (!bizagi.override.hiddenControlsWithDataType) {\n        delete properties.dataType;\n      }\n      return new bizagi.rendering.desktop.label(renderParams);\n    }\n\n    if (type === \"hidden\") {\n      if (!bizagi.override.hiddenControlsWithDataType) {\n        delete properties.dataType;\n      }\n      return new bizagi.rendering.desktop.hidden(renderParams);\n    }\n\n    if (type === \"number\") {\n      // Number Scientific Notation\n      if (properties && properties.dataType === 29) {\n        return new bizagi.rendering.desktop.numberScientificNotation(renderParams);\n      }\n\n      return new bizagi.rendering.desktop.number(renderParams);\n    }\n\n    if (type === \"money\") {\n      return new bizagi.rendering.desktop.money(renderParams);\n    }\n\n    if (type === \"date\") {\n      return new bizagi.rendering.desktop.date(renderParams);\n    }\n\n    if (type === \"boolean\") {\n      var display = data.properties.display || \"option\";\n\n      // Creates one check render\n      if (display === \"check\") {\n        return new bizagi.rendering.desktop.check(renderParams);\n      }\n\n      // Creates one yes-no render\n      return new bizagi.rendering.desktop.yesno(renderParams);\n    }\n\n    if (type === \"combo\") {\n      return new bizagi.rendering.desktop.combo(renderParams);\n    }\n\n    if (/^cascadingcombo$/i.test(type)) {\n      return new bizagi.rendering.desktop.cascadingCombo(renderParams);\n    }\n\n    if (type === \"list\") {\n      return new bizagi.rendering.desktop.list(renderParams);\n    }\n\n    if (type === \"radio\") {\n      return new bizagi.rendering.desktop.radio(renderParams);\n    }\n\n    if (type === \"image\") {\n      return new bizagi.rendering.desktop.image(renderParams);\n    }\n\n    if (type === \"uploadecm\") {\n      // Check if its ECM file            \n      return new bizagi.rendering.desktop.ecm(renderParams);\n    }\n\n    if (type === \"upload\") {\n      return new bizagi.rendering.desktop.upload(renderParams);\n    }\n\n    if (type === \"grid\") {\n      return new bizagi.rendering.desktop.grid.bizagi(renderParams);\n    }\n\n    if (type === \"groupedgrid\") {\n      return new bizagi.rendering.desktop.grid.grouped(renderParams);\n    }\n\n    if (type === \"search\") {\n      return new bizagi.rendering.desktop.search(renderParams);\n    }\n\n    if (type === \"suggest\") {\n      renderParams.data.properties.enableQuerySuggestBehavior = true;\n      return new bizagi.rendering.desktop.search(renderParams);\n    }\n\n    if (type === \"searchList\") {\n      return new bizagi.rendering.desktop.searchList(renderParams);\n    }\n\n    if (type == \"multiSelect\") {\n      return new bizagi.rendering.desktop.multiSelect(renderParams);\n    }\n\n    if (type === \"letter\") {\n      return new bizagi.rendering.desktop.letter(renderParams);\n    }\n\n    if (type === \"button\") {\n      var isRPAButton = bizagi.util.isEmpty(data.properties.rpabot) ? false : true;\n\n      if (isRPAButton) {\n        return new bizagi.rendering.desktop.uiPathButton(renderParams);\n      } else {\n        return new bizagi.rendering.desktop.button(renderParams);\n      }\n    }\n\n    if (type === \"formLink\") {\n      return new bizagi.rendering.desktop.formLink(renderParams);\n    }\n\n    if (type === \"link\") {\n      return new bizagi.rendering.desktop.link(renderParams);\n    }\n\n    if (type === \"actionLauncher\") {\n      return new bizagi.rendering.desktop.actionLauncher(renderParams);\n    }\n\n    if (type === \"entityTemplate\") {\n      return new bizagi.rendering.desktop.entityTemplate(renderParams);\n    }\n\n    if (type === \"polymorphicLauncher\") {\n      return new bizagi.rendering.desktop.polymorphicLauncher(renderParams);\n    }\n\n    if (type === \"userfield\") {\n      return new bizagi.rendering.desktop.userfieldWrapper(renderParams);\n    }\n    // Check layout renders (starts with \"layout\")\n    if (type.indexOf(\"layout\") === 0) {\n      return self.getLayoutRender(params);\n    }\n\n    // Check search renders (starts with \"search\")\n    if (type.indexOf(\"search\") === 0) {\n      return self.getSearchRender(params);\n    }\n\n    // Check query renders (starts with \"query\")\n    if (type.indexOf(\"query\") === 0) {\n      return self.getQueryRender(params);\n    }\n\n    // Check range renders (starts with \"range\")\n    if (type.indexOf(\"range\") === 0) {\n      return self.getRangeRender(params);\n    }\n\n    if (type === \"document\") {\n      return new bizagi.rendering.desktop.document(renderParams);\n    }\n\n    if (type === \"image\") {\n      return new bizagi.rendering.desktop.image(renderParams);\n    }\n\n    if (type === \"fileprint\") {\n      return new bizagi.rendering.desktop.fileprint(renderParams);\n    }\n\n    if (type === \"geolocation\") {\n      return new bizagi.rendering.desktop.geolocation(renderParams);\n    }\n\n    if (type === \"collectionnavigator\") {\n      return new bizagi.rendering.desktop.collectionnavigator(renderParams);\n    }\n\n    if (type === \"activityCheckList\") {\n      return new bizagi.rendering.desktop.activityCheckList(renderParams);\n    }\n\n    if (type === \"getUser\") {\n      return new bizagi.rendering.desktop.getUser(renderParams);\n    }\n\n    if (type == \"userPassword\") {\n      return new bizagi.rendering.desktop.userPassword(renderParams);\n    }\n\n    if (type == \"comboSelected\") {\n      return new bizagi.rendering.desktop.comboSelected(renderParams);\n    }\n\n    if (type == \"stakeholder\") {\n      return new bizagi.rendering.desktop.stakeholder(renderParams);\n    }\n\n    if (/^signature$/i.test(type)) {\n      return new bizagi.rendering.desktop.handSignature(renderParams);\n    }\n\n    if (/^readonly$/i.test(type)) {\n      return new bizagi.rendering.desktop.readonly(renderParams);\n    }\n\n    // No type supported\n    bizagi.log(type + \" not supported in render factory\", data, \"error\");\n    return null;\n  },\n\n  /**\r\n      * Returns the appropiate column based on the render type\r\n      */\n  getColumn: function getColumn(params) {\n    var self = this;\n    var type = params.type;\n    var data = params.data;\n    var properties = data.properties;\n    var columnParams = $.extend(params, {\n      renderFactory: this,\n      dataService: params.dataService || this.dataService,\n      singleInstance: bizagi.util.isEmpty(params.singleInstance) ? true : params.singleInstance });\n\n\n    if (type === \"columnText\") {\n      var isExtended = bizagi.util.parseBoolean(data.properties.isExtended) || false;\n\n      if (isExtended) {\n        // Creates one extended render\n        columnParams.decorated = bizagi.rendering.desktop.extendedText;\n      } else {\n        // Creates one normal text render\n        columnParams.decorated = bizagi.rendering.desktop.text;\n      }\n      return new bizagi.rendering.desktop.columns.text(columnParams);\n    }\n\n    if (type === \"columnSearchList\") {\n      columnParams.decorated = bizagi.rendering.desktop.searchList;\n      return new bizagi.rendering.desktop.columns.searchList(columnParams);\n    }\n\n    if (type === \"columnNumberScientificNotation\") {\n      columnParams.decorated = bizagi.rendering.desktop.numberScientificNotation;\n      return new bizagi.rendering.desktop.columns.numberScientificNotation(columnParams);\n    }\n\n    if (type === \"columnNumber\") {\n      if (properties && properties.dataType === 29) {\n        columnParams.decorated = bizagi.rendering.desktop.numberScientificNotation;\n        return new bizagi.rendering.desktop.columns.numberScientificNotation(columnParams);\n      } else {\n        columnParams.decorated = bizagi.rendering.desktop.number;\n        return new bizagi.rendering.desktop.columns.number(columnParams);\n      }\n    }\n\n    if (type === \"columnMoney\") {\n      columnParams.decorated = bizagi.rendering.desktop.money;\n      return new bizagi.rendering.desktop.columns.number(columnParams);\n    }\n\n    if (type === \"columnDate\") {\n      columnParams.decorated = bizagi.rendering.desktop.date;\n      return new bizagi.rendering.desktop.columns.date(columnParams);\n    }\n\n    if (type === \"columnBoolean\") {\n      var display = data.properties.display || \"option\";\n\n      if (display === \"check\") {\n        // Creates one check render\n        columnParams.decorated = bizagi.rendering.desktop.check;\n        if (params.data.properties.isExclusive) {\n          return new bizagi.rendering.desktop.columns.exclusiveCheck(columnParams);\n        }\n      } else {\n        // Creates one yes-no render\n        columnParams.decorated = bizagi.rendering.desktop.yesno;\n      }\n\n      return new bizagi.rendering.desktop.columns.column(columnParams);\n    }\n\n    if (type === \"columnCombo\") {\n      columnParams.decorated = bizagi.rendering.desktop.combo;\n      return new bizagi.rendering.desktop.columns.combo(columnParams);\n    }\n\n    if (type === \"columnRadio\") {\n      columnParams.decorated = bizagi.rendering.desktop.radio;\n      return new bizagi.rendering.desktop.columns.radio(columnParams);\n    }\n\n    if (type === \"columnList\") {\n      columnParams.decorated = bizagi.rendering.desktop.list;\n      return new bizagi.rendering.desktop.columns.list(columnParams);\n    }\n\n    if (type === \"columnHidden\") {\n      if (!bizagi.override.hiddenControlsWithDataType) {\n        delete properties.dataType;\n      }\n      columnParams.decorated = bizagi.rendering.desktop.hidden;\n      return new bizagi.rendering.desktop.columns.hidden(columnParams);\n    }\n\n    if (type === \"columnUpload\") {\n      columnParams.decorated = bizagi.rendering.desktop.upload;\n      return new bizagi.rendering.desktop.columns.upload(columnParams);\n    }\n\n    if (type === \"columnImage\") {\n      columnParams.decorated = bizagi.rendering.desktop.image;\n      return new bizagi.rendering.desktop.columns.image(columnParams);\n    }\n\n    if (type === \"columnUploadEcm\") {\n      columnParams.decorated = bizagi.rendering.desktop.ecm;\n      return new bizagi.rendering.desktop.columns.uploadecm(columnParams);\n    }\n\n    if (type === \"columnLink\") {\n      columnParams.decorated = bizagi.rendering.desktop.link;\n      return new bizagi.rendering.desktop.columns.link(columnParams);\n    }\n\n    if (type === \"columnFormLink\") {\n      columnParams.decorated = bizagi.rendering.desktop.formLink;\n      return new bizagi.rendering.desktop.columns.link(columnParams);\n    }\n\n    if (type === \"columnUserfield\") {\n      columnParams.decorated = bizagi.rendering.desktop.userfieldWrapper;\n      return new bizagi.rendering.desktop.columns.column(columnParams);\n    }\n\n    if (type === \"columnSearch\") {\n      columnParams.decorated = bizagi.rendering.desktop.search;\n      return new bizagi.rendering.desktop.columns.search(columnParams);\n    }\n\n    if (type === \"columnLabel\") {\n      if (!bizagi.override.hiddenControlsWithDataType) {\n        delete properties.dataType;\n      }\n      columnParams.decorated = bizagi.rendering.desktop.label;\n      return new bizagi.rendering.desktop.columns.column(columnParams);\n    }\n\n    if (type === \"columnReadonly\") {\n      columnParams.decorated = bizagi.rendering.desktop.readonly;\n      return new bizagi.rendering.desktop.columns.readonly(columnParams);\n    }\n\n    if (type === \"columnDocument\") {\n      columnParams.decorated = bizagi.rendering.desktop.document;\n      return new bizagi.rendering.desktop.columns.document(columnParams);\n    }\n\n    if (type === \"columnLetter\") {\n      columnParams.decorated = bizagi.rendering.desktop.letter;\n      return new bizagi.rendering.desktop.columns.letter(columnParams);\n    }\n\n    if (type === \"columnButton\") {\n      columnParams.decorated = bizagi.rendering.desktop.button;\n      return new bizagi.rendering.desktop.columns.button(columnParams);\n    }\n\n    if (type === \"columnActions\") {\n      columnParams.decorated = bizagi.rendering.desktop.gridActions;\n      return new bizagi.rendering.desktop.columns.actions(columnParams);\n    }\n\n    // No type supported\n    bizagi.log(type + \" not supported in render factory\", data, \"error\");\n    return null;\n  },\n\n  /**\r\n      * Returns the appropiatelayout render based on the type\r\n      * @param {} params\r\n      * @returns {}\r\n      */\n  getLayoutRender: function getLayoutRender(params) {\n    var type = params.type;\n    var data = params.data;\n    var properties = data.properties;\n    var renderParams = $.extend(params, {\n      renderFactory: this,\n      dataService: params.dataService || this.dataService });\n\n\n    if (type === \"layoutImage\") {\n      return new bizagi.rendering.desktop.layoutImage(renderParams);\n    }\n\n    if (type === \"layoutLink\") {\n      return new bizagi.rendering.desktop.layoutLink(renderParams);\n    }\n\n    if (type === \"layoutLabel\") {\n      if (!bizagi.override.hiddenControlsWithDataType) {\n        delete properties.dataType;\n      }\n      return new bizagi.rendering.desktop.layoutLabel(renderParams);\n    }\n\n    if (type === \"layoutText\") {\n      return new bizagi.rendering.desktop.layoutText(renderParams);\n    }\n\n    if (type === \"layoutDateTime\") {\n      return new bizagi.rendering.desktop.layoutDateTime(renderParams);\n    }\n\n    if (type === \"layoutNumber\") {\n      return new bizagi.rendering.desktop.layoutNumber(renderParams);\n    }\n\n    if (type === \"layoutMoney\") {\n      return new bizagi.rendering.desktop.layoutMoney(renderParams);\n    }\n\n    if (type === \"layoutPlaceholder\") {\n      return new bizagi.rendering.desktop.layoutPlaceholder(renderParams);\n    }\n\n    if (type === \"layoutBoolean\") {\n      return new bizagi.rendering.desktop.layoutBoolean(renderParams);\n    }\n\n    if (type === \"layoutUpload\") {\n      return new bizagi.rendering.desktop.layoutUpload(renderParams);\n    }\n\n    // No type supported\n    bizagi.log(type + \" not supported in render factory\", data, \"error\");\n    return null;\n  },\n\n  /*\r\n     *   Returns the appropiate search render based on the type\r\n     */\n  getSearchRender: function getSearchRender(params) {\n    var type = params.type;\n    var data = params.data;\n    var properties = data.properties;\n    var searchParams = $.extend(params, {\n      renderFactory: this,\n      dataService: params.dataService || this.dataService });\n\n\n    if (type == \"searchText\") {\n      var isExtended = bizagi.util.parseBoolean(data.properties.isExtended) || false;\n\n      if (isExtended) {\n        // Creates one extended render\n        return new bizagi.rendering.desktop.extendedText(searchParams);\n      }\n\n      // Creates one normal text render\n      return new bizagi.rendering.desktop.text(searchParams);\n    }\n\n    if (type == \"searchBoolean\") {\n      var display = data.properties.display || \"option\";\n\n      if (display == \"check\") {\n        // Creates one check render\n        return new bizagi.rendering.desktop.check(searchParams);\n      }\n\n      // Creates one yes-no render\n      return new bizagi.rendering.desktop.yesno(searchParams);\n    }\n\n    if (type == \"searchNumber\") {\n      if (data.properties.dataType == 29) {\n        // Creates a Scientific Notation render\n        return new bizagi.rendering.desktop.numberScientificNotation(searchParams);\n      }\n      return new bizagi.rendering.desktop.number(searchParams);\n    }\n\n    if (type == \"searchMoney\") {\n      return new bizagi.rendering.desktop.money(searchParams);\n    }\n\n    if (type == \"searchDate\") {\n      return new bizagi.rendering.desktop.date(searchParams);\n    }\n\n    if (type == \"searchCombo\") {\n      return new bizagi.rendering.desktop.combo(searchParams);\n    }\n\n    if (type == \"searchSuggest\") {\n      return new bizagi.rendering.desktop.search(searchParams);\n    }\n\n    if (type == \"searchLabel\") {\n      if (!bizagi.override.hiddenControlsWithDataType) {\n        delete properties.dataType;\n      }\n      return new bizagi.rendering.desktop.label(searchParams);\n    }\n\n    // No type supported\n    bizagi.log(type + \" not supported in render factory\", data, \"error\");\n    return null;\n  },\n\n  /*\r\n     *   Returns the appropiate query render based on the type\r\n     */\n  getQueryRender: function getQueryRender(params) {\n    var type = params.type;\n    var data = params.data;\n    var properties = data.properties;\n    var isAdvanced = bizagi.util.parseBoolean(data.properties.advancedQuery) || false;\n    var renderParams = $.extend(params, {\n      renderFactory: this,\n      dataService: params.dataService || this.dataService });\n\n\n    if (type === \"queryText\") {\n      var isExtended = bizagi.util.parseBoolean(data.properties.isExtended) || false;\n\n      if (isExtended) {\n        // Creates one extended render\n        return new bizagi.rendering.desktop.queryExtendedText(renderParams);\n      } else {\n        // Creates one normal text render\n        if (isAdvanced) {\n          return new bizagi.rendering.desktop.queryTextAdvanced(renderParams);\n        } else {\n          return new bizagi.rendering.desktop.queryText(renderParams);\n        }\n      }\n    }\n\n    if (type == \"queryBoolean\") {\n      var display = data.properties.display || \"option\";\n\n      // Creates one check render\n      if (display == \"check\") {\n        return new bizagi.rendering.desktop.queryCheck(renderParams);\n      }\n\n      // Creates one yes-no render\n      return new bizagi.rendering.desktop.queryYesNo(renderParams);\n    }\n\n    if (type === \"queryNumber\") {\n      if (isAdvanced) {\n        return new bizagi.rendering.desktop.queryNumberAdvanced(renderParams);\n      } else {\n        return new bizagi.rendering.desktop.queryNumber(renderParams);\n      }\n    }\n\n    if (type === \"queryMoney\") {\n      if (isAdvanced) {\n        return new bizagi.rendering.desktop.queryMoneyAdvanced(renderParams);\n      } else {\n        return new bizagi.rendering.desktop.queryMoney(renderParams);\n      }\n    }\n\n    if (type === \"queryDate\") {\n      if (isAdvanced) {\n        return new bizagi.rendering.desktop.queryDateAdvanced(renderParams);\n      } else {\n        return new bizagi.rendering.desktop.queryDate(renderParams);\n      }\n    }\n\n    if (type == \"queryCombo\") {\n      return new bizagi.rendering.desktop.queryCombo(renderParams);\n    }\n\n    if (type == \"queryCascadingCombo\") {\n      return new bizagi.rendering.desktop.queryCascadingCombo(renderParams);\n    }\n\n    if (type == \"querySuggest\") {\n      return new bizagi.rendering.desktop.querySuggest(renderParams);\n    }\n\n    if (type == \"queryLabel\") {\n      if (!bizagi.override.hiddenControlsWithDataType) {\n        delete properties.dataType;\n      }\n      return new bizagi.rendering.desktop.queryLabel(renderParams);\n    }\n\n    if (type == \"queryList\") {\n      return new bizagi.rendering.desktop.queryList(renderParams);\n    }\n\n    if (type == \"queryMultiSelect\") {\n      return new bizagi.rendering.desktop.queryMultiSelect(renderParams);\n    }\n\n    if (type == \"querySearch\") {\n      return new bizagi.rendering.desktop.querySearch(renderParams);\n    }\n\n    if (type == \"queryRadio\") {\n      return new bizagi.rendering.desktop.queryRadio(renderParams);\n    }\n\n    if (type == \"queryState\") {\n      return new bizagi.rendering.desktop.queryState(renderParams);\n    }\n\n    if (type == \"queryCaseState\") {\n      return new bizagi.rendering.desktop.queryCaseState(renderParams);\n    }\n\n    if (type == \"queryProcess\") {\n      return new bizagi.rendering.desktop.queryProcess(renderParams);\n    }\n\n    if (type == \"querySearchUser\") {\n      return new bizagi.rendering.desktop.querySearchUser(renderParams);\n    }\n\n    if (type == \"queryHidden\") {\n      if (!bizagi.override.hiddenControlsWithDataType) {\n        delete properties.dataType;\n      }\n      return new bizagi.rendering.desktop.hidden(renderParams);\n    }\n\n    // No type supported\n    bizagi.log(type + \" not supported in render factory\", data, \"error\");\n    return null;\n  },\n\n  /*\r\n     *   Returns the appropiate search render based on the type\r\n     */\n  getRangeRender: function getRangeRender(params) {\n    var type = params.type;\n    var data = params.data;\n    var renderParams = $.extend(params, {\n      renderFactory: this,\n      dataService: params.dataService || this.dataService });\n\n\n    if (type === \"rangeDate\") {\n      return new bizagi.rendering.desktop.rangeDate(renderParams);\n    }\n\n    if (type === \"rangeMoney\") {\n      return new bizagi.rendering.desktop.rangeMoney(renderParams);\n    }\n\n    if (type === \"rangeNumber\") {\n      return new bizagi.rendering.desktop.rangeNumber(renderParams);\n    }\n\n    // No type supported\n    bizagi.log(type + \" not supported in render factory\", data, \"error\");\n    return null;\n  },\n\n  getAdvancedQueryRender: function getAdvancedQueryRender(params) {\n    var type = params.type;\n    var renderParams = $.extend(params, {\n      renderFactory: this,\n      dataService: params.dataService || this.dataService });\n\n\n    if (type === \"text\") {\n      return new bizagi.rendering.desktop.queryTextAdvanced(renderParams);\n    }\n\n    if (type === \"number\") {\n      return new bizagi.rendering.desktop.queryNumberAdvanced(renderParams);\n    }\n\n    if (type === \"money\") {\n      return new bizagi.rendering.desktop.queryMoneyAdvanced(renderParams);\n    }\n\n    if (type === \"date\") {\n      return new bizagi.rendering.desktop.queryDateAdvanced(renderParams);\n    }\n  } });","/*\r\n *   Name: Bizagi Desktop Render Yes-No Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the Yes-No render class to adjust to desktop devices\r\n */\n\n// Extends from render Desktop base\nbizagi.rendering.desktop.render.extend(\"bizagi.rendering.desktop.searchList\", bizagi.rendering.searchList.prototype);\n// Extends itself\nbizagi.rendering.desktop.searchList.extend(\"bizagi.rendering.desktop.searchList\", {\n  SEARCH_MIN_LENGTH: 2 },\n{\n\n  /**\r\n   * Template method to implement in each device to customize each render after processed\r\n   * @returns {}\r\n   */\n  postRender: function postRender() {\n    var self = this;\n    var control = self.getControl();\n\n    // Call base \n    self._super();\n\n    // Apply plugin\n    self.searchInput = $(\"input\", control);\n    $(control).find(\"input\").css({ \"width\": \"100%\", \"padding-right\": \"25px\" });\n\n    self.applyAutocompletePlugin();\n    self.attachKeyEvents();\n  },\n\n  /**\r\n      * Attaches key events to the control\r\n      * @returns {}\r\n      */\n  attachKeyEvents: function attachKeyEvents() {\n    var self = this;\n\n    self.element.keydown(function (e) {\n      e = window.event || e;\n      var keyUnicode = e.charCode || e.keyCode;\n\n      if (e !== undefined) {\n        switch (keyUnicode) {\n          case 8: // Backspace\n            var caretPos = $(\"input:first\", self.element)[0].selectionStart;\n\n            if (caretPos === 0) {\n              self.removeLastElement();\n              $(\"li:nth-last-child(2)\", self.element).remove();\n              $(\".biz-render-input-search\", self.getControl()).focus();\n            }\n\n            break;}\n\n      }\n    });\n  },\n\n  /**\r\n      * Apply autocomplete capabilities to a single input\r\n      * @returns {}\r\n      */\n  applyAutocompletePlugin: function applyAutocompletePlugin() {\n    var self = this;\n    var control = self.getControl();\n    var searchInput = self.searchInput;\n\n    searchInput.autocomplete({\n      autoFocus: true,\n      messages: {\n        noResults: null, //\"No search results.\",\n        results: function results() {\n        } },\n\n      source: function source(req, add) {\n        // active search\n        self.activeRequestTerm = req.term;\n\n        // Check local storage\n        var now = new Date().getTime();\n        var parseRequest = encodeURIComponent(req.term);\n        var expireKey = self.properties.xpath + \"_\" + parseRequest + \"_expire\";\n        var requestKey = self.properties.xpath + \"_\" + parseRequest;\n        var expire = bizagi.util.getItemLocalStorage(expireKey);\n\n        if (expire && self.properties.enableLocalStorage && now < expire) {\n          try {\n            var data = JSON.parse(bizagi.util.getItemLocalStorage(requestKey));\n            add(data);\n            self.hideAutocompleteLoading();\n          } catch (e) {\n            self.processRequest(req, add);\n          }\n        } else {\n          self.processRequest(req, add);\n        }\n      },\n      select: function select(event, ui) {\n        var selectedValues = JSON.parse(self.getValue()).value;\n        var isNewItem = true;\n        if (typeof ui.item.id == \"undefined\") {\n          isNewItem = false;\n        } else {\n          $.each(selectedValues, function (i, val) {\n            if (ui.item.id == val.id) {\n              isNewItem = false;\n              return isNewItem;\n            }\n          });\n        }\n\n        if (isNewItem) {\n          self.appendFoundItem(event, ui);\n          self.changeRequired(false);\n        }\n\n        searchInput.autocomplete('close');\n        ui.item.value = \"\";\n      },\n      open: function open() {\n        var suggestMenu = searchInput.data(\"ui-autocomplete\").menu.element;\n        var suggestStyles = { top: 0, left: 0 };\n        var suggestContainer = searchInput.closest(\".ui-bizagi-control\");\n        var controlContainer = suggestContainer.parent();\n        var itemWidth = self.calculateSuggestionWidth();\n\n        $('li', suggestMenu).each(function () {\n          if ($(this).index() % 2 < 1)\n          $(this).addClass('biz-ui-even');\n        });\n\n        // Fix position to prevent the scroll of autocomplete\n        suggestMenu.css(suggestStyles);\n        suggestContainer.addClass(\"ac-is-visible\");\n        controlContainer.addClass(\"ac-is-visible ac-clear-floats\");\n\n        suggestMenu.appendTo(suggestContainer).position({\n          my: \"left top\",\n          at: \"left bottom\",\n          of: this,\n          collision: \"flipfit\" });\n\n\n        suggestMenu.css(\"z-index\", $.getMaxZindex() + 10);\n\n        // Add data to check if element is visible\n        suggestMenu.attr(\"visible\", true);\n\n        // Apply width to menu and items\n        $(\".ui-bizagi-render-search-item\", suggestMenu).width(itemWidth);\n        suggestMenu.width(itemWidth);\n        self.hideAutocompleteLoading();\n\n      },\n      close: function close() {\n        searchInput.data(\"ui-autocomplete\").menu.element.attr(\"visible\", false);\n      },\n      delay: this.Class.SEARCH_DELAY,\n      minLength: self.Class.SEARCH_MIN_LENGTH });\n\n\n\n    // Special rendering\n    searchInput.data(\"ui-autocomplete\")._renderItem = function (ul, item) {\n      // Normal rendering\n      return self.renderSearchItem(item).appendTo(ul);\n    };\n\n    // Set close event\n    $('[data-action=remove]', control).click(function () {\n      self.deleteItem($(this));\n    });\n  },\n\n  /**\r\n      * Append matched element\r\n      * @param {} event\r\n      * @param {} ui\r\n      * @returns {}\r\n      */\n  appendFoundItem: function appendFoundItem(event, ui) {\n    var self = this;\n    var control = this.getControl();\n    var ul = $('.biz-render-input-search', control).closest('ul');\n    var last = $('li:last', ul);\n    var newElement;\n\n    // Format additional label\n    ui.item.value = self.formatItem(ui.item.value);\n\n    var element = self.renderFactory.getTemplate(\"searchListTag\");\n\n    newElement = $.fasttmpl(element,\n    {\n      id: ui.item.id,\n      value: ui.item.value,\n      editable: true },\n\n    {\n      formatItem: self.formatItem });\n\n\n    // Append new li with match word\n    $(last).before(newElement);\n\n    // Set close event\n    $('[data-action=remove]', ul).click(function () {\n      self.deleteItem($(this));\n    });\n\n    // Set selected flag\n    $('.biz-render-input-search', control).data('selected', '1');\n\n    // Set focus on input field\n    $('.biz-render-input-search', control).focus();\n\n    // Remove selected css class from all elements\n    $('li', ul).removeClass('selected');\n\n    // Set value\n    this.addElement({ id: ui.item.id, value: ui.item.value });\n\n  },\n\n  deleteItem: function deleteItem(element) {\n    var self = this;\n    var control = self.getControl();\n    var li = element.parent('.bz-pill');\n\n    // Remove from main memory and set the new value\n    this.removeElement({ id: li.data('id') });\n\n    // Remove list element\n    li.remove();\n\n    //Changing required label\n    var list = JSON.parse(this.value);\n    if (list.value.length === 0)\n    self.changeRequired(self.properties.required);\n\n    // Set focus on input element\n    $('.biz-render-input-search', control).focus();\n  },\n\n  /* \r\n      *   Renders a search item\r\n      */\n  renderSearchItem: function renderSearchItem(item) {\n    var self = this;\n    var properties = self.properties;\n    var template = self.renderFactory.getTemplate(\"searchItem\");\n\n    var searchItem = $.tmpl(template, {\n      image: properties.searchImage,\n      label: item.label,\n      orientation: self.properties.orientation || \"lrt\" });\n\n\n    searchItem.data(\"item.autocomplete\", item);\n\n    return searchItem;\n  },\n\n  /* \r\n      *   Process the request data for the autocomplete control\r\n      */\n  processRequest: function processRequest(req, add) {\n    var self = this;\n    var properties = self.properties;\n\n    self.showAutocompleteLoading();\n    // Create array for response objects\n    var suggestions = [];\n\n    if (req.term.length >= this.Class.SEARCH_MIN_LENGTH) {\n\n      // Update term property to reflect the search\n      properties.term = req.term;\n      $.when(this.getData()).done(function (data) {\n        data = data.slice(0, properties.maxRecords);\n\n        if (data.length > 50) {\n          data = data.slice(0, 50);\n\n          suggestions.push({\n            id: self.Class.NO_RESULTS_SEARCH_ID,\n            label: self.getResource(\"render-search-maximum-records-allowed\"),\n            value: '' });\n\n        } else data = data.slice(0, properties.maxRecords);\n        if (data && data.length > 0) {\n          $.each(data, function (i, val) {\n            if (properties.maxRecords == 0 || i < properties.maxRecords) {\n              var parseValue = bizagi.util.performTermMatches(val.value, req.term);\n\n              suggestions.push({ id: val.id, label: parseValue, value: val.value });\n            }\n          });\n        } else {\n          suggestions.push({\n            id: self.Class.NO_RESULTS_SEARCH_ID,\n            label: self.getResource(\"render-grid-no-records\"),\n            value: '' });\n\n        }\n\n        addToSuggestions(suggestions, req.term);\n\n        self.hideAutocompleteLoading();\n\n        /*\r\n                                         *   Method to add the special items to the suggestions\r\n                                         */\n        function addToSuggestions(allSuggestions, request) {\n\n          // Create local storage to improve the speed\n          var expireTime = new Date().getTime() + self.properties.expireCache;\n          var parseRequest = encodeURIComponent(request);\n\n          if (self.properties.enableLocalStorage) {\n            var expireKey = self.properties.xpath + \"_\" + parseRequest + \"_expire\";\n            var requestKey = self.properties.xpath + \"_\" + parseRequest;\n\n            bizagi.util.setItemLocalStorage(expireKey, expireTime);\n            bizagi.util.setItemLocalStorage(requestKey, JSON.encode(allSuggestions));\n          }\n          // Pass array to callback\n          add(allSuggestions);\n        }\n      });\n\n    }\n  },\n\n  showAutocompleteLoading: function showAutocompleteLoading() {\n    $('i', this.getControl()).addClass('ui-autocomplete-loading');\n  },\n\n  hideAutocompleteLoading: function hideAutocompleteLoading() {\n    $('i', this.getControl()).removeClass('ui-autocomplete-loading');\n  },\n  /**\r\n      * Returns the desired width for the suggestion menu\r\n      * @returns {}\r\n      */\n  calculateSuggestionWidth: function calculateSuggestionWidth() {\n    var self = this;\n    var suggestMenu = self.searchInput.data(\"ui-autocomplete\").menu.element;\n\n    return suggestMenu.width();\n  },\n\n  /**\r\n      * Sets the value in the rendered control\r\n      * @param {} value\r\n      * @returns {}\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    if (value !== undefined) {\n      if (this.properties.editable) {\n        this.searchInput.val(value.label);\n      }\n    }\n  },\n\n  /*\r\n      *   Returns the value to display, ex. non-editable renders\r\n      */\n  getDisplayValue: function getDisplayValue() {\n    return this.selectedValue;\n  },\n  /*\r\n      *   Method to render non editable values\r\n      */\n  postRenderReadOnly: function postRenderReadOnly() {\n    var self = this;\n    var control = self.getControl();\n    var properties = self.properties;\n\n    var stringValue = properties.value.map(function (el) {\n      return self.formatItem(el.value);\n    }).join(\", \");\n\n    var tempHTML = \"<label class='readonly-control'>${value}</label>\";\n    var templateWithValues = $.tmpl(tempHTML, { value: stringValue });\n\n    control.empty();\n    control.append(templateWithValues);\n  },\n\n  changeRequired: function changeRequired(argument) {\n    this.properties.required = argument;\n    this.changeRequiredLabel(argument);\n  },\n\n  changeRequiredLabel: function changeRequiredLabel(argument) {\n    var control = this.getControl();\n    if (control.length > 0) {\n      if (this.getMode() !== \"execution\") {\n        if (bizagi.util.parseBoolean(argument) === true && this.properties.editable) {\n          control.addClass(\"control-required\");\n        } else {\n          control.removeClass(\"control-required\");\n        }\n      } else {\n        if (bizagi.util.parseBoolean(argument) === true && !this.hasValue() && this.properties.editable) {\n          control.addClass(\"control-required\");\n        } else {\n          control.removeClass(\"control-required\");\n        }\n      }\n    }\n    this.triggerRenderValidate();\n  },\n  changeCellRequired: function changeCellRequired(argument) {\n    this.changeRequired(argument);\n  } });","/*\r\n*   Name: BizAgi Render Association Class\r\n*   Author: Edward Morales\r\n*   Comments:\r\n*   -   This script will define basic stuff for association renders\r\n*/\n\n$.Class.extend(\"bizagi.rendering.association\", {}, {\n\n  /*\r\n                                                     *   Update or init the element data\r\n                                                     */\n  initializeData: function initializeData(data) {\n    var self = this;\n\n    // Call base\n    self._super(data);\n\n    var properties = self.properties;\n\n    // Fill default properties\n    properties.property = \"flipped\";\n    properties.idRender = self.properties.id;\n    properties.allowFlip = typeof properties.allowFlip != \"undefined\" ? bizagi.util.parseBoolean(properties.allowFlip) : true;\n    properties.flipped = typeof properties.flipped != \"undefined\" ? bizagi.util.parseBoolean(properties.flipped) : false;\n    properties.flipstate = properties.flipped;\n\n\n    // data of entities (left and right)\n    properties.leftData = properties.leftData || [];\n    properties.rightData = properties.rightData || [];\n\n    if (properties.value) {\n      self.processPropertyValue();\n    }\n  },\n\n\n\n  /*\r\n     *   Template method to implement in each children to customize each control\r\n     */\n  renderControl: function renderControl() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"association\");\n    var def = new $.Deferred();\n\n    self.properties.property = \"flipped\";\n    self.properties.idRender = self.properties.id;\n\n    // Define flipped\n    $.when(self.getFlipAssociation()).\n    done(function (flip) {\n\n      // Make json base, create self.properties.formatJson\n      self.makeJsonBase();\n\n      self.properties.flipped = bizagi.util.parseBoolean(flip) || false;\n\n      var html = $.fasttmpl(template, self.properties, {\n        getColumnData: self.getColumnData,\n        getRightAssociation: self.getRightAssociation });\n\n\n      /* by default need set self.properties.formatJson */\n      self.setValue(JSON.encode(self.properties.formatJson));\n\n      def.resolve(html);\n    });\n\n    return def.promise();\n  },\n\n\n  /*\r\n     * Returns the flip state\r\n     */\n  getFlipAssociation: function getFlipAssociation() {\n    var self = this;\n    var mode = self.getMode();\n\n    if (mode == \"execution\")\n    return self.dataService.getFlipAssociation(self.properties);\n\n    return false;\n  },\n\n  /* \r\n     *   Gets the display value of the render\r\n     */\n  getDisplayValue: function getDisplayValue() {\n    var self = this;\n    var value = self.getValue();\n\n    return value;\n  },\n\n  /*\r\n     *   Get the template \r\n     */\n  getTemplateName: function getTemplateName() {\n    return \"association\";\n  },\n\n\n  /**\r\n     * Get Left Data, verify if flipper flags sets true\r\n     * \r\n     * @param column {'0'||'1'}\r\n     */\n  getColumnData: function getColumnData() {\n    var self = this;\n    var properties = self.data;\n    var data = [];\n    var associationData = properties.flipped ? properties.rightData : properties.leftData;\n\n    $.each(associationData, function (key, item) {\n      data.push({ id: item.id, value: item.value });\n    });\n\n    return data;\n  },\n\n  /**\r\n     * Association of right elements\r\n     */\n  getRightAssociation: function getRightAssociation(leftId) {\n    var self = this;\n    var properties = self.data;\n    var association = [];\n\n\n    var isChecked = function isChecked(leftId, idRight) {\n      var checked = false;\n      $.each(properties.formatJson.value, function (key, value) {\n        if (!checked && value.id == leftId && value.value.indexOf(idRight) >= 0) {\n          checked = true;\n        }\n      });\n\n      return checked;\n    };\n\n    // create association and check element\n    if (properties.flipped) {\n      // left element\n      $.each(properties.leftData, function (key, data) {\n        association.push({\n          id: data.id,\n          name: data.value,\n          checked: isChecked(data.id, leftId) });\n\n\n      });\n    } else {\n      $.each(properties.rightData, function (key, data) {\n        association.push({\n          id: data.id,\n          name: data.value,\n          checked: isChecked(leftId, data.id) });\n\n      });\n    }\n\n    return association;\n  },\n\n\n  removeElement: function removeElement(leftId, rightId) {\n    var self = this;\n\n    $.each(self.properties.formatJson.value, function (key, data) {\n      if (self.properties.flipped) {\n        if (data.id == rightId) {\n          // Remove right element from left panel\n          $.each(self.properties.formatJson.value[key][\"value\"], function (removeKey, removeValue) {\n            if (leftId == removeValue) {\n              // Splice from array\n              self.properties.formatJson.value[key][\"value\"].splice(removeKey, 1);\n            }\n          });\n        }\n      } else if (data.id == leftId) {\n        // Remove right element from left panel\n        $.each(self.properties.formatJson.value[key][\"value\"], function (removeKey, removeValue) {\n          if (rightId == removeValue) {\n            // Splice from array\n            self.properties.formatJson.value[key][\"value\"].splice(removeKey, 1);\n          }\n        });\n      }\n    });\n    self.setValue(JSON.encode(self.properties.formatJson));\n  },\n\n\n  addElement: function addElement(leftId, rightId) {\n    var self = this;\n\n    $.each(self.properties.formatJson.value, function (key, data) {\n      if (self.properties.flipped) {\n        if (data.id == rightId) {\n          // Add right element to left panel\n          self.properties.formatJson.value[key][\"value\"].push(leftId);\n        }\n      } else if (data.id == leftId) {\n        // Add right element to left panel\n        self.properties.formatJson.value[key][\"value\"].push(rightId);\n      }\n    });\n    self.setValue(JSON.encode(self.properties.formatJson));\n  },\n\n  makeJsonBase: function makeJsonBase() {\n    var self = this;\n    self.properties.formatJson = self.properties.formatJson || {\n      leftXpath: self.properties.leftXpath,\n      rightXpath: self.properties.rightXpath,\n      leftFactName: self.properties.leftFactName,\n      rightFactName: self.properties.rightFactName,\n      value: self.properties.value };\n\n  },\n\n\n  /*\r\n     *   Check if a render has no value for required validation\r\n     */\n  hasValue: function hasValue() {\n    var self = this;\n\n    if (self.properties.formatJson) {\n      var values = self.properties.formatJson.value;\n    } else {\n      values = self.properties.value;\n    }\n\n\n    for (var i = 0, l = values.length; i < l; i++) {\n      var data = values[i];\n      if (data && data.value.length > 0) {\n        return true;\n      }\n    }\n\n    return false;\n  },\n\n  /*\r\n     * This method process the value.\r\n     * changes the format to send request\r\n     */\n  processPropertyValue: function processPropertyValue() {\n    var self = this;\n    var properties = self.properties;\n    var values = properties.value;\n    var result = [];\n\n    for (var i = 0, l = values.length; i < l; i++) {\n      var value = values[i];\n      result.push({ id: value[0], value: value[1] });\n    }\n\n    properties.value = result;\n  } });","/**\r\n * Description of control\r\n *\r\n * @author:\r\n */\n\n$.Class.extend(\"bizagi.rendering.getUser\", {}, {\n  /*\r\n                                                  * Constructor\r\n                                                  */\n  init: function init(params) {\n    // Call base\n    this._super(params);\n\n    var properties = this.properties;\n    properties.allowDelegatedUser = this.properties.xpath && this.properties.xpath === \"idDelegate\";\n  },\n\n  /*\r\n      * Template method to implement in each children to customize each control\r\n      */\n  renderControl: function renderControl() {\n    var template = this.renderFactory.getTemplate(\"render-getUser\");\n\n    // Render template\n    var html = $.fasttmpl(template, {});\n    return html;\n  },\n\n  renderReadOnly: function renderReadOnly() {\n    var result = this._super();\n    var html = result;\n    if (!bizagi.util.isString(html)) {\n      html = result[0] && result[0].value ? result[0].value : \"\";\n    }\n\n    return html;\n  },\n\n  /*\r\n      * Public method to determine if a value is valid or not\r\n      */\n  isValid: function isValid(invalidElements) {\n    var self = this;\n\n    // Call base\n    var bValid = this._super(invalidElements);\n    return bValid;\n  } });","/**\r\n * Description of file\r\n * @author: Jeison Borja\r\n */\n\n// Extends from render Desktop base\nbizagi.rendering.desktop.render.extend(\"bizagi.rendering.desktop.getUser\", bizagi.rendering.getUser.prototype);\n// Extends itself\nbizagi.rendering.desktop.getUser.extend(\"bizagi.rendering.desktop.getUser\", {}, {\n\n  /**\r\n                                                                                   * Template method to implement in each device to customize each render after processed\r\n                                                                                   */\n  postRender: function postRender() {\n    var self = this;\n    var opt = {};\n    self.input = $(\".ui-bizagi-render-text\", self.getControl());\n\n    if (self.properties.value != null && self.properties.value.length > 0) {\n      self.setDisplayValue(self.properties.value[0]);\n    }\n    // Call base\n    this._super();\n  },\n\n  /**\r\n      * Template method to implement in each device to customize the render's behaviour to add handlers\r\n      */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    var control = self.getControl();\n    self.bindSearchUserPlugin(control);\n    $('#btn-clear-user', control).on('click', function () {\n      self.clearValue();\n    });\n  },\n\n  /**\r\n      * Set display value\r\n      */\n  setDisplayValue: function setDisplayValue(data, triggerEvents) {\n    var self = this;\n    triggerEvents = triggerEvents == false ? triggerEvents : true;\n    var value = typeof data !== \"undefined\" ? data.value : null;\n\n    if (self.properties.editable) {\n      self.input.val(value);\n    }\n\n    self.setValue(data, triggerEvents);\n  },\n\n  /**\r\n      * Clear data control\r\n      */\n  clearValue: function clearValue() {\n    var self = this;\n\n    if (self.input) {\n      self.setDisplayValue(\"\", false);\n    }\n  },\n\n  /**\r\n      * Binds the search user plugin\r\n      */\n  bindSearchUserPlugin: function bindSearchUserPlugin(control) {\n    var self = this;\n    var options = {\n      title: self.getResource(\"render-plugin-search-users-title\"),\n      maximize: false,\n      filters: [\"domain\", \"userName\", \"fullName\"],\n      displayNames: [\n      self.getResource(\"render-plugin-search-users-domain\"),\n      self.getResource(\"render-plugin-search-users-user-name\"),\n      self.getResource(\"render-plugin-search-users-full-name\")],\n      searchButtonName: self.getResource(\"render-plugin-search-users-search-button-name\"),\n      clearButtonName: self.getResource(\"render-plugin-search-users-clear-button-name\"),\n      valuesToSelect: [\"iduser\", \"user\"], //\"iduser\",\"username\",\"user\",\"domain\",\"email\"\n      renderFactoryReference: self.renderFactory,\n      getResourceReference: self.getResource.bind(self),\n      selectItem: function selectItem() {\n        var deferred = $.Deferred();\n        deferred.done(function (data) {\n          self.onItemSelectedSuccess(data);\n        }).fail(function (error) {\n          bizagi.log(error);\n        });\n        return deferred;\n      },\n      searchUsers: function searchUsers(filterData) {\n        return self.callSearchUserEndpointByContext(self.properties, filterData);\n      },\n      showError: function showError(error) {\n        bizagi.log(error);\n      },\n      showMessageBox: function showMessageBox(message) {\n        bizagi.showMessageBox(bizagi.localization.getResource(message), \"Bizagi\", \"warning\");\n      } };\n\n\n    if (self.properties.allowDelegatedUser) {\n      options.editingUser = self.properties.idUser;\n    }\n\n    opt = options;\n\n    // Allows add new user when creating the pluggin\n    var params = self.getParams();\n    if (typeof params.isEntityForm !== \"undefined\" && params.isEntityForm) {\n      options.allowAddUser = bizagi.menuSecurity.UserAdmin || false;\n      options.dataService = self.dataService;\n      options.renderFactory = self.renderFactory;\n    }\n\n    $('#btn-get-user', control).bizagiSearchUser(options);\n  },\n\n  /**\r\n      * Call the search users endpoint depending on the scope\r\n      * @param {*} properties \r\n      * @param {*} filterData \r\n      */\n  callSearchUserEndpointByContext: function callSearchUserEndpointByContext(properties, filterData) {\n\n    var self = this;\n    if (self.getFormContainer().params.type === \"usersForm\") {\n      return self.callSearchUserEndpointInUsersForm(properties, filterData);\n    }\n\n    var form = self.getFormContainer();\n    if (form.params.context === \"userPreferencesForm\") {\n      return self.callSearchUserEndpointInUserPreferencesForm(properties, filterData);\n    }\n\n    // default behavior\n    return self.callSearchUserEndpointInOtherCases(properties, filterData);\n  },\n\n  /**\r\n      * Call search user endpoint depending on xpath in Users Form\r\n      * @param {*} properties \r\n      * @param {*} filterData \r\n      */\n  callSearchUserEndpointInUsersForm: function callSearchUserEndpointInUsersForm(properties, filterData) {\n    var self = this;\n    if (properties.xpath === \"idBossUser\") {\n      return self.dataService.getUsersListForXpathIdBossUser(filterData);\n    }\n\n    if (self.xpathIsDelegated(properties)) {\n      return self.dataService.getUsersListForXpathIdDelegate(filterData);\n    }\n\n    // if any call happens, call by default the next:\n    return self.callSearchUserEndpointInOtherCases(properties, filterData);\n  },\n\n  /**\r\n      * Call search user endpoint depending on xpath in Preferences Form\r\n      * @param {*} properties \r\n      * @param {*} filterData \r\n      */\n  callSearchUserEndpointInUserPreferencesForm: function callSearchUserEndpointInUserPreferencesForm(properties, filterData) {\n    var self = this;\n    if (self.xpathIsDelegated(properties)) {\n      return self.dataService.getUsersListForXpathIdDelegate(filterData);\n    }\n  },\n\n  /**\r\n      * Identify if the xpath is delegate\r\n      * @param {*} properties \r\n      */\n  xpathIsDelegated: function xpathIsDelegated(properties) {\n    return properties.xpath === \"idDelegate\";\n  },\n\n  /**\r\n      * Call search users endpoint depending on other cases\r\n      * @param {*} properties \r\n      * @param {*} filterData \r\n      */\n  callSearchUserEndpointInOtherCases: function callSearchUserEndpointInOtherCases(properties, filterData) {\n    var self = this;\n    if (properties.allowDelegatedUser) {\n      return self.dataService.getUsersListFromPreferences(filterData);\n    } else {\n      return self.dataService.getUsersListForStakeholders(filterData);\n    }\n  },\n\n\n  /**\r\n      * returns the opt var for unit testing\r\n      */\n  getOptions: function getOptions() {\n    return opt;\n  },\n  /**\r\n      *\r\n      * @param itemSelected\r\n      */\n  onItemSelectedSuccess: function onItemSelectedSuccess(itemSelected) {\n    var self = this;\n    var data = {\n      id: itemSelected.iduser,\n      value: itemSelected.user };\n\n\n    self.setDisplayValue(data);\n  },\n\n  changeRequired: function changeRequired(argument) {\n    this.properties.required = argument;\n    this.changeRequiredLabel(argument);\n  },\n\n  changeRequiredLabel: function changeRequiredLabel(argument) {\n    var control = this.getControl();\n\n    if (control.length > 0) {\n      if (this.getMode() !== \"execution\") {\n        if (bizagi.util.parseBoolean(argument) == true && this.properties.editable) {\n          control.addClass('control-required');\n        } else {\n          control.removeClass('control-required');\n        }\n      } else\n      {\n        if (bizagi.util.parseBoolean(argument) == true && !this.hasValue() && this.properties.editable) {\n          control.addClass('control-required');\n        } else {\n          control.removeClass('control-required');\n        }\n      }\n    }\n\n    this.triggerRenderValidate();\n  },\n\n  changeRequiredControl: function changeRequiredControl(argument) {\n    this.changeRequiredLabel(argument);\n  } });","/**\r\n *   Name: Bizagi Render Query Process\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for query process renders\r\n */\n\n$.Class.extend(\"bizagi.rendering.queryProcess\", {}, {\n  /*\r\n                                                      * Constructor\r\n                                                      */\n  init: function init(params) {\n    // Call base\n    this._super(params);\n  },\n\n  /*\r\n     * Template method to implement in each children to customize each control\r\n     */\n  renderControl: function renderControl() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"queryProcess\");\n    var html = $.fasttmpl(template, {});\n    return html;\n  },\n\n  loadtemplates: function loadtemplates() {\n  } });","/*\r\n *   Name: BizAgi Desktop Render Query Process Extension\r\n *   Author: Jeison Borja\r\n *   Comments:\r\n *   -   This script will redefine the query process render class to adjust to desktop devices\r\n */\n// Extends itself\n\n// Extends from render Desktop base\nbizagi.rendering.desktop.render.extend(\"bizagi.rendering.desktop.queryProcess\", bizagi.rendering.queryProcess.prototype);\n// Extends itself\nbizagi.rendering.desktop.queryProcess.extend(\"bizagi.rendering.desktop.queryProcess\", {}, {\n  /*\r\n                                                                                             * Template method to implement in each device to customize each render after processed\r\n                                                                                             */\n  postRender: function postRender() {\n    var self = this;\n    // Call base\n    this._super();\n    var template = self.renderFactory.getTemplate(\"queryProcessWrapper\");\n    var control = self.getControl();\n    self.getElement(\"row\").bind(\"click\", function () {\n      var wrapper = self.getWrapper();\n      if (wrapper.properties.visible) {\n        wrapper.element.hide();\n        wrapper.element.css(\"visibility\", \"hidden\");\n        wrapper.element.empty();\n      } else {\n        wrapper.element.show();\n        wrapper.element.css(\"visibility\", \"visible\");\n        var data = self.loadData(\"aplications\");\n        self.renderData(data, wrapper.element);\n      }\n    });\n\n  },\n\n  /**\r\n      * get wrapper html and their properties\r\n      *\r\n      * @return {element: html, properties{visible:boolean}}\r\n      */\n  getWrapper: function getWrapper() {\n    var self = this;\n    var wrapperElement = self.getElement(\"wrapper\");\n    var result = {\n      element: wrapperElement,\n      properties: {} };\n\n    // Check visibility\n    result.properties.visible = wrapperElement.css(\"visibility\") === \"visible\" ? true : false;\n    return result;\n  },\n\n  /**\r\n      * @return {key(row|wrapper): html element}\r\n      */\n  getElement: function getElement(key) {\n    var control = this.getControl();\n    var objectMapper = {\n      row: $(\".ui-selectmenu-btn , .ui-bizagi-container-query-process :input[type=text]\", control),\n      wrapper: $(\".ui-selectmenu-wrapper\", control),\n      linkApplication: $(\".linkApplication\", control) };\n\n\n    return objectMapper[key];\n  },\n\n  /**\r\n      * get data from server\r\n      * @return {applications:[{id:integer, appName: string},...] }\r\n      */\n  loadData: function loadData(type) {\n    if (type == \"aplications\") {\n      var result = {\n        items: [\n        {\n          id: 1,\n          displayName: \"My App 1\" },\n\n        {\n          id: 2,\n          displayName: \"My App 2\" },\n\n        {\n          id: 3,\n          displayName: \"My App 3\" }] };\n\n\n\n    }\n\n    if (type == \"process\") {\n      var result = {\n        items: [\n        {\n          id: 4,\n          displayName: \"My Category 1\",\n          process: false },\n\n        {\n          id: 5,\n          displayName: \"My Process 1\",\n          process: true },\n\n        {\n          id: 6,\n          displayName: \"My Category 2\",\n          process: false }] };\n\n\n\n    }\n    return result;\n  },\n\n  /**\r\n      * Render data within canvas\r\n      * @param data\r\n      * @param canvas\r\n      */\n  renderData: function renderData(data, canvas) {\n    var self = this;\n    $(canvas).empty();\n    if (data.items[0].process === undefined) {\n      canvas.append('<a class=\"linkApplication\" data-idcategory=\"0\" data-typeitem=\"process\"><i class=\"biz-ico biz-wp-tree-icon biz-wp-tree-image-process\"></i>All process </a>');\n    }\n    $.each(data.items, function (key, value) {\n      canvas.append('<a class=\"linkApplication\" data-idCategory=\"' + value.id + '\"><i  name=\"app\" class=\"biz-wp-tree-icon biz-wp-tree-expand-icon\"></i><i class=\"biz-ico biz-wp-tree-icon\"></i>' + value.displayName + '</a>');\n      var itemElement = $('[data-idCategory=' + value.id + ']', canvas);\n      if (value.process) {\n        var iconProcess = itemElement.find('i').last();\n        iconProcess.addClass('biz-wp-tree-image-process');\n        itemElement.find('i').first().remove();\n        itemElement.css('margin-left', '25px');\n        itemElement.attr('data-typeItem', 'process');\n      } else\n      {\n        // item category\n        if (value.process == false) {\n          var iconCategory = itemElement.find('i').last();\n          iconCategory.addClass('biz-wp-tree-image-category');\n          itemElement.attr('data-typeItem', 'category');\n        } else\n        {\n          //item application\n          var iconApp = itemElement.find('i').last();\n          iconApp.addClass('biz-wp-tree-image-application');\n          itemElement.attr('data-typeItem', 'app');\n        }\n        var idParent = $(canvas).attr('class') != \"ui-selectmenu-wrapper\" ? $(canvas).attr('id').replace('category_', '') : \"\";\n        var idContCategory = idParent != \"\" ? \"category_\" + idParent + \"-\" + value.id : \"category_\" + value.id;\n        canvas.append(\"<div class='ui-bizagi-contCategory' id='\" + idContCategory + \"'></div>\");\n      }\n    });\n    self.setupLinks(canvas);\n  },\n\n  setupLinks: function setupLinks(canvas) {\n    var self = this;\n    $(\".linkApplication\", canvas).on(\"click\", function () {\n      var idCategory = $(this).attr(\"data-idCategory\");\n      var idParent = $(canvas).attr('class') != \"ui-selectmenu-wrapper\" ? $(canvas).attr('id').replace('category_', '') : \"\";\n      var elementRender = idParent != \"\" ? $(\"#category_\" + idParent + \"-\" + idCategory) : $(\"#category_\" + idCategory);\n      if ($(this).attr('data-typeItem') == 'process') {\n        var processSelect = $(this).text();\n        var wrapper = self.getWrapper();\n        wrapper.element.hide();\n        wrapper.element.css(\"visibility\", \"hidden\");\n        var parentType = '';\n        var item = this;\n        var routeProcess = [];\n        if ($(this).attr(\"data-idcategory\") > 0) {\n          while (parentType != \"app\" || parentType == null) {\n            item = $(item).closest('div').prev();\n            parentType = item[0].getAttribute(\"data-typeItem\");\n            routeProcess.push(item.text());\n          }\n        }\n        wrapper.element.empty();\n        routeProcess = routeProcess.reverse().join(\" > \");\n        routeProcess = routeProcess == \"\" ? processSelect : routeProcess += ' > ' + processSelect;\n\n        $('.ui-bizagi-container-query-process :input[type=text]').val(routeProcess);\n      } else\n      {\n        var iconProcess = $(this).find('i').first();\n        if (elementRender.css(\"visibility\") === \"visible\") {\n          iconProcess.addClass('biz-wp-tree-expand-icon');\n          iconProcess.removeClass('biz-wp-tree-collapse-icon');\n          elementRender.hide();\n          elementRender.css(\"visibility\", \"hidden\");\n          elementRender.empty();\n        } else\n        {\n          var data = self.loadData(\"process\");\n          iconProcess.removeClass('biz-wp-tree-expand-icon');\n          iconProcess.addClass('biz-wp-tree-collapse-icon');\n          elementRender.show();\n          elementRender.css(\"visibility\", \"visible\");\n          self.renderData(data, elementRender);\n        }\n      }\n    });\n  } });","/*\r\n *   Name: BizAgi Render Query Search User\r\n *   Author: Jeison Borja\r\n *   Comments:\r\n *   -   This script will define basic stuff for query search user renders\r\n */\n\n$.Class.extend(\"bizagi.rendering.querySearchUser\", {}, {\n  /*\r\n                                                          * Constructor\r\n                                                          */\n  init: function init(params) {\n    // Call base\n    this._super(params);\n  },\n\n  /*\r\n      * Template method to implement in each children to customize each control\r\n      */\n\n  renderControl: function renderControl() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"render-querySearchUser\");\n    var html = $.fasttmpl(template, {});\n    return html;\n  },\n\n  /*\r\n      *   Fetch the data into a deferred\r\n      */\n  getUserData: function getUserData(params) {\n    var self = this;\n    var properties = self.properties;\n    var defer = new $.Deferred();\n    var form = self.getFormContainer();\n    var contextType = form.getContextType() || false;\n    params = params || {};\n\n    // Verify context type\n    if (self.properties.contexttype) {\n      params.h_contexttype = self.properties.contexttype;\n    } else if (contextType) {\n      params.h_contexttype = contextType;\n    }\n    //GET DATA\n    var data = [{ \"id\": 1, \"value\": \"user1\" }, { \"id\": 2, \"value\": \"user2\" }, { \"id\": 3, \"value\": \"user3\" }, { \"id\": 4, \"value\": \"user4\" }, { \"id\": 5, \"value\": \"user5\" }, { \"id\": 6, \"value\": \"user6\" }, { \"id\": 7, \"value\": \"user7\" }, { \"id\": 8, \"value\": \"user8\" }, { \"id\": 9, \"value\": \"user9\" }, { \"id\": 10, \"value\": \"user10\" }];\n    properties.data = data;\n    defer.resolve(properties.data);\n    return defer.promise(defer);\n\n  },\n\n  /*\r\n      *   Sets the value in the rendered control\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n    var control = self.getControl();\n    var displayValue = self.getDisplayValue();\n\n    if (self.properties.editable == false) {\n      // Render as simple value\n      if (typeof value == \"string\") {\n        var valueToDisplay = bizagi.util.encodeString(displayValue);\n        control.html(valueToDisplay);\n      }\n    }\n\n    // Set internal value\n    self.setValue(value, false);\n  } });","/**\r\n *   Name: Bizagi Render Query Filter Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for query wrapper\r\n */\n\n$.Class.extend(\"bizagi.rendering.queryAdvanced\", {}, {\n\n  MAX_TAGS_SUPPORTED: 50,\n\n  OPERATORS: {\n    \"like\": {\n      label: \"workportal-widget-filter-operators-contains\",\n      defaultLabel: \"Contains\",\n      appliesTo: [\"Text\"],\n      operator: \"APPROX\",\n      action: \"like\" },\n\n    \"equals\": {\n      label: \"workportal-widget-filter-operators-equals-to\",\n      appliesTo: [\"Text\", \"Number\", \"Currency\"],\n      operator: \"EXACT\",\n      action: \"tags\" },\n\n    \"equal\": {\n      label: \"workportal-widget-filter-operators-equals-to\",\n      appliesTo: [\"DateTime\"],\n      operator: \"EXACT\",\n      action: \"equal\" },\n\n    \"not-equals\": {\n      label: \"workportal-widget-filter-operators-different-to\",\n      appliesTo: [\"Text\", \"Number\", \"Currency\"],\n      operator: \"NOTEXACTORNULL\",\n      action: \"tags\" },\n\n    \"starts-with\": {\n      label: \"workportal-widget-filter-operators-starts-with\",\n      defaultLabel: \"Starts with\",\n      appliesTo: [\"Text\"],\n      operator: \"WILDCARD\",\n      action: \"starts-with\" },\n\n    \"ends-with\": {\n      label: \"workportal-widget-filter-operators-ends-with\",\n      defaultLabel: \"Ends with\",\n      appliesTo: [\"Text\"],\n      operator: \"WILDCARD\",\n      action: \"ends-with\" },\n\n    \"greater-equals-than\": {\n      label: \"workportal-widget-filter-operators-greater-or-equal-than\",\n      appliesTo: [\"Number\", \"DateTime\", \"Currency\"],\n      operator: \"FROM\",\n      action: \"from\" },\n\n    \"less-equals-than\": {\n      label: \"workportal-widget-filter-operators-less-or-equal-than\",\n      appliesTo: [\"Number\", \"DateTime\", \"Currency\"],\n      operator: \"TO\",\n      action: \"to\" },\n\n    \"between\": {\n      label: \"workportal-widget-filter-operators-between\",\n      defaultLabel: \"Between\",\n      appliesTo: [\"Number\", \"DateTime\", \"Currency\"],\n      operator: \"BETWEEN\",\n      action: \"between\" },\n\n    \"is-null\": {\n      label: \"workportal-widget-filter-operators-is-empty\",\n      defaultLabel: \"Is empty\",\n      appliesTo: [\"Text\", \"Number\", \"DateTime\", \"Currency\"],\n      operator: \"EXACT\",\n      action: \"is-null\" },\n\n    \"wildcard\": {\n      label: \"Wildcard\",\n      appliesTo: [\"Text\"],\n      operator: \"WILDCARD\",\n      action: \"wildcard\",\n      skip: true },\n\n    \"default\": {\n      label: \"Default\",\n      appliesTo: [\"Number\", \"Currency\"],\n      operator: \"EXACT\",\n      action: \"default\",\n      skip: true } },\n\n\n\n  // region // #region CONTROL BASE\n\n  /**\r\n   * Constructor\r\n   * @param data\r\n   */\n  initializeData: function initializeData(data) {\n\n    // Call base\n    this._super(data);\n\n    var properties = this.properties;\n\n    properties.filterType = properties.filterType || \"\";\n    properties.renderType = this.Class.DATATYPE;\n    properties.data = this.getOptions();\n    properties.orientation = properties.orientation || \"\";\n\n    this.currentFilter = {};\n    this.controlInitial = null;\n    this.controlEnd = null;\n\n  },\n\n  /**\r\n      * Method to customize each render after processed\r\n      */\n  postRender: function postRender() {\n    var $control = this.getControl();\n    this.queryFilter = $(\".bz-query-filter\", $control);\n\n    // Call base\n    this._super();\n  },\n\n  /**\r\n      * Method to customize each control\r\n      * @returns {jQuery}\r\n      */\n  renderControl: function renderControl() {\n    var template = this.renderFactory.getTemplate(\"query.advanced\");\n    var html = $.fasttmpl(template, {});\n\n    return html;\n  },\n\n  processComplexValue: function processComplexValue(value) {\n    var newValue = value;\n    var isString = newValue && $.trim(newValue).length > 0;\n    var isArray = isString && /^\\[.*?\\]$/i.test(newValue);\n\n    if (isString && isArray) {\n      newValue = JSON.parse(newValue);\n    } else if (isString) {\n      newValue = [newValue];\n    } else {\n      newValue = newValue || [];\n    }\n\n    return newValue;\n  },\n\n  /**\r\n      * Method to render non editable values\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    var result;\n\n    if (this.isCurrentDefaultFilter()) {\n      result = this._super();\n    } else {\n      result = this.renderReadOnlyFilter();\n    }\n\n    return result;\n  },\n\n  renderReadOnlyFilter: function renderReadOnlyFilter() {\n    var template = this.renderFactory.getTemplate(\"query.advanced.readonly\");\n    var filter = this.getCurrentFilter();\n    var value = this.getValue() == \"null\" || bizagi.util.isNull(this.getValue()) ? \"\" : this.getValue();\n    var $templateFilterReadonly = $.tmpl(template, {\n      filterName: this.getResourceByKey(filter.label, filter.defaultLabel) });\n\n\n    var $filterValueContainer = $(\".bz-query-advanced__filter\", $templateFilterReadonly);\n\n    if (this.isCurrentBetweenFilter()) {\n      this.renderReadOnlyBetween($filterValueContainer);\n    } else if (this.isCurrentTagFilter()) {\n      this.renderReadOnlyTags($filterValueContainer);\n    } else {\n      $filterValueContainer.append(\"<li class='bz-query-advanced__filter-input'><span>\" + value + \"</span></li>\");\n    }\n\n    return $templateFilterReadonly;\n  },\n\n  renderReadOnlyBetween: function renderReadOnlyBetween(container) {\n    var values = this.processComplexValue(this.getValue());\n    if (values.length === 0) return;\n\n    var valueFrom = values[0] == \"null\" || bizagi.util.isNull(values[0]) ? \"\" : values[0];\n    var valueTo = values[1] == \"null\" || bizagi.util.isNull(values[1]) ? \"\" : values[1];\n    var from = \"<li class='bz-query-advanced__filter-input-from'><span>\" + valueFrom + \"</span></li>\";\n    var to = \"<li class='bz-query-advanced__filter-input-to'><span>\" + valueTo + \"</span></li>\";\n\n    container.append(from).append(to);\n  },\n\n  renderReadOnlyTags: function renderReadOnlyTags(container) {\n    var values = this.processComplexValue(this.getValue());\n    if (values.length === 0) return;\n\n    var template = this.renderFactory.getTemplate(\"query.advanced-pill\");\n\n    // Render tag items\n    values.forEach(function (value) {\n      var $ChildToAdd = $.tmpl(template, {\n        id: this.getTagId(),\n        value: this.formatTagItem(value || \"\"),\n        editable: false });\n\n\n      // Append tag\n      container.append($ChildToAdd);\n    });\n\n  },\n\n  /**\r\n      * The render's behaviour to add handlers\r\n      */\n  configureHandlers: function configureHandlers() {\n    // Call to base\n    this._super();\n\n    // Call to filters\n    this.configureFilterHandlers();\n\n    // Call to tag handlers\n    this.configureTagHandlers();\n\n    // Call to default handlers, Not apply to wildcard filter\n    if (!/Text/i.test(this.properties.renderType))\n    this.configureDefaultHandlers();\n  },\n\n  /**\r\n      * Add handlers to query-filter control\r\n      */\n  configureFilterHandlers: function configureFilterHandlers() {\n    var self = this;\n    var $control = self.getControl();\n    var $filterContainer = $(\".bz-query-advanced__tags\", $control);\n\n    $filterContainer.on(\"click\", function (evt) {\n      var $context = $(evt.target);\n      var isModeWildcard = $control.find(\".bz-query-advanced\").data(\"mode-wildcard\") || false;\n\n      var filterTagExist = self.filterOptionIsShowed();\n      var clickOnFilter = $context.hasClass(\"bz-query-advanced__filter\") ||\n      $context.hasClass(\"bz-query-advanced__tag\") ||\n      $context.hasClass(\"bz-query-advanced__tag-span\") ||\n      $context.hasClass(\"bz-btn-icn bz-query-advanced__tag-arrow\");\n\n      if (!isModeWildcard && (filterTagExist && clickOnFilter || !filterTagExist)) {\n        self.onToggleDataView();\n      }\n\n    });\n\n    $control.on(\"click\", \".bz-query-advanced__clean\", function () {\n      self.onToggleDataOptions();\n    });\n\n  },\n\n  /**\r\n      * Add handlers to query-filter control\r\n      */\n  configureTagHandlers: function configureTagHandlers() {\n    var self = this;\n    var $control = this.getControl();\n\n    // Add pill on enter and tab\n    $control.on(\"keydown\", \"input[data-action='tags']\", function (evt) {\n      var key = evt.key || evt.charCode || evt.keyCode;\n      var valueTag = null;\n\n      if (key === \"Tab\" || key === \"Enter\") {\n        var $tagInput = $(this);\n        valueTag = self.getValidTagValue($tagInput.val());\n\n        if (valueTag) {\n          self.addTag({ id: self.getTagId(), value: valueTag, displayValue: valueTag });\n          $tagInput.val(\"\");\n          evt.preventDefault();\n        }\n      } else if (key === \"Backspace\") {\n        valueTag = $(this).val();\n\n        if (!valueTag) {\n          self.removeLastTag();\n        }\n      }\n    });\n\n    // Add pill on focus out\n    $control.on(\"blur\", \"input[data-action='tags']\", function () {\n      var $tagInput = $(this);\n      var valueTag = self.getValidTagValue($tagInput.val());\n\n      if (valueTag) {\n        self.addTag({ id: self.getTagId(), value: valueTag, displayValue: valueTag });\n        $tagInput.val(\"\");\n      }\n    });\n\n    // Remove pills on click\n    $control.on(\"click\", \".bz-query-advanced__remove-pill-icon\", function (evt) {\n      var tagId = Number($(evt.target).attr(\"data-id\") || 0);\n      self.removeTag(tagId);\n    });\n\n  },\n\n  /**\r\n      * Add handlers to query-filter control\r\n      */\n  configureDefaultHandlers: function configureDefaultHandlers() {\n    var self = this;\n    var $control = self.getControl();\n    var $buttonClean = $(\".bz-query-advanced__clean\", $control);\n\n    $control.on(\"change\", \".bz-query-advanced__input\", function () {\n      if (!self.filterOptionIsShowed()) {\n        if ($.trim(this.value).length > 0) {\n          self.setCurrentFilter({ id: \"default\" });\n          $buttonClean.removeClass('bz-hidden');\n\n          // Hide list of filters\n          self.closeFloatView();\n        } else {\n          self.setCurrentFilter({ id: \"\" });\n          $buttonClean.addClass('bz-hidden');\n        }\n      }\n    });\n  },\n\n  /**\r\n      * Public method to determine if a value is valid or not\r\n      * @param invalidElements\r\n      * @returns {*}\r\n      */\n  isValid: function isValid(invalidElements) {\n    // For base filter\n    if (!this._super(invalidElements)) return false;\n\n    // For single filter\n    if (!!this.controlInitial && !this.controlInitial.isValid(invalidElements)) return false;\n\n    // For between filter\n    if (!!this.controlEnd && !this.controlEnd.isValid(invalidElements)) return false;\n\n    return true;\n  },\n\n  /**\r\n      * Check if a render has no value for required validation\r\n      * @returns {boolean|*}\r\n      */\n  hasValue: function hasValue() {\n    if (this.isCurrentNullFilter()) return true;\n    return this._super();\n  },\n\n  // endregion // #endregion\n\n  // region // #region METHODS TO LIST FILTERS\n\n  /**\r\n   * Toggle of data view\r\n   */\n  onToggleDataView: function onToggleDataView() {\n    this.floatViewIsCollapsed() ? this.closeFloatView() : this.renderFloatView();\n  },\n\n  /**\r\n      * Check if float list is collapsed\r\n      * @returns {boolean}\r\n      */\n  floatViewIsCollapsed: function floatViewIsCollapsed() {\n    var $listView = $(\".bz-query-advanced__content\", this.element);\n\n    return $listView && $listView.length > 0;\n  },\n\n  /**\r\n      * Get data and render the float list view\r\n      */\n  renderFloatView: function renderFloatView() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"query.advanced-item\");\n\n    var filters = self.properties.data;\n    var $floatList = self.showFloatListView(template, { datasource: filters }, {});\n\n    self.floatListHandlers($floatList);\n  },\n\n  /**\r\n      * Show float list view\r\n      * @param template\r\n      * @param data\r\n      */\n  showFloatListView: function showFloatListView(template, data) {\n    var self = this;\n    var $control = self.getControl();\n    var $containerControl = $control.closest(\".ui-bizagi-control-wrapper\");\n    var $containerRender = $containerControl.closest(\".bz-form-old-item\");\n    var $floatList = $.tmpl(template, data);\n    var widthControl = self.queryFilter.width() - 2;\n\n    $containerRender.addClass(\"bz-query-advanced__visible\");\n    $containerControl.addClass(\"bz-query-advanced__visible bz-query-advanced__floats\");\n    $containerControl.append($floatList);\n\n    $floatList.width(widthControl);\n\n    $floatList.position({\n      my: \"left top\",\n      at: \"left bottom\",\n      of: self.queryFilter,\n      collision: \"fit\" }).\n    hide();\n\n    // Display view\n    $floatList.show();\n\n    // Stop bubbling outside the dropdown\n    $floatList.on(\"mousedown\", function (ev) {\n      ev.preventDefault();\n      return false;\n    });\n\n    // Add global handler to close the float view\n    var timeoutMouseDown = setTimeout(function () {\n      $(document).one(\"mousedown.query-advanced\", function () {\n        $floatList.trigger('closeView');\n      });\n      clearTimeout(timeoutMouseDown);\n    }, 0);\n\n    return $floatList;\n  },\n\n  /**\r\n      * Update the float list view\r\n      */\n  closeFloatView: function closeFloatView() {\n    var $control = this.getControl();\n    var $containerControl = $control.closest(\".ui-bizagi-control-wrapper\");\n    var $containerRender = $containerControl.closest(\".bz-form-old-item\");\n\n    var $listView = $($containerRender).find(\".bz-query-advanced__content\");\n\n    $listView.hide();\n\n    this.destroyFloatView($listView);\n  },\n\n  /**\r\n      * Destroy the float list view\r\n      * @param $list\r\n      */\n  destroyFloatView: function destroyFloatView($list) {\n    var $control = this.getControl();\n    var $containerControl = $control.closest(\".ui-bizagi-control-wrapper\");\n    var $containerRender = $containerControl.closest(\".bz-form-old-item\");\n\n    if ($containerControl.hasClass(\"bz-query-advanced__visible\")) {\n      $containerControl.removeClass(\"bz-query-advanced__visible\");\n    }\n\n    if ($containerControl.hasClass(\"bz-query-advanced__floats\")) {\n      $containerControl.removeClass(\"bz-query-advanced__floats\");\n    }\n\n    if ($containerRender.hasClass(\"bz-query-advanced__visible\")) {\n      $containerRender.removeClass(\"bz-query-advanced__visible\");\n    }\n\n    $list.remove();\n  },\n\n  floatListHandlers: function floatListHandlers($floatListContext) {\n    var self = this;\n    var $listContainer = $floatListContext.find(\".bz-query-advanced__list li\");\n\n    $listContainer.click(function () {\n      var $context = $(this);\n\n      var id = $context.data(\"id\");\n      var element = $(\"span\", $context)[0];\n      var value = element.innerText;\n\n      var newValue = { id: id, value: value };\n\n      if (self.getCurrentFilter().id !== newValue.id) {\n        if (!self.filterOptionIsShowed()) {\n          self.showHideCleanButton(true);\n        }\n\n        self.destroyFilterContent();\n        self.setSelectedFilter(newValue);\n      } else {\n        self.closeFloatView();\n      }\n\n\n      // Add focus to first control\n      if (self.controlInitial) {\n        $(\"input\", self.controlInitial.getControl()).focus();\n      }\n    });\n\n\n    $floatListContext.on(\"closeView\", function () {\n      self.closeFloatView();\n\n      $(document).unbind(\"mousedown.query-advanced\");\n    });\n  },\n\n  setSelectedFilter: function setSelectedFilter(item) {\n    this.onFilterChange(item);\n    this.closeFloatView();\n  },\n\n  // endregion // #endregion\n\n  // region // #region METHODS TO TAGS FILTER\n\n  tagIsAdded: function tagIsAdded(newTagItem) {\n    var values = (this.getDataValue() || []).\n    map(function (tagItem) {\n      return tagItem.value;\n    });\n\n    return values.includes(newTagItem.value);\n  },\n\n  addTag: function addTag(tagItem) {\n    if (this.tagIsAdded(tagItem)) return;\n\n    var form = this.getFormContainer();\n    form.clearValidationMessages();\n\n    if (this.isMaximumTagsValid()) {\n      var $container = $(\".bz-query-advanced__filter-input\", this.getControl());\n      var template = this.renderFactory.getTemplate(\"query.advanced-pill\");\n      var $templateItem = $.tmpl(template, {\n        id: tagItem.id,\n        value: tagItem.displayValue,\n        editable: this.properties.editable });\n\n\n      // Append tag\n      $container.before($templateItem);\n\n      // Update data\n      this.addElement(tagItem);\n    } else {\n      var message = this.getResourceByKey(\"workportal-tags-error-limit-exceeded\", \"You cannot add more than #maxTags# criteria elements\").replace(\"#maxTags#\", this.MAX_TAGS_SUPPORTED);\n      form.addErrorMessage(message);\n    }\n  },\n\n  removeTag: function removeTag(tagId) {\n    $(\"li[data-id=\" + tagId + \"]\", this.getControl()).remove();\n    // remove and update data\n    this.removeElement({ id: tagId });\n  },\n\n  removeLastTag: function removeLastTag() {\n    var tags = this.getDataValue();\n    var lastTag = tags[tags.length - 1];\n    // remove and update data\n    if (lastTag) {\n      this.removeTag(lastTag.id);\n    }\n  },\n\n  /**\r\n      * Get new id for tag filter\r\n      * @returns {number}\r\n      */\n  getTagId: function getTagId() {\n    return Math.ceil(Math.random() * 1000000);\n  },\n\n  /**\r\n      * Add format to tag\r\n      * @param value\r\n      * @returns {*}\r\n      */\n  formatTagItem: function formatTagItem(value) {\n    return $.trim(value);\n  },\n\n  /**\r\n      * Add format to string\r\n      */\n  performTagItems: function performTagItems() {\n    var resultString = \"\";\n    var listString = (this.getDataValue() || []).\n    filter(function (item) {\n      return item && !!item.value;\n    }).map(function (item) {\n      return item.value;\n    });\n\n    if (listString.length > 1) {\n      resultString = JSON.encode(listString);\n    } else {\n      resultString = listString && listString[0] || \"\";\n    }\n\n    return resultString;\n  },\n\n  /**\r\n      * Check if maximum number of tag is valid\r\n      * @returns {boolean}\r\n      */\n  isMaximumTagsValid: function isMaximumTagsValid() {\n    var list = this.getDataValue() || [];\n\n    return list && list.length < this.MAX_TAGS_SUPPORTED;\n  },\n\n  /**\r\n      * Get list of data\r\n      * @returns {*|Array}\r\n      */\n  getDataValue: function getDataValue() {\n    var list;\n\n    try {\n      list = JSON.parse(this.value);\n\n      return list || [];\n    } catch (e) {\n      return [];\n    }\n  },\n\n  /**\r\n      * Returns the internal value\r\n      * @returns {*|Array}\r\n      */\n  getValue: function getValue() {\n    if (this.isCurrentTagFilter()) return this.performTagItems();\n\n    // Call to base\n    return this._super();\n  },\n\n  /**\r\n      * Return the value\r\n      * @param {*} value\r\n      */\n  getValidTagValue: function getValidTagValue(value) {\n    return $.trim(value);\n  },\n\n  /**\r\n      * Add elements to global value\r\n      * @param value\r\n      */\n  addElement: function addElement(value) {\n    var newValue = this.getDataValue();\n\n    newValue.push(value);\n\n    this.setValue(newValue);\n  },\n\n  /**\r\n      * Remove elements to global value\r\n      * @param value\r\n      */\n  removeElement: function removeElement(value) {\n    var idToRemove = value.id;\n    var newValue = this.getDataValue().\n    filter(function (item) {\n      return item.id !== idToRemove;\n    });\n\n    this.setValue(newValue);\n  },\n\n  filterOptionIsShowed: function filterOptionIsShowed() {\n    var $control = this.getControl();\n    var $listTag = $(\".bz-query-advanced__filter > .bz-query-advanced__tag\", $control);\n\n    return $listTag && $listTag.length > 0;\n  },\n\n  // endregion // #endregion\n\n  // region // #region METHODS TO QUERY FORMS\n\n  /**\r\n   * Toggle the clean options\r\n   */\n  onToggleDataOptions: function onToggleDataOptions() {\n    this.showHideCleanButton();\n\n    this.cleanDataFilter(true);\n  },\n\n  /**\r\n      * onFilterChange, destroy current content and add render new content\r\n      * @param {*} item\r\n      */\n  onFilterChange: function onFilterChange(item) {\n    // Update filter\n    this.cleanDataFilter(false);\n    this.setCurrentFilter(item);\n\n    var $control = this.getControl();\n    var action = this.getCurrentAction();\n\n    // Remove data-action\n    $(\".bz-query-advanced__input\", $control).removeAttr(\"data-action\");\n    $(\".bz-query-advanced__tags\", $control).removeAttr(\"data-action\");\n\n    if (action) {\n      $(\".bz-query-advanced__tags\", $control).attr(\"data-action\", action);\n\n      this.defineLiteControl({ typeFilter: action });\n\n      if (this.isCurrentNullFilter()) {\n        this.setValue(this.getValue());\n      }\n    }\n  },\n\n  /**\r\n      * Remove data of control\r\n      * @param refresh\r\n      */\n  cleanDataFilter: function cleanDataFilter(refresh) {\n    this.controlInitial = null;\n    this.controlEnd = null;\n\n    this.destroyFilterContent();\n    this.setCurrentFilter({ id: \"\" });\n    this.cleanData();\n\n    $(\".bz-query-advanced__tag\", this.getControl()).remove();\n\n    if (refresh) {\n      this.defineLiteControl({ typeFilter: \"\" });\n    }\n  },\n\n  /**\r\n      * Get type of search\r\n      * @returns {string}\r\n      */\n  getSearchType: function getSearchType() {\n    var currentFilter = this.getCurrentFilter();\n    return currentFilter && currentFilter.operator || \"EXACT\";\n  },\n\n  /**\r\n      * Destroy content of filters\r\n      */\n  destroyFilterContent: function destroyFilterContent() {\n    // Remove data-action\n    $(\".bz-query-advanced__filter\", this.getControl()).empty();\n  },\n\n  /**\r\n      * Perform query-value by search type\r\n      * @param queryValue\r\n      * @param searchType\r\n      * @returns {*}\r\n      */\n  performQueryValue: function performQueryValue(queryValue, searchType) {\n    var newQueryValue = queryValue;\n\n    if (searchType === \"starts-with\") {\n      newQueryValue = newQueryValue ? newQueryValue + \"%\" : \"%\";\n    } else if (searchType === \"ends-with\") {\n      newQueryValue = newQueryValue ? \"%\" + newQueryValue : \"%\";\n    } else if (searchType === \"is-null\") {\n      newQueryValue = \"null\";\n    } else if ([\"equals\", \"not-equals\"].includes(searchType)) {\n      newQueryValue = this.performTagItems();\n    }\n\n    return newQueryValue;\n  },\n\n  formatInputValue: function formatInputValue(value) {\n    return typeof value !== \"undefined\" && !bizagi.util.isEmpty(value) ? value : \"null\";\n  },\n\n  /**\r\n      * Add selected elements\r\n      */\n  addSelectedElements: function addSelectedElements() {\n    var self = this;\n    var $control = this.getControl();\n    var values = this.getDataValue() || [];\n    var editable = this.properties.editable;\n\n    var $tagsContainer = $(\".bz-query-advanced__filter-input\", $control);\n    var template = this.renderFactory.getTemplate(\"query.advanced-pill\");\n\n    // Clean data\n    $tagsContainer.remove(\".bz-query-advanced__pill\");\n\n    // Render tag items\n    values.forEach(function (tagItem) {\n\n      var $ChildToAdd = $.tmpl(template, {\n        id: tagItem.id,\n        value: self.formatTagItem(tagItem.value || \"\"),\n        editable: editable });\n\n\n      // Append tag\n      $tagsContainer.before($ChildToAdd);\n    });\n\n  },\n\n  // endregion // #endregion\n\n  // region // #region METHODS TO LITE CONTROLS\n\n  /**\r\n   * Return render properties\r\n   * @param {*} params\r\n   */\n  getRenderProperties: function getRenderProperties(params) {\n    var self = this;\n    var form = self.getFormContainer();\n    var properties = self.properties;\n\n    params = params || {};\n\n    var propertiesRender = {\n      \"id\": properties.id,\n      \"xpath\": properties.xpath + \"_\" + params.typeControl,\n      \"displayType\": \"value\",\n      \"type\": properties.type,\n      \"orientation\": properties.orientation };\n\n\n    var renderProperties = {\n      data: {\n        properties: $.extend({},\n        propertiesRender,\n        self.getRequiredProperties()) },\n\n      mode: \"execute\",\n      parent: form,\n      renderFactory: self.renderFactory,\n      resources: bizagi.localization,\n      dataService: self.dataService };\n\n\n    if (params.isRange) {\n\n      renderProperties.data.properties.isRange = params.isRange || false;\n      renderProperties.data.properties.isMinimumValue = params.isMinimum || false;\n      renderProperties.data.properties.isMaximumValue = params.isMaximum || false;\n\n      if (params.isMinimum) {\n        renderProperties.data.properties.displayName = bizagi.localization.getResource(\"bz-rp-components-time-from-label\");\n      } else {\n        renderProperties.data.properties.displayName = bizagi.localization.getResource(\"bz-rp-components-time-to-label\");\n      }\n    }\n\n    return renderProperties;\n  },\n\n  /**\r\n      * Define the controls depend of filter type\r\n      * @param params\r\n      */\n  defineLiteControl: function defineLiteControl(params) {\n  },\n\n  /**\r\n      * Set the rendered controls\r\n      * @param controlInitial\r\n      * @param controlEnd\r\n      */\n  setLiteControls: function setLiteControls(controlInitial, controlEnd) {\n  },\n\n  /**\r\n      * Render control\r\n      * @param filterType\r\n      * @param $canvas\r\n      * @param control\r\n      */\n  renderLiteControl: function renderLiteControl(filterType, $canvas, control) {\n  },\n\n  /**\r\n      * Get template by type of control\r\n      * @param filterType\r\n      */\n  getTemplateByType: function getTemplateByType(filterType) {\n  },\n\n  getRequiredProperties: function getRequiredProperties() {\n    return {};\n  },\n\n  // endregion // #endregion\n\n  // region // #region UTILS TO FILTERS\n\n  /**\r\n   * Get Datasource by data type\r\n   * @returns {}\r\n   */\n  getOptions: function getOptions() {\n    var self = this;\n    var operators = self.OPERATORS;\n    var filterType = self.properties.renderType;\n    var result = [];\n\n    for (var item in operators) {\n      var operator = operators[item];\n\n      if ($.inArray(filterType, operator.appliesTo) >= 0 && !operator.skip) {\n        result.push({\n          value: self.getResourceByKey(operator.label, operator.defaultLabel),\n          id: item });\n\n      }\n    }\n\n    return result;\n  },\n\n  showHideCleanButton: function showHideCleanButton(show) {\n    var $control = this.getControl();\n\n    if (!!$control) {\n      var $cleanButton = $(\".bz-query-advanced__clean\", $control);\n      $cleanButton && show ? $cleanButton.removeClass('bz-hidden') : $cleanButton.addClass('bz-hidden');\n    }\n  },\n\n  onToggleHideElement: function onToggleHideElement(elementClass) {\n    var $control = this.getControl();\n\n    if (!!$control) {\n      var $buttonClose = $(elementClass, $control);\n\n      $buttonClose && $buttonClose.toggleClass(\"bz-hidden\");\n    }\n  },\n\n  setCurrentFilter: function setCurrentFilter(filter) {\n    var operators = this.OPERATORS;\n    var idFilter = filter && filter.id ? filter.id : \"\";\n\n    if (idFilter && operators[idFilter]) {\n      this.currentFilter = Object.assign({}, operators[idFilter], { id: idFilter });\n    } else {\n      this.currentFilter = {};\n    }\n\n  },\n\n  getCurrentFilter: function getCurrentFilter() {\n    return this.currentFilter || {};\n  },\n\n  getCurrentAction: function getCurrentAction() {\n    var filter = this.getCurrentFilter();\n    var action = filter && filter.action;\n\n    return action || \"\";\n  },\n\n  isCurrentTagFilter: function isCurrentTagFilter() {\n    return this.isCurrentFilter(\"tags\");\n  },\n\n  isCurrentBetweenFilter: function isCurrentBetweenFilter() {\n    return this.isCurrentFilter(\"between\");\n  },\n\n  isCurrentNullFilter: function isCurrentNullFilter() {\n    return this.isCurrentFilter(\"is-null\");\n  },\n\n  isCurrentWildcardFilter: function isCurrentWildcardFilter() {\n    return this.isCurrentFilter(\"wildcard\");\n  },\n\n  isCurrentContainsFilter: function isCurrentContainsFilter() {\n    return this.isCurrentFilter(\"like\");\n  },\n\n  isCurrentStartsWithFilter: function isCurrentStartsWithFilter() {\n    return this.isCurrentFilter(\"starts-with\");\n  },\n\n  isCurrentEqualsThanFilter: function isCurrentEqualsThanFilter() {\n    return this.isCurrentFilter(\"less-equals-than\") ||\n    this.isCurrentFilter(\"greater-equals-than\");\n  },\n\n  isCurrentEndsWithFilter: function isCurrentEndsWithFilter() {\n    return this.isCurrentFilter(\"ends-with\");\n  },\n\n  isCurrentFilter: function isCurrentFilter(filter) {\n    return this.getCurrentAction() === filter;\n  },\n\n  isCurrentDefaultFilter: function isCurrentDefaultFilter() {\n    var currentAction = this.getCurrentAction();\n    return currentAction === this.defaultFilter ||\n    currentAction === {} ||\n    currentAction === \"\";\n  },\n\n  /**\r\n      * This method returns the localized version of the resource\r\n      * @param resource\r\n      * @param fallback\r\n      * @returns {string}\r\n      */\n  getResourceByKey: function getResourceByKey(resource, fallback) {\n    fallback = fallback || resource;\n\n    return bizagi.localization.getResource(resource, fallback);\n  },\n\n  prepareForSetValue: function prepareForSetValue() {\n    var currentFilter = this.getCurrentFilter();\n    var noFilterSettled = bizagi.util.isEmpty(currentFilter);\n\n    if (noFilterSettled) {\n      this.setFilter(this.defaultFilter);\n    }\n  },\n\n  /**\r\n      * Perform data value by filter type\r\n      * @param value\r\n      * @returns {*}\r\n      */\n  performDataValue: function performDataValue(value) {\n    var self = this;\n    var newValue = value;\n\n    if (self.isCurrentTagFilter()) {\n      var dataList = [];\n      var isString = newValue && $.trim(newValue).length > 0;\n      var isArray = isString && /^\\[.*?\\]$/i.test(newValue);\n\n      if (isString && !isArray) {\n        dataList = [newValue];\n      } else if (isArray) {\n        dataList = self.getDataValue() || [];\n      }\n\n      var list = (dataList || []).map(function (item) {\n        return {\n          id: self.getTagId(),\n          value: item };\n\n      });\n\n      return list || \"\";\n    } else if (newValue && $.trim(newValue).length > 0) {\n      if (self.isCurrentStartsWithFilter()) {\n        newValue = newValue.replace(/%$/i, \"\");\n      } else if (self.isCurrentEndsWithFilter()) {\n        newValue = newValue.replace(/^%/i, \"\");\n      }\n    }\n\n    return newValue;\n  },\n\n  /**\r\n      * Perform list value by filter type\r\n      * @param value\r\n      * @returns {*}\r\n      */\n  performListValue: function performListValue(value) {\n    var action = this.getCurrentAction();\n    var newValue = value;\n\n    if (action === \"between\") {\n      var dataList = [];\n      var isString = newValue && $.trim(newValue).length > 0;\n      var isArray = isString && /^\\[.*?\\]$/i.test(newValue);\n\n      if (isString && isArray) {\n        dataList = JSON.parse(value);\n\n        newValue = {\n          from: dataList[0] && dataList[0] !== \"null\" ? dataList[0] : \"\",\n          to: dataList[1] && dataList[1] !== \"null\" ? dataList[1] : \"\" };\n\n      } else {\n        //if value is not an array\n        newValue = {\n          from: value,\n          to: value };\n\n      }\n    }\n\n    return newValue;\n  },\n\n  /**\r\n      * Update current filter type\r\n      * @param filterType\r\n      */\n  setFilter: function setFilter(filterType) {\n    var action = \"\";\n    var noFilterSettled = bizagi.util.isEmpty(this.getCurrentFilter());\n\n    if (!!filterType) {\n      this.setCurrentFilter({ id: filterType });\n      action = this.getCurrentAction();\n    }\n\n    !noFilterSettled && this.showHideCleanButton(true);\n\n    this.defineLiteControl({ typeFilter: action });\n  },\n\n  // endregion // #endregion\n\n  /**\r\n   * Add the render data to the given collection in order to send data to the server\r\n   * @param renderValues\r\n   */\n  collectDataQueryForm: function collectDataQueryForm(renderValues) {\n    var self = this;\n    var properties = self.properties;\n    var xpath = properties.xpath;\n    var value = self.getValue();\n    var queryValue = null;\n\n    if (!bizagi.util.isEmpty(xpath)) {\n      var searchType = self.getSearchType();\n      var filter = this.getCurrentFilter();\n      var filterType = filter && filter.id || \"\";\n\n      if (value !== null && typeof value !== \"undefined\") {\n        queryValue = value !== \"\" ? value : null;\n      }\n\n      if (queryValue !== null || properties.included || filterType === \"is-null\") {\n        var newQueryValue = self.performQueryValue(queryValue, filterType);\n\n        var newParameter = {\n          value: newQueryValue,\n          included: self.properties.included,\n          xpath: properties.xpath,\n          searchType: searchType,\n          orderType: \"NONE\",\n          filterType: filterType,\n          advancedQuery: properties.advancedQuery || false,\n          renderId: self.getRenderId() };\n\n\n        if (typeof properties.displayXpath !== \"undefined\" && properties.displayXpath !== \"\") {\n          newParameter.displayXpath = properties.displayXpath;\n        }\n\n        renderValues.push(newParameter);\n      }\n    }\n  } });","/*\r\n*   Name: Bizagi Device Render Factory\r\n*   Author: UI Forms Team\r\n*   Comments:\r\n*   -   This script will detect the current device and then will load the appropriate factory on demand\r\n*/\n\n$.Class.extend(\"bizagi.rendering.device.factory\", {}, {\n\n  /**\r\n                                                         * Constructor, detects the device\r\n                                                         * @param params\r\n                                                         */\n  init: function init(params) {\n    this.execution_device = bizagi.util.detectDevice();\n    this.cachedFactory = {};\n  },\n\n  /**\r\n      * Returns the appropriate render factory based on the device detection\r\n      * Because it loads the scripts on demand it must return a promise\r\n      * @param dataService\r\n      * @param device\r\n      * @returns {*}\r\n      */\n  getRenderFactory: function getRenderFactory(dataService, device) {\n    var self = this;\n    device = device || \"desktop\";\n    var defer = new $.Deferred();\n\n    if (typeof self.cachedFactory[device] !== \"undefined\") {\n      // Reset print version value\n      self.cachedFactory[device].printVersion = false;\n      // Resolve with cached factory                \n      defer.resolve(self.cachedFactory[device]);\n    } else {\n      // If factory is not cached then build it\n      if (device === \"print\") {\n\n        // Load print version references\n        self.cachedFactory[device] = new bizagi.rendering.print.factory(dataService);\n\n        // Wait for async loading\n        self.cachedFactory[device].initAsyncStuff().\n        done(function () {\n          // Resolve operation\n          defer.resolve(self.cachedFactory[device]);\n        });\n\n      } else if (device === \"desktop\") {\n\n        // Load desktop references\n        self.cachedFactory[device] = new bizagi.rendering.desktop.factory(dataService);\n\n        // Wait for async loading\n        self.cachedFactory[device].initAsyncStuff().\n        done(function () {\n          // Resolve operation\n          defer.resolve(self.cachedFactory[device]);\n        });\n\n      } else if (bizagi.util.isTabletDevice(device)) {\n\n        // Load tablet references\n        self.cachedFactory[device] = new bizagi.rendering.tablet.factory(dataService);\n\n        // Wait for async loading\n        self.cachedFactory[device].initAsyncStuff().\n        done(function () {\n          // Resolve operation\n          defer.resolve(self.cachedFactory[device]);\n        });\n      } else if (bizagi.util.isSmartphoneDevice(device)) {\n\n        // Load tablet references\n        self.cachedFactory[device] = new bizagi.rendering.smartphone.factory(dataService);\n\n        // Wait for async loading\n        self.cachedFactory[device].initAsyncStuff().\n        done(function () {\n\n          // Resolve operation\n          defer.resolve(self.cachedFactory[device]);\n        });\n      } else {\n        // if no device suuported\n        bizagi.showMessageBox(\"Not supported device: \" + device);\n        defer.reject(\"Not supported device: \" + device);\n      }\n    }\n\n    return defer.promise();\n  },\n\n  /**\r\n      * Returns the current data service being used\r\n      * @returns {*}\r\n      */\n  getDataService: function getDataService() {\n    return this.dataService;\n  } });","/*\r\n*   Name: BizAgi Workportal Security Command\r\n*   Author: David Andres Nio\r\n*   Comments:\r\n*   -   This script will define a common class to print forms, and edit mode forms\r\n*/\n\n\n$.Class(\"bizagi.workportal.command.printform\", {}, {\n\n  init: function init(renderFactory) {\n    var self = this;\n\n    self.renderFactory = renderFactory;\n  },\n\n  print: function print(properties) {\n\n    var self = this;\n\n    var printParams = $.extend({}, properties);\n\n    $(document).triggerHandler(\"showDialogWidget\", {\n      widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_PRINT,\n      modalParameters: {\n        title: bizagi.localization.getResource(\"render-actions-print\"),\n        refreshInbox: false },\n\n      params: printParams,\n      referrer: bizagi.hasOwnProperty('referrerParams') && bizagi.referrerParams.hasOwnProperty('referrer') ? bizagi.referrerParams.referrer : \"inboxGrid\",\n      buttons: [\n      {\n        text: bizagi.localization.getResource(\"workportal-widget-dialog-box-print\"),\n        click: function click() {\n          var selfButton = $(this);\n\n          var frameTemplate = self.renderFactory.getTemplate(\"print-frame\");\n          var headerTemplate = self.renderFactory.getTemplate(\"print-frame-header\");\n\n          var executePrintWidgetAction = function executePrintWidgetAction() {\n\n            /**/\n            // Create a random name for the print frame.\n            var strFrameName = \"printer-\" + new Date().getTime();\n\n            var jFrame = $.tmpl(frameTemplate, { printID: strFrameName });\n            var jFrameHeader = $.tmpl(headerTemplate, { environment: bizagi.loader.environment, productBuild: bizagi.loader.productBuildToAbout, build: bizagi.loader.productBuild });\n\n            if (!printParams.fileName) {\n              printParams.fileName = window.parent.document.title;\n            }\n\n            jFrame.appendTo($(\"body:first\"));\n\n            // Get a FRAMES reference to the new frame.\n            var objFrame;\n\n            if (bizagi.util.isIE()) {\n              objFrame = window.frames[strFrameName];\n              if (!objFrame) {\n                var i = 0;\n                var length = window.frames.length;\n                for (; i < length; i++) {\n                  if (window.frames[i] && window.frames[i].name == strFrameName) {\n                    objFrame = window.frames[i];\n                    break;\n                  }\n                }\n              }\n            } else {\n              objFrame = window.frames[strFrameName];\n            }\n\n            // Get a reference to the DOM in the new frame.\n            var objDoc = objFrame.document || objFrame.contentWindow.document;\n\n            // Write the HTML for the document. In this, we will\n            // write out the HTML of the current element.\n            objDoc.open();\n            var objDocStr = \"<!DOCTYPE html PUBLIC \\\"-//W3C//DTD XHTML 1.0 Transitional//EN\\\" \\\"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\\\">\";\n\n            objDocStr += \"<html style='overflow: visible !important'> <head> <title>\" + printParams.fileName + \"</title>\";\n\n            objDocStr += jFrameHeader[0].innerHTML;\n\n            objDocStr += \"</head> <body class='bz-wp-widget-print bz-wp-widget-print-load' style='overflow: visible !important'>\";\n\n            objDocStr += $(\".bz-wp-widget-print\").html();\n\n            objDocStr += \"</body></html>\";\n\n\n            objDoc.write(objDocStr);\n\n            objDoc.close();\n            $(\".ui-bizagi-cell-readonly\", objDoc).css(\"maxHeight\", \"100%\");\n            if (bizagi.util.isIE()) {\n              var win = window.open(\"\", \"\", \"top=0,left=0,width=10,height=10\");\n\n              var styleLoading = '';\n              styleLoading += '<style>';\n              styleLoading += 'html{background:#293f55; color:#fff; text-align:center;}';\n              styleLoading += '</style>';\n\n              var textStyle = 'padding:10px auto; width:100%; text-align:center; font-family:Arial; font-size:12px;';\n\n              win.document.open();\n              win.document.write(styleLoading + '<div id=\"loading-emp\" style=\"' + textStyle + '\">' + bizagi.localization.getResource(\"webpart-render-loading\") + '</div>');\n              win.document.close();\n\n              win.document.open();\n              win.document.write(objDocStr);\n              win.document.close();\n\n              win.print();\n              var timeoutClose = setTimeout(function () {\n                win.close();\n                clearTimeout(timeoutClose);\n              }, 10000);\n            } else\n            {\n              objFrame.focus();\n              var tmpWindowTitle = window.parent.document.title;\n              window.parent.document.title = printParams.fileName;\n\n              var timeoutPrint = setTimeout(function () {\n                objFrame.print();\n                window.parent.document.title = tmpWindowTitle;\n                clearTimeout(timeoutPrint);\n              }, 500);\n            }\n\n            // Have the frame remove itself in about a minute so that\n            // we don't build up too many of these frames.\n            var timeoutRemove = setTimeout(function () {\n              jFrame.remove();\n              clearTimeout(timeoutRemove);\n            }, 1000);\n\n            selfButton.removeAttr('disabled');\n          };\n\n          selfButton.attr('disabled', 'disabled');\n\n\n          if ($('#bz-wp-widget-print').length === 0) {\n            var timeoutWidgetAction = setTimeout(function () {\n              executePrintWidgetAction();\n              clearTimeout(timeoutWidgetAction);\n            }, 1000);\n          } else {\n            executePrintWidgetAction();\n          }\n        } }] });\n\n\n\n  } });","/**\r\n * This file contains all keys that can be change the default functionality\r\n * of Bizagi, please use it carefully.\r\n *\r\n * @author Edward J Morales\r\n */\n\n\n/**\r\n     * Enable deprecated features from form editor\r\n     *\r\n     * @type {boolean}\r\n     */\nbizagi.override.enableDeprecatedProperties = true;\n\n/**\r\n                                                    * Enable custom interceptor\r\n                                                    *\r\n                                                    * @type {boolean}\r\n                                                    */\nbizagi.jqxhrList.intercept = true;\n\n/**\r\n                                    * Change the editability of read-only forms\r\n                                    * @type {boolean}\r\n                                    */\nbizagi.override.changeEditabilityOnReadOnlyForms = false;","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /**\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: Bizagi Desktop queryDate\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: UI Forms Team\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments: queryDateAdvanced\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This script will redefine the query text-advanced render class to adjust to desktop devices\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\n// Extends from render Desktop base\nbizagi.rendering.desktop.render.extend(\"bizagi.rendering.desktop.queryDateAdvanced\", bizagi.rendering.render.base.prototype);\n// Extends itself\nbizagi.rendering.desktop.queryDateAdvanced.extend(\"bizagi.rendering.desktop.queryDateAdvanced\", bizagi.rendering.queryAdvanced.prototype);\n// Extends itself\nbizagi.rendering.desktop.queryDateAdvanced.extend(\"bizagi.rendering.desktop.queryDateAdvanced\", {\n  DATATYPE: \"DateTime\" },\n{\n\n  // region // #region CONTROL BASE\n\n  /**\r\n   * Update or init the element data\r\n   * @param data\r\n   */\n  initializeData: function initializeData(data) {\n    // Call base\n    this._super(data);\n\n    this.isNewRenderForm = true;\n    this.defaultFilter = this.isExecutionMode() ? \"equal\" : \"\";\n\n    // Fill default properties\n    var properties = this.properties;\n    var dateFormat = this.getResource(\"dateFormat\");\n    var timeFormat = this.getResource(\"timeFormat\");\n\n    properties.showTime = typeof properties.showTime !== \"undefined\" ? bizagi.util.parseBoolean(properties.showTime) : false;\n    properties.dateFormat = properties.dateFormat || dateFormat;\n    properties.timeFormat = properties.timeFormat || timeFormat;\n    properties.fullFormat = properties.dateFormat;\n\n    var maxUndefinedYear = parseInt(new Date().getFullYear() + 200).toString();\n    var minUndefinedYear = parseInt(new Date().getFullYear() - 200).toString();\n\n    if (typeof properties.maxValue == \"undefined\") properties.maxValue = \"12/31/\" + maxUndefinedYear + \" 00:00:00\"; //Current year + 200 IE or 9999\n    if (typeof properties.minValue == \"undefined\") properties.minValue = \"01/01/\" + minUndefinedYear + \" 00:00:00\"; //Current year - 200 IE or 1753 for SQL Server compat\n\n    if (properties.value) this.value = properties.value;\n  },\n\n  /**\r\n      * Customize each render after processed\r\n      */\n  postRender: function postRender() {\n    var filterType = this.properties.filterType || \"\";\n\n    // Call to base\n    this._super();\n\n    // Call to repaint filters\n    this.setFilter(filterType);\n  },\n\n  /**\r\n      * Sets the internal value\r\n      * @param value\r\n      * @param triggerEvents\r\n      */\n  setValue: function setValue(value, triggerEvents) {\n    triggerEvents = triggerEvents !== undefined ? triggerEvents : true;\n\n    value = Array.isArray(value) ? JSON.encode(value) : value;\n    this._super(value, triggerEvents);\n  },\n\n  /**\r\n      * Sets the value in the rendered control\r\n      * @param value\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n\n    if (self.properties.editable)\n    self.prepareForSetValue();\n\n    var action = this.getCurrentAction();\n\n    // Set internal value\n    this.setValue(value, false);\n\n    // Update clean icon\n    if (this.isExecutionMode()) {\n      self.showHideCleanButton(true);\n    } else {\n      this.controlInitial && this.controlInitial.setDisplayValue(value);\n    }\n\n    // Render by filter type\n    if (value && [\"to\", \"from\", \"equal\"].includes(action)) {\n      this.controlInitial && this.controlInitial.setDisplayValue(value);\n    } else if (value && [\"between\"].includes(action)) {\n      var newValue = self.performListValue(value);\n\n      if (newValue.from) this.controlInitial && this.controlInitial.setDisplayValue(newValue.from);\n      if (newValue.to) this.controlEnd && this.controlEnd.setDisplayValue(newValue.to);\n    }\n  },\n\n  /**\r\n      * Returns the html templated element\r\n      * @returns {*}\r\n      */\n  renderElement: function renderElement() {\n    return this._super(\"render-base\");\n  },\n\n  /**\r\n      *  Changes the render required\r\n      * @param argument\r\n      */\n  changeRequired: function changeRequired(argument) {\n    this.properties.required = argument;\n\n    this.changeRequiredLabel(argument);\n  },\n\n  /**\r\n      * Change cell required and attach bindings\r\n      * @param argument\r\n      */\n  changeCellRequired: function changeCellRequired(argument) {\n    this.changeRequired(argument);\n  },\n\n  /**\r\n      * This method just make a toggle of red label indicator\r\n      * @argument {boolean} argument\r\n      */\n  changeRequiredLabel: function changeRequiredLabel(argument) {\n    var control = this.getControl();\n\n    if (control.length > 0) {\n      if (this.getMode() !== \"execution\") {\n        if (bizagi.util.parseBoolean(argument) === true && this.properties.editable) {\n          control.addClass(\"control-required\");\n        } else {\n          control.removeClass(\"control-required\");\n        }\n      } else {\n        if (bizagi.util.parseBoolean(argument) === true && !this.hasValue() && this.properties.editable) {\n          control.addClass(\"control-required\");\n        } else {\n          control.removeClass(\"control-required\");\n        }\n      }\n    }\n    this.triggerRenderValidate();\n  },\n\n  /**\r\n      * Returns the internal value\r\n      * @returns {*|Array}\r\n      */\n  getValue: function getValue() {\n    if (this.isCurrentBetweenFilter()) {\n      var initial = this.controlInitial ? this.formatInputValue(this.controlInitial.getValue()) : \"null\";\n      var end = this.controlEnd ? this.formatInputValue(this.controlEnd.getValue()) : \"null\";\n      var newValue = [initial, end];\n\n      return initial === \"null\" && end === \"null\" ? \"\" : JSON.encode(newValue);\n    }\n\n    if (this.isCurrentNullFilter()) return null;\n\n    // Call to base\n    return this.controlInitial ? this.controlInitial.getValue() : \"\";\n  },\n\n  /**\r\n      * Get the label element\r\n      * @returns {jQuery|HTMLElement}\r\n      */\n  getLabel: function getLabel() {\n    return $(\"label\", this._super());\n  },\n\n  // endregion // #endregion\n\n  // region // #region METHODS TO LITE CONTROLS\n\n  /**\r\n   * Define the controls depend of filter type\r\n   * @param {*} params\r\n   */\n  defineLiteControl: function defineLiteControl(params) {\n    var self = this;\n    var typeFilter = params && params.typeFilter || \"advanced\";\n    var dateEnd = null;\n    var dateInitial = new bizagi.rendering.desktop.dateAdvanced(\n    self.getRenderProperties({\n      typeControl: typeFilter,\n      isRange: this.isCurrentBetweenFilter(),\n      isMinimum: true }));\n\n\n\n    if (this.isCurrentBetweenFilter()) {\n      dateEnd = new bizagi.rendering.desktop.dateAdvanced(\n      self.getRenderProperties({\n        typeControl: typeFilter + \"_to\",\n        isRange: this.isCurrentBetweenFilter(),\n        isMaximum: true }));\n\n\n\n      dateInitial.subscribe(dateEnd);\n      dateEnd.subscribe(dateInitial);\n    }\n\n    self.setLiteControls(dateInitial, dateEnd);\n  },\n\n  /**\r\n      * set the rendered controls\r\n      * @param {*} controlInitial\r\n      * @param {*} controlEnd\r\n      */\n  setLiteControls: function setLiteControls(controlInitial, controlEnd) {\n    var self = this;\n    var control = self.getControl();\n\n    var filter = this.getCurrentFilter();\n    var filterType = filter && filter.action || \"default\";\n\n    self.controlInitial = controlInitial || null;\n    self.controlEnd = controlEnd || null;\n\n    var template = this.renderFactory.getTemplate(\"query.advanced-content\");\n    var $templateItem = $.tmpl(template, {\n      value: self.getResourceByKey(filter.label, filter.defaultLabel),\n      id: filter.id,\n      filterType: filterType });\n\n\n    var $canvas = $(\".bz-query-advanced__filter\", control).empty();\n\n    if (this.isCurrentBetweenFilter()) {\n      $canvas.append($templateItem);\n\n      var $dateMin = $(\".bz-query-advanced__filter-input-from\", $canvas);\n      var $dateMax = $(\".bz-query-advanced__filter-input-to\", $canvas);\n\n      self.renderLiteControl(filterType, $dateMin, self.controlInitial);\n      self.renderLiteControl(filterType, $dateMax, self.controlEnd);\n    } else {\n      $canvas.append($templateItem);\n\n      var $dateInitial = $(\".bz-query-advanced__filter-input\", $canvas);\n      self.renderLiteControl(filterType, $dateInitial, controlInitial);\n    }\n  },\n\n  /**\r\n      * Render control\r\n      * @param {*} filterType\r\n      * @param {*} $canvas\r\n      * @param {*} control\r\n      */\n  renderLiteControl: function renderLiteControl(filterType, $canvas, control) {\n    var self = this;\n\n    // templates: input or between\n    $.when(control.render(this.getTemplateByType(filterType))).done(function (html) {\n      $canvas.empty().append(html);\n\n      var $inputFiler = $(\".bz-query-advanced__input, .bz-input-icon__input\", $canvas);\n\n      if (self.isCurrentNullFilter() || filterType === \"default\") {\n        $inputFiler.attr(\"readonly\", true);\n      }\n\n      control.postRenderElement($canvas, true); // true for skip design hack\n      self.configureInternalHandlers(control);\n\n      if (filterType === \"default\" && !self.isDesignMode()) {\n        control.disablePopup();\n      }\n    });\n  },\n\n  /**\r\n      * Get template\r\n      * @param {*} filterType\r\n      */\n  getTemplateByType: function getTemplateByType(filterType) {\n    if (filterType === \"is-null\") return \"query.advanced-input\";\n    return \"query.advanced-date\";\n  },\n\n  configureInternalHandlers: function configureInternalHandlers(control) {\n    var self = this;\n    var $internalControl = control.getDateControl();\n\n    // Handler for update data value\n    $internalControl.bind(\"change\", function () {\n      self.setValue(self.getValue());\n    });\n  },\n\n  getRequiredProperties: function getRequiredProperties() {\n    var properties = this.properties;\n    return {\n      showTime: false,\n      minValue: properties.minValue,\n      maxValue: properties.maxValue,\n      dateFormat: properties.dateFormat,\n      timeFormat: properties.timeFormat,\n      fullFormat: properties.fullFormat };\n\n  },\n\n  // endregion // #endregion\n\n  // region // #region A&V METHODS\n  /**\r\n   * Sets milliseconds to 0 in date\r\n   * @param {Date} date date to be treated\r\n   * @returns {Date} date converted with milliseconds 0\r\n   */\n  getNormalizeDate: function getNormalizeDate(date) {\n    var self = this;\n    if (date != 0 && date != null) {\n      if (!self.properties.showTime) {\n        date.setHours(0, 0, 0, 0);\n      } else date.setMilliseconds(0);\n    }\n    return date;\n  },\n\n  /*\r\n      *   Changes the render min value\r\n      */\n  changeMinValue: function changeMinValue(value) {\n    var self = this;\n    var properties = self.properties;\n    var ud = bizagi.util.dateFormatter;\n\n    // Set value in control\n\n    if (typeof value === \"number\") {\n      value = ud.formatInvariant(self.getNormalizeDate(new Date(value)), properties.showTime); // Set as invariant\n    } else {\n      value = self.getNormalizeDate(_typeof(value) === \"object\" ? value : ud.getDateFromInvariant(value, properties.showTime));\n      value = ud.formatInvariant(value);\n    }\n    properties.minValue = value;\n\n    if (self.controlInitial) self.controlInitial.changeMinValue(value);\n    if (self.controlEnd) self.controlEnd.changeMinValue(value);\n  },\n\n  /*\r\n      *   Changes the render max value\r\n      */\n  changeMaxValue: function changeMaxValue(value) {\n    var self = this;\n    var properties = self.properties;\n    var ud = bizagi.util.dateFormatter;\n\n    if (typeof value === \"number\") {\n      value = ud.formatInvariant(self.getNormalizeDate(new Date(value)), properties.showTime); // Set as invariant\n    } else {\n      value = self.getNormalizeDate(_typeof(value) === \"object\" ? value : ud.getDateFromInvariant(value, properties.showTime));\n      value = ud.formatInvariant(value);\n    }\n    properties.maxValue = value;\n\n    if (self.controlInitial) self.controlInitial.changeMaxValue(value);\n    if (self.controlEnd) self.controlEnd.changeMaxValue(value);\n  },\n\n  /**\r\n      * Customizes render color\r\n      * @param {} color\r\n      * @returns {}\r\n      */\n  changeColor: function changeColor(color) {\n    var $control = this.getControl();\n\n    // To review: Save the command to propagate action when filter is changed\n    if (this.controlInitial) this.controlInitial.changeColor(color, true);\n    if (this.controlEnd) this.controlEnd.changeColor(color, true);\n\n    return this._super(color).changeFontColor($(\"label\", $control), color);\n  }\n  // endregion // #endregion\n});\n\n\n// Extends from render desktop base\nbizagi.rendering.desktop.date.extend(\"bizagi.rendering.desktop.dateAdvanced\", {}, {\n  /**\r\n                                                                                     * Define new scope\r\n                                                                                     */\n  getControl: function getControl() {\n    var self = this;\n    if (!self.control || self.control instanceof jQuery && self.control.length === 0) {\n      self.control = $(self.element || self.observableElement);\n    }\n    if (!self.control || self.control.length === 0) {\n      return null;\n    }\n    return self.control;\n  },\n\n  /**\r\n      * Add subscribe\r\n      * @param {*} control\r\n      */\n  subscribe: function subscribe(control) {\n    this.observer = this.observer || [];\n    this.observer.push(control);\n  },\n\n  /**\r\n      * Notify all subscribers\r\n      * @param {*} value\r\n      */\n  notify: function notify(value) {\n    if (this.properties.isRange) {\n      for (var i = this.observer.length - 1; i >= 0; i--) {\n        if (this.properties.isMaximumValue) {\n          this.observer[i].changeMaxValue(value);\n        } else if (this.properties.isMinimumValue) {\n          this.observer[i].changeMinValue(value);\n        }\n      }\n    }\n  },\n\n  setValue: function setValue(value) {\n    value = value || \"\";\n    this._super(value);\n    this.notify(value);\n  },\n\n  getInputControl: function getInputControl() {\n    return $(\"input\", this.getControl()) || null;\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /**\r\n                                                                                                                                                                                                                                                                                                                                                                                * Device definition of Polymorphic launcher\r\n                                                                                                                                                                                                                                                                                                                                                                                *\r\n                                                                                                                                                                                                                                                                                                                                                                                * @author: Edward J Morales\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\n// Extends from render desktop base\nbizagi.rendering.desktop.render.extend(\"bizagi.rendering.desktop.polymorphicLauncher\", bizagi.rendering.polymorphicLauncher.prototype);\n// Extends itself\nbizagi.rendering.desktop.polymorphicLauncher.extend(\"bizagi.rendering.desktop.polymorphicLauncher\", {}, {\n  /**\r\n                                                                                                           * Render a specific implementation for Desktop device\r\n                                                                                                           */\n  postRender: function postRender() {\n    var self = this;\n    var properties = self.properties;\n    var mode = self.getMode();\n    var html, template;\n    var def = new $.Deferred();\n\n    if (mode == \"design\" || !self.properties.surrogatedKey) {\n      return \"\";\n    }\n\n    self.configureQueueVisibility();\n\n    /**\r\n                                      * Render a template\r\n                                      * @param template\r\n                                      * @param templateArguments\r\n                                      */\n    function appendContent(template, templateArguments) {\n      var control = self.getControl();\n      var actionsContainer = $(\".bz-action-launcher-actions-container\", control);\n      html = $.fasttmpl(template, templateArguments);\n      actionsContainer.append(html);\n      if (self.properties.readOnly !== true) {\n        self.configureHandlers();\n      }\n\n      def.resolve(actionsContainer);\n    }\n\n    /**\r\n       * Define params to get list of actions\r\n       */\n    $.when(self.dataService.multiaction().getPolymorphicActions(self.processPropertyValueArgs)).done(function (response) {\n      // Convert default response to tree data structure\n      response = self.dataService.serializePolymorphicActions(response);\n\n\n      self.totalActions = bizagi.clone(response);\n      var actions = bizagi.clone(response);\n\n      self.lessActions = bizagi.clone(actions);\n\n\n      // NOTE: Code extracted\n      var templateArguments = {\n        actions: actions,\n        allowSearch: properties.allowSearch,\n        treeActionsList: self.getTreeItems(actions) };\n\n      template = self.renderFactory.getTemplate(\"render-polymorphicLauncher-vertical-tree\");\n\n      appendContent(template, templateArguments);\n\n    }).fail(function (error) {\n      def.fail(error);\n    });\n\n    return def.promise();\n  },\n\n  /**\r\n      * Get rendered html of each node of constructors\r\n      * @param actions\r\n      * @param level\r\n      * @return {string}\r\n      */\n  getTreeItems: function getTreeItems(actions, level) {\n    var self = this;\n    var item = \"<ul>\";\n    var templateTreeItem = self.renderFactory.getTemplate(\"render-polymorphicLauncher-vertical-tree-item\");\n    actions = actions || {};\n    level = level || 1;\n\n    $.each(actions, function (key, value) {\n      item += $.fasttmpl(templateTreeItem, value);\n\n      if (value.children) {\n        item += self.getTreeItems(value.children, level + 1);\n      }\n    });\n    item += \"</ul>\";\n    return item;\n  },\n\n  /**\r\n      * Add binding to html elements\r\n      */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    var control = self.getControl();\n    var formContainer = self.getFormContainer();\n    if (typeof formContainer.params.printversion === \"undefined\" || formContainer.params.printversion == false) {\n      var actionLauncherControls = $(\".ui-bizagi-render-polymorphicLauncher-list li>span\", control);\n\n      //Binding for click action on buttons\n      actionLauncherControls.on(\"click\", function () {\n        var $targetData = $(this).parent();\n        var action = {\n          guidEntity: $targetData.data(\"guidentity\"),\n          guidObject: $targetData.data(\"guidobject\"),\n          guidConstructor: $targetData.data(\"guidconstructor\"),\n          displayName: $targetData.data(\"display-name\"),\n          actionType: $targetData.data(\"action-type\"),\n          xpathContext: $targetData.data(\"xpathcontext\") };\n\n        self.onActionClicked(action);\n      });\n      //Catch the typed text in the search field and filter the action list\n      $.expr[\":\"].FilterAction = function (entity, i, array) {\n        var search = array[3];\n        if (!search) {\n          return false;\n        }\n        return new RegExp(search, \"i\").test($(entity).text());\n      };\n      $(\"input#ui-bizagi-render-action-launcher-filter-input\", control).keyup(function () {\n        var search = $(this).val();\n\n        if (search) {\n          // Hide all nodes\n          $(\"li\", control).hide(0);\n          // Show only the nodes that match with the respective search pattern\n          $(\"li[data-hasconstructor='true']\", control).filter(\":FilterAction(\" + search + \")\").show(0, function () {\n            var actualValue = $(\"label\", this).html();\n            var $node = $(this);\n            var path = $node.data(\"parents\") + $node.data(\"title\");\n            // Set value to cache\n            if (!$node.data(\"cachedvalue\")) {\n              $node.data(\"cachedvalue\", actualValue);\n            }\n            $(\"label\", this).html(path);\n          });\n        } else {\n          $(\"li\", control).show(0, function () {\n            var cachedValue = $(this).data(\"cachedvalue\");\n            $(\"label\", this).html(cachedValue);\n          });\n        }\n      });\n    }\n  },\n\n  /**\r\n      * Execute an Action\r\n      * @param action\r\n      */\n  onActionClicked: function onActionClicked(action) {\n    var self = this;\n\n    $.when(self.actionManager(action)).done(function (act) {\n      self.executeAction(act);\n    });\n  },\n\n  /**\r\n      * Show a message when action has been executed\r\n      * @param status\r\n      * @param action\r\n      */\n  notifyExecution: function notifyExecution(status, action) {\n    var self = this;\n    var notifications = new bizagi.INotifications();\n    if (status == \"success\") {\n      notifications.showSucessMessage(printf(self.getResource(\"render-action-launcher-success-excecution\"), action.displayName), null, {});\n    } else {\n      notifications.showErrorMessage(printf(self.getResource(\"render-action-launcher-failed-excecution\"), action.displayName), null, {});\n    }\n  },\n\n  /**\r\n      * Show a dialog with a form\r\n      * @param action\r\n      * @return {*}\r\n      */\n  processActionForm: function processActionForm(action) {\n    var self = this;\n    var properties = self.properties;\n    var form = self.getFormContainer();\n    var additionalXpaths = self.properties.additionalXpath.join(\",\");\n    var def = new $.Deferred();\n    var xpathContext = action.xpathContext || \"\";\n    var surrogatedKey;\n    if (self.properties.type !== \"polymorphicLauncher\") {\n      surrogatedKey = _typeof(self.properties.surrogatedKey) == \"object\" && self.properties.surrogatedKey.length > 1 ? self.properties.surrogatedKey : self.properties.surrogatedKey[0];\n    }\n\n    var recordXpath = self.properties.recordXpath;\n\n    // Show dialog with new form after that\n    var dialog = new bizagi.rendering.dialog.form(self.dataService, self.renderFactory, {\n      title: properties.detailLabel || bizagi.localization.getResource(\"render-grid-details-form\"),\n      showSaveButton: true,\n      cancelButtonLabel: bizagi.localization.getResource(\"render-form-dialog-box-close\"),\n      onSave: function onSave(data) {\n        var pageCache = data.idPageCache;\n        data.idPageCache = null;\n        // Submit the form\n        return self.dataService.multiaction().submitData({\n          action: \"SAVE\",\n          data: data,\n          xpathContext: dialog.form.properties.xpathContext, //self.properties.xpathContext,\n          idPageCache: pageCache,\n          isOfflineForm: false,\n          isActionStartForm: true }).\n        pipe(function (savedData) {\n          if (!action.editMode && self.countSameActions(action) == 0) {\n            action.idStartScope = savedData.IdScope;\n          }\n          def.resolve(savedData.IdScope);\n        });\n      },\n      onCancel: function onCancel(data) {\n\n      } });\n\n\n    dialog.render({\n      \"idForm\": action.guidObject,\n      \"contextType\": \"entity\",\n      \"guidEntity\": action.guidEntity,\n      \"idCase\": self.properties.caseId,\n      \"idWorkitem\": form.properties.typeForm != \"SummaryForm\" ? bizagi.context.idWorkitem : undefined,\n      \"additionalXpaths\": additionalXpaths,\n      //\"xpathContext\": xpathContext,\n      \"idStartScope\": action.idStartScope,\n      \"surrogateKey\": surrogatedKey,\n      \"recordXpath\": recordXpath });\n\n\n    return def.promise();\n  },\n\n  /**\r\n      * Process a start form\r\n      * @param args\r\n      * @return {*}\r\n      */\n  processStartForm: function processStartForm(args) {\n    var self = this;\n    var properties = self.properties;\n    var form = self.getFormContainer();\n    var def = new $.Deferred();\n    var surrogatedKey;\n    if (self.properties.type !== \"polymorphicLauncher\") {\n      surrogatedKey = _typeof(self.properties.surrogatedKey) == \"object\" && self.properties.surrogatedKey.length > 1 ? self.properties.surrogatedKey : self.properties.surrogatedKey[0];\n    }\n    args = args || {};\n\n    var dialog = new bizagi.rendering.dialog.startForm(self.dataService, self.renderFactory, {\n      //showSaveButton: properties.editable,\n      maximized: properties.maximized,\n      title: args.title || \"\",\n      saveButtonLabel: self.typeForm == \"GlobalForm\" || this.typeForm == \"SummaryForm\" ? bizagi.localization.getResource(\"render-form-button-create\") : bizagi.localization.getResource(\"render-form-dialog-box-save\"),\n      onSave: function onSave(data) {\n        form.startLoading();\n\n        // Submit the form\n        return self.dataService.multiaction().submitData({\n          action: \"SAVE\",\n          data: data,\n          xpathContext: self.properties.xpathContext,\n          idPageCache: data.idPageCache,\n          isOfflineForm: false,\n          isActionStartForm: true }).\n        pipe(function (savedData) {\n          form.endLoading();\n          def.resolve(savedData.IdScope);\n        });\n      } });\n\n\n    dialog.render({\n      guidprocess: args.guidprocess,\n      idStartScope: args.idStartScope,\n      idCase: self.properties.caseId,\n      idWorkitem: form.properties.typeForm != \"SummaryForm\" ? bizagi.context.idWorkitem : undefined,\n      additionalXpaths: self.properties.additionalXpath.join(\",\"),\n      surrogatedKey: surrogatedKey,\n      recordXpath: args.recordXpath,\n      mappingstakeholders: true });\n\n\n    return def.promise();\n  },\n\n  /**\r\n      * Execute and action if a form is global form or summary, or send to queue\r\n      * @param action\r\n      */\n  executeAction: function executeAction(action) {\n    var self = this;\n\n    if (self.typeForm == \"GlobalForm\" || self.typeForm == \"SummaryForm\") {\n      $.when(bizagi.showConfirmationBox(bizagi.localization.getResource(\"render-action-launcher-immediatly-action-confirmation\"), null, false)).done(function (response) {\n        self.executeActionImmediately(action);\n      });\n    } else {\n      self.addActionToQueue(action);\n    }\n  },\n\n  /**\r\n      * Show confirmation dialog\r\n      * @param action\r\n      */\n  showConfirmationDialog: function showConfirmationDialog(action) {\n    var self = this;\n    self.confirmTemplate = self.renderFactory.getTemplate(\"render-polymorphicLauncher-confirm\");\n    var message = bizagi.localization.getResource(\"render-action-launcher-single-action-confirmation\");\n    var confirmContent = $.tmpl(self.confirmTemplate, { confirmationMessage: message });\n    var confirmContentParams = {\n      resizable: false,\n      modal: true,\n      title: \"Bizagi\",\n      buttons: [] };\n\n    confirmContentParams.buttons = [\n    {\n      text: bizagi.localization.getResource(\"render-boolean-yes\"),\n      click: function click() {\n        self.setValue([]);\n        $.when(self.actionManager(action)).done(function (act) {\n          self.executeAction(act);\n        });\n        $(this).dialog(\"close\");\n      } },\n\n    {\n      text: bizagi.localization.getResource(\"render-boolean-no\"),\n      click: function click() {\n        $(this).dialog(\"close\");\n      } }];\n\n\n    $(confirmContent).dialog(confirmContentParams);\n  },\n\n  /**\r\n      * Render actual value of control and set events\r\n      * @param data\r\n      */\n  setDisplayValue: function setDisplayValue(data) {\n    var self = this;\n    var control = self.getControl();\n    var actionsToExecuteContainer = $(\".bz-action-launcher-actions-to-execute-container\", control);\n    var template = self.renderFactory.getTemplate(\"render-polymorphicLauncher-actions-to-execute\");\n    self.configureQueueVisibility();\n\n    $.when($.fasttmpl(template, { actions: data })).done(function (html) {\n      actionsToExecuteContainer.empty();\n      actionsToExecuteContainer.append(html);\n      var removeActionSelector = $(\".action-to-execute-control i\", actionsToExecuteContainer);\n      var openActionSelector = $(\".action-to-execute-control label\", actionsToExecuteContainer);\n      removeActionSelector.bind(\"click\", function () {\n        var index = $(this).parent().data(\"index\");\n        self.removeActionToQueue(index);\n      });\n      openActionSelector.bind(\"click\", function () {\n        var $target = $(this).parent();\n        var type = $target.data(\"actiontype\");\n        var guidprocess = $target.data(\"guidprocess\");\n        var idStartScope = $target.data(\"idstartscope\");\n        var title = $target.data(\"title\");\n        var xpathContext = $target.data(\"xpathcontext\");\n        var idEntity = $target.data(\"identity\") || \"\";\n        var guidEntity = $target.data(\"guidentity\");\n        var recordXpath = xpathContext || self.properties.xpathContext;\n\n        switch (type) {\n          case \"Process\":\n            if (idStartScope) {\n              self.processStartForm({\n                guidprocess: guidprocess,\n                idStartScope: idStartScope,\n                title: title,\n                xpathContext: xpathContext,\n                recordXpath: recordXpath });\n\n            }\n            break;\n          case \"Form\":\n            var action = {\n              guidProcess: guidprocess,\n              idStartScope: idStartScope,\n              editMode: true,\n              xpathContext: xpathContext,\n              idEntity: idEntity,\n              guidEntity: guidEntity,\n              guidObject: guidprocess };\n\n\n            self.processActionForm(action);\n            break;\n          case \"Rule\":\n            // Rules dont have forms or something like that\n            break;}\n\n      });\n    });\n  },\n\n  /**\r\n      * Show container if it has actions\r\n      */\n  configureQueueVisibility: function configureQueueVisibility() {\n    var self = this;\n    var control = self.getControl();\n    var actionsToExecuteContainer = $(\".bz-action-launcher-actions-to-execute-container\", control);\n    var actionsToExecuteTitle = $(\".actions-to-execute-title\", control);\n    if (self.getValue().length > 0) {\n      actionsToExecuteContainer.show();\n      actionsToExecuteTitle.show();\n    } else {\n      actionsToExecuteContainer.hide();\n      actionsToExecuteTitle.hide();\n    }\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);}(function (a) {\n  function k(b, c) {\n    function j() {var a = document.body,b = document.documentElement;return Math.max(a.scrollHeight, a.offsetHeight, b.clientHeight, b.scrollHeight, b.offsetHeight);}function u(b) {e = a(\"li.dw-v\", b).eq(0).index();d = a(\"li.dw-v\", b).eq(-1).index();f = i.height;F = m;}function x(b) {var a = i.headerText;return a ? \"function\" == typeof a ? a.call(B, b) : a.replace(/{value}/i, b) : \"\";}function p() {m.temp = J && null !== m.val && m.val != b.val() || null === m.values ? i.parseValue(b.val() ? b.val() : \"\", m) : m.values.slice(0);m.setValue(!0);}\n    function z(b, c, e, u, f) {i.validate.call(B, y, e);a(\".dww ul\", y).each(function (u) {var i = a(this),d = a('li[data-val=\"' + m.temp[u] + '\"]', i),i = d.index(),g = d,d = i;if (!g.hasClass(\"dw-v\")) {for (var h = g, x = 0, j = 0; h.prev().length && !h.hasClass(\"dw-v\");) {h = h.prev(), x++;}for (; g.next().length && !g.hasClass(\"dw-v\");) {g = g.next(), j++;}j < x && j && 1 == !f || !x || !h.hasClass(\"dw-v\") || 1 == f ? d += j : (g = h, d -= x);m.temp[u] = g.data(\"val\");}if (i != d || u == e || void 0 === e) m.scroll(a(this), d, u == e ? b : 0, c, u);});m.change(u);}function k() {\n      var b = 0,c = 0,u = a(window).width(),\n      e = a(window).height(),d = a(window).scrollTop(),i = a(\".dwo\", y),f = a(\".dw\", y),g,h;a(\".dwc\", y).each(function () {g = a(this).outerWidth(!0);b += g;c = g > c ? g : c;});g = b > u ? c : b;f.width(g);g = f.outerWidth();h = f.outerHeight();f.css({ left: (u - g) / 2, top: d + (e - h) / 2 });i.height(0).height(j());\n    }function w(b) {var a = +b.data(\"pos\") + 1;l(b, a > d ? e : a, 1);}function E(b) {var a = +b.data(\"pos\") - 1;l(b, a < e ? d : a, 2);}var m = this,B = b,b = a(B),M,i = a.extend({}, D),O,y,N = {},P = {},J = b.is(\"input\"),K = !1;m.enable = function () {i.disabled = !1;J && b.prop(\"disabled\", !1);};\n    m.disable = function () {i.disabled = !0;J && b.prop(\"disabled\", !0);};m.scroll = function (b, a, c, u, e) {\n      var d = (O - a) * i.height;b.attr(\"style\", (c ? H + \"-transition:all \" + c.toFixed(1) + \"s ease-out;\" : \"\") + (I ? H + \"-transform:translate3d(0,\" + d + \"px,0);\" : \"top:\" + d + \"px;\"));if (c) {\n        var g = 0;clearInterval(N[e]);N[e] = setInterval(function () {g += 0.1;b.data(\"pos\", Math.round((a - u) * Math.sin(g / c * (Math.PI / 2)) + u));g >= c && (clearInterval(N[e]), b.data(\"pos\", a));}, 100);clearTimeout(P[e]);P[e] = setTimeout(function () {\n          \"mixed\" == i.mode && !b.hasClass(\"dwa\") &&\n          b.closest(\".dwwl\").find(\".dwwb\").fadeIn(\"fast\");\n        }, 1E3 * c);\n      } else b.data(\"pos\", a);\n    };m.setValue = function (a, c, e) {var u = i.formatResult(m.temp);m.val = u;m.values = m.temp.slice(0);K && a && z(e);c && J && b.val(u).trigger(\"change\");};m.validate = function (b, a, c, u) {z(b, a, c, !0, u);};m.change = function (b) {var c = i.formatResult(m.temp);\"inline\" == i.display ? m.setValue(!1, b) : a(\".dwv\", y).html(x(c));b && i.onChange.call(B, c, m);};m.hide = function () {\n      if (!1 === i.onClose.call(B, m.val, m)) return !1;a(\".dwtd\").prop(\"disabled\", !1).removeClass(\"dwtd\");\n      b.blur();y && y.remove();K = !1;a(window).unbind(\".dw\");\n    };m.show = function () {\n      if (i.disabled || K) return !1;var c = i.height,e = i.rows * c;p();for (var d = '<div class=\"' + i.theme + '\">' + (\"inline\" == i.display ? '<div class=\"dw dwbg dwi\"><div class=\"dwwr\">' : '<div class=\"dwo\"></div><div class=\"dw dwbg\"><div class=\"dwwr\">' + (i.headerText ? '<div class=\"dwv\"></div>' : \"\")), f = 0; f < i.wheels.length; f++) {\n        var d = d + ('<div class=\"dwc' + (\"scroller\" != i.mode ? \" dwpm\" : \" dwsc\") + (i.showLabel ? \"\" : \" dwhl\") + '\"><div class=\"dwwc dwrc\"><table cellpadding=\"0\" cellspacing=\"0\"><tr>'),\n        h;for (h in i.wheels[f]) {\n          var d = d + ('<td><div class=\"dwwl dwrc\">' + (\"scroller\" != i.mode ? '<div class=\"dwwb dwwbp\" style=\"height:' + c + \"px;line-height:\" + c + 'px;\"><span>+</span></div><div class=\"dwwb dwwbm\" style=\"height:' + c + \"px;line-height:\" + c + 'px;\"><span>&ndash;</span></div>' : \"\") + '<div class=\"dwl\">' + h + '</div><div class=\"dww dwrc\" style=\"height:' + e + \"px;min-width:\" + i.width + 'px;\"><ul>'),x;for (x in i.wheels[f][h]) {d += '<li class=\"dw-v\" data-val=\"' + x + '\" style=\"height:' + c + \"px;line-height:\" + c + 'px;\">' + i.wheels[f][h][x] +\n            \"</li>\";}d += '</ul><div class=\"dwwo\"></div></div><div class=\"dwwol\"></div></div></td>';\n        }d += \"</tr></table></div></div>\";\n      }d += (\"inline\" != i.display ? '<div class=\"dwbc\"><span class=\"dwbw dwb-s\"><a href=\"#\" class=\"dwb\">' + i.setText + '</a></span><span class=\"dwbw dwb-c\"><a href=\"#\" class=\"dwb\">' + i.cancelText + \"</a></span></div>\" : '<div class=\"dwcc\"></div>') + \"</div></div></div>\";y = a(d);z();\"inline\" != i.display ? y.appendTo(\"body\") : b.is(\"div\") ? b.html(y) : y.insertAfter(b);K = !0;M.init(y, m);\"inline\" != i.display && (a(\".dwb-s a\",\n      y).click(function () {m.setValue(!1, !0);m.hide();i.onSelect.call(B, m.val, m);return !1;}), a(\".dwb-c a\", y).click(function () {m.hide();i.onCancel.call(B, m.val, m);return !1;}), a(\"input,select\").each(function () {a(this).prop(\"disabled\") || a(this).addClass(\"dwtd\");}), a(\"input,select\").prop(\"disabled\", !0), k(), a(window).bind(\"resize.dw\", k));y.delegate(\".dwwl\", \"DOMMouseScroll mousewheel\", function (b) {\n        if (!i.readonly) {\n          b.preventDefault();var b = b.originalEvent,b = b.wheelDelta ? b.wheelDelta / 120 : b.detail ? -b.detail / 3 : 0,c = a(\"ul\",\n          this),d = +c.data(\"pos\"),d = Math.round(d - b);u(c);l(c, d, b < 0 ? 1 : 2);\n        }\n      }).delegate(\".dwb, .dwwb\", G, function () {a(this).addClass(\"dwb-a\");}).delegate(\".dwwb\", G, function (b) {if (!i.readonly) {b.preventDefault();b.stopPropagation();var c = a(this).closest(\".dwwl\").find(\"ul\");func = a(this).hasClass(\"dwwbp\") ? w : E;u(c);clearInterval(g);g = setInterval(function () {func(c);}, i.delay);func(c);}}).delegate(\".dwwl\", G, function (b) {\n        if (!r && i.mode != \"clickpick\" && !i.readonly) {\n          b.preventDefault();r = true;s = a(\"ul\", this).addClass(\"dwa\");i.mode ==\n          \"mixed\" && a(\".dwwb\", this).fadeOut(\"fast\");v = +s.data(\"pos\");u(s);t = o(b);A = new Date();q = t;m.scroll(s, v);\n        }\n      });i.onShow.call(B, y, m);\n    };m.init = function (c) {\n      M = a.extend({ defaults: {}, init: n }, a.scroller.themes[c.theme ? c.theme : i.theme]);a.extend(i, M.defaults, c);m.settings = i;O = Math.floor(i.rows / 2);var d = a.scroller.presets[i.preset];b.unbind(\".dw\");d && (d = d.call(B, m), a.extend(i, d, c), a.extend(C, d.methods));void 0 !== b.data(\"dwro\") && (B.readOnly = h(b.data(\"dwro\")));K && m.hide();\"inline\" == i.display ? m.show() : (p(), J && i.showOnFocus && (\n      b.data(\"dwro\", B.readOnly), B.readOnly = !0, b.bind(\"focus.dw\", m.show)));\n    };m.values = null;m.val = null;m.temp = null;m.init(c);\n  }function w(b) {for (var a in b) {if (void 0 !== z[b[a]]) return !0;}return !1;}function o(b) {return E ? b.originalEvent ? b.originalEvent.changedTouches[0].pageY : b.changedTouches[0].pageY : b.pageY;}function h(b) {return !0 === b || \"true\" == b;}function l(b, c, g, u, f) {\n    var h = b.closest(\".dwwr\").find(\"ul\").index(b),c = c > d ? d : c,c = c < e ? e : c,b = a(\"li\", b).eq(c);F.temp[h] = b.data(\"val\");F.validate(u ? c == f ? 0.1 : Math.abs(0.1 * (c -\n    f)) : 0, f, h, g);\n  }var j = {},g,n = function n() {},f,e,d,F,p = new Date().getTime(),r = !1,s = null,t,q,A,v,z = document.createElement(z).style,I = w([\"perspectiveProperty\", \"WebkitPerspective\", \"MozPerspective\", \"OPerspective\", \"msPerspective\"]) && \"webkitPerspective\" in document.documentElement.style,H = function () {var b = [\"Webkit\", \"Moz\", \"O\", \"ms\"],a;for (a in b) {if (w([b[a] + \"Transform\"])) return \"-\" + b[a].toLowerCase();}return \"\";}(),E = \"ontouchstart\" in window,G = E ? \"touchstart\" : \"mousedown\",L = E ? \"touchend\" : \"mouseup\",D = { width: 70, height: 40,\n    rows: 3, delay: 300, disabled: !1, readonly: !1, showOnFocus: !0, showLabel: !0, wheels: [], theme: \"\", headerText: \"{value}\", display: \"modal\", mode: \"scroller\", preset: \"\", setText: \"Set\", cancelText: \"Cancel\", onShow: n, onClose: n, onSelect: n, onCancel: n, onChange: n, formatResult: function formatResult(b) {for (var a = \"\", d = 0; d < b.length; d++) {a += (0 < d ? \" \" : \"\") + b[d];}return a;}, parseValue: function parseValue(b, a) {\n      for (var d = a.settings.wheels, b = b.split(\" \"), e = [], f = 0, g = 0; g < d.length; g++) {for (var h in d[g]) {\n          if (void 0 !== d[g][h][b[f]]) e.push(b[f]);else for (var j in d[g][h]) {\n            e.push(j);\n            break;\n          }f++;\n        }}return e;\n    }, validate: n },\n  C = { init: function init(b) {void 0 === b && (b = {});return this.each(function () {this.id || (p += 1, this.id = \"scoller\" + p);j[this.id] = new k(this, b);});}, enable: function enable() {return this.each(function () {var b = j[this.id];b && b.enable();});}, disable: function disable() {return this.each(function () {var b = j[this.id];b && b.disable();});}, isDisabled: function isDisabled() {var b = j[this[0].id];if (b) return b.settings.disabled;}, option: function option(b, a) {\n      return this.each(function () {\n        var d = j[this.id];if (d) {\n          var e = {};\"object\" === _typeof(b) ?\n          e = b : e[b] = a;d.init(e);\n        }\n      });\n    }, setValue: function setValue(b, a, d) {return this.each(function () {var e = j[this.id];e && (e.temp = b, e.setValue(!0, a, d));});}, getInst: function getInst() {return j[this[0].id];}, getValue: function getValue() {var b = j[this[0].id];if (b) return b.values;}, show: function show() {var b = j[this[0].id];if (b) return b.show();}, hide: function hide() {return this.each(function () {var b = j[this.id];b && b.hide();});}, destroy: function destroy() {\n      return this.each(function () {\n        var b = j[this.id];b && (b.hide(), a(this).unbind(\".dw\"), delete j[this.id], a(this).is(\"input\") && (\n        this.readOnly = h(a(this).data(\"dwro\"))));\n      });\n    } };\n  a(document).bind(E ? \"touchmove\" : \"mousemove\", function (b) {r && (b.preventDefault(), q = o(b), b = v + (t - q) / f, b = b > d + 1 ? d + 1 : b, b = b < e - 1 ? e - 1 : b, F.scroll(s, b));});a(document).bind(L, function (b) {if (r) {b.preventDefault();s.removeClass(\"dwa\");var c = new Date() - A,b = v + (t - q) / f,b = b > d + 1 ? d + 1 : b,b = b < e - 1 ? e - 1 : b;300 > c ? (c = (q - t) / c, c = c * c / 0.0012, 0 > q - t && (c = -c)) : c = q - t;l(s, Math.round(v - c / f), 0, !0, Math.round(b));r = !1;s = null;}clearInterval(g);a(\".dwb-a\").removeClass(\"dwb-a\");});a.fn.scroller = function (b) {\n    if (C[b]) return C[b].apply(this,\n    Array.prototype.slice.call(arguments, 1));if (\"object\" === _typeof(b) || !b) return C.init.apply(this, arguments);a.error(\"Unknown method\");\n  };a.scroller = { setDefaults: function setDefaults(b) {a.extend(D, b);}, presets: {}, themes: {} };\n})(jQuery);(function (a) {\n  var k = new Date(),w = { dateFormat: \"mm/dd/yy\", dateOrder: \"mmddy\", timeWheels: \"hhiiA\", timeFormat: \"hh:ii A\", startYear: k.getFullYear() - 100, endYear: k.getFullYear() + 1, monthNames: \"January,February,March,April,May,June,July,August,September,October,November,December\".split(\",\"), monthNamesShort: \"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec\".split(\",\"), dayNames: \"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday\".split(\",\"), dayNamesShort: \"Sun,Mon,Tue,Wed,Thu,Fri,Sat\".split(\",\"), shortYearCutoff: \"+10\",\n    monthText: \"Month\", dayText: \"Day\", yearText: \"Year\", hourText: \"Hours\", minuteText: \"Minutes\", secText: \"Seconds\", ampmText: \"&nbsp;\", stepHour: 1, stepMinute: 1, stepSecond: 1, separator: \" \" },\n  k = function k(o) {\n    function h(b, a, c) {return void 0 !== p[a] ? +b[p[a]] : void 0 !== c ? c : H[r[a]] ? H[r[a]]() : r[a](H);}function l(b, a) {return Math.floor(b / a) * a;}function j(b) {var a = h(b, \"h\", 0);return new Date(h(b, \"y\"), h(b, \"m\"), h(b, \"d\"), h(b, \"ap\") ? a + 12 : a, h(b, \"i\", 0), h(b, \"s\", 0));}var g = a(this),n;if (g.is(\"input\")) {\n      switch (g.attr(\"type\")) {\n        case \"date\":n =\n          \"yy-mm-dd\";break;case \"datetime\":n = \"yy-mm-ddTHH:ii:ssZ\";break;case \"datetime-local\":n = \"yy-mm-ddTHH:ii:ss\";break;case \"month\":n = \"yy-mm\";w.dateOrder = \"mmyy\";break;case \"time\":n = \"HH:ii:ss\";}\n      var f = g.attr(\"min\"),g = g.attr(\"max\");f && (w.minDate = a.scroller.parseDate(n, f));g && (w.maxDate = a.scroller.parseDate(n, g));\n    }var e = a.extend({}, w, o.settings),d = 0,f = [],k = [],p = {},r = { y: \"getFullYear\", m: \"getMonth\", d: \"getDate\", h: function h(b) {b = b.getHours();b = z && 12 <= b ? b - 12 : b;return l(b, E);}, i: function i(b) {return l(b.getMinutes(), G);},\n      s: function s(b) {return l(b.getSeconds(), L);}, ap: function ap(b) {return v && 11 < b.getHours() ? 1 : 0;} },\n    s = e.preset,t = e.dateOrder,q = e.timeWheels,A = t.match(/D/),v = q.match(/a/i),z = q.match(/h/),I = \"datetime\" == s ? e.dateFormat + e.separator + e.timeFormat : \"time\" == s ? e.timeFormat : e.dateFormat,H = new Date(),E = e.stepHour,G = e.stepMinute,L = e.stepSecond,D = e.minDate,C = e.maxDate;n = n ? n : I;if (s.match(/date/i)) {\n      a.each([\"y\", \"m\", \"d\"], function (b, a) {b = t.search(RegExp(a, \"i\"));-1 < b && k.push({ o: b, v: a });});k.sort(function (b, a) {return b.o > a.o ? 1 : -1;});\n      a.each(k, function (b, a) {p[a.v] = b;});for (var g = {}, b = 0; 3 > b; b++) {if (b == p.y) {d++;g[e.yearText] = {};for (var c = D ? D.getFullYear() : e.startYear, Q = C ? C.getFullYear() : e.endYear; c <= Q; c++) {g[e.yearText][c] = t.match(/yy/i) ? c : (c + \"\").substr(2, 2);}} else if (b == p.m) {d++;g[e.monthText] = {};for (c = 0; 12 > c; c++) {g[e.monthText][c] = t.match(/MM/) ? e.monthNames[c] : t.match(/M/) ? e.monthNamesShort[c] : t.match(/mm/) && 9 > c ? \"0\" + (c + 1) : c + 1;}} else if (b == p.d) {d++;g[e.dayText] = {};for (c = 1; 32 > c; c++) {g[e.dayText][c] = t.match(/dd/i) && 10 > c ? \"0\" + c : c;}}}f.push(g);\n    }if (s.match(/time/i)) {\n      g =\n      {};if (q.match(/h/i)) {p.h = d++;g[e.hourText] = {};for (c = 0; c < (z ? 12 : 24); c += E) {g[e.hourText][c] = z && 0 == c ? 12 : q.match(/hh/i) && 10 > c ? \"0\" + c : c;}}if (q.match(/i/)) {p.i = d++;g[e.minuteText] = {};for (c = 0; 60 > c; c += G) {g[e.minuteText][c] = q.match(/ii/) && 10 > c ? \"0\" + c : c;}}if (q.match(/s/)) {p.s = d++;g[e.secText] = {};for (c = 0; 60 > c; c += L) {g[e.secText][c] = q.match(/ss/) && 10 > c ? \"0\" + c : c;}}v && (p.ap = d++, d = q.match(/A/), g[e.ampmText] = { \"0\": d ? \"AM\" : \"am\", 1: d ? \"PM\" : \"pm\" });f.push(g);\n    }return { wheels: f, headerText: function headerText() {\n        return a.scroller.formatDate(I, j(o.temp),\n        e);\n      }, formatResult: function formatResult(b) {return a.scroller.formatDate(n, j(b), e);}, parseValue: function parseValue(b) {var c = new Date(),d = [];try {c = a.scroller.parseDate(n, b, e);} catch (g) {}for (var f in p) {d[p[f]] = c[r[f]] ? c[r[f]]() : r[f](c);}return d;}, validate: function validate(b, c) {\n        var d = o.temp,f = { m: 0, d: 1, h: 0, i: 0, s: 0, ap: 0 },g = { m: 11, d: 31, h: l(z ? 11 : 23, E), i: l(59, G), s: l(59, L), ap: 1 },j = !0,n = !0;a.each(D || C ? \"y,m,d,ap,h,i,s\".split(\",\") : c == p.y || c == p.m || void 0 === c ? [\"d\"] : [], function (c, l) {\n          if (void 0 !== p[l]) {\n            var o = f[l],i = g[l],z = 31,k = h(d, l),s = a(\"ul\", b).eq(p[l]),\n            q,x;\"d\" == l && (q = h(d, \"y\"), x = h(d, \"m\"), i = z = 32 - new Date(q, x, 32).getDate(), A && a(\"li\", s).each(function () {var b = a(this),c = b.data(\"val\"),d = new Date(q, x, c).getDay();b.html(t.replace(/[my]/gi, \"\").replace(/dd/, 10 > c ? \"0\" + c : c).replace(/d/, c).replace(/DD/, e.dayNames[d]).replace(/D/, e.dayNamesShort[d]));}));j && D && (o = D[r[l]] ? D[r[l]]() : r[l](D));n && C && (i = C[r[l]] ? C[r[l]]() : r[l](C));if (\"y\" != l) {\n              var F = a('li[data-val=\"' + o + '\"]', s).index(),w = a('li[data-val=\"' + i + '\"]', s).index();a(\"li\", s).removeClass(\"dw-v\").slice(F, w + 1).addClass(\"dw-v\");\n              \"d\" == l && a(\"li\", s).removeClass(\"dw-h\").slice(z).addClass(\"dw-h\");k < o && (k = o);k > i && (k = i);\n            }j && (j = k == o);n && (n = k == i);if (e.invalid && \"d\" == l) {\n              var v = [];e.invalid.dates && a.each(e.invalid.dates, function (b, a) {a.getFullYear() == q && a.getMonth() == x && v.push(a.getDate() - 1);});if (e.invalid.daysOfWeek) {var I = new Date(q, x, 1).getDay();a.each(e.invalid.daysOfWeek, function (b, a) {for (var c = a - I; c < z; c = c + 7) {c >= 0 && v.push(c);}});}e.invalid.daysOfMonth && a.each(e.invalid.daysOfMonth, function (b, a) {\n                a = (a + \"\").split(\"/\");a[1] ? a[0] - 1 == x && v.push(a[1] -\n                1) : v.push(a[0] - 1);\n              });a.each(v, function (b, c) {a(\"li\", s).eq(c).removeClass(\"dw-v\");});\n            }\n          }\n        });\n      }, methods: { getDate: function getDate(b) {var c = a(this).scroller(\"getInst\");if (c) return j(b ? c.temp : c.values);}, setDate: function setDate(b, c, d) {void 0 == c && (c = !1);return this.each(function () {var e = a(this).scroller(\"getInst\");if (e) {for (var f in p) {e.temp[p[f]] = b[r[f]] ? b[r[f]]() : r[f](b);}e.setValue(!0, c, d);}});} } };\n\n  };a.scroller.presets.date = k;a.scroller.presets.datetime = k;a.scroller.presets.time = k;a.scroller.formatDate = function (o, h, l) {\n    if (!h) return null;\n    for (var l = a.extend({}, w, l), j = function j(a) {for (var e = 0; d + 1 < o.length && o.charAt(d + 1) == a;) {e++, d++;}return e;}, g = function g(a, d, e) {d = \"\" + d;if (j(a)) for (; d.length < e;) {d = \"0\" + d;}return d;}, n = function n(a, d, e, f) {return j(a) ? f[d] : e[d];}, f = \"\", e = !1, d = 0; d < o.length; d++) {if (e) \"'\" == o.charAt(d) && !j(\"'\") ? e = !1 : f += o.charAt(d);else switch (o.charAt(d)) {\n        case \"d\":f += g(\"d\", h.getDate(), 2);break;case \"D\":f += n(\"D\", h.getDay(), l.dayNamesShort, l.dayNames);break;case \"o\":f += g(\"o\", (h.getTime() - new Date(h.getFullYear(), 0, 0).getTime()) / 864E5,\n          3);break;case \"m\":f += g(\"m\", h.getMonth() + 1, 2);break;case \"M\":f += n(\"M\", h.getMonth(), l.monthNamesShort, l.monthNames);break;case \"y\":f += j(\"y\") ? h.getFullYear() : (10 > h.getYear() % 100 ? \"0\" : \"\") + h.getYear() % 100;break;case \"h\":var k = h.getHours(),f = f + g(\"h\", 12 < k ? k - 12 : 0 == k ? 12 : k, 2);break;case \"H\":f += g(\"H\", h.getHours(), 2);break;case \"i\":f += g(\"i\", h.getMinutes(), 2);break;case \"s\":f += g(\"s\", h.getSeconds(), 2);break;case \"a\":f += 11 < h.getHours() ? \"pm\" : \"am\";break;case \"A\":f += 11 < h.getHours() ? \"PM\" : \"AM\";break;case \"'\":j(\"'\") ? f +=\n          \"'\" : e = !0;break;default:f += o.charAt(d);}}\n    return f;\n  };a.scroller.parseDate = function (k, h, l) {\n    var j = new Date();if (!k || !h) return j;for (var h = \"object\" == _typeof(h) ? h.toString() : h + \"\", g = a.extend({}, w, l), l = j.getFullYear(), n = j.getMonth() + 1, f = j.getDate(), e = -1, d = j.getHours(), j = j.getMinutes(), F = 0, p = -1, r = !1, s = function s(a) {(a = v + 1 < k.length && k.charAt(v + 1) == a) && v++;return a;}, t = function t(a) {\n      s(a);a = h.substr(A).match(RegExp(\"^\\\\d{1,\" + (\"@\" == a ? 14 : \"!\" == a ? 20 : \"y\" == a ? 4 : \"o\" == a ? 3 : 2) + \"}\"));if (!a) return 0;A += a[0].length;return parseInt(a[0],\n      10);\n    }, q = function q(a, d, e) {a = s(a) ? e : d;for (d = 0; d < a.length; d++) {if (h.substr(A, a[d].length).toLowerCase() == a[d].toLowerCase()) return A += a[d].length, d + 1;}return 0;}, A = 0, v = 0; v < k.length; v++) {if (r) \"'\" == k.charAt(v) && !s(\"'\") ? r = !1 : A++;else switch (k.charAt(v)) {\n        case \"d\":f = t(\"d\");break;case \"D\":q(\"D\", g.dayNamesShort, g.dayNames);break;case \"o\":e = t(\"o\");break;case \"m\":n = t(\"m\");break;case \"M\":n = q(\"M\", g.monthNamesShort, g.monthNames);break;case \"y\":l = t(\"y\");break;case \"H\":d = t(\"H\");break;case \"h\":d = t(\"h\");break;case \"i\":j =\n          t(\"i\");break;case \"s\":F = t(\"s\");break;case \"a\":p = q(\"a\", [\"am\", \"pm\"], [\"am\", \"pm\"]) - 1;break;case \"A\":p = q(\"A\", [\"am\", \"pm\"], [\"am\", \"pm\"]) - 1;break;case \"'\":s(\"'\") ? A++ : r = !0;break;default:A++;}}\n    100 > l && (l += new Date().getFullYear() - new Date().getFullYear() % 100 + (l <= g.shortYearCutoff ? 0 : -100));if (-1 < e) {n = 1;f = e;do {g = 32 - new Date(l, n - 1, 32).getDate();if (f <= g) break;n++;f -= g;} while (1);}d = new Date(l, n - 1, f, -1 == p ? d : p && 12 > d ? d + 12 : !p && 12 == d ? 0 : d, j, F);if (d.getFullYear() != l || d.getMonth() + 1 != n || d.getDate() != f) throw \"Invalid date\";return d;\n  };\n})(jQuery);(function (a) {\n  var k = { inputClass: \"\" };a.scroller.presets.select = function (w) {\n    var o = a.extend({}, k, w.settings),h = a(this),l = this.id + \"_dummy\";a('label[for=\"' + this.id + '\"]').attr(\"for\", l);var j = a('label[for=\"' + l + '\"]'),j = j.length ? j.text() : h.attr(\"name\"),g = [],n = [{}];n[0][j] = {};var f = n[0][j];a(\"option\", h).each(function () {var d = a(this).attr(\"value\");f[d] = a(this).text();a(this).prop(\"disabled\") && g.push(d);});a(\"#\" + l).remove();var e = a('<input type=\"text\" id=\"' + l + '\" value=\"' + f[h.val()] + '\" class=\"' + o.inputClass + '\" readonly />').insertBefore(h);\n    o.showOnFocus && e.focus(function () {w.show();});h.hide().closest(\".ui-field-contain\").trigger(\"create\");return { width: 200, wheels: n, headerText: !1, formatResult: function formatResult(a) {return f[a[0]];}, parseValue: function parseValue() {return [h.val()];}, validate: function validate(d) {a.each(g, function (e, f) {a('li[data-val=\"' + f + '\"]', d).removeClass(\"dw-v\");});}, onSelect: function onSelect(a, f) {e.val(a);h.val(f.values[0]).trigger(\"change\");}, onChange: function onChange(a, f) {\"inline\" == o.display && (e.val(a), h.val(f.temp[0]).trigger(\"change\"));}, onClose: function onClose() {e.blur();} };\n  };\n})(jQuery);(function (a) {a.scroller.themes.android = { defaults: { dateOrder: \"Mddyy\", mode: \"clickpick\", height: 50 } };})(jQuery);(function (a) {var k = { defaults: { dateOrder: \"Mddyy\", mode: \"mixed\", rows: 5, width: 70, showLabel: !1 } };a.scroller.themes[\"android-ics\"] = k;a.scroller.themes[\"android-ics light\"] = k;})(jQuery);(function (a) {a.scroller.themes.ios = { defaults: { dateOrder: \"MMdyy\", rows: 5, height: 30, width: 55, headerText: !1, showLabel: !1 } };})(jQuery);(function (a) {\n  a.scroller.themes.jqm = { defaults: { jqmBody: \"c\", jqmHeader: \"b\", jqmWheel: \"d\", jqmClickPick: \"c\", jqmSet: \"b\", jqmCancel: \"c\" }, init: function init(k, w) {\n      var o = w.settings;a(\".dw\", k).removeClass(\"dwbg\").addClass(\"ui-overlay-shadow ui-corner-all ui-body-a\");a(\".dwb-s a\", k).attr(\"data-role\", \"button\").attr(\"data-theme\", o.jqmSet);a(\".dwb-c a\", k).attr(\"data-role\", \"button\").attr(\"data-theme\", o.jqmCancel);a(\".dwwb\", k).attr(\"data-role\", \"button\").attr(\"data-theme\", o.jqmClickPick);a(\".dwv\", k).addClass(\"ui-header ui-bar-\" +\n      o.jqmHeader);a(\".dwwr\", k).addClass(\"ui-body-\" + o.jqmBody);a(\".dwpm .dww\", k).addClass(\"ui-body-\" + o.jqmWheel);\"inline\" != o.display && a(\".dw\", k).addClass(\"pop in\");k.trigger(\"create\");a(\".dwo\", k).click(function () {w.hide();});\n    } };\n\n})(jQuery);","/*\r\n*   Name: BizAgi Desktop querySuggest\r\n*   Author: Ivan Ricardo Taimal Narvaez\r\n*   Comments:querySuggest\r\n*   -\r\n*/\n\nbizagi.rendering.desktop.search.extend(\"bizagi.rendering.desktop.querySuggest\", {}, {\n  //h_contexttype:metadata\n\n  /*\r\n   *   Fetch the data into a deferred\r\n   */\n  getData: function getData(params) {\n    var self = this;\n    var properties = self.properties;\n    var defer = new $.Deferred();\n    var form = self.getFormContainer();\n    var contextType = form.getContextType() || form.params.contexttype || false;\n    params = params || {};\n\n    // Verify context type\n    if (self.properties.contexttype) {\n      params.h_contexttype = self.properties.contexttype;\n    } else if (contextType) {\n      params.h_contexttype = contextType;\n    }\n\n    // QA-471 When the contexttype is metadata it does not\n    // send xpathcontext\n    if (params && params.h_contexttype && params.h_contexttype === 'metadata') {\n      properties.xpathContext = '';\n    }\n\n    // TM00529\n    if (properties.term.indexOf(\"\\'\") > -1) {\n      var regexC = new RegExp(\"\\'\", \"g\");\n      properties.term = properties.term.replace(regexC, \"\\\\'\\\\'\");\n    }\n    // TM00529\n    if (properties.term.indexOf(\"\\\"\") > -1) {\n      var regexC = new RegExp(\"\\\"\", \"g\");\n      properties.term = properties.term.replace(regexC, \"\\\"\");\n    }\n\n    // Resolve with remote data\n    self.dataService.multiaction().getSearchData({\n      url: properties.dataUrl,\n      contexttype: 'metadata',\n      xpath: properties.xpath,\n      idRender: properties.id,\n      xpathContext: properties.xpathContext,\n      idPageCache: properties.idPageCache,\n      term: properties.allowFullSearch ? \"%\" + properties.term : properties.term,\n      extra: params }).\n    done(function (data) {\n      // Resolve with fetched data\n      properties.data = data;\n      defer.resolve(properties.data);\n    }).fail(function (data) {\n      var hideStatus = data.hideStatus || false;\n      defer.resolve({});\n      if (!hideStatus) {\n        self.trigger(\"onSearchError\", data);\n      }\n    });\n    return defer.promise(defer);\n  },\n\n  /* Renders the advanced item */\n  renderClearItem: function renderClearItem() {\n    var self = this;\n    var searchItem = self.renderSearchItem({\n      id: self.Class.CLEAR_SEARCH_ID,\n      label: this.getResource(\"render-search-clear-label\") });\n\n\n    // Bind click event\n    searchItem.click(function () {\n      self.setValue({ id: \"\" });\n      self.setDisplayValue(\"\");\n    });\n\n    return searchItem;\n  } });","/**\r\n*   Name: Bizagi Desktop queryExtendedText\r\n*   Author: UI Forms Team\r\n*   Comments: queryExtendedText\r\n*   - This script will redefine the query extended text render class to adjust to desktop devices\r\n*/\n\nbizagi.rendering.desktop.extendedText.extend(\"bizagi.rendering.desktop.queryExtendedText\", {}, {});","/**\r\n *   Name: Bizagi Desktop queryText\r\n *   Author: UI Forms Team\r\n *   Comments:queryText\r\n *   -   This script will redefine the query text render class to adjust to desktop devices\r\n */\n\nbizagi.rendering.desktop.text.extend(\"bizagi.rendering.desktop.queryText\", {}, {});","/*\r\n*   Name: BizAgi Desktop queryCheck\r\n*   Author: Ivan Ricardo Taimal Narvaez\r\n*   Comments:queryCheck\r\n*   -\r\n*/\n\nbizagi.rendering.desktop.check.extend(\"bizagi.rendering.desktop.queryCheck\", {}, {\n  /*\r\n                                                                                   *   Returns the internal value\r\n                                                                                   */\n  getValue: function getValue() {\n    return bizagi.util.parseBoolean(this.value);\n  } });","/*\r\n*   Name: BizAgi Desktop queryYesNo\r\n*   Author: Ivan Ricardo Taimal Narvaez\r\n*   Comments:queryYesNo\r\n*   -\r\n*/\n\nbizagi.rendering.desktop.yesno.extend(\"bizagi.rendering.desktop.queryYesNo\", {}, {\n  /*\r\n                                                                                    *   Returns the internal value\r\n                                                                                    */\n  getValue: function getValue() {\n    return bizagi.util.parseBoolean(this.value);\n  } });","/*\r\n*   Name: BizAgi Desktop querySearch\r\n*   Author: Ivan Ricardo Taimal Narvaez\r\n*   Comments:querySearch\r\n*   -\r\n*/\n\nbizagi.rendering.desktop.search.extend(\"bizagi.rendering.desktop.querySearch\", {}, {\n  /*\r\n                                                                                     *   Opens the search dialog\r\n                                                                                     */\n  showSearchDialog: function showSearchDialog() {\n    var self = this,\n    properties = self.properties,\n    extraButtons,\n    contextType = properties.searchForms.length > 0 && properties.searchForms[0].type == \"searchForm\" ? \"metadata\" : \"entity\";\n\n    // Define add button\n    if (properties.allowNew) {\n      extraButtons = self.showAddRecordDialog();\n    }\n\n    // Show search dialog\n    self.searchDialog = new bizagi.rendering.dialog.search(self.dataService, self.renderFactory, properties.searchForms, {\n      allowFullSearch: properties.allowFullSearch,\n      maxRecords: properties.maxRecords },\n    extraButtons);\n\n    self.searchDialog.render({\n      idRender: properties.id,\n      xpath: properties.xpath,\n      xpathContext: properties.xpathContext,\n      idPageCache: properties.idPageCache,\n      contexttype: contextType }).\n    done(function (item) {\n      data = { id: item.id, value: item.id };\n      // Set data\n      self.setDisplayValue(data);\n      self.setValue(data);\n    });\n  } });","/**\r\n*   Name: Bizagi Desktop queryForm Extension\r\n*   Author: UI Forms Team\r\n *   Comments:\r\n*   -   This script will redefine the container class to adjust to desktop devices\r\n*   -   Will apply a desktop form template\r\n*/\n\n// Extends from form desktop base\nbizagi.rendering.desktop.form.extend(\"bizagi.rendering.desktop.queryForm\", {}, {\n\n  /*\r\n                                                                                  *    Create a function to hide check all element in view when no contains check elements\r\n                                                                                  */\n  postRenderContainer: function postRenderContainer(container) {\n    var self = this;\n    var checkIncluded = [];\n    var checkIncludedAll = self.container.find(\".ui-bizagi-render-control-included-all\");\n    // Call base\n    self._super(container);\n    checkIncluded = self.container.find(\".ui-bizagi-render-control-included\");\n    if (checkIncluded.length <= 0) {\n      checkIncludedAll.parent().hide();\n    }\n  },\n  /*\r\n     *    Creates a json array with key values to send to the server\r\n     */\n  collectRenderValuesForSubmit: function collectRenderValuesForSubmit(request) {\n    var self = this;\n    var data = [],\n    _matchedRender = function _matchedRender(renders, item) {\n      var _matched = function _matched(rType, iType) {\n        return rType.toUpperCase() === iType.toUpperCase();\n      },\n      _validateMatch = function _validateMatch(r) {\n        return bizagi.util.tryCatch(\n        function () {return _matched(r.properties.rangeQuery, item.searchType);},\n        true);\n\n      };\n\n      return renders.filter(_validateMatch);\n    };\n    // Collect data in array\n    self.collectRenderValuesQueryForm(data);\n\n    // Mark data collected as original values\n    $.each(data, function (i, item) {\n      var _rendersFounded = self.getRenders(item.xpath),\n      renders = _matchedRender(_rendersFounded, item);\n      if (renders.length === 0) {\n        renders = _rendersFounded;\n      }\n\n      item[\"displayHeader\"] = renders[0].properties.xpath.indexOf(\"@\") > -1 ? renders[0].properties.xpath : null;\n      $.each(renders, function (i, render) {\n        render.updateOriginalValue();\n      });\n    });\n    request.parameters = data;\n    return request;\n  },\n\n  getSearchParams: function getSearchParams(request) {\n    var self = this;\n    var $canvas = self.getValidationsContainer();\n    self.validationController = new bizagi.command.controllers.validation(self, self.validations, $canvas);\n\n    var valid = self.validationController.performValidations();\n    if (valid) {\n      return self.collectRenderValuesForSubmit(request);\n    } else {\n      self.validationController.expandNotificationBox();\n      return null;\n    }\n  },\n  /*\r\n     *  configure Handlers for check  all column included in the response\r\n     */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    self._super();\n    var checkIncludedAll = self.container.find(\".ui-bizagi-render-control-included-all\");\n    checkIncludedAll.tooltip({ position: { my: \"right-20 center\", at: \"right center\" }, tooltipClass: 'bz-wp-queryForm-check-all' });\n    checkIncludedAll.change(function () {\n      var newValue = checkIncludedAll.is(\":checked\");\n\n      var checkedChildren = function checkedChildren(target) {\n        $.each(target.children, function (i, item) {\n          if (item.element) {\n            if (self.isControlVisible(item) && item.properties.includedInResult === true) {\n              item.properties.included = newValue;\n              var checkIncluded = item.element.find(\".ui-bizagi-render-control-included\");\n              checkIncluded.prop(\"checked\", newValue);\n            }\n          } else\n          if (item.children) {\n            checkedChildren(item);\n          }\n        });\n      };\n\n      checkedChildren(self);\n    });\n  },\n\n  isControlVisible: function isControlVisible(control) {\n    var self = this;\n    if (control.parent) {\n      if (control.properties.visible) {\n        return self.isControlVisible(control.parent);\n      } else {\n        return false;\n      }\n    } else {\n      return control.properties.visible;\n    }\n  } });","/**\r\n *   Name: Bizagi Desktop FormTemplate Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the form template class to adjust to desktop devices\r\n */\n\n// Extends from desktop form base\nbizagi.rendering.desktop.form.extend(\"bizagi.rendering.desktop.formTemplate\", bizagi.rendering.formTemplate.prototype);\n// Extends itself\nbizagi.rendering.desktop.formTemplate.extend(\"bizagi.rendering.desktop.formTemplate\", {}, {});","/**\r\n *   Name: Bizagi Desktop queryTextAdvanced\r\n *   Author: UI Forms Team\r\n *   Comments: queryTextAdvanced\r\n *   -   This script will redefine the query text-advanced render class to adjust to desktop devices\r\n */\n\n// Extends from render Desktop base\nbizagi.rendering.desktop.render.extend(\"bizagi.rendering.desktop.queryTextAdvanced\", bizagi.rendering.render.base.prototype);\n// Extends itself\nbizagi.rendering.desktop.queryTextAdvanced.extend(\"bizagi.rendering.desktop.queryTextAdvanced\", bizagi.rendering.queryAdvanced.prototype);\n// Extends itself\nbizagi.rendering.desktop.queryTextAdvanced.extend(\"bizagi.rendering.desktop.queryTextAdvanced\", {\n  DATATYPE: \"Text\",\n  TOOLTIP_TITLE: \"Use the (%) percent to get accurate results related to your keyword. e.g:\",\n  TOOLTIP_CONTENT: \"<br/>&#9679; %ABC if the keyword ends with ABC.</br>&#9679; AB%C if the keyword starts with AB and ends with C.<br/>&#9679; ABC% if the keyword starts with ABC.\" },\n{\n\n  // region // #region CONTROL BASE\n\n  /**\r\n   * Update or init the element data\r\n   * @param data\r\n   */\n  initializeData: function initializeData(data) {\n\n    // Default maxLength\n    this.maxLength = data.properties.maxLength;\n    data.properties.maxLength = 0;\n    this.defaultFilter = 'wildcard';\n\n    // Call base\n    this._super(data);\n\n    this.isNewRenderForm = true;\n  },\n\n  /**\r\n      * Customize each render after processed\r\n      */\n  postRender: function postRender() {\n    var filterType = this.properties.filterType || \"\";\n\n    // Call to base\n    this._super();\n\n    // Call to repaint filters\n    this.setFilter(filterType);\n  },\n\n  /**\r\n      * Sets the internal value\r\n      * @param value\r\n      * @param triggerEvents\r\n      */\n  setValue: function setValue(value, triggerEvents) {\n    triggerEvents = triggerEvents !== undefined ? triggerEvents : true;\n\n    value = Array.isArray(value) ? JSON.encode(value) : value;\n\n    this._super(value, triggerEvents);\n  },\n\n  prepareForSetValue: function prepareForSetValue() {\n    var currentFilter = this.getCurrentFilter();\n    var noFilterSettled = bizagi.util.isEmpty(currentFilter);\n\n    var filterToSet = noFilterSettled ? this.defaultFilter : currentFilter.id;\n\n    this.setFilter(filterToSet);\n  },\n\n  /**\r\n      * Sets the value in the rendered control\r\n      * @param value\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n    var $control = self.getControl();\n\n    if (self.properties.editable)\n    self.prepareForSetValue();\n\n    var action = this.getCurrentAction();\n    var newValue = self.performDataValue(value);\n\n    // Set internal value\n    this.setValue(newValue, false);\n\n    // Update clean icon\n    if (this.isExecutionMode()) {\n      self.showHideCleanButton(true);\n    } else {\n      this.controlInitial && this.controlInitial.setDisplayValue(value);\n    }\n\n    // Render by filter type\n    if (self.isCurrentTagFilter()) {\n      self.addSelectedElements();\n    } else if ([\"wildcard\", \"like\", \"starts-with\", \"ends-with\"].includes(action)) {\n\n      // Enable wildcard\n      if (value && $.trim(value).length > 0) {\n\n        this.controlInitial && this.controlInitial.setDisplayValue(newValue);\n\n        if (self.isCurrentWildcardFilter()) {\n          var $container = $control.find(\".bz-query-advanced\");\n          $container.data(\"mode-wildcard\", true);\n        }\n      }\n\n    }\n  },\n\n  /**\r\n      * The render's behaviour to add handlers\r\n      */\n  configureHandlers: function configureHandlers() {\n    // Call Base\n    this._super();\n\n    // Call to wildcard handlers\n    this.configureWildcardHandlers();\n  },\n\n  /**\r\n      * Add handlers to query-filter control\r\n      */\n  configureWildcardHandlers: function configureWildcardHandlers() {\n    var self = this;\n    var $control = self.getControl();\n    var templateTooltip = self.renderFactory.getTemplate(\"query.advanced-tooltip\");\n\n    var $templateItem = $.tmpl(templateTooltip, {\n      title: bizagi.localization.getResource(\"workportal-widget-filter-wildcard-tooltip-title\", self.Class.TOOLTIP_TITLE),\n      content: bizagi.localization.getResource(\"workportal-widget-filter-wildcard-tooltip-content\", self.Class.TOOLTIP_CONTENT) });\n\n\n    $control.on(\"keyup\", \".bz-query-advanced__input\", function () {\n\n      if (!self.filterOptionIsShowed()) {\n        var $container = $control.find(\".bz-query-advanced\");\n        var $buttonClean = $(\".bz-query-advanced__clean\", $container);\n        var updateCleanButton;\n\n        if ($.trim(this.value).length > 0) {\n\n          $container.data(\"mode-wildcard\", true);\n\n          updateCleanButton = $buttonClean.hasClass(\"bz-hidden\");\n          self.setCurrentFilter({ id: \"wildcard\" });\n\n          // Hide list of filters\n          self.closeFloatView();\n        } else {\n          $container.data(\"mode-wildcard\", false);\n\n          $buttonClean.addClass('bz-hidden');\n          updateCleanButton = !$buttonClean.hasClass(\"bz-hidden\");\n\n          self.setCurrentFilter({ id: \"\" });\n        }\n\n        // Toggle to show the clean button\n        if (updateCleanButton) {\n          self.showHideCleanButton(true);\n        }\n\n        if (self.isCurrentWildcardFilter()) {\n          self.showTooltip($container, $templateItem.html());\n        }\n      }\n    });\n  },\n\n  /**\r\n      * Show tooltip\r\n      * @param $container\r\n      * @param $templateItem\r\n      */\n  showTooltip: function showTooltip($container, $templateItem) {\n    //Show Tooltip\n    $container.attr(\"title\", $templateItem);\n\n    if ($container.data(\"tooltip\") === undefined) {\n      // Apply tooltip plugin\n      $container.tooltip({\n        tooltipClass: 'bz-query-advanced__wildcard-tooltip',\n        position: {\n          my: \"left bottom\",\n          at: \"left top\" },\n\n        content: function content() {\n          var element = $(this)[0];\n          if (element && element.title) {\n            var _title = element.title;\n\n            element.title = \"\";\n\n            return _title;\n          }\n        } });\n\n    }\n\n    $container.tooltip(\"open\");\n  },\n\n  /**\r\n      * Returns the html templated element\r\n      * @returns {*}\r\n      */\n  renderElement: function renderElement() {\n    return this._super(\"render-base\");\n  },\n\n  /**\r\n      *  Changes the render required\r\n      * @param argument\r\n      */\n  changeRequired: function changeRequired(argument) {\n    this.properties.required = argument;\n\n    this.changeRequiredLabel(argument);\n  },\n\n  /**\r\n      * Change cell required and attach bindings\r\n      * @param argument\r\n      */\n  changeCellRequired: function changeCellRequired(argument) {\n    this.changeRequired(argument);\n  },\n\n  /**\r\n      * This method just make a toggle of red label indicator\r\n      * @argument {boolean} argument\r\n      */\n  changeRequiredLabel: function changeRequiredLabel(argument) {\n    var control = this.getControl();\n\n    if (control.length > 0) {\n      if (this.getMode() !== \"execution\") {\n        if (bizagi.util.parseBoolean(argument) === true && this.properties.editable) {\n          control.addClass(\"control-required\");\n        } else {\n          control.removeClass(\"control-required\");\n        }\n      } else {\n        if (bizagi.util.parseBoolean(argument) === true && !this.hasValue() && this.properties.editable) {\n          control.addClass(\"control-required\");\n        } else {\n          control.removeClass(\"control-required\");\n        }\n      }\n    }\n    this.triggerRenderValidate();\n  },\n\n  /**\r\n      * Returns the internal value\r\n      * @returns {*|Array}\r\n      */\n  getValue: function getValue() {\n    if (this.isCurrentTagFilter()) return this.performTagItems();\n\n    if (this.isCurrentNullFilter()) return null;\n\n    // Call to base\n    return this.controlInitial ? this.controlInitial.getValue() : \"\";\n  },\n\n  /**\r\n      * Get the label element\r\n      * @returns {jQuery|HTMLElement}\r\n      */\n  getLabel: function getLabel() {\n    return $(\"label\", this._super());\n  },\n\n  // endregion // #endregion\n\n  // region // #region METHODS TO LIST FILTERS\n\n  cleanDataFilter: function cleanDataFilter(refresh) {\n    var $inputWildcard = $(\".bz-query-advanced\", this.getControl());\n    if ($inputWildcard.data('ui-tooltip')) {\n      $inputWildcard.tooltip('destroy');\n      $inputWildcard.removeAttr(\"title\");\n    }\n    $inputWildcard.data(\"mode-wildcard\", false);\n    this._super(refresh);\n  },\n\n  // endregion // #endregion\n\n  // region // #region METHODS TO LITE CONTROLS\n\n  /**\r\n   * Define the controls depend of filter type\r\n   * @param {*} params\r\n   */\n  defineLiteControl: function defineLiteControl(params) {\n    var self = this;\n    var typeFilter = params && params.typeFilter || \"advanced\";\n    var controlEnd = null;\n\n    var controlInitial = new bizagi.rendering.desktop.textAdvanced(self.getRenderProperties({\n      typeControl: typeFilter,\n      isRange: this.isCurrentBetweenFilter() }));\n\n\n    self.setLiteControls(controlInitial, controlEnd);\n  },\n\n  /**\r\n      * set the rendered controls\r\n      * @param {*} controlInitial\r\n      * @param {*} controlEnd\r\n      */\n  setLiteControls: function setLiteControls(controlInitial, controlEnd) {\n    var self = this;\n    var control = self.getControl();\n\n    var filter = this.getCurrentFilter();\n    var filterType = filter && filter.action || \"default\";\n\n    self.controlInitial = controlInitial || null;\n    self.controlEnd = controlEnd || null;\n\n    var template = this.renderFactory.getTemplate(\"query.advanced-content\");\n    var $templateItem = $.tmpl(template, {\n      value: self.getResourceByKey(filter.label, filter.defaultLabel),\n      id: filter.id,\n      filterType: filterType });\n\n\n    var $canvas = $(\".bz-query-advanced__filter\", control).empty();\n    $canvas.append($templateItem);\n\n    var $controlInitial = $(\".bz-query-advanced__filter-input\", $canvas);\n    self.renderLiteControl(filterType, $controlInitial, controlInitial);\n  },\n\n  /**\r\n      * Render control\r\n      * @param {*} filterType\r\n      * @param {*} $canvas\r\n      * @param {*} control\r\n      */\n  renderLiteControl: function renderLiteControl(filterType, $canvas, control) {\n    var self = this;\n\n    // Templates: input or between\n    $.when(control.render(this.getTemplateByType(filterType))).\n    done(function (html) {\n      $canvas.empty().append(html);\n\n      var action = self.getCurrentAction();\n      var $inputFiler = $(\".bz-query-advanced__input\", $canvas);\n\n      $inputFiler.attr(\"data-action\", action);\n\n      if (self.isCurrentNullFilter()) {\n        $inputFiler.attr(\"readonly\", true);\n      }\n\n      control.postRenderElement($canvas, true); // true for skip design hack\n\n      if (!self.isCurrentTagFilter()) {\n        self.configureInternalHandlers(control);\n      }\n    });\n  },\n\n  getTemplateByType: function getTemplateByType(filterType) {\n    if ([\"between\", \"tags\"].includes(filterType)) return \"query.advanced-text\";\n    return \"query.advanced-input\";\n  },\n\n  configureInternalHandlers: function configureInternalHandlers(control) {\n    var self = this;\n    var $internalControl = control.getInputControl();\n\n    // Handler for update data value\n    $internalControl.bind(\"updateData\", function (evt, params) {\n      // Update data value\n      self.setValue(self.getValue());\n    });\n  },\n\n  getRequiredProperties: function getRequiredProperties() {\n    return {\n      maxLength: this.maxLength };\n\n  }\n\n  // endregion // #endregion\n});\n\n\n// Extends from render desktop base\nbizagi.rendering.desktop.text.extend(\"bizagi.rendering.desktop.textAdvanced\", {}, {\n\n  getControl: function getControl() {\n    var self = this;\n    if (!self.control || self.control instanceof jQuery && self.control.length === 0) {\n      self.control = $(self.element || self.observableElement);\n    }\n    if (!self.control || self.control.length === 0) {\n      return null;\n    }\n    return self.control;\n  },\n\n  setValue: function setValue(value) {\n    value = value || \"\";\n\n    this._super(value);\n\n    // Update parent control\n    var $inputControl = this.getInputControl();\n    $inputControl && $inputControl.trigger('updateData', { data: value });\n  },\n\n  getInputControl: function getInputControl() {\n    return $(\"input\", this.getControl()) || null;\n  } });","/**\r\n *   Name: Bizagi Desktop queryNumber\r\n *   Author: UI Forms Team\r\n *   Comments: queryNumberAdvanced\r\n *   -   This script will redefine the query text-advanced render class to adjust to desktop devices\r\n */\n\n// Extends from render desktop base\nbizagi.rendering.desktop.render.extend(\"bizagi.rendering.desktop.queryNumberAdvanced\", bizagi.rendering.render.base.prototype);\n// Extends itself\nbizagi.rendering.desktop.queryNumberAdvanced.extend(\"bizagi.rendering.desktop.queryNumberAdvanced\", bizagi.rendering.queryAdvanced.prototype);\n// Extends itself\nbizagi.rendering.desktop.queryNumberAdvanced.extend(\"bizagi.rendering.desktop.queryNumberAdvanced\", {\n  DATATYPE: \"Number\" },\n{\n  // region // #region CONTROL BASE\n\n  /**\r\n   * Update or init the element data\r\n   * @param data\r\n   */\n  initializeData: function initializeData(data) {\n    // Call base\n    this._super(data);\n\n    this.isNewRenderForm = true;\n    this.defaultFilter = \"default\";\n\n    var properties = this.properties;\n    var format = this.getResource(\"numericFormat\");\n\n    properties.allowDecimals =\n    typeof properties.allowDecimals !== \"undefined\" ?\n    bizagi.util.parseBoolean(properties.allowDecimals) :\n    this.getDefaultAllowDecimals(properties.dataType);\n    properties.numDecimals = properties.allowDecimals ?\n    properties.numDecimals ?\n    properties.numDecimals :\n    typeof BIZAGI_DEFAULT_CURRENCY_INFO !== \"undefined\" ?\n    BIZAGI_DEFAULT_CURRENCY_INFO.decimalDigits :\n    2 :\n    0;\n    properties.symbol = \"\";\n    properties.positiveFormat = format.positiveFormat;\n    properties.negativeFormat = format.negativeFormat;\n    properties.decimalSymbol =\n    typeof BIZAGI_DEFAULT_CURRENCY_INFO !== \"undefined\" ?\n    BIZAGI_DEFAULT_CURRENCY_INFO.decimalSeparator :\n    format.decimalSymbol;\n    properties.digitGroupSymbol =\n    typeof BIZAGI_DEFAULT_CURRENCY_INFO !== \"undefined\" ?\n    BIZAGI_DEFAULT_CURRENCY_INFO.groupSeparator :\n    format.digitGroupSymbol;\n    properties.groupDigits = this.setGroupDigits();\n    properties.colorize = properties.colorizeOnNegative || false;\n    properties.minValue = properties.minValue || null;\n    properties.maxValue = properties.maxValue || null;\n    properties.dataType = properties.dataType || 1;\n  },\n\n  /**\r\n      * Customize each render after processed\r\n      */\n  postRender: function postRender() {\n    var filterType = this.properties.filterType || \"\";\n\n    // Call to base\n    this._super();\n\n    // Call to repaint filters\n    this.setFilter(filterType);\n  },\n\n  /**\r\n      * Sets the internal value\r\n      * @param value\r\n      * @param triggerEvents\r\n      */\n  setValue: function setValue(value, triggerEvents) {\n    triggerEvents = triggerEvents !== undefined ? triggerEvents : true;\n\n    value = Array.isArray(value) ? JSON.encode(value) : value;\n\n    this._super(value, triggerEvents);\n  },\n\n  /**\r\n      * Sets the value in the rendered control\r\n      * @param value\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n\n    if (self.properties.editable)\n    self.prepareForSetValue();\n\n    var action = this.getCurrentAction();\n    var newValue = self.performDataValue(value);\n\n\n    // Set internal value\n    this.setValue(newValue, false);\n\n    // Update clean icon\n    if (this.isExecutionMode() && action !== this.defaultFilter) {\n      self.showHideCleanButton(true);\n    } else {\n      this.controlInitial && this.controlInitial.setDisplayValue(value);\n    }\n\n    // Render by filter type\n    if (self.isCurrentTagFilter()) {\n      self.addSelectedElements();\n    } else if ([\"to\", \"from\"].includes(action)) {\n      this.controlInitial && this.controlInitial.setDisplayValue(newValue);\n    } else if (value && [\"between\"].includes(action)) {\n      var newListValue = self.performListValue(value);\n\n      if (newListValue && newListValue.from)\n      this.controlInitial &&\n      this.controlInitial.setDisplayValue(newListValue.from);\n      if (newListValue && newListValue.to)\n      this.controlEnd && this.controlEnd.setDisplayValue(newListValue.to);\n    }\n  },\n\n  /**\r\n      * Returns the html templated element\r\n      * @returns {*}\r\n      */\n  renderElement: function renderElement() {\n    return this._super(\"render-base\");\n  },\n\n  /**\r\n      *  Changes the render required\r\n      * @param argument\r\n      */\n  changeRequired: function changeRequired(argument) {\n    this.properties.required = argument;\n\n    this.changeRequiredLabel(argument);\n  },\n\n  /**\r\n      * Change cell required and attach bindings\r\n      * @param argument\r\n      */\n  changeCellRequired: function changeCellRequired(argument) {\n    this.changeRequired(argument);\n  },\n\n  /**\r\n      * This method just make a toggle of red label indicator\r\n      * @argument {boolean} argument\r\n      */\n  changeRequiredLabel: function changeRequiredLabel(argument) {\n    var control = this.getControl();\n\n    if (control.length > 0) {\n      if (this.getMode() !== \"execution\") {\n        if (bizagi.util.parseBoolean(argument) === true && this.properties.editable) {\n          control.addClass(\"control-required\");\n        } else {\n          control.removeClass(\"control-required\");\n        }\n      } else {\n        if (bizagi.util.parseBoolean(argument) === true && !this.hasValue() && this.properties.editable) {\n          control.addClass(\"control-required\");\n        } else {\n          control.removeClass(\"control-required\");\n        }\n      }\n    }\n    this.triggerRenderValidate();\n  },\n\n  /**\r\n      * Returns the internal value\r\n      * @returns {*|Array}\r\n      */\n  getValue: function getValue() {\n    if (this.isCurrentTagFilter()) return this.performTagItems();\n\n    if (this.isCurrentBetweenFilter()) {\n      var initial = this.controlInitial ? this.formatInputValue(this.controlInitial.getValue()) : \"null\";\n      var end = this.controlEnd ? this.formatInputValue(this.controlEnd.getValue()) : \"null\";\n      var newValue = [initial, end];\n\n      return initial === \"null\" && end === \"null\" ? \"\" : JSON.encode(newValue);\n    }\n\n    if (this.isCurrentNullFilter()) return null;\n\n    // Call to base\n    return this.controlInitial ? this.controlInitial.getValue() : \"\";\n  },\n  /**\r\n      * Return the value on controlInitial as number\r\n      * @param {*} value\r\n      */\n  getValidTagValue: function getValidTagValue(value) {\n    return this.controlInitial && this.controlInitial.numericInput.asNumber() || $.trim(value);\n  },\n  /**\r\n      * Return the group digits default property based on digitGroupSymbol\r\n      * @returns {*}\r\n      */\n  setGroupDigits: function setGroupDigits() {\n    var self = this;\n    if (typeof self.properties.thousands !== \"undefined\") {\n      if (self.properties.digitGroupSymbol) {\n        // some cultures\n        return bizagi.util.parseBoolean(self.properties.thousands);\n      } else {\n        return false;\n      }\n    } else if (self.properties.digitGroupSymbol) {\n      // some cultures\n      return this.getDefaultGroupDigits(self.properties.dataType);\n    } else {\n      return false;\n    }\n  },\n\n  /**\r\n      * Return the allow decimals default property based on the datatype\r\n      * @param dataType\r\n      * @returns {boolean}\r\n      */\n  getDefaultAllowDecimals: function getDefaultAllowDecimals(dataType) {\n    if (dataType) {\n      // Integer data types\n      if ([1, 2, 3, 4, 7].includes(dataType)) return false;\n\n      // Decimal and money data types\n      if ([6, 8, 10, 11].includes(dataType)) return true;\n    }\n\n    return false;\n  },\n\n  /**\r\n      * Return the group digits default property based on the datatype\r\n      * @param dataType\r\n      * @returns {boolean}\r\n      */\n  getDefaultGroupDigits: function getDefaultGroupDigits(dataType) {\n    if (dataType) {\n      // Integer data types\n      if ([1, 2, 3, 4, 7].includes(dataType)) return false;\n\n      // Decimal data types\n      if ([6, 8, 10, 11].includes(dataType)) return true;\n    }\n\n    return false;\n  },\n\n  /**\r\n      * Get the label element\r\n      * @returns {jQuery|HTMLElement}\r\n      */\n  getLabel: function getLabel() {\n    return $(\"label\", this._super());\n  },\n\n  // endregion // #endregion\n\n  // region // #region METHODS TO LITE CONTROLS\n\n  /**\r\n   * Define the controls depend of filter type\r\n   * @param {*} params\r\n   */\n  defineLiteControl: function defineLiteControl(params) {\n    var self = this;\n    var typeFilter = params && params.typeFilter || \"advanced\";\n    var numberEnd = null;\n    var numberInitial = new bizagi.rendering.desktop.numberAdvanced(\n    self.getRenderProperties({\n      typeControl: typeFilter,\n      isRange: this.isCurrentBetweenFilter(),\n      isMinimum: true }));\n\n\n\n    if (this.isCurrentBetweenFilter()) {\n      numberEnd = new bizagi.rendering.desktop.numberAdvanced(\n      self.getRenderProperties({\n        typeControl: typeFilter + \"_max\",\n        isRange: this.isCurrentBetweenFilter(),\n        isMaximum: true }));\n\n\n\n      numberInitial.subscribe(numberEnd);\n      numberEnd.subscribe(numberInitial);\n    }\n\n    self.setLiteControls(numberInitial, numberEnd);\n  },\n\n  /**\r\n      * set the rendered controls\r\n      * @param {*} controlInitial\r\n      * @param {*} controlEnd\r\n      */\n  setLiteControls: function setLiteControls(controlInitial, controlEnd) {\n    var self = this;\n    var control = self.getControl();\n\n    var filter = this.getCurrentFilter();\n    var filterType = filter && filter.action || \"default\";\n\n    self.controlInitial = controlInitial || null;\n    self.controlEnd = controlEnd || null;\n\n    var template = this.renderFactory.getTemplate(\"query.advanced-content\");\n    var $templateItem = $.tmpl(template, {\n      value: self.getResourceByKey(filter.label, filter.defaultLabel),\n      id: filter.id,\n      filterType: filterType });\n\n\n    var $canvas = $(\".bz-query-advanced__filter\", control).empty();\n\n    if (this.isCurrentBetweenFilter()) {\n      $canvas.append($templateItem);\n\n      var $numberMin = $(\".bz-query-advanced__filter-input-from\", $canvas);\n      var $numberMax = $(\".bz-query-advanced__filter-input-to\", $canvas);\n\n      self.renderLiteControl(filterType, $numberMin, controlInitial);\n      self.renderLiteControl(filterType, $numberMax, controlEnd);\n    } else {\n      $canvas.append($templateItem);\n\n      var $numberInitial = $(\".bz-query-advanced__filter-input\", $canvas);\n      self.renderLiteControl(filterType, $numberInitial, controlInitial);\n    }\n  },\n\n  /**\r\n      * Render control\r\n      * @param {*} filterType\r\n      * @param {*} $canvas\r\n      * @param {*} control\r\n      */\n  renderLiteControl: function renderLiteControl(filterType, $canvas, control) {\n    var self = this;\n\n    // Templates: input or between\n    $.when(control.render(this.getTemplateByType(filterType))).done(function (html) {\n      $canvas.empty().append(html);\n\n      var action = self.getCurrentAction();\n      var $inputFiler = $(\".bz-query-advanced__input\", $canvas);\n\n      $inputFiler.attr(\"data-action\", action);\n\n      if (self.isCurrentNullFilter()) {\n        $inputFiler.attr(\"readonly\", true);\n      }\n\n      control.postRenderElement($canvas, true); // true for skip design hack\n\n      if (!self.isCurrentTagFilter()) {\n        self.configureInternalHandlers(control);\n      }\n    });\n  },\n\n  getTemplateByType: function getTemplateByType(filterType) {\n    if ([\"between\", \"tags\"].includes(filterType)) return \"query.advanced-text\";\n    return \"query.advanced-input\";\n  },\n\n  configureInternalHandlers: function configureInternalHandlers(control) {\n    var self = this;\n    var $internalControl = control.getInputControl();\n\n    // Handler for update data value\n    $internalControl.bind(\"updateData\", function (evt, params) {\n      // Update data value\n      self.setValue(self.getValue());\n    });\n  },\n\n  getRequiredProperties: function getRequiredProperties() {\n    var properties = this.properties;\n\n    return {\n      allowDecimals: properties.allowDecimals,\n      numDecimals: properties.numDecimals,\n      symbol: properties.symbol,\n      positiveFormat: properties.positiveFormat,\n      negativeFormat: properties.negativeFormat,\n      decimalSymbol: properties.decimalSymbol,\n      digitGroupSymbol: properties.digitGroupSymbol,\n      groupDigits: properties.groupDigits,\n      colorize: properties.colorize,\n      minValue: properties.minValue,\n      maxValue: properties.maxValue,\n      dataType: properties.dataType,\n      percentage: properties.percentage };\n\n  },\n\n  // endregion // #endregion\n\n  // region // #region METHODS TO TAGS FILTER\n\n  addTag: function addTag(tagItem) {\n    var controlTag = this.controlInitial;\n    if (controlTag) {\n      var numericInput = controlTag.numericInput;\n      controlTag.formatNumericInput(numericInput[0]);\n\n      if (bizagi.util.isEmpty(controlTag.getValue())) return;\n\n      tagItem.value = controlTag.getValue() || \"\";\n      tagItem.displayValue = numericInput.val() || \"\";\n    }\n\n    this._super(tagItem);\n  },\n\n  /**\r\n      * Add format to tag\r\n      * @param value\r\n      * @returns {*}\r\n      */\n  formatTagItem: function formatTagItem(value) {\n    var properties = this.properties;\n    var decimalFormat = {\n      symbol: properties.symbol,\n      positiveFormat: properties.positiveFormat,\n      negativeFormat: properties.negativeFormat,\n      decimalSymbol: properties.decimalSymbol,\n      digitGroupSymbol: properties.digitGroupSymbol,\n      groupDigits: properties.groupDigits,\n      roundToDecimalPlace: properties.numDecimals,\n      colorize: properties.colorize };\n\n\n    return bizagi.util.formatDecimal(value, decimalFormat);\n  },\n\n  // endregion // #endregion\n\n  // region // #region A&V METHODS\n\n  /**\r\n   * Changes the render minimum value\r\n   * @param value\r\n   */\n  changeMinValue: function changeMinValue(value) {\n    if (!!this.controlInitial) {\n      var newValue = this.controlInitial.performMinValue(value);\n\n      this.properties.minValue = this.properties.dataTypeMinValue = newValue;\n      this.controlInitial.changeMinValue(value);\n\n      // Condition for between filter\n      if (!!this.controlEnd && !!this.controlInitial) {\n        this.controlEnd.changeMinValue(value);\n      }\n    }\n  },\n\n  /**\r\n      * Changes the render maximum value\r\n      * @param value\r\n      */\n  changeMaxValue: function changeMaxValue(value) {\n    if (!!this.controlInitial) {\n      var newValue = this.controlInitial.performMaxValue(value);\n\n      this.properties.maxValue = this.properties.dataTypeMaxValue = newValue;\n\n      // Condition for between filter\n      if (!!this.controlEnd && !!this.controlInitial) {\n        this.controlEnd.changeMaxValue(value);\n      } else {\n        this.controlInitial.changeMaxValue(value);\n      }\n    }\n  },\n\n  /**\r\n      * Customizes render color\r\n      * @param {} color\r\n      * @returns {}\r\n      */\n  changeColor: function changeColor(color) {\n    var $control = this.getControl();\n\n    // To review: Save the command to propagate action when filter is changed\n    if (!!this.controlInitial) this.controlInitial.changeColor(color, true);\n    if (!!this.controlEnd) this.controlEnd.changeColor(color, true);\n\n    return this._super(color).changeFontColor($(\"label\", $control), color);\n  },\n\n  /**\r\n      * Context to apply styles\r\n      * @param context\r\n      * @returns {jQuery|HTMLElement}\r\n      */\n  getElementsToStylize: function getElementsToStylize(context) {\n    return this._super(context);\n  }\n\n  // endregion // #endregion\n});\n\n// Extends from render desktop base\nbizagi.rendering.desktop.number.extend(\"bizagi.rendering.desktop.numberAdvanced\", {}, {\n  getControl: function getControl() {\n    var self = this;\n    if (!self.control || self.control instanceof jQuery && self.control.length === 0) {\n      self.control = $(self.element || self.observableElement);\n    }\n    if (!self.control || self.control.length === 0) {\n      return null;\n    }\n    return self.control;\n  },\n\n  subscribe: function subscribe(control) {\n    this.observer = this.observer || [];\n    this.observer.push(control);\n  },\n\n  notify: function notify(value) {\n    if (this.properties.isRange) {\n      for (var i = this.observer.length - 1; i >= 0; i--) {\n        if (this.properties.isMaximumValue) {\n          value = bizagi.util.isNumeric(value) ? value : this.properties.maxValue || this.calculateMaxValue(this.properties.dataType);\n          this.observer[i].changeMaxValue(value);\n        } else if (this.properties.isMinimumValue) {\n          value = bizagi.util.isNumeric(value) ? value : this.properties.minValue || this.calculateMinValue(this.properties.dataType);\n          this.observer[i].changeMinValue(value);\n        }\n      }\n    }\n  },\n\n  setValue: function setValue(value) {\n    this._super(value);\n    this.notify(value);\n\n    // Update parent control\n    var $inputControl = this.getInputControl();\n    $inputControl && $inputControl.trigger(\"updateData\", { data: value });\n  },\n\n  getInputControl: function getInputControl() {\n    return $(\"input\", this.getControl()) || null;\n  } });","/**\r\n *   Name: Bizagi Desktop queryNumber\r\n *   Author: UI Forms Team\r\n *   Comments: queryMoneyAdvanced\r\n *   -   This script will redefine the query text-advanced render class to adjust to desktop devices\r\n */\n\n// Extends from render Desktop base\nbizagi.rendering.desktop.render.extend(\"bizagi.rendering.desktop.queryMoneyAdvanced\", bizagi.rendering.render.base.prototype);\n// Extends itself\nbizagi.rendering.desktop.queryMoneyAdvanced.extend(\"bizagi.rendering.desktop.queryMoneyAdvanced\", bizagi.rendering.queryAdvanced.prototype);\n// Extends itself\nbizagi.rendering.desktop.queryMoneyAdvanced.extend(\"bizagi.rendering.desktop.queryMoneyAdvanced\", {\n  DATATYPE: \"Currency\" },\n{\n\n  // region // #region CONTROL BASE\n\n  /**\r\n   * Update or init the element data\r\n   * @param data\r\n   */\n  initializeData: function initializeData(data) {\n    // Call base\n    this._super(data);\n\n    this.isNewRenderForm = true;\n    this.defaultFilter = \"default\";\n\n    var properties = this.properties;\n    var format = this.getResource(\"numericFormat\");\n\n    properties.allowDecimals = typeof properties.allowDecimals !== \"undefined\" ? bizagi.util.parseBoolean(properties.allowDecimals) : this.getDefaultAllowDecimals(properties.dataType);\n    properties.numDecimals = properties.allowDecimals ? properties.numDecimals ? properties.numDecimals : typeof BIZAGI_DEFAULT_CURRENCY_INFO !== \"undefined\" ? BIZAGI_DEFAULT_CURRENCY_INFO.decimalDigits : 2 : 0;\n    properties.symbol = \"\";\n    properties.positiveFormat = format.positiveFormat;\n    properties.negativeFormat = format.negativeFormat;\n    properties.decimalSymbol = typeof BIZAGI_DEFAULT_CURRENCY_INFO !== \"undefined\" ? BIZAGI_DEFAULT_CURRENCY_INFO.decimalSeparator : format.decimalSymbol;\n    properties.digitGroupSymbol = typeof BIZAGI_DEFAULT_CURRENCY_INFO !== \"undefined\" ? BIZAGI_DEFAULT_CURRENCY_INFO.groupSeparator : format.digitGroupSymbol;\n    properties.groupDigits = this.setGroupDigits();\n    properties.colorize = properties.colorizeOnNegative || false;\n    properties.minValue = properties.minValue || null;\n    properties.maxValue = properties.maxValue || null;\n    properties.dataType = properties.dataType || 6;\n\n    // Configures symbol\n    properties.showsymbol = typeof properties.showsymbol !== \"undefined\" ? properties.showsymbol : true;\n\n    if (properties.showsymbol) {\n      var symbol = typeof BIZAGI_DEFAULT_CURRENCY_INFO !== \"undefined\" ? BIZAGI_DEFAULT_CURRENCY_INFO.symbol : format.symbol;\n      properties.symbol = properties.currencySymbol ? properties.currencySymbol : symbol;\n    } else {\n      properties.symbol = \"\";\n    }\n\n    properties.groupDigits = true;\n\n  },\n\n  /**\r\n      * Customize each render after processed\r\n      */\n  postRender: function postRender() {\n    var filterType = this.properties.filterType || \"\";\n\n    // Call to base\n    this._super();\n\n    // Call to repaint filters\n    this.setFilter(filterType);\n  },\n\n  /**\r\n      * Sets the internal value\r\n      * @param value\r\n      * @param triggerEvents\r\n      */\n  setValue: function setValue(value, triggerEvents) {\n    triggerEvents = triggerEvents !== undefined ? triggerEvents : true;\n\n    value = Array.isArray(value) ? JSON.encode(value) : value;\n\n    this._super(value, triggerEvents);\n  },\n\n  /**\r\n      * Sets the value in the rendered control\r\n      * @param value\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n\n    if (self.properties.editable)\n    self.prepareForSetValue();\n\n    var action = this.getCurrentAction();\n    var newValue = self.performDataValue(value);\n\n\n    // Set internal value\n    this.setValue(newValue, false);\n\n    // Update clean icon\n    if (this.isExecutionMode() && action !== this.defaultFilter) {\n      self.showHideCleanButton(true);\n    } else {\n      this.controlInitial && this.controlInitial.setDisplayValue(value);\n    }\n\n    // Render by filter type\n    if (self.isCurrentTagFilter()) {\n      self.addSelectedElements();\n    } else if ([\"to\", \"from\"].includes(action)) {\n      this.controlInitial && this.controlInitial.setDisplayValue(newValue);\n    } else if (value && [\"between\"].includes(action)) {\n      var newListValue = self.performListValue(value);\n\n      if (newListValue && newListValue.from) this.controlInitial && this.controlInitial.setDisplayValue(newListValue.from);\n      if (newListValue && newListValue.to) this.controlEnd && this.controlEnd.setDisplayValue(newListValue.to);\n    }\n  },\n\n  /**\r\n      * Returns the html templated element\r\n      * @returns {*}\r\n      */\n  renderElement: function renderElement() {\n    return this._super(\"render-base\");\n  },\n\n  /**\r\n      *  Changes the render required\r\n      * @param argument\r\n      */\n  changeRequired: function changeRequired(argument) {\n    this.properties.required = argument;\n\n    this.changeRequiredLabel(argument);\n  },\n\n  /**\r\n      * Change cell required and attach bindings\r\n      * @param argument\r\n      */\n  changeCellRequired: function changeCellRequired(argument) {\n    this.changeRequired(argument);\n  },\n\n  /**\r\n      * This method just make a toggle of red label indicator\r\n      * @argument {boolean} argument\r\n      */\n  changeRequiredLabel: function changeRequiredLabel(argument) {\n    var control = this.getControl();\n\n    if (control.length > 0) {\n      if (this.getMode() !== \"execution\") {\n        if (bizagi.util.parseBoolean(argument) === true && this.properties.editable) {\n          control.addClass(\"control-required\");\n        } else {\n          control.removeClass(\"control-required\");\n        }\n      } else {\n        if (bizagi.util.parseBoolean(argument) === true && !this.hasValue() && this.properties.editable) {\n          control.addClass(\"control-required\");\n        } else {\n          control.removeClass(\"control-required\");\n        }\n      }\n    }\n    this.triggerRenderValidate();\n  },\n\n  /**\r\n      * Returns the internal value\r\n      * @returns {*|Array}\r\n      */\n  getValue: function getValue() {\n    if (this.isCurrentTagFilter()) return this.performTagItems();\n\n    if (this.isCurrentBetweenFilter()) {\n      var initial = this.controlInitial ? this.formatInputValue(this.controlInitial.getValue()) : \"null\";\n      var end = this.controlEnd ? this.formatInputValue(this.controlEnd.getValue()) : \"null\";\n      var newValue = [initial, end];\n\n      return initial === \"null\" && end === \"null\" ? \"\" : JSON.encode(newValue);\n    }\n\n    if (this.isCurrentNullFilter()) return null;\n\n    // Call to base\n    return this.controlInitial ? this.controlInitial.getValue() : \"\";\n  },\n  /**\r\n      * Return the value on controlInitial as number\r\n      * @param {*} value\r\n      */\n  getValidTagValue: function getValidTagValue(value) {\n    return this.controlInitial && this.controlInitial.numericInput.asNumber() || $.trim(value);\n  },\n  /**\r\n      * Return the group digits default property based on digitGroupSymbol\r\n      * @returns {*}\r\n      */\n  setGroupDigits: function setGroupDigits() {\n    var self = this;\n    if (typeof self.properties.thousands !== \"undefined\") {\n      if (self.properties.digitGroupSymbol) {// some cultures\n        return bizagi.util.parseBoolean(self.properties.thousands);\n      } else {\n        return false;\n      }\n    } else if (self.properties.digitGroupSymbol) {// some cultures\n      return this.getDefaultGroupDigits(self.properties.dataType);\n    } else {\n      return false;\n    }\n  },\n\n  /**\r\n      * Return the allow decimals default property based on the datatype\r\n      * @param dataType\r\n      * @returns {boolean}\r\n      */\n  getDefaultAllowDecimals: function getDefaultAllowDecimals(dataType) {\n    if (dataType) {\n      // Integer data types\n      if ([1, 2, 3, 4, 7].includes(dataType)) return false;\n\n      // Decimal and money data types\n      if ([6, 8, 10, 11].includes(dataType)) return true;\n    }\n\n    return false;\n  },\n\n  /**\r\n      * Return the group digits default property based on the datatype\r\n      * @param dataType\r\n      * @returns {boolean}\r\n      */\n  getDefaultGroupDigits: function getDefaultGroupDigits(dataType) {\n    if (dataType) {\n      // Integer data types\n      if ([1, 2, 3, 4, 7].includes(dataType)) return false;\n\n      // Decimal data types\n      if ([6, 8, 10, 11].includes(dataType)) return true;\n    }\n\n    return false;\n  },\n\n  /**\r\n      * Get the label element\r\n      * @returns {jQuery|HTMLElement}\r\n      */\n  getLabel: function getLabel() {\n    return $(\"label\", this._super());\n  },\n\n  // endregion // #endregion\n\n  // region // #region METHODS TO LITE CONTROLS\n\n  /**\r\n   * Define the controls depend of filter type\r\n   * @param {*} params\r\n   */\n  defineLiteControl: function defineLiteControl(params) {\n    var self = this;\n    var typeFilter = params && params.typeFilter || \"advanced\";\n    var numberEnd = null;\n    var numberInitial = new bizagi.rendering.desktop.moneyAdvanced(self.getRenderProperties({\n      typeControl: typeFilter,\n      isRange: this.isCurrentBetweenFilter(),\n      isMinimum: true }));\n\n\n    if (this.isCurrentBetweenFilter()) {\n      numberEnd = new bizagi.rendering.desktop.moneyAdvanced(self.getRenderProperties({\n        typeControl: typeFilter + \"_max\",\n        isRange: this.isCurrentBetweenFilter(),\n        isMaximum: true }));\n\n\n      numberInitial.subscribe(numberEnd);\n      numberEnd.subscribe(numberInitial);\n    }\n\n    self.setLiteControls(numberInitial, numberEnd);\n  },\n\n  /**\r\n      * set the rendered controls\r\n      * @param {*} controlInitial\r\n      * @param {*} controlEnd\r\n      */\n  setLiteControls: function setLiteControls(controlInitial, controlEnd) {\n    var self = this;\n    var control = self.getControl();\n\n    var filter = this.getCurrentFilter();\n    var filterType = filter && filter.action || \"default\";\n\n    self.controlInitial = controlInitial || null;\n    self.controlEnd = controlEnd || null;\n\n    var template = this.renderFactory.getTemplate(\"query.advanced-content\");\n    var $templateItem = $.tmpl(template, {\n      value: self.getResourceByKey(filter.label, filter.defaultLabel),\n      id: filter.id,\n      filterType: filterType });\n\n\n    var $canvas = $(\".bz-query-advanced__filter\", control).empty();\n\n    if (this.isCurrentBetweenFilter()) {\n      $canvas.append($templateItem);\n\n      var $numberMin = $(\".bz-query-advanced__filter-input-from\", $canvas);\n      var $numberMax = $(\".bz-query-advanced__filter-input-to\", $canvas);\n\n      self.renderLiteControl(filterType, $numberMin, controlInitial);\n      self.renderLiteControl(filterType, $numberMax, controlEnd);\n\n    } else {\n      $canvas.append($templateItem);\n\n      var $numberInitial = $(\".bz-query-advanced__filter-input\", $canvas);\n      self.renderLiteControl(filterType, $numberInitial, controlInitial);\n    }\n  },\n\n  /**\r\n      * Render control\r\n      * @param {*} filterType\r\n      * @param {*} $canvas\r\n      * @param {*} control\r\n      */\n  renderLiteControl: function renderLiteControl(filterType, $canvas, control) {\n    var self = this;\n\n    // Templates: input or between\n    $.when(control.render(this.getTemplateByType(filterType))).\n    done(function (html) {\n      $canvas.empty().append(html);\n\n      var action = self.getCurrentAction();\n      var $inputFiler = $(\".bz-query-advanced__input\", $canvas);\n\n      $inputFiler.attr(\"data-action\", action);\n\n      if (self.isCurrentNullFilter()) {\n        $inputFiler.attr(\"readonly\", true);\n      }\n\n      control.postRenderElement($canvas, true); // true for skip design hack\n\n      if (!self.isCurrentTagFilter()) {\n        self.configureInternalHandlers(control);\n      }\n    });\n  },\n\n  getTemplateByType: function getTemplateByType(filterType) {\n    if ([\"between\", \"tags\"].includes(filterType)) return \"query.advanced-text\";\n    return \"query.advanced-input\";\n  },\n\n  configureInternalHandlers: function configureInternalHandlers(control) {\n    var self = this;\n    var $internalControl = control.getInputControl();\n\n    // Handler for update data value\n    $internalControl.bind(\"updateData\", function (evt, params) {\n      // Update data value\n      self.setValue(self.getValue());\n    });\n  },\n\n  getRequiredProperties: function getRequiredProperties() {\n    var properties = this.properties;\n\n    return {\n      allowDecimals: properties.allowDecimals,\n      numDecimals: properties.numDecimals,\n      symbol: properties.symbol,\n      positiveFormat: properties.positiveFormat,\n      negativeFormat: properties.negativeFormat,\n      decimalSymbol: properties.decimalSymbol,\n      digitGroupSymbol: properties.digitGroupSymbol,\n      groupDigits: properties.groupDigits,\n      colorize: properties.colorize,\n      minValue: properties.minValue,\n      maxValue: properties.maxValue,\n      dataType: properties.dataType };\n\n  },\n\n  // endregion // #endregion\n\n  // region // #region METHODS TO TAGS FILTER\n\n  addTag: function addTag(tagItem) {\n    var controlTag = this.controlInitial;\n    if (controlTag) {\n      var numericInput = controlTag.numericInput;\n      controlTag.formatNumericInput(numericInput[0]);\n\n      //if(bizagi.util.isEmpty(controlTag.getValue()))return;\n\n      tagItem.value = controlTag.getValue() || \"\";\n      tagItem.displayValue = numericInput.val() || \"\";\n    }\n\n    this._super(tagItem);\n  },\n\n  /**\r\n      * Add format to tag\r\n      * @param value\r\n      * @returns {*}\r\n      */\n  formatTagItem: function formatTagItem(value) {\n    var properties = this.properties;\n    var decimalFormat = {\n      symbol: properties.symbol,\n      positiveFormat: properties.positiveFormat,\n      negativeFormat: properties.negativeFormat,\n      decimalSymbol: properties.decimalSymbol,\n      digitGroupSymbol: properties.digitGroupSymbol,\n      groupDigits: properties.groupDigits,\n      roundToDecimalPlace: properties.numDecimals,\n      colorize: properties.colorize };\n\n\n    return bizagi.util.formatDecimal(value, decimalFormat);\n  },\n\n  // endregion // #endregion\n\n  // region // #region A&V METHODS\n\n  /**\r\n   * Changes the render minimum value\r\n   * @param value\r\n   */\n  changeMinValue: function changeMinValue(value) {\n    if (!!this.controlInitial) {\n      var newValue = this.controlInitial.performMinValue(value);\n\n      this.properties.minValue = this.properties.dataTypeMinValue = newValue;\n      this.controlInitial.changeMinValue(value);\n\n      // Condition for between filter\n      if (!!this.controlEnd && !!this.controlInitial) {\n        this.controlEnd.changeMinValue(value);\n      }\n    }\n  },\n\n  /**\r\n      * Changes the render maximum value\r\n      * @param value\r\n      */\n  changeMaxValue: function changeMaxValue(value) {\n    if (!!this.controlInitial) {\n      var newValue = this.controlInitial.performMaxValue(value);\n\n      this.properties.maxValue = this.properties.dataTypeMaxValue = newValue;\n\n      // Condition for between filter\n      if (!!this.controlEnd && !!this.controlInitial) {\n        this.controlEnd.changeMaxValue(value);\n      } else {\n        this.controlInitial.changeMaxValue(value);\n      }\n    }\n  },\n\n  /**\r\n      * Customizes render color\r\n      * @param {} color\r\n      * @returns {}\r\n      */\n  changeColor: function changeColor(color) {\n    var $control = this.getControl();\n\n    // To review: Save the command to propagate action when filter is changed\n    if (!!this.controlInitial) this.controlInitial.changeColor(color, true);\n    if (!!this.controlEnd) this.controlEnd.changeColor(color, true);\n\n    return this._super(color).\n    changeFontColor($(\"label\", $control), color);\n  },\n\n  /**\r\n      * Context to apply styles\r\n      * @param context\r\n      * @returns {jQuery|HTMLElement}\r\n      */\n  getElementsToStylize: function getElementsToStylize(context) {\n    return this._super(context);\n  }\n\n  // endregion // #endregion\n});\n\n\n// Extends from render desktop base\nbizagi.rendering.desktop.money.extend(\"bizagi.rendering.desktop.moneyAdvanced\", {}, {\n\n  getControl: function getControl() {\n    var self = this;\n    if (!self.control || self.control instanceof jQuery && self.control.length === 0) {\n      self.control = $(self.element || self.observableElement);\n    }\n    if (!self.control || self.control.length === 0) {\n      return null;\n    }\n    return self.control;\n  },\n\n  subscribe: function subscribe(control) {\n    this.observer = this.observer || [];\n    this.observer.push(control);\n  },\n\n  notify: function notify(value) {\n    if (this.properties.isRange) {\n      for (var i = this.observer.length - 1; i >= 0; i--) {\n        if (this.properties.isMaximumValue) {\n          value = bizagi.util.isNumeric(value) ? value : this.properties.maxValue || this.calculateMaxValue(this.properties.dataType);\n          this.observer[i].changeMaxValue(value);\n        } else if (this.properties.isMinimumValue) {\n          value = bizagi.util.isNumeric(value) ? value : this.properties.minValue || this.calculateMinValue(this.properties.dataType);\n          this.observer[i].changeMinValue(value);\n        }\n      }\n    }\n  },\n\n  setValue: function setValue(value) {\n    this._super(value);\n    this.notify(value);\n\n    // Update parent control\n    var $inputControl = this.getInputControl();\n    $inputControl && $inputControl.trigger('updateData', { data: value });\n  },\n\n  getInputControl: function getInputControl() {\n    return $(\"input\", this.getControl()) || null;\n  } });","/*\r\n *   Name: Bizagi Render ComboSelected class\r\n *   Author: Paola Herrera\r\n *   Comments:\r\n *   -   This script will define basic stuff for comboSelected renders\r\n */\n\n$.Class.extend(\"bizagi.rendering.comboSelected\", {}, {\n  /*\r\n                                                       * Constructor\r\n                                                       */\n  init: function init(params) {\n    // Call base\n    this._super(params);\n    this.leftValues = this.filterData();\n    this.rightValues = JSON.parse(JSON.stringify(this.properties.value));\n  },\n  /*\r\n     * Template method to implement in each children to customize each control\r\n     */\n  renderControl: function renderControl() {\n    var template = this.renderFactory.getTemplate(\"render-comboSelected\");\n    var html = $.fasttmpl(template, { dataList: this.leftValues });\n    return html;\n  },\n\n  orderArraySelected: function orderArraySelected(dataList) {\n    var arrayOrder = dataList;\n\n    var order = arrayOrder.sort(function (a, b) {\n      var nA = a.value === undefined || a.value === null ? \"\" : a.value.toString().toLowerCase();\n      var nB = b.value === undefined || b.value === null ? \"\" : b.value.toString().toLowerCase();\n      if (nA < nB)\n      return -1;else\n      if (nA > nB)\n      return 1;\n      return 0;\n    });\n\n    return order;\n  },\n\n  /*\r\n     * Filter data before set\r\n     */\n  filterData: function filterData() {\n    var self = this;\n    var dataListArray = [];\n\n    if (self.properties.data) {\n      $.each(self.properties.data, function (i, data) {\n        var el = $.grep(self.properties.value, function (value, e) {\n          return self.properties.xpath == \"Organizations\" ? value.id == data.id : value.id === data.id;\n        });\n\n        if (!el.length) {\n          dataListArray.push(data);\n        }\n      });\n    }\n\n    return dataListArray;\n  },\n\n  /*\r\n     * Template method to implement in each children to customize each control\r\n     */\n  renderControlReadOnly: function renderControlReadOnly() {\n    var template = this.renderFactory.getTemplate(\"render-comboSelectedReadOnly\");\n    var html = $.fasttmpl(template, {});\n    return html;\n  } });","/*\r\n *   Name: Bizagi Render ComboSelected class\r\n *   Author: Paola Herrera\r\n *   Comments:\r\n *   -   This script will define basic stuff for comboSelected renders\r\n */\n\n// Extends from render Desktop base\nbizagi.rendering.desktop.render.extend(\"bizagi.rendering.desktop.comboSelected\", bizagi.rendering.comboSelected.prototype);\n// Extends itself\nbizagi.rendering.desktop.comboSelected.extend(\"bizagi.rendering.desktop.comboSelected\", {}, {\n\n  /*\r\n                                                                                              * Template method to implement in each device to customize each render after processed\r\n                                                                                              */\n  postRender: function postRender() {\n    // Call base\n    this._super();\n    var control = this.getControl();\n\n    // Value data into selectedItemsToUpdate\n    this.showInitialData(this.properties.value);\n\n    //Show initial value or nothing\n    if (this.selectedItemsToUpdate.length >= 0) {\n      $.each(this.selectedItemsToUpdate, function (index, value) {\n        $(\"#listBoxComboData\", control).append(\"<option value='\" + value.id + \"'>\" + value.value + \" </option>\");\n      });\n    }\n\n    $(control).closest(\".ui-bizagi-render-control\").addClass(\"ui-bizagi-render-comboselected\");\n  },\n\n  orderArrayList: function orderArrayList() {\n    var arrayOrderList = this.properties.value;\n    var orderList = arrayOrderList.sort(function (a, b) {\n\n      var nA = a.value !== undefined && a.value !== null ? a.value.toLowerCase() : \"\";\n      var nB = b.value !== undefined && b.value !== null ? b.value.toLowerCase() : \"\";\n\n      if (nA < nB)\n      return -1;else\n      if (nA > nB)\n      return 1;\n      return 0;\n    });\n    this.properties.value = orderList;\n  },\n\n  /*\r\n     * Template method to implement in each device to customize the render's behaviour to add handlers\r\n     */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    var control = self.getControl();\n\n    //Event to move right the elements\n    $(\"#move_right\", control).click(function (e) {\n      self.addItem();\n      var input = $(\"#bz-render-comboSelected-listBoxResults .ui-bizagi-render-text\", control);\n      self.filterFunction(input.val(), self.rightValues, $(\"#bz-render-comboSelected-listBoxResults select\", control));\n      input.focus();\n    });\n\n    //Event to move left the elements\n    $(\"#move_left\", control).click(function (e) {\n      self.removeItem();\n      var input = $(\"#bz-render-comboSelected-selectOptions .ui-bizagi-render-text\", control);\n      self.filterFunction(input.val(), self.leftValues, $(\"#bz-render-comboSelected-selectOptions select\", control));\n      input.focus();\n    });\n\n    $(\"#bz-render-comboSelected-selectOptions .ui-bizagi-render-text\", control).bind(\"keyup input\", function (e) {\n      self.filterFunction(this.value, self.leftValues, $(\"#bz-render-comboSelected-selectOptions select\", control));\n    });\n\n    $(\"#bz-render-comboSelected-listBoxResults .ui-bizagi-render-text\", control).bind(\"keyup input\", function (e) {\n      self.filterFunction(this.value, self.rightValues, $(\"#bz-render-comboSelected-listBoxResults select\", control));\n    });\n  },\n\n  filterFunction: function filterFunction(filter, list, selectInput) {\n    $(selectInput).empty();\n    //Add the values that match\n    var results = list.reduce(function (val, el) {\n      if (el.value.toUpperCase().indexOf(filter.toUpperCase()) !== -1) {\n        val += \"<option value='\" + el.id + \"'>\" + el.value + \" </option>\";\n      }\n      return val;\n    }, \"\");\n    selectInput.append(results);\n  },\n\n  changeRequired: function changeRequired(argument) {\n    this.properties.required = argument;\n    this.changeRequiredLabel(argument);\n  },\n\n  changeRequiredLabel: function changeRequiredLabel(argument) {\n    var control = this.getControl();\n\n    if (control.length > 0) {\n      if (this.getMode() !== \"execution\") {\n        if (bizagi.util.parseBoolean(argument) == true && this.properties.editable) {\n          control.addClass(\"control-required\");\n        } else {\n          control.removeClass(\"control-required\");\n        }\n      } else {\n        if (bizagi.util.parseBoolean(argument) == true && !this.hasValue() && this.properties.editable) {\n          control.addClass(\"control-required\");\n        } else {\n          control.removeClass(\"control-required\");\n        }\n      }\n    }\n\n    this.triggerRenderValidate();\n  },\n\n  /*\r\n     * Override display value\r\n     */\n  setDisplayValue: function setDisplayValue(value) {\n    // Set internal value\n    this.setValue(value, false);\n  },\n\n  /*\r\n     * Add item to listBoxComboData and selectedItemsToUpdate array\r\n     */\n  addItem: function addItem() {\n    var self = this;\n    var control = self.getControl();\n    var dataSelected = $(\"#selectionData option:selected\", control);\n    var dataResults = $(\"#listBoxComboData\", control);\n    $.each(dataSelected, function (i, item) {\n      var newItem = {\n        id: parseInt(item.value),\n        value: item.text };\n\n      var inArray = $.grep(self.selectedItemsToUpdate, function (e) {\n        return e.id == newItem.id;\n      });\n      if (inArray.length <= 0) {\n        self.selectedItemsToUpdate.push(newItem);\n\n        self.rightValues.push(newItem);\n        self.leftValues = $.grep(self.leftValues, function (el) {\n          return el.id != newItem.id;\n        });\n      }\n    });\n    dataSelected.remove();\n    self.setValue(self.selectedItemsToUpdate);\n  },\n\n  /*\r\n     * Remove item from listBoxComboData and selectedItemsToUpdate array\r\n     */\n  removeItem: function removeItem() {\n    var self = this;\n    var control = self.getControl();\n\n    var dataSelectedToRemove = $(\"#listBoxComboData option:selected\", control);\n    var dataOptions = $(\"#selectionData\", control);\n\n    $.each(dataSelectedToRemove, function (i, item) {\n      var removeItem = {\n        id: parseInt(item.value),\n        value: item.text };\n\n      var inArray = $.grep(dataOptions, function (e) {\n        return e.id == removeItem.id;\n      });\n      if (inArray.length <= 0) {\n        self.leftValues.push(removeItem);\n        self.rightValues = $.grep(self.rightValues, function (e) {\n          return e.id != removeItem.id;\n        });\n\n        self.selectedItemsToUpdate = $.grep(self.selectedItemsToUpdate, function (e) {\n          return e.id != removeItem.id;\n        });\n      }\n    });\n\n    dataSelectedToRemove.remove();\n    self.setValue(self.selectedItemsToUpdate);\n  },\n\n  /*\r\n     * Show listBoxComboData and move_left button from control view\r\n     */\n  showListBoxComboData: function showListBoxComboData() {\n    var control = this.getControl();\n    $(\"#move_left\", control).show();\n    $(\"#bz-render-comboSelected-listBoxResults\", control).show();\n  },\n\n  /*\r\n     *   Sets the value in the rendered control\r\n     */\n  showInitialData: function showInitialData(val) {\n    var self = this;\n    self.orderArrayList();\n    self.selectedItemsToUpdate = [];\n\n    if (!!val) {\n      $.each(val, function (index, value) {\n        self.selectedItemsToUpdate.push({\n          id: value.id,\n          value: value.value });\n\n      });\n    }\n  },\n\n  renderReadOnly: function renderReadOnly() {\n    var htmlControl = this.renderFactory.getTemplate(\"render-comboSelectedReadOnly\");\n    this.showInitialData(this.properties.value);\n    return $.fasttmpl(htmlControl, { datasource: this.selectedItemsToUpdate });\n  },\n\n  /*\r\n     * Has Value\r\n     */\n  hasValue: function hasValue() {\n    var data = typeof this.value === \"string\" ? JSON.parse(this.value).value : this.value;\n    return !bizagi.util.isEmpty(data);\n  },\n\n  /*\r\n     *   Sets the internal value\r\n     */\n  setValue: function setValue(value, triggerEvents) {\n    // Set previous value\n    this.properties.previousValue = this.properties.originalValue = JSON.stringify({ \"value\": this.value });\n\n    // Change internal value\n    this.value = this.properties.value = JSON.stringify({ \"value\": value });\n\n    if (this.properties.required && this.getMode() == \"execution\") {\n\n      if (this.checkRequired([])) {\n        this.changeRequiredLabel(false);\n      } else {\n        this.changeRequiredLabel(true);\n      }\n    }\n\n    triggerEvents = triggerEvents !== undefined ? triggerEvents : true;\n    // Trigger events\n    if (triggerEvents && !this.internalSetInitialValueFlag) {\n      this.triggerRenderChange();\n      this.triggerRenderValidate();\n    }\n  } });","/**\r\n *   Name: Bizagi Rendering Users Form\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script override rendering.form to create and update users\r\n */\n\n// Extends from container desktop form base\nbizagi.rendering.desktop.form.extend(\"bizagi.rendering.desktop.usersForm\", {}, {\n\n  init: function init(params) {\n    // Set observable element\n    this.form = this.getFormContainer();\n    this.observableElement = $({});\n    this.collectedValues = {};\n\n    this._super(params);\n  },\n\n  /*\r\n     * Reimplement loading for users form\r\n     */\n  startLoading: function startLoading() {\n    var self = this;\n    var waitingTemplate = self.renderFactory.getTemplate(\"form-waiting\");\n\n    if (self.waitingOverlay && self.waitingMessage) return;\n\n    var $canvas = $(self.params.canvas).closest(\".ui-dialog\");\n    var position = $canvas.offset();\n\n    self.waitingOverlay = $('<div class=\"ui-widget-overlay\" />').appendTo($canvas);\n    self.waitingMessage = $.tmpl(waitingTemplate).appendTo($('body', $(document)));\n\n    self.waitingMessage.css({\n      \"top\": position.top + Math.ceil(($canvas.height() - self.waitingMessage.outerHeight()) / 2) + \"px\",\n      \"left\": position.left + Math.ceil(($canvas.width() - self.waitingMessage.outerWidth()) / 2) + \"px\" });\n\n  },\n\n  /*\r\n     *   Method to process button actions in the form\r\n     */\n  processButtons: function processButtons() {\n    var self = this;\n    var buttons = self.getButtons();\n\n    // Don't process buttons if they are undefined in the template\n    if (!buttons || buttons.length === 0) return;\n    if (self.properties.orientation === \"rtl\") self.buttons.reverse();\n\n    // Attach a handler for each button\n    buttons.click(function () {\n      var button = $(this);\n      var ordinal = button.attr(\"ordinal\");\n      var buttonProperties = self.buttons[ordinal];\n\n      // Execute button\n      self.processButton(buttonProperties);\n    });\n  },\n\n  /**\r\n      * Reimplement process button actions in users forms\r\n      * @param buttonProperties\r\n      */\n  processButton: function processButton(buttonProperties) {\n    var self = this;\n\n    // First hide and clear validation box\n    self.validationController.clearValidationMessages();\n\n    $.when(self.ready()).done(function () {\n\n      switch (buttonProperties.action) {\n        case \"save\":\n\n          var sendMailControl = self.form.getRender(\"sendMail\");\n          var passwordControl = self.form.getRender(\"password\");\n\n          var paramsSave = {\n            formAction: \"save\",\n            sendMail: sendMailControl && sendMailControl.getValue() || false,\n            password: passwordControl === null ? \"\" : passwordControl.getValue() };\n\n\n          if (sendMailControl && passwordControl && paramsSave.sendMail && paramsSave.password === \"\") {\n            $.when(self.dataService.getConfiguration()).done(function (response) {\n              if (response.redirectErrorPage) {\n                window.location.href = response.redirectErrorPage;\n                return;\n              }\n\n              var minLength = response.passwordMinLength;\n              var maxLength = response.passwordMaxLength;\n\n              self.generateRandomPassword(passwordControl, minLength, maxLength);\n              paramsSave.password = passwordControl.getValue();\n\n              self.processSave(paramsSave);\n            }).fail(function (response) {\n              self.generateRandomPassword(passwordControl, 8, 12);\n              paramsSave.password = passwordControl.getValue();\n              self.processSave(paramsSave);\n\n              var error = JSON.parse(response.responseText);\n              self.validationController.showValidationMessage(error.message);\n            });\n          } else {\n            self.processSave(paramsSave);\n          }\n          break;\n        case \"cancel\":\n          var paramsCancel = {\n            formAction: \"cancel\",\n            sendMail: false };\n\n\n          self.triggerHandler(\"endUsersForm\", paramsCancel);\n          break;}\n\n\n    });\n  },\n\n  /**\r\n      * Process save actions\r\n      * @param params\r\n      */\n  processSave: function processSave(params) {\n\n    var self = this;\n\n    // validate the form\n    var valid = self.validationController.performValidations();\n\n    if (valid) {\n      self.startLoading();\n\n      var saveDeferred;\n      $.extend(self.collectedValues, self.collectRenderValuesForSubmit());\n\n      var userFormData = {\n        action: \"SAVEUSER\",\n        data: {},\n        contexttype: \"entity\",\n        idPageCache: self.idPageCache };\n\n\n      delete self.collectedValues.sendMail;\n      delete self.collectedValues[\"@Metadata.Stakeholders\"];\n\n      if (self.params.action === \"add\") {\n        saveDeferred = self.createUser(userFormData, params);\n      } else if (self.params.action === \"edit\") {\n        saveDeferred = self.updateUser(userFormData);\n      }\n\n      $.extend(params, userFormData.data);\n\n      $.when(saveDeferred).done(function () {\n        self.triggerHandler(\"endUsersForm\", params);\n      }).fail(function (response) {\n        var error = response;\n\n        if (response && response.responseText) {\n          error = JSON.parse(response.responseText);\n        }\n\n        self.endLoading();\n        self.validationController.showValidationMessage(error.message);\n        self.triggerHandler(\"endUsersForm\", $.extend(params, { error: error }));\n      });\n    } else {\n      self.validationController.expandNotificationBox();\n    }\n  },\n\n  /**\r\n      * Generates a random password between 8 and 12 characters\r\n      * @param passwordControl\r\n      * @param minLength\r\n      * @param maxLength\r\n      */\n  generateRandomPassword: function generateRandomPassword(passwordControl, minLength, maxLength) {\n    var self = this;\n    var length = self.getLengthPassword(minLength, maxLength);\n    var chars = \"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghiklmnopqrstuvwxyz\";\n    var randomPassword = \"\";\n\n    for (var i = 0; i < length; i++) {\n      var randomPosition = Math.floor(Math.random() * chars.length);\n      randomPassword += chars.substring(randomPosition, randomPosition + 1);\n    }\n\n    passwordControl.saveValue(randomPassword);\n  },\n\n  /**\r\n      * Generates a random length between minLength and maxLength\r\n      * if both are defined, or between 8 and 12\r\n      * @param minLength\r\n      * @param maxLength\r\n      * @returns {*}\r\n      */\n  getLengthPassword: function getLengthPassword(minLength, maxLength) {\n    minLength = minLength && maxLength ? minLength : 8;\n    maxLength = maxLength && minLength ? maxLength : 12;\n\n    return Math.floor(Math.random() * (maxLength - (minLength - 1))) + minLength;\n  },\n\n  /**\r\n      * Create a new User\r\n      * @param userFormData\r\n      * @param params\r\n      * @returns {*}\r\n      */\n  createUser: function createUser(userFormData, params) {\n    var self = this;\n    var collectedData = self.getCollectedData();\n\n    // Data for first calling\n    $.extend(userFormData, {\n      data: {\n        domain: collectedData.domain,\n        fullName: collectedData.fullName,\n        userName: collectedData.userName },\n\n      prepare: true });\n\n\n    var submitDataAction = self.dataService.submitData(userFormData);\n    submitDataAction.tag = \"submitData\";\n\n    delete collectedData.userName;\n    delete collectedData.domain;\n\n    $.extend(userFormData, {\n      data: collectedData,\n      surrogatekey: false,\n      prepare: true });\n\n\n    var performAction = self.dataService.submitData(userFormData);\n    performAction.tag = \"performAction\";\n\n    // Assemble the actions\n    var actions = [];\n    actions.push(submitDataAction);\n    actions.push(performAction);\n\n    return $.when(self.dataService.multiaction().execute({ actions: actions })).\n    then(function (responses) {\n      var resultUser = {};\n\n      if (responses && bizagi.util.isArray(responses) && responses.length > 0) {\n        resultUser = responses[0] && responses[0].result || {};\n      }\n\n      // After save the action change to be edition\n      self.params.action = \"edit\";\n      self.params.userId = resultUser.idEntity || undefined;\n\n      $.extend(params, { userId: resultUser.idEntity || undefined });\n    });\n  },\n\n  /**\r\n      * Update data of current user\r\n      * @param userFormData\r\n      * @returns {*}\r\n      */\n  updateUser: function updateUser(userFormData) {\n    var self = this;\n    var collectedData = self.collectedValues;\n\n    $.extend(userFormData, {\n      data: collectedData,\n      surrogatekey: self.params.userId });\n\n\n    return self.dataService.submitData(userFormData);\n\n  },\n\n  /**\r\n      * Get collected data\r\n      * @returns {*}\r\n      */\n  getCollectedData: function getCollectedData() {\n    var self = this;\n    var collectedData = self.collectedValues;\n\n    var expiredAccountControl = self.form.getRender(\"expiredAccount\");\n    var lockedAccountControl = self.form.getRender(\"lockedAccount\");\n    var domain = self.form.getRender(\"domain\");\n\n    // Add these parameters for the collected data\n    collectedData.expiredAccount = expiredAccountControl ? expiredAccountControl.getValue() : null;\n    collectedData.lockedAccount = lockedAccountControl ? lockedAccountControl.getValue() : null;\n    collectedData.domain = domain ? domain.getValue() : \"\";\n\n    return collectedData;\n  } });","/*\r\n *   Name: BizAgi Render userPassword class\r\n *   Author: Paola Herrera\r\n *   Comments:\r\n *   -   This script will define basic stuff for userPassword render\r\n */\n$.Class.extend(\"bizagi.rendering.userPassword\", {}, {\n  /*\r\n                                                       * Constructor\r\n                                                       */\n  init: function init(params) {\n    // Call base\n    this._super(params);\n    this.properties.value = null;\n    self.properties = this.properties;\n  },\n\n  /*\r\n      * Template method to implement in each children to customize each control\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"render-userPassword\");\n    // Render template\n    var html = $.fasttmpl(template, { valuePassword: self.properties.value });\n    return html;\n  },\n\n  /*\r\n      * Public method to determine if a value is valid or not\r\n      */\n  isValid: function isValid(invalidElements) {\n    var self = this,\n    properties = self.properties;\n    // Call base\n    var bValid = this._super(invalidElements);\n    var value = self.getValue();\n\n    return bValid;\n  } });","/*\r\n *   Name: BizAgi Render Stateholder\r\n *   Author: Fabian Moreno\r\n */\n\n$.Class.extend(\"bizagi.rendering.stakeholder\", {}, {\n  /*\r\n                                                      * Constructor\r\n                                                      */\n  init: function init(params) {\n    // Call base\n    this._super(params);\n\n    if (typeof this.properties.value === \"undefined\") {\n      this.properties.value = [];\n    }\n\n    if (typeof this.properties.data === \"undefined\") {\n      this.properties.data = [];\n    }\n    self.properties = this.properties;\n  },\n  /*\r\n      * Template method to implement in each children to customize each control\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"stakeholder\");\n\n    var params = {\n      currentUser: bizagi.currentUser.userName,\n      userNames: typeof self.properties.value == \"string\" ? JSON.parse(self.properties.value).value : self.properties.value,\n      entities: self.properties.data };\n\n\n    // Render template\n    var html = $.fasttmpl(template, params);\n    return html;\n  },\n\n  getData: function getData(valueXpath, currentPage, filter, sort, order) {\n    var self = this;\n\n    if (typeof currentPage === \"undefined\" || currentPage == null)\n    currentPage = \"1\";\n\n    var params = {\n      pxpath: valueXpath,\n      prows: \"10\",\n      ppage: currentPage.toString(),\n      xpath: valueXpath,\n      idRender: self.properties.id,\n      xpathContext: self.properties.xpathContext,\n      idPageCache: self.properties.idPageCache,\n      property: \"dataxpath\",\n      contexttype: \"entity\",\n      pfilter: filter,\n      psort: sort };\n\n\n    if (order) params.porder = order;\n\n    return self.dataService.multiaction().getPropertyData(params);\n  },\n\n  associatedUser: function associatedUser(idEntity, guidEntity, idUser) {\n    var self = this;\n\n    return self.dataService.associateStakeholder({\n\n      idPageCache: self.properties.idPageCache,\n      contexttype: \"entity\",\n      surrogateKey: parseInt(idEntity),\n      associatedUser: JSON.encode({ dataType: \"Int\", value: idUser == \"null\" ? idUser : parseInt(idUser) }),\n      guidentity: guidEntity });\n\n  },\n\n  refreshStakeholderList: function refreshStakeholderList() {\n    var self = this;\n\n    return self.dataService.refreshAssociateStakeholder({\n\n      idRender: self.properties.id,\n      contexttype: \"entity\",\n      property: \"value\",\n      idPageCache: self.properties.idPageCache });\n\n  } });","/**\r\n *   Name: BizAgi Desktop Stakeholder\r\n *   Author: Fabian Moreno\r\n */\n\n// Extends from render Desktop base\nbizagi.rendering.desktop.render.extend(\"bizagi.rendering.desktop.stakeholder\", bizagi.rendering.stakeholder.prototype);\n// Extends itself\nbizagi.rendering.desktop.stakeholder.extend(\"bizagi.rendering.desktop.stakeholder\", {}, {\n  /**\r\n                                                                                           * Template method to implement in each device to customize each render after processed\r\n                                                                                           */\n  postRender: function postRender() {\n    var self = this;\n    var control = self.getControl();\n    var bizagiControl = $('.ui-bizagi-render-stakeholder-container').closest('.ui-bizagi-control.ui-bizagi-render-align-left ');\n\n    // Hide initial control label\n    bizagiControl.css('width', '100%');\n    bizagiControl.prev().css('display', 'none');\n\n    self.maxElemShow = 10;\n    self.maxPageToShow = 5;\n    self.selectedItems = [];\n    self.valueXpath;\n    self.guidEntity;\n    self.currentPage;\n\n    // Call base\n    this._super();\n  },\n\n  /**\r\n      * Template method to implement in each device to customize the render's behaviour to add handlers\r\n      */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    var control = self.getControl();\n\n    //Event to associate stakeholder\n    $(\"#ui-bizagi-render-stakeholder-add\", control).click($.proxy(self.addInstance, self));\n    $(\".ui-bizagi-render-stakeholder-entity-row\", control).click($.proxy(self.addGrid, self));\n    $(\".ui-bizagi-render-stakeholder-back\", control).click($.proxy(self.goToBack, self));\n    $(\".ui-bizagi-render-stakeholder-link\", control).click($.proxy(self.removeAssociated, self));\n    $(\".ui-bizagi-render-stakeholder-search\", control).keyup($.proxy(self.onKeyUpFilter, self));\n\n    control.on(\"click\", \"table .sortColumnsData-stakeholder\", function (e) {\n      var currentTarget = $(e.currentTarget);\n      var paramField = currentTarget.data(\"orderfield\");\n      var orderType = currentTarget.data(\"ordertype\");\n\n      self.gridDataService(self.currentPage, null, paramField, orderType === \"DESC\" ? \"ASC\" : \"DESC\");\n    });\n  },\n\n  /**\r\n      *\r\n      */\n  goToBack: function goToBack() {\n    var self = this;\n    var control = self.getControl();\n\n    if (self.status === \"step1\") {\n      $(\"#ui-bizagi-render-stakeholder-entity-list\", control).hide();\n      $(\"#ui-bizagi-render-stakeholder-add-instance\", control).hide();\n\n      $(\"#ui-bizagi-render-stakeholder-associated-list\", control).show();\n      $(\".ui-bizagi-render-stakeholder-associated\", control).show();\n      $(\"#ui-bizagi-render-stakeholder-add\", control).show();\n\n      $(\".ui-bizagi-render-stakeholder-back\", control).hide();\n\n      self.status = null;\n    } else\n    if (self.status === \"step2\") {\n      $(\"#ui-bizagi-render-stakeholder-grid\", control).hide();\n      $(\"#ui-bizagi-render-stakeholder-add-instance\", control).show();\n\n      self.status = \"step1\";\n    }\n  },\n\n  /**\r\n      *\r\n      */\n  addInstance: function addInstance() {\n    var self = this;\n    var control = self.getControl();\n\n    self.status = \"step1\";\n    $(\"#ui-bizagi-render-stakeholder-associated-list\", control).hide();\n    $(\".ui-bizagi-render-stakeholder-associated\", control).hide();\n    $(\"#ui-bizagi-render-stakeholder-add\", control).hide();\n    $(\"#ui-bizagi-render-stakeholder-entity-list\", control).show();\n    $(\"#ui-bizagi-render-stakeholder-add-instance\", control).show();\n    $(\".ui-bizagi-render-stakeholder-back\", control).show();\n    $(\".ui-bizagi-render-stakeholder-entity-row\").removeClass(\"ui-bizagi-render-stakeholder-selected\");\n\n  },\n\n  /**\r\n      *\r\n      * @param e\r\n      */\n  addGrid: function addGrid(e) {\n    var self = this;\n    var control = self.getControl();\n    self.valueXpath = $(e.currentTarget).attr(\"data-value\");\n    self.guidEntity = $(e.currentTarget).attr(\"guid-entity\");\n\n    self.status = \"step2\";\n    $(\".ui-bizagi-render-stakeholder-entity-row\").removeClass(\"ui-bizagi-render-stakeholder-selected\");\n    $(e.currentTarget).addClass(\"ui-bizagi-render-stakeholder-selected\");\n\n    $(\"#ui-bizagi-render-stakeholder-add-instance\", control).hide();\n    $(\"#ui-bizagi-render-stakeholder-grid\", control).show();\n\n    $(\".ui-bizagi-render-stakeholder-search\", control).val(\"\");\n\n    self.gridDataService(null, \"\", \"\", \"DESC\");\n  },\n\n  /**\r\n      *\r\n      * @param currentPage\r\n      * @param filter\r\n      * @param sort\r\n      * @param orderType\r\n      */\n  gridDataService: function gridDataService(currentPage, filter, sort, orderType) {\n    var self = this;\n\n    self.getData(self.valueXpath, currentPage, filter, sort, orderType).done(function (data) {\n      self.onGetData(data, orderType);\n    }).fail(function (e) {\n      self.onGetDataFail(e);\n    });\n  },\n\n  /**\r\n      *\r\n      * @param data\r\n      */\n  onGetData: function onGetData(data, orderType) {\n    var self = this;\n    var control = self.getControl();\n    var tempGrid = self.renderFactory.getTemplate(\"stakeholder-grid\");\n    self.currentPage = data.page;\n\n    if (data.rows.length > 0) {\n      var dataColumns = data.rows[0][1];\n\n      //preprocess columns because more template simple\n      var tempColumns = dataColumns.slice(1, dataColumns.length);\n      var columns = [];\n      for (iColumn = 0; iColumn < tempColumns.length; iColumn++) {\n        var objectColumn = {\n          name: tempColumns[iColumn][0],\n          displayName: tempColumns[iColumn][1],\n          orderType: orderType };\n\n        columns.push(objectColumn);\n      }\n\n\n      var idData = self.selectedItems[self.valueXpath];\n\n      $.each(data.rows, function (key, value) {\n        var item = value[2][0][0];\n        if (!idData && item != undefined || idData && item == idData.id)\n        {\n          self.selectedItems[self.valueXpath] = { \"id\": value[0], \"idInstance\": item, \"nameInstance\": value[2][0][1] };\n          return;\n        }\n      });\n\n      if (self.selectedItems[self.valueXpath] && self.selectedItems[self.valueXpath].idUser == \"null\")\n      {\n        delete self.selectedItems[self.valueXpath];\n      }\n\n      //preprocess data.rows because more template simple\n      var newDataRows = [];\n      for (var iRow = 0; iRow < data.rows.length; iRow++) {\n        var stateInstance = \"\";\n        var tooltipLink = \"\";\n\n        if (data.rows[iRow][2][0][0] && data.rows[iRow][2][0][0] != self.properties.idUser) {\n          stateInstance = \"associatedWithAnotherUser\";\n          tooltipLink = bizagi.localization.getResource(\"render-stakeholder-link-tooltip-associate-another-user\").replace(\"{0}\", data.rows[iRow][2][0][1]);\n        } else\n        if (data.rows[iRow][2][0][0] == self.properties.idUser) {\n          stateInstance = \"associateMe\";\n          tooltipLink = bizagi.localization.getResource(\"render-stakeholder-link-tooltip-associate\");\n        } else\n        {\n          stateInstance = \"unassociated\";\n          tooltipLink = bizagi.localization.getResource(\"render-stakeholder-link-tooltip-unassociate\");\n        }\n\n        var rowTemplate = {};\n        rowTemplate.columns = [];\n        rowTemplate.columns.push({\n          stateInstance: stateInstance,\n          value: data.rows[iRow][0],\n          tooltipLink: tooltipLink });\n\n\n        for (var iColumn = 0; iColumn < data.rows[iRow][2].length; iColumn++) {\n          if (iColumn > 0) {\n            rowTemplate.columns.push({ value: data.rows[iRow][2][iColumn] });\n          }\n        }\n\n        newDataRows.push(rowTemplate);\n      }\n\n      var gridTmp = $.tmpl(tempGrid, {\n        datasource: newDataRows,\n        columns: columns,\n        tooltipUnassociated: bizagi.localization.getResource(\"render-stakeholder-link-tooltip-unassociate\") });\n\n\n      $(\".ui-bizagi-render-stakeholder-items-grid-content\", control).empty().append(gridTmp);\n\n      var tempPagination = self.renderFactory.getTemplate(\"stakeholder-paginator\");\n\n      //Keep in track the total Records\n      self.totalRecords = data.records;\n      //keep in track the total pages\n      self.totalPages = data.total;\n      var pageToshow = self.maxPageToShow > self.totalPages ? self.totalPages : self.maxPageToShow;\n      var pagerData = {};\n\n      // show or hide \"load more\" button\n      pagerData.pagination = self.totalPages > 1;\n      pagerData.page = data.page;\n      pagerData.pages = {};\n\n      for (var i = 1; i <= pageToshow; i++) {\n        pagerData[\"pages\"][i] = {\n          \"pageNumber\": i };\n\n      }\n\n      //load and append the paginator to the result table\n      paginationHtml = $.tmpl(tempPagination, pagerData).html();\n      $(\".ui-bizagi-render-stakeholder-paginator\", control).empty().append(paginationHtml);\n\n      var $pager = $(\".ui-bizagi-render-stakeholder-paginator ul\", control);\n\n      $pager.bizagiPagination({\n        maxElemShow: self.maxPageToShow,\n        totalPages: self.totalPages,\n        actualPage: self.currentPage,\n        listElement: $pager,\n        clickCallBack: function clickCallBack(options) {\n          self.gridDataService(options.page);\n        } });\n\n\n      self.setRowsEvents();\n\n\n    } else\n    {//hay datos en data.rows//No\n      $(\".ui-bizagi-render-stakeholder-items-grid-content\", control).empty();\n      $(\".ui-bizagi-render-stakeholder-paginator\", control).empty();\n    }\n\n  },\n\n\n  /**\r\n      *\r\n      * @param e\r\n      */\n  onGetDataFail: function onGetDataFail(e) {\n    console.log(\"process property value error: \" + e);\n  },\n\n  /**\r\n      *\r\n      */\n  setRowsEvents: function setRowsEvents() {\n    var self = this;\n    $(\".ui-bizagi-render-stakeholder-table-link\").click($.proxy(self.onLinkClick, self));\n  },\n\n  /**\r\n      *\r\n      * @param e\r\n      */\n  onLinkClick: function onLinkClick(e) {\n    var self = this;\n    var idUser;\n    var idEntity = $(e.currentTarget).attr(\"data-value\");\n\n\n    function executeLinkClickIfProceed(event) {\n      if ($(event.currentTarget).hasClass(\"ui-bizagi-render-stakeholder-table-link-close\")) {\n        $(\".ui-bizagi-render-stakeholder-table-link\").removeClass(\"ui-bizagi-render-stakeholder-table-link-close\");\n        idUser = \"null\";\n      } else\n      {\n        $(\".ui-bizagi-render-stakeholder-table-link\").removeClass(\"ui-bizagi-render-stakeholder-table-link-close\");\n        $(event.currentTarget).addClass(\"ui-bizagi-render-stakeholder-table-link-close\");\n        idUser = self.properties.idUser;\n      }\n\n      self.selectedItems[self.valueXpath] = { \"id\": idEntity, \"idUser\": idUser };\n\n      //if idUser is null, remove associated Stakeholder\n      self.associatedUser(idEntity, self.guidEntity, idUser).done(function () {\n        self.refreshStakeholderValue();\n\n        //if only target contents ui-bizagi-render-stakeholder-table-stakeholder-associated-other-user\n        //set association stakeholder to user\n        if ($(event.currentTarget).hasClass(\"ui-bizagi-render-stakeholder-table-stakeholder-associated-other-user\")) {\n          $(\".ui-bizagi-render-stakeholder-table-link\").removeClass(\"ui-bizagi-render-stakeholder-table-stakeholder-associated-other-user\");\n          $(event.currentTarget).addClass(\"ui-bizagi-render-stakeholder-table-link-close\");\n          idUser = self.properties.idUser;\n          self.associatedUser(idEntity, self.guidEntity, idUser).done(function () {\n            self.refreshStakeholderValue();\n          }).fail(function (e) {\n            self.onStakeAssociatedFail(e);\n          });\n        }\n\n      }).fail(function (e) {\n        self.onStakeAssociatedFail(e);\n      });\n    }\n\n    //Confirm to delete stakeholder association with another user.\n    if ($(e.currentTarget).hasClass(\"ui-bizagi-render-stakeholder-table-link-close\") && $(e.currentTarget).hasClass(\"ui-bizagi-render-stakeholder-table-stakeholder-associated-other-user\")) {\n      var confirmationMsg = bizagi.localization.getResource(\"render-stakeholder-delete-associate-instance-other-user-confirm-msg\");\n      $.when(bizagi.showConfirmationBox(confirmationMsg, \"Bizagi\", \"warning\")).\n      done(function () {\n        executeLinkClickIfProceed(e);\n      });\n    } else\n    {\n      executeLinkClickIfProceed(e);\n    }\n  },\n\n  /**\r\n      *\r\n      * @param e\r\n      */\n  removeAssociated: function removeAssociated(e) {\n    var self = this;\n\n    var idEntity = $(e.currentTarget).attr(\"data-value\");\n    self.guidEntity = $(e.currentTarget).attr(\"guid-entity\");\n    var state = \"null\";\n    self.selectedItems[self.valueXpath] = { \"id\": idEntity, \"idUser\": state };\n\n    self.associatedUser(idEntity, self.guidEntity, state).done(function () {\n      self.refreshStakeholderValue();\n    }).fail(function (e) {\n      self.onStakeAssociatedFail(e);\n    });\n  },\n\n  /**\r\n      *\r\n      * @param e\r\n      */\n  onKeyUpFilter: function onKeyUpFilter(e) {\n    var self = this;\n    if (e.keyCode == 13)\n    {\n      var filter = $(e.target).val();\n      self.gridDataService(null, filter);\n    }\n\n  },\n\n  /**\r\n      *\r\n      */\n  refreshStakeholderValue: function refreshStakeholderValue() {\n    var self = this;\n    var control = self.getControl();\n\n    self.refreshStakeholderList().done(function (data) {\n      //Update Stakeholder List\n      self.setValue(data);\n      control.empty().append(self.renderControl());\n      self.configureHandlers();\n    }).fail(function (e) {\n      self.onStakeAssociatedFail(e);\n    });\n  },\n\n  /**\r\n      *\r\n      * @param e\r\n      */\n  onStakeAssociatedFail: function onStakeAssociatedFail(e) {\n    console.log(\"stakeholder associated error: \" + e);\n  },\n\n  /**\r\n      * Override display value\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n\n    // Set internal value\n    self.setValue(value);\n  },\n\n  /**\r\n      *   Sets the internal value\r\n      */\n  setValue: function setValue(value) {\n    var self = this;\n\n    // Set previous value\n    self.properties.previousValue = self.properties.originalValue = JSON.stringify({ \"value\": self.value });\n\n    // Change internal value\n    self.value = self.properties.value = JSON.stringify({ \"value\": value });\n  } });","/*\r\n *   Name: Bizagi Render userPassword class\r\n *   Author: Paola Herrera\r\n *   Comments:\r\n *   -   This script will define basic stuff for userPassword renders\r\n */\n\n// Extends from render Desktop base\nbizagi.rendering.desktop.render.extend(\"bizagi.rendering.desktop.userPassword\", bizagi.rendering.userPassword.prototype);\n// Extends itself\nbizagi.rendering.desktop.userPassword.extend(\"bizagi.rendering.desktop.userPassword\", {}, {\n  /*\r\n                                                                                            * Template method to implement in each device to customize each render after processed\r\n                                                                                            */\n  postRender: function postRender() {\n    var self = this;\n    var control = self.getControl();\n    // Call base\n    this._super();\n\n    self.input = control.find(\"input#bz-render-userPassword-inputPassword\");\n\n    // Define max length of element\n    if (self.properties.maxLength > 0) {\n      self.input.attr(\"maxlength\", self.properties.maxLength);\n    }\n  },\n\n  /*\r\n     * Template method to implement in each device to customize the render's behaviour to add handlers\r\n     */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    var control = self.getControl();\n\n    // Attach change event\n    self.input.bind(\"change\", function () {\n\n      var inputValue = self.input.val();\n\n      if (inputValue !== \"\") {\n        // Updates internal value\n        self.saveValue(inputValue);\n      } else {\n        self.setValue(inputValue);\n      }\n\n    }).keypress(function (e) {\n      e = window.event || e;\n      var keyUnicode = e.charCode || e.keyCode;\n      if (e !== undefined) {\n        if (keyUnicode == 13) {\n          $(this).trigger(\"change\");\n        }\n      }\n    });\n  },\n\n  saveValue: function saveValue(inputValue) {\n    var self = this;\n\n    var C = CryptoJS;\n    var userFormsSpanner = C.enc.Utf8.parse('pc30n84e15lvdD68');\n    var userFormsCode = CryptoJS.enc.Latin1.parse('1v00628X62bJE2mi');\n\n    var aes = C.algo.AES.createEncryptor(userFormsSpanner, {\n      mode: C.mode.CBC,\n      padding: C.pad.Pkcs7,\n      iv: userFormsCode });\n\n\n    var resultMain = aes.finalize(inputValue);\n    var resultMainFinal = C.enc.Base64.stringify(resultMain);\n\n    self.setValue(resultMainFinal);\n  },\n\n  /*\r\n     *   Template method to implement in each device to customize each render after processed in read-only mode\r\n     */\n  postRenderReadOnly: function postRenderReadOnly() {\n    var self = this;\n    var control = self.getControl();\n\n    var tempHTML = \"<label class='readonly-control'></label>\";\n    var spanTmp = $.tmpl(tempHTML, {});\n\n    control.append(spanTmp);\n  } });","/*\r\n*   Name: Bizagi Desktop grid Actions Extension\r\n*    Author: Cristian Olaya\r\n*           Ivn Ricardo Taimal\r\n*\r\n*/\n\n// Extends itself\nbizagi.rendering.render.extend(\"bizagi.rendering.desktop.gridActions\", {}, {\n\n  renderControl: function renderControl() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"gridActions\");\n    var hasActions = self.grid && self.grid.hasActions() || false;\n\n    // Render template\n    var html = $.fasttmpl(template, { hasActions: hasActions });\n    return html;\n  } });","/*\r\n *   Name: Bizagi Rendering Desktop numberScientificNotation\r\n *   Author: Laura Ariza\r\n *   Comments:\r\n *   -   This script define a render control that support scientific notation format\r\n */\n\n// Extends from render desktop base\nbizagi.rendering.desktop.render.extend(\"bizagi.rendering.desktop.numberScientificNotation\", bizagi.rendering.numberScientificNotation.prototype);\n// Extends itself\nbizagi.rendering.desktop.numberScientificNotation.extend(\"bizagi.rendering.desktop.numberScientificNotation\", {}, {\n\n  /*\r\n                                                                                                                    * Template method to implement in each device to customize each render after processed\r\n                                                                                                                    */\n  postRender: function postRender() {\n    var self = this;\n\n    self._super();\n\n    // Attach Format Currency Plugin to format the input\n    self.attachFormatScientificNotation();\n  },\n\n\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n\n    value = bizagi.util.scientificNotationFormat(value.replace(self.properties.decimalSymbol, '.'));\n    // Set value in input\n    if (value != null && self.properties.editable) {\n      self.numericInput.val(value.replace('.', self.properties.decimalSymbol));\n      self.setValue(value);\n\n    }\n    // Call base\n    this._super(value.replace('.', self.properties.decimalSymbol));\n  },\n\n  attachFormatScientificNotation: function attachFormatScientificNotation() {\n    var self = this;\n\n    // Attach events\n    self.numericInput.blur(function () {\n      var inputValue = self.numericInput.val();\n      var scientificNotationNumber =\n      bizagi.util.scientificNotationFormat(inputValue, self.properties.decimalSymbol);\n      // Updates internal value\n      self.setValue(scientificNotationNumber);\n      self.numericInput.val(scientificNotationNumber);\n    });\n  } });","/**\r\n * Base definition of Action Launcher and Entity template controls\r\n *\r\n * @author: Edward Morales\r\n */\n$.Class.extend(\"bizagi.rendering.actionLauncher\", {}, {\n\n  /*\r\n                                                         * Initialize the control with data provided\r\n                                                         */\n  initializeData: function initializeData(data) {\n    var self = this;\n    // Call base\n    this._super(data);\n    var form = self.getFormContainer();\n    this.typeForm = form.properties.typeForm || \"\";\n    var mode = self.getMode();\n    var properties = self.properties;\n\n    self.deferredActions = new $.Deferred();\n    self.deferredActions.promise();\n\n    if (mode == \"execution\") {\n      self.engine = new bizagi.templateEngine({\n        renderFactory: self.renderFactory,\n        cache: true,\n        autoGenerateData: false,\n        templateGuid: properties.selecttemplate });\n\n    }\n\n    // Data of get process property value\n    self.processPropertyValueArgs = {\n      \"pcaseId\": self.getIdCase(),\n      \"pguidEntity\": self.properties.guidEntity,\n      \"idRender\": self.properties.id,\n      \"xpathContext\": form.properties.xpathContext,\n      \"idPageCache\": form.properties.idPageCache,\n      \"property\": \"data\",\n      \"psurrogatedKey\": self.properties.surrogatedKey,\n      \"ptags\": self.properties.tagslist || [],\n      \"pmaxitems\": self.properties.maxItems,\n      \"pactionXpath\": self.properties.xpathActions };\n\n\n    self.processPropertyValueDataTmplArgs = {\n      \"pactionXpath\": self.properties.xpathActions,\n      \"idRender\": self.properties.id,\n      \"xpathContext\": form.properties.xpathContext,\n      \"idPageCache\": form.properties.idPageCache,\n      \"ptemplateGuid\": properties.selecttemplate,\n      \"property\": \"dataTemplate\",\n      \"xpathActions\": self.properties.xpathActions };\n\n\n    self.properties.valueWidth = 100;\n    self.properties.displayType = \"value\";\n    var defaultAllowActions = data.properties.type === \"entityTemplate\" ? false : true;\n    self.properties.allowactions = typeof data.properties.allowactions == \"undefined\" ?\n    defaultAllowActions : data.properties.allowactions;\n    self.properties.isHorizontal = typeof data.properties.isHorizontal == \"undefined\" ?\n    true : data.properties.isHorizontal;\n    self.properties.allowSearch = typeof data.properties.allowSearch == \"undefined\" ?\n    false : data.properties.allowSearch;\n    self.properties.selecttemplate = typeof data.properties.selecttemplate == \"undefined\" ?\n    \"\" : data.properties.selecttemplate;\n    self.properties.templatetype = typeof properties.templatetype != \"undefined\" ?\n    properties.templatetype : 'none';\n\n    self.properties.sessionId = form.params.data.sessionId;\n\n    if (!self.properties.value) {\n      self.properties.value = self.value = [];\n      self.properties.originalValue = [];\n    } else if (typeof self.properties.value == \"string\") {\n      self.properties.value = self.value = JSON.parse(self.properties.value);\n    }\n  },\n\n  /**\r\n      * Send processpropertyvalue in order to execute an Action\r\n      * This method is used when this control stay in Summary form or Global form\r\n      * @param action\r\n      */\n  executeActionImmediately: function executeActionImmediately(action) {\n    var self = this;\n    //Execute action immediately\n    var form = self.getFormContainer();\n\n    var processPropertyValueExecuteAction = {\n      \"idRender\": self.properties.id,\n      \"xpathContext\": form.properties.xpathContext,\n      \"idPageCache\": form.properties.idPageCache,\n      \"property\": \"executeAction\",\n      \"psurrogatedKey\": self.properties.surrogatedKey,\n      \"pguidAction\": action.guidAction,\n      \"pparameters\": JSON.encode({\n        \"idStartScope\": action.idStartScope,\n        \"pactionXpath\": self.properties.xpathActions,\n        \"idPageCache\": action.idPageCache }) };\n\n\n\n    self.dataService.executeActions(processPropertyValueExecuteAction).done(function (data) {\n      self.notifyExecution(data, action);\n    }).fail(function (error) {\n      // TODO: Create generic mechanism to send notifications\n      self.notifyExecution(\"Error\", action);\n    });\n  },\n\n  /**\r\n      * notify action execution status\r\n      * @param response\r\n      * @param actionName\r\n      */\n  notifyExecution: function notifyExecution(response, actionName) {\n    // To override in each device\n  },\n\n  /**\r\n      * Render control in read only mode: properties.editable = false\r\n      * @return {*}\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    return this.renderControl();\n  },\n\n  /**\r\n      * Make a postrender of readonly control\r\n      */\n  postRenderReadOnly: function postRenderReadOnly() {\n    this.properties.readOnly = true;\n    this.postRender();\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @return {string}\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var properties = self.properties;\n    var mode = self.getMode();\n    var template;\n    var html = \"\";\n\n    // Render template\n    if (mode == \"design\") {\n      template = self.renderFactory.getTemplate(\"render-actionLauncher-design\");\n      var params = {\n        type: properties.type,\n        isHorizontal: properties.isHorizontal,\n        allowSearch: properties.allowSearch,\n        templateDefined: properties.templatetype != 'none',\n        allowactions: properties.allowactions };\n\n      html = $.fasttmpl(template, params);\n    } else if (properties.surrogatedKey) {\n      template = self.renderFactory.getTemplate(\"render-actionLauncher\");\n      html = $.fasttmpl(template, { allowactions: self.properties.allowactions });\n    }\n    return html;\n  },\n\n\n  /**\r\n      * Public method to determine if a value is valid or not\r\n      * @param invalidElements\r\n      * @return {*}\r\n      */\n  isValid: function isValid(invalidElements) {\n    var self = this,\n    properties = self.properties;\n    var value = self.getValue();\n    var bValid = false;\n\n    // Don't check non-editable renders\n    if (bizagi.util.parseBoolean(properties.visible) == false) {\n      return true;\n    }\n    // Don't check non-editable renders\n    if (bizagi.util.parseBoolean(properties.editable) == false) {\n      return true;\n    }\n\n    // Check required\n    if (properties.required) {\n      if (self.value) {\n        if (self.value.length > 0)\n        return true;\n        message = self.getResource(\"render-required-register-action\");\n        invalidElements.push({ xpath: properties.xpath, message: message });\n        return false;\n      }\n    }\n\n    return bValid;\n  },\n\n  /**\r\n      * Sets the value in the rendered control\r\n      * @param value\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n    var control = self.getControl();\n    // TODO: write functionality\n    // Set internal value\n    self.setValue(value, false);\n  },\n\n  /**\r\n      * Process an action\r\n      * @param action\r\n      */\n  actionManager: function actionManager(action) {\n    var self = this;\n    var guidProcess = action.guidProcess || \"\";\n    var def = new $.Deferred();\n\n    action.recordXpath = self.getFormContainer().properties.recordXpath;\n\n    /**\r\n                                                                          * Check if action is a process\r\n                                                                          */\n    switch (action.actionType) {\n      case \"Process\":\n        // Verify if case has startform\n        var params = {\n          guidWFClass: guidProcess };\n\n\n        $.when(self.dataService.hasStartForm(params)).done(function (result) {\n          if (result.hasStartForm) {\n            // Open a dialog with startform and wait for Scope\n            $.when(self.processStartForm({\n              guidprocess: guidProcess,\n              title: action.displayName,\n              recordXpath: action.recordXpath })).\n            done(function (idStartScope) {\n              action.idStartScope = idStartScope;\n              def.resolve(action);\n            });\n          } else {\n            // Just add action to queue to be executed on nextEvent\n            def.resolve(action);\n          }\n        });\n\n        break;\n      case \"Rule\":\n        // Just add action to queue to be executed on nextEvent\n        def.resolve(action);\n        break;\n      case \"Form\":\n        // If it has additional xpath this action is a form of collection\n        if (action.xpathContext) {\n          $.when(self.processActionFormCollection(action)).done(function (idStartScope) {\n            action.idStartScope = idStartScope;\n            def.resolve(action);\n          });\n        } else {\n\n          if (action.actionType === \"Form\") {\n            action.xpathContext = undefined;\n            action.contextType = \"entitytemplate\";\n            action.guidEntity = action.guidEntity || self.properties.guidEntity;\n          }\n\n          $.when(self.processActionForm(action)).done(function (idStartScope) {\n            action.idStartScope = idStartScope;\n            def.resolve(action);\n          });\n        }\n        break;}\n\n\n    return def.promise();\n  },\n\n  /**\r\n      * Add actions within value object\r\n      * @param action\r\n      */\n  addActionToQueue: function addActionToQueue(action) {\n    var self = this;\n    var actionsList = self.getValue();\n    var formParams = self.getFormContainer().getParams();\n\n    action.params = action.params || {};\n\n    var recordXpath = self.properties.xpathContext;\n\n    switch (action.actionType) {\n      case \"Process\":\n        action.params = {\n          idStartScope: action.idStartScope,\n          additionalXpaths: self.properties.additionalXpath.join(\",\"),\n          idParentWorkitem: formParams.idWorkitem || bizagi.context.idWorkItem,\n          recordXpath: recordXpath };\n\n        break;\n      case \"Form\":\n        action.params = {\n          idStartScope: action.idStartScope,\n          additionalXpaths: self.properties.additionalXpath.join(\",\"),\n          entityXpath: self.properties.xpathActions,\n          idParentWorkitem: formParams.idWorkitem || bizagi.context.idWorkItem,\n          idEntity: action.idEntity };\n\n        break;\n      case \"Rule\":\n        action.params = {\n          xpathActions: action.xpathActions || \"\",\n          recordXpath: recordXpath };\n\n        break;}\n\n\n    var newValueActionsList = bizagi.clone(actionsList);\n    newValueActionsList.push(action);\n    self.setValue(newValueActionsList);\n    self.setDisplayValue(newValueActionsList);\n  },\n\n  /**\r\n      * Remove action within value object\r\n      * @param index\r\n      */\n  removeActionToQueue: function removeActionToQueue(index) {\n    var self = this;\n    var newValueActionsList = bizagi.clone(self.getValue());\n    newValueActionsList.splice(index, 1);\n    self.setValue(newValueActionsList);\n    self.setDisplayValue(newValueActionsList);\n  },\n  /**\r\n      * Add the render data to the given collection in order to send data to the server\r\n      * @param renderValues\r\n      */\n  collectData: function collectData(renderValues) {\n    var self = this;\n    if (self.controlValueIsChanged()) {\n      var properties = self.properties;\n      var xpath = properties.xpath;\n      var controlValue = self.getValue();\n      var actions = [];\n      $.each(controlValue, function (index, value) {\n        var action = {};\n        action.params = value.params || {};\n        action.guidAction = value.guidAction;\n\n        actions.push(action);\n      });\n      renderValues[xpath] = actions.length == 0 ? \"\" : JSON.encode(actions);\n    }\n  },\n\n  /**\r\n      * Util to count how many actions are there\r\n      * @param action\r\n      * @return {number}\r\n      */\n  countSameActions: function countSameActions(action) {\n    var self = this;\n    var value = self.getValue();\n    var count = 0;\n    $.each(value, function (key, value) {\n      if (value.guidAction == action.guidAction) {\n        count++;\n      }\n    });\n    return count;\n  },\n\n  /**\r\n     * Normalize action launcher control properties\r\n     * @param actionsLaucher\r\n     * @returns {*}\r\n     */\n  getPropertiesActionLaucher: function getPropertiesActionLaucher(actionsLaucher) {\n    var self = this;\n    var form = self.getFormContainer();\n    /**\r\n                                         * The properties of actionLaucher have to 7 properties mandatory\r\n                                         * 0: guidProcess\r\n                                         * 1: displayName\r\n                                         * 2: title\r\n                                         * 3: actionType\r\n                                         * 4: guidaction\r\n                                         * 5: xpathContext\r\n                                         * 6: readOnlyForm: default: false\r\n                                         */\n    for (var i = 0, length = actionsLaucher.length, j = length; i < j; i += 1) {\n      //some ocassions server return 6 or 7 items\n      //return 6 properties when launch form action from action launcher control.\n      //in this case dont return xpathContext.\n      // So, add item position 5, simulate xpathContext empty.\n      if (actionsLaucher[i].length === 6) {\n        actionsLaucher[i].splice(5, 0, \"\");\n\n        if (actionsLaucher[i][3] == \"Process\" && form.properties.xpathContext) {\n          actionsLaucher[i][5] = form.properties.xpathContext;\n        }\n      }\n    }\n\n    return actionsLaucher;\n  } });","/**\r\n * Base definition of a range control\r\n *\r\n * @author: Andres Fernando Munoz\r\n */\n\n$.Class.extend(\"bizagi.rendering.range\", {}, {\n  /*\r\n                                                * Constructor\r\n                                                */\n  init: function init(params) {\n    // Call base\n    this._super(params);\n  },\n\n  /*\r\n      * Initialize the control with data provided\r\n      */\n  initializeData: function initializeData(data) {\n    var self = this;\n    // Call base\n    this._super(data);\n  },\n\n\n  /*\r\n      * Template method to implement in each children to customize each control\r\n      */\n  renderControl: function renderControl() {\n    var self = this,\n    properties = self.properties;\n    var template;\n    var html = \"\";\n    // Render template\n    template = self.renderFactory.getTemplate(\"render-range\");\n    html = $.fasttmpl(template, {});\n    return html;\n  },\n  /**\r\n      * Sets the range controls in DOM\r\n      * @param minControl: min range control\r\n      * @param maxControl: max range control\r\n      */\n  setRanageControls: function setRanageControls(minControl, maxControl) {\n    var self = this;\n    self.minControl = minControl || null;\n    self.maxControl = maxControl || null;\n    var control = self.getControl();\n\n    var $maxCanvas = $(\".bz-range-maximum\", control);\n    var $minCanvas = $(\".bz-range-minimum\", control);\n\n    //var $maxCanvas = $('<div>hola</div>');\n    //var $minCanvas = $('<div>hola</div>');\n\n    self.renderRangeControl($minCanvas, minControl);\n    self.renderRangeControl($maxCanvas, maxControl);\n  },\n\n  /*\r\n      *   Returns the internal value\r\n      */\n  getValue: function getValue() {\n    var self = this;\n    var minValue = self.minControl.getValue();\n    var maxValue = self.maxControl.getValue();\n\n    var value = {\n      min: minValue,\n      max: maxValue };\n\n    return value;\n  },\n\n  renderRangeControl: function renderRangeControl($canvas, control) {\n    $.when(control.render(\"render\")).done(function (html) {\n      $canvas.empty().append(html);\n      control.postRenderElement($canvas);\n    });\n  } });","/**\r\n * Base definition of a range date control\r\n *\r\n * @author: Andres Fernando Munoz\r\n */\n\n$.Class.extend(\"bizagi.rendering.rangeDate\", {}, {\n\n  /**\r\n                                                    * Defines de min date an de max date to the range control\r\n                                                    */\n  defineRangeControl: function defineRangeControl(params) {\n    var self = this;\n\n    var dateMin = bizagi.rendering.date.extend({\n      suscribe: function suscribe(control) {\n        this.observer = this.observer || [];\n        this.observer.push(control);\n      },\n\n      notify: function notify(value) {\n        for (var i = this.observer.length - 1; i >= 0; i--) {\n          this.observer[i].changeMinValue(value);\n        }\n      },\n\n      setValue: function setValue(value) {\n        value = value || \"\";\n        this._super(value);\n        this.notify(value);\n      } });\n\n\n    var dateMax = bizagi.rendering.date.extend({\n      suscribe: function suscribe(control) {\n        this.observer = this.observer || [];\n        this.observer.push(control);\n      },\n\n      notify: function notify(value) {\n        for (var i = this.observer.length - 1; i >= 0; i--) {\n          this.observer[i].changeMaxValue(value);\n        }\n      },\n\n      setValue: function setValue(value) {\n        value = value || \"\";\n        this._super(value);\n        this.notify(value);\n      } });\n\n\n\n    var minControl = new dateMin(self.getRenderProperties(\"min\"));\n    var maxControl = new dateMax(self.getRenderProperties(\"max\"));\n\n    minControl.suscribe(maxControl);\n    maxControl.suscribe(minControl);\n\n\n    self.setRanageControls(minControl, maxControl);\n  },\n\n  getRenderProperties: function getRenderProperties(typeRangeControl) {\n    var self = this;\n    var form = self.getFormContainer();\n    var properties = self.properties;\n\n    var renderProperties = {\n      data: {\n        properties: {\n          \"id\": properties.id,\n          \"xpath\": properties.xpath + \"_\" + typeRangeControl,\n          \"displayType\": \"value\" } },\n\n\n      mode: \"execute\",\n      parent: form,\n      renderFactory: self.renderFactory,\n      resources: bizagi.localization,\n      dataService: self.dataService };\n\n\n    if (typeRangeControl === \"min\") {\n      renderProperties.data.properties.displayName = \"From\";\n    } else {\n      renderProperties.data.properties.displayName = \"To\";\n    }\n\n    return renderProperties;\n  } });","/**\r\n * Base definition of a range money control\r\n *\r\n * @author: Andres Fernando Munoz\r\n */\n\n$.Class.extend(\"bizagi.rendering.rangeMoney\", {}, {\n\n  /**\r\n                                                     * Defines de min money an de max money to the range control\r\n                                                     */\n  defineRangeControl: function defineRangeControl() {\n    var self = this;\n\n    var moneyMin = bizagi.rendering.money.extend({\n      suscribe: function suscribe(control) {\n        this.observer = this.observer || [];\n        this.observer.push(control);\n      },\n\n      notify: function notify(value) {\n        for (var i = this.observer.length - 1; i >= 0; i--) {\n          this.observer[i].changeMinValue(value);\n        }\n      },\n\n      setValue: function setValue(value) {\n        value = value || \"\";\n        this._super(value);\n        this.notify(value);\n      } });\n\n\n    var moneyMax = bizagi.rendering.money.extend({\n      suscribe: function suscribe(control) {\n        this.observer = this.observer || [];\n        this.observer.push(control);\n      },\n\n      notify: function notify(value) {\n        for (var i = this.observer.length - 1; i >= 0; i--) {\n          this.observer[i].changeMaxValue(value);\n        }\n      },\n\n      setValue: function setValue(value) {\n        value = value || \"\";\n        this._super(value);\n        this.notify(value);\n      } });\n\n\n    var minControl = new moneyMin(self.getRenderProperties(\"min\"));\n    var maxControl = new moneyMax(self.getRenderProperties(\"max\"));\n\n    minControl.suscribe(maxControl);\n    maxControl.suscribe(minControl);\n\n    self.setRanageControls(minControl, maxControl);\n  },\n\n\n  getRenderProperties: function getRenderProperties(typeRangeControl) {\n    var self = this;\n    var form = self.getFormContainer();\n    var properties = self.properties;\n\n    var renderProperties = {\n      data: {\n        properties: {\n          \"id\": properties.id,\n          \"xpath\": properties.xpath + \"_\" + typeRangeControl,\n          \"displayType\": \"value\" } },\n\n\n      mode: \"execute\",\n      parent: form,\n      renderFactory: self.renderFactory,\n      resources: bizagi.localization,\n      dataService: self.dataService };\n\n    return renderProperties;\n  } });","/**\r\n * Base definition of a range number control\r\n *\r\n * @author: Andres Fernando Munoz\r\n */\n\n$.Class.extend(\"bizagi.rendering.rangeNumber\", {}, {\n\n  /**\r\n                                                     * Defines de min number an de max number to the range control\r\n                                                     */\n  defineRangeControl: function defineRangeControl() {\n    var self = this;\n\n    var numberMin = bizagi.rendering.number.extend({\n      suscribe: function suscribe(control) {\n        this.observer = this.observer || [];\n        this.observer.push(control);\n      },\n\n      notify: function notify(value) {\n        for (var i = this.observer.length - 1; i >= 0; i--) {\n          this.observer[i].changeMinValue(value);\n        }\n      },\n\n      setValue: function setValue(value) {\n        value = value || \"\";\n        this._super(value);\n        this.notify(value);\n      } });\n\n\n    var numberMax = bizagi.rendering.number.extend({\n      suscribe: function suscribe(control) {\n        this.observer = this.observer || [];\n        this.observer.push(control);\n      },\n\n      notify: function notify(value) {\n        for (var i = this.observer.length - 1; i >= 0; i--) {\n          this.observer[i].changeMaxValue(value);\n        }\n      },\n\n      setValue: function setValue(value) {\n        value = value || \"\";\n        this._super(value);\n        this.notify(value);\n      } });\n\n\n    var minControl = new numberMin(self.getRenderProperties(\"min\"));\n    var maxControl = new numberMax(self.getRenderProperties(\"max\"));\n\n    minControl.suscribe(maxControl);\n    maxControl.suscribe(minControl);\n\n    self.setRanageControls(minControl, maxControl);\n  },\n\n\n  getRenderProperties: function getRenderProperties(typeRangeControl) {\n    var self = this;\n    var form = self.getFormContainer();\n    var properties = self.properties;\n\n    var renderProperties = {\n      data: {\n        properties: {\n          \"id\": properties.id,\n          \"xpath\": properties.xpath + \"_\" + typeRangeControl,\n          \"displayType\": \"value\" } },\n\n\n      mode: \"execute\",\n      parent: form,\n      renderFactory: self.renderFactory,\n      resources: bizagi.localization,\n      dataService: self.dataService };\n\n\n    return renderProperties;\n  } });","/**\r\n * Desktop definition of Action Launcher\r\n *\r\n * @author: Edward Morales\r\n */\n\n// Extends from render Desktop base\nbizagi.rendering.desktop.render.extend(\"bizagi.rendering.desktop.actionLauncher\", bizagi.rendering.actionLauncher.prototype);\n// Extends itself\nbizagi.rendering.desktop.actionLauncher.extend(\"bizagi.rendering.desktop.actionLauncher\", {}, {\n  /**\r\n                                                                                                 * Render a specific implementation for Desktop device\r\n                                                                                                 */\n  postRender: function postRender() {\n    var self = this;\n    var properties = self.properties;\n    var mode = self.getMode();\n    var html, template;\n    var data = {};\n    var def = new $.Deferred();\n\n    if (mode == \"design\" || !self.properties.surrogatedKey) {\n      return \"\";\n    }\n\n    self.configureQueueVisibility();\n\n    function appendContent(template, templateArguments) {\n      var control = self.getControl();\n      var actionsContainer = $(\".bz-action-launcher-actions-container\", control);\n      html = $.fasttmpl(template, templateArguments);\n      actionsContainer.append(html);\n\n      if (templateArguments.template) {\n        actionsContainer.\n        find('.actions-container.actions-container-template').\n        append(templateArguments.template);\n      }\n      self.configureHandlers();\n      def.resolve(actionsContainer);\n    }\n\n    /**\r\n       * Define params to get list of actions\r\n       */\n    $.when(self.dataService.multiaction().getActions(self.processPropertyValueArgs)).\n    pipe(function (actions) {\n      actions = self.getPropertiesActionLaucher(actions);\n      data.actions = actions;\n\n      return properties.templatetype != 'none' ? self.dataService.multiaction().getPropertyData(self.processPropertyValueDataTmplArgs) : null;\n    }).\n    done(function (templateData) {\n      var response = data.actions;\n      self.deferredActions.resolve(response);\n      self.totalActions = bizagi.clone(response);\n      var actions = bizagi.clone(response);\n      var templateArguments = {};\n\n      var moreActionsManager = self.moreActionsManager(actions);\n      var isMoreActions = moreActionsManager.isMoreActions;\n      actions = moreActionsManager.actions;\n      self.lessActions = bizagi.clone(actions);\n\n      if (properties.isHorizontal) {\n        if (properties.templatetype != 'none') {\n          $.when(self.engine.render($.extend(templateData, { isDefaultTemplate: properties.templatetype == 'default' }), self.processPropertyValueDataTmplArgs)).\n          done(function (template) {\n            templateArguments = {\n              actions: self.getPropertiesActionLaucher(actions),\n              template: template,\n              isMoreActions: isMoreActions,\n              moreActions: self.moreActions,\n              allowactions: properties.allowactions };\n\n            template = self.renderFactory.getTemplate(\"render-actionLauncher-horizontal\");\n            appendContent(template, templateArguments);\n          });\n        } else {\n          templateArguments = {\n            actions: self.getPropertiesActionLaucher(actions),\n            isMoreActions: isMoreActions,\n            template: false,\n            moreActions: self.moreActions,\n            allowactions: properties.allowactions };\n\n          template = self.renderFactory.getTemplate(\"render-actionLauncher-horizontal\");\n          appendContent(template, templateArguments);\n        }\n\n      } else {\n        var actionsVertical = isMoreActions ? self.lessActions : self.totalActions;\n        templateArguments = {\n          actions: self.getPropertiesActionLaucher(actionsVertical),\n          allowSearch: properties.allowSearch,\n          isMoreActions: isMoreActions,\n          isExpanded: false,\n          moreButtonTitle: self.getResource(\"render-action-launcher-more-actions\") };\n\n        template = self.renderFactory.getTemplate(\"render-actionLauncher-vertical\");\n        appendContent(template, templateArguments);\n      }\n    }).\n    fail(function (error) {\n      def.fail(error);\n    });\n\n    self.engine.subscribe('onLoadDataNavigation', function (ev, params) {\n      bizagi.loader.start(\"entity-engine-view\").then(function () {\n        $(document).triggerHandler(\"showDialogWidget\", {\n          widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_DIALOGNAV,\n          data: params,\n          modalParameters: {\n            title: params.data.displayName,\n            refreshInbox: false },\n\n          maximizeOnly: false });\n\n      });\n    });\n\n    return def.promise();\n  },\n\n  /**\r\n      * Check maxitems action and create sub list of actions\r\n      * in order to create contextual menu with them\r\n      * @param actions\r\n      * @return {{isMoreActions: boolean, actions: *}}\r\n      */\n  moreActionsManager: function moreActionsManager(actions) {\n    var self = this;\n    var properties = self.properties;\n    var isMoreActions = actions.length > properties.maxItems || false;\n    if (isMoreActions) {\n      var moreActionsTemp = actions.splice(0, properties.maxItems);\n      self.moreActions = bizagi.clone(actions);\n      actions = moreActionsTemp;\n    }\n\n    return { isMoreActions: isMoreActions, actions: actions };\n  },\n\n  /**\r\n      * Add binding to html elements\r\n      */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    var formContainer = self.getFormContainer();\n    if (typeof formContainer.params.printversion === \"undefined\" || formContainer.params.printversion == false) {\n      var control = self.getControl();\n      var actionLauncherControls = $(\".action-launcher-control\", control);\n      var moreVerticalButton = $(\".action-launcher-more-vertical\", control);\n      var properties = self.properties;\n\n      self.configureMoreActionsHandler();\n      /**\r\n                                           * Binding for a tooltip when max items is exceeded horizontal\r\n                                           */\n      moreVerticalButton.on(\"click\", function (event) {\n        var $button = $(this);\n        var isExpanded = false;\n        var moreButtonTitle = \"\";\n        var actionsVertical = {};\n        if ($button.hasClass(\"expanded\")) {\n          isExpanded = false;\n          actionsVertical = self.lessActions;\n          moreButtonTitle = self.getResource(\"render-action-launcher-more-actions\");\n        } else {\n          isExpanded = true;\n          actionsVertical = self.totalActions;\n          moreButtonTitle = self.getResource(\"render-action-launcher-less-actions\");\n        }\n\n        var templateArguments = {\n          actions: self.getPropertiesActionLaucher(actionsVertical),\n          allowSearch: properties.allowSearch,\n          isMoreActions: true,\n          isExpanded: isExpanded,\n          moreButtonTitle: moreButtonTitle };\n\n        var template = self.renderFactory.getTemplate(\"render-actionLauncher-vertical\");\n        appendContent(template, templateArguments);\n\n        function appendContent(template, templateArguments) {\n          var control = self.getControl();\n          var actionsContainer = $(\".bz-action-launcher-actions-container\", control);\n          actionsContainer.empty();\n          var html = $.fasttmpl(template, templateArguments);\n          actionsContainer.append(html);\n          self.configureHandlers();\n        }\n\n      });\n\n      /**\r\n           * Binding for click action on buttons\r\n           */\n      actionLauncherControls.on(\"click\", function () {\n        var action = {\n          guidProcess: $(this).data(\"guidprocess\"),\n          guidAction: $(this).data(\"guidaction\"),\n          displayName: $(this).data(\"display-name\"),\n          actionType: $(this).data(\"action-type\"),\n          xpathContext: $(this).data(\"xpathcontext\"),\n          readOnlyForm: $(this).data(\"readonlyform\") || false,\n          guidEntity: self.properties.guidEntity,\n          xpathActions: self.properties.xpathActions || \"\" };\n\n        self.onActionClicked(action);\n      });\n\n      /**\r\n           * Catch the typed text in the search field and filter the action list\r\n           */\n      $.expr[\":\"].FilterAction = function (entity, i, array) {\n        var search = array[3];\n        if (!search) {\n          return false;\n        }\n        return new RegExp(search, \"i\").test($(entity).text());\n      };\n      $(\"input#ui-bizagi-render-action-launcher-filter-input\", control).keyup(function () {\n        var search = $(this).val();\n        $(\".ui-bizagi-render-actionLauncher-vertical-item\", control).show(0);\n        if (!moreVerticalButton.hasClass(\"expanded\")) {\n          moreVerticalButton.trigger(\"click\");\n          $(\"input#ui-bizagi-render-action-launcher-filter-input\").val(search);\n          $(\"input#ui-bizagi-render-action-launcher-filter-input\").focus();\n        }\n        if (search) {\n          $(\".ui-bizagi-render-actionLauncher-vertical-item\", control).not(\":FilterAction(\" + search + \")\").hide(0);\n        }\n      });\n    }\n  },\n\n  configureMoreActionsHandler: function configureMoreActionsHandler() {\n    var self = this,\n    control = self.getControl();\n    var moreButton = $(\".action-launcher-more\", control);\n\n    bizagi.loader.startAndThen(\"kendo\").then(function () {\n      self.tooltip = moreButton.kendoTooltip({\n        autoHide: false,\n        content: function content(event) {\n          var tmpl = self.renderFactory.getTemplate(\"render-actionLauncher-horizontal-more\");\n          var html = $.fasttmpl(tmpl, { actions: self.getPropertiesActionLaucher(self.moreActions) });\n          return html;\n        },\n        show: function show() {\n          //add custom styles tooltip\n          $(\"div[role='tooltip']\").addClass(\"bizagi-custom-tooltip-more-actions\");\n          $(\".action-launcher-control-more\").off(\"click\").on(\"click\", function (event) {\n            var action = {\n              guidProcess: $(this).data(\"guidprocess\"),\n              guidAction: $(this).data(\"guidaction\"),\n              displayName: $(this).data(\"display-name\"),\n              actionType: $(this).data(\"action-type\"),\n              xpathContext: $(this).data(\"xpathcontext\"),\n              readOnlyForm: $(this).data(\"readonlyform\") || false,\n              xpathActions: self.properties.xpathActions || \"\" };\n\n            self.onActionClicked(action);\n            self.tooltip.hide();\n          });\n        },\n        width: 185 }).\n      data(\"kendoTooltip\");\n    });\n  },\n\n  onActionClicked: function onActionClicked(action) {\n    var self = this;\n    var control = self.getControl();\n    var properties = self.properties;\n    var multipleSelection = typeof properties.multipleSelection == \"undefined\" ? true : properties.multipleSelection;\n\n    if (multipleSelection) {\n      // If this is a form and has been queued, so open it\n      if (action.actionType == \"Form\" && self.countSameActions(action) >= 1 && !action.xpathContext) {\n        //Open action\n        $(\".action-to-execute-control[data-guidaction='\" + action.guidAction + \"'] label\", control).click();\n      } else {\n        $.when(self.actionManager(action)).done(function (act) {\n          self.executeAction(act);\n        });\n      }\n    } else\n    if (self.getValue().length > 0) {\n      self.showConfirmationDialog(action);\n    } else\n    {\n      $.when(self.actionManager(action)).done(function (act) {\n        self.executeAction(act);\n      });\n    }\n  },\n\n  notifyExecution: function notifyExecution(data, action) {\n    var self = this;\n    var notifications = new bizagi.INotifications();\n    if (data.response == \"success\") {\n      notifications.showSucessMessage(printf(self.getResource(\"render-action-launcher-success-excecution\"), action.displayName), null, {});\n    } else {\n      notifications.showErrorMessage(printf(self.getResource(\"render-action-launcher-failed-excecution\"), action.displayName), null, {});\n    }\n  },\n\n  processActionForm: function processActionForm(action) {\n    var self = this;\n    var properties = self.properties;\n    var form = self.getFormContainer();\n    var additionalXpaths = self.properties.additionalXpath.join(\",\");\n    var xpathContext = action.xpathContext ? self.properties.xpathActions + \".\" + action.xpathContext : self.properties.xpathActions;\n    var def = new $.Deferred();\n\n    // Show dialog with new form after that\n    var dialog = new bizagi.rendering.dialog.form(self.dataService, self.renderFactory, {\n      title: properties.detailLabel || bizagi.localization.getResource(\"render-grid-details-form\"),\n      showSaveButton: true,\n      cancelButtonLabel: bizagi.localization.getResource(\"render-form-dialog-box-close\"),\n      onSave: function onSave(data) {\n        // Submit the form\n        return self.dataService.multiaction().submitData({\n          action: \"SAVE\",\n          data: data,\n          xpathContext: dialog.form.properties.xpathContext, //self.properties.xpathContext,\n          idPageCache: dialog.form.properties.idPageCache,\n          isOfflineForm: false,\n          isActionStartForm: true }).\n        pipe(function (savedData) {\n          if (!action.editMode && self.countSameActions(action) == 0) {\n            action.idStartScope = savedData.IdScope;\n            //self.addActionToQueue(action);\n          }\n          def.resolve(savedData.IdScope);\n        });\n      },\n      onCancel: function onCancel(data) {\n\n      } });\n\n\n    var paramsRender = {\n      \"idForm\": action.guidProcess,\n      \"contextType\": \"start\",\n      \"idCase\": self.properties.caseId,\n      \"idWorkitem\": form.properties.typeForm != \"SummaryForm\" ? bizagi.context.idWorkitem : undefined,\n      \"additionalXpaths\": additionalXpaths,\n      \"xpathContext\": xpathContext,\n      \"idStartScope\": action.idStartScope,\n      \"surrogateKey\": self.properties.surrogatedKey,\n      \"readOnlyForm\": action.readOnlyForm,\n      \"recordXpath\": action.recordXpath };\n\n    if (action.actionType === \"Form\") {\n      paramsRender.contextType = \"entitytemplate\";\n      paramsRender.xpathContext = undefined;\n      paramsRender.guidEntity = action.guidEntity;\n      paramsRender.rewriteContextType = true;\n    }\n\n    dialog.render(paramsRender);\n\n    return def.promise();\n  },\n\n  processActionFormCollection: function processActionFormCollection(action) {\n    var self = this;\n    var properties = self.properties;\n    var form = self.getFormContainer();\n    var additionalXpaths = self.properties.additionalXpath.join(\",\");\n    var def = new $.Deferred();\n    var xpathContext = action.xpathContext ? self.properties.xpathActions + \".\" + action.xpathContext : self.properties.xpathActions;\n    var xpathPattern = \"%s[id=%s]\";\n    var xpathPatternWithoutkey = \"%s[]\";\n    var xpathContextWithKey = xpathContext != \"\" ? printf(xpathPattern, xpathContext, action.idEntity) : xpathContext;\n    var xpathContextWithoutKey = xpathContext != \"\" ? printf(xpathPatternWithoutkey, xpathContext) : xpathContext;\n\n    var dialog = new bizagi.rendering.dialog.form(self.dataService, self.renderFactory, {\n      title: properties.detailLabel || bizagi.localization.getResource(\"render-grid-details-form\"),\n      showSaveButton: true,\n      cancelButtonLabel: bizagi.localization.getResource(\"render-form-dialog-box-close\"),\n      onSave: function onSave(data) {\n        if (action.editMode) {\n          return self.dataService.multiaction().submitData({\n            action: \"SAVE\",\n            data: data,\n            xpathContext: xpathContextWithKey,\n            idPageCache: data.idPageCache,\n            isOfflineForm: false,\n            isActionStartForm: true }).\n          pipe(function (savedData) {\n            def.resolve(savedData.IdScope);\n          });\n        } else {\n          return self.dataService.addGridRecordData({\n            idRender: properties.id,\n            //xpath: properties.xpath,\n            xpathContext: xpathContext,\n            contexttype: \"start\",\n            idPageCache: data.idPageCache,\n            submitData: data }).\n          pipe(function (savedData) {\n            action.idStartScope = savedData.IdScope;\n            action.idEntity = savedData.IdEntity;\n            self.addActionToQueue(action);\n            def.resolve(savedData.IdScope);\n          });\n        }\n      },\n      onCancel: function onCancel(data) {\n\n      } });\n\n\n    dialog.render({\n      \"idForm\": action.guidProcess,\n      \"contextType\": \"start\",\n      \"idCase\": bizagi.context.idCase,\n      \"additionalXpaths\": additionalXpaths,\n      \"xpathContext\": action.editMode ? xpathContextWithKey : xpathContextWithoutKey,\n      \"idStartScope\": action.idStartScope,\n      \"surrogateKey\": self.properties.surrogatedKey,\n      \"readOnlyForm\": action.readOnlyForm,\n      \"recordXpath\": action.recordXpath });\n\n\n    return def.promise();\n  },\n\n  /**\r\n      * Process a start form\r\n      * @param args\r\n      * @return {*}\r\n      */\n  processStartForm: function processStartForm(args) {\n    var self = this;\n    var properties = self.properties;\n    var form = self.getFormContainer();\n    var def = new $.Deferred();\n    args = args || {};\n\n\n    var dialog = new bizagi.rendering.dialog.startForm(self.dataService, self.renderFactory, {\n      //showSaveButton: properties.editable,\n      maximized: properties.maximized,\n      title: args.title || \"\",\n      saveButtonLabel: self.typeForm == \"GlobalForm\" || this.typeForm == \"SummaryForm\" ? bizagi.localization.getResource(\"render-form-button-create\") : bizagi.localization.getResource(\"render-form-dialog-box-save\"),\n      onSave: function onSave(data) {\n        form.startLoading();\n\n        // Submit the form\n        return self.dataService.multiaction().submitData({\n          action: \"SAVE\",\n          data: data,\n          xpathContext: self.properties.xpathContext,\n          idPageCache: data.idPageCache,\n          isOfflineForm: false,\n          isActionStartForm: true }).\n        pipe(function (savedData) {\n          form.endLoading();\n          def.resolve(savedData.IdScope);\n        });\n      } });\n\n\n    dialog.render({\n      guidprocess: args.guidprocess,\n      idStartScope: args.idStartScope,\n      idCase: self.properties.caseId,\n      idWorkitem: form.properties.typeForm != \"SummaryForm\" ? bizagi.context.idWorkitem : undefined,\n      additionalXpaths: self.properties.additionalXpath.join(\",\"),\n      surrogatedKey: self.properties.surrogatedKey,\n      recordXpath: args.recordXpath,\n      mappingstakeholders: true });\n\n\n    return def.promise();\n  },\n\n  executeAction: function executeAction(action) {\n    var self = this;\n\n    if (self.typeForm === \"GlobalForm\" || self.typeForm === \"SummaryForm\") {\n      if (action.actionType !== \"Form\") {\n        $.when(bizagi.showConfirmationBox(bizagi.localization.getResource(\"render-action-launcher-immediatly-action-confirmation\"), null, false)).done(function (response) {\n          self.executeActionImmediately(action);\n        });\n      } else {// Remove the confirmation message by BA52657\n        self.setValue([]);\n      }\n    } else {\n      self.addActionToQueue(action);\n    }\n  },\n\n  /**\r\n      * Show confirmation dialog\r\n      * @param action\r\n      */\n  showConfirmationDialog: function showConfirmationDialog(action) {\n    var self = this;\n    self.confirmTemplate = self.renderFactory.getTemplate(\"render-actionLauncher-confirm\");\n    var message = bizagi.localization.getResource(\"render-action-launcher-single-action-confirmation\");\n    var confirmContent = $.tmpl(self.confirmTemplate, { confirmationMessage: message });\n    var confirmContentParams = {\n      resizable: false,\n      modal: true,\n      title: \"Bizagi\",\n      buttons: [] };\n\n    confirmContentParams.buttons = [\n    {\n      text: bizagi.localization.getResource(\"render-boolean-yes\"),\n      click: function click() {\n        self.setValue([]);\n        $.when(self.actionManager(action)).done(function (act) {\n          self.executeAction(act);\n        });\n        $(this).dialog(\"close\");\n      } },\n\n    {\n      text: bizagi.localization.getResource(\"render-boolean-no\"),\n      click: function click() {\n        $(this).dialog(\"close\");\n      } }];\n\n\n    $(confirmContent).dialog(confirmContentParams);\n  },\n\n  /**\r\n      * Render actual value of control and set events\r\n      * @param data\r\n      */\n  setDisplayValue: function setDisplayValue(data) {\n    var self = this;\n    var control = self.getControl();\n    var actionsToExecuteContainer = $(\".bz-action-launcher-actions-to-execute-container\", control);\n    var template = self.renderFactory.getTemplate(\"render-actionLauncher-actions-to-execute\");\n\n    self.configureQueueVisibility();\n    $.when(self.deferredActions).done(function (listOfActions) {\n      var getMappingAction = function getMappingAction(guidAction) {\n        var mapping = [];\n        $.each(listOfActions, function (key, value) {\n          if (value[4] == guidAction) {\n            mapping = value;\n          }\n        });\n        return mapping;\n\n      };\n      $.each(data, function (key, value) {\n        var mapping = getMappingAction(value.guidAction);\n        data[key].displayName = mapping[1];\n        data[key].guidProcess = mapping[0];\n        data[key].actionType = mapping[3];\n        data[key].xpathContext = mapping[5];\n        data[key].readOnlyForm = mapping[6];\n\n        if (data[key].params && data[key].params.idStartScope) {\n          data[key].idStartScope = data[key].params.idStartScope;\n        }\n        if (data[key].params && data[key].params.idPageCache) {\n          data[key].idPageCache = data[key].params.idPageCache;\n        }\n        if (data[key].params && data[key].params.idEntity) {\n          data[key].idEntity = data[key].params.idEntity;\n        }\n      });\n      $.when($.fasttmpl(template, { actions: data })).done(function (html) {\n        actionsToExecuteContainer.empty();\n        actionsToExecuteContainer.append(html);\n        var removeActionSelector = $(\".action-to-execute-control i\", actionsToExecuteContainer);\n        var openActionSelector = $(\".action-to-execute-control label\", actionsToExecuteContainer);\n        removeActionSelector.bind(\"click\", function () {\n          var index = $(this).parent().data(\"index\");\n          self.removeActionToQueue(index);\n        });\n        openActionSelector.bind(\"click\", function () {\n          var target = $(this).parent();\n          var type = target.data(\"actiontype\");\n          var guidprocess = target.data(\"guidprocess\");\n          var idStartScope = target.data(\"idstartscope\");\n          var title = target.data(\"title\");\n          var xpathContext = target.data(\"xpathcontext\");\n          var readOnlyForm = target.data(\"readonlyform\") || false;\n          var idEntity = target.data(\"identity\") || \"\";\n          var guidAction = target.data(\"guidaction\");\n          var recordXpath = xpathContext || self.properties.xpathContext;\n          switch (type) {\n            case \"Process\":\n              if (idStartScope) {\n                self.processStartForm({\n                  guidprocess: guidprocess,\n                  idStartScope: idStartScope,\n                  title: title,\n                  xpathContext: xpathContext,\n                  recordXpath: recordXpath });\n\n              }\n              break;\n            case \"Form\":\n\n              var action = {\n                guidProcess: guidprocess,\n                idStartScope: idStartScope,\n                editMode: true,\n                xpathContext: xpathContext,\n                readOnlyForm: readOnlyForm,\n                idEntity: idEntity,\n                recordXpath: recordXpath };\n\n\n              if (action.xpathContext) {\n                self.processActionFormCollection(action);\n              } else {\n                //Add parameters if action form\n                var extraParameters = {};\n                var dataAction = self.value.filter(function (item) {\n                  return item.guidAction == guidAction;\n                });\n                if (dataAction.length > 0) {\n                  extraParameters = {\n                    actionType: \"Form\",\n                    contextType: \"entitytemplate\",\n                    guidEntity: self.properties.guidEntity || dataAction[0].guidEntity };\n\n                }\n                self.processActionForm($.extend(action, extraParameters));\n              }\n              break;\n            case \"Rule\":\n              // Rules dont have forms or something like that\n              break;}\n\n        });\n      });\n    });\n  },\n  /**\r\n      * Show container if it has actions\r\n      */\n  configureQueueVisibility: function configureQueueVisibility() {\n    var self = this;\n    var control = self.getControl();\n    var actionsToExecuteContainer = $(\".bz-action-launcher-actions-to-execute-container\", control);\n    var actionsToExecuteTitle = $(\".actions-to-execute-title\", control);\n    if (self.getValue().length > 0) {\n      actionsToExecuteContainer.show();\n      actionsToExecuteTitle.show();\n    } else {\n      actionsToExecuteContainer.hide();\n      actionsToExecuteTitle.hide();\n    }\n  } });","/**\r\n * Desktop definition of range control\r\n *\r\n * @author: Andres Fernando Munoz\r\n */\n\n// Extends from render Desktop base\nbizagi.rendering.desktop.render.extend(\"bizagi.rendering.desktop.range\", bizagi.rendering.range.prototype);\n// Extends itself\nbizagi.rendering.desktop.range.extend(\"bizagi.rendering.desktop.range\", {}, {\n\n  /**\r\n                                                                               * Render a specific implementation for Desktop device\r\n                                                                               */\n  postRender: function postRender() {\n    var self = this;\n    var properties = self.properties;\n  },\n  /**\r\n      * Render actual value of control and set events\r\n      * @param data\r\n      */\n  setDisplayValue: function setDisplayValue(data) {\n    var self = this;\n    var control = self.getControl();\n  } });","/**\r\n * Desktop definition of range date control\r\n *\r\n * @author: Andres Fernando Munoz\r\n */\n\n// Extends from range desktop base\nbizagi.rendering.desktop.range.extend(\"bizagi.rendering.desktop.rangeDate\", bizagi.rendering.rangeDate.prototype);\n// Extends itself\nbizagi.rendering.desktop.rangeDate.extend(\"bizagi.rendering.desktop.rangeDate\", {}, {\n\n  /**\r\n                                                                                       * Render a specific implementation for Desktop device\r\n                                                                                       */\n  postRender: function postRender() {\n    var self = this;\n    self.defineRangeControl();\n  } });","/**\r\n * Desktop definition of range money control\r\n *\r\n * @author: Andres Fernando Munoz\r\n */\n\n// Extends from range desktop base\nbizagi.rendering.desktop.range.extend(\"bizagi.rendering.desktop.rangeMoney\", bizagi.rendering.rangeMoney.prototype);\n// Extends itself\nbizagi.rendering.desktop.rangeMoney.extend(\"bizagi.rendering.desktop.rangeMoney\", {}, {\n\n  /**\r\n                                                                                         * Render a specific implementation for Desktop device\r\n                                                                                         */\n  postRender: function postRender() {\n    var self = this;\n    self.defineRangeControl();\n  },\n\n  /**\r\n      * Render actual value of control and set events\r\n      * @param data\r\n      */\n  setDisplayValue: function setDisplayValue(data) {\n    var self = this;\n    var control = self.getControl();\n  } });","/**\r\n * Desktop definition of range number control\r\n *\r\n * @author: Andres Fernando Munoz\r\n */\n\n// Extends from range desktop base\nbizagi.rendering.desktop.range.extend(\"bizagi.rendering.desktop.rangeNumber\", bizagi.rendering.rangeNumber.prototype);\n// Extends itself\nbizagi.rendering.desktop.rangeNumber.extend(\"bizagi.rendering.desktop.rangeNumber\", {}, {\n\n  /**\r\n                                                                                           * Render a specific implementation for Desktop device\r\n                                                                                           */\n  postRender: function postRender() {\n    this.defineRangeControl();\n  } });","/**\r\n * Base definition of entity template\r\n *\r\n * @author: Andres Fernando Muoz\r\n * based on action launcher control\r\n */\n$.Class.extend(\"bizagi.rendering.entityTemplate\", {}, {\n  /**\r\n                                                         * Constructor\r\n                                                         */\n  init: function init(params) {\n    // Call base\n    this._super(params);\n  },\n\n  /**\r\n      * Initialize the control with data provided\r\n      */\n  initializeData: function initializeData(data) {\n    var self = this;\n    // Call base\n    this._super(data);\n    var form = self.getFormContainer();\n\n    self.deferredActions = new $.Deferred();\n    self.deferredActions.promise();\n\n    // Data of get process property value\n    self.processPropertyValueArgs = {\n      \"pcaseId\": self.getIdCase(),\n      \"pguidEntity\": self.properties.guidEntity,\n      \"idRender\": self.properties.id,\n      \"xpathContext\": form.properties.xpathContext,\n      \"idPageCache\": form.properties.idPageCache,\n      \"property\": \"data\",\n      \"psurrogatedKey\": self.properties.surrogatedKey };\n\n\n    self.properties.valueWidth = 100;\n    self.properties.displayType = \"value\";\n    self.properties.allowactions = typeof data.properties.allowactions == \"undefined\" ? true : data.properties.allowactions;\n\n    if (!self.properties.value) {\n      self.properties.value = self.value = [];\n    } else if (typeof self.properties.value == \"string\") {\n      self.properties.value = self.value = JSON.parse(self.properties.value);\n    }\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var mode = self.getMode();\n    var template;\n    var html = \"\";\n    // Render template\n    if (mode == \"design\") {\n      template = self.renderFactory.getTemplate(\"render-entityTemplate-design\");\n      html = $.fasttmpl(template, {});\n    } else\n    if (self.properties.surrogatedKey) {\n      template = self.renderFactory.getTemplate(\"render-entityTemplate\");\n      html = $.fasttmpl(template, { allowactions: self.properties.allowactions });\n    }\n    return html;\n  },\n\n  /**\r\n      * Public method to determine if a value is valid or not\r\n      */\n  isValid: function isValid(invalidElements) {\n    var self = this,\n    properties = self.properties;\n    // Call base\n    var bValid = this._super(invalidElements);\n    var value = self.getValue();\n    // TODO: write functionality\n    return bValid;\n  },\n\n  /**\r\n      * Sets the value in the rendered control\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n    var control = self.getControl();\n    // TODO: write functionality\n    // Set internal value\n    self.setValue(value, false);\n  } });","/**\r\n * Desktop definition of entity template\r\n *\r\n * @author: Andrs Fernando Muoz\r\n * based on action launcher control\r\n */\n\nbizagi.rendering.desktop.actionLauncher.extend(\"bizagi.rendering.desktop.entityTemplate\", {}, {\n\n  /**\r\n                                                                                                 *\r\n                                                                                                 * @param data\r\n                                                                                                 */\n  initializeData: function initializeData(data) {\n    var self = this,\n    data = data || {},\n    properties = data.properties || {};\n\n    self._super(data);\n    self.properties.allowactions = typeof properties.allowactions != \"undefined\" ? bizagi.util.parseBoolean(properties.allowactions) : false;\n    self.properties.templatetype = typeof properties.templatetype != \"undefined\" ? properties.templatetype : 'default';\n  },\n\n  /**\r\n      * Render a specific implementation for Desktop device\r\n      */\n  postRender: function postRender() {\n    var self = this;\n    var properties = self.properties;\n    var mode = self.getMode();\n    var html, template;\n    var control = self.getControl();\n\n    if (mode == \"design\" || !self.properties.surrogatedKey) {\n      return \"\";\n    }\n\n    self.configureQueueVisibility();\n\n    // Define params to get template\n    $.when(self.dataService.multiaction().getPropertyData(self.processPropertyValueDataTmplArgs)).\n    done(function (templateData) {\n\n      // Put the guidTemplate in the request for the multiaction loadtemplate.\n      if (typeof templateData.templateGuid !== \"undefined\" && templateData.templateGuid) {\n        templateData.isDefaultTemplate = false;\n        templateData.guidTemplate = templateData.templateGuid;\n        delete templateData[\"templateGuid\"];\n      }\n\n      $.when(self.engine.render(templateData, self.processPropertyValueDataTmplArgs)).done(function (template) {\n        var htmlTemplate = template;\n        var actionsContainer = $(\".bz-action-launcher-actions-container\", control);\n        template = self.renderFactory.getTemplate(\"render-actionLauncher-horizontal\");\n\n        if (properties.allowactions) {\n          $.when(self.dataService.multiaction().getActions(self.processPropertyValueArgs)).done(function (response) {\n            self.deferredActions.resolve(response);\n            var actions = bizagi.clone(response);\n            var moreActionsManager = self.moreActionsManager(actions);\n            var isMoreActions = moreActionsManager.isMoreActions;\n            actions = moreActionsManager.actions;\n\n            var html = $.fasttmpl(template, { actions: actions, template: true, isMoreActions: isMoreActions, allowactions: properties.allowactions });\n            actionsContainer.append(html);\n            actionsContainer.find('.actions-container.actions-container-template').append(htmlTemplate);\n\n            self.configureHandlers();\n          }).fail(function (error) {\n            //TODO: do something\n          });\n        } else\n        {\n          var html = $.fasttmpl(template, { template: true, allowactions: properties.allowactions });\n\n          actionsContainer.append(html);\n          actionsContainer.find('.actions-container.actions-container-template').append(htmlTemplate);\n        }\n      });\n    }).fail(function (error) {\n      //TODO: do something\n    });\n    self.engine.subscribe('onLoadDataNavigation', function (ev, params) {\n      bizagi.loader.start(\"entity-engine-view\").then(function () {\n        params.skipRefresh = true;\n        $(document).triggerHandler(\"showDialogWidget\", {\n          widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_DIALOGNAV,\n          data: params,\n          modalParameters: {\n            refreshInbox: false,\n            title: params.data.displayName },\n\n          maximizeOnly: false });\n\n      });\n    });\n  },\n\n  /**\r\n      * Add binding to html elements\r\n      */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    var formContainer = self.getFormContainer();\n    if (typeof formContainer.params.printversion === \"undefined\" || formContainer.params.printversion == false) {\n      var control = self.getControl();\n      var properties = self.properties;\n      var entityTemplateControls = $(\".action-launcher-control\", control);\n\n      // Binding for a tooltip when max items is excedded\n      self.configureMoreActionsHandler();\n\n      // Binding for click action on buttons\n      entityTemplateControls.on(\"click\", function () {\n        var action = {\n          guidProcess: $(this).data(\"guidprocess\"),\n          guidAction: $(this).data(\"guidaction\"),\n          displayName: $(this).data(\"display-name\"),\n          actionType: $(this).data(\"action-type\"),\n          xpathContext: $(this).data(\"xpathcontext\"),\n          xpathActions: self.properties.xpathActions || \"\" };\n\n\n        if (action.actionType === \"Form\") {\n          action.xpathContext = undefined;\n          action.contextType = \"entitytemplate\";\n          action.guidEntity = self.properties.guidEntity;\n        }\n        self.onActionClicked(action);\n      });\n    }\n\n\n  } });","/*  \r\n *   Name: BizAgi Desktop Render list Extension\r\n *   Author: Ivn Ricardo Taimal Narvez\r\n *   Comments:\r\n *   -   This script will redefine the list render class to adjust to desktop devices\r\n */\n\n// Extends from render Desktop base\nbizagi.rendering.desktop.render.extend(\"bizagi.rendering.desktop.checkList\", bizagi.rendering.checkList.prototype);\n// Extends itself\nbizagi.rendering.desktop.checkList.extend(\"bizagi.rendering.desktop.checkList\", {}, {\n\n  /*\r\n                                                                                       *   Template method to implement in each device to customize each render after processed\r\n                                                                                       */\n  postRender: function postRender() {\n    var self = this;\n    var control = self.getControl();\n    // Call base \n    this._super();\n    // Set control container to behave as a block\n    control.addClass(\"ui-bizagi-render-display-block\");\n    self.properties.unique = Math.ceil(Math.random() * 1000);\n    // Apply plugin\n    $(\".ui-bizagi-render-checkList-label\", self.checkListGroup).check();\n  },\n\n  /*\r\n      *   Template method to implement in each device to customize the render's behaviour to add handlers\r\n      */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    // Call base\n    self._super();\n    // Bind change event\n    if (!bizagi.util.isIE()) {\n      // PLUGIN IMPLEMENTATION\n      //todo: change bind type for IE\n      $(\"input[type=checkbox]\", self.checkListGroup).bind(\"change\", function (evt, ui) {\n        var itemId = $(this).data(\"item-guid\");\n        var checked = $(this).is(\":checked\");\n        self.updateDisplay($(this), checked);\n        self.onCheckListGroupChange(itemId, checked);\n      });\n    } else {\n      // NON PLUGIN IMPLEMENTATION\n      $(\"input[type=checkbox]\", self.checkListGroup).bind(\"change\", function (evt, ui) {\n        var itemId = $(this).data(\"item-guid\");\n        var checked = $(this).is(\":checked\");\n        self.updateDisplay($(this), checked);\n        self.onCheckListGroupChange(itemId, checked);\n      });\n    }\n  },\n\n  updateDisplay: function updateDisplay(element, checked) {\n    var self = this;\n    var item = element.closest(\".ui-bizagi-render-checkList-item\");\n    if (checked) {\n      item.addClass('checked');\n    } else {\n      item.removeClass('checked');\n    }\n  },\n\n  onCheckListGroupChange: function onCheckListGroupChange(itemId, checked) {\n    var self = this;\n    var item;\n    var items = $.grep(self.properties.items, function (element, index) {\n      return element.guid === itemId;\n    });\n    if (items && items.length > 0) {\n      item = items[0];\n    }\n    item.checked = checked;\n  },\n\n  /*\r\n      *   Sets the value in the rendered control\r\n      */\n  clearDisplayValue: function clearDisplayValue() {\n    var self = this;\n    if (!bizagi.util.isIE()) {\n      // PLUGIN IMPLEMENTATION\n      $(\"input[type=checkbox]\", self.checkListGroup).check(\"uncheckItem\");\n    } else\n    {\n      // NON PLUGIN IMPLEMENTATION\n      $(\"input[type=checkbox]\", self.checkListGroup).removeAttr(\"checked\");\n    }\n  },\n\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n  } });","/*  \r\n *   Name: BizAgi Desktop Render list Extension\r\n *   Author: Ivn Ricardo Taimal Narvez\r\n *   Comments:\r\n *   -   This script will redefine the list render class to adjust to desktop devices\r\n */\n\n// Extends from base list\nbizagi.rendering.desktop.checkList.extend(\"bizagi.rendering.desktop.activityCheckList\", {}, {\n\n  /*\r\n                                                                                               *   Template method to implement in each device to customize each render after processed\r\n                                                                                               */\n  postRender: function postRender() {\n    var self = this;\n    var control = self.getControl();\n    // Call base\n    this._super();\n    self.addButton = $(\".ui-bizagi-render-checkList-add-item\", self.element);\n    self.newItemName = $(\".ui-bizagi-render-checkList-input-name\", self.control);\n    self.separator = $(\".ui-bizagi-render-checkList-separator\", self.element);\n    self.goalActivity = $(\".ui-bizagi-render-checkList-goal-activity\", self.element);\n    self.additionalElements();\n    self.notifyLoadItems();\n\n  },\n\n  renderReadOnly: function renderReadOnly() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"checkList-disabled\");\n    return $.fasttmpl(template, { items: this.value });\n  },\n\n  additionalElements: function additionalElements() {\n    var self = this;\n    var control = self.getControl();\n    var activityWorkTitle = this.getResource(\"render-activity-check-list-activitywork\") + \" (\" + self.properties.activityWork + \"%)\";\n    var activityFormTitle = this.getResource(\"render-activity-check-list-form\");\n\n    if (!(self.addButton && self.addButton.length > 0)) {\n      var $divContainer = $(\"<div/>\").addClass(\"ui-bizagi-render-checkList-add-item\");\n      $divContainer.append($(\"<h4 />\").text(bizagi.localization.getResource(\"workportal-project-plan-activity-work-title\")));\n      $divContainer.append($(\"<button class=''/>\").text(\"+ \" + bizagi.localization.getResource(\"workportal-project-plan-activity-action-add\")));\n      self.element.prepend($divContainer);\n    }\n    if (!(self.separator && self.separator.length > 0)) {\n      self.element.append($(\"<div/>\").addClass(\"ui-bizagi-render-checkList-separator\").append($(\"<span/>\")));\n    }\n    if (!(self.goalActivity && self.goalActivity.length > 0)) {\n      if (self.properties.activityDescription && self.properties.activityDescription !== \"\") {\n        self.element.prepend($(\"<div/>\").addClass(\"ui-bizagi-render-checkList-goal-activity\").append(\"<h3><span class='ui-bizagi-wp-bold'>\" +\n        bizagi.localization.getResource(\"workportal-project-plan-activity-goal\") +\n        \": </span><span>\" + self.properties.activityDescription + \"</span></h3>\"));\n      }\n    }\n  },\n\n  notifyLoadItems: function notifyLoadItems() {\n    var self = this;\n    setTimeout(function () {\n      self.triggerGlobalHandler(\"onLoadDataItemsFromFormActivityPlan\", { \"items\": self.properties.items, \"activityWork\": self.properties.activityWork });\n    }, 100);\n  },\n\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    var control = self.getControl();\n    this._super();\n    $(\".ui-bizagi-render-checkList-add-item button\", self.element).unbind(\"click\").click(function () {\n      var itemSelected = $(\".ui-bizagi-render-checkList-item.selected\", self.control);\n      if (itemSelected.length <= 0) {\n        self.prepareNewItem();\n      } else {\n        $(\".ui-bizagi-render-checkList-input-name\", itemSelected).focus();\n      }\n    });\n\n    $(\".item-button.delete\", self.checkListGroup).bind(\"click\", function (evt, ui) {\n      var itemId = $(this).closest(\".ui-bizagi-render-checkList-item\").data(\"item-guid\");\n      self.deleteItem(itemId);\n    });\n\n    $(\"label.item-name\", self.checkListGroup).bind(\"click\", function (evt, ui) {\n      var itemSelected = $(this).closest(\".ui-bizagi-render-checkList-item\");\n      var itemId = itemSelected.data(\"item-guid\");\n      self.selectItem(itemId);\n    });\n  },\n\n  selectItem: function selectItem(itemId) {\n    var self = this;\n    for (var i = 0; i < self.properties.items.length; i++) {\n      if (self.properties.items[i].guid === itemId) {\n        self.properties.items[i].selected = true;\n      } else {\n        self.properties.items[i].selected = false;\n      }\n    }\n    self.repaintControl();\n    var itemSelected = $(\".ui-bizagi-render-checkList-item.selected\");\n    var itemSelectedName = $(\".ui-bizagi-render-checkList-input-name\", itemSelected);\n    var itemContent = itemSelectedName.val();\n    itemSelectedName.focus();\n    itemSelectedName[0].setSelectionRange(itemContent.length, itemContent.length);\n    self.configureHandlers();\n    self.addSelectedHandlers();\n  },\n\n  deleteItem: function deleteItem(itemId) {\n    var self = this;\n    for (var i = 0; i < self.properties.items.length; i++) {\n      if (self.properties.items[i].guid === itemId) {\n        self.properties.items.splice(i, 1);\n        break;\n      }\n    }\n    self.setValue(self.properties.items);\n    self.repaintControl();\n    self.configureHandlers();\n    self.refreshValue(self.properties.items);\n  },\n\n  prepareNewItem: function prepareNewItem() {\n    var self = this;\n    var newItem = {\n      guid: Math.guid(),\n      resolved: false,\n      name: \"\",\n      selected: true };\n\n    self.properties.items.push(newItem);\n    self.repaintControl();\n    self.configureHandlers();\n    self.addSelectedHandlers();\n  },\n\n  addSelectedHandlers: function addSelectedHandlers() {\n    var self = this;\n    var itemSelected = $(\".ui-bizagi-render-checkList-item.selected\", self.control);\n    var itemSelectedName = $(\".ui-bizagi-render-checkList-input-name\", itemSelected);\n    itemSelectedName.focus();\n    itemSelectedName.blur(function () {\n      var newItemName = itemSelectedName.val();\n      if (newItemName && newItemName !== \"\") {\n        self.addItem();\n      } else\n      {\n        self.properties.items.splice(self.properties.items.length - 1, 1);\n        self.setValue(self.properties.items);\n        self.repaintControl();\n        self.configureHandlers();\n      }\n    });\n    itemSelectedName.keypress(function (event) {\n      if (event.which == 13) {\n        event.preventDefault();\n        var newItemName = itemSelectedName.val();\n        if (newItemName && newItemName !== \"\") {\n          self.addItem();\n          self.prepareNewItem();\n        }\n      }\n    });\n  },\n\n  addItem: function addItem() {\n    var self = this;\n    var control = self.getControl();\n    var itemSelected = $(\".ui-bizagi-render-checkList-item.selected\", self.control);\n    var itemSelectedName = $(\".ui-bizagi-render-checkList-input-name\", itemSelected);\n    var newItemName = itemSelectedName.val();\n    self.addButton.show();\n    $.each(self.properties.items, function (index, item) {\n      if (item.selected) {\n        item.name = newItemName;\n        item.selected = false;\n      }\n    });\n    self.updateOriginalValue();\n    self.setValue(self.properties.items);\n    self.repaintControl();\n    self.configureHandlers();\n    self.refreshValue(self.properties.items);\n  },\n\n  repaintControl: function repaintControl() {\n    var self = this;\n    var control = self.getControl();\n    var checkListHtml = self.renderControl();\n    $(\".ui-bizagi-render-checkList\", self.control).replaceWith(checkListHtml);\n    self.postRender();\n  },\n\n  onCheckListGroupChange: function onCheckListGroupChange(itemId, checked) {\n    var self = this;\n    var item;\n    var items = $.grep(self.properties.items, function (element, index) {\n      return element.guid === itemId;\n    });\n    if (items && items.length > 0) {\n      item = items[0];\n    }\n    item.resolved = checked;\n    self.setValue(self.properties.items);\n    self.refreshValue(self.properties.items);\n  },\n\n  refreshValue: function refreshValue(items) {\n    var self = this,\n    control = self.getControl(),\n    length = items.length,\n    completed = 0;\n\n    for (var i = 0; i < length; i++) {\n      if (items[i].resolved) {\n        completed += 1;\n      }\n    }\n\n    if (length > 0) {\n      self.properties.activityWork = Math.floor(100 * completed / length);\n    } else\n    {\n      self.properties.activityWork = 0;\n    }\n\n    var html = this.getResource(\"render-activity-check-list-activitywork\") + \" (\" + self.properties.activityWork + \"%)\";\n    $(\".ui-bizagi-render-checkList-activity-work span\", self.element).html(html);\n    self.triggerGlobalHandler(\"onLoadDataItemsFromFormActivityPlan\", { \"items\": self.properties.items, \"activityWork\": self.properties.activityWork });\n  },\n\n  getValue: function getValue(data) {\n    var self = this;\n    return self.value || [];\n  },\n\n  controlValueIsChanged: function controlValueIsChanged() {\n    var self = this;\n    var originalValue = JSON.stringify(self.properties.originalValue);\n    var newValue = JSON.stringify(self.value);\n    return originalValue !== newValue;\n  },\n\n  /**\r\n      * Validate if all checked items on activity\r\n      * @returns {boolean}\r\n      */\n  allCheckedItems: function allCheckedItems() {\n    var self = this;\n    var response = false;\n    if (Array.isArray(self.value)) {\n      response = self.value.every(function (item) {\n        return item.resolved == true;\n      });\n    }\n    return response;\n  },\n\n  /*\r\n      *   Updates original value for some comparisons\r\n      */\n  updateOriginalValue: function updateOriginalValue() {\n    var self = this;\n    self.properties.originalValue = bizagi.clone(self.value);\n  },\n  /*\r\n      *   Add the render data to the given collection in order to send data to the server\r\n      */\n  collectData: function collectData(renderValues) {\n    var self = this;\n    var properties = self.properties;\n\n    // Add the render value\n    var xpath = properties.xpath;\n    var value = self.getValue();\n    var idActivity = self.properties.idActivity;\n\n    var validationResolvedItems = true;\n    var lastActionButton = self.getFormContainer().getLastActionButton();\n    if (lastActionButton && lastActionButton.action == \"next\") {\n      validationResolvedItems = self.allCheckedItems();\n    }\n\n    if (self.controlValueIsChanged() && validationResolvedItems) {\n      // Filter by valid xpaths and valid values\n      if (!bizagi.util.isEmpty(xpath) && !bizagi.util.isEmpty(idActivity)) {\n        if (Array.isArray(value)) {\n          var data = {\n            idActivity: idActivity,\n            items: value };\n\n          renderValues[properties.xpath] = JSON.stringify(data);\n        } else if (value === \"\") {\n          renderValues[properties.xpath] = \"\";\n        }\n      }\n    }\n  },\n  isValid: function isValid(invalidElements) {\n    var self = this,\n    properties = self.properties,\n    message;\n    var items = self.getValue();\n    var valid = true;\n    message = self.getResource(\"render-activity-check-list-validation\");\n    for (var i = 0; i < items.length; i += 1) {\n      var item = items[i];\n      if (!item.resolved) {\n        invalidElements.push({\n          xpath: properties.xpath,\n          message: message });\n\n        valid = false;\n        break;\n      }\n    }\n    return valid;\n  } });","/**\r\n * Base definition of Polymorphic launcher\r\n *\r\n * @author: Edward J Morales\r\n */\n\n$.Class.extend(\"bizagi.rendering.polymorphicLauncher\", {}, {\n  /*\r\n                                                              * Constructor\r\n                                                              */\n  init: function init(params) {\n    // Call base\n    this._super(params);\n  },\n\n  /*\r\n      * Initialize the control with data provided\r\n      */\n  initializeData: function initializeData(data) {\n    var self = this;\n    // Call base\n    this._super(data);\n    var form = self.getFormContainer();\n    this.typeForm = form.properties.typeForm || \"\";\n    var mode = self.getMode();\n\n    self.deferredActions = new $.Deferred();\n    self.deferredActions.promise();\n\n    self.properties.valueWidth = 100;\n    self.properties.displayType = \"value\";\n    self.properties.allowSearch = typeof data.properties.allowSearch == \"undefined\" ? false : data.properties.allowSearch;\n    self.properties.additionalXpath = self.properties.additionalXpath || [];\n\n    if (!self.properties.value) {\n      self.properties.value = self.value = [];\n      self.properties.originalValue = [];\n    } else if (typeof self.properties.value == \"string\") {\n      self.properties.value = self.value = JSON.parse(self.properties.value);\n    }\n\n    // Data of get process property value\n    self.processPropertyValueArgs = {\n      \"pcaseId\": self.getIdCase(),\n      \"pguidEntity\": self.properties.guidEntity,\n      \"idRender\": self.properties.id,\n      \"xpathContext\": form.properties.xpathContext,\n      \"idPageCache\": form.properties.idPageCache,\n      \"property\": \"data\",\n      \"ptags\": self.getTagList(self.properties.tagslist),\n      \"additionalXpaths\": self.properties.additionalXpath };\n\n  },\n\n  /**\r\n      * Send processpropertyvalue in order to execute an Action\r\n      * This method is used when this control stay in Summary form or Global form\r\n      * @param action\r\n      */\n  executeActionImmediately: function executeActionImmediately(action) {\n    var self = this;\n    //Execute action immediately\n    var form = self.getFormContainer();\n\n    var processPropertyValueExecuteConstructor = {\n      \"idRender\": self.properties.id,\n      \"xpathContext\": form.properties.xpathContext,\n      \"idPageCache\": form.properties.idPageCache,\n      \"property\": \"executeConstructor\",\n      \"psurrogatedKey\": self.properties.surrogatedKey,\n      \"pguidConstructor\": action.guidConstructor,\n      \"pparameters\": JSON.encode({\n        \"idStartScope\": action.idStartScope,\n        \"pactionXpath\": self.properties.xpathActions,\n        \"idPageCache\": action.idPageCache }) };\n\n\n\n    self.dataService.executeActions(processPropertyValueExecuteConstructor).done(function (data) {\n      self.notifyExecution(data.response, action);\n    }).fail(function (error) {\n      // TODO: Create generic mechanism to send notifications\n      self.notifyExecution(\"Error\", action);\n    });\n  },\n\n  /**\r\n      * notify action execution status\r\n      * @param response\r\n      */\n  notifyExecution: function notifyExecution(response, actionName) {\n    // To override in each device\n  },\n\n  /**\r\n      * Render control in read only mode: properties.editable = false\r\n      * @return {*}\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    return this.renderControl();\n  },\n\n  /**\r\n      * Make a postrender of readonly control\r\n      */\n  postRenderReadOnly: function postRenderReadOnly() {\n    this.properties.readOnly = true;\n    this.postRender();\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @return {string}\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var properties = self.properties;\n    var mode = self.getMode();\n    var template;\n    var html = \"\";\n\n    // Render template\n    if (mode == \"design\") {\n      template = self.renderFactory.getTemplate(\"render-polymorphicLauncher-design\");\n      var params = {\n        type: properties.type,\n        allowSearch: properties.allowSearch };\n\n      html = $.fasttmpl(template, params);\n    } else if (properties.surrogatedKey) {\n      template = self.renderFactory.getTemplate(\"render-polymorphicLauncher\");\n      html = $.fasttmpl(template);\n    }\n    return html;\n  },\n\n\n  /**\r\n      * Public method to determine if a value is valid or not\r\n      * @param invalidElements\r\n      * @return {*}\r\n      */\n  isValid: function isValid(invalidElements) {\n    var self = this,\n    properties = self.properties;\n    // Call base\n    var bValid = this._super(invalidElements);\n    var value = self.getValue();\n    // TODO: write functionality\n    return bValid;\n  },\n\n  /**\r\n      * Sets the value in the rendered control\r\n      * @param value\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n    // Set internal value\n    self.setValue(value, false);\n  },\n\n  /**\r\n      * Process an action\r\n      * @param action\r\n      */\n  actionManager: function actionManager(action) {\n    var self = this;\n    var guidProcess = action.guidObject || \"\";\n    var def = new $.Deferred();\n\n    action.recordXpath = self.getFormContainer().properties.recordXpath;\n\n    /**\r\n                                                                         /**\r\n                                                                          * Check if action is a process\r\n                                                                          */\n    switch (action.actionType) {\n      case \"Process\":\n        // Verify if case has startform\n        var params = {\n          guidWFClass: guidProcess };\n\n\n        $.when(self.dataService.hasStartForm(params)).done(function (result) {\n          if (result.hasStartForm) {\n            // Open a dialog with startform and wait for Scope\n            $.when(self.processStartForm({\n              guidprocess: guidProcess,\n              title: action.displayNamee,\n              recordXpath: action.recordXpath })).\n            done(function (idStartScope) {\n              action.idStartScope = idStartScope;\n              def.resolve(action);\n            });\n          } else {\n            // Just add action to queue to be executed on nextEvent\n            def.resolve(action);\n          }\n        });\n\n        break;\n      case \"Rule\":\n        // Just add action to queue to be executed on nextEvent\n        def.resolve(action);\n        break;\n      case \"Form\":\n        $.when(self.processActionForm(action)).done(function (idStartScope) {\n          action.idStartScope = idStartScope;\n          def.resolve(action);\n        });\n        break;}\n\n\n    return def.promise();\n  },\n\n  /**\r\n      * Add actions within value object\r\n      * @param action\r\n      */\n  addActionToQueue: function addActionToQueue(action) {\n    var self = this;\n    var actionsList = self.getValue();\n    var formParams = self.getFormContainer().getParams();\n\n    action.params = action.params || {};\n\n    var recordXpath = self.properties.xpathContext;\n\n    switch (action.actionType) {\n      case \"Process\":\n        action.params = {\n          additionalXpaths: self.properties.additionalXpath.join(\",\"),\n          idParentWorkitem: formParams.idWorkitem || bizagi.context.idWorkItem,\n          recordXpath: recordXpath };\n\n        if (typeof action.idStartScope !== \"undefined\") {\n          action.params.idStartScope = action.idStartScope;\n        }\n        break;\n      case \"Form\":\n        action.params = {\n          idStartScope: action.idStartScope,\n          additionalXpaths: self.properties.additionalXpath.join(\",\"),\n          entityXpath: self.properties.xpathActions,\n          idParentWorkitem: formParams.idWorkitem || bizagi.context.idWorkItem,\n          idEntity: action.idEntity,\n          guidEntity: action.guidEntity };\n\n        break;\n      case \"Rule\":\n        //TODO\n        break;}\n\n\n    actionsList.push(action);\n    self.setValue(actionsList);\n    self.setDisplayValue(actionsList);\n  },\n\n  /**\r\n      * Remove action within value object\r\n      * @param index\r\n      */\n  removeActionToQueue: function removeActionToQueue(index) {\n    var self = this;\n    var value = self.getValue();\n    value.splice(index, 1);\n    self.setValue(value);\n    self.setDisplayValue(value);\n  },\n  /**\r\n      * Add the render data to the given collection in order to send data to the server\r\n      * @param renderValues\r\n      */\n  collectData: function collectData(renderValues) {\n    var self = this;\n    if (self.controlValueIsChanged()) {\n      var properties = self.properties;\n      var xpath = properties.xpath;\n      var controlValue = self.getValue();\n      var actions = [];\n      $.each(controlValue, function (index, value) {\n        var action = {};\n        action.params = value.params || {};\n        action.guidAction = value.guidObject || value.guidAction;\n        action.displayName = value.displayName;\n        action.guidConstructor = value.guidConstructor;\n        action.actionType = value.actionType;\n        action.xpathContext = value.xpathContext;\n        action.guidEntity = value.guidEntity;\n        actions.push(action);\n      });\n      renderValues[xpath] = actions.length == 0 ? \"\" : JSON.encode(actions);\n    }\n  },\n\n  /**\r\n      * Util to count how many actions are there\r\n      * @param action\r\n      * @return {number}\r\n      */\n  countSameActions: function countSameActions(action) {\n    var self = this;\n    var value = self.getValue();\n    var count = 0;\n    $.each(value, function (key, value) {\n      if (value.guidAction == action.guidAction) {\n        count++;\n      }\n    });\n    return count;\n  },\n\n  /**\r\n      * Get list of tags\r\n      * @param taglist\r\n      * @return {Array}\r\n      */\n  getTagList: function getTagList(taglist) {\n    taglist = taglist || [];\n    var result = [];\n\n    for (var i = taglist.length; i > 0; i--) {\n      result.push(taglist[i - 1].value);\n    }\n    return result.length > 0 ? result : \"\";\n  } });"]}