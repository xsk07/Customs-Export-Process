{"version":3,"sources":["jquery/workportal/js/desktop/widget/bizagi.workportal.desktop.widgets.activity.log.js","jquery/workportal/js/desktop/widget/admin/desktop.widgets.admin.document.templates.js","jquery/workportal/js/desktop/widget/admin/desktop.widgets.admin.processes.js","jquery/workportal/js/desktop/widget/admin/desktop.widgets.admin.entities.js","jquery/workportal/js/desktop/widget/admin/desktop.widgets.admin.usersAdministration.js","jquery/workportal/desktop/widget/smartinbox/bizagi.workportal.desktop.widgets.smartinbox.admin.js","jquery/common/bizagi.simpleGrid/js/bizagi.simpleGrid.js","jquery/workportal/js/base/widget/bizagi.workportal.widgets.activity.log.js","jquery/workportal/js/base/widget/bizagi.workportal.widgets.authentication.log.js","jquery/workportal/js/desktop/widget/bizagi.workportal.desktop.widgets.authentication.log.js","jquery/workportal/js/base/widget/admin/admin.encrypt.passwords.js","jquery/workportal/js/base/widget/admin/admin.users.requests.js","jquery/workportal/js/base/widget/admin/admin.defaults.assignation.user.js","jquery/workportal/js/base/widget/admin/admin.user.profiles.js","jquery/workportal/js/base/widget/admin/admin.dimensions.js","jquery/workportal/js/base/widget/admin/admin.alarms.js","jquery/workportal/js/base/widget/admin/admin.user.licenses.js","jquery/workportal/js/base/widget/admin/admin.document.templates.js","jquery/workportal/js/base/widget/admin/admin.processes.js","jquery/workportal/js/base/widget/admin/admin.business.policies.js","jquery/workportal/js/base/widget/admin/admin.business.policies.decision.table.js","jquery/workportal/js/base/widget/admin/admin.business.policies.rules.js","jquery/workportal/js/base/widget/admin/admin.business.policies.tabs.js","jquery/workportal/js/base/widget/admin/admin.business.policies.politics.js","jquery/workportal/js/base/widget/admin/admin.business.policies.vocabularies.js","jquery/workportal/js/base/widget/admin/admin.language.js","jquery/workportal/js/base/widget/admin/admin.preferences.js","jquery/workportal/js/base/widget/admin/admin.entities.js","jquery/workportal/js/desktop/widget/admin/desktop.widgets.admin.encrypt.passwords.js","jquery/workportal/js/desktop/widget/admin/desktop.widgets.admin.users.requests.js","jquery/workportal/js/desktop/widget/admin/desktop.widgets.admin.defaults.assignation.user.js","jquery/workportal/js/desktop/widget/admin/desktop.widgets.admin.user.profiles.js","jquery/workportal/js/desktop/widget/admin/desktop.widgets.admin.dimensions.js","jquery/workportal/js/desktop/widget/admin/desktop.widgets.admin.alarms.js","jquery/workportal/js/desktop/widget/admin/desktop.widgets.admin.user.licenses.js","jquery/workportal/js/desktop/widget/admin/desktop.widgets.admin.business.policies.js","jquery/workportal/js/desktop/widget/admin/desktop.widgets.admin.business.policies.decision.table.js","jquery/workportal/js/desktop/widget/admin/desktop.widgets.admin.business.policies.rules.js","jquery/workportal/js/desktop/widget/admin/desktop.widgets.admin.business.policies.tabs.js","jquery/workportal/js/desktop/widget/admin/desktop.widgets.admin.business.policies.politics.js","jquery/workportal/js/desktop/widget/admin/desktop.widgets.admin.language.js","jquery/workportal/js/desktop/widget/admin/desktop.widgets.admin.preferences.js","jquery/workportal/js/desktop/widget/admin/desktop.widgets.admin.stakeholders.js","jquery/workportal/js/desktop/widget/admin/desktop.widgets.admin.oauth2.applications.js","jquery/workportal/js/desktop/widget/admin/desktop.widgets.admin.error.logs.js","jquery/workportal/js/desktop/widget/admin/desktop.widgets.admin.business.policies.vocabularies.js","jquery/workportal/js/base/widget/admin/admin.async.activities.js","jquery/workportal/js/desktop/widget/admin/desktop.widgets.admin.cases.js","jquery/workportal/js/desktop/widget/admin/desktop.widgets.admin.caseSearch.js","jquery/workportal/js/desktop/widget/admin/desktop.widgets.admin.async.activities.js","jquery/workportal/js/base/widget/admin/admin.usersAdministration.js","jquery/workportal/js/desktop/widget/admin/desktop.widgets.admin.userPermissionReport.js","jquery/workportal/js/base/widget/admin/admin.usersDelegation.js","jquery/workportal/js/base/widget/admin/admin.usersDelegation.searchUser.js","jquery/workportal/js/desktop/widget/admin/desktop.widgets.admin.usersDelegation.js","jquery/workportal/js/desktop/widget/admin/desktop.widgets.admin.usersDelegation.searchUser.js","jquery/workportal/js/desktop/widget/admin/desktop.widgets.admin.holidays.js","jquery/workportal/js/desktop/widget/admin/desktop.widgets.admin.projectname.js","jquery/common/bizagi.searchuser/js/bizagi.searchuser.js","jquery/common/bizagi.createUser/js/bizagi.createUser.js","jquery/workportal/desktop/widget/admin/business.polices/bizagi.workportal.desktop.widgets.admin.business.polices.js","jquery/workportal/js/desktop/widget/admin/desktop.widgets.admin.transfer.case.security.permissions.js"],"names":["_typeof","obj","Symbol","iterator","constructor","prototype","_defineProperty","key","value","Object","defineProperty","enumerable","configurable","writable","_bizagi$workportal$wi","bizagi","workportal","widgets","widget","extend","getWidgetName","BIZAGI_WORKPORTAL_WIDGET_ACTIVITY_LOG","renderContent","template","this","getTemplate","idCase","params","idWorkflow","content","$","tmpl","BIZAGI_WORKPORTAL_WIDGET_AUTHENTICATION_LOG","activity","log","ATTR_VALUE_INDEX_COLUMN","ActivityLog","EntityLog","UserLog","ATTR_VALUE_MAX_LENGTH","SELECTORS","ATTR_VALUE_VIEW_MORE","DETAIL_WRAPPER","init","workportalFacade","dataService","totalPages","maxRows","maxPages","currentPage","_super","loadTemplates","activity.log","concat","activity.log.general.content","activity.log.header","activity.log.detail.header","activity.log.detail.content","useNewEngine","postRender","self","generalContentTmpl","generalHeaderContentTmpl","detailHeaderTmpl","detailContentTmpl","logCategories","ACTIVITIES","id","serviceMethod","detailServiceMethod","selectedDetailId","ENTITIES","USERS","ADMINISTRATION","containtersID","GENERAL","DETAIL","proxyPrefix","undefined","serviceLocator","render","services","service","getCaseNumber","done","response","caseNumber","initWidget","displayNoResults","setupHeader","getContent","headerWrapper","when","supportedLogTypes","supportedLogTypesData","Supported","appendTo","available","getFirstAvailableLogTypes","getActivityLogByCategory","bindHeaderElementInteraction","fail","error","att","x","element","categoryObj","click","hasClass","removeClass","addClass","selectedCategoryObj","isEmptyObject","idActualPage","pageSize","result","total","generalActivityDataValidator","showErrorAlertDialog","showMessageBox","JSON","parse","responseText","message","data","rows","currentLogData","renderContentByCategory","generalWrapper","empty","switchContent","pagData","getPaginationData","logCategory","logItems","getIcon","setUpPagination","length","show","hide","e","preventDefault","selectedLogItemIndex","currentTarget","closest","index","preprocessDetailRender","pagination","page","pagesArray","pagesToShow","a","push","$pager","method","bizagiPagination","maxElemShow","actualPage","listElement","clickCallBack","options","parseInt","selectedElement","getDetailRenderParams","currentDetailLogData","renderLogDetail","attr","idWorkItemFrom","idEntity","idUser","selectedElementData","detailWrapper","renderDetailContent","logFilterWrapper","showDetailResultMessage","applyDetailFilter","val","_eventsDeclare","$detailWrapper","getFilterParams","renderedTmpl","_renderDetailContentTmpl","remove","insertAfter","userFullName","attribDisplayName","entDisplayName","$logFilterWrapper","toLowerCase","_SELECTORS","Class","_content","_detailWrapper","_showCompleteAttributeValue","_params","title","detailItems","isAttrValue","_isAttrValue","bind","attrValue2show","_attrValue2show","showMoreButton4AttrValue","_showMoreButton4AttrValue","_html","find","html","showSimpleBox","localization","getResource","selectedCategoryObjId","i","_position","console","substr","def","Deferred","_deferHeaderTmpl","_deferContentTmpl","detailHeaderResult","detailContentResult","append","resolve","promise","contentToDisplay","icons","icon","injector","register","authentication","authentication.log","authentication.log.fields","authentication.log.button","authentication.log.result","authentication.log.pagination","maxPageToShow","fieldsContentTmpl","buttonContentTmpl","resultContentTmpl","paginationTmpl","setupInitialData","dataType","getAuthenticationLogData","domainList","eventTypeList","subEvenTypesList","subEventTypeList","fields","subEvenTypes","setupDatePicker","setupFooterButtons","formatDate","getDateFormat","timeFormat","datetimepicker","controlType","dateFormat","currentText","closeText","timeText","hourText","capitalize","minuteText","datePickerFormat","indexOf","replaceAll","search","button","widgetButtonSet","validateData","dtFrom","dtTo","util","dateFormatter","formatInvariant","getDateFromFormat","fieldsAreEmpty","errorMessage","action","domain","userName","eventSubType","displayName","eventType","pagSize","findResults","validateResponse","errorFieldName","replace","pageToShow","pag","getAuthenticationLogResult","resultList","totalRecords","records","resultTemplate","paginationHtml","pageToshow","summaryWrapper","pagerData","pages","pageNumber","BIZAGI_WORKPORTAL_WIDGET_ADMIN_ENCRYPT_PASSWORDS","BIZAGI_WORKPORTAL_WIDGET_ADMIN_USERS_REQUESTS","BIZAGI_WORKPORTAL_WIDGET_ADMIN_DEFAULTS_ASSIGNATION_USER","loadtemplates","BIZAGI_WORKPORTAL_WIDGET_ADMIN_USER_PROFILES","BIZAGI_WORKPORTAL_WIDGET_ADMIN_USER_DIMENSIONS","BIZAGI_WORKPORTAL_WIDGET_ADMIN_ALARMS","BIZAGI_WORKPORTAL_WIDGET_ADMIN_USER_LICENSES","BIZAGI_WORKPORTAL_WIDGET_ADMIN_DOCUMENT_TEMPLATES","BIZAGI_WORKPORTAL_WIDGET_ADMIN_PROCESSES","comboProcess","processEditTmpl","taskEditTmpl","BIZAGI_WORKPORTAL_WIDGET_ADMIN_BUSINESS_POLICIES","BIZAGI_WORKPORTAL_WIDGET_ADMIN_BUSINESS_POLICIES_DECISION_TABLE","BIZAGI_WORKPORTAL_WIDGET_ADMIN_BUSINESS_POLICIES_RULES","BIZAGI_WORKPORTAL_WIDGET_ADMIN_BUSINESS_POLICIES_TABS","BIZAGI_WORKPORTAL_WIDGET_ADMIN_BUSINESS_POLICIES_POLITICS","BIZAGI_WORKPORTAL_WIDGET_ADMIN_BUSINESS_POLICIES_VOCABULARIES","BIZAGI_WORKPORTAL_WIDGET_ADMIN_LANGUAGE","panelWrapper","generalTemplateListTmpl","fileCultureName","bizagiObjectsList","entitiesListTmpl","BIZAGI_WORKPORTAL_WIDGET_ADMIN_PREFERENCES","defer","BIZAGI_WORKPORTAL_WIDGET_ADMIN_ENTITIES","getFormEntity","deferred","currentGuidForm","guidForm","currentIdRow","idRow","loader","start","then","loadFormEntity","facade","getFacade","getAdminEntitiesForm","responseForm","form","contextType","execute","contexttype","canvas","isEntityForm","formRender","_referrer","_associatedUser","isEmpty","getRender","surrogatekey","overrideFormRender","rendering","configureRefresh","that","_","refreshParams","paramsRefreshForm","getSelectedItem","idPageCache","guid","guidEntity","isStakeholder","dispose","fastEmpty","canvasParent","parent","executionDeferred","state","internalSubmitOnChange","internalSubmitOnChangeEntity","responseSave","reject","processButton","buttonProperties","endLoading","validateForm","saveFormEntity","drawSimpleGrid","defSave","serviceRender","renderValues","collectRenderValues","multiactionService","submitData","type","formError","admin","encrypt","passwords","encrypt.passwords","on","handlePaste","noEmptyFields","equalFields","entry","comparePasswords","encryptString","encryptedPassword","clearData","stopPropagation","clipboardData","originalEvent","window","pastedData","getData","res","target","users","requests","users.requests","users.requests.list","users.requests.detail","users.requests.pagination","users.requests.email","userRequest","userRequestList","userRequestDetail","userRequestpaginationTmpl","userRequestemailTmpl","userRequestListWrapper","userRequestDetailWrapper","LIST","selectedPage","userPendingRequests","renderUserRequestList","authenticationInfo","userId","params_1","userAuthenticationInfo","resultAuthentication","renderUserRequestDetails","requestList","userData","formatInvariantDate","usersRequestsSummaryWrapper","css","noEmptyField","requestDetail","password","enabled","Enabled","isExpired","expired","isLocked","locked","generateRandomPassword","randomPassword","validateKey","generateDataToSendByEmail","showEmailtPopup","updateUser","is","updateUserAuthenticationInfo","messageResponse","doc","document","dialogBoxEmail","buttonsEmail","eMailTo","subject","body","userSecret","getUserSecret","sendUserEmail","closeUploadDialogEmail","dialog","width","modal","buttons","close","resizeStop","event","ui","resize","size","fieldAreEmpty","inputValue","C","CryptoJS","userFormsSpanner","enc","Utf8","userFormsCode","Latin1","resultMain","algo","AES","createEncryptor","mode","CBC","padding","pad","Pkcs7","iv","finalize","Base64","stringify","defaults","assignation","user","defaults.assignation.user","defaults.assignation.user.fields","defaults.assignation.user.search","generalContent","fieldsContent","searchContent","processNavigation","setupData","setupProcessTree","processTree","setupSearchusersButton","treeRoutSelected","setupAssignationToProcess","processtree","authorizationContext","selectedProcessRoute","getTreeRouteSelected","idWfClass","getDefaultAssignationUserToProcess","setupUsersSearchForm","usersTable","userstable","userLinkLabel","parentDef","showBackButton","setParamCanvas","selectedUserId","saveAssignation","startSaveAssignation","setDefaultAssignationUserToProcess","assigned","profiles","user.profiles","user.profiles.fields","user.profiles.table","user.profiles.table.administrator","userProfilesFields","userProfilesTable","userProfilesTableAdministrator","getProfilesTypes","getOrganizationsList","profileTypes","orgList","profileList","comboDefaultValue","setupMainButtons","setupProfileComboEvent","exportToExcel","filterType","profileTypeId","guidValueFilter","profileId","orgId","organizationId","exportToExcelProfiles","searchProfiles","profileName","profileTypeName","text","profileType","setupManageLink","getUserByProfileId","idProfile","getUsersByProfile","userList","list","slice","setupManageButtons","removeUserFromProfile","showConfirmationBox","removed","userGuid","addUserToProfile","getAttribute","optionSelected","change","dimensions","dimensions.administrable","dimensions.properties","dimensions.edit.properties","isInitialLoad","deferGetActiveWFClasses","listContent","detailsContent","detailsEditContent","columnDimensionsAdminWrapper","columnDimensionsPropertiesWrapper","details","setupListProcessPanel1","setupListProcessPanel2","setupMainButtonsleft","setupMainButtonsRight","setupDimensionsPanel1","updatePanel2","getDimensions","$ulListAdmin","$ulListFixed","each","ind2","valu2","$ulList","elementClass","parseBoolean","administrable","guidWfClass","setTimeout","setupDimensionsPanel2","getProcessEntityPath","path","split","getNameEntityPath","shift","join","nameEntityPath","resultfind","description","name","entityPath","fullPath","getActiveWFClasses","processList","WFClasses","ind","valu","ind1","valu1","displayDimensionsById","dimensionId","fillFieldsWithSelectedDimension","isAdmin","displayProcessById","focus","idProcess","Id","makeRequest","cleanDeferGetActiveWFClasses","newDeferGetActiveWFClasses","getOrRequest","newDimensionAdmin","createTmpl","processComboOnChange","unbind","setupPathLink","emptyField","pattern","trim","test","applyDimensionsAdmin","createAdministrableDimension","jQuery","parseJSON","cancelDimensionsAdmin","deleteDimensionsAdmin","deleteDimension","showEditInfo","editTmpl","editDimensionsAdmin","attributeName","editDimension","displayPath","draggable","height","background-color","opacity","setupEntitiesTree","setupEntitiesTreeButtons","entitiesTree","entitiestree","removeAttr","treeRoute","alarms","alarms.task.list","alarms.task.list.item","alarms.task.detail","alarms.task.detail.alarm.editor","alarms.task.detail.list.table","alarms.task.detail.alarm.recipients","alarms.task.detail.alarm.recipients.table","listID","APPLICATION","update","WORKFLOW","VERSION","TASKS","widgetMode","VIEW_MODE","EDIT_MODE","alertData","taskListTmpl","taskListItemTmpl","taskDetailTmpl","taskDetailAlarmEditor","taskListTableTmpl","taskDetailAlarmRecipientsTmpl","taskDetailAlarmRecipientsTableTmpl","initRenderTaskList","getApplicationCategoriesList","renderTaskList","fillTaskListColumnByID","getTaskAlarms","idTask","getLapseMode","getRecurrMode","getScheduleType","getBossList","taskAlarms","lapseModeList","recurrModeList","scheduleTypeList","bossList","alarmRecipientsList","renderTaskDetail","renderTaskListTable","renderAlarmEditor","renderAlarmRecipients","switchWidgetMode","application","workflow","version","task","detailTmpl","detailcnt","callEnableDisableAlarmsService","validateResult","validateAlarmEditor","sendAlarmEditorData","clearSelectedAlarm","resetAlarmEditor","resetAlarmRecipientsTable","formEditorWrapper","alarmEditorData","localizateScheduleType","scheduleType","lapseMode","recurrMode","handleRadioButtonFields","validateInputFields","iType","isUpdate","serviceMethodName","alarmEditorFormWrapper","isCheckBoxOn","idRecurrMode","idLapseMode","alarmTime","alarmRecurrTime","sendToCurrentAssignee","idAlarm","selectedAlarm","refreshTaskListTable","refreshAlarmRecipientsTable","getAlarmRecipients","renderAlarmRecipientsTable","alarmTableListWrapper","alarmList","alarmsList","active","switchEnableAlarms","fillAlarmDetailForm","idalarm","deleteAlarm","checked","isAlarmSelected","alarmRecipientsListWrapper","bosses","currentWidgetMode","idRecipient","addRecipientToAlarm","alarmRecipientsTableWrapper","checkedElements","recipientsIDs","idRecipients","recipients","deleteRecipientsFromAlarm","deletedRecipients","recipientsList","idScheduleType","prop","sendToCurrAssignee","field","fieldValue","isNaN","listName","listObj","taskField","elementList","items","processes","versions","tasks","updateListsContent","listCategory","getListCategoryByID","captureSelectedData","elementToUpdate","getElementToUpdate","processLists","setupParametersbyListID","selectedIndex","resetParametersbyListID","taskListWrapper","currentListID","enableAlarm","licenses","user.licenses","setupButton","licenseType","expirationDate","substring","activeUsers","licensedUsersAccount","customerName","clustered","tabs","open","getAuditLicense","downloadBPUs","url","getUrl","queryParams","getXSRFToken","downloadFile","templates","admin.document.templates","admin.document.templates.upload.template","admin.document.templates.uploaded.templates.list","uploadTemplateTmpl","uploadedTemplatesTmpl","lockedInteractions","config","maxSize","validExtensions","xpath","uploadDialogTemplateName","renderUploadForm","initUploadedTemplates","storeDocumentTemplates","renderUploadedTemplates","templateUploadFormWrapper","dialogTemplate","deviceFactory","cachedFactory","addFormInteractions","getRenderFactory","uploadedTemplateListWrapper","documentTemplates","documentTemplate","Guid","restoreDocumentTemplates","DocumentTemplateRestored","displayMessage","properties","addUrl","idRender","xpathContext","sessionId","maxfiles","filesCount","bizagiUpload","renderReference","idSession","onUploadFileCompletedCallback","ref","maxAllowedFiles","uploadedFiles","dialogTitle","messageData","messageContainer","DocumentTemplateUploaded","PROCESS_DURATION","NAME_LABEL","DESCRIPTION_LABEL","DURATION_LABEL","HOURS_FIELD","MINUTES_FIELD","TASK_DURATION","admin.processes.wrapper","admin.processes.combo.process","admin.processes.proc.edit","admin.processes.task.edit","formType","TASK_FORM","PROCESS_FORM","containersMode","getWorkFlowClasses","processesData","renderSections","processHeaderWrapper","processesMapWrapper","processesComboWrapper","renderProcessesCombo","renderProcessesEditWrapper","loadProcessData","renderTaskEditWrapper","displayTaskEdit","renderProcessViewer","processID","currentSelectedProcessData","bindProcessDetail","getTaskByWorkFlow","processTaskData","filter","viewerPlugin","processviewer","processDefinition","graphicInfo","dfn","info","processTaskDefinition","flowElements","jsonBizagi","processGraphicsInfo","zoomRange","preprocessBindTaskDetail","comboDataSource","combo","uicombo","isEditable","itemValue","itemText","onComplete","onChange","loadSelectedTask","initValue","processEditWrapper","switchFormState","saveProcess","_eventsForTimeFields","taskEditWrapper","saveTask","selectors","correctIntegerInInput","daysAllowed","parseObjectTime","_setValuesAndLabelsText","currentSelectedTaskData","taskId","taskData","getTaskByID","bindTaskDetail","param","shouldShowTaskProperties","durationText","durationHours","durationMinutes","taskID","Tasks","oTask","idTaskType","minValue","maxValue","defaultValue","iNewValue","tryParseInt","str","retValue","String","_getMinutesFrom","container","selector","_hours","_minutes","getMinutesFromTimeUnits","iNewDuration","NaN","modifyProcessDuration","duration","modifyTaskDuration","hours","minutes","objectReference","arrDuration","getTimeArrayFromMinutes","getDurationStringFromMinutes","minutesIn","sDuration","business","policies","admin.business.policies.wrapper","admin.business.policies.content","setupPoliciesTree","tree","decision","table","admin.business.policies.decision.table.wrapper","admin.business.policies.decision.table.content","decisionTableContent","rules","admin.business.policies.rules.wrapper","admin.business.policies.rules.content","admin.business.policies.tabs.wrapper","admin.business.policies.tabs.content","politics","admin.business.policies.politics.wrapper","admin.business.policies.politics.content","language","admin.language.wrapper","admin.language.panel.wrapper","admin.language.template.list","admin.language.upload.file.culturename","admin.language.bizagi.objects.list","admin.language.entities.list","uploadFormTemplateName","cultureName","generalUploadFile","formTemplate1","formTemplate2","formTemplate3","formTemplate4","startTab","initLanguageTemplatesList","initBizagiObjectsList","initEntities","session","isProduction","create","tab","accordion","heightStyle","collapsible","activeTab","handleTabEvents","keyEntityValidation","languageUploadFormWrapper","massiveResourcesUploadFormWrapper","source","languageListWrapper","getStoreLanguageTemplates","sort","b","templateList","languageTemplates","listTitle","downloadTemplateEvent","addUploadMassiveResources","initReset","bizagiObjectsListWrapper","getBizagiObjects","bizagiObjects","bizagiObjectsEvents","readyToDownload","entitiesListWrapper","getEntitiesList","entities","entitiesList","entitiesEvents","keyup","not","expr","FilterEntity","entity","array","RegExp","getEntitiesSelected","entitiesSelected","idEntitiesSelected","item","getObjectsSelected","objectsSelected","valueObjectsSelected","initAllLangs","allLangsEvents","FilterLanguage","modifiedLangs","elValue","saveLangsList","langsObj","languages","setLanguages","errMsgEl","resetEvents","loadingOption","resetPersonalization","notLoading","internalsContainer","extendedContainer","objectsContainer","entitiesContainer","entitiesUrl","defaultUrl","renderUploadPlugin","renderCultureCombo","tabContainer","formTemplate","uploadUrl","responseTarget","bizagiFileUpload","showLoading","alerFailtAfterUpload","validateEntitiesModified","messageKey","handleResponse","onUploadFileFailCallback","onUploadFileProcess","entitiesMessage","detail","comboWrapper","sendBtn","div","errorDetail","listTable","downloadBtn","activeBizagiObjects","activeEntities","extendedObj","elements","getLanguageTemplate","include","langSelected","context","menuSecurity","EntityAdmin","Multilanguage","actionRunning","mainWrapper","preferences","bizagiUserPreferences","bizagiCustomFormats","customFormats","isNewForm","notifier","get","admin.preferences.wrapper","admin.preferences.container","admin.preferences.buttons","admin.preferences.iframe","admin.preferences.error","admin.preferences.properties","iframe","propertiesTmpl","getPreferenceFormParams","renderErrorMessage","renderPreferences","renderPreferencesOldForm","resource","productBuildToAbout","errorContent","$content","endPoint","$iframeContent","$iframe","load","fadeIn","readyDeferred","currentUser","preferencesParams","h_action","h_contexttype","h_guidForm","renderContainer","getPreferencesForm","renderingParams","formValues","getFormPreferencesValues","getFormatValues","formatTime","noPermission","OpenWindowsMaximized","AlwaysCollapseActivitySidebars","ReturnToInboxWhenTasksAreFinished","preferenceForm","handleEvents","updateData","evt","triggerHandler","trigger","updatePreferences","values","getUserPreferences","decimalSeparator","thousandSeparator","overridePreferences","showSucessMessage","getPreferences","collectRenderValuesForSubmit","_startLoading","proxy","getCurrentUser","currentUserData","assignLanguage","changeData","executeRender","typeMessage","always","showLoader","_newDisplay","templateName","entitiesState","actualShowingList","admin.entity.wrapper","admin.entity.panel.wrapper","admin.entity.panel.wrapper-buttons","admin.entity.list","admin.entity.error","_state","setInitialState","panelWrapperButtons","entitiesError","getAdminEntitiesList","entityListWrapper","configureHandlers","notFoundMessage","matchString","el","unwrap","wrap","addButtons","reviewUploadFileState","openLanguageSettingsWidgetDialog","toggle","resizeAdminEntityWrapper","toggleClass","getEntityExcel","downloadLastReport","file","uploadFile","heightButtonWrapper","isEnableFeature","toggleButtonsWrapper","kendoUpload","async","saveUrl","saveField","validation","allowedExtensions","maxFileSize","uploadMaxFileSize","showFileList","multiple","select","upload","isValid","map","files","extension","sender","validateFile","showMessage","success","defaultWidth","widgetParameters","widgetName","closeVisible","maximize","modalParameters","publish","isError","fadeOut","selectedEntity","idDisplayForm","formParams","responseFormDisplay","performSimpleGrid","resolveEntityForm","responseEntity","newResponseEntity","getRenderElements","apply","getValueByType","elmValue","getFormHeaders","headers","attributeType","header","relatedEntity","headerIsAnEntity","headerProperties","guidAttribute","matchHeaderWithXpath","surrogatedKeys","entityObj","row","getSurrogatedKeys","dataRows","queueForms","clone","multiaction","responses","Array","call","arguments","elmKey","getFormDataRows","formDisplay","simpleGridPlugginOptions","allowAdd","allowEdit","orderField","orderType","filters","onDataBinding","args","getCurrentPageToSimpleGrid","setSelectedItem","getAdminEntitiesRowData","reshapeEntity","onLoadFilter","getAdminEntityData","onFilterChanged","onPageChanging","beforePage","newPage","setCurrentPageToSimpleGrid","onAdd","validateVersionForm","onEdit","simpleGrid","$selectedEntity","property","idAddForm","idEditForm","getAdminEntityMigrated","idForm","loadIframeForm","_adjustDataTypeForIdColumn","firstHeader","_isStakeholder","indexElementsAdd","kF","vF","mergeFormAndTable","desabledElement","pop","firstElement","unshift","indexAdd","k","v","newDataRow","renderTable","toUpperCase","currentPageGrid","newIndex","existsLastReport","$link","getAdminEntitiesExistsLastReport","exists","guidEntityLast","showStateUploadingFile","getAdminEntityState","reloadEntitiesListAfterUpload","initialViewUploadEntities","enableUploadButton","reCall","disableUploadButton","getAdminEntitiesDownloadLastReport","admin.stakeholder.panel.wrapper","admin.stakeholder.list","admin.stakeholder.error","stakeholdersList","stakeholdersError","getAdminStakeholdersList","stakeholders","stakeholderListWrapper","$selectedStakeholder","stakeholder","validateUser","selectedStakeholder","associatedUserHasChange","duplicatedUser","resp","confirmationMsg","submitFormData","userChanged","associatedUser","loadedForm","selectedUser","getValue","input","getUserStakeholders","BIZAGI_WORKPORTAL_WIDGET_ADMIN_OAUTH2APPLICATIONS","admin.oauth2applications","admin.edit.oauth2applications","admin.add.oauth2applications","CurrentClientData","contentOauth","allowDelete","allow","orderEnabled","getOAuth2Applications","forEach","hv","responseOauth","namesApplications","Name","keys","addApplication","editApplication","onDelete","deleteApplication","setupAddApplicationEvents","setupCombos","save","cancel","setupUserSuggest","edit","stp","inputDomain","inputUserName","children","proximo","keyCode","upOrDown","clearTimeout","searchUsersOauth","isArray","createOptionsArray","searchNames","direction","focusout","validationAccessTokenInput","accessTokenSelector","isEdit","accessTokenInput","updateSuggest","targets","createOption","reduce","ev","dataGrandType","dataRedirectUri","dataTokenLifetimeType","$comboGrandType","$comboRedirectUri","$comboTokenLifetimeType","setupCombo","initializeOauth2Template","$comboEditGrandType","$comboEditRedirectUri","$comboEditTokenLifetimeType","grantType","scopeLogin","scopeUserSync","scopeODataQuery","scopeRpa","scopeODataRules","elem","dataSelf","RedirectUri","tokenLifetimeType","pos","editGrantType","editRedirectUri","editTokenLifetimeType","comboElements","bizOAuth2UserSyncInput","bizOAuth2ODataQueryInput","bizOAuth2RpaInput","bizOAuth2ODataRulesInput","AllowedScope","editAllowedScope","showErrors","messageToken","dataValidating","prefix","errorsBoard","inputName","findIndex","n","inputDefaultUserDomain","inputDefaultUserName","inputRedirectUri","inputMobileHostPort","Math","floor","parseFloat","inputAccessTokenLifetimeInMinutes","allowedScope","dataAddApplication","dataInputs","serializeArray","createOAuth2Application","getGrantType","authorization_code","client_credentials","any","getRedirectStrategy","WebApplication","MobileTitleBarBrowser","MobileLocalhostPort","getMobileLocalhostPort","uri","strategy","port","match","applicationId","getOAuth2Application","checkedScope","scope","grep","RedirectUriStrategy","AuthorizationGrantType","ActualNameForEdit","DataAllowedScope","TokenLifetimeType","IsNative","updateApplicationKeys","updateNaviteApplication","updateApplication","accessTokenLifetimeInMinutes","updateOAuth2Application","appId","getMessageFromLocalization","jqXHR","textStatus","errorThrown","warn","client_id","ClientId","client_secret","ClientSecret","updateClientSecretKeysOAuth2Application","err","deleteOAuth2Application","cleanData","destroy","BIZAGI_WORKPORTAL_WIDGET_ADMIN_ERROR_LOGS","admin.errorlogs","admin.errorlogs.detail","admin.errorlogs.export","selectedGuids","setupSearchFilter","setupFilterButtons","setupExportButton","setupJSGrid","changeSearchForm","applyFilter","lang","BIZAGI_LANGUAGE","mobiscroll","calendar","controls","cssClass","display","focusTrap","onBeforeShow","inst","getVal","Date","setHours","setMinutes","setSeconds","setVal","onSet","clearSearchForm","resetFilter","startTime","endTime","getTime","jsGrid","getTicks","datetime","offset","getTimezoneOffset","getErrorLogsArchive","ZipContent","showExportDialog","titleId","titleDateTime","titleUser","titleCase","titleNode","titleDescription","noDataContent","dateTimeFormat","autoload","controller","loadData","getErrorLogs","editing","deleteButton","editButton","headerTemplate","clearSelection","itemTemplate","splice","align","getErrorLogsContents","showDetailDialog","paging","pageButtonCount","pageNextText","pagePrevText","pageFirstText","pageLastText","pagerFormat","onPageChanged","onRefreshed","startsWith","locales","locale","DateTime","Content","atob","errorlog","setupBackButton","setupExportDetailButton","currentErrorLogId","Password","setupCopypassButton","setupDownloadButton","setupCancelButton","tooltip","position","my","at","off","execCommand","bytes","numbers","charCodeAt","Uint8Array","blob","Blob","navigator","msSaveOrOpenBlob","URL","createObjectURL","link","createElement","href","download","revokeObjectURL","vocabularies","admin.business.policies.vocabularies.wrapper","admin.business.policies.vocabularies.content","BIZAGI_WORKPORTAL_WIDGET_ADMIN_ASYNC_ACTIVITIES","cases","admin.cases","userTableConf","getOrganizationInfo","skill","location","role","renderSearchCaseForm","searchCasesTemplate","skillInput","searchList","roleInput","locationInput","searchCasesForm","searchCaseFormEventHandler","renderSearchUserForm","totalCases","searchUserTemplate","printf","resources","eventHandlerSearchUserForm","showSearchCaseForm","showSearchUsersForm","searchForm","showConfirmAssignCasesForm","showLoaderAtContainer","searchUsers","closeLoader","updateTotalUsersForm","Number","getCasesSearchParams","skills","locations","roles","reassignCases","showConfirmAssignCasesMessage","span","skillList","roleList","getCasesByOrganization","updateTotalCasesFound","nextChild","dialogBox","after","setCasesSearchParams","caseSearchParams","casesFoundMessageWrapper","userFoundMessageWrapper","createPage","resultLength","tableContent","tableUserTemplate","pagesLength","ceil","tableUsers","tableUsersHandlers","updateTableUsersPager","userListWrapper","anyElementSelected","hover","pageIndex","userTable","caseSearch","CLASSES","SORT_COL_ASC","SORT_COL_DES","SORT_COL_NOT","adhocIds","selectedCaseAdmin","selectedWorkItemAdmin","columnsID","process","processCreationDate","taskDueDate","processDueDate","userfullName","userLocation","admin.case.search","admin.case.search.fields","admin.case.search.button","admin.case.search.result","admin.case.search.pagination","admin.case.search.invalidate","admin.case.search.reassign","admin.case.search.reassign.form","admin.case.search.action.result","admin.case.search.loader","invalidateContentTmpl","reassignContentTmpl","reassignFormTmpl","actionResultContentTmpl","loaderTmpl","defaultMaxRows","showNotifier","svgIcon","closeButton","showConfirmationMessage","invalidateSelectedCase","paramsToInvalidateSelectedCases","initPositionsCombo","getUserPositions","positions","idPosition","renderPositionsCombo","setupCaseSecurity","buttonBackAction","selectedUserName","selectedTasks","selectedTasksToShow","searchParams","processTreeDelete","caseSecurity","disableAbortCases","override","activate","newTab","isOut","getProcessRunningInvalidateCases","timer","casesTabs","bizagiConfig","datepicker","processtreeParams","svgIconsMode","searchKeyResource","newDesign","caseSecurityParams","transfer","security","permissions","assignEventReassignLinks","_showResultAndSort","_sortedBy","order","showCasesSearchResultFrame","Page","getAdminCasesList","isAdhocProcess","caseId","processId","idAdhocProcess","setupActionsButton","_forTemplateClassSortedBy","sortedBy","columnOrder","_CLASSES","_isSorted","_classDirection","disableInvalidate","processedItems","preprocessResultList","groupByCaseNumber","securityGraphicQuery","GraphicQuery","classSortedBy","getRadNumberColumnIndex","l","fieldName","showColumn","columnIndex","createGroupedHeader","rowIndex","radNumber","getRadNumber","invalidateForm","reassignForm","setupActivitiesLink","setupGraphicQueryEvent","selectedItemsPersistence","processResultItem","rowItem","taskElements","taskElementsLength","currentTaskObj","taskColumnIndexLength","rowItemData","idWorkFlow","idParentCase","isSubProcess","isSubprocess","resultArray","firstRowItem","taskColumnIndex","j","resultTaskArray","processTaskObjectUser","processTaskObjectUserFullName","processTaskObject","processTaskObjectDate","estimatedSolutionDate","resultValue","formatValueByDataType","idworkflow","totalTask","taskObject","taskName","colorState","taskType","idWorkItem","skip","assignee","assigneeFullName","invalidateCases","messageConfirmation","selectedCases","dialogClass","minWidth","reason","abortReassignItems","abortResult","showActionResultFrame","showReassignTasksFrame","taskItem","showReassignForm","reassignTasks","idNewUser","reassignResult","itemsFailed","resultStatus","deleted","reassigned","exceptionMessage","innerHTML","idAppToSend","idCategorytoSend","idProcessToSend","numberResults","isNumeric","dateFrom","dateTo","I_ProcessState","h_idApp","I_Users","eventAsTask","group","I_radNumber","I_idWFClass","I_USERNAME","I_USERFULLNAME","I_USERPOSITION","I_From__CreationDate","I_To__CreationDate","h_idWFClassAuth","I_idCategory","I_idApplication","PageSize","isDate","backToMainForm","backToCases","unicode","charCode","getDateInvariantByControlIDSelector","controlIDSelector","paramDate","valueDatePicker","valueSelected","inArray","actions","BIZAGI_WORKPORTAL_ACTION_ROUTING","referrerParams","referrer","defaultWidget","columnOrderId","columnOrderBy","columnOrderName","isAdhoc","showGraphicQuery","idApplication","selectedProcess","postAdminInvalidateCase","last_showSuccessToastInvalidate","getResponseProcessRunningInvalidateCases","status","_showInvalidateMessage","_showForm","showToastError","environment","activities","ASYNC_CHECK_TIMER","selectedTab","admin.async.activities","admin.async.activities.tabs","admin.async.activities.tab1","admin.async.activities.tab2","admin.async.activities.tab3","admin.async.activities.tab4","admin.async.activities.log","admin.async.rpaactivities.log","admin.async.activities.pagination","admin.async.activities.error.page","admin.async.activities.processing","tabsTmpl","tab1Tmpl","tab2Tmpl","tab3Tmpl","tab4Tmpl","logTmpl","rpalogTmpl","paginatorTmpl","errorPage","processingPage","setupTabs","mainContent","loadTabsContent","paramsTab1","paramsTab2","paramsTab3","paramsTab4","renderTab1Table","renderTab2Table","renderTab3Table","renderTab4Table","tableWrapper","asyncActivitiesServices","asyncActRefresh","tab1Content","setupTab1ActivitiesLink","additionalparameters","resultArr","resultRows","idInsertedArr","arrPossition","count","wfClsDisplayName","childs","tskDisplayName","tab2Content","setupTab2ActivitiesLink","getAsynchronousRpaJobs","tab3Content","setupTab3ActivitiesLink","setupTab3ActionsButton","getAsynchronousRpaJobsByTask","tab4Content","setupTab4ActivitiesLink","executeActivity","executed","checkAsycnExecutionState","idAsynchWorkitem","goToCase","showErrorMessage","retryRPAJob","getRetryStatus","counter","getAsynchExecutionState","mainScreen","dinamicScreen","dinamiccontent","top","left","margin-top","margin-left","padding-top","margin-right","max-height","setupErrorPageLink","setupBackToMainPage","showLog","logPage","setupLogButtons","showLogRPA","getRPAActivityLog","enableActivities","enableMultipleActivities","enableRPAActivities","enableRPAJobsByTaskAndProcess","enableMultipleRPAActivities","jobs","enableMultipleRPAJobs","paramsLog","processName","idWorkitem","checkboxes","getElementsByName","vals","idJob","closeErrorMessage","actualWidget","inbox","BIZAGI_WORKPORTAL_WIDGET_INBOX","grid","BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID","isFunction","cookie","wrapper","resizable","errorDialog","allowCreation","userLinks","label","typeSVG","admin.users","admin.users.formbuttons","admin.users.log","admin.users.licenses","admin.users.email","admin.users.anonymize","admin.search.cases","admin.search.users","admin.table.users","BIZAGI_WORKPORTAL_WIDGET_ADMIN_USERS_ADMINISTRATION","user-permission-report","getUserPermissionsExcel","desktop","userPermissionReport","usersAdministration","$userTable","$renderForm","$buttonsContainer","$usersLicenses","queryUserPermissions","renderUsersTable","addEventsHandler","queryLicenses","createUserAdministrationForm","isAllowByLicences","isAllowByReadOnly","createUser","authenticationType","isLdapSyncEnabled","queryUsersLicenses","showLicensesMessage","canAddNewUser","areLicensedUsersLimitNear","resetLogValues","getUsersLogData","renderForm","downloadReport","anonymize","renderFormButtons","returnToUserTable","anonymizeUser","showHideNewUser","getUsersTableData","xhr","object","responseError","processFailMessage","buyLicense","renderLicensesWidgets","createButton","showCloseButton","toggleForm","removeButtons","getUsersAdministrationLog","Pag","renderUserLogTable","getPagesArray","aux","$button","getPages","getLoadFormParams","getUsersForm","userForm","performActionsAfterSave","h_xpathContext","h_optionform","sendMail","formAction","afterSave","excecuteQuery","showEmailPopup","_dialogBoxEmail$dialo","emailConfirmationMessage","logOff","downloadReportUser","descriptionTranslated","fullName","admin.userdelegation","admin.userdelegationListTmpl","admin.userdelegationDeleteConfirmationTmpl","admin.userdelegationFormTmpl","admin.userdelegationEmptyMessageTmpl","BIZAGI_WORKPORTAL_WIDGET_ADMIN_USERS_DELEGATION","BIZAGI_WORKPORTAL_WIDGET_ADMIN_USERS_DELEGATION_SEARCH_USER","usersDelegation","showTable","$delegationFormWrapper","$DelegationListWrapper","tableHeaders","renderDelegationForm","initDelegationTable","userdelegationFormTmpl","startDateWrapper","endDateWrapper","today","minDate","configureProcessCombo","getProcessToDelegate","processComboWrapper","processComponent","setupMultiselector","component","isSearchable","msgPlaceholder","prepend","onComboDropDown","markChoicesMultiselector","inputText","filterOptionsMultiselector","addChoiceMultiselector","matches","editable","itemBody","box-shadow","itemToDelete","indexToRemove","filterData","userdelegationListTmpl","queryDelegations","delegations","delegationList","setUpSortColumnLinks","userdelegationEmptyListTmpl","msg","addTableEventsHandler","delegatedAssignment","selectedDelegation","delegatedName","idDelegate","clearMultiselector","startDate","endDate","openDeleteConfirmation","deleteConfirmationDialog","delegation","detach","deleteDelegation","updateDelegation","saveDelegation","clearForm","searchUser","idDelegation","idsProcess","enableSub","validateSaveUpdateParams","arrayResult","responseJSON","messages","msgs","arr","toString","$canvas","searchUser.form","searchUser.message","searchUser.table.wrapper.final","templateService","getTemplateWidget","markup","usersTableFormTmpl","usersTableMessage","usersTableTmpl","usersTableTmplFinal","currentRoles","currentSkills","currentPositions","currentOrganizations","getPreferencesCurrentUser","sRoles","sSkills","sPositions","sOrganizations","deferreds","getValuesMultiple","allLocations","allRoles","allSkills","allPositions","allOrganizations","locationsComponent","rolesWrapper","rolesComponent","skillsWrapper","skillsComponent","positionsWrapper","positionsComponent","organizationsWrapper","organizationsComponent","setupEventsHandler","getValuesFromCQL","guidRef","displayAttribute","baref","idEntityValue","allKeysToUpperCase","output","current","selectedOption","color","$userForm","localizationArray","localizationSelecction","domainInput","userNameReassignInput","organization","which","submit","cleanForm","getUsersForDelegation","showUsersTable","$wrapperList","$wrapperForm","$breadCrumbResults","tableFinal","Vue","renderBooleanYes","renderBooleanNo","methods","selectUser","dialogStack","currentInboxView","$destroy","BIZAGI_WORKPORTAL_WIDGET_ADMIN_HOLIDAYS","holidaysObj","calendarSelector","activeCalendar","schemas","schema","holidays","holidaysInServer","admin.holidays","admin.holidays.calendar.schema","getHolidaysSchemas","renderHolidaysSchema","_getSchemas","_getDaysBySchema","guidSchema","schemaObj","_calendarHasChanges","isModified","modified","_getChanges","added","actually","_searchDateInSchema","dateObj","date","datesObjA","datesObjB","matchAction","primaryAction","inverseAction","searchIndex","formatDateStringToISO8601","delete","add","dateString","isFormatISO8601","_formatDateFromInvariantToISO8601","saveSchema","saveFromModal","$messageContainer","_saveSchema","showSuccess","showError","changes","startLoading","overlay","saveHolidaysBySchema","encode","_resetSchemaChanges","_changeSchema","$message","holidaysSchemaHandlers","renderHolidaysCalendar","toastr","showWarningMessage","getHolidaysBySchema","dates","showSaveBox","currentYear","getFullYear","datePickerOptions","_datePickerOptions","yearRange","stepMonths","numberOfMonths","defaultDate","onSelect","dateText","_addOrRemoveDate","beforeShowDay","foundDate","_findDate","isEnabled","convertedDate","formatISO8601","_showNotification","notificationType","notification","NotificationMessage","iconType","_NOTIFICATION_ICON_TYPE","CSS","onClick","dateStringInvariant","objDate","getDateFromInvariant","BIZAGI_WORKPORTAL_WIDGET_ADMIN_PROJECTNAME","admin.projectname","getProjectName","projectName","setProjectName","errorObj","smartinbox","adminMode","numberOfSteps","profilesCache","smartinbox-access-tap","smartinbox-access-list","accessTapTemplate","accessListTemplate","dataModel","set","renderProfiles","bizagi_searchMultiSelect","asyncList","getProfiles","access","raw","iconClass","parentPositionElement","parentElementToFitWidth","parentElementToBorder","classOpenedList","classOpenedParent","classItem","SEARCH_MIN_LENGTH","openOnFocus","classMenuList","customRenderItem","ul","term","serviceProfiles","dataModelProfiles","validatedProfiles","modelProfile","serviceProfile","request","getProfilesSmartInbox","checkStepOne","checkStepTwo","checkStepThree","checkStepFour","checkCurrentStep","currentStep","changeStepWizard","closeWizard","masterEditor","renderMasterView","validateWizardAction","nextStep","arrayMessagesErrors","BIZAGI_WORKPORTAL_WIDGET_ADMIN_SMARTINBOX","wizard","smartinboxAdminWizard","admin.smartinbox.wrapper","admin.smartinbox.noinboxes","admin.smartinbox.manage","admin.smartinbox.manage.menu","noFoldersTemplate","manageTemplate","manageMenuTemplate","noinboxesTemplate","indexByRole","getAdminSmartInbox","perm","auxProfiles","isRTL","smartInboxes","onResize","inboxes","srcElement","_showSmartInboxMenu","loadDataDef","$parent","$menuContainer","settingName","settingname","owner","smartInboxId","smartinboxid","of","collision","parameters","actionName","showSmartInboxEditor","selectedInboxData","deleteSmartInbox","storeWidget","homeportal","BIZAGI_WORKPORTAL_WIDGET_HOMEPORTAL","fn","bizagiSearchUser","usersResults","dBox","editingUser","renderFactoryReference","getResourceReference","bindElements","openUploadDialog","showFilters","showButtons","addHandlers","defaultParams","setDefaultParams","_loadResultsTemplate","filtersContainer","displayNames","buttonsContainer","searchButtonName","clearButtonName","allowAddUser","newUserBtn","bizagiCreateUser","renderFactory","onCreate","selectItem","onCancel","clickClearPluginValues","updateFiltersInformation","_loadingList","addTableHandlers","links","buttonSelf","itemSelected","valuesToSelect","$loader","$list","newUser","sendEmail","iduser","widgets-admin-business-polices","generalTmpl","build","clean","polices","bizagiWidget","settings","internalData","formatTypes","attributeSupportFilter","datatype","masterEntity","attributeSupportOrder","getFormatNumber","$item","userLocalizationCloned","auxNumberFormat","decimalDigits","allowdecimals","numDecimals","percentage","thousands","allowDecimals","groupSeparator","initialized","bizagi.simpleGrid.wrapper","bizagi.simpleGrid.content","bizagi.simpleGrid.paginator","filter-wrapper","filter-string","filter-number","filter-date","filter-boolean","panelContent","panelPaginator","renderGrid","auxFilters","filterObject","numRequest","prev","additionallabel","$resultTableContent","guidForms","filterApplied","bigIntHeaders","intHeaders","smallIntHeaders","tinyIntHeaders","booleanHeaders","decimalHeaders","numericHeaders","moneyHeaders","floatHeaders","realHeaders","dateTimeHeaders","arrayDates","scientificNotationHeaders","userLocalization","symbol","tableTr","$column","setAttribute","formatNumber","showSymbol","BIZAGI_DEFAULT_CURRENCY_INFO","formatInvariantMoney","formatInvariantNumber","valuesBoolean","itemBoolean","contentBoolean","oracleNumberList","numberItem","number","scientificNotationFormat","formatTableEntity","$columnFilters","$element","bizagi_filters","filterWrapper","filterString","filterNumber","filterDate","filterBoolean","attribute","_fieldValueCache","tryCatch","idAttribute","displayAttribFilter","entityData","setFilters","idSelected","selectedRow","elementSelected","showRowsEntity","renderPagintation","headersDate","showTime","removeData","selectedUsers","allProcess","haveProcess","admin-case-security-improvement","admin-case-security-improvement-fields","security-improvement-loader","security-improvement-emptyTree","BIZAGI_WORKPORTAL_WIDGET_ADMIN_TRANSFER_CASE_SECURITY_PERMISSIONS","emptyTreeTmpl","emptyTreeText","_defer","setupProcessTreePermissions","byUser","showTitle","processTreePermissions","applicationList","typeOption","initializeTree","showHideClearIcon","transferCaseSecuritypermissions","idUserSource","idUserTarget","quantityModifiedCases","revokeCaseSecuritypermissions","isIE","clearInput"],"mappings":"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","sourcesContent":["function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /**\r\n                                                                                                                                                                                                                                                                                                                                                                                * Admin module to case massively reassign\r\n                                                                                                                                                                                                                                                                                                                                                                                * \r\n                                                                                                                                                                                                                                                                                                                                                                                * @author David Nino, David Romero, Edward J Morales\r\n                                                                                                                                                                                                                                                                                                                                                                                */\nbizagi.workportal.widgets.activity.log.extend(\"bizagi.workportal.widgets.activity.log\", {\n\n  /**\r\n                                                                                           * index for attribute value column data from backend\r\n                                                                                           */\n  ATTR_VALUE_INDEX_COLUMN: {\n    ActivityLog: 2,\n    EntityLog: 1,\n    UserLog: 2 },\n\n\n  /**\r\n                   * string limit length for attribute value to show in table cell, limited by \"M\" Uppercase letter for 3 maximum text lines\r\n                   */\n  ATTR_VALUE_MAX_LENGTH: 89,\n\n  SELECTORS: {\n\n    /**\r\n                * view more button in attribute value table cell\r\n                */\n    ATTR_VALUE_VIEW_MORE: \".activity-log-attribute-value-container > a\",\n\n    /**\r\n                                                                          * detail wrapper for data in activity log\r\n                                                                          */\n    DETAIL_WRAPPER: \"#activity-log-data-detail-wrapper\" } },\n\n{\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n\n    self.totalPages = 0;\n    self.maxRows = 10;\n    self.maxPages = 10;\n    self.currentPage = 1;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    //Load templates\n    self.loadTemplates({\n      \"activity.log\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.activity.log\").concat(\"#ui-bizagi-workportal-widget-activity-log\"),\n      \"activity.log.general.content\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.activity.log\").concat(\"#ui-bizagi-workportal-widget-activity-log-general-content\"),\n      \"activity.log.header\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.activity.log\").concat(\"#ui-bizagi-workportal-widget-activity-log-header\"),\n      \"activity.log.detail.header\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.activity.log\").concat(\"#ui-bizagi-workportal-widget-activity-log-detail-header\"),\n      \"activity.log.detail.content\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.activity.log\").concat(\"#ui-bizagi-workportal-widget-activity-log-detail-content\"),\n      useNewEngine: false });\n\n  },\n  postRender: function postRender() {\n    var self = this;\n\n    //Template vars\n    self.generalContentTmpl = self.getTemplate(\"activity.log.general.content\");\n    self.generalHeaderContentTmpl = self.getTemplate(\"activity.log.header\");\n\n    self.detailHeaderTmpl = self.getTemplate(\"activity.log.detail.header\");\n    self.detailContentTmpl = self.getTemplate(\"activity.log.detail.content\");\n\n    //Set the keys for each type of log, the service for the general table, and detail table\n    self.logCategories = {\n      ACTIVITIES: { id: \"ActivityLog\", serviceMethod: \"getActivityLog\", detailServiceMethod: \"getActivityDetailLog\", selectedDetailId: 0 },\n      ENTITIES: { id: \"EntityLog\", serviceMethod: \"getEntityLog\", detailServiceMethod: \"getEntityDetailLog\", selectedDetailId: 0 },\n      USERS: { id: \"UserLog\", serviceMethod: \"getUserLog\", detailServiceMethod: \"getUserDetailLog\", selectedDetailId: 0 },\n      ADMINISTRATION: { id: \"AdminLog\", serviceMethod: \"getAdminLog\" } };\n\n\n    //Sets the containers id\n    self.containtersID = {\n      GENERAL: \"general\",\n      DETAIL: \"detail\" };\n\n\n    //Creates an instance of render Services\n    var proxyPrefix = _typeof(self.dataService.serviceLocator.proxyPrefix) != undefined ? self.dataService.serviceLocator.proxyPrefix : \"\";\n    var renderServices = new bizagi.render.services.service({ \"proxyPrefix\": proxyPrefix });\n\n    //Gets the case number using the caseId\n    renderServices.getCaseNumber({\n      idCase: self.idCase }).\n    done(function (response) {\n      var caseNumber = response.caseNumber;\n      self.caseNumber = caseNumber ? caseNumber : self.idCase;\n\n      self.initWidget();\n    });\n\n  },\n\n  /*\r\n     *   Init the widgets building each separated element\r\n     */\n  initWidget: function initWidget() {\n\n    var self = this;\n\n    //Hides the \"no results\" message container\n    self.displayNoResults(false);\n\n    //set up the header\n    self.setupHeader();\n  },\n\n  /*\r\n     *   Setup the header using the results from the service supported log types\r\n     */\n  setupHeader: function setupHeader() {\n    var self = this;\n    content = self.getContent();\n\n    var headerWrapper = $(\"#activity-log-data-header-wrapper\", content);\n\n    $.when(self.dataService.supportedLogTypes()).done(function (supportedLogTypesData) {\n\n      //update the log types with the supported ones\n      $.tmpl(self.generalHeaderContentTmpl, { supportedLogTypes: supportedLogTypesData.Supported }).appendTo(headerWrapper);\n\n      //Find the first supported log type\n      var available = self.getFirstAvailableLogTypes(supportedLogTypesData.Supported);\n\n      //Reset  current page\n      self.currentPage = 1;\n\n      //Sends the object with the available log type\n      self.getActivityLogByCategory(self.logCategories[available]);\n\n      //Add the click events from the elements in the header\n      self.bindHeaderElementInteraction($(\"#LnkActivities\", self.content), self.logCategories.ACTIVITIES);\n      self.bindHeaderElementInteraction($(\"#LnkEntities\", self.content), self.logCategories.ENTITIES);\n      self.bindHeaderElementInteraction($(\"#LnkUsers\", self.content), self.logCategories.USERS);\n      self.bindHeaderElementInteraction($(\"#LnkAdmin\", self.content), self.logCategories.ADMINISTRATION);\n    }).fail(function (error) {});\n  },\n\n  /*\r\n     * Uses the supported log types data, finds the first element wich is available\r\n     */\n  getFirstAvailableLogTypes: function getFirstAvailableLogTypes(supportedLogTypesData) {\n    var self = this;\n    for (var att in self.logCategories) {\n      for (var x in supportedLogTypesData) {\n        if (self.logCategories[att].id == x && (supportedLogTypesData[x] == \"true\" || supportedLogTypesData[x] == true)) {\n          return att;\n        }\n      }\n    }\n\n    return \"\";\n  },\n\n  /*\r\n     *   Bind the element interaction with the category which it belongs\r\n     *   @param element (Object) DOM element which is going to be added the click event\r\n     *   @param categoryObj (Object) Log Categories object which have the required elements to call the services and create the template\r\n     */\n  bindHeaderElementInteraction: function bindHeaderElementInteraction(element, categoryObj) {\n    var self = this;\n\n    element.click(function () {\n      if (!$(this).hasClass('active')) {\n\n        $(\".active\", self.content).removeClass('active');\n\n        $(this).addClass('active');\n\n        self.currentPage = 1;\n        self.getActivityLogByCategory(categoryObj);\n      }\n    });\n  },\n\n  /*\r\n     *   Using the categoryOjb, get the service method and call the service to retrieve the log\r\n     *   @param categoryObj (Object) Log Categories object which have the required elements to call the services and create the template\r\n     */\n  getActivityLogByCategory: function getActivityLogByCategory(categoryObj) {\n    var self = this;\n\n    var params = {};\n\n    self.selectedCategoryObj = $.isEmptyObject(categoryObj) ? self.selectedCategoryObj : $.extend({}, categoryObj);\n\n    params = { idCase: self.idCase, idActualPage: self.currentPage, pageSize: self.maxRows };\n\n    var generalWrapper = $(\"#activity-log-data-general-wrapper\", content);\n    generalWrapper.addClass(\"ui-bizagi-component-loading\");\n\n    $.when(self.dataService[self.selectedCategoryObj.serviceMethod](params)).done(function (result) {\n      self.totalPages = result.total;\n      self.generalActivityDataValidator(result);\n    }).fail(function (error) {\n      bizagi.showErrorAlertDialog = false;\n      bizagi.showMessageBox(JSON.parse(error.responseText).message, \"Bizagi\", \"Error\");\n    });\n  },\n\n  /*\r\n     *   Validate the info gathered from the log service, and pre-render to show it in the required way\r\n     *   @param data (Object) Result from the log service\r\n     */\n  generalActivityDataValidator: function generalActivityDataValidator(data) {\n    var self = this,\n    content = self.getContent();\n\n    var generalWrapper = $(\"#activity-log-data-general-wrapper\", content);\n\n    if (data.rows) {\n      //Stores the current data\n      self.currentLogData = [].concat(data.rows);\n    } else {\n      self.currentLogData = [];\n    }\n\n    self.renderContentByCategory();\n  },\n\n  /*\r\n     *   Render the content from the selected log category\r\n     */\n  renderContentByCategory: function renderContentByCategory() {\n    var self = this,\n    content = self.getContent();\n\n    var generalWrapper = $(\"#activity-log-data-general-wrapper\", content);\n\n    var detailWrapper = $(\"#activity-log-data-detail-wrapper\", content);\n\n\n    //Removes the loading class\n    generalWrapper.removeClass(\"ui-bizagi-component-loading\");\n\n    //Clean the content\n    generalWrapper.empty();\n\n    self.switchContent(self.containtersID.GENERAL);\n\n    //Get data for pagination\n    var pagData = self.getPaginationData();\n\n    // Render Form\n    $.tmpl(self.generalContentTmpl, { logCategory: self.selectedCategoryObj.id, idCase: self.caseNumber, logItems: self.currentLogData, pagData: pagData, getIcon: self.getIcon }).appendTo(generalWrapper);\n\n    self.setUpPagination($(\"#biz-wp-activitylog-category-pager ul\", self.content), \"getActivityLogByCategory\");\n\n    //Show/hide the no-result message\n    if (self.currentLogData.length > 0) {\n      self.displayNoResults(false);\n      $(\".activity-log-table\", generalWrapper).show();\n    } else\n    {\n      self.displayNoResults(true);\n      $(\".activity-log-table\", generalWrapper).hide();\n    }\n\n    //Add Interactions\n    $(\".detail-item\", generalWrapper).click(function (e) {\n      e.preventDefault();\n\n      //Stores the Log  Item Index\n      self.selectedLogItemIndex = $($(e.currentTarget).closest(\"tr\")[0]).index() - 1;\n\n      //reset current page\n      self.currentPage = 1;\n\n      self.preprocessDetailRender($(this));\n    });\n\n    $(\".listHeaderLinks\", generalWrapper).click(function (e) {\n      e.preventDefault();\n    });\n  },\n\n  /*\r\n     * Get Pagination Data\r\n     */\n  getPaginationData: function getPaginationData() {\n\n    var self = this;\n    var pagination = self.totalPages > 1 ? true : false;\n\n    var pagData = {\n      page: self.currentPage,\n      pagesArray: [],\n      pagination: pagination };\n\n\n    var pagesToShow = self.maxPages > self.totalPages ? self.totalPages : self.maxPages;\n\n    for (var a = 0; a < pagesToShow; a++) {\n      pagData.pagesArray.push(a + 1);\n    }\n\n    return pagData;\n  },\n\n  /*\r\n     * SetUp Pagination\r\n     */\n  setUpPagination: function setUpPagination($pager, method) {\n\n    var self = this;\n\n    $pager.bizagiPagination({\n      maxElemShow: self.maxRows,\n      totalPages: self.totalPages,\n      actualPage: self.currentPage,\n      listElement: $pager,\n      clickCallBack: function clickCallBack(options) {\n        self.currentPage = parseInt(options.page);\n        self[method]({}, $pager);\n      } });\n\n  },\n\n  /*\r\n     *   Render the content from the selected log item\r\n     */\n  preprocessDetailRender: function preprocessDetailRender(selectedElement) {\n\n    var self = this,\n    content = self.getContent();\n\n    var params = self.getDetailRenderParams(selectedElement);\n\n    //Checks if the selected category have the detail service, and invokes it\n    if (self.selectedCategoryObj.detailServiceMethod) {\n      $.when(self.dataService[self.selectedCategoryObj.detailServiceMethod](params)).done(function (result) {\n\n        self.totalPages = result.total;\n\n        self.switchContent(self.containtersID.DETAIL);\n\n        //Current Log Data\n        if (result.rows) {\n          self.currentDetailLogData = [].concat(result.rows);\n        } else\n        {\n          self.currentDetailLogData = [];\n        }\n\n        self.renderLogDetail(result);\n\n      }).fail(function (error) {});\n    }\n  },\n\n  /*\r\n     * Get Detail Render Params\r\n     */\n  getDetailRenderParams: function getDetailRenderParams(selectedElement) {\n\n    var self = this;\n    var params, selectedDetailId;\n\n    switch (self.selectedCategoryObj.id) {\n      case self.logCategories.ACTIVITIES.id:\n\n        if ($.isEmptyObject(selectedElement)) {\n          selectedDetailId = self.logCategories.ACTIVITIES.selectedDetailId;\n        } else {\n          self.logCategories.ACTIVITIES.selectedDetailId = selectedDetailId = selectedElement.attr('data-id');\n        }\n\n        params = { idCase: self.idCase, idWorkItemFrom: selectedDetailId };\n\n        break;\n\n      case self.logCategories.ENTITIES.id:\n\n        if ($.isEmptyObject(selectedElement)) {\n          selectedDetailId = self.logCategories.ENTITIES.selectedDetailId;\n        } else {\n          self.logCategories.ENTITIES.selectedDetailId = selectedDetailId = selectedElement.attr('data-id');\n        }\n\n        params = { idCase: self.idCase, idEntity: selectedDetailId };\n\n        break;\n\n      case self.logCategories.USERS.id:\n\n        if ($.isEmptyObject(selectedElement)) {\n          selectedDetailId = self.logCategories.USERS.selectedDetailId;\n        } else {\n          self.logCategories.USERS.selectedDetailId = selectedDetailId = selectedElement.attr('data-id');\n        }\n\n        params = { idCase: self.idCase, idUser: selectedDetailId };\n\n        break;}\n\n\n    $.extend(params, { idActualPage: self.currentPage, pageSize: self.maxRows });\n\n    return params;\n  },\n\n  /*\r\n     *   Render the detail from the selected log item\r\n     */\n  renderLogDetail: function renderLogDetail(selectedElementData) {\n    var self = this,\n    content = self.getContent();\n\n    //Template Vars\n    var detailWrapper = $(\"#activity-log-data-detail-wrapper\", content);\n\n    //empty previous content\n    detailWrapper.empty();\n\n    //removes the loading class\n    detailWrapper.removeClass(\"ui-bizagi-component-loading\");\n\n    //render the detail content, including headers and table\n    $.when(self.renderDetailContent()).done(function () {\n      var logFilterWrapper = $(\"#log-filter-wrapper\", content);\n\n      //Show/hide the no-result message\n      self.showDetailResultMessage();\n\n      //Add the interaction handlers\n      $(\"#back-general-content\", detailWrapper).click(function (e) {\n        e.preventDefault();\n        self.displayNoResults(false);\n        self.switchContent(self.containtersID.GENERAL);\n      });\n\n      $(\"#apply-filter\", logFilterWrapper).click(function (e) {\n        e.preventDefault();\n\n        self.currentPage = 1;\n        self.applyDetailFilter();\n      });\n\n      $(\"#remove-filter\", logFilterWrapper).click(function (e) {\n        e.preventDefault();\n\n        //Clean the filter inputs\n        $(\"input\", logFilterWrapper).val(\"\");\n\n        self.currentPage = 1;\n        self.applyDetailFilter();\n      });\n\n      $(\".listHeaderLinks\", detailWrapper).click(function (e) {\n        e.preventDefault();\n      });\n\n      self._eventsDeclare();\n    });\n  },\n\n  /*\r\n     * Show detail result message \r\n     */\n  showDetailResultMessage: function showDetailResultMessage() {\n\n    var self = this;\n    var $detailWrapper = $(\"#activity-log-data-detail-wrapper\", self.getContent());\n\n    if (self.currentDetailLogData.length > 0) {\n      self.displayNoResults(false);\n      $(\".activity-log-table\", $detailWrapper).show();\n    } else\n    {\n      self.displayNoResults(true);\n      $(\".activity-log-table\", $detailWrapper).hide();\n    }\n  },\n\n  /*\r\n     * Apply detail filter\r\n     */\n  applyDetailFilter: function applyDetailFilter() {\n\n    var self = this;\n    var params = self.getFilterParams(),content = self.getContent();\n\n    //Checks if the selected category have the detail service, and invokes it\n    if (self.selectedCategoryObj.detailServiceMethod) {\n      $.when(self.dataService[self.selectedCategoryObj.detailServiceMethod](params)).done(function (result) {\n\n        self.totalPages = result.total;\n\n        //Current Log Data\n        if (result.rows) {\n          self.currentDetailLogData = [].concat(result.rows);\n        } else {\n          self.currentDetailLogData = [];\n        }\n\n        //Get data for pagination\n        var pagData = self.getPaginationData(),\n        renderedTmpl = self._renderDetailContentTmpl(pagData);\n\n        //Remove table\n        $(\"#bz-workportal-activitylog-detailcontent-wrapper\", content).remove();\n        $(renderedTmpl).insertAfter(\"#activity-log-data-detail-header-wrapper\", content);\n\n        //Show/hide the no-result message\n        self.showDetailResultMessage();\n\n        //Set up pagination\n        self.setUpPagination($(\"#biz-wp-activitylog-detail-pager ul\", content), \"applyDetailFilter\");\n        self._eventsDeclare();\n      });\n    }\n\n  },\n\n  /*\r\n     * Get params for the filter\r\n     */\n  getFilterParams: function getFilterParams() {\n\n    var self = this,\n    content = self.getContent(),\n    $logFilterWrapper = $(\"#log-filter-wrapper\", content),\n    params = self.getDetailRenderParams(),\n    userFullName,attribDisplayName,entDisplayName;\n\n    if (self.selectedCategoryObj.id == self.logCategories.ENTITIES.id) {\n      userFullName = $(\"#filterUser\", $logFilterWrapper).val().toLowerCase();\n    } else if (self.selectedCategoryObj.id == self.logCategories.USERS.id) {\n      entDisplayName = $(\"#filterEntity\", $logFilterWrapper).val().toLowerCase();\n    }\n\n    attribDisplayName = $(\"#filterAttribute\", $logFilterWrapper).val().toLowerCase();\n\n    $.extend(params, { userFullName: userFullName, attribDisplayName: attribDisplayName, entDisplayName: entDisplayName });\n\n    return params;\n  },\n\n  /**\r\n      * declare events for activity log results\r\n      */\n  _eventsDeclare: function _eventsDeclare() {\n    var self = this,\n    _SELECTORS = self.Class.SELECTORS,\n    _content = self.getContent(),\n    _detailWrapper = $(_SELECTORS.DETAIL_WRAPPER, _content);\n\n    $(_SELECTORS.ATTR_VALUE_VIEW_MORE, _detailWrapper).click(self._showCompleteAttributeValue);\n  },\n\n  /**\r\n      * render the Detail content\r\n      * @param {JSON} pagData \r\n      */\n  _renderDetailContentTmpl: function _renderDetailContentTmpl(pagData) {\n    var self = this,\n    _params = {\n      logCategory: self.selectedCategoryObj.id,\n      title: self.selectedCategoryObj.title,\n      detailItems: self.currentDetailLogData,\n      pagData: pagData,\n      isAttrValue: self._isAttrValue.bind(self, self.selectedCategoryObj.id),\n      attrValue2show: self._attrValue2show.bind(self),\n      showMoreButton4AttrValue: self._showMoreButton4AttrValue.bind(self) };\n\n\n    return $.tmpl(self.detailContentTmpl, _params);\n  },\n\n  /**\r\n      * shows a modal with the complete attribute value\r\n      * @param {Event} e \r\n      */\n  _showCompleteAttributeValue: function _showCompleteAttributeValue(e) {\n    var _html = $(this).find(\"span\").html();\n    e.preventDefault();\n    bizagi.showSimpleBox(_html, bizagi.localization.getResource(\"workportal-widget-activity-log-table-details-title-attrvalue\"));\n  },\n\n  /**\r\n      * if is the 3th column is attribute value\r\n      * @param {ATTR_VALUE_INDEX_COLUMN} selectedCategoryObjId selected category\r\n      * @param {Int} i col index\r\n      */\n  _isAttrValue: function _isAttrValue(selectedCategoryObjId, i) {\n    var self = this,\n    _position = self.Class.ATTR_VALUE_INDEX_COLUMN[selectedCategoryObjId];\n    if (_position === undefined)\n    console.error(\"_isAttrValue: the selectedCategoryObjId \" + selectedCategoryObjId + \" does not exist\");\n    return i == _position;\n  },\n\n  /**\r\n      * split string for max length in column\r\n      * @param {String} value attribute value to show\r\n      */\n  _attrValue2show: function _attrValue2show(value) {\n    var self = this;\n    return value.substr(0, self.Class.ATTR_VALUE_MAX_LENGTH);\n  },\n\n  /**\r\n      * validate if the view more button is necessary\r\n      * @param {String} value attribute value to show\r\n      */\n  _showMoreButton4AttrValue: function _showMoreButton4AttrValue(value) {\n    var self = this;\n    return value.length > self.Class.ATTR_VALUE_MAX_LENGTH;\n  },\n\n  /*\r\n     *   Renders the detail info from the selected log item\r\n     *   return (Object) returns the promise after processing and attaching to the DOM the detail from the selected log item\r\n     */\n  renderDetailContent: function renderDetailContent() {\n    var self = this,\n    content = self.getContent(),\n    def = $.Deferred();\n\n    //DOM Vars\n    var detailWrapper = $(\"#activity-log-data-detail-wrapper\", content);\n\n    //Get data for pagination\n    var pagData = self.getPaginationData(),\n    _deferHeaderTmpl = $.tmpl(self.detailHeaderTmpl, { logCategory: self.selectedCategoryObj.id, idCase: self.caseNumber, data: self.currentLogData[self.selectedLogItemIndex] }),\n    _deferContentTmpl = self._renderDetailContentTmpl(pagData);\n\n    //append tree to wrapper\n    $.when(_deferHeaderTmpl, _deferContentTmpl).done(function (detailHeaderResult, detailContentResult) {\n\n      detailWrapper.append(detailHeaderResult);\n      detailContentResult.insertAfter(\"#activity-log-data-detail-header-wrapper\", detailWrapper);\n\n      //set up pagination\n      self.setUpPagination($(\"#biz-wp-activitylog-detail-pager ul\", self.content), \"preprocessDetailRender\");\n\n      def.resolve();\n    });\n\n    return def.promise();\n  },\n\n  /*\r\n     *   Switch the view from general view, and detail\r\n     *   @param (string) contentToDisplay : Specifies wich element want to display, the DETAIL view or GENERAL\r\n     */\n  switchContent: function switchContent(contentToDisplay) {\n    var self = this,\n    content = self.getContent();\n\n    var generalWrapper = $(\"#activity-log-data-general-wrapper\", content),\n    detailWrapper = $(\"#activity-log-data-detail-wrapper\", content);\n\n\n    if (self.containtersID.DETAIL == contentToDisplay) {\n      generalWrapper.hide();\n\n      detailWrapper.show();\n    } else {\n      generalWrapper.show();\n\n      detailWrapper.hide();\n    }\n  },\n\n  /*\r\n     * Display the \"no result\" message\r\n     */\n  displayNoResults: function displayNoResults(value) {\n    var self = this,\n    content = self.getContent();\n\n    if (value)\n    $(\"#activity-log-no-results\", content).show();else\n\n    $(\"#activity-log-no-results\", content).hide();\n  },\n\n  /**\r\n      * Return icon to show \r\n      * @param {*} id \r\n      */\n  getIcon: function getIcon(id) {\n    var icons = {\n      allocation: \"bzg-case-allocation\",\n      info: \"bzg-case-allocation-info\",\n      cancelled: \"bzg-case-canceled\" };\n\n    var icon = '';\n    switch (id) {\n      case 1:\n      case 6:\n      case 7:\n      case 1002:\n        icon = icons.allocation;\n        break;\n      case 3:\n      case 4:\n        icon = icons.info;\n        break;\n      case 1001:\n        icon = icons.cancelled;\n        break;}\n\n    return icon;\n  } });\n\n\nbizagi.injector.register('bizagi.workportal.widgets.activity.log', ['workportalFacade', 'dataService', bizagi.workportal.widgets.activity.log], true);","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /**\r\n                                                                                                                                                                                                                                                                                                                                                                                * Document templates widget, for uploading and updating created templates via Bizagi Studio\r\n                                                                                                                                                                                                                                                                                                                                                                                * \r\n                                                                                                                                                                                                                                                                                                                                                                                * @author David Nino\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\n\nbizagi.workportal.widgets.admin.document.templates.extend(\"bizagi.workportal.widgets.admin.document.templates\", {}, {\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    //Load templates\n    self.loadTemplates({\n      \"admin.document.templates\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.admin.document.templates\").concat(\"#ui-bizagi-workportal-widget-admin-document-templates\"),\n      \"admin.document.templates.upload.template\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.admin.document.templates\").concat(\"#ui-bizagi-workportal-widget-admin-document-templates-upload-template\"),\n      \"admin.document.templates.uploaded.templates.list\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.admin.document.templates\").concat(\"#ui-bizagi-workportal-widget-admin-document-templates-uploaded-template-list\"),\n      useNewEngine: false });\n\n  },\n\n  postRender: function postRender() {\n    var self = this;\n\n    //Template vars \n    self.uploadTemplateTmpl = self.getTemplate(\"admin.document.templates.upload.template\");\n    self.uploadedTemplatesTmpl = self.getTemplate(\"admin.document.templates.uploaded.templates.list\");\n\n    self.lockedInteractions = false;\n\n    self.config = {\n      \"maxSize\": \"31457280\",\n      \"validExtensions\": \".bdt\",\n      \"xpath\": \"documentTemplates\",\n      \"uploadDialogTemplateName\": \"upload.template.dialog\" };\n\n\n\n    self.renderUploadForm();\n\n    self.initUploadedTemplates();\n  },\n\n  /*\r\n     *\r\n     */\n  initUploadedTemplates: function initUploadedTemplates() {\n\n    var self = this,\n    content = self.getContent();\n\n    var uploadedTemplateListWrapper = $(\"#uploaded-template-list-wrapper\", content);\n    uploadedTemplateListWrapper.empty();\n\n    $.when(self.dataService.storeDocumentTemplates()).done(function (data) {\n      self.renderUploadedTemplates(data);\n    });\n  },\n\n  /*\r\n     *\r\n     */\n  renderUploadForm: function renderUploadForm() {\n    var self = this,\n    content = self.getContent();\n\n    var templateUploadFormWrapper = $(\"#template-upload-form-wrapper\", content);\n\n    // Render Form\n    $.tmpl(self.uploadTemplateTmpl).appendTo(templateUploadFormWrapper);\n\n    var proxyPrefix = _typeof(self.dataService.serviceLocator.proxyPrefix) != undefined ? self.dataService.serviceLocator.proxyPrefix : \"\";\n    bizagi.loader.start(\"rendering\").then(function () {\n      var facade = new bizagi.rendering.facade({ \"proxyPrefix\": proxyPrefix });\n      self.dialogTemplate = facade.deviceFactory.cachedFactory.getTemplate(self.config[\"uploadDialogTemplateName\"]);\n\n      if (!self.dialogTemplate) {\n        $.when(facade.deviceFactory.getRenderFactory()).done(function () {\n\n          self.dialogTemplate = facade.deviceFactory.cachedFactory.getTemplate(self.config[\"uploadDialogTemplateName\"]);\n\n          self.addFormInteractions();\n        });\n      } else\n\n      self.addFormInteractions();\n    });\n\n\n  },\n\n  /*\r\n     *\r\n     */\n  renderUploadedTemplates: function renderUploadedTemplates(data) {\n    var self = this,\n    content = self.getContent();\n\n    var uploadedTemplateListWrapper = $(\"#uploaded-template-list-wrapper\", content);\n\n    uploadedTemplateListWrapper.empty();\n\n    // Render Form\n    $.tmpl(self.uploadedTemplatesTmpl, { documentTemplates: data.documentTemplate }).appendTo(uploadedTemplateListWrapper);\n\n    $(\".template-to-recover\", uploadedTemplateListWrapper).click(function (e) {\n      e.preventDefault();\n\n      if (!self.lockedInteractions) {\n\n        self.lockedInteractions = true;\n\n        var params = { \"Guid\": $(e.currentTarget).data(\"guid\") };\n\n        $.when(self.dataService.restoreDocumentTemplates(params)).done(function (result) {\n\n          self.lockedInteractions = false;\n\n          if (result.DocumentTemplateRestored) {\n            self.initUploadedTemplates();\n\n            self.displayMessage(result);\n          }\n\n        });\n      }\n    });\n  },\n\n  addFormInteractions: function addFormInteractions() {\n\n    var self = this,\n    content = self.getContent();\n\n    var properties = {};\n\n    properties.addUrl = self.dataService.serviceLocator.getUrl(\"admin-document-templates-uploadDocumentTemplate\");\n    properties.xpath = self.config[\"xpath\"];\n    properties.idRender = \"\";\n    properties.xpathContext = \"\";\n    properties.idPageCache = \"\";\n    properties.sessionId = \"\";\n    properties.validExtensions = self.config[\"validExtensions\"];\n    properties.maxSize = self.config[\"maxSize\"];\n    properties.contexttype = \"\";\n    properties.maxfiles = \"1\";\n    properties.filesCount = \"\";\n\n    var templateUploadFormWrapper = $(\"#template-upload-form-wrapper\", content);\n\n    $(\".ui-bizagi-render-upload-wrapper\", templateUploadFormWrapper).bizagiUpload({\n      renderReference: this,\n      dialogTemplate: self.dialogTemplate,\n      properties: {\n        url: properties.addUrl,\n        xpath: properties.xpath,\n        idRender: properties.idRender,\n        xpathContext: properties.xpathContext,\n        idPageCache: properties.idPageCache,\n        idSession: properties.sessionId,\n        validExtensions: properties.validExtensions,\n        maxSize: properties.maxSize,\n        contexttype: properties.contexttype },\n\n      onUploadFileCompletedCallback: function onUploadFileCompletedCallback(ref, data) {\n        self.displayMessage(JSON.parse(data));\n        self.initUploadedTemplates();\n      },\n      maxAllowedFiles: properties.maxfiles,\n      uploadedFiles: properties.filesCount,\n      dialogTitle: self.getResource(\"render-upload-link-label\") });\n\n  },\n\n  displayMessage: function displayMessage(messageData) {\n    var self = this,\n    content = self.getContent();\n\n    var messageContainer = $(\"#message-container\", content);\n\n    messageContainer.show();\n\n    if (messageData.DocumentTemplateRestored == true) {\n\n      $(\"#template-uploaded\", messageContainer).hide();\n      $(\"#template-recovered\", messageContainer).show();\n      $(\"#template-no-results\", messageContainer).hide();\n    } else\n\n    {\n      if (messageData.DocumentTemplateUploaded == true) {\n        $(\"#template-uploaded\", messageContainer).show();\n        $(\"#template-recovered\", messageContainer).hide();\n        $(\"#template-no-results\", messageContainer).hide();\n\n      } else\n      {\n        $(\"#template-uploaded\", messageContainer).hide();\n        $(\"#template-recovered\", messageContainer).hide();\n        $(\"#template-no-results\", messageContainer).show();\n      }\n    }\n  } });","function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;} /**\r\n                                                                                                                                                                                                            * Name: BizAgi Desktop Widget Administration Processes\r\n                                                                                                                                                                                                            * \r\n                                                                                                                                                                                                            * @author Christian Collazos *\r\n                                                                                                                                                                                                            */\n\n\nbizagi.workportal.widgets.admin.processes.extend(\"bizagi.workportal.widgets.admin.processes\", {\n  SELECTORS: {\n    PROCESS_DURATION: {\n      NAME_LABEL: \"#process-name\",\n      DESCRIPTION_LABEL: \"#process-description\",\n      DURATION_LABEL: \"#process-duration\",\n      HOURS_FIELD: \"#txt-process-duration-edit-hours\",\n      MINUTES_FIELD: \"#txt-process-duration-edit-minutes\" },\n\n    TASK_DURATION: {\n      NAME_LABEL: \"#task-name\",\n      DESCRIPTION_LABEL: \"#task-description\",\n      DURATION_LABEL: \"#task-duration\",\n      HOURS_FIELD: \"#txt-task-duration-edit-hours\",\n      MINUTES_FIELD: \"#txt-task-duration-edit-minutes\" } } }, _defineProperty({\n\n\n\n\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    //Load templates\n    self.loadTemplates({\n      \"admin.processes.wrapper\": bizagi.getTemplate('bizagi.workportal.desktop.widgets.admin.processes').concat('#ui-bizagi-workportal-widget-admin-processes-wrapper'),\n      \"admin.processes.combo.process\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.admin.processes\").concat(\"#ui-bizagi-workportal-widget-admin-processes-combo-process\"),\n      \"admin.processes.proc.edit\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.admin.processes\").concat(\"#ui-bizagi-workportal-widget-admin-processes-process-edit\"),\n      \"admin.processes.task.edit\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.admin.processes\").concat(\"#ui-bizagi-workportal-widget-admin-processes-task-edit\"),\n      useNewEngine: false });\n\n  },\n\n  /*\r\n      * Post Render\r\n      */\n  postRender: function postRender() {\n    var self = this;\n    self.formType = {\n      TASK_FORM: \"task\",\n      PROCESS_FORM: \"process\" };\n\n    self.containersMode = {\n      VIEW_MODE: \"viewMode\",\n      EDIT_MODE: \"editMode\" };\n\n    //Events handlers\n    $.when(self.dataService.getWorkFlowClasses()).done(function (result) {\n      self.processesData = result;\n      self.renderSections();\n    });\n\n  },\n\n  renderSections: function renderSections() {\n    var self = this;\n    var content = self.getContent();\n    var processHeaderWrapper = $(\"#processes-header-wrapper\", self.content);\n    $.tmpl(self.comboProcess).appendTo(processHeaderWrapper);\n    var processesMapWrapper = $(\"#admin-processes-map-wrapper\", self.content);\n    var processesComboWrapper = $(\"#ui-process-name\", self.content);\n    self.renderProcessesCombo(processesComboWrapper);\n    self.renderProcessesEditWrapper();\n    self.loadProcessData(self.processesData.processes.length > 0 ? self.processesData.processes[0].id : \"1\");\n    self.renderTaskEditWrapper();\n    self.displayTaskEdit(false);\n    if (self.processesData.processes.length > 0) {\n      self.renderProcessViewer(processesMapWrapper);\n    } else {\n      $(\"#admin-processes-map-wrapper\", content).remove();\n    }\n  },\n\n  /*\r\n      *\r\n      */\n  loadProcessData: function loadProcessData(processID) {\n    var self = this;\n    var length = self.processesData.processes.length;\n    self.currentSelectedProcessData = {};\n    //Gets the selected process data\n    while (length-- > 0) {\n      if (processID == self.processesData.processes[length].id) {\n        self.currentSelectedProcessData = self.processesData.processes[length];\n        break;\n      }\n    }\n    // self.bindProcessHeader();\n    self.bindProcessDetail();\n    var params = { \"idWorkflow\": processID };\n    $.when(self.dataService.getTaskByWorkFlow(params)).done(function (result) {\n      self.processTaskData = result;\n    });\n  },\n\n  /*\r\n      * Render process viewer\r\n      */\n  renderProcessViewer: function renderProcessViewer(processesMapWrapper) {\n    var self = this;\n    var filter = \"processId=\" + self.currentSelectedProcessData.id;\n    if (self.viewerPlugin) {\n      self.viewerPlugin.processviewer('destroy');\n    }\n    var a = self.dataService;\n    $.when(self.dataService.processDefinition(filter), self.dataService.graphicInfo(filter)).done(function (dfn, info) {\n      self.processTaskDefinition = dfn[0].flowElements;\n      //Initilize plugin process viewer\n      self.viewerPlugin = processesMapWrapper.processviewer({\n        height: 400,\n        width: '100%',\n        jsonBizagi: {\n          processDefinition: dfn[0],\n          processGraphicsInfo: info[0] },\n\n        zoomRange: 5 });\n\n      setTimeout(function () {\n        $(\".processviewer-hotspot\").click(function (e) {\n          e.preventDefault();\n          self.preprocessBindTaskDetail(this.id);\n        });\n      }, 150);\n    });\n  },\n\n  /*\r\n      * Render combo\r\n      */\n  renderProcessesCombo: function renderProcessesCombo(processesComboWrapper) {\n    var self = this;\n    var content = self.getContent();\n    var deferred = $.Deferred();\n    var comboDataSource = { combo: [], id: \"processName\" };\n    $.each(self.processesData.processes, function (index, value) {\n      comboDataSource.combo.push({ id: value.id, name: value.name });\n    });\n    processesComboWrapper.empty();\n    processesComboWrapper.uicombo({\n      isEditable: false,\n      data: comboDataSource,\n      itemValue: function itemValue(obj) {\n        return obj.id;\n      },\n      itemText: function itemText(obj) {\n        return obj.name;\n      },\n      onComplete: function onComplete() {\n        deferred.resolve();\n      },\n      onChange: function onChange(obj) {\n        self.loadProcessData(obj.ui.data('value'));\n        self.loadSelectedTask(obj.ui.data('value'), -1);\n      },\n      initValue: comboDataSource.combo[0] });\n\n    return deferred;\n  },\n\n  /**\r\n      * render process and add events for edit wrapper\r\n      */\n  renderProcessesEditWrapper: function renderProcessesEditWrapper() {\n    var self = this,\n    content = self.getContent(),\n    processEditWrapper = $(\"#process-edit-wrapper\", content),\n    _SELECTORS = self.Class.SELECTORS;\n\n    $.tmpl(self.processEditTmpl).appendTo(processEditWrapper);\n    self.switchFormState(self.formType.PROCESS_FORM, self.containersMode.VIEW_MODE);\n\n    //Events\n    $(\"#btn-process-edit\", processEditWrapper).click(function () {\n      self.switchFormState(self.formType.PROCESS_FORM, self.containersMode.EDIT_MODE);\n    });\n    $(\"#btn-process-apply\", processEditWrapper).click(function () {\n      self.saveProcess();\n      self.switchFormState(self.formType.PROCESS_FORM, self.containersMode.VIEW_MODE);\n    });\n    $(\"#btn-process-cancel\", processEditWrapper).click(function () {\n      self.switchFormState(self.formType.PROCESS_FORM, self.containersMode.VIEW_MODE);\n    });\n    self._eventsForTimeFields(processEditWrapper, _SELECTORS.PROCESS_DURATION);\n  },\n\n  /**\r\n      * render task and add events for edit wrapper\r\n      */\n  renderTaskEditWrapper: function renderTaskEditWrapper() {\n    var self = this,\n    content = self.getContent(),\n    taskEditWrapper = $(\"#task-edit-wrapper\", content),\n    _SELECTORS = self.Class.SELECTORS;\n\n    $.tmpl(self.taskEditTmpl).appendTo(taskEditWrapper);\n    self.switchFormState(self.formType.TASK_FORM, self.containersMode.VIEW_MODE);\n    $(\"#btn-task-edit\", taskEditWrapper).click(function () {\n      self.switchFormState(self.formType.TASK_FORM, self.containersMode.EDIT_MODE);\n    });\n    $(\"#btn-task-apply\", taskEditWrapper).click(function () {\n      self.saveTask();\n      self.switchFormState(self.formType.TASK_FORM, self.containersMode.VIEW_MODE);\n    });\n    $(\"#btn-task-cancel\", taskEditWrapper).click(function () {\n      self.switchFormState(self.formType.TASK_FORM, self.containersMode.VIEW_MODE);\n    });\n    self._eventsForTimeFields(taskEditWrapper, _SELECTORS.TASK_DURATION);\n  },\n\n  /**\r\n      * add events for time fields in Process o Task depends on Selectors in Content\r\n      * @param {JQuery Element} content for hours and minutes field\r\n      * @param {CLASS.SELECTORS} selectors for process or task\r\n      */\n  _eventsForTimeFields: function _eventsForTimeFields(content, selectors) {\n    var self = this;\n    $(selectors.HOURS_FIELD, content).on(\"change\", function (_) {\n      var daysAllowed = 1000,\n      hourField = 23,\n      maxValue = daysAllowed * 24 + hourField;\n      $(this).val(self.correctIntegerInInput($(this).val(), 0, maxValue, 0));\n    });\n    $(selectors.MINUTES_FIELD, content).on(\"change\", function (_) {\n      $(this).val(self.correctIntegerInInput($(this).val(), 0, 59, 0));\n    });\n  },\n\n  /**\r\n      * bind the data for process\r\n      */\n  bindProcessDetail: function bindProcessDetail() {\n    var self = this,\n    content = self.getContent(),\n    processEditWrapper = $(\"#process-edit-wrapper\", content),\n    _SELECTORS = self.Class.SELECTORS;\n\n    self.switchFormState(self.formType.PROCESS_FORM, self.containersMode.VIEW_MODE);\n    //Parse the time\n    self.parseObjectTime(self.currentSelectedProcessData);\n    //Bind data\n    self._setValuesAndLabelsText(processEditWrapper, _SELECTORS.PROCESS_DURATION, self.currentSelectedProcessData);\n\n    //Reset the selected task\n    self.currentSelectedTaskData = undefined;\n    self.displayTaskEdit(false);\n  },\n\n  /*\r\n      *\r\n      */\n  preprocessBindTaskDetail: function preprocessBindTaskDetail(taskId) {\n    var self = this;\n    var taskData = self.getTaskByID(taskId);\n    if (taskData) {\n      self.bindTaskDetail(taskData);\n    } else\n\n    self.displayTaskEdit(false);\n  },\n\n  /**\r\n      * bind the data for task\r\n      */\n  bindTaskDetail: function bindTaskDetail(param) {\n    var self = this,\n    content = self.getContent(),\n    taskEditWrapper = $(\"#task-edit-wrapper\", content),\n    taskData = param,\n    _SELECTORS = self.Class.SELECTORS;\n\n    if (self.shouldShowTaskProperties(taskData)) {\n      self.displayTaskEdit(true);\n      self.switchFormState(self.formType.PROCESS_FORM, self.containersMode.VIEW_MODE);\n      self.switchFormState(self.formType.TASK_FORM, self.containersMode.VIEW_MODE);\n      self.parseObjectTime(taskData);\n      //Keeps the selected task\n      self.currentSelectedTaskData = taskData;\n      //Bind data\n      self._setValuesAndLabelsText(taskEditWrapper, _SELECTORS.TASK_DURATION, self.currentSelectedTaskData);\n    } else\n    {\n      self.currentSelectedTaskData = undefined;\n      self.displayTaskEdit(false);\n    }\n  },\n\n  /**\r\n      * set the values and labels text for selectors in content with the data\r\n      * @param {JQuery Element} content \r\n      * @param {CLASS.SELECTORS} selectors \r\n      * @param {JSON} data \r\n      */\n  _setValuesAndLabelsText: function _setValuesAndLabelsText(content, selectors, data) {\n    $(selectors.NAME_LABEL, content).text(data.name);\n    $(selectors.DESCRIPTION_LABEL, content).text(data.description);\n    $(selectors.DURATION_LABEL, content).text(data.durationText);\n    $(selectors.HOURS_FIELD, content).val(data.durationHours);\n    $(selectors.MINUTES_FIELD, content).val(data.durationMinutes);\n  },\n\n  getTaskByID: function getTaskByID(taskID) {\n    var self = this;\n    var i = self.processTaskData.Tasks.length;\n    while (i-- > 0) {\n      if (taskID == self.processTaskData.Tasks[i].guid) {\n        return self.processTaskData.Tasks[i];\n      }\n    }\n  },\n\n  shouldShowTaskProperties: function shouldShowTaskProperties(oTask) {\n    return oTask.idTaskType && (\n    oTask.idTaskType == 2 //ManualState\n    || oTask.idTaskType == 7 //SubProcess\n    || oTask.idTaskType == 14 //SubProcessMultiInstance\n    || oTask.idTaskType == 21 //Singleton\n    || oTask.idTaskType == 38 //ReceiveTask\n    || oTask.idTaskType == 39 //ManualTask\n    || oTask.idTaskType == 41 //DataObject\n    );\n  },\n\n  /*\r\n      *\r\n      */\n  displayTaskEdit: function displayTaskEdit(value) {\n    var self = this;\n    var content = self.getContent();\n    var taskEditWrapper = $(\"#task-edit-wrapper\", content);\n    if (value)\n    taskEditWrapper.show();else\n\n    taskEditWrapper.hide();\n  },\n  /*\r\n      *\r\n      */\n  switchFormState: function switchFormState(formType, widgetMode) {\n    var self = this;\n    var content = self.getContent();\n    switch (widgetMode) {\n      case self.containersMode.VIEW_MODE:\n        if (formType == self.formType.PROCESS_FORM) {\n          $(\"#process-view-fields-wrapper\", content).show();\n          $(\"#process-edit-fields-wrapper\", content).hide();\n        } else\n\n        if (formType == self.formType.TASK_FORM) {\n          $(\"#task-view-fields-wrapper\", content).show();\n          $(\"#task-edit-fields-wrapper\", content).hide();\n        }\n        break;\n\n      case self.containersMode.EDIT_MODE:\n\n        if (formType == \"process\") {\n          $(\"#process-view-fields-wrapper\", content).hide();\n          $(\"#process-edit-fields-wrapper\", content).show();\n        } else\n\n        if (formType == self.formType.TASK_FORM) {\n          $(\"#task-view-fields-wrapper\", content).hide();\n          $(\"#task-edit-fields-wrapper\", content).show();\n        }\n        break;}\n\n  },\n\n  /*\r\n      *\r\n      */\n  loadSelectedTask: function loadSelectedTask(idWorkflow, idTask) {\n    var self = this;\n    var content = self.getContent();\n    var processesMapWrapper = $(\"#admin-processes-map-wrapper\", self.content);\n    self.renderProcessViewer(processesMapWrapper);\n  },\n\n  /*\r\n      * Fix input value if outside the specified range\r\n      */\n  correctIntegerInInput: function correctIntegerInInput(value, minValue, maxValue, defaultValue) {\n    var self = this;\n    var iNewValue = self.tryParseInt(value, defaultValue);\n    if (iNewValue < minValue)\n    return minValue;else\n    if (iNewValue > maxValue)\n    return maxValue;else\n\n    return iNewValue;\n  },\n\n  /*\r\n      * TryParseInt javascript version\r\n      */\n  tryParseInt: function tryParseInt(str, defaultValue) {\n    var retValue = defaultValue;\n    if (str != null) {\n      if (jQuery.trim(new String(str)).length > 0) {\n        if (!isNaN(str)) {\n          retValue = parseInt(str);\n        }\n      }\n    }\n    return retValue;\n  },\n\n  /**\r\n      * return total minutes from selector in container fields\r\n      * @param {JQuery Element} container \r\n      * @param {CLASS.SELECTORS} selector \r\n      */\n  _getMinutesFrom: function _getMinutesFrom(container, selector) {\n    var self = this,\n    _hours = $(selector.HOURS_FIELD, container).val(),\n    _minutes = $(selector.MINUTES_FIELD, container).val();\n\n    return self.getMinutesFromTimeUnits(_hours, _minutes);\n  },\n\n  /**\r\n      * let to save the process time\r\n      */\n  saveProcess: function saveProcess() {\n    var self = this,\n    content = self.getContent(),\n    processEditWrapper = $(\"#process-edit-wrapper\", content),\n    _SELECTORS = self.Class.SELECTORS,\n    iNewDuration = self._getMinutesFrom(processEditWrapper, _SELECTORS.PROCESS_DURATION);\n\n    var params = {};\n    params[\"idWorkflow\"] = self.currentSelectedProcessData.id;\n    params[\"duration\"] = iNewDuration;\n    if (iNewDuration != NaN) {\n      $.when(self.dataService.modifyProcessDuration(params)).done(function (result) {\n        if (result.workflow) {\n          self.currentSelectedProcessData.duration = result.workflow.duration;\n          self.bindProcessDetail();\n        }\n      });\n    }\n  },\n\n  /**\r\n      * let to save the task time\r\n      */\n  saveTask: function saveTask() {\n    var self = this,\n    content = self.getContent(),\n    taskEditWrapper = $(\"#task-edit-wrapper\", content),\n    _SELECTORS = self.Class.SELECTORS,\n    iNewDuration = self._getMinutesFrom(taskEditWrapper, _SELECTORS.TASK_DURATION);\n\n    var params = {};\n\n    params[\"idTask\"] = self.currentSelectedTaskData.id;\n    params[\"duration\"] = iNewDuration;\n    if (iNewDuration != NaN) {\n      $.when(self.dataService.modifyTaskDuration(params)).done(function (result) {\n        if (result.task) {\n          self.currentSelectedTaskData.duration = result.task.duration;\n          self.bindTaskDetail(self.currentSelectedTaskData);\n        }\n      });\n    }\n  },\n\n  /**\r\n      * Calculate number of minutes based on an array containing hours and minutes\r\n      * @param {String} hours \r\n      * @param {String} minutes \r\n      */\n  getMinutesFromTimeUnits: function getMinutesFromTimeUnits(hours, minutes) {\n    return parseInt(hours) * 60 + parseInt(minutes);\n  },\n\n  /**\r\n      * add duration Time and texto for objectReferenced\r\n      * @param {JSON} objectReference \r\n      */\n  parseObjectTime: function parseObjectTime(objectReference) {\n    var self = this;\n    var arrDuration = self.getTimeArrayFromMinutes(objectReference.duration);\n    objectReference.durationText = self.getDurationStringFromMinutes(objectReference.duration);\n    objectReference.durationHours = arrDuration[0];\n    objectReference.durationMinutes = arrDuration[1];\n  },\n\n  /**\r\n      * Divide a given number of minutes in three values: hours and minutes\r\n      * @param {Number} minutesIn \r\n      */\n  getTimeArrayFromMinutes: function getTimeArrayFromMinutes(minutesIn) {\n    var self = this,\n    minutes = self.tryParseInt(minutesIn, 0),\n    rHours = parseInt(minutes / 60),\n    rMins = minutes % 60;\n\n    return [rHours, rMins];\n  },\n\n  /*\r\n      * Gets a duration string (h:m) from a given number of minutes\r\n      */\n  getDurationStringFromMinutes: function getDurationStringFromMinutes(minutes) {\n    var self = this;\n    var arrDuration = self.getTimeArrayFromMinutes(minutes);\n    var sDuration = arrDuration[0] + bizagi.localization.getResource(\"workportal-widget-processes-field-abreviation-hour\") + \":\";\n    sDuration += arrDuration[1] + bizagi.localization.getResource(\"workportal-widget-processes-field-abreviation-minute\");\n    return sDuration;\n  } }, \"displayTaskEdit\",\n\n\n\n\nfunction displayTaskEdit(value) {\n  var self = this;\n  var content = self.getContent();\n  var taskEditWrapper = $(\"#task-edit-wrapper\", content);\n  if (value)\n  taskEditWrapper.show();else\n\n  taskEditWrapper.hide();\n}));","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /**\r\n                                                                                                                                                                                                                                                                                                                                                                               * Admin module to manage entities\r\n                                                                                                                                                                                                                                                                                                                                                                               * @author Andres Felipe Arenas Vargas, Ricardo Alirio Perez Diaz\r\n                                                                                                                                                                                                                                                                                                                                                                               */\nbizagi.workportal.widgets.admin.entities.extend(\"bizagi.workportal.widgets.admin.entities\", {}, {\n  /**\r\n                                                                                                   * Init constructor\r\n                                                                                                   * @param workportalFacade The workportalFacade to access to all components\r\n                                                                                                   * @param dataService The dataService for making requests\r\n                                                                                                   * @param params Widget Description\r\n                                                                                                   */\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n    var templateName = \"bizagi.workportal.desktop.widgets.admin.entities\";\n    self.entitiesState = [];\n    self.actualShowingList = false;\n    // Call base\n    self._super(workportalFacade, dataService, params);\n    self._referrer = \"entity\";\n    //Load templates\n    self.loadTemplates({\n      \"admin.entity.wrapper\": bizagi.getTemplate(templateName).concat(\"#ui-bizagi-workportal-widget-admin-entity-wrapper\"),\n      \"admin.entity.panel.wrapper\": bizagi.getTemplate(templateName).concat(\"#ui-bizagi-workportal-widget-admin-entity-panel-wrapper\"),\n      \"admin.entity.panel.wrapper-buttons\": bizagi.getTemplate(templateName).concat(\"#ui-bizagi-workportal-widget-admin-entity-panel-wrapper-buttons\"),\n      \"admin.entity.list\": bizagi.getTemplate(templateName).concat(\"#ui-bizagi-workportal-widget-admin-entity-list\"),\n      \"admin.entity.error\": bizagi.getTemplate(templateName).concat(\"#ui-bizagi-workportal-widget-admin-entity-error\"),\n      useNewEngine: false });\n\n\n    // Store\n    self._state = {};\n\n\n    self.setInitialState();\n  },\n  /**\r\n      * Load all the templates\r\n      */\n  loadtemplates: function loadtemplates() {\n    var self = this;\n    self.panelWrapper = $.tmpl(self.getTemplate(\"admin.entity.panel.wrapper\"));\n    self.panelWrapperButtons = self.getTemplate(\"admin.entity.panel.wrapper-buttons\");\n    self.entitiesList = self.getTemplate(\"admin.entity.list\");\n    self.entitiesError = self.getTemplate(\"admin.entity.error\");\n  },\n  /**\r\n      * Renders the content for the current widget\r\n      * Get the list of all parametric entities and display them in the Template\r\n      * If there is an error, display a a message\r\n      */\n  postRender: function postRender() {\n    var self = this;\n    var content = self.getContent();\n    var defer = $.Deferred();\n    content.empty();\n    $.when(self.dataService.getAdminEntitiesList()).\n    done(function (data) {\n      if (data.length > 0) {\n        self.entities = data;\n        var entityListWrapper = $(\"#admin-entity-list-wrapper\", self.panelWrapper);\n\n        content.html(self.panelWrapper);\n        $.tmpl(self.entitiesList, { entitiesList: self.entities }).appendTo(entityListWrapper);\n        $(\"#entitiesList option:first\", entityListWrapper).attr('selected', 'selected');\n\n        self.configureHandlers();\n      } else\n      {\n        var notFoundMessage = self.getResource(\"workportal-general-first-line-no-records-found\");\n        content.html($.tmpl(self.entitiesError, { errorMessage: notFoundMessage }));\n      }\n      defer.resolve();\n    }).\n    fail(function (error) {\n      self.entities = undefined;\n      var errorMessage = self.getResource(\"workportal-widget-admin-entities-error\");\n      content.html($.tmpl(self.entitiesError, { errorMessage: errorMessage }));\n      defer.reject();\n    });\n    return defer.promise();\n  },\n  /**\r\n      * Configure handlers\r\n      */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    var entityListWrapper = $(\"#admin-entity-list-wrapper\", self.panelWrapper);\n\n    //Catch the typed text in the search field and filter the entities list\n    $(\"#searchEntity\", entityListWrapper).keyup(function () {\n      var includeOpt = false;\n      var matchString = $(this).val().toLowerCase();\n\n      $.each(self.entities, function () {\n        var el = $('#entitiesList option[value=\"' + this.guid + '\"]', entityListWrapper);\n        if (matchString.length > 1) {\n          if (this.displayName.toLowerCase().indexOf(matchString) != -1) {\n            if ($(el).parent('span.toggleOption').length) {\n              $(el).unwrap();\n            }\n          } else {\n            if ($(el).parent('span.toggleOption').length == 0) {\n              $(el).wrap('<span class=\"toggleOption\" style=\"display: none;\" />');\n            }\n          }\n        } else {\n          if ($(el).parent('span.toggleOption').length) {\n            $(el).unwrap();\n          }\n        }\n      });\n    });\n    // EntitiesList listener\n    $(\"#entitiesList\", entityListWrapper).change(function () {\n      $('#entitiesList>span>option:selected', self.panelWrapper).prop('selected', false);\n      self.addButtons();\n      self.setInitialState();\n      self.reviewUploadFileState();\n      self.drawSimpleGrid({ page: 1 });\n    }).trigger(\"change\");\n\n    $(\"#bz-btn-language-settings\", entityListWrapper).click(function () {\n      self.openLanguageSettingsWidgetDialog();\n    });\n\n    $(\".button-toggle-manage-entities\", self.panelWrapper).click(function () {\n      $(\".buttons-wrapper\", self.panelWrapper).toggle();\n      self.resizeAdminEntityWrapper();\n      $(\".button-toggle-manage-entities\", self.panelWrapper).toggleClass(\"collapse-arrow\");\n    });\n  },\n\n  /**\r\n     * add buttons to upload excel files\r\n     */\n  addButtons: function addButtons() {\n    var self = this;\n    var wrapperButtons = $(\".buttons-wrapper\", self.panelWrapper);\n    wrapperButtons.html($.tmpl(self.panelWrapperButtons));\n\n    $(\"#downloadButton\", self.panelWrapper).click(function () {\n      self.dataService.getEntityExcel(self.getSelectedItem().guidEntity);\n    });\n    $(\"#admin-entity-main-wrapper .admin-entity-last-report-link\").click(function () {\n      self.downloadLastReport();\n    });\n\n    $(\"#file-upload\", self.panelWrapper).change(function (file) {\n      self.uploadFile(file);\n    });\n\n    $(\"#admin-entity-main-wrapper .admin-entity-last-report-link\").click(function () {\n      self.downloadLastReport();\n    });\n  },\n\n  /**\r\n      * Resize the height of the admin Entity warpper container according to the height to the butoon wrapper container\r\n      */\n  resizeAdminEntityWrapper: function resizeAdminEntityWrapper() {\n    var heightButtonWrapper = $('.manage-entities-container').height() + 12.83;\n    if (!bizagi.util.isEnableFeature(\"enableUploadBatchEntities\")) {\n      heightButtonWrapper = 0;\n      $('.manage-entities-container').hide();\n    }\n    $('#admin-entity-main-wrapper .admin-dialog-rightframe').css('height', 'calc(100% - ' + heightButtonWrapper + 'px)');\n  },\n  /**\r\n     * toggle buttons wrapper\r\n     */\n  toggleButtonsWrapper: function toggleButtonsWrapper() {\n    var self = this;\n    $(\".buttons-wrapper\", self.panelWrapper).toggle();\n  },\n  /**\r\n     * upload an excel file\r\n     */\n  uploadFile: function uploadFile() {\n    var self = this;\n    var guidEntity = self.getSelectedItem().guidEntity;\n    var url = self.dataService.serviceLocator.\n    getUrl(\"admin-entities-upload-excel\").\n    replace(\"{EntityGuid}\", guidEntity).\n    concat(\"?xsrf=\" + bizagi.getXSRFToken());\n    $(\"#file-upload\").kendoUpload({\n      async: {\n        saveUrl: url,\n        saveField: guidEntity },\n\n      validation: {\n        allowedExtensions: [\".xlsx\"],\n        maxFileSize: bizagi.currentUser ? bizagi.currentUser.uploadMaxFileSize : 25000 },\n\n      showFileList: true,\n      multiple: false,\n      select: function select(e) {\n        self.panelWrapper.find(\".k-widget\").hide();\n      },\n      upload: function upload(e) {\n        var isValid = validateFile(e);\n        if (isValid === \"true\") {\n          self.entitiesState[guidEntity] = \"UPLOADING\";\n          self.reviewUploadFileState();\n        } else {\n          self.showMessage(isValid, true);\n          e.preventDefault();\n        }\n      },\n      error: function error() {\n        self.entitiesState[guidEntity] = \"Error\";\n        self.reviewUploadFileState();\n      },\n      success: function success(e) {\n        guidEntity = e.sender.options.async.saveField;\n        self.entitiesState[guidEntity] = \"InProgress\";\n        self.reviewUploadFileState();\n      } });\n\n    function validateFile(e) {\n      return $.map(e.files, function (file) {\n        var errorMessage = \"\";\n        if (file.extension !== e.sender.options.validation.allowedExtensions[0]) {\n          errorMessage = self.getResource(\"render-upload-error-extensions\") + \".\";\n        } else\n\n        if (file.size > e.sender.options.validation.maxFileSize) {\n          errorMessage = self.getResource(\"render-upload-iis-maxsize\") + \".\";\n        }\n        return errorMessage != \"\" ? errorMessage : true;\n      }).join(\", \");\n    }\n  },\n  /**\r\n     * To open the Language Settings widget dialog\r\n     */\n  openLanguageSettingsWidgetDialog: function openLanguageSettingsWidgetDialog() {\n    var self = this;\n    var defaultWidth = $(window).width() - $(window).width() * 15 / 100 + \"px\";\n    var widgetParameters = {\n      widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_LANGUAGE,\n      data: { \"idCase\": \"LanguageAdmin\" },\n      closeVisible: false,\n      maximize: true,\n      modalParameters: {\n        title: self.getResource(\"workportal-menu-submenu-LanguageAdmin\"),\n        width: defaultWidth,\n        id: \"LanguageAdmin\" } };\n\n\n    self.publish(\"showDialogWidget\", widgetParameters);\n  },\n  /**\r\n      * show a message \r\n      */\n  showMessage: function showMessage(message, isError) {\n    var self = this;\n    var icon = '';\n    if (isError) {\n      icon = '<svg  class=\"bz-icon bz-icon-16 bz-icon-svg\"><use xmlns:xlink=\"http://www.w3.org/1999/xlink\" xlink:href=\"#icon-clear-circle\"></use></svg>';\n      $(\"#upload-message\", self.content).removeClass(\"success\");\n      $(\"#upload-message\", self.content).addClass(\"error\");\n    } else {\n      icon = '<svg  class=\"bz-icon bz-icon-16 bz-icon-svg\"><use xmlns:xlink=\"http://www.w3.org/1999/xlink\" xlink:href=\"#check-mark\"></use></svg>';\n      $(\"#upload-message\", self.content).removeClass(\"error\");\n      $(\"#upload-message\", self.content).addClass(\"success\");\n    }\n    $(\"#upload-message\", self.panelWrapper).html(icon + message).css(\"display\", \"block\").fadeIn(\"slow\", self.resizeAdminEntityWrapper);\n    setTimeout(function () {\n      $(\"#upload-message\", self.panelWrapper).fadeOut(\"slow\", self.resizeAdminEntityWrapper);\n    }, 10000);\n  },\n\n  /**\r\n      * Init the simple grid pluggin to display all the instances of the selected entity\r\n      */\n  drawSimpleGrid: function drawSimpleGrid(params) {\n    var self = this;\n    self.actualShowingList = true;\n    var selectedEntity = $.extend(self.getSelectedItem(), params);\n    if (selectedEntity.idDisplayForm && selectedEntity.idDisplayForm != \"00000000-0000-0000-0000-000000000000\") {\n      var formParams = {\n        guid: selectedEntity.guidEntity,\n        guidForm: selectedEntity.idDisplayForm,\n        isStakeholder: false };\n\n      $.when(self.dataService.getAdminEntitiesForm(formParams)).\n      done(function (responseFormDisplay) {\n        self.performSimpleGrid(selectedEntity, responseFormDisplay);\n      });\n    } else\n    {\n      self.performSimpleGrid(selectedEntity);\n    }\n  },\n\n  /**\r\n      * Process entity form\r\n      * @param content\r\n      * @param responseEntity\r\n      * @param responseFormDisplay\r\n      */\n  resolveEntityForm: function resolveEntityForm(responseEntity) {\n    var self = this;\n    var def = new $.Deferred();\n    var newResponseEntity = {};\n    var responseFormDisplay;\n\n    /**\r\n                              * Get render elements within a form\r\n                              * @param elements\r\n                              * @return {Array}\r\n                              */\n    var getRenderElements = function getRenderElements(elements) {\n      var result = [];\n      elements = elements || {};\n\n      $.each(elements, function (key, value) {\n        if (value.container) {\n          result.push.apply(result, getRenderElements(value.container.elements));\n        } else {\n          result.push(value.render.properties);\n        }\n      });\n\n      return result;\n    };\n\n    var headerIsAnEntity = function headerIsAnEntity(header) {\n      var entity = \"\";\n      // Search xpath within responseEntity object and check if it is an entity\n      $.each(responseEntity.header, function (key, value) {\n        if (value.fieldValue == header.xpath && (value.entity || value.relatedEntity)) {\n          entity = value.entity || value.relatedEntity;\n        }\n      });\n\n      return entity;\n    };\n\n    /**\r\n        * Get Value by Type of control\r\n        * @param {object} elmValue \r\n        */\n    this.getValueByType = function (elmValue) {\n      var value = elmValue.value;\n      switch (elmValue.type) {\n        case \"image\":\n        case \"upload\":\n          value = \"...\";\n          break;\n        case \"boolean\":\n          value = elmValue.value ? \"X\" : \"\";\n          break;\n        case \"combo\":\n        case \"cascadingCombo\":\n          if (_typeof(elmValue.value) == \"object\" && elmValue.value.length > 0) {\n            if (_typeof(elmValue.value[0].value) == \"object\") {\n              value = elmValue.value[0].value.join(\",\");\n            } else {\n              value = elmValue.value[0].value;\n            }\n          } else {\n            value = \"\";\n          }\n          break;}\n\n      return value;\n    };\n\n    /**\r\n        * Create headers from a form\r\n        * @param elements\r\n        * @param headers\r\n        * @return {Array}\r\n        */\n    var getFormHeaders = function getFormHeaders(elements, headers) {\n      var result = [];\n      elements = getRenderElements(elements || {});\n\n      $.each(elements, function (key, value) {\n        var attributeType = value.dataType;\n        var entity = headerIsAnEntity(value);\n        var headerProperties = {};\n        switch (value.type) {\n          case \"upload\":\n            attributeType = 1002;\n            break;\n          case \"image\":\n            attributeType = 1003;\n            break;}\n\n\n        headerProperties = $.extend(value, {\n          \"guidAttribute\": matchHeaderWithXpath(headers, value.xpath),\n          \"fieldValue\": value.xpath,\n          \"attributeType\": attributeType });\n\n\n        if (entity) {\n          headerProperties.relatedEntity = entity;\n        }\n\n        result.push(headerProperties);\n      });\n\n      return result;\n    };\n\n    /**\r\n        * find the header with the xpath for return the guidAttribute\r\n        * @param {*} headers \r\n        * @param {*} xpath \r\n        */\n    var matchHeaderWithXpath = function matchHeaderWithXpath(headers, xpath) {\n      var header = headers.filter(function (header) {\n        return xpath == header.fieldValue;\n      });\n      return header.length > 0 ? header[0].guidAttribute : undefined;\n    };\n\n    /**\r\n        * Get all values of a render controls\r\n        * @param surrogatedKeys\r\n        * @return {*}\r\n        */\n    var getFormDataRows = function getFormDataRows(surrogatedKeys) {\n      var def = new $.Deferred();\n      var dataRows = [];\n      var queueForms = [];\n      var selectedEntity = self.getSelectedItem();\n      var formParams = {\n        guid: selectedEntity.guidEntity,\n        guidForm: selectedEntity.idDisplayForm,\n        isStakeholder: false };\n\n      surrogatedKeys = surrogatedKeys || [];\n\n      // If there are not surrogatedKeys, call  getAdminEntitiesForm service\n      // without idRow, just for get headers\n      if (surrogatedKeys.length == 0) {\n        $.when(self.dataService.getAdminEntitiesForm(formParams)).done(function (result) {\n          if (!responseFormDisplay) {\n            responseFormDisplay = result;\n          }\n          // Resolve empty array of rows\n          def.resolve([]);\n        });\n      } else {\n        $.each(surrogatedKeys, function (key, value) {\n          var params = bizagi.clone(formParams);\n          params.idRow = value;\n          queueForms.push(self.dataService.multiaction().getAdminEntitiesForm(params));\n        });\n        // Resolve Queue of deferreds\n        $.when.apply($, queueForms).done(function () {\n          var responses = Array.prototype.slice.call(arguments);\n          $.map(responses, function (response, key) {\n            var responseForm = response;\n            if (!responseFormDisplay) {\n              responseFormDisplay = responseForm;\n            }\n            var elements = getRenderElements(responseForm.form.elements);\n            //Add surrogated key as a first element\n            var surrogatedKey = surrogatedKeys[key];\n            var values = [surrogatedKey];\n\n            $.each(elements, function (elmKey, elmValue) {\n              values.push(self.getValueByType(elmValue));\n            });\n\n            dataRows.push(values);\n\n            if (dataRows.length == surrogatedKeys.length) {\n              def.resolve(dataRows);\n            }\n          });\n        });\n      }\n      return def.promise();\n    };\n\n    /**\r\n        * Get all surrogated keys\r\n        * @param entityObj\r\n        * @return {Array}\r\n        */\n    var getSurrogatedKeys = function getSurrogatedKeys(entityObj) {\n      var surrogatedKeys = [];\n      entityObj = entityObj || {};\n      if (entityObj.row) {\n        $.each(entityObj.row, function (key, value) {\n          // Always the first element is a surrogated key\n          surrogatedKeys.push(value[0]);\n        });\n      }\n      return surrogatedKeys;\n    };\n\n    var surrogatedKeys = getSurrogatedKeys(responseEntity);\n\n    $.when(getFormDataRows(surrogatedKeys)).done(function (dataRows) {\n      // Add surrogatedkey header\n      var headers = [responseEntity.header[0]];\n      headers.push.apply(headers, getFormHeaders(responseFormDisplay.form.elements, responseEntity.header));\n      newResponseEntity = {\n        header: headers,\n        entity: responseEntity.entity,\n        row: dataRows,\n        total: responseEntity.total,\n        page: responseEntity.page,\n        records: responseEntity.records };\n\n      // self.renderTableEntity(content, params, newResponseEntity);\n      def.resolve(newResponseEntity);\n    });\n    return def.promise();\n  },\n\n  performSimpleGrid: function performSimpleGrid(selectedEntity, formDisplay) {\n    var self = this;\n    var simpleGridPlugginOptions = {\n      allowAdd: selectedEntity.allowAdd,\n      allowEdit: selectedEntity.allowEdit,\n      displayName: selectedEntity.displayName,\n      pageSize: 10,\n      page: parseInt(selectedEntity.page) || 1,\n      orderField: selectedEntity.orderField || \"\",\n      orderType: selectedEntity.orderType || \"asc\",\n      filters: selectedEntity.filters,\n      onDataBinding: function onDataBinding(args) {\n        args.pag = args.pag || self.getCurrentPageToSimpleGrid();\n        var def = $.Deferred();\n        if (args.pag) {\n          self.setSelectedItem('page', args.pag);\n        }\n        $.when(self.dataService.getAdminEntitiesRowData($.extend(args, { guidEntity: selectedEntity.guidEntity }))).\n        done(function (responseEntity) {\n          if (selectedEntity.guidEntity != self.getSelectedItem().guidEntity)\n          return;\n          if (formDisplay) {\n            responseEntity.relatedEntity = selectedEntity.guidEntity;\n            var oldResponse = self.reshapeEntity(responseEntity, formDisplay);\n            $.when(self.resolveEntityForm(responseEntity)).done(function (newResponseEntity) {\n              def.resolve(newResponseEntity);\n            });\n          } else {\n            def.resolve(responseEntity);\n          }\n        }).\n        fail(function (error) {\n          var errorMessage = self.getResource(\"workportal-widget-admin-entities-instances-error\");\n          $(\"#admin-entity-instances-wrapper\", self.getContent()).html($.tmpl(self.entitiesError, { errorMessage: errorMessage }));\n        });\n        return def.promise();\n      },\n      onLoadFilter: function onLoadFilter(args) {\n        if (args.type === \"Entity\") {\n          return self.dataService.getAdminEntityData(args);\n        }\n      },\n      onFilterChanged: function onFilterChanged() {\n        self.setInitialState();\n      },\n      onPageChanging: function onPageChanging(beforePage, newPage) {\n        self.setCurrentPageToSimpleGrid(newPage);\n      },\n      onAdd: function onAdd(e, args) {\n        self.validateVersionForm(this, 'New');\n      },\n      onEdit: function onEdit(e, args) {\n        self.validateVersionForm(args, 'Edit');\n      },\n      getResource: function getResource(key) {\n        self.getResource(key);\n      } };\n\n    $(\"#admin-entity-instances-wrapper\", self.panelWrapper).simpleGrid(self, simpleGridPlugginOptions).render();\n  },\n  /**\r\n      * Return all the data of the selected item\r\n      * @return {{guidEntity: *, displayName: *, allowAdd: boolean, allowEdit: boolean}}\r\n      */\n  getSelectedItem: function getSelectedItem() {\n    var self = this;\n    var $selectedEntity = $('#entitiesList option:selected', self.panelWrapper);\n    var params = {\n      guidEntity: $selectedEntity.val(),\n      displayName: $selectedEntity.text(),\n      allowAdd: $selectedEntity.attr(\"data-allowAdd\").toLowerCase() === \"true\" ? true : false,\n      allowEdit: $selectedEntity.attr(\"data-allowEdit\").toLowerCase() === \"true\" ? true : false,\n      idDisplayForm: $selectedEntity.attr(\"data-idDisplayForm\"),\n      page: $selectedEntity.attr(\"data-page\"),\n      row: self.currentIdRow,\n      orderField: $selectedEntity.data(\"orderField\"),\n      orderType: $selectedEntity.data(\"orderType\"),\n      filters: $selectedEntity.data(\"filters\") };\n\n    return params;\n  },\n\n  setSelectedItem: function setSelectedItem(property, value) {\n    var self = this;\n    var $selectedEntity = $('#entitiesList option:selected', self.panelWrapper);\n    $selectedEntity.attr('data-' + property, value);\n  },\n\n  /**\r\n      * Build the correct data to get the form based on the action {Edit, New}\r\n      * If the action is:\r\n      * - New: {guidEntity, guidForm}\r\n      * - Edit: {surrogateKey, guidEntity, guidForm}\r\n      * @param element The selected element\r\n      * @param action The action to perform\r\n      */\n  validateVersionForm: function validateVersionForm(element, action) {\n    var self = this;\n    self.actualShowingList = false;\n    var $selectedEntity = $('#entitiesList option:selected', self.panelWrapper);\n    var entity = self.entities.find(function (e) {return e.guid === $selectedEntity.val();});\n    var params = {\n      guid: $selectedEntity.val() };\n\n    if (action === 'New') {\n      params.guidForm = typeof entity.idAddForm !== \"undefined\" ? entity.idAddForm : \"00000000-0000-0000-0000-000000000000\";\n    } else\n    if (action == 'Edit') {\n      params.idRow = $(element).attr('data-idrowentity');\n      params.guidForm = typeof entity.idEditForm !== \"undefined\" ? entity.idEditForm : \"00000000-0000-0000-0000-000000000000\";\n    }\n\n    //Empty the canvas to render the form\n    $('#detailEntity', self.panelWrapper).empty();\n    if (params.guidForm === \"00000000-0000-0000-0000-000000000000\") {\n      self.getFormEntity(params);\n    } else\n    {\n      $.when(self.dataService.getAdminEntityMigrated(params.guidForm)).done(function (data) {\n        if (data.result == 0 || data.result == 10) {\n          self.getFormEntity(params);\n        } else\n        {\n          if (data.result == -9) {\n            var errorMessage = self.getResource(\"workportal-widget-admin-entities-instances-error\");\n            $(\"#admin-entity-instances-wrapper\", self.getContent()).html($.tmpl(self.entitiesError, { errorMessage: errorMessage }));\n          } else\n          {\n            if (action == 'New') {\n              params.idRow = -1;\n            }\n            var url = 'App/Admin/Entity.aspx?giudEntity=' + params.guid + '&idSurrogateKey=' + params.idRow + '&referer=entityadmin&Action=' + action + '&idForm=' + params.idForm;\n            self.loadIframeForm(url, 'otherForm');\n          }\n        }\n      });\n    }\n  },\n  /**\r\n      * Collect the data changed in the form and save the values\r\n      * @param formRender the Form Rendered\r\n      */\n  saveFormEntity: function saveFormEntity(formRender) {\n    var defSave = $.Deferred();\n    var serviceRender = new bizagi.render.services.service();\n    var renderValues = {};\n\n    formRender.collectRenderValues(renderValues);\n    $.when(serviceRender.multiactionService.submitData({\n      action: \"SAVE\",\n      contexttype: \"entity\",\n      data: renderValues,\n      surrogatekey: typeof formRender.surrogatekey !== \"undefined\" ? formRender.surrogatekey : false,\n      idPageCache: formRender.idPageCache })).\n    done(function (formRender) {\n      if (formRender.type == \"success\") {\n        defSave.resolve(true);\n      } else\n      {\n        defSave.reject();\n      }\n    }).fail(function (formError) {\n      bizagi.showMessageBox(formError.message);\n      defSave.reject();\n    });\n    return defSave.promise();\n  },\n\n  /**\r\n      * if is stakeholder remove filter\r\n      * @param {Boolean} isStakeholder \r\n      * @param {JSON} firstHeader \r\n      * @returns Boolean\r\n      */\n  _adjustDataTypeForIdColumn: function _adjustDataTypeForIdColumn(isStakeholder, firstHeader) {\n    return isStakeholder ? -11 : firstHeader.dataType;\n  },\n\n  //remove elements of the table if exist a display form\n  reshapeEntity: function reshapeEntity(responseEntity, formDisplay) {\n    var self = this;\n    var newResponseEntity = {},\n    _isStakeholder = self._referrer == \"stakeholder\";\n    newResponseEntity.entity = responseEntity.entity;\n    newResponseEntity.page = responseEntity.page;\n    newResponseEntity.records = responseEntity.records;\n    newResponseEntity.total = responseEntity.total;\n    newResponseEntity.header = [];\n    newResponseEntity.row = [];\n    var indexElementsAdd = [];\n    $.each(formDisplay.form.elements, function (kF, vF) {\n      self.mergeFormAndTable(vF, newResponseEntity, indexElementsAdd, responseEntity);\n    });\n    if (_isStakeholder) {\n      indexElementsAdd.push(responseEntity.header.length - 2);\n      newResponseEntity.header.push(responseEntity.header[responseEntity.header.length - 2]);\n    }\n    indexElementsAdd.push(responseEntity.header.length - 1);\n    var desabledElement = responseEntity.header.slice(-1).pop();\n    newResponseEntity.header.push(desabledElement);\n    //validate if first element responseEntity exist in newResponseEntity else add because is subrogate key\n    if (indexElementsAdd.indexOf(0) == -1) {\n      responseEntity.header[0].dataType = self._adjustDataTypeForIdColumn(_isStakeholder, responseEntity.header[0]);\n      var firstElement = responseEntity.header[0];\n      newResponseEntity.header.unshift(firstElement);\n      indexElementsAdd.unshift(0);\n    }\n\n    var indexAdd = 0;\n    $.each(responseEntity.row, function (k, v) {\n      var newDataRow = [];\n      for (var i = 0; i < indexElementsAdd.length; i++) {\n        indexAdd = indexElementsAdd[i];\n        newDataRow[i] = v[indexAdd];\n      }\n      newResponseEntity.row[k] = newDataRow;\n    });\n    return newResponseEntity;\n  },\n\n  renderTable: function renderTable(element, newResponseEntity, indexElementsAdd, responseEntity) {\n    var self = this;\n    if (element.container) {\n      for (var i = 0; i < element.container.elements.length; i++) {\n        self.renderTable(element.container.elements[i], newResponseEntity, indexElementsAdd, responseEntity);\n      }\n    } else\n    {\n      $.each(responseEntity.header, function (index, header) {\n        if (element.render.properties.xpath) {\n          if (element.render.properties.xpath.toUpperCase() == header.fieldValue.toUpperCase()) {\n            //newResponseEntity.header.push(vE);\n\n            newResponseEntity.header.push($.extend(header, element.render.properties));\n            indexElementsAdd.push(index);\n          }\n        }\n      });\n    }\n  },\n\n  mergeFormAndTable: function mergeFormAndTable(element, newResponseEntity, indexElementsAdd, responseEntity) {\n    var self = this;\n    if (element.container) {\n      for (var i = 0; i < element.container.elements.length; i++) {\n        self.renderTable(element.container.elements[i], newResponseEntity, indexElementsAdd, responseEntity);\n      }\n    } else\n    {\n      $.each(responseEntity.header, function (index, header) {\n        if (element.render.properties.xpath) {\n          if (element.render.properties.xpath.toUpperCase() == header.fieldValue.toUpperCase()) {\n            //newResponseEntity.header.push(header);\n            newResponseEntity.header.push($.extend(header, element.render.properties));\n            indexElementsAdd.push(index);\n          }\n        }\n      });\n    }\n  },\n\n  /**\r\n      * Return currentPageGrid\r\n      * @returns {*}\r\n      */\n  getCurrentPageToSimpleGrid: function getCurrentPageToSimpleGrid() {\n    var self = this;\n    return self._state.currentPageGrid;\n  },\n\n  /**\r\n      * Set index page,\r\n      * Initial value = 1. See simpleGrid widget for more details.\r\n      * @param newIndex\r\n      */\n  setCurrentPageToSimpleGrid: function setCurrentPageToSimpleGrid(newIndex) {\n    var self = this;\n    self._state.currentPageGrid = newIndex;\n  },\n\n  /**\r\n      * Set initial state of widget\r\n      */\n  setInitialState: function setInitialState() {\n    var self = this;\n    self.setCurrentPageToSimpleGrid(\"1\");\n  },\n\n  /**\r\n      * validate if the entity has a last report for show download last report link\r\n      */\n  existsLastReport: function existsLastReport() {\n    var self = this;\n    var defer = $.Deferred();\n    var guidEntity = self.getSelectedItem().guidEntity;\n    var $link = $(\".admin-entity-last-report-link\", self.content);\n    $link.hide();\n    $.when(self.dataService.getAdminEntitiesExistsLastReport(guidEntity)).\n    done(function (response) {\n      if (response.exists) $link.show();\n      defer.resolve();\n    });\n    return defer.promise();\n  },\n\n  /**\r\n      * check each x seconds for a specific entity for review the state and show a message\r\n      * @param {string} guidEntityLast if this entities is send is because the method has been recalled but if the user has change the guidEntity selected this method stops\r\n      */\n  reviewUploadFileState: function reviewUploadFileState(guidEntityLast) {\n    var self = this;\n    var guidEntity = self.getSelectedItem().guidEntity;\n    if (guidEntityLast != undefined && guidEntityLast != guidEntity)\n    return false;\n    if (self.entitiesState[guidEntity] === undefined) {\n      self.entitiesState[guidEntity] = true; //default value\n    }\n    self.showStateUploadingFile(self.entitiesState[guidEntity]);\n    if (self.entitiesState[guidEntity] !== \"UPLOADING\") {\n      $.when(self.dataService.getAdminEntityState(guidEntity)).\n      done(function (data) {\n        if (self.entitiesState[guidEntity] == \"InProgress\" && data.state == \"Finished\") {\n          self.reloadEntitiesListAfterUpload(guidEntity);\n          self.showMessage(self.getResource(\"workportal-widget-admin-entities-upload-successful\") + \".\", false);\n        }\n        self.entitiesState[guidEntity] = data.state;\n        if (self.showStateUploadingFile(data.state)) {\n          setTimeout(function () {\n            self.reviewUploadFileState(guidEntity);\n          }, 3000);\n        }\n        self.existsLastReport();\n      });\n    }\n  },\n\n  /**\r\n      * reload the Entities list if has finish upload entities file\r\n      * @param {*} guidEntity \r\n      */\n  reloadEntitiesListAfterUpload: function reloadEntitiesListAfterUpload(guidEntity) {\n    var self = this;\n    var guidEntityActual = self.getSelectedItem().guidEntity;\n    if (guidEntityActual == guidEntity && self.actualShowingList) {\n      self.drawSimpleGrid({\n        page: 1 });\n\n    }\n  },\n\n  /**\r\n      * show the correct state message for entity and return true if is necessary to check the state again\r\n      * @param {string} state (Error|InProgress|UPLOADING|*)\r\n      */\n  showStateUploadingFile: function showStateUploadingFile(state) {\n    var self = this;\n    self.initialViewUploadEntities();\n    self.enableUploadButton();\n    var reCall = true;\n    switch (state) {\n      case \"Error\":\n        var message = self.getResource(\"workportal-widget-admin-entities-upload-error\");\n        self.showMessage(message, true);\n        break;\n      case \"InProgress\":\n        $(\"#entities-message-inProgress\", self.content).css(\"display\", \"block\");\n        self.disableUploadButton();\n        self.resizeAdminEntityWrapper();\n        break;\n      case \"UPLOADING\":\n        $(\"#entities-message-uploading\", self.content).css(\"display\", \"block\");\n        self.disableUploadButton();\n        self.resizeAdminEntityWrapper();\n        break;\n      default:\n        reCall = false;\n        break;}\n\n    return reCall;\n  },\n\n  /**\r\n      * set hide to messages and enable upload button\r\n      */\n  initialViewUploadEntities: function initialViewUploadEntities() {\n    var self = this;\n    $(\"#uploadButton\", self.content).attr(\"disabled\", false);\n    $(\"#entities-message-inProgress\", self.content).hide();\n    $(\"#entities-message-error\", self.content).hide();\n    $(\"#entities-message-uploading\", self.content).hide();\n    self.resizeAdminEntityWrapper();\n  },\n\n  /**\r\n      * set disable upload button\r\n      */\n  disableUploadButton: function disableUploadButton() {\n    $(\"#uploadButton\", self.content).addClass(\"disabled\");\n    $(\"#uploadButton\", self.content).attr(\"for\", \"\");\n    $(\"#uploadButton\", self.content).css(\"cursor\", \"not-allowed\");\n  },\n  /**\r\n      * set enable upload button\r\n      */\n  enableUploadButton: function enableUploadButton() {\n    $(\"#uploadButton\", self.content).removeClass(\"disabled\");\n    $(\"#uploadButton\", self.content).attr(\"for\", \"file-upload\");\n    $(\"#uploadButton\", self.content).css(\"cursor\", \"pointer\");\n  },\n\n  /**\r\n      * download last entity report link\r\n      */\n  downloadLastReport: function downloadLastReport() {\n    var self = this;\n    var guidEntity = self.getSelectedItem().guidEntity;\n    self.dataService.getAdminEntitiesDownloadLastReport(guidEntity);\n  } });","function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;} /**\r\n                                                                                                                                                                                                            *   Name: BizAgi Workportal Desktop Graphic Query\r\n                                                                                                                                                                                                            *   Author: David Romero\r\n                                                                                                                                                                                                            *   Comments:\r\n                                                                                                                                                                                                            *   -   This script renders the cases workflow\r\n                                                                                                                                                                                                            */\nbizagi.workportal.widgets.admin.usersAdministration.extend(\"bizagi.workportal.widgets.admin.usersAdministration\", {}, {\n\n  /**\r\n                                                                                                                         * To be overriden in each device to apply layouts\r\n                                                                                                                         */\n  postRender: function postRender() {\n    var self = this;\n\n    self.dateFormat = self.getResource(\"dateFormat\") + \" \" + self.getResource(\"timeFormat\");\n    self.$userTable = $(\"#bz-wp-widget-adminuser-usertable\", self.content);\n    self.$renderForm = $(\"#bz-wp-widget-adminuser-renderform\", self.content);\n    self.$buttonsContainer = $(\"#bz-wp-widget-adminuser-buttonset\", self.content);\n    self.$usersLicenses = $(\"#bz-wp-widget-adminuser-licenses\", self.content);\n\n    //query licenses\n    $.when(self.queryUserPermissions()).done(function () {\n      //render users table widget\n      self.renderUsersTable();\n    });\n\n    //add event handlers\n    self.addEventsHandler();\n\n    //Notification service\n    self.notifier = bizagi.injector.get('notifier');\n  },\n\n  /**\r\n      * Render user table\r\n      */\n  renderUsersTable: function renderUsersTable() {\n    var self = this;\n    self.usersTable = new bizagi.workportal.widgets.userstable(self.workportalFacade, self.dataService, $.extend(self.params, {\n      canvas: self.$userTable,\n      userLinkLabel: self.userLinks }));\n\n\n    self.usersTable.render();\n  },\n\n  /**\r\n      * Query users permissions\r\n      */\n  queryUserPermissions: function queryUserPermissions() {\n\n    var self = this;\n    var defer = $.Deferred();\n\n    $.when(self.queryLicenses(), self.dataService.createUserAdministrationForm()).done(function (isAllowByLicences, isAllowByReadOnly) {\n      self.allowCreation = !isAllowByLicences || !isAllowByReadOnly[0].createUser || bizagiConfig.authenticationType === \"Ldap\" && bizagiConfig.isLdapSyncEnabled ? false : true;\n      defer.resolve();\n    });\n\n    return defer.promise();\n  },\n\n  /**\r\n      * Query Licenses\r\n      */\n  queryLicenses: function queryLicenses() {\n\n    var self = this;\n    var defer = $.Deferred();\n\n    $.when(self.dataService.queryUsersLicenses()).done(function (response) {\n      self.showLicensesMessage(response);\n      defer.resolve(response.canAddNewUser);\n    });\n\n    return defer.promise();\n  },\n\n  /**\r\n      * show licences\r\n      */\n  showLicensesMessage: function showLicensesMessage(params) {\n\n    var self = this;\n\n    if (!params.canAddNewUser || params.areLicensedUsersLimitNear) {\n\n      var tmpl = self.getTemplate(\"admin.users.licenses\");\n\n      self.$usersLicenses.html($.tmpl(tmpl, { users: params.activeUsers, licenses: params.licensedUsersAccount }));\n    }\n  },\n\n  /**\r\n      * Events Handlers\r\n      */\n  addEventsHandler: function addEventsHandler() {\n    var self = this;\n\n    self.$userTable.on(\"clickUserLink\", function (event, data) {\n\n      self.userData = data;\n\n      switch (data.type) {\n        case \"log\":\n          self.resetLogValues();\n          self.getUsersLogData();\n          break;\n        case \"edition\":self.renderForm();\n          break;\n        case \"downloadReport\":self.downloadReport();\n          break;\n        case \"anonymize\":self.anonymize();\n          break;}\n\n    });\n\n    self.$userTable.on(\"completeUserForm\", function () {\n      self.renderFormButtons(\"query\");\n    });\n\n    self.$userTable.on(\"click\", \"#bz-wp-widget-adminuser-createbutton-wrapper\", function () {\n      self.userData = {};\n      self.renderForm();\n    });\n\n    $(\"#bz-wp-widget-adminuser-buttonset\", self.content).on(\"click\", \"button\", function () {\n      self.returnToUserTable();\n    });\n\n    self.$renderForm.on(\"click\", \"table .sortColumnsData\", function () {\n      var orderField = $(this).data(\"orderfield\");\n      var orderType = $(this).data(\"ordertype\");\n\n      self.getUsersLogData({ \"orderType\": orderType, \"orderField\": orderField });\n    });\n\n\n    // Buttons of anonymize view\n    self.$renderForm.on(\"click\", \"#js-btn-anonymize\", function () {\n      bizagi.showErrorAlertDialog = false;\n      $.when(self.dataService.anonymizeUser(self.userData.id)).done(function (result) {\n        $.when(self.queryUserPermissions()).done(function () {\n          self.showHideNewUser(self.allowCreation);\n          self.notifier.showSucessMessage(\n          printf(bizagi.localization.getResource(\"workportal-general-word-action-successfully\"), \"\"));\n          self.returnToUserTable();\n          self.usersTable.getUsersTableData();\n        });\n      }).fail(function (xhr, object, responseError) {\n        self.notifier.showErrorMessage(\n        printf(bizagi.util.processFailMessage(xhr.responseText), \"\"));\n      });\n    });\n\n    self.$renderForm.on(\"click\", \"#js-btn-anonymize-cancel\", function () {\n      self.returnToUserTable();\n    });\n\n\n    // User Licenses\n\n    self.$usersLicenses.on(\"click\", \"button\", function (event) {\n      var buttonType = $(this).data(\"type\");\n\n      switch (buttonType) {\n        case \"buy\":\n          self.buyLicense();\n          break;\n        case \"licenses\":\n          self.renderLicensesWidgets();\n          break;}\n\n\n      event.stopPropagation();\n    });\n  },\n\n\n  showHideNewUser: function showHideNewUser(allowCreation) {\n    var createButton = $(\"#bz-wp-widget-adminuser-createbutton-wrapper\", self.content);\n    if (allowCreation) {\n      createButton.show();\n    } else\n    {\n      createButton.hide();\n    }\n  },\n\n  /**\r\n      * Reset Log Values\r\n      */\n  resetLogValues: function resetLogValues() {\n    var self = this;\n\n    self.currentPage = 1;\n    self.orderType = \"ASC\";\n    self.orderField = \"\";\n  },\n\n  /**\r\n      * Render licenses\r\n      */\n  renderLicensesWidgets: function renderLicensesWidgets() {\n    var self = this;\n\n    self.publish(\"showDialogWidget\", {\n      widgetName: \"userlicenses\",\n      data: { \"idCase\": \"Licenses\" },\n      modalParameters: {\n        title: self.getResource(\"workportal-menu-submenu-Licenses\"),\n        width: \"907px\",\n        showCloseButton: true,\n        id: \"Licenses\" } });\n\n\n  },\n\n  /**\r\n      * Buy License\r\n      */\n  buyLicense: function buyLicense() {\n    window.open(\"http://www.bizagi.com\", \"_black\");\n  },\n\n  /**\r\n      * Retorn to user table to query users\r\n      */\n  returnToUserTable: function returnToUserTable() {\n    var self = this;\n\n    self.toggleForm(true);\n    self.removeButtons();\n    self.$renderForm.empty();\n  },\n\n  /**\r\n      * Render log\r\n      */\n  getUsersLogData: function getUsersLogData(params) {\n    var self = this;\n    var params = params || {};\n    self.orderType = params.orderType || self.orderType;\n    self.orderField = params.orderField || self.orderField;\n\n    $.when(self.dataService.getUsersAdministrationLog({ \"idUser\": self.userData.id, \"Pag\": self.currentPage, \"pagSize\": self.maxRows, \"orderField\": self.orderField, \"orderType\": self.orderType })).done(function (response) {\n      self.totalPages = response.total;\n      self.renderUserLogTable(response);\n    });\n  },\n\n  /**\r\n      * Remove Buttons\r\n      */\n  removeButtons: function removeButtons() {\n    var self = this;\n    self.$buttonsContainer.empty();\n  },\n\n  /**\r\n      * Render user log table\r\n      */\n  renderUserLogTable: function renderUserLogTable(response) {\n    var self = this;\n    var tmpl = self.getTemplate(\"admin.users.log\");\n    var renderContainer = self.$renderForm;\n    var pagination = self.totalPages > 1;\n    var pagesArray = self.getPagesArray();\n\n    self.toggleForm(false);\n\n    //Render log and change date format\n    var content = $.tmpl(tmpl, response, { \"userName\": self.userData.name, \"page\": self.currentPage, \"pagination\": pagination, \"pagesArray\": pagesArray, \"orderType\": self.orderType, \"orderField\": self.orderField });\n    bizagi.util.formatInvariantDate(content, self.dateFormat);\n    self.$renderForm.html(content);\n\n    self.setUpPagination();\n    self.renderFormButtons(\"back\");\n  },\n\n  /**\r\n      * Set pagination\r\n      */\n  setUpPagination: function setUpPagination() {\n    var self = this;\n    var $pager = $(\"#biz-wp-usersadministration-pager ul\", self.content);\n\n    $pager.bizagiPagination({\n      maxElemShow: self.maxRows,\n      totalPages: self.totalPages,\n      actualPage: self.currentPage,\n      listElement: $pager,\n      clickCallBack: function clickCallBack(options) {\n        self.currentPage = parseInt(options.page);\n        self.getUsersLogData();\n      } });\n\n  },\n\n  /**\r\n      * get array for pages\r\n      */\n  getPagesArray: function getPagesArray() {\n    var self = this;\n    var pagesToShow = self.maxPages > self.totalPages ? self.totalPages : self.maxPages;\n    var aux = [];\n\n    for (var a = 0; a < pagesToShow; a++) {\n      aux.push(a + 1);\n    }\n\n    return aux;\n  },\n\n  /**\r\n      * Render form button\r\n      */\n  renderFormButtons: function renderFormButtons(type) {\n    var self = this;\n    var tmpl = self.getTemplate(\"admin.users.formbuttons\");\n    var $button = $.tmpl(tmpl, { type: type, allowCreation: self.allowCreation });\n\n    if (type === \"query\") {\n      $(\"#bz-wp-widget-adminuser-usertable #users-table-buttonset\", self.content).append($button);\n    } else\n    {\n      self.$buttonsContainer.html($button);\n    }\n  },\n\n  /**\r\n      * Change form display\r\n      */\n  toggleForm: function toggleForm(display) {\n    var self = this;\n\n    switch (display) {\n      case true:\n        self.$userTable.show();\n        self.$renderForm.hide();\n        break;\n      case false:\n        self.$userTable.hide();\n        self.$renderForm.show();\n        break;}\n\n  },\n\n  /**\r\n      * Get Pages\r\n      */\n  getPages: function getPages() {\n    var self = this;\n    var pagesToShow = self.maxPages > self.totalPages ? self.totalPages : self.maxPages;\n    var aux = [];\n\n    for (var a = 0; a < pagesToShow; a++) {\n      aux.push(a + 1);\n    }\n\n    return aux;\n  },\n\n  /**\r\n      * Render form\r\n      */\n  renderForm: function renderForm() {\n\n    var self = this;\n\n    bizagi.loader.start(\"rendering\").then(function () {\n      var renderContainer = self.$renderForm;\n      var rendering = new bizagi.rendering.facade();\n      var userId = self.userData.id || 0;\n      var action = self.userData.id ? \"edit\" : \"add\";\n      var params = self.getLoadFormParams(userId);\n\n      self.toggleForm(false);\n      self.removeButtons();\n\n      //request to queryForm definition service\n      self.dataService.getUsersForm(params).done(function (data) {\n        var renderingParams = { canvas: renderContainer, data: data, type: \"usersForm\", userId: userId, action: action };\n\n        rendering.execute(renderingParams).done(function () {\n          self.userForm = rendering.form;\n\n          self.userForm.bind(\"endUsersForm\", function (event, params) {\n            self.performActionsAfterSave(params);\n          });\n\n        });\n      });\n    });\n  },\n\n  /**\r\n      * Get load form params\r\n      */\n  getLoadFormParams: function getLoadFormParams(userId) {\n    var params = {\n      h_action: \"LOADUSERADMINFORM\",\n      h_contexttype: \"entity\" };\n\n\n    if (userId) {\n      $.extend(params, {\n        h_xpathContext: \"@Context.Users[id == \" + userId + \"]\",\n        h_optionform: \"edit\" });\n\n    } else\n    {\n      $.extend(params, { h_optionform: \"add\" });\n    }\n\n    return params;\n  },\n\n  /**\r\n      * Perform some actions after save\r\n      */\n  performActionsAfterSave: function performActionsAfterSave(params) {\n\n    var self = this;\n    var userId = params.userId || self.userData.id;\n\n    if (params.sendMail && typeof userId !== \"undefined\") {\n      self.sendMail(userId, params.password);\n    }\n\n    if (params.formAction === \"save\" || params.formAction === \"cancel\") {\n      if (typeof self.usersTable != \"undefined\") self.usersTable.afterSave = true;\n      $.when(self.queryUserPermissions()).done(function () {\n        self.usersTable.excecuteQuery();\n        self.showHideNewUser(self.allowCreation);\n        if (!params.error) {\n          self.userForm.endLoading();\n          self.returnToUserTable();\n        }\n\n      });\n    } else {\n      self.returnToUserTable();\n    }\n  },\n\n  /**\r\n      * Sends the mail with password\r\n      */\n  sendMail: function sendMail(userId, password) {\n    var self = this;\n\n    self.dataService.generateDataToSendByEmail({ idUser: userId }).done(function (response) {\n      self.showEmailPopup(response, password);\n    });\n  },\n\n  /**\r\n      * Generate Windows PopupContent email\r\n      */\n  showEmailPopup: function showEmailPopup(messageResponse, password) {var _dialogBoxEmail$dialo;\n\n    var self = this;\n    var doc = window.document;\n\n    var template = self.getTemplate(\"admin.users.email\");\n\n    // Opens a dialog in order to upload Email\n    var dialogBoxEmail = self.dialogBoxEmail = $(\"<div class= admin-users-email/>\");\n    dialogBoxEmail.empty();\n    dialogBoxEmail.appendTo(\"body\", doc);\n\n    // Define buttons\n    var buttonsEmail = {};\n\n    buttonsEmail[self.getResource(\"workportal-widget-admin-users-button-label-send\")] = function () {\n\n      if ($(\"#txtTextTo\", dialogBoxEmail).val() !== \"\") {\n        // Select button Send\n        var params = {\n          eMailTo: $(\"#txtTextTo\", dialogBoxEmail).val(),\n          subject: $(\"#txtSubject\", dialogBoxEmail).val(),\n          body: $(\"#txtBody\", dialogBoxEmail).val(),\n          userSecret: password };\n\n\n        $.when(self.dataService.sendUserEmail(params)).done(function (result) {\n          self.closeUploadDialogEmail();\n          var emailConfirmationMessage = bizagi.localization.getResource(\"workportal-widget-admin-users-Send-message\");\n\n          if (result.logOff && result.logOff == \"false\")\n          emailConfirmationMessage = bizagi.localization.getResource(\"workportal-widget-admin-users-Not-Send-message\");\n\n          bizagi.showMessageBox(emailConfirmationMessage, \"Bizagi\", \"warning\");\n        });\n      } else {\n        bizagi.showMessageBox(bizagi.localization.getResource(\"workportal-widget-admin-users-empty-email-to\"), \"Bizagi\", \"warning\");\n      }\n\n\n    };\n\n    // Cancel button Send\n    buttonsEmail[self.getResource(\"workportal-widget-admin-users-button-label-notSend\")] = function () {\n      self.closeUploadDialogEmail();\n    };\n\n    // Render template\n    messageResponse.body = messageResponse.body.replace(/\\\\n/g, \"\\n\").replace(/\\\\/g, \"\");\n    $.tmpl(template, { messageResponse: messageResponse }).appendTo(dialogBoxEmail);\n    $(\".ui-bizagi-loading-message\").remove();\n\n    //Creates a dialog\n    dialogBoxEmail.dialog((_dialogBoxEmail$dialo = {\n      width: 500,\n      title: self.getResource(\"workportal-widget-admin-users-subtitle-email\"),\n      modal: true,\n      maximize: false,\n      resizable: false,\n      draggable: false,\n      buttons: buttonsEmail,\n      close: function close() {\n        self.closeUploadDialogEmail();\n      },\n      resizeStop: function resizeStop(event, ui) {\n        if (self.form) {\n          self.form.resize(ui.size);\n        }\n      } }, _defineProperty(_dialogBoxEmail$dialo, \"maximize\",\n    function maximize(e) {\n      if (self.userForm) {\n        self.userForm.triggerHandler(\"maximazedForm\");\n      }\n    }), _defineProperty(_dialogBoxEmail$dialo, \"unmaximize\",\n    function unmaximize(e) {\n      if (self.userForm) {\n        self.userForm.triggerHandler(\"unmaximazedForm\");\n      }\n    }), _dialogBoxEmail$dialo));\n\n\n\n  },\n\n  /**\r\n      *\r\n      */\n  closeUploadDialogEmail: function closeUploadDialogEmail() {\n    var self = this;\n    self.dialogBoxEmail.dialog(\"destroy\");\n    self.dialogBoxEmail.remove();\n  },\n\n  /**\r\n      * Download Report of User - GDPR\r\n      */\n  downloadReport: function downloadReport() {\n    var self = this;\n    self.dataService.downloadReportUser(self.userData.id);\n  },\n\n  /**\r\n      * Anonymize User - GDPR\r\n      */\n  anonymize: function anonymize() {\n    var self = this;\n\n    var tmpl = self.getTemplate(\"admin.users.anonymize\");\n    var renderContainer = self.$renderForm;\n    self.toggleForm(false);\n\n    //Render anonymize\n    var descriptionTranslated = bizagi.localization.getResource(\"workportal-gdpr-anonymize-description-sure\").replaceAll('%s', self.userData.fullName);\n    var content = $.tmpl(tmpl, { \"descriptionTranslated\": descriptionTranslated });\n    self.$renderForm.html(content);\n\n    self.renderFormButtons(\"back\");\n  } });","var _bizagi$workportal$wi;function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;} /**\r\n                                                                                                                                                                                                                                      * Extend default wizard with access capabilities \r\n                                                                                                                                                                                                                                      */\nbizagi.workportal.widgets.smartinbox.extend(\"bizagi.workportal.widgets.smartinboxAdminWizard\", {}, {\n\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n    self.adminMode = true;\n    self._super(workportalFacade, dataService, params);\n    self.numberOfSteps = 4;\n    self.profilesCache = {};\n\n    self.loadTemplates({\n      \"smartinbox-access-tap\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.admin.smartinbox\").concat(\"#ui-bizagi-workportal-widget-smartinbox-wizard\"),\n      \"smartinbox-access-list\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.admin.smartinbox\").concat(\"#ui-bizagi-workportal-widget-smartinbox-wizard-access\"),\n      useNewEngine: false });\n\n\n  },\n\n  postRender: function postRender() {\n    var self = this;\n    $.when(self._super()).done(function () {\n      self.content.addClass(\"bz-smartinbox-admin-wizard\");\n      self.accessTapTemplate = self.getTemplate(\"smartinbox-access-tap\");\n      self.accessListTemplate = self.getTemplate(\"smartinbox-access-list\");\n      $.tmpl(self.accessTapTemplate).appendTo($(\".bz-smartinbox-steps\", self.content));\n      $.tmpl(self.accessListTemplate).appendTo($(\".bz-smartinbox-forms\", self.content));\n\n      // Set ownerType\n      self.dataModel.set(\"ownerType\", \"default\");\n    });\n  },\n\n  renderProfiles: function renderProfiles() {\n    var self = this;\n\n    $(\".bz-access-list\", self.content).bizagi_searchMultiSelect({\n      scope: self,\n      asyncList: self.getProfiles,\n      list: {},\n      itemValue: function itemValue(obj) {\n        return obj.value;\n      },\n      itemText: function itemText(obj) {\n        return obj.label || obj.displayName;\n      },\n      onChange: function onChange(data) {\n        var access = [];\n        for (var i = 0; i < data.length; i++) {\n          access.push({\n            displayName: data[i].raw.label,\n            value: data[i].value,\n            type: data[i].raw.type });\n\n        }\n        self.dataModel.set(\"access\", access);\n      },\n      label: \"\",\n      iconClass: \"bz-icon bz-icon-search-outline bz-icon-16\",\n      parentPositionElement: \".bz-access-list > ul\",\n      parentElementToFitWidth: \".bz-access-list\",\n      parentElementToBorder: \".bz-access-list > ul\",\n      classOpenedList: \"bz-processes-search-border-open-list\",\n      classOpenedParent: \"bz-opened\",\n      classItem: \"theme-navigation-border\",\n      SEARCH_MIN_LENGTH: 0,\n      openOnFocus: true,\n      classMenuList: \"ui-smart-inbox\",\n      customRenderItem: function customRenderItem(ul, item) {\n        var type = \"\";\n        if (item.type == \"role\") type = bizagi.localization.getResource(\"workportal-widget-smartinbox-role\", \"Role\");\n        if (item.type == \"usergroup\") type = bizagi.localization.getResource(\"workportal-widget-smartinbox-usergroup\", \"User group\");\n        if (item.type == \"stakeholder\") type = bizagi.localization.getResource(\"workportal-widget-smartinbox-stakeholder\", \"Stakeholder\");\n\n        return $(\"<li>\").\n        append(\n        $(\"<a>\").\n        append(\"<span class='bz-access-name'>\" + (item.label || item.displayName) + \"</span>\").\n        append(\"<span class='bz-access-category'>\" + type + \"</span>\")).\n\n        appendTo(ul);\n      } });\n\n\n    self.getProfiles({ term: \"\" }, function (serviceProfiles) {\n      var dataModelProfiles = self.dataModel.get(\"access\");\n      var validatedProfiles = [];\n      // Validate profiles, in case that the profiles was removed\n      $.each(dataModelProfiles, function (key, modelProfile) {\n        $.each(serviceProfiles, function (i, serviceProfile) {\n          if (modelProfile.value == serviceProfile.value) {\n            validatedProfiles.push(serviceProfile);\n          }\n        });\n      });\n      self.dataModel.set(\"access\", validatedProfiles);\n\n      $(\".bz-access-list\", self.content).bizagi_searchMultiSelect(\"setDataItems\", validatedProfiles);\n    }, this);\n  },\n\n  /**\r\n      * Get profiles from server\r\n      * \r\n      * @param {*} request \r\n      * @param {*} response \r\n      * @param {*} scope \r\n      */\n  getProfiles: function getProfiles(request, response, scope) {\n    if (request.term in scope.profilesCache) {\n      response(scope.profilesCache[request.term]);\n      return;\n    }\n\n    var profiles = [];\n    $.when(scope.dataService.getProfilesSmartInbox(request.term)).done(function (data) {\n      $.grep(data, function (item) {\n        profiles.push({\n          label: item.displayName,\n          value: item.id,\n          type: item.type });\n\n      });\n      scope.profilesCache[request.term] = profiles;\n      response(profiles);\n    });\n  },\n\n  checkStepOne: function checkStepOne() {\n    var self = this;\n    self._super();\n    $(\"#bz-smartinbox-navigate-label4\", self.content).addClass('bz-inactive');\n    $(\"#bz-smartinbox-navigate-label4\", self.content).removeClass('bz-active');\n    $(\"#bz-smartinbox-step4\", self.content).css('display', 'none');\n  },\n\n  checkStepTwo: function checkStepTwo() {\n    var self = this;\n    self._super();\n    $(\"#bz-smartinbox-navigate-label4\", self.content).addClass('bz-inactive');\n    $(\"#bz-smartinbox-navigate-label4\", self.content).removeClass('bz-active');\n    $(\"#bz-smartinbox-step4\", self.content).css('display', 'none');\n  },\n\n  checkStepThree: function checkStepThree() {\n    var self = this;\n    self._super();\n\n    if (!self.editing) {\n      $(\"#bz-btn-smartinbox-back\", self.content).css('display', '');\n      $(\"#bz-btn-smartinbox-next\", self.content).css('display', '');\n      $(\"#bz-btn-smartinbox-create\", self.content).css('display', 'none');\n      $(\"#bz-smartinbox-navigate-label3\", self.content).removeClass('bz-inactive-done');\n    }\n\n    $(\"#bz-smartinbox-navigate-label4\", self.content).addClass('bz-inactive');\n    $(\"#bz-smartinbox-navigate-label4\", self.content).removeClass('bz-active');\n    $(\"#bz-smartinbox-navigate-label3 > span\", self.content).html('3');\n    $(\"#bz-smartinbox-step4\", self.content).css('display', 'none');\n  },\n\n  checkStepFour: function checkStepFour() {\n    var self = this;\n\n    $(\"#bz-btn-smartinbox-back\", self.content).css('display', '');\n    $(\"#bz-btn-smartinbox-next\", self.content).css('display', 'none');\n    $(\"#bz-btn-smartinbox-create\", self.content).css('display', '');\n\n    if (!self.editing) {\n      $(\"#bz-smartinbox-navigate-label1\", self.content).addClass('bz-inactive-done');\n      $(\"#bz-smartinbox-navigate-label3 > span\", self.content).html('<svg style=\"width:16px;height:16px\" xmlns=\"http://www.w3.org/2000/svg\"><use xmlns:xlink=\"http://www.w3.org/1999/xlink\" xlink:href=\"#check-mark\" /></svg>');\n    }\n\n    $(\"#bz-smartinbox-navigate-label1\", self.content).addClass('bz-inactive-done');\n    $(\"#bz-smartinbox-navigate-label1\", self.content).removeClass('bz-active');\n    $(\"#bz-smartinbox-navigate-label2\", self.content).addClass('bz-inactive-done');\n    $(\"#bz-smartinbox-navigate-label2\", self.content).removeClass('bz-active');\n    $(\"#bz-smartinbox-navigate-label3\", self.content).addClass('bz-inactive-done');\n    $(\"#bz-smartinbox-navigate-label3\", self.content).removeClass('bz-active');\n    $(\"#bz-smartinbox-navigate-label4\", self.content).addClass('bz-active');\n    $(\"#bz-smartinbox-navigate-label4\", self.content).removeClass('bz-inactive');\n    $(\"#bz-smartinbox-step1\", self.content).css('display', 'none');\n    $(\"#bz-smartinbox-step2\", self.content).css('display', 'none');\n    $(\"#bz-smartinbox-step3\", self.content).css('display', 'none');\n    $(\"#bz-smartinbox-step4\", self.content).css('display', '');\n\n    self.renderProfiles();\n  },\n\n  checkCurrentStep: function checkCurrentStep() {\n    var self = this;\n\n    $('#bz-smartinbox-current-step-label', self.content).text(self.currentStep);\n    if (self.currentStep == 1) self.checkStepOne();else\n    if (self.currentStep == 2) self.checkStepTwo();else\n    if (self.currentStep == 3) self.checkStepThree();else\n    if (self.currentStep == 4) self.checkStepFour();\n  },\n\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    self._super();\n    if (self.editing) {\n      $(\"#bz-smartinbox-navigate-label4\", self.content).bind(\"click\", function () {self.changeStepWizard(4);});\n    }\n  },\n\n  closeWizard: function closeWizard() {\n    var self = this;\n    self.params.masterEditor.renderMasterView();\n  },\n\n  validateWizardAction: function validateWizardAction(currentStep, nextStep) {\n    var self = this;\n    if (currentStep > nextStep)\n    return true;\n\n    var arrayMessagesErrors = [];\n    var result = self._super(currentStep, nextStep);\n    if (currentStep == 4) {\n      if (bizagi.util.isEmpty(self.dataModel.get(\"access\")) || self.dataModel.get(\"access\") == [])\n      arrayMessagesErrors.push(bizagi.localization.getResource(\"workportal-widget-admin-smartinbox-access-cannot-be-empty\", \"You must select at least one role, user group or stakeholders\"));\n    }\n\n    if (arrayMessagesErrors.length > 0) {\n      $.each(arrayMessagesErrors, function (_, elem) {\n        self.notifier.showErrorMessage(elem);\n      });\n      return false;\n    } else\n\n    return result;\n  } });\n\n\n\n\n/**\r\n         * Smart inbox admininstration window\r\n         * \r\n         * @author Edward Morales\r\n         */\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.smartinboxAdmin\", {}, (_bizagi$workportal$wi = {\n\n  /**\r\n                                                                                                                     * Returns the widget name\r\n                                                                                                                     */\n  getWidgetName: function getWidgetName() {\n    return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_SMARTINBOX;\n  },\n\n  /**\r\n      * Init constructor\r\n      * @param workportalFacade The workportalFacade to access to all components\r\n      * @param dataService The dataService for making requests\r\n      * @param params Widget Description\r\n      */\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n    var templateName = \"bizagi.workportal.desktop.widgets.admin.smartinbox\";\n    params.masterEditor = self;\n\n    // Call base\n    self.wizard = new bizagi.workportal.widgets.smartinboxAdminWizard(workportalFacade, dataService, params);\n    self._super(workportalFacade, dataService, params);\n    //Load templates\n    self.loadTemplates({\n      \"admin.smartinbox.wrapper\": bizagi.getTemplate(templateName).concat(\"#ui-bizagi-workportal-widget-admin-smartinbox\"),\n      \"admin.smartinbox.noinboxes\": bizagi.getTemplate(templateName).concat(\"#ui-bizagi-workportal-widget-admin-smartinbox-noinboxes\"),\n      \"admin.smartinbox.manage\": bizagi.getTemplate(templateName).concat(\"#ui-bizagi-workportal-widget-admin-smartinbox-manage\"),\n      \"admin.smartinbox.manage.menu\": bizagi.getTemplate(templateName).concat(\"#ui-bizagi-workportal-widget-admin-smartinbox-manage-menu\"),\n      useNewEngine: false });\n\n    self.editing = false;\n  } }, _defineProperty(_bizagi$workportal$wi, \"getWidgetName\",\n\n\n\n\nfunction getWidgetName() {\n  return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_SMARTINBOX;\n}), _defineProperty(_bizagi$workportal$wi, \"renderContent\",\n\n\n\n\n\nfunction renderContent() {\n  var self = this;\n  var template = self.getTemplate(\"admin.smartinbox.wrapper\");\n  self.noFoldersTemplate = self.getTemplate(\"admin.smartinbox.nofolders\");\n  self.manageTemplate = self.getTemplate(\"admin.smartinbox.manage\");\n  self.manageMenuTemplate = self.getTemplate(\"admin.smartinbox.manage.menu\");\n  self.noinboxesTemplate = self.getTemplate(\"admin.smartinbox.noinboxes\");\n\n  var content = self.content = $.tmpl(template);\n\n  return content;\n}), _defineProperty(_bizagi$workportal$wi, \"renderMasterView\",\n\nfunction renderMasterView() {\n  var self = this;\n  self.render().then(function (content) {\n    self.params.dialogBox.html(content);\n  });\n}), _defineProperty(_bizagi$workportal$wi, \"postRender\",\n\n\n\n\n\n\nfunction postRender() {\n  var self = this;\n  var content = self.getContent();\n  var roles = [];\n  self.indexByRole = {};\n\n  //  content.empty();\n  $.when(self.dataService.getAdminSmartInbox()).\n  then(function (data) {\n    // Extract roles\n    $.grep(data, function (value, key) {\n      var profiles = [];\n      $.grep(value.access, function (perm, i) {\n        if (roles.indexOf(perm.displayName) == -1) {\n          roles.push(perm.displayName);\n          profiles.push(perm.id);\n        }\n        self.indexByRole[perm.displayName] = self.indexByRole[perm.displayName] || [];\n        if (self.indexByRole[perm.displayName].indexOf(value.displayName) == -1) {\n          self.indexByRole[perm.displayName].push(value.displayName);\n        }\n      });\n      value.auxProfiles = profiles;\n    });\n\n    // Set rtl\n    if (bizagi.localization.isRTL)\n    self.content.addClass(\"bz-smartinbox-rtl\");\n\n    if (data.length > 0) {\n      content.append($.tmpl(self.manageTemplate, { smartInboxes: data, roles: roles }));\n    } else\n    {\n      content.append($.tmpl(self.noinboxesTemplate));\n    }\n\n    self.configureHandlers();\n  });\n\n}), _defineProperty(_bizagi$workportal$wi, \"onResize\",\n\nfunction onResize() {\n  var self = this;\n  if (self.wizard) {\n    self.wizard.onResize();\n  }\n}), _defineProperty(_bizagi$workportal$wi, \"configureHandlers\",\n\n\n\n\nfunction configureHandlers() {\n  var self = this;\n  var content = self.getContent();\n\n  $(\"#bz-new-smartinbox\", content).bind(\"click\", function () {\n    self.wizard = new bizagi.workportal.widgets.smartinboxAdminWizard(self.workportalFacade, self.dataService, self.params);\n    $.when(self.wizard.render()).done(function ($content) {\n      content.empty();\n      content.append($content);\n    });\n  });\n\n  $(\".bz-smartinbox-admin-wizard select\", content).bind(\"change\", function (e) {\n    var value = e.srcElement.value;\n\n    var showAll = function showAll() {\n      $(\".bz-smartinbox-admin-wizard tbody tr\", content).show();\n    };\n\n    var hideAll = function hideAll() {\n      $(\".bz-smartinbox-admin-wizard tbody tr\", content).hide();\n    };\n    var showSpecificInboxes = function showSpecificInboxes(inboxes) {\n      inboxes = inboxes || [];\n      $.each(inboxes, function (k, value) {\n        $(\".bz-smartinbox-admin-wizard tbody tr[data-inbox='\" + value + \"']\", content).show();\n      });\n    };\n\n    if (value == \"\") {\n      //show all\n      showAll();\n    } else {\n      // Show specific inboxes\n      hideAll();\n      showSpecificInboxes(self.indexByRole[value]);\n    }\n  });\n\n  $(\".bz-smartinbox-settings\", content).bind(\"click\", $.proxy(self._showSmartInboxMenu, self));\n\n  // Adjust height\n  self.onResize();\n}), _defineProperty(_bizagi$workportal$wi, \"onResize\",\n\nfunction onResize() {\n  var self = this;\n  var dialogBox = self.params.dialogBox || self.params.masterEditor.params.dialogBox;\n  $(\".bz-smartinbox-admin-wizard table tbody\", self.content).css('max-height', dialogBox.height() - 300 + 'px');\n}), _defineProperty(_bizagi$workportal$wi, \"showSmartInboxEditor\",\n\nfunction showSmartInboxEditor(params) {\n  var self = this;\n  params.masterEditor = self;\n  self.wizard = new bizagi.workportal.widgets.smartinboxAdminWizard(self.workportalFacade, self.dataService, params);\n\n  $.when(self.wizard.loadDataDef).done(function () {\n    $.when(self.wizard.render()).done(function ($content) {\n      self.content.empty();\n      self.content.append($content);\n    });\n  });\n}), _defineProperty(_bizagi$workportal$wi, \"_showSmartInboxMenu\",\n\n\n\n\nfunction _showSmartInboxMenu(event) {\n  event.stopPropagation();\n  var self = this;\n  var $parent = $(event.srcElement).closest(\"div\");\n  var data = $parent.data();\n  var $menuContainer = $(\".bz-smartinbox-admin-wizard .ui-bizagi-workportal-widget-inbox-common-smartinbox-menucontainer\", self.content);\n\n  var content = $.tmpl(self.manageMenuTemplate, {\n    settingName: data.settingname,\n    owner: data.owner,\n    smartInboxId: data.smartinboxid,\n    profiles: data.access });\n\n\n  if (!bizagi.localization.isRTL) {\n    $menuContainer.position({\n      my: \"right center\",\n      at: \"right center\",\n      of: $parent.closest(\"tr\"),\n      collision: \"flipfit\" });\n\n  } else {\n    $menuContainer.position({\n      my: \"left center\",\n      at: \"left center\",\n      of: $parent.closest(\"tr\"),\n      collision: \"flipfit\" });\n\n  }\n\n  $(\"li\", content).bind(\"click\", function (e) {\n    var action = $(e.srcElement).data(\"action\");\n    var $parent = $(e.srcElement).closest(\"ul\");\n    var data = $parent.data();\n    var parameters = {\n      settingName: data.settingname,\n      owner: data.owner,\n      smartInboxId: data.smartinboxid,\n      actionName: action,\n      profiles: data.profiles };\n\n\n    switch (action) {\n      case \"edit\":\n        self.showSmartInboxEditor({\n          selectedInboxData: parameters });\n\n\n        break;\n      case \"delete\":\n        $.when(self.dataService.deleteSmartInbox(parameters)).done(function () {\n          var storeWidget;\n          var grid = bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID;\n          var homeportal = bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_HOMEPORTAL;\n          if ($.isFunction(bizagi.cookie) && bizagi.cookie(\"bizagiDefaultWidget\") !== null && bizagi.cookie(\"bizagiDefaultWidget\") !== homeportal) {\n            storeWidget = bizagi.cookie(\"bizagiDefaultWidget\");\n          } else {\n            storeWidget = grid;\n          }\n\n          self.publish(\"changeWidget\", {\n            widgetName: storeWidget });\n\n\n          $(\".bz-smartinbox-admin-wizard tbody tr[data-smartinboxid='\" + data.smartinboxid + \"']\", self.content).remove();\n        });\n        break;}\n\n  });\n\n  $(document).on('click.overflow', function (e) {\n    $menuContainer.empty();\n  });\n\n  $menuContainer.append(content);\n}), _bizagi$workportal$wi));","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /**\r\n                                                                                                                                                                                                                                                                                                                                                                                * Created by Ricardo Alirio Perez Diaz, Andres Felipe Arenas Vargas on 9/9/2015.\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n(function ($) {\n  $.fn.simpleGrid = function (bizagiWidget, options) {\n\n    //---------------------------------------------------------\n    // Initial config\n    //---------------------------------------------------------\n\n    if (typeof bizagiWidget === 'undefined') {\n      throw \"Debe pasar como parametro el widget de bizagi, para la carga del template\";\n    }\n    var self = this;\n    var settings = $.extend({\n      allowAdd: false,\n      allowEdit: false,\n      allowDelete: false,\n      displayName: '',\n      dateFormat: bizagi.localization.getResource(\"dateFormat\"),\n      timeFormat: bizagi.localization.getResource(\"timeFormat\"),\n      filters: [],\n      maxPageToShow: 5,\n      orderType: 'ASC',\n      orderField: '',\n      orderEnabled: true,\n      page: 1,\n      pageSize: 10,\n      onDataBinding: function onDataBinding() {},\n      onFilterChanged: function onFilterChanged() {},\n      onPageChanging: function onPageChanging() {},\n      onLoadFilter: function onLoadFilter() {},\n      onAdd: function onAdd() {},\n      onEdit: function onEdit() {},\n      getResource: function getResource() {} },\n    options);\n    self.grid = {\n      internalData: {} };\n\n\n    var formatTypes = {\n      BIG_INT: 1,\n      INT: 2,\n      SMALL_INT: 3,\n      TINY_INT: 4,\n      BOOLEAN: 5,\n      DECIMAL: 6,\n      NUMERIC: 7,\n      MONEY: 8,\n      FLOAT: 10,\n      REAL: 11,\n      DATE: 12,\n      SCIENTIFIC_NOTATION: 29 };\n\n\n    //---------------------------------------------------------\n    // Constructor\n    //---------------------------------------------------------\n\n    (function () {\n      self.initialized = bizagiWidget.loadTemplates({\n        \"bizagi.simpleGrid.wrapper\": bizagi.getTemplate(\"bizagi.simpleGrid\").concat(\"#ui-bizagi-widget-simple-grid\"),\n        \"bizagi.simpleGrid.content\": bizagi.getTemplate(\"bizagi.simpleGrid\").concat(\"#ui-bizagi-widget-simple-grid-content\"),\n        \"bizagi.simpleGrid.paginator\": bizagi.getTemplate(\"bizagi.simpleGrid\").concat(\"#ui-bizagi-widget-simple-grid-paginator\"),\n        \"filter-wrapper\": bizagi.getTemplate(\"bizagi.workportal.desktop.filter.widgets\").concat(\"#column-filter-wrapper\"),\n        \"filter-string\": bizagi.getTemplate(\"bizagi.workportal.desktop.filter.widgets\").concat(\"#column-filter-control-string\"),\n        \"filter-number\": bizagi.getTemplate(\"bizagi.workportal.desktop.filter.widgets\").concat(\"#column-filter-control-number\"),\n        \"filter-date\": bizagi.getTemplate(\"bizagi.workportal.desktop.filter.widgets\").concat(\"#column-filter-control-date\"),\n        \"filter-boolean\": bizagi.getTemplate(\"bizagi.workportal.desktop.filter.widgets\").concat(\"#column-filter-control-boolean\"),\n        useNewEngine: false }).\n      then(function () {\n        self.panelWrapper = bizagiWidget.getTemplate(\"bizagi.simpleGrid.wrapper\");\n        self.panelContent = bizagiWidget.getTemplate(\"bizagi.simpleGrid.content\");\n        self.panelPaginator = bizagiWidget.getTemplate(\"bizagi.simpleGrid.paginator\");\n      });\n\n    })();\n\n    //---------------------------------------------------------\n    // Methods\n    //---------------------------------------------------------\n\n    /**\r\n     *\r\n     */\n    self.renderGrid = function () {\n      self.empty();\n      $.when(self.initialized).done(function () {\n        var params = [{\n          pag: settings.page,\n          pagSize: settings.pageSize,\n          orderType: settings.orderType,\n          orderField: settings.orderField,\n          filters: mapFilters(settings.filters) }];\n\n        var numRequest = self.data(\"numRequest\");\n        self.data(\"numRequest\", numRequest ? numRequest += 1 : 1);\n        if (typeof self.prev != \"undefined\" && typeof settings != \"undefined\") {\n          $('option:selected', self.prev()).data(\"orderField\", settings.orderField);\n          $('option:selected', self.prev()).data(\"orderType\", settings.orderType);\n          $('option:selected', self.prev()).data(\"filters\", settings.filters);\n        }\n        numRequest = self.data(\"numRequest\");\n\n        $.when(settings.onDataBinding.apply(self.get(0), params)).done($.proxy(function (data) {\n          if (numRequest === self.data(\"numRequest\")) {\n            //Add grid wrapper\n            self.append($.tmpl(self.panelWrapper));\n            //keep in track the total records and pages\n            self.grid.totalRecords = data.records;\n            self.grid.totalPages = data.total;\n            showRowsEntity(data);\n            if (data.records > settings.pageSize) {\n              self.grid.page = data.page;\n              renderPagintation();\n            }\n          }\n\n        }, numRequest));\n      });\n    };\n\n    function mapFilters(filters) {\n      var auxFilters = Object.keys(filters).map(function (key) {\n        return filters[key];\n      });\n\n      return auxFilters.filter(function (filterObject) {\n        if (filterObject.key === \"is-null\" || filterObject.key !== \"is-null\" && typeof filterObject.value !== \"undefined\" && filterObject.value !== null) {\n          return true;\n        }\n      });\n    }\n\n    /**\r\n       *\r\n       * @param data\r\n       */\n    function showRowsEntity(data) {\n      var rows = data.row || [];\n      rows = rows.map(function (row) {\n        row = row || [];\n        return row.map(function (value) {\n          if (_typeof(value) === \"object\" && value !== null) {\n            var result = value.label;\n            if (value.additionallabel) {result += ', ' + value.additionallabel;}\n            return result;\n          } else if (value === null) {\n            return \"\";\n          }\n          return value;\n        });\n      });\n\n      var $resultTableContent = $(\".ui-bizagi-simple-grid-wrapper\", self).html(\n      $.tmpl(self.panelContent, {\n        displayName: settings.displayName,\n        headers: data.header,\n        rows: rows,\n        orderType: settings.orderType,\n        orderField: settings.orderField,\n        orderEnabled: settings.orderEnabled,\n        guidForms: data.entity,\n        allowAdd: settings.allowAdd,\n        allowEdit: settings.allowEdit,\n        allowDelete: settings.allowDelete,\n        filterApplied: settings.filters,\n        attributeSupportFilter: attributeSupportFilter,\n        attributeSupportOrder: attributeSupportOrder }));\n\n\n      formatTableEntity($resultTableContent, data.header);\n      setFilters($resultTableContent, data.header);\n      var idSelected = $(\"option:selected\", self.prev()).data(\"idRowSelected\");\n      if (typeof idSelected != \"undefined\") {\n        var selectedRow = $(\"tr[data-idrowentity='\" + idSelected + \"']\", $resultTableContent);\n        selectedRow.addClass('ui-bizagi-state-selected');\n        self.elementSelected = selectedRow;\n      }\n    }\n    /**\r\n       *\r\n       */\n    function renderPagintation() {\n      var pageToshow = settings.maxPageToShow > self.grid.totalPages ? self.grid.totalPages : settings.maxPageToShow;\n      var summaryWrapper = $(\".bz-rn-grid-footer-pagination\", self);\n      var pagerData = {\n        pagination: self.grid.totalPages > 1,\n        page: self.grid.page,\n        pages: {} };\n\n\n      for (var i = 1; i <= pageToshow; i++) {\n        pagerData[\"pages\"][i] = {\n          \"pageNumber\": i };\n\n      }\n      //load and append the paginator to the result table\n      summaryWrapper.append($.tmpl(self.panelPaginator, pagerData));\n      //add data and behaviour to pager\n      $(\"ul#bz-widget-simple-grid-pager-wrapper\", self).bizagiPagination({\n        totalPages: self.grid.totalPages,\n        actualPage: self.grid.page,\n        listElement: $(\"#biz-wp-table-pager-wrapper\"),\n        clickCallBack: function clickCallBack(options) {\n          settings.onPageChanging.apply(self, new Array(settings.page, options.page));\n          settings.page = options.page;\n          self.renderGrid();\n        } });\n\n    }\n    /**\r\n       * format colums of the table\r\n       * @param $resultTableContent\r\n       */\n    function formatTableEntity($resultTableContent, headers) {\n      var bigIntHeaders = $(\"a[data-type='\" + formatTypes.BIG_INT + \"'][data-isSurrogateKey='false']\", $resultTableContent);\n      var intHeaders = $(\"a[data-type='\" + formatTypes.INT + \"'][data-attributeType='\" + formatTypes.INT + \"']\", $resultTableContent);\n      var smallIntHeaders = $(\"a[data-type='\" + formatTypes.SMALL_INT + \"']\", $resultTableContent);\n      var tinyIntHeaders = $(\"a[data-type='\" + formatTypes.TINY_INT + \"']\", $resultTableContent);\n      var booleanHeaders = $(\"a[data-type='\" + formatTypes.BOOLEAN + \"']\", $resultTableContent);\n      var decimalHeaders = $(\"a[data-type='\" + formatTypes.DECIMAL + \"']\", $resultTableContent);\n      var numericHeaders = $(\"a[data-type='\" + formatTypes.NUMERIC + \"']\", $resultTableContent);\n      var moneyHeaders = $(\"a[data-type='\" + formatTypes.MONEY + \"']\", $resultTableContent);\n      var floatHeaders = $(\"a[data-type='\" + formatTypes.FLOAT + \"']\", $resultTableContent);\n      var realHeaders = $(\"a[data-type='\" + formatTypes.REAL + \"']\", $resultTableContent);\n      var dateTimeHeaders = $(\"a[data-type='\" + formatTypes.DATE + \"']\", $resultTableContent);\n      var arrayDates = dateTimeHeaders.length === 0 ? [] : headers.filter(function (header) {\n        return header.dataType === formatTypes.DATE;\n      });\n      var scientificNotationHeaders = $(\"a[data-type='\" + formatTypes.SCIENTIFIC_NOTATION + \"']\", $resultTableContent);\n      var userLocalization = typeof bizagi.currentUser.symbol != \"undefined\" ? bizagi.currentUser : settings.getResource(\"numericFormat\");\n      var userLocalizationCloned = bizagi.clone(userLocalization);\n      userLocalizationCloned.decimalDigits = 0;\n\n      //\n      var tableTr = $(\".ui-bizagi-grid-table tr\", $resultTableContent);\n      $.each(dateTimeHeaders, function (i, item) {\n        if ($(item).parent().css('display') != 'none') {\n          var index = Number(item.getAttribute('data-index'));\n          var $column = tableTr.find(\"td:eq(\" + index + \")\");\n          tableTr.find(\"td:eq(\" + index + \")\").find(\"span:contains(':')\").addClass(\"formatDate\");\n        }\n        bizagi.util.formatInvariantDate($column, self.getDateFormat(arrayDates[i]));\n      });\n      //\n      $.each(moneyHeaders, function (i, item) {\n        if ($(item).parent().css('display') != 'none') {\n          var index = Number(item.getAttribute('data-index'));\n          var $column = $(\".ui-bizagi-grid-table tr\", $resultTableContent).find(\"td:eq(\" + index + \")\");\n          var allowDecimals = item.getAttribute(\"data-allowdecimals\") ? bizagi.util.parseBoolean(item.getAttribute(\"data-allowdecimals\")) : true;\n          item.setAttribute(\"data-allowdecimals\", allowDecimals);\n          $column.find(\"span\").addClass(\"formatMoney\");\n          var formatNumber = getFormatNumber(item, userLocalizationCloned);\n          var showSymbol = bizagi.util.parseBoolean(item.getAttribute('data-showsymbol'));\n\n          //If showSymbol is undefined, show symbol by default\n          if (showSymbol === null || showSymbol) {\n            formatNumber.symbol = typeof BIZAGI_DEFAULT_CURRENCY_INFO !== \"undefined\" ? BIZAGI_DEFAULT_CURRENCY_INFO.symbol : userLocalizationCloned.symbol;\n          } else\n          {\n            formatNumber.symbol = \"\";\n          }\n\n          bizagi.util.formatInvariantMoney($column, formatNumber);\n        }\n      });\n      //\n      $.each(floatHeaders, function (i, item) {\n        if ($(item).parent().css('display') != 'none') {\n          var index = Number(item.getAttribute('data-index'));\n          var $column = $(\".ui-bizagi-grid-table tr\", $resultTableContent).find(\"td:eq(\" + index + \")\");\n          var allowDecimals = item.getAttribute(\"data-allowdecimals\") ? bizagi.util.parseBoolean(item.getAttribute(\"data-allowdecimals\")) : true;\n          item.setAttribute(\"data-allowdecimals\", allowDecimals);\n          $column.find(\"span\").addClass(\"formatMoney\");\n          var formatNumber = getFormatNumber(item, userLocalizationCloned);\n          if (formatNumber.allowDecimals && formatNumber.decimalDigits === 0) {\n            //extract from render\\bizagi.rendering.number.js\n            formatNumber.decimalDigits = typeof BIZAGI_DEFAULT_CURRENCY_INFO !== \"undefined\" ? BIZAGI_DEFAULT_CURRENCY_INFO.decimalDigits : 2;\n          }\n          bizagi.util.formatInvariantNumber($column, formatNumber);\n        }\n      });\n      //\n      $.each(decimalHeaders, function (i, item) {\n        if ($(item).parent().css('display') != 'none') {\n          var index = Number(item.getAttribute('data-index'));\n          var $column = $(\".ui-bizagi-grid-table tr\", $resultTableContent).find(\"td:eq(\" + index + \")\");\n          $column.find(\"span\").addClass(\"formatMoney\");\n          bizagi.util.formatInvariantNumber($column, getFormatNumber(item, userLocalizationCloned));\n        }\n      });\n      //\n      $.each(realHeaders, function (i, item) {\n        if ($(item).parent().css('display') != 'none') {\n          var index = Number(item.getAttribute('data-index'));\n          var $column = $(\".ui-bizagi-grid-table tr\", $resultTableContent).find(\"td:eq(\" + index + \")\");\n          $column.find(\"span\").addClass(\"formatMoney\");\n          var formatNumber = getFormatNumber(item, userLocalizationCloned);\n          if (formatNumber.allowDecimals && formatNumber.decimalDigits === 0) {\n            //extract from render\\bizagi.rendering.number.js\n            formatNumber.decimalDigits = typeof BIZAGI_DEFAULT_CURRENCY_INFO !== \"undefined\" ? BIZAGI_DEFAULT_CURRENCY_INFO.decimalDigits : 2;\n          }\n          bizagi.util.formatInvariantNumber($column, formatNumber);\n        }\n      });\n      $.each(bigIntHeaders, function (i, item) {\n        if ($(item).parent().css('display') != 'none') {\n          var index = Number(item.getAttribute('data-index'));\n          var $column = $(\".ui-bizagi-grid-table tr\", $resultTableContent).find(\"td:eq(\" + index + \")\");\n          $column.find(\"span\").addClass(\"formatMoney\");\n          bizagi.util.formatInvariantNumber($column, getFormatNumber(item, userLocalizationCloned));\n        }\n      });\n      //\n      $.each(intHeaders, function (i, item) {\n        if ($(item).parent().css('display') != 'none') {\n          var index = Number(item.getAttribute('data-index'));\n          var $column = $(\".ui-bizagi-grid-table tr\", $resultTableContent).find(\"td:eq(\" + index + \")\");\n          $column.find(\"span\").addClass(\"formatMoney\");\n          bizagi.util.formatInvariantNumber($column, getFormatNumber(item, userLocalizationCloned));\n        }\n      });\n      //\n      $.each(smallIntHeaders, function (i, item) {\n        if ($(item).parent().css('display') != 'none') {\n          var index = Number(item.getAttribute('data-index'));\n          var $column = $(\".ui-bizagi-grid-table tr\", $resultTableContent).find(\"td:eq(\" + index + \")\");\n          $column.find(\"span\").addClass(\"formatMoney\");\n          bizagi.util.formatInvariantNumber($column, getFormatNumber(item, userLocalizationCloned));\n        }\n      });\n      //\n      $.each(tinyIntHeaders, function (i, item) {\n        if ($(item).parent().css('display') != 'none') {\n          var index = Number(item.getAttribute('data-index'));\n          var $column = $(\".ui-bizagi-grid-table tr\", $resultTableContent).find(\"td:eq(\" + index + \")\");\n          $column.find(\"span\").addClass(\"formatMoney\");\n          bizagi.util.formatInvariantNumber($column, getFormatNumber(item, userLocalizationCloned));\n        }\n      });\n      //\n      $.each(numericHeaders, function (i, item) {\n        if ($(item).parent().css('display') != 'none') {\n          var index = Number(item.getAttribute('data-index'));\n          var $column = $(\".ui-bizagi-grid-table tr\", $resultTableContent).find(\"td:eq(\" + index + \")\");\n          $column.find(\"span\").addClass(\"formatMoney\");\n          bizagi.util.formatInvariantNumber($column, getFormatNumber(item, userLocalizationCloned));\n        }\n      });\n      //\n      $.each(booleanHeaders, function (i, item) {\n        if ($(item).parent().css('display') != 'none') {\n          var index = Number(item.getAttribute('data-index'));\n          var valuesBoolean = $(\".ui-bizagi-grid-table tr\", $resultTableContent).find(\"td:eq(\" + index + \")\").find(\"span\");\n          if (index > 0)\n          $.each(valuesBoolean, function (j, itemBoolean) {\n            var contentBoolean = $.trim($(itemBoolean).text()).toLowerCase();\n            if (contentBoolean === 'true' || contentBoolean === '1') {\n              $(itemBoolean).text('X');\n            }\n\n            if (contentBoolean === 'false' || contentBoolean === '0') {\n              $(itemBoolean).text('');\n            }\n          });\n        }\n      });\n      //\n      $.each(scientificNotationHeaders, function (i, item) {\n        if ($(item).parent().css('display') != 'none') {\n          var index = Number(item.getAttribute('data-index'));\n          var oracleNumberList = $(\".ui-bizagi-grid-table tr\", $resultTableContent).find(\"td:eq(\" + index + \")\").find(\"span\");\n          $.each(oracleNumberList, function (j, numberItem) {\n            var number = $.trim($(numberItem).text());\n            $(numberItem).text(bizagi.util.scientificNotationFormat(number));\n          });\n        }\n      });\n\n      //hide de first column if the user created display form\n      if ($(\"a[data-type='-11']\").length > 0) {\n        $('.admin-entities-rightframe #detailEntity table.ui-bizagi-grid-table td:nth-child(1)').css('display', 'none');\n        $('.admin-entities-rightframe #detailEntity table.ui-bizagi-grid-table th:nth-child(1)').css('display', 'none');\n      }\n      self.configureHandlers($resultTableContent);\n    }\n\n    /**\r\n       * Return date or dateTime format\r\n       * @param {*} headersDate \r\n       * @returns \r\n       */\n    self.getDateFormat = function (headersDate) {\n      return headersDate.showTime ? settings.dateFormat + ' ' + settings.timeFormat : settings.dateFormat;\n    };\n\n    /**\r\n        * Apply filter's plugin to headers in the table\r\n        * @param $resultTableContent\r\n        * @param headers\r\n        */\n    function setFilters($resultTableContent, headers) {\n      var filters = settings.filters;\n      var $columnFilters = $resultTableContent.find('.ui-bizagi-grid-header .ui-bizagi-render-icon-filter');\n\n      $.each($columnFilters, function (_, element) {\n        var $element = $(element),\n        $parent = $element.parent(),\n        index = $element.data('index'),\n        header = headers[index];\n\n        if (attributeSupportFilter(header)) {\n          (function (header) {\n            var fieldValue = header.fieldValue;\n\n            //\n            $element.bizagi_filters({\n              guidAttribute: header.guidAttribute,\n              type: header.dataType,\n              attributeType: header.attributeType,\n              parent: $parent,\n              templates: {\n                filterWrapper: bizagiWidget.getTemplate(\"filter-wrapper\"),\n                filterString: bizagiWidget.getTemplate(\"filter-string\"),\n                filterNumber: bizagiWidget.getTemplate(\"filter-number\"),\n                filterDate: bizagiWidget.getTemplate(\"filter-date\"),\n                filterBoolean: bizagiWidget.getTemplate(\"filter-boolean\") },\n\n              data: filters[fieldValue],\n              attribute: header.guidAttribute,\n              entity: header.relatedEntity,\n              dataService: {\n                getAdminEntityData: function getAdminEntityData(params) {\n                  var _fieldValueCache = bizagi.util.tryCatch(\n                  function () {\n                    return fieldValue +\n                    params.idEntity +\n                    params.idAttribute +\n                    params.displayAttribFilter;\n                  },\n                  fieldValue);\n\n\n                  return $.when(self.grid.internalData[_fieldValueCache] || settings.onLoadFilter.apply(settings, new Array($.extend(params, { type: \"Entity\" })))).\n                  then(function (entityData) {\n                    self.grid.internalData[_fieldValueCache] = bizagi.clone(entityData);\n                    return bizagi.clone(entityData);\n                  });\n                } } });\n\n\n            //\n            $element.on('bizagi_filterschange', function (ev, value) {\n              if ($.isEmptyObject(value)) {\n                delete filters[fieldValue];\n              } else\n              {\n                value.dataType = header.dataType;\n                value.field = fieldValue;\n                if (typeof header.relatedEntity !== \"undefined\") {\n                  value.entity = header.relatedEntity;\n                }\n                filters[fieldValue] = value;\n              }\n              settings.onFilterChanged.apply(self);\n              self.renderGrid();\n            });\n            // Change the icon when there is a filter applied\n            if (filters[fieldValue]) {\n              $element.addClass('ui-bizagi-column-filter-applied');\n            }\n          })(header);\n        }\n      });\n    }\n    /**\r\n       * Manage button edit row entities or add row\r\n       * @param $resultTableContent\r\n       */\n    self.configureHandlers = function ($resultTableContent) {\n      // Sort entities listener\n      if (settings.orderEnabled) {\n        $(\".link-order-entity\", $resultTableContent).click(function () {\n          settings.orderField = $(this).attr('data-columnOrderField');\n          settings.orderType = $(this).attr('data-orderType');\n          self.renderGrid();\n        });\n      }\n      //Select entity listener\n      $(\".ui-bizagi-grid-body tr\", $resultTableContent).click(function () {\n        if ($(this).attr('class') === 'ui-bizagi-state-selected') {\n          $(this).removeClass('ui-bizagi-state-selected');\n          self.elementSelected = null;\n          $('option:selected', self.prev()).removeData(\"idRowSelected\");\n        } else\n        {\n          $('.ui-bizagi-grid-body tr', $resultTableContent).removeClass('ui-bizagi-state-selected');\n          $(this).addClass('ui-bizagi-state-selected');\n          $('option:selected', self.prev()).data(\"idRowSelected\", $(this).data(\"idrowentity\"));\n          self.elementSelected = this;\n        }\n      });\n      //Add entity btn listener\n      $(\"#addRowEntity\", $resultTableContent).click(function (e) {\n        settings.onAdd.apply(this, new Array(e, { context: self.get(0) }));\n      });\n      //Edit entity btn listener\n      $(\"#editRowEntity\", $resultTableContent).click(function (e) {\n        if (self.elementSelected == null) {\n          bizagi.showMessageBox(bizagi.localization.getResource(\"render-grid-message-no-selected-row\"), bizagi.localization.getResource(\"render-grid-header-no-selected-row\"));\n        } else\n        {\n          settings.onEdit.apply(this, new Array(e, self.elementSelected));\n          $('.ui-bizagi-grid-body tr', $resultTableContent).removeClass('ui-bizagi-state-selected');\n          self.elementSelected = null;\n        }\n      });\n      //Delete entity btn listener\n      $(\"#deleteRowEntity\", $resultTableContent).click(function (e) {\n        if (self.elementSelected == null) {\n          bizagi.showMessageBox(bizagi.localization.getResource(\"render-grid-message-no-selected-row\"), bizagi.localization.getResource(\"render-grid-header-no-selected-row\"));\n        } else\n        {\n          settings.onDelete.apply(this, new Array(e, self.elementSelected));\n          $('.ui-bizagi-grid-body tr', $resultTableContent).removeClass('ui-bizagi-state-selected');\n          self.elementSelected = null;\n        }\n      });\n    };\n    /**\r\n        * Returns true if the attribute support filter\r\n        * images and files aren't supported\r\n        * @param header\r\n        * @return {boolean}\r\n        */\n    function attributeSupportFilter(header) {\n      var attributeType = header.attributeType;\n      var datatype = header.dataType;\n      var xpath = header.xpath || \"\";\n\n      if (header.masterEntity) {\n        return false;\n      }\n      if (datatype < 0) {\n        return false;\n      }\n      // If xpath has multiples levels then ignore filters\n      if (xpath.indexOf(\".\") > -1) {\n        return false;\n      }\n      if (attributeType == 1003) {\n        return false;\n      }\n      if (attributeType == 1002) {\n        return false;\n      }\n      if (attributeType == 1004) {\n        return false;\n      }\n      // If its paramatric entity\n      if (attributeType == 1005) {\n        return false;\n      }\n      return true;\n    }\n\n    /**\r\n      * Check if header support order\r\n      * In order to extend\r\n      * @param header\r\n      * @return {*}\r\n      */\n    function attributeSupportOrder(header) {\n      var attributeType = header.attributeType,\n      datatype = header.dataType,\n      xpath = header.xpath || \"\";\n\n      if (datatype < 0) {\n        return false;\n      }\n\n      // If xpath has multiples levels then ignore filters\n      if (xpath.indexOf(\".\") > -1) {\n        return false;\n      }\n\n      if (attributeType == 1003) {\n        return false;\n      }\n\n      if (attributeType == 1002) {\n        return false;\n      }\n\n      return true;\n    }\n\n    /**\r\n       * Format grid numbers\r\n       */\n    function getFormatNumber($item, userLocalizationCloned) {\n      var auxNumberFormat = {\n        decimalDigits: 0,\n        decimalSeparator: userLocalizationCloned.decimalSeparator };\n\n\n      var allowdecimals = $item.getAttribute('data-allowdecimals') || false;\n      var numDecimals = $item.getAttribute('data-numdecimals') || 0;\n      var percentage = $item.getAttribute('data-percentage') || false;\n      var thousands = $item.getAttribute('data-thousands') || true;\n      allowdecimals = bizagi.util.parseBoolean(allowdecimals);\n      thousands = bizagi.util.parseBoolean(thousands);\n      auxNumberFormat.allowDecimals = allowdecimals;\n      auxNumberFormat.decimalDigits = numDecimals;\n      auxNumberFormat.thousands = thousands;\n      auxNumberFormat.groupSeparator = thousands ? userLocalizationCloned.groupSeparator : \"\";\n      auxNumberFormat.percentage = percentage;\n\n      return auxNumberFormat;\n    }\n\n\n    return $.extend(self, { render: self.renderGrid });\n  };\n})(jQuery);","/**\r\n * Activiy log for  activities, entities, and users\r\n * \r\n * @author David Andrs Nio\r\n */\n\n\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.activity.log\", {}, {\n  /*\r\n                                                                                        *   Returns the widget name\r\n                                                                                        */\n  getWidgetName: function getWidgetName() {\n    return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ACTIVITY_LOG;\n  },\n  /*\r\n     *   Renders the content for the current controller\r\n     */\n  renderContent: function renderContent() {\n    var self = this;\n    var template = self.getTemplate(\"activity.log\");\n\n    self.idCase = self.params.idCase;\n    self.idWorkflow = self.params.idWorkflow;\n\n    var content = self.content = $.tmpl(template, { idCase: self.idCase });\n\n    return content;\n  } });","/**\r\n * Authentication log for users\r\n * \r\n * @author Christian Collazos\r\n */\n\n\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.authentication.log\", {}, {\n  /*\r\n                                                                                              *   Returns the widget name\r\n                                                                                              */\n  getWidgetName: function getWidgetName() {\n    return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_AUTHENTICATION_LOG;\n  },\n  /*\r\n     *   Renders the content for the current controller\r\n     */\n  renderContent: function renderContent() {\n    var self = this;\n    var template = self.getTemplate(\"authentication.log\");\n    var content;\n\n    content = self.content = $.tmpl(template, {});\n\n    return content;\n  } });","/**\r\n * Name: BizAgi Desktop Widget Authentication Log Implementation\r\n * \r\n * @author Christian Collazos\r\n */\n\n\nbizagi.workportal.widgets.authentication.log.extend(\"bizagi.workportal.widgets.authentication.log\", {}, {\n\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    //Load templates\n    self.loadTemplates({\n      \"authentication.log\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.authentication.log\").concat(\"#ui-bizagi-workportal-widget-authentication-log\"),\n      \"authentication.log.fields\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.authentication.log\").concat(\"#ui-bizagi-workportal-widget-authentication-log-fields\"),\n      \"authentication.log.button\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.authentication.log\").concat(\"#ui-bizagi-workportal-widget-authentication-log-button\"),\n      \"authentication.log.result\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.authentication.log\").concat(\"#ui-bizagi-workportal-widget-authentication-log-result\"),\n      \"authentication.log.pagination\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.authentication.log\").concat(\"#ui-bizagi-workportal-widget-authentication-log-pagination\"),\n      useNewEngine: false });\n\n  },\n\n  postRender: function postRender() {\n    var self = this;\n    self.maxElemShow = 10;\n    self.maxPageToShow = 5;\n\n    //Template vars\n    self.generalContentTmpl = self.getTemplate(\"authentication.log\");\n    self.fieldsContentTmpl = self.getTemplate(\"authentication.log.fields\");\n    self.buttonContentTmpl = self.getTemplate(\"authentication.log.button\");\n    self.resultContentTmpl = self.getTemplate(\"authentication.log.result\");\n    self.paginationTmpl = self.getTemplate(\"authentication.log.pagination\");\n\n    //load form data\n    self.setupInitialData();\n  },\n\n  /*\r\n     * Load form fields and combo's data\r\n     */\n  setupInitialData: function setupInitialData() {\n    var self = this,\n    content = self.getContent();\n    var params = [{ dataType: \"domains\" }, { dataType: \"events\" }, { dataType: \"subEvents\" }];\n\n    $.when(self.dataService.getAuthenticationLogData(params[0]),\n    self.dataService.getAuthenticationLogData(params[1]),\n    self.dataService.getAuthenticationLogData(params[2])).\n    done(function (domainList, eventTypeList, subEvenTypesList) {\n\n      self.eventTypeList = eventTypeList[0].response;\n      self.subEventTypeList = subEvenTypesList[0].response;\n\n      var fields = $.tmpl(self.fieldsContentTmpl, { domainList: domainList[0],\n        eventTypeList: eventTypeList[0].response,\n        subEvenTypes: subEvenTypesList[0].response });\n\n\n      //append fields to wrapper\n      content.append(fields);\n\n      self.setupDatePicker();\n      self.setupFooterButtons();\n\n    }).fail(function (error) {\n      bizagi.log(error);\n    });\n  },\n\n  /*\r\n     * Load dateTime plugin and apply to respective fields\r\n     */\n  setupDatePicker: function setupDatePicker() {\n    var self = this;\n    var content = self.getContent();\n    var formatDate = self.getDateFormat();\n    var timeFormat = bizagi.localization.getResource('timeFormat');\n    $(\".biz-wp-form-datepicker\", content).datetimepicker({\n      controlType: 'select',\n      dateFormat: formatDate,\n      timeFormat: timeFormat,\n      currentText: bizagi.localization.getResource(\"render-timeentry-now\"),\n      closeText: bizagi.localization.getResource(\"workportal-general-button-label-done\"),\n      timeText: bizagi.localization.getResource(\"workportal-project-plan-time-title\"),\n      hourText: bizagi.localization.getResource(\"reports-general-hour\").capitalize(),\n      minuteText: bizagi.localization.getResource(\"reports-general-minute\").capitalize() });\n\n  },\n  /**\r\n      * Translate standard date format to jquery date picker\r\n      */\n  getDateFormat: function getDateFormat() {\n    var format = bizagi.localization.getResource('dateFormat');\n    var datePickerFormat = format;\n\n    // Fix month\n    if (datePickerFormat.indexOf(\"MMMM\") >= 0) {\n      datePickerFormat = datePickerFormat.replaceAll(\"MMMM\", \"MM\");\n    } else if (datePickerFormat.indexOf(\"MMM\") >= 0) {\n      // Month name short\n      datePickerFormat = datePickerFormat.replaceAll(\"MMM\", \"M\");\n    } else if (datePickerFormat.indexOf(\"MM\") >= 0) {\n      // Month two digits\n      datePickerFormat = datePickerFormat.replaceAll(\"MM\", \"mm\");\n    } else if (datePickerFormat.indexOf(\"M\") >= 0) {\n      // Month one digits\n      datePickerFormat = datePickerFormat.replaceAll(\"M\", \"m\");\n    }\n    // Fix years\n    if (datePickerFormat.search(\"yyyy\") != -1) {\n      datePickerFormat = datePickerFormat.replaceAll(\"yyyy\", \"yy\");\n    } else {\n      if (datePickerFormat.search(\"yy\") != -1) {\n        datePickerFormat = datePickerFormat.replaceAll(\"yy\", \"y\");\n      }\n    }\n\n    datePickerFormat = datePickerFormat.replaceAll(\"dddd\", \"DD\"); // Fix days\n\n    return datePickerFormat;\n  },\n\n  /*\r\n     * Implement button behaviour\r\n     */\n  setupFooterButtons: function setupFooterButtons() {\n    var self = this,\n    content = self.getContent(),\n    button = $.tmpl(self.buttonContentTmpl, {});\n\n    content.append(button);\n\n    var widgetButtonSet = $(\"#authentication-log-data-buttonset\", content);\n\n    $(\"#btn-authentication-search\", widgetButtonSet).click(function (e) {\n      //clean old results\n      $(\".biz-wp-table\").remove();\n      $(\"#biz-wp-table-summary-wrapper\").remove();\n      var validateData = self.validateData();\n      // Next added lines intend to send the value in invariant format + H:mm to the server\n      var dtFrom = $(\"#sinceDate\", content).val();\n      var dtTo = $(\"#toDate\", content).val();\n      if (dtFrom != \"\") dtFrom = bizagi.util.dateFormatter.formatInvariant(bizagi.util.dateFormatter.getDateFromFormat(dtFrom, self.getResource(\"dateFormat\") + \" \" + self.getResource(\"timeFormat\")), \"MM/dd/yyyy H:mm\");\n      if (dtTo != \"\") dtTo = bizagi.util.dateFormatter.formatInvariant(bizagi.util.dateFormatter.getDateFromFormat(dtTo, self.getResource(\"dateFormat\") + \" \" + self.getResource(\"timeFormat\")), \"MM/dd/yyyy H:mm\");\n      if (!validateData.fieldsAreEmpty && validateData.errorMessage == \"\") {\n        var params = {\n          action: \"AuthLog\",\n          domain: $(\"#domainList\", content).val() != \"none\" ? $(\"#domainList\", content).val() : \"\",\n          userName: $(\"#auth-log-user\", content).val(),\n          dtFrom: dtFrom,\n          dtTo: dtTo,\n          eventSubType: $(\"#subEventType\", content).val() != self.subEventTypeList[0].displayName ? $(\"#subEventType\", content).val() : \"\",\n          eventType: $(\"#eventType\", content).val() != self.eventTypeList[0].displayName ? $(\"#eventType\", content).val() : \"\",\n          pagSize: self.maxElemShow };\n\n\n        self.findResults(content, params);\n      } else {\n        bizagi.showMessageBox(validateData.errorMessage, \"Bizagi\", \"warning\");\n      }\n\n    });\n  },\n\n  /*\r\n     * Validate required fields\r\n     */\n  validateData: function validateData() {\n    var self = this,\n    content = self.getContent(),\n    validateResponse = { fieldsAreEmpty: false, errorMessage: \"\" },\n    errorMessage = \"\",\n    errorFieldName = \"\";\n    var dtFrom = $(\"#sinceDate\", content).val();\n    var dtTo = $(\"#toDate\", content).val();\n\n    if ($(\"#domainList\", content).val() == \"none\" &&\n    $(\"#user\", content).val() == \"\" &&\n    $(\"#eventType\", content).val() == self.eventTypeList[0].id &&\n    $(\"#subEventType\", content).val() == self.subEventTypeList[0].id &&\n    $(\"#sinceDate\", content).val() == \"\" &&\n    $(\"#toDate\", content).val() == \"\") {\n\n      validateResponse.fieldsAreEmpty = true;\n      validateResponse.errorMessage = bizagi.localization.getResource(\"workportal-widget-authentication-log-emptyfields-message\");\n    } else\n    if (dtFrom != \"\" && bizagi.util.dateFormatter.formatInvariant(bizagi.util.dateFormatter.getDateFromFormat(dtFrom, self.getResource(\"dateFormat\") + \" \" + self.getResource(\"timeFormat\")), \"MM/dd/yyyy H:mm\") == \"\") {\n      errorFieldName = bizagi.localization.getResource(\"workportal-widget-authentication-log-datesince\");\n      errorMessage = bizagi.localization.getResource(\"workportal-general-invalid-date\");\n      errorMessage = errorMessage.replace(\"{0}\", errorFieldName);\n      validateResponse.errorMessage = errorMessage;\n    } else\n    if (dtTo != \"\" && bizagi.util.dateFormatter.formatInvariant(bizagi.util.dateFormatter.getDateFromFormat(dtTo, self.getResource(\"dateFormat\") + \" \" + self.getResource(\"timeFormat\")), \"MM/dd/yyyy H:mm\") == \"\") {\n      errorFieldName = bizagi.localization.getResource(\"workportal-widget-authentication-log-dateto\");\n      errorMessage = bizagi.localization.getResource(\"workportal-general-invalid-date\");\n      errorMessage = errorMessage.replace(\"{0}\", errorFieldName);\n      validateResponse.errorMessage = errorMessage;\n    }\n    return validateResponse;\n  },\n\n  /*\r\n     * Find log results using the input data\r\n     */\n  findResults: function findResults(content, params, pageToShow) {\n    var self = this;\n\n    //If there is not a page to Show, begins whith the fist one\n    pageToShow ? params.pag = pageToShow : params.pag = 1;\n\n    $.when(\n    self.dataService.getAuthenticationLogResult(params)).\n    done(function (resultList) {\n\n      //clean old results\n      $(\".biz-wp-table\").remove();\n      $(\"#biz-wp-table-summary-wrapper\").remove();\n\n      //Keep in track the total Records\n      self.totalRecords = resultList.records;\n\n      //keep in track the total pages\n      self.totalPages = resultList.total;\n\n      if (resultList.rows.length > 0) {\n        var resultTemplate = $.tmpl(self.resultContentTmpl, { resultList: resultList.rows });\n        content.append(resultTemplate);\n\n        var pageToshow = self.maxPageToShow > self.totalPages ? self.totalPages : self.maxPageToShow;\n        var summaryWrapper = $(\"#biz-wp-table-pager-wrapper\");\n        var pagerData = {};\n        var paginationHtml;\n\n        // show or hide \"load more\" button\n        pagerData.pagination = self.totalPages > 1 ? true : false;\n        pagerData.page = resultList.page;\n        pagerData.pages = {};\n\n        for (var i = 1; i <= pageToshow; i++) {\n          pagerData[\"pages\"][i] = {\n            \"pageNumber\": i };\n\n        }\n\n        //load and append the paginator to the result table\n        paginationHtml = $.tmpl(self.paginationTmpl, pagerData).html();\n        summaryWrapper.append(paginationHtml);\n\n        //add data and behaviour to pager\n        $(\"ul\").bizagiPagination({\n          maxElemShow: self.maxElemShow,\n          totalPages: self.totalPages,\n          actualPage: resultList.page,\n          listElement: $(\"#biz-wp-table-pager-wrapper\"),\n          clickCallBack: function clickCallBack(options) {\n            self.findResults(content, params, options.page);\n          } });\n\n      } else {\n        bizagi.showMessageBox(bizagi.localization.getResource(\"workportal-widget-authentication-log-none\"), \"Bizagi\", \"warning\");\n      }\n\n\n    }).fail(function (error) {\n      bizagi.log(error);\n    });\n  } });","/**\r\n* Activiy log for  activities, entities, and users\r\n* \r\n* @author Liliana Fernandez Murcia\r\n*/\n\n\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.admin.encrypt.passwords\", {}, {\n  /*\r\n                                                                                                   *   Returns the widget name\r\n                                                                                                   */\n  getWidgetName: function getWidgetName() {\n    return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_ENCRYPT_PASSWORDS;\n  },\n  /*\r\n     *   Renders the content for the current controller\r\n     */\n  renderContent: function renderContent() {\n    var self = this;\n    var template = self.getTemplate(\"encrypt.passwords\");\n\n    var content = self.content = $.tmpl(template, {});\n\n    return content;\n  } });","/**\r\n* Users requests for users\r\n* \r\n* @author Liliana Fernandez Murcia\r\n*/\n\n\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.admin.users.requests\", {}, {\n  /*\r\n                                                                                                *   Returns the widget name\r\n                                                                                                */\n  getWidgetName: function getWidgetName() {\n    return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_USERS_REQUESTS;\n  },\n  /*\r\n     *   Renders the content for the current controller\r\n     */\n  renderContent: function renderContent() {\n    var self = this;\n    var template = self.getTemplate(\"users.requests\");\n    var content = self.content = $.tmpl(template);\n\n    return content;\n  } });","/**\r\n* admin/ Defaults Assignation User\r\n* \r\n* @author Liliana Fernandez Murcia\r\n*/\n\n\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.admin.defaults.assignation.user\", {}, {\n  /*\r\n                                                                                                           *   Returns the widget name\r\n                                                                                                           */\n  getWidgetName: function getWidgetName() {\n    return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_DEFAULTS_ASSIGNATION_USER;\n  },\n  /*\r\n     *   Renders the content for the current controller\r\n     */\n  renderContent: function renderContent() {\n    var self = this;\n    var template = self.getTemplate(\"defaults.assignation.user\");\n    var content;\n\n    content = self.content = $.tmpl(template, {});\n    self.loadtemplates();\n    return content;\n  },\n\n  /*\r\n     * this will be implemented on each device\r\n     */\n  loadtemplates: function loadtemplates() {} });","/**\r\n* Activiy User Profiles\r\n* \r\n* @author Liliana Fernandez Murcia\r\n*/\n\n\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.admin.user.profiles\", {}, {\n  /*\r\n                                                                                               *   Returns the widget name\r\n                                                                                               */\n  getWidgetName: function getWidgetName() {\n    return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_USER_PROFILES;\n  },\n  /*\r\n     *   Renders the content for the current controller\r\n     */\n  renderContent: function renderContent() {\n    var self = this;\n    var template = self.getTemplate(\"user.profiles\");\n    var content = self.content = $.tmpl(template, {});\n    self.loadtemplates();\n    return content;\n  },\n\n  /*\r\n     *Instances will implement this method\r\n     */\n  loadtemplates: function loadtemplates() {} });","/**\r\n* admin/ Dimensions\r\n* \r\n* @author Liliana Fernandez Murcia\r\n*/\n\n\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.admin.dimensions\", {}, {\n  /*\r\n                                                                                            *   Returns the widget name\r\n                                                                                            */\n  getWidgetName: function getWidgetName() {\n    return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_USER_DIMENSIONS;\n  },\n  /*\r\n     *   Renders the content for the current controller\r\n     */\n  renderContent: function renderContent() {\n    var self = this;\n    var template = self.getTemplate(\"dimensions\");\n    var content;\n\n    content = self.content = $.tmpl(template, {});\n    self.loadtemplates();\n    return content;\n  },\n\n  /*\r\n     * this will be implemented on each device\r\n     */\n  loadtemplates: function loadtemplates() {} });","/**\r\n* Activiy log for  activities, entities, and users\r\n* \r\n* @author David Andrs Nio\r\n*/\n\n\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.admin.alarms\", {}, {\n  /*\r\n                                                                                        *   Returns the widget name\r\n                                                                                        */\n  getWidgetName: function getWidgetName() {\n    return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_ALARMS;\n  },\n  /*\r\n     *   Renders the content for the current controller\r\n     */\n  renderContent: function renderContent() {\n    var self = this;\n    var template = self.getTemplate(\"alarms\");\n\n    var content = self.content = $.tmpl(template);\n\n    return content;\n  } });","/**\r\n* admin/ User Licenses\r\n* \r\n* @author Liliana Fernandez Murcia\r\n*/\n\n\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.admin.user.licenses\", {}, {\n  /*\r\n                                                                                               *   Returns the widget name\r\n                                                                                               */\n  getWidgetName: function getWidgetName() {\n    return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_USER_LICENSES;\n  },\n  /*\r\n     *   Renders the content for the current controller\r\n     */\n  renderContent: function renderContent() {\n    var self = this;\n    var template = self.getTemplate(\"user.licenses\");\n    var content;\n\n    content = self.content = $.tmpl(template, {});\n    self.loadtemplates();\n    return content;\n  },\n\n  /*\r\n     * this will be implemented on each device\r\n     */\n  loadtemplates: function loadtemplates() {} });","/**\r\n * Document templates widget, for uploading and updating created templates via Bizagi Studio\r\n * \r\n * @author David Andrs Nio\r\n */\n\n\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.admin.document.templates\", {}, {\n  /*\r\n                                                                                                     *   Returns the widget name\r\n                                                                                                     */\n  getWidgetName: function getWidgetName() {\n    return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_DOCUMENT_TEMPLATES;\n  },\n  /*\r\n      *   Renders the content for the current controller\r\n      */\n  renderContent: function renderContent() {\n    var self = this;\n    var template = self.getTemplate(\"admin.document.templates\");\n    var content;\n\n    content = self.content = $.tmpl(template, {});\n    self.loadtemplates();\n    return content;\n  },\n\n  /*\r\n     * this will be implemented on each device\r\n     */\n  loadtemplates: function loadtemplates() {} });","/**\r\n * Admin / processes\r\n * \r\n * @author Christian Collazos\r\n */\n\n\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.admin.processes\", {}, {\n  /*\r\n                                                                                           *   Returns the widget name\r\n                                                                                           */\n  getWidgetName: function getWidgetName() {\n    return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_PROCESSES;\n  },\n\n\n  /*\r\n     *   Renders the content for the current controller\r\n     */\n  renderContent: function renderContent() {\n    var self = this,\n    template = self.getTemplate(\"admin.processes.wrapper\"),\n    content;\n\n    self.comboProcess = self.getTemplate(\"admin.processes.combo.process\");\n    self.processEditTmpl = self.getTemplate(\"admin.processes.proc.edit\");\n    self.taskEditTmpl = self.getTemplate(\"admin.processes.task.edit\");\n\n    content = self.content = $.tmpl(template, {});\n    self.loadtemplates();\n    return content;\n  },\n\n  /*\r\n     * this will be implemented on each device\r\n     */\n  loadtemplates: function loadtemplates() {} });","/**\r\n * Admin / Business Policies\r\n * \r\n * @author David Andres Nio Villalobos\r\n */\n\n\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.admin.business.policies\", {}, {\n  /*\r\n                                                                                                   *   Returns the widget name\r\n                                                                                                   */\n  getWidgetName: function getWidgetName() {\n    return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_BUSINESS_POLICIES;\n  },\n\n  /*\r\n     *   Renders the content for the current controller\r\n     */\n  renderContent: function renderContent() {\n    var self = this,\n    template = self.getTemplate(\"admin.business.policies.wrapper\"),\n    content;\n\n    self.generalContentTmpl = self.getTemplate(\"admin.business.policies.content\");\n\n    content = self.content = $.tmpl(template, {});\n    self.loadtemplates();\n    return content;\n  },\n\n  /*\r\n     * this will be implemented on each device\r\n     */\n  loadtemplates: function loadtemplates() {} });","/**\r\n * Admin / Business Policies Decision Table\r\n * \r\n * @author Christian Collazos\r\n */\n\n\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.admin.business.policies.decision.table\", {}, {\n  /*\r\n                                                                                                                  *   Returns the widget name\r\n                                                                                                                  */\n  getWidgetName: function getWidgetName() {\n    return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_BUSINESS_POLICIES_DECISION_TABLE;\n  },\n\n  /*\r\n     *   Renders the content for the current controller\r\n     */\n  renderContent: function renderContent() {\n\n  },\n\n  /*\r\n     * this will be implemented on each device\r\n     */\n  loadtemplates: function loadtemplates() {} });","/**\r\n * Admin / Business Policies Rules\r\n * \r\n * @author Christian Collazos\r\n */\n\n\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.admin.business.policies.rules\", {}, {\n  /*\r\n                                                                                                         *   Returns the widget name\r\n                                                                                                         */\n  getWidgetName: function getWidgetName() {\n    return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_BUSINESS_POLICIES_RULES;\n  },\n\n  /*\r\n     *   Renders the content for the current controller\r\n     */\n  renderContent: function renderContent() {\n\n  },\n\n  /*\r\n     * this will be implemented on each device\r\n     */\n  loadtemplates: function loadtemplates() {} });","/**\r\n * Admin / Business Policies Tabs (properties / vocabulary contexts / components)\r\n * \r\n * @author Christian Collazos\r\n */\n\n\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.admin.business.policies.tabs\", {}, {\n  /*\r\n                                                                                                        *   Returns the widget name\r\n                                                                                                        */\n  getWidgetName: function getWidgetName() {\n    return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_BUSINESS_POLICIES_TABS;\n  },\n\n  /*\r\n     *   Renders the content for the current controller\r\n     */\n  renderContent: function renderContent() {\n\n  },\n\n  /*\r\n     * this will be implemented on each device\r\n     */\n  loadtemplates: function loadtemplates() {} });","/**\r\n * Admin / Business Policies Politics\r\n * \r\n * @author Christian Collazos\r\n */\n\n\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.admin.business.policies.politics\", {}, {\n  /*\r\n                                                                                                            *   Returns the widget name\r\n                                                                                                            */\n  getWidgetName: function getWidgetName() {\n    return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_BUSINESS_POLICIES_POLITICS;\n  },\n\n  /*\r\n     *   Renders the content for the current controller\r\n     */\n  renderContent: function renderContent() {\n\n  },\n\n  /*\r\n     * this will be implemented on each device\r\n     */\n  loadtemplates: function loadtemplates() {} });","/**\r\n * Admin / Business Policies Vocabularies\r\n * \r\n * @author Christian Collazos\r\n */\n\n\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.admin.business.policies.vocabularies\", {}, {\n  /*\r\n                                                                                                                *   Returns the widget name\r\n                                                                                                                */\n  getWidgetName: function getWidgetName() {\n    return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_BUSINESS_POLICIES_VOCABULARIES;\n  },\n\n  /*\r\n     *   Renders the content for the current controller\r\n     */\n  renderContent: function renderContent() {\n\n  },\n\n  /*\r\n     * this will be implemented on each device\r\n     */\n  loadtemplates: function loadtemplates() {} });","/**\r\n * Admin / Language\r\n * \r\n * @author Ivan Taimal Narvaez\r\n */\n\n\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.admin.language\", {}, {\n  /*\r\n                                                                                          *   Returns the widget name\r\n                                                                                          */\n  getWidgetName: function getWidgetName() {\n    return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_LANGUAGE;\n  },\n\n  /*\r\n     *   Renders the content for the current controller\r\n     */\n  renderContent: function renderContent() {\n    var self = this;\n    var template = self.getTemplate(\"admin.language.wrapper\");\n    var content;\n\n    self.panelWrapper = $.tmpl(self.getTemplate(\"admin.language.panel.wrapper\"));\n    self.generalTemplateListTmpl = self.getTemplate(\"admin.language.template.list\");\n    self.fileCultureName = self.getTemplate(\"admin.language.upload.file.culturename\");\n    self.bizagiObjectsList = self.getTemplate(\"admin.language.bizagi.objects.list\");\n    self.entitiesListTmpl = self.getTemplate(\"admin.language.entities.list\");\n\n    content = self.content = $.tmpl(template, {});\n    self.loadtemplates();\n    return content;\n  },\n\n  /*\r\n     * this will be implemented on each device\r\n     */\n  loadtemplates: function loadtemplates() {} });","/**\r\n * Admin / Preferences\r\n * \r\n * @author Andres\r\n */\n\n\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.admin.preferences\", {}, {\n\n  /*\r\n                                                                                             *   Returns the widget name\r\n                                                                                             */\n  getWidgetName: function getWidgetName() {\n    return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_PREFERENCES;\n  },\n\n  /*\r\n     *   Renders the content for the current controller\r\n     */\n  renderContent: function renderContent() {\n    var self = this;\n    var template = self.getTemplate(\"admin.preferences.wrapper\");\n    var content;\n    content = self.content = $.tmpl(template, {});\n    self.loadtemplates();\n    return content;\n  },\n\n  /*\r\n     * this will be implemented on each device\r\n     */\n  loadtemplates: function loadtemplates() {} });","/**\r\n * Admin module to manage entities {Parametrics, Stakeholders}\r\n * @author Andres Felipe Arenas Vargas, Ricardo Alirio Perez Diaz\r\n */\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.admin.entities\", {}, {\n\n  /**\r\n                                                                                           * Renders the content for the current controller\r\n                                                                                           * @return {tmpl} The main template\r\n                                                                                           */\n  renderContent: function renderContent() {\n    var self = this;\n    var defer = new $.Deferred();\n\n    $.when(self.loadtemplates()).\n    done(function () {\n      var template = self.getTemplate(\"admin.entity.wrapper\");\n      self.content = $.tmpl(template, {});\n      defer.resolve(self.content);\n    });\n\n    return defer.promise();\n  },\n\n  /**\r\n      * Returns the widget name\r\n      * @return {string} Widget name\r\n      */\n  getWidgetName: function getWidgetName() {\n    return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_ENTITIES;\n  },\n\n  /**\r\n      * Load form  entity empty if params is just \"guid\" or with data if params is \"guid\" and \"idRow\"\r\n      * @param params\r\n      */\n  getFormEntity: function getFormEntity(params) {\n    var self = this;\n    var deferred = $.Deferred();\n    self.currentGuidForm = params.guidForm;\n    self.currentIdRow = params.idRow;\n    bizagi.loader.start(\"rendering\").then(function () {\n      self.loadFormEntity(params, deferred);\n    });\n    return deferred.promise();\n  },\n\n  /**\r\n      * Load form entity\r\n      * @param {*} params \r\n      */\n  loadFormEntity: function loadFormEntity(params, deferred) {\n    var self = this;\n    var facade = self.getFacade();\n    $.when(self.dataService.getAdminEntitiesForm(params)).done(function (responseForm) {\n      //Modify JSON form with params necessary to widget\n      responseForm.form.contextType = \"entity\";\n\n      $.when(facade.execute({ \"data\": responseForm, \"contexttype\": \"entity\", \"canvas\": $(\"#detailEntity\", self.panelWrapper), \"isEntityForm\": true })).\n      done(function (formRender) {\n        if (self._referrer === \"stakeholder\") {\n          self._associatedUser = !bizagi.util.isEmpty(formRender.getRender(\"associatedUser\")[\"value\"]) ? formRender.getRender(\"associatedUser\")[\"value\"] : !bizagi.util.isEmpty(self._associatedUser) ? self._associatedUser : undefined;\n          deferred.resolve(formRender);\n        }\n        if (params.idRow) {\n          formRender.surrogatekey = params.idRow;\n        }\n\n        self.overrideFormRender(formRender);\n\n      });\n    });\n  },\n\n\n  /**\r\n      * Get Facade for building a form\r\n      */\n  getFacade: function getFacade() {\n    var self = this;\n    var facade = new bizagi.rendering.facade();\n\n    //Override configureRefresh method\n    facade.configureRefresh = function (form, canvas) {\n      var that = this;\n\n      // Attach a refresh handler to recreate all the form\n      form.bind(\"refresh\", function (_, refreshParams) {\n\n        var paramsRefreshForm = self.getSelectedItem();\n        paramsRefreshForm.idPageCache = form.idPageCache;\n        paramsRefreshForm.guidForm = self.currentGuidForm;\n        paramsRefreshForm.guid = paramsRefreshForm.guidEntity;\n        paramsRefreshForm.idRow = self.currentIdRow;\n        paramsRefreshForm.isStakeholder = self._referrer === \"stakeholder\";\n\n        //Dispose current form\n        form.dispose(refreshParams);\n        canvas.fastEmpty();\n        var canvasParent = canvas.parent();\n        if (canvasParent.find(\".ui-bizagi-button-container\").length > 0) {\n          canvasParent.find(\".ui-bizagi-button-container\").remove();\n        }\n\n        if (that.executionDeferred && that.executionDeferred.state) {\n          if (that.executionDeferred.state() == \"resolved\") {\n            that.executionDeferred = $.Deferred();\n          }\n        }\n\n        self.getFormEntity(paramsRefreshForm);\n\n        return that.executionDeferred.promise();\n      });\n    };\n\n    return facade;\n  },\n\n  overrideFormRender: function overrideFormRender(formRender) {\n    var self = this;\n    formRender.internalSubmitOnChange = function (params) {\n      var def = $.Deferred();\n      $.when(self.internalSubmitOnChangeEntity(formRender)).\n      done(function (responseSave) {\n        if (responseSave) {\n          var params = self.getSelectedItem();\n          params.idPageCache = formRender.idPageCache;\n          params.guidForm = self.currentGuidForm;\n          params.guid = params.guidEntity;\n          params.idRow = self.currentIdRow;\n          params.isStakeholder = self._referrer === \"stakeholder\";\n          self.getFormEntity(params);\n          def.resolve();\n        }\n      }).\n      fail(function () {\n        def.reject();\n      });\n      return def.promise();\n    };\n\n    formRender.processButton = function (buttonProperties) {\n      formRender.endLoading();\n      if (buttonProperties.action == 'save') {\n        if (formRender.validateForm()) {\n          return $.when(self.saveFormEntity(formRender)).\n          done(function (responseSave) {\n            if (responseSave) {\n              self.drawSimpleGrid(self.getSelectedItem());\n            }\n          });\n        }\n      } else\n      if (buttonProperties.action === 'cancel') {\n        self.drawSimpleGrid(self.getSelectedItem());\n      }\n    };\n  },\n\n  /**\r\n      * InternalSubmitOnChangeEntity, used when searching a user in the form,\r\n      * Temporaly submits the search result\r\n      * @param formRender\r\n      * @returns {*}\r\n      */\n  internalSubmitOnChangeEntity: function internalSubmitOnChangeEntity(formRender) {\n    var self = this;\n    var defSave = $.Deferred();\n    var params = self.getSelectedItem();\n    var serviceRender = new bizagi.render.services.service();\n    var renderValues = {};\n\n    formRender.collectRenderValues(renderValues);\n    $.when(serviceRender.multiactionService.submitData({\n      action: \"SUBMITONCHANGE\",\n      contexttype: \"entity\",\n      data: renderValues,\n      surrogatekey: typeof formRender.surrogatekey !== \"undefined\" ? formRender.surrogatekey : false,\n      idPageCache: formRender.idPageCache })).\n    done(function (formRender) {\n      if (formRender.type == \"success\") {\n        defSave.resolve(true);\n      } else\n      {\n        defSave.reject();\n      }\n    }).fail(function (formError) {\n      bizagi.showMessageBox(formError.message);\n      defSave.reject();\n    });\n    return defSave.promise();\n  } });","/**\r\n// * Admin module to case massively reassign\r\n * \r\n// * @author Lilian Fernandez, David Nino\r\n */\n\n\nbizagi.workportal.widgets.admin.encrypt.passwords.extend(\"bizagi.workportal.widgets.admin.encrypt.passwords\", {}, {\n\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    //Load templates\n    self.loadTemplates({\n      \"encrypt.passwords\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.admin.encrypt.passwords\").concat(\"#ui-bizagi-workportal-widget-admin-encrypt-passwords\"),\n      useNewEngine: false });\n\n  },\n\n  postRender: function postRender() {\n    var self = this;\n\n    //Template vars\n    self.generalContentTmpl = self.getTemplate(\"encrypt.passwords\");\n    self.setupFooterButtons();\n    $(\"#encryp-password-data-text\", self.getContent()).on('paste', self.handlePaste);\n    $(\"#encryp-password-data-text-confirm\", self.getContent()).on('paste', self.handlePaste);\n  },\n\n  /*\r\n     *\r\n     */\n  setupFooterButtons: function setupFooterButtons() {\n    var self = this,\n    content = self.getContent();\n    var params = {};\n\n    var widgetButtonSet = $(\"#encryp-password-data-buttonset\", content);\n\n    var noEmptyFields;\n    var equalFields;\n\n    $(\"#btn-encrypt\", widgetButtonSet).click(function (e) {\n      params.entry = $(\"#txtTextToEncrypt\").val();\n\n      noEmptyFields = self.validateData();\n      equalFields = self.comparePasswords();\n\n      if (noEmptyFields && equalFields) {\n        $.when(self.dataService.encryptString(params)).done(function (result) {\n          $(\"#txtEncryptedText\", content).val(result.encryptedPassword);\n        }).fail(function (error) {});\n      } else\n      {\n\n        if (!noEmptyFields)\n        bizagi.showMessageBox(bizagi.localization.getResource(\"workportal-widget-encrypt-passwords-emptyfields-message\"), \"Bizagi\", \"warning\");else\n\n        if (!equalFields)\n        bizagi.showMessageBox(bizagi.localization.getResource(\"workportal-widget-encrypt-passwords-emptyfields-message-equals\"), \"Bizagi\", \"warning\");\n      }\n    });\n\n    $(\"#btn-clear\", widgetButtonSet).click(function (e) {\n      self.clearData();\n    });\n\n  },\n  /*\r\n     * clean the input's data\r\n     */\n  clearData: function clearData() {\n    var self = this,\n    content = self.getContent();\n    $(\"#txtTextToEncrypt\", content).val(\"\");\n    $(\"#txtConfirmTextToEncrypt\", content).val(\"\");\n    $(\"#txtEncryptedText\", content).val(\"\");\n  },\n  /*\r\n     *\r\n     */\n  comparePasswords: function comparePasswords() {\n    var self = this,\n    content = self.getContent();\n\n    var password = $(\"#txtTextToEncrypt\", content).val();\n    var confirmPassword = $(\"#txtConfirmTextToEncrypt\", content).val();\n\n    if (password != confirmPassword) {\n      return false;\n    } else {\n      return true;\n    }\n  },\n\n  /*\r\n     * Validate required fields\r\n     */\n  validateData: function validateData() {\n    var self = this,\n    content = self.getContent(),\n    fieldsAreEmpty = false;\n\n\n    if ($(\"#txtTextToEncrypt\", content).val() != \"\") {\n      fieldsAreEmpty = true;\n    } else\n    if ($(\"#txtConfirmTextToEncrypt\", content).val() != \"\") {\n      fieldsAreEmpty = true;\n    }\n\n    return fieldsAreEmpty;\n  },\n\n  handlePaste: function handlePaste(e) {\n    e.stopPropagation();\n    e.preventDefault();\n\n    // Get pasted data via clipboard API\n    clipboardData = e.originalEvent.clipboardData || window.clipboardData;\n    pastedData = clipboardData.getData('Text');\n\n    // Remove new line characters\n    var res = pastedData.replace(/\\r?\\n|\\r/g, \"\");\n    e.target.value = res;\n  } });","/**\r\n* Name: BizAgi Desktop Widget Pending User Request\r\n* \r\n* @author Liliana Fernandez, David Andrs Nio Villalobos\r\n*/\n\n\nbizagi.workportal.widgets.admin.users.requests.extend(\"bizagi.workportal.widgets.admin.users.requests\", {}, {\n\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    //Load templates\n    self.loadTemplates({\n      \"users.requests\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.admin.users.requests\").concat(\"#ui-bizagi-workportal-widget-admin-users-requests\"),\n      \"users.requests.list\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.admin.users.requests\").concat(\"#ui-bizagi-workportal-widget-admin-users-requests-list\"),\n      \"users.requests.detail\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.admin.users.requests\").concat(\"#ui-bizagi-workportal-widget-admin-users-requests-detail\"),\n      \"users.requests.pagination\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.admin.users.requests\").concat(\"#ui-bizagi-workportal-widget-admin-users-requests-pagination\"),\n      \"users.requests.email\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.admin.users.requests\").concat(\"#ui-bizagi-workportal-widget-admin-users-requests-email\"),\n      useNewEngine: false });\n\n  },\n\n  postRender: function postRender() {\n    var self = this,\n    content = self.getContent();\n\n\n    self.maxElemShow = 10;\n    self.maxPageToShow = 5;\n    self.currentPage = 1;\n\n    //Template vars\n    self.userRequest = self.getTemplate(\"users.requests\");\n    self.userRequestList = self.getTemplate(\"users.requests.list\");\n    self.userRequestDetail = self.getTemplate(\"users.requests.detail\");\n    self.userRequestpaginationTmpl = self.getTemplate(\"users.requests.pagination\");\n    self.userRequestemailTmpl = self.getTemplate(\"users.requests.email\");\n\n\n    //DOM Variables\n    self.userRequestListWrapper = $(\"#users-request-list-wrapper\", content);\n    self.userRequestDetailWrapper = $(\"#users-request-detail-wrapper\", content);\n\n\n    self.containtersID = {\n      LIST: \"list\",\n      DETAIL: \"detail\" };\n\n\n    //load form data\n    self.setupInitialData();\n\n  },\n\n  /**\r\n     * Load form fields and combo's data\r\n     */\n  setupInitialData: function setupInitialData(selectedPage) {\n    var self = this;\n\n    //Switch content to detail\n    self.switchContent(self.containtersID.LIST);\n\n    if (selectedPage) {\n      self.currentPage = selectedPage;\n    }\n\n    var params = { pag: self.currentPage, pagSize: self.maxElemShow };\n\n    $.when(self.dataService.userPendingRequests(params)).done(function (result) {\n      self.renderUserRequestList(result);\n    });\n  },\n\n  /**\r\n      * call authentication Info\r\n     */\n  authenticationInfo: function authenticationInfo(userId) {\n    var self = this;\n    var params_1 = {\n      idUser: userId };\n\n\n    $.when(self.dataService.userAuthenticationInfo(params_1)).done(function (resultAuthentication) {\n      self.renderUserRequestDetails(resultAuthentication);\n    });\n  },\n\n  /**\r\n     * generate Render Users Request\r\n     */\n  renderUserRequestList: function renderUserRequestList(data) {\n    var self = this;\n    var content = self.getContent();\n\n    self.userRequestListWrapper.empty();\n\n    var requestList = $.tmpl(self.userRequestList, { userData: data.rows });\n\n    // Format invariant dates\n    bizagi.util.formatInvariantDate(requestList, self.getResource(\"dateFormat\") + \" \" + self.getResource(\"timeFormat\"));\n\n    self.userRequestListWrapper.append(requestList);\n\n    var usersRequestsSummaryWrapper = $(\"#users-requests-pager-wrapper\", content);\n\n    //Keep in track the total Records\n    self.totalRecords = data.records;\n\n    //keep in track the total pages\n    self.totalPages = data.total;\n\n    if (data.rows.length > 0) {\n\n      var pageToshow = self.maxPageToShow > self.totalPages ? self.totalPages : self.maxPageToShow;\n      //var summaryWrapper = $(\"#authentication-log-pager-wrapper\");\n      var paginationHtml;\n\n      var pagerData = {};\n      // show or hide \"load more\" button\n      pagerData.pagination = self.totalPages > 1;\n      pagerData.page = data.page;\n      pagerData.pages = {};\n      $(\"#biz-wp-userrequest-norequest\").css(\"display\", \"none\");\n      $(\"#users-request-list-wrapper .biz-wp-window \").css(\"display\", \"block\");\n      $(\"#users-request-list-wrapper .biz-wp-table \").css(\"display\", \"table\");\n\n\n      for (var i = 1; i <= pageToshow; i++) {\n        pagerData[\"pages\"][i] = {\n          \"pageNumber\": i };\n\n      }\n\n      //load and append the paginator to the result table\n      paginationHtml = $.tmpl(self.userRequestpaginationTmpl, pagerData).html();\n      usersRequestsSummaryWrapper.append(paginationHtml);\n\n      //add data and behaviour to pager\n      $(\"ul\").bizagiPagination({\n        maxElemShow: self.maxElemShow,\n        totalPages: self.totalPages,\n        actualPage: data.page,\n        listElement: $(\"#users-requests-pager-wrapper\"),\n        clickCallBack: function clickCallBack(options) {\n          self.setupInitialData(options.page);\n        } });\n\n\n    } else\n    {\n      $(\"#biz-wp-userrequest-norequest\").show(\"500\");\n      $(\"#users-request-list-wrapper .biz-wp-window \").css(\"display\", \"none\");\n      $(\"#users-request-list-wrapper .biz-wp-table \").css(\"display\", \"none\");\n    }\n\n    //Add ui events\n    $(\".selectLink\", content).click(function (e) {\n      self.authenticationInfo(e.currentTarget.id);\n    });\n  },\n\n  /*\r\n     * Load Info Users requests detail\r\n     */\n  renderUserRequestDetails: function renderUserRequestDetails(resultAuthentication) {\n    var self = this;\n    var noEmptyField;\n    var content = self.getContent();\n    var requestDetail = $.tmpl(self.userRequestDetail, { resultAuthentication: resultAuthentication });\n\n    //Switch content to detai\n    self.switchContent(self.containtersID.DETAIL);\n\n    self.userRequestDetailWrapper.empty();\n    self.userRequestDetailWrapper.append(requestDetail);\n\n    self.idUser = resultAuthentication.idUser;\n    self.password = resultAuthentication.password;\n    self.enabled = resultAuthentication.Enabled;\n    self.isExpired = resultAuthentication.expired;\n    self.isLocked = resultAuthentication.locked;\n\n    //\n    $(\"#btn-passwordRandom\", content).click(function () {\n      $.when(self.dataService.generateRandomPassword()).done(function (result) {\n        $(\"#txtPasswordRequest\", content).val(result.randomPassword);\n      });\n    });\n    //\n    $(\"#btn-updateRequest\", content).click(function () {\n      var password = $(\"#txtPasswordRequest\").val();\n      noEmptyField = self.validateKey();\n      self.password = password;\n\n      if (noEmptyField) {\n        self.dataService.generateDataToSendByEmail({ idUser: self.idUser }).done(function (response) {\n          self.showEmailtPopup(response);\n          self.updateUser();\n        });\n      } else\n      {\n        bizagi.showMessageBox(bizagi.localization.getResource(\"workportal-widget-admin-users-request-emptyfields-message\"), \"Bizagi\", \"warning\");\n      }\n    });\n    //\n    $(\"#btn-cancelRequest\", content).click(function () {\n      self.setupInitialData();\n    });\n  },\n\n  /**\r\n     * Switch Templates\r\n     */\n  switchContent: function switchContent(contentToDisplay) {\n    var self = this;\n\n    if (self.containtersID.DETAIL == contentToDisplay) {\n      self.userRequestListWrapper.hide();\n      self.userRequestDetailWrapper.show();\n    } else\n    {\n      self.userRequestListWrapper.show();\n      self.userRequestDetailWrapper.hide();\n    }\n  },\n\n  /**\r\n     * Update User\r\n     */\n  updateUser: function updateUser() {\n    var self = this;\n    var content = self.getContent();\n    var expired = $(\"#chkExpired\", content).length == 1 ? $(\"#chkExpired\", content).is(\":checked\") : $(\"label[data-expired]\", content).data(\"expired\");\n    var params = {\n      idUser: self.idUser,\n      password: self.password,\n      enabled: $(\"#chkActive\").is(\":checked\"),\n      expired: expired,\n      locked: $(\"#chkBlocked\").is(\":checked\") };\n\n    $.when(self.dataService.updateUserAuthenticationInfo(params)).done(function (result) {\n      //    console.log(result);\n    }).fail(function (error) {\n      bizagi.log(error);\n    });\n  },\n\n  /**\r\n     * generate Random Password\r\n     */\n  setupFooterButtons: function setupFooterButtons() {\n    var self = this;\n    var content = self.getContent();\n    var widgetButtonSet = $(\"#users-request-data-buttonset-Password\", content);\n\n    $(\"#btn-passwordRandom\", widgetButtonSet).click(function () {\n      $.when(self.dataService.generateRandomPassword()).done(function (result) {\n        $(\"#txtPasswordRequest\", content).val(result.randomPassword);\n      });\n    });\n  },\n\n  /**\r\n     * generate Windows PopupContent email\r\n     */\n  showEmailtPopup: function showEmailtPopup(messageResponse) {\n    var self = this;\n    var doc = window.document;\n\n    var template = self.getTemplate(\"users.requests.email\");\n\n    // Opens a dialog in order to upload Email\n    var dialogBoxEmail = self.dialogBoxEmail = $(\"<div class= users-requests-email/>\");\n    dialogBoxEmail.empty();\n    dialogBoxEmail.appendTo(\"body\", doc);\n\n    // Define buttons\n    var buttonsEmail = {};\n\n    buttonsEmail[self.getResource(\"workportal-widget-admin-users-requests-button-label-send\")] = function () {\n      // Select button Send\n      var params = {\n        eMailTo: $(\"#txtTextTo\", dialogBoxEmail).val(),\n        subject: $(\"#txtSubject\", dialogBoxEmail).val(),\n        body: $(\"#txtBody\", dialogBoxEmail).val(),\n        userSecret: self.getUserSecret(self.password) };\n\n\n      $.when(self.dataService.sendUserEmail(params)).done(function () {\n        self.closeUploadDialogEmail();\n      });\n\n      bizagi.showMessageBox(bizagi.localization.getResource(\"workportal-widget-admin-users-request-Send-message\"), \"Bizagi\", \"warning\");\n    };\n\n    // Cancel button Send\n    buttonsEmail[self.getResource(\"workportal-widget-admin-users-requests-button-label-notSend\")] = function () {\n      self.closeUploadDialogEmail();\n    };\n\n    // Render template\n    messageResponse.body = messageResponse.body.replace(/\\\\n/g, \"\\n\").replace(/\\\\/g, \"\");\n    $.tmpl(template, { messageResponse: messageResponse }).appendTo(dialogBoxEmail);\n    $(\".ui-bizagi-loading-message\").remove();\n\n    //Creates a dialog\n    dialogBoxEmail.dialog({\n      width: 500,\n      title: self.getResource(\"workportal-widget-admin-users-request-subtitle-email\"),\n      modal: true,\n      buttons: buttonsEmail,\n      close: function close() {\n        self.closeUploadDialogEmail();\n      },\n      resizeStop: function resizeStop(event, ui) {\n        if (self.form) {\n          self.form.resize(ui.size);\n        }\n      } });\n\n\n\n  },\n\n  /**\r\n      *\r\n      */\n  closeUploadDialogEmail: function closeUploadDialogEmail() {\n    var self = this;\n    self.dialogBoxEmail.dialog(\"destroy\");\n    self.dialogBoxEmail.remove();\n    self.setupInitialData();\n  },\n\n  /**\r\n     * Validate required fields\r\n     */\n  validateKey: function validateKey() {\n    var self = this;\n    var content = self.getContent();\n    var fieldAreEmpty = false;\n\n    if ($(\"#txtPasswordRequest\", content).val() !== \"\") {\n      fieldAreEmpty = true;\n    }\n\n    return fieldAreEmpty;\n  },\n\n  /**\r\n      *\r\n      * @param inputValue\r\n      * @returns {*}\r\n      */\n  getUserSecret: function getUserSecret(inputValue) {\n    var C = CryptoJS;\n    var userFormsSpanner = C.enc.Utf8.parse(\"pc30n84e15lvdD68\");\n    var userFormsCode = CryptoJS.enc.Latin1.parse(\"1v00628X62bJE2mi\");\n    var aes = C.algo.AES.createEncryptor(userFormsSpanner, {\n      mode: C.mode.CBC,\n      padding: C.pad.Pkcs7,\n      iv: userFormsCode });\n\n    var resultMain = aes.finalize(inputValue);\n    return C.enc.Base64.stringify(resultMain);\n  } });","/**\r\n*  Name: BizAgi Desktop Widget Defaults Assignation User\r\n* \r\n* @author Liliana Fernandez\r\n*/\n\n\nbizagi.workportal.widgets.admin.defaults.assignation.user.extend(\"bizagi.workportal.widgets.admin.defaults.assignation.user\", {}, {\n\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    //Load templates\n    self.loadTemplates({\n      \"defaults.assignation.user\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.admin.defaults.assignation.user\").concat(\"#ui-bizagi-workportal-widget-admin-defaults-assignation-user\"),\n      \"defaults.assignation.user.fields\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.admin.defaults.assignation.user\").concat(\"#ui-bizagi-workportal-widget-admin-defaults-assignation-user-fields\"),\n      \"defaults.assignation.user.search\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.admin.defaults.assignation.user\").concat(\"#ui-bizagi-workportal-widget-admin-defaults-assignation-user-search\"),\n      useNewEngine: false });\n\n  },\n\n  loadtemplates: function loadtemplates() {\n    var self = this;\n    //Template vars \n    self.generalContent = self.getTemplate(\"defaults.assignation.user\");\n    self.fieldsContent = self.getTemplate(\"defaults.assignation.user.fields\");\n    self.searchContent = self.getTemplate(\"defaults.assignation.user.search\");\n  },\n\n  postRender: function postRender() {\n    var self = this;\n    self.maxElemShow = 10;\n    self.maxPageToShow = 5;\n\n    //load form data\n    self.processNavigation = [];\n    self.setupData();\n  },\n\n  /*\r\n     * Setup form data\r\n     */\n  setupData: function setupData() {\n    var self = this;\n\n    self.setupInitialData();\n    self.setupProcessTree();\n  },\n\n  /*\r\n     * Load form data\r\n     */\n  setupInitialData: function setupInitialData() {\n    var self = this,\n    content = self.getContent();\n\n    self.processTree = \"\";\n\n    //append fields to wrapper\n    var fields = $.tmpl(self.fieldsContent, {});\n    $(\"#defaults-assignation-user-home\", content).append(fields);\n    self.setupSearchusersButton();\n  },\n\n  /*\r\n     * initialize the process tree widget\r\n     */\n  setupProcessTree: function setupProcessTree() {\n    var self = this;\n    var content = self.getContent();\n\n    bizagi.treeRoutSelected = [];\n    $(\"#treeLinksId\").remove();\n\n    $(\"#processTree\", content).bind(\"processSelected\", function () {\n      self.setupAssignationToProcess();\n    });\n\n    self.processTree = new bizagi.workportal.widgets.processtree(self.workportalFacade, self.dataService, $.extend(self.params, {\n      canvas: $(\"#processTree\", content),\n      authorizationContext: \"DefaultUser\" }));\n\n\n    self.processTree.render();\n  },\n\n  /*\r\n     * Call service \r\n     */\n  setupAssignationToProcess: function setupAssignationToProcess() {\n    var self = this;\n    content = self.getContent();\n    var params = {};\n\n    var selectedProcessRoute = self.processTree.getTreeRouteSelected();\n    if (selectedProcessRoute.length > 0) {\n      params.idWfClass = selectedProcessRoute[0];\n    }\n    $.when(self.dataService.getDefaultAssignationUserToProcess(params)).\n    done(function (result) {\n      $(\"#txtTextUserAssignation\", content).val(result.user);\n    });\n  },\n\n  /*\r\n     * initialize the users search form widget\r\n     */\n  setupUsersSearchForm: function setupUsersSearchForm() {\n    var self = this;\n    var content = self.getContent();\n    var def = $.Deferred();\n    $(\"#defaults-assignation-user-home\").hide();\n\n\n    self.usersTable = new bizagi.workportal.widgets.userstable(self.workportalFacade, self.dataService, $.extend(self.params, {\n      canvas: $(\"#dinamicContent\", content),\n      userLinkLabel: [bizagi.localization.getResource(\"workportal-widget-admin-defaults-assignation-select-link\")],\n      parentDef: def,\n      showBackButton: true }));\n\n\n    self.usersTable.render();\n\n    $.when(def).done(function (userId, userName) {\n      $(\"#dinamicContent\", content).html(\"\");\n      $(\"#defaults-assignation-user-home\", content).show();\n\n      // After load #dinamicContent the canvas of the process tree change. \n      self.processTree.setParamCanvas($(\"#processTree\", content));\n\n      if (userName) {\n        $(\"#txtTextUserAssignation\", content).val(userName);\n      }\n      if (userId) {\n        self.selectedUserId = userId;\n      }\n    });\n  },\n\n  /**\r\n      * get data assignation user and save\r\n      */\n  saveAssignation: function saveAssignation() {\n    var self = this;\n    var content = self.getContent();\n    var selectedProcessRoute = self.processTree.getTreeRouteSelected();\n\n    var params = {\n      idWfClass: selectedProcessRoute.length > 0 ? selectedProcessRoute[0] : -1,\n      idUser: $(\"#txtTextUserAssignation\", content).val() != \"\" ? self.selectedUserId : -1 };\n\n    self.startSaveAssignation(params);\n  },\n\n  /**\r\n      * save the default assignation user\r\n      */\n  startSaveAssignation: function startSaveAssignation(params) {\n    var self = this,\n    content = self.getContent();\n\n    if (params.idWfClass == -1) {\n      bizagi.showMessageBox(bizagi.localization.getResource(\"workportal-widget-admin-defaults-assignation-assign-fail-select-process\"), \"Bizagi\", \"warning\");\n    } else\n    {\n      $.when(self.dataService.setDefaultAssignationUserToProcess(params)).\n      done(function (response) {\n        if (response.assigned === \"true\" || response.assigned === true) {\n          bizagi.showMessageBox(bizagi.localization.getResource(\"workportal-widget-admin-defaults-assignation-assign-ok\"), \"Bizagi\", \"warning\");\n          $(\"#txtTextUserAssignation\", content).val(\"\");\n          self.setupProcessTree();\n        } else\n        {\n          bizagi.showMessageBox(bizagi.localization.getResource(\"workportal-widget-admin-defaults-assignation-assign-fail\"), \"Bizagi\", \"warning\");\n        }\n      }).\n      fail(function (error) {\n        bizagi.showMessageBox(bizagi.localization.getResource(\"workportal-widget-admin-defaults-assignation-assign-fail\"), \"Bizagi\", \"warning\");\n        $(\"#txtTextUserAssignation\", content).val(\"\");\n        self.setupProcessTree();\n        bizagi.log(error);\n      });\n    }\n  },\n\n  /****************** EVENTOS ***********************/\n\n\n  setupSearchusersButton: function setupSearchusersButton() {\n    var self = this,\n    content = self.getContent();\n\n    $(\"#btn-searchUser\", content).click(function () {\n      self.setupUsersSearchForm();\n    });\n\n    $(\"#btn-clearUser\", content).click(function () {\n      $(\"#txtTextUserAssignation\", content).val(\"\");\n    });\n\n    $(\"#btn-saveUser\", content).click(function () {\n      self.saveAssignation();\n    });\n  } });","/**\r\n* Name: BizAgi Desktop Widget User Profiles\r\n* \r\n* @author Liliana Fernandez.\r\n*/\n\nbizagi.workportal.widgets.admin.user.profiles.extend(\"bizagi.workportal.widgets.admin.user.profiles\", {}, {\n\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    //Load templates\n    self.loadTemplates({\n      \"user.profiles\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.admin.user.profiles\").concat(\"#ui-bizagi-workportal-widget-admin-user-profiles\"),\n      \"user.profiles.fields\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.admin.user.profiles\").concat(\"#ui-bizagi-workportal-widget-admin-user-profiles-fields\"),\n      \"user.profiles.table\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.admin.user.profiles\").concat(\"#ui-bizagi-workportal-widget-admin-user-profiles-table\"),\n      \"user.profiles.table.administrator\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.admin.user.profiles\").concat(\"#ui-bizagi-workportal-widget-admin-user-profiles-table-administrator\"),\n      useNewEngine: false });\n\n  },\n\n  loadtemplates: function loadtemplates() {\n    var self = this;\n    //Template vars \n    self.userProfilesFields = self.getTemplate(\"user.profiles.fields\");\n    self.userProfilesTable = self.getTemplate(\"user.profiles.table\");\n    self.userProfilesTableAdministrator = self.getTemplate(\"user.profiles.table.administrator\");\n    //        self.userProfilesPagination = self.workportalFacade.getTemplate(\"user.profiles.pagination\");\n  },\n\n  postRender: function postRender() {\n    var self = this;\n    self.maxElemShow = 10;\n    self.maxPageToShow = 5;\n\n    //load form data\n    self.setupData();\n  },\n\n  /*\r\n      * Setup form data\r\n      */\n  setupData: function setupData() {\n    var self = this;\n\n    self.setupInitialData();\n  },\n\n  /*\r\n      * Load form fields and combo's data\r\n      */\n  setupInitialData: function setupInitialData() {\n    var self = this,\n    content = self.getContent(),\n    params = { dataType: \"profiles\" };\n\n    $.when(self.dataService.getProfilesTypes(params),\n    self.dataService.getOrganizationsList()).\n    done(function (profileTypes, orgList) {\n\n      var fields = $.tmpl(self.userProfilesFields, { profileList: profileTypes[0].response, orgList: orgList[0].response });\n      self.comboDefaultValue = profileTypes[0].response[0].id;\n\n      //append fields to wrapper\n      $(\"#general-content\", content).html(\"\");\n      $(\"#general-content\", content).append(fields);\n\n      self.setupMainButtons();\n      self.setupProfileComboEvent();\n      $(\"#dinamicContent\", content).html(\"\");\n      $(\"#dinamicContent2\", content).html(\"\");\n      $(\"#general-content\", content).show();\n\n    }).fail(function (error) {\n      bizagi.log(error);\n    });\n  },\n  /**\r\n      * Export data to excel\r\n      */\n  exportToExcel: function exportToExcel() {\n    var self = this;\n    var params = {\n      filterType: self.profileTypeId,\n      guidValueFilter: self.profileId,\n      orgId: self.organizationId };\n\n    self.dataService.exportToExcelProfiles(params);\n  },\n  /*\r\n      * initialize the users search form widget\r\n      */\n  searchProfiles: function searchProfiles() {\n    var self = this,\n    content = self.getContent(),\n    profileName = $(\"#txtTextnameProfile\", content).val();\n    self.profileTypeId = $(\"#profileTypeList\").val();\n    self.profileTypeName = $(\"#profileTypeList option:selected\").text();\n\n    if (self.profileTypeId == \"8\") {\n      self.organizationId = $(\"#organizationList\", content).val();\n    } else {\n      self.organizationId = \"\";\n    }\n\n    var params = {\n      action: \"searchProfiles\",\n      profileName: profileName,\n      profileType: self.profileTypeId,\n      orgId: self.organizationId };\n\n\n\n    $.when(self.dataService.searchProfiles(params)).done(function (profileList) {\n      var fields = $.tmpl(self.userProfilesTable, { profileList: profileList.response });\n      $(\"#profilesTableId\").remove();\n      $(\"#general-content\", content).append(fields);\n      self.setupManageLink();\n    }).fail(function (error) {\n      bizagi.log(error);\n    });\n  },\n\n  /*\r\n      * Load Table user Profile Administrator\r\n      */\n  getUserByProfileId: function getUserByProfileId(profileId) {\n    var self = this,\n    content = self.getContent();\n    params = { action: \"getUsersByProfile\", idProfile: profileId, profileType: self.profileTypeId };\n    self.profileId = profileId;\n    $(\"#general-content\").hide();\n\n\n    $.when(self.dataService.getUsersByProfile(params)).done(function (userList) {\n      var list = [];\n      var limit = 1000;\n      var message = '';\n      if (userList.users.length > limit) {\n        list = userList.users.slice(0, limit);\n        message = bizagi.localization.getResource(\"workportal-widget-admin-user-profiles-limit-exceeded\");\n        message = message.replace(\"{0}\", limit).replace(\"{1}\", userList.users.length);\n      } else {\n        list = userList.users;\n      }\n      var fields = $.tmpl(self.userProfilesTableAdministrator, { userList: list, message: message });\n      $(\"#dinamicContent\", content).hide();\n      $(\"#dinamicContent2\", content).html(\"\");\n      $(\"#dinamicContent2\", content).append(fields);\n      self.setupManageButtons();\n    }).fail(function (error) {\n      bizagi.log(error);\n    });\n\n  },\n\n  /*\r\n      * Delete User Profile\r\n      */\n  removeUserFromProfile: function removeUserFromProfile(idUser) {\n    var self = this,\n    content = self.getContent();\n    params = { action: \"removeUserFromProfile\", idProfile: self.profileId, profileType: self.profileTypeId, idUser: idUser };\n\n    $.when(bizagi.showConfirmationBox(bizagi.localization.getResource(\"workportal-widget-admin-user-profiles-invalidate-confirm-msg\"), \"Bizagi\", \"warning\")).\n    done(function () {\n      $.when(self.dataService.removeUserFromProfile(params)).done(function (result) {\n        if (result.removed) {\n          self.getUserByProfileId(self.profileId);\n        } else {\n          bizagi.showMessageBox(self.getResource(\"workportal-widget-admin-user-profiles-message-cant-delete-user-from-organization\"), self.getResource(\"workportal-general-word-message\"), \"hidden\");\n        }\n      }).fail(function (error) {\n        bizagi.log(error);\n      });\n    });\n\n  },\n\n  /*\r\n      * initialize the users search form widget\r\n      */\n  setupUsersSearchForm: function setupUsersSearchForm() {\n    var self = this;\n    var content = self.getContent();\n    var def = $.Deferred();\n    $(\"#dinamicContent2\").html(\"\");\n\n\n    self.usersTable = new bizagi.workportal.widgets.userstable(self.workportalFacade, self.dataService, $.extend(self.params, {\n      canvas: $(\"#dinamicContent2\", content),\n      userLinkLabel: [bizagi.localization.getResource(\"workportal-general-select\")],\n      parentDef: def }));\n\n\n    self.usersTable.render();\n\n    $.when(def).done(function (userId, userName, userGuid) {\n      self.addUserToProfile(userGuid);\n    });\n  },\n\n  addUserToProfile: function addUserToProfile(userId) {\n    var self = this,\n    content = self.getContent(),\n    params = { idProfile: self.profileId, profileType: self.profileTypeId, idUser: userId };\n\n    $.when(self.dataService.addUserToProfile(params)).done(function (result) {\n      self.getUserByProfileId(self.profileId);\n    }).fail(function (error) {\n      bizagi.log(error);\n    });\n\n  },\n\n  /***********EVENTS ***********************************/\n\n  setupMainButtons: function setupMainButtons() {\n    var self = this,\n    content = self.getContent();\n\n    $(\"#btn-searchUserProfiles\", content).click(function () {\n      self.searchProfiles();\n    });\n\n    $(\"#btn-clearUserProfiles\", content).click(function () {\n      $(\"#txtTextnameProfile\", content).val(\"\");\n      $(\"#profileTypeList\").val(self.comboDefaultValue);\n      $(\"#profilesTableId\", content).remove();\n      self.setupProfileComboEvent();\n    });\n  },\n\n  setupManageLink: function setupManageLink() {\n    var self = this,\n    content = self.getContent();\n\n    $(\".manageLink\", content).click(function () {\n      var profileId = this.getAttribute(\"id\");\n      self.profileId = profileId;\n      self.getUserByProfileId(self.profileId);\n    });\n  },\n\n  setupManageButtons: function setupManageButtons() {\n    var self = this,\n    content = self.getContent();\n\n    $(\"#btn-returnUserProfiles\", content).click(function () {\n      self.setupData();\n    });\n\n    $(\"#btn-downloadUserProfiles\", content).click(function () {\n      self.exportToExcel();\n    });\n\n    $(\"#btn-newUserProfiles\", content).click(function () {\n      self.setupUsersSearchForm();\n    });\n\n    $(\".deleteLink\", content).click(function () {\n      self.removeUserFromProfile($(this)[0].getAttribute(\"id\"));\n    });\n  },\n\n  setupProfileComboEvent: function setupProfileComboEvent() {\n    var self = this,\n    content = self.getContent();\n\n    var optionSelected = $(\"#profileTypeList\", content).find('option:selected').val();\n    if (optionSelected == \"8\") {\n      $(\"#organizationListDiv\").show();\n    }\n\n    $(\"#profileTypeList\", content).change(function () {\n      optionSelected = $(this).find('option:selected').val();\n\n      if (optionSelected == \"8\") {\n        $(\"#organizationListDiv\").show();\n      } else {\n        $(\"#organizationListDiv\").hide();\n      }\n    });\n\n  } });","/**\r\n* Name: BizAgi Desktop Widget Dimensions\r\n* \r\n* @author Liliana Fernandez\r\n*/\n\n\nbizagi.workportal.widgets.admin.dimensions.extend(\"bizagi.workportal.widgets.admin.dimensions\", {}, {\n\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    //Load templates\n    self.loadTemplates({\n      \"dimensions\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.admin.dimensions\").concat(\"#ui-bizagi-workportal-widget-admin-dimensions\"),\n      \"dimensions.administrable\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.admin.dimensions\").concat(\"#ui-bizagi-workportal-widget-admin-dimensions-administrable\"),\n      \"dimensions.properties\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.admin.dimensions\").concat(\"#ui-bizagi-workportal-widget-admin-dimensions-properties\"),\n      \"dimensions.edit.properties\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.admin.dimensions\").concat(\"#ui-bizagi-workportal-widget-admin-dimensions-edit-properties\"),\n      useNewEngine: false });\n\n\n    self.isInitialLoad = true;\n    self.deferGetActiveWFClasses = undefined;\n  },\n\n  loadtemplates: function loadtemplates() {\n    var self = this;\n    //Template vars \n    self.generalContent = self.getTemplate(\"dimensions\");\n    self.listContent = self.getTemplate(\"dimensions.administrable\");\n    self.detailsContent = self.getTemplate(\"dimensions.properties\");\n    self.detailsEditContent = self.getTemplate(\"dimensions.edit.properties\");\n  },\n\n  postRender: function postRender() {\n    var self = this;\n\n    //load form data\n    self.setupData();\n  },\n\n  /*\r\n     * Setup form data\r\n     */\n  setupData: function setupData() {\n    var self = this;\n\n    self.setupInitialData();\n  },\n\n  /*\r\n     * Load form data\r\n     */\n  setupInitialData: function setupInitialData() {\n    var self = this,\n    content = self.getContent();\n\n    var columnDimensionsAdminWrapper = $(\"#column-dimensions-admin-wrapper\", content);\n    var columnDimensionsPropertiesWrapper = $(\"#column-dimensions-properties-wrapper\", content);\n\n    //append fields to wrapper\n    var list = $.tmpl(self.listContent, {});\n    var details = $.tmpl(self.detailsContent, {});\n\n    columnDimensionsAdminWrapper.html(list);\n    columnDimensionsPropertiesWrapper.html(details);\n\n    self.setupListProcessPanel1();\n    self.setupListProcessPanel2();\n\n    self.setupMainButtonsleft();\n    self.setupMainButtonsRight();\n  },\n\n  /*\r\n     * Dimensions List Panel1\r\n     */\n  setupDimensionsPanel1: function setupDimensionsPanel1(updatePanel2) {\n    var self = this,\n    content = self.getContent();\n\n    var defer = $.Deferred();\n\n    $.when(self.dataService.getDimensions()).\n    done(function (result) {\n      self.dimensions = result;\n\n      var $ulListAdmin = $('#DimenListAdmin', content);\n      var $ulListFixed = $('#DimenListFixed', content);\n\n      $ulListAdmin.find('dt').hide();\n\n      $('dd', $ulListAdmin).remove();\n      $('dd', $ulListFixed).remove();\n\n      $.each(result.dimensions, function (ind2, valu2) {\n\n        // When initially loaded dd DimensionsSelect elements must be hidden to prevent scroll issue\n        var elementClass = self.isInitialLoad ? \"ddDimensionsSelect hiddenDimensionsSelect\" : \"ddDimensionsSelect\";\n\n        if (bizagi.util.parseBoolean(valu2.administrable)) {\n          var $ulList = $ulListAdmin.find('dt#admin_' + valu2.idWfClass);\n          $ulList.append('<dd id=\"' + valu2.id + '\" class=\"' + elementClass + '\">' + \"<span>\" + valu2.displayName + \"</span>\" + \"</dd>\");\n        } else {\n          //var $ulList = $ulListFixed.find('dt#fixed_' + valu2.guidWfClass);\n          var $ulList = $ulListFixed.find(\"dt#fixed_\" + valu2.guidWfClass.toLowerCase());\n          $ulList.append('<dd id=\"' + valu2.guid + '\" class=\"' + elementClass + '\">' + \"<span>\" + valu2.displayName + \"</span>\" + \"</dd>\");\n        }\n\n        $ulList.show();\n      });\n\n      if (self.isInitialLoad) {\n        // Remove class added to prevent scroll issue\n        setTimeout(function () {\n          $ulListAdmin.find('dd').removeClass('hiddenDimensionsSelect');\n          $ulListFixed.find('dd').removeClass('hiddenDimensionsSelect');\n        }, 500);\n      }\n\n      self.isInitialLoad = false;\n\n      self.setupManageLink();\n      if (updatePanel2) {\n        self.setupDimensionsPanel2();\n      }\n\n      defer.resolve();\n    });\n\n    return defer.promise();\n  },\n\n  /**\r\n      * return the process name of the path\r\n      * @param {string} path \r\n      */\n  getProcessEntityPath: function getProcessEntityPath(path) {\n    return path.split(\".\")[0];\n  },\n\n  /**\r\n      * return the namepath of the entity\r\n      * @param {string} path \r\n      */\n  getNameEntityPath: function getNameEntityPath(path) {\n    path = path.split(\".\");\n    path.shift();\n    return path.join(\".\");\n  },\n\n  /*\r\n     * Dimensions List Panel2\r\n     */\n  setupDimensionsPanel2: function setupDimensionsPanel2() {\n    var self = this,\n    content = self.getContent();\n\n    if (self.dimensions.dimensions.length > 0) {\n      var resultfind = self.dimensions.dimensions[0];;\n      var description = resultfind.description;\n      var displayName = resultfind.displayName;\n      var id = resultfind.id;\n      var guid = resultfind.guid || \"\";\n      var idWfClass = resultfind.idWfClass;\n      var guidWfClass = resultfind.guidWfClass || \"\";\n      var administrable = resultfind.administrable;\n      var name = resultfind.name;\n      var nameEntityPath = \"\";\n      var entityPath = resultfind.entityPath;\n      self.fullPath = entityPath;\n      nameEntityPath = self.getNameEntityPath(entityPath);\n\n      $(\"#lblNameRead\").text(name);\n      $(\"#lblDisplayNameRead\").text(displayName);\n      $(\"#lblProcessRead\").text(self.getProcessEntityPath(entityPath));\n      $(\"#lblDescriptionRead\").text(description);\n      $(\"#lblPhatRead\").text(nameEntityPath);\n      if (administrable) {\n        $(\"#lblId\").val(id);\n        $(\"#lblidWfClass\").val(idWfClass);\n      } else {\n        $(\"#lblId\").val(guid);\n        $(\"#lblidWfClass\").val(guidWfClass);\n      }\n      $(\"#lblIsAdministrable\").val(administrable);\n\n      if (!bizagi.util.parseBoolean(administrable)) {\n        $(\"#btn-deleteDimensions\").hide();\n        $(\"#btn-editDimensions\").hide();\n      }\n\n    } else {\n      $(\"#content-table-dimensions-admin\").hide();\n    }\n\n  },\n\n  /*\r\n     * Process List Panel1\r\n     */\n  setupListProcessPanel1: function setupListProcessPanel1() {\n    var self = this,\n    content = self.getContent();\n\n    $.when(self.getActiveWFClasses()).done(function (result) {\n      self.processList = result;\n\n      var $ulListAdmin = $('#DimenListAdmin', content);\n      var $ulListFixed = $('#DimenListFixed', content);\n\n      $.each(result.WFClasses, function (ind, valu) {\n        //agregamos el elemento al final de la lista (con append)\n        $ulListAdmin.append('<dt id=admin_' + valu.id + ' class=\"titleDimensionProcess\">' + valu.displayName + '</dt>');\n        $ulListFixed.append('<dt id=fixed_' + valu.guid + ' class=\"titleDimensionProcess\">' + valu.displayName + '</dt>');\n      });\n\n      self.setupDimensionsPanel1(true);\n\n    });\n\n  },\n\n  /*\r\n     * Process List Panel2\r\n     */\n  setupListProcessPanel2: function setupListProcessPanel2() {\n    var self = this,\n    content = self.getContent();\n\n    $.when(self.getActiveWFClasses()).\n    done(function (result) {\n\n      $.each(result, function (ind1, valu1) {\n        $.each(valu1, function (ind2, valu2) {\n\n          var resultfind = valu2;\n          var name = resultfind.displayName;\n\n          $(\"#lblProcessRead\").text(name);\n\n        });\n      });\n    });\n  },\n\n  /*\r\n     * Select Display Dimensions\r\n     */\n  displayDimensionsById: function displayDimensionsById(dimensionId) {\n    var self = this,\n    content = self.getContent();\n\n    $.each(self.dimensions.dimensions, function (ind1, value) {\n      if (value.guid !== undefined && value.guid.toLowerCase() === dimensionId.toLowerCase()) {\n        self.fillFieldsWithSelectedDimension(value, dimensionId);\n        return false;\n      } else\n      if (value.guid === undefined && value.id == dimensionId) {\n        self.fillFieldsWithSelectedDimension(value, dimensionId);\n        return false;\n      }\n    });\n\n    $(\"#content-table-dimensions-edit\").remove();\n    $(\"#content-table-dimensions-admin\").show();\n  },\n\n\n  /*fill fields with values */\n  fillFieldsWithSelectedDimension: function fillFieldsWithSelectedDimension(value, dimensionId) {\n    var self = this,\n    content = self.getContent();\n\n    var description = value.description;\n    var displayName = value.displayName;\n    var name = value.name;\n    var entityPath = value.entityPath;\n    var idWfClass = value.idWfClass;\n    var isAdmin = value.administrable;\n    var nameEntityPath = \"\";\n    self.fullPath = entityPath;\n    nameEntityPath = self.getNameEntityPath(entityPath);\n\n    $(\"#lblNameRead\").text(name);\n    $(\"#lblDisplayNameRead\").text(displayName);\n    $(\"#lblDescriptionRead\").text(description);\n    $(\"#lblProcessRead\").text(self.getProcessEntityPath(entityPath));\n    $(\"#lblPhatRead\").text(nameEntityPath);\n    $(\"#lblId\").val(dimensionId);\n    $(\"#lblIsAdministrable\").val(isAdmin);\n    $(\"#lblidWfClass\").val(idWfClass);\n    self.displayProcessById(idWfClass);\n\n    if (!bizagi.util.parseBoolean(isAdmin)) {\n      $(\"#btn-deleteDimensions\").hide();\n      $(\"#btn-editDimensions\").hide();\n    } else {\n      $(\"#btn-deleteDimensions\").show();\n      $(\"#btn-editDimensions\").show();\n      $(\"#img_select_path\").focus();\n    }\n  },\n\n  /*\r\n     * Select Display Process\r\n     */\n  displayProcessById: function displayProcessById(idWfClass) {\n    var self = this,\n    content = self.getContent();\n\n    $.when(self.getActiveWFClasses()).\n    done(function (result) {\n\n      $.each(result, function (ind1, valu1) {\n        $.each(valu1, function (ind2, valu2) {\n          var resultfind = valu2;\n          var idProcess = resultfind.Id || resultfind.id;\n\n          if (idWfClass == idProcess) {\n            var name = resultfind.displayName;\n            $(\"#lblProcessRead\").text(name);\n            return false;\n          }\n        });\n      });\n    });\n  },\n\n  /*\r\n     * make request if has not made on same time\r\n     */\n  getActiveWFClasses: function getActiveWFClasses() {\n    var self = this,\n    getOrRequest = function getOrRequest(self, defer) {\n      if (defer === undefined) {\n        defer = self.newDeferGetActiveWFClasses();\n        makeRequest(self, defer);\n      }\n      return defer;\n    },\n    makeRequest = function makeRequest(self, defer) {\n      $.when(self.dataService.getActiveWFClasses()).\n      done(function (result) {\n        defer.resolve(result);\n        self.cleanDeferGetActiveWFClasses();\n      });\n    };\n    return getOrRequest(self, self.deferGetActiveWFClasses);\n  },\n\n  /**\r\n      * clean defer for GetActiveWFClasses request\r\n      */\n  cleanDeferGetActiveWFClasses: function cleanDeferGetActiveWFClasses() {\n    var self = this;\n    self.deferGetActiveWFClasses = undefined;\n  },\n\n  /**\r\n      * create new defer for GetActiveWFClasses request\r\n      */\n  newDeferGetActiveWFClasses: function newDeferGetActiveWFClasses() {\n    var self = this;\n    self.deferGetActiveWFClasses = new $.Deferred();\n    return self.deferGetActiveWFClasses;\n  },\n\n  /*\r\n     * New Dimensions\r\n     */\n  newDimensionAdmin: function newDimensionAdmin() {\n    var self = this;\n    var createTmpl = $.tmpl(self.detailsEditContent, { processList: self.processList.WFClasses });\n    self.action = \"create\";\n\n    $(\"#content-table-dimensions-edit\").remove();\n    $(\"#content-table-dimensions-admin\").hide();\n    $(\"#column-dimensions-properties-wrapper\").append(createTmpl);\n    self.setupManageButtons();\n    self.processComboOnChange();\n    $(\"#btn-newDimensions\").unbind(\"click\");\n    self.setupPathLink();\n  },\n\n  /*\r\n     * Validate required fields New Dimensions\r\n     */\n  validateData: function validateData() {\n    var pattern = /[`~!@#$%^&*()|+\\-=?;:..'\"<>,\\{\\}\\[\\]\\\\\\/]+/gi;\n    var emptyField;\n    var self = this,\n    content = self.getContent();\n\n    if ($.trim($(\"#txtNameEdit\", content).val()) == \"\") {\n      emptyField = bizagi.localization.getResource(\"workportal-widget-admin-dimensions-text-name\");\n    } else\n    if ($.trim($(\"#txtDisplayNameEdit\", content).val()) == \"\") {\n      emptyField = bizagi.localization.getResource(\"workportal-widget-admin-dimensions-text-displayName\");\n    } else\n    if ($(\"#txtPhatEdit\", content).val() == \"\") {\n      emptyField = bizagi.localization.getResource(\"workportal-widget-admin-dimensions-text-path\");\n    }\n\n    if (emptyField) {\n      bizagi.showMessageBox(bizagi.localization.getResource(\"workportal-widget-admin-dimensions-comfirm-message\") + \": \" + emptyField, \"Bizagi\", \"warning\");\n      return;\n    } else if (pattern.test($(\"#txtNameEdit\", content).val())) {\n      bizagi.showMessageBox(bizagi.localization.getResource(\"bz-rp-sensorsedt-formvalidation-invalidcharts\") + \": \" + bizagi.localization.getResource(\"workportal-widget-admin-dimensions-text-name\"));\n      return;\n    } else if (pattern.test($(\"#txtDisplayNameEdit\", content).val())) {\n      bizagi.showMessageBox(bizagi.localization.getResource(\"bz-rp-sensorsedt-formvalidation-invalidcharts\") + \": \" + bizagi.localization.getResource(\"workportal-widget-admin-dimensions-text-displayName\"));\n      return;\n    }\n\n    return \"true\";\n  },\n\n  /*\r\n     * Implement Changes in Dimensions\r\n     */\n  applyDimensionsAdmin: function applyDimensionsAdmin() {\n    var self = this,\n    content = self.getContent();\n\n    var displayName = $(\"#txtDisplayNameEdit\").val();\n    var name = $(\"#txtNameEdit\").val();\n    var idWfClass = $(\"#processTypeList\").val();\n    var description = $(\"#txtDescriptionEdit\").val();\n    var params = { displayName: displayName, name: name, idWfClass: idWfClass, entityPath: self.fullPath, description: description };\n    var noEmptyFields = self.validateData();\n\n    if (noEmptyFields == \"true\") {\n      $.when(self.dataService.createAdministrableDimension(params)).\n      done(function (result) {\n        if (result.id) {\n          self.setupMainButtonsleft();\n          $(\"#content-table-dimensions-edit\").hide();\n          $(\"#content-table-dimensions-admin\").show();\n\n          $.when(self.setupDimensionsPanel1(false)).\n          done(function () {\n            self.displayDimensionsById(result.id);\n          });\n        } else {\n          bizagi.showMessageBox(result.message, \"Bizagi\", \"warning\");\n        }\n\n      }).fail(function (error) {\n        var message = jQuery.parseJSON(error.responseText);\n\n        bizagi.showMessageBox(message.message, \"Bizagi\", \"warning\");\n      });\n    }\n\n  },\n\n  /*\r\n     * Implement Changes in Dimensions\r\n     */\n  cancelDimensionsAdmin: function cancelDimensionsAdmin() {\n    var self = this,\n    content = self.getContent();\n    $(\"#content-table-dimensions-edit\").remove();\n    if (self.dimensions.dimensions.length > 0)\n    $(\"#content-table-dimensions-admin\").show();\n    self.setupMainButtonsleft();\n  },\n\n  /*\r\n     * Delete Dimensions\r\n     */\n  deleteDimensionsAdmin: function deleteDimensionsAdmin(dimensionId) {\n    var self = this,\n    content = self.getContent();\n\n    var id = $(\"#lblId\").val();\n    var administrable = $(\"#lblIsAdministrable\").val();\n    var params = { id: id, administrable: administrable };\n\n    $.when(bizagi.showConfirmationBox(bizagi.localization.getResource(\"workportal-widget-admin-dimensions-invalidate-confirm-msg\"), \"Bizagi\", \"warning\")).\n    done(function () {\n      $.when(self.dataService.deleteDimension(params)).\n      done(function (result) {\n\n        self.setupData();\n\n      }).fail(function (error) {\n        bizagi.log(error);\n      });\n    });\n  },\n\n  /*\r\n     *\r\n     */\n  showEditInfo: function showEditInfo() {\n    var self = this;\n    var editTmpl = $.tmpl(self.detailsEditContent, { processList: self.processList.WFClasses });\n    self.action = \"edit\";\n\n    $(\"#content-table-dimensions-admin\").hide();\n    $(\"#column-dimensions-properties-wrapper\").append(editTmpl);\n\n    $(\"#processTypeList\").val($(\"#lblidWfClass\").val());\n    $(\"#txtNameEdit\").val($(\"#lblNameRead\").text());\n    $(\"#txtDisplayNameEdit\").val($(\"#lblDisplayNameRead\").text());\n    $(\"#txtDescriptionEdit\").val($(\"#lblDescriptionRead\").text());\n    $(\"#txtPhatEdit\").val($(\"#lblPhatRead\").text());\n\n    self.setupManageButtons();\n    self.processComboOnChange();\n    self.setupMainButtonsleft();\n    self.setupPathLink();\n    $(\"#img_select_path.iconSelectPath\").focus();\n  },\n  /*\r\n     * Edit Dimensions\r\n     */\n  editDimensionsAdmin: function editDimensionsAdmin() {\n    var self = this,\n    content = self.getContent;\n\n    var id = $(\"#lblId\").val();\n    var displayName = $(\"#txtDisplayNameEdit\").val();\n    var name = $(\"#txtNameEdit\").val();\n    var idWfClass = $(\"#processTypeList\").val();\n    var description = $(\"#txtDescriptionEdit\").val();\n    var params = { id: id, displayName: displayName, name: name, idWfClass: idWfClass, entityPath: self.fullPath, description: description };\n    var noEmptyFields = self.validateData();\n    var attributeName = self.getNameEntityPath(self.fullPath);\n\n    if (noEmptyFields == \"true\") {\n\n      $.when(self.dataService.editDimension(params)).\n      done(function (result) {\n        if (result.id) {\n          $(\"#lblidWfClass\").val(idWfClass);\n          $(\"#lblNameRead\").text(name);\n          $(\"#lblDisplayNameRead\").text(displayName);\n          $(\"#lblDescriptionRead\").text(description);\n          $(\"#lblPhatRead\").text(attributeName);\n          $(\"#lblProcessRead\").text($(\"#processTypeList option[value=\" + $(\"#processTypeList\").val() + \"]\").text());\n          $(\"#lblId\").val(id);\n\n          $(\"#content-table-dimensions-edit\").remove();\n          $(\"#content-table-dimensions-admin\").show();\n\n          self.setupDimensionsPanel1(false);\n        } else {\n          bizagi.showMessageBox(result.message, \"Bizagi\", \"warning\");\n        }\n      }).fail(function (error) {\n        var message = jQuery.parseJSON(error.responseText);\n\n        bizagi.showMessageBox(message.message, \"Bizagi\", \"warning\");\n      });\n    }\n  },\n\n  /*\r\n     * Display Panel Path\r\n     */\n  displayPath: function displayPath() {\n    var self = this,\n    content = self.getContent;\n\n    $(\"#entities-tree-wrapper\", content).show();\n    $(\"#entities-tree-wrapper\").draggable();\n    $(\"#shadow-panel\").css({\n      'width': $(\".ui-dialog\").width(),\n      'height': $(\".ui-dialog\").height(),\n      'background-color': 'grey',\n      'opacity': 0.1 });\n\n    self.setupEntitiesTree();\n    self.setupEntitiesTreeButtons();\n  },\n\n  /*\r\n     * initialize the entities tree widget\r\n     */\n  setupEntitiesTree: function setupEntitiesTree() {\n    var self = this;\n    var content = self.getContent();\n\n    self.entitiesTree = new bizagi.workportal.widgets.entitiestree(self.workportalFacade, self.dataService, $.extend(self.params, {\n      canvas: $(\"#tree-content\", content),\n      idWfClass: $(\"#lblidWfClass\").val() }));\n\n\n    self.entitiesTree.render();\n  },\n\n  /************************EVENTS ***********************************/\n\n  setupMainButtonsleft: function setupMainButtonsleft() {\n    var self = this,\n    content = self.getContent();\n\n    $(\"#btn-newDimensions\", content).click(function () {\n      self.newDimensionAdmin();\n    });\n  },\n\n  setupMainButtonsRight: function setupMainButtonsRight() {\n    var self = this,\n    content = self.getContent();\n\n    $(\"#btn-editDimensions\", content).click(function () {\n      self.showEditInfo();\n    });\n\n    $(\"#btn-deleteDimensions\", content).click(function () {\n      self.deleteDimensionsAdmin();\n    });\n  },\n\n  setupManageButtons: function setupManageButtons() {\n    var self = this,\n    content = self.getContent();\n\n    $(\"#btn-applyDimensions\", content).click(function () {\n      if (self.action == \"create\") {\n        self.applyDimensionsAdmin();\n      } else {\n        self.editDimensionsAdmin();\n      }\n    });\n\n    $(\"#btn-cancelDimensions\", content).click(function () {\n      self.cancelDimensionsAdmin();\n    });\n  },\n\n  setupManageLink: function setupManageLink() {\n    var self = this,\n    content = self.getContent();\n\n    $(\".ddDimensionsSelect\", content).click(function () {\n\n      var dimensionId = this.getAttribute(\"id\");\n      self.dimensionId = dimensionId;\n      self.displayDimensionsById(self.dimensionId);\n      self.setupMainButtonsleft();\n\n    });\n  },\n\n  setupPathLink: function setupPathLink() {\n    var self = this,\n    content = self.getContent();\n    $(\"#img_select_path\").focus();\n\n    $(\"#img_select_path\", content).click(function () {\n\n      self.displayPath();\n    });\n  },\n\n  processComboOnChange: function processComboOnChange() {\n    var self = this,\n    content = self.getContent();\n\n    $(\"#processTypeList\").click(function () {\n      $(\"#txtPhatEdit\").val(\"\");\n    });\n  },\n\n  setupEntitiesTreeButtons: function setupEntitiesTreeButtons() {\n    var self = this,\n    content = self.getContent();\n\n    $(\"#btn-close-tree\", content).unbind(\"click\").bind(\"click\", function () {\n      $(\"#entities-tree-wrapper\", content).hide();\n      $(\"#tree-content\", content).html(\"\");\n      $(\"#shadow-panel\").removeAttr(\"style\");\n    });\n\n    $(\"#btn-cancel-tree\", content).unbind(\"click\").bind(\"click\", function () {\n      $(\"#entities-tree-wrapper\", content).hide();\n      $(\"#tree-content\", content).html(\"\");\n      $(\"#shadow-panel\").removeAttr(\"style\");\n    });\n\n    $(\"#btn-save-tree\", content).unbind(\"click\").bind(\"click\", function () {\n      var treeRoute = self.entitiesTree.getTreeRouteSelected();\n      self.fullPath = treeRoute.path;\n      $(\"#txtPhatEdit\", content).val(treeRoute.name);\n      $(\"#entities-tree-wrapper\", content).hide();\n      $(\"#tree-content\", content).html(\"\");\n      $(\"#shadow-panel\").removeAttr(\"style\");\n    });\n  } });","/**\r\n * Alert module\r\n *\r\n * @author David Nino\r\n */\n\n\nbizagi.workportal.widgets.admin.alarms.extend(\"bizagi.workportal.widgets.admin.alarms\", {}, {\n\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    //Load templates\n    self.loadTemplates({\n      \"alarms\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.admin.alarms\").concat(\"#ui-bizagi-workportal-widget-admin-alarms\"),\n      \"alarms.task.list\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.admin.alarms\").concat(\"#ui-bizagi-workportal-widget-admin-alarms-list\"),\n      \"alarms.task.list.item\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.admin.alarms\").concat(\"#ui-bizagi-workportal-widget-admin-alarms-list-item\"),\n      \"alarms.task.detail\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.admin.alarms\").concat(\"#ui-bizagi-workportal-widget-admin-alarms-detail\"),\n      \"alarms.task.detail.alarm.editor\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.admin.alarms\").concat(\"#ui-bizagi-workportal-widget-admin-alarms-alarm-editor\"),\n      \"alarms.task.detail.list.table\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.admin.alarms\").concat(\"#ui-bizagi-workportal-widget-admin-alarms-detail-list-table\"),\n      \"alarms.task.detail.alarm.recipients\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.admin.alarms\").concat(\"#ui-bizagi-workportal-widget-admin-alarms-detail-alarm-recipients\"),\n      \"alarms.task.detail.alarm.recipients.table\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.admin.alarms\").concat(\"#ui-bizagi-workportal-widget-admin-alarms-detail-alarm-recipients-table\"),\n      useNewEngine: false });\n\n  },\n\n  postRender: function postRender() {\n    var self = this;\n\n    self.containtersID = {\n      GENERAL: \"general\",\n      DETAIL: \"detail\" };\n\n\n    self.listID = {\n      APPLICATION: {\n        name: \"ListBoxApplication\",\n        update: \"WORKFLOW\",\n        serviceMethod: \"getApplicationCategoriesList\" },\n\n      WORKFLOW: {\n        name: \"ListBoxWFClass\",\n        update: \"VERSION\",\n        serviceMethod: \"getApplicationProcesses\" },\n\n      VERSION: {\n        name: \"ListBoxWFVersion\",\n        update: \"TASKS\",\n        serviceMethod: \"getProcessVersion\" },\n\n      TASKS: {\n        name: \"ListBoxWorkFlow\",\n        update: \"\",\n        serviceMethod: \"getProcessTasks\" } };\n\n\n\n    self.widgetMode = {\n      VIEW_MODE: \"viewMode\",\n      EDIT_MODE: \"editMode\" };\n\n\n    self.alertData = {};\n\n    self.taskListTmpl = self.getTemplate(\"alarms.task.list\");\n    self.taskListItemTmpl = self.getTemplate(\"alarms.task.list.item\");\n    self.taskDetailTmpl = self.getTemplate(\"alarms.task.detail\");\n    self.taskDetailAlarmEditor = self.getTemplate(\"alarms.task.detail.alarm.editor\");\n\n    self.taskListTableTmpl = self.getTemplate(\"alarms.task.detail.list.table\");\n\n    self.taskDetailAlarmRecipientsTmpl = self.getTemplate(\"alarms.task.detail.alarm.recipients\");\n    self.taskDetailAlarmRecipientsTableTmpl = self.getTemplate(\"alarms.task.detail.alarm.recipients.table\");\n\n    self.initRenderTaskList();\n  },\n\n  initRenderTaskList: function initRenderTaskList() {\n    var self = this;\n\n    self.switchContent(self.containtersID.GENERAL);\n\n    var params = {\n      action: \"Applications\" };\n\n\n    $.when(self.dataService.getApplicationCategoriesList(params)).done(function (data) {\n      self.renderTaskList(data);\n    });\n  },\n\n  /*\r\n      *\r\n      */\n  renderTaskList: function renderTaskList(data) {\n    var self = this,\n    content = this.getContent();\n\n    var generalWrapper = $(\"#form-alarm-task-list\", content);\n\n    generalWrapper.empty();\n\n    // Render Form\n    $.tmpl(self.taskListTmpl).appendTo(generalWrapper);\n\n    //self.fillTaskListColumnByID( self.listID.APPLICATION, data);\n    self.fillTaskListColumnByID(\"APPLICATION\", data);\n\n    $(\"#btn-alarms\", generalWrapper).click(function (e) {\n\n      if (self.alertData) {\n        if (self.alertData[\"idTask\"] && self.alertData[\"idTask\"] != \"\") {\n\n          $.when(self.dataService.getTaskAlarms({\n            idTask: self.alertData[\"idTask\"] }),\n\n          self.dataService.getLapseMode(),\n          self.dataService.getRecurrMode(),\n          self.dataService.getScheduleType(),\n          self.dataService.getBossList()).\n\n          done(function (taskAlarms, lapseModeList, recurrModeList, scheduleTypeList, bossList, alarmRecipientsList) {\n\n            self.renderTaskDetail();\n\n            self.renderTaskListTable(taskAlarms[0]);\n\n            self.renderAlarmEditor(lapseModeList[0], recurrModeList[0], scheduleTypeList[0]);\n\n            self.renderAlarmRecipients(bossList[0], true);\n\n            self.switchContent(self.containtersID.DETAIL);\n\n            self.switchWidgetMode(self.widgetMode.VIEW_MODE);\n          });\n        }\n      }\n    });\n  },\n\n  /*\r\n      *\r\n      */\n  renderTaskDetail: function renderTaskDetail() {\n    var self = this,\n    content = this.getContent();\n\n    var detailWrapper = $(\"#form-alarm-task-detail\", content);\n    detailWrapper.empty();\n\n    var application = self.alertData[\"idAppText\"],\n    workflow = self.alertData[\"idWFClassText\"],\n    version = self.alertData[\"versionText\"],\n    task = self.alertData[\"idTaskText\"],\n    // Render Form\n    detailTmpl = self.getTemplate(\"alarms.task.detail\");\n\n    var detailcnt = $.tmpl(detailTmpl, {\n      application: application,\n      workflow: workflow,\n      version: version,\n      task: task });\n\n    detailWrapper.append(detailcnt).show();\n\n    //Add handlers\n    $(\"#btn-alarm-browser\", detailWrapper).click(function () {\n\n      //Clear data\n      self.alertData = {};\n\n      self.initRenderTaskList();\n    });\n\n    $(\"#btn-disable-alarms\", detailWrapper).click(function () {\n      self.callEnableDisableAlarmsService();\n    });\n\n    $(\"#btn-enable-alarms\", detailWrapper).click(function () {\n      self.callEnableDisableAlarmsService();\n    });\n\n\n    $(\"#btn-save-changes\", detailWrapper).click(function () {\n      //Validates if there is any error message from the Alarm Editor\n      var validateResult = self.validateAlarmEditor();\n\n      if (validateResult == \"\") {\n        self.sendAlarmEditorData(true);\n      } else {\n        bizagi.showMessageBox(validateResult, \"Bizagi\", \"warning\");\n      }\n    });\n\n    $(\"#btn-back\", detailWrapper).click(function () {\n      //switch to edit mode\n      self.switchWidgetMode(self.widgetMode.VIEW_MODE);\n\n      //Clear selected elements\n      self.clearSelectedAlarm();\n\n      self.resetAlarmEditor();\n\n      self.resetAlarmRecipientsTable();\n    });\n\n    $(\"#btn-add-alarm\", detailWrapper).click(function () {\n\n      //Validates if there is any error message from the Alarm Editor\n      var validateResult = self.validateAlarmEditor();\n\n      if (validateResult == \"\") {\n        self.sendAlarmEditorData();\n      } else {\n        bizagi.showMessageBox(validateResult, \"Bizagi\", \"warning\");\n      }\n    });\n  },\n\n  /*\r\n      *\r\n      */\n  renderAlarmEditor: function renderAlarmEditor(lapseModeList, recurrModeList, scheduleTypeList) {\n    var self = this,\n    content = this.getContent();\n\n    var detailWrapper = $(\"#form-alarm-task-detail\", content),\n    formEditorWrapper = $(\"#alarm-editor-form-wrapper\", detailWrapper);\n\n    formEditorWrapper.empty();\n\n    if (!self.alarmEditorData) {\n\n      self.localizateScheduleType(scheduleTypeList.scheduleType);\n\n      self.alarmEditorData = {\n        lapseModeList: lapseModeList.lapseMode,\n        recurrModeList: recurrModeList.recurrMode,\n        scheduleTypeList: scheduleTypeList.scheduleType };\n\n    }\n\n    // Render Form\n    $.tmpl(self.taskDetailAlarmEditor, {\n      lapseModeList: self.alarmEditorData.lapseModeList,\n      recurrModeList: self.alarmEditorData.recurrModeList,\n      scheduleTypeList: self.alarmEditorData.scheduleTypeList }).\n    appendTo(formEditorWrapper);\n\n    //Alarm Editor Handlers\n    $('input:radio[name=RadioButtonListLapseMode]', detailWrapper).on(\"change\", function (event) {\n      self.handleRadioButtonFields(event.currentTarget);\n    });\n\n    $('input:radio[name=RadioButtonListRecurMode]', detailWrapper).on(\"change\", function (event) {\n      self.handleRadioButtonFields(event.currentTarget);\n    });\n\n    $(\"#TextBoxAlarmTime\", detailWrapper).on(\"change\", function (event) {\n      self.validateInputFields(event.currentTarget);\n    });\n\n    $(\"#TextBoxRecurTime\", detailWrapper).on(\"change\", function (event) {\n      self.validateInputFields(event.currentTarget);\n    });\n  },\n\n\n  /**\r\n      * Localizate Schedule Type\r\n      */\n  localizateScheduleType: function localizateScheduleType(scheduleTypeList) {\n    for (var iType = 0; iType < scheduleTypeList.length; iType += 1) {\n      scheduleTypeList[iType].displayName = bizagi.localization.getResource(\"workportal-general-word-time-\" + scheduleTypeList[iType].displayName.toLowerCase());\n    }\n  },\n\n  sendAlarmEditorData: function sendAlarmEditorData(isUpdate) {\n\n    var self = this,\n    content = this.getContent();\n\n    var detailWrapper = $(\"#form-alarm-task-detail\", content),\n    alarmEditorFormWrapper = $(\"#alarm-editor-form-wrapper\", detailWrapper),\n    isCheckBoxOn = $(\"#CheckBoxToCurrentAssignee\", alarmEditorFormWrapper).is(':checked'),\n    params = {},\n    serviceMethodName;\n\n    params.idTask = self.alertData.idTask;\n    params.idRecurrMode = $('input:radio[name=RadioButtonListRecurMode]:checked').val();\n    params.idLapseMode = $('input:radio[name=RadioButtonListLapseMode]:checked').val();\n    params.scheduleType = $(\"#DropDownListRecurTime\", alarmEditorFormWrapper).val();\n    params.alarmTime = $(\"#TextBoxAlarmTime\", alarmEditorFormWrapper).val();\n    params.alarmRecurrTime = $(\"#TextBoxRecurTime\", alarmEditorFormWrapper).val();\n\n    if (params.alarmTime == \"\")\n    params.alarmTime = 0;\n\n    if (params.alarmRecurrTime == \"\")\n    params.alarmRecurrTime = 0;\n\n    if (isCheckBoxOn === true) {\n      params.sendToCurrentAssignee = 1;\n    } else if (isCheckBoxOn === false) {\n      params.sendToCurrentAssignee = 0;\n    }\n\n    if (isUpdate) {\n      params.idAlarm = self.selectedAlarm.idAlarm;\n      serviceMethodName = \"editAlarm\";\n    } else\n    serviceMethodName = \"addAlarm\";\n\n    $.when(self.dataService[serviceMethodName](params)).done(function (data) {\n      if (data.response)\n      self.refreshTaskListTable();\n    });\n  },\n\n  refreshTaskListTable: function refreshTaskListTable() {\n    var self = this;\n\n    self.clearSelectedAlarm();\n    self.resetAlarmEditor();\n    self.switchWidgetMode(self.widgetMode.VIEW_MODE);\n\n    $.when(self.dataService.getTaskAlarms({\n      idTask: self.alertData[\"idTask\"] })).\n    done(function (data) {\n      self.renderTaskListTable(data);\n    });\n  },\n\n  /*\r\n      *\r\n      */\n  refreshAlarmRecipientsTable: function refreshAlarmRecipientsTable() {\n\n    var self = this;\n\n    //self.clearSelectedAlarm();\n    //self.resetAlarmEditor();\n\n    //self.switchWidgetMode(self.widgetMode.VIEW_MODE);\n\n    var params = {\n      idAlarm: self.selectedAlarm.idAlarm };\n\n    $.when(self.dataService.getAlarmRecipients(params)).done(function (data) {\n      self.renderAlarmRecipientsTable(data);\n    });\n  },\n\n\n  /*\r\n      *\r\n      */\n  renderTaskListTable: function renderTaskListTable(data) {\n    var self = this;\n    var content = this.getContent();\n\n    var detailWrapper = $(\"#form-alarm-task-detail\", content),\n    alarmTableListWrapper = $(\"#alarm-list-table-wrapper\", detailWrapper);\n\n    alarmTableListWrapper.empty();\n\n    // Render Form\n    $.tmpl(self.taskListTableTmpl, {\n      alarmList: data.alarms }).\n    appendTo(alarmTableListWrapper);\n\n    //Stores the alarm list obj\n    self.alarmsList = [].concat(data.alarms);\n\n\n    //Detect manually the alarms State : Enable/Disable\n    if (self.alarmsList.length > 0) {\n      if (self.alarmsList[0].active == \"true\")\n      self.switchEnableAlarms(true);else\n\n      self.switchEnableAlarms(false);\n    } else\n    self.switchEnableAlarms(false);\n\n\n    //Reset any selected alarm\n    self.selectedAlarm = undefined;\n\n    $(\".edit\", alarmTableListWrapper).click(function (e) {\n\n      //switch to edit mode\n      self.switchWidgetMode(self.widgetMode.EDIT_MODE);\n\n      //Clear selected elements\n      self.clearSelectedAlarm();\n\n      //Highlight the selected alarm row\n      $($(e.currentTarget).closest(\"tr\")[0]).addClass('selected');\n\n      //Fill the detail form using the idalarm as a referente\n      self.fillAlarmDetailForm($(e.currentTarget).data(\"idalarm\"));\n\n      // Retreives the Recipients form that Alarm\n      var params = {\n        idAlarm: $(e.currentTarget).data().idalarm };\n\n      $.when(self.dataService.getAlarmRecipients(params)).done(function (data) {\n        self.renderAlarmRecipientsTable(data);\n      });\n    });\n\n    $(\".delete\", alarmTableListWrapper).click(function (e) {\n      //console.log('delete ',$(e.currentTarget).data().idalarm);\n\n      var idAlarm = $(e.currentTarget).data(\"idalarm\");\n\n      $.when(self.dataService.deleteAlarm({\n        idAlarm: idAlarm })).\n      done(function (data) {\n        if (data.response === true) {\n          //switch to view mode\n          self.switchWidgetMode(self.VIEW_MODE);\n\n          self.refreshTaskListTable();\n        }\n      });\n    });\n  },\n\n  /*\r\n      *\r\n      */\n  clearSelectedAlarm: function clearSelectedAlarm() {\n\n    var self = this,\n    content = this.getContent();\n\n    var alarmTableListWrapper = $(\"#alarm-list-table-wrapper\", content);\n\n    $(\"tr\", alarmTableListWrapper).removeClass(\"selected\");\n\n    //Clears the selected element\n    self.selectedAlarm = undefined;\n  },\n\n  /*\r\n      *\r\n      */\n  resetAlarmEditor: function resetAlarmEditor() {\n    var self = this,\n    content = this.getContent();\n\n    var alarmEditorFormWrapper = $(\"#alarm-editor-form-wrapper\", content),\n    fields = $('input[name = RadioButtonListLapseMode]', alarmEditorFormWrapper).length + 1;\n\n    while (fields-- > 1) {\n      $('input[name=RadioButtonListLapseMode][value=' + fields + ']', alarmEditorFormWrapper)[0].checked = false;\n      $('input[name=RadioButtonListRecurMode][value=' + fields + ']', alarmEditorFormWrapper)[0].checked = false;\n    }\n\n    //alarmTime\n    $(\"#TextBoxAlarmTime\", alarmEditorFormWrapper).val(\"\");\n\n    //alarmTime\n    $(\"#TextBoxRecurTime\", alarmEditorFormWrapper).val(\"\");\n\n    //idScheduleType\n    $(\"#DropDownListRecurTime\", alarmEditorFormWrapper).val(\"1\");\n\n    $(\"#CheckBoxToCurrentAssignee\", alarmEditorFormWrapper).attr(\"checked\", false);\n\n    self.resetAlarmRecipientsTable();\n  },\n\n  /*\r\n      *\r\n      */\n  resetAlarmRecipientsTable: function resetAlarmRecipientsTable() {\n\n    var self = this,\n    content = this.getContent();\n\n    var alarmRecipientsTableWrapper = $(\"#alarm-recipients-table-wrapper\", content);\n    alarmRecipientsTableWrapper.empty();\n\n    //Resets current selection\n    $(\"#DropDownListRecipients\", content).val(0);\n  },\n\n  /*\r\n      *\r\n      */\n  renderAlarmRecipients: function renderAlarmRecipients(data, isAlarmSelected) {\n    var self = this,\n    content = this.getContent();\n\n    var detailWrapper = $(\"#form-alarm-task-detail\", content),\n    alarmRecipientsListWrapper = $(\"#alarm-recipients-form-wrapper\", detailWrapper);\n\n    // Render Form\n    $.tmpl(self.taskDetailAlarmRecipientsTmpl, {\n      bossList: data.bosses }).\n    appendTo(alarmRecipientsListWrapper);\n\n\n    $(\"#btn-add-recipient\", alarmRecipientsListWrapper).click(function () {\n      if (self.currentWidgetMode == self.widgetMode.EDIT_MODE) {\n\n        //Gets the selected recipient\n        var params = {\n          idRecipient: $(\"#DropDownListRecipients\", alarmRecipientsListWrapper).val(),\n          idAlarm: self.selectedAlarm.idAlarm };\n\n\n        if (params.idRecipient) {\n          $.when(self.dataService.addRecipientToAlarm(params)).done(function (data) {\n            if (data.response === true) {\n              self.refreshAlarmRecipientsTable();\n            } else {\n              bizagi.showMessageBox(bizagi.localization.getResource(\"workportal-widget-admin-users-error\"), \"Bizagi\", \"warning\");\n            }\n          });\n        } else {\n          bizagi.showMessageBox(bizagi.localization.getResource('workportal-general-word-select-one-option'), \"Bizagi\", \"warning\");\n        }\n      }\n    });\n\n    $(\"#btn-delete-recipient\", alarmRecipientsListWrapper).click(function () {\n      if (self.currentWidgetMode == self.widgetMode.EDIT_MODE) {\n\n        var alarmRecipientsTableWrapper = $(\"#alarm-recipients-table-wrapper\", detailWrapper),\n        checkedElements = $(\"input:checked\", alarmRecipientsTableWrapper);\n\n        if (checkedElements.length > 0) {\n\n          var recipientsIDs = [],\n          i = checkedElements.length;\n\n          while (i-- > 0) {\n            recipientsIDs.push($(checkedElements[i]).data(\"idrecipient\"));\n          }\n\n          //Gets the selected recipient\n          var recipientsString = JSON.stringify({\n            \"recipients\": recipientsIDs }),\n\n          params = {\n            \"idRecipients\": recipientsString };\n\n\n          $.when(self.dataService.deleteRecipientsFromAlarm(params)).done(function (data) {\n            if (data.deletedRecipients.length > 0) {\n              self.refreshAlarmRecipientsTable();\n            }\n          });\n        }\n      }\n    });\n  },\n\n  /*\r\n      *\r\n      */\n  renderAlarmRecipientsTable: function renderAlarmRecipientsTable(data) {\n    var self = this,\n    content = this.getContent();\n\n    var detailWrapper = $(\"#form-alarm-task-detail\", content),\n    alarmRecipientsTableWrapper = $(\"#alarm-recipients-table-wrapper\", detailWrapper);\n\n    alarmRecipientsTableWrapper.empty();\n\n    // Render Form\n    $.tmpl(self.taskDetailAlarmRecipientsTableTmpl, {\n      recipientsList: data.recipients }).\n    appendTo(alarmRecipientsTableWrapper);\n  },\n\n  /*\r\n      *\r\n      */\n  fillAlarmDetailForm: function fillAlarmDetailForm(idAlarm) {\n\n    var self = this,\n    content = this.getContent();\n\n    var detailWrapper = $(\"#form-alarm-task-detail\", content),\n    alarmEditorFormWrapper = $(\"#alarm-editor-form-wrapper\", detailWrapper),\n    i = self.alarmsList.length,\n    selectedAlarm;\n\n    //Gets the selected alarm data\n    while (i-- > 0) {\n      if (self.alarmsList[i].idAlarm == idAlarm) {\n        selectedAlarm = self.alarmsList[i];\n        break;\n      }\n    }\n\n    self.selectedAlarm = selectedAlarm;\n\n    //idLapseMode\n    $('input[name=RadioButtonListLapseMode][value=' + selectedAlarm.idLapseMode + ']', alarmEditorFormWrapper)[0].checked = true;\n\n    //idRecurrMode\n    $('input[name=RadioButtonListRecurMode][value=' + selectedAlarm.idRecurrMode + ']', alarmEditorFormWrapper)[0].checked = true;\n\n    //alarmTime\n    $(\"#TextBoxAlarmTime\", alarmEditorFormWrapper).val(selectedAlarm.alarmTime);\n\n    //alarmTime\n    $(\"#TextBoxRecurTime\", alarmEditorFormWrapper).val(selectedAlarm.alarmRecurrTime);\n\n    //idScheduleType\n    $(\"#DropDownListRecurTime\", alarmEditorFormWrapper).val(selectedAlarm.idScheduleType);\n\n    // QA-873 the 'send to current assignee' element must be updated.\n    //Send to Current Assignee\n    $(\"#CheckBoxToCurrentAssignee\", alarmEditorFormWrapper).prop(\"checked\", selectedAlarm.sendToCurrAssignee);\n  },\n\n  /*\r\n      *\r\n      */\n  handleRadioButtonFields: function handleRadioButtonFields(field) {\n\n    var self = this,\n    content = this.getContent();\n\n    var alarmEditorFormWrapper = $(\"#alarm-editor-form-wrapper\", content),\n    fieldValue = field.value;\n\n    if (field.name == \"RadioButtonListLapseMode\") {\n      //Validates if the idLapseMode its diferent to 2(On Expiration), so then, the Alarm Time must be more than 0\n      if (fieldValue != 2) {\n        $(\"#TextBoxAlarmTime\", alarmEditorFormWrapper).attr('disabled', false);\n      } else {\n        //Empty the field\n        $(\"#TextBoxAlarmTime\", alarmEditorFormWrapper).val(\"\");\n        $(\"#TextBoxAlarmTime\", alarmEditorFormWrapper).attr('disabled', true);\n      }\n    } else\n    if (field.name == \"RadioButtonListRecurMode\") {\n      //Validates if the idRecurrMode its equal to 1 (Each recurr time), so then, the Alarm Time must be more than 0\n      if (fieldValue != 1) {\n        $(\"#TextBoxRecurTime\", alarmEditorFormWrapper).attr('disabled', true);\n\n        //Empty the field\n        $(\"#TextBoxRecurTime\", alarmEditorFormWrapper).val(\"\");\n      } else\n      $(\"#TextBoxRecurTime\", alarmEditorFormWrapper).attr('disabled', false);\n    }\n  },\n\n  /*\r\n      *\r\n      */\n  validateInputFields: function validateInputFields(field) {\n\n    var maxValueAllowedInt32 = 2147483647;\n    var self = this,\n    content = this.getContent();\n\n    var alarmEditorFormWrapper = $(\"#alarm-editor-form-wrapper\", content),\n    alertMessage = \"\",\n    fieldValue = parseInt(field.value);\n\n    if (isNaN(fieldValue))\n    field.value = '';else\n\n    if (fieldValue < 0)\n    field.value = fieldValue * -1;else\n    if (fieldValue > maxValueAllowedInt32) {\n      field.value = maxValueAllowedInt32;\n    } else\n    {\n\n      if (field.id == \"TextBoxAlarmTime\") {\n        var idLapseMode = $($('input:radio[name=RadioButtonListLapseMode][checked=checked]')[0]).val(),\n        alarmTime = fieldValue;\n\n        if (!(idLapseMode != 2 && alarmTime > 0)) {\n          alertMessage = \"Unless the selected lapse mode is On Expiration the alarm time cannot be empty\";\n        }\n      } else\n      if (field.id == \"TextBoxRecurTime\") {\n\n        var idRecurrMode = $($('input:radio[name=RadioButtonListRecurMode][checked=checked]')[0]).val(),\n        alarmRecurrTime = fieldValue;\n\n        if (!(idLapseMode == 1 && alarmTime > 0)) {\n          alertMessage = \"Please review the Alarm Editor fields, the folowing are empty or unselected\";\n        }\n      }\n    }\n  },\n\n  /*\r\n      *\r\n      */\n  validateAlarmEditor: function validateAlarmEditor() {\n    var self = this,\n    content = this.getContent();\n\n    var result = \"\",\n    isValid = false,\n    alarmEditorFormWrapper = $(\"#alarm-editor-form-wrapper\", content);\n\n    //1\n    var idLapseMode = $('input:radio[name=RadioButtonListLapseMode]:checked').val(),\n    alarmTime = $(\"#TextBoxAlarmTime\", alarmEditorFormWrapper).val();\n\n    //2\n    var idRecurrMode = $('input:radio[name=RadioButtonListRecurMode]:checked').val(),\n    alarmRecurrTime = $(\"#TextBoxRecurTime\", alarmEditorFormWrapper).val();\n\n\n    if (idLapseMode) {\n      if (!(idLapseMode != 2 && alarmTime > 0 || idLapseMode == 2 && (alarmTime == \"\" || alarmTime == 0))) {\n\n        result += \"<li>\" + bizagi.localization.getResource(\"workportal-widget-admin-alarms-error-message-on-expiration\") + '</li>';\n      }\n    } else {\n\n      result += \"<li>\" + bizagi.localization.getResource(\"workportal-widget-admin-alarms-field-title-lapse\") + '</li>';\n\n      if (alarmTime == \"\")\n      result += \"<li>\" + bizagi.localization.getResource(\"workportal-widget-admin-alarms-group-title-timing\") + \" - \" + bizagi.localization.getResource(\"workportal-widget-admin-alarms-field-title-lapse\") + '</li>';\n    }\n\n    if (idRecurrMode) {\n      if (!(idRecurrMode != 1 && (alarmRecurrTime == \"\" || alarmRecurrTime == 0) || idRecurrMode == 1 && alarmRecurrTime > 0)) {\n\n        result += \"<li>\" + bizagi.localization.getResource(\"workportal-widget-admin-alarms-error-message-each-recurr\") + '</li>';\n      }\n    } else {\n      result += \"<li>\" + bizagi.localization.getResource(\"workportal-widget-admin-alarms-group-title-alarm-recur\") + '</li>';\n\n      if (alarmRecurrTime == \"\")\n      result += \"<li>\" + bizagi.localization.getResource(\"workportal-widget-admin-alarms-group-title-timing\") + \" - \" + bizagi.localization.getResource(\"workportal-widget-admin-alarms-field-title-alarm-recur-time\") + '</li>';\n    }\n\n    if (result != \"\")\n    result = bizagi.localization.getResource(\"workportal-widget-admin-alarms-error-message-review\") + '</br></br> <ul>' + result + \"</ul>\";\n\n    return result;\n  },\n\n  /*\r\n      *\r\n      */\n  fillTaskListColumnByID: function fillTaskListColumnByID(listName, data) {\n\n    var self = this,\n    content = this.getContent();\n\n    var listObj = self.listID[listName],\n    generalWrapper = $(\"#form-alarm-task-list\", content),\n    listElement = $(\"#\" + listObj.name, generalWrapper);\n\n\n    //listElement.empty();\n\n    switch (listName) {\n      case \"APPLICATION\":\n        $.tmpl(self.taskListItemTmpl, {\n          taskField: listName,\n          elementList: data.items }).\n        appendTo(listElement);\n        break;\n\n      case \"WORKFLOW\":\n        $.tmpl(self.taskListItemTmpl, {\n          taskField: listName,\n          elementList: data.processes }).\n        appendTo(listElement);\n        break;\n\n      case \"VERSION\":\n        $.tmpl(self.taskListItemTmpl, {\n          taskField: listName,\n          elementList: data.versions }).\n        appendTo(listElement);\n        break;\n\n      case \"TASKS\":\n        $.tmpl(self.taskListItemTmpl, {\n          taskField: listName,\n          elementList: data.tasks }).\n        appendTo(listElement);\n        break;}\n\n\n    listElement.unbind(\"change\");\n\n    //Add selects handlers\n    listElement.bind(\"change\", function (e) {\n      self.updateListsContent(e.currentTarget);\n    });\n  },\n\n  /*\r\n      *\r\n      */\n  updateListsContent: function updateListsContent(currentTarget) {\n    var self = this;\n\n    //Captures the data\n    var listCategory = self.getListCategoryByID(currentTarget.id);\n    self.captureSelectedData(listCategory, currentTarget);\n\n    var elementToUpdate = self.getElementToUpdate(currentTarget.id);\n\n    //checks if there is any list element to update\n    if (elementToUpdate != \"\") {\n      var params = {};\n\n      //Clear lists\n      self.processLists(currentTarget.id);\n\n      params = self.setupParametersbyListID(elementToUpdate);\n\n\n      $.when(self.dataService[self.listID[elementToUpdate].serviceMethod](params)).done(function (data) {\n\n        self.fillTaskListColumnByID(elementToUpdate, data);\n      });\n    }\n  },\n\n  /*\r\n      *\r\n      */\n  captureSelectedData: function captureSelectedData(listCategory, currentTarget) {\n\n    var self = this;\n\n    switch (listCategory) {\n      case \"APPLICATION\":\n        self.alertData[\"idApp\"] = $(currentTarget.options[currentTarget.selectedIndex]).val();\n        self.alertData[\"idAppText\"] = currentTarget.options[currentTarget.selectedIndex].text;\n        break;\n\n      case \"WORKFLOW\":\n        self.alertData[\"idWFClass\"] = $(currentTarget.options[currentTarget.selectedIndex]).val();\n        self.alertData[\"idWFClassText\"] = currentTarget.options[currentTarget.selectedIndex].text;\n        break;\n\n      case \"VERSION\":\n        self.alertData[\"version\"] = $(currentTarget.options[currentTarget.selectedIndex]).val();\n        self.alertData[\"versionText\"] = currentTarget.options[currentTarget.selectedIndex].text;\n        break;\n\n      case \"TASKS\":\n        self.alertData[\"idTask\"] = $(currentTarget.options[currentTarget.selectedIndex]).val();\n        self.alertData[\"idTaskText\"] = currentTarget.options[currentTarget.selectedIndex].text;\n        break;}\n\n  },\n\n  /*\r\n      *\r\n      */\n  setupParametersbyListID: function setupParametersbyListID(id) {\n\n    var self = this,\n    params = {};\n\n    switch (id) {\n      case \"APPLICATION\":\n        params = {\n          action: \"getApplications\" };\n\n        break;\n\n      case \"WORKFLOW\":\n        params[\"idApp\"] = self.alertData[\"idApp\"];\n        break;\n      case \"VERSION\":\n        params[\"idWFClass\"] = self.alertData[\"idWFClass\"];\n        break;\n      case \"TASKS\":\n        params[\"idWFClass\"] = self.alertData[\"idWFClass\"];\n        params[\"version\"] = self.alertData[\"version\"];\n        break;}\n\n\n    return params;\n  },\n\n  /*\r\n      *\r\n      */\n  resetParametersbyListID: function resetParametersbyListID(listCategory) {\n\n    var self = this;\n\n    switch (listCategory) {\n      case \"APPLICATION\":\n        self.alertData[\"idApp\"] = \"\";\n        break;\n\n      case \"WORKFLOW\":\n        self.alertData[\"idWFClass\"] = \"\";\n        break;\n\n      case \"VERSION\":\n        self.alertData[\"version\"] = \"\";\n        break;\n\n      case \"TASKS\":\n        self.alertData[\"idTask\"] = \"\";\n        break;}\n\n  },\n\n  /*\r\n      *\r\n      */\n  processLists: function processLists(id) {\n\n    var self = this,\n    content = self.getContent();\n\n    var taskListWrapper = $(\"#form-alarm-task-list\", content),\n    currentListID = self.getElementToUpdate(id);\n\n    if (currentListID != \"\") {\n\n      //Empty list content\n      $(\"#\" + self.listID[currentListID].name, taskListWrapper).empty();\n\n      //Empty current data\n      self.resetParametersbyListID(currentListID);\n\n      while (currentListID != \"\") {\n        currentListID = self.getElementToUpdate(self.listID[currentListID].name);\n\n        if (currentListID != \"\") {\n          //Clean list\n          $(\"#\" + self.listID[currentListID].name, taskListWrapper).empty();\n\n          $(\"#\" + self.listID[currentListID].name, taskListWrapper).empty();\n        }\n      }\n    }\n  },\n\n  /*\r\n      *\r\n      */\n  getElementToUpdate: function getElementToUpdate(val) {\n    var self = this,\n    result = self.getListCategoryByID(val);\n\n    return self.listID[result].update;\n  },\n\n  /*\r\n      *\r\n      */\n  getListCategoryByID: function getListCategoryByID(id) {\n    var self = this;\n\n    for (var x in self.listID) {\n      if (id == self.listID[x].name)\n      return x;\n    }\n\n    return \"\";\n  },\n\n  /*\r\n      *\r\n      */\n  callEnableDisableAlarmsService: function callEnableDisableAlarmsService() {\n    var self = this;\n\n    var params = {\n      idTask: self.alertData[\"idTask\"] };\n\n\n    $.when(self.dataService.enableAlarm(params)).done(function (data) {\n\n      if (data.response === true) {\n        self.switchEnableAlarms();\n        self.refreshTaskListTable();\n      }\n\n    });\n  },\n\n  /*\r\n      *\r\n      */\n  switchEnableAlarms: function switchEnableAlarms(value) {\n    var self = this,\n    content = self.getContent();\n\n    var detailWrapper = $(\"#form-alarm-task-detail\", content);\n    if (value) {\n      $(\"#btn-enable-alarms\", detailWrapper).hide();\n      $(\"#btn-disable-alarms\", detailWrapper).show();\n    } else {\n      $(\"#btn-enable-alarms\", detailWrapper).show();\n      $(\"#btn-disable-alarms\", detailWrapper).hide();\n    }\n  },\n\n  /*\r\n      *\r\n      */\n  switchContent: function switchContent(contentToDisplay) {\n    var self = this,\n    content = self.getContent();\n\n    var generalWrapper = $(\"#form-alarm-task-list\", content),\n    detailWrapper = $(\"#form-alarm-task-detail\", content);\n\n\n    if (self.containtersID.DETAIL == contentToDisplay) {\n      generalWrapper.hide();\n      detailWrapper.show();\n    } else {\n      generalWrapper.show();\n      detailWrapper.hide();\n    }\n  },\n\n  /*\r\n      *\r\n      */\n  switchWidgetMode: function switchWidgetMode(widgetMode) {\n\n    var self = this,\n    content = self.getContent();\n\n    var generalWrapper = $(\"#form-alarm-task-list\", content),\n    detailWrapper = $(\"#form-alarm-task-detail\", content);\n\n    switch (widgetMode) {\n      case self.widgetMode.VIEW_MODE:\n        $(\"#btn-save-changes\", detailWrapper).hide();\n        $(\"#btn-back\", detailWrapper).hide();\n        $(\"#btn-delete-recipient\", detailWrapper).show();\n        $(\"#alarm-recipients-table-content\", detailWrapper).show();\n        $(\"#btn-add-recipient\", detailWrapper).show();\n\n        $(\"#btn-add-alarm\", detailWrapper).show();\n\n        break;\n\n      case self.widgetMode.EDIT_MODE:\n        $(\"#btn-save-changes\", detailWrapper).show();\n        $(\"#btn-back\", detailWrapper).show();\n        $(\"#btn-delete-recipient\", detailWrapper).show();\n        $(\"#alarm-recipients-table-content\", detailWrapper).show();\n        $(\"#btn-add-recipient\", detailWrapper).show();\n\n\n        $(\"#btn-add-alarm\", detailWrapper).hide();\n\n        break;}\n\n\n    self.currentWidgetMode = widgetMode;\n  } });","/**\r\n* Name: BizAgi Desktop Widget User Licenses\r\n* \r\n* @author Liliana Fernandez\r\n*/\n\n\nbizagi.workportal.widgets.admin.user.licenses.extend(\"bizagi.workportal.widgets.admin.user.licenses\", {}, {\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    //Load templates\n    self.loadTemplates({\n      \"user.licenses\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.admin.user.licenses\").concat(\"#ui-bizagi-workportal-widget-admin-user-licenses\"),\n      useNewEngine: false });\n\n\n    this.serviceLocator = dataService.serviceLocator;\n  },\n\n  loadtemplates: function loadtemplates() {\n    var self = this;\n    //Template vars \n    self.generalContent = self.getTemplate(\"user.licenses\");\n    //        self.fieldsContent = self.workportalFacade.getTemplate(\"defaults.assignation.user.fields\");\n  },\n\n  postRender: function postRender() {\n    var self = this;\n\n    //load form data\n    self.setupData();\n  },\n\n  /*\r\n     * Setup form data\r\n     */\n  setupData: function setupData() {\n    var self = this;\n\n    self.setupInitialData();\n    self.setupButton();\n\n  },\n\n  /*\r\n     * Load form data\r\n     */\n  setupInitialData: function setupInitialData() {\n    var self = this,\n    content = self.getContent();\n\n    $.when(self.dataService.licenses()).\n    done(function (result) {\n      if (result.licenseType == \"none\") {\n        $(\"#licenseAlert\").show();\n        $(\"#licenseContent\").hide();\n      } else {\n        $(\"#licenseContent\").show();\n        $(\"#licenseAlert\").hide();\n        if (result.expirationDate == \"\") {\n          var expirationDate = \"12/31/9999\";\n        } else {\n          var expirationDate = result.expirationDate.substring(0, 11);\n        }\n\n        if (result.licenseType == \"Volume\") {\n          $(\"#users\").text(result.activeUsers + \" \" + bizagi.localization.getResource(\"workportal-widget-admin-user-licenses-titles-usersLicenses-text\"));\n        } else {\n          $(\"#users\").text(result.activeUsers + \"/\" + result.licensedUsersAccount + \"  \" + bizagi.localization.getResource(\"workportal-widget-admin-user-licenses-titles-usersLicenses-text\"));\n        }\n        $(\"#licenses\").text(result.customerName);\n\n        $(\"#date\").text(expirationDate);\n        $(\"#licenseType\").text(result.licenseType);\n        $(\"#licenseCluster\").text(result.clustered);\n        //$(\"#activeProcess\").text(result.activeProcess);\n      }\n\n      $(\"#cases-tabs\").tabs();\n\n    });\n  },\n\n  setupButton: function setupButton() {\n    var self = this,\n    content = self.getContent();\n\n    $(\"#btn-buyNowLicenses\", content).click(function (e) {\n\n      window.open('http://www.bizagi.com/', 'name', 'height=600,width=1000,resizable=yes');\n    });\n    $(\"#btn-auditLicenses\", content).click(function (e) {\n\n\n      $.when(self.dataService.getAuditLicense()).done(function (result) {\n\n      }).fail(function (result) {\n\n      });\n\n    });\n\n    self.downloadBPUs();\n  },\n  downloadBPUs: function downloadBPUs() {\n    var self = this,\n    content = self.getContent();\n    /* Download BPUs report*/\n    $(\"#btn-download-bpus\", content).click(function (e) {\n      var url = self.serviceLocator.getUrl(\"downloadBPUsReport\");\n      var queryParams = 'xsrf=' + bizagi.getXSRFToken();\n      url = url.indexOf('?') !== -1 ? url.concat('&' + queryParams) : url.concat('?' + queryParams);\n      bizagi.util.downloadFile(url, true);\n    });\n  } });","/**\r\n * Name: BizAgi Desktop Widget Administration Processes (orchestrator)\r\n * \r\n * @author Christian Collazos\r\n */\n\n\nbizagi.workportal.widgets.admin.business.policies.extend(\"bizagi.workportal.widgets.admin.business.policies\", {}, {\n\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    //Load templates\n    self.loadTemplates({\n      \"admin.business.policies.wrapper\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.admin.business.policies\").concat(\"#ui-bizagi-workportal-widget-admin-business-policies-wrapper\"),\n      \"admin.business.policies.content\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.admin.business.policies\").concat(\"#ui-bizagi-workportal-widget-admin-business-policies-content\"),\n      useNewEngine: false });\n\n  },\n\n  postRender: function postRender() {\n    var self = this;\n    self.setupData();\n  },\n\n  setupData: function setupData() {\n    var self = this,\n    content = self.getContent(),\n    generalContentTmpl = $.tmpl(self.generalContentTmpl, {});\n\n    content.append(generalContentTmpl);\n  },\n\n  /*\r\n     * initialize the process tree widget\r\n     */\n  setupPoliciesTree: function setupPoliciesTree() {\n    var self = this;\n    var content = self.getContent();\n\n    bizagi.treeRoutSelected = [];\n    $(\"#treeLinksId\").remove();\n\n    self.processTree = new bizagi.workportal.widgets.tree(self.workportalFacade, self.dataService, $.extend(self.params, {\n      canvas: $(\"#processTree\", content) }));\n\n\n    self.processTree.render();\n  }\n\n\n\n  /********************* EVENTS ******************/ });","/**\r\n * Name: BizAgi Desktop Widget Administration Policies - Decision Table\r\n * \r\n * @author Christian Collazos\r\n */\n\n\nbizagi.workportal.widgets.admin.business.policies.decision.table.extend(\"bizagi.workportal.widgets.admin.business.policies.decision.table\", {}, {\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    //Load templates\n    self.loadTemplates({\n      \"admin.business.policies.decision.table.wrapper\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.admin.business.policies\").concat(\"#ui-bizagi-workportal-widget-admin-business-policies-decision-table-wrapper\"),\n      \"admin.business.policies.decision.table.content\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.admin.business.policies\").concat(\"#ui-bizagi-workportal-widget-admin-business-policies-decision-table-content\"),\n      useNewEngine: false });\n\n  },\n\n  renderContent: function renderContent() {\n    var self = this;\n    var template = self.getTemplate(\"admin.business.policies.decision.table.wrapper\");\n    var content;\n\n    self.decisionTableContent = self.getTemplate(\"admin.business.policies.decision.table.content\");\n    content = self.content = $.tmpl(template, {});\n\n    // Override canvas if it has been defined\n    if (self.params.canvas) {\n      content = $(self.params.canvas).append(content);\n    }\n\n    return content;\n  },\n\n  postRender: function postRender() {\n    var self = this;\n  } });","/**\r\n* Name: BizAgi Desktop Widget Administration Policies - Rules\r\n* \r\n* @author Christian Collazos\r\n*/\n\n\nbizagi.workportal.widgets.admin.business.policies.rules.extend(\"bizagi.workportal.widgets.admin.business.policies.rules\", {}, {\n\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    //Load templates\n    self.loadTemplates({\n      \"admin.business.policies.rules.wrapper\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.admin.business.policies\").concat(\"#ui-bizagi-workportal-widget-admin-business-policies-rules-wrapper\"),\n      \"admin.business.policies.rules.content\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.admin.business.policies\").concat(\"#ui-bizagi-workportal-widget-admin-business-policies-rules-content\"),\n      useNewEngine: false });\n\n  },\n\n  renderContent: function renderContent() {\n    var self = this;\n    var template = self.getTemplate(\"admin.business.policies.rules.wrapper\");\n    var content;\n\n    self.decisionTableContent = self.getTemplate(\"admin.business.policies.rules.content\");\n    content = self.content = $.tmpl(template, {});\n\n    // Override canvas if it has been defined\n    if (self.params.canvas) {\n      content = $(self.params.canvas).append(content);\n    }\n\n    return content;\n  },\n\n  postRender: function postRender() {\n    var self = this;\n  } });","/**\r\n* Name: BizAgi Desktop Widget Administration Policies - Tabs \r\n* \r\n* @author Christian Collazos\r\n*/\n\n\nbizagi.workportal.widgets.admin.business.policies.tabs.extend(\"bizagi.workportal.widgets.admin.business.policies.tabs\", {}, {\n\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    //Load templates\n    self.loadTemplates({\n      \"admin.business.policies.tabs.wrapper\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.admin.business.policies\").concat(\"#ui-bizagi-workportal-widget-admin-business-policies-tabs-wrapper\"),\n      \"admin.business.policies.tabs.content\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.admin.business.policies\").concat(\"#ui-bizagi-workportal-widget-admin-business-policies-tabs-content\"),\n      useNewEngine: false });\n\n  },\n\n  renderContent: function renderContent() {\n    var self = this;\n    var template = self.getTemplate(\"admin.business.policies.tabs.wrapper\");\n    var content;\n\n    self.decisionTableContent = self.getTemplate(\"admin.business.policies.tabs.content\");\n    content = self.content = $.tmpl(template, {});\n\n    // Override canvas if it has been defined\n    if (self.params.canvas) {\n      content = $(self.params.canvas).append(content);\n    }\n\n    return content;\n  },\n\n  postRender: function postRender() {\n    var self = this;\n  } });","/**\r\n* Name: BizAgi Desktop Widget Administration Policies - Politics\r\n* \r\n* @author Christian Collazos\r\n*/\n\n\nbizagi.workportal.widgets.admin.business.policies.politics.extend(\"bizagi.workportal.widgets.admin.business.policies.politics\", {}, {\n\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    //Load templates\n    self.loadTemplates({\n      \"admin.business.policies.politics.wrapper\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.admin.business.policies\").concat(\"#ui-bizagi-workportal-widget-admin-business-policies-politics-wrapper\"),\n      \"admin.business.policies.politics.content\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.admin.business.policies\").concat(\"#ui-bizagi-workportal-widget-admin-business-policies-politics-content\"),\n      useNewEngine: false });\n\n  },\n\n  renderContent: function renderContent() {\n    var self = this;\n    var template = self.getTemplate(\"admin.business.policies.politics.wrapper\");\n    var content;\n\n    self.decisionTableContent = self.getTemplate(\"admin.business.policies.politics.content\");\n    content = self.content = $.tmpl(template, {});\n\n    // Override canvas if it has been defined\n    if (self.params.canvas) {\n      content = $(self.params.canvas).append(content);\n    }\n\n    return content;\n  },\n\n  postRender: function postRender() {\n    var self = this;\n  } });","/**\r\n * Name: BizAgi Desktop Widget Administration Language Implementation\r\n * \r\n * @authors Ivan Ricardo Taimal - Mauricio Sanchez S. - Andres Fernando Munoz\r\n */\n\n\nbizagi.workportal.widgets.admin.language.extend(\"bizagi.workportal.widgets.admin.language\", {}, {\n\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    //Load templates\n    self.loadTemplates({\n      \"admin.language.wrapper\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.admin.language\").concat(\"#ui-bizagi-workportal-widget-admin-language-wrapper\"),\n      \"admin.language.panel.wrapper\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.admin.language\").concat(\"#ui-bizagi-workportal-widget-admin-language-panel-wrapper\"),\n      \"admin.language.template.list\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.admin.language\").concat(\"#ui-bizagi-workportal-widget-admin-language-template-list\"),\n      \"admin.language.upload.file.culturename\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.admin.language\").concat(\"#ui-bizagi-workportal-widget-admin-language-combo-culturename\"),\n      \"admin.language.bizagi.objects.list\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.admin.language\").concat(\"#ui-bizagi-workportal-widget-admin-language-bizagi-objects-list\"),\n      \"admin.language.entities.list\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.admin.language\").concat(\"#ui-bizagi-workportal-widget-admin-language-entities-list\"),\n      useNewEngine: false });\n\n  },\n\n  loadtemplates: function loadtemplates() {\n    var self = this;\n\n    //Template vars\n    self.config = {\n      \"maxSize\": \"10000000\",\n      \"validExtensions\": \".xlsx\",\n      \"uploadFormTemplateName\": \"bizagi.workportal.desktop.fileupload.form\",\n      \"cultureName\": \"en\" };\n\n    self.generalUploadFile = self.workportalFacade.getTemplate(\"admin.language.upload.file\");\n    self.formTemplate1 = self.workportalFacade.getTemplate(self.config[\"uploadFormTemplateName\"]);\n    self.formTemplate2 = self.workportalFacade.getTemplate(self.config[\"uploadFormTemplateName\"]);\n    self.formTemplate3 = self.workportalFacade.getTemplate(self.config[\"uploadFormTemplateName\"]);\n    self.formTemplate4 = self.workportalFacade.getTemplate(self.config[\"uploadFormTemplateName\"]);\n  },\n\n  postRender: function postRender() {\n    var self = this;\n    var content = self.getContent();\n    self.startTab = \"entities\";\n    self.loadtemplates();\n    self.setupData();\n    $.when(self.initLanguageTemplatesList(self.startTab)).done(function (data) {\n      self.renderUploadForm();\n      self.initBizagiObjectsList();\n      self.initEntities();\n      content.html(self.panelWrapper);\n      if (!session.isProduction) {\n        $('#tab_reset').parent().addClass('hidden');\n      }\n      $(\"#admin-language-wrapper\").tabs();\n      $(\"#entities_internal_tabs\").tabs({\n        create: function create(event, ui) {\n          ui.tab.parent().removeClass('hidden');\n        } });\n\n      $(\"#entities-accordion\").accordion({ heightStyle: \"content\", collapsible: true });\n      self.activeTab = self.startTab;\n      self.handleTabEvents();\n      self.keyEntityValidation(self.panelWrapper);\n    });\n  },\n\n  setupData: function setupData() {\n    var self = this;\n    var content = self.getContent();\n  },\n\n  renderUploadForm: function renderUploadForm() {\n    var self = this;\n    var content = self.getContent();\n    var languageUploadFormWrapper = $(\"#languages-upload-form-wrapper\", self.panelWrapper);\n    var massiveResourcesUploadFormWrapper = $(\"#massive-resources-upload-form-wrapper\", self.panelWrapper);\n    languageUploadFormWrapper.empty();\n    massiveResourcesUploadFormWrapper.empty();\n    // Render Form\n\n    //self.addUploadMassiveResources();\n  },\n\n  initLanguageTemplatesList: function initLanguageTemplatesList(source) {\n    var defer = $.Deferred();\n    var self = this;\n    var content = self.getContent();\n    var listWrapperSelector = \"#\" + source + '-language-list-wrapper';\n    var languageListWrapper = $(listWrapperSelector, self.panelWrapper);\n    languageListWrapper.empty();\n    $.when(self.dataService.getStoreLanguageTemplates()).done(function (data) {\n      var title;\n      data.result.sort(function (a, b) {\n        if (a.value > b.value) {\n          return 1;\n        }\n        if (a.value < b.value) {\n          return -1;\n        }\n        return 0;\n      });\n      self.templateList = data;\n      title = source === 'all' ? self.getResource(\"workportal-widget-admin-language-all-language-list\") : self.getResource(\"workportal-widget-admin-language-current-language-settings\");\n      $.tmpl(self.generalTemplateListTmpl, { languageTemplates: data.result, listTitle: title, source: source }).appendTo(languageListWrapper);\n      self.downloadTemplateEvent(source);\n      defer.resolve();\n      self.addUploadMassiveResources();\n      if (source === 'reset') {\n        self.initReset();\n      }\n    });\n    return defer.promise();\n  },\n\n  initBizagiObjectsList: function initBizagiObjectsList() {\n    var self = this,\n    bizagiObjectsListWrapper;\n    bizagiObjectsListWrapper = $(\"#bizagi-objects-list-wrapper\", self.panelWrapper);\n    $.when(this.dataService.getBizagiObjects()).done(function (data) {\n      data.result.sort(function (a, b) {\n        if (a.value > b.value) {\n          return 1;\n        }\n        if (a.value < b.value) {\n          return -1;\n        }\n        return 0;\n      });\n      self.bizagiObjects = data.result;\n      $.tmpl(self.bizagiObjectsList, { elementList: self.bizagiObjects }).appendTo(bizagiObjectsListWrapper);\n      self.bizagiObjectsEvents();\n    });\n  },\n\n  bizagiObjectsEvents: function bizagiObjectsEvents() {\n    var self = this;\n\n    /**\r\n                     * Disable text selection for objects list and objects selected\r\n                     * */\n    $(\"table tr\", \".objects-container\").bind('selectstart', function (event) {\n      event.preventDefault();\n    });\n    /**\r\n        * Event click for each entity in table list and selected\r\n        * */\n    $(\".ui-bizagi-object\").click(function () {\n      var entity = this;\n      if ($(\"td\", entity).hasClass(\"bizagi-objects-object-selected\")) {\n        $(\"td\", entity).removeClass(\"bizagi-objects-object-selected\");\n      } else {\n        $(\"td\", entity).addClass(\"bizagi-objects-object-selected\");\n      }\n    });\n    /**\r\n        * Move all objects to right\r\n        * */\n\n    $('.objects-buttons').click(function (e) {\n      e.preventDefault();\n    });\n\n    $(\"#move-all-objects-right\").click(function () {\n      $(\"#table-objects-selected tbody\").append($(\"#table-bizagi-ojects-list td\").closest(\"tr\"));\n      $(\"#table-objects-selected tbody tr td\").removeClass(\"bizagi-objects-object-selected\");\n      $(\"#table-objects-selected tbody tr\").show();\n      self.readyToDownload('bizagi_objects');\n    });\n    /**\r\n        * Move selected objects to right\r\n        * */\n    $(\"#move-objects-right\").click(function () {\n      $(\"#table-objects-selected tbody\").append($(\"#table-bizagi-ojects-list .bizagi-objects-object-selected\").closest(\"tr\"));\n      $(\"#table-objects-selected tbody tr td\").removeClass(\"bizagi-objects-object-selected\");\n      self.readyToDownload('bizagi_objects');\n    });\n    /**\r\n        * Move selected object to left\r\n        * */\n    $(\"#move-objects-left\").click(function () {\n      $(\"#table-bizagi-ojects-list tbody\").append($(\"#table-objects-selected .bizagi-objects-object-selected\").closest(\"tr\"));\n      $(\"#table-bizagi-ojects-list tbody tr td\").removeClass(\"bizagi-objects-object-selected\");\n      self.readyToDownload('bizagi_objects');\n    });\n    /**\r\n        * Move all objects to left\r\n        * */\n    $(\"#move-all-objscts-left\").click(function () {\n      $(\"#table-bizagi-ojects-list tbody\").append($(\"#table-objects-selected td\").closest(\"tr\"));\n      $(\"#table-bizagi-ojects-list tbody tr td\").removeClass(\"bizagi-objects-object-selected\");\n      self.readyToDownload('bizagi_objects');\n    });\n  },\n\n  initEntities: function initEntities() {\n    var self = this,\n    entitiesListWrapper;\n    entitiesListWrapper = $(\"#entities-list-wrapper\", self.panelWrapper);\n    $.when(this.dataService.getEntitiesList()).done(function (data) {\n      data.entities.sort(function (a, b) {\n        if (a.name > b.name) {\n          return 1;\n        }\n        if (a.name < b.name) {\n          return -1;\n        }\n        return 0;\n      });\n      self.entitiesList = data.entities;\n      $.tmpl(self.entitiesListTmpl, { elementList: self.entitiesList }).appendTo(entitiesListWrapper);\n      self.entitiesEvents();\n    });\n  },\n\n  entitiesEvents: function entitiesEvents() {\n    var self = this;\n    /**\r\n                     * Disable text selection for entities list and entities selected\r\n                     * */\n    $(\"table tr\", \".entities-container\").bind('selectstart', function (event) {\n      event.preventDefault();\n    });\n    /**\r\n        * Captures the input typing\r\n        * */\n    $(\"#ui-entities-filter\").keyup(function () {\n      var search = $(this).val();\n      $(\"#table-entities-list .ui-bizagi-entity\").show();\n      if (search)\n      $(\"#table-entities-list .ui-bizagi-entity\").not(\":FilterEntity(\" + search + \")\").hide();\n    });\n    /**\r\n        * Filters entities according to the typed text\r\n        * */\n    $.expr[\":\"].FilterEntity = function (entity, i, array) {\n      var search = array[3];\n      if (!search) return false;\n      return new RegExp(search, \"i\").test($(entity).text());\n    };\n    /**\r\n       * Event click for each entity in table list and selected\r\n       * */\n    $(\".ui-bizagi-entity\").click(function () {\n      var entity = this;\n      if ($(\"td\", entity).hasClass(\"bizagi-entities-entity-selected\")) {\n        $(\"td\", entity).removeClass(\"bizagi-entities-entity-selected\");\n      } else {\n        $(\"td\", entity).addClass(\"bizagi-entities-entity-selected\");\n      }\n    });\n    /**\r\n        * Move all entities to right\r\n        * */\n\n    $('.entities-buttons').click(function (e) {\n      e.preventDefault();\n    });\n\n    $(\"#move-all-right\").click(function () {\n      $(\"#table-entities-selected tbody\").append($(\"#table-entities-list td\").closest(\"tr\"));\n      $(\"#table-entities-selected tbody tr td\").removeClass(\"bizagi-entities-entity-selected\");\n      $(\"#table-entities-selected tbody tr\").show();\n      self.readyToDownload('entities');\n    });\n    /**\r\n        * Move selected entities to right\r\n        * */\n    $(\"#move-right\").click(function () {\n      $(\"#table-entities-selected tbody\").append($(\"#table-entities-list .bizagi-entities-entity-selected\").closest(\"tr\"));\n      $(\"#table-entities-selected tbody tr td\").removeClass(\"bizagi-entities-entity-selected\");\n      self.readyToDownload('entities');\n    });\n    /**\r\n        * Move selected entities to left\r\n        * */\n    $(\"#move-left\").click(function () {\n      $(\"#table-entities-list tbody\").append($(\"#table-entities-selected .bizagi-entities-entity-selected\").closest(\"tr\"));\n      $(\"#table-entities-list tbody tr td\").removeClass(\"bizagi-entities-entity-selected\");\n      self.readyToDownload('entities');\n    });\n    /**\r\n        * Move all entities to left\r\n        * */\n    $(\"#move-all-left\").click(function () {\n      $(\"#table-entities-list tbody\").append($(\"#table-entities-selected td\").closest(\"tr\"));\n      $(\"#table-entities-list tbody tr td\").removeClass(\"bizagi-entities-entity-selected\");\n      self.readyToDownload('entities');\n    });\n  },\n\n  getEntitiesSelected: function getEntitiesSelected() {\n    var entitiesSelected = $(\"#table-entities-selected tbody tr\");\n    var idEntitiesSelected = [];\n    $.each(entitiesSelected, function (index, item) {\n      idEntitiesSelected.push($(item).data(\"id\"));\n    });\n    return idEntitiesSelected;\n  },\n\n  getObjectsSelected: function getObjectsSelected() {\n    var objectsSelected = $(\"#table-objects-selected tbody tr\");\n    var valueObjectsSelected = [];\n    $.each(objectsSelected, function (index, item) {\n      valueObjectsSelected.push($(item).data(\"value\"));\n    });\n    return valueObjectsSelected;\n  },\n\n  initAllLangs: function initAllLangs() {\n    var self = this;\n    self.allLangsEvents();\n  },\n\n  allLangsEvents: function allLangsEvents() {\n    var self = this;\n\n    /**\r\n                     * Captures the input typing\r\n                     * */\n    $(\"input.ui-all-languages-filter\").keyup(function () {\n      var search = $(this).val();\n      $(\".ui-bizagi-grid-table .ui-bizagi-language\").show();\n      if (search)\n      $(\".ui-bizagi-grid-table .ui-bizagi-language\").not(\":FilterLanguage(\" + search + \")\").hide();\n    });\n    /**\r\n        * Filters entities according to the typed text\r\n        * */\n    $.expr[\":\"].FilterLanguage = function (entity, i, array) {\n      var search = array[3];\n      if (!search) return false;\n      return new RegExp(search, \"i\").test($(entity).text());\n    };\n\n    self.modifiedLangs = {};\n    $('#all-language-list-wrapper .ui-bizagi-cell-readonly').find('input[type=checkbox]').on('change', function () {\n      var element = $(this),\n      elValue,\n      objIndex = -1;\n      elValue = element.attr('value');\n      $.each(self.modifiedLangs, function (index, item) {\n        var x;\n        for (x in item) {\n          if (x === elValue) {\n            delete self.modifiedLangs[elValue];\n          }\n        }\n      });\n      self.modifiedLangs[elValue] = element.is(':checked') ? true : false;\n    });\n    $('#all-language-list-wrapper #save-lang-list-btn').on('click', function () {\n      self.saveLangsList();\n    });\n  },\n\n  saveLangsList: function saveLangsList() {\n    var self = this,\n    langsObj;\n    langsObj = {\n      'languages': this.modifiedLangs };\n\n    $.when(this.dataService.setLanguages(JSON.stringify(langsObj))).done(function (data) {\n      var errMsgEl;\n      if (!data.result) {\n        errMsgEl = $('#all-language-list-wrapper .multilang-error-msg');\n        errMsgEl.removeClass('dp-hidden');\n        setTimeout(function () {\n          errMsgEl.addClass('dp-hidden');\n        }, 5000);\n        $.each(self.modifiedLangs, function (name, value) {\n          var element = $('#all-language-list-wrapper .ui-bizagi-cell-readonly').find('input[value=' + name + ']');\n          if (value) {\n            element.removeAttr('checked');\n          } else {\n            element.prop('checked', true);\n          }\n        });\n      } else {\n        $('#tab_all_languages').click();\n      }\n      self.modifiedLangs = {};\n    });\n  },\n\n  initReset: function initReset() {\n    var self = this;\n    self.resetEvents();\n    $(\"#message-container\").hide();\n    $(\"#template-reset\").hide();\n  },\n\n  resetEvents: function resetEvents() {\n    var self = this;\n    $('button#lang-reset-btn').on('click', function () {\n\n      self.loadingOption();\n      $(\"#message-container\").hide();\n      $(\"#template-reset\").hide();\n      var message = bizagi.localization.getResource(\"workportal-widget-admin-language-reset-confirmation\");\n      $.when(bizagi.showConfirmationBox(message, \"Bizagi\", \"warning\")).done(function () {\n        $.when(self.dataService.resetPersonalization()).done(function (data) {\n          if (data.result) {\n            $(\"#message-container\").show();\n            $(\"#template-reset\").show();\n          }\n        });\n      });\n      self.notLoading();\n    });\n  },\n\n  loadingOption: function loadingOption() {\n    $(\"div.ui-dialog\").append(\"<div class='loading-language ui-bizagi-loading-icon'><div class='loading-language-icon'></div></div>\");\n  },\n\n  notLoading: function notLoading() {\n    $(\"div.loading-language\").remove();\n    $(\"body\").removeClass(\"cursor-loading\");\n  },\n\n\n\n  addUploadMassiveResources: function addUploadMassiveResources() {\n    var self = this;\n\n    var internalsContainer = $(\"#internals\", self.panelWrapper);\n    var extendedContainer = $(\"#extended\", self.panelWrapper);\n    var objectsContainer = $(\"#bizagi_objects\", self.panelWrapper);\n    var entitiesContainer = $(\"#entities_localization \", self.panelWrapper);\n\n    var entitiesUrl = self.dataService.serviceLocator.getUrl(\"admin-language-entities\");\n    var defaultUrl = self.dataService.serviceLocator.getUrl(\"admin-language-resource\");\n\n    self.renderUploadPlugin(internalsContainer, self.formTemplate1, defaultUrl, \"internals\");\n    self.renderCultureCombo(internalsContainer, self.panelWrapper);\n    self.renderUploadPlugin(extendedContainer, self.formTemplate2, defaultUrl, \"extended\");\n    self.renderCultureCombo(extendedContainer, self.panelWrapper);\n    self.renderUploadPlugin(objectsContainer, self.formTemplate3, defaultUrl, \"objects\");\n    self.renderCultureCombo(objectsContainer);\n    self.renderUploadPlugin(entitiesContainer, self.formTemplate4, entitiesUrl, \"entities\");\n    self.renderCultureCombo(entitiesContainer);\n  },\n\n  /**\r\n     Binds the bizagiFileUpload plugin to the tab container\r\n     */\n  renderUploadPlugin: function renderUploadPlugin(tabContainer, formTemplate, uploadUrl, responseTarget) {\n    var self = this;\n    var properties = {};\n    properties.addUrl = uploadUrl;\n    properties.validExtensions = self.config[\"validExtensions\"];\n    properties.maxSize = self.config[\"maxSize\"];\n    properties.maxfiles = \"1\";\n    properties.filesCount = \"\";\n    $(\"#massive-resources-upload-form-wrapper\", tabContainer).bizagiFileUpload({\n      showLoading: true,\n      alerFailtAfterUpload: self.getResource(\"workportal-widget-admin-language-alert-fail-after-upload\"),\n      formTemplate: formTemplate,\n      properties: {\n        cultureName: self.config[\"cultureName\"],\n        url: properties.addUrl,\n        validExtensions: properties.validExtensions,\n        maxSize: properties.maxSize,\n        xpath: responseTarget },\n\n      onUploadFileCompletedCallback: function onUploadFileCompletedCallback(ref, data) {\n        var res = self.validateEntitiesModified(data);\n        bizagi.showMessageBox(bizagi.localization.getResource(res.messageKey) + res.entities, \"Bizagi\", \"info\");\n        self.handleResponse(\"alert-upload-massive-resources-template\", data);\n        $(\"div.loading-language\").remove();\n        $(\"body\").removeClass(\"cursor-loading\");\n      },\n      onUploadFileFailCallback: function onUploadFileFailCallback(data) {\n        console.log(data);\n        $(\"div.loading-language\").remove();\n        $(\"body\").removeClass(\"cursor-loading\");\n      },\n      onUploadFileProcess: function onUploadFileProcess() {\n        $(\"div.ui-dialog\").append(\"<div class='loading-language ui-bizagi-loading-icon'><div class='loading-language-icon'></div></div>\");\n      },\n      maxAllowedFiles: properties.maxfiles,\n      uploadedFiles: properties.filesCount });\n\n  },\n  /*\r\n     * validate entities and return the modified and key resource for modal message\r\n     */\n  validateEntitiesModified: function validateEntitiesModified(data) {\n    var response = JSON.parse(data);\n    var entitiesMessage = \"\";\n    var messageKey = \"workportal-widget-admin-language-alert-after-upload\"; //normal upload file message\n    switch (response.message) {\n      case \"success\":\n        if (response.detail != \"\") {//for entities\n          var entities = response.detail == \"\" ? [] : JSON.parse(response.detail);\n          messageKey = \"workportal-widget-admin-language-alert-no-access-rights-after-upload\"; //doesn't have permission\n          if (entities.length > 0) {//has permission\n            entitiesMessage = \": \" + entities.join(\", \");\n            messageKey = \"workportal-widget-admin-language-alert-entities-authorized-after-upload\";\n          }\n        }\n        break;\n      case \"unauthorized\": //doesn't have permission\n        messageKey = \"workportal-widget-admin-language-alert-no-access-rights-after-upload\";\n        break;\n      case \"Empty\": //no values to update\n        messageKey = \"workportal-widget-admin-language-alert-nothing-has-been-update-with-the-selected-file\";\n        break;}\n\n\n    return {\n      messageKey: messageKey,\n      entities: entitiesMessage };\n\n  },\n  /*\r\n     * Render combo\r\n     */\n  renderCultureCombo: function renderCultureCombo(tabContainer) {\n    var self = this;\n    var content = self.getContent();\n    var deferred = $.Deferred();\n    var comboDataSource = { combo: [], id: \"cultureName\" };\n    comboDataSource.combo.push({ id: 'default', name: '' });\n    $.each(self.templateList.result, function (index, value) {\n      if (value.enabled) {\n        comboDataSource.combo.push({ id: value.key, name: value.value });\n      }\n    });\n    var comboWrapper = $(\".ui-bizagi-culturecombo\", tabContainer);\n    comboWrapper.empty();\n    comboWrapper.uicombo({\n      isEditable: false,\n      data: comboDataSource,\n      itemValue: function itemValue(obj) {\n        return obj.id;\n      },\n      itemText: function itemText(obj) {\n        return obj.name;\n      },\n      onComplete: function onComplete() {\n        $(\"[name='cultureName']\", tabContainer).val(comboDataSource.combo[0].id);\n        deferred.resolve();\n      },\n      onChange: function onChange(obj) {\n        var sendBtn = $('button#upload-file', '#' + self.activeTab + '_upload_file'),\n        value = obj.ui.data('value');\n        if (value !== 'default') {\n          sendBtn.prop('disabled', false);\n        } else {\n          sendBtn.prop('disabled', true);\n        }\n        $(\"[name='cultureName']\", tabContainer).val(value);\n      },\n      initValue: comboDataSource.combo[0] });\n\n    return deferred;\n  },\n\n  handleResponse: function handleResponse(div, data) {\n    var self = this,\n    dataLength = data.length,\n    errorDetail = \"Error\",\n    message;\n    if (dataLength == 0) {\n      self.initLanguageTemplatesList(self.startTab);\n    } else {\n      response = JSON.parse(data);\n      if (typeof response.detail != \"undefined\") {\n        if (response.detail.length > 200) {\n          errorDetail = response.detail.substring(0, 197) + \" ...\";\n        } else\n        {\n          errorDetail = response.detail;\n        }\n      }\n      message = bizagi.localization.getResource(response.message);\n      $(\"#\" + div).html(message + \" : \" + errorDetail);\n      $(\"#\" + div).parent().removeClass(\"ui-hidden\");\n    }\n  },\n\n  downloadTemplateEvent: function downloadTemplateEvent(source) {\n    var self = this,\n    listTable = $('#' + source + '-language-list-wrapper .ui-bizagi-grid-table', self.panelWrapper),\n    downloadBtn = $(\".lang-list-button button#\" + source + \"-tmpl-download-btn\", self.panelWrapper);\n    listTable.find('input[type=\"radio\"]').click(function (e) {\n      self.readyToDownload(source, listTable, downloadBtn);\n    });\n    downloadBtn.click(function (e) {\n      var activeBizagiObjects,\n      activeEntities,\n      selectedLang,\n      extendedObj,\n      params;\n      e.preventDefault();\n      selectedLang = listTable.find('input[type=\"radio\"]:checked').data('guid');\n      params = { \"cultureName\": selectedLang };\n      if (source === 'bizagi_objects') {\n        activeBizagiObjects = {\n          'elements': self.getObjectsSelected() };\n\n        params.elements = JSON.stringify(activeBizagiObjects);\n      } else if (source === 'entities') {\n        activeEntities = {\n          'entities': self.getEntitiesSelected() };\n\n        params.entities = JSON.stringify(activeEntities);\n      } else if (source === 'extended') {\n        extendedObj = {\n          'elements': [\"extended\"] };\n\n        params.elements = JSON.stringify(extendedObj);\n      }\n      self.dataService.getLanguageTemplate(params);\n\n    });\n  },\n\n  readyToDownload: function readyToDownload(source, listTable, downloadBtn) {\n    var self = this,\n    include = false,\n    langSelected = false;\n    if (!listTable) {\n      listTable = $('#' + source + '-language-list-wrapper .ui-bizagi-grid-table', self.panelWrapper);\n    }\n    if (!downloadBtn) {\n      downloadBtn = $(\".lang-list-button button#\" + source + \"-tmpl-download-btn\", self.panelWrapper);\n    }\n    if (source === 'internals') {\n      include = true;\n    } else if (source === 'extended') {\n      include = true;\n    } else if (source === 'bizagi_objects') {\n      include = self.getObjectsSelected().length > 0 ? true : false;\n    } else if (source === 'entities') {\n      include = self.getEntitiesSelected().length > 0 ? true : false;\n    }\n    if (listTable.find('input[type=\"radio\"]:checked').length > 0) {\n      langSelected = true;\n    }\n    if (include && langSelected) {\n      downloadBtn.removeAttr('disabled');\n    } else {\n      downloadBtn.attr('disabled', true);\n    }\n  },\n\n  /**\r\n      * hide all tabs except tab_entities_localization if the Multilanguage is false but EntityAdmin is true\r\n      */\n  keyEntityValidation: function keyEntityValidation(context) {\n\n    if (bizagi.menuSecurity.EntityAdmin && !bizagi.menuSecurity.Multilanguage) {\n      $(\"#admin-language-wrapper-tabs > li:not(:has(#tab_entities_localization))\", context).hide();\n    }\n  },\n\n  handleTabEvents: function handleTabEvents() {\n    var self = this,\n    actionRunning = false,\n    mainWrapper = $(\"#admin-language-wrapper\"),\n    content;\n    content = self.getContent();\n    $('.ui-tabs-anchor', '#admin-language-wrapper').click(function () {\n      $(\"#message-container\").hide();\n      $(\"#template-reset\").hide();\n      $(\"input.ui-all-languages-filter\").val('');\n    });\n    $(\"#tab_internals\").click(function (e) {\n      if (!actionRunning) {\n        actionRunning = true;\n        mainWrapper.tabs(\"disable\");\n        $.when(self.initLanguageTemplatesList('internals')).done(function (data) {\n          $(\"#internals_internal_tabs\").tabs({\n            create: function create(event, ui) {\n              ui.tab.parent().removeClass('hidden');\n            } });\n\n          self.activeTab = 'internals';\n          mainWrapper.tabs(\"enable\");\n          actionRunning = false;\n        });\n      } else\n      {\n        e.preventDefault();\n      }\n    });\n    $(\"#tab_extended\").click(function (e) {\n      if (!actionRunning) {\n        actionRunning = true;\n        mainWrapper.tabs(\"disable\");\n        $.when(self.initLanguageTemplatesList('extended')).done(function (data) {\n          $(\"#extended_internal_tabs\").tabs({\n            create: function create(event, ui) {\n              ui.tab.parent().removeClass('hidden');\n            } });\n\n          self.activeTab = 'extended';\n          mainWrapper.tabs(\"enable\");\n          actionRunning = false;\n        });\n      } else\n      {\n        e.preventDefault();\n      }\n    });\n    $(\"#tab_bizagi_objects\").click(function (e) {\n      if (!actionRunning) {\n        actionRunning = true;\n        mainWrapper.tabs(\"disable\");\n        $.when(self.initLanguageTemplatesList('bizagi_objects')).done(function (data) {\n          $(\"#bizagi_objects_internal_tabs\").tabs({\n            create: function create(event, ui) {\n              ui.tab.parent().removeClass('hidden');\n            } });\n\n          $(\"#bizagi-objects-accordion\").accordion({ heightStyle: \"content\", collapsible: true });\n          self.activeTab = 'bizagi_objects';\n          mainWrapper.tabs(\"enable\");\n          actionRunning = false;\n        });\n      } else\n      {\n        e.preventDefault();\n      }\n    });\n    $(\"#tab_entities_localization\").click(function (e) {\n      if (!actionRunning) {\n        actionRunning = true;\n        mainWrapper.tabs(\"disable\");\n        $.when(self.initLanguageTemplatesList('entities')).done(function (data) {\n          $(\"#entities_internal_tabs\").tabs({\n            create: function create(event, ui) {\n              ui.tab.parent().removeClass('hidden');\n            } });\n\n          $(\"#entities-accordion\").accordion({ heightStyle: \"content\", collapsible: true });\n          self.activeTab = 'entities';\n          mainWrapper.tabs(\"enable\");\n          actionRunning = false;\n        });\n      } else\n      {\n        e.preventDefault();\n      }\n    });\n    $(\"#tab_all_languages\").click(function (e) {\n      if (!actionRunning) {\n        actionRunning = true;\n        mainWrapper.tabs(\"disable\");\n        $.when(self.initLanguageTemplatesList('all')).done(function (data) {\n          self.initAllLangs();\n          self.activeTab = 'all';\n          mainWrapper.tabs(\"enable\");\n          actionRunning = false;\n        });\n      } else\n      {\n        e.preventDefault();\n      }\n    });\n    $(\"#tab_reset\").click(function (e) {\n      if (!actionRunning) {\n        actionRunning = true;\n        mainWrapper.tabs(\"disable\");\n        $.when(self.initLanguageTemplatesList('reset')).done(function (data) {\n          self.allLangsEvents();\n          self.activeTab = 'reset';\n          mainWrapper.tabs(\"enable\");\n          actionRunning = false;\n        });\n      } else\n      {\n        e.preventDefault();\n      }\n    });\n\n    $(\".tab_upload_file\").click(function (e) {\n      self.addUploadMassiveResources();\n    });\n\n    // Only show \"Entities\" tab\n    $('#tab_reset').parent().hide();\n    $('#tab_internals').parent().show();\n\n  } });","/**\r\n * Name: BizAgi Desktop Widget Administration preferences Implementation\r\n * \r\n * @author Andres Fernando Muoz\r\n */\n\nbizagi.workportal.widgets.admin.preferences.extend(\"bizagi.workportal.widgets.admin.preferences\", {}, {\n\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n    self.bizagiUserPreferences = new bizagi.services.preferences();\n    self.bizagiCustomFormats = new bizagi.services.preferences.customFormats();\n\n    self.guidForm;\n    self.isNewForm;\n\n    self.notifier = bizagi.injector.get(\"notifier\");\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    //Load templates\n    self.loadTemplates({\n      \"admin.preferences.wrapper\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.admin.preferences\").concat(\"#ui-bizagi-workportal-widget-admin-preferences-wrapper\"),\n      \"admin.preferences.container\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.admin.preferences\").concat(\"#ui-bizagi-workportal-widget-preferences-container\"),\n      \"admin.preferences.buttons\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.admin.preferences\").concat(\"#ui-bizagi-workportal-widget-preference-buttons\"),\n      \"admin.preferences.iframe\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.admin.preferences\").concat(\"#ui-bizagi-workportal-widget-preference-iframe\"),\n      \"admin.preferences.error\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.admin.preferences\").concat(\"#ui-bizagi-workportal-widget-preferences-errormessage\"),\n      \"admin.preferences.properties\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.admin.preferences\").concat(\"#ui-bizagi-workportal-widget-preferences-properties\"),\n      useNewEngine: false });\n\n\n  },\n\n  loadtemplates: function loadtemplates() {\n    var self = this;\n\n    self.container = self.getTemplate(\"admin.preferences.container\");\n    self.buttons = self.getTemplate(\"admin.preferences.buttons\");\n    self.iframe = self.getTemplate(\"admin.preferences.iframe\");\n    self.errorMessage = self.getTemplate(\"admin.preferences.error\");\n    self.propertiesTmpl = self.getTemplate(\"admin.preferences.properties\");\n  },\n\n  postRender: function postRender() {\n    var self = this;\n\n    $.when(self.dataService.getPreferenceFormParams()).done(function (data) {\n\n      self.guidForm = data.id !== \"-1\" ? data.id : \"\";\n\n      if (data.errorMessage === true) {\n        self.renderErrorMessage();\n      } else if (data.isNewForm === true) {\n        self.renderPreferences();\n      } else {\n        self.renderPreferencesOldForm();\n      }\n    });\n\n  },\n\n  renderErrorMessage: function renderErrorMessage() {\n    var self = this;\n\n    var resource = self.getResource(\"workportal-widget-admin-entities-message-migrate\");\n    resource = resource.replace(\"{build}\", bizagi.loader.productBuildToAbout);\n\n    var errorContent = $.tmpl(self.errorMessage, { errorMessage: resource });\n\n    self.content.html(errorContent);\n\n  },\n\n  setupData: function setupData() {\n    var self = this;\n    var content = self.getContent();\n  },\n\n  renderPreferencesOldForm: function renderPreferencesOldForm() {\n\n    var self = this;\n\n    var $content = self.getContent();\n    var url = self.dataService.getUrl({\n      \"endPoint\": \"PreferenceFormOld\" }) +\n    \"?idForm=\" + self.guidForm + \"&referer=userPreferences\";\n\n    var $iframeContent = $.tmpl(self.iframe, { \"url\": url });\n    var $iframe = $(\"iframe\", $iframeContent);\n\n    $iframeContent.addClass('loading-iframe');\n\n    $iframe.hide();\n\n    $iframe.load(function () {\n      $(this).fadeIn();\n    });\n\n    $content.html($iframeContent);\n\n  },\n\n  renderPreferences: function renderPreferences() {\n    var self = this;\n    var readyDeferred = new $.Deferred();\n    var content = self.getContent();\n    self.currentUser = bizagi.currentUser.idUser;\n\n    var preferencesParams = {\n      h_action: \"LOADUSERPREFERENCESFORM\",\n      h_contexttype: \"entity\",\n      h_guidForm: self.guidForm };\n\n\n    var renderContainer = $.tmpl(self.container);\n\n    bizagi.loader.start(\"rendering\").then(function () {\n      var rendering = new bizagi.rendering.facade();\n      //request to preferences definition service\n      self.dataService.getPreferencesForm(preferencesParams).done(function (data) {\n        var renderingParams = {\n          canvas: renderContainer,\n          data: data,\n          context: \"userPreferencesForm\" };\n\n        rendering.execute(renderingParams).done(function (form) {\n          var formValues = {};\n          $.extend(formValues, self.bizagiUserPreferences.getFormPreferencesValues(), self.bizagiCustomFormats.getFormatValues());\n          $(\"#preferences-tabs\").tabs();\n          $(\"#properties\", content).html($.tmpl(\n          self.propertiesTmpl,\n          formValues,\n          {\n            formatTime: self.bizagiCustomFormats.formatTime }));\n\n\n          var noPermission = true;\n          if (bizagi.menuSecurity.OpenWindowsMaximized == true) {\n            $(\"#displayoptions_OpenWindowsMaximized\", content).show();\n            noPermission = false;\n          }\n          if (bizagi.menuSecurity.AlwaysCollapseActivitySidebars == true) {\n            $(\"#displayoptions_collapseSidebars\", content).show();\n            noPermission = false;\n          }\n          if (bizagi.menuSecurity.ReturnToInboxWhenTasksAreFinished == true) {\n            $(\"#displayoptions_goToInbox\", content).show();\n            noPermission = false;\n          }\n          if (noPermission) {\n            $(\"#noPermission\", content).show();\n          }\n\n          $(\"#preferences-tabs-ul\").show();\n          self.preferenceForm = rendering.form;\n          self.preferenceForm && self.preferenceForm.properties ? self.preferenceForm.properties.contexttype ? \"\" : self.preferenceForm.properties.contexttype = \"entity\" : \"\";\n          $(\"#preferences\", content).html(renderContainer);\n          self.handleEvents();\n          readyDeferred.resolve();\n        });\n      });\n    });\n\n    return readyDeferred;\n  },\n\n  /*\r\n     *  Buttons for preferences actions\r\n     */\n  handleEvents: function handleEvents() {\n    var self = this;\n    var content = self.getContent();\n    $(\"#preferences-buttons\", content).html($.tmpl(self.buttons));\n\n    $(\"#update-preferences\", content).click(function (e) {\n      self.updateData();\n    });\n\n    var dialog = content && content.length ? content.closest(\".ui-dialog\") : [];\n    if (dialog.length > 0 && self.preferenceForm) {\n      dialog.on(\"dialogmaximize\", function (evt) {\n        self.preferenceForm.triggerHandler(\"maximazedForm\");\n        dialog.trigger(\"resize\");\n      });\n\n      dialog.on(\"dialogunmaximize\", function (evt) {\n        self.preferenceForm.triggerHandler(\"unmaximazedForm\");\n        dialog.trigger(\"resize\");\n      });\n    }\n  },\n\n  updatePreferences: function updatePreferences() {\n    var self = this;\n    var error = self.getResource(\"workportal-widget-admin-preferences-error-same-value\");\n    var values = self.getUserPreferences();\n\n    if (values.decimalSeparator && values.decimalSeparator === values.thousandSeparator) {\n      bizagi.showMessageBox(error, \"Error\");\n    } else {\n      self.bizagiUserPreferences.overridePreferences(values);\n      self.notifier.showSucessMessage(bizagi.localization.getResource(\"workportal-widget-admin-displayoptions-success\"), bizagi.localization.getResource(\"workportal-menu-preferences\"), \"\");\n    }\n\n  },\n\n  getUserPreferences: function getUserPreferences() {\n    var self = this;\n    var values = self.bizagiUserPreferences.getPreferences();\n    var $inputs = $('.preferences-properties :checkbox');\n    $inputs.each(function () {\n      values[this.name] = this.checked;\n    });\n    return values;\n  },\n  updateData: function updateData() {\n    var self = this;\n    if (self.preferenceForm.validateForm()) {\n      var serviceRender = new bizagi.render.services.service();\n      var data = self.preferenceForm.collectRenderValuesForSubmit();\n      var content = self.getContent();\n\n      self._startLoading(content, true);\n\n      $.when(serviceRender.multiactionService.submitData({\n        action: \"SAVEUSERPREFERENCES\",\n        contexttype: \"entity\",\n        data: data,\n        surrogatekey: self.currentUser,\n        idPageCache: self.preferenceForm.idPageCache })).\n      done($.proxy(function (message) {\n        //Change language on sessionStorage if change language on preferences\n        if (data.language) {\n          $.when(self.dataService.getCurrentUser()).done(function (currentUserData) {\n            // Changing languaje\n            $.when(assignLanguage(currentUserData.language)).done(function () {\n              bizagi.util.changeData({ language: currentUserData.language });\n              // Rendering\n              self.executeRender();\n            }).fail(function () {});\n          }).fail(function () {});\n        } else {\n          // Rendering\n          self.executeRender();\n        }\n        self.updatePreferences();\n\n      }, data)).fail(function (data) {\n        var typeMessage = bizagi.localization.getResource(\"workportal-general-word-message\");\n        if (data.message !== undefined)\n        bizagi.showMessageBox(data.message, typeMessage);\n        self.executeRender();\n      });\n    } else {\n      $(\"#preferences-tabs\").tabs({ active: 0 });\n    }\n  },\n  executeRender: function executeRender() {\n    var self = this;\n    var content = self.getContent();\n    $.when(self.renderPreferences()).\n    always(self._startLoading.bind(self, content, false));\n  },\n\n  /**\r\n      * hide elements while loader and add loading class to content\r\n      * @param {JQuery Element} content \r\n      */\n  _startLoading: function _startLoading(content, showLoader) {\n    var _newDisplay = showLoader === true ? \"none\" : \"block\";\n\n    content.find(\"#preferences-tabs\").css(\"display\", _newDisplay);\n    content.find(\"#preferences-buttons\").css(\"display\", _newDisplay);\n\n    if (showLoader) {\n      content.addClass(\"loading-iframe\");\n    } else {\n      content.removeClass(\"loading-iframe\");\n    }\n  } });","/**\r\n * Admin module to manage Stakeholders\r\n * @author Andres Felipe Arenas Vargas, Ricardo Alirio Perez Diaz\r\n */\nbizagi.workportal.widgets.admin.entities.extend(\"bizagi.workportal.widgets.admin.stakeholders\", {}, {\n  /**\r\n                                                                                                       * Init constructor\r\n                                                                                                       * @param workportalFacade The workportalFacade to access to all components\r\n                                                                                                       * @param dataService The dataService for making requests\r\n                                                                                                       * @param params Widget Description\r\n                                                                                                       */\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n    var templateName = \"bizagi.workportal.desktop.widgets.admin.stakeholders\";\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n    self._referrer = \"stakeholder\";\n    //Load templates\n    self.loadTemplates({\n      \"admin.entity.wrapper\": bizagi.getTemplate(templateName).concat(\"#ui-bizagi-workportal-widget-admin-stakeholder-wrapper\"),\n      \"admin.stakeholder.panel.wrapper\": bizagi.getTemplate(templateName).concat(\"#ui-bizagi-workportal-widget-admin-stakeholder-panel-wrapper\"),\n      \"admin.stakeholder.list\": bizagi.getTemplate(templateName).concat(\"#ui-bizagi-workportal-widget-admin-stakeholder-list\"),\n      \"admin.stakeholder.error\": bizagi.getTemplate(templateName).concat(\"#ui-bizagi-workportal-widget-admin-stakeholder-error\"),\n      useNewEngine: false });\n\n  },\n  /**\r\n      * Load all the templates\r\n      */\n  loadtemplates: function loadtemplates() {\n    var self = this;\n    self.panelWrapper = $.tmpl(self.getTemplate(\"admin.stakeholder.panel.wrapper\"));\n    self.stakeholdersList = self.getTemplate(\"admin.stakeholder.list\");\n    self.stakeholdersError = self.getTemplate(\"admin.stakeholder.error\");\n  },\n  /**\r\n      * Renders the content for the current widget\r\n      * Get the list of all parametric entities and display them in the Template\r\n      * If there is an error, display a a message\r\n      */\n  postRender: function postRender() {\n    var self = this;\n    var content = self.getContent();\n\n    content.empty();\n    $.when(self.dataService.getAdminStakeholdersList()).\n    done(function (data) {\n      if (data.length > 0) {\n        self.stakeholders = data;\n        var stakeholderListWrapper = $(\"#admin-stakeholder-list-wrapper\", self.panelWrapper);\n\n        content.html(self.panelWrapper);\n        $.tmpl(self.stakeholdersList, { stakeholdersList: self.stakeholders }).appendTo(stakeholderListWrapper);\n        $(\"#stakeholdersList option:first\", stakeholderListWrapper).attr('selected', 'selected');\n\n        self.configureHandlers();\n      } else\n      {\n        var notFoundMessage = self.getResource(\"workportal-general-first-line-no-records-found\");\n        content.html($.tmpl(self.stakeholdersError, { errorMessage: notFoundMessage }));\n      }\n    }).\n    fail(function (error) {\n      self.stakeholders = undefined;\n      var errorMessage = self.getResource(\"workportal-widget-admin-stakeholders-error\");\n      content.html($.tmpl(self.stakeholdersError, { errorMessage: errorMessage }));\n    });\n  },\n  /**\r\n      * Configure handlers\r\n      */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    var stakeholderListWrapper = $(\"#admin-stakeholder-list-wrapper\", self.panelWrapper);\n\n    //Catch the typed text in the search field and filter the stakeholder list\n    $(\"#searchStakeholder\", stakeholderListWrapper).keyup(function () {\n      var includeOpt = false;\n      var matchString = $(this).val().toLowerCase();\n\n      $.each(self.stakeholders, function () {\n        var el = $('#stakeholdersList option[value=\"' + this.guid + '\"]', stakeholderListWrapper);\n        if (matchString.length > 1) {\n          if (this.displayName.toLowerCase().indexOf(matchString) != -1) {\n            if ($(el).parent('span.toggleOption').length) {\n              $(el).unwrap();\n            }\n          } else {\n            if ($(el).parent('span.toggleOption').length == 0) {\n              $(el).wrap('<span class=\"toggleOption\" style=\"display: none;\" />');\n            }\n          }\n        } else {\n          if ($(el).parent('span.toggleOption').length) {\n            $(el).unwrap();\n          }\n        }\n      });\n\n    });\n    // Stakeholderlist listener\n    $(\"#stakeholdersList\", stakeholderListWrapper).change(function () {\n      $('#stakeholdersList>span>option:selected', self.panelWrapper).prop('selected', false);\n      self.setInitialState();\n      self.drawSimpleGrid();\n    }).trigger(\"change\");\n  },\n  /**\r\n      * Init the simple grid pluggin to display all the instances of the selected entity\r\n      */\n  drawSimpleGrid: function drawSimpleGrid() {\n    var self = this;\n    var selectedEntity = self.getSelectedItem();\n    if (selectedEntity.idDisplayForm && selectedEntity.idDisplayForm != \"00000000-0000-0000-0000-000000000000\") {\n      var formParams = {\n        guid: selectedEntity.guidEntity,\n        guidForm: selectedEntity.idDisplayForm,\n        isStakeholder: false };\n\n      $.when(self.dataService.getAdminEntitiesForm(formParams)).\n      done(function (responseFormDisplay) {\n        self.performSimpleGrid(responseFormDisplay);\n      });\n    } else\n    {\n      self.performSimpleGrid();\n    }\n  },\n\n  performSimpleGrid: function performSimpleGrid(formDisplay) {\n    var self = this;\n    var selectedEntity = self.getSelectedItem();\n    var simpleGridPlugginOptions = {\n      allowAdd: selectedEntity.allowAdd,\n      allowEdit: selectedEntity.allowEdit,\n      displayName: selectedEntity.displayName,\n      page: self.getCurrentPageToSimpleGrid(),\n      pageSize: 7,\n      orderField: selectedEntity.orderField || \"\",\n      orderType: selectedEntity.orderType || \"asc\",\n      filters: selectedEntity.filters,\n      onDataBinding: function onDataBinding(args) {\n        args.pag = self.getCurrentPageToSimpleGrid();\n        var def = $.Deferred();\n        $.when(self.dataService.getAdminEntitiesRowData($.extend(args, { guidEntity: selectedEntity.guidEntity }))).\n        done(function (responseEntity) {\n          if (formDisplay) {\n            var newResponseEntity = self.reshapeEntity(responseEntity, formDisplay);\n            def.resolve(newResponseEntity);\n          } else {\n            def.resolve(responseEntity);\n          }\n        }).\n        fail(function (error) {\n          var errorMessage = self.getResource(\"workportal-widget-admin-stakeholders-instances-error\");\n          $(\"#admin-stakeholder-instances-wrapper\", self.getContent()).html($.tmpl(self.stakeholdersError, { errorMessage: errorMessage }));\n        });\n        return def.promise();\n      },\n      onLoadFilter: function onLoadFilter(args) {\n        if (args.type === \"Entity\") {\n          return self.dataService.getAdminEntityData(args);\n        }\n      },\n      onFilterChanged: function onFilterChanged() {\n        self.setInitialState();\n      },\n      onPageChanging: function onPageChanging(beforePage, newPage) {\n        self.setCurrentPageToSimpleGrid(newPage);\n      },\n      onAdd: function onAdd(e, args) {\n        self.validateVersionForm(this, 'New');\n      },\n      onEdit: function onEdit(e, args) {\n        self.validateVersionForm(args, 'Edit');\n      },\n      getResource: function getResource(key) {\n        self.getResource(key);\n      } };\n\n\n    $(\"#admin-stakeholder-instances-wrapper\", self.panelWrapper).simpleGrid(self, simpleGridPlugginOptions).render();\n  },\n  /**\r\n      * Return all the data of the selected item\r\n      * @return {{guidEntity: *, displayName: *, allowAdd: boolean, allowEdit: boolean}}\r\n      */\n  getSelectedItem: function getSelectedItem() {\n    var self = this;\n    var $selectedStakeholder = $('#stakeholdersList option:selected', self.panelWrapper);\n    var params = {\n      guidEntity: $selectedStakeholder.val(),\n      displayName: $selectedStakeholder.text(),\n      allowAdd: $selectedStakeholder.attr(\"data-allowAdd\").toLowerCase() === \"true\" ? true : false,\n      allowEdit: $selectedStakeholder.attr(\"data-allowEdit\").toLowerCase() === \"true\" ? true : false,\n      idDisplayForm: $selectedStakeholder.attr(\"data-idDisplayForm\"),\n      row: self.currentIdRow,\n      orderField: $selectedStakeholder.data(\"orderField\"),\n      orderType: $selectedStakeholder.data(\"orderType\"),\n      filters: $selectedStakeholder.data(\"filters\") };\n\n\n    return params;\n  },\n  /**\r\n      * Build the correct data to get the form based on the action {Edit, New}\r\n      * If the action is:\r\n      * - New: {guidEntity, guidForm}\r\n      * - Edit: {surrogateKey, guidEntity, guidForm}\r\n      * @param element The selected element\r\n      * @param action The action to perform\r\n      */\n  validateVersionForm: function validateVersionForm(element, action) {\n    var self = this;\n    var $selectedStakeholder = $('#stakeholdersList option:selected', self.panelWrapper);\n    var stakeholder = self.stakeholders.find(function (e) {return e.guid === $selectedStakeholder.val();});\n    var params = {\n      guid: $selectedStakeholder.val(),\n      isStakeholder: true };\n\n    if (action === 'New') {\n      params.guidForm = typeof stakeholder.idAddForm !== \"undefined\" ? stakeholder.idAddForm : \"00000000-0000-0000-0000-000000000000\";\n    } else\n    if (action == 'Edit') {\n      params.idRow = $(element).attr('data-idrowentity');\n      params.guidForm = typeof stakeholder.idEditForm !== \"undefined\" ? stakeholder.idEditForm : \"00000000-0000-0000-0000-000000000000\";\n    }\n\n    //Empty the canvas to render the form\n    $('#detailEntity', self.panelWrapper).empty();\n    if (params.guidForm === \"00000000-0000-0000-0000-000000000000\") {\n      self.validateUser(params, action);\n    } else\n    {\n      $.when(self.dataService.getAdminEntityMigrated(params.guidForm)).done(function (data) {\n        if (data.result == 0 || data.result == 10) {\n          self.validateUser(params, action);\n        } else\n        {\n          if (data.result == -9) {\n            var errorMessage = self.getResource(\"workportal-widget-admin-stakeholders-instances-error\");\n            $(\"#admin-stakeholder-instances-wrapper\", self.getContent()).html($.tmpl(self.stakeholdersError, { errorMessage: errorMessage }));\n          } else\n          {\n            if (action == 'New') {\n              params.idRow = -1;\n            }\n            var url = 'App/Admin/Entity.aspx?giudEntity=' + params.guid + '&idSurrogateKey=' + params.idRow + '&referer=entityadmin&Action=' + action + '&idForm=' + params.idForm;\n            self.loadIframeForm(url, 'otherForm');\n          }\n        }\n      });\n    }\n  },\n  /**\r\n      * Collect the data changed in the form and save the values\r\n      * @param formRender the Form Rendered\r\n      */\n  saveFormEntity: function saveFormEntity(formRender) {\n    var self = this;\n    var defSave = $.Deferred();\n    var renderValues = {};\n    var selectedStakeholder = self.getSelectedItem();\n\n    formRender.collectRenderValues(renderValues);\n\n    if (self.associatedUserHasChange(renderValues)) {\n      $.when(self.duplicatedUser(renderValues)).done(function (resp) {\n\n        if (resp.length > 0) {\n          var alreadyAssociated = resp.find(function (e) {return e.idEntity === selectedStakeholder.guidEntity;});\n\n          if (typeof alreadyAssociated !== \"undefined\") {\n            var confirmationMsg = bizagi.localization.getResource(\"workportal-widget-admin-entities-user-asociated-error\");\n            bizagi.showMessageBox(confirmationMsg, \"Bizagi\", \"warning\");\n          } else\n          {\n            self.submitFormData(formRender, renderValues, defSave);\n          }\n        } else\n        {\n          self.submitFormData(formRender, renderValues, defSave);\n        }\n\n      }).fail(function (error) {\n        bizagi.showMessageBox(error.message);\n      });\n    } else {\n      self.submitFormData(formRender, renderValues, defSave);\n    }\n\n    return defSave.promise();\n  },\n  /**\r\n      * Submit the data of the form and resolve de deferred\r\n      * @param formRender the Form Rendered\r\n      * @param renderValues the values of the form\r\n      * @param defSave the deferred\r\n      */\n  submitFormData: function submitFormData(formRender, renderValues, defSave) {\n    var self = this;\n    var serviceRender = new bizagi.render.services.service();\n\n    $.when(serviceRender.multiactionService.submitData({\n      action: \"SAVE\",\n      contexttype: \"entity\",\n      data: renderValues,\n      surrogatekey: typeof formRender.surrogatekey !== \"undefined\" ? formRender.surrogatekey : false,\n      idPageCache: formRender.idPageCache })).\n    done(function (formRender) {\n      if (formRender.type == \"success\") {\n        defSave.resolve(true);\n      } else\n      {\n        defSave.reject();\n      }\n    }).fail(function (formError) {\n      if (formError.message) {\n        bizagi.showMessageBox(formError.message);\n      }\n      defSave.reject();\n    });\n  },\n  /**\r\n      * Check if the associated user has changed. A user changes when:\r\n      * - There is no selected associated user and the user search and select one\r\n      * - There is an associated user and the user change it\r\n      * @returns {boolean}\r\n      */\n  associatedUserHasChange: function associatedUserHasChange(renderValues) {\n    var self = this;\n    var userChanged = false;\n\n    if (typeof self._associatedUser !== \"undefined\") {\n      if (typeof renderValues.associatedUser !== \"undefined\") {\n        if (self._associatedUser.id !== renderValues.associatedUser.id) {\n          userChanged = true;\n        }\n      }\n    } else\n    {\n      if (typeof renderValues.associatedUser !== \"undefined\") {\n        userChanged = true;\n      }\n    }\n    return userChanged;\n  },\n  validateUser: function validateUser(params, action) {\n    var self = this;\n    var selectedStakeholder = self.getSelectedItem();\n    $.when(self.getFormEntity(params)).done(function (loadedForm) {\n      var selectedUser = loadedForm.getRender(\"associatedUser\");\n      if (action == \"Edit\" && selectedUser) {\n        $(\".bz-render-getUser-container\").html(selectedUser.value.value);\n      }\n      selectedUser.bind(\"renderchange\", function (e, element) {\n        element.render.getValue();\n        var renderValues = {};\n        loadedForm.collectRenderValues(renderValues);\n        $.when(self.duplicatedUser(renderValues)).done(function (resp) {\n          if (resp.length > 0) {\n            var alreadyAssociated = resp.find(function (e) {return e.idEntity === selectedStakeholder.guidEntity;});\n            if (typeof alreadyAssociated !== \"undefined\") {\n              var confirmationMsg = bizagi.localization.getResource(\"workportal-widget-admin-entities-user-asociated-error\");\n              $.when(bizagi.showMessageBox(confirmationMsg, \"Bizagi\", \"warning\")).done(function () {\n                element.render.input.val(\"\");\n                element.render.value = null;\n              }).fail(function () {\n                element.render.input.val(\"\");\n                element.render.value = null;\n              });\n            }\n          }\n        });\n      });\n    });\n\n  },\n  duplicatedUser: function duplicatedUser(renderValues) {\n    var self = this;\n    var defSave = $.Deferred();\n    $.when(self.dataService.getUserStakeholders({ idUser: renderValues.associatedUser.id })).done(function (resp) {\n      defSave.resolve(resp);\n    }).fail(function (formError) {\n      defSave.reject(formError);\n    });\n    return defSave.promise();\n  } });","/**\r\n * Admin module to manage applications OAuth 2\r\n * @author Alex Esteban Rojas Gutierrez\r\n */\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.admin.oauth2Applications\", {}, {\n\n  getWidgetName: function getWidgetName() {\n    return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_OAUTH2APPLICATIONS;\n  },\n\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n    var templateName = \"bizagi.workportal.desktop.widgets.admin.oauth2.applications\";\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    // Load templates\n    self.loadTemplates({\n      \"admin.oauth2applications\": bizagi.getTemplate(templateName).concat(\"#ui-bizagi-workportal-widget-admin-oauth2applications\"),\n      \"admin.edit.oauth2applications\": bizagi.getTemplate(templateName).concat(\"#ui-bizagi-workportal-widget-edit-oauth2applications\"),\n      \"admin.add.oauth2applications\": bizagi.getTemplate(templateName).concat(\"#ui-bizagi-workportal-widget-add-oauth2applications\"),\n      useNewEngine: false });\n\n\n    // Model's declaration\n    self.CurrentClientData = {};\n  },\n\n  renderContent: function renderContent() {\n    var self = this;\n    self.content = $.tmpl(self.getTemplate(\"admin.oauth2applications\"));\n    return self.content;\n  },\n\n  /* Load all the templates */\n  loadtemplates: function loadtemplates() {\n    var self = this;\n    self.contentOauth = $.tmpl(self.getTemplate(\"admin.oauth2applications\"));\n  },\n\n  postRender: function postRender() {\n    var self = this;\n    var content = self.getContent();\n    content.html(self.contentOauth);\n    self.performSimpleGrid();\n  },\n\n  performSimpleGrid: function performSimpleGrid() {\n    var self = this;\n    var simpleGridPlugginOptions = {\n      allowAdd: true,\n      allowEdit: true,\n      allowDelete: true,\n      allow: true,\n      orderEnabled: false,\n      displayName: 'Oauth',\n      pageSize: 10,\n      onDataBinding: function onDataBinding(args) {\n        var def = $.Deferred();\n        $.when(self.dataService.getOAuth2Applications().done(function (data, args) {\n          var headers = ['Id', 'Name', 'Description', 'ClientId', 'ClientSecret', 'AuthorizationGrantType', 'AccessTokenLifetimeInMinutes', 'AllowedScope', 'DefaultUserDomain', 'DefaultUserName', 'RedirectUri', 'RedirectUriStrategy', 'Website'];\n          data.data.map(function (element) {\n            headers.forEach(function (hv) {\n              if (element[hv] === undefined) {\n                element[hv] = '';\n              }\n\n              if (hv === 'AuthorizationGrantType' && element[hv] === 'any') {\n                element[hv] = 'all';\n              }\n            });\n            return element;\n          });\n          var responseOauth = {};\n\n          if (data.data.length) {\n            responseOauth.header = $.map($(headers), function (item) {\n              return {\n                attributeType: 1004,\n                dataType: 2,\n                displayName: bizagi.localization.getResource('workportal-widget-admin-oauth2-applications-' + item.toLowerCase()),\n                fieldValue: 'idGuestSH',\n                xpath: 'GuestSH' };\n\n            });\n          }\n\n          self.namesApplications = [];\n\n          responseOauth.row = $.map(data.data, function (item) {\n            self.namesApplications.push(item.Name);\n            return [$.map($(headers).filter(Object.keys(data.data[0])), function (key) {\n              var value = item[key];\n              if (key == \"AllowedScope\") {\n                value = (item[key][0] + ' ' + item[key][1]).replace(\"openid\", \"\").trim();\n              }\n\n              return value;\n            })];\n          });\n\n          /*responseOauth.total = data.data.length;\r\n               responseOauth.page = args.pag || 1;\r\n               responseOauth.records = data.data.length;*/\n\n          def.resolve(responseOauth);\n        }).fail(function (error) {\n          bizagi.log(error);\n        }));\n\n        $.when(self.dataService.getCurrentUser()).done(function (currentUserData, args) {\n          self.userFullName = currentUserData.user;\n        }).fail(function () {});\n\n        return def.promise();\n      },\n      onAdd: function onAdd(e, args) {\n        self.addApplication(this, 'New');\n      },\n      onEdit: function onEdit(e, args) {\n        self.editApplication($(args).attr(\"data-idrowentity\"));\n      },\n      onDelete: function onDelete(e, args) {\n        self.deleteApplication($(args).attr(\"data-idrowentity\"));\n      },\n      getResource: function getResource(key) {\n        /*self.getResource(key);*/\n      } };\n\n\n    $(\"#admin-oauth2-applications-table\", self.getContent()).simpleGrid(self, simpleGridPlugginOptions).render();\n  },\n\n  addApplication: function addApplication(element, action) {\n    var self = this;\n\n    var tmplGT = $.tmpl(self.getTemplate(\"admin.add.oauth2applications\"), {});\n    tmplGT.appendTo(\"#admin-oauth2-add-application\");\n\n    $('#admin-oauth2-applications-wrapper').hide();\n    $('#admin-oauth2-add-application').show();\n\n    self.setupAddApplicationEvents();\n\n    self.setupCombos(\"add\");\n\n  },\n\n  setupAddApplicationEvents: function setupAddApplicationEvents() {\n    var self = this;\n    $('#btn-admin-oauth2-add').click(function () {self.save();});\n    $('#btn-admin-oauth2-cancel').click(function () {self.cancel(\"add\");});\n    self.setupUserSuggest();\n  },\n\n  setupUserSuggest: function setupUserSuggest(edit) {\n    var type = '';\n    if (edit) {\n      type = 'edit-';\n    }\n    var self = this;\n    var stp = null;\n    var inputDomain = $('#biz-wp-oauth2-' + type + 'user-domain-input');\n    var inputUserName = $('#biz-wp-oauth2-default-' + type + 'user-name-input');\n    var options = $('#biz-wp-oauth2-default-' + type + 'user-name-options');\n    $(inputUserName).focus(function (event) {\n      if ($(this).length > 0 && options[0].children.length > 0) {\n        $(options).css('display', 'block');\n      } else\n      {\n        $(options).css('display', 'none');\n      }\n    });\n    $(inputUserName).keyup(function (event) {\n      var that = this;\n      var up = 38;\n      var down = 40;\n      var select = 13;\n      var proximo = 0;\n\n      switch (event.keyCode) {\n        case select:\n          selectData();\n          break;\n        case up:\n          upOrDown(\"up\");\n          break;\n        case down:\n          upOrDown(\"down\");\n          break;\n        default:\n          searchNames();\n          break;}\n\n      function selectData() {\n        var target = $('#biz-wp-oauth2-default-' + type + 'user-name-options .selected:first').attr(\"data-target0\");\n        var domain = $('#biz-wp-oauth2-default-' + type + 'user-name-options .selected:first').attr(\"data-target1\");\n        $(that).val(target);\n        $(inputDomain).val(domain);\n        $(options).html('');\n        $(options).css('display', 'none');\n      }\n\n      function upOrDown(direction) {\n        $.each($('.user-option'), function (index) {\n          if ($(this).hasClass(\"selected\")) {\n            switch (direction) {\n              case \"down\":\n                proximo += index + 1;\n                break;\n              case \"up\":\n                proximo = index - 1;\n                break;}\n\n          }\n\n        });\n        if (proximo == $('.user-option').length) {\n          return false;\n        } else if (proximo < 0) {\n          return false;\n        }\n        $.each($('.user-option'), function (index) {\n          $(this).removeClass('selected');\n          if (index === proximo) {\n            $(this).addClass('selected');\n          }\n        });\n      }\n      function searchNames() {\n        $(inputDomain).val('');\n        $(options).fadeIn();\n        if (stp !== null) {clearTimeout(stp);}\n        stp = setTimeout(function (value) {\n          if (value != '') {\n            var params = { userName: value };\n            self.dataService.searchUsersOauth(params).\n            done(function (result) {\n              if (result.users && Array.isArray(result.users) && result.users.length > 0) {\n                self.createOptionsArray(result.users.filter(function (x, i) {return i < 5;}), options, [{ element: inputUserName, value: 'userName' }, { element: inputDomain, value: 'domain' }]);\n              } else {\n                $(options).html('<div class=\"user-no-option\">' + bizagi.localization.getResource('workportal-widget-admin-oauth2-user-search-no-results') + ' </div>');\n              }\n            }).\n            fail(function () {$(options).html('');});\n          } else {\n            $(options).css('display', 'none');\n          }\n        }, 400, event.currentTarget.value);\n      }\n    }).closest('.biz-wp-form-cell').focusout(function () {\n      $(options).fadeOut();\n    });\n\n    // Access token input\n    self.validationAccessTokenInput(edit ? \"#biz-wp-oauth2-edit-access-token-input\" : \"#biz-wp-oauth2-access-token-input\", edit)();\n  },\n\n  validationAccessTokenInput: function validationAccessTokenInput(accessTokenSelector, isEdit) {\n    var accessTokenInput = $(accessTokenSelector);\n\n    if (!isEdit) {\n      accessTokenInput.val(0);\n    }\n\n    function updateSuggest() {\n      var num = +$(accessTokenSelector).val();\n      if (num === 0) {\n        $(\"#suggest_lifetime\").text(bizagi.localization.getResource('workportal-widget-admin-oauth2-applications-access-token-lifetime-never-expires'));\n      } else {\n        $(\"#suggest_lifetime\").text(\"\");\n      }\n    }\n\n    accessTokenInput.change(updateSuggest);\n\n    return updateSuggest;\n  },\n\n  createOptionsArray: function createOptionsArray(users, options, targets) {\n    var self = this;\n    $(options).html('');\n    users.forEach(function (user) {\n      $(options).append(self.createOption(user, targets, options));\n    });\n  },\n  createOption: function createOption(value, targets, options) {\n    var data = targets.reduce(function (result, target, index) {return result + 'data-target' + index + '=\"' + value[target.value] + '\" ';}, '');\n    return $('<div class=\"user-option\" ' + data + \"></div>\").\n    click({ targets: targets }, function (ev) {\n      var that = this;\n      ev.data.targets.forEach(function (target, index) {\n        $(target.element).val($(that).data('target' + index));\n      });\n      $(options).html('');\n    }).\n    html(value.domain + ' \\\\ ' + value.userName);\n  },\n\n  setupCombos: function setupCombos(type) {\n    var self = this;\n    var dataGrandType = [{\n      displayName: bizagi.localization.getResource('workportal-widget-admin-oauth2-grandtype-authorization-code'), //\"Authorization Code\",\n      id: \"authorization_code\" },\n\n    {\n      displayName: bizagi.localization.getResource('workportal-widget-admin-oauth2-grandtype-client-credentials'), //\"Client credentials\",\n      id: \"client_credentials\" },\n\n    {\n      displayName: bizagi.localization.getResource('workportal-widget-admin-oauth2-grandtype-all'), //All\n      id: \"any\" },\n\n    {\n      displayName: bizagi.localization.getResource('workportal-widget-admin-oauth2-grandtype-bearer-token'), // Bearer token\n      id: \"bearer_token\" }];\n\n\n\n    var dataRedirectUri = [{\n      displayName: bizagi.localization.getResource('workportal-widget-admin-oauth2-redirecturi-web-application'), //\"Web Application\",\n      id: \"WebApplication\" },\n\n    {\n      displayName: bizagi.localization.getResource('workportal-widget-admin-oauth2-redirecturi-mobile-bar'), //\"Mobile Title Bar Browser\",\n      id: \"MobileTitleBarBrowser\" },\n\n    {\n      displayName: bizagi.localization.getResource('workportal-widget-admin-oauth2-redirecturi-mobile-port'), //\"Mobile Localhost Port\",\n      id: \"MobileLocalhostPort\" }];\n\n\n\n    var dataTokenLifetimeType = [{\n      displayName: 'Absolute',\n      id: 'Absolute' },\n    {\n      displayName: 'Sliding',\n      id: 'Sliding' }];\n\n\n    if (type === \"add\") {\n      var $comboGrandType = $(\"#biz-wp-oauth2-grant-type-input\");\n      var $comboRedirectUri = $(\"#biz-wp-oauth2-redirect-uri-strategy-input\");\n      var $comboTokenLifetimeType = $(\"#biz-wp-oauth2-token-lifetime-type-input\");\n\n      self.setupCombo($comboGrandType, dataGrandType, \"grantType\");\n      self.setupCombo($comboRedirectUri, dataRedirectUri, \"RedirectUri\");\n      self.setupCombo($comboTokenLifetimeType, dataTokenLifetimeType, \"tokenLifetimeType\");\n\n      self.initializeOauth2Template(\"authorization_code\");\n    }\n\n    if (type === \"edit\") {\n      var $comboEditGrandType = $(\"#biz-wp-oauth2-edit-grant-type-input\");\n      var $comboEditRedirectUri = $(\"#biz-wp-oauth2-edit-redirect-uri-strategy-input\");\n      var $comboEditTokenLifetimeType = $(\"#biz-wp-oauth2-token-lifetime-type-input\");\n\n      self.setupCombo($comboEditGrandType, dataGrandType, \"editGrantType\");\n      self.setupCombo($comboEditRedirectUri, dataRedirectUri, \"editRedirectUri\");\n      self.setupCombo($comboEditTokenLifetimeType, dataTokenLifetimeType, \"editTokenLifetimeType\");\n    }\n  },\n\n  initializeOauth2Template: function initializeOauth2Template(grantType) {\n    var scopeLogin = $(\"#biz-wp-oauth2-edit-scope-login-input, #biz-wp-oauth2-scope-login-input\");\n    var scopeUserSync = $(\"#biz-wp-oauth2-scope-user-sync-input, #biz-wp-oauth2-edit-scope-user-sync-input\");\n    var scopeODataQuery = $(\"#biz-wp-oauth2-scope-odata-query-input, #biz-wp-oauth2-edit-scope-odata-query-input\");\n    var scopeRpa = $(\"#biz-wp-oauth2-scope-rpa-input, #biz-wp-oauth2-edit-scope-rpa-input\");\n    var scopeODataRules = $(\"#biz-wp-oauth2-scope-odata-rules-input, #biz-wp-oauth2-edit-scope-odata-rules-input\");\n\n    if (grantType === \"bearer_token\") {\n      $(\".bz-oauth2-only-authorization-code, .bz-oauth2-only-edit-authorization-code, #bz-oauth2-only-WebApplication, #bz-oauth2-edit-only-WebApplication\").hide();\n      $(\".bz-oauth2-only-client-credentials, .bz-oauth2-only-edit-client-credentials\").show();\n      scopeUserSync.removeAttr(\"disabled\").prop(\"checked\", false);\n      scopeLogin.attr(\"disabled\", true).prop(\"checked\", false);\n      scopeRpa.attr(\"disabled\", true).prop(\"checked\", false);\n    } else if (grantType === \"client_credentials\") {\n      scopeLogin.attr(\"disabled\", true).prop(\"checked\", false);\n    } else if (grantType === \"authorization_code\") {\n      scopeUserSync.attr(\"disabled\", true).prop(\"checked\", false);\n      scopeODataQuery.attr(\"disabled\", true).prop(\"checked\", false);\n      scopeRpa.attr(\"disabled\", true).prop(\"checked\", false);\n      scopeODataRules.attr(\"disabled\", true).prop(\"checked\", false);\n    }\n  },\n\n  /**\r\n      *\r\n      * @param {$} elem\r\n      * @param { { displayName: string, id: string }[] } data\r\n      * @param {'grantType' | 'RedirectUri' | 'editGrantType' | 'editRedirectUri' | 'tokenLifetimeType' | 'editTokenLifetimeType'} dataSelf\r\n      */\n  setupCombo: function setupCombo(elem, data, dataSelf) {\n    var self = this;\n\n    if (dataSelf === \"grantType\") {self.grantType = data[0].id;} else\n    if (dataSelf === \"RedirectUri\") {self.RedirectUri = data[0].id;} else\n    if (dataSelf === \"tokenLifetimeType\") {self.tokenLifetimeType = data[0].id;}\n\n    self.pos = 0;\n\n    if (dataSelf === \"editGrantType\") {\n      self.editGrantType = self.editGrantType || data[0].id;\n      $.each(data, function (i) {\n        if (data[i].id === self.editGrantType) {self.pos = i;}\n      });\n    } else if (dataSelf === \"editRedirectUri\") {\n      self.editRedirectUri = self.editRedirectUri || data[0].id;\n      $.each(data, function (i) {\n        if (data[i].id === self.editRedirectUri) {self.pos = i;}\n      });\n    } else if (dataSelf === \"editTokenLifetimeType\") {\n      self.tokenLifetimeType = self.editTokenLifetimeType || data[0].id;\n      $.each(data, function (i) {\n        if (data[i].id === self.tokenLifetimeType) {self.pos = i;}\n      });\n    }\n\n    if (self.comboElements) {\n      self.comboElements.push(elem);\n    } else {\n      self.comboElements = [];\n    }\n\n    elem.uicombo({\n      data: { combo: data },\n      initValue: data[self.pos],\n      itemValue: function itemValue(item) {\n        return item.id;\n      },\n      itemText: function itemText(item) {\n        return item.displayName;\n      },\n      onChange: function onChange(obj) {\n        var bizOAuth2UserSyncInput = $(\"#biz-wp-oauth2-scope-user-sync-input, #biz-wp-oauth2-edit-scope-user-sync-input\");\n        var bizOAuth2ODataQueryInput = $(\"#biz-wp-oauth2-scope-odata-query-input, #biz-wp-oauth2-edit-scope-odata-query-input\");\n        var bizOAuth2RpaInput = $(\"#biz-wp-oauth2-scope-rpa-input, #biz-wp-oauth2-edit-scope-rpa-input\");\n        var bizOAuth2ODataRulesInput = $(\"#biz-wp-oauth2-scope-odata-rules-input, #biz-wp-oauth2-edit-scope-odata-rules-input\");\n        $(\".bz-oauth2-only-authorization-code, .bz-oauth2-only-edit-authorization-code, #bz-oauth2-only-WebApplication, #bz-oauth2-edit-only-WebApplication\").show();\n        $(\"#biz-wp-oauth2-edit-scope-login-input, #biz-wp-oauth2-scope-login-input\").removeAttr(\"disabled\").prop(\"checked\", false);\n\n        if (dataSelf === \"editLifetimeType\" || dataSelf === \"tokenLifetimeType\") {\n          self.tokenLifetimeType = obj.ui.data(\"value\");\n        } else if (dataSelf === \"grantType\" || dataSelf === \"editGrantType\") {\n          if (dataSelf === \"grantType\") {self.grantType = obj.ui.data(\"value\");}\n          if (dataSelf === \"editGrantType\") {self.editGrantType = obj.ui.data(\"value\");}\n          if (obj.ui.data(\"value\") === \"client_credentials\") {\n            $(\".bz-oauth2-only-edit-authorization-code\").hide();\n            $(\".bz-oauth2-only-authorization-code\").hide();\n            $(\".bz-oauth2-only-edit-client-credentials\").show();\n            $(\".bz-oauth2-only-client-credentials\").show();\n            bizOAuth2UserSyncInput.removeAttr(\"disabled\").prop(\"checked\", false);\n            bizOAuth2ODataQueryInput.removeAttr(\"disabled\").prop(\"checked\", false);\n            bizOAuth2RpaInput.removeAttr(\"disabled\").prop(\"checked\", false);\n            bizOAuth2ODataRulesInput.removeAttr(\"disabled\").prop(\"checked\", false);\n          } else if (obj.ui.data(\"value\") === \"authorization_code\") {\n            $(\".bz-oauth2-only-client-credentials\").hide();\n            $(\".bz-oauth2-only-authorization-code\").show();\n            $(\".bz-oauth2-only-edit-client-credentials\").hide();\n            $(\".bz-oauth2-only-edit-authorization-code\").show();\n            bizOAuth2UserSyncInput.attr(\"disabled\", true).prop(\"checked\", false);\n            bizOAuth2ODataQueryInput.attr(\"disabled\", true).prop(\"checked\", false);\n            bizOAuth2RpaInput.attr(\"disabled\", true).prop(\"checked\", false);\n            bizOAuth2ODataRulesInput.attr(\"disabled\", true).prop(\"checked\", false);\n          } else if (obj.ui.data(\"value\") === \"bearer_token\") {/*  */} else {\n            $(\".bz-oauth2-only-client-credentials\").show();\n            $(\".bz-oauth2-only-authorization-code\").show();\n            $(\".bz-oauth2-only-edit-client-credentials\").show();\n            $(\".bz-oauth2-only-edit-authorization-code\").show();\n            bizOAuth2UserSyncInput.attr(\"disabled\", true).prop(\"checked\", false);\n            bizOAuth2ODataQueryInput.attr(\"disabled\", true).prop(\"checked\", false);\n            bizOAuth2RpaInput.attr(\"disabled\", true).prop(\"checked\", false);\n            bizOAuth2ODataRulesInput.attr(\"disabled\", true).prop(\"checked\", false);\n          }\n          self.initializeOauth2Template(obj.ui.data(\"value\"));\n        } else if (dataSelf === \"RedirectUri\" || dataSelf === \"editRedirectUri\") {\n          if (dataSelf === \"RedirectUri\") {self.RedirectUri = obj.ui.data(\"value\");}\n          if (dataSelf === \"editRedirectUri\") {self.editRedirectUri = obj.ui.data(\"value\");}\n          if (obj.ui.data(\"value\") === \"WebApplication\") {\n            $(\"#bz-oauth2-only-MobileLocalhostPort\").hide();\n            $(\"#bz-oauth2-edit-only-MobileLocalhostPort\").hide();\n            $(\"#bz-oauth2-only-WebApplication\").show();\n            $(\"#bz-oauth2-edit-only-WebApplication\").show();\n          } else if (obj.ui.data(\"value\") === \"MobileTitleBarBrowser\") {\n            $(\"#bz-oauth2-only-WebApplication\").hide();\n            $(\"#bz-oauth2-only-MobileLocalhostPort\").hide();\n            $(\"#bz-oauth2-edit-only-WebApplication\").hide();\n            $(\"#bz-oauth2-edit-only-MobileLocalhostPort\").hide();\n          } else {\n            $(\"#bz-oauth2-only-WebApplication\").hide();\n            $(\"#bz-oauth2-edit-only-WebApplication\").hide();\n            $(\"#bz-oauth2-only-MobileLocalhostPort\").show();\n            $(\"#bz-oauth2-edit-only-MobileLocalhostPort\").show();\n          }\n        } else if (dataSelf === \"AllowedScope\") {self.AllowedScope = obj.ui.data(\"value\");} else\n        if (dataSelf === \"editAllowedScope\") {self.editAllowedScope = obj.ui.data(\"value\");}\n      } });\n\n  },\n\n  showErrors: function showErrors(target, messageToken) {\n    target.show();\n    target.html(bizagi.localization.getResource(messageToken));\n  },\n\n  dataValidating: function dataValidating(form) {\n    var self = this;\n    var prefix = '';\n    if (form === 'edit') {\n      prefix = 'edit-';\n    }\n\n    var errorsBoard = $(\"#bz-oauth2-applications-errors-board\");\n    errorsBoard.hide();\n    $(\"#bz-oauth2-applications-\" + prefix + \"error-scope-required\").hide();\n\n    // Validating App Name\n    var inputName = $(\"#biz-wp-oauth2-\" + prefix + \"name-input\").val();\n    inputName = inputName.trim();\n\n    if (inputName.length < 1) {\n      self.showErrors(errorsBoard, 'workportal-widget-admin-oauth2-error-app-name-required');\n      return false;\n    } else if (self.namesApplications.findIndex(function (n) {return n === inputName;}) >= 0) {\n      if (form !== 'edit' || self.CurrentClientData.Name !== inputName) {\n        self.showErrors(errorsBoard, 'workportal-widget-admin-oauth2-error-name-duplicated');\n        return false;\n      }\n    }\n\n    // Validating Allowed scope\n    if (!($(\"#biz-wp-oauth2-\" + prefix + \"scope-api-input\").is(':checked') ||\n    $(\"#biz-wp-oauth2-\" + prefix + \"scope-login-input\").is(':checked') ||\n    $(\"#biz-wp-oauth2-\" + prefix + \"scope-user-sync-input\").is(':checked')))\n    {\n      self.showErrors(errorsBoard, 'workportal-widget-admin-oauth2-error-atleastone-allowed-scope');\n      $(\"#bz-oauth2-applications-\" + prefix + \"error-scope-required\").show();\n      return false;\n    }\n\n    // Validating Data depending of GrantType\n    //-- Client Credentials required\n    var grantType = form === 'save' ? self.grantType : self.editGrantType;\n\n    var inputDefaultUserDomain = $(\"#biz-wp-oauth2-\" + prefix + \"user-domain-input\").val().trim();\n    var inputDefaultUserName = $(\"#biz-wp-oauth2-default-\" + prefix + \"user-name-input\").val().trim();\n\n    if (grantType === \"client_credentials\" || grantType === \"any\" || grantType === \"bearer_token\") {\n      if (inputDefaultUserDomain.length < 1 || inputDefaultUserName.length < 1) {\n        self.showErrors(errorsBoard, 'workportal-widget-admin-oauth2-user-domain-required');\n        return false;\n      }\n    }\n\n    //-- Auth Code required\n    var RedirectUri = form === 'save' ? self.RedirectUri : self.editRedirectUri;\n    var inputRedirectUri = $(\"#biz-wp-oauth2-\" + prefix + \"redirect-uri-input\").val().trim();\n    var inputMobileHostPort = $(\"#biz-wp-oauth2-\" + prefix + \"mobile-host-port\").val().trim();\n    if (grantType === \"authorization_code\" || grantType === \"any\") {\n      if (RedirectUri === \"WebApplication\") {\n        if (inputRedirectUri.length < 1 || !/^(ftp|http|https):\\/\\/[^ \"]+$/.test(inputRedirectUri)) {\n          self.showErrors(errorsBoard, 'workportal-widget-admin-users-request-url-invalid');\n          return false;\n        }\n      } else if (RedirectUri === \"MobileLocalhostPort\") {\n        if (inputMobileHostPort.length < 1 || isNaN(inputMobileHostPort) || Math.floor(inputMobileHostPort) !== parseFloat(inputMobileHostPort)) {\n          self.showErrors(errorsBoard, 'workportal-widget-admin-oauth2-error-port-invalid');\n          return false;\n        }\n      }\n    }\n\n    // Validating Token Life Time\n    var inputAccessTokenLifetimeInMinutes = $(\"#biz-wp-oauth2-\" + prefix + \"access-token-input\").val().trim();\n    if (inputAccessTokenLifetimeInMinutes.length < 1 || isNaN(inputAccessTokenLifetimeInMinutes) || Math.floor(inputAccessTokenLifetimeInMinutes) !== parseFloat(inputAccessTokenLifetimeInMinutes)) {\n      self.showErrors(errorsBoard, 'workportal-widget-admin-oauth2-error-time-invalid');\n      return false;\n    }\n\n    return true;\n  },\n\n  save: function save() {\n    var self = this;\n\n    if (self.dataValidating('save') === true) {\n      var allowedScope = \"\";\n\n      if ($(\"#biz-wp-oauth2-scope-api-input\").is(':checked')) {\n        allowedScope += \"api\";\n      }\n\n      if ($(\"#biz-wp-oauth2-scope-login-input\").is(':checked')) {\n        allowedScope += \" login\";\n      }\n\n      if ($(\"#biz-wp-oauth2-scope-user-sync-input\").is(':checked')) {\n        allowedScope += \" usersync\";\n      }\n\n      if ($(\"#biz-wp-oauth2-scope-odata-query-input\").is(':checked')) {\n        allowedScope += \" odataquery\";\n      }\n\n      if ($(\"#biz-wp-oauth2-scope-rpa-input\").is(':checked')) {\n        allowedScope += \" rpa\";\n      }\n\n      if ($(\"#biz-wp-oauth2-scope-odata-rules-input\").is(':checked')) {\n        allowedScope += \" odatarules\";\n      }\n\n      var dataAddApplication = {};\n      dataAddApplication[\"authorization_grant_type\"] = self.grantType;\n      dataAddApplication[\"allowed_scope\"] = allowedScope;\n      dataAddApplication[\"username_creator\"] = self.userFullName;\n      dataAddApplication[\"redirect_uri_strategy\"] = self.RedirectUri;\n      dataAddApplication[\"tokenLifetimeType\"] = self.tokenLifetimeType;\n\n      /*This value is necesary because service returns error: url is malformed*/\n      if (self.grantType === \"client_credentials\" || self.grantType === \"bearer_token\") {\n        dataAddApplication[\"redirect_uri\"] = \"http://localhost--\";\n      }\n\n      var dataInputs = $(\"#formAddOAuthApp :input\").serializeArray();\n      for (var i = 0; i < dataInputs.length; i++) {\n        if (dataInputs[i].value) {\n          if (dataInputs[i].name === \"redirect_uri_port\" && self.RedirectUri === \"MobileLocalhostPort\") {\n            dataAddApplication[\"redirect_uri\"] = dataInputs[i].value;\n          } else {\n            dataAddApplication[dataInputs[i].name] = dataInputs[i].value;\n          }\n        }\n      }\n\n      self.dataService.createOAuth2Application(dataAddApplication).done(function () {\n        self.performSimpleGrid();\n        self.cancel(\"add\");\n      });\n    }\n  },\n\n  getGrantType: function getGrantType(index) {\n    var dataGrandType = {\n      authorization_code: bizagi.localization.getResource('workportal-widget-admin-oauth2-grandtype-authorization-code'), //\"Authorization Code\",\n      client_credentials: bizagi.localization.getResource('workportal-widget-admin-oauth2-grandtype-client-credentials'), //\"Client credentials\",\n      any: bizagi.localization.getResource('workportal-widget-admin-oauth2-grandtype-all') //\"All\",\n    };\n    return dataGrandType[index];\n  },\n\n  getRedirectStrategy: function getRedirectStrategy(index) {\n    var dataRedirectStrategy = {\n      WebApplication: bizagi.localization.getResource('workportal-widget-admin-oauth2-redirecturi-web-application'), //\"Web Application\",\n      MobileTitleBarBrowser: bizagi.localization.getResource('workportal-widget-admin-oauth2-redirecturi-mobile-bar'), //\"Mobile Title Bar Browser\",\n      MobileLocalhostPort: bizagi.localization.getResource('workportal-widget-admin-oauth2-redirecturi-mobile-port') //\"Mobile Localhost Port\",\n    };\n    return dataRedirectStrategy[index];\n  },\n  getMobileLocalhostPort: function getMobileLocalhostPort(uri, strategy) {\n    if (strategy === \"MobileLocalhostPort\") {\n      var port = uri.match(/:([0-9]+)/)[1];\n      return parseInt(port);\n    } else {\n      return '';\n    }\n  },\n  //LOAD FORM TO EDIT OAUTH CLIENT\n  editApplication: function editApplication(applicationId) {\n    var self = this;\n    var content = self.getContent();\n    content = content[4] ? content[4] : content[2];\n\n    $.when(self.dataService.getOAuth2Application(applicationId)).done(function (data) {\n      if (data.success) {var\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n        checkedScope = function checkedScope(scope) {\n          return $.grep(self.CurrentClientData.AllowedScope, function (n) {return n === scope;}).length;\n        };self.CurrentClientData = data.data;if (self.CurrentClientData.RedirectUriStrategy != \"WebApplication\") self.CurrentClientData.uri = '';else self.CurrentClientData.uri = self.CurrentClientData.RedirectUri;var tmplGT = $.tmpl(self.getTemplate(\"admin.edit.oauth2applications\"), { editGrantType: self.CurrentClientData.AuthorizationGrantType, data: self.CurrentClientData }, { getGrantType: self.getGrantType, getRedirectStrategy: self.getRedirectStrategy, getMobileLocalhostPort: self.getMobileLocalhostPort });tmplGT.appendTo(content);self.ActualNameForEdit = self.CurrentClientData.Name;self.DataAllowedScope = self.CurrentClientData.AllowedScope;self.editGrantType = self.CurrentClientData.AuthorizationGrantType;self.editRedirectUri = self.CurrentClientData.RedirectUriStrategy;self.editTokenLifetimeType = self.CurrentClientData.TokenLifetimeType;\n\n        if (checkedScope(\"api\") > 0) {\n          $(\"#biz-wp-oauth2-edit-scope-api-input\", content).prop(\"checked\", true);\n        }\n\n        if (checkedScope(\"login\") > 0) {\n          $(\"#biz-wp-oauth2-edit-scope-login-input\", content).prop(\"checked\", true);\n        }\n\n        if (checkedScope(\"usersync\") > 0) {\n          setTimeout(function () {// Se debe esperar que el elemento se renderice completamente\n            $(\"#biz-wp-oauth2-edit-scope-user-sync-input\", content).prop(\"checked\", true);\n          });\n        }\n\n        if (checkedScope(\"odataquery\") > 0) {\n          setTimeout(function () {// Se debe esperar que el elemento se renderice completamente\n            $(\"#biz-wp-oauth2-edit-scope-odata-query-input\", content).prop(\"checked\", true);\n          });\n        }\n\n        if (checkedScope(\"rpa\") > 0) {\n          setTimeout(function () {// Se debe esperar que el elemento se renderice completamente\n            $(\"#biz-wp-oauth2-edit-scope-rpa-input\", content).prop(\"checked\", true);\n          });\n        }\n\n        if (checkedScope(\"odatarules\") > 0) {\n          setTimeout(function () {// Se debe esperar que el elemento se renderice completamente\n            $(\"#biz-wp-oauth2-edit-scope-odata-rules-input\", content).prop(\"checked\", true);\n          });\n        }\n\n        if (checkedScope(\"rpa\") > 0) {\n          setTimeout(function () {// Se debe esperar que el elemento se renderice completamente\n            $(\"#biz-wp-oauth2-edit-scope-rpa-input\", content).prop(\"checked\", true);\n          });\n        }\n\n        //Visual Setup for Grant Type, Allowed Scope and Redirect Strategy\n        if (!self.CurrentClientData.IsNative) {\n          self.setupCombos(\"edit\");\n\n          if (self.editGrantType === \"client_credentials\") {\n            $(\".bz-oauth2-only-edit-client-credentials\", content).show();\n            $(\".bz-oauth2-only-edit-authorization-code\", content).hide();\n          } else if (self.editGrantType === \"authorization_code\") {\n            $(\".bz-oauth2-only-edit-client-credentials\", content).hide();\n            $(\".bz-oauth2-only-edit-authorization-code\", content).show();\n          } else if (self.editGrantType === \"bearer_token\") {\n            //\n          } else {\n            $(\".bz-oauth2-only-edit-client-credentials\", content).show();\n            $(\".bz-oauth2-only-edit-authorization-code\", content).show();\n          }\n\n          self.initializeOauth2Template(self.editGrantType);\n\n          if (self.CurrentClientData.RedirectUriStrategy === \"WebApplication\") {\n            $(\"#bz-oauth2-edit-only-WebApplication\", content).show();\n            $(\"#bz-oauth2-edit-only-MobileLocalhostPort\", content).hide();\n          } else if (self.CurrentClientData.RedirectUriStrategy === \"MobileTitleBarBrowser\") {\n            $(\"#bz-oauth2-edit-only-WebApplication\", content).hide();\n            $(\"#bz-oauth2-edit-only-MobileLocalhostPort\", content).hide();\n          } else {\n            $(\"#bz-oauth2-edit-only-WebApplication\", content).hide();\n            $(\"#bz-oauth2-edit-only-MobileLocalhostPort\", content).show();\n          }\n        } else {\n          //Disable Allowed Scope Checkbox\n          $(\"#biz-wp-oauth2-edit-scope-api-input\", content).attr(\"disabled\", true);\n          $(\"#biz-wp-oauth2-edit-scope-login-input\", content).attr(\"disabled\", true);\n        }\n      }\n\n      $('#admin-oauth2-applications-wrapper').hide();\n      $(content).show();\n\n      //Buttons Setup\n      $('#btn-admin-oauth2-update-keys', content).click(function () {self.updateApplicationKeys();});\n      $('#btn-admin-edit-oauth2-cancel', content).click(function () {self.cancel(\"edit\");});\n      if (!self.CurrentClientData.IsNative) {\n        $('#btn-admin-edit-oauth2-add', content).click(function () {self.updateApplication();});\n      } else {\n        $('#btn-admin-edit-oauth2-add', content).click(function () {self.updateNaviteApplication();});\n      }\n      self.setupUserSuggest(true);\n\n    }).fail(function () {});\n  },\n\n  //UPDATE ACTION FOR NATIVE APPLICATIONS\n  updateNaviteApplication: function updateNaviteApplication() {\n    var self = this;\n    var dataAddApplication = { accessTokenLifetimeInMinutes: \"\" };\n    dataAddApplication.accessTokenLifetimeInMinutes = parseInt($(\"#biz-wp-oauth2-edit-access-token-input\").val(), 10);\n    if (!isNaN(dataAddApplication.accessTokenLifetimeInMinutes) && dataAddApplication.accessTokenLifetimeInMinutes > 0) {\n      self.dataService.updateOAuth2Application(dataAddApplication, self.CurrentClientData.Id).done(function () {\n        self.performSimpleGrid();\n        self.cancel(\"edit\");\n      });\n    } else {\n      $(\"#bz-oauth2-applications-error-time-invalid\").show();\n    }\n  },\n\n  //UPDATE ACTION\n  updateApplication: function updateApplication() {\n    var self = this;\n    if (self.dataValidating('edit') === true) {\n      var appId = $(\"#biz-wp-oauth2-edit-id-input\").val();\n      var AllowedScope = \"\";\n\n      if ($(\"#biz-wp-oauth2-edit-scope-api-input\").is(':checked')) {\n        AllowedScope += \"api\";\n      }\n\n      if ($(\"#biz-wp-oauth2-edit-scope-login-input\").is(':checked')) {\n        AllowedScope += \" login\";\n      }\n\n      if ($(\"#biz-wp-oauth2-edit-scope-user-sync-input\").is(':checked')) {\n        AllowedScope += \" usersync\";\n      }\n\n      if ($(\"#biz-wp-oauth2-edit-scope-odata-query-input\").is(':checked')) {\n        AllowedScope += \" odataquery\";\n      }\n\n      if ($(\"#biz-wp-oauth2-edit-scope-rpa-input\").is(':checked')) {\n        AllowedScope += \" rpa\";\n      }\n\n      if ($(\"#biz-wp-oauth2-edit-scope-odata-rules-input\").is(':checked')) {\n        AllowedScope += \" odatarules\";\n      }\n\n      var dataAddApplication = {};\n      dataAddApplication[\"authorization_grant_type\"] = self.editGrantType;\n      dataAddApplication[\"allowed_scope\"] = AllowedScope;\n      dataAddApplication[\"username_creator\"] = self.userFullName;\n      dataAddApplication[\"redirect_uri_strategy\"] = self.editRedirectUri;\n\n      if (self.editGrantType === \"client_credentials\") {\n        dataAddApplication[\"redirect_uri\"] = \"http://localhost--\";\n      }\n\n      var dataInputs = $(\"#formEditOAuthApp :input\").serializeArray();\n      for (var i = 0; i < dataInputs.length; i++) {\n        if (dataInputs[i].value) {\n          if (dataInputs[i].name === \"redirect_uri_port\" && self.editRedirectUri === \"MobileLocalhostPort\") {\n            dataAddApplication[\"redirect_uri\"] = \"http://localhost:\" + dataInputs[i].value;\n          } else {\n            dataAddApplication[dataInputs[i].name] = dataInputs[i].value;\n          }\n        }\n      }\n\n      self.dataService.updateOAuth2Application(dataAddApplication, appId).done(function (resp) {\n        if (resp && resp.error === \"user_not_found\") {\n          bizagi.showMessageBox(bizagi.localization.getMessageFromLocalization(\"workportal-general-error-1150\", 'none', [dataAddApplication['default_username']]),\n          null,\n          'warning');\n\n        } else {\n          self.performSimpleGrid();\n          self.cancel(\"edit\");\n        }\n      }).fail(function (jqXHR, textStatus, errorThrown) {\n        console.warn(arguments);\n      });\n    }\n  },\n\n  //UPDATE OAUTH CLIENT KEYS ACTION\n  updateApplicationKeys: function updateApplicationKeys() {\n    var self = this;\n    $.when(bizagi.showConfirmationBox(bizagi.localization.getResource(\"workportal-widget-admin-oauth2-applications-update-keys-confirmation\"), \"Bizagi\", \"warning\")).done(function () {\n      var appId = $(\"#biz-wp-oauth2-edit-id-input\").val();\n      var params = {\n        client_id: self.CurrentClientData.ClientId,\n        client_secret: self.CurrentClientData.ClientSecret };\n\n      self.dataService.updateClientSecretKeysOAuth2Application(params, appId).done(function (data) {\n        if (data.success) {\n          self.performSimpleGrid();\n          self.cancel(\"edit\");\n        } else {\n          $.when(bizagi.showMessageBox(bizagi.localization.getResource(\"workportal-widget-admin-oauth2-error-update-keys\"), null, 'warning')).done(function () {\n            self.performSimpleGrid();\n            self.cancel(\"edit\");\n          });\n        }\n      }).fail(function (err) {\n        $.when(bizagi.showMessageBox(bizagi.localization.getResource(\"workportal-widget-admin-oauth2-error-update-keys\"), null, 'warning')).done(function () {\n          self.performSimpleGrid();\n          self.cancel(\"edit\");\n        });\n      });\n    });\n  },\n\n  //DELETE ACTION\n  deleteApplication: function deleteApplication(applicationId) {\n    var self = this;\n    $.when(bizagi.showConfirmationBox(bizagi.localization.getResource(\"render-grid-delete-confirmation\"), \"Bizagi\", \"warning\")).done(function () {\n      self.dataService.deleteOAuth2Application(applicationId).done(function (data) {\n        self.performSimpleGrid();\n      });\n    });\n  },\n\n  //CANCEL ACTION\n  cancel: function cancel(type) {\n    var self = this;\n    if (type === \"add\") {$('#admin-oauth2-add-application').children().remove();}\n    if (type === \"edit\") {$('#admin-oauth2-edit-application').children().remove();}\n    $('#admin-oauth2-applications-wrapper').show();\n    self.cleanData();\n  },\n\n  //CLEAN DATA\n  cleanData: function cleanData() {\n    self.AllowedScope = null;\n    self.editAllowedScope = null;\n    self.userFullName = null;\n    self.grantType = null;\n    self.editGrantType = null;\n    self.RedirectUri = null;\n    self.editRedirectUri = null;\n    self.tokenLifetimeType = null;\n    self.editTokenLifetimeType = null;\n    $(\".biz-wp-input-text\").val(\"\");\n    $(\".biz-wp-oauth2-select-control\").children().remove();\n    self.CurrentClientData = {};\n  },\n  destroy: function destroy() {\n\n  } });","/**\r\n * Admin module to export generated error logs.\r\n * @author Francisco Murcia\r\n */\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.admin.error.logs\", {}, {\n\n  getWidgetName: function getWidgetName() {\n    return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_ERROR_LOGS;\n  },\n\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n    var templateName = \"bizagi.workportal.desktop.widgets.admin.error.logs\";\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    // Load templates\n    self.loadTemplates({\n      \"admin.errorlogs\": bizagi.getTemplate(templateName).concat(\"#ui-bizagi-workportal-widget-admin-errorlogs\"),\n      \"admin.errorlogs.detail\": bizagi.getTemplate(templateName).concat(\"#ui-bizagi-workportal-widget-admin-errorlogs-detail\"),\n      \"admin.errorlogs.export\": bizagi.getTemplate(templateName).concat(\"#ui-bizagi-workportal-widget-admin-errorlogs-export\"),\n      useNewEngine: false });\n\n\n    self.dateFormat = bizagi.localization.getResource(\"dateFormat\");\n    self.timeFormat = bizagi.localization.getResource(\"timeFormat\");\n\n    // Model's declaration\n    self.CurrentClientData = {\n      selectedGuids: [] };\n\n  },\n\n  renderContent: function renderContent() {\n    var self = this;\n\n    self.content = $.tmpl(self.getTemplate(\"admin.errorlogs\"));\n\n    return self.content;\n  },\n\n  postRender: function postRender() {\n    var self = this;\n\n    self.setupSearchFilter();\n    self.setupDatePicker();\n    self.setupFilterButtons();\n    self.setupExportButton();\n    self.setupJSGrid();\n  },\n\n  setupSearchFilter: function setupSearchFilter() {\n    var self = this;\n\n    $(\"#admin-errorlogs-filter-search\", self.getContent()).on('input', function () {\n      if ($(this).val() != \"\") {\n        self.changeSearchForm();\n      }\n    });\n\n    $(\"#admin-errorlogs-filter-search\", self.getContent()).on('keyup', function (e) {\n      if (e.key === 'Enter' || e.keyCode === 13) {\n        if ($(this).val() != \"\") {\n          self.applyFilter();\n        }\n      }\n    });\n  },\n\n  setupDatePicker: function setupDatePicker() {\n    var self = this;\n    var lang = \"en\";\n\n    if (bizagi.util.languages[BIZAGI_LANGUAGE]) {\n      lang = bizagi.util.languages[BIZAGI_LANGUAGE].substring(0, 2);\n    }\n\n    $(\"#admin-errorlogs-filter-startDate\", self.getContent()).mobiscroll().calendar({\n      controls: ['calendar', 'time'],\n      cssClass: \"mbsc-bizagi-theme\",\n      display: \"bubble\",\n      focusTrap: false,\n      lang: lang,\n      onBeforeShow: function onBeforeShow(event, inst) {\n        var value = inst.getVal();\n        if (!value) {\n          value = new Date();\n          value.setHours(0);\n          value.setMinutes(0);\n          value.setSeconds(0);\n          inst.setVal(value);\n        }\n\n        return true;\n      },\n      onSet: function onSet(event, inst) {\n        self.changeSearchForm();\n      } });\n\n\n    $(\"#admin-errorlog-filter-endDate\", self.getContent()).mobiscroll().calendar({\n      controls: ['calendar', 'time'],\n      cssClass: \"mbsc-bizagi-theme\",\n      display: \"bubble\",\n      focusTrap: false,\n      lang: lang,\n      onSet: function onSet(event, inst) {\n        self.changeSearchForm();\n      } });\n\n  },\n\n  changeSearchForm: function changeSearchForm() {\n    var self = this;\n\n    $(\"#btn-admin-errorlogs-filter-apply>span\", self.getContent()).prop('textContent',\n    bizagi.localization.getResource(\"workportal-widget-admin-errorlogs-filter-apply\"));\n    $(\"#btn-admin-errorlogs-filter-reset\").css('visibility', 'visible');\n  },\n\n  clearSearchForm: function clearSearchForm() {\n    var self = this;\n\n    $(\"#btn-admin-errorlogs-filter-apply>span\", self.getContent()).prop('textContent',\n    bizagi.localization.getResource(\"workportal-widget-admin-errorlogs-filter-refresh\"));\n    $(\"#btn-admin-errorlogs-filter-reset\").css('visibility', 'hidden');\n  },\n\n  setupFilterButtons: function setupFilterButtons() {\n    var self = this;\n\n    $(\"#btn-admin-errorlogs-filter-apply\", self.getContent()).click(function () {\n      self.applyFilter();\n    });\n\n    $(\"#btn-admin-errorlogs-filter-reset\", self.getContent()).click(function () {\n      self.resetFilter();\n    });\n  },\n\n  applyFilter: function applyFilter() {\n    var self = this;\n\n    var filter = $(\"#admin-errorlogs-filter-search\").prop('value');\n    var startTime = $(\"#admin-errorlogs-filter-startDate\").mobiscroll('getVal');\n    var endTime = $(\"#admin-errorlog-filter-endDate\").mobiscroll('getVal');\n\n    if (filter || startTime && endTime && endTime.getTime() > startTime.getTime()) {\n      $(\"#admin-errorlogs-grid\").jsGrid('loadData', {\n        startTime: startTime ? self.getTicks(startTime) : '',\n        endTime: endTime ? self.getTicks(endTime) : '',\n        filter: filter });\n\n    } else {\n      $(\"#admin-errorlogs-grid\").jsGrid('loadData');\n    }\n  },\n\n  resetFilter: function resetFilter() {\n    var self = this;\n\n    $(\"#admin-errorlogs-filter-search\").val('');\n    $(\".biz-wp-form-datepicker\").mobiscroll('clear');\n    $(\"#btn-admin-errorlogs-filter-reset\").css('visibility', 'hidden');\n    $(\"#btn-admin-errorlogs-filter-apply>span\", self.getContent()).prop('textContent',\n    bizagi.localization.getResource(\"workportal-widget-admin-errorlogs-filter-refresh\"));\n    $(\"#admin-errorlogs-grid\").jsGrid('loadData');\n  },\n\n  getTicks: function getTicks(datetime) {\n    var offset = datetime.getTimezoneOffset() * 600000000;\n    var ticks = datetime.getTime() * 10000;\n\n    return ticks - offset;\n  },\n\n  setupExportButton: function setupExportButton() {\n    var self = this;\n\n    $(\"#btn-admin-errorlogs-export\", self.getContent()).click(function () {\n      if (self.CurrentClientData.selectedGuids.length <= 0) return;\n      self.dataService.getErrorLogsArchive(self.CurrentClientData.selectedGuids).done(\n      function (response) {\n        if (response.ZipContent) {\n          self.showExportDialog($(\"#admin-errorlogs-table\"), response);\n        }\n      });\n\n    });\n  },\n\n  setupJSGrid: function setupJSGrid() {\n    var self = this;\n\n    var titleId = bizagi.localization.getResource('workportal-widget-admin-errorlogs-grid-id');\n    var titleDateTime = bizagi.localization.getResource('workportal-widget-admin-errorlogs-grid-datetime');\n    var titleUser = bizagi.localization.getResource('workportal-widget-admin-errorlogs-grid-username');\n    var titleCase = bizagi.localization.getResource('workportal-widget-admin-errorlogs-grid-casenumber');\n    var titleNode = bizagi.localization.getResource('workportal-widget-admin-errorlogs-grid-sourcenode');\n    var titleDescription = bizagi.localization.getResource('workportal-widget-admin-errorlogs-grid-description');\n    var noDataContent = bizagi.localization.getResource('workportal-widget-admin-errorlogs-grid-nodatacontent');\n    var dateTimeFormat = self.dateFormat + ' ' + self.timeFormat;\n\n    $(\"#admin-errorlogs-grid\", self.getContent()).jsGrid({\n      autoload: true,\n      controller: {\n        loadData: function loadData(filter) {\n          return self.dataService.getErrorLogs(filter);\n        } },\n\n      editing: false,\n      fields: [\n      {\n        deleteButton: false,\n        editButton: false,\n        headerTemplate: function headerTemplate() {\n          var checkboxH = $('<input id=\"grid-control-header\" type=\"checkbox\"></input>').on(\n          'click', function () {\n            if (!$(this).prop('checked')) {\n              self.clearSelection();\n            } else {\n              $(this).prop('checked', true);\n              $(\"#btn-admin-errorlogs-export\").prop('disabled', false);\n              $(\".grid-control-item\", self.getContent()).each(function () {\n                $(this).prop('checked', true);\n                self.CurrentClientData.selectedGuids.push($(this).prop('value'));\n              });\n            }\n          });\n\n\n          return checkboxH;\n        },\n        itemTemplate: function itemTemplate(value, item) {\n          var checkboxI = $('<input class=\"grid-control-item\" type=\"checkbox\" value=\"' +\n          item[\"Id\"] + '\" />').on('click', function () {\n            if ($(this).prop('checked')) {\n              self.CurrentClientData.selectedGuids.push($(this).prop('value'));\n              $(\"#grid-control-header\", self.getContent()).prop('checked', true);\n              $(\"#btn-admin-errorlogs-export\").prop('disabled', false);\n            } else {\n              var index = self.CurrentClientData.selectedGuids.indexOf(\n              $(this).prop('value'));\n              self.CurrentClientData.selectedGuids.splice(index, 1);\n              if (self.CurrentClientData.selectedGuids.length == 0) {\n                $(\"#btn-admin-errorlogs-export\").prop('disabled', true);\n                $(\"#grid-control-header\", self.getContent()).prop('checked', false);\n              } else {\n                $(\"#btn-admin-errorlogs-export\").prop('disabled', false);\n                $(\"#grid-control-header\", self.getContent()).prop('checked', true);\n              }\n            }\n          });\n\n          return checkboxI;\n        },\n        type: 'control',\n        width: 50 },\n\n      {\n        align: 'center',\n        css: \"admin-errorlogs-grid-cell-truncate\",\n        name: 'Id',\n        title: titleId,\n        type: 'text' },\n\n      {\n        align: 'center',\n        css: \"admin-errorlogs-grid-cell-truncate\",\n        itemTemplate: function itemTemplate(value, item) {\n          return bizagi.util.dateFormatter.formatDate(new Date(value), dateTimeFormat);\n        },\n        name: 'DateTime',\n        title: titleDateTime,\n        width: 100,\n        type: 'text' },\n\n      {\n        align: 'center',\n        css: \"admin-errorlogs-grid-cell-truncate\",\n        name: 'UserName',\n        title: titleUser,\n        width: 120,\n        type: 'text' },\n\n      {\n        align: 'center',\n        css: \"admin-errorlogs-grid-cell-truncate\",\n        name: 'CaseNumber',\n        title: titleCase,\n        width: 80,\n        type: 'text' },\n\n      {\n        align: 'center',\n        css: \"admin-errorlogs-grid-cell-truncate\",\n        name: 'Node',\n        title: titleNode,\n        width: 120,\n        type: 'text' },\n\n      {\n        align: 'left',\n        css: \"admin-errorlogs-grid-cell-truncate\",\n        itemTemplate: function itemTemplate(value, item) {\n          var link = $('<span class=\"admin-errorlogs-grid-cell-detail-link\">' + value +\n          '</span>').on('click', function () {\n            self.dataService.getErrorLogsContents([item[\"Id\"]]).done(\n            function (response) {\n              if (response) {\n                self.showDetailDialog(response);\n              }\n            });\n\n          });\n\n\n          return link;\n        },\n        name: 'Description',\n        title: titleDescription,\n        type: 'text' }],\n\n\n      paging: true,\n      pageButtonCount: 5,\n      pageSize: 20,\n      pageNextText: $('<svg class=\"bz-icon bz-icon-16 bz-icon-svg\"><use xlink:href=\"#icon-arrow-next\" /></svg>'),\n      pagePrevText: $('<svg class=\"bz-icon bz-icon-16 bz-icon-svg\"><use xlink:href=\"#icon-arrow-prev\" /></svg>'),\n      pageFirstText: $('<svg class=\"bz-icon bz-icon-16 bz-icon-svg\"\"><use xlink:href=\"#icon-arrow-first\" /></svg>'),\n      pageLastText: $('<svg class=\"bz-icon bz-icon-16 bz-icon-svg\"><use xlink:href=\"#icon-arrow-last\" /></svg>'),\n      pagerFormat: '{first} {prev} {pages} {next} {last} &nbsp;&nbsp; {pageIndex} / {pageCount}',\n      noDataContent: noDataContent,\n      width: '100%',\n\n      onPageChanged: function onPageChanged(args) {\n        self.clearSelection();\n      },\n\n      onRefreshed: function onRefreshed(args) {\n        self.clearSelection();\n      } });\n\n\n    var lang = bizagi.util.languages[BIZAGI_LANGUAGE];\n    if (lang && !lang.startsWith('en')) {\n      var lang = lang.substring(0, 2);\n      if (jsGrid.locales[lang])\n      jsGrid.locale(lang);\n    }\n  },\n\n  clearSelection: function clearSelection() {\n    var self = this;\n\n    $(\"#grid-control-header\").prop('checked', false);\n    $(\"#btn-admin-errorlogs-export\").prop('disabled', true);\n    $(\".grid-control-item\", self.getContent()).prop('checked', false);\n    self.CurrentClientData.selectedGuids = [];\n  },\n\n  showDetailDialog: function showDetailDialog(data) {\n    var self = this;\n\n    var dateTimeFormat = self.dateFormat + ' ' + self.timeFormat;\n    data[0].DateTime = bizagi.util.dateFormatter.formatDate(new Date(data[0].DateTime),\n    dateTimeFormat);\n    data[0].Content = atob(data[0].Content);\n\n    $.tmpl(self.getTemplate(\"admin.errorlogs.detail\"), { errorlog: data[0] }).\n    appendTo(\"#admin-errorlogs-detail-placeholder\");\n\n    $(\"#admin-errorlogs-table\").hide();\n    $(\"#admin-errorlogs-detail-placeholder\").show();\n\n    self.setupBackButton();\n    self.setupExportDetailButton();\n  },\n\n  setupBackButton: function setupBackButton() {\n    $(\"#btn-admin-errorlogs-detail-back\").click(function () {\n      $(\"#admin-errorlogs-detail\").remove();\n      $(\"#admin-errorlogs-detail-placeholder\").hide();\n      $(\"#admin-errorlogs-table\").show();\n    });\n  },\n\n  setupExportDetailButton: function setupExportDetailButton() {\n    var self = this;\n    $(\"#btn-admin-errorlogs-detail-export\", self.getContent()).click(function () {\n      var currentErrorLogId = $(\"#admin-errorlogs-detail-info-current\").text();\n      self.dataService.getErrorLogsArchive([currentErrorLogId]).done(\n      function (response) {\n        if (response.ZipContent) {\n          self.showExportDialog($(\"#admin-errorlogs-detail\"), response);\n        }\n      });\n\n    });\n  },\n\n  showExportDialog: function showExportDialog(parent, data) {\n    var self = this;\n\n    $.tmpl(self.getTemplate(\"admin.errorlogs.export\"), { password: data.Password }).\n    appendTo(\"#admin-errorlogs-export-placeholder\");\n\n    parent.hide();\n    $(\"#admin-errorlogs-export-placeholder\").show();\n\n    self.setupCopypassButton();\n    self.setupDownloadButton(data.ZipContent);\n    self.setupCancelButton(parent);\n  },\n\n  setupCopypassButton: function setupCopypassButton() {\n    var self = this;\n    $(\"#admin-errorlogs-export-password-field\", self.getContent()).tooltip({\n      content: bizagi.localization.getResource('workportal-widget-admin-errorlogs-detail-tooltip'),\n      items: \"input[type=text]\",\n      position: { my: \"left+4 center\", at: \"right+4 center\" },\n      show: false }).\n    off(\"mouseover\").off(\"focusin\");\n    $(\"#admin-errorlogs-export-password-field\", self.getContent()).click(function () {\n      $(this).focus();\n      $(this).select();\n      document.execCommand(\"copy\");\n      $(this).tooltip(\"open\");\n    });\n  },\n\n  setupDownloadButton: function setupDownloadButton(file) {\n    var self = this;\n    $(\"#btn-admin-errorlogs-export-download\", self.getContent()).click(function () {\n      var fileName = \"BizagiErrorLogs.zip\";\n      var bytes = atob(file);\n      var numbers = new Array(bytes.length);\n      for (var i = 0; i < bytes.length; i++) {\n        numbers[i] = bytes.charCodeAt(i);\n      }\n      var array = new Uint8Array(numbers);\n      var blob = new Blob([array], { type: 'application/zip' });\n\n      if (window.navigator && window.navigator.msSaveOrOpenBlob) {\n        window.navigator.msSaveOrOpenBlob(blob, fileName);\n      } else {\n        var url = window.URL.createObjectURL(blob);\n        var link = document.createElement('a');\n        link.href = url;\n        link.download = fileName;\n        link.click();\n        window.URL.revokeObjectURL(url);\n      }\n    });\n  },\n\n  setupCancelButton: function setupCancelButton(parent) {\n    var self = this;\n    $(\"#btn-admin-errorlogs-export-cancel\", self.getContent()).click(function () {\n      $(\"#admin-errorlogs-export-placeholder\").hide();\n      $(\"#admin-errorlogs-export\").remove();\n      parent.show();\n    });\n  } });","/**\r\n* Name: BizAgi Desktop Widget Administration Policies - Vocabularies \r\n* \r\n* @author Christian Collazos\r\n*/\n\n\nbizagi.workportal.widgets.admin.business.policies.vocabularies.extend(\"bizagi.workportal.widgets.admin.business.policies.vocabularies\", {}, {\n\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    //Load templates\n    self.loadTemplates({\n      \"admin.business.policies.vocabularies.wrapper\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.admin.business.policies\").concat(\"#ui-bizagi-workportal-widget-admin-business-policies-vocabularies-wrapper\"),\n      \"admin.business.policies.vocabularies.content\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.admin.business.policies\").concat(\"#ui-bizagi-workportal-widget-admin-business-policies-vocabularies-content\"),\n      useNewEngine: false });\n\n  },\n\n  renderContent: function renderContent() {\n    var self = this;\n    var template = self.getTemplate(\"admin.business.policies.vocabularies.wrapper\");\n    var content;\n\n    self.decisionTableContent = self.getTemplate(\"admin.business.policies.vocabularies.content\");\n    content = self.content = $.tmpl(template, {});\n\n    // Override canvas if it has been defined\n    if (self.params.canvas) {\n      content = $(self.params.canvas).append(content);\n    }\n\n    return content;\n  },\n\n  postRender: function postRender() {\n    var self = this;\n  } });","/**\r\n * Admin / Asynchronous Activities Console\r\n * \r\n * @author Christian Collazos\r\n */\n\n\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.admin.async.activities\", {}, {\n  /*\r\n                                                                                                  *   Returns the widget name\r\n                                                                                                  */\n  getWidgetName: function getWidgetName() {\n    return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_ASYNC_ACTIVITIES;\n  },\n\n  /*\r\n     *   Renders the content for the current controller\r\n     */\n  renderContent: function renderContent() {\n    var self = this;\n    var template = self.getTemplate(\"admin.async.activities\");\n    var content;\n\n    content = self.content = $.tmpl(template, {});\n    self.loadtemplates();\n    return content;\n  },\n\n  /*\r\n     * this will be implemented on each device\r\n     */\n  loadtemplates: function loadtemplates() {} });","/**\r\n * Admin module to case massively reassign\r\n * \r\n * @author David Nino, David Romero, Edward J Morales\r\n */\n\n\nbizagi.workportal.widgets.admin.cases.extend(\"bizagi.workportal.widgets.admin.cases\", {}, {\n\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    //Load templates\n    self.loadTemplates({\n      \"admin.cases\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.admin.cases\").concat(\"#ui-bizagi-workportal-widget-admin-cases\"),\n      useNewEngine: false });\n\n  },\n\n  postRender: function postRender() {\n    var self = this;\n\n    //Sets the maximun users to show at the user list form\n    self.userTableConf = { pageSize: 10 };\n\n    $.when(self.dataService.getOrganizationInfo(\"Skill\"),\n    self.dataService.getOrganizationInfo(\"Location\"),\n    self.dataService.getOrganizationInfo(\"Role\")).done(function (skill, location, role) {\n\n      self.renderSearchCaseForm(role[0], skill[0], location[0]);\n\n    });\n  },\n  /*\r\n     * Process and display the Search Case form\r\n     * @param user {string}        User field string in the application's current language\r\n     * @param roles {string}      Roles field string in the application's current language \r\n     * @param locations {string}   Locations field string in the application's current language\r\n     */\n  renderSearchCaseForm: function renderSearchCaseForm(role, skill, location) {\n    var self = this,\n    content = self.getContent();\n\n    //Template Vars\n    var searchCasesTemplate = self.getTemplate(\"admin.search.cases\");\n\n    // Render Form\n    $.tmpl(searchCasesTemplate, {\n      skill: skill.profiles.length,\n      role: role.profiles.length,\n      location: location.profiles.length }).\n    appendTo($(\"#form-search-cases\", content));\n\n    if (skill.profiles.length) {\n      self.skillInput = $(\"#skill-wrapper\", content);\n      self.skillInput.searchList({ list: skill.profiles, cases: [] });\n    }\n\n    if (role.profiles.length) {\n      self.roleInput = $(\"#role-wrapper\", content);\n      self.roleInput.searchList({ list: role.profiles, cases: [] });\n    }\n\n    if (location.profiles.length) {\n      self.locationInput = $(\"#location-wrapper\", content);\n      self.locationInput.searchList({ list: location.profiles, cases: [] });\n    }\n\n    //Keeps the reference of the seach case form\n    self.searchCasesForm = $(\".admin-form-search-cases\", content);\n\n    self.searchCaseFormEventHandler();\n  },\n  /*\r\n     * Process and display the Search User form\r\n     * @param totalCases {Number}    Number of cases wich fits with the case seach parameters\r\n     */\n  renderSearchUserForm: function renderSearchUserForm(totalCases) {\n\n    var self = this,\n    content = self.getContent();\n\n    //Template Vars\n    var searchUserTemplate = self.getTemplate(\"admin.search.users\");\n\n    // Render Form\n    $.tmpl(searchUserTemplate).appendTo($(\"#form-search-users\", content));\n\n    $(\"#cases-found-message-wrapper .message\", content).text(printf(self.resources.getResource(\"workportal-widget-admincase-casesfound\"), totalCases));\n\n    self.eventHandlerSearchUserForm();\n  },\n  /*\r\n     * Show/Hide the Seach Case Form\r\n     * @param value {Boolean}    If is true, show the seach case form, otherwise, hide it\r\n     */\n  showSearchCaseForm: function showSearchCaseForm(value) {\n    var self = this,\n    content = self.getContent();\n\n    if (value) {\n      $(\"#form-search-cases\", content).show();\n      self.searchCasesForm.show();\n    } else\n    {\n      $(\"#form-search-cases\", content).hide();\n    }\n  },\n  /*\r\n     * Show/Hide the Seach User Form\r\n     * @param value {Boolean}    If is true, show the seach user form, otherwise, hide it\r\n     */\n  showSearchUsersForm: function showSearchUsersForm(value) {\n    var self = this,\n    content = self.getContent();\n\n    if (value)\n    self.renderSearchUserForm();else\n\n    $(\"#form-search-users\", content).html(\"\");\n  },\n  /*\r\n     * Add the required listeners for the button elements inside the Seach user Form\r\n     */\n  eventHandlerSearchUserForm: function eventHandlerSearchUserForm() {\n\n    var self = this,\n    content = self.getContent();\n\n    //Search user Form\n    $(\"#search-user\", content).bind('click', function (e) {\n      e.preventDefault();\n      var searchForm = $(\"#admin-form-search-users-wrapper\", content);\n\n      self.showConfirmAssignCasesForm(false);\n\n      var params = {};\n\n      params['userName'] = $(\"#txtSAMAccount\", searchForm).val();\n      params['fullname'] = $(\"#txtFullName\", searchForm).val();\n      params['domain'] = $(\"#txtDomain\", searchForm).val();\n\n      params['skills'] = $(\"#skill\", content).val();\n      params['locations'] = $(\"#location\", content).val();\n      params['roles'] = $(\"#role\", content).val();\n\n\n      self.showLoaderAtContainer($(\"#user-list-wrapper\"));\n\n      $.when(self.dataService.searchUsers(params)).done(function (result) {\n        self.closeLoader();\n\n        self.updateTotalUsersForm(result);\n      });\n    });\n\n    $(\"#back-search-case-form\", content).bind('click', function (e) {\n      e.preventDefault();\n\n      self.showSearchUsersForm(false);\n\n      self.showSearchCaseForm(true);\n    });\n\n\n    $(\"#confirm-assign-cases\", content).bind('click', function (e) {\n      e.preventDefault();\n\n      var searchForm = $(\"#admin-form-search-users-wrapper\", content);\n      var params = {};\n\n      //Gets the selected element\n      var selectedElement = $('#user-list-wrapper .user-list-item label', searchForm).filter('.ui-radio-state-checked').parent();\n      var userList = [];\n      var i = selectedElement.length;\n\n      while (i-- > 0)\n      {\n        userList.push(Number($('input', selectedElement[i]).val()));\n      }\n\n\n      //params['user'] = $('input', selectedElement).val();\n\n      params['user'] = userList;\n\n      params['skills'] = self.getCasesSearchParams().skills;\n      params['locations'] = self.getCasesSearchParams().locations;\n      params['roles'] = self.getCasesSearchParams().roles;\n\n      $.when(self.dataService.reassignCases(params)).done(function (response) {\n        self.showConfirmAssignCasesMessage(true);\n      }).fail(function (error) {\n        //self.notificationController.showErrorMessage(error);\n      });\n    });\n\n    $(\"#cancel-assign-cases\", content).bind('click', function (e) {\n      e.preventDefault();\n\n      self.showConfirmAssignCasesForm(false);\n    });\n\n  },\n  /*\r\n     * Add the required listeners for the button elements inside the Seach Case Form\r\n     */\n  searchCaseFormEventHandler: function searchCaseFormEventHandler() {\n    var self = this;\n    var content = self.getContent();\n\n    $(\"li[name=role], li[name=skill], li[name=location]\", content).bind('click', function () {\n      var span = $(this).find('span.ui-icon');\n\n      span.attr('data-state') == 'uncheck' ? span.attr('data-state', 'check') : span.attr('data-state', 'uncheck');\n    });\n\n    //Events for search case form\n    $(\"#search-case\", content).bind('click', function (e) {\n\n      e.preventDefault();\n\n      var skillList = self.skillInput ? self.skillInput.searchList(\"option\", 'cases') : [];\n      var roleList = self.roleInput ? self.roleInput.searchList(\"option\", 'cases') : [];\n      var locationList = self.locationInput ? self.locationInput.searchList(\"option\", 'cases') : [];\n\n      var params = { skills: skillList, locations: locationList, roles: roleList };\n\n      self.searchCasesForm.hide();\n\n      self.showLoaderAtContainer(self.searchCasesForm);\n\n      $.when(self.dataService.getCasesByOrganization(params)).done(function (result) {\n\n        //Removes the loader wherever it's located\n        self.closeLoader();\n\n        self.updateTotalCasesFound(params, result);\n      });\n    });\n  },\n  /*\r\n     *   Add the loader in the desired container\r\n     */\n  //showLoaderAtContainer: function (container, nextChild) {\n  showLoaderAtContainer: function showLoaderAtContainer(nextChild) {\n    self.dialogBox = $(\"<div class='ui-bizagi-component-loading'/>\");\n\n    nextChild.after(self.dialogBox);\n  },\n  /*\r\n     *   Removes the Loader wherever is located\r\n     */\n  closeLoader: function closeLoader() {\n    self.dialogBox.remove();\n  },\n  /*\r\n     *   Stores the Case Search Parameters. It will used when the user confirms the massive case assign\r\n     */\n  setCasesSearchParams: function setCasesSearchParams(params) {\n    this.caseSearchParams = params;\n  },\n  /*\r\n     *   Retrieve the Case Search Parameters. It will used when the user confirms the massive case assign\r\n     */\n  getCasesSearchParams: function getCasesSearchParams(params) {\n    return this.caseSearchParams;\n  },\n  /*\r\n     * Validate the results of the case search parameters. If the total cases is more than 1, it will shows\r\n     * the Search User Form, otherwise, It will display a message  awaring the user that there is not cases wich\r\n     * fits with the cases seach parameters\r\n     * @param params {Object}    Case seach parameters\r\n     * @param result {Object}    Search case response, wich includes the total cases wich fits with the seach parameters\r\n     */\n  updateTotalCasesFound: function updateTotalCasesFound(params, result) {\n    var self = this,\n    content = self.getContent();\n\n    //DOM Variables\n    var casesFoundMessageWrapper = $(\"#no-cases-found-message-wrapper\", content);\n\n    //Bind the submited data\n    self.setCasesSearchParams(params);\n\n    if (result.totalCases > 0) {\n      casesFoundMessageWrapper.hide();\n\n      self.showSearchCaseForm(false);\n      self.renderSearchUserForm(result.totalCases);\n    } else\n    {\n      self.showSearchCaseForm(true);\n      casesFoundMessageWrapper.show();\n    }\n  },\n  /*\r\n     * Validate the results of the case search parameters. If the total cases is more than 1, it will shows\r\n     * the Search User Form, otherwise, It will display a message  awaring the user that there is not cases wich\r\n     * fits with the cases seach parameters\r\n     * @param result {Object}    Search case response, wich includes the total cases wich fits with the seach parameters\r\n     */\n  updateTotalUsersForm: function updateTotalUsersForm(result) {\n    var self = this,\n    content = self.getContent();\n\n    //DOM Variables\n    var userFoundMessageWrapper = $(\"#no-users-found-message-wrapper\", content);\n\n    if (result.users.length > 0) {\n      userFoundMessageWrapper.hide();\n\n      self.userList = { data: result.users };\n      self.createPage(1);\n    } else\n    {\n      userFoundMessageWrapper.show();\n    }\n\n  },\n  /*\r\n     * Create the page for the users searh result\r\n     * @param pageNumber {Number}    Desired page to display\r\n     */\n  createPage: function createPage(pageNumber) {\n    var self = this,\n    content = self.getContent();\n\n    //DOM Variables\n    var tableContent = $(\"#user-list-wrapper\", content);\n\n    //Template vars\n    var tableUserTemplate = self.getTemplate(\"admin.table.users\"),\n    pagesLength = Math.ceil(self.userList.data.length / self.userTableConf.pageSize),\n    pages = new Array(pagesLength);\n\n\n    var users = [],\n    i = self.userTableConf.pageSize * (pageNumber - 1),\n    resultLength;\n\n    //Calculates the remaining elements to paint\n    if (self.userTableConf.pageSize + i <= self.userList.data.length) {\n      resultLength = self.userTableConf.pageSize;\n    } else\n    {\n      resultLength = self.userList.data.length - i;\n    }\n\n    $('.user-list-item', tableContent).remove();\n\n    resultLength += i;\n\n    //Hack for jquery tmpl\n    for (var x = 0; x < pagesLength; x++) {\n      pages[x] = x + 1;\n    }\n\n    //Creates an exact copy, and splice it to paint the desired elements\n    users = [].concat(self.userList.data);\n    users = users.splice(i, resultLength);\n\n    var tableUsers = $.tmpl(tableUserTemplate, {\n      users: users,\n      pages: pages });\n\n\n    tableContent.html(tableUsers);\n\n    //Binds the elements event\n    self.tableUsersHandlers();\n\n    //Update the pager \n    self.updateTableUsersPager(pageNumber);\n\n    $(\"ul\").bizagiPagination({\n      maxElemShow: 10,\n      totalPages: pagesLength,\n      actualPage: pageNumber,\n      listElement: $(\"#user-list-footer-wrapper\", content),\n      clickCallBack: function clickCallBack(options) {\n        self.createPage(options.page);\n        self.showConfirmAssignCasesForm(false);\n      } });\n\n  },\n  /*\r\n     * Add the required handlers for the elements inside the user list\r\n     *\r\n     */\n  tableUsersHandlers: function tableUsersHandlers() {\n    var self = this,\n    content = self.getContent();\n\n    //DOM Variables\n    var userListWrapper = $('#user-list-wrapper', content);\n\n    $('.user-list-item', userListWrapper).click(function (ev) {\n\n      //Toggle the select class\n      $('label', this).toggleClass('ui-radio-state-checked');\n\n      //Checks if there is any element selecteced, to show the confirmation message\n      var anyElementSelected = $('.ui-radio label', userListWrapper).filter('.ui-radio-state-checked').length > 0;\n\n      self.showConfirmAssignCasesForm(anyElementSelected);\n\n      self.showConfirmAssignCasesMessage(!anyElementSelected);\n\n    });\n\n\n    $('.user-list-item', userListWrapper).hover(\n    function () {\n      if (!$(this).attr(\"data-value\"))\n      $('label', this).addClass('ui-radio-state-hover');\n    },\n    function () {\n      //if is not the current selected, removes the selected state\n      if (!$(this).attr(\"data-value\"))\n      $('label', this).removeClass('ui-radio-state-hover');\n    });\n\n\n\n    // Add class to each even row\n    $('tbody tr', userListWrapper).each(function () {\n      if ($(this).index() % 2 < 1)\n      $(this).addClass('biz-ui-even');\n    });\n\n    //Event for Pages\n    /* $('#user-list-footer-wrapper span', userListWrapper).click(function(e) {\r\n    if (!$(this).hasClass('current-page'))\r\n    {\r\n    self.createPage($(this).data('value'));\r\n      self.showConfirmAssignCasesForm(false);\r\n    }\r\n    });*/\n\n  },\n  /*\r\n     * Highlight the current page of the user list\r\n     * @param params {Number}    Desired page to display\r\n     */\n  updateTableUsersPager: function updateTableUsersPager(pageIndex) {\n    var self = this,\n    content = self.getContent(),\n    userTable = $('#table', content);\n\n    $('#user-list span[data-value=' + pageIndex + ']', userTable).addClass('current-page');\n  },\n  /*\r\n     * Show/Hide the confirm assign cases form\r\n     * @param value {Boolean}    if is true, display the form, otherwise, hide it\r\n     */\n  showConfirmAssignCasesForm: function showConfirmAssignCasesForm(value) {\n    var self = this,content = self.getContent();\n\n    if (value) {\n      $('#assing-cases-confirm-form-wrappper', content).show();\n    } else\n    {\n      $('#assing-cases-confirm-form-wrappper', content).hide();\n    }\n  },\n  /*\r\n     * Show/Hide the confirm assign message, and show/hide the assign cases confirm form\r\n     * @param value {Boolean}    if is true, display the form, otherwise, hide it\r\n     */\n  showConfirmAssignCasesMessage: function showConfirmAssignCasesMessage(value) {\n    var self = this,\n    content = self.getContent();\n\n    if (value) {\n      $('#assing-cases-confirm-form', content).hide();\n      $('#assign-cases-message-wrapper', content).show();\n\n    } else\n    {\n      $('#assing-cases-confirm-form', content).show();\n      $('#assign-cases-message-wrapper', content).hide();\n    }\n\n    $(\"#users-found-message-wrapper\", content).hide();\n  } });","/**\r\n * Name: BizAgi Desktop Widget Administration Cases Implementation\r\n *\r\n * @author Christian Collazos\r\n */\nbizagi.workportal.widgets.admin.caseSearch.extend(\"bizagi.workportal.widgets.admin.caseSearch\", {\n  CLASSES: {\n    SORT_COL_ASC: \"sortColumnsDataUpIcon\",\n    SORT_COL_DES: \"sortColumnsDataDownIcon\",\n    SORT_COL_NOT: \"sortColumnsDataIcon\" } },\n\n{\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n    self.adhocIds = [];\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    self.selectedCaseAdmin = [];\n    self.selectedWorkItemAdmin = [];\n\n    self.columnsID = {\n      \"caseNumber\": \"I_radNumber\",\n      \"process\": \"I_wfClsDisplayName\",\n      \"task\": \"I_tskDisplayName\",\n      \"processCreationDate\": \"I_casCreationDate\",\n      \"taskDueDate\": \"I_wiEstimatedSolutionDate\",\n      \"processDueDate\": \"I_casSolutionDate\",\n      \"userName\": \"I_userName\",\n      \"userfullName\": \"I_fullName\",\n      \"userLocation\": \"I_locName\" };\n\n\n    //Load templates\n    self.loadTemplates({\n      \"admin.case.search\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.admin.caseSearch\").concat(\"#ui-bizagi-workportal-widget-admin-case-search\"),\n      \"admin.case.search.fields\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.admin.caseSearch\").concat(\"#ui-bizagi-workportal-widget-admin-case-search-fields\"),\n      \"admin.case.search.button\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.admin.caseSearch\").concat(\"#ui-bizagi-workportal-widget-admin-case-search-buttons\"),\n      \"admin.case.search.result\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.admin.caseSearch\").concat(\"#ui-bizagi-workportal-widget-admin-case-search-result\"),\n      \"admin.case.search.pagination\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.admin.caseSearch\").concat(\"#ui-bizagi-workportal-widget-admin-case-search-pagination\"),\n      \"admin.case.search.invalidate\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.admin.caseSearch\").concat(\"#ui-bizagi-workportal-widget-admin-case-search-invalidate\"),\n      \"admin.case.search.reassign\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.admin.caseSearch\").concat(\"#ui-bizagi-workportal-widget-admin-case-search-reassign\"),\n      \"admin.case.search.reassign.form\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.admin.caseSearch\").concat(\"#ui-bizagi-workportal-widget-admin-case-search-reassign-form\"),\n      \"admin.case.search.action.result\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.admin.caseSearch\").concat(\"#ui-bizagi-workportal-widget-admin-case-search-action-result\"),\n      \"admin.case.search.loader\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.admin.caseSearch\").concat(\"#ui-bizagi-workportal-widget-admin-case-search-loader\"),\n      useNewEngine: false });\n\n  },\n\n  loadtemplates: function loadtemplates() {\n    var self = this;\n\n    //Template vars \n    self.generalContentTmpl = self.getTemplate(\"admin.case.search\");\n    self.fieldsContentTmpl = self.getTemplate(\"admin.case.search.fields\");\n    self.buttonContentTmpl = self.getTemplate(\"admin.case.search.button\");\n    self.resultContentTmpl = self.getTemplate(\"admin.case.search.result\");\n    self.paginationTmpl = self.getTemplate(\"admin.case.search.pagination\");\n    self.invalidateContentTmpl = self.getTemplate(\"admin.case.search.invalidate\");\n    self.reassignContentTmpl = self.getTemplate(\"admin.case.search.reassign\");\n    self.reassignFormTmpl = self.getTemplate(\"admin.case.search.reassign.form\");\n    self.actionResultContentTmpl = self.getTemplate(\"admin.case.search.action.result\");\n    self.loaderTmpl = self.getTemplate(\"admin.case.search.loader\");\n    self.loader = $.tmpl(self.loaderTmpl, {});\n  },\n\n  postRender: function postRender() {\n    var self = this;\n    self.defaultMaxRows = 10;\n    self.maxElemShow = self.defaultMaxRows;\n    self.maxPageToShow = 5;\n\n    //load form data\n    self.processNavigation = [];\n    self.setupData();\n  },\n\n  /**\r\n      * show the Nofitication for succesful request\r\n      */\n  showNotifier: function showNotifier() {\n    var notifier = window.parent.bizagi.injector.get('notifier'),\n    preferences = {\n      \"svgIcon\": true,\n      \"closeButton\": true };\n\n    notifier.showSucessMessage(bizagi.localization.getResource('workportal-widget-admincasesearch-invalidation-message'), '', preferences);\n  },\n\n  /**\r\n      * show the Nofitication for succesful request\r\n      */\n  showConfirmationMessage: function showConfirmationMessage() {\n    var self = this;\n    $.when(bizagi.showConfirmationBox(bizagi.localization.getResource('workportal-widget-admincasesearch-action-invalidation-confirmation'), bizagi.localization.getResource(\"workportal-general-word-information\"), 'info')).done(function () {\n      self.showLoading();\n      self.invalidateSelectedCase(self.paramsToInvalidateSelectedCases());\n    });\n  },\n  /*\r\n      * Init the Current User Position combo box\r\n      */\n  initPositionsCombo: function initPositionsCombo() {\n    var self = this;\n    $.when(self.dataService.getUserPositions()).done(function (resultList) {\n      var comboDataSource = {\n        combo: [],\n        id: \"positions\" };\n\n      comboDataSource.combo.push({\n        id: '',\n        name: '.........' });\n\n      $.each(resultList.positions, function (index, value) {\n        comboDataSource.combo.push({\n          id: value.idPosition,\n          name: value.displayName });\n\n      });\n      self.renderPositionsCombo(comboDataSource);\n    }).fail(function (error) {\n      bizagi.log(error);\n    });\n\n  },\n\n  /*\r\n      * Render the Current User Position combo box\r\n      */\n  renderPositionsCombo: function renderPositionsCombo(comboDataSource) {\n    var self = this;\n    var content = self.getContent();\n    var deferred = $.Deferred();\n    var comboWrapper = $(\"#userPositionInput\", content);\n    comboWrapper.empty();\n    //$(\"#userPositionInput\", content).val(comboDataSource.combo[0].id);\n    comboWrapper.uicombo({\n      isEditable: false,\n      data: comboDataSource,\n      itemValue: function itemValue(obj) {\n        return obj.id;\n      },\n      itemText: function itemText(obj) {\n        return obj.name;\n      },\n      onComplete: function onComplete() {\n        deferred.resolve();\n      },\n      onChange: function onChange(obj) {\n        var value = obj.ui.data('value');\n        $(\"#userPositionInput\", content).val(value);\n      },\n      initValue: comboDataSource.combo[0] });\n\n    return deferred;\n  },\n\n\n  /*\r\n      * Setup form data\r\n      */\n  setupData: function setupData() {\n    var self = this;\n\n    self.setupInitialData();\n    self.setupDatePicker();\n    self.setupProcessTree();\n    self.setupCaseSecurity();\n    self.setupMainButtons();\n    self.initPositionsCombo();\n\n  },\n\n  /*\r\n      * Load form data\r\n      */\n  setupInitialData: function setupInitialData() {\n    var self = this,\n    content = self.getContent(),\n    fields;\n\n    //set self variables to default\n    self.buttonBackAction = \"backToMainForm\";\n    self.selectedUserId = \"\";\n    self.selectedUserName = \"\";\n    self.selectedTasks = \"\";\n    self.selectedTasksToShow = \"\";\n    self.searchParams = \"\";\n    self.processTree = \"\";\n    self.processTreeDelete = \"\";\n    self.caseSecurity = \"\";\n\n    //set content form to default\n    $(\"#generalTitle\").html(bizagi.localization.getResource(\"workportal-widget-admincasesearch-subtitle\"));\n    $(\"#mainForm\", content).remove();\n    $(\"#dinamicContent\", content).remove();\n    $(\"#case-search-log-data-buttonset\", content).remove();\n\n    //append fields to wrapper\n    fields = $.tmpl(self.fieldsContentTmpl, { disableAbortCases: bizagi.override.disableAbortCases });\n\n    content.html(fields);\n    $(\"#cases-tabs\", content).tabs({\n      activate: function activate(event, ui) {\n        if (ui.newTab[0].id === \"deleteCasesTab\") {\n          self.isOut = false;\n          self.showLoading();\n          var isRunnig = self.getProcessRunningInvalidateCases();\n          if (isRunnig) {\n            $(\"#tree\", content).hide();\n            $(\"#invalidateMessage\", content).show();\n          }\n        } else {\n          clearTimeout(self.timer);\n          self.isOut = true;\n        }\n      } });\n\n    var casesTabs = $(\"#cases-tabs-ul\", content);\n    $(\"#li-deleteCases\", casesTabs).click(function () {\n      $(\"#case-search-log-data-buttonset\", content).hide();\n    });\n    $(\"#li-case-search\", casesTabs).click(function () {\n      $(\"#case-search-log-data-buttonset\", content).show();\n    });\n\n    if (bizagiConfig.isProduction) {\n      $(\"#deleteCases\", content).remove();\n      $(\"#deleteCasesTab\", content).remove();\n    }\n  },\n\n  /*\r\n      * Load dateTime plugin and apply to respective fields\r\n      */\n  setupDatePicker: function setupDatePicker() {\n    var self = this;\n    var content = self.getContent();\n    var formatDate = bizagi.localization.getResource('dateFormat').replaceAll(\"yyyy\", \"yy\").replaceAll(\"MM\", \"mm\");\n\n    $(\".biz-wp-form-datepicker\", content).datepicker({\n      controlType: 'select',\n      dateFormat: formatDate });\n\n  },\n\n  /*\r\n      * initialize the process tree widget\r\n      */\n  setupProcessTree: function setupProcessTree() {\n    var self = this,\n    content = self.getContent();\n\n    bizagi.treeRoutSelected = [];\n    $(\"#treeLinksId\").remove();\n    var processtreeParams = $.extend({}, self.params);\n    processtreeParams.svgIconsMode = true;\n    processtreeParams.canvas = $(\"#processTree\", content);\n    self.processTree = new bizagi.workportal.widgets.processtree(self.workportalFacade, self.dataService, processtreeParams);\n    self.processTree.render().done(function () {\n      var processtreeParams = $.extend({}, self.params);\n      processtreeParams.canvas = $(\"#processTreeDelete\", content);\n      processtreeParams.svgIconsMode = true;\n      processtreeParams.searchKeyResource = \"workportal-widget-admincasesearch-cancel-cases-for\";\n      processtreeParams.newDesign = true;\n      //tree for delete cases\n      self.processTreeDelete = new bizagi.workportal.widgets.processtree(self.workportalFacade, self.dataService, processtreeParams);\n      self.processTreeDelete.render();\n    });\n  },\n\n  /*\r\n     * initialize the case Security\r\n     */\n  setupCaseSecurity: function setupCaseSecurity() {\n    var self = this,\n    content = self.getContent();\n\n    var caseSecurityParams = $.extend({}, self.params);\n    caseSecurityParams.content = $(\"#caseSecurity\", content);\n    self.caseSecurity = new bizagi.workportal.widgets.admin.transfer[\"case\"].security.permissions(self.workportalFacade, self.dataService, caseSecurityParams);\n    self.caseSecurity.render();\n  },\n\n  /*\r\n      * initialize the users search form widget\r\n      */\n  setupUsersSearchForm: function setupUsersSearchForm() {\n    var self = this,\n    content = self.getContent(),\n    def = $.Deferred();\n\n    $(\"#biz-wp-users-table-form\").html(\"\");\n\n    self.usersTable = new bizagi.workportal.widgets.userstable(self.workportalFacade, self.dataService, $.extend(self.params, {\n      canvas: $(\"#biz-wp-users-table-form\", content),\n      userLinkLabel: [bizagi.localization.getResource(\"workportal-widget-admincasesearch-reassign\")],\n      parentDef: def }));\n\n\n    self.usersTable.render();\n\n    $.when(def).done(function (userId, userName) {\n      self.assignEventReassignLinks(userId, userName);\n    });\n  },\n\n  /**\r\n      * extract from params the actual sort data and execute the resultFrame template\r\n      * @param {JqueryElement} content \r\n      * @param {JSON} resultList \r\n      * @param {JSON} params from request\r\n      */\n  _showResultAndSort: function _showResultAndSort(content, resultList, params) {\n    var self = this,\n    _sortedBy = {\n      order: params.order,\n      orderType: params.orderType };\n\n\n    self.showCasesSearchResultFrame(content, resultList, _sortedBy);\n  },\n\n  /*\r\n      * Find cases results using the input data\r\n      */\n  findResults: function findResults(content, params, pageToShow) {\n    var self = this;\n\n    //If there is not a page to Show, begins whith the fist one\n    pageToShow ? params.Page = pageToShow : params.Page = 1;\n\n    $.when(self.dataService.getAdminCasesList(params)).done(function (resultList) {\n      $(resultList.rows).each(function (key, value) {\n        if (!value.isAdhocProcess) value.isAdhocProcess = false;\n        if (value.isAdhocProcess) {\n          self.adhocIds.push({\n            'caseId': value.idCase,\n            'processId': value.idAdhocProcess });\n\n        }\n      });\n      //clean old results\n      $(\"#generalTitle\").show();\n      $(\".biz-wp-table\").remove();\n      $(\".case-search-action-wrapper\").remove();\n      $(\"#biz-wp-table-summary-wrapper\").remove();\n\n      //Keep in track the total Records\n      self.totalRecords = resultList.records;\n      //keep in track the total pages\n      self.totalPages = resultList.total;\n\n      if (resultList.rows.length > 0) {\n        self._showResultAndSort(content, resultList, params);\n        self.setupActionsButton(content);\n\n        var pageToshow = self.maxPageToShow > self.totalPages ? self.totalPages : self.maxPageToShow;\n        var summaryWrapper = $(\"#biz-wp-table-pager-wrapper\"),\n        pagerData = {},\n        paginationHtml;\n\n        // show or hide \"load more\" button\n        pagerData.pagination = self.totalPages > 1 ? true : false;\n        pagerData.page = resultList.page;\n        pagerData.pages = {};\n\n        for (var i = 1; i <= pageToshow; i++) {\n          pagerData[\"pages\"][i] = {\n            \"pageNumber\": i };\n\n        }\n\n        //load and append the paginator to the result table\n        paginationHtml = $.tmpl(self.paginationTmpl, pagerData).html();\n        summaryWrapper.append(paginationHtml);\n\n        //add data and behaviour to pager\n        $(\"ul\").bizagiPagination({\n          maxElemShow: self.maxElemShow,\n          totalPages: self.totalPages,\n          actualPage: resultList.page,\n          listElement: $(\"#biz-wp-table-pager-wrapper\"),\n          clickCallBack: function clickCallBack(options) {\n            self.findResults(content, params, options.page);\n          } });\n\n      } else {\n        bizagi.showMessageBox(bizagi.localization.getResource(\"workportal-widget-authentication-log-none\"), bizagi.localization.getResource(\"workportal-general-word-information\"), \"warning\");\n      }\n\n\n    }).fail(function (error) {\n      bizagi.log(error);\n    });\n  },\n\n  /**\r\n      * return correct class for sorted column or not\r\n      * @param {JSON} sortedBy actual sort\r\n      * @param {String} columnOrder name of column to review in template\r\n      */\n  _forTemplateClassSortedBy: function _forTemplateClassSortedBy(sortedBy, columnOrder) {\n    var self = this,\n    _CLASSES = self.Class.CLASSES,\n    _isSorted = sortedBy.order == columnOrder,\n    _asc = sortedBy.orderType === 0,\n    _classDirection = _asc ? _CLASSES.SORT_COL_ASC : _CLASSES.SORT_COL_DES;\n\n    return _isSorted ? _classDirection : _CLASSES.SORT_COL_NOT;\n  },\n\n  /**\r\n      * Show cases search result frames\r\n      * @param {JqueryElement} content \r\n      * @param {JSON} resultList \r\n      * @param {JSON} sortedBy actual sort\r\n      */\n  showCasesSearchResultFrame: function showCasesSearchResultFrame(content, resultList, sortedBy) {\n    var self = this;\n\n    var disableInvalidate = bizagi.override.disableAbortCases ? true : false;\n\n    var processedItems = self.preprocessResultList(resultList.headers, resultList);\n    var resultTemplate = $.tmpl(self.resultContentTmpl,\n    {\n      headers: resultList.headers,\n      rows: processedItems,\n      groupByCaseNumber: bizagiConfig.groupByCaseNumber,\n      securityGraphicQuery: bizagi.menuSecurity.GraphicQuery,\n      resultList: resultList },\n\n    {\n      classSortedBy: self._forTemplateClassSortedBy.bind(self, sortedBy),\n      getRadNumberColumnIndex: function getRadNumberColumnIndex() {\n        var data = this.data;\n        var index = -1;\n        for (var i = 0, l = data.headers.length; i < l; i++) {\n          if (data.headers[i].fieldName == \"I_radNumber\") {\n            index = i;\n          }\n        }\n        return index;\n      },\n      showColumn: function showColumn(columnIndex) {\n        var index = this.getRadNumberColumnIndex();\n        return this.data.groupByCaseNumber && index == columnIndex ? ' hidden ' : \"\";\n      },\n      createGroupedHeader: function createGroupedHeader(rowIndex) {\n        var data = this.data.resultList;\n        var result = false;\n        var radNumber = this.getRadNumber(data.rows[rowIndex]);\n        if (this.data.groupByCaseNumber) {\n          if (rowIndex == 0) {\n            result = true;\n          } else {\n            var previousRadNumber = this.getRadNumber(data.rows[rowIndex - 1]);\n            if (radNumber != previousRadNumber) {\n              result = true;\n            }\n          }\n        }\n        return result;\n      },\n      getRadNumber: function getRadNumber(row) {\n        var index = this.getRadNumberColumnIndex();\n        return index >= 0 ? row.data[index] : \"\";\n      } }),\n\n\n    invalidateForm = $.tmpl(self.invalidateContentTmpl, {}),\n    reassignForm = $.tmpl(self.reassignContentTmpl, {});\n\n    $(\"#mainForm\", content).hide();\n    $(\"#dinamicContent\", content).html(resultTemplate);\n\n    if (!disableInvalidate) {\n      $(\".case-search-action-wrapper\", content).append(invalidateForm);\n    }\n    $(\".case-search-action-wrapper\", content).append(reassignForm);\n\n    $(\"#generalTitle\").html(bizagi.localization.getResource(\"workportal-widget-admincasesearch-table-title\"));\n    $(\"#btn-admin-case-search-clear\", content).hide();\n    $(\"#btn-admin-case-search\", content).hide();\n    $(\"#btn-admin-case-back\", content).css(\"display\", \"inline\");\n\n    self.setupActivitiesLink(content);\n    self.setupGraphicQueryEvent(content);\n    self.selectedItemsPersistence(content);\n\n    for (var i = 0; i < resultList.rows.length; i++) {\n      var idCase = resultList.rows[i].idCase;\n\n      $('.row-case-' + idCase).on(\"mouseover\", function () {\n        $('.row-case-' + idCase).addClass('row-background');\n      });\n\n      $('.row-case-' + idCase).on(\"mouseout\", function () {\n        $('.row-case-' + idCase).removeClass('row-background');\n      });\n    }\n  },\n\n  selectedItemsPersistence: function selectedItemsPersistence(content) {\n    var self = this;\n    var item = \"\";\n\n    $.each(self.selectedCaseAdmin, function (index, value) {\n      item = \"input:checkbox[name=CaseAdmin][value=\" + value + \"]\";\n      $(item, content).prop(\"checked\", true);\n    });\n\n    $.each(self.selectedWorkItemAdmin, function (index, value) {\n      item = \"input:checkbox[name=workItemAdmin][value='\" + value + \"']\";\n      $(item, content).prop(\"checked\", true);\n    });\n\n  },\n\n  /*\r\n      *\r\n      */\n  preprocessResultList: function preprocessResultList(headers, resultList) {\n    var self = this;\n\n    var processedItems = [],\n    length = resultList.rows.length,\n    i = 0;\n\n    for (; i < length; i++) {\n      processedItems.push(self.processResultItem(headers, resultList.rows[i]));\n    }\n\n    return processedItems;\n  },\n\n  /*\r\n      * Process each result item\r\n      */\n  processResultItem: function processResultItem(headers, rowItem) {\n    var self = this;\n\n    var rowItemData = rowItem.data,\n    idCase = rowItem.idCase,\n    idWorkflow = rowItem.idWorkFlow,\n    radNumber = rowItem.radNumber,\n    idParentCase = rowItem.idParentCase,\n    isSubProcess = rowItem.isSubprocess;\n\n    var resultArray = [],\n    firstRowItem = [];\n\n    //Handle the task elements\n    var taskElements,\n    taskElementsLength;\n\n    var currentTaskObj;\n\n    var taskColumnIndex = [],\n    taskColumnIndexLength;\n\n    var j = -1,\n    columnIndex = 0;\n\n    var resultTaskArray = false;\n\n    firstRowItem.push({\n      id: \"checkCaseAdmin\",\n      value: idCase,\n      radNumber: radNumber,\n      idParentCase: idParentCase,\n      isSubProcess: isSubProcess });\n\n\n    while (j++ < headers.length - 1) {\n\n      switch (headers[j].fieldName) {\n        case self.columnsID.caseNumber:\n          //Insert case number\n          firstRowItem.push({\n            id: \"caseNumber\",\n            value: {\n              'idCase': idCase,\n              'caseNumber': rowItemData[columnIndex] } });\n\n\n\n          columnIndex++;\n          break;\n\n        case self.columnsID.process:\n          //Insert process name\n          firstRowItem.push({\n            id: \"idWorkItem\",\n            value: rowItemData[columnIndex] });\n\n\n          columnIndex++;\n          break;\n\n        case self.columnsID.userName:\n        case self.columnsID.userfullName:\n        case self.columnsID.task:\n        case self.columnsID.taskDueDate:\n\n          //Gets the row elements if is not already assigned to taskElements array\n          if (taskElements === undefined) {\n            var k = rowItemData.length;\n            while (k-- > 0) {\n              if (Array.isArray(rowItemData[k])) {\n                taskElements = rowItemData[k];\n\n                //Notifies the existence of the array of task elements\n                resultTaskArray = true;\n                break;\n              }\n            }\n            columnIndex++;\n          } else if (taskElements !== undefined && JSON.stringify(taskElements) === JSON.stringify(rowItemData[columnIndex])) {\n            columnIndex++;\n          }\n\n          //set the current task obj\n          if (resultTaskArray) {\n\n            currentTaskObj = taskElements[0];\n\n            if (self.columnsID.userName == headers[j].fieldName) {\n              firstRowItem = firstRowItem.concat(self.processTaskObjectUser(currentTaskObj));\n\n              if (taskColumnIndex.indexOf(self.columnsID.userName) == -1) {\n                taskColumnIndex.push(self.columnsID.userName);\n                //columnIndex++;\n              }\n            } else if (self.columnsID.userfullName == headers[j].fieldName) {\n              firstRowItem = firstRowItem.concat(self.processTaskObjectUserFullName(currentTaskObj));\n\n              if (taskColumnIndex.indexOf(self.columnsID.userfullName) == -1) {\n                taskColumnIndex.push(self.columnsID.userfullName);\n                //columnIndex++;\n              }\n            } else if (self.columnsID.task == headers[j].fieldName) {\n              firstRowItem = firstRowItem.concat(self.processTaskObject(currentTaskObj, idCase, rowItem.radNumber));\n\n              if (taskColumnIndex.indexOf(self.columnsID.task) == -1) {\n                taskColumnIndex.push(self.columnsID.task);\n                //columnIndex++;\n              }\n            } else if (self.columnsID.taskDueDate == headers[j].fieldName) {\n              firstRowItem = firstRowItem.concat(self.processTaskObjectDate(currentTaskObj));\n\n              if (taskColumnIndex.indexOf(self.columnsID.taskDueDate) == -1) {\n\n                //Removes the unecessary due date\n                /*if (headers[j].fieldName == self.columnsID.taskDueDate) {\r\n                    rowItemData.splice(columnIndex, 1);\r\n                }*/\n\n                taskColumnIndex.push(self.columnsID.taskDueDate);\n                //columnIndex++;\n              }\n            }\n            //TODO : userLocation logic in case its come inside the task array\n          } else {\n            if (headers[j].fieldName == self.columnsID.taskDueDate) {\n              //inserts the estimated Solution date in a object\n              firstRowItem = firstRowItem.concat({\n                'estimatedSolutionDate': rowItemData[j] });\n\n\n              if (taskColumnIndex.indexOf(self.columnsID.taskDueDate) == -1)\n              taskColumnIndex.push(self.columnsID.taskDueDate);\n            }\n          }\n\n          break;\n        //TODO : create case logic for single element, or create the required logic whe userLocation comes in the task list array            \n        /*\r\n         case self.columnsID.userLocation:\r\n         break;\r\n         /**/\n\n\n        case self.columnsID.processCreationDate:\n          //Creation Date\n          firstRowItem.push({\n            id: \"processCreationDate\",\n            value: rowItemData[columnIndex] });\n\n\n          columnIndex++;\n          break;\n\n        case self.columnsID.processDueDate:\n          //Task Due Date\n          firstRowItem.push({\n            id: \"processDueDate\",\n            value: rowItemData[columnIndex] });\n\n\n          columnIndex++;\n          break;\n\n        default:\n\n          var resultValue = bizagi.util.formatValueByDataType(rowItemData[columnIndex], headers[j].type);\n\n          firstRowItem.push({\n            id: \"customField\",\n            value: resultValue });\n\n\n          columnIndex++;\n          break;}\n\n    }\n\n\n    //Inserts view Process Column\n    firstRowItem.push({\n      id: \"viewProcess\",\n      value: {\n        'idCase': idCase,\n        'idworkflow': idWorkflow } });\n\n\n\n    //Insert the first row element\n    resultArray.push({\n      attr: \"first_row\",\n      data: firstRowItem });\n\n\n    taskElementsLength = taskElements ? taskElements.length : 0;\n\n    //If there is more task, add the remaining rows\n    if (taskElementsLength > 1) {\n      taskColumnIndexLength = taskColumnIndex.length;\n      for (var i = 1; i < taskElementsLength; i++) {\n\n        var taskData = [],\n        k = -1;\n        //Adds the elements in the right order as the columns are\n\n        while (k++ < taskColumnIndexLength - 1) {\n          if (taskColumnIndex[k] == self.columnsID.task)\n          taskData.push(self.processTaskObject(taskElements[i], idCase, rowItem.radNumber));else\n          if (taskColumnIndex[k] == self.columnsID.taskDueDate)\n          taskData.push(self.processTaskObjectDate(taskElements[i]));else\n          if (taskColumnIndex[k] == self.columnsID.userName)\n          taskData.push(self.processTaskObjectUser(taskElements[i]));else\n          if (taskColumnIndex[k] == self.columnsID.userfullName)\n          taskData.push(self.processTaskObjectUserFullName(taskElements[i]));\n        }\n\n        resultArray.push({\n          attr: \"next_row\",\n          data: taskData });\n\n      }\n    }\n\n    return {\n      data: resultArray,\n      totalTask: taskElementsLength,\n      idCase: idCase };\n\n  },\n\n  /*\r\n      *   Process each task object\r\n      */\n  processTaskObject: function processTaskObject(taskObject, idCase, radNumber) {\n    var obj = {\n      'taskName': taskObject.taskName,\n      'colorState': taskObject.colorState,\n      'taskType': taskObject.taskType,\n      'idCase': idCase,\n      'idWorkItem': taskObject.idWorkItem,\n      'idTask': taskObject.idTask,\n      'radNumber': radNumber };\n\n    taskObject.taskType === \"Wait\" ? obj.skip = true : \"\";\n    return obj;\n  },\n\n  /*\r\n      * Process task object detecting if is has or not estimated solution date\r\n      */\n  processTaskObjectDate: function processTaskObjectDate(taskObject) {\n    var obj = {};\n    taskObject.estimatedSolutionDate ? obj.estimatedSolutionDate = taskObject.estimatedSolutionDate : obj.estimatedSolutionDate = \"\";\n    taskObject.taskType === \"Wait\" ? obj.skip = true : \"\";\n\n    return obj;\n  },\n\n  /*\r\n      * Process task object detecting if is has or not estimated solution date\r\n      */\n  processTaskObjectUser: function processTaskObjectUser(taskObject) {\n    var obj = {};\n    taskObject.assignee ? obj.userName = taskObject.assignee : obj.userName = \"\";\n\n    return obj;\n  },\n\n  processTaskObjectUserFullName: function processTaskObjectUserFullName(taskObject) {\n    var obj = {};\n    taskObject.assigneeFullName ? obj.userName = taskObject.assigneeFullName : obj.userName = \"\";\n\n    return obj;\n  },\n\n  /*\r\n      * Invalidate selected cases\r\n      */\n  invalidateCases: function invalidateCases(content) {\n    var self = this;\n    var parentCases = \"\";\n    var messageConfirmation = \"\";\n    var selectedCases = {\n      cases: [] };\n\n\n    self.selectedCaseAdmin.forEach(function (item) {\n      selectedCases.cases.push({\n        idCase: item });\n\n    });\n\n    if (selectedCases.cases.length == 0) {\n      bizagi.showMessageBox(bizagi.localization.getResource(\"workportal-widget-admincasesearch-invalidate-empty-msg\"), bizagi.localization.getResource(\"workportal-general-word-information\"), \"warning\");\n    } else {\n\n      messageConfirmation = bizagi.util.isEmpty(parentCases) ? bizagi.localization.getResource(\"workportal-widget-admincasesearch-invalidate-confirm-msg\") : bizagi.localization.getResource(\"workportal-widget-admincasesearch-invalidate-subprocess-confirm-msg\") + parentCases.substring(0, parentCases.length - 1);\n      var customOptions = {\n        dialogClass: \"widget-admincasesearch-invalidate-cases-confirm\",\n        width: 400,\n        minWidth: 400 };\n\n      $.when(bizagi.showConfirmationBox(messageConfirmation, bizagi.localization.getResource(\"workportal-general-word-information\"), \"warning\", null, customOptions)).\n      done(function () {\n        var reason = $(\"#txtReason\", content).val();\n        var params = {\n          action: \"abort\",\n          cases: JSON.stringify(selectedCases),\n          reason: reason };\n\n\n        $.when(self.dataService.abortReassignItems(params)).done(function (abortResult) {\n          self.showActionResultFrame(content, abortResult.response, \"invalidate\");\n        }).fail(function (error) {\n          bizagi.log(error);\n        });\n      });\n    }\n  },\n\n  /*\r\n      * Reassign selected tasks\r\n      */\n  showReassignTasksFrame: function showReassignTasksFrame(content) {\n    var self = this;\n    var selectedTasks = {\n      cases: [] };\n\n    var selectedTasksToShow = [];\n\n    $.each(self.selectedWorkItemAdmin, function (index, item) {\n      item = item.split(\"|\");\n      selectedTasks.cases.push({\n        idCase: item[0],\n        idWorkItem: item[1] });\n\n      selectedTasksToShow.push({\n        taskItem: item[3] + \": \" + item[2],\n        idWorkItem: item[1] });\n\n    });\n\n    if (selectedTasksToShow.length == 0) {\n      bizagi.showMessageBox(bizagi.localization.getResource(\"workportal-widget-admincasesearch-reassign-empty-msg\"), bizagi.localization.getResource(\"workportal-general-word-information\"), \"warning\");\n    } else {\n      self.selectedTasks = selectedTasks;\n      self.selectedTasksToShow = selectedTasksToShow;\n      self.showReassignForm(content, selectedTasksToShow);\n    }\n  },\n\n  /*\r\n      * Show Reassign frame\r\n      */\n  showReassignForm: function showReassignForm(content, selectedTasksToShow) {\n    var self = this;\n    self.buttonBackAction = \"backToCases\";\n    var resultTemplate = $.tmpl(self.reassignFormTmpl, {\n      tasks: selectedTasksToShow });\n\n\n    $(\"#dinamicContent\", content).hide();\n    $(\"#dinamicContent2\", content).html(resultTemplate);\n    $(\"#btn-admin-case-search-clear\", content).hide();\n    $(\"#btn-admin-case-search\", content).hide();\n    $(\"#generalTitle\").html(bizagi.localization.getResource(\"workportal-widget-admincasesearch-reassign-title\"));\n    self.setupUsersSearchForm();\n\n  },\n\n  /*\r\n      * Reassign one or more taskt to other user\r\n      */\n  reassignTasks: function reassignTasks() {\n    var self = this;\n    var content = self.getContent();\n\n    var params = {\n      action: \"reassignItems\",\n      cases: JSON.stringify(self.selectedTasks),\n      idNewUser: self.selectedUserId };\n\n\n    $.when(self.dataService.abortReassignItems(params)).done(function (reassignResult) {\n      self.showActionResultFrame(content, reassignResult.response, \"reassign\");\n    }).fail(function (error) {\n      bizagi.log(error);\n    });\n  },\n\n  /*\r\n      * Show Invalidate / Reassign Result frame\r\n      */\n  showActionResultFrame: function showActionResultFrame(content, result, type) {\n    var self = this;\n    var action = result.length > 1 ? \"-several\" : \"\";\n    var items = \"\";\n    var itemsFailed = \"\";\n    var resultStatus = [];\n    action = type + action;\n\n    if (action == \"invalidate\") {\n      for (var i = 0; i < result.length; i++) {\n        if (result[i].deleted == true) {\n          items = result[i].idCase;\n          items += i + 1 < result.length ? \", \" : \"\";\n          resultStatus[0] = true;\n        } else {\n          itemsFailed = result[i].idCase;\n          itemsFailed += i + 1 < result.length ? \", \" : \"\";\n          resultStatus[1] = false;\n        }\n      }\n    } else if (action == \"invalidate-several\") {\n      for (var i = 0; i < result.length; i++) {\n        if (result[i].deleted == true) {\n          items += result[i].idCase;\n          items += i + 1 < result.length ? \", \" : \"\";\n          resultStatus[0] = true;\n        } else {\n          itemsFailed += result[i].idCase;\n          itemsFailed += i + 1 < result.length ? \", \" : \"\";\n          resultStatus[1] = false;\n        }\n      }\n    } else if (action == \"reassign\") {\n      for (var i = 0; i < result.length; i++) {\n        if (result[i].reassigned == true) {\n          items += result[i].idCase;\n          items += i + 1 < result.length ? \", \" : \"\";\n          resultStatus[0] = true;\n        } else {\n          itemsFailed = result[i].idCase;\n          itemsFailed += i + 1 < result.length ? \", \" : \"\";\n          resultStatus[1] = false;\n        }\n      }\n    } else if (action == \"reassign-several\") {\n      items += \"<br/><br/>\";\n      itemsFailed += \"<br/><br/>\";\n      for (var i = 0; i < result.length; i++) {\n        if (result[i].reassigned == true) {\n          items += result[i].idCase + \"<br/>\";\n          resultStatus[0] = true;\n        } else {\n          itemsFailed += result[i].idCase + \"<br/>\";\n          resultStatus[1] = false;\n        }\n      }\n      items += \"<br/>\";\n      itemsFailed += \"<br/>\";\n    }\n\n    //load result template\n    var resultTemplate = $.tmpl(self.actionResultContentTmpl, {\n      action: action,\n      resultStatus: resultStatus,\n      exceptionMessage: itemsFailed.substring(itemsFailed.indexOf('|') + 1) });\n\n    resultTemplate = resultTemplate[0].innerHTML.replace(\"{0}\", \"<strong>\" + items + \"</strong>\");\n    var idCase = itemsFailed.substring(0, itemsFailed.indexOf('|') === -1 ? undefined : itemsFailed.indexOf('|'));\n    resultTemplate = resultTemplate.replace(\"{3}\", \"<strong>\" + idCase + \"</strong>\");\n    resultTemplate = resultTemplate.replace(\"{1}\", self.selectedUserName);\n    resultTemplate = resultTemplate.replace(\"{1}\", self.selectedUserName);\n\n    //reset and load respective result data and elements\n    if (type == \"invalidate\") $(\"#generalTitle\").html(bizagi.localization.getResource(\"workportal-widget-admincasesearch-invalidate-result-title\"));\n    $(\"#mainForm\", content).html(\"\");\n    $(\"#dinamicContent\", content).css(\"display\", \"inline\");\n    $(\"#dinamicContent\", content).html(resultTemplate);\n    $(\"#dinamicContent2\", content).remove();\n    $(\"#usersTable\", content).remove();\n    $(\"#btn-admin-case-back\", content).css(\"display\", \"none\");\n    $(\"#btn-admin-case-search-clear\", content).css(\"display\", \"none\");\n    $(\"#btn-admin-case-search\", content).css(\"display\", \"none\");\n    $(\"#btn-admin-case-finish\", content).css(\"display\", \"inline\");\n  },\n\n\n  //******************************** EVENTS ********************************//\n\n  /*\r\n   * Implement main buttons behaviour\r\n   */\n  setupMainButtons: function setupMainButtons() {\n    var self = this,\n    content = self.getContent(),\n    buttons = $.tmpl(self.buttonContentTmpl, {});\n\n    content.append(buttons);\n\n    var widgetButtonSet = $(\"#case-search-log-data-buttonset\", content);\n\n    $(\"#btn-admin-case-search-clear\", widgetButtonSet).click(function () {\n\n      //clear all fields\n      $(\".biz-wp-input-text\", content).val(\"\");\n      $(\".biz-wp-form-datepicker\", content).val(\"\");\n      $(\"#userPositionInput\", content).val(''); //Clean combo value\n      $(\"#userPositionInput\", content).find(\".biz-wp-combo-input\").val('.........'); //Clean combo display\n      self.setupProcessTree();\n\n    });\n\n    $(\"#btn-admin-case-search\", widgetButtonSet).click(function () {\n\n      var idAppToSend = \"\",\n      idCategorytoSend = \"\",\n      idProcessToSend = \"\",\n      errorMessage = \"\",\n      errorFieldName = \"\";\n\n      var selectedProcessRoute = self.processTree.getTreeRouteSelected();\n\n      if (selectedProcessRoute.length > 0) {\n        if (selectedProcessRoute.length == 2) {\n          idAppToSend = selectedProcessRoute[1];\n          idProcessToSend = selectedProcessRoute[0];\n          idCategorytoSend = \"\";\n        } else\n        {\n          idAppToSend = selectedProcessRoute[selectedProcessRoute.length - 1];\n          //In admin search it isn't necesary add the categoryId param\n          idCategorytoSend = \"\";\n          idProcessToSend = selectedProcessRoute[0];\n        }\n      }\n\n      var numberResults = parseInt($(\"#resultsNumber\").val());\n      bizagi.util.isNumeric(numberResults) ? self.maxElemShow = numberResults : self.maxElemShow = self.defaultMaxRows;\n\n      var dateFrom = $(\"#sinceDate\");\n      dateFrom = dateFrom.datepicker(\"getDate\");\n      dateFrom = dateFrom ? bizagi.util.dateFormatter.formatInvariant(dateFrom, false) : \"\";\n\n      var dateTo = $(\"#toDate\");\n      dateTo = dateTo.datepicker(\"getDate\");\n      dateTo = dateTo ? bizagi.util.dateFormatter.formatInvariant(dateTo, false) : \"\";\n\n      var params = {\n        h_action: \"getCases\",\n        I_ProcessState: \"Running\",\n        h_idApp: \"\",\n        I_Users: \"ALL\",\n        eventAsTask: true,\n        orderType: 1,\n        order: \"\",\n        orderField: \"\",\n        group: bizagiConfig.groupByCaseNumber ? \"T_RADNUMBER\" : null,\n        I_radNumber: $.trim($(\"#caseInput\").val()),\n        I_idWFClass: idProcessToSend,\n        I_USERNAME: $(\"#userNameInput\").val(),\n        I_USERFULLNAME: $(\"#userFullNameInput\").val(),\n        I_USERPOSITION: $(\"#userPositionInput\").val(),\n        I_From__CreationDate: dateFrom ? dateFrom : $(\"#sinceDate\").val(),\n        I_To__CreationDate: dateTo ? dateTo : $(\"#toDate\").val(),\n        h_idWFClassAuth: \"\",\n        I_idCategory: idCategorytoSend,\n        I_idApplication: idAppToSend,\n        PageSize: self.maxElemShow };\n\n\n      if (params[\"I_From__CreationDate\"] != \"\" && !bizagi.util.isDate(params[\"I_From__CreationDate\"])) {\n        errorMessage = bizagi.localization.getResource(\"workportal-general-invalid-date\");\n        errorFieldName = bizagi.localization.getResource(\"workportal-widget-admincasesearch-date-since\");\n        errorMessage = errorMessage.replace(\"{0}\", errorFieldName);\n        bizagi.showMessageBox(errorMessage, bizagi.localization.getResource(\"workportal-general-word-information\"), \"warning\");\n      } else if (params[\"I_To__CreationDate\"] != \"\" && !bizagi.util.isDate(params[\"I_To__CreationDate\"])) {\n        errorMessage = bizagi.localization.getResource(\"workportal-general-invalid-date\");\n        errorFieldName = bizagi.localization.getResource(\"workportal-widget-admincasesearch-to-date\");\n        errorMessage = errorMessage.replace(\"{0}\", errorFieldName);\n        bizagi.showMessageBox(errorMessage, bizagi.localization.getResource(\"workportal-general-word-information\"), \"warning\");\n      } else if (params[\"PageSize\"] === 0) {\n        errorMessage = bizagi.localization.getResource(\"render-date-minimum-validation\");\n        errorFieldName = bizagi.localization.getResource(\"workportal-widget-admincasesearch-number-results\");\n        errorMessage = errorMessage.replace(\"#label#\", errorFieldName);\n        errorMessage = errorMessage.replace(\"#minValue#\", '1');\n        bizagi.showMessageBox(errorMessage, bizagi.localization.getResource(\"workportal-general-word-information\"), \"warning\");\n      } else {\n        self.searchParams = params;\n        self.selectedCaseAdmin = [];\n        self.selectedWorkItemAdmin = [];\n        self.findResults(content, params);\n      }\n    });\n\n    $(\"#btn-admin-case-back\", widgetButtonSet).click(function () {\n      if (self.buttonBackAction == \"backToMainForm\") {\n        self.backToMainForm();\n      } else if (self.buttonBackAction == \"backToCases\") {\n        self.backToCases();\n      }\n    });\n\n    $(\"#btn-admin-case-finish\", widgetButtonSet).click(function () {\n      self.setupData();\n    });\n\n    //Result per page only number search\n    $(\"#resultsNumber\", content).bind(\"keypress\", function (e) {\n      var unicode = e.charCode ? e.charCode : e.keyCode;\n      if (unicode != 8) {\n        if (unicode < 48 || unicode > 57)\n        return false;\n      }\n    });\n\n    $(\"#btn-admin-cases-invalidate\", content).click(function () {\n      if ($(\"#allAppsLinkSelected\", content).data('allAppSelected') === false && self.processTreeDelete.getTreeRouteSelected().length === 0) {//If nothing has been selected\n        bizagi.showMessageBox(bizagi.localization.getResource(\"workportal-widget-processTree-no-selected-process\"), bizagi.localization.getResource(\"workportal-general-word-information\"), \"warning\");\n      } else {\n        self.showConfirmationMessage();\n      }\n\n      $(self.loader).remove();\n    });\n  },\n\n  /**\r\n      * Get date from DatePicker\r\n      * @param controlIDSelector\r\n      * @returns {string}\r\n      */\n  getDateInvariantByControlIDSelector: function getDateInvariantByControlIDSelector(controlIDSelector) {\n    var paramDate = \"\";\n    var valueDatePicker = $(controlIDSelector).datepicker(\"getDate\");\n\n    if (valueDatePicker !== null) {\n      try {\n        paramDate = bizagi.util.dateFormatter.formatInvariant(valueDatePicker, false);\n      }\n      catch (err) {\n        paramDate = \"\";\n        $(controlIDSelector).val(\"\");\n      }\n    }\n    return paramDate;\n  },\n\n  /*\r\n      * Back to Cases\r\n      */\n  backToCases: function backToCases() {\n\n    var self = this;\n    var content = self.getContent();\n\n    self.buttonBackAction = \"backToMainForm\";\n    $(\"#dinamicContent\", content).show();\n    $(\"#dinamicContent2\", content).html(\"\");\n    $(\"#usersTable\").remove();\n    $(\"#generalTitle\").html(bizagi.localization.getResource(\"workportal-widget-admincasesearch-table-title\"));\n    $(\"#btn-admin-case-search-clear\", content).hide();\n    $(\"#btn-admin-case-search\", content).hide();\n  },\n\n  /*\r\n      * Back to Main Form\r\n      */\n  backToMainForm: function backToMainForm() {\n\n    var self = this;\n    var content = self.getContent();\n\n    $(\"#mainForm\", content).show();\n    $(\"#dinamicContent\", content).html(\"\");\n    $(\"#generalTitle\").html(bizagi.localization.getResource(\"workportal-widget-admincasesearch-subtitle\"));\n    $(\"#btn-admin-case-search-clear\", content).show();\n    $(\"#btn-admin-case-search\", content).show();\n    $(\"#btn-admin-case-back\", content).css(\"display\", \"none\");\n  },\n\n  /*\r\n      * Set event to reassign link in users table\r\n      */\n  assignEventReassignLinks: function assignEventReassignLinks(userId, userName) {\n    var self = this;\n    self.selectedUserId = userId;\n    self.selectedUserName = userName;\n    self.reassignTasks();\n  },\n\n  /*\r\n      * Implement actions buttons behaviour\r\n      */\n  setupActionsButton: function setupActionsButton(content) {\n    var self = this;\n\n    $(\"input:checkbox[name=CaseAdmin]\", content).click(function () {\n      var valueSelected = $(this).val();\n      $(this).is(\":checked\") ? self.selectedCaseAdmin.push(valueSelected) : self.selectedCaseAdmin.splice($.inArray(valueSelected, self.selectedCaseAdmin), 1);\n    });\n\n    $(\"input:checkbox[name=workItemAdmin]\", content).click(function () {\n      var valueSelected = $(this).val();\n      $(this).is(\":checked\") ? self.selectedWorkItemAdmin.push(valueSelected) : self.selectedWorkItemAdmin.splice($.inArray(valueSelected, self.selectedWorkItemAdmin), 1);\n    });\n\n    //boton invalidar\n    $(\"#btn-admin-case-invalidate\", content).click(function () {\n      self.invalidateCases(content);\n    });\n\n    //boton reasignar\n    $(\"#btn-admin-case-reassign\", content).click(function () {\n      self.showReassignTasksFrame(content);\n    });\n  },\n\n  /*\r\n      * Manage cases table links events(cases, activities and view workflow)\r\n      */\n  setupActivitiesLink: function setupActivitiesLink(content) {\n    var self = this;\n\n    // Add click event to task (Activity) link\n    $(\".activityClicked\", content).click(function () {\n      self.publish(\"executeAction\", {\n        action: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,\n        idCase: $(this)[0].getAttribute(\"data-idCase\"),\n        idWorkItem: $(this)[0].getAttribute(\"data-idworkItem\"),\n        idTask: $(this)[0].getAttribute(\"data-idTask\") });\n\n      self.publish(\"closeCurrentDialog\");\n      bizagi.referrerParams.referrer = bizagi.util.defaultWidget();\n    });\n\n    // Add click event to case link\n    $(\".caseClicked\", content).click(function () {\n      self.publish(\"executeAction\", {\n        action: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,\n        idCase: $(this)[0].getAttribute(\"data-idCase\"),\n        idWorkItem: \"\",\n        idTask: \"\" });\n\n      self.publish(\"closeCurrentDialog\");\n      bizagi.referrerParams.referrer = bizagi.util.defaultWidget();\n    });\n\n    // Add click event to column header\n    $(\".cases-column-header:not(.cases-column-no-sortable)\", content).click(function () {\n      var columnOrderId = $(this)[0].getAttribute(\"data-columnorder\");\n      var columnOrderBy = $(this)[0].getAttribute(\"data-ordertype\");\n      var columnOrderName = $(this)[0].getAttribute(\"data-columnOrderName\");\n\n      if (columnOrderBy == \"1\") {\n        columnOrderBy = 0;\n      } else {\n        columnOrderBy = 1;\n      }\n\n      self.searchParams.order = columnOrderId;\n      self.searchParams.orderType = columnOrderBy;\n      self.searchParams.orderField = columnOrderName;\n      self.findResults(content, self.searchParams, self.searchParams.Page);\n\n    });\n  },\n\n  /*\r\n      * Set up graphic query event\r\n      */\n  setupGraphicQueryEvent: function setupGraphicQueryEvent(content) {\n\n    var self = this;\n\n    // Add click event to view workflow\n    $(\".biz-wp-diagram-view-icon\", content).click(function () {\n      var idCase = $(this).data(\"idcase\");\n      var idWorkflow = $(this).data('idworkflow');\n      var isAdhoc = false;\n      var processId = null;\n\n      for (var i = 0; i < self.adhocIds.length; i++) {\n        if (parseInt(idCase) == self.adhocIds[i].caseId) {\n          isAdhoc = true;\n          processId = self.adhocIds[i].processId;\n        }\n      }\n      if (isAdhoc) {\n        self.showGraphicQuery({\n          idCase: idCase,\n          idWorkflow: idWorkflow,\n          isAdhoc: isAdhoc,\n          idProcess: processId });\n\n      } else {\n        self.showGraphicQuery({\n          idCase: idCase,\n          idWorkflow: idWorkflow });\n\n      }\n\n    });\n  },\n  paramsToInvalidateSelectedCases: function paramsToInvalidateSelectedCases() {\n    var self = this;\n    var selectedProcessRoute = self.processTreeDelete.getTreeRouteSelected();\n    var idAppToSend = \"\",\n    idProcessToSend = \"\";\n\n    if (selectedProcessRoute.length > 0) {\n      if (selectedProcessRoute.length == 2) {\n        idAppToSend = selectedProcessRoute[1];\n        idProcessToSend = selectedProcessRoute[0];\n      } else\n      {\n        idAppToSend = selectedProcessRoute[selectedProcessRoute.length - 1];\n        idProcessToSend = selectedProcessRoute[0];\n      }\n    }\n\n    var params = {\n      idProcess: idProcessToSend,\n      idApplication: idAppToSend };\n\n    return params;\n  },\n  // Invalidate Cases Module\n  invalidateSelectedCase: function invalidateSelectedCase(selectedProcess) {\n    var self = this;\n    $.when(self.dataService.postAdminInvalidateCase(selectedProcess)).done(function () {\n      self.last_showSuccessToastInvalidate = true;\n      self.getProcessRunningInvalidateCases();\n    }).fail(function (error) {\n      bizagi.showMessageBox(bizagi.localization.getResource(\"workportal-widget-admin-transfers-case-security-permissions-assign-fail\"), bizagi.localization.getResource(\"workportal-general-word-information\"), \"warning\");\n      bizagi.log(error);\n    });\n  },\n  getProcessRunningInvalidateCases: function getProcessRunningInvalidateCases() {\n    var self = this;\n\n    self.resp = false;\n    $.when(self.dataService.getResponseProcessRunningInvalidateCases()).done(function (response) {\n      var content = self.getContent();\n      if (response.status === \"InProgress\") {//If there is a process running\n        var that = self;\n        if (!that.isOut) {// If I don't out of cancel case tab\n          self._showInvalidateMessage(content);\n          self.timer = setTimeout(function () {\n            that.getProcessRunningInvalidateCases();\n          }, 10000);\n        } else\n        {\n          self.resp = false;\n        }\n\n      } else {\n        self._showForm(content);\n        if (response.status === \"Finished\") {\n          self.resp = false;\n          self.last_showSuccessToastInvalidate ? self.showNotifier() : '';\n        } else if (response.status === \"Error\") {\n          self.last_showSuccessToastInvalidate ? bizagi.showToastError(bizagiConfig.environment, response.result) : '';\n        }\n      }\n      if (!self.isOut) {\n        self.last_showSuccessToastInvalidate = false;\n        if (response.status === \"InProgress\") {\n          self.last_showSuccessToastInvalidate = true;\n        }\n\n        self.endLoading();\n      } else {\n        $(self.loader).remove();\n      }\n    }).fail(function (error) {\n      var content = self.getContent();\n      bizagi.showMessageBox(bizagi.localization.getResource(\"workportal-widget-admin-transfers-case-security-permissions-assign-fail\"), bizagi.localization.getResource(\"workportal-general-word-information\"), \"warning\");\n      self._showForm(content);\n      self.resp = false;\n      self.endLoading();\n      bizagi.log(error);\n    });\n    return self.resp;\n  },\n\n  /**\r\n      * Show form to cancel cases\r\n      * @param {*} content \r\n      */\n  _showForm: function _showForm(content) {\n    $(\"#btn-admin-cases-invalidate\").fadeIn(10);\n    $(\"#tree\", content).fadeIn(10);\n    $(\"#invalidateMessage\", content).fadeOut(10);\n  },\n\n  /**\r\n      * show message and hide form\r\n      * @param {*} content \r\n      */\n  _showInvalidateMessage: function _showInvalidateMessage(content) {\n    $(\"#btn-admin-cases-invalidate\").fadeOut(10);\n    $(\"#invalidateMessage\", content).fadeIn(10);\n    $(\"#tree\", content).fadeOut(10);\n  },\n\n  /**\r\n      * show loader\r\n      */\n  showLoading: function showLoading() {\n    var self = this;\n    var content = self.getContent();\n    $(\"#deleteCasesWrapper\", content).fadeOut(10);\n    $(\"#case-search-log-data-buttonset\", content).fadeOut(10);\n    $(\"#deleteCases\", content).append(self.loader);\n  },\n\n  /**\r\n      * hide loader\r\n      */\n  endLoading: function endLoading() {\n    var self = this;\n    var content = self.getContent();\n    $(\"#deleteCasesWrapper\", content).fadeIn(10);\n    $(\"#case-search-log-data-buttonset\", content).fadeIn(10);\n    $(self.loader).remove();\n  },\n\n  /**\r\n      * When close the dialog\r\n      */\n  dispose: function dispose() {\n    clearTimeout(this.timer);\n  } });","/**\r\n * Name: BizAgi Desktop Widget Asynchronous Activities Console Implementation\r\n *\r\n * @author Christian Collazos\r\n */\n\n\nbizagi.workportal.widgets.admin.async.activities.extend(\"bizagi.workportal.widgets.admin.async.activities\", {\n  ASYNC_CHECK_TIMER: 3000 },\n{\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n    self.selectedTab = 0;\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    //Load templates\n    self.loadTemplates({\n      \"async\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.async\"),\n      \"admin.async.activities\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.admin.async.activities\").concat(\"#ui-bizagi-workportal-widget-admin-async-activities\"),\n      \"admin.async.activities.tabs\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.admin.async.activities\").concat(\"#ui-bizagi-workportal-widget-admin-async-activities-tabs\"),\n      \"admin.async.activities.tab1\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.admin.async.activities\").concat(\"#ui-bizagi-workportal-widget-admin-async-activities-tab1\"),\n      \"admin.async.activities.tab2\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.admin.async.activities\").concat(\"#ui-bizagi-workportal-widget-admin-async-activities-tab2\"),\n      \"admin.async.activities.tab3\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.admin.async.activities\").concat(\"#ui-bizagi-workportal-widget-admin-async-activities-tab3\"),\n      \"admin.async.activities.tab4\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.admin.async.activities\").concat(\"#ui-bizagi-workportal-widget-admin-async-activities-tab4\"),\n      \"admin.async.activities.log\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.admin.async.activities\").concat(\"#ui-bizagi-workportal-widget-admin-async-activities-log\"),\n      \"admin.async.rpaactivities.log\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.admin.async.activities\").concat(\"#ui-bizagi-workportal-widget-admin-rpa-activities-log\"),\n      \"admin.async.activities.pagination\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.admin.async.activities\").concat(\"#ui-bizagi-workportal-widget-admin-async-activities-pagination\"),\n      \"admin.async.activities.error.page\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.admin.async.activities\").concat(\"#ui-bizagi-workportal-widget-admin-async-activities-error-page\"),\n      \"admin.async.activities.processing\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.admin.async.activities\").concat(\"#ui-bizagi-workportal-widget-admin-async-activities-processing\"),\n      useNewEngine: false });\n\n  },\n\n  loadtemplates: function loadtemplates() {\n    var self = this;\n    //Template vars \n    self.tabsTmpl = self.getTemplate(\"admin.async.activities.tabs\");\n    self.tab1Tmpl = self.getTemplate(\"admin.async.activities.tab1\");\n    self.tab2Tmpl = self.getTemplate(\"admin.async.activities.tab2\");\n    self.tab3Tmpl = self.getTemplate(\"admin.async.activities.tab3\");\n    self.tab4Tmpl = self.getTemplate(\"admin.async.activities.tab4\");\n    self.logTmpl = self.getTemplate(\"admin.async.activities.log\");\n    self.rpalogTmpl = self.getTemplate(\"admin.async.rpaactivities.log\");\n    self.paginatorTmpl = self.getTemplate(\"admin.async.activities.pagination\");\n    self.errorPage = self.getTemplate(\"admin.async.activities.error.page\");\n    self.processingPage = self.getTemplate(\"admin.async.activities.processing\");\n  },\n\n  postRender: function postRender() {\n    var self = this;\n    self.maxElemShow = 10;\n    self.maxPageToShow = 5;\n\n    //load form data\n    self.setupData();\n  },\n\n  /*\r\n      * Setup form data\r\n      */\n  setupData: function setupData() {\n    var self = this;\n\n    self.setupInitialData();\n    self.setupTabs();\n  },\n\n  /*\r\n      * Load initial data\r\n      */\n  setupInitialData: function setupInitialData() {\n    var self = this,\n    content = self.getContent(),\n    mainContent = $(\".async-act-main-content\", content);\n\n    //set content form to default\n    $(\"#generalTitle\", content).html(bizagi.localization.getResource(\"workportal-widget-admin-asyncactivities-subtitle\"));\n    mainContent.html(\"\");\n    $(\"#main-screen\", content).show();\n    $(\"#dinamic-screen\", content).html(\"\");\n\n    //append fields to wrapper\n    var fields = $.tmpl(self.tabsTmpl, {});\n    mainContent.append(fields);\n    self.loadTabsContent();\n\n  },\n\n  /*\r\n      * load tabs\r\n      */\n  loadTabsContent: function loadTabsContent() {\n    var self = this,\n    content = self.getContent(),\n    paramsTab1 = \"\",\n    paramsTab2 = \"\";\n\n    paramsTab1 = {\n      action: \"getActivities\",\n      page: 1,\n      pageSize: self.maxElemShow };\n\n    paramsTab2 = {\n      action: \"getActivitiesByTask\",\n      page: 1,\n      pageSize: self.maxElemShow };\n\n    paramsTab3 = {\n      page: 1,\n      pageSize: self.maxElemShow };\n\n    paramsTab4 = {\n      action: \"getActivitiesByTask\",\n      page: 1,\n      pageSize: self.maxElemShow };\n\n\n    if (self.selectedTab == 0) self.renderTab1Table(content, paramsTab1);\n    if (self.selectedTab == 1) self.renderTab2Table(content, paramsTab2);\n    if (self.selectedTab == 2) self.renderTab3Table(content, paramsTab3);\n    if (self.selectedTab == 3) self.renderTab4Table(content, paramsTab4);\n  },\n\n  /*\r\n      * Apply tabs plugin\r\n      */\n  setupTabs: function setupTabs() {\n    var self = this,\n    content = self.getContent();\n\n    $(\"#async-tabs\", content).tabs({\n      activate: function activate(event, ui) {\n        self.selectedTab = ui.newTab.index();\n        self.loadTabsContent();\n      },\n      active: self.selectedTab || 0 });\n\n  },\n\n  /*\r\n      * Find async activities\r\n      */\n  renderTab1Table: function renderTab1Table(content, params, pageToShow) {\n    var self = this;\n    var tableWrapper = $(\"#main-screen\", content);\n\n    //If there is not a page to Show, begins whith the fist one\n    pageToShow ? params.page = pageToShow : params.page = 1;\n    $(\"#async-loading-activities\").show();\n    $.when(\n    self.dataService.asyncActivitiesServices(params)).\n    done(function (resultList) {\n      $(\"#async-loading-activities\").hide();\n      //clean old results\n      $(\"#async-tabs-1\").remove();\n\n      //Keep in track the total Records\n      self.totalRecords = resultList.records;\n      //keep in track the total pages\n      self.totalPages = resultList.total;\n      self.asyncActRefresh();\n\n      var tab1Content = $.tmpl(self.tab1Tmpl, {\n        rows: resultList.rows,\n        selectedTab: self.selectedTab });\n\n      $(\"#async-tabs\", content).append(tab1Content);\n\n\n      if (resultList.rows.length) {\n\n        // Format invariant dates\n        bizagi.util.formatInvariantDate(tab1Content, self.getResource(\"dateFormat\") + \" \" + self.getResource(\"timeFormat\"));\n\n        self.setupTab1ActivitiesLink();\n        self.setupActionsButton();\n\n        var pageToshow = self.maxPageToShow > self.totalPages ? self.totalPages : self.maxPageToShow,\n        summaryWrapper = $(\"#async-table-pager-wrapper\", tab1Content),\n        pagerData = {},\n        paginationHtml;\n\n        // show or hide \"load more\" button\n        pagerData.pagination = self.totalPages > 1 ? true : false;\n        pagerData.page = resultList.page;\n        pagerData.pages = {};\n        pagerData.additionalparameters = true;\n        pagerData.totalPages = self.totalPages;\n        pagerData.totalRecords = self.totalRecords;\n\n        for (var i = 1; i <= pageToshow; i++) {\n          pagerData[\"pages\"][i] = {\n            \"pageNumber\": i };\n\n        }\n\n        //load and append the paginator to the result table\n        paginationHtml = $.tmpl(self.paginatorTmpl, pagerData).html();\n        summaryWrapper.append(paginationHtml);\n\n        //add data and behaviour to pager\n        $(\"ul\").bizagiPagination({\n          maxElemShow: self.maxElemShow,\n          totalPages: self.totalPages,\n          actualPage: resultList.page,\n          listElement: $(\".pager-content\", tableWrapper),\n          clickCallBack: function clickCallBack(options) {\n            self.renderTab1Table(content, params, options.page);\n          } });\n\n\n\n      } else {\n        $(\"#async-table-pager-wrapper\", tab1Content).append(bizagi.localization.getResource(\"workportal-general-no-records-found\"));\n        $(\"#async-table-pager-wrapper\", tab1Content).addClass(\"bz-empty-list\");\n      }\n\n\n\n    }).fail(function (error) {\n      bizagi.log(error);\n    });\n\n  },\n\n  /*\r\n      * Find async grouped activities\r\n      */\n  renderTab2Table: function renderTab2Table(content, params) {\n    var self = this;\n    $(\"#async-loading-activities\").show();\n    $.when(\n    self.dataService.asyncActivitiesServices(params)).\n    done(function (resultList) {\n      $(\"#async-loading-activities\").hide();\n      //clean old results\n      $(\"#async-tabs-2\").remove();\n\n      if (resultList.rows.length) {\n\n        var resultArr = [],\n        resultRows = resultList.rows,\n        idInsertedArr = [],\n        arrPossition = 0;\n\n        //Organize data in group structure\n        for (var i = 0; i < resultRows.length; i++) {\n\n          var idWfClass = resultRows[i].idWfClass,\n          total = Number(resultRows[i].count);\n\n          if (idInsertedArr.indexOf(idWfClass) < 0) {\n\n            idInsertedArr.push(idWfClass);\n\n            resultArr[arrPossition] = {\n              wfClsDisplayName: resultRows[i].wfClsDisplayName,\n              idWfClass: resultRows[i].idWfClass,\n              childs: [{\n                idTask: resultRows[i].idTask,\n                tskDisplayName: resultRows[i].tskDisplayName,\n                count: resultRows[i].count }] };\n\n\n\n            for (var j = i + 1; j < resultRows.length; j++) {\n              if (idWfClass == resultRows[j].idWfClass) {\n                total += Number(resultRows[j].count);\n                resultArr[arrPossition].childs.push({\n                  idTask: resultRows[j].idTask,\n                  tskDisplayName: resultRows[j].tskDisplayName,\n                  count: resultRows[j].count });\n\n              }\n            }\n\n            resultArr[arrPossition].count = total;\n            arrPossition += 1;\n          }\n\n        }\n\n        //insert data into template and append it to the tab\n        var tab2Content = $.tmpl(self.tab2Tmpl, {\n          rows: resultArr,\n          selectedTab: self.selectedTab });\n\n\n        $(\"#async-tabs\", content).append(tab2Content);\n        self.setupTab2ActivitiesLink();\n\n      } else {\n        var tab2Content = $.tmpl(self.tab2Tmpl, {\n          rows: [],\n          selectedTab: self.selectedTab });\n\n        $(\"#async-tabs\", content).append(tab2Content);\n        $(\"#async-table-pager-wrapper\", tab2Content).append(bizagi.localization.getResource(\"workportal-general-no-records-found\"));\n        $(\"#async-table-pager-wrapper\", tab2Content).addClass(\"bz-empty-list\");\n      }\n\n\n\n    }).fail(function (error) {\n      bizagi.log(error);\n    });\n\n\n  },\n\n  /*\r\n      * Find async activities\r\n      */\n  renderTab3Table: function renderTab3Table(content, params, pageToShow) {\n    var self = this;\n    var tableWrapper = $(\"#main-screen\", content);\n\n    //If there is not a page to Show, begins whith the fist one\n    pageToShow ? params.page = pageToShow : params.page = 1;\n    $(\"#async-loading-activities\").show();\n    $.when(\n    self.dataService.getAsynchronousRpaJobs(params)).\n    done(function (resultList) {\n      $(\"#async-loading-activities\").hide();\n      //clean old results\n      $(\"#async-tabs-3\").remove();\n\n      //Keep in track the total Records\n      self.totalRecords = resultList.records;\n      //keep in track the total pages\n      self.totalPages = resultList.total;\n      self.asyncActRefresh();\n\n      var tab3Content = $.tmpl(self.tab3Tmpl, {\n        rows: resultList.rows,\n        selectedTab: self.selectedTab });\n\n      $(\"#async-tabs\", content).append(tab3Content);\n\n      if (resultList.rows.length) {\n\n\n        // Format invariant dates\n        bizagi.util.formatInvariantDate(tab3Content, self.getResource(\"dateFormat\") + \" \" + self.getResource(\"timeFormat\"));\n\n        self.setupTab3ActivitiesLink();\n        self.setupTab3ActionsButton();\n\n        var pageToshow = self.maxPageToShow > self.totalPages ? self.totalPages : self.maxPageToShow,\n        summaryWrapper = $(\"#async-table-pager-wrapper\", tab3Content),\n        pagerData = {},\n        paginationHtml;\n\n        // show or hide \"load more\" button\n        pagerData.pagination = self.totalPages > 1 ? true : false;\n        pagerData.page = resultList.page;\n        pagerData.pages = {};\n        pagerData.additionalparameters = true;\n        pagerData.totalPages = self.totalPages;\n        pagerData.totalRecords = self.totalRecords;\n\n        for (var i = 1; i <= pageToshow; i++) {\n          pagerData[\"pages\"][i] = {\n            \"pageNumber\": i };\n\n        }\n\n        //load and append the paginator to the result table\n        paginationHtml = $.tmpl(self.paginatorTmpl, pagerData).html();\n        summaryWrapper.append(paginationHtml);\n\n        //add data and behaviour to pager\n        $(\"ul\").bizagiPagination({\n          maxElemShow: self.maxElemShow,\n          totalPages: self.totalPages,\n          actualPage: resultList.page,\n          listElement: $(\".pager-content\", tableWrapper),\n          clickCallBack: function clickCallBack(options) {\n            self.renderTab3Table(content, params, options.page);\n          } });\n\n\n\n      } else {\n        $(\"#async-table-pager-wrapper\", tab3Content).append(bizagi.localization.getResource(\"workportal-general-no-records-found\"));\n        $(\"#async-table-pager-wrapper\", tab3Content).addClass(\"bz-empty-list\");\n      }\n\n\n\n    }).fail(function (error) {\n      bizagi.log(error);\n    });\n\n  },\n\n  /*\r\n      * Find rpa grouped activities\r\n      */\n  renderTab4Table: function renderTab4Table(content, params) {\n    var self = this;\n    $(\"#async-loading-activities\").show();\n    $.when(\n    self.dataService.getAsynchronousRpaJobsByTask(params)).\n    done(function (resultList) {\n      $(\"#async-loading-activities\").hide();\n      //clean old results\n      $(\"#async-tabs-4\").remove();\n\n      if (resultList.rows.length) {\n\n        var resultArr = [],\n        resultRows = resultList.rows,\n        idInsertedArr = [],\n        arrPossition = 0;\n\n        //Organize data in group structure\n        for (var i = 0; i < resultRows.length; i++) {\n\n          var idWfClass = resultRows[i].idWfClass,\n          total = Number(resultRows[i].count);\n\n          if (idInsertedArr.indexOf(idWfClass) < 0) {\n\n            idInsertedArr.push(idWfClass);\n\n            resultArr[arrPossition] = {\n              wfClsDisplayName: resultRows[i].wfClsDisplayName,\n              idWfClass: resultRows[i].idWfClass,\n              childs: [{\n                idTask: resultRows[i].idTask,\n                tskDisplayName: resultRows[i].tskDisplayName,\n                count: resultRows[i].count }] };\n\n\n\n            for (var j = i + 1; j < resultRows.length; j++) {\n              if (idWfClass == resultRows[j].idWfClass) {\n                total += Number(resultRows[j].count);\n                resultArr[arrPossition].childs.push({\n                  idTask: resultRows[j].idTask,\n                  tskDisplayName: resultRows[j].tskDisplayName,\n                  count: resultRows[j].count });\n\n              }\n            }\n\n            resultArr[arrPossition].count = total;\n            arrPossition += 1;\n          }\n\n        }\n\n        //insert data into template and append it to the tab\n        var tab4Content = $.tmpl(self.tab4Tmpl, {\n          rows: resultArr,\n          selectedTab: self.selectedTab });\n\n\n        $(\"#async-tabs\", content).append(tab4Content);\n        self.setupTab4ActivitiesLink();\n\n      } else {\n        var tab4Content = $.tmpl(self.tab4Tmpl, {\n          rows: [],\n          selectedTab: self.selectedTab });\n\n        $(\"#async-tabs\", content).append(tab4Content);\n        $(\"#async-table-pager-wrapper\", tab4Content).append(bizagi.localization.getResource(\"workportal-general-no-records-found\"));\n        $(\"#async-table-pager-wrapper\", tab4Content).addClass(\"bz-empty-list\");\n      }\n\n\n\n    }).fail(function (error) {\n      bizagi.log(error);\n    });\n\n\n  },\n\n\n  /*\r\n      * Execute retry\r\n      */\n  executeActivity: function executeActivity(params) {\n\n    var self = this,\n    errorMessage = \"\";\n\n    $.when(\n    self.dataService.asyncActivitiesServices(params)).\n    done(function (resultList) {\n\n\n      if (resultList.executed) {\n        var def = $.Deferred();\n\n        $.when(self.checkAsycnExecutionState(1, params.idCase, params.idAsynchWorkitem, def)).done(function () {\n          self.goToCase(params.idCase);\n        }).fail(function () {\n          errorMessage = bizagi.localization.getResource(\"workportal-widget-admin-asyncactivities-error-message\");\n          self.showErrorMessage(errorMessage);\n\n        });\n\n      } else {\n        errorMessage = bizagi.localization.getResource(\"workportal-widget-admin-asyncactivities-error-retry\");\n        self.showErrorMessage(errorMessage);\n      }\n\n    }).fail(function (e) {\n      bizagi.log(e);\n    });\n  },\n\n  /*\r\n      * Execute retry for RPA Job\r\n      */\n  retryRPAJob: function retryRPAJob(params) {\n    var self = this,\n    content = self.getContent(),\n    errorMessage = \"\";\n\n    $(\"#async-loading-activities\").show();\n    $.when(\n    self.dataService.retryRPAJob(params)).\n    done(function (resultList) {\n      $(\"#async-loading-activities\").hide();\n      if (resultList.executed) {\n        self.goToCase(params.idCase);\n      } else {\n        if (resultList.message) {\n          errorMessage = resultList.message;\n        } else {\n          errorMessage = bizagi.localization.getResource(\"workportal-widget-admin-asyncactivities-error-retry\");\n        }\n        self.showErrorMessage(errorMessage);\n      }\n\n    }).fail(function (e) {\n      $(\"#async-loading-activities\").hide();\n      bizagi.log(e);\n    });\n  },\n\n  /*\r\n      * Call server to know status of the activity (3 retries of 1 second each)\r\n      */\n  getRetryStatus: function getRetryStatus(counter, idCase, def) {\n    var self = this;\n    var params = {\n      action: \"getAsyncExecution\",\n      idCase: idCase };\n\n\n    setTimeout(function () {\n\n      $.when(\n      self.dataService.getAsynchExecutionState({\n        idCase: idCase,\n        idAsynchWorkitem: idAsynchWorkitem })).\n\n      done(function (response) {\n\n        if (response.status != \"error\") {\n          def.resolve();\n        }\n\n      }).fail(function (e) {\n        if (counter <= 3) {\n          counter += 1;\n          self.getRetryStatus(counter, idCase, idAsynchWorkitem, def);\n        } else {\n          def.reject();\n        }\n      });\n\n    }, 1000);\n\n    return def.promise();\n  },\n\n  /**\r\n      *  Check execution state every time is called\r\n      */\n  checkAsycnExecutionState: function checkAsycnExecutionState(counter, idCase, idAsynchWorkitem, def) {\n    var self = this,\n    content = self.getContent(),\n    mainScreen = $(\"#main-screen\", content),\n    dinamicScreen = $(\"#dinamic-screen\", content),\n    dinamiccontent = \"\",\n    wrapper = $(\"#ui-bizagi-wp-async-box\", content);\n\n    $.when(self.dataService.getAsynchExecutionState({\n      idCase: idCase,\n      idAsynchWorkitem: idAsynchWorkitem })).\n    done(function (response) {\n      var template = self.getTemplate(\"async\");\n\n      // verify errors in response\n      if (response.state == \"Error\" && typeof response.errorMessage == \"undefined\") {\n        // Change default error\n        response.errorMessage = bizagi.localization.getResource(\"render-async-error\");\n      }\n\n      // Render base template\n      dinamiccontent = $.tmpl(template, response);\n      mainScreen.hide();\n      dinamicScreen.html(\"\");\n      dinamicScreen.append(dinamiccontent);\n      $(\"#ui-bizagi-wp-async-box\", content).css({\n        \"top\": 0,\n        \"left\": 0,\n        \"margin-top\": 0,\n        \"margin-left\": 0,\n        \"padding-top\": 0,\n        \"margin-right\": 0,\n        \"width\": \"96%\",\n        \"max-height\": \"80\",\n        \"height\": \"80\" });\n\n\n      self.setupErrorPageLink($(\"#link-go-to-inbox\").find(\"a\"));\n      $(\"#link-back\").css(\"display\", \"inline\");\n      self.setupBackToMainPage();\n\n      // Check for finish signal\n      if (response.state == \"Processing\") {\n        // Check for non-error message\n        if (response.errorMessage.length == 0) {\n          setTimeout(function () {\n            // Refresh widget after a timer\n            counter += 1;\n            self.checkAsycnExecutionState(counter, idCase, idAsynchWorkitem, def);\n\n          }, self.Class.ASYNC_CHECK_TIMER);\n        }\n\n      } else if (response.state == \"Finished\") {\n\n        // Resolve main deferred\n        def.resolve(self.content);\n      }\n\n\n    });\n\n    return def.promise();\n  },\n\n  /*\r\n      * Show log page\r\n      */\n  showLog: function showLog(params, data, pageToShow) {\n    var self = this,\n    content = self.getContent();\n\n    //If there is not a page to Show, begins whith the fist one\n    pageToShow ? params.page = pageToShow : params.page = 1;\n\n    $.when(\n    self.dataService.asyncActivitiesServices(params)).\n    done(function (resultList) {\n\n\n\n      //Keep in track the total Records\n      self.totalRecords = resultList.records;\n      //keep in track the total pages\n      self.totalPages = resultList.total;\n\n      if (resultList.response.length) {\n\n        var logPage = $.tmpl(self.logTmpl, {\n          rows: resultList.response,\n          data: data });\n\n\n        // Format invariant dates\n        bizagi.util.formatInvariantDate(logPage, self.getResource(\"dateFormat\") + \" \" + self.getResource(\"timeFormat\"));\n\n        $(\"#dinamic-screen\", content).html(\"\");\n        $(\"#dinamic-screen\", content).append(logPage);\n        self.setupLogButtons();\n\n        var pageToshow = self.maxPageToShow > self.totalPages ? self.totalPages : self.maxPageToShow,\n        summaryWrapper = $(\"#log-table-pager-wrapper\"),\n        pagerData = {},\n        paginationHtml;\n\n        // show or hide \"load more\" button\n        pagerData.pagination = self.totalPages > 1 ? true : false;\n        pagerData.page = resultList.page;\n        pagerData.pages = {};\n        pagerData.additionalparameters = true;\n        pagerData.totalPages = self.totalPages;\n        pagerData.totalRecords = self.totalRecords;\n\n        for (var i = 1; i <= pageToshow; i++) {\n          pagerData[\"pages\"][i] = {\n            \"pageNumber\": i };\n\n        }\n\n        //load and append the paginator to the result table\n        paginationHtml = $.tmpl(self.paginatorTmpl, pagerData).html();\n        summaryWrapper.append(paginationHtml);\n\n        //add data and behaviour to pager\n        $(\"ul\", summaryWrapper).bizagiPagination({\n          maxElemShow: self.maxElemShow,\n          totalPages: self.totalPages,\n          actualPage: resultList.page,\n          listElement: $(\".pager-content\", summaryWrapper),\n          clickCallBack: function clickCallBack(options) {\n            self.showLog(params, data, options.page);\n          } });\n\n      } else {\n        bizagi.showMessageBox(\n        bizagi.localization.getResource(\"workportal-general-no-records-found\"),\n        \"Bizagi\",\n        \"warning\").\n\n        then(function () {\n          $(\"#generalTitle\", content).html(bizagi.localization.getResource(\"workportal-widget-admin-asyncactivities-subtitle\"));\n          $('#main-screen', content).show();\n        });\n      }\n\n    }).fail(function (e) {\n      bizagi.log(e);\n      $(\"#generalTitle\", content).html(bizagi.localization.getResource(\"workportal-widget-admin-asyncactivities-subtitle\"));\n      $('#main-screen', content).show();\n    });\n\n\n  },\n\n  /*\r\n      * Show log page\r\n      */\n  showLogRPA: function showLogRPA(params, data, pageToShow) {\n    var self = this,\n    content = self.getContent();\n\n    //If there is not a page to Show, begins whith the fist one\n    pageToShow ? params.page = pageToShow : params.page = 1;\n\n    $.when(\n    self.dataService.getRPAActivityLog(params)).\n    done(function (resultList) {\n\n      //Keep in track the total Records\n      self.totalRecords = resultList.records;\n      //keep in track the total pages\n      self.totalPages = resultList.total;\n\n      if (resultList.response.length) {\n\n        var logPage = $.tmpl(self.rpalogTmpl, {\n          rows: resultList.response,\n          data: data });\n\n\n        // Format invariant dates\n        bizagi.util.formatInvariantDate(logPage, self.getResource(\"dateFormat\") + \" \" + self.getResource(\"timeFormat\"));\n\n        $(\"#dinamic-screen\", content).html(\"\");\n        $(\"#dinamic-screen\", content).append(logPage);\n        self.setupLogButtons();\n\n        var pageToshow = self.maxPageToShow > self.totalPages ? self.totalPages : self.maxPageToShow,\n        summaryWrapper = $(\"#log-table-pager-wrapper\"),\n        pagerData = {},\n        paginationHtml;\n\n        // show or hide \"load more\" button\n        pagerData.pagination = self.totalPages > 1 ? true : false;\n        pagerData.page = resultList.page;\n        pagerData.pages = {};\n        pagerData.additionalparameters = true;\n        pagerData.totalPages = self.totalPages;\n        pagerData.totalRecords = self.totalRecords;\n\n        for (var i = 1; i <= pageToshow; i++) {\n          pagerData[\"pages\"][i] = {\n            \"pageNumber\": i };\n\n        }\n\n        //load and append the paginator to the result table\n        paginationHtml = $.tmpl(self.paginatorTmpl, pagerData).html();\n        summaryWrapper.append(paginationHtml);\n\n        //add data and behaviour to pager\n        $(\"ul\", summaryWrapper).bizagiPagination({\n          maxElemShow: self.maxElemShow,\n          totalPages: self.totalPages,\n          actualPage: resultList.page,\n          listElement: $(\".pager-content\", summaryWrapper),\n          clickCallBack: function clickCallBack(options) {\n            self.showLogRPA(params, data, options.page);\n          } });\n\n      } else {\n        bizagi.showMessageBox(\n        bizagi.localization.getResource(\"workportal-general-no-records-found\"),\n        \"Bizagi\",\n        \"warning\").\n\n        then(function () {\n          $(\"#generalTitle\", content).html(bizagi.localization.getResource(\"workportal-widget-admin-rpaactivities-subtitle\"));\n          $('#main-screen', content).show();\n        });\n      }\n\n    }).fail(function (e) {\n      bizagi.log(e);\n      $(\"#generalTitle\", content).html(bizagi.localization.getResource(\"workportal-widget-admin-rpaactivities-subtitle\"));\n      $('#main-screen', content).show();\n    });\n\n\n  },\n\n  /*\r\n      * Enable links on grouped tab\r\n      */\n  enableActivities: function enableActivities(processId, taskId) {\n    var self = this;\n    var params = {\n      action: \"enableExecution\",\n      idTask: taskId,\n      idWfClass: processId };\n\n\n    $.when(\n    self.dataService.asyncActivitiesServices(params)).\n    done(function (resultList) {\n      self.setupData();\n    }).fail(function (e) {\n      bizagi.showMessageBox(bizagi.localization.getResource(\"workportal-widget-admin-asyncactivities-error-enable\"), \"Bizagi\", \"warning\");\n    });\n  },\n\n  enableMultipleActivities: function enableMultipleActivities(cases) {\n    var self = this;\n    var params = {\n      action: \"enableMultiple\",\n      cases: JSON.stringify(cases) };\n\n\n    $.when(\n    self.dataService.asyncActivitiesServices(params)).\n    done(function (resultList) {\n      if (resultList.executed) {\n        self.setupData();\n      } else {\n        bizagi.showMessageBox(bizagi.localization.getResource(\"workportal-widget-admin-asyncactivities-error-enable\"), \"Bizagi\", \"warning\");\n      }\n    }).fail(function (e) {\n      bizagi.showMessageBox(bizagi.localization.getResource(\"workportal-widget-admin-asyncactivities-error-enable\"), \"Bizagi\", \"warning\");\n    });\n  },\n\n  enableRPAActivities: function enableRPAActivities(processId, taskId) {\n    var self = this;\n    var params = {\n      idTask: taskId,\n      idWfClass: processId };\n\n\n    $.when(\n    self.dataService.enableRPAJobsByTaskAndProcess(params)).\n    done(function () {\n      self.setupData();\n    }).fail(function (e) {\n      bizagi.showMessageBox(bizagi.localization.getResource(\"workportal-widget-admin-asyncactivities-error-enable\"), \"Bizagi\", \"warning\");\n    });\n  },\n\n\n  enableMultipleRPAActivities: function enableMultipleRPAActivities(jobs) {\n    var self = this;\n\n    var params = {\n      jobs: JSON.stringify(jobs) };\n\n\n    $.when(\n    self.dataService.enableMultipleRPAJobs(params)).\n    done(function (resultList) {\n      if (resultList.executed) {\n        self.setupData();\n      } else {\n        bizagi.showMessageBox(bizagi.localization.getResource(\"workportal-widget-admin-asyncactivities-error-enable\"), \"Bizagi\", \"warning\");\n      }\n    }).fail(function (e) {\n      bizagi.showMessageBox(bizagi.localization.getResource(\"workportal-widget-admin-asyncactivities-error-enable\"), \"Bizagi\", \"warning\");\n    });\n  },\n\n  goToCase: function goToCase(idCase) {\n    var self = this;\n\n    self.publish(\"executeAction\", {\n      action: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,\n      idCase: idCase,\n      idWorkItem: \"\",\n      idTask: \"\" });\n\n    self.publish(\"closeCurrentDialog\");\n  },\n\n  /**\r\n      * Add click to tabs for loading\r\n      */\n  asyncActRefresh: function asyncActRefresh() {\n    var self = this,\n    content = self.getContent();\n    $(\"#async-act-refresh-link\", content).unbind();\n    $(\"#async-act-refresh-link\", content).click(function (e) {\n      self.setupData();\n      if (self.selectedTab) {\n        $('#async-tabs li:eq(' + self.selectedTab + ') a').click();\n      }\n    });\n  },\n\n  //******************************** EVENTS ********************************//\n\n  /*\r\n   * Implement main buttons behaviour\r\n   */\n  setupActionsButton: function setupActionsButton() {\n    var self = this,\n    content = self.getContent(),\n    buttons = $.tmpl(self.buttonContentTmpl, {});\n\n    content.append(buttons);\n\n    self.asyncActRefresh(content);\n\n    $(\".async-act-log-link\", content).click(function (e) {\n\n      var paramsLog = {\n        action: \"asyncExecutionLog\",\n        idCase: this.getAttribute(\"data-idCase\"),\n        idWorkItem: this.getAttribute(\"data-idWorkItem\"),\n        pageSize: self.maxElemShow,\n        idAsynchWorkitem: this.getAttribute(\"data-idAsynchWorkitem\") };\n\n      var data = {\n        idCase: this.getAttribute(\"data-idCase\"),\n        radNumber: this.getAttribute(\"data-radNumber\"),\n        taskName: this.getAttribute(\"data-taskName\"),\n        processName: this.getAttribute(\"data-processName\") };\n\n\n      $(\"#generalTitle\").html(bizagi.localization.getResource(\"workportal-widget-admin-asyncactivities-activitieslog\"));\n      $(\"#main-screen\", content).hide();\n\n      self.showLog(paramsLog, data);\n\n    });\n\n    $(\".async-act-retry-link\", content).click(function (e) {\n\n      var params = {\n        action: \"retryNow\",\n        idCase: this.getAttribute(\"data-idCase\"),\n        idWorkitem: this.getAttribute(\"data-idWorkItem\"),\n        processName: this.getAttribute(\"data-processName\"),\n        idAsynchWorkitem: this.getAttribute(\"data-idAsynchWorkitem\"),\n        taskName: this.getAttribute(\"data-taskName\") };\n\n\n      self.executeActivity(params);\n\n    });\n\n    $(\"#async-act-enable-checks\", content).click(function () {\n      var checkboxes = document.getElementsByName('enableChecks');\n      var vals = {\n        cases: [] };\n\n      for (var i = 0, n = checkboxes.length; i < n; i++) {\n        if (checkboxes[i].checked) {\n          var idCase = checkboxes[i].value;\n          var idWorkItem = checkboxes[i].getAttribute(\"data-idWorkItem\");\n          var idAsynchWorkitem = checkboxes[i].getAttribute(\"data-idAsynchWorkitem\");\n          var idAsynchWorkitem = checkboxes[i].getAttribute(\"data-idAsynchWorkitem\");\n          vals.cases.push({\n            idCase: idCase,\n            idWorkItem: idWorkItem,\n            idAsynchWorkitem: idAsynchWorkitem });\n\n        }\n      }\n      self.enableMultipleActivities(vals);\n    });\n  },\n\n\n  /*\r\n      * Implement main buttons behaviour\r\n      */\n  setupTab3ActionsButton: function setupTab3ActionsButton() {\n    var self = this,\n    content = self.getContent(),\n    buttons = $.tmpl(self.buttonContentTmpl, {});\n\n    content.append(buttons);\n\n    self.asyncActRefresh(content);\n\n    $(\".async-rpa-log-link\", content).click(function (e) {\n\n      var paramsLog = {\n        action: \"asyncExecutionLog\",\n        idCase: this.getAttribute(\"data-idCase\"),\n        idWorkItem: this.getAttribute(\"data-idWorkItem\"),\n        pageSize: self.maxElemShow,\n        idJob: this.getAttribute(\"data-idJob\") };\n\n      var data = {\n        idCase: this.getAttribute(\"data-idCase\"),\n        radNumber: this.getAttribute(\"data-radNumber\"),\n        taskName: this.getAttribute(\"data-taskName\"),\n        processName: this.getAttribute(\"data-processName\") };\n\n\n      $(\"#generalTitle\").html(bizagi.localization.getResource(\"workportal-widget-admin-rpaactivities-activitieslog\"));\n      $(\"#main-screen\", content).hide();\n\n      self.showLogRPA(paramsLog, data);\n    });\n\n    $(\".async-rpa-retry-link\", content).click(function (e) {\n      var params = {\n        idJob: this.getAttribute(\"data-idJob\"),\n        idCase: this.getAttribute(\"data-idCase\") };\n\n\n      self.retryRPAJob(params);\n    });\n\n    $(\"#rpaactivity-enable-checks\", content).click(function () {\n      var checkboxes = document.getElementsByName('enableChecks');\n      var jobs = [];\n      for (var i = 0, n = checkboxes.length; i < n; i++) {\n        if (checkboxes[i].checked) {\n          var idJob = checkboxes[i].getAttribute(\"data-idJob\");\n          jobs.push(Number(idJob));\n        }\n      }\n      self.enableMultipleRPAActivities(jobs);\n    });\n  },\n\n  /*\r\n      * back button\r\n      */\n  setupLogButtons: function setupLogButtons() {\n    var self = this,\n    content = self.getContent();\n\n    $(\"#async-act-button-back\", content).click(function (e) {\n      $(\"#generalTitle\").html(bizagi.localization.getResource(\"workportal-widget-admin-asyncactivities-subtitle\"));\n      $(\"#main-screen\", content).show();\n      $(\"#dinamic-screen\", content).html(\"\");\n    });\n  },\n\n  /*\r\n      * Manage cases table links events(cases and activities)\r\n      */\n  setupTab1ActivitiesLink: function setupTab1ActivitiesLink(content) {\n    var self = this;\n\n    // Add click event to task (Activity) link\n    $(\".async-activity-click\", content).click(function () {\n      self.goToCase($(this)[0].getAttribute(\"data-idCase\"));\n    });\n\n  },\n\n  /*\r\n      * Manage grouped tab events\r\n      */\n  setupTab2ActivitiesLink: function setupTab2ActivitiesLink(content) {\n    var self = this;\n\n    $(\".async-act-process-tree-link\", content).click(function () {\n\n      if ($(\"div\", this).hasClass(\"biz-wp-tree-expand-icon\")) {\n        $(\"div\", this).removeClass(\"biz-wp-tree-expand-icon\");\n        $(\"div\", this).addClass(\"biz-wp-tree-collapse-icon\");\n        $(this).closest(\"tr\").find(\".async-act-childs\").css(\"display\", \"block\");\n        $(this).closest(\"tr\").find(\".async-act-childs\").addClass(\"clearfix\");\n      } else {\n        $(\"div\", this).removeClass(\"biz-wp-tree-collapse-icon\");\n        $(\"div\", this).addClass(\"biz-wp-tree-expand-icon\");\n        $(this).closest(\"tr\").find(\".async-act-childs\").css(\"display\", \"none\");\n        $(this).closest(\"tr\").find(\".async-act-childs\").removeClass(\"clearfix\");\n      }\n    });\n\n    $(\".async-act-enable-link\").click(function () {\n      var processId = this.getAttribute(\"data-idWfClass\");\n      var taskId = this.getAttribute(\"data-idTask\") ? this.getAttribute(\"data-idTask\") : 0;\n      self.enableActivities(processId, taskId);\n    });\n\n  },\n\n  /*\r\n      * Manage cases table links events(cases and activities)\r\n      */\n  setupTab3ActivitiesLink: function setupTab3ActivitiesLink(content) {\n    var self = this;\n\n    // Add click event to task (Activity) link\n    $(\".async-rpaactivity-click\", content).click(function () {\n      self.goToCase($(this)[0].getAttribute(\"data-idCase\"));\n    });\n\n  },\n\n\n  /*\r\n      * Manage grouped tab rpa events\r\n      */\n  setupTab4ActivitiesLink: function setupTab4ActivitiesLink(content) {\n    var self = this;\n\n    $(\".async-rpa-process-tree-link\", content).click(function () {\n\n      if ($(\"div\", this).hasClass(\"biz-wp-tree-expand-icon\")) {\n        $(\"div\", this).removeClass(\"biz-wp-tree-expand-icon\");\n        $(\"div\", this).addClass(\"biz-wp-tree-collapse-icon\");\n        $(this).closest(\"tr\").find(\".async-rpa-childs\").css(\"display\", \"block\");\n        $(this).closest(\"tr\").find(\".async-rpa-childs\").addClass(\"clearfix\");\n      } else {\n        $(\"div\", this).removeClass(\"biz-wp-tree-collapse-icon\");\n        $(\"div\", this).addClass(\"biz-wp-tree-expand-icon\");\n        $(this).closest(\"tr\").find(\".async-rpa-childs\").css(\"display\", \"none\");\n        $(this).closest(\"tr\").find(\".async-rpa-childs\").removeClass(\"clearfix\");\n      }\n    });\n\n    $(\".async-rpa-enable-link\").click(function () {\n      var processId = this.getAttribute(\"data-idWfClass\");\n      var taskId = this.getAttribute(\"data-idTask\") ? this.getAttribute(\"data-idTask\") : 0;\n      self.enableRPAActivities(processId, taskId);\n    });\n\n  },\n\n  /*\r\n      * manage go to pending event\r\n      */\n  setupErrorPageLink: function setupErrorPageLink(selector) {\n    var self = this;\n\n    $(selector).click(function () {\n\n      self.closeErrorMessage();\n      var inbox = bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX;\n      var grid = bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID;\n      var actualWidget;\n      var storeWidget = $.isFunction(bizagi.cookie) ? bizagi.util.defaultWidget() : grid;\n\n      switch (storeWidget) {\n        case inbox:\n          actualWidget = inbox;\n          break;\n\n        case grid:\n          actualWidget = grid;\n          break;\n        default:\n          actualWidget = grid;\n          break;}\n\n\n\n      self.publish(\"changeWidget\", {\n        widgetName: actualWidget });\n\n\n      self.publish(\"closeCurrentDialog\");\n\n    });\n  },\n\n  /*\r\n      * manage back link\r\n      */\n  setupBackToMainPage: function setupBackToMainPage() {\n    var self = this,\n    content = self.getContent(),\n    wrapper = $(\"#ui-bizagi-wp-async-box\", content);\n\n    $(\"#link-back\", wrapper).click(function () {\n      self.setupData();\n    });\n  },\n\n  showErrorMessage: function showErrorMessage(message) {\n    var self = this;\n    content = self.getContent(),\n    dinamicScreen = $(\"#dinamic-screen\", content);\n\n    // Render Error\n    dinamiccontent = $.tmpl(self.errorPage, {\n      errorMessage: message });\n\n    dinamicScreen.html(\"\");\n    dinamicScreen.append(dinamiccontent);\n\n    self.setupErrorPageLink(\"#go-to-pending\");\n\n    dinamicScreen.dialog({\n      resizable: false,\n      draggable: false,\n      height: \"auto\",\n      width: \"600px\",\n      modal: true,\n      title: self.getResource(\"confirmation-box-title\"),\n      maximize: false,\n      close: function close() {\n        self.closeErrorMessage();\n      },\n      buttons: [{\n        text: self.getResource(\"workportal-general-button-label-ok\"),\n        click: function click() {\n          self.closeErrorMessage();\n        } }] });\n\n\n    self.errorDialog = dinamicScreen;\n  },\n\n  closeErrorMessage: function closeErrorMessage() {\n    var self = this,\n    content = self.getContent(),\n    dinamicScreen = $(\"#dinamic-screen\", content);\n\n    if (self.errorDialog) {\n      self.errorDialog.dialog(\"destroy\");\n      $(\"#dinamic-screen\", content).html(\"\");\n      self.errorDialog = null;\n    }\n  } });","/*\r\n*   Name: BizAgi Workportal Graphic Query Widget\r\n*   Author: David Romero\r\n*   Comments:\r\n*   -   This script renders the user administration\r\n*/\n\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.admin.usersAdministration\", {}, {\n\n\n\n  init: function init(workportalFacade, dataService, params) {\n\n    var self = this;\n\n    //Pagination data\n    self.maxRows = 18;\n    self.maxPages = 10;\n    self.currentPage = 1;\n    self.orderType = \"ASC\";\n    self.orderField = \"\";\n    self.totalPages = 0;\n    self.userData = {};\n    self.allowCreation = true;\n\n    self.userLinks = [\n    {\n      name: \"downloadReport\",\n      label: bizagi.localization.getResource(\"workportal-gdpr-download-report\"),\n      icon: \"icon-download-report-user\",\n      typeSVG: true },\n\n    {\n      name: \"anonymize\",\n      label: bizagi.localization.getResource(\"workportal-gdpr-anonymize\"),\n      icon: \"icon-anonymize\",\n      typeSVG: true },\n\n    {\n      name: \"edition\",\n      label: bizagi.localization.getResource(\"bz-rp-components-dimension-edit\"),\n      icon: \"bz-icon-pencil-outline\",\n      typeSVG: false },\n\n    {\n      name: \"log\",\n      label: bizagi.localization.getResource(\"render-actions-log\"),\n      icon: \"bz-icon-log-outline\",\n      typeSVG: false }];\n\n\n\n    self._super(workportalFacade, dataService, params);\n\n    //Load templates\n    self.loadTemplates({\n      \"admin.users\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.admin.usersAdministration\").concat(\"#ui-bizagi-workportal-widget-admin-users\"),\n      \"admin.users.formbuttons\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.admin.usersAdministration\").concat(\"#ui-bizagi-workportal-widget-admin-users-formbuttons\"),\n      \"admin.users.log\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.admin.usersAdministration\").concat(\"#ui-bizagi-workportal-widget-admin-users-log\"),\n      \"admin.users.licenses\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.admin.usersAdministration\").concat(\"#ui-bizagi-workportal-widget-admin-users-licenses\"),\n      \"admin.users.email\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.admin.usersAdministration\").concat(\"#ui-bizagi-workportal-widget-admin-users-email\"),\n      \"admin.users.anonymize\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.admin.usersAdministration\").concat(\"#ui-bizagi-workportal-widget-admin-users-anonymize\"),\n      \"admin.search.cases\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.admin.cases\").concat(\"#ui-bizagi-workportal-widget-admin-search-cases\"),\n      \"admin.search.users\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.admin.cases\").concat(\"#ui-bizagi-workportal-widget-admin-search-users\"),\n      \"admin.table.users\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.admin.cases\").concat(\"#ui-bizagi-workportal-widget-admin-table-users\"),\n      useNewEngine: false });\n\n  },\n\n  /*\r\n     *   Returns the widget name\r\n     */\n  getWidgetName: function getWidgetName() {\n    return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_USERS_ADMINISTRATION;\n  },\n\n  /*\r\n     *   Renders the content for the current controller\r\n     *   Returns a deferred because it has to load the current user\r\n     */\n  renderContent: function renderContent() {\n\n    var self = this;\n    var tmpl = self.getTemplate(\"admin.users\");\n    var content = self.content = $.tmpl(tmpl);\n\n    return content;\n  } });","/**\r\n * Name: Bizagi Workportal Users Modal\r\n */\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.desktop.widgets.admin.userPermissionReport\", {}, {\n  /**\r\n                                                                                                               * Constructor\r\n                                                                                                               */\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n    //Load template\n    self.loadTemplates({\n      \"user-permission-report\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.admin.userPermissionReport\").concat(\"#user-permission-report\") });\n\n  },\n\n  renderContent: function renderContent() {\n    var self = this;\n    var template = self.getTemplate('user-permission-report');\n    self.content = template.render({});\n    return self.content;\n  },\n\n  postRender: function postRender() {\n    var self = this;\n    $(\"#downloadButtonActive\", self.getContent()).click(function () {\n      self.dataService.getUserPermissionsExcel(true);\n    });\n    $(\"#downloadButtonInactive\", self.getContent()).click(function () {\n      self.dataService.getUserPermissionsExcel(false);\n    });\n  } });\n\n\n\nbizagi.injector.register('bizagi.workportal.desktop.widgets.admin.userPermissionReport', ['workportalFacade', 'dataService', bizagi.workportal.desktop.widgets.admin.userPermissionReport]);","/*\r\n*   Name: BizAgi Workportal Users Delegation\r\n*   Author: Ivan Ricardo Taimal\r\n*   Comments:\r\n*   -   This script renders the user delegation\r\n*/\n\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.admin.usersDelegation\", {}, {\n\n  init: function init(workportalFacade, dataService, params) {\n\n    var self = this;\n\n    self._super(workportalFacade, dataService, params);\n\n    //Load templates\n    self.loadTemplates({\n      \"admin.userdelegation\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.admin.usersDelegation\").concat(\"#ui-bizagi-workportal-widget-admin-userdelegation\"),\n      \"admin.userdelegationListTmpl\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.admin.usersDelegation\").concat(\"#bz-wp-widget-userdelegation-configurations-tmpl\"),\n      \"admin.userdelegationDeleteConfirmationTmpl\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.admin.usersDelegation\").concat(\"#bz-wp-widget-userdelegation-delete-confirmation-tmpl\"),\n      \"admin.userdelegationFormTmpl\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.admin.usersDelegation\").concat(\"#bz-wp-widget-userdelegation-form-tmpl\"),\n      \"admin.userdelegationEmptyMessageTmpl\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.admin.usersDelegation\").concat(\"#bz-wp-widget-userdelegation-configurations-message-tmpl\"),\n      useNewEngine: false });\n\n  },\n\n  /*\r\n     *   Returns the widget name\r\n     */\n  getWidgetName: function getWidgetName() {\n    return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_USERS_DELEGATION;\n  },\n\n  /*\r\n     *   Renders the content for the current controller\r\n     *   Returns a deferred because it has to load the current user\r\n     */\n  renderContent: function renderContent() {\n    var self = this;\n    var tmpl = self.getTemplate(\"admin.userdelegation\");\n    var content = self.content = $.tmpl(tmpl);\n    return content;\n  } });","/**\r\n* usersDelegation search users\r\n*\r\n* @author Ivan Ricardo Taimal\r\n*/\n\n\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.admin.usersDelegation.searchUser\", {}, {\n\n  /*\r\n                                                                                                            *   Returns the widget name\r\n                                                                                                            */\n  getWidgetName: function getWidgetName() {\n    return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_USERS_DELEGATION_SEARCH_USER;\n  },\n\n  /*\r\n     *   Renders the content for the current controller\r\n     */\n  renderContent: function renderContent() {},\n\n  /*\r\n                                              * childs will implement this method\r\n                                              */\n  loadtemplates: function loadtemplates() {} });","\n/**\r\n *   Name: BizAgi Workportal Users Delegation\r\n *   Author: Ivan Ricardo Taimal\r\n *   Comments:\r\n *   -   This script renders the users delegate per process\r\n */\nbizagi.workportal.widgets.admin.usersDelegation.extend(\"bizagi.workportal.widgets.admin.usersDelegation\", {}, {\n\n  /**\r\n                                                                                                                 * To be overriden in each device to apply layouts\r\n                                                                                                                 */\n  postRender: function postRender() {\n    var self = this;\n    self.maxPages = 10;\n    self.maxRows = 10;\n    self.currentPage = 1;\n    self.showTable = true;\n    self.orderType = \"ASC\";\n    self.orderField = \"\";\n    self.dateFormat = self.getResource(\"dateFormat\") + \" \" + self.getResource(\"timeFormat\");\n    self.$delegationFormWrapper = $(\"#widget-userdelegation__form-wrapper\", self.content);\n    self.$DelegationListWrapper = $(\"#widget-userdelegation__configurations-wrapper\", self.content);\n\n    self.tableHeaders = [\n    {\n      \"displayName\": self.getResource(\"workportal-widget-userdelegation-process\"),\n      \"fieldValue\": \"processName\" },\n\n    {\n      \"displayName\": self.getResource(\"workportal-widget-userdelegation-username\"),\n      \"fieldValue\": \"userName\" },\n\n    {\n      \"displayName\": self.getResource(\"workportal-widget-userdelegation-delegatedname\"),\n      \"fieldValue\": \"delegatedName\" },\n\n    {\n      \"displayName\": self.getResource(\"workportal-widget-userdelegation-init-date\"),\n      \"fieldValue\": \"startDate\" },\n\n    {\n      \"displayName\": self.getResource(\"workportal-widget-userdelegation-end-date\"),\n      \"fieldValue\": \"endDate\" }];\n\n\n\n    self.renderDelegationForm(); // >> 1\n    self.initDelegationTable(); //  >> 3\n    self.addEventsHandler(); // >> 4\n\n  },\n\n  /** >> 1\r\n      * renderDelegationForm\r\n      */\n  renderDelegationForm: function renderDelegationForm() {\n    var self = this;\n    var userdelegationFormTmpl = self.getTemplate(\"admin.userdelegationFormTmpl\");\n\n    $.tmpl(userdelegationFormTmpl, { currentUser: \"TestUser\" }).appendTo(self.$delegationFormWrapper);\n\n    var startDateWrapper = $(\"#widget-userdelegation__start-date\", self.content);\n    var endDateWrapper = $(\"#widget-userdelegation__end-date\", self.content);\n    var today = new Date();\n    startDateWrapper.datepicker({ minDate: today });\n    endDateWrapper.datepicker({ minDate: today });\n    self.configureProcessCombo();\n\n    $(\"#widget-userdelegation__start-date-btn\", self.content).click(function () {\n      startDateWrapper.datepicker(\"show\");\n    });\n    $(\"#widget-userdelegation__end-date-btn\", self.content).click(function () {\n      endDateWrapper.datepicker(\"show\");\n    });\n\n  },\n\n  // >> 1.1\n  configureProcessCombo: function configureProcessCombo() {\n    var self = this;\n    var params = {\n      idUser: bizagi.currentUser.idUser };\n\n    $.when(self.dataService.getProcessToDelegate(params)).done(function (response) {\n      var processComboWrapper = $(\".widget-userdelegation__delegated-process-combo-wrapper\", self.content);\n      var comboDataSource = { combo: [], id: \"widget-userdelegation__process-to-delegate-combo\" };\n      comboDataSource.combo = comboDataSource.combo.concat(response.process);\n      processComboWrapper.empty();\n      self.processComponent = self.setupMultiselector(processComboWrapper, response.process);\n    });\n  },\n\n  /** >> 1.1.1\r\n      * Multiselector\r\n      */\n\n  setupMultiselector: function setupMultiselector(element, options) {\n    var self = this;\n    var component = {\n      options: options,\n      element: element,\n      values: [] };\n\n\n    element.uicombo({\n      data: { combo: options },\n      isEditable: true,\n      isSearchable: true,\n      initValue: \"tetetet\",\n      itemValue: function itemValue(item) {\n        return item.id;\n      },\n      itemText: function itemText(item) {\n        return item.displayName;\n      },\n      onComplete: function onComplete() {\n        var msgPlaceholder = bizagi.localization.getResource(\"workportal-widget-userdelegation-please-select-your-process\");\n        $(\".biz-wp-combo-input\", element).addClass(\"widget-user-delegation__multiselector-input\");\n        $(\".biz-wp-combo-input\").attr(\"placeholder\", msgPlaceholder);\n        element.prepend('<div class=\"widget-user-delegation__multiselector\"></div>');\n      },\n      onComboDropDown: function onComboDropDown() {\n        self.markChoicesMultiselector(component);\n      },\n      onChange: function onChange(obj) {\n        var inputText = obj.ui.val() || \"\";\n        var value = obj.ui.data(\"value\");\n        self.filterOptionsMultiselector(component, inputText);\n        self.addChoiceMultiselector(component, value, true);\n      } });\n\n\n    return component;\n  },\n\n  // >> 1.1.1.1\n  markChoicesMultiselector: function markChoicesMultiselector(component) {\n    $(\"li\", component.element).removeClass(\"widget-user-delegation__multiselector__option--selected\");\n    $(\"li\", component.element).prepend('<i class=\"widget-user-delegation__multiselector__option__icon\"></i>');\n    $.each(component.values, function (index, value) {\n      $('li[data-value=\"' + value + '\"]', component.element).addClass(\"widget-user-delegation__multiselector__option--selected\");\n    });\n  },\n\n  // >> 1.1.1.2\n  filterOptionsMultiselector: function filterOptionsMultiselector(component, inputText) {\n    var matches = component.options.filter(function (item) {\n      return item.displayName.toLowerCase().indexOf(inputText.toLowerCase()) == 0;\n    });\n    $(\"li\", component.element).hide();\n    $.each(matches, function (index, item) {\n      $('li[data-value=\"' + item.id + '\"]', component.element).show();\n    });\n  },\n\n  // >> 1.1.1.3\n  addChoiceMultiselector: function addChoiceMultiselector(component, value, editable) {\n    if (value) {\n      // var selectedOption = component.options.filter(function (item) {\n      var selectedOption = component.options.find(function (item) {\n        return item.id == value;\n        // })[0];\n      });\n      var displayName = selectedOption.displayName;\n      if (component.values.indexOf(value + \"\") === -1) {\n        var itemBody = '<div class=\"widget-user-delegation__multiselector__item\" data-value =' + value + \">\" + displayName + ' | <i class=\"widget-user-delegation__multiselector__item-clear-btn bz-icon bz-icon-close\"></i></div>';\n        $(\".widget-user-delegation__multiselector\", component.element).append(itemBody);\n        $(\".biz-wp-combo-input\", component.element).css({ \"box-shadow\": \"none\" });\n        $(\".widget-user-delegation__multiselector-input\", component.element).val(\"\");\n        component.values.push(value + \"\");\n\n        if (editable) {\n          $(\".widget-user-delegation__multiselector__item-clear-btn\", component.element).click(function () {\n            var itemToDelete = $(this).parent();\n            var indexToRemove = component.values.indexOf(itemToDelete.data().value + \"\");\n            if (indexToRemove >= 0) {\n              component.values.splice(indexToRemove, 1);\n              itemToDelete.remove();\n              if (component.values.length && component.values.length < 1) {\n                $(\".biz-wp-combo\", component.element).show();\n              }\n            }\n          });\n        }\n      }\n    }\n  },\n\n  /** >> 3\r\n      * Query Delegations\r\n      */\n  initDelegationTable: function initDelegationTable(filterData) {\n    var self = this;\n    var params = filterData || {\n      pag: 1,\n      pagSize: self.maxRows };\n\n    params.idUser = bizagi.currentUser.idUser;\n\n    var userdelegationListTmpl = self.getTemplate(\"admin.userdelegationListTmpl\");\n\n    self.$DelegationListWrapper.html(\"\");\n    $.when(self.dataService.queryDelegations(params)).done(function (response) {\n      //render delegations table widget\n      if (response.delegations.length > 0) {\n\n        var pagination = response.records > 1 ? true : false;\n        var totalPages = Math.ceil(response.records / self.maxRows);\n        var pagesArray = self.getPagesArray(totalPages);\n\n        $.tmpl(userdelegationListTmpl, {\n          headers: self.tableHeaders,\n          orderField: self.orderField,\n          orderType: self.orderType,\n          delegationList: response.delegations,\n          page: response.page,\n          pagination: pagination,\n          pagesArray: pagesArray }).\n        appendTo(self.$DelegationListWrapper);\n\n        self.setUpPagination(totalPages);\n        self.setUpSortColumnLinks();\n        $(\".widget-userdelegation__separator__btn-icon\", self.content).addClass(\"widget-userdelegation__separator__btn-icon--opened\");\n      } else\n      {\n        var userdelegationEmptyListTmpl = self.getTemplate(\"admin.userdelegationEmptyMessageTmpl\");\n        var msg = bizagi.localization.getResource(\"workportal-widget-userdelegation-empty-list-message\");\n        self.$DelegationListWrapper.html($.tmpl(userdelegationEmptyListTmpl, { message: msg }));\n      }\n\n      self.addTableEventsHandler();\n      self.delegatedAssignment = {\n        element: $(\"#widget-userdelegation__delegated-assignment-user\", self.content),\n        value: \"\" };\n\n    });\n  },\n\n  /* >> 3.1\r\n      * Get Pages\r\n      */\n  getPagesArray: function getPagesArray(totalPages) {\n    var self = this;\n    var pagesToShow = self.maxPages > totalPages ? totalPages : self.maxPages;\n    var aux = [];\n\n    for (var a = 0; a < pagesToShow; a++) {\n      aux.push(a + 1);\n    }\n    return aux;\n  },\n\n  /* >> 3.2\r\n      * Set pagination\r\n      */\n  setUpPagination: function setUpPagination(totalPages) {\n    var self = this;\n    var $pager = $(\"#widget-userdelegation__delegation-list__table-pager ul\", self.content);\n\n    $pager.bizagiPagination({\n      maxElemShow: self.maxRows,\n      totalPages: totalPages,\n      actualPage: self.currentPage,\n      listElement: $pager,\n      clickCallBack: function clickCallBack(options) {\n        var filterData = {\n          pag: self.currentPage = parseInt(options.page),\n          pagSize: self.maxRows,\n          orderField: self.orderField,\n          orderType: self.orderType };\n\n        self.initDelegationTable(filterData);\n      } });\n\n\n  },\n\n  /* >> 3.3\r\n      * assign click event to each column to order\r\n      */\n  setUpSortColumnLinks: function setUpSortColumnLinks() {\n    var self = this;\n    $(\".biz-wp-table-head th\", self.content).click(function () {\n      self.orderField = $(this).data(\"orderfield\");\n      self.orderType = $(this).data(\"ordertype\") || self.orderType;\n      var filterData = {\n        orderType: self.orderType,\n        orderField: self.orderField,\n        pagSize: self.maxRows,\n        pag: self.currentPage };\n\n      self.initDelegationTable(filterData);\n    });\n  },\n\n  // >> 3.4\n  addTableEventsHandler: function addTableEventsHandler() {\n    var self = this;\n    var content = self.getContent();\n    //table edit-btn\n    $(\".widget-userdelegation__delegation-list__edit-btn\", self.content).click(function () {\n      self.selectedDelegation = $(this).parent().data();\n      self.delegatedAssignment.element.val(self.selectedDelegation.delegatedName);\n      self.delegatedAssignment.value = self.selectedDelegation.idDelegate;\n      $(\".biz-wp-combo\", self.processComponent.element).hide();\n      self.clearMultiselector(self.processComponent);\n\n      self.addChoiceMultiselector(self.processComponent, self.selectedDelegation.idProcess, false);\n      $(\".widget-userdelegation__delegated-assignment--edition\", self.content).show();\n      $(\".widget-userdelegation__delegated-assignment\", self.content).hide();\n      $(\".widget-userdelegation__delegated-assignment--edition__value\", self.content).text(self.selectedDelegation.delegatedName);\n      $(\"#widget-userdelegation__start-date\", self.content).datepicker(\"setDate\", new Date(Date.parse(self.selectedDelegation.startDate, \"MM/DD/YYYY\")));\n      $(\"#widget-userdelegation__end-date\", self.content).datepicker(\"setDate\", new Date(Date.parse(self.selectedDelegation.endDate, \"MM/DD/YYYY\")));\n      $(\".widget-user-delegation__multiselector__item-clear-btn\", self.content).hide();\n\n      $(\"#widget-userdelegation__delegated-startdate--edition\", self.content).show();\n      $(\".widget-userdelegation__delegated-startdate--edition__value\", self.content).text(self.selectedDelegation.startDate);\n      $(\"#widget-userdelegation__form-input_date_startdate\", self.content).hide();\n    });\n\n    $(\".widget-userdelegation__delegation-list__delete-btn\", self.content).click(function () {\n      var selectedDelegation = $(this).parent().data();\n      self.openDeleteConfirmation(selectedDelegation);\n    });\n\n    //separator button event\n    $(\".widget-userdelegation__separator__btn\", content).click(function () {\n      var delegationList = $(\".widget-userdelegation__delegation-list\", content);\n      self.showTable = !self.showTable;\n      if (self.showTable) {\n        $(\".widget-userdelegation__separator__btn-icon\", content).addClass(\"widget-userdelegation__separator__btn-icon--opened\");\n        delegationList.show();\n      } else {\n        $(\".widget-userdelegation__separator__btn-icon\", content).removeClass(\"widget-userdelegation__separator__btn-icon--opened\");\n        delegationList.hide();\n      }\n    });\n  },\n\n  // >> 3.4.1\n  openDeleteConfirmation: function openDeleteConfirmation(selectedDelegation) {\n    var self = this;\n    var deleteConfirmationDialog = $.tmpl(self.getTemplate(\"admin.userdelegationDeleteConfirmationTmpl\"), { delegation: selectedDelegation });\n    deleteConfirmationDialog.dialog({\n      resizable: false,\n      draggable: false,\n      height: \"auto\",\n      width: \"600px\",\n      modal: true,\n      title: selectedDelegation.processName,\n      maximize: false,\n      close: function close() {\n        deleteConfirmationDialog.dialog(\"destroy\");\n        deleteConfirmationDialog.detach();\n      },\n      buttons: [\n      {\n        text: self.getResource(\"workportal-general-button-label-ok\"),\n        click: function click() {\n          $(this).dialog(\"destroy\");\n          self.deleteDelegation(selectedDelegation);\n        } },\n\n      {\n        text: self.getResource(\"workportal-widget-queries-confirm-cancel\"),\n        click: function click() {\n          $(this).dialog(\"destroy\");\n        } }] });\n\n\n\n  },\n\n  /** >> 3.4.1.1\r\n      * Delete configured delegation\r\n      */\n  deleteDelegation: function deleteDelegation(params) {\n    var self = this;\n    $.when(self.dataService.deleteDelegation(params)).done(function (response) {\n      // console.log(response);//Todo: catch errors\n      self.initDelegationTable();\n    });\n  },\n\n  /** >> 4\r\n      * Events Handlers\r\n      */\n  addEventsHandler: function addEventsHandler() {\n    var self = this;\n    var content = self.getContent();\n    //bread crumb 1\n    $(\".widget-userdelegation__bread-crumbs__link-1\", self.content).click(function () {\n      var msg = bizagi.localization.getResource(\"workportal-widget-userdelegation-bread-crumb-1\");\n      $(\".ui-widget-header.ui-corner-all > span.ui-dialog-title\").html(msg);\n      $(\".widget-userdelegation__wrapper\", content).show();\n      $(\".widget-userdelegation__bread-crumbs\", content).hide();\n      $(\"#widget-userdelegation__getuser-wrapper\", content).html(\"\");\n      $(\"#widget-userdelegation__getuser-wrapper\", content).hide();\n    });\n\n    //bread crumb 2\n    $(\".widget-userdelegation__bread-crumbs__link-2\", self.content).click(function () {\n      var msg = bizagi.localization.getResource(\"workportal-widget-userdelegation-bread-crumb-2\");\n      $(\".ui-widget-header.ui-corner-all > span.ui-dialog-title\").html(msg);\n      $(\".widget-userdelegation__wrapper\", content).hide();\n      $(\".widget-userdelegation__bread-crumbs\", content).show();\n      $(\".widget-userdelegation__bread-crumbs__link-3\", self.content).hide();\n      $(\"#widget-userdelegation__getuser-wrapper\", content).html(\"\");\n      self.setupUsersSearchForm(self.delegatedAssignment);\n    });\n\n    //Delegated assignment\n    $(\"#widget-userdelegation__delegated-assignment-user\", content).focus(function () {\n      self.setupUsersSearchForm(self.delegatedAssignment);\n    });\n    $(\"#widget-userdelegation__delegated-assignment-search-btn\", content).click(function () {\n      var msg = bizagi.localization.getResource(\"workportal-widget-userdelegation-bread-crumb-2\");\n      $(\".ui-widget-header.ui-corner-all > span.ui-dialog-title\").html(msg);\n      self.setupUsersSearchForm(self.delegatedAssignment);\n    });\n    $(\"#widget-userdelegation__delegated-assignment-clear-btn\", content).click(function () {\n      $(\"#widget-userdelegation__delegated-assignment-user\", content).val(\"\");\n      self.delegatedAssignment.value = '';\n    });\n\n    $(\"#widget-userdelegation__new-assignment-save-btn\", content).click(function () {\n      if (self.selectedDelegation) {\n        self.updateDelegation();\n      } else {\n        self.saveDelegation();\n      }\n    });\n\n    $(\"#widget-userdelegation__new-assignment-clear-btn\", content).click(function () {\n      self.clearForm();\n    });\n  },\n\n  /** >> 4.1\r\n      * initialize the users search form widget\r\n      */\n  setupUsersSearchForm: function setupUsersSearchForm(params) {\n    var self = this;\n    var content = self.getContent();\n    var def = $.Deferred();\n    $(\".widget-userdelegation__bread-crumbs\", content).show();\n    $(\".widget-userdelegation__wrapper\", content).hide();\n\n    $(\"#widget-userdelegation__getuser-wrapper\", content).show();\n    self.usersTable = new bizagi.workportal.widgets.admin.usersDelegation.searchUser(self.workportalFacade, self.dataService, $.extend(self.params, {\n      canvas: $(\"#widget-userdelegation__getuser-wrapper\", content),\n      userLinkLabel: [bizagi.localization.getResource(\"workportal-widget-admin-defaults-assignation-select-link\")],\n      parentDef: def }));\n\n\n    self.usersTable.render();\n\n    $.when(def).done(function (userId, userName) {\n      $(\"#widget-userdelegation__getuser-wrapper\", content).html(\"\");\n      $(\"#widget-userdelegation__getuser-wrapper\", content).hide();\n      params.element.val(userName);\n      params.value = userId;\n      $(\".widget-userdelegation__wrapper\", content).show();\n      $(\".widget-userdelegation__bread-crumbs\", content).hide();\n      $(\".widget-userdelegation__bread-crumbs li:last-child\", content).hide();\n\n    });\n  },\n\n  /** >> 4.2\r\n      * Update configured delegation\r\n      */\n  updateDelegation: function updateDelegation() {\n    var self = this;\n    var startDate = $(\"#widget-userdelegation__start-date\", self.content).datepicker(\"getDate\");\n    var endDate = $(\"#widget-userdelegation__end-date\", self.content).datepicker(\"getDate\");\n    var params = {\n      idDelegation: self.selectedDelegation.idDelegation,\n      idUser: bizagi.currentUser.idUser,\n      idDelegate: self.delegatedAssignment.value,\n      idsProcess: JSON.stringify(self.processComponent.values),\n      startDate: bizagi.util.dateFormatter.formatDate(startDate, \"yyyy-MM-dd\"),\n      endDate: bizagi.util.dateFormatter.formatDate(endDate, \"yyyy-MM-dd\"),\n      enableSub: 1 };\n\n    if (self.validateSaveUpdateParams(params)) {\n      $.when(self.dataService.updateDelegation(params)).done(function () {\n        self.clearForm();\n        self.initDelegationTable();\n        self.selectedDelegation = null;\n      }).fail(function (response) {\n        var arrayResult = response.responseJSON.messages;\n        var msgs = [];\n        for (var i = 0; i < arrayResult.length; i++) {\n          var arr = arrayResult[i][i].error;\n          var messages = arrayResult[i][i].message;\n          msgs.push(bizagi.localization.getResource(arr) + \" <br /> <b>\" + messages + \"</b> <br /> \");\n        }\n        $(\"#widget-userdelegation__assignation--error\", self.content).show();\n        $(\"#widget-userdelegation__assignation--error_value\", self.content).html(msgs.toString());\n      });\n    }\n  },\n\n  /** >> 4.3\r\n      * Save configured delegation\r\n      */\n  saveDelegation: function saveDelegation() {\n    var self = this;\n    var startDate = $(\"#widget-userdelegation__start-date\", self.content).datepicker(\"getDate\");\n    var endDate = $(\"#widget-userdelegation__end-date\", self.content).datepicker(\"getDate\");\n    var params = {\n      idUser: bizagi.currentUser.idUser,\n      idDelegate: self.delegatedAssignment.value,\n      idsProcess: JSON.stringify(self.processComponent.values),\n      startDate: bizagi.util.dateFormatter.formatDate(startDate, \"yyyy-MM-dd\"),\n      endDate: bizagi.util.dateFormatter.formatDate(endDate, \"yyyy-MM-dd\"),\n      enableSub: 1 };\n\n    if (self.validateSaveUpdateParams(params)) {\n      $.when(self.dataService.saveDelegation(params)).done(function () {\n        self.clearForm();\n        self.initDelegationTable();\n        self.selectedDelegation = null;\n      }).fail(function (response) {\n        var arrayResult = response.responseJSON.messages;\n        var msgs = [];\n        for (var i = 0; i < arrayResult.length; i++) {\n          var arr = arrayResult[i][i].error;\n          var messages = arrayResult[i][i].message;\n          msgs.push(bizagi.localization.getResource(arr) + \" <br /> <b>\" + messages + \"</b> <br /> \");\n        }\n        $(\"#widget-userdelegation__assignation--error\", self.content).show();\n        $(\"#widget-userdelegation__assignation--error_value\", self.content).html(msgs.toString());\n      });\n    }\n  },\n\n  // >> 4.3.1 - 4.2.1\n  validateSaveUpdateParams: function validateSaveUpdateParams(params) {\n    var self = this;\n    var content = self.getContent();\n    var startDate = new Date(Date.parse(params.startDate, \"MM/DD/YYYY HH:mm:ss\"));\n    var endDate = new Date(Date.parse(params.endDate, \"MM/DD/YYYY HH:mm:ss\"));\n    $(\"#widget-userdelegation__delegated-process-combo-alert\", content).hide();\n    $(\"#widget-userdelegation__delegated-assignment-user-alert\", content).hide();\n    $(\"#widget-userdelegation__start-date-alert\", content).hide();\n    $(\"#widget-userdelegation__end-date-alert\", content).hide();\n    $(\"#widget-userdelegation__delegation-period-alert\", content).hide();\n\n    if (params.idsProcess == \"[]\") {\n      $(\"#widget-userdelegation__delegated-process-combo-alert\", content).show();\n    }\n    ;\n    if (bizagi.util.isEmpty(params.idDelegate)) {\n      $(\"#widget-userdelegation__delegated-assignment-user-alert\", content).show();\n    }\n    if (!params.startDate) {\n      $(\"#widget-userdelegation__start-date-alert\", content).show();\n    }\n    if (!params.endDate) {\n      $(\"#widget-userdelegation__end-date-alert\", content).show();\n    }\n    if (endDate < startDate) {\n      $(\"#widget-userdelegation__delegation-period-alert\", content).show();\n    }\n\n    return params.idUser && params.idsProcess && !bizagi.util.isEmpty(params.idDelegate) && params.startDate && params.endDate && endDate >= startDate;\n  },\n\n  // >> 4.4\n  clearForm: function clearForm() {\n    var self = this;\n    self.clearMultiselector(self.processComponent);\n    self.delegatedAssignment.element.val(\"\");\n    $(\".biz-wp-combo\", self.processComponent.element).show();\n    $(\".workportal-widget-userdelegation__sub-delegation__checkbox\").prop(\"checked\", false);\n    $(\"#widget-userdelegation__process-to-delegate-combo\", self.content).val(\"\");\n    $(\"#widget-userdelegation__start-date\", self.content).val(\"\");\n    $(\"#widget-userdelegation__end-date\", self.content).val(\"\");\n    $(\"#widget-userdelegation__getuser-wrapper\", self.content).html(\"\");\n    $(\".widget-userdelegation__delegated-assignment--edition\", self.content).hide();\n    $(\".widget-userdelegation__delegated-assignment\", self.content).show();\n    $(\"#widget-userdelegation__delegated-startdate--edition\", self.content).hide();\n    $(\".widget-user-delegation__multiselector__item-clear-btn\", self.content).show();\n    $(\"#widget-userdelegation__form-input_date_startdate\", self.content).show();\n    $(\"#widget-userdelegation__assignation--error\", self.content).hide();\n  },\n\n  // >> 3.4.2 - 4.4.1\n  clearMultiselector: function clearMultiselector(component) {\n    component.element.val(\"\");\n    $(\".widget-user-delegation__multiselector\", component.element).html(\"\");\n    component.values = [];\n  } });","/**\r\n * Name:\r\n *\r\n * @author Ivan Ricardo Taimal\r\n */\n\n\nbizagi.workportal.widgets.admin.usersDelegation.searchUser.extend(\"bizagi.workportal.widgets.admin.usersDelegation.searchUser\", {}, {\n\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n    self._super(workportalFacade, dataService, params);\n\n    self.filterData = {};\n    self.maxRows = 8;\n    self.maxPages = 10;\n    self.$canvas = params.canvas;\n    self.users = [];\n    self.totalPages = 0;\n    self.currentPage = 1;\n    self.orderType = \"ASC\";\n    self.orderField = \"\";\n    self.tableHeaders = [\n    { \"displayName\": self.getResource(\"workportal-widget-usertable-id\"), \"fieldValue\": \"idUser\" },\n    { \"displayName\": self.getResource(\"workportal-widget-usertable-user\"), \"fieldValue\": \"fullName\" },\n    { \"displayName\": self.getResource(\"workportal-widget-usertable-name\"), \"fieldValue\": \"userName\" },\n    { \"displayName\": self.getResource(\"workportal-widget-usertable-domain\"), \"fieldValue\": \"domain\" },\n    { \"displayName\": self.getResource(\"workportal-widget-usertable-email\"), \"fieldValue\": \"contactEmail\" },\n    { \"displayName\": self.getResource(\"workportal-widget-usertable-active-assign\"), \"fieldValue\": \"enabledForAssignation\" },\n    { \"displayName\": self.getResource(\"workportal-widget-usertable-active\"), \"fieldValue\": \"enabled\" }];\n\n\n    self.loadTemplates({\n      \"searchUser\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.admin.usersDelegation.searchUser\").concat(\"#ui-bizagi-workportal-widget-search-user-tmpl\"),\n      \"searchUser.form\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.admin.usersDelegation.searchUser\").concat(\"#ui-bizagi-workportal-widget-search-user-form-tmpl\"),\n      \"searchUser.message\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.admin.usersDelegation.searchUser\").concat(\"#ui-bizagi-workportal-widget-search-user-message-tmpl\"),\n      \"searchUser.table.wrapper.final\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.admin.usersDelegation.searchUser\").concat(\"#ui-bizagi-workportal-widget-search-user-table-wrapper-final-tmpl\"),\n      useNewEngine: false });\n\n\n    bizagi.templateService.getTemplateWidget(\n    bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.admin.usersDelegation.searchUser\").concat(\"#ui-bizagi-workportal-widget-search-user-table-final-tmpl\")).\n    done(function (tmpl) {\n      self.tmpl[\"searchUser.table.final\"] = tmpl.markup;\n    });\n  },\n\n  renderContent: function renderContent() {\n    var self = this;\n    var template = self.getTemplate(\"searchUser\");\n    var content;\n\n    content = self.content = $.tmpl(template, {});\n\n    // Override canvas if it has been defined\n    if (self.params.canvas) {\n      content = $(self.params.canvas).append(content);\n    }\n\n    return content;\n  },\n\n  postRender: function postRender() {\n    var self = this;\n\n    //load templates\n    self.loadtemplates(); //  >> 1\n\n    //load form data\n    self.setupData(); // >> 2\n  },\n\n  /* >> 1\r\n      * Load template vars\r\n      */\n  loadtemplates: function loadtemplates() {\n    var self = this;\n\n    self.usersTableFormTmpl = self.getTemplate(\"searchUser.form\");\n    self.usersTableMessage = self.getTemplate(\"searchUser.message\");\n\n    self.usersTableTmpl = self.getTemplate(\"searchUser.table.wrapper.final\");\n    self.usersTableTmplFinal = self.getTemplate(\"searchUser.table.final\");\n  },\n\n  /* >> 2\r\n      * Setup form data\r\n      */\n  setupData: function setupData() {\n    var self = this;\n    var resultTemplate = $.tmpl(self.usersTableFormTmpl, {});\n\n    var currentRoles = [];\n    var currentSkills = [];\n    var currentPositions = [];\n    var currentOrganizations = [];\n\n    $.when(self.dataService.getPreferencesCurrentUser()).done(function (data) {\n      currentRoles = data.sRoles || [];\n      currentSkills = data.sSkills || [];\n      currentPositions = data.sPositions || [];\n      currentOrganizations = data.sOrganizations || [];\n    }).fail(function (error) {\n      bizagi.log(error);\n    });\n\n    var locationDef = $.when(self.getValuesMultiple(\"LOCATION\"));\n\n    var roleDef = $.when(self.getValuesMultiple(\"ROLE\"));\n\n    var skillDef = $.when(self.getValuesMultiple(\"SKILL\"));\n\n    var organizationDef = $.when(self.getValuesMultiple(\"ORGPOSITION\"));\n\n    var positionDef = $.when(self.getValuesMultiple(\"ORG\"));\n\n\n\n    var deferreds = [locationDef, roleDef, skillDef, organizationDef, positionDef];\n\n    $.when.apply($, deferreds).then(function (allLocations, allRoles, allSkills, allPositions, allOrganizations) {\n      $(\"#ui-bizagi-workportal-widget-search-user__form-wrapper\", self.content).html(\"\");\n      $(\"#ui-bizagi-workportal-widget-search-user__form-wrapper\", self.content).html(resultTemplate);\n\n      self.locationsComponent = self.configureProcessCombo(allLocations);\n\n      var rolesWrapper = $(\"#widget-search-user__roles\");\n      self.rolesComponent = self.setupMultiselector(rolesWrapper, allRoles, currentRoles);\n\n      var skillsWrapper = $(\"#widget-search-user__skills\");\n      self.skillsComponent = self.setupMultiselector(skillsWrapper, allSkills, currentSkills);\n\n      var positionsWrapper = $(\"#widget-search-user__positions\");\n      self.positionsComponent = self.setupMultiselector(positionsWrapper, allPositions, currentPositions);\n\n      var organizationsWrapper = $(\"#widget-search-user__organizations\");\n      self.organizationsComponent = self.setupMultiselector(organizationsWrapper, allOrganizations, currentOrganizations);\n\n      self.setupEventsHandler();\n      self.$canvas.trigger(\"completeUserForm\");\n\n      $(\"#ui-bizagi-workportal-widget-search-user__backfilters-btn\", self.content).click(function () {\n        $(\".widget-userdelegation__bread-crumbs__link-1\").click();\n      });\n    });\n\n  },\n\n  // >> 2.1\n  getValuesMultiple: function getValuesMultiple(entity) {\n    var self = this;\n    var defer = $.Deferred();\n    var params = '{\"select\":[{\"type\":\"Entity\",\"children\": [{\"type\":\"EntityValue\",\"data\":\"*\"}],\"data\":\"*\",\"where\":{\"name\":\"' + entity + '\"}}]}';\n    $.when(self.dataService.getValuesFromCQL(params)).done(function (data) {\n      var options = [];\n      if (data && data[0]) {\n        var guidRef = JSON.parse(data[0].content).displayAttribute.baref.ref;\n        $.each(data[0].children, function () {\n          var idEntity = JSON.parse(this.content).idEntityValue;\n          var fields = self.allKeysToUpperCase(JSON.parse(this.content).fields);\n          var displayName = fields[guidRef.toUpperCase()];\n          options.push({ \"id\": idEntity, \"displayName\": displayName });\n        });\n        options.sort(function (a, b) {return a.displayName > b.displayName ? 1 : b.displayName > a.displayName ? -1 : 0;});\n      }\n      defer.resolve(options);\n    }).fail(function (error) {\n      bizagi.log(error);\n    });\n    return defer.promise();\n  },\n\n  // >> 2.1.1\n  allKeysToUpperCase: function allKeysToUpperCase(obj) {\n    var self = this;\n    var output = {};\n    for (var i in obj) {\n      if (Object.prototype.toString.apply(obj[i]) === \"[object Object]\") {\n        output[i.toUpperCase()] = self.allKeysToUpperCase(obj[i]);\n      } else {\n        output[i.toUpperCase()] = obj[i];\n      }\n    }\n    return output;\n  },\n\n  // >> 2.2\n  configureProcessCombo: function configureProcessCombo(options) {\n    var self = this;\n    var processComboWrapper = $(\"#widget-search-user__locations\", self.content);\n    var comboDataSource = { combo: [], id: \"widget-search-user__locations-to-delegate-combo\" };\n    comboDataSource.combo = comboDataSource.combo.concat(options);\n    processComboWrapper.empty();\n    processComboWrapper.uicombo({\n      isEditable: false,\n      data: comboDataSource,\n      itemValue: function itemValue(obj) {\n        return obj.id;\n      },\n      itemText: function itemText(obj) {\n        return obj.displayName;\n      },\n      onComplete: function onComplete() {\n      },\n      onChange: function onChange(obj) {\n        var value = obj.ui.data(\"value\");\n        self.idProcess = value;\n        $(\".biz-wp-combo-input\", processComboWrapper).css({ \"box-shadow\": \"none\" });\n      }\n      //initValue: comboDataSource.combo[0]\n    });\n    return processComboWrapper;\n  },\n\n  /* >> 2.3\r\n      * Multiselector\r\n      */\n\n  setupMultiselector: function setupMultiselector(element, options, current) {\n    var self = this;\n    var component = {\n      element: element,\n      options: options,\n      values: [] };\n\n\n    //options.unshift({displayName: \" \", id: \"\"});\n    element.uicombo({\n      data: { combo: options },\n      // initValue: options[0],\n      itemValue: function itemValue(item) {\n        return item.id;\n      },\n      itemText: function itemText(item) {\n        return item.displayName;\n      },\n      onComplete: function onComplete() {\n      },\n      onChange: function onChange(obj) {\n        var value = obj.ui.data(\"value\");\n        component = self.addChoiceMultiselector(component, value);\n      },\n      onComboDropDown: function onComboDropDown() {\n        self.markChoicesMultiselector(component);\n      } });\n\n    $(\".biz-wp-combo-input\", element).addClass(\"widget-search-user__multiselector-input\");\n    $(element).prepend('<div class=\"widget-search-user__multiselector\"></div>');\n\n    $.each(current, function () {\n      component = self.addChoiceMultiselector(component, this.id);\n    });\n\n    return component;\n  },\n\n  // >> 2.3.1\n  addChoiceMultiselector: function addChoiceMultiselector(component, value) {\n    var selectedOption = component.options.filter(function (item) {\n      return item.id == value;\n    })[0];\n    if (component.values.indexOf(value + \"\") === -1 && selectedOption != null) {\n      var displayName = selectedOption.displayName;\n      $(\".widget-search-user__multiselector\", component.element).append('<div class=\"widget-search-user__multiselector__item\" data-value =' + value + \">\" + displayName + ' | <i class=\"widget-search-user__multiselector__item-clear-btn bz-icon bz-icon-close\"></i></div>');\n      $(\".biz-wp-combo-input\", component.element).css({ \"box-shadow\": \"none\", \"color\": \"white\" });\n      component.values.push(value + \"\");\n      $(\".widget-search-user__multiselector__item-clear-btn\", component.element).click(function () {\n        var itemToDelete = $(this).parent();\n        var indexToRemove = component.values.indexOf(itemToDelete.data().value + \"\");\n        if (indexToRemove >= 0) {\n          component.values.splice(indexToRemove, 1);\n          itemToDelete.remove();\n          if (component.values.length <= 0) {\n            $(\".biz-wp-combo\", component.element).show();\n          }\n        }\n      });\n    }\n    return component;\n  },\n\n  // >> 2.3.2\n  markChoicesMultiselector: function markChoicesMultiselector(component) {\n    $(\"li\", component.element).removeClass(\"widget-search-user__multiselector__option--selected\");\n    $(\"li\", component.element).prepend('<i class=\"widget-search-user__multiselector__option__icon\"></i>');\n    $.each(component.values, function (index, value) {\n      $('li[data-value=\"' + value + '\"]', component.element).addClass(\"widget-search-user__multiselector__option--selected\");\n    });\n  },\n\n  /* >> 2.4\r\n      * Implement main buttons behaviour\r\n      */\n  setupEventsHandler: function setupEventsHandler() {\n    var self = this;\n    var content = self.getContent();\n    var $userForm = $(\"#ui-bizagi-workportal-widget-search-user__form-wrapper form\", content);\n\n    $userForm.on(\"submit\", function (e) {\n\n      e.preventDefault();\n\n      self.currentPage = 1;\n      self.orderType = \"ASC\";\n      self.orderField = \"\";\n      var localizationArray = [];\n      var localizationSelecction = $(this.elements[\"widget-search-user__locations-to-delegate-combo\"]).data(\"value\");\n      if (localizationSelecction != null && localizationSelecction != \"\") localizationArray.push(localizationSelecction);\n\n      self.filterData = {\n        domain: this.elements.domainInput.value,\n        userName: this.elements.userFullName.value,\n        fullName: this.elements.userNameReassignInput.value,\n        locations: JSON.stringify(localizationArray),\n        pag: self.currentPage,\n        pagSize: self.maxRows,\n        orderField: self.orderField,\n        orderType: self.orderType };\n\n\n\n      self.getUsersTableData(\n      {\n        idUser: bizagi.currentUser.idUser,\n        organization: JSON.stringify(self.organizationsComponent.values),\n        roles: JSON.stringify(self.rolesComponent.values),\n        skills: JSON.stringify(self.skillsComponent.values),\n        locations: JSON.stringify(localizationArray),\n        positions: JSON.stringify(self.positionsComponent.values) });\n\n\n\n    });\n    $userForm.on('keyup keypress', function (e) {\n      var keyCode = e.keyCode || e.which;\n      if (keyCode === 13) {\n        e.preventDefault();\n        $userForm.submit();\n        return false;\n      }\n    });\n\n    $userForm.on(\"reset\", function (event) {\n      event.preventDefault();\n      $(this.elements[\"widget-search-user__locations-to-delegate-combo\"]).data(\"value\", \"\").val(\"\");\n      this.elements.domainInput.value = \"\";\n      this.elements.userFullName.value = \"\";\n      this.elements.userNameReassignInput.value = \"\";\n\n      self.cleanForm();\n      $(\"#ui-bizagi-workportal-widget-search-user__list-wrapper\", content).empty();\n    });\n\n  },\n\n  /* >> 2.4.2\r\n      * Clean Form\r\n      */\n  cleanForm: function cleanForm() {\n    var self = this;\n    $(\"#widget-search-user__locations\", self.content).val(\"\");\n    self.clearMultiselector(self.organizationsComponent);\n    self.clearMultiselector(self.rolesComponent);\n    self.clearMultiselector(self.skillsComponent);\n    self.clearMultiselector(self.positionsComponent);\n  },\n\n  // >> 2.4.2.1\n  clearMultiselector: function clearMultiselector(component) {\n    component.element.val(\"\");\n    $(\".widget-search-user__multiselector\", component.element).html(\"\");\n    component.values = [];\n  },\n\n\n  /* >> 2.4.1\r\n      * get users table data\r\n      */\n  getUsersTableData: function getUsersTableData(params) {\n    var self = this;\n\n    params = params || {};\n    self.orderType = params.orderType || self.orderType;\n    self.orderField = params.orderField || self.orderField;\n\n    $.when(self.dataService.getUsersForDelegation($.extend(self.filterData, params))).done(function (data) {\n      self.showUsersTable(data);\n    }).fail(function (error) {\n      bizagi.log(error);\n    });\n\n  },\n\n  /* >> 2.4.1.1\r\n      * if users returned show the table\r\n      */\n  showUsersTable: function showUsersTable(data) {\n\n    var self = this;\n    self.users = data.users;\n\n    var $wrapperList = $(\"#ui-bizagi-workportal-widget-search-user__list-wrapper\", self.content);\n    var $wrapperForm = $(\"#ui-bizagi-workportal-widget-search-user__form-wrapper\", self.content);\n    var $breadCrumbResults = $(\".widget-userdelegation__bread-crumbs li:last-child\");\n\n    if (self.users.length > 0) {\n      var msg = bizagi.localization.getResource(\"workportal-widget-userdelegation-bread-crumb-3\");\n      $(\".ui-widget-header.ui-corner-all > span.ui-dialog-title\").html(msg);\n\n      $wrapperList.empty();\n      $wrapperList.show();\n\n      var usersTableTmpl = $.tmpl(self.usersTableTmpl, {});\n      $wrapperList.html(usersTableTmpl);\n      self.tableFinal = new Vue({\n        el: $('#table', $wrapperList)[0],\n        template: self.usersTableTmplFinal,\n        data: {\n          users: self.users,\n          headers: self.tableHeaders,\n          orderField: self.orderField,\n          orderType: self.orderType,\n          renderBooleanYes: self.getResource('render-boolean-yes'),\n          renderBooleanNo: self.getResource('render-boolean-no'),\n          selectedUser: '' },\n\n        methods: {\n          selectUser: function selectUser(userId) {\n            this.selectedUser = userId;\n          } } });\n\n\n\n      $wrapperForm.hide();\n      $breadCrumbResults.show();\n      $(\"#ui-bizagi-workportal-widget-search-user__selected-btn\", self.content).click(function () {\n        if (self.tableFinal.selectedUser !== '') {\n          var msg = bizagi.localization.getResource(\"workportal-widget-userdelegation-bread-crumb-1\");\n          $(\".ui-widget-header.ui-corner-all > span.ui-dialog-title\").html(msg);\n\n          self.params.parentDef.resolve(self.tableFinal.selectedUser.idUser, self.tableFinal.selectedUser.userName);\n\n          if (self.params.widgetName == \"usersDelegation\" && bizagi.workportal.desktop.dialogStack.length > 0) {\n            bizagi.workportal.desktop.dialogStack[bizagi.workportal.desktop.dialogStack.length - 1].dialogBox.on(\"dialogbeforeclose\", function () {\n              // Next variable specifies if is redirecting to inbox when the result status does not have errors.\n              if (self.resultStatus === true)\n              self.publish(\"changeWidget\", {\n                widgetName: bizagi.workportal.currentInboxView });\n\n            });\n          }\n\n          // Unbind an destroy\n          self.tableFinal.$destroy();\n          $(this).unbind(\"click\");\n          $(\"#ui-bizagi-workportal-widget-search-user__back-btn\", self.content).unbind(\"click\");\n        } else {\n          // THIS CODE DO NOTHING\n          // publish excecutes twice when create a new instance of userstable\n          self.$canvas.trigger(\"clickUserLink\", { id: this.id, name: this.name, type: $(this).data(\"linkname\") });\n        }\n      });\n      $(\"#ui-bizagi-workportal-widget-search-user__back-btn\", self.content).click(function () {\n        var $wrapperList = $(\"#ui-bizagi-workportal-widget-search-user__list-wrapper\", self.content);\n        var $wrapperForm = $(\"#ui-bizagi-workportal-widget-search-user__form-wrapper\", self.content);\n        var $breadCrumbResults = $(\".widget-userdelegation__bread-crumbs li:last-child\");\n        var msg = bizagi.localization.getResource(\"workportal-widget-userdelegation-bread-crumb-2\");\n        $(\".ui-widget-header.ui-corner-all > span.ui-dialog-title\").html(msg);\n        $wrapperList.empty();\n        $wrapperForm.show();\n        $wrapperList.hide();\n        $breadCrumbResults.hide();\n\n        // Unbind an destroy\n        self.tableFinal.$destroy();\n        $(this).unbind(\"click\");\n        $(\"#ui-bizagi-workportal-widget-search-user__selected-btn\", self.content).unbind(\"click\");\n      });\n    } else {\n      var msg = bizagi.localization.getResource(\"workportal-widget-usertable-empty\");\n      $(\".bz-wp-table-centermessage\", self.content).find('h3').text(msg);\n      setTimeout(function () {\n        $(\".bz-wp-table-centermessage\", self.content).find('h3').text('');\n      }, 3000);\n    }\n  } });","/**\r\n * Admin module to manage Holidays calendar\r\n *\r\n * @author Edward J Morales\r\n */\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.admin.holidays\", {}, {\n  /*\r\n                                                                                           *   Returns the widget name\r\n                                                                                           */\n  getWidgetName: function getWidgetName() {\n    return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_HOLIDAYS;\n  },\n\n\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n    self.holidaysObj = {\n      calendarSelector: null,\n      activeCalendar: \"\",\n      schemas: [],\n      schema: {},\n      holidays: {},\n      holidaysInServer: {} };\n\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    //Load templates\n    self.loadTemplates({\n      \"admin.holidays\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.admin.holidays\").concat(\"#ui-bizagi-workportal-widget-admin-holidays\"),\n      \"admin.holidays.calendar.schema\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.admin.holidays\").concat(\"#ui-bizagi-workportal-widget-admin-holidays-calendar-schema\"),\n      useNewEngine: false });\n\n  },\n\n  /*\r\n      *   Renders the content for the current controller\r\n      */\n  renderContent: function renderContent() {\n    var self = this;\n    var template = self.getTemplate(\"admin.holidays\");\n\n    var content = self.content = $.tmpl(template);\n\n    return content;\n  },\n\n  postRender: function postRender() {\n    var self = this;\n\n    $.when(self.dataService.getHolidaysSchemas()).done(function (holidays) {\n      self.holidaysObj.schemas = holidays;\n\n      $.each(holidays, function (key, value) {\n        self.holidaysObj.schema[value.id] = {};\n      });\n      self.renderHolidaysSchema(holidays);\n    }).fail(function (e) {\n      console.log(\"ERROR\", e);\n    });\n  },\n\n  /**\r\n      * Get schemas Object\r\n      * @param holidays\r\n      * @return {[\"guid\": {} ]}\r\n      * @private\r\n      */\n  _getSchemas: function _getSchemas(holidays) {\n    holidays = holidays || [];\n    var result = {};\n\n    $.each(holidays, function (key, value) {\n      result[value.id] = value;\n    });\n    return result;\n  },\n\n  /**\r\n      * Get days by schema\r\n      * @param guidSchema\r\n      * @param schemaObj\r\n      * @return [{guid:\"\", displayName:\"\", dates:[]}]\r\n      * @private\r\n      */\n  _getDaysBySchema: function _getDaysBySchema(guidSchema, schemaObj) {\n    guidSchema = guidSchema || \"\";\n    schemaObj = schemaObj || {};\n    // Just if in the near future schemaObj change and its necessary apply a different algorithm\n    return schemaObj[guidSchema] || [];\n  },\n\n  _calendarHasChanges: function _calendarHasChanges() {\n    var self = this;\n    var isModified = false;\n    if (self.holidaysObj.activeCalendar != \"\" && self.holidaysObj.schema[self.holidaysObj.activeCalendar].modified) {\n      isModified = true;\n    }\n    return isModified;\n  },\n\n  _getChanges: function _getChanges(schema) {\n    var self = this;\n    var deleted = [];\n    var added = [];\n    var actually = [];\n\n    if (!schema) {\n      return;\n    }\n\n    var _searchDateInSchema = function _searchDateInSchema(dateObj, schemaObj) {\n      var result = -1;\n      dateObj = dateObj || new Date();\n\n      $.each(schemaObj, function (key, value) {\n        if (new Date(value.date).getTime() == dateObj.getTime()) {\n          result = key;\n        }\n      });\n      return result;\n    };\n\n    var _getChanges = function _getChanges(datesObjA, datesObjB, matchAction) {\n      var primaryAction = matchAction == \"add\" ? added : deleted;\n      var inverseAction = matchAction == \"add\" ? deleted : added;\n      $.each(datesObjA, function (key, value) {\n        var searchIndex = _searchDateInSchema(new Date(value.date), datesObjB);\n        // Check if its a new date\n        if (searchIndex >= 0) {\n          var searchInActuallySchemaIndex = _searchDateInSchema(new Date(value.date), actually);\n          if (searchInActuallySchemaIndex == -1) {\n            actually.push(value);\n          }\n\n          // Date does not change, check description\n          if (datesObjB[searchIndex].description != value.description) {\n            var searchInSchemaToSaveIndex = _searchDateInSchema(new Date(datesObjB[searchIndex].date), inverseAction);\n            if (searchInSchemaToSaveIndex == -1) {\n              // secure format ISO8601\n              datesObjB[searchIndex].date = self.formatDateStringToISO8601(datesObjB[searchIndex].date);\n              value.date = self.formatDateStringToISO8601(value.date);\n\n              inverseAction.push(datesObjB[searchIndex]);\n              primaryAction.push(value);\n            }\n          }\n        } else {\n          value.date = self.formatDateStringToISO8601(value.date);\n          primaryAction.push(value);\n          actually.push(value);\n        }\n      });\n    };\n    _getChanges(self.holidaysObj.holidays[schema], self.holidaysObj.holidaysInServer[schema], \"add\");\n    _getChanges(self.holidaysObj.holidaysInServer[schema], self.holidaysObj.holidays[schema], \"delete\");\n\n    return { \"delete\": deleted, add: added, actually: actually };\n  },\n\n  formatDateStringToISO8601: function formatDateStringToISO8601(dateString) {\n    var self = this;\n    if (!bizagi.util.dateFormatter.isFormatISO8601(dateString)) {\n      dateString = self._formatDateFromInvariantToISO8601(dateString);\n    }\n    return dateString;\n  },\n\n  saveSchema: function saveSchema(schema, saveFromModal) {\n    var self = this;\n    var content = self.getContent();\n    var $messageContainer = $(\".bz-ui-save-status\", content);\n\n    $.when(self._saveSchema(schema, saveFromModal)).done(function () {\n      self.showSuccess(bizagi.localization.getResource(\"workportal-general-success\"), $messageContainer);\n    }).fail(function (error) {\n      self.showError(bizagi.localization.getResource(\"workportal-general-error\") + \" : \" + error.toString(), $messageContainer);\n    });\n  },\n\n  _saveSchema: function _saveSchema(schema, saveFromModal) {\n    var self = this;\n    var changes = self._getChanges(schema);\n    var def = new $.Deferred();\n    var data = {\n      add: changes.add,\n      \"delete\": changes[\"delete\"] };\n\n\n    self.holidaysObj.calendarSelector.startLoading({\n      overlay: true });\n\n    $.when(self.dataService.saveHolidaysBySchema({\n      schema: schema,\n      data: JSON.encode(data) })).\n    done(function (response) {\n      self._resetSchemaChanges(schema);\n      setTimeout(function () {\n        if (!saveFromModal) {\n          self._changeSchema(schema);\n        }\n        self.holidaysObj.calendarSelector.endLoading();\n        def.resolve();\n      }, 1000);\n    }).fail(function (e) {\n      self.holidaysObj.calendarSelector.endLoading();\n      def.reject(e.toString());\n    });\n    return def.promise();\n  },\n\n  showError: function showError(error, $messageContainer) {\n    var $message = '<i class=\"bz-icon bz-icon-error\"></i>&nbsp; Error:' + error;\n    $messageContainer.empty();\n    $messageContainer.show();\n    $messageContainer.removeClass(\"status-success\");\n    $messageContainer.addClass(\"status-error\");\n    $messageContainer.html($message);\n  },\n\n  showSuccess: function showSuccess(success, $messageContainer) {\n    var $message = '<i class=\"bz-icon bz-icon-test\"></i>&nbsp;' + success;\n    $messageContainer.empty();\n    $messageContainer.show();\n    $messageContainer.removeClass(\"status-error\");\n    $messageContainer.addClass(\"status-success\");\n    $messageContainer.html($message);\n    window.setTimeout(function () {\n      $messageContainer.fadeOut(600);\n    }, 5000);\n  },\n\n  _resetSchemaChanges: function _resetSchemaChanges(schema) {\n    if (schema) {\n      var self = this;\n      self.holidaysObj.schema[schema].modified = false;\n      self.holidaysObj.holidays[schema] = {};\n    }\n  },\n\n\n  renderHolidaysSchema: function renderHolidaysSchema(holidaysObj) {\n    holidaysObj = holidaysObj || [];\n    var self = this;\n    var template = self.getTemplate(\"admin.holidays.calendar.schema\");\n    var content = self.getContent();\n    var schemas = self._getSchemas(holidaysObj);\n\n    var result = $.tmpl(template, { \"schemas\": schemas });\n    self.holidaysObj.calendarSelector = $(\"#biz-wp-admin-holidays-calendar\", result);\n\n    $(\"#biz-wp-admin-holidays-schemas\").append(result);\n\n    self.holidaysSchemaHandlers();\n    self.renderHolidaysCalendar();\n\n    // When the user clicks on save...\n    $(\"[name='save']\", result).on(\"click\", function () {\n      // If the calendar has changes save the changes...\n      if (self._calendarHasChanges()) {\n        self.saveSchema(self.holidaysObj.activeCalendar, false);\n      } else {// If there is no changes show an alert\n        // If the user has selected a calendar\n        if (self.holidaysObj.activeCalendar) {\n          toastr.remove();\n          bizagi.injector.get('notifier').showWarningMessage(\n          bizagi.localization.getResource('workportal-admin-holidays-no-changes'));\n        } else\n          // the user doesn't selects a calendar\n          console.log('There is no selected calendar');\n      }\n    });\n\n    $(\"[name='cancel']\", result).on(\"click\", function () {\n      self.params.dialogBox.dialog(\"close\");\n    });\n\n    $(\"button\", result).button();\n  },\n\n  _changeSchema: function _changeSchema(schema) {\n    var self = this;\n    self.holidaysObj.activeCalendar = schema;\n    if (schema == \"\") {\n      self.renderHolidaysCalendar();\n    } else {\n      self.holidaysObj.calendarSelector.startLoading();\n      $.when(self.dataService.getHolidaysBySchema({ \"schema\": schema })).done(function (data) {\n        self.holidaysObj.holidaysInServer[schema] = JSON.parse(JSON.encode(data));\n        self.holidaysObj.holidays[schema] = data;\n        self.renderHolidaysCalendar({\n          dates: self.holidaysObj.holidays[schema] || [] });\n\n      }).always(function () {\n        self.holidaysObj.calendarSelector.endLoading();\n      });\n    }\n  },\n\n  holidaysSchemaHandlers: function holidaysSchemaHandlers() {\n    var self = this;\n    var $schemaSelector = $(\"#biz-wp-admin-holidays-schemas select\");\n\n    $schemaSelector.change(function (e) {\n      self.holidays = [];\n      var schema = e.currentTarget.value;\n\n      if (self._calendarHasChanges()) {\n        $.when(bizagi.showSaveBox(self.getResource(\"confirmation-savebox-message1\"), self.getResource(\"confirmation-box-title\"), \"warning\")).done(function () {\n          $.when(self.saveSchema(self.holidaysObj.activeCalendar, true)).done(function (data) {\n            self._changeSchema(schema);\n          });\n        }).fail(function (params) {\n          self._resetSchemaChanges(self.holidaysObj.activeCalendar);\n          self._changeSchema(schema);\n        });\n      } else {\n        self._changeSchema(schema);\n      }\n\n    });\n  },\n\n  renderHolidaysCalendar: function renderHolidaysCalendar(params) {\n    params = params || {};\n    var self = this;\n    var content = self.getContent();\n    var dates = params.dates || [];\n    var calendar = $(\"#biz-wp-admin-holidays-calendar\", content);\n    var currentYear = new Date().getFullYear();\n    //var selector = params.selector || $(\"#biz-wp-admin-holidays-calendar\");\n    var datePickerOptions = params.datePickerOptions || {};\n    var _datePickerOptions = $.extend({\n      yearRange: \"-5:+10\",\n      stepMonths: 12,\n      numberOfMonths: [3, 4],\n      defaultDate: \"1/1/\" + currentYear,\n      dateFormat: \"mm/dd/yy\",\n      onSelect: function onSelect(dateText, inst) {\n        _addOrRemoveDate(dateText);\n      },\n      beforeShowDay: function beforeShowDay(date) {\n        // Calendar without schema\n        if (self.holidaysObj && self.holidaysObj.activeCalendar == \"\") {\n          return [false, \"ui-datepicker-notselected\"];\n        }\n\n        var today = new Date();\n        var foundDate = _findDate(date);\n        var isEnabled = today.getTime() > new Date(date).getTime() ? false : true;\n        if (foundDate.position > -1) {\n          return [isEnabled, \"ui-datepicker-selected\", foundDate.description];\n        } else {\n          return [isEnabled, \"ui-datepicker-notselected\", bizagi.localization.getResource(\"workportal-general-no-selected\")];\n        }\n      } },\n    datePickerOptions);\n\n    var _findDate = function _findDate(date) {\n      var formatDate = \"yy/mm/dd\";\n      for (var i = 0, l = dates.length; i < l; i++) {\n        var dateArr = dates[i].date.split(\"T\");\n        var convertedDate = dateArr[0].replace(/-/g, \"/\");\n        if ($.datepicker.formatDate(formatDate, new Date(date)) == $.datepicker.formatDate(formatDate, new Date(convertedDate))) {\n          return {\n            position: i,\n            description: dates[i].description };\n\n        }\n      }\n      return { position: -1, description: \"\" };\n    };\n\n    var _addDate = function _addDate(dateObj) {\n      dateObj.date = new Date(dateObj.date);\n      dateObj.date.setHours(0);\n      dateObj.date.setMinutes(0);\n      dateObj.date.setSeconds(0);\n      dateObj.date = bizagi.util.dateFormatter.formatISO8601(dateObj.date, true);\n\n      dates.push(dateObj);\n    };\n\n    var _removeDate = function _removeDate(index) {\n      dates.splice(index, 1);\n    };\n\n    // Adds a date if we don't have it yet, else remove it\n    var _addOrRemoveDate = function _addOrRemoveDate(date) {\n      var foundDate = _findDate(date);\n      if (foundDate.position > -1) {\n        _removeDate(foundDate.position);\n      } else {\n\n        _addDate({ date: date, description: \"\" });\n      }\n      self.holidaysObj.schema[self.holidaysObj.activeCalendar].modified = true;\n    };\n\n    // Destroy previous calendar\n    if (self.holidaysObj.calendarSelector.data(\"datepicker\")) {\n      self.holidaysObj.calendarSelector.datepicker(\"destroy\");\n    }\n\n    self.holidaysObj.calendarSelector.datepicker(_datePickerOptions);\n\n  },\n\n  _showNotification: function _showNotification(title, message, notificationType) {\n    var self = this;\n    var notification = new NotificationMessage(title, {\n      body: message,\n      iconType: _NOTIFICATION_ICON_TYPE.CSS });\n\n\n\n    notification.onClick = function (event) {\n      event.preventDefault();\n      this.close();\n      return false;\n    };\n\n    self.publish(\"notification\", { notification: notification, type: notificationType });\n\n  },\n\n  _formatDateFromInvariantToISO8601: function _formatDateFromInvariantToISO8601(dateStringInvariant) {\n    var objDate = bizagi.util.dateFormatter.getDateFromInvariant(dateStringInvariant, false);\n    return bizagi.util.dateFormatter.formatISO8601(objDate, true);\n  } });","/**\r\n * Admin module to manage Project Name\r\n *\r\n * @author Edward J Morales\r\n */\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.admin.projectName\", {}, {\n  /*\r\n                                                                                             *   Returns the widget name\r\n                                                                                             */\n  getWidgetName: function getWidgetName() {\n    return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_PROJECTNAME;\n  },\n\n\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    //Load templates\n    self.loadTemplates({\n      \"admin.projectname\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.admin.projectname\").concat(\"#ui-bizagi-workportal-widget-admin-projectname\"),\n      //   \"admin.holidays.calendar.schema\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.admin.holidays\").concat(\"#ui-bizagi-workportal-widget-admin-holidays-calendar-schema\"),\n      useNewEngine: false });\n\n  },\n\n  /*\r\n     *   Renders the content for the current controller\r\n     */\n  renderContent: function renderContent() {\n    var self = this;\n    var template = self.getTemplate(\"admin.projectname\");\n\n    var content = self.content = $.tmpl(template);\n\n    $(\"button\", content).button();\n\n    return content;\n  },\n\n  showError: function showError(error, $messageContainer) {\n    var $message = '<i class=\"bz-icon bz-icon-error\"></i>&nbsp; Error:' + error;\n    $messageContainer.empty();\n    $messageContainer.show();\n    $messageContainer.removeClass(\"status-success\");\n    $messageContainer.addClass(\"status-error\");\n    $messageContainer.html($message);\n  },\n\n  showSuccess: function showSuccess(success, $messageContainer) {\n    var $message = '<i class=\"bz-icon bz-icon-test\"></i>&nbsp;' + success;\n    $messageContainer.empty();\n    $messageContainer.show();\n    $messageContainer.removeClass(\"status-error\");\n    $messageContainer.addClass(\"status-success\");\n    $messageContainer.html($message);\n  },\n\n  postRender: function postRender() {\n    var self = this;\n    var content = self.getContent();\n    var $messageContainer = $(\".projectname-message-status\", content);\n\n    $(\"input\", content).on(\"keyup\", function () {\n      $messageContainer.empty();\n      if ($(this).val().length >= 0) {\n        $(\"input\", content).removeClass(\"status-error\");\n      }\n    });\n\n    $.when(self.dataService.getProjectName()).done(function (data) {\n      $(\"input\", content).val(data.projectName);\n    }).fail(function (e) {\n      console.log(\"ERROR\", e);\n    });\n\n    $(\"[name='cancel']\", content).on(\"click\", function () {\n      self.params.dialogBox.dialog(\"close\");\n    });\n\n    $(\"[name='save']\", content).on(\"click\", function () {\n      var projectName = $(\"input\", content).val();\n      $(content).startLoading({\n        overlay: true });\n\n\n      if (projectName.length == 0) {\n        $(\"input\", content).addClass(\"status-error\");\n        var errorMessage = bizagi.localization.getResource(\"workportal-general-error-field-required\");\n        errorMessage = errorMessage.replace(\"{0}\", bizagi.localization.getResource(\"workportal-menu-submenu-ProjectName\"));\n        self.showError(errorMessage, $messageContainer);\n        $(content).endLoading();\n        return;\n      }\n\n      $.when(self.dataService.setProjectName(projectName)).done(function (response) {\n        $(content).endLoading();\n        self.showSuccess(bizagi.localization.getResource(\"workportal-widget-admin-projectname-success\"), $messageContainer);\n      }).fail(function (error) {\n        error.responseText = error.responseText || { \"message\": bizagi.localization.getResource(\"workportal-general-error\") };\n        var errorObj = JSON.parse(error.responseText);\n        console.log(\"Error:\", error);\n        $(content).endLoading();\n        self.showError(errorObj.message, $messageContainer);\n      });\n    });\n  } });","/*\r\n * Control to search users for Bizagi rendering\r\n * @author: Andrs fernando Muoz\r\n */\n(function ($) {\n  $.fn.bizagiSearchUser = function (options) {\n    var self = this;\n    options = options || {};\n    var filterData = {};\n    var maxPages = 10;\n    var maxRows = 9;\n    var usersResults = [];\n    var currentPage = 1;\n    var totalPages = 0;\n    var dBox = {};\n    var editingUser = options.editingUser;\n\n    if (options.renderFactoryReference === undefined) {\n      throw \"The renderFactoryReference property is required\";\n    }\n    if (options.getResourceReference === undefined) {\n      throw \"The getResourceReference property is required\";\n    }\n\n\n    var methods = {\n      \"init\": function init() {\n        var filterData = {};\n        methods.bindElements();\n      },\n      \"bindElements\": function bindElements() {\n        self.click(function () {\n          methods.openUploadDialog();\n        });\n      },\n      \"openUploadDialog\": function openUploadDialog() {\n        var self = this;\n        var doc = window.document;\n        var dialogBox = self.dialogBox = $(\"<div class='ui-bizagi-component-search-user'/>\");\n        dBox = dialogBox.dialog({\n          width: 950,\n          maximize: false,\n          resize: false,\n          draggable: false,\n          height: 650,\n          title: options.title,\n          modal: true });\n\n        methods.showFilters();\n        methods.showButtons();\n        methods.addHandlers();\n        var defaultParams = methods.setDefaultParams();\n        methods._loadResultsTemplate(defaultParams.usersResults, defaultParams.currentPage, defaultParams.pagination, defaultParams.pagesArray);\n      },\n\n      /**\r\n          * set default params to create a template\r\n          * @returns \r\n          */\n      setDefaultParams: function setDefaultParams() {\n        return {\n          usersResults: [],\n          currentPage: -1,\n          pagination: false,\n          pagesArray: [] };\n\n      },\n      \"showFilters\": function showFilters() {\n        var filtersContainer = $(\"<div id='filtersContainer' class='filters-container clearfix'></div>\");\n        $.each(options.filters, function (index, value) {\n          $(filtersContainer, dBox).append(\"<div class='filters-row clearfix'><div class='filters-cell'><span>\" + options.displayNames[index] + \"</span></div><div class='filters-cell'><input id=\" + value + \" type='text'> </input></div></div>\");\n        });\n        filtersContainer.appendTo(dBox);\n      },\n      \"showButtons\": function showButtons() {\n        var buttonsContainer = $(\"<div id='buttonsContainer'class='biz-wp-buttonset'></div>\");\n        $(buttonsContainer, dBox).append(\"<button id='btnSearchUsers' class='ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only ui-state-hover' role='button' aria-disabled='false'><span class='ui-button-text'>\" + options.searchButtonName + \"</span></button>\");\n        $(buttonsContainer, dBox).append(\"<button id='btnClear' class='ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only ui-state-hover' role='button' aria-disabled='false'><span class='ui-button-text'>\" + options.clearButtonName + \"</span></button>\");\n\n        // Append new user Button\n        if (options.allowAddUser) {\n          var newUserBtn =\n          \"<button id='btnNew' class='ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only ui-state-hover' role='button' aria-disabled='false'>\" +\n          \"<span class='ui-button-text'>\" +\n          bizagi.localization.getResource(\"workportal-widget-admin-user-profiles-button-label-newUserProfiles\") +\n          \"</span>\" +\n          \"</button>\";\n\n          $(buttonsContainer, dBox).append(newUserBtn);\n          buttonsContainer.appendTo(dBox);\n\n          $(\"#btnNew\", dBox).bizagiCreateUser(options.dataService, options.renderFactory, {\n            canvas: $(dBox),\n            onCreate: options.selectItem(),\n            onCancel: function onCancel() {\n              $(dBox).dialog('option', 'title', options.title);\n              $(dBox).empty();\n\n              methods.showFilters();\n              methods.showButtons();\n              methods.addHandlers();\n            } });\n\n\n        } else\n        {\n          buttonsContainer.appendTo(dBox);\n        }\n      },\n      \"addHandlers\": function addHandlers() {\n        $(\"#btnSearchUsers\", dBox).click(function () {\n          methods.getUsersTableData();\n        });\n\n        $(\"#btnClear\", dBox).click(function () {\n          methods.clickClearPluginValues();\n        });\n        return this;\n      },\n      \"clickClearPluginValues\": function clickClearPluginValues() {\n        $.each(options.filters, function (index, value) {\n          $('#' + value, dBox).val('');\n        });\n        $(\"#searchResults\", dBox).remove();\n      },\n      \"getUsersTableData\": function getUsersTableData() {\n        var self = this;\n        methods.updateFiltersInformation();\n        var deferred = options.searchUsers(filterData);\n        self._loadingList(deferred);\n        $.when(deferred).done(function (data) {\n          if (!Array.isArray(data.users)) {\n            bizagi.showMessageBox(data.message, data.status, \"\", \"warning\");\n            return;\n          }\n          usersResults = data.users;\n          totalPages = data.total;\n          methods.showUsersTable();\n        }).fail(function (error) {\n          options.showError(error);\n        });\n      },\n      \"updateFiltersInformation\": function updateFiltersInformation() {\n        $.each(options.filters, function (index, value) {\n          filterData[value] = $('#' + value, dBox).val();\n        });\n        filterData['pag'] = currentPage;\n        filterData['pagSize'] = maxRows;\n        if (typeof editingUser !== \"undefined\" && editingUser !== \"\") {\n          filterData['editingUser'] = editingUser;\n        }\n      },\n      \"showUsersTable\": function showUsersTable() {\n        if (usersResults.length > 0) {\n          var pagination = totalPages > 1 ? true : false;\n          var pagesArray = methods.getPagesArray();\n          $(\"#biz-wp-wrapperload\", dBox).remove();\n          $(\"#searchResults\", dBox).remove();\n          var usersTableTmpl = methods._loadResultsTemplate(usersResults, currentPage, pagination, pagesArray);\n          $(dBox).append(usersTableTmpl);\n          methods.addTableHandlers();\n          methods.setUpPagination();\n        } else {\n          options.showMessageBox(\"workportal-widget-usertable-empty\");\n          $(\"#searchResults\", dBox).hide();\n        }\n      },\n      /**\r\n          * Load users results template\r\n          * @param {*} usersResults \r\n          * @param {*} currentPage \r\n          * @param {*} pagination \r\n          * @param {*} pagesArray \r\n          * @returns \r\n          */\n      _loadResultsTemplate: function _loadResultsTemplate(usersResults, currentPage, pagination, pagesArray) {\n        var content = options.renderFactoryReference.getTemplate(\"bizagi.plugin.search.user\");\n        var usersTableTmpl = $.tmpl(content, {\n          users: usersResults,\n          links: [options.getResourceReference(\"render-plugin-search-users-select-link\")],\n          page: currentPage,\n          pagination: pagination,\n          pagesArray: this.getPagesArray });\n\n        $(dBox).append(usersTableTmpl);\n        usersResults.length === 0 ? $(\"#searchResults\", dBox).hide() : '';\n        return usersTableTmpl;\n      },\n      \"addTableHandlers\": function addTableHandlers() {\n        $('table :button', dBox).click(function () {\n          var buttonSelf = $(this);\n          var itemSelected = {};\n          $.each(options.valuesToSelect, function (index, value) {\n            itemSelected[value] = buttonSelf.data(value);\n          });\n          var selItemDeferred = options.selectItem();\n          selItemDeferred.resolve(itemSelected);\n          dBox.remove();\n        });\n      },\n      \"getPagesArray\": function getPagesArray() {\n        var pagesToShow = maxPages > totalPages ? totalPages : maxPages;\n        var aux = [];\n        for (var a = 0; a < pagesToShow; a++) {\n          aux.push(a + 1);\n        }\n        return aux;\n      },\n      \"setUpPagination\": function setUpPagination() {\n        var self = this;\n        var $pager = $(\"#biz-wp-userstable-pager ul\", dBox);\n        $pager.bizagiPagination({\n          maxElemShow: maxRows,\n          totalPages: totalPages,\n          actualPage: currentPage,\n          listElement: $pager,\n          clickCallBack: function clickCallBack(options) {\n            filterData.pag = currentPage = parseInt(options.page);\n            self.getUsersTableData();\n          } });\n\n      },\n      /**\r\n          * show loader or user list\r\n          * @param {*} defer \r\n          */\n      _loadingList: function _loadingList(defer) {\n        var $loader = $(\"#biz-wp-wrapperload\", dBox),\n        $list = $(\"#searchResults\", dBox),\n        _start = function _start() {\n          $loader.show();\n          $list.hide();\n        },\n        _end = function _end() {\n          $loader.hide();\n          $list.show();\n        };\n\n        _start();\n        defer.always(_end);\n      } };\n\n\n    methods.init();\n    return methods;\n  };\n\n})(jQuery);","/**\r\n * Control to create users for Bizagi rendering\r\n * @author: Andrs Felipe Arenas, Ricardo Alirio Perez\r\n */\n(function ($) {\n  $.fn.bizagiCreateUser = function (dataService, renderFactory, options) {\n    var self = this;\n    options = options || {};\n    var canvas = options.canvas;\n    onCreate = options.onCreate || function () {};\n    onCancel = options.onCancel || function () {};\n    displayName = bizagi.localization.getResource(\"workportal-widget-admin-user-profiles-button-label-newUserProfiles\");\n\n    var methods = {\n      \"init\": function init() {\n        methods.addHandlers();\n      },\n      \"addHandlers\": function addHandlers() {\n        self.on(\"click\", function () {\n          methods.newUser();\n        });\n      },\n      \"newUser\": function newUser() {\n        var self = this;\n        var params = { \"h_action\": \"LOADUSERADMINFORM\", \"h_contexttype\": \"entity\", \"h_optionform\": \"add\" };\n\n        canvas.empty();\n        $.tmpl(\"<div {{loading}}></div>\").appendTo(canvas);\n\n        dataService.getUsersForm(params).done(function (data) {\n          var rendering = new bizagi.rendering.facade();\n          var renderingParams = { canvas: canvas, data: data, type: \"usersForm\", userId: 0, action: \"add\" };\n\n          canvas.dialog('option', 'title', displayName);\n          rendering.execute(renderingParams).done(function (form) {\n            rendering.form.bind(\"endUsersForm\", function (event, params) {\n              if (typeof params.error === \"undefined\") {\n                if (params.formAction === \"save\") {\n                  if (params.sendMail) {\n                    self.sendEmail(params.userId, params.password);\n                  }\n                  options.onCreate.resolve({ iduser: params.userId, user: params.fullName });\n                  canvas.remove();\n                } else\n                if (params.formAction === \"cancel\") {\n                  options.onCancel();\n                }\n                form.endLoading();\n              }\n            });\n          });\n        });\n      },\n      \"sendEmail\": function sendEmail(userId, password) {\n        var self = this;\n        dataService.generateDataToSendByEmail({ idUser: userId, password: password }).done(function (response) {\n          self.showEmailPopup(response, password);\n        });\n      },\n      \"showEmailPopup\": function showEmailPopup(messageResponse, password) {\n        var self = this;\n        var doc = window.document;\n        var template = renderFactory.getTemplate(\"render-user-email\");\n        var dialogBoxEmail = self.dialogBoxEmail = $(\"<div class= admin-users-email/>\");\n        var buttonsEmail = {};\n\n        dialogBoxEmail.empty();\n        dialogBoxEmail.appendTo(\"body\", doc);\n        // Define buttons\n        buttonsEmail[bizagi.localization.getResource(\"workportal-widget-admin-users-button-label-send\")] = function () {\n          if ($(\"#txtTextTo\", dialogBoxEmail).val() != \"\") {\n            // Select button Send\n            var params = {\n              eMailTo: $(\"#txtTextTo\", dialogBoxEmail).val(),\n              subject: $(\"#txtSubject\", dialogBoxEmail).val(),\n              body: $(\"#txtBody\", dialogBoxEmail).val(),\n              userSecret: password };\n\n\n            $.when(dataService.sendUserEmail(params)).done(function (result) {\n              self.closeUploadDialogEmail();\n              bizagi.showMessageBox(bizagi.localization.getResource(\"workportal-widget-admin-users-Send-message\"), \"Bizagi\", \"warning\");\n            });\n          } else\n          {\n            bizagi.showMessageBox(bizagi.localization.getResource(\"workportal-widget-admin-users-empty-email-to\"), \"Bizagi\", \"warning\");\n          }\n        };\n        buttonsEmail[bizagi.localization.getResource(\"workportal-widget-admin-users-button-label-notSend\")] = function () {\n          self.closeUploadDialogEmail();\n        };\n        //Creates a dialog\n        dialogBoxEmail.dialog({\n          width: 500,\n          height: 400,\n          title: bizagi.localization.getResource(\"workportal-widget-admin-users-subtitle-email\"),\n          modal: true,\n          maximize: false,\n          resizable: false,\n          draggable: false,\n          buttons: buttonsEmail,\n          close: function close() {\n            self.closeUploadDialogEmail();\n          },\n          resizeStop: function resizeStop(event, ui) {\n            if (self.form) {\n              self.form.resize(ui.size);\n            }\n          } });\n\n        // Render template\n        messageResponse.body = messageResponse.body.replace(/\\\\n/g, \"\\n\").replace(/\\\\/g, \"\");\n        $.tmpl(template, { messageResponse: messageResponse }).appendTo(dialogBoxEmail);\n      },\n      \"closeUploadDialogEmail\": function closeUploadDialogEmail() {\n        var self = this;\n        self.dialogBoxEmail.dialog('destroy');\n        self.dialogBoxEmail.remove();\n      } };\n\n\n    methods.init();\n    return methods;\n  };\n\n})(jQuery);","/*\r\n *   Name: Bizagi Workportal Desktop Project Business Polices\r\n *   Author: Elkin Fernando Siabato Cruz\r\n */\n\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.admin.business.polices\", {}, {\n  /*\r\n                                                                                                   *   Constructor\r\n                                                                                                   */\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    //Load templates\n    self.loadTemplates({\n      \"widgets-admin-business-polices\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.admin.business.polices\").concat(\"#business-polices-wrapper\") });\n\n  },\n\n  /**\r\n      * Renders the template defined in the widget\r\n      */\n  renderContent: function renderContent() {\n    var self = this;\n    var generalTmpl = self.getTemplate(\"widgets-admin-business-polices\");\n\n    self.content = generalTmpl.render({ 'build': bizagi.loader.build });\n    console.log('renderizar', self.content);\n    return self.content;\n  },\n\n  clean: function clean() {\n    var self = this;\n  } });\n\n\nbizagi.injector.register(\"bizagi.workportal.widgets.admin.business.polices\", [\"workportalFacade\", \"dataService\", bizagi.workportal.widgets.admin.business.polices]);","/**\r\n*  Name: BizAgi Case Security Improvement\r\n* \r\n* @author Nessler Camargo\r\n*/\n\n\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.admin.transfer.case.security.permissions\", {}, {\n\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n    self.selectedUsers = [\"\", \"\"];\n    self.allProcess = false;\n    self.haveProcess = false;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    //Load templates\n    self.loadTemplates({\n      \"admin-case-security-improvement\": bizagi.getTemplate(\"bizagi.workportal.widgets.admin.transfer.case.security.permissions\").concat(\"#ui-bizagi-workportal-widget-admin-case-security-improvement\"),\n      \"admin-case-security-improvement-fields\": bizagi.getTemplate(\"bizagi.workportal.widgets.admin.transfer.case.security.permissions\").concat(\"#ui-bizagi-workportal-widget-admin-case-security-improvement-fields\"),\n      \"security-improvement-loader\": bizagi.getTemplate(\"bizagi.workportal.widgets.admin.transfer.case.security.permissions\").concat(\"#ui-bizagi-workportal-widget-admin-case-security-improvement-loader\"),\n      \"security-improvement-emptyTree\": bizagi.getTemplate(\"bizagi.workportal.widgets.admin.transfer.case.security.permissions\").concat(\"#ui-bizagi-workportal-widget-admin-case-security-improvement-emptyTree\"),\n      useNewEngine: false });\n\n  },\n\n  getWidgetName: function getWidgetName() {\n    return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_TRANSFER_CASE_SECURITY_PERMISSIONS;\n  },\n\n  loadtemplates: function loadtemplates() {\n    var self = this;\n    //Template vars \n    self.fieldsContent = self.getTemplate(\"admin-case-security-improvement-fields\");\n    self.loaderTmpl = self.getTemplate(\"security-improvement-loader\");\n    self.emptyTreeTmpl = self.getTemplate(\"security-improvement-emptyTree\");\n  },\n\n  postRender: function postRender() {\n    var self = this;\n    self.setupData();\n  },\n\n  /*\r\n     * Setup form data\r\n     */\n  setupData: function setupData() {\n    var self = this;\n\n    self.setupInitialData();\n  },\n\n  /*\r\n     * Load form data\r\n     */\n  setupInitialData: function setupInitialData() {\n    var self = this;\n    //append fields to wrapper\n    var fields = $.tmpl(self.fieldsContent, {});\n    $(\"#defaults-admin-case-security-home\", self.content).append(fields);\n    self.setupSearchusersButton();\n    $(\".security-message-danger\", self.content).hide();\n    $(\"#title-process-revoke\", self.content).hide();\n    var tree = $.tmpl(self.emptyTreeTmpl, { emptyTreeText: bizagi.localization.getResource(\"workportal-widget-admin-transfers-case-security-permissions-select-current-user\") });\n    $(\"#processTreePermissions\", self.content).addClass(\"disableColor\").append(tree);\n  },\n\n  renderContent: function renderContent() {\n    var self = this,\n    _defer = new $.Deferred();\n    self.generalContent = self.getTemplate(\"admin-case-security-improvement\");\n    var content;\n    content = self.content = $.tmpl(self.generalContent, {});\n    if (self.params.content) {\n      content = self.params.content.html(content);\n    }\n    $.when(self.loadtemplates()).always(function () {\n      _defer.resolve(content);\n    });\n    return _defer.promise();\n  },\n\n\n  setupProcessTreePermissions: function setupProcessTreePermissions(id) {\n    var self = this,\n    content = self.getContent();\n\n    var processtreeParams = $.extend({}, self.params);\n    processtreeParams.canvas = $(\"#processTreePermissions\", content);\n    processtreeParams.svgIconsMode = true;\n    processtreeParams.searchKeyResource = \" \";\n    processtreeParams.byUser = true;\n    processtreeParams.userId = id;\n    processtreeParams.showTitle = false;\n    processtreeParams.newDesign = true;\n    $(\"#processTreePermissions\", content).removeClass(\"disableColor\");\n    //tree for delete cases\n    self.processTreePermissions = new bizagi.workportal.widgets.processtree(self.workportalFacade, self.dataService, processtreeParams);\n    self.processTreePermissions.render();\n  },\n\n  /*\r\n     * Call service \r\n     */\n\n  /*\r\n        * initialize the users search form widget\r\n        */\n  setupUsersSearchForm: function setupUsersSearchForm(input, user) {\n    var self = this;\n    var content = self.getContent();\n    var def = $.Deferred();\n    $(\"#defaults-admin-case-security-home\").hide();\n\n    self.usersTable = new bizagi.workportal.widgets.userstable(self.workportalFacade, self.dataService, $.extend(self.params, {\n      canvas: $(\"#dinamicContent\", content),\n      userLinkLabel: [bizagi.localization.getResource(\"workportal-widget-admin-defaults-assignation-select-link\")],\n      parentDef: def,\n      showBackButton: true }));\n\n\n    self.usersTable.render();\n\n    $.when(def).done(function (userId, userName) {\n      var params = {\n        action: \"Applications\",\n        userId: userId };\n\n      if (user == 0) {\n        $.when(self.dataService.getApplicationCategoriesList(params)).\n        done(function (applicationList) {\n          self.endLoading();\n          if (applicationList.items.length > 0) {\n            self.allProcess = true;\n            self.haveProcess = true;\n            var typeOption = $(\"div.big-input > input[type='radio']:checked\").val(),\n            text = bizagi.localization.getResource(\"workportal-widget-admin-transfers-case-security-permissions-transfer-permissions-of\");\n            if (typeOption == \"revoke\") {\n              text = bizagi.localization.getResource(\"workportal-widget-admin-transfers-case-security-permissions-revoke-permissions-of\");\n            }\n            self.setupProcessTreePermissions(userId, text);\n          } else {\n            self.initializeTree(bizagi.localization.getResource(\"workportal-widget-admin-transfers-case-security-permissions-user-dont-have-permissions-over-processes\"));\n            self.allProcess = false;\n            self.haveProcess = false;\n          }\n\n        }).fail(function () {\n          self.endLoading();\n          self.initializeTree(bizagi.localization.getResource(\"workportal-widget-admin-transfers-case-security-permissions-user-dont-have-permissions-over-processes\"));\n        });\n      }\n      $(\"#dinamicContent\", content).html(\"\");\n      $(\"#defaults-admin-case-security-home\", content).show();\n      if (userName) {\n        $(input, content).val(userName);\n        self.showHideClearIcon(input, 'block');\n      }\n      if (userId) {\n        self.selectedUsers[user] = userId;\n      }\n    });\n  },\n\n  initializeTree: function initializeTree(text) {\n    var tree = $.tmpl(self.emptyTreeTmpl, { emptyTreeText: text });\n    $(\"#processTreePermissions\", self.content).addClass(\"disableColor\").empty();\n    $(\"#processTreePermissions\", self.content).append(tree);\n  },\n\n  showHideClearIcon: function showHideClearIcon(id, display) {\n    self = this;\n    var content = self.getContent();\n    $(id + \" ~ span\", content).css(\"display\", display);\n  },\n\n  transferCaseSecuritypermissions: function transferCaseSecuritypermissions() {\n    var self = this;\n    self.loader = $.tmpl(self.loaderTmpl, {});\n    var params = {};\n    if (self.haveProcess) {\n      params = self.paramsToInvalidateSelectedCases();\n    }\n\n    params.allProcess = self.allProcess;\n    params.idUserSource = self.selectedUsers[0] != \"\" ? self.selectedUsers[0] : -1;\n    params.idUserTarget = self.selectedUsers[1] != \"\" ? self.selectedUsers[1] : -1;\n\n    if (params.idUserSource == -1 || params.idUserTarget == -1) {\n      bizagi.showMessageBox(bizagi.localization.getResource(\"workportal-widget-admin-transfers-case-security-permissions-fail-you-must-select-both-users-to-continue\"), bizagi.localization.getResource(\"workportal-general-word-information\"), \"warning\");\n    } else\n    if (params.idUserSource == params.idUserTarget) {\n      bizagi.showMessageBox(bizagi.localization.getResource(\"workportal-widget-admin-transfers-case-security-permissions-fail-users-must-be-different\"), bizagi.localization.getResource(\"workportal-general-word-information\"), \"warning\");\n    } else\n    if (!self.haveProcess) {\n      bizagi.showMessageBox(bizagi.localization.getResource(\"workportal-widget-admin-transfers-case-security-permissions-user-dont-have-permissions-over-processes\"), bizagi.localization.getResource(\"workportal-general-word-information\"), \"warning\");\n    } else\n    {\n      var customOptions = {\n        dialogClass: \"widget-admincasesearch-invalidate-cases-confirm\",\n        width: 400,\n        minWidth: 400 };\n\n      $.when(bizagi.showConfirmationBox(bizagi.localization.getResource(\"workportal-widget-admin-transfers-case-security-permissions-confirmation-message\"), bizagi.localization.getResource(\"workportal-general-word-information\"), \"warning\", [\n      {\n        label: bizagi.localization.getResource(\"workportal-general-word-no\"),\n        action: \"reject\" },\n\n      {\n        label: bizagi.localization.getResource(\"workportal-general-word-yes\"),\n        action: \"resolve\" }],\n\n      customOptions)).\n      done(function () {\n        self.showLoading();\n        $.when(self.dataService.transferCaseSecuritypermissions(params)).\n        done(function (response) {\n          self.endLoading();\n          if (response.status === \"true\" || response.status === true) {\n            self.showNotifier(printf(bizagi.localization.getResource(\"workportal-widget-admin-transfers-case-security-permissions-assign-ok\"), response.quantityModifiedCases));\n          } else\n          {\n            self.endLoading();\n            bizagi.showMessageBox(bizagi.localization.getResource(\"workportal-widget-admin-transfers-case-security-permissions-assign-fail\"), bizagi.localization.getResource(\"workportal-general-word-information\"), \"warning\");\n          }\n        }).\n        fail(function (error) {\n          self.endLoading();\n          bizagi.showMessageBox(bizagi.localization.getResource(\"workportal-widget-admin-transfers-case-security-permissions-assign-fail\"), bizagi.localization.getResource(\"workportal-general-word-information\"), \"warning\");\n          bizagi.log(error);\n        });\n      });\n\n    }\n\n  },\n\n  revokeCaseSecuritypermissions: function revokeCaseSecuritypermissions() {\n    var self = this;\n    self.loader = $.tmpl(self.loaderTmpl, {});\n    var params = {};\n    if (self.haveProcess) {\n      params = self.paramsToInvalidateSelectedCases();\n    }\n    params.allProcess = self.allProcess;\n    params.idUserSource = self.selectedUsers[0] != \"\" ? self.selectedUsers[0] : -1;\n\n    if (params.idUserSource == -1 || params.idUserTarget == -1) {\n      bizagi.showMessageBox(bizagi.localization.getResource(\"workportal-widget-admin-transfers-case-security-permissions-fail-you-must-select-the-current-user-to-continue\"), bizagi.localization.getResource(\"workportal-general-word-information\"), \"warning\");\n    } else\n    if (!self.haveProcess) {\n      bizagi.showMessageBox(bizagi.localization.getResource(\"workportal-widget-admin-transfers-case-security-permissions-user-dont-have-permissions-over-processes\"), bizagi.localization.getResource(\"workportal-general-word-information\"), \"warning\");\n    } else\n    {\n      var customOptions = {\n        dialogClass: \"widget-admincasesearch-invalidate-cases-confirm\",\n        width: 400,\n        minWidth: 400 };\n\n      $.when(bizagi.showConfirmationBox(bizagi.localization.getResource(\"workportal-widget-admin-transfers-case-security-permissions-confirmation-message\"), bizagi.localization.getResource(\"workportal-general-word-information\"), \"warning\", [\n      {\n        label: bizagi.localization.getResource(\"workportal-general-word-no\"),\n        action: \"reject\" },\n\n      {\n        label: bizagi.localization.getResource(\"workportal-general-word-yes\"),\n        action: \"resolve\" }],\n\n      customOptions)).\n      done(function () {\n        self.showLoading();\n        $.when(self.dataService.revokeCaseSecuritypermissions(params)).\n        done(function (response) {\n\n          self.endLoading();\n          if (response.status === \"true\" || response.status === true) {\n            self.showNotifier(printf(bizagi.localization.getResource(\"workportal-widget-admin-transfers-case-security-permissions-revoke-ok\"), response.quantityModifiedCases));\n          } else\n          {\n            bizagi.showMessageBox(bizagi.localization.getResource(\"workportal-widget-admin-transfers-case-security-permissions-assign-fail\"), bizagi.localization.getResource(\"workportal-general-word-information\"), \"warning\");\n          }\n        }).\n        fail(function (error) {\n          self.endLoading();\n          bizagi.showMessageBox(bizagi.localization.getResource(\"workportal-widget-admin-transfers-case-security-permissions-assign-fail\"), bizagi.localization.getResource(\"workportal-general-word-information\"), \"warning\");\n          bizagi.log(error);\n        });\n      }).\n      fail(function (error) {\n        console.log(\"error\", error);\n      });\n    }\n\n  },\n\n  paramsToInvalidateSelectedCases: function paramsToInvalidateSelectedCases() {\n    var self = this;\n    var selectedProcessRoute = self.processTreePermissions.getTreeRouteSelected();\n    var idAppToSend = \"\",\n    idProcessToSend = \"\";\n\n    if (selectedProcessRoute.length > 0) {\n      if (selectedProcessRoute.length == 2) {\n        idAppToSend = selectedProcessRoute[1];\n        idProcessToSend = selectedProcessRoute[0];\n      } else\n      {\n        idAppToSend = selectedProcessRoute[selectedProcessRoute.length - 1];\n        idProcessToSend = selectedProcessRoute[0];\n      }\n    }\n    if (idProcessToSend == \"\") {\n      self.allProcess = true;\n    } else\n    {\n      self.allProcess = false;\n    }\n\n    var params = {\n      idProcess: idProcessToSend,\n      idApplication: idAppToSend };\n\n    return params;\n  },\n\n  showNotifier: function showNotifier(message) {\n    var notifier = window.parent.bizagi.injector.get('notifier');\n    notifier.showSucessMessage(message, '');\n  },\n  showLoading: function showLoading() {\n    var self = this;\n    if (bizagi.util.isIE()) {\n      $(\"#defaults-admin-case-security-home\").focus();\n    }\n    $(\"#defaults-admin-case-security-home\").append(self.loader);\n  },\n  endLoading: function endLoading() {\n    var self = this;\n    $(self.loader).remove();\n  },\n  clearInput: function clearInput(input, content) {\n    var self = this;\n    var position = input == \"#txtTextUserSource\" ? 0 : 1;\n    self.showHideClearIcon(input, 'none');\n    $(input, content).val(\"\");\n    self.selectedUsers[position] = \"\";\n  },\n  /****************** EVENTOS ***********************/\n\n\n  setupSearchusersButton: function setupSearchusersButton() {\n    var self = this,\n    content = self.getContent();\n\n    $(\"#btn-searchUserSource\", content).click(function () {\n      self.showLoading();\n      self.setupUsersSearchForm(\"#txtTextUserSource\", 0);\n    });\n    $(\"#btn-searchUserTarget\", content).click(function () {\n      self.setupUsersSearchForm(\"#txtTextUserTarget\", 1);\n    });\n\n    $(\"#btn-clearUserSource\", content).click(function () {\n      self.clearInput(\"#txtTextUserSource\", content);\n      var tree = $.tmpl(self.emptyTreeTmpl, { emptyTreeText: bizagi.localization.getResource(\"workportal-widget-admin-transfers-case-security-permissions-select-current-user\") });\n      $(\"#processTreePermissions\", self.content).addClass(\"disableColor\").empty();\n      $(\"#processTreePermissions\", self.content).append(tree);\n    });\n    $(\"#btn-clearUserTarget\", content).click(function () {\n      self.clearInput(\"#txtTextUserTarget\", content);\n    });\n\n    $(\"#btn-copyPermissions\", content).click(function () {\n      if ($(\"#allAppsLinkSelected\", content).data('allAppSelected') === false && self.processTreePermissions.getTreeRouteSelected().length === 0) {//If nothing has been selected\n        bizagi.showMessageBox(bizagi.localization.getResource(\"workportal-widget-processTree-no-selected-process\"), bizagi.localization.getResource(\"workportal-general-word-information\"), \"warning\");\n      } else {\n        self.transferCaseSecuritypermissions();\n      }\n    });\n    $(\"#btn-revokePermissions\", content).click(function () {\n      if ($(\"#allAppsLinkSelected\", content).data('allAppSelected') === false && self.processTreePermissions.getTreeRouteSelected().length === 0) {//If nothing has been selected\n        bizagi.showMessageBox(bizagi.localization.getResource(\"workportal-widget-processTree-no-selected-process\"), bizagi.localization.getResource(\"workportal-general-word-information\"), \"warning\");\n      } else {\n        self.revokeCaseSecuritypermissions();\n      }\n    });\n\n    $(\"#transferPermissions\", content).click(function () {\n      $(\"input[value='copy']\").attr('checked', true);\n      $(\".security-message-information\", content).show();\n      $(\".security-message-danger\", content).hide();\n      $(\"#btn-copyPermissions\", content).show();\n      $(\"#btn-revokePermissions\", content).hide();\n      $(\".user-label:has(#txtTextUserTarget)\").show();\n      $(\"#title-process-copy\", content).show();\n      $(\"#title-process-revoke\", content).hide();\n      $(\"#revokePermissions\", content).removeClass(\"ui-rubik-button-accept\").addClass(\"ui-rubik-button-cancel\");\n      $(\"#transferPermissions\", content).removeClass(\"ui-rubik-button-cancel\").addClass(\"ui-rubik-button-accept\");\n      self.clearInput(\"#txtTextUserSource\", content);\n      self.clearInput(\"#txtTextUserTarget\", content);\n      var tree = $.tmpl(self.emptyTreeTmpl, { emptyTreeText: bizagi.localization.getResource(\"workportal-widget-admin-transfers-case-security-permissions-select-current-user\") });\n      $(\"#processTreePermissions\", self.content).addClass(\"disableColor\").empty();\n      $(\"#processTreePermissions\", self.content).append(tree);\n    });\n    $(\"#revokePermissions\", content).click(function () {\n      $(\"input[value='revoke']\").attr('checked', true);\n      $(\".security-message-information\", content).hide();\n      $(\".security-message-danger\", content).show();\n      $(\"#btn-copyPermissions\", content).hide();\n      $(\"#btn-revokePermissions\", content).show();\n      $(\".user-label:has(#txtTextUserTarget)\").hide();\n      $(\"#title-process-copy\", content).hide();\n      $(\"#title-process-revoke\", content).show();\n      $(\"#transferPermissions\", content).removeClass(\"ui-rubik-button-accept\").addClass(\"ui-rubik-button-cancel\");\n      $(\"#revokePermissions\", content).removeClass(\"ui-rubik-button-cancel\").addClass(\"ui-rubik-button-accept\");\n      self.clearInput(\"#txtTextUserSource\", content);\n      self.clearInput(\"#txtTextUserTarget\", content);\n      var tree = $.tmpl(self.emptyTreeTmpl, { emptyTreeText: bizagi.localization.getResource(\"workportal-widget-admin-transfers-case-security-permissions-select-current-user\") });\n      $(\"#processTreePermissions\", self.content).addClass(\"disableColor\").empty();\n      $(\"#processTreePermissions\", self.content).append(tree);\n    });\n  } });"]}