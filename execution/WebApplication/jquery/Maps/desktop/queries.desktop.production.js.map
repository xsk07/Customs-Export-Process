{"version":3,"sources":["jquery/workportal/js/base/widget/bizagi.workportal.widgets.listCases.js","jquery/workportal/js/desktop/widget/bizagi.workportal.desktop.widgets.queryform.js","jquery/workportal/js/desktop/widget/bizagi.workportal.desktop.widgets.quickActions.js","jquery/workportal/js/desktop/widget/bizagi.workportal.desktop.widgets.quickActionsExecute.js","jquery/workportal/js/desktop/widget/bizagi.workportal.desktop.widgets.collapsible.js","jquery/workportal/js/desktop/widget/bizagi.workportal.desktop.widgets.checkboxGroup.js","jquery/workportal/js/base/widget/bizagi.workportal.widgets.queries.js","jquery/workportal/js/base/widget/bizagi.workportal.widgets.queryform.js","jquery/workportal/js/desktop/widget/bizagi.workportal.desktop.widgets.queries.js","jquery/workportal/js/desktop/widget/bizagi.workportal.desktop.widgets.queries.definition.js","jquery/workportal/js/desktop/widget/bizagi.workportal.desktop.widgets.queries.shortcut.js","jquery/workportal/desktop/widget/queries.management/bizagi.workportal.desktop.widgets.queries.management.js","jquery/workportal/js/desktop/widget/bizagi.workportal.results.per.page.js"],"names":["_typeof","obj","Symbol","iterator","constructor","prototype","bizagi","workportal","widgets","widget","extend","getWidgetName","BIZAGI_WORKPORTAL_WIDGET_QUERIES","renderContent","template","this","getTemplate","content","$","tmpl","loadtemplates","BIZAGI_WORKPORTAL_WIDGET_LISTCASES","setTableHeadFixed","params","TableElement","floatThead","floatOptions","groupByCaseNumber","util","isIE","find","hide","_startQuickActions","_QActionsStared","undefined","quickActionsInstance","_params","getContainerSelector","getQuickActionContainerSelector","bind","checkAllSelector","getQuickActionCheckAllContainerSelector","refreshShowedResults","updateResults","quickActions","workportalFacade","dataService","tryCatch","referrerParams","changeProcessOptions","changeProcess","_QuickActionsRenderIn","parentTemplate","workItemsInfo","_QActionsContainer","setDataToExecute","renderIn","renderCheckboxGroup","_getWorkItemsInfo","headers","rows","_finalWorkItems","indexWorkItems","_getIndexFromTableColumn","indexCaseNumber","j","length","_rowInfo","fields","_rowWorkItems","workitems","k","_workItem","idCase","id","caseNumber","idWorkItem","columnTitle","columnName","name","findIndex","column","toUpperCase","showCase","idWorkflow","self","getContent","caseSummaryContainer","cache","htmlContent","empty","when","summaryCaseDetails","done","data","adhocProcessId","isAdhoc","isAdhocProcess","idAdhocProcess","hasComments","security","command","graphicQuery","checkSecurityPerm","enableFeatureShowTimelineButton","override","enableTimelineByProcessType","isAvailableTimelineByProcessType","currentState","forEach","idTask","state","displayName","process","processPath","renderedTemplate","caseSummaryTemplate","menuSecurity","appendTo","callTaskDescription","formatInvariantDate","getResource","delegate","routingExecute","caseSummaryDialog","dialog","tabs","active","create","event","ui","activate","newPanel","attr","comments","canvas","readOnly","renderComments","setContext","commentsFocus","e","isPropagationStopped","stopPropagation","oldrenderevent","eventMethod","window","addEventListener","eventer","publish","action","actions","BIZAGI_WORKPORTAL_ACTION_ROUTING","getWorkitems","onlyUserWorkItems","eventAsTasks","workItems","idWorkitem","i","url","serviceLocator","getUrl","iframeOldRender","getCaseFormsRenderVersion","formsVersion","formsRenderVersion","trigger","renderSummaryForm","html","summarySubProcess","subprocess","caseSummaryTemplateSubprocess","summaryAssigness","preview","assignees","eventsUniqueList","each","events","split","el","inArray","push","join","caseSummaryTemplateAssigness","summaryCaseEvents","caseSummaryTemplateEvents","button","click","trim","closest","text","showTimeLine","radNumber","showGraphicQuery","idProcess","parent","val","_getIdCase","buttons","localization","remove","modal","title","width","height","draggable","resizable","close","workItemId","_parent","grep","item","summary","taskDescriptionParams","classNeedsModal","task","description","renderManyTasksDescription","container","proxyPrefix","loader","start","then","rendering","facade","execute","summaryForm","renderingFacade","setTimeout","resizeLayout","isEnableFeature","listCases","BIZAGI_WORKPORTAL_WIDGET_QUERYFORM","parseBoolean","disableFrankensteinQueryForms","notMigratedUrl","modifiedRender","frankensteinRenderContent","idQueryForm","idStoredQuery","idCube","queryFormAction","endPoint","lastQueryFullKey","queryFormURL","queries","init","_super","loadTemplates","concat","queries-elements","queries-empty-elements","queries-query-tree","queries-query-confirm","useNewEngine","postRender","configureTreeNavigation","configureBackButton","renderQueries","scrollVertical","autohide","idParentQuery","appendElement","queryContent","mergeData","emptyTemplate","queriesContainer","getQueries","idElement","merge","checkChildNode","configureNavTree","confirm","children","queryId","prefix","nodesLength","queryDisplayName","headerTemplate","categoryTree","idParent","nodes","categoryWithLink","desktop","popup","closePopupInstance","showQueryFormPopup","idQuery","ajax","destroy","btnBack","nextAll","bizagiScrollbar","arg","currentPopup","widgetName","modalParameters","queries-definition-elements","queries-definition-manage-elements","queries-liveprocesses-query-element","queries-flat-list","queries-query-message-error","mainTemplate","mainTemplateManage","mainTemplateLiveProcessesQuery","flatListTemplate","confirmTemplate","messageErrorTemplate","showManageQueries","templateManage","isManageQueries","QueriesPermissionManager","manageContent","getLiveProcessesQuery","hasLiveProcessesQuery","AdhocUserGroupReport","mergeQueryWithLpContent","lpContent","beforeSavedQueriesContent","manage","tmplRendered","validateMenu","append","addEventToMangeQueries","BIZAGI_WORKPORTAL_WIDGET_QUERIES_MANAGEMENT","maximize","closeVisible","refreshInbox","addEventToLPQuery","document","contentWindow","location","href","indexOf","liveProcessesEvents","routeEvents","route","dispatchEvent","BIZAGI_WORKPORTAL_WIDGET_PROFLY","module","getQueriesDefinitions","securityBizagiQueries","maybePromise","_createPromise","dataResult","_defer","Deferred","resolve","promise","sortObject","sort","a","b","a1","toLowerCase","b1","idNode","pipe","getStoredQueryFormList","defer","storedQueryForms","BizagiQueries","storedQueryForm","stored","queryType","guidForm","renderStoredQueries","queryNameFormatter","currentName","_resource","replace","guidContext","guidEntity","confirmContent","confirmContentParams","notMigratedUrlDelete","paramsStoredQuery","guid","result","definition","edit","messageErrorForm","productBuildToAbout","cookie","messageError","get","deleteStoredQueryForm","idStoredQueryForm","maximizeOnly","editQueryForm","showPopUpEditQueryForm","executeQueryForm","showPopUpResultsQueryForm","response","getParamsStoredQuery","queries-shortcut","queries-shortcut-flat-list","queries-shortcut-query-confirm","queries-shortcut-query-message-error","handleEvents","shortcut","instance","show","queryFormShortcut","arrow","is","removeClass","addClass","queryform","SELECTORS","FORM_LOADER","FORM","FORM_BUTTONS","QUERY_FORM_ACTIONS","EDIT","RENDER_QUERY_FORM","SUBMIT_QUERY_FORM","GRAPHICAL_ANALYSIS","EXECUTE","SAVE_QUERY_FORM","queryform-wrapper","queryform-container","queryform-buttons","queryform-graphic-analysis","queryform-result-set","queryform-search-result","queryform-pagination","queryform-admin-result","queryform-share-selection","queryform-select-user","queryform-select-group","queryform-save-as","queryform-message-error","inbox-common-case-summary","inbox-common-case-summary-subprocess","inbox-common-case-summary-assignees","inbox-common-case-summary-events","referrer","lstIdCasesBackup","lstIdCases","Boolean","modifiedPostRender","frankensteinPostRender","comboRowsPerPage","results","per","page","loadResultsOnActionExecute","hasOwnLoader","queryFormParams","h_action","h_contexttype","contextType","h_idForm","getQueryForm","queryFormElements","form","elements","initialSearchParams","numberOfRows","getItemsPerPage","findResults","pageToShow","storeQueryFormParams","additionalParams","actionForm","clone","queryForm","itemsPerPagePreference","getRowValue","reloadDataResults","calculateNewPage","newItemsPerPage","previousItemsPerPage","previousPage","currentFirstItem","newPage","Math","ceil","preservePage","_ACTIONS","Class","itemsPerPage","Number","queryParams","pageNumber","searchParamsOnActionExecute","renderNumberRowsCombo","comboDataSource","combo","comboWrapper","onChange","setPersistCheckboxGroup","setRowValue","preferences","services","getPreferences","storedValue","queriesItemsPerPage","value","modifiedJSON","overridePreferences","graphicalAnalysisContainer","resultSet","searchResult","paginationTmpl","adminResult","selectUser","selectGroup","shareSelection","dialogSaveAsTmpl","_adjustViewLoader","LOADER","BUTTONS","_start","isStart","_noOp","stop","maxElemShow","maxPageToShow","atLeastOneChecked","selectedItemsToShare","users","groups","readyToSave","includeAllUsers","saveAs","sortedField","storedQueryFormParameters","dialogSaveAs","orderType","ASC","DESC","NONE","queryFormContextTypes","CASES","ENTITY","queryFormTypes","htmlMessage","ownerQuery","showSaveResultsForm","prop","entityGuid","queryFormType","type","renderQueryForm","previousValues","parameters","JSON","parse","initSortParameters","actionSubmitQueryForm","queryFormGuid","owner","stringify","values","h_idqueryform","renderContainer","renderingParams","startAndThen","properties","validateRequireField","keyup","css","setXpathValuesToQueryForm","parentName","parentQueryForm","_adjustValueOnRestore","parameter","control","_setValueAndDisplay","_set","normal","_revert","setValue","setDisplayValue","_onRestore4Cascade","_deferCanSet","_parentReady","getParentCombo","asyncRenderDeferred","wait4MeOnRestore","deff","internalSetInitialValueFlag","searchParameters","key","renderId","getRenderById","getRender","xpath","ready","advancedQuery","setFilter","filterType","console","log","_recalculateShowQueryForm","recalculateQueryForm","pageResultsData","I_PROCESSSTATE","h_idEnt","h_idQueryForm","enableButton","dialogContent","originalHeight","searchParams","request","getSearchParams","submitQueryForm","disableButton","tooltip","createStoredQueryForm","that","updateStoredQueryForm","fromExec","paramsStored","htmlGraphicalAnalysis","h_guidQueryForm","h_idStoredQuery","h_definition","delay","submit","iframe","dialogHeight","calculateHeight","on","sortParameter","sorted","newParameters","included","searchType","requestForSearch","refactorParameters","p_sessionId","getQueryFormExportExcel","size","removeAttr","onlyLocalResults","throwMessageAtLeastOneCheck","showMessageBox","validateTypeAndOneCheck","_selectorForCheckboxes","isInShareTab","_checkboxesBase","loadingGetQueryForm","bizagiConfig","group","deferResults","getQueryFormResponse","_formLoader","always","resultList","timeline","_pageExists","enabledIcons","validateSecurityOptionIcons","totalRecords","records","totalPages","total","showSearchResultFrame","fail","error","tmpTL","radNumerIndex","row","header","dataType","splice","checkDisplayedNames","foundDisplayName","getRenderElementDisplayByXpath","searchParameter","storedQueryFormParameter","fullParameterXpath","displayXpath","storedDefinition","displayHeader","l","element","render","includePreference","elementXpath","fullEelementXpath","_checkOverrideAboutRemoveSymbol","formattedValue","enableSymbolMoneyColumnQueryResult","BIZAGI_DEFAULT_CURRENCY_INFO","symbol","_checkOverridesFormatMoneyColumnQueryResults","originalValue","enableFormatMoneyColumnQueryResult","_formatValue","formatValueByDataType","cleanEmptyColorState","haveQuickActions","resultTemplate","enableQueryDetailView","securityGraphicQuery","GraphicQuery","getRadNumberColumnIndex","index","fieldName","showColumn","columnIndex","createGroupedHeader","rowIndex","getRadNumber","formatValue","proxy","isIEAndFirstRowAndGroupCases","getIdCases","initCombo","paginationHtml","pageToshow","summaryWrapper","pagerData","pagination","pages","permissions","canExportData","canAnalizeData","bizagiPagination","actualPage","listElement","clickCallBack","options","target","first","paramXpath","findSortedResults","currentTarget","disposeGoToCase","getAttribute","position","scrollContainer","applyFomatNumbers","elementsDataType","userLocalization","numberHeaders","formatInvariantNumber","_rows","Array","isArray","_findIdCase","itemFounded","map","_valid","filter","_lstIdCasesBackup","goToCase","_closedByCase","col","colorState","clonedParams","buildParametersForSorting","isAddedTableSorting","_parameters","param","_previousValues","String","buildStoredQueryFormParams","deferred","saveStoredQueryForm","has","getWidget","reject","closeQueryForm","unique","alert","nameSaveAs","nameSave","validationController","validateForm","next","_isInShareTab","initShareSelection","_canGoToForm","change","searchGroupToShare","shareSlection","test","searchUserToShare","removeItem","addItem","searchSavedUser","filterData","userName","domain","fullName","queryFormId","searchUsersSharedQuery","filteredUsers","idUser","toString","showDataToShare","shareType","searchUsersByID","addPrevious","searchProfiles","profileType","filteredGroups","groupsSelected","items","itemSelected","selectData","elementList","replaceWith","Option","auxUsers","toArray","arrayUserValues","userId","HTMLEncodeText","strText","strNew","cssList","injectCss","getStyle","load","iframeContent","contents","siblings","callBack","openBACase","sHref","workitem","workflow","substring","controller","routingAction","getElementById","lstCasesElement","bizagireference","dialogStack","ShowCaseSumary","version","BIZAGI_WORKPORTAL_WIDGET_GENERICIFRAME","widgetURL","resources","afterLoad","afterLoadParams","genericIframe","callInside","jQuery","dispose","selectedUsers","queries-management","queries-management-loader","queries-management-table","setupSearchusersButton","loaderTmpl","fixedHeadTable","fixedHeadTableElement","zIndex","onResizeModalEvent","clean","parents","setupUsersSearchForm","input","user","def","usersTable","userstable","userLinkLabel","parentDef","showBackButton","getApplicationCategoriesList","applicationList","allProcess","haveProcess","showHideClearIcon","showNotifier","message","injector","showSucessMessage","showLoading","endLoading","clearInput","display","guidUser","getManagementQueries","dataTable","renderTable","contentTable","validateUsers","resp","transferQueries","label","showConfirmationBox","dialogClass","minWidth","guidUserSource","guidUserTarget","register","management","bizagiConfigProperty","v","_findValue","finding","c","initialValueCombo","initValueCombo","preferencesItemsPerPage","defaultValue","lastValue","uicombo","isEditable","itemValue","itemText","onComplete","initValue","CLASS_ACTIVE_MORE_BUTTON","SELECTOR_NUMBER_SELECTED","SELECTOR_BUTTONS_CONTAINER","SELECTOR_BUTTON_LAUNCH","SELECTOR_SUMMARY_EXECUTED_ACTIONS","SELECTOR_HIDDEN_BUTTON_LAUNCH","SELECTOR_MORE_BUTTON","SELECTOR_HIDDEN_BUTTONS_CONTAINER","SELECTOR_INBOX_GRID_TITLE","DATA_PROPERTIES","TOTAL_SELECTED","SHOW","BUTTONS_TO_SHOW","BUTTONS_HIDDEN","WIDTH_BUTTONS_CONTAINER","SHOW_MORE_BUTTON","SHOW_HIDDEN_BUTTONS","callback","callbackCheckboxGroup","checkboxGroup","quick-actions-container","quick-actions-button","quick-actions-modal-confirm","quick-actions-more-button","quick-actions-button-hidden","_setInitialData","_template","_events","_updateView","newValue","persistCheckboxGroup","itemsInfo","setAvailableButtons","itemsSelected","getChecked","_updateButtonsToShow","_setItemsSelected","_buttonsToShow","getButtonsToShow","_showCurrentButtons","_buttons","_labels","Object","keys","quickActionsPerName","_label","_buttonQuickActions","_shouldShowButton","buttonQuickActions","_showButton","_compareFunction","qa","_idWorkItem","_idTask","some","itemsToShow","_newButtons","_addButtons","context","_idWorkItemsToShow","_filterItemsToShowCheckbox","_workItems","idTasksWithQuickActions","addItemToShowCheckbox","_renderButton","hidden","_templeateToUse","_renderMoreButton","off","unsubscribe","_clickOnAction","_clickOnMore","subscribe","_adjustButtonsWidth","_prop","_title","textContent","_num","_getNumberOfSelected","_textToShow","getResourceByElementsNumber","_message","numberActivities","_modalParams","_buildParamsForModalConfirm","_buttonClicked","_setProperty","apply","setInitialDataForModal","showResultDialog","_data","activities","_buttonActions","_itemInfo","_quickAction","_newTask","taskId","activityName","TaskName","caseId","icon","quickActionGuid","ruleGuid","guidRule","itemIsChecked","selected","titleModal","class","_showHidden","_getProperty","setOnly","_setOnly","_changed","_valToReturn","_cloneWith","_updateViewSelected","_element","_eContainer","_eFirstButton","_buttons_all","_buttons_shown","_buttons_hidden","_container_width","_newContainer_width","outerWidth","_resized","_isOverLapped","outerHeight","_existsButtonsShown","_lastButtonShown","slice","_buttonsShown_exceptLast","_newButtonsHidden","_updateViewButtons","_buttonsShown","_buttonsHidden","_moreButton","_containerToShow","_containerToHide","_newButton","_updateViewMoreButton","_show","_isActive","toggleClass","_updateViewContainer","_inboxGridTitle","_updateViewHiddenButtons","num","_selectedVal","_showVal","instanceQuickActionsExecute","triggerHandler","BIZAGI_WORKPORTAL_WIDGET_QUICKACTIONS_EXECUTE","showStopConfirmModal","closeOnEscape","onClose","getRenderWidget","registerDialog","prependTo","SELECTOR_BUTTON_STOP_ALL","SELECTOR_BUTTON_CLOSE","SELECTOR_ONE_RESULT","TYPE_ROW_DEFAULT","TYPE_ROW_ONLY_DEFAULT_TEXT","TYPE_ROW_ONLY_ERROR_TEXT","ACTIVITIES","END_ALL_REQUESTS","STOP_BY_USER","NUMBER_EXECUTED_ACTIONS","DIALOG","RESULT_SUCCESS","RESULT_EXECUTED","RESULT_WARNING","RESULT_ERROR","quickActions-execute","quick-actions-stop-all-modal-confirm","summaryText","_getSummaryText","requesterService","quickActionsRequester","_processResponseOfExecuteQuickActions","startAllRequests","_showDefaultWarningMessageBrowser","_configureHandlers","_updateViewSummaryExecutionActions","_activities","_numberExecutedActions","_onClickFilterButton","_target","correspondingUseElement","$button","filterBy","_showFilterResults","_completeText","_noResultsText","_elementsToShow","dataResponse","_disableBtnStopAll","itemToShow","_addRowToResultsWithType","activityToAdd","activity","paramsRequest","details","status","statusAndDataResponseToShow","_getStatusByBackResponse","backResponse","_setResultToActionRequest","numberSkipActions","_hideBtnStopAllAndShowClose","_manageExecuteModalCloseButton","stopAllRequests","paramsItem","paramsToCreateItem","itemInstance","collapsible","getView","itemContent","_changeProperties","setStatus","setIcon","setDescription","_status","_description","tag","messages","statusText","_getFinalDataResponse","_getIcon","dialogBox","SELECTOR_TITLE","SELECTOR_SUBTITLE","SELECTOR_STATUS","SELECTOR_ICON","SELECTOR_DESCRIPTION","SELECTOR_ARROW","SELECTOR_COLLAPSIBLE_LINK","SELECTOR_COLLAPSIBLE_DESCRIPTION","SELECTOR_COLLAPSIBLE_ITEM","RESULT_IN_PROCESS","TYPE_ROW","ID","TITLE","SUBTITLE","STATUS","ICON","DESCRIPTION","quick-actions-items","quick-actions-item-only-default-text","quick-actions-item-only-error-text","rendered","slideToggle","hasClass","_changeArrow","add","_setId","_text","_selectorStatus","_selectorArrow","newIcon","_selectorIcon","selector","newDescription","_updateViewAll","_subtitle","_icon","_selectorTitle","_selectorSubtitle","_selectorDescription","CHECKBOX_CLASS","CHECKBOX_CHECKED_CLASS","CHECK_ALL","quick-actions-checkbox","_CHECK_ALL_CHECKBOX_CONTAINER","_CHECK_ALL_CHECKBOX","_getContainerSelector","_onItemsCheckedChange","checkedItems","_checkboxTemplate","checkboxContent","persistCheckbox","_items","_context","_renderCheckbox","_configureCheckAllCheckbox","loadStoredItems","stillChecked","substr","_refreshCheckAllCheckbox","clearCheckedItems","_toggleCheckAllCheckbox","_containerSelector","_checkboxSelector","_content","_updateCheckedItems","_addDataToCheckbox","checkbox","_getDataFormCheckbox","_itemWasChecked","_removeItemChecked","_addItemChecked","_newCheckedAll","_getNumberOfItemsChecked","checkAllNewValue","_checkAll","_newCheckAll","_refreshAllCheckboxes","checkAll","_checkboxNotPrincipal","not","_updateViewCheckAll","_checked"],"mappings":"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","sourcesContent":["function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /*\r\n                                                                                                                                                                                                                                                                                                                                                                               *   Name: BizAgi Desktop List Cases implementation\r\n                                                                                                                                                                                                                                                                                                                                                                               *   Author: Kevin Alvarado\r\n                                                                                                                                                                                                                                                                                                                                                                               *   Used for Search, Queries Result and InboxGrid Desktop\r\n                                                                                                                                                                                                                                                                                                                                                                               *   Because they share show cases as list \r\n                                                                                                                                                                                                                                                                                                                                                                               */\n\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.listCases\", {}, {\n  /*\r\n                                                                                     *   Returns the widget name\r\n                                                                                     */\n  getWidgetName: function getWidgetName() {\n    return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_LISTCASES;\n  },\n\n  /**\r\n     * Set the table with the fixed thead\r\n     * @param {Json} params TableElement,groupByCaseNumber,floatOptions\r\n     */\n  setTableHeadFixed: function setTableHeadFixed(params) {\n    params.TableElement.floatThead(params.floatOptions);\n\n    if (params.groupByCaseNumber && bizagi.util.isIE()) {\n      params.TableElement.find(\"tbody > tr.ui-bizagi-wp-app-inbox-grouped-trtag-hide\").hide();\n    }\n  },\n  /**\r\n     * create a new instance and start to show the checkboxGroup for each activity\r\n     */\n  _startQuickActions: function _startQuickActions() {\n    var self = this,\n    _QActionsStared = self.quickActionsInstance !== undefined,\n    _params = {\n      getContainerSelector: self.getQuickActionContainerSelector.bind(self),\n      checkAllSelector: self.getQuickActionCheckAllContainerSelector(),\n      refreshShowedResults: self.updateResults.bind(self) };\n\n    if (!_QActionsStared)\n    self.quickActionsInstance = new bizagi.workportal.widgets.quickActions(self.workportalFacade, self.dataService, _params);\n  },\n\n  /**\r\n      * Refresh page results\r\n      */\n  updateResults: function updateResults() {\n    var self = this;\n    var _params = bizagi.util.tryCatch(function () {return bizagi.referrerParams.changeProcessOptions;}, {});\n    self.changeProcess(_params);\n  },\n\n  /**\r\n      * render quickActions in parentTemplate\r\n      * @param {Jquery Template} parentTemplate \r\n      */\n  _QuickActionsRenderIn: function _QuickActionsRenderIn(parentTemplate, workItemsInfo, quickActions) {\n    var self = this,\n    _QActionsContainer = parentTemplate.find(\"#contentQuickActions\");\n\n    self.quickActionsInstance.setDataToExecute(workItemsInfo, quickActions);\n    self.quickActionsInstance.renderIn(_QActionsContainer);\n    self.quickActionsInstance.renderCheckboxGroup(parentTemplate);\n  },\n\n  /**\r\n      * Filter the data from the workItems to send to QuickAction Widget.\r\n      * Return a dictionary by the workItem id as key and its information as value.\r\n      * @param {*} headers\r\n      * @param {*} rows\r\n      */\n  _getWorkItemsInfo: function _getWorkItemsInfo(headers, rows) {\n    var self = this,\n    _finalWorkItems = {};\n\n    var indexWorkItems = self._getIndexFromTableColumn(headers, \"order\", \"T_IDTASK\");\n    var indexCaseNumber = self._getIndexFromTableColumn(headers, \"order\", \"T_RADNUMBER\");\n\n    for (var j = 0; j < rows.length && indexWorkItems !== -1; j++) {\n      var _rowInfo = rows[j].fields,\n      _rowWorkItems = _rowInfo[indexWorkItems].workitems;\n\n      for (var k = 0; k < _rowWorkItems.length && indexCaseNumber !== -1; k++) {\n        var _workItem = _rowWorkItems[k];\n\n        _workItem.idCase = rows[j].id;\n        _workItem.caseNumber = _rowInfo[indexCaseNumber];\n        _finalWorkItems[_workItem.idWorkItem] = _workItem;\n      }\n    }\n\n    return _finalWorkItems;\n  },\n\n  /**\r\n      * Get the index of the column for workItems\r\n      */\n  _getIndexFromTableColumn: function _getIndexFromTableColumn(columnTitle, columnName, name) {\n    return columnTitle.findIndex(function (column) {\n      return column[columnName].toUpperCase() === name;\n    });\n  },\n\n  /**\r\n      * Return the selector of the quick action checkbox\r\n      * @param {*} workItem \r\n      */\n  getQuickActionCheckAllContainerSelector: function getQuickActionCheckAllContainerSelector() {\n    return \"#ui-quickActions-all-processes\";\n  },\n\n  /**\r\n      * Return the selector of the quick action checkbox\r\n      * @param {*} workItem \r\n      */\n  getQuickActionContainerSelector: function getQuickActionContainerSelector(id) {\n    return \"#ui-quickActions-checkbox-\" + id;\n  },\n\n  /*\r\n     *   Shows a popup with the case information\r\n     */\n  showCase: function showCase(idCase, idWorkflow) {\n    var self = this;\n    var content = self.getContent();\n    var caseSummaryContainer = $(\"#contentDesc\", content);\n    var cache = {};\n    var htmlContent = \"\";\n\n    // Update internal variable\n    self.idCase = idCase;\n\n    caseSummaryContainer.empty();\n\n    // Don't search data when there is no case\n    if (self.idCase == 0) {\n      return;\n    }\n\n    // Render Form Tab\n    $.when(self.dataService.summaryCaseDetails({\n      idCase: self.idCase })).\n\n    done(function (data) {\n      var adhocProcessId = null;\n      var isAdhoc = false;\n      if (!data.isAdhocProcess || typeof data.isAdhocProcess === 'undefined') data.isAdhocProcess = false;\n      if (data.isAdhocProcess) {\n        adhocProcessId = data.idAdhocProcess;\n        isAdhoc = true;\n      }\n      data.hasComments = data.hasComments == 'true' ? true : false;\n\n      // Get security\n      var security = new bizagi.workportal.command.security(self.dataService);\n      data.graphicQuery = security.checkSecurityPerm(\"GraphicQuery\");\n\n      data.enableFeatureShowTimelineButton = bizagi.override.enableFeatureShowTimelineButton;\n      data.enableTimelineByProcessType = self.isAvailableTimelineByProcessType(data.isAdhocProcess);\n\n      if (data.currentState && data.currentState.length > 0) {\n        data.currentState.forEach(function (currentState) {\n          if (!currentState.idTask) {\n            currentState.idTask = 0;\n          }\n          if (!currentState.state) {\n            currentState.state = currentState.displayName || \" \";\n          }\n        });\n      }\n\n      if (data.process === \"undefined\" || data.process === \"\" || typeof data.process === \"undefined\") {\n        data.process = false;\n      }\n\n      if (data.processPath === \"undefined\" || data.processPath === \"\" || typeof data.processPath === \"undefined\") {\n        data.processPath = false;\n      }\n\n\n      var renderedTemplate = $.tmpl(self.caseSummaryTemplate, $.extend(data, { security: bizagi.menuSecurity })).appendTo(caseSummaryContainer);\n      self.callTaskDescription(data, renderedTemplate);\n\n      // Format invariant dates\n      bizagi.util.formatInvariantDate(content, self.getResource(\"dateFormat\") + \" \" + self.getResource(\"timeFormat\"));\n\n\n      // Delegate events for parent process\n      $(\"#details\", renderedTemplate).delegate(\".summaryLink\", \"click\", function () {\n        self.routingExecute($(this));\n        caseSummaryDialog.dialog('close');\n      });\n\n      var caseSummaryDialog = renderedTemplate;\n\n      // jQuery-ui tabs\n      $(\"#ui-bizagi-details-tabs\", content).tabs({\n        active: -1,\n        create: function create(event, ui) {\n          $(this).tabs(\"option\", \"active\", 0);\n        },\n        \"activate\": function activate(event, ui) {\n          var panel = ui == undefined ? \"formSummary\" : ui.newPanel.attr('id');\n          switch (panel) {\n            case \"comments\":\n              if (cache[\"comments\"] == undefined) {\n                // Extend render with comments\n                $.extend(self, {}, bizagi.workportal.comments);\n\n                // Define canvas\n                data.canvas = $(\"#comments\");\n                data.readOnly = true;\n\n                $.when(self.renderComments(data)).\n                done(function (htmlContent) {\n                  cache[\"comments\"] = htmlContent;\n                });\n              }\n              bizagi.util.setContext({\n                commentsFocus: true });\n\n              break;\n            case \"formSummary\":\n              if (cache[\"formSummary\"] == undefined) {\n                var canvas = $(\"#formSummary\", caseSummaryContainer);\n\n                // Define action when render form has not been migrated\n                canvas.bind(\"oldrenderintegration\", function (e) {\n                  if (e.isPropagationStopped()) {\n                    return;\n                  }\n                  e.stopPropagation();\n\n                  var template = self.getTemplate(\"inbox-common-case-summary-oldrender\");\n                  var data = {};\n\n                  bizagi.oldrenderevent = true; // has been loaded\n                  var eventMethod = window.addEventListener ? \"addEventListener\" : \"attachEvent\";\n                  var eventer = window[eventMethod];\n                  var messageEvent = eventMethod == \"attachEvent\" ? \"onmessage\" : \"message\";\n\n                  // Listen to message from child window\n                  eventer(messageEvent, function (e) {\n                    e.stopPropagation();\n                    self.publish(\"executeAction\", {\n                      action: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,\n                      idCase: e.data });\n\n                  }, false);\n\n                  // Define wirkitem and idtask\n                  $.when(self.dataService.getWorkitems({\n                    idCase: self.idCase,\n                    onlyUserWorkItems: true,\n                    eventAsTasks: true })).\n                  done(function (getWorkitems) {\n                    // verify workitem, in some cases these variables are not available\n                    if (_typeof(getWorkitems.workItems) == \"object\" && getWorkitems.workItems.length >= 1) {\n                      // Case Open\n                      var idWorkitem = getWorkitems.workItems[0]['idWorkItem'];\n                      var idTask = getWorkitems.workItems[0]['idTask'];\n\n                      for (i = 0; i < getWorkitems.workItems.length; i++) {\n                        if (getWorkitems.workItems[i]['idCase'] == self.idCase) {\n                          idWorkitem = getWorkitems.workItems[i]['idWorkItem'];\n                          idTask = getWorkitems.workItems[i]['idTask'];\n                          break;\n                        }\n                      }\n\n                      data.url = self.dataService.serviceLocator.getUrl(\"old-render\") + \"?PostBack=1&idCase=\" + self.idCase + \"&idWorkitem=\" + idWorkitem + \"&idTask=\" + idTask + \"&isSummary=1\";\n                    } else {\n                      // Case closed\n                      data.url = self.dataService.serviceLocator.getUrl(\"old-render\") + \"?PostBack=1&idCase=\" + self.idCase + \"&isSummary=1\";\n                    }\n\n                    // Render content\n                    canvas.empty();\n                    $.tmpl(template, data).appendTo(canvas);\n                    //Set styles\n                    self.iframeOldRender($(\"iframe\", canvas));\n                  });\n                });\n\n                var params = {\n                  idCase: self.idCase };\n\n\n                $.when(self.dataService.getCaseFormsRenderVersion(params)).\n                done(function (formsVersion) {\n                  if (formsVersion.formsRenderVersion == 1) {\n                    canvas.trigger(\"oldrenderintegration\");\n                  } else {\n                    $.when(\n                    self.renderSummaryForm($(\"#formSummary\", renderedTemplate))).\n                    done(function () {\n                      htmlContent = $(\"#formSummary\", renderedTemplate).html();\n                      cache[\"formSummary\"] = htmlContent;\n                    });\n                  }\n                });\n              }\n              break;\n            case \"subprocess\":\n              if (cache[\"subprocess\"] == undefined) {\n                $.when(\n                self.dataService.summarySubProcess({\n                  idCase: self.idCase })).\n\n                done(function (subprocess) {\n                  htmlContent = $.tmpl(self.caseSummaryTemplateSubprocess, subprocess);\n                  htmlContent.appendTo($(\"#subprocess\", renderedTemplate));\n                  cache[\"subprocess\"] = htmlContent;\n\n                  // Define Events for subprocess tab\n                  htmlContent.delegate(\".summaryLink\", \"click\", function () {\n                    self.routingExecute($(this));\n                    caseSummaryDialog.dialog('close');\n                  });\n                });\n              }\n              break;\n            case \"assignees\":\n              if (cache[\"assignees\"] == undefined) {\n                $.when(\n                self.dataService.summaryAssigness({\n                  idCase: self.idCase,\n                  preview: true })).\n\n                done(function (assignees) {\n                  // Generates  lists of unique assignees for Events\n                  var eventsUniqueList = [];\n                  $.each(assignees.events.split(\", \"), function (i, el) {\n                    if ($.inArray(el, eventsUniqueList) === -1) eventsUniqueList.push(el);\n                  });\n                  assignees.events = eventsUniqueList.join(\", \");\n\n                  htmlContent = $.tmpl(self.caseSummaryTemplateAssigness, assignees);\n                  htmlContent.appendTo($(\"#assignees\", renderedTemplate));\n                  cache[\"assignees\"] = htmlContent;\n                });\n              }\n              break;\n            case \"events\":\n              if (cache[\"events\"] == undefined) {\n                $.when(\n                self.dataService.summaryCaseEvents({\n                  idCase: self.idCase })).\n\n                done(function (events) {\n                  htmlContent = $.tmpl(self.caseSummaryTemplateEvents, events);\n                  htmlContent.appendTo($(\"#events\", renderedTemplate));\n                  cache[\"events\"] = htmlContent;\n\n                  htmlContent.delegate(\".summaryLink\", \"click\", function () {\n                    self.routingExecute($(this));\n                    caseSummaryDialog.dialog('close');\n                  });\n                });\n              }\n              break;}\n\n        } });\n\n\n\n      // jquery UI Button work on it button\n      $(\".workonitRow\", renderedTemplate).button();\n\n      // Add click to timeline icon\n      $(\".js-show-timeline\", renderedTemplate).click(function (event) {\n        var caseNumber = $.trim($(this).closest(\"div.ui-bizagi-wp-app-inbox-processes-title\").find(\"span.js-case-number\").text());\n        self.showTimeLine({ radNumber: caseNumber, idCase: idCase });\n      });\n\n      // Add click to view workflow\n      $(\"#ui-bizagi-wp-app-inbox-description-container .ui-bizagi-wp-app-inbox-cases-ico-view\", content).click(function () {\n        if (isAdhoc) {\n          self.showGraphicQuery({ idCase: idCase, idWorkflow: idWorkflow, isAdhoc: true, idProcess: adhocProcessId });\n        } else {\n          self.showGraphicQuery({ idCase: idCase, idWorkflow: idWorkflow });\n        }\n      });\n\n\n\n      // Bind events for events and process on summary case\n      $(\".workonitRow\", renderedTemplate).click(function () {\n        // Executes routing action\n        caseSummaryDialog.dialog('close');\n        var idWorkItem = $(this).parent().find(\"#idWorkItem\").val();\n        self.publish(\"executeAction\", {\n          action: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,\n          idCase: self._getIdCase(data, idWorkItem),\n          idWorkflow: idWorkflow,\n          idTask: $(this).parent().find(\"#idTask\").val(),\n          idWorkItem: idWorkItem });\n\n      });\n\n      // Set buttons\n      var buttons = {};\n      buttons[bizagi.localization.getResource(\"workportal-case-dialog-box-close\")] = function () {\n        caseSummaryContainer.empty();\n        renderedTemplate.remove();\n        $(\"#ui-bizagi-wp-app-inbox-description-container\").remove();\n      };\n\n      caseSummaryDialog.dialog({\n        modal: true,\n        title: data.process,\n        width: 1000,\n        height: 600,\n        draggable: true,\n        resizable: true,\n        buttons: buttons,\n        close: function close() {\n          caseSummaryContainer.empty();\n          renderedTemplate.remove();\n          $(\"#ui-bizagi-wp-app-inbox-description-container\").remove();\n        } });\n\n\n    });\n  },\n\n  /**\r\n      * Returns the idCase or the parent idCase\r\n      * @param {JSON} data \r\n      * @param {String} workItemId \r\n      * @returns \r\n      */\n  _getIdCase: function _getIdCase(data, workItemId) {\n    var _parent = $.grep(data.currentState, function (item) {\n      return item.idWorkItem == workItemId;\n    })[0],\n    _hasParent = _parent && _parent.idCase !== undefined;\n\n    return _hasParent ? _parent.idCase : data.idCase;\n  },\n\n  /**\r\n      * \r\n      * Call task description widget \r\n      */\n\n  callTaskDescription: function callTaskDescription(data, summary) {\n    var self = this;\n    var width = 720;\n    var taskDescriptionParams = {\n      classNeedsModal: \"task_description_needs_modal\",\n      width: width };\n\n    new bizagi.workportal.widgets.task.description(self.workportalFacade, self.dataService, taskDescriptionParams).renderManyTasksDescription(data.currentState, summary);\n  },\n\n\n  /*\r\n     *   Renders the summary form inside a given container\r\n     */\n  renderSummaryForm: function renderSummaryForm(container) {\n    var self = this;\n\n    var proxyPrefix = typeof self.dataService.serviceLocator.proxyPrefix !== \"undefined\" ?\n    self.dataService.serviceLocator.proxyPrefix : \"\";\n\n    bizagi.loader.start(\"rendering\").then(function () {\n      // Load render page\n      var rendering = new bizagi.rendering.facade({ \"proxyPrefix\": proxyPrefix });\n\n      // Executes rendering into render container\n      rendering.execute({\n        canvas: container,\n        summaryForm: true,\n        idCase: self.idCase });\n\n\n      // Keep reference to rendering facade\n      self.renderingFacade = rendering;\n\n      // Resize layout\n      setTimeout(function () {\n        self.resizeLayout();\n      }, 1000);\n    });\n  },\n\n  /**\r\n      * Validate if the timeline icon should be shown or not, depending on features endpoint\r\n      */\n  isAvailableTimelineByProcessType: function isAvailableTimelineByProcessType(isAdhocProcess) {\n    return !isAdhocProcess ||\n    isAdhocProcess && bizagi.util.isEnableFeature(\"enableTimelineOnLiveProcesses\");\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /*\r\n                                                                                                                                                                                                                                                                                                                                                                               *   Name: BizAgi Desktop Queries Dialog implementation\r\n                                                                                                                                                                                                                                                                                                                                                                               *   Author: Juan Pablo Crossley\r\n                                                                                                                                                                                                                                                                                                                                                                               */\n// Extends itself\nbizagi.workportal.widgets.queryform.extend(\"bizagi.workportal.widgets.queryform\", {\n  SELECTORS: {\n    FORM_LOADER: \"#query-form-loader\",\n    FORM: \"#query-form\",\n    FORM_BUTTONS: \"#query-form-buttons\" },\n\n  QUERY_FORM_ACTIONS: {\n    EDIT: \"edit\",\n    RENDER_QUERY_FORM: \"renderQueryForm\",\n    SUBMIT_QUERY_FORM: \"submitQueryForm\",\n    GRAPHICAL_ANALYSIS: \"graphicalAnalysis\",\n    EXECUTE: \"execute\",\n    SAVE_QUERY_FORM: \"saveQueryForm\" } },\n\n{\n\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    //Load templates\n    self.loadTemplates({\n      \"queryform\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.queryform\").concat(\"#ui-bizagi-workportal-widget-frankenstein-queryform-wrapper\"),\n      \"queryform-wrapper\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.queryform\").concat(\"#ui-bizagi-workportal-widget-queryform-wrapper\"),\n      \"queryform-container\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.queryform\").concat(\"#ui-bizagi-workportal-widget-queryform-container\"),\n      \"queryform-buttons\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.queryform\").concat(\"#ui-bizagi-workportal-widget-queryform-buttons\"),\n      \"queryform-graphic-analysis\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.queryform\").concat(\"#ui-bizagi-workportal-widget-queryform-graphic-analysis\"),\n      \"queryform-result-set\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.queryform\").concat(\"#ui-bizagi-workportal-widget-queryform-result-set\"),\n      \"queryform-search-result\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.queryform\").concat(\"#ui-bizagi-workportal-widget-queryform-search-result\"),\n      \"queryform-pagination\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.queryform\").concat(\"#ui-bizagi-workportal-widget-queryform-pagination\"),\n      \"queryform-admin-result\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.queryform\").concat(\"#ui-bizagi-workportal-widget-queryform-admin-result\"),\n      \"queryform-share-selection\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.queryform\").concat(\"#ui-bizagi-workportal-widget-queryform-share-selection\"),\n      \"queryform-select-user\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.queryform\").concat(\"#ui-bizagi-workportal-widget-queryform-select-user\"),\n      \"queryform-select-group\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.queryform\").concat(\"#ui-bizagi-workportal-widget-queryform-select-group\"),\n      \"queryform-save-as\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.queryform\").concat(\"#ui-bizagi-workportal-widget-queryform-save-as\"),\n      \"queryform-message-error\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.queryform\").concat(\"#ui-bizagi-workportal-widget-queryform--message-error\"),\n      \"inbox-common-case-summary\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.inbox.common\").concat(\"#ui-bizagi-workportal-widget-inbox-common-case-description\"),\n      \"inbox-common-case-summary-subprocess\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.inbox.common\").concat(\"#ui-bizagi-workportal-widget-inbox-common-case-description-subprocess\"),\n      \"inbox-common-case-summary-assignees\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.inbox.common\").concat(\"#ui-bizagi-workportal-widget-inbox-common-case-description-assignees\"),\n      \"inbox-common-case-summary-events\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.inbox.common\").concat(\"#ui-bizagi-workportal-widget-inbox-common-case-description-events\"),\n      useNewEngine: false });\n\n\n    if (!bizagi.referrerParams)\n    bizagi.referrerParams = {};\n    bizagi.referrerParams.referrer = bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_QUERYFORM;\n    self.lstIdCasesBackup(self.lstIdCases());\n  },\n\n  /*\r\n      *   To be overriden in each device to apply layouts\r\n      */\n  postRender: function postRender() {\n    var self = this;\n\n    self.caseSummaryTemplate = self.getTemplate(\"inbox-common-case-summary\");\n    self.caseSummaryTemplateSubprocess = self.getTemplate(\"inbox-common-case-summary-subprocess\");\n    self.caseSummaryTemplateAssigness = self.getTemplate(\"inbox-common-case-summary-assignees\");\n    self.caseSummaryTemplateEvents = self.getTemplate(\"inbox-common-case-summary-events\");\n\n    if (self.params.notMigratedUrl == \"true\") {\n      self.params.notMigratedUrl = Boolean(self.params.notMigratedUrl);\n    }\n\n    //if (bizagi.util.parseBoolean(bizagi.override.disableFrankensteinQueryForms) == true && (self.params.notMigratedUrl == \"\" || self.params.notMigratedUrl == true)) {\n    if (self.params.notMigratedUrl == \"\" || self.params.notMigratedUrl == true) {\n      self.modifiedPostRender();\n    } else\n    {\n      self.frankensteinPostRender();\n    }\n\n    self.comboRowsPerPage = new bizagi.workportal.results.per.page();\n\n    bizagi.referrerParams.referrer = bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_QUERYFORM;\n\n    self._startQuickActions();\n  },\n\n  /**\r\n      * Request to queryForm definition service\r\n      */\n  loadResultsOnActionExecute: function loadResultsOnActionExecute(params, hasOwnLoader) {\n    var self = this;\n\n    //builds the params\n    var queryFormParams = {\n      h_action: \"QUERYFORM\",\n      h_contexttype: self.contextType,\n      h_idForm: self.guidForm };\n\n\n    self.dataService.getQueryForm(queryFormParams).done(function (data) {\n      //stores the elements to check their values later\n      self.queryFormElements = data.form.elements;\n      // Update initial params number of rows\n      if (self.initialSearchParams) {\n        self.initialSearchParams.numberOfRows = self.getItemsPerPage();\n      }\n      //find the results directly, no need to enter any value \n      self.findResults(self.getContent(), params, self.params.pageToShow, hasOwnLoader);\n    });\n  },\n\n  /**\r\n      *  Store data in order to initialize a query form from a render widget            \r\n      */\n  storeQueryFormParams: function storeQueryFormParams(additionalParams) {\n    var self = this;\n    bizagi.referrerParams = bizagi.referrerParams || {};\n    var referrerParams = {\n      actionForm: bizagi.clone(self.params.queryFormAction),\n      data: $.extend({}, self.params) };\n\n    bizagi.referrerParams.queryForm = $.extend(referrerParams, additionalParams);\n  },\n\n  /**\r\n      * Return the expected number of items per page,\r\n      * checking if there is an user preference stored\r\n      */\n  getItemsPerPage: function getItemsPerPage() {\n    var self = this;\n    var itemsPerPagePreference = self.getRowValue();\n    return itemsPerPagePreference ? itemsPerPagePreference : 10;\n  },\n\n  /**\r\n      * @override\r\n      */\n  updateResults: function updateResults() {\n    var self = this;\n    self.reloadDataResults(true);\n  },\n  /**\r\n      * Returns a new page close to the first item above based on the previous page\r\n      * @param {*} newItemsPerPage new value in results per page in search\r\n      * @param {*} previousItemsPerPage previous value in results per page\r\n      * @param {*} previousPage previous value in page number\r\n      */\n  calculateNewPage: function calculateNewPage(newItemsPerPage, previousItemsPerPage, previousPage) {\n    var currentFirstItem = previousItemsPerPage * previousPage - previousItemsPerPage + 1;\n    var newPage = Math.ceil(currentFirstItem / newItemsPerPage);\n    return newPage ? newPage : 1;\n  },\n\n  /**\r\n      * Reload the data showed\r\n      * @param {*} preservePage if should preserve current page\r\n      */\n  reloadDataResults: function reloadDataResults(preservePage) {\n    var self = this,\n    _hasOwnLoader = true,\n    _ACTIONS = self.Class.QUERY_FORM_ACTIONS;\n    var itemsPerPage = Number(self.getItemsPerPage());\n    var content = self.getContent();\n    var page = preservePage && self.params.queryParams.pageNumber ? self.params.queryParams.pageNumber : self.calculateNewPage(itemsPerPage, self.params.queryParams.numberOfRows, self.params.queryParams.pageNumber);\n\n    if (self.params.queryFormAction === _ACTIONS.SUBMIT_QUERY_FORM || self.params.queryFormAction === _ACTIONS.RENDER_QUERY_FORM) {\n      self.params.queryParams.numberOfRows = itemsPerPage;\n      self.findResults(content, self.params.queryParams, page, _hasOwnLoader);\n    } else\n    {\n      self.storeQueryFormParams();\n      self.searchParamsOnActionExecute.numberOfRows = itemsPerPage;\n      self.loadResultsOnActionExecute(self.params.queryParams, _hasOwnLoader);\n    }\n  },\n\n  /**\r\n      * Render the combo of results per page\r\n      * @param {*} comboDataSource \r\n      */\n  renderNumberRowsCombo: function renderNumberRowsCombo(comboDataSource, content) {\n    var self = this;\n    return self.comboRowsPerPage.renderNumberRowsCombo({\n      combo: comboDataSource,\n      content: content,\n      comboWrapper: $(\"#select-pagination\", content),\n      onChange: function onChange() {\n        if (self.quickActionsInstance) {\n          self.quickActionsInstance.setPersistCheckboxGroup(true);\n        }\n        self.params.pageToShow = \"1\";\n        self.reloadDataResults(false);\n      },\n      setRowValue: self.setRowValue,\n      getRowValue: self.getRowValue });\n\n  },\n\n  /**\r\n      * Get user preference queriesItemsPerPage value\r\n      */\n  getRowValue: function getRowValue() {\n    var preferences = bizagi.services.preferences().getPreferences();\n    storedValue = preferences && preferences.queriesItemsPerPage ? preferences.queriesItemsPerPage : null;\n    return storedValue;\n  },\n\n  /**\r\n      * Set user preference queriesItemsPerPage value\r\n      * @param {*} value new value\r\n      */\n  setRowValue: function setRowValue(value) {\n    var modifiedJSON = bizagi.services.preferences().getPreferences();\n    modifiedJSON.queriesItemsPerPage = Number(value);\n    bizagi.services.preferences().overridePreferences(modifiedJSON);\n  },\n\n  loadtemplates: function loadtemplates() {\n    var self = this;\n    self.container = self.getTemplate(\"queryform-container\");\n    self.buttons = self.getTemplate(\"queryform-buttons\");\n    self.graphicalAnalysisContainer = self.getTemplate(\"queryform-graphic-analysis\");\n    self.resultSet = self.getTemplate(\"queryform-result-set\");\n    self.searchResult = self.getTemplate(\"queryform-search-result\");\n    self.paginationTmpl = self.getTemplate(\"queryform-pagination\");\n    self.adminResult = self.getTemplate(\"queryform-admin-result\");\n    self.selectUser = self.getTemplate(\"queryform-select-user\");\n    self.selectGroup = self.getTemplate(\"queryform-select-group\");\n    self.shareSelection = self.getTemplate(\"queryform-share-selection\");\n    self.dialogSaveAsTmpl = self.getTemplate(\"queryform-save-as\");\n  },\n\n  /**\r\n      * return start and stop methods for adjust view and loader correctly\r\n      * @param {Jquery Element} content of widget\r\n      * @param {Boolean} hasOwnLoader \r\n      */\n  _adjustViewLoader: function _adjustViewLoader(content, hasOwnLoader) {\n    var self = this;\n    SELECTORS = self.Class.SELECTORS,\n    LOADER = $(SELECTORS.FORM_LOADER, content),\n    FORM = $(SELECTORS.FORM, content),\n    BUTTONS = $(SELECTORS.FORM_BUTTONS, content),\n    _start = function _start(isStart) {\n      isStart ? LOADER.show() : LOADER.hide();\n      isStart ? FORM.hide() : FORM.show();\n      isStart ? BUTTONS.hide() : BUTTONS.show();\n    },\n    _noOp = function _noOp() {},\n    execute = hasOwnLoader ? _noOp : _start;\n\n    return {\n      start: execute.bind(null, true),\n      stop: execute.bind(null, false) };\n\n  },\n\n  /*\r\n      *  New Query Forms implementation\r\n      */\n  modifiedPostRender: function modifiedPostRender() {\n    var self = this,\n    _ACTIONS = self.Class.QUERY_FORM_ACTIONS;\n    var content = self.getContent();\n    self.maxElemShow = 10;\n    self.maxPageToShow = 5;\n    self.atLeastOneChecked = false;\n    self.selectedItemsToShare = {\n      users: [],\n      groups: [] };\n\n    self.readyToSave = false;\n    self.includeAllUsers = false;\n    self.saveAs = false;\n    self.sortedField = {};\n    self.storedQueryFormParameters = {};\n    self.dialogSaveAs = $.tmpl(self.dialogSaveAsTmpl);\n    self.orderType = {\n      ASC: \"ASC\",\n      DESC: \"DESC\",\n      NONE: \"NONE\" };\n\n    self.queryFormContextTypes = {\n      CASES: \"metadata\",\n      ENTITY: \"entity\" };\n\n    self.queryFormTypes = {\n      CASES: \"CASES\",\n      ENTITY: \"ENTITIES\" };\n\n\n    $(\"#queries-results-per-page\", content).hide();\n\n    if (self.params.notMigratedUrl == true || self.params.paramsStoredQuery.notMigratedUrl == true) {\n      var messageErrorForm = self.getResource(\"workportal-widget-admin-entities-message-migrate\");\n      messageErrorForm = messageErrorForm.replace(\"{build}\", bizagi.loader.productBuildToAbout);\n      var htmlMessage = $.tmpl(self.getTemplate(\"queryform-message-error\"), { messageError: messageErrorForm });\n      $(content).html(htmlMessage);\n      return false;\n    }\n\n    var actionEdit = function actionEdit() {\n      if (self.params.queryParams && !self.params.queryParams.ownerQuery) {\n        self.showSaveResultsForm();\n        $(\"#tab_share\", content).hide();\n        $(\"#query-form-buttons\", content).hide();\n        $(\"#query-form\").hide();\n        $(\"#queryFormName\").prop(\"disabled\", true);\n        $(\"#queryFormDescription\").prop(\"disabled\", true);\n        $(\"#input-name-ui-bizagi-input-required\").hide();\n      } else {\n        self.guidEntity = self.params.paramsStoredQuery.definition.entityGuid;\n        self.guidForm = self.params.paramsStoredQuery.guid;\n        self.queryFormType = self.params.paramsStoredQuery.definition.type;\n        self.idQueryForm = self.params.paramsStoredQuery.id;\n        self.renderQueryForm();\n        self.showSaveResultsForm();\n      }\n      self.previousValues(self.params.paramsStoredQuery);\n    };\n\n    var actionRenderQueryForm = function actionRenderQueryForm() {\n      self.guidForm = self.params.guidForm;\n      self.guidEntity = self.params.guidEntity;\n      if (self.params.queryType == 1) {\n        self.queryFormType = self.queryFormTypes.CASES;\n      } else if (self.params.queryType == 2) {\n        self.queryFormType = self.queryFormTypes.ENTITY;\n      }\n      self.renderQueryForm();\n    };\n\n    var actionSubmitQueryForm = function actionSubmitQueryForm() {\n      if (typeof self.params.queryParams.parameters == \"string\") {\n        self.params.queryParams.parameters = JSON.parse(self.params.queryParams.parameters);\n      }\n      self.initialSearchParams = self.params.queryParams;\n      self.initSortParameters();\n      var pageToShow = self.params.pageToShow || 1;\n      self.params.queryParams.numberOfRows = self.getItemsPerPage();\n\n      //builds the params\n      self.contextType = self.params.widget.contextType;\n      self.guidForm = self.params.widget.guidForm;\n      self.guidEntity = self.params.widget.guidEntity;\n      self.queryForm = self.params.queryForm;\n      self.includeAllUsers = self.params.widget.includeAllUsers;\n      self.queryFormType = self.params.widget.queryFormType;\n\n      if (self.params.queryType == 1) {\n        self.queryFormType = self.queryFormTypes.CASES;\n      } else if (self.params.queryType == 2) {\n        self.queryFormType = self.queryFormTypes.ENTITY;\n      }\n\n      self.handleEvents();\n      self.findResults(self.getContent(), self.params.queryParams, pageToShow);\n\n      $(\"#copy-as-new-stored-queryform\", content).hide();\n      $(\"#update-stored-queryform\", content).hide();\n      $('#edit-stored-queryform', content).hide();\n    };\n\n    var actionExecute = function actionExecute() {\n      var _hasOwnLoader = false;\n      self.storeQueryFormParams();\n\n      self.guidEntity = self.params.paramsStoredQuery.definition.entityGuid;\n      self.guidForm = self.params.paramsStoredQuery.guid;\n      self.queryFormType = self.params.paramsStoredQuery.definition.type;\n      self.includeAllUsers = self.params.paramsStoredQuery.definition.includeAllUsers;\n      self.idQueryForm = self.params.paramsStoredQuery.id;\n\n      self.searchParamsOnActionExecute = {\n        \"numberOfRows\": self.getItemsPerPage(),\n        \"pageNumber\": 1,\n        \"queryFormGuid\": self.params.paramsStoredQuery.guid,\n        \"entityGuid\": self.params.paramsStoredQuery.definition.entityGuid,\n        \"type\": self.params.paramsStoredQuery.definition.type,\n        \"parameters\": self.params.paramsStoredQuery.definition.parameters,\n        \"ownerQuery\": self.params.paramsStoredQuery.owner,\n        \"includeAllUsers\": self.params.paramsStoredQuery.definition.includeAllUsers };\n\n\n      if (self.params && self.params.queryParams && self.params.queryParams.parameters) {\n        if (typeof self.params.queryParams.parameters == \"string\") {\n          self.params.queryParams.parameters = JSON.parse(self.params.queryParams.parameters);\n        }\n        self.searchParamsOnActionExecute.parameters = self.params.queryParams.parameters;\n      }\n\n      self.handleEvents();\n      self.initialSearchParams = JSON.parse(JSON.stringify(self.searchParamsOnActionExecute));\n      self.initSortParameters();\n      //parses the type\n      if (self.queryFormType == self.queryFormTypes.CASES) {\n        self.contextType = self.queryFormContextTypes.CASES;\n      } else if (self.queryFormType == self.queryFormTypes.ENTITY) {\n        self.contextType = self.queryFormContextTypes.ENTITY;\n      }\n\n      $(\"#query-form-buttons\", content).hide();\n\n      self.loadResultsOnActionExecute(self.searchParamsOnActionExecute, _hasOwnLoader);\n\n      $(\"#copy-as-new-stored-queryform\", content).hide();\n      $(\"#update-stored-queryform\", content).hide();\n      $('#edit-stored-queryform', content).show();\n    };\n\n    switch (self.params.queryFormAction) {\n      case _ACTIONS.EDIT:\n        actionEdit();\n        break;\n\n      case _ACTIONS.RENDER_QUERY_FORM:\n        actionRenderQueryForm();\n        break;\n\n      case _ACTIONS.SUBMIT_QUERY_FORM:\n      case _ACTIONS.GRAPHICAL_ANALYSIS:\n        actionSubmitQueryForm();\n        break;\n\n      case _ACTIONS.EXECUTE:\n        actionExecute();\n        break;\n      default:\n        break;}\n\n  },\n\n\n  /*\r\n     *  Render queryForm\r\n     * */\n  renderQueryForm: function renderQueryForm(values) {\n    var self = this,\n    _hasOwnLoader = false,\n    _ACTIONS = self.Class.QUERY_FORM_ACTIONS;\n    var content = self.getContent();\n\n    if (self.queryFormType == self.queryFormTypes.CASES) {\n      self.contextType = self.queryFormContextTypes.CASES;\n    } else if (self.queryFormType == self.queryFormTypes.ENTITY) {\n      self.contextType = self.queryFormContextTypes.ENTITY;\n    }\n\n    var queryFormParams = {\n      h_action: \"QUERYFORM\",\n      h_contexttype: self.contextType,\n      h_idForm: self.guidForm };\n\n    if (self.idQueryForm && self.idQueryForm !== \"\") {\n      queryFormParams.h_idqueryform = self.idQueryForm;\n    }\n\n    var renderContainer = $.tmpl(self.container);\n\n    // Request to queryForm definition service\n    self.dataService.getQueryForm(queryFormParams).done(function (data) {\n      var renderingParams = {\n        canvas: renderContainer,\n        data: data,\n        type: \"queryForm\" };\n\n\n      //stores the elements to validate them later\n      self.queryFormElements = data.form.elements;\n\n      bizagi.loader.startAndThen(\"rendering\").then(function () {\n\n        var rendering = new bizagi.rendering.facade();\n\n        rendering.execute(renderingParams).done(function () {\n          self.queryForm = rendering.form;\n\n          if (self.queryForm.properties && typeof self.queryForm.properties.includeAllUsers != \"undefined\") {\n            self.includeAllUsers = self.queryForm.properties.includeAllUsers;\n          }\n\n          $(\"#query-form\", content).html(renderContainer);\n\n          // To validate if the input contains a value and depends on that show or hide the div that indicates the required field\n          self.validateRequireField();\n\n          $(\"#queryFormName\", content).keyup(function () {\n            self.validateRequireField();\n          });\n\n          self.handleEvents();\n\n          self._adjustViewLoader(content, _hasOwnLoader).stop();\n          $(\"#queries-results-per-page\", content).hide();\n          $(\"#query-form-result\", content).hide();\n          $(\"#mainButtons\", content).css(\"width\", \"100%\");\n          $(\"#exportExcel\", content).hide();\n          $(\"#graphicalAnalysis\", content).hide();\n          $(\"#back-to-queryform\", content).hide();\n          $(\"#save-queryform\", content).hide();\n          $('#queryFormName').prop(\"disabled\", false);\n          $('#queryFormDescription').prop(\"disabled\", false);\n\n          if (values) {\n\n            self.setXpathValuesToQueryForm(self.queryForm, values);\n\n            $(\"#query-form-admin-result\", content).hide();\n            $(\"#copy-as-new-stored-queryform\", content).hide();\n            $(\"#update-stored-queryform\", content).hide();\n            $('#edit-stored-queryform', content).hide();\n          }\n\n          if (self.params.queryFormAction === _ACTIONS.RENDER_QUERY_FORM) {\n\n            $(\"#query-form-admin-result\", content).hide();\n            $(\"#copy-as-new-stored-queryform\", content).hide();\n            $(\"#update-stored-queryform\", content).hide();\n            $('#edit-stored-queryform', content).hide();\n          } else if (self.params.queryFormAction === _ACTIONS.EDIT) {\n\n            var parentName = self.params.paramsStoredQuery.definition.parentQueryForm || self.params.paramsStoredQuery.definition.name;\n\n            $(\"#queryFormFieldsContainerName span\", content).html(parentName);\n            $(\"#queryFormFieldsContainer\", content).html(renderContainer);\n            $(\"#submit-for-search\", content).hide();\n            $(\"#clear-queryform\", content).hide();\n            $(\"#copy-as-new-stored-queryform\", content).show();\n            $(\"#update-stored-queryform\", content).show();\n            $('#edit-stored-queryform', content).hide();\n          }\n        });\n      });\n    });\n  },\n\n  /**\r\n      * if the type es from this list the value array is adjusted\r\n      */\n  _adjustValueOnRestore: function _adjustValueOnRestore(parameter, control) {\n    var typesForAdjustValue = [\n    \"queryCombo\",\n    \"querySuggest\",\n    \"queryCascadingCombo\",\n    \"queryState\",\n    \"queryList\",\n    \"queryRadio\",\n    \"queryCaseState\",\n    \"querySearchUser\"],\n\n    _haveToAdjust = typesForAdjustValue.indexOf(control.properties.type) !== -1;\n\n    if (_haveToAdjust)\n    parameter.value = bizagi.util.tryCatch(\n    function () {return parameter.value[0];},\n    \"\");\n\n    return parameter;\n  },\n\n  /**\r\n      * set the value and displayValue for control\r\n      * @param {Control} control forms\r\n      * @param {JSON|String} value newValue\r\n      */\n  _setValueAndDisplay: function _setValueAndDisplay(control, value) {\n    var self = this,\n    _CASCADE_COMBO = \"queryCascadingCombo\",\n    _SEARCH_USER = \"querySearchUser\",\n    _NORMAL = true,\n    _REVERT = false,\n    _set = function _set(normal) {\n      var _revert = !normal;\n      if (normal)\n      control.setValue(value);\n      control.setDisplayValue(value);\n      if (_revert)\n      control.setValue(value);\n    };\n\n    switch (control.properties.type) {\n      case _CASCADE_COMBO:\n        self._onRestore4Cascade(control).\n        done(_set.bind(null, _NORMAL));\n        break;\n\n      case _SEARCH_USER:\n        _set(_NORMAL);\n        _set(_REVERT);\n        break;\n\n      default:\n        _set(_NORMAL);\n        break;}\n\n  },\n\n  /**\r\n      * review if the parent has been load for continue set value\r\n      * @param {Control} control to review parent\r\n      */\n  _onRestore4Cascade: function _onRestore4Cascade(control) {\n    var _deferCanSet = new $.Deferred();\n    _parentReady = function _parentReady() {\n      var _parent = control.getParentCombo(),\n      _parentDeffer = bizagi.util.tryCatch(\n      function () {\n        return _parent.asyncRenderDeferred ? _parent.asyncRenderDeferred : _parent.wait4MeOnRestore;\n      },\n      function () {\n        //does not have parent\n        var deff = new $.Deferred();\n        deff.resolve();\n        return deff;\n      });\n\n      return _parentDeffer;\n    };\n\n    control.wait4MeOnRestore = new $.Deferred();\n    control.internalSetInitialValueFlag = true;\n    _parentReady().done(function () {\n      _deferCanSet.resolve();\n      control.wait4MeOnRestore.resolve();\n    });\n\n    return _deferCanSet;\n  },\n\n  /**\r\n      * Mapping values to query-forms using xpaths\r\n      * @param form\r\n      * @param values\r\n      */\n  setXpathValuesToQueryForm: function setXpathValuesToQueryForm(form, values) {\n    var self = this;\n    values = values || {};\n\n    try {\n      // Decode parameters\n      var searchParameters;\n      if (typeof values.parameters == \"string\") {\n        searchParameters = JSON.parse(values.parameters);\n      } else {\n        searchParameters = values.parameters;\n      }\n\n      $.each(searchParameters, function (key, parameter) {\n        var control = parameter.renderId ? form.getRenderById(parameter.renderId) : form.getRender(parameter.xpath);\n\n        $.when(control.ready()).\n        done(function () {\n          parameter = self._adjustValueOnRestore(parameter, control);\n          // Repaint to advanced queries\n          if (!!parameter.advancedQuery) {\n            control.setFilter && control.setFilter(parameter.filterType);\n            control.setDisplayValue(parameter.value);\n          } else {\n            self._setValueAndDisplay(control, parameter.value);\n          }\n        });\n\n      });\n    } catch (e) {\n      console.log(\"Error:\", e);\n    }\n  },\n\n  /**\r\n      * validate if need to show and load the queryForm again\r\n      * @returns Boolean\r\n      */\n  _recalculateShowQueryForm: function _recalculateShowQueryForm() {\n    var self = this,\n    _ACTIONS = self.Class.QUERY_FORM_ACTIONS,\n    _queryFormSections = [\n    _ACTIONS.SUBMIT_QUERY_FORM,\n    _ACTIONS.RENDER_QUERY_FORM],\n\n    _isQueryFormSection = _queryFormSections.indexOf(self.params.queryFormAction) !== -1;\n\n    return _isQueryFormSection && self.params.widget && self.params.recalculateQueryForm;\n  },\n\n  /*\r\n     *  Buttons for query Form actions\r\n     */\n  handleEvents: function handleEvents() {\n    var self = this,\n    _ACTIONS = self.Class.QUERY_FORM_ACTIONS;\n    var content = self.getContent();\n    var pageResultsData = {};\n\n    // PARAMS TO EXPORT EXCEL\n    pageResultsData.I_PROCESSSTATE = \"ALL\";\n    pageResultsData.h_idEnt = 10001;\n    pageResultsData.h_idQueryForm = self.idQueryForm;\n\n    $(\"#query-form-buttons\", content).html($.tmpl(self.buttons, pageResultsData));\n    $(\"#back-to-queryform\", content).click(function () {\n      if (self.params.queryFormAction == _ACTIONS.EXECUTE) {\n        self.renderQueryForm();\n      } else {\n        $(\"#iframeGraphicalAnalysis\", content).hide();\n        $(\"#query-form-admin-result\", content).hide();\n        if (self.params.queryFormAction == _ACTIONS.SAVE_QUERY_FORM) {\n          self.params.queryFormAction = _ACTIONS.RENDER_QUERY_FORM;\n          $(\"#queries-results-per-page\", content).show();\n          $(\"#query-form-result\", content).show();\n          $(\"#back-to-queryform\", content).show();\n          $(\"#save-queryform\", content).show();\n          $(\"#exportExcel\", content).show();\n          $(\"#graphicalAnalysis\", content).show();\n        } else {\n          self.sortedField = {};\n          $(\"#queries-results-per-page\", content).hide();\n          $(\"#query-form-result\", content).hide();\n          $(\"#query-form\", content).show();\n          self.enableButton($(\"#submit-for-search\", self.getContent()));\n\n          var dialog = $(this).closest(\".ui-dialog\");\n          var dialogContent = dialog.length ? dialog.find(\".ui-dialog-content\") : [];\n\n          if (dialog.height() === dialogContent.height()) {\n            dialogContent.height(440);\n          }\n\n          if (self.originalHeight) {\n            content.parent().height(self.originalHeight);\n          }\n\n          $(\"#back-to-queryform\", content).hide();\n          $(\"#submit-for-search\", content).show();\n          $(\"#clear-queryform\", content).show();\n          $(\"#save-queryform\", content).hide();\n          $(\"#exportExcel\", content).hide();\n          $(\"#graphicalAnalysis\", content).hide();\n\n          if (self._recalculateShowQueryForm()) {\n            // Recalculate only one time, more times generate problems with values on query form controls\n            self.params.recalculateQueryForm = false;\n\n            // get query form and show\n            self.params.widget.searchParams = self.params.widget.searchParams || {};\n            self.renderQueryForm(self.params.widget.searchParams);\n          } else if (self.params.queryFormAction == _ACTIONS.GRAPHICAL_ANALYSIS) {\n            self.params.queryFormAction = _ACTIONS.SUBMIT_QUERY_FORM;\n\n            var request = {\n              \"queryFormGuid\": self.guidForm,\n              \"numberOfRows\": self.getItemsPerPage(),\n              \"pageNumber\": self.params.pageToShow ? self.params.pageToShow : 1,\n              \"entityGuid\": self.guidEntity,\n              \"type\": self.queryFormType,\n              \"includeAllUsers\": self.includeAllUsers,\n              \"parameters\": [] };\n\n            var searchParams = self.queryForm.getSearchParams(request);\n            self.submitQueryForm(searchParams);\n          }\n        }\n      }\n      self.readyToSave = false;\n    });\n    $(\"#clear-queryform\", content).click(function () {\n      self.params.queryFormAction = _ACTIONS.RENDER_QUERY_FORM;\n      self.renderQueryForm();\n    });\n    $(\"#submit-for-search\", content).click(function () {\n      //collects data in a structure to search Cases Data or Entity Data\n      self.params.queryFormAction = _ACTIONS.SUBMIT_QUERY_FORM;\n      var searchParams = self.getSearchParams();\n      if (searchParams !== null) {\n        self.disableButton($(this));\n        self.submitQueryForm(searchParams);\n      }\n    });\n    $(\".ui-bizagi-render-control-included\", content).tooltip({ content: bizagi.localization.getResource(\"workportal-widget-query-form-included-tooltip\") });\n\n    $(\"#save-queryform\", content).click(function () {\n      if (self.readyToSave) {\n        self.createStoredQueryForm();\n      } else {\n        self.showSaveResultsForm();\n      }\n      self.params.queryFormAction = _ACTIONS.SAVE_QUERY_FORM;\n      $(\"#exportExcel\", content).hide();\n      $(\"#graphicalAnalysis\", content).hide();\n      $(\"#mainButtons\", content).css(\"width\", \"100%\");\n    });\n\n    $(\"#copy-as-new-stored-queryform\", content).click(function () {\n      // Open dialog with confirm message\n      self.saveAs = true;\n      $(self.dialogSaveAs).dialog({\n        resizable: true,\n        modal: true,\n        title: self.getResource(\"workportal-widget-query-form-copy-as-new\"),\n        buttons: [\n        {\n          text: self.getResource(\"workportal-general-button-label-ok\"),\n          click: function click() {\n            var that = this;\n            $.when(self.createStoredQueryForm()).done(\n            function () {\n              $(that).dialog(\"destroy\");\n              bizagi.workportal.desktop.popup.closePopupInstance();\n            });\n\n          } },\n\n        {\n          text: self.getResource(\"workportal-widget-queries-confirm-cancel\"),\n          click: function click() {\n            self.saveAs = false;\n            $(this).dialog(\"destroy\");\n          } }] });\n\n\n\n    });\n\n    $(\"#update-stored-queryform\", content).click(function () {\n      self.updateStoredQueryForm();\n    });\n\n    $(\"#edit-stored-queryform\", content).click(function () {\n      self.publish(\"closeCurrentDialog\");\n      self.params.editQueryForm({ response: self.params.paramsStoredQuery.id,\n        fromExec: true });\n    });\n\n    $(\".biz-wp-form-queryForm-graphicalAnalysisLink\", content).click(function () {\n      self.params.queryFormAction = _ACTIONS.GRAPHICAL_ANALYSIS;\n      if (typeof self.searchParams.parameters == \"string\") {\n        self.searchParams.parameters = JSON.parse(self.searchParams.parameters);\n      }\n      var paramsStored;\n      if (self.params.paramsStoredQuery.definition) {\n        paramsStored = JSON.stringify(self.params.paramsStoredQuery.definition);\n      } else {\n        paramsStored = JSON.stringify({\n          name: \"name\",\n          description: \"desc\",\n          parameters: self.searchParams.parameters,\n          type: self.queryFormType,\n          entityGuid: self.guidEntity,\n          includeAllUsers: self.includeAllUsers,\n          parentQueryForm: self.queryForm.properties.displayName });\n\n      }\n      var guidForm = self.params.paramsStoredQuery.id ? self.params.paramsStoredQuery.guid : self.params.guidForm;\n      var htmlGraphicalAnalysis = $.tmpl(self.graphicalAnalysisContainer, { h_guidQueryForm: guidForm,\n        h_idStoredQuery: self.params.paramsStoredQuery.id,\n        h_definition: paramsStored });\n\n      $(\"#queries-results-per-page\", content).hide();\n      $(\"#query-form-result\", content).html(htmlGraphicalAnalysis);\n      $(\"#exportExcel\", content).hide();\n      $(\"#graphicalAnalysis\", content).hide();\n      $(\"#mainButtons\", content).show();\n      $(\"#mainButtons\", content).css(\"width\", \"99%\");\n      $(\"#save-queryform\", content).hide();\n      self.originalHeight = content.parent().height();\n      content.parent().height(\"auto\");\n      $(\"#formGraphicalAnalysis\").delay(800).submit();\n\n      // adjust iframe height\n      var iframe = $(\"#iframeGraphicalAnalysis\");\n      var dialog = iframe.length ? iframe.closest(\".ui-dialog\") : [];\n      var dialogHeight = dialog.length ? dialog.height() : 0;\n      if (dialogHeight > 550) {\n        iframe.height(dialogHeight - 100);\n      }\n\n      dialog.on(\"dialogmaximize\", calculateHeight);\n      dialog.on(\"dialogunmaximize\", calculateHeight);\n\n      function calculateHeight() {\n        var iframe = $(\"#iframeGraphicalAnalysis\");\n        var dialog = $(this);\n        var dialogHeight = dialog.length ? dialog.height() : 0;\n        if (dialogHeight > 550) {\n          iframe.height(dialogHeight - 100);\n        } else {\n          iframe.height(400);\n          dialog.find(\".ui-dialog-content\").height(\"auto\");\n        }\n      }\n    });\n\n    $(\".biz-wp-form-queryForm-exportExcelLink\", content).click(function () {\n      var request = {\n        \"queryFormGuid\": self.guidForm,\n        \"entityGuid\": self.guidEntity,\n        \"type\": self.queryFormType,\n        \"includeAllUsers\": self.includeAllUsers,\n        \"parameters\": [] };\n\n\n      var sortParameter = self.sortedField.xpath;\n      var orderType = self.sortedField.orderType;\n      var sorted = false;\n\n      var newParameters = JSON.parse(JSON.stringify(self.initialSearchParams.parameters));\n      newParameters = $.type(newParameters) === \"array\" ? newParameters : JSON.parse(newParameters);\n      if (newParameters.length > 0 && typeof sortParameter != \"undefined\") {\n        $.each(newParameters, function (i, item) {\n          var itemXpath = item.xpath;\n          if (itemXpath == sortParameter) {\n            item.orderType = orderType;\n            sorted = true;\n          }\n        });\n      }\n      if (!sorted && sortParameter != \"\" && typeof sortParameter != \"undefined\") {\n        newParameters.push({\n          \"value\": null,\n          \"included\": true,\n          \"xpath\": sortParameter,\n          \"searchType\": \"NONE\",\n          \"orderType\": orderType });\n\n      }\n      request.parameters = newParameters;\n\n      var requestForSearch = self.refactorParameters(request);\n      var p_sessionId = bizagi.cookie(\"JSESSIONID\");\n      if (p_sessionId != null) {\n        requestForSearch.p_sessionId = p_sessionId;\n      }\n      self.dataService.getQueryFormExportExcel(requestForSearch).done(function () {});\n    });\n  },\n\n  disableButton: function disableButton(button) {\n    var self = this,content = self.getContent();\n    var included = $(\".ui-bizagi-render-control-included:checked\", content).size();\n    var atLeastOneChecked = included > 0;\n    if (self.queryFormType == self.queryFormTypes.ENTITY && self.atLeastOneChecked || self.queryFormType == self.queryFormTypes.CASES) {\n      button.attr(\"disabled\", true).addClass(\"ui-button-disabled\");\n    }\n  },\n\n  enableButton: function enableButton(button) {\n    button.removeAttr(\"disabled\").removeClass(\"ui-button-disabled\");\n  },\n\n  /*\r\n      * return default params for search and saved queries\r\n      */\n  getSearchParams: function getSearchParams() {\n    var self = this,\n    request = {\n      \"queryFormGuid\": self.guidForm,\n      \"numberOfRows\": self.getItemsPerPage(),\n      \"pageNumber\": 1,\n      \"entityGuid\": self.guidEntity,\n      \"type\": self.queryFormType,\n      \"includeAllUsers\": self.includeAllUsers,\n      \"parameters\": [],\n      \"onlyLocalResults\": true };\n\n    return self.queryForm.getSearchParams(request);\n  },\n\n  /*\r\n      * throw message exception when the user has not select any checkbox and it's required\r\n      */\n  throwMessageAtLeastOneCheck: function throwMessageAtLeastOneCheck(content) {\n    var self = this;\n    bizagi.showMessageBox(bizagi.localization.getResource(\"workportal-widget-query-form-at-least-one-checked\"), \"Bizagi\", \"warning\");\n    self.enableButton($(\"#submit-for-search\", content));\n  },\n\n  /*\r\n      * validate if the user has not select any checkbox and it's required\r\n      */\n  validateTypeAndOneCheck: function validateTypeAndOneCheck(searchParams) {\n    var self = this,\n    content = self.getContent(),\n    _checkboxesBase = \".ui-bizagi-render-control-included:checked\",\n    _selectorForCheckboxes = self.isInShareTab() ? _checkboxesBase : _checkboxesBase + \":visible\",\n    included = $(_selectorForCheckboxes, content).size();\n    self.atLeastOneChecked = included > 0;\n    return (self.queryFormType == self.queryFormTypes.ENTITY && self.atLeastOneChecked ||\n    self.queryFormType == self.queryFormTypes.CASES) &&\n    searchParams !== null;\n  },\n\n  /*\r\n      * Validation before submit\r\n      */\n  submitQueryForm: function submitQueryForm(searchParams) {\n    var self = this;\n    var content = self.getContent();\n    if (searchParams !== null) {\n      if (self.validateTypeAndOneCheck(searchParams)) {\n        self.initialSearchParams = JSON.parse(JSON.stringify(searchParams));\n        self.findResults(content, searchParams, searchParams.pageNumber);\n      } else\n      {\n        self.throwMessageAtLeastOneCheck(content);\n      }\n    }\n  },\n\n  /*\r\n      * Find cases for App query Form\r\n      */\n  findResults: function findResults(content, params, pageToShow, hasOwnLoader) {\n    var self = this,\n    _ACTIONS = self.Class.QUERY_FORM_ACTIONS;\n    var content = self.getContent();\n    var loadingGetQueryForm = $(\".js-mini-loading\", content);\n    var buttons = $(\"#save-queryform, #back-to-queryform, #submit-for-search\", content);\n    //Store data in order to initialize a query form from a render widget\n    if (pageToShow) {\n      self.params.pageToShow = pageToShow;\n    }\n    // Override the query params\n    self.params.queryParams = params;\n\n    params.pageNumber = pageToShow ? pageToShow : 1;\n    self.storeQueryFormParams({\n      queryParams: params,\n      pageToShow: pageToShow,\n      queryForm: self.queryForm });\n\n\n    self.searchParams = JSON.parse(JSON.stringify(params));\n    params = self.refactorParameters(bizagi.clone(params));\n    if (bizagiConfig.groupByCaseNumber) {\n      params.group = \"T_RADNUMBER\";\n    }\n\n    loadingGetQueryForm.show();\n    self.disableButton(buttons);\n    var security = new bizagi.workportal.command.security(self.dataService),\n    deferResults = self.dataService.getQueryFormResponse(params),\n    _formLoader = self._adjustViewLoader(content, hasOwnLoader);\n    deferResults.always(self.enableButton.bind(self, buttons));\n    _formLoader.start();\n    $.when(\n    deferResults,\n    security.checkSecurityPerm(\"GraphicQuery\"),\n    security.checkSecurityPerm(\"TimeLine\")).\n    done(function (resultList, graphicQuery, timeline) {\n      var _pageExists = bizagi.util.tryCatch(\n      function () {return resultList[0].rows.length > 0 || resultList[0].page === 1;},\n      true);\n\n\n      loadingGetQueryForm.hide();\n      _formLoader.stop();\n\n      if (_pageExists === false) {\n        self.findResults(content, params, 1);\n        return false;\n      }\n\n      // Mapping Response into result object\n      resultList = resultList[0];\n\n      var enabledIcons = self.validateSecurityOptionIcons(resultList, graphicQuery, timeline);\n\n      //clean old results\n      $(\".biz-wp-table\").remove();\n      $(\"#biz-wp-table-summary-wrapper\").remove();\n\n      //Keep in track the total Records\n      self.totalRecords = resultList.records;\n\n      //keep in track the total pages\n      self.totalPages = resultList.total;\n\n      if (resultList.rows.length > 0) {\n        self.showSearchResultFrame(content, resultList, params, enabledIcons);\n      } else {\n        bizagi.showMessageBox(bizagi.localization.getResource(\"workportal-widget-query-form-no-records-found\"), \"Bizagi\", \"warning\");\n        self.enableButton($(\"#submit-for-search\", self.getContent()));\n        if (self.params.queryFormAction === _ACTIONS.EXECUTE) {\n          self.params.queryFormAction = _ACTIONS.EDIT;\n          self.modifiedPostRender();\n        }\n      }\n    }).fail(function (error) {\n      _formLoader.stop();\n      loadingGetQueryForm.hide();\n      bizagi.log(error);\n    });\n  },\n\n  /**\r\n      * Validate if show or not graphic query icon.\r\n      * @param resultList\r\n      */\n  // validateSecurityGraphicQuery: function (resultList){\n  validateSecurityOptionIcons: function validateSecurityOptionIcons(resultList, graphicQuery, timeline) {\n    var tmpTL = bizagi.override.enableFeatureShowTimelineButton && timeline;\n    var radNumerIndex = -1;\n\n    if (!graphicQuery && !tmpTL) {\n      if (resultList.header && resultList.header.length && resultList.header[resultList.header.length - 1].dataType === 0) {\n        resultList.header.splice(-1, 1); //Remove last item\n        resultList.rows.forEach(function (row) {\n          row.splice(-1, 1);\n        });\n      }\n    } else {\n      if (tmpTL && resultList.rows.length > 0) {\n        radNumerIndex = resultList.rows[0].findIndex(function (el) {\n          if (el && _typeof(el) === \"object\" && el.radNumber) {\n            return true;\n          }\n          return false;\n        });\n        if (radNumerIndex > -1) {\n          resultList.rows.forEach(function (row) {\n            if (row[row.length - 1] != null)\n            row[row.length - 1]['radNumber'] = row[radNumerIndex]['radNumber'];\n          });\n        }\n      }\n    }\n\n    return {\n      graphicQuery: graphicQuery,\n      timeline: tmpTL };\n\n  },\n\n  /*\r\n     * Checks that all the header displayed names are the same shown in the form\r\n     */\n  checkDisplayedNames: function checkDisplayedNames(resultList) {\n    var self = this;\n    if (typeof self.initialSearchParams.parameters == \"string\") {\n      self.initialSearchParams.parameters = JSON.parse(self.initialSearchParams.parameters);\n    }\n    if (typeof self.searchParams.parameters == \"string\") {\n      self.searchParams.parameters = JSON.parse(self.searchParams.parameters);\n    }\n    //goes for each item and checks them one by one\n    $.each(resultList.header, function (i, header) {\n\n      //cheks if display name, it should get the display name from the form values\n      if (header.xpath) {\n        var foundDisplayName = self.getRenderElementDisplayByXpath(header.xpath, self.queryFormElements);\n        //if it founds it, it sets the displayName\n        if (foundDisplayName) {\n          if (self.initialSearchParams && self.initialSearchParams.parameters) {\n            for (var i = 0; i < self.initialSearchParams.parameters.length; i++) {\n              var searchParameter = self.initialSearchParams.parameters[i];\n              var storedQueryFormParameter = self.searchParams.parameters[i];\n              var fullParameterXpath = searchParameter.xpath + \".\" + searchParameter.displayXpath;\n              var storedDefinition = bizagi.util.tryCatch(\n              function () {return self.params.paramsStoredQuery.definition.parameters[i];},\n              {});\n\n\n              if (searchParameter.xpath === header.xpath || fullParameterXpath === header.xpath) {\n                storedQueryFormParameter.displayHeader = foundDisplayName;\n                searchParameter.displayHeader = foundDisplayName;\n                storedDefinition.displayHeader = foundDisplayName;\n                self.searchParams.parameters[i].displayName = foundDisplayName;\n                break;\n              }\n            }\n          }\n\n          header.displayName = foundDisplayName;\n        }\n      }\n    });\n\n    return resultList;\n  },\n  /*\r\n      *Gets the display name that the xpath provided should show in the results\r\n      */\n  getRenderElementDisplayByXpath: function getRenderElementDisplayByXpath(xpath, elements) {\n    var self = this;\n    if (elements && elements.length > 0) {\n      for (var i = 0, l = elements.length; i < l; i++) {\n        var element = elements[i];\n        if (typeof element.render !== 'undefined') {\n          var includePreference = typeof element.render.properties.included === 'undefined' || element.render.properties.included;\n          var elementXpath = element.render.properties.xpath;\n          var fullEelementXpath = element.render.properties.xpath + \".\" + element.render.properties.displayXpath;\n\n          if (includePreference && (elementXpath === xpath || fullEelementXpath === xpath)) {\n            return element.render.properties.displayName;\n          }\n        } else if (typeof element.container !== 'undefined') {\n          var result = self.getRenderElementDisplayByXpath(xpath, element.container.elements);\n          if (result != undefined)\n          return result;\n        }\n      }\n    }\n  },\n\n  refactorParameters: function refactorParameters(params) {\n    var parameters = [];\n    if (typeof params.parameters == \"string\") {\n      params.parameters = JSON.parse(params.parameters);\n    }\n    $.each(params.parameters, function (i, item) {\n      if (item.value != null && _typeof(item.value) == \"object\" && item.value[0] && typeof item.value[0].id != \"undefined\") {\n        item.value = item.value[0].id;\n      }\n      parameters.push(item);\n    });\n    params.parameters = JSON.stringify(parameters);\n    return params;\n  },\n\n  /**\r\n      * Check override about remove the symbol\r\n      * @param {any} formattedValue \r\n      */\n  _checkOverrideAboutRemoveSymbol: function _checkOverrideAboutRemoveSymbol(formattedValue) {\n    if (bizagi.override.enableSymbolMoneyColumnQueryResult === false)\n    formattedValue = formattedValue.replace(BIZAGI_DEFAULT_CURRENCY_INFO.symbol, \"\");\n    return formattedValue;\n  },\n\n  /**\r\n      * Check overrides about format in money type for results in QueryForm\r\n      * @param {any} formattedValue \r\n      * @param {any} originalValue \r\n      */\n  _checkOverridesFormatMoneyColumnQueryResults: function _checkOverridesFormatMoneyColumnQueryResults(formattedValue, originalValue) {\n    var self = this;\n    if (bizagi.override.enableFormatMoneyColumnQueryResult === false) {\n      formattedValue = originalValue;\n    } else\n    {\n      formattedValue = self._checkOverrideAboutRemoveSymbol(formattedValue);\n    }\n    return formattedValue !== null ? formattedValue : '';\n  },\n\n  /**\r\n      * format value depend of the type\r\n      * @param {string} value \r\n      * @param {number | string} dataType \r\n      */\n  _formatValue: function _formatValue(value, dataType) {\n    var self = this;\n\n    var formattedValue = bizagi.util.formatValueByDataType(value, dataType);\n\n    if ([8, \"Money\"].indexOf(dataType) !== -1) {\n      formattedValue = self._checkOverridesFormatMoneyColumnQueryResults(formattedValue, value);\n    }\n\n    return formattedValue;\n  },\n  /*\r\n     * Show search result frames\r\n     */\n  showSearchResultFrame: function showSearchResultFrame(content, resultList, params, enabledIcons) {\n    var self = this,\n    _ACTIONS = self.Class.QUERY_FORM_ACTIONS;\n    self.queryFormElements = self.queryFormElements ? self.queryFormElements : bizagi.referrerParams.queryForm.queryForm.params.data.elements;\n\n    if (bizagi.referrerParams && bizagi.referrerParams.queryForm && bizagi.referrerParams.queryForm.queryForm &&\n    bizagi.referrerParams.queryForm.queryForm.params && bizagi.referrerParams.queryForm.queryForm.params.data) {\n      bizagi.referrerParams.queryForm.queryForm.params.data.elements = self.queryFormElements;\n    }\n\n    //goes for the result list and checks that the displayed names in the grid match with the rendered form\n    resultList = self.checkDisplayedNames(resultList);\n    resultList.rows = self.cleanEmptyColorState(resultList.rows);\n\n    var haveQuickActions = resultList.quickActions && resultList.quickActions.length > 0;\n\n    var resultTemplate = $.tmpl(\n    self.searchResult,\n    {\n      enableQueryDetailView: bizagi.util.isEnableFeature(\"enableQueryDetailView\"),\n      headers: resultList.header,\n      rows: resultList.rows,\n      sortedField: self.sortedField.xpath ? self.sortedField : null,\n      records: resultList.records,\n      groupByCaseNumber: bizagiConfig.groupByCaseNumber,\n      securityGraphicQuery: bizagi.menuSecurity.GraphicQuery,\n      resultList: resultList,\n      enabledIcons: enabledIcons,\n      haveQuickActions: haveQuickActions },\n\n    {\n      getRadNumberColumnIndex: function getRadNumberColumnIndex() {\n        var data = this.data;\n        var index = -1;\n        for (var i = 0, l = data.headers.length; i < l; i++) {\n          if (data.headers[i].fieldName == \"radnumber\") {\n            index = i;\n          }\n        }\n        return index;\n      },\n      showColumn: function showColumn(columnIndex) {\n        var index = this.getRadNumberColumnIndex();\n        return this.data.groupByCaseNumber && index == columnIndex ? ' hidden ' : \"\";\n      },\n      createGroupedHeader: function createGroupedHeader(rowIndex) {\n        var data = this.data.resultList;\n        var result = false;\n        var radNumber = this.getRadNumber(data.rows[rowIndex]);\n        if (this.data.groupByCaseNumber) {\n          if (rowIndex == 0 && radNumber != \"\") {\n            result = true;\n          } else {\n            var previousRadNumber = this.getRadNumber(data.rows[rowIndex - 1]);\n            if (radNumber != previousRadNumber && radNumber != \"\") {\n              result = true;\n            }\n          }\n        }\n        return result;\n      },\n      getRadNumber: function getRadNumber(row) {\n        var index = this.getRadNumberColumnIndex();\n        return index >= 0 ? row[index].radNumber : \"\";\n      },\n      formatValue: $.proxy(self._formatValue, self),\n      /**\r\n                                                      * validate if in the first row and group by cases and if is IE necesary for bug QAF-1883 fixed head table\r\n                                                      * @param {Int} rowIndex row index item of case\r\n                                                      */\n      isIEAndFirstRowAndGroupCases: function isIEAndFirstRowAndGroupCases(rowIndex) {\n        return rowIndex == 0 && this.data.groupByCaseNumber && bizagi.util.isIE();\n      } });\n\n\n\n    self.lstIdCases(self.getIdCases(resultList.rows));\n\n    self.renderNumberRowsCombo(self.comboRowsPerPage.initCombo(), resultTemplate);\n\n    if (haveQuickActions) {\n      var workItemsInfo = self._getWorkItemsInfo(resultList.header, resultList.rows);\n      self._QuickActionsRenderIn(resultTemplate, workItemsInfo, resultList.quickActions);\n    }\n\n    var pageToshow = self.maxPageToShow > self.totalPages ? self.totalPages : self.maxPageToShow;\n    var summaryWrapper = $(\"#biz-wp-table-pager-wrapper\", resultTemplate);\n    var pagerData = {};\n    var paginationHtml;\n\n    // show or hide \"load more\" button\n    pagerData.pagination = self.totalPages > 1 ? true : false;\n    pagerData.page = resultList.page;\n    pagerData.pages = {};\n\n    for (var i = 1; i <= pageToshow; i++) {\n      pagerData.pages[i] = {\n        \"pageNumber\": i };\n\n    }\n\n    //load and append the paginator to the result table\n    paginationHtml = $.tmpl(self.paginationTmpl, pagerData).html();\n    summaryWrapper.append(paginationHtml);\n\n    $(\"#submit-for-search\", content).hide();\n    $(\"#clear-queryform\", content).hide();\n    $(\"#save-queryform\", content).show();\n\n    //checks if user has permissions to see the export button\n    if (resultList.permissions && resultList.permissions.canExportData) {\n      $(\"#exportExcel\", content).show();\n    } else\n    {\n      $(\"#exportExcel\", content).hide();\n    }\n\n    $(\"#mainButtons\", content).css(\"width\", \"100%\");\n    $(\"#query-form\", content).hide();\n    $(\"#queries-results-per-page\", content).show();\n    $(\"#query-form-result\", content).show();\n    $(\"#query-form-result\", content).html(resultTemplate);\n    $(\"#back-to-queryform\", content).show();\n\n    //checks if user has permissions to see the graphical button\n    if (resultList.permissions && resultList.permissions.canAnalizeData) {\n      $(\"#graphicalAnalysis\", content).show();\n    } else\n    {\n      $(\"#graphicalAnalysis\", content).remove();\n    }\n\n    if (self.params.queryFormAction == _ACTIONS.EXECUTE) {\n      $(\"#back-to-queryform\", content).hide();\n      $(\"#save-queryform\", content).hide();\n    }\n\n    if (params.ownerQuery == false) {\n      $(\"#edit-stored-queryform\", content).hide();\n    }\n\n    //add data and behaviour to pager\n    $(\"ul\").bizagiPagination({\n      maxElemShow: self.maxElemShow,\n      totalPages: self.totalPages,\n      actualPage: resultList.page,\n      listElement: $(\"#biz-wp-table-pager-wrapper\"),\n      clickCallBack: function clickCallBack(options) {\n        var target = $('.sortColumnsDataUpIcon, .sortColumnsDataDownIcon').closest(\"th\").first(),\n        _hasOwnLoader = true;\n\n        // Update initial params number of rows\n        if (self.initialSearchParams) {\n          self.initialSearchParams.numberOfRows = self.getItemsPerPage();\n        }\n\n        if (target.length == 0) {\n          self.findResults(content, self.initialSearchParams, options.page, _hasOwnLoader);\n        } else\n\n        {\n          var paramXpath = target.data(\"xpath\");\n          var orderType = null;\n          if (_typeof(self.sortedField.xpath) != undefined && self.sortedField.xpath == paramXpath) {\n            orderType = self.sortedField.orderType;\n          }\n          if (orderType == null || orderType == self.orderType.DESC) {\n            self.findSortedResults(content, paramXpath, self.orderType.DESC, options.page);\n          } else {\n            self.findSortedResults(content, paramXpath, self.orderType.ASC, options.page);\n          }\n        }\n      } });\n\n\n    $(\".cases-column-header\", content).click(function (e) {\n      var target = $(e.currentTarget);\n      var paramXpath = target.data(\"xpath\");\n      var orderType = null;\n      if (_typeof(self.sortedField.xpath) != undefined && self.sortedField.xpath == paramXpath) {\n        orderType = self.sortedField.orderType;\n      }\n      if (orderType == null || orderType == self.orderType.DESC) {\n        self.findSortedResults(content, paramXpath, self.orderType.ASC, params.pageNumber);\n      } else {\n        self.findSortedResults(content, paramXpath, self.orderType.DESC, params.pageNumber);\n      }\n\n    });\n\n    // Add click event to case link\n    $(\".caseClicked\", content).click(function () {\n      self.disposeGoToCase(true);\n      self.publish(\"executeAction\", {\n        action: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,\n        idCase: $(this)[0].getAttribute(\"data-idcase\"),\n        idWorkItem: $(this)[0].getAttribute(\"data-idworkitem\"),\n        idTask: $(this)[0].getAttribute(\"data-idtask\"),\n        idWorkflow: $(this)[0].getAttribute(\"data-idworkflow\") });\n\n      self.publish(\"closeCurrentDialog\");\n    });\n\n\n    $(\".ui-bizagi-wp-app-inbox-grouped\", content).bind(\"click\", function () {\n      var idCase = $(this).find(\"#idCase\").val();\n\n      self.publish(\"executeAction\", {\n        action: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,\n        idCase: idCase });\n\n      self.publish(\"closeCurrentDialog\");\n    });\n\n\n    // Add click event to view workflow\n    $(\".js-show-graphic-query\", content).click(function () {\n      var idCase = $(this).data(\"idcase\");\n      var idWorkflow = $(this).data('idworkflow');\n      self.showGraphicQuery({ idCase: idCase,\n        idWorkflow: idWorkflow });\n    });\n\n    // Add click to timeline icon\n    $(\".js-show-timeline\", content).click(function () {\n      var idCase = $(this).data(\"idcase\");\n      var caseNumber = $(this).data('radnumber');\n      self.showTimeLine({ radNumber: caseNumber,\n        idCase: idCase });\n    });\n\n    // show case summary\n    $(\"i.bz-icon-search-outline\", content).click(function () {\n      // Call routing action\n      var idCase = $(this).data(\"idcase\");\n      var idWorkflow = $(this).data('idworkflow');\n      self.showCase(idCase, idWorkflow);\n    });\n\n    self.setTableHeadFixed({\n      TableElement: $(\"table\", resultTemplate),\n      groupByCaseNumber: bizagiConfig.groupByCaseNumber,\n      floatOptions: {\n        position: 'fixed',\n        scrollContainer: function scrollContainer() {\n          return $(\"#result-set-queryForm\");\n        } } });\n\n\n  },\n  /**\r\n      * Add class to format the number\r\n      * */\n  applyFomatNumbers: function applyFomatNumbers(elementsDataType, resultTemplate, userLocalization) {\n    var numberHeaders = $(\"th[data-type='\" + elementsDataType + \"']\", resultTemplate);\n    $.each(numberHeaders, function (i, item) {\n      var index = item.getAttribute('data-index');\n      $(\".biz-wp-table tr\", resultTemplate).find(\"td:eq(\" + index + \")\").find(\"span\").addClass(\"formatMoney\");\n    });\n    bizagi.util.formatInvariantNumber(resultTemplate, userLocalization);\n  },\n\n  /**\r\n      * return idCases array from rows of the results\r\n      * @param {Array} rows of results\r\n      */\n  getIdCases: function getIdCases(rows) {\n    var _rows = Array.isArray(rows) ? rows : [],\n    _NULL_VALUE = -1,\n    _findIdCase = function _findIdCase(item) {\n      var _hasIdCase = function _hasIdCase(e) {\n        return bizagi.util.tryCatch(\n        function () {return e.idCase !== undefined;},\n        false);\n\n      },\n      itemFounded = item.find(_hasIdCase);\n\n      return itemFounded === undefined ? _NULL_VALUE : itemFounded.idCase;\n    },\n    _valid = function _valid(item) {\n      return Array.isArray(item) && item.length > 0 && _findIdCase(item) !== undefined;\n    },\n    _getIdCase = function _getIdCase(item) {\n      return _valid(item) ? _findIdCase(item) : _NULL_VALUE;\n    };\n    return _rows.map(_getIdCase).filter(function (i) {return i !== _NULL_VALUE;});\n  },\n\n  /**\r\n      * set or get of bizagi.lstIdCases\r\n      * @param {Array} value \r\n      */\n  lstIdCases: function lstIdCases(value) {\n    if (value !== undefined)\n    bizagi.lstIdCases = value;\n    return bizagi.lstIdCases;\n  },\n\n  /**\r\n      * set or get of _lstIdCasesBackup\r\n      * @param {Array} value \r\n      */\n  lstIdCasesBackup: function lstIdCasesBackup(value) {\n    var self = this;\n    if (value !== undefined)\n    self._lstIdCasesBackup = value;\n    return self._lstIdCasesBackup;\n  },\n\n  /**\r\n      * restore the _lstIdCasesBackup only when the user just close the modal\r\n      * @param {Boolean} goToCase true if the user close the modal on click a case\r\n      */\n  disposeGoToCase: function disposeGoToCase(goToCase) {\n    var self = this;\n    self._closedByCase = self._closedByCase === true ? true : goToCase;\n\n    if (self._closedByCase === false)\n    self.lstIdCases(self.lstIdCasesBackup());\n  },\n\n  /**\r\n      * if the column has list items with a json property colorstate empty, the item is removed\r\n      * @param {JSON} rows with columns and with list items with posible colorState\r\n      */\n  cleanEmptyColorState: function cleanEmptyColorState(rows) {\n    return rows.map(function (row) {\n      return row.map(function (col) {\n        if (Array.isArray(col)) {//is a list items\n          return col.filter(function (item) {//remove the item if it has a colorState json property empty\n            return item === undefined || item === null || item.colorState !== \"\";\n          });\n        }\n        return col;\n      });\n    });\n  },\n\n  /**\r\n     * Find sorted results\r\n     * @param {container of results} content \r\n     * @param {xpath} sortParameter \r\n     * @param {ASC or DESC} orderType \r\n     * @param {Number of page to show} pageToShow \r\n     */\n  findSortedResults: function findSortedResults(content, sortParameter, orderType, pageToShow) {\n    var self = this,\n    _hasOwnLoader = true,\n    clonedParams = JSON.parse(JSON.stringify(self.initialSearchParams));\n    if (clonedParams) {\n      clonedParams = self.buildParametersForSorting(clonedParams, sortParameter, orderType);\n      self.findResults(content, clonedParams, pageToShow, _hasOwnLoader);\n    }\n  },\n\n  /**\r\n      * Build the parameters to send request\r\n      * @param {params} clonedParams \r\n      * @param {xpath or similar} sortParameter \r\n      * @param {ASC or DESC} orderType \r\n      */\n  buildParametersForSorting: function buildParametersForSorting(clonedParams, sortParameter, orderType) {\n    var self = this;\n    var sorted = false;\n    var newParameters = clonedParams.parameters;\n    newParameters = $.type(newParameters) === \"array\" ? newParameters : JSON.parse(newParameters);\n    if (newParameters.length > 0) {\n      $.each(newParameters, function (i, item) {\n        var itemXpath = item.xpath;\n\n        if (itemXpath === sortParameter) {\n          item.orderType = orderType;\n          sorted = true;\n        } else {\n          item.orderType = \"NONE\";\n        }\n\n      });\n    }\n    if (!sorted && sortParameter != \"\" && typeof sortParameter != \"undefined\") {\n      newParameters.push({\n        \"value\": null,\n        \"included\": true,\n        \"xpath\": sortParameter,\n        \"searchType\": \"NONE\",\n        \"orderType\": orderType,\n        \"isAddedTableSorting\": true });\n\n    }\n    self.sortedField = { \"xpath\": sortParameter,\n      \"orderType\": orderType };\n    clonedParams.parameters = newParameters;\n    return clonedParams;\n  },\n\n  /**\r\n      * Init sort xpath and field\r\n      */\n  initSortParameters: function initSortParameters() {\n    var self = this,\n    _parameters = self.initialSearchParams.parameters || [];\n    for (var i = 0; i < _parameters.length; i++) {\n      var param = _parameters[i];\n      if (param.orderType !== 'NONE') {\n        self.sortedField = { \"xpath\": param.xpath, \"orderType\": param.orderType };\n        break;\n      }\n    }\n  },\n\n  previousValues: function previousValues(_previousValues) {\n    var self = this;\n    var content = self.getContent();\n    $(\"#queryFormName\", content).val(_previousValues.definition.name);\n    $(\"#queryFormDescription\", content).val(_previousValues.definition.description);\n    self.selectedItemsToShare.users = _previousValues && _previousValues.users ? _previousValues.users.map(String) : [];\n    self.selectedItemsToShare.groups = _previousValues && _previousValues.groups ? _previousValues.groups : [];\n  },\n\n  /*\r\n      *Collect parameters and save query form results\r\n      */\n  createStoredQueryForm: function createStoredQueryForm() {\n    var self = this,\n    _ACTIONS = self.Class.QUERY_FORM_ACTIONS;\n    var params = self.buildStoredQueryFormParams();\n    var deferred = new $.Deferred();\n    if (params != null) {\n      $.when(self.dataService.saveStoredQueryForm(params)).done(function (response) {\n        self.publish(\"closeCurrentDialog\");\n        self.readyToSave = false;\n        self.params.queryFormAction = _ACTIONS.RENDER_QUERY_FORM;\n\n        if ($(\"#queryFormShortcut\").has(\"#modalMenuBtList\").length == 0) {\n          $.when(self.workportalFacade.getWidget(\"queriesShortcut\", {})).\n          pipe(function (result) {\n            widget = result;\n            return widget.render();\n          }).done(function () {\n            try {\n              var content = widget.getContent();\n              $(\"#queryFormShortcut\").html(content);\n              self.params.executeQueryForm(response);\n            } catch (e) {\n              // error\n            }\n          });\n        } else\n        {\n          self.params.executeQueryForm(response);\n        }\n        deferred.resolve();\n      }).fail(function (error) {\n        bizagi.log(error);\n        deferred.reject();\n      });\n    } else {\n      deferred.reject();\n    }\n    return deferred.promise();\n  },\n\n  closeQueryForm: function closeQueryForm() {\n    //$($('.ui-dialog .ui-dialog-titlebar-close')[0]).click();\n  },\n\n  /*\r\n     *Collect parameters and save query form results\r\n     */\n  updateStoredQueryForm: function updateStoredQueryForm() {\n    var self = this,\n    _ACTIONS = self.Class.QUERY_FORM_ACTIONS;\n    var params = self.buildStoredQueryFormParams();\n    if (params != null) {\n      if (self.validateTypeAndOneCheck(self.getSearchParams())) {\n        params.id = self.idQueryForm;\n        $.when(self.dataService.updateStoredQueryForm(params)).done(function () {\n          self.readyToSave = false;\n          self.params.queryFormAction = _ACTIONS.RENDER_QUERY_FORM;\n          self.renderQueryForm();\n          self.publish(\"refreshQueryFormShortCut\");\n        }).fail(function (error) {\n          bizagi.log(error);\n        });\n      } else {\n        self.throwMessageAtLeastOneCheck(self.getContent());\n      }\n      return true;\n    }\n    return false;\n  },\n\n  buildStoredQueryFormParams: function buildStoredQueryFormParams() {\n    var self = this,\n    _ACTIONS = self.Class.QUERY_FORM_ACTIONS;\n    var content = self.getContent();\n    var storedQueryFormParameters = {};\n    storedQueryFormParameters.users = JSON.stringify($.unique(self.selectedItemsToShare.users));\n    storedQueryFormParameters.groups = JSON.stringify($.unique(self.selectedItemsToShare.groups));\n    if (self.params.queryFormAction == _ACTIONS.EDIT) {\n      var request = {\n        \"parameters\": [] };\n\n      self.searchParams = self.queryForm.getSearchParams(request);\n    }\n    storedQueryFormParameters.guid = self.guidForm;\n    var nameSaveAs = $(\"#queryFormNameSaveAs\", self.dialogSaveAs).val();\n    var nameSave = $(\"#queryFormName\", content).val().trim();\n    var alert;\n    if (self.saveAs && (nameSaveAs == null || nameSaveAs == \"\")) {\n      alert = $(\"#queryFormNameSaveAs\").next(\".ui-bizagi-input-icon-error\");\n      alert.show();\n      alert.tooltip({ content: bizagi.localization.getResource(\"workportal-general-error-required\") });\n      return null;\n    }\n\n    // If the text is not set show an error\n    if (!self.saveAs && (nameSave == null || nameSave == \"\")) {\n      alert = $(\"#queryFormName\", content).next(\".ui-bizagi-input-icon-error\");\n      alert.show();\n      alert.tooltip({ content: bizagi.localization.getResource(\"workportal-general-error-required\") });\n      return null;\n    }\n\n    if (self.validationController && self.queryForm.validateForm() || self.queryForm) {\n      if (typeof self.searchParams.parameters == \"string\") {\n        self.searchParams.parameters = JSON.parse(self.searchParams.parameters);\n      }\n      storedQueryFormParameters.definition = JSON.stringify({\n        name: nameSaveAs ? nameSaveAs : nameSave,\n        description: $(\"#queryFormDescriptionSaveAs\", self.dialogSaveAs).val() ? $(\"#queryFormDescriptionSaveAs\", self.dialogSaveAs).val() : $(\"#queryFormDescription\", content).val(),\n        parameters: self.searchParams.parameters,\n        type: self.queryFormType,\n        entityGuid: self.guidEntity,\n        includeAllUsers: self.includeAllUsers,\n        parentQueryForm: self.queryForm.properties.displayName });\n\n      return storedQueryFormParameters;\n    }\n  },\n\n  /**\r\n      * set or get is in share tab\r\n      * @param {Boolean} value \r\n      */\n  isInShareTab: function isInShareTab(value) {\n    var self = this;\n    if (value !== undefined) {\n      self._isInShareTab = value;\n    }\n    return self._isInShareTab;\n  },\n\n  /*\r\n     * saveResults,  show the form to save the current query result\r\n     */\n  showSaveResultsForm: function showSaveResultsForm() {\n    var self = this;\n    var content = self.getContent();\n    self.readyToSave = true;\n    var adminResult = $.tmpl(self.adminResult, {});\n\n    $(\"#tab_share\", adminResult).click(function () {\n      self.initShareSelection();\n      $(\"#query-form\").hide();\n      self.isInShareTab(true);\n    });\n    $(\"#tab_definition\", adminResult).click(function () {\n      self.isInShareTab(false);\n      self._canGoToForm($(\"#query-form\"), self.params.queryFormAction, self.totalRecords);\n    });\n    $(\"input[type=radio][name=shareType]\", adminResult).change(function () {\n      if (this.value == 'users') {\n        self.initShareSelection();\n      } else\n      if (this.value == 'groups') {\n        $.when(self.searchGroupToShare()).\n        done(function () {\n          $(\"#userShare\", self.shareSlection).hide();\n        });\n      }\n    });\n    $(\"#query-form\", content).hide();\n    $(\"#queries-results-per-page\", content).hide();\n    $(\"#query-form-result\", content).hide();\n    $(\"#query-form-admin-result\", content).show();\n    $(\"#query-form-admin-result\", content).html(adminResult);\n    $(\"#admin-stored-query-form-wrapper\", content).tabs();\n\n    //To validate if the input contains a value and depends on that show or hide the div that indicates the required field\n    $(\"#queryFormName\", content).keyup(function () {\n      self.validateRequireField();\n    });\n\n  },\n\n  /**\r\n      * validates if the form can be displayed\r\n      * @param {*} form \r\n      * @param {*} queryFormAction \r\n      * @param {*} totalRecords \r\n      */\n  _canGoToForm: function _canGoToForm(form, queryFormAction, totalRecords) {\n    var self = this,\n    _ACTIONS = self.Class.QUERY_FORM_ACTIONS;\n    if (queryFormAction === _ACTIONS.EDIT && totalRecords > 0) {\n      form.show();\n    }\n  },\n\n  validateRequireField: function validateRequireField() {\n\n    var name = $(\"#queryFormName\").val();\n    if (/([^\\s])/.test(name)) {\n      $(\"#input-name-ui-bizagi-input-required\").hide();\n    } else {\n      $(\"#input-name-ui-bizagi-input-required\").show();\n    }\n\n  },\n\n  initShareSelection: function initShareSelection() {\n    var self = this;\n    var content = self.getContent();\n    var shareSelection = $.tmpl(self.shareSelection, {});\n    var users = self.selectedItemsToShare.users;\n    $(\"#shareUsers\", content).prop('checked', true);\n    $(\"#search_user\", shareSelection).click(function () {\n      self.searchUserToShare();\n    });\n    $(\"#shareSelectionPanel\", content).html(shareSelection);\n    $(\"#move_left\", content).click(function () {\n      self.removeItem();\n    });\n    $(\"#move_right\", content).click(function () {\n      self.addItem();\n    });\n    if (users.length > 0) {\n      self.searchSavedUser();\n    }\n  },\n\n  searchUserToShare: function searchUserToShare() {\n    var self = this;\n    var content = self.getContent();\n    var filterData = {\n      userName: $(\"#userName\", content).val(),\n      domain: $(\"#domain\", content).val(),\n      fullName: $(\"#fullName\", content).val(),\n      queryFormId: self.guidForm };\n\n    $.when(self.dataService.searchUsersSharedQuery(filterData)).done(function (response) {\n      var filteredUsers = [];\n      $.each(response.users, function (index, item) {\n        var dupIndex;\n        if (item) {\n          dupIndex = $.inArray(item.idUser.toString(), self.selectedItemsToShare.users);\n          if (dupIndex < 0) {\n            filteredUsers.push(item);\n          }\n        }\n      });\n      self.showDataToShare(filteredUsers, []);\n    }).fail(function (error) {\n      bizagi.log(error);\n    });\n  },\n\n  searchSavedUser: function searchSavedUser() {\n    var self = this;\n    var content = self.getContent();\n    var shareType = $(\"input[type=radio][name=shareType]:checked\", content).val();\n    $.when(self.dataService.searchUsersByID(self.selectedItemsToShare.users)).done(function (response) {\n      $(\"#ListBoxResult\", content).empty();\n      self.addPrevious(response, shareType);\n    }).fail(function (error) {\n      bizagi.log(error);\n    });\n  },\n\n  searchGroupToShare: function searchGroupToShare() {\n    var self = this;\n    var params = { profileType: 11 };\n    return self.dataService.searchProfiles(params).\n    pipe(function (groups) {\n      var filteredGroups = [],groupsSelected = [];\n      $.each(groups.response, function (index, item) {\n        var dupIndex;\n        if (item) {\n          dupIndex = $.inArray(item.id, self.selectedItemsToShare.groups);\n          if (dupIndex < 0) {\n            filteredGroups.push(item);\n          } else\n          {\n            groupsSelected.push(item);\n          }\n        }\n      });\n      self.showDataToShare(filteredGroups, groupsSelected);\n    });\n  },\n\n  showDataToShare: function showDataToShare(items, itemSelected) {\n    var self = this;\n    var content = self.getContent();\n    var shareType = $(\"input[type=radio][name=shareType]:checked\", content).val();\n    var selectData;\n    if (shareType == \"users\") {\n      selectData = $.tmpl(self.selectUser, { elementList: items });\n    } else\n    {\n      selectData = $.tmpl(self.selectGroup, { elementList: items });\n\n      $(\"#ListBoxResult\", content).empty();\n      if (itemSelected.length > 0) {\n        self.addPrevious(itemSelected, shareType);\n      }\n    }\n\n    $(\"#ListBoxSource\", content).replaceWith(selectData);\n  },\n\n  addPrevious: function addPrevious(items, shareType) {\n    var self = this;\n    var content = self.getContent();\n    if (shareType == \"users\") {\n      $.each(items.users, function (i, item) {\n        $(\"#ListBoxResult\", content).append(new Option(item.userName, item.idUser));\n      });\n    } else\n    {\n      $.each(items, function (i, item) {\n        $(\"#ListBoxResult\", content).append(new Option(item.displayName, item.id));\n      });\n    }\n  },\n\n  addItem: function addItem() {\n    var self = this;\n    var content = self.getContent();\n    var shareType = $(\"input[type=radio][name=shareType]:checked\", content).val();\n    var users = $(\"#ListBoxSource option:selected\", content);\n\n    $.each(users, function (i, item) {\n      if ($.inArray(item.value, self.selectedItemsToShare) == -1) {\n        //Persist user information\n        self.selectedItemsToShare[shareType].push(item.value.toString());\n        $(\"#ListBoxSource option[value='\" + item.value + \"']\", content).appendTo(\"#ListBoxResult\"); //visual behavior\n      } else {\n        //remove only selected users\n        $(\"#ListBoxSource option[value='\" + item.value + \"']\", content).remove(); //visual behavior\n      }\n    });\n    $(\"#ListBoxResult option:selected\").prop(\"selected\", false);\n  },\n\n  removeItem: function removeItem() {\n    var self = this;\n    var content = self.getContent();\n    var shareType = $(\"input[type=radio][name=shareType]:checked\", content).val();\n    var users = $(\"#ListBoxResult option:selected\", content);\n    var auxUsers = $(\"#ListBoxSource option\").toArray();\n    var arrayUserValues = [];\n    $.each(auxUsers, function (i, item) {\n      arrayUserValues.push(item.value);\n    });\n\n    $.each(users, function (i, item) {\n      var userId = item.value;\n      if ($.inArray(userId, arrayUserValues) == -1) {\n        $(\"#ListBoxResult option[value='\" + userId + \"']\", content).appendTo(\"#ListBoxSource\"); //visual behavior\n      } else\n      {\n        $(\"#ListBoxResult option[value='\" + userId + \"']\", content).remove(); //visual behavior\n      }\n      self.selectedItemsToShare[shareType].splice($.inArray(userId, self.selectedItemsToShare[shareType]), 1);\n    });\n    $(\"#ListBoxSource option:selected\").prop(\"selected\", false);\n  },\n\n  HTMLEncodeText: function HTMLEncodeText(strText) {\n    var strNew = strText;\n\n    strNew = strNew.replace(\"á\", \"&aacute;\");\n    strNew = strNew.replace(\"é\", \"&eacute;\");\n    strNew = strNew.replace(\"í\", \"&iacute;\");\n    strNew = strNew.replace(\"ó\", \"&oacute;\");\n    strNew = strNew.replace(\"ú\", \"&uacute;\");\n    strNew = strNew.replace(\"ñ\", \"&ntilde;\");\n\n    strNew = strNew.replace(\"Á\", \"&Aacute;\");\n    strNew = strNew.replace(\"É\", \"&Eacute;\");\n    strNew = strNew.replace(\"Í\", \"&Iacute;\");\n    strNew = strNew.replace(\"Ó\", \"&Oacute;\");\n    strNew = strNew.replace(\"Ú\", \"&Uacute;\");\n    strNew = strNew.replace(\"Ñ\", \"&Ntilde;\");\n\n    return strNew;\n  },\n\n\n  /*\r\n     * *********************\r\n     * aspx query forms\r\n     * ********************\r\n     */\n  frankensteinPostRender: function frankensteinPostRender() {\n    var self = this;\n    var content = self.getContent();\n    var iframe = $(\"#queryFormIFrame\", content);\n    var css = \"\";\n    var cssList = \"\";\n    var injectCss = [\".ui-bizagi-old-render*\", \"@font-face\"];\n\n\n    iframe.attr('frameborder', 0);\n\n    if (_typeof(injectCss) == \"object\") {\n      $.each(injectCss, function (key, value) {\n        css += bizagi.getStyle(value);\n        cssList += value.replace(\".\", \"\") + \" \";\n      });\n    } else {\n      css += bizagi.getStyle(injectCss);\n      cssList += injectCss.replace(\".\", \"\");\n    }\n    // Wait until the iframe has been loadedpip\n    iframe.load(function () {\n      // inject css\n      var iframeContent = $(this).contents();\n      var resetCSS = 'body, .ui-bizagi-old-render { overflow-y: visible;};';\n      iframeContent.find('input[name=\"btnReturn\"]').css('display', 'none');\n      // Append css\n      $('head', iframeContent).append(\"<style type='text/css'>\" + css + resetCSS + \"</style>\");\n      $('body', iframeContent).addClass(cssList.replace(\"*\", \"\"));\n      // Remove borders buttons\n      $('body a.WPButton', iframeContent).parent().siblings().remove();\n      var callBack = function callBack(params) {\n        // This script will execute inside the iframe context\n        this.openBACase = function (idCase, sHref) {\n          var workitem = null,workflow = null;\n          if (sHref.indexOf(\"idWorkitem=\") > -1) {\n            workitem = sHref.substring(sHref.indexOf(\"idWorkitem=\") + 11);\n            workitem = workitem.substring(0, workitem.indexOf(\"&\"));\n          }\n          if (sHref.indexOf(\"idWorkflow=\") > -1) {\n            workflow = sHref.substring(sHref.indexOf(\"idWorkflow=\") + 11);\n          }\n          // Executes thepw act on\n          params.controller.publish(\"executeAction\", {\n            action: params.routingAction,\n            idCase: idCase,\n            idWorkItem: workitem,\n            idWorkflow: workflow,\n            referrer: 'queryform' });\n\n\n          var lastQueryFullKey = document.getElementById('h_lastFullKey');\n          var lstCasesElement = document.getElementById('h_lstCases');\n          //bizagi.referrerParams = lastQueryFullKey.value;\n          // Lista de casos bizagi.lstIdCases\n          try {\n            params.controller.dataService.lastQueryFullKey = lastQueryFullKey.value;\n            params.bizagireference.referrerParams.referrer = 'queryform';\n            params.bizagireference.lstIdCases = lstCasesElement.value.split(',');\n            // close dialog\n          } catch (e) {\n            // se produjo un error\n          }\n          for (var i = 0; i < params.bizagireference.workportal.desktop.dialogStack.length; i++) {\n            params.controller.publish(\"closeCurrentDialog\");\n          }\n        };\n\n        this.ShowCaseSumary = function (idCase) {\n          // Verify render version\n          var $ = params.$;\n          $.when(params.controller.dataService.getCaseFormsRenderVersion({ idCase: idCase })).done(function (version) {\n            if (version.formsRenderVersion == 1) {\n              params.controller.publish(\"showDialogWidget\", {\n                widgetName: params.bizagireference.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_GENERICIFRAME,\n                widgetURL: params.controller.dataService.serviceLocator.getUrl(\"old-render\") + \"?idCase=\" + idCase + \"&isSummary=1\",\n                modalParameters: {\n                  title: params.controller.resources.getResource(\"workportal-widget-navigation-summary-case\") },\n\n                afterLoad: params.callBack,\n                afterLoadParams: {\n                  routingAction: params.bizagireference.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,\n                  genericIframe: params.bizagireference.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_GENERICIFRAME,\n                  bizagi: params.bizagireference } });\n\n\n            } else {\n              // new version\n              /*var summary = params.bizagireference.workportal.widgets.search.prototype;\r\n              summary.caseSummaryTemplate = params.controller.workportalFacade.getTemplate(\"inbox-common-case-summary\");\r\n              summary.dataService = params.controller.dataService;\r\n              try{\r\n              summary.showCase.apply(summary,[idCase]);\r\n              }catch(e){\r\n              }*/\n            }\n          });\n        };\n      };\n\n      iframe.callInside(callBack, {\n        controller: self,\n        routingAction: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,\n        bizagireference: bizagi,\n        callBack: callBack,\n        $: jQuery });\n\n    });\n\n  },\n\n  /**\r\n      * @override\r\n      */\n  dispose: function dispose() {\n    var self = this;\n    self.disposeGoToCase(false);\n    self._super();\n  },\n\n  _getWorkItemsInfo: function _getWorkItemsInfo(headers, rows) {\n    var self = this,\n    _finalWorkItems = {};\n\n    var indexWorkItems = self._getIndexFromTableColumn(headers, \"fieldName\", \"CURRENTTASK\");\n    var indexCaseNumber = self._getIndexFromTableColumn(headers, \"fieldName\", \"RADNUMBER\");\n\n    for (var j = 0; j < rows.length && indexWorkItems !== -1; j++) {\n      var _rowInfo = rows[j],\n      _rowWorkItems = _rowInfo[indexWorkItems];\n\n      for (var k = 0; k < _rowWorkItems.length && indexCaseNumber !== -1; k++) {\n        var _workItem = _rowWorkItems[k];\n\n        _workItem.idCase = _rowInfo[indexCaseNumber].idCase;\n        _workItem.caseNumber = _rowInfo[indexCaseNumber].radNumber;\n        _finalWorkItems[_workItem.idWorkItem] = _workItem;\n      }\n    }\n    return _finalWorkItems;\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /*\r\n                                                                                                                                                                                                                                                                                                                                                                               *   Name: BizAgi Workportal QuickAction principal\r\n                                                                                                                                                                                                                                                                                                                                                                               *   Author: Kvn Alvarado (based on  Edward Morales version)\r\n                                                                                                                                                                                                                                                                                                                                                                               */\n\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.quickActions\", {\n\n  /**\r\n                                                                                     * class for more button when is active, showing hidden buttons\r\n                                                                                     */\n  CLASS_ACTIVE_MORE_BUTTON: \"active\",\n\n  /**\r\n                                       * total items selected\r\n                                       */\n  SELECTOR_NUMBER_SELECTED: \"#ui-bizagi-workportal-widget-quick-actions-details > .quick-actions-details-activities-selected\",\n\n  /**\r\n                                                                                                                                * container for quick actions buttons\r\n                                                                                                                                */\n  SELECTOR_BUTTONS_CONTAINER: \"#ui-bizagi-workportal-widget-quick-actions-buttons\",\n\n  /**\r\n                                                                                     * buttons for quick actions\r\n                                                                                     */\n  SELECTOR_BUTTON_LAUNCH: \"button.quick-actions-details-button-launch\",\n\n  /**\r\n                                                                         * selector where the summary is shown\r\n                                                                         */\n  SELECTOR_SUMMARY_EXECUTED_ACTIONS: \".summary-quick-actions-executed\",\n\n  /**  \r\n                                                                         * buttons for quick actions\r\n                                                                         */\n  SELECTOR_HIDDEN_BUTTON_LAUNCH: \"div.quick-actions-details-button-launch-hidden\",\n\n  /**\r\n                                                                                    * button for show more\r\n                                                                                    */\n  SELECTOR_MORE_BUTTON: \"button#quick-actions-details-more-button\",\n\n  /**\r\n                                                                     * button for show more\r\n                                                                     */\n  SELECTOR_HIDDEN_BUTTONS_CONTAINER: \"div#quick-actions-details-buttons-hidden-container\",\n\n  /**\r\n                                                                                            * Title for inbox grid \r\n                                                                                            */\n  SELECTOR_INBOX_GRID_TITLE: \"div#contentInboxName\",\n\n  /**\r\n                                                      * data for widget\r\n                                                      */\n  DATA_PROPERTIES: {\n    // Int : total activities selected for quickActions\n    TOTAL_SELECTED: \"TOTAL_SELECTED\",\n\n    // Boolean : show principal container\n    SHOW: \"SHOW\",\n\n    // Array : list data for all buttons\n    BUTTONS: \"BUTTONS\",\n\n    // Array : list data for buttons to show in top\n    BUTTONS_TO_SHOW: \"BUTTONS_TO_SHOW\",\n\n    // Array : list data for hide for more button\n    BUTTONS_HIDDEN: \"BUTTONS_HIDDEN\",\n\n    // Int : width buttons container\n    WIDTH_BUTTONS_CONTAINER: \"WIDTH_BUTTONS_CONTAINER\",\n\n    // Boolean : if true then show the more button\n    SHOW_MORE_BUTTON: \"SHOW_MORE_BUTTON\",\n\n    // Boolean : if true then show the hidden buttons\n    SHOW_HIDDEN_BUTTONS: \"SHOW_HIDDEN_BUTTONS\" } },\n\n\n{\n  /**\r\n   *   Constructor\r\n   */\n  init: function init(workportalFacade, dataService, params) {\n    var self = this,\n    _params = {\n      callback: self.callbackCheckboxGroup.bind(self),\n      getContainerSelector: params.getContainerSelector,\n      checkAllSelector: params.checkAllSelector };\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    self.checkboxGroup = new bizagi.workportal.widgets.checkboxGroup(self.workportalFacade, self.dataService, _params);\n    self.checkboxGroup.render({});\n\n    self.params = {\n      refreshShowedResults: params.refreshShowedResults };\n\n\n    //Load templates\n    self.loadTemplates({\n      \"quick-actions-container\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.quickActions\").concat(\"#ui-bizagi-workportal-widget-quick-actions\"),\n      \"quick-actions-button\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.quickActions\").concat(\"#ui-bizagi-workportal-widget-quick-actions-button\"),\n      \"quick-actions-modal-confirm\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.quickActions\").concat(\"#ui-bizagi-workportal-widget-quick-actions-modal-confirm\"),\n      \"quick-actions-more-button\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.quickActions\").concat(\"#ui-bizagi-workportal-widget-quick-actions-more-button\"),\n      \"quick-actions-button-hidden\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.quickActions\").concat(\"#ui-bizagi-workportal-widget-quick-actions-button-hidden\"),\n      useNewEngine: false });\n\n    self._setInitialData();\n    self.setPersistCheckboxGroup(false);\n  },\n\n  /**\r\n      * @override\r\n      */\n  renderContent: function renderContent() {\n    var self = this,\n    _template = self.getTemplate(\"quick-actions-container\"),\n    _content = self.content = $.tmpl(_template, {});\n\n    _content.appendTo(self.container);\n    self._events();\n  },\n\n  /**\r\n      * set the container where we have to render in\r\n      * @param {Jquery Element} container parent of this quickAction\r\n      */\n  renderIn: function renderIn(container) {\n    var self = this;\n    self.container = container;\n    self.render();\n  },\n\n  /**\r\n      * @override\r\n      */\n  postRender: function postRender() {\n    var self = this;\n    self._updateView();\n  },\n\n  /**\r\n      * Set the persist checkbox property\r\n      * @param {*} newValue\r\n      */\n  setPersistCheckboxGroup: function setPersistCheckboxGroup(newValue) {\n    var self = this;\n    self.persistCheckboxGroup = newValue;\n  },\n\n  /**\r\n      * Set the items information to execute\r\n      * @param {*} itemsInfo a dictionary with the workItems info,\r\n      * where the id workItem is the key and iis information (idTask, idCase, etc) the value\r\n      */\n  setDataToExecute: function setDataToExecute(itemsInfo, quickActions) {\n    var self = this;\n    self.itemsInfo = itemsInfo;\n    self.setAvailableButtons(quickActions);\n  },\n\n  /**\r\n      * Callback when the checked Items change\r\n      */\n  callbackCheckboxGroup: function callbackCheckboxGroup() {\n    var self = this;\n    self.itemsSelected = self.checkboxGroup.getChecked();\n    self._updateButtonsToShow();\n    self._setItemsSelected(self.itemsSelected.length);\n  },\n\n  /**\r\n      * Update the buttons to be showed depending on the selected  items\r\n      */\n  _updateButtonsToShow: function _updateButtonsToShow() {\n    var self = this,\n    _buttonsToShow = self.getButtonsToShow();\n    self._showCurrentButtons(_buttonsToShow);\n  },\n\n  /**\r\n      * Filter the buttons to show depending on selected items\r\n      */\n  getButtonsToShow: function getButtonsToShow() {\n    var self = this,\n    _buttons = [];\n    _labels = Object.keys(self.quickActionsPerName);\n\n    for (var i = 0; i < _labels.length; i++) {\n      var _label = _labels[i],\n      _buttonQuickActions = self.quickActionsPerName[_label],\n      _show = self._shouldShowButton(_buttonQuickActions);\n\n      if (_show) {\n        _buttons.push(_label);\n      }\n    }\n    return _buttons;\n  },\n\n  /**\r\n      * Check if a button should be showed\r\n      * Return true if all the selected items are in the quickActions of the button\r\n      * @param {*} quickActions \r\n      */\n  _shouldShowButton: function _shouldShowButton(buttonQuickActions) {\n    var self = this,\n    _itemsLength = self.itemsSelected.length,\n    _showButton = _itemsLength > 0 ? true : false,\n    _compareFunction = function _compareFunction(qa) {\n      var _idWorkItem = self.itemsSelected[i].id,\n      _idTask = self.itemsInfo[_idWorkItem].idTask;\n      return qa.idTask === _idTask;\n    };\n    for (var i = 0; i < self.itemsSelected.length && _showButton; i++) {\n      if (!buttonQuickActions.some(_compareFunction)) {\n        _showButton = false;\n      }\n    }\n    return _showButton;\n  },\n\n  /**\r\n      * Display the buttons depending on the selected items\r\n      * @param {*} itemsToShow \r\n      */\n  _showCurrentButtons: function _showCurrentButtons(itemsToShow) {\n    var self = this;\n\n    var _newButtons = itemsToShow.map(function (item) {\n      return {\n        id: item,\n        text: item };\n\n    });\n\n    self._addButtons(_newButtons);\n  },\n\n  /**\r\n      * Render the checkboxes group, including the All Processes checkbox\r\n      * @param {*} context in which the checkboxes will be rendered\r\n      */\n  renderCheckboxGroup: function renderCheckboxGroup(context) {\n    var self = this,\n    _idWorkItemsToShow = self._filterItemsToShowCheckbox();\n    self.checkboxGroup.renderCheckboxGroup(context, _idWorkItemsToShow, self.persistCheckboxGroup);\n    self.setPersistCheckboxGroup(false);\n  },\n\n  /**\r\n      * Filter the idWorkItems of the items that have quickActions.\r\n      * It search if the idTask of the workItem have a quickAction.\r\n      */\n  _filterItemsToShowCheckbox: function _filterItemsToShowCheckbox() {\n    var self = this,\n    _idWorkItemsToShow = [];\n    _workItems = Object.keys(self.itemsInfo);\n\n    for (var i = 0; i < _workItems.length; i++) {\n      var _workItem = self.itemsInfo[_workItems[i]];\n\n      if (self.idTasksWithQuickActions.indexOf(_workItem.idTask) !== -1) {\n        _idWorkItemsToShow.push(_workItem.idWorkItem);\n      }\n    }\n    return _idWorkItemsToShow;\n  },\n\n  /**\r\n      * Set the value of buttons available depending on the quick actions\r\n      * It initialize an array with the available quick actions by Name,\r\n      * and an array with the idTask that have an associated quickAction.\r\n      * @param {*} quickActions \r\n      */\n  setAvailableButtons: function setAvailableButtons(quickActions) {\n    var self = this;\n    self.quickActionsPerName = {};\n    self.idTasksWithQuickActions = [];\n\n    for (var i = 0; quickActions && i < quickActions.length; i++) {\n      var label = quickActions[i].label;\n      if (!self.quickActionsPerName[label]) {\n        self.quickActionsPerName[label] = [];\n      }\n      self.quickActionsPerName[label].push(quickActions[i]);\n      self.addItemToShowCheckbox(quickActions[i].idTask);\n    }\n  },\n\n  /**\r\n      * Add an idTask that have quick actions\r\n      * @param {*} id \r\n      */\n  addItemToShowCheckbox: function addItemToShowCheckbox(id) {\n    var self = this;\n    if (self.idTasksWithQuickActions.indexOf(id) === -1) {\n      self.idTasksWithQuickActions.push(id);\n    }\n  },\n\n  /**\r\n      * render the button template for quick actions\r\n      * @param {String} text of the button\r\n      * @param {Boolean} hidden template to use, normal button or hidden\r\n      */\n  _renderButton: function _renderButton(id, text, hidden) {\n    var self = this,\n    _templeateToUse = hidden ? \"quick-actions-button-hidden\" : \"quick-actions-button\",\n    _template = self.getTemplate(_templeateToUse),\n    _params = {\n      text: text,\n      id: id };\n\n\n    return $.tmpl(_template, _params);\n  },\n\n  /**\r\n      * render the more button and return the content\r\n      */\n  _renderMoreButton: function _renderMoreButton() {\n    var self = this,\n    _template = self.getTemplate(\"quick-actions-more-button\"),\n    _params = {};\n\n    return $.tmpl(_template, _params);\n  },\n\n  /**\r\n      * create or remove the events for this widget\r\n      * @param {Boolean} dispose true if want to dispose events\r\n      */\n  _events: function _events(dispose) {\n    var self = this;\n    if (dispose === true) {\n      self.content.off(\"click\", self.Class.SELECTOR_BUTTON_LAUNCH);\n      self.content.off(\"click\", self.Class.SELECTOR_HIDDEN_BUTTON_LAUNCH);\n      self.content.off(\"click\", self.Class.SELECTOR_MORE_BUTTON);\n      self.unsubscribe(\"resizeLayout\");\n    } else {\n      self.content.on(\"click\", self.Class.SELECTOR_BUTTON_LAUNCH, self._clickOnAction.bind(self));\n      self.content.on(\"click\", self.Class.SELECTOR_HIDDEN_BUTTON_LAUNCH, self._clickOnAction.bind(self));\n      self.content.on(\"click\", self.Class.SELECTOR_MORE_BUTTON, self._clickOnMore.bind(self));\n      self.subscribe(\"resizeLayout\", self._adjustButtonsWidth.bind(self));\n    }\n  },\n\n  /**\r\n      * show confirmation message for start quick action selected\r\n      * close the hidden buttons\r\n      */\n  _clickOnAction: function _clickOnAction(e) {\n    var self = this,\n    _prop = self.Class.DATA_PROPERTIES,\n    _title = e.currentTarget.textContent,\n    _num = self._getNumberOfSelected();\n    _textToShow = bizagi.localization.getResourceByElementsNumber(\"workportal-quick-actions-confirm-execute-detail\", _num).replace(\"{0}\", _num),\n    _message = $.tmpl(self.getTemplate(\"quick-actions-modal-confirm\"), { numberActivities: _textToShow }).html(),\n    _modalParams = self._buildParamsForModalConfirm(_title, _message),\n    _buttonClicked = e.target.id;\n\n    self._setProperty(_prop.SHOW_HIDDEN_BUTTONS, false);\n\n    $.when(bizagi.showConfirmationBox.apply(self, _modalParams)).done(function () {\n      var data = self.setInitialDataForModal(_buttonClicked);\n      self.showResultDialog(_title, data);\n    });\n\n  },\n\n  /**\r\n      * Map the data that modal needs when yes is clicked to start execution\r\n      */\n  setInitialDataForModal: function setInitialDataForModal(button) {\n    var self = this,\n    _data = { activities: [] },\n    _buttonActions = self.quickActionsPerName[button];\n\n    for (var i = 0; i < self.itemsSelected.length; i++) {\n      var _workItem = self.itemsSelected[i].id,\n      _itemInfo = self.itemsInfo[_workItem];\n\n      for (var j = 0; j < _buttonActions.length; j++) {\n        var _quickAction = _buttonActions[j];\n\n        if (_itemInfo.idTask === _quickAction.idTask) {\n          var _newTask = {\n            workItemId: _itemInfo.idWorkItem,\n            taskId: _itemInfo.idTask,\n            activityName: _itemInfo.TaskName,\n            caseNumber: _itemInfo.caseNumber,\n            caseId: _itemInfo.idCase,\n            icon: \"gray\",\n            quickActionGuid: _quickAction.guid,\n            ruleGuid: _quickAction.guidRule,\n            actions: _quickAction.actions };\n\n\n          _data.activities.push(_newTask);\n        }\n      }\n    }\n    return _data;\n  },\n\n  /**\r\n      * Check if the item es checked\r\n      * @param {*} item \r\n      */\n  itemIsChecked: function itemIsChecked(item) {\n    var self = this,\n    _compareFunction = function _compareFunction(selected) {\n      return selected.id === item;\n    };\n    return self.itemsSelected.some(_compareFunction);\n  },\n\n  /**\r\n      * build params for showConfirmationBox\r\n      */\n  _buildParamsForModalConfirm: function _buildParamsForModalConfirm(titleModal, message) {\n    var self = this;\n    return [\n    // message\n    message,\n    // title\n    titleModal,\n    // showIcon\n    false,\n    // buttons\n    [\n    {\n      label: bizagi.localization.getResource('workportal-general-word-no'),\n      action: \"reject\",\n      \"class\": \"biz-wp-btn-secondary-real\" },\n    {\n      label: bizagi.localization.getResource(\"workportal-general-word-yes\"),\n      action: \"resolve\",\n      \"class\": \"biz-wp-btn-warning\" }],\n\n\n    // customOptions\n    {\n      dialogClass: \"ui-quick-action-modal-confirm\",\n      width: 500 }];\n\n\n  },\n\n  /**\r\n      * toggle hidden buttons container\r\n      */\n  _clickOnMore: function _clickOnMore() {\n    var self = this,\n    _prop = self.Class.DATA_PROPERTIES,\n    _showHidden = self._getProperty(_prop.SHOW_HIDDEN_BUTTONS);\n\n    self._setProperty(_prop.SHOW_HIDDEN_BUTTONS, !_showHidden);\n  },\n\n  /**\r\n      * set the value of the property and update the view, if exists else throw exception\r\n      * @param {DATA_PROPERTIES} prop \r\n      * @param {any} newValue \r\n      * @param {Boolean} setOnly if is true the view is not updated\r\n      */\n  _setProperty: function _setProperty(prop, newValue, setOnly) {\n    var self = this,\n    _setOnly = setOnly !== undefined ? setOnly : false,\n    _prop = self.Class.DATA_PROPERTIES[prop],\n    _changed = self.data[_prop] !== newValue,\n    _updateView = !_setOnly && _changed;\n\n    if (_prop === undefined)\n    throw \"Property does not exist: \" + prop;\n\n    self.data[_prop] = newValue;\n    if (_updateView)\n    self._updateView();\n  },\n\n  /**\r\n       * return the value of the property, if exists else throw exception\r\n       * @param {DATA_PROPERTIES} prop \r\n       */\n  _getProperty: function _getProperty(prop) {\n    var self = this,\n    _prop = self.Class.DATA_PROPERTIES[prop],\n    _valToReturn = self.data[_prop],\n    _cloneWith = Array.isArray(_valToReturn) ? [] : {};\n\n    if (_prop === undefined)\n    throw \"Property does not exist: \" + prop;\n    if (_typeof(_valToReturn) === \"object\")\n    _valToReturn = jQuery.extend(_cloneWith, _valToReturn);\n\n    return _valToReturn;\n  },\n\n  /**\r\n      * default initial data when widget starts\r\n      */\n\n  _setInitialData: function _setInitialData() {\n    var self = this,\n    _prop = self.Class.DATA_PROPERTIES;\n\n    self.data = {};\n    self.data[_prop.TOTAL_SELECTED] = 0;\n    self.data[_prop.SHOW] = false;\n    self.data[_prop.BUTTONS] = [];\n    self.data[_prop.BUTTONS_TO_SHOW] = [];\n    self.data[_prop.BUTTONS_HIDDEN] = [];\n    self.data[_prop.WIDTH_BUTTONS_CONTAINER] = 0;\n    self.data[_prop.SHOW_MORE_BUTTON] = false;\n    self.data[_prop.SHOW_HIDDEN_BUTTONS] = false;\n  },\n\n  /**\r\n      * set the items number selected in selector\r\n      */\n  _updateViewSelected: function _updateViewSelected() {\n    var self = this,\n    _prop = self.Class.DATA_PROPERTIES,\n    _num = self._getProperty(_prop.TOTAL_SELECTED),\n    _element = self.content.find(self.Class.SELECTOR_NUMBER_SELECTED);\n    _textToShow = bizagi.localization.getResourceByElementsNumber(\"workportal-quick-actions-selected-activities\", _num).\n    replace(\"{0}\", _num);\n\n    _element.text(_textToShow);\n  },\n\n  /**\r\n      * review if the buttons fill the space then show the more buttons\r\n      * and set the overflow buttons in hidden array (one by call)\r\n      * this method validate if the container has changed the width\r\n      */\n  _adjustButtonsWidth: function _adjustButtonsWidth() {\n    var self = this,\n    _SET_ONLY = true,\n    _prop = self.Class.DATA_PROPERTIES,\n    _eContainer = self.content.find(self.Class.SELECTOR_BUTTONS_CONTAINER),\n    _eFirstButton = self.content.find(self.Class.SELECTOR_BUTTON_LAUNCH + \":first\"),\n    _buttons_all = self._getProperty(_prop.BUTTONS),\n    _buttons_shown = self._getProperty(_prop.BUTTONS_TO_SHOW),\n    _buttons_hidden = self._getProperty(_prop.BUTTONS_HIDDEN),\n    _container_width = self._getProperty(_prop.WIDTH_BUTTONS_CONTAINER),\n    _newContainer_width = _eContainer.outerWidth(),\n    _resized = _container_width !== _newContainer_width,\n    _heightButton = _eFirstButton.outerHeight(),\n    _isOverLapped = _heightButton * 1.5 < _eContainer.outerHeight(),\n    _existsButtonsShown = _buttons_shown.length > 0,\n    _lastButtonShown = _buttons_shown.slice(-1),\n    _buttonsShown_exceptLast = _buttons_shown.slice(0, -1),\n    _newButtonsHidden = _resized ? [] : _lastButtonShown.concat(_buttons_hidden),\n    _start = function _start() {\n      self._setProperty(_prop.SHOW_MORE_BUTTON, false, _SET_ONLY);\n      self._setProperty(_prop.SHOW_HIDDEN_BUTTONS, false, _SET_ONLY);\n      self._setProperty(_prop.BUTTONS_HIDDEN, _newButtonsHidden, _SET_ONLY);\n      self._setProperty(_prop.WIDTH_BUTTONS_CONTAINER, _newContainer_width, _SET_ONLY);\n      self._setProperty(_prop.BUTTONS_TO_SHOW, _buttons_all);\n    },\n    _removeOneButton = function _removeOneButton() {\n      self._setProperty(_prop.SHOW_MORE_BUTTON, true, _SET_ONLY);\n      self._setProperty(_prop.BUTTONS_HIDDEN, _newButtonsHidden, _SET_ONLY);\n      self._setProperty(_prop.BUTTONS_TO_SHOW, _buttonsShown_exceptLast);\n    };\n\n    if (_resized) {\n      _start();\n    } else if (_isOverLapped && _existsButtonsShown) {\n      _removeOneButton();\n    }\n  },\n\n  /**\r\n      * show list buttons saved in data\r\n      */\n  _updateViewButtons: function _updateViewButtons() {\n    var self = this,\n    _prop = self.Class.DATA_PROPERTIES,\n    _buttonsShown = self._getProperty(_prop.BUTTONS_TO_SHOW),\n    _buttonsHidden = self._getProperty(_prop.BUTTONS_HIDDEN),\n    _moreButton = self._renderMoreButton(),\n    _containerToShow = self.content.find(self.Class.SELECTOR_BUTTONS_CONTAINER),\n    _containerToHide = _moreButton.find(self.Class.SELECTOR_HIDDEN_BUTTONS_CONTAINER),\n    _newButton = function _newButton(hidden, container, b) {\n      var buttonHtml = self._renderButton(b.id, b.text, hidden);\n      buttonHtml.appendTo(container);\n    };\n\n    _containerToShow.empty();\n    _buttonsShown.map(_newButton.bind(null, false, _containerToShow));\n    _moreButton.appendTo(_containerToShow);\n    _buttonsHidden.map(_newButton.bind(null, true, _containerToHide));\n    self._adjustButtonsWidth();\n  },\n\n  /**\r\n      * update active class for more button and its visibility\r\n      */\n  _updateViewMoreButton: function _updateViewMoreButton() {\n    var self = this,\n    _prop = self.Class.DATA_PROPERTIES,\n    _show = self._getProperty(_prop.SHOW_MORE_BUTTON),\n    _isActive = self._getProperty(_prop.SHOW_HIDDEN_BUTTONS),\n    _moreButton = self.content.find(self.Class.SELECTOR_MORE_BUTTON);\n\n    _moreButton.toggleClass(self.Class.CLASS_ACTIVE_MORE_BUTTON, _isActive);\n    _show ? _moreButton.show() : _moreButton.hide();\n  },\n\n  /**\r\n      * show or hide container\r\n      */\n  _updateViewContainer: function _updateViewContainer() {\n    var self = this,\n    _prop = self.Class.DATA_PROPERTIES,\n    _show = self._getProperty(_prop.SHOW),\n    _element = self.content,\n    _inboxGridTitle = $(self.Class.SELECTOR_INBOX_GRID_TITLE);\n\n    _show ? _element.css('display', 'grid') : _element.css('display', 'none');\n    _show ? _inboxGridTitle.css('display', 'none') : _inboxGridTitle.css('display', 'inline-block');\n  },\n\n  /**\r\n      * show or hide hidden buttons container\r\n      */\n  _updateViewHiddenButtons: function _updateViewHiddenButtons() {\n    var self = this,\n    _prop = self.Class.DATA_PROPERTIES,\n    _show = self._getProperty(_prop.SHOW_HIDDEN_BUTTONS),\n    _element = self.content.find(self.Class.SELECTOR_HIDDEN_BUTTONS_CONTAINER);\n\n    _show ? _element.show() : _element.hide();\n  },\n\n  /**\r\n      * principal method to update all views\r\n      */\n  _updateView: function _updateView() {\n    var self = this;\n    self._updateViewContainer();\n    self._updateViewSelected();\n    self._updateViewButtons();\n    self._updateViewMoreButton();\n    self._updateViewHiddenButtons();\n  },\n\n  /**\r\n      * apply the total items selected and the show of container\r\n      * @param {Int} num items selected\r\n       */\n  _setItemsSelected: function _setItemsSelected(num) {\n    var self = this,\n    _prop = self.Class.DATA_PROPERTIES,\n    _selectedVal = typeof num === \"number\" ? num : 0,\n    _buttons = self._getProperty(_prop.BUTTONS),\n    _showVal = num > 0 && _buttons.length > 0;\n\n    self._setProperty(_prop.SHOW, _showVal, true);\n    self._setProperty(_prop.TOTAL_SELECTED, _selectedVal);\n  },\n\n  /**\r\n      * Get the number of selected items\r\n      */\n  _getNumberOfSelected: function _getNumberOfSelected() {\n    var self = this,\n    _prop = self.Class.DATA_PROPERTIES,\n    _selectedVal = self._getProperty(_prop.TOTAL_SELECTED);\n    return _selectedVal;\n  },\n\n  /**\r\n      * Change all the buttons\r\n      * @param {*} buttons for button\r\n      */\n  _addButtons: function _addButtons(buttons) {\n    var self = this,\n    _prop = self.Class.DATA_PROPERTIES;\n\n    // Do not update data to avoid overload\n    self._setProperty(_prop.SHOW_MORE_BUTTON, false, true);\n    self._setProperty(_prop.BUTTONS_HIDDEN, [], true);\n    self._setProperty(_prop.BUTTONS_TO_SHOW, buttons, true);\n    self._setProperty(_prop.BUTTONS, buttons, true);\n  },\n\n  /**\r\n      *  show a modal with the quick actions results\r\n      */\n  showResultDialog: function showResultDialog(title, data) {\n    var self = this;\n    bizagi.loader.start(\"entity-engine-view\").then(function () {\n      var instanceQuickActionsExecute;\n      var dialog = $(document).triggerHandler(\"showDialogWidget\", {\n        widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_QUICKACTIONS_EXECUTE,\n        data: data,\n        dialogClass: \"ui-quick-action-modal-confirm\",\n        modalParameters: {\n          title: title,\n          width: \"900px\" },\n\n        maximizeOnly: false,\n        buttons: [\n        {\n          text: bizagi.localization.getResource('workportal-quick-actions-stop-all'),\n          click: function click() {\n            //TODO: Pending validate if all activities were finished\n            instanceQuickActionsExecute.showStopConfirmModal();\n          },\n          \"class\": \"biz-wp-btn-secondary-real btn-stop-all\" }],\n\n\n        closeOnEscape: false,\n        closeVisible: true,\n        onClose: function onClose() {\n          self.params.refreshShowedResults();\n        } });\n\n\n      $.when(dialog.getRenderWidget()).done(function (instance) {\n        instanceQuickActionsExecute = instance;\n        instanceQuickActionsExecute.registerDialog(dialog);\n        //Move the all element to specific place of the dialog\n        $(self.Class.SELECTOR_SUMMARY_EXECUTED_ACTIONS).prependTo(\".ui-quick-action-modal-confirm .ui-dialog-buttonpane .ui-dialog-buttonset\");\n      });\n    });\n  },\n\n  /**\r\n      *   Disposes the widget\r\n      */\n  dispose: function dispose() {\n    var self = this;\n    // Call base\n    self._super();\n    self._events(true);\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /*\r\n                                                                                                                                                                                                                                                                                                                                                                               *   Name: BizAgi Workportal QuickAction principal\r\n                                                                                                                                                                                                                                                                                                                                                                               *   Author: Nessler Camargo \r\n                                                                                                                                                                                                                                                                                                                                                                               *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                               *   -   N/A\r\n                                                                                                                                                                                                                                                                                                                                                                               */\n\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.quickActionsExecute\", {\n\n  /**\r\n                                                                                            * container for quick actions buttons\r\n                                                                                            */\n  SELECTOR_BUTTON_STOP_ALL: \".ui-dialog.ui-quick-action-modal-confirm button.btn-stop-all\",\n\n  /**\r\n                                                                                            * close button selector\r\n                                                                                            */\n  SELECTOR_BUTTON_CLOSE: \".ui-dialog.ui-quick-action-modal-confirm button.bz-dialog-btn-close\",\n\n  /**\r\n                                                                                                 * selector where show the summary the executed actions\r\n                                                                                                 */\n  SELECTOR_SUMMARY_EXECUTED_ACTIONS: \".summary-quick-actions-executed\",\n\n  /**\r\n                                                                         * One specific result of the list of results, identify by id\r\n                                                                         */\n  SELECTOR_ONE_RESULT: \"div[collapsibleitem][id={0}]\",\n\n  /**\r\n                                                        * Type of Row on results\r\n                                                        */\n  TYPE_ROW_DEFAULT: \"TYPE_ROW_DEFAULT\",\n  TYPE_ROW_ONLY_DEFAULT_TEXT: \"TYPE_ROW_ONLY_DEFAULT_TEXT\",\n  TYPE_ROW_ONLY_ERROR_TEXT: \"TYPE_ROW_ONLY_ERROR_TEXT\",\n\n  /**\r\n                                                         * data for widget\r\n                                                         */\n  DATA_PROPERTIES: {\n    // Array : List of activities\n    ACTIVITIES: \"ACTIVITIES\",\n\n    // Boolean : End of all executions\n    END_ALL_REQUESTS: \"END_ALL_REQUESTS\",\n\n    // Boolean : Stop by user\n    STOP_BY_USER: \"STOP_BY_USER\",\n\n    // Number: Executed actions\n    NUMBER_EXECUTED_ACTIONS: \"NUMBER_EXECUTED_ACTIONS\",\n\n    // Object: Dialog\n    DIALOG: \"DIALOG\" },\n\n\n  RESULT_SUCCESS: \"success\",\n  RESULT_EXECUTED: \"executed\",\n  RESULT_WARNING: \"warning\",\n  RESULT_ERROR: \"error\" },\n{\n  /*\r\n  *   Constructor\r\n  */\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    //Load templates\n    self.loadTemplates({\n      \"quickActions-execute\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.quickActionsExecute\").concat(\"#ui-bizagi-workportal-widget-quickActions-execute\"),\n      \"quick-actions-stop-all-modal-confirm\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.quickActionsExecute\").concat(\"#ui-bizagi-workportal-widget-quick-actions-stop-all-modal-confirm\"),\n      useNewEngine: false });\n\n\n    self._setInitialData(params.data.activities);\n  },\n\n  /**\r\n      * override\r\n      */\n  renderContent: function renderContent() {\n    var self = this,\n    _template = self.getTemplate(\"quickActions-execute\");\n    self.content = $.tmpl(_template, { summaryText: self._getSummaryText() });\n\n    return self.content;\n  },\n\n  /**\r\n      * @override\r\n      */\n  postRender: function postRender() {\n    var self = this,\n    _prop = self.Class.DATA_PROPERTIES;;\n\n    self.requesterService = new bizagi.workportal.services.quickActionsRequester(self.dataService, {\n      callback: function callback(response) {\n        self._processResponseOfExecuteQuickActions(response);\n      } });\n\n\n    self._updateView();\n    self.requesterService.startAllRequests(self._getProperty(_prop.ACTIVITIES));\n    $(window).on(\"beforeunload\", $.proxy(self._showDefaultWarningMessageBrowser, self));\n\n    self._configureHandlers();\n  },\n\n  /**\r\n      * set the value of the property and update the view, if exists else throw exception\r\n      * @param {DATA_PROPERTIES} prop \r\n      * @param {any} newValue \r\n      * @param {Boolean} setOnly if is true the view is not updated\r\n      */\n  _setProperty: function _setProperty(prop, newValue, setOnly) {\n    var self = this,\n    _setOnly = setOnly !== undefined ? setOnly : false,\n    _prop = self.Class.DATA_PROPERTIES[prop],\n    _changed = self.data[_prop] !== newValue,\n    _updateView = !_setOnly && _changed;\n\n    if (_prop === undefined)\n    throw \"Property does not exist: \" + prop;\n\n    self.data[_prop] = newValue;\n    if (_updateView)\n    self._updateView();\n  },\n\n  /**\r\n       * return the value of the property, if exists else throw exception\r\n       * @param {DATA_PROPERTIES} prop \r\n       */\n  _getProperty: function _getProperty(prop) {\n    var self = this,\n    _prop = self.Class.DATA_PROPERTIES[prop],\n    _valToReturn = self.data[_prop],\n    _cloneWith = Array.isArray(_valToReturn) ? [] : {};\n\n    if (_prop === undefined)\n    throw \"Property does not exist: \" + prop;\n    if (_typeof(_valToReturn) === \"object\")\n    _valToReturn = bizagi.util.extend(_cloneWith, _valToReturn);\n\n    return _valToReturn;\n  },\n\n  /**\r\n      * default initial data when widget starts\r\n      */\n  _setInitialData: function _setInitialData(data) {\n    var self = this,\n    _prop = self.Class.DATA_PROPERTIES;\n\n    self.data = {};\n    self.data[_prop.END_ALL_REQUESTS] = false;\n    self.data[_prop.STOP_BY_USER] = false;\n    self.data[_prop.ACTIVITIES] = data;\n    self.data[_prop.NUMBER_EXECUTED_ACTIONS] = 0;\n  },\n\n  /**\r\n      * principal method to update all views\r\n      */\n  _updateView: function _updateView() {\n    var self = this;\n    self._updateViewSummaryExecutionActions();\n  },\n\n  /**\r\n      * Update the summary by one execution\r\n      */\n  _updateViewSummaryExecutionActions: function _updateViewSummaryExecutionActions() {\n    var self = this;\n\n    $(self.Class.SELECTOR_SUMMARY_EXECUTED_ACTIONS + \" span\").text(\n    self._getSummaryText());\n\n  },\n\n  /**\r\n      * get summary message\r\n      */\n  _getSummaryText: function _getSummaryText() {\n    var self = this,\n    _prop = self.Class.DATA_PROPERTIES,\n    _activities = self._getProperty(_prop.ACTIVITIES),\n    _numberExecutedActions = self._getProperty(_prop.NUMBER_EXECUTED_ACTIONS);\n    return bizagi.localization.getResourceByElementsNumber(\n    \"workportal-quick-actions-summary-number-actions-executed\",\n    _activities.length).\n    replace(\"{0}\", _numberExecutedActions).replace(\"{1}\", _activities.length);\n  },\n\n  /**\r\n      * Configure handlers of buttons and other elements\r\n      */\n  _configureHandlers: function _configureHandlers() {\n    var self = this;\n    $(self.content).find('.filter-button').on('click', $.proxy(self._onClickFilterButton, self));\n  },\n\n  /**\r\n      * Click on button filter\r\n      */\n  _onClickFilterButton: function _onClickFilterButton(event) {\n    var self = this,\n    _target = event.target;\n\n    // So the click work on IE svg\n    if (_target.correspondingUseElement) {\n      _target = _target.correspondingUseElement;\n    }\n\n    var $button = $(_target).closest('.filter-button');\n    $button.addClass('selected').siblings().removeClass('selected');\n\n    var filterBy = $button.attr('filter-by');\n    self._showFilterResults(filterBy);\n  },\n\n  /**\r\n      * Filter the results\r\n      * @param {*} filterBy \r\n      */\n  _showFilterResults: function _showFilterResults(filterBy) {\n    var self = this,\n    _completeText = bizagi.localization.getResource(\"workportal-quick-actions-completed-actions\"),\n    _noResultsText = bizagi.localization.getResource(\"workportal-widget-inboxcommon-no-results-found\"),\n    _elementsToShow = $(self.content).find('.filter-row.' + filterBy);\n\n    if (filterBy === \"all\") {\n      $(self.content).find('.filter-row').show();\n      $('.quickActionsContainer .default-text span').text(_completeText);\n    } else\n    {\n      var _textToShow = _elementsToShow.length === 0 ? _noResultsText : _completeText;\n      $(self.content).find('.filter-row').hide();\n      _elementsToShow.show();\n      $('.quickActionsContainer .default-text span').text(_textToShow);\n    }\n  },\n\n  /**\r\n      * Process the response when finish one request or all requests\r\n      * @param {object} response \r\n      */\n  _processResponseOfExecuteQuickActions: function _processResponseOfExecuteQuickActions(dataResponse) {\n    var self = this,\n    _prop = self.Class.DATA_PROPERTIES,\n    _activities = self._getProperty(_prop.ACTIVITIES);\n\n    if (dataResponse.type === \"all\") {//when finish all executions\n      self._setProperty(_prop.END_ALL_REQUESTS, true);\n      self._disableBtnStopAll();\n      var itemToShow = { title: bizagi.localization.getResource(\"workportal-quick-actions-completed-actions\") };\n      self._addRowToResultsWithType(itemToShow, self.Class.TYPE_ROW_ONLY_DEFAULT_TEXT);\n    } else\n    if (dataResponse.type === \"one-start\") {// when start new execution\n      var activityToAdd = _activities.filter(function (activity) {\n        return activity.workItemId === dataResponse.response.paramsRequest.workItemId;\n      })[0];\n      var itemToShow = {\n        workItemId: activityToAdd.workItemId,\n        activityName: activityToAdd.activityName,\n        caseNumber: activityToAdd.caseNumber,\n        details: activityToAdd.details,\n        icon: 'gray',\n        status: \"inProcess\" };\n\n      self.instance = self._addRowToResultsWithType(itemToShow, self.Class.TYPE_ROW_DEFAULT);\n    } else if (dataResponse.type === \"one-end\") {// when end an execution\n\n      self._setProperty(_prop.NUMBER_EXECUTED_ACTIONS,\n      self._getProperty(_prop.NUMBER_EXECUTED_ACTIONS) + 1);\n\n      var statusAndDataResponseToShow = self._getStatusByBackResponse(dataResponse.response.backResponse);\n      self._setResultToActionRequest(dataResponse.response.paramsRequest.workItemId, statusAndDataResponseToShow, self.instance);\n    } else if (dataResponse.type === \"stop-by-user\") {\n      if (!self._getProperty(_prop.END_ALL_REQUESTS)) {\n        self._setProperty(_prop.STOP_BY_USER, true);\n        var itemToShow = {\n          title: bizagi.localization.getResourceByElementsNumber(\n          \"workportal-quick-actions-confirm-stop-all-message\",\n          dataResponse.response.numberSkipActions).\n          replace(\"{0}\", dataResponse.response.numberSkipActions) };\n        self._addRowToResultsWithType(itemToShow, self.Class.TYPE_ROW_ONLY_ERROR_TEXT);\n      }\n      self._disableBtnStopAll();\n    }\n\n    // Check if everything is finished\n    if (self._getProperty(_prop.NUMBER_EXECUTED_ACTIONS) == self._getProperty(_prop.ACTIVITIES).length) {\n      self._hideBtnStopAllAndShowClose();\n    }\n  },\n\n  /**\r\n      * Control the before close event of Dialog\r\n      */\n  _manageExecuteModalCloseButton: function _manageExecuteModalCloseButton() {\n    var self = this,\n    _prop = self.Class.DATA_PROPERTIES;\n\n    if (self._getProperty(_prop.END_ALL_REQUESTS) || self._getProperty(_prop.STOP_BY_USER)) {\n      return true;\n    } else\n    {\n      self.showStopConfirmModal();\n      return false;\n    }\n  },\n\n  /**\r\n     * Show default warning message when any quick actions is executing\r\n     */\n  _showDefaultWarningMessageBrowser: function _showDefaultWarningMessageBrowser() {\n    var self = this,\n    _prop = self.Class.DATA_PROPERTIES;\n\n    if (!self._getProperty(_prop.END_ALL_REQUESTS)) {\n      return \"\"; // show warning message\n    }\n  },\n\n  /**\r\n      * build params for showConfirmationBox\r\n      */\n  _buildParamsForModalConfirm: function _buildParamsForModalConfirm(titleModal, message, numberActivities) {\n    var self = this;\n    return [\n    // message\n    message,\n    // title\n    titleModal,\n    // showIcon\n    false,\n    // buttons\n    [\n    {\n      label: bizagi.localization.getResource('workportal-general-word-no'),\n      action: \"reject\",\n      \"class\": \"biz-wp-btn-secondary-real\" },\n    {\n      label: bizagi.localization.getResource(\"workportal-general-word-yes\"),\n      action: \"resolve\",\n      \"class\": \"biz-wp-btn-warning\" }],\n\n\n    // customOptions\n    {\n      dialogClass: \"ui-quick-action-modal-confirm\" }];\n\n\n  },\n\n  /**\r\n      * Disable stop all button. The owner is the dialog, and We don't have the reference\r\n      */\n  _disableBtnStopAll: function _disableBtnStopAll() {\n    var self = this,\n    _element = $(document).find(self.Class.SELECTOR_BUTTON_STOP_ALL);\n\n    $(_element).prop(\"disabled\", true);\n  },\n\n  /**\r\n      * Hide stop all button and enables close button\r\n      */\n  _hideBtnStopAllAndShowClose: function _hideBtnStopAllAndShowClose() {\n    var self = this;\n\n    $(document).find(self.Class.SELECTOR_BUTTON_STOP_ALL).hide();\n    $(document).find(self.Class.SELECTOR_BUTTON_CLOSE).show();\n  },\n\n\n  /**\r\n      * Show stop confirmation modal\r\n      */\n  showStopConfirmModal: function showStopConfirmModal() {\n    var self = this,\n    _prop = self.Class.DATA_PROPERTIES,\n    _message = $.tmpl(self.getTemplate(\"quick-actions-stop-all-modal-confirm\")).html(),\n    _title = bizagi.localization.getResource(\"workportal-general-word-message\"),\n    _modalParams = self._buildParamsForModalConfirm(_title, _message);\n\n    $.when(bizagi.showConfirmationBox.apply(self, _modalParams)).done(function () {\n      self.requesterService.stopAllRequests();\n    });\n  },\n\n  /**\r\n      * Add row to container results\r\n      * @param {object} item \r\n      * @param {string} type \r\n      */\n  _addRowToResultsWithType: function _addRowToResultsWithType(paramsItem, type) {\n    var self = this;\n\n    var paramsToCreateItem = {\n      item: paramsItem,\n      type: type };\n\n\n    var itemInstance = new bizagi.workportal.widgets.collapsible(self.workportalFacade, self.dataService, paramsToCreateItem);\n\n    itemInstance.getView().then(function (itemContent) {\n      itemContent.prependTo(self.content.find(\".quickActionsContainer\"));\n    });\n\n    return itemInstance;\n  },\n\n  /**\r\n      * Change properties of a row\r\n      * @param {instanceRow} instance \r\n      * @param {object} data \r\n      */\n  _changeProperties: function _changeProperties(instance, data) {\n    instance.setStatus(data.status);\n    instance.setIcon(data.icon);\n    instance.setDescription(data.description);\n  },\n\n\n  /**\r\n      * Get the data of the final response to be updated on modal\r\n      * @param {object} backResponse \r\n      */\n  _getStatusByBackResponse: function _getStatusByBackResponse(backResponse) {\n    var self = this,\n    _status = self.Class.RESULT_SUCCESS,\n    _description = \"\";\n\n    for (var i = 0; i < backResponse.length && _status === self.Class.RESULT_SUCCESS; i++) {\n      tag = backResponse[i];\n      if (tag.error) {\n        _status = self.Class.RESULT_ERROR;\n        _description = tag.error.message;\n      } else if (tag.result.type !== self.Class.RESULT_SUCCESS) {\n        _status = self.Class.RESULT_WARNING;\n        _description = tag.result.messages[0];\n      }\n    }\n\n    if (backResponse.status === 0) {\n      _status = self.Class.RESULT_ERROR;\n      _description = backResponse.statusText;\n    }\n\n    return self._getFinalDataResponse(_status, _description);\n  },\n\n  /**\r\n      * Map the final data to change the properties\r\n      * @param {*} status \r\n      * @param {*} description \r\n      */\n  _getFinalDataResponse: function _getFinalDataResponse(status, description) {\n    var self = this;\n\n    status = status === self.Class.RESULT_SUCCESS ? self.Class.RESULT_EXECUTED : status;\n    var response = {\n      status: status,\n      icon: self._getIcon(status),\n      description: description };\n\n\n    return response;\n  },\n\n  /**\r\n      * Get the icon depending on the status of the response\r\n      * @param {*} status \r\n      * @param {*} description \r\n      */\n  _getIcon: function _getIcon(status) {\n    var icon;\n    switch (status) {\n      case 'warning':\n        icon = 'yellow';\n        break;\n      case 'error':\n        icon = 'red';\n        break;\n      case 'executed':\n        icon = 'green';\n        break;\n      default:\n        icon = 'gray';\n        break;}\n\n    return icon;\n  },\n  /**\r\n      * Set result when finish a request\r\n      * @param {number} workItemId \r\n      * @param {object} statusAndDataResponseToShow \r\n      * @param {instanceRow} itemInstance \r\n      */\n  _setResultToActionRequest: function _setResultToActionRequest(workItemId, statusAndDataResponseToShow, itemInstance) {\n    var self = this;\n    var data = statusAndDataResponseToShow;\n    self._changeProperties(itemInstance, data);\n  },\n\n  /**\r\n      * Register dialog because we need to hide or show close button\r\n      * @param {Object Jquery Dialog} dialog \r\n      */\n  registerDialog: function registerDialog(dialog) {\n    var self = this,\n    _prop = self.Class.DATA_PROPERTIES;\n\n    self._setProperty(_prop.DIALOG, dialog.dialogBox);\n\n    dialog.dialogBox.bind('dialogbeforeclose', $.proxy(self._manageExecuteModalCloseButton, self));\n  },\n\n  /*\r\n     *   Disposes the widget\r\n     */\n  dispose: function dispose() {\n    var self = this;\n    self._super();\n\n    $(window).off(\"beforeunload\", $.proxy(self._showDefaultWarningMessageBrowser, self));\n    $(self.content).find('.filter-button').on('click', $.proxy(self._onClickFilterButton, self));\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /*\r\n                                                                                                                                                                                                                                                                                                                                                                               *   Name: BizAgi Workportal QuickAction principal\r\n                                                                                                                                                                                                                                                                                                                                                                               *   Author: Nessler Camargo \r\n                                                                                                                                                                                                                                                                                                                                                                               *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                               *   -   N/A\r\n                                                                                                                                                                                                                                                                                                                                                                               */\n\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.collapsible\", {\n\n  SELECTOR_TITLE: \".collapsible-title\",\n  SELECTOR_SUBTITLE: \".collapsible-subtitle\",\n  SELECTOR_STATUS: \".collapsible-status\",\n  SELECTOR_ICON: \"div.collapsible-icon > svg\",\n  SELECTOR_DESCRIPTION: \".collapsible-description\",\n  SELECTOR_ARROW: \" div.collapsible-arrow > i\",\n  SELECTOR_COLLAPSIBLE_LINK: \".collapsible-link\",\n  SELECTOR_COLLAPSIBLE_DESCRIPTION: \".collapsible-description\",\n  SELECTOR_COLLAPSIBLE_ITEM: \"div[collapsibleItem]\",\n\n\n  /**\r\n                                                      * Type of results of actions\r\n                                                      */\n  RESULT_EXECUTED: \"executed\",\n  RESULT_WARNING: \"warning\",\n  RESULT_ERROR: \"error\",\n  RESULT_IN_PROCESS: \"inProcess\",\n\n  /**\r\n                                   * Type of row\r\n                                   */\n  TYPE_ROW_DEFAULT: 'TYPE_ROW_DEFAULT',\n  TYPE_ROW_ONLY_DEFAULT_TEXT: 'TYPE_ROW_ONLY_DEFAULT_TEXT',\n  TYPE_ROW_ONLY_ERROR_TEXT: 'TYPE_ROW_ONLY_ERROR_TEXT',\n\n  /**\r\n                                                         * data for widget\r\n                                                         */\n  DATA_PROPERTIES: {\n    // String : title of collapsible\n    TYPE_ROW: \"TYPE_ROW\",\n    ID: \"ID\",\n    TITLE: \"TITLE\",\n    SUBTITLE: \"SUBTITLE\",\n    STATUS: \"STATUS\",\n    ICON: \"ICON\",\n    DESCRIPTION: \"DESCRIPTION\" } },\n\n\n{\n  /*\r\n  *   Constructor\r\n  */\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n    // Call base\n    self._super(workportalFacade, dataService, params);\n    //Load templates\n    self.loadTemplates({\n      \"quick-actions-items\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.collapsible\").concat(\"#ui-bizagi-workportal-widget-collapsible\"),\n      \"quick-actions-item-only-default-text\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.collapsible\").concat(\"#ui-bizagi-workportal-widget-collapsible-only-default-text\"),\n      \"quick-actions-item-only-error-text\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.collapsible\").concat(\"#ui-bizagi-workportal-widget-collapsible-only-error-text\"),\n      useNewEngine: false });\n\n\n    self.rendered = new $.Deferred();\n    self._setInitialData(params.item, params.type);\n    self.render();\n  },\n\n  /**\r\n      * override\r\n      */\n  renderContent: function renderContent() {\n    var self = this,\n    _prop = self.Class.DATA_PROPERTIES;\n    var _template;\n    switch (self._getProperty(_prop.TYPE_ROW)) {\n      case self.Class.TYPE_ROW_ONLY_DEFAULT_TEXT:\n        _template = self.getTemplate(\"quick-actions-item-only-default-text\");\n        break;\n      case self.Class.TYPE_ROW_ONLY_ERROR_TEXT:\n        _template = self.getTemplate(\"quick-actions-item-only-error-text\");\n        break;\n      default:\n        _template = self.getTemplate(\"quick-actions-items\");}\n\n\n    self.content = $.tmpl(_template, {});\n    self.rendered.resolve();\n  },\n\n  /**\r\n      * @override\r\n      */\n  postRender: function postRender() {\n    var self = this;\n    self._updateView();\n    self._events();\n\n  },\n\n  /**\r\n     * create or remove the events for this widget\r\n     * @param {Boolean} dispose true if want to dispose events\r\n     */\n  _events: function _events(dispose) {\n    var self = this;\n    if (dispose === true) {\n      self.content.off(\"click\", self.Class.SELECTOR_COLLAPSIBLE_LINK);\n    } else {\n      self.content.on(\"click\", self.Class.SELECTOR_COLLAPSIBLE_LINK, function () {\n        $(this).closest(self.Class.SELECTOR_COLLAPSIBLE_ITEM).find(self.Class.SELECTOR_COLLAPSIBLE_DESCRIPTION).slideToggle('slow');\n        var arrow = $(this).find(self.Class.SELECTOR_ARROW);\n        if ($(this).find(self.Class.SELECTOR_ARROW).hasClass('down')) {\n          self._changeArrow(arrow, 'up', 'down');\n          self._changeArrow(arrow.parent(), 'up', 'down');\n        } else {\n          self._changeArrow(arrow, 'down', 'up');\n          self._changeArrow(arrow.parent(), 'down', 'up');\n        }\n      });\n    }\n  },\n\n  /**\r\n      * Allow change the arrow in collapsible element\r\n      * @param {} add \r\n      * @param {*} remove \r\n      */\n  _changeArrow: function _changeArrow(arrow, add, remove) {\n    arrow.addClass(add);\n    arrow.removeClass(remove);\n  },\n\n  /**\r\n      * set the value of the property and update the view, if exists else throw exception\r\n      * @param {DATA_PROPERTIES} prop \r\n      * @param {any} newValue \r\n      * @param {Boolean} setOnly if is true the view is not updated\r\n      */\n  _setProperty: function _setProperty(prop, newValue, setOnly) {\n    var self = this,\n    _setOnly = setOnly !== undefined ? setOnly : false,\n    _prop = self.Class.DATA_PROPERTIES[prop],\n    _changed = self.data[_prop] !== newValue,\n    _updateView = !_setOnly && _changed;\n\n    if (_prop === undefined)\n    throw \"Property does not exist: \" + prop;\n\n    self.data[_prop] = newValue;\n    if (_updateView)\n    self._updateView();\n  },\n\n  /**\r\n       * return the value of the property, if exists else throw exception\r\n       * @param {DATA_PROPERTIES} prop \r\n       */\n  _getProperty: function _getProperty(prop) {\n    var self = this,\n    _prop = self.Class.DATA_PROPERTIES[prop],\n    _valToReturn = self.data[_prop],\n    _cloneWith = Array.isArray(_valToReturn) ? [] : {};\n\n    if (_prop === undefined)\n    throw \"Property does not exist: \" + prop;\n    if (_typeof(_valToReturn) === \"object\")\n    _valToReturn = jQuery.extend(_cloneWith, _valToReturn);\n\n    return _valToReturn;\n  },\n\n  /**\r\n      * default initial data when widget starts\r\n      */\n  _setInitialData: function _setInitialData(data, type) {\n    var self = this,\n    _prop = self.Class.DATA_PROPERTIES;\n\n    self.data = {};\n    self.data[_prop.ID] = data.workItemId;\n    self.data[_prop.TITLE] = data.activityName || data.title;\n    self.data[_prop.SUBTITLE] = data.caseNumber;\n    self.data[_prop.STATUS] = data.status;\n    self.data[_prop.DESCRIPTION] = data.details;\n    self.data[_prop.ICON] = data.icon;\n    self.data[_prop.TYPE_ROW] = type || self.Class.TYPE_ROW_DEFAULT;\n  },\n\n  /**\r\n      * Set id to collapsable item\r\n      */\n  _setId: function _setId() {\n    var self = this,\n    _prop = self.Class.DATA_PROPERTIES;\n\n    $(self.content).prop('id', self._getProperty(_prop.ID));\n  },\n\n  /**\r\n      * Set or hide the status\r\n      */\n  setStatus: function setStatus(status) {\n    var self = this,\n    _status = status,\n    _text = '',\n    _selectorStatus = self.content.find(self.Class.SELECTOR_STATUS),\n    _selectorArrow = self.content.find(self.Class.SELECTOR_ARROW);\n    _selectorStatus.show();\n\n    switch (_status) {\n      case self.Class.RESULT_IN_PROCESS:\n        _text = bizagi.localization.getResource(\"workportal-general-word-in-process\");\n        _selectorStatus.text(_text + '...');\n        break;\n      case self.Class.RESULT_EXECUTED:\n        _selectorStatus.text(\"\");\n        $(self.content).addClass('filter-row');\n        $(self.content).addClass(self.Class.RESULT_EXECUTED);\n        break;\n      case self.Class.RESULT_WARNING:\n        _text = bizagi.localization.getResource(\"workportal-general-word-details\");\n        _selectorStatus.text(_text);\n        _selectorArrow.addClass(\"down\");\n        $(self.content).addClass('filter-row');\n        $(self.content).addClass(self.Class.RESULT_WARNING);\n        break;\n      case self.Class.RESULT_ERROR:\n        _text = bizagi.localization.getResource(\"workportal-general-word-details\");\n        _selectorStatus.text(_text);\n        _selectorArrow.addClass(\"down\");\n        $(self.content).addClass('filter-row');\n        $(self.content).addClass(self.Class.RESULT_ERROR);\n        break;\n      default:\n        _selectorStatus.hide();}\n\n  },\n  /**\r\n      * Set the icon depending of status\r\n      */\n  setIcon: function setIcon(newIcon) {\n    var self = this,\n    _selectorIcon = self.content.find(self.Class.SELECTOR_ICON);\n    _selectorIcon.hide();\n    self.content.find(_selectorIcon.selector + \".\" + newIcon).show();\n  },\n\n  /**\r\n      * Set the description\r\n      */\n  setDescription: function setDescription(newDescription) {\n    var self = this,\n    _selectorDescription = self.content.find(self.Class.SELECTOR_DESCRIPTION);\n    _selectorDescription.text(newDescription);\n  },\n\n  /**\r\n      * Update all views\r\n      */\n  _updateViewAll: function _updateViewAll() {\n    var self = this,\n    _prop = self.Class.DATA_PROPERTIES,\n    _title = self._getProperty(_prop.TITLE),\n    _subtitle = self._getProperty(_prop.SUBTITLE),\n    _description = self._getProperty(_prop.DESCRIPTION),\n    _status = self._getProperty(_prop.STATUS),\n    _icon = self._getProperty(_prop.ICON),\n    _selectorTitle = self.content.find(self.Class.SELECTOR_TITLE);\n    _selectorSubtitle = self.content.find(self.Class.SELECTOR_SUBTITLE);\n    _selectorDescription = self.content.find(self.Class.SELECTOR_DESCRIPTION);\n\n    _selectorTitle.text(_title);\n    _selectorSubtitle.text(_subtitle);\n    _selectorDescription.hide();\n\n    self._setId();\n    self.setStatus(_status);\n    self.setIcon(_icon);\n    self.setDescription(_description);\n  },\n  /**\r\n      * Obtain the view\r\n      */\n  getView: function getView() {\n    var self = this,\n    _defer = new $.Deferred();\n\n    self.rendered.then(function () {\n      _defer.resolve(self.getContent());\n    });\n    return _defer;\n  },\n\n\n  /**\r\n      * principal method to update all views\r\n      */\n  _updateView: function _updateView() {\n    var self = this;\n    self._updateViewAll();\n  },\n\n  /*\r\n     *   Disposes the widget\r\n     */\n  dispose: function dispose() {\n    var self = this;\n    self._events(true);\n    // Call base\n    self._super();\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /*\r\n                                                                                                                                                                                                                                                                                                                                                                               *   Name: BizAgi Workportal Checkbox Group principal\r\n                                                                                                                                                                                                                                                                                                                                                                               *   Author: Valeria Vanegas (based on  Edward Morales version)\r\n                                                                                                                                                                                                                                                                                                                                                                               */\n\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.checkboxGroup\", {\n  CHECKBOX_CLASS: \".quick-actions-checkbox\",\n  CHECKBOX_CHECKED_CLASS: \".quick-actions-checkbox-checked\",\n\n  /**\r\n                                                              * data for widget\r\n                                                              */\n  DATA_PROPERTIES: {\n    // Boolean : show checkAll checked\n    CHECK_ALL: \"CHECK_ALL\" } },\n\n{\n  /*\r\n  *  Constructor\r\n  */\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n    self._super(workportalFacade, dataService, params);\n\n    self.loadTemplates({\n      \"quick-actions-checkbox\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.checkboxGroup\").concat(\"#ui-bizagi-quickActions-checkbox\"),\n      useNewEngine: false });\n\n\n    self._CHECK_ALL_CHECKBOX_CONTAINER = params.checkAllSelector;\n    self._CHECK_ALL_CHECKBOX = params.checkAllSelector + \" div\";\n    self._getContainerSelector = params.getContainerSelector;\n    self._onItemsCheckedChange = params.callback;\n\n    self.checkedItems = [];\n    self._setInitialData();\n  },\n\n  /**\r\n      * @override\r\n      */\n  postRender: function postRender() {\n    var self = this,\n    _checkboxTemplate = self.getTemplate(\"quick-actions-checkbox\");\n    self.checkboxContent = $.tmpl(_checkboxTemplate, {});\n  },\n\n  /**\r\n      *  Return the checked items\r\n      */\n  getChecked: function getChecked() {\n    var self = this;\n    return self.checkedItems;\n  },\n\n  /**\r\n      * Render the checkbox group\r\n      * @param {*} context where the checkboxes will be rendered\r\n      * @param {*} cases for which checkbox group is rendered \r\n      */\n  renderCheckboxGroup: function renderCheckboxGroup(context, items, persistCheckbox) {\n    var self = this;\n\n    self._items = items;\n    self._context = context;\n\n    for (var i = 0; i < self._items.length; i++) {\n      self._renderCheckbox(self._items[i]);\n    }\n\n    self._configureCheckAllCheckbox();\n    self.loadStoredItems(persistCheckbox);\n  },\n\n  /**\r\n      * Called when the view is updated and\r\n      * the checkbox could preserve its last state\r\n      */\n  loadStoredItems: function loadStoredItems(persistCheckbox) {\n    var self = this;\n\n    if (self.checkedItems.length > 0 && persistCheckbox) {\n      var stillChecked = [];\n      for (var i = 0; i < self.checkedItems.length; i++) {\n        var item = self.checkedItems[i];\n        var selector = self._getContainerSelector(item.id) + \" div\";\n        var element = $(selector, self._context);\n\n        if (element.length !== 0) {\n          element.toggleClass(self.Class.CHECKBOX_CHECKED_CLASS.substr(1), true);\n          stillChecked.push(item);\n        }\n      }\n      self.checkedItems = stillChecked;\n      self._refreshCheckAllCheckbox(true);\n      self._onItemsCheckedChange();\n      self._updateView();\n    } else {\n      self.clearCheckedItems();\n    }\n  },\n\n  /**\r\n      * Clear checked items\r\n      */\n  clearCheckedItems: function clearCheckedItems() {\n    var self = this;\n    self.checkedItems = [];\n    self._toggleCheckAllCheckbox(false);\n  },\n\n  /**\r\n      * Render a checkbox\r\n      * @param {*} containerSelector the container in which the checkbox is rendered\r\n      */\n  _renderCheckbox: function _renderCheckbox(item) {\n    var self = this,\n    _containerSelector = self._getContainerSelector(item),\n    _checkboxSelector = _containerSelector + \" div\",\n    _content = self.checkboxContent.clone();\n\n    $(_containerSelector, self._context).append(_content);\n\n    $(_checkboxSelector, self._context).on(\"click\", function () {\n      var that = this;\n      $(that).toggleClass(self.Class.CHECKBOX_CHECKED_CLASS.substr(1));\n      self._updateCheckedItems($(that));\n      self._refreshCheckAllCheckbox(false);\n      self._onItemsCheckedChange();\n    });\n\n    self._addDataToCheckbox(item, _checkboxSelector);\n  },\n  /**\r\n      * Update the checked Items \r\n      * If the item was\r\n      * @param {*} checkbox the clicked checkbox\r\n      */\n  _updateCheckedItems: function _updateCheckedItems(checkbox) {\n    var self = this,\n    _data = self._getDataFormCheckbox(checkbox);\n\n    if (!self._itemWasChecked(_data)) {\n      self._addItemChecked(_data);\n    } else {\n      self._removeItemChecked(_data);\n    }\n  },\n  /**\r\n      * Add an item \r\n      * @param {*} checkbox \r\n      */\n  _addItemChecked: function _addItemChecked(data) {\n    var self = this;\n    self.checkedItems.push(data);\n  },\n  /**\r\n      * Remove an item \r\n      * @param {*} checkbox \r\n      */\n  _removeItemChecked: function _removeItemChecked(data) {\n    var self = this;\n    self.checkedItems = self.checkedItems.filter(function (item) {\n      return JSON.stringify(item) !== JSON.stringify(data);\n    });\n  },\n  /**\r\n      * Add data to a checkbox\r\n      */\n  _addDataToCheckbox: function _addDataToCheckbox(item, selector) {\n    var self = this;\n    $(selector, self._context).data('id', item);\n  },\n  /**\r\n      * Get data from a checkbox\r\n      */\n  _getDataFormCheckbox: function _getDataFormCheckbox(checkbox) {\n    return checkbox.data();\n  },\n  /**\r\n      * Return if an item was checked\r\n      */\n  _itemWasChecked: function _itemWasChecked(data) {\n    var self = this;\n    return self.checkedItems.some(function (item) {\n      return JSON.stringify(item) === JSON.stringify(data);\n    });\n  },\n\n  /**\r\n      * Render and configure the all processes checkbox\r\n      * @param {*} containerSelector the container in which the checkbox is rendered\r\n      */\n  _configureCheckAllCheckbox: function _configureCheckAllCheckbox() {\n    var self = this,\n    _content = self.checkboxContent.clone();\n\n    $(self._CHECK_ALL_CHECKBOX_CONTAINER, self._context).append(_content);\n    $(self._CHECK_ALL_CHECKBOX, self._context).\n    attr('title', self.getResource(\"workportal-widget-query-form-check-all\")).\n    on(\"click\", function (event) {\n      event = event ? event : window.event;\n      event.stopPropagation();\n      self._toggleCheckAllCheckbox();\n    });\n  },\n\n  /**\r\n      * Check if the all processes checkbox should be checked and apply the changes\r\n      */\n  _refreshCheckAllCheckbox: function _refreshCheckAllCheckbox(setOnly) {\n    var self = this,\n    _prop = self.Class.DATA_PROPERTIES,\n    _newCheckedAll = self._getNumberOfItemsChecked() === self._items.length;\n    self._setProperty(_prop.CHECK_ALL, _newCheckedAll, setOnly);\n  },\n\n  /**\r\n      * Get the number of items checked for the execution of quick actions\r\n      */\n  _getNumberOfItemsChecked: function _getNumberOfItemsChecked() {\n    var self = this;\n    return self.checkedItems.length;\n  },\n\n  /**\r\n      * Toggle the all processes checkbox and depending on its value refresh the other checkboxes\r\n      * @param {*} checkAllNewValue if should refresh all checkboxes or only the all processes. \r\n      * If the parameter is undefined, it toggles the last value\r\n      */\n  _toggleCheckAllCheckbox: function _toggleCheckAllCheckbox(checkAllNewValue) {\n    var self = this,\n    _prop = self.Class.DATA_PROPERTIES,\n    _checkAll = self._getProperty(_prop.CHECK_ALL),\n    _newCheckAll = checkAllNewValue !== undefined ? checkAllNewValue : !_checkAll;\n\n    self._refreshAllCheckboxes(_newCheckAll);\n    self._setProperty(_prop.CHECK_ALL, _newCheckAll);\n\n    self._onItemsCheckedChange();\n  },\n\n  /**\r\n      * Refresh all checkboxes when the all processes selector change\r\n      */\n  _refreshAllCheckboxes: function _refreshAllCheckboxes(checkAll) {\n    var self = this,\n    _checkboxNotPrincipal = $(self.Class.CHECKBOX_CLASS, self._context).not(self._CHECK_ALL_CHECKBOX);\n\n    _checkboxNotPrincipal.toggleClass(self.Class.CHECKBOX_CHECKED_CLASS.substr(1), checkAll);\n\n    self.checkedItems = [];\n\n    if (checkAll) {\n      _checkboxNotPrincipal.each(function () {\n        var that = this,\n        _data = self._getDataFormCheckbox($(that));\n\n        self._addItemChecked(_data);\n      });\n    }\n  },\n\n  /**\r\n      * Set the value of the property and update the view, if exists else throw exception\r\n      * @param {DATA_PROPERTIES} prop \r\n      * @param {any} newValue \r\n      * @param {Boolean} setOnly if is true the view is not updated\r\n      */\n  _setProperty: function _setProperty(prop, newValue, setOnly) {\n    var self = this,\n    _setOnly = setOnly !== undefined ? setOnly : false,\n    _prop = self.Class.DATA_PROPERTIES[prop],\n    _changed = self.data[_prop] !== newValue,\n    _updateView = !_setOnly && _changed;\n\n    if (_prop === undefined)\n    throw \"Property does not exist: \" + prop;\n\n    self.data[_prop] = newValue;\n    if (_updateView)\n    self._updateView();\n  },\n\n  /**\r\n      * Return the value of the property, if exists else throw exception\r\n      * @param {DATA_PROPERTIES} prop \r\n      */\n  _getProperty: function _getProperty(prop) {\n    var self = this,\n    _prop = self.Class.DATA_PROPERTIES[prop],\n    _valToReturn = self.data[_prop],\n    _cloneWith = Array.isArray(_valToReturn) ? [] : {};\n\n    if (_prop === undefined)\n    throw \"Property does not exist: \" + prop;\n    if (_typeof(_valToReturn) === \"object\")\n    _valToReturn = jQuery.extend(_cloneWith, _valToReturn);\n\n    return _valToReturn;\n  },\n\n  /**\r\n      * Default initial data when widget starts\r\n      */\n  _setInitialData: function _setInitialData() {\n    var self = this,\n    _prop = self.Class.DATA_PROPERTIES;\n\n    self.data = {};\n    self.data[_prop.CHECK_ALL] = false;\n  },\n\n  /**\r\n      * Principal method to update all views\r\n      */\n  _updateView: function _updateView() {\n    var self = this;\n    self._updateViewCheckAll();\n  },\n\n  /**\r\n      * Update the checkAll checkbox view\r\n      */\n  _updateViewCheckAll: function _updateViewCheckAll() {\n    var self = this,\n    _prop = self.Class.DATA_PROPERTIES,\n    _checked = self._getProperty(_prop.CHECK_ALL);\n    $(self._CHECK_ALL_CHECKBOX, self._context).toggleClass(self.Class.CHECKBOX_CHECKED_CLASS.substr(1), _checked);\n  } });","/*\r\n*   Name: BizAgi Workportal New Case Widget Controller\r\n*   Author: Edward Morales\r\n*   Comments:\r\n*   -   This script will define a base class to to define the new case widget\r\n*/\n\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.queries\", {}, {\n  /*\r\n                                                                                   *   Returns the widget name\r\n                                                                                   */\n  getWidgetName: function getWidgetName() {\n    return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_QUERIES;\n  },\n\n  /*\r\n     *   Renders the content for the current controller\r\n     *   Returns a deferred because it has to load the current user\r\n     */\n  renderContent: function renderContent() {\n    var self = this;\n    var template = self.getTemplate(\"queries\");\n    var content = self.content = $.tmpl(template);\n    self.loadtemplates();\n    return content;\n  },\n  /*\r\n      * this will be implemented on each device\r\n      */\n  loadtemplates: function loadtemplates() {} });","/*\r\n*   Name: BizAgi Desktop Queries Dialog implementation\r\n*   Author: Juan Pablo Crossley\r\n*   Comments:\r\n*   -   ???\r\n*/\n\n// Extends itself\nbizagi.workportal.widgets.listCases.extend(\"bizagi.workportal.widgets.queryform\", {}, {\n  /*\r\n                                                                                        *   Returns the widget name\r\n                                                                                        */\n  getWidgetName: function getWidgetName() {\n    return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_QUERYFORM;\n  },\n\n\n  renderContent: function renderContent() {\n    var self = this;\n    if (bizagi.util.parseBoolean(bizagi.override.disableFrankensteinQueryForms) && !self.params.notMigratedUrl) {\n      self.modifiedRender();\n    } else\n    {\n      self.frankensteinRenderContent();\n    }\n  },\n\n  modifiedRender: function modifiedRender() {\n    var self = this;\n    var template = self.getTemplate(\"queryform-wrapper\");\n    var content;\n    content = self.content = $.tmpl(template, {});\n    self.loadtemplates();\n    return content;\n  },\n\n  /*\r\n     * this will be implemented on each device\r\n     */\n  loadtemplates: function loadtemplates() {},\n\n  /*\r\n                                              *   Renders the content for the current controller\r\n                                              *   Returns a deferred because it has to load the current user\r\n                                              */\n  frankensteinRenderContent: function frankensteinRenderContent() {\n    var self = this;\n    var template = self.getTemplate(\"queryform\");\n    var url = \"\";\n\n    var idQueryForm = self.params.idQueryForm || \"\";\n    var idStoredQuery = self.params.idStoredQuery || \"\";\n    var idCube = self.params.idCube || \"\";\n\n    // Define actions of queryform\n    switch (self.params.queryFormAction) {\n      case \"edit\":\n        url = self.dataService.getUrl({\n          endPoint: \"query-form-edit\" }) +\n        \"?idStoredQuery=\" + idStoredQuery + \"&idQueryForm=\" + idQueryForm;\n        break;\n\n      case \"loadPrevious\":\n        url = \"App/ListaDetalle/listaitems.aspx?\" + self.dataService.lastQueryFullKey; //bizagi.referrerParams; //\n        break;\n      default:\n        url = self.dataService.getUrl({\n          endPoint: \"query-form\" }) +\n        \"?idQueryForm=\" + idQueryForm;\n        // check children query\n        url = idStoredQuery != \"\" ? url + \"&idStoredQuery=\" + idStoredQuery : url;\n        url = idCube != \"\" ? url + \"&idCube=\" + idCube : url;\n        break;}\n\n    if (self.params.notMigratedUrl) {\n      //url returned by the service with the operations and actions to execute\n      url = 'App/' + self.params.notMigratedUrl;\n    }\n\n    //gets the content template adapted to use an iframe\n    var content = self.content = $.tmpl(template,\n    {\n      queryFormURL: url });\n\n\n    // Return content\n    return content;\n  } });","/*\r\n *   Name: BizAgi Workportal Desktop New Case Widget Controller\r\n *   Author: Juan Pablo Crossley\r\n *   Comments:\r\n *   -   This script will provide desktop overrides to implement the new case widget\r\n */\n\n// Auto extend\nbizagi.workportal.widgets.queries.extend(\"bizagi.workportal.widgets.queries\", {}, {\n\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    //Load templates\n    self.loadTemplates({\n      \"queries\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.queries\").concat(\"#ui-bizagi-workportal-widget-queries\"),\n      \"queries-elements\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.queries\").concat(\"#ui-bizagi-workportal-widget-queries-elements\"),\n      \"queries-empty-elements\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.queries\").concat(\"#ui-bizagi-workportal-widget-queries-empty-elements\"),\n      \"queries-query-tree\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.queries\").concat(\"#ui-bizagi-workportal-widget-queries-query-tree\"),\n      \"queries-query-confirm\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.queries\").concat(\"#ui-bizagi-workportal-widget-queries-confirm\"),\n      useNewEngine: false });\n\n  },\n\n  /**\r\n     *   To be overriden in each device to apply layouts\r\n     */\n  postRender: function postRender() {\n    var self = this;\n\n    // Set bind event for last element\n    self.configureTreeNavigation();\n\n    // Bind back button\n    self.configureBackButton();\n\n    // Render base categories\n    self.renderQueries();\n\n    // set vertical scroll\n    self.scrollVertical({\n      \"autohide\": false });\n\n  },\n\n  /**\r\n     * Render List categories for each idCategory\r\n     */\n  renderQueries: function renderQueries(idParentQuery, appendElement) {\n    var self = this;\n    var content = self.getContent();\n    var template = self.getTemplate(\"queries-elements\");\n    var emptyTemplate = self.getTemplate(\"queries-empty-elements\");\n    var queriesContainer = $(\"#queries\", content);\n    var queryContent;\n    var mergeData;\n\n    $.when(self.dataService.getQueries({\n      idElement: idParentQuery })).\n    done(function (data) {\n\n      queriesContainer.empty();\n\n      // check if service have nodes\n      data = data || {};\n\n      if (data.length >= 1) {\n        // Check if have appendElement\n        if (appendElement != undefined) {\n          mergeData = $.merge(appendElement, data);\n        } else {\n          mergeData = data;\n        }\n\n        queryContent = $.tmpl(template, mergeData, {\n          checkChildNode: self.checkChildNode });\n\n      } else {\n        queryContent = $.tmpl(emptyTemplate, mergeData);\n      }\n      queryContent.appendTo(queriesContainer);\n\n      // set actions to rendered html \n      self.configureNavTree(queriesContainer);\n    });\n  },\n\n\n  configureNavTree: function configureNavTree(queriesContainer) {\n    var self = this;\n    var confirm = self.getTemplate(\"queries-query-confirm\");\n\n    // Bind for list elements\n    $(\"li\", \"#queries\").click(function () {\n      var idCube = $(this).children(\"#idCube\").val();\n      var queryId = $(this).children(\"#queryId\").val();\n      var prefix = $(this).children(\"#prefix\").val();\n      var nodesLength = $(this).children(\"#nodesLength\").val();\n      var idStoredQuery = $(this).children(\"#idStoredQuery\").val();\n      var id = $(this).children(\"#id\").val();\n      var queryDisplayName = $(this).children(\"#queryDisplayName\").val();\n      var headerTemplate = self.getTemplate(\"queries-query-tree\");\n      var categoryTree = $(\"#categoryTree\");\n\n      // If the node is not a query node then render the children            \n      if (queryId == \"-1\") {\n        // Is category\n        // Append query header\n\n        $.tmpl(headerTemplate, {\n          idParentQuery: id,\n          queryDisplayName: queryDisplayName }).\n        appendTo(categoryTree);\n\n        // Set bind event for last element\n        self.configureTreeNavigation();\n\n        // Render sub-categories\n        self.renderQueries(id);\n      } else if (nodesLength > 0) {\n        // Is category with link\n\n        // Add element for tree navigation\n        $.tmpl(headerTemplate, {\n          idParentQuery: id,\n          queryDisplayName: queryDisplayName }).\n        appendTo(categoryTree);\n\n        // Set bind event for last element\n        self.configureTreeNavigation();\n\n        // Append this object to children\n        self.renderQueries(id,\n        [{\n          \"queryDisplayName\": queryDisplayName,\n          \"idStoredQuery\": idStoredQuery,\n          \"id\": id,\n          \"idParent\": '',\n          \"queryId\": queryId,\n          \"prefix\": prefix,\n          \"nodes\": [],\n          \"idCube\": $(this).data(\"idcube\"),\n          \"categoryWithLink\": \"true\" }]);\n\n\n      } else {\n        // Is Process\n        bizagi.workportal.desktop.popup.closePopupInstance();\n        var title = this.data(\"queryDisplayName\");\n        self.showQueryFormPopup({\n          \"idQuery\": queryId,\n          \"idStoredQuery\": idStoredQuery == \"-1\" ? \"\" : idStoredQuery,\n          \"title\": title,\n          \"idCube\": idCube });\n\n      }\n    });\n\n\n    // Bind for action elements (Edit and delete buttons)\n    $(\".editButton\", \"#queries\").click(function (e) {\n      e.stopPropagation();\n\n      var queryId = \"-1\";\n      var idStoredQuery = $(this).parent().find(\"#idStoredQuery\").val();\n\n      self.showQueryFormPopup({\n        \"queryFormAction\": \"edit\",\n        \"idQuery\": queryId,\n        \"idStoredQuery\": idStoredQuery == \"-1\" ? \"\" : idStoredQuery,\n        \"title\": $(\"#queryDisplayName\", $(this).parent()).val() });\n\n      bizagi.workportal.desktop.popup.closePopupInstance();\n    });\n\n    $(\".deleteButton\", \"#queries\").click(function (e) {\n      e.stopPropagation();\n\n      var queryId = \"-1\";\n      var idStoredQuery = $(this).parent().find(\"#idStoredQuery\").val();\n      var prefix = $(this).parent().find(\"#prefix\").val();\n      var idCube = $(this).parent().find(\"#idCube\").val();\n      var content = $.tmpl(confirm);\n      var url;\n\n      if (prefix == \"prefix_MyStoredQuery\") {\n        url = self.dataService.getUrl({\n          endPoint: \"query-form-delete\" }) +\n        \"?idStoredQueryDel=\" + idStoredQuery + \"&idQueryForm=\" + queryId;\n      } else if (prefix == \"prefix_Cube\") {\n        url = self.dataService.getUrl({\n          endPoint: \"query-form-delete-cube\" });\n\n      }\n\n      // Open dialog with confirm message\n      $(content).dialog({\n        resizable: true,\n        modal: true,\n        title: self.getResource(\"workportal-widget-queries-confirm-title\"),\n        buttons: [\n        {\n          text: self.getResource(\"workportal-widget-queries-confirm-delete\"),\n          click: function click() {\n            if (prefix == \"prefix_MyStoredQuery\") {\n              $.ajax({\n                url: url });\n\n            } else if (prefix == \"prefix_Cube\") {\n              $.destroy(\n              url,\n              { idCube: idCube });\n\n            }\n\n            $(this).dialog(\"close\");\n            bizagi.workportal.desktop.popup.closePopupInstance();\n          } },\n\n        {\n          text: self.getResource(\"workportal-widget-queries-confirm-cancel\"),\n          click: function click() {\n            $(this).dialog(\"close\");\n          } }] });\n\n\n\n    });\n  },\n\n  /**\r\n     *   Binds the back buttons so we can navigate back\r\n     */\n  configureBackButton: function configureBackButton() {\n    var self = this;\n    var content = self.getContent();\n    var btnBack = $(\"#bt-back\", content);\n    var categoryTree = $(\"#categoryTree\", content);\n\n    // Bind click\n    btnBack.click(function () {\n      if ($(\"li\", categoryTree).length > 1) {\n        // Removes last child                    \n        $(\"li:last-child\", categoryTree).remove();\n        var idParentQuery = $(\"li:last-child\").children(\"#idParent\").val();\n\n        // Render Querie again\n        self.renderQueries(idParentQuery);\n      }\n    });\n  },\n\n  /**\r\n     * Bind tree navigation\r\n     */\n  configureTreeNavigation: function configureTreeNavigation() {\n    var self = this;\n    var content = self.getContent();\n    var categoryTree = $(\"#categoryTree\", content);\n\n    // Bind header events\n    $(\"li:last-child\", categoryTree).click(function () {\n      // Remove all elements\n      $(this).nextAll().remove();\n      var idParent = $(this).children(\"#idParent\").val();\n      // Render query tree again\n      self.renderQueries(idParent);\n    });\n  },\n\n  scrollVertical: function scrollVertical() {\n    var self = this;\n    var content = self.getContent();\n\n    $(\"#queries\", content).bizagiScrollbar({\n      \"autohide\": false });\n\n  },\n\n  /*\r\n     *   Show new case popup to create a case\r\n     */\n  showQueryFormPopup: function showQueryFormPopup(arg) {\n    var self = this;\n\n    var idQuery = arg.idQuery || \"\";\n    var idStoredQuery = arg.idStoredQuery || \"\";\n    var queryFormAction = arg.queryFormAction || \"\";\n    var title = arg.title || \"\";\n    var idCube = arg.idCube || \"\";\n\n    // If the same popup is opened close it\n    if (self.currentPopup == \"queryform\") {\n      bizagi.workportal.desktop.popup.closePopupInstance();\n      return;\n    }\n\n    // Shows a popup widget\n    self.currentPopup = \"queryform\";\n    self.publish(\"showDialogWidget\", {\n      widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_QUERYFORM,\n      idQueryForm: idQuery,\n      idStoredQuery: idStoredQuery,\n      queryFormAction: queryFormAction,\n      idCube: idCube,\n      modalParameters: {\n        title: title,\n        id: \"Queries\" } });\n\n\n  } });","/*\r\n*   Name: BizAgi Workportal Desktop New Case Widget Controller\r\n*   Author: Juan Pablo Crossley\r\n*   Comments:\r\n*   -   This script will provide desktop overrides to implement the new case widget\r\n*/\n\n// Auto extend\nbizagi.workportal.widgets.queries.extend(\"bizagi.workportal.widgets.queries.definition\", {}, {\n\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    //Load templates\n    self.loadTemplates({\n      \"queries\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.queries\").concat(\"#ui-bizagi-workportal-widget-queries\"),\n      \"queries-elements\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.queries\").concat(\"#ui-bizagi-workportal-widget-queries-elements\"),\n      \"queries-empty-elements\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.queries\").concat(\"#ui-bizagi-workportal-widget-queries-empty-elements\"),\n      \"queries-query-tree\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.queries\").concat(\"#ui-bizagi-workportal-widget-queries-query-tree\"),\n      \"queries-query-confirm\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.queries\").concat(\"#ui-bizagi-workportal-widget-queries-confirm\"),\n\n      \"queries-definition-elements\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.queries\").concat(\"#ui-bizagi-workportal-widget-queries-definition-elements\"),\n      \"queries-definition-manage-elements\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.queries\").concat(\"#ui-bizagi-workportal-widget-queries-definition-manage-menu\"),\n      \"queries-liveprocesses-query-element\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.queries\").concat(\"#ui-bizagi-workportal-widget-queries-definition-liveprocesses-menu\"),\n      \"queries-flat-list\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.queries\").concat(\"#ui-bizagi-workportal-widget-queries-flat-list\"),\n      \"queries-query-message-error\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.queries\").concat(\"#ui-bizagi-workportal-widget-queries-message-error\"),\n\n      useNewEngine: false });\n\n  },\n\n  /**\r\n     *   To be overriden in each device to apply layouts\r\n     */\n  loadtemplates: function loadtemplates() {\n    var self = this;\n    self.mainTemplate = self.getTemplate(\"queries-definition-elements\");\n    self.mainTemplateManage = self.getTemplate(\"queries-definition-manage-elements\");\n    self.mainTemplateLiveProcessesQuery = self.getTemplate(\"queries-liveprocesses-query-element\");\n    self.emptyTemplate = self.getTemplate(\"queries-empty-elements\");\n    self.flatListTemplate = self.getTemplate(\"queries-flat-list\");\n    self.confirmTemplate = self.getTemplate(\"queries-query-confirm\");\n    self.messageErrorTemplate = self.getTemplate(\"queries-query-message-error\");\n  },\n\n  postRender: function postRender() {\n    var self = this;\n    // Set bind event for last element\n    self.configureTreeNavigation(\"#queries\");\n    // Render base categories\n    self.renderQueries();\n    // set vertical scroll\n    self.scrollVertical({\n      \"autohide\": false });\n\n  },\n\n  /**\r\n      * return the new button for manageQueries if the user has permission\r\n      */\n  showManageQueries: function showManageQueries() {\n    var self = this;\n    var templateManage = self.mainTemplateManage;\n    var content;\n    var isManageQueries = bizagi.menuSecurity.QueriesPermissionManager === true && bizagi.util.isEnableFeature(\"enableTransferQueryOwnership\");\n    if (isManageQueries) {\n      content = $.tmpl(templateManage, {});\n    }\n    return {\n      manageContent: content,\n      isManageQueries: isManageQueries };\n\n  },\n\n  /**\r\n      * return the new button for liveProcessesQuery if the user has permission\r\n      */\n  getLiveProcessesQuery: function getLiveProcessesQuery() {\n    var self = this;\n    return self.hasLiveProcessesQuery() ? $.tmpl(self.mainTemplateLiveProcessesQuery, {}) : undefined;\n  },\n\n  /**\r\n      * validate if the user has access to LP query\r\n      */\n  hasLiveProcessesQuery: function hasLiveProcessesQuery() {\n    return bizagi.menuSecurity.AdhocUserGroupReport === true;\n  },\n\n  /**\r\n      * merge templates and verify content undefined\r\n      */\n  mergeQueryWithLpContent: function mergeQueryWithLpContent(queryContent, lpContent) {\n    var content = queryContent;\n    if (queryContent !== undefined && lpContent !== undefined) {\n      content = $.merge(queryContent, lpContent);\n    } else if (lpContent !== undefined) {\n      content = lpContent;\n    }\n    return content;\n  },\n\n  /**\r\n      * return query menu options before saved query\r\n      */\n  beforeSavedQueriesContent: function beforeSavedQueriesContent(data, appendElement, idParentQuery) {\n    var self = this;\n    var manage = self.showManageQueries();\n    var queryContent = manage.manageContent;\n    var mergeData;\n    if (data.length >= 1) {\n      // Check if have appendElement\n      mergeData = appendElement !== undefined ? $.merge(appendElement, data) : data;\n      var tmplRendered = $.tmpl(self.mainTemplate, mergeData, {\n        checkChildNode: self.checkChildNode });\n\n      if (self.validateMenu(queryContent, idParentQuery)) {\n        queryContent = tmplRendered;\n      } else {\n        queryContent.append(tmplRendered);\n      }\n    } else if (!manage.isManageQueries && !self.hasLiveProcessesQuery()) {\n      queryContent = $.tmpl(self.emptyTemplate, mergeData);\n    }\n    return queryContent;\n  },\n\n  /**\r\n      * return the new button for manageQueries if the user has permission\r\n      */\n  addEventToMangeQueries: function addEventToMangeQueries(self) {\n    self.publish(\"showDialogWidget\", {\n      widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_QUERIES_MANAGEMENT,\n      data: {},\n      maximize: true,\n      closeVisible: false,\n      modalParameters: {\n        title: bizagi.localization.getResource(\"workportal-widget-queries-management-title\"),\n        width: 790,\n        height: 540,\n        refreshInbox: false } });\n\n\n  },\n\n  /**\r\n      * go to Reports (LP query) in quickprocess\r\n      */\n  addEventToLPQuery: function addEventToLPQuery(self) {\n    if ($(document).find('iframe').length > 0 && $(document).find('iframe')[0].contentWindow.location.href.indexOf('quickprocess') !== -1) {\n      bizagi.util.liveProcessesEvents.routeEvents.route = '/reports';\n      document.dispatchEvent(bizagi.util.liveProcessesEvents.routeEvents);\n      bizagi.workportal.desktop.popup.closePopupInstance();\n    } else {\n      self.publish(\"changeWidget\", {\n        widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_PROFLY,\n        data: {\n          route: \"reports\",\n          params: { module: 'none' } } });\n\n\n    }\n  },\n\n  validateMenu: function validateMenu(queryContent, idParentQuery) {\n    var enterToFolder = (queryContent == undefined || idParentQuery !== undefined) && idParentQuery !== \"-1\";\n    var leaveFolder = queryContent == undefined && idParentQuery === \"-1\";\n    return enterToFolder || leaveFolder;\n  },\n\n  /**\r\n      * Check if user has permission to BizagiQueries and do request to obtain QueriesDefinitions\r\n      * If the user do not have permission return an empty array in a promise \r\n      * @param idParentQuery \r\n      * @param securityBizagiQueries flag permission to BizagiQueries\r\n      */\n  getQueriesDefinitions: function getQueriesDefinitions(idParentQuery, securityBizagiQueries) {\n    var self = this,\n    _createPromise = function _createPromise(dataResult) {\n      var _defer = new $.Deferred();\n      _defer.resolve(dataResult);\n      return _defer.promise();\n    },\n    _validPromise = function _validPromise(maybePromise) {\n      var _isAPromise = bizagi.util.tryCatch(\n      function () {return typeof maybePromise.promise === \"function\";},\n      false);\n\n      return _isAPromise ? maybePromise : _createPromise(maybePromise);\n    },\n    request = function request() {\n      var queries = self.dataService.getQueriesDefinitions({\n        idNode: idParentQuery });\n\n      _validPromise(queries).pipe(function (data) {\n        return data && idParentQuery ? sortObject(data) : data;\n      });\n      return queries;\n    },\n    sortObject = function sortObject(data) {\n      return data.sort(function (a, b) {\n        var a1 = a.queryDisplayName.toLowerCase(),\n        b1 = b.queryDisplayName.toLowerCase();\n        return a1 == b1 ? 0 : a1 > b1 ? 1 : -1;\n      });\n    };\n    return securityBizagiQueries ? request() : _createPromise([]);\n  },\n\n  /**\r\n      * Check if user has permission to BizagiQueries and do request to obtain StoredQueries\r\n      * If the user do not have permission return an empty array in a promise \r\n      * @param securityBizagiQueries flag permission to BizagiQueries\r\n      */\n  getStoredQueryFormList: function getStoredQueryFormList(securityBizagiQueries) {\n    var self = this,\n    request = function request() {\n      return self.dataService.getStoredQueryFormList();\n    },\n    noRequest = function noRequest() {\n      var defer = new $.Deferred();\n      defer.resolve({ storedQueryForms: [] });\n      return defer.promise();\n    };\n    var call = securityBizagiQueries ? request : noRequest;\n    return call();\n  },\n\n  /**\r\n     * Render List categories for each idCategory\r\n     */\n  renderQueries: function renderQueries(idParentQuery, appendElement) {\n    var self = this;\n    var securityBizagiQueries = bizagi.menuSecurity.BizagiQueries;\n    var content = self.getContent();\n    var queriesContainer = $(\"#queries\", content);\n    var queryContent;\n\n    $.when(self.getQueriesDefinitions(idParentQuery, securityBizagiQueries)).done(function (data) {\n      queriesContainer.empty();\n      queryContent = self.beforeSavedQueriesContent(data || [], appendElement, idParentQuery);\n\n      //if ((typeof idParentQuery === \"undefined\" || idParentQuery === \"-1\") && bizagi.util.parseBoolean(bizagi.override.disableFrankensteinQueryForms)) {\n      if (typeof idParentQuery === \"undefined\" || idParentQuery === \"-1\") {\n        $.when(self.getStoredQueryFormList(securityBizagiQueries)).done(function (storedQueryForm) {\n          if (storedQueryForm.storedQueryForms.length > 0) {\n            var stored = $.tmpl(self.mainTemplate, {\n              queryType: \"-2\",\n              queryDisplayName: self.getResource(\"workportal-widget-queries-stored-query-forms\"),\n              nodes: [],\n              guidForm: \"stored\" });\n\n            queryContent = $.merge(queryContent, stored);\n            self.storedQueryForm = storedQueryForm.storedQueryForms;\n          }\n          queriesContainer.append(self.mergeQueryWithLpContent(queryContent, self.getLiveProcessesQuery()));\n          self.configureNavTree(queriesContainer);\n        });\n      } else {\n        queryContent.appendTo(queriesContainer);\n      }\n      // set actions to rendered html \n      self.configureNavTree(queriesContainer);\n    });\n  },\n\n  /**\r\n     * Render List stored query Form\r\n     */\n  renderStoredQueries: function renderStoredQueries() {\n    var self = this;\n    var content = self.getContent();\n    var flatListTemplate = self.flatListTemplate;\n    var queriesContainer = $(\"#queries\", content);\n    var storedQueryFormContent;\n    storedQueryFormContent = $.tmpl(flatListTemplate, { storedQueryForm: self.storedQueryForm, queryNameFormatter: self.queryNameFormatter });\n    storedQueryFormContent.appendTo(queriesContainer);\n  },\n\n  /**\r\n      * Format name of a stored query showed when is a shared query form anonymized user\r\n      * @param {*} currentName \r\n      */\n  queryNameFormatter: function queryNameFormatter(currentName) {\n    if (currentName) {\n      var _regex = /UserDeleted_[a-zA-z0-9-]*/gi,\n      _resource = bizagi.localization.getResource(\"workportal-general-word-anonymized\");\n      currentName = currentName.replace(_regex, _resource.toLowerCase());\n    }\n    return currentName;\n  },\n\n  configureNavTree: function configureNavTree(queriesContainer) {\n    var self = this;\n    var confirm = self.getTemplate(\"queries-query-confirm\");\n\n    //Bind for manage queries\n    $(\"li#manageQueries\", queriesContainer).click(function () {\n      self.addEventToMangeQueries(self);\n    });\n\n    //Bind for manage queries\n    $(\"li#manageLiveProcessesQuery\", queriesContainer).click(function () {\n      self.addEventToLPQuery(self);\n    });\n\n    // Bind for list elements\n    $(\"li:not(#manageQueries,#manageLiveProcessesQuery)\", queriesContainer).click(function () {\n      var idNode = $(this).children(\"#idNode\").val();\n      var guidQueryForm = $(this).children(\"#guidQueryForm\").val();\n      var guidForm = $(this).children(\"#guidForm\").val();\n      var guidContext = $(this).children(\"#guidContext\").val();\n      var queryType = $(this).children(\"#queryType\").val();\n      var nodesLength = $(this).children(\"#nodesLength\").val();\n      var queryDisplayName = $(this).children(\"#queryDisplayName\").val();\n      var headerTemplate = self.getTemplate(\"queries-query-tree\");\n      var categoryTree = $(\"#categoryTree\");\n      var notMigratedUrl = $(this).children(\"#notMigratedUrl\").val();\n\n      if (queryType == \"-2\") {\n        self.renderStoredQueries();\n        $.tmpl(headerTemplate, {\n          idParentQuery: \"-2\",\n          queryDisplayName: queryDisplayName }).\n        appendTo(categoryTree);\n        self.configureTreeNavigation(\"#queries\");\n      } else\n      if (nodesLength > 0) {\n        // Is category with link\n        // Add element for tree navigation\n        $.tmpl(headerTemplate, {\n          idParentQuery: idNode,\n          queryDisplayName: queryDisplayName }).\n        appendTo(categoryTree);\n        // Set bind event for last element\n        self.configureTreeNavigation(\"#queries\");\n        self.renderQueries(idNode);\n      } else {\n        // Is Process\n        bizagi.workportal.desktop.popup.closePopupInstance();\n        var title = $(\"#queryDisplayName\", this).val();\n        self.showQueryFormPopup({\n          \"guidForm\": guidForm,\n          \"guidEntity\": guidContext,\n          \"title\": title,\n          \"queryFormAction\": \"renderQueryForm\",\n          \"queryType\": queryType,\n          \"notMigratedUrl\": notMigratedUrl });\n\n      }\n    });\n\n    $(\".deleteGAButton\").click(function (e) {\n      e.stopPropagation();\n      var confirmContent = $.tmpl(self.confirmTemplate);\n      var confirmContentParams = {\n        resizable: true,\n        modal: true,\n        title: self.getResource(\"workportal-widget-queries-confirm-title\"),\n        buttons: [] };\n\n      var notMigratedUrlDelete = $(\"#notMigratedUrlDelete\", $(this).parent()).val();\n\n      confirmContentParams.buttons = [\n      {\n        text: self.getResource(\"workportal-widget-queries-confirm-delete\"),\n        click: function click() {\n          $(this).dialog(\"close\");\n          //checks if it should use the url based method to delete the query\n          if (notMigratedUrlDelete) {\n            $.destroy(notMigratedUrlDelete);\n          }\n          bizagi.workportal.desktop.popup.closePopupInstance();\n        } },\n\n      {\n        text: self.getResource(\"workportal-widget-queries-confirm-cancel\"),\n        click: function click() {\n          $(this).dialog(\"close\");\n        } }];\n\n\n      $(confirmContent).dialog(confirmContentParams);\n\n    });\n  },\n\n  /**\r\n     * Bind tree navigation\r\n     */\n  configureTreeNavigation: function configureTreeNavigation(container) {\n    var self = this;\n    var content = self.getContent();\n    var categoryTree = $(\"#categoryTree\", content);\n    var queriesContainer = $(container, content);\n    // Bind header events\n    $(\"li:last-child\", categoryTree).click(function () {\n      // Remove all elements\n      $(this).nextAll().remove();\n      var idParent = $(this).children(\"#idParent\").val();\n      // Render query tree again\n      if (idParent == \"-2\") {\n        self.renderStoredQueries();\n      } else {\n        self.renderQueries(idParent);\n      }\n    });\n\n    $(\"li.storedQuery\", queriesContainer).click(function () {\n      var guid = $(this).data(\"guid\");\n      var id = $(this).data(\"id\");\n      var idNode = $(this).data(\"idnode\");\n      var paramsStoredQuery;\n      var result = $.grep(self.storedQueryForm, function (e) {\n        return e.idNode == idNode;\n      });\n      if (result.length == 1) {\n        paramsStoredQuery = result[0];\n\n        self.showQueryFormPopup({\n          \"idStoredQuery\": guid,\n          \"idQuery\": 1,\n          \"title\": paramsStoredQuery.definition.name,\n          \"paramsStoredQuery\": paramsStoredQuery,\n          \"queryFormAction\": \"execute\",\n          \"notMigratedUrl\": paramsStoredQuery.notMigratedUrl ? paramsStoredQuery.notMigratedUrl.execute : \"\" });\n\n      }\n    });\n\n    // Bind for action elements (Edit and delete buttons)\n    $(\".editButton\", container).click(function (e) {\n      e.stopPropagation();\n      var queryId = \"-1\";\n      var guid = $(this).parent().data(\"guid\");\n      var idStoredQuery = $(this).parent().data(\"id\");\n      var idNode = $(this).parent().data(\"idnode\");\n      var paramsStoredQuery;\n      var result = $.grep(self.storedQueryForm, function (e) {\n        return e.idNode == idNode;\n      });\n      if (result.length == 1) {\n        paramsStoredQuery = result[0];\n        self.showQueryFormPopup({\n          \"queryFormAction\": \"edit\",\n          \"idStoredQuery\": idStoredQuery == \"-1\" ? \"\" : idStoredQuery,\n          \"paramsStoredQuery\": paramsStoredQuery,\n          \"title\": paramsStoredQuery.definition.name,\n          \"notMigratedUrl\": paramsStoredQuery.notMigratedUrl ? paramsStoredQuery.notMigratedUrl.edit : \"\" });\n\n        bizagi.workportal.desktop.popup.closePopupInstance();\n      }\n    });\n    $(\".deleteButton\", container).click(function (e) {\n      e.stopPropagation();\n      var queryId = \"-1\";\n      var guid = $(this).parent().data(\"guid\");\n      var idStoredQuery = $(this).parent().data(\"id\");\n      var idNode = $(this).parent().data(\"idnode\");\n      var confirmContent, paramsStoredQuery, confirmContentParams;\n\n      var messageErrorForm = self.getResource(\"workportal-widget-admin-entities-message-migrate\");\n      messageErrorForm = messageErrorForm.replace(\"{build}\", bizagi.loader.productBuildToAbout);\n\n      var result = $.grep(self.storedQueryForm, function (e) {\n        return e.idNode == idNode;\n      });\n      if (result.length == 1) {\n        paramsStoredQuery = result[0];\n\n        confirmContentParams = {\n          resizable: true,\n          modal: true,\n          title: self.getResource(\"workportal-widget-queries-confirm-title\"),\n          buttons: [] };\n\n        var p_sessionId = bizagi.cookie(\"JSESSIONID\");\n        if (p_sessionId !== null && paramsStoredQuery.notMigratedUrl) {\n          confirmContent = $.tmpl(self.messageErrorTemplate, { messageError: messageErrorForm });\n        } else\n        {\n          confirmContent = $.tmpl(self.confirmTemplate);\n\n          confirmContentParams.buttons = [\n          {\n            text: self.getResource(\"workportal-widget-queries-confirm-delete\"),\n            click: function click() {\n              $(this).dialog(\"close\");\n              //checks if it should use the url based method to delete the query\n              if (paramsStoredQuery.notMigratedUrl && paramsStoredQuery.notMigratedUrl[\"delete\"]) {\n                $.get(\"App/\" + paramsStoredQuery.notMigratedUrl[\"delete\"]);\n              } else {\n                self.dataService.deleteStoredQueryForm({ idStoredQueryForm: idStoredQuery });\n              }\n              bizagi.workportal.desktop.popup.closePopupInstance();\n              self.publish(\"refreshQueryFormShortCut\");\n            } },\n\n          {\n            text: self.getResource(\"workportal-widget-queries-confirm-cancel\"),\n            click: function click() {\n              $(this).dialog(\"close\");\n            } }];\n\n\n        }\n\n        // Open dialog with confirm message\n        $(confirmContent).dialog(confirmContentParams);\n      }\n    });\n  },\n\n  scrollVertical: function scrollVertical() {\n    var self = this;\n    var content = self.getContent();\n    $(\"#queries\", content).bizagiScrollbar({\n      \"autohide\": false });\n\n  },\n\n  /*\r\n     *   Show new case popup to create a case\r\n     */\n  showQueryFormPopup: function showQueryFormPopup(arg) {\n    var self = this;\n    var queryFormAction = arg.queryFormAction || \"\";\n    var title = arg.title || \"\";\n    var queryType = arg.queryType || \"\";\n    var guidForm = arg.guidForm || \"\";\n    var guidEntity = arg.guidEntity || \"\";\n    var paramsStoredQuery = arg.paramsStoredQuery || {};\n    // If the same popup is opened close it\n    if (self.currentPopup == \"queryform\") {\n      bizagi.workportal.desktop.popup.closePopupInstance();\n      return;\n    }\n    // Shows a popup widget\n    self.currentPopup = \"queryform\";\n    self.publish(\"showDialogWidget\", {\n      widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_QUERYFORM,\n      queryFormAction: queryFormAction,\n      queryType: queryType,\n      paramsStoredQuery: paramsStoredQuery,\n      modalParameters: {\n        title: title,\n        id: \"Queries\" },\n\n      closeVisible: false,\n      guidForm: guidForm,\n      guidEntity: guidEntity,\n      notMigratedUrl: arg.notMigratedUrl || \"\",\n      maximizeOnly: true,\n      editQueryForm: function editQueryForm(params) {\n        self.currentPopup = undefined;\n        self.showPopUpEditQueryForm(params);\n\n      },\n      executeQueryForm: function executeQueryForm(params) {\n        self.currentPopup = undefined;\n        self.showPopUpResultsQueryForm(params);\n      } });\n\n  },\n\n  showPopUpEditQueryForm: function showPopUpEditQueryForm(params) {\n    var self = this;\n    var content = self.getContent();\n\n    $.when(self.dataService.getStoredQueryFormList()).done(function (storedQueryForm) {\n      self.storedQueryForm = storedQueryForm.storedQueryForms;\n      self.publish(\"refreshQueryFormShortCut\");\n      if (params && params.response) {\n        var idQueryForm = params.response;\n        self.editQueryForm(idQueryForm);\n      }\n    });\n  },\n\n  showPopUpResultsQueryForm: function showPopUpResultsQueryForm(params) {\n    var self = this;\n    var content = self.getContent();\n\n    $.when(self.dataService.getStoredQueryFormList()).done(function (storedQueryForm) {\n      self.storedQueryForm = storedQueryForm.storedQueryForms;\n      self.publish(\"refreshQueryFormShortCut\");\n      if (params && params.response) {\n        var idQueryForm = params.response;\n        self.executeQueryForm(idQueryForm);\n      }\n    });\n  },\n\n  editQueryForm: function editQueryForm(idQueryForm) {\n    var self = this;\n    var paramsStoredQuery = self.getParamsStoredQuery(idQueryForm);\n    if (paramsStoredQuery.length == 1) {\n      paramsStoredQuery = paramsStoredQuery[0];\n      self.showQueryFormPopup({\n        \"queryFormAction\": \"edit\",\n        \"idStoredQuery\": idQueryForm == \"-1\" ? \"\" : idQueryForm,\n        \"paramsStoredQuery\": paramsStoredQuery,\n        \"title\": paramsStoredQuery.definition.name,\n        \"notMigratedUrl\": paramsStoredQuery.notMigratedUrl ? paramsStoredQuery.notMigratedUrl.edit : \"\" });\n\n    }\n  },\n  executeQueryForm: function executeQueryForm(idQueryForm) {\n    var self = this;\n    var paramsStoredQuery = self.getParamsStoredQuery(idQueryForm);\n    if (paramsStoredQuery.length == 1) {\n      paramsStoredQuery = paramsStoredQuery[0];\n      self.showQueryFormPopup({\n        \"idStoredQuery\": paramsStoredQuery.guid,\n        \"idQuery\": 1,\n        \"title\": paramsStoredQuery.definition.name,\n        \"paramsStoredQuery\": paramsStoredQuery,\n        \"queryFormAction\": \"execute\",\n        \"notMigratedUrl\": paramsStoredQuery.notMigratedUrl ? paramsStoredQuery.notMigratedUrl.execute : \"\" });\n\n    }\n  },\n\n  getParamsStoredQuery: function getParamsStoredQuery(idQueryForm) {\n    var self = this;\n    return $.grep(self.storedQueryForm, function (e) {\n      return e.id == idQueryForm;\n    });\n  } });","/*\r\n *   Name: BizAgi Workportal Desktop stored queries shortcut\r\n *   Author: Iván Ricardo Taimal Narváez\r\n *   Comments:\r\n *   -   This script will provide behavior to stored queries shortcut\r\n */\n\n// Auto extend\nbizagi.workportal.widgets.queries.definition.extend(\"bizagi.workportal.widgets.queries.shortcut\", {}, {\n\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    //Load templates\n    self.loadTemplates({\n      \"queries\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.queries\").concat(\"#ui-bizagi-workportal-widget-queries\"),\n      \"queries-elements\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.queries\").concat(\"#ui-bizagi-workportal-widget-queries-elements\"),\n      \"queries-empty-elements\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.queries\").concat(\"#ui-bizagi-workportal-widget-queries-empty-elements\"),\n      \"queries-query-tree\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.queries\").concat(\"#ui-bizagi-workportal-widget-queries-query-tree\"),\n      \"queries-query-confirm\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.queries\").concat(\"#ui-bizagi-workportal-widget-queries-confirm\"),\n\n      \"queries-definition-elements\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.queries\").concat(\"#ui-bizagi-workportal-widget-queries-definition-elements\"),\n      \"queries-flat-list\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.queries\").concat(\"#ui-bizagi-workportal-widget-queries-flat-list\"),\n      \"queries-query-message-error\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.queries\").concat(\"#ui-bizagi-workportal-widget-queries-message-error\"),\n\n      \"queries-shortcut\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.queries.shortcut\").concat(\"#ui-bizagi-workportal-widget-queries-shortcut\"),\n      \"queries-shortcut-flat-list\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.queries.shortcut\").concat(\"#ui-bizagi-workportal-widget-queries-flat-list-shortcut\"),\n      \"queries-shortcut-query-confirm\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.queries.shortcut\").concat(\"#ui-bizagi-workportal-widget-queries-confirm-shortcut\"),\n      \"queries-shortcut-query-message-error\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.queries.shortcut\").concat(\"#ui-bizagi-workportal-widget-queries-message-error-shortcut\"),\n      useNewEngine: false });\n\n  },\n\n  /**\r\n      *   To be overriden in each device to apply layouts\r\n      */\n  loadtemplates: function loadtemplates() {\n    var self = this;\n    self.flatListTemplate = self.getTemplate(\"queries-shortcut-flat-list\");\n    self.confirmTemplate = self.getTemplate(\"queries-shortcut-query-confirm\");\n    self.messageErrorTemplate = self.getTemplate(\"queries-shortcut-query-message-error\");\n  },\n  postRender: function postRender() {\n    var self = this;\n    var template = self.getTemplate(\"queries-shortcut\");\n    var content = self.content = $.tmpl(template);\n    self.handleEvents();\n    bizagi.workportal.widgets.queries.shortcut.instance = this;\n  },\n\n  handleEvents: function handleEvents() {\n    var self = this;\n    $(\"#queryFormShortcutContainer\").show();\n    $(\"#queryFormShortcutContainer\").click(function () {\n      var queryFormShortcut = $(\"#queryFormShortcut\");\n      var arrow = $(this).find(\"span\");\n      var isHidden = queryFormShortcut.is(\":hidden\") ? true : false;\n      if (isHidden) {\n        queryFormShortcut.show();\n        arrow.removeClass(\"Right\");\n        arrow.addClass(\"Down\");\n        self.renderStoredQueries();\n      } else {\n        queryFormShortcut.hide();\n        arrow.removeClass(\"Down\");\n        arrow.addClass(\"Right\");\n      }\n    });\n  },\n\n  /**\r\n      * Bind tree navigation\r\n      */\n  configureTreeNavigation: function configureTreeNavigation() {\n    var self = this;\n    var categoryTree = $(\"#categoryTree\", self.content);\n    var queriesContainer = $(\"#queries-shortcut\", self.content);\n    $(\"li.storedQuery\", queriesContainer).click(function () {\n      var guid = $(this).data(\"guid\");\n      var id = $(this).data(\"id\");\n      var idNode = $(this).data(\"idnode\");\n      var paramsStoredQuery;\n      var result = $.grep(self.storedQueryForm, function (e) {return e.idNode == idNode;});\n      if (result.length == 1) {\n        paramsStoredQuery = result[0];\n        self.showQueryFormPopup({\n          \"idStoredQuery\": guid,\n          \"idQuery\": 1,\n          \"title\": paramsStoredQuery.definition.name,\n          \"paramsStoredQuery\": paramsStoredQuery,\n          \"queryFormAction\": \"execute\",\n          \"notMigratedUrl\": paramsStoredQuery.notMigratedUrl ? paramsStoredQuery.notMigratedUrl.execute : \"\" });\n\n      }\n      self.currentPopup = undefined;\n      // self.renderQueries();\n    });\n\n    // Bind for action elements (Edit and delete buttons)\n    $(\".bz-icon-pencil-outline\", \"#queries-shortcut\").click(function (e) {\n      var queryId = \"-1\";\n      var guid = $(this).closest(\".storedQuery\").data(\"guid\");\n      var idStoredQuery = $(this).closest(\".storedQuery\").data(\"id\");\n      var idNode = $(this).closest(\".storedQuery\").data(\"idnode\");\n      var paramsStoredQuery;\n      var result = $.grep(self.storedQueryForm, function (e) {\n        return e.idNode == idNode;\n      });\n      if (result.length == 1) {\n        paramsStoredQuery = result[0];\n        self.showQueryFormPopup({\n          \"queryFormAction\": \"edit\",\n          \"idStoredQuery\": idStoredQuery == \"-1\" ? \"\" : idStoredQuery,\n          \"paramsStoredQuery\": paramsStoredQuery,\n          \"title\": paramsStoredQuery.definition.name,\n          \"notMigratedUrl\": paramsStoredQuery.notMigratedUrl ? paramsStoredQuery.notMigratedUrl.edit : \"\" });\n\n        bizagi.workportal.desktop.popup.closePopupInstance();\n      }\n    });\n\n    $(\".bz-icon-close\", \"#queries-shortcut .bz-shorcut__icons\").click(function (e) {\n      e.stopPropagation();\n      var queryId = \"-1\";\n      var guid = $(this).closest(\".storedQuery\").data(\"guid\");\n      var idStoredQuery = $(this).closest(\".storedQuery\").data(\"id\");\n      var idNode = $(this).closest(\".storedQuery\").data(\"idnode\");\n      var confirmContent, paramsStoredQuery, confirmContentParams;\n\n      var messageErrorForm = self.getResource(\"workportal-widget-admin-entities-message-migrate\");\n      messageErrorForm = messageErrorForm.replace(\"{build}\", bizagi.loader.productBuildToAbout);\n\n      var result = $.grep(self.storedQueryForm, function (e) {\n        return e.idNode == idNode;\n      });\n      if (result.length == 1) {\n        paramsStoredQuery = result[0];\n\n        confirmContentParams = {\n          resizable: true,\n          modal: true,\n          title: self.getResource(\"workportal-widget-queries-confirm-title\"),\n          buttons: [] };\n\n\n        var p_sessionId = bizagi.cookie(\"JSESSIONID\");\n        if (p_sessionId !== null && paramsStoredQuery.notMigratedUrl) {\n          confirmContent = $.tmpl(self.messageErrorTemplate, { messageError: messageErrorForm });\n        } else\n        {\n          confirmContent = $.tmpl(self.confirmTemplate);\n\n          confirmContentParams.buttons = [\n          {\n            text: self.getResource(\"workportal-widget-queries-confirm-delete\"),\n            click: function click() {\n              $(this).dialog(\"close\");\n              if (paramsStoredQuery.notMigratedUrl && paramsStoredQuery.notMigratedUrl[\"delete\"]) {\n                $.get(\"App/\" + paramsStoredQuery.notMigratedUrl[\"delete\"]);\n              } else {\n                $.when(self.dataService.deleteStoredQueryForm({ idStoredQueryForm: idStoredQuery })).done(function () {\n                  bizagi.workportal.desktop.popup.closePopupInstance();\n                  self.renderStoredQueries();\n                });\n              }\n              self.renderStoredQueries();\n              bizagi.workportal.desktop.popup.closePopupInstance();\n            } },\n\n          {\n            text: self.getResource(\"workportal-widget-queries-confirm-cancel\"),\n            click: function click() {\n              $(this).dialog(\"close\");\n            } }];\n\n\n        }\n\n        // Open dialog with confirm message\n        $(confirmContent).dialog(confirmContentParams);\n      }\n    });\n  },\n  renderStoredQueries: function renderStoredQueries(params) {\n    var self = this;\n    var flatListTemplate = self.flatListTemplate;\n    var queriesContainer = $(\"#queries-shortcut\", self.content);\n    var storedQueryFormContent;\n    $.when(self.dataService.getStoredQueryFormList()).done(function (storedQueryForm) {\n      self.storedQueryForm = storedQueryForm.storedQueryForms;\n      storedQueryFormContent = $.tmpl(flatListTemplate, { storedQueryForm: self.storedQueryForm });\n      storedQueryFormContent.appendTo(queriesContainer);\n      self.configureTreeNavigation();\n      if (self.storedQueryForm.length <= 0) {\n        $(\"#queryFormShortcutContainer\").hide();\n      } else {\n        $(\"#queryFormShortcutContainer\").show();\n      }\n    });\n  } });","/**\r\n * Name: Bizagi Workportal Users Modal\r\n */\n\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.queries.management\", {}, {\n  /**\r\n                                                                                               * Constructor\r\n                                                                                               */\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n    self.selectedUsers = [\"\", \"\"];\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    //Load template\n    self.loadTemplates({\n      \"queries-management\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.queries.management\").concat(\"#queries-management\"),\n      \"queries-management-loader\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.queries.management\").concat(\"#ui-bizagi-workportal-widget-queries-management-loader\"),\n      \"queries-management-table\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.queries.management\").concat(\"#ui-bizagi-workportal-widget-queries-management-table\") });\n\n\n  },\n\n  renderContent: function renderContent() {\n    var self = this;\n    var template = self.getTemplate('queries-management');\n    self.content = template.render();\n    return self.content;\n  },\n\n  postRender: function postRender() {\n    var self = this;\n    self.setupSearchusersButton();\n    self.loaderTmpl = self.getTemplate(\"queries-management-loader\");\n    self.loader = self.loaderTmpl.render();\n  },\n\n  /**\r\n      * Set the fixed head table of the reporting details\r\n      */\n  fixedHeadTable: function fixedHeadTable() {\n    var self = this;\n    var fixedHeadTableElement = $(\".ui-bizagi-wp-queries-management-content-parent-tableHeadFixed > .ui-bizagi-wp-queries-management-content-tableHeadFixed\", self.content);\n    fixedHeadTableElement.find(\"table:first\").floatThead({\n      position: 'fixed',\n      zIndex: 1,\n      scrollContainer: function scrollContainer() {\n        return fixedHeadTableElement;\n      } });\n\n\n    self.onResizeModalEvent();\n  },\n\n  clean: function clean() {\n    var self = this;\n  },\n\n  /**\r\n      * find the maximize button and when the user clicks it the body trigger resize, this is necesary for fixedHeadTable, and recall again\r\n      */\n  onResizeModalEvent: function onResizeModalEvent() {\n    var self = this;\n    self.getContent().parents(\".ui-dialog\").find(\".ui-dialog-titlebar-maximize\").click(function () {\n      $(\"body\").trigger(\"resize\");\n      self.onResizeModalEvent();\n    });\n  },\n\n  /*\r\n     * initialize the users search form widget\r\n     */\n  setupUsersSearchForm: function setupUsersSearchForm(input, user) {\n    var self = this;\n    var content = self.getContent();\n    var def = $.Deferred();\n    $(\".queries-management-content\", content).hide();\n\n\n    self.usersTable = new bizagi.workportal.widgets.userstable(self.workportalFacade, self.dataService, $.extend(self.params, {\n      canvas: $(\"#dinamicContent\", content),\n      userLinkLabel: [bizagi.localization.getResource(\"workportal-widget-admin-defaults-assignation-select-link\")],\n      parentDef: def,\n      showBackButton: true }));\n\n    self.usersTable.render();\n\n    $.when(def).done(function (userId, userName, guid) {\n      var params = {\n        action: \"Applications\",\n        userId: userId };\n\n      if (user == 0) {\n        self.dataService.getApplicationCategoriesList(params).\n        done(function (applicationList) {\n          if (applicationList.items.length > 0) {\n            self.allProcess = true;\n            self.haveProcess = true;\n            if (guid !== undefined) {\n              self.getQueries(guid);\n            }\n          }\n\n        }).fail(function () {\n        });\n      }\n      $(\"#dinamicContent\", content).html(\"\");\n      $(\".queries-management-content\", content).show();\n      if (userName) {\n        $(input, content).val(userName);\n        self.showHideClearIcon(input, 'block');\n      }\n      if (guid) {\n        self.selectedUsers[user] = guid;\n      }\n    });\n  },\n  showNotifier: function showNotifier(message) {\n    var self = this;\n    var notifier = window.parent.bizagi.injector.get('notifier');\n    notifier.showSucessMessage(message, '');\n  },\n  showLoading: function showLoading() {\n    var self = this;\n    $(\".queries-management-container\").append(self.loader);\n  },\n  endLoading: function endLoading() {\n    var self = this;\n    $(self.loader).remove();\n  },\n  clearInput: function clearInput(input, content) {\n    var self = this;\n    var position = input == \"#txtTextUserSource\" ? 0 : 1;\n    self.showHideClearIcon(input, 'none');\n    $(input, content).val(\"\");\n    self.selectedUsers[position] = \"\";\n  },\n  showHideClearIcon: function showHideClearIcon(id, display) {\n    var self = this;\n    var content = self.getContent();\n    $(id + \" ~ span\", content).css(\"display\", display);\n  },\n  getQueries: function getQueries(guid) {\n    var self = this;\n    var params = {};\n    params.guidUser = guid;\n    self.showLoading();\n    self.dataService.getManagementQueries(params).\n    done(function (response) {\n      self.queries = response.storedQueryForms;\n      self.endLoading();\n      if (self.queries.length > 0) {\n        var dataTable = $.map(response.storedQueryForms, function (value) {\n          var name = value.definition.name;\n          var description = value.definition.description;\n          return {\n            name: name,\n            description: description };\n\n        });\n        $(\".emptyQueries\", self.content).hide();\n        $(\".queries-content\", self.content).show();\n        self.renderTable(dataTable);\n      } else\n      {\n        $(\".emptyQueriesText\").text(bizagi.localization.getResource(\"workportal-widget-queries-management-list-empty-no-queries\"));\n      }\n    }).\n    fail(function (error) {\n      self.endLoading();\n      bizagi.showMessageBox(bizagi.localization.getResource(\"workportal-widget-admin-transfers-case-security-permissions-assign-fail\"), bizagi.localization.getResource(\"workportal-general-word-information\"), \"warning\");\n      bizagi.log(error);\n    });\n  },\n  renderTable: function renderTable(dataTable) {\n\n    var self = this;\n    var template = self.getTemplate('queries-management-table');\n    var data = {\n      data: dataTable };\n\n    var contentTable = template.render(data);\n    $(\".queries-content.ui-bizagi-wp-queries-management-content-tableHeadFixed\").html(contentTable);\n    self.fixedHeadTable();\n  },\n  validateUsers: function validateUsers() {\n    var self = this;\n    var resp = true;\n    if (self.selectedUsers[0] == \"\" || self.selectedUsers[1] == \"\") {\n      bizagi.showMessageBox(bizagi.localization.getResource(\"workportal-widget-admin-transfers-case-security-permissions-fail-you-must-select-both-users-to-continue\"), bizagi.localization.getResource(\"workportal-general-word-information\"), \"warning\");\n      resp = false;\n    } else if (self.selectedUsers[0] == self.selectedUsers[1]) {\n      bizagi.showMessageBox(bizagi.localization.getResource(\"workportal-widget-admin-transfers-case-security-permissions-fail-users-must-be-different\"), bizagi.localization.getResource(\"workportal-general-word-information\"), \"warning\");\n      resp = false;\n    } else\n    if (self.queries.length == 0) {\n      bizagi.showMessageBox(bizagi.localization.getResource(\"workportal-widget-queries-management-list-empty-no-queries\"), bizagi.localization.getResource(\"workportal-general-word-information\"), \"warning\");\n      resp = false;\n    }\n    return resp;\n  },\n\n  transferQueries: function transferQueries() {\n    var self = this;\n    if (self.validateUsers()) {\n      var buttons = [\n      {\n        label: bizagi.localization.getResource(\"workportal-widget-queries-management-transfer-confirmation-modal-no-button\"),\n        action: \"reject\" },\n\n      {\n        label: bizagi.localization.getResource(\"workportal-widget-queries-management-transfer-confirmation-modal-button\"),\n        action: \"resolve\" }];\n\n\n      var customOptions = {\n        dialogClass: \"widget-queries-management-transfer-confirm\",\n        width: 400,\n        minWidth: 400 };\n\n\n      $.when(bizagi.showConfirmationBox(bizagi.localization.getResource(\"workportal-widget-queries-management-transfer-confirmation-modal-description\"), bizagi.localization.getResource(\"workportal-general-word-information\"), false, buttons, customOptions)).\n      done(function () {\n        self.showLoading();\n        var params = {\n          guidUserSource: self.selectedUsers[0],\n          guidUserTarget: self.selectedUsers[1] };\n\n        self.dataService.transferQueries(params).\n        done(function () {\n          self.endLoading();\n          $(\".emptyQueriesText\").text(bizagi.localization.getResource(\"workportal-widget-queries-management-list-empty-no-queries\"));\n          $(\".queries-content\", self.content).hide();\n          $(\".emptyQueries\", self.content).show();\n          self.queries = [];\n          self.showNotifier(bizagi.localization.getResource(\"workportal-widget-queries-management-queries-transferred-successfully\"));\n        }).\n        fail(function (error) {\n          self.endLoading();\n          bizagi.showMessageBox(bizagi.localization.getResource(\"workportal-widget-queries-management-queries-transferred-fail\"), bizagi.localization.getResource(\"workportal-general-word-information\"), \"warning\");\n          bizagi.log(error);\n        });\n\n      });\n    }\n  },\n\n  /****************** EVENTS ***********************/\n\n\n  setupSearchusersButton: function setupSearchusersButton() {\n    var self = this,\n    content = self.getContent();\n\n    $(\"#btn-searchUserSource\", content).click(function () {\n      self.setupUsersSearchForm(\"#txtTextUserSource\", 0);\n    });\n    $(\"#btn-searchUserTarget\", content).click(function () {\n      self.setupUsersSearchForm(\"#txtTextUserTarget\", 1);\n    });\n\n    $(\"#btn-clearUserSource\", content).click(function () {\n      self.clearInput(\"#txtTextUserSource\", content);\n      $(\".emptyQueriesText\").text(bizagi.localization.getResource(\"workportal-widget-queries-management-list-empty-no-selected-user\"));\n      $(\".queries-content\", self.content).hide();\n      $(\".emptyQueries\", self.content).show();\n    });\n    $(\"#btn-clearUserTarget\", content).click(function () {\n      self.clearInput(\"#txtTextUserTarget\", content);\n    });\n\n    $(\"#btn-transferQueries\", content).click(function () {\n      self.transferQueries();\n    });\n  } });\n\n\n\nbizagi.injector.register('bizagi.workportal.widgets.queries.management', ['workportalFacade', 'dataService', bizagi.workportal.widgets.queries.management]);","/*\r\n*   Name: BizAgi Workportal Rows Per Page (Inbox and Queries)\r\n*   Author: Kevin Alvarado  \r\n*/\n\n// Extends itself\n$.Class.extend(\"bizagi.workportal.results.per.page\", {}, {\n\n  /**\r\n                                                            * Init the class\r\n                                                            * @param {*} bizagiConfigProperty optional parameter if the rows per page property is configured in BizagiConfig\r\n                                                            */\n  init: function init(bizagiConfigProperty) {\n    var self = this;\n    self.bizagiConfigProperty = bizagiConfigProperty;\n  },\n\n  /**\r\n      * Return the combo DataSource with the default values and self.bizagiConfigProperty\r\n      */\n  initCombo: function initCombo() {\n    var self = this;\n    var comboDataSource = {\n      combo: [],\n      id: \"numberRows\" };\n\n    var values = Array(10, 20, 30, 40, 50, 100);\n    if (self.bizagiConfigProperty && values.indexOf(self.bizagiConfigProperty) == -1) {\n      values.push(self.bizagiConfigProperty);\n      values.sort(function (a, b) {return a - b;});\n    }\n    values.map(function (v) {\n      comboDataSource.combo.push({\n        id: v,\n        name: v });\n\n    });\n    return comboDataSource;\n  },\n\n  /**\r\n      * Busca el valor finding en el combo[i].id si no lo encuentra retorna false, de lo contrario retorna el elemento combo[i]\r\n      * @param {Array} combo array de valores del combo\r\n      * @param {Number} finding valor que se busca\r\n      */\n  _findValue: function _findValue(combo, finding) {\n    var value = false;\n    combo.map(function (c) {\n      if (c.id == finding) {\n        value = c;\n      }\n    });\n    return value;\n  },\n\n  /**\r\n      * Revisa el valor inicial que debe tener el combo, revisando preferencias de usuario, web.config y casos null, retorna un elemento del combo\r\n      * @param {JSON} params contenido del comboDataSource\r\n      */\n  initialValueCombo: function initialValueCombo(params) {\n    var self = this;\n    var initValueCombo = params.comboDataSource.combo[0];\n    var preferencesItemsPerPage = params.getRowValue();\n    if (preferencesItemsPerPage || self.bizagiConfigProperty) {\n      var defaultValue = preferencesItemsPerPage && self._findValue(params.comboDataSource.combo, preferencesItemsPerPage) !== false ? preferencesItemsPerPage : self.bizagiConfigProperty;\n      if (defaultValue) {\n        initValueCombo = self._findValue(params.comboDataSource.combo, defaultValue);\n      }\n    }\n    return initValueCombo;\n  },\n\n  /**\r\n      * Agrega la interacción al comboBox y define los listeners, retorna el deferred\r\n      * @param {*} params combo, content, comboWrapper, onChange\r\n      */\n  renderNumberRowsCombo: function renderNumberRowsCombo(params) {\n    var self = this;\n    var deferred = $.Deferred();\n    params.comboWrapper.empty();\n    var initValueCombo = self.initialValueCombo({\n      comboDataSource: params.combo,\n      getRowValue: params.getRowValue });\n\n    var lastValue = initValueCombo.id;\n    params.comboWrapper.uicombo({\n      isEditable: false,\n      data: params.combo,\n      itemValue: function itemValue(obj) {\n        return obj.id;\n      },\n      itemText: function itemText(obj) {\n        return obj.name;\n      },\n      onComplete: function onComplete() {\n        deferred.resolve();\n      },\n      onChange: function onChange(obj) {\n        var value = obj.ui.data('value');\n        if (value != lastValue) {\n          lastValue = value;\n          params.setRowValue(value);\n          params.onChange();\n        }\n      },\n      initValue: initValueCombo });\n\n    return deferred;\n  } });"]}