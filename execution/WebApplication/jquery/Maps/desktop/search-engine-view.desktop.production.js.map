{"version":3,"sources":["jquery/workportal/desktop/widget/paginator/bizagi.workportal.desktop.widgets.paginator.js","jquery/workportal/desktop/widget/sortbar/bizagi.workportal.desktop.widgets.sortbar.js","jquery/workportal/desktop/widget/mysearchfilter/bizagi.workportal.desktop.widgets.mysearchfilter.js","jquery/workportal/desktop/widget/mysearchcriteria/bizagi.workportal.desktop.widgets.mysearchcriteria.js"],"names":["bizagi","workportal","widgets","widget","extend","init","workportalFacade","dataService","params","this","_super","loadTemplates","paginator","getTemplate","concat","content","renderContent","hide","referenceType","template","getSuffixWidget","render","postRender","sub","$","proxy","updateView","configureHandlers","ev","self","args","$content","getContent","renderTemplate","totalRecords","totalPages","displayName","currentPage","appendTo","setModel","empty","fromActionLauncher","clean","histName","action","reference","surrogateKey","event","guidSearch","getModel","page","stopNavigation","on","onPageBreak","$target","target","hasClass","type","data","disabledPaginatorButtonsByLimits","find","text","pub","$buttonFastRewind","$buttonRewind","$buttonFordward","$buttonFastFordward","addClass","removeClass","calculateNewPage","newItemsPerPage","previousItemsPerPage","previousPage","currentFirstItem","newPage","Math","ceil","injector","register","processActionService","accumulatedcontext","sortbar","right-content","addButton","sortMenu","actions","recordsPerPage","recordsMenu","enableFilter","$checkAll","setVisibleSortbar","append","configureAfterPaintHandlers","initializeAndProcessFilterButton","setFiltersSortData","hideFilterButtonAndBar","hideSortButtons","enableBatchActions","updateCounterByFilterApplied","showingFiltering","setVisibleCheckAll","validActions","actionsData","tooltip","onCheckUncheck","showSortMenu","showRecordsMenu","sortSelection","attribute","setIconSortType","_sortType","properties","xpath","orderType","typeSearch","onRemoveSelectedItemsCollections","visible","show","closest","showingCheckAll","showSelectedItems","numberCheckedItems","keywordSelected","getResource","button","sortTypeBeforeChanged","onClickBatchAction","$buttonLI","guidAction","getAction","requestsInProgressActionGuid","addLoadingButtonAction","when","executeBatchAction","commonActionsmodel","always","quitLoadingButtonAction","undefined","$button","prepend","remove","commonActions","value","$parent","filters","_filters","displayValue","val","length","click","e","stopPropagation","document","one","currentTarget","index","display","split","pop","oldPageSize","pageSize","Number","util","trim","textContent","get","actualPage","restoreOrderSelected","processAddButton","$buttonContainer","_lastReferenceEntity","children","_haveAddButton","startLoading","delay","overlay","getProcessAddAction","done","referenceEntity","Object","getOwnPropertyNames","guidEntity","id","renderButton","endLoading","$addButton","clickAddButton","getMapping","accumulatedContext","getContext","xpathContext","collectionId","collectionType","mappingData","onExecuteProcess","onExecuteForm","isChecked","is","commonActionsModel","showBatchActions","checkAll","prop","typeActions","keys","itemsSelected","moreActions","slice","$actions","off","tooltipClass","items","html","open","ui","uiTooltip","originalEvent","$id","attr","keyActionGuid","not","$buttonAction","focus","close","hover","stop","fadeTo","fadeOut","filtersAppliedCounter","calculateFilters","a","i","filterCounter","sortCounter","defaultValues","min","max","showFilterButton","hideFilterButton","showSortButtons","updateCounter","showingSorting","$sortbarIcon","filtersApplied","counter","$counter","showingFilter","startForm","hasStartForm","executeProcessAction","refreshTemplateData","loadTemplateData","isRefresh","executeFormAction","refresh","filter","grep","multiplicity","mode","isEvent","unsub","mysearchfilter","mysearchfilter-item","filterItem","initializeMySearchFilter","criteriaSearchApplied","clone","filterControlArray","orderBy","toggleWidget","openCloseWidget","setFiltersData","setOrderBy","setRecordsPerPage","defaultFilterApplied","filtersAppliedWithProperties","$listContent","replaceAll","defaultFilter","toLowerCase","tmplid","filterApplied","buildFilter","el","setFilterData","status","$element","buildFilterMultiple","buildFilterNumber","buildFilterMoney","buildFilterDate","buildFilterBoolean","filterData","isInteger","subType","bizagi_multipleFilter","bizagi_integerFilter","bizagi_numberFilter","bizagi_moneyFilter","bizagi_dateFilter","bizagi_booleanFilter","moneyFilter","showButtonClearFilter","numericFormat","onApply","element","addFilterSelection","triggerFilter","onClear","removeFilterApplied","key","localization","push","numberFilter","dateFilter","xpaths","multipleFilter","booleanFilter","len","splice","indexOf","filtersToSend","filterBarFilters","defineFilterObject","_setPageSize","filterParams","level","_getPageSize","mySearchCriteria","mySearchCriteriaList","processCriterias","callQueryForm","rangeQuery","performQuery","originParams","criterias","metadataFilters","areThereVisibleFilters","list","result","isHidden","preProcessValues","searchType","publishParams","widgetName","BIZAGI_WORKPORTAL_WIDGET_LOADFORM","summaryDecorator","guidForm","displayname","searchCriteriasApplied","closeVisible","buttons","form","dialog","validateForm","renderValues","forceCollectData","collectRenderValues","filterObject","name","control","getRender","getDisplayValue","modalParameters","title","publish","each","filterToRemove","removeFilterByType","isEmpty","dataParams","BIZAGI_WORKPORTAL_WIDGET_HOMEPORTAL","homeportalInstance","isReady","mysearchcriteria"],"mappings":"AAIAA,OAAOC,WAAWC,QAAQC,OAAOC,OAAO,sCAAuC,GAAI,CAIjFC,KAAM,SAAcC,EAAkBC,EAAaC,GACtCC,KAGNC,OAAOJ,EAAkBC,EAAaC,GAHhCC,KAKNE,cAAc,CACjBC,UAAaZ,OAAOa,YAAY,8CAA8CC,OAAO,sBACrFC,QAAWf,OAAOa,YAAY,8CAA8CC,OAAO,yBAOvFE,cAAe,WACb,IACIC,EAAqC,WAD9BR,KACKD,OAAOU,cACnBC,EAFOV,KAESI,YAAY,YAFrBJ,KAEwCW,mBAGnD,OALWX,KAGNM,QAAUI,EAASE,OAAO,CAAEJ,KAAMA,IAH5BR,KAKCM,SAMdO,WAAY,WACCb,KAENc,IAAI,mBAAoBC,EAAEC,MAFpBhB,KAE+BiB,WAF/BjB,OAAAA,KAGNkB,qBAOPP,gBAAiB,WACf,MAAO,IAUTM,WAAY,SAAoBE,EAAIpB,GAClC,IAAIqB,EAAOpB,KACPqB,EAAOtB,EAAOsB,KACdb,EAA8B,WAAvBa,EAAKZ,cACZa,EAAWF,EAAKG,aAoBpB,SAASC,IACeJ,EAAKhB,YAAY,UAAYgB,EAAKT,mBAExCC,OAAO,CACrBa,aAAcL,EAAKK,aACnBC,WAAYN,EAAKM,WACjBC,YAAaP,EAAKO,YAClBC,YAAaR,EAAKQ,YAClBpB,KAAMA,IACRqB,SAASP,GA3BXF,EAAKU,SAAST,GACdC,EAASS,QAELV,EAAKW,mBACHZ,EAAKK,aAAe,EACtBD,IAGAJ,EAAKa,QAIPT,KAsBJM,SAAU,SAAkBT,GACfrB,KAENyB,kBAA2C,IAArBJ,EAAKI,aAFrBzB,KAEwDyB,aAAeJ,EAAKI,aAF5EzB,KAGN0B,WAAaL,EAAKK,YAHZ1B,KAG+B0B,WAH/B1B,KAIN2B,YAAcN,EAAKa,UAJblC,KAI8B2B,YAJ9B3B,KAKN4B,YAAcP,EAAKO,aALb5B,KAKiC4B,YALjC5B,KAMNmC,OAASd,EAAKc,OANRnC,KAONoC,UAAYf,EAAKe,WAPXpC,KAO6BoC,UAP7BpC,KAQNqC,aAAehB,EAAKgB,cARdrC,KAQmCqC,aARnCrC,KASNS,cAAgBY,EAAKZ,cATfT,KAUNsC,MAAQjB,EAAKiB,MAVPtC,KAWNuC,WAAalB,EAAKkB,YAMzBC,SAAU,WAGR,MAAO,CACLC,KAHSzC,KAGE4B,YACXH,aAJSzB,KAIUyB,aACnBU,OALSnC,KAKImC,OACbC,UANSpC,KAMOoC,UAChBC,aAPSrC,KAOUqC,aACnB5B,cARST,KAQWS,cACpBiC,gBAAgB,EAChBH,WAVSvC,KAUQuC,aAOrBrB,kBAAmB,WACNlB,KACKuB,aAEPoB,GAAG,QAAS5B,EAAEC,MAHZhB,KAGuB4C,YAHvB5C,QASb4C,YAAa,SAAqBzB,GAChC,IACA0B,EAAU9B,EAAEI,EAAG2B,QACfxB,EAFWtB,KAEKuB,aAEhB,GAAIsB,EAAQE,SAAS,kBAAoBF,EAAQE,SAAS,qBAAsB,CAC9E,IAAIC,EAAOH,EAAQI,KAAK,QAEZ,WAARD,EAPKhD,KAQF4B,aAAe,EAEV,UAARoB,EAVKhD,KAWF4B,aAAe,EAXb5B,KAcF4B,YADK,cAARoB,EACiB,EAdZhD,KAiBiB0B,WAjBjB1B,KAoBJkD,mCACL5B,EAAS6B,KAAK,oCAAoCC,KArBzCpD,KAqBmD4B,aArBnD5B,KAuBJqD,IAAI,SAAU,CAAEL,KAAM,2BAA4B3B,KAvB9CrB,KAuByDwC,eAItEU,iCAAkC,WAChC,IACII,EAAoBvC,EAAE,2BADff,KACgDM,SACvDiD,EAAgBxC,EAAE,uBAFXf,KAEwCM,SAC/CkD,EAAkBzC,EAAE,wBAHbf,KAG2CM,SAClDmD,EAAsB1C,EAAE,4BAJjBf,KAImDM,SAEtC,IANbN,KAMF0B,YACP4B,EAAkBI,SAAS,qBAC3BH,EAAcG,SAAS,qBACvBF,EAAgBE,SAAS,qBACzBD,EAAoBC,SAAS,sBAGJ,IAbhB1D,KAaA4B,aACP0B,EAAkBI,SAAS,qBAC3BH,EAAcG,SAAS,qBACvBF,EAAgBG,YAAY,qBAC5BF,EAAoBE,YAAY,sBAjBzB3D,KAoBK4B,cApBL5B,KAoB0B0B,YAC/B4B,EAAkBK,YAAY,qBAC9BJ,EAAcI,YAAY,qBAC1BH,EAAgBE,SAAS,qBACzBD,EAAoBC,SAAS,uBAI3BJ,EAAkBK,YAAY,qBAC9BJ,EAAcI,YAAY,qBAC1BH,EAAgBG,YAAY,qBAC5BF,EAAoBE,YAAY,uBAU1CC,iBAAkB,SAA0BC,EAAiBC,EAAsBC,GAEjF,IAAIC,GADJF,EAAuBA,GAAwB,IACDC,EAAeD,EAAuB,EAChFG,EAAUC,KAAKC,KAAKH,EAAmBH,GAC3C,OAAOI,GAAoB,GAM7BhC,MAAO,WACL,IACIX,EADOtB,KACSuB,aAEhBD,GACFA,EAASS,WAKfxC,OAAO6E,SAASC,SAAS,sCAAuC,CAAC,mBAAoB,cAAe9E,OAAOC,WAAWC,QAAQU,YCrO9HZ,OAAOC,WAAWC,QAAQC,OAAOC,OAAO,oCAAqC,GAAI,CAS/EC,KAAM,SAAcC,EAAkBC,EAAawE,EAAsBC,EAAoBxE,GAChFC,KAGNC,OAAOJ,EAAkBC,EAAaC,GAHhCC,KAMNE,cAAc,CACjBsE,QAAWjF,OAAOa,YAAY,4CAA4CC,OAAO,oBACjFC,QAAWf,OAAOa,YAAY,4CAA4CC,OAAO,oBACjFoE,gBAAiBlF,OAAOa,YAAY,4CAA4CC,OAAO,kBACvFqE,UAAanF,OAAOa,YAAY,4CAA4CC,OAAO,+BACnFsE,SAAYpF,OAAOa,YAAY,4CAA4CC,OAAO,sBAClFuE,QAAWrF,OAAOa,YAAY,4CAA4CC,OAAO,4BACjFwE,eAAkBtF,OAAOa,YAAY,4CAA4CC,OAAO,6BACxFyE,YAAevF,OAAOa,YAAY,4CAA4CC,OAAO,2BAd5EL,KAiBNsE,qBAAuBA,EAjBjBtE,KAkBNuE,mBAAqBA,GAM5BhE,cAAe,WACb,IACIG,EADOV,KACSI,YAAY,WAIhC,OALWJ,KAENM,QAAUI,EAASE,OAAO,CAAEmE,cAAc,IAFpC/E,KAGNgF,UAHMhF,KAGWM,QAAQ6C,KAAK,qCAHxBnD,KAKCM,SAMdO,WAAY,WACV,IAEIH,EAFOV,KAESI,YAAY,iBAFrBJ,KAGNiF,mBAAkB,GAHZjF,KAINkB,oBACLH,EAAE,iBALSf,KAKcM,SAAS4E,OAAOxE,EAASE,UALvCZ,KAMNmF,+BAMPjE,kBAAmB,WACjB,IAAIE,EAAOpB,KACXsB,EAAWF,EAAKG,aAEhBH,EAAKN,IAAI,sBAAuBC,EAAEC,MAAMI,EAAKgE,iCAAkChE,IAC/EA,EAAKN,IAAI,qBAAsBC,EAAEC,MAAMI,EAAKgE,iCAAkChE,IAC9EA,EAAKN,IAAI,mBAAoBC,EAAEC,MAAMI,EAAKiE,mBAAoBjE,IAC9DA,EAAKN,IAAI,2BAA4BC,EAAEC,MAAMI,EAAKkE,uBAAwBlE,IAC1EA,EAAKN,IAAI,oBAAqBC,EAAEC,MAAMI,EAAKmE,gBAAiBnE,IAC5DA,EAAKN,IAAI,yBAAyB,SAAUK,EAAIE,GAAO,OAAOD,EAAKoE,mBAAmBnE,MACtFD,EAAKN,IAAI,kCAAkC,SAAUK,EAAIE,GAAO,OAAOD,EAAKqE,6BAA6BpE,MACzGD,EAAKN,IAAI,uBAAuB,SAAUK,EAAIE,GAAOD,EAAKsE,kBAAmB,EAAMtE,EAAKuE,oBAAmB,MAC3GvE,EAAKN,IAAI,0BAA0B,SAAUK,EAAIE,GAAOD,EAAKuE,oBAAmB,MAChFvE,EAAKN,IAAI,kBAAkB,SAAUK,EAAIE,GAAOD,EAAKuE,oBAAmB,MACxEvE,EAAKN,IAAI,iBAAiB,SAAUK,EAAIE,GAAO,OAAOD,EAAKwE,aAAavE,EAAKA,KAAKwE,gBAElFvE,EAAS6B,KAAK,2BAA2B2C,UACzC1E,EAAK4D,UAAUrC,GAAG,QAAS5B,EAAEC,MAAMI,EAAK2E,eAAgB3E,KAM1D+D,4BAA6B,WAC3B,IAAI/D,EAAOpB,KACXsB,EAAWF,EAAKG,aAGhBD,EAAS6B,KAAK,eAAeR,GAAG,SAAS,SAAUxB,GACjDC,EAAK4E,aAAa7E,EAAIJ,EAAEf,UAI1BsB,EAAS6B,KAAK,iBAAiBR,GAAG,SAAS,SAAUxB,GACnDC,EAAK6E,gBAAgB9E,EAAIJ,EAAEf,UAI7BsB,EAAS6B,KAAK,eAAeR,GAAG,SAAS,WACnCvB,EAAK8E,cAAcC,YACrB/E,EAAKgF,gBAAgBrF,EAAEf,MAAOoB,EAAKiF,WAEnCjF,EAAKiC,IAAI,SAAU,CAAEL,KAAM,cAAe3B,KAAM,CAC5CiF,WAAY,CACVC,MAAOnF,EAAK8E,cAAcC,UAC1BK,UAAWpF,EAAKiF,UAChBI,WAAY,eAMtBnF,EAAS6B,KAAK,gBAAgBR,GAAG,SAAS,WACxCvB,EAAKiC,IAAI,SAAU,CAAEL,KAAM,2BAA4B3B,KAAM,CAAEkB,WAAYnB,EAAKrB,OAAOwC,WAAYO,OAAQ/B,EAAEf,YAG/Ge,EAAE,qCAAsCO,GAAUqB,GAAG,QAAS5B,EAAEC,MAAMI,EAAKsF,iCAAkCtF,KAO/G6D,kBAAmB,SAA2B0B,GAC5C,IACIrF,EADOtB,KACSuB,aAChBoF,EACFrF,EAASsF,OAGTtF,EAASd,QAQbmF,mBAAoB,SAA4BgB,GAE1CA,GADO3G,KAEJgF,UAAU6B,QAAQ,yBAAyBD,OAFvC5G,KAGJ8G,iBAAkB,IAHd9G,KAMJgF,UAAU6B,QAAQ,yBAAyBrG,OANvCR,KAOJ8G,iBAAkB,IAQ3BC,kBAAmB,SAA2BC,GAE5C,GAAIA,GAAsBA,EAAqB,EAAG,CADvChH,KAEJM,QAAQoD,SAAS,qBAEtB,IAAIuD,EAJKjH,KAIkBkH,YAAY,6CACnCF,EAAqB,IACvBC,EANOjH,KAMgBkH,YAAY,4CAErCnG,EAAE,0BAROf,KAQyBM,SAAS8C,KAAK4D,EAAqB,IAAMC,EAAkB,UARpFjH,KAWJM,QAAQqD,YAAY,sBAS7ByC,gBAAiB,SAAyBe,EAAQC,GAElB,QAA1BA,GADOpH,KAEJqG,UAAY,OACjBc,EAAOxD,YAAY,mCAAmCD,SAAS,sCAHtD1D,KAMJqG,UAAY,MACjBc,EAAOxD,YAAY,oCAAoCD,SAAS,qCAQpE2D,mBAAoB,SAA4B/E,GAC9C,IAAIlB,EAAOpB,KACPsH,EAAYvG,EAAEuB,EAAMQ,QAAQ+D,QAAQ,MACpCU,EAAaD,EAAUrE,KAAK,QAC5Bd,EAASf,EAAKoG,UAAUD,GAEvBnG,EAAKqG,6BAA6BF,KACrCnG,EAAKqG,6BAA6BF,IAAc,EAEhDnG,EAAKsG,uBAAuBJ,GAE5BvG,EAAE4G,KAAKvG,EAAKkD,qBAAqBsD,mBAAmB,CAClDzF,OAAQA,EACR0F,mBAAoBzG,EAAKyG,sBAC3BC,QAAO,WACL1G,EAAK2G,wBAAwBT,GAC7BlG,EAAKqG,6BAA6BF,QAAcS,OAQtDN,uBAAwB,SAAgCO,GACtDA,EAAQ9E,KAAK,oBAAoBO,SAAS,iBAC1CuE,EAAQ9E,KAAK,oBAAoB+E,QAAQ,uEAAyE/E,KAAK,KAAK3C,QAM9HuH,wBAAyB,SAAiCE,GACxDA,EAAQ9E,KAAK,oBAAoBQ,YAAY,iBAC7CsE,EAAQ9E,KAAK,6BAA6BgF,SAC1CF,EAAQ9E,KAAK,KAAKyD,QAMpBF,iCAAkC,WAChC,IACI0B,EADOpI,KACcqD,IAAI,SAAU,CAAEL,KAAM,aAAc3B,KAAM,CAAEgH,OAAO,KAAW,GAD5ErI,KAENwF,mBAAmB,CAAEnE,KAAM,CAAE+G,cAAeA,MAQnDpC,aAAc,SAAsB7E,EAAImH,GACtC,IAAIlH,EAAOpB,KACPsB,EAAWF,EAAKG,aAEhBuE,EADW1E,EAAKhB,YAAY,YACTQ,OAAO,CAAE2H,QAASnH,EAAKoH,UAAY,CACxDC,aAAc,SAAsBC,GAClC,OAAOA,KAGP3H,EAAE,oBAAqBuH,GAASK,QAClC5H,EAAE,oBAAqBuH,GAASH,SAGlCG,EAAQpD,OAAOY,GACfA,EAAQc,KAAK,QAAQ,WACnBd,EAAQ8C,OAAM,SAAUC,GACtBA,EAAEC,qBAEJ/H,EAAEgI,UAAUC,IAAI,SAAS,WACvBlD,EAAQtF,KAAK,QACbsF,EAAQqC,eAKZ7G,EAAS6B,KAAK,mBAAmBR,GAAG,SAAS,SAAUxB,GACrD,IAAI8B,EAAOlC,EAAEI,EAAG8H,eAAehG,OAC3BiD,EAAgB9E,EAAKoH,SAASvF,EAAKiG,OACvC5H,EAAS6B,KAAK,eAAeQ,YAAY,YAErCvC,EAAK8E,eAAiBA,IACxB9E,EAAK8E,cAAgBA,EACrBnF,EAAE,oBAAqBuH,GAASlF,KAAKhC,EAAK8E,cAAciD,QAAQC,MAAM,KAAKC,OAC3EjI,EAAKiC,IAAI,SAAU,CAAEL,KAAM,cAAe3B,KAAM,CAC5CiF,WAAY,CACVC,MAAOL,EAAcC,UACrBK,UAAWpF,EAAKiF,UAChBI,WAAY,YAIpBX,EAAQtF,KAAK,YAIjByF,gBAAiB,SAAyB9E,EAAImH,GAC5C,IAAIlH,EAAOpB,KACPsB,EAAWF,EAAKG,aAEhBuE,EADW1E,EAAKhB,YAAY,eACTQ,OAAO,IAE1BG,EAAE,4BAA6BuH,GAASK,QAC1C5H,EAAE,4BAA6BuH,GAASH,SAG1CG,EAAQpD,OAAOY,GACfA,EAAQc,KAAK,QAAQ,WACnBd,EAAQ8C,OAAM,SAAUC,GACtBA,EAAEC,qBAEJ/H,EAAEgI,UAAUC,IAAI,SAAS,WACvBlD,EAAQtF,KAAK,QACbsF,EAAQqC,eAKZ7G,EAAS6B,KAAK,2BAA2BR,GAAG,SAAS,SAAUxB,GAC7DC,EAAKkI,YAAclI,EAAKkI,YAAclI,EAAKkI,YAAc,GACzD,IAAIC,EAAWC,OAAOjK,OAAOkK,KAAKC,KAAK1J,KAAK2J,cAC5CxJ,EAAYZ,OAAO6E,SAASwF,IAAI,uCAChCC,EAAa1J,EAAUyB,YAAczB,EAAUyB,YAAc,EAC7DqC,EAAU9D,EAAUyD,iBAAiB2F,EAAUnI,EAAKkI,YAAaO,GACjE9I,EAAE,4BAA6BuH,GAASlF,KAAKmG,GAC7CnI,EAAKiC,IAAI,SAAU,CACjBL,KAAM,cACN3B,KAAM,CACJkI,SAAUA,EACV9G,KAAMwB,KAGV7C,EAAKkI,YAAcC,EACnBzD,EAAQtF,KAAK,YASjB4E,iCAAkC,SAA0CyD,EAAG9I,GAClEC,KAEN0F,kBAAmB,EAFb1F,KAGN2F,oBAAmB,GAHb3F,KAKN8J,uBALM9J,KAMNoG,gBAAgBrF,EAAE,cANZf,KAMgCM,SAAU,QAN1CN,KAOND,OAASA,EAAOsB,KAPVrB,KAQNkG,cAAgB,GARVlG,KAUN+J,iBAAiBlB,EAAG9I,IAM3BgK,iBAAkB,SAA0B5I,EAAIpB,GAC9C,IAAIqB,EAAOpB,KACXsB,EAAWF,EAAKG,aAChBF,EAAOtB,EAAOsB,KACdc,EAASd,EAAKc,OACd6H,EAAmB1I,EAAS6B,KAAK,6BACjC/B,EAAK6I,qBAAuB5I,EAAKe,UACjC4H,EAAiBE,WAAW/B,SAC5BpH,EAAE,2BAA4BO,GAAU6G,SACxC/G,EAAK+I,gBAAiB,EAClB9I,EAAKe,WAAoC,WAAvBf,EAAKZ,eACzBuJ,EAAiBI,aAAa,CAAEC,MAAO,EAAGC,SAAS,IACnDlJ,EAAKtB,YAAYyK,oBAAoBxK,GAAQyK,MAAK,SAAUvH,GACtD7B,EAAK6I,uBAAyBhH,EAAKwH,sBACjB,IAATxH,GAAwByH,OAAOC,oBAAoB1H,GAAM0F,OAAS,GAAK1F,EAAK2H,YAAc3H,EAAK4H,IACxGzJ,EAAK0J,aAAad,EAAkB/G,MAGvC6E,QAAO,WACRkC,EAAiBe,iBAGjB5I,GACFf,EAAK0J,aAAad,EAAkB7H,IAOxC2I,aAAc,SAAsBd,EAAkB7H,GACpD,IAAIf,EAAOpB,KAEXgL,EADW5J,EAAKhB,YAAY,aACNQ,OAAO,CAAEuB,OAAQA,IAEvC6H,EAAiBjI,QACjBiJ,EAAWnJ,SAASmI,GACpB5I,EAAK+I,gBAAiB,EACtBa,EAAWrI,GAAG,SAAS,WAAavB,EAAK6J,eAAe9I,OAM1D8I,eAAgB,SAAwB9I,GACtC,IAAIf,EAAOpB,KAEXe,EAAE4G,KAAKvG,EAAKtB,YAAYoL,WAAW,CACjCN,WAAYzI,EAAOyI,WACnBO,mBAAoB/J,EAAKmD,mBAAmB6G,WAAW,IACvDC,aAA8B,YAAhBlJ,EAAOa,KAAqBb,EAAOkJ,aAAe,GAChEC,aAAcnJ,EAAOsI,gBACrBc,eAAgBpJ,EAAO1B,iBACzB+J,MAAK,SAAUgB,GACO,YAAhBrJ,EAAOa,KACT5B,EAAKqK,iBAAiBtJ,EAAQqJ,GAG9BpK,EAAKsK,cAAcvJ,EAAQqJ,OAQjCzF,eAAgB,SAAwB5E,GACtC,IAEIwK,EADU5K,EAAEI,EAAG2B,QACK8I,GAAG,YACvBxD,EAHOpI,KAGcqD,IAAI,SAAU,CAAEL,KAAM,aAAc3B,KAAM,CAAEgH,MAAOsD,KAAe,GAHhF3L,KAKNwF,mBAAmB,CAAEnE,KAAM,CAAE+G,cAAeA,MAMnD5C,mBAAoB,SAA4BzF,GAC9C,IACIsB,EAAOtB,EAAOsB,KACdwK,EAFO7L,KAEmB6H,mBAAqBxG,EAAK+G,cACpDxD,EAHO5E,KAGQ4F,aAAaiG,EAAmBjH,UAC/CA,EAAQ+D,OAAS,GAJV3I,KAIoBmK,iBAC7BpJ,EALSf,KAKFuB,cAAcqF,OALZ5G,KAON8L,iBAAiBlH,EAASiH,EAAoB,oBAEf7D,IAAhC6D,EAAmBE,UATZ/L,KAUJgF,UAAUgH,KAAK,UAAWH,EAAmBE,WAUtDD,iBAAkB,SAA0BlH,EAASiH,EAAoBI,GACvE,IAAI7K,EAAOpB,KACPsB,EAAWF,EAAKG,aAChBb,EAAWU,EAAKhB,YAAY,WAEhCgB,EAAK2F,kBAAkB2D,OAAOwB,KAAKL,EAAmBM,eAAexD,QAErE,IAAIyD,EAAcxH,EAAQyH,MAAM,EAAG,MAE/BC,EAAW5L,EAASE,OAAO,CAAEgE,QAASA,EAAQyH,MAAM,EAAG,GAAID,YAAaA,EAAaH,YAAaA,IAEtGlL,EAAE,+BAAgCK,EAAKd,SAASiM,IAAI,QAASxL,EAAEC,MAAMI,EAAKiG,mBAAoBjG,IAE9FL,EAAE,2BAA4BO,GAAU6G,SACxCpH,EAAE,8BAA+BO,GAAU4D,OAAOoH,GAElDvL,EAAE,+BAAgCK,EAAKd,SAASqC,GAAG,QAAS5B,EAAEC,MAAMI,EAAKiG,mBAAoBjG,IAEzFgL,EAAYzD,OAAS,IACnBvH,EAAKd,QAAQ2C,KAAK,eACpBlC,EAAEK,EAAKd,SAASwF,QAAQ,WAG1B/E,EAAEK,EAAKd,SAASwF,QAAQ,CACtB0G,aAAc,+BACdC,MAAO,uBACPnM,QAASS,EAAE,wBAAyBK,EAAKd,SAASoM,OAClDC,KAAM,SAAcrK,EAAOsK,GAEzB7L,EAAE,+BAAgC6L,EAAG9G,SAASnD,GAAG,QAAS5B,EAAEC,MAAMI,EAAKiG,mBAAoBjG,IAE3F,IAAIyL,EAAY9L,EAAE,kBAElB,QAAmC,IAAxBuB,EAAMwK,cAGf,OADAD,EAAU1E,UACH,EAET,IAAI4E,EAAMhM,EAAE6L,EAAG9G,SAASkH,KAAK,MAK7B,IAAK,IAAIC,KAHTJ,EAAUK,IAAI,IAAMH,GAAK5E,SAGC/G,EAAKqG,6BAC7B,GAAIrG,EAAKqG,6BAA6BwF,GAAgB,CACpD,IAAIE,EAAgBpM,EAAE,iBAAmBkM,EAAgB,KAAML,EAAG9G,SAClE1E,EAAKsG,uBAAuByF,GAIhCpM,EAAE,qBAAqBqM,OAAM,WAC3BrM,EAAE,yCAAyC,GAAGqM,QAC9CrM,EAAE,gDAAgD,GAAGqM,WAEvDrM,EAAE,qBAAqBqM,OAAM,WAC3BrM,EAAE,yCAAyC,GAAGqM,QAC9CrM,EAAE,uCAAuC,GAAGqM,WAE9CrM,EAAE,KAAM6L,EAAG9G,SAAS,GAAGsH,SAGzBC,MAAO,SAAe/K,EAAOsK,GAE3BA,EAAG9G,QAAQwH,OAAM,WAEfvM,EAAEf,MAAMuN,MAAK,GAAMC,OAAO,IAAK,MAEjC,WAEEzM,EAAEf,MAAMyN,QAAQ,OAAO,WAErB1M,EAAE,+BAAgCf,MAAMuM,IAAI,QAASxL,EAAEC,MAAMI,EAAKiG,mBAAoBjG,IACtFL,EAAEf,MAAMmI,oBAapB9C,mBAAoB,SAA4BlE,EAAIpB,GAClD,IACI2N,EAAwB3N,EAAOsB,KAAKqM,sBACpCjM,EAAe1B,EAAOsB,KAAKI,aAG/B,GALWzB,KAGNwI,SAAWzI,EAAOsB,KAAKsM,iBAAmB5N,EAAOsB,KAAKkH,QAHhDvI,KAG+DwI,SAEtEzI,EAAOsB,KAAKsM,iBAAkB,CAEhC,IADA,IAAWC,EAAPC,GAAK,EAAIC,EAAgB,EAAEC,EAAc,EACtCH,EAPE5N,KAOOwI,WAAWqF,IACX,QAAVD,EAAE5K,MAA6B,SAAX4K,EAAE5K,MAAmB4K,EAAE3K,OAAS2K,EAAE3K,KAAK+K,eAAiBJ,EAAE3K,KAAK+K,cAAcrF,OAAS,GAAKiF,EAAE3K,KAAKgL,KAAOL,EAAE3K,KAAKiL,MACtIJ,IAEgB,KAAdF,EAAEzE,SACJ4E,IAIAtM,EAAe,GAEbqM,EAAgB,EAlBb9N,KAmBAmO,mBAnBAnO,KAsBAoO,mBAGHL,EAAc,EAzBX/N,KA0BAqO,kBA1BArO,KA6BAuF,mBAK0B,IAA1BmI,IAlCA1N,KAmCAoO,mBAnCApO,KAoCAuF,mBApCAvF,KAuCNsO,cAAcZ,IAMrBS,iBAAkB,WAEhBpN,EAAE,eADSf,KACYuB,cAAcqF,QAMvCwH,iBAAkB,WAEhBrN,EAAE,eADSf,KACYuB,cAAcf,OAD1BR,KAEN0F,kBAAmB,GAM1B2I,gBAAiB,WAEftN,EAAE,gBADSf,KACauB,cAAcqF,OACtC7F,EAAE,gBAFSf,KAEauB,cAAcqF,OACtC7F,EAAE,cAHSf,KAGWuB,cAAcqF,OAHzB5G,KAKNuO,gBAAiB,EALXvO,KAMN0F,kBAAmB,GAM1BH,gBAAiB,WACf,IACIiJ,EAAezN,EAAE,cADVf,KAC8BuB,cAGzCR,EAAE,gBAJSf,KAIauB,cAAcf,OAEtCgO,EAAa9K,SAAS,YACtB8K,EAAa7K,YAAY,mCACzB6K,EAAa7K,YAAY,oCACzB6K,EAAa9K,SAAS,mCACtB8K,EAAahO,OAVFR,KAYNuO,gBAAiB,GAMxBzE,qBAAsB,WAEpB/I,EAAE,oBADSf,KACiBuB,cAAc6B,KAD/BpD,KACyCkH,YAAY,mCAOlEzB,6BAA8B,SAAsC1F,GAE9DA,EAAOsB,KAAKoN,gBADLzO,KAEJsO,cAAcvO,EAAOsB,KAAKoN,eAAe9F,SAQlD2F,cAAe,SAAuBI,GACpC,IACApN,EADWtB,KACKuB,aAChBoN,EAAW5N,EAAE,2BAA4BO,GAErCoN,EAAU,GACZC,EAASjC,KAAKgC,GACdC,EAAS/H,QAGT+H,EAASnO,QAOb8E,uBAAwB,WACXtF,KACN4O,eAAgB,EACrB7N,EAAE,eAFSf,KAEYuB,cAAcf,OAF1BR,KAGNqD,IAAI,SAAU,CAAEL,KAAM,uBAAwB3B,KAAM,CAAEuF,MAAQ,EAAO/D,QAAW,SAMvF4I,iBAAkB,SAA0BtJ,EAAQqJ,GAClD,IAAIpK,EAAOpB,KAEPmC,EAAO0M,YACT1M,EAAO2M,aAAe3M,EAAO0M,WAG/B9N,EAAE4G,KAAKvG,EAAKkD,qBAAqByK,qBAAqB,CACpD5M,OAAQA,EACRqJ,YAAaA,KACfhB,MAAK,SAAUzK,IACTA,EAASA,GAAU,MAEwB,IAA/BA,EAAOiP,qBACrB5N,EAAK6N,iBAAiB9M,OAS5B8M,iBAAkB,SAA0B9M,GAC/BnC,KACNqD,IAAI,SAAU,CAAEL,KAAM,sBAAuB3B,KAAM,CAAEc,OAAQA,EAAQ+M,WAAW,MAMvFxD,cAAe,SAAuBvJ,EAAQqJ,GAC5C,IAAIpK,EAAOpB,KAEXe,EAAE4G,KAAKvG,EAAKkD,qBAAqB6K,kBAAkB,CACjDhN,OAAQA,EACRqJ,YAAaA,KACfhB,MAAK,SAAUvH,GACTA,EAAKmM,SACPhO,EAAKiC,IAAI,SAAU,CAAEL,KAAM,2BAA4B3B,KAAM,CAAEc,OAAQA,EAAQ+M,WAAW,EAAMvB,kBAAkB,SAQxHnG,UAAW,SAAmBD,GAE5B,OADWvH,KACC6H,mBAAmBjD,QAAQyK,QAAO,SAAUlN,GACtD,OAAOA,EAAO0I,IAAMtD,KACnB,IAQL3B,aAAc,SAAsBhB,GAClC,OAAO7D,EAAEuO,KAAK1K,GAAS,SAAUzC,GAC/B,OAA2B,GAAvBA,EAAOoN,cACQ,cAAfpN,EAAOqN,OACQ,QAAfrN,EAAOa,QACPb,EAAOsN,UACQ,WAAftN,EAAOa,OAAqBb,EAAO2M,oBAQ3C7M,MAAO,WACL,IACAX,EADWtB,KACKuB,aADLvB,KAENyH,6BAA+B,GAEhCnG,IAJOtB,KAKJ0P,MAAM,uBALF1P,KAMJ0P,MAAM,yBANF1P,KAOJ0P,MAAM,sBAPF1P,KAQJ0P,MAAM,oBARF1P,KASJ0P,MAAM,4BATF1P,KAUJ0P,MAAM,qBAVF1P,KAYJgF,UAAUuH,IAAI,SACnBjL,EAAS6B,KAAK,eAAeoJ,IAAI,SACjCjL,EAAS6B,KAAK,eAAeoJ,IAAI,SACjCjL,EAAS6B,KAAK,gBAAgBoJ,IAAI,SAClCjL,EAAS6B,KAAK,mBAAmBoJ,IAAI,SACrCxL,EAAE,+BAAgCO,GAAUiL,IAAI,QAASxL,EAAEC,MAjBlDhB,KAiB6DqH,mBAjB7DrH,OAkBTe,EAAE,qCAAsCO,GAAUiL,IAAI,QAASxL,EAAEC,MAlBxDhB,KAkBmE0G,iCAlBnE1G,WAwBfT,OAAO6E,SAASC,SAAS,oCAAqC,CAAC,mBAAoB,cAAe,uBAAwB,qBAAsB9E,OAAOC,WAAWC,QAAQ+E,UCrwB1KjF,OAAOC,WAAWC,QAAQC,OAAOC,OAAO,2CAA4C,CASlFC,KAAM,SAAcC,EAAkBC,EAAawE,EAAsBvE,GACvE,IAAIqB,EAAOpB,KACXoB,EAAKrB,OAAS,GACdqB,EAAKnB,OAAOJ,EAAkBC,EAAaC,GAC3CqB,EAAKlB,cAAc,CACjByP,eAAkBpQ,OAAOa,YAAY,mDAAmDC,OAAO,2BAC/FuP,sBAAuBrQ,OAAOa,YAAY,mDAAmDC,OAAO,0BACtGmK,MAAK,WACHpJ,EAAKyO,WAAazO,EAAKhB,YAAY,0BAGrCgB,EAAKkD,qBAAuBA,EAC5BlD,EAAKqN,eAAiB,GACtBrN,EAAKmH,QAAU,IAOjBhI,cAAe,WAIb,OAHWP,KACNM,QADMN,KACSI,YAAY,kBAAkBQ,OAAO,IAD9CZ,KAENM,QAAQE,OAFFR,KAGCM,SAMdO,WAAY,WACCb,KACNkB,qBAQP4O,yBAA0B,SAAkCjH,EAAG9I,GAC7D,IACAuB,EADWtB,KACKuB,aADLvB,KAGN+P,sBAAwBhQ,EAAOsB,KAAKkH,QAAUhJ,OAAOyQ,MAAMjQ,EAAOsB,KAAKkH,SAAW,GAH5EvI,KAINyO,eAAiB,GAJXzO,KAKNiQ,mBAAqB,GALfjQ,KAMNkQ,QAAU,GACfnP,EAAE,uBAAwBO,GAAUS,SAMtCb,kBAAmB,WACNlB,KACNc,IAAI,sBAAuBC,EAAEC,MADvBhB,KACkC8P,yBADlC9P,OAAAA,KAENc,IAAI,qBAAsBC,EAAEC,MAFtBhB,KAEiC8P,yBAFjC9P,OAAAA,KAGNc,IAAI,2BAA4BC,EAAEC,MAH5BhB,KAGuCmQ,aAHvCnQ,OAAAA,KAINc,IAAI,uBAAwBC,EAAEC,MAJxBhB,KAImCoQ,gBAJnCpQ,OAAAA,KAKNc,IAAI,mBAAoBC,EAAEC,MALpBhB,KAK+BqQ,eAL/BrQ,OAAAA,KAMNc,IAAI,cAAeC,EAAEC,MANfhB,KAM0BsQ,WAN1BtQ,OAAAA,KAONc,IAAI,cAAeC,EAAEC,MAPfhB,KAO0BuQ,kBAP1BvQ,QAebqQ,eAAgB,SAAwBlP,EAAIpB,GAG1C,GAAIA,EAAOsB,KAAKmP,qBAAsB,CACpCzQ,EAAOsB,KAAKoN,eAAiB1O,EAAOsB,KAAKoN,gBAAkB,GAC3D,IAAIgC,EAA+B1Q,EAAOsB,KAAKoN,eAAeY,QAAO,SAAUA,GAC7E,YAAoC,IAAtBA,EAAO/I,cALdtG,KAOJyO,eAAiBgC,EAGxB,GAAI1Q,EAAOsB,KAAKsM,iBAAkB,CAOhC,IANA,IAAIrM,EAXKtB,KAWWuB,aAChBmP,EAAe3P,EAAE,uBAAwBO,GACzCiH,EAAUxI,EAAOsB,KAAKkH,QACtBmF,EAAwB3N,EAAOsB,KAAKqM,sBAEpCG,GAAK,EAAIa,EAAU,EAChBd,EAAIrF,IAAUsF,IACnB,GAAc,QAAVD,EAAE5K,MAA6B,SAAX4K,EAAE5K,MAAmB4K,EAAE3K,OAAS2K,EAAE3K,KAAK+K,eAAiBJ,EAAE3K,KAAK+K,cAAcrF,OAAS,GAAKiF,EAAE3K,KAAKgL,KAAOL,EAAE3K,KAAKiL,KAAM,CAC5IQ,IACA,MAgBJ,GAXiC,IAA7B3O,EAAOsB,KAAKI,cAAgD,IAA1BiM,EAzB7B1N,KA0BFoQ,gBAAgB,CAAExJ,MAAM,IAEf,IAAZ8H,EA5BK1O,KA6BFoQ,gBAAgB,CAAExJ,MAAM,IA7BtB5G,KAgCFoQ,gBAAgB,CAAExJ,MAAM,IAhCtB5G,KAoCAiQ,oBAAyD,IApCzDjQ,KAoC2BiQ,mBAAmBtH,OAGrD,IAFIkF,GAAK,EAEFD,EAAIrF,IAAUsF,IAAI,CACvBD,EAAU,OAAIA,EAAEzH,UAAUwK,WAAW,IAAK,KAxCrC3Q,KA0CyByO,eAAeY,QAAO,SAAUuB,GAC5D,OAAOA,EAActK,WAAWtD,OAAS4K,EAAE5K,KAAK6N,eAAiBD,EAActK,WAAWC,QAAUqH,EAAEkD,UAGjFnI,OAAS,EAC9BiF,EAAEmD,cAAgB,iBAGlBnD,EAAEmD,cAAgB,GAEpB,IAAIlB,EApDC7P,KAoDiB6P,WAAWjP,OAAOgN,GAEzB,SAAXA,EAAE5K,MAA8B,SAAX4K,EAAE5K,MAAmB4K,EAAE3K,OAAS2K,EAAE3K,KAAK+K,eAAiBJ,EAAE3K,KAAK+K,cAAcrF,OAAS,GAAKiF,EAAE3K,KAAKgL,KAAOL,EAAE3K,KAAKiL,OACvIwC,EAAaxL,OAAO2K,GAvDjB7P,KAwDEgR,YAAYnB,EAAYjC,GACL,mBAApBA,EAAEmD,eACJhQ,EAAE,iBAAkB8O,GAAYjJ,aAKxC,GA/DS5G,KA+DAiQ,oBA/DAjQ,KA+D2BiQ,mBAAmBtH,OAAS,EAC9D,CAAA,IAAWiF,EACX,IADIC,GAAK,EACFD,EAjEA5N,KAiESiQ,qBAAqBpC,IAAI,CACvC,IAAIwB,EAAS9G,EAAQpF,MAAK,SAAU8N,GAClC,OAAOA,EAAG9K,YAAcyH,EAAErH,SAExB8I,GArECrP,KAsEEkR,cAActD,EAAGyB,KAK9BtO,EAAE,mBA3ESf,KA2EgBM,SAASE,QAQtC2P,aAAc,SAAsBtH,EAAG9I,GACrC,IAEIoR,EAFOnR,KACSuB,aACEqK,GAAG,YAFd5L,KAINoQ,gBAAgB,CAAExJ,MAAOuK,EAAQtO,QAAS9C,EAAOsB,KAAKyB,UAO7DsN,gBAAiB,SAAyBrQ,GACxC,IACAuB,EADWtB,KACKuB,aAChBsB,EAAU9C,EAAO8C,SAAW9B,EAAE,SAE1BhB,EAAO6G,MACT/D,EAAQa,SAAS,UACjBpC,EAASsF,SAGT/D,EAAQc,YAAY,UACpBrC,EAASd,OACTO,EAAE,kCAAkC6H,UASxCoI,YAAa,SAAqBI,EAAU/B,GAE1C,OAAQA,EAAOrM,MACb,IAAK,SAFIhD,KAGFqR,oBAAoBD,EAAU/B,GACnC,MACF,IAAK,SALIrP,KAMFsR,kBAAkBF,EAAU/B,GACjC,MACF,IAAK,QARIrP,KASFuR,iBAAiBH,EAAU/B,GAChC,MACF,IAAK,WAXIrP,KAYFwR,gBAAgBJ,EAAU/B,GAC/B,MAIF,IAAK,UAjBIrP,KAkBFyR,mBAAmBL,EAAU/B,KAWxC6B,cAAe,SAAuB7B,EAAQqC,GAC5C,IAAIC,EAAmC,QAAvBD,EAAWE,QAC3B,OAAQvC,EAAOrM,MACb,IAAK,SACHqM,EAAO3P,OAAOmS,sBAAsB,UAAWH,EAAWzO,MAC1D,MACF,IAAK,SACH0O,EAAYtC,EAAO3P,OAAOoS,qBAAqB,UAAWJ,EAAWzO,MAAQoM,EAAO3P,OAAOqS,oBAAoB,UAAWL,EAAWzO,MACrI,MACF,IAAK,QACHoM,EAAO3P,OAAOsS,mBAAmB,UAAWN,EAAWzO,MACvD,MACF,IAAK,WACHoM,EAAO3P,OAAOuS,kBAAkB,UAAWP,EAAWzO,MACtD,MACF,IAAK,UACHoM,EAAO3P,OAAOwS,qBAAqB,UAAWR,EAAWzO,QAW/DsO,iBAAkB,SAA0BH,EAAU/B,GACpD,IAAIjO,EAAOpB,KAEPmS,EAAcf,EAASY,mBAAmB,CAC5CI,uBAAuB,EACvBC,cAAejR,EAAK8F,YAAY,iBAChCZ,WAAY+I,EACZpM,KAAMoM,EAAOpM,KACbqP,QAAS,SAAiBrP,EAAMsP,GAC9BnR,EAAKoR,mBAAmBvP,GACxB7B,EAAKqR,cAAc,CAAE9E,kBAAkB,KAEzC+E,QAAS,SAAiBnM,GACxBnF,EAAKuR,oBAAoBpM,GACzBnF,EAAKqR,cAAc,CAAE9E,kBAAkB,KAEzCzG,YAAa,SAAqB0L,GAChC,OAAOrT,OAAOsT,aAAa3L,YAAY0L,MAI3CxR,EAAK6O,mBAAmB6C,KAAK,CAAE9P,KAAMqM,EAAOrM,KAAMuD,MAAO8I,EAAOlJ,UAAWzG,OAAQyS,KAQrFb,kBAAmB,SAA2BF,EAAU/B,GACtD,IAAIjO,EAAOpB,KACP2R,EAA+B,QAAnBtC,EAAOuC,QACnB7R,EAAS,CACXqS,uBAAuB,EACvBC,cAAejR,EAAK8F,YAAY,iBAChCZ,WAAY+I,EACZpM,KAAMoM,EAAOpM,KACbqP,QAAS,SAAiBrP,EAAMsP,GACV,IAAhBtP,EAAK0F,SACPvH,EAAKoR,mBAAmBvP,GACxB7B,EAAKqR,cAAc,CAAE9E,kBAAkB,MAG3C+E,QAAS,SAAiBnM,GACxBnF,EAAKuR,oBAAoBpM,GACzBnF,EAAKqR,cAAc,CAAE9E,kBAAkB,KAEzCzG,YAAa,SAAqB0L,GAChC,OAAOrT,OAAOsT,aAAa3L,YAAY0L,KAGvCG,EAAepB,EAAYP,EAASU,qBAAqB/R,GAAUqR,EAASW,oBAAoBhS,GAEpGqB,EAAK6O,mBAAmB6C,KAAK,CAAE9P,KAAMqM,EAAOrM,KAAMuD,MAAO8I,EAAOlJ,UAAWzG,OAAQqT,KAQrFvB,gBAAiB,SAAyBJ,EAAU/B,GAClD,IAAIjO,EAAOpB,KACPgT,EAAa5B,EAASa,kBAAkB,CAC1CG,uBAAuB,EACvB9L,WAAY+I,EACZiD,QAAS,SAAiBrP,EAAMsP,GAC9BnR,EAAKoR,mBAAmBvP,GACxB7B,EAAKqR,cAAc,CAAE9E,kBAAkB,KAEzC+E,QAAS,SAAiBO,GACxB7R,EAAKuR,oBAAoBM,GACzB7R,EAAKqR,cAAc,CAAE9E,kBAAkB,KAEzCzG,YAAa,SAAqB0L,GAChC,OAAOxR,EAAK8F,YAAY0L,MAI5BxR,EAAK6O,mBAAmB6C,KAAK,CAAE9P,KAAMqM,EAAOrM,KAAMuD,MAAO8I,EAAOlJ,UAAWzG,OAAQsT,KAQrF3B,oBAAqB,SAA6BD,EAAU/B,GAC1D,IAAIjO,EAAOpB,KACPkT,EAAiB9B,EAASS,sBAAsB,CAClDO,uBAAuB,EACvB9L,WAAY+I,EACZpM,KAAMoM,EAAOpM,KACbqP,QAAS,SAAiBrP,EAAMsP,GAC9BnR,EAAKoR,mBAAmBvP,GACxB7B,EAAKqR,cAAc,CAAE9E,kBAAkB,KAEzC+E,QAAS,SAAiBnM,GACxBnF,EAAKuR,oBAAoBpM,GACzBnF,EAAKqR,cAAc,CAAE9E,kBAAkB,KAEzCzG,YAAa,SAAqB0L,GAChC,OAAOrT,OAAOsT,aAAa3L,YAAY0L,MAI3CxR,EAAK6O,mBAAmB6C,KAAK,CAAE9P,KAAMqM,EAAOrM,KAAMuD,MAAO8I,EAAOlJ,UAAWzG,OAAQwT,KAQrFzB,mBAAoB,SAA4BL,EAAU/B,GACxD,IAAIjO,EAAOpB,KACPmT,EAAgB/B,EAASc,qBAAqB,CAChDE,uBAAuB,EACvB9L,WAAY+I,EACZpM,KAAMoM,EAAOpM,KACbqP,QAAS,SAAiBrP,EAAMsP,GAC9BnR,EAAKoR,mBAAmBvP,GACxB7B,EAAKqR,cAAc,CAAE9E,kBAAkB,KAEzC+E,QAAS,SAAiBnM,GACxBnF,EAAKuR,oBAAoBpM,GACzBnF,EAAKqR,cAAc,CAAE9E,kBAAkB,KAEzCzG,YAAa,SAAqB0L,GAChC,OAAOrT,OAAOsT,aAAa3L,YAAY0L,MAI3CxR,EAAK6O,mBAAmB6C,KAAK,CAAE9P,KAAMqM,EAAOrM,KAAMuD,MAAO8I,EAAOlJ,UAAWzG,OAAQyT,KAOrFX,mBAAoB,SAA4BvP,GAE9ClC,EAAE,mBADSf,KACgBM,SAASsG,OACpC,IAAK,IAAIiH,EAAI,EAAGuF,EAAMnQ,EAAK0F,OAAQkF,EAAIuF,EAAKvF,IAFjC7N,KAGJ2S,oBAAoB,CAAC1P,EAAK4K,GAAGvH,WAAWC,QAHpCvG,KAIJyO,eAAeqE,KAAK7P,EAAK4K,KAQlC8E,oBAAqB,SAA6BM,GAGhDlS,EAAE,mBAFSf,KAEgBM,SAASsG,OAGpC,IADA,IAAWgH,EAAPC,GAAK,EACFD,EAAIqF,IAASpF,IAAI,CACtB,IAAIwB,EANKrP,KAMSyO,eAAetL,MAAK,SAAU8N,GAC9C,OAAOA,EAAG3K,WAAWC,QAAUqH,KAE7ByB,GATKrP,KAUFyO,eAAe4E,OAVbrT,KAUyByO,eAAe6E,QAAQjE,GAAS,KAUtEiB,WAAY,SAAoBnP,EAAIpB,GACvBC,KACNkQ,QAAUnQ,EAAOsB,KADXrB,KAENyS,cAAc,CAAE9E,kBAAkB,KAGzC4C,kBAAmB,SAA2BpP,EAAIpB,GACrCC,KACNyS,cAAc,CAAE9E,kBAAkB,EAAOlL,KAAM1C,EAAOsB,KAAKoB,KAAM8G,SAAUxJ,EAAOsB,MAAQtB,EAAOsB,KAAKkI,YAO7GkJ,cAAe,SAAuB1S,GAOpC,IANA,IAKW6N,EAJP2F,EADOvT,KACc+P,sBAAwBxQ,OAAOyQ,MAD7ChQ,KACwD+P,uBAAyB,GACxFtB,EAFOzO,KAEeyO,eAAepC,QACrCmH,EAAmB,GAEnB3F,GAAK,EACFD,EAAIa,IAAiBZ,IANjB7N,KAOJF,YAAY2T,mBAAmB7F,EAAG2F,GAP9BvT,KAQJF,YAAY2T,mBAAmB7F,EAAG4F,GAGzC,IAAI9F,EAAwB8F,EAAiB7K,OAXlC3I,KAcFkQ,QAAQ5J,YAdNtG,KAeJF,YAAY2T,mBAfRzT,KAegCkQ,QAASqD,GAGhDxT,EAAOwJ,UAlBAvJ,KAoBJ0T,aAAa3T,EAAOwJ,UAG3B,IAAIoK,EAAe,CACjB3Q,KAAM,2BACN3B,KAAM,CACJkH,QAASgL,EACT9Q,KAAM1C,EAAO0C,KACbmR,MAAO,EACPjG,iBAAkB5N,EAAO4N,mBAAoB,EAC7C6C,sBAAsB,EACtB/J,WAAY,SACZiH,sBAAuBA,EACvBnE,SAjCOvJ,KAiCQ6T,gBAAkB,KAjC1B7T,KAqCNqD,IAAI,SAAUsQ,IAMrBD,aAAc,SAAsBnK,GACvBvJ,KACNF,YAAYyJ,SAAWA,GAO9BsK,aAAc,WAEZ,OADW7T,KACCF,YAAYyJ,YAI5BhK,OAAO6E,SAASC,SAAS,2CAA4C,CAAC,mBAAoB,cAAe,uBAAwB9E,OAAOC,WAAWC,QAAQkQ,iBAAiB,GCrf5KpQ,OAAOC,WAAWC,QAAQC,OAAOC,OAAO,6CAA8C,CASpFC,KAAM,SAAcC,EAAkBC,EAAawE,EAAsBvE,GAC5DC,KACND,OAAS,GADHC,KAENC,OAAOJ,EAAkBC,EAAaC,GAFhCC,KAGNE,cAAc,CACjB4T,iBAAoBvU,OAAOa,YAAY,qDAAqDC,OAAO,6BACnG0T,qBAAwBxU,OAAOa,YAAY,qDAAqDC,OAAO,6BAQ3GE,cAAe,WAGb,OAFWP,KACNM,QADMN,KACSI,YAAY,oBAAoBQ,OAAO,IADhDZ,KAECM,SAMdO,WAAY,WACCb,KACNkB,qBAMPA,kBAAmB,WACjB,IAAIE,EAAOpB,KACXoB,EAAKN,IAAI,qBAAsBC,EAAEC,MAAMI,EAAK4S,iBAAkB5S,IAE9DL,EAAE,gCAAiCK,EAAKd,SAASqC,GAAG,QAAS,sCAAsC,WACjGvB,EAAK6S,mBAGPlT,EAAE,gCAAiCK,EAAKd,SAASqC,GAAG,QAAS,mCAAmC,SAAUkG,GACxG,IAAItC,EAAQxF,EAAEf,MAAM6G,QAAQ,8BAA8B5D,KAAK,SAC3DiR,EAAanT,EAAEf,MAAM6G,QAAQ,8BAA8B5D,KAAK,eACpE7B,EAAK+S,aAAa/S,EAAKuR,oBAAoBpM,EAAO2N,IAClDrL,EAAEC,sBASNkL,iBAAkB,SAA0B7S,EAAIpB,GAE9C,QAAiC,IAAtBA,EAAOsB,KAAKuS,MAAuB,CADnC5T,KAEJoU,aAAe7U,OAAOyQ,MAAMjQ,GACjC,IAAIsU,EAHKrU,KAGYoU,aAAa/S,KAAKiT,iBAAmB,GAC1D,GAAID,EAAU1L,OAAS,GAJd3I,KAKEuU,uBAAuBF,GAAY,CAC1C,IAAI3D,EAAe3P,EAAE,gCANhBf,KAMsDM,SACvDkU,EAPCxU,KAOWI,YAAY,wBAAwBQ,OAAO,CAAEyT,UAAaA,IAC1E3D,EAAahE,KAAK8H,MAM1BD,uBAAwB,SAAgCF,GAGtD,IAFA,IAAII,GAAS,EACT5G,EAAI,EACDA,EAAIwG,EAAU1L,OAAQkF,IAC3B,IAAKwG,EAAUxG,GAAG6G,SAAU,CAC1BD,GAAS,EACT,MAGJ,OAAOA,GAQTE,iBAAkB,SAA0BpM,GAI1C,IAHA,IACWqF,EADP2F,EAAgBhU,OAAOyQ,MAAMzH,IAAY,GACzCsF,GAAK,EAEFD,EAAI2F,IAAgB1F,IACrBD,EAAEgH,YAA8B,SAAhBhH,EAAEgH,aACA,QAAhBhH,EAAEsG,WACJtG,EAAEvF,MAAQuF,EAAEvF,MAAM4F,IAGlBL,EAAEvF,MAAQuF,EAAEvF,MAAM6F,KAIxB,OAAOqF,GAMTU,cAAe,WACb,IAAI7S,EAAOpB,KACXD,EAASqB,EAAKgT,aAAa/S,KAEvBwT,EAAgB,CAClBC,WAAYvV,OAAOC,WAAWC,QAAQC,OAAOqV,kCAC7CC,kBAAkB,EAClBC,SAAUlV,EAAOkV,SACjBC,YAAanV,EAAOmV,YACpBtK,WAAY7K,EAAO6K,WACnBuK,uBAAwB/T,EAAKuT,iBAAiB5U,EAAOuU,iBACrDc,cAAc,EACdC,QAAS,CACT,CACEjS,KAAM7D,OAAOsT,aAAa3L,YAAY,0BACtC0B,MAAO,WACL,IAEI0M,EADSvU,EAAEf,MAAMuV,OAAO,SAAU,UACpBD,MAAQ,GAE1B,GAAiC,IAA7B5K,OAAOwB,KAAKoJ,GAAM3M,QAAgB2M,GAAQA,EAAKE,eAAgB,CACjE,IAAIC,EAAe,GACnB1U,EAAE2U,kBAAmB,EACrBJ,EAAKK,oBAAoBF,GACzB1U,EAAE2U,kBAAmB,EAErB,IAAIE,EAAe,GACftB,EAAkB,GAEtB,IAAKuB,QAAQJ,EACX,GAAkC,mBAAvBA,EAAaI,OAA+C,KAAvBJ,EAAaI,MAAc,CACzE,IAAIC,EAAUR,EAAKS,UAAUF,MAC7BzU,EAAKtB,YAAY2T,mBAAmB,CAAEnN,WAAYwP,EAAQxP,WAAY+B,MAAOyN,EAAQzN,OAASuN,GAAc,SAAUvG,GACpHiF,EAAgBxB,KAAK/R,EAAEpB,OAAO0P,EAAQ,CAAExE,GAAIiL,EAAQxP,WAAWuE,GAAIqJ,WAAY4B,EAAQxP,WAAW4N,WAAYzL,aAAcqN,EAAQE,kBAAmBrU,YAAamU,EAAQxP,WAAW3E,kBAK7LP,EAAK+S,aAAapT,EAAEpB,OAAOI,EAAQ,CAAEwI,QAASqN,EAActB,gBAAiBA,KAE7EvT,EAxBSf,MAwBDuV,OAAO,YAIrB,CACEnS,KAAM7D,OAAOsT,aAAa3L,YAAY,sCACtC0B,MAAO,WACL7H,EAAEf,MAAMuV,OAAO,YAInBU,gBAAiB,CACfC,MAAOnW,EAAOmV,cAIlB9T,EAAK+U,QAAQ,mBAAoBtB,GACjCzT,EAAK+U,QAAQ,0BAQfxD,oBAAqB,SAA6BpM,EAAO2N,GACvD,IAAI9S,EAAOpB,KACPD,EAASqB,EAAKgT,aAAa/S,KAe/B,OAbAN,EAAEqV,KAAKrW,EAAOwI,QAAQ8G,QAAO,SAAU4B,GACrC,OAAOA,EAAG1K,OAASA,MACjB,SAAUqM,EAAKyD,GACjBjV,EAAKkV,mBAAmBD,EAAgBtW,EAAOwI,QAAS2L,MAI1DnT,EAAEqV,KAAKrW,EAAOuU,gBAAgBjF,QAAO,SAAU4B,GAC7C,OAAOA,EAAG1K,OAASA,MACjB,SAAUqM,EAAKyD,GACjBjV,EAAKkV,mBAAmBD,EAAgBtW,EAAOuU,gBAAiBJ,MAG3DnU,GASTuW,mBAAoB,SAA4BD,EAAgB9N,EAAS2L,GACrC,UAA9BmC,EAAezB,WACbrV,OAAOkK,KAAK8M,QAAQF,EAAehO,MAAM6F,MAAQ3O,OAAOkK,KAAK8M,QAAQF,EAAehO,MAAM4F,KAC5F1F,EAAQ8K,OAAO9K,EAAQ+K,QAAQ+C,GAAiB,GAG7B,OAAfnC,EACFmC,EAAehO,MAAM6F,IAAM,GAE3BmI,EAAehO,MAAM4F,IAAM,GAI/B1F,EAAQ8K,OAAO9K,EAAQ+K,QAAQ+C,GAAiB,IAQpDlC,aAAc,SAAsBpU,GAClC,IACIyW,EAAa,CACfxT,KAAQ,qBACR3B,KAAQtB,GAGVgB,EAAE4G,KANS3H,KAMCmW,QAAQ,eAAgB,CAClCrB,WAAYvV,OAAOC,WAAWC,QAAQC,OAAO+W,uCAC/CjM,MAAK,WACH,IAAIkM,EAAqBnX,OAAO6E,SAASwF,IAAI,cAC7C7I,EAAE4G,KAAK+O,EAAmBC,WAAWnM,MAAK,WACxCkM,EAAmBrT,IAAI,SAAUmT,YAOzCjX,OAAO6E,SAASC,SAAS,6CAA8C,CAAC,mBAAoB,cAAe,uBAAwB9E,OAAOC,WAAWC,QAAQmX,mBAAmB","sourcesContent":["/**\r\n * Name: Bizagi Workportal Desktop Paginator Controller\r\n * Author: Mauricio Sánchez\r\n */\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.paginator\", {}, {\n  /**\r\n                                                                                      *   Constructor\r\n                                                                                      */\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n    //Load templates\n    self.loadTemplates({\n      \"paginator\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.paginator\").concat(\"#paginator-wrapper\"),\n      \"content\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.paginator\").concat(\"#paginator-content\") });\n\n  },\n\n  /**\r\n      * Renders the template defined in the widget\r\n      */\n  renderContent: function renderContent() {\n    var self = this;\n    var hide = self.params.referenceType === \"ENTITY\";\n    var template = self.getTemplate(\"paginator\" + self.getSuffixWidget());\n    self.content = template.render({ hide: hide });\n\n    return self.content;\n  },\n\n  /**\r\n      * links events with handlers\r\n      */\n  postRender: function postRender() {\n    var self = this;\n\n    self.sub(\"PAGINATOR-UPDATE\", $.proxy(self.updateView, self));\n    self.configureHandlers();\n  },\n\n  /**\r\n      *\r\n      * @returns {string}\r\n      */\n  getSuffixWidget: function getSuffixWidget() {\n    return \"\";\n  },\n\n\n  /**\r\n      * Updates la view with the data related to entity:\r\n      * Name entity\r\n      * Number of records\r\n      * Number of pages\r\n      * */\n  updateView: function updateView(ev, params) {\n    var self = this;\n    var args = params.args;\n    var hide = args.referenceType === \"ENTITY\";\n    var $content = self.getContent();\n\n    self.setModel(args);\n    $content.empty();\n\n    if (args.fromActionLauncher) {\n      if (self.totalRecords > 1) {\n        renderTemplate();\n      } else\n      {\n        self.clean();\n      }\n    } else\n    {\n      renderTemplate();\n    }\n\n    /**\r\n       *\r\n       */\n    function renderTemplate() {\n      var contentTemplate = self.getTemplate(\"content\" + self.getSuffixWidget());\n\n      contentTemplate.render({\n        totalRecords: self.totalRecords,\n        totalPages: self.totalPages,\n        displayName: self.displayName,\n        currentPage: self.currentPage,\n        hide: hide }).\n      appendTo($content);\n    }\n  },\n\n  /**\r\n      * Builds the navigation model\r\n      */\n  setModel: function setModel(args) {\n    var self = this;\n\n    self.totalRecords = typeof args.totalRecords == \"undefined\" ? self.totalRecords : args.totalRecords;\n    self.totalPages = args.totalPages || self.totalPages;\n    self.displayName = args.histName || self.displayName;\n    self.currentPage = args.currentPage || self.currentPage;\n    self.action = args.action;\n    self.reference = args.reference || self.reference;\n    self.surrogateKey = args.surrogateKey || self.surrogateKey;\n    self.referenceType = args.referenceType;\n    self.event = args.event;\n    self.guidSearch = args.guidSearch;\n  },\n\n  /**\r\n      *  Gets the current model\r\n      */\n  getModel: function getModel() {\n    var self = this;\n\n    return {\n      page: self.currentPage,\n      totalRecords: self.totalRecords,\n      action: self.action,\n      reference: self.reference,\n      surrogateKey: self.surrogateKey,\n      referenceType: self.referenceType,\n      stopNavigation: true,\n      guidSearch: self.guidSearch };\n\n  },\n\n  /**\r\n      *  Binds events to handles\r\n      */\n  configureHandlers: function configureHandlers() {\n    var self = this,\n    $content = self.getContent();\n\n    $content.on(\"click\", $.proxy(self.onPageBreak, self));\n  },\n\n  /**\r\n      * This event get a new page\r\n      */\n  onPageBreak: function onPageBreak(ev) {\n    var self = this,\n    $target = $(ev.target),\n    $content = self.getContent();\n\n    if ($target.hasClass(\"control-icon\") && !$target.hasClass(\"ui-state-disabled\")) {\n      var type = $target.data(\"type\");\n\n      if (type == \"forward\") {\n        self.currentPage += 1;\n      } else\n      if (type == \"rewind\") {\n        self.currentPage -= 1;\n      } else\n      if (type == \"fastrewind\") {\n        self.currentPage = 1;\n      } else\n      {\n        self.currentPage = self.totalPages;\n      }\n\n      self.disabledPaginatorButtonsByLimits();\n      $content.find(\".paginator-controls__currentPage\").text(self.currentPage);\n\n      self.pub(\"notify\", { type: \"UPDATE-DATATEMPLATE-VIEW\", args: self.getModel() });\n    }\n  },\n\n  disabledPaginatorButtonsByLimits: function disabledPaginatorButtonsByLimits() {\n    var self = this;\n    var $buttonFastRewind = $(\"[data-type='fastrewind']\", self.content);\n    var $buttonRewind = $(\"[data-type='rewind']\", self.content);\n    var $buttonFordward = $(\"[data-type='forward']\", self.content);\n    var $buttonFastFordward = $(\"[data-type='fastforward']\", self.content);\n\n    if (self.totalPages === 1) {\n      $buttonFastRewind.addClass(\"ui-state-disabled\");\n      $buttonRewind.addClass(\"ui-state-disabled\");\n      $buttonFordward.addClass(\"ui-state-disabled\");\n      $buttonFastFordward.addClass(\"ui-state-disabled\");\n    } else {\n      // The first page\n      if (self.currentPage === 1) {\n        $buttonFastRewind.addClass(\"ui-state-disabled\");\n        $buttonRewind.addClass(\"ui-state-disabled\");\n        $buttonFordward.removeClass(\"ui-state-disabled\");\n        $buttonFastFordward.removeClass(\"ui-state-disabled\");\n      }\n      // the last page\n      else if (self.currentPage === self.totalPages) {\n          $buttonFastRewind.removeClass(\"ui-state-disabled\");\n          $buttonRewind.removeClass(\"ui-state-disabled\");\n          $buttonFordward.addClass(\"ui-state-disabled\");\n          $buttonFastFordward.addClass(\"ui-state-disabled\");\n        }\n        // other page\n        else {\n            $buttonFastRewind.removeClass(\"ui-state-disabled\");\n            $buttonRewind.removeClass(\"ui-state-disabled\");\n            $buttonFordward.removeClass(\"ui-state-disabled\");\n            $buttonFastFordward.removeClass(\"ui-state-disabled\");\n          }\n    }\n  },\n  /**\r\n      * Returns a new page close to the first item above based on the previous page\r\n      * @param {*} newItemsPerPage new value in results per page in search\r\n      * @param {*} previousItemsPerPage previous value in results per page\r\n      * @param {*} previousPage previous value in page number\r\n      */\n  calculateNewPage: function calculateNewPage(newItemsPerPage, previousItemsPerPage, previousPage) {\n    previousItemsPerPage = previousItemsPerPage || 10;\n    var currentFirstItem = previousItemsPerPage * previousPage - previousItemsPerPage + 1;\n    var newPage = Math.ceil(currentFirstItem / newItemsPerPage);\n    return newPage ? newPage : 1;\n  },\n\n  /**\r\n      *\r\n      */\n  clean: function clean() {\n    var self = this;\n    var $content = self.getContent();\n\n    if ($content) {\n      $content.empty();\n    }\n  } });\n\n\nbizagi.injector.register(\"bizagi.workportal.widgets.paginator\", [\"workportalFacade\", \"dataService\", bizagi.workportal.widgets.paginator]);","/**\r\n * Name: Bizagi Workportal Desktop Sort Bar Controller\r\n * Author: Danny Gonzalez\r\n */\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.sortbar\", {}, {\n  /**\r\n                                                                                    * Constructor\r\n                                                                                    * @param workportalFacade\r\n                                                                                    * @param dataService\r\n                                                                                    * @param processActionService\r\n                                                                                    * @param accumulatedcontext\r\n                                                                                    * @param params\r\n                                                                                    */\n  init: function init(workportalFacade, dataService, processActionService, accumulatedcontext, params) {\n    var self = this;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    //Load templates\n    self.loadTemplates({\n      \"sortbar\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.sortbar\").concat(\"#sortbar-wrapper\"),\n      \"content\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.sortbar\").concat(\"#sortbar-content\"),\n      \"right-content\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.sortbar\").concat(\"#sortbar-right\"),\n      \"addButton\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.sortbar\").concat(\"#sortbar-content-add-button\"),\n      \"sortMenu\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.sortbar\").concat(\"#sortbar-sort-menu\"),\n      \"actions\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.sortbar\").concat(\"#sortbar-content-actions\"),\n      \"recordsPerPage\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.sortbar\").concat(\"#sortbar-records-per-page\"),\n      \"recordsMenu\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.sortbar\").concat(\"#sortbar-records-menu\") });\n\n\n    self.processActionService = processActionService;\n    self.accumulatedcontext = accumulatedcontext;\n  },\n\n  /**\r\n      * Renders the template defined in the widget\r\n      */\n  renderContent: function renderContent() {\n    var self = this;\n    var template = self.getTemplate(\"sortbar\");\n    self.content = template.render({ enableFilter: true });\n    self.$checkAll = self.content.find(\".sortbar-left-check-uncheck input\");\n\n    return self.content;\n  },\n\n  /**\r\n      * links events with handlers\r\n      */\n  postRender: function postRender() {\n    var self = this;\n\n    var template = self.getTemplate(\"right-content\");\n    self.setVisibleSortbar(true);\n    self.configureHandlers();\n    $(\".sortbar-right\", self.content).append(template.render());\n    self.configureAfterPaintHandlers();\n  },\n\n  /**\r\n      * Binds events to handles\r\n      */\n  configureHandlers: function configureHandlers() {\n    var self = this,\n    $content = self.getContent();\n\n    self.sub(\"TEMPLATEENGINE-VIEW\", $.proxy(self.initializeAndProcessFilterButton, self));\n    self.sub(\"SEARCH-ENGINE-VIEW\", $.proxy(self.initializeAndProcessFilterButton, self));\n    self.sub(\"SET-FILTERS-DATA\", $.proxy(self.setFiltersSortData, self));\n    self.sub(\"HIDE-FILTER-BUTTONANDBAR\", $.proxy(self.hideFilterButtonAndBar, self));\n    self.sub(\"HIDE-SORT-BUTTONS\", $.proxy(self.hideSortButtons, self));\n    self.sub(\"ENABLE-BATCHS-ACTIONS\", function (ev, args) {return self.enableBatchActions(args);});\n    self.sub(\"UPDATE-COUNTER-FILTERS-APPLIED\", function (ev, args) {return self.updateCounterByFilterApplied(args);});\n    self.sub(\"CASES-TEMPLATE-VIEW\", function (ev, args) {self.showingFiltering = false;self.setVisibleCheckAll(false);});\n    self.sub(\"SOME-ITEM-ALLOW-SELECT\", function (ev, args) {self.setVisibleCheckAll(true);});\n    self.sub(\"HIDE-CHECK-ALL\", function (ev, args) {self.setVisibleCheckAll(false);});\n    self.sub(\"BATCH-ACTIONS\", function (ev, args) {return self.validActions(args.args.actionsData);});\n\n    $content.find(\".wgd-sortbar-add-button\").tooltip();\n    self.$checkAll.on(\"click\", $.proxy(self.onCheckUncheck, self));\n  },\n\n  /**\r\n      * Configure Handlers\r\n      */\n  configureAfterPaintHandlers: function configureAfterPaintHandlers() {\n    var self = this,\n    $content = self.getContent();\n\n    // Show sort menu\n    $content.find(\".right-menu\").on(\"click\", function (ev) {\n      self.showSortMenu(ev, $(this));\n    });\n\n    // Show records menu\n    $content.find(\".records-menu\").on(\"click\", function (ev) {\n      self.showRecordsMenu(ev, $(this));\n    });\n\n    // Change sort type\n    $content.find(\".sortbar-az\").on(\"click\", function () {\n      if (self.sortSelection.attribute) {\n        self.setIconSortType($(this), self._sortType);\n\n        self.pub(\"notify\", { type: \"SET-ORDERBY\", args: {\n            properties: {\n              xpath: self.sortSelection.attribute,\n              orderType: self._sortType,\n              typeSearch: \"none\" } } });\n\n\n      }\n    });\n    // Show filter bar\n    $content.find(\".filter-icon\").on(\"click\", function () {\n      self.pub(\"notify\", { type: \"OPENCLOSE-MYSEARCHFILTER\", args: { guidSearch: self.params.guidSearch, target: $(this) } });\n    });\n\n    $(\".remove-selected-items-collections\", $content).on(\"click\", $.proxy(self.onRemoveSelectedItemsCollections, self));\n  },\n\n  /**\r\n      * Shor or hide sortbar\r\n      * @param visible\r\n      */\n  setVisibleSortbar: function setVisibleSortbar(visible) {\n    var self = this;\n    var $content = self.getContent();\n    if (visible) {\n      $content.show();\n    } else\n    {\n      $content.hide();\n    }\n  },\n\n  /**\r\n      * Show or hide check input (select all)\r\n      * @param visible\r\n      */\n  setVisibleCheckAll: function setVisibleCheckAll(visible) {\n    var self = this;\n    if (visible) {\n      self.$checkAll.closest(\".border-check-uncheck\").show();\n      self.showingCheckAll = true;\n    } else\n    {\n      self.$checkAll.closest(\".border-check-uncheck\").hide();\n      self.showingCheckAll = false;\n    }\n  },\n\n  /**\r\n      * Show number items selected from data items (from casetemplate or entityTemplates)\r\n      * @param numberCheckedItems\r\n      */\n  showSelectedItems: function showSelectedItems(numberCheckedItems) {\n    var self = this;\n    if (numberCheckedItems && numberCheckedItems > 0) {\n      self.content.addClass(\"there-are-actions\");\n\n      var keywordSelected = self.getResource(\"workportal-general-word-selected-singular\");\n      if (numberCheckedItems > 1) {\n        keywordSelected = self.getResource(\"workportal-general-word-selected-plural\");\n      }\n      $(\".actions-count-selected\", self.content).text(numberCheckedItems + \" \" + keywordSelected + \" \");\n    } else\n    {\n      self.content.removeClass(\"there-are-actions\");\n    }\n  },\n\n  /**\r\n      * Set icon descending or ascending\r\n      * @param button represents icon ascending or descending\r\n      * @param sortTypeBeforeChanged\r\n      */\n  setIconSortType: function setIconSortType(button, sortTypeBeforeChanged) {\n    var self = this;\n    if (sortTypeBeforeChanged === \"asc\") {\n      self._sortType = \"desc\";\n      button.removeClass(\"bz-icon-order-ascendant-outline\").addClass(\"bz-icon-order-descendant-outline\");\n    } else\n    {\n      self._sortType = \"asc\";\n      button.removeClass(\"bz-icon-order-descendant-outline\").addClass(\"bz-icon-order-ascendant-outline\");\n    }\n  },\n\n  /**\r\n      *\r\n      * @param event\r\n      */\n  onClickBatchAction: function onClickBatchAction(event) {\n    var self = this;\n    var $buttonLI = $(event.target).closest(\"li\");\n    var guidAction = $buttonLI.data(\"guid\");\n    var action = self.getAction(guidAction);\n\n    if (!self.requestsInProgressActionGuid[guidAction]) {\n      self.requestsInProgressActionGuid[guidAction] = true;\n\n      self.addLoadingButtonAction($buttonLI);\n\n      $.when(self.processActionService.executeBatchAction({\n        action: action,\n        commonActionsmodel: self.commonActionsmodel })).\n      always(function () {\n        self.quitLoadingButtonAction($buttonLI);\n        self.requestsInProgressActionGuid[guidAction] = undefined;\n      });\n    }\n  },\n\n  /**\r\n      * Add loading to button\r\n      */\n  addLoadingButtonAction: function addLoadingButtonAction($button) {\n    $button.find(\".wdg-tple-button\").addClass(\"state-loading\");\n    $button.find(\".wdg-tple-button\").prepend(\"<div class=\\\"ui-bizagi-loading-icon ui-bizagi-loading-button\\\"></div>\").find(\"i\").hide();\n  },\n\n  /**\r\n      * quit loading to button\r\n      */\n  quitLoadingButtonAction: function quitLoadingButtonAction($button) {\n    $button.find(\".wdg-tple-button\").removeClass(\"state-loading\");\n    $button.find(\".ui-bizagi-loading-button\").remove();\n    $button.find(\"i\").show();\n  },\n\n  /**\r\n      *\r\n      */\n  onRemoveSelectedItemsCollections: function onRemoveSelectedItemsCollections() {\n    var self = this;\n    var commonActions = self.pub(\"notify\", { type: \"SET-VALUES\", args: { value: false } })[0];\n    self.enableBatchActions({ args: { commonActions: commonActions } });\n  },\n\n  /**\r\n      * Show the sort menu\r\n      * @param ev\r\n      * @param $parent\r\n      */\n  showSortMenu: function showSortMenu(ev, $parent) {\n    var self = this;\n    var $content = self.getContent();\n    var template = self.getTemplate(\"sortMenu\");\n    var tooltip = template.render({ filters: self._filters }, {\n      displayValue: function displayValue(val) {\n        return val;\n      } });\n\n    if ($(\".sortbar-box-menu\", $parent).length) {\n      $(\".sortbar-box-menu\", $parent).remove();\n    }\n\n    $parent.append(tooltip);\n    tooltip.show(\"fast\", function () {\n      tooltip.click(function (e) {\n        e.stopPropagation();\n      });\n      $(document).one(\"click\", function () {\n        tooltip.hide(\"fast\");\n        tooltip.remove();\n      });\n    });\n\n    //Configure handler to each action\n    $content.find(\".sortbar-option\").on(\"click\", function (ev) {\n      var data = $(ev.currentTarget).data();\n      var sortSelection = self._filters[data.index];\n      $content.find(\".sortbar-az\").removeClass(\"disabled\");\n\n      if (self.sortSelection != sortSelection) {\n        self.sortSelection = sortSelection;\n        $(\".sortbar-selected\", $parent).text(self.sortSelection.display.split(\".\").pop());\n        self.pub(\"notify\", { type: \"SET-ORDERBY\", args: {\n            properties: {\n              xpath: sortSelection.attribute,\n              orderType: self._sortType,\n              typeSearch: \"none\" } } });\n\n\n      }\n      tooltip.hide(\"fast\");\n    });\n  },\n\n  showRecordsMenu: function showRecordsMenu(ev, $parent) {\n    var self = this;\n    var $content = self.getContent();\n    var template = self.getTemplate(\"recordsMenu\");\n    var tooltip = template.render({});\n\n    if ($(\".sortbar-records-box-menu\", $parent).length) {\n      $(\".sortbar-records-box-menu\", $parent).remove();\n    }\n\n    $parent.append(tooltip);\n    tooltip.show(\"fast\", function () {\n      tooltip.click(function (e) {\n        e.stopPropagation();\n      });\n      $(document).one(\"click\", function () {\n        tooltip.hide(\"fast\");\n        tooltip.remove();\n      });\n    });\n\n    // Configure handler to each action\n    $content.find(\".sortbar-records-option\").on(\"click\", function (ev) {\n      self.oldPageSize = self.oldPageSize ? self.oldPageSize : 10;\n      var pageSize = Number(bizagi.util.trim(this.textContent)),\n      paginator = bizagi.injector.get(\"bizagi.workportal.widgets.paginator\"),\n      actualPage = paginator.currentPage ? paginator.currentPage : 1,\n      newPage = paginator.calculateNewPage(pageSize, self.oldPageSize, actualPage);\n      $(\".sortbar-records-selected\", $parent).text(pageSize);\n      self.pub(\"notify\", {\n        type: \"SET-RECORDS\",\n        args: {\n          pageSize: pageSize,\n          page: newPage } });\n\n\n      self.oldPageSize = pageSize;\n      tooltip.hide(\"fast\");\n    });\n  },\n\n  /**\r\n      * Asigna los parametros iniciales de la busqueda e inicializa los objetos\r\n      * @param e\r\n      * @param params\r\n      */\n  initializeAndProcessFilterButton: function initializeAndProcessFilterButton(e, params) {\n    var self = this;\n\n    self.showingFiltering = false;\n    self.setVisibleCheckAll(false);\n\n    self.restoreOrderSelected();\n    self.setIconSortType($(\".sortbar-az\", self.content), \"desc\");\n    self.params = params.args;\n    self.sortSelection = {};\n\n    self.processAddButton(e, params);\n  },\n\n  /**\r\n      *  Checks if the add button should be displayed\r\n      */\n  processAddButton: function processAddButton(ev, params) {\n    var self = this,\n    $content = self.getContent(),\n    args = params.args,\n    action = args.action,\n    $buttonContainer = $content.find(\".sortbar-left .add-button\");\n    self._lastReferenceEntity = args.reference;\n    $buttonContainer.children().remove();\n    $(\".wrapper-sortbar-actions\", $content).remove(); //Remove same time buttons batch actions\n    self._haveAddButton = false;\n    if (args.reference && args.referenceType !== \"ENTITY\") {\n      $buttonContainer.startLoading({ delay: 0, overlay: true });\n      self.dataService.getProcessAddAction(params).done(function (data) {\n        if (self._lastReferenceEntity === data.referenceEntity) {\n          if (typeof data !== \"undefined\" && Object.getOwnPropertyNames(data).length > 1 && data.guidEntity && data.id) {\n            self.renderButton($buttonContainer, data);\n          }\n        }\n      }).always(function () {\n        $buttonContainer.endLoading();\n      });\n    } else\n    if (action) {\n      self.renderButton($buttonContainer, action);\n    }\n  },\n\n  /**\r\n      *\r\n      */\n  renderButton: function renderButton($buttonContainer, action) {\n    var self = this,\n    template = self.getTemplate(\"addButton\"),\n    $addButton = template.render({ action: action });\n\n    $buttonContainer.empty();\n    $addButton.appendTo($buttonContainer);\n    self._haveAddButton = true;\n    $addButton.on(\"click\", function () {self.clickAddButton(action);});\n  },\n\n  /**\r\n      * Click on add Proccess btn\r\n      */\n  clickAddButton: function clickAddButton(action) {\n    var self = this;\n\n    $.when(self.dataService.getMapping({\n      guidEntity: action.guidEntity,\n      accumulatedContext: self.accumulatedcontext.getContext({}),\n      xpathContext: action.type === \"Process\" ? action.xpathContext : \"\",\n      collectionId: action.referenceEntity,\n      collectionType: action.referenceType })).\n    done(function (mappingData) {\n      if (action.type === \"Process\") {\n        self.onExecuteProcess(action, mappingData);\n      } else\n      {\n        self.onExecuteForm(action, mappingData);\n      }\n    });\n  },\n\n  /**\r\n      * Check or uncheck all registers related, could be cases or data\r\n      */\n  onCheckUncheck: function onCheckUncheck(ev) {\n    var self = this;\n    var $target = $(ev.target);\n    var isChecked = $target.is(\":checked\");\n    var commonActions = self.pub(\"notify\", { type: \"SET-VALUES\", args: { value: isChecked } })[0];\n\n    self.enableBatchActions({ args: { commonActions: commonActions } });\n  },\n\n  /**\r\n      * Enabled / disables the batch actions. This method is called always update data\r\n      */\n  enableBatchActions: function enableBatchActions(params) {\n    var self = this;\n    var args = params.args;\n    var commonActionsModel = self.commonActionsmodel = args.commonActions;\n    var actions = self.validActions(commonActionsModel.actions);\n    if (actions.length > 0 || self._haveAddButton) {\n      $(self.getContent()).show();\n    }\n    self.showBatchActions(actions, commonActionsModel, \"batchAction\");\n\n    if (commonActionsModel.checkAll !== undefined) {\n      self.$checkAll.prop(\"checked\", commonActionsModel.checkAll);\n    }\n  },\n\n  /**\r\n      * Show batch actions\r\n      * @param actions\r\n      * @param commonActionsModel\r\n      * @param typeActions\r\n      */\n  showBatchActions: function showBatchActions(actions, commonActionsModel, typeActions) {\n    var self = this;\n    var $content = self.getContent();\n    var template = self.getTemplate(\"actions\");\n\n    self.showSelectedItems(Object.keys(commonActionsModel.itemsSelected).length);\n\n    var moreActions = actions.slice(3, 9999);\n\n    var $actions = template.render({ actions: actions.slice(0, 3), moreActions: moreActions, typeActions: typeActions });\n\n    $(\".wdg-tple-button.batchAction\", self.content).off(\"click\", $.proxy(self.onClickBatchAction, self));\n\n    $(\".wrapper-sortbar-actions\", $content).remove();\n    $(\".sortbar-left .sortbar-menu\", $content).append($actions);\n\n    $(\".wdg-tple-button.batchAction\", self.content).on(\"click\", $.proxy(self.onClickBatchAction, self));\n\n    if (moreActions.length > 0) {\n      if (self.content.data('ui-tooltip')) {\n        $(self.content).tooltip(\"destroy\");\n      }\n\n      $(self.content).tooltip({\n        tooltipClass: \"sortbar-tooltip-more-actions\",\n        items: \".bz-actions-showmore\",\n        content: $(\".template-box-tooltip\", self.content).html(),\n        open: function open(event, ui)\n        {\n          $(\".wdg-tple-button.batchAction\", ui.tooltip).on(\"click\", $.proxy(self.onClickBatchAction, self));\n\n          var uiTooltip = $('div.ui-tooltip');\n\n          if (typeof event.originalEvent === 'undefined')\n          {\n            uiTooltip.remove();\n            return false;\n          }\n          var $id = $(ui.tooltip).attr('id');\n          // close any lingering tooltips\n          uiTooltip.not('#' + $id).remove();\n          // ajax function to pull in data and add it to the tooltip goes here\n\n          for (var keyActionGuid in self.requestsInProgressActionGuid) {\n            if (self.requestsInProgressActionGuid[keyActionGuid]) {\n              var $buttonAction = $(\"li[data-guid='\" + keyActionGuid + \"']\", ui.tooltip);\n              self.addLoadingButtonAction($buttonAction);\n            }\n          }\n\n          $(\"li[id='emptyLi0']\").focus(function () {\n            $(\"div.bz-actions-showmore.ellipsis-icon\")[0].focus();\n            $(\"ul[class='actions-container'] li:nth-child(3\")[0].focus();\n          });\n          $(\"li[id='emptyLi1']\").focus(function () {\n            $(\"div.bz-actions-showmore.ellipsis-icon\")[0].focus();\n            $(\"a.remove-selected-items-collections\")[0].focus();\n          });\n          $(\"li\", ui.tooltip)[1].focus();\n\n        },\n        close: function close(event, ui)\n        {\n          ui.tooltip.hover(function ()\n          {\n            $(this).stop(true).fadeTo(400, 1);\n          },\n          function ()\n          {\n            $(this).fadeOut('400', function ()\n            {\n              $(\".wdg-tple-button.batchAction\", this).off(\"click\", $.proxy(self.onClickBatchAction, self));\n              $(this).remove();\n            });\n          });\n        } });\n\n    }\n  },\n\n  /**\r\n      * Define the data on order to show the sort options\r\n      * @param ev\r\n      * @param params\r\n      */\n  setFiltersSortData: function setFiltersSortData(ev, params) {\n    var self = this;\n    var filtersAppliedCounter = params.args.filtersAppliedCounter;\n    var totalRecords = params.args.totalRecords;\n    self._filters = params.args.calculateFilters ? params.args.filters : self._filters;\n\n    if (params.args.calculateFilters) {\n      var i = -1,a,filterCounter = 0,sortCounter = 0;\n      while (a = self._filters[++i]) {\n        if (a.type != \"Text\" && a.type !== \"Link\" && a.data && (a.data.defaultValues && a.data.defaultValues.length > 0 || a.data.min && a.data.max)) {\n          filterCounter++;\n        }\n        if (a.display !== \"\") {\n          sortCounter++;\n        }\n      }\n\n      if (totalRecords > 0) {\n        // Si existen filtros, muestre el boton\n        if (filterCounter > 0) {\n          self.showFilterButton();\n        } else\n        {\n          self.hideFilterButton();\n        }\n        // Si existen filtros que tienen display name, muestre los botones de sort\n        if (sortCounter > 0) {\n          self.showSortButtons();\n        } else\n        {\n          self.hideSortButtons();\n        }\n      }\n      // Si no hay registros y ni se ha aplicado ningun filtro ocultar\n      // los botones del sortbar\n      else if (filtersAppliedCounter === 0) {\n          self.hideFilterButton();\n          self.hideSortButtons();\n        }\n    }\n    self.updateCounter(filtersAppliedCounter);\n  },\n\n  /**\r\n      * Show Filter Button\r\n      */\n  showFilterButton: function showFilterButton() {\n    var self = this;\n    $(\".filter-icon\", self.getContent()).show();\n  },\n\n  /**\r\n      * Hide Filter Button\r\n      */\n  hideFilterButton: function hideFilterButton() {\n    var self = this;\n    $(\".filter-icon\", self.getContent()).hide();\n    self.showingFiltering = false;\n  },\n\n  /**\r\n      * Show Sort Buttons\r\n      */\n  showSortButtons: function showSortButtons() {\n    var self = this;\n    $(\".sortbar-text\", self.getContent()).show();\n    $(\".sortbar-icon\", self.getContent()).show();\n    $(\".sortbar-az\", self.getContent()).show();\n\n    self.showingSorting = true;\n    self.showingFiltering = true;\n  },\n\n  /**\r\n      * Hide Sort Buttons\r\n      */\n  hideSortButtons: function hideSortButtons() {\n    var self = this;\n    var $sortbarIcon = $(\".sortbar-az\", self.getContent());\n\n    // Restore initial settings\n    $(\".sortbar-text\", self.getContent()).hide();\n\n    $sortbarIcon.addClass(\"disabled\");\n    $sortbarIcon.removeClass(\"bz-icon-order-ascendant-outline\");\n    $sortbarIcon.removeClass(\"bz-icon-order-descendant-outline\");\n    $sortbarIcon.addClass(\"bz-icon-order-ascendant-outline\");\n    $sortbarIcon.hide();\n\n    self.showingSorting = false;\n  },\n\n  /**\r\n      * Restore Order by Option\r\n      */\n  restoreOrderSelected: function restoreOrderSelected() {\n    var self = this;\n    $(\".sortbar-selected\", self.getContent()).text(self.getResource(\"workportal-my-search-order-by\"));\n  },\n\n  /**\r\n      * Set number filters\r\n      * @param params\r\n      */\n  updateCounterByFilterApplied: function updateCounterByFilterApplied(params) {\n    var self = this;\n    if (params.args.filtersApplied) {\n      self.updateCounter(params.args.filtersApplied.length);\n    }\n  },\n\n  /**\r\n      *\r\n      * @param counter\r\n      */\n  updateCounter: function updateCounter(counter) {\n    var self = this,\n    $content = self.getContent(),\n    $counter = $(\".counter-filters-applied\", $content);\n\n    if (counter > 0) {\n      $counter.html(counter);\n      $counter.show();\n    } else\n    {\n      $counter.hide();\n    }\n  },\n\n  /**\r\n      *\r\n      */\n  hideFilterButtonAndBar: function hideFilterButtonAndBar() {\n    var self = this;\n    self.showingFilter = false;\n    $(\".filter-icon\", self.getContent()).hide();\n    self.pub(\"notify\", { type: \"CLOSE-MYSEARCHFILTER\", args: { \"show\": false, \"$target\": null } });\n  },\n\n  /**\r\n      * Creates a new case, it could has start form or not\r\n      */\n  onExecuteProcess: function onExecuteProcess(action, mappingData) {\n    var self = this;\n\n    if (action.startForm) {\n      action.hasStartForm = action.startForm;\n    }\n\n    $.when(self.processActionService.executeProcessAction({\n      action: action,\n      mappingData: mappingData })).\n    done(function (params) {\n      var params = params || {};\n\n      if (!!params && params.refreshTemplateData !== false) {\n        self.loadTemplateData(action);\n      }\n    });\n  },\n\n  /**\r\n      *\r\n      * @param action\r\n      */\n  loadTemplateData: function loadTemplateData(action) {\n    var self = this;\n    self.pub(\"notify\", { type: \"TEMPLATEENGINE-VIEW\", args: { action: action, isRefresh: true } });\n  },\n\n  /**\r\n      *\r\n      */\n  onExecuteForm: function onExecuteForm(action, mappingData) {\n    var self = this;\n\n    $.when(self.processActionService.executeFormAction({\n      action: action,\n      mappingData: mappingData })).\n    done(function (data) {\n      if (data.refresh) {\n        self.pub(\"notify\", { type: \"UPDATE-DATATEMPLATE-VIEW\", args: { action: action, isRefresh: true, calculateFilters: true } });\n      }\n    });\n  },\n\n  /**\r\n      * Returns the action required\r\n      */\n  getAction: function getAction(guidAction) {\n    var self = this;\n    return self.commonActionsmodel.actions.filter(function (action) {\n      return action.id == guidAction;\n    })[0];\n  },\n\n  /**\r\n      * Returns an array with the valid actions\r\n      * @param actions\r\n      * @return {*}\r\n      */\n  validActions: function validActions(actions) {\n    return $.grep(actions, function (action) {\n      if (action.multiplicity == 2) {return true;}\n      if (action.mode == \"Collection\") {return false;}\n      if (action.type == \"Form\") {return false;}\n      if (action.isEvent) {return false;}\n      if (action.type == \"Process\" && action.hasStartForm) {return false;}\n      return true;\n    });\n  },\n\n  /**\r\n      * Detach handlers\r\n      */\n  clean: function clean() {\n    var self = this,\n    $content = self.getContent();\n    self.requestsInProgressActionGuid = {};\n\n    if ($content) {\n      self.unsub(\"TEMPLATEENGINE-VIEW\");\n      self.unsub(\"ENABLE-BATCHS-ACTIONS\");\n      self.unsub(\"SEARCH-ENGINE-VIEW\");\n      self.unsub(\"SET-FILTERS-DATA\");\n      self.unsub(\"HIDE-FILTER-BUTTONANDBAR\");\n      self.unsub(\"HIDE-SORT-BUTTONS\");\n\n      self.$checkAll.off(\"click\");\n      $content.find(\".right-menu\").off(\"click\");\n      $content.find(\".sortbar-az\").off(\"click\");\n      $content.find(\".filter-icon\").off(\"click\");\n      $content.find(\".sortbar-action\").off(\"click\");\n      $(\".wdg-tple-button.batchAction\", $content).off(\"click\", $.proxy(self.onClickBatchAction, self));\n      $(\".remove-selected-items-collections\", $content).off(\"click\", $.proxy(self.onRemoveSelectedItemsCollections, self));\n    }\n  } });\n\n\n\nbizagi.injector.register(\"bizagi.workportal.widgets.sortbar\", [\"workportalFacade\", \"dataService\", \"processActionService\", \"accumulatedcontext\", bizagi.workportal.widgets.sortbar]);","/**\r\n * Document   : Bizagi Workportal Desktop My Search Filter Controller\r\n * Created on : May 20, 2015, 11:24:00 AM\r\n * Author     : Andrés Felipe Arenas Vargas\r\n */\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.mysearchfilter\", {\n\n  /**\r\n                                                                                       *\r\n                                                                                       * @param workportalFacade\r\n                                                                                       * @param dataService\r\n                                                                                       * @param processActionService\r\n                                                                                       * @param params\r\n                                                                                       */\n  init: function init(workportalFacade, dataService, processActionService, params) {\n    var self = this;\n    self.params = {};\n    self._super(workportalFacade, dataService, params);\n    self.loadTemplates({\n      \"mysearchfilter\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.mysearchfilter\").concat(\"#mysearchfilter-wrapper\"),\n      \"mysearchfilter-item\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.mysearchfilter\").concat(\"#mysearchfilter-item\") }).\n    done(function () {\n      self.filterItem = self.getTemplate(\"mysearchfilter-item\");\n    });\n\n    self.processActionService = processActionService;\n    self.filtersApplied = [];\n    self.filters = [];\n  },\n\n  /**\r\n      *\r\n      * @returns {*}\r\n      */\n  renderContent: function renderContent() {\n    var self = this;\n    self.content = self.getTemplate(\"mysearchfilter\").render({});\n    self.content.hide();\n    return self.content;\n  },\n\n  /**\r\n      *\r\n      */\n  postRender: function postRender() {\n    var self = this;\n    self.configureHandlers();\n  },\n\n  /**\r\n      * Asigna los parametros iniciales de la busqueda e inicializa los objetos\r\n      * @param e\r\n      * @param params\r\n      */\n  initializeMySearchFilter: function initializeMySearchFilter(e, params) {\n    var self = this,\n    $content = self.getContent();\n\n    self.criteriaSearchApplied = params.args.filters ? bizagi.clone(params.args.filters) : [];\n    self.filtersApplied = [];\n    self.filterControlArray = [];\n    self.orderBy = {};\n    $(\".mysearchfilter-list\", $content).empty();\n  },\n\n  /**\r\n      *\r\n      */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    self.sub(\"TEMPLATEENGINE-VIEW\", $.proxy(self.initializeMySearchFilter, self));\n    self.sub(\"SEARCH-ENGINE-VIEW\", $.proxy(self.initializeMySearchFilter, self));\n    self.sub(\"OPENCLOSE-MYSEARCHFILTER\", $.proxy(self.toggleWidget, self));\n    self.sub(\"CLOSE-MYSEARCHFILTER\", $.proxy(self.openCloseWidget, self));\n    self.sub(\"SET-FILTERS-DATA\", $.proxy(self.setFiltersData, self));\n    self.sub(\"SET-ORDERBY\", $.proxy(self.setOrderBy, self));\n    self.sub(\"SET-RECORDS\", $.proxy(self.setRecordsPerPage, self));\n  },\n\n  /**\r\n      *\r\n      * @param ev\r\n      * @param params\r\n      */\n  setFiltersData: function setFiltersData(ev, params) {\n    var self = this;\n\n    if (params.args.defaultFilterApplied) {\n      params.args.filtersApplied = params.args.filtersApplied || [];\n      var filtersAppliedWithProperties = params.args.filtersApplied.filter(function (filter) {\n        return typeof filter.properties !== \"undefined\";\n      });\n      self.filtersApplied = filtersAppliedWithProperties;\n    }\n\n    if (params.args.calculateFilters) {\n      var $content = self.getContent();\n      var $listContent = $(\".mysearchfilter-list\", $content);\n      var filters = params.args.filters;\n      var filtersAppliedCounter = params.args.filtersAppliedCounter;\n\n      var i = -1,a,counter = 0;\n      while (a = filters[++i]) {\n        if (a.type != \"Text\" && a.type !== \"Link\" && a.data && (a.data.defaultValues && a.data.defaultValues.length > 0 || a.data.min && a.data.max)) {\n          counter++;\n          break;\n        }\n      }\n\n      //Si no hay registros y no hay filtros oculta\n      if (params.args.totalRecords === 0 && filtersAppliedCounter === 0) {\n        self.openCloseWidget({ show: false });\n      } else\n      if (counter === 0) {\n        self.openCloseWidget({ show: false });\n      } else\n      {\n        self.openCloseWidget({ show: true });\n      }\n\n\n      if (self.filterControlArray && self.filterControlArray.length === 0) {\n        var i = -1,a;\n\n        while (a = filters[++i]) {\n          a[\"tmplid\"] = a.attribute.replaceAll(\".\", \"-\"); //used in mysearchfilter.tmpl.html\n\n          var foundDefaultFilter = self.filtersApplied.filter(function (defaultFilter) {\n            return defaultFilter.properties.type === a.type.toLowerCase() && defaultFilter.properties.xpath === a.tmplid;\n          });\n\n          if (foundDefaultFilter.length > 0) {\n            a.filterApplied = \"filter-applied\";\n          } else\n          {\n            a.filterApplied = \"\";\n          }\n          var filterItem = self.filterItem.render(a);\n\n          if (a.type !== \"Text\" && a.type !== \"Link\" && a.data && (a.data.defaultValues && a.data.defaultValues.length > 0 || a.data.min && a.data.max)) {\n            $listContent.append(filterItem);\n            self.buildFilter(filterItem, a);\n            if (a.filterApplied === \"filter-applied\") {\n              $(\".remove-filter\", filterItem).show();\n            }\n          }\n        }\n      } else\n      if (self.filterControlArray && self.filterControlArray.length > 0) {\n        var i = -1,a;\n        while (a = self.filterControlArray[++i]) {\n          var filter = filters.find(function (el) {\n            return el.attribute === a.xpath;\n          });\n          if (filter) {\n            self.setFilterData(a, filter);\n          }\n        }\n      }\n    }\n    $(\".filters-loading\", self.content).hide();\n  },\n\n  /**\r\n      *\r\n      * @param e\r\n      * @param params\r\n      */\n  toggleWidget: function toggleWidget(e, params) {\n    var self = this;\n    var $content = self.getContent();\n    var status = $content.is(\":visible\");\n\n    self.openCloseWidget({ show: !status, $target: params.args.target });\n  },\n\n  /**\r\n      *\r\n      * @param params\r\n      */\n  openCloseWidget: function openCloseWidget(params) {\n    var self = this,\n    $content = self.getContent(),\n    $target = params.$target || $(\"<div>\");\n\n    if (params.show) {\n      $target.addClass(\"opened\");\n      $content.show();\n    } else\n    {\n      $target.removeClass(\"opened\");\n      $content.hide();\n      $(\"button#ui-bizagi-cancel-filter\").click();\n    }\n  },\n\n  /**\r\n      *\r\n      * @param $element\r\n      * @param filter\r\n      */\n  buildFilter: function buildFilter($element, filter) {\n    var self = this;\n    switch (filter.type) {\n      case \"Entity\":\n        self.buildFilterMultiple($element, filter);\n        break;\n      case \"Number\":\n        self.buildFilterNumber($element, filter);\n        break;\n      case \"Money\":\n        self.buildFilterMoney($element, filter);\n        break;\n      case \"Datetime\":\n        self.buildFilterDate($element, filter);\n        break;\n      /*case \"Text\":\r\n                   self.buildFilterText($element, filter);\r\n                   break;*/\n      case \"Boolean\":\n        self.buildFilterBoolean($element, filter);\n        break;}\n\n\n  },\n\n  /**\r\n      *\r\n      * @param filter\r\n      * @param data\r\n      */\n  setFilterData: function setFilterData(filter, filterData) {\n    var isInteger = filterData.subType === \"Int\";\n    switch (filter.type) {\n      case \"Entity\":\n        filter.widget.bizagi_multipleFilter(\"setData\", filterData.data);\n        break;\n      case \"Number\":\n        isInteger ? filter.widget.bizagi_integerFilter(\"setData\", filterData.data) : filter.widget.bizagi_numberFilter(\"setData\", filterData.data);\n        break;\n      case \"Money\":\n        filter.widget.bizagi_moneyFilter(\"setData\", filterData.data);\n        break;\n      case \"Datetime\":\n        filter.widget.bizagi_dateFilter(\"setData\", filterData.data);\n        break;\n      case \"Boolean\":\n        filter.widget.bizagi_booleanFilter(\"setData\", filterData.data);\n        break;}\n\n\n  },\n\n  /**\r\n      *\r\n      * @param $element\r\n      * @param filter\r\n      */\n  buildFilterMoney: function buildFilterMoney($element, filter) {\n    var self = this;\n\n    var moneyFilter = $element.bizagi_moneyFilter({\n      showButtonClearFilter: true,\n      numericFormat: self.getResource(\"numericFormat\"),\n      properties: filter,\n      data: filter.data,\n      onApply: function onApply(data, element) {\n        self.addFilterSelection(data);\n        self.triggerFilter({ calculateFilters: true });\n      },\n      onClear: function onClear(xpath) {\n        self.removeFilterApplied(xpath);\n        self.triggerFilter({ calculateFilters: true });\n      },\n      getResource: function getResource(key) {\n        return bizagi.localization.getResource(key);\n      } });\n\n\n    self.filterControlArray.push({ type: filter.type, xpath: filter.attribute, widget: moneyFilter });\n  },\n\n  /**\r\n      *\r\n      * @param $element\r\n      * @param filter\r\n      */\n  buildFilterNumber: function buildFilterNumber($element, filter) {\n    var self = this;\n    var isInteger = filter.subType === \"Int\";\n    var params = {\n      showButtonClearFilter: true,\n      numericFormat: self.getResource(\"numericFormat\"),\n      properties: filter,\n      data: filter.data,\n      onApply: function onApply(data, element) {\n        if (data.length !== 0) {\n          self.addFilterSelection(data);\n          self.triggerFilter({ calculateFilters: true });\n        }\n      },\n      onClear: function onClear(xpath) {\n        self.removeFilterApplied(xpath);\n        self.triggerFilter({ calculateFilters: true });\n      },\n      getResource: function getResource(key) {\n        return bizagi.localization.getResource(key);\n      } };\n\n    var numberFilter = isInteger ? $element.bizagi_integerFilter(params) : $element.bizagi_numberFilter(params);\n\n    self.filterControlArray.push({ type: filter.type, xpath: filter.attribute, widget: numberFilter });\n  },\n\n  /**\r\n      *\r\n      * @param $element\r\n      * @param filter\r\n      */\n  buildFilterDate: function buildFilterDate($element, filter) {\n    var self = this;\n    var dateFilter = $element.bizagi_dateFilter({\n      showButtonClearFilter: true,\n      properties: filter,\n      onApply: function onApply(data, element) {\n        self.addFilterSelection(data);\n        self.triggerFilter({ calculateFilters: true });\n      },\n      onClear: function onClear(xpaths) {\n        self.removeFilterApplied(xpaths);\n        self.triggerFilter({ calculateFilters: true });\n      },\n      getResource: function getResource(key) {\n        return self.getResource(key);\n      } });\n\n\n    self.filterControlArray.push({ type: filter.type, xpath: filter.attribute, widget: dateFilter });\n  },\n\n  /**\r\n      *\r\n      * @param $element\r\n      * @param filter\r\n      */\n  buildFilterMultiple: function buildFilterMultiple($element, filter) {\n    var self = this;\n    var multipleFilter = $element.bizagi_multipleFilter({\n      showButtonClearFilter: true,\n      properties: filter,\n      data: filter.data,\n      onApply: function onApply(data, element) {\n        self.addFilterSelection(data);\n        self.triggerFilter({ calculateFilters: true });\n      },\n      onClear: function onClear(xpath) {\n        self.removeFilterApplied(xpath);\n        self.triggerFilter({ calculateFilters: true });\n      },\n      getResource: function getResource(key) {\n        return bizagi.localization.getResource(key);\n      } });\n\n\n    self.filterControlArray.push({ type: filter.type, xpath: filter.attribute, widget: multipleFilter });\n  },\n\n  /**\r\n      *\r\n      * @param $element\r\n      * @param filter\r\n      */\n  buildFilterBoolean: function buildFilterBoolean($element, filter) {\n    var self = this;\n    var booleanFilter = $element.bizagi_booleanFilter({\n      showButtonClearFilter: true,\n      properties: filter,\n      data: filter.data,\n      onApply: function onApply(data, element) {\n        self.addFilterSelection(data);\n        self.triggerFilter({ calculateFilters: true });\n      },\n      onClear: function onClear(xpath) {\n        self.removeFilterApplied(xpath);\n        self.triggerFilter({ calculateFilters: true });\n      },\n      getResource: function getResource(key) {\n        return bizagi.localization.getResource(key);\n      } });\n\n\n    self.filterControlArray.push({ type: filter.type, xpath: filter.attribute, widget: booleanFilter });\n  },\n\n  /**\r\n      *\r\n      * @param data\r\n      */\n  addFilterSelection: function addFilterSelection(data) {\n    var self = this;\n    $(\".filters-loading\", self.content).show();\n    for (var i = 0, len = data.length; i < len; i++) {\n      self.removeFilterApplied([data[i].properties.xpath]);\n      self.filtersApplied.push(data[i]);\n    }\n  },\n\n  /**\r\n      *\r\n      * @param xpaths\r\n      */\n  removeFilterApplied: function removeFilterApplied(xpaths) {\n    var self = this;\n\n    $(\".filters-loading\", self.content).show();\n\n    var i = -1,a;\n    while (a = xpaths[++i]) {\n      var filter = self.filtersApplied.find(function (el) {\n        return el.properties.xpath === a;\n      });\n      if (filter) {\n        self.filtersApplied.splice(self.filtersApplied.indexOf(filter), 1);\n      }\n    }\n  },\n\n  /**\r\n      *\r\n      * @param ev\r\n      * @param params\r\n      */\n  setOrderBy: function setOrderBy(ev, params) {\n    var self = this;\n    self.orderBy = params.args;\n    self.triggerFilter({ calculateFilters: false });\n  },\n\n  setRecordsPerPage: function setRecordsPerPage(ev, params) {\n    var self = this;\n    self.triggerFilter({ calculateFilters: false, page: params.args.page, pageSize: params.args && params.args.pageSize });\n  },\n\n  /**\r\n      *\r\n      * @param params\r\n      */\n  triggerFilter: function triggerFilter(params) {\n    var self = this;\n    var filtersToSend = self.criteriaSearchApplied ? bizagi.clone(self.criteriaSearchApplied) : [];\n    var filtersApplied = self.filtersApplied.slice();\n    var filterBarFilters = [];\n\n    var i = -1,a;\n    while (a = filtersApplied[++i]) {\n      self.dataService.defineFilterObject(a, filtersToSend);\n      self.dataService.defineFilterObject(a, filterBarFilters);\n    }\n\n    var filtersAppliedCounter = filterBarFilters.length;\n\n    //Set sort in json to send\n    if (self.orderBy.properties) {\n      self.dataService.defineFilterObject(self.orderBy, filtersToSend);\n    }\n\n    if (params.pageSize)\n    {\n      self._setPageSize(params.pageSize);\n    }\n\n    var filterParams = {\n      type: \"UPDATE-DATATEMPLATE-VIEW\",\n      args: {\n        filters: filtersToSend,\n        page: params.page,\n        level: 1,\n        calculateFilters: params.calculateFilters || false,\n        defaultFilterApplied: false,\n        typeSearch: \"filter\",\n        filtersAppliedCounter: filtersAppliedCounter,\n        pageSize: self._getPageSize() || 10 } };\n\n\n\n    self.pub(\"notify\", filterParams);\n  },\n\n  /**\r\n      * set results per page\r\n      */\n  _setPageSize: function _setPageSize(pageSize) {\n    var self = this;\n    self.dataService.pageSize = pageSize;\n  },\n\n  /**\r\n      * get results per page\r\n      * @returns \r\n      */\n  _getPageSize: function _getPageSize() {\n    var self = this;\n    return self.dataService.pageSize;\n  } });\n\n\nbizagi.injector.register(\"bizagi.workportal.widgets.mysearchfilter\", [\"workportalFacade\", \"dataService\", \"processActionService\", bizagi.workportal.widgets.mysearchfilter], false);","/**\r\n * Document   : Bizagi Workportal Desktop My Search Criteria\r\n * Created on : May 20, 2015, 11:24:00 AM\r\n * Author     : Andrés Felipe Arenas Vargas\r\n */\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.mysearchcriteria\", {\n\n  /**\r\n                                                                                         *\r\n                                                                                         * @param workportalFacade\r\n                                                                                         * @param dataService\r\n                                                                                         * @param processActionService\r\n                                                                                         * @param params\r\n                                                                                         */\n  init: function init(workportalFacade, dataService, processActionService, params) {\n    var self = this;\n    self.params = {};\n    self._super(workportalFacade, dataService, params);\n    self.loadTemplates({\n      \"mySearchCriteria\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.mysearchcriteria\").concat(\"#mysearchcriteria-wrapper\"),\n      \"mySearchCriteriaList\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.mysearchcriteria\").concat(\"#mysearchcriteria-list\") });\n\n  },\n\n  /**\r\n      *\r\n      * @returns {*}\r\n      */\n  renderContent: function renderContent() {\n    var self = this;\n    self.content = self.getTemplate(\"mySearchCriteria\").render({});\n    return self.content;\n  },\n\n  /**\r\n      *\r\n      */\n  postRender: function postRender() {\n    var self = this;\n    self.configureHandlers();\n  },\n\n  /**\r\n      *\r\n      */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    self.sub('SEARCH-ENGINE-VIEW', $.proxy(self.processCriterias, self));\n\n    $(\".wdg-mysearchcriteria-content\", self.content).on(\"click\", \"div.wdg-mysearchcriteria-card span\", function () {\n      self.callQueryForm();\n    });\n\n    $(\".wdg-mysearchcriteria-content\", self.content).on(\"click\", \"div.wdg-mysearchcriteria-card i\", function (e) {\n      var xpath = $(this).closest(\".wdg-mysearchcriteria-card\").data(\"xpath\");\n      var rangeQuery = $(this).closest(\".wdg-mysearchcriteria-card\").data(\"range-query\");\n      self.performQuery(self.removeFilterApplied(xpath, rangeQuery));\n      e.stopPropagation();\n    });\n  },\n\n  /**\r\n      *\r\n      * @param ev\r\n      * @param params\r\n      */\n  processCriterias: function processCriterias(ev, params) {\n    var self = this;\n    if (typeof params.args.level === \"undefined\") {//do only from searchList\n      self.originParams = bizagi.clone(params);\n      var criterias = self.originParams.args.metadataFilters || [];\n      if (criterias.length > 0) {\n        if (self.areThereVisibleFilters(criterias)) {\n          var $listContent = $(\".wdg-mysearchcriteria-content\", self.content);\n          var list = self.getTemplate(\"mySearchCriteriaList\").render({ \"criterias\": criterias });\n          $listContent.html(list);\n        }\n      }\n    }\n  },\n\n  areThereVisibleFilters: function areThereVisibleFilters(criterias) {\n    var result = false;\n    var i = 0;\n    for (; i < criterias.length; i++) {\n      if (!criterias[i].isHidden) {\n        result = true;\n        break;\n      }\n    }\n    return result;\n  },\n\n  /**\r\n      *\r\n      * @param filters\r\n      * @returns {Array}\r\n      */\n  preProcessValues: function preProcessValues(filters) {\n    var filtersToSend = bizagi.clone(filters) || [];\n    var i = -1,a;\n\n    while (a = filtersToSend[++i]) {\n      if (a.searchType && a.searchType == \"range\") {\n        if (a.rangeQuery == \"from\") {\n          a.value = a.value.min;\n        } else\n        {\n          a.value = a.value.max;\n        }\n      }\n    }\n    return filtersToSend;\n  },\n\n  /**\r\n      *\r\n      */\n  callQueryForm: function callQueryForm() {\n    var self = this,\n    params = self.originParams.args;\n\n    var publishParams = {\n      widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_LOADFORM,\n      summaryDecorator: false,\n      guidForm: params.guidForm,\n      displayname: params.displayname,\n      guidEntity: params.guidEntity,\n      searchCriteriasApplied: self.preProcessValues(params.metadataFilters),\n      closeVisible: false,\n      buttons: [\n      {\n        text: bizagi.localization.getResource('workportal-menu-search'),\n        click: function click() {\n          var that = this;\n          var widget = $(this).dialog(\"option\", \"widget\");\n          var form = widget.form || {};\n\n          if (Object.keys(form).length !== 0 && form && form.validateForm()) {\n            var renderValues = [];\n            $.forceCollectData = true;\n            form.collectRenderValues(renderValues);\n            $.forceCollectData = false;\n\n            var filterObject = [];\n            var metadataFilters = [];\n\n            for (name in renderValues) {\n              if (typeof renderValues[name] !== 'function' && renderValues[name] !== '') {\n                var control = form.getRender(name);\n                self.dataService.defineFilterObject({ properties: control.properties, value: control.value }, filterObject, function (filter) {\n                  metadataFilters.push($.extend(filter, { id: control.properties.id, rangeQuery: control.properties.rangeQuery, displayValue: control.getDisplayValue(), displayName: control.properties.displayName }));\n                });\n              }\n            }\n\n            self.performQuery($.extend(params, { filters: filterObject, metadataFilters: metadataFilters }));\n\n            $(that).dialog('close');\n          }\n        } },\n\n      {\n        text: bizagi.localization.getResource(\"workportal-widget-dialog-box-close\"),\n        click: function click() {\n          $(this).dialog('close');\n        } }],\n\n\n      modalParameters: {\n        title: params.displayname } };\n\n\n\n    self.publish(\"showDialogWidget\", publishParams);\n    self.publish(\"onWidgetIncludedInDOM\");\n  },\n\n  /**\r\n      * Remove applied filter\r\n      * @param {string} xpath \r\n      * @param {to or from} rangeQuery \r\n      */\n  removeFilterApplied: function removeFilterApplied(xpath, rangeQuery) {\n    var self = this;\n    var params = self.originParams.args;\n\n    $.each(params.filters.filter(function (el) {\n      return el.xpath == xpath;\n    }), function (key, filterToRemove) {\n      self.removeFilterByType(filterToRemove, params.filters, rangeQuery);\n    });\n\n\n    $.each(params.metadataFilters.filter(function (el) {\n      return el.xpath == xpath;\n    }), function (key, filterToRemove) {\n      self.removeFilterByType(filterToRemove, params.metadataFilters, rangeQuery);\n    });\n\n    return params;\n  },\n\n  /**\r\n      * Remove filter by type\r\n      * @param {item of array} filterToRemove \r\n      * @param {array} filters \r\n      * @param {string (to or from)} rangeQuery \r\n      */\n  removeFilterByType: function removeFilterByType(filterToRemove, filters, rangeQuery) {\n    if (filterToRemove.searchType === \"range\") {\n      if (bizagi.util.isEmpty(filterToRemove.value.max) || bizagi.util.isEmpty(filterToRemove.value.min)) {\n        filters.splice(filters.indexOf(filterToRemove), 1);\n      } else\n      {\n        if (rangeQuery === \"to\") {\n          filterToRemove.value.max = \"\";\n        } else {\n          filterToRemove.value.min = \"\";\n        }\n      }\n    } else {\n      filters.splice(filters.indexOf(filterToRemove), 1);\n    }\n  },\n\n  /**\r\n      *\r\n      * @param params\r\n      */\n  performQuery: function performQuery(params) {\n    var self = this;\n    var dataParams = {\n      \"type\": \"SEARCH-ENGINE-VIEW\",\n      \"args\": params };\n\n\n    $.when(self.publish(\"changeWidget\", {\n      widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_HOMEPORTAL })).\n    done(function () {\n      var homeportalInstance = bizagi.injector.get('homeportal');\n      $.when(homeportalInstance.isReady()).done(function () {\n        homeportalInstance.pub(\"notify\", dataParams);\n      });\n    });\n  } });\n\n\n\nbizagi.injector.register('bizagi.workportal.widgets.mysearchcriteria', ['workportalFacade', 'dataService', 'processActionService', bizagi.workportal.widgets.mysearchcriteria], false);"]}