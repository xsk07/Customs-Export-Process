{"version":3,"sources":["jquery/common/base/js/lib/jquery.class.js","jquery/common/base/js/lib/jquery.tmpl.js","jquery/common/bizagi/js/services/bizagi.services.service.js","jquery/common/bizagi/js/services/bizagi.template.services.service.js","jquery/common/bizagi/js/bizagi.util.js","jquery/common/bizagi/js/bizagi.logging.js","jquery/common/bizagi/js/bizagi.l10n.js","jquery/tableau/lib/tableauwdc-2.3.js","jquery/tableau/js/bizagi.tableau.js"],"names":["_typeof","obj","Symbol","iterator","constructor","prototype","$","regs","getNext","current","nextPart","add","isContainer","type","getObject","objectName","roots","ret","i","parts","split","length","currents","isArray","window","c","undefined","str","String","extend","capitalize","s","cache","charAt","toUpperCase","substr","camelize","classize","toLowerCase","join","niceName","underscore","replace","sub","data","remove","obs","push","whole","inside","ob","jQuery","initializing","makeArray","isFunction","_extend","concatArgs","arr","args","concat","fnTest","test","xyz","inheritProps","newProps","oldProps","addTo","name","fn","tmp","this","_super","apply","arguments","clss","Class","callback","funcs","self","shift","isString","func","cur","f","_set_called","called","_use_call","newInstance","inst","rawInstance","setup","init","baseClass","fullName","defaults","klass","proto","_super_class","callee","hasOwnProperty","shortName","pop","namespace","appendToTmplItems","oldManip","domManip","htmlExpr","newTmplItems","wrappedItems","topTmplItem","key","itemKey","cloneIndex","stack","newTmplItem","options","parentItem","newItem","_wrap","tmpl","parent","nodes","calls","tiCalls","nest","tiNest","wrap","tiWrap","html","tiHtml","update","tiUpdate","_ctnt","each","appendTo","prependTo","insertBefore","insertAfter","replaceAll","original","selector","elems","l","tmplItems","insert","parentNode","nodeType","childNodes","clone","get","pushStack","complete","tmplItem","template","table","dmArgs","argsLength","fragClone","afterManip","fasttmpl","fast","bizagi","chrono","start","result","stop","_tmpl","nestedExecution","cacheTmplItem","buildRet","topLevel","wrapped","updateWrapped","build","removeTmplItemCache","call","map","dataItem","elem","buildTmplFn","innerHTML","encode","text","tag","_default","$2","open","close","if","else","$1","=","!","items","content","storeTmplItems","removeData","nested","frag","item","all","before","middle","after","unencode","el","document","createElement","markup","code","trim","slash","fnargs","target","parens","def","expr","exprAutoFnDetect","unescape","indexOf","params","Function","m","keySuffix","newClonedItems","getElementsByTagName","processItemKey","pntKey","pntItem","pntNode","getAttribute","cloneTmplItem","removeAttribute","_","filter","textOnly","e","innerText","textContent","outerHTML","div","appendChild","cloneNode","coll","getServerResourceDictionary","proxyPrefix","bizagiConfig","BIZAGI_PROXY_PREFIX","culture","BIZAGI_LANGUAGE","language","ajax","url","loader","version","rpcEnabled","dataType","async","getResourceDictionary","customTemplateFile","getResource","detectDevice","cachedTemplates","customTemplates","localization","cssRegex","loadingFileDeferred","loadCustomTemplates","defer","Deferred","when","getTemplateFile","done","response","temp","responseParts","responsePart","attr","resolve","promise","getTemplate","isCustomTemplate","enableCustomizations","hash","getHash","environment","internalGetTemplate","pipe","resolvedTemplate","getTemplateForRelease","getTemplateWidget","templates","getTemplateWebpart","containsHash","getUrlWithoutHashes","processAndReturnTemplate","loadTemplateFileForRelease","ready","index","valueTemplate","translatedTemplate","reject","JSON","parse","translate","substring","cachedTemplate","getTemplatePart","templateUrl","loadingTemplatePartExecution","loadingTemplatePart","assert","matches","match","cssFile","loadFile","src","subTemplate","id","console","log","originalEmptyMethod","empty","element","hasClass","loadingMessage","fastEmpty","children","originalPrependMethod","prepend","tagName","find","triggerHandler","originalAppendMethod","append","eval","originalTmplMethod","component","detach","addClass","jquery","is","loading","adjustable","resource","control","files","for","actions","enableTrace","enableDebug","enableChrono","message","icon","doc","logContainer","device","util","bizagi_notifications","headerAdditionalClass","containerAdditionalClass","itemIcon","title","location","bind","ui","popup","contentViewer","height","width","dialog","modal","_icon","getIcon","condition","logError","debug","getLogInstance","timer","chronos","millis","timestamp","profile","running","Date","getTime","profiling","enableProfiler","time","timeStamp","initAndStart","diff","timeEnd","profileEnd","stopAndLog","logTimers","templateRegex","templateSubExpressionRegex","resourceLocationDefinition","service","services","dictionaries","dictionary","readyDeferred","BIZAGI_ENABLE_CUSTOMIZATIONS","defaultDatetimeInfo","BIZAGI_DEFAULT_DATETIME_INFO","useLocalAndServerResources","BIZAGI_ENABLE_LOCAL_AND_SERVER_RESOURCES","observableElement","PouchDB","resourcesDatabase","auto_compaction","setLanguage","_getDictionary","isRTL","datePickerRegional","shortDateFormat","overrideSpecificResource","timeFormat","dictionaryService","BIZAGI_LOCAL_RESOURCES","overrides","overrideResources","trigger","loadLanguageExtension","loadLanguage","getLanguageFromCulture","fail","status","errorMessage","alert","resolvei18n","localizationObject","i18n","languages","defaultValue","getResourceByElementsNumber","numberElements","setResource","value","getMessageFromLocalization","messageStatus","messageType","isFromServer","nextToken","exec","enclosedValue","subExpressionToken","languageOverrides","defaultLanguage","resourceOverride","isObject","innerResource","userLanguage","_getUserLanguage","_getLocalAndServerResourcesDictionary","responseJSON","statusText","resourceDefinition","serverDictionaryPromise","resourcesDictionaryPromise","then","serverDictionary","_saveServerResourcesInDatabase","_getServerResourcesFromDatabase","dbResources","error","resourcesDicionary","resourcesDictionary","mixedDictionary","resourcesDB","languageDocId","applicationUrl","db","getDocument","currentDoc","saveDocument","_id","userLanguageParts","context","smartphone","tablet","DEVICES","printf","msg","arg","Array","slice","a","val","charCodeAt","Math","round","bizagiQueue","sync","queue","callbacks","addParallel","execute","starter","queueLength","deferred","deviceEnum","callInside","fx","contentWindow","browser","msie","execScript","toString","webkit","mozilla","callInsidePopup","CSSStyleDeclaration","getPropertyValue","setProperty","styleName","priority","setAttribute","rule","RegExp","escape","cssText","removeProperty","getPropertyPriority","style","nl2br","br2nl","controlValueIsChanged","properties","getValue","compareValue","originalValue","forceCollectData","state","includes","parseBoolean","getMaxZindex","elm","maxZindex","zindex","parseInt","css","equalizeHeights","heights","outerHeight","max","autoSave","deferredSave","_data","anonymizedUserInformation","username","email","domain","picture","isAnonymized","datepickerResource","closeText","prevText","nextText","currentText","monthNames","monthNamesShort","dayNames","dayNamesShort","dayNamesMin","weekHeader","dateFormat","firstDay","showMonthAfterYear","yearSuffix","liveProcessesEvents","newLiveProcess","createEvent","initEvent","routeEvents","route","saveEvent","lastWidget","nextWidget","liveSave","widgetName","deferredLiveSave","indeX","href","workportal","widgets","widget","BIZAGI_WORKPORTAL_WIDGET_PROFLY","saveLivePromise","dispatchEvent","md5","CryptoJS","p","lib","n","r","Base","b","h","mixIn","$super","create","q","WordArray","words","sigBytes","t","stringify","j","clamp","g","ceil","random","v","enc","Hex","k","Latin1","fromCharCode","u","Utf8","decodeURIComponent","Error","encodeURIComponent","BufferedBlockAlgorithm","reset","_nDataBytes","_append","_process","blockSize","_minBufferSize","min","_doProcessBlock","splice","Hasher","cfg","_doReset","finalize","_doFinalize","_createHelper","_createHmacHelper","HMAC","algo","abs","sin","MD5","_hash","w","x","y","z","A","B","C","D","d","floor","HmacMD5","multiReplace","mapDataToReplace","reg","pcFrom","pcTo","replaceAllGlobalRegExp","re","startsWith","getInitials","initials","sign","isNaN","measureString","string","fontSize","endsWith","suffix","isIE7","isIE","documentMode","isIE8","isIE9","isIE10","isIE11","navigator","userAgent","isIE11OrLower","isIE10OrLower","isEdge","appName","objectValues","array","Object","keys","itm","values","getIEVersion","sAgent","indexMSIE","isChrome","vendor","isFirefox","minVersion","ua","M","tem","appVersion","getBrowser","bw","emptyNavigatorInfo","info","setIphoneXOverrides","isNativePluginSupported","bizagiapp","isIphoneX","isiOSDevice","isNull","isBoolean","getInternetExplorerVersion","Number","isNumeric","parseFloat","isFinite","isGUID","mustImplement","notImplementedMethod","exe","encodeXpath","xpath","isEmpty","isEmptyObject","isEmptyCombo","object","property","other","decodeURI","infinityControl","finishDecoded","decodedValue","hasNonVisibleChars","ch","percent2Number","isObjectEmpty","isMapEmpty","replaceSelector","container","elementToReplace","unwrap","hasScroll","direction","identicalObjects","obj1","obj2","countProps","count","isScrolledIntoView","layout","scrollTop","elemTop","offset","top","centerElementIntoScroll","actualScroll","elementTop","elementHeight","newTop","encodeHtml","decodeHtmlEntities","getHashParams","initWebpart","webpart","initialized","loadingDeferred","getQueryString","pairs","pos","argname","extendQueryString","additionalParams","plainUrl","existingParams","newParams","param","getStackTrace","callstack","isCallstackPopulated","dont","exist","len","lines","opera","entry","currentFunction","caller","fname","highLightElement","setTimeout","removeClass","autoScrollBottom","elScrollHeight","scrollHeight","autoScrollInterval","autoScroll","itemScroll","limitTop","limitBottom","idInterval","outSide","clearInterval","mousemove","event","pageY","autoScrollTopInterval","autoScrollBottomInterval","classCSS","setInterval","valueMaxScrollBottom","innerHeight","removeAutoScroll","unbind","getMaxZIndex","zIndex","showPopup","callbackFn","left","newWindow","BAPopupWindow","BAPopupCallback","BACloseWindow","controls","submitForm","showQuirksModePopup","quirksModePage","BIZAGI_PATH_TO_BASE","BAQuirksPopupWindow","windowParams","popupWindow","quirksOnLoad","loadedBody","iframe","show","afterLoad","userParams","callbackParams","loadingFunction","body","resolveResult","createPopup","popupName","onClose","popupTitle","handleClose","overlay","closeButton","popupContent","hide","additionalClass","center","closeHandler","click","fullPopup","createOkCancelPopup","onOk","onCancel","buttonsContainer","buttonOk","buttonCancel","okHandler","cancelHandler","ok","cancel","buttons","closeQuirksModePopup","quirksPopup","getStyle","pathName","getFontFace","getAllChildrens","matchStyles","stringCss","awesomeBrowser","file","styleSheets","rules","cssRules","BIZAGI_ENVIRONMENT","cssTextOriginal","selectorText","lastLevel","styleSheet","suckBrowser","cookie","expires","days","setDate","getDate","raw","toUTCString","path","secure","decode","randomNumber","setContext","reloadCSS","queryString","_name","_call","_params","_singleton","singleton","_timeOut","timeout","_maxIterations","iterations","_context","_killWhenExitContext","killWhenExitContext","timeOut","maxIterations","itsRunning","timeInit","executeTimeOut","now","actualIterations","ieFunction","clearTimeout","pointer","timeOutRunning","isDate","dateField","timeField","resultDate","hasTime","resultTime","arrayDate","unicode2htmlencode","input","htmlHex","getHeadElement","hd","docEl","documentElement","firstChild","loadStyle","styleText","layoutGuid","node","getElementById","createTextNode","nodeValue","replaceChild","loadIconStyle","userfieldname","formatDecimalAndMoneyCell","tableData","externalMoneyFormat","moneyFormat","decimalFormat","externalDecimalFormat","decimalSymbol","decimalSeparator","digitGroupSymbol","groupSeparator","roundToDecimalPlace","decimalDigits","symbol","colorize","groupDigits","negativeFormat","positiveFormat","columnTitle","rows","fields","formatMoney","numberValue","formatDecimal","override","removeTrailingZeros","positive","BIZAGI_DEFAULT_CURRENCY_INFO","formatBoolean","formatInvariantBoolean","htmlContent","not","$element","format","formatCurrency","formatMonetaryCells","tmpResult","intSection","decimalSection","decimalResult","isNegative","decimalDigitPosition","fixDecimalDigits","getOnlyNumbersByString","stringValue","toFixed","numberToFixedString","pow","formatInvariantMoney","defaultFormat","allowDecimals","formatInvariantNumber","numberFormat","thousands","containsLetter","NaN","formatNumber","percentage","formatInvariantDate","dateTimeFormat","isValidDate","getFormatDate","formatDate","dateFormatter","formatDateFromInvariantStringDate","stringInvariantDate","dateValue","defaultFormatDate","H","getHours","getMinutes","getSeconds","ms","getMilliseconds","hideTimeWhenHourMinutesSecondsAreZero","formatValueByDataType","replaceLineBreak","formatMonetaryCell","formatDecimalCell","parseDate","valueOf","LZ","getDateFromFormat","getRelativeTime","date","onlyUnitsTime","timeZone","moment","tz","currentUser","timeZoneName","kendo","timeDiff","getTimeDiffDescription","unit","timeDivisor","unitAmount","resourceAgo","compareDates","date1","dateformat1","date2","dateformat2","d1","d2","getDifferenceBetweenDates","token","i_format","getFullYear","getMonth","E","getDay","isValidResource","months","i_val","year","getYear","month","hh","mm","ss","ampm","_getInt","month_name","day_name","ff","_isInteger","_val","minlength","maxlength","_token","preferEuro","generalFormats","monthFirst","dateFirst","checkList","analyzeTimeFormat","returnObj","show24Hours","showSeconds","separator","lastToken","getDateFromInvariant","showTime","INVARIANT_FORMAT","setHours","formatInvariant","getDateFromISO","ISO_FORMAT","formatISO","formatISO8601","dateObject","restartTimeToMidnight","isFormatISO8601","stringDate","sleep","delay","getDateFormatByDatePickerJqueryUI","sleepUntil","internalSleepUntil","sleepFor","browserSupportLocalStorage","setItemLocalStorage","localStorage","setItem","getItemLocalStorage","getItem","removeItemLocalStorage","removeItem","clearLocalStorage","clear","showConsoleLog","startLoading","stopLoading","elementToapply","isEventSupported","eventName","isSupported","needsFallback","circularDependencies","list","lastNodeAdded","addNode","OBJ","foundObjChildNode","_search","_addNode","nodeObj","addChild","resolved","seen","_getFirstNodeWithChilds","_resolve","_resetList","childs","hasObject","dependencyFrom","dependencyFromObj","dependencyTo","dependencyToObj","standardError","responseText","makeErrorMessage","multiactionError","toSearch","collection","cssExtended","instance","cssToAdd","cssExtendedApplyChanges","option","$this","attrToAdd","tmpStyle","arrProperties","resultProperties","cssProperty","canvas","sortJSON","way","sort","shortNumber","number","newNumber","lenghtNumber","escapeHtml","formatMonetaryValue","formatDecimalValue","formatDateValue","showNotification","div_sync","fadeIn","fadeOut","isModeOnline","isOfflineForm","dispose","arrayEach","getStandardNotation","decimalNumber","exponentialNumber","scientificNotationFormat","sdLimit","expMinLimit","expMaxLimit","sNregex","sNFormat","exp","prefix","originalPointIndex","tempParts","significantDigits","intPart","from","to","significantFlag","firstDigit","restDigits","stripslashes","isHTMLValidText","resetData","sessionStorage","isAuthenticate","changeData","isMobileDevice","isNativeMobileDevice","isTabletDevice","isAndroidTabletDevice","isiOSTabletDevice","isSmartphoneDevice","isAndroidSmartphoneDevice","isiOSSmartphoneDevice","formContainer","getFormContainer","formParams","getParams","detectAndroidVersion","indexAndroid","androidVersion","getPathUrl","solvedUrl","locationParts","pathname","basePath","protocol","host","pathToBaseBackwards","getAndroidVersion","mobileImagePath","image","dataImage","photoSplit","b64toBlob","b64Data","contentType","sliceSize","byteCharacters","atob","byteArrays","byteNumbers","byteArray","Uint8Array","Blob","stringToByteArray","hasOfflineFormsEnabled","BIZAGI_ENABLE_OFFLINE_FORMS","isFlatDesignEnabled","BIZAGI_ENABLE_FLAT","isMobileGridEnabled","BIZAGI_ENABLE_MOBILE_GRID","isNativeHeaderEnabled","NATIVE_HEADER_ENABLE","isQuickSearchEnabled","BIZAGI_ENABLE_QUICK_SEARCH","isOAuth2Enabled","BIZAGI_AUTH_TYPE","getNativeComponent","BIZAGI_NATIVE_COMPONENT","isVersionSupported","supported","BIZAGI_SERVER_VERSION","isCordovaSupported","cordova","isTabletNativeSupported","isSmartphoneNativeSupported","plugins","Keyboard","hideKeyboardAccessoryBar","detectRealDevice","settedDevice","BIZAGI_DEFAULT_DEVICE","isAndroid","isAndroidDevice","getChannelType","BIZAGI_SERVER_CHANNEL","channel","isDataUrl","getDataUrl","currentUrl","tempUrl","processFailMessage","getErrorFormatted","errorCode","errorType","tmp_block_header","disableWorkPortalMenu","blockHeight","position","background","opacity","z-index","enableWorkPortalMenu","enableMenuSection","idMenu","controllers","menu","setActiveSection","getURLWithASlashAtTheEnd","downloadFile","isCompleteUrl","showModalOnFail","_defer","_showModalOnFail","_urlDownload","_iframeExists","_onCantDownload","that","defaultMessage","tryCatch","contentDocument","isMaintenanceWindow","jsonResponse","showModal","maintenanceWindows","modalError","_reject","onload","downloadFileByPOST","inputValues","formPOST","contents","showErrorAlertDialog","submit","executeActionRoutingFromWorkportal","idCase","idWorkItem","publish","action","BIZAGI_WORKPORTAL_ACTION_ROUTING","getMessageFromNetworkState","sanitizeHTML","sanified","DOMPurify","sanitize","arrayUnique","debounce","wait","immediate","later","callNow","debounce2","fire","isNativeImageEditorSupported","enableImageEditor","validateUrlWellFormed","urlWithProtocol","nodeWithUrl","cleanNodeWithUrl","IN_PLACE","urlWithoutSpaces","encodeHtmlText","valueToDisplay","decodedDisplayValue","encodeString","setCaretPosition","ctrl","setSelectionRange","focus","createTextRange","range","collapse","moveEnd","moveStart","select","getCaretPosition","oField","iCaretPos","selection","oSel","createRange","selectionStart","escapeRegex","getFeatureObject","featureObjectCache","features","getConfigFeatures","pivot","getFeatureObjectIte","bizagiConfiguration","BIZAGI_MOBILE_FEATURES","resetConfigFeatures","isFailResponse","formatItem","performTermMatches","strValue","term","withoutFormat","highlightMatches","regEx","getDesktopResolution","resolution","devicePixelRatio","screenWidth","screen","screenHeight","deviceXDPI","logicalXDPI","getDeviceCode","BIZAGI_DEVICE_MARKET_NAME","normalizeType","normalizeQueryType","hideOrShowXToCloseDialog","isEnableFeature","feature","isHtml","possibleHtml","_try","_catch","listFunctions","_listFunctions","next","end","variable","reduce","newVar","prop","getComputedStyle","scroll","overflow","scrollerParent","HTMLElement","SVGElement","ps","parents","scrollingElement","startkendo","kendoMobileApplication","mobile","Application","skin","browserHistory","progress","started","bizagiNavigate","navigate","isMashupContext","BIZAGI_MASHUP_CONTEXT","isSharepointContext","BIZAGI_SHAREPOINT_CONTEXT","isWebpartContext","isWebpart","startTimeline","showTimeLine","startGraphicquery","showGraphicQuery","startSelectUser","showSelectUser","userId","userName","guid","isEmptyValue","initializeReferrerParams","referrerParams","getLPQueriesParameters","sidebarData","getLPQueriesSelectedItemFromTree","selectedTreeItem","setLPQueriesParameters","parametersSidebar","tree","cleanLPQueriesParameters","setLPQueriesReferrer","referrer","isConnected","connection","Connection","NONE","onLine","isRenderingUrlAllowed","request","endPoint","whiteList","pattern","applyEyeFunction","setShowIcon","addEvent","setHideIcon","direct","className","ev","accessibilityEnter","cb","extraEvent","preventDefault","stopPropagation","which","recreateNativeButtons","navigation","setNavigationButtons","isOverrideFeatureEnabled","featureName","createDynamicClass","nameClass","renderParams","dynamicFunction","es","es-ES","es-AR","es-BO","es-Cl","es-CO","es-CR","es-DO","es-EC","es-SV","es-GT","es-HN","es-MX","es-NI","es-PA","es-PY","es-PR","es-PE","es-US","es-UY","es-VE","en","en-AU","en-BZ","en-CA","en-029","en-IN","en-IE","en-JM","en-MY","en-NZ","en-PH","en-SG","en-ZA","en-TT","en-GB","en-US","en-ZW","de","de-AT","de-DE","de-LI","de-LU","de-CH","fr","fr-BE","fr-CA","fr-LU","fr-MC","fr-CH","fr-FR","it","it-IT","it-CH","ja","ja-JA","ja-JP","nl","nl-NL","nl-BE","pt","pt-BR","pt-PT","ru","ru-RU","cs","cs-CZ","ar","ar-DZ","ar-BH","ar-EG","ar-IQ","ar-JO","ar-KW","ar-LB","ar-LY","ar-MA","ar-OM","ar-QA","ar-SA","ar-SY","ar-TN","ar-AE","ar-YE","zh","zh-HK","zh-MO","zh-CN","zh-Hans","zh-SG","zh-TW","zh-Hant","getNormalizedDate","fullFormat","dateTime","setMilliseconds","isFeatureEnabled","getLastProcessInboxKey","lastProcessInboxKey","getUserHash","lastProcessInboxInit","getLastProcessInboxCreate","processInfo","createLastProcessInboxProcess","sortInfo","createLastProcessInboxSort","filterInfo","createLastProcessInboxFilter","processColumnsInfo","createLastProcessInboxColumns","inputTrayInfo","createLastProcessInboxInputTray","processInfoName","idWorkflow","sortDirection","sortFieldName","sortOrder","filterValue","filterFieldName","filterType","processColumns","getLastProcessInbox","lastProcessInbox","setLastProcessInbox","smartInboxId","setLastProcessInboxProcessColumns","getLiveFiltersFromStorage","filters","modelStorage","serialize","setLiveFiltersToStorage","assign","setLastProcessInboxLiveFilter","liveFilters","setLastProcessInboxSort","setLastProcessInboxFilter","setLastProcessInboxInputTray","inputTray","getLastProcessInboxProcessInfo","allProcesses","getLastProcessInboxSmartInboxId","getLastProcessInboxSort","getLastProcessInboxFilter","getLastProcessInboxLiveFilter","getLastProcessInboxProcessColumns","getLastProcessInboxInputTray","removeLastProcessInbox","removeLastProcessInboxSort","removeLastProcessLiveFilters","getSyncTimeStampKey","syncTimeStampKey","storeSyncTimeStamp","currentDate","getSyncTimeStamp","syncTimeStamp","BIZAGI_USER","BIZAGI_DOMAIN","hashCode","defaultWidget","newValueStr","_preferService","preferences","_widgets","_mobile","set","newVal","_desktop","_newValueView","changePreference","INBOX_VIEW_TYPE","_actualValue","getPreference","BIZAGI_WORKPORTAL_WIDGET_INBOX","BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID","_device","isMobile","getMobileFeaturesKey","userKey","mobileFeaturesKey","getMobileFeatures","stringFeatures","storeMobileFeatures","mobileFeatures","storedFeatures","updatedFeatures","getCardviewMaxColumsAllowed","maxColumns","maxColumnsEnabled","enabled","blobTob64","blob","onlyData","reader","FileReader","readAsDataURL","onloadend","base64data","blobToText","readAsText","binaryData","newUrl","deepExtend","out","getColumnType","originalType","mapAlignClassName","align","rigth","justify","default","isMobileErrorTracesEnabled","mobileErrorTracesEnabled","mobileErrorTraces","isMobileSmartInboxEnabled","mobileSmartInboxEnabled","mobileSmartInbox","isMobileLiveFiltersEnabled","mobileLiveFiltersEnabled","mobileLiveFilters","any","grep","first","groupBy","downloadBlobFile","blobFile","fileName","msSaveOrOpenBlob","URL","createObjectURL","link","download","revokeObjectURL","removeChild","handleJSONResponse","jsonFile","err","bzValidator","validators","errors","callbackValidator","warn","validate","callbackResponse","forEach","validator","isValid","modules","installedModules","__webpack_require__","moduleId","exports","module","loaded","Cookies","getApprovedOrigins","originsString","addApprovedOrigin","origin","origins","newOriginString","allEnums","phaseEnum","interactivePhase","authPhase","gatherDataPhase","authPurposeEnum","ephemeral","enduring","authTypeEnum","none","basic","custom","dataTypeEnum","bool","datetime","float","int","geometry","columnRoleEnum","dimension","measure","columnTypeEnum","continuous","discrete","aggTypeEnum","sum","avg","median","countd","geographicRoleEnum","area_code","cbsa_msa","city","congressional_district","country_region","county","state_province","zip_code_postcode","latitude","longitude","unitsFormatEnum","millions","billions_english","billions_standard","numberFormatEnum","currency","scientific","localeEnum","america","brazil","china","france","germany","japan","korea","spain","joinEnum","inner","NativeDispatcher","nativeApiRootObj","_initPublicInterface","_initPrivateInterface","_submitCalled","publicInterface","abortForAuth","_abortForAuth","abortWithError","_abortWithError","addCrossOriginException","_addCrossOriginException","_log","_submit","reportProgress","_reportProgress","WDCBridge_Api_abortForAuth","api","WDCBridge_Api_abortWithError","destOriginList","WDCBridge_Api_addCrossOriginException","WDCBridge_Api_log","WDCBridge_Api_submit","_initCallbackCalled","_shutdownCallbackCalled","privateInterface","_initCallback","_shutdownCallback","_schemaCallback","_tableDataCallback","_dataDoneCallback","WDCBridge_Api_initCallback","WDCBridge_Api_shutdownCallback","schema","standardConnections","WDCBridge_Api_schemaCallbackEx","WDCBridge_Api_schemaCallback","tableName","WDCBridge_Api_tableDataCallback","WDCBridge_Api_reportProgress","WDCBridge_Api_dataDoneCallback","Table","Enums","Shared","tableauApiObj","privateApiObj","globalObj","_hasAlreadyThrownErrorSoDontThrowAgain","changeTableauApiObj","onerror","_errorHandler","_initTriggerFunctions","_initDeprecatedFunctions","makeConnector","_makeConnector","registerConnector","_registerConnector","line","column","errorObj","shutdown","wdc","functionNames","ii","_wdc","triggerInitialization","_triggerInitialization","triggerSchemaGathering","_triggerSchemaGathering","triggerDataGathering","_triggerDataGathering","triggerShutdown","_triggerShutdown","getSchema","tablesAndIncrementValues","tableAndIncremntValue","isJoinFiltered","filterColumnId","tableInfo","incrementValue","filterValues","getData","initCallback","headersCallback","_headersCallback","dataCallback","_dataCallback","shutdownCallback","fieldNames","types","lastRecordToken","moreData","ApprovedOrigins","SimulatorDispatcher","_initMessageHandling","addEventListener","_receiveMessage","_onDomContentLoaded","postMessage","_buildMessagePayload","opener","_packagePropertyValues","connectionName","tableau","connectionData","password","usernameAlias","incrementalExtractColumn","versionNumber","locale","authPurpose","platformOS","platformVersion","platformEdition","platformBuildNumber","_applyPropertyValues","props","msgName","msgData","msgObj","_sendMessage","messagePayload","messageHandlers","wdcHandler","_sourceWindow","_sourceOrigin","_getPayloadObj","payloadString","payload","_getWebSecurityWarningConfirm","hostName","localizedWarningTitle","_getLocalizedString","isConfirmed","confirm","_getCurrentLocale","currentBrowserLanguage","stringKey","deStringsMap","enStringsMap","esStringsMap","jaStringsMap","ko","evt","payloadObj","source","phase","_tableau","errorMsg","addCrossOriginExceptionCompleted","logMsg","progressMsg","dataCallbackFn","_dataCallbackFn","appendRows","_appendRows","copyFunctions","dest","linkObjectProperties","propertyList","propertyName","defineProperty","enumerable","configurable","tableauProperties","$defineProperty","search","TypeError","stringLength","searchString","searchLength","writable","__WEBPACK_AMD_DEFINE_RESULT__","global","factory","_document","_cacheKeyPrefix","_maxExpireDate","_cachedDocumentCookie","_renewCache","_cache","_getExtendedOptions","_getExpiresDate","_generateCookieString","expire","_isValidDate","Infinity","cookieString","_getCacheFromString","documentCookie","cookieCache","cookiesArray","cookieKvp","_getKeyValuePairFromCookieString","separatorIndex","decodedKey","_areEnabled","areEnabled","cookiesExport","webSecurityWarning","starts_with_slashes","ends_with_slashes","pluses","query_separator","uri_parser","parseQuery","Uri","uriParts","parseUri","queryPairs","query","hasAuthorityPrefixUserPref","thisArg","T","O","kValue","hasAuthorityPrefix","isColonUri","getQueryParamValue","getQueryParamValues","deleteQueryParam","keyMatchesFilter","valMatchesFilter","addQueryParam","hasQueryParam","replaceQueryParam","oldVal","method","scheme","userInfo","port","addTrailingSlash","anchor","QWebChannelMessageTypes","QObject","webChannel","__id__","objects","__objectSignals__","__propertyCache__","addSignal","signalData","isPropertyNotifySignal","signalName","signalIndex","connect","signal","disconnect","idx","invokeSignalCallbacks","signalArgs","connections","unwrapQObject","objectId","qObject","destroyed","propertyNames","unwrapProperties","propertyIdx","propertyUpdate","signals","propertyMap","propertyIndex","propertyValue","signalEmitted","methods","methodData","methodName","methodIdx","argument","propertyInfo","notifySignalData","valueToSend","enums","QWebChannel","transport","send","onmessage","handleSignal","handleResponse","handlePropertyUpdate","execCallbacks","execId","MAX_VALUE","MIN_VALUE","Utilities","qwebchannel","bootstrappingFinished","_dispatcher","_shared","dispatcher","shared","tableauVersionBootstrap","ReportVersionNumber","qt","webChannelTransport","_nativeSetupCompleted","TableauController","_biz_bizagiTableau","setApplicationUrl","resourceDefinitionLocation","l10n","templateService","_biz_uiTableau","renderTmpl","buildConnector","_deferredInitUi","UITableau","loadTreeView","nextFn","fromBack","change","fileReader","contentJson","configuration","_validateStructConfiguration","display","_loadConfiguration","exception","getElementsByClassName","_showMessageAlert","tableauTreeEl","_biz_globalsTableau","entities","disableBtn","entityNodeEl","entity","divCheckboxEl","_createTreeCheckbox","_createExpandButton","attribs","childNodesEl","containerDivEl","_loadChildNodes","btnId","disabled","whiteLogo","productBuild","blackLogo","loadEntityProcessTable","backFn","tbodyEl","entityIndexes","processByEntity","rowEl","firstColumnEl","secondColumnEl","_createSelectEl","entityIndex","selectEl","processId","onchange","processesRelated","optionEl","displayName","nodeEl","attrib","checkboxId","leaf","xpaths","isProcessEntity","attribName","checkboxChildId","childNodesRelEl","nodeRelEl","labelText","root","inputCheckboxEl","labelCheckboxEl","onclick","inputCheckEL","childrenContainerEl","parentElement","rootElementId","rootIndex","parentElementId","splittedId","elementId","selectedEntities","parentEl","uncheckParent","_updateParentElements","buttonEl","entityName","processes","rootId","rootCheckboxEl","oldEntityIndexes","checkboxEl","loadResumeConfiguration","submitFn","backToTree","resumeStep","tmpConfiguration","selectNode","getSelection","removeAllRanges","addRange","showFailedConnectionMessage","BizagiTableau","_applicationUrl","_utilsTableau","UtilsTableau","clientId","clientSecret","setConnectionDataProp","setAuthData","_getAccessToken","_getEntities","_next","showNextStep","queryByProcess","processByEntityKeys","validAttribs","_generateColumns","attributes","tableCols","_parseString","_getDataWrapper","requestObj","retries","_getData","doneCallback","_retry","dataConnector","getConnectionData","authData","getAuthData","bodyRequest","beforeSend","setRequestHeader","accessToken","success","record","colId","attributeName","firstLetterLowerCase","dataRows","globals","btoa","access_token","isNewWebEngine","DOMContentLoaded_event","schemaCallback","entitiesMap","entitiesList","tables","tableId","alias","columns","_getDataCallback","baseUrl","queryParameter","mainDeferred","ITEMS_PAGE","totalRecords","numPages","calculateNumOfPages","doneFn","currentPages","_stepCompleteCallback","page","getApplicationUrl","ex","section","restart","pages","versionSplitted","GlobalsTableau","_deferredInitWDC","bizagiConnector","authType","utilsTableau"],"mappings":"AAAA,SAASA,QAAQC,GAAwU,OAA9ND,QAApD,mBAAXE,QAAoD,iBAApBA,OAAOC,SAAkC,SAAiBF,GAAM,cAAcA,GAAwB,SAAiBA,GAAM,OAAOA,GAAyB,mBAAXC,QAAyBD,EAAIG,cAAgBF,QAAUD,IAAQC,OAAOG,UAAY,gBAAkBJ,IAAsBA,IAAM,SAAWK,GAIvX,IAAIC,EACO,MADPA,EAEM,KAFNA,EAGK,wBAHLA,EAIK,oBAJLA,EAKI,oBALJA,EAMQ,gBANRA,EAOG,KAEPC,EAAU,SAAiBC,EAASC,EAAUC,GAC5C,OAAOF,EAAQC,IAAaC,IAAQF,EAAQC,GAAY,KAE1DE,EAAc,SAAqBH,GACjC,IAAII,EAAOb,QAAQS,GACnB,OAAOI,IAAiB,YAARA,GAA8B,UAARA,IAExCC,EAAY,SAAmBC,EAAYC,EAAOL,GAEhD,IAGAF,EACAQ,EACAC,EALIC,EAAQJ,EAAaA,EAAWK,MAAMb,GAAY,GACtDc,EAASF,EAAME,OACfC,EAAWhB,EAAEiB,QAAQP,GAASA,EAAQ,CAACA,GAASQ,QAIhDC,EAAI,EAGJ,GAAc,GAAVJ,EACF,OAAOC,EAAS,GAElB,KAAOb,EAAUa,EAASG,MAAM,CAC9B,IAAKP,EAAI,EAAGA,EAAIG,EAAS,GAAKT,EAAYH,GAAUS,IAClDT,EAAUD,EAAQC,EAASU,EAAMD,GAAIP,GAEvC,GAAIC,EAAYH,SAIFiB,KAFZT,EAAMT,EAAQC,EAASU,EAAMD,GAAIP,IAO/B,OAHY,IAARA,UACKF,EAAQU,EAAMD,IAEhBD,IAcfU,EAAMrB,EAAEsB,OAAStB,EAAEuB,OAAOvB,EAAEsB,QAAU,GAAI,CAUxCd,UAAWA,EAMXgB,WAAY,SAAoBC,EAAGC,GACjC,OAAOD,EAAEE,OAAO,GAAGC,cAAgBH,EAAEI,OAAO,IAW9CC,SAAU,SAAkBL,GAE1B,OADAA,EAAIJ,EAAIU,SAASN,IACRE,OAAO,GAAGK,cAAgBP,EAAEI,OAAO,IAO9CE,SAAU,SAAkBN,EAAGQ,GAG7B,IAFA,IAAIpB,EAAQY,EAAEX,MAAMb,GACpBW,EAAI,EACGA,EAAIC,EAAME,OAAQH,IACvBC,EAAMD,GAAKS,EAAIG,WAAWX,EAAMD,IAGlC,OAAOC,EAAMoB,KAAKA,GAAQ,KAU5BC,SAAU,SAAkBT,GAC1BJ,EAAIU,SAASlB,MAAMD,GAAI,MAWzBuB,WAAY,SAAoBV,GAC9B,OAAOA,EAAEW,QAAQnC,EAAa,KAAKmC,QAAQnC,EAAY,SAASmC,QAAQnC,EAAY,SAASmC,QAAQnC,EAAW,KAAK+B,eAavHK,IAAK,SAAaZ,EAAGa,EAAMC,GACzB,IAAIC,EAAM,GAYV,OAXAA,EAAIC,KAAKhB,EAAEW,QAAQnC,GAAe,SAAUyC,EAAOC,GAEjD,IAAIC,EAAKpC,EAAUmC,EAAQL,EAAuB,kBAAVC,GAAuBA,EAASA,GACxEhC,EAAOb,QAAQkD,GACf,MAAc,WAATrC,GAA8B,aAATA,GAAiC,OAATA,EAIzC,GAAKqC,GAHZJ,EAAIC,KAAKG,GACF,QAKJJ,EAAIzB,QAAU,EAAIyB,EAAI,GAAKA,KA1JsU,CA8J3WK,QACH,SAAW7C,GAGT,IAAI8C,GAAe,EACnBC,EAAY/C,EAAE+C,UACdC,EAAahD,EAAEgD,WACf/B,EAAUjB,EAAEiB,QACZgC,EAAUjD,EAAEuB,OACZ2B,EAAa,SAAoBC,EAAKC,GACpC,OAAOD,EAAIE,OAAON,EAAUK,KAG9BE,EAAS,MAAMC,MAAK,WAClBC,OACG,aAAe,KAKpBC,EAAe,SAAsBC,EAAUC,EAAUC,GAEvD,IAAK,IAAIC,KADTD,EAAQA,GAASF,EACAA,EAEfE,EAAMC,GAAQb,EAAWU,EAASG,KAClCb,EAAWW,EAASE,KACpBP,EAAOC,KAAKG,EAASG,IAAS,SAAUA,EAAMC,GAC5C,OAAO,WACL,IACAnD,EADIoD,EAAMC,KAAKC,OAWf,OANAD,KAAKC,OAASN,EAASE,GAIvBlD,EAAMmD,EAAGI,MAAMF,KAAMG,WACrBH,KAAKC,OAASF,EACPpD,GAbmB,CAe5BkD,EAAMH,EAASG,IAASH,EAASG,IA4PvCO,EAAOpE,EAAEqE,MAAQ,WACXF,UAAUpD,QACZqD,EAAK7C,OAAO2C,MAAME,EAAMD,YAK5BlB,EAAQmB,EAAM,CAqDZE,SAAU,SAAkBC,GAG1B,IACAC,EADIpB,EAAOL,EAAUoB,WAWrB,OARAI,EAAQnB,EAAKqB,QAERxD,EAAQsD,KACXA,EAAQ,CAACA,IAGXC,EAAOR,KAEA,WAOL,IANA,IACAU,EAGAC,EAJIC,EAAM1B,EAAWE,EAAMe,WAE3BpD,EAASwD,EAAMxD,OACf8D,EAAI,EAGGA,EAAI9D,EAAQ8D,KACjBF,EAAOJ,EAAMM,OAKbH,EAA0B,iBAARC,IACFH,EAAKM,cACnBN,EAAKO,OAASJ,GAEhBC,GAAOF,EAAWF,EAAKG,GAAQA,GAAMT,MAAMM,EAAMI,GAAO,IACpDC,EAAI9D,EAAS,IACf6D,GAAO3D,EAAQ2D,IAAQA,EAAII,UAAY,CAACJ,GAAOA,IAGnD,OAAOA,IAgBXpE,UAAWR,EAAEsB,OAAOd,UAYpByE,YAAa,WACX,IACA7B,EADI8B,EAAOlB,KAAKmB,cAQhB,OANID,EAAKE,QACPhC,EAAO8B,EAAKE,MAAMlB,MAAMgB,EAAMf,YAE5Be,EAAKG,MACPH,EAAKG,KAAKnB,MAAMgB,EAAMjE,EAAQmC,GAAQA,EAAOe,WAExCe,GA4BTE,MAAO,SAAeE,EAAWC,GAE/B,OADAvB,KAAKwB,SAAWvC,GAAQ,EAAM,GAAIqC,EAAUE,SAAUxB,KAAKwB,UACpDrB,WAETgB,YAAa,WACXrC,GAAe,EACf,IAAIoC,EAAO,IAAIlB,KAEf,OADAlB,GAAe,EACRoC,GAkBT3D,OAAQ,SAAgBgE,EAAUE,EAAOC,GAEhB,iBAAZH,IACTG,EAAQD,EACRA,EAAQF,EACRA,EAAW,MAERG,IACHA,EAAQD,EACRA,EAAQ,MAGVC,EAAQA,GAAS,GACjB,IAEA7B,EAAyB9D,EAFrB4F,EAAe3B,KACnBC,EAASD,KAAKjE,UAad,SAASsE,IAEP,IAAIvB,EAEJ,OAAIkB,KAAKlE,cAAgBuE,GAASF,UAAUpD,OACnCoD,UAAUyB,OAAOrE,OAAO2C,MAAMC,UAAUyB,OAAQzB,WAEhDH,KAAKK,MAAMY,YAAYf,MAAMF,KAAKK,MAAOF,WAIpD,IAAKN,KAnBLf,GAAe,EACf/C,EAAY,IAAIiE,KAChBlB,GAAe,EAEfW,EAAaiC,EAAOzB,EAAQlE,GAefiE,KACPA,KAAK6B,eAAehC,KACtBQ,EAAMR,GAAQG,KAAKH,IAQvB,GAHAJ,EAAagC,EAAOzB,KAAMK,GAGtBkB,EAAU,CAEZ,IAAI1E,EAAQ0E,EAASzE,MAAM,MAC3BgF,EAAYjF,EAAMkF,MAClB5F,EAAUiE,EAAK5D,UAAUK,EAAMoB,KAAK,KAAMf,QAAQ,GAClD8E,EAAY7F,EAGZA,EAAQ2F,GAAazB,EAIvBpB,EAAQoB,EAAO,CACbtE,UAAWA,EACXiG,UAAWA,EACXF,UAAWA,EACXhG,YAAauE,EACbkB,SAAUA,IAIZlB,EAAMtE,UAAUsE,MAAQA,EAAMtE,UAAUD,YAAcuE,EAatD,IAAIjB,EAAOiB,EAAMe,MAAMlB,MAAMG,EAAOnB,EAAW,CAACyC,GAAexB,YAO/D,OALIE,EAAMgB,MACRhB,EAAMgB,KAAKnB,MAAMG,EAAOjB,GAAQ,IAI3BiB,KA8FXD,EAAKrE,UAWLuE,SAAWF,EAAKE,SAjqBlB,CAoqBGzB,QC9zBH,SAAWA,EAAQzB,GACjB,IACoC6E,EADhCC,EAAWrD,EAAOiB,GAAGqC,SAAkCC,EAAW,kCACtEC,EAAe,GAAGC,EAAe,GAAqBC,EAAc,CAAEC,IAAK,EAAGlE,KAAM,IAAKmE,EAAU,EAAEC,EAAa,EAAEC,EAAQ,GAE5H,SAASC,EAAYC,EAASC,EAAYhD,EAAIxB,GAI5C,IAAIyE,EAAU,CACZzE,KAAMA,IAASwE,EAAaA,EAAWxE,KAAO,IAC9C0E,MAAOF,EAAaA,EAAWE,MAAQ,KACvCC,KAAM,KACNC,OAAQJ,GAAc,KACtBK,MAAO,GACPC,MAAOC,EACPC,KAAMC,EACNC,KAAMC,EACNC,KAAMC,EACNC,OAAQC,GAaV,OAXIhB,GACFhE,EAAOtB,OAAOwF,EAASF,EAAS,CAAEM,MAAO,GAAID,OAAQJ,IAEnDhD,IAEFiD,EAAQE,KAAOnD,EACfiD,EAAQe,MAAQf,EAAQe,OAASf,EAAQE,KAAKpE,EAAQkE,GACtDA,EAAQP,MAAQC,GAEfE,EAAM5F,OAASuF,EAAeD,GAAcI,GAAWM,GAEnDA,EAITlE,EAAOkF,KAAK,CACVC,SAAU,SACVC,UAAW,UACXC,aAAc,SACdC,YAAa,QACbC,WAAY,gBACd,SAAUvE,EAAMwE,GACdxF,EAAOiB,GAAGD,GAAQ,SAAUyE,GAC1B,IAAuCC,EAAM3H,EAAE4H,EAAEC,EAA7C9H,EAAM,GAAG+H,EAAS7F,EAAOyF,GAC7BpB,EAAyB,IAAhBlD,KAAKjD,QAAgBiD,KAAK,GAAG2E,WAGtC,GADA1C,EAAoBI,GAAgB,GAChCa,GAA8B,KAApBA,EAAO0B,UAAgD,IAA7B1B,EAAO2B,WAAW9H,QAAkC,IAAlB2H,EAAO3H,OAC/E2H,EAAOL,GAAUrE,KAAK,IACtBrD,EAAMqD,SACD,CACL,IAAKpD,EAAI,EAAG4H,EAAIE,EAAO3H,OAAQH,EAAI4H,EAAG5H,IACpC8F,EAAa9F,EACb2H,GAAS3H,EAAI,EAAIoD,KAAK8E,OAAM,GAAQ9E,MAAM+E,MAC1ClG,EAAOiB,GAAGuE,GAAUnE,MAAMrB,EAAO6F,EAAO9H,IAAK2H,GAC7C5H,EAAMA,EAAI0C,OAAOkF,GAEnB7B,EAAa,EACb/F,EAAMqD,KAAKgF,UAAUrI,EAAKkD,EAAM6E,EAAOJ,UAKzC,OAHAG,EAAYxC,EACZA,EAAoB,KACpBpD,EAAOoE,KAAKgC,SAASR,GACd9H,MAIXkC,EAAOiB,GAAGvC,OAAO,CAGf0F,KAAM,SAAc3E,EAAMuE,EAASC,GACjC,OAAOjE,EAAOoE,KAAKjD,KAAK,GAAI1B,EAAMuE,EAASC,IAI7CoC,SAAU,WACR,OAAOrG,EAAOqG,SAASlF,KAAK,KAI9BmF,SAAU,SAAkBtF,GAC1B,OAAOhB,EAAOsG,SAAStF,EAAMG,KAAK,KAGpCmC,SAAU,SAAkB/C,EAAMgG,EAAO9E,EAAUuC,GAGjD,GAAIzD,EAAK,IAAMA,EAAK,GAAGwF,SAAU,CAE/B,IADA,IAAwEM,EAApEG,EAASxG,EAAOE,UAAUoB,WAAWmF,EAAalG,EAAKrC,OAAOH,EAAI,EAC/DA,EAAI0I,KAAgBJ,EAAWrG,EAAOP,KAAKc,EAAKxC,KAAM,eACzD0I,EAAa,IACfD,EAAO,GAAK,CAACxG,EAAOE,UAAUK,KAE5B8F,GAAYxC,IACd2C,EAAO,GAAK,SAAUE,GAEpB1G,EAAOoE,KAAKuC,WAAWxF,KAAMuF,EAAWjF,KAG5C4B,EAAShC,MAAMF,KAAMqF,QAErBnD,EAAShC,MAAMF,KAAMG,WAMvB,OAJAuC,EAAa,EACRT,GACHpD,EAAOoE,KAAKgC,SAAS5C,GAEhBrC,QAIXnB,EAAOtB,OAAO,CAGZkI,SAAU,SAAkBxC,EAAM3E,EAAMuE,EAASC,GAC/CD,EAAUA,GAAW,GACrB7G,EAAEuB,OAAOsF,EAAS,CAAE6C,MAAM,IAC1BC,OAAOC,OAAOC,MAAM,YACpB,IAAIC,EAASjH,EAAOoE,KAAKA,EAAM3E,EAAMuE,EAASC,GAE9C,OADA6C,OAAOC,OAAOG,KAAK,YACZD,GAIT7C,KAAM,SAAc+C,EAAO1H,EAAMuE,EAASC,GACnCD,GAAYA,EAAQoD,kBAAiBC,EAAgB,IAC1D,IAAIvJ,EAEAwJ,EAFIC,GAAYtD,EAChB4C,EAAO7C,GAAWA,EAAQ6C,KAE9B,GAAIU,EAEFtD,EAAaP,EACbyD,EAAQnH,EAAOsG,SAASa,IAAUnH,EAAOsG,SAAS,KAAMa,GACxD1D,EAAe,QACV,IAAK0D,EAYV,OATAA,EAAQlD,EAAWG,KACnBZ,EAAaS,EAAWN,KAAOM,EAC/BA,EAAWK,MAAQ,GACfL,EAAWuD,SACbC,EAAcxD,EAAYA,EAAWuD,SAGvCF,EAAWI,EAAMzD,EAAY,KAAMA,EAAWG,KAAKpE,EAAQiE,GAAa4C,GACnE7C,GAAYA,EAAQoD,iBAAiBO,IACnCd,EAAOS,EAAWtH,EAAOsH,GAElC,OAAKH,GAGe,mBAAT1H,IACTA,EAAOA,EAAKmI,KAAK3D,GAAc,KAE7BD,GAAWA,EAAQwD,SACrBC,EAAczD,EAASA,EAAQwD,SAEjC1J,EAAMkC,EAAO5B,QAAQqB,GACrBO,EAAO6H,IAAIpI,GAAM,SAAUqI,GACzB,OAAOA,EAAW/D,EAAYC,EAASC,EAAYkD,EAAOW,GAAY,QAExE,CAAC/D,EAAYC,EAASC,EAAYkD,EAAO1H,IACrC8H,GACFD,EAAWI,EAAMzD,EAAY,KAAMnG,EAAK+I,GACnC7C,GAAYA,EAAQoD,iBAAiBO,IACnCd,EAAOS,EAAWtH,EAAOsH,KAG7BtD,GAAYA,EAAQoD,iBAAiBO,IACnC7J,IApBE,IAwBXuI,SAAU,SAAkB0B,GAC1B,IAAI1B,EAIJ,IAHI0B,aAAgB/H,IAClB+H,EAAOA,EAAK,IAEPA,GAA0B,IAAlBA,EAAKhC,YAAoBM,EAAWrG,EAAOP,KAAKsI,EAAM,eAAiBA,EAAOA,EAAKjC,cAClG,OAAOO,GAAY3C,GAcrB4C,SAAU,SAAkBtF,EAAMoD,GAChC,OAAIA,GAEkB,iBAATA,EAETA,EAAO4D,EAAY5D,GACVA,aAAgBpE,IACzBoE,EAAOA,EAAK,IAAM,IAEhBA,EAAK2B,WAEP3B,EAAOpE,EAAOP,KAAK2E,EAAM,SAAWpE,EAAOP,KAAK2E,EAAM,OAAQ4D,EAAY5D,EAAK6D,aAE1D,iBAATjH,EAAoBhB,EAAOsG,SAAStF,GAAQoD,EAAOA,GAG5DpD,EAAuB,iBAATA,EAAoBhB,EAAOsG,SAAS,KAAMtF,GAC/DhB,EAAOsG,SAAStF,IAEhBhB,EAAOsG,SAAS,KAAM/C,EAAS7C,KAAKM,GAAQA,EAAOhB,EAAOgB,IAAS,MAGrEkH,OAAQ,SAAgBC,GAEtB,OAAQ,GAAKA,GAAMlK,MAAM,KAAKmB,KAAK,QAAQnB,MAAM,KAAKmB,KAAK,QAAQnB,MAAM,KAAKmB,KAAK,SAASnB,MAAM,KAAKmB,KAAK,YAIhHY,EAAOtB,OAAOsB,EAAOoE,KAAM,CACzBgE,IAAK,CACHhE,KAAQ,CACNiE,SAAU,CAAEC,GAAI,QAChBC,KAAM,kDAKR5D,KAAQ,CACN0D,SAAU,CAAEC,GAAI,QAChBC,KAAM,6BACNC,MAAO,2DAETtD,KAAQ,CACNmD,SAAU,CAAEC,GAAI,kBAChBC,KAAM,qDACNC,MAAO,SAETC,GAAM,CACJF,KAAM,2BACNC,MAAO,KAETE,KAAQ,CACNL,SAAU,CAAEM,GAAI,QAChBJ,KAAM,kCAER1D,KAAQ,CAEN0D,KAAM,gCAERK,IAAK,CAEHP,SAAU,CAAEM,GAAI,SAChBJ,KAAM,0CAERM,IAAK,CAEHN,KAAM,KAKVnC,SAAU,SAAkB0C,GAC1BtF,EAAe,IAKjBmD,WAAY,SAAoBoB,EAAMrB,EAAWjF,GAE/C,IAAIsH,EAAiC,KAAvBrC,EAAUX,SACxB/F,EAAOE,UAAUwG,EAAUV,YACJ,IAAvBU,EAAUX,SAAiB,CAACW,GAAa,GAGzCjF,EAASmG,KAAKG,EAAMrB,GAGpBsC,EAAeD,GACflF,OAKJ,IAAIwD,EAAgB,GAEpB,SAASM,IAEP,GAAIN,EACF,IAAK,IAAItJ,EAAI,EAAGA,EAAIsJ,EAAcnJ,OAAQH,IAAK,CAClCZ,EAAEkK,EAActJ,IACtBkL,WAAW,YAGpB5B,EAAgB,KAGlB,SAASK,EAAMrB,EAAU6C,EAAQH,EAASlC,GAGxC,IAAIsC,EAAMrL,EAcV,OAFEA,EAXG+I,EAWGkC,EAAU/I,EAAO6H,IAAIkB,GAAS,SAAUK,GAAO,MAAuB,iBAATA,EAAoBA,EAAO1B,EAAM0B,EAAM/C,EAAU+C,EAAKnE,OAAO,MAAWoB,EAVrI0C,EAAU/I,EAAO6H,IAAIkB,GAAS,SAAUK,GAC5C,MAAuB,iBAATA,EAEd/C,EAAS1C,IAAMyF,EAAK7J,QAAQ,4CAA6C,iBAA6B8G,EAAS1C,IAAM,QAAWyF,EAEhI1B,EAAM0B,EAAM/C,EAAU+C,EAAKnE,UAG7BoB,EAIE6C,EACKpL,GAITA,EAAMA,EAAIsB,KAAK,IAGXyH,EAAa/I,GAIjBA,EAAIyB,QAAQ,mDAAmD,SAAU8J,EAAKC,EAAQC,EAAQC,GAG5FR,EAFAG,EAAOnJ,EAAOuJ,GAAQrD,OAGlBoD,IACFH,EAAOM,EAASH,GAAQ9I,OAAO2I,IAE7BK,IACFL,EAAOA,EAAK3I,OAAOiJ,EAASD,QAGzBL,GAAcM,EAAS3L,KAGhC,SAAS2L,EAAStB,GAEhB,IAAIuB,EAAKC,SAASC,cAAc,OAEhC,OADAF,EAAGzB,UAAYE,EACRnI,EAAOE,UAAUwJ,EAAG1D,YAI7B,SAASgC,EAAY6B,GACnB,IAAIC,EAAO,+DAMX9J,EAAO+J,KAAKF,GACZtK,QAAQ,WAAY,QACpBA,QAAQ,YAAa,KACrBA,QAAQ,kBAAmB,YAC3BA,QAAQ,uGACR,SAAU8J,EAAKW,EAAOtM,EAAMuM,EAAQC,EAAQC,EAAQ5J,GAClD,IAAgC6J,EAAIC,EAAKC,EAArClC,EAAMpI,EAAOoE,KAAKgE,IAAI1K,GAC1B,IAAK0K,EACH,KAAM,+BAAiC1K,EAkBzC,OAhBA0M,EAAMhC,EAAIC,UAAY,GAClB8B,IAAW,MAAMzJ,KAAKwJ,KACxBA,GAAUC,EACVA,EAAS,IAEPD,GACFA,EAASK,EAASL,GAClB3J,EAAOA,EAAO,IAAMgK,EAAShK,GAAQ,IAAM4J,EAAS,IAAM,GAG1DE,EAAOF,EAASD,EAAOM,QAAQ,MAAQ,EAAIN,EAASC,EAAS,IAAMD,EAAS,eAAiB3J,EAAO2J,EACpGI,EAAmBH,EAASE,EAAO,WAAaH,EAAS,mBAAqBA,EAAS,kBAAoBA,EAAS,MAEpHI,EAAmBD,EAAOD,EAAIzB,IAAM,OAEtCsB,EAASM,EAASN,GACX,MACP7B,EAAI4B,EAAQ,QAAU,QACtB/L,MAAM,cAAcmB,KAAK8K,EAAS,UAAYA,EAAS,uBAAyBA,EAAS,UAAY,QACrGjM,MAAM,OAAOmB,KAAKkL,GAClBrM,MAAM,MAAMmB,KAAKiL,GACjBpM,MAAM,MAAMmB,KAAK6K,EACjBA,EAAO1K,QAAQ,+BAA+B,SAAU8J,EAAKrI,EAAMmJ,EAAQM,GAEzE,OADAA,EAASA,EAAS,IAAMA,EAAS,IAAMN,EAAS,IAAM,IACtC,IAAMnJ,EAAO,eAAiByJ,EAASpB,KAEzDe,EAAI9B,IAAM,IAEV,cAEF,gBAcA,OAAO,IAAIoC,SAAS,SAAU,QAASZ,GAKzC,SAASrC,EAAczD,EAASwD,GAE9BxD,EAAQG,MAAQuD,EAAM1D,GAAS,EAE/BhE,EAAO5B,QAAQoJ,GAAWA,EAAU,CAACjE,EAAS7C,KAAK8G,GAAWA,EAAUxH,EAAOwH,GAAS3C,SACxFzF,KAAK,IAGP,SAASmL,EAAShK,GAChB,OAAOA,EAAOA,EAAKhB,QAAQ,OAAQ,KAAKA,QAAQ,QAAS,MAAQ,KAUnE,SAASyJ,EAAeD,GACtB,IAAiChB,EAAKrC,EAA0B3H,EAAE4H,EAAEgF,EAAhEC,EAAY,IAAM/G,EAAsBgH,EAAiB,GAC7D,IAAK9M,EAAI,EAAG4H,EAAIoD,EAAQ7K,OAAQH,EAAI4H,EAAG5H,IACrC,GAAqC,KAAhCgK,EAAOgB,EAAQhL,IAAIgI,SAAxB,CAIA,IAAK4E,GADLjF,EAAQqC,EAAK+C,qBAAqB,MACnB5M,OAAS,EAAGyM,GAAK,EAAGA,IACjCI,EAAerF,EAAMiF,IAEvBI,EAAehD,GAEjB,SAASgD,EAAerB,GACtB,IAAIsB,EAAoBC,EAAQ5E,EAAS1C,EAA9BuH,EAAUxB,EAErB,GAAI/F,EAAM+F,EAAGyB,aAjc8B,aAicJ,CACrC,KAAOD,EAAQpF,YAA0D,KAA3CoF,EAAUA,EAAQpF,YAAYC,YAAoBiF,EAASE,EAAQC,aAlcxD,gBAmcrCH,IAAWrH,IAIbuH,EAAUA,EAAQpF,WAAkC,KAArBoF,EAAQnF,SAAkB,EAAImF,EAAQC,aAvc9B,cAuc0D,EAAI,GAC/F9E,EAAW7C,EAAaG,OAG5B0C,EAAWtC,EADXsC,EAAW5C,EAAaE,GACSH,EAAa0H,IAAYzH,EAAayH,GAAU,MAAM,IAC9EvH,MAAQC,EACjBJ,EAAaI,GAAWyC,GAEtBxC,GACFuH,EAAczH,IAGlB+F,EAAG2B,gBAndsC,kBAodhCxH,IAAewC,EAAWrG,EAAOP,KAAKiK,EAAI,eAGnD0B,EAAc/E,EAAS1C,KACvBH,EAAa6C,EAAS1C,KAAO0C,EAE7B6E,GADAA,EAAUlL,EAAOP,KAAKiK,EAAG5D,WAAY,aACjBoF,EAAQvH,IAAM,GAEpC,GAAI0C,EAAU,CAIZ,IAHA4E,EAAU5E,EAGH4E,GAAWA,EAAQtH,KAAOuH,GAG/BD,EAAQ3G,MAAM1E,KAAK8J,GACnBuB,EAAUA,EAAQ5G,cAGbgC,EAASpB,aACToB,EAASlC,MAEhBnE,EAAOP,KAAKiK,EAAI,WAAYrD,GAG9B,SAAS+E,EAAczH,GAErB0C,EAAWwE,EADXlH,GAAYiH,GAEZC,EAAelH,IAAQI,EAAYsC,EAAU7C,EAAa6C,EAAShC,OAAOV,IAAMiH,IAAcvE,EAAShC,OAAQ,MAAM,KAO3H,SAASG,EAAQuE,EAAS3E,EAAM3E,EAAMuE,GACpC,IAAK+E,EACH,OAAOjF,EAAMZ,MAEfY,EAAMlE,KAAK,CAAE0L,EAAGvC,EAAS3E,KAAMA,EAAMgF,KAAMjI,KAAM1B,KAAMA,EAAMuE,QAASA,IAGxE,SAASU,EAAON,EAAM3E,EAAMuE,GAI1B,OAFKA,IAASA,EAAU,IACxBA,EAAQoD,iBAAkB,EACnBpH,EAAOoE,KAAKpE,EAAOsG,SAASlC,GAAO3E,EAAMuE,EAAS7C,MAG3D,SAASyD,EAAOgD,EAAMJ,GAEpB,IAAIxD,EAAU4D,EAAK5D,SAAW,GAG9B,OAFAA,EAAQwD,QAAUA,EAEXxH,EAAOoE,KAAKpE,EAAOsG,SAASsB,EAAKxD,MAAOwD,EAAKnI,KAAMuE,EAAS4D,EAAKwB,MAG1E,SAAStE,EAAOyG,EAAQC,GACtB,IAAIhE,EAAUrG,KAAKgD,MACnB,OAAOnE,EAAO6H,IACd7H,EAAOA,EAAO5B,QAAQoJ,GAAWA,EAAQpI,KAAK,IAAMoI,GAAS+D,OAAOA,GAAU,MAC9E,SAAUE,GACR,OAAOD,EACPC,EAAEC,WAAaD,EAAEE,YACjBF,EAAEG,YA1Ga7D,EA0GU0D,GAzGvBI,EAAMlC,SAASC,cAAc,QAC7BkC,YAAY/D,EAAKgE,WAAU,IACxBF,EAAI5D,WAHb,IAAmBF,EACb8D,KA6GN,SAAS7G,IACP,IAAIgH,EAAO7K,KAAKmD,MAChBtE,EAAOoE,KAAK,KAAM,KAAM,KAAMjD,MAAMkE,aAAa2G,EAAK,IACtDhM,EAAOgM,GAAMtM,UA5hBjB,CA8hBGM,QC3hBH7C,EAAEqE,MAAM9C,OAAO,0BAA2B,GAAI,CAI5C8D,KAAM,aAGNyJ,4BAA6B,WAC3B,IAAIC,EAAc,GACU,oBAAjBC,cAAgCA,aAAaD,YACtDA,EAAcC,aAAaD,YAEQ,oBAAxBE,sBACTF,EAAcE,qBAKlB,IAAIC,EAAqC,oBAApBC,gBAAkCxF,OAAOyF,SAAWD,gBACzE,OAAOnP,EAAEqP,KAAK,CACZC,IAAKP,EAAc,yCAA2CG,EAAU,YAAcvF,OAAO4F,OAAOC,QACpGC,YAAY,EACZ/N,OAAO,EACPgO,SAAU,OACVC,OAAO,KAGXC,sBAAuB,SAA+BN,GACpD,OAAOtP,EAAEqP,KAAK,CACZC,IAAKA,EACLG,YAAY,EACZC,SAAU,OACVC,OAAO,OCjCb3P,EAAEqE,MAAM9C,OAAO,oCAAqC,CAElDsO,mBAAoBlG,OAAO4F,OAAOO,YAAY,OAAQ,oBAAsBnG,OAAOoG,eAAiB,qBACpGC,gBAAiB,GACjBC,gBAAiB,IAEnB,CAIE5K,KAAM,SAAc6K,GAClBlM,KAAKkM,aAAeA,EACpBlM,KAAKmM,SAAW,kBAChBnM,KAAKoM,oBAAsB,IAM7BC,oBAAqB,WACnB,IAAI7L,EAAOR,KACPsM,EAAQ,IAAItQ,EAAEuQ,SAgBlB,OAdAvQ,EAAEwQ,KAAKxM,KAAKyM,gBAAgBzM,KAAKK,MAAMwL,qBACvCa,MAAK,SAAUC,GACb,IAAIC,EAAO5Q,EAAE,WAAW0H,KAAKiJ,GACzBE,EAAgB7Q,EAAE,SAAU4Q,GAChC5Q,EAAE+H,KAAK8I,GAAe,SAAUjQ,EAAGkQ,GACjCA,EAAe9Q,EAAE8Q,GACjBtM,EAAKH,MAAM4L,gBAAgBa,EAAaC,KAAK,OAASD,EAAapJ,UAKrE4I,EAAMU,aAGDV,EAAMW,WAOfC,YAAa,SAAqB/H,GAEhC,IACIgI,GAAmB,EASvB,GAFAhI,GAHAA,EAAWA,EAAS/G,QAAQ,2BAA4B,SAGpCA,QAAQ,8DAA+D,YAEvFuH,OAAOyH,qBAAsB,CAC/B,IAAIC,EAXKrN,KAWOsN,QAAQnI,GAXfnF,KAcAK,MAAM4L,gBAAgBoB,KAC/BF,GAAmB,GAGrB,OAAIA,GAAkD,YAA9BxH,OAAO4F,OAAOgC,YAC7BvN,KAAKwN,oBAAoBrI,GAChCsI,MAAK,SAAUC,GAEb,OAAO1R,EAAEmJ,SAAS,IAAMA,EAAUuI,MAI7B1N,KAAK2N,sBAAsBxI,GAAUsI,MAAK,SAAUC,GACzD,OAAO1R,EAAEmJ,SAAS,IAAMA,EAAUuI,OASxCE,kBAAmB,SAA2BzI,GAC5C,IACIgI,GAAmB,EASvB,GAFAhI,GAHAA,EAAWA,EAAS/G,QAAQ,2BAA4B,SAGpCA,QAAQ,8DAA+D,YAEvFuH,OAAOyH,qBAAsB,CAC/B,IAAIC,EAXKrN,KAWOsN,QAAQnI,GAXfnF,KAcAK,MAAM4L,gBAAgBoB,KAC/BF,GAAmB,GAGrB,OAAIA,GAAkD,YAA9BxH,OAAO4F,OAAOgC,YAC7BvN,KAAKwN,oBAAoBrI,GAChCsI,MAAK,SAAUC,GAEb,OAAO1R,EAAE6R,UAAU,IAAM1I,EAAUuI,MAI9B1N,KAAK2N,sBAAsBxI,GAAUsI,MAAK,SAAUC,GACzD,OAAO1R,EAAE6R,UAAU,IAAM1I,EAAUuI,OAUzCI,mBAAoB,SAA4B3I,GAO9C,OADAA,GAHAA,EAAWA,EAAS/G,QAAQ,2BAA4B,SAGpCA,QAAQ,8DAA+D,YACpF4B,KAAKwN,oBAAoBrI,GAChCsI,MAAK,SAAUC,GAEb,OAAO1R,EAAEmJ,SAAS,IAAMA,EAAUuI,OAOtCC,sBAAuB,SAA+BxI,GACpD,IAAqCmG,EAAI+B,EAArC7M,EAAOR,KAAKsM,EAAQtQ,EAAEuQ,WAuB1B,OApBI/L,EAAKuN,aAAa5I,IACpBmG,EAAM9K,EAAKwN,oBAAoB7I,GAC/BkI,EAAO7M,EAAK8M,QAAQnI,KAEpBmG,EAAMnG,EACNkI,EAAO,IAGQ7M,EAAKH,MAAM2L,gBAAgBV,GAS1CgB,EAAMU,QAAQxM,EAAKyN,yBAAyB3C,EAAK+B,IANjDrR,EAAEwQ,KAAKhM,EAAK0N,2BAA2B5C,IACvCoB,MAAK,WACHJ,EAAMU,QAAQxM,EAAKyN,yBAAyB3C,EAAK+B,OAO9Cf,EAAMW,WAGfiB,2BAA4B,SAAoC5C,GAC9D,IAAI9K,EAAOR,KACPsM,EAAQtQ,EAAEuQ,WAGd,OAAI/L,EAAKH,MAAM2L,gBAAgBV,GAAa9K,EAAKH,MAAM2L,gBAAgBV,GAGnE9K,EAAK4L,oBAAoBd,IAC3BtP,EAAEwQ,KAAKhM,EAAK4L,oBAAoBd,IAChCoB,MAAK,WAEHJ,EAAMU,QAAQxM,EAAKH,MAAM2L,gBAAgBV,OAEpCgB,EAAMW,YAIfzM,EAAK4L,oBAAoBd,GAAOtP,EAAEuQ,WAClCvQ,EAAEwQ,KAAKxQ,EAAEqP,KAAK,CACZC,IAAKA,EACLI,SAAU,SAEZlL,EAAK0L,aAAaiC,SAClBzB,MAAK,SAAUC,GAYb,IAAIyB,EAAOC,EAAeC,EAC1B,IAAKF,KAZAzB,GACHL,EAAMiC,OAAO,IAGQ,iBAAZ5B,IACTA,EAAW6B,KAAKC,MAAM9B,EAAS,KAGjCnM,EAAKH,MAAM2L,gBAAgBV,GAAOqB,EAIpBA,EACRA,EAAS9K,eAAeuM,KAC1BC,EAAgB1B,EAASyB,GAMzBE,GAJAA,EAAqB9N,EAAK0L,aAAawC,UAAUL,IAITjQ,QAAQoC,EAAK2L,SAAU,IAE3DiC,EAAM/E,QAAQ,aAAe,UACxB7I,EAAKH,MAAM2L,gBAAgBV,GAAK8C,GAEvCA,EAAQA,EAAMO,UAAU,EAAGP,EAAM/E,QAAQ,YAAc,GACvD7I,EAAKH,MAAM2L,gBAAgBV,GAAK8C,GAASC,EACzCrS,EAAE6R,UAAU,IAAMO,EAAOE,IAGzBtS,EAAEmJ,SAAS,IAAMiJ,EAAOE,GAG1B9N,EAAKH,MAAM2L,gBAAgBV,GAAK8C,GAAS5N,EAAKH,MAAM2L,gBAAgBoC,GAASE,GAMjF9N,EAAK4L,oBAAoBd,GAAK0B,UAC9BV,EAAMU,QAAQL,MAGTL,EAAMW,YAMfgB,yBAA0B,SAAkC3C,EAAK+B,GAC/D,IACIlI,EADOnF,KACSK,MAAM2L,gBAAgBV,GAAK+B,GAE/C,IAAKlI,EACH,KAAM,YAAcA,EAAW,gBAGjC,OAAOA,GAOTqI,oBAAqB,SAA6BrI,GAChD,IAAI3E,EAAOR,KACPsM,EAAQ,IAAItQ,EAAEuQ,SACdqC,EAAiB5O,KAAKK,MAAM2L,gBAAgB7G,GAChD,GAAKyJ,EAoCHtC,EAAMU,QAAQ4B,QAjCd,GAAIpO,EAAKuN,aAAa5I,GAAW,CAC/B,IAAImG,EAAM9K,EAAKwN,oBAAoB7I,GAC/BkI,EAAO7M,EAAK8M,QAAQnI,GAGxB,GAAI3E,EAAKH,MAAM4L,gBAAgBoB,GAG7B,OADAf,EAAMU,QAAQxM,EAAKH,MAAM4L,gBAAgBoB,IAClCf,EAAMW,UAGfjR,EAAEwQ,KAAKhM,EAAKqO,gBAAgBvD,EAAK+B,IACjCX,MAAK,SAAUC,GAEbnM,EAAKH,MAAM2L,gBAAgB7G,GAAYwH,EAGvCL,EAAMU,QAAQL,WAMhB3Q,EAAEwQ,KAAKhM,EAAKiM,gBAAgBtH,IAC5BuH,MAAK,SAAUC,GAGbL,EAAMU,QAAQL,MASpB,OAAOL,EAAMW,WAOf4B,gBAAiB,SAAyBC,EAAazB,GACrD,IAAI7M,EAAOR,KACPsM,EAAQ,IAAItQ,EAAEuQ,SA8BlB,OA3BAvQ,EAAEwQ,KAAKhM,EAAKuO,8BACZrC,MAAK,WAEHlM,EAAKwO,qBAAsB,EAC3BxO,EAAKuO,6BAA+B,IAAI/S,EAAEuQ,SAG1CvQ,EAAEwQ,KAAKhM,EAAKiM,gBAAgBqC,IAC5BpC,MAAK,SAAUC,GACb,IAAIC,EAAO5Q,EAAE,WAAW0H,KAAKiJ,GACzBG,EAAe9Q,EAAE,IAAMqR,EAAMT,GAGjCjH,OAAOsJ,OAAOnC,EAAa/P,OAAS,EAAG,qBAAuBsQ,EAAO,0BAA4ByB,GAGjGnC,EAAWG,EAAapJ,OAGxBlD,EAAKuO,6BAA6B/B,UAClCxM,EAAKwO,qBAAsB,EAG3B1C,EAAMU,QAAQL,SAIXL,EAAMW,WAMfR,gBAAiB,SAAyBtH,GACxC,IAAI3E,EAAOR,KACPsM,EAAQtQ,EAAEuQ,WACVqC,EAAiB5O,KAAKK,MAAM2L,gBAAgB7G,GAEhD,OAAIyJ,IAKApO,EAAK4L,oBAAoBjH,IAC3BnJ,EAAEwQ,KAAKhM,EAAK4L,oBAAoBjH,IAChCuH,MAAK,WAEHJ,EAAMU,QAAQxM,EAAKH,MAAM2L,gBAAgB7G,OAEpCmH,EAAMW,YAIfzM,EAAK4L,oBAAoBjH,GAAYnJ,EAAEuQ,WACvCvQ,EAAEwQ,KACFxQ,EAAEqP,KAAK,CACLC,IAAKnG,EACLuG,SAAU,SAEZlL,EAAK0L,aAAaiC,SAClBV,MAAK,SAAUd,GAEb,IAAKA,EAAU,MAAO,GAMtB,GAJuB,iBAAZA,IACTA,EAAWA,EAAS,SAGC,IAAZA,EAAyB,MAAO,GAG3C,IAAI2B,EAAqB9N,EAAK0L,aAAawC,UAAU/B,GAGjDuC,EAAUZ,EAAmBa,MAAM3O,EAAK2L,UACxC+C,GACFlT,EAAE+H,KAAKmL,GAAS,SAAUtS,EAAGuS,GAC3B,IAAIC,EAAUD,EAAM/Q,QAAQoC,EAAK2L,SAAU,MAC3CxG,OAAO4F,OAAO8D,SAAS,CACrBC,IAAKF,EACL7S,KAAM,MACNgR,YAAa,aAKnBe,EAAqBA,EAAmBlQ,QAAQoC,EAAK2L,SAAU,IAG/D,IAAIS,EAAO5Q,EAAE,WAAW0H,KAAK4K,GAC7BtS,EAAE,SAAU4Q,GAAM7I,MAAK,SAAUnH,EAAG2S,GAClC,IAAIC,EAAKxT,EAAEuT,GAAaxC,KAAK,MAC7BxQ,EAAOP,EAAEuT,GAAaxC,KAAK,QAE3B,GAAI/Q,EAAE6R,WAAatR,GAAQA,EAAK8M,QAAQ,aAAe,EACrDrN,EAAE6R,UAAU,IAAM2B,EAAIxT,EAAEuT,GAAa7L,aAErC,IACE1H,EAAEmJ,SAAS,IAAMqK,EAAIxT,EAAEuT,GAAa7L,QACpC,MAAO4G,GACPmF,QAAQC,IAAIpF,EAAGsC,OAMrBpM,EAAKH,MAAM2L,gBAAgB7G,GAA0C,iBAAvBmJ,EAAkCA,EAAqBA,EAAmB,GAAG7D,UAE3HjK,EAAK4L,oBAAoBjH,GAAU6H,UACnCV,EAAMU,QAAQsB,MAKThC,EAAMW,aAMfc,aAAc,SAAsBzC,GAClC,OAA4B,GAArBA,EAAIjC,QAAQ,MAMrBiE,QAAS,SAAiBhC,GACxB,OAAOA,EAAIqD,UAAUrD,EAAIjC,QAAQ,KAAO,EAAGiC,EAAIvO,SAMjDiR,oBAAqB,SAA6B1C,GAChD,OAAOA,EAAIqD,UAAU,EAAGrD,EAAIjC,QAAQ,SAKxC,IAAIsG,oBAAsB9Q,OAAOiB,GAAG8P,MACpC/Q,OAAOiB,GAAG8P,MAAQ,WAEhB,IAAI9J,EAAS6J,oBAAoBzP,MAAMF,KAAMG,WAGzC0P,EAAU7T,EAAEgE,MAMhB,OALI6P,EAAQC,SAAS,gCACnBD,EAAQE,iBAIHjK,GAGTjH,OAAOiB,GAAGkQ,UAAY,WAEpBhQ,KAAKiQ,WAAW1R,SAGhB,IAAIsR,EAAU7T,EAAEgE,MACZ6P,EAAQC,SAAS,gCACnBD,EAAQE,kBAIZ,IAAIG,sBAAwBrR,OAAOiB,GAAGqQ,QACtCtR,OAAOiB,GAAGqQ,QAAU,WAElB,IAAIN,EAAU7T,EAAEgE,MAChB,GAAsB,GAAlB6P,EAAQ9S,OAAa,OAAO8B,OAAOiB,GACnC+P,EAAQvR,KAAK,aAEfqR,oBAAoBzP,MAAMF,MAC1B6P,EAAQvR,KAAK,WAAW,IAI1B,IAAIwH,EAASoK,sBAAsBhQ,MAAMF,KAAMG,WAS/C,MANwC,QAApC0P,EAAQ,GAAGO,QAAQpS,eAA2B6R,EAAQQ,KAAK,mCAAmCtT,OAAS,GACzGf,EAAEwM,UAAU8H,eAAe,gBAE7BT,EAAQ/H,WAAW,WAGZhC,GAGT,IAAIyK,qBAAuB1R,OAAOiB,GAAG0Q,OACrC3R,OAAOiB,GAAG0Q,OAAS,WAEjB,IAAIX,QAAU7T,EAAEgE,MAChB,GAAsB,GAAlB6P,QAAQ9S,OAAa,OAAO8B,OAAOiB,GACnC2Q,KAAKZ,QAAQ9C,KAAK,mBAEpB4C,oBAAoBzP,MAAMF,MAC1B6P,QAAQvR,KAAK,WAAW,IAI1B,IAAIwH,OAASyK,qBAAqBrQ,MAAMF,KAAMG,WAG1CiQ,QAAUP,QAAQ,GAAGO,SAAW,GAOpC,MAN6B,QAAzBA,QAAQpS,eAA2B6R,QAAQQ,KAAK,mCAAmCtT,OAAS,GAC9Ff,EAAEwM,UAAU8H,eAAe,gBAE7BT,QAAQ/H,WAAW,WAGZhC,QAMT,IAAI4K,mBAAqB7R,OAAOoE,KAiDhC,IAAKT,OAhDL3D,OAAOoE,KAAO,WAEZ,IAAI6C,EAAS4K,mBAAmBxQ,MAAMF,KAAMG,WAC5C,OAAIA,UAAU,IAAMA,UAAU,GAAGuF,KAAaI,GAG9C9J,EAAE,uBAAwB8J,GAAQ/B,MAAK,SAAUnH,EAAGiT,GAGlD,IAFA,IAAIc,EAAY3U,EAAE6T,GAAS9C,KAAK,aAC5B7J,EAASlH,EAAE6T,GAAS3M,SACW,GAA5BA,EAAO,GAAGkN,QAAQrT,QACvBmG,EAASA,EAAOA,SAGlBA,EAAO6J,KAAK,wBAAyB4D,GACrC3U,EAAE6T,GAASe,YAIT5U,EAAE,sBAAuB8J,GAAQ/I,OAAS,GAC5Cf,EAAE,sBAAuB8J,GAAQiK,iBAEnC/T,EAAE,sBAAuB8J,GAAQ+K,SAAS,+BACtC/K,EAAOgL,QAET9U,EAAE+H,KAAK+B,GAAQ,SAAUlJ,EAAGiT,GACtBA,EAAQpF,WAAazO,EAAE6T,GAASkB,GAAG,yBACrC/U,EAAE6T,GAASE,iBACX/T,EAAE6T,GAASgB,SAAS,mCAM1B7U,EAAE,yBAA0B8J,GAAQ+K,SAAS,kCACzC/K,EAAOgL,QAET9U,EAAE+H,KAAK+B,GAAQ,SAAUlJ,EAAGiT,GACtBA,EAAQpF,WAAazO,EAAE6T,GAASkB,GAAG,2BACrC/U,EAAE6T,GAASgB,SAAS,qCAMnB/K,IAIG4K,mBACV7R,OAAOoE,KAAKT,KAAOkO,mBAAmBlO,KCvkBxC,SAAS9G,QAAQC,GAAwU,OAA9ND,QAApD,mBAAXE,QAAoD,iBAApBA,OAAOC,SAAkC,SAAiBF,GAAM,cAAcA,GAAwB,SAAiBA,GAAM,OAAOA,GAAyB,mBAAXC,QAAyBD,EAAIG,cAAgBF,QAAUD,IAAQC,OAAOG,UAAY,gBAAkBJ,IAAsBA,GD2kBxWK,EAAEuB,OAAOsB,OAAOoE,KAAKgE,IAAK,CACxB0J,UAAa,CACXvJ,KAAM,6EAER4J,QAAW,CACT5J,KAAM,0CAER6J,WAAc,CACZ7J,KAAM,6CAER8J,SAAY,CACVhK,SAAU,CAAEM,GAAI,SAChBJ,KAAM,2EAERsI,IAAO,CACLtI,KAAM,wBAER6I,SAAY,CACV7I,KAAM,iCAER+J,QAAW,CACT/J,KAAM,gCAERgK,MAAS,CACPhK,KAAM,8BAERtB,OAAU,CACRsB,KAAM,+BAERyI,QAAW,CACTzI,KAAM,mCAERiK,IAAO,CACLnK,SAAU,CAAEC,GAAI,oBAChBC,KAAM,YACNC,MAAO,MAETiK,QAAW,CACTlK,KAAM,kCEzmBVzB,OAA2B,oBAAXA,OAAyBA,OAAS,GAClDA,OAAOC,YAAkC,IAAlBD,OAAOC,OAAyBD,OAAOC,OAAS,GAIvED,OAAO4L,aAAc,EACrB5L,OAAO6L,aAAc,EACrB7L,OAAO8L,cAAe,EAEtB9L,OAAO+J,IAAM,SAAUgC,EAASpT,EAAMqT,GACpC,IAAIC,EAAM1U,OAAOsL,SAGjB,GAAK7C,OAAO4L,YAAZ,CAeA,IACMM,EACAC,EAPN,QAR4B1U,IAAxBuI,OAAOkM,eACTlM,OAAOkM,aAAe7V,EAAE,2BAA4B4V,GAElB,GAA9BjM,OAAOkM,aAAa9U,SACtB4I,OAAOkM,cAULA,EAAe7V,EAAE,WAAWgI,SAAShI,EAAE,OAAQ4V,IAC/CE,OAAwC,IAAxBnM,OAAOoG,aAA+BpG,OAAOoG,eAAiBpG,OAAOoM,KAAKhG,eAG9F8F,EAAaG,qBAAqB,CAChCC,sBAAuB,iCACvBC,yBAA0B,4DAC1BC,SAAU,eACVC,MAAO,gBACPC,SAAU,MACVP,OAAQA,IAIVD,EAAaS,KAAK,aAAa,SAAUhI,EAAGiI,GAC1C,IAAIC,EAAQxW,EAAE,WAAWgI,SAAShI,EAAE,QAAS4V,GACzCa,EAA0B,WAAVX,EAAsB9V,EAAE,gBAAkBA,EAAE,8BAC1C,iBAAXuW,EAAGjU,MAEZmU,EAAcC,OAAO,OACrBD,EAAcE,MAAM,QACpBF,EAAczL,KAAKuL,EAAGjU,MACtBkU,EAAMhC,OAAOiC,KAIbA,EAAcC,OAAO,OACrBD,EAAcE,MAAM,QACpBF,EAAczL,KAAKwH,KAAKzH,OAAOwL,EAAGjU,OAClCkU,EAAMhC,OAAOiC,IAIfD,EAAMI,OAAO,CACXD,MAAO,IACPD,OAAQ,IACRG,OAAO,EACPT,MAAO,mBACP/K,MAAO,WACLmL,EAAMI,OAAO,WACbJ,EAAM5B,eAMLiB,KApDLvT,EAAO,IAAKA,EAAOkQ,KAAKC,MAAMD,KAAKzH,OAAOzI,IAAS,MAAOgM,GAAIhM,EAAO,GAEzEqH,OAAOkM,aAAaG,qBAAqB,kBAAmBN,EAASpT,EAsDrE,SAAiBwU,GAGf,GAAa,SAFbA,EAAQA,GAAS,kBAGf,MAAO,eAGT,GAAa,WAATA,EACF,MAAO,gBAGT,GAAa,SAATA,EACF,MAAO,uBAGT,GAAa,SAATA,EACF,MAAO,gBAGT,GAAa,WAATA,EACF,MAAO,gBAGT,OAAOA,EA7EkEC,CAAQpB,MAoFrFhM,OAAOsJ,OAAS,SAAU+D,EAAWtB,EAASpT,GACvC0U,GACHrN,OAAO+J,IAAIgC,EAASpT,EAAM,UAO9BqH,OAAOsN,SAAW,SAAUvB,EAASpT,GACnCqH,OAAO+J,IAAIgC,EAASpT,EAAM,UAM5BqH,OAAOuN,MAAQ,SAAUxB,EAASpT,GAC5BqH,OAAO6L,aACT7L,OAAO+J,IAAIgC,EAASpT,EAAM,SAO9BqH,OAAOwN,eAAiB,WAEtB,OAAOxN,OAAOkM,cAMhBlM,OAAOC,OAAOvE,KAAO,SAAU+R,GACxBA,EACLzN,OAAO0N,QAAQD,GAAS,CAAEE,OAAQ,EAAGC,UAAW,GADpC5N,OAAO0N,QAAU,IAO/B1N,OAAOC,OAAOC,MAAQ,SAAUuN,EAAOI,GAChC7N,OAAO8L,eACZ+B,OAAsBpW,IAAZoW,GAAwBA,EAClC7N,OAAO0N,QAAQD,GAASzN,OAAO0N,QAAQD,IAAU,CAAEE,OAAQ,EAAGC,UAAW,GAGrE5N,OAAO0N,QAAQD,GAAOK,UAG1B9N,OAAO0N,QAAQD,GAAOG,WAAY,IAAIG,MAAOC,UAC7ChO,OAAO0N,QAAQD,GAAOQ,UAAYjO,OAAOkO,gBAAkBL,EAC3D7N,OAAO0N,QAAQD,GAAOK,SAAU,EAG5B9N,OAAOkO,gBAAkBL,IAC3B/D,QAAQqE,KAAKV,GACb3D,QAAQsE,UAAUX,GAClB3D,QAAQ+D,QAAQJ,OAOpBzN,OAAOC,OAAOoO,aAAe,SAAUZ,GACrCzN,OAAOC,OAAOvE,KAAK+R,GACnBzN,OAAOC,OAAOC,MAAMuN,IAMtBzN,OAAOC,OAAOG,KAAO,SAAUqN,GAC7B,GAAKzN,OAAO8L,eACZ9L,OAAO0N,QAAQD,GAASzN,OAAO0N,QAAQD,IAAU,CAAEE,OAAQ,EAAGC,UAAW,GAGpE5N,OAAO0N,QAAQD,GAAOK,SAA3B,CAGA,IAAIQ,GAAO,IAAIP,MAAOC,UAAYhO,OAAO0N,QAAQD,GAAOG,UACxD5N,OAAO0N,QAAQD,GAAOE,OAAS3N,OAAO0N,QAAQD,GAAOE,OAASW,EAC9DtO,OAAO0N,QAAQD,GAAOK,SAAU,EAG5B9N,OAAO0N,QAAQD,GAAOQ,YACxBnE,QAAQyE,QAAQd,GAChB3D,QAAQsE,UAAUX,EAAQ,OAC1B3D,QAAQ0E,WAAWf,MAOvBzN,OAAOC,OAAOwO,WAAa,SAAUhB,GAE/BzN,OAAO0N,QAAQD,IAAUzN,OAAO0N,QAAQD,GAAOK,SAAS9N,OAAOC,OAAOG,KAAKqN,GAC/EzN,OAAOC,OAAO8J,IAAI0D,IAMpBzN,OAAOC,OAAO8J,IAAM,SAAU0D,GACvBzN,OAAO0N,QAAQD,IACpBzN,OAAO+J,IAAI,SAAW0D,EAAQ,KAAOzN,OAAO0N,QAAQD,GAAOE,OAAS,KAAM,KAAM,UAMlF3N,OAAOC,OAAOyO,UAAY,WACxB,GAAK1O,OAAO8L,aACZ,IAAKjP,OAAOmD,OAAO0N,QACjB1N,OAAOC,OAAO8J,IAAIlN,MAGtBmD,OAAOC,OAAOvE,OCnOdsE,OAA2B,oBAAXA,OAAyBA,OAAS,GAClDA,OAAOoM,UAA8B,IAAhBpM,OAAOoM,KAAuBpM,OAAOoM,KAAO,GAEjE/V,EAAEqE,MAAM9C,OAAO,cAAe,CAC5B+W,cAAe,kCACfC,2BAA4B,kBAC9B,CAIElT,KAAM,SAAcmT,GAClBxU,KAAKwU,2BAA6BA,EAClCxU,KAAKyU,QAAU,IAAI9O,OAAO+O,SAASD,QACnCzU,KAAK2U,aAAe,GACpB3U,KAAK4U,WAAa,GAClB5U,KAAK6U,cAAgB,KACrB7U,KAAKoN,0BAA8D,IAAhCzH,OAAOyH,qBAAuCzH,OAAOyH,qBAA+D,oBAAjC0H,8BAA+CA,6BACrK9U,KAAK+U,oBAA6D,oBAAhCC,8BAA8CA,6BAChFhV,KAAKiV,2BAAgF,oBAA5CC,0CAA0DA,yCACnGlV,KAAKmV,kBAAoBnZ,EAAE,gBACa,IAApCgE,KAAKiV,4BACe,oBAAXG,UACTpV,KAAKqV,kBAAoB,IAAID,QAAQ,YAAa,CAAEE,iBAAiB,MAQ3EC,YAAa,SAAqBnK,GAChC,IAAI5K,EAAOR,KAEXQ,EAAK4K,SAAWA,EAChB5K,EAAKqU,cAAgB,IAAI7Y,EAAEuQ,SAG3BvQ,EAAEwQ,KAAKhM,EAAKgV,eAAepK,IAC3BsB,MAAK,SAAUkI,GAgBb,GAfApU,EAAKoU,WAAaA,EAClBpU,EAAKiV,MAAQb,EAAWc,mBAAmBD,MAGvCjV,EAAKuU,sBACHvU,EAAKuU,oBAAoBY,iBAC3BnV,EAAKoV,yBAAyB,aAAcpV,EAAKuU,oBAAoBY,iBAGnEnV,EAAKuU,oBAAoBc,YAC3BrV,EAAKoV,yBAAyB,aAAcpV,EAAKuU,oBAAoBc,aAKrErV,EAAK4M,sBACP,GAAI5M,EAAKgU,2BAAmC,OAAG,CAE7C,IAAIsB,EAAsD,oBAA3BC,wBAA0CA,uBAAyBvV,EAAKiU,QAAQ7I,sBAAwBpL,EAAKiU,QAAQ3J,4BAGhJgL,IAAsBtV,EAAKiU,QAAQ3J,6BAA+BK,kBAAoB3K,EAAK4K,SAE7F5K,EAAKiU,QAAQ7I,sBAAsBpL,EAAKgU,2BAAmC,QAAG9H,MAAK,SAAUsJ,GAC3FxV,EAAKyV,kBAAkBD,GACvBxV,EAAKqU,cAAc7H,UACnBxM,EAAK2U,kBAAkBe,QAAQ,cAAe1V,EAAKoU,eAGrDkB,EAAkBtV,EAAKgU,2BAAmC,QAAG9H,MAAK,SAAUsJ,GACtExV,EAAK4M,sBACP5M,EAAKyV,kBAAkBD,GAEzBxV,EAAKqU,cAAc7H,UACnBxM,EAAK2U,kBAAkBe,QAAQ,cAAe1V,EAAKoU,qBAMzDpU,EAAKqU,cAAc7H,UACnBxM,EAAK2U,kBAAkBe,QAAQ,cAAe1V,EAAKoU,gBAUzDuB,sBAAuB,SAA+B/K,GACpD,IAAI5K,EAAOR,KAEXQ,EAAK4K,SAAWA,EAChB5K,EAAKqU,cAAgB,IAAI7Y,EAAEuQ,SAE3B,IAAI6J,EAAe5V,EAAK6V,uBAAuBjL,GAgB/C,YAf2E,IAAhE5K,EAAKgU,2BAA2B4B,EAAapY,iBACtDoY,EAAe,WAIjB5V,EAAKiU,QAAQ7I,sBAAsBpL,EAAKgU,2BAA2B4B,EAAapY,gBAChF0O,MAAK,SAAUkI,GACbpU,EAAKmU,aAAavJ,EAASpN,eAAiBwC,EAAKmU,aAAavJ,EAASpN,gBAAkB,GACzFhC,EAAEuB,OAAOiD,EAAKmU,aAAavJ,EAASpN,eAAgB4W,GACpDpU,EAAKqU,cAAc7H,aAErBsJ,MAAK,SAAUnM,EAAGoM,EAAQC,GACxBC,MAAM,8CAAgDrL,EAAW,KAAOmL,EAAS,MAAQC,MAGpFhW,EAAKqU,cAAc5H,WAM5BoJ,uBAAwB,SAAgCnL,GACtD,OAAiC,IAA1BA,EAAQ7B,QAAQ,KAAc6B,EAAQpO,MAAM,KAAK,GAAKoO,GAM/DwL,YAAa,SAAqBC,GAChC,IAAKA,EACL,MAAO,GACP,GAAiC,iBAAtBA,EACX,OAAOA,EACP,GAAI3W,KAAKoL,UAA6B,WAAjBpL,KAAKoL,SAAuB,CAC/C,IAAItF,EAAS6Q,EAAmBC,KAAc,QAAEC,UAAU7W,KAAKoL,UAC/D,GAAItF,EACJ,OAAOA,EAGT,OAAO6Q,EAAmBC,KAAc,SAS1C9K,YAAa,SAAqBoF,EAAU4F,GAI1C,OAAiC,MAHtB9W,KAGF4U,WAAW1D,QACI9T,IAAjB0Z,EAA6BA,EAAe5F,EAJxClR,KAOC4U,WAAW1D,IAQzB6F,4BAA6B,SAAqCvU,EAAKwU,GAErE,OAAIA,EAAiB,EADVhX,KAEG8L,YAAYtJ,EAAM,WAFrBxC,KAKG8L,YAAYtJ,EAAM,cAOlCyU,YAAa,SAAqB/F,EAAUgG,GAEtChG,GAAyB,KAAbA,IADLlR,KAEJ4U,WAAW1D,GAAYgG,IAUhCC,2BAA4B,SAAoCC,EAAeC,EAAa/N,EAAQgO,GAClG,IAAI5F,EAAU,GAEM,UAAhB2F,EAEEC,EACF5F,EAAU0F,GAEVA,EAAgBA,EAAcpZ,eAG9B0T,EAAU/L,OAAOuG,aAAaJ,YAAY,4BAA8BsL,MAGxD,4BAA8BA,GAEzB,qCADFzR,OAAOuG,aAAaJ,YAAY,sCAE/C4F,EAAU,wCAKhBA,EAAU/L,OAAOuG,aAAaJ,YAAYsL,GAI5C,GAAI9N,EACF,IAAK,IAAI1M,EAAI,EAAGA,EAAI0M,EAAOvM,OAAQH,IACjC8U,EAAUA,EAAQtT,QAAQ,IAAMxB,EAAI,IAAK0M,EAAO1M,IAIpD,OAAO8U,GAKThD,UAAW,SAAmB1H,GAC5B,IAEIuQ,EACJ,GAGE,GAFAA,EAAYvX,KAAKK,MAAMiU,cAAckD,KAAKxQ,GAE3B,CACb,IAAIyQ,EAAgBF,EAAU,GAC1BT,EAAeS,EAAUxa,QAAU,EAAIwa,EAAU,QAAKna,EAC1D,IAAmC,GAA/Bqa,EAAcpO,QAAQ,KACxBrC,EAAOA,EAAK5C,WAAWmT,EAAU,GAV5BvX,KAUqC8L,YAAY2L,EAAeX,QAChE,CACL,IAAIY,EAAqB1X,KAAKK,MAAMkU,2BAA2BiD,KAAKC,GACpE,IAAKC,EAAoB,CAEvBA,EADY,iBACeF,KAAKC,GAElCzQ,EAAOA,EAAK5C,WAAWmT,EAAU,GAAI,cAAgBG,EAAmB,GAAK,cAI7D,MAAbH,GAET,OAAOvQ,GAKTiP,kBAAmB,SAA2BD,GAC5C,IAAgB9E,EAGZyG,EAAoB3B,EAFLhL,aAAa4M,iBAAmB,WAInD,IAAK,IAAIC,KAAoBF,EAG3B,GAFAzG,EANSlR,KAMO4U,WAAWiD,GAEvBlS,OAAOoM,KAAK+F,SAAS5G,GAGvB,IAAK,IAAI6G,KAFQJ,EAAkBE,GAGjC3G,EAAS6G,GAAiBJ,EAAkBE,GAAkBE,QAZzD/X,KAeF4U,WAAWiD,GAAoBF,EAAkBE,IAO5DjC,yBAA0B,SAAkCpT,EAAK0U,GAE/D1U,EAAMA,GAAO,YACb0U,EAAQA,GAAS,GAFNlX,KAIN4U,WAAWpS,GAAO0U,GAKzB1B,eAAgB,SAAwBpK,GACtC,IAAI5K,EAAOR,KACPsM,EAAQ,IAAItQ,EAAEuQ,SAIlB,GAHAnB,EAAWA,EAASpN,cAGe,MAA/BwC,EAAKmU,aAAavJ,GACtB,OAAO5K,EAAKmU,aAAavJ,GAGzB,IAAI4M,EAAexX,EAAKyX,iBAAiB7M,GAEzC,OAAI5K,EAAKyU,2BACAzU,EAAK0X,sCAAsCF,KAIM,oBAA3BjC,wBAA0CA,uBAAyBvV,EAAKiU,QAAQ7I,sBAAwBpL,EAAKiU,QAAQ3J,6BAElItK,EAAKgU,2BAA2BwD,IAClDtL,MAAK,SAAUkI,GACbpU,EAAKmU,aAAavJ,GAAYwJ,EAC9BtI,EAAMU,QAAQ4H,MAEhB0B,MAAK,SAAUnM,EAAGoM,EAAQC,GACxB,QAA8B,IAAnBrM,EAAEgO,cAA6C,IAAbhO,EAAEoM,QAAiC,UAAjBpM,EAAEiO,YAA2C,KAAjB5B,EACzF/G,QAAQC,IAAI,8CAAgDtE,EAAW,KAAOmL,EAAS,MAAQC,QAE/F,GAAiB,MAAbrM,EAAEoM,OAAgB,CAEpBjK,EAAMU,QADW,SAGjByJ,MAAM,8CAAgDrL,EAAW,KAAOmL,EAAS,MAAQC,MAMxFlK,EAAMW,YAIfiL,sCAAuC,SAA+C9M,GACpF,IAAIkB,EAAQ,IAAItQ,EAAEuQ,SACd/L,EAAOR,KACPqY,EAAqB7X,EAAKgU,2BAA2BpJ,GAErDkN,EAA0B,IAAItc,EAAEuQ,SAChCgM,EAA6B,IAAIvc,EAAEuQ,SAuCvC,OArCA/L,EAAKiU,QAAQ3J,4BAA4BuN,GACzCG,MAAK,SAAUC,GACbH,EAAwBtL,QAAQyL,GAChCjY,EAAKkY,+BAA+BtN,EAAUqN,MAEhDnC,MAAK,SAAUnM,EAAGoM,EAAQC,GACxBxa,EAAEwQ,KAAKhM,EAAKmY,gCAAgCvN,IAC5CoN,MAAK,SAAUI,GACbN,EAAwBtL,QAAQ4L,GAChCnJ,QAAQC,IAAI,2CAEd4G,MAAK,WACHgC,EAAwBtL,QAAQ,OAElCyC,QAAQoJ,MAAM,uDAAyDzN,EAAUmL,EAAQC,MAG3FhW,EAAKiU,QAAQ7I,sBAAsByM,GACnCG,MAAK,SAAUM,GACbP,EAA2BvL,QAAQ8L,MAErCxC,MAAK,SAAUnM,EAAGoM,EAAQC,GACxB+B,EAA2BvL,QAAQ,IACnCyC,QAAQoJ,MAAM,gEAAkEzN,EAAUmL,EAAQC,MAGpGxa,EAAEwQ,KAAK+L,EAA4BD,GACnCE,MAAK,SAAUO,EAAqBN,GAClC,IAAIO,EAAkB,GACtBhd,EAAEuB,OAAOyb,EAAiBD,EAAqBN,GAC/CjY,EAAKmU,aAAavJ,GAAY4N,EAC9B1M,EAAMU,QAAQgM,MAEhB1C,MAAK,WACH7G,QAAQoJ,MAAM,gCAAiC1Y,WAC/CmM,EAAMiC,YAEDjC,EAAMW,WAGf0L,gCAAiC,SAAyCvN,GACxE,IAAI6N,EAAcjZ,KAAKqV,kBACvB,GAAmBjY,MAAf6b,EACF,MAAO,GAGT,IAAI3M,EAAQ,IAAItQ,EAAEuQ,SACd2M,EAAgB9N,EAAW,KAAOJ,cAAgBA,aAAamO,eAAiBnO,aAAamO,eAAiB,WASlH,OARAnd,EAAEwQ,KAAK7G,OAAOoM,KAAKqH,GAAGC,YAAYJ,EAAaC,IAC/CV,MAAK,SAAUc,GACbhN,EAAMU,QAAQsM,EAAW1E,eAE3B0B,MAAK,WACHhK,EAAMU,QAAQ,IACdyC,QAAQoJ,MAAM,2DAA4D1Y,cAErEmM,EAAMW,WAGfyL,+BAAgC,SAAwCtN,EAAUwJ,GAChF,IAAIqE,EAAcjZ,KAAKqV,kBACvB,GAAmBjY,MAAf6b,EAAJ,CAIA,IAAIC,EAAgB9N,EAAW,KAAOJ,cAAgBA,aAAamO,eAAiBnO,aAAamO,eAAiB,WAClHnd,EAAEwQ,KAAK7G,OAAOoM,KAAKqH,GAAGC,YAAYJ,EAAaC,IAC/CV,MAAK,SAAUc,GACbA,EAAW1E,WAAaA,EACxBjP,OAAOoM,KAAKqH,GAAGG,aAAaN,EAAaK,MAE3ChD,MAAK,WACH,IAAI9N,EAAW,CACb4C,SAAUA,EACVwJ,WAAYA,EACZ4E,IAAKN,GAEPvT,OAAOoM,KAAKqH,GAAGG,aAAaN,EAAazQ,QAU7CyP,iBAAkB,SAA0B7M,GAC1C,IAEI4M,EAAe5M,EACnB,GAAI4M,EAAajb,OAAS,GAE6B,MAL5CiD,KAKAwU,2BAA2BwD,GAAuB,CAEzD,IAAIyB,EAAoBzB,EAAalb,MAAM,KAC3Ckb,EAAeyB,EAAkB,GASrC,OAN2B,GAAvBzB,EAAajb,QAAgE,MAXtEiD,KAW0BwU,2BAA2BwD,KAE9DrS,OAAO+J,IAAI,gEAAkEtE,EAAW,8BACxF4M,EAAe,WAGVA,GAMT7J,MAAO,WAEL,OADWnO,KACC6U,cAAc5H,aFlc9BtH,OAA2B,oBAAXA,OAAyBA,OAAS,GAClDA,OAAOoM,UAA8B,IAAhBpM,OAAOoM,KAAuBpM,OAAOoM,KAAO,GACjEpM,OAAO+T,aAAoC,IAAnB/T,OAAO+T,QAA0B/T,OAAO+T,QAAU,GAC1E/T,OAAOoM,KAAK4H,gBAA+C,IAA3BhU,OAAOoM,KAAK4H,WAA6BhU,OAAOoM,KAAK4H,WAAa,GAClGhU,OAAOoM,KAAK6H,YAAuC,IAAvBjU,OAAOoM,KAAK6H,OAAyBjU,OAAOoM,KAAK6H,OAAS,GAEtF,IAAIC,QAAU,GA45Fd,SAASC,OAAOC,GACd,IAAoDC,EAAhD5a,EAAO6a,MAAMle,UAAUme,MAAMzT,KAAKtG,UAAW,GACjD,OAAO4Z,EAAI3b,QAAQ,cAAc,SAAU+b,EAAGC,GAE5C,QAAYhd,KADZ4c,EAAM5a,EAAKqB,SAET,OAAQ2Z,EAAIC,WAAW,IACrB,KAAK,IACH,OAAQL,EACV,KAAK,IACH,OAAOM,KAAKC,OAAOP,GACrB,KAAK,IACH,OAAO1c,OAAO0c,GAChB,KAAK,IACH,OAAOA,EAGb,OAAOI,KAgGX,SAASI,cACP,IAEI7O,EACA8O,EAFAC,EAAQ,GADD1a,KAKNjD,OAAS,WACZ,OAAO2d,EAAM3d,QANJiD,KASN3D,IAAM,SAAUiE,GACnB,IAAKma,EAGH,OAFAA,GAAO,EACP9O,OAAQvO,EACDsd,EAAMjc,KAAK,CAAEkc,UAAW,CAACra,KAGvBoa,EAAMA,EAAM3d,OAAS,GAC3B4d,UAAUlc,KAAK6B,IAjBXN,KAoBN4a,YAAc,SAAUta,GAC3B,IAAKqL,EAGH,OAFAA,GAAQ,EACR8O,OAAOrd,EACAsd,EAAMjc,KAAK,CAAEkc,UAAW,CAACra,KAIvBoa,EAAMA,EAAM3d,OAAS,GAC3B4d,UAAUlc,KAAK6B,IA7BXN,KAgCN6a,QAAU,WAIb,IAHA,IAAIC,EAAU,IAAI9e,EAAEuQ,SAChBU,EAAU6N,EAAQ7N,UAClB8N,EAAcL,EAAM3d,OACfH,EAAI,EAAGA,EAAIme,EAAane,IAC/BqQ,EAAUA,EAAQQ,MAAK,WACrB,IAAIoC,EAAU6K,EAAMja,QACpB,OAAOzE,EAAEwQ,KAAKtM,MAAMlE,EAAGA,EAAE0K,IAAImJ,EAAQ8K,WAAW,SAAUra,GAExD,GAAuB,mBAAZA,EAAwB,CACjC,IAAI0a,EAAWhf,EAAEuQ,WAMjB,OALAvQ,EAAEwQ,KAAKlM,KAAYoM,MAAK,WACtBsO,EAAShO,aACRsJ,MAAK,WACN0E,EAASzM,YAEJyM,EAAS/N,UAGlB,OAAO3M,SAWb,OANAwa,EAAQ9N,UACRC,EAAUA,EAAQP,MAAK,WAErBgO,EAAQ,OArkGdb,QAAQA,QAAiB,QAAI,GAAK,UAClCA,QAAQA,QAAoB,WAAI,GAAK,aACrCA,QAAQA,QAAgB,OAAI,GAAK,SAGjClU,OAAOsV,WAAapB,QAKpB,SAAW7d,GACTA,EAAE8D,GAAGob,WAAa,SAAUC,EAAI/b,GAC9B,GAAwC,UAApCpD,EAAEgE,MAAM,GAAGoQ,QAAQpS,cACvB,OAAO,KAEP,GAAgC,MAA5BhC,EAAEgE,MAAM,GAAGob,cACf,OAAO,KAEP,IAEEpf,EAAEgE,MAAM,GAAGob,cAAchc,KAAOA,EAChC,MAAOkL,GAEP,OAAO,KAGT,OAAItO,EAAEqf,QAAQC,KACLtf,EAAEgE,MAAM,GAAGob,cAAcG,WAAW,mEAAqEJ,EAAGK,WAAa,0BACvHxf,EAAEqf,QAAQI,QAAUzf,EAAEqf,QAAQK,QAChC1f,EAAEgE,MAAM,GAAGob,cAAc3K,KAAK,uCAAyC0K,EAAGK,WAAa,+BADzF,GAlBX,CAsBG3c,QACH,SAAW7C,GACTA,EAAE8D,GAAG6b,gBAAkB,SAAUR,EAAI/b,GAEnC,IAAIoB,EAAOR,KACXhE,EAAEwM,UAAU2F,OAAM,WAEhB,IAEEnS,EAAEwE,GAAM,GAAGpB,KAAOA,EAClB,MAAOkL,GAEP,OAAO,KAGT,OAAItO,EAAEqf,QAAQC,KACLtf,EAAEwE,GAAM,GAAG+a,WAAW,mEAAqEJ,EAAGK,WAAa,0BACzGxf,EAAEqf,QAAQI,QAAUzf,EAAEqf,QAAQK,QAChC1f,EAAEwE,GAAM,GAAGiQ,KAAK,uCAAyC0K,EAAGK,WAAa,+BAD3E,MAhBb,CAsBG3c,QAiEAA,SA7D4B+c,oBAAoB7f,UAAU8f,mBAEzDD,oBAAoB7f,UAAU8f,iBAAmB,SAAU1B,GACzD,OAAOna,KAAKgK,aAAamQ,IAE3ByB,oBAAoB7f,UAAU+f,YAAc,SAAUC,EAAW7E,EAAO8E,GAGtE,GAFAhc,KAAKic,aAAaF,EAAW7E,GAEb,KADZ8E,OAA8B,IAAZA,EAA0BA,EAAW,IACvC,CAElB,IAAIE,EAAO,IAAIC,OAAOA,OAAOC,OAAOL,GAAa,YAAcI,OAAOC,OAAOlF,GAAS,WAAY,OAClGlX,KAAKqc,QAAUrc,KAAKqc,QAAQje,QAAQ8d,EAAMH,EAAY,KAAO7E,EAAQ,KAAO8E,EAAW,OAI3FJ,oBAAoB7f,UAAUugB,eAAiB,SAAUnC,GACvD,OAAOna,KAAKkK,gBAAgBiQ,IAG9ByB,oBAAoB7f,UAAUwgB,oBAAsB,SAAUR,GAE5D,OADW,IAAII,OAAOA,OAAOC,OAAOL,GAAa,yCAA0C,OAC/Exc,KAAKS,KAAKqc,SAAW,YAAc,KAKnDF,OAAOC,OAAS,SAAUpV,GACxB,OAAOA,EAAK5I,QAAQ,2BAA4B,SAIlDS,OAAOiB,GAAG0c,MAAQ,SAAUT,EAAW7E,EAAO8E,GAI5C,QAAmB,IAFRhc,KAAK+E,IAAI,GAEpB,CAIA,IAAIyX,EAAQxc,KAAK+E,IAAI,GAAGyX,MAExB,QAAwB,IAAbT,EAiBT,OAAOS,EAhBP,QAAoB,IAATtF,EAYT,OAAOsF,EAAMX,iBAAiBE,GAV1BC,OAA8B,IAAZA,EAA0BA,EAAW,GAEvDQ,EAAMV,YACRU,EAAMV,YAAYC,EAAW7E,EAAO8E,GAEpCQ,EAAMP,aAAaF,EAAW7E,EAAO8E,KAkB5Cnd,OAHDA,OAAO4d,MAAQ,SAAUvF,GACvB,OAAOA,EAAM9Y,QAAQ,2CAA4C,SAUlES,OAHDA,OAAO6d,MAAQ,SAAUxF,GACvB,OAAOA,EAAM9Y,QAAQ,cAAe,OAQxC,SAAWpC,GACT6C,OAAO8d,sBAAwB,SAAUxL,GACvC,IAAI3Q,EAAO2Q,EACPyL,EAAapc,EAAKoc,WAClB1F,EAAQ1W,EAAKqc,WACbC,EAAeF,EAAWG,cAC1BjX,GAAS,EAGb,QAAI9J,EAAEghB,mBAKyB,QAA3B7L,EAAQyL,WAAWrgB,MAA6C,WAA3B4U,EAAQhD,QAAQ8O,WAIrD,CAAC,QAAS,aAAc,OAAQ,YAAa,QAAS,aAAc,cAAcC,SAASN,EAAWrgB,OAAS,oBAAoBgD,KAAKqd,EAAWrgB,OACjJ2a,QAA0B9Z,IAAjB8Z,EAAMna,SACnBma,EAAQA,EAAM,IACV4F,QAAwC1f,IAAxB0f,EAAa/f,SACjC+f,EAAeA,EAAa,IAC5B5F,EAAQA,GAASA,EAAM1H,GAAK0H,EAAM1H,GAAK0H,EAEvCpR,GADAgX,EAAeA,GAAgBA,EAAatN,GAAKsN,EAAatN,GAAKsN,IAC1C5F,GAEzBpR,EAD4B,WAAnB8W,EAAWrgB,MAAwC,gBAAnBqgB,EAAWrgB,MAA6C,cAAnBqgB,EAAWrgB,KAChFoJ,OAAOoM,KAAKoL,aAAaL,IAAiBnX,OAAOoM,KAAKoL,aAAajG,GAChD,gBAAnB0F,EAAWrgB,OAEX2a,EACoB,SAApB0F,EAAWrgB,KACX,IAAImX,KAAKoJ,GAAcnJ,YAAc,IAAID,KAAKwD,GAAOvD,UAErDmJ,IAAiB5F,EAGrBpR,IArCX,CAuCGjH,QAEH,SAAW7C,GACT6C,OAAOue,aAAe,WACpB,IAAIC,EAAMrhB,EAAE,KACRshB,EAAY,EAUhB,OARAthB,EAAE+H,KAAKsZ,GAAK,SAAU7a,EAAK0U,GACzB,IAAIqG,EAASC,SAASxhB,EAAEkb,GAAOuG,IAAI,YAC/BF,EAASD,IACXA,EAAYC,EAAS,MAKlBD,GAbX,CAeGze,QAKH,SAAW7C,GACT6C,OAAO6e,gBAAkB,SAAUpZ,GACjC,IAAIqZ,EAAU,IAAI1D,MAElBje,EAAEsI,GAAUP,MAAK,WAGf/H,EAAEgE,MAAMyd,IAAI,aAAc,KAC1BzhB,EAAEgE,MAAMyd,IAAI,aAAc,QAC1BzhB,EAAEgE,MAAMyd,IAAI,SAAU,QAGtBE,EAAQlf,KAAKzC,EAAEgE,MAAM4d,kBAIvB,IAAIC,EAAMvD,KAAKuD,IAAI3d,MAAMoa,KAAMqD,GAG/B3hB,EAAEsI,GAAUP,MAAK,WACf/H,EAAEgE,MAAMyd,IAAI,SAAUI,EAAM,UApBlC,CAuBGhf,QAGH8G,OAAOoM,KAAK+L,SAAW,WACrB,IAAIC,EAAe/hB,EAAEuQ,WAerB,MAbmC,YAA/B5G,OAAOoM,KAAKhG,eACV/P,EAAEwM,UAAUlK,KAAK,aACnBtC,EAAEwM,UAAU0N,QAAQ,YAAa,CAAC6H,IAElCA,EAAa/Q,UAGXhR,EAAEgiB,MAAMhiB,EAAEwM,UAAU,GAAI,UAAU,cAAgBxM,EAAEgiB,MAAMhiB,EAAEwM,UAAU,GAAI,UAAU,aAAazL,OAAS,EAC5Gf,EAAEwM,UAAU0N,QAAQ,YAAa,CAAC6H,IAElCA,EAAa/Q,UAGV+Q,EAAa9Q,WAGtBtH,OAAOoM,KAAKkM,0BAA4B,CACtCzO,GAAI,uCACJ3P,KAAM,GACNqe,SAAU,GACVC,MAAO,GACPC,OAAQ,GACRC,QAAS,GACTC,cAAc,GAIhB3Y,OAAOoM,KAAKwM,mBAAqB,GAEjC5Y,OAAOoM,KAAKwM,mBAAuB,GAAI,CAAEC,UAAW,OAAQC,SAAU,OAAQC,SAAU,OAAQC,YAAa,QAASC,WAAY,CAAC,UAAW,WAAY,QAAS,QAAS,MAAO,OAAQ,OAAQ,SAAU,YAAa,UAAW,WAAY,YAAaC,gBAAiB,CAAC,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,OAAQC,SAAU,CAAC,SAAU,SAAU,UAAW,YAAa,WAAY,SAAU,YAAaC,cAAe,CAAC,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,OAAQC,YAAa,CAAC,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,MAAOC,WAAY,KAAMC,WAAY,WAAYC,SAAU,EAAG1J,OAAO,EAAO2J,oBAAoB,EAAOC,WAAY,IACtqB1Z,OAAOoM,KAAKwM,mBAAuB,GAAI,CAAEC,UAAW,SAAUC,SAAU,YAAaC,SAAU,YAAaC,YAAa,MAAOC,WAAY,CAAC,QAAS,UAAW,QAAS,QAAS,OAAQ,QAAS,QAAS,SAAU,aAAc,UAAW,YAAa,aAAcC,gBAAiB,CAAC,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,OAAQC,SAAU,CAAC,UAAW,QAAS,SAAU,YAAa,SAAU,UAAW,UAAWC,cAAe,CAAC,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,OAAQC,YAAa,CAAC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KAAMC,WAAY,KAAMC,WAAY,WAAYC,SAAU,EAAG1J,OAAO,EAAO2J,oBAAoB,EAAOC,WAAY,IACxqB1Z,OAAOoM,KAAKwM,mBAAuB,GAAI,CAAEC,UAAW,QAASC,SAAU,eAAgBC,SAAU,eAAgBC,YAAa,QAASC,WAAY,CAAC,QAAS,SAAU,OAAQ,QAAS,OAAQ,QAAS,QAAS,QAAS,SAAU,SAAU,SAAU,UAAWC,gBAAiB,CAAC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KAAM,KAAM,MAAOC,SAAU,CAAC,QAAS,UAAW,WAAY,WAAY,SAAU,SAAU,SAAUC,cAAe,CAAC,MAAO,QAAS,SAAU,SAAU,OAAQ,OAAQ,OAAQC,YAAa,CAAC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KAAMC,WAAY,QAASC,WAAY,WAAYC,SAAU,EAAG1J,OAAO,EAAM2J,oBAAoB,EAAOC,WAAY,IACvpB1Z,OAAOoM,KAAKwM,mBAAuB,GAAI,CAAEC,UAAW,SAAUC,SAAU,cAAeC,SAAU,gBAAiBC,YAAa,OAAQC,WAAY,CAAC,QAAS,OAAQ,SAAU,QAAS,SAAU,SAAU,WAAY,QAAS,OAAQ,QAAS,WAAY,YAAaC,gBAAiB,CAAC,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,OAAQC,SAAU,CAAC,SAAU,UAAW,QAAS,SAAU,UAAW,QAAS,UAAWC,cAAe,CAAC,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,MAAOC,YAAa,CAAC,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,MAAOC,WAAY,MAAOC,WAAY,WAAYC,SAAU,EAAG1J,OAAO,EAAO2J,oBAAoB,EAAOC,WAAY,IACrqB1Z,OAAOoM,KAAKwM,mBAAuB,GAAI,CAAEC,UAAW,YAAaC,SAAU,eAAgBC,SAAU,YAAaC,YAAa,QAASC,WAAY,CAAC,SAAU,UAAW,OAAQ,QAAS,MAAO,OAAQ,OAAQ,SAAU,YAAa,UAAW,WAAY,YAAaC,gBAAiB,CAAC,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,OAAQC,SAAU,CAAC,UAAW,SAAU,WAAY,WAAY,aAAc,UAAW,WAAYC,cAAe,CAAC,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,MAAOC,YAAa,CAAC,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,MAAOC,WAAY,KAAMC,WAAY,WAAYC,SAAU,EAAG1J,OAAO,EAAO2J,oBAAoB,EAAOC,WAAY,IACjrB1Z,OAAOoM,KAAKwM,mBAAuB,GAAI,CAAEC,UAAW,SAAUC,SAAU,YAAaC,SAAU,UAAWC,YAAa,cAAeC,WAAY,CAAC,UAAW,UAAW,OAAQ,QAAS,MAAO,OAAQ,UAAW,OAAQ,YAAa,UAAW,WAAY,YAAaC,gBAAiB,CAAC,QAAS,QAAS,OAAQ,OAAQ,MAAO,OAAQ,QAAS,OAAQ,QAAS,OAAQ,OAAQ,QAASC,SAAU,CAAC,WAAY,QAAS,QAAS,WAAY,QAAS,WAAY,UAAWC,cAAe,CAAC,OAAQ,OAAQ,OAAQ,OAAQ,OAAQ,OAAQ,QAASC,YAAa,CAAC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KAAMC,WAAY,OAAQC,WAAY,WAAYC,SAAU,EAAG1J,OAAO,EAAO2J,oBAAoB,EAAOC,WAAY,IACjsB1Z,OAAOoM,KAAKwM,mBAAuB,GAAI,CAAEC,UAAW,SAAUC,SAAU,aAAcC,SAAU,aAAcC,YAAa,OAAQC,WAAY,CAAC,UAAW,WAAY,QAAS,SAAU,SAAU,SAAU,SAAU,SAAU,YAAa,UAAW,WAAY,YAAaC,gBAAiB,CAAC,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,OAAQC,SAAU,CAAC,WAAY,SAAU,UAAW,YAAa,UAAW,UAAW,UAAWC,cAAe,CAAC,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,OAAQC,YAAa,CAAC,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,MAAOC,WAAY,KAAMC,WAAY,WAAYC,SAAU,EAAG1J,OAAO,EAAO2J,oBAAoB,EAAOC,WAAY,IAC3rB1Z,OAAOoM,KAAKwM,mBAAuB,GAAI,CAAEC,UAAW,MAAOC,SAAU,UAAWC,SAAU,UAAWC,YAAa,KAAMC,WAAY,CAAC,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,MAAO,MAAO,OAAQC,gBAAiB,CAAC,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,MAAO,MAAO,OAAQC,SAAU,CAAC,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,OAAQC,cAAe,CAAC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KAAMC,YAAa,CAAC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KAAMC,WAAY,IAAKC,WAAY,WAAYC,SAAU,EAAG1J,OAAO,EAAO2J,oBAAoB,EAAMC,WAAY,KAC5jB1Z,OAAOoM,KAAKwM,mBAAuB,GAAI,CAAEC,UAAW,UAAWC,SAAU,IAAKC,SAAU,IAAKC,YAAa,UAAWC,WAAY,CAAC,UAAW,WAAY,QAAS,QAAS,MAAO,OAAQ,OAAQ,WAAY,YAAa,UAAW,WAAY,YAAaC,gBAAiB,CAAC,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,OAAQC,SAAU,CAAC,SAAU,UAAW,UAAW,WAAY,YAAa,UAAW,YAAaC,cAAe,CAAC,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,OAAQC,YAAa,CAAC,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,MAAOC,WAAY,KAAMC,WAAY,WAAYC,SAAU,EAAG1J,OAAO,EAAO2J,oBAAoB,EAAOC,WAAY,IACzqB1Z,OAAOoM,KAAKwM,mBAAuB,GAAI,CAAEC,UAAW,SAAUC,SAAU,WAAYC,SAAU,WAAYC,YAAa,OAAQC,WAAY,CAAC,UAAW,YAAa,QAAS,QAAS,OAAQ,QAAS,QAAS,SAAU,WAAY,UAAW,WAAY,YAAaC,gBAAiB,CAAC,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,OAAQC,SAAU,CAAC,UAAW,gBAAiB,cAAe,eAAgB,eAAgB,cAAe,UAAWC,cAAe,CAAC,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,OAAQC,YAAa,CAAC,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,OAAQC,WAAY,MAAOC,WAAY,WAAYC,SAAU,EAAG1J,OAAO,EAAO2J,oBAAoB,EAAOC,WAAY,IAChtB1Z,OAAOoM,KAAKwM,mBAAuB,GAAI,CAAEC,UAAW,UAAWC,SAAU,aAAcC,SAAU,aAAcC,YAAa,UAAWC,WAAY,CAAC,SAAU,UAAW,OAAQ,SAAU,MAAO,OAAQ,OAAQ,SAAU,WAAY,UAAW,SAAU,WAAYC,gBAAiB,CAAC,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,OAAQC,SAAU,CAAC,cAAe,cAAe,UAAW,QAAS,UAAW,UAAW,WAAYC,cAAe,CAAC,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,OAAQC,YAAa,CAAC,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,MAAOC,WAAY,MAAOC,WAAY,WAAYC,SAAU,EAAG1J,OAAO,EAAO2J,oBAAoB,EAAOC,WAAY,IACvrB1Z,OAAOoM,KAAKwM,mBAAuB,GAAI,CAAEC,UAAW,KAAMC,SAAU,WAAYC,SAAU,WAAYC,YAAa,KAAMC,WAAY,CAAC,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,MAAO,OAAQC,gBAAiB,CAAC,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,MAAO,OAAQC,SAAU,CAAC,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,OAAQC,cAAe,CAAC,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,MAAOC,YAAa,CAAC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KAAMC,WAAY,IAAKC,WAAY,WAAYC,SAAU,EAAG1J,OAAO,EAAO2J,oBAAoB,EAAMC,WAAY,KAKlkB1Z,OAAOoM,KAAKuN,oBAAsB3Z,OAAOoM,KAAKuN,qBAAuB,GACrE3Z,OAAOoM,KAAKuN,oBAAoBC,eAAiB/W,SAASgX,YAAY,SACtE7Z,OAAOoM,KAAKuN,oBAAoBC,eAAeE,UAAU,oBAAoB,GAAM,GAGnF9Z,OAAOoM,KAAKuN,oBAAoBI,YAAclX,SAASgX,YAAY,SACnE7Z,OAAOoM,KAAKuN,oBAAoBI,YAAYD,UAAU,uBAAuB,GAAM,GACnF9Z,OAAOoM,KAAKuN,oBAAoBI,YAAYC,MAAQ,IAGpDha,OAAOoM,KAAKuN,oBAAoBM,UAAYpX,SAASgX,YAAY,SACjE7Z,OAAOoM,KAAKuN,oBAAoBM,UAAUH,UAAU,aAAa,GAAM,GACvE9Z,OAAOoM,KAAKuN,oBAAoBM,UAAUC,WAAa,GACvDla,OAAOoM,KAAKuN,oBAAoBM,UAAUE,WAAa,GAEvDna,OAAOoM,KAAKgO,SAAW,SAAUC,GAC/Bra,OAAOoM,KAAKuN,oBAAoBM,UAAUE,WAAaE,EACvD,IAAIC,EAAmBjkB,EAAEuQ,WACrB2T,EAAQ,EAEZ,IACEA,EAAQlkB,EAAEwM,UAAU6H,KAAK,UAAU,GAAG+K,cAAc/I,SAAS8N,KAAK9W,QAAQ,gBAE5E,MAAOiB,GACL4V,GAAS,EAYX,OATCF,IAAera,OAAOya,WAAWC,QAAQC,OAAOC,iCAAmCP,IAAera,OAAOoM,KAAKuN,oBAAoBM,UAAUC,aAC7I7jB,EAAEwM,UAAU6H,KAAK,UAAUtT,OAAS,GAAKmjB,EAAQ,GAE/Cva,OAAOoM,KAAKuN,oBAAoBM,UAAUY,gBAAkBP,EAC5DzX,SAASiY,cAAc9a,OAAOoM,KAAKuN,oBAAoBM,YAEvDK,EAAiBjT,UAEnBhR,EAAEwQ,KAAKyT,GAAkBvT,MAAK,WAAa/G,OAAOoM,KAAKuN,oBAAoBM,UAAUC,WAAaG,KAC3FC,EAAiBhT,WAQ1BtH,OAAOoM,KAAK2O,IAAM,SAAUhP,GAG1B,IAAIiP,EAAWA,GAAY,SAAUljB,EAAGmjB,GAAI,IAAIpX,EAAI,GAAGhF,EAAIgF,EAAEqX,IAAM,GAAGC,EAAI,aAAgBC,EAAIvc,EAAEwc,KAAO,CAAEzjB,OAAQ,SAAgB0jB,GAAIH,EAAE/kB,UAAYiE,KAAK,IAAIkhB,EAAI,IAAIJ,EAAoJ,OAAhJG,GAAKC,EAAEC,MAAMF,GAAGC,EAAErf,eAAe,UAAYqf,EAAE7f,KAAO,WAAa6f,EAAEE,OAAO/f,KAAKnB,MAAMF,KAAMG,aAAc+gB,EAAE7f,KAAKtF,UAAYmlB,EAAEA,EAAEE,OAASphB,KAAYkhB,GAAKG,OAAQ,WAAmB,IAAIJ,EAAIjhB,KAAKzC,SAAoC,OAA3B0jB,EAAE5f,KAAKnB,MAAM+gB,EAAG9gB,WAAkB8gB,GAAK5f,KAAM,aAAoB8f,MAAO,SAAeF,GAAI,IAAK,IAAIC,KAAKD,EAAIA,EAAEpf,eAAeqf,KAAOlhB,KAAKkhB,GAAKD,EAAEC,IAAKD,EAAEpf,eAAe,cAAgB7B,KAAKwb,SAAWyF,EAAEzF,WAAa1W,MAAO,WAAkB,OAAO9E,KAAKqB,KAAKtF,UAAUwB,OAAOyC,QAAUshB,EAAI9c,EAAE+c,UAAYR,EAAExjB,OAAO,CAAE8D,KAAM,SAAc4f,EAAGC,GAAID,EAAIjhB,KAAKwhB,MAAQP,GAAK,GAAGjhB,KAAKyhB,SAA3sB,MAAstBP,EAASA,EAAI,EAAID,EAAElkB,QAAUye,SAAU,SAAkByF,GAAI,OAAQA,GAAKS,GAAGC,UAAU3hB,OAASX,OAAQ,SAAgB4hB,GAAI,IAAIC,EAAIlhB,KAAKwhB,MAAMrH,EAAI8G,EAAEO,MAAMI,EAAI5hB,KAAKyhB,SAAqC,GAA5BR,EAAIA,EAAEQ,SAASzhB,KAAK6hB,QAAYD,EAAI,EAAG,IAAK,IAAIE,EAAI,EAAGA,EAAIb,EAAGa,IAAMZ,EAAEU,EAAIE,IAAM,KAAO3H,EAAE2H,IAAM,KAAO,GAAUA,EAAI,EAAT,EAAc,MAAQ,IAAWF,EAAIE,GAAK,EAAf,OAAyB,GAAI,MAAQ3H,EAAEpd,OAAQ,IAAK+kB,EAAI,EAAGA,EAAIb,EAAGa,GAAK,EAAIZ,EAAEU,EAAIE,IAAM,GAAK3H,EAAE2H,IAAM,QAAUZ,EAAEziB,KAAKyB,MAAMghB,EAAG/G,GAAsB,OAAnBna,KAAKyhB,UAAYR,EAASjhB,MAAQ6hB,MAAO,WAAkB,IAAIZ,EAAIjhB,KAAKwhB,MAAMN,EAAIlhB,KAAKyhB,SAASR,EAAEC,IAAM,IAAM,YAAc,GAAUA,EAAI,EAAT,EAAYD,EAAElkB,OAASU,EAAEskB,KAAKb,EAAI,IAAMpc,MAAO,WAAkB,IAAImc,EAAIF,EAAEjc,MAAM2B,KAAKzG,MAAoC,OAA9BihB,EAAEO,MAAQxhB,KAAKwhB,MAAMtH,MAAM,GAAU+G,GAAKe,OAAQ,SAAgBf,GAAI,IAAK,IAAIC,EAAI,GAAI/G,EAAI,EAAGA,EAAI8G,EAAG9G,GAAK,EAAI+G,EAAEziB,KAAK,WAAahB,EAAEukB,SAAW,GAAI,OAAO,IAAIV,EAAEjgB,KAAK6f,EAAGD,MAAQgB,EAAIzY,EAAE0Y,IAAM,GAAGR,EAAIO,EAAEE,IAAM,CAAER,UAAW,SAAmBV,GAAI,IAAI9G,EAAI8G,EAAEO,MAAMP,EAAIA,EAAEQ,SAAS,IAAK,IAAIK,EAAI,GAAIF,EAAI,EAAGA,EAAIX,EAAGW,IAAK,CAAC,IAAIQ,EAAIjI,EAAEyH,IAAM,KAAO,GAAUA,EAAI,EAAT,EAAc,IAAIE,EAAErjB,MAAM2jB,IAAM,GAAG5G,SAAS,KAAKsG,EAAErjB,MAAU,GAAJ2jB,GAAQ5G,SAAS,KAAM,OAAOsG,EAAE7jB,KAAK,KAAOwQ,MAAO,SAAewS,GAAI,IAAK,IAAI9G,EAAI8G,EAAElkB,OAAQ+kB,EAAI,GAAIF,EAAI,EAAGA,EAAIzH,EAAGyH,GAAK,EAAIE,EAAEF,IAAM,IAAMpE,SAASyD,EAAEpjB,OAAO+jB,EAAG,GAAI,KAAO,GAAUA,EAAI,EAAT,EAAa,OAAO,IAAIN,EAAEjgB,KAAKygB,EAAG3H,EAAI,KAAOA,EAAI8H,EAAEI,OAAS,CAAEV,UAAW,SAAmBV,GAAI,IAAI9G,EAAI8G,EAAEO,MAAMP,EAAIA,EAAEQ,SAAS,IAAK,IAAIK,EAAI,GAAIF,EAAI,EAAGA,EAAIX,EAAGW,IAAME,EAAErjB,KAAKnB,OAAOglB,aAAanI,EAAEyH,IAAM,KAAO,GAAUA,EAAI,EAAT,EAAc,MAAO,OAAOE,EAAE7jB,KAAK,KAAOwQ,MAAO,SAAewS,GAAI,IAAK,IAAI9G,EAAI8G,EAAElkB,OAAQ+kB,EAAI,GAAIF,EAAI,EAAGA,EAAIzH,EAAGyH,IAAME,EAAEF,IAAM,KAAyB,IAAlBX,EAAE5G,WAAWuH,KAAa,GAAUA,EAAI,EAAT,EAAa,OAAO,IAAIN,EAAEjgB,KAAKygB,EAAG3H,KAAOoI,EAAIN,EAAEO,KAAO,CAAEb,UAAW,SAAmBV,GAAI,IAAK,OAAOwB,mBAAmBrG,OAAOjC,EAAEwH,UAAUV,KAAO,MAAOa,GAAI,MAAMY,MAAM,0BAA4BjU,MAAO,SAAewS,GAAI,OAAO9G,EAAE1L,MAAMrF,SAASuZ,mBAAmB1B,OAASa,EAAItd,EAAEoe,uBAAyB7B,EAAExjB,OAAO,CAAEslB,MAAO,WAAkB7iB,KAAKge,MAAQ,IAAIsD,EAAEjgB,KAAOrB,KAAK8iB,YAAc,GAAKC,QAAS,SAAiB9B,GAAI,iBAAmBA,IAAMA,EAAIsB,EAAE9T,MAAMwS,IAAIjhB,KAAKge,MAAM3e,OAAO4hB,GAAGjhB,KAAK8iB,aAAe7B,EAAEQ,UAAYuB,SAAU,SAAkB/B,GAAI,IAAI9G,EAAIna,KAAKge,MAAM8D,EAAI3H,EAAEqH,MAAMI,EAAIzH,EAAEsH,SAASW,EAAIpiB,KAAKijB,UAAUzZ,EAAIoY,GAAK,EAAIQ,GAA6F,GAA9BnB,GAA5DzX,EAAIyX,EAAIxjB,EAAEskB,KAAKvY,GAAK/L,EAAEogB,KAAS,EAAJrU,GAASxJ,KAAKkjB,eAAgB,IAAWd,EAAER,EAAInkB,EAAE0lB,IAAI,EAAIlC,EAAGW,GAAOX,EAAG,CAAC,IAAK,IAAIzc,EAAI,EAAGA,EAAIyc,EAAGzc,GAAK4d,EAAIpiB,KAAKojB,gBAAgBtB,EAAGtd,GAAIA,EAAIsd,EAAEuB,OAAO,EAAGpC,GAAG9G,EAAEsH,UAAYG,EAAG,OAAO,IAAIN,EAAEjgB,KAAKmD,EAAGod,IAAM9c,MAAO,WAAkB,IAAImc,EAAIF,EAAEjc,MAAM2B,KAAKzG,MAAmC,OAA7BihB,EAAEjD,MAAQhe,KAAKge,MAAMlZ,QAAemc,GAAKiC,eAAgB,IAAK1e,EAAE8e,OAASxB,EAAEvkB,OAAO,CAAEgmB,IAAKxC,EAAExjB,SAAU8D,KAAM,SAAc4f,GAAIjhB,KAAKujB,IAAMvjB,KAAKujB,IAAIhmB,OAAO0jB,GAAGjhB,KAAK6iB,SAAWA,MAAO,WAAkBf,EAAEe,MAAMpc,KAAKzG,MAAMA,KAAKwjB,YAAc5f,OAAQ,SAAgBqd,GAAoC,OAAhCjhB,KAAK+iB,QAAQ9B,GAAGjhB,KAAKgjB,WAAkBhjB,MAAQyjB,SAAU,SAAkBxC,GAAyB,OAArBA,GAAKjhB,KAAK+iB,QAAQ9B,GAAUjhB,KAAK0jB,eAAiBT,UAAW,GAAIU,cAAe,SAAuB1C,GAAI,OAAO,SAAU9G,EAAG2H,GAAI,OAAO,IAAIb,EAAE5f,KAAKygB,GAAG2B,SAAStJ,KAAQyJ,kBAAmB,SAA2B3C,GAAI,OAAO,SAAU9G,EAAG2H,GAAI,OAAO,IAAIM,EAAEyB,KAAKxiB,KAAK4f,EAAGa,GAAG2B,SAAStJ,OAAU,IAAIiI,EAAI5Y,EAAEsa,KAAO,GAAG,OAAOta,EAAlzH,CAAszH8Q,MAEj1H,OAFu1H,SAAW7c,GAAI,SAASmjB,EAAEzG,EAAGiI,EAAGnB,EAAGC,EAAG1c,EAAGod,EAAGpY,GAAqC,QAAjC2Q,EAAIA,GAAKiI,EAAInB,GAAKmB,EAAIlB,GAAK1c,EAAIgF,IAAeoY,EAAIzH,IAAM,GAAKyH,GAAKQ,EAAG,SAAS5Y,EAAE2Q,EAAGiI,EAAGnB,EAAGC,EAAG1c,EAAGod,EAAGpY,GAAqC,QAAjC2Q,EAAIA,GAAKiI,EAAIlB,EAAID,GAAKC,GAAK1c,EAAIgF,IAAeoY,EAAIzH,IAAM,GAAKyH,GAAKQ,EAAG,SAAS5d,EAAE2V,EAAGiI,EAAGnB,EAAGC,EAAG1c,EAAGod,EAAGpY,GAAgC,QAA5B2Q,EAAIA,GAAKiI,EAAInB,EAAIC,GAAK1c,EAAIgF,IAAeoY,EAAIzH,IAAM,GAAKyH,GAAKQ,EAAG,SAAStB,EAAE3G,EAAGiI,EAAGnB,EAAGC,EAAG1c,EAAGod,EAAGpY,GAAmC,QAA/B2Q,EAAIA,GAAK8G,GAAKmB,GAAKlB,IAAM1c,EAAIgF,IAAeoY,EAAIzH,IAAM,GAAKyH,GAAKQ,EAAG,IAAK,IAAIrB,EAAIJ,EAAqBsB,GAAXX,EAAIP,EAAEF,KAAWU,UAAWG,EAAIJ,EAAEgC,OAAQhC,EAAIP,EAAE+C,KAAM3J,EAAI,GAAIoI,EAAI,EAAG,GAAKA,EAAGA,IAAMpI,EAAEoI,GAAK,WAAa9kB,EAAEsmB,IAAItmB,EAAEumB,IAAIzB,EAAI,IAAM,EAAGjB,EAAIA,EAAE2C,IAAMvC,EAAEnkB,OAAO,CAAEimB,SAAU,WAAqBxjB,KAAKkkB,MAAQ,IAAIjC,EAAE5gB,KAAK,CAAC,WAAY,WAAY,WAAY,aAAe+hB,gBAAiB,SAAyBtB,EAAGM,GAAI,IAAK,IAAInB,EAAI,EAAG,GAAKA,EAAGA,IAAK,CAAC,IAAckD,EAAIrC,EAAdZ,EAAIkB,EAAInB,GAAWa,EAAEZ,GAA2B,UAArBiD,GAAK,EAAIA,IAAM,IAAuC,YAArBA,GAAK,GAAKA,IAAM,GAAqBlD,EAAIjhB,KAAKkkB,MAAM1C,MAAnB,IAAyBN,EAAIY,EAAEM,EAAI,GAAgBR,GAAbuC,EAAIrC,EAAEM,EAAI,GAAON,EAAEM,EAAI,IAAGd,EAAIQ,EAAEM,EAAI,GAAGrB,EAAIe,EAAEM,EAAI,GAAG3kB,EAAIqkB,EAAEM,EAAI,GAAGV,EAAII,EAAEM,EAAI,GAAGG,EAAIT,EAAEM,EAAI,GAAGH,EAAIH,EAAEM,EAAI,GAAGgC,EAAItC,EAAEM,EAAI,GAAGiC,EAAIvC,EAAEM,EAAI,IAAIkC,EAAIxC,EAAEM,EAAI,IAAImC,EAAIzC,EAAEM,EAAI,IAAIoC,EAAI1C,EAAEM,EAAI,IAAIqC,EAAI3C,EAAEM,EAAI,IAAIsC,EAAI5C,EAAEM,EAAI,IAAwCjlB,EAAIyjB,EAAxCzjB,EAAI8jB,EAAE,GAAG0D,EAAI1D,EAAE,GAAG3W,EAAI2W,EAAE,GAAGpgB,EAAIogB,EAAE,GAAqBC,EAAG,EAAG/G,EAAE,IAAItZ,EAAI+f,EAAE/f,EAAG1D,EAAGwnB,EAAGra,EAAG6Z,EAAG,GAAIhK,EAAE,IAAI7P,EAAIsW,EAAEtW,EAAGzJ,EAAG1D,EAAGwnB,EAAG/C,EAAG,GAAIzH,EAAE,IAAIwK,EAAI/D,EAAE+D,EAAGra,EAAGzJ,EAAG1D,EAAGmkB,EAAG,GAAInH,EAAE,IAAIhd,EAAIyjB,EAAEzjB,EAAGwnB,EAAGra,EAAGzJ,EAAGkgB,EAAG,EAAG5G,EAAE,IAAItZ,EAAI+f,EAAE/f,EAAG1D,EAAGwnB,EAAGra,EAAG7M,EAAG,GAAI0c,EAAE,IAAI7P,EAAIsW,EAAEtW,EAAGzJ,EAAG1D,EAAGwnB,EAAGjD,EAAG,GAAIvH,EAAE,IAAIwK,EAAI/D,EAAE+D,EAAGra,EAAGzJ,EAAG1D,EAAGolB,EAAG,GAAIpI,EAAE,IAAIhd,EAAIyjB,EAAEzjB,EAAGwnB,EAAGra,EAAGzJ,EAAGohB,EAAG,EAAG9H,EAAE,IAAItZ,EAAI+f,EAAE/f,EAAG1D,EAAGwnB,EAAGra,EAAG8Z,EAAG,GAAIjK,EAAE,IAAI7P,EAAIsW,EAAEtW,EAAGzJ,EAAG1D,EAAGwnB,EAAGN,EAAG,GAAIlK,EAAE,KAAKwK,EAAI/D,EAAE+D,EAAGra,EAAGzJ,EAAG1D,EAAGmnB,EAAG,GAAInK,EAAE,KAAKhd,EAAIyjB,EAAEzjB,EAAGwnB,EAAGra,EAAGzJ,EAAG0jB,EAAG,EAAGpK,EAAE,KAAKtZ,EAAI+f,EAAE/f,EAAG1D,EAAGwnB,EAAGra,EAAGka,EAAG,GAAIrK,EAAE,KAAK7P,EAAIsW,EAAEtW,EAAGzJ,EAAG1D,EAAGwnB,EAAGF,EAAG,GAAItK,EAAE,KAAqChd,EAAIqM,EAAErM,EAAtCwnB,EAAI/D,EAAE+D,EAAGra,EAAGzJ,EAAG1D,EAAGunB,EAAG,GAAIvK,EAAE,KAAiB7P,EAAGzJ,EAAGsjB,EAAG,EAAGhK,EAAE,KAAKtZ,EAAI2I,EAAE3I,EAAG1D,EAAGwnB,EAAGra,EAAGoX,EAAG,EAAGvH,EAAE,KAAK7P,EAAId,EAAEc,EAAGzJ,EAAG1D,EAAGwnB,EAAGL,EAAG,GAAInK,EAAE,KAAKwK,EAAInb,EAAEmb,EAAGra,EAAGzJ,EAAG1D,EAAG+jB,EAAG,GAAI/G,EAAE,KAAKhd,EAAIqM,EAAErM,EAAGwnB,EAAGra,EAAGzJ,EAAGpD,EAAG,EAAG0c,EAAE,KAAKtZ,EAAI2I,EAAE3I,EAAG1D,EAAGwnB,EAAGra,EAAG+Z,EAAG,EAAGlK,EAAE,KAAK7P,EAAId,EAAEc,EAAGzJ,EAAG1D,EAAGwnB,EAAGD,EAAG,GAAIvK,EAAE,KAAKwK,EAAInb,EAAEmb,EAAGra,EAAGzJ,EAAG1D,EAAG4jB,EAAG,GAAI5G,EAAE,KAAKhd,EAAIqM,EAAErM,EAAGwnB,EAAGra,EAAGzJ,EAAGujB,EAAG,EAAGjK,EAAE,KAAKtZ,EAAI2I,EAAE3I,EAAG1D,EAAGwnB,EAAGra,EAAGma,EAAG,EAAGtK,EAAE,KAAK7P,EAAId,EAAEc,EAAGzJ,EAAG1D,EAAGwnB,EAAGrD,EAAG,GAAInH,EAAE,KAAKwK,EAAInb,EAAEmb,EAAGra,EAAGzJ,EAAG1D,EAAG8kB,EAAG,GAAI9H,EAAE,KAAKhd,EAAIqM,EAAErM,EAAGwnB,EAAGra,EAAGzJ,EAAG2jB,EAAG,EAAGrK,EAAE,KAAKtZ,EAAI2I,EAAE3I,EAAG1D,EAAGwnB,EAAGra,EAAGsX,EAAG,EAAGzH,EAAE,KAAK7P,EAAId,EAAEc,EAAGzJ,EAAG1D,EAAGwnB,EAAGpC,EAAG,GAAIpI,EAAE,KAAqChd,EAAIqH,EAAErH,EAAtCwnB,EAAInb,EAAEmb,EAAGra,EAAGzJ,EAAG1D,EAAGonB,EAAG,GAAIpK,EAAE,KAAiB7P,EAAGzJ,EAAGpD,EAAG,EAAG0c,EAAE,KAAKtZ,EAAI2D,EAAE3D,EAAG1D,EAAGwnB,EAAGra,EAAG2X,EAAG,GAAI9H,EAAE,KAAK7P,EAAI9F,EAAE8F,EAAGzJ,EAAG1D,EAAGwnB,EAAGL,EAAG,GAAInK,EAAE,KAAKwK,EAAIngB,EAAEmgB,EAAGra,EAAGzJ,EAAG1D,EAAGsnB,EAAG,GAAItK,EAAE,KAAKhd,EAAIqH,EAAErH,EAAGwnB,EAAGra,EAAGzJ,EAAGsjB,EAAG,EAAGhK,EAAE,KAAKtZ,EAAI2D,EAAE3D,EAAG1D,EAAGwnB,EAAGra,EAAGyW,EAAG,GAAI5G,EAAE,KAAK7P,EAAI9F,EAAE8F,EAAGzJ,EAAG1D,EAAGwnB,EAAGpC,EAAG,GAAIpI,EAAE,KAAKwK,EAAIngB,EAAEmgB,EAAGra,EAAGzJ,EAAG1D,EAAGknB,EAAG,GAAIlK,EAAE,KAAKhd,EAAIqH,EAAErH,EAAGwnB,EAAGra,EAAGzJ,EAAG2jB,EAAG,EAAGrK,EAAE,KAAKtZ,EAAI2D,EAAE3D,EAAG1D,EAAGwnB,EAAGra,EAAG4W,EAAG,GAAI/G,EAAE,KAAK7P,EAAI9F,EAAE8F,EAAGzJ,EAAG1D,EAAGwnB,EAAGrD,EAAG,GAAInH,EAAE,KAAKwK,EAAIngB,EAAEmgB,EAAGra,EAAGzJ,EAAG1D,EAAGukB,EAAG,GAAIvH,EAAE,KAAKhd,EAAIqH,EAAErH,EAAGwnB,EAAGra,EAAGzJ,EAAGujB,EAAG,EAAGjK,EAAE,KAAKtZ,EAAI2D,EAAE3D,EAAG1D,EAAGwnB,EAAGra,EAAGia,EAAG,GAAIpK,EAAE,KAAK7P,EAAI9F,EAAE8F,EAAGzJ,EAAG1D,EAAGwnB,EAAGD,EAAG,GAAIvK,EAAE,KAAqChd,EAAI2jB,EAAE3jB,EAAtCwnB,EAAIngB,EAAEmgB,EAAGra,EAAGzJ,EAAG1D,EAAGykB,EAAG,GAAIzH,EAAE,KAAiB7P,EAAGzJ,EAAGqgB,EAAG,EAAG/G,EAAE,KAAKtZ,EAAIigB,EAAEjgB,EAAG1D,EAAGwnB,EAAGra,EAAGiY,EAAG,GAAIpI,EAAE,KAAK7P,EAAIwW,EAAExW,EAAGzJ,EAAG1D,EAAGwnB,EAAGF,EAAG,GAAItK,EAAE,KAAKwK,EAAI7D,EAAE6D,EAAGra,EAAGzJ,EAAG1D,EAAGM,EAAG,GAAI0c,EAAE,KAAKhd,EAAI2jB,EAAE3jB,EAAGwnB,EAAGra,EAAGzJ,EAAG0jB,EAAG,EAAGpK,EAAE,KAAKtZ,EAAIigB,EAAEjgB,EAAG1D,EAAGwnB,EAAGra,EAAGgX,EAAG,GAAInH,EAAE,KAAK7P,EAAIwW,EAAExW,EAAGzJ,EAAG1D,EAAGwnB,EAAGN,EAAG,GAAIlK,EAAE,KAAKwK,EAAI7D,EAAE6D,EAAGra,EAAGzJ,EAAG1D,EAAGgnB,EAAG,GAAIhK,EAAE,KAAKhd,EAAI2jB,EAAE3jB,EAAGwnB,EAAGra,EAAGzJ,EAAGohB,EAAG,EAAG9H,EAAE,KAAKtZ,EAAIigB,EAAEjgB,EAAG1D,EAAGwnB,EAAGra,EAAGoa,EAAG,GAAIvK,EAAE,KAAK7P,EAAIwW,EAAExW,EAAGzJ,EAAG1D,EAAGwnB,EAAGjD,EAAG,GAAIvH,EAAE,KAAKwK,EAAI7D,EAAE6D,EAAGra,EAAGzJ,EAAG1D,EAAGqnB,EAAG,GAAIrK,EAAE,KAAKhd,EAAI2jB,EAAE3jB,EAAGwnB,EAAGra,EAAGzJ,EAAGkgB,EAAG,EAAG5G,EAAE,KAAKtZ,EAAIigB,EAAEjgB,EAAG1D,EAAGwnB,EAAGra,EAAGga,EAAG,GAAInK,EAAE,KAAK7P,EAAIwW,EAAExW,EAAGzJ,EAAG1D,EAAGwnB,EAAG/C,EAAG,GAAIzH,EAAE,KAAKwK,EAAI7D,EAAE6D,EAAGra,EAAGzJ,EAAG1D,EAAGinB,EAAG,GAAIjK,EAAE,KAAK8G,EAAE,GAAKA,EAAE,GAAK9jB,EAAI,EAAE8jB,EAAE,GAAKA,EAAE,GAAK0D,EAAI,EAAE1D,EAAE,GAAKA,EAAE,GAAK3W,EAAI,EAAE2W,EAAE,GAAKA,EAAE,GAAKpgB,EAAI,GAAK6iB,YAAa,WAAwB,IAAIvJ,EAAIna,KAAKge,MAAMoE,EAAIjI,EAAEqH,MAAMP,EAAI,EAAIjhB,KAAK8iB,YAAY5B,EAAI,EAAI/G,EAAEsH,SAASW,EAAElB,IAAM,IAAM,KAAO,GAAKA,EAAI,GAAG,IAAI1c,EAAI/G,EAAEmnB,MAAM3D,EAAI,YAAuR,IAA3QmB,EAAwB,IAArBlB,EAAI,KAAO,GAAK,IAAiC,UAArB1c,GAAK,EAAIA,IAAM,IAAuC,YAArBA,GAAK,GAAKA,IAAM,GAAgB4d,EAAwB,IAArBlB,EAAI,KAAO,GAAK,IAAiC,UAArBD,GAAK,EAAIA,IAAM,IAAuC,YAArBA,GAAK,GAAKA,IAAM,GAAgB9G,EAAEsH,SAAW,GAAKW,EAAErlB,OAAS,GAAGiD,KAAKgjB,WAA0BZ,GAAfjI,EAAIna,KAAKkkB,OAAY1C,MAAWP,EAAI,EAAG,EAAIA,EAAGA,IAAMC,EAAIkB,EAAEnB,GAAImB,EAAEnB,GAA2B,UAArBC,GAAK,EAAIA,IAAM,IAAuC,YAArBA,GAAK,GAAKA,IAAM,GAAiB,OAAO/G,GAAKrV,MAAO,WAAkB,IAAIqV,EAAIuH,EAAE5c,MAAM2B,KAAKzG,MAAmC,OAA7Bma,EAAE+J,MAAQlkB,KAAKkkB,MAAMpf,QAAeqV,KAAO4G,EAAEkD,IAAMvC,EAAEiC,cAAcrC,GAAGP,EAAE8D,QAAUnD,EAAEkC,kBAAkBtC,GAAh4H,CAAs4HhH,MAEttPqG,EAASsD,IAAIvS,GAAS8J,YAO/B7V,OAAOoM,KAAK+S,aAAe,SAAU9d,EAAM+d,GAGzC,IAAK,IAAIviB,KAFTuiB,EAAmBA,GAAoB,GAEL,CAChC,IAAIC,EAAM,IAAI7I,OAAO3Z,EAAK,KAC1BwE,EAAOA,EAAK5I,QAAQ4mB,EAAKD,EAAiBviB,IAE5C,OAAOwE,GAKTrB,OAAOoM,KAAK3N,WAAa,SAAU4C,EAAMie,EAAQC,GAE/C,OAAOvf,OAAOvB,WAAW4C,EAAMie,EAAQC,IAKzCvf,OAAOoM,KAAKoT,uBAAyB,SAAUne,EAAMie,EAAQC,GAC3D,IAAItY,EAAO5F,EAEPoe,EAAK,IAAIjJ,OAAO8I,EAAQ,KAG5B,OAFArY,EAAOA,EAAKxO,QAAQgnB,EAAIF,IAEZ1J,YAGdle,OAAOvB,UAAUqI,WAAa,SAAU6gB,EAAQC,GAC9C,OAAOvf,OAAOoM,KAAK3N,WAAWpE,KAAMilB,EAAQC,IAG9C5nB,OAAOvB,UAAUyB,WAAa,WAC5B,OAAOwC,KAAKrC,OAAO,GAAGC,cAAgBoC,KAAKka,MAAM,IAGnD5c,OAAOvB,UAAUspB,WAAa,SAAUhoB,GACtC,OAAO2C,KAAKka,MAAM,EAAG7c,EAAIN,SAAWM,GAMtCC,OAAOvB,UAAUupB,YAAc,WAC7B,IAAIC,EAAW,GACf,GAAoB,IAAhBvlB,KAAKjD,OACPwoB,EAAW,oJACN,CACL,IAGE,IAFA,IACI/D,EADqBxhB,KAAK5B,QAAQ,OAAQ,KACftB,MAAM,KAC5BF,EAAI,EAAGA,EAAI4kB,EAAMzkB,QAED,IADvBwoB,GAAY/D,EAAM5kB,GAAG,IAAM,IACdG,OAFmBH,GAAK,IAMvC,MAAO0N,IAETib,EAAWA,EAAS3nB,cAEtB,OAAO2nB,GAGTjL,KAAKkL,KAAOlL,KAAKkL,MAAQ,SAAUpB,GAEjC,OAAU,KADVA,GAAKA,IACUqB,MAAMrB,GACZA,EAEFA,EAAI,EAAI,GAAK,GAItBze,OAAOb,MAAQ,SAAUnJ,GACvB,GAAWyB,MAAPzB,EACJ,OAAW,MAAPA,EAAoB,KACjB6S,KAAKC,MAAMD,KAAKzH,OAAOpL,KAGhCgK,OAAO+f,cAAgB,SAAUC,EAAQC,GACvC,IAAIrmB,EAAOvD,EAAE,WAAWgI,SAAS,QACjCzE,EAAKyH,KAAK2e,GACNC,GACJrmB,EAAKke,IAAI,YAAamI,GACtB,IAAIjT,EAAQpT,EAAKoT,QAEjB,OADApT,EAAKqR,SACE+B,GAKThN,OAAOoM,KAAKnJ,KAAO,SAAU5B,GAC3B,YAAoB,IAATA,GAAgC,MAARA,EAC5BA,EAEAA,EAAK5I,QAAQ,SAAU,IAAIA,QAAQ,SAAU,KAGtDd,OAAOvB,UAAU8pB,SAAW,SAAUC,GACpC,OAA8D,IAAvD9lB,KAAKqJ,QAAQyc,EAAQ9lB,KAAKjD,OAAS+oB,EAAO/oB,SAInDO,OAAOvB,UAAU8pB,SAAW,SAAUC,GACpC,OAA8D,IAAvD9lB,KAAKqJ,QAAQyc,EAAQ9lB,KAAKjD,OAAS+oB,EAAO/oB,SAMnD4I,OAAOoM,KAAKgU,MAAQ,WAClB,OAAOpgB,OAAOoM,KAAKiU,QAAmC,GAAzBxd,SAASyd,cAKxCtgB,OAAOoM,KAAKmU,MAAQ,WAClB,OAAOvgB,OAAOoM,KAAKiU,QAAmC,GAAzBxd,SAASyd,cAKxCtgB,OAAOoM,KAAKoU,MAAQ,WAClB,OAAOxgB,OAAOoM,KAAKiU,QAAmC,GAAzBxd,SAASyd,cAKxCtgB,OAAOoM,KAAKqU,OAAS,WACnB,OAAOzgB,OAAOoM,KAAKiU,QAAmC,IAAzBxd,SAASyd,cAKxCtgB,OAAOoM,KAAKsU,OAAS,WACnB,QAASC,UAAUC,UAAUpX,MAAM,kBAAoBmX,UAAUC,UAAUpX,MAAM,UAMnFxJ,OAAOoM,KAAKyU,cAAgB,WAC1B,OAAO7gB,OAAOoM,KAAKsU,UAAY1gB,OAAOoM,KAAKqU,UAAYzgB,OAAOoM,KAAKoU,SAAWxgB,OAAOoM,KAAKmU,SAAWvgB,OAAOoM,KAAKgU,SAMnHpgB,OAAOoM,KAAK0U,cAAgB,WAC1B,OAAO9gB,OAAOoM,KAAKqU,UAAYzgB,OAAOoM,KAAKoU,SAAWxgB,OAAOoM,KAAKmU,SAAWvgB,OAAOoM,KAAKgU,SAM3FpgB,OAAOoM,KAAK2U,OAAS,WACnB,QAAI,YAAYnnB,KAAK+mB,UAAUC,YAQjC5gB,OAAOoM,KAAKiU,KAAO,WACjB,OAAOM,UAAUK,QAAQtd,QAAQ,qBAAuB,KAAOid,UAAUC,UAAUpX,MAAM,YAK3FxJ,OAAOoM,KAAK6U,aAAe,SAAUC,GACnC,OAAIlhB,OAAOoM,KAAKiU,OACTc,OAAOC,KAAKF,GAAOngB,KAAI,SAAUsgB,GAAM,OAAOH,EAAMG,MAEpDF,OAAOG,OAAOJ,IAKvBlhB,OAAOoM,KAAKmV,aAAe,WACzB,IAAIC,EAASjqB,OAAOopB,UAAUC,UAC1Ba,EAAYD,EAAO9d,QAAQ,QAC3BmC,EAAU,EAOd,OANI4b,EAAY,EACd5b,EAAUgS,SAAS2J,EAAOxY,UAAUyY,EAAY,EAAGD,EAAO9d,QAAQ,IAAK+d,MAEnEd,UAAUC,UAAUpX,MAAM,YAAcjS,OAAOopB,UAAUC,UAAUld,QAAQ,SAAW,KAC1FmC,EAAU,IAELA,GAKT7F,OAAOoM,KAAKsV,SAAW,WACrB,MAAO,SAAS9nB,KAAK+mB,UAAUC,YAAc,aAAahnB,KAAK+mB,UAAUgB,SAK3E3hB,OAAOoM,KAAKwV,UAAY,SAAUC,GAkBhC,MAAO,UAAUjoB,KAAK+mB,UAAUC,kBAA8BnpB,IAAfoqB,GAA4BA,IAhBrEC,EAAKnB,UAAUC,UAAcmB,EAAID,EAAGtY,MAAM,iEAAmE,GAC7G,WAAW5P,KAAKmoB,EAAE,IAEb,CAAE7nB,KAAM,KAAM2L,SADrBmc,EAAM,kBAAkBnQ,KAAKiQ,IAAO,IACF,IAAM,IAE7B,WAATC,EAAE,IAEO,OADXC,EAAMF,EAAGtY,MAAM,sBACU,CAAEtP,KAAM,QAAS2L,QAASmc,EAAI,KAEzDD,EAAIA,EAAE,GAAK,CAACA,EAAE,GAAIA,EAAE,IAAM,CAACpB,UAAUK,QAASL,UAAUsB,WAAY,MACzB,OAAtCD,EAAMF,EAAGtY,MAAM,qBAA8BuY,EAAErE,OAAO,EAAG,EAAGsE,EAAI,IAC9D,CACL9nB,KAAM6nB,EAAE,GACRlc,QAASkc,EAAE,MAGuFlc,SAjBtG,IAC+Bmc,EAAzBF,EAA6BC,GAqBrC/hB,OAAOoM,KAAK8V,WAAa,WACvB,IAAIC,EAAK,aAaT,OAZIniB,OAAOoM,KAAKsV,WACdS,EAAK,SACIniB,OAAOoM,KAAKwV,YACrBO,EAAK,UACIniB,OAAOoM,KAAK2U,SACrBoB,EAAK,OACIniB,OAAOoM,KAAKsU,SACrByB,EAAK,OAEIniB,OAAOoM,KAAKqU,WACrB0B,EAAK,QAEAA,GAMTniB,OAAOoM,KAAKgW,mBAAqB,WAC3BpiB,OAAO2gB,WAAa3gB,OAAO2gB,UAAU0B,OACvCriB,OAAO2gB,UAAU0B,KAAO,KAO5BhsB,EAAEwM,UAAU2F,OAAM,WAIhB,GAHAnS,EAAE,QACF6U,SAAS,WAAalL,OAAOoM,KAAK8V,cAClChX,SAAS,UAAYlL,OAAOoG,gBACxBpG,OAAOyF,SAAU,CACnB,IAAIA,EAAWzF,OAAOyF,SAAStO,MAAM,KACjCsO,GAAYA,EAASrO,OAAS,GAChCf,EAAE,QAAQ6U,SAAS,YAAczF,EAAS,QAWhDzF,OAAOoM,KAAKkW,oBAAsB,WAC5BtiB,OAAOoM,KAAKmW,gCAA4D,IAAxBC,UAAUC,WAC5DD,UAAUC,WAAU,SAAUlR,GAI5B,GAAoB,SAHFA,EAIhBlb,EAAE,QAAQwU,OAAO,qDACjBxU,EAAE,iBAAiBgL,KAJF,gzBAMZ,GAAIrB,OAAOoM,KAAKsW,cAAe,CACpCrsB,EAAE,QAAQwU,OAAO,oDAEjBxU,EAAE,gBAAgBgL,KADC,4DAO3BrB,OAAOoM,KAAKrR,SAAW,SAAUwW,GAC/B,MAAkD,oBAA3C4P,OAAO/qB,UAAUyf,SAAStb,MAAMgX,IAGzCvR,OAAOoM,KAAK+F,SAAW,SAAUZ,GAC/B,MAAkD,oBAA3C4P,OAAO/qB,UAAUyf,SAAStb,MAAMgX,IAGzCvR,OAAOoM,KAAK9U,QAAU,SAAUia,GAC9B,OAAO+C,MAAMhd,QAAQia,IAEvBvR,OAAOoM,KAAKuW,OAAS,SAAUpR,GAC7B,MAAkD,kBAA3C4P,OAAO/qB,UAAUyf,SAAStb,MAAMgX,IAEzCvR,OAAOoM,KAAKwW,UAAY,SAAUrR,GAChC,MAAkD,qBAA3C4P,OAAO/qB,UAAUyf,SAAStb,MAAMgX,IAMzCvR,OAAOoM,KAAKyW,2BAA6B,WACvC,OAAK7iB,OAAOoM,KAAKiU,OAEVyC,OAAOjgB,SAASyd,eADf,GAMVtgB,OAAOoM,KAAKhG,aAAe,WAEzB,OAAOpG,OAAOoG,gBAIhBpG,OAAOoM,KAAK2W,UAAY,SAAU5H,GAChC,OAAQ2E,MAAMkD,WAAW7H,KAAO8H,SAAS9H,IAI3Cnb,OAAOoM,KAAK8W,OAAS,SAAU/H,GAC7B,MAAO,6EAA6EvhB,KAAKuhB,IAG3Fnb,OAAOoM,KAAK+W,cAAgB,SAAUC,GACpC,IACEtZ,QAAQC,IAAI,8BAAgCqZ,GAC5C,MAAOC,MAKXrjB,OAAOoM,KAAKkX,YAAc,SAAUC,GAClC,OAAIvjB,OAAOoM,KAAKoX,QAAQD,SAAsC,IAArBA,EAAM9kB,WACxC,GACA8kB,EAAM9kB,WAAW,IAAK,KAAKA,WAAW,IAAK,KAAKA,WAAW,IAAK,KAAKA,WAAW,IAAK,MAG9FuB,OAAOoM,KAAKoL,aAAe,SAAUjG,GACnC,YAAc9Z,IAAV8Z,EACK,KAGK,OAAVA,EACK,KAGK,KAAVA,EACK,MAIK,IAAVA,GAA4B,IAAVA,GAAoC,SAArBA,EAAMsE,YAAmC,MAAVtE,IAG7B,SAAnCA,EAAMsE,WAAWxd,gBAKP,OAAVkZ,IAA4B,IAAVA,IAA6B,IAAVA,GAAoC,UAArBA,EAAMsE,YAAoC,MAAVtE,IAGjD,UAAnCA,EAAMsE,WAAWxd,eAId,QAKT2H,OAAOoM,KAAKoX,QAAU,SAAUjS,GAC9B,OAAc,IAAVA,IAGAA,MAAAA,GAAmD,KAAVA,IAIxB,gBAAVA,EACc,GAAhBA,EAAMna,OAGgC,mBAA3C+pB,OAAO/qB,UAAUyf,SAAStb,MAAMgX,GACV,IAAjBA,EAAMna,OAGgC,oBAA3C+pB,OAAO/qB,UAAUyf,SAAStb,MAAMgX,OAC9Blb,EAAEotB,cAAclS,IAGXvR,OAAOoM,KAAKsX,aAAanS,OAYtCvR,OAAOoM,KAAKsX,aAAe,SAAUC,GACnC,GAAgD,oBAA5CxC,OAAO/qB,UAAUyf,SAAStb,MAAMopB,GAA+B,CACjE,IAAIC,EAAS/Z,GAAK,EAElBga,GAAQ,EACR,IAAKD,KAAYD,EACf,GAAIA,EAAOznB,eAAe0nB,KACP,OAAbA,EACF/Z,GAAK,EAEY,UAAb+Z,GACM,EAERC,GAAQ,EAGRA,GACF,OAAO,EAIb,GAAIha,EACF,MAAqB,KAAjB8Z,EAAW,KAarB3jB,OAAOoM,KAAK0X,UAAY,SAAUvS,GAOhC,IALA,IAEIwS,EAFAC,GAAgB,EAChBC,EAFJ1S,EAAQA,GAAS,IAMTyS,GACN,IAEE,GADAD,EAAkBD,UAAUG,GACxBjkB,OAAOoM,KAAK8X,mBAAmBH,GAAkB,CACnDE,EAAe1S,EACf,MAEEwS,GAAmBE,EACrBD,GAAgB,EAEhBC,EAAeF,EAEjB,MAAOpf,GACPqf,GAAgB,EAIpB,OAAOC,GAGTjkB,OAAOoM,KAAK8X,mBAAqB,SAAU3S,GAMzC,IAJA,IAGA4S,EAHI/sB,GADJma,EAAQA,GAAS,IACEna,OACfH,EAAI,EACRkJ,GAAS,EAEFlJ,EAAIG,GAET,IADA+sB,EAAK5S,EAAMmD,WAAWzd,MACb,IAAMktB,EAAK,IAAK,CACvBhkB,GAAS,EACT,MAGJ,OAAOA,GAMTH,OAAOoM,KAAKgY,eAAiB,SAAU7S,GACrC,OAAOuR,OAAOnrB,OAAO4Z,GAAO9Y,QAAQ,IAAK,MAK3CuH,OAAOoM,KAAKiY,cAAgB,SAAUruB,GACpC,QAAIA,EAAIoB,OAAS,IAOnB4I,OAAOoM,KAAKkY,WAAa,SAAUvjB,GAEjC,GAAkB,GAAdA,EAAI3J,QAAgC,GAAjB2J,EAAI,GAAG3J,OAC9B,OAAO,EAEP,IAAK,IAAIyF,KAAOkE,EACd,GAAIA,EAAI7E,eAAeW,GACrB,OAAO,EAGX,OAAO,GAKTmD,OAAOoM,KAAKmY,gBAAkB,SAAUC,EAAW7lB,EAAUlG,GAE3D,IAAIgsB,EAAmBpuB,EAAEsI,EAAU6lB,GAC/BC,EAAiBrtB,OAAS,IAC5BqtB,EAAiB5Z,OAAOpS,GACxBgsB,EAAiBna,WAAWoa,WAMhC1kB,OAAOoM,KAAKuY,UAAY,SAAU/hB,EAAIgiB,GAChChiB,EAAGxL,SACPwL,EAAKA,EAAG,IAER,IAAIzC,IAAWyC,EADfgiB,EAA0B,aAAdA,EAA2B,YAAc,cAOrD,OALKzkB,IACHyC,EAAGgiB,GAAa,EAChBzkB,IAAWyC,EAAGgiB,GACdhiB,EAAGgiB,GAAa,GAEXzkB,GAITH,OAAOoM,KAAKyY,iBAAmB,SAAUC,EAAMC,GAG7C,GAAIhvB,QAAQ+uB,KAAU/uB,QAAQgvB,GAC5B,OAAO,EAGT,GAAoB,mBAATD,EACT,OAAOA,EAAKjP,aAAekP,EAAKlP,WAGlC,GAAIiP,aAAgB3D,QAAU4D,aAAgB5D,OAAQ,CAGpD,GAAInhB,OAAOoM,KAAK4Y,WAAWF,KAAU9kB,OAAOoM,KAAK4Y,WAAWD,GAC1D,OAAO,EAIT,IAAKtI,KAAKqI,EAER,IADI9kB,OAAOoM,KAAKyY,iBAAiBC,EAAKrI,GAAIsI,EAAKtI,IAE7C,OAAO,EAGX,OAAO,EAEP,OAAOqI,IAASC,GAIpB/kB,OAAOoM,KAAK4Y,WAAa,SAAUhvB,GACjC,IAAIivB,EAAQ,EACZ,IAAKxI,KAAKzmB,EACJA,EAAIkG,eAAeugB,IACrBwI,IAGJ,OAAOA,GAKTjlB,OAAOoM,KAAK8Y,mBAAqB,SAAUjkB,EAAMkkB,GAC/C,GAAY1tB,MAARwJ,EACF,OAAO,EAIT,IAAImkB,GADJD,EAASA,GAAU9uB,EAAEkB,SACE6tB,YACnBC,EAAUhvB,EAAE4K,GAAMqkB,SAASC,IAG/B,OAFiBF,EAAUhvB,EAAE4K,GAAM8L,UACfqY,EAAY/uB,EAAE8uB,GAAQpY,UACJsY,GAAWD,GAEnDplB,OAAOoM,KAAKoZ,wBAA0B,SAAUvkB,EAAMkkB,GACpD,GAAY1tB,MAARwJ,EACF,OAAO,EAIT,IAAIwkB,GADJN,EAASA,GAAU9uB,EAAEkB,SACK6tB,YACtBM,EAAarvB,EAAE4K,GAAMqkB,SAASC,IAC9BI,EAAgBtvB,EAAE4K,GAAM8L,SAOxB6Y,EAASH,GALTC,EAAa,EACNA,EAAaC,EAEbD,EAAaC,GAGxBR,EAAOC,UAAUQ,IAKnB5lB,OAAOoM,KAAKyZ,WAAa,SAAUxkB,GACjC,OAAIA,MAAAA,EACK,GAEU,iBAARA,EACFA,EAAK5I,QAAQ,KAAM,SAASA,QAAQ,KAAM,QAAQA,QAAQ,KAAM,QAElE4I,GAMTrB,OAAOoM,KAAK0Z,mBAAqB,SAAUzkB,GACzC,OAAIA,MAAAA,EACK,GAEU,iBAARA,EACFA,EAAK5I,QAAQ,UAAW,KAAKA,QAAQ,QAAS,KAAKA,QAAQ,QAAS,KAAKA,QAAQ,UAAW,KAE9F4I,GAKTrB,OAAOoM,KAAK2Z,cAAgB,WAE1B,OADaxuB,OAAOmV,SAAShF,KAAKsB,UAAU,GAAG7R,MAAM,MAMvD6I,OAAOoM,KAAK1C,SAAW,SAAU/F,GAC/B,IAAIgD,EAAQ,IAAItQ,EAAEuQ,SACdjB,EAAMhC,GAAUA,EAAOgG,IAAMhG,EAAOgG,IAAMhG,EAC1C/M,EAAO+M,GAAUA,EAAO/M,KAAO+M,EAAO/M,KAAO,KAOjD,OALAoJ,OAAO4F,OAAO8D,SAAS,CAAEC,IAAKhE,EAAK/O,KAAMA,IACzCic,MAAK,WACHlM,EAAMU,aAGDV,EAAMW,WAMftH,OAAOoM,KAAK4Z,YAAc,SAAUC,EAAS9Z,GAC3C,IAAIxF,EAAQ,IAAItQ,EAAEuQ,SA4BlB,OA1BAuF,EAASA,GAAUnM,OAAOoG,eAEtB6f,EAAQC,YAEVvf,EAAMU,UAGF4e,EAAQ9sB,aACV9C,EAAEwQ,KAAKof,EAAQE,gBAAgB7e,WAC/BP,MAAK,WACHJ,EAAMU,cAIR4e,EAAQE,gBAAkB,IAAI9vB,EAAEuQ,SAChCqf,EAAQ9sB,cAAe,EACvB6G,OAAO4F,OAAOogB,YAAYC,EAAS9Z,GAAQ,WAGzC8Z,EAAQE,gBAAgB9e,UACxB4e,EAAQ9sB,cAAe,EACvBwN,EAAMU,cAKLV,EAAMW,WAKftH,OAAOoM,KAAKga,eAAiB,SAAUzgB,GAKrC,IAJA,IAAIhC,EAAS,GAGT0iB,IAFJ1gB,EAAMA,GAAOpO,OAAOmV,SAAS8N,MACb9W,QAAQ,KAAO,EAAIiC,EAAIqD,UAAUrD,EAAIjC,QAAQ,KAAO,GAAK,IACvDvM,MAAM,KACfF,EAAIovB,EAAMjvB,OAAS,EAAGH,GAAK,EAAGA,IAAK,CAC1C,IAAIqvB,EAAMD,EAAMpvB,GAAGyM,QAAQ,KAC3B,IAAY,GAAR4iB,EAAJ,CAEA,IAAIC,EAAUF,EAAMpvB,GAAG+R,UAAU,EAAGsd,GAChC/U,EAAQ8U,EAAMpvB,GAAG+R,UAAUsd,EAAM,GACrC3iB,EAAO4iB,GAAW9iB,SAAS8N,IAE7B,OAAO5N,GAKT3D,OAAOoM,KAAKoa,kBAAoB,SAAU7gB,EAAK8gB,GAC7C,IAAIC,EAAW/gB,EAAIjC,QAAQ,KAAO,EAAIiC,EAAIqD,UAAU,EAAGrD,EAAIjC,QAAQ,MAAQiC,EACvEghB,EAAiB3mB,OAAOoM,KAAKga,eAAezgB,GAC5CihB,EAAYvwB,EAAEuB,OAAO,GAAI+uB,EAAgBF,GAC7C,OAAOC,EAAW,IAAMrwB,EAAEwwB,MAAMD,IAElC5mB,OAAOoM,KAAK0a,cAAgB,WAC1B,IAAIC,EAAY,GACZC,GAAuB,EAC3B,IACE/vB,EAAEgwB,KAAKC,OAAS,EAChB,MAAOviB,GACP,GAAIA,EAAE3H,MAAO,CAEX,IADA,IACS/F,EAAI,EAAGkwB,GADZC,EAAQziB,EAAE3H,MAAM7F,MAAM,OACEC,OAAQH,EAAIkwB,EAAKlwB,IACvCmwB,EAAMnwB,GAAGuS,MAAM,4BACjBud,EAAUjuB,KAAKsuB,EAAMnwB,IAIzB8vB,EAAUjsB,QACVksB,GAAuB,OAClB,GAAIzvB,OAAO8vB,OAAS1iB,EAAEoH,QAAS,CACpC,IAAIqb,EACJ,IAASnwB,EAAI,EAAGkwB,GADZC,EAAQziB,EAAEoH,QAAQ5U,MAAM,OACAC,OAAQH,EAAIkwB,EAAKlwB,IAC3C,GAAImwB,EAAMnwB,GAAGuS,MAAM,2BAA4B,CAC7C,IAAI8d,EAAQF,EAAMnwB,GAEdmwB,EAAMnwB,EAAI,KACZqwB,GAAS,OAASF,EAAMnwB,EAAI,GAC5BA,KAEF8vB,EAAUjuB,KAAKwuB,GAInBP,EAAUjsB,QACVksB,GAAuB,GAG3B,IAAKA,EAEH,IADA,IAAIO,EAAkB/sB,UAAUyB,OAAOurB,OAChCD,GAAiB,CACtB,IAAIptB,EAAKotB,EAAgB1R,WACrB4R,EAAQttB,EAAG6O,UAAU7O,EAAGuJ,QAAQ,YAAc,EAAGvJ,EAAGuJ,QAAQ,MAAQ,YACxEqjB,EAAUjuB,KAAK2uB,GACfF,EAAkBA,EAAgBC,OAGtC,OAAOT,GAKT/mB,OAAOoM,KAAKsb,iBAAmB,SAAU9kB,GACvCA,EAAGsI,SAAS,wBACZ7U,EAAEwQ,KACF8gB,YAAW,WACT/kB,EAAGsI,SAAS,8BACX,MACHnE,KACA4gB,YAAW,WACT/kB,EAAGglB,YAAY,mDACd,OAKL5nB,OAAOoM,KAAKyb,iBAAmB,SAAUjlB,GACvC,IACE,IAAIklB,EACJA,EAAiBllB,EAAG,GAAGmlB,aACvBnlB,EAAGwiB,UAAU0C,GACb,MAAOnjB,MAIX3E,OAAOoM,KAAK4b,mBAAqB,CAAEtsB,MAAM,GACzCsE,OAAOoM,KAAK6b,WAAa,SAAUC,EAAYC,EAAUC,EAAaC,GACpE,IAAIC,GAAU,EAEdC,cAAcvoB,OAAOoM,KAAK4b,mBAAmBK,IAC7CroB,OAAOoM,KAAK4b,mBAAmBK,GAAc,EAC7CroB,OAAOoM,KAAK4b,mBAAyB,MAAI,EACzC3xB,EAAE,QAAQ6U,SAAS,cACnB7U,EAAE,mBAAmBmyB,WAAU,SAAUC,GACnCA,EAAMC,MAAQP,EACXG,IACHA,GAAU,EACVtoB,OAAOoM,KAAKuc,sBAAsBT,EAAY,aAAcG,IAErDI,EAAMC,MAAQN,EAClBE,IACHA,GAAU,EACVtoB,OAAOoM,KAAKwc,yBAAyBV,EAAY,aAAcG,KAGjEE,cAAcvoB,OAAOoM,KAAK4b,mBAAmBK,IAC7CC,GAAU,OAKhBtoB,OAAOoM,KAAKuc,sBAAwB,SAAUT,EAAYW,EAAUR,GAClEE,cAAcvoB,OAAOoM,KAAK4b,mBAAmBK,IACzCQ,GACFxyB,EAAE,QAAQ6U,SAAS2d,GAES,GAA1BX,EAAW9C,YACbmD,cAAcvoB,OAAOoM,KAAK4b,mBAAmBK,KAE7CE,cAAcvoB,OAAOoM,KAAK4b,mBAAmBK,IAC7CroB,OAAOoM,KAAK4b,mBAAmBK,GAAcS,aAAY,WACnDZ,EAAW9C,YAAc,EAC3B8C,EAAW9C,UAAU8C,EAAW9C,YAAc,IAE9CmD,cAAcvoB,OAAOoM,KAAK4b,mBAAmBK,MAE9C,OAKProB,OAAOoM,KAAKwc,yBAA2B,SAAUV,EAAYW,EAAUR,GACrEE,cAAcvoB,OAAOoM,KAAK4b,mBAAmBK,IACzCQ,GACFxyB,EAAE,QAAQ6U,SAAS2d,GAErB,IAAIE,EAAuB1yB,EAAE6xB,GAAY,GAAGH,aAAe1xB,EAAE6xB,GAAYc,cACrEd,EAAW9C,aAAe2D,EAC5BR,cAAcvoB,OAAOoM,KAAK4b,mBAAmBK,KAE7CE,cAAcvoB,OAAOoM,KAAK4b,mBAAmBK,IAC7CroB,OAAOoM,KAAK4b,mBAAmBK,GAAcS,aAAY,WACvD9oB,OAAOoM,KAAKyb,iBAAiBxxB,EAAE,SAC3B6xB,EAAW9C,YAAc2D,EAC3Bb,EAAW9C,UAAU8C,EAAW9C,YAAc,IAE9CmD,cAAcvoB,OAAOoM,KAAK4b,mBAAmBK,MAE9C,OAIProB,OAAOoM,KAAK6c,iBAAmB,SAAUJ,EAAUR,GACjDhyB,EAAE,QAAUwyB,GAAUK,OAAO,aAAatB,YAAYiB,GACtDN,cAAcvoB,OAAOoM,KAAK4b,mBAAmBK,IAC7CroB,OAAOoM,KAAK4b,mBAAmBtsB,MAAO,GAGxCsE,OAAOoM,KAAK+c,aAAe,SAAUxqB,GAEnC,OADAA,EAAWA,GAAYtI,EAAE,YAClBse,KAAKuD,IAAI3d,MAAM,KAAMlE,EAAEsI,GAAUoC,KAAI,WAC1C,IAAIqoB,EACJ,OAAOtJ,MAAMsJ,EAASvR,SAASxhB,EAAEgE,MAAMyd,IAAI,WAAY,KAAO,EAAIsR,OAOtEppB,OAAOqpB,UAAY,SAAU1jB,EAAKhC,EAAQ2lB,GACxC,IAAItc,EAAQrJ,EAAOqJ,OAAS,KACxBD,EAASpJ,EAAOoJ,QAAU,IAC1BwY,EAAMlvB,EAAEkB,QAAQwV,SAAW,EAAIA,EAAS,EACxCwc,EAAOlzB,EAAEkB,QAAQyV,QAAU,EAAIA,EAAQ,EAEvCwc,EAAYjyB,OAAOkK,KAAKkE,EAAK,GAAI,SAAWqH,EAAQ,WAAaD,EAAS,SAAWwY,EAAM,UAAYgE,EAAO,wDAElHhyB,OAAOkyB,cAAgBD,EACvBjyB,OAAOmyB,gBAAkBJ,EAEzB/xB,OAAOoyB,cAAgB,SAAUC,EAAUC,GAEzCtyB,OAAOkyB,cAAc/nB,QAErBnK,OAAOmyB,gBAAgBE,EAAUC,KASrC7pB,OAAO8pB,oBAAsB,SAAUnkB,EAAKhC,GAC1C,IAAIomB,EAAiBxyB,OAAOyyB,oBAAsB,cAC9Chd,EAAQrJ,EAAOqJ,OAAS,KACxBD,EAASpJ,EAAOoJ,QAAU,IAC1BwY,EAAMlvB,EAAEkB,QAAQwV,SAAW,EAAIA,EAAS,EACxCwc,EAAOlzB,EAAEkB,QAAQyV,QAAU,EAAIA,EAAQ,EAEvCwc,EAAYjyB,OAAOkK,KAAKsoB,EAAgB,cAAe,SAAW/c,EAAQ,WAAaD,EAAS,SAAWwY,EAAM,UAAYgE,EAAO,wDACxIhyB,OAAO0yB,oBAAsBT,EAE7B7B,YAAW,WACT,IACE6B,EAAU3mB,SAAS4J,MAAQ9I,EAAO8I,MAClC,MAAO9H,OACR,IAEHtO,EAAEmzB,GAAWxT,iBAAgB,SAAUkU,GAErC,IAAI7zB,EAAI6zB,EAAahxB,OACjBixB,EAAcD,EAAaC,YAC/BA,EAAYC,aAAe,WACzB,IAAIC,EAAah0B,EAAE,OAAQ8zB,EAAYtnB,UACnCynB,EAASj0B,EAAE,SAAUg0B,GAEzBA,EAAWzC,YAAY,6BACvB0C,EAAOC,OAGP,IAAIC,EAAYN,EAAaO,WAAWD,UACxC,GAAIA,GAA0B,MAAbA,EAAmB,CAClC,IAAIE,EAAiBr0B,EAAEuB,OAAOsyB,EAAaO,WAAY,CACrDN,YAAaA,IAEfG,EAAO/U,WAAWiV,EAAWE,MAGX,SAASC,IAC7B,IAAIC,EAAOv0B,EAAE,OAAQ8zB,EAAYtnB,UAE7B+nB,EAAKxzB,OAAS,EAChBwzB,EAAK/f,OAAO,uDAAyDqf,EAAavkB,IAAM,wGAGxFgiB,YAAW,WACTgD,MACC,IAIPA,KACC,CACDzxB,OAAQ7C,EACRo0B,WAAY9mB,EACZwmB,YAAaX,EACb7jB,IAAKA,KAMT3F,OAAO6qB,cAAgB,SAAUvjB,GAC/B,IAAInH,EAIJ,OAHAmH,EAAQP,MAAK,SAAUpO,GACrBwH,EAASxH,KAEJwH,GAKTH,OAAO8qB,YAAc,SAAUnnB,GAC7B,IAAIonB,EAAYpnB,EAAOzJ,KACvB8wB,EAAUrnB,EAAOqnB,QAEbC,EAAatnB,EAAO8I,MAAQ9I,EAAO8I,MAAQ,GAC3Cye,EAA2C,kBAAtBvnB,EAAOunB,aAA2BvnB,EAAOunB,YAC9DC,EAAU90B,EAAE,iCAAmC00B,EAAY,gBAC3Dle,EAAQxW,EAAE,eAAiB00B,EAAY,6BAA6B1sB,SAAS8sB,GAC7EC,EAAc/0B,EAAE,eAAiB00B,EAAY,iHAAiH1sB,SAASwO,GACvKlJ,EAAO8I,OACKpW,EAAE,eAAiB00B,EAAY,uCAAyCE,EAAa,eAAe5sB,SAASwO,GAG7H,IAAIwe,EAAeh1B,EAAE,eAAiB00B,EAAY,sBAAsB1sB,SAASwO,GAEjFA,EAAMye,OACF3nB,EAAO4nB,iBACX1e,EAAM3B,SAASvH,EAAO4nB,iBACtB,IAAI/G,EAAY7gB,EAAO6gB,WAAa,OACpC2G,EAAQ9sB,SAAShI,EAAEmuB,EAAW3hB,WAE1Bc,EAAO6nB,SAET3e,EAAMiL,IAAI,OAAQqT,EAAQpe,SAAWF,EAAME,UAAY,GACvDF,EAAMiL,IAAI,QAASqT,EAAQne,QAAUH,EAAMG,SAAW,IAExDH,EAAM0d,OAEN,IAAIkB,EAAe,SAAsB9nB,GACvCwnB,EAAQlgB,SACJ+f,GACJA,EAAQrnB,IAOV,OAJIunB,GACFE,EAAYM,MAAMD,GAGb,CACLE,UAAW9e,EACXse,QAASA,EACTlpB,QAASopB,EACT3pB,MAAO,SAAeiC,GACpB8nB,EAAa9nB,MAQnB3D,OAAO4rB,oBAAsB,SAAUjoB,GACrCA,EAAOzJ,KAAO,kBACd,IAAI2xB,EAAOloB,EAAOkoB,KAClBC,EAAWnoB,EAAOmoB,SACdjf,EAAQ7M,OAAO8qB,YAAYnnB,GAC3B6gB,EAAYnuB,EAAE,eAAe6U,SAAS,4BACtCa,EAAU1V,EAAE,eAAe6U,SAAS,+DACpC6gB,EAAmB11B,EAAE,eAAe6U,SAAS,mDACjDa,EAAQ1K,KAAKsC,EAAOoI,SACpBA,EAAQ1N,SAASmmB,GACjB,IAAIwH,EAAW31B,EAAE,iBAAiB6U,SAAS,4EACvC+gB,EAAe51B,EAAE,iBAAiB6U,SAAS,gFAC/C8gB,EAAS3qB,KAAKrB,OAAOuG,aAAaJ,YAAY,8BAC9C8lB,EAAa5qB,KAAKrB,OAAOuG,aAAaJ,YAAY,kCAClD6lB,EAAS3tB,SAAS0tB,GAClBE,EAAa5tB,SAAS0tB,GACtBA,EAAiB1tB,SAASmmB,GAC1BA,EAAUnmB,SAASwO,EAAM5K,SACzB,IAAIiqB,EAAY,WACdrf,EAAMnL,QACa,mBAARmqB,GACTA,KAGJG,EAASN,MAAMQ,GACf,IAAIC,EAAgB,WAClBtf,EAAMnL,QACiB,mBAAZoqB,GACTA,KAIJ,OADAG,EAAaP,MAAMS,GACZ,CACLzqB,MAAO,WACLmL,EAAMnL,SAER0qB,GAAI,WACFF,KAEFG,OAAQ,WACNF,OAONnsB,OAAOiN,OAAS,SAAUtJ,GAExB,IAAIsJ,EAAS5W,EAAE,eAAe6U,SAAS,cACnCkJ,EAAM/d,EAAE,WACZ+d,EAAI/S,KAAKsC,EAAOoI,SAAW,IAC3BqI,EAAI/V,SAAS4O,GACbA,EAAO5O,SAAShI,EAAE,OAAQwM,WAC1BoK,EAAOA,OAAO,CACZR,MAAO9I,EAAO8I,MACdS,OAAO,EACPof,QAAS3oB,EAAO2oB,QAChB5qB,MAAO,WACLuL,EAAOA,OAAO,eAOpBjN,OAAOusB,qBAAuB,WAC5B,IAAIC,EAAcj1B,OAAO0yB,oBACzB1yB,OAAO0yB,oBAAsB,KAC7B,IACMuC,GACJA,EAAY9qB,QACZ,MAAOiD,MAKX3E,OAAOysB,SAAW,SAAU5V,GAC1B,IAMIiB,EANA4U,EAAWhgB,SAAS8N,KAAK/hB,QAAQ,gBAAiB,IAClDk0B,IAAc9V,EAAMrN,MAAM,KAE1BojB,IAAkB/V,EAAMrN,MAAM,MAC9BqjB,EAAc,IAAIrW,OAAOK,EAAMpe,QAAQ,IAAK,IAAK,KACjDq0B,EAAY,GAEhB,GAAa,IAATjW,EACF,MAAO,GAET,IAAIkW,EAAiB,SAAwBlW,GAC3C,IAAK,IAAImW,EAAO,EAAGA,EAAOnqB,SAASoqB,YAAY71B,OAAQ41B,IAErD,GAAW,OADXlV,EAAMjV,SAASoqB,YAAYD,GAAME,OAASrqB,SAASoqB,YAAYD,GAAMG,UAEnE,IAAK,IAAItwB,EAAM,EAAGA,EAAMib,EAAI1gB,OAAQyF,IAClC,GAAuC,MAAnCgG,SAASoqB,YAAYD,GAAMxS,OAAuE,MAAtD3X,SAASoqB,YAAYD,GAAMxS,KAAKhR,MAAM,cAA8C,WAAtB4jB,oBAAkC,CAE9I,IAAIC,EAAkBvV,EAAIjb,GAAK6Z,QAAUoB,EAAIjb,GAAK6Z,QAAU,GAExDkW,EAC2Bn1B,MAAzBqgB,EAAIjb,GAAKywB,cAAyE,MAA5CxV,EAAIjb,GAAKywB,aAAa9jB,MAAMqjB,KAEhEx2B,EAAEqf,QAAQI,OACZgX,GAAahV,EAAIjb,GAAK6Z,QAAQje,QAAQ,YAAa,IAC1CpC,EAAEqf,QAAQC,MAA6B,OAArBtf,EAAEqf,QAAQ7P,QACrCinB,GAAahV,EAAIjb,GAAKga,MAAMH,QAE5BoW,GAAahV,EAAIjb,GAAK6Z,QAAQje,QAAQ,YAAa,wCAGrBhB,MAAzBqgB,EAAIjb,GAAKywB,cAA6BxV,EAAIjb,GAAKywB,cAAgBzW,IACxEiW,GAAahV,EAAIjb,GAAK6Z,SAIpBiW,GACcl1B,MAAZqgB,EAAIjb,IAAwCpF,MAAnB41B,IACoB,GAA3CA,EAAgB3pB,QAnCd,gBAqCArN,EAAEqf,QAAQI,OACZgX,GAAaO,EAAgB50B,QAAQ,sCAAuC,IAAIA,QAAQ,YAAa,IAErGq0B,GAAaO,EAAgB50B,QAAQ,YAAa,WAUlE,OAAOq0B,GA2CT,OADaz2B,EAAEqf,QAAQC,KAxCL,SAAqBkB,GACrC,GAAyB,OAArBxgB,EAAEqf,QAAQ7P,QAEZ,OAAOknB,EAAelW,GAGxB,IADA,IAAI0W,EACKP,EAAO,EAAGA,EAAOnqB,SAASoqB,YAAY71B,OAAQ41B,IAGrD,GAAW,OAFXlV,EAAMjV,SAASoqB,YAAYD,GAAMG,UAAYtqB,SAASoqB,YAAYD,GAAME,OAGtE,IAAK,IAAIrwB,EAAM,EAAGA,EAAMib,EAAI1gB,OAAQyF,IAClC,GAA0B,WAAtBuwB,mBAEER,IAC2Bn1B,MAAzBqgB,EAAIjb,GAAKywB,cAAyE,MAA5CxV,EAAIjb,GAAKywB,aAAa9jB,MAAMqjB,GACpEC,GAAahV,EAAIjb,GAAK6Z,QAAQje,QAAQ,YAAai0B,EAAW,kCAC5Bj1B,MAAzBqgB,EAAIjb,GAAKywB,cAA6BxV,EAAIjb,GAAKywB,cAAgBzW,IACxEiW,GAAahV,EAAIjb,GAAK6Z,QAAQje,QAAQ,YAAai0B,EAAW,yCAG7D,GAAqB,MAAjB5U,EAAIjb,GAAK2d,MAAiC/iB,MAAjBqgB,EAAIjb,GAAK2d,MAAyD,MAApC1C,EAAIjb,GAAK2d,KAAKhR,MAAM,aAAsB,CAE1G+jB,EAAYzV,EAAIjb,GAAK2wB,WAAWL,UAAY,GAC5C,IAAK,IAAIhS,EAAI,EAAGA,EAAIoS,EAAUn2B,OAAQ+jB,IAChCyR,EACgCn1B,MAA7B81B,EAAUpS,GAAGmS,cAA0D,MAA7BC,EAAUpS,GAAGmS,cAAyE,MAAhDC,EAAUpS,GAAGmS,aAAa9jB,MAAMqjB,KAEnHC,GAAaS,EAAUpS,GAAGzE,QAAQje,QAAQ,YAAai0B,EAAW,mCAE9Bj1B,MAA7B81B,EAAUpS,GAAGmS,cAA6BC,EAAUpS,GAAGmS,cAAgBzW,IAEhFiW,GAAaS,EAAUpS,GAAGzE,QAAQje,QAAQ,YAAai0B,EAAW,mCAO9E,OAAOI,EAEqBW,CAAY5W,GAASkW,EAAelW,IAMpE7W,OAAO0tB,OAAS,SAAU7wB,EAAK0U,EAAOrU,GAEpC,GAAI1C,UAAUpD,OAAS,GAAuB,oBAAlBO,OAAO4Z,GAA8B,CAM/D,GALArU,EAAU7G,EAAEuB,OAAO,GAAIsF,GACnBqU,MAAAA,IACFrU,EAAQywB,SAAW,GAGU,iBAApBzwB,EAAQywB,QAAsB,CACvC,IAAIC,EAAO1wB,EAAQywB,QACnB5R,EAAI7e,EAAQywB,QAAU,IAAI5f,KAC1BgO,EAAE8R,QAAQ9R,EAAE+R,UAAYF,GAI1B,OADArc,EAAQ5Z,OAAO4Z,GACR1O,SAAS6qB,OAAS,CACzB1Q,mBAAmBngB,GAAM,IACzBK,EAAQ6wB,IAAMxc,EAAQyL,mBAAmBzL,GACzCrU,EAAQywB,QAAU,aAAezwB,EAAQywB,QAAQK,cAAgB,GACjE9wB,EAAQ+wB,KAAO,UAAY/wB,EAAQ+wB,KAAO,GAC1C/wB,EAAQub,OAAS,YAAcvb,EAAQub,OAAS,GAChDvb,EAAQgxB,OAAS,WAAa,IAC9B51B,KAAK,IAKP,IAAI6H,EAAOguB,GADXjxB,EAAUqU,GAAS,IACSwc,IAAM,SAAUj2B,GAC1C,OAAOA,GACLglB,mBACJ,OAAQ3c,EAAS,IAAIqW,OAAO,WAAawG,mBAAmBngB,GAAO,YAAYgV,KAAKhP,SAAS6qB,SAAWS,EAAOhuB,EAAO,IAAM,MAK9HH,OAAOoM,KAAKgiB,aAAe,SAAU5Q,EAAKtF,GAGxC,OAFAsF,EAAMA,GAAO,EACbtF,EAAMA,GAAO,IACNvD,KAAKsK,MAAMtK,KAAK0H,UAAYnE,EAAMsF,EAAM,IAAMA,GAQvDxd,OAAOoM,KAAKiiB,WAAa,SAAU1qB,EAAQuZ,GACzCvZ,EAASA,GAAU,IACnBuZ,EAAQA,IAAS,KAEfld,OAAO+T,QAAU,IAEnB1d,EAAE+H,KAAKuF,GAAQ,SAAU9G,EAAK0U,GAC5BvR,OAAO+T,QAAQlX,GAAO0U,KAIxBvR,OAAO+T,QAAoB,WAAI/T,OAAO+T,QAAoB,YAG5D/T,OAAOoM,KAAKkiB,UAAY,WACtB,IAAIC,EAAc,YAAa,IAAIxgB,MAAOC,UAC1C3X,EAAE,0BAA0B+H,MAAK,WAC/B/D,KAAKmgB,KAAOngB,KAAKmgB,KAAK/hB,QAAQ,SAAU81B,OAS5CvuB,OAAOoM,KAAK0c,YAAc,SAAUnlB,QAClC,IAAI6qB,MAAQ7qB,OAAOzJ,MAAQ,UACvBu0B,MAAQ9qB,OAAO7C,MAAQ,aACvB4tB,QAAU/qB,OAAOA,QAAU,GAC3BgrB,WAAahrB,OAAOirB,YAAa,EACjCC,SAAWlrB,OAAOmrB,SAAW,IAC7BC,eAAiBprB,OAAOqrB,YAAc,IACtCC,SAAWtrB,OAAOoQ,SAAW,QAE7Bmb,sBAAuBvrB,OAAOzH,eAAe,wBAAyByH,OAAOwrB,oBACjFnvB,OAAOovB,QAAUpvB,OAAOovB,SAAW,GACN33B,MAAzBuI,OAAOovB,QAAQZ,SACjBxuB,OAAOovB,QAAQZ,OAAS,IAItBG,YAAuCl3B,MAAzBuI,OAAOovB,QAAQZ,SAC/BxuB,OAAOovB,QAAQZ,OAAS,IAI1BxuB,OAAOovB,QAAQZ,OAAO11B,KAAK,CACzBoB,KAAMs0B,MACN7qB,OAAQ+qB,QACR5tB,KAAM2tB,MACNG,UAAWD,WACXS,QAASP,SACTG,WAAY,EACZK,cAAeN,eACfhb,QAASkb,SACTE,oBAAqBD,qBACrBI,YAAY,EACZC,SAAU5a,KAAKC,OAAM,IAAI7G,MAAOC,aAElC,IAAIwhB,eAAiB,SAASA,iBAC5Bn5B,EAAE+H,KAAK4B,OAAOovB,SAAS,SAAU3S,EAAGH,GAClCjmB,EAAE+H,KAAKke,GAAG,SAAUzf,IAAK0U,OACvB,IAAIke,IAAM9a,KAAKC,OAAM,IAAI7G,MAAOC,WAC5B0hB,iBAAmB/a,KAAKC,OAAO6a,IAAMle,MAAMge,UAAYhe,MAAM6d,SAEjE,GADApvB,OAAOovB,QAAQ7d,MAAMrX,MAAM2C,KAAiB,WAAI6yB,iBAC5CA,iBAAmBne,MAAM8d,cAE3B,GAAIvkB,KAAKyG,MAAMwC,UACb,IAAKxC,MAAM+d,WAAY,CACrB,GAAI/d,MAAM5N,QAEJtN,EAAEqf,QAAQC,KACZ,IAAIga,WAAa,WACf,OAAOpe,MAAMzQ,KAAKyQ,MAAM5N,SAI9B3D,OAAOovB,QAAQ7d,MAAMrX,MAAM2C,KAAc,QAAIxG,EAAEqf,QAAQC,KAAOmT,YAAY6G,WAAYpe,MAAM6d,QAAS,cAAgBtG,YAAYvX,MAAMzQ,KAAMyQ,MAAM6d,QAAS7d,MAAM5N,QAClK3D,OAAOovB,QAAQ7d,MAAMrX,MAAM2C,KAAiB,YAAI,QAEzC0U,MAAM4d,qBACfnvB,OAAOovB,QAAQ7d,MAAMrX,MAAMwjB,OAAO7gB,IAAK,GACvC+yB,aAAare,MAAMse,WAEnB7vB,OAAOovB,QAAQ7d,MAAMrX,MAAM2C,KAAiB,YAAI,EAChD+yB,aAAare,MAAMse,eAIrBD,aAAare,MAAMse,SACnB7vB,OAAOovB,QAAQ7d,MAAMrX,MAAMwjB,OAAO7gB,IAAK,UAM1CmD,OAAO8vB,iBACV9vB,OAAO8vB,gBAAiB,EACxBhH,YAAY0G,eAAgB,OAGhCxvB,OAAOoM,KAAK2jB,OAAS,SAAUxe,GAK7B,IAYAye,EACAC,EARAC,GAAa,EACbC,GAAU,EACVC,GAAa,EAITC,GAFJ9e,EAAQA,GAAS,IAEKsE,WAAW1e,MAAM,KA6BvC,OAzBA64B,EAAYK,EAAU,IAfA,4BAiBFz2B,KAAKo2B,IAhBP,4BAgBqCp2B,KAAKo2B,IAf1C,8BAewEp2B,KAAKo2B,MAC7FE,GAAa,GAGXG,EAAUj5B,OAAS,IAErB64B,EAAYI,EAAU,GAEtBF,GAAU,EAGc,GAApBE,EAAUj5B,SACd64B,EAAYA,EAAY,IAAMI,EAAU,IA1B9B,0CA4BIz2B,KAAKq2B,KACnBG,GAAa,IAGXD,EACKD,GAAcE,EAEdF,GAOXlwB,OAAOoM,KAAKkkB,mBAAqB,SAAUC,GAEzC,IAEIt5B,EACJkwB,GAFAoJ,EAAQA,EAAM93B,QAAQ,QAAS,OAEnBrB,OACZo5B,EAAU,GACV,IAAKv5B,EAAI,EAAGA,EAAIkwB,EAAKlwB,IAGnBu5B,GAAW,MAFND,EAAY,WAAEt5B,GACV4e,SAAS,IACO,IAE3B,OAAO2a,GAKTxwB,OAAOoM,KAAKqkB,eAAiB,WAC3B,IAAIC,EAAK7tB,SAASmB,qBAAqB,QAAQ,GAC3C2sB,EAAQ9tB,UAAYA,SAAS+tB,gBASjC,OARKF,IACHA,EAAK7tB,SAASC,cAAc,QAC5B6tB,EAAMpyB,aAAamyB,EAAIC,EAAME,aAG/B7wB,OAAOoM,KAAKqkB,eAAiB,WAC3B,OAAOC,GAEFA,GAKT1wB,OAAOoM,KAAK0kB,UAAY,SAAUC,EAAWC,GAE3C,IASeC,EATX/mB,EAAUrH,SAASquB,eAAeF,GAEtC,GAAID,IAAc7mB,EAAS,CACzB,IAAI4N,EAAMjV,SAASC,cAAc,SACjCgV,EAAIlhB,KAAO,WACXkhB,EAAIjO,GAAKmnB,EACLlZ,EAAI0V,WACN1V,EAAI0V,WAAW9W,QAAUqa,GAEdE,EAQRpuB,SAASsuB,eAAeJ,GAPrBjZ,EAAI5Y,WAAW9H,OACb0gB,EAAI+Y,WAAWO,YAAcH,EAAKG,WACpCtZ,EAAIuZ,aAAaJ,EAAMnZ,EAAI+Y,YAG7B/Y,EAAI9S,YAAYisB,IAItBjxB,OAAOoM,KAAKqkB,iBAAiBzrB,YAAY8S,KAO7C9X,OAAOoM,KAAKklB,cAAgB,SAAUtlB,EAAMulB,GAC1CvxB,OAAO+J,IAAI,6BACX,IAAI+N,EAAMjV,SAASC,cAAc,SACjCgV,EAAIlhB,KAAO,WAEX,IAAI8f,EAAU,qBAAuB6a,EAAgB,2CAA6CvlB,EAAO,OACzG8L,EAAI3W,UAAYuV,EAEhB1W,OAAOoM,KAAKqkB,iBAAiBzrB,YAAY8S,IAG3C9X,OAAOoM,KAAKolB,0BAA4B,SAAUC,EAAWC,GAC3D,IAAIC,EAAaC,EAAe36B,EAAGglB,EAC/B4V,EAAwB,CAC1BC,cAAeJ,EAAoBK,iBACnCC,iBAAkBN,EAAoBO,eACtCC,oBAAqBR,EAAoBS,eAsB3C,IAHAR,EAAct7B,EAAEuB,OAjBS,CACvBw6B,OAAQ,IACRL,iBAAkB,IAClBE,eAAgB,IAChBE,cAAe,KAa0BT,GAC3CE,EAAgBv7B,EAAEuB,OAZS,CACzBy6B,UAAU,EACVP,cAAe,IACfE,iBAAkB,IAClBM,aAAa,EACbC,eAAgB,SAChBC,eAAgB,OAChBN,oBAAqB,IACrBE,OAAQ,IAIqCP,GAE1C56B,EAAI,EAAGA,EAAIw6B,EAAUgB,YAAYr7B,OAAQH,IAAK,CACjD,GAAmD,SAA/Cw6B,EAAUgB,YAAYx7B,GAAGL,KAAKqB,cAChC,IAAKgkB,EAAI,EAAGA,EAAIwV,EAAUiB,KAAKt7B,OAAQ6kB,IACrCwV,EAAUiB,KAAKzW,GAAG0W,OAAO17B,GAAK+I,OAAOoM,KAAKwmB,YAAYnB,EAAUiB,KAAKzW,GAAG0W,OAAO17B,GAAI06B,GAGvF,GAAmD,SAA/CF,EAAUgB,YAAYx7B,GAAGL,KAAKqB,eAA2E,QAA/Cw5B,EAAUgB,YAAYx7B,GAAGL,KAAKqB,cAC1F,IAAKgkB,EAAI,EAAGA,EAAIwV,EAAUiB,KAAKt7B,OAAQ6kB,IAAK,CAC1C,IAAI4W,EAAc7yB,OAAOoM,KAAK0mB,cAAcrB,EAAUiB,KAAKzW,GAAG0W,OAAO17B,GAAI26B,GAEzE,IAA4C,IAAxC5xB,OAAO+yB,SAASC,oBAA8B,CAChD,IAAIC,GAAW,GAC6B,GAAxCJ,EAAYhd,WAAWnS,QAAQ,OACjCuvB,GAAW,EACXJ,EAAcA,EAAYp6B,QAAQ,IAAK,IAAIA,QAAQ,IAAK,KAE1D,IAAIgnB,EAAK,IAAIjJ,OAAO,IAAM0c,6BAA6BnB,iBAAmB,iBAAkB,KAC5Fc,EAAcA,EAAYp6B,QAAQgnB,EAAI,MACtCA,EAAK,IAAIjJ,OAAO,KAAO0c,6BAA6BnB,iBAAmB,MAAO,KAC9Ec,EAAcA,EAAYp6B,QAAQgnB,EAAI,IAEjCwT,IAAUJ,EAAc,IAAMA,EAAc,KAEnDpB,EAAUiB,KAAKzW,GAAG0W,OAAO17B,GAAK47B,GAKpC,OAAOpB,GAITzxB,OAAOoM,KAAK+mB,cAAgB,SAAU5hB,GACpC,OAAuC,GAAnCvR,OAAOoM,KAAKoL,aAAajG,GACpBvR,OAAOuG,aAAaJ,YAAY,sBACK,GAAnCnG,OAAOoM,KAAKoL,aAAajG,GAC3BvR,OAAOuG,aAAaJ,YAAY,qBAEhC,IAIXnG,OAAOoM,KAAKgnB,uBAAyB,SAAUC,GAC7CA,EAAcA,GAAe,GAC7Bh9B,EAAE,iBAAkBg9B,GAAaC,IAAI,cAAcl1B,MAAK,SAAUqK,EAAOyB,GACvE,IAAIqpB,EAAWl9B,EAAE6T,GACbjI,EAAUsxB,EAASx1B,OACvBw1B,EAASroB,SAAS,aAClB,IACE,IAAIioB,EAAgBnzB,OAAOoM,KAAK+mB,cAAclxB,GAC9CsxB,EAASx1B,KAAKo1B,GACd,MAAOxuB,GACP4uB,EAASx1B,KAAKkE,QAKpBjC,OAAOoM,KAAK0mB,cAAgB,SAAUvhB,EAAOiiB,GAC3C,IAAIv8B,EAAIZ,EAAE,QAAQgL,KAAKkQ,GAEvB,OADIta,EAAEw8B,gBAAiBx8B,EAAEw8B,eAAeD,GACjCv8B,EAAEoK,QAMXrB,OAAOoM,KAAKsnB,oBAAsB,SAAUjC,EAAWE,GASrDA,EAAcA,GAPM,CAClBS,OAAQ,IACRL,iBAAkB,IAClBE,eAAgB,IAChBE,cAAe,KAKjB,IAAK,IAAIl7B,EAAI,EAAGA,EAAIw6B,EAAUgB,YAAYr7B,OAAQH,IAChD,GAAmD,SAA/Cw6B,EAAUgB,YAAYx7B,GAAGL,KAAKqB,cAChC,IAAK,IAAIgkB,EAAI,EAAGA,EAAIwV,EAAUiB,KAAKt7B,OAAQ6kB,IACzCwV,EAAUiB,KAAKzW,GAAG0W,OAAO17B,GAAK+I,OAAOoM,KAAKwmB,YAAYnB,EAAUiB,KAAKzW,GAAG0W,OAAO17B,GAAI06B,GAKzF,OAAOF,GAcTzxB,OAAOoM,KAAKwmB,YAAc,SAAUrhB,EAAOiiB,GACzC,IAAIrzB,EAAS,GACbwzB,EAAY,GACZC,EAAa,GACbC,EAAiB,GACjBC,EAAgB,GAChBC,EAAaxiB,EAAQ,EAQrB,GANa,MAATA,IACFA,EAAQ,KAGVA,EAAQA,EAAMsE,YAEJze,QAAU,EAAG,CACrB,IAAI48B,EAAuBziB,EAAM7N,QAAQ,KAEzC,GAAIswB,EAAuB,EAEzBJ,GADAriB,EAAQvR,OAAOoM,KAAK6nB,iBAAiB1iB,EAAOiiB,EAAOrB,gBAChCnpB,UAAU,EAAGgrB,GAAsBv7B,QAAQ,MAAO,QAChE,CAGL,IAFA,IAESxB,EAAI,EAAGA,EAAIu8B,EAAOrB,cAAel7B,IACxC68B,GAHa,IAKfF,EAAariB,EAAM9Y,QAAQ,MAAO,IAYpC,GARA8Y,EAAQA,EAAM9Y,QAAQ,MAAO,IAG3Bo7B,EADEL,EAAOrB,cAAgB,EACR6B,EAAuB,EAAIR,EAAOzB,iBAAmBxgB,EAAMvI,UAAUuI,EAAMna,OAASo8B,EAAOrB,cAAe5gB,EAAMna,QAAUo8B,EAAOzB,iBAAmB+B,EAEpJ,GAGfF,EAAWx8B,OAAS,EAAG,CACzB,IAAI6tB,EAAQ,EAGZ,IAAShuB,EAAI28B,EAAWx8B,OAAS,EAAGH,GAAK,EAAGA,IAC7B,GAATguB,IACF0O,GAAa,IACb1O,EAAQ,GAEV0O,GAAaC,EAAW38B,GACxBguB,GAAS,EAGX,IAAShuB,EAAI08B,EAAUv8B,OAAS,EAAGH,GAAK,EAAGA,IACzCkJ,GAAUwzB,EAAU18B,QAGtBkJ,EAASyzB,EAMX,GAFAzzB,EAASA,EAAO1B,WAAW,IAAK+0B,EAAOvB,gBAEnC8B,EAEF5zB,EADqBH,OAAOuG,aAAaJ,YAAY,iBAAiBosB,eAC9C95B,QAAQ,KAAM+6B,EAAOpB,QAAQ35B,QAAQ,KAAM0H,EAAS0zB,QAE5E1zB,EAASqzB,EAAOpB,OAASjyB,EAAS0zB,EAGpC,OAAO1zB,EAEP,OAAOoR,GASXvR,OAAOoM,KAAK8nB,uBAAyB,SAAUC,GAC7C,OAAOA,EAAY17B,QAAQ,MAAO,KAOpCuH,OAAOoM,KAAK6nB,iBAAmB,SAAU1iB,EAAO4gB,GAC9C,IAAI6B,EAEJH,EAMA,GAJAG,EAAuBziB,EAAM7N,QAAQ,KACxB6N,EAAMvI,UAAU,EAAGgrB,GAG5B7B,GAFJ0B,EAAiBtiB,EAAMvI,UAAUgrB,EAAuB,EAAGziB,EAAMna,SAE9BA,OACjC,IAAK,IAAIH,EAAI48B,EAAez8B,OAAQH,EAAIk7B,EAAel7B,IACrDsa,GAAS,SAGXA,EAAQyR,WAAWzR,GAAO6iB,QAAQjC,GAGpC,OAAO5gB,GAITvR,OAAOoM,KAAKioB,oBAAsB,SAAU5V,GAGtC,IAYI9Z,EAdJ8Z,IACE9J,KAAKyJ,IAAIK,GAAK,GACZ9Z,EAAIkT,SAAS4G,EAAE5I,WAAW1e,MAAM,MAAM,OAEpCsnB,GAAK,GACPA,GAAK9J,KAAK2f,IAAI,GAAI3vB,EAAI,GACtB8Z,EAAI,KAAO,IAAInK,MAAM3P,GAAGrM,KAAK,KAAOmmB,EAAE5I,WAAW7M,UAAU,KAE3DyV,EAAI9J,KAAKyJ,IAAIK,GAAK9J,KAAK2f,IAAI,GAAI3vB,EAAI,GAEnC8Z,EAAI,KADJA,EAAI,KAAO,IAAInK,MAAM3P,GAAGrM,KAAK,KAAOmmB,EAAE5I,WAAW7M,UAAU,OAK3DrE,EAAIkT,SAAS4G,EAAE5I,WAAW1e,MAAM,KAAK,KACjC,KACNwN,GAAK,GACL8Z,GAAK9J,KAAK2f,IAAI,GAAI3vB,GAClB8Z,GAAK,IAAInK,MAAM3P,EAAI,GAAGrM,KAAK,OAIjC,OAAOmmB,GAMTze,OAAOoM,KAAKmoB,qBAAuB,SAAUlB,EAAa1B,GACxD0B,EAAcA,GAAe,GAC7B,IAAImB,EAAgB,CAClBpC,OAAQT,EAAYS,OACpBL,iBAAkBJ,EAAYI,kBAAoB,IAClDE,eAAgBN,EAAYM,gBAAkB,IAC9CE,cAAeR,EAAYQ,eAAiB,MAEZ,IAA9BR,EAAY8C,gBACdD,EAAcrC,cAAgB,KAGhC97B,EAAE,eAAgBg9B,GAAaC,IAAI,aAAal1B,MAAK,SAAUqK,EAAOxH,GACpE,IAAIgB,EAAU5L,EAAE4K,GAAMlD,OACtB1H,EAAE4K,GAAMiK,SAAS,YACjB,IACE,IAAIqG,EAAQyR,WAAW/gB,GACvB,IAAK6d,MAAMvO,GAAQ,CACjB,IAAIqhB,EAAc5yB,OAAOoM,KAAKwmB,YAAYrhB,EAAOijB,GACjDn+B,EAAE4K,GAAMlD,KAAK60B,IAEf,MAAOjuB,GAEPtO,EAAE4K,GAAMlD,KAAKkE,QAQnBjC,OAAOoM,KAAKsoB,sBAAwB,SAAUrB,EAAasB,GACzDtB,EAAcA,GAAe,GAC7B,IAAIlB,EAAgB,IAEpBA,EADkC,KAA9BwC,EAAaxC,cACD,IAEAwC,EAAaxC,eAAiB,IAE9C,IAAIF,EAAiBjyB,OAAOoM,KAAKrR,SAAS45B,EAAa1C,iBAAmB0C,EAAa1C,eAAiB0C,EAAa1C,eAAiB,IAElIuC,EAAgB,CAClBpC,OAAQ,GACRL,iBAAkB4C,EAAa5C,kBAAoB,IACnDE,eAAgB0C,EAAa1C,gBAAkB0C,EAAaC,UAAY3C,EAAiB,GACzFE,cAAeA,GAEjB97B,EAAE,eAAgBg9B,GAAaC,IAAI,aAAal1B,MAAK,SAAUqK,EAAOxH,GACpE,IAAIgB,EAAU5L,EAAE4K,GAAMlD,OACtB1H,EAAE4K,GAAMiK,SAAS,YACjB,IACE,IAAI2pB,EAAiB5yB,EAAQuH,MAAM,YAC/B+H,EAA0B,MAAlBsjB,GAA0BA,EAAez9B,OAAS,EAAI09B,IAAM9R,WAAW/gB,GACnF,IAAK6d,MAAMvO,GAAQ,CACjB,IAAIwjB,EAAe/0B,OAAOoM,KAAKwmB,YAAYrhB,EAAOijB,GAC9CG,EAAaK,aACfD,EAAeA,EAAalf,WAAa,KAE3Cxf,EAAE4K,GAAMlD,KAAKg3B,IAEf,MAAOpwB,GAEPtO,EAAE4K,GAAMlD,KAAKkE,QAQnBjC,OAAOoM,KAAK6oB,oBAAsB,SAAU5B,EAAa9Z,GACvD8Z,EAAcA,GAAe,GAC7B9Z,EAAaA,GAAc,sBAC3BljB,EAAE,cAAeg9B,GAAaC,IAAI,aAAal1B,MAAK,SAAUqK,EAAOxH,GACnE,IAAIgB,EAAU5L,EAAE4K,GAAMlD,OACtB1H,EAAE4K,GAAMiK,SAAS,YACjB,IACE,IAAIqG,EAAQ,IAAIxD,KAAK9L,GACjBizB,EAAiB3b,EAEjBvZ,OAAOoM,KAAK+oB,YAAY5jB,KAC5B2jB,EAAiBl1B,OAAOoM,KAAKgpB,cAAc7jB,EAAO2jB,IAElD,IAAIG,EAAar1B,OAAOoM,KAAKkpB,cAAcD,WAAW9jB,EAAO2jB,GAC7D7+B,EAAE4K,GAAMlD,KAAKs3B,GACb,MAAO1wB,GAEPtO,EAAE4K,GAAMlD,KAAKkE,QASnBjC,OAAOoM,KAAKmpB,kCAAoC,SAAUC,GACxD,GAAIx1B,OAAOoM,KAAK+oB,YAAYK,GAAsB,CAChD,IAAIN,EAAiBl1B,OAAOuG,aAAaJ,YAAY,cAAgB,IAAMnG,OAAOuG,aAAaJ,YAAY,cACvGoL,EAAQ,IAAIxD,KAAKynB,GAIrB,OAHAN,EAAiBl1B,OAAOoM,KAAKgpB,cAAc7jB,EAAO2jB,GAEjCl1B,OAAOoM,KAAKkpB,cAAcD,WAAW9jB,EAAO2jB,GAG/D,OAAOM,GAAuB,IAGhCx1B,OAAOoM,KAAKgpB,cAAgB,SAAUK,EAAWC,GAC/C,IAAIR,EAAiBQ,EAEjBC,EAAIF,EAAUG,WACd/xB,EAAI4xB,EAAUI,aACd/9B,EAAI29B,EAAUK,aACdC,EAAKN,EAAUO,kBACf1K,EAAOtrB,OAAO+yB,SAASkD,sCAM3B,OAHU,IAANN,GAAiB,IAAN9xB,GAAiB,IAAN/L,GAAkB,IAAPi+B,GAAYzK,IACjD4J,EAAiBl1B,OAAOuG,aAAaJ,YAAY,eAE1C+uB,GAMTl1B,OAAOoM,KAAK8pB,sBAAwB,SAAU3kB,EAAOxL,GASnD,IAAI5F,EAASoR,EACb,OAAQxL,GACN,IAAK,QACL,KAAK,GACL,IAAK,OACL,KAAK,GACL,IAAK,UACL,KAAK,GACL,IAAK,OACL,KAAK,GACCwL,GAASA,EAAMna,OAAS,KAC1B+I,EAASH,OAAOoM,KAAK+pB,iBAAiB5kB,IAExC,MACF,IAAK,UACL,KAAK,EACL,IAAK,SACL,KAAK,GACHpR,EAASH,OAAOoM,KAAK+mB,cAAc5hB,GACnC,MACF,IAAK,MACL,KAAK,EACL,IAAK,SACL,KAAK,EACL,IAAK,WACL,KAAK,EACL,IAAK,UACL,KAAK,EACL,IAAK,UACL,KAAK,EACHpR,EAASoR,MAAAA,EAAwC,GAAKA,EACtD,MACF,IAAK,QACL,KAAK,EACHpR,EAASH,OAAOoM,KAAKgqB,mBAAmB7kB,GACxC,MACF,IAAK,QACL,KAAK,GACL,IAAK,OACL,KAAK,GACL,IAAK,UACL,KAAK,EACHpR,EAASH,OAAOoM,KAAKiqB,kBAAkB9kB,GACvC,MACF,IAAK,WACL,KAAK,GACL,IAAK,gBACL,KAAK,GACHpR,EAASH,OAAOoM,KAAKmpB,kCAAkChkB,GAM3D,OAHc,MAAVpR,IACFA,EAAS,IAEJA,GAMTH,OAAOoM,KAAK+oB,YAAc,SAAUxxB,GAClC,QAAqB,IAAVA,GAAmC,MAAVA,EAAgB,CAClD,IAAI2yB,EAAY,IAAIvoB,KAAKpK,GACzB,OAAQmc,MAAMwW,EAAUC,WACnB,OAAO,GAMhBv2B,OAAOoM,KAAK6M,WAAa,IAAI3E,MAAM,UAAW,WAAY,QAAS,QAAS,MAAO,OAAQ,OAAQ,SAAU,YAAa,UAAW,WAAY,WAAY,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,OAC1OtU,OAAOoM,KAAK+M,SAAW,IAAI7E,MAAM,SAAU,SAAU,UAAW,YAAa,WAAY,SAAU,WAAY,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,OAEzJtU,OAAOoM,KAAKkpB,cAAgB,IAAI,WAC9Bj7B,KAAKm8B,GAAK,SAAU/X,GAClB,OAAQA,EAAI,GAAKA,EAAI,EAAI,GAAK,KAAOA,GASvCpkB,KAAK01B,OAAS,SAAUtb,EAAK+e,GAE3B,OAAY,GADDn5B,KAAKo8B,kBAAkBhiB,EAAK+e,IAOzCn5B,KAAKq8B,gBAAkB,SAAUC,EAAMpd,EAAYqd,EAAeC,GAEhE,IACIpH,EAAMoH,EAAW,IAAI9oB,KAAK/N,OAAO82B,SAASC,GAAG/2B,OAAOg3B,YAAYC,cAAczD,UAAY,IAAIzlB,KAC9FI,EAAOwoB,aAAgB5oB,KAAO4oB,EAAOO,MAAMZ,UAAUK,EAAMpd,GAC3DjL,EAAOmhB,EAAIzhB,UAAYG,EAAKH,UAC5BmpB,EAAWC,EAAuB9oB,EAAM,OAAQ,QAAasoB,GAgCjE,OA9BKO,IACHA,EAAWC,EAAuB9oB,EAAM,QAAS,OAAYsoB,MAE3DO,EAAWC,EAAuB9oB,EAAM,OAAQ,OAAWsoB,MAEzDO,EAAWC,EAAuB9oB,EAAM,MAAO,MAAUsoB,MAEvDO,EAAWC,EAAuB9oB,EAAM,OAAQ,KAASsoB,MAEvDO,EAAWC,EAAuB9oB,EAAM,SAAU,IAAOsoB,MAEnDA,EAEAO,EAAWC,EADA,IAAT9oB,EACgCA,EAAO,EAEPA,EAFU,SAAU,EAAGsoB,IAK3DO,EAAWC,EAAuB9oB,EAAM,SAAU,IAAMsoB,MAEtDO,EAAWn3B,OAAOuG,aAAaJ,YAAY,uCAUpDgxB,EAKP,SAASC,EAAuB9oB,EAAM+oB,EAAMC,EAAaV,GACvD,IAAIW,GAAcjpB,EAAOgpB,GAAalD,QAAQ,GAE9C,GAAImD,EAAa,EAAG,CAClB,GAAIX,EACF,OAAqB,GAAdW,EAAkBv3B,OAAOuG,aAAaJ,YAAY,2BAA6BkxB,GAAM5+B,QAAQ,KAAM8+B,GAAcv3B,OAAOuG,aAAaJ,YAAY,2BAA6BkxB,EAAO,KAAK5+B,QAAQ,KAAM8+B,GAE/M,IAAIC,EAAcx3B,OAAOuG,aAAaJ,YAAY,+BAClD,OAAqB,GAAdoxB,EAAkBC,EAAY/+B,QAAQ,KAAMuH,OAAOuG,aAAaJ,YAAY,2BAA6BkxB,GAAM5+B,QAAQ,KAAM8+B,IAAeC,EAAY/+B,QAAQ,KAAMuH,OAAOuG,aAAaJ,YAAY,2BAA6BkxB,EAAO,KAAK5+B,QAAQ,KAAM8+B,IAItQ,OAAO,OAabl9B,KAAKo9B,aAAe,SAAUC,EAAOC,EAAaC,EAAOC,GACvD,IAAIC,EAAKrB,kBAAkBiB,EAAOC,GAC9BI,EAAKtB,kBAAkBmB,EAAOC,GAClC,OAAU,GAANC,GAAiB,GAANC,GACL,EACCD,EAAKC,EACP,EAEF,GAUT19B,KAAK29B,0BAA4B,SAAUN,EAAOE,EAAOP,GACvD,KAAIK,aAAiB3pB,MAAQ2pB,aAAiB3pB,MAU5C,MAAO,wBATP,OAAQspB,GACN,IAAK,UACH,OAAQO,EAAM5pB,UAAY0pB,EAAM1pB,WAAa,IAC/C,IAAK,eACH,OAAO4pB,EAAM5pB,UAAY0pB,EAAM1pB,UACjC,QACE,MAAO,wBAYf3T,KAAKg7B,WAAa,SAAUsB,EAAMnD,EAAQviB,GAExC,IAAKjR,OAAOoM,KAAK+oB,YAAYwB,IAAiB,GAARA,EACpC,MAAO,GAGT,IAAI1d,EAAajZ,OAAOoM,KAAK6M,WACzBE,EAAWnZ,OAAOoM,KAAK+M,SAC3Bqa,GAAkB,GAClB,IAEIh8B,EACAygC,EAHA93B,EAAS,GACT+3B,EAAW,EAGXxZ,EAAIiY,EAAKwB,cAAgB,GACzBpW,EAAI4U,EAAKyB,WAAa,EACtBpZ,EAAI2X,EAAK7I,UACTuK,EAAI1B,EAAK2B,SACT3C,EAAIgB,EAAKf,WACT/xB,EAAI8yB,EAAKd,aACT/9B,EAAI6+B,EAAKb,aACT56B,EAAIy7B,EAAKX,kBAETzkB,EAAQ,IAAI4P,OAMhB,GAJInhB,OAAOoM,KAAKmsB,gBAAgB,wBAC9BtnB,EAAOjR,OAAOuG,aAAaJ,YAAY,uBAGrC8K,EAAM,CACR,IAAIunB,EAASvnB,EAAKgI,WAAWvf,OAAOuX,EAAKiI,iBACrC0U,EAAO3c,EAAKkI,SAASzf,OAAOuX,EAAKmI,eACrCH,EAAaA,EAAWpD,aAAe2iB,EAAO3iB,WAAaoD,EAAauf,EACxErf,EAAWA,EAAStD,aAAe+X,EAAK/X,WAAasD,EAAWyU,EAqDlE,KAlDIlP,EAAEtnB,OAAS,GAAqB,MAAhBsnB,EAAE1mB,OAAO,IAAc0mB,EAAEtnB,OAAS,KACpDsnB,EAAI,IAAMA,EAAI,EAAI,OAEpBnN,EAAS,EAAI,GAAKmN,EAClBnN,EAAY,KAAImN,EAChBnN,EAAU,GAAImN,EAAE1V,UAAU,EAAG,GAC7BuI,EAAS,EAAIwQ,EACbxQ,EAAU,GAAIlX,KAAKm8B,GAAGzU,GACtBxQ,EAAW,IAAI0H,EAAW8I,EAAI,IAC9BxQ,EAAY,KAAI0H,EAAW8I,EAAI,GAC/BxQ,EAAW,IAAI0H,EAAW8I,EAAI,IAC9BxQ,EAAS,EAAIyN,EACbzN,EAAU,GAAIlX,KAAKm8B,GAAGxX,GACtBzN,EAAW,IAAI4H,EAASkf,EAAI,GAC5B9mB,EAAY,KAAI4H,EAASkf,GACzB9mB,EAAS,EAAI4H,EAASkf,EAAI,GAC1B9mB,EAAU,GAAI4H,EAASkf,GACvB9mB,EAAS,EAAIokB,EACbpkB,EAAU,GAAIlX,KAAKm8B,GAAGb,GACtBpkB,EAAU,GAAIokB,EAAI,GAAK,KAAO,KAC9BpkB,EAAU,GAAIokB,EAAI,GAAK,KAAO,KAI5BpkB,EAAS,EADF,GAALokB,EACW,GACJA,EAAI,GACAA,EAAI,GAEJA,EAEfpkB,EAAU,GAAIlX,KAAKm8B,GAAGjlB,EAAS,GAE7BA,EAAS,EADPokB,EAAI,GACOA,EAAI,GAEJA,EAEfpkB,EAAS,EAAIokB,EAAI,EACjBpkB,EAAU,GAAIlX,KAAKm8B,GAAGjlB,EAAS,GAC/BA,EAAU,GAAIlX,KAAKm8B,GAAGjlB,EAAS,GAE7BA,EAAS,EADPokB,EAAI,GACO,KAEA,KAEfpkB,EAAS,EAAI1N,EACb0N,EAAU,GAAIlX,KAAKm8B,GAAG3yB,GACtB0N,EAAS,EAAIzZ,EACbyZ,EAAU,GAAIlX,KAAKm8B,GAAG1+B,GACtByZ,EAAW,IAAIrW,EAERg9B,EAAW1E,EAAOp8B,QAAQ,CAG/B,IAFAI,EAAIg8B,EAAOx7B,OAAOkgC,GAClBD,EAAQ,GACDzE,EAAOx7B,OAAOkgC,IAAa1gC,GAAK0gC,EAAW1E,EAAOp8B,QACvD6gC,GAASzE,EAAOx7B,OAAOkgC,KAEL,MAAhB3mB,EAAM0mB,GACR93B,GAAkBoR,EAAM0mB,GAExB93B,GAAkB83B,EAGtB,OAAO93B,GAST9F,KAAKo8B,kBAAoB,SAAUhiB,EAAK+e,EAAQviB,GAC9C,IAAIgI,EAAajZ,OAAOoM,KAAK6M,WACzBE,EAAWnZ,OAAOoM,KAAK+M,SAC3B1E,GAAY,GACZ+e,GAAkB,GAClB,IAEIh8B,EACAygC,EAHAQ,EAAQ,EACRP,EAAW,EAGXzZ,EAAI,EACRC,EAAI,EACA+Q,EAAM,IAAI1hB,KACV2qB,EAAOjJ,EAAIkJ,UACXC,EAAQnJ,EAAI2I,WAAa,EACzBzB,EAAO,EACPkC,EAAKpJ,EAAImG,WACTkD,EAAKrJ,EAAIoG,aACTkD,EAAKtJ,EAAIqG,aAETkD,GADMvJ,EAAIuG,kBACH,IAMX,GAJIh2B,OAAOoM,KAAKmsB,gBAAgB,wBAC9BtnB,EAAOjR,OAAOuG,aAAaJ,YAAY,uBAGrC8K,EAAM,CACR,IAAIunB,EAASvnB,EAAKgI,WAAWvf,OAAOuX,EAAKiI,iBACrC0U,EAAO3c,EAAKkI,SAASzf,OAAOuX,EAAKmI,eACrCH,EAAaA,EAAWpD,aAAe2iB,EAAO3iB,WAAaoD,EAAauf,EACxErf,EAAWA,EAAStD,aAAe+X,EAAK/X,WAAasD,EAAWyU,EAGlE,KAAOsK,EAAW1E,EAAOp8B,QAAQ,CAI/B,IAFAI,EAAIg8B,EAAOx7B,OAAOkgC,GAClBD,EAAQ,GACDzE,EAAOx7B,OAAOkgC,IAAa1gC,GAAK0gC,EAAW1E,EAAOp8B,QACvD6gC,GAASzE,EAAOx7B,OAAOkgC,KAGzB,GAAa,QAATD,GAA4B,MAATA,GAA0B,KAATA,EAAc,CAcpD,GAba,QAATA,IACFxZ,EAAI,EACJC,EAAI,GAEO,MAATuZ,IACFxZ,EAAI,EACJC,EAAI,GAEO,KAATuZ,IACFxZ,EAAI,EACJC,EAAI,GAGM,OADZga,EAAOO,EAAQxkB,EAAKgkB,EAAOha,EAAGC,IAE5B,OAAO,EAET+Z,GAASC,EAAKthC,OACK,GAAfshC,EAAKthC,SAELshC,EADEA,EAAO,GACMA,EAAO,EAAf,KAEQA,EAAO,EAAf,UAGN,GAAa,QAATT,GAA4B,OAATA,GAA2B,OAATA,EAAgB,CAC9DW,EAAQ,EACR,IAAK,IAAI3hC,EAAI,EAAGA,EAAIgiB,EAAW7hB,OAAQH,IAAK,CAC1C,IAAIiiC,EAAajgB,EAAWhiB,GAC5B,GAAIwd,EAAIzL,UAAUyvB,EAAOA,EAAQS,EAAW9hC,QAAQiB,eAAiB6gC,EAAW7gC,gBACjE,QAAT4/B,GAA4B,OAATA,GAA2B,OAATA,GAAkBhhC,EAAI,IAAI,EACjE2hC,EAAQ3hC,EAAI,GACA,KACV2hC,GAAS,IAEXH,GAASS,EAAW9hC,OACpB,OAMN,GAAa,GAATwhC,EAAY,CAEd,GAAa,OADbA,EAAQK,EAAQxkB,EAAKgkB,EAAO,EAAG,KACVG,EAAQ,GAAKA,EAAQ,GACxC,OAAO,EAETH,GAASG,EAAMxhC,OAGjB,GAAIwhC,EAAQ,GAAKA,EAAQ,GACvB,OAAO,OAEJ,GAAa,QAATX,GAA4B,MAATA,GAA0B,KAATA,EAC7C,IAAK,IAAIhc,EAAI,EAAGA,EAAI9C,EAAS/hB,OAAQ6kB,IAAK,CACxC,IAAIkd,EAAWhgB,EAAS8C,GACxB,GAAIxH,EAAIzL,UAAUyvB,EAAOA,EAAQU,EAAS/hC,QAAQiB,eAAiB8gC,EAAS9gC,cAAe,CACzFogC,GAASU,EAAS/hC,OAClB,YAGC,GAAa,MAAT6gC,GAA0B,KAATA,EAAc,CAExC,GAAa,OADbW,EAAQK,EAAQxkB,EAAKgkB,EAAO,EAAG,KACVG,EAAQ,GAAKA,EAAQ,GACxC,OAAO,EAETH,GAASG,EAAMxhC,YACV,GAAa,MAAT6gC,GAA0B,KAATA,EAAc,CAExC,GAAY,OADZtB,EAAOsC,EAAQxkB,EAAKgkB,EAAO,EAAG,KACV9B,EAAO,GAAKA,EAAO,GACrC,OAAO,EAET8B,GAAS9B,EAAKv/B,YACT,GAAa,MAAT6gC,GAA0B,KAATA,EAAc,CAExC,GAAU,OADVY,EAAKI,EAAQxkB,EAAKgkB,EAAOR,EAAM7gC,OAAQ,KACrByhC,EAAK,GAAKA,EAAK,GAC/B,OAAO,EAETJ,GAASI,EAAGzhC,YACP,GAAa,MAAT6gC,GAA0B,KAATA,EAAc,CAExC,GAAU,OADVY,EAAKI,EAAQxkB,EAAKgkB,EAAOR,EAAM7gC,OAAQ,KACrByhC,EAAK,GAAKA,EAAK,GAC/B,OAAO,EAETJ,GAASI,EAAGzhC,YACP,GAAa,MAAT6gC,GAA0B,KAATA,EAAc,CAExC,GAAU,OADVY,EAAKI,EAAQxkB,EAAKgkB,EAAOR,EAAM7gC,OAAQ,KACrByhC,EAAK,GAAKA,EAAK,GAC/B,OAAO,EAETJ,GAASI,EAAGzhC,YACP,GAAa,MAAT6gC,GAA0B,KAATA,EAAc,CAExC,GAAU,OADVY,EAAKI,EAAQxkB,EAAKgkB,EAAOR,EAAM7gC,OAAQ,KACrByhC,EAAK,GAAKA,EAAK,GAC/B,OAAO,EAETJ,GAASI,EAAGzhC,OACZyhC,SACK,GAAa,MAATZ,GAA0B,KAATA,EAAc,CAExC,GAAU,OADVa,EAAKG,EAAQxkB,EAAKgkB,EAAOR,EAAM7gC,OAAQ,KACrB0hC,EAAK,GAAKA,EAAK,GAC/B,OAAO,EAETL,GAASK,EAAG1hC,YACP,GAAa,MAAT6gC,GAA0B,KAATA,EAAc,CAExC,GAAU,OADVc,EAAKE,EAAQxkB,EAAKgkB,EAAOR,EAAM7gC,OAAQ,KACrB2hC,EAAK,GAAKA,EAAK,GAC/B,OAAO,EAETN,GAASM,EAAG3hC,YACP,GAAa,OAAT6gC,EAAgB,CAEzB,GADAmB,GAAKH,EAAQxkB,EAAKgkB,EAAOR,EAAM7gC,OAAQ,GAC7B,MAANgiC,IAAcA,GAAK,GAAKA,GAAK,IAC/B,OAAO,EAETX,GAASW,GAAGhiC,YACP,GAAa,KAAT6gC,GAAyB,MAATA,EAAe,CACxC,GAAqD,MAAjDxjB,EAAIzL,UAAUyvB,EAAOA,EAAQ,GAAGpgC,cAClC2gC,EAAO,SACF,CAAA,GAAqD,MAAjDvkB,EAAIzL,UAAUyvB,EAAOA,EAAQ,GAAGpgC,cAGzC,OAAO,EAFP2gC,EAAO,KAITP,GAAS,MACJ,CACL,GAAIhkB,EAAIzL,UAAUyvB,EAAOA,EAAQR,EAAM7gC,SAAW6gC,EAChD,OAAO,EAEPQ,GAASR,EAAM7gC,QAMrB,GAAa,GAATwhC,EAEF,GAAIF,EAAO,GAAK,GAAKA,EAAO,KAAO,GAAKA,EAAO,KAAO,GACpD,GAAI/B,EAAO,GACT,OAAO,OAGT,GAAIA,EAAO,GACT,OAAO,EAIb,OAAa,GAATiC,GAAuB,GAATA,GAAuB,GAATA,GAAuB,IAATA,IACxCjC,EAAO,GACF,GAIPkC,EAAK,IAAc,MAARG,EACbH,EAAKA,EAAK,EAAI,GACLA,EAAK,IAAc,MAARG,IACpBH,GAAM,IAEM,IAAI9qB,KAAK2qB,EAAME,EAAQ,EAAGjC,EAAMkC,EAAIC,EAAIC,IAMtD,SAASM,EAAWC,GAElB,IADA,IACS7c,EAAI,EAAGA,EAAI6c,EAAKliC,OAAQqlB,IAC/B,IAAuC,GAF5B,aAEA/Y,QAAQ41B,EAAKthC,OAAOykB,IAC7B,OAAO,EAGX,OAAO,EAKT,SAASwc,EAAQvhC,EAAKmH,EAAG06B,EAAWC,GAClC,IAAK,IAAI31B,EAAI21B,EAAW31B,GAAK01B,EAAW11B,IAAK,CAC3C,IAAI41B,EAAS/hC,EAAIsR,UAAUnK,EAAGA,EAAIgF,GAClC,GAAI41B,EAAOriC,OAASmiC,EAClB,OAAO,KAET,GAAIF,EAAWI,GACb,OAAOA,EAGX,OAAO,OAgBXp/B,KAAKi8B,UAAY,SAAU7hB,GAOzB,IANA,IAKIuK,EALA0a,EAAiC,GAApBl/B,UAAUpD,QAAcoD,UAAU,GAC/Cm/B,EAAiB,IAAIrlB,MAAM,QAAS,WAAY,UAAW,UAAW,UAAW,SACjFslB,EAAa,IAAItlB,MAAM,QAAS,QAAS,QAAS,QAAS,MAAO,OAClEulB,EAAY,IAAIvlB,MAAM,QAAS,QAAS,QAAS,QAAS,MAAO,OACjEwlB,EAAY,IAAIxlB,MAAMqlB,EAAgBD,EAAaG,EAAYD,EAAYF,EAAaE,EAAaC,GAEhG5iC,EAAI,EAAGA,EAAI6iC,EAAU1iC,OAAQH,IAEpC,IADA,IAAI4H,EAAItH,OAAOuiC,EAAU7iC,IAChBglB,EAAI,EAAGA,EAAIpd,EAAEzH,OAAQ6kB,IAE5B,GAAS,IADT+C,EAAIyX,kBAAkBhiB,EAAK5V,EAAEod,KAE3B,OAAO,IAAIlO,KAAKiR,GAItB,OAAO,MAKT3kB,KAAK0/B,kBAAoB,SAAU7pB,GAWjC,IAVA,IACI1Y,EAQAygC,EATAhhC,EAAI,EAGJ+iC,EAAY,CACdC,aAAa,EACbC,aAAa,EACbC,UAAW,KAGHC,EAAY,GACfnjC,EAAIiZ,EAAW9Y,QAAQ,CAI5B,IAFAI,EAAI0Y,EAAWlY,OAAOf,GACtBghC,EAAQ,GACD/nB,EAAWlY,OAAOf,IAAMO,GAAKP,EAAIiZ,EAAW9Y,QACjD6gC,GAAS/nB,EAAWlY,OAAOf,KAIhB,MAATghC,GAA0B,KAATA,GACnBmC,EAAYnC,EACZ+B,EAAUC,aAAc,GACN,MAAThC,GAA0B,KAATA,GAC1BmC,EAAYnC,EACZ+B,EAAUC,aAAc,GACN,MAAThC,GAA0B,KAATA,EAC1BmC,EAAYnC,EACM,MAATA,GAA0B,KAATA,GAC1BmC,EAAYnC,EACZ+B,EAAUE,aAAc,GACN,KAATjC,EACTmC,EAAYnC,EAEmB,KAA3BmC,EAAUniC,eAAmD,MAA3BmiC,EAAUniC,gBAC9C+hC,EAAUG,UAAYlC,GAK5B,OAAO+B,GAET3/B,KAAKggC,qBAAuB,SAAU9oB,EAAO+oB,GAE3C/oB,EAAwB,iBADxBA,EAAiB,MAATA,EAAgB,GAAKA,GACMA,EAAMsE,WAAatE,EACtD,IAAIgpB,EAAmB,cAAgBD,EAAW,WAAa,IAC3DA,GACE/oB,IAAUA,EAAMlZ,cAAcqL,QAAQ,MAAQ,GAAK6N,EAAMlZ,cAAcqL,QAAQ,MAAQ,KACzF62B,EAAmB,wBAGvB,IAAI5D,EAAO32B,OAAOoM,KAAKkpB,cAAcmB,kBAAkBllB,EAAOgpB,GAW9D,OATY,GAAR5D,GAAc2D,EAGC,GAAR3D,GAAa2D,GAAqB,MAAT/oB,GAA0B,IAATA,IACnDgpB,EAAmB,cACnB5D,EAAO32B,OAAOoM,KAAKkpB,cAAcmB,kBAAkBllB,EAAOgpB,IACrDC,SAAS,EAAG,EAAG,EAAG,KALvBD,EAAmB,qBACnB5D,EAAO32B,OAAOoM,KAAKkpB,cAAcmB,kBAAkBllB,EAAOgpB,IAOrD5D,GAETt8B,KAAKogC,gBAAkB,SAAU9D,EAAM2D,GACrC,IAAIC,EAAmB,cAAgBD,EAAW,YAAc,IAEhE,OADoBt6B,OAAOoM,KAAKkpB,cAAcD,WAAWsB,EAAM4D,IAGjElgC,KAAKqgC,eAAiB,SAAUnpB,EAAO+oB,GACrC,IAAIK,EAAa,cAAgBL,EAAW,SAAW,IACnD3D,EAAO32B,OAAOoM,KAAKkpB,cAAcmB,kBAAkBllB,EAAOopB,GAkB9D,OAhBY,GAARhE,GAAa2D,IACfK,EAAa,cAAgBL,EAAW,YAAc,IACtD3D,EAAO32B,OAAOoM,KAAKkpB,cAAcmB,kBAAkBllB,EAAOopB,IAIhD,GAARhE,GAAc2D,IAChBK,EAAa,mBAGD,IAFZhE,EAAO32B,OAAOoM,KAAKkpB,cAAcmB,kBAAkBllB,EAAOopB,MAGxDA,EAAa,sBACbhE,EAAO32B,OAAOoM,KAAKkpB,cAAcmB,kBAAkBllB,EAAOopB,KAIvDhE,GAETt8B,KAAKugC,UAAY,SAAUjE,EAAM2D,GAC/B,IAAIK,EAAa,cAAgBL,EAAW,SAAW,IAEvD,OADoBt6B,OAAOoM,KAAKkpB,cAAcD,WAAWsB,EAAMgE,IAIjEtgC,KAAKwgC,cAAgB,SAAUC,EAAYC,GAMzC,OALIA,EAAwBA,IAAyB,IAGnDD,EAAWN,SAAS,EAAG,EAAG,EAAG,GAExBx6B,OAAOoM,KAAKkpB,cAAcD,WAAWyF,EAJvB,wBAOvBzgC,KAAK2gC,gBAAkB,SAAUC,GAE/B,MADyB,gEACCrhC,KAAKqhC,IAGjC5gC,KAAK6gC,MAAQ,SAAUC,GAGrB,IADA,IAAIj7B,GAAQ,IAAI6N,MAAOC,WAChB,IAAID,MAAOC,UAAY9N,EAAQi7B,MAIxC9gC,KAAK+gC,kCAAoC,WACvC,OAAOp7B,OAAOuG,aAAaJ,YAAY,cAAc1N,QAAQ,OAAQ,QAIzEuH,OAAOoM,KAAKivB,WAAa,SAAU1gC,EAAUwgC,GACvCA,EAAQA,GAAS,IAArB,IACI73B,EAAM,IAAIjN,EAAEuQ,SAchB,OAbA,SAAS00B,IACP,IAAIxM,EAAUnH,YAAW,WACvB,GAAoB,YAAhBrkB,EAAIgU,QAAR,CAEA,KADuB3c,IAIrB,OAFA2I,EAAI+D,eACJuoB,aAAad,GAGfwM,EAAmBphC,SAClBihC,GAELG,GACOh4B,EAAIgE,WAGbtH,OAAOoM,KAAKmvB,SAAW,SAAUJ,GAC3BA,EAAQA,GAAS,IAArB,IAGMrM,EAFFxrB,EAAM,IAAIjN,EAAEuQ,SAShB,OAPMkoB,EAAUnH,YAAW,WACH,YAAhBrkB,EAAIgU,UACRhU,EAAI+D,UACJuoB,aAAad,MACZqM,GAGE73B,EAAIgE,WASbtH,OAAOoM,KAAKovB,2BAA6B,WACvC,IACE,MAAO,iBAAkBjkC,QAAqC,OAA3BA,OAAqB,aACxD,MAAOoN,GACP,OAAO,IAMX3E,OAAOoM,KAAKqvB,oBAAsB,SAAU5+B,EAAK0U,GAC/C,QAAIvR,OAAOoM,KAAKovB,+BACdE,aAAaC,QAAQ9+B,EAAK0U,IACnB,IAMXvR,OAAOoM,KAAKwvB,oBAAsB,SAAU/+B,GAC1C,OAAO6+B,aAAaG,QAAQh/B,IAG9BmD,OAAOoM,KAAK0vB,uBAAyB,SAAUj/B,GAC7C6+B,aAAaK,WAAWl/B,IAG1BmD,OAAOoM,KAAK4vB,kBAAoB,WAC1Bh8B,OAAOoM,KAAKovB,8BAChBE,aAAaO,SA2BM,UAD4B,oBAAtB7O,mBAAoCA,mBAAqB,WAEjD,UAA3Br3B,QAAQwB,OAAOuS,WACjBvS,OAAOuS,QAAU,CACfC,IAAK,SAAaqK,OAImD,WAAjD,oBAAZtK,QAA0B,YAAc/T,QAAQ+T,UAC1DvS,OAAOuS,QAAU,CACfC,IAAK,SAAaqK,MAEX/O,eAAiBA,aAAa62B,iBACvCpyB,QAAQC,IAAM,SAAUyK,MAM9BxU,OAAOoM,KAAK+vB,aAAe,SAAU3X,IACdA,GAAanuB,EAAE,SACrBwU,OAAO,oOAExB7K,OAAOoM,KAAKgwB,YAAc,SAAU5X,GAClC,IAAI6X,EAAiB7X,GAAanuB,EAAE,QACpCA,EAAE,2BAA4BgmC,GAAgBzjC,UAGhDoH,OAAOoM,KAAK4H,WAAWmoB,aAAe,SAAU3X,IACzBA,GAAanuB,EAAE,SACrBwU,OAAO,+GAExB7K,OAAOoM,KAAK4H,WAAWooB,YAAc,SAAU5X,GAC7C,IAAI6X,EAAiB7X,GAAanuB,EAAE,QACpCA,EAAE,6BAA8BgmC,GAAgBzjC,UAWlDoH,OAAOoM,KAAKkwB,iBAAmB,SAAUC,EAAWryB,GAClD,IACIsyB,EADAC,IAAkB,WAAY55B,SAAS+tB,iBAG3C,QAAK2L,IAGAryB,GAA8B,iBAAZA,IACrBA,EAAUrH,SAASC,cAAcoH,GAAW,UAO9CsyB,GADAD,EAAY,KAAOA,KACQryB,IAGPuyB,IACbvyB,EAAQoM,eAGXpM,EAAUrH,SAASC,cAAc,QAE/BoH,EAAQoM,cAAgBpM,EAAQ3F,kBAClC2F,EAAQoM,aAAaimB,EAAW,IAChCC,EAA4C,mBAAvBtyB,EAAQqyB,QAEF9kC,IAAvByS,EAAQqyB,KAEVryB,EAAQqyB,QAAa9kC,GAEvByS,EAAQ3F,gBAAgBg4B,KAGrBC,IAqFTx8B,OAAO08B,qBAAuB,WAC5B,IACI7hC,GADuB,IAAI+I,UACCxN,UAChCyE,EAAK8hC,KAAO,GACZ9hC,EAAK+hC,cAEL/hC,EAAKgiC,QAAU,SAAU3iC,EAAMlE,GAC7B,IAAI8mC,EAAMj0B,KAAKzH,OAAOpL,GAClB+mC,EAAoBC,EAAQ9iC,EAAM4iC,GACtC,IAAIC,EAIG,CACL,IAAI9L,EAAO,IAAIgM,EAAS/iC,EAAM4iC,GAO9B,OANAjiC,EAAK8hC,KAAK7jC,KAAK,CACboB,KAAMA,EACNlE,IAAK8mC,EACLI,QAASjM,EACT7iB,WAAW,IAAIL,MAAOC,YAEjBijB,GAXQp2B,EAAK+hC,eAAiB/hC,EAAK8hC,KAAK9hC,EAAK8hC,KAAKvlC,OAAS,IACzD8lC,QAAQC,SAASJ,EAAkBG,SAC5CriC,EAAK+hC,cAAgBG,GAazBliC,EAAKwM,QAAU,SAAU4pB,EAAMmM,EAAUC,GAIvC,OAFApM,EAAOA,GAAQqM,KAA6BziC,EAAK8hC,KAAK,GAAGO,QAC/B,IAAIK,EAAStM,EAAMmM,EAAUC,IAIzD,IAAIG,EAAa,WACf3iC,EAAK8hC,KAAO,IAGVW,EAA0B,WAC5B,IAAK,IAAIrmC,EAAI,EAAGA,EAAI4D,EAAK8hC,KAAKvlC,OAAQH,IACpC,GAAI4D,EAAK8hC,KAAK1lC,GAAGimC,QAAQO,OAAOrmC,OAAS,EACvC,OAAOyD,EAAK8hC,KAAK1lC,GAAGimC,QAGxB,OAAOriC,EAAK8hC,KAAKvlC,OAAS,EAAIyD,EAAK8hC,KAAK,GAAGO,QAAU,IAGnDF,EAAU,SAAiB9iC,EAAMlE,GACnC,IAAK,IAAIiB,EAAI,EAAGA,EAAI4D,EAAK8hC,KAAKvlC,OAAQH,IACpC,GAAI4D,EAAK8hC,KAAK1lC,GAAGiD,MAAQA,EAAM,CAE7B,IAAIu1B,GAAM,IAAI1hB,MAAOC,UAErB,GAAInT,EAAK8hC,KAAK1lC,GAAGmX,UADA,IACyBqhB,EAExC50B,EAAK8hC,KAAKjf,OAAOzmB,EAAG,QACf,GAAI4D,EAAK8hC,KAAK1lC,GAAGjB,KAAOA,EAC7B,OAAO6E,EAAK8hC,KAAK1lC,GAIvB,OAAO,GAGLgmC,EAAW,SAAU/iC,EAAMlE,GAC7BkE,EAAOA,GAAQ,GACflE,EAAMA,GAAO,GACb,IAAIi7B,EAAO,SAAc/2B,EAAMlE,GAC7BqE,KAAKH,KAAOA,EACZG,KAAKrE,IAAMA,EACXqE,KAAKojC,OAAS,IAQhB,OANWxM,EAAK76B,UAEX+mC,SAAW,SAAUlM,GACxB52B,KAAKojC,OAAO3kC,KAAKm4B,IAGZA,EAdM,GAiBXsM,EAAW,SAAUtM,EAAMmM,EAAUC,GACvC,IAAIh2B,EAAU,SAASA,EAAQ4pB,EAAMmM,EAAUC,GAC7ChjC,KAAK42B,KAAOA,GAAQ,GACpB52B,KAAK42B,KAAKwM,OAASpjC,KAAK42B,KAAKwM,QAAU,GACvCpjC,KAAK+iC,SAAWA,GAAY,GAC5B/iC,KAAKgjC,KAAOA,GAAQ,GAEpBhjC,KAAKgjC,KAAKvkC,KAAKuB,KAAK42B,MAEpB,IAAK,IAAIh6B,EAAI,EAAGA,EAAIoD,KAAK42B,KAAKwM,OAAOrmC,OAAQH,IAC3C,IAAK4D,EAAK6iC,UAAUrjC,KAAK42B,KAAKwM,OAAOxmC,GAAIoD,KAAK+iC,UAAW,CACvD,GAAIviC,EAAK6iC,UAAUrjC,KAAK42B,KAAKwM,OAAOxmC,GAAIoD,KAAKgjC,MAAO,CAElDG,IACA,IAAItqB,EAAQ,CACVyqB,eAAgBtjC,KAAK42B,KAAK/2B,KAC1B0jC,kBAAmBvjC,KAAK42B,KAAKj7B,IAC7B6nC,aAAcxjC,KAAK42B,KAAKwM,OAAOxmC,GAAGiD,KAClC4jC,gBAAiBzjC,KAAK42B,KAAKwM,OAAOxmC,GAAGjB,IACrCi4B,KAAM5zB,KAAKgjC,MAGb,MAAO,CACLnqB,MAAO7c,EAAEuB,OAAO,CACdmmC,cAAe,CACbntB,OAAQ,QACRotB,aAAcn1B,KAAKzH,OAAO,CAAE2K,QAASlR,EAAKojC,iBAAiB/qB,GAAQtc,KAAM,WAE3EsnC,iBAAkB,CAChBnyB,QAASlR,EAAKojC,iBAAiB/qB,GAC/Btc,KAAM,UAEVsc,IAGF,OAAO7L,EAAQhN,KAAK42B,KAAKwM,OAAOxmC,GAAIoD,KAAK+iC,SAAU/iC,KAAKgjC,MAI1DhjC,KAAK+iC,UACP/iC,KAAK+iC,SAAStkC,KAAKuB,KAAK42B,OAIxBp2B,EAAOwM,EAAQjR,UAwBnB,OAtBAyE,EAAK6iC,UAAY,SAAUS,EAAUC,GAEnC,IAAK,IAAInnC,EAAI,EAAGA,EAAImnC,EAAWhnC,OAAQH,IACrC,GAAImnC,EAAWnnC,GAAGiD,MAAQikC,EAASjkC,KACjC,OAAO,EAGX,OAAO,GAGTW,EAAKojC,iBAAmB,SAAU/qB,GAGhC,OAAOiB,OAFWnU,OAAOuG,aAAaJ,YAAY,kCAEvB+M,EAAMyqB,eAAgBzqB,EAAM2qB,eASlDx2B,EApEM,GAuEf,OAAOxM,GASTmF,OAAOoM,KAAKiyB,YAAc,SAAUC,EAAUphC,GAC5C,IAAIqhC,EAAWrhC,EAAQ/F,MAAM,KAE7B,IAAKF,EAAI,EAAGA,EAAIsnC,EAASnnC,OAAQH,IACZ,IAAfsnC,EAAStnC,IACX+I,OAAOoM,KAAKoyB,wBAAwBF,EAAUC,EAAStnC,KAU7D+I,OAAOoM,KAAKoyB,wBAA0B,SAAUF,EAAUG,GAExD,IAAK,IAAIxnC,EAAI,EAAGA,EAAIqnC,EAASlnC,OAAQH,IAAK,CACxC,IAAIynC,EAAQroC,EAAEioC,EAASrnC,IACnB0nC,EAAYF,EAAOtnC,MAAM,KAAK,GAElC,GAAIunC,EAAMt3B,KAAK,SAAU,CACvB,IAAIw3B,EAAWF,EAAMt3B,KAAK,SAASjQ,MAAM,KACrC0nC,EAAgB,GAChBC,EAAmB,GAEvB,IAAK7iB,EAAI,EAAGA,EAAI2iB,EAASxnC,OAAQ6kB,IAAK,CACpC,IAAI8iB,EAAcH,EAAS3iB,GAAG9kB,MAAM,KAEhCd,EAAE4M,KAAK87B,EAAY,KAAOJ,GAAuC,IAA1BtoC,EAAE4M,KAAK87B,EAAY,KAC5DF,EAAc/lC,KAAKimC,EAAY,GAAK,IAAMA,EAAY,GAAK,KAE7DD,EAAmBj2B,KAAKmT,UAAU6iB,GAAepmC,QAAQ,QAAS,KAAKA,QAAQ,OAAQ,KAAKA,QAAQ,OAAQ,KAG9GqmC,EAAuC,MAApBA,EAA2B,GAAKA,EAEnDJ,EAAMt3B,KAAK,QAAS03B,EAAmBL,EAAS,UAC3C,GAAIC,EAAM5mB,IAAI6mB,GAAY,CAC3BC,EAAWF,EAAM5mB,IAAI6mB,GAErBG,EAAmB,IADnBD,EAAgB,IAGN/lC,KAAK2lC,EAAS,KAE5BK,EAAuC,MAApBA,EAA2B,GAAKA,EAEnDJ,EAAMt3B,KAAK,QAAS03B,EAAmBL,EAAS,QAQtDz+B,OAAOoM,KAAKgZ,UAAY,SAAU4Z,GAChC,GAAIA,GAAUA,EAAO,GACnB,KAA6B,SAAtBA,EAAO,GAAGv0B,SAAkD,UAA5Bu0B,EAAOlnB,IAAI,eAAyD,QAA5BknB,EAAOlnB,IAAI,eAA2BknB,EAAOzhC,SAASnG,OAAS,GAC5I4nC,EAASA,EAAOzhC,SAGpB,OAAOyhC,GAOTh/B,OAAOoM,KAAK6yB,SAAW,SAAUtmC,EAAMkE,EAAKqiC,GAC1C,OAAOvmC,EAAKwmC,MAAK,SAAU3qB,EAAG8G,GAC5B,IAAImD,EAAIjK,EAAE3X,GACN6hB,EAAIpD,EAAEze,GACV,MAAY,QAARqiC,EACKzgB,EAAIC,GAAK,EAAID,EAAIC,EAAI,EAAI,EAEtB,SAARwgB,EACKzgB,EAAIC,GAAK,EAAID,EAAIC,EAAI,EAAI,OADlC,MASJ1e,OAAOoM,KAAKgzB,YAAc,SAAUC,GAClC,IAAIC,EAAYD,EAAOxpB,WACnB0pB,EAAeD,EAAUloC,OAU7B,OARImoC,GAAgB,GAAKA,EAAe,EACtCD,EAAY,IAAMA,EAAUtnC,OAAO,GAAK,IAC/BunC,GAAgB,GAAKA,EAAe,GAC7CD,EAAY,IAAMA,EAAUtnC,OAAO,GAAK,IAC/BunC,GAAgB,KACzBD,EAAY,IAAMA,EAAUtnC,OAAO,GAAK,KAGnC,qBAAuBsnC,GAMhCt/B,OAAOoM,KAAK+pB,iBAAmB,SAAUnW,GACvC,MAAyB,iBAAXA,EAAsBA,EAAOvnB,QAAQ,0BAA2B,SAAWunB,GAI3FhgB,OAAOoM,KAAKozB,WAAa,SAAU9nC,GACjC,IAAIqN,EAAMlC,SAASC,cAAc,OAEjC,OADAiC,EAAIC,YAAYnC,SAASsuB,eAAez5B,IACjCqN,EAAI5D,WAMbnB,OAAOoM,KAAKgqB,mBAAqB,SAAU7kB,GACzC,OAAOvR,OAAOoM,KAAKqzB,oBAAoBluB,IAMzCvR,OAAOoM,KAAKiqB,kBAAoB,SAAU9kB,GACxC,OAAOvR,OAAOoM,KAAKszB,mBAAmBnuB,IAMxCvR,OAAOoM,KAAKuzB,gBAAkB,SAAUpuB,GACtC,OAAOvR,OAAOoM,KAAKmpB,kCAAkChkB,IAQvDvR,OAAOoM,KAAKqzB,oBAAsB,SAAUluB,GAC1C,OAAOvR,OAAOoM,KAAKwmB,YAAYrhB,EAAO2hB,+BAQxClzB,OAAOoM,KAAKszB,mBAAqB,SAAUnuB,GACzC,IAAIqgB,EACAC,EAAwB,CAC1BC,cAAeoB,6BAA6BnB,iBAC5CC,iBAAkBkB,6BAA6BjB,eAC/CC,oBAAqBgB,6BAA6Bf,eAYpDP,EAAgBv7B,EAAEuB,OAVS,CACzBy6B,UAAU,EACVP,cAAe,IACfE,iBAAkB,IAClBM,aAAa,EACbC,eAAgB,SAChBC,eAAgB,OAChBN,oBAAqB,IACrBE,OAAQ,IAEqCP,GAC/C,IAAIgB,EAAc7yB,OAAOoM,KAAK0mB,cAAcvhB,EAAOqgB,GACnD,IAA4C,IAAxC5xB,OAAO+yB,SAASC,oBAA8B,CAChD,IAAIC,GAAW,GAC6B,GAAxCJ,EAAYhd,WAAWnS,QAAQ,OACjCuvB,GAAW,EACXJ,EAAcA,EAAYp6B,QAAQ,IAAK,IAAIA,QAAQ,IAAK,KAE1D,IAAIgnB,EAAK,IAAIjJ,OAAO,IAAM0c,6BAA6BnB,iBAAmB,iBAAkB,KAC5Fc,EAAcA,EAAYp6B,QAAQgnB,EAAI,MACtCA,EAAK,IAAIjJ,OAAO,KAAO0c,6BAA6BnB,iBAAmB,MAAO,KAC9Ec,EAAcA,EAAYp6B,QAAQgnB,EAAI,IAGjCwT,IAAUJ,EAAc,IAAMA,EAAc,KAEnD,OAAOA,GAMT7yB,OAAOoM,KAAKwzB,iBAAmB,SAAUj8B,GACnCA,EAASA,GAAU,GAAvB,IACIk8B,EAAWxpC,EAAE,yDAAyDgL,KAAKsC,EAAOtC,MAAQ,IAC9Fw+B,EAASxhC,SAAShI,EAAE,SACpBwpC,EAASC,OAAO,MAAM,WACpBD,EAASz/B,UAGXy/B,EAASE,QAAQ,KAAM,WACrBF,EAASjnC,aAOboH,OAAOoM,KAAK4zB,aAAe,WACzB,YAA+C,IAAjChgC,OAAO+T,QAAQksB,gBAAkCjgC,OAAO+T,QAAQksB,eAGhFjgC,OAAOoM,KAAK8zB,QAAU,SAAUlqC,GAC9B,IAAK6G,OAAO7G,EACe,UAArBD,QAAQC,EAAI6G,cAA0B7G,EAAI6G,KACvB,mBAAZ7G,EAAI6G,OAAqB7G,EAAI6G,KAAO,YAAY7G,EAAI6G,OAInEmD,OAAOoM,KAAK+zB,UAAY,SAAUjf,EAAOvmB,GAGnC,IAAI8N,EAFR,GAAMyY,EACJ,GAA+C,mBAA3CC,OAAO/qB,UAAUyf,SAAStb,MAAM2mB,IAA6E,sBAA9CC,OAAO/qB,UAAUyf,SAAStb,MAAMI,IAEjG,IAAK8N,KAASyY,EACZ,GAAIA,EAAMhlB,eAAeuM,KAET,IADN9N,EAASmG,KAAKogB,EAAMzY,GAAQA,EAAOyY,EAAMzY,IAE/C,YAKNpS,EAAE+H,KAAK8iB,EAAOvmB,IAMpBqF,OAAOoM,KAAKg0B,oBAAsB,SAAUf,EAAQvN,GAG9CA,EAAgBA,GAAiB,IAFrC,IAII13B,EAAM,GAENimC,GAAgB,EAChBC,GAAoB,EACxBjB,GAAUA,EAAOjoC,OAAS,EAAIioC,EAAOxpB,WAAWxd,cAAgB,IAAII,QAAQ,KAAM,IAClF,IAAK,IAAIxB,EAAI,EAAGA,EAAIooC,EAAOjoC,OAAQH,KATf,MAUbooC,EAAOpoC,IATO,MASiBooC,EAAOpoC,IAAiC,IAANA,GAPxD,KAOmEooC,EAAOpoC,EAAI,KAEhF6oB,MAAMgD,OAAOuc,EAAOpoC,KAErBooC,EAAOpoC,KAAO66B,GAAkBuO,EAX7B,MAcHhB,EAAOpoC,IAAqBqpC,IACrClmC,GAAOilC,EAAOpoC,GACdqpC,GAAoB,IAJpBlmC,GAAOilC,EAAOpoC,GACdopC,GAAgB,GALhBjmC,GAAOilC,EAAOpoC,GAWlB,OAAOmD,GAGT4F,OAAOoM,KAAKm0B,yBAA2B,SAAUlB,EAAQvN,EAAe0O,EAASC,EAAaC,GAC5F5O,EAAgBA,GAAiB,IACjCuN,EAASr/B,OAAOoM,KAAKg0B,oBAAoBf,EAAQvN,GACjD0O,EAAUA,EAAU,EAAIA,EAAU,GAClCC,EAAcA,EAAc,EAAIA,GAAe,IAC/CC,EAAcA,EAAc,EAAIA,EAAc,IAC9C,IACIC,EAAU,IAAInqB,OAAO,UAAYsb,EAAgB,2BACjD8O,EAAWvB,EAAO71B,MAAMm3B,GAGxBE,EAAM,EAENC,EAAuB,MAAdzB,EAAO,GAAaA,EAAO,GAAK,GACzC0B,EAAqB,EAKzB,GAHA1B,EAASA,EAAO5mC,QAAQqoC,EAAQ,IAG5BF,GAAYA,EAAS,IAAMA,EAAS,GAAI,CAC1C,IAAII,EAAYJ,EAAS,GAAKA,EAAS,GAAGnoC,QAAQmoC,EAAS,GAAI,IAAIzpC,MAAM26B,GAAiB,GAEtFmP,EAAoB,GACpBC,EAAU,GA6Bd,OAzBAF,EAAU,GAAKA,EAAU,GAAGvoC,QAAQ,OAAQ,IAExCuoC,EAAU,GAAG5pC,OAAS,GAExB2pC,GADAE,EAAoBD,EAAU,GAAGzsB,MAAM,IACAnd,OACvC8pC,EAAUF,EAAU,GAAG,IAAM,GAC7BC,EAAoBA,EAAkBvnC,OAAOknC,EAAS,IAAM,KAC3B,IAAxBI,EAAU,GAAG5pC,QACtB8pC,EAAUF,EAAU,GAAG,IAAM,GAC7BC,EAAoBA,EAAkBvnC,OAAOsnC,EAAU,IAAM,MAE7DD,EAAqBC,EAAU,GAAG5pC,OAClC4pC,EAAU,GAAKA,EAAU,GAAGvoC,QAAQ,OAAQ,IAC5CsoC,EAAqBC,EAAU,GAAG5pC,OAAS,EAAI2pC,EAC/CG,EAAUF,EAAU,GAAG,GACvBC,EAAoBD,EAAU,GAAGzsB,MAAM,KAGzC0sB,EAAoBA,EAAkBxoC,QAAQq5B,EAAe,IAAIr5B,QAAQ,OAAQ,KAE3DrB,QAAUopC,IAC9BS,EAAoBA,EAAkB1sB,MAAM,EAAGisB,EAAU,IAIpDM,EAASI,GAAWD,EAAoBnP,EAAgBmP,EAAoB,IA9CrE,MA6CdJ,GADAA,EAAM/d,OAAO8d,EAAS,GAAGnoC,QA5CX,IA4C8B,KAAOsoC,GACvCL,EAAcA,EAAcG,EAAMJ,EAAcA,EAAcI,GACkC,EAAI,IAAMA,EAAMA,GACvH,GAAIxB,EAAQ,CAEjB0B,EAAqB1B,EAAO37B,QAAQouB,GACpC,IAAIqP,EAAO,EACPC,EAAK/B,EAAOjoC,OAAS,EAGzBioC,EAASA,EAAO5mC,QAAQq5B,EAAe,IAIvC,IADA,IAAI76B,EAAIkqC,GACAE,GACY,MAAdhC,EAAOpoC,IAAcooC,EAAOpoC,KAAO66B,GACrCuP,GAAkB,EAClBF,EAAOlqC,GACDA,IAKV,IAFA,IAAIoqC,GAAkB,EAClBplB,EAAImlB,GACAC,GACY,MAAdhC,EAAOpjB,IAAcojB,EAAOpjB,KAAO6V,GACrCuP,GAAkB,EAClBD,EAAKnlB,EAAI,GACHA,IAGV,GADAmlB,EAAKA,EAAKZ,EAAUW,EAAOX,EAAUW,EAAOC,GAChB,IAAxBL,EAA2B,CAEzBM,GAAkB,EAItB,OADAR,EAAME,GADWI,EAAO,IADpBF,EAAoB5B,EAAO9qB,MAAM4sB,EAAMC,IAGrBhqC,OAAS,IAAM0oB,MAAMgD,OAAOme,EAAkB,KAC3DH,EAASG,EAAkB,IAAMA,EAAkB7pC,OAAS,EAAI06B,EAAgBmP,EAAkB1sB,MAAM,GAAK,IAjF1G,KAiF6HssB,EAAM,EAAI,IAAMA,EAAMA,GAChJ,IAIf,IAAIS,EAAajC,EAAO9qB,MAAM4sB,EAAMA,EAAO,GACvCI,EAAalC,EAAO9qB,MAAM4sB,EAAO,EAAG9B,EAAOjoC,QAM/C,OALAypC,EAAMU,EAAWnqC,QACjBmqC,EAAaA,EAAW9oC,QAAQ,OAAQ,KACzBrB,OAASopC,IACtBe,EAAalC,EAAO9qB,MAAM4sB,EAAO,EAAGX,EAAUW,IAE5Cre,OAAOwe,GACFR,EAASQ,GAAcC,EAAWnqC,OAAS,EAAI06B,EAAgByP,EAAa,IA9FzE,KA8F4FV,EAAM,EAAI,IAAMA,EAAMA,GAC/G,IAEX,MAAO,IAMjB7gC,OAAOoM,KAAKo1B,aAAe,SAAU9pC,GACnC,OAAOA,EAAIe,QAAQ,OAAQ,KAAMA,QAAQ,MAAO,KAAKA,QAAQ,QAAS,MAAMA,QAAQ,OAAQ,OAM9FuH,OAAOoM,KAAKq1B,gBAAkB,SAAUpgC,GAEtC,OADS,IAAImV,OAAO,eACV5c,KAAKyH,IAGjBrB,OAAOoM,KAAKs1B,UAAY,WACtB,IAAI1rC,EAAM6S,KAAKC,MAAM64B,eAAe9F,QAAQ,yBAC5C8F,eAAe5F,WAAW,wBAC1B1lC,EAAEuB,OAAO5B,EAAK,CAAE4rC,eAAgB,UAChCD,eAAehG,QAAQ,uBAAwB9yB,KAAKzH,OAAOpL,KAG7DgK,OAAOoM,KAAKy1B,WAAa,SAAUl+B,GACjC,IAAI3N,EAAM6S,KAAKC,MAAM64B,eAAe9F,QAAQ,yBAC5C8F,eAAe5F,WAAW,wBAC1B1lC,EAAEuB,OAAO5B,EAAK2N,GACdg+B,eAAehG,QAAQ,uBAAwB9yB,KAAKzH,OAAOpL,KAO7DgK,OAAOoM,KAAK01B,eAAiB,SAAU31B,GAGrC,OAFAA,EAASA,GAAUnM,OAAOoG,eAEnB,CACP,iBACA,wBACA,qBACA,4BACA,SACA,aACA,oBACA,iBACA,yBACA1C,QAAQyI,IAAW,GAOrBnM,OAAOoM,KAAK21B,qBAAuB,SAAU51B,GAC3C,OAAOnM,OAAOoM,KAAK01B,eAAe31B,IAAWnM,OAAOoM,KAAKmW,2BAO3DviB,OAAOoM,KAAK41B,eAAiB,SAAU71B,GAGrC,OAFAA,EAASA,GAAUnM,OAAOoM,KAAKhG,eAExB,CACP,SACA,aACA,oBACA,iBACA,yBACA1C,QAAQyI,IAAW,GAOrBnM,OAAOoM,KAAK61B,sBAAwB,SAAU91B,GAG5C,OAFAA,EAASA,GAAUnM,OAAOoM,KAAKhG,eAExBpG,OAAOoM,KAAK41B,mBAAmD,IAA/B71B,EAAOzI,QAAQ,YAOxD1D,OAAOoM,KAAK81B,kBAAoB,SAAU/1B,GAGxC,OAFAA,EAASA,GAAUnM,OAAOoM,KAAKhG,eAExBpG,OAAOoM,KAAK41B,qBAAqD,IAA/B71B,EAAOzI,QAAQ,aAQ1D1D,OAAOoM,KAAK+1B,mBAAqB,SAAUh2B,GAGzC,OAFAA,EAASA,GAAUnM,OAAOoM,KAAKhG,eAExB,CACP,iBACA,wBACA,qBACA,6BACA1C,QAAQyI,IAAW,GAOrBnM,OAAOoM,KAAKg2B,0BAA4B,SAAUj2B,GAGhD,OAFAA,EAASA,GAAUnM,OAAOoM,KAAKhG,eAExBpG,OAAOoM,KAAK+1B,uBAAuD,IAA/Bh2B,EAAOzI,QAAQ,YAO5D1D,OAAOoM,KAAKi2B,sBAAwB,SAAUl2B,GAG5C,OAFAA,EAASA,GAAUnM,OAAOoM,KAAKhG,eAExBpG,OAAOoM,KAAK+1B,uBAAmD,IAA3Bh2B,EAAOzI,QAAQ,QAQ5D1D,OAAOoM,KAAK6zB,cAAgB,SAAUt8B,GACpC,IAAK3D,OAAOoM,KAAK01B,uBAAsC,IAAXn+B,EAC5C,OAAO,EAEP,IAAIoQ,EAAUpQ,EAAOoQ,SAAW,KAC5ByQ,EAAY7gB,EAAO6gB,WAAa,KAEhC8d,EAA8B,OAAd9d,EACpBA,EAAwB,OAAZzQ,EAAmBA,EAAQwuB,mBAAqB,KAE5D,GAAsB,OAAlBD,EACJ,OAAO,EAEP,IAAIE,EAAaF,EAAcG,aAAe,GAI9C,YAHwD,IAA7BD,EAAWvC,eACtCjgC,OAAOoM,KAAKoL,aAAagrB,EAAWvC,gBAKtCjgC,OAAOoM,KAAKs2B,qBAAuB,WACjC,IAAIC,EAAehiB,UAAUC,UAAUvoB,cAAcqL,QAAQ,WACzDk/B,EAAiBjiB,UAAUC,UAAUvoB,cAAc2Q,UAAU25B,EAAe,EAAGA,EAAe,IAElG,OADAC,EAAiBA,EAAenkC,WAAW,IAAK,IACzCqkB,OAAO8f,IAGhB5iC,OAAOoM,KAAKy2B,WAAa,SAAUl9B,GACjC,IAAIm9B,EAAY,GACZC,EAAgBr2B,SAASs2B,SAAS7rC,MAAM,KACxC8rC,EAAWv2B,SAASw2B,SAAW,KAAOx2B,SAASy2B,KAEnD,GAA8B,KAA1BnZ,oBAAoB,GACtB8Y,EAAYG,EAAWjZ,oBAAsBrkB,MACxC,CAEL,IADA,IAAIy9B,EAAsBpZ,oBAAoB7yB,MAAM,OAAOC,OAClDH,EAAI,EAAG4H,EAAIkkC,EAAc3rC,OAAQH,EAAI4H,EAAIukC,EAAqBnsC,IACrEgsC,GAAYF,EAAc9rC,GAAK,IAIjC6rC,GADAG,EAA6C,MAAlCA,EAASA,EAAS7rC,OAAS,GAAa6rC,EAAWA,EAAW,KAClDt9B,EAEzB,OAAOm9B,GAOT9iC,OAAOoM,KAAKi3B,kBAAoB,WAC9B,IACI75B,EADYmX,UAAUC,UAAUvoB,cACdmR,MAAM,uBAE5B,QAAOA,GAAQwZ,WAAWxZ,EAAM,KAQlCxJ,OAAOoM,KAAKk3B,gBAAkB,SAAUC,GACtC,IAAIC,EAAYD,EACZ19B,EAAU7F,OAAOoM,KAAKi3B,oBAE1B,IAAKx9B,EACL,OAAO29B,EAEP,GAAmC,0BAA/BA,EAAUx6B,UAAU,EAAG,KAAmCnD,GAAW,IAAK,CAC5E,IAAI49B,EAAaD,EAAUrsC,MAAM,OAC7BssC,EAAWrsC,OAAS,EACtBosC,EAAY,yCAA2CC,EAAW,IAElEA,EAAaD,EAAUrsC,MAAM,KAC7BqsC,EAAY,yCAA2CC,EAAWA,EAAWrsC,OAAS,IAI1F,OAAOosC,GAQTxjC,OAAOoM,KAAKmsB,gBAAkB,SAAUhtB,GACtC,QAAKvL,OAAOuG,cACLvG,OAAOuG,aAAaJ,YAAYoF,KAAcA,GASvDvL,OAAOoM,KAAKs3B,UAAY,SAAUC,EAASC,EAAaC,GACtDD,EAAcA,GAAe,GAC7BC,EAAYA,GAAa,IAKzB,IAHA,IAAIC,EAAiBC,KAAKJ,GACtBK,EAAa,GAER1e,EAAS,EAAGA,EAASwe,EAAe1sC,OAAQkuB,GAAUue,EAAW,CAIxE,IAHA,IAAItvB,EAAQuvB,EAAevvB,MAAM+Q,EAAQA,EAASue,GAE9CI,EAAc,IAAI3vB,MAAMC,EAAMnd,QACzBH,EAAI,EAAGA,EAAIsd,EAAMnd,OAAQH,IAChCgtC,EAAYhtC,GAAKsd,EAAMG,WAAWzd,GAGpC,IAAIitC,EAAY,IAAIC,WAAWF,GAE/BD,EAAWlrC,KAAKorC,GAIlB,OADW,IAAIE,KAAKJ,EAAY,CAAEptC,KAAMgtC,KAQ1C5jC,OAAOoM,KAAKi4B,kBAAoB,SAAU3sC,GAExC,IADA,IAAIwsC,EAAY,IAAIC,WAAWzsC,EAAIN,QAC1BH,EAAI,EAAGA,EAAIS,EAAIN,OAAQH,IAC9BitC,EAAUjtC,GAAyB,IAApBS,EAAIgd,WAAWzd,GAEhC,OAAOitC,GAWTlkC,OAAOoM,KAAKk4B,uBAAyB,WACnC,MAA8C,oBAAhCC,8BAAyG,IAA1DvkC,OAAOoM,KAAKoL,aAAa+sB,8BAQxFvkC,OAAOoM,KAAKo4B,oBAAsB,WAChC,MAAqC,oBAAvBC,qBAAuF,IAAjDzkC,OAAOoM,KAAKoL,aAAaitB,qBAO/EzkC,OAAOoM,KAAKs4B,oBAAsB,WAChC,MAA4C,oBAA9BC,4BAAqG,IAAxD3kC,OAAOoM,KAAKoL,aAAamtB,4BAOtF3kC,OAAOoM,KAAKw4B,sBAAwB,WAClC,MAAuC,oBAAzBC,uBAA2F,IAAnD7kC,OAAOoM,KAAKoL,aAAaqtB,uBAOjF7kC,OAAOoM,KAAK04B,qBAAuB,WACjC,MAA6C,oBAA/BC,6BAAuG,IAAzD/kC,OAAOoM,KAAKoL,aAAautB,6BAOvF/kC,OAAOoM,KAAK44B,gBAAkB,WAC5B,MAAmC,oBAArBC,kBAAyD,UAArBA,kBAOpDjlC,OAAOoM,KAAK84B,mBAAqB,WAC/B,MAA0C,oBAA5BC,wBAA0CA,wBAA0B,IAOpFnlC,OAAOoM,KAAKg5B,mBAAqB,WAC/B,IAAIC,GAAY,EAEhB,GAAqC,oBAA1BC,wBAA0CtlC,OAAOoM,KAAKoX,QAAQ8hB,uBAAwB,CAC/F,IAAIz/B,EAAUy/B,sBAAsB97B,MAAM,YAC1C67B,GAAYx/B,GAAUmd,WAAWnd,EAAQ/K,UAAY,GAGvD,OAAOuqC,GAOTrlC,OAAOoM,KAAKm5B,mBAAqB,WAC/B,MAA0B,oBAAZC,SAOhBxlC,OAAOoM,KAAKmW,wBAA0B,WACpC,MAA4B,oBAAdC,WAOhBxiB,OAAOoM,KAAKq5B,wBAA0B,WACpC,MAA4B,oBAAdjjB,WAA6BxiB,OAAOoM,KAAK41B,kBAOzDhiC,OAAOoM,KAAKs5B,4BAA8B,WACxC,MAA4B,oBAAdljB,WAA6BxiB,OAAOoM,KAAK+1B,sBAMrDniC,OAAOoM,KAAKmW,2BAA6BhrB,OAAOiuC,SAAWjuC,OAAOiuC,QAAQG,QAAQC,UACpFJ,QAAQG,QAAQC,SAASC,0BAAyB,GAOpD7lC,OAAOoM,KAAK05B,iBAAmB,WAC7B,IAAIC,EAAgD,oBAA1BC,uBAA0ChmC,OAAOoM,KAAKoX,QAAQwiB,uBAChE,KAAxBA,sBAEAA,sBAAwB,GACxB,IAAI75B,EAASnM,OAAOoG,eAGpB,OAFA4/B,sBAAwBD,EAEjB55B,GAOTnM,OAAOoM,KAAK65B,UAAY,WACtB,OAAOtlB,UAAUC,UAAUvoB,cAAcqL,QAAQ,YAAc,GAGjE1D,OAAOoM,KAAK85B,gBAAkB,WAE5B,OADalmC,OAAOoM,KAAKhG,eACX1C,QAAQ,YAAc,GAGtC1D,OAAOoM,KAAKsW,YAAc,WAExB,OAAsC,IADzB1iB,OAAOoM,KAAKhG,eACX1C,QAAQ,YAQxB1D,OAAOoM,KAAK+5B,eAAiB,WAC3B,MAAqC,oBAA1BC,uBAA0CpmC,OAAOoM,KAAKoX,QAAQ4iB,uBAGlEpmC,OAAO4F,OAAOygC,SAAW,GAFvBD,uBAUXpmC,OAAOoM,KAAKk6B,UAAY,SAAU3tC,GAGhC,IACE,QAASA,EAAKkd,WAAWrM,MAHf,6GAIV,MAAO0J,IAET,OAAO,GAQTlT,OAAOoM,KAAKm6B,WAAa,SAAUtvB,GACjC,IAAIuvB,EAEJ,IACE,QAAgC,IAArBvvB,EAAW1F,OAA0BvR,OAAOoM,KAAKoX,QAAQvM,EAAW1F,OAW7Ei1B,EAAavvB,EAAWtR,KAAO,OAXsD,CACrF,IAAIhN,EAAOse,EAAW1F,MAClB5L,EAAMhN,EAAK4Y,OAAS5Y,EAExB,GAAI2b,MAAMhd,QAAQqO,GAAM,CACtB,IAAI8gC,EAAU9gC,EAAI7K,QAClB0rC,EAAalyB,MAAMhd,QAAQmvC,GAAWA,EAAQnuC,KAAK,IAAMmuC,OAEzDD,EAAa7gC,GAMjB6gC,EAAcxmC,OAAOoM,KAAKoX,QAAQgjB,GAAsF,GAAxE,yBAA2BA,EAAW/tC,QAAQ,mBAAoB,OAErD,IAA3C+tC,EAAW9iC,QAAQ,qBACrC8iC,EAAa,IAEb,MAAOtzB,GACPszB,EAAa,GAGf,OAAOA,GAQTxmC,OAAOoM,KAAKs6B,mBAAqB,SAAU/tC,GACzC,IAAIoT,EAAUpT,GAAQ,GAEtB,IAEEoT,GADAA,EAA4B,iBAAXA,EAAsBlD,KAAKC,MAAMiD,GAAWA,GAC3CiyB,cAAgBjyB,EAAQA,SAAWA,EACrD,MAAOpH,GACPoH,EAAUpT,EAGZ,OAAOoT,GAMT/L,OAAOoM,KAAKu6B,kBAAoB,SAAUjvC,GACxC,IAAIwb,EAAQxb,EAEZ,IAAKwb,EAAO,OAAOxb,EAEnB,GAAoB,iBAATwb,EACT,IACEA,EAAQrK,KAAKC,MAAMoK,GACnB,MAAOvO,GACPuO,EAAQ,CACNtc,KAAM,QACNoM,KAAM,OACN+I,QAASrU,GAKf,MAAsB,UAAlB3B,QAAQmd,KAAuBA,EAAMnH,SAAWmH,EAAMT,YACjD,CACL7b,KAAMsc,EAAMtc,MAAQ,QACpBoM,KAAMkQ,EAAMlQ,MAAQkQ,EAAM0zB,WAAa1zB,EAAM2zB,WAAa3zB,EAAMT,YAAc,OAC9E1G,QAASmH,EAAMnH,UAGbmH,GAASA,EAAM9b,QAAU8b,EAAM9b,QAAU,IAAG8b,EAAQA,EAAM,IAC1DA,EAAM8qB,eAAc9qB,EAAQA,EAAM8qB,cAClC9qB,EAAMA,QAAOA,EAAQA,EAAMA,OAG1BlT,OAAOoM,KAAKu6B,kBAAkBzzB,KAKvC,IAAI4zB,iBAAmB,+CGvoIvB,SAAS/wC,QAAQC,GAAwU,OAA9ND,QAApD,mBAAXE,QAAoD,iBAApBA,OAAOC,SAAkC,SAAiBF,GAAM,cAAcA,GAAwB,SAAiBA,GAAM,OAAOA,GAAyB,mBAAXC,QAAyBD,EAAIG,cAAgBF,QAAUD,IAAQC,OAAOG,UAAY,gBAAkBJ,IAAsBA,6BHwoIxWgK,OAAOoM,KAAK26B,sBAAwB,WAClC,IAAIC,EAAc3wC,EAAE,QAAQqU,KAAK,sBAAsBqC,SACvD1W,EAAEywC,kBAAkBxoC,UAAU,QAC9BjI,EAAE,QAAQqU,KAAK,6BAA6BoN,IAAI,CAAEmvB,SAAY,WAAYj6B,MAAS,OAAQD,OAAUi6B,EAAc,KAAME,WAAc,OAAQC,QAAW,MAAOC,UAAW,SAG9KpnC,OAAOoM,KAAKi7B,qBAAuB,WACjChxC,EAAE,QAAQqU,KAAK,6BAA6BO,UAM9CjL,OAAOoM,KAAKk7B,kBAAoB,SAAUC,IAC7B,IAAIvnC,OAAOya,WAAW+sB,YAAYC,MACxCC,iBAAiBntC,MAAMlE,EAAE,iBAAmBkxC,GAAQ,KAG3DvnC,OAAOoM,KAAKu7B,yBAA2B,SAAUhiC,GAC/C,IAAuCwuB,EAGvC,MAA4B,OAHWA,EAGpBxuB,GAFEzN,OAAOi8B,EAAY/8B,OAAS,GAEfuO,EAAMA,EAAM,KAahD3F,OAAOoM,KAAKw7B,aAAe,SAAUjiC,EAAKkiC,EAAeC,GACvD,IAiCMxd,EAjCFyd,EAAS,IAAI1xC,EAAEuQ,SACnBohC,OAAuCvwC,IAApBqwC,GAAuCA,EAE1DG,GADgBJ,EAAgB,GAAK7nC,OAAOoM,KAAKu7B,yBAAyBtiC,aAAamO,iBACxD7N,EAE/BuiC,EAA8C,IAA9B7xC,EAAE,oBAAiBe,OAMnC+wC,EAAkB,WAChB,IAAIC,EAAO/xC,EAAEgE,MAAM,GACnBguC,EAAiBroC,OAAOuG,aAAaJ,YAAY,0DACjD9E,EAAOrB,OAAOoM,KAAKk8B,UACnB,WAAa,OAAOjyC,EAAE+xC,EAAKG,iBAAiBlnC,SAC5CgnC,GAEAG,GAA0D,IAApCnnC,EAAKqC,QAAQ,kBACnC+kC,EAAezoC,OAAOoM,KAAKk8B,UAC3B,WAAa,OAAOz/B,KAAKC,MAAMzH,KAC/B,CACE2B,KAAM,QACN4N,OAAQ,QACR7E,QAAkB,KAAT1K,EAAcgnC,EAAiBhnC,IAG1CqnC,EAAYV,IAAqBQ,EAC7BA,GACJnjC,aAAasjC,mBAAmBzoC,QAvBxB,SAAiBuoC,EAAcC,GACnCA,GACJ1oC,OAAO4oC,WAAWre,KAAKke,EAAa18B,aAAStU,GAAW,GACxDswC,EAAOn/B,OAAO6/B,GAqBdI,CAAQJ,EAAcC,IAexB,OAHKR,KATC5d,EAASj0B,EAAE,cACR+Q,KAAK,CACVyP,MAAO,iCACPhN,GAhCQ,oBAkCVxL,SAAS,QACTisB,EAAO,GAAGwe,OAASX,GAKrB9xC,EAAE,oBAAiB+Q,KAAK,MAAO6gC,GACxBF,GAQT/nC,OAAOoM,KAAK28B,mBAAqB,SAAUpjC,EAAKhC,GACT,IAAjCtN,EAAE,oBAAoBe,QACxBf,EAAE,oBAAoBuC,SAGxBvC,EAAE,aAAa+Q,KAAK,CAClByP,MAAO,iCACPhN,GAAI,oBACNxL,SAAS,QAGT,IADA,IAAI2qC,EAAc,GACT/xC,EAAI,EAAGA,EAAI0M,EAAOvM,OAAQH,IACjC+xC,EAAcA,EAAc,4BAA8BrlC,EAAO1M,GAAGiD,KAAO,YAAcyJ,EAAO1M,GAAGsa,MAAQ,KAG7G,IAAI03B,EAAW,+BAAiCtjC,EAAM,mBACtDqjC,EACA,UAEA3yC,EAAE,oBAAoB6yC,WAAWx+B,KAAK,QAAQG,OAAOo+B,GACjDjpC,OAAOoM,KAAKsU,UACd1gB,OAAOmpC,sBAAuB,EAC9B9yC,EAAEqP,KAAK,CAAE9O,KAAM,OACb+O,IAAKA,EACLhN,KAAMgL,EACNoC,SAAU,SACZ8M,MAAK,WACHxc,EAAE,YAAaA,EAAE,oBAAoB6yC,YAAYE,aAGnD/yC,EAAE,YAAaA,EAAE,oBAAoB6yC,YAAYE,UAIrDppC,OAAOoM,KAAKi9B,mCAAqC,SAAUC,EAAQC,GACjEvpC,OAAOya,WAAW+sB,YAAYC,KAAKrxC,UAAUozC,QAAQ,gBAAiB,CACpEC,OAAQzpC,OAAOya,WAAW9O,QAAQ89B,OAAOC,iCACzCJ,OAAQA,EACRC,WAAYA,KAUhBvpC,OAAOoM,KAAKu9B,2BAA6B,SAAUryB,GACjD,OAAIA,EACKtX,OAAOuG,aAAaJ,YAAY,+CAAgD,qFAEhFnG,OAAOuG,aAAaJ,YAAY,oCAAqC,oGAShFnG,OAAOoM,KAAKw9B,aAAe,SAAUlyC,GACnC,IAAI6Z,EAAQ,MAAO7Z,EAAsCA,EAAIme,WAAane,EACtEmyC,EAAWC,UAAUC,SAASx4B,GAC9B4c,EAAStrB,SAASC,cAAc,OAIpC,OAFAqrB,EAAOhtB,UAAY0oC,EAEiB,IAA7B1b,EAAOjvB,WAAW9H,OAAe,GAAKO,OAAOw2B,EAAOjvB,WAAW,GAAGkyB,YAG3EpxB,OAAOoM,KAAK49B,YAAc,SAAU9oB,GAGlC,IAFA,IAAIlf,EAAQkf,EAAMxnB,SAETzC,EAAI,EAAGG,EAAS4K,EAAM5K,OAAQH,EAAIG,IAAUH,EACnD,IAAK,IAAIglB,EAAIhlB,EAAI,EAAGglB,EAAI7kB,IAAU6kB,EAC5Bja,EAAM/K,KAAO+K,EAAMia,IACrBja,EAAM0b,OAAOzB,GAAK,EAAG,GAM3B,OAAOja,GAgBThC,OAAOoM,KAAK69B,SAAW,SAAUjvC,EAAMkvC,EAAMC,GAC3C,IAAIrb,EACJ,OAAO,WACL,IAAI/a,EAAU1Z,KACdZ,EAAOe,UACH4vC,EAAQ,WAEV,GADAtb,EAAU,MACLqb,EACH,OAAOnvC,EAAKT,MAAMwZ,EAASta,IAG3B4wC,EAAUF,IAAcrb,EAG5B,GAFAc,aAAad,GACbA,EAAUnH,WAAWyiB,EAAOF,GAAQ,KAChCG,EACF,OAAOrvC,EAAKT,MAAMwZ,EAASta,KAejCuG,OAAOoM,KAAKk+B,UAAY,SAAUtvC,EAAMkvC,EAAMC,GAC5C,IACIrb,EADAj0B,EAAOR,KAEPF,EAAK,WACP,IAAI4Z,EAAU1Z,KACdZ,EAAOe,UACH4vC,EAAQ,WAEV,GADAtb,EAAU,MACLqb,EACH,OAAOnvC,EAAKT,MAAMwZ,EAASta,IAG3B4wC,EAAUF,IAAcrb,EAG5B,GAFAc,aAAad,GACbA,EAAUnH,WAAWyiB,EAAOF,GAAQ,KAChCG,EACF,OAAOrvC,EAAKT,MAAMwZ,EAASta,IAG/B,MAAO,CACLq1B,QAASA,EACTzC,OAAQ,WACNuD,aAAad,IAEfyb,KAAM,WACJpwC,EAAG2G,KAAKjG,EAAML,cASpBwF,OAAOoM,KAAKo+B,6BAA+B,WACzC,OAAOxqC,OAAOoM,KAAKmW,2BAA6BviB,OAAOoM,KAAKsW,eAAiB1iB,OAAO+yB,SAAS0X,mBAK/FzqC,OAAOoM,KAAKyE,aAAe,SAAU9E,GACnC,MAAO,mIAGPA,EACA,cAOF/L,OAAOoM,KAAKs+B,sBAAwB,SAAU/kC,GAC5C,IACAglC,EAD2B,2BACY/wC,KAAK+L,GAAOA,EAAM,UAAYA,EACrEilC,EAAc/nC,SAASC,cAAc,KACrC8nC,EAAYt0B,aAAa,OAAQq0B,GACjC,IAAIE,EAAmBf,UAAUC,SAASa,EAAa,CAAEE,UAAU,IACnEC,EAAmBplC,EAAMA,EAAIlN,QAAQ,KAAM,IAAM,GACjD,OAAOuH,OAAOoM,KAAKoX,QAAQunB,GAAoB,KAAOF,EAAiBrwB,MAQzExa,OAAOoM,KAAK4+B,eAAiB,SAAUryC,GACrC,IAAI4Y,EAAQ5Y,GAAQ,GAChBsyC,EAAiB,GAErB,GAAqB,iBAAV15B,EAAoB,CAC7B,IAAI25B,EAAsBlrC,OAAOoM,KAAK0X,UAAUvS,GAEhD05B,EAAiBjrC,OAAOoM,KAAK++B,aAAaD,GAG5C,OAAOD,GAQTjrC,OAAOoM,KAAK++B,aAAe,SAAUzzC,GACnC,IAAIyI,EAASzI,GAAO,GAQpB,OAFAyI,GADAA,GADAA,GADAA,GADAA,EAASA,EAAO1B,WAAW,IAAK,UAChBA,WAAW,IAAK,UAChBA,WAAW,IAAK,QAAQA,WAAW,IAAK,SACxCA,WAAW,IAAM,SAASA,WAAW,IAAK,SAASA,WAAW,IAAK,UACnEhG,QAAQ,gCAAiC,eAW3DuH,OAAOoM,KAAKg/B,iBAAmB,SAAU9kB,EAAK+kB,GAI5C,GAAIA,EAAKC,kBACPD,EAAKE,QACLF,EAAKC,kBAAkBhlB,EAAKA,QAGvB,GAAI+kB,EAAKG,gBAAiB,CAC/B,IAAIC,EAAQJ,EAAKG,kBACjBC,EAAMC,UAAS,GACfD,EAAME,QAAQ,YAAarlB,GAC3BmlB,EAAMG,UAAU,YAAatlB,GAC7BmlB,EAAMI,WAWV7rC,OAAOoM,KAAK0/B,iBAAmB,SAAUC,GAGvC,IAAIC,EAAY,EAGhB,GAAInpC,SAASopC,UAAW,CAGtBF,EAAOR,QAGP,IAAIW,EAAOrpC,SAASopC,UAAUE,cAG9BD,EAAKN,UAAU,aAAcG,EAAOx6B,MAAMna,QAG1C40C,EAAYE,EAAK7qC,KAAKjK,YACb20C,EAAOK,gBAA2C,KAAzBL,EAAOK,kBACzCJ,EAAYD,EAAOK,gBAGrB,OAAOJ,GAQThsC,OAAOoM,KAAKigC,YAAc,SAAU96B,GAGlC,OAFAA,EAAQA,GAAS,IAEJ9Y,QAAQ,qCAAsC,SAM7DuH,OAAOoM,KAAKkgC,iBAAmB,SAAUre,GACvC,IAAIz0B,EAAMy0B,EAAK92B,MAAM,KAerB,OAdAkD,KAAKkyC,mBAAqBlyC,KAAKkyC,oBAAsB,GAcjDte,KAAQ5zB,KAAKkyC,mBACRlyC,KAAKkyC,mBAAmBte,GAExB5zB,KAAKkyC,mBAAmBte,GAfjC,SAA6Bz0B,GAC3B,IAAIgzC,EAAWxsC,OAAOoM,KAAKqgC,oBAE3B,GAAoB,iBAATxe,QAAwC,IAAZue,EAAvC,CAGA,IADA,IAAIE,EAAQF,EACHv1C,EAAI,EAAGkwB,EAAM3tB,EAAIpC,OAAQH,EAAIkwB,EAAKlwB,IAEzC,QAAqB,KADrBy1C,EAAQA,EAAMlzC,EAAIvC,KACgB,OAEpC,OAAOy1C,GAKgCC,CAAoBnzC,IAO/DwG,OAAOoM,KAAKqgC,kBAAoB,WAC9B,IAAIG,EAAsBr1C,OAAO8N,cAAgBA,cAAgB,GAMjE,OAJIrF,OAAOoM,KAAK01B,kBAAsD,oBAA3B+K,yBAA2C7sC,OAAOoM,KAAKoX,QAAQqpB,0BACxGD,EAAoBJ,SAAW3jC,KAAKC,MAAM+jC,wBAA0B,OAG/DD,EAAoBJ,UAM7BxsC,OAAOoM,KAAK0gC,oBAAsB,WAChC9sC,OAAOoM,KAAKmgC,wBAAqB90C,GAQnCuI,OAAOoM,KAAK2gC,eAAiB,SAAU5sC,GACrC,OAAOA,IAAWA,EAAOvJ,MAAwB,UAAhBuJ,EAAOvJ,MAAoBuJ,EAAOyQ,QAA4B,UAAlBzQ,EAAOyQ,QAAsBzQ,EAAO6C,MAAwB,kBAAhB7C,EAAO6C,OAalIhD,OAAOoM,KAAK4gC,WAAa,SAAUz7B,GACjC,GAAIA,MAAAA,EAAuC,CACzC,GAAIlb,EAAEiB,QAAQia,GAAQ,CAEpB,IAAK,IAAIta,EAAI,EAAGG,EAASma,EAAMna,OAAQH,EAAIG,EAAQH,IACjC,MAAZsa,EAAMta,IAAiC,kBAAZsa,EAAMta,MACQ,IAAvC+I,OAAOoM,KAAKoL,aAAajG,EAAMta,IACjCsa,EAAMta,GAAK+I,OAAOuG,aAAaJ,YAAY,uBAEK,IAAvCnG,OAAOoM,KAAKoL,aAAajG,EAAMta,MACxCsa,EAAMta,GAAK+I,OAAOuG,aAAaJ,YAAY,uBAG/CoL,EAAMta,GAAK+I,OAAOoM,KAAKw9B,aAAar4B,EAAMta,IAG5C,OAAOsa,EAAMjZ,KAAK,OAElB,OAAO0H,OAAOoM,KAAKw9B,aAAar4B,GAGlC,MAAO,IAYXvR,OAAOoM,KAAK6gC,mBAAqB,SAAUC,EAAUC,EAAMC,GAezD,MAZ0B,WAAtBr3C,QAAQm3C,GACGltC,OAAOoM,KAAK4gC,WAAWE,GACP,iBAAbA,EACZE,EACWptC,OAAOoM,KAAKw9B,aAAasD,GAEzBltC,OAAOoM,KAAKihC,iBAAiBH,EAAUC,GAGzCD,GAYjBltC,OAAOoM,KAAKihC,iBAAmB,SAAUH,EAAUC,GACjD,IAAIx0C,EAAOqH,OAAOoM,KAAKigC,YAAYc,GAAM1uC,WAAW,IAAK,IACrD6uC,EAAQ,IAAI92B,OAAO,0BAA4B7d,EAAO,0BAA2B,MAErF,OAAOqH,OAAOoM,KAAKw9B,aAAasD,GAAUz0C,QAAQ60C,EAAO,wBAO3DttC,OAAOoM,KAAKmhC,qBAAuB,WACjC,IAAIC,EAAa,GACbC,EAAmB,EACnBC,EAAcn2C,OAAOo2C,OAAO3gC,MAC5B4gC,EAAer2C,OAAOo2C,OAAO5gC,OAcjC,MAZI,eAAgB4gC,OAClBF,EAAmBE,OAAOE,WAAaF,OAAOG,YACrC,qBAAsBv2C,SAC/Bk2C,EAAmBl2C,OAAOk2C,kBAG5BA,EAAmB3qB,OAAO2qB,EAAiBrZ,QAAQ,IAE/CsZ,GAAeA,EAAc,GAAKE,GAAgBA,EAAe,IACnEJ,EAAaE,EAAcD,EAAmB,IAAMG,EAAeH,GAG9DD,GAOTxtC,OAAOoM,KAAK2hC,cAAgB,WAS1B,OANI/tC,OAAOoM,KAAK01B,iBACoC,oBAA9BkM,2BAA8ChuC,OAAOoM,KAAKoX,QAAQwqB,2BAAyD,GAA5BA,0BAEtGhuC,OAAOoM,KAAKmhC,wBAW7BvtC,OAAOoM,KAAK6hC,cAAgB,SAAUr3C,GACpC,YAAoB,IAATA,EAA6BA,EAEjCA,EACP6B,QAAQ,aAAc,IACtBA,QAAQ,SAAU,IAClBA,QAAQ,UAAW,KAQrBuH,OAAOoM,KAAK8hC,mBAAqB,SAAUt3C,GACzC,YAAoB,IAATA,EAA6BA,EAEjCA,EACP6B,QAAQ,QAAS,IACjBJ,eAOF2H,OAAOoM,KAAK+hC,yBAA2B,SAAUlhC,EAAQsd,GACvD,IAAI5rB,EAAW,4BACX4rB,EACFl0B,EAAEsI,EAAUsO,GAAQsd,OAEpBl0B,EAAEsI,EAAUsO,GAAQqe,QAQxBtrB,OAAOoM,KAAKgiC,gBAAkB,SAAUC,GAEtC,YADwB52C,IAApBuI,OAAOwsC,WAAwBxsC,OAAOwsC,SAAW,KACjB,IAA7BxsC,OAAOwsC,SAAS6B,IAQzBruC,OAAOoM,KAAKkiC,OAAS,SAAUC,GAC7B,MAAO,kBAAkB30C,KAAK20C,IAQhCvuC,OAAOoM,KAAKk8B,SAAW,SAAUkG,EAAMC,GACrC,IACE,OAAOD,IACP,MAAO7pC,GACP,MAAyB,mBAAX8pC,EAAwBA,IAAWA,IAOrDzuC,OAAOoM,KAAKtE,KAAO,SAAU5M,EAAGwzC,GAC9B,IAAIC,OAAmCl3C,IAAlBi3C,EAA8B,GAAKA,EAGxD,OAFAC,EAAe71C,KAAKoC,GAEb,CACL0zC,KAAM,SAAc1zC,GAClB,OAAO8E,OAAOoM,KAAKtE,KAAK5M,EAAGyzC,IAE7BE,IAAK,SAAaC,GAChB,OAAOH,EAAeI,QAAO,SAAUC,EAAQ9zC,GAC7C,OAAOA,EAAE8zC,KACRF,MAQT,SAAUz4C,GAER,IAMIwgB,EAAQ,SAAeoa,EAAMge,GAC/B,OAAOC,iBAAiBje,EAAM,MAAM/a,iBAAiB+4B,IAOnDE,EAAS,SAAgBle,GAC3B,MAAO,gBAAgBr3B,KALV,SAAkBq3B,GAC/B,OAAOpa,EAAMoa,EAAM,YAAcpa,EAAMoa,EAAM,cAAgBpa,EAAMoa,EAAM,cAI7Cme,CAASne,KAIvC56B,EAAEg5C,eAAiB,SAAUpe,GAC3B,GAAMA,aAAgBqe,aAAere,aAAgBse,WAArD,CAIA,IAFA,IAAIC,EAtBQ,SAASC,EAAQxe,EAAMue,GACnC,OAAwB,OAApBve,EAAKjyB,WAA4BwwC,EAE9BC,EAAQxe,EAAKjyB,WAAYwwC,EAAG91C,OAAO,CAACu3B,KAmBlCwe,CAAQxe,EAAKjyB,WAAY,IAEzB/H,EAAI,EAAGA,EAAIu4C,EAAGp4C,OAAQH,GAAK,EAClC,GAAIk4C,EAAOK,EAAGv4C,IAAK,OAAOu4C,EAAGv4C,GAG/B,OAAO4L,SAAS6sC,kBAAoB7sC,SAAS+tB,kBA9BjD,CAgCE13B,QAEF8G,OAAOoM,KAAKujC,WAAa,SAAUhsC,QACY,IAAlC3D,OAAO4vC,wBAChB5vC,OAAO4vC,uBAAyB,IAAI1Y,MAAM2Y,OAAOC,YAAYz5C,EAAE,QAAS,CACtE05C,KAAM,OACNC,gBAAgB,EAChBt0C,KAAM,SAAciJ,GAClBuyB,MAAMtqB,GAAGqjC,SAAS55C,EAAE,aAAa,GACjCsN,EAAOusC,SAAWvsC,EAAOusC,aAI7BlwC,OAAO4vC,uBAAuBO,eAAiB,SAAUxrC,EAAGoX,GAC1D1hB,KAAK+1C,SAASzrC,EAAGoX,KAGnBpY,EAAOusC,SAAWvsC,EAAOusC,WAO7BlwC,OAAOoM,KAAKikC,gBAAkB,WAC5B,MAAwC,oBAA1BC,wBAA6F,IAApDtwC,OAAOoM,KAAKoL,aAAa84B,wBAOlFtwC,OAAOoM,KAAKmkC,oBAAsB,WAChC,MAA4C,oBAA9BC,4BAAqG,IAAxDxwC,OAAOoM,KAAKoL,aAAag5B,4BAMtFxwC,OAAOoM,KAAKqkC,iBAAmB,WAC7B,MAA4B,oBAAdC,YAAqE,IAAxC1wC,OAAOoM,KAAKoL,aAAak5B,YAOtE1wC,OAAOoM,KAAKukC,cAAgB,SAAUh4C,IACpC,IAAIqH,OAAOya,WAAWC,QAAQC,QAASi2B,aAAaj4C,IAOtDqH,OAAOoM,KAAKykC,kBAAoB,SAAUl4C,IACxC,IAAIqH,OAAOya,WAAWC,QAAQC,QAASm2B,iBAAiBn4C,IAM1DqH,OAAOoM,KAAK2kC,gBAAkB,WAC5B,OAAO,SAAU1pC,EAASuB,GACxB,IAAIjC,EAAQtQ,EAAEuQ,YACd,IAAI5G,OAAOya,WAAWC,QAAQC,QAASq2B,eAAerqC,GACtDA,EAAMI,MAAK,SAAUkqC,EAAQC,EAAUC,GACrC9pC,EAAQ,CACN4pC,OAAQA,EACRC,SAAUA,EACVC,KAAMA,OAEPxgC,MAAK,WACNtJ,EAAQ,SASdrH,OAAOoM,KAAKglC,aAAe,SAAU7/B,GACnC,GAAc,IAAVA,EAAa,OAAO,EACxB,GAAIA,MAAAA,GAAmD,KAAVA,EAAc,OAAO,EAClE,GAAqB,gBAAVA,EAAmB,OAAwB,IAAjBA,EAAMna,OAC3C,GAA+C,mBAA3C+pB,OAAO/qB,UAAUyf,SAAStb,MAAMgX,GAA6B,OAAwB,IAAjBA,EAAMna,OAE9E,GAA+C,oBAA3C+pB,OAAO/qB,UAAUyf,SAAStb,MAAMgX,GAA8B,CAChE,IAAK,IAAI1U,KAAO0U,EACd,GAAIA,EAAMrV,eAAeW,KAASmD,OAAOoM,KAAKglC,aAAa7/B,EAAM1U,IAC/D,OAAO,EAIX,OAAO,EAGT,OAAO,GAUTmD,OAAOoM,KAAKilC,yBAA2B,WAChCrxC,OAAOsxC,iBACVtxC,OAAOsxC,eAAiB,KAO5BtxC,OAAOoM,KAAKmlC,uBAAyB,WAEnC,OADAvxC,OAAOoM,KAAKilC,2BACLrxC,OAAOsxC,eAAeE,aAM/BxxC,OAAOoM,KAAKqlC,iCAAmC,WAE7C,OADAzxC,OAAOoM,KAAKilC,2BACLrxC,OAAOsxC,eAAeI,kBAM/B1xC,OAAOoM,KAAKulC,uBAAyB,SAAUC,EAAmBC,GAChE7xC,OAAOoM,KAAKilC,2BACZrxC,OAAOsxC,eAAeE,YAAcI,EACpC5xC,OAAOsxC,eAAeI,iBAAmBG,GAM3C7xC,OAAOoM,KAAK0lC,yBAA2B,WACjC9xC,OAAOsxC,iBACTtxC,OAAOsxC,eAAeE,YAAc,KACpCxxC,OAAOsxC,eAAeI,iBAAmB,OAO7C1xC,OAAOoM,KAAK2lC,qBAAuB,WACjC/xC,OAAOsxC,eAAeU,SAAW,aAMnChyC,OAAOoM,KAAK6lC,YAAc,WACxB,OAAIjyC,OAAOoM,KAAK21B,wBACVphB,gBAA6C,IAAzBA,UAAUuxB,YAAoD,oBAAfC,cAC9DxxB,UAAUuxB,WAAWt7C,MAAQu7C,WAAWC,MAAqC,WAA7BzxB,UAAUuxB,WAAWt7C,OAErEoJ,OAAOoM,KAAK01B,kBAAgE,WAA3C,GAAK1U,oBAAoB/0B,iBAC5Dd,OAAOopB,WAAYppB,OAAOopB,UAAU0xB,SAW/CryC,OAAOoM,KAAKkmC,sBAAwB,SAAUC,GAW5C,IAVA,IAAIC,EAEAC,EAAY,CAChB,+HACA,uCAEI9sC,GAAO4sC,GAAW,IACtB9zC,WAAW,MAAQ,IACnBA,WAAW,KAAO,IAEX+zC,EAAWC,EAAU33C,SAAS,CACnC,IAAI43C,EAAU,IAAIl8B,OAAOg8B,EAAU,KACnC,GAA2B,OAAvB7sC,EAAI6D,MAAMkpC,GAAmB,OAAO,EAG1C,OAAO,GAgBT1yC,OAAOoM,KAAKumC,iBAAmB,SAAU1wC,GACvC,SAAS2wC,EAAY1oC,GACnB7T,EAAE6T,EAASjI,GAAS1E,SAASmN,KAAK,OAAO9R,SAEzCvC,EAAE6T,EAASjI,GAASS,MAAM,kYAK1BrM,EAAE6T,EAASjI,GAAS1E,SAASmN,KAAK,sBAAsBtD,KAAK,OAAQ,YACrE/Q,EAAE6T,EAASjI,GAAS1E,SAASmN,KAAK,OAAOghB,MAAMmnB,GAAS,IAG1D,SAASC,EAAY5oC,GACnB7T,EAAE6T,EAASjI,GAAS1E,SAASmN,KAAK,OAAO9R,SAEzCvC,EAAE6T,EAASjI,GAASS,MAAM,smBAI1BrM,EAAE6T,EAASjI,GAAS1E,SAASmN,KAAK,0BAA0BtD,KAAK,OAAQ,QACzE/Q,EAAE6T,EAASjI,GAAS1E,SAASmN,KAAK,OAAOghB,MAAMmnB,GAAS,IAG1D,SAASA,EAASE,GAChB,OAAO,SAAU7oC,GACf,GAAI6oC,EAAQ,CACV,IAAIC,EAAY38C,EAAEgE,MAAM+M,KAAK,UAAY,GACrCmpB,EAAQl6B,EAAEgE,MAAMkD,SAASmN,KAAK,SAChB,kBAAdsoC,EACFF,EAAYviB,GAEZqiB,EAAYriB,QAGdl6B,EAAEA,EAAE6T,EAASjI,GAAS1E,SAASmN,KAAK,OAAO,IAAIghB,OAAM,SAAUunB,GAC7D,IAAID,EAAY38C,EAAEgE,MAAM+M,KAAK,UAAY,GACrCmpB,EAAQl6B,EAAEgE,MAAMkD,SAASmN,KAAK,SAChB,kBAAdsoC,EACFF,EAAYviB,GAEZqiB,EAAYriB,OAOtBl6B,EAAE4L,GAASyI,KAAK,0BAA0B3J,KAAI,SAAU0H,EAAOyB,GACzDzB,EAAQ,IACVmqC,EAAY1oC,GACZ2oC,GAAS,EAATA,CAAgB3oC,QAatBlK,OAAOoM,KAAK8mC,mBAAqB,SAAUhpC,EAASipC,EAAIC,GACtD,GAAkB,mBAAPD,EACT,MAAM,IAAIp2B,MAAM,8EAOe,KADjCq2B,EAAa/8C,EAAEiB,QAAQ87C,GAAcA,EAAa,IACvC1vC,QAAQ,UAA+B0vC,EAAWt6C,KAAK,SAElEoR,EAAQyC,KAAK,YAAY,SAAUhI,GACjCA,EAAE0uC,gBAAkB1uC,EAAE0uC,iBACtB1uC,EAAE2uC,iBAAmB3uC,EAAE2uC,kBAEP,KAAZ3uC,EAAE4uC,OAA4B,KAAZ5uC,EAAE4uC,OACtBJ,EAAGxuC,MAIPuF,EAAQyC,KAAKymC,EAAW96C,KAAK,OAAO,SAAUqM,GAC5CA,EAAE0uC,gBAAkB1uC,EAAE0uC,iBACtB1uC,EAAE2uC,iBAAmB3uC,EAAE2uC,kBACvBH,EAAGxuC,OAQP3E,OAAOoM,KAAKonC,sBAAwB,SAAUz/B,GAC5C,IAAIpQ,EAASoQ,EAAQwuB,mBAAmBE,YACxC,GAAIziC,OAAOoM,KAAKmW,2BAA6BviB,OAAOoM,KAAKi2B,wBAAyB,CAChF,IAAIoR,EAAa9vC,EAAO8vC,gBACE,IAAfA,GACTA,EAAWC,qBAAqB3/B,KAStC/T,OAAOoM,KAAKunC,yBAA2B,SAAUC,GAC/C,IAAIvF,EAAUruC,OAAO+yB,UAAY/yB,OAAO+yB,SAAS6gB,IAAgB,KAEjE,OAA6C,IAAtC5zC,OAAOoM,KAAKoL,aAAa62B,IAMlCruC,OAAOoM,KAAKynC,mBAAqB,SAAUC,UAAWC,cACpD,GAAID,UACF,IAEE,IAAIE,gBAAkB,+CAOtB,OANAA,iBAAmB,cAAgBF,UAAY,sBAC/CE,iBAAmB,QACnBA,iBAAmB,YACnBA,gBAAkBlpC,KAAKkpC,iBAGhBA,gBAAgBD,cACvB,MAAOpvC,GACPmF,QAAQC,IAAIpF,GAKhB,OAAO,MAMT3E,OAAOoM,KAAK8E,UAAY,CACtB+iC,GAAM,KAAMC,QAAS,KAAMC,QAAS,KAAMC,QAAS,KAAMC,QAAS,KAAMC,QAAS,KAAMC,QAAS,KAAMC,QAAS,KAAMC,QAAS,KAAMC,QAAS,KAAMC,QAAS,KAAMC,QAAS,KAAMC,QAAS,KAAMC,QAAS,KAAMC,QAAS,KAAMC,QAAS,KAAMC,QAAS,KAAMC,QAAS,KAAMC,QAAS,KAAMC,QAAS,KAAMC,QAAS,KAClTC,GAAM,QAASC,QAAS,QAASC,QAAS,QAASC,QAAS,QAASC,SAAU,QAASC,QAAS,QAASC,QAAS,QAASC,QAAS,QAASC,QAAS,QAASC,QAAS,QAASC,QAAS,QAASC,QAAS,QAASC,QAAS,QAASC,QAAS,QAASC,QAAS,QAASC,QAAS,QAASC,QAAS,QACvSC,GAAM,KAAMC,QAAS,KAAMC,QAAS,KAAMC,QAAS,KAAMC,QAAS,KAAMC,QAAS,KACjFC,GAAM,KAAMC,QAAS,KAAMC,QAAS,KAAMC,QAAS,KAAMC,QAAS,KAAMC,QAAS,KAAMC,QAAS,KAChGC,GAAM,KAAMC,QAAS,KAAMC,QAAS,KACpCC,GAAM,KAAMC,QAAS,KAAMC,QAAS,KACpCC,GAAM,KAAMC,QAAS,KAAMC,QAAS,KACpCC,GAAM,QAASC,QAAS,QAASC,QAAS,QAC1CC,GAAM,KAAMC,QAAS,KACrBC,GAAM,KAAMC,QAAS,KACrBC,GAAM,KAAMC,QAAS,KAAMC,QAAS,KAAMC,QAAS,KAAMC,QAAS,KAAMC,QAAS,KAAMC,QAAS,KAAMC,QAAS,KAAMC,QAAS,KAAMC,QAAS,KAAMC,QAAS,KAAMC,QAAS,KAAMC,QAAS,KAAMC,QAAS,KAAMC,QAAS,KAAMC,QAAS,KAAMC,QAAS,KACtPC,GAAM,KAAMC,QAAS,KAAMC,QAAS,KAAMC,QAAS,KAAMC,UAAW,KAAMC,QAAS,KAAMC,QAAS,KAAMC,UAAW,MAUrH55C,OAAOoM,KAAKytC,kBAAoB,SAAUtoC,EAAOuoC,EAAYxf,GAC3D,IAAIyf,EAAWxoC,EAEf,IACQA,GAA0B,iBAAVA,IACpBwoC,EAAW/5C,OAAOoM,KAAKkpB,cAAc+E,qBAAqB9oB,EAAO+oB,IAG/Dyf,GAAyB,IAAbA,GAA8B,MAAZA,IAC3Bzf,EAGHyf,EAASC,gBAAgB,GAFzBD,EAASvf,SAAS,EAAG,EAAG,EAAG,GAK7Buf,EAAW/5C,OAAOoM,KAAKkpB,cAAcD,WAAW0kB,EAAUD,IAE5D,MAAOn1C,IAGT,OAAOo1C,GAOT/5C,OAAOoM,KAAK6tC,iBAAmB,SAAUrG,GACvC,IAAIvF,EAAUruC,OAAO+yB,UAAY/yB,OAAO+yB,SAAS6gB,GAEjD,OAAO5zC,OAAOoM,KAAKoL,aAAa62B,IAWlCruC,OAAOoM,KAAK8tC,uBAAyB,WACnC,IAAIC,EAAsB,mBAE1B,OADAA,EAAsBA,EAAoBzgD,OAAO,IAAKsG,OAAOoM,KAAKguC,gBAYpEp6C,OAAOoM,KAAKiuC,qBAAuB,WACjCr6C,OAAOoM,KAAKqvB,oBAAoBz7B,OAAOoM,KAAK8tC,yBAA0BrxC,KAAKmT,UAAUhc,OAAOoM,KAAKkuC,+BAOnGt6C,OAAOoM,KAAKkuC,0BAA4B,WACtC,MAAO,CACLC,YAAev6C,OAAOoM,KAAKouC,gCAC3BC,SAAYz6C,OAAOoM,KAAKsuC,6BACxBC,WAAc36C,OAAOoM,KAAKwuC,+BAC1BC,mBAAsB76C,OAAOoM,KAAK0uC,gCAClCC,cAAiB/6C,OAAOoM,KAAK4uC,oCAQjCh7C,OAAOoM,KAAKouC,8BAAgC,WAC1C,MAAO,CACLS,gBAAmB,KACnBC,YAAe,IAQnBl7C,OAAOoM,KAAKsuC,2BAA6B,WACvC,MAAO,CACLS,cAAiB,MACjBC,cAAiB,KACjBC,UAAa,OASjBr7C,OAAOoM,KAAKwuC,6BAA+B,WACzC,MAAO,CACLU,YAAe,KACfC,gBAAmB,KACnBC,WAAc,UAQlBx7C,OAAOoM,KAAK0uC,8BAAgC,WAC1C,MAAO,CACLW,eAAkB,KAQtBz7C,OAAOoM,KAAK4uC,gCAAkC,WAC5C,MAAO,SAWTh7C,OAAOoM,KAAKsvC,oBAAsB,WAChC,IAAIC,EAAmB37C,OAAOoM,KAAKwvB,oBAAoB57B,OAAOoM,KAAK8tC,0BASnE,OAPKyB,IAEH37C,OAAOoM,KAAKiuC,uBAEZsB,EAAmB37C,OAAOoM,KAAKwvB,oBAAoB57B,OAAOoM,KAAK8tC,2BAG1DrxC,KAAKC,MAAM6yC,IAapB37C,OAAOoM,KAAKwvC,oBAAsB,SAAUX,EAAiBC,EAAYW,GACvE,IAAIF,EAAmB37C,OAAOoM,KAAKsvC,sBAC/BC,EAAiBpB,cACfoB,EAAiBpB,YAAYW,YAAcA,EAC7CS,EAAiBd,mBAAqB,KAC5B76C,OAAOoM,KAAKoX,QAAQq4B,IAAiBF,EAAiBpB,YAAYsB,cAAgBA,IAC5FF,EAAiBd,mBAAqB,OAK1Cc,EAAiBpB,YAAYU,gBAAkBA,EAC/CU,EAAiBpB,YAAYW,WAAarjC,SAASqjC,IAAe,GAClES,EAAiBpB,YAAYsB,kBAAsC,IAAhBA,EAA8BA,EAAe,KAG5FF,EAAiBhB,aACnBgB,EAAiBhB,WAAa36C,OAAOoM,KAAKwuC,gCAG5C56C,OAAOoM,KAAKqvB,oBAAoBz7B,OAAOoM,KAAK8tC,yBAA0BrxC,KAAKmT,UAAU2/B,KAQvF37C,OAAOoM,KAAK0vC,kCAAoC,SAAUL,GACxD,IAAIE,EAAmB37C,OAAOoM,KAAKsvC,sBAEnCC,EAAiBd,mBAAqBc,EAAiBd,oBAAsB,GAC7Ec,EAAiBd,mBAAmBY,eAAiBA,GAAkB,GAEvEz7C,OAAOoM,KAAKqvB,oBAAoBz7B,OAAOoM,KAAK8tC,yBAA0BrxC,KAAKmT,UAAU2/B,KAQvF37C,OAAOoM,KAAK2vC,0BAA4B,SAAUlyC,GAChD,IAAImyC,EAAU,GACVC,EAAej8C,OAAOoM,KAAKwvB,oBAAoB,eACnD,IACE,IAAIsgB,EAAYrzC,KAAKC,MAAMmzC,GAC3BD,OAAkC,IAAjBE,EAAUryC,GAAqBhB,KAAKC,MAAMozC,EAAUryC,IAAOmyC,EAC5E,MAAOr3C,GACPq3C,EAAU,GAGZ,OAAOA,GASTh8C,OAAOoM,KAAK+vC,wBAA0B,SAAUtyC,EAAI0H,GAClD,IAAI0qC,EAAej8C,OAAOoM,KAAKwvB,oBAAoB,gBAAkB,KACjEsgB,EAAYrzC,KAAKC,MAAMmzC,GAE3BC,EAAUryC,GAAMhB,KAAKmT,UAAUzK,GAG/BvR,OAAOoM,KAAKqvB,oBAAoB,cAAe5yB,KAAKzH,OAAO+f,OAAOi7B,OAAO,GAAIF,MAQ/El8C,OAAOoM,KAAKiwC,8BAAgC,SAAUC,GACpD,IAAIX,EAAmB37C,OAAOoM,KAAKsvC,sBAEnCC,EAAiBW,YAAcA,GAAe,GAE9Ct8C,OAAOoM,KAAKqvB,oBAAoBz7B,OAAOoM,KAAK8tC,yBAA0BrxC,KAAKmT,UAAU2/B,KAUvF37C,OAAOoM,KAAKmwC,wBAA0B,SAAUnB,EAAex2B,EAAWy2B,GACxE,IAAIM,EAAmB37C,OAAOoM,KAAKsvC,sBAEnCC,EAAiBlB,SAASW,cAAgBA,GAAiB,KAC3DO,EAAiBlB,SAASU,cAAgBv2B,GAAa,MACvD+2B,EAAiBlB,SAASY,UAAYA,GAAa,KAEnDr7C,OAAOoM,KAAKqvB,oBAAoBz7B,OAAOoM,KAAK8tC,yBAA0BrxC,KAAKmT,UAAU2/B,KASvF37C,OAAOoM,KAAKowC,0BAA4B,SAAUlB,EAAaC,EAAiBC,GAC9E,IAAIG,EAAmB37C,OAAOoM,KAAKsvC,sBAEnCC,EAAiBhB,WAAWW,YAAcA,GAAe,KACzDK,EAAiBhB,WAAWY,gBAAkBA,GAAmB,KACjEI,EAAiBhB,WAAWa,WAAaA,GAAc,QAEvDx7C,OAAOoM,KAAKqvB,oBAAoBz7B,OAAOoM,KAAK8tC,yBAA0BrxC,KAAKmT,UAAU2/B,KAQvF37C,OAAOoM,KAAKqwC,6BAA+B,SAAUC,GACnD,IAAIf,EAAmB37C,OAAOoM,KAAKsvC,sBAEnCC,EAAiBZ,cAAgB2B,GAAa,GAE9C18C,OAAOoM,KAAKqvB,oBAAoBz7B,OAAOoM,KAAK8tC,yBAA0BrxC,KAAKmT,UAAU2/B,KAWvF37C,OAAOoM,KAAKuwC,+BAAiC,WAC3C,IAAIhB,EAAmB37C,OAAOoM,KAAKsvC,sBAOnC,OALI17C,OAAOuG,cAAgE,MAAhDo1C,EAAiBpB,YAAYU,kBACtDU,EAAiBpB,YAAYU,gBAAkBj7C,OAAOuG,aAAaJ,YAAY,0CAEjFw1C,EAAiBpB,YAAYqC,cAA4D,IAA7CjB,EAAiBpB,YAAYW,WAElES,EAAiBpB,aAO1Bv6C,OAAOoM,KAAKywC,gCAAkC,WAE5C,OADuB78C,OAAOoM,KAAKsvC,sBACXnB,YAAYsB,cAOtC77C,OAAOoM,KAAK0wC,wBAA0B,WAEpC,OADuB98C,OAAOoM,KAAKsvC,sBACXjB,UAO1Bz6C,OAAOoM,KAAK2wC,0BAA4B,WAEtC,OADuB/8C,OAAOoM,KAAKsvC,sBACXf,YAO1B36C,OAAOoM,KAAK4wC,8BAAgC,WAE1C,OADuBh9C,OAAOoM,KAAKsvC,sBACXY,aAO1Bt8C,OAAOoM,KAAK6wC,kCAAoC,WAE9C,OADuBj9C,OAAOoM,KAAKsvC,sBACXb,oBAO1B76C,OAAOoM,KAAK8wC,6BAA+B,WAEzC,OADuBl9C,OAAOoM,KAAKsvC,sBACXX,eAW1B/6C,OAAOoM,KAAK+wC,uBAAyB,WACnCn9C,OAAOoM,KAAK0vB,uBAAuB97B,OAAOoM,KAAK8tC,2BAOjDl6C,OAAOoM,KAAKgxC,2BAA6B,WACvC,IAAIzB,EAAmB37C,OAAOoM,KAAKsvC,sBAE/BC,GAAoBA,EAAiBlB,WAEvCkB,EAAiBlB,SAAWz6C,OAAOoM,KAAKsuC,6BAExC16C,OAAOoM,KAAKqvB,oBAAoBz7B,OAAOoM,KAAK8tC,yBAA0BrxC,KAAKmT,UAAU2/B,MAQzF37C,OAAOoM,KAAKixC,6BAA+B,WACzC,IAAI1B,EAAmB37C,OAAOoM,KAAKsvC,sBAE/BC,GAAoBA,EAAiBW,cAEvCX,EAAiBW,YAAc,GAE/Bt8C,OAAOoM,KAAKqvB,oBAAoBz7B,OAAOoM,KAAK8tC,yBAA0BrxC,KAAKmT,UAAU2/B,MAIzF37C,OAAOoM,KAAKkxC,oBAAsB,WAChC,IAAIC,EAAmB,gBAEvB,OADAA,EAAmBA,EAAiB7jD,OAAO,IAAKsG,OAAOoM,KAAKguC,gBAI9Dp6C,OAAOoM,KAAKoxC,mBAAqB,SAAUC,GACzCz9C,OAAOoM,KAAKqvB,oBAAoBz7B,OAAOoM,KAAKkxC,sBAAuBG,EAAY5nC,aAGjF7V,OAAOoM,KAAKsxC,iBAAmB,WAC7B,IAAIC,EAAgB39C,OAAOoM,KAAKwvB,oBAAoB57B,OAAOoM,KAAKkxC,uBAChE,OAAOK,EAAgB,IAAI5vC,KAAK4vC,QAAiBlmD,GAGnDuI,OAAOoM,KAAKguC,YAAc,WAIxB,OAHoC,oBAAfwD,aACfA,YAAc,IAAMt4C,oBAAsB,IAAMu4C,eAAexlD,cACrE,6CACeylD,YASjB99C,OAAOoM,KAAK2xC,cAAgB,SAAUC,GACpC,IAAIC,EAAiBj+C,OAAO+O,SAASmvC,cACrCC,EAAWn+C,OAAOya,WAAWC,QAAQC,OAOrCyjC,EAAU,CACRC,IAAK,SAAaC,GAChBt+C,OAAO0tB,OAAO,sBAAuB4wB,EAAQ,CAAE3wB,QAAS,MAE1DvuB,IAAK,WACH,OAAOY,OAAO0tB,OAAO,yBAGzB6wB,EAAW,CACTF,IAAK,SAAaC,GAChB,IAAIE,EAZS,UAYgBF,EAZN,SAAW,QAalCL,EAAeQ,iBAAiBR,EAAe/jD,KAAKwkD,gBAAiBF,IAEvEp/C,IAAK,WACH,IAAIu/C,EAAeV,EAAeW,cAAcX,EAAe/jD,KAAKwkD,iBACpE,MApBa,WAoBGC,EApBQR,EAASU,+BAAiCV,EAASW,sCAuB/EC,EAAU/+C,OAAOoM,KAAK4yC,SAAWZ,EAAUG,EAI3C,YAFoB9mD,IAAhBumD,GACJe,EAAQV,IAAIL,GACLe,EAAQ3/C,OAGjBY,OAAOoM,KAAK6yC,qBAAuB,WACjC,IAAIC,EAAgC,oBAAftB,aACfA,YAAc,IAAMt4C,oBAAsB,IAAMu4C,eAAexlD,cACrE,4CACI8mD,EAAoB,iBAExB,OADAA,EAAoBA,EAAkBzlD,OAAO,IAAKwlD,IAIpDl/C,OAAOoM,KAAKgzC,kBAAoB,WAC9B,IAAIC,EAAiBr/C,OAAOoM,KAAKwvB,oBAAoB57B,OAAOoM,KAAK6yC,wBAEjE,OADsB5oD,EAAEuB,OAAQoI,OAAOoM,KAAKoX,QAAQ67B,GAA+C,GAA7Bx2C,KAAKC,MAAMu2C,GAAsBh6C,aAAamnC,WAItHxsC,OAAOoM,KAAKkzC,oBAAsB,SAAUC,GAC1C,IAAIC,EAAiBx/C,OAAOoM,KAAKgzC,oBAC7BK,EAAkBppD,EAAEuB,OAAO4nD,EAAgBD,GAC/Cv/C,OAAOoM,KAAKqvB,oBAAoBz7B,OAAOoM,KAAK6yC,uBAAwBp2C,KAAKmT,UAAUyjC,KAGrFz/C,OAAOoM,KAAKszC,4BAA8B,WACxC,IAAIC,EAAa,IACbJ,EAAiBv/C,OAAOoM,KAAKgzC,oBAKjC,OAJIG,GAAkBA,EAAeK,oBACQ,IAA7CL,EAAeK,kBAAkBC,UAC/BF,EAAaJ,EAAeK,kBAAkBruC,OAEzCouC,GAGT3/C,OAAOoM,KAAK0zC,UAAY,SAAUC,EAAMC,GACtC,IAAI18C,EAAM,IAAIjN,EAAEuQ,SACZq5C,EAAS,IAAIC,WASjB,OARAD,EAAOE,cAAcJ,GACrBE,EAAOG,UAAY,WACjBC,WAAaJ,EAAO9/C,OAChB6/C,IACFK,WAAaA,WAAWlpD,MAAM,KAAK,IAErCmM,EAAI+D,QAAQg5C,aAEP/8C,GAMTtD,OAAOoM,KAAKk0C,WAAa,SAAUP,GACjC,IAAIz8C,EAAM,IAAIjN,EAAEuQ,SACZq5C,EAAS,IAAIC,WAOjB,OALAD,EAAOM,WAAWR,GAClBE,EAAOG,UAAY,WACjB98C,EAAI+D,QAAQ44C,EAAO9/C,SAGdmD,EAAIgE,WAcbtH,OAAOoM,KAAKm6B,WAAa,SAAUtvB,GACjC,IAAIuvB,EAEJ,IACE,QAAgC,IAArBvvB,EAAW1F,OAA0BvR,OAAOoM,KAAKoX,QAAQvM,EAAW1F,OAW7Ei1B,EAAavvB,EAAWtR,KAAO,OAXsD,CACrF,IAAIhN,EAAOse,EAAW1F,MAClB5L,EAAMhN,EAAK4Y,OAAS5Y,EAExB,GAAI2b,MAAMhd,QAAQqO,GAAM,CACtB,IAAI8gC,EAAU9gC,EAAI7K,QAClB0rC,EAAalyB,MAAMhd,QAAQmvC,GAAWA,EAAQnuC,KAAK,IAAMmuC,OAEzDD,EAAa7gC,GAMjB6gC,EAAcxmC,OAAOoM,KAAKoX,QAAQgjB,GAAsF,GAAxE,yBAA2BA,EAAW/tC,QAAQ,mBAAoB,OAErD,IAA3C+tC,EAAW9iC,QAAQ,qBACrC8iC,EAAa,IAEb,MAAOtzB,GACPszB,EAAa,GAGf,OAAOA,GAGTxmC,OAAOoM,KAAKm6B,WAAa,SAAUia,EAAY76C,GAC7C,IAAI6gC,EAEJ,IACE,QAA0B,IAAfga,GAA+BxgD,OAAOoM,KAAKoX,QAAQg9B,GAW5Dha,EAAa7gC,GAAO,OAXqD,CACzE,IAAIhN,EAAO6nD,EACPC,EAAS9nD,EAAK4Y,OAAS5Y,EAE3B,GAAI2b,MAAMhd,QAAQmpD,GAAS,CACzB,IAAIha,EAAUga,EAAO3lD,QACrB0rC,EAAalyB,MAAMhd,QAAQmvC,GAAWA,EAAQnuC,KAAK,IAAMmuC,OAEzDD,EAAaia,GAMjBja,EAAcxmC,OAAOoM,KAAKoX,QAAQgjB,GAAsF,GAAxE,yBAA2BA,EAAW/tC,QAAQ,mBAAoB,OAErD,IAA3C+tC,EAAW9iC,QAAQ,qBACrC8iC,EAAa,IAEb,MAAOtzB,GACPszB,EAAa,GAGf,OAAOA,GAGTxmC,OAAOoM,KAAKtC,QAAU,GACtB9J,OAAOoM,KAAKtC,QAAQC,IAAM,WACxB,GAAI,WAAYxS,QAAUyI,OAAOoM,KAAKm5B,qBAAsB,CAC1D,IAAI9rC,EAAO6a,MAAMle,UAAUme,MAAMzT,KAAKtG,WAClCuR,EAAUtS,EAAK,GACfkK,EAASlK,EAAKrC,OAAS,EAAIqC,EAAK8a,MAAM,GAAK,KAC/C,GAAI5Q,EACF,IAEE,YADAmG,QAAQC,IAAI,WAAagC,EAAU,QAAUlD,KAAKzH,OAAOuC,IAEzD,MAAOgB,KAGbmF,QAAQC,IAAIxP,MAAMF,KAAMG,YAG1BwF,OAAOoM,KAAKtC,QAAQoJ,MAAQ,WAC1B,GAAI,WAAY3b,QAAUyI,OAAOoM,KAAKm5B,qBAAsB,CAC1D,IAAI9rC,EAAO6a,MAAMle,UAAUme,MAAMzT,KAAKtG,WAClCuR,EAAUtS,EAAK,GACfkK,EAASlK,EAAKrC,OAAS,EAAIqC,EAAK8a,MAAM,GAAK,KAC/C,GAAI5Q,EACF,IAEE,YADAmG,QAAQoJ,MAAM,WAAanH,EAAU,QAAUlD,KAAKzH,OAAOuC,IAE3D,MAAOgB,KAGbmF,QAAQoJ,MAAM3Y,MAAMF,KAAMG,YAG5BwF,OAAOoM,KAAKs0C,WAAa,SAAUC,GACjCA,EAAMA,GAAO,GAEb,IAAK,IAAI1pD,EAAI,EAAGA,EAAIuD,UAAUpD,OAAQH,IAAK,CACzC,IAAIjB,EAAMwE,UAAUvD,GAEpB,GAAKjB,EAGL,IAAK,IAAI6G,KAAO7G,EACVA,EAAIkG,eAAeW,KACK,WAAtB9G,QAAQC,EAAI6G,IACV7G,EAAI6G,aAAgByX,OAAS,EACjCqsC,EAAI9jD,GAAO7G,EAAI6G,GAAK0X,MAAM,GAE1BosC,EAAI9jD,GAAO6jD,WAAWC,EAAI9jD,GAAM7G,EAAI6G,IAGtC8jD,EAAI9jD,GAAO7G,EAAI6G,IAKrB,OAAO8jD,GAGT3gD,OAAOoM,KAAKxU,OAAS,SAAU+oD,GAC7BA,EAAMA,GAAO,GAEb,IAAK,IAAI1pD,EAAI,EAAGA,EAAIuD,UAAUpD,OAAQH,IACpC,GAAKuD,UAAUvD,GAGf,IAAK,IAAI4F,KAAOrC,UAAUvD,GACpBuD,UAAUvD,GAAGiF,eAAeW,KAChC8jD,EAAI9jD,GAAOrC,UAAUvD,GAAG4F,IAI5B,OAAO8jD,GAOT3gD,OAAOoM,KAAKw0C,cAAgB,SAAUC,GACpC,QAA4B,IAAjBA,EAA8B,MAAO,UAEhD,IAAIjqD,EAAOiqD,EAAapoD,QAAQ,SAAU,IAAIJ,cAC9C,OAAO2H,OAAOoM,KAAK6hC,cAAcr3C,IAOnCoJ,OAAOoM,KAAK00C,kBAAoB,SAAUC,GAQxC,MAPY,CACVC,MAAS,WACTz3B,KAAQ,aACR03B,QAAW,aACXC,QAAW,SACX11B,OAAU,UAECu1B,IAAU,UAGzB/gD,OAAOoM,KAAK+0C,2BAA6B,WACvC,IAAIC,GAA2B,EAC3B7B,EAAiBv/C,OAAOoM,KAAKgzC,oBAMjC,OAJIG,GAAkBA,EAAe8B,oBAAkE,IAA7C9B,EAAe8B,kBAAkBxB,UACzFuB,GAA2B,GAGtBA,GAA4BphD,OAAOoM,KAAK41B,kBAGjDhiC,OAAOoM,KAAKk1C,0BAA4B,WACtC,IAAIC,GAA0B,EAC1BhC,EAAiBv/C,OAAOoM,KAAKgzC,oBAMjC,OAJIG,GAAkBA,EAAeiC,mBAAgE,IAA5CjC,EAAeiC,iBAAiB3B,UACvF0B,GAA0B,GAGrBA,GAA2BvhD,OAAOoM,KAAK41B,kBAGhDhiC,OAAOoM,KAAKq1C,2BAA6B,WACvC,IAAIC,GAA2B,EAC3BnC,EAAiBv/C,OAAOoM,KAAKgzC,oBAMjC,OAJIG,GAAkBA,EAAeoC,oBAAkE,IAA7CpC,EAAeoC,kBAAkB9B,UACzF6B,GAA2B,GAGtBA,GAA4B1hD,OAAOoM,KAAK41B,kBAOjDhiC,OAAOoM,KAAKw0C,cAAgB,SAAUC,GACpC,QAA4B,IAAjBA,EAA8B,MAAO,UAEhD,IAAIjqD,EAAOiqD,EAAapoD,QAAQ,SAAU,IAAIJ,cAC9C,OAAO2H,OAAOoM,KAAK6hC,cAAcr3C,IAGnCP,EAAEurD,IAAM,SAAUjpD,EAAMgC,GACtB,QAAalD,IAATkB,GAA8B,MAARA,GAA+B,GAAfA,EAAKvB,OAAa,OAAO,EACnE,IAAI+I,EAAS9J,EAAEwrD,KAAKlpD,EAAMgC,GAC1B,OAAiB,MAAVwF,QAA6B1I,IAAX0I,GAAwBA,EAAO/I,OAAS,GAGnEf,EAAEyrD,MAAQ,SAAUnpD,EAAMgC,GACxB,QAAalD,IAATkB,GAA8B,MAARA,GAA+B,GAAfA,EAAKvB,OAAa,OAAO,KACnE,IAAI+I,EAAS9J,EAAEwrD,KAAKlpD,EAAMgC,GAC1B,OAAiB,MAAVwF,QAA6B1I,IAAX0I,GAAyC,GAAjBA,EAAO/I,OAAc,KAAO+I,EAAO,IAGtF9J,EAAE0rD,QAAU,SAAUppD,EAAMirB,GAC1B,QAAansB,IAATkB,GAA8B,MAARA,GAA+B,GAAfA,EAAKvB,OAAa,MAAO,GACnE,IAAI+I,EAAS,GAMb,OALA9J,EAAE+H,KAAKzF,GAAM,SAAU1B,EAAGqL,QACX7K,IAAT6K,SAC2B7K,IAA3B0I,EAAOmC,EAAKshB,MAA0BzjB,EAAOmC,EAAKshB,IAAa,IACnEzjB,EAAOmC,EAAKshB,IAAW9qB,KAAKwJ,OAEvBnC,GAQTH,OAAOoM,KAAK41C,iBAAmB,SAAUC,EAAUC,GACjD,GAAI3qD,OAAOopB,WAAappB,OAAOopB,UAAUwhC,iBACvC5qD,OAAOopB,UAAUwhC,iBAAiBF,EAAUC,OACvC,CACL,IAAIv8C,EAAMpO,OAAO6qD,IAAIC,gBAAgBJ,GACjCK,EAAOz/C,SAASC,cAAc,KAElCw/C,EAAKzrC,MAAQ,gBACbhU,SAAS+nB,KAAK5lB,YAAYs9C,GAE1BA,EAAK9nC,KAAO7U,EACZ28C,EAAKC,SAAWL,EAEhBI,EAAK52B,QAELn0B,OAAO6qD,IAAII,gBAAgB78C,GAC3B28C,EAAKtjD,WAAWyjD,YAAYH,KAQhCtiD,OAAOoM,KAAKs2C,mBAAqB,SAAUC,GACzC,IAAIttC,EAAW,IAAIhf,EAAEuQ,SAkBrB,OAhBI+7C,GAAY,qBAAqB/oD,KAAK+oD,EAAS/rD,MACjDoJ,OAAOoM,KAAKk0C,WAAWqC,GAAU9vC,MAAK,SAAU1S,GAG5B,UAFP0I,KAAKC,MAAM3I,GAEbvJ,KACPye,EAASzM,OAAOzI,GAEhBkV,EAAShO,QAAQs7C,MAElBhyC,MAAK,SAAUiyC,GAChBvtC,EAASzM,OAAOg6C,MAGlBvtC,EAAShO,QAAQs7C,GAGZttC,EAAS/N,WAQlBtH,OAAOoM,KAAKy2C,YAAc,SAAUtxC,GAClC,IAAIuxC,EAAa,GACbC,EAAS,GAEb,MAAO,CACLrsD,IAAK,SAAassD,EAAmBj3C,GAUnC,MATgC,mBAArBi3C,EACTF,EAAWhqD,KAAK,CACd6B,SAAUqoD,EACVj3C,QAASA,IAGXjC,QAAQm5C,KAAK,8BAGR5oD,MAET6oD,SAAU,SAAkBC,GAC1BJ,EAAS,GAET,IACMD,GAAcA,EAAW1rD,OAAS,EACpC0rD,EAAWM,SAAQ,SAAUC,GAC3B,IAAIljD,EAASkjD,EAAU1oD,SAAS4W,GAC3BvR,OAAOoM,KAAKwW,UAAUziB,GAEfA,GACV4iD,EAAOjqD,KAAKuqD,EAAUt3C,SAAW,oBAFjCg3C,EAAOjqD,KAAK,0CAA4CuqD,EAAUt3C,YAMtEg3C,EAAOjqD,KAAK,kCAEd,MAAO6L,GACPmF,QAAQm5C,KAAKt+C,GASf,OALAw+C,EAAiB,CAAEJ,OAAQA,IAG3BD,EAAa,GAENzoD,MAETipD,QAAS,WACP,OAAOP,IAAWA,EAAO3rD,UGjgMvB,SAAWmsD,GAET,IAAIC,EAAmB,GAGvB,SAASC,EAAoBC,GAG3B,GAAIF,EAAiBE,GACnB,OAAOF,EAAiBE,GAAUC,QAGpC,IAAIC,EAASJ,EAAiBE,GAAY,CACxCC,QAAS,GACT95C,GAAI65C,EACJG,QAAQ,GAUV,OANAN,EAAQG,GAAU5iD,KAAK8iD,EAAOD,QAASC,EAAQA,EAAOD,QAASF,GAG/DG,EAAOC,QAAS,EAGTD,EAAOD,QAKhBF,EAAoB5/C,EAAI0/C,EAGxBE,EAAoBjsD,EAAIgsD,EAGxBC,EAAoBxoC,EAAI,GAGjBwoC,EAAoB,GAvC7B,CA0CA,CAEH,SAAUG,EAAQD,EAASF,GAMbA,EAAoB,IAC1B/nD,QAKR,SAAUkoD,EAAQD,EAASF,GAE9B,IAEIK,EAAUL,EAAoB,GA0BlC,SAASM,IACP,IAAIC,EAxBSF,EAAQ1kD,IALI,wBA8BzB,OAAK4kD,GAAiB,IAAMA,EAAc5sD,OAI5B4sD,EAAc7sD,MAjCd,KA8BL,GAOXysD,EAAOD,QAAQM,kBAnBf,SAA2BC,GACzB,GAAIA,EAAQ,CACV,IAAIC,EAAUJ,IACdI,EAAQrrD,KAAKorD,GAZXE,EAamBD,EAbW7rD,KATpB,KAUdwR,QAAQC,IAAI,4BAA8Bq6C,EAAkB,KAG/CN,EAAQzF,IAdI,uBAcsB+F,GALjD,IACMA,GA6BNR,EAAOD,QAAQI,mBAAqBA,GAKjC,SAAUH,EAAQD,GAGrB,IAAIU,EAAW,CACbC,UAAW,CACTC,iBAAkB,cAClBC,UAAW,OACXC,gBAAiB,cAGnBC,gBAAiB,CACfC,UAAW,YACXC,SAAU,YAGZC,aAAc,CACZC,KAAM,OACNC,MAAO,QACPC,OAAQ,UAGVC,aAAc,CACZC,KAAM,OACNvuB,KAAM,OACNwuB,SAAU,WACVC,MAAS,QACTC,IAAO,MACPrlC,OAAQ,SACRslC,SAAU,YAGZC,eAAgB,CACdC,UAAW,YACXC,QAAS,WAGXC,eAAgB,CACdC,WAAY,aACZC,SAAU,YAGZC,YAAa,CACXC,IAAK,MACLC,IAAK,MACLC,OAAQ,SACR/gC,MAAO,QACPghC,OAAQ,cAGVC,mBAAoB,CAClBC,UAAW,YACXC,SAAU,WACVC,KAAM,OACNC,uBAAwB,yBACxBC,eAAgB,iBAChBC,OAAQ,SACRC,eAAgB,iBAChBC,kBAAmB,oBACnBC,SAAU,WACVC,UAAW,aAGbC,gBAAiB,CACfjyB,UAAW,YACXkyB,SAAU,WACVC,iBAAkB,mBAClBC,kBAAmB,qBAGrBC,iBAAkB,CAChB5nB,OAAQ,SACR6nB,SAAU,WACVC,WAAY,aACZnyB,WAAY,cAGdoyB,WAAY,CACVC,QAAS,QACTC,OAAQ,QACRC,MAAO,QACPC,OAAQ,QACRC,QAAS,QACTC,MAAO,QACPC,MAAO,QACPC,MAAO,SAGTC,SAAU,CACRC,MAAO,QACPv+B,KAAM,SAWVq6B,EAAOD,QAAQppD,MANf,SAAe6I,GACb,IAAK,IAAIvG,KAAOwnD,EACdjhD,EAAOvG,GAAOwnD,EAASxnD,KASxB,SAAU+mD,EAAQD,GAOrB,SAASoE,EAAiBC,GACxB3tD,KAAK2tD,iBAAmBA,EACxB3tD,KAAK4tD,uBACL5tD,KAAK6tD,wBAGPH,EAAiB3xD,UAAU6xD,qBAAuB,WAChDn+C,QAAQC,IAAI,sDACZ1P,KAAK8tD,eAAgB,EAErB,IAAIC,EAAkB,GACtBA,EAAgBC,aAAehuD,KAAKiuD,cAAc37C,KAAKtS,MACvD+tD,EAAgBG,eAAiBluD,KAAKmuD,gBAAgB77C,KAAKtS,MAC3D+tD,EAAgBK,wBAA0BpuD,KAAKquD,yBAAyB/7C,KAAKtS,MAC7E+tD,EAAgBr+C,IAAM1P,KAAKsuD,KAAKh8C,KAAKtS,MACrC+tD,EAAgBhf,OAAS/uC,KAAKuuD,QAAQj8C,KAAKtS,MAC3C+tD,EAAgBS,eAAiBxuD,KAAKyuD,gBAAgBn8C,KAAKtS,MAE3DA,KAAK+tD,gBAAkBA,GAGzBL,EAAiB3xD,UAAUkyD,cAAgB,SAAUl0C,GACnD/Z,KAAK2tD,iBAAiBe,2BAA2BC,IAAI50C,IAGvD2zC,EAAiB3xD,UAAUoyD,gBAAkB,SAAUp0C,GACrD/Z,KAAK2tD,iBAAiBiB,6BAA6BD,IAAI50C,IAGzD2zC,EAAiB3xD,UAAUsyD,yBAA2B,SAAUQ,GAC9D7uD,KAAK2tD,iBAAiBmB,sCAAsCH,IAAIE,IAGlEnB,EAAiB3xD,UAAUuyD,KAAO,SAAUv0C,GAC1C/Z,KAAK2tD,iBAAiBoB,kBAAkBJ,IAAI50C,IAG9C2zC,EAAiB3xD,UAAUwyD,QAAU,WAC/BvuD,KAAK8tD,cACPr+C,QAAQC,IAAI,iCAId1P,KAAK8tD,eAAgB,EACrB9tD,KAAK2tD,iBAAiBqB,qBAAqBL,QAG7CjB,EAAiB3xD,UAAU8xD,sBAAwB,WACjDp+C,QAAQC,IAAI,uDAEZ1P,KAAKivD,qBAAsB,EAC3BjvD,KAAKkvD,yBAA0B,EAE/B,IAAIC,EAAmB,GACvBA,EAAiBC,cAAgBpvD,KAAKovD,cAAc98C,KAAKtS,MACzDmvD,EAAiBE,kBAAoBrvD,KAAKqvD,kBAAkB/8C,KAAKtS,MACjEmvD,EAAiBG,gBAAkBtvD,KAAKsvD,gBAAgBh9C,KAAKtS,MAC7DmvD,EAAiBI,mBAAqBvvD,KAAKuvD,mBAAmBj9C,KAAKtS,MACnEmvD,EAAiBK,kBAAoBxvD,KAAKwvD,kBAAkBl9C,KAAKtS,MAEjEA,KAAKmvD,iBAAmBA,GAG1BzB,EAAiB3xD,UAAUqzD,cAAgB,WACrCpvD,KAAKivD,oBACPx/C,QAAQC,IAAI,uCAId1P,KAAKivD,qBAAsB,EAC3BjvD,KAAK2tD,iBAAiB8B,2BAA2Bd,QAGnDjB,EAAiB3xD,UAAUszD,kBAAoB,WACzCrvD,KAAKkvD,wBACPz/C,QAAQC,IAAI,2CAId1P,KAAKkvD,yBAA0B,EAC/BlvD,KAAK2tD,iBAAiB+B,+BAA+Bf,QAGvDjB,EAAiB3xD,UAAUuzD,gBAAkB,SAAUK,EAAQC,GAEvD5vD,KAAK2tD,iBAAiBkC,+BAE1B7vD,KAAK2tD,iBAAiBkC,+BAA+BlB,IAAIgB,EAAQC,GAAuB,IAExF5vD,KAAK2tD,iBAAiBmC,6BAA6BnB,IAAIgB,IAI3DjC,EAAiB3xD,UAAUwzD,mBAAqB,SAAUQ,EAAWzxD,GACnE0B,KAAK2tD,iBAAiBqC,gCAAgCrB,IAAIoB,EAAWzxD,IAGvEovD,EAAiB3xD,UAAU0yD,gBAAkB,SAAU7Y,GAE/C51C,KAAK2tD,iBAAiBsC,6BAC1BjwD,KAAK2tD,iBAAiBsC,6BAA6BtB,IAAI/Y,GAEvDnmC,QAAQC,IAAI,2DAIhBg+C,EAAiB3xD,UAAUyzD,kBAAoB,WAC7CxvD,KAAK2tD,iBAAiBuC,+BAA+BvB,OAGvDpF,EAAOD,QAAUoE,GAKd,SAAUnE,EAAQD,EAASF,GAE9B,IAAI+G,EAAQ/G,EAAoB,GAC5BgH,EAAQhH,EAAoB,GAShC,SAASiH,EAAOC,EAAeC,EAAeC,GAC5CxwD,KAAKuwD,cAAgBA,EACrBvwD,KAAKwwD,UAAYA,EACjBxwD,KAAKywD,wCAAyC,EAE9CzwD,KAAK0wD,oBAAoBJ,GAI3BD,EAAOt0D,UAAUsF,KAAO,WACtBoO,QAAQC,IAAI,2BACZ1P,KAAKwwD,UAAUG,QAAU3wD,KAAK4wD,cAAct+C,KAAKtS,MAGjDA,KAAK6wD,wBAGL7wD,KAAK8wD,4BAGPT,EAAOt0D,UAAU20D,oBAAsB,SAAUJ,GAC/CtwD,KAAKswD,cAAgBA,EAIrBtwD,KAAKswD,cAAcS,cAAgB/wD,KAAKgxD,eAAe1+C,KAAKtS,MAC5DA,KAAKswD,cAAcW,kBAAoBjxD,KAAKkxD,mBAAmB5+C,KAAKtS,MAEpEowD,EAAMlwD,MAAMF,KAAKswD,gBAGnBD,EAAOt0D,UAAU60D,cAAgB,SAAUl/C,EAASihB,EAAMw+B,EAAMC,EAAQC,GAEtE,GADA5hD,QAAQoJ,MAAMw4C,GACVrxD,KAAKywD,uCACP,OAAO,EAGT,IAAI12C,EAAMrI,EAQV,GAPI2/C,EACFt3C,GAAO,YAAcs3C,EAAS1uD,OAE9BoX,GAAO,YAAc4Y,EACrB5Y,GAAO,YAAco3C,IAGnBnxD,KAAKswD,gBAAiBtwD,KAAKswD,cAAcpC,eAG3C,MAAMn0C,EAIR,OANE/Z,KAAKswD,cAAcpC,eAAen0C,GAKpC/Z,KAAKywD,wCAAyC,GACvC,GAGTJ,EAAOt0D,UAAUi1D,eAAiB,WAMhC,MALmB,CACjB3vD,KAAM,SAAcy3C,GAAKA,KACzBwY,SAAU,SAAkBxY,GAAKA,OAMrCuX,EAAOt0D,UAAUm1D,mBAAqB,SAAUK,GAI9C,IADA,IAAIC,EAAgB,CAAC,OAAQ,WAAY,YAAa,WAC7CC,EAAKD,EAAcz0D,OAAS,EAAG00D,GAAM,EAAGA,IAC/C,GAAsC,mBAA3BF,EAAIC,EAAcC,IAC3B,KAAM,uDAAyDD,EAAcC,GAIjFhiD,QAAQC,IAAI,wBAEZ1P,KAAKwwD,UAAUkB,KAAOH,EACtBvxD,KAAK0xD,KAAOH,GAGdlB,EAAOt0D,UAAU80D,sBAAwB,WACvC7wD,KAAKuwD,cAAcoB,sBAAwB3xD,KAAK4xD,uBAAuBt/C,KAAKtS,MAC5EA,KAAKuwD,cAAcsB,uBAAyB7xD,KAAK8xD,wBAAwBx/C,KAAKtS,MAC9EA,KAAKuwD,cAAcwB,qBAAuB/xD,KAAKgyD,sBAAsB1/C,KAAKtS,MAC1EA,KAAKuwD,cAAc0B,gBAAkBjyD,KAAKkyD,iBAAiB5/C,KAAKtS,OAIlEqwD,EAAOt0D,UAAU61D,uBAAyB,WACxC5xD,KAAK0xD,KAAKrwD,KAAKrB,KAAKuwD,cAAcnB,gBAIpCiB,EAAOt0D,UAAU+1D,wBAA0B,WACzC9xD,KAAK0xD,KAAKS,UAAUnyD,KAAKuwD,cAAcjB,kBAIzCe,EAAOt0D,UAAUi2D,sBAAwB,SAAUI,GACjD,GAAuC,GAAnCA,EAAyBr1D,OAC3B,KAAM,6DAA+Dq1D,EAAyBr1D,OAAOye,WAGvG,IAAI62C,EAAwBD,EAAyB,GACjDE,IAAmBD,EAAsBE,eACzCntD,EAAQ,IAAI+qD,EAChBkC,EAAsBG,UACtBH,EAAsBI,eACtBH,EACAD,EAAsBE,gBAAkB,GACxCF,EAAsBK,cAAgB,GACtC1yD,KAAKuwD,cAAchB,oBAEnBvvD,KAAK0xD,KAAKiB,QAAQvtD,EAAOpF,KAAKuwD,cAAcf,oBAI9Ca,EAAOt0D,UAAUm2D,iBAAmB,WAClClyD,KAAK0xD,KAAKJ,SAAStxD,KAAKuwD,cAAclB,oBAIxCgB,EAAOt0D,UAAU+0D,yBAA2B,WAC1C9wD,KAAKswD,cAAcsC,aAAe5yD,KAAKovD,cAAc98C,KAAKtS,MAC1DA,KAAKswD,cAAcuC,gBAAkB7yD,KAAK8yD,iBAAiBxgD,KAAKtS,MAChEA,KAAKswD,cAAcyC,aAAe/yD,KAAKgzD,cAAc1gD,KAAKtS,MAC1DA,KAAKswD,cAAc2C,iBAAmBjzD,KAAKqvD,kBAAkB/8C,KAAKtS,OAGpEqwD,EAAOt0D,UAAUqzD,cAAgB,WAC/BpvD,KAAKswD,cAAcpC,eAAe,+GAGpCmC,EAAOt0D,UAAU+2D,iBAAmB,SAAUI,EAAYC,GACxDnzD,KAAKswD,cAAcpC,eAAe,iEAGpCmC,EAAOt0D,UAAUi3D,cAAgB,SAAU10D,EAAM80D,EAAiBC,GAChErzD,KAAKswD,cAAcpC,eAAe,8DAGpCmC,EAAOt0D,UAAUszD,kBAAoB,WACnCrvD,KAAKswD,cAAcpC,eAAe,uHAGpC3E,EAAOD,QAAU+G,GAKd,SAAU9G,EAAQD,EAASF,GAE9B,IAAIkK,EAAkBlK,EAAoB,GAU1C,SAASmK,EAAoB/C,GAC3BxwD,KAAKwwD,UAAYA,EACjBxwD,KAAKwzD,uBACLxzD,KAAK4tD,uBACL5tD,KAAK6tD,wBAXPzE,EAAoB,GAcpBmK,EAAoBx3D,UAAUy3D,qBAAuB,WACnD/jD,QAAQC,IAAI,iCACZ1P,KAAKwwD,UAAUiD,iBAAiB,UAAWzzD,KAAK0zD,gBAAgBphD,KAAKtS,OAAO,GAC5EA,KAAKwwD,UAAUhoD,SAASirD,iBAAiB,mBAAoBzzD,KAAK2zD,oBAAoBrhD,KAAKtS,QAG7FuzD,EAAoBx3D,UAAU43D,oBAAsB,WAMlD,GAJI3zD,KAAKwwD,UAAUttD,SAAWhG,QAC5B8C,KAAKwwD,UAAUttD,OAAO0wD,YAAY5zD,KAAK6zD,qBAAqB,UAAW,KAGrE7zD,KAAKwwD,UAAUsD,OACjB,IACE9zD,KAAKwwD,UAAUsD,OAAOF,YAAY5zD,KAAK6zD,qBAAqB,UAAW,KACvE,MAAOvpD,GACPmF,QAAQm5C,KAAK,oHAKnB2K,EAAoBx3D,UAAUg4D,uBAAyB,WAiBrD,MAhBiB,CACfC,eAAkBh0D,KAAKwwD,UAAUyD,QAAQD,eACzCE,eAAkBl0D,KAAKwwD,UAAUyD,QAAQC,eACzCC,SAAYn0D,KAAKwwD,UAAUyD,QAAQE,SACnCj2C,SAAYle,KAAKwwD,UAAUyD,QAAQ/1C,SACnCk2C,cAAiBp0D,KAAKwwD,UAAUyD,QAAQG,cACxCC,yBAA4Br0D,KAAKwwD,UAAUyD,QAAQI,yBACnDC,cAAiBt0D,KAAKwwD,UAAUyD,QAAQK,cACxCC,OAAUv0D,KAAKwwD,UAAUyD,QAAQM,OACjCC,YAAex0D,KAAKwwD,UAAUyD,QAAQO,YACtCC,WAAcz0D,KAAKwwD,UAAUyD,QAAQQ,WACrCC,gBAAmB10D,KAAKwwD,UAAUyD,QAAQS,gBAC1CC,gBAAmB30D,KAAKwwD,UAAUyD,QAAQU,gBAC1CC,oBAAuB50D,KAAKwwD,UAAUyD,QAAQW,sBAMlDrB,EAAoBx3D,UAAU84D,qBAAuB,SAAUC,GACzDA,IACF90D,KAAKwwD,UAAUyD,QAAQD,eAAiBc,EAAMd,eAC9Ch0D,KAAKwwD,UAAUyD,QAAQC,eAAiBY,EAAMZ,eAC9Cl0D,KAAKwwD,UAAUyD,QAAQE,SAAWW,EAAMX,SACxCn0D,KAAKwwD,UAAUyD,QAAQ/1C,SAAW42C,EAAM52C,SACxCle,KAAKwwD,UAAUyD,QAAQG,cAAgBU,EAAMV,cAC7Cp0D,KAAKwwD,UAAUyD,QAAQI,yBAA2BS,EAAMT,yBACxDr0D,KAAKwwD,UAAUyD,QAAQM,OAASO,EAAMP,OACtCv0D,KAAKwwD,UAAUyD,QAAQ7oD,SAAW0pD,EAAMP,OACxCv0D,KAAKwwD,UAAUyD,QAAQO,YAAcM,EAAMN,YAC3Cx0D,KAAKwwD,UAAUyD,QAAQQ,WAAaK,EAAML,WAC1Cz0D,KAAKwwD,UAAUyD,QAAQS,gBAAkBI,EAAMJ,gBAC/C10D,KAAKwwD,UAAUyD,QAAQU,gBAAkBG,EAAMH,gBAC/C30D,KAAKwwD,UAAUyD,QAAQW,oBAAsBE,EAAMF,sBAIvDrB,EAAoBx3D,UAAU83D,qBAAuB,SAAUkB,EAASC,EAASF,GAC/E,IAAIG,EAAS,CAAEF,QAAWA,EAASC,QAAWA,EAASF,MAASA,EAAOtpD,QAAW,SAClF,OAAOgD,KAAKmT,UAAUszC,IAGxB1B,EAAoBx3D,UAAUm5D,aAAe,SAAUH,EAASC,GAC9D,IAAIG,EAAiBn1D,KAAK6zD,qBAAqBkB,EAASC,EAASh1D,KAAK+zD,0BAGtE,QAAoC,IAAzB/zD,KAAKwwD,UAAU/0C,aACsB,IAAzCzb,KAAKwwD,UAAU/0C,OAAO25C,sBAC8B,IAApDp1D,KAAKwwD,UAAU/0C,OAAO25C,gBAAgBC,WAC3Cr1D,KAAKwwD,UAAU/0C,OAAO25C,gBAAgBC,WAAWzB,YAAYuB,OACxD,CAAA,IAAKn1D,KAAKs1D,cACf,KAAM,0FAGNt1D,KAAKs1D,cAAc1B,YAAYuB,EAAgBn1D,KAAKu1D,iBAIxDhC,EAAoBx3D,UAAUy5D,eAAiB,SAAUC,GACvD,IAAIC,EAAU,KACd,IACEA,EAAUlnD,KAAKC,MAAMgnD,GACrB,MAAOnrD,GACP,OAAO,KAGT,OAAOorD,GAGTnC,EAAoBx3D,UAAU45D,8BAAgC,WAG5D,IAAI9L,EAAS7pD,KAAKu1D,cAIdK,EADe,IADTxM,EAAoB,IACX,CAAQS,GACC/gB,OAG5B,GADqB,CAAC,YAAa,qBAChBz/B,QAAQusD,IAAa,EACtC,OAAO,EAIT,GAAIA,GAAYA,EAAS/vC,SAAS,sBAChC,OAAO,EAIT,GAD6BytC,EAAgB5J,qBAClBrgD,QAAQwgD,IAAW,EAG5C,OADAp6C,QAAQC,IAAI,+BAAiCm6C,EAAS,wBAC/C,EAGT,IAAIgM,EAAwB71D,KAAK81D,oBAAoB,sBAEjDC,EAAcC,QADOH,EAAwB,OAASD,EAAW,MAQrE,OALIG,GAEFzC,EAAgB1J,kBAAkBC,GAG7BkM,GAGTxC,EAAoBx3D,UAAUk6D,kBAAoB,WAEhD,IAAIC,EAAyB5vC,UAAUlb,UAAYkb,UAAUtO,aACzDu8C,EAAS2B,EAAyBA,EAAuBvnD,UAAU,EAAG,GAAK,KAQ/E,MANuB,CAAC,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,MAE7CtF,QAAQkrD,GAAU,IACrCA,EAAS,MAGJA,GAGThB,EAAoBx3D,UAAU+5D,oBAAsB,SAAUK,GAC5D,IAAI5B,EAASv0D,KAAKi2D,oBAGdG,EAAehN,EAAoB,IACnCiN,EAAejN,EAAoB,IACnCkN,EAAelN,EAAoB,IACnCmN,EAAenN,EAAoB,IAmBvC,MAZA,CACElN,GAAMka,EACNnb,GAAMob,EACNzc,GAAM0c,EACN9Z,GAViB4M,EAAoB,IAWrClM,GAAMqZ,EACNC,GAXiBpN,EAAoB,IAYrC5L,GAXiB4L,EAAoB,IAYrCpK,GAXiBoK,EAAoB,KAcUmL,GACrB4B,IAG9B5C,EAAoBx3D,UAAU23D,gBAAkB,SAAU+C,GAIxD,GAHAhnD,QAAQC,IAAI,sBAEF1P,KAAKwwD,UAAUkB,KAEvB,KAAM,uEAGR,IAAIgF,EAAa12D,KAAKw1D,eAAeiB,EAAIn4D,MACzC,GAAKo4D,EAAL,CAEK12D,KAAKs1D,gBACRt1D,KAAKs1D,cAAgBmB,EAAIE,OACzB32D,KAAKu1D,cAAgBkB,EAAI5M,QAG3B,IAAImL,EAAU0B,EAAW1B,QAGzB,OAFAh1D,KAAK60D,qBAAqB6B,EAAW5B,OAE7B4B,EAAW3B,SACjB,IAAK,OAEiB/0D,KAAK21D,iCAIvB31D,KAAKwwD,UAAUyD,QAAQ2C,MAAQ5B,EAAQ4B,MACvC52D,KAAKwwD,UAAUqG,SAASlF,yBAHxBz0D,OAAOmK,QAMT,MACF,IAAK,WACHrH,KAAKwwD,UAAUqG,SAAS5E,kBACxB,MACF,IAAK,YACHjyD,KAAKwwD,UAAUqG,SAAShF,yBACxB,MACF,IAAK,UACH7xD,KAAKwwD,UAAUqG,SAAS9E,qBAAqBiD,EAAQ5C,6BAM3DmB,EAAoBx3D,UAAU6xD,qBAAuB,WACnDn+C,QAAQC,IAAI,iCACZ1P,KAAK8tD,eAAgB,EAErB,IAAIC,EAAkB,GACtBA,EAAgBC,aAAehuD,KAAKiuD,cAAc37C,KAAKtS,MACvD+tD,EAAgBG,eAAiBluD,KAAKmuD,gBAAgB77C,KAAKtS,MAC3D+tD,EAAgBK,wBAA0BpuD,KAAKquD,yBAAyB/7C,KAAKtS,MAC7E+tD,EAAgBr+C,IAAM1P,KAAKsuD,KAAKh8C,KAAKtS,MACrC+tD,EAAgBS,eAAiBxuD,KAAKyuD,gBAAgBn8C,KAAKtS,MAC3D+tD,EAAgBhf,OAAS/uC,KAAKuuD,QAAQj8C,KAAKtS,MAG3CA,KAAK+tD,gBAAkBA,GAGzBwF,EAAoBx3D,UAAUkyD,cAAgB,SAAUl0C,GACtD/Z,KAAKk1D,aAAa,eAAgB,CAAEn7C,IAAOA,KAG7Cw5C,EAAoBx3D,UAAUoyD,gBAAkB,SAAUp0C,GACxD/Z,KAAKk1D,aAAa,iBAAkB,CAAE4B,SAAY/8C,KAGpDw5C,EAAoBx3D,UAAUsyD,yBAA2B,SAAUQ,GAGjEp/C,QAAQC,IAAI,0EACZ4d,WAAW,WACTttB,KAAKwwD,UAAUkB,KAAKqF,iCAAiClI,IACrDv8C,KAAKtS,MAAO,IAGhBuzD,EAAoBx3D,UAAUuyD,KAAO,SAAUv0C,GAC7C/Z,KAAKk1D,aAAa,MAAO,CAAE8B,OAAUj9C,KAGvCw5C,EAAoBx3D,UAAU0yD,gBAAkB,SAAU10C,GACxD/Z,KAAKk1D,aAAa,iBAAkB,CAAE+B,YAAel9C,KAGvDw5C,EAAoBx3D,UAAUwyD,QAAU,WACtCvuD,KAAKk1D,aAAa,WAIpB3B,EAAoBx3D,UAAU8xD,sBAAwB,WACpDp+C,QAAQC,IAAI,kCAEZ,IAAIy/C,EAAmB,GACvBA,EAAiBC,cAAgBpvD,KAAKovD,cAAc98C,KAAKtS,MACzDmvD,EAAiBE,kBAAoBrvD,KAAKqvD,kBAAkB/8C,KAAKtS,MACjEmvD,EAAiBG,gBAAkBtvD,KAAKsvD,gBAAgBh9C,KAAKtS,MAC7DmvD,EAAiBI,mBAAqBvvD,KAAKuvD,mBAAmBj9C,KAAKtS,MACnEmvD,EAAiBK,kBAAoBxvD,KAAKwvD,kBAAkBl9C,KAAKtS,MAGjEA,KAAKmvD,iBAAmBA,GAG1BoE,EAAoBx3D,UAAUqzD,cAAgB,WAC5CpvD,KAAKk1D,aAAa,iBAGpB3B,EAAoBx3D,UAAUszD,kBAAoB,WAChDrvD,KAAKk1D,aAAa,qBAGpB3B,EAAoBx3D,UAAUuzD,gBAAkB,SAAUK,EAAQC,GAChE5vD,KAAKk1D,aAAa,kBAAmB,CAAEvF,OAAUA,EAAQC,oBAAuBA,GAAuB,MAGzG2D,EAAoBx3D,UAAUwzD,mBAAqB,SAAUQ,EAAWzxD,GACtE0B,KAAKk1D,aAAa,qBAAsB,CAAEnF,UAAaA,EAAWzxD,KAAQA,KAG5Ei1D,EAAoBx3D,UAAUyzD,kBAAoB,WAChDxvD,KAAKk1D,aAAa,sBAGpB3L,EAAOD,QAAUiK,GAKd,SAAUhK,EAAQD,GAOrB,SAAS6G,EAAMqC,EAAWC,EAAgBH,EAAgBC,EAAgBG,EAAcwE,GAGtFl3D,KAAKwyD,UAAYA,EAIjBxyD,KAAKyyD,eAAiBA,GAAkB,GAGxCzyD,KAAKsyD,eAAiBA,EAItBtyD,KAAKuyD,eAAiBA,EAItBvyD,KAAK0yD,aAAeA,EAGpB1yD,KAAKm3D,gBAAkBD,EAGvBl3D,KAAKo3D,WAAap3D,KAAKq3D,YAAY/kD,KAAKtS,MAQ1CmwD,EAAMp0D,UAAUs7D,YAAc,SAAU/4D,GAEjCA,EAKA2b,MAAMhd,QAAQqB,GAOnB0B,KAAKm3D,gBAAgBn3D,KAAKwyD,UAAUhjD,GAAIlR,GALtCmR,QAAQm5C,KAAK,qEANbn5C,QAAQm5C,KAAK,mCAcjBW,EAAOD,QAAU6G,GAKd,SAAU5G,EAAQD,GAmErBC,EAAOD,QAAQgO,cAjEf,SAAuBhoD,EAAKioD,GAC1B,IAAK,IAAI/0D,KAAO8M,EACU,mBAAbA,EAAI9M,KACb+0D,EAAK/0D,GAAO8M,EAAI9M,KA+DtB+mD,EAAOD,QAAQkO,qBA9Cf,SAA8Bb,EAAQ5tD,EAAQ0uD,GAO5CA,EAAa1O,SAAQ,SAAU2O,GAE7B5wC,OAAO6wC,eAAe5uD,EAAQ2uD,EAAc,CAC1CE,YAAY,EACZC,cAAc,EACd9yD,IAAK,WACH,OAAO4xD,EAAOe,IAEhB1T,IAAK,SAAa9sC,GAChB,OAAOy/C,EAAOe,GAAgBxgD,SA+BtCqyC,EAAOD,QAAQwO,kBAvBS,CACxB,cACA,WACA,iBACA,iBACA,WACA,SACA,WACA,WACA,QACA,sBACA,kBACA,aACA,kBACA,kBACA,gBACA,WACA,gBACA,eASG,SAAUvO,EAAQD;;AAGhBhsD,OAAOvB,UAAU8pB,UACpB,WACE,aACA,IAAI8xC,EAAiB,WAEnB,IACE,IAAIruC,EAAS,GACTyuC,EAAkBjxC,OAAO6wC,eACzB7xD,EAASiyD,EAAgBzuC,EAAQA,EAAQA,IAAWyuC,EACxD,MAAOl/C,IACT,OAAO/S,EAPY,GASjB0V,EAAW,GAAGA,SACdqK,EAAW,SAAkBmyC,GAC/B,GAAY,MAARh4D,KACF,MAAMi4D,YAER,IAAItyC,EAASroB,OAAO0C,MACpB,GAAIg4D,GAAmC,mBAAzBx8C,EAAS/U,KAAKuxD,GAC1B,MAAMC,YAER,IAAIC,EAAevyC,EAAO5oB,OACtBo7D,EAAe76D,OAAO06D,GACtBI,EAAeD,EAAap7D,OAC5BkvB,EAAMisC,EACV,GAAI/3D,UAAUpD,OAAS,EAAG,CACxB,IAAI6vC,EAAWzsC,UAAU,QACR/C,IAAbwvC,IAEF3gB,EAAM2gB,EAAWnkB,OAAOmkB,GAAY,IACzB3gB,IACTA,EAAM,GAIZ,IAAIuoB,EAAMl6B,KAAK6I,IAAI7I,KAAKuD,IAAIoO,EAAK,GAAIisC,GACjCryD,EAAQ2uC,EAAM4jB,EAClB,GAAIvyD,EAAQ,EACV,OAAO,EAGT,IADA,IAAIuI,GAAS,IACJA,EAAQgqD,GACf,GAAIzyC,EAAOtL,WAAWxU,EAAQuI,IAAU+pD,EAAa99C,WAAWjM,GAC9D,OAAO,EAGX,OAAO,GAELupD,EACFA,EAAer6D,OAAOvB,UAAW,WAAY,CAC3Cmb,MAAS2O,EACTgyC,cAAgB,EAChBQ,UAAY,IAGd/6D,OAAOvB,UAAU8pB,SAAWA,EAtDhC,IA8DC,SAAU0jC,EAAQD,EAASF,GAE9B,IAAIkP,GAMJ,SAAWC,EAAQn7D,GACjB,aAEA,IAAIo7D,EAAU,SAAiBt7D,GAC7B,GAAiC,WAA7BxB,QAAQwB,EAAOsL,UACjB,MAAM,IAAIka,MAAM,2DAGlB,IAAI+mC,EAAU,SAASA,EAAQjnD,EAAK0U,EAAOrU,GACzC,OAA4B,IAArB1C,UAAUpD,OACjB0sD,EAAQ1kD,IAAIvC,GAAOinD,EAAQzF,IAAIxhD,EAAK0U,EAAOrU,IAyI7C,OArIA4mD,EAAQgP,UAAYv7D,EAAOsL,SAI3BihD,EAAQiP,gBAAkB,UAE1BjP,EAAQkP,eAAiB,IAAIjlD,KAAK,iCAElC+1C,EAAQjoD,SAAW,CACjBoyB,KAAM,IACNC,QAAQ,GAGV41B,EAAQ1kD,IAAM,SAAUvC,GAClBinD,EAAQmP,wBAA0BnP,EAAQgP,UAAUplC,QACtDo2B,EAAQoP,cAGV,IAAI3hD,EAAQuyC,EAAQqP,OAAOrP,EAAQiP,gBAAkBl2D,GAErD,YAlCN,IAkCa0U,OAlCb,EAkC+CuL,mBAAmBvL,IAG9DuyC,EAAQzF,IAAM,SAAUxhD,EAAK0U,EAAOrU,GAMlC,OALAA,EAAU4mD,EAAQsP,oBAAoBl2D,IAC9BywB,QAAUm2B,EAAQuP,qBAvChC,IAuCgD9hD,GAAuB,EAAIrU,EAAQywB,SAE7Em2B,EAAQgP,UAAUplC,OAASo2B,EAAQwP,sBAAsBz2D,EAAK0U,EAAOrU,GAE9D4mD,GAGTA,EAAQyP,OAAS,SAAU12D,EAAKK,GAC9B,OAAO4mD,EAAQzF,IAAIxhD,OA/CzB,EA+CyCK,IAGrC4mD,EAAQsP,oBAAsB,SAAUl2D,GACtC,MAAO,CACL+wB,KAAM/wB,GAAWA,EAAQ+wB,MAAQ61B,EAAQjoD,SAASoyB,KAClDxV,OAAQvb,GAAWA,EAAQub,QAAUqrC,EAAQjoD,SAAS4c,OACtDkV,QAASzwB,GAAWA,EAAQywB,SAAWm2B,EAAQjoD,SAAS8xB,QACxDO,OAAQhxB,QAvDhB,IAuD2BA,EAAQgxB,OAAuBhxB,EAAQgxB,OAAS41B,EAAQjoD,SAASqyB,SAIxF41B,EAAQ0P,aAAe,SAAU78B,GAC/B,MAAgD,kBAAzCxV,OAAO/qB,UAAUyf,SAAS/U,KAAK61B,KAA8B7W,MAAM6W,EAAK3oB,YAGjF81C,EAAQuP,gBAAkB,SAAU1lC,EAAS8B,GAU3C,GATAA,EAAMA,GAAO,IAAI1hB,KAEM,iBAAZ4f,EACTA,EAAUA,IAAY8lC,EAAAA,EACtB3P,EAAQkP,eAAiB,IAAIjlD,KAAK0hB,EAAIzhB,UAAsB,IAAV2f,GACtB,iBAAZA,IAChBA,EAAU,IAAI5f,KAAK4f,IAGjBA,IAAYm2B,EAAQ0P,aAAa7lC,GACnC,MAAM,IAAI5Q,MAAM,oEAGlB,OAAO4Q,GAGTm2B,EAAQwP,sBAAwB,SAAUz2D,EAAK0U,EAAOrU,GAMpD,IAAIw2D,GAJJ72D,GADAA,EAAMA,EAAIpE,QAAQ,eAAgBukB,qBACxBvkB,QAAQ,MAAO,OAAOA,QAAQ,MAAO,QAItB,KAHzB8Y,GAASA,EAAQ,IAAI9Y,QAAQ,yBAA0BukB,qBASvD,OALA02C,IAHAx2D,EAAUA,GAAW,IAGG+wB,KAAO,SAAW/wB,EAAQ+wB,KAAO,GACzDylC,GAAgBx2D,EAAQub,OAAS,WAAavb,EAAQub,OAAS,GAC/Di7C,GAAgBx2D,EAAQywB,QAAU,YAAczwB,EAAQywB,QAAQK,cAAgB,GAChF0lC,GAAgBx2D,EAAQgxB,OAAS,UAAY,IAK/C41B,EAAQ6P,oBAAsB,SAAUC,GAItC,IAHA,IAAIC,EAAc,GACdC,EAAeF,EAAiBA,EAAez8D,MAAM,MAAQ,GAExDF,EAAI,EAAGA,EAAI68D,EAAa18D,OAAQH,IAAK,CAC5C,IAAI88D,EAAYjQ,EAAQkQ,iCAAiCF,EAAa78D,SApG9E,IAsGY48D,EAAY/P,EAAQiP,gBAAkBgB,EAAUl3D,OAClDg3D,EAAY/P,EAAQiP,gBAAkBgB,EAAUl3D,KAAOk3D,EAAUxiD,OAIrE,OAAOsiD,GAGT/P,EAAQkQ,iCAAmC,SAAUN,GAEnD,IAAIO,EAAiBP,EAAahwD,QAAQ,KAG1CuwD,EAAiBA,EAAiB,EAAIP,EAAat8D,OAAS68D,EAE5D,IACIC,EADAr3D,EAAM62D,EAAax7D,OAAO,EAAG+7D,GAEjC,IACEC,EAAap3C,mBAAmBjgB,GAChC,MAAO8H,GACHmF,SAAoC,mBAAlBA,QAAQoJ,OAC5BpJ,QAAQoJ,MAAM,qCAAuCrW,EAAM,IAAK8H,GAIpE,MAAO,CACL9H,IAAKq3D,EACL3iD,MAAOmiD,EAAax7D,OAAO+7D,EAAiB,KAIhDnQ,EAAQoP,YAAc,WACpBpP,EAAQqP,OAASrP,EAAQ6P,oBAAoB7P,EAAQgP,UAAUplC,QAC/Do2B,EAAQmP,sBAAwBnP,EAAQgP,UAAUplC,QAGpDo2B,EAAQqQ,YAAc,WACpB,IACIC,EAAsD,MAAzCtQ,EAAQzF,IADX,aACwB,GAAGj/C,IAD3B,cAGd,OADA0kD,EAAQyP,OAFM,cAGPa,GAGTtQ,EAAQjE,QAAUiE,EAAQqQ,cAEnBrQ,GAELuQ,EAAgBzB,GAAuC,WAA7B78D,QAAQ68D,EAAO/vD,UAAyBgwD,EAAQD,GAAUC,OArJ1F,KAyJMF,EAAgC,WAAa,OAAO0B,GAAgBvzD,KAAK6iD,EAASF,EAAqBE,EAASC,MAAyDA,EAAOD,QAAUgP,GAzJhM,CAqKqB,oBAAXp7D,OAAyB8C,KAAO9C,SAIvC,SAAUqsD,EAAQD,GAErBC,EAAOD,QAAU,CAAE2Q,mBAAsB,8HAItC,SAAU1Q,EAAQD,GAErBC,EAAOD,QAAU,CAAE2Q,mBAAsB,8HAItC,SAAU1Q,EAAQD,GAErBC,EAAOD,QAAU,CAAE2Q,mBAAsB,8HAItC,SAAU1Q,EAAQD,GAErBC,EAAOD,QAAU,CAAE2Q,mBAAsB,8HAItC,SAAU1Q,EAAQD,GAErBC,EAAOD,QAAU,CAAE2Q,mBAAsB,8HAItC,SAAU1Q,EAAQD,GAErBC,EAAOD,QAAU,CAAE2Q,mBAAsB,8HAItC,SAAU1Q,EAAQD,GAErBC,EAAOD,QAAU,CAAE2Q,mBAAsB,8HAItC,SAAU1Q,EAAQD,GAErBC,EAAOD,QAAU,CAAE2Q,mBAAsB,gIAItC,SAAU1Q,EAAQD,EAASF,GAE9B,IAAIkP;;;;;;;;;;;;wCAeJ,SAAWC,GAET,IAAInzC,EAAK,CACP80C,oBAAqB,OACrBC,kBAAmB,OACnBC,OAAQ,MACRC,gBAAiB,OACjBC,WAAY,iOA4Cd,SAASxmC,EAAOr2B,GAKd,OAJIA,IACFA,EAAIA,EAAE+d,WAAWpd,QAAQgnB,EAAGg1C,OAAQ,OACpC38D,EAAIglB,mBAAmBhlB,IAElBA,EA0BT,SAAS88D,EAAWl9D,GAClB,IAAIT,EAAGu4C,EAAIv0B,EAAGE,EAAGsB,EAAGH,EAAGzd,EACnBwnB,EAAQ,GAEZ,GAAI,MAAO3uB,GAA+C,KAARA,EAChD,OAAO2uB,EAST,IANyB,IAArB3uB,EAAIgM,QAAQ,OACdhM,EAAMA,EAAIsR,UAAU,IAKjB/R,EAAI,EAAG4H,GAFZ2wC,EAAK93C,EAAIme,WAAW1e,MAAMsoB,EAAGi1C,kBAEVt9D,OAAQH,EAAI4H,EAAG5H,IAItB,KAFVkkB,GADAF,EAAIu0B,EAAGv4C,IACDyM,QAAQ,QAGZ+Y,EAAI0R,EAAOlT,EAAEjS,UAAU,EAAGmS,IAC1BmB,EAAI6R,EAAOlT,EAAEjS,UAAUmS,EAAI,IAC3BkL,EAAMvtB,MAAY,IAAPqiB,EAAW,CAACF,EAAG,MAAQ,CAACwB,EAAGH,KAI1C,OAAO+J,EAQT,SAASwuC,EAAIn9D,GACX2C,KAAKy6D,SApDP,SAAkBp9D,GAChB,IAEImM,EAFS4b,EAAGk1C,WAED9iD,KAAKna,GAAO,IACvBR,EAAQ,GAMZ,MARiB,CAAC,SAAU,WAAY,YAAa,WAAY,OAAQ,WAAY,OAAQ,OAAQ,aAAc,WAAY,OAAQ,YAAa,OAAQ,QAAS,UAI1JksD,SAAQ,SAAUvmD,EAAK5F,GAChCC,EAAM2F,GAAOgH,EAAE5M,IAAM,MAGhBC,EA0CS69D,CAASr9D,GACzB2C,KAAK26D,WAAaJ,EAAWv6D,KAAKy6D,SAASG,OAC3C56D,KAAK66D,2BAA6B,KAxG/B5gD,MAAMle,UAAUgtD,UACnB9uC,MAAMle,UAAUgtD,QAAU,SAAUzoD,EAAUw6D,GAC5C,IAAIC,EAAG34C,EAEP,GAAY,MAARpiB,KACF,MAAM,IAAIi4D,UAAU,gCAGtB,IAAI+C,EAAIl0C,OAAO9mB,MACX8sB,EAAMkuC,EAAEj+D,SAAW,EAEvB,GAAwB,mBAAbuD,EACT,MAAM,IAAI23D,UAAU33D,EAAW,sBASjC,IANIH,UAAUpD,OAAS,IACrBg+D,EAAID,GAGN14C,EAAI,EAEGA,EAAI0K,GAAK,CACd,IAAImuC,EACA74C,KAAK44C,IACPC,EAASD,EAAE54C,GACX9hB,EAASmG,KAAKs0D,EAAGE,EAAQ74C,EAAG44C,IAE9B54C,OAmFN,CAAC,WAAY,WAAY,OAAQ,OAAQ,OAAQ,UAAU2mC,SAAQ,SAAUvmD,GAC3Eg4D,EAAIz+D,UAAUyG,GAAO,SAAU4X,GAI7B,YAHmB,IAARA,IACTpa,KAAKy6D,SAASj4D,GAAO4X,GAEhBpa,KAAKy6D,SAASj4D,OASzBg4D,EAAIz+D,UAAUm/D,mBAAqB,SAAU9gD,GAK3C,YAJmB,IAARA,IACTpa,KAAK66D,2BAA6BzgD,GAGI,OAApCpa,KAAK66D,4BACwC,IAAxC76D,KAAKy6D,SAAS9D,OAAOttD,QAAQ,MAE7BrJ,KAAK66D,4BAIhBL,EAAIz+D,UAAUo/D,WAAa,SAAU/gD,GACnC,QAAmB,IAARA,EAGT,QAASpa,KAAKy6D,SAASU,WAFvBn7D,KAAKy6D,SAASU,aAAe/gD,GAWjCogD,EAAIz+D,UAAU6+D,MAAQ,SAAUxgD,GAC9B,IAAWxd,EAAE4vB,EAAMhoB,EAAf/G,EAAI,GAMR,SAJmB,IAAR2c,IACTpa,KAAK26D,WAAaJ,EAAWngD,IAG1Bxd,EAAI,EAAG4H,EAAIxE,KAAK26D,WAAW59D,OAAQH,EAAI4H,EAAG5H,IAC7C4vB,EAAQxsB,KAAK26D,WAAW/9D,GACpBa,EAAEV,OAAS,IACbU,GAAK,KAEU,OAAb+uB,EAAM,GACR/uB,GAAK+uB,EAAM,IAEX/uB,GAAK+uB,EAAM,GACX/uB,GAAK,SACmB,IAAb+uB,EAAM,KACf/uB,GAAKklB,mBAAmB6J,EAAM,MAIpC,OAAO/uB,EAAEV,OAAS,EAAI,IAAMU,EAAIA,GAQlC+8D,EAAIz+D,UAAUq/D,mBAAqB,SAAU54D,GAC3C,IAAIgqB,EAAO5vB,EAAG4H,EACd,IAAK5H,EAAI,EAAG4H,EAAIxE,KAAK26D,WAAW59D,OAAQH,EAAI4H,EAAG5H,IAE7C,GAAI4F,KADJgqB,EAAQxsB,KAAK26D,WAAW/9D,IACN,GAChB,OAAO4vB,EAAM,IAUnBguC,EAAIz+D,UAAUs/D,oBAAsB,SAAU74D,GAC5C,IAAa5F,EAAE4vB,EAAMhoB,EAAjBrF,EAAM,GACV,IAAKvC,EAAI,EAAG4H,EAAIxE,KAAK26D,WAAW59D,OAAQH,EAAI4H,EAAG5H,IAEzC4F,KADJgqB,EAAQxsB,KAAK26D,WAAW/9D,IACN,IAChBuC,EAAIV,KAAK+tB,EAAM,IAGnB,OAAOrtB,GASTq7D,EAAIz+D,UAAUu/D,iBAAmB,SAAU94D,EAAK4X,GAC9C,IAAaxd,EAAE4vB,EAAM+uC,EAAiBC,EAAiBh3D,EAAnDrF,EAAM,GAEV,IAAKvC,EAAI,EAAG4H,EAAIxE,KAAK26D,WAAW59D,OAAQH,EAAI4H,EAAG5H,IAG7C2+D,EAAmBznC,GADnBtH,EAAQxsB,KAAK26D,WAAW/9D,IACQ,MAAQk3B,EAAOtxB,GAC/Cg5D,EAAmBhvC,EAAM,KAAOpS,GAEP,IAArBja,UAAUpD,QAAiBw+D,KAAyC,IAArBp7D,UAAUpD,QAAkBw+D,GAAqBC,IAClGr8D,EAAIV,KAAK+tB,GAMb,OAFAxsB,KAAK26D,WAAax7D,EAEXa,MAUTw6D,EAAIz+D,UAAU0/D,cAAgB,SAAUj5D,EAAK4X,EAAKhM,GAOhD,OANyB,IAArBjO,UAAUpD,SAA2B,IAAXqR,GAC5BA,EAAQkM,KAAK6I,IAAI/U,EAAOpO,KAAK26D,WAAW59D,QACxCiD,KAAK26D,WAAWt3C,OAAOjV,EAAO,EAAG,CAAC5L,EAAK4X,KAC9Bja,UAAUpD,OAAS,GAC5BiD,KAAK26D,WAAWl8D,KAAK,CAAC+D,EAAK4X,IAEtBpa,MAUTw6D,EAAIz+D,UAAU2/D,cAAgB,SAAUl5D,GACtC,IAAI5F,EAAEkwB,EAAM9sB,KAAK26D,WAAW59D,OAC5B,IAAKH,EAAI,EAAGA,EAAIkwB,EAAKlwB,IACnB,GAAIoD,KAAK26D,WAAW/9D,GAAG,IAAM4F,EAC7B,OAAO,EAET,OAAO,GAUTg4D,EAAIz+D,UAAU4/D,kBAAoB,SAAUn5D,EAAKyhD,EAAQ2X,GACvD,IAA4Ch/D,EAAE4vB,EAA1Cpe,GAAS,EAAE0e,EAAM9sB,KAAK26D,WAAW59D,OAErC,GAAyB,IAArBoD,UAAUpD,OAAc,CAC1B,IAAKH,EAAI,EAAGA,EAAIkwB,EAAKlwB,IAEnB,GAAIk3B,GADJtH,EAAQxsB,KAAK26D,WAAW/9D,IACP,MAAQk3B,EAAOtxB,IAAQigB,mBAAmB+J,EAAM,MAAQsH,EAAO8nC,GAAS,CACvFxtD,EAAQxR,EACR,MAGAwR,GAAS,GACXpO,KAAKs7D,iBAAiB94D,EAAKsxB,EAAO8nC,IAASH,cAAcj5D,EAAKyhD,EAAQ71C,OAEnE,CACL,IAAKxR,EAAI,EAAGA,EAAIkwB,EAAKlwB,IAEnB,GAAIk3B,GADJtH,EAAQxsB,KAAK26D,WAAW/9D,IACP,MAAQk3B,EAAOtxB,GAAM,CACpC4L,EAAQxR,EACR,MAGJoD,KAAKs7D,iBAAiB94D,GACtBxC,KAAKy7D,cAAcj5D,EAAKyhD,EAAQ71C,GAElC,OAAOpO,MAMT,CAAC,WAAY,qBAAsB,aAAc,WAAY,OAAQ,OAAQ,OAAQ,QAAS,UAAU+oD,SAAQ,SAAUvmD,GACxH,IAAIq5D,EAAS,MAAQr5D,EAAI7E,OAAO,GAAGC,cAAgB4E,EAAI0X,MAAM,GAC7DsgD,EAAIz+D,UAAU8/D,GAAU,SAAUzhD,GAEhC,OADApa,KAAKwC,GAAK4X,GACHpa,SAQXw6D,EAAIz+D,UAAU+/D,OAAS,WACrB,IAAIr+D,EAAI,GAcR,OAZIuC,KAAK6oC,YACPprC,GAAKuC,KAAK6oC,WACN7oC,KAAK6oC,WAAWx/B,QAAQ,OAASrJ,KAAK6oC,WAAW9rC,OAAS,IAC5DU,GAAK,KAEPA,GAAK,MAEDuC,KAAKk7D,sBAAwBl7D,KAAK8oC,SACpCrrC,GAAK,MAIFA,GAQT+8D,EAAIz+D,UAAU8tD,OAAS,WACrB,IAAIpsD,EAAIuC,KAAK87D,SAgBb,OAdI97D,KAAK+7D,YAAc/7D,KAAK8oC,SAC1BrrC,GAAKuC,KAAK+7D,WACN/7D,KAAK+7D,WAAW1yD,QAAQ,OAASrJ,KAAK+7D,WAAWh/D,OAAS,IAC5DU,GAAK,MAILuC,KAAK8oC,SACPrrC,GAAKuC,KAAK8oC,QACN9oC,KAAKg8D,QAAUh8D,KAAK4zB,QAAU5zB,KAAK4zB,OAAO/1B,OAAO,EAAG,GAAGsR,MAAM,YAC/D1R,GAAK,IAAMuC,KAAKg8D,SAIbv+D,GAMT+8D,EAAIz+D,UAAUkgE,iBAAmB,WAC/B,IAAIroC,EAAO5zB,KAAK4zB,QAAU,GAM1B,MAJwB,MAApBA,EAAK/1B,QAAQ,IACfmC,KAAK4zB,KAAKA,EAAO,KAGZ5zB,MAOTw6D,EAAIz+D,UAAUyf,SAAW,WACvB,IAAIoY,EAAKn2B,EAAIuC,KAAK6pD,SAiClB,OA/BI7pD,KAAKm7D,aACHn7D,KAAK4zB,SACPn2B,GAAK,IAAMuC,KAAK4zB,QAET5zB,KAAK4zB,QACdA,EAAO5zB,KAAK4zB,OACNxO,EAAG+0C,kBAAkB56D,KAAK9B,IAAM2nB,EAAG80C,oBAAoB36D,KAAKq0B,IAG5Dn2B,GACFA,EAAEW,QAAQgnB,EAAG+0C,kBAAmB,KAElCvmC,EAAOA,EAAKx1B,QAAQgnB,EAAG80C,oBAAqB,MAL5Cz8D,GAAK,IAOPA,GAAKm2B,GAED5zB,KAAK8oC,SAAW9oC,KAAK46D,QAAQp/C,YAAcxb,KAAKk8D,YAClDz+D,GAAK,KAGLuC,KAAK46D,QAAQp/C,aACf/d,GAAKuC,KAAK46D,QAAQp/C,YAGhBxb,KAAKk8D,WAC4B,IAA/Bl8D,KAAKk8D,SAAS7yD,QAAQ,OACxB5L,GAAK,KAEPA,GAAKuC,KAAKk8D,UAGLz+D,GAOT+8D,EAAIz+D,UAAU+I,MAAQ,WACpB,OAAO,IAAI01D,EAAIx6D,KAAKwb,kBASqEpe,KAFvFk7D,EAAgC,WAChC,OAAOkC,GACP/zD,KAAK6iD,EAASF,EAAqBE,EAASC,MAAyDA,EAAOD,QAAUgP,GAtb5H,IAicG,SAAU/O,EAAQD,EAASF,GA0C9B,aAEA,IAAI+S,EACM,EADNA,EAEc,EAFdA,EAGI,EAHJA,EAII,EAJJA,EAKK,EALLA,EAMY,EANZA,EAOe,EAPfA,EAQoB,EARpBA,EASW,EATXA,EAUQ,GA0HZ,SAASC,EAAQv8D,EAAMvB,EAAM+9D,GAE3Br8D,KAAKs8D,OAASz8D,EACdw8D,EAAWE,QAAQ18D,GAAQG,KAG3BA,KAAKw8D,kBAAoB,GAGzBx8D,KAAKy8D,kBAAoB,GAEzB,IAAInzC,EAAStpB,KA0Db,SAAS08D,EAAUC,EAAYC,GAE7B,IAAIC,EAAaF,EAAW,GACxBG,EAAcH,EAAW,GAC7BrzC,EAAOuzC,GAAc,CACnBE,QAAS,SAAiBz8D,GACA,mBAAbA,GAKXgpB,EAAOkzC,kBAAkBM,GAAexzC,EAAOkzC,kBAAkBM,IAAgB,GACjFxzC,EAAOkzC,kBAAkBM,GAAar+D,KAAK6B,GAEtCs8D,GAAyC,cAAfC,GAG7BR,EAAW7kD,KAAK,CACdjb,KAAM4/D,EACN7yC,OAAQA,EAAOgzC,OACfU,OAAQF,KAbVrtD,QAAQoJ,MAAM,2CAA6CgkD,IAiB/DI,WAAY,SAAoB38D,GAC9B,GAAwB,mBAAbA,EAAX,CAIAgpB,EAAOkzC,kBAAkBM,GAAexzC,EAAOkzC,kBAAkBM,IAAgB,GACjF,IAAII,EAAM5zC,EAAOkzC,kBAAkBM,GAAazzD,QAAQ/I,IAC3C,IAAT48D,GAIJ5zC,EAAOkzC,kBAAkBM,GAAaz5C,OAAO65C,EAAK,GAC7CN,GAA2E,IAAjDtzC,EAAOkzC,kBAAkBM,GAAa//D,QAEnEs/D,EAAW7kD,KAAK,CACdjb,KAAM4/D,EACN7yC,OAAQA,EAAOgzC,OACfU,OAAQF,KATVrtD,QAAQoJ,MAAM,oCAAsCgkD,EAAa,OAASv8D,EAAST,WANnF4P,QAAQoJ,MAAM,gDAAkDgkD,KAyBxE,SAASM,EAAsBN,EAAYO,GAEzC,IAAIC,EAAc/zC,EAAOkzC,kBAAkBK,GACvCQ,GACFA,EAAYtU,SAAQ,SAAUzoD,GAC5BA,EAASJ,MAAMI,EAAU88D,MAqH/B,IAAK,IAAIv9D,KAnOTG,KAAKs9D,cAAgB,SAAU3wD,GAE7B,GAAIA,aAAoBsN,MAAO,CAG7B,IADA,IAAItd,EAAM,IAAIsd,MAAMtN,EAAS5P,QACpBH,EAAI,EAAGA,EAAI+P,EAAS5P,SAAUH,EACrCD,EAAIC,GAAK0sB,EAAOg0C,cAAc3wD,EAAS/P,IAEzC,OAAOD,EAET,IAAKgQ,IACJA,EAAS,sBACMvP,IAAhBuP,EAAS6C,GACP,OAAO7C,EAGT,IAAI4wD,EAAW5wD,EAAS6C,GACxB,GAAI6sD,EAAWE,QAAQgB,GACvB,OAAOlB,EAAWE,QAAQgB,GAE1B,GAAK5wD,EAASrO,KAAd,CAKA,IAAIk/D,EAAU,IAAIpB,EAAQmB,EAAU5wD,EAASrO,KAAM+9D,GAmBnD,OAlBAmB,EAAQC,UAAUV,SAAQ,WACxB,GAAIV,EAAWE,QAAQgB,KAAcC,EAAS,QACrCnB,EAAWE,QAAQgB,GAK1B,IAAIG,EAAgB,GACpB,IAAK,IAAIhG,KAAgB8F,EACvBE,EAAcj/D,KAAKi5D,GAErB,IAAK,IAAIwF,KAAOQ,SACPF,EAAQE,EAAcR,QAKnCM,EAAQG,mBACDH,EAvBL/tD,QAAQoJ,MAAM,iCAAmC0kD,EAAW,mBA0BhEv9D,KAAK29D,iBAAmB,WAEtB,IAAK,IAAIC,KAAet0C,EAAOmzC,kBAC7BnzC,EAAOmzC,kBAAkBmB,GAAet0C,EAAOg0C,cAAch0C,EAAOmzC,kBAAkBmB,KAiE1F59D,KAAK69D,eAAiB,SAAUC,EAASC,GAGvC,IAAK,IAAIC,KAAiBD,EAAa,CACrC,IAAIE,EAAgBF,EAAYC,GAChC10C,EAAOmzC,kBAAkBuB,GAAiBC,EAG5C,IAAK,IAAIpB,KAAciB,EAGrBX,EAAsBN,EAAYiB,EAAQjB,KAI9C78D,KAAKk+D,cAAgB,SAAUrB,EAAYO,GAEzCD,EAAsBN,EAAY78D,KAAKs9D,cAAcF,KAyFvD9+D,EAAK6/D,QAAQpV,SAtFb,SAAmBqV,GAEjB,IAAIC,EAAaD,EAAW,GACxBE,EAAYF,EAAW,GAC3B90C,EAAO+0C,GAAc,WAGnB,IAFA,IACI/9D,EADAlB,EAAO,GAEFxC,EAAI,EAAGA,EAAIuD,UAAUpD,SAAUH,EAAG,CACzC,IAAI2hE,EAAWp+D,UAAUvD,GACD,mBAAb2hE,EACXj+D,EAAWi+D,EACPA,aAAoBnC,QAAmDh/D,IAAxCi/D,EAAWE,QAAQgC,EAASjC,QAC/Dl9D,EAAKX,KAAK,CACR+Q,GAAM+uD,EAASjC,SAGjBl9D,EAAKX,KAAK8/D,GAGZlC,EAAW7kD,KAAK,CACdjb,KAAQ4/D,EACR7yC,OAAUA,EAAOgzC,OACjBT,OAAUyC,EACVl/D,KAAQA,IACV,SAAUuN,GACR,QAAiBvP,IAAbuP,EAAwB,CAC1B,IAAI7G,EAASwjB,EAAOg0C,cAAc3wD,GAC9BrM,GACFA,EAASwF,WA4DnBxH,EAAKse,WAAWmsC,SArDhB,SAA0ByV,GAExB,IAAIR,EAAgBQ,EAAa,GAC7B9G,EAAe8G,EAAa,GAC5BC,EAAmBD,EAAa,GAIpCl1C,EAAOmzC,kBAAkBuB,GAAiBQ,EAAa,GAEnDC,IAC0B,IAAxBA,EAAiB,KAEnBA,EAAiB,GAAK/G,EAAe,WAEvCgF,EAAU+B,GAAkB,IAG9B33C,OAAO6wC,eAAeruC,EAAQouC,EAAc,CAC1CG,cAAc,EACd9yD,IAAK,WACH,IAAIk5D,EAAgB30C,EAAOmzC,kBAAkBuB,GAM7C,YALsB5gE,IAAlB6gE,GAEFxuD,QAAQm5C,KAAK,mDAAsD8O,EAAe,eAAkBpuC,EAAOgzC,QAGtG2B,GAETja,IAAK,SAAa9sC,GAChB,QAAc9Z,IAAV8Z,EAAJ,CAIAoS,EAAOmzC,kBAAkBuB,GAAiB9mD,EAC1C,IAAIwnD,EAAcxnD,EACdwnD,aAAuBtC,QAAsDh/D,IAA3Ci/D,EAAWE,QAAQmC,EAAYpC,UACrEoC,EAAc,CAAElvD,GAAMkvD,EAAYpC,SAClCD,EAAW7kD,KAAK,CACdjb,KAAQ4/D,EACR7yC,OAAUA,EAAOgzC,OACjB/yC,SAAYy0C,EACZ9mD,MAASwnD,SAXTjvD,QAAQm5C,KAAK,uBAAyB8O,EAAe,uCAwB7Dp5D,EAAKw/D,QAAQ/U,SAAQ,SAAUiU,GAASN,EAAUM,GAAQ,MAEzC1+D,EAAKqgE,MACpBr1C,EAAOzpB,GAAQvB,EAAKqgE,MAAM9+D,GAM5B0pD,EAAOD,QAAU,CACfsV,YAjXc,SAAqBC,EAAWjM,GAEhD,GAA2B,WAAvBl3D,QAAQmjE,IAAqD,mBAAnBA,EAAUC,KAAxD,CAMA,IAAI9yB,EAAUhsC,KACdA,KAAK6+D,UAAYA,EAEjB7+D,KAAK8+D,KAAO,SAAUxgE,GAEA,iBAATA,IACTA,EAAOkQ,KAAKmT,UAAUrjB,IAExB0tC,EAAQ6yB,UAAUC,KAAKxgE,IAGzB0B,KAAK6+D,UAAUE,UAAY,SAAUrtD,GAEnC,IAAIpT,EAAOoT,EAAQpT,KAInB,OAHoB,iBAATA,IACTA,EAAOkQ,KAAKC,MAAMnQ,IAEZA,EAAK/B,MACX,KAAK4/D,EACHnwB,EAAQgzB,aAAa1gE,GACrB,MACF,KAAK69D,EACHnwB,EAAQizB,eAAe3gE,GACvB,MACF,KAAK69D,EACHnwB,EAAQkzB,qBAAqB5gE,GAC7B,MACF,QACEmR,QAAQoJ,MAAM,4BAA6BnH,EAAQpT,QAKzD0B,KAAKm/D,cAAgB,GACrBn/D,KAAKo/D,OAAS,EACdp/D,KAAKwX,KAAO,SAAUlZ,EAAMgC,GAErBA,GAKD0rC,EAAQozB,SAAW32C,OAAO42C,YAE5BrzB,EAAQozB,OAAS32C,OAAO62C,WAEtBhhE,EAAKuD,eAAe,MACtB4N,QAAQoJ,MAAM,yCAA2CrK,KAAKmT,UAAUrjB,KAG1EA,EAAKkR,GAAKw8B,EAAQozB,SAClBpzB,EAAQmzB,cAAc7gE,EAAKkR,IAAMlP,EACjC0rC,EAAQ8yB,KAAKxgE,KAbX0tC,EAAQ8yB,KAAKxgE,IAgBjB0B,KAAKu8D,QAAU,GAEfv8D,KAAKg/D,aAAe,SAAUttD,GAE5B,IAAI4X,EAAS0iB,EAAQuwB,QAAQ7qD,EAAQ4X,QACjCA,EACFA,EAAO40C,cAAcxsD,EAAQsrD,OAAQtrD,EAAQtS,MAE7CqQ,QAAQm5C,KAAK,qBAAuBl3C,EAAQ4X,OAAS,KAAO5X,EAAQsrD,SAIxEh9D,KAAKi/D,eAAiB,SAAUvtD,GAEzBA,EAAQ7P,eAAe,OAI5BmqC,EAAQmzB,cAAcztD,EAAQlC,IAAIkC,EAAQpT,aACnC0tC,EAAQmzB,cAAcztD,EAAQlC,KAJnCC,QAAQoJ,MAAM,sCAAuCrK,KAAKmT,UAAUjQ,KAOxE1R,KAAKk/D,qBAAuB,SAAUxtD,GAEpC,IAAK,IAAI9U,KAAK8U,EAAQpT,KAAM,CAC1B,IAAIA,EAAOoT,EAAQpT,KAAK1B,GACpB0sB,EAAS0iB,EAAQuwB,QAAQj+D,EAAKgrB,QAC9BA,EACFA,EAAOu0C,eAAev/D,EAAKw/D,QAASx/D,EAAKse,YAEzCnN,QAAQm5C,KAAK,8BAAgCtqD,EAAKgrB,OAAS,KAAOhrB,EAAK0+D,QAG3EhxB,EAAQx0B,KAAK,CAAEjb,KAAM4/D,KAGvBn8D,KAAKkT,MAAQ,SAAUxB,GAErBs6B,EAAQ8yB,KAAK,CAAEviE,KAAM4/D,EAA+B79D,KAAMoT,KAG5Ds6B,EAAQx0B,KAAK,CAAEjb,KAAM4/D,IAAgC,SAAU79D,GAC7D,IAAK,IAAI7B,KAAc6B,EACR,IAAI89D,EAAQ3/D,EAAY6B,EAAK7B,GAAauvC,GAGzD,IAAK,IAAIvvC,KAAcuvC,EAAQuwB,QAC7BvwB,EAAQuwB,QAAQ9/D,GAAYkhE,mBAE1B/K,GACFA,EAAa5mB,GAEfA,EAAQx0B,KAAK,CAAEjb,KAAM4/D,YAhHrB1sD,QAAQoJ,MAAM,yHACand,QAAQmjE,GAAa,qBAAuBnjE,QAAQmjE,EAAUC,UAmX1F,SAAUvV,EAAQD,EAASF,GAE9B,aAEA,IAAImW,EAAYnW,EAAoB,GAChCiH,EAASjH,EAAoB,GAC7BsE,EAAmBtE,EAAoB,GACvCmK,EAAsBnK,EAAoB,GAC1CoW,EAAcpW,EAAoB,IAQtC,SAASqW,EAAsBC,EAAaC,GAC1CJ,EAAUjI,cAAcoI,EAAY3R,gBAAiB7wD,OAAO+2D,SAC5DsL,EAAUjI,cAAcoI,EAAYvQ,iBAAkBjyD,OAAO25D,UAC7D8I,EAAQt+D,OAIVkoD,EAAOD,QAAQjoD,KAAO,WAOpB,IAAIu+D,EAAa,KACbC,EAAS,KAGb3iE,OAAO25D,SAAW,GAIZ35D,OAAO4iE,yBAEXrwD,QAAQC,IAAI,2DACZxS,OAAO4iE,wBAAwBC,oBAAoB,SACnDH,EAAa,IAAIlS,EAAiBxwD,SACvBA,OAAO8iE,IAAQ9iE,OAAO8iE,GAAGC,qBACpCxwD,QAAQC,IAAI,iDACZxS,OAAO+2D,QAAU,GAGjB/2D,OAAO8uC,QAAU,IAAIwzB,EAAYZ,YAAYoB,GAAGC,qBAAqB,SAAUj0B,GAC7Ev8B,QAAQC,IAAI,oCAGZxS,OAAO25D,SAASqJ,sBAAwB,WAEtCN,EAAa,IAAIlS,EAAiB1hB,EAAQuwB,SAC1CgD,EAAU/H,qBAAqBxrB,EAAQuwB,QAAQtI,QAAS/2D,OAAO+2D,QAASsL,EAAUzH,mBAClF+H,EAAOnP,oBAAoBxzD,OAAO+2D,SAClCwL,EAAsBG,EAAYC,IAIpC7zB,EAAQuwB,QAAQuD,wBAAwBC,oBAAoB,cAG9DtwD,QAAQC,IAAI,sEACZxS,OAAO+2D,QAAU,GACjB2L,EAAa,IAAIrM,EAAoBr2D,SAIvC2iE,EAAS,IAAIxP,EAAOnzD,OAAO+2D,QAAS/2D,OAAO25D,SAAU35D,QAIjD0iE,GACFH,EAAsBG,EAAYC,OClqExC,IAAIM,kBAAoB,SAA2BhnD,EAAgB/N,GAyBjE,MAAO,CACL/J,KAzBF,WACE++D,mBAAmBC,kBAAkBlnD,GAKrCxT,OAAO26D,2BAA6B,CAClC1mB,GAAMj0C,OAAO4F,OAAOO,YAAY,OAAQ,+BACxCmvC,GAAMt1C,OAAO4F,OAAOO,YAAY,OAAQ,+BACxC+6C,QAAWlhD,OAAO4F,OAAOO,YAAY,OAAQ,gCAE/CnG,OAAOuG,aAAe,IAAIvG,OAAO46D,KAAK56D,OAAO26D,4BAC7C36D,OAAOuG,aAAakB,sBAAuB,EAC3CzH,OAAOuG,aAAaqJ,YAAYnK,GAEhCpP,EAAEwQ,KAAK7G,OAAOuG,aAAa2I,eAAenI,MAAK,WAC7C/G,OAAO66D,gBAAkB,IAAI76D,OAAOkI,UAAU6G,SAASD,QAAQ9O,OAAOuG,cACtEu0D,eAAeC,WAAW,kCAAkC,WAC1DN,mBAAmBO,iBACnBC,gBAAgB5zD,mBAUpB6zD,UAAY,WACd,SAASC,EAAaC,EAAQC,GAC5BhlE,EAAE,eAAeq1B,MAAM0vC,GAkTvB/kE,EAAE,gCAAgCilE,QAAO,WACvC,IAAItuC,EAAO3yB,KAAKoR,MAAM,GACtB,GAAIuhB,EAAM,CACR,IAAIuuC,EAAa,IAAIrb,WACrBqb,EAAWzyB,OAAS,SAAUgoB,GAC5B,IAAI7uD,EAAU6uD,EAAI1tD,OAAOjD,OACzB,GAAgB,OAAZ8B,EACF,IACE,IAAIu5D,EAAc3yD,KAAKC,MAAM7G,IAyBzC,SAAsCw5D,GACpC,IAAIr6C,EAAOD,OAAOC,KAAKq6C,GACvB,GAAoB,IAAhBr6C,EAAKhqB,OACP,KAAM,wBAGR,GADqC,aAAZgqB,EAAK,IAAiC,cAAZA,EAAK,GAEtD,KAAM,wBA/BEs6C,CAA6BF,GAC7B34D,SAASquB,eAAe,uBAAuBra,MAAM8kD,QAAU,OAC/DC,EAAmBJ,GACnB,MAAOK,IAenB,SAA2B9vD,GACzB,IAAI+E,EAAQjO,SAASquB,eAAe,uBACpCpgB,EAAM+F,MAAMF,eAAe,WAC3B7F,EAAMgrD,uBAAuB,yBAAyB,GAAGl3D,UAAYmH,EAjB3DgwD,CAAkB/7D,OAAOuG,aAAa0I,WAAW,iCAIvDssD,EAAWhb,WAAWvzB,OAI1B32B,EAAE,iBAAiBq1B,OAAM,WACJ7oB,SAASquB,eAAe,+BAC9BxF,WAvUf,IAAIswC,EAAgBn5D,SAASquB,eAAe,uBAE5C,GAA4C,IAAxC+qC,oBAAoBC,SAAS9kE,OAI/B,OAHA+kE,EAAW,gBACXA,EAAW,mBACXt5D,SAASquB,eAAe,mBAAmBra,MAAM8kD,QAAU,SAI7D,IAAK,IAAI1kE,EAAI,EAAGA,EAAIglE,oBAAoBC,SAAS9kE,OAAQH,IAAK,CAC5D,IAAImlE,EAAev5D,SAASC,cAAc,MAC1Cu5D,EAASJ,oBAAoBC,SAASjlE,GACtCqlE,EAAgBC,EAAoBF,EAAOniE,KAAMmiE,EAAOniE,MAAM,GAAM,EAAOjD,GAM3E,GAJAmlE,EAAappB,UAAY,cACzBopB,EAAap3D,YAAYw3D,EAAoB,OAASH,EAAOniE,OAC7DkiE,EAAap3D,YAAYs3D,GAErBD,EAAOI,SAAWJ,EAAOI,QAAQrlE,OAAS,EAAG,CAC/C,IAAIslE,EAAe75D,SAASC,cAAc,MAC1C65D,EAAiB95D,SAASC,cAAc,OACxC65D,EAAe9yD,GAAK,mBAAqBwyD,EAAOniE,KAChDyiE,EAAe3pB,UAAY,oBAC3B4pB,EAAgBP,EAAQM,GACxBD,EAAa13D,YAAY23D,GACzBP,EAAap3D,YAAY03D,GAG3BV,EAAch3D,YAAYo3D,GAExBf,GACFO,IAWJ,SAASO,EAAWU,GAClBh6D,SAASquB,eAAe2rC,GAAOC,UAAW,EAG5C,SAAS/B,EAAWv7D,EAAU7E,GAC5BqF,OAAO66D,gBAAgBtzD,YAAYvH,OAAOuH,YAAY/H,IACtDuH,MAAK,SAAUgB,GACb1R,EAAE,oBAAoB4T,QACtB5T,EAAEiH,KAAKyK,EAAkB,CACvBg1D,WAAmC,YAAvB3vC,mBAAmC,qBAAuBptB,OAAO4F,OAAOo3D,aAAe,gBAAkB,uBAAyB,mCAC9IC,WAAmC,YAAvB7vC,mBAAmC,qBAAuBptB,OAAO4F,OAAOo3D,aAAe,gBAAkB,uBAAyB,qCAChJ3+D,SAAS,yBACQ5G,IAAbkD,GAA8C,mBAAbA,GAAyBA,OAIlE,SAASuiE,EAAuB9B,EAAQ+B,GACtC9mE,EAAE,eAAeq1B,MAAM0vC,GACvB/kE,EAAE,eAAeq1B,MAAMyxC,GAIvB,IAHA,IAAIC,EAAUv6D,SAASquB,eAAe,+BACtCmsC,EAAgBl8C,OAAOC,KAAK66C,oBAAoBqB,iBAEvCrmE,EAAI,EAAGA,EAAIomE,EAAcjmE,OAAQH,IAAK,CAC7C,IAAIolE,EAASJ,oBAAoBC,SAASmB,EAAcpmE,IAEpDsmE,EAAQ16D,SAASC,cAAc,MACnC06D,EAAgB36D,SAASC,cAAc,MACvC26D,EAAiB56D,SAASC,cAAc,MAExC06D,EAAcxqB,UAAY,iBAC1BwqB,EAAc54D,UAAYy3D,EAAOniE,KACjCujE,EAAez4D,YAAY04D,EAAgBL,EAAcpmE,KAEzDsmE,EAAMv4D,YAAYw4D,GAClBD,EAAMv4D,YAAYy4D,GAElBL,EAAQp4D,YAAYu4D,IAkCxB,SAASG,EAAgBC,GACvB,IAAIC,EAAW/6D,SAASC,cAAc,UACtCu5D,EAASJ,oBAAoBC,SAASyB,GACtCE,EAAY5B,oBAAoBqB,gBAAgBK,GAEhDC,EAAS5qB,UAAY,YACrB4qB,EAASE,SAAW,WAClB7B,oBAAoBqB,gBAAgBK,GAAetjE,KAAKkX,OAE1D,IAAK,IAAIta,EAAI,EAAGA,EAAIolE,EAAO0B,iBAAiB3mE,OAAQH,IAAK,CACvD,IAAI+mE,EAAWn7D,SAASC,cAAc,UACtCk7D,EAAShrB,UAAY,YACrBgrB,EAASp5D,UAAYy3D,EAAO0B,iBAAiB9mE,GAAGgnE,YAChDD,EAASzsD,MAAQ8qD,EAAO0B,iBAAiB9mE,GAAG4S,GAC5C+zD,EAAS54D,YAAYg5D,GAGvB,OADAJ,EAASrsD,MAAQssD,EACVD,EAGT,SAAShB,EAAgBP,EAAQK,GAC/B,IAAK,IAAIzlE,EAAI,EAAGA,EAAIolE,EAAOI,QAAQrlE,OAAQH,IAAK,CAC9C,IAGAinE,EAAO5B,EAHH6B,EAAS9B,EAAOI,QAAQxlE,GAC5BmnE,EAAa/B,EAAOniE,KAAO,IAAMikE,EAAOjkE,KACxCmkE,EAAgC,IAAzBF,EAAOG,OAAOlnE,SAA+B,IAAf+mE,EAAOt0D,GAG5C,GAAIwyD,EAAOkC,kBAAkC,IAAfJ,EAAOt0D,GACnC,IAAK,IAAIoS,EAAI,EAAGA,EAAIkiD,EAAOG,OAAOlnE,OAAQ6kB,IAAK,CAC7C,IAAIuiD,EAAaL,EAAOG,OAAOriD,GAAG1K,MAClCktD,EAAkBpC,EAAOniE,KAAO,IAAMskE,EAEL,eAA7BA,EAAWnmE,gBAEf6lE,EAASr7D,SAASC,cAAc,MAChCw5D,EAAgBC,EAAoBkC,EAAiBD,GAAY,EAAOH,GACxEH,EAAOl5D,YAAYs3D,GACnBI,EAAa13D,YAAYk5D,SAGtB,IAAmB,IAAfC,EAAOt0D,GAAX,CAOP,GALAyyD,EAAgBC,EAAoB6B,EAAYD,EAAOjkE,MAAM,EAAOmkE,GACpEH,EAASr7D,SAASC,cAAc,MAC3Bu7D,GACLH,EAAOl5D,YAAYw3D,EAAoB,OAAS4B,IAChDF,EAAOl5D,YAAYs3D,IACd+B,EAAM,CACT,IAAIK,EAAkB77D,SAASC,cAAc,MAC7C65D,EAAiB95D,SAASC,cAAc,OACxCo7D,EAAOlrB,UAAY,cACnB2pB,EAAe9yD,GAAK,mBAAqBu0D,EACzCzB,EAAe3pB,UAAY,oBAC3B,IAAS/2B,EAAI,EAAGA,EAAIkiD,EAAOG,OAAOlnE,OAAQ6kB,IAAK,CACzCuiD,EAAaL,EAAOG,OAAOriD,GAAG1K,MAAMpa,MAAM,KAAK,GAAnD,IACAwnE,EAAY97D,SAASC,cAAc,MACnC27D,EAAkBL,EAAa,IAAMI,EACrCG,EAAU35D,YAAYu3D,EAAoBkC,EAAiBD,GAAY,GAAO,IAC9E7B,EAAe33D,YAAY25D,GAC3BD,EAAgB15D,YAAY23D,GAE9BuB,EAAOl5D,YAAY05D,GAErBhC,EAAa13D,YAAYk5D,KAI7B,SAAS3B,EAAoB1yD,EAAI+0D,EAAWC,EAAMR,EAAM51D,GACjDo2D,IAAMA,GAAO,GACbR,IAAMA,GAAO,GAClB,IAAI/B,EAAgBz5D,SAASC,cAAc,OAC3Cg8D,EAAkBj8D,SAASC,cAAc,SACzCi8D,EAAkBl8D,SAASC,cAAc,SAiEzC,OAhEAw5D,EAAczyD,GAAKA,EACnByyD,EAActpB,UAAY,cAC1BspB,EAAchmD,aAAa,UAAWuoD,GACtCvC,EAAchmD,aAAa,UAAW+nD,GAClCQ,GAAMvC,EAAchmD,aAAa,WAAY7N,GACjDq2D,EAAgB9rB,UAAY,qBAC5B+rB,EAAgB/rB,UAAY,qBAC5B8rB,EAAgBloE,KAAO,WACvBmoE,EAAgBn6D,UAAYg6D,EAE5BtC,EAAc0C,QAAU,WACtB,IAAIC,EAAe5kE,KAAKyhE,uBAAuB,sBAAsB,GACrEoD,EAAsB7kE,KAAK8kE,cAAcn7D,qBAAqB,MAC9D04D,EAAe,GACf0C,EAAgB/kE,KAAKwP,GAAG1S,MAAM,KAAK,GACnCkoE,EAAYx8D,SAASquB,eAAekuC,GAAe/6D,aAAa,YAChEi7D,EAAkBjlE,KAAKwP,GAAGb,UAAU,EAAG3O,KAAKwP,GAAGzS,OAASiD,KAAKuK,UAAUxN,OAAS,GAKhF,GAHI8nE,EAAoB9nE,OAAS,IACjCslE,EAAewC,EAAoB,GAAGpD,uBAAuB,uBAEhB,OAAzCmD,EAAa56D,aAAa,WAAqB,CAGjD,IAFA,IAAIk7D,EAAallE,KAAKwP,GAAG1S,MAAM,KAC/BqoE,EAAY,GACHvoE,EAAI,EAAGA,EAAIsoE,EAAWnoE,OAAQH,IAAK,CAC1CuoE,GAAaD,EAAWtoE,IACpBiT,EAAUrH,SAASquB,eAAesuC,IACjB1D,uBAAuB,sBAAsB,GACvDxlD,aAAa,UAAW,WACI,QAAnCpM,EAAQ7F,aAAa,aAClB43D,oBAAoBwD,iBAAiBJ,KAC1CpD,oBAAoBwD,iBAAiBJ,GAAa,IAClDpD,oBAAoBwD,iBAAiBJ,GAAWn1D,EAAQL,IAAM,GAEhE21D,GAAa,IAGf,IAASvoE,EAAI,EAAGA,EAAIylE,EAAatlE,OAAQH,IAAK,CAC5C,IAAIiT,EAAUwyD,EAAazlE,GAAGkoE,cAC9BzC,EAAazlE,GAAGqf,aAAa,UAAW,WACD,QAAnCpM,EAAQ7F,aAAa,aAClB43D,oBAAoBwD,iBAAiBJ,KAC1CpD,oBAAoBwD,iBAAiBJ,GAAa,IAClDpD,oBAAoBwD,iBAAiBJ,GAAWn1D,EAAQL,IAAM,QAG7D,CACLo1D,EAAa16D,gBAAgB,kBACtB03D,oBAAoBwD,iBAAiBJ,GAAWhlE,KAAKwP,IAC5D,IAAS5S,EAAI,EAAGA,EAAIylE,EAAatlE,OAAQH,IAAK,CACxCuoE,EAAY9C,EAAazlE,GAAGkoE,cAAct1D,GAC9C6yD,EAAazlE,GAAGsN,gBAAgB,kBACzB03D,oBAAoBwD,iBAAiBJ,GAAWG,GAErB,QAAhCnlE,KAAKgK,aAAa,kBACf43D,oBAAoBwD,iBAAiBJ,GAYlD,SAA+BD,EAAeE,EAAiBD,GAC7D,IAAIK,EAAW78D,SAASquB,eAAeouC,GACvCJ,EAAsBQ,EAASP,cAAcn7D,qBAAqB,MAClE04D,EAAe,GAEXwC,EAAoB9nE,OAAS,IACjCslE,EAAewC,EAAoB,GAAGpD,uBAAuB,uBAG7D,IADA,IAAI6D,GAAgB,EACX1oE,EAAI,EAAGA,EAAIylE,EAAatlE,OAAQH,IAAK,CAC5C,GAA+C,MAA3CylE,EAAazlE,GAAGoN,aAAa,WAAoB,CACnDs7D,GAAgB,EAChB,MAEFA,GAAgB,EAEdA,IACFD,EAAS5D,uBAAuB,sBAAsB,GAAGv3D,gBAAgB,WACjC,QAApCm7D,EAASr7D,aAAa,kBACnB43D,oBAAoBwD,iBAAiBJ,UAErCpD,oBAAoBwD,iBAAiBJ,GAAWK,EAAS71D,KAElE,GAAIu1D,IAAkBE,GAA2F,IAAxEn+C,OAAOC,KAAK66C,oBAAoBwD,iBAAiBJ,IAAYjoE,OAAc,CACrGyL,SAASquB,eAAekuC,GAC9BtD,uBAAuB,sBAAsB,GAAGv3D,gBAAgB,kBAChE03D,oBAAoBwD,iBAAiBJ,IApC1CO,CAAsBR,EAAeE,EAAiBD,KAI1D/C,EAAct3D,YAAY85D,GAC1BxC,EAAct3D,YAAY+5D,GAEnBzC,EAiCT,SAASE,EAAoB3yD,GAC3B,IAAIg2D,EAAWh9D,SAASC,cAAc,UAiBtC,OAhBA+8D,EAAS7sB,UAAY,uCACrB6sB,EAASj7D,UAAY,IACrBi7D,EAASh2D,GAAKA,EACdg2D,EAASb,QAAU,WACjB,IAAIc,EAAazlE,KAAKwP,GAAGb,UAAU,EAAG3O,KAAKwP,GAAGzS,QAC9CulE,EAAiB95D,SAASquB,eAAe,mBAAqB4uC,GAC1DnD,IAC+B,sBAA7BA,EAAe3pB,WACjB2pB,EAAe3pB,UAAY,GAC3B34C,KAAKuK,UAAY,MAEjB+3D,EAAe3pB,UAAY,oBAC3B34C,KAAKuK,UAAY,OAIhBi7D,EAgDT,SAASjE,EAAmBH,GACrBA,IACHA,EAAgB,CACdS,SAAUD,oBAAoBwD,iBAC9BM,UAAW9D,oBAAoBqB,kBAKnC,IADA,IAAID,EAAgBl8C,OAAOC,KAAK66C,oBAAoBwD,kBAC3CxoE,EAAI,EAAGA,EAAIomE,EAAcjmE,OAAQH,IAAK,CAC7C,IAAIwlE,EAAUt7C,OAAOC,KAAK66C,oBAAoBwD,iBAAiBpC,EAAcpmE,KAC7E+oE,EAASvD,EAAQ,GAAGtlE,MAAM,KAAK,IAC/B8oE,EAAiBp9D,SAASquB,eAAe8uC,IAC1BlE,uBAAuB,sBAAsB,GAAGv3D,gBAAgB,WAC/E,IAAK,IAAI0X,EAAI,EAAGA,EAAIwgD,EAAQrlE,OAAQ6kB,IAAK,CACzBpZ,SAASquB,eAAeurC,EAAQxgD,IACtC6/C,uBAAuB,sBAAsB,GAAGv3D,gBAAgB,YAG5E03D,oBAAoBwD,iBAAmB,GACvCxD,oBAAoBqB,gBAAkB,GACtC,IAAI4C,EAAmB/+C,OAAOC,KAAKq6C,EAAcS,UACjD,IAASjlE,EAAI,EAAGA,EAAIipE,EAAiB9oE,OAAQH,IAAK,CAChD,IAEAgpE,EAFI3B,EAASn9C,OAAOC,KAAKq6C,EAAcS,SAASgE,EAAiBjpE,KACjE+oE,EAAS1B,EAAO,GAAGnnE,MAAM,KAAK,GAE9B,GADA8oE,EAAiBp9D,SAASquB,eAAe8uC,GACrB,CAClB,IAAIX,EAAYY,EAAe57D,aAAa,YAC5C47D,EAAenE,uBAAuB,sBAAsB,GAAGxlD,aAAa,UAAW,WACnFmlD,EAAcsE,UAAUG,EAAiBjpE,MAC3CglE,oBAAoBqB,gBAAgB+B,GAAa5D,EAAcsE,UAAUG,EAAiBjpE,KAE5F,IAASglB,EAAI,EAAGA,EAAIqiD,EAAOlnE,OAAQ6kB,IAAK,CACtC,IAAIkkD,EAAat9D,SAASquB,eAAeotC,EAAOriD,IAC5CkkD,IACFA,EAAWrE,uBAAuB,sBAAsB,GAAGxlD,aAAa,UAAW,WAG9E2lD,oBAAoBwD,iBAAiBJ,KAC1CpD,oBAAoBwD,iBAAiBJ,GAAa,IAClDpD,oBAAoBwD,iBAAiBJ,GAAWc,EAAWt2D,IAAM,MAQ3E,MAAO,CACLsxD,aAAcA,EACd+B,uBAAwBA,EACxBkD,wBA5TF,SAASA,EAAwBC,EAAUjF,GACzC/kE,EAAE,iBAAiBq1B,MAAM20C,GACzBhqE,EAAE,eAAeq1B,OAAM,WACrB,IAAI40C,EAAavF,EAAWpuD,KAAKtS,KAAM,gCAAiC8gE,EAAaxuD,KAAKtS,KAAM+gE,GAAQ,IACxG,GAAgE,IAA5Dj6C,OAAOC,KAAK66C,oBAAoBqB,iBAAiBlmE,OACnDkpE,QACK,CACL,IAAIC,EAAaxF,EAAWpuD,KAC5BtS,KACA,kCACA+lE,EAAwBzzD,KAAKtS,KAAMgmE,EAAUjF,IAE7CL,EAAW,wCAAyCmC,EAAuBvwD,KAAKtS,KAAMkmE,EAAYD,QAGtG,IAAIE,EAAmB,CACrBtE,SAAUD,oBAAoBwD,iBAC9BM,UAAW9D,oBAAoBqB,iBAGjCjnE,EAAE,wBAAwBq1B,OAAM,WAC9B,IAAI+f,EAAQ5oC,SAASspC,cACrBV,EAAMg1B,WAAW59D,SAASquB,eAAe,oCACzC35B,OAAOmpE,eAAeC,kBACtBppE,OAAOmpE,eAAeE,SAASn1B,MAEjC5oC,SAASquB,eAAe,mCAAmCtsB,UAAYiE,KAAKmT,UAAUwkD,EAAkB,KAAM,IAmS9GK,4BA7WF,WACExqE,EAAE,mBAAmB6U,SAAS,uBAC9B7U,EAAE,uBAAuB6U,SAAS,uBAElCrI,SAASquB,eAAe,cAAc4rC,UAAW,GA0WjDX,WAAYA,EACZpB,WAAYA,IAIZ+F,cAAgB,WAClB,IAAIC,EAAkB,KACtBC,EAAgB,IAAIC,aA4BpB,SAAS7J,EAAQ8J,EAAUC,GACzBrG,eAAeqB,WAAW,cAC1B6E,EAAcI,sBAAsB,UAAW,MAAOL,GAAiB,GACvEC,EAAcK,YAAY,WAAYH,GACtCF,EAAcK,YAAY,eAAgBF,GACtC7S,QAAQ2C,QAAU3C,QAAQhK,UAAUE,UACtC8c,EAAgBhT,QAAQllB,QAExBk4B,EAAgBC,GAIpB,SAASC,IACP1G,eAAeqB,WAAW,cAK1B,IAJA,IAAIsD,EAAmBxD,oBAAoBwD,iBAC3CpC,EAAgBl8C,OAAOC,KAAKq+C,GAC5BgC,GAAe,EAENxqE,EAAI,EAAGA,EAAIomE,EAAcjmE,OAAQH,IAAK,CAI7C,IAHA,IAAIolE,EAASJ,oBAAoBC,SAASmB,EAAcpmE,IACxDwlE,EAAUt7C,OAAOC,KAAKq+C,EAAiBpC,EAAcpmE,KACrDyqE,GAAiB,EACRzlD,EAAI,EAAGA,EAAIwgD,EAAQrlE,OAAQ6kB,KACD,IAA7BwgD,EAAQxgD,GAAGvY,QAAQ,OACrBg+D,GAAiB,EACjBD,GAAe,GAGfC,IAAmBzF,oBAAoBqB,gBAAgBD,EAAcpmE,IACvEglE,oBAAoBqB,gBAAgBD,EAAcpmE,IAAMolE,EAAO0B,iBAAiB,GAAGl0D,GACzE63D,UACHzF,oBAAoBqB,gBAAgBD,EAAcpmE,IAI7D,IAAI0qE,EAAsBxgD,OAAOC,KAAK66C,oBAAoBqB,iBAC1D,IAASrmE,EAAI,EAAGA,EAAI0qE,EAAoBvqE,OAAQH,IAAK,EAC/ColE,EAASJ,oBAAoBwD,iBAAiBkC,EAAoB1qE,aAE7DglE,oBAAoBqB,gBAAgBqE,EAAoB1qE,IAInE,IAAIqpE,EAAaxF,eAAeC,WAAWpuD,KAAKtS,KAAM,gCAAiCygE,eAAeK,aAAaxuD,KAAKtS,KAAMmnE,GAAO,IACjIjB,EAAazF,eAAeC,WAAWpuD,KAC3CtS,KACA,kCACAygE,eAAesF,wBAAwBzzD,KAAKtS,KAAMuuD,EAAS4Y,IAEvDC,EACF3G,eAAeC,WAAW,wCAAyCD,eAAeoC,uBAAuBvwD,KAAKtS,KAAMkmE,EAAYD,IAEhIC,IAIJ,SAAS3X,IAEP,IADA,IAAIyU,EAAgBl8C,OAAOC,KAAK66C,oBAAoBwD,kBAC3CxoE,EAAI,EAAGA,EAAIomE,EAAcjmE,OAAQH,IAAK,CAC7C,IAAIolE,EAASJ,oBAAoBC,SAASmB,EAAcpmE,IACxDwlE,EAAUt7C,OAAOC,KAAK66C,oBAAoBwD,iBAAiBpC,EAAcpmE,KACzE2qE,EAAe,GAAG/D,EAAY,KAC9B6D,GAAiB,EACjBE,EAAa9oE,KAAK,YAClB,IAAK,IAAImjB,EAAI,EAAGA,EAAIwgD,EAAQrlE,OAAQ6kB,IAClC2lD,EAAa9oE,KAAK2jE,EAAQxgD,GAAGjT,UAAUqzD,EAAOniE,KAAK9C,OAAS,EAAGqlE,EAAQxgD,GAAG7kB,UACzC,IAA7BqlE,EAAQxgD,GAAGvY,QAAQ,OACrBg+D,GAAiB,EACjBD,cAAe,GAGfC,IACJ7D,EAAY5B,oBAAoBqB,gBAAgBD,EAAcpmE,KAE9D+pE,EAAcI,sBAAsB,WAAY/E,EAAOniE,KAAM,CAC3DyjE,YAAeN,EAAcpmE,GAC7ByqE,eAAkBA,EAClB7D,UAAaA,EACbpB,QAAWmF,IAGftT,QAAQC,eAAiB1lD,KAAKmT,UAAUigD,oBAAoB1N,gBAC5DD,QAAQllB,SAqBV,SAASy4B,EAAiBC,GAExB,IADA,IAAIC,EAAY,GACP9qE,EAAI,EAAGA,EAAI6qE,EAAW1qE,OAAQH,IACrC8qE,EAAUjpE,KAAK,CACb+Q,GAAIm4D,EAAaF,EAAW7qE,IAC5B8O,SAAUuoD,QAAQrJ,aAAajlC,SAGnC,OAAO+hD,EAmET,SAASE,EAAgBC,EAAYC,GAC9BA,IAASA,EAAU,GAExB,IAAI9sD,EAAWhf,EAAEuQ,WACjBs7D,EAAW7sD,SAAWA,EAEtB+sD,EAASF,GAET7rE,EAAEwQ,KAAKwO,GAAUtO,MAAK,WACpBm7D,EAAWG,kBACV1xD,MAAK,SAAUiyC,GAChB0f,EAAO1f,EAAKuf,EAAU,EAAGF,EAAgBt1D,KAAKtS,KAAM6nE,EAAYC,EAAU,OAI9E,SAASC,EAASF,GAChB,IAAIK,EAAgBvB,EAAcwB,oBAClCC,EAAWzB,EAAc0B,cACzB5C,EAAaoC,EAAWziE,MAAMotD,UAAUhjD,GACxCi4D,EAAaS,EAAcrG,SAAS4D,GAAYrD,QAEhDpmE,EAAEqP,KAAK,CACL9O,KAAM,OACN+O,IAAKu8D,EAAWv8D,IAChBI,SAAU,OACVpN,KAAMupE,EAAWS,YACjBC,WAAY,SAAoBrwB,GAC9BA,EAAQswB,iBAAiB,gBAAiB,UAAYJ,EAASK,cAGjEC,QAAS,SAAiBpqE,GAExB,IADA,IAAIwH,EAASxH,EAAK4Y,MACTta,EAAI,EAAGA,EAAIkJ,EAAO/I,OAAQH,IAAK,CAEtC,IADA,IAAI+rE,EAAS,GACJ/mD,EAAI,EAAGA,EAAI6lD,EAAW1qE,OAAQ6kB,IAAK,CAC1C,IAAIgnD,EAAQjB,EAAaF,EAAW7lD,IACpCinD,EAAgBpB,EAAW7lD,GAC3B,GAAyB,MAArBinD,EAAc,GAAY,CAC5B,IAAIC,EAAuBD,EAAc,GAAG7qE,cAE5C6qE,EAAgBC,GADhBD,EAAgBA,EAAcl6D,UAAU,EAAGk6D,EAAc9rE,SAG3D4rE,EAAOC,GAAS9iE,EAAOlJ,GAAGisE,GAE5BjH,oBAAoBmH,SAAStqE,KAAKkqE,GAEhC7iE,EAAO/I,OAAS,GAClBk3D,QAAQzF,eAAe,kBAAoBoT,oBAAoBmH,SAAShsE,OAAS,OAASuB,EAAK,qBAAuB,YACtHupE,EAAW7sD,SAAShO,QAAQ1O,EAAK,uBAEjCupE,EAAW7sD,SAAShO,QAAQ,IAIhC6L,MAAO,SAAe0vC,GAAMsf,EAAW7sD,SAASzM,OAAOg6C,MAI3D,SAAS0e,EAAgB3mE,GACvB,IAAI4nE,EAAgBjU,QAAQ2C,QAAU3C,QAAQhK,UAAUC,iBAAmB0X,oBAAoB1N,eAAiByS,EAAcwB,oBAC9HC,EAAWzB,EAAc0B,cACzBrsE,EAAEqP,KAAK,CACL9O,KAAM,OACN+O,IAAK48D,EAAcc,QAAQ19D,IAAM,uBACjCi+B,YAAa,oCACbjrC,KAAM,0CACNoN,SAAU,OACV68D,WAAY,SAAoBrwB,GAC9BA,EAAQswB,iBAAiB,gBAAiB,SAAWS,KAAKb,EAASvB,SAAW,IAAMuB,EAAStB,gBAG/F4B,QAAS,SAAiBpqE,GACpBA,EAAK4qE,cACPvC,EAAcK,YAAY,cAAe1oE,EAAK4qE,mBAC7B9rE,IAAbkD,GAA8C,mBAAbA,GAAyBA,MAE9DmgE,eAAe+F,8BACfvS,QAAQvkD,IAAI,iBAAmBlB,KAAKmT,UAAUrjB,IAC9C21D,QAAQjG,aAAa,qCAIzBn1C,MAAO,SAAe0vC,GACpBkY,eAAe+F,8BACfvS,QAAQvkD,IAAI,iBAAmBlB,KAAKmT,UAAU4mC,IAC3B,MAAfA,EAAIhyC,OACR09C,QAAQjG,aAAa,mCAErBiG,QAAQ/F,eAAe,wCAK7B,SAASgZ,EAAaY,GACfA,IAASA,EAAU,GACxB,IAAII,EAAgBtG,oBAAoB1N,eACxCkU,EAAWzB,EAAc0B,cACzBrsE,EAAEqP,KAAK,CACL9O,KAAM,MACN+O,IAAK48D,EAAcc,QAAQ19D,IAAM,6DACjCI,SAAU,OACV68D,WAAY,SAAoBrwB,GAC9BA,EAAQswB,iBAAiB,gBAAiB,UAAYJ,EAASK,cAGjEC,QAAS,SAAiB/7D,GACxB,IAAIk1D,EAAWl1D,EAASuK,MACpB2qD,EAAS9kE,OAAS,IACpB6kE,oBAAoBC,SAAWA,GAEjCpB,eAAeC,WAAW,gCAAiCD,eAAeK,aAAaxuD,KAAKtS,KAAMmnE,KAGpGtuD,MAAO,SAAe0vC,GAAM0f,EAAO1f,EAAKuf,EAAU,EAAGZ,EAAa50D,KAAKtS,KAAM8nE,EAAU,OAI3F,SAASG,EAAO1f,EAAKuf,EAASxnE,GAE5B,GADAmP,QAAQC,IAAIo4D,GACO,MAAfvf,EAAIhyC,QAAkBuxD,EAAU,EAClCb,EAAgB3mE,OACX,CACL2zD,QAAQvkD,IAAI,uBAAyBlB,KAAKmT,UAAU4mC,IACpD0L,QAAQvkD,IAAI,sBAAwBo4D,GACpC,IAAIp2D,EAAU62C,EAAIpwC,aAAeowC,EAAIpwC,aAAazG,QAAU,sBAC5DuiD,QAAQ/F,eAAe,iBAAmBx8C,IAI9C,SAASi2D,EAAatqE,GASpB,OARaA,EAAIe,QAAQ,KAAM,KAC/BA,QAAQ,KAAM,iBACdA,QAAQ,KAAM,WACdA,QAAQ,KAAM,WACdA,QAAQ,MAAO,YACfA,QAAQ,KAAM,UACdA,QAAQ,MAAO,SACfA,QAAQ,iBAAkB,KAI5B,MAAO,CACLuiE,eAlVF,WACE,IAAKgG,EAAcwC,mBAEXjsE,OAAO4iE,yBACX5iE,OAAO25D,SAASlF,yBAEbz0D,OAAO4iE,yBAAyB,CACnC,IAAIsJ,EAAyBlsE,OAAOsL,SAASgX,YAAY,SACzD4pD,EAAuB3pD,UAAU,oBAAoB,GAAM,GAC3DviB,OAAOsL,SAASiY,cAAc2oD,GAIlCptE,EAAE,eAAeq1B,OAAM,WACrB0rC,EAAQ/gE,EAAE,aAAaoe,MAAOpe,EAAE,iBAAiBoe,WAqUnD2iD,QAASA,EACT5K,UA7OF,SAAoBkX,GAMlB,IALA,IACAC,EADoB3C,EAAcwB,oBACNtG,SAC5B0H,EAAeziD,OAAOC,KAAKuiD,GAC3BE,EAAS,GAAGC,EAAU,GAEb7sE,EAAI,EAAGA,EAAI2sE,EAAaxsE,OAAQH,IACvC6sE,EAAU9B,EAAa4B,EAAa3sE,IACpC4sE,EAAO/qE,KAAK,CACV+Q,GAAIi6D,EACJC,MAAOD,EACPE,QAASnC,EAAiB8B,EAAYC,EAAa3sE,IAAIwlE,WAI3DiH,EAAeG,IA+Nf7W,QAtMF,SAASiX,EAAiBxkE,EAAO4iE,EAAcF,GACxCA,IAASA,EAAU,GACxB,IAAII,EAAgBvB,EAAcwB,oBAClC1C,EAAargE,EAAMotD,UAAUhjD,GAC7BwyD,EAASkG,EAAcrG,SAAS4D,GAChCgC,EAAazF,EAAOI,QACpByH,EAAU3B,EAAcc,QAAQ19D,IAAM,kCACtCg9D,EAAc,CACZwB,eAAkB,CAChB9H,OAAUyD,EAAYxB,OAAU,KAIhCjC,EAAOqF,iBACTiB,EAAYwB,eAA0B,UAAI9H,EAAOwB,WAEnD,IAAK,IAAI5mE,EAAI,EAAGA,EAAI6qE,EAAW1qE,OAAQH,IACf,aAAlB6qE,EAAW7qE,IACf0rE,EAAYwB,eAAe7F,OAAOxlE,KAAK,CACrCyqB,MAASu+C,EAAW7qE,KAGxBglE,oBAAoBmH,SAAW,GAE/B,IAAIgB,EAAe/tE,EAAEuQ,WACrBw7D,EAAS,CACPz8D,IAAKu+D,EAAU,SAAWlD,EAAcqD,WACxC5kE,MAAOA,EACPkjE,YAAaA,EACbttD,SAAU+uD,IAGZ/tE,EAAEwQ,KAAKu9D,GAAcr9D,MAAK,SAAUu9D,GAGlC,IAFA,IAAIC,EAAWvD,EAAcwD,oBAAoBF,GAAgB,EACjEG,EA7CJ,SAA+BhlE,EAAO4iE,EAAckC,GAClD,IAAIG,EAAe,EACnB,OAAO,WAEL,GADAA,IACiB,IAAbH,GAAkBA,IAAaG,EAEjC,OADAjlE,EAAMgyD,WAAWwK,oBAAoBmH,UAC9Bf,KAuCAsC,CAAsBllE,EAAO4iE,EAAckC,GAC3CttE,EAAI,EAAGA,GAAKstE,EAAUttE,IAAK,CAClC,IAAI2tE,EAAO,UAAY3tE,EAAI+pE,EAAcqD,WAAa,SAAWrD,EAAcqD,WAC/EpC,EAAgB,CACdt8D,IAAKu+D,EAAUU,EACfnlE,MAAOA,EACPkjE,YAAaA,EACbN,aAAcoC,IAGlB,GAAiB,IAAbF,EACJE,SACA,IAAkB,IAAdF,EACJ,OAAOlC,OACN1xD,MAAK,SAAUiyC,GAChB0f,EAAO1f,EAAKuf,EAAU,EAAG8B,EAAiBt3D,KAAKtS,KAAMoF,EAAO4iE,EAAcF,EAAU,QAsJtFzH,kBA9VF,SAA2BlnD,GACzButD,EAAkBvtD,GA8VlBqxD,kBA3VF,WACE,OAAO9D,KA8VPE,aAAe,WAgDjB,SAASyB,IACP,IACE,OAAO75D,KAAKC,MAAMwlD,QAAQE,UAC1B,MAAOsW,GAIP,OAHAxW,QAAQvkD,IAAI,wCAA0C+6D,GACtDxW,QAAQvkD,IAAI,mCAAqCukD,QAAQE,UACzDF,QAAQ/F,eAAe,oEAChB,CACL2Y,SAAU,GACVC,aAAc,GACd2B,YAAa,KAuBnB,MAAO,CACLzB,YA/EF,SAAqBpyB,EAAM19B,GACzB,IAAIkxD,EAAW,CACbvB,SAAU,GACVC,aAAc,GACd2B,YAAa,IAEXxU,QAAQE,WACViU,EAAWC,KAEbD,EAASxzB,GAAQ19B,EAEjB+8C,QAAQE,SAAW3lD,KAAKmT,UAAUymD,IAqElCrB,sBAlEF,SAA+B2D,EAAS91B,EAAM19B,EAAOyzD,GAC9CA,IAASA,GAAU,GACpBA,IACF/I,oBAAoB1N,eAAiB,CACnC8U,QAAS,GACTnH,SAAU,KAGTjtB,GAAS19B,EAEF09B,EAGVgtB,oBAAoB1N,eAAewW,GAAS91B,GAAQ19B,EAFpD0qD,oBAAoB1N,eAAewW,GAAWxzD,EAF9C0qD,oBAAoB1N,eAAewW,GAAW,IA0DhDP,oBArBF,SAA6BF,GAC3B,IAAIW,EAAQtwD,KAAKsK,MAAMqlD,EA/DR,IAkEf,OAFIA,EAhEW,GAgEiB,GAChCW,IACOA,GAkBPzC,kBAnDF,WACE,IACE,OAAO35D,KAAKC,MAAMwlD,QAAQC,gBAC1B,MAAOuW,GAIP,OAHAxW,QAAQvkD,IAAI,8CAAgD+6D,GAC5DxW,QAAQvkD,IAAI,yCAA2CukD,QAAQC,gBAC/DD,QAAQ/F,eAAe,gEAChB,CACL8a,QAAS,GACTnH,SAAU,MA2CdwG,YAAaA,EACbc,eAdF,WACE,GAAIlV,QAAQS,gBAAiB,CAC3B,IAAImW,EAAkB5W,QAAQS,gBAAgB53D,MAAM,KACpD,OAAwC,OAAjC0gB,SAASqtD,EAAgB,KAAgBrtD,SAASqtD,EAAgB,KAAO,GAAKrtD,SAASqtD,EAAgB,IAAM,KAEtH,OAAO,GAUPb,WAvFe,KA2Ffc,eAAiB,WAUnB,MAAO,CACLjJ,SAVa,GAWbuD,iBAViB,GAWjB2D,SATS,GAUT9F,gBAXgB,GAYhB/O,eAVe,CACf8U,QAAS,GACTnH,SAAU,OAYd,WACEpB,eAAiB,IAAII,UACrBe,oBAAsB,IAAIkJ,eAC1B1K,mBAAqB,IAAIqG,cAEzB7F,gBAAkB5kE,EAAEuQ,WACpBw+D,iBAAmB/uE,EAAEuQ,WAErB,IAAIy+D,EAAkB/W,QAAQlD,gBAC9Bia,EAAgB3pE,KAAO,SAAUuxD,GAC/BqB,QAAQgX,SAAWhX,QAAQzJ,aAAaG,OACxCiI,IACAmY,iBAAiB/9D,WAEnBg+D,EAAgB7Y,UAAYiO,mBAAmBjO,UAC/C6Y,EAAgBrY,QAAUyN,mBAAmBzN,QAE7CsB,QAAQhD,kBAAkB+Z,GAE1BhvE,EAAEwQ,KAAKo0D,gBAAiBmK,kBAAkBr+D,MAAK,WAC7C,IAAKunD,QAAQ2C,QAAU3C,QAAQhK,UAAUE,WAAa8J,QAAQ2C,QAAU3C,QAAQhK,UAAUC,mBAC1F+J,QAAQC,eAAgB,CACtB,IAAIgX,EAAe,IAAItE,aAEvB,GADgBsE,EAAa/C,oBACXa,QAAQ19D,MAAQ80D,mBAAmBoK,qBAAuBvW,QAAQE,SAAU,CAC5F,IAAIiU,EAAW8C,EAAa7C,cAC5BrsE,EAAE,aAAaoe,IAAIguD,EAASvB,UAC5B7qE,EAAE,iBAAiBoe,IAAIguD,EAAStB,cAChC1G,mBAAmBrD,QAAQ/gE,EAAE,aAAaoe,MAAOpe,EAAE,iBAAiBoe,YA5B5E","sourcesContent":["function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);}(function ($) {\n  // Several of the methods in this plugin use code adapated from Prototype\n  //  Prototype JavaScript framework, version 1.6.0.1\n  //  (c) 2005-2007 Sam Stephenson\n  var regs = {\n    undHash: /_|-/,\n    colons: /::/,\n    words: /([A-Z]+)([A-Z][a-z])/g,\n    lowUp: /([a-z\\d])([A-Z])/g,\n    dash: /([a-z\\d])([A-Z])/g,\n    replacer: /\\{([^\\}]+)\\}/g,\n    dot: /\\./ },\n\n  getNext = function getNext(current, nextPart, add) {\n    return current[nextPart] || add && (current[nextPart] = {});\n  },\n  isContainer = function isContainer(current) {\n    var type = _typeof(current);\n    return type && (type == 'function' || type == 'object');\n  },\n  getObject = function getObject(objectName, roots, add) {\n\n    var parts = objectName ? objectName.split(regs.dot) : [],\n    length = parts.length,\n    currents = $.isArray(roots) ? roots : [roots || window],\n    current,\n    ret,\n    i,\n    c = 0,\n    type;\n\n    if (length == 0) {\n      return currents[0];\n    }\n    while (current = currents[c++]) {\n      for (i = 0; i < length - 1 && isContainer(current); i++) {\n        current = getNext(current, parts[i], add);\n      }\n      if (isContainer(current)) {\n\n        ret = getNext(current, parts[i], add);\n\n        if (ret !== undefined) {\n\n          if (add === false) {\n            delete current[parts[i]];\n          }\n          return ret;\n\n        }\n\n      }\n    }\n  },\n\n  /** \r\n      * @class jQuery.String\r\n      * \r\n      * A collection of useful string helpers.\r\n      * \r\n      */\n  str = $.String = $.extend($.String || {}, {\n    /**\r\n                                               * @function\r\n                                               * Gets an object from a string.\r\n                                               * @param {String} name the name of the object to look for\r\n                                               * @param {Array} [roots] an array of root objects to look for the name\r\n                                               * @param {Boolean} [add] true to add missing objects to \r\n                                               *  the path. false to remove found properties. undefined to \r\n                                               *  not modify the root object\r\n                                               */\n    getObject: getObject,\n    /**\r\n                           * Capitalizes a string\r\n                           * @param {String} s the string.\r\n                           * @return {String} a string with the first character capitalized.\r\n                           */\n    capitalize: function capitalize(s, cache) {\n      return s.charAt(0).toUpperCase() + s.substr(1);\n    },\n    /**\r\n        * Capitalizes a string from something undercored. Examples:\r\n        * @codestart\r\n        * jQuery.String.camelize(\"one_two\") //-> \"oneTwo\"\r\n        * \"three-four\".camelize() //-> threeFour\r\n        * @codeend\r\n        * @param {String} s\r\n        * @return {String} a the camelized string\r\n        */\n    camelize: function camelize(s) {\n      s = str.classize(s);\n      return s.charAt(0).toLowerCase() + s.substr(1);\n    },\n    /**\r\n        * Like camelize, but the first part is also capitalized\r\n        * @param {String} s\r\n        * @return {String} the classized string\r\n        */\n    classize: function classize(s, join) {\n      var parts = s.split(regs.undHash),\n      i = 0;\n      for (; i < parts.length; i++) {\n        parts[i] = str.capitalize(parts[i]);\n      }\n\n      return parts.join(join || '');\n    },\n    /**\r\n        * Like [jQuery.String.classize|classize], but a space separates each 'word'\r\n        * @codestart\r\n        * jQuery.String.niceName(\"one_two\") //-> \"One Two\"\r\n        * @codeend\r\n        * @param {String} s\r\n        * @return {String} the niceName\r\n        */\n    niceName: function niceName(s) {\n      str.classize(parts[i], ' ');\n    },\n\n    /**\r\n        * Underscores a string.\r\n        * @codestart\r\n        * jQuery.String.underscore(\"OneTwo\") //-> \"one_two\"\r\n        * @codeend\r\n        * @param {String} s\r\n        * @return {String} the underscored string\r\n        */\n    underscore: function underscore(s) {\n      return s.replace(regs.colons, '/').replace(regs.words, '$1_$2').replace(regs.lowUp, '$1_$2').replace(regs.dash, '_').toLowerCase();\n    },\n    /**\r\n        * Returns a string with {param} replaced values from data.\r\n        * \r\n        *     $.String.sub(\"foo {bar}\",{bar: \"far\"})\r\n        *     //-> \"foo far\"\r\n        *     \r\n        * @param {String} s The string to replace\r\n        * @param {Object} data The data to be used to look for properties.  If it's an array, multiple\r\n        * objects can be used.\r\n        * @param {Boolean} [remove] if a match is found, remove the property from the object\r\n        */\n    sub: function sub(s, data, remove) {\n      var obs = [];\n      obs.push(s.replace(regs.replacer, function (whole, inside) {\n        //convert inside to type\n        var ob = getObject(inside, data, typeof remove == 'boolean' ? !remove : remove),\n        type = _typeof(ob);\n        if ((type === 'object' || type === 'function') && type !== null) {\n          obs.push(ob);\n          return \"\";\n        } else {\n          return \"\" + ob;\n        }\n      }));\n      return obs.length <= 1 ? obs[0] : obs;\n    } });\n\n\n})(jQuery);\n(function ($) {\n\n  // if we are initializing a new class\n  var initializing = false,\n  makeArray = $.makeArray,\n  isFunction = $.isFunction,\n  isArray = $.isArray,\n  _extend = $.extend,\n  concatArgs = function concatArgs(arr, args) {\n    return arr.concat(makeArray(args));\n  },\n  // tests if we can get super in .toString()\n  fnTest = /xyz/.test(function () {\n    xyz;\n  }) ? /\\b_super\\b/ : /.*/,\n  // overwrites an object with methods, sets up _super\n  // newProps - new properties\n  // oldProps - where the old properties might be\n  // addTo - what we are adding to\n  inheritProps = function inheritProps(newProps, oldProps, addTo) {\n    addTo = addTo || newProps;\n    for (var name in newProps) {\n      // Check if we're overwriting an existing function\n      addTo[name] = isFunction(newProps[name]) &&\n      isFunction(oldProps[name]) &&\n      fnTest.test(newProps[name]) ? function (name, fn) {\n        return function () {\n          var tmp = this._super,\n          ret;\n\n          // Add a new ._super() method that is the same method\n          // but on the super-class\n          this._super = oldProps[name];\n\n          // The method only need to be bound temporarily, so we\n          // remove it when we're done executing\n          ret = fn.apply(this, arguments);\n          this._super = tmp;\n          return ret;\n        };\n      }(name, newProps[name]) : newProps[name];\n    }\n  },\n\n\n  /**\r\n      * @class jQuery.Class\r\n      * @plugin jquery/class\r\n      * @tag core\r\n      * @download dist/jquery/jquery.class.js\r\n      * @test jquery/class/qunit.html\r\n      * \r\n      * Class provides simulated inheritance in JavaScript. Use clss to bridge the gap between\r\n      * jQuery's functional programming style and Object Oriented Programming. It \r\n      * is based off John Resig's [http://ejohn.org/blog/simple-javascript-inheritance/|Simple Class]\r\n      * Inheritance library.  Besides prototypal inheritance, it includes a few important features:\r\n      * \r\n      *   - Static inheritance\r\n      *   - Introspection\r\n      *   - Namespaces\r\n      *   - Setup and initialization methods\r\n      *   - Easy callback function creation\r\n      * \r\n      * \r\n      * ## Static v. Prototype\r\n      * \r\n      * Before learning about Class, it's important to\r\n      * understand the difference between\r\n      * a class's __static__ and __prototype__ properties.\r\n      * \r\n      *     //STATIC\r\n      *     MyClass.staticProperty  //shared property\r\n      *     \r\n      *     //PROTOTYPE\r\n      *     myclass = new MyClass()\r\n      *     myclass.prototypeMethod() //instance method\r\n      * \r\n      * A static (or class) property is on the Class constructor\r\n      * function itself\r\n      * and can be thought of being shared by all instances of the \r\n      * Class. Prototype propertes are available only on instances of the Class.\r\n      * \r\n      * ## A Basic Class\r\n      * \r\n      * The following creates a Monster class with a\r\n      * name (for introspection), static, and prototype members.\r\n      * Every time a monster instance is created, the static\r\n      * count is incremented.\r\n      *\r\n      * @codestart\r\n      * $.Class.extend('Monster',\r\n      * /* @static *|\r\n      * {\r\n      *   count: 0\r\n      * },\r\n      * /* @prototype *|\r\n      * {\r\n      *   init: function( name ) {\r\n      *\r\n      *     // saves name on the monster instance\r\n      *     this.name = name;\r\n      *\r\n      *     // sets the health\r\n      *     this.health = 10;\r\n      *\r\n      *     // increments count\r\n      *     this.Class.count++;\r\n      *   },\r\n      *   eat: function( smallChildren ){\r\n      *     this.health += smallChildren;\r\n      *   },\r\n      *   fight: function() {\r\n      *     this.health -= 2;\r\n      *   }\r\n      * });\r\n      *\r\n      * hydra = new Monster('hydra');\r\n      *\r\n      * dragon = new Monster('dragon');\r\n      *\r\n      * hydra.name        // -> hydra\r\n      * Monster.count     // -> 2\r\n      * Monster.shortName // -> 'Monster'\r\n      *\r\n      * hydra.eat(2);     // health = 12\r\n      *\r\n      * dragon.fight();   // health = 8\r\n      *\r\n      * @codeend\r\n      *\r\n      * \r\n      * Notice that the prototype <b>init</b> function is called when a new instance of Monster is created.\r\n      * \r\n      * \r\n      * ## Inheritance\r\n      * \r\n      * When a class is extended, all static and prototype properties are available on the new class.\r\n      * If you overwrite a function, you can call the base class's function by calling\r\n      * <code>this._super</code>.  Lets create a SeaMonster class.  SeaMonsters are less\r\n      * efficient at eating small children, but more powerful fighters.\r\n      * \r\n      * \r\n      *     Monster.extend(\"SeaMonster\",{\r\n      *       eat: function( smallChildren ) {\r\n      *         this._super(smallChildren / 2);\r\n      *       },\r\n      *       fight: function() {\r\n      *         this.health -= 1;\r\n      *       }\r\n      *     });\r\n      *     \r\n      *     lockNess = new SeaMonster('Lock Ness');\r\n      *     lockNess.eat(4);   //health = 12\r\n      *     lockNess.fight();  //health = 11\r\n      * \r\n      * ### Static property inheritance\r\n      * \r\n      * You can also inherit static properties in the same way:\r\n      * \r\n      *     $.Class.extend(\"First\",\r\n      *     {\r\n      *         staticMethod: function() { return 1;}\r\n      *     },{})\r\n      *\r\n      *     First.extend(\"Second\",{\r\n      *         staticMethod: function() { return this._super()+1;}\r\n      *     },{})\r\n      *\r\n      *     Second.staticMethod() // -> 2\r\n      * \r\n      * ## Namespaces\r\n      * \r\n      * Namespaces are a good idea! We encourage you to namespace all of your code.\r\n      * It makes it possible to drop your code into another app without problems.\r\n      * Making a namespaced class is easy:\r\n      * \r\n      * @codestart\r\n      * $.Class.extend(\"MyNamespace.MyClass\",{},{});\r\n      *\r\n      * new MyNamespace.MyClass()\r\n      * @codeend\r\n      * <h2 id='introspection'>Introspection</h2>\r\n      * Often, it's nice to create classes whose name helps determine functionality.  Ruby on\r\n      * Rails's [http://api.rubyonrails.org/classes/ActiveRecord/Base.html|ActiveRecord] ORM class\r\n      * is a great example of this.  Unfortunately, JavaScript doesn't have a way of determining\r\n      * an object's name, so the developer must provide a name.  Class fixes this by taking a String name for the class.\r\n      * @codestart\r\n      * $.Class.extend(\"MyOrg.MyClass\",{},{})\r\n      * MyOrg.MyClass.shortName //-> 'MyClass'\r\n      * MyOrg.MyClass.fullName //->  'MyOrg.MyClass'\r\n      * @codeend\r\n      * The fullName (with namespaces) and the shortName (without namespaces) are added to the Class's\r\n      * static properties.\r\n      *\r\n      *\r\n      * <h2>Setup and initialization methods</h2>\r\n      * <p>\r\n      * Class provides static and prototype initialization functions.\r\n      * These come in two flavors - setup and init.\r\n      * Setup is called before init and\r\n      * can be used to 'normalize' init's arguments.\r\n      * </p>\r\n      * <div class='whisper'>PRO TIP: Typically, you don't need setup methods in your classes. Use Init instead.\r\n      * Reserve setup methods for when you need to do complex pre-processing of your class before init is called.\r\n      *\r\n      * </div>\r\n      * @codestart\r\n      * $.Class.extend(\"MyClass\",\r\n      * {\r\n      *   setup: function() {} //static setup\r\n      *   init: function() {} //static constructor\r\n      * },\r\n      * {\r\n      *   setup: function() {} //prototype setup\r\n      *   init: function() {} //prototype constructor\r\n      * })\r\n      * @codeend\r\n      *\r\n      * <h3>Setup</h3>\r\n      * <p>Setup functions are called before init functions.  Static setup functions are passed\r\n      * the base class followed by arguments passed to the extend function.\r\n      * Prototype static functions are passed the Class constructor function arguments.</p>\r\n      * <p>If a setup function returns an array, that array will be used as the arguments\r\n      * for the following init method.  This provides setup functions the ability to normalize\r\n      * arguments passed to the init constructors.  They are also excellent places\r\n      * to put setup code you want to almost always run.</p>\r\n      * <p>\r\n      * The following is similar to how [jQuery.Controller.prototype.setup]\r\n      * makes sure init is always called with a jQuery element and merged options\r\n      * even if it is passed a raw\r\n      * HTMLElement and no second parameter.\r\n      * </p>\r\n      * @codestart\r\n      * $.Class.extend(\"jQuery.Controller\",{\r\n      *   ...\r\n      * },{\r\n      *   setup: function( el, options ) {\r\n      *     ...\r\n      *     return [$(el),\r\n      *             $.extend(true,\r\n      *                this.Class.defaults,\r\n      *                options || {} ) ]\r\n      *   }\r\n      * })\r\n      * @codeend\r\n      * Typically, you won't need to make or overwrite setup functions.\r\n      * <h3>Init</h3>\r\n      *\r\n      * <p>Init functions are called after setup functions.\r\n      * Typically, they receive the same arguments\r\n      * as their preceding setup function.  The Foo class's <code>init</code> method\r\n      * gets called in the following example:\r\n      * </p>\r\n      * @codestart\r\n      * $.Class.Extend(\"Foo\", {\r\n      *   init: function( arg1, arg2, arg3 ) {\r\n      *     this.sum = arg1+arg2+arg3;\r\n      *   }\r\n      * })\r\n      * var foo = new Foo(1,2,3);\r\n      * foo.sum //-> 6\r\n      * @codeend\r\n      * <h2>Callbacks</h2>\r\n      * <p>Similar to jQuery's proxy method, Class provides a\r\n      * [jQuery.Class.static.callback callback]\r\n      * function that returns a callback to a method that will always\r\n      * have\r\n      * <code>this</code> set to the class or instance of the class.\r\n      * </p>\r\n      * The following example uses this.callback to make sure\r\n      * <code>this.name</code> is available in <code>show</code>.\r\n      * @codestart\r\n      * $.Class.extend(\"Todo\",{\r\n      *   init: function( name ) { this.name = name }\r\n      *   get: function() {\r\n      *     $.get(\"/stuff\",this.callback('show'))\r\n      *   },\r\n      *   show: function( txt ) {\r\n      *     alert(this.name+txt)\r\n      *   }\r\n      * })\r\n      * new Todo(\"Trash\").get()\r\n      * @codeend\r\n      * <p>Callback is available as a static and prototype method.</p>\r\n      * <h2>Demo</h2>\r\n      * @demo jquery/class/class.html\r\n      *\r\n      * @constructor Creating a new instance of an object that has extended jQuery.Class\r\n      *     calls the init prototype function and returns a new instance of the class.\r\n      *\r\n      */\n\n  clss = $.Class = function () {\n    if (arguments.length) {\n      clss.extend.apply(clss, arguments);\n    }\n  };\n\n  /* @Static*/\n  _extend(clss, {\n    /**\r\n                   * @function callback\r\n                   * Returns a callback function for a function on this Class.\r\n                   * The callback function ensures that 'this' is set appropriately.  \r\n                   * @codestart\r\n                   * $.Class.extend(\"MyClass\",{\r\n                   *     getData: function() {\r\n                   *         this.showing = null;\r\n                   *         $.get(\"data.json\",this.callback('gotData'),'json')\r\n                   *     },\r\n                   *     gotData: function( data ) {\r\n                   *         this.showing = data;\r\n                   *     }\r\n                   * },{});\r\n                   * MyClass.showData();\r\n                   * @codeend\r\n                   * <h2>Currying Arguments</h2>\r\n                   * Additional arguments to callback will fill in arguments on the returning function.\r\n                   * @codestart\r\n                   * $.Class.extend(\"MyClass\",{\r\n                   *    getData: function( <b>callback</b> ) {\r\n                   *      $.get(\"data.json\",this.callback('process',<b>callback</b>),'json');\r\n                   *    },\r\n                   *    process: function( <b>callback</b>, jsonData ) { //callback is added as first argument\r\n                   *        jsonData.processed = true;\r\n                   *        callback(jsonData);\r\n                   *    }\r\n                   * },{});\r\n                   * MyClass.getData(showDataFunc)\r\n                   * @codeend\r\n                   * <h2>Nesting Functions</h2>\r\n                   * Callback can take an array of functions to call as the first argument.  When the returned callback function\r\n                   * is called each function in the array is passed the return value of the prior function.  This is often used\r\n                   * to eliminate currying initial arguments.\r\n                   * @codestart\r\n                   * $.Class.extend(\"MyClass\",{\r\n                   *    getData: function( callback ) {\r\n                   *      //calls process, then callback with value from process\r\n                   *      $.get(\"data.json\",this.callback(['process2',callback]),'json') \r\n                   *    },\r\n                   *    process2: function( type,jsonData ) {\r\n                   *        jsonData.processed = true;\r\n                   *        return [jsonData];\r\n                   *    }\r\n                   * },{});\r\n                   * MyClass.getData(showDataFunc);\r\n                   * @codeend\r\n                   * @param {String|Array} fname If a string, it represents the function to be called.  \r\n                   * If it is an array, it will call each function in order and pass the return value of the prior function to the\r\n                   * next function.\r\n                   * @return {Function} the callback function.\r\n                   */\n    callback: function callback(funcs) {\n\n      //args that should be curried\n      var args = makeArray(arguments),\n      self;\n\n      funcs = args.shift();\n\n      if (!isArray(funcs)) {\n        funcs = [funcs];\n      }\n\n      self = this;\n\n      return function class_cb() {\n        var cur = concatArgs(args, arguments),\n        isString,\n        length = funcs.length,\n        f = 0,\n        func;\n\n        for (; f < length; f++) {\n          func = funcs[f];\n          if (!func) {\n            continue;\n          }\n\n          isString = typeof func == \"string\";\n          if (isString && self._set_called) {\n            self.called = func;\n          }\n          cur = (isString ? self[func] : func).apply(self, cur || []);\n          if (f < length - 1) {\n            cur = !isArray(cur) || cur._use_call ? [cur] : cur;\n          }\n        }\n        return cur;\n      };\n    },\n    /**\r\n        *   @function getObject \r\n        *   Gets an object from a String.\r\n        *   If the object or namespaces the string represent do not\r\n        *   exist it will create them.  \r\n        *   @codestart\r\n        *   Foo = {Bar: {Zar: {\"Ted\"}}}\r\n        *   $.Class.getobject(\"Foo.Bar.Zar\") //-> \"Ted\"\r\n        *   @codeend\r\n        *   @param {String} objectName the object you want to get\r\n        *   @param {Object} [current=window] the object you want to look in.\r\n        *   @return {Object} the object you are looking for.\r\n        */\n    getObject: $.String.getObject,\n    /**\r\n                                    * @function newInstance\r\n                                    * Creates a new instance of the class.  This method is useful for creating new instances\r\n                                    * with arbitrary parameters.\r\n                                    * <h3>Example</h3>\r\n                                    * @codestart\r\n                                    * $.Class.extend(\"MyClass\",{},{})\r\n                                    * var mc = MyClass.newInstance.apply(null, new Array(parseInt(Math.random()*10,10))\r\n                                    * @codeend\r\n                                    * @return {class} instance of the class\r\n                                    */\n    newInstance: function newInstance() {\n      var inst = this.rawInstance(),\n      args;\n      if (inst.setup) {\n        args = inst.setup.apply(inst, arguments);\n      }\n      if (inst.init) {\n        inst.init.apply(inst, isArray(args) ? args : arguments);\n      }\n      return inst;\n    },\n    /**\r\n        * Setup gets called on the inherting class with the base class followed by the\r\n        * inheriting class's raw properties.\r\n        * \r\n        * Setup will deeply extend a static defaults property on the base class with \r\n        * properties on the base class.  For example:\r\n        * \r\n        *     $.Class(\"MyBase\",{\r\n        *       defaults : {\r\n        *         foo: 'bar'\r\n        *       }\r\n        *     },{})\r\n        * \r\n        *     MyBase(\"Inheriting\",{\r\n        *       defaults : {\r\n        *         newProp : 'newVal'\r\n        *       }\r\n        *     },{}\r\n        *     \r\n        *     Inheriting.defaults -> {foo: 'bar', 'newProp': 'newVal'}\r\n        * \r\n        * @param {Object} baseClass the base class that is being inherited from\r\n        * @param {String} fullName the name of the new class\r\n        * @param {Object} staticProps the static properties of the new class\r\n        * @param {Object} protoProps the prototype properties of the new class\r\n        */\n    setup: function setup(baseClass, fullName) {\n      this.defaults = _extend(true, {}, baseClass.defaults, this.defaults);\n      return arguments;\n    },\n    rawInstance: function rawInstance() {\n      initializing = true;\n      var inst = new this();\n      initializing = false;\n      return inst;\n    },\n    /**\r\n        * Extends a class with new static and prototype functions.  There are a variety of ways\r\n        * to use extend:\r\n        * @codestart\r\n        * //with className, static and prototype functions\r\n        * $.Class.extend('Task',{ STATIC },{ PROTOTYPE })\r\n        * //with just classname and prototype functions\r\n        * $.Class.extend('Task',{ PROTOTYPE })\r\n        * //With just a className\r\n        * $.Class.extend('Task')\r\n        * @codeend\r\n        * @param {String} [fullName]  the classes name (used for classes w/ introspection)\r\n        * @param {Object} [klass]  the new classes static/class functions\r\n        * @param {Object} [proto]  the new classes prototype functions\r\n        * @return {jQuery.Class} returns the new class\r\n        */\n    extend: function extend(fullName, klass, proto) {\n      // figure out what was passed\n      if (typeof fullName != 'string') {\n        proto = klass;\n        klass = fullName;\n        fullName = null;\n      }\n      if (!proto) {\n        proto = klass;\n        klass = null;\n      }\n\n      proto = proto || {};\n      var _super_class = this,\n      _super = this.prototype,\n      name,shortName,namespace,prototype;\n\n      // Instantiate a base class (but only create the instance,\n      // don't run the init constructor)\n      initializing = true;\n      prototype = new this();\n      initializing = false;\n      // Copy the properties over onto the new prototype\n      inheritProps(proto, _super, prototype);\n\n      // The dummy class constructor\n\n      function Class() {\n        // All construction is actually done in the init method\n        if (initializing) return;\n\n        if (this.constructor !== Class && arguments.length) {//we are being called w/o new\n          return arguments.callee.extend.apply(arguments.callee, arguments);\n        } else {//we are being called w/ new\n          return this.Class.newInstance.apply(this.Class, arguments);\n        }\n      }\n      // Copy old stuff onto class\n      for (name in this) {\n        if (this.hasOwnProperty(name)) {\n          Class[name] = this[name];\n        }\n      }\n\n      // copy new props on class\n      inheritProps(klass, this, Class);\n\n      // do namespace stuff\n      if (fullName) {\n\n        var parts = fullName.split(/\\./),\n        shortName = parts.pop(),\n        current = clss.getObject(parts.join('.'), window, true),\n        namespace = current;\n\n\n        current[shortName] = Class;\n      }\n\n      // set things that can't be overwritten\n      _extend(Class, {\n        prototype: prototype,\n        namespace: namespace,\n        shortName: shortName,\n        constructor: Class,\n        fullName: fullName });\n\n\n      //make sure our prototype looks nice\n      Class.prototype.Class = Class.prototype.constructor = Class;\n\n\n      /**\r\n                                                                    * @attribute fullName \r\n                                                                    * The full name of the class, including namespace, provided for introspection purposes.\r\n                                                                    * @codestart\r\n                                                                    * $.Class.extend(\"MyOrg.MyClass\",{},{})\r\n                                                                    * MyOrg.MyClass.shortName //-> 'MyClass'\r\n                                                                    * MyOrg.MyClass.fullName //->  'MyOrg.MyClass'\r\n                                                                    * @codeend\r\n                                                                    */\n\n      var args = Class.setup.apply(Class, concatArgs([_super_class], arguments));\n\n      if (Class.init) {\n        Class.init.apply(Class, args || []);\n      }\n\n      /* @Prototype*/\n      return Class;\n      /** \r\n                     * @function setup\r\n                     * If a setup method is provided, it is called when a new \r\n                     * instances is created.  It gets passed the same arguments that\r\n                     * were given to the Class constructor function (<code> new Class( arguments ... )</code>).\r\n                     * \r\n                     *     $.Class(\"MyClass\",\r\n                     *     {\r\n                     *        setup: function( val ) {\r\n                     *           this.val = val;\r\n                     *         }\r\n                     *     })\r\n                     *     var mc = new MyClass(\"Check Check\")\r\n                     *     mc.val //-> 'Check Check'\r\n                     * \r\n                     * Setup is called before [jQuery.Class.prototype.init init].  If setup \r\n                     * return an array, those arguments will be used for init. \r\n                     * \r\n                     *     $.Class(\"jQuery.Controller\",{\r\n                     *       setup : function(htmlElement, rawOptions){\r\n                     *         return [$(htmlElement), \r\n                     *                   $.extend({}, this.Class.defaults, rawOptions )] \r\n                     *       }\r\n                     *     })\r\n                     * \r\n                     * <div class='whisper'>PRO TIP: \r\n                     * Setup functions are used to normalize constructor arguments and provide a place for\r\n                     * setup code that extending classes don't have to remember to call _super to\r\n                     * run.\r\n                     * </div>\r\n                     * \r\n                     * Setup is not defined on $.Class itself, so calling super in inherting classes\r\n                     * will break.  Don't do the following:\r\n                     * \r\n                     *     $.Class(\"Thing\",{\r\n                     *       setup : function(){\r\n                     *         this._super(); // breaks!\r\n                     *       }\r\n                     *     })\r\n                     * \r\n                     * @return {Array|undefined} If an array is return, [jQuery.Class.prototype.init] is \r\n                     * called with those arguments; otherwise, the original arguments are used.\r\n                     */\n      //break up\n      /** \r\n       * @function init\r\n       * If an <code>init</code> method is provided, it gets called when a new instance\r\n       * is created.  Init gets called after [jQuery.Class.prototype.setup setup], typically with the \r\n       * same arguments passed to the Class \r\n       * constructor: (<code> new Class( arguments ... )</code>).  \r\n       * \r\n       *     $.Class(\"MyClass\",\r\n       *     {\r\n       *        init: function( val ) {\r\n       *           this.val = val;\r\n       *        }\r\n       *     })\r\n       *     var mc = new MyClass(1)\r\n       *     mc.val //-> 1\r\n       * \r\n       * [jQuery.Class.prototype.setup Setup] is able to modify the arguments passed to init.  Read\r\n       * about it there.\r\n       * \r\n       */\n      //Breaks up code\n      /**\r\n       * @attribute Class\r\n       * References the static properties of the instance's class.\r\n       * <h3>Quick Example</h3>\r\n       * @codestart\r\n       * // a class with a static classProperty property\r\n       * $.Class.extend(\"MyClass\", {classProperty : true}, {});\r\n       * \r\n       * // a new instance of myClass\r\n       * var mc1 = new MyClass();\r\n       * \r\n       * //\r\n       * mc1.Class.classProperty = false;\r\n       * \r\n       * // creates a new MyClass\r\n       * var mc2 = new mc.Class();\r\n       * @codeend\r\n       * Getting static properties via the Class property, such as it's \r\n       * [jQuery.Class.static.fullName fullName] is very common.\r\n       */\n    } });\n\n\n\n\n\n\n\n  clss.prototype.\n  /**\r\n                   * @function callback\r\n                   * Returns a callback function.  This does the same thing as and is described better in [jQuery.Class.static.callback].\r\n                   * The only difference is this callback works\r\n                   * on a instance instead of a class.\r\n                   * @param {String|Array} fname If a string, it represents the function to be called.  \r\n                   * If it is an array, it will call each function in order and pass the return value of the prior function to the\r\n                   * next function.\r\n                   * @return {Function} the callback function\r\n                   */\n  callback = clss.callback;\n\n\n})(jQuery);","/*\r\n* jQuery Templating Plugin\r\n* Copyright 2010, John Resig\r\n* Dual licensed under the MIT or GPL Version 2 licenses.\r\n*/\n(function (jQuery, undefined) {\n  var oldManip = jQuery.fn.domManip,tmplItmAtt = \"_tmplitem\",htmlExpr = /^[^<]*(<[\\w\\W]+>)[^>]*$|\\{\\{\\! /,\n  newTmplItems = {},wrappedItems = {},appendToTmplItems,topTmplItem = { key: 0, data: {} },itemKey = 0,cloneIndex = 0,stack = [];\n\n  function newTmplItem(options, parentItem, fn, data) {\n    // Returns a template item data structure for a new rendered instance of a template (a 'template item').\n    // The content field is a hierarchical array of strings and nested items (to be\n    // removed and replaced by nodes field of dom elements, once inserted in DOM).\n    var newItem = {\n      data: data || (parentItem ? parentItem.data : {}),\n      _wrap: parentItem ? parentItem._wrap : null,\n      tmpl: null,\n      parent: parentItem || null,\n      nodes: [],\n      calls: tiCalls,\n      nest: tiNest,\n      wrap: tiWrap,\n      html: tiHtml,\n      update: tiUpdate };\n\n    if (options) {\n      jQuery.extend(newItem, options, { nodes: [], parent: parentItem });\n    }\n    if (fn) {\n      // Build the hierarchical content to be used during insertion into DOM\n      newItem.tmpl = fn;\n      newItem._ctnt = newItem._ctnt || newItem.tmpl(jQuery, newItem);\n      newItem.key = ++itemKey;\n      // Keep track of new template item, until it is stored as jQuery Data on DOM element\n      (stack.length ? wrappedItems : newTmplItems)[itemKey] = newItem;\n    }\n    return newItem;\n  }\n\n  // Override appendTo etc., in order to provide support for targeting multiple elements. (This code would disappear if integrated in jquery core).\n  jQuery.each({\n    appendTo: \"append\",\n    prependTo: \"prepend\",\n    insertBefore: \"before\",\n    insertAfter: \"after\",\n    replaceAll: \"replaceWith\" },\n  function (name, original) {\n    jQuery.fn[name] = function (selector) {\n      var ret = [],insert = jQuery(selector),elems,i,l,tmplItems,\n      parent = this.length === 1 && this[0].parentNode;\n\n      appendToTmplItems = newTmplItems || {};\n      if (parent && parent.nodeType === 11 && parent.childNodes.length === 1 && insert.length === 1) {\n        insert[original](this[0]);\n        ret = this;\n      } else {\n        for (i = 0, l = insert.length; i < l; i++) {\n          cloneIndex = i;\n          elems = (i > 0 ? this.clone(true) : this).get();\n          jQuery.fn[original].apply(jQuery(insert[i]), elems);\n          ret = ret.concat(elems);\n        }\n        cloneIndex = 0;\n        ret = this.pushStack(ret, name, insert.selector);\n      }\n      tmplItems = appendToTmplItems;\n      appendToTmplItems = null;\n      jQuery.tmpl.complete(tmplItems);\n      return ret;\n    };\n  });\n\n  jQuery.fn.extend({\n    // Use first wrapped element as template markup.\n    // Return wrapped set of template items, obtained by rendering template against data.\n    tmpl: function tmpl(data, options, parentItem) {\n      return jQuery.tmpl(this[0], data, options, parentItem);\n    },\n\n    // Find which rendered template item the first wrapped DOM element belongs to\n    tmplItem: function tmplItem() {\n      return jQuery.tmplItem(this[0]);\n    },\n\n    // Consider the first wrapped element as a template declaration, and get the compiled template or store it as a named template.\n    template: function template(name) {\n      return jQuery.template(name, this[0]);\n    },\n\n    domManip: function domManip(args, table, callback, options) {\n      // This appears to be a bug in the appendTo, etc. implementation\n      // it should be doing .call() instead of .apply(). See #6227\n      if (args[0] && args[0].nodeType) {\n        var dmArgs = jQuery.makeArray(arguments),argsLength = args.length,i = 0,tmplItem;\n        while (i < argsLength && !(tmplItem = jQuery.data(args[i++], \"tmplItem\"))) {}\n        if (argsLength > 1) {\n          dmArgs[0] = [jQuery.makeArray(args)];\n        }\n        if (tmplItem && cloneIndex) {\n          dmArgs[2] = function (fragClone) {\n            // Handler called by oldManip when rendered template has been inserted into DOM.\n            jQuery.tmpl.afterManip(this, fragClone, callback);\n          };\n        }\n        oldManip.apply(this, dmArgs);\n      } else {\n        oldManip.apply(this, arguments);\n      }\n      cloneIndex = 0;\n      if (!appendToTmplItems) {\n        jQuery.tmpl.complete(newTmplItems);\n      }\n      return this;\n    } });\n\n\n  jQuery.extend({\n\n    // Quick version for templates that will return string instead of the full dom element\n    fasttmpl: function fasttmpl(tmpl, data, options, parentItem) {\n      options = options || {};\n      $.extend(options, { fast: true });\n      bizagi.chrono.start(\"fasttmpl\");\n      var result = jQuery.tmpl(tmpl, data, options, parentItem);\n      bizagi.chrono.stop(\"fasttmpl\");\n      return result;\n    },\n\n    // Return wrapped set of template items, obtained by rendering template against data.\n    tmpl: function tmpl(_tmpl, data, options, parentItem) {\n      if (!options || !options.nestedExecution) cacheTmplItem = [];\n      var ret,topLevel = !parentItem;\n      var fast = options && options.fast;\n      var buildRet;\n      if (topLevel) {\n        // This is a top-level tmpl call (not from a nested template using {{tmpl}})\n        parentItem = topTmplItem;\n        _tmpl = jQuery.template[_tmpl] || jQuery.template(null, _tmpl);\n        wrappedItems = {}; // Any wrapped items will be rebuilt, since this is top level\n      } else if (!_tmpl) {\n        // The template item is already associated with DOM - this is a refresh.\n        // Re-evaluate rendered template for the parentItem\n        _tmpl = parentItem.tmpl;\n        newTmplItems[parentItem.key] = parentItem;\n        parentItem.nodes = [];\n        if (parentItem.wrapped) {\n          updateWrapped(parentItem, parentItem.wrapped);\n        }\n        // Rebuild, without creating a new template item\n        buildRet = build(parentItem, null, parentItem.tmpl(jQuery, parentItem), fast);\n        if (!options || !options.nestedExecution) removeTmplItemCache();\n        return fast ? buildRet : jQuery(buildRet);\n      }\n      if (!_tmpl) {\n        return []; // Could throw...\n      }\n      if (typeof data === \"function\") {\n        data = data.call(parentItem || {});\n      }\n      if (options && options.wrapped) {\n        updateWrapped(options, options.wrapped);\n      }\n      ret = jQuery.isArray(data) ?\n      jQuery.map(data, function (dataItem) {\n        return dataItem ? newTmplItem(options, parentItem, _tmpl, dataItem) : null;\n      }) :\n      [newTmplItem(options, parentItem, _tmpl, data)];\n      if (topLevel) {\n        buildRet = build(parentItem, null, ret, fast);\n        if (!options || !options.nestedExecution) removeTmplItemCache();\n        return fast ? buildRet : jQuery(buildRet);\n      }\n\n      if (!options || !options.nestedExecution) removeTmplItemCache();\n      return ret;\n    },\n\n    // Return rendered template item for an element.\n    tmplItem: function tmplItem(elem) {\n      var tmplItem;\n      if (elem instanceof jQuery) {\n        elem = elem[0];\n      }\n      while (elem && elem.nodeType === 1 && !(tmplItem = jQuery.data(elem, \"tmplItem\")) && (elem = elem.parentNode)) {}\n      return tmplItem || topTmplItem;\n    },\n\n    // Set:\n    // Use $.template( name, tmpl ) to cache a named template,\n    // where tmpl is a template string, a script element or a jQuery instance wrapping a script element, etc.\n    // Use $( \"selector\" ).template( name ) to provide access by name to a script block template declaration.\n\n    // Get:\n    // Use $.template( name ) to access a cached template.\n    // Also $( selectorToScriptBlock ).template(), or $.template( null, templateString )\n    // will return the compiled template, without adding a name reference.\n    // If templateString includes at least one HTML tag, $.template( templateString ) is equivalent\n    // to $.template( null, templateString )\n    template: function template(name, tmpl) {\n      if (tmpl) {\n        // Compile template and associate with name\n        if (typeof tmpl === \"string\") {\n          // This is an HTML string being passed directly in.\n          tmpl = buildTmplFn(tmpl);\n        } else if (tmpl instanceof jQuery) {\n          tmpl = tmpl[0] || {};\n        }\n        if (tmpl.nodeType) {\n          // If this is a template block, use cached copy, or generate tmpl function and cache.\n          tmpl = jQuery.data(tmpl, \"tmpl\") || jQuery.data(tmpl, \"tmpl\", buildTmplFn(tmpl.innerHTML));\n        }\n        return typeof name === \"string\" ? jQuery.template[name] = tmpl : tmpl;\n      }\n      // Return named compiled template\n      return name ? typeof name !== \"string\" ? jQuery.template(null, name) :\n      jQuery.template[name] ||\n      // If not in map, treat as a selector. (If integrated with core, use quickExpr.exec) \n      jQuery.template(null, htmlExpr.test(name) ? name : jQuery(name)) : null;\n    },\n\n    encode: function encode(text) {\n      // Do HTML encoding replacing < > & and ' and \" by corresponding entities.\n      return (\"\" + text).split(\"<\").join(\"&lt;\").split(\">\").join(\"&gt;\").split('\"').join(\"&#34;\").split(\"'\").join(\"&#39;\");\n    } });\n\n\n  jQuery.extend(jQuery.tmpl, {\n    tag: {\n      \"tmpl\": {\n        _default: { $2: \"null\" },\n        open: \"if($notnull_1){_=_.concat($item.nest($1,$2));}\"\n        // tmpl target parameter can be of type function, so use $1, not $1a (so not auto detection of functions)\n        // This means that {{tmpl foo}} treats foo as a template (which IS a function). \n        // Explicit parens can be used if foo is a function that returns a template: {{tmpl foo()}}.\n      },\n      \"wrap\": {\n        _default: { $2: \"null\" },\n        open: \"$item.calls(_,$1,$2);_=[];\",\n        close: \"call=$item.calls();_=call._.concat($item.wrap(call,_));\" },\n\n      \"each\": {\n        _default: { $2: \"$index, $value\" },\n        open: \"if($notnull_1){$.each($1a,function($2){with(this){\",\n        close: \"}});}\" },\n\n      \"if\": {\n        open: \"if(($notnull_1) && $1a){\",\n        close: \"}\" },\n\n      \"else\": {\n        _default: { $1: \"true\" },\n        open: \"}else if(($notnull_1) && $1a){\" },\n\n      \"html\": {\n        // Unecoded expression evaluation. \n        open: \"if($notnull_1){_.push($1a);}\" },\n\n      \"=\": {\n        // Encoded expression evaluation. Abbreviated form is ${}.\n        _default: { $1: \"$data\" },\n        open: \"if($notnull_1){_.push($.encode($1a));}\" },\n\n      \"!\": {\n        // Comment tag. Skipped by parser\n        open: \"\" } },\n\n\n\n    // This stub can be overridden, e.g. in jquery.tmplPlus for providing rendered events\n    complete: function complete(items) {\n      newTmplItems = {};\n    },\n\n    // Call this from code which overrides domManip, or equivalent\n    // Manage cloning/storing template items etc.\n    afterManip: function afterManip(elem, fragClone, callback) {\n      // Provides cloned fragment ready for fixup prior to and after insertion into DOM\n      var content = fragClone.nodeType === 11 ?\n      jQuery.makeArray(fragClone.childNodes) :\n      fragClone.nodeType === 1 ? [fragClone] : [];\n\n      // Return fragment to original caller (e.g. append) for DOM insertion\n      callback.call(elem, fragClone);\n\n      // Fragment has been inserted:- Add inserted nodes to tmplItem data structure. Replace inserted element annotations by jQuery.data.\n      storeTmplItems(content);\n      cloneIndex++;\n    } });\n\n\n  //========================== Private helper functions, used by code above ==========================\n  var cacheTmplItem = [];\n\n  function removeTmplItemCache() {\n    // Remove cache\n    if (cacheTmplItem) {\n      for (var i = 0; i < cacheTmplItem.length; i++) {\n        var item = $(cacheTmplItem[i]);\n        item.removeData(\"tmplItem\");\n      }\n    }\n    cacheTmplItem = null;\n  }\n\n  function build(tmplItem, nested, content, fast) {\n    // Convert hierarchical content into flat string array \n    // and finally return array of fragments ready for DOM insertion\n    var frag, ret;\n    if (!fast) {\n      ret = content ? jQuery.map(content, function (item) {\n        return typeof item === \"string\" ?\n        // Insert template item annotations, to be converted to jQuery.data( \"tmplItem\" ) when elems are inserted into DOM.\n        tmplItem.key ? item.replace(/(<\\w+)(?=[\\s>])(?![^>]*_tmplitem)([^>]*)/g, \"$1 \" + tmplItmAtt + \"=\\\"\" + tmplItem.key + \"\\\" $2\") : item :\n        // This is a child template item. Build nested template.\n        build(item, tmplItem, item._ctnt);\n      }) :\n      // If content is not defined, insert tmplItem directly. Not a template item. May be a string, or a string array, e.g. from {{html $item.html()}}.\n      tmplItem;\n    } else {\n      ret = content ? jQuery.map(content, function (item) {return typeof item === \"string\" ? item : build(item, tmplItem, item._ctnt, true);}) : tmplItem;\n    }\n    if (nested) {\n      return ret;\n    }\n\n    // top-level template\n    ret = ret.join(\"\");\n\n    // When fast option is active don't build up jquery element\n    if (fast) return ret;\n\n    // Support templates which have initial or final text nodes, or consist only of text\n    // Also support HTML entities within the HTML markup.\n    ret.replace(/^\\s*([^<\\s][^<]*)?(<[\\w\\W]+>)([^>]*[^>\\s])?\\s*$/, function (all, before, middle, after) {\n      frag = jQuery(middle).get();\n\n      storeTmplItems(frag);\n      if (before) {\n        frag = unencode(before).concat(frag);\n      }\n      if (after) {\n        frag = frag.concat(unencode(after));\n      }\n    });\n    return frag ? frag : unencode(ret);\n  }\n\n  function unencode(text) {\n    // Use createElement, since createTextNode will not render HTML entities correctly\n    var el = document.createElement(\"div\");\n    el.innerHTML = text;\n    return jQuery.makeArray(el.childNodes);\n  }\n\n  // Generate a reusable function that will serve to render a template against data\n  function buildTmplFn(markup) {\n    var code = \"var $=jQuery,call,_=[],$data=$item.data;\" +\n\n    // Introduce the data as local variables using with(){}\n    \"with($data){_.push('\" +\n\n    // Convert the template into pure JavaScript\n    jQuery.trim(markup).\n    replace(/([\\\\'])/g, \"\\\\$1\").\n    replace(/[\\r\\t\\n]/g, \" \").\n    replace(/\\$\\{([^\\}]*)\\}/g, \"{{= $1}}\").\n    replace(/\\{\\{(\\/?)(\\w+|.)(?:\\(((?:[^\\}]|\\}(?!\\}))*?)?\\))?(?:\\s+(.*?)?)?(\\(((?:[^\\}]|\\}(?!\\}))*?)\\))?\\s*\\}\\}/g,\n    function (all, slash, type, fnargs, target, parens, args) {\n      var tag = jQuery.tmpl.tag[type],def,expr,exprAutoFnDetect;\n      if (!tag) {\n        throw \"Template command not found: \" + type;\n      }\n      def = tag._default || [];\n      if (parens && !/\\w$/.test(target)) {\n        target += parens;\n        parens = \"\";\n      }\n      if (target) {\n        target = unescape(target);\n        args = args ? \",\" + unescape(args) + \")\" : parens ? \")\" : \"\";\n        // Support for target being things like a.toLowerCase();\n        // In that case don't call with template item as 'this' pointer. Just evaluate...\n        expr = parens ? target.indexOf(\".\") > -1 ? target + parens : \"(\" + target + \").call($item\" + args : target;\n        exprAutoFnDetect = parens ? expr : \"(typeof(\" + target + \")==='function'?(\" + target + \").call($item):(\" + target + \"))\";\n      } else {\n        exprAutoFnDetect = expr = def.$1 || \"null\";\n      }\n      fnargs = unescape(fnargs);\n      return \"');\" +\n      tag[slash ? \"close\" : \"open\"].\n      split(\"$notnull_1\").join(target ? \"typeof(\" + target + \")!=='undefined' && (\" + target + \")!=null\" : \"true\").\n      split(\"$1a\").join(exprAutoFnDetect).\n      split(\"$1\").join(expr).\n      split(\"$2\").join(fnargs ?\n      fnargs.replace(/\\s*([^\\(]+)\\s*(\\((.*?)\\))?/g, function (all, name, parens, params) {\n        params = params ? \",\" + params + \")\" : parens ? \")\" : \"\";\n        return params ? \"(\" + name + \").call($item\" + params : all;\n      }) :\n      def.$2 || \"\") +\n\n      \"_.push('\";\n    }) +\n    \"');}return _;\";\n\n    // Uncomment next section for debug template generated code\n    /*\r\n    var codeParts = code.split(\"'\");\r\n    for (var i = 0; i < codeParts.length; i++) {\r\n    if (i%2 == 0){\r\n    codeParts[i] = codeParts[i].replace(/([;{}])/g, \"$1\\r\\n\");\r\n    }\r\n    }\r\n    code = codeParts.join(\"'\");\r\n    */\n    // End uncomment            \n\n    return new Function(\"jQuery\", \"$item\", code);\n\n  }\n\n\n  function updateWrapped(options, wrapped) {\n    // Build the wrapped content. \n    options._wrap = build(options, true,\n    // Suport imperative scenario in which options.wrapped can be set to a selector or an HTML string.\n    jQuery.isArray(wrapped) ? wrapped : [htmlExpr.test(wrapped) ? wrapped : jQuery(wrapped).html()]).\n    join(\"\");\n  }\n\n  function unescape(args) {\n    return args ? args.replace(/\\\\'/g, \"'\").replace(/\\\\\\\\/g, \"\\\\\") : null;\n  }\n  function outerHtml(elem) {\n    var div = document.createElement(\"div\");\n    div.appendChild(elem.cloneNode(true));\n    return div.innerHTML;\n  }\n\n  // Store template items in jQuery.data(), ensuring a unique tmplItem data data structure for each rendered template instance.\n\n  function storeTmplItems(content) {\n    var keySuffix = \"_\" + cloneIndex,elem,elems,newClonedItems = {},i,l,m;\n    for (i = 0, l = content.length; i < l; i++) {\n      if ((elem = content[i]).nodeType !== 1) {\n        continue;\n      }\n      elems = elem.getElementsByTagName(\"*\");\n      for (m = elems.length - 1; m >= 0; m--) {\n        processItemKey(elems[m]);\n      }\n      processItemKey(elem);\n    }\n    function processItemKey(el) {\n      var pntKey,pntNode = el,pntItem,tmplItem,key;\n      // Ensure that each rendered template inserted into the DOM has its own template item,\n      if (key = el.getAttribute(tmplItmAtt)) {\n        while (pntNode.parentNode && (pntNode = pntNode.parentNode).nodeType === 1 && !(pntKey = pntNode.getAttribute(tmplItmAtt))) {}\n        if (pntKey !== key) {\n          // The next ancestor with a _tmplitem expando is on a different key than this one.\n          // So this is a top-level element within this template item\n          // Set pntNode to the key of the parentNode, or to 0 if pntNode.parentNode is null, or pntNode is a fragment.\n          pntNode = pntNode.parentNode ? pntNode.nodeType === 11 ? 0 : pntNode.getAttribute(tmplItmAtt) || 0 : 0;\n          if (!(tmplItem = newTmplItems[key])) {\n            // The item is for wrapped content, and was copied from the temporary parent wrappedItem.\n            tmplItem = wrappedItems[key];\n            tmplItem = newTmplItem(tmplItem, newTmplItems[pntNode] || wrappedItems[pntNode], null, true);\n            tmplItem.key = ++itemKey;\n            newTmplItems[itemKey] = tmplItem;\n          }\n          if (cloneIndex) {\n            cloneTmplItem(key);\n          }\n        }\n        el.removeAttribute(tmplItmAtt);\n      } else if (cloneIndex && (tmplItem = jQuery.data(el, \"tmplItem\"))) {\n        // This was a rendered element, cloned during append or appendTo etc.\n        // TmplItem stored in jQuery data has already been cloned in cloneCopyEvent. We must replace it with a fresh cloned tmplItem.\n        cloneTmplItem(tmplItem.key);\n        newTmplItems[tmplItem.key] = tmplItem;\n        pntNode = jQuery.data(el.parentNode, \"tmplItem\");\n        pntNode = pntNode ? pntNode.key : 0;\n      }\n      if (tmplItem) {\n        pntItem = tmplItem;\n        // Find the template item of the parent element. \n        // (Using !=, not !==, since pntItem.key is number, and pntNode may be a string)\n        while (pntItem && pntItem.key != pntNode) {\n          // Add this element as a top-level node for this rendered template item, as well as for any\n          // ancestor items between this item and the item of its parent element\n          pntItem.nodes.push(el);\n          pntItem = pntItem.parent;\n        }\n        // Delete content built during rendering - reduce API surface area and memory use, and avoid exposing of stale data after rendering...\n        delete tmplItem._ctnt;\n        delete tmplItem._wrap;\n        // Store template item as jQuery data on the element\n        jQuery.data(el, \"tmplItem\", tmplItem);\n        //cacheTmplItem.push(el);\n      }\n      function cloneTmplItem(key) {\n        key = key + keySuffix;\n        tmplItem = newClonedItems[key] =\n        newClonedItems[key] || newTmplItem(tmplItem, newTmplItems[tmplItem.parent.key + keySuffix] || tmplItem.parent, null, true);\n      }\n    }\n  }\n\n  //---- Helper functions for template item ----\n\n  function tiCalls(content, tmpl, data, options) {\n    if (!content) {\n      return stack.pop();\n    }\n    stack.push({ _: content, tmpl: tmpl, item: this, data: data, options: options });\n  }\n\n  function tiNest(tmpl, data, options) {\n    // nested template, using {{tmpl}} tag\n    if (!options) options = {};\n    options.nestedExecution = true;\n    return jQuery.tmpl(jQuery.template(tmpl), data, options, this);\n  }\n\n  function tiWrap(call, wrapped) {\n    // nested template, using {{wrap}} tag\n    var options = call.options || {};\n    options.wrapped = wrapped;\n    // Apply the template, which may incorporate wrapped content, \n    return jQuery.tmpl(jQuery.template(call.tmpl), call.data, options, call.item);\n  }\n\n  function tiHtml(filter, textOnly) {\n    var wrapped = this._wrap;\n    return jQuery.map(\n    jQuery(jQuery.isArray(wrapped) ? wrapped.join(\"\") : wrapped).filter(filter || \"*\"),\n    function (e) {\n      return textOnly ?\n      e.innerText || e.textContent :\n      e.outerHTML || outerHtml(e);\n    });\n  }\n\n  function tiUpdate() {\n    var coll = this.nodes;\n    jQuery.tmpl(null, null, null, this).insertBefore(coll[0]);\n    jQuery(coll).remove();\n  }\n})(jQuery);","/*\r\n *   Name: BizAgi Services\r\n *   Author: Diego Parra\r\n *   Comments:\r\n *   -   This class will provide a facade to access to all REST services available in Bizagi\r\n *   -   Can be extendable by each sub-module ex. rendering\r\n */\n\n$.Class.extend(\"bizagi.services.service\", {}, {\n  /* \r\n                                                 *   Constructor\r\n                                                 */\n  init: function init() {\n\n  },\n  getServerResourceDictionary: function getServerResourceDictionary() {\n    var proxyPrefix = \"\";\n    if (typeof bizagiConfig !== \"undefined\" && bizagiConfig.proxyPrefix) {\n      proxyPrefix = bizagiConfig.proxyPrefix;\n    } else {\n      if (typeof BIZAGI_PROXY_PREFIX !== 'undefined') {\n        proxyPrefix = BIZAGI_PROXY_PREFIX;\n      }\n    }\n    //var proxyPrefix = (typeof bizagiConfig !== \"undefined\" && bizagiConfig.proxyPrefix) ? bizagiConfig.proxyPrefix: ((typeof (BIZAGI_PROXY_PREFIX) !== 'undefined' ? BIZAGI_PROXY_PREFIX : \"\");\n    //var lowCaseLanguage = BIZAGI_LANGUAGE.substring(0, 2);\n    var culture = typeof BIZAGI_LANGUAGE === \"undefined\" ? bizagi.language : BIZAGI_LANGUAGE;\n    return $.ajax({\n      url: proxyPrefix + \"Rest/Multilanguage/Client?cultureName=\" + culture + \"&version=\" + bizagi.loader.version,\n      rpcEnabled: false,\n      cache: true,\n      dataType: \"json\",\n      async: true });\n\n  },\n  getResourceDictionary: function getResourceDictionary(url) {\n    return $.ajax({\n      url: url,\n      rpcEnabled: false,\n      dataType: \"json\",\n      async: true });\n\n  } });","/*\r\n*   Name: BizAgi Template Services\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This class will provide a facade to access to all templates available on bizagi\r\n*/\n\n$.Class.extend(\"bizagi.templates.services.service\", {\n  /*  Static templates*/\n  customTemplateFile: bizagi.loader.getResource(\"tmpl\", \"bizagi.overrides.\" + bizagi.detectDevice() + \".custom.templates\"),\n  cachedTemplates: {},\n  customTemplates: {} },\n\n{\n  /* \r\n  *   Constructor\r\n  */\n  init: function init(localization) {\n    this.localization = localization;\n    this.cssRegex = /{{css \"(.+)\"}}/g;\n    this.loadingFileDeferred = {};\n  },\n\n  /*\r\n     *   Load custom templates info in order to override framework stuff\r\n     */\n  loadCustomTemplates: function loadCustomTemplates() {\n    var self = this;\n    var defer = new $.Deferred();\n\n    $.when(this.getTemplateFile(this.Class.customTemplateFile)).\n    done(function (response) {\n      var temp = $(\"<div />\").html(response);\n      var responseParts = $(\"script\", temp);\n      $.each(responseParts, function (i, responsePart) {\n        responsePart = $(responsePart);\n        self.Class.customTemplates[responsePart.attr(\"id\")] = responsePart.html();\n      });\n\n\n      // Resolve deferred\n      defer.resolve();\n    });\n\n    return defer.promise();\n  },\n\n  /*\r\n     *   Returns the template from cache or from ajax\r\n     *   Must return a deferred\r\n     */\n  getTemplate: function getTemplate(template) {\n\n    var self = this;\n    var isCustomTemplate = false;\n\n\n    // If the template contains double hash, it's because its in release mode, then we got to ignore the first hash\n    template = template.replace(/([^#]*#)([^#]*#)([^#]*)/g, \"$1$3\");\n\n    // If the template contains the hash before the question mark, we need to exchange them\n    template = template.replace(/([a-zA-Z_\\/.-=]*)#([a-zA-Z_\\/.-]*)\\?(build=[a-zA-Z0-9.-]*)/g, \"$1?$3#$2\");\n\n    if (bizagi.enableCustomizations) {\n      var hash = self.getHash(template);\n\n      // Check if a custom template has been given in order to override it\n      if (self.Class.customTemplates[hash])\n      isCustomTemplate = true;\n    }\n\n    if (isCustomTemplate || bizagi.loader.environment !== \"release\") {\n      return this.internalGetTemplate(template).\n      pipe(function (resolvedTemplate) {\n        // Creates a in-memory element to hold the template\n        return $.template(\"#\" + template, resolvedTemplate);\n      });\n    } else\n    {\n      return this.getTemplateForRelease(template).pipe(function (resolvedTemplate) {\n        return $.template(\"#\" + template, resolvedTemplate);\n      });\n    }\n  },\n\n  /*\r\n      *   Returns the template from cache or from ajax\r\n      *   Must return a deferred\r\n      */\n  getTemplateWidget: function getTemplateWidget(template) {\n    var self = this;\n    var isCustomTemplate = false;\n\n\n    // If the template contains double hash, it's because its in release mode, then we got to ignore the first hash\n    template = template.replace(/([^#]*#)([^#]*#)([^#]*)/g, \"$1$3\");\n\n    // If the template contains the hash before the question mark, we need to exchange them\n    template = template.replace(/([a-zA-Z_\\/.-=]*)#([a-zA-Z_\\/.-]*)\\?(build=[a-zA-Z0-9.-]*)/g, \"$1?$3#$2\");\n\n    if (bizagi.enableCustomizations) {\n      var hash = self.getHash(template);\n\n      // Check if a custom template has been given in order to override it\n      if (self.Class.customTemplates[hash])\n      isCustomTemplate = true;\n    }\n\n    if (isCustomTemplate || bizagi.loader.environment !== \"release\") {\n      return this.internalGetTemplate(template).\n      pipe(function (resolvedTemplate) {\n        // Creates a in-memory element to hold the template\n        return $.templates(\"#\" + template, resolvedTemplate);\n      });\n    } else\n    {\n      return this.getTemplateForRelease(template).pipe(function (resolvedTemplate) {\n        return $.templates(\"#\" + template, resolvedTemplate);\n      });\n    }\n  },\n\n\n  /*\r\n     *   Returns the template from cache or from ajax\r\n     *   Must return a deferred\r\n     */\n  getTemplateWebpart: function getTemplateWebpart(template) {\n\n    // If the template contains double hash, it's because its in release mode, then we got to ignore the first hash\n    template = template.replace(/([^#]*#)([^#]*#)([^#]*)/g, \"$1$3\");\n\n    // If the template contains the hash before the question mark, we need to exchange them\n    template = template.replace(/([a-zA-Z_\\/.-=]*)#([a-zA-Z_\\/.-]*)\\?(build=[a-zA-Z0-9.-]*)/g, \"$1?$3#$2\");\n    return this.internalGetTemplate(template).\n    pipe(function (resolvedTemplate) {\n      // Creates a in-memory element to hold the template\n      return $.template(\"#\" + template, resolvedTemplate);\n    });\n  },\n\n  /*\r\n     * Load the production template and return requested template\r\n     */\n  getTemplateForRelease: function getTemplateForRelease(template) {\n    var self = this,defer = $.Deferred(),url,hash,cachedTemplate;\n\n    // extract url\n    if (self.containsHash(template)) {\n      url = self.getUrlWithoutHashes(template);\n      hash = self.getHash(template);\n    } else {\n      url = template;\n      hash = \"\";\n    }\n\n    cachedTemplate = self.Class.cachedTemplates[url];\n\n    if (!cachedTemplate) {\n      $.when(self.loadTemplateFileForRelease(url)).\n      done(function () {\n        defer.resolve(self.processAndReturnTemplate(url, hash));\n      });\n\n    } else {\n      defer.resolve(self.processAndReturnTemplate(url, hash));\n    }\n\n    return defer.promise();\n  },\n\n  loadTemplateFileForRelease: function loadTemplateFileForRelease(url) {\n    var self = this;\n    var defer = $.Deferred();\n\n    // Check in cache\n    if (self.Class.cachedTemplates[url]) return self.Class.cachedTemplates[url];\n\n    // Check if it is already being loaded\n    if (self.loadingFileDeferred[url]) {\n      $.when(self.loadingFileDeferred[url]).\n      done(function () {\n        // Resolve with cached content\n        defer.resolve(self.Class.cachedTemplates[url]);\n      });\n      return defer.promise();\n    }\n\n    // Load file via ajax\n    self.loadingFileDeferred[url] = $.Deferred();\n    $.when($.ajax({\n      url: url,\n      dataType: \"text\" }),\n\n    self.localization.ready()).\n    done(function (response) {\n      if (!response) {\n        defer.reject(\"\");\n      }\n      // response is an object\n      if (typeof response != \"string\") {\n        response = JSON.parse(response[0]);\n      }\n\n      self.Class.cachedTemplates[url] = response;\n\n      // process templates for translate, remove CSS and generate global function template\n      var index, valueTemplate, translatedTemplate;\n      for (index in response) {\n        if (response.hasOwnProperty(index)) {\n          valueTemplate = response[index];\n\n          translatedTemplate = self.localization.translate(valueTemplate);\n\n\n          // Remove css tags\n          translatedTemplate = translatedTemplate.replace(self.cssRegex, \"\");\n\n          if (index.indexOf(\"jsrender\") >= 0) {\n            delete self.Class.cachedTemplates[url][index];\n\n            index = index.substring(0, index.indexOf(\"jsrender\") - 1);\n            self.Class.cachedTemplates[url][index] = valueTemplate;\n            $.templates(\"#\" + index, translatedTemplate);\n\n          } else {\n            $.template(\"#\" + index, translatedTemplate);\n          }\n\n          self.Class.cachedTemplates[url][index] = self.Class.cachedTemplates[index] = translatedTemplate;\n\n\n        }\n      }\n\n      self.loadingFileDeferred[url].resolve();\n      defer.resolve(response);\n    });\n\n    return defer.promise();\n  },\n\n  /*\r\n     * Return hashed template\r\n     */\n  processAndReturnTemplate: function processAndReturnTemplate(url, hash) {\n    var self = this;\n    var template = self.Class.cachedTemplates[url][hash];\n\n    if (!template) {\n      throw \"template \" + template + \"doesn't exist\";\n    }\n\n    return template;\n  },\n\n  /*\r\n     *   Returns the template from cache or from ajax\r\n     *   Must return a deferred\r\n     */\n  internalGetTemplate: function internalGetTemplate(template) {\n    var self = this;\n    var defer = new $.Deferred();\n    var cachedTemplate = this.Class.cachedTemplates[template];\n    if (!cachedTemplate) {\n\n      // Check if the template has a hash\n      if (self.containsHash(template)) {\n        var url = self.getUrlWithoutHashes(template);\n        var hash = self.getHash(template);\n\n        // Check if a custom template has been given in order to override it\n        if (self.Class.customTemplates[hash]) {\n          // Resolve deferred\n          defer.resolve(self.Class.customTemplates[hash]);\n          return defer.promise();\n        }\n\n        $.when(self.getTemplatePart(url, hash)).\n        done(function (response) {\n          // Set in cache\n          self.Class.cachedTemplates[template] = response;\n\n          // Resolve deferred\n          defer.resolve(response);\n        });\n\n      } else {\n\n        // Gets the full template\n        $.when(self.getTemplateFile(template)).\n        done(function (response) {\n\n          // Resolve deferred\n          defer.resolve(response);\n        });\n      }\n    } else\n    {\n\n      defer.resolve(cachedTemplate);\n    }\n\n    return defer.promise();\n  },\n\n  /*\r\n     *   Gets a template part from a composite template file\r\n     *   Just load one template at a time to avoid multiple loadings of the same file\r\n     */\n  getTemplatePart: function getTemplatePart(templateUrl, hash) {\n    var self = this;\n    var defer = new $.Deferred();\n\n    // If it is already loading a template set a timeout to check later\n    $.when(self.loadingTemplatePartExecution).\n    done(function () {\n      // Set a async flag to synchronize this method\n      self.loadingTemplatePart = true;\n      self.loadingTemplatePartExecution = new $.Deferred();\n\n      // Load template file\n      $.when(self.getTemplateFile(templateUrl)).\n      done(function (response) {\n        var temp = $(\"<div />\").html(response);\n        var responsePart = $(\"#\" + hash, temp);\n\n        // Assertion to check that hash exists inside the main template\n        bizagi.assert(responsePart.length > 0, \"No template part (\" + hash + \") found in content for:\" + templateUrl);\n\n        // Set response\n        response = responsePart.html();\n\n        // Free async flag\n        self.loadingTemplatePartExecution.resolve();\n        self.loadingTemplatePart = true;\n\n        // Resolve main deferred\n        defer.resolve(response);\n      });\n    });\n\n    return defer.promise();\n  },\n\n  /*\r\n     *   Loads a full template file and keeps it on cache\r\n     */\n  getTemplateFile: function getTemplateFile(template) {\n    var self = this;\n    var defer = $.Deferred();\n    var cachedTemplate = this.Class.cachedTemplates[template];\n\n    if (cachedTemplate) {\n      return cachedTemplate;\n    }\n\n    // Check if it is already being loaded\n    if (self.loadingFileDeferred[template]) {\n      $.when(self.loadingFileDeferred[template]).\n      done(function () {\n        // Resolve with cached content\n        defer.resolve(self.Class.cachedTemplates[template]);\n      });\n      return defer.promise();\n    }\n\n    // Not found in cache, fetch it with ajax\n    self.loadingFileDeferred[template] = $.Deferred();\n    $.when(\n    $.ajax({\n      url: template,\n      dataType: \"text\" }),\n\n    self.localization.ready()).\n    pipe(function (response) {\n      // if no response has been found in the source file return an empty template\n      if (!response) return \"\";\n\n      if (typeof response != \"string\") {\n        response = response[0];\n      }\n\n      if (typeof response == \"undefined\") return \"\";\n\n      // Translate template\n      var translatedTemplate = self.localization.translate(response);\n\n      // Find css and import them\n      var matches = translatedTemplate.match(self.cssRegex);\n      if (matches) {\n        $.each(matches, function (i, match) {\n          var cssFile = match.replace(self.cssRegex, \"$1\");\n          bizagi.loader.loadFile({\n            src: cssFile,\n            type: \"css\",\n            environment: \"debug\" });\n\n        });\n      }\n      // Remove css tags\n      translatedTemplate = translatedTemplate.replace(self.cssRegex, \"\");\n\n      // Cache all sub-templates\n      var temp = $(\"<div />\").html(translatedTemplate);\n      $(\"script\", temp).each(function (i, subTemplate) {\n        var id = $(subTemplate).attr(\"id\"),\n        type = $(subTemplate).attr(\"type\");\n\n        if ($.templates && type && type.indexOf('jsrender') >= 0) {\n          $.templates(\"#\" + id, $(subTemplate).html());\n        } else {\n          try {\n            $.template(\"#\" + id, $(subTemplate).html());\n          } catch (e) {\n            console.log(e, temp);\n          }\n        }\n      });\n\n      // Set in cache\n      self.Class.cachedTemplates[template] = typeof translatedTemplate === \"string\" ? translatedTemplate : translatedTemplate[0].outerHTML;\n\n      self.loadingFileDeferred[template].resolve();\n      defer.resolve(translatedTemplate);\n\n\n    });\n\n    return defer.promise();\n  },\n\n  /*\r\n     *   Check if a url contains hashes\r\n     */\n  containsHash: function containsHash(url) {\n    return url.indexOf(\"#\") != -1;\n  },\n\n  /*\r\n     *   Get url hash\r\n     */\n  getHash: function getHash(url) {\n    return url.substring(url.indexOf(\"#\") + 1, url.length);\n  },\n\n  /*\r\n     *   Get url without hashes\r\n     */\n  getUrlWithoutHashes: function getUrlWithoutHashes(url) {\n    return url.substring(0, url.indexOf(\"#\"));\n  } });\n\n\n// Overrides empty method to apply custom stuff\nvar originalEmptyMethod = jQuery.fn.empty;\njQuery.fn.empty = function () {\n  // Call original jquery method\n  var result = originalEmptyMethod.apply(this, arguments);\n\n  // Check if it has loading property to apply plugin\n  var element = $(this);\n  if (element.hasClass(\"ui-bizagi-component-loading\")) {\n    element.loadingMessage();\n  }\n\n  // Return original response\n  return result;\n};\n// Overrides detach method to apply custom stuff\njQuery.fn.fastEmpty = function () {\n  // Call original jquery method\n  this.children().remove();\n\n  // Check if it has loading property to apply plugin\n  var element = $(this);\n  if (element.hasClass(\"ui-bizagi-component-loading\")) {\n    element.loadingMessage();\n  }\n};\n// Overrides append and prepend method to apply custom stuff\nvar originalPrependMethod = jQuery.fn.prepend;\njQuery.fn.prepend = function () {\n  // Check if it has loading property to apply plugin\n  var element = $(this);\n  if (element.length == 0) return jQuery.fn;\n  if (element.data(\"loading\")) {\n    // Clear the container\n    originalEmptyMethod.apply(this);\n    element.data(\"loading\", false);\n  }\n\n  // Call original jquery method\n  var result = originalPrependMethod.apply(this, arguments);\n\n  // Check if the new content has adjustable content\n  if (element[0].tagName.toLowerCase() != \"body\" && element.find(\".ui-bizagi-component-adjustable\").length > 0) {\n    $(document).triggerHandler(\"resizeLayout\");\n  }\n  element.removeData(\"loading\");\n\n  // Return original response\n  return result;\n};\n\nvar originalAppendMethod = jQuery.fn.append;\njQuery.fn.append = function () {\n  // Check if it has loading property to apply plugin\n  var element = $(this);\n  if (element.length == 0) return jQuery.fn;\n  if (eval(element.attr(\"data-loading\"))) {\n    // Clear the container\n    originalEmptyMethod.apply(this);\n    element.data(\"loading\", false);\n  }\n\n  // Call original jquery method\n  var result = originalAppendMethod.apply(this, arguments);\n\n  // Check if the new content has adjustable content\n  var tagName = element[0].tagName || \"\";\n  if (tagName.toLowerCase() != \"body\" && element.find(\".ui-bizagi-component-adjustable\").length > 0) {\n    $(document).triggerHandler(\"resizeLayout\");\n  }\n  element.removeData(\"loading\");\n\n  // Return original response\n  return result;\n};\n\n/*\r\n   *   JQuery tmpl extension\r\n   */\nvar originalTmplMethod = jQuery.tmpl;\njQuery.tmpl = function () {\n  // Call original jquery method\n  var result = originalTmplMethod.apply(this, arguments);\n  if (arguments[2] && arguments[2].fast) return result;\n\n  // Execute custom stuff after the template has been processed\n  $(\".ui-bizagi-component\", result).each(function (i, element) {\n    var component = $(element).attr(\"component\");\n    var parent = $(element).parent();\n    while (parent[0].tagName.length == 0) {\n      parent = parent.parent();\n    }\n\n    parent.attr(\"data-bizagi-component\", component);\n    $(element).detach();\n  });\n\n  // Configure loading message\n  if ($(\"[data-loading=true]\", result).length > 0) {\n    $(\"[data-loading=true]\", result).loadingMessage();\n  }\n  $(\"[data-loading=true]\", result).addClass(\"ui-bizagi-component-loading\");\n  if (result.jquery) {\n    // Check in root elements\n    $.each(result, function (i, element) {\n      if (element.outerHTML && $(element).is(\"[data-loading=true]\")) {\n        $(element).loadingMessage();\n        $(element).addClass(\"ui-bizagi-component-loading\");\n      }\n    });\n  }\n\n  // Configure adjustable containers\n  $(\"[data-adjustable=true]\", result).addClass(\"ui-bizagi-component-adjustable\");\n  if (result.jquery) {\n    // Check in root elements\n    $.each(result, function (i, element) {\n      if (element.outerHTML && $(element).is(\"[data-adjustable=true]\")) {\n        $(element).addClass(\"ui-bizagi-component-adjustable\");\n      }\n    });\n  }\n\n  // Return original response\n  return result;\n};\n\n// Clone inner methods / objects\nfor (key in originalTmplMethod) {\n  jQuery.tmpl[key] = originalTmplMethod[key];\n}\n\n// Extend with custom tags\n$.extend(jQuery.tmpl.tag, {\n  'component': {\n    open: '_ = _.concat(\\'<div class=\"ui-bizagi-component\" component=\"$1\"></div>\\');' },\n\n  'loading': {\n    open: '_ = _.concat(\\'data-loading=\"true\"\\');' },\n\n  'adjustable': {\n    open: '_ = _.concat(\\'data-adjustable=\"true\"\\');' },\n\n  'resource': {\n    _default: { $1: \"$data\" },\n    open: \"if($notnull_1){_.push($.encode(bizagi.localization.getResource($1a)));}\" },\n\n  'log': {\n    open: \"console.log($1, $2);\" },\n\n  'children': {\n    open: \"_ = _.concat(\\'{{children}}');\" },\n\n  'control': {\n    open: \"_ = _.concat(\\'{{control}}');\" },\n\n  'files': {\n    open: \"_ = _.concat(\\'{{files}}');\" },\n\n  'result': {\n    open: \"_ = _.concat(\\'{{result}}');\" },\n\n  'element': {\n    open: \"_ = _.concat(\\'{{element $1}}');\" },\n\n  \"for\": {\n    _default: { $2: \"var i=1;i<=1;i++\" },\n    open: 'for ($2){',\n    close: '};' },\n\n  'actions': {\n    open: \"_ = _.concat(\\'{{actions}}');\" } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /*\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: BizAgi Utils\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: Diego Parra\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This class will provide misc helpers to all modules\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\n// Create or Define BizAgi namespace\nbizagi = typeof bizagi !== \"undefined\" ? bizagi : {};\nbizagi.util = typeof bizagi.util !== \"undefined\" ? bizagi.util : {};\nbizagi.context = typeof bizagi.context !== \"undefined\" ? bizagi.context : {};\nbizagi.util.smartphone = typeof bizagi.util.smartphone !== \"undefined\" ? bizagi.util.smartphone : {};\nbizagi.util.tablet = typeof bizagi.util.tablet !== \"undefined\" ? bizagi.util.tablet : {};\n\nvar DEVICES = {};\n\n// Device Type\nDEVICES[DEVICES['desktop'] = 0] = 'desktop';\nDEVICES[DEVICES['smartphone'] = 1] = 'smartphone';\nDEVICES[DEVICES['tablet'] = 2] = 'tablet';\n\n// Add definition\nbizagi.deviceEnum = DEVICES;\n\n/*\r\n                              *   Define mini-plugin to acceess iframe's boundaries\r\n                              */\n(function ($) {\n  $.fn.callInside = function (fx, args) {\n    if ($(this)[0].tagName.toLowerCase() != \"iframe\")\n    return null;\n    // Don't execute the code when the content window is not ready yet    \n    if ($(this)[0].contentWindow == null)\n    return null;\n    // Check if the iframe is cross domain\n    try {\n      // Evals the content\n      $(this)[0].contentWindow.args = args;\n    } catch (e) {\n      // If an exception is thrown here this is a cross domain access\n      return null;\n    }\n\n    if ($.browser.msie) {\n      return $(this)[0].contentWindow.execScript('args = (this.window.args)?this.window.args:{}; insideFunction = ' + fx.toString() + '; insideFunction(args)');\n    } else if ($.browser.webkit || $.browser.mozilla) {\n      return $(this)[0].contentWindow.eval('args = window.args;insideFunction = ' + fx.toString() + '; insideFunction(args)');\n    }\n  };\n})(jQuery);\n(function ($) {\n  $.fn.callInsidePopup = function (fx, args) {\n    // This is window here\n    var self = this;\n    $(document).ready(function () {\n      // Check if the iframe is cross domain\n      try {\n        // Evals the content\n        $(self)[0].args = args;\n      } catch (e) {\n        // If an exception is thrown here this is a cross domain access\n        return null;\n      }\n\n      if ($.browser.msie) {\n        return $(self)[0].execScript('args = (this.window.args)?this.window.args:{}; insideFunction = ' + fx.toString() + '; insideFunction(args)');\n      } else if ($.browser.webkit || $.browser.mozilla) {\n        return $(self)[0].eval('args = window.args;insideFunction = ' + fx.toString() + '; insideFunction(args)');\n      }\n\n    });\n  };\n})(jQuery);\n(function ($) {\n\n  // add support for CSS functions for \"setProperty\" in ie8\n  var isStyleFuncSupported = !!CSSStyleDeclaration.prototype.getPropertyValue;\n  if (!isStyleFuncSupported) {\n    CSSStyleDeclaration.prototype.getPropertyValue = function (a) {\n      return this.getAttribute(a);\n    };\n    CSSStyleDeclaration.prototype.setProperty = function (styleName, value, priority) {\n      this.setAttribute(styleName, value);\n      var priority = typeof priority != 'undefined' ? priority : '';\n      if (priority != '') {\n        // Add priority manually\n        var rule = new RegExp(RegExp.escape(styleName) + '\\\\s*:\\\\s*' + RegExp.escape(value) + '(\\\\s*;)?', 'gmi');\n        this.cssText = this.cssText.replace(rule, styleName + ': ' + value + ' !' + priority + ';');\n      }\n    };\n\n    CSSStyleDeclaration.prototype.removeProperty = function (a) {\n      return this.removeAttribute(a);\n    };\n\n    CSSStyleDeclaration.prototype.getPropertyPriority = function (styleName) {\n      var rule = new RegExp(RegExp.escape(styleName) + '\\\\s*:\\\\s*[^\\\\s]*\\\\s*!important(\\\\s*;)?', 'gmi');\n      return rule.test(this.cssText) ? 'important' : '';\n    };\n  }\n\n  // Escape regex chars with \\\n  RegExp.escape = function (text) {\n    return text.replace(/[-[\\]{}()*+?.,\\\\^$|#\\s]/g, \"\\\\$&\");\n  };\n\n  // The style function\n  jQuery.fn.style = function (styleName, value, priority) {\n    // DOM node\n    var node = this.get(0);\n    // Ensure we have a DOM node \n    if (typeof node == 'undefined') {\n      return;\n    }\n    // CSSStyleDeclaration\n    var style = this.get(0).style;\n    // Getter/Setter\n    if (typeof styleName != 'undefined') {\n      if (typeof value != 'undefined') {\n        // Set style property\n        var priority = typeof priority != 'undefined' ? priority : '';\n        // Hack to IE8\n        if (style.setProperty) {\n          style.setProperty(styleName, value, priority);\n        } else {\n          style.setAttribute(styleName, value, priority);\n        }\n      } else {\n        // Get style property\n\n        return style.getPropertyValue(styleName);\n      }\n    } else {\n      // Get CSSStyleDeclaration\n      return style;\n    }\n  };\n})(jQuery);\n\n(function ($) {\n  jQuery.nl2br = function (value) {\n    return value.replace(/(\\r\\n|\\n\\r|\\r|\\n|\\\\r\\\\n|\\\\n\\\\r|\\\\r|\\\\n)/g, \"<br>\");\n  };\n})(jQuery);\n\n\n\n(function ($) {\n  jQuery.br2nl = function (value) {\n    return value.replace(/\\r\\n|\\r|\\n/g, \"\\r\");\n  };\n})(jQuery);\n\n/**\r\n             *   Can be compare control between their intance value and existing value\r\n             */\n//TODO: DEPL- Please move this out of here, this is rendering logic, it must exists as a function for the render, and every erender could override its implementation\n(function ($) {\n  jQuery.controlValueIsChanged = function (control) {\n    var self = control;\n    var properties = self.properties;\n    var value = self.getValue();\n    var compareValue = properties.originalValue;\n    var result = true;\n\n    // Flag to force to collect data\n    if ($.forceCollectData) {\n      return true;\n    }\n\n    // Verify if control has been ready\n    if (control.properties.type == \"grid\" && control.ready().state() == \"pending\") {\n      return false;\n    }\n\n    if ([\"combo\", \"queryCombo\", \"list\", \"queryList\", \"radio\", \"queryRadio\", \"queryState\"].includes(properties.type) || /^cascadingcombo$/i.test(properties.type)) {\n      if (value && value.length !== undefined)\n      value = value[0];\n      if (compareValue && compareValue.length !== undefined)\n      compareValue = compareValue[0];\n      value = value && value.id ? value.id : value;\n      compareValue = compareValue && compareValue.id ? compareValue.id : compareValue;\n      result = compareValue == value ? false : true;\n    } else if (properties.type == \"boolean\" || properties.type == \"queryBoolean\" || properties.type == \"queryCheck\") {\n      result = bizagi.util.parseBoolean(compareValue) == bizagi.util.parseBoolean(value) ? false : true;\n    } else if (properties.type == \"searchNumber\") {\n\n      result = value ? true : false;\n    } else if (properties.type === \"date\") {\n      result = new Date(compareValue).getTime() !== new Date(value).getTime();\n    } else {\n      result = compareValue === value ? false : true;\n    }\n\n    return result;\n  };\n})(jQuery);\n\n(function ($) {\n  jQuery.getMaxZindex = function () {\n    var elm = $(\"*\");\n    var maxZindex = 1;\n\n    $.each(elm, function (key, value) {\n      var zindex = parseInt($(value).css(\"z-index\"));\n      if (zindex > maxZindex) {\n        maxZindex = zindex + 1;\n      }\n\n    });\n\n    return maxZindex;\n  };\n})(jQuery);\n\n/**\r\n             * Set the same max height to multiples divs\r\n             */\n(function ($) {\n  jQuery.equalizeHeights = function (selector) {\n    var heights = new Array();\n    // Loop to get all element heights\n    $(selector).each(function () {\n\n      // Need to let sizes be whatever they want so no overflow on resize\n      $(this).css('min-height', '0');\n      $(this).css('max-height', 'none');\n      $(this).css('height', 'auto');\n\n      // Then add size (no units) to array\n      heights.push($(this).outerHeight());\n    });\n\n    // Find max height of all elements\n    var max = Math.max.apply(Math, heights);\n\n    // Set all heights to max height\n    $(selector).each(function () {\n      $(this).css('height', max + 'px');\n    });\n  };\n})(jQuery);\n\n//TODO: DEPL - Move this to rendering\nbizagi.util.autoSave = function () {\n  var deferredSave = $.Deferred();\n  //if attr data-event exist trigger event auto-save or resolve the deferred\n  if (bizagi.util.detectDevice() !== \"desktop\") {\n    if ($(document).data('auto-save')) {\n      $(document).trigger('save-form', [deferredSave]);\n    } else {\n      deferredSave.resolve();\n    }\n  } else {\n    if ($._data($(document)[0], 'events')[\"save-form\"] && $._data($(document)[0], 'events')[\"save-form\"].length > 0) {\n      $(document).trigger('save-form', [deferredSave]);\n    } else {\n      deferredSave.resolve();\n    }\n  }\n  return deferredSave.promise();\n};\n//--  **Users Deleted** the name will fill on first reques in UsersPictures\nbizagi.util.anonymizedUserInformation = {\n  id: \"00000000-0000-0000-0000-000000000000\",\n  name: \"\",\n  username: \"\",\n  email: \"\",\n  domain: \"\",\n  picture: \"\",\n  isAnonymized: true };\n\n\n//-- **Resources for date picker**\nbizagi.util.datepickerResource = [];\n// taken  from https://github.com/jquery/jquery-ui/tree/master/ui/i18n\nbizagi.util.datepickerResource[\"en\"] = { closeText: \"Done\", prevText: \"Prev\", nextText: \"Next\", currentText: \"Today\", monthNames: [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"], monthNamesShort: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"], dayNames: [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"], dayNamesShort: [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"], dayNamesMin: [\"Su\", \"Mo\", \"Tu\", \"We\", \"Th\", \"Fr\", \"Sa\"], weekHeader: \"Wk\", dateFormat: \"dd/mm/yy\", firstDay: 1, isRTL: false, showMonthAfterYear: false, yearSuffix: \"\" };\nbizagi.util.datepickerResource[\"es\"] = { closeText: \"Cerrar\", prevText: \"&#x3C;Ant\", nextText: \"Sig&#x3E;\", currentText: \"Hoy\", monthNames: [\"enero\", \"febrero\", \"marzo\", \"abril\", \"mayo\", \"junio\", \"julio\", \"agosto\", \"septiembre\", \"octubre\", \"noviembre\", \"diciembre\"], monthNamesShort: [\"ene\", \"feb\", \"mar\", \"abr\", \"may\", \"jun\", \"jul\", \"ago\", \"sep\", \"oct\", \"nov\", \"dic\"], dayNames: [\"domingo\", \"lunes\", \"martes\", \"miércoles\", \"jueves\", \"viernes\", \"sábado\"], dayNamesShort: [\"dom\", \"lun\", \"mar\", \"mié\", \"jue\", \"vie\", \"sáb\"], dayNamesMin: [\"D\", \"L\", \"M\", \"X\", \"J\", \"V\", \"S\"], weekHeader: \"Sm\", dateFormat: \"dd/mm/yy\", firstDay: 1, isRTL: false, showMonthAfterYear: false, yearSuffix: \"\" };\nbizagi.util.datepickerResource[\"ar\"] = { closeText: \"إغلاق\", prevText: \"&#x3C;السابق\", nextText: \"التالي&#x3E;\", currentText: \"اليوم\", monthNames: [\"يناير\", \"ٝبراير\", \"مارس\", \"أبريل\", \"مايو\", \"يونيو\", \"يوليو\", \"أغسطس\", \"سبتمبر\", \"أكتوبر\", \"نوٝمبر\", \"ديسمبر\"], monthNamesShort: [\"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"10\", \"11\", \"12\"], dayNames: [\"الأحد\", \"الاثنين\", \"الثلاثاء\", \"الأربعاء\", \"الخميس\", \"الجمعة\", \"السبت\"], dayNamesShort: [\"أحد\", \"اثنين\", \"ثلاثاء\", \"أربعاء\", \"خميس\", \"جمعة\", \"سبت\"], dayNamesMin: [\"ح\", \"ن\", \"ث\", \"ر\", \"خ\", \"ج\", \"س\"], weekHeader: \"أسبوع\", dateFormat: \"dd/mm/yy\", firstDay: 0, isRTL: true, showMonthAfterYear: false, yearSuffix: \"\" };\nbizagi.util.datepickerResource[\"cs\"] = { closeText: \"Zavřít\", prevText: \"&#x3C;Dříve\", nextText: \"Později&#x3E;\", currentText: \"Nyní\", monthNames: [\"leden\", \"únor\", \"březen\", \"duben\", \"květen\", \"ĝerven\", \"ĝervenec\", \"srpen\", \"září\", \"říjen\", \"listopad\", \"prosinec\"], monthNamesShort: [\"led\", \"úno\", \"bře\", \"dub\", \"kvě\", \"ĝer\", \"ĝvc\", \"srp\", \"zář\", \"říj\", \"lis\", \"pro\"], dayNames: [\"neděle\", \"pondělí\", \"úterý\", \"středa\", \"ĝtvrtek\", \"pátek\", \"sobota\"], dayNamesShort: [\"ne\", \"po\", \"út\", \"st\", \"ĝt\", \"pá\", \"so\"], dayNamesMin: [\"ne\", \"po\", \"út\", \"st\", \"ĝt\", \"pá\", \"so\"], weekHeader: \"Týd\", dateFormat: \"dd.mm.yy\", firstDay: 1, isRTL: false, showMonthAfterYear: false, yearSuffix: \"\" };\nbizagi.util.datepickerResource[\"de\"] = { closeText: \"Schließen\", prevText: \"&#x3C;Zurück\", nextText: \"Vor&#x3E;\", currentText: \"Heute\", monthNames: [\"Januar\", \"Februar\", \"März\", \"April\", \"Mai\", \"Juni\", \"Juli\", \"August\", \"September\", \"Oktober\", \"November\", \"Dezember\"], monthNamesShort: [\"Jan\", \"Feb\", \"Mär\", \"Apr\", \"Mai\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Okt\", \"Nov\", \"Dez\"], dayNames: [\"Sonntag\", \"Montag\", \"Dienstag\", \"Mittwoch\", \"Donnerstag\", \"Freitag\", \"Samstag\"], dayNamesShort: [\"So\", \"Mo\", \"Di\", \"Mi\", \"Do\", \"Fr\", \"Sa\"], dayNamesMin: [\"So\", \"Mo\", \"Di\", \"Mi\", \"Do\", \"Fr\", \"Sa\"], weekHeader: \"KW\", dateFormat: \"dd.mm.yy\", firstDay: 1, isRTL: false, showMonthAfterYear: false, yearSuffix: \"\" };\nbizagi.util.datepickerResource[\"fr\"] = { closeText: \"Fermer\", prevText: \"Précédent\", nextText: \"Suivant\", currentText: \"Aujourd'hui\", monthNames: [\"janvier\", \"février\", \"mars\", \"avril\", \"mai\", \"juin\", \"juillet\", \"août\", \"septembre\", \"octobre\", \"novembre\", \"décembre\"], monthNamesShort: [\"janv.\", \"févr.\", \"mars\", \"avr.\", \"mai\", \"juin\", \"juil.\", \"août\", \"sept.\", \"oct.\", \"nov.\", \"déc.\"], dayNames: [\"dimanche\", \"lundi\", \"mardi\", \"mercredi\", \"jeudi\", \"vendredi\", \"samedi\"], dayNamesShort: [\"dim.\", \"lun.\", \"mar.\", \"mer.\", \"jeu.\", \"ven.\", \"sam.\"], dayNamesMin: [\"D\", \"L\", \"M\", \"M\", \"J\", \"V\", \"S\"], weekHeader: \"Sem.\", dateFormat: \"dd/mm/yy\", firstDay: 1, isRTL: false, showMonthAfterYear: false, yearSuffix: \"\" };\nbizagi.util.datepickerResource[\"it\"] = { closeText: \"Chiudi\", prevText: \"&#x3C;Prec\", nextText: \"Succ&#x3E;\", currentText: \"Oggi\", monthNames: [\"Gennaio\", \"Febbraio\", \"Marzo\", \"Aprile\", \"Maggio\", \"Giugno\", \"Luglio\", \"Agosto\", \"Settembre\", \"Ottobre\", \"Novembre\", \"Dicembre\"], monthNamesShort: [\"Gen\", \"Feb\", \"Mar\", \"Apr\", \"Mag\", \"Giu\", \"Lug\", \"Ago\", \"Set\", \"Ott\", \"Nov\", \"Dic\"], dayNames: [\"Domenica\", \"Lunedì\", \"Martedì\", \"Mercoledì\", \"Giovedì\", \"Venerdì\", \"Sabato\"], dayNamesShort: [\"Dom\", \"Lun\", \"Mar\", \"Mer\", \"Gio\", \"Ven\", \"Sab\"], dayNamesMin: [\"Do\", \"Lu\", \"Ma\", \"Me\", \"Gi\", \"Ve\", \"Sa\"], weekHeader: \"Sm\", dateFormat: \"dd/mm/yy\", firstDay: 1, isRTL: false, showMonthAfterYear: false, yearSuffix: \"\" };\nbizagi.util.datepickerResource[\"ja\"] = { closeText: \"閉㝘る\", prevText: \"&#x3C;剝\", nextText: \"次&#x3E;\", currentText: \"今日\", monthNames: [\"1月\", \"2月\", \"3月\", \"4月\", \"5月\", \"6月\", \"7月\", \"8月\", \"9月\", \"10月\", \"11月\", \"12月\"], monthNamesShort: [\"1月\", \"2月\", \"3月\", \"4月\", \"5月\", \"6月\", \"7月\", \"8月\", \"9月\", \"10月\", \"11月\", \"12月\"], dayNames: [\"日曜日\", \"月曜日\", \"睫曜日\", \"水曜日\", \"木曜日\", \"金曜日\", \"土曜日\"], dayNamesShort: [\"日\", \"月\", \"睫\", \"水\", \"木\", \"金\", \"土\"], dayNamesMin: [\"日\", \"月\", \"睫\", \"水\", \"木\", \"金\", \"土\"], weekHeader: \"週\", dateFormat: \"yy/mm/dd\", firstDay: 0, isRTL: false, showMonthAfterYear: true, yearSuffix: \"年\" };\nbizagi.util.datepickerResource[\"nl\"] = { closeText: \"Sluiten\", prevText: \"←\", nextText: \"→\", currentText: \"Vandaag\", monthNames: [\"januari\", \"februari\", \"maart\", \"april\", \"mei\", \"juni\", \"juli\", \"augustus\", \"september\", \"oktober\", \"november\", \"december\"], monthNamesShort: [\"jan\", \"feb\", \"mrt\", \"apr\", \"mei\", \"jun\", \"jul\", \"aug\", \"sep\", \"okt\", \"nov\", \"dec\"], dayNames: [\"zondag\", \"maandag\", \"dinsdag\", \"woensdag\", \"donderdag\", \"vrijdag\", \"zaterdag\"], dayNamesShort: [\"zon\", \"maa\", \"din\", \"woe\", \"don\", \"vri\", \"zat\"], dayNamesMin: [\"zo\", \"ma\", \"di\", \"wo\", \"do\", \"vr\", \"za\"], weekHeader: \"Wk\", dateFormat: \"dd-mm-yy\", firstDay: 1, isRTL: false, showMonthAfterYear: false, yearSuffix: \"\" };\nbizagi.util.datepickerResource[\"pt\"] = { closeText: \"Fechar\", prevText: \"Anterior\", nextText: \"Seguinte\", currentText: \"Hoje\", monthNames: [\"Janeiro\", \"Fevereiro\", \"Março\", \"Abril\", \"Maio\", \"Junho\", \"Julho\", \"Agosto\", \"Setembro\", \"Outubro\", \"Novembro\", \"Dezembro\"], monthNamesShort: [\"Jan\", \"Fev\", \"Mar\", \"Abr\", \"Mai\", \"Jun\", \"Jul\", \"Ago\", \"Set\", \"Out\", \"Nov\", \"Dez\"], dayNames: [\"Domingo\", \"Segunda-feira\", \"Terça-feira\", \"Quarta-feira\", \"Quinta-feira\", \"Sexta-feira\", \"Sábado\"], dayNamesShort: [\"Dom\", \"Seg\", \"Ter\", \"Qua\", \"Qui\", \"Sex\", \"Sáb\"], dayNamesMin: [\"Dom\", \"Seg\", \"Ter\", \"Qua\", \"Qui\", \"Sex\", \"Sáb\"], weekHeader: \"Sem\", dateFormat: \"dd/mm/yy\", firstDay: 1, isRTL: false, showMonthAfterYear: false, yearSuffix: \"\" };\nbizagi.util.datepickerResource[\"ru\"] = { closeText: \"Закрыть\", prevText: \"&#x3C;Пред\", nextText: \"След&#x3E;\", currentText: \"Сегоднѝ\", monthNames: [\"Январь\", \"Февраль\", \"Март\", \"Нпрель\", \"Май\", \"Июнь\", \"Июль\", \"Нвгуѝт\", \"Сентѝбрь\", \"Октѝбрь\", \"Ноѝбрь\", \"Декабрь\"], monthNamesShort: [\"Янв\", \"Фев\", \"Мар\", \"Нпр\", \"Май\", \"Июн\", \"Июл\", \"Нвг\", \"Сен\", \"Окт\", \"Ноѝ\", \"Дек\"], dayNames: [\"воѝкреѝенье\", \"понедельник\", \"вторник\", \"ѝреда\", \"четверг\", \"пѝтница\", \"ѝуббота\"], dayNamesShort: [\"вѝк\", \"пнд\", \"втр\", \"ѝрд\", \"чтв\", \"птн\", \"ѝбт\"], dayNamesMin: [\"Вѝ\", \"Пн\", \"Вт\", \"Ср\", \"Чт\", \"Пт\", \"Сб\"], weekHeader: \"Нед\", dateFormat: \"dd.mm.yy\", firstDay: 1, isRTL: false, showMonthAfterYear: false, yearSuffix: \"\" };\nbizagi.util.datepickerResource[\"zh\"] = { closeText: \"关闭\", prevText: \"&#x3C;上月\", nextText: \"下月&#x3E;\", currentText: \"今天\", monthNames: [\"一月\", \"二月\", \"三月\", \"四月\", \"五月\", \"六月\", \"七月\", \"八月\", \"九月\", \"坝月\", \"坝一月\", \"坝二月\"], monthNamesShort: [\"一月\", \"二月\", \"三月\", \"四月\", \"五月\", \"六月\", \"七月\", \"八月\", \"九月\", \"坝月\", \"坝一月\", \"坝二月\"], dayNames: [\"星期日\", \"星期一\", \"星期二\", \"星期三\", \"星期四\", \"星期五\", \"星期六\"], dayNamesShort: [\"周日\", \"周一\", \"周二\", \"周三\", \"周四\", \"周五\", \"周六\"], dayNamesMin: [\"日\", \"一\", \"二\", \"三\", \"四\", \"五\", \"六\"], weekHeader: \"周\", dateFormat: \"yy-mm-dd\", firstDay: 1, isRTL: false, showMonthAfterYear: true, yearSuffix: \"年\" };\n\n//--  **Communication between Workportal and LiveProcesses**\n\n// Create new Live Process\nbizagi.util.liveProcessesEvents = bizagi.util.liveProcessesEvents || {};\nbizagi.util.liveProcessesEvents.newLiveProcess = document.createEvent('Event');\nbizagi.util.liveProcessesEvents.newLiveProcess.initEvent('new-live-process', true, true);\n\n// Event for changing route inside LiveProcesses\nbizagi.util.liveProcessesEvents.routeEvents = document.createEvent('Event');\nbizagi.util.liveProcessesEvents.routeEvents.initEvent('parent-route-events', true, true);\nbizagi.util.liveProcessesEvents.routeEvents.route = '/';\n\n// Verify save condition\nbizagi.util.liveProcessesEvents.saveEvent = document.createEvent('Event');\nbizagi.util.liveProcessesEvents.saveEvent.initEvent('save-live', true, true);\nbizagi.util.liveProcessesEvents.saveEvent.lastWidget = '';\nbizagi.util.liveProcessesEvents.saveEvent.nextWidget = '';\n\nbizagi.util.liveSave = function (widgetName) {\n  bizagi.util.liveProcessesEvents.saveEvent.nextWidget = widgetName;\n  var deferredLiveSave = $.Deferred();\n  var indeX = 0;\n  // next try/catch avoids crossdomain messages in the middle of \"Next button\" execution\n  try {\n    indeX = $(document).find('iframe')[0].contentWindow.location.href.indexOf('quickprocess');\n  }\n  catch (e) {\n    indeX = -1;\n  }\n  if (\n  (widgetName !== bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_PROFLY || widgetName === bizagi.util.liveProcessesEvents.saveEvent.lastWidget) &&\n  $(document).find('iframe').length > 0 && indeX > 0)\n  {\n    bizagi.util.liveProcessesEvents.saveEvent.saveLivePromise = deferredLiveSave;\n    document.dispatchEvent(bizagi.util.liveProcessesEvents.saveEvent);\n  } else {\n    deferredLiveSave.resolve();\n  }\n  $.when(deferredLiveSave).done(function () {bizagi.util.liveProcessesEvents.saveEvent.lastWidget = widgetName;});\n  return deferredLiveSave.promise();\n};\n\n/**\r\n    * CryptoJS MD5\r\n    * @param {} message\r\n    * @returns {}\r\n    */\nbizagi.util.md5 = function (message) {\n  // Code here will be linted with JSHint.\n  /* jshint ignore:start */\n  var CryptoJS = CryptoJS || function (s, p) {var m = {},l = m.lib = {},n = function n() {},r = l.Base = { extend: function extend(b) {n.prototype = this;var h = new n();b && h.mixIn(b);h.hasOwnProperty(\"init\") || (h.init = function () {h.$super.init.apply(this, arguments);});h.init.prototype = h;h.$super = this;return h;}, create: function create() {var b = this.extend();b.init.apply(b, arguments);return b;}, init: function init() {}, mixIn: function mixIn(b) {for (var h in b) {b.hasOwnProperty(h) && (this[h] = b[h]);}b.hasOwnProperty(\"toString\") && (this.toString = b.toString);}, clone: function clone() {return this.init.prototype.extend(this);} },q = l.WordArray = r.extend({ init: function init(b, h) {b = this.words = b || [];this.sigBytes = h != p ? h : 4 * b.length;}, toString: function toString(b) {return (b || t).stringify(this);}, concat: function concat(b) {var h = this.words,a = b.words,j = this.sigBytes;b = b.sigBytes;this.clamp();if (j % 4) for (var g = 0; g < b; g++) {h[j + g >>> 2] |= (a[g >>> 2] >>> 24 - 8 * (g % 4) & 255) << 24 - 8 * ((j + g) % 4);} else if (65535 < a.length) for (g = 0; g < b; g += 4) {h[j + g >>> 2] = a[g >>> 2];} else h.push.apply(h, a);this.sigBytes += b;return this;}, clamp: function clamp() {var b = this.words,h = this.sigBytes;b[h >>> 2] &= 4294967295 << 32 - 8 * (h % 4);b.length = s.ceil(h / 4);}, clone: function clone() {var b = r.clone.call(this);b.words = this.words.slice(0);return b;}, random: function random(b) {for (var h = [], a = 0; a < b; a += 4) {h.push(4294967296 * s.random() | 0);}return new q.init(h, b);} }),v = m.enc = {},t = v.Hex = { stringify: function stringify(b) {var a = b.words;b = b.sigBytes;for (var g = [], j = 0; j < b; j++) {var k = a[j >>> 2] >>> 24 - 8 * (j % 4) & 255;g.push((k >>> 4).toString(16));g.push((k & 15).toString(16));}return g.join(\"\");}, parse: function parse(b) {for (var a = b.length, g = [], j = 0; j < a; j += 2) {g[j >>> 3] |= parseInt(b.substr(j, 2), 16) << 24 - 4 * (j % 8);}return new q.init(g, a / 2);} },a = v.Latin1 = { stringify: function stringify(b) {var a = b.words;b = b.sigBytes;for (var g = [], j = 0; j < b; j++) {g.push(String.fromCharCode(a[j >>> 2] >>> 24 - 8 * (j % 4) & 255));}return g.join(\"\");}, parse: function parse(b) {for (var a = b.length, g = [], j = 0; j < a; j++) {g[j >>> 2] |= (b.charCodeAt(j) & 255) << 24 - 8 * (j % 4);}return new q.init(g, a);} },u = v.Utf8 = { stringify: function stringify(b) {try {return decodeURIComponent(escape(a.stringify(b)));} catch (g) {throw Error(\"Malformed UTF-8 data\");}}, parse: function parse(b) {return a.parse(unescape(encodeURIComponent(b)));} },g = l.BufferedBlockAlgorithm = r.extend({ reset: function reset() {this._data = new q.init();this._nDataBytes = 0;}, _append: function _append(b) {\"string\" == typeof b && (b = u.parse(b));this._data.concat(b);this._nDataBytes += b.sigBytes;}, _process: function _process(b) {var a = this._data,g = a.words,j = a.sigBytes,k = this.blockSize,m = j / (4 * k),m = b ? s.ceil(m) : s.max((m | 0) - this._minBufferSize, 0);b = m * k;j = s.min(4 * b, j);if (b) {for (var l = 0; l < b; l += k) {this._doProcessBlock(g, l);}l = g.splice(0, b);a.sigBytes -= j;}return new q.init(l, j);}, clone: function clone() {var b = r.clone.call(this);b._data = this._data.clone();return b;}, _minBufferSize: 0 });l.Hasher = g.extend({ cfg: r.extend(), init: function init(b) {this.cfg = this.cfg.extend(b);this.reset();}, reset: function reset() {g.reset.call(this);this._doReset();}, update: function update(b) {this._append(b);this._process();return this;}, finalize: function finalize(b) {b && this._append(b);return this._doFinalize();}, blockSize: 16, _createHelper: function _createHelper(b) {return function (a, g) {return new b.init(g).finalize(a);};}, _createHmacHelper: function _createHmacHelper(b) {return function (a, g) {return new k.HMAC.init(b, g).finalize(a);};} });var k = m.algo = {};return m;}(Math);(function (s) {function p(a, k, b, h, l, j, m) {a = a + (k & b | ~k & h) + l + m;return (a << j | a >>> 32 - j) + k;}function m(a, k, b, h, l, j, m) {a = a + (k & h | b & ~h) + l + m;return (a << j | a >>> 32 - j) + k;}function l(a, k, b, h, l, j, m) {a = a + (k ^ b ^ h) + l + m;return (a << j | a >>> 32 - j) + k;}function n(a, k, b, h, l, j, m) {a = a + (b ^ (k | ~h)) + l + m;return (a << j | a >>> 32 - j) + k;}for (var r = CryptoJS, q = r.lib, v = q.WordArray, t = q.Hasher, q = r.algo, a = [], u = 0; 64 > u; u++) {a[u] = 4294967296 * s.abs(s.sin(u + 1)) | 0;}q = q.MD5 = t.extend({ _doReset: function _doReset() {this._hash = new v.init([1732584193, 4023233417, 2562383102, 271733878]);}, _doProcessBlock: function _doProcessBlock(g, k) {for (var b = 0; 16 > b; b++) {var h = k + b,w = g[h];g[h] = (w << 8 | w >>> 24) & 16711935 | (w << 24 | w >>> 8) & 4278255360;}var b = this._hash.words,h = g[k + 0],w = g[k + 1],j = g[k + 2],q = g[k + 3],r = g[k + 4],s = g[k + 5],t = g[k + 6],u = g[k + 7],v = g[k + 8],x = g[k + 9],y = g[k + 10],z = g[k + 11],A = g[k + 12],B = g[k + 13],C = g[k + 14],D = g[k + 15],c = b[0],d = b[1],e = b[2],f = b[3],c = p(c, d, e, f, h, 7, a[0]),f = p(f, c, d, e, w, 12, a[1]),e = p(e, f, c, d, j, 17, a[2]),d = p(d, e, f, c, q, 22, a[3]),c = p(c, d, e, f, r, 7, a[4]),f = p(f, c, d, e, s, 12, a[5]),e = p(e, f, c, d, t, 17, a[6]),d = p(d, e, f, c, u, 22, a[7]),c = p(c, d, e, f, v, 7, a[8]),f = p(f, c, d, e, x, 12, a[9]),e = p(e, f, c, d, y, 17, a[10]),d = p(d, e, f, c, z, 22, a[11]),c = p(c, d, e, f, A, 7, a[12]),f = p(f, c, d, e, B, 12, a[13]),e = p(e, f, c, d, C, 17, a[14]),d = p(d, e, f, c, D, 22, a[15]),c = m(c, d, e, f, w, 5, a[16]),f = m(f, c, d, e, t, 9, a[17]),e = m(e, f, c, d, z, 14, a[18]),d = m(d, e, f, c, h, 20, a[19]),c = m(c, d, e, f, s, 5, a[20]),f = m(f, c, d, e, y, 9, a[21]),e = m(e, f, c, d, D, 14, a[22]),d = m(d, e, f, c, r, 20, a[23]),c = m(c, d, e, f, x, 5, a[24]),f = m(f, c, d, e, C, 9, a[25]),e = m(e, f, c, d, q, 14, a[26]),d = m(d, e, f, c, v, 20, a[27]),c = m(c, d, e, f, B, 5, a[28]),f = m(f, c, d, e, j, 9, a[29]),e = m(e, f, c, d, u, 14, a[30]),d = m(d, e, f, c, A, 20, a[31]),c = l(c, d, e, f, s, 4, a[32]),f = l(f, c, d, e, v, 11, a[33]),e = l(e, f, c, d, z, 16, a[34]),d = l(d, e, f, c, C, 23, a[35]),c = l(c, d, e, f, w, 4, a[36]),f = l(f, c, d, e, r, 11, a[37]),e = l(e, f, c, d, u, 16, a[38]),d = l(d, e, f, c, y, 23, a[39]),c = l(c, d, e, f, B, 4, a[40]),f = l(f, c, d, e, h, 11, a[41]),e = l(e, f, c, d, q, 16, a[42]),d = l(d, e, f, c, t, 23, a[43]),c = l(c, d, e, f, x, 4, a[44]),f = l(f, c, d, e, A, 11, a[45]),e = l(e, f, c, d, D, 16, a[46]),d = l(d, e, f, c, j, 23, a[47]),c = n(c, d, e, f, h, 6, a[48]),f = n(f, c, d, e, u, 10, a[49]),e = n(e, f, c, d, C, 15, a[50]),d = n(d, e, f, c, s, 21, a[51]),c = n(c, d, e, f, A, 6, a[52]),f = n(f, c, d, e, q, 10, a[53]),e = n(e, f, c, d, y, 15, a[54]),d = n(d, e, f, c, w, 21, a[55]),c = n(c, d, e, f, v, 6, a[56]),f = n(f, c, d, e, D, 10, a[57]),e = n(e, f, c, d, t, 15, a[58]),d = n(d, e, f, c, B, 21, a[59]),c = n(c, d, e, f, r, 6, a[60]),f = n(f, c, d, e, z, 10, a[61]),e = n(e, f, c, d, j, 15, a[62]),d = n(d, e, f, c, x, 21, a[63]);b[0] = b[0] + c | 0;b[1] = b[1] + d | 0;b[2] = b[2] + e | 0;b[3] = b[3] + f | 0;}, _doFinalize: function _doFinalize() {var a = this._data,k = a.words,b = 8 * this._nDataBytes,h = 8 * a.sigBytes;k[h >>> 5] |= 128 << 24 - h % 32;var l = s.floor(b / 4294967296);k[(h + 64 >>> 9 << 4) + 15] = (l << 8 | l >>> 24) & 16711935 | (l << 24 | l >>> 8) & 4278255360;k[(h + 64 >>> 9 << 4) + 14] = (b << 8 | b >>> 24) & 16711935 | (b << 24 | b >>> 8) & 4278255360;a.sigBytes = 4 * (k.length + 1);this._process();a = this._hash;k = a.words;for (b = 0; 4 > b; b++) {h = k[b], k[b] = (h << 8 | h >>> 24) & 16711935 | (h << 24 | h >>> 8) & 4278255360;}return a;}, clone: function clone() {var a = t.clone.call(this);a._hash = this._hash.clone();return a;} });r.MD5 = t._createHelper(q);r.HmacMD5 = t._createHmacHelper(q);})(Math);\n  /* jshint ignore:end */\n  return CryptoJS.MD5(message).toString();\n};\n\n/**\r\n    * Replace all coincidences in a text, based on key value object\r\n    *  @argument mapDataToReplace = {\"keyTofind\":\"valueToReplace\",...}\r\n    */\nbizagi.util.multiReplace = function (text, mapDataToReplace) {\n  mapDataToReplace = mapDataToReplace || {};\n\n  for (var key in mapDataToReplace) {\n    var reg = new RegExp(key, \"g\");\n    text = text.replace(reg, mapDataToReplace[key]);\n  }\n  return text;\n};\n/*\r\n    *   Creates a replace all method that is left from the String Class\r\n    */\nbizagi.util.replaceAll = function (text, pcFrom, pcTo) {\n  // Call the method located in bizagi.loader\n  return bizagi.replaceAll(text, pcFrom, pcTo);\n};\n/*\r\n    *replaces global expressions regulars\r\n    */\nbizagi.util.replaceAllGlobalRegExp = function (text, pcFrom, pcTo) {\n  var temp = text;\n\n  var re = new RegExp(pcFrom, \"g\");\n  temp = temp.replace(re, pcTo);\n\n  return temp.toString();\n};\n// Also append it to the string class\nString.prototype.replaceAll = function (pcFrom, pcTo) {\n  return bizagi.util.replaceAll(this, pcFrom, pcTo);\n};\n// Capitalize a string\nString.prototype.capitalize = function () {\n  return this.charAt(0).toUpperCase() + this.slice(1);\n};\n// Add this (Create an starts with function) to the string prototype\nString.prototype.startsWith = function (str) {\n  return this.slice(0, str.length) == str;\n};\n\n/**\r\n    * get Initials of a string/name and if the name is empty return the anonymized icon\r\n    */\nString.prototype.getInitials = function () {\n  var initials = \"\";\n  if (this.length === 0) {\n    initials = '<svg  class=\"bz-icon bz-icon-24 bz-icon-svg\"><use xmlns:xlink=\"http://www.w3.org/1999/xlink\" xlink:href=\"#icon-user-deactivated\"></use></svg>';\n  } else {\n    try {\n      var removeRepeatSpaces = this.replace(/  +/g, ' ');\n      var words = removeRepeatSpaces.split(' ');\n      for (var i = 0; i < words.length; i += 1) {\n        initials += words[i][0] || '';\n        if (initials.length == 2) {\n          break;\n        }\n      }\n    } catch (e) {}\n\n    initials = initials.toUpperCase();\n  }\n  return initials;\n};\n\nMath.sign = Math.sign || function (x) {\n  x = +x; // convert to a number\n  if (x === 0 || isNaN(x)) {\n    return x;\n  }\n  return x > 0 ? 1 : -1;\n};\n\n// Add a clone to the object prototype\nbizagi.clone = function (obj) {\n  if (obj == undefined) return undefined;\n  if (obj == null) return null;\n  return JSON.parse(JSON.encode(obj));\n};\n// Measures the pixel size of a string\nbizagi.measureString = function (string, fontSize) {\n  var test = $(\"<span/>\").appendTo(\"body\");\n  test.text(string);\n  if (fontSize)\n  test.css(\"font-size\", fontSize);\n  var width = test.width();\n  test.detach();\n  return width;\n};\n/*\r\n    *   Creates a trim method\r\n    */\nbizagi.util.trim = function (text) {\n  if (typeof text === \"undefined\" || text == null)\n  return text;\n  // Call the method located in bizagi.loader\n  return text.replace(/^\\s\\s*/, '').replace(/\\s\\s*$/, '');\n};\n// Create an ends with function\nString.prototype.endsWith = function (suffix) {\n  return this.indexOf(suffix, this.length - suffix.length) !== -1;\n};\n\n// Create an ends with function\nString.prototype.endsWith = function (suffix) {\n  return this.indexOf(suffix, this.length - suffix.length) !== -1;\n};\n\n/*\r\n    * Method to detect IE7 visitors\r\n    */\nbizagi.util.isIE7 = function () {\n  return bizagi.util.isIE() && document.documentMode == 7;\n};\n/*\r\n    * Method to detect IE8 visitors\r\n    */\nbizagi.util.isIE8 = function () {\n  return bizagi.util.isIE() && document.documentMode == 8;\n};\n/*\r\n    * Method to detect IE9 visitors\r\n    */\nbizagi.util.isIE9 = function () {\n  return bizagi.util.isIE() && document.documentMode == 9;\n};\n/*\r\n    * Method to detect IE10 visitors\r\n    */\nbizagi.util.isIE10 = function () {\n  return bizagi.util.isIE() && document.documentMode == 10;\n};\n/*\r\n    * Method to detect IE11 visitors\r\n    */\nbizagi.util.isIE11 = function () {\n  return !!navigator.userAgent.match(/Trident\\/7.0/) && !navigator.userAgent.match(/MSIE/i);\n};\n\n/*\r\n    * Method to detect IE11 or lower\r\n    */\nbizagi.util.isIE11OrLower = function () {\n  return bizagi.util.isIE11() || bizagi.util.isIE10() || bizagi.util.isIE9() || bizagi.util.isIE8() || bizagi.util.isIE7();\n};\n\n/*\r\n    * Method to detect IE10 or lower\r\n    */\nbizagi.util.isIE10OrLower = function () {\n  return bizagi.util.isIE10() || bizagi.util.isIE9() || bizagi.util.isIE8() || bizagi.util.isIE7();\n};\n\n/*\r\n    * Method to detect IE12 or Edge(Windows 10) visitors\r\n    */\nbizagi.util.isEdge = function () {\n  if (/Edge\\/*./i.test(navigator.userAgent)) {\n    return true;\n  }\n  return false;\n};\n/*\r\n    * Method to detect IE visitors\r\n    */\nbizagi.util.isIE = function () {\n  return navigator.appName.indexOf(\"Internet Explorer\") > 0 || !!navigator.userAgent.match(/Trident/);\n};\n/*\r\n    *   Object Values wrapper\r\n    */\nbizagi.util.objectValues = function (array) {\n  if (bizagi.util.isIE())\n  return Object.keys(array).map(function (itm) {return array[itm];});else\n\n  return Object.values(array);\n};\n/*\r\n    * Get the specific version of IE \r\n    */\nbizagi.util.getIEVersion = function () {\n  var sAgent = window.navigator.userAgent;\n  var indexMSIE = sAgent.indexOf(\"MSIE\");\n  var version = 0;\n  if (indexMSIE > 0) {\n    version = parseInt(sAgent.substring(indexMSIE + 5, sAgent.indexOf(\".\", indexMSIE)));\n  } else\n  if (!!navigator.userAgent.match(/Trident/) || window.navigator.userAgent.indexOf(\"Edge\") > -1) {// Condition Check IF IE 11 and or MS Edge\n    version = 11;\n  }\n  return version;\n};\n/*\r\n    * Method to detect is chrome browser\r\n    */\nbizagi.util.isChrome = function () {\n  return /Chrome/.test(navigator.userAgent) && /Google Inc/.test(navigator.vendor);\n};\n/*\r\n    * Method to detect is Firefox browser\r\n    */\nbizagi.util.isFirefox = function (minVersion) {\n  function getVersion() {\n    var ua = navigator.userAgent,tem,M = ua.match(/(opera|chrome|safari|firefox|msie|trident(?=\\/))\\/?\\s*(\\d+)/i) || [];\n    if (/trident/i.test(M[1])) {\n      tem = /\\brv[ :]+(\\d+)/g.exec(ua) || [];\n      return { name: 'IE', version: tem[1] || '' };\n    }\n    if (M[1] === 'Chrome') {\n      tem = ua.match(/\\bOPR|Edge\\/(\\d+)/);\n      if (tem != null) {return { name: 'Opera', version: tem[1] };}\n    }\n    M = M[2] ? [M[1], M[2]] : [navigator.appName, navigator.appVersion, '-?'];\n    if ((tem = ua.match(/version\\/(\\d+)/i)) != null) {M.splice(1, 1, tem[1]);}\n    return {\n      name: M[0],\n      version: M[1] };\n\n  }\n  return /Firefox/.test(navigator.userAgent) && (minVersion === undefined || minVersion <= getVersion().version);\n};\n/*\r\n    * return the browser name this function can be modified if needs more browsers\r\n    */\nbizagi.util.getBrowser = function () {\n  var bw = \"undetected\";\n  if (bizagi.util.isChrome()) {\n    bw = \"chrome\";\n  } else if (bizagi.util.isFirefox()) {\n    bw = \"firefox\";\n  } else if (bizagi.util.isEdge()) {\n    bw = \"edge\";\n  } else if (bizagi.util.isIE11()) {\n    bw = \"ie11\";\n\n  } else if (bizagi.util.isIE10()) {\n    bw = \"ie10\";\n  }\n  return bw;\n};\n\n/**\r\n    * Empty Navigator Info\r\n    */\nbizagi.util.emptyNavigatorInfo = function () {\n  if (bizagi.navigator && bizagi.navigator.info) {\n    bizagi.navigator.info = {};\n  }\n};\n\n/**\r\n    * Auto call setting the browser class for css specific selectors, etc..\r\n    */\n$(document).ready(function () {\n  $(\"html\").\n  addClass(\"browser-\" + bizagi.util.getBrowser()).\n  addClass(\"device-\" + bizagi.detectDevice());\n  if (bizagi.language) {\n    var language = bizagi.language.split(\"-\");\n    if (language && language.length > 0) {\n      $(\"html\").addClass(\"language-\" + language[0]);\n    }\n  }\n});\n\n\n\n\n/**\r\n     * Method to detect iOS version X and apply styles to that device \r\n     */\nbizagi.util.setIphoneXOverrides = function () {\n  if (bizagi.util.isNativePluginSupported() && typeof bizagiapp.isIphoneX !== 'undefined') {\n    bizagiapp.isIphoneX(function (value) {\n      var flagIphoneX = value;\n      var styleIphoneX = \".bz-menu-home .bz-menu-carousel .bz-menu-carousel-seat{padding:0 16px 16px}.bz-home-header .km-navbar{padding:35px 16px 5px}#menuHome .bz-home-header .km-navbar{padding:30px 3px 0}#menuHome .km-navbar .km-rightitem{font-size:19px;right:.4em;top:32px}#menuHome .km-navbar .km-leftitem{font-size:24px;left:0;top:25px}#taskFeed .km-navbar .km-rightitem{font-size:19px;top:25px;right:0}#taskFeed .km-navbar .km-leftitem{font-size:24px;top:20px;left:0}#homePortal #menuHome .km-view-title .km-buttongroup{margin-left:0;top:2px}.bz-render-header,.search-container{padding-top:25px}#activity-search,.search-container .bz-wp-mu-button-search{padding-top:40px}#content-newCase-drawer{padding-top:25px}#menuHome{background:#EBEDF1!important}.km-flat .km-content{background-color:#fff} .k-loading-mask{top:0!important}\";\n\n      if (flagIphoneX === 'true') {\n        $('head').append('<style type=\"text/css\" id=\"iphoneXStyle\"></style>');\n        $('#iphoneXStyle').text(styleIphoneX);\n\n      } else if (bizagi.util.isiOSDevice()) {\n        $('head').append('<style type=\"text/css\" id=\"iphoneStyle\"></style>');\n        var paddingStyle = \"#homePortal .bz-home-header > div{padding-top:.8em}\";\n        $('#iphoneStyle').text(paddingStyle);\n      }\n    });\n  }\n};\n\nbizagi.util.isString = function (value) {\n  return Object.prototype.toString.apply(value) === \"[object String]\";\n};\n\nbizagi.util.isObject = function (value) {\n  return Object.prototype.toString.apply(value) === \"[object Object]\";\n};\n\nbizagi.util.isArray = function (value) {\n  return Array.isArray(value);\n};\nbizagi.util.isNull = function (value) {\n  return Object.prototype.toString.apply(value) === \"[object Null]\";\n};\nbizagi.util.isBoolean = function (value) {\n  return Object.prototype.toString.apply(value) === \"[object Boolean]\";\n};\n\n/*\r\n    *   Method to detect IE version\r\n    */\nbizagi.util.getInternetExplorerVersion = function () {\n  if (!bizagi.util.isIE())\n  return -1;\n  return Number(document.documentMode);\n};\n/*  \r\n    *   Detect a device based on the width\r\n    */\nbizagi.util.detectDevice = function () {\n  // Call the method located in bizagi.loader\n  return bizagi.detectDevice();\n};\n\n// Check if a string is number\nbizagi.util.isNumeric = function (n) {\n  return !isNaN(parseFloat(n)) && isFinite(n);\n};\n\n// Check if a string is GUID\nbizagi.util.isGUID = function (n) {\n  return /^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(n);\n};\n// Throw not implemented exception\nbizagi.util.mustImplement = function (notImplementedMethod) {\n  try {\n    console.log(\"Not implemented exception: \" + notImplementedMethod);\n  } catch (exe) {\n  } //IE console variable not exist\n  //throw \"You must implement \" + notImplementedMethod;\n};\n// Encodes the xpath \nbizagi.util.encodeXpath = function (xpath) {\n  if (bizagi.util.isEmpty(xpath) || typeof xpath.replaceAll === \"undefined\")\n  return \"\";\n  return xpath.replaceAll(\".\", \"_\").replaceAll(\"=\", \"_\").replaceAll(\"[\", \"_\").replaceAll(\"]\", \"_\");\n};\n// Parses a value to return the correct boolean value\nbizagi.util.parseBoolean = function (value) {\n  if (value === undefined) {\n    return null;\n  }\n\n  if (value === null) {\n    return null;\n  }\n\n  if (value === '') {\n    return null;\n  }\n\n  // Parse true values\n  if (value === true || value === 1 || value.toString() === \"true\" || value === \"1\") {\n    return true;\n  }\n  if (value.toString().toLowerCase() === \"true\") {\n    return true;\n  }\n\n  // Parse false values\n  if (value !== null && value === false || value === 0 || value.toString() === \"false\" || value === \"0\") {\n    return false;\n  }\n  if (value.toString().toLowerCase() === \"false\") {\n    return false;\n  }\n\n  return null;\n};\n/*\r\n    *   Checks if a given string is empty\r\n    */\nbizagi.util.isEmpty = function (value) {\n  if (value === 0)\n  return false;\n\n  if (value === undefined || value === null || value === \"\") {\n    return true;\n  }\n\n  if (typeof value === \"Array\") {\n    return value.length == 0;\n  }\n\n  if (Object.prototype.toString.apply(value) === \"[object Array]\") {\n    return value.length === 0;\n  }\n\n  if (Object.prototype.toString.apply(value) === \"[object Object]\") {\n    if ($.isEmptyObject(value)) {\n      return true;\n    } else {\n      return bizagi.util.isEmptyCombo(value);\n    }\n  }\n\n  // Side effect - I can't delete the last item in the multiselect and searchlist\n  /* if (value == \"{\\\"value\\\":[]}\"){\r\n       return true;\r\n   }  */\n\n  return false;\n};\n\nbizagi.util.isEmptyCombo = function (object) {\n  if (Object.prototype.toString.apply(object) === \"[object Object]\") {\n    var property,id = false,\n    value = false,\n    other = false;\n    for (property in object) {\n      if (object.hasOwnProperty(property)) {\n        if (property === \"id\") {\n          id = true;\n        } else {\n          if (property === \"value\") {\n            value = true;\n          } else {\n            other = true;\n          }\n        }\n        if (other) {\n          return false;\n        }\n      }\n    }\n    if (id) {\n      if (object[\"id\"] === \"\") {\n        return true;\n      } else {\n        return false;\n      }\n    }\n  }\n  return undefined;\n};\n\n/**\r\n    * Decode data from encodeURI charset\r\n    */\nbizagi.util.decodeURI = function (value) {\n  value = value || \"\";\n  var finishDecoded = false;\n  var decodedValue = value;\n  var infinityControl;\n\n  // Try to decode data value\n  while (!finishDecoded) {\n    try {\n      infinityControl = decodeURI(decodedValue);\n      if (bizagi.util.hasNonVisibleChars(infinityControl)) {\n        decodedValue = value;\n        break;\n      }\n      if (infinityControl == decodedValue) {\n        finishDecoded = true;\n      } else {\n        decodedValue = infinityControl;\n      }\n    } catch (e) {\n      finishDecoded = true;\n    }\n  }\n\n  return decodedValue;\n};\n\nbizagi.util.hasNonVisibleChars = function (value) {\n  value = value || \"\";\n  var length = value.length;\n  var i = 0,\n  result = false,\n  ch;\n  for (; i < length;) {\n    ch = value.charCodeAt(i++);\n    if (ch < 32 || ch > 126) {\n      result = true;\n      break;\n    }\n  }\n  return result;\n};\n\n/* \r\n    *   Converts a percent into a number\r\n    */\nbizagi.util.percent2Number = function (value) {\n  return Number(String(value).replace(\"%\", \"\"));\n};\n/*\r\n    *   Check if a object is empty\r\n    */\nbizagi.util.isObjectEmpty = function (obj) {\n  if (obj.length > 0)\n  return false;\n  return true;\n};\n/*\r\n    *   Check if a map object is empty\r\n    */\nbizagi.util.isMapEmpty = function (map) {\n  // First we validate a special case\n  if (map.length == 1 && map[0].length == 0)\n  return true;\n  // Then we do normal validation\n  for (var key in map) {\n    if (map.hasOwnProperty(key)) {\n      return false;\n    }\n  }\n  return true;\n};\n/*\r\n    *   Replaces a matched selector in the container for the specified \"replace\" element\r\n    */\nbizagi.util.replaceSelector = function (container, selector, replace) {\n  // Replace children tag\n  var elementToReplace = $(selector, container);\n  if (elementToReplace.length > 0) {\n    elementToReplace.append(replace);\n    elementToReplace.children().unwrap();\n  }\n};\n/*\r\n    *   Determines if a control as a scrollbar \r\n    */\nbizagi.util.hasScroll = function (el, direction) {\n  if (el.length)\n  el = el[0];\n  direction = direction === 'vertical' ? 'scrollTop' : 'scrollLeft';\n  var result = !!el[direction];\n  if (!result) {\n    el[direction] = 1;\n    result = !!el[direction];\n    el[direction] = 0;\n  }\n  return result;\n};\n\n//TODO: DEPL - Rename this to areIdenticalObjects\nbizagi.util.identicalObjects = function (obj1, obj2) {\n  var self = this;\n\n  if (_typeof(obj1) !== _typeof(obj2)) {\n    return false;\n  }\n\n  if (typeof obj1 === \"function\") {\n    return obj1.toString() === obj2.toString();\n  }\n\n  if (obj1 instanceof Object && obj2 instanceof Object) {\n\n    // Count properties\n    if (bizagi.util.countProps(obj1) !== bizagi.util.countProps(obj2)) {\n      return false;\n    }\n\n    var r = true;\n    for (k in obj1) {\n      r = bizagi.util.identicalObjects(obj1[k], obj2[k]);\n      if (!r) {\n        return false;\n      }\n    }\n    return true;\n  } else {\n    return obj1 === obj2;\n  }\n};\n\nbizagi.util.countProps = function (obj) {\n  var count = 0;\n  for (k in obj) {\n    if (obj.hasOwnProperty(k)) {\n      count++;\n    }\n  }\n  return count;\n};\n/*\r\n    *   Determines if a element has visibility\r\n    */\nbizagi.util.isScrolledIntoView = function (elem, layout) {\n  if (elem == undefined) {\n    return false;\n  }\n\n  layout = layout || $(window);\n  var scrollTop = layout.scrollTop();\n  var elemTop = $(elem).offset().top;\n  var elemBottom = elemTop + $(elem).height();\n  var docViewBottom = scrollTop + $(layout).height();\n  return elemBottom <= docViewBottom && elemTop >= scrollTop;\n};\nbizagi.util.centerElementIntoScroll = function (elem, layout) {\n  if (elem == undefined) {\n    return false;\n  }\n\n  layout = layout || $(window);\n  var actualScroll = layout.scrollTop();\n  var elementTop = $(elem).offset().top;\n  var elementHeight = $(elem).height();\n  var offset = 0;\n  if (elementTop > 0) {\n    offset = elementTop + elementHeight;\n  } else {\n    offset = elementTop - elementHeight;\n  }\n  var newTop = actualScroll + offset;\n  layout.scrollTop(newTop);\n};\n/*\r\n    *   Encode a html string\r\n    */\nbizagi.util.encodeHtml = function (text) {\n  if (text === undefined || text === null) {\n    return \"\";\n  }\n  if (typeof text == \"string\") {\n    return text.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;');\n  }\n  return text;\n};\n\n/*\r\n    *   Encode a string as HTML\r\n    */\nbizagi.util.decodeHtmlEntities = function (text) {\n  if (text === undefined || text === null) {\n    return \"\";\n  }\n  if (typeof text == \"string\") {\n    return text.replace(/&apos;/g, '\"').replace(/&lt;/g, '<').replace(/&gt;/g, '>').replace(/&quot;/g, '\\'');\n  }\n  return text;\n};\n/*\r\n    *   Read the location hash\r\n    */\nbizagi.util.getHashParams = function () {\n  var params = window.location.hash.substring(1).split(\"#\");\n  return params;\n};\n/*\r\n    *   Loads a file on-demand\r\n    */\nbizagi.util.loadFile = function (params) {\n  var defer = new $.Deferred();\n  var url = params && params.src ? params.src : params;\n  var type = params && params.type ? params.type : null;\n\n  bizagi.loader.loadFile({ src: url, type: type }).\n  then(function () {\n    defer.resolve();\n  });\n\n  return defer.promise();\n};\n\n/*\r\n    *   Initializes a webpart on-demand\r\n    */\nbizagi.util.initWebpart = function (webpart, device) {\n  var defer = new $.Deferred();\n\n  device = device || bizagi.detectDevice();\n\n  if (webpart.initialized) {\n    // If already initialized resolve the deferred\n    defer.resolve();\n  } else {\n\n    if (webpart.initializing) {\n      $.when(webpart.loadingDeferred.promise()).\n      done(function () {\n        defer.resolve();\n      });\n    } else {\n\n      webpart.loadingDeferred = new $.Deferred();\n      webpart.initializing = true;\n      bizagi.loader.initWebpart(webpart, device, function () {\n\n        // Resolve deferreds\n        webpart.loadingDeferred.resolve();\n        webpart.initializing = false;\n        defer.resolve();\n      });\n    }\n  }\n\n  return defer.promise();\n};\n/*\r\n    *   Read the query string parameteres\r\n    */\nbizagi.util.getQueryString = function (url) {\n  var params = {};\n  url = url || window.location.href;\n  var query = url.indexOf(\"?\") > 0 ? url.substring(url.indexOf(\"?\") + 1) : \"\";\n  var pairs = query.split(\"&\");\n  for (var i = pairs.length - 1; i >= 0; i--) {\n    var pos = pairs[i].indexOf('=');\n    if (pos == -1)\n    continue;\n    var argname = pairs[i].substring(0, pos);\n    var value = pairs[i].substring(pos + 1);\n    params[argname] = unescape(value);\n  }\n  return params;\n};\n/*\r\n    *   Extend querystring\r\n    */\nbizagi.util.extendQueryString = function (url, additionalParams) {\n  var plainUrl = url.indexOf(\"?\") > 0 ? url.substring(0, url.indexOf(\"?\")) : url;\n  var existingParams = bizagi.util.getQueryString(url);\n  var newParams = $.extend({}, existingParams, additionalParams);\n  return plainUrl + \"?\" + $.param(newParams);\n};\nbizagi.util.getStackTrace = function () {\n  var callstack = [];\n  var isCallstackPopulated = false;\n  try {\n    i.dont.exist += 0; //doesn't exist- that's the point\n  } catch (e) {\n    if (e.stack) {//Firefox\n      var lines = e.stack.split('\\n');\n      for (var i = 0, len = lines.length; i < len; i++) {\n        if (lines[i].match(/^\\s*[A-Za-z0-9\\-_\\$]+\\(/)) {\n          callstack.push(lines[i]);\n        }\n      }\n      //Remove call to printStackTrace()\n      callstack.shift();\n      isCallstackPopulated = true;\n    } else if (window.opera && e.message) {//Opera\n      var lines = e.message.split('\\n');\n      for (var i = 0, len = lines.length; i < len; i++) {\n        if (lines[i].match(/^\\s*[A-Za-z0-9\\-_\\$]+\\(/)) {\n          var entry = lines[i];\n          //Append next line also since it has the file info\n          if (lines[i + 1]) {\n            entry += ' at ' + lines[i + 1];\n            i++;\n          }\n          callstack.push(entry);\n        }\n      }\n      //Remove call to printStackTrace()\n      callstack.shift();\n      isCallstackPopulated = true;\n    }\n  }\n  if (!isCallstackPopulated) {//IE and Safari\n    var currentFunction = arguments.callee.caller;\n    while (currentFunction) {\n      var fn = currentFunction.toString();\n      var fname = fn.substring(fn.indexOf(\"function\") + 8, fn.indexOf('')) || 'anonymous';\n      callstack.push(fname);\n      currentFunction = currentFunction.caller;\n    }\n  }\n  return callstack;\n};\n/*\r\n    *\thighlight elements\r\n    */\nbizagi.util.highLightElement = function (el) {\n  el.addClass('ui-highlight-control');\n  $.when(\n  setTimeout(function () {\n    el.addClass('ui-highlight-off-control');\n  }, 450)).\n  done(\n  setTimeout(function () {\n    el.removeClass('ui-highlight-control ui-highlight-off-control');\n  }, 800));\n};\n/*\r\n    *\tscroll to bottom\r\n    */\nbizagi.util.autoScrollBottom = function (el) {\n  try {\n    var elScrollHeight;\n    elScrollHeight = el[0].scrollHeight;\n    el.scrollTop(elScrollHeight);\n  } catch (e) {}\n};\n\n/*create auto scroll with limit top and limit bottom */\nbizagi.util.autoScrollInterval = { init: false };\nbizagi.util.autoScroll = function (itemScroll, limitTop, limitBottom, idInterval) {\n  var outSide = false;\n  /* prevent a previous interval */\n  clearInterval(bizagi.util.autoScrollInterval[idInterval]);\n  bizagi.util.autoScrollInterval[idInterval] = 0;\n  bizagi.util.autoScrollInterval['init'] = true;\n  $('body').addClass('autoscroll');\n  $('body.autoscroll').mousemove(function (event) {\n    if (event.pageY < limitTop) {\n      if (!outSide) {\n        outSide = true;\n        bizagi.util.autoScrollTopInterval(itemScroll, 'autoscroll', idInterval);\n      }\n    } else if (event.pageY > limitBottom) {\n      if (!outSide) {\n        outSide = true;\n        bizagi.util.autoScrollBottomInterval(itemScroll, 'autoscroll', idInterval);\n      }\n    } else {\n      clearInterval(bizagi.util.autoScrollInterval[idInterval]);\n      outSide = false;\n    }\n  });\n};\n/*create auto scroll movement top */\nbizagi.util.autoScrollTopInterval = function (itemScroll, classCSS, idInterval) {\n  clearInterval(bizagi.util.autoScrollInterval[idInterval]);\n  if (classCSS) {\n    $('body').addClass(classCSS);\n  }\n  if (itemScroll.scrollTop() == 0) {\n    clearInterval(bizagi.util.autoScrollInterval[idInterval]);\n  } else {\n    clearInterval(bizagi.util.autoScrollInterval[idInterval]);\n    bizagi.util.autoScrollInterval[idInterval] = setInterval(function () {\n      if (itemScroll.scrollTop() > 0) {\n        itemScroll.scrollTop(itemScroll.scrollTop() - 40);\n      } else {\n        clearInterval(bizagi.util.autoScrollInterval[idInterval]);\n      }\n    }, 100);\n  }\n};\n\n/*create auto scroll movement bottom */\nbizagi.util.autoScrollBottomInterval = function (itemScroll, classCSS, idInterval) {\n  clearInterval(bizagi.util.autoScrollInterval[idInterval]);\n  if (classCSS) {\n    $('body').addClass(classCSS);\n  }\n  var valueMaxScrollBottom = $(itemScroll)[0].scrollHeight - $(itemScroll).innerHeight();\n  if (itemScroll.scrollTop() >= valueMaxScrollBottom) {\n    clearInterval(bizagi.util.autoScrollInterval[idInterval]);\n  } else {\n    clearInterval(bizagi.util.autoScrollInterval[idInterval]);\n    bizagi.util.autoScrollInterval[idInterval] = setInterval(function () {\n      bizagi.util.autoScrollBottom($('html'));\n      if (itemScroll.scrollTop() < valueMaxScrollBottom) {\n        itemScroll.scrollTop(itemScroll.scrollTop() + 40);\n      } else {\n        clearInterval(bizagi.util.autoScrollInterval[idInterval]);\n      }\n    }, 100);\n  }\n};\n/*remove auto scroll*/\nbizagi.util.removeAutoScroll = function (classCSS, idInterval) {\n  $('body.' + classCSS).unbind('mousemove').removeClass(classCSS);\n  clearInterval(bizagi.util.autoScrollInterval[idInterval]);\n  bizagi.util.autoScrollInterval.init = false;\n};\n\nbizagi.util.getMaxZIndex = function (selector) {\n  selector = selector || $(\"div,span\");\n  return Math.max.apply(null, $(selector).map(function () {\n    var zIndex;\n    return isNaN(zIndex = parseInt($(this).css(\"z-index\"), 10)) ? 0 : zIndex;\n  }));\n};\n\n/*\r\n    * Creates a native popup to open an url\r\n    */\nbizagi.showPopup = function (url, params, callbackFn) {\n  var width = params.width || 1024;\n  var height = params.height || 768;\n  var top = $(window).height() / 2 - height / 2;\n  var left = $(window).width() / 2 - width / 2;\n  // Creates a popup window\n  var newWindow = window.open(url, \"\", \"width=\" + width + \",height=\" + height + \", top=\" + top + \", left=\" + left + \", Menubar=NO, Location=NO, Status=NO, scrollbars=YES\");\n  // Define args to call the function\n  window.BAPopupWindow = newWindow;\n  window.BAPopupCallback = callbackFn;\n  // Define BACLoseWindow in this context, so the external content calls window.opener.BACloseWindow\n  window.BACloseWindow = function (controls, submitForm) {\n    // Close dialog\n    window.BAPopupWindow.close();\n    // Executes the callback to assign values and submit form (if requested)\n    window.BAPopupCallback(controls, submitForm);\n  };\n};\n/**\r\n    * Creates a native popup in quirks mode to open an url\r\n    * \r\n    * @param url string page to open into popup\r\n    * @param params json {width,height,title,afterLoad}\r\n    */\nbizagi.showQuirksModePopup = function (url, params) {\n  var quirksModePage = window.BIZAGI_PATH_TO_BASE + \"quirks.html\";\n  var width = params.width || 1024;\n  var height = params.height || 768;\n  var top = $(window).height() / 2 - height / 2;\n  var left = $(window).width() / 2 - width / 2;\n  // Creates a popup window\n  var newWindow = window.open(quirksModePage, \"bizagiPopup\", \"width=\" + width + \",height=\" + height + \", top=\" + top + \", left=\" + left + \", Menubar=NO, Location=NO, Status=NO, scrollbars=YES\");\n  window.BAQuirksPopupWindow = newWindow;\n  // Attempto to set a window title\n  setTimeout(function () {\n    try {\n      newWindow.document.title = params.title;\n    } catch (e) {}\n  }, 50);\n  // We use a hack to eval content inside the popup\n  $(newWindow).callInsidePopup(function (windowParams) {\n\n    var $ = windowParams.jQuery;\n    var popupWindow = windowParams.popupWindow;\n    popupWindow.quirksOnLoad = function () {\n      var loadedBody = $(\"body\", popupWindow.document);\n      var iframe = $(\"iframe\", loadedBody);\n      // Remove waiting\n      loadedBody.removeClass(\"ui-bizagi-loading-message\");\n      iframe.show();\n      // Hacks the iframe\n      // This event will fire each time the iframe change its location\n      var afterLoad = windowParams.userParams.afterLoad;\n      if (afterLoad && afterLoad != null) {\n        var callbackParams = $.extend(windowParams.userParams, {\n          popupWindow: popupWindow });\n\n        iframe.callInside(afterLoad, callbackParams);\n      }\n    };\n    var loadingFunction = function loadingFunction() {\n      var body = $(\"body\", popupWindow.document);\n      // Create the iframe inside the new window\n      if (body.length > 0) {\n        body.append(\"<iframe scrolling='yes' id='innerFrameContent' src='\" + windowParams.url + \"' style='width: 100%; height: 100%; display:none' frameborder='0' onload='quirksOnLoad();'></iframe>\");\n      } else {\n        // Try again\n        setTimeout(function () {\n          loadingFunction();\n        }, 50);\n      }\n    };\n    // Execute loading function\n    loadingFunction();\n  }, {\n    jQuery: $,\n    userParams: params,\n    popupWindow: newWindow,\n    url: url });\n\n};\n/*\r\n    *   Returns the resolved result from a promise when the promise has been executed already\r\n    */\nbizagi.resolveResult = function (promise) {\n  var result;\n  promise.done(function (data) {\n    result = data;\n  });\n  return result;\n};\n/*\r\n    *   Creates a popup using overlay style\r\n    */\nbizagi.createPopup = function (params) {\n  var popupName = params.name,\n  onClose = params.onClose,\n  popupHeader;\n  var popupTitle = params.title ? params.title : '';\n  var handleClose = typeof params.handleClose == 'boolean' ? params.handleClose : true;\n  var overlay = $('<div class=\"ui-widget-overlay ' + popupName + '-overlay\" />');\n  var popup = $('<div class=\"' + popupName + '-popup  ui-popup-modal\"/>').appendTo(overlay);\n  var closeButton = $('<div class=\"' + popupName + '-btn-close biz-btn-close\"><i class=\"biz-icon ui-close-btn bz-studio bz-black bz-false_16x16_black\"></i></div>').appendTo(popup);\n  if (params.title) {\n    popupHeader = $('<div class=\"' + popupName + '-popup-header ui-popup-header\" ><h3>' + popupTitle + '</h3></div>').appendTo(popup);\n  }\n\n  var popupContent = $('<div class=\"' + popupName + '-popup-content\" />').appendTo(popup);\n  // Add to body\n  popup.hide();\n  if (params.additionalClass)\n  popup.addClass(params.additionalClass);\n  var container = params.container || \"body\";\n  overlay.appendTo($(container, document));\n\n  if (params.center) {\n    // Resize popup to the center\n    popup.css(\"top\", (overlay.height() - popup.height()) / 2);\n    popup.css(\"left\", (overlay.width() - popup.width()) / 2);\n  }\n  popup.show();\n  // Close handler\n  var closeHandler = function closeHandler(params) {\n    overlay.detach();\n    if (onClose)\n    onClose(params);\n  };\n\n  if (handleClose) {\n    closeButton.click(closeHandler);\n  }\n  // Return a full independent object\n  return {\n    fullPopup: popup,\n    overlay: overlay,\n    content: popupContent,\n    close: function close(params) {\n      closeHandler(params);\n    } };\n\n};\n/*\r\n    * Create an Ok, Cancel popup using bizagi.createPopup()\r\n    */\n\nbizagi.createOkCancelPopup = function (params) {\n  params.name = \"popup-ok-cancel\";\n  var onOk = params.onOk,\n  onCancel = params.onCancel;\n  var popup = bizagi.createPopup(params);\n  var container = $(\"<div></div>\").addClass(\"container-okcancel-popup\");\n  var message = $(\"<div></div>\").addClass(\"message-okcancel-popup ui-light-bevel-border biz-gradient-v\");\n  var buttonsContainer = $(\"<div></div>\").addClass(\"buttonsContainer-okcancel-popup biz-actions-bar\");\n  message.text(params.message);\n  message.appendTo(container);\n  var buttonOk = $(\"<span></span>\").addClass(\"ok-button-okcancel-popup editor-ui-button-actions biz-action-btn biz-btn\");\n  var buttonCancel = $(\"<span></span>\").addClass(\"cancel-button-okcancel-popup editor-ui-button-actions biz-action-btn biz-btn\");\n  buttonOk.text(bizagi.localization.getResource(\"bizagi-editor-okcancel-ok\"));\n  buttonCancel.text(bizagi.localization.getResource(\"bizagi-editor-okcancel-cancel\"));\n  buttonOk.appendTo(buttonsContainer);\n  buttonCancel.appendTo(buttonsContainer);\n  buttonsContainer.appendTo(container);\n  container.appendTo(popup.content);\n  var okHandler = function okHandler() {\n    popup.close();\n    if (typeof onOk == \"function\") {\n      onOk();\n    }\n  };\n  buttonOk.click(okHandler);\n  var cancelHandler = function cancelHandler() {\n    popup.close();\n    if (typeof onCancel == \"function\") {\n      onCancel();\n    }\n  };\n  buttonCancel.click(cancelHandler);\n  return {\n    close: function close() {\n      popup.close();\n    },\n    ok: function ok() {\n      okHandler();\n    },\n    cancel: function cancel() {\n      cancelHandler();\n    } };\n\n};\n/*\r\n    * Create an generic dialog\r\n    */\nbizagi.dialog = function (params) {\n\n  var dialog = $(\"<div></div>\").addClass(\"biz-dialog\");\n  var msg = $(\"<p></p>\");\n  msg.text(params.message || \"\");\n  msg.appendTo(dialog);\n  dialog.appendTo($(\"body\", document));\n  dialog.dialog({\n    title: params.title,\n    modal: true,\n    buttons: params.buttons,\n    close: function close() {\n      dialog.dialog(\"destroy\");\n    } });\n\n};\n/*\r\n    *   Close the quirks mode popup window\r\n    */\nbizagi.closeQuirksModePopup = function () {\n  var quirksPopup = window.BAQuirksPopupWindow;\n  window.BAQuirksPopupWindow = null;\n  try {\n    if (quirksPopup)\n    quirksPopup.close();\n  } catch (e) {}\n};\n/**\r\n    * Get css class definition to string\r\n    */\nbizagi.getStyle = function (style) {\n  var pathName = location.href.replace(\"/default.aspx\", \"\");\n  var getFontFace = style.match(/@/) ? true : false;\n  var matchFontFace = \"@font-face\";\n  var getAllChildrens = style.match(/\\*/) ? true : false;\n  var matchStyles = new RegExp(style.replace(\"*\", \"\"), \"g\");\n  var stringCss = \"\";\n  var css;\n  if (style == \"\") {\n    return \"\";\n  }\n  var awesomeBrowser = function awesomeBrowser(style) {\n    for (var file = 0; file < document.styleSheets.length; file++) {\n      css = document.styleSheets[file].rules || document.styleSheets[file].cssRules;\n      if (css != null) {\n        for (var key = 0; key < css.length; key++) {\n          if (document.styleSheets[file].href != null && (document.styleSheets[file].href.match(/less.css/g) == null || BIZAGI_ENVIRONMENT == \"release\")) {\n\n            var cssTextOriginal = css[key].cssText ? css[key].cssText : '';\n            // Get all matches\n            if (getAllChildrens) {\n              if (css[key].selectorText != undefined && css[key].selectorText.match(matchStyles) != null) {\n\n                if ($.browser.webkit) {\n                  stringCss += css[key].cssText.replace(/\\(path\\)/g, \"\");\n                } else if ($.browser.msie && $.browser.version == \"8.0\") {\n                  stringCss += css[key].style.cssText;\n                } else {\n                  stringCss += css[key].cssText.replace(/\\(path\\)/g, \"../../jquery/workportal/css/desktop\");\n                }\n              }\n            } else if (css[key].selectorText != undefined && css[key].selectorText == style) {\n              stringCss += css[key].cssText;\n            }\n\n            // Get @font-face\n            if (getFontFace) {\n              if (css[key] != undefined && cssTextOriginal != undefined) {\n                if (cssTextOriginal.indexOf(matchFontFace) != -1) {\n\n                  if ($.browser.webkit) {\n                    stringCss += cssTextOriginal.replace(/jquery\\/workportal\\/css\\/desktop\\//g, \"\").replace(/\\(path\\)/g, \"\");\n                  } else {\n                    stringCss += cssTextOriginal.replace(/\\(path\\)/g, \"../../\");\n                  }\n\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n    return stringCss;\n  };\n  var suckBrowser = function suckBrowser(style) {\n    if ($.browser.version == \"8.0\") {\n      // That is crazy, but it has the same document.styleSheets structure to chrome and mozilla\n      return awesomeBrowser(style);\n    }\n    var lastLevel;\n    for (var file = 0; file < document.styleSheets.length; file++) {\n      css = document.styleSheets[file].cssRules || document.styleSheets[file].rules;\n\n      if (css != null) {\n        for (var key = 0; key < css.length; key++) {\n          if (BIZAGI_ENVIRONMENT == \"release\") {\n            // Get all matches \n            if (getAllChildrens) {\n              if (css[key].selectorText != undefined && css[key].selectorText.match(matchStyles) != null) {\n                stringCss += css[key].cssText.replace(/\\(path\\)/g, pathName + \"/jquery/workportal/css/desktop\");\n              } else if (css[key].selectorText != undefined && css[key].selectorText == style) {\n                stringCss += css[key].cssText.replace(/\\(path\\)/g, pathName + \"/jquery/workportal/css/desktop\");\n              }\n            }\n          } else if (css[key].href != null && css[key].href != undefined && css[key].href.match(/less.css/g) == null) {\n            // Get all matches \n            lastLevel = css[key].styleSheet.cssRules || [];\n            for (var n = 0; n < lastLevel.length; n++) {\n              if (getAllChildrens) {\n                if ((lastLevel[n].selectorText != undefined || lastLevel[n].selectorText != null) && lastLevel[n].selectorText.match(matchStyles) != null) {\n                  //stringCss += lastLevel[n].cssText;\n                  stringCss += lastLevel[n].cssText.replace(/\\(path\\)/g, pathName + \"/jquery/workportal/css/desktop\");\n                }\n              } else if (lastLevel[n].selectorText != undefined && lastLevel[n].selectorText == style) {\n                // stringCss += lastLevel[n].cssText;\n                stringCss += lastLevel[n].cssText.replace(/\\(path\\)/g, pathName + \"/jquery/workportal/css/desktop\");\n              }\n            }\n          }\n        }\n      }\n    }\n    return stringCss;\n  };\n  var result = $.browser.msie ? suckBrowser(style) : awesomeBrowser(style);\n  return result;\n};\n/**\r\n    * Set and retrieve Cookie\r\n    */\nbizagi.cookie = function (key, value, options) {\n  // key and at least value given, set cookie...\n  if (arguments.length > 1 && String(value) !== \"[object Object]\") {\n    options = $.extend({}, options);\n    if (value === null || value === undefined) {\n      options.expires = -1;\n    }\n\n    if (typeof options.expires === 'number') {\n      var days = options.expires,\n      t = options.expires = new Date();\n      t.setDate(t.getDate() + days);\n    }\n\n    value = String(value);\n    return document.cookie = [\n    encodeURIComponent(key), '=',\n    options.raw ? value : encodeURIComponent(value),\n    options.expires ? '; expires=' + options.expires.toUTCString() : '', // use expires attribute, max-age is not supported by IE\n    options.path ? '; path=' + options.path : '',\n    options.domain ? '; domain=' + options.domain : '',\n    options.secure ? '; secure' : ''].\n    join('');\n  }\n\n  // key and possibly options given, get cookie...\n  options = value || {};\n  var result,decode = options.raw ? function (s) {\n    return s;\n  } : decodeURIComponent;\n  return (result = new RegExp('(?:^|; )' + encodeURIComponent(key) + '=([^;]*)').exec(document.cookie)) ? decode(result[1]) : null;\n};\n/**\r\n    * Returns a random integer between min and max\r\n    */\nbizagi.util.randomNumber = function (min, max) {\n  min = min || 1;\n  max = max || 10000000;\n  return Math.floor(Math.random() * (max - min + 1)) + min;\n};\n\n/**\r\n    * Set global context values\r\n    * @param params onject\r\n    * @param reset boolean\r\n    */\nbizagi.util.setContext = function (params, reset) {\n  params = params || {};\n  reset = reset || false;\n  if (reset) {\n    bizagi.context = {};\n  }\n  $.each(params, function (key, value) {\n    bizagi.context[key] = value;\n  });\n\n  // Fix camel case in idWorkItem Property\n  bizagi.context[\"idWorkItem\"] = bizagi.context[\"idWorkitem\"];\n};\n\nbizagi.util.reloadCSS = function () {\n  var queryString = '?reload=' + new Date().getTime();\n  $('link[rel=\"stylesheet\"]').each(function () {\n    this.href = this.href.replace(/\\?.*|$/, queryString);\n  });\n};\n\n/**\r\n    * Control recursive calls of setTimeout\r\n    * @param params json {name:name of call,call: function call}\r\n    * @return void\r\n    */\nbizagi.util.setInterval = function (params) {\n  var _name = params.name || 'default';\n  var _call = params.call || function () {};\n  var _params = params.params || {};\n  var _singleton = params.singleton || false;\n  var _timeOut = params.timeout || 5000;\n  var _maxIterations = params.iterations || 1000;\n  var _context = params.context || \"true;\";\n  // If callback its diferent to context, remove from hash\n  var _killWhenExitContext = params.hasOwnProperty('killWhenExitContext') ? params.killWhenExitContext : true;\n  bizagi.timeOut = bizagi.timeOut || {};\n  if (bizagi.timeOut[_name] == undefined) {\n    bizagi.timeOut[_name] = [];\n  }\n\n  // Check if singleton (run once)\n  if (_singleton && bizagi.timeOut[_name] != undefined) {\n    bizagi.timeOut[_name] = [];\n  }\n\n\n  bizagi.timeOut[_name].push({\n    name: _name,\n    params: _params,\n    call: _call,\n    singleton: _singleton,\n    timeOut: _timeOut,\n    iterations: 0,\n    maxIterations: _maxIterations,\n    context: _context,\n    killWhenExitContext: _killWhenExitContext,\n    itsRunning: false,\n    timeInit: Math.round(new Date().getTime()) });\n\n  var executeTimeOut = function executeTimeOut() {\n    $.each(bizagi.timeOut, function (k, v) {\n      $.each(v, function (key, value) {\n        var now = Math.round(new Date().getTime());\n        var actualIterations = Math.round((now - value.timeInit) / value.timeOut);\n        bizagi.timeOut[value.name][key]['iterations'] = actualIterations;\n        if (actualIterations < value.maxIterations) {\n          // Check context\t\t\t\t\t\n          if (eval(value.context)) {\n            if (!value.itsRunning) {\n              if (value.params)\n                // Create a virtual function to IE\n                if ($.browser.msie) {\n                  var ieFunction = function ieFunction() {\n                    return value.call(value.params);\n                  };\n                }\n\n              bizagi.timeOut[value.name][key]['pointer'] = $.browser.msie ? setInterval(ieFunction, value.timeOut, 'JavaScript') : setInterval(value.call, value.timeOut, value.params);\n              bizagi.timeOut[value.name][key]['itsRunning'] = true;\n            }\n          } else if (value.killWhenExitContext) {\n            bizagi.timeOut[value.name].splice(key, 1);\n            clearTimeout(value.pointer);\n          } else {\n            bizagi.timeOut[value.name][key]['itsRunning'] = false;\n            clearTimeout(value.pointer);\n          }\n        } else {\n          // Cancel timeout and remove call from hash\n          clearTimeout(value.pointer);\n          bizagi.timeOut[value.name].splice(key, 1);\n        }\n      });\n    });\n  };\n\n  if (!bizagi.timeOutRunning) {\n    bizagi.timeOutRunning = true;\n    setInterval(executeTimeOut, 1000);\n  }\n};\nbizagi.util.isDate = function (value) {\n  // type A) dd/mm/aaaa \n  // type B) aaaa/mm/dd\n  // type C) aa/mm/dd\n\n  var dateRegEx_typeA = /^\\d{1,2}\\/\\d{1,2}\\/\\d{4}$/,\n  dateRegEx_typeB = /^\\d{4}\\/\\d{1,2}\\/\\d{1,2}$/,\n  dateRegEx_typeC = /^\\d{1,2}\\/\\d{1,2}\\/\\d{1,2}$/,\n  timeRegEx = /^\\d{1,2}:\\d{2}(:\\d{2})?(\\s[aApP][mM])?$/,\n  result = false,\n  resultDate = false,\n  hasTime = false,\n  resultTime = false;\n\n  value = value || '';\n\n  var arrayDate = value.toString().split(\" \"),\n  dateField,\n  timeField;\n\n  dateField = arrayDate[0];\n\n  if (dateRegEx_typeA.test(dateField) || dateRegEx_typeB.test(dateField) || dateRegEx_typeC.test(dateField)) {\n    resultDate = true;\n  }\n\n  if (arrayDate.length > 1) {\n\n    timeField = arrayDate[1];\n\n    hasTime = true;\n\n    //Checks if AM/PM included in the time element\n    if (arrayDate.length == 3)\n    timeField = timeField + ' ' + arrayDate[2];\n\n    if (timeRegEx.test(timeField))\n    resultTime = true;\n  }\n\n  if (hasTime)\n  result = resultDate && resultTime;else\n\n  result = resultDate;\n\n  return result;\n};\n/*\r\n    *   Encodes unicode characters into html\r\n    */\nbizagi.util.unicode2htmlencode = function (input) {\n  // Shorten\n  var natCCA = 'charCodeAt';\n  input = input.replace(/\\r\\n/g, '\\n');\n  var i,b1,hex,\n  len = input.length,\n  htmlHex = '';\n  for (i = 0; i < len; i++) {\n    b1 = input[natCCA](i);\n    hex = b1.toString(16);\n    htmlHex += '&#x' + hex + ';';\n  }\n  return htmlHex;\n};\n/*\r\n    *   Gets the head element from the DOM\r\n    */\nbizagi.util.getHeadElement = function () {\n  var hd = document.getElementsByTagName(\"head\")[0];\n  var docEl = document && document.documentElement;\n  if (!hd) {\n    hd = document.createElement(\"head\");\n    docEl.insertBefore(hd, docEl.firstChild);\n  }\n  // replace head so it runs fast next time.\n  bizagi.util.getHeadElement = function () {\n    return hd;\n  };\n  return hd;\n};\n/*\r\n    *   Loads a css text into the current document\r\n    */\nbizagi.util.loadStyle = function (styleText, layoutGuid) {\n\n  var element = document.getElementById(layoutGuid);\n\n  if (styleText && !element) {// less\n    var css = document.createElement(\"style\");\n    css.type = \"text/css\";\n    css.id = layoutGuid;\n    if (css.styleSheet) {// IE\n      css.styleSheet.cssText = styleText;\n    } else {\n      (function (node) {\n        if (css.childNodes.length) {\n          if (css.firstChild.nodeValue !== node.nodeValue) {\n            css.replaceChild(node, css.firstChild);\n          }\n        } else {\n          css.appendChild(node);\n        }\n      })(document.createTextNode(styleText));\n    }\n    bizagi.util.getHeadElement().appendChild(css);\n  }\n};\n\n/*\r\n    *   Loads a css text of the icon widget into the current document\r\n    */\nbizagi.util.loadIconStyle = function (icon, userfieldname) {\n  bizagi.log(\"bizagi.util.loadIconStyle\");\n  var css = document.createElement(\"style\");\n  css.type = \"text/css\";\n\n  var cssText = \".mtool-item-image-\" + userfieldname + \" { background:url(data:image/png;base64,\" + icon + \"); }\";\n  css.innerHTML = cssText;\n\n  bizagi.util.getHeadElement().appendChild(css);\n};\n\nbizagi.util.formatDecimalAndMoneyCell = function (tableData, externalMoneyFormat) {\n  var moneyFormat, decimalFormat, i, j;\n  var externalDecimalFormat = {\n    decimalSymbol: externalMoneyFormat.decimalSeparator,\n    digitGroupSymbol: externalMoneyFormat.groupSeparator,\n    roundToDecimalPlace: externalMoneyFormat.decimalDigits };\n\n  var defaultMoneyFormat = {\n    symbol: \"€\",\n    decimalSeparator: \",\",\n    groupSeparator: \".\",\n    decimalDigits: \"2\" };\n\n  var defaultDecimalFormat = {\n    colorize: false,\n    decimalSymbol: \".\",\n    digitGroupSymbol: \",\",\n    groupDigits: true,\n    negativeFormat: \"(%s%n)\",\n    positiveFormat: \"%s%n\",\n    roundToDecimalPlace: \"2\",\n    symbol: \"\" };\n\n\n  moneyFormat = $.extend(defaultMoneyFormat, externalMoneyFormat);\n  decimalFormat = $.extend(defaultDecimalFormat, externalDecimalFormat);\n\n  for (i = 0; i < tableData.columnTitle.length; i++) {\n    if (tableData.columnTitle[i].type.toUpperCase() == \"MONEY\") {\n      for (j = 0; j < tableData.rows.length; j++) {\n        tableData.rows[j].fields[i] = bizagi.util.formatMoney(tableData.rows[j].fields[i], moneyFormat);\n      }\n    }\n    if (tableData.columnTitle[i].type.toUpperCase() == \"FLOAT\" || tableData.columnTitle[i].type.toUpperCase() == \"REAL\") {\n      for (j = 0; j < tableData.rows.length; j++) {\n        var numberValue = bizagi.util.formatDecimal(tableData.rows[j].fields[i], decimalFormat);\n        //Gets rids of unnecessary zeros\n        if (bizagi.override.removeTrailingZeros === true) {\n          var positive = true;\n          if (numberValue.toString().indexOf(\")\") != -1) {\n            positive = false;\n            numberValue = numberValue.replace(\"(\", \"\").replace(\")\", \"\");\n          }\n          var re = new RegExp(\"(\" + BIZAGI_DEFAULT_CURRENCY_INFO.decimalSeparator + \"\\\\d*?[1-9])0+$\", \"g\");\n          numberValue = numberValue.replace(re, \"$1\");\n          re = new RegExp(\"\\\\\" + BIZAGI_DEFAULT_CURRENCY_INFO.decimalSeparator + \"0+$\", \"g\");\n          numberValue = numberValue.replace(re, \"\");\n\n          if (!positive) numberValue = \"(\" + numberValue + \")\";\n        }\n        tableData.rows[j].fields[i] = numberValue;\n      }\n    }\n  }\n\n  return tableData;\n};\n\n\nbizagi.util.formatBoolean = function (value) {\n  if (bizagi.util.parseBoolean(value) == true) {\n    return bizagi.localization.getResource(\"render-boolean-yes\");\n  } else if (bizagi.util.parseBoolean(value) == false) {\n    return bizagi.localization.getResource(\"render-boolean-no\");\n  } else {\n    return \"\";\n  }\n};\n\nbizagi.util.formatInvariantBoolean = function (htmlContent) {\n  htmlContent = htmlContent || \"\";\n  $(\".formatBoolean\", htmlContent).not(\".formatted\").each(function (index, element) {\n    var $element = $(element);\n    var content = $element.html();\n    $element.addClass(\"formatted\");\n    try {\n      var formatBoolean = bizagi.util.formatBoolean(content);\n      $element.html(formatBoolean);\n    } catch (e) {\n      $element.html(content);\n    }\n  });\n};\n\nbizagi.util.formatDecimal = function (value, format) {\n  var i = $(\"<i/>\").text(value);\n  if (i.formatCurrency) {i.formatCurrency(format);}\n  return i.text();\n};\n\n/*\r\n    * Format monetary cells\r\n    */\nbizagi.util.formatMonetaryCells = function (tableData, moneyFormat) {\n\n  var defaultFormat = {\n    symbol: \"€\",\n    decimalSeparator: \",\",\n    groupSeparator: \".\",\n    decimalDigits: \"2\" };\n\n\n  moneyFormat = moneyFormat || defaultFormat;\n\n  for (var i = 0; i < tableData.columnTitle.length; i++) {\n    if (tableData.columnTitle[i].type.toUpperCase() == \"MONEY\") {\n      for (var j = 0; j < tableData.rows.length; j++) {\n        tableData.rows[j].fields[i] = bizagi.util.formatMoney(tableData.rows[j].fields[i], moneyFormat);\n      }\n    }\n  }\n\n  return tableData;\n\n};\n\n/*\r\n    * Format monetary values, the format must have the structure of the next example:\r\n    *\r\n    * var defaultFormat = {\r\n    *        symbol: \"€\",\r\n    *        decimalSeparator: \",\",\r\n    *        groupSeparator: \".\",\r\n    *        decimalDigits: \"2\"\r\n    *    };\r\n    */\nbizagi.util.formatMoney = function (value, format) {\n  var result = \"\",\n  tmpResult = \"\",\n  intSection = \"\",\n  decimalSection = \"\",\n  decimalResult = \"\",\n  isNegative = value < 0;\n\n  if (value == null) {\n    value = \"\";\n  }\n\n  value = value.toString();\n\n  if (value.length >= 1) {\n    var decimalDigitPosition = value.indexOf(\".\");\n\n    if (decimalDigitPosition > 0) {\n      value = bizagi.util.fixDecimalDigits(value, format.decimalDigits);\n      intSection = value.substring(0, decimalDigitPosition).replace(/\\D/g, '');\n    } else {\n      var zeroChar = \"0\";\n\n      for (var i = 0; i < format.decimalDigits; i++) {\n        decimalResult += zeroChar;\n      }\n      intSection = value.replace(/\\D/g, '');\n    }\n\n    //take only the number characters removing other characters\n    value = value.replace(/\\D/g, '');\n    //take the decimal section\n    if (format.decimalDigits > 0) {\n      decimalSection = decimalDigitPosition > 0 ? format.decimalSeparator + value.substring(value.length - format.decimalDigits, value.length) : format.decimalSeparator + decimalResult;\n    } else {\n      decimalSection = \"\";\n    }\n    //insert groupSeparators into int section\n    if (intSection.length > 3) {\n      var count = 0;\n\n      //insert separator from end to begin\n      for (var i = intSection.length - 1; i >= 0; i--) {\n        if (count == 3) {\n          tmpResult += \".\";\n          count = 0;\n        }\n        tmpResult += intSection[i];\n        count += 1;\n      }\n      //revert the string to get the result value\n      for (var i = tmpResult.length - 1; i >= 0; i--) {\n        result += tmpResult[i];\n      }\n    } else {\n      result = intSection;\n    }\n\n    //replace the correct group separator\n    result = result.replaceAll(\".\", format.groupSeparator);\n    //unify all sections and finish format\n    if (isNegative) {\n      var negativeFormat = bizagi.localization.getResource('numericFormat').negativeFormat;\n      result = negativeFormat.replace(\"%s\", format.symbol).replace(\"%n\", result + decimalSection);\n    } else {\n      result = format.symbol + result + decimalSection;\n    }\n\n    return result;\n  } else {\n    return value;\n  }\n\n\n};\n\n/**\r\n    * Remove all characters except numbers\r\n    */\nbizagi.util.getOnlyNumbersByString = function (stringValue) {\n  return stringValue.replace(/\\D/g, '');\n};\n\n/*\r\n       This method was created because the \"toFixed()\" JavaScript method in some cases round the numbers when it is not needed.\r\n       Can return string or number.\r\n   */\nbizagi.util.fixDecimalDigits = function (value, decimalDigits) {\n  var decimalDigitPosition,\n  intSection,\n  decimalSection;\n\n  decimalDigitPosition = value.indexOf('.');\n  intSection = value.substring(0, decimalDigitPosition);\n  decimalSection = value.substring(decimalDigitPosition + 1, value.length);\n\n  if (decimalDigits > decimalSection.length) {\n    for (var i = decimalSection.length; i < decimalDigits; i++) {\n      value += '0';\n    }\n  } else {\n    value = parseFloat(value).toFixed(decimalDigits);\n  }\n\n  return value;\n\n};\n\nbizagi.util.numberToFixedString = function (x) {\n  if (x) {\n    if (Math.abs(x) < 1.0) {\n      var e = parseInt(x.toString().split('e-')[1]);\n      if (e) {\n        if (x >= 0) {\n          x *= Math.pow(10, e - 1);\n          x = '0.' + new Array(e).join('0') + x.toString().substring(2);\n        } else {\n          x = Math.abs(x) * Math.pow(10, e - 1);\n          x = '0.' + new Array(e).join('0') + x.toString().substring(2);\n          x = '-' + x;\n        }\n      }\n    } else {\n      var e = parseInt(x.toString().split('+')[1]);\n      if (e > 20) {\n        e -= 20;\n        x /= Math.pow(10, e);\n        x += new Array(e + 1).join('0');\n      }\n    }\n  }\n  return x;\n};\n\n/*\r\n    * Format html  money\r\n    */\nbizagi.util.formatInvariantMoney = function (htmlContent, moneyFormat) {\n  htmlContent = htmlContent || \"\";\n  var defaultFormat = {\n    symbol: moneyFormat.symbol,\n    decimalSeparator: moneyFormat.decimalSeparator || \",\",\n    groupSeparator: moneyFormat.groupSeparator || \".\",\n    decimalDigits: moneyFormat.decimalDigits || \"2\" };\n\n  if (moneyFormat.allowDecimals === false) {\n    defaultFormat.decimalDigits = \"0\";\n  }\n\n  $(\".formatMoney\", htmlContent).not(\".formated\").each(function (index, elem) {\n    var content = $(elem).html();\n    $(elem).addClass(\"formated\");\n    try {\n      var value = parseFloat(content);\n      if (!isNaN(value)) {\n        var formatMoney = bizagi.util.formatMoney(value, defaultFormat);\n        $(elem).html(formatMoney);\n      }\n    } catch (e) {\n      // Restore the original content\n      $(elem).html(content);\n    }\n  });\n};\n\n/*\r\n    * Format html  number\r\n    */\nbizagi.util.formatInvariantNumber = function (htmlContent, numberFormat) {\n  htmlContent = htmlContent || \"\";\n  var decimalDigits = \"2\";\n  if (numberFormat.decimalDigits == \"0\")\n  decimalDigits = \"0\";else\n\n  decimalDigits = numberFormat.decimalDigits || \"2\";\n\n  var groupSeparator = bizagi.util.isString(numberFormat.groupSeparator) && numberFormat.groupSeparator ? numberFormat.groupSeparator : \".\";\n\n  var defaultFormat = {\n    symbol: \"\",\n    decimalSeparator: numberFormat.decimalSeparator || \",\",\n    groupSeparator: numberFormat.groupSeparator || numberFormat.thousands ? groupSeparator : \"\",\n    decimalDigits: decimalDigits };\n\n  $(\".formatMoney\", htmlContent).not(\".formated\").each(function (index, elem) {\n    var content = $(elem).html();\n    $(elem).addClass(\"formated\");\n    try {\n      var containsLetter = content.match(/[a-zA-Z]/);\n      var value = containsLetter != null && containsLetter.length > 0 ? NaN : parseFloat(content);\n      if (!isNaN(value)) {\n        var formatNumber = bizagi.util.formatMoney(value, defaultFormat);\n        if (numberFormat.percentage) {\n          formatNumber = formatNumber.toString() + \"%\";\n        }\n        $(elem).html(formatNumber);\n      }\n    } catch (e) {\n      // Restore the original content\n      $(elem).html(content);\n    }\n  });\n};\n\n/*\r\n    * Format html with invariant date\r\n    */\nbizagi.util.formatInvariantDate = function (htmlContent, dateFormat) {\n  htmlContent = htmlContent || \"\";\n  dateFormat = dateFormat || \"MM/dd/yyyy hh:mm:ss\";\n  $(\".formatDate\", htmlContent).not(\".formated\").each(function (index, elem) {\n    var content = $(elem).html();\n    $(elem).addClass(\"formated\");\n    try {\n      var value = new Date(content);\n      var dateTimeFormat = dateFormat;\n\n      if (bizagi.util.isValidDate(value))\n      dateTimeFormat = bizagi.util.getFormatDate(value, dateTimeFormat);\n\n      var formatDate = bizagi.util.dateFormatter.formatDate(value, dateTimeFormat /*self.getResource(\"dateFormat\")*/);\n      $(elem).html(formatDate);\n    } catch (e) {\n      // Restore the original content\n      $(elem).html(content);\n    }\n  });\n};\n\n/**\r\n    * Return format date with resources from string invariant date. It use the format specified\r\n    * @param stringInvariantDate\r\n    */\nbizagi.util.formatDateFromInvariantStringDate = function (stringInvariantDate) {\n  if (bizagi.util.isValidDate(stringInvariantDate)) {\n    var dateTimeFormat = bizagi.localization.getResource(\"dateFormat\") + ' ' + bizagi.localization.getResource(\"timeFormat\");\n    var value = new Date(stringInvariantDate);\n    dateTimeFormat = bizagi.util.getFormatDate(value, dateTimeFormat);\n\n    var formatDate = bizagi.util.dateFormatter.formatDate(value, dateTimeFormat);\n    return formatDate;\n  }\n  return stringInvariantDate || \"\";\n};\n\nbizagi.util.getFormatDate = function (dateValue, defaultFormatDate) {\n  var dateTimeFormat = defaultFormatDate;\n\n  var H = dateValue.getHours();\n  var m = dateValue.getMinutes();\n  var s = dateValue.getSeconds();\n  var ms = dateValue.getMilliseconds();\n  var hide = bizagi.override.hideTimeWhenHourMinutesSecondsAreZero;\n\n  //Don't show time when hour, minutes, seconds and milliseconds are 0\n  if (H === 0 && m === 0 && s === 0 && ms === 0 && hide)\n  dateTimeFormat = bizagi.localization.getResource(\"dateFormat\");\n\n  return dateTimeFormat;\n};\n\n/**\r\n    * Format value by dataType\r\n    */\nbizagi.util.formatValueByDataType = function (value, dataType) {\n  /**\r\n                                                                 * Types Definedin Backend\r\n                                                                 * None = 0,BigInt = 1,Int = 2,SmallInt = 3,TinyInt = 4,Boolean = 5,Decimal = 6,Numeric = 7,Money = 8,Float = 10,Real = 11,DateTime = 12,SmallDateTime = 13,\r\n                                                                 Char = 14,VarChar = 15,Text = 16,Binary = 17,VarBinary = 18,Image = 19,Guid = 20,NChar = 21,NVarChar = 22,NText = 23,MxMBidirectionalRelationship = 24,\r\n                                                                 MxMUnidirectionalRelationship = 25,EntityDisabled = 26,UserAuth = 27,MxMUnidirectionalRelationshipWithoutFilter = 28,OracleNumber = 29,\r\n                                                                 Stakeholder = 30,ActivityItems = 31\r\n                                                                 *\r\n                                                                 * */\n  var result = value;\n  switch (dataType) {\n    case \"NText\":\n    case 23:\n    case \"Char\":\n    case 14:\n    case \"VarChar\":\n    case 15:\n    case \"Text\":\n    case 16:\n      if (value && value.length > 30) {\n        result = bizagi.util.replaceLineBreak(value);\n      }\n      break;\n    case \"Boolean\":\n    case 5:\n    case \"Binary\":\n    case 17:\n      result = bizagi.util.formatBoolean(value);\n      break;\n    case \"Int\":\n    case 2:\n    case \"BigInt\":\n    case 1:\n    case \"SmallInt\":\n    case 3:\n    case \"TinyInt\":\n    case 4:\n    case \"Numeric\":\n    case 7:\n      result = value === undefined || value === null ? \"\" : value;\n      break;\n    case \"Money\":\n    case 8:\n      result = bizagi.util.formatMonetaryCell(value);\n      break;\n    case \"Float\":\n    case 10:\n    case \"Real\":\n    case 11:\n    case \"Decimal\":\n    case 6:\n      result = bizagi.util.formatDecimalCell(value);\n      break;\n    case \"DateTime\":\n    case 12:\n    case \"SmallDateTime\":\n    case 13:\n      result = bizagi.util.formatDateFromInvariantStringDate(value);\n      break;}\n\n  if (result == null) {\n    result = \"\";\n  }\n  return result;\n};\n\n/**\r\n    * Check if it is a valid date\r\n    */\nbizagi.util.isValidDate = function (params) {\n  if (typeof params != \"undefined\" && params != null) {\n    var parseDate = new Date(params);\n    return !isNaN(parseDate.valueOf());\n  } else return false;\n};\n\n/*\r\n    *   Defines a date time formatter that will be available globally\r\n    */\nbizagi.util.monthNames = new Array('January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December', 'Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec');\nbizagi.util.dayNames = new Array('Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat');\n\nbizagi.util.dateFormatter = new function () {\n  this.LZ = function (x) {\n    return (x < 0 || x > 9 ? \"\" : \"0\") + x;\n  };\n  /*\r\n      *   isDate ( date_string, format_string )\r\n      *   Returns true if date string matches format of format string and\r\n      *   is a valid date. Else returns false.\r\n      *   It is recommended that you trim whitespace around the value before\r\n      *   passing it to this function, as whitespace is NOT ignored!\r\n      */\n  this.isDate = function (val, format) {\n    var date = this.getDateFromFormat(val, format);\n    if (date == 0) {\n      return false;\n    }\n    return true;\n  };\n\n  this.getRelativeTime = function (date, dateFormat, onlyUnitsTime, timeZone) {\n\n    var self = this;\n    var now = timeZone ? new Date(bizagi.moment().tz(bizagi.currentUser.timeZoneName).format()) : new Date();\n    var time = date instanceof Date ? date : kendo.parseDate(date, dateFormat);\n    var diff = now.getTime() - time.getTime();\n    var timeDiff = getTimeDiffDescription(diff, 'year', 31536000000, onlyUnitsTime);\n\n    if (!timeDiff) {\n      timeDiff = getTimeDiffDescription(diff, 'month', 2628000000, onlyUnitsTime);\n      if (!timeDiff) {\n        timeDiff = getTimeDiffDescription(diff, 'week', 604800000, onlyUnitsTime);\n        if (!timeDiff) {\n          timeDiff = getTimeDiffDescription(diff, 'day', 86400000, onlyUnitsTime);\n          if (!timeDiff) {\n            timeDiff = getTimeDiffDescription(diff, 'hour', 3600000, onlyUnitsTime);\n            if (!timeDiff) {\n              timeDiff = getTimeDiffDescription(diff, 'minute', 60000, onlyUnitsTime);\n              if (!timeDiff) {\n                if (onlyUnitsTime) {\n                  if (diff === 0) {\n                    timeDiff = getTimeDiffDescription(diff + 1, 'minute', 1, onlyUnitsTime);\n                  } else {\n                    timeDiff = getTimeDiffDescription(diff, 'minute', 1, onlyUnitsTime);\n                  }\n                } else {\n                  timeDiff = getTimeDiffDescription(diff, 'second', 2000, onlyUnitsTime);\n                  if (!timeDiff) {\n                    timeDiff = bizagi.localization.getResource(\"workportal-relativetime-momentago\");\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n\n    return timeDiff;\n\n    /*\r\n                      * Get Time Difference\r\n                      */\n    function getTimeDiffDescription(diff, unit, timeDivisor, onlyUnitsTime) {\n      var unitAmount = (diff / timeDivisor).toFixed(0);\n\n      if (unitAmount > 0) {\n        if (onlyUnitsTime) {\n          return unitAmount == 1 ? bizagi.localization.getResource(\"workportal-relativetime-\" + unit).replace(\"%s\", unitAmount) : bizagi.localization.getResource(\"workportal-relativetime-\" + unit + \"s\").replace(\"%s\", unitAmount);\n        } else {\n          var resourceAgo = bizagi.localization.getResource(\"workportal-relativetime-ago\");\n          return unitAmount == 1 ? resourceAgo.replace(\"%s\", bizagi.localization.getResource(\"workportal-relativetime-\" + unit).replace(\"%s\", unitAmount)) : resourceAgo.replace(\"%s\", bizagi.localization.getResource(\"workportal-relativetime-\" + unit + \"s\").replace(\"%s\", unitAmount));\n        }\n\n      } else {\n        return null;\n      }\n    }\n  };\n\n  /*\r\n      *   compareDates(date1,date1format,date2,date2format)\r\n      *   Compare two date strings to see which is greater.\r\n      *   Returns:\r\n      *   1 if date1 is greater than date2\r\n      *   0 if date2 is greater than date1 of if they are the same\r\n      *  -1 if either of the dates is in an invalid format\r\n      */\n  this.compareDates = function (date1, dateformat1, date2, dateformat2) {\n    var d1 = getDateFromFormat(date1, dateformat1);\n    var d2 = getDateFromFormat(date2, dateformat2);\n    if (d1 == 0 || d2 == 0) {\n      return -1;\n    } else if (d1 > d2) {\n      return 1;\n    }\n    return 0;\n  };\n  /*\r\n      *   getDifferenceBetweenDates(date1,date2, unit)\r\n      *   Compare two date objects to see difference between them. The number result by unit specified.\r\n      *\r\n      *   Returns:\r\n      *   Difference value between two dates.\r\n      *   Message string if either of the dates is in an invalid format\r\n      */\n  this.getDifferenceBetweenDates = function (date1, date2, unit) {\n    if (date1 instanceof Date && date1 instanceof Date) {\n      switch (unit) {\n        case \"seconds\":\n          return (date2.getTime() - date1.getTime()) / 1000;\n        case \"milliseconds\":\n          return date2.getTime() - date1.getTime();\n        default:\n          return \"unit is not Defined\";}\n\n    } else {\n      return \"one param not is Date\";\n    }\n\n  };\n  /*\r\n      *   formatDate (date_object, format)\r\n      *   Returns a date in the output format specified.\r\n      *   The format string uses the same abbreviations as in getDateFromFormat()\r\n      */\n  this.formatDate = function (date, format, i18n) {\n    // Check if date is valid\n    if (!bizagi.util.isValidDate(date) || date == 0) {\n      return \"\";\n    }\n\n    var monthNames = bizagi.util.monthNames;\n    var dayNames = bizagi.util.dayNames;\n    format = format + \"\";\n    var result = \"\";\n    var i_format = 0;\n    var c;\n    var token;\n    var y = date.getFullYear() + \"\";\n    var M = date.getMonth() + 1;\n    var d = date.getDate();\n    var E = date.getDay();\n    var H = date.getHours();\n    var m = date.getMinutes();\n    var s = date.getSeconds();\n    var f = date.getMilliseconds();\n    // Convert real date parts into formatted versions\n    var value = new Object();\n\n    if (bizagi.util.isValidResource(\"datePickerRegional\")) {\n      i18n = bizagi.localization.getResource(\"datePickerRegional\");\n    }\n\n    if (i18n) {\n      var months = i18n.monthNames.concat(i18n.monthNamesShort);\n      var days = i18n.dayNames.concat(i18n.dayNamesShort);\n      monthNames = monthNames.toString() === months.toString() ? monthNames : months;\n      dayNames = dayNames.toString() === days.toString() ? dayNames : days;\n    }\n\n    if (y.length < 4 || y.charAt(0) === \"-\" && y.length < 5) {\n      y = \"\" + (y - 0 + 1900);\n    }\n    value[\"y\"] = \"\" + y;\n    value[\"yyyy\"] = y;\n    value[\"yy\"] = y.substring(2, 4);\n    value[\"M\"] = M;\n    value[\"MM\"] = this.LZ(M);\n    value[\"MMM\"] = monthNames[M + 11];\n    value[\"MMMM\"] = monthNames[M - 1];\n    value[\"NNN\"] = monthNames[M + 11];\n    value[\"d\"] = d;\n    value[\"dd\"] = this.LZ(d);\n    value[\"ddd\"] = dayNames[E + 7];\n    value[\"dddd\"] = dayNames[E];\n    value[\"E\"] = dayNames[E + 7];\n    value[\"EE\"] = dayNames[E];\n    value[\"H\"] = H;\n    value[\"HH\"] = this.LZ(H);\n    value[\"tt\"] = H < 12 ? \"am\" : \"pm\";\n    value[\"TT\"] = H < 12 ? \"AM\" : \"PM\";\n\n\n    if (H == 0) {\n      value[\"h\"] = 12;\n    } else if (H > 12) {\n      value[\"h\"] = H - 12;\n    } else {\n      value[\"h\"] = H;\n    }\n    value[\"hh\"] = this.LZ(value[\"h\"]);\n    if (H > 11) {\n      value[\"K\"] = H - 12;\n    } else {\n      value[\"K\"] = H;\n    }\n    value[\"k\"] = H + 1;\n    value[\"KK\"] = this.LZ(value[\"K\"]);\n    value[\"kk\"] = this.LZ(value[\"k\"]);\n    if (H > 11) {\n      value[\"a\"] = \"PM\";\n    } else {\n      value[\"a\"] = \"AM\";\n    }\n    value[\"m\"] = m;\n    value[\"mm\"] = this.LZ(m);\n    value[\"s\"] = s;\n    value[\"ss\"] = this.LZ(s);\n    value[\"FFF\"] = f;\n\n    while (i_format < format.length) {\n      c = format.charAt(i_format);\n      token = \"\";\n      while (format.charAt(i_format) == c && i_format < format.length) {\n        token += format.charAt(i_format++);\n      }\n      if (value[token] != null) {\n        result = result + value[token];\n      } else {\n        result = result + token;\n      }\n    }\n    return result;\n  };\n  /*\r\n      *   getDateFromFormat( date_string , format_string )\r\n      *\r\n      *   This function takes a date string and a format string. It matches\r\n      *   If the date string matches the format string, it returns the \r\n      *   getTime() of the date. If it does not match, it returns 0.\r\n      */\n  this.getDateFromFormat = function (val, format, i18n) {\n    var monthNames = bizagi.util.monthNames;\n    var dayNames = bizagi.util.dayNames;\n    val = val + \"\";\n    format = format + \"\";\n    var i_val = 0;\n    var i_format = 0;\n    var c;\n    var token;\n    var x = 0,\n    y = 0;\n    var now = new Date();\n    var year = now.getYear();\n    var month = now.getMonth() + 1;\n    var date = 1;\n    var hh = now.getHours();\n    var mm = now.getMinutes();\n    var ss = now.getSeconds();\n    var FFF = now.getMilliseconds();\n    var ampm = \"\";\n\n    if (bizagi.util.isValidResource(\"datePickerRegional\")) {\n      i18n = bizagi.localization.getResource(\"datePickerRegional\");\n    }\n\n    if (i18n) {\n      var months = i18n.monthNames.concat(i18n.monthNamesShort);\n      var days = i18n.dayNames.concat(i18n.dayNamesShort);\n      monthNames = monthNames.toString() === months.toString() ? monthNames : months;\n      dayNames = dayNames.toString() === days.toString() ? dayNames : days;\n    }\n\n    while (i_format < format.length) {\n      // Get next token from format string\n      c = format.charAt(i_format);\n      token = \"\";\n      while (format.charAt(i_format) == c && i_format < format.length) {\n        token += format.charAt(i_format++);\n      }\n      // Extract contents of value based on format token\n      if (token == \"yyyy\" || token == \"yy\" || token == \"y\") {\n        if (token == \"yyyy\") {\n          x = 4;\n          y = 4;\n        }\n        if (token == \"yy\") {\n          x = 2;\n          y = 2;\n        }\n        if (token == \"y\") {\n          x = 2;\n          y = 4;\n        }\n        year = _getInt(val, i_val, x, y);\n        if (year == null) {\n          return 0;\n        }\n        i_val += year.length;\n        if (year.length == 2) {\n          if (year > 70) {\n            year = 1900 + (year - 0);\n          } else {\n            year = 2000 + (year - 0);\n          }\n        }\n      } else if (token == \"MMMM\" || token == \"MMM\" || token == \"NNN\") {\n        month = 0;\n        for (var i = 0; i < monthNames.length; i++) {\n          var month_name = monthNames[i];\n          if (val.substring(i_val, i_val + month_name.length).toLowerCase() == month_name.toLowerCase()) {\n            if (token == \"MMMM\" || token == \"MMM\" || token == \"NNN\" && i > 11) {\n              month = i + 1;\n              if (month > 12) {\n                month -= 12;\n              }\n              i_val += month_name.length;\n              break;\n            }\n          }\n        }\n\n        //This is because bizagi assumes MM and M like integers in some cases\n        if (month == 0) {\n          month = _getInt(val, i_val, 1, 2);\n          if (month == null || month < 1 || month > 12) {\n            return 0;\n          }\n          i_val += month.length;\n        }\n\n        if (month < 1 || month > 12) {\n          return 0;\n        }\n      } else if (token == \"dddd\" || token == \"EE\" || token == \"E\") {\n        for (var j = 0; j < dayNames.length; j++) {\n          var day_name = dayNames[j];\n          if (val.substring(i_val, i_val + day_name.length).toLowerCase() == day_name.toLowerCase()) {\n            i_val += day_name.length;\n            break;\n          }\n        }\n      } else if (token == \"MM\" || token == \"M\") {\n        month = _getInt(val, i_val, 1, 2);\n        if (month == null || month < 1 || month > 12) {\n          return 0;\n        }\n        i_val += month.length;\n      } else if (token == \"dd\" || token == \"d\") {\n        date = _getInt(val, i_val, 1, 2);\n        if (date == null || date < 1 || date > 31) {\n          return 0;\n        }\n        i_val += date.length;\n      } else if (token == \"hh\" || token == \"h\") {\n        hh = _getInt(val, i_val, token.length, 2);\n        if (hh == null || hh < 1 || hh > 12) {\n          return 0;\n        }\n        i_val += hh.length;\n      } else if (token == \"HH\" || token == \"H\") {\n        hh = _getInt(val, i_val, token.length, 2);\n        if (hh == null || hh < 0 || hh > 23) {\n          return 0;\n        }\n        i_val += hh.length;\n      } else if (token == \"KK\" || token == \"K\") {\n        hh = _getInt(val, i_val, token.length, 2);\n        if (hh == null || hh < 0 || hh > 11) {\n          return 0;\n        }\n        i_val += hh.length;\n      } else if (token == \"kk\" || token == \"k\") {\n        hh = _getInt(val, i_val, token.length, 2);\n        if (hh == null || hh < 1 || hh > 24) {\n          return 0;\n        }\n        i_val += hh.length;\n        hh--;\n      } else if (token == \"mm\" || token == \"m\") {\n        mm = _getInt(val, i_val, token.length, 2);\n        if (mm == null || mm < 0 || mm > 59) {\n          return 0;\n        }\n        i_val += mm.length;\n      } else if (token == \"ss\" || token == \"s\") {\n        ss = _getInt(val, i_val, token.length, 2);\n        if (ss == null || ss < 0 || ss > 59) {\n          return 0;\n        }\n        i_val += ss.length;\n      } else if (token == \"FFF\") {\n        ff = _getInt(val, i_val, token.length, 3);\n        if (ff == null || ff < 0 || ff > 999) {\n          return 0;\n        }\n        i_val += ff.length;\n      } else if (token == \"a\" || token == \"tt\") {\n        if (val.substring(i_val, i_val + 2).toLowerCase() == \"am\") {\n          ampm = \"AM\";\n        } else if (val.substring(i_val, i_val + 2).toLowerCase() == \"pm\") {\n          ampm = \"PM\";\n        } else {\n          return 0;\n        }\n        i_val += 2;\n      } else {\n        if (val.substring(i_val, i_val + token.length) != token) {\n          return 0;\n        } else {\n          i_val += token.length;\n        }\n      }\n    }\n\n    // Is date valid for month?\n    if (month == 2) {\n      // Check for leap year\n      if (year % 4 == 0 && year % 100 != 0 || year % 400 == 0) {// leap year\n        if (date > 29) {\n          return 0;\n        }\n      } else {\n        if (date > 28) {\n          return 0;\n        }\n      }\n    }\n    if (month == 4 || month == 6 || month == 9 || month == 11) {\n      if (date > 30) {\n        return 0;\n      }\n    }\n    // Correct hours value\n    if (hh < 12 && ampm == \"PM\") {\n      hh = hh - 0 + 12;\n    } else if (hh > 11 && ampm == \"AM\") {\n      hh -= 12;\n    }\n    var newdate = new Date(year, month - 1, date, hh, mm, ss);\n    return newdate;\n\n    /*\r\n                     *   Utility method for parsing in getDateFromFormat()\r\n                     */\n    function _isInteger(_val) {\n      var digits = \"1234567890\";\n      for (var k = 0; k < _val.length; k++) {\n        if (digits.indexOf(_val.charAt(k)) == -1) {\n          return false;\n        }\n      }\n      return true;\n    };\n    /*\r\n        *   Utility method for parsing in getDateFromFormat()\r\n        */\n    function _getInt(str, l, minlength, maxlength) {\n      for (var m = maxlength; m >= minlength; m--) {\n        var _token = str.substring(l, l + m);\n        if (_token.length < minlength) {\n          return null;\n        }\n        if (_isInteger(_token)) {\n          return _token;\n        }\n      }\n      return null;\n    };\n  };\n  /*\r\n      * parseDate( date_string [, prefer_euro_format] )\r\n      *\r\n      * This function takes a date string and tries to match it to a\r\n      * number of possible date formats to get the value. It will try to\r\n      * match against the following international formats, in this order:\r\n      * y-M-d   MMM d, y   MMM d,y   y-MMM-d   d-MMM-y  MMM d\r\n      * M/d/y   M-d-y      M.d.y     MMM-d     M/d      M-d\r\n      * d/M/y   d-M-y      d.M.y     d-MMM     d/M      d-M\r\n      * A second argument may be passed to instruct the method to search\r\n      * for formats like d/M/y (european format) before M/d/y (American).\r\n      * Returns a Date object or null if no patterns match.\r\n      */\n  this.parseDate = function (val) {\n    var preferEuro = arguments.length == 2 ? arguments[1] : false;\n    var generalFormats = new Array('y-M-d', 'MMM d, y', 'MMM d,y', 'y-MMM-d', 'd-MMM-y', 'MMM d');\n    var monthFirst = new Array('M/d/y', 'M-d-y', 'M.d.y', 'MMM-d', 'M/d', 'M-d');\n    var dateFirst = new Array('d/M/y', 'd-M-y', 'd.M.y', 'd-MMM', 'd/M', 'd-M');\n    var checkList = new Array(generalFormats, preferEuro ? dateFirst : monthFirst, preferEuro ? monthFirst : dateFirst);\n    var d;\n    for (var i = 0; i < checkList.length; i++) {\n      var l = window[checkList[i]];\n      for (var j = 0; j < l.length; j++) {\n        d = getDateFromFormat(val, l[j]);\n        if (d != 0) {\n          return new Date(d);\n        }\n      }\n    }\n    return null;\n  };\n  /*\r\n      *   Method to analyze a time format and checks separator, and hour format, and seconds\r\n      */\n  this.analyzeTimeFormat = function (timeFormat) {\n    var i = 0;\n    var c;\n    // Define return object\n    var returnObj = {\n      show24Hours: false,\n      showSeconds: false,\n      separator: \":\" };\n\n    // Analize format\n    var token,lastToken = \"\";\n    while (i < timeFormat.length) {\n      // Get next token from format string\n      c = timeFormat.charAt(i);\n      token = \"\";\n      while (timeFormat.charAt(i) == c && i < timeFormat.length) {\n        token += timeFormat.charAt(i++);\n      }\n\n      // Extract contents of value based on format token\n      if (token == \"hh\" || token == \"h\") {\n        lastToken = token;\n        returnObj.show24Hours = false;\n      } else if (token == \"HH\" || token == \"H\") {\n        lastToken = token;\n        returnObj.show24Hours = true;\n      } else if (token == \"mm\" || token == \"m\") {\n        lastToken = token;\n      } else if (token == \"ss\" || token == \"s\") {\n        lastToken = token;\n        returnObj.showSeconds = true;\n      } else if (token == \"a\") {\n        lastToken = token;\n      } else {\n        if (lastToken.toUpperCase() == \"H\" || lastToken.toUpperCase() == \"HH\") {\n          returnObj.separator = token;\n        }\n      }\n    }\n\n    return returnObj;\n  };\n  this.getDateFromInvariant = function (value, showTime) {\n    value = value == null ? \"\" : value;\n    value = typeof value != \"string\" ? value.toString() : value;\n    var INVARIANT_FORMAT = \"MM/dd/yyyy\" + (showTime ? \" H:mm:ss\" : \"\");\n    if (showTime) {\n      if (value && (value.toLowerCase().indexOf(\"am\") > 0 || value.toLowerCase().indexOf(\"pm\") > 0)) {\n        INVARIANT_FORMAT = \"MM/dd/yyyy h:mm:ss a\";\n      }\n    }\n    var date = bizagi.util.dateFormatter.getDateFromFormat(value, INVARIANT_FORMAT);\n    // Also try to read the date with full format if the last instruction didn't success\n    if (date == 0 && !showTime) {\n      INVARIANT_FORMAT = \"MM/dd/yyyy H:mm:ss\";\n      date = bizagi.util.dateFormatter.getDateFromFormat(value, INVARIANT_FORMAT);\n    } else if (date == 0 && showTime && value != null && value != \"\") {\n      INVARIANT_FORMAT = \"MM/dd/yyyy\";\n      date = bizagi.util.dateFormatter.getDateFromFormat(value, INVARIANT_FORMAT);\n      date.setHours(0, 0, 0, 0);\n    }\n\n    return date;\n  };\n  this.formatInvariant = function (date, showTime) {\n    var INVARIANT_FORMAT = \"MM/dd/yyyy\" + (showTime ? \" HH:mm:ss\" : \"\");\n    var formattedDate = bizagi.util.dateFormatter.formatDate(date, INVARIANT_FORMAT);\n    return formattedDate;\n  };\n  this.getDateFromISO = function (value, showTime) {\n    var ISO_FORMAT = \"yyyy-MM-dd\" + (showTime ? \" HH:mm\" : \"\");\n    var date = bizagi.util.dateFormatter.getDateFromFormat(value, ISO_FORMAT);\n    // If the date could not be parsed, try it out with seconds\n    if (date == 0 && showTime) {\n      ISO_FORMAT = \"yyyy-MM-dd\" + (showTime ? \" HH:mm:ss\" : \"\");\n      date = bizagi.util.dateFormatter.getDateFromFormat(value, ISO_FORMAT);\n    }\n\n    // Also try to read the date with full format if the last instruction didn't success\n    if (date == 0 && !showTime) {\n      ISO_FORMAT = \"yyyy-MM-dd HH:mm\";\n      date = bizagi.util.dateFormatter.getDateFromFormat(value, ISO_FORMAT);\n      // If the date could not be parsed, try it out with seconds\n      if (date == 0) {\n        ISO_FORMAT = \"yyyy-MM-dd HH:mm:ss\";\n        date = bizagi.util.dateFormatter.getDateFromFormat(value, ISO_FORMAT);\n      }\n    }\n\n    return date;\n  };\n  this.formatISO = function (date, showTime) {\n    var ISO_FORMAT = \"yyyy-MM-dd\" + (showTime ? \" HH:mm\" : \"\");\n    var formattedDate = bizagi.util.dateFormatter.formatDate(date, ISO_FORMAT);\n    return formattedDate;\n  };\n\n  this.formatISO8601 = function (dateObject, restartTimeToMidnight) {\n    var restartTimeToMidnight = restartTimeToMidnight || false;\n    var ISO_FORMAT8601 = \"yyyy-MM-ddTHH:mm:ss\";\n    if (restartTimeToMidnight) {\n      dateObject.setHours(0, 0, 0, 0);\n    }\n    return bizagi.util.dateFormatter.formatDate(dateObject, ISO_FORMAT8601);\n  };\n\n  this.isFormatISO8601 = function (stringDate) {\n    var ISO_8601_WITH_TIME = /^\\d{4}-\\d\\d-\\d\\dT\\d\\d:\\d\\d:\\d\\d(\\.\\d+)?(([+-]\\d\\d:\\d\\d)|Z)?$/i;\n    return ISO_8601_WITH_TIME.test(stringDate);\n  };\n\n  this.sleep = function (delay) {\n    // Delay in miliseconds\n    var start = new Date().getTime();\n    while (new Date().getTime() < start + delay) {\n      // wait\n    }\n  };\n  this.getDateFormatByDatePickerJqueryUI = function () {\n    return bizagi.localization.getResource(\"dateFormat\").replace(\"yyyy\", \"yy\");\n  };\n}();\n\nbizagi.util.sleepUntil = function (callback, delay) {\n  var delay = delay || 200;\n  var def = new $.Deferred();\n  function internalSleepUntil() {\n    var timeout = setTimeout(function () {\n      if (def.state() !== \"pending\") return;\n      var continueWaiting = !callback();\n      if (!continueWaiting) {\n        def.resolve();\n        clearTimeout(timeout);\n        return;\n      } else\n      internalSleepUntil(name);\n    }, delay);\n  }\n  internalSleepUntil();\n  return def.promise();\n};\n\nbizagi.util.sleepFor = function (delay) {\n  var delay = delay || 200;\n  var def = new $.Deferred();\n  function internalSleepFor() {\n    var timeout = setTimeout(function () {\n      if (def.state() !== \"pending\") return;\n      def.resolve();\n      clearTimeout(timeout);\n    }, delay);\n  }\n  internalSleepFor();\n  return def.promise();\n};\n\n\n/*\r\n    * Use localStorage in html5 verfiy supports and operations \r\n    * http://dev.w3.org/html5/webstorage/#dom-storage-setitem\r\n    */\n\nbizagi.util.browserSupportLocalStorage = function () {\n  try {\n    return 'localStorage' in window && window['localStorage'] !== null;\n  } catch (e) {\n    return false;\n  }\n};\n/*\r\n    *set the item  in the local storage\r\n    */\nbizagi.util.setItemLocalStorage = function (key, value) {\n  if (bizagi.util.browserSupportLocalStorage()) {\n    localStorage.setItem(key, value);\n    return true;\n  } else {\n    return false;\n  }\n};\n\nbizagi.util.getItemLocalStorage = function (key) {\n  return localStorage.getItem(key);\n};\n\nbizagi.util.removeItemLocalStorage = function (key) {\n  localStorage.removeItem(key);\n};\n\nbizagi.util.clearLocalStorage = function () {\n  if (bizagi.util.browserSupportLocalStorage())\n  localStorage.clear();\n};\n\nfunction printf(msg) {\n  var args = Array.prototype.slice.call(arguments, 1),arg;\n  return msg.replace(/(%[disv])/g, function (a, val) {\n    arg = args.shift();\n    if (arg !== undefined) {\n      switch (val.charCodeAt(1)) {\n        case 100:\n          return +arg; // d\n        case 105:\n          return Math.round(+arg); // i\n        case 115:\n          return String(arg); // s\n        case 118:\n          return arg; // v\n      }\n    }\n    return val;\n  });\n}\n\n\n// Fix problem with console.log when we forgot to remove it\n(function () {\n  var environment = typeof BIZAGI_ENVIRONMENT != \"undefined\" ? BIZAGI_ENVIRONMENT : \"release\";\n  if (environment == 'debug') {\n    if (_typeof(window.console) != \"object\") {\n      window.console = {\n        log: function log(msg) {/*Nothing to do*/} };\n\n    }\n  } else {\n    if ((typeof console === \"undefined\" ? \"undefined\" : _typeof(console)) != \"object\") {\n      window.console = {\n        log: function log(msg) {/*Nothing to do*/} };\n\n    } else if (bizagiConfig && !bizagiConfig.showConsoleLog) {\n      console.log = function (a) {/*Nothing to do*/};\n    }\n  }\n})();\n\n\nbizagi.util.startLoading = function (container) {\n  var elementToapply = container || $(\"body\");\n  elementToapply.append('<div class=\"ui-widget-overlay ui-front\" style=\"z-index: 1001;\"><div class=\"ui-bizagi-loading-message-center\" style=\"position: absolute; top: 48%; left: 48%; display: ;\"><div class=\"ui-bizagi-loading-icon\"></div></div></div>');\n};\nbizagi.util.stopLoading = function (container) {\n  var elementToapply = container || $(\"body\");\n  $(\".ui-widget-overlay:first\", elementToapply).remove();\n};\n\nbizagi.util.smartphone.startLoading = function (container) {\n  var elementToapply = container || $(\"body\");\n  elementToapply.append('<div class=\"bz-util-loading-container\"> <div class=\"ui-bizagi-loading-icon bz-util-loading\"></div>  </div>');\n};\nbizagi.util.smartphone.stopLoading = function (container) {\n  var elementToapply = container || $(\"body\");\n  $(\".bz-util-loading-container\", elementToapply).remove();\n};\n\n\n\n/**\r\n    * determines whether the element in the browser supports the event we are looking for, eg 'paste', 'input', 'blur', etc. More info check modernizer.js.\r\n    * @param  {string|*}           eventName  is the name of an event to test for (e.g. \"resize\")\r\n    * @param  {(Object|string|*)=} element    is the element|document|window|tagName to test on\r\n    * @return {boolean}\r\n    */\nbizagi.util.isEventSupported = function (eventName, element) {\n  var needsFallback = !('onblur' in document.documentElement);\n  var isSupported;\n\n  if (!eventName) {\n    return false;\n  }\n  if (!element || typeof element === 'string') {\n    element = document.createElement(element || 'div');\n  }\n\n  // Testing via the `in` operator is sufficient for modern browsers and IE.\n  // When using `setAttribute`, IE skips \"unload\", WebKit skips \"unload\" and\n  // \"resize\", whereas `in` \"catches\" those.\n  eventName = 'on' + eventName;\n  isSupported = eventName in element;\n\n  // Fallback technique for old Firefox - bit.ly/event-detection\n  if (!isSupported && needsFallback) {\n    if (!element.setAttribute) {\n      // Switch to generic element if it lacks `setAttribute`.\n      // It could be the `document`, `window`, or something else.\n      element = document.createElement('div');\n    }\n    if (element.setAttribute && element.removeAttribute) {\n      element.setAttribute(eventName, '');\n      isSupported = typeof element[eventName] === 'function';\n\n      if (element[eventName] !== undefined) {\n        // If property was created, \"remove it\" by setting value to `undefined`.\n        element[eventName] = undefined;\n      }\n      element.removeAttribute(eventName);\n    }\n  }\n  return isSupported;\n};\n\n\n/**\r\n    * Execute deferreds in order\r\n    * @example var a = new bizagiQueue(); a.add(function);\r\n    * \r\n    */\nfunction bizagiQueue() {\n  var self = this;\n  var queue = [];\n  var async;\n  var sync;\n\n  self.length = function () {\n    return queue.length;\n  };\n\n  self.add = function (callback) {\n    if (!sync) {\n      sync = true;\n      async = undefined;\n      return queue.push({ callbacks: [callback] });\n    }\n\n    var last = queue[queue.length - 1];\n    last.callbacks.push(callback);\n  };\n\n  self.addParallel = function (callback) {\n    if (!async) {\n      async = true;\n      sync = undefined;\n      return queue.push({ callbacks: [callback] });\n    }\n\n    // Put a parallel on last item\n    var last = queue[queue.length - 1];\n    last.callbacks.push(callback);\n  };\n\n  self.execute = function () {\n    var starter = new $.Deferred();\n    var promise = starter.promise();\n    var queueLength = queue.length;\n    for (var i = 0; i < queueLength; i++) {\n      promise = promise.pipe(function () {\n        var element = queue.shift();\n        return $.when.apply($, $.map(element.callbacks, function (callback) {\n          // Function support\n          if (typeof callback == \"function\") {\n            var deferred = $.Deferred();\n            $.when(callback()).done(function () {\n              deferred.resolve();\n            }).fail(function () {\n              deferred.reject();\n            });\n            return deferred.promise();\n          }\n          // Deferred support\n          return callback;\n        }));\n      });\n    }\n\n    starter.resolve();\n    promise = promise.done(function () {\n      // Reset queue\n      queue = [];\n    });\n\n    return promise;\n  };\n}\n\n\n/**\r\n   * Calculate circular dependencies \r\n   * \r\n   * @example var a = new bizagi.circularDependencies(); a.addNode('name',obj);\r\n   * a.resolve(node);\r\n   * \r\n   */\n//TODO: DEPL - Check this because we agreed to a much simpler solution\nbizagi.circularDependencies = function () {\n  var circularDependencies = new Function();\n  var self = circularDependencies.prototype;\n  self.list = []; //[{ name: \"root\", obj: {}, nodeObj: {}, childs: {} }];\n  self.lastNodeAdded; // Undefined reference\n\n  self.addNode = function (name, obj) {\n    var OBJ = JSON.encode(obj);\n    var foundObjChildNode = _search(name, OBJ);\n    if (foundObjChildNode) {\n      var lastNode = self.lastNodeAdded || self.list[self.list.length - 1];\n      lastNode.nodeObj.addChild(foundObjChildNode.nodeObj);\n      self.lastNodeAdded = foundObjChildNode;\n    } else {\n      var node = new _addNode(name, OBJ);\n      self.list.push({\n        name: name,\n        obj: OBJ,\n        nodeObj: node,\n        timeStamp: new Date().getTime() });\n\n      return node;\n    }\n  };\n\n  self.resolve = function (node, resolved, seen) {\n    // if dont setted node variable, take the first one -> root\n    node = node || _getFirstNodeWithChilds() || self.list[0].nodeObj;\n    var resolveDependencies = new _resolve(node, resolved, seen);\n    return resolveDependencies;\n  };\n\n  var _resetList = function _resetList() {\n    self.list = [];\n  };\n\n  var _getFirstNodeWithChilds = function _getFirstNodeWithChilds() {\n    for (var i = 0; i < self.list.length; i++) {\n      if (self.list[i].nodeObj.childs.length > 0) {\n        return self.list[i].nodeObj;\n      }\n    }\n    return self.list.length > 0 ? self.list[0].nodeObj : {};\n  };\n\n  var _search = function _search(name, obj) {\n    for (var i = 0; i < self.list.length; i++) {\n      if (self.list[i].name == name) {\n        // remove tag element\n        var now = new Date().getTime();\n        var timeToKeep = 1000; //milliseconds\n        if (self.list[i].timeStamp + timeToKeep < now) {\n          //remove element from the list\n          self.list.splice(i, 1);\n        } else if (self.list[i].obj == obj) {\n          return self.list[i];\n        }\n      }\n    }\n    return false;\n  };\n\n  var _addNode = function (name, obj) {\n    name = name || \"\";\n    obj = obj || {};\n    var node = function node(name, obj) {\n      this.name = name;\n      this.obj = obj;\n      this.childs = [];\n    };\n    var self = node.prototype;\n\n    self.addChild = function (node) {\n      this.childs.push(node);\n    };\n\n    return node;\n  }();\n\n  var _resolve = function (node, resolved, seen) {\n    var resolve = function resolve(node, resolved, seen) {\n      this.node = node || {};\n      this.node.childs = this.node.childs || [];\n      this.resolved = resolved || [];\n      this.seen = seen || [];\n\n      this.seen.push(this.node);\n\n      for (var i = 0; i < this.node.childs.length; i++) {\n        if (!self.hasObject(this.node.childs[i], this.resolved)) {\n          if (self.hasObject(this.node.childs[i], this.seen)) {\n            //throw new _error(\"error node:\" + node.name + \" -> \" + node.childs[i].name);\n            _resetList();\n            var error = {\n              dependencyFrom: this.node.name,\n              dependencyFromObj: this.node.obj,\n              dependencyTo: this.node.childs[i].name,\n              dependencyToObj: this.node.childs[i].obj,\n              path: this.seen };\n\n\n            return {\n              error: $.extend({\n                standardError: {\n                  status: \"error\",\n                  responseText: JSON.encode({ message: self.makeErrorMessage(error), type: \"alert\" }) },\n\n                multiactionError: {\n                  message: self.makeErrorMessage(error),\n                  type: \"alert\" } },\n\n              error) };\n\n          } else {\n            return resolve(this.node.childs[i], this.resolved, this.seen);\n          }\n        }\n      }\n      if (this.resolved) {\n        this.resolved.push(this.node);\n      }\n    };\n\n    var self = resolve.prototype;\n\n    self.hasObject = function (toSearch, collection) {\n\n      for (var i = 0; i < collection.length; i++) {\n        if (collection[i].name == toSearch.name) {\n          return true;\n        }\n      }\n      return false;\n    };\n\n    self.makeErrorMessage = function (error) {\n      var messageTmpl = bizagi.localization.getResource(\"render-actions-loop-validation\");\n\n      return printf(messageTmpl, error.dependencyFrom, error.dependencyTo);\n\n      /*  return {\r\n                                                                                  responseText: parsedMessage,\r\n                                                                                  message: parsedMessage,\r\n                                                                                  extraInfo: error\r\n                                                                              };*/\n    };\n\n    return resolve;\n  }();\n\n  return self;\n};\n\n/**\r\n    * Apply css string style (one or more). It works to add or override a specific style even if it has !important\r\n    * \r\n    * @example bizagi.util.cssExtended($('.myClass'), 'display:none!important;color:red');\r\n    * \r\n    */\nbizagi.util.cssExtended = function (instance, options) {\n  var cssToAdd = options.split(\";\");\n\n  for (i = 0; i < cssToAdd.length; i++) {\n    if (cssToAdd[i] != \"\") {\n      bizagi.util.cssExtendedApplyChanges(instance, cssToAdd[i]);\n    }\n  }\n\n};\n\n/**\r\n    * Apply the style change \r\n    * \r\n    */\nbizagi.util.cssExtendedApplyChanges = function (instance, option) {\n\n  for (var i = 0; i < instance.length; i++) {\n    var $this = $(instance[i]);\n    var attrToAdd = option.split(\":\")[0];\n\n    if ($this.attr('style')) {\n      var tmpStyle = $this.attr('style').split(\";\");\n      var arrProperties = [];\n      var resultProperties = \"\";\n\n      for (j = 0; j < tmpStyle.length; j++) {\n        var cssProperty = tmpStyle[j].split(\":\");\n\n        if ($.trim(cssProperty[0]) != attrToAdd && $.trim(cssProperty[0]) != \"\") {\n          arrProperties.push(cssProperty[0] + \":\" + cssProperty[1] + \";\");\n        }\n        resultProperties = JSON.stringify(arrProperties).replace(/\\\",\"/g, ' ').replace(/\\[\"/g, ' ').replace(/\\\"]/g, ' ');\n      }\n\n      resultProperties = resultProperties == \"[]\" ? \"\" : resultProperties;\n\n      $this.attr('style', resultProperties + option + \";\");\n    } else if ($this.css(attrToAdd)) {\n      var tmpStyle = $this.css(attrToAdd);\n      var arrProperties = [];\n      var resultProperties = \"\";\n\n      arrProperties.push(option + \";\");\n\n      resultProperties = resultProperties == \"[]\" ? \"\" : resultProperties;\n\n      $this.attr('style', resultProperties + option + \";\");\n    }\n  }\n};\n\n/*\r\n    * Find element to make scroll top\r\n    */\nbizagi.util.scrollTop = function (canvas) {\n  if (canvas && canvas[0]) {\n    while (canvas[0].tagName !== \"HTML\" && canvas.css(\"overflow-y\") != \"scroll\" && canvas.css(\"overflow-y\") != \"auto\" && canvas.parent().length > 0) {\n      canvas = canvas.parent();\n    }\n  }\n  return canvas;\n};\n\n/*\r\n    * Sort a JSON array by attribute and order type (ascendant or descendant)\r\n    * example: data = [ {attr1:val1, attr2:val2} , {attr1:val3, attr2:val4 },... ]  , key = \"attr2\" , way = \"asc\"\r\n    */\nbizagi.util.sortJSON = function (data, key, way) {\n  return data.sort(function (a, b) {\n    var x = a[key];\n    var y = b[key];\n    if (way === 'asc') {\n      return x < y ? -1 : x > y ? 1 : 0;\n    }\n    if (way === 'desc') {\n      return x > y ? -1 : x < y ? 1 : 0;\n    }\n  });\n};\n\n/*\r\n    * Reducir formato numérico a notación abrevidad (K:1000 - M:1000000 - B:1000000000)\r\n    */\nbizagi.util.shortNumber = function (number) {\n  var newNumber = number.toString();\n  var lenghtNumber = newNumber.length;\n\n  if (lenghtNumber >= 4 && lenghtNumber < 7) {\n    newNumber = '+' + newNumber.charAt(0) + 'K';\n  } else if (lenghtNumber >= 7 && lenghtNumber < 10) {\n    newNumber = '+' + newNumber.charAt(0) + 'M';\n  } else if (lenghtNumber >= 10) {\n    newNumber = '+' + newNumber.charAt(0) + 'B';\n  }\n\n  return '&nbsp;&nbsp;&nbsp;' + newNumber;\n};\n\n/*\r\n    * Aplicar formato salto de linea\r\n    */\nbizagi.util.replaceLineBreak = function (string) {\n  return typeof string === \"string\" ? string.replace(/\\r\\n|\\r|\\n|<br>|<br\\/>/g, \"<br/>\") : string;\n};\n\n// http://shebang.brandonmintern.com/foolproof-html-escaping-in-javascript/\nbizagi.util.escapeHtml = function (str) {\n  var div = document.createElement('div');\n  div.appendChild(document.createTextNode(str));\n  return div.innerHTML;\n};\n\n/*\r\n    * Aplicar formato Tipo moneda\r\n    */\nbizagi.util.formatMonetaryCell = function (value) {\n  return bizagi.util.formatMonetaryValue(value);\n};\n\n/*\r\n    * Aplicar formato tipo decimal\r\n    */\nbizagi.util.formatDecimalCell = function (value) {\n  return bizagi.util.formatDecimalValue(value);\n};\n\n/**\r\n    * Add format to date value\r\n    */\nbizagi.util.formatDateValue = function (value) {\n  return bizagi.util.formatDateFromInvariantStringDate(value);\n};\n\n/**\r\n    * Add format to money value\r\n    * @param value\r\n    * @returns {*|string|string}\r\n    */\nbizagi.util.formatMonetaryValue = function (value) {\n  return bizagi.util.formatMoney(value, BIZAGI_DEFAULT_CURRENCY_INFO);\n};\n\n/**\r\n    * Add format for decimal value\r\n    * @param value\r\n    * @returns {*}\r\n    */\nbizagi.util.formatDecimalValue = function (value) {\n  var decimalFormat;\n  var externalDecimalFormat = {\n    decimalSymbol: BIZAGI_DEFAULT_CURRENCY_INFO.decimalSeparator,\n    digitGroupSymbol: BIZAGI_DEFAULT_CURRENCY_INFO.groupSeparator,\n    roundToDecimalPlace: BIZAGI_DEFAULT_CURRENCY_INFO.decimalDigits };\n\n  var defaultDecimalFormat = {\n    colorize: false,\n    decimalSymbol: \".\",\n    digitGroupSymbol: \",\",\n    groupDigits: true,\n    negativeFormat: \"(%s%n)\",\n    positiveFormat: \"%s%n\",\n    roundToDecimalPlace: \"2\",\n    symbol: \"\" };\n\n  decimalFormat = $.extend(defaultDecimalFormat, externalDecimalFormat);\n  var numberValue = bizagi.util.formatDecimal(value, decimalFormat);\n  if (bizagi.override.removeTrailingZeros === true) {\n    var positive = true;\n    if (numberValue.toString().indexOf(\")\") != -1) {\n      positive = false;\n      numberValue = numberValue.replace(\"(\", \"\").replace(\")\", \"\");\n    }\n    var re = new RegExp(\"(\" + BIZAGI_DEFAULT_CURRENCY_INFO.decimalSeparator + \"\\\\d*?[1-9])0+$\", \"g\");\n    numberValue = numberValue.replace(re, \"$1\");\n    re = new RegExp(\"\\\\\" + BIZAGI_DEFAULT_CURRENCY_INFO.decimalSeparator + \"0+$\", \"g\");\n    numberValue = numberValue.replace(re, \"\");\n\n\n    if (!positive) numberValue = \"(\" + numberValue + \")\";\n  }\n  return numberValue;\n};\n\n/*\r\n    * Crea notificacion de corta duracion, principalmente uilizada en para los procesos offline\r\n    */\nbizagi.util.showNotification = function (params) {\n  var params = params || {};\n  var div_sync = $('<div id=\"sync-notification\" class=\"bz-cm-icon\"></div>').text(params.text || \"\");\n  div_sync.appendTo($('body'));\n  div_sync.fadeIn(1500, function () {\n    div_sync.stop();\n  });\n\n  div_sync.fadeOut(2000, function () {\n    div_sync.remove();\n  });\n};\n\n/*\r\n    * Verificar el estado de la conexión\r\n    */\nbizagi.util.isModeOnline = function () {\n  return typeof bizagi.context.isOfflineForm !== \"undefined\" && !bizagi.context.isOfflineForm;\n};\n\nbizagi.util.dispose = function (obj) {\n  for (key in obj) {\n    if (_typeof(obj[key]) == \"object\") delete obj[key];\n    if (typeof obj[key] == \"function\") {obj[key] = null;delete obj[key];}\n  }\n};\n\nbizagi.util.arrayEach = function (array, callback) {\n  if (!!array) {\n    if (Object.prototype.toString.apply(array) === \"[object Array]\" && Object.prototype.toString.apply(callback) === \"[object Function]\") {\n      var index, value;\n      for (index in array) {\n        if (array.hasOwnProperty(index)) {\n          value = callback.call(array[index], index, array[index]);\n          if (value === false) {\n            return;\n          }\n        }\n      }\n    } else {\n      $.each(array, callback);\n    }\n  }\n};\n\n//remove all the character except the +, - and decimal point\nbizagi.util.getStandardNotation = function (number, decimalSymbol) {\n  var plusCharacter = '+';\n  var minusCharacter = '-';\n  var decimalSymbol = decimalSymbol || '.';\n  var expSymbol = 'e';\n  var tmp = '';\n  //remove all the character except the +, -, decimal point and the numbers\n  var decimalNumber = false;\n  var exponentialNumber = false;\n  number = (number.length > 0 ? number.toString().toLowerCase() : '').replace(/ /g, '');\n  for (var i = 0; i < number.length; i++) {\n    if ((number[i] === plusCharacter || number[i] === minusCharacter) && (i === 0 || number[i - 1] == expSymbol)) {\n      tmp += number[i];\n    } else if (!isNaN(Number(number[i]))) {\n      tmp += number[i];\n    } else if (number[i] === decimalSymbol && !decimalNumber) {\n      tmp += number[i];\n      decimalNumber = true;\n    } else if (number[i] === expSymbol && !exponentialNumber) {\n      tmp += number[i];\n      exponentialNumber = true;\n    }\n  }\n  return tmp;\n};\n//Return it in normalized scientific notation\nbizagi.util.scientificNotationFormat = function (number, decimalSymbol, sdLimit, expMinLimit, expMaxLimit) {\n  decimalSymbol = decimalSymbol || '.';\n  number = bizagi.util.getStandardNotation(number, decimalSymbol);\n  sdLimit = sdLimit > 0 ? sdLimit : 38;\n  expMinLimit = expMinLimit > 0 ? expMinLimit : -125;\n  expMaxLimit = expMaxLimit > 0 ? expMaxLimit : 125;\n  var expSimbol = 'e';\n  var sNregex = new RegExp('[0-9]+(' + decimalSymbol + '[0-9]+)?(e[+-]?[0-9]+)?');\n  var sNFormat = number.match(sNregex);\n\n  //get que prefix\n  var exp = 0;\n\n  var prefix = number[0] === '-' ? number[0] : '';\n  var originalPointIndex = 0;\n\n  number = number.replace(prefix, '');\n\n  //if the number is not in scientific notation\n  if (sNFormat && sNFormat[0] && sNFormat[2]) {\n    var tempParts = sNFormat[0] ? sNFormat[0].replace(sNFormat[2], '').split(decimalSymbol) : '';\n\n    var significantDigits = '';\n    var intPart = '';\n\n    //calculate significant digits\n    //remove zeros at the left\n    tempParts[0] = tempParts[0].replace(/^0+/g, '');\n\n    if (tempParts[0].length > 1) {\n      significantDigits = tempParts[0].slice(1);\n      originalPointIndex = significantDigits.length;\n      intPart = tempParts[0][0] || '';\n      significantDigits = significantDigits.concat(sNFormat[1] || '');\n    } else if (tempParts[0].length === 1) {\n      intPart = tempParts[0][0] || '';\n      significantDigits = significantDigits.concat(tempParts[1] || '');\n    } else {\n      originalPointIndex = tempParts[1].length;\n      tempParts[1] = tempParts[1].replace(/^0+/g, '');\n      originalPointIndex = tempParts[1].length - 1 - originalPointIndex;\n      intPart = tempParts[1][0];\n      significantDigits = tempParts[1].slice(1);\n    }\n    //remove . and zeros from significant digits\n    significantDigits = significantDigits.replace(decimalSymbol, '').replace(/0+$/g, '');\n\n    if (significantDigits.length >= sdLimit) {\n      significantDigits = significantDigits.slice(0, sdLimit - 1);\n    }\n    exp = Number(sNFormat[2].replace(expSimbol, '')) + originalPointIndex;\n    exp = exp > expMaxLimit ? expMaxLimit : exp < expMinLimit ? expMinLimit : exp;\n    return prefix + intPart + (significantDigits ? decimalSymbol + significantDigits : '') + expSimbol + (exp > 0 ? '+' + exp : exp);\n  } else if (number) {\n\n    originalPointIndex = number.indexOf(decimalSymbol);\n    var from = 0;\n    var to = number.length - 1;\n\n    //remove decimal point\n    number = number.replace(decimalSymbol, '');\n\n    //from\n    var i = from;\n    while (!significantFlag) {\n      if (number[i] !== '0' && number[i] !== decimalSymbol) {\n        significantFlag = true;\n        from = i;\n      } else {i++;}\n    }\n    //to\n    var significantFlag = false;\n    var j = to;\n    while (!significantFlag) {\n      if (number[j] !== '0' && number[j] !== decimalSymbol && '-') {\n        significantFlag = true;\n        to = j + 1;\n      } else {j--;}\n    }\n    to = to > sdLimit + from ? sdLimit + from : to;\n    if (originalPointIndex !== -1) {\n      //find significant digits\n      var significantFlag = false;\n      var significantDigits = number.slice(from, to);\n      var pointIndex = from + 1;\n      exp = originalPointIndex - pointIndex;\n      if (significantDigits.length > 0 && !isNaN(Number(significantDigits[0]))) {\n        return prefix + significantDigits[0] + (significantDigits.length > 1 ? decimalSymbol + significantDigits.slice(1) : '') + expSimbol + (exp > 0 ? '+' + exp : exp);\n      } else {return '0';}\n\n    } else {\n      //Int numbers\n      var firstDigit = number.slice(from, from + 1);\n      var restDigits = number.slice(from + 1, number.length);\n      exp = restDigits.length;\n      restDigits = restDigits.replace(/0+$/g, '');\n      if (restDigits.length > sdLimit) {\n        restDigits = number.slice(from + 1, sdLimit + from);\n      }\n      if (Number(firstDigit)) {\n        return prefix + firstDigit + (restDigits.length > 0 ? decimalSymbol + restDigits : '') + expSimbol + (exp > 0 ? '+' + exp : exp);\n      } else {return '0';}\n    }\n  } else {return '';}\n};\n\n/**\r\n    * Remove all backslashes that represent scape of characters\r\n    */\nbizagi.util.stripslashes = function (str) {\n  return str.replace(/\\\\'/g, '\\'').replace(/\\\"/g, '\"').replace(/\\\\\\\\/g, '\\\\').replace(/\\\\0/g, '\\0');\n};\n\n/*\r\n    * Validates if the text is a valid opening and closing tags, including classes\r\n    */\nbizagi.util.isHTMLValidText = function (text) {\n  var ex = new RegExp(/<(.|\\n)*?>/g);\n  return ex.test(text);\n};\n\nbizagi.util.resetData = function () {\n  var obj = JSON.parse(sessionStorage.getItem(\"bizagiAuthentication\"));\n  sessionStorage.removeItem(\"bizagiAuthentication\");\n  $.extend(obj, { isAuthenticate: \"false\" });\n  sessionStorage.setItem(\"bizagiAuthentication\", JSON.encode(obj));\n};\n\nbizagi.util.changeData = function (params) {\n  var obj = JSON.parse(sessionStorage.getItem(\"bizagiAuthentication\"));\n  sessionStorage.removeItem(\"bizagiAuthentication\");\n  $.extend(obj, params);\n  sessionStorage.setItem(\"bizagiAuthentication\", JSON.encode(obj));\n};\n\n// ------------------------------------------------------------------------\n// UTILS FOR MOBILE DEVICE\n// ------------------------------------------------------------------------\n\nbizagi.util.isMobileDevice = function (device) {\n  device = device || bizagi.detectDevice();\n\n  return [\n  \"smartphone_ios\",\n  \"smartphone_ios_native\",\n  \"smartphone_android\",\n  \"smartphone_android_native\",\n  \"tablet\",\n  \"tablet_ios\",\n  \"tablet_ios_native\",\n  \"tablet_android\",\n  \"tablet_android_native\"].\n  indexOf(device) > -1;\n};\n\n/**\r\n    * Check is native mobile device\r\n    * @returns {}\r\n    */\nbizagi.util.isNativeMobileDevice = function (device) {\n  return bizagi.util.isMobileDevice(device) && bizagi.util.isNativePluginSupported();\n};\n\n/** \r\n    * Verify mobile device type\r\n    * @returns {} \r\n    */\nbizagi.util.isTabletDevice = function (device) {\n  device = device || bizagi.util.detectDevice();\n\n  return [\n  \"tablet\",\n  \"tablet_ios\",\n  \"tablet_ios_native\",\n  \"tablet_android\",\n  \"tablet_android_native\"].\n  indexOf(device) > -1;\n};\n\n/**\r\n    * Tablet android\r\n    * @returns {} \r\n    */\nbizagi.util.isAndroidTabletDevice = function (device) {\n  device = device || bizagi.util.detectDevice();\n\n  return bizagi.util.isTabletDevice() && device.indexOf(\"android\") !== -1;\n};\n\n/**\r\n    * Tablet iOS\r\n    * @returns {} \r\n    */\nbizagi.util.isiOSTabletDevice = function (device) {\n  device = device || bizagi.util.detectDevice();\n\n  return bizagi.util.isTabletDevice() && !(device.indexOf(\"android\") === -1);\n};\n\n\n/**\r\n    * Verify mobile device type\r\n    * @returns {}\r\n    */\nbizagi.util.isSmartphoneDevice = function (device) {\n  device = device || bizagi.util.detectDevice();\n\n  return [\n  \"smartphone_ios\",\n  \"smartphone_ios_native\",\n  \"smartphone_android\",\n  \"smartphone_android_native\"].\n  indexOf(device) > -1;\n};\n\n/**\r\n    * Smartphone android\r\n    * @returns {} \r\n    */\nbizagi.util.isAndroidSmartphoneDevice = function (device) {\n  device = device || bizagi.util.detectDevice();\n\n  return bizagi.util.isSmartphoneDevice() && device.indexOf(\"android\") !== -1;\n};\n\n/**\r\n    * Smartphone iOS\r\n    * @returns {} \r\n    */\nbizagi.util.isiOSSmartphoneDevice = function (device) {\n  device = device || bizagi.util.detectDevice();\n\n  return bizagi.util.isSmartphoneDevice() && device.indexOf(\"ios\") !== -1;\n};\n\n/**\r\n    * Check is offline form\r\n    * @param {} container \r\n    * @returns {} \r\n    */\nbizagi.util.isOfflineForm = function (params) {\n  if (!bizagi.util.isMobileDevice() || typeof params === \"undefined\")\n  return false;\n\n  var context = params.context || null;\n  var container = params.container || null;\n\n  var formContainer = container !== null ?\n  container : context !== null ? context.getFormContainer() : null;\n\n  if (formContainer === null)\n  return false;\n\n  var formParams = formContainer.getParams() || {};\n  var isOfflineForm = typeof formParams.isOfflineForm !== \"undefined\" &&\n  bizagi.util.parseBoolean(formParams.isOfflineForm);\n\n  return isOfflineForm;\n};\n\nbizagi.util.detectAndroidVersion = function () {\n  var indexAndroid = navigator.userAgent.toLowerCase().indexOf(\"android\");\n  var androidVersion = navigator.userAgent.toLowerCase().substring(indexAndroid + 8, indexAndroid + 13);\n  androidVersion = androidVersion.replaceAll(\".\", \"\");\n  return Number(androidVersion);\n};\n\nbizagi.util.getPathUrl = function (url) {\n  var solvedUrl = \"\";\n  var locationParts = location.pathname.split(\"/\");\n  var basePath = location.protocol + \"//\" + location.host;\n\n  if (BIZAGI_PATH_TO_BASE[0] == \"/\") {\n    solvedUrl = basePath + BIZAGI_PATH_TO_BASE + url;\n  } else {\n    var pathToBaseBackwards = BIZAGI_PATH_TO_BASE.split(\"../\").length;\n    for (var i = 0, l = locationParts.length; i < l - pathToBaseBackwards; i++) {\n      basePath += locationParts[i] + \"/\";\n    }\n\n    basePath = basePath[basePath.length - 1] === \"/\" ? basePath : basePath + \"/\";\n    solvedUrl = basePath + url;\n  }\n  return solvedUrl;\n};\n\n/**\r\n    * Get Android version\r\n    * @returns {} \r\n    */\nbizagi.util.getAndroidVersion = function () {\n  var userAgent = navigator.userAgent.toLowerCase();\n  var match = userAgent.match(/android\\s([0-9\\.]*)/);\n\n  return match ? parseFloat(match[1]) : false;\n};\n\n/**\r\n    * Get image path to android device\r\n    * @param {} image \r\n    * @returns {} \r\n    */\nbizagi.util.mobileImagePath = function (image) {\n  var dataImage = image;\n  var version = bizagi.util.getAndroidVersion();\n\n  if (!version)\n  return dataImage;\n\n  if (dataImage.substring(0, 21) === \"content://com.android\" && version <= 4.4) {\n    var photoSplit = dataImage.split(\"%3A\");\n    if (photoSplit.length > 1) {\n      dataImage = \"content://media/external/images/media/\" + photoSplit[1];\n    } else {\n      photoSplit = dataImage.split(\"/\");\n      dataImage = \"content://media/external/images/media/\" + photoSplit[photoSplit.length - 1];\n    }\n  }\n\n  return dataImage;\n};\n\n/**\r\n    * Validate resource \r\n    * @param {} resource resource name\r\n    * @returns {} \r\n    */\nbizagi.util.isValidResource = function (resource) {\n  if (!bizagi.localization) return false;\n  return bizagi.localization.getResource(resource) !== resource;\n};\n\n/***\r\n    * Transform base64 image to blob\r\n    * @b64Data \r\n    * @contentType \r\n    * @sliceSize \r\n    */\nbizagi.util.b64toBlob = function (b64Data, contentType, sliceSize) {\n  contentType = contentType || '';\n  sliceSize = sliceSize || 512;\n\n  var byteCharacters = atob(b64Data);\n  var byteArrays = [];\n\n  for (var offset = 0; offset < byteCharacters.length; offset += sliceSize) {\n    var slice = byteCharacters.slice(offset, offset + sliceSize);\n\n    var byteNumbers = new Array(slice.length);\n    for (var i = 0; i < slice.length; i++) {\n      byteNumbers[i] = slice.charCodeAt(i);\n    }\n\n    var byteArray = new Uint8Array(byteNumbers);\n\n    byteArrays.push(byteArray);\n  }\n\n  var blob = new Blob(byteArrays, { type: contentType });\n  return blob;\n};\n\n/**\r\n    * Converts an string to a byte array, util in old browsers requests\r\n    * @param str\r\n    */\nbizagi.util.stringToByteArray = function (str) {\n  var byteArray = new Uint8Array(str.length);\n  for (var i = 0; i < str.length; i++) {\n    byteArray[i] = str.charCodeAt(i) & 0xff;\n  }\n  return byteArray;\n};\n\n// ------------------------------------------------------------------------\n// NATIVE-HYBRID ENVIRONMENT\n// ------------------------------------------------------------------------\n\n/** \r\n * Verify the offline forms is enabled\r\n * @returns {} \r\n */\nbizagi.util.hasOfflineFormsEnabled = function () {\n  return typeof BIZAGI_ENABLE_OFFLINE_FORMS !== \"undefined\" && bizagi.util.parseBoolean(BIZAGI_ENABLE_OFFLINE_FORMS) === true;\n};\n\n/**\r\n    * \r\n    * Verify the flat design is enabled\r\n    * @returns {} \r\n    */\nbizagi.util.isFlatDesignEnabled = function () {\n  return typeof BIZAGI_ENABLE_FLAT !== \"undefined\" && bizagi.util.parseBoolean(BIZAGI_ENABLE_FLAT) === true;\n};\n\n/**\r\n    * Validate the mobile grid is enabled\r\n    * @returns {}\r\n    */\nbizagi.util.isMobileGridEnabled = function () {\n  return typeof BIZAGI_ENABLE_MOBILE_GRID !== \"undefined\" && bizagi.util.parseBoolean(BIZAGI_ENABLE_MOBILE_GRID) === true;\n};\n\n/**\r\n    * Validate the mobile grid is enabled\r\n    * @returns {}\r\n    */\nbizagi.util.isNativeHeaderEnabled = function () {\n  return typeof NATIVE_HEADER_ENABLE !== \"undefined\" && bizagi.util.parseBoolean(NATIVE_HEADER_ENABLE) === true;\n};\n\n/**\r\n    * Validate the Quick search is enabled\r\n    * @returns {}\r\n    */\nbizagi.util.isQuickSearchEnabled = function () {\n  return typeof BIZAGI_ENABLE_QUICK_SEARCH !== \"undefined\" && bizagi.util.parseBoolean(BIZAGI_ENABLE_QUICK_SEARCH) === true;\n};\n\n/** \r\n    * Verify the OAuth2 is enabled\r\n    * @returns {} \r\n    */\nbizagi.util.isOAuth2Enabled = function () {\n  return typeof BIZAGI_AUTH_TYPE !== \"undefined\" && BIZAGI_AUTH_TYPE === \"OAuth\";\n};\n\n/**\r\n    * Get native component\r\n    * @returns {}\r\n    */\nbizagi.util.getNativeComponent = function () {\n  return typeof BIZAGI_NATIVE_COMPONENT !== \"undefined\" ? BIZAGI_NATIVE_COMPONENT : \"\";\n};\n\n/**\r\n    * Check server version\r\n    * @returns {}\r\n    */\nbizagi.util.isVersionSupported = function () {\n  var supported = true;\n\n  if (typeof BIZAGI_SERVER_VERSION !== \"undefined\" && !bizagi.util.isEmpty(BIZAGI_SERVER_VERSION)) {\n    var version = BIZAGI_SERVER_VERSION.match(/\\d+\\.\\d+/);\n    supported = version ? parseFloat(version.shift()) >= 11.0 : true;\n  }\n\n  return supported;\n};\n\n/**\r\n    * Cordova componet is supported\r\n    * @returns {} \r\n    */\nbizagi.util.isCordovaSupported = function () {\n  return typeof cordova !== \"undefined\";\n};\n\n/**\r\n    * Native plugin of Cordova is supported \r\n    * @returns {} \r\n    */\nbizagi.util.isNativePluginSupported = function () {\n  return typeof bizagiapp !== \"undefined\";\n};\n\n/**\r\n    * Tablet native\r\n    * @returns {} \r\n    */\nbizagi.util.isTabletNativeSupported = function () {\n  return typeof bizagiapp !== \"undefined\" && bizagi.util.isTabletDevice();\n};\n\n/**\r\n    * Smartphone native\r\n    * @returns {} \r\n    */\nbizagi.util.isSmartphoneNativeSupported = function () {\n  return typeof bizagiapp !== \"undefined\" && bizagi.util.isSmartphoneDevice();\n};\n\n/**\r\n    * Enables accesory bar\r\n    */\nif (bizagi.util.isNativePluginSupported() && window.cordova && window.cordova.plugins.Keyboard) {\n  cordova.plugins.Keyboard.hideKeyboardAccessoryBar(false);\n};\n\n/**\r\n    * Verify real device\r\n    * @returns {} \r\n    */\nbizagi.util.detectRealDevice = function () {\n  var settedDevice = typeof BIZAGI_DEFAULT_DEVICE !== \"undefined\" && !bizagi.util.isEmpty(BIZAGI_DEFAULT_DEVICE) ?\n  BIZAGI_DEFAULT_DEVICE : null;\n\n  BIZAGI_DEFAULT_DEVICE = \"\";\n  var device = bizagi.detectDevice();\n  BIZAGI_DEFAULT_DEVICE = settedDevice;\n\n  return device;\n};\n\n/**\r\n    * Method to detect Android visitors\r\n    * @returns {} \r\n    */\nbizagi.util.isAndroid = function () {\n  return navigator.userAgent.toLowerCase().indexOf(\"android\") > -1;\n};\n\nbizagi.util.isAndroidDevice = function () {\n  var device = bizagi.util.detectDevice();\n  return device.indexOf(\"android\") > -1;\n};\n\nbizagi.util.isiOSDevice = function () {\n  var device = bizagi.util.detectDevice();\n  return device.indexOf(\"android\") === -1;\n};\n\n\n/**\r\n    * Get server channel\r\n    * @returns {}\r\n    */\nbizagi.util.getChannelType = function () {\n  if (typeof BIZAGI_SERVER_CHANNEL !== \"undefined\" && !bizagi.util.isEmpty(BIZAGI_SERVER_CHANNEL)) {\n    return BIZAGI_SERVER_CHANNEL;\n  }\n  return bizagi.loader.channel || \"\";\n};\n\n/**\r\n    * Check data url\r\n    * @param {} data \r\n    * @returns {} \r\n    */\nbizagi.util.isDataUrl = function (data) {\n  var regex = /^\\s*data:([a-z]+\\/[a-z0-9-+.]+(;[a-z-]+=[a-z0-9-]+)?)?(;base64)?,([a-z0-9!$&',()*+;=\\-._~:@\\/?%\\s]*)\\s*$/i;\n\n  try {\n    return !!data.toString().match(regex);\n  } catch (error) {}\n\n  return false;\n};\n\n/**\r\n    * Get valid data url\r\n    * @param {} data\r\n    * @returns {}\r\n    */\nbizagi.util.getDataUrl = function (properties) {\n  var currentUrl;\n\n  try {\n    if (typeof properties.value !== \"undefined\" && !bizagi.util.isEmpty(properties.value)) {\n      var data = properties.value;\n      var url = data.value || data;\n\n      if (Array.isArray(url)) {\n        var tempUrl = url.shift();\n        currentUrl = Array.isArray(tempUrl) ? tempUrl.join(\"\") : tempUrl;\n      } else {\n        currentUrl = url;\n      }\n    } else {\n      currentUrl = properties.url || \"\";\n    }\n\n    currentUrl = !bizagi.util.isEmpty(currentUrl) ? \"data:image/png;base64,\" + currentUrl.replace(/^data:.*;base64,/, \"\") : \"\";\n\n    if (currentUrl && currentUrl.indexOf(\"Invalid case id\") !== -1)\n    currentUrl = \"\";\n\n  } catch (error) {\n    currentUrl = \"\";\n  }\n\n  return currentUrl;\n};\n\n/**\r\n    * Get response message of services\r\n    * @param {} data\r\n    * @returns {}\r\n    */\nbizagi.util.processFailMessage = function (data) {\n  var message = data || {};\n\n  try {\n    message = typeof message == \"string\" ? JSON.parse(message) : message;\n    message = message.responseText || message.message || message;\n  } catch (e) {\n    message = data;\n  }\n\n  return message;\n};\n\n/**\r\n    * Get object jSON\r\n    */\nbizagi.util.getErrorFormatted = function (str) {\n  var error = str;\n\n  if (!error) return str;\n\n  if (typeof error == \"string\") {\n    try {\n      error = JSON.parse(error);\n    } catch (e) {\n      error = {\n        type: \"error\",\n        code: \"code\",\n        message: str };\n\n    }\n  }\n\n  if (_typeof(error) == \"object\" && (error.message || error.statusText)) {\n    return {\n      type: error.type || \"error\",\n      code: error.code || error.errorCode || error.errorType || error.statusText || \"code\",\n      message: error.message };\n\n  } else {\n    if (error && error.length && error.length >= 1) error = error[0];\n    if (error.responseText) error = error.responseText;\n    if (error.error) error = error.error;\n  }\n\n  return bizagi.util.getErrorFormatted(error);\n};\n/**\r\n    * Disable and enable workportal menu from live process\r\n    */\nvar tmp_block_header = \"<div class='blockHeaderByLiveProcess'></div>\";\nbizagi.util.disableWorkPortalMenu = function () {\n  var blockHeight = $(\"body\").find(\"#ui-bizagi-wp-menu\").height();\n  $(tmp_block_header).prependTo(\"body\");\n  $(\"body\").find(\".blockHeaderByLiveProcess\").css({ \"position\": \"absolute\", \"width\": \"100%\", \"height\": blockHeight + \"px\", \"background\": \"gray\", \"opacity\": \"0.9\", \"z-index\": \"101\" });\n};\n\nbizagi.util.enableWorkPortalMenu = function () {\n  $(\"body\").find(\".blockHeaderByLiveProcess\").detach();\n};\n\n/**\r\n    * this method activates the section of the menu that is sent in the idMenu variable\r\n    */\nbizagi.util.enableMenuSection = function (idMenu) {\n  var menu = new bizagi.workportal.controllers.menu();\n  menu.setActiveSection.apply($(\"#main_menu li#\" + idMenu)[0]);\n};\n\nbizagi.util.getURLWithASlashAtTheEnd = function (url) {\n  var getLastChar = function getLastChar(stringValue) {\n    return stringValue.substr(stringValue.length - 1);\n  };\n  return getLastChar(url) === '/' ? url : url + '/';\n};\n\n/**\r\n    * create an Iframe if doesn't exist for download a file\r\n    * validate if the Maintenance Window has started and redirect the user\r\n    * validate if an error is returned\r\n    * rejects defer on download fails\r\n    * IMPORTANT: defer never resolves (technical restriction)\r\n    * @param {String} url \r\n    * @param {Boolean} isCompleteUrl \r\n    * @param {Boolean} showModalOnFail \r\n    */\nbizagi.util.downloadFile = function (url, isCompleteUrl, showModalOnFail) {\n  var _defer = new $.Deferred(),\n  _showModalOnFail = showModalOnFail === undefined ? true : showModalOnFail,\n  _firstURlPart = isCompleteUrl ? \"\" : bizagi.util.getURLWithASlashAtTheEnd(bizagiConfig.applicationUrl),\n  _urlDownload = _firstURlPart + url,\n  _iframeID = \"iframe-download\",\n  _iframeExists = $('#' + _iframeID).length !== 0,\n  _reject = function _reject(jsonResponse, showModal) {\n    if (showModal)\n    bizagi.modalError.show(jsonResponse.message, undefined, false);\n    _defer.reject(jsonResponse);\n  },\n  _onCantDownload = function _onCantDownload() {\n    var that = $(this)[0],\n    defaultMessage = bizagi.localization.getResource(\"workportal-general-error-message-contact-administrator\"),\n    text = bizagi.util.tryCatch(\n    function () {return $(that.contentDocument).text();},\n    defaultMessage),\n\n    isMaintenanceWindow = text.indexOf(\"HTTP Error 503\") !== -1,\n    jsonResponse = bizagi.util.tryCatch(\n    function () {return JSON.parse(text);},\n    {\n      code: \"error\",\n      status: \"error\",\n      message: text === \"\" ? defaultMessage : text }),\n\n\n    showModal = _showModalOnFail && !isMaintenanceWindow;\n    if (isMaintenanceWindow)\n    bizagiConfig.maintenanceWindows.start();\n    _reject(jsonResponse, showModal);\n  },\n  _createIframe = function _createIframe() {\n    var iframe = $(\"<iframe/>\");\n    iframe.attr({\n      style: \"visibility:hidden;display:none\",\n      id: _iframeID }).\n\n    appendTo('body');\n    iframe[0].onload = _onCantDownload;\n  };\n\n  if (!_iframeExists)\n  _createIframe();\n  $('#' + _iframeID).attr(\"src\", _urlDownload);\n  return _defer;\n};\n\n/**\r\n    * create an Iframe if doesn't exist for download a excel file\r\n    * @param {String} url \r\n    * @param {} params \r\n    */\nbizagi.util.downloadFileByPOST = function (url, params) {\n  if ($('#iframe-download').length !== 0) {//If the iframe already exists, remove it\n    $('#iframe-download').remove();\n  }\n\n  $(\"<iframe/>\").attr({\n    style: \"visibility:hidden;display:none\",\n    id: \"iframe-download\" }).\n  appendTo('body');\n\n  var inputValues = \"\";\n  for (var i = 0; i < params.length; i++) {\n    inputValues = inputValues + \"<input type='text' name='\" + params[i].name + \"' value='\" + params[i].value + \"'>\";\n  }\n\n  var formPOST = \"<form id='formPOST' action='\" + url + \"' method='POST'>\" +\n  inputValues +\n  \"</form>\";\n\n  $('#iframe-download').contents().find(\"body\").append(formPOST);\n  if (bizagi.util.isIE11()) {\n    bizagi.showErrorAlertDialog = false;\n    $.ajax({ type: \"POST\",\n      url: url,\n      data: params,\n      dataType: 'text' }).\n    then(function () {\n      $(\"#formPOST\", $('#iframe-download').contents()).submit();\n    });\n  } else {\n    $(\"#formPOST\", $('#iframe-download').contents()).submit();\n  }\n};\n\nbizagi.util.executeActionRoutingFromWorkportal = function (idCase, idWorkItem) {\n  bizagi.workportal.controllers.menu.prototype.publish(\"executeAction\", {\n    action: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,\n    idCase: idCase,\n    idWorkItem: idWorkItem });\n\n};\n\n/**\r\n   * Gets the final message when the user is offline or online (In Offline forms)\r\n   * @param {} state \r\n   * @returns {} The corresponding message depending on the case\r\n   */\n\nbizagi.util.getMessageFromNetworkState = function (state) {\n  if (state) {\n    return bizagi.localization.getResource(\"render-without-globalform-offline-userOnline\", \"The case has been created successfully, please wait until the server synchronizes\");\n  } else {\n    return bizagi.localization.getResource(\"render-without-globalform-offline\", \"Your offline case has been created successfully. It will synchronized as soon as you go online.\");\n  }\n};\n\n/**\r\n    * DOMPurify sanitizes HTML and prevents XSS attacks\r\n    * @param str\r\n    * @returns {null|*|string}\r\n    */\nbizagi.util.sanitizeHTML = function (str) {\n  var value = typeof str !== \"undefined\" && str !== null ? str.toString() : str;\n  var sanified = DOMPurify.sanitize(value);\n  var decode = document.createElement(\"div\");\n\n  decode.innerHTML = sanified;\n\n  return decode.childNodes.length === 0 ? \"\" : String(decode.childNodes[0].nodeValue);\n};\n\nbizagi.util.arrayUnique = function (array) {\n  var items = array.concat();\n\n  for (var i = 0, length = items.length; i < length; ++i) {\n    for (var j = i + 1; j < length; ++j) {\n      if (items[i] === items[j]) {\n        items.splice(j -= 1, 1);\n      }\n\n    }\n  }\n\n  return items;\n};\n\n\n/**\r\n    * Debounce\r\n    * Taken from https://davidwalsh.name/javascript-debounce-function\r\n    * Return a function, that, as long as it continues to be invoked, will\r\n    * not be triggered. The function will be called after it stops being\r\n    * called for 'wait' milliseconds. If 'immediate' is passed, trigger the\r\n    * function on the leading edge, instead of the trailing.\r\n    * @param {} func\r\n    * @param {} wait\r\n    * @param {} immediate\r\n    * @returns {}\r\n    */\nbizagi.util.debounce = function (func, wait, immediate) {\n  var timeout;\n  return function () {\n    var context = this,\n    args = arguments;\n    var later = function later() {\n      timeout = null;\n      if (!immediate) {\n        return func.apply(context, args);\n      }\n    };\n    var callNow = immediate && !timeout;\n    clearTimeout(timeout);\n    timeout = setTimeout(later, wait || 200);\n    if (callNow) {\n      return func.apply(context, args);\n    }\n  };\n};\n\n/**\r\n    * Return a function, that, as long as it continues to be invoked, will\r\n    * not be triggered. The function will be called after it stops being\r\n    * called for 'wait' milliseconds. If 'immediate' is passed, trigger the\r\n    * function on the leading edge, instead of the trailing.\r\n    * @param {} func\r\n    * @param {} wait\r\n    * @param {} immediate\r\n    * @returns {}\r\n    */\nbizagi.util.debounce2 = function (func, wait, immediate) {\n  var self = this;\n  var timeout;\n  var fn = function fn() {\n    var context = this,\n    args = arguments;\n    var later = function later() {\n      timeout = null;\n      if (!immediate) {\n        return func.apply(context, args);\n      }\n    };\n    var callNow = immediate && !timeout;\n    clearTimeout(timeout);\n    timeout = setTimeout(later, wait || 200);\n    if (callNow) {\n      return func.apply(context, args);\n    }\n  };\n  return {\n    timeout: timeout,\n    cancel: function cancel() {\n      clearTimeout(timeout);\n    },\n    fire: function fire() {\n      fn.call(self, arguments);\n    } };\n\n};\n\n/**\r\n    * Validate if the mobile image editor is enabled\r\n    * @returns {}\r\n    */\nbizagi.util.isNativeImageEditorSupported = function () {\n  return bizagi.util.isNativePluginSupported() && bizagi.util.isiOSDevice() && bizagi.override.enableImageEditor;\n};\n/**\r\n    * Error Message\r\n    */\nbizagi.util.errorMessage = function (message) {\n  return \"<div class=\\\"admin-stakeholder-message\\\"> \" +\n  \"<i class=\\\"bz-wp-empty__img\\\"></i> \" +\n  \"<p class=\\\"bz-wp-empty__info bz-wp-empty__info--first\\\"> \" +\n  message +\n  \"</p></div>\";\n};\n\n\n/**\r\n    * Validate URL \r\n    */\nbizagi.util.validateUrlWellFormed = function (url) {\n  var patternToValidateUrl = /^((http|https|ftp):\\/\\/)/,\n  urlWithProtocol = patternToValidateUrl.test(url) ? url : \"http://\" + url,\n  nodeWithUrl = document.createElement('a');\n  nodeWithUrl.setAttribute('href', urlWithProtocol);\n  var cleanNodeWithUrl = DOMPurify.sanitize(nodeWithUrl, { IN_PLACE: true }),\n  urlWithoutSpaces = url ? url.replace(/ /g, \"\") : \"\";\n  return bizagi.util.isEmpty(urlWithoutSpaces) ? null : cleanNodeWithUrl.href;\n};\n\n/**\r\n    * Replace line breaks for html line breaks\r\n    * @param data\r\n    * @returns {string}\r\n    */\nbizagi.util.encodeHtmlText = function (data) {\n  var value = data || \"\";\n  var valueToDisplay = \"\";\n\n  if (typeof value === \"string\") {\n    var decodedDisplayValue = bizagi.util.decodeURI(value);\n\n    valueToDisplay = bizagi.util.encodeString(decodedDisplayValue);\n  }\n\n  return valueToDisplay;\n};\n\n/**\r\n    * Replace line breaks for html line breaks\r\n    * @returns {string}\r\n    * @param str\r\n    */\nbizagi.util.encodeString = function (str) {\n  var result = str || \"\";\n\n  result = result.replaceAll(\"&\", \"&amp;\");\n  result = result.replaceAll(\"$\", \"&#36;\");\n  result = result.replaceAll(\"<\", \"&lt;\").replaceAll(\">\", \"&gt;\");\n  result = result.replaceAll(\"\\\"\", \"&#34;\").replaceAll(\"'\", \"&#39;\").replaceAll(\"/\", \"&#47;\");\n  result = result.replace(/([^>\\r\\n]?)(\\r\\n|\\n\\r|\\r|\\n)/g, \"$1<br />$2\");\n\n  return result;\n};\n\n/**\r\n    * Set Caret position \r\n    * Set the caret in specific position of an element type input\r\n    * @param {} func, position, input element \r\n    * @returns {} The function not return any value.\r\n    */\nbizagi.util.setCaretPosition = function (pos, ctrl) {\n  var self = this;\n\n  // Modern browsers\n  if (ctrl.setSelectionRange) {\n    ctrl.focus();\n    ctrl.setSelectionRange(pos, pos);\n\n    // IE8 and below\n  } else if (ctrl.createTextRange) {\n    var range = ctrl.createTextRange();\n    range.collapse(true);\n    range.moveEnd('character', pos);\n    range.moveStart('character', pos);\n    range.select();\n  }\n};\n\n\n/**\r\n    * Get position of caret\r\n    * Get the position of caret in a specific element input\r\n    * @param {} func, input element \r\n    * @returns {} Return the position of caret in an element input\r\n    */\nbizagi.util.getCaretPosition = function (oField) {\n\n  // Initialize\n  var iCaretPos = 0;\n\n  // IE Support\n  if (document.selection) {\n\n    // Set focus on the element\n    oField.focus();\n\n    // To get cursor position, get empty selection range\n    var oSel = document.selection.createRange();\n\n    // Move selection start to 0 position\n    oSel.moveStart('character', -oField.value.length);\n\n    // The caret position is selection length\n    iCaretPos = oSel.text.length;\n  } else if (oField.selectionStart || oField.selectionStart == '0') // Firefox support\n    iCaretPos = oField.selectionStart;\n\n  // Return results\n  return iCaretPos;\n};\n\n/**\r\n    * To escape values\r\n    * @param {} value \r\n    * @returns {} \r\n    */\nbizagi.util.escapeRegex = function (value) {\n  value = value || \"\";\n\n  return value.replace(/([\\^\\$\\(\\)\\[\\]\\{\\}\\*\\.\\+\\?\\|\\\\])/gi, \"\\\\$1\");\n};\n\n/**\r\n    * Function to get a featureObject by path within the global bizagiConfig.features object. Example: \"userService.v1.enabled\"\r\n    */\nbizagi.util.getFeatureObject = function (path) {\n  var arr = path.split('.');\n  this.featureObjectCache = this.featureObjectCache || {};\n\n  function getFeatureObjectIte(arr) {\n    var features = bizagi.util.getConfigFeatures();\n\n    if (typeof path !== \"string\" || typeof features == \"undefined\") return;\n\n    var pivot = features;\n    for (var i = 0, len = arr.length; i < len; i++) {\n      pivot = pivot[arr[i]];\n      if (typeof pivot === \"undefined\") return;\n    }\n    return pivot;\n  };\n  if (path in this.featureObjectCache) {\n    return this.featureObjectCache[path];\n  } else {\n    return this.featureObjectCache[path] = getFeatureObjectIte(arr);\n  }\n};\n\n/**\r\n    * Load features from mobile\r\n    */\nbizagi.util.getConfigFeatures = function () {\n  var bizagiConfiguration = window.bizagiConfig || bizagiConfig || {};\n\n  if (bizagi.util.isMobileDevice() && typeof BIZAGI_MOBILE_FEATURES !== \"undefined\" && !bizagi.util.isEmpty(BIZAGI_MOBILE_FEATURES)) {\n    bizagiConfiguration.features = JSON.parse(BIZAGI_MOBILE_FEATURES || \"{}\");\n  }\n\n  return bizagiConfiguration.features;\n};\n\n/**\r\n    * Reset features flag\r\n    */\nbizagi.util.resetConfigFeatures = function () {\n  bizagi.util.featureObjectCache = undefined;\n};\n\n/**\r\n    * Check fail request\r\n    * @param result\r\n    * @returns {*|boolean}\r\n    */\nbizagi.util.isFailResponse = function (result) {\n  return result && (result.type && result.type === \"error\" || result.status && result.status === \"error\" || result.code && result.code === \"UNKNOWN_ERROR\");\n};\n\n/**\r\n    * Formats value of each item\r\n    * @param {string, boolean or array} value\r\n    * @example\r\n    * value = \"string\" => \"string\"\r\n    * value = true => \"yes\" or \"si\", the localized value\r\n    * value = false => \"no\", the localized value\r\n    * value = [\"string 1\", \"string 2\"] => \"string 1 - string 2\"\r\n    * @returns {string}\r\n    */\nbizagi.util.formatItem = function (value) {\n  if (value !== undefined && value !== null) {\n    if ($.isArray(value)) {\n\n      for (var i = 0, length = value.length; i < length; i++) {\n        if (value[i] != null && typeof value[i] == \"boolean\") {\n          if (bizagi.util.parseBoolean(value[i]) === true) {\n            value[i] = bizagi.localization.getResource(\"render-boolean-yes\");\n\n          } else if (bizagi.util.parseBoolean(value[i]) === false) {\n            value[i] = bizagi.localization.getResource(\"render-boolean-no\");\n          }\n        }\n        value[i] = bizagi.util.sanitizeHTML(value[i]);\n      }\n\n      return value.join(\" - \");\n    } else {\n      return bizagi.util.sanitizeHTML(value);\n    }\n  } else {\n    return \"\";\n  }\n};\n\n\n/**\r\n    * Process response matches\r\n    * @param {} strValue\r\n    * @param term\r\n    * @param withoutFormat\r\n    * @returns {}\r\n    */\nbizagi.util.performTermMatches = function (strValue, term, withoutFormat) {\n  var parseValue;\n\n  if (_typeof(strValue) === \"object\") {\n    parseValue = bizagi.util.formatItem(strValue);\n  } else if (typeof strValue === \"string\") {\n    if (withoutFormat) {\n      parseValue = bizagi.util.sanitizeHTML(strValue);\n    } else {\n      parseValue = bizagi.util.highlightMatches(strValue, term);\n    }\n  } else {\n    parseValue = strValue;\n  }\n\n  return parseValue;\n};\n\n/**\r\n    * Process response to highlight matches\r\n    * @param strValue\r\n    * @param term\r\n    * @returns {string}\r\n    */\nbizagi.util.highlightMatches = function (strValue, term) {\n  var data = bizagi.util.escapeRegex(term).replaceAll(\"%\", \"\");\n  var regEx = new RegExp(\"(?![^&;]+;)(?!<[^<>]*)(\" + data + \")(?![^<>]*>)(?![^&;]+;)\", \"gi\");\n\n  return bizagi.util.sanitizeHTML(strValue).replace(regEx, \"<strong>$1</strong>\");\n};\n\n/**\r\n    * Calculate window resolution for Desktop\r\n    * @returns {string}\r\n    */\nbizagi.util.getDesktopResolution = function () {\n  var resolution = \"\";\n  var devicePixelRatio = 1;\n  var screenWidth = window.screen.width;\n  var screenHeight = window.screen.height;\n\n  if ('deviceXDPI' in screen) {\n    devicePixelRatio = screen.deviceXDPI / screen.logicalXDPI;\n  } else if ('devicePixelRatio' in window) {\n    devicePixelRatio = window.devicePixelRatio;\n  }\n\n  devicePixelRatio = Number(devicePixelRatio.toFixed(3));\n\n  if (screenWidth && screenWidth > 0 && screenHeight && screenHeight > 0) {\n    resolution = screenWidth * devicePixelRatio + \"x\" + screenHeight * devicePixelRatio;\n  }\n\n  return resolution;\n};\n\n/**\r\n    * Get the market name for device\r\n    * @returns {*|string}\r\n    */\nbizagi.util.getDeviceCode = function () {\n  var deviceCode = \"\";\n\n  if (bizagi.util.isMobileDevice()) {\n    deviceCode = typeof BIZAGI_DEVICE_MARKET_NAME !== \"undefined\" && !bizagi.util.isEmpty(BIZAGI_DEVICE_MARKET_NAME) ? BIZAGI_DEVICE_MARKET_NAME : \"\";\n  } else {\n    deviceCode = bizagi.util.getDesktopResolution();\n  }\n\n  return deviceCode;\n};\n\n/**\r\n    * Get base name of the control\r\n    * @param type\r\n    * @returns {*}\r\n    */\nbizagi.util.normalizeType = function (type) {\n  if (typeof type === \"undefined\") return type;\n\n  return type.\n  replace(/smartphone/, '').\n  replace(/tablet/, '').\n  replace(/offline/, '');\n};\n\n/**\r\n    * Get base name of the control\r\n    * @param type\r\n    * @returns {*}\r\n    */\nbizagi.util.normalizeQueryType = function (type) {\n  if (typeof type === \"undefined\") return type;\n\n  return type.\n  replace(/query/, '').\n  toLowerCase();\n};\n\n/**\r\n    * Hide or show the X button in the show dialog method \r\n    * \r\n    */\nbizagi.util.hideOrShowXToCloseDialog = function (dialog, show) {\n  var selector = \".ui-dialog-titlebar-close\";\n  if (show) {\n    $(selector, dialog).show();\n  } else {\n    $(selector, dialog).hide();\n  }\n};\n\n/**\r\n    * review if a feature key is enabled\r\n    * @param {string} feature nombre de la llave del feature\r\n    */\nbizagi.util.isEnableFeature = function (feature) {\n  if (bizagi.features === undefined) bizagi.features = [];\n  return bizagi.features[feature] !== false;\n};\n\n\n/**\r\n    * review if the posibleHtml has html content\r\n    * @param {string} possibleHtml to review\r\n    */\nbizagi.util.isHtml = function (possibleHtml) {\n  return /<[a-z][\\s\\S]*>/i.test(possibleHtml);\n};\n\n/**\r\n    * if the _try function fails the _catch() or _catch value will be executed and returned\r\n    * @param {Function} _try \r\n    * @param {Function | any} _catch \r\n    */\nbizagi.util.tryCatch = function (_try, _catch) {\n  try {\n    return _try();\n  } catch (e) {\n    return typeof _catch === \"function\" ? _catch() : _catch;\n  }\n};\n\n/**\r\n    * keep functions with next and at the end execute all functions are reduced by with method like a pipe using the variable\r\n    */\nbizagi.util.pipe = function (f, listFunctions) {\n  var _listFunctions = listFunctions === undefined ? [] : listFunctions;\n  _listFunctions.push(f);\n\n  return {\n    next: function next(f) {\n      return bizagi.util.pipe(f, _listFunctions);\n    },\n    end: function end(variable) {\n      return _listFunctions.reduce(function (newVar, f) {\n        return f(newVar);\n      }, variable);\n    } };\n\n},\n\n/**\r\n    * A function to get the scrolling parent of an html element.\r\n    */\nfunction ($) {\n\n  var parents = function parents(node, ps) {\n    if (node.parentNode === null) return ps;\n\n    return parents(node.parentNode, ps.concat([node]));\n  };\n\n  var style = function style(node, prop) {\n    return getComputedStyle(node, null).getPropertyValue(prop);\n  };\n\n  var overflow = function overflow(node) {\n    return style(node, \"overflow\") + style(node, \"overflow-y\") + style(node, \"overflow-x\");\n  };\n\n  var scroll = function scroll(node) {\n    return /(auto|scroll)/.test(overflow(node));\n  };\n\n  // Get the closest ancestor element that is scrollable.\n  $.scrollerParent = function (node) {\n    if (!(node instanceof HTMLElement || node instanceof SVGElement)) return;\n\n    var ps = parents(node.parentNode, []);\n\n    for (var i = 0; i < ps.length; i += 1) {\n      if (scroll(ps[i])) return ps[i];\n    }\n\n    return document.scrollingElement || document.documentElement;\n  };\n}(jQuery);\n\nbizagi.util.startkendo = function (params) {\n  if (typeof bizagi.kendoMobileApplication === \"undefined\") {\n    bizagi.kendoMobileApplication = new kendo.mobile.Application($(\"body\"), {\n      skin: \"flat\",\n      browserHistory: false,\n      init: function init(e) {\n        kendo.ui.progress($(\".km-flat\"), true);\n        params.started && params.started();\n      } });\n\n\n    bizagi.kendoMobileApplication.bizagiNavigate = function (e, t) {\n      this.navigate(e, t);\n    };\n  } else {\n    params.started && params.started();\n  }\n};\n\n/**\r\n    * Checks if bizagi is running in mashup.\r\n    */\nbizagi.util.isMashupContext = function () {\n  return typeof BIZAGI_MASHUP_CONTEXT !== \"undefined\" && bizagi.util.parseBoolean(BIZAGI_MASHUP_CONTEXT) === true;\n};\n\n/**\r\n    * Get native component\r\n    * @returns {}\r\n    */\nbizagi.util.isSharepointContext = function () {\n  return typeof BIZAGI_SHAREPOINT_CONTEXT !== \"undefined\" && bizagi.util.parseBoolean(BIZAGI_SHAREPOINT_CONTEXT) === true;\n};\n\n/**\r\n    * Checks if bizagi is running in webpart.\r\n    */\nbizagi.util.isWebpartContext = function () {\n  return typeof isWebpart !== \"undefined\" && bizagi.util.parseBoolean(isWebpart) === true;\n};\n\n/**\r\n    * start timeline functionality\r\n    * @param data { radNumber: Number, idCase: Number }\r\n    */\nbizagi.util.startTimeline = function (data) {\n  new bizagi.workportal.widgets.widget().showTimeLine(data);\n};\n\n/**\r\n    * start timeline functionality\r\n    * @param data { radNumber: Number, idCase: Number, isAdhoc: Boolean, idProcess: Number }\r\n    */\nbizagi.util.startGraphicquery = function (data) {\n  new bizagi.workportal.widgets.widget().showGraphicQuery(data);\n};\n\n/**\r\n    * start select user functionality\r\n    */\nbizagi.util.startSelectUser = function () {\n  return function (resolve, reject) {\n    var defer = $.Deferred();\n    new bizagi.workportal.widgets.widget().showSelectUser(defer);\n    defer.done(function (userId, userName, guid) {\n      resolve({\n        userId: userId,\n        userName: userName,\n        guid: guid });\n\n    }).fail(function () {\n      resolve({});\n    });\n  };\n};\n\n/* Checks if a given value with format {id, value} is empty\r\n   * @param value\r\n   * @returns {boolean}\r\n   */\nbizagi.util.isEmptyValue = function (value) {\n  if (value === 0) return false;\n  if (value === undefined || value === null || value === \"\") return true;\n  if (typeof value === \"Array\") return value.length === 0;\n  if (Object.prototype.toString.apply(value) === \"[object Array]\") return value.length === 0;\n\n  if (Object.prototype.toString.apply(value) === \"[object Object]\") {\n    for (var key in value) {\n      if (value.hasOwnProperty(key) && !bizagi.util.isEmptyValue(value[key])) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  return false;\n};\n\n// ------------------------------------------------------------------------\n// UTILS FOR LIVE PROCESSES\n// ------------------------------------------------------------------------\n\n/**\r\n * Init refferer Params as an empty object\r\n */\nbizagi.util.initializeReferrerParams = function () {\n  if (!bizagi.referrerParams) {\n    bizagi.referrerParams = {};\n  }\n};\n\n/**\r\n    * Get data to update sidebar\r\n    */\nbizagi.util.getLPQueriesParameters = function () {\n  bizagi.util.initializeReferrerParams();\n  return bizagi.referrerParams.sidebarData;\n};\n\n/**\r\n    * Get selected tree item (Selected process)\r\n    */\nbizagi.util.getLPQueriesSelectedItemFromTree = function () {\n  bizagi.util.initializeReferrerParams();\n  return bizagi.referrerParams.selectedTreeItem;\n};\n\n/**\r\n    * Set data and save \r\n    */\nbizagi.util.setLPQueriesParameters = function (parametersSidebar, tree) {\n  bizagi.util.initializeReferrerParams();\n  bizagi.referrerParams.sidebarData = parametersSidebar;\n  bizagi.referrerParams.selectedTreeItem = tree;\n};\n\n/**\r\n    * Clean data to reset LP Queries component\r\n    */\nbizagi.util.cleanLPQueriesParameters = function () {\n  if (bizagi.referrerParams) {\n    bizagi.referrerParams.sidebarData = null;\n    bizagi.referrerParams.selectedTreeItem = null;\n  }\n};\n\n/**\r\n    * Set referrerParams referrer \r\n    */\nbizagi.util.setLPQueriesReferrer = function () {\n  bizagi.referrerParams.referrer = \"LPQueries\";\n};\n\n/**\r\n    * Check if there is internet connection\r\n    */\nbizagi.util.isConnected = function () {\n  if (bizagi.util.isNativeMobileDevice()) {\n    if (navigator && typeof navigator.connection !== \"undefined\" && typeof Connection !== \"undefined\")\n    return !(navigator.connection.type == Connection.NONE || navigator.connection.type == \"unknown\");\n    return true;\n  } else if (bizagi.util.isMobileDevice() && (\"\" + BIZAGI_ENVIRONMENT).toLowerCase() === \"debug\") {\n    return window.navigator ? window.navigator.onLine : true;\n  }\n\n  return true;\n};\n\n/**\r\n    * Check If rendering url is allowed\r\n    * @param request\r\n    * @returns {boolean}\r\n    */\nbizagi.util.isRenderingUrlAllowed = function (request) {\n  var endPoint;\n  //The url Rest/Processes/RecentProcesses and Rest/Processes/OfflineProcessTree should be excluded from the whitelist\n  var whiteList = [\n  \"Rest/(Handlers|Userfields|DocumentTemplates|(Processes(?!/(RecentProcesses|OfflineProcessTree)))|Cases|Authentication|Users)\",\n  \"Api/(Authentication|Entities|Users)\"];\n\n  var url = (request || \"\").\n  replaceAll(\"..\\/\", \"\").\n  replaceAll(\".\\/\", \"\");\n\n  while (endPoint = whiteList.shift()) {\n    var pattern = new RegExp(endPoint, \"i\");\n    if (url.match(pattern) !== null) return true;\n  }\n\n  return false;\n};\n\n/**\r\n    * Captura todos los elementos input de tipo contraseña y añade el icono de ver/ocultar el valor (el icono incluye\r\n    * funcionalidad propia).\r\n    *\r\n    * Para mas información ver la aplicación de esta función en los widget de login.\r\n    *\r\n    * - Esta función requiere jQuery (variable $) globalmente.\r\n    * - Se aplica generalmente en la función render de los widget.\r\n    * - Asegurarse que todos los input de contraseña han sido cargados antes de ejecutar esta función, de lo contrario los\r\n    *   nuevos inputs no tendran la funcionalidad de ver/ocultar valor.\r\n    *\r\n    * @param {jQuery | HTMLElement} content\r\n    */\nbizagi.util.applyEyeFunction = function (content) {\n  function setShowIcon(element) {\n    $(element, content).parent().find('svg').remove();\n\n    $(element, content).after(\"<svg  class='eye_show_icon'  xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"16\\\" height=\\\"16\\\">\\n\" +\n    \"<path d=\\\"M15 7.8C14.9 7.6 12.7 3 8 3S1.1 7.6 1 7.8v.4c.1.2 2.3 4.8 7 4.8s6.9-4.6 7-4.8v-.4zM8 12c-3.5 0-5.5-3.1-5.9-4 .4-.9 2.4-4 5.9-4 3.5 0 5.5 3.1 5.9 4-.4.9-2.4 4-5.9 4z\\\"/>\\n\" +\n    \"<path d=\\\"M8 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 3c-.6 0-1-.4-1-1s.4-1 1-1 1 .4 1 1-.4 1-1 1z\\\"/>\" +\n    \"</svg>\");\n\n    $(element, content).parent().find(\"input[type='text']\").attr(\"type\", \"password\");\n    $(element, content).parent().find(\"svg\").click(addEvent(true));\n  }\n\n  function setHideIcon(element) {\n    $(element, content).parent().find('svg').remove();\n\n    $(element, content).after(\"<svg class='eye_hide_icon' xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"16\\\" height=\\\"16\\\">\\n\" +\n    \"<path d=\\\"M3.6 10.5l.7-.7a12.1 12.1 0 0 1-2-1.6C3.1 7.3 5.4 5 8 5h1l.8-.8A6 6 0 0 0 8 4C4.3 4 1.4 7.8 1.2 7.9l-.2.3.3.3a12.3 12.3 0 0 0 2.3 2zm8.7-4.9l-.7.7a12.4 12.4 0 0 1 2.1 1.9C12.9 9 10.6 11 8 11H7l-.8.8L8 12c3.7 0 6.6-3.3 6.7-3.5l.3-.3-.2-.3a12.8 12.8 0 0 0-2.5-2.3zM1.5 15h-.4a.5.5 0 0 1 0-.7l13-13a.5.5 0 1 1 .7.7l-13 13h-.3z\\\"/><path d=\\\"M6.3 7.8a1.7 1.7 0 0 1 1.5-1.5l.9-.9H8A2.7 2.7 0 0 0 5.3 8a2.7 2.7 0 0 0 .1.7l.9-.9zm3.4.4a1.7 1.7 0 0 1-1.5 1.5l-.9.9H8A2.7 2.7 0 0 0 10.7 8a2.7 2.7 0 0 0-.1-.7l-.9.9z\\\"/>\" +\n    \"</svg>\");\n\n    $(element, content).parent().find(\"input[type='password']\").attr(\"type\", \"text\");\n    $(element, content).parent().find(\"svg\").click(addEvent(true));\n  }\n\n  function addEvent(direct) {\n    return function (element) {\n      if (direct) {\n        var className = $(this).attr('class') || '';\n        var input = $(this).parent().find(\"input\");\n        if (className === 'eye_show_icon') {\n          setHideIcon(input);\n        } else {\n          setShowIcon(input);\n        }\n      } else {\n        $($(element, content).parent().find('svg')[0]).click(function (ev) {\n          var className = $(this).attr('class') || '';\n          var input = $(this).parent().find(\"input\");\n          if (className === 'eye_show_icon') {\n            setHideIcon(input);\n          } else {\n            setShowIcon(input);\n          }\n        });\n      }\n    };\n  }\n\n  $(content).find(\"input[type='password']\").map(function (index, element) {\n    if (index > 0) {\n      setShowIcon(element);\n      addEvent(false)(element);\n    }\n  });\n};\n\n/**\r\n    * Añadir eventos de accessibility a un elemento, el evento consiste en las siguientes teclas:\r\n    * - Enter, Click, Space.\r\n    * Ayuda a que los elementos puedan ser accedidos (activar evento de click) de multiples maneras incluyendo teclado.\r\n    * @param {*} element jQuery element\r\n    * @param {Function} cb Callback\r\n    * @param {string[]} [extraEvent] Array of extra events\r\n    */\nbizagi.util.accessibilityEnter = function (element, cb, extraEvent) {\n  if (typeof cb !== \"function\") {\n    throw new Error('Error in \"accessibilityEnter\" function: You must provide a valid callback');\n  }\n  /**\r\n     * @type {*|jQuery|HTMLElement}\r\n     * @const\r\n     */\n  extraEvent = $.isArray(extraEvent) ? extraEvent : [];\n  extraEvent.indexOf('click') !== -1 ? extraEvent : extraEvent.push('click');\n\n  element.bind(\"keypress\", function (e) {\n    e.preventDefault && e.preventDefault();\n    e.stopPropagation && e.stopPropagation();\n\n    if (e.which === 13 || e.which === 32) {// Events: enter or space\n      cb(e);\n    }\n  });\n\n  element.bind(extraEvent.join(', '), function (e) {\n    e.preventDefault && e.preventDefault();\n    e.stopPropagation && e.stopPropagation();\n    cb(e);\n  });\n};\n\n/**\r\n    * Recreate native buttons for iOS\r\n    */\n\nbizagi.util.recreateNativeButtons = function (context) {\n  var params = context.getFormContainer().getParams();\n  if (bizagi.util.isNativePluginSupported() && bizagi.util.isiOSSmartphoneDevice()) {\n    var navigation = params.navigation;\n    if (typeof navigation !== \"undefined\") {\n      navigation.setNavigationButtons(context);\n    }\n  }\n};\n\n/**\r\n    * Check If override feature is enabled. Only apply to feature with boolean key\r\n    * @param featureName\r\n    */\nbizagi.util.isOverrideFeatureEnabled = function (featureName) {\n  var feature = bizagi.override && bizagi.override[featureName] || null;\n\n  return bizagi.util.parseBoolean(feature) === true;\n};\n\n/**\r\n    * Create dynamic class using the name\r\n    */\nbizagi.util.createDynamicClass = function (nameClass, renderParams) {\n  if (nameClass) {\n    try {\n      // Create a dynamic function to avoid problem with eval calls when minifying the code\n      var dynamicFunction = \"var dynamicFn = function(renderParams){ \\r\\n\";\n      dynamicFunction += \"return new \" + nameClass + \"(renderParams);\\r\\n\";\n      dynamicFunction += \"}\\r\\n\";\n      dynamicFunction += \"dynamicFn\";\n      dynamicFunction = eval(dynamicFunction);\n\n      // Call the dynamic function\n      return dynamicFunction(renderParams);\n    } catch (e) {\n      console.log(e);\n    }\n  }\n\n  // No class supported\n  return null;\n};\n\n/**\r\n    * Mobiscroll languages\r\n    */\nbizagi.util.languages = {\n  \"es\": \"es\", \"es-ES\": \"es\", \"es-AR\": \"es\", \"es-BO\": \"es\", \"es-Cl\": \"es\", \"es-CO\": \"es\", \"es-CR\": \"es\", \"es-DO\": \"es\", \"es-EC\": \"es\", \"es-SV\": \"es\", \"es-GT\": \"es\", \"es-HN\": \"es\", \"es-MX\": \"es\", \"es-NI\": \"es\", \"es-PA\": \"es\", \"es-PY\": \"es\", \"es-PR\": \"es\", \"es-PE\": \"es\", \"es-US\": \"es\", \"es-UY\": \"es\", \"es-VE\": \"es\",\n  \"en\": \"en-US\", \"en-AU\": \"en-US\", \"en-BZ\": \"en-US\", \"en-CA\": \"en-US\", \"en-029\": \"en-US\", \"en-IN\": \"en-US\", \"en-IE\": \"en-US\", \"en-JM\": \"en-US\", \"en-MY\": \"en-US\", \"en-NZ\": \"en-US\", \"en-PH\": \"en-US\", \"en-SG\": \"en-US\", \"en-ZA\": \"en-US\", \"en-TT\": \"en-US\", \"en-GB\": \"en-US\", \"en-US\": \"en-US\", \"en-ZW\": \"en-US\",\n  \"de\": \"de\", \"de-AT\": \"de\", \"de-DE\": \"de\", \"de-LI\": \"de\", \"de-LU\": \"de\", \"de-CH\": \"de\",\n  \"fr\": \"fr\", \"fr-BE\": \"fr\", \"fr-CA\": \"fr\", \"fr-LU\": \"fr\", \"fr-MC\": \"fr\", \"fr-CH\": \"fr\", \"fr-FR\": \"fr\",\n  \"it\": \"it\", \"it-IT\": \"it\", \"it-CH\": \"it\",\n  \"ja\": \"ja\", \"ja-JA\": \"ja\", \"ja-JP\": \"ja\",\n  \"nl\": \"nl\", \"nl-NL\": \"nl\", \"nl-BE\": \"nl\",\n  \"pt\": \"pt-PT\", \"pt-BR\": \"pt-PT\", \"pt-PT\": \"pt-PT\",\n  \"ru\": \"ru\", \"ru-RU\": \"ru\",\n  \"cs\": \"cs\", \"cs-CZ\": \"cs\",\n  \"ar\": \"ar\", \"ar-DZ\": \"ar\", \"ar-BH\": \"ar\", \"ar-EG\": \"ar\", \"ar-IQ\": \"ar\", \"ar-JO\": \"ar\", \"ar-KW\": \"ar\", \"ar-LB\": \"ar\", \"ar-LY\": \"ar\", \"ar-MA\": \"ar\", \"ar-OM\": \"ar\", \"ar-QA\": \"ar\", \"ar-SA\": \"ar\", \"ar-SY\": \"ar\", \"ar-TN\": \"ar\", \"ar-AE\": \"ar\", \"ar-YE\": \"ar\",\n  \"zh\": \"zh\", \"zh-HK\": \"zh\", \"zh-MO\": \"zh\", \"zh-CN\": \"zh\", \"zh-Hans\": \"zh\", \"zh-SG\": \"zh\", \"zh-TW\": \"zh\", \"zh-Hant\": \"zh\" };\n\n\n/**\r\n                                                                                                                              * Sets time to 0 in the date\r\n                                                                                                                              * @param value\r\n                                                                                                                              * @param fullFormat\r\n                                                                                                                              * @param showTime\r\n                                                                                                                              * @returns {Date} date converted with milliseconds 0\r\n                                                                                                                              */\nbizagi.util.getNormalizedDate = function (value, fullFormat, showTime) {\n  var dateTime = value;\n\n  try {\n    if (!!value && typeof value === \"string\") {\n      dateTime = bizagi.util.dateFormatter.getDateFromInvariant(value, showTime);\n    }\n\n    if (dateTime && dateTime !== 0 && dateTime != null) {\n      if (!showTime) {\n        dateTime.setHours(0, 0, 0, 0);\n      } else {\n        dateTime.setMilliseconds(0);\n      }\n\n      dateTime = bizagi.util.dateFormatter.formatDate(dateTime, fullFormat);\n    }\n  } catch (e) {\n  }\n\n  return dateTime;\n};\n\n/**\r\n    * Check If override feature is enabled. Only apply to feature with boolean key\r\n    * @param featureName\r\n    */\nbizagi.util.isFeatureEnabled = function (featureName) {\n  var feature = bizagi.override && bizagi.override[featureName];\n\n  return bizagi.util.parseBoolean(feature);\n};\n\n/**\r\n    * LOCAL STORAGE\r\n    */\n\n/**\r\n        * Last process inbox\r\n        * @returns lastProcessInboxKey string\r\n        */\nbizagi.util.getLastProcessInboxKey = function () {\n  var lastProcessInboxKey = 'lastProcessInbox';\n  lastProcessInboxKey = lastProcessInboxKey.concat(\"_\", bizagi.util.getUserHash());\n  return lastProcessInboxKey;\n};\n\n/**\r\n    * Constructor();\r\n    */\n\n/**\r\n       * Set last process inbox in local storage\r\n       * @returns void()\r\n       */\nbizagi.util.lastProcessInboxInit = function () {\n  bizagi.util.setItemLocalStorage(bizagi.util.getLastProcessInboxKey(), JSON.stringify(bizagi.util.getLastProcessInboxCreate()));\n};\n\n/**\r\n    * Create last process inbox\r\n    * @returns {} lastProcessInbox\r\n    */\nbizagi.util.getLastProcessInboxCreate = function () {\n  return {\n    \"processInfo\": bizagi.util.createLastProcessInboxProcess(),\n    \"sortInfo\": bizagi.util.createLastProcessInboxSort(),\n    \"filterInfo\": bizagi.util.createLastProcessInboxFilter(),\n    \"processColumnsInfo\": bizagi.util.createLastProcessInboxColumns(),\n    \"inputTrayInfo\": bizagi.util.createLastProcessInboxInputTray() };\n\n};\n\n/**\r\n    * Create last process inbox default\r\n    * @returns {} processInfo\r\n    */\nbizagi.util.createLastProcessInboxProcess = function () {\n  return {\n    \"processInfoName\": null,\n    \"idWorkflow\": -1 };\n\n};\n\n/**\r\n    * Create sort info\r\n    * @return {} sortInfo\r\n    */\nbizagi.util.createLastProcessInboxSort = function () {\n  return {\n    \"sortDirection\": \"asc\",\n    \"sortFieldName\": null,\n    \"sortOrder\": null };\n\n};\n\n/**\r\n    * Create filter info\r\n    * filterType (equal, like, startsWith, endsWith )\r\n    * @return {} filterInfo\r\n    */\nbizagi.util.createLastProcessInboxFilter = function () {\n  return {\n    \"filterValue\": null,\n    \"filterFieldName\": null,\n    \"filterType\": \"equal\" };\n\n};\n\n/**\r\n    * Create process columns info\r\n    * @return {} columnsInfo\r\n    */\nbizagi.util.createLastProcessInboxColumns = function () {\n  return {\n    \"processColumns\": [] };\n\n};\n\n/**\r\n    * Create input tray info\r\n    * @return string inputTrayInfo\r\n    */\nbizagi.util.createLastProcessInboxInputTray = function () {\n  return \"inbox\";\n};\n\n/**\r\n    * INIT\r\n    */\n\n/**\r\n        * Init last process inbox\r\n        * @returns lastProcessInbox {}\r\n        */\nbizagi.util.getLastProcessInbox = function () {\n  var lastProcessInbox = bizagi.util.getItemLocalStorage(bizagi.util.getLastProcessInboxKey());\n\n  if (!lastProcessInbox) {\n    // New object\n    bizagi.util.lastProcessInboxInit();\n    // Get object\n    lastProcessInbox = bizagi.util.getItemLocalStorage(bizagi.util.getLastProcessInboxKey());\n  }\n\n  return JSON.parse(lastProcessInbox);\n};\n\n/**\r\n    * SET\r\n    */\n\n/**\r\n        * Save current process info\r\n        * @param processName string\r\n        * @param idWorkflow integrer\r\n        * @return void()\r\n        */\nbizagi.util.setLastProcessInbox = function (processInfoName, idWorkflow, smartInboxId) {\n  var lastProcessInbox = bizagi.util.getLastProcessInbox();\n  if (lastProcessInbox.processInfo) {\n    if (lastProcessInbox.processInfo.idWorkflow != idWorkflow) {\n      lastProcessInbox.processColumnsInfo = null;\n    } else if (!bizagi.util.isEmpty(smartInboxId) && lastProcessInbox.processInfo.smartInboxId != smartInboxId) {\n      lastProcessInbox.processColumnsInfo = null;\n    }\n  }\n\n  // set data\n  lastProcessInbox.processInfo.processInfoName = processInfoName;\n  lastProcessInbox.processInfo.idWorkflow = parseInt(idWorkflow || -1);\n  lastProcessInbox.processInfo.smartInboxId = typeof smartInboxId != \"undefined\" ? smartInboxId : null;\n\n  // When last process inbox change is required to delete Filters\n  if (lastProcessInbox.filterInfo) {\n    lastProcessInbox.filterInfo = bizagi.util.createLastProcessInboxFilter();\n  }\n  // save data\n  bizagi.util.setItemLocalStorage(bizagi.util.getLastProcessInboxKey(), JSON.stringify(lastProcessInbox));\n};\n\n/**\r\n    * Save process columns info\r\n    * @param processColumns []\r\n    * @return void()\r\n    */\nbizagi.util.setLastProcessInboxProcessColumns = function (processColumns) {\n  var lastProcessInbox = bizagi.util.getLastProcessInbox();\n  // set data\n  lastProcessInbox.processColumnsInfo = lastProcessInbox.processColumnsInfo || {};\n  lastProcessInbox.processColumnsInfo.processColumns = processColumns || [];\n  // save data\n  bizagi.util.setItemLocalStorage(bizagi.util.getLastProcessInboxKey(), JSON.stringify(lastProcessInbox));\n};\n\n/*\r\n   * Get Live filter from storage\r\n   * @param id object\r\n   * @return object\r\n   */\nbizagi.util.getLiveFiltersFromStorage = function (id) {\n  var filters = [];\n  var modelStorage = bizagi.util.getItemLocalStorage(\"livefilters\");\n  try {\n    var serialize = JSON.parse(modelStorage);\n    filters = typeof serialize[id] != \"undefined\" ? JSON.parse(serialize[id]) : filters;\n  } catch (e) {\n    filters = [];\n  }\n\n  return filters;\n};\n\n/*\r\n   * Save Live filter in storage\r\n   * @param id object\r\n   * @param value object\r\n   * @return void()\r\n   */\nbizagi.util.setLiveFiltersToStorage = function (id, value) {\n  var modelStorage = bizagi.util.getItemLocalStorage(\"livefilters\") || \"[]\";\n  var serialize = JSON.parse(modelStorage);\n\n  serialize[id] = JSON.stringify(value);\n\n\n  bizagi.util.setItemLocalStorage(\"livefilters\", JSON.encode(Object.assign({}, serialize)));\n};\n\n/**\r\n    * Save sort info\r\n    * @param liveFilters array\r\n    * @return void()\r\n    */\nbizagi.util.setLastProcessInboxLiveFilter = function (liveFilters) {\n  var lastProcessInbox = bizagi.util.getLastProcessInbox();\n  // set data\n  lastProcessInbox.liveFilters = liveFilters || [];\n  // save data\n  bizagi.util.setItemLocalStorage(bizagi.util.getLastProcessInboxKey(), JSON.stringify(lastProcessInbox));\n};\n\n\n/**\r\n    * Save sort info\r\n    * @param fieldName string\r\n    * @param direction string\r\n    * @return void()\r\n    */\nbizagi.util.setLastProcessInboxSort = function (sortFieldName, direction, sortOrder) {\n  var lastProcessInbox = bizagi.util.getLastProcessInbox();\n  // set data\n  lastProcessInbox.sortInfo.sortFieldName = sortFieldName || null;\n  lastProcessInbox.sortInfo.sortDirection = direction || 'asc';\n  lastProcessInbox.sortInfo.sortOrder = sortOrder || null;\n  // save data\n  bizagi.util.setItemLocalStorage(bizagi.util.getLastProcessInboxKey(), JSON.stringify(lastProcessInbox));\n};\n\n/**\r\n    * Save filter info\r\n    * @param fieldName string\r\n    * @param direction string\r\n    * @return void()\r\n    */\nbizagi.util.setLastProcessInboxFilter = function (filterValue, filterFieldName, filterType) {\n  var lastProcessInbox = bizagi.util.getLastProcessInbox();\n  // set data\n  lastProcessInbox.filterInfo.filterValue = filterValue || null;\n  lastProcessInbox.filterInfo.filterFieldName = filterFieldName || null;\n  lastProcessInbox.filterInfo.filterType = filterType || 'equal';\n  // save data\n  bizagi.util.setItemLocalStorage(bizagi.util.getLastProcessInboxKey(), JSON.stringify(lastProcessInbox));\n};\n\n/**\r\n    * Save input Tray inbox info\r\n    * @param inputTray string\r\n    * @return void()\r\n    */\nbizagi.util.setLastProcessInboxInputTray = function (inputTray) {\n  var lastProcessInbox = bizagi.util.getLastProcessInbox();\n  // set data\n  lastProcessInbox.inputTrayInfo = inputTray || '';\n  // save data\n  bizagi.util.setItemLocalStorage(bizagi.util.getLastProcessInboxKey(), JSON.stringify(lastProcessInbox));\n};\n\n/**\r\n    * GET\r\n    */\n\n/**\r\n        * Get process info\r\n        * @return {} process info\r\n        */\nbizagi.util.getLastProcessInboxProcessInfo = function () {\n  var lastProcessInbox = bizagi.util.getLastProcessInbox();\n  // localization / default\n  if (bizagi.localization && lastProcessInbox.processInfo.processInfoName == null) {\n    lastProcessInbox.processInfo.processInfoName = bizagi.localization.getResource(\"workportal-widget-inbox-all-processes\");\n  }\n  lastProcessInbox.processInfo.allProcesses = lastProcessInbox.processInfo.idWorkflow === -1;\n  // response\n  return lastProcessInbox.processInfo;\n};\n\n/**\r\n    * Get smartinbox id\r\n    * @return string smartinbox id\r\n    */\nbizagi.util.getLastProcessInboxSmartInboxId = function () {\n  var lastProcessInbox = bizagi.util.getLastProcessInbox();\n  return lastProcessInbox.processInfo.smartInboxId;\n};\n\n/**\r\n    * Get sort info\r\n    * @return {} sort info\r\n    */\nbizagi.util.getLastProcessInboxSort = function () {\n  var lastProcessInbox = bizagi.util.getLastProcessInbox();\n  return lastProcessInbox.sortInfo;\n};\n\n/**\r\n    * Get filter info\r\n    * @return {} filter info\r\n    */\nbizagi.util.getLastProcessInboxFilter = function () {\n  var lastProcessInbox = bizagi.util.getLastProcessInbox();\n  return lastProcessInbox.filterInfo;\n};\n\n/**\r\n    * Get live filter info\r\n    * @return {} live filter info\r\n    */\nbizagi.util.getLastProcessInboxLiveFilter = function () {\n  var lastProcessInbox = bizagi.util.getLastProcessInbox();\n  return lastProcessInbox.liveFilters;\n};\n\n/**\r\n    * Get process columns info\r\n    * @return [] process columns info\r\n    */\nbizagi.util.getLastProcessInboxProcessColumns = function () {\n  var lastProcessInbox = bizagi.util.getLastProcessInbox();\n  return lastProcessInbox.processColumnsInfo;\n};\n\n/**\r\n    * Get input tray info\r\n    * @return string inputTray info\r\n    */\nbizagi.util.getLastProcessInboxInputTray = function () {\n  var lastProcessInbox = bizagi.util.getLastProcessInbox();\n  return lastProcessInbox.inputTrayInfo;\n};\n\n/**\r\n    * DELETE\r\n    */\n\n/**\r\n        * Remove last process inbox\r\n        * @return void()\r\n        */\nbizagi.util.removeLastProcessInbox = function () {\n  bizagi.util.removeItemLocalStorage(bizagi.util.getLastProcessInboxKey());\n};\n\n/**\r\n    * Remove sort inbox\r\n    * @return void()\r\n    */\nbizagi.util.removeLastProcessInboxSort = function () {\n  var lastProcessInbox = bizagi.util.getLastProcessInbox();\n\n  if (lastProcessInbox && lastProcessInbox.sortInfo) {\n    // set data\n    lastProcessInbox.sortInfo = bizagi.util.createLastProcessInboxSort();\n    // save data\n    bizagi.util.setItemLocalStorage(bizagi.util.getLastProcessInboxKey(), JSON.stringify(lastProcessInbox));\n  }\n};\n\n/**\r\n    * Remove sort inbox\r\n    * @return void()\r\n    */\nbizagi.util.removeLastProcessLiveFilters = function () {\n  var lastProcessInbox = bizagi.util.getLastProcessInbox();\n\n  if (lastProcessInbox && lastProcessInbox.liveFilters) {\n    // set data\n    lastProcessInbox.liveFilters = [];\n    // save data\n    bizagi.util.setItemLocalStorage(bizagi.util.getLastProcessInboxKey(), JSON.stringify(lastProcessInbox));\n  }\n};\n\nbizagi.util.getSyncTimeStampKey = function () {\n  var syncTimeStampKey = 'syncTimeStamp';\n  syncTimeStampKey = syncTimeStampKey.concat(\"_\", bizagi.util.getUserHash());\n  return syncTimeStampKey;\n};\n\nbizagi.util.storeSyncTimeStamp = function (currentDate) {\n  bizagi.util.setItemLocalStorage(bizagi.util.getSyncTimeStampKey(), currentDate.toString());\n};\n\nbizagi.util.getSyncTimeStamp = function () {\n  var syncTimeStamp = bizagi.util.getItemLocalStorage(bizagi.util.getSyncTimeStampKey());\n  return syncTimeStamp ? new Date(syncTimeStamp) : undefined;\n};\n\nbizagi.util.getUserHash = function () {\n  var userKey = typeof BIZAGI_USER != \"undefined\" ?\n  (\"\" + BIZAGI_USER + \"-\" + BIZAGI_PROXY_PREFIX + \"-\" + BIZAGI_DOMAIN).toLowerCase() :\n  \"admon\" + \"-\" + \"http://localhost/bizagiR100x\" + \"-\" + \"domain\";\n  return userKey.hashCode();\n};\n\n/**\r\n    * set or get the value in the defaultWidget\r\n    * if is mobile use cookie\r\n    * if is desktop save the value DETAIL or TABLE\r\n    * if is desktop on get returns inbox or inboxGrid only\r\n    */\nbizagi.util.defaultWidget = function (newValueStr) {\n  var _preferService = bizagi.services.preferences(),\n  _widgets = bizagi.workportal.widgets.widget,\n  _val2Str = function _val2Str(val) {\n    return val === 'DETAIL' ? _widgets.BIZAGI_WORKPORTAL_WIDGET_INBOX : _widgets.BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID;\n  },\n  _str2Val = function _str2Val(str) {\n    return str === 'inbox' ? 'DETAIL' : 'TABLE';\n  },\n  _mobile = {\n    set: function set(newVal) {\n      bizagi.cookie(\"bizagiDefaultWidget\", newVal, { expires: 30 });\n    },\n    get: function get() {\n      return bizagi.cookie(\"bizagiDefaultWidget\");\n    } },\n\n  _desktop = {\n    set: function set(newVal) {\n      var _newValueView = _str2Val(newVal);\n      _preferService.changePreference(_preferService.name.INBOX_VIEW_TYPE, _newValueView);\n    },\n    get: function get() {\n      var _actualValue = _preferService.getPreference(_preferService.name.INBOX_VIEW_TYPE);\n      return _val2Str(_actualValue);\n    } },\n\n  _device = bizagi.util.isMobile ? _mobile : _desktop;\n\n  if (newValueStr !== undefined)\n  _device.set(newValueStr);\n  return _device.get();\n};\n\nbizagi.util.getMobileFeaturesKey = function () {\n  var userKey = typeof BIZAGI_USER != \"undefined\" ?\n  (\"\" + BIZAGI_USER + \"-\" + BIZAGI_PROXY_PREFIX + \"-\" + BIZAGI_DOMAIN).toLowerCase() :\n  \"admon\" + \"-\" + \"http://localhost/bizagiR100x\" + \"-\" + \"domain\";\n  var mobileFeaturesKey = 'mobileFeatures';\n  mobileFeaturesKey = mobileFeaturesKey.concat(\"_\", userKey);\n  return mobileFeaturesKey;\n};\n\nbizagi.util.getMobileFeatures = function () {\n  var stringFeatures = bizagi.util.getItemLocalStorage(bizagi.util.getMobileFeaturesKey());\n  var updatedFeatures = $.extend(!bizagi.util.isEmpty(stringFeatures) ? JSON.parse(stringFeatures) : {}, bizagiConfig.features);\n  return updatedFeatures;\n};\n\nbizagi.util.storeMobileFeatures = function (mobileFeatures) {\n  var storedFeatures = bizagi.util.getMobileFeatures();\n  var updatedFeatures = $.extend(storedFeatures, mobileFeatures);\n  bizagi.util.setItemLocalStorage(bizagi.util.getMobileFeaturesKey(), JSON.stringify(updatedFeatures));\n};\n\nbizagi.util.getCardviewMaxColumsAllowed = function () {\n  var maxColumns = 100;\n  var mobileFeatures = bizagi.util.getMobileFeatures();\n  if (mobileFeatures && mobileFeatures.maxColumnsEnabled &&\n  mobileFeatures.maxColumnsEnabled.enabled === true) {\n    maxColumns = mobileFeatures.maxColumnsEnabled.value;\n  }\n  return maxColumns;\n};\n\nbizagi.util.blobTob64 = function (blob, onlyData) {\n  var def = new $.Deferred();\n  var reader = new FileReader();\n  reader.readAsDataURL(blob);\n  reader.onloadend = function () {\n    base64data = reader.result;\n    if (onlyData) {\n      base64data = base64data.split(',')[1];\n    }\n    def.resolve(base64data);\n  };\n  return def;\n};\n/**\r\n    * Convert blob to text\r\n    * @param {*} blob \r\n    */\nbizagi.util.blobToText = function (blob) {\n  var def = new $.Deferred();\n  var reader = new FileReader();\n\n  reader.readAsText(blob);\n  reader.onloadend = function () {\n    def.resolve(reader.result);\n  };\n\n  return def.promise();\n};\n\n/**\r\n    * Get valid data url\r\n    * @param {} properties\r\n    * @returns {}\r\n    */\n\n/**\r\n       * Get valid data url\r\n       * @param {} properties\r\n       * @returns {}\r\n       */\nbizagi.util.getDataUrl = function (properties) {\n  var currentUrl;\n\n  try {\n    if (typeof properties.value !== \"undefined\" && !bizagi.util.isEmpty(properties.value)) {\n      var data = properties.value;\n      var url = data.value || data;\n\n      if (Array.isArray(url)) {\n        var tempUrl = url.shift();\n        currentUrl = Array.isArray(tempUrl) ? tempUrl.join(\"\") : tempUrl;\n      } else {\n        currentUrl = url;\n      }\n    } else {\n      currentUrl = properties.url || \"\";\n    }\n\n    currentUrl = !bizagi.util.isEmpty(currentUrl) ? \"data:image/png;base64,\" + currentUrl.replace(/^data:.*;base64,/, \"\") : \"\";\n\n    if (currentUrl && currentUrl.indexOf(\"Invalid case id\") !== -1)\n    currentUrl = \"\";\n\n  } catch (error) {\n    currentUrl = \"\";\n  }\n\n  return currentUrl;\n};\n\nbizagi.util.getDataUrl = function (binaryData, url) {\n  var currentUrl;\n\n  try {\n    if (typeof binaryData !== \"undefined\" && !bizagi.util.isEmpty(binaryData)) {\n      var data = binaryData;\n      var newUrl = data.value || data;\n\n      if (Array.isArray(newUrl)) {\n        var tempUrl = newUrl.shift();\n        currentUrl = Array.isArray(tempUrl) ? tempUrl.join(\"\") : tempUrl;\n      } else {\n        currentUrl = newUrl;\n      }\n    } else {\n      currentUrl = url || \"\";\n    }\n\n    currentUrl = !bizagi.util.isEmpty(currentUrl) ? \"data:image/png;base64,\" + currentUrl.replace(/^data:.*;base64,/, \"\") : \"\";\n\n    if (currentUrl && currentUrl.indexOf(\"Invalid case id\") !== -1)\n    currentUrl = \"\";\n\n  } catch (error) {\n    currentUrl = \"\";\n  }\n\n  return currentUrl;\n};\n\nbizagi.util.console = {};\nbizagi.util.console.log = function () {\n  if ('Bugsee' in window || bizagi.util.isCordovaSupported()) {\n    var args = Array.prototype.slice.call(arguments);\n    var message = args[0];\n    var params = args.length > 1 ? args.slice(1) : null;\n    if (params) {\n      try {\n        console.log(\"BUGSEE: \" + message + \" \\r\\n\" + JSON.encode(params));\n        return;\n      } catch (e) {}\n    }\n  }\n  console.log.apply(this, arguments);\n};\n\nbizagi.util.console.error = function () {\n  if ('Bugsee' in window || bizagi.util.isCordovaSupported()) {\n    var args = Array.prototype.slice.call(arguments);\n    var message = args[0];\n    var params = args.length > 1 ? args.slice(1) : null;\n    if (params) {\n      try {\n        console.error(\"BUGSEE: \" + message + \" \\r\\n\" + JSON.encode(params));\n        return;\n      } catch (e) {}\n    }\n  }\n  console.error.apply(this, arguments);\n};\n\nbizagi.util.deepExtend = function (out) {\n  out = out || {};\n\n  for (var i = 1; i < arguments.length; i++) {\n    var obj = arguments[i];\n\n    if (!obj)\n    continue;\n\n    for (var key in obj) {\n      if (obj.hasOwnProperty(key)) {\n        if (_typeof(obj[key]) === 'object') {\n          if (obj[key] instanceof Array == true)\n          out[key] = obj[key].slice(0);else\n\n          out[key] = deepExtend(out[key], obj[key]);\n        } else\n\n        out[key] = obj[key];\n      }\n    }\n  }\n\n  return out;\n};\n\nbizagi.util.extend = function (out) {\n  out = out || {};\n\n  for (var i = 1; i < arguments.length; i++) {\n    if (!arguments[i])\n    continue;\n\n    for (var key in arguments[i]) {\n      if (arguments[i].hasOwnProperty(key))\n      out[key] = arguments[i][key];\n    }\n  }\n\n  return out;\n};\n\n/**\r\n    * Gets the normalized control type of a column\r\n    * @param {string} originalType - Type received in metadata \r\n    */\nbizagi.util.getColumnType = function (originalType) {\n  if (typeof originalType === \"undefined\") return \"default\";\n\n  var type = originalType.replace(\"column\", \"\").toLowerCase();\n  return bizagi.util.normalizeType(type);\n};\n\n/**\r\n    * Get the justify-content property to apply to a control according to the specified \"align\" property\r\n    * @param {string} align - left, right, center, default or justify\r\n    */\nbizagi.util.mapAlignClassName = function (align) {\n  var descs = {\n    'rigth': 'flex-end',\n    'left': 'flex-start',\n    'justify': 'flex-start',\n    'default': 'center',\n    'center': 'center' };\n\n  return descs[align] || \"center\";\n};\n\nbizagi.util.isMobileErrorTracesEnabled = function () {\n  var mobileErrorTracesEnabled = false;\n  var mobileFeatures = bizagi.util.getMobileFeatures();\n\n  if (mobileFeatures && mobileFeatures.mobileErrorTraces && mobileFeatures.mobileErrorTraces.enabled === true) {\n    mobileErrorTracesEnabled = true;\n  }\n\n  return mobileErrorTracesEnabled && bizagi.util.isTabletDevice();\n};\n\nbizagi.util.isMobileSmartInboxEnabled = function () {\n  var mobileSmartInboxEnabled = false;\n  var mobileFeatures = bizagi.util.getMobileFeatures();\n\n  if (mobileFeatures && mobileFeatures.mobileSmartInbox && mobileFeatures.mobileSmartInbox.enabled === true) {\n    mobileSmartInboxEnabled = true;\n  }\n\n  return mobileSmartInboxEnabled && bizagi.util.isTabletDevice();\n};\n\nbizagi.util.isMobileLiveFiltersEnabled = function () {\n  var mobileLiveFiltersEnabled = false;\n  var mobileFeatures = bizagi.util.getMobileFeatures();\n\n  if (mobileFeatures && mobileFeatures.mobileLiveFilters && mobileFeatures.mobileLiveFilters.enabled === true) {\n    mobileLiveFiltersEnabled = true;\n  }\n\n  return mobileLiveFiltersEnabled && bizagi.util.isTabletDevice();\n};\n\n/**\r\n    * Gets the normalized control type of a column\r\n    * @param {string} originalType - Type received in metadata \r\n    */\nbizagi.util.getColumnType = function (originalType) {\n  if (typeof originalType === \"undefined\") return \"default\";\n\n  var type = originalType.replace(\"column\", \"\").toLowerCase();\n  return bizagi.util.normalizeType(type);\n};\n\n$.any = function (data, callback) {\n  if (data === undefined || data == null || data.length == 0) return false;\n  var result = $.grep(data, callback);\n  return result != null && result !== undefined && result.length > 0;\n};\n\n$.first = function (data, callback) {\n  if (data === undefined || data == null || data.length == 0) return null;\n  var result = $.grep(data, callback);\n  return result == null || result === undefined || result.length == 0 ? null : result[0];\n};\n\n$.groupBy = function (data, property) {\n  if (data === undefined || data == null || data.length == 0) return {};\n  var result = {};\n  $.each(data, function (i, item) {\n    if (item === undefined) return;\n    if (result[item[property]] === undefined) result[item[property]] = [];\n    result[item[property]].push(item);\n  });\n  return result;\n};\n\n/**\r\n    * Downloads the file and try to open it\r\n    * @param blobFile\r\n    * @param fileName\r\n    */\nbizagi.util.downloadBlobFile = function (blobFile, fileName) {\n  if (window.navigator && window.navigator.msSaveOrOpenBlob) {\n    window.navigator.msSaveOrOpenBlob(blobFile, fileName);\n  } else {\n    var url = window.URL.createObjectURL(blobFile);\n    var link = document.createElement(\"a\");\n\n    link.style = \"display: none\";\n    document.body.appendChild(link);\n\n    link.href = url;\n    link.download = fileName;\n\n    link.click();\n\n    window.URL.revokeObjectURL(url);\n    link.parentNode.removeChild(link);\n  }\n};\n\n/**\r\n    * Verify if blob type json is an error\r\n    * @param {*} jsonFile Blob tipo JSON\r\n    */\nbizagi.util.handleJSONResponse = function (jsonFile) {\n  var deferred = new $.Deferred();\n\n  if (jsonFile && /application\\/json/i.test(jsonFile.type)) {\n    bizagi.util.blobToText(jsonFile).then(function (result) {\n      var json = JSON.parse(result);\n\n      if (json.type === \"error\") {\n        deferred.reject(result);\n      } else {\n        deferred.resolve(jsonFile);\n      }\n    }).fail(function (err) {\n      deferred.reject(err);\n    });\n  } else {\n    deferred.resolve(jsonFile);\n  }\n\n  return deferred.promise();\n};\n\n/**\r\n    * Method to validate the valid format of values\r\n    * @param value\r\n    * @returns {{add: function(), validate: function()}}\r\n    */\nbizagi.util.bzValidator = function (value) {\n  var validators = [];\n  var errors = [];\n\n  return {\n    add: function add(callbackValidator, message) {\n      if (typeof callbackValidator == \"function\") {\n        validators.push({\n          callback: callbackValidator,\n          message: message });\n\n      } else {\n        console.warn(\"Callback is not a function\");\n      }\n\n      return this;\n    },\n    validate: function validate(callbackResponse) {\n      errors = [];\n\n      try {\n        if (validators && validators.length > 0) {\n          validators.forEach(function (validator) {\n            var result = validator.callback(value);\n            if (!bizagi.util.isBoolean(result)) {\n              errors.push(\"Callback evaluation is not a function: \" + validator.message);\n            } else if (!result) {\n              errors.push(validator.message || \"Validation error\");\n            }\n          });\n        } else {\n          errors.push(\"There are not validators added\");\n        }\n      } catch (e) {\n        console.warn(e);\n      }\n\n      // Call response\n      callbackResponse({ errors: errors });\n\n      // Clean validators\n      validators = [];\n\n      return this;\n    },\n    isValid: function isValid() {\n      return errors && !errors.length;\n    } };\n\n};","/*\r\n*   Name: BizAgi Logging Feature\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will create global definitions to allow easy logging\r\n*/\n\n// Create or Define BizAgi namespace\nbizagi = typeof bizagi !== \"undefined\" ? bizagi : {};\nbizagi.chrono = typeof bizagi.chrono !== \"undefined\" ? bizagi.chrono : {};\n\n\n// Default logging variables\nbizagi.enableTrace = false;\nbizagi.enableDebug = false;\nbizagi.enableChrono = false;\n\nbizagi.log = function (message, data, icon) {\n  var doc = window.document;\n\n  // Check if trace is enabled\n  if (!bizagi.enableTrace) return;\n\n  if (bizagi.logContainer === undefined) {\n    bizagi.logContainer = $(\".ui-bizagi-log-container\", doc);\n\n    if (bizagi.logContainer.length == 0) {\n      bizagi.logContainer = createNotificationsBox();\n    }\n  }\n  // Clone data if present\n  if (data) {try {data = JSON.parse(JSON.encode(data));} catch (e) {data = {};}}\n\n  bizagi.logContainer.bizagi_notifications(\"addNotification\", message, data, getIcon(icon));\n\n  // Helper method\n  function createNotificationsBox() {\n    var logContainer = $('<div />').appendTo($(\"body\", doc));\n    var device = typeof bizagi.detectDevice !== \"undefined\" ? bizagi.detectDevice() : bizagi.util.detectDevice();\n\n    // Apply plugin\n    logContainer.bizagi_notifications({\n      headerAdditionalClass: \"ui-bizagi-log-container-header\",\n      containerAdditionalClass: \"ui-bizagi-notifications-container ui-bizagi-log-container\",\n      itemIcon: \"ui-icon-info\",\n      title: \"Debugging Log\",\n      location: \"top\",\n      device: device });\n\n\n    // Advanced log view\n    logContainer.bind(\"itemClick\", function (e, ui) {\n      var popup = $(\"<div />\").appendTo($(\"body\"), doc);\n      var contentViewer = device == \"desktop\" ? $(\"<textarea />\") : $(\"<textarea readonly=true />\");\n      if (typeof ui.data == \"string\") {\n        // Create text area\n        contentViewer.height(\"90%\");\n        contentViewer.width(\"100%\");\n        contentViewer.text(ui.data);\n        popup.append(contentViewer);\n\n      } else {\n        // Create text area\n        contentViewer.height(\"90%\");\n        contentViewer.width(\"100%\");\n        contentViewer.text(JSON.encode(ui.data));\n        popup.append(contentViewer);\n      }\n\n      // Shows dialog\n      popup.dialog({\n        width: 640,\n        height: 480,\n        modal: true,\n        title: \"Object Hierarchy\",\n        close: function close() {\n          popup.dialog(\"destroy\");\n          popup.detach();\n        } });\n\n\n    });\n\n    return logContainer;\n  }\n\n  // Returns the icon associated to the messageType\n  function getIcon(_icon) {\n    _icon = _icon || \"ui-icon-bullet\";\n\n    if (_icon == \"info\") {\n      return \"ui-icon-info\";\n    }\n\n    if (_icon == \"warning\") {\n      return \"ui-icon-alert\";\n    }\n\n    if (_icon == \"error\") {\n      return \"ui-icon-circle-close\";\n    }\n\n    if (_icon == \"timer\") {\n      return \"ui-icon-clock\";\n    }\n\n    if (_icon == \"success\") {\n      return \"ui-icon-check\";\n    }\n\n    return _icon;\n  }\n};\n\n/*\r\n   *   Creates a log message when the condition is false  \r\n   */\nbizagi.assert = function (condition, message, data) {\n  if (!condition) {\n    bizagi.log(message, data, \"error\");\n  }\n};\n\n/*\r\n   *   Creates an error message\r\n   */\nbizagi.logError = function (message, data) {\n  bizagi.log(message, data, \"error\");\n};\n\n/*\r\n   *   Creates a log message only when debug option is true\r\n   */\nbizagi.debug = function (message, data) {\n  if (bizagi.enableDebug) {\n    bizagi.log(message, data, \"info\");\n  }\n};\n\n/*\r\n   *   Returns the log container instance\r\n   */\nbizagi.getLogInstance = function () {\n  // Return log object\n  return bizagi.logContainer;\n};\n\n/*\r\n   *   Reset all the timers\r\n   */\nbizagi.chrono.init = function (timer) {\n  if (!timer) bizagi.chronos = {};else\n  bizagi.chronos[timer] = { millis: 0, timestamp: 0 };\n};\n\n/*\r\n   *   Starts a timer to measure performance\r\n   */\nbizagi.chrono.start = function (timer, profile) {\n  if (!bizagi.enableChrono) return;\n  profile = profile !== undefined ? profile : false;\n  bizagi.chronos[timer] = bizagi.chronos[timer] || { millis: 0, timestamp: 0 };\n\n  // If the timer is already running don't do anything\n  if (bizagi.chronos[timer].running) return;\n\n  // Start timers\n  bizagi.chronos[timer].timestamp = new Date().getTime();\n  bizagi.chronos[timer].profiling = bizagi.enableProfiler && profile;\n  bizagi.chronos[timer].running = true;\n\n  // Use chrome profiling\n  if (bizagi.enableProfiler && profile) {\n    console.time(timer);\n    console.timeStamp(timer);\n    console.profile(timer);\n  }\n};\n\n/*\r\n   *   Starts an inits a new timer\r\n   */\nbizagi.chrono.initAndStart = function (timer) {\n  bizagi.chrono.init(timer);\n  bizagi.chrono.start(timer);\n};\n\n/*\r\n   *   Stops a timer to measure performance\r\n   */\nbizagi.chrono.stop = function (timer) {\n  if (!bizagi.enableChrono) return;\n  bizagi.chronos[timer] = bizagi.chronos[timer] || { millis: 0, timestamp: 0 };\n\n  // If the timer is not running don't do anything\n  if (!bizagi.chronos[timer].running) return;\n\n  // Stop the timer\n  var diff = new Date().getTime() - bizagi.chronos[timer].timestamp;\n  bizagi.chronos[timer].millis = bizagi.chronos[timer].millis + diff;\n  bizagi.chronos[timer].running = false;\n\n  // Use chrome profiling\n  if (bizagi.chronos[timer].profiling) {\n    console.timeEnd(timer);\n    console.timeStamp(timer + \"end\");\n    console.profileEnd(timer);\n  }\n};\n\n/*\r\n   *   Stops a timer, and log it to the debugging log\r\n   */\nbizagi.chrono.stopAndLog = function (timer) {\n  // If the timer is not running don't do anything\n  if (bizagi.chronos[timer] && bizagi.chronos[timer].running) bizagi.chrono.stop(timer);\n  bizagi.chrono.log(timer);\n};\n\n/*\r\n   *   Returns the current value of a timer\r\n   */\nbizagi.chrono.log = function (timer) {\n  if (!bizagi.chronos[timer]) return;\n  bizagi.log(\"Timer \" + timer + \": \" + bizagi.chronos[timer].millis + \"ms\", null, \"timer\");\n};\n\n/*\r\n   *   Returns the current value of a timer\r\n   */\nbizagi.chrono.logTimers = function () {\n  if (!bizagi.enableChrono) return;\n  for (key in bizagi.chronos) {\n    bizagi.chrono.log(key);\n  }\n};\nbizagi.chrono.init();","/**\r\n *   Name: BizAgi Localization Plugin\r\n *   Author: Diego Parra\r\n *   Comments:\r\n *   -   This script creates a plugin with an options hash which defines the json resources to localize\r\n */\n\n\n// Create or Define BizAgi namespace\nbizagi = typeof bizagi !== \"undefined\" ? bizagi : {};\nbizagi.util = typeof bizagi.util !== \"undefined\" ? bizagi.util : {};\n\n$.Class.extend(\"bizagi.l10n\", {\n  templateRegex: /%{([\\w-{}$.]+)(?:\\s'([^']+)')?}/,\n  templateSubExpressionRegex: /[$]{([\\w.]+)}/g },\n{\n  /*\r\n   *   Constructor\r\n   */\n  init: function init(resourceLocationDefinition) {\n    this.resourceLocationDefinition = resourceLocationDefinition;\n    this.service = new bizagi.services.service();\n    this.dictionaries = {};\n    this.dictionary = {};\n    this.readyDeferred = null;\n    this.enableCustomizations = typeof bizagi.enableCustomizations !== \"undefined\" ? bizagi.enableCustomizations : typeof BIZAGI_ENABLE_CUSTOMIZATIONS !== \"undefined\" ? BIZAGI_ENABLE_CUSTOMIZATIONS : true;\n    this.defaultDatetimeInfo = typeof BIZAGI_DEFAULT_DATETIME_INFO != \"undefined\" ? BIZAGI_DEFAULT_DATETIME_INFO : false;\n    this.useLocalAndServerResources = typeof BIZAGI_ENABLE_LOCAL_AND_SERVER_RESOURCES != \"undefined\" ? BIZAGI_ENABLE_LOCAL_AND_SERVER_RESOURCES : false;\n    this.observableElement = $(\"<div></div>\");\n    if (this.useLocalAndServerResources === true) {\n      if (typeof PouchDB != \"undefined\") {\n        this.resourcesDatabase = new PouchDB(\"Resources\", { auto_compaction: true });\n      }\n    }\n  },\n  /*\r\n      *   This methods set the langague used to localize\r\n      *   Returns a promise\r\n      */\n  setLanguage: function setLanguage(language) {\n    var self = this;\n\n    self.language = language;\n    self.readyDeferred = new $.Deferred();\n\n    // Run async method\n    $.when(self._getDictionary(language)).\n    done(function (dictionary) {\n      self.dictionary = dictionary;\n      self.isRTL = dictionary.datePickerRegional.isRTL;\n\n      // Override Time Format defined on default.aspx\n      if (self.defaultDatetimeInfo) {\n        if (self.defaultDatetimeInfo.shortDateFormat) {\n          self.overrideSpecificResource('dateFormat', self.defaultDatetimeInfo.shortDateFormat);\n        }\n\n        if (self.defaultDatetimeInfo.timeFormat) {\n          self.overrideSpecificResource('timeFormat', self.defaultDatetimeInfo.timeFormat);\n        }\n      }\n\n\n      if (self.enableCustomizations) {\n        if (self.resourceLocationDefinition[\"custom\"]) {\n          //BIZAGI_LOCAL_RESOURCES is defined only for test\n          var dictionaryService = typeof BIZAGI_LOCAL_RESOURCES !== \"undefined\" && BIZAGI_LOCAL_RESOURCES ? self.service.getResourceDictionary : self.service.getServerResourceDictionary;\n\n          // If language is the same, dont request twice culture\n          if (dictionaryService === self.service.getServerResourceDictionary && BIZAGI_LANGUAGE === self.language) {\n            // load resources overrides\n            self.service.getResourceDictionary(self.resourceLocationDefinition[\"custom\"]).done(function (overrides) {\n              self.overrideResources(overrides);\n              self.readyDeferred.resolve();\n              self.observableElement.trigger(\"setLanguage\", self.dictionary);\n            });\n          } else {\n            dictionaryService(self.resourceLocationDefinition[\"custom\"]).done(function (overrides) {\n              if (self.enableCustomizations) {\n                self.overrideResources(overrides);\n              }\n              self.readyDeferred.resolve();\n              self.observableElement.trigger(\"setLanguage\", self.dictionary);\n            });\n          }\n\n        }\n      } else {\n        self.readyDeferred.resolve();\n        self.observableElement.trigger(\"setLanguage\", self.dictionary);\n      }\n\n    });\n  },\n\n  /*\r\n      *   This methods load a set of new keys and merge to the current dictionary (LOCALLY initially)\r\n      *   Returns a promise\r\n      */\n  loadLanguageExtension: function loadLanguageExtension(language) {\n    var self = this;\n\n    self.language = language;\n    self.readyDeferred = new $.Deferred();\n\n    var loadLanguage = self.getLanguageFromCulture(language);\n    if (typeof self.resourceLocationDefinition[loadLanguage.toLowerCase()] === \"undefined\") {\n      loadLanguage = \"default\";\n    }\n\n    // Load local dictionary\n    self.service.getResourceDictionary(self.resourceLocationDefinition[loadLanguage.toLowerCase()]).\n    done(function (dictionary) {\n      self.dictionaries[language.toLowerCase()] = self.dictionaries[language.toLowerCase()] || {};\n      $.extend(self.dictionaries[language.toLowerCase()], dictionary);\n      self.readyDeferred.resolve();\n    }).\n    fail(function (_, status, errorMessage) {\n      alert(\"Can't load localization file for language: \" + language + \", \" + status + \" - \" + errorMessage);\n    });\n\n    return self.readyDeferred.promise();\n  },\n\n  /**\r\n      * Get language by culture\r\n      */\n  getLanguageFromCulture: function getLanguageFromCulture(culture) {\n    return culture.indexOf('-') !== -1 ? culture.split('-')[0] : culture;\n  },\n\n  /*\r\n      *   Get a localized name, resolving a localization complex object\r\n      */\n  resolvei18n: function resolvei18n(localizationObject) {\n    if (!localizationObject)\n    return \"\";\n    if (typeof localizationObject == \"string\")\n    return localizationObject;\n    if (this.language && this.language != \"default\") {\n      var result = localizationObject.i18n[\"default\"].languages[this.language];\n      if (result)\n      return result;\n    }\n\n    return localizationObject.i18n[\"default\"];\n  },\n  /**\r\n      *   This method returns the localized version of the resource\r\n      * @override\r\n      * @param {string} resource string Key of the resource\r\n      * @param {string} defaultValue Default value in case key does not exists\r\n      * @returns string resource found or default value\r\n      */\n  getResource: function getResource(resource, defaultValue) {\n    var self = this;\n\n    // Return original resource when not found on dictionary\n    if (self.dictionary[resource] == null)\n    return defaultValue !== undefined ? defaultValue : resource;\n\n    // if found return translated resource\n    return self.dictionary[resource];\n  },\n\n  /**\r\n      * Complete the key depending on the number of elements\r\n      * @param {string} key \r\n      * @param {number} numberElements \r\n      */\n  getResourceByElementsNumber: function getResourceByElementsNumber(key, numberElements) {\n    var self = this;\n    if (numberElements > 1) {\n      return self.getResource(key + '-plural');\n    } else\n    {\n      return self.getResource(key + '-singular');\n    }\n  },\n\n  /*\r\n      *   This method set the localized version of the resource\r\n      */\n  setResource: function setResource(resource, value) {\n    var self = this;\n    if (resource && resource !== \"\") {\n      self.dictionary[resource] = value;\n    }\n  },\n  /**\r\n      *\r\n      * @param {string} messageStatus\r\n      * @param {'error' | *} messageType\r\n      * @param {string[]} [params]\r\n      * @param {boolean} [isFromServer]\r\n      */\n  getMessageFromLocalization: function getMessageFromLocalization(messageStatus, messageType, params, isFromServer) {\n    var message = \"\";\n\n    if (messageType === \"error\") {\n      //Checks if the message comes from the server, so add it as it comes\n      if (isFromServer) {\n        message = messageStatus;\n      } else {\n        messageStatus = messageStatus.toLowerCase();\n\n        //Try to capture the error from the localization files\n        message = bizagi.localization.getResource(\"workportal-general-error-\" + messageStatus);\n\n        //If is message does´nt exist, add the generic error\n        if (message === \"workportal-general-error-\" + messageStatus) {\n          var auxMessage = bizagi.localization.getResource(\"workportal-general-error-generic\");\n          if (auxMessage === \"workportal-general-error-generic\") {//if localization resources don't loaded\n            message = \"The request could not be completed.\";\n          }\n        }\n      }\n    } else {\n      message = bizagi.localization.getResource(messageStatus);\n    }\n\n    //Checks is there is any extraparameter, to customise a field inside the error message\n    if (params) {\n      for (var i = 0; i < params.length; i++) {\n        message = message.replace(\"{\" + i + \"}\", params[i]);\n      }\n    }\n\n    return message;\n  },\n  /*\r\n      *   This method locates all the localization hints (%) and translates the full text\r\n      */\n  translate: function translate(text) {\n    var self = this;\n\n    var nextToken;\n    do {\n      nextToken = this.Class.templateRegex.exec(text);\n\n      if (nextToken) {\n        var enclosedValue = nextToken[1];\n        var defaultValue = nextToken.length >= 2 ? nextToken[2] : undefined;\n        if (enclosedValue.indexOf(\"$\") == -1) {\n          text = text.replaceAll(nextToken[0], self.getResource(enclosedValue, defaultValue));\n        } else {\n          var subExpressionToken = this.Class.templateSubExpressionRegex.exec(enclosedValue);\n          if (!subExpressionToken) {\n            var regEx = /[$]{([\\w.]+)}/g;\n            subExpressionToken = regEx.exec(enclosedValue);\n          }\n          text = text.replaceAll(nextToken[0], \"{{resource \" + subExpressionToken[1] + \"}}\");\n        }\n      }\n\n    } while (nextToken != null);\n\n    return text;\n  },\n  /*\r\n      *   Allow to override some resources in order to allow project customizations\r\n      */\n  overrideResources: function overrideResources(overrides) {\n    var self = this,resource,innerOverrides;\n    var userLanguage = bizagiConfig.defaultLanguage || \"default\";\n    // Only use current language overrides\n    var languageOverrides = overrides[userLanguage];\n\n    for (var resourceOverride in languageOverrides) {\n      resource = self.dictionary[resourceOverride];\n\n      if (bizagi.util.isObject(resource)) {\n        innerOverrides = languageOverrides[resourceOverride];\n\n        for (var innerResource in innerOverrides) {\n          resource[innerResource] = languageOverrides[resourceOverride][innerResource];\n        }\n      } else {\n        self.dictionary[resourceOverride] = languageOverrides[resourceOverride];\n      }\n    }\n  },\n  /*\r\n      *   Override value of specific language\r\n      */\n  overrideSpecificResource: function overrideSpecificResource(key, value) {\n    var self = this;\n    key = key || \"nodefined\";\n    value = value || \"\";\n\n    self.dictionary[key] = value;\n  },\n  /*\r\n      *   This method loads or returns a cached version of a dictionary for a given language\r\n      */\n  _getDictionary: function _getDictionary(language) {\n    var self = this;\n    var defer = new $.Deferred();\n    language = language.toLowerCase();\n\n    // Check for cache\n    if (self.dictionaries[language] != null)\n    return self.dictionaries[language];\n\n    // Load resource from web\n    var userLanguage = self._getUserLanguage(language);\n\n    if (self.useLocalAndServerResources) {\n      return self._getLocalAndServerResourcesDictionary(userLanguage);\n    }\n\n    //BIZAGI_LOCAL_RESOURCES is defined only for test\n    var dictionaryService = typeof BIZAGI_LOCAL_RESOURCES !== \"undefined\" && BIZAGI_LOCAL_RESOURCES ? self.service.getResourceDictionary : self.service.getServerResourceDictionary;\n\n    dictionaryService(self.resourceLocationDefinition[userLanguage]).\n    done(function (dictionary) {\n      self.dictionaries[language] = dictionary;\n      defer.resolve(dictionary);\n    }).\n    fail(function (_, status, errorMessage) {\n      if (typeof _.responseJSON === \"undefined\" && _.status === 0 && _.statusText === \"error\" && errorMessage === \"\") {\n        console.log(\"Can't load localization file for language: \" + language + \", \" + status + \" - \" + errorMessage);\n      } else {\n        if (_.status === 503) {\n          var dictionary = {};\n          defer.resolve(dictionary);\n        } else {\n          alert(\"Can't load localization file for language: \" + language + \", \" + status + \" - \" + errorMessage);\n        }\n      }\n\n    });\n\n    return defer.promise();\n\n  },\n\n  _getLocalAndServerResourcesDictionary: function _getLocalAndServerResourcesDictionary(language) {\n    var defer = new $.Deferred();\n    var self = this;\n    var resourceDefinition = self.resourceLocationDefinition[language];\n\n    var serverDictionaryPromise = new $.Deferred();\n    var resourcesDictionaryPromise = new $.Deferred();\n\n    self.service.getServerResourceDictionary(resourceDefinition).\n    then(function (serverDictionary) {\n      serverDictionaryPromise.resolve(serverDictionary);\n      self._saveServerResourcesInDatabase(language, serverDictionary);\n    }).\n    fail(function (_, status, errorMessage) {\n      $.when(self._getServerResourcesFromDatabase(language)).\n      then(function (dbResources) {\n        serverDictionaryPromise.resolve(dbResources);\n        console.log(\"Server resources were loaded from DB\");\n      }).\n      fail(function () {\n        serverDictionaryPromise.resolve({});\n      });\n      console.error(\"Can't load localization file (server) for language: \" + language, status, errorMessage);\n    });\n\n    self.service.getResourceDictionary(resourceDefinition).\n    then(function (resourcesDicionary) {\n      resourcesDictionaryPromise.resolve(resourcesDicionary);\n    }).\n    fail(function (_, status, errorMessage) {\n      resourcesDictionaryPromise.resolve({});\n      console.error(\"Can't load localization file (local resources) for language: \" + language, status, errorMessage);\n    });\n\n    $.when(resourcesDictionaryPromise, serverDictionaryPromise).\n    then(function (resourcesDictionary, serverDictionary) {\n      var mixedDictionary = {};\n      $.extend(mixedDictionary, resourcesDictionary, serverDictionary);\n      self.dictionaries[language] = mixedDictionary;\n      defer.resolve(mixedDictionary);\n    }).\n    fail(function () {\n      console.error(\"Error loading mixed resources\", arguments);\n      defer.reject();\n    });\n    return defer.promise();\n  },\n\n  _getServerResourcesFromDatabase: function _getServerResourcesFromDatabase(language) {\n    var resourcesDB = this.resourcesDatabase;\n    if (resourcesDB == undefined) {\n      return {};\n    }\n\n    var defer = new $.Deferred();\n    var languageDocId = language + \"-\" + (bizagiConfig && bizagiConfig.applicationUrl ? bizagiConfig.applicationUrl : \"default\");\n    $.when(bizagi.util.db.getDocument(resourcesDB, languageDocId)).\n    then(function (currentDoc) {\n      defer.resolve(currentDoc.dictionary);\n    }).\n    fail(function () {\n      defer.resolve({});\n      console.error(\"Can't load localization resources from DB for language: \", arguments);\n    });\n    return defer.promise();\n  },\n\n  _saveServerResourcesInDatabase: function _saveServerResourcesInDatabase(language, dictionary) {\n    var resourcesDB = this.resourcesDatabase;\n    if (resourcesDB == undefined) {\n      return;\n    }\n\n    var languageDocId = language + \"-\" + (bizagiConfig && bizagiConfig.applicationUrl ? bizagiConfig.applicationUrl : \"default\");\n    $.when(bizagi.util.db.getDocument(resourcesDB, languageDocId)).\n    then(function (currentDoc) {\n      currentDoc.dictionary = dictionary;\n      bizagi.util.db.saveDocument(resourcesDB, currentDoc);\n    }).\n    fail(function () {\n      var document = {\n        language: language,\n        dictionary: dictionary,\n        _id: languageDocId };\n\n      bizagi.util.db.saveDocument(resourcesDB, document);\n    });\n  },\n\n  /**\r\n      * Get user language \r\n      * @param {string} language \r\n      * @returns \r\n      */\n\n  _getUserLanguage: function _getUserLanguage(language) {\n    var self = this;\n    // Load resource from web\n    var userLanguage = language;\n    if (userLanguage.length > 0)\n    {\n      if (self.resourceLocationDefinition[userLanguage] == null) {\n        // Retry with a lesser language\n        var userLanguageParts = userLanguage.split(\"-\");\n        userLanguage = userLanguageParts[0];\n      }\n    }\n    if (userLanguage.length == 0 || self.resourceLocationDefinition[userLanguage] == null) {\n      // Return default language\n      bizagi.log(\"No resource definition location has been given for language :\" + language + \", loading default language\");\n      userLanguage = \"default\";\n    }\n\n    return userLanguage;\n  },\n\n  /*\r\n      *   Helps to check if the language is loaded\r\n      */\n  ready: function ready() {\n    var self = this;\n    return self.readyDeferred.promise();\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /*! Build Number: 2.3.1 */\n/******/(function (modules) {// webpackBootstrap\n  /******/ // The module cache\n  /******/var installedModules = {};\n\n  /******/ // The require function\n  /******/function __webpack_require__(moduleId) {\n\n    /******/ // Check if module is in cache\n    /******/if (installedModules[moduleId])\n      /******/return installedModules[moduleId].exports;\n\n    /******/ // Create a new module (and put it into the cache)\n    /******/var module = installedModules[moduleId] = {\n      /******/exports: {},\n      /******/id: moduleId,\n      /******/loaded: false\n      /******/ };\n\n    /******/ // Execute the module function\n    /******/modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n    /******/ // Flag the module as loaded\n    /******/module.loaded = true;\n\n    /******/ // Return the exports of the module\n    /******/return module.exports;\n    /******/}\n\n\n  /******/ // expose the modules object (__webpack_modules__)\n  /******/__webpack_require__.m = modules;\n\n  /******/ // expose the module cache\n  /******/__webpack_require__.c = installedModules;\n\n  /******/ // __webpack_public_path__\n  /******/__webpack_require__.p = \"\";\n\n  /******/ // Load entry module and return exports\n  /******/return __webpack_require__(0);\n  /******/})(\n/************************************************************************/\n/******/[\n/* 0 */\n/***/function (module, exports, __webpack_require__) {\n\n  // Main entry point to pull together everything needed for the WDC shim library\n  // This file will be exported as a bundled js file by webpack so it can be included\n  // in a <script> tag in an html document. Alernatively, a connector may include\n  // this whole package in their code and would need to call init like this\n  var tableauwdc = __webpack_require__(20);\n  tableauwdc.init();\n\n\n  /***/},\n/* 1 */\n/***/function (module, exports, __webpack_require__) {\n\n  var APPROVED_ORIGINS_KEY = \"wdc_approved_origins\";\n  var SEPARATOR = \",\";\n  var Cookies = __webpack_require__(9);\n\n  function _getApprovedOriginsValue() {\n    var result = Cookies.get(APPROVED_ORIGINS_KEY);\n    return result;\n  }\n\n  function _saveApprovedOrigins(originArray) {\n    var newOriginString = originArray.join(SEPARATOR);\n    console.log(\"Saving approved origins '\" + newOriginString + \"'\");\n\n    // We could potentially make this a longer term cookie instead of just for the current session\n    var result = Cookies.set(APPROVED_ORIGINS_KEY, newOriginString);\n    return result;\n  }\n\n  // Adds an approved origins to the list already saved in a session cookie\n  function addApprovedOrigin(origin) {\n    if (origin) {\n      var origins = getApprovedOrigins();\n      origins.push(origin);\n      _saveApprovedOrigins(origins);\n    }\n  }\n\n  // Retrieves the origins which have already been approved by the user\n  function getApprovedOrigins() {\n    var originsString = _getApprovedOriginsValue();\n    if (!originsString || 0 === originsString.length) {\n      return [];\n    }\n\n    var origins = originsString.split(SEPARATOR);\n    return origins;\n  }\n\n  module.exports.addApprovedOrigin = addApprovedOrigin;\n  module.exports.getApprovedOrigins = getApprovedOrigins;\n\n\n  /***/},\n/* 2 */\n/***/function (module, exports) {\n\n  /** This file lists all of the enums which should available for the WDC */\n  var allEnums = {\n    phaseEnum: {\n      interactivePhase: \"interactive\",\n      authPhase: \"auth\",\n      gatherDataPhase: \"gatherData\" },\n\n\n    authPurposeEnum: {\n      ephemeral: \"ephemeral\",\n      enduring: \"enduring\" },\n\n\n    authTypeEnum: {\n      none: \"none\",\n      basic: \"basic\",\n      custom: \"custom\" },\n\n\n    dataTypeEnum: {\n      bool: \"bool\",\n      date: \"date\",\n      datetime: \"datetime\",\n      \"float\": \"float\",\n      \"int\": \"int\",\n      string: \"string\",\n      geometry: \"geometry\" },\n\n\n    columnRoleEnum: {\n      dimension: \"dimension\",\n      measure: \"measure\" },\n\n\n    columnTypeEnum: {\n      continuous: \"continuous\",\n      discrete: \"discrete\" },\n\n\n    aggTypeEnum: {\n      sum: \"sum\",\n      avg: \"avg\",\n      median: \"median\",\n      count: \"count\",\n      countd: \"count_dist\" },\n\n\n    geographicRoleEnum: {\n      area_code: \"area_code\",\n      cbsa_msa: \"cbsa_msa\",\n      city: \"city\",\n      congressional_district: \"congressional_district\",\n      country_region: \"country_region\",\n      county: \"county\",\n      state_province: \"state_province\",\n      zip_code_postcode: \"zip_code_postcode\",\n      latitude: \"latitude\",\n      longitude: \"longitude\" },\n\n\n    unitsFormatEnum: {\n      thousands: \"thousands\",\n      millions: \"millions\",\n      billions_english: \"billions_english\",\n      billions_standard: \"billions_standard\" },\n\n\n    numberFormatEnum: {\n      number: \"number\",\n      currency: \"currency\",\n      scientific: \"scientific\",\n      percentage: \"percentage\" },\n\n\n    localeEnum: {\n      america: \"en-us\",\n      brazil: \"pt-br\",\n      china: \"zh-cn\",\n      france: \"fr-fr\",\n      germany: \"de-de\",\n      japan: \"ja-jp\",\n      korea: \"ko-kr\",\n      spain: \"es-es\" },\n\n\n    joinEnum: {\n      inner: \"inner\",\n      left: \"left\" } };\n\n\n\n  // Applies the enums as properties of the target object\n  function apply(target) {\n    for (var key in allEnums) {\n      target[key] = allEnums[key];\n    }\n  }\n\n  module.exports.apply = apply;\n\n\n  /***/},\n/* 3 */\n/***/function (module, exports) {\n\n  /** @class Used for communicating between Tableau desktop/server and the WDC's\r\n                                 * Javascript. is predominantly a pass-through to the Qt WebBridge methods\r\n                                 * @param nativeApiRootObj {Object} - The root object where the native Api methods\r\n                                 * are available. For WebKit, this is window.\r\n                                 */\n  function NativeDispatcher(nativeApiRootObj) {\n    this.nativeApiRootObj = nativeApiRootObj;\n    this._initPublicInterface();\n    this._initPrivateInterface();\n  }\n\n  NativeDispatcher.prototype._initPublicInterface = function () {\n    console.log(\"Initializing public interface for NativeDispatcher\");\n    this._submitCalled = false;\n\n    var publicInterface = {};\n    publicInterface.abortForAuth = this._abortForAuth.bind(this);\n    publicInterface.abortWithError = this._abortWithError.bind(this);\n    publicInterface.addCrossOriginException = this._addCrossOriginException.bind(this);\n    publicInterface.log = this._log.bind(this);\n    publicInterface.submit = this._submit.bind(this);\n    publicInterface.reportProgress = this._reportProgress.bind(this);\n\n    this.publicInterface = publicInterface;\n  };\n\n  NativeDispatcher.prototype._abortForAuth = function (msg) {\n    this.nativeApiRootObj.WDCBridge_Api_abortForAuth.api(msg);\n  };\n\n  NativeDispatcher.prototype._abortWithError = function (msg) {\n    this.nativeApiRootObj.WDCBridge_Api_abortWithError.api(msg);\n  };\n\n  NativeDispatcher.prototype._addCrossOriginException = function (destOriginList) {\n    this.nativeApiRootObj.WDCBridge_Api_addCrossOriginException.api(destOriginList);\n  };\n\n  NativeDispatcher.prototype._log = function (msg) {\n    this.nativeApiRootObj.WDCBridge_Api_log.api(msg);\n  };\n\n  NativeDispatcher.prototype._submit = function () {\n    if (this._submitCalled) {\n      console.log(\"submit called more than once\");\n      return;\n    }\n\n    this._submitCalled = true;\n    this.nativeApiRootObj.WDCBridge_Api_submit.api();\n  };\n\n  NativeDispatcher.prototype._initPrivateInterface = function () {\n    console.log(\"Initializing private interface for NativeDispatcher\");\n\n    this._initCallbackCalled = false;\n    this._shutdownCallbackCalled = false;\n\n    var privateInterface = {};\n    privateInterface._initCallback = this._initCallback.bind(this);\n    privateInterface._shutdownCallback = this._shutdownCallback.bind(this);\n    privateInterface._schemaCallback = this._schemaCallback.bind(this);\n    privateInterface._tableDataCallback = this._tableDataCallback.bind(this);\n    privateInterface._dataDoneCallback = this._dataDoneCallback.bind(this);\n\n    this.privateInterface = privateInterface;\n  };\n\n  NativeDispatcher.prototype._initCallback = function () {\n    if (this._initCallbackCalled) {\n      console.log(\"initCallback called more than once\");\n      return;\n    }\n\n    this._initCallbackCalled = true;\n    this.nativeApiRootObj.WDCBridge_Api_initCallback.api();\n  };\n\n  NativeDispatcher.prototype._shutdownCallback = function () {\n    if (this._shutdownCallbackCalled) {\n      console.log(\"shutdownCallback called more than once\");\n      return;\n    }\n\n    this._shutdownCallbackCalled = true;\n    this.nativeApiRootObj.WDCBridge_Api_shutdownCallback.api();\n  };\n\n  NativeDispatcher.prototype._schemaCallback = function (schema, standardConnections) {\n    // Check to make sure we are using a version of desktop which has the WDCBridge_Api_schemaCallbackEx defined\n    if (!!this.nativeApiRootObj.WDCBridge_Api_schemaCallbackEx) {\n      // Providing standardConnections is optional but we can't pass undefined back because Qt will choke\n      this.nativeApiRootObj.WDCBridge_Api_schemaCallbackEx.api(schema, standardConnections || []);\n    } else {\n      this.nativeApiRootObj.WDCBridge_Api_schemaCallback.api(schema);\n    }\n  };\n\n  NativeDispatcher.prototype._tableDataCallback = function (tableName, data) {\n    this.nativeApiRootObj.WDCBridge_Api_tableDataCallback.api(tableName, data);\n  };\n\n  NativeDispatcher.prototype._reportProgress = function (progress) {\n    // Report progress was added in 2.1 so it may not be available if Tableau only knows 2.0\n    if (!!this.nativeApiRootObj.WDCBridge_Api_reportProgress) {\n      this.nativeApiRootObj.WDCBridge_Api_reportProgress.api(progress);\n    } else {\n      console.log(\"reportProgress not available from this Tableau version\");\n    }\n  };\n\n  NativeDispatcher.prototype._dataDoneCallback = function () {\n    this.nativeApiRootObj.WDCBridge_Api_dataDoneCallback.api();\n  };\n\n  module.exports = NativeDispatcher;\n\n\n  /***/},\n/* 4 */\n/***/function (module, exports, __webpack_require__) {\n\n  var Table = __webpack_require__(6);\n  var Enums = __webpack_require__(2);\n\n  /** @class This class represents the shared parts of the javascript\r\n                                      * library which do not have any dependence on whether we are running in\r\n                                      * the simulator, in Tableau, or anywhere else\r\n                                      * @param tableauApiObj {Object} - The already created tableau API object (usually window.tableau)\r\n                                      * @param privateApiObj {Object} - The already created private API object (usually window._tableau)\r\n                                      * @param globalObj {Object} - The global object to attach things to (usually window)\r\n                                      */\n  function Shared(tableauApiObj, privateApiObj, globalObj) {\n    this.privateApiObj = privateApiObj;\n    this.globalObj = globalObj;\n    this._hasAlreadyThrownErrorSoDontThrowAgain = false;\n\n    this.changeTableauApiObj(tableauApiObj);\n  }\n\n\n  Shared.prototype.init = function () {\n    console.log(\"Initializing shared WDC\");\n    this.globalObj.onerror = this._errorHandler.bind(this);\n\n    // Initialize the functions which will be invoked by the native code\n    this._initTriggerFunctions();\n\n    // Assign the deprecated functions which aren't availible in this version of the API\n    this._initDeprecatedFunctions();\n  };\n\n  Shared.prototype.changeTableauApiObj = function (tableauApiObj) {\n    this.tableauApiObj = tableauApiObj;\n\n    // Assign our make & register functions right away because a connector can use\n    // them immediately, even before bootstrapping has completed\n    this.tableauApiObj.makeConnector = this._makeConnector.bind(this);\n    this.tableauApiObj.registerConnector = this._registerConnector.bind(this);\n\n    Enums.apply(this.tableauApiObj);\n  };\n\n  Shared.prototype._errorHandler = function (message, file, line, column, errorObj) {\n    console.error(errorObj); // print error for debugging in the browser\n    if (this._hasAlreadyThrownErrorSoDontThrowAgain) {\n      return true;\n    }\n\n    var msg = message;\n    if (errorObj) {\n      msg += \"   stack:\" + errorObj.stack;\n    } else {\n      msg += \"   file: \" + file;\n      msg += \"   line: \" + line;\n    }\n\n    if (this.tableauApiObj && this.tableauApiObj.abortWithError) {\n      this.tableauApiObj.abortWithError(msg);\n    } else {\n      throw msg;\n    }\n\n    this._hasAlreadyThrownErrorSoDontThrowAgain = true;\n    return true;\n  };\n\n  Shared.prototype._makeConnector = function () {\n    var defaultImpls = {\n      init: function init(cb) {cb();},\n      shutdown: function shutdown(cb) {cb();} };\n\n\n    return defaultImpls;\n  };\n\n  Shared.prototype._registerConnector = function (wdc) {\n\n    // do some error checking on the wdc\n    var functionNames = [\"init\", \"shutdown\", \"getSchema\", \"getData\"];\n    for (var ii = functionNames.length - 1; ii >= 0; ii--) {\n      if (typeof wdc[functionNames[ii]] !== \"function\") {\n        throw \"The connector did not define the required function: \" + functionNames[ii];\n      }\n    };\n\n    console.log(\"Connector registered\");\n\n    this.globalObj._wdc = wdc;\n    this._wdc = wdc;\n  };\n\n  Shared.prototype._initTriggerFunctions = function () {\n    this.privateApiObj.triggerInitialization = this._triggerInitialization.bind(this);\n    this.privateApiObj.triggerSchemaGathering = this._triggerSchemaGathering.bind(this);\n    this.privateApiObj.triggerDataGathering = this._triggerDataGathering.bind(this);\n    this.privateApiObj.triggerShutdown = this._triggerShutdown.bind(this);\n  };\n\n  // Starts the WDC\n  Shared.prototype._triggerInitialization = function () {\n    this._wdc.init(this.privateApiObj._initCallback);\n  };\n\n  // Starts the schema gathering process\n  Shared.prototype._triggerSchemaGathering = function () {\n    this._wdc.getSchema(this.privateApiObj._schemaCallback);\n  };\n\n  // Starts the data gathering process\n  Shared.prototype._triggerDataGathering = function (tablesAndIncrementValues) {\n    if (tablesAndIncrementValues.length != 1) {\n      throw \"Unexpected number of tables specified. Expected 1, actual \" + tablesAndIncrementValues.length.toString();\n    }\n\n    var tableAndIncremntValue = tablesAndIncrementValues[0];\n    var isJoinFiltered = !!tableAndIncremntValue.filterColumnId;\n    var table = new Table(\n    tableAndIncremntValue.tableInfo,\n    tableAndIncremntValue.incrementValue,\n    isJoinFiltered,\n    tableAndIncremntValue.filterColumnId || '',\n    tableAndIncremntValue.filterValues || [],\n    this.privateApiObj._tableDataCallback);\n\n    this._wdc.getData(table, this.privateApiObj._dataDoneCallback);\n  };\n\n  // Tells the WDC it's time to shut down\n  Shared.prototype._triggerShutdown = function () {\n    this._wdc.shutdown(this.privateApiObj._shutdownCallback);\n  };\n\n  // Initializes a series of global callbacks which have been deprecated in version 2.0.0\n  Shared.prototype._initDeprecatedFunctions = function () {\n    this.tableauApiObj.initCallback = this._initCallback.bind(this);\n    this.tableauApiObj.headersCallback = this._headersCallback.bind(this);\n    this.tableauApiObj.dataCallback = this._dataCallback.bind(this);\n    this.tableauApiObj.shutdownCallback = this._shutdownCallback.bind(this);\n  };\n\n  Shared.prototype._initCallback = function () {\n    this.tableauApiObj.abortWithError(\"tableau.initCallback has been deprecated in version 2.0.0. Please use the callback function passed to init\");\n  };\n\n  Shared.prototype._headersCallback = function (fieldNames, types) {\n    this.tableauApiObj.abortWithError(\"tableau.headersCallback has been deprecated in version 2.0.0\");\n  };\n\n  Shared.prototype._dataCallback = function (data, lastRecordToken, moreData) {\n    this.tableauApiObj.abortWithError(\"tableau.dataCallback has been deprecated in version 2.0.0\");\n  };\n\n  Shared.prototype._shutdownCallback = function () {\n    this.tableauApiObj.abortWithError(\"tableau.shutdownCallback has been deprecated in version 2.0.0. Please use the callback function passed to shutdown\");\n  };\n\n  module.exports = Shared;\n\n\n  /***/},\n/* 5 */\n/***/function (module, exports, __webpack_require__) {\n\n  var ApprovedOrigins = __webpack_require__(1);\n\n  // Required for IE & Edge which don't support endsWith\n  __webpack_require__(8);\n\n  /** @class Used for communicating between the simulator and web data connector. It does\r\n                          * this by passing messages between the WDC window and its parent window\r\n                          * @param globalObj {Object} - the global object to find tableau interfaces as well\r\n                          * as register events (usually window)\r\n                          */\n  function SimulatorDispatcher(globalObj) {\n    this.globalObj = globalObj;\n    this._initMessageHandling();\n    this._initPublicInterface();\n    this._initPrivateInterface();\n  }\n\n  SimulatorDispatcher.prototype._initMessageHandling = function () {\n    console.log(\"Initializing message handling\");\n    this.globalObj.addEventListener('message', this._receiveMessage.bind(this), false);\n    this.globalObj.document.addEventListener(\"DOMContentLoaded\", this._onDomContentLoaded.bind(this));\n  };\n\n  SimulatorDispatcher.prototype._onDomContentLoaded = function () {\n    // Attempt to notify the simulator window that the WDC has loaded\n    if (this.globalObj.parent !== window) {\n      this.globalObj.parent.postMessage(this._buildMessagePayload('loaded'), '*');\n    }\n\n    if (this.globalObj.opener) {\n      try {// Wrap in try/catch for older versions of IE\n        this.globalObj.opener.postMessage(this._buildMessagePayload('loaded'), '*');\n      } catch (e) {\n        console.warn('Some versions of IE may not accurately simulate the Web Data Connector. Please retry on a Webkit based browser');\n      }\n    }\n  };\n\n  SimulatorDispatcher.prototype._packagePropertyValues = function () {\n    var propValues = {\n      \"connectionName\": this.globalObj.tableau.connectionName,\n      \"connectionData\": this.globalObj.tableau.connectionData,\n      \"password\": this.globalObj.tableau.password,\n      \"username\": this.globalObj.tableau.username,\n      \"usernameAlias\": this.globalObj.tableau.usernameAlias,\n      \"incrementalExtractColumn\": this.globalObj.tableau.incrementalExtractColumn,\n      \"versionNumber\": this.globalObj.tableau.versionNumber,\n      \"locale\": this.globalObj.tableau.locale,\n      \"authPurpose\": this.globalObj.tableau.authPurpose,\n      \"platformOS\": this.globalObj.tableau.platformOS,\n      \"platformVersion\": this.globalObj.tableau.platformVersion,\n      \"platformEdition\": this.globalObj.tableau.platformEdition,\n      \"platformBuildNumber\": this.globalObj.tableau.platformBuildNumber };\n\n\n    return propValues;\n  };\n\n  SimulatorDispatcher.prototype._applyPropertyValues = function (props) {\n    if (props) {\n      this.globalObj.tableau.connectionName = props.connectionName;\n      this.globalObj.tableau.connectionData = props.connectionData;\n      this.globalObj.tableau.password = props.password;\n      this.globalObj.tableau.username = props.username;\n      this.globalObj.tableau.usernameAlias = props.usernameAlias;\n      this.globalObj.tableau.incrementalExtractColumn = props.incrementalExtractColumn;\n      this.globalObj.tableau.locale = props.locale;\n      this.globalObj.tableau.language = props.locale;\n      this.globalObj.tableau.authPurpose = props.authPurpose;\n      this.globalObj.tableau.platformOS = props.platformOS;\n      this.globalObj.tableau.platformVersion = props.platformVersion;\n      this.globalObj.tableau.platformEdition = props.platformEdition;\n      this.globalObj.tableau.platformBuildNumber = props.platformBuildNumber;\n    }\n  };\n\n  SimulatorDispatcher.prototype._buildMessagePayload = function (msgName, msgData, props) {\n    var msgObj = { \"msgName\": msgName, \"msgData\": msgData, \"props\": props, \"version\": \"2.3.1\" };\n    return JSON.stringify(msgObj);\n  };\n\n  SimulatorDispatcher.prototype._sendMessage = function (msgName, msgData) {\n    var messagePayload = this._buildMessagePayload(msgName, msgData, this._packagePropertyValues());\n\n    // Check first to see if we have a messageHandler defined to post the message to\n    if (typeof this.globalObj.webkit != 'undefined' &&\n    typeof this.globalObj.webkit.messageHandlers != 'undefined' &&\n    typeof this.globalObj.webkit.messageHandlers.wdcHandler != 'undefined') {\n      this.globalObj.webkit.messageHandlers.wdcHandler.postMessage(messagePayload);\n    } else if (!this._sourceWindow) {\n      throw \"Looks like the WDC is calling a tableau function before tableau.init() has been called.\";\n    } else {\n      // Make sure we only post this info back to the source origin the user approved in _getWebSecurityWarningConfirm\n      this._sourceWindow.postMessage(messagePayload, this._sourceOrigin);\n    }\n  };\n\n  SimulatorDispatcher.prototype._getPayloadObj = function (payloadString) {\n    var payload = null;\n    try {\n      payload = JSON.parse(payloadString);\n    } catch (e) {\n      return null;\n    }\n\n    return payload;\n  };\n\n  SimulatorDispatcher.prototype._getWebSecurityWarningConfirm = function () {\n    // Due to cross-origin security issues over https, we may not be able to retrieve _sourceWindow.\n    // Use sourceOrigin instead.\n    var origin = this._sourceOrigin;\n\n    var Uri = __webpack_require__(18);\n    var parsedOrigin = new Uri(origin);\n    var hostName = parsedOrigin.host();\n\n    var supportedHosts = [\"localhost\", \"tableau.github.io\"];\n    if (supportedHosts.indexOf(hostName) >= 0) {\n      return true;\n    }\n\n    // Whitelist Tableau domains\n    if (hostName && hostName.endsWith(\"online.tableau.com\")) {\n      return true;\n    }\n\n    var alreadyApprovedOrigins = ApprovedOrigins.getApprovedOrigins();\n    if (alreadyApprovedOrigins.indexOf(origin) >= 0) {\n      // The user has already approved this origin, no need to ask again\n      console.log(\"Already approved the origin'\" + origin + \"', not asking again\");\n      return true;\n    }\n\n    var localizedWarningTitle = this._getLocalizedString(\"webSecurityWarning\");\n    var completeWarningMsg = localizedWarningTitle + \"\\n\\n\" + hostName + \"\\n\";\n    var isConfirmed = confirm(completeWarningMsg);\n\n    if (isConfirmed) {\n      // Set a session cookie to mark that we've approved this already\n      ApprovedOrigins.addApprovedOrigin(origin);\n    }\n\n    return isConfirmed;\n  };\n\n  SimulatorDispatcher.prototype._getCurrentLocale = function () {\n    // Use current browser's locale to get a localized warning message\n    var currentBrowserLanguage = navigator.language || navigator.userLanguage;\n    var locale = currentBrowserLanguage ? currentBrowserLanguage.substring(0, 2) : \"en\";\n\n    var supportedLocales = [\"de\", \"en\", \"es\", \"fr\", \"ja\", \"ko\", \"pt\", \"zh\"];\n    // Fall back to English for other unsupported lanaguages\n    if (supportedLocales.indexOf(locale) < 0) {\n      locale = 'en';\n    }\n\n    return locale;\n  };\n\n  SimulatorDispatcher.prototype._getLocalizedString = function (stringKey) {\n    var locale = this._getCurrentLocale();\n\n    // Use static require here, otherwise webpack would generate a much bigger JS file\n    var deStringsMap = __webpack_require__(10);\n    var enStringsMap = __webpack_require__(11);\n    var esStringsMap = __webpack_require__(12);\n    var jaStringsMap = __webpack_require__(14);\n    var frStringsMap = __webpack_require__(13);\n    var koStringsMap = __webpack_require__(15);\n    var ptStringsMap = __webpack_require__(16);\n    var zhStringsMap = __webpack_require__(17);\n\n    var stringJsonMapByLocale =\n    {\n      \"de\": deStringsMap,\n      \"en\": enStringsMap,\n      \"es\": esStringsMap,\n      \"fr\": frStringsMap,\n      \"ja\": jaStringsMap,\n      \"ko\": koStringsMap,\n      \"pt\": ptStringsMap,\n      \"zh\": zhStringsMap };\n\n\n    var localizedStringsJson = stringJsonMapByLocale[locale];\n    return localizedStringsJson[stringKey];\n  };\n\n  SimulatorDispatcher.prototype._receiveMessage = function (evt) {\n    console.log(\"Received message!\");\n\n    var wdc = this.globalObj._wdc;\n    if (!wdc) {\n      throw \"No WDC registered. Did you forget to call tableau.registerConnector?\";\n    }\n\n    var payloadObj = this._getPayloadObj(evt.data);\n    if (!payloadObj) return; // This message is not needed for WDC\n\n    if (!this._sourceWindow) {\n      this._sourceWindow = evt.source;\n      this._sourceOrigin = evt.origin;\n    }\n\n    var msgData = payloadObj.msgData;\n    this._applyPropertyValues(payloadObj.props);\n\n    switch (payloadObj.msgName) {\n      case \"init\":\n        // Warn users about possible phinishing attacks\n        var confirmResult = this._getWebSecurityWarningConfirm();\n        if (!confirmResult) {\n          window.close();\n        } else {\n          this.globalObj.tableau.phase = msgData.phase;\n          this.globalObj._tableau.triggerInitialization();\n        }\n\n        break;\n      case \"shutdown\":\n        this.globalObj._tableau.triggerShutdown();\n        break;\n      case \"getSchema\":\n        this.globalObj._tableau.triggerSchemaGathering();\n        break;\n      case \"getData\":\n        this.globalObj._tableau.triggerDataGathering(msgData.tablesAndIncrementValues);\n        break;}\n\n  };\n\n  /**** PUBLIC INTERFACE *****/\n  SimulatorDispatcher.prototype._initPublicInterface = function () {\n    console.log(\"Initializing public interface\");\n    this._submitCalled = false;\n\n    var publicInterface = {};\n    publicInterface.abortForAuth = this._abortForAuth.bind(this);\n    publicInterface.abortWithError = this._abortWithError.bind(this);\n    publicInterface.addCrossOriginException = this._addCrossOriginException.bind(this);\n    publicInterface.log = this._log.bind(this);\n    publicInterface.reportProgress = this._reportProgress.bind(this);\n    publicInterface.submit = this._submit.bind(this);\n\n    // Assign the public interface to this\n    this.publicInterface = publicInterface;\n  };\n\n  SimulatorDispatcher.prototype._abortForAuth = function (msg) {\n    this._sendMessage(\"abortForAuth\", { \"msg\": msg });\n  };\n\n  SimulatorDispatcher.prototype._abortWithError = function (msg) {\n    this._sendMessage(\"abortWithError\", { \"errorMsg\": msg });\n  };\n\n  SimulatorDispatcher.prototype._addCrossOriginException = function (destOriginList) {\n    // Don't bother passing this back to the simulator since there's nothing it can\n    // do. Just call back to the WDC indicating that it worked\n    console.log(\"Cross Origin Exception requested in the simulator. Pretending to work.\");\n    setTimeout(function () {\n      this.globalObj._wdc.addCrossOriginExceptionCompleted(destOriginList);\n    }.bind(this), 0);\n  };\n\n  SimulatorDispatcher.prototype._log = function (msg) {\n    this._sendMessage(\"log\", { \"logMsg\": msg });\n  };\n\n  SimulatorDispatcher.prototype._reportProgress = function (msg) {\n    this._sendMessage(\"reportProgress\", { \"progressMsg\": msg });\n  };\n\n  SimulatorDispatcher.prototype._submit = function () {\n    this._sendMessage(\"submit\");\n  };\n\n  /**** PRIVATE INTERFACE *****/\n  SimulatorDispatcher.prototype._initPrivateInterface = function () {\n    console.log(\"Initializing private interface\");\n\n    var privateInterface = {};\n    privateInterface._initCallback = this._initCallback.bind(this);\n    privateInterface._shutdownCallback = this._shutdownCallback.bind(this);\n    privateInterface._schemaCallback = this._schemaCallback.bind(this);\n    privateInterface._tableDataCallback = this._tableDataCallback.bind(this);\n    privateInterface._dataDoneCallback = this._dataDoneCallback.bind(this);\n\n    // Assign the private interface to this\n    this.privateInterface = privateInterface;\n  };\n\n  SimulatorDispatcher.prototype._initCallback = function () {\n    this._sendMessage(\"initCallback\");\n  };\n\n  SimulatorDispatcher.prototype._shutdownCallback = function () {\n    this._sendMessage(\"shutdownCallback\");\n  };\n\n  SimulatorDispatcher.prototype._schemaCallback = function (schema, standardConnections) {\n    this._sendMessage(\"_schemaCallback\", { \"schema\": schema, \"standardConnections\": standardConnections || [] });\n  };\n\n  SimulatorDispatcher.prototype._tableDataCallback = function (tableName, data) {\n    this._sendMessage(\"_tableDataCallback\", { \"tableName\": tableName, \"data\": data });\n  };\n\n  SimulatorDispatcher.prototype._dataDoneCallback = function () {\n    this._sendMessage(\"_dataDoneCallback\");\n  };\n\n  module.exports = SimulatorDispatcher;\n\n\n  /***/},\n/* 6 */\n/***/function (module, exports) {\n\n  /**\r\n                                 * @class Represents a single table which Tableau has requested\r\n                                 * @param tableInfo {Object} - Information about the table\r\n                                 * @param incrementValue {string=} - Incremental update value\r\n                                 */\n  function Table(tableInfo, incrementValue, isJoinFiltered, filterColumnId, filterValues, dataCallbackFn) {\n    /** @member {Object} Information about the table which has been requested. This is\r\n                                                                                                           guaranteed to be one of the tables the connector returned in the call to getSchema. */\n    this.tableInfo = tableInfo;\n\n    /** @member {string} Defines the incremental update value for this table. Empty string if\r\n                                there is not an incremental update requested. */\n    this.incrementValue = incrementValue || \"\";\n\n    /** @member {boolean} Whether or not this table is meant to be filtered using filterValues. */\n    this.isJoinFiltered = isJoinFiltered;\n\n    /** @member {string} If this table is filtered, this is the column where the filter values\r\n                                           * should be found. */\n    this.filterColumnId = filterColumnId;\n\n    /** @member {array} An array of strings which specifies the values we want to retrieve. For\r\n                                           * example, if an ID column was the filter column, this would be a collection of IDs to retrieve. */\n    this.filterValues = filterValues;\n\n    /** @private */\n    this._dataCallbackFn = dataCallbackFn;\n\n    // bind the public facing version of this function so it can be passed around\n    this.appendRows = this._appendRows.bind(this);\n  }\n\n  /**\r\n    * @method appends the given rows to the set of data contained in this table\r\n    * @param data {array} - Either an array of arrays or an array of objects which represent\r\n    * the individual rows of data to append to this table\r\n    */\n  Table.prototype._appendRows = function (data) {\n    // Do some quick validation that this data is the format we expect\n    if (!data) {\n      console.warn(\"rows data is null or undefined\");\n      return;\n    }\n\n    if (!Array.isArray(data)) {\n      // Log a warning because the data is not an array like we expected\n      console.warn(\"Table.appendRows must take an array of arrays or array of objects\");\n      return;\n    }\n\n    // Call back with the rows for this table\n    this._dataCallbackFn(this.tableInfo.id, data);\n  };\n\n  module.exports = Table;\n\n\n  /***/},\n/* 7 */\n/***/function (module, exports) {\n\n  function copyFunctions(src, dest) {\n    for (var key in src) {\n      if (typeof src[key] === 'function') {\n        dest[key] = src[key];\n      }\n    }\n  }\n\n  /**\r\n    * This function will link the given list of properties using getter/setter referencing\r\n    * the source\r\n    * \r\n    * Important:\r\n    * The target object will be mutated\r\n    *             \r\n    * \r\n    * @param {Object} source \r\n    * @param {Object} target\r\n    * @param {Array} propertyList\r\n    */\n  function linkObjectProperties(source, target, propertyList) {\n\n    /**\r\n                                                                * Array.forEach ( supported by Edge )\r\n                                                                * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/forEach\r\n                                                               */\n\n    propertyList.forEach(function (propertyName) {\n\n      Object.defineProperty(target, propertyName, {\n        enumerable: true,\n        configurable: true,\n        get: function get() {\n          return source[propertyName];\n        },\n        set: function set(value) {\n          return source[propertyName] = value;\n        } });\n\n\n    });\n\n  }\n\n  var tableauProperties = [\n  \"authPurpose\",\n  \"authType\",\n  \"connectionData\",\n  \"connectionName\",\n  \"language\",\n  \"locale\",\n  \"logLevel\",\n  \"password\",\n  \"phase\",\n  \"platformBuildNumber\",\n  \"platformEdition\",\n  \"platformOs\",\n  \"platformVersion\",\n  \"propertiesReady\",\n  \"scriptVersion\",\n  \"username\",\n  \"usernameAlias\",\n  \"APIVersion\"];\n\n\n  module.exports.copyFunctions = copyFunctions;\n  module.exports.linkObjectProperties = linkObjectProperties;\n  module.exports.tableauProperties = tableauProperties;\n\n  /***/},\n/* 8 */\n/***/function (module, exports) {\n\n  /*! http://mths.be/endswith v0.2.0 by @mathias */\n  if (!String.prototype.endsWith) {\n    (function () {\n      'use strict'; // needed to support `apply`/`call` with `undefined`/`null`\n      var defineProperty = function () {\n        // IE 8 only supports `Object.defineProperty` on DOM elements\n        try {\n          var object = {};\n          var $defineProperty = Object.defineProperty;\n          var result = $defineProperty(object, object, object) && $defineProperty;\n        } catch (error) {}\n        return result;\n      }();\n      var toString = {}.toString;\n      var endsWith = function endsWith(search) {\n        if (this == null) {\n          throw TypeError();\n        }\n        var string = String(this);\n        if (search && toString.call(search) == '[object RegExp]') {\n          throw TypeError();\n        }\n        var stringLength = string.length;\n        var searchString = String(search);\n        var searchLength = searchString.length;\n        var pos = stringLength;\n        if (arguments.length > 1) {\n          var position = arguments[1];\n          if (position !== undefined) {\n            // `ToInteger`\n            pos = position ? Number(position) : 0;\n            if (pos != pos) {// better `isNaN`\n              pos = 0;\n            }\n          }\n        }\n        var end = Math.min(Math.max(pos, 0), stringLength);\n        var start = end - searchLength;\n        if (start < 0) {\n          return false;\n        }\n        var index = -1;\n        while (++index < searchLength) {\n          if (string.charCodeAt(start + index) != searchString.charCodeAt(index)) {\n            return false;\n          }\n        }\n        return true;\n      };\n      if (defineProperty) {\n        defineProperty(String.prototype, 'endsWith', {\n          'value': endsWith,\n          'configurable': true,\n          'writable': true });\n\n      } else {\n        String.prototype.endsWith = endsWith;\n      }\n    })();\n  }\n\n\n  /***/},\n/* 9 */\n/***/function (module, exports, __webpack_require__) {\n\n  var __WEBPACK_AMD_DEFINE_RESULT__; /*\r\n                                     * Cookies.js - 1.2.3\r\n                                     * https://github.com/ScottHamper/Cookies\r\n                                     *\r\n                                     * This is free and unencumbered software released into the public domain.\r\n                                     */\n  (function (global, undefined) {\n    'use strict';\n\n    var factory = function factory(window) {\n      if (_typeof(window.document) !== 'object') {\n        throw new Error('Cookies.js requires a `window` with a `document` object');\n      }\n\n      var Cookies = function Cookies(key, value, options) {\n        return arguments.length === 1 ?\n        Cookies.get(key) : Cookies.set(key, value, options);\n      };\n\n      // Allows for setter injection in unit tests\n      Cookies._document = window.document;\n\n      // Used to ensure cookie keys do not collide with\n      // built-in `Object` properties\n      Cookies._cacheKeyPrefix = 'cookey.'; // Hurr hurr, :)\n\n      Cookies._maxExpireDate = new Date('Fri, 31 Dec 9999 23:59:59 UTC');\n\n      Cookies.defaults = {\n        path: '/',\n        secure: false };\n\n\n      Cookies.get = function (key) {\n        if (Cookies._cachedDocumentCookie !== Cookies._document.cookie) {\n          Cookies._renewCache();\n        }\n\n        var value = Cookies._cache[Cookies._cacheKeyPrefix + key];\n\n        return value === undefined ? undefined : decodeURIComponent(value);\n      };\n\n      Cookies.set = function (key, value, options) {\n        options = Cookies._getExtendedOptions(options);\n        options.expires = Cookies._getExpiresDate(value === undefined ? -1 : options.expires);\n\n        Cookies._document.cookie = Cookies._generateCookieString(key, value, options);\n\n        return Cookies;\n      };\n\n      Cookies.expire = function (key, options) {\n        return Cookies.set(key, undefined, options);\n      };\n\n      Cookies._getExtendedOptions = function (options) {\n        return {\n          path: options && options.path || Cookies.defaults.path,\n          domain: options && options.domain || Cookies.defaults.domain,\n          expires: options && options.expires || Cookies.defaults.expires,\n          secure: options && options.secure !== undefined ? options.secure : Cookies.defaults.secure };\n\n      };\n\n      Cookies._isValidDate = function (date) {\n        return Object.prototype.toString.call(date) === '[object Date]' && !isNaN(date.getTime());\n      };\n\n      Cookies._getExpiresDate = function (expires, now) {\n        now = now || new Date();\n\n        if (typeof expires === 'number') {\n          expires = expires === Infinity ?\n          Cookies._maxExpireDate : new Date(now.getTime() + expires * 1000);\n        } else if (typeof expires === 'string') {\n          expires = new Date(expires);\n        }\n\n        if (expires && !Cookies._isValidDate(expires)) {\n          throw new Error('`expires` parameter cannot be converted to a valid Date instance');\n        }\n\n        return expires;\n      };\n\n      Cookies._generateCookieString = function (key, value, options) {\n        key = key.replace(/[^#$&+\\^`|]/g, encodeURIComponent);\n        key = key.replace(/\\(/g, '%28').replace(/\\)/g, '%29');\n        value = (value + '').replace(/[^!#$&-+\\--:<-\\[\\]-~]/g, encodeURIComponent);\n        options = options || {};\n\n        var cookieString = key + '=' + value;\n        cookieString += options.path ? ';path=' + options.path : '';\n        cookieString += options.domain ? ';domain=' + options.domain : '';\n        cookieString += options.expires ? ';expires=' + options.expires.toUTCString() : '';\n        cookieString += options.secure ? ';secure' : '';\n\n        return cookieString;\n      };\n\n      Cookies._getCacheFromString = function (documentCookie) {\n        var cookieCache = {};\n        var cookiesArray = documentCookie ? documentCookie.split('; ') : [];\n\n        for (var i = 0; i < cookiesArray.length; i++) {\n          var cookieKvp = Cookies._getKeyValuePairFromCookieString(cookiesArray[i]);\n\n          if (cookieCache[Cookies._cacheKeyPrefix + cookieKvp.key] === undefined) {\n            cookieCache[Cookies._cacheKeyPrefix + cookieKvp.key] = cookieKvp.value;\n          }\n        }\n\n        return cookieCache;\n      };\n\n      Cookies._getKeyValuePairFromCookieString = function (cookieString) {\n        // \"=\" is a valid character in a cookie value according to RFC6265, so cannot `split('=')`\n        var separatorIndex = cookieString.indexOf('=');\n\n        // IE omits the \"=\" when the cookie value is an empty string\n        separatorIndex = separatorIndex < 0 ? cookieString.length : separatorIndex;\n\n        var key = cookieString.substr(0, separatorIndex);\n        var decodedKey;\n        try {\n          decodedKey = decodeURIComponent(key);\n        } catch (e) {\n          if (console && typeof console.error === 'function') {\n            console.error('Could not decode cookie with key \"' + key + '\"', e);\n          }\n        }\n\n        return {\n          key: decodedKey,\n          value: cookieString.substr(separatorIndex + 1) // Defer decoding value until accessed\n        };\n      };\n\n      Cookies._renewCache = function () {\n        Cookies._cache = Cookies._getCacheFromString(Cookies._document.cookie);\n        Cookies._cachedDocumentCookie = Cookies._document.cookie;\n      };\n\n      Cookies._areEnabled = function () {\n        var testKey = 'cookies.js';\n        var areEnabled = Cookies.set(testKey, 1).get(testKey) === '1';\n        Cookies.expire(testKey);\n        return areEnabled;\n      };\n\n      Cookies.enabled = Cookies._areEnabled();\n\n      return Cookies;\n    };\n    var cookiesExport = global && _typeof(global.document) === 'object' ? factory(global) : factory;\n\n    // AMD support\n    if (true) {\n      !(__WEBPACK_AMD_DEFINE_RESULT__ = function () {return cookiesExport;}.call(exports, __webpack_require__, exports, module), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n      // CommonJS/Node.js support\n    } else if (_typeof(exports) === 'object') {\n      // Support Node.js specific `module.exports` (which can be a function)\n      if (_typeof(module) === 'object' && _typeof(module.exports) === 'object') {\n        exports = module.exports = cookiesExport;\n      }\n      // But always support CommonJS module 1.1.1 spec (`exports` cannot be a function)\n      exports.Cookies = cookiesExport;\n    } else {\n      global.Cookies = cookiesExport;\n    }\n  })(typeof window === 'undefined' ? this : window);\n\n  /***/},\n/* 10 */\n/***/function (module, exports) {\n\n  module.exports = { \"webSecurityWarning\": \"To help prevent malicious sites from getting access to your confidential data, confirm that you trust the following site:\" };\n\n  /***/},\n/* 11 */\n/***/function (module, exports) {\n\n  module.exports = { \"webSecurityWarning\": \"To help prevent malicious sites from getting access to your confidential data, confirm that you trust the following site:\" };\n\n  /***/},\n/* 12 */\n/***/function (module, exports) {\n\n  module.exports = { \"webSecurityWarning\": \"To help prevent malicious sites from getting access to your confidential data, confirm that you trust the following site:\" };\n\n  /***/},\n/* 13 */\n/***/function (module, exports) {\n\n  module.exports = { \"webSecurityWarning\": \"To help prevent malicious sites from getting access to your confidential data, confirm that you trust the following site:\" };\n\n  /***/},\n/* 14 */\n/***/function (module, exports) {\n\n  module.exports = { \"webSecurityWarning\": \"To help prevent malicious sites from getting access to your confidential data, confirm that you trust the following site:\" };\n\n  /***/},\n/* 15 */\n/***/function (module, exports) {\n\n  module.exports = { \"webSecurityWarning\": \"To help prevent malicious sites from getting access to your confidential data, confirm that you trust the following site:\" };\n\n  /***/},\n/* 16 */\n/***/function (module, exports) {\n\n  module.exports = { \"webSecurityWarning\": \"To help prevent malicious sites from getting access to your confidential data, confirm that you trust the following site:\" };\n\n  /***/},\n/* 17 */\n/***/function (module, exports) {\n\n  module.exports = { \"webSecurityWarning\": \"wwTo help prevent malicious sites from getting access to your confidential data, confirm that you trust the following site:\" };\n\n  /***/},\n/* 18 */\n/***/function (module, exports, __webpack_require__) {\n\n  var __WEBPACK_AMD_DEFINE_RESULT__; /*!\r\n                                     * jsUri\r\n                                     * https://github.com/derek-watson/jsUri\r\n                                     *\r\n                                     * Copyright 2013, Derek Watson\r\n                                     * Released under the MIT license.\r\n                                     *\r\n                                     * Includes parseUri regular expressions\r\n                                     * http://blog.stevenlevithan.com/archives/parseuri\r\n                                     * Copyright 2007, Steven Levithan\r\n                                     * Released under the MIT license.\r\n                                     */\n\n  /*globals define, module */\n\n  (function (global) {\n\n    var re = {\n      starts_with_slashes: /^\\/+/,\n      ends_with_slashes: /\\/+$/,\n      pluses: /\\+/g,\n      query_separator: /[&;]/,\n      uri_parser: /^(?:(?![^:@]+:[^:@\\/]*@)([^:\\/?#.]+):)?(?:\\/\\/)?((?:(([^:@\\/]*)(?::([^:@]*))?)?@)?(\\[[0-9a-fA-F:.]+\\]|[^:\\/?#]*)(?::(\\d+|(?=:)))?(:)?)((((?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/ };\n\n\n    /**\r\n                                                                                                                                                                                                                                                      * Define forEach for older js environments\r\n                                                                                                                                                                                                                                                      * @see https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/forEach#Compatibility\r\n                                                                                                                                                                                                                                                      */\n    if (!Array.prototype.forEach) {\n      Array.prototype.forEach = function (callback, thisArg) {\n        var T, k;\n\n        if (this == null) {\n          throw new TypeError(' this is null or not defined');\n        }\n\n        var O = Object(this);\n        var len = O.length >>> 0;\n\n        if (typeof callback !== \"function\") {\n          throw new TypeError(callback + ' is not a function');\n        }\n\n        if (arguments.length > 1) {\n          T = thisArg;\n        }\n\n        k = 0;\n\n        while (k < len) {\n          var kValue;\n          if (k in O) {\n            kValue = O[k];\n            callback.call(T, kValue, k, O);\n          }\n          k++;\n        }\n      };\n    }\n\n    /**\r\n       * unescape a query param value\r\n       * @param  {string} s encoded value\r\n       * @return {string}   decoded value\r\n       */\n    function decode(s) {\n      if (s) {\n        s = s.toString().replace(re.pluses, '%20');\n        s = decodeURIComponent(s);\n      }\n      return s;\n    }\n\n    /**\r\n       * Breaks a uri string down into its individual parts\r\n       * @param  {string} str uri\r\n       * @return {object}     parts\r\n       */\n    function parseUri(str) {\n      var parser = re.uri_parser;\n      var parserKeys = [\"source\", \"protocol\", \"authority\", \"userInfo\", \"user\", \"password\", \"host\", \"port\", \"isColonUri\", \"relative\", \"path\", \"directory\", \"file\", \"query\", \"anchor\"];\n      var m = parser.exec(str || '');\n      var parts = {};\n\n      parserKeys.forEach(function (key, i) {\n        parts[key] = m[i] || '';\n      });\n\n      return parts;\n    }\n\n    /**\r\n       * Breaks a query string down into an array of key/value pairs\r\n       * @param  {string} str query\r\n       * @return {array}      array of arrays (key/value pairs)\r\n       */\n    function parseQuery(str) {\n      var i, ps, p, n, k, v, l;\n      var pairs = [];\n\n      if (typeof str === 'undefined' || str === null || str === '') {\n        return pairs;\n      }\n\n      if (str.indexOf('?') === 0) {\n        str = str.substring(1);\n      }\n\n      ps = str.toString().split(re.query_separator);\n\n      for (i = 0, l = ps.length; i < l; i++) {\n        p = ps[i];\n        n = p.indexOf('=');\n\n        if (n !== 0) {\n          k = decode(p.substring(0, n));\n          v = decode(p.substring(n + 1));\n          pairs.push(n === -1 ? [p, null] : [k, v]);\n        }\n\n      }\n      return pairs;\n    }\n\n    /**\r\n       * Creates a new Uri object\r\n       * @constructor\r\n       * @param {string} str\r\n       */\n    function Uri(str) {\n      this.uriParts = parseUri(str);\n      this.queryPairs = parseQuery(this.uriParts.query);\n      this.hasAuthorityPrefixUserPref = null;\n    }\n\n    /**\r\n       * Define getter/setter methods\r\n       */\n    ['protocol', 'userInfo', 'host', 'port', 'path', 'anchor'].forEach(function (key) {\n      Uri.prototype[key] = function (val) {\n        if (typeof val !== 'undefined') {\n          this.uriParts[key] = val;\n        }\n        return this.uriParts[key];\n      };\n    });\n\n    /**\r\n         * if there is no protocol, the leading // can be enabled or disabled\r\n         * @param  {Boolean}  val\r\n         * @return {Boolean}\r\n         */\n    Uri.prototype.hasAuthorityPrefix = function (val) {\n      if (typeof val !== 'undefined') {\n        this.hasAuthorityPrefixUserPref = val;\n      }\n\n      if (this.hasAuthorityPrefixUserPref === null) {\n        return this.uriParts.source.indexOf('//') !== -1;\n      } else {\n        return this.hasAuthorityPrefixUserPref;\n      }\n    };\n\n    Uri.prototype.isColonUri = function (val) {\n      if (typeof val !== 'undefined') {\n        this.uriParts.isColonUri = !!val;\n      } else {\n        return !!this.uriParts.isColonUri;\n      }\n    };\n\n    /**\r\n        * Serializes the internal state of the query pairs\r\n        * @param  {string} [val]   set a new query string\r\n        * @return {string}         query string\r\n        */\n    Uri.prototype.query = function (val) {\n      var s = '',i,param,l;\n\n      if (typeof val !== 'undefined') {\n        this.queryPairs = parseQuery(val);\n      }\n\n      for (i = 0, l = this.queryPairs.length; i < l; i++) {\n        param = this.queryPairs[i];\n        if (s.length > 0) {\n          s += '&';\n        }\n        if (param[1] === null) {\n          s += param[0];\n        } else {\n          s += param[0];\n          s += '=';\n          if (typeof param[1] !== 'undefined') {\n            s += encodeURIComponent(param[1]);\n          }\n        }\n      }\n      return s.length > 0 ? '?' + s : s;\n    };\n\n    /**\r\n        * returns the first query param value found for the key\r\n        * @param  {string} key query key\r\n        * @return {string}     first value found for key\r\n        */\n    Uri.prototype.getQueryParamValue = function (key) {\n      var param, i, l;\n      for (i = 0, l = this.queryPairs.length; i < l; i++) {\n        param = this.queryPairs[i];\n        if (key === param[0]) {\n          return param[1];\n        }\n      }\n    };\n\n    /**\r\n        * returns an array of query param values for the key\r\n        * @param  {string} key query key\r\n        * @return {array}      array of values\r\n        */\n    Uri.prototype.getQueryParamValues = function (key) {\n      var arr = [],i,param,l;\n      for (i = 0, l = this.queryPairs.length; i < l; i++) {\n        param = this.queryPairs[i];\n        if (key === param[0]) {\n          arr.push(param[1]);\n        }\n      }\n      return arr;\n    };\n\n    /**\r\n        * removes query parameters\r\n        * @param  {string} key     remove values for key\r\n        * @param  {val}    [val]   remove a specific value, otherwise removes all\r\n        * @return {Uri}            returns self for fluent chaining\r\n        */\n    Uri.prototype.deleteQueryParam = function (key, val) {\n      var arr = [],i,param,keyMatchesFilter,valMatchesFilter,l;\n\n      for (i = 0, l = this.queryPairs.length; i < l; i++) {\n\n        param = this.queryPairs[i];\n        keyMatchesFilter = decode(param[0]) === decode(key);\n        valMatchesFilter = param[1] === val;\n\n        if (arguments.length === 1 && !keyMatchesFilter || arguments.length === 2 && (!keyMatchesFilter || !valMatchesFilter)) {\n          arr.push(param);\n        }\n      }\n\n      this.queryPairs = arr;\n\n      return this;\n    };\n\n    /**\r\n        * adds a query parameter\r\n        * @param  {string}  key        add values for key\r\n        * @param  {string}  val        value to add\r\n        * @param  {integer} [index]    specific index to add the value at\r\n        * @return {Uri}                returns self for fluent chaining\r\n        */\n    Uri.prototype.addQueryParam = function (key, val, index) {\n      if (arguments.length === 3 && index !== -1) {\n        index = Math.min(index, this.queryPairs.length);\n        this.queryPairs.splice(index, 0, [key, val]);\n      } else if (arguments.length > 0) {\n        this.queryPairs.push([key, val]);\n      }\n      return this;\n    };\n\n    /**\r\n        * test for the existence of a query parameter\r\n        * @param  {string}  key        add values for key\r\n        * @param  {string}  val        value to add\r\n        * @param  {integer} [index]    specific index to add the value at\r\n        * @return {Uri}                returns self for fluent chaining\r\n        */\n    Uri.prototype.hasQueryParam = function (key) {\n      var i,len = this.queryPairs.length;\n      for (i = 0; i < len; i++) {\n        if (this.queryPairs[i][0] == key)\n        return true;\n      }\n      return false;\n    };\n\n    /**\r\n        * replaces query param values\r\n        * @param  {string} key         key to replace value for\r\n        * @param  {string} newVal      new value\r\n        * @param  {string} [oldVal]    replace only one specific value (otherwise replaces all)\r\n        * @return {Uri}                returns self for fluent chaining\r\n        */\n    Uri.prototype.replaceQueryParam = function (key, newVal, oldVal) {\n      var index = -1,len = this.queryPairs.length,i,param;\n\n      if (arguments.length === 3) {\n        for (i = 0; i < len; i++) {\n          param = this.queryPairs[i];\n          if (decode(param[0]) === decode(key) && decodeURIComponent(param[1]) === decode(oldVal)) {\n            index = i;\n            break;\n          }\n        }\n        if (index >= 0) {\n          this.deleteQueryParam(key, decode(oldVal)).addQueryParam(key, newVal, index);\n        }\n      } else {\n        for (i = 0; i < len; i++) {\n          param = this.queryPairs[i];\n          if (decode(param[0]) === decode(key)) {\n            index = i;\n            break;\n          }\n        }\n        this.deleteQueryParam(key);\n        this.addQueryParam(key, newVal, index);\n      }\n      return this;\n    };\n\n    /**\r\n        * Define fluent setter methods (setProtocol, setHasAuthorityPrefix, etc)\r\n        */\n    ['protocol', 'hasAuthorityPrefix', 'isColonUri', 'userInfo', 'host', 'port', 'path', 'query', 'anchor'].forEach(function (key) {\n      var method = 'set' + key.charAt(0).toUpperCase() + key.slice(1);\n      Uri.prototype[method] = function (val) {\n        this[key](val);\n        return this;\n      };\n    });\n\n    /**\r\n         * Scheme name, colon and doubleslash, as required\r\n         * @return {string} http:// or possibly just //\r\n         */\n    Uri.prototype.scheme = function () {\n      var s = '';\n\n      if (this.protocol()) {\n        s += this.protocol();\n        if (this.protocol().indexOf(':') !== this.protocol().length - 1) {\n          s += ':';\n        }\n        s += '//';\n      } else {\n        if (this.hasAuthorityPrefix() && this.host()) {\n          s += '//';\n        }\n      }\n\n      return s;\n    };\n\n    /**\r\n        * Same as Mozilla nsIURI.prePath\r\n        * @return {string} scheme://user:password@host:port\r\n        * @see  https://developer.mozilla.org/en/nsIURI\r\n        */\n    Uri.prototype.origin = function () {\n      var s = this.scheme();\n\n      if (this.userInfo() && this.host()) {\n        s += this.userInfo();\n        if (this.userInfo().indexOf('@') !== this.userInfo().length - 1) {\n          s += '@';\n        }\n      }\n\n      if (this.host()) {\n        s += this.host();\n        if (this.port() || this.path() && this.path().substr(0, 1).match(/[0-9]/)) {\n          s += ':' + this.port();\n        }\n      }\n\n      return s;\n    };\n\n    /**\r\n        * Adds a trailing slash to the path\r\n        */\n    Uri.prototype.addTrailingSlash = function () {\n      var path = this.path() || '';\n\n      if (path.substr(-1) !== '/') {\n        this.path(path + '/');\n      }\n\n      return this;\n    };\n\n    /**\r\n        * Serializes the internal state of the Uri object\r\n        * @return {string}\r\n        */\n    Uri.prototype.toString = function () {\n      var path,s = this.origin();\n\n      if (this.isColonUri()) {\n        if (this.path()) {\n          s += ':' + this.path();\n        }\n      } else if (this.path()) {\n        path = this.path();\n        if (!(re.ends_with_slashes.test(s) || re.starts_with_slashes.test(path))) {\n          s += '/';\n        } else {\n          if (s) {\n            s.replace(re.ends_with_slashes, '/');\n          }\n          path = path.replace(re.starts_with_slashes, '/');\n        }\n        s += path;\n      } else {\n        if (this.host() && (this.query().toString() || this.anchor())) {\n          s += '/';\n        }\n      }\n      if (this.query().toString()) {\n        s += this.query().toString();\n      }\n\n      if (this.anchor()) {\n        if (this.anchor().indexOf('#') !== 0) {\n          s += '#';\n        }\n        s += this.anchor();\n      }\n\n      return s;\n    };\n\n    /**\r\n        * Clone a Uri object\r\n        * @return {Uri} duplicate copy of the Uri\r\n        */\n    Uri.prototype.clone = function () {\n      return new Uri(this.toString());\n    };\n\n    /**\r\n        * export via AMD or CommonJS, otherwise leak a global\r\n        */\n    if (true) {\n      !(__WEBPACK_AMD_DEFINE_RESULT__ = function () {\n        return Uri;\n      }.call(exports, __webpack_require__, exports, module), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n    } else if (typeof module !== 'undefined' && typeof module.exports !== 'undefined') {\n      module.exports = Uri;\n    } else {\n      global.Uri = Uri;\n    }\n  })(this);\n\n\n  /***/},\n/* 19 */\n/***/function (module, exports, __webpack_require__) {\n\n  /****************************************************************************\r\n                                                      **\r\n                                                      ** Copyright (C) 2016 The Qt Company Ltd.\r\n                                                      ** Copyright (C) 2016 KlarÃ¤lvdalens Datakonsult AB, a KDAB Group company, info@kdab.com, author Milian Wolff <milian.wolff@kdab.com>\r\n                                                      ** Contact: https://www.qt.io/licensing/\r\n                                                      **\r\n                                                      ** This file is part of the QtWebChannel module of the Qt Toolkit.\r\n                                                      **\r\n                                                      ** $QT_BEGIN_LICENSE:LGPL$\r\n                                                      ** Commercial License Usage\r\n                                                      ** Licensees holding valid commercial Qt licenses may use this file in\r\n                                                      ** accordance with the commercial license agreement provided with the\r\n                                                      ** Software or, alternatively, in accordance with the terms contained in\r\n                                                      ** a written agreement between you and The Qt Company. For licensing terms\r\n                                                      ** and conditions see https://www.qt.io/terms-conditions. For further\r\n                                                      ** information use the contact form at https://www.qt.io/contact-us.\r\n                                                      **\r\n                                                      ** GNU Lesser General Public License Usage\r\n                                                      ** Alternatively, this file may be used under the terms of the GNU Lesser\r\n                                                      ** General Public License version 3 as published by the Free Software\r\n                                                      ** Foundation and appearing in the file LICENSE.LGPL3 included in the\r\n                                                      ** packaging of this file. Please review the following information to\r\n                                                      ** ensure the GNU Lesser General Public License version 3 requirements\r\n                                                      ** will be met: https://www.gnu.org/licenses/lgpl-3.0.html.\r\n                                                      **\r\n                                                      ** GNU General Public License Usage\r\n                                                      ** Alternatively, this file may be used under the terms of the GNU\r\n                                                      ** General Public License version 2.0 or (at your option) the GNU General\r\n                                                      ** Public license version 3 or any later version approved by the KDE Free\r\n                                                      ** Qt Foundation. The licenses are as published by the Free Software\r\n                                                      ** Foundation and appearing in the file LICENSE.GPL2 and LICENSE.GPL3\r\n                                                      ** included in the packaging of this file. Please review the following\r\n                                                      ** information to ensure the GNU General Public License requirements will\r\n                                                      ** be met: https://www.gnu.org/licenses/gpl-2.0.html and\r\n                                                      ** https://www.gnu.org/licenses/gpl-3.0.html.\r\n                                                      **\r\n                                                      ** $QT_END_LICENSE$\r\n                                                      **\r\n                                                      ****************************************************************************/\n\n  \"use strict\";\n\n  var QWebChannelMessageTypes = {\n    signal: 1,\n    propertyUpdate: 2,\n    init: 3,\n    idle: 4,\n    debug: 5,\n    invokeMethod: 6,\n    connectToSignal: 7,\n    disconnectFromSignal: 8,\n    setProperty: 9,\n    response: 10 };\n\n\n  var QWebChannel = function QWebChannel(transport, initCallback)\n  {\n    if (_typeof(transport) !== \"object\" || typeof transport.send !== \"function\") {\n      console.error(\"The QWebChannel expects a transport object with a send function and onmessage callback property.\" +\n      \" Given is: transport: \" + _typeof(transport) + \", transport.send: \" + _typeof(transport.send));\n      return;\n    }\n\n    var channel = this;\n    this.transport = transport;\n\n    this.send = function (data)\n    {\n      if (typeof data !== \"string\") {\n        data = JSON.stringify(data);\n      }\n      channel.transport.send(data);\n    };\n\n    this.transport.onmessage = function (message)\n    {\n      var data = message.data;\n      if (typeof data === \"string\") {\n        data = JSON.parse(data);\n      }\n      switch (data.type) {\n        case QWebChannelMessageTypes.signal:\n          channel.handleSignal(data);\n          break;\n        case QWebChannelMessageTypes.response:\n          channel.handleResponse(data);\n          break;\n        case QWebChannelMessageTypes.propertyUpdate:\n          channel.handlePropertyUpdate(data);\n          break;\n        default:\n          console.error(\"invalid message received:\", message.data);\n          break;}\n\n    };\n\n    this.execCallbacks = {};\n    this.execId = 0;\n    this.exec = function (data, callback)\n    {\n      if (!callback) {\n        // if no callback is given, send directly\n        channel.send(data);\n        return;\n      }\n      if (channel.execId === Number.MAX_VALUE) {\n        // wrap\n        channel.execId = Number.MIN_VALUE;\n      }\n      if (data.hasOwnProperty(\"id\")) {\n        console.error(\"Cannot exec message with property id: \" + JSON.stringify(data));\n        return;\n      }\n      data.id = channel.execId++;\n      channel.execCallbacks[data.id] = callback;\n      channel.send(data);\n    };\n\n    this.objects = {};\n\n    this.handleSignal = function (message)\n    {\n      var object = channel.objects[message.object];\n      if (object) {\n        object.signalEmitted(message.signal, message.args);\n      } else {\n        console.warn(\"Unhandled signal: \" + message.object + \"::\" + message.signal);\n      }\n    };\n\n    this.handleResponse = function (message)\n    {\n      if (!message.hasOwnProperty(\"id\")) {\n        console.error(\"Invalid response message received: \", JSON.stringify(message));\n        return;\n      }\n      channel.execCallbacks[message.id](message.data);\n      delete channel.execCallbacks[message.id];\n    };\n\n    this.handlePropertyUpdate = function (message)\n    {\n      for (var i in message.data) {\n        var data = message.data[i];\n        var object = channel.objects[data.object];\n        if (object) {\n          object.propertyUpdate(data.signals, data.properties);\n        } else {\n          console.warn(\"Unhandled property update: \" + data.object + \"::\" + data.signal);\n        }\n      }\n      channel.exec({ type: QWebChannelMessageTypes.idle });\n    };\n\n    this.debug = function (message)\n    {\n      channel.send({ type: QWebChannelMessageTypes.debug, data: message });\n    };\n\n    channel.exec({ type: QWebChannelMessageTypes.init }, function (data) {\n      for (var objectName in data) {\n        var object = new QObject(objectName, data[objectName], channel);\n      }\n      // now unwrap properties, which might reference other registered objects\n      for (var objectName in channel.objects) {\n        channel.objects[objectName].unwrapProperties();\n      }\n      if (initCallback) {\n        initCallback(channel);\n      }\n      channel.exec({ type: QWebChannelMessageTypes.idle });\n    });\n  };\n\n  function QObject(name, data, webChannel)\n  {\n    this.__id__ = name;\n    webChannel.objects[name] = this;\n\n    // List of callbacks that get invoked upon signal emission\n    this.__objectSignals__ = {};\n\n    // Cache of all properties, updated when a notify signal is emitted\n    this.__propertyCache__ = {};\n\n    var object = this;\n\n    // ----------------------------------------------------------------------\n\n    this.unwrapQObject = function (response)\n    {\n      if (response instanceof Array) {\n        // support list of objects\n        var ret = new Array(response.length);\n        for (var i = 0; i < response.length; ++i) {\n          ret[i] = object.unwrapQObject(response[i]);\n        }\n        return ret;\n      }\n      if (!response ||\n      !response[\"__QObject*__\"] ||\n      response.id === undefined) {\n        return response;\n      }\n\n      var objectId = response.id;\n      if (webChannel.objects[objectId])\n      return webChannel.objects[objectId];\n\n      if (!response.data) {\n        console.error(\"Cannot unwrap unknown QObject \" + objectId + \" without data.\");\n        return;\n      }\n\n      var qObject = new QObject(objectId, response.data, webChannel);\n      qObject.destroyed.connect(function () {\n        if (webChannel.objects[objectId] === qObject) {\n          delete webChannel.objects[objectId];\n          // reset the now deleted QObject to an empty {} object\n          // just assigning {} though would not have the desired effect, but the\n          // below also ensures all external references will see the empty map\n          // NOTE: this detour is necessary to workaround QTBUG-40021\n          var propertyNames = [];\n          for (var propertyName in qObject) {\n            propertyNames.push(propertyName);\n          }\n          for (var idx in propertyNames) {\n            delete qObject[propertyNames[idx]];\n          }\n        }\n      });\n      // here we are already initialized, and thus must directly unwrap the properties\n      qObject.unwrapProperties();\n      return qObject;\n    };\n\n    this.unwrapProperties = function ()\n    {\n      for (var propertyIdx in object.__propertyCache__) {\n        object.__propertyCache__[propertyIdx] = object.unwrapQObject(object.__propertyCache__[propertyIdx]);\n      }\n    };\n\n    function addSignal(signalData, isPropertyNotifySignal)\n    {\n      var signalName = signalData[0];\n      var signalIndex = signalData[1];\n      object[signalName] = {\n        connect: function connect(callback) {\n          if (typeof callback !== \"function\") {\n            console.error(\"Bad callback given to connect to signal \" + signalName);\n            return;\n          }\n\n          object.__objectSignals__[signalIndex] = object.__objectSignals__[signalIndex] || [];\n          object.__objectSignals__[signalIndex].push(callback);\n\n          if (!isPropertyNotifySignal && signalName !== \"destroyed\") {\n            // only required for \"pure\" signals, handled separately for properties in propertyUpdate\n            // also note that we always get notified about the destroyed signal\n            webChannel.exec({\n              type: QWebChannelMessageTypes.connectToSignal,\n              object: object.__id__,\n              signal: signalIndex });\n\n          }\n        },\n        disconnect: function disconnect(callback) {\n          if (typeof callback !== \"function\") {\n            console.error(\"Bad callback given to disconnect from signal \" + signalName);\n            return;\n          }\n          object.__objectSignals__[signalIndex] = object.__objectSignals__[signalIndex] || [];\n          var idx = object.__objectSignals__[signalIndex].indexOf(callback);\n          if (idx === -1) {\n            console.error(\"Cannot find connection of signal \" + signalName + \" to \" + callback.name);\n            return;\n          }\n          object.__objectSignals__[signalIndex].splice(idx, 1);\n          if (!isPropertyNotifySignal && object.__objectSignals__[signalIndex].length === 0) {\n            // only required for \"pure\" signals, handled separately for properties in propertyUpdate\n            webChannel.exec({\n              type: QWebChannelMessageTypes.disconnectFromSignal,\n              object: object.__id__,\n              signal: signalIndex });\n\n          }\n        } };\n\n    }\n\n    /**\r\n       * Invokes all callbacks for the given signalname. Also works for property notify callbacks.\r\n       */\n    function invokeSignalCallbacks(signalName, signalArgs)\n    {\n      var connections = object.__objectSignals__[signalName];\n      if (connections) {\n        connections.forEach(function (callback) {\n          callback.apply(callback, signalArgs);\n        });\n      }\n    }\n\n    this.propertyUpdate = function (signals, propertyMap)\n    {\n      // update property cache\n      for (var propertyIndex in propertyMap) {\n        var propertyValue = propertyMap[propertyIndex];\n        object.__propertyCache__[propertyIndex] = propertyValue;\n      }\n\n      for (var signalName in signals) {\n        // Invoke all callbacks, as signalEmitted() does not. This ensures the\n        // property cache is updated before the callbacks are invoked.\n        invokeSignalCallbacks(signalName, signals[signalName]);\n      }\n    };\n\n    this.signalEmitted = function (signalName, signalArgs)\n    {\n      invokeSignalCallbacks(signalName, this.unwrapQObject(signalArgs));\n    };\n\n    function addMethod(methodData)\n    {\n      var methodName = methodData[0];\n      var methodIdx = methodData[1];\n      object[methodName] = function () {\n        var args = [];\n        var callback;\n        for (var i = 0; i < arguments.length; ++i) {\n          var argument = arguments[i];\n          if (typeof argument === \"function\")\n          callback = argument;else\n          if (argument instanceof QObject && webChannel.objects[argument.__id__] !== undefined)\n          args.push({\n            \"id\": argument.__id__ });else\n\n\n          args.push(argument);\n        }\n\n        webChannel.exec({\n          \"type\": QWebChannelMessageTypes.invokeMethod,\n          \"object\": object.__id__,\n          \"method\": methodIdx,\n          \"args\": args },\n        function (response) {\n          if (response !== undefined) {\n            var result = object.unwrapQObject(response);\n            if (callback) {\n              callback(result);\n            }\n          }\n        });\n      };\n    }\n\n    function bindGetterSetter(propertyInfo)\n    {\n      var propertyIndex = propertyInfo[0];\n      var propertyName = propertyInfo[1];\n      var notifySignalData = propertyInfo[2];\n      // initialize property cache with current value\n      // NOTE: if this is an object, it is not directly unwrapped as it might\n      // reference other QObject that we do not know yet\n      object.__propertyCache__[propertyIndex] = propertyInfo[3];\n\n      if (notifySignalData) {\n        if (notifySignalData[0] === 1) {\n          // signal name is optimized away, reconstruct the actual name\n          notifySignalData[0] = propertyName + \"Changed\";\n        }\n        addSignal(notifySignalData, true);\n      }\n\n      Object.defineProperty(object, propertyName, {\n        configurable: true,\n        get: function get() {\n          var propertyValue = object.__propertyCache__[propertyIndex];\n          if (propertyValue === undefined) {\n            // This shouldn't happen\n            console.warn(\"Undefined value in property cache for property \\\"\" + propertyName + \"\\\" in object \" + object.__id__);\n          }\n\n          return propertyValue;\n        },\n        set: function set(value) {\n          if (value === undefined) {\n            console.warn(\"Property setter for \" + propertyName + \" called with undefined value!\");\n            return;\n          }\n          object.__propertyCache__[propertyIndex] = value;\n          var valueToSend = value;\n          if (valueToSend instanceof QObject && webChannel.objects[valueToSend.__id__] !== undefined)\n          valueToSend = { \"id\": valueToSend.__id__ };\n          webChannel.exec({\n            \"type\": QWebChannelMessageTypes.setProperty,\n            \"object\": object.__id__,\n            \"property\": propertyIndex,\n            \"value\": valueToSend });\n\n        } });\n\n\n    }\n\n    // ----------------------------------------------------------------------\n\n    data.methods.forEach(addMethod);\n\n    data.properties.forEach(bindGetterSetter);\n\n    data.signals.forEach(function (signal) {addSignal(signal, false);});\n\n    for (var name in data.enums) {\n      object[name] = data.enums[name];\n    }\n  }\n\n  //required for use with nodejs\n  if (true) {\n    module.exports = {\n      QWebChannel: QWebChannel };\n\n  }\n\n  /***/},\n/* 20 */\n/***/function (module, exports, __webpack_require__) {\n\n  \"use strict\";\n\n  var Utilities = __webpack_require__(7);\n  var Shared = __webpack_require__(4);\n  var NativeDispatcher = __webpack_require__(3);\n  var SimulatorDispatcher = __webpack_require__(5);\n  var qwebchannel = __webpack_require__(19);\n\n  /** @module ShimLibrary - This module defines the WDC's shim library which is used\r\n                                             to bridge the gap between the javascript code of the WDC and the driving context\r\n                                             of the WDC (Tableau desktop, the simulator, etc.) */\n\n  // This function should be called once bootstrapping has been completed and the\n  // dispatcher and shared WDC objects are both created and available\n  function bootstrappingFinished(_dispatcher, _shared) {\n    Utilities.copyFunctions(_dispatcher.publicInterface, window.tableau);\n    Utilities.copyFunctions(_dispatcher.privateInterface, window._tableau);\n    _shared.init();\n  }\n\n  // Initializes the wdc shim library. You must call this before doing anything with WDC\n  module.exports.init = function () {\n\n    // The initial code here is the only place in our module which should have global\n    // knowledge of how all the WDC components are glued together. This is the only place\n    // which will know about the window object or other global objects. This code will be run\n    // immediately when the shim library loads and is responsible for determining the context\n    // which it is running it and setup a communications channel between the js & running code\n    var dispatcher = null;\n    var shared = null;\n\n    // Always define the private _tableau object at the start\n    window._tableau = {};\n\n    // Check to see if the tableauVersionBootstrap is defined as a global object. If so,\n    // we are running in the Tableau desktop/server context. If not, we're running in the simulator\n    if (!!window.tableauVersionBootstrap) {\n      // We have the tableau object defined\n      console.log(\"Initializing NativeDispatcher, Reporting version number\");\n      window.tableauVersionBootstrap.ReportVersionNumber(\"2.3.1\");\n      dispatcher = new NativeDispatcher(window);\n    } else if (!!window.qt && !!window.qt.webChannelTransport) {\n      console.log(\"Initializing NativeDispatcher for qwebchannel\");\n      window.tableau = {};\n\n      // We're running in a context where the webChannelTransport is available. This means QWebEngine is in use\n      window.channel = new qwebchannel.QWebChannel(qt.webChannelTransport, function (channel) {\n        console.log(\"QWebChannel created successfully\");\n\n        // Define the function which tableau will call after it has inserted all the required objects into the javascript frame\n        window._tableau._nativeSetupCompleted = function () {\n          // Once the native code tells us everything here is done, we should have all the expected objects inserted into js\n          dispatcher = new NativeDispatcher(channel.objects);\n          Utilities.linkObjectProperties(channel.objects.tableau, window.tableau, Utilities.tableauProperties);\n          shared.changeTableauApiObj(window.tableau);\n          bootstrappingFinished(dispatcher, shared);\n        };\n\n        // Actually call into the version bootstrapper to report our version number\n        channel.objects.tableauVersionBootstrap.ReportVersionNumber(\"2.3.1\");\n      });\n    } else {\n      console.log(\"Version Bootstrap is not defined, Initializing SimulatorDispatcher\");\n      window.tableau = {};\n      dispatcher = new SimulatorDispatcher(window);\n    }\n\n    // Initialize the shared WDC object and add in our enum values\n    shared = new Shared(window.tableau, window._tableau, window);\n\n    // Check to see if the dispatcher is already defined and immediately call the\n    // callback if so\n    if (dispatcher) {\n      bootstrappingFinished(dispatcher, shared);\n    }\n  };\n\n\n  /***/}\n/******/]);","var TableauController = function TableauController(applicationUrl, language) {\n  function init() {\n    _biz_bizagiTableau.setApplicationUrl(applicationUrl);\n    _assignLanguage();\n  }\n\n  function _assignLanguage() {\n    bizagi.resourceDefinitionLocation = {\n      \"es\": bizagi.loader.getResource(\"l10n\", \"bizagi.tableau.resources.es\"),\n      \"en\": bizagi.loader.getResource(\"l10n\", \"bizagi.tableau.resources.en\"),\n      \"default\": bizagi.loader.getResource(\"l10n\", \"bizagi.tableau.resources.en\") };\n\n    bizagi.localization = new bizagi.l10n(bizagi.resourceDefinitionLocation);\n    bizagi.localization.enableCustomizations = false;\n    bizagi.localization.setLanguage(language);\n\n    $.when(bizagi.localization.readyDeferred).done(function () {\n      bizagi.templateService = new bizagi.templates.services.service(bizagi.localization);\n      _biz_uiTableau.renderTmpl(\"bizagi.connector.tableau.login\", function () {\n        _biz_bizagiTableau.buildConnector();\n        _deferredInitUi.resolve();\n      });\n    });\n  }\n\n  return {\n    init: init };\n\n};\n\nvar UITableau = function UITableau() {\n  function loadTreeView(nextFn, fromBack) {\n    $(\"#nextButton\").click(nextFn);\n    _importButton();\n    var tableauTreeEl = document.getElementById(\"tableau-entity-tree\");\n\n    if (_biz_globalsTableau.entities.length === 0) {\n      disableBtn(\"importButton\");\n      disableBtn(\"nextButton\");\n      document.getElementById(\"emptyEntityList\").style.display = \"block\";\n      return;\n    }\n\n    for (var i = 0; i < _biz_globalsTableau.entities.length; i++) {\n      var entityNodeEl = document.createElement(\"li\"),\n      entity = _biz_globalsTableau.entities[i],\n      divCheckboxEl = _createTreeCheckbox(entity.name, entity.name, true, false, i);\n\n      entityNodeEl.className = \"parent-node\";\n      entityNodeEl.appendChild(_createExpandButton(\"btn-\" + entity.name));\n      entityNodeEl.appendChild(divCheckboxEl);\n\n      if (entity.attribs && entity.attribs.length > 0) {\n        var childNodesEl = document.createElement(\"ul\"),\n        containerDivEl = document.createElement(\"div\");\n        containerDivEl.id = \"container-nodes-\" + entity.name;\n        containerDivEl.className = 'tableau-collapsed';\n        _loadChildNodes(entity, containerDivEl);\n        childNodesEl.appendChild(containerDivEl);\n        entityNodeEl.appendChild(childNodesEl);\n      }\n\n      tableauTreeEl.appendChild(entityNodeEl);\n    }\n    if (fromBack) {\n      _loadConfiguration();\n    }\n  }\n\n  function showFailedConnectionMessage() {\n    $(\"#form-client-id\").addClass(\"bz-form-item--error\");\n    $(\"#form-client-secret\").addClass(\"bz-form-item--error\");\n\n    document.getElementById(\"authButton\").disabled = false;\n  }\n\n  function disableBtn(btnId) {\n    document.getElementById(btnId).disabled = true;\n  }\n\n  function renderTmpl(template, callback) {\n    bizagi.templateService.getTemplate(bizagi.getTemplate(template)).\n    done(function (resolvedTemplate) {\n      $(\"#tableau-content\").empty();\n      $.tmpl(resolvedTemplate, {\n        whiteLogo: (BIZAGI_ENVIRONMENT === 'release' ? 'jquery/production/' + bizagi.loader.productBuild + '/desktop/css/' : 'jquery/tableau/css/') + \"images/logotype-bizagi-white.png\",\n        blackLogo: (BIZAGI_ENVIRONMENT === 'release' ? 'jquery/production/' + bizagi.loader.productBuild + '/desktop/css/' : 'jquery/tableau/css/') + \"images/logotype-bizagi-black.png\" }).\n      appendTo(\"#tableau-content\");\n      if (callback !== undefined && typeof callback === 'function') callback();\n    });\n  }\n\n  function loadEntityProcessTable(nextFn, backFn) {\n    $(\"#nextButton\").click(nextFn);\n    $(\"#backButton\").click(backFn);\n    var tbodyEl = document.getElementById(\"tableau-entity-process-body\"),\n    entityIndexes = Object.keys(_biz_globalsTableau.processByEntity);\n\n    for (var i = 0; i < entityIndexes.length; i++) {\n      var entity = _biz_globalsTableau.entities[entityIndexes[i]];\n\n      var rowEl = document.createElement(\"tr\"),\n      firstColumnEl = document.createElement(\"td\"),\n      secondColumnEl = document.createElement(\"td\");\n\n      firstColumnEl.className = \"bz-table__cell\";\n      firstColumnEl.innerText = entity.name;\n      secondColumnEl.appendChild(_createSelectEl(entityIndexes[i]));\n\n      rowEl.appendChild(firstColumnEl);\n      rowEl.appendChild(secondColumnEl);\n\n      tbodyEl.appendChild(rowEl);\n    }\n  }\n\n  // nextFn is only used for backButton's callback\n  function loadResumeConfiguration(submitFn, nextFn) {\n    $(\"#submitButton\").click(submitFn);\n    $(\"#backButton\").click(function () {\n      var backToTree = renderTmpl.bind(this, \"bizagi.connector.tableau.tree\", loadTreeView.bind(this, nextFn, true));\n      if (Object.keys(_biz_globalsTableau.processByEntity).length === 0) {\n        backToTree();\n      } else {\n        var resumeStep = renderTmpl.bind(\n        this,\n        \"bizagi.connector.tableau.export\",\n        loadResumeConfiguration.bind(this, submitFn, nextFn));\n\n        renderTmpl(\"bizagi.connector.tableau.processTable\", loadEntityProcessTable.bind(this, resumeStep, backToTree));\n      }\n    });\n    var tmpConfiguration = {\n      entities: _biz_globalsTableau.selectedEntities,\n      processes: _biz_globalsTableau.processByEntity };\n\n\n    $(\"#selectConfiguration\").click(function () {\n      var range = document.createRange();\n      range.selectNode(document.getElementById(\"tableau-container-configuration\"));\n      window.getSelection().removeAllRanges();\n      window.getSelection().addRange(range);\n    });\n    document.getElementById(\"tableau-container-configuration\").innerText = JSON.stringify(tmpConfiguration, null, 2);\n  }\n\n  function _createSelectEl(entityIndex) {\n    var selectEl = document.createElement(\"select\"),\n    entity = _biz_globalsTableau.entities[entityIndex],\n    processId = _biz_globalsTableau.processByEntity[entityIndex];\n\n    selectEl.className = \"bz-select\";\n    selectEl.onchange = function () {\n      _biz_globalsTableau.processByEntity[entityIndex] = this.value;\n    };\n    for (var i = 0; i < entity.processesRelated.length; i++) {\n      var optionEl = document.createElement(\"option\");\n      optionEl.className = \"bz-option\";\n      optionEl.innerText = entity.processesRelated[i].displayName;\n      optionEl.value = entity.processesRelated[i].id;\n      selectEl.appendChild(optionEl);\n    }\n    selectEl.value = processId;\n    return selectEl;\n  }\n\n  function _loadChildNodes(entity, childNodesEl) {\n    for (var i = 0; i < entity.attribs.length; i++) {\n      var attrib = entity.attribs[i],\n      checkboxId = entity.name + '.' + attrib.name,\n      leaf = attrib.xpaths.length === 1 || attrib.id === -1,\n      nodeEl,divCheckboxEl;\n\n      if (entity.isProcessEntity && attrib.id === -1) {\n        for (var j = 0; j < attrib.xpaths.length; j++) {\n          var attribName = attrib.xpaths[j].value,\n          checkboxChildId = entity.name + \".\" + attribName;\n\n          if (attribName.toLowerCase() === '@workitems') continue;\n\n          nodeEl = document.createElement(\"li\");\n          divCheckboxEl = _createTreeCheckbox(checkboxChildId, attribName, false, leaf);\n          nodeEl.appendChild(divCheckboxEl);\n          childNodesEl.appendChild(nodeEl);\n        }\n        continue;\n      } else if (attrib.id === -1) continue;\n\n      divCheckboxEl = _createTreeCheckbox(checkboxId, attrib.name, false, leaf);\n      nodeEl = document.createElement(\"li\");\n      if (!leaf)\n      nodeEl.appendChild(_createExpandButton(\"btn-\" + checkboxId));\n      nodeEl.appendChild(divCheckboxEl);\n      if (!leaf) {\n        var childNodesRelEl = document.createElement(\"ul\"),\n        containerDivEl = document.createElement(\"div\");\n        nodeEl.className = 'parent-node';\n        containerDivEl.id = \"container-nodes-\" + checkboxId;\n        containerDivEl.className = 'tableau-collapsed';\n        for (var j = 1; j < attrib.xpaths.length; j++) {\n          var attribName = attrib.xpaths[j].value.split(\".\")[1],\n          nodeRelEl = document.createElement(\"li\"),\n          checkboxChildId = checkboxId + '.' + attribName;\n          nodeRelEl.appendChild(_createTreeCheckbox(checkboxChildId, attribName, false, true));\n          containerDivEl.appendChild(nodeRelEl);\n          childNodesRelEl.appendChild(containerDivEl);\n        }\n        nodeEl.appendChild(childNodesRelEl);\n      }\n      childNodesEl.appendChild(nodeEl);\n    }\n  }\n\n  function _createTreeCheckbox(id, labelText, root, leaf, index) {\n    if (!root) root = false;\n    if (!leaf) leaf = false;\n    var divCheckboxEl = document.createElement(\"div\"),\n    inputCheckboxEl = document.createElement(\"input\"),\n    labelCheckboxEl = document.createElement(\"label\");\n    divCheckboxEl.id = id;\n    divCheckboxEl.className = \"bz-checkbox\";\n    divCheckboxEl.setAttribute(\"bz-root\", root);\n    divCheckboxEl.setAttribute(\"bz-leaf\", leaf);\n    if (root) divCheckboxEl.setAttribute(\"bz-index\", index);\n    inputCheckboxEl.className = \"bz-checkbox__input\";\n    labelCheckboxEl.className = \"bz-checkbox__label\";\n    inputCheckboxEl.type = \"checkbox\";\n    labelCheckboxEl.innerText = labelText;\n\n    divCheckboxEl.onclick = function () {\n      var inputCheckEL = this.getElementsByClassName(\"bz-checkbox__input\")[0],\n      childrenContainerEl = this.parentElement.getElementsByTagName(\"ul\"),\n      childNodesEl = [],\n      rootElementId = this.id.split(\".\")[0],\n      rootIndex = document.getElementById(rootElementId).getAttribute(\"bz-index\"),\n      parentElementId = this.id.substring(0, this.id.length - this.innerText.length - 1);\n\n      if (childrenContainerEl.length > 0)\n      childNodesEl = childrenContainerEl[0].getElementsByClassName(\"bz-checkbox__input\");\n\n      if (inputCheckEL.getAttribute(\"checked\") === null) {\n        var splittedId = this.id.split(\".\"),\n        elementId = \"\";\n        for (var i = 0; i < splittedId.length; i++) {\n          elementId += splittedId[i];\n          var element = document.getElementById(elementId),\n          checkboxEl = element.getElementsByClassName(\"bz-checkbox__input\")[0];\n          checkboxEl.setAttribute(\"checked\", \"checked\");\n          if (element.getAttribute(\"bz-root\") != \"true\") {\n            if (!_biz_globalsTableau.selectedEntities[rootIndex])\n            _biz_globalsTableau.selectedEntities[rootIndex] = {};\n            _biz_globalsTableau.selectedEntities[rootIndex][element.id] = 1;\n          }\n          elementId += \".\";\n        }\n\n        for (var i = 0; i < childNodesEl.length; i++) {\n          var element = childNodesEl[i].parentElement;\n          childNodesEl[i].setAttribute(\"checked\", \"checked\");\n          if (element.getAttribute(\"bz-root\") != \"true\") {\n            if (!_biz_globalsTableau.selectedEntities[rootIndex])\n            _biz_globalsTableau.selectedEntities[rootIndex] = {};\n            _biz_globalsTableau.selectedEntities[rootIndex][element.id] = 1;\n          }\n        }\n      } else {\n        inputCheckEL.removeAttribute(\"checked\");\n        delete _biz_globalsTableau.selectedEntities[rootIndex][this.id];\n        for (var i = 0; i < childNodesEl.length; i++) {\n          var elementId = childNodesEl[i].parentElement.id;\n          childNodesEl[i].removeAttribute(\"checked\");\n          delete _biz_globalsTableau.selectedEntities[rootIndex][elementId];\n        }\n        if (this.getAttribute(\"bz-root\") == \"true\")\n        delete _biz_globalsTableau.selectedEntities[rootIndex];else\n\n        _updateParentElements(rootElementId, parentElementId, rootIndex);\n      }\n    };\n\n    divCheckboxEl.appendChild(inputCheckboxEl);\n    divCheckboxEl.appendChild(labelCheckboxEl);\n\n    return divCheckboxEl;\n  }\n\n  function _updateParentElements(rootElementId, parentElementId, rootIndex) {\n    var parentEl = document.getElementById(parentElementId),\n    childrenContainerEl = parentEl.parentElement.getElementsByTagName(\"ul\"),\n    childNodesEl = [];\n\n    if (childrenContainerEl.length > 0)\n    childNodesEl = childrenContainerEl[0].getElementsByClassName(\"bz-checkbox__input\");\n\n    var uncheckParent = false;\n    for (var i = 0; i < childNodesEl.length; i++) {\n      if (childNodesEl[i].getAttribute(\"checked\") != null) {\n        uncheckParent = false;\n        break;\n      }\n      uncheckParent = true;\n    }\n    if (uncheckParent) {\n      parentEl.getElementsByClassName(\"bz-checkbox__input\")[0].removeAttribute(\"checked\");\n      if (parentEl.getAttribute(\"bz-root\") == \"true\")\n      delete _biz_globalsTableau.selectedEntities[rootIndex];else\n\n      delete _biz_globalsTableau.selectedEntities[rootIndex][parentEl.id];\n    }\n    if (rootElementId !== parentElementId && Object.keys(_biz_globalsTableau.selectedEntities[rootIndex]).length === 0) {\n      var rootEl = document.getElementById(rootElementId);\n      rootEl.getElementsByClassName(\"bz-checkbox__input\")[0].removeAttribute(\"checked\");\n      delete _biz_globalsTableau.selectedEntities[rootIndex];\n    }\n  }\n\n  function _createExpandButton(id) {\n    var buttonEl = document.createElement(\"button\");\n    buttonEl.className = \"bz-btn bz-btn--s tableau-node-expand\";\n    buttonEl.innerText = \"+\";\n    buttonEl.id = id;\n    buttonEl.onclick = function () {\n      var entityName = this.id.substring(4, this.id.length),\n      containerDivEl = document.getElementById(\"container-nodes-\" + entityName);\n      if (containerDivEl) {\n        if (containerDivEl.className === \"tableau-collapsed\") {\n          containerDivEl.className = \"\";\n          this.innerText = \"-\";\n        } else {\n          containerDivEl.className = \"tableau-collapsed\";\n          this.innerText = \"+\";\n        }\n      }\n    };\n    return buttonEl;\n  }\n\n  function _importButton() {\n    $(\"#tableau-uploadConfiguration\").change(function () {\n      var file = this.files[0];\n      if (file) {\n        var fileReader = new FileReader();\n        fileReader.onload = function (evt) {\n          var content = evt.target.result;\n          if (content !== '{}') {\n            try {\n              var contentJson = JSON.parse(content);\n              _validateStructConfiguration(contentJson);\n              document.getElementById(\"tableau-alert-error\").style.display = \"none\";\n              _loadConfiguration(contentJson);\n            } catch (exception) {\n              _showMessageAlert(bizagi.localization.dictionary[\"tableau-error-invalid-file\"]);\n            }\n          }\n        };\n        fileReader.readAsText(file);\n      }\n    });\n\n    $(\"#importButton\").click(function () {\n      var uploadFileEl = document.getElementById(\"tableau-uploadConfiguration\");\n      uploadFileEl.click();\n    });\n  }\n\n  function _showMessageAlert(message) {\n    var alert = document.getElementById(\"tableau-alert-error\");\n    alert.style.removeProperty(\"display\");\n    alert.getElementsByClassName(\"tableau-alert-message\")[0].innerText = message;\n  }\n\n  function _validateStructConfiguration(configuration) {\n    var keys = Object.keys(configuration);\n    if (keys.length !== 2) {\n      throw \"invalid configuration\";\n    }\n    var areValidProperties = keys[0] === \"entities\" && keys[1] === \"processes\";\n    if (!areValidProperties) {\n      throw \"invalid configuration\";\n    }\n  }\n\n  function _loadConfiguration(configuration) {\n    if (!configuration) {\n      configuration = {\n        entities: _biz_globalsTableau.selectedEntities,\n        processes: _biz_globalsTableau.processByEntity };\n\n    }\n\n    var entityIndexes = Object.keys(_biz_globalsTableau.selectedEntities);\n    for (var i = 0; i < entityIndexes.length; i++) {\n      var attribs = Object.keys(_biz_globalsTableau.selectedEntities[entityIndexes[i]]),\n      rootId = attribs[0].split(\".\")[0],\n      rootCheckboxEl = document.getElementById(rootId);\n      rootCheckboxEl.getElementsByClassName(\"bz-checkbox__input\")[0].removeAttribute(\"checked\");\n      for (var j = 0; j < attribs.length; j++) {\n        var element = document.getElementById(attribs[j]);\n        element.getElementsByClassName(\"bz-checkbox__input\")[0].removeAttribute(\"checked\");\n      }\n    }\n    _biz_globalsTableau.selectedEntities = {};\n    _biz_globalsTableau.processByEntity = {};\n    var oldEntityIndexes = Object.keys(configuration.entities);\n    for (var i = 0; i < oldEntityIndexes.length; i++) {\n      var xpaths = Object.keys(configuration.entities[oldEntityIndexes[i]]),\n      rootId = xpaths[0].split(\".\")[0],\n      rootCheckboxEl = document.getElementById(rootId);\n      if (rootCheckboxEl) {\n        var rootIndex = rootCheckboxEl.getAttribute(\"bz-index\");\n        rootCheckboxEl.getElementsByClassName(\"bz-checkbox__input\")[0].setAttribute(\"checked\", \"checked\");\n        if (configuration.processes[oldEntityIndexes[i]]) {\n          _biz_globalsTableau.processByEntity[rootIndex] = configuration.processes[oldEntityIndexes[i]];\n        }\n        for (var j = 0; j < xpaths.length; j++) {\n          var checkboxEl = document.getElementById(xpaths[j]);\n          if (checkboxEl) {\n            checkboxEl.getElementsByClassName(\"bz-checkbox__input\")[0].setAttribute(\"checked\", \"checked\");\n\n            // add to globals\n            if (!_biz_globalsTableau.selectedEntities[rootIndex])\n            _biz_globalsTableau.selectedEntities[rootIndex] = {};\n            _biz_globalsTableau.selectedEntities[rootIndex][checkboxEl.id] = 1;\n          }\n\n        }\n      }\n    }\n  }\n\n  return {\n    loadTreeView: loadTreeView,\n    loadEntityProcessTable: loadEntityProcessTable,\n    loadResumeConfiguration: loadResumeConfiguration,\n    showFailedConnectionMessage: showFailedConnectionMessage,\n    disableBtn: disableBtn,\n    renderTmpl: renderTmpl };\n\n};\n\nvar BizagiTableau = function BizagiTableau() {\n  var _applicationUrl = null,\n  _utilsTableau = new UtilsTableau();\n\n  function setApplicationUrl(applicationUrl) {\n    _applicationUrl = applicationUrl;\n  }\n\n  function getApplicationUrl() {\n    return _applicationUrl;\n  }\n\n  function buildConnector() {\n    if (!_utilsTableau.isNewWebEngine()) {\n      // Fix related to: https://github.com/tableau/webdataconnector/issues/165\n      if (!!window.tableauVersionBootstrap) {\n        window._tableau.triggerInitialization();\n      }\n      if (!window.tableauVersionBootstrap) {\n        var DOMContentLoaded_event = window.document.createEvent(\"Event\");\n        DOMContentLoaded_event.initEvent(\"DOMContentLoaded\", true, true);\n        window.document.dispatchEvent(DOMContentLoaded_event);\n      }\n    }\n\n    $(\"#authButton\").click(function () {\n      connect($(\"#clientId\").val(), $(\"#clientSecret\").val());\n    });\n  }\n\n  function connect(clientId, clientSecret) {\n    _biz_uiTableau.disableBtn('authButton');\n    _utilsTableau.setConnectionDataProp('globals', 'url', _applicationUrl, true);\n    _utilsTableau.setAuthData('clientId', clientId);\n    _utilsTableau.setAuthData('clientSecret', clientSecret);\n    if (tableau.phase === tableau.phaseEnum.authPhase) {\n      _getAccessToken(tableau.submit);\n    } else {\n      _getAccessToken(_getEntities);\n    }\n  }\n\n  function _next() {\n    _biz_uiTableau.disableBtn('nextButton');\n    var selectedEntities = _biz_globalsTableau.selectedEntities,\n    entityIndexes = Object.keys(selectedEntities),\n    showNextStep = false;\n\n    for (var i = 0; i < entityIndexes.length; i++) {\n      var entity = _biz_globalsTableau.entities[entityIndexes[i]],\n      attribs = Object.keys(selectedEntities[entityIndexes[i]]),\n      queryByProcess = false;\n      for (var j = 0; j < attribs.length; j++) {\n        if (attribs[j].indexOf(\"@\") !== -1) {\n          queryByProcess = true;\n          showNextStep = true;\n        }\n      }\n      if (queryByProcess && !_biz_globalsTableau.processByEntity[entityIndexes[i]]) {\n        _biz_globalsTableau.processByEntity[entityIndexes[i]] = entity.processesRelated[0].id;\n      } else if (!queryByProcess) {\n        delete _biz_globalsTableau.processByEntity[entityIndexes[i]];\n      }\n    }\n\n    var processByEntityKeys = Object.keys(_biz_globalsTableau.processByEntity);\n    for (var i = 0; i < processByEntityKeys.length; i++) {\n      var entity = _biz_globalsTableau.selectedEntities[processByEntityKeys[i]];\n      if (!entity) {\n        delete _biz_globalsTableau.processByEntity[processByEntityKeys[i]];\n      }\n    }\n\n    var backToTree = _biz_uiTableau.renderTmpl.bind(this, \"bizagi.connector.tableau.tree\", _biz_uiTableau.loadTreeView.bind(this, _next, true));\n    var resumeStep = _biz_uiTableau.renderTmpl.bind(\n    this,\n    \"bizagi.connector.tableau.export\",\n    _biz_uiTableau.loadResumeConfiguration.bind(this, _submit, _next));\n\n    if (showNextStep) {\n      _biz_uiTableau.renderTmpl(\"bizagi.connector.tableau.processTable\", _biz_uiTableau.loadEntityProcessTable.bind(this, resumeStep, backToTree));\n    } else {\n      resumeStep();\n    }\n  }\n\n  function _submit() {\n    var entityIndexes = Object.keys(_biz_globalsTableau.selectedEntities);\n    for (var i = 0; i < entityIndexes.length; i++) {\n      var entity = _biz_globalsTableau.entities[entityIndexes[i]],\n      attribs = Object.keys(_biz_globalsTableau.selectedEntities[entityIndexes[i]]),\n      validAttribs = [],processId = null,\n      queryByProcess = false;\n      validAttribs.push(\"BizagiId\");\n      for (var j = 0; j < attribs.length; j++) {\n        validAttribs.push(attribs[j].substring(entity.name.length + 1, attribs[j].length));\n        if (attribs[j].indexOf(\"@\") !== -1) {\n          queryByProcess = true;\n          showNextStep = true;\n        }\n      }\n      if (queryByProcess)\n      processId = _biz_globalsTableau.processByEntity[entityIndexes[i]];\n\n      _utilsTableau.setConnectionDataProp('entities', entity.name, {\n        \"entityIndex\": entityIndexes[i],\n        \"queryByProcess\": queryByProcess,\n        \"processId\": processId,\n        \"attribs\": validAttribs });\n\n    }\n    tableau.connectionData = JSON.stringify(_biz_globalsTableau.connectionData);\n    tableau.submit();\n  }\n\n  function _getSchema(schemaCallback) {\n    var dataConnector = _utilsTableau.getConnectionData(),\n    entitiesMap = dataConnector.entities,\n    entitiesList = Object.keys(entitiesMap),\n    tables = [],tableId = '';\n\n    for (var i = 0; i < entitiesList.length; i++) {\n      tableId = _parseString(entitiesList[i]);\n      tables.push({\n        id: tableId,\n        alias: tableId,\n        columns: _generateColumns(entitiesMap[entitiesList[i]].attribs) });\n\n    }\n\n    schemaCallback(tables);\n  }\n\n  function _generateColumns(attributes) {\n    var tableCols = [];\n    for (var i = 0; i < attributes.length; i++) {\n      tableCols.push({\n        id: _parseString(attributes[i]),\n        dataType: tableau.dataTypeEnum.string });\n\n    }\n    return tableCols;\n  }\n\n  function _stepCompleteCallback(table, doneCallback, numPages) {\n    var currentPages = 0;\n    return function () {\n      currentPages++;\n      if (numPages === 0 || numPages === currentPages) {\n        table.appendRows(_biz_globalsTableau.dataRows);\n        return doneCallback();\n      }\n    };\n  }\n\n  function _getDataCallback(table, doneCallback, retries) {\n    if (!retries) retries = 0;\n    var dataConnector = _utilsTableau.getConnectionData(),\n    entityName = table.tableInfo.id,\n    entity = dataConnector.entities[entityName],\n    attributes = entity.attribs,\n    baseUrl = dataConnector.globals.url + \"/odata/query/executeEntityQuery\",\n    bodyRequest = {\n      \"queryParameter\": {\n        \"entity\": entityName, \"xpaths\": [] } };\n\n\n\n    if (entity.queryByProcess) {\n      bodyRequest.queryParameter[\"processId\"] = entity.processId;\n    }\n    for (var i = 0; i < attributes.length; i++) {\n      if (attributes[i] === \"BizagiId\") continue;\n      bodyRequest.queryParameter.xpaths.push({\n        \"xpath\": attributes[i] });\n\n    }\n    _biz_globalsTableau.dataRows = [];\n\n    var mainDeferred = $.Deferred();\n    _getData({\n      url: baseUrl + \"?$top=\" + _utilsTableau.ITEMS_PAGE,\n      table: table,\n      bodyRequest: bodyRequest,\n      deferred: mainDeferred });\n\n\n    $.when(mainDeferred).done(function (totalRecords) {\n      var numPages = _utilsTableau.calculateNumOfPages(totalRecords) - 1,\n      doneFn = _stepCompleteCallback(table, doneCallback, numPages);\n      for (var i = 1; i <= numPages; i++) {\n        var page = \"?$skip=\" + i * _utilsTableau.ITEMS_PAGE + \"&$top=\" + _utilsTableau.ITEMS_PAGE;\n        _getDataWrapper({\n          url: baseUrl + page,\n          table: table,\n          bodyRequest: bodyRequest,\n          doneCallback: doneFn });\n\n      }\n      if (numPages === 0)\n      doneFn();else\n      if (numPages === -1)\n      return doneCallback();\n    }).fail(function (err) {\n      _retry(err, retries + 1, _getDataCallback.bind(this, table, doneCallback, retries + 1));\n    });\n  }\n\n  function _getDataWrapper(requestObj, retries) {\n    if (!retries) retries = 0;\n\n    var deferred = $.Deferred();\n    requestObj.deferred = deferred;\n\n    _getData(requestObj);\n\n    $.when(deferred).done(function () {\n      requestObj.doneCallback();\n    }).fail(function (err) {\n      _retry(err, retries + 1, _getDataWrapper.bind(this, requestObj, retries + 1));\n    });\n  }\n\n  function _getData(requestObj) {\n    var dataConnector = _utilsTableau.getConnectionData(),\n    authData = _utilsTableau.getAuthData(),\n    entityName = requestObj.table.tableInfo.id,\n    attributes = dataConnector.entities[entityName].attribs;\n\n    $.ajax({\n      type: \"POST\",\n      url: requestObj.url,\n      dataType: 'json',\n      data: requestObj.bodyRequest,\n      beforeSend: function beforeSend(request) {\n        request.setRequestHeader('Authorization', 'Bearer ' + authData.accessToken);\n      },\n\n      success: function success(data) {\n        var result = data.value;\n        for (var i = 0; i < result.length; i++) {\n          var record = {};\n          for (var j = 0; j < attributes.length; j++) {\n            var colId = _parseString(attributes[j]),\n            attributeName = attributes[j];\n            if (attributeName[0] === '@') {\n              var firstLetterLowerCase = attributeName[1].toLowerCase();\n              attributeName = attributeName.substring(2, attributeName.length);\n              attributeName = firstLetterLowerCase + attributeName;\n            }\n            record[colId] = result[i][attributeName];\n          }\n          _biz_globalsTableau.dataRows.push(record);\n        }\n        if (result.length > 0) {\n          tableau.reportProgress(\"Bizagi status: \" + _biz_globalsTableau.dataRows.length + ' of ' + data[\"@odata.totalCount\"] + ' records');\n          requestObj.deferred.resolve(data[\"@odata.totalCount\"]);\n        } else {\n          requestObj.deferred.resolve(0);\n        }\n      },\n\n      error: function error(err) {requestObj.deferred.reject(err);} });\n\n  }\n\n  function _getAccessToken(callback) {\n    var dataConnector = tableau.phase === tableau.phaseEnum.interactivePhase ? _biz_globalsTableau.connectionData : _utilsTableau.getConnectionData(),\n    authData = _utilsTableau.getAuthData();\n    $.ajax({\n      type: \"POST\",\n      url: dataConnector.globals.url + '/oauth2/server/token',\n      contentType: 'application/x-www-form-urlencoded',\n      data: 'grant_type=client_credentials&scope=api',\n      dataType: 'json',\n      beforeSend: function beforeSend(request) {\n        request.setRequestHeader('Authorization', 'Basic ' + btoa(authData.clientId + ':' + authData.clientSecret));\n      },\n\n      success: function success(data) {\n        if (data.access_token) {\n          _utilsTableau.setAuthData('accessToken', data.access_token);\n          if (callback !== undefined && typeof callback === 'function') callback();\n        } else {\n          _biz_uiTableau.showFailedConnectionMessage();\n          tableau.log(\"Bizagi Error: \" + JSON.stringify(data));\n          tableau.abortForAuth(\"Bizagi Error: Wrong credentials\");\n        }\n      },\n\n      error: function error(err) {\n        _biz_uiTableau.showFailedConnectionMessage();\n        tableau.log(\"Bizagi Error: \" + JSON.stringify(err));\n        if (err.status === 401)\n        tableau.abortForAuth(\"Bizagi Error: Wrong credentials\");else\n\n        tableau.abortWithError(\"Bizagi Error: See log for details\");\n      } });\n\n  }\n\n  function _getEntities(retries) {\n    if (!retries) retries = 0;\n    var dataConnector = _biz_globalsTableau.connectionData,\n    authData = _utilsTableau.getAuthData();\n    $.ajax({\n      type: \"GET\",\n      url: dataConnector.globals.url + '/odata/query/entity?$orderby=name&$filter=type eq \\'Master\\'',\n      dataType: 'json',\n      beforeSend: function beforeSend(request) {\n        request.setRequestHeader('Authorization', 'Bearer ' + authData.accessToken);\n      },\n\n      success: function success(response) {\n        var entities = response.value;\n        if (entities.length > 0) {\n          _biz_globalsTableau.entities = entities;\n        }\n        _biz_uiTableau.renderTmpl(\"bizagi.connector.tableau.tree\", _biz_uiTableau.loadTreeView.bind(this, _next));\n      },\n\n      error: function error(err) {_retry(err, retries + 1, _getEntities.bind(this, retries + 1));} });\n\n  }\n\n  function _retry(err, retries, callback) {\n    console.log(retries);\n    if (err.status === 401 && retries < 3) {\n      _getAccessToken(callback);\n    } else {\n      tableau.log(\"Bizagi Retry Error: \" + JSON.stringify(err));\n      tableau.log(\"Number of retries: \" + retries);\n      var message = err.responseJSON ? err.responseJSON.message : \"See log for details\";\n      tableau.abortWithError(\"Bizagi Error: \" + message);\n    }\n  }\n\n  function _parseString(str) {\n    var newStr = str.replace(/ /g, '_').\n    replace(/\"/g, '_doublequote_').\n    replace(/,/g, '_comma_').\n    replace(/=/g, '_equal_').\n    replace(/\\//g, '_fslash_').\n    replace(/-/g, '_dash_').\n    replace(/\\./g, '_dot_').\n    replace(/[^A-Za-z0-9_]/g, '_');\n    return newStr;\n  }\n\n  return {\n    buildConnector: buildConnector,\n    connect: connect,\n    getSchema: _getSchema,\n    getData: _getDataCallback,\n    setApplicationUrl: setApplicationUrl,\n    getApplicationUrl: getApplicationUrl };\n\n};\n\nvar UtilsTableau = function UtilsTableau() {\n  var ITEMS_PAGE = 50;\n\n  function setAuthData(prop, value) {\n    var authData = {\n      clientId: \"\",\n      clientSecret: \"\",\n      accessToken: \"\" };\n\n    if (tableau.password) {\n      authData = getAuthData();\n    }\n    authData[prop] = value;\n\n    tableau.password = JSON.stringify(authData);\n  }\n\n  function setConnectionDataProp(section, prop, value, restart) {\n    if (!restart) restart = false;\n    if (restart) {\n      _biz_globalsTableau.connectionData = {\n        globals: {},\n        entities: {} };\n\n    }\n    if (!prop && !value) {\n      _biz_globalsTableau.connectionData[section] = {};\n    } else if (!prop) {\n      _biz_globalsTableau.connectionData[section] = value;\n    } else {\n      _biz_globalsTableau.connectionData[section][prop] = value;\n    }\n  }\n\n  function getConnectionData() {\n    try {\n      return JSON.parse(tableau.connectionData);\n    } catch (ex) {\n      tableau.log(\"[Exception] Error parsing connection data: \" + ex);\n      tableau.log(\"[Data] Error parsing connection data: \" + tableau.connectionData);\n      tableau.abortWithError(\"Error: problem parsing connection data. See log for details.\");\n      return {\n        globals: {},\n        entities: {} };\n\n    }\n  }\n\n  function getAuthData() {\n    try {\n      return JSON.parse(tableau.password);\n    } catch (ex) {\n      tableau.log(\"[Exception] Error parsing auth data: \" + ex);\n      tableau.log(\"[Data] Error parsing auth data: \" + tableau.password);\n      tableau.abortWithError(\"Error: problem parsing authentication data. See log for details.\");\n      return {\n        clientId: \"\",\n        clientSecret: \"\",\n        accessToken: \"\" };\n\n    }\n  }\n\n  function calculateNumOfPages(totalRecords) {\n    var pages = Math.floor(totalRecords / ITEMS_PAGE);\n    if (totalRecords % ITEMS_PAGE > 0)\n    pages++;\n    return pages;\n  }\n\n  /**\r\n     * Checks if tableau version is greater than or less than 2019.3 to know if webengine is in last version\r\n     */\n  function isNewWebEngine() {\n    if (tableau.platformVersion) {\n      var versionSplitted = tableau.platformVersion.split(\".\");\n      return parseInt(versionSplitted[0]) === 2019 && parseInt(versionSplitted[1]) >= 4 || parseInt(versionSplitted[0]) > 2019;\n    }\n    return false;\n  }\n\n  return {\n    setAuthData: setAuthData,\n    setConnectionDataProp: setConnectionDataProp,\n    calculateNumOfPages: calculateNumOfPages,\n    getConnectionData: getConnectionData,\n    getAuthData: getAuthData,\n    isNewWebEngine: isNewWebEngine,\n    ITEMS_PAGE: ITEMS_PAGE };\n\n};\n\nvar GlobalsTableau = function GlobalsTableau() {\n  var entities = [],\n  selectedEntities = {},\n  processByEntity = {},\n  dataRows = [],\n  connectionData = {\n    globals: {},\n    entities: {} };\n\n\n  return {\n    entities: entities,\n    selectedEntities: selectedEntities,\n    dataRows: dataRows,\n    processByEntity: processByEntity,\n    connectionData: connectionData };\n\n};\n\n(function () {\n  _biz_uiTableau = new UITableau(),\n  _biz_globalsTableau = new GlobalsTableau();\n  _biz_bizagiTableau = new BizagiTableau();\n\n  _deferredInitUi = $.Deferred();\n  _deferredInitWDC = $.Deferred();\n\n  var bizagiConnector = tableau.makeConnector();\n  bizagiConnector.init = function (initCallback) {\n    tableau.authType = tableau.authTypeEnum.custom;\n    initCallback();\n    _deferredInitWDC.resolve();\n  };\n  bizagiConnector.getSchema = _biz_bizagiTableau.getSchema;\n  bizagiConnector.getData = _biz_bizagiTableau.getData;\n\n  tableau.registerConnector(bizagiConnector);\n\n  $.when(_deferredInitUi, _deferredInitWDC).done(function () {\n    if ((tableau.phase === tableau.phaseEnum.authPhase || tableau.phase === tableau.phaseEnum.interactivePhase) &&\n    tableau.connectionData) {\n      var utilsTableau = new UtilsTableau(),\n      dataConnector = utilsTableau.getConnectionData();\n      if (dataConnector.globals.url === _biz_bizagiTableau.getApplicationUrl() && tableau.password) {\n        var authData = utilsTableau.getAuthData();\n        $(\"#clientId\").val(authData.clientId);\n        $(\"#clientSecret\").val(authData.clientSecret);\n        _biz_bizagiTableau.connect($(\"#clientId\").val(), $(\"#clientSecret\").val());\n      }\n    }\n  });\n})();"]}