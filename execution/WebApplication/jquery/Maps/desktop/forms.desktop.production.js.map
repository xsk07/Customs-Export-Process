{"version":3,"sources":["jquery/rendering/js/desktop/container/dialog/bizagi.rendering.desktop.dialog.form.js","jquery/rendering/js/desktop/container/dialog/bizagi.rendering.desktop.dialog.startForm.js","jquery/rendering/js/desktop/render/bizagi.rendering.desktop.combo.js","jquery/rendering/js/desktop/container/bizagi.rendering.desktop.container.js","jquery/rendering/js/desktop/render/bizagi.rendering.desktop.render.js","jquery/rendering/js/desktop/render/column/bizagi.rendering.desktop.columns.column.js","jquery/rendering/js/desktop/container/dialog/bizagi.rendering.desktop.dialog.search.js","jquery/rendering/js/desktop/container/dialog/bizagi.rendering.desktop.dialog.searchUser.js","jquery/rendering/js/desktop/container/dialog/bizagi.rendering.desktop.dialog.letter.js","jquery/rendering/js/desktop/container/bizagi.rendering.desktop.form.js","jquery/rendering/js/desktop/container/bizagi.rendering.desktop.panel.js","jquery/rendering/js/desktop/container/bizagi.rendering.desktop.contentPanel.js","jquery/rendering/js/desktop/container/bizagi.rendering.desktop.nestedForm.js","jquery/rendering/js/desktop/container/bizagi.rendering.desktop.tab.js","jquery/rendering/js/desktop/container/bizagi.rendering.desktop.tabItem.js","jquery/rendering/js/desktop/container/bizagi.rendering.desktop.horizontal.js","jquery/rendering/js/desktop/container/bizagi.rendering.desktop.layout.js","jquery/rendering/js/desktop/container/bizagi.rendering.desktop.accordion.js","jquery/rendering/js/desktop/container/bizagi.rendering.desktop.accordionItem.js","jquery/rendering/js/desktop/container/bizagi.rendering.desktop.group.js","jquery/rendering/js/desktop/container/bizagi.rendering.desktop.section.js","jquery/rendering/js/desktop/container/bizagi.rendering.desktop.searchForm.js","jquery/rendering/js/desktop/render/bizagi.rendering.desktop.text.js","jquery/rendering/js/desktop/render/bizagi.rendering.desktop.readonly.js","jquery/rendering/js/desktop/render/bizagi.rendering.desktop.extendedText.js","jquery/rendering/js/desktop/render/bizagi.rendering.desktop.label.js","jquery/rendering/js/desktop/render/query/bizagi.rendering.desktop.queryLabel.js","jquery/rendering/js/desktop/render/bizagi.rendering.desktop.number.js","jquery/rendering/js/desktop/render/query/bizagi.rendering.desktop.queryNumber.js","jquery/rendering/js/desktop/render/bizagi.rendering.desktop.date.js","jquery/rendering/js/desktop/render/query/bizagi.rendering.desktop.queryDate.js","jquery/rendering/js/desktop/render/bizagi.rendering.desktop.yesno.js","jquery/rendering/js/desktop/render/bizagi.rendering.desktop.check.js","jquery/rendering/js/desktop/render/bizagi.rendering.desktop.cascadingCombo.js","jquery/rendering/js/desktop/render/bizagi.rendering.desktop.search.js","jquery/rendering/js/desktop/render/bizagi.rendering.desktop.formLink.js","jquery/rendering/js/desktop/render/bizagi.rendering.desktop.association.js","jquery/rendering/js/desktop/render/query/bizagi.rendering.desktop.querySearchUser.js","jquery/rendering/js/desktop/render/bizagi.rendering.desktop.polymorphicLauncher.js","jquery/rendering/js/desktop/render/query/bizagi.rendering.desktop.queryDateAdvanced.js","jquery/rendering/js/desktop/render/query/bizagi.rendering.desktop.queryCombo.js","jquery/rendering/js/desktop/render/query/bizagi.rendering.desktop.queryCascadingCombo.js","jquery/rendering/js/desktop/render/bizagi.rendering.desktop.collectionnavigator.js","jquery/rendering/js/desktop/render/bizagi.rendering.desktop.ecm.js","jquery/rendering/js/desktop/render/bizagi.rendering.desktop.grid.bizagi.js","jquery/rendering/js/desktop/render/bizagi.rendering.desktop.grid.grouped.js","jquery/rendering/js/desktop/render/bizagi.rendering.desktop.letter.js","jquery/rendering/js/desktop/render/bizagi.rendering.desktop.button.js","jquery/rendering/js/desktop/render/bizagi.rendering.desktop.uiPathButton.js","jquery/rendering/js/desktop/render/bizagi.rendering.desktop.fileprint.js","jquery/rendering/js/desktop/render/bizagi.rendering.desktop.link.js","jquery/rendering/js/desktop/render/layout/bizagi.rendering.desktop.layout.render.js","jquery/rendering/js/desktop/render/layout/bizagi.rendering.desktop.layout.placeholder.js","jquery/rendering/js/desktop/render/layout/bizagi.rendering.desktop.layout.boolean.js","jquery/rendering/js/desktop/render/layout/bizagi.rendering.desktop.layout.image.js","jquery/rendering/js/desktop/render/layout/bizagi.rendering.desktop.layout.link.js","jquery/rendering/js/desktop/render/layout/bizagi.rendering.desktop.layout.label.js","jquery/rendering/js/desktop/render/layout/bizagi.rendering.desktop.layout.text.js","jquery/rendering/js/desktop/render/layout/bizagi.rendering.desktop.layout.dateTime.js","jquery/rendering/js/desktop/render/layout/bizagi.rendering.desktop.layout.number.js","jquery/rendering/js/desktop/render/layout/bizagi.rendering.desktop.layout.money.js","jquery/rendering/js/desktop/render/layout/bizagi.rendering.desktop.layout.upload.js","jquery/rendering/js/desktop/render/bizagi.rendering.desktop.geolocation.js","jquery/rendering/js/desktop/render/bizagi.rendering.desktop.hidden.js","jquery/rendering/js/desktop/render/bizagi.rendering.desktop.money.js","jquery/rendering/js/desktop/render/query/bizagi.rendering.desktop.queryMoney.js","jquery/rendering/js/desktop/render/bizagi.rendering.desktop.radio.js","jquery/rendering/js/desktop/render/query/bizagi.rendering.desktop.queryRadio.js","jquery/rendering/js/desktop/render/query/bizagi.rendering.desktop.queryState.js","jquery/rendering/js/desktop/render/query/bizagi.rendering.desktop.queryCaseState.js","jquery/rendering/js/desktop/render/query/bizagi.rendering.desktop.queryGrid.js","jquery/rendering/js/desktop/render/bizagi.rendering.desktop.list.js","jquery/rendering/js/desktop/render/bizagi.rendering.desktop.multiSelect.js","jquery/rendering/js/desktop/render/bizagi.rendering.desktop.handSignature.js","jquery/rendering/js/desktop/render/query/bizagi.rendering.desktop.queryList.js","jquery/rendering/js/desktop/render/query/bizagi.rendering.desktop.queryMultiSelect.js","jquery/rendering/js/desktop/render/bizagi.rendering.desktop.userfield.js","jquery/rendering/js/desktop/render/bizagi.rendering.desktop.document.js","jquery/rendering/js/desktop/render/bizagi.rendering.desktop.image.js","jquery/rendering/js/desktop/render/bizagi.rendering.desktop.searchList.js","jquery/rendering/js/desktop/render/bizagi.rendering.desktop.upload.js","jquery/rendering/js/desktop/render/bizagi.rendering.desktop.getUser.js","jquery/rendering/js/desktop/render/query/bizagi.rendering.desktop.queryProcess.js","jquery/rendering/js/desktop/render/bizagi.rendering.desktop.comboSelected.js","jquery/rendering/js/desktop/container/bizagi.rendering.desktop.usersForm.js","jquery/rendering/js/desktop/render/bizagi.rendering.desktop.stakeholder.js","jquery/rendering/js/desktop/render/bizagi.rendering.desktop.userPassword.js","jquery/rendering/js/desktop/render/bizagi.rendering.desktop.gridActions.js","jquery/rendering/js/desktop/render/bizagi.rendering.desktop.numberScientificNotation.js","jquery/rendering/js/desktop/render/bizagi.rendering.desktop.actionLauncher.js","jquery/rendering/js/desktop/render/bizagi.rendering.desktop.range.js","jquery/rendering/js/desktop/render/bizagi.rendering.desktop.rangeDate.js","jquery/rendering/js/desktop/render/bizagi.rendering.desktop.rangeMoney.js","jquery/rendering/js/desktop/render/bizagi.rendering.desktop.rangeNumber.js","jquery/rendering/js/desktop/render/bizagi.rendering.desktop.entityTemplate.js","jquery/rendering/js/desktop/render/bizagi.rendering.desktop.checkList.js","jquery/rendering/js/desktop/render/bizagi.rendering.desktop.activityCheckList.js","jquery/rendering/js/desktop/render/column/bizagi.rendering.desktop.columns.combo.js","jquery/rendering/js/desktop/render/column/bizagi.rendering.desktop.columns.document.js","jquery/rendering/js/desktop/render/column/bizagi.rendering.desktop.columns.letter.js","jquery/rendering/js/desktop/render/column/bizagi.rendering.desktop.columns.search.js","jquery/rendering/js/desktop/render/column/bizagi.rendering.desktop.columns.date.js","jquery/rendering/js/desktop/render/column/bizagi.rendering.desktop.columns.text.js","jquery/rendering/js/desktop/render/column/bizagi.rendering.desktop.columns.searchList.js","jquery/rendering/js/desktop/render/column/bizagi.rendering.desktop.columns.number.js","jquery/rendering/js/desktop/render/column/bizagi.rendering.desktop.columns.numberScientificNotation.js","jquery/rendering/js/desktop/render/column/bizagi.rendering.desktop.columns.upload.js","jquery/rendering/js/desktop/render/column/bizagi.rendering.desktop.columns.radio.js","jquery/rendering/js/desktop/render/column/bizagi.rendering.desktop.columns.list.js","jquery/rendering/js/desktop/render/column/bizagi.rendering.desktop.columns.image.js","jquery/rendering/js/desktop/render/column/bizagi.rendering.desktop.columns.uploadecm.js","jquery/rendering/js/desktop/render/column/bizagi.rendering.desktop.columns.link.js","jquery/rendering/js/desktop/render/column/bizagi.rendering.desktop.columns.button.js","jquery/rendering/js/desktop/render/column/bizagi.rendering.desktop.columns.actions.js","jquery/rendering/js/desktop/render/column/bizagi.rendering.desktop.columns.exclusiveCheck.js","jquery/rendering/js/desktop/render/column/bizagi.rendering.desktop.columns.readonly.js","jquery/rendering/js/desktop/render/column/bizagi.rendering.desktop.columns.hidden.js","jquery/rendering/js/desktop/render/query/bizagi.rendering.desktop.querySuggest.js","jquery/rendering/js/desktop/render/query/bizagi.rendering.desktop.queryExtendedText.js","jquery/rendering/js/desktop/render/query/bizagi.rendering.desktop.queryText.js","jquery/rendering/js/desktop/render/query/bizagi.rendering.desktop.queryCheck.js","jquery/rendering/js/desktop/render/query/bizagi.rendering.desktop.queryYesNo.js","jquery/rendering/js/desktop/render/query/bizagi.rendering.desktop.querySearch.js","jquery/rendering/js/desktop/container/bizagi.rendering.desktop.queryForm.js","jquery/rendering/js/desktop/render/query/bizagi.rendering.desktop.queryTextAdvanced.js","jquery/rendering/js/desktop/render/query/bizagi.rendering.desktop.queryNumberAdvanced.js","jquery/rendering/js/desktop/render/query/bizagi.rendering.desktop.queryMoneyAdvanced.js","jquery/rendering/js/desktop/container/bizagi.rendering.desktop.formTemplate.js","jquery/rendering/js/desktop/bizagi.rendering.desktop.factory.js"],"names":["_typeof","obj","Symbol","iterator","constructor","prototype","bizagi","rendering","container","extend","initializeData","params","this","_super","containsGrid","countByRenderType","createRenderElement","element","getFormContainer","properties","isSearchesQueryForm","render","rangeQuery","xpath","type","resize","size","width","$","each","children","i","child","when","isRendered","done","startLoading","delay","overlay","endLoading","counter","length","getElementType","ELEMENT_TYPE_CONTAINER","countByRenderTypeWithParams","param","height","configureLayoutView","getChildrenSumHeight","excludeElement","containerHeight","ELEMENT_TYPE_RENDER","renderHeight","getChildreCount","postRender","retype","processClassicRetype","hint","processRenderHint","helpText","showIcon","postRenderReadOnly","processLayout","isLabelFormat","format","getLabel","label","observableElement","getControl","control","jQuery","getControlFiller","controlFiller","setValidationMessage","message","self","util","isIE8","ready","iconError","iconHelp","isIE9","attr","tooltip","parent","removeClass","isNewRenderForm","hideIcon","text","addClass","input","span","prepend","focus","keypress","blur","val","click","time","openAutomatically","elementForm","getElement","containerForm","querySelector","style","transform","classList","remove","form","sections","rendersByType","closeAllSections","getDisplayOptionClass","displayType","changeDisplayOption","el","getAlignClass","alignType","changeLabelAlign","changeValueAlign","getContainerIcons","icon","visibleIcon","$containerIcons","$errorIcon","$helpIcon","css","is","min-width","mouseover","e","preventDefault","stopPropagation","undefined","data","tooltipClass","items","content","reg","hasClass","attributes","value","test","sanitizeHTML","title","_title","ui","dialog","_getMaxZindex","containerIcons","errorIcon","iconContainer","display","performDesignModeMethods","columns","column","applyOverrides","decorated","originalGetControl","getFormattingLabel","bold","result","surrogateKey","cell","cellIcon","editable","applyColumnStyles","align","textFormat","background","Class","POPUP_WIDTH","POPUP_HEIGHT","init","dataService","renderFactory","dialogParams","doc","window","document","item","buttons","extraButtons","localization","getResource","dialogDeferred","Deferred","dialogBox","empty","appendTo","showDialogBox","resolve","fail","reject","idPageCache","getPageCache","renderDialogBox","promise","reverseButtons","orientation","defer","showSaveButton","parseBoolean","showCancelButton","saveButtonLabel","cancelButtonLabel","maximized","performActions","event","isPlanForm","validateForm","forceCollectData","collectRenderValues","allowGetOriginalFormValues","formValues","onSave","currentTarget","prop","button","closeDialogBox","includes","addValidationMessage","messages","modalError","show","key","renders","getRenders","updateOriginalValue","addErrorMessage","asyncTabsDef","getAllTabs","getRenderByType","getAllTabsLength","innerTabsLoading","useOrSetLoaderDeferred","loadingDeferred","getLoaderPromise","response","deleteLoaderDeferred","onCancel","objButtons","nameButon","modal","resizable","open","isWebpart","isSharepointContext","isWebpartContext","trigger","close","resizeStop","maximize","triggerHandler","unmaximize","adjustOverlay","_appresize","args","left","screen","top","dispose","focusFirstControl","effect","defaultControl","not","controlHtml","closest","getRender","innerControl","isValidControlForFocus","removeAttr","timeoutEffect","setTimeout","clearTimeout","id","isOnGrid","grid","getGridByColumn","getColumnType","def","contextType","rewriteContextType","getFormData","pipe","recordXPath","recordXpath","removeActions","required","removeTransitions","getContainer","canvas","selectedTabs","isRefresh","requestedForm","fromRender","errorTemplate","getCommonTemplate","responseText","objMessage","JSON","parse","errorType","tmpl","html","customizeDialogBox","override","adjustButtonPositionDialogForm","adjustButtonPosition","scrollTop","bind","_","refreshParams","getSelectedTabs","mainForm","childrenContainer","find","availableHeight","ResizeSensor","fitSizes","clientHeight","transitions","actions","body","overlayHeight","parseInt","overlayBody","overlayCanvas","getStartForm","timeoutRecalculate","instance","recalculate","searchForms","searchParams","otherOptions","hasOwnProperty","unbindAutoSaveForm","renderSearchDialog","getSearchContainerData","_form","contexttype","tabContainer","firstChild","searchForm","index","loadSearchTab","tab","currentSearchForm","tabs","ev","dialogBoxDeferred","getSearchFormData","searchFormContainer","push","append","defaultButtons","searchTriggeredBy","performSearch","concat","reverse","popupWidth","popupHeight","detach","pageCacheToInvalidate","invalidatePageCache","addButtons","deferred","elements","searchFormToLoad","otherElements","isDefault","displayName","caption","searchFormData","pageCacheId","console","log","strMessage","divMessage","idSearchForm","url","idRender","search","xpathContext","dataType","sessionId","template","getTemplate","textarea","nicEditor","iconsPath","getLetterEditorIconsPath","fullPanel","panelInstance","templateParts","split","nicEditors","findEditor","setContent","newContent","getContent","replaceAll","join","desktop","postRenderContainer","useQuickActions","initFormButton","getMode","getButtons","isEntityForm","configureBindAutoSave","deferredSave","autoSaveEvents","beforeUnloadFunction","newData","isEmptyObject","unbind","_data","buildProcessPath","scroll","hide","callback","autoSaveFunction","haveAutosaveAssociated","saveFormDelegate","proxy","idAutoSave","getIdentifierFormForAutosave","functionSaveFormDelegate","uniqueId","autoSaveIdentifier","autoSaveHandlers","saveBox","changes","hasChanged","showSaveBox","saveForm","isOfflineForm","context","deferredsToWait","collectRenderValuesForSubmit","deferreds","apply","submitData","action","always","getChanges","mode","queryForm","getFormType","summaryForm","globalForm","displayAsReadOnly","processPath","fasttmpl","pathProcess","maxButtonSupported","maxButtonForQuickActions","buttonsToShow","getListWithPriority","formButtons","maxButtons","processQuickButton","ordinal","listButtons","filter","visible","map","Object","assign","additional","priority","quickAction","ranked","panel","contentPanel","configureDesignView","formDisplayName","active","activeTab","activate","visibleTab","timeoutResize","getParams","resizeInPopUpHTML","beforeActivate","newTab","setActiveTab","timeoutHeader","forEach","tabItem","tabHeader$","position","at","heightActivitiFormContainer","renderForm","buttonContainer","idWorkitem","heightButtonContainer","tabReadyDeferred","tabActiveDeferred","resizeTimeout","setAsActiveContainer","argument","renderTabContent","loadOnDemand","printversion","canSkipThisFormType","replaceChildrenHtml","renderChildrenHtml","timeoutLoading","isDisposed","replaceChildrenTag","formType","setInterval","clearInterval","changeVisibility","header","getActiveTab","afterToRefresh","horizontal","iCount","j","innerChild","jCount","renderWidth","percent2Number","renderedElement","getRenderedElement","layout","accordion","autoHeight","accordionItem","group","styleSufix","collapse","expanded","configureHandlers","toggleClass","toggle","isOpen","expand","toogleContainer","section","renderContainer","getOrientation","isDesign","messageValidation","guid","displayAs","sectionContent","renderSectionContent","breadCrumb","getBreadcrumb","orderSection","isActive","printVersion","breadCrumbElements","querySelectorAll","openSectionFromClick","add","addEventListener","Array","call","stepsBack","getAttribute","goBack","executeChildrenPostRender","childrenElements","childElement","Number","childrenHash","postRenderElement","containerAnimation","parentElement","headerSection","removeEventListener","isIE","getFormOrientation","scrollIntoView","behavior","block","openSection","then","setAsActive","direction","sectionParent","getSectionParent","sectionProperties","sectionParams","getFormParent","removeAnimationClasses","restoreSectionsOutOfPath","order","msOrder","sectionsToOpen","depth","translateWithoutAnimation","openFormWithoutAnimation","openSectionWithoutAnimation","lastElement","treeIdentifier","ancestors","goBackInPath","steps","DOMElement","className","setParam","selectedSection","toLowerCase","renderResult","skipInitialLoad","rowsPerPage","inlineAdd","allowDelete","allowAdd","hideActionsColumn","floatingHeader","sortBy","sortOrder","overrideGetRemoteData","getRemoteData","parseAdditionalProperties","columnVisible","allowDecimals","showTime","jqgrid","resultsGrid","searchCriteria","results","criteriaContainer","resultsContainer","refreshResults","refresh","dataReady","resizeResults","onSearchFinished","records","maxLength","setDisplayValue","decodedValue","decodeURI","validateValue","setValue","isEmpty","attachRetypeDouble","retypeDouble","changeRequired","changeRequiredLabel","disabled","hasValue","triggerRenderValidate","changeCellRequired","currentValue","createTooltip","collectData","renderValues","getValue","String","fromCharCode","controlValueIsChanged","validateInputRetype","changeFontUnderline","underline","valueFormat","labelStrikethrough","strikethru","valueStrikethrough","formatUnderline","isLabelToFormat","$formatElements","getElementsToStylized","formatStrikeThrough","changeTextDecoration","changeFontStrikethru","strikeThrough","labelUnderline","valueUnderline","$element","textDecoration","base","readonly","renderElement","extendedText","actualMaxLength","autoExtend","minHeight","maxLines","overflow","timeoutAutoExtended","changeHeightAutoExtended","resolvedValue","br2nl","valueToDisplay","encodeHtmlText","getDisplayValue","isNull","cleanData","removeProperty","previousValue","newValue","scrollHeight","renderReadOnly","number","numericInput","numberToFixedString","executeFormatCurrencyPlugin","asNumber","symbol","positiveFormat","negativeFormat","decimalSymbol","digitGroupSymbol","groupDigits","date","renderTemplateName","ud","dateFormatter","getDateFromInvariant","formatDate","fullFormat","i18n","getElementsToStylize","dateControl","getDateControl","inputDate","configureMobiscollCalendar","calendarInstance","mobiscroll","on","getCalendarInstance","isVisible","keyCode","timeoutKeyDown","compareDates","getVal","setValueFromCalendarButtons","v","setVal","fecValid","getNormalizeDate","getDateFromFormat","onChangeHandler","elementCalendar","controlElements","fakeDiv","calendar","touchUi","animate","anchor","get","focusOnClose","controls","min","Date","minValue","max","maxValue","defaultValue","timeFormat","timePickerFormat","getTimeFormat","dateFormat","datePickerFormat","dateWheels","select","selectType","rtl","lang","languages","BIZAGI_LANGUAGE","language","cssClass","handler","inst","clear","onSet","onDayChange","onChange","setDateFromTimeSelector","valueText","fnControl","onClear","onBeforeShow","opt","option","onShow","target","onClose","firstDate","secondDate","funcNormalice","getTime","removeValidations","clearValidationMessages","isNow","currentDate","currentDateString","formatInvariant","setSeconds","validationController","$canvas","getValidationsContainer","command","controllers","validation","validations","isValid","oldVal","replace","showValidationMessage","getFullFormatedDate","currentTime","fullDate","formatISO","dateFromFormat","isNumeric","ci","displayValue","callBack","disablePopup","disable","collectDataQueryForm","queryValue","included","searchType","typeSearch","toUpperCase","orderType","renderId","getRenderId","yesno","removeData","optiongroup","evt","parsedValue","toString","clearDisplayValue","check","$control","performStyles","showLetters","enableCheck","randomId","randomNumber","changeFontSize","combo","inputCombo","selectedValue","isExtraItem","isPreferencesDialog","onResizeCloseDialog","resizeCombo","idDropdown","comboDropDown","dropDownDestroy","keyup","keyUpFunction","keydown","keyDownFunction","showLoadingData","getData","hideLoadingData","internalComboDropDown","loading","outerWidth","padding","margin","my","of","collision","selectTmp","objSelected","containerDropdown","containerControl","parents","last","containerRender","findDataByValue","scrollPosition","navigator","userAgent","indexOf","appVersion","contFormScroll","repositionInterval","datasource","dropDwn","objParent","widthChild","widthControl","containerDialog","scrollParent","scrollerParent","$comboDialog","offset","$comboWrapper","off","tg","dropDownValidClose","recalculateComboOffset","delegate","onComboItemSelected","makeArray","one","dropDown","dropDownReposition","dropDownContainer","validateValueInDatasource","triggerEvents","isKeyByKey","selected","selectedKey","altKey","ctrlKey","metaKey","shiftKey","focusDependant","selectPreviousElement","selectNextElement","selectFirstElement","selectLastElement","enableTyping","typingForCombos","isSelectingItem","selectItemByKeyUp","actual","previous","prev","next","selectedId","selectedLabel","originalValue","comboValue","mapValue","preprocessValue","isString","findDataById","translated","hasLocalData","remoteDataLoaded","emptySelection","escapeValue","formatItem","isArray","emptyLabelForCombo","getSelectedValue","keyByKey","equalsToValue","tvalue","nValue","compareValIn","compareVal","dataLength","trim","substring","getValueFromData","dataValue","isNaN","getInternetExplorerVersion","selectMenu","preferences","menuContext","originalRefreshPositionMethod","selectmenu","_refreshPosition","list","arguments","newelement","cascadingCombo","BA_ACTION_PARAMETER_PREFIX","services","service","BA_CONTEXT_PARAMETER_PREFIX","itemSelected","postRenderPrintVersion","internalSetInitialValueFlag","changeRequiredControl","parentCombo","isDependant","renderControl","getParentCombo","initializingCascadingCombo","bindDependantCombo","dependantCombo","dependants","onChangeFunction","isInitialValue","refreshDependantCombo","cleanInput","isEventBinded","canBeSentQueryForm","collectionnavigator","navigationControls","getCanvas","hasData","showRow","getFirstRow","refreshControls","paginationActions","isValidRow","saveChanges","updateRow","addRow","editRow","showDetailForm","inlineEdit","isTherePendingInlineRow","getRow","cancelChanges","configureButtonsForm","refreshForwardButtons","refreshBackButtons","refreshPagination","refreshTotal","refreshRemoveAction","nextControl","getInnerControl","lastControl","keys","pointer","previousControl","firstControl","removeButton","totalRows","getTotalRows","refreshActions","eSave","eCancel","save","cancel","setFocus","navigationPage","getParameters","loadForm","detailLabel","editPage","showInlineRow","isValidKey","setPointer","appendWaitForLoader","formContainer","rendersById","bindRenderChangeEvent","l","changed","temp","triggerRenderChange","performValidations","arrayCollectionNavigator","hasChildren","getChildCollectionNavigator","saveChangesChildren","submitSaveRequest","removeInlineAddRecord","fetchData","failHandler","inlineAddRecords","removeKey","pop","submitRollbackRequest","removeNavigationForm","drawPreview","addInlineRow","submitAddRequest","newid","addKey","getLastRow","addLabel","addPage","error","submitInvalidatePageCacheRequest","submitEditRequest","editLabel","removeRow","showConfirmationBox","submitDeleteRequest","addNavigationForm","processButton","buttonProperties","originalProcessButton","processFailMessage","validate","disposed","getKeys","rows","promises","drawControls","collectionControls","drawForms","drawControl","drawActions","outerHTML","total","withAddForm","withEditForm","allowDetail","forms","getActionsTemplate","saveDeferred","actionClass","buttonClass","contextPagination","getNextRow","getPreviousRow","BA_PAGE_CACHE","ecm","listControl","fileProperties","maxSize","BIZAGI_SETTINGS","UploadMaxFileSize","maxFiles","maxfiles","validExtensions","singleExtensions","addUrl","getUploadAddUrl","deleteUrl","q_xpath","encodeXpath","getUploadXpath","files","filesCount","showRenderOptions","renderUploadItem","checkMaxFiles","preventDefaultForAnchorTag","buildAddParams","networkSpeed","bizagiUpload","renderReference","dialogTemplate","uploadedFiles","isECM","onUploadFileCompletedCallback","onUploadFileCompleted","dialogTitle","configureUploadHandlers","reference","extraData","buildUpgradeParams","isUpdatingECM","onUpdateUploadFileCompleted","waiting","renderFileLayout","idFileUpload","fileName","status","getFileExtension","isImage","allowSendInMail","controlContent","insertAfter","uploadId","getXpathContext","xPath","idAttrib","bindEmailDialog","showMessageBox","bizagiSendEmail","fileControl","metadataTemplate","imageConfig","zIndex","getMaxZindex","originalData","metadataParams","metadataECMMultiaction","getFileProperties","getECMMetadata","metaData","filename","ecm_ecmStatus","ecmStatus","ecm_isVisible","ecm_allowUpdateMetadata","allowUpdateMetadata","ecm_allowDelete","ecm_allowUpdateContent","allowUpdateContent","ecm_allowView","allowView","ecm_allowCheckOut","allowCheckOut","ecm_allowCancelCheckOut","allowCancelCheckOut","ecm_allowEdit","allowEdit","idFileUploads","image","requestFile","imgURL","src","imageZoom","dataItem","showMetadata","hover","setControlEvents","debug","multiClickControl","modalEcm","displayOptionsContent","configureToggleHandlers","isAsync","asynCheckEnabled","asyncCheckTimeout","IsFileOnECM","isFileOnECM","idUpload","toggleOptions","fileMetadata","download","getFile","fileId","handleJSONResponse","blobFile","URL","createObjectURL","downloadBlobFile","err","globalControl","first","clone","prepare","deleteECMFile","splice","cancelCheckOut","checkOutFile","makeStringMetaDataControler","valueMatch","match","makeDatetimeMetaDataControler","separator","numericFormat","RegExp","lastChar","substr","makeBooleanMetaDataControler","ecmMetaDataFieldEdit","metadatavalue","metadatapostvalue","spanMetaDataValue","replaceWith","validateData","checkData","isValidFields","metadata","editButtons","field","actualValue","idMetadata","metaValues","encode","metadataValues","updateECMMetadata","inputMetaDataValue","validationFunction","inputValue","datepicker","changeYear","onSelect","dateText","makeDecimalMetaDataControler","checked","Math","ceil","random","rnd","file","extension","inArray","folder","BIZAGI_PATH_TO_BASE","scriptData","editUrl","uploadWrapper","controlList","isMaintenanceWindow","invalidElements","bValid","isNewRow","isFromCreatedRow","isValidBase","$arrayEcmControls","errorMessage","arrayItems","deleteUploadItem","ctrl","metadataContext","currentField","isRTLDirection","isRTLOrientation","showActionColumn","singleInstance","cellMetadata","pendingActions","collapseState","labelAlign","editableGrid","columnActions","columnActionParams","actionsColumn","xpath-column","submitOnChange","totalize","hasTotalizer","columnwidth","headerStyles","cssclass","spliceRowData","spliceRowDataVisible","spliceRowDataEditable","hasActions","getGridTemplate","buildColumnModel","cleanNewRecords","applyGridPlugin","page","sortType","updateData","initialLoadDone","method","buttonsComponent","applyColumnsWidth","changeFontBold","pager","scrollableArea","bizagi_grid_desktop","showSummary","hasExclusiveCheck","tableCssClass","buttonsPst","smartPagination","gridDefaultSortBy","isSortable","getHeaderStyles","gridRtl","table","emptyTable","specialColumn","row","rowButtons","rowButtonsRtl","specialCell","buttonsRtl","dynamicPager","summary","summaryCell","exportOptions","edit","details","allowMore","enableXlsExport","enablePdfExport","tooltips","deleteLabel","exportOptionsLabel","errorsMessage","pageRequested","hasColumnChanges","exclusiveChanges","isSummaryOrGlobalForm","sortRequestedPage","sortRequested","sortName","getColumn","getSortName","drawCell","cellReady","onCellReady","rowSelected","deleteRow","moreRows","saveAddedRows","saveInlineAddedRows","saveRows","canBeExported","beforeInlineAdd","inlineAddDeferred","afterInlineAdd","showFormDetails","cancelEdition","removeNewRecords","showGridExportOptions","performExportGrid","printParams","performCollapseGrid","rowdblclick","canEditRow","businessKey","triggerGridPluginHandler","slice","columnModel","name","hidden","columnIndex","normalizeType","columnLabel","gridColumn","summarizeBy","operation","bizAgiProperties","dataReadyDeferred","loadChanges","rowIndex","rowChanges","getExclusiveChangeByRow","columnData","mapChangeValue","comboData","change","setCellOverrides","applyColumnsWidthUpdate","sort","isRTL","removeRemainingColumns","changeOrderData","color","isReadyToSave","hasNewRecordsToSave","newKeys","alreadySaved","errDef","lastActionButton","getLastActionButton","skipSubmitData","cellOverride","getCellOverride","renderColumn","newRecords","drawEditableCell","drawReadonlyCell","originalEditable","overrideProperties","cellOverrides","getDecorated","onCellChange","originalFormat","renderSummary","_value","compositeValue","getCompositeValue","isNewRecord","setHours","isSubmitOnChange","advancedSearch","collectGridChange","startActionExecution","endActionExecution","isExclusiveControl","isExclusive","max-width","submitOnChangexpathContext","submitOnChangexpathContextRow","postRenderSummary","applySummaryColumnStyles","addFormDialog","maximizeGridPopup","getMainForm","addExclusiveChange","disableServerGridValidations","submitForGridChange","executeSubmitEditRequest","headerFormat","italic","editInlineRow","changeRowEditable","changeCellBackgroundColor","getControlCell","changeCellColor","changeColor","changeCellVisibility","findIndex","isCurrentGridCell","cellVisible","changeCellEditability","changeEditabilityCellControl","changeEditability","changeColumnEditability","originalProperties","changeColumnVisibility","changeColumnRequired","enableGridRefreshAfterCellRefresh","isObject","actionController","refreshControl","cleanCellData","rowLength","changeCellValue","getCellValueFormatted","changeCellMaxValue","changeMaxValue","changeCellMinValue","changeMinValue","rowDeleted","enabledChecks","checks","calculateFetchData","originalrowsPerPage","dataToSend","moreRowsCommon","enablePrintFromEditForm","workportal-widget-dialog-box-print","printFormCommand","workportal","printform","print","queue","prepareAddAction","multiaction","addGridRecordData","setRowAsSaved","hasRefresh","exportPst","expMenuDirection","exportPstWrapperCss","exportPstContentCss","outerHeight","hasVisibleActions","canBeExport","$content","collapseHeaderCss","$gridWrapper","$collapseIcon","updateCollapseState","dataUrl","getCollapseData","exportType","isAcrobatInstalled","checkAdobePlugin","browser","msie","downloadExportedGrid","updateAffectedCellManually","getRowIndexByKey","installed","ActiveXObject","getGridExportFile","formatGrid","tableControl","closeButton","parentPromise","inlineAddPromise","columnWidth","widthToApply","resizableColumns","elementChild","textDecorator","operator","setProperty","$tableContext","enableColorHeaderGrid","hasColorHeader","formatted","columnProperties","simpleXpath","convertProperties","bizagi_grid_grouped_desktop","groupByColumns","headerRow","emptyCell","groupBy","ADVANCED_SEARCH_ID","ADVANCED_ADDITION_ID","CLEAR_SEARCH_ID","NO_RESULTS_SEARCH_ID","SEARCH_DELAY","SEARCH_MAX_RECORDS","searchImage","getSearchDefaultImage","deferredReference","searchInput","applyAutocompletePlugin","selection","oSel","createRange","moveStart","moveEnd","msgObj","hideAutocompleteLoading","autocomplete","showSearchDialog","allowClear","alignForSuggest","rtlClassForSuggest","autoFocus","noResults","source","req","activeRequestTerm","term","now","parseRequest","encodeURIComponent","expireKey","requestKey","expire","getItemLocalStorage","enableLocalStorage","processRequest","suggestMenu","menu","suggestContainer","controlContainer","itemWidth","calculateSuggestionWidth","suggestList","_renderItem","ul","renderClearItem","renderAdvancedItem","renderAddItem","renderSearchItem","_resizeMenu","searchItem","suggestions","addToSuggestions","allSuggestions","request","expireTime","expireCache","setItemLocalStorage","allowSuggest","searchLength","showAutocompleteLoading","state","hideStatus","maxRecords","parseValue","performTermMatches","labelWithoutFormat","additionallabel","showAddRecordDialog","guidEntity","entity","formData","isMapEmpty","mapping","searchDialog","found","setDisplayValueToControl","allowFullSearch","needsUserConfirmation","userConfirmationMessage","jqXHR","renderControlSearchForm","addForm","allowNew","readyActionExecution","getValueId","currentId","getValueLabel","letter","showLetterDialog","configureHandlersReadOnly","getLetterNotEditableUrl","getXpath","getContextXpath","getCanGenerateLetter","wasGenerated","canGenerate","getLetterContent","saveLetterContent","buttonInput","timeoutRemoveAttr","validateGridsOnButtonClick","hasValidGrids","htmlMessage","draggable","pressed","runButtonAction","rpabot","bzToast","getMaxZIndex","initializeRobot","robotInstance","runRobot","UiPathRobot","getProcesses","getResourceByKey","disabledButton","robotName","queueMessage","toast","relaunch","setLoaderStatus","addItem","onClickIcon","onCanStartJob","startJob","inputs","outputs","controlsInForm","areAllControlsInForm","allControlsFound","getRobotInputs","start","onStatus","processResults","processOutput","successMessage","setSuccessStatus","enableButton","InnerException","Message","setErrorStatus","handleNotFoundControls","controlsNotFound","robotResult","output","responseValue","robotArgumentName","relatedControl","rpaArgs","resp","arg","fileprint","typeForm","downloadFile","mozilla","idFrame","fileURL","iframe","frm","getElementById","contentWindow","revokeObjectURL","link","attachEvents","linkSolver","linkPrefix","linkType","windowParams","printf","windowObjReference","linktarget","$context","layoutRender","layoutPlaceholder","layoutBoolean","layoutImage","getImageUri","ajax","processData","success","blob","xhr","contentType","getResponseHeader","byteArrayToBlob","stringToByteArray","urlCreator","webkitURL","imageUrl","renderParams","paramsRender","hash","idcase","idCase","idworkitem","contextxpath","xpathActions","serviceLocator","getUrl","replaceMultiple","layoutLink","onClickElement","referenceType","contextEvent","getContextEvent","triggerGlobalHandler","layoutLabel","layoutText","layoutDateTime","layoutNumber","layoutMoney","layoutUpload","getValueFilesByData","valueResult","getHTMLFiles","noFiles","replaceFilesHtml","isExecutionMode","getUploadFileEntity","isContextContainerWidgetRender","surrogatekey","guidentity","formLink","executeRule","propertyName","getPropertyData","property","textStatus","errorThrown","executeExitRule","hasexitrule","isThisFormReadOnly","saveFormLinkData","executeEntryRule","hasentryrule","getFormLinkXpath","saveLinkForm","saveUrl","openFormLink","canBeSaved","openFormLinkDialog","handleFailRuleExecution","warn","handleOnSaveDialog","refreshForm","getFormLinkXpathContext","showErrorMessage","parentXpathContext","$link","$buttonLink","geolocation","cordinate","msg","performPrecision","getCurrentPosition","coordinate","coords","latitude","longitude","money","attachFormatCurrency","showSymbol","currentUser","radio","unique","radiogroup","onOptionGroupChange","createContainerElement","createFormElement","selectable2","multiple","isPropagationStopped","focusSelectedItem","listSize","elList","multiSelect","MORE_OPTION_WIDTH","timeoutSelectedItems","addSelectedElements","onToggleDataView","onUnselectElement","onShowSelectedElements","values","getDataValue","totalValues","$tagsContainer","$ChildToAdd","processControlLayout","canAddMoreItems","$viewMore","renderFloatView","updateArrow","options","isChecked","markAsChecked","$floatList","showFloatListView","floatListHandlers","parseJSON","$containerControl","$containerRender","timeoutMouseDown","destroyFloatView","$list","closeFloatView","$listView","floatViewIsCollapsed","idToRemove","removeElement","valuesToShow","$tagElements","$floatListContext","$listContainer","checkbox","$search","filterList","findItemById","addElement","handSignature","$container","getSignatureContainer","setResizeObserver","renderSignature","imageElement","createElement","buildItemUrl","$actions","autoSave","debounce2","dataImage","saveSignature","DELAY_TO_SAVE","BzjSignature","saveTimestamp","toDataURL","fire","setData","setState","STATE_TYPE","onSignatureClear","onSignatureEdit","onSignatureSave","EMPTY_VALUE","deleteImage","executeFormFailHandler","draw","sizeRatio","pluginInitialized","setSignature","renderSignatureValue","normalizeData","newParameter","displayXpath","mappedValue","valueObj","userfieldWrapper","getUserfieldControl","sControl","userfieldName","exists","eval","createUserfieldInstance","timeOutTrigger","userfield","userfieldGuid","device","getUserfieldDefinition","loadUserfield","dynamicFunction","initialParams","getUserFieldInstance","isUserField","userfieldInstance","replicateUserfieldMethods","styleContent","styleGuid","str","ex","loadStyle","defaultUserField","designUserField","startUserfieldLoading","endUserfieldLoading","userfieldDefinition","basicUserField","showDialog","formDialog","load","callInside","BACloseWindow","submitForm","showPopup","getEditableControl","controlName","getReadonlyControl","applyDocumentTemplatesFormat","documentList","returnType","returnCssTypeFile","updateControlForPrintMode","showDocumentPreview","tem","N","ua","M","sayswho","appName","count","printFn","pdf","timeoutPrint","redrawDocuments","documents","downloadAllDocuments","autoOpenDocuments","autoOpen","downloadalldocuments","joinedDocument","getAllDocumentFiles","$item","lastIndexOf","joined","getDocumentFile","forceBase64","imgWidth","imgHeight","flashVersion","timeoutDefaultProperties","cssExtended","containerChildsSize","containerChildsHeightSum","baseImageURL","resizableImgNode","background-image","border-top-width","border-left-width","border-right-width","border-down-width","isImageGreaterThanContainer","controlWidth","timeoutAdjustImage","isAuto","isAutoWidth","$imgWidth","wSize","isPostRendered","deleteHandler","border","line-height","getTemplateItem","openUploadDialog","checkMaxSize","checkFileTypes","processUploadFile","closeUploadDialog","imageWrapper","isImageLoaded","widthBase","htmlImage","timeoutAdjustContainer","columnAlign","isUserPreference","BIZAGI_SESSION_NAME","showError","stringEndsWithValidExtension","stringToCheck","acceptableExtensionsArray","endsWith","errorContainer","uploadForm","uploadIFrame","timeoutFn","timeoutForFn","submit","searchList","SEARCH_MIN_LENGTH","padding-right","attachKeyEvents","keyUnicode","charCode","selectionStart","removeLastElement","selectedValues","isNewItem","appendFoundItem","minLength","deleteItem","newElement","before","li","stringValue","templateWithValues","association","closeElement","togglepanels","animated","allowFlip","flipped","flipstate","getFlipAssociation","getColumnData","getRightAssociation","internalPostRender","idLeft","idRight","mask","setBindToClose","ol","classCss","makeJsonBase","getLeftName","upload","haveFiles","isClicked","bindExternalPopup","isInGrid","getCaseNumber","caseNumber","currentPopup","widgetName","widgets","widget","BIZAGI_WORKPORTAL_WIDGET_GENERICIFRAME","widgetURL","injectCss","modalParameters","afterLoad","labels","getElementsByTagName","innerText","previousSibling","textContent","afterLoadParams","pluginUpload","getUploadXpathContext","idSession","onChangeFile","onCheckMaxSize","onValidate","maxAllowedFiles","maxFilesLimit","alert","uploadField","enabled","previousCheck","getDefaultValueAlign","errorList","toFind","newItem","insertBefore","changeFontItalic","documentMode","getUser","bindSearchUserPlugin","clearValue","filters","displayNames","searchButtonName","clearButtonName","valuesToSelect","renderFactoryReference","getResourceReference","selectItem","onItemSelectedSuccess","searchUsers","filterData","callSearchUserEndpointByContext","allowDelegatedUser","editingUser","idUser","allowAddUser","menuSecurity","UserAdmin","bizagiSearchUser","callSearchUserEndpointInUsersForm","callSearchUserEndpointInUserPreferencesForm","callSearchUserEndpointInOtherCases","getUsersListForXpathIdBossUser","xpathIsDelegated","getUsersListForXpathIdDelegate","getUsersListFromPreferences","getUsersListForStakeholders","getOptions","iduser","user","queryProcess","wrapper","getWrapper","loadData","renderData","wrapperElement","linkApplication","process","itemElement","idParent","idContCategory","setupLinks","idCategory","elementRender","processSelect","parentType","routeProcess","iconProcess","querySearchUser","idForm","getUsersListFromQueryForm","queryFormId","username","comboSelected","showInitialData","selectedItemsToUpdate","orderArrayList","orderList","a","b","nA","nB","filterFunction","rightValues","removeItem","leftValues","selectInput","reduce","dataSelected","grep","dataSelectedToRemove","dataOptions","showListBoxComboData","htmlControl","stringify","checkRequired","collectedValues","waitingTemplate","waitingOverlay","waitingMessage","processButtons","sendMailControl","passwordControl","paramsSave","formAction","sendMail","password","getConfiguration","redirectErrorPage","location","href","passwordMinLength","passwordMaxLength","generateRandomPassword","processSave","userFormData","createUser","updateUser","expandNotificationBox","getLengthPassword","chars","randomPassword","randomPosition","floor","saveValue","collectedData","getCollectedData","domain","fullName","userName","submitDataAction","tag","performAction","execute","responses","resultUser","userId","idEntity","expiredAccountControl","lockedAccountControl","expiredAccount","lockedAccount","stakeholder","bizagiControl","maxElemShow","maxPageToShow","selectedItems","valueXpath","currentPage","addInstance","addGrid","goToBack","removeAssociated","onKeyUpFilter","paramField","gridDataService","onGetData","onGetDataFail","tempGrid","dataColumns","tempColumns","iColumn","objectColumn","idData","idInstance","nameInstance","newDataRows","iRow","stateInstance","tooltipLink","rowTemplate","gridTmp","tooltipUnassociated","tempPagination","totalRecords","totalPages","pageToshow","pagerData","pagination","pages","pageNumber","paginationHtml","$pager","bizagiPagination","actualPage","listElement","clickCallBack","setRowsEvents","onLinkClick","executeLinkClickIfProceed","associatedUser","refreshStakeholderValue","onStakeAssociatedFail","confirmationMsg","refreshStakeholderList","userPassword","C","CryptoJS","userFormsSpanner","enc","Utf8","userFormsCode","Latin1","resultMain","algo","AES","createEncryptor","CBC","pad","Pkcs7","iv","finalize","resultMainFinal","Base64","spanTmp","numberScientificNotation","attachFormatScientificNotation","scientificNotationFormat","scientificNotationNumber","actionLauncher","surrogatedKey","appendContent","templateArguments","actionsContainer","configureQueueVisibility","getActions","processPropertyValueArgs","getPropertiesActionLaucher","templatetype","processPropertyValueDataTmplArgs","templateData","deferredActions","totalActions","moreActionsManager","isMoreActions","lessActions","isHorizontal","engine","isDefaultTemplate","moreActions","allowactions","actionsVertical","allowSearch","isExpanded","moreButtonTitle","subscribe","loader","BIZAGI_WORKPORTAL_WIDGET_DIALOGNAV","refreshInbox","maximizeOnly","maxItems","moreActionsTemp","actionLauncherControls","moreVerticalButton","configureMoreActionsHandler","guidProcess","guidAction","actionType","readOnlyForm","onActionClicked","expr","FilterAction","array","moreButton","startAndThen","kendoTooltip","autoHide","multipleSelection","countSameActions","actionManager","act","executeAction","showConfirmationDialog","notifyExecution","notifications","INotifications","showSucessMessage","processActionForm","additionalXpaths","additionalXpath","isActionStartForm","savedData","editMode","idStartScope","IdScope","caseId","processActionFormCollection","xpathContextWithKey","xpathContextWithoutKey","IdEntity","addActionToQueue","processStartForm","startForm","guidprocess","mappingstakeholders","executeActionImmediately","confirmTemplate","confirmContent","confirmationMessage","confirmContentParams","actionsToExecuteContainer","listOfActions","getMappingAction","removeActionSelector","openActionSelector","removeActionToQueue","extraParameters","dataAction","actionsToExecuteTitle","range","rangeDate","defineRangeControl","rangeMoney","rangeNumber","templateGuid","guidTemplate","htmlTemplate","skipRefresh","entityTemplateControls","checkList","checkListGroup","itemId","updateDisplay","onCheckListGroupChange","addButton","newItemName","goalActivity","additionalElements","notifyLoadItems","activityWork","$divContainer","activityDescription","prepareNewItem","repaintControl","itemSelectedName","itemContent","setSelectionRange","addSelectedHandlers","refreshValue","resolved","which","checkListHtml","completed","allCheckedItems","every","idActivity","validationResolvedItems","valid","polymorphicLauncher","getPolymorphicActions","serializePolymorphicActions","treeActionsList","getTreeItems","readOnly","level","templateTreeItem","$targetData","guidObject","guidConstructor","$node","path","cachedValue","pageCache","$target","tableCell","getControlHtml","getDocumentXpath","documentTemplateGenerate","preRenderControl","deleteDocumentTemplate","xpathcontext","buttonExecuted","generateDocumentTemplate","allowGenerate","isInlineRow","noActivateButton","allowgenerate","xpathPath","deleteUploadFile","setSurrogateKey","originalRenderCellControl","internalRenderCellControl","refreshCell","originalRenderElement","resolveValue","indexes","getIndexes","resetData","defaultvalue","setDefaultValue","originalMethod","applyUploadPlugin","undelegate","getUploadFileUrl","readyDeferred","canBeSent","originalApplyUploadPlugin","uploadRender","originalRenderControl","originalInternalPostRender","columnXpath","controlElement","caller","calculateInitialLayoutProperties","configureHandlersActions","renderDraftControl","viewMore","events","fn","overflowMenu","gridChanges","tmpCheck","overrideDecoratedRenderProperties","simpleXpathArray","isValueValid","propertyOverrides","getContextType","h_contexttype","regexC","getSearchData","extra","checkIncludedAll","collectRenderValuesQueryForm","_rendersFounded","r","tryCatch","rType","iType","_matchedRender","parameters","getSearchParams","checkedChildren","isControlVisible","includedInResult","queryTextAdvanced","queryAdvanced","DATATYPE","TOOLTIP_TITLE","TOOLTIP_CONTENT","defaultFilter","filterType","setFilter","prepareForSetValue","currentFilter","getCurrentFilter","filterToSet","getCurrentAction","performDataValue","showHideCleanButton","controlInitial","isCurrentTagFilter","isCurrentWildcardFilter","configureWildcardHandlers","templateTooltip","$templateItem","filterOptionIsShowed","updateCleanButton","$buttonClean","setCurrentFilter","showTooltip","performTagItems","isCurrentNullFilter","cleanDataFilter","$inputWildcard","defineLiteControl","typeFilter","textAdvanced","getRenderProperties","typeControl","isRange","isCurrentBetweenFilter","setLiteControls","controlEnd","defaultLabel","$controlInitial","renderLiteControl","getTemplateByType","$inputFiler","configureInternalHandlers","getInputControl","getRequiredProperties","$inputControl","queryNumberAdvanced","getDefaultAllowDecimals","numDecimals","BIZAGI_DEFAULT_CURRENCY_INFO","decimalDigits","decimalSeparator","groupSeparator","setGroupDigits","colorize","colorizeOnNegative","newListValue","performListValue","from","to","initial","formatInputValue","end","getValidTagValue","thousands","getDefaultGroupDigits","numberEnd","numberInitial","numberAdvanced","isMinimum","isMaximum","$numberMin","$numberMax","$numberInitial","percentage","addTag","tagItem","controlTag","formatNumericInput","formatTagItem","decimalFormat","roundToDecimalPlace","formatDecimal","performMinValue","dataTypeMinValue","performMaxValue","dataTypeMaxValue","changeFontColor","observer","notify","isMaximumValue","calculateMaxValue","isMinimumValue","calculateMinValue","queryMoneyAdvanced","showsymbol","currencySymbol","moneyAdvanced","queryDateAdvanced","maxUndefinedYear","getFullYear","minUndefinedYear","dateEnd","dateInitial","dateAdvanced","$dateMin","$dateMax","$dateInitial","isDesignMode","setMilliseconds","formTemplate","factory","loadTemplates","loadTemplate","tmplIcons","loadOverrides","enableCustomizations","loadFile","getJavaScript","containerParams","usersForm","nestedForm","mobileform","mobilegroup","mobiletext","isAdvanced","advancedQuery","getAdvancedQueryRender","isExtended","hiddenControlsWithDataType","grouped","enableQuerySuggestBehavior","uiPathButton","entityTemplate","getLayoutRender","getSearchRender","getQueryRender","getRangeRender","activityCheckList","columnParams","exclusiveCheck","uploadecm","gridActions","queryExtendedText","queryText","queryCheck","queryYesNo","queryNumber","queryMoney","queryDate","queryCombo","queryCascadingCombo","querySuggest","queryLabel","queryList","queryMultiSelect","querySearch","queryRadio","queryState","queryCaseState"],"mappings":"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","sourcesContent":["function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /*\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: Bizagi Desktop Form Dialog Implementation\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: Diego Parra\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This script will shows a form inside a popup dialog in order to edit\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\n// Extends itself\n$.Class.extend(\"bizagi.rendering.dialog.form\", {\n  POPUP_WIDTH: 768,\n  POPUP_HEIGHT: 550 },\n{\n  /* \r\n  *   Constructor\r\n  */\n  init: function init(dataService, renderFactory, dialogParams) {\n    var self = this;\n    var doc = window.document;\n\n    //Attach the desired extra buttons, everyone need to have the localization id, so the label could match\n    self.buttons = {};\n\n    for (var item in dialogParams.extraButtons) {\n      self.buttons[bizagi.localization.getResource(item)] = dialogParams.extraButtons[item];\n    }\n\n    // Define instance variables\n    this.dataService = dataService;\n    this.renderFactory = renderFactory;\n    this.dialogDeferred = new $.Deferred();\n    dialogParams = self.dialogParams = dialogParams || {};\n\n    // Draw dialog box\n    self.dialogBox = $(\"<div class='ui-bizagi-component-loading'/>\");\n    self.dialogBox.empty();\n    self.dialogBox.appendTo(\"body\", doc);\n\n    // Create dialog box\n    self.showDialogBox(self.dialogBox, dialogParams).\n    done(function (data) {\n      self.dialogDeferred.resolve(data);\n    }).\n    fail(function () {\n      self.dialogDeferred.reject({ idPageCache: self.form.getPageCache() });\n    });\n  },\n  /*\r\n     *   Render the form\r\n     *   The params are the same that will be send to the ajax service\r\n     *   Returns a deferred\r\n     */\n  render: function render(params) {\n    var self = this;\n\n    // Fill dialog box\n    self.renderDialogBox(self.dialogBox, params);\n\n    // Return promise\n    return self.dialogDeferred.promise();\n  },\n  /*\r\n     *   Shows the dialog box in the browser\r\n     *   Returns a promise that the dialog will be closed\r\n     */\n  showDialogBox: function showDialogBox(dialogBox, dialogParams, reverseButtons) {\n    var self = this;\n    var reverseButtons = self.dialogParams.orientation == \"rtl\" ? true : false;\n\n    // Define buttons\n    var buttons = {};\n    var defer = new $.Deferred();\n\n    // Define options\n    var showSaveButton = bizagi.util.parseBoolean(dialogParams.showSaveButton) !== null ? bizagi.util.parseBoolean(dialogParams.showSaveButton) : true;\n    var showCancelButton = bizagi.util.parseBoolean(dialogParams.showCancelButton) !== null ? bizagi.util.parseBoolean(dialogParams.showCancelButton) : true;\n    var saveButtonLabel = dialogParams.saveButtonLabel ? dialogParams.saveButtonLabel : bizagi.localization.getResource(\"render-form-dialog-box-save\");\n    var cancelButtonLabel = dialogParams.cancelButtonLabel ? dialogParams.cancelButtonLabel : bizagi.localization.getResource(\"render-form-dialog-box-cancel\");\n    var maximized = bizagi.util.parseBoolean(dialogParams.maximized) !== null ? bizagi.util.parseBoolean(dialogParams.maximized) : false;\n\n    var performActions = function performActions(event) {\n      // Perform validations\n      var valid = self.dialogParams.isPlanForm ? true : self.form.validateForm();\n      if (valid) {\n        // Collect data\n        var data = {};\n\n        if (dialogParams.forceCollectData) {\n          // Turn on flag to force to collect all data on the form\n          $.forceCollectData = true;\n          self.form.collectRenderValues(data);\n          // Turn off flag\n          $.forceCollectData = false;\n        } else {\n          self.form.collectRenderValues(data);\n        }\n\n        if (dialogParams.allowGetOriginalFormValues) {\n          data.formValues = self.form.children;\n        }\n\n        // Add page cache for this form\n        data.idPageCache = self.form.getPageCache();\n\n        // Call user callback\n        if (dialogParams.onSave && !$(event.currentTarget).prop(\"disabled\")) {\n          $(event.currentTarget).prop(\"disabled\", true);\n          $(event.currentTarget).button(\"disable\"); //Setting styles\n          $.when(dialogParams.onSave(data)).\n          done(function (result) {\n            $(event.currentTarget).prop(\"disabled\", false);\n            $(event.currentTarget).button(\"enable\"); //Setting styles\n            if (result == null || result == true || result.type == \"success\") {\n              defer.resolve(data);\n              self.closeDialogBox();\n            } else if ([\"validationMessages\", \"alertMessages\"].includes(result.type)) {\n              // Add validation messages\n              if (result.type === \"validationMessages\") {\n                self.form.addValidationMessage(result.messages);\n              } else {\n                bizagi.modalError.show(result.messages, 'workportal-general-word-information', false);\n              }\n\n              // Update original value to use as reference to other futures changes in the dialogBox\n              $.each(data, function (key, value) {\n                var renders = self.form.getRenders(key);\n                $.each(renders, function (i, render) {\n                  render.updateOriginalValue();\n                });\n              });\n            } else if (result.type === \"error\") {\n              // Add error messages \n              self.form.addErrorMessage(result.message);\n            }\n          }).fail(function () {\n            $(event.currentTarget).prop(\"disabled\", false);\n            $(event.currentTarget).button(\"enable\"); //Setting styles\n          });\n        } else {\n          defer.resolve();\n          self.closeDialogBox();\n        }\n      }\n    };\n\n    if (showSaveButton) {\n      buttons[saveButtonLabel] = function (event) {\n        if (self.form) {\n          // load tabs\n          var form = self.form,\n          asyncTabsDef = $.Deferred(),\n          getAllTabs = form.getRenderByType(\"tabItem\"),\n          getAllTabsLength = getAllTabs.length;\n\n          form.innerTabsLoading = true;\n\n          $(event.currentTarget).prop(\"disabled\", true);\n          form.useOrSetLoaderDeferred();\n\n          // Check\n          for (var i = 0; i < getAllTabsLength; i++) {\n            var render = getAllTabs[i];\n            // Resolve internal deferred\n            if (render.loadingDeferred && render.parent.container) {\n              render.loadingDeferred.resolve();\n            }\n          }\n\n          delete form.innerTabsLoading;\n          // Resolve task deferred\n          asyncTabsDef.resolve({ event: event });\n\n          $.when(asyncTabsDef.promise(), form.getLoaderPromise()).done(function (response) {\n            var event = response.event;\n\n            $(event.currentTarget).prop(\"disabled\", false);\n            form.deleteLoaderDeferred();\n\n            performActions(event);\n          }).fail(function () {\n            $(event.currentTarget).prop(\"disabled\", false);\n            form.deleteLoaderDeferred();\n\n            performActions(event);\n          });\n        }\n      };\n    }\n    if (showCancelButton) {\n      buttons[cancelButtonLabel] = function () {\n        dialogParams.onCancel && dialogParams.onCancel();\n        defer.reject();\n        self.closeDialogBox();\n      };\n    }\n\n    //Attach the desired extra buttons \n    self.buttons = $.extend(buttons, self.buttons);\n\n    //Orientation RTL - OrderBut\n    if (self.dialogParams.orientation == \"rtl\") {\n      var objButtons;\n      var nameButon;\n      for (var prop in buttons) {\n        objButtons = buttons[prop];\n        nameButon = prop;\n        break;\n      }\n\n      delete buttons[nameButon];\n      buttons[nameButon] = objButtons;\n\n    }\n\n    // Creates a dialog\n    dialogBox.dialog({\n      width: this.Class.POPUP_WIDTH,\n      height: this.Class.POPUP_HEIGHT,\n      title: dialogParams.title,\n      modal: true,\n      buttons: self.buttons,\n      resizable: false, // This one is to avoid a memory leak, DO NOT CHANGE PLEASE\n      maximized: maximized,\n      open: function open(event, ui) {\n        if (maximized && typeof isWebpart == \"undefined\") {\n          // remove scroll bar\n          $(\"body\", window.document).css(\"position\", \"fixed\");\n        }\n        if (bizagi.util.isSharepointContext() || bizagi.util.isWebpartContext()) {\n          $(document).trigger(\"hide-webpart-scroll\");\n        }\n      },\n      close: function close() {\n        // set scroll bar\n        $(\"body\", window.document).css(\"position\", \"static\");\n        dialogParams.onCancel && dialogParams.onCancel();\n        defer.reject();\n        self.closeDialogBox();\n      },\n      resizeStop: function resizeStop(event, ui) {\n        if (self.form) {\n          self.form.resize(ui.size);\n        }\n      },\n      maximize: function maximize(e) {\n        if (self.form) {\n          self.form.triggerHandler(\"maximazedForm\");\n          self.dialogBox.trigger(\"resize\");\n        }\n      },\n      unmaximize: function unmaximize(e) {\n        if (self.form) {\n          self.form.triggerHandler(\"unmaximazedForm\");\n          self.dialogBox.trigger(\"resize\");\n        }\n      } });\n\n\n    self.adjustOverlay();\n\n    // Return promise\n    return defer.promise();\n  },\n  _appresize: function _appresize(args) {\n    var self = this;\n    $(self.dialogBox).dialog('widget').css({\n      left: window.screen.width / 2 - self.Class.POPUP_WIDTH / 2 + \"px\",\n      top: window.screen.height / 2 - self.Class.POPUP_HEIGHT / 2 + \"px\",\n      width: self.Class.POPUP_WIDTH + \"px\",\n      height: self.Class.POPUP_HEIGHT + \"px\" }).\n    show();\n\n  },\n  /*\r\n     *   Closes the dialog box\r\n     */\n  closeDialogBox: function closeDialogBox() {\n    var self = this;\n    var dialogBox = self.dialogBox;\n\n    // set scroll bar\n    $(\"body\", window.document).css(\"position\", \"static\");\n    if (bizagi.util.isSharepointContext() || bizagi.util.isWebpartContext()) {\n      $(document).trigger(\"show-webpart-scroll\");\n    }\n    dialogBox.dialog('destroy');\n    dialogBox.remove();\n    // Send the form to the hell, please dont remove this line, make a several bugs!!\n    self.dispose();\n  },\n  /**\r\n      * Sets the focus to the first control\r\n      */\n  focusFirstControl: function focusFirstControl(form, time) {\n    var self = this;\n    // Configures effect\n    var effect = function effect() {\n      var $allControls = $(\"input:visible, select:visible, option:visible, textarea:visible\", form.container);\n      var defaultControl = $allControls.not(\".bz-input-icon--date .bz-input-icon__input, .ui-bizagi-render-search\");\n      if (defaultControl.length > 0) {\n        // fix for retype double\n        var controlHtml = $(defaultControl[0]).closest(\".ui-bizagi-render\");\n        var xpath = controlHtml.length > 0 ? controlHtml.data(\"render-xpath\") : \"\";\n        var control = xpath ? form.getRender(xpath) : \"\";\n        if (control) {\n          if (control.properties && control.properties.retype && control.properties.retype === \"double\") {\n            return;\n          }\n        }\n        // Focus control\n        var innerControl = defaultControl[0];\n        if (self.isValidControlForFocus(innerControl, form)) {\n          try {\n            innerControl.focus();\n            $(innerControl).triggerHandler(\"focusInput\");\n          } catch (e) {\n          }\n        }\n      } else {\n        var innerControl = $(\".ui-bizagi-render\", form.container)[0];\n        if (innerControl) {\n          $(innerControl).attr(\"tabindex\", 0);\n\n          innerControl.focus();\n\n          $(innerControl).removeAttr(\"tabindex\");\n        }\n      }\n    };\n\n    // Run effect\n    if (time > 0) {\n      var timeoutEffect = setTimeout(function () {\n        effect();\n        clearTimeout(timeoutEffect);\n      }, time);\n    } else {\n      effect();\n    }\n  },\n\n  isValidControlForFocus: function isValidControlForFocus(control, form) {\n    var result = true;\n    var container = $(control).closest('[data-render-id]');\n    var id = container.data('render-id');\n    var isOnGrid = id && container.length ? container.data('bizagi-component') == 'cellContent' : false;\n\n    if (id && isOnGrid) {\n      var grid = form.getGridByColumn(id);\n      var type = grid ? grid.getColumnType(id) : null;\n      if (type && type == 'columnCombo') {\n        result = false;\n      }\n    }\n\n    return result;\n  },\n\n  /*\r\n     * Renders the dialog box content\r\n     */\n  renderDialogBox: function renderDialogBox(dialogBox, params) {\n    var self = this;\n    var def = new $.Deferred();\n\n    // Clear dialog box\n    dialogBox.empty();\n\n    // Check context\n    try {\n      if (self.form && self.form.params.data.contextType) {\n        params.contextType = self.form.params.data.contextType;\n      }\n    } catch (e) {}\n    if (params.rewriteContextType === true) {\n\n    } //self.properties.contextType\n\n    // Load template and data\n    return $.when(self.dataService.getFormData(params)).pipe(function (data) {\n      // Apply recordXpath\n      if (params.recordXPath) {\n        data.form.properties.recordXpath = params.recordXPath;\n      }\n\n      // Apply contextType\n      data.form.contextType = params.contextType;\n      if (params.rewriteContextType) {\n        data.form.contextType = undefined;\n      }\n\n      // Apply editable param\n      if (params.editable === false) {\n        data.form.properties.editable = false;\n\n        // The actions don't apply in dialog form\n        self.removeActions(data.form);\n      }\n\n      // Apply required param\n      if (params.required === false) {\n        data.form.properties.required = false;\n      }\n\n      // The transitions don't apply in dialog form\n      self.removeTransitions(data.form);\n\n      // Render dialog template\n      self.form = self.renderFactory.getContainer({\n        type: \"form\",\n        data: data.form,\n        canvas: self.dialogBox,\n        focus: params.focus || false,\n        selectedTabs: params.selectedTabs,\n        isRefresh: params.isRefresh || false,\n        requestedForm: params.requestedForm,\n        fromRender: params.fromRender });\n\n\n      def.resolve(self.form);\n\n      // Return rendering promise\n      return self.form.render();\n    }, function (message) {\n      /*** FAIL FILTER **/\n      var errorTemplate = self.renderFactory.getCommonTemplate(\"form-error\");\n      if (_typeof(message) == \"object\" && message.responseText) {\n        var objMessage = JSON.parse(message.responseText);\n        message = \"Error:\" + objMessage.errorType + \"<br>\" + objMessage.message || \" Error in form \";\n      }\n\n      // Clear dialog box\n      $(\"*\", dialogBox).remove();\n\n      $.tmpl(errorTemplate, {\n        message: message }).\n      appendTo(dialogBox);\n    }).done(function (element) {\n      // Remove button container\n      $(\".ui-bizagi-button-container\", element).remove();\n\n      // Append form  in the dialog\n      $('.ui-bizagi-loading-message', dialogBox).remove();\n      dialogBox.data(\"loading\", false);\n      dialogBox.removeClass(\"ui-bizagi-component-loading\");\n      dialogBox.html(element);\n\n      // Customize dialog box\n      dialogBox = self.customizeDialogBox(dialogBox);\n\n      // Publish an event to check if the form has been set in the DOM\n      self.form.triggerHandler(\"ondomincluded\", self.form);\n\n      if (bizagi.override.adjustButtonPositionDialogForm)\n      self.adjustButtonPosition(dialogBox);\n\n      // Scroll to element if has scroll top set\n      if (params.scrollTop) {\n        // Restore scroll at same position\n        self.form.container.parent().scrollTop(params.scrollTop);\n      } else {\n        // Focus into first control\n        self.focusFirstControl(self.form, 150);\n      }\n\n      // Attach a refresh handler to recreate all the form\n      self.form.bind(\"refresh\", function (_, refreshParams) {\n        // Check current scroll in parent\n        refreshParams.scrollTop = self.form.container.parent().scrollTop();\n        refreshParams = $.extend({\n          focus: focus,\n          selectedTabs: self.form.getSelectedTabs(),\n          isRefresh: true,\n          mainForm: params.mainForm },\n        refreshParams);\n\n        return self.renderDialogBox(dialogBox, refreshParams);\n      });\n    });\n\n    return def.promise();\n  },\n\n  adjustButtonPosition: function adjustButtonPosition(dialogBox) {\n    var childrenContainer = dialogBox.find(\".ui-bizagi-container:first\")[0];\n    var titleHeight = 29;\n    var buttonHeight = 58;\n    var availableHeight = dialogBox.parent().height() - titleHeight - buttonHeight;\n\n    new ResizeSensor(childrenContainer, function () {\n      availableHeight = dialogBox.parent().height() - titleHeight - buttonHeight;\n      fitSizes();\n    });\n\n    var fitSizes = function fitSizes() {\n      if (childrenContainer.clientHeight > availableHeight) {\n        dialogBox.height(availableHeight - 20);\n        $(\".ui-dialog-buttonpane\", dialogBox.parent()).css(\"top\", titleHeight + availableHeight);\n      } else {\n        dialogBox.height(childrenContainer.clientHeight + 20);\n        $(\".ui-dialog-buttonpane\", dialogBox.parent()).css(\"top\", titleHeight + dialogBox.height());\n      }\n    };\n\n    fitSizes();\n  },\n\n  /*\r\n     *   This method can be overriden in order to customize the dialog form rendering\r\n     */\n  customizeDialogBox: function customizeDialogBox(dialogBox) {\n    return dialogBox;\n  },\n\n  /*\r\n     * This method removes the transitions\r\n     */\n  removeTransitions: function removeTransitions(data) {\n    data = data || {};\n\n    if (data.transitions) {\n      delete data.transitions;\n    }\n  },\n\n  /*\r\n     * This method removes the actions\r\n     */\n  removeActions: function removeActions(data) {\n    data = data || {};\n\n    if (data.actions) {\n      delete data.actions;\n    }\n  },\n\n  dispose: function dispose() {\n    var self = this;\n    if (self.form) self.form.dispose();\n    bizagi.util.dispose(self.buttons);\n    bizagi.util.dispose(self);\n  },\n\n  adjustOverlay: function adjustOverlay() {\n    var overlay = $(\".ui-widget-overlay.ui-front\");\n    var body = $(\"body\");\n    var canvas = $(\"#render-canvas\");\n    var overlayHeight = parseInt(overlay.height());\n    var overlayBody = parseInt(body.height());\n    var overlayCanvas = parseInt(canvas.height());\n\n    if (overlayHeight < overlayBody) {\n      overlay.height(overlayBody);\n      overlayHeight = overlayBody;\n    }\n    if (overlayHeight < overlayCanvas) {\n      overlay.height(overlayCanvas);\n    }\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /**\r\n                                                                                                                                                                                                                                                                                                                                                                                * Show a startform within a dialog box\r\n                                                                                                                                                                                                                                                                                                                                                                                * Based on dialog.form developed by Diego Parra\r\n                                                                                                                                                                                                                                                                                                                                                                                *\r\n                                                                                                                                                                                                                                                                                                                                                                                * @author Edward Morales\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\n$.Class.extend(\"bizagi.rendering.dialog.startForm\", {\n  POPUP_WIDTH: 900,\n  POPUP_HEIGHT: 650 },\n{\n\n  /**\r\n   * Constructor\r\n   * @param dataService\r\n   * @param renderFactory\r\n   * @param dialogParams\r\n   */\n  init: function init(dataService, renderFactory, dialogParams) {\n    var self = this;\n    var doc = window.document;\n\n    // Object whit reference and actions of buttons\n    self.buttons = {};\n\n    for (var item in dialogParams.extraButtons) {\n      self.buttons[bizagi.localization.getResource(item)] = dialogParams.extraButtons[item];\n    }\n\n    // Define instance variables\n    this.dataService = dataService;\n    this.renderFactory = renderFactory;\n    this.dialogDeferred = new $.Deferred();\n    dialogParams = self.dialogParams = dialogParams || {};\n\n    // Draw dialog box\n    self.dialogBox = $(\"<div class='ui-bizagi-component-loading'/>\");\n    self.dialogBox.empty();\n    self.dialogBox.appendTo(\"body\", doc);\n\n    // Create dialog box\n    self.showDialogBox(self.dialogBox, dialogParams).\n    done(function (data) {\n      self.dialogDeferred.resolve(data);\n    }).\n    fail(function () {\n      self.dialogDeferred.reject();\n    });\n  },\n\n  /*\r\n      *   Render the form\r\n      *   The params are the same that will be send to the ajax service\r\n      *   Returns a deferred\r\n      */\n  render: function render(params) {\n    var self = this;\n\n    // Fill dialog box\n    self.renderDialogBox(self.dialogBox, params);\n\n    // Return promise\n    return self.dialogDeferred.promise();\n  },\n  /*\r\n      *   Shows the dialog box in the browser\r\n      *   Returns a promise that the dialog will be closed\r\n      */\n  showDialogBox: function showDialogBox(dialogBox, dialogParams) {\n    var self = this;\n\n    // Define buttons\n    var buttons = {};\n    var defer = new $.Deferred();\n\n    // Define options\n    var showSaveButton = bizagi.util.parseBoolean(dialogParams.showSaveButton) !== null ? bizagi.util.parseBoolean(dialogParams.showSaveButton) : true;\n    var showCancelButton = bizagi.util.parseBoolean(dialogParams.showCancelButton) !== null ? bizagi.util.parseBoolean(dialogParams.showCancelButton) : true;\n    var saveButtonLabel = dialogParams.saveButtonLabel ? dialogParams.saveButtonLabel : bizagi.localization.getResource(\"render-form-dialog-box-save\");\n    var cancelButtonLabel = dialogParams.cancelButtonLabel ? dialogParams.cancelButtonLabel : bizagi.localization.getResource(\"render-form-dialog-box-cancel\");\n    var maximized = bizagi.util.parseBoolean(dialogParams.maximized) !== null ? bizagi.util.parseBoolean(dialogParams.maximized) : false;\n\n    if (showSaveButton) {\n      buttons[saveButtonLabel] = function () {\n        if (self.form) {\n          // Perform validations\n          if (self.form.validateForm()) {\n\n            // Collect data\n            var data = {};\n\n            if (dialogParams.forceCollectData) {\n              // Turn on flag to force to collect all data on the form\n              $.forceCollectData = true;\n              self.form.collectRenderValues(data);\n              // Turn off flag\n              $.forceCollectData = false;\n            } else {\n              self.form.collectRenderValues(data);\n            }\n\n            if (dialogParams.allowGetOriginalFormValues) {\n\n              data.formValues = self.form.children;\n            }\n\n            // Add page cache for this form\n            data.idPageCache = self.form.getPageCache();\n\n            // Call user callback\n            if (dialogParams.onSave) {\n              $.when(dialogParams.onSave(data)).\n              done(function (result) {\n                if (result == null || result == true || result.type == \"success\") {\n                  defer.resolve();\n                  self.closeDialogBox();\n                } else if ([\"validationMessages\", \"alertMessages\"].includes(result.type)) {\n                  // Add validation messages\n                  if (result.type === \"validationMessages\") {\n                    self.form.addValidationMessage(result.messages);\n                  } else {\n                    bizagi.modalError.show(result.messages, 'workportal-general-word-information', false);\n                  }\n\n                  // Update original value to use as reference to other futures changes in the dialogBox\n                  $.each(data, function (key) {\n                    var renders = self.form.getRenders(key);\n                    $.each(renders, function (i, render) {\n                      render.updateOriginalValue();\n                    });\n                  });\n                } else if (result.type === \"error\") {\n                  // Add error messages\n                  self.form.addErrorMessage(result.message);\n                }\n              });\n\n            } else {\n              defer.resolve();\n              self.closeDialogBox();\n            }\n          }\n        }\n      };\n    }\n    if (showCancelButton) {\n      buttons[cancelButtonLabel] = function () {\n        dialogParams.onCancel && dialogParams.onCancel();\n        self.closeDialogBox();\n      };\n    }\n\n    //Attach the desired extra buttons\n    self.buttons = $.extend(buttons, self.buttons);\n\n    // Creates a dialog\n    dialogBox.dialog({\n      width: this.Class.POPUP_WIDTH,\n      height: this.Class.POPUP_HEIGHT,\n      title: dialogParams.title,\n      modal: true,\n      buttons: self.buttons,\n      resizable: false, // This one is to avoid a memory leak, DO NOT CHANGE PLEASE\n      maximized: maximized,\n      open: function open() {\n        if (maximized) {\n          // remove scroll bar\n          $(\"body\", window.document).css(\"position\", \"fixed\");\n        }\n      },\n      close: function close() {\n        // set scroll bar\n        $(\"body\", window.document).css(\"position\", \"static\");\n\n        defer.reject();\n        self.closeDialogBox();\n      },\n      resizeStop: function resizeStop(event, ui) {\n        if (self.form) {\n          self.form.resize(ui.size);\n        }\n      },\n      maximize: function maximize(e) {\n        if (self.form) {\n          self.form.triggerHandler(\"maximazedForm\");\n        }\n      },\n      unmaximize: function unmaximize(e) {\n        if (self.form) {\n          self.form.triggerHandler(\"unmaximazedForm\");\n        }\n      } });\n\n\n    self.adjustOverlay();\n\n    // Return promise\n    return defer.promise();\n  },\n  _appresize: function _appresize() {\n    var self = this;\n    $(self.dialogBox).dialog('widget').css({\n      left: window.screen.width / 2 - self.Class.POPUP_WIDTH / 2 + \"px\",\n      top: window.screen.height / 2 - self.Class.POPUP_HEIGHT / 2 + \"px\",\n      width: self.Class.POPUP_WIDTH + \"px\",\n      height: self.Class.POPUP_HEIGHT + \"px\" }).\n    show();\n\n  },\n  /*\r\n      *   Closes the dialog box\r\n      */\n  closeDialogBox: function closeDialogBox() {\n    var self = this;\n    var dialogBox = self.dialogBox;\n    // set scroll bar\n    $(\"body\", window.document).css(\"position\", \"static\");\n    dialogBox.dialog('destroy');\n    dialogBox.remove();\n    self.dispose();\n  },\n\n  /*\r\n      * Renders the dialog box content\r\n      */\n  renderDialogBox: function renderDialogBox(dialogBox, params) {\n    var self = this;\n    var def = new $.Deferred();\n\n    // Clear dialog box\n    dialogBox.empty();\n\n    // Check context\n    try {\n      if (self.form && self.form.params.data.contextType) {\n        params.contextType = self.form.params.data.contextType;\n      }\n    } catch (e) {\n    }\n\n    // Load template and data\n    return $.when(self.dataService.getStartForm(params)).pipe(function (data) {\n\n      // Apply contextType\n      data.form.contextType = params.contextType;\n\n      // Apply editable param\n      if (params.editable == false) {\n        data.form.properties.editable = false;\n\n        // The actions don't apply in dialog form\n        self.removeActions(data.form);\n      }\n\n      // The transitions don't apply in dialog form\n      self.removeTransitions(data.form);\n\n      // Render dialog template\n      self.form = self.renderFactory.getContainer({\n        type: \"form\",\n        data: data.form,\n        focus: params.focus || false,\n        selectedTabs: params.selectedTabs,\n        isRefresh: params.isRefresh || false });\n\n\n      def.resolve(self.form);\n\n      // Return rendering promise\n      return self.form.render();\n    }, function (message) {\n      /*** FAIL FILTER **/\n      var errorTemplate = self.renderFactory.getCommonTemplate(\"form-error\");\n      if (_typeof(message) == \"object\" && message.responseText) {\n        var objMessage = JSON.parse(message.responseText);\n        message = \"Error:\" + objMessage.errorType + \"<br>\" + objMessage.message || \" Error in form \";\n      }\n\n      // Clear dialog box\n      $(\"*\", dialogBox).remove();\n\n      $.tmpl(errorTemplate, {\n        message: message }).\n      appendTo(dialogBox);\n    }).done(function (element) {\n      // Remove button container\n      $(\".ui-bizagi-button-container\", element).remove();\n\n      // Append form  in the dialog\n      $('.ui-bizagi-loading-message', dialogBox).remove();\n      dialogBox.data(\"loading\", false);\n      dialogBox.removeClass(\"ui-bizagi-component-loading\");\n      dialogBox.html(element);\n\n      // Customize dialog box\n      dialogBox = self.customizeDialogBox(dialogBox);\n\n      // Publish an event to check if the form has been set in the DOM\n      self.form.triggerHandler(\"ondomincluded\");\n\n      var timeoutRecalculate = setTimeout(function () {\n        if (self.dialogParams.maximized) {\n          var instance = self.dialogBox.data(\"ui-dialog\");\n          instance.recalculate && instance.recalculate();\n        }\n        clearTimeout(timeoutRecalculate);\n      }, 650);\n\n\n      // Attach a refresh handler to recreate all the form\n      self.form.bind(\"refresh\", function (_, refreshParams) {\n        // Check current scroll in parent\n        refreshParams = $.extend({\n          focus: focus,\n          selectedTabs: self.form.getSelectedTabs(),\n          isRefresh: true },\n        params, refreshParams);\n\n        return self.renderDialogBox(dialogBox, refreshParams);\n      });\n    });\n\n    return def.promise();\n  },\n  /*\r\n      *   This method can be overriden in order to customize the dialog form rendering\r\n      */\n  customizeDialogBox: function customizeDialogBox(dialogBox) {\n    return dialogBox;\n  },\n\n  /*\r\n      * This method removes the transitions\r\n      */\n  removeTransitions: function removeTransitions(data) {\n    data = data || {};\n\n    if (data.transitions) {\n      delete data.transitions;\n    }\n  },\n\n  /*\r\n      * This method removes the actions\r\n      */\n  removeActions: function removeActions(data) {\n    data = data || {};\n\n    if (data.actions) {\n      delete data.actions;\n    }\n  },\n\n  dispose: function dispose() {\n    var self = this;\n    if (self.form) {\n      self.form.dispose();\n    }\n    bizagi.util.dispose(self.buttons);\n    bizagi.util.dispose(self);\n  },\n\n  adjustOverlay: function adjustOverlay() {\n    var overlay = $(\".ui-widget-overlay\");\n    var body = $(\"body\");\n    var overlayHeight = parseInt(overlay.height()),overlayBody = parseInt(body.height());\n\n    if (overlayHeight < overlayBody) {\n      overlay.height(overlayBody);\n    }\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /**\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: Bizagi Desktop Render Combo Extension\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: UI Forms Team\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This script will redefine the combo render class to adjust to desktop devices\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\n// Extends from render Desktop base\nbizagi.rendering.desktop.render.extend(\"bizagi.rendering.desktop.combo\", bizagi.rendering.combo.prototype);\n// Extends itself\nbizagi.rendering.desktop.combo.extend(\"bizagi.rendering.desktop.combo\", {}, {\n\n  /*\r\n                                                                              *   Update or init the element data\r\n                                                                              */\n  initializeData: function initializeData(data) {\n    // Call base\n    this._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n\n    // ON desktop implementation we will load the async combos on demand\n    properties.loadOnDemand = true;\n  },\n\n  /*\r\n     *   Template method to implement in each device to customize each render after processed\r\n     */\n  postRender: function postRender() {\n    this.inputCombo = $(\".ui-selectmenu-value\", this.getControl());\n    this.selectedValue = this.properties.value;\n\n    // Call base\n    this._super();\n  },\n\n  /*\r\n     *   Template method to implement in each device to customize the render's behaviour to add handlers\r\n     */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n\n    self.inputCombo.focus(function () {\n      $(this).select();\n    });\n\n    self.inputCombo.blur(function () {\n      // Avoid to see the item selected when using the navigation keys\n      self.setDisplayValue(self.getValue());\n\n      if (!self.isExtraItem()) {\n        self.setDisplayValue(self.value);\n      }\n    });\n\n    //Triggered only when the form exists inside a dialog and is performed the maximize action\n    self.getFormContainer().bind(\"maximazedForm unmaximazedForm\", function (e) {\n      if (self.isPreferencesDialog(self.inputCombo)) {\n        self.onResizeCloseDialog();\n      } else {\n        self.resizeCombo();\n      }\n    });\n\n    self.inputCombo.click(function () {\n      var idDropdown = \"dd-\" + self.inputCombo.attr(\"id\");\n\n      if ($(\"#\" + idDropdown, self.getControl().parent()).length === 0) {\n        self.comboDropDown();\n      } else {\n        // Close combo if clicked twice\n        self.dropDownDestroy($(\"#\" + idDropdown));\n      }\n      self.inputCombo.focus();\n    });\n\n    // Bind clicks to fake UI in order to simulate select clicks\n    if ($(\".ui-selectmenu-btn\", self.control).length > 1 && typeof window.addEventListener != \"undefined\") {\n      $(\".ui-selectmenu-btn\", self.control)[0].addEventListener(\"click\", function () {\n        self.inputCombo[0].click();\n      });\n    } else {\n      $(\".ui-selectmenu-btn\", self.control).bind(\"click.combo\", function () {\n        self.inputCombo.trigger(\"click\");\n      });\n    }\n\n    self.inputCombo.keyup(function (e) {\n      self.keyUpFunction(e);\n    });\n\n    self.inputCombo.keydown(function (e) {\n      self.keyDownFunction(e);\n    });\n\n    // Call base\n    self._super();\n  },\n  /*\r\n     *   Makes the combo drops down, also fetch the data first if the combo is set to load on demand\r\n     */\n  comboDropDown: function comboDropDown() {\n    var self = this;\n\n    self.showLoadingData();\n\n    $.when(self.getData()).done(function (data) {\n      self.hideLoadingData();\n\n      try {\n        self.internalComboDropDown(data);\n      } catch (e) {\n        bizagi.log(e.message);\n      }\n    });\n  },\n\n  /*\r\n     *   Show loading message\r\n     */\n  showLoadingData: function showLoadingData() {\n    var self = this;\n    var body = $(\"body\", document);\n    var loading = self.loading = $(\"<div class='ui-select-dropdown open loading'><ul><li class='ui-bizagi-render-loading ui-bizagi-loading'></li></ul></div>\");\n\n    // Add width\n    loading.css(\"width\", self.inputCombo.outerWidth() + \"px\");\n    $(\"li\", loading).css({ padding: 0, margin: 0 });\n    loading.css(\"overflow\", \"hidden\");\n    loading.appendTo(body);\n    loading.position({\n      my: \"left top\",\n      at: \"left bottom\",\n      of: self.inputCombo,\n      collision: \"none flip\" });\n\n  },\n  /*\r\n     *   Remove loading message\r\n     */\n  hideLoadingData: function hideLoadingData() {\n    this.loading.remove();\n  },\n  /*\r\n     *   Draws the mini-popup\r\n     */\n  internalComboDropDown: function internalComboDropDown(data) {\n    var self = this;\n    var selectTmp = {};\n    var objSelected = {};\n\n    // Remove the old list\n    $(\".ui-select-dropdown.open\").remove();\n\n    /** temp templates **/\n    var tempCombo = \"<ul role='listbox' id='listbox-${id}' aria-labelledby='label-${id}' aria-expanded='true'>\" +\n    \"   {{each datasource}}{{if typeof hidden == 'undefined'}}\" +\n    \"       <li id='opt-${id}' data-value='${id}' role='option' tabindex='0' aria-selected='false'>${value}</li>{{/if}}\" +\n    \"   {{/each}}\" +\n    \"</ul>\";\n\n    var containerDropdown = $(\"<div class='ui-select-dropdown open bz-combo__list--comfortable' role='popup'></div>\");\n\n    /* control reference */\n    var containerControl = self.inputCombo.parents(\".ui-bizagi-control\").last();\n    var containerRender = containerControl.closest(\".ui-bizagi-render\");\n\n    var idDropdown = \"dd-\" + self.inputCombo.attr(\"id\");\n    var selectedValue = self.findDataByValue(self.inputCombo.val());\n    var scrollPosition = 0;\n    var orientation = self.properties.orientation === \"rtl\" ? \"ui-bizagi-rtl\" : \"\";\n\n    //fix for QA-507 only IE\n    if (navigator.userAgent.indexOf(\"MSIE\") !== -1 || navigator.appVersion.indexOf(\"Trident/\") > 0) {\n      var contFormScroll = containerRender.closest(\".ui-dialog-content\");\n      if (contFormScroll.length > 0) {\n        contFormScroll.css(\"overflow-y\", \"hidden\");\n      }\n    }\n\n    data = data || self.properties.data;\n\n    self.properties.data = data;\n\n    self.repositionInterval;\n\n    containerRender.addClass(\"ac-is-visible\");\n    containerControl.addClass(\"ac-is-visible ac-clear-floats\");\n    containerDropdown.attr(\"id\", idDropdown);\n\n    self.inputCombo.attr(\"aria-expanded\", \"true\");\n\n    for (var i = 0; i < data.length; i++) {\n      if (data[i].value !== null && typeof data[i].value == \"boolean\") {\n        if (bizagi.util.parseBoolean(data[i].value) === true) {\n          data[i].value = this.getResource(\"render-boolean-yes\");\n        } else if (bizagi.util.parseBoolean(data[i].value) === false) {\n          data[i].value = this.getResource(\"render-boolean-no\");\n        }\n      }\n    }\n\n    if (data.length > 1000) {\n      selectTmp = self.getResource(\"render-combo-too-many-elements\");\n    } else {\n      selectTmp = $.tmpl(tempCombo, {\n        id: self.properties.id,\n        datasource: data });\n\n    }\n\n    var dropDwn = containerDropdown.append(selectTmp);\n    containerControl.append(dropDwn);\n\n    var objParent = $(\".ui-selectmenu\", self.control);\n    $(dropDwn).find(\"li:last-child\").css(\"padding-bottom\", \"13px\");\n\n    var widthChild = dropDwn.width();\n    var widthControl = objParent.width();\n\n    dropDwn.width(widthControl < widthChild ? widthChild : widthControl);\n\n    // Apply to combo in the modal\n    if (self.isPreferencesDialog(containerRender)) {\n      var containerDialog = containerRender.closest(\".ui-dialog-content\");\n      var scrollParent = $.scrollerParent(dropDwn[0]);\n      var $comboDialog = $(containerDialog);\n\n      var top = dropDwn.offset().top - $comboDialog.offset().top;\n      var left = dropDwn.offset().left - $comboDialog.offset().left;\n\n      // Container\n      var $comboWrapper = $(\"<div/>\", {\n        css: {\n          \"position\": \"absolute\",\n          \"top\": top,\n          \"left\": left } });\n\n\n\n      $comboWrapper.attr(\"id\", \"wrapper-\" + idDropdown);\n      $comboWrapper.appendTo($comboDialog);\n      $(dropDwn).appendTo($comboWrapper);\n\n      // When is scrolled the content of the dialog then close the drop-down list\n      $(scrollParent).off(\"scroll.combo\").on(\"scroll.combo\", function (evt) {\n        var tg = $(evt.target);\n        self.dropDownValidClose(tg, dropDwn);\n\n        $(scrollParent).unbind(\"scroll.combo\");\n      });\n    }\n\n    dropDwn.position({\n      my: \"left top\",\n      at: \"left bottom\",\n      of: $(\".ui-selectmenu\", self.control),\n      collision: \"fit\" }).\n    hide();\n\n    dropDwn.show();\n\n    // Fix for QA-507 only IE\n    if ((navigator.userAgent.indexOf(\"MSIE\") !== -1 || navigator.appVersion.indexOf(\"Trident/\") > 0) && contFormScroll.length > 0) {\n      contFormScroll.css(\"overflow-y\", \"auto\");\n    }\n\n    //SUITE 9379 - ComboBox offset in resizing when the combobox is opened\n    self.recalculateComboOffset(dropDwn, objParent);\n\n    dropDwn.data(\"formWidth\", containerControl.width());\n    dropDwn.data(\"parentCombo\", self.control);\n\n    dropDwn.addClass(orientation);\n\n    if (selectedValue !== -1 && $(\"li\", dropDwn).length > 0) {\n      //Checks if the selected element is empty string, it's normal for cascading combos\n      if (selectedValue && selectedValue.id === \"\") {\n        objSelected = $(\"li[data-value='']\", dropDwn);\n      } else {\n        objSelected = $(\"li[data-value='\" + selectedValue.id + \"']\", dropDwn);\n      }\n\n      if (objSelected.length !== 0) {\n        objSelected.addClass(\"ui-selected\");\n        objSelected.addClass(\"active\");\n\n        objSelected.attr(\"aria-selected\", \"true\");\n        self.inputCombo.attr(\"aria-activedescendant\", \"opt-\" + selectedValue.id);\n\n        scrollPosition = parseInt(objSelected.position().top);\n        dropDwn.scrollTop(scrollPosition);\n      }\n    }\n\n    dropDwn.delegate(\"li\", \"click\", function () {\n      var valId = $(this).data(\"value\") ? $(this).data(\"value\") : \"\";\n      var val = { id: valId, value: $(this).text() };\n\n      //Prevents stores the value twice when the element seached match with the clicked\n      //It helps to keep track the last selected\n      var id = self.getValue();\n      id = id && id.id ? id.id : 0;\n\n      if (val.id !== id) {\n        self.onComboItemSelected(val);\n      } else {\n        if (val.value !== self.inputCombo.val()) {\n          self.setDisplayValue({ value: val.value });\n        }\n      }\n\n      //'select' will stand at first character of the string, 'focus' will stand at the last character of the string\n      self.inputCombo.select();\n\n      // Animation effect\n      dropDwn.hide();\n      self.dropDownDestroy(dropDwn);\n\n      $(document).unbind(\"click.closecombo\");\n    });\n\n    // Stop bubbling outside the dropdown\n    $.makeArray(dropDwn, self.getControl()).bind(\"click\", function (e) {\n      e.preventDefault();\n      return false;\n    });\n\n    $(document).one(\"click.closecombo\", function (e) {\n      var tg = $(e.target);\n      self.dropDownValidClose(tg, dropDwn);\n    });\n  },\n\n  /*\r\n      * validate when fire event form document and window\r\n      */\n  dropDownValidClose: function dropDownValidClose(target, dropDown) {\n    dropDown.hide();\n    this.dropDownDestroy(dropDown);\n    $(document).unbind(\"click.closecombo\");\n  },\n  /*\r\n      * set a new dropdown position\r\n      */\n  dropDownReposition: function dropDownReposition(dropDown, containerForm) {\n    var self = this;\n    if (containerForm.width() != dropDown.data(\"formWidth\")) {\n      var objParent = $(\".ui-selectmenu\", self.control);\n      dropDown.width(self.control.width() < 100 ? 100 : objParent.width());\n\n      var control = dropDown.data(\"parentCombo\") || objParent;\n      dropDown.position({\n        my: \"left top\",\n        at: \"left bottom\",\n        of: $(\".ui-selectmenu-value\", control),\n        collision: \"none\" });\n\n\n      dropDown.data(\"formWidth\", containerForm.width());\n    }\n  },\n  /*\r\n      * destroy dropdown\r\n      */\n  dropDownDestroy: function dropDownDestroy(dropDown) {\n    var self = this;\n    var control = self.inputCombo ? self.inputCombo : $(\".ui-selectmenu-value\", self.getControl());\n    var containerControl = control.closest(\".ui-bizagi-control\");\n    var containerRender = containerControl.closest(\".ui-bizagi-render\");\n    var idDropdown = \"\" + dropDown.attr(\"id\");\n    self.inputCombo.attr(\"aria-expanded\", \"false\");\n\n    // fix for SUITE-9507\n    if (containerControl.hasClass(\"ac-is-visible\")) containerControl.removeClass(\"ac-is-visible\");\n    if (containerControl.hasClass(\"ac-clear-floats\")) containerControl.removeClass(\"ac-clear-floats\");\n    if (containerRender.hasClass(\"ac-is-visible\")) containerRender.removeClass(\"ac-is-visible\");\n\n    dropDown.remove();\n\n    var dropDownContainer = $(\"#wrapper-\" + idDropdown);\n    if (dropDownContainer && dropDownContainer.length > 0)\n    dropDownContainer.remove();\n\n    $(document).unbind(\"mousedown.closecombo\");\n    $(document).unbind(\"mouseup.resizecombo\");\n    $(window).unbind(\"resize.resizecombo\");\n    $(window).unbind(\"mouseup.closecombo\");\n\n    if (self.repositionInterval) clearInterval(self.repositionInterval);\n  },\n\n  validateValueInDatasource: function validateValueInDatasource(triggerEvents, isKeyByKey) {\n    var self = this;\n    var selected = self.inputCombo.val();\n    var selectedKey = self.findDataByValue(selected, isKeyByKey);\n\n    if (!self.value) {\n      self.value = { id: \"\" };\n    }\n\n    if (selectedKey.id > 0) {\n      if (!triggerEvents) {\n        self.setValue({ id: selectedKey.id }, false);\n        self.setDisplayValue(selectedKey);\n      } else {\n        self.setValue({ id: selectedKey.id });\n        self.setDisplayValue(selectedKey);\n      }\n    } else if (selectedKey.id === \"\") {\n      if (self.value.id != selectedKey.id) {\n        self.setValue(selectedKey, false);\n      }\n      self.setDisplayValue(selectedKey);\n    } else {\n      self.setDisplayValue(self.selectedValue);\n    }\n  },\n\n  /*\r\n      *   Keydown listener\r\n      */\n  keyDownFunction: function keyDownFunction(e) {\n    var self = this;\n    var idDropdown = \"dd-\" + self.inputCombo.attr(\"id\");\n    var dropDown = $(\"#\" + idDropdown);\n    var active = $(\"li.active\", dropDown);\n\n    e = e ? e : window.event;\n\n    // Need to implement hiding select on \"Escape\" and \"Enter\".\n    if (e.altKey || e.ctrlKey || e.metaKey) {\n      return 1;\n    }\n\n    if (dropDown.length === 0 && !self.properties.data) {\n      self.comboDropDown(self.combo);\n      dropDown = $(\"#\" + idDropdown);\n    }\n\n    //Tab or Shift + Tab\n    if (e.shiftKey && e.keyCode == 9 || e.keyCode == 9) {\n      if (active.length > 0) {\n        self.inputCombo.val(active.text());\n      }\n      self.focusDependant = true;\n      self.validateValueInDatasource(true, true);\n      dropDown.remove();\n      return 1;\n      //return 0;\n    }\n\n    if (27 == e.keyCode) {\n      self.setDisplayValue(self.selectedValue);\n      dropDown.remove();\n    }\n\n    if (9 == e.keyCode || 13 == e.keyCode) {\n      if (active.length > 0) {\n        self.inputCombo.val(active.text());\n      }\n      self.validateValueInDatasource(true, true);\n      dropDown.remove();\n      return 1;\n    }\n\n    if (e.keyCode == \"38\" || e.keyCode == \"37\") {\n      // up arrow\n      self.selectPreviousElement(dropDown);\n      return 0;\n    } else if (e.keyCode == \"40\" || e.keyCode == \"39\") {\n      // down arrow\n      self.selectNextElement(dropDown);\n      return 0;\n    }\n\n    if (e.keyCode == 36) {\n      self.selectFirstElement(dropDown);\n      return 0;\n    } else if (e.keyCode == 35) {\n      self.selectLastElement(dropDown);\n      return 0;\n    }\n\n    self.properties.enableTyping = typeof bizagi.override.typingForCombos == \"boolean\" ? bizagi.override.typingForCombos : self.properties.enableTyping;\n\n    if (!self.properties.enableTyping) {\n      e.preventDefault();\n      e.stopPropagation();\n      return false;\n    }\n    return 1;\n  },\n\n  /*\r\n      *   KeyUp listener\r\n      */\n  keyUpFunction: function keyUpFunction(e) {\n    var self = this;\n    var idDropdown = \"dd-\" + self.inputCombo.attr(\"id\");\n    var dropDown = $(\"#\" + idDropdown);\n\n    e = e ? e : window.event;\n\n    if (\n    e.altKey ||\n    e.ctrlKey ||\n    e.metaKey ||\n    13 == e.keyCode ||\n    9 == e.keyCode ||\n    27 == e.keyCode ||\n    e.keyCode == 16 ||\n    e.keyCode == 36 ||\n    e.keyCode == 35 ||\n    e.keyCode == 33 ||\n    e.keyCode == 34)\n    {\n      return 0;\n    }\n\n    if (dropDown.length === 0) {\n      self.comboDropDown(self.combo);\n      dropDown = $(\"#\" + idDropdown);\n    }\n\n    var isSelectingItem = false;\n    if (e.keyCode >= 37 && e.keyCode <= 40) {\n      // Keyboard Arrows\n      isSelectingItem = true;\n    }\n    self.selectItemByKeyUp(isSelectingItem);\n\n    return 1;\n  },\n  /*\r\n      * Select letter by letter\r\n      */\n  selectItemByKeyUp: function selectItemByKeyUp(isSelectingItem) {\n    var self = this,\n    objSelected;\n\n    if (bizagi.util.parseBoolean(isSelectingItem) == null) {\n      isSelectingItem = false;\n    }\n\n    var idDropdown = \"dd-\" + self.inputCombo.attr(\"id\");\n    var dropDown = $(\"#\" + idDropdown);\n\n    $(\".active\", dropDown).removeClass(\"active\");\n\n    var selectedKey = self.findDataByValue(self.inputCombo.val(), true, isSelectingItem);\n    if (selectedKey !== -1) {\n      objSelected = $(\"li[data-value='\" + selectedKey.id + \"']\", dropDown);\n      objSelected.addClass(\"active\");\n      self.inputCombo.attr(\"aria-activedescendant\", \"opt-\" + selectedKey.id);\n    } else {\n      objSelected = $(\"li.ui-selected\", dropDown);\n    }\n\n    if (dropDown.length > 0 && objSelected.length > 0) {\n      scrollPosition = parseInt(objSelected.position().top);\n      dropDown.scrollTop(scrollPosition);\n    }\n  },\n\n  selectFirstElement: function selectFirstElement(dropDown) {\n    var self = this;\n    var actual = $(\"li:first\", dropDown);\n\n    $(\"li\", dropDown).removeClass(\"active\");\n    actual.addClass(\"active\");\n    scrollPosition = actual.position().top;\n    dropDown.scrollTop(scrollPosition);\n\n    self.inputCombo.val($(actual).text());\n  },\n\n  selectLastElement: function selectLastElement(dropDown) {\n    var self = this;\n    var actual = $(\"li:last\", dropDown);\n\n    $(\"li\", dropDown).removeClass(\"active\");\n    actual.addClass(\"active\");\n    scrollPosition = actual.position().top;\n    dropDown.scrollTop(scrollPosition);\n\n    self.inputCombo.val($(actual).text());\n  },\n\n  /*\r\n      * Handler key Up\r\n      */\n  selectPreviousElement: function selectPreviousElement(dropDown) {\n    var self = this;\n    var scrollPosition = 0;\n    var actual = $(\"li.active\", dropDown);\n\n    if (actual.length === 0) {\n      actual = $(\"li:first\", dropDown);\n    }\n\n    var previous = actual.prev();\n\n    if (previous.length !== 0) {\n      actual.removeClass(\"active\");\n      $(previous).addClass(\"active\");\n      scrollPosition = $(previous).position().top;\n\n      dropDown.scrollTop(scrollPosition);\n      self.inputCombo.val($(previous).text());\n    }\n  },\n\n  /*\r\n      *Handler key Down\r\n      */\n  selectNextElement: function selectNextElement(dropDown) {\n    var self = this;\n    var scrollPosition = 0;\n    var actual = $(\"li.active\", dropDown);\n\n    if (actual.length === 0) actual = $(\"li:first\", dropDown);\n\n    var next = actual.next();\n\n    if (next.length !== 0) {\n      actual.removeClass(\"active\");\n      $(next).addClass(\"active\");\n      scrollPosition = $(next).position().top;\n\n      dropDown.scrollTop(scrollPosition);\n      self.inputCombo.val($(next).text());\n    }\n  },\n\n  /*\r\n      *   Handler to react when a combo item is selected\r\n      */\n  onComboItemSelected: function onComboItemSelected(val) {\n    var self = this;\n    var selectedId = val.id || \"\";\n    var selectedLabel = val.value || \"\";\n\n    self.properties.originalValue = self.getValue();\n\n    if (selectedId === \"\") {\n      self.inputCombo.val(\"\");\n    } else {\n      self.inputCombo.val(selectedLabel);\n    }\n\n    self.setValue({ id: selectedId });\n    self.setDisplayValue({ id: selectedId, value: selectedLabel });\n  },\n\n  /*\r\n      *   Sets the value in the rendered control\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n    var properties = self.properties;\n    var comboValue = \"\";\n    var comboValueValid = true;\n    var control;\n\n    value = self.mapValue(value);\n    value = self.preprocessValue(value);\n\n    if (properties.editable && value !== null) {\n      // If set display value were assigned from render action\n      if (_typeof(value) === \"object\" && value.label !== undefined) {\n        var id = bizagi.util.isNumeric(value.id) ? value.id : value.value;\n\n        var displayValue = value.label;\n\n        if (!bizagi.util.isString(displayValue) && bizagi.util.isString(value.value)) {\n          displayValue = value.value;\n        }\n\n        comboValue = self.findDataById(id).value || value.label;\n        self.setValue({ id: id, value: displayValue });\n\n      } else {\n        if (typeof value === \"number\" || typeof value === \"string\" || value.id) {\n          if (value.id) {\n            var translated = false; //When the parametric entity have a boolean attribute\n            if (value.value != null && typeof value.value === \"boolean\") {\n              translated = true;\n              if (bizagi.util.parseBoolean(value.value) === true) {\n                value.value = this.getResource(\"render-boolean-yes\");\n              } else if (bizagi.util.parseBoolean(value.value) === false) {\n                value.value = this.getResource(\"render-boolean-no\");\n              }\n            } else if (value.value != null && _typeof(value.value) === \"object\") {\n              for (var i = 0; i < value.value.length; i++) {\n                if (value.value[i] != null && typeof value.value[i] === \"boolean\") {\n                  if (bizagi.util.parseBoolean(value.value[i]) === true) {\n                    value.value[i] = this.getResource(\"render-boolean-yes\");\n                  } else if (bizagi.util.parseBoolean(value.value[i]) === false) {\n                    value.value[i] = this.getResource(\"render-boolean-no\");\n                  }\n                }\n              }\n            }\n            if (translated) {\n              comboValue = value.value;\n            } else {\n              comboValue = self.findDataById(value.id).value || value.value;\n            }\n          } else {\n            comboValue = self.findDataById(Number(value)).value || value.label;\n          }\n        } else {\n          comboValue = _typeof(value.value) == \"object\" ? value.value.join(\" - \") : value.value;\n        }\n\n        if (properties.hasLocalData || properties.remoteDataLoaded) {\n          comboValueValid = self.findDataByValue(comboValue);\n          if (comboValueValid === -1) {\n            comboValue = \"\";\n          }\n        }\n\n        if (value && value.id) {\n          // Check if the value is a json object\n          if (value.id != undefined && (typeof value.id === \"number\" && value.id > 0 || typeof value.id === \"string\" && value.id.length > 0)) {\n            if (self.value == null || self.value == undefined) {\n              self.setValue({ id: value.id });\n            } else if (self.value.id != value.id) {\n              self.setValue({ id: value.id });\n            }\n          } else {\n            if (self.value == null || self.value == undefined) {\n              self.setValue({ id: value });\n            } else if (self.value.id != value) {\n              self.setValue({ id: value });\n            }\n          }\n        }\n      }\n\n      if (self.inputCombo) {\n        self.inputCombo.val(value.value);\n        $(self.inputCombo).attr(\"title\", value.value);\n      } else {\n        control = $(\".ui-selectmenu-value\", self.getControl());\n        control && control.val(value.value);\n      }\n    } else {\n      if (!properties.editable && value !== null) {\n        if (typeof value === \"number\" || typeof value === \"string\") {\n          comboValue = self.findDataById(Number(value)).value;\n          control = self.getControl();\n          control.html(\n          \"<label class='readonly-control'>\" +\n          self.escapeValue(self.formatItem(comboValue)) +\n          \"</label>\");\n\n        } else {\n          if (_typeof(value) === \"object\") {\n\n            if (value.label !== undefined) {\n              id = bizagi.util.isNumeric(value.id) ? value.id : value.value;\n\n              comboValue = self.findDataById(id).value || value.label;\n\n              if ($.isArray(comboValue)) {\n                comboValue = comboValue.join(\" - \");\n              }\n\n              self.setValue({ id: id, value: comboValue });\n            } else {\n              if (self.value == null || self.value == undefined) {\n                self.setValue(value);\n              } else if (self.value.id != value.id) {\n                self.setValue(value);\n              }\n            }\n\n            self.control.html(\n            \"<label class='readonly-control'>\" +\n            self.escapeValue(self.formatItem(value.label || value.value)) +\n            \"</label>\");\n\n          }\n        }\n      } else {\n        if (value === null && properties.editable) {\n          var emptySelection = self.getResource(\"render-combo-empty-selection\");\n          self.inputCombo.val(emptySelection);\n          $(self.inputCombo).attr(\"title\", \"\");\n        } else {\n          if (value === null && !properties.editable) {\n            self.getControl().text(\"\");\n          }\n        }\n      }\n    }\n  },\n\n  /*\r\n      *   Sets the value in the rendered control\r\n      */\n  clearDisplayValue: function clearDisplayValue() {\n    var self = this;\n    var control = self.getControl();\n\n    if (self.inputCombo) {\n      var emptySelection = bizagi.override.emptyLabelForCombo || self.getResource(\"render-combo-empty-selection\");\n      self.inputCombo.val(emptySelection);\n    } else if (!self.properties.editable) {\n      $(control).html(\"<label class='readonly-control'></label>\");\n    }\n\n    self.value = self.properties.value = self.selectedValue;\n  },\n  /*\r\n      * Cleans current data\r\n      */\n  cleanData: function cleanData() {\n    this.value = this.properties.value = this.selectedValue = { id: \"\", value: \"\" };\n    this.clearDisplayValue();\n  },\n  /*\r\n      *   Returns the selected value in the template\r\n      */\n  getSelectedValue: function getSelectedValue() {\n    return this.selectedValue;\n  },\n  /*\r\n      *   Find elements within a data source\r\n      */\n  findDataById: function findDataById(id) {\n    var result = (this.properties.data || []).find(function (value) {\n      return value.id == id;\n    }) || {};\n\n    return result;\n  },\n\n  findDataByValue: function findDataByValue(val, keyByKey, equalsToValue) {\n    var self = this;\n    var result = -1;\n\n    if (val !== undefined && val !== null && self.properties.data != undefined) {\n      if (keyByKey) {\n        var value;\n        var tvalue;\n        var nValue;\n        var compareValIn;\n        var compareVal;\n        var i = -1;\n        var dataLength = self.properties.data.length - 1;\n\n        while (i++ < dataLength) {\n          value = self.properties.data[i];\n\n          compareValIn =\n          _typeof(val) == \"object\" ? val.join(\" - \") : typeof val === \"boolean\" ? val.toString() : val;\n          compareVal = $.trim(compareValIn).\n          substring(0, compareValIn.length).\n          toLowerCase();\n\n          if (_typeof(value) === \"object\" && _typeof(value.value) === \"object\") {\n            tvalue = _typeof(value.value) == \"object\" ? value.value.join(\" - \") : value.value;\n          } else {\n            tvalue = $.trim(value.value);\n          }\n\n          nValue = String(tvalue).toLowerCase();\n\n          if (equalsToValue) {\n            if (nValue == compareVal && nValue.length == compareVal.length) {\n              result = { id: value.id, value: value.value };\n              i = dataLength;\n            }\n          } else {\n            // Search item by Begin\n            if (nValue.indexOf(compareVal) == 0) {\n              result = { id: value.id, value: value.value };\n              i = dataLength;\n            }\n          }\n        }\n      } else {\n        if (self.getValue()) {\n          result = self.getValue();\n\n          if (!result.value) {\n            result.value = self.inputCombo.val();\n          }\n        }\n      }\n    }\n\n    return result;\n  },\n\n  setValue: function setValue(val, triggerEvents) {\n    var self = this;\n\n    if (val === null) val = { id: \"\" };\n\n    if (!!val) {\n      var id = _typeof(val) === \"object\" ? self.getValueFromData(val.id) || \"\" : typeof val === \"number\" || typeof val === \"string\" ? self.getValueFromData(val) : \"\";\n      var label = typeof val.value !== \"undefined\" && val.value !== null ? val.value : self.findDataById(id).value || \"\";\n      self.selectedValue = { id: id, value: label };\n      this._super(self.selectedValue, triggerEvents);\n    }\n  },\n\n  getValueFromData: function getValueFromData(dataValue) {\n    var value = Number(dataValue);\n    if (isNaN(value)) value = dataValue;\n    return value;\n  },\n\n  recalculateComboOffset: function recalculateComboOffset(dropDwn, objParent) {\n    if (bizagi.util.isIE() && bizagi.util.getInternetExplorerVersion() == 9) {\n      if (dropDwn.width() !== objParent.width()) {\n        var offset = objParent.width() - dropDwn.width();\n        dropDwn.width(objParent.width() + offset);\n      }\n    }\n  },\n\n  /**\r\n      * Workaround: Action isn't a parameter is temporally\r\n      * TODO: Fix after Genome\r\n      * @param {} action\r\n      * @returns {}\r\n      */\n  resizeCombo: function resizeCombo() {\n    var selectMenu = $(\".ui-selectmenu\", this.control);\n    var dropDwn = $(\".ui-select-dropdown.open\", this.element);\n    var widthControl = selectMenu.width();\n\n    if (dropDwn && dropDwn.get(0) && dropDwn.width() !== widthControl) {\n      dropDwn.width(widthControl);\n    }\n  },\n\n  changeRequired: function changeRequired(argument) {\n    this.properties.required = argument;\n    this.changeRequiredLabel(argument);\n  },\n\n  changeRequiredLabel: function changeRequiredLabel(argument) {\n    var control = this.getControl();\n    if (control.length > 0) {\n      if (this.getMode() !== \"execution\") {\n        if (bizagi.util.parseBoolean(argument) == true && this.properties.editable) {\n          control.addClass(\"control-required\");\n        } else {\n          control.removeClass(\"control-required\");\n        }\n      } else {\n        if (bizagi.util.parseBoolean(argument) == true && !this.hasValue() && this.properties.editable) {\n          control.addClass(\"control-required\");\n        } else {\n          control.removeClass(\"control-required\");\n        }\n      }\n    }\n    this.triggerRenderValidate();\n  },\n\n  changeCellRequired: function changeCellRequired(argument) {\n    this.changeRequired(argument);\n  },\n\n  /**\r\n      * Check if dialog is preferences view\r\n      * @param container\r\n      * @returns {*|Array|boolean}\r\n      */\n  isPreferencesDialog: function isPreferencesDialog(container) {\n    var preferences = container && container.closest(\".bz-wp-userpreferences-main\") || [];\n    return preferences && preferences.length > 0;\n  },\n\n  /**\r\n      * Workaround: Action isn't a parameter is temporally\r\n      * @param {} action\r\n      * @returns {}\r\n      */\n  onResizeCloseDialog: function onResizeCloseDialog() {\n    var selectMenu = $(\".ui-selectmenu\", this.control);\n    var menuContext = selectMenu.closest(\".ui-dialog-content\");\n    var dropDwn = $(\".ui-select-dropdown.open\", menuContext);\n\n    this.dropDownValidClose(undefined, dropDwn);\n  },\n\n  //#region Format\n\n  /**\r\n   * Customizes the font underline\r\n   * It does not apply when we use the render.base component\r\n   * @param underline\r\n   * @param isLabelFormat\r\n   */\n  changeFontUnderline: function changeFontUnderline(underline, isLabelFormat) {\n    var self = this;\n    var textFormat = self.properties.textFormat || {};\n    var valueFormat = self.properties.valueFormat || {};\n\n    var labelStrikethrough = bizagi.util.parseBoolean(textFormat.strikethru) ? \"line-through \" : \"\";\n    var valueStrikethrough = bizagi.util.parseBoolean(valueFormat.strikethru) ? \"line-through \" : \"\";\n    var formatUnderline = bizagi.util.parseBoolean(underline) ? \"underline\" : \"\";\n\n    var isLabelToFormat = typeof isLabelFormat != \"undefined\" || isLabelFormat != null ? isLabelFormat : true;\n    var $formatElements = isLabelToFormat ? self.getFormattingLabel() : self.getElementsToStylized(self.getControl());\n    var formatStrikeThrough = isLabelToFormat ? labelStrikethrough : valueStrikethrough;\n\n    self.changeTextDecoration($formatElements, formatStrikeThrough + formatUnderline);\n  },\n\n  /**\r\n      * Customizes the font Strikethrough property\r\n      * It does not apply when we use the render.base component\r\n      * @param strikeThrough\r\n      * @param isLabelFormat\r\n      */\n  changeFontStrikethru: function changeFontStrikethru(strikeThrough, isLabelFormat) {\n    var self = this;\n    var textFormat = self.properties.textFormat || {};\n    var valueFormat = self.properties.valueFormat || {};\n\n    var labelUnderline = bizagi.util.parseBoolean(textFormat.underline) ? \"underline \" : \"\";\n    var valueUnderline = bizagi.util.parseBoolean(valueFormat.underline) ? \"underline \" : \"\";\n    var formatStrikeThrough = bizagi.util.parseBoolean(strikeThrough) ? \"line-through\" : \"\";\n\n    var isLabelToFormat = typeof isLabelFormat != \"undefined\" || isLabelFormat != null ? isLabelFormat : true;\n    var $formatElements = isLabelToFormat ? self.getFormattingLabel() : self.getElementsToStylized(self.getControl());\n    var formatUnderline = isLabelToFormat ? labelUnderline : valueUnderline;\n\n    self.changeTextDecoration($formatElements, formatUnderline + formatStrikeThrough);\n  },\n\n  /**\r\n      * Context to apply styles\r\n      * @param context\r\n      * @returns {jQuery|HTMLElement}\r\n      */\n  getElementsToStylized: function getElementsToStylized(context) {\n    return $(\"input.ui-selectmenu-value, label.readonly-control\", context);\n  },\n\n  /**\r\n      * Customizes the font Strikethrough or underline property\r\n      * @param {} $element\r\n      * @param {} textDecoration\r\n      * @returns {}\r\n      */\n  changeTextDecoration: function changeTextDecoration($element, textDecoration) {\n    if (textDecoration === undefined) return this;\n    if ($element === undefined) return this;\n\n    textDecoration && $element.css(\"text-decoration\", textDecoration);\n\n    return this;\n  }\n\n  //#endregion Format\n});\n\n\n// We override original select menu refresh position method to adjust custom stuff\nvar originalRefreshPositionMethod = $.ui.selectmenu.prototype._refreshPosition;\n$.ui.selectmenu.prototype._refreshPosition = function () {\n\n  // Set initial heigth to zero\n  this.list.height(0);\n\n  // Call original method\n  var result = originalRefreshPositionMethod.apply(this, arguments);\n\n  // Return original response\n  this.list.css(\"width\", this.newelement.width() + \"px\");\n  return result;\n};","/*\r\n*   Name: Bizagi Desktop Container Extension\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will redefine the container class to adjust to desktop devices\r\n*/\n\n// Extends itself\nbizagi.rendering.container.extend(\"bizagi.rendering.desktop.container\", {}, {\n\n  /*\r\n                                                                              *   Constructor\r\n                                                                              */\n  initializeData: function initializeData(params) {\n    // Call base\n    this._super(params);\n\n    // Checks if the container contains grids\n    this.containsGrid = this.countByRenderType(\"grid\") != 0;\n  },\n  /**\r\n      * createRenderElement desktop. Consider stakeholder's searches form and ignore multiselect control\r\n      * @param {*} element \r\n      */\n  createRenderElement: function createRenderElement(element) {\n    var self = this;\n    var formProperties = self.getFormContainer() && self.getFormContainer().properties;\n    if (formProperties.isSearchesQueryForm) {\n      var properties = element.render.properties;\n      if (properties.rangeQuery && properties.rangeQuery != \"none\") {\n        properties.xpath = properties.xpath + \"@\" + properties.rangeQuery;\n      }\n      if (properties.type !== \"multiselect\") {\n        self._super(element);\n      }\n    } else {\n      self._super(element);\n    }\n  },\n  /* \r\n     *   Resizes the container to adjust it to the container\r\n     */\n  resize: function resize(size) {\n    var self = this;\n    var container = self.container;\n    var width = container.width();\n\n    // Don't resize thin or invisible containers\n    if (width < 300) return;\n\n    // Don't resize if there are no grid renders\n    if (this.containsGrid == false) return;\n\n    $.each(self.children, function (i, child) {\n      $.when(child.isRendered()).\n      done(function () {\n        child.resize({ width: width });\n      });\n    });\n  },\n\n  /*\r\n     *   Starts waiting signal for async stuff\r\n     */\n  startLoading: function startLoading() {\n    var self = this;\n    var element = self.container;\n    if (element) {\n      element.startLoading({ delay: 250, overlay: true });\n    }\n  },\n\n  /*\r\n     *   Ends waiting for async stuff\r\n     */\n  endLoading: function endLoading() {\n    var self = this;\n\n    var element = self.container;\n    if (element) {\n      element.endLoading();\n    }\n  },\n\n  /*\r\n     *   Counts how many renders belong to the container with some render type\r\n     */\n  countByRenderType: function countByRenderType(type) {\n    var self = this;\n    var counter = 0;\n    for (var i = 0; i < self.children.length; i++) {\n      var child = self.children[i];\n      if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) {\n        counter += child.countByRenderType(type);\n      }\n\n      if (child.properties.type == type) counter++;\n    }\n\n    return counter;\n  },\n\n  /*\r\n     *   Counts how many renders belong to the container with some render type excluding by param\r\n     */\n  countByRenderTypeWithParams: function countByRenderTypeWithParams(type, param) {\n    var self = this;\n    var counter = 0;\n    for (var i = 0; i < self.children.length; i++) {\n      var child = self.children[i];\n      if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) {\n        counter += child.countByRenderType(type);\n      }\n\n      if (child.properties.type == type && param == child.properties.height) counter++;\n    }\n\n    return counter;\n  },\n\n  /*\r\n     *   Template method to implement in each device to customize the container's behaviour to show layout\r\n     */\n  configureLayoutView: function configureLayoutView() {\n    var self = this;\n    var container = self.container;\n  },\n\n  /*\r\n     * Return the sumatory of the height of all children\r\n     */\n  getChildrenSumHeight: function getChildrenSumHeight(excludeElement) {\n    var self = this;\n    var counter = 0;\n    for (var i = 0; i < self.children.length; i++) {\n      var child = self.children[i];\n      if (excludeElement && excludeElement == child.properties.type && child.properties.height == -1) {\n        // do nothing (exclude the element)\n      } else {\n        if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) {\n          var containerHeight = $(child.container).height();\n          counter += containerHeight != null ? containerHeight : 0;\n        } else if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_RENDER) {\n          var renderHeight = $(child.element).height();\n          counter += renderHeight != null ? renderHeight : 0;\n        }\n      }\n    }\n\n    return counter;\n  },\n\n  /*\r\n     * Return the count of children\r\n     */\n  getChildreCount: function getChildreCount() {\n    var self = this;\n\n    return self.children.length;\n  } });","/*\r\n*   Name: Bizagi Desktop Render Extension\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will redefine the render class to adjust to desktop devices\r\n*/\n\n// Extends from render base\nbizagi.rendering.render.extend(\"bizagi.rendering.desktop.render\", {}, {\n\n  /*\r\n                                                                        *   Template method to implement in each device to customize each render after processed\r\n                                                                        */\n  postRender: function postRender() {\n    var self = this;\n    var properties = self.properties;\n\n    // Call base\n    this._super();\n\n    // Add classic retype validation\n    if (properties.retype == \"double\") {\n      self.processClassicRetype();\n    }\n\n    // Add hint feature\n    if (properties.hint) {\n      self.processRenderHint();\n    }\n\n    // Hide icons if no helptext is provided\n    if (properties.helpText && properties.helpText.length > 0) {\n      self.showIcon(\"help\");\n    }\n  },\n\n  postRenderReadOnly: function postRenderReadOnly() {\n    var self = this;\n    var properties = self.properties;\n\n    if (properties.helpText && properties.helpText.length > 0) {\n      self.showIcon(\"help\");\n    }\n  },\n\n  // #region Process Layout\n  /*\r\n  *   Method to process the render the layout\r\n  */\n  processLayout: function processLayout(isLabelFormat, format) {\n    this._super(isLabelFormat, format);\n  },\n\n  // #endregion\n\n  /*\r\n  *   Starts waiting signal for async stuff\r\n  */\n  startLoading: function startLoading() {\n    var self = this;\n    var element = self.element;\n    if (element) {\n      element.startLoading({ delay: 250, overlay: true });\n    }\n  },\n\n  /*\r\n     *   Ends waiting for async stuff\r\n     */\n  endLoading: function endLoading() {\n    var self = this;\n\n    var element = self.element;\n    if (element) {\n      element.endLoading();\n    }\n  },\n\n  /*\r\n     *   Template method to get the label element\r\n     */\n  getLabel: function getLabel() {\n    var self = this;\n    if (!self.label) {\n      self.label = $(\".ui-bizagi-label\", self.element || self.observableElement);\n    }\n    return self.label;\n  },\n\n  /*\r\n     *   Template method to get the control element\r\n     */\n  getControl: function getControl() {\n    var self = this;\n    if (!self.control || self.control instanceof jQuery && self.control.length === 0) {\n      self.control = $(\".ui-bizagi-render-control\", self.element || self.observableElement);\n    }\n    if (!self.control || self.control.length == 0) {\n      return null;\n    }\n    return self.control;\n  },\n\n  /*\r\n     *   Template method to get the control filler element\r\n     */\n  getControlFiller: function getControlFiller() {\n    var self = this;\n    if (!self.controlFiller) self.controlFiller = $(\".ui-bizagi-control\", self.element || self.observableElement);\n    return self.controlFiller;\n  },\n\n  /* \r\n     *   Adds a validation message to the render\r\n     */\n  setValidationMessage: function setValidationMessage(message) {\n    var self = this;\n\n    // Call base\n    self._super(message);\n\n    // DiegoP: Please don't remove this line again, this is intended to avoid performance problems in IE8\n    if (!bizagi.util.isIE8()) {\n\n      // Wait until element is ready\n      $.when(self.ready()).\n      done(function () {\n        var element = self.element;\n\n        // Set tooltip\n        var iconError = $(\".ui-bizagi-render-icon-error\", element);\n        var iconHelp = $(\".ui-bizagi-render-icon-help\", element);\n\n        if (message && message.length > 0) {\n          self.showIcon(\"error\");\n          if (bizagi.util.isIE9()) {\n            iconError.attr(\"data-title\", message);\n          } else {\n            iconError.attr(\"title\", message);\n          }\n\n          iconError.tooltip();\n          $(iconError).parent().removeClass('ui-hidden');\n\n          if (self.isNewRenderForm)\n          $(iconError).parent().removeClass('bz-forms-icons__hidden');\n\n        } else {\n          self.hideIcon(\"error\");\n          if ($(iconHelp).text() == \"\") {\n            $(iconError).parent().addClass('ui-hidden');\n\n            if (self.isNewRenderForm)\n            $(iconError).parent().addClass('bz-forms-icons__hidden');\n          }\n        }\n      });\n    }\n  },\n\n  /* \r\n     *   Attach handlers to implement the classic retype option\r\n     */\n  processClassicRetype: function processClassicRetype() {},\n\n  /* \r\n                                                            *   Attach effects to implement render hint\r\n                                                            */\n  processRenderHint: function processRenderHint() {\n    var self = this,\n    element = self.element,\n    properties = self.properties;\n\n    var input = $(\"input[type!=hidden], select\", element);\n    if (!input) return;\n\n    var span = input.parent();\n    if (!span) return;\n\n    // Add hint label\n    span.prepend('<label class=\"ui-bizagi-render-hint\">' + properties.hint + '</label>');\n    var hint = $(\".ui-bizagi-render-hint\", element);\n\n    // Bind events\n    input.focus(function () {\n      hint.addClass(\"focus\");\n    });\n    input.keypress(function () {\n      hint.addClass(\"has-text\").removeClass(\"focus\");\n    });\n    input.blur(function () {\n      if ($(this).val() == \"\") {\n        hint.removeClass(\"has-text\").removeClass(\"focus\");\n      }\n    });\n    hint.click(function () {\n      input.focus();\n    });\n  },\n\n  /**\r\n      * Focus on the current element\r\n      * @param {*} time \r\n      */\n  focus: function focus(time) {\n    var render = this;\n\n    while (render) {\n      var properties = render.properties || {};\n      var params = render.params || {};\n      if (properties.type === \"section\") {\n        render.openAutomatically();\n        break;\n      } else if (properties.type === \"form\" || params.type === \"form\") {\n        var elementForm = render.getElement()[0];\n        var containerForm = elementForm ? elementForm.querySelector(\".ui-bizagi-container-form-wrapper-animation\") : null;\n        if (containerForm !== null && containerForm !== undefined && containerForm.style.transform !== \"\") {\n          containerForm.style.transform = \"\";\n          $(\".ui-bizagi-main-section\", containerForm)[0].classList.remove(\"ui-bizagi-section-animation-fade-out\");\n          var form = this.getFormContainer() || {};\n          var sections = form.rendersByType ? form.rendersByType[\"section\"] : [];\n          if (sections.length > 0) sections[0].closeAllSections();\n        }\n      }\n      render = render.parent;\n    }\n\n    this._super(time);\n  },\n\n  /*\r\n     *   Return the right display option class\r\n     */\n  getDisplayOptionClass: function getDisplayOptionClass(displayType) {\n    // Set display type\n    if (displayType == \"normal\" ||\n    displayType == \"both\") {\n      return \"ui-bizagi-render-display-normal\";\n\n    } else if (displayType == \"vertical\") {\n      return \"ui-bizagi-render-display-vertical\";\n\n    } else if (displayType == \"reversed\") {\n      return \"ui-bizagi-render-display-reversed\";\n\n    } else if (displayType == \"verticalReversed\") {\n      return \"ui-bizagi-render-display-vertical-reversed\";\n\n    } else if (displayType == \"label\") {\n      return \"ui-bizagi-render-display-label\";\n\n    } else if (displayType == \"value\") {\n      return \"ui-bizagi-render-display-value\";\n    }\n    return \"\";\n  },\n\n  /*\r\n     *   Customizes render display type with custom css classes\r\n     */\n  changeDisplayOption: function changeDisplayOption(displayType) {\n    var self = this,\n    el = self.element;\n\n    // Call base\n    self._super(displayType);\n\n    // Clean old display type\n    el.removeClass(\"ui-bizagi-render-display-normal ui-bizagi-render-display-vertical ui-bizagi-render-display-reversed\").\n    removeClass(\"ui-bizagi-render-display-vertical-reversed ui-bizagi-render-display-label ui-bizagi-render-display-value\");\n\n    // Set display type\n    el.addClass(self.getDisplayOptionClass(displayType));\n  },\n\n  /*\r\n     *   Return the right align class\r\n     */\n  getAlignClass: function getAlignClass(alignType) {\n    // Set label align\n    if (alignType == \"left\") {\n      return \"ui-bizagi-render-align-left\";\n\n    } else if (alignType == \"center\") {\n      return \"ui-bizagi-render-align-center\";\n\n    } else if (alignType == \"right\") {\n      return \"ui-bizagi-render-align-right\";\n    } else if (alignType == \"justify\") {\n      return \"ui-bizagi-render-align-justify\";\n    }\n    return \"\";\n  },\n\n  /*\r\n     *   Customizes render label align\r\n     */\n  changeLabelAlign: function changeLabelAlign(alignType) {\n    var self = this;\n\n    // Get label\n    var label = self.getLabel();\n\n    // Remove old label align\n    label.removeClass(\"ui-bizagi-render-align-left ui-bizagi-render-align-center ui-bizagi-render-align-right\");\n\n    // Set label align\n    label.addClass(self.getAlignClass(alignType));\n\n    // Call base\n    this._super(alignType);\n  },\n\n  /*\r\n     *   Customizes render value align\r\n     */\n  changeValueAlign: function changeValueAlign(alignType) {\n    var self = this;\n\n    // Get control\n    var controlFiller = self.getControlFiller();\n\n    // Remove old value align\n    controlFiller.removeClass(\"ui-bizagi-render-align-left ui-bizagi-render-align-center ui-bizagi-render-align-right\");\n\n    // Set value align\n    controlFiller.addClass(self.getAlignClass(alignType));\n\n    // Call base\n    this._super(alignType);\n  },\n\n  /* Return the icons container*/\n  getContainerIcons: function getContainerIcons() {\n    return $(\".ui-bizagi-render-icons\", this.element);\n  },\n\n  /*\r\n     *   Show a notification icon\r\n     */\n  showIcon: function showIcon(icon) {\n    var self = this;\n    var $containerIcons = self.getContainerIcons();\n    var $errorIcon = $(\".ui-bizagi-render-icon-error\", $containerIcons);\n    var $helpIcon = $(\".ui-bizagi-render-icon-help\", $containerIcons);\n    var visibleIcon;\n\n    $containerIcons.removeClass('ui-hidden');\n\n    if (self.isNewRenderForm)\n    $containerIcons.removeClass('bz-forms-icons__hidden');\n\n    if (icon == \"error\") {\n      visibleIcon = $errorIcon.css(\"display\", \"inline-block\");\n    }\n    if (icon == \"help\") {\n      visibleIcon = $helpIcon.css(\"display\", \"inline-block\");\n    }\n\n    if ($helpIcon.is(':visible') && $errorIcon.is(':visible')) {\n      $containerIcons.css({ 'width': '48px', 'min-width': \"48px\" });\n    } else if ($helpIcon.is(':visible') || $errorIcon.is(':visible')) {\n      $containerIcons.css({ 'width': '24px', 'min-width': \"24px\" });\n    }\n\n    // Make sure that icon container is visible\n    self.getControlFiller().addClass(\"ui-bizagi-state-show-icons\");\n\n    // Add hover handler in order to lazy-add the tooltip plugin\n    visibleIcon.mouseover(function (e) {\n      e.preventDefault();\n      e.stopPropagation();\n      if (visibleIcon.data(\"tooltip\") === undefined) {\n        // Apply tooltip plugin\n        visibleIcon.tooltip({\n          tooltipClass: 'ui-widget-content ui-help-tooltip',\n          items: visibleIcon.attr(\"title\") ? \".ui-icon[title]\" : \".ui-icon[data-title]\",\n          content: function content() {\n            var reg = /<\\s*script[^>]*>[\\s\\S]*?(<\\s*\\/script[^>]*>|$)/ig;\n            var element = $(this);\n            var replaceHTML = !element.hasClass(\"ui-bizagi-render-icon-error\");\n            //set the title as 'content' to apply possible html tags or styles included in original title\n            if (element[0] && element[0].attributes[\"data-title\"]) {\n              var text = element[0].attributes[\"data-title\"].value;\n              if (reg.test(text)) {\n                return bizagi.util.sanitizeHTML(text);\n              } else {\n                return text;\n              }\n            } else if (element[0] && element[0].title) {\n              var _title = element[0].title;\n              element[0].title = \"\";\n              if (reg.test(_title)) {\n                return bizagi.util.sanitizeHTML(_title);\n              } else {\n                return _title;\n              }\n            }\n          } });\n\n\n        visibleIcon.tooltip(\"open\");\n        $(\".ui-help-tooltip\").css(\"z-index\", $.ui.dialog.prototype._getMaxZindex());\n      }\n    });\n  },\n\n  /*\r\n     *   Show a notification icon\r\n     */\n  hideIcon: function hideIcon(icon) {\n    var self = this;\n    var containerIcons = $(\".ui-bizagi-render-icons\", self.element);\n    var errorIcon = $(\".ui-bizagi-render-icon-error\", self.element);\n    var helpIcon = $(\".ui-bizagi-render-icon-help\", self.element);\n\n    if (helpIcon.is(':visible') && errorIcon.is(':visible')) {\n      containerIcons.css({ 'width': '24px', 'min-width': \"24px\" });\n    }\n\n    if (icon == \"error\") {\n      $(\".ui-bizagi-render-icon-error\", self.element).css(\"display\", \"none\");\n    }\n    if (icon == \"help\") {\n      $(\".ui-bizagi-render-icon-help\", self.element).css(\"display\", \"none\");\n    }\n\n    // Hide icon container if no icons are shown\n    var iconContainer = $(\".ui-bizagi-render-icons span\", self.element);\n    if (iconContainer.length > 0 && iconContainer[0].style.display != \"none\") {\n      self.getControlFiller().removeClass(\"ui-bizagi-state-show-icons\");\n    }\n  },\n\n  /**\r\n      * Execute design only methods\r\n      */\n  performDesignModeMethods: function performDesignModeMethods() {\n    // Set all controls read-only\n    var control = this.getControl();\n\n    // Valid control\n    if (control !== null) {\n      $(\"input, select, button, textarea\", control).attr(\"readonly\", true);\n    }\n\n    // Call base\n    this._super();\n  } });","/*\r\n*   Name: BizAgi Desktop Column Decorator Extension\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will redefine the column decorator class to adjust to desktop devices\r\n*/\n\n// Extends itself\nbizagi.rendering.columns.column.extend(\"bizagi.rendering.desktop.columns.column\", {}, {\n\n  /*\r\n                                                                                        *   Apply custom overrides to each decorated instance\r\n                                                                                        */\n  applyOverrides: function applyOverrides(decorated) {\n    if (!decorated) return;\n\n    // Hacks the getControl method in the decorated render to add features\n    if (decorated.getControl) {\n      this.originalGetControl = decorated.getControl;\n      decorated.getControl = this.getControl;\n    }\n\n    /* Customizes the font weight */\n    decorated.getFormattingLabel = function (bold) {\n      var self = this;\n      return self.getControl();\n    };\n  },\n\n  /*\r\n     *   Template method to get the control element\r\n     *   This code runs under the decorated element context\r\n     */\n  getControl: function getControl() {\n    var self = this;\n    var result = this._super();\n\n    if (!result || result.length == 0) {\n      result = $(\".ui-bizagi-cell-readonly\", self.element || self.observableElement);\n    }\n\n    return result;\n  },\n\n  /*\r\n     *   Post process the element after it has been rendered\r\n     */\n  postRenderReadOnly: function postRenderReadOnly(surrogateKey, cell) {\n    var self = this;\n    var properties = self.properties;\n\n    // Call base\n    this._super(surrogateKey, cell);\n\n    // Just draw render if the cell layout has been filled\n    if (cell && cell.length > 0) {\n      var cellIcon = $(\".ui-bizagi-cell-icon\", cell);\n      if (!properties.editable) cellIcon.remove();\n\n      // Apply styles to cell\n      self.applyColumnStyles(cell);\n\n      if (properties.align == \"left\") {\n        cellIcon.addClass(\"ui-bizagi-cell-icon-right\");\n      }\n    }\n  },\n\n  /*\r\n     *   Apply column styles to a specified element\r\n     */\n  applyColumnStyles: function applyColumnStyles(element) {\n    var self = this;\n    var properties = self.properties;\n\n    // Set cell back color\n    if (properties.textFormat.background) {\n      element.css(\"background-color\", properties.textFormat.background);\n      element.css(\"background-image\", \"none\");\n    }\n  } });","/*\r\n *   Name: Bizagi Desktop Search Dialog Implementation\r\n *   Author: Diego Parra\r\n *   Comments:\r\n *   -   This script will shows a search form inside a popup dialog in order to edit\r\n */\n\n// Extends itself\n$.Class.extend(\"bizagi.rendering.dialog.search\", {\n  POPUP_WIDTH: 800,\n  POPUP_HEIGHT: 600 },\n{\n  /* \r\n  *   Constructor\r\n  */\n  init: function init(dataService, renderFactory, searchForms, searchParams, otherOptions) {\n    var self = this;\n    var doc = window.document;\n    otherOptions = otherOptions || {};\n\n    this.dataService = dataService;\n    this.renderFactory = renderFactory;\n    this.searchForms = searchForms;\n    this.searchParams = searchParams;\n    this.dialogDeferred = new $.Deferred();\n    this.extraButtons = otherOptions.hasOwnProperty(\"buttons\") ? otherOptions.buttons : false;\n\n    // Draw dialog box\n    self.dialogBox = $(\"<div class='ui-bizagi-component-loading'/>\");\n    self.dialogBox.empty();\n    self.dialogBox.appendTo(\"body\", doc);\n\n    // Create dialog box\n    self.showDialogBox(self.dialogBox).\n    done(function (data) {\n      self.dialogDeferred.resolve(data);\n      self.form.unbindAutoSaveForm();\n    }).\n    fail(function () {\n      self.dialogDeferred.reject();\n      self.form.unbindAutoSaveForm();\n    });\n  },\n  /*\r\n     *   Render the form\r\n     *   The params are the same that will be send to the ajax service\r\n     *   Returns a deferred\r\n     */\n  render: function render(params) {\n    var self = this;\n\n    // Render search dialog\n    self.renderSearchDialog(params);\n\n    // Return promise\n    return self.dialogDeferred.promise();\n  },\n  renderSearchDialog: function renderSearchDialog(params) {\n    var self = this;\n    self.form = null;\n    // Creates a dialog\n    $.when(self.getSearchContainerData(params)).\n    pipe(function (data) {\n\n      // Render dialog form\n      if (typeof data.form.properties != \"undefined\")\n      data.form.properties.orientation = params.orientation || \"ltr\";\n\n      var _form = self.renderFactory.getContainer({\n        type: \"form\",\n        data: data.form,\n        canvas: self.dialogBox });\n\n\n      if (params.contexttype) {\n        _form.properties.contexttype = params.contexttype;\n      }\n\n      // Save form reference\n      self.form = _form;\n\n      // Return rendering promise\n      return self.form.render();\n    }).\n    done(function (element) {\n      // Remove button container\n      $(\".ui-bizagi-button-container\", element).remove();\n\n      // Append form  in the dialog\n      $('.ui-bizagi-loading-message', self.dialogBox).remove();\n      element.appendTo(self.dialogBox);\n\n      // Publish an event to check if the form has been set in the DOM\n      self.form.triggerHandler(\"ondomincluded\");\n\n      // Check if there is a tab container (when there are more than one search form)\n      var tabContainer = self.form.firstChild().properties.type == \"tab\" ? self.form.firstChild() : null;\n      if (tabContainer) {\n\n        // Bind select tab event\n        tabContainer.bind(\"selected\", function (e, ui) {\n          var searchForm = self.searchForms[ui.index];\n\n          $.when(self.loadSearchTab(params, ui.tab, searchForm)).\n          done(function () {\n            // Set currents search form\n            self.currentSearchForm = ui.tab.firstChild();\n            self.currentSearchForm.triggerHandler(\"ondomincluded\");\n          });\n        });\n\n        // Select first tab\n        tabContainer.container.tabs(\"option\", \"active\", 0);\n        self.currentSearchForm = tabContainer.firstChild().firstChild();\n        self.currentSearchForm.triggerHandler(\"ondomincluded\");\n\n      } else {\n\n        // Set currents search form\n        self.currentSearchForm = self.form.firstChild();\n        self.currentSearchForm.triggerHandler(\"ondomincluded\");\n      }\n\n      // Focus into first control\n      self.focusFirstControl(self.currentSearchForm, 100);\n\n      // Add row selected handlers to resolve the deferred\n      self.currentSearchForm.bind(\"instanceSelected\", function (ev, ui) {\n        self.closeDialogBox();\n        self.dialogBoxDeferred.resolve({\n          id: ui.id,\n          label: '' });\n\n      });\n\n      // Event handler to searchList control\n      self.currentSearchForm.bind(\"multiSelect\", function (ev, ui) {\n        self.closeDialogBox();\n        self.dialogBoxDeferred.resolve({\n          id: ui.id,\n          label: ui.data });\n\n      });\n    });\n  },\n  /**\r\n     * Sets the focus to the first control\r\n     */\n  focusFirstControl: function focusFirstControl(form, time) {\n    // Configures effect\n    var effect = function effect() {\n      var defaultControl = $(\"input:visible, select:visible, option:visible, textarea:visible\", form.container);\n      if (defaultControl.length > 0) {\n        // Focus control\n        var innerControl = defaultControl[0];\n        try {\n          innerControl.focus();\n        } catch (e) {};\n      }\n    };\n\n    // Run effect\n    if (time > 0) {\n      setTimeout(effect, time);\n\n    } else {\n      effect();\n    }\n  },\n  /*\r\n     *   Loads a search tab on demand inside an already rendered dialog\r\n     */\n  loadSearchTab: function loadSearchTab(params, tab, searchForm) {\n    var self = this;\n    var defer = new $.Deferred();\n\n    // If the tab has children it is loaded already\n    if (tab.children.length > 0)\n    return null;\n\n    // Load search form data\n    $.when(self.getSearchFormData(params, searchForm)).\n    pipe(function (data) {\n      // Render data inside selected tab\n      var searchFormContainer = self.renderFactory.getContainer({\n        type: \"searchForm\",\n        data: data.form });\n\n      tab.children.push(searchFormContainer);\n\n      return searchFormContainer.render();\n    }).\n    done(function (element) {\n      // Remove button container\n      $(\".ui-bizagi-button-container\", element).remove();\n\n      tab.container.append(element);\n      defer.resolve();\n    });\n\n    return defer.promise();\n  },\n  /*\r\n     *   Shows the dialog box in the browser\r\n     *   Returns a promise that the dialog will be closed\r\n     */\n  showDialogBox: function showDialogBox(dialogBox, reverseButtons) {\n    var self = this;\n    var reverseButtons = self.searchParams.orientation == \"rtl\" ? true : false;\n    // Define buttons\n    var buttons = [];\n    self.dialogBoxDeferred = new $.Deferred();\n\n    var defaultButtons = [\n    {\n      text: bizagi.localization.getResource(\"render-form-dialog-box-search\"),\n      click: function click() {\n        if (self.searchParams) {\n          self.searchParams.searchTriggeredBy = \"button\";\n        }\n        // Perform search\n        self.currentSearchForm.performSearch(self.searchParams);\n      } },\n\n    {\n      text: bizagi.localization.getResource(\"render-form-dialog-box-cancel\"),\n      click: function click() {\n        self.dialogBoxDeferred.reject();\n        self.closeDialogBox();\n      } }];\n\n\n    if (this.extraButtons) {\n      buttons.push(this.extraButtons);\n    }\n    buttons = buttons.concat(defaultButtons);\n\n    if (reverseButtons)\n    buttons.reverse();\n\n    var popupWidth = this.Class.POPUP_WIDTH;\n    var popupHeight = this.Class.POPUP_HEIGHT;\n\n    if (popupWidth > $(window).width())\n    popupWidth = $(window).width() * 0.9;\n\n    // Creates a dialog\n    dialogBox.\n    addClass(\"ui-bizagi-dialog-search\").\n    dialog({\n      title: bizagi.localization.getResource(\"render-search-dialog-title\"),\n      width: popupWidth,\n      height: popupHeight,\n      resizable: false, // This one is to avoid a memory leak, DO NOT CHANGE PLEASE\n      modal: true,\n      buttons: buttons,\n      close: function close() {\n        self.dialogBoxDeferred.reject();\n        self.closeDialogBox();\n      },\n      resizeStop: function resizeStop(event, ui) {\n        self.form.resize(ui.size);\n      },\n      maximize: function maximize(e) {\n        if (self.currentSearchForm) {\n          self.currentSearchForm.triggerHandler(\"maximazedForm\");\n          self.dialogBox.trigger(\"resize\");\n        }\n      },\n      unmaximize: function unmaximize(e) {\n        if (self.currentSearchForm) {\n          self.currentSearchForm.triggerHandler(\"unmaximazedForm\");\n          self.dialogBox.trigger(\"resize\");\n        }\n      } });\n\n\n    // Return promise\n    return self.dialogBoxDeferred.promise();\n  },\n\n  /*\r\n     *   Closes the dialog box\r\n     */\n  closeDialogBox: function closeDialogBox() {\n    var self = this;\n    var dialogBox = self.dialogBox;\n    dialogBox.dialog('destroy');\n    dialogBox.detach();\n    // Invalidate searchform page cache in the server\n    var pageCacheToInvalidate = self.currentSearchForm.getPageCache();\n    self.dataService.invalidatePageCache({ idPageCache: pageCacheToInvalidate });\n  },\n\n  /**\r\n     * Add buttons to dialog box\r\n     */\n\n  addButtons: function addButtons(params) {\n\n\n  },\n  /*     \r\n     *   Creates the search dialog sub-containers\r\n     */\n  getSearchContainerData: function getSearchContainerData(params) {\n    var self = this;\n    var deferred = new $.Deferred();\n    var data = {\n      form: {\n        properties: {},\n        elements: [] } };\n\n\n    var container = data.form;\n    var searchFormToLoad = self.searchForms[0];\n\n    // When there are more than one search form, render a tab container\n    if (self.searchForms.length > 1) {\n\n      var tabContainer = {};\n      tabContainer.properties = {\n        type: \"tab\" };\n\n      tabContainer.elements = [];\n      var otherElements = [];\n\n      $.each(self.searchForms, function (i, searchForm) {\n        var isDefault = searchForm[\"default\"] || false;\n\n        // Create tab item\n        var tab = {};\n        tab.properties = {\n          id: i,\n          type: 'tabItem',\n          displayName: searchForm.caption };\n\n        tab.elements = [];\n\n        // Append children \n        if (isDefault) {\n\n          tabContainer.elements.push({\n            container: tab });\n\n\n          // Set properties to load default container\n          container = tab;\n          searchFormToLoad = self.searchForms[0];\n\n        } else {\n          otherElements.push({\n            container: tab });\n\n\n        }\n      });\n\n      // Append no defaults elements\n      $.each(otherElements, function (i, element) {\n        tabContainer.elements.push(element);\n      });\n\n      data.form.elements.push({\n        container: tabContainer });\n\n    }\n\n    // Loads default form\n    $.when(self.getSearchFormData(params, searchFormToLoad)).done(function (searchFormData) {\n      if (searchFormData) {\n        container.elements.push(searchFormData);\n        // Add a reference to inner search form pagecache\n        container.pageCacheId = searchFormData.form.pageCacheId;\n        // Resolve deferred\n        deferred.resolve(data);\n      }\n    }).fail(function () {\n      console.log(\"Error\");\n    });\n\n    return deferred.promise();\n  },\n  /*\r\n     *   Loads a search form\r\n     */\n  getSearchFormData: function getSearchFormData(params, searchForm) {\n    var self = this;\n    //Check if exist form\n    if (searchForm == undefined || searchForm.id == undefined) {\n      var strMessage = bizagi.localization.getResource(\"render-search-without-form\");\n      var divMessage = $(\"<div>\").append(strMessage);\n      self.dialogBox.dialog(\"close\");\n\n      $(divMessage).dialog({\n        modal: true,\n        buttons: [{\n          text: bizagi.localization.getResource(\"render-form-dialog-box-close\"),\n          click: function click() {\n            $(this).dialog(\"close\");\n          } }],\n\n        maximize: function maximize(e) {\n          console.log(\"please check if executed, which form trigger the event 'dialog.search'\");\n        },\n        unmaximize: function unmaximize(e) {\n          console.log(\"please check if executed, which form trigger the event 'dialog.search'\");\n        } });\n\n\n      return false;\n    }\n\n    return self.dataService.getSearchFormData($.extend(params, {\n      idSearchForm: searchForm.id,\n      url: searchForm.url })).\n\n    pipe(function (data) {\n      // Append search render properties\n      data.form.properties.idRender = params.idRender;\n\n      return data;\n    });\n  },\n\n  dispose: function dispose() {\n    var self = this;\n    self.form.dispose();\n    bizagi.util.dispose(self.buttons);\n    bizagi.util.dispose(self);\n  } });","/**\r\n * Description of file\r\n *\r\n * @author: Jeison Borja\r\n */\n\nbizagi.rendering.dialog.search.extend(\"bizagi.rendering.dialog.searchUser\", {}, {\n  /*\r\n                                                                                   * Constructor\r\n                                                                                   */\n  init: function init(dataService, renderFactory, searchForms, searchParams, otherOptions) {\n    // Call base\n    this._super(dataService, renderFactory, searchForms, searchParams, otherOptions);\n  },\n\n  getSearchFormData: function getSearchFormData(params) {\n    return {\n      \"form\": {\n        \"properties\":\n        {\n          \"id\": \"3ad923cf-f21e-439e-90b5-f2df8ffe4559\",\n          \"type\": \"searchForm\",\n          \"displayName\": \"SearchWFuser\",\n          \"xpathContext\": \"\",\n          \"columns\": [\n          { \"caption\": \"idUser\", \"dataType\": 7, \"xpath\": \"idUser\" },\n          { \"caption\": \"userName\", \"dataType\": 15, \"xpath\": \"userName\" },\n          { \"caption\": \"domain\", \"dataType\": 15, \"xpath\": \"domain\" },\n          { \"caption\": \"fullName\", \"dataType\": 15, \"xpath\": \"fullName\" },\n          { \"caption\": \"enabledForAssignation\", \"dataType\": 5, \"xpath\": \"enabledForAssignation\" },\n          { \"caption\": \"enabled\", \"dataType\": 5, \"xpath\": \"enabled\" }] },\n\n\n        \"elements\": [\n        {\n          \"render\": {\n            \"properties\": {\n              \"id\": \"e0babe1d-7924-4d2a-8fb3-b915b746dbe6\",\n              \"type\": \"searchText\",\n              \"xpath\": \"domain\",\n              \"displayName\": \"domain\",\n              \"dataType\": 15 } } },\n\n\n\n        {\n          \"render\": {\n            \"properties\": {\n              \"id\": \"87b14b2e-992d-4e40-a17b-eecbcbc2466a\",\n              \"type\": \"searchText\",\n              \"xpath\": \"userName\",\n              \"displayName\": \"userName\",\n              \"dataType\": 15 } } },\n\n\n\n        {\n          \"render\": {\n            \"properties\": {\n              \"id\": \"c5d137d9-a392-4d8e-9088-d5eba64b4c2a\",\n              \"type\": \"searchText\",\n              \"xpath\": \"fullName\",\n              \"displayName\": \"fullName\",\n              \"dataType\": 15 } } }],\n\n\n\n\n        \"buttons\": [],\n        \"sessionId\": \"bcy5gtv11xxao4oy4xrlk3o3\",\n        \"pageCacheId\": 1876964702 },\n\n      \"type\": \"form\" };\n\n  } });","/*\r\n*   Name: Bizagi Desktop Letter Dialog Implementation\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will shows a letter inside a popup dialog in order to edit\r\n*/\n\n// Extends itself\n$.Class.extend(\"bizagi.rendering.dialog.letter\", {\n  POPUP_WIDTH: 800,\n  POPUP_HEIGHT: 550 },\n{\n\n  /* \r\n  *   Constructor\r\n  */\n  init: function init(dataService, renderFactory) {\n    this.dataService = dataService;\n    this.renderFactory = renderFactory;\n  },\n\n  /*\r\n     *   Render the letter content\r\n     *   The params are the same that will be send to the ajax service\r\n     *   Returns a deferred\r\n     */\n  render: function render(content) {\n    var self = this;\n    var doc = window.document;\n    var template = self.renderFactory.getTemplate(\"letter.dialog\");\n\n    // Render template\n    var dialog = $.tmpl(template);\n\n    // Append form  in the dialog\n    dialog.appendTo(\"body\", doc);\n\n    // Set height and width manually to adjust to the container\n    var textarea = $(\"#ui-bizagi-rtfeditor\", dialog);\n    textarea.width(this.Class.POPUP_WIDTH - 30);\n    textarea.height(this.Class.POPUP_HEIGHT - 150);\n\n    // Apply plugin\n    new nicEditor({\n      iconsPath: self.dataService.getLetterEditorIconsPath(),\n      fullPanel: true }).\n    panelInstance('ui-bizagi-rtfeditor');\n\n    // Create a templateParts array to hold the full html separated by body tags\n    self.templateParts = content.split(/(<body>|<\\/body>)/ig);\n\n    // Set data\n    nicEditors.findEditor(\"ui-bizagi-rtfeditor\").setContent(content);\n\n    // Create dialog box\n    return self.showDialogBox(dialog);\n  },\n\n  /*\r\n     *   Shows the dialog box in the browser\r\n     *   Returns a promise that the dialog will be closed\r\n     */\n  showDialogBox: function showDialogBox(dialogBox) {\n    var self = this;\n\n    // Define buttons\n    var buttons = {};\n    var defer = new $.Deferred();\n\n    buttons[bizagi.localization.getResource(\"render-letter-dialog-box-save\")] = function () {\n      var newContent = nicEditors.findEditor(\"ui-bizagi-rtfeditor\").getContent();\n\n      // Destroy dialog\n      dialogBox.dialog('destroy');\n      dialogBox.remove();\n\n      // Append content to template, because the plugine removed html, head and body tags\n      //  - Actually there is an incosistent behaviour between IE8 and IE9\n      //  - In IE8, the templateParts doesn't include the <body> in the splitted array\n      //  - In IE9, the templateParts includes the <body> in the splitted array\n      if (self.templateParts[1] == \"<body>\") {\n\n        // Remove empty headers, rare behaviour in IE9\n        self.templateParts[2] = newContent.replaceAll(\"<header></header>\", \"\");\n\n        // Return new content\n        defer.resolve(self.templateParts.join(\"\"));\n\n      } else {\n        // Return new content\n        defer.resolve(self.templateParts[0] + \"<body>\" + newContent + \"</body>\" + (self.templateParts.length > 2 ? self.templateParts[2] : \"\"));\n      }\n\n\n    };\n    buttons[bizagi.localization.getResource(\"render-letter-dialog-box-cancel\")] = function () {\n      dialogBox.dialog('close');\n    };\n\n    // Creates a dialog\n    dialogBox.dialog({\n      width: this.Class.POPUP_WIDTH,\n      height: this.Class.POPUP_HEIGHT,\n      title: bizagi.localization.getResource(\"render-letter-dialog-title\"),\n      modal: true,\n      buttons: buttons,\n      close: function close(ev, ui) {\n        dialogBox.dialog('destroy');\n        dialogBox.remove();\n        defer.reject();\n      } });\n\n\n    // Return promise\n    return defer.promise();\n  } });","/**\r\n *   Name: Bizagi Desktop Form Extension\r\n *   Author: Diego Parra\r\n *   Comments:\r\n *   -   This script will redefine the form class to adjust to desktop devices\r\n *   -   Will apply a desktop form template\r\n */\n\n// Extends from container desktop base\nbizagi.rendering.desktop.container.extend(\"bizagi.rendering.desktop.form\", bizagi.rendering.form.prototype);\n// Auto extend\nbizagi.rendering.desktop.form.extend(\"bizagi.rendering.desktop.form\", {}, {\n\n  /* \r\n                                                                            *   Template method to implement in each device to customize each container after processed\r\n                                                                            */\n  postRenderContainer: function postRenderContainer(container) {\n    var self = this;\n\n    // Apply plugin\n    if (self.useQuickActions) {\n      self.initFormButton();\n    }\n\n    // Call base\n    self._super(container);\n\n    if (self.getMode() !== \"execution\") return;\n\n    // Style buttons\n    var buttons = self.getButtons();\n    buttons.button();\n\n    //Set button length\n    var lengthButtons = buttons ? buttons.length : 0;\n\n    if (lengthButtons && self.params.type === \"form\" && self.params.isEntityForm !== true) {\n\n      $(document).data('auto-save', self.properties.id);\n      self.configureBindAutoSave(function (deferredSave) {\n        self.autoSaveEvents(deferredSave);\n      });\n\n      //bind event beforeunload\n      self.beforeUnloadFunction = function (e) {\n\n        var newData = {};\n        self.collectRenderValues(newData);\n        //if there are changes in the form show a message\n        if (!$.isEmptyObject(newData) && $(document).data('auto-save')) {\n          return bizagi.localization.getResource(\"confirmation-savebox-message2\");\n        }\n        return;\n      };\n      $(window).unbind('beforeunload').bind('beforeunload', self.beforeUnloadFunction);\n    } else {\n      if ($._data(document)['events'] && !$._data(document)['events']['save-form']) {\n        self.configureBindAutoSave(function (deferredSave) {\n          deferredSave.resolve();\n        });\n      }\n    }\n\n    self.buildProcessPath();\n    var ecmContainer = typeof isWebpart !== \"undefined\" ? $(document) : $(\"#ui-bizagi-wp-app-render-form-content\");\n    ecmContainer.scroll(function () {\n      $(\".modal-ecm\", this).hide();\n    });\n  },\n\n  /**\r\n      * Configure autoSave with callback\r\n      * @param callback\r\n      */\n  configureBindAutoSave: function configureBindAutoSave(callback) {\n    var self = this;\n\n    //bind event auto-save\n    self.autoSaveFunction = function (e, deferredSave) {\n      callback(deferredSave);\n    };\n\n    //Keeps the reference of the function required for handling autoSave\n    if (self.haveAutosaveAssociated()) {\n      // Unbind previous events in order to prevent propagation //QAF-2521\n      $(document).unbind(\"save-form\", self.saveFormDelegate);\n    } else {\n      self.saveFormDelegate = $.proxy(self.autoSaveFunction, self);\n    }\n    // Bind event with actual reference of form\n    $(document).unbind(\"save-form\").bind(\"save-form\", {\n      idAutoSave: self.getIdentifierFormForAutosave(),\n      functionSaveFormDelegate: self.saveFormDelegate },\n    self.saveFormDelegate);\n  },\n\n  /**\r\n      * Call from child widgets\r\n      */\n  unbindAutoSaveForm: function unbindAutoSaveForm() {\n    var self = this;\n    if (self.saveFormDelegate) {\n      $(document).unbind(\"save-form\", self.saveFormDelegate);\n    }\n  },\n\n  /**\r\n      * Get a identifier for knows if form have autoSave associated\r\n      * @returns {*}\r\n      */\n  getIdentifierFormForAutosave: function getIdentifierFormForAutosave() {\n    var self = this;\n    return self.properties.id ? self.properties.id.concat(\"_\" + self.properties.uniqueId) : self.properties.uniqueId;\n  },\n\n  /**\r\n      * Determine if form have autosave associated, if yes, rewrite function saveFormDelegate\r\n      * @returns {boolean}\r\n      */\n  haveAutosaveAssociated: function haveAutosaveAssociated() {\n    var result = false;\n    var self = this;\n    var autoSaveIdentifier = self.getIdentifierFormForAutosave();\n    var autoSaveHandlers = $._data($(document)[0], 'events')[\"save-form\"] || [];\n    for (var i = 0, length = autoSaveHandlers.length; i < length; i += 1) {\n      if (autoSaveHandlers[i].data.idAutoSave === autoSaveIdentifier) {\n        self.saveFormDelegate = autoSaveHandlers[i].data.functionSaveFormDelegate;\n        result = true;\n        break;\n      }\n    }\n    return result;\n  },\n\n  /*\r\n     * Auto Save Events\r\n     */\n  autoSaveEvents: function autoSaveEvents(deferredSave, saveBox) {\n    var self = this;\n    var data = {};\n    var changes = [];\n    var form = self.getFormContainer();\n    form.hasChanged(changes);\n\n    /* \r\n                              *saving changes to validate or not the contents into a table\r\n                              */\n    if (changes.length > 0) {\n\n      $.when(bizagi.showSaveBox(bizagi.localization.getResource(\"confirmation-savebox-message1\"), \"Bizagi\", \"warning\", self.properties.orientation)).done(function () {\n        self.collectRenderValues(data);\n        $.when(self.saveForm(data)).done(function () {\n          //unbinding the save-form\n          if (self.saveFormDelegate) {\n            $(document).unbind(\"save-form\", self.saveFormDelegate);\n          }\n          if (bizagi.util.isSharepointContext())\n          $(document).data('auto-save', '');\n\n          deferredSave.resolve();\n        });\n      }).fail(function (params) {\n        if (params == \"cancel\") {\n          deferredSave.reject();\n        } else {\n          deferredSave.resolve();\n\n          //unbinding the save-form function in case if is still bound\n          if (self.saveFormDelegate)\n          $(document).unbind(\"save-form\", self.saveFormDelegate);\n\n          if (bizagi.util.isSharepointContext())\n          $(document).data('auto-save', '');\n        }\n      });\n    } else {\n      //unbinding the save-form function in case if is still bound\n      if (self.saveFormDelegate)\n      $(document).unbind(\"save-form\", self.saveFormDelegate);\n\n      deferredSave.resolve();\n    }\n  },\n\n  /*\r\n     *   Template method to get the buttons objects \r\n     */\n  getButtons: function getButtons() {\n    var self = this;\n    var container = self.container;\n\n    return $(\".ui-bizagi-button-container .ui-bizagi-button\", container);\n  },\n\n  /*\r\n     *   Template method to implement in each device to customize the container's behaviour to show layout\r\n     */\n  configureLayoutView: function configureLayoutView() {\n    // Do nothing\n  },\n\n  /*\r\n     *   Dispose the class so we can detect when a class is invalid already\r\n     */\n  dispose: function dispose() {\n    var self = this;\n\n    // Remove  the document handlers for auto-save\n    $(window).unbind('beforeunload', self.beforeUnloadFunction);\n\n    $(document).unbind(\"save-form\", self.saveFormDelegate);\n\n    // Call base\n    self._super();\n  },\n  /*\r\n     *   Submits all the form to the server and returns a deferred to check when the process finishes\r\n     */\n  saveForm: function saveForm(data) {\n    var self = this;\n\n    // Check is offline form\n    var isOfflineForm = bizagi.util.isOfflineForm({ context: self });\n\n    // Collect data\n    data = self.collectRenderValuesForSubmit(data);\n\n    // Check if there are deferreds to wait\n    var deferredsToWait = null;\n    if (data.deferreds) {\n      deferredsToWait = $.when.apply($, data.deferreds);\n      delete data.deferreds;\n    }\n\n    // Wait for deferreds\n    return $.when(deferredsToWait).pipe(function () {\n      self.startLoading();\n\n      // Submit the form\n      return self.dataService.submitData({\n        action: \"SAVE\",\n        data: data,\n        xpathContext: self.properties.xpathContext,\n        idPageCache: self.properties.idPageCache,\n        isOfflineForm: isOfflineForm || false }).\n      always(self.endLoading.bind(self));\n    });\n  },\n  /*\r\n     * Gets changes of current navigation form\r\n     */\n  getChanges: function getChanges() {\n    var self = this;\n    var data = {};\n\n    if (typeof self.collectRenderValues != \"undefined\") {\n      self.collectRenderValues(data);\n    }\n\n    return data;\n  },\n  /*\r\n      *build path process\r\n      */\n  buildProcessPath: function buildProcessPath(container) {\n    var self = this;\n    var properties = self.properties;\n    var mode = self.getMode();\n    var queryForm = self.getFormType() == \"queryForm\";\n    var summaryForm = self.params.summaryForm || false;\n    var globalForm = self.properties.displayAsReadOnly || false;\n    if (mode == \"execution\" && !queryForm && !summaryForm && !globalForm && self.properties.processPath && self.properties.processPath.length > 0) {\n      var template = self.renderFactory.getTemplate(\"form-process-path\");\n      var html = $.fasttmpl(template, { processPath: properties.processPath });\n      self.pathProcess = html;\n    } else {\n      self.pathProcess = \"\";\n    }\n  },\n\n  /**\r\n      * Initialize the form buttons\r\n      */\n  initFormButton: function initFormButton() {\n    var self = this;\n    var form = self.getFormContainer();\n    var maxButtonSupported = bizagi.override && bizagi.override.maxButtonForQuickActions > 0 ? bizagi.override.maxButtonForQuickActions : 6;\n    var buttons = self.buttons || [];\n    var buttonsToShow = self.getListWithPriority(buttons, maxButtonSupported);\n\n    if (buttonsToShow.length > 0) {\n      $(\".ui-bizagi-button-container.bz-form-buttons\", form.container).formButtons({\n        maxButtons: maxButtonSupported,\n        buttons: buttonsToShow,\n        click: function click(element, params) {\n          self.processQuickButton(params.ordinal);\n        } });\n\n    }\n  },\n\n  getListWithPriority: function getListWithPriority(listButtons, maxButtonSupported) {\n    return listButtons.filter(function (item) {\n      return bizagi.util.parseBoolean(item.visible) !== false;\n    }).map(function (item, index) {\n      return Object.assign(item, {\n        visible: bizagi.util.parseBoolean(item.visible) !== false,\n        additional: index + 1 > maxButtonSupported,\n        priority: item.quickAction !== true ? 1 : index,\n        ranked: true,\n        index: index });\n\n    });\n  } });","/*\r\n*   Name: Bizagi Desktop Panel Extension\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will redefine the panel class to adjust to desktop devices\r\n*/\n\n// Extends from container desktop base\nbizagi.rendering.desktop.container.extend(\"bizagi.rendering.desktop.panel\", bizagi.rendering.panel.prototype);\n// Extends itself\nbizagi.rendering.desktop.panel.extend(\"bizagi.rendering.desktop.panel\", {}, {});","/*\r\n*   Name: Bizagi Desktop ContentPanel Extension\r\n*   Author: David Romero\r\n*   Comments:\r\n*   -   This script will redefine the content panel class to adjust to desktop devices\r\n*/\n\n// Extends from container desktop base\nbizagi.rendering.desktop.container.extend(\"bizagi.rendering.desktop.contentPanel\", bizagi.rendering.contentPanel.prototype);\n// Extends itself\nbizagi.rendering.desktop.contentPanel.extend(\"bizagi.rendering.desktop.contentPanel\", {}, {});","/**\r\n *   Name: Bizagi Desktop Nested Form Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define a nested form container class for all devices\r\n */\n\n// Extends from container desktop panel base\nbizagi.rendering.desktop.panel.extend(\"bizagi.rendering.desktop.nestedForm\", {}, {\n\n  /*\r\n                                                                                   *   Template method to implement in each device to customize the render's behaviour when rendering in design mode\r\n                                                                                   */\n  configureDesignView: function configureDesignView() {\n    var self = this;\n    var properties = self.properties;\n    var container = self.container;\n\n    container.removeClass(\"ui-bizagi-container-panel\");\n    container.addClass(\"ui-bizagi-container-nestedform\");\n\n    var title = $(\"<span class= 'ui-bizagi-container-nestedform-title'/>\");\n    title.text(\"Nested Form: \" + properties.formDisplayName);\n    container.prepend(title);\n  } });","/*\r\n*   Name: Bizagi Desktop Tab Container Extension\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will redefine the tab class to adjust to desktop devices\r\n*/\n\n// Extends from container desktop base\nbizagi.rendering.desktop.container.extend(\"bizagi.rendering.desktop.tab\", bizagi.rendering.tab.prototype);\n// Auto extend\nbizagi.rendering.desktop.tab.extend(\"bizagi.rendering.desktop.tab\", {}, {\n\n  /* \r\n                                                                          *   Template method to implement in each device to customize each container after processed\r\n                                                                          */\n  postRenderContainer: function postRenderContainer(tab) {\n    var self = this;\n\n    // Call base\n    self._super(tab);\n\n    // Apply tabs widget\n    tab.tabs({\n      active: self.activeTab,\n      activate: function activate(event, ui) {\n        self.children[self.activeTab].visibleTab();\n        // BUGFIX for grids inside tabs\n        var timeoutResize = setTimeout(\n        function () {\n          self.resize({ width: self.container.width(), height: self.container.height() });\n          if (typeof self.getParams() != \"undefined\")\n          if (self.getParams().context == \"sharepoint\" || window.self !== window.top)\n          self.resizeInPopUpHTML();\n          clearTimeout(timeoutResize);\n        },\n        50);\n      },\n      beforeActivate: function beforeActivate(event, ui) {\n        var index = ui.newTab.index();\n\n        self.setActiveTab(index);\n      } });\n\n\n    var timeoutHeader = setTimeout(function () {\n      self.children.forEach(function (tabItem) {\n        var properties = tabItem.properties;\n        if (properties.tooltip) {\n          var tabHeader$ = $(\"a[href=#ui-bizagi-tab-\" + properties.id + \"]\", tab);\n          tabHeader$.tooltip({\n            content: tabHeader$.attr(\"title\"),\n            position: {\n              at: \"center top-55\" } });\n\n\n        }\n      });\n      clearTimeout(timeoutHeader);\n    }, 10);\n\n  },\n  resizeInPopUpHTML: function resizeInPopUpHTML() {\n    var self = this;\n    if ($(\".activitiFormContainer\").length > 0) {\n      var heightActivitiFormContainer = $(\".activitiFormContainer\").height() || 0;\n      var renderForm = $(\".activitiFormContainer #ui-bizagi-webpart-render-container\");\n      var buttonContainer = $(\".ui-bizagi-button-container\", \".activitiFormContainer\");\n      var params = self.getParams();\n      if (params.idWorkitem || buttonContainer.length > 0) {\n        //display buttons\n        var heightButtonContainer = buttonContainer.height() || 0;\n        renderForm.height(heightActivitiFormContainer - 110 - heightButtonContainer);\n      } else {\n        //NOT display buttons\n        renderForm.height(heightActivitiFormContainer - 110);\n      }\n    }\n  },\n  /*\r\n     *   Template method to implement in each device to customize the container's behaviour to show layout\r\n     */\n  configureLayoutView: function configureLayoutView() {\n    // Do nothing\n  } });","/**\r\n *   Name: Bizagi Desktop TabItem Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the tab item class to adjust to desktop devices\r\n */\n\n// Extends from container desktop base\nbizagi.rendering.desktop.container.extend(\"bizagi.rendering.desktop.tabItem\", bizagi.rendering.tabItem.prototype);\n// Extends itself\nbizagi.rendering.desktop.tabItem.extend(\"bizagi.rendering.desktop.tabItem\", {}, {\n\n  /*\r\n                                                                                  *   Constructor\r\n                                                                                  */\n  init: function init(params) {\n    var self = this;\n\n    // Call base\n    this._super(params);\n\n    // Set tab ready deferred\n    self.tabReadyDeferred = new $.Deferred();\n    self.loadingDeferred = new $.Deferred();\n    self.tabActiveDeferred = new $.Deferred();\n  },\n\n  /* \r\n     *   Resizes the container to adjust it to the container\r\n     */\n  resize: function resize(size) {\n    var self = this,\n    container = self.container;\n    var width = container.width();\n\n    // Set a timeout to resize the tab only when the tab is visible\n    // Will try only ten times to avoid infinite cycles\n    var counter = 0;\n    var resizeTimeout = function resizeTimeout() {\n      if (counter > 10) return;\n      if (container.is(\":visible\")) {\n        $.each(self.children, function (i, child) {\n          child.resize({ width: width });\n        });\n      } else {\n        counter++;\n        var timeoutResize = setTimeout(function () {\n          resizeTimeout();\n          clearTimeout(timeoutResize);\n        }, 200);\n      }\n    };\n    $.when(self.ready()).done(function () {\n      resizeTimeout();\n    });\n  },\n\n  /* \r\n     *   Change selected item \r\n     */\n  setAsActiveContainer: function setAsActiveContainer(argument) {\n    var self = this;\n\n    $.when(self.ready()).done(function () {\n      // Changes item\n      var tabContainer = self.parent;\n      if (tabContainer.container.data(\"ui-tabs\")) {\n        tabContainer.container.tabs(\"option\", \"active\", self.container.data(\"tab-counter\"));\n      }\n    });\n  },\n\n  /*\r\n     *   Fires when the tab is selected manually\r\n     */\n  activate: function activate() {\n    this._super();\n    if (this.loadingDeferred) this.loadingDeferred.resolve();\n  },\n\n  /*\r\n     *   Fires when the tab is visible\r\n     */\n  visibleTab: function visibleTab() {\n    if (this.tabActiveDeferred) this.tabActiveDeferred.resolve();\n  },\n\n  /* \r\n     *   Focus on container\r\n     */\n  focus: function focus() {\n    // Activate the tab if it hasn't been loaded\n    this.activate();\n\n    // Set this tab as an active container\n    this.setAsActiveContainer();\n\n    // Call base\n    this._super();\n  },\n\n  /*\r\n     * Renders the tab content\r\n     */\n  renderTabContent: function renderTabContent(html) {\n    var self = this;\n    var properties = this.properties;\n\n    var form = self.getFormContainer();\n\n    // Render children\n    if (properties.loadOnDemand === undefined || properties.loadOnDemand == false || form.innerTabsLoading || form.params.printversion || self.canSkipThisFormType(form.properties.type)) {\n      html = self.replaceChildrenHtml(html, self.renderChildrenHtml());\n      self.tabReadyDeferred.resolve();\n      self.tabActiveDeferred.resolve();\n      return html;\n    } else {\n      // Defer execution for a while to improve first tab pkerformance\n      self.startLoading();\n\n      // Start a timeout, when the timeout finishes, it resolves the deferred therefore loading the tab\n      if (self.getMode() == \"execution\") {\n        var timeoutLoading = setTimeout(function () {\n          if (self.loadingDeferred) {\n            self.loadingDeferred.resolve();\n          }\n          clearTimeout(timeoutLoading);\n        }, 10500);\n      }\n\n      $.when(self.loadingDeferred.promise()).\n      done(function () {\n        if (!self.isDisposed()) {\n          $.when(self.parent.ready()).done(function () {\n            self.replaceChildrenTag(self.container, self.renderChildrenHtml());\n            self.postRenderContainer(self.container);\n            self.endLoading();\n\n            // Resolve tab deferred when tab is ready\n            self.tabReadyDeferred.resolve();\n            self.tabActiveDeferred.resolve();\n          });\n        } else {\n          // Reject tab deferred when tab is not valid\n          self.tabReadyDeferred.reject();\n          self.tabActiveDeferred.reject();\n        }\n      });\n\n      // Set a div in order to asynchonously resolve this\n      html = self.replaceChildrenHtml(html, '<div class=\"children\"/>');\n      return html;\n    }\n  },\n\n  canSkipThisFormType: function canSkipThisFormType(formType) {\n    var self = this;\n    var mode = self.getMode();\n\n    return mode == 'execution' ? /^queryForm$/i.test(formType) : false;\n  },\n  /*\r\n     *   Returns promise to hold any execution until the content is ready\r\n     */\n  ready: function ready(argument) {\n    var self = this;\n\n    if (bizagi.util.parseBoolean(argument) && self.container && self.container.length) {\n      if (self.loadingDeferred) {\n        self.loadingDeferred.resolve();\n      }\n      $.when(self.tabReadyDeferred.promise()).done(function () {\n        self.activate();\n      });\n    }\n\n    if (bizagi.util.parseBoolean(argument)) {\n      if (!(self.container && self.container.length)) {\n        var id = setInterval(function () {\n          if (self.container && self.container.length) {\n            clearInterval(id);\n            if (self.loadingDeferred) {\n              self.loadingDeferred.resolve();\n            }\n          }\n        }, 50);\n      }\n    }\n\n    // Merge promises\n    return $.when(\n    self.tabReadyDeferred.promise(),\n    self.parent.ready(),\n    self.tabActiveDeferred.promise());\n\n  },\n\n  /* \r\n     *   Hides / Show container \r\n     */\n  changeVisibility: function changeVisibility(argument) {\n    var self = this;\n    var properties = self.properties;\n\n    self._super(argument);\n\n    var tabContainer = self.parent.container;\n    var id = \"ui-bizagi-tab-\" + properties.id;\n    var header = $(\"ul li[aria-controls = '\" + id + \"']\", tabContainer);\n    var activeTab = self.parent.getActiveTab();\n\n    $.when(self.ready()).\n    done(function () {\n      // Hide - show the render\n      if (properties.visible) {\n        header && header.show();\n        self.setAsActiveContainer();\n      } else {\n        if (self.getMode() === \"execution\") {\n          header && header.hide();\n        }\n      }\n    }).\n    always(function () {\n      if (tabContainer.data(\"ui-tabs\")) {\n        tabContainer.tabs(\"option\", \"active\", activeTab);\n      }\n    });\n\n  },\n\n  afterToRefresh: function afterToRefresh() {\n    this._super();\n    $(this.parent.container).tabs(\"refresh\");\n  } });","/*\r\n*   Name: Bizagi Desktop Horizontal Container Extension\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will redefine the horizontal container class to adjust to desktop devices\r\n*/\n\n// Extends from container desktop base\nbizagi.rendering.desktop.container.extend(\"bizagi.rendering.desktop.horizontal\", bizagi.rendering.horizontal.prototype);\n// Auto extend\nbizagi.rendering.desktop.horizontal.extend(\"bizagi.rendering.desktop.horizontal\", {}, {\n\n  /* \r\n                                                                                        *   Template method to implement in each device to customize each container after processed\r\n                                                                                        */\n  postRenderContainer: function postRenderContainer(container) {\n    var self = this;\n    var children = self.children;\n    var iCount = children.length;\n\n    // Call base\n    self._super(container);\n\n    // Process each child\n    $.each(children, function (i, child) {\n      // Process width\n      var renderWidth = child.properties.width;\n      if (renderWidth == null || renderWidth.length == 0) {\n        // Set default size\n        renderWidth = 100 / iCount;\n      } else {\n        // Set custom size\n        renderWidth = bizagi.util.percent2Number(renderWidth);\n      }\n\n      (function (j, innerChild, jCount) {\n        $.when(innerChild.ready()).done(function () {\n          var renderedElement = innerChild.getRenderedElement();\n          // Set width\n          if (j != jCount - 1) {\n            renderedElement.css({ width: renderWidth + \"%\" });\n          } else {\n            renderedElement.css({ width: renderWidth + \"%\" });\n          }\n\n          renderedElement.addClass('ui-panel-area');\n\n          // Set class for last render\n          if (j == jCount - 1) {\n            renderedElement.addClass(\"ui-bizagi-render-last\");\n          }\n        });\n      })(i, child, iCount);\n    });\n  } });","/**\r\n *   Name: Bizagi Desktop Layout Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the layout class to adjust to desktop devices\r\n */\n\n// Extends from container desktop base\nbizagi.rendering.desktop.container.extend(\"bizagi.rendering.desktop.layout\", bizagi.rendering.layout.prototype);\n// Extends itself\nbizagi.rendering.desktop.layout.extend(\"bizagi.rendering.desktop.layout\", {}, {});","/*\r\n*   Name: Bizagi Desktop Accordion Container Extension\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will redefine the accordion class to adjust to desktop devices\r\n*/\n\n// Extends from container desktop base\nbizagi.rendering.desktop.container.extend(\"bizagi.rendering.desktop.accordion\", bizagi.rendering.accordion.prototype);\n// Extends itself\nbizagi.rendering.desktop.accordion.extend(\"bizagi.rendering.desktop.accordion\", {}, {\n\n  /* \r\n                                                                                      *   Template method to implement in each device to customize each container after processed\r\n                                                                                      */\n  postRenderContainer: function postRenderContainer(accordion) {\n    var self = this;\n\n    // Call base\n    self._super(accordion);\n\n    // Apply accordion widget\n    // Enable accordeon\n    accordion.accordion({\n      autoHeight: false });\n\n  },\n\n  /*\r\n     *   Template method to implement in each device to customize the container's behaviour to show layout\r\n     */\n  configureLayoutView: function configureLayoutView() {\n    // Do nothing\n  } });","/*\r\n*   Name: Bizagi Desktop AccordionItem Extension\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will redefine the accordion item class to adjust to desktop devices\r\n*/\n\n// Extends from container desktop base\nbizagi.rendering.desktop.container.extend(\"bizagi.rendering.desktop.accordionItem\", bizagi.rendering.accordionItem.prototype);\n// Extends itself\nbizagi.rendering.desktop.accordionItem.extend(\"bizagi.rendering.desktop.accordionItem\", {}, {\n\n  /* \r\n                                                                                              *   Change selected item \r\n                                                                                              */\n  setAsActiveContainer: function setAsActiveContainer(argument) {\n    var self = this;\n\n    $.when(self.ready()).\n    done(function () {\n      var accordionContainer = self.parent;\n\n      // Changes item\n      accordionContainer.container.accordion(\"option\", \"active\", self.properties.ordinal);\n    });\n  },\n\n  /* \r\n     *   Focus on container\r\n     */\n  focus: function focus() {\n    var self = this;\n\n    self.activate();\n    self.setAsActiveContainer();\n\n    // Call base\n    this._super();\n  } });","/*\r\n*   Name: Bizagi Desktop Group Extension\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will redefine the group class to adjust to desktop devices\r\n*/\n\n// Extends from container desktop base\nbizagi.rendering.desktop.container.extend(\"bizagi.rendering.desktop.group\", bizagi.rendering.group.prototype);\n// Auto extend\nbizagi.rendering.desktop.group.extend(\"bizagi.rendering.desktop.group\", {}, {\n\n  /**\r\n                                                                               * Template method to implement in each device to customize each container after processed\r\n                                                                               * @param {} group \r\n                                                                               * @returns {} \r\n                                                                               */\n  postRenderContainer: function postRenderContainer(group) {\n    var self = this;\n    var properties = self.properties;\n    var styleSufix = properties.orientation == \"rtl\" ? \"-rtl\" : \"\";\n\n    // Call base\n    self._super(group);\n\n    var icon = $(\".ui-icon\", $(\".ui-bizagi-container-group-header:first\", self.container));\n    var header = $(\".ui-bizagi-container-group-header\", self.container);\n\n    // Define expanded property\n    if (bizagi.util.parseBoolean(properties.collapse)) {\n      properties.expanded = false;\n      icon.addClass(\"ui-state-collapse\" + styleSufix).removeClass(\"ui-state-expand\" + styleSufix);\n    } else {\n      properties.expanded = true;\n      icon.addClass(\"ui-state-expand\" + styleSufix).removeClass(\"ui-state-collapse\" + styleSufix);\n    }\n  },\n\n  /**\r\n      * Template method to implement in each device to customize the container's behaviour to add handlers\r\n      * @returns {} \r\n      */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    var properties = self.properties;\n    var styleSufix = properties.orientation == \"rtl\" ? \"-rtl\" : \"\";\n    var group = self.container;\n    var icon;\n\n    // Delegate event click\n    var header = $(\".ui-bizagi-container-group-header:first\", group);\n    $(header).click(function (e) {\n      if (e.preventDefault)\n      e.preventDefault();\n\n      icon = $(\".ui-icon\", group);\n      icon.toggleClass(\"ui-icon-triangle-1-s ui-icon-triangle-1-n\");\n\n      $(\".ui-bizagi-container-group-wrapper:first\", group).toggle();\n\n      if (properties.expanded) {\n        properties.expanded = false;\n        icon.addClass(\"ui-state-collapse\" + styleSufix).removeClass(\"ui-state-expand\" + styleSufix);\n        $(this).addClass(\"group-collapse\").removeClass(\"group-expand\");\n      } else {\n        properties.expanded = true;\n        icon.addClass(\"ui-state-expand\" + styleSufix).removeClass(\"ui-state-collapse\" + styleSufix);\n        $(this).addClass(\"group-expand\").removeClass(\"group-collapse\");\n      }\n    });\n  },\n\n  /**\r\n     * Check if group its open\r\n     * \r\n     * @return boolean\r\n     */\n  isOpen: function isOpen() {\n    if (this.properties.expanded) {\n      return true;\n    } else {\n      return false;\n    }\n  },\n\n  /**\r\n      * Focus on container     \r\n      * @returns {} \r\n      */\n  focus: function focus() {\n    // Expand container\n    this.expand();\n\n    // Call base\n    this._super();\n  },\n\n  /**\r\n      * Expands group container \r\n      * @returns {} \r\n      */\n  expand: function expand() {\n    var self = this;\n    var group = self.container;\n    var header = $(\".ui-bizagi-container-group-header:first\", group);\n\n    if (!self.isOpen())\n    $(header).trigger(\"click\");\n  },\n\n  /**\r\n      * Collapses group container \r\n      * @returns {} \r\n      */\n  collapse: function collapse() {\n    var self = this;\n    var group = self.container;\n    var header = $(\".ui-bizagi-container-group-header:first\", group);\n\n    if (self.isOpen())\n    $(header).trigger(\"click\");\n  },\n\n  /**     \r\n      * Expands or collapse the container \r\n      * @param {} argument      \r\n      */\n  toogleContainer: function toogleContainer(argument) {\n    var self = this;\n\n    if (argument) {\n      self.expand();\n    } else {\n      self.collapse();\n    }\n  } });","/*\r\n *   Name: Bizagi Desktop Section Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the section class to adjust to desktop devices\r\n */\n\n// Extends from container desktop base\nbizagi.rendering.desktop.container.extend(\"bizagi.rendering.desktop.section\", bizagi.rendering.section.prototype);\n// Auto extend\nbizagi.rendering.desktop.section.extend(\"bizagi.rendering.desktop.section\", {}, {\n\n\n  /**\r\n                                                                                   * Render the trigger of the section.\r\n                                                                                   * @returns string with html code.\r\n                                                                                   */\n  renderContainer: function renderContainer() {\n    var self = this;\n    var properties = this.properties;\n    var template = this.renderFactory.getTemplate(\"section-header\");\n\n    // Render the section trigger\n    var html = $.fasttmpl(template, {\n      displayName: properties.displayName,\n      editable: properties.editable,\n      orientation: self.getOrientation(),\n      uniqueId: properties.uniqueId,\n      isDesign: self.getMode() !== \"execution\",\n      messageValidation: properties.messageValidation,\n      guid: properties.guid,\n      displayAs: properties.displayAs });\n\n    this.sectionContent = $(this.renderSectionContent())[0];\n    return html;\n  },\n\n  /**\r\n      * Render the content of the section.\r\n      * @returns string with html code. \r\n      */\n  renderSectionContent: function renderSectionContent() {\n    var self = this;\n    var template = this.renderFactory.getTemplate(\"section-content\");\n    var properties = this.properties;\n    var breadCrumb = this.getBreadcrumb();\n    this.orderSection = breadCrumb.length - 1;\n    var html = $.fasttmpl(template, {\n      displayName: properties.displayName,\n      editable: properties.editable,\n      orientation: self.getOrientation(),\n      uniqueId: properties.uniqueId,\n      isDesign: self.getMode() !== \"execution\",\n      messageValidation: properties.messageValidation,\n      guid: properties.guid,\n      breadCrumb: breadCrumb });\n\n\n    html = this.replaceChildrenHtml(html, this.renderChildrenHtml());\n    return html;\n  },\n\n  /**\r\n      * Template method to implement in each device to customize each container after processed\r\n      * @param {} section \r\n      * @returns {} \r\n      */\n  postRenderContainer: function postRenderContainer(section) {\n    section.closest(\".ui-bizagi-container-form-wrapper-animation\").append(this.sectionContent);\n    // Call base\n    this._super(section);\n    if (this.isActive()) this.openAutomatically();\n  },\n\n  /**\r\n      * Template method to implement in each device to customize the container's behaviour to add handlers\r\n      */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    var container = self.container[0];\n    var form = self.getFormContainer();\n    var printVersion = form.params && form.params.printversion;\n\n    var header = container.querySelector(\".ui-bizagi-container-section-header\");\n    var breadCrumb = this.sectionContent.querySelector(\".ui-bizagi-container-section-breadcrumb\");\n    var breadCrumbElements = breadCrumb.querySelectorAll(\".ui-bizagi-container-section-breadcrumb-element\");\n\n    this.openSectionFromClick = this.openSectionFromClick.bind(this);\n    if (!printVersion) {\n      header.addEventListener(\"click\", this.openSectionFromClick);\n      Array.prototype.forEach.call(breadCrumbElements, function (element) {\n        var stepsBack = parseInt(element.getAttribute('data-steps-back'));\n        if (stepsBack !== 0)\n        element.addEventListener('click', function () {\n          self.goBack(stepsBack);\n        });\n      });\n    } else {\n      header.classList.add(\"ui-bizagi-section-print\");\n    }\n  },\n\n  /**\r\n      * Execute the post render method for section's children\r\n      * @param {*} container \r\n      */\n  executeChildrenPostRender: function executeChildrenPostRender(container) {\n    var self = this;\n    var childrenElements = $(\".ui-bizagi-container-section-children\", this.sectionContent).children();\n\n    $.each(childrenElements, function (i, childElement) {\n      childElement = $(childElement);\n      var id = Number(childElement.data(\"unique-id\"));\n      if (id) {\n        var child = self.childrenHash[id];\n        if (child) {\n          var type = child.getElementType();\n          if (type == bizagi.rendering.element.ELEMENT_TYPE_RENDER)\n          child.postRenderElement(childElement);\n          if (type == bizagi.rendering.element.ELEMENT_TYPE_CONTAINER)\n          child.postRenderContainer(childElement);\n        }\n      } else {\n        self.executeChildrenPostRender(childElement);\n      }\n    });\n  },\n\n  /**\r\n      * Open section from a manual click\r\n      * @param ev - ClickEvent object\r\n      */\n  openSectionFromClick: function openSectionFromClick(ev) {\n    var self = this;\n    var container = self.container[0];\n    var containerAnimation = this.sectionContent.parentElement;\n    var headerSection = container.querySelector(\".ui-bizagi-container-section-header\");\n    headerSection.removeEventListener(\"click\", this.openSectionFromClick);\n    if (!bizagi.util.isIE() && this.getFormOrientation() !== \"rtl\") containerAnimation.scrollIntoView({ behavior: \"smooth\", block: \"start\" });\n    this.openSection().then(function () {\n      headerSection.addEventListener(\"click\", self.openSectionFromClick);\n    });\n    this.setAsActive();\n  },\n\n  /**\r\n      * Expand a section with animation\r\n      * @return promise when the section is expanded\r\n      */\n  openSection: function openSection() {\n    var defer = new $.Deferred();\n    var containerAnimation = this.sectionContent.parentElement;\n    var direction = this.getFormOrientation() === \"rtl\" ? 1 : -1;\n    var sectionParent = this.getSectionParent();\n    var sectionProperties = sectionParent && sectionParent.properties || {};\n    var sectionParams = sectionParent && sectionParent.params || {};\n    if (sectionProperties.type === \"form\" || sectionParams.type === \"form\") sectionParent = this.getFormParent(sectionParent);\n    containerAnimation.classList.remove('ui-bizagi-container-form-wrapper-animation-inactive');\n    containerAnimation.style.transform = 'translateX(' + 100 * this.orderSection * direction + '%)';\n    setTimeout(function () {\n      defer.resolve();\n    }, 600);\n\n    this.removeAnimationClasses(sectionParent.sectionContent);\n    sectionParent.sectionContent.classList.add('ui-bizagi-section-animation-fade-out');\n    this.restoreSectionsOutOfPath();\n    this.removeAnimationClasses(this.sectionContent);\n    this.sectionContent.classList.add('ui-bizagi-section-animation-fade-in');\n    this.sectionContent.style.order = this.orderSection;\n    this.sectionContent.style.msOrder = this.orderSection;\n    return defer.promise();\n  },\n\n  /**\r\n      * Expand a section without animation\r\n     */\n  openAutomatically: function openAutomatically() {\n    this.closeAllSections();\n\n    var sectionsToOpen = [];\n    var section = this;\n    var properties = section.properties || {};\n    var params = section.params || {};\n    var depth = this.orderSection;\n    while (properties.type !== \"form\" && params.type !== \"form\") {\n      sectionsToOpen.push(section);\n      section = section.getSectionParent();\n      properties = section.properties || {};\n      params = section.params || {};\n    }\n    this.translateWithoutAnimation(depth);\n    this.openFormWithoutAnimation();\n    for (var i = sectionsToOpen.length - 1; i >= 0; i--) {\n      sectionsToOpen[i].openSectionWithoutAnimation(i === 0);\n    }\n    this.setAsActive();\n  },\n\n  /**\r\n      * Translate the animation container without animation\r\n      * @param {*} depth - Depth of section to open\r\n      */\n  translateWithoutAnimation: function translateWithoutAnimation(depth) {\n    var containerAnimation = this.sectionContent.parentElement;\n    var direction = this.getFormOrientation() === \"rtl\" ? 1 : -1;\n    containerAnimation.classList.add('ui-bizagi-container-form-wrapper-animation-inactive');\n    containerAnimation.style.transform = 'translateX(' + 100 * depth * direction + '%)';\n  },\n\n  /**\r\n      * Open a specific section without animation\r\n      */\n  openSectionWithoutAnimation: function openSectionWithoutAnimation(lastElement) {\n    this.sectionContent.style.order = this.orderSection;\n    this.sectionContent.style.msOrder = this.orderSection;\n    this.removeAnimationClasses(this.sectionContent);\n    this.sectionContent.classList.add('ui-bizagi-section-without-animation');\n    this.sectionContent.classList.add(lastElement ? 'ui-bizagi-section-animation-fade-in' : 'ui-bizagi-section-animation-fade-out');\n  },\n\n  openFormWithoutAnimation: function openFormWithoutAnimation() {\n    var section = this.getFormParent();\n    section.sectionContent.style.order = section.orderSection;\n    section.sectionContent.style.msOrder = section.orderSection;\n    this.removeAnimationClasses(section.sectionContent);\n    section.sectionContent.classList.add('ui-bizagi-section-without-animation');\n    section.sectionContent.classList.add('ui-bizagi-section-animation-fade-out');\n  },\n\n  /**\r\n      * Close all sections \r\n      */\n  closeAllSections: function closeAllSections(treeIdentifier) {\n    var form = this.getFormContainer() || {};\n    var sections = form.rendersByType ? form.rendersByType[\"section\"] : [];\n    sections.forEach(function (section) {\n      section.removeAnimationClasses(section.sectionContent);\n      section.sectionContent.classList.add('ui-bizagi-container-section-initial-state');\n      section.sectionContent.style.order = 99999;\n      section.sectionContent.style.msOrder = 99999;\n    });\n  },\n\n  /**\r\n      * Restore a section and its descendants to initial state\r\n      */\n  restoreSectionsOutOfPath: function restoreSectionsOutOfPath() {\n    var ancestors = [];\n    var container = this.getSectionParent();\n    var properties = container.properties || {};\n    var params = container.params || {};\n    while (properties.type !== \"form\" && params.type !== \"form\") {\n      ancestors.push(properties.id);\n      container = container.getSectionParent();\n      properties = container.properties || {};\n      params = container.params || {};\n    }\n\n\n    var form = this.getFormContainer() || {};\n    var sections = form.rendersByType ? form.rendersByType[\"section\"] : [];\n    sections.forEach(function (section) {\n      if (!ancestors.includes(section.properties.id) && section.sectionContent) {\n        section.removeAnimationClasses(section.sectionContent);\n        section.sectionContent.classList.add('ui-bizagi-container-section-initial-state');\n        section.sectionContent.style.order = 99999;\n        section.sectionContent.style.msOrder = 99999;\n      }\n    });\n  },\n\n  /**\r\n      * Go back over the breadcrumb\r\n      * @param {*} steps - Steps to go back\r\n      */\n  goBackInPath: function goBackInPath(steps) {\n    var containerAnimation = this.sectionContent.parentElement;\n    var section = this;\n    var direction = this.getFormOrientation() === \"rtl\" ? 1 : -1;\n    containerAnimation.classList.remove('ui-bizagi-container-form-wrapper-animation-inactive');\n    for (var i = 0; i < steps; i++) {\n      this.removeAnimationClasses(section.sectionContent);\n      section.sectionContent.classList.add('ui-bizagi-section-animation-fade-in-out');\n      section = section.getSectionParent();\n      if (section.properties.type !== 'section') section = this.getFormParent();\n    }\n    this.removeAnimationClasses(section.sectionContent);\n    section.sectionContent.classList.add('ui-bizagi-section-animation-fade-in');\n    containerAnimation.style.transform = 'translateX(' + 100 * section.orderSection * direction + '%)';\n    return section;\n  },\n\n  /**\r\n      * Remove animation classes of a section\r\n      * @param {*} DOMElement - Section container \r\n      */\n  removeAnimationClasses: function removeAnimationClasses(DOMElement) {\n    var classList = [\n    'ui-bizagi-section-animation-fade-in',\n    'ui-bizagi-section-animation-fade-out',\n    'ui-bizagi-section-animation-fade-in-out',\n    'ui-bizagi-section-hide-in-background',\n    'ui-bizagi-container-section-initial-state',\n    'ui-bizagi-section-without-animation'];\n\n    classList.forEach(function (className) {\n      DOMElement.classList.remove(className);\n    });\n  },\n\n  getSectionParent: function getSectionParent() {\n    var section = this;\n    while (section.parent) {\n      section = section.parent;\n      var params = section.params || {};\n      var properties = section.properties || {};\n      if (properties.type === \"section\" || properties.type === \"form\" || params.type === \"form\") {\n        return section;\n      }\n    }\n    return this;\n  },\n\n  getFormParent: function getFormParent() {\n    var form = this.getFormContainer();\n    return {\n      sectionContent: $(\".ui-bizagi-main-section\", form.container)[0],\n      orderSection: 0,\n      setAsActive: function setAsActive() {\n        form.setParam(\"selectedSection\", undefined);\n      } };\n\n  },\n\n  /**\r\n      * Check if the section is currently active, even after a refresh\r\n      */\n  isActive: function isActive() {\n    var form = this.getFormContainer();\n    var params = form.getParams() || {};\n    return params.selectedSection === this.properties.id;\n  },\n\n  /**\r\n      * Mark the section as active, and mark its parent section as inactive\r\n      */\n  setAsActive: function setAsActive() {\n    var form = this.getFormContainer();\n    form.setParam(\"selectedSection\", this.properties.id);\n  },\n\n  /**\r\n      * Shift the form to the right until the required section is visible, \r\n      * and then transform the invisible sections so that they are not accessible\r\n      * @param {number} stepsBack - Levels to go back\r\n      */\n  goBack: function goBack(stepsBack) {\n    var section = this.goBackInPath(stepsBack);\n    section.setAsActive();\n  },\n\n  /**\r\n      * Get the orientation of the section. If the orientation if \"auto\", search recursively.\r\n      */\n  getOrientation: function getOrientation() {\n    var container = this;\n    while (container) {\n      properties = container.properties || {};\n      if (properties.orientation !== \"auto\") return properties.orientation;\n      container = container.parent;\n    }\n    return \"auto\";\n  },\n\n  /**\r\n      * get the orientation of the form, to know in which direction to animate the movement\r\n      */\n  getFormOrientation: function getFormOrientation() {\n    var form = this.getFormContainer() || {};\n    var properties = form.properties || {};\n    return (properties.orientation || \"auto\").toLowerCase();\n  } });","/**\r\n *   Name: Bizagi Desktop SearchForm Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the search form class to adjust to desktop devices\r\n */\n\n// Extends from container desktop form base\nbizagi.rendering.desktop.form.extend(\"bizagi.rendering.desktop.searchForm\", bizagi.rendering.searchForm.prototype);\n// Extends itself\nbizagi.rendering.desktop.searchForm.extend(\"bizagi.rendering.desktop.searchForm\", {}, {\n\n  /*\r\n                                                                                        *   Render the results of the query\r\n                                                                                        *   Resolved in each device\r\n                                                                                        */\n  renderResult: function renderResult() {\n    var self = this;\n    var properties = self.properties;\n\n    // Creates grid definition\n    var data = {};\n    data.properties = {\n      displayName: self.getResource(\"render-search-advanced-results-label\"),\n      type: 'grid',\n      xpath: 'searchForm' + properties.id,\n      id: properties.id,\n      skipInitialLoad: true,\n      rowsPerPage: 10,\n      inlineAdd: false,\n      allowDelete: false,\n      allowAdd: false,\n      hideActionsColumn: true,\n      floatingHeader: true,\n      sortBy: properties.sortBy,\n      sortOrder: properties.sortOrder,\n      overrideGetRemoteData: function overrideGetRemoteData(params) {\n        return self.getRemoteData(params);\n      } };\n\n\n    data.elements = [];\n\n    // Creates columns\n    var columns = properties.columns;\n    $.each(columns, function (i) {\n      var column = {\n        render: {} };\n\n      //TODO insert dataType and TextFormat properties\n      column.render.properties = {\n        displayName: columns[i].caption,\n        xpath: columns[i].xpath,\n        editable: false };\n\n      $.extend(column.render.properties, self.parseAdditionalProperties(columns[i].dataType));\n      // Next conditional added to print only columns and not labels\n      // if type = label then column is not rendered on the results table\n      if (columns[i].dataType == 0) {\n        column.render.properties.columnVisible = false;\n      }\n      //if column is number or monetary push allowDecimals property\n      if (columns[i].dataType == 7 || columns[i].dataType == 8) {\n        column.render.properties.allowDecimals = columns[i].allowDecimals;\n      }\n\n      //if column is real or float set allowDecimals property to true\n      if (columns[i].dataType == 10 || columns[i].dataType == 11) column.render.properties.allowDecimals = true;\n\n      //if column is date push showtime property\n      if (columns[i].dataType == 12) {\n        column.render.properties.showTime = columns[i].showTime;\n      }\n\n      data.elements.push(column);\n    });\n\n    var grid = self.renderFactory.getRender({\n      type: \"grid\",\n      data: data,\n      parent: self,\n      mode: self.getMode(),\n      jqgrid: false });\n\n\n    // Saves reference\n    self.resultsGrid = grid;\n\n    return grid.render();\n  },\n\n  /*\r\n     *   Template method to process each jquery object\r\n     *   must be overriden in each container\r\n     */\n  postRenderContainer: function postRenderContainer(container) {\n    var self = this;\n    var searchCriteria = container.find(\".ui-bizagi-container-search-criteria\");\n    var results = container.find(\".ui-bizagi-container-search-results\");\n    var childrenElements = searchCriteria.children();\n    var mode = self.getMode();\n\n    // Process children elements\n    self.container = container;\n    $.each(childrenElements, function (i, childElement) {\n      childElement = $(childElement);\n      var id = Number(childElement.data(\"unique-id\"));\n      if (id) {\n        var child = self.childrenHash[id];\n        if (child) {\n          var type = child.getElementType();\n          if (type == bizagi.rendering.element.ELEMENT_TYPE_RENDER) child.postRenderElement(childElement);\n          if (type == bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) child.postRenderContainer(childElement);\n        }\n      }\n    });\n\n    // Process result\n    var grid = $(results.children()[0]);\n    self.resultsGrid.postRenderElement(grid);\n\n    if (mode == \"execution\") {\n      // Apply handlers\n      self.configureHandlers();\n    }\n    if (mode == \"design\") {\n      // Configure view\n      self.configureDesignView();\n    }\n    if (mode == \"layout\") {\n      // Configure view\n      self.configureDesignView();\n      self.configureLayoutView();\n    }\n  },\n\n  /*\r\n     *   Template method to implement in each device to customize the container's behaviour to add handlers\r\n     */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n\n    // Saves reference\n    self.criteriaContainer = $(\".ui-bizagi-container-search-criteria\", self.container);\n    self.resultsContainer = $(\".ui-bizagi-container-search-results\", self.container);\n\n    // Bind to grid row select event\n    self.resultsGrid.bind(\"rowSelected\", function (e, ui) {\n      if (self.properties.searchParams.hasOwnProperty('multiSelect')) {\n        self.trigger(\"multiSelect\", ui);\n      } else {\n        // Trigger event to bubble up to main container\n        self.trigger(\"instanceSelected\", ui);\n      }\n    });\n\n    return self;\n  },\n\n  /*\r\n     *   Refresh the result panel, making it to query data with current criteria\r\n     */\n  refreshResults: function refreshResults() {\n    var self = this;\n    var resultsGrid = self.resultsGrid;\n\n    // Makes the grid to refresh\n    resultsGrid.refresh();\n    $.when(resultsGrid.dataReady()).\n    done(function () {\n\n      // Shows result container\n      self.resultsContainer.show();\n\n      self.resizeResults();\n    });\n  },\n\n  /* \r\n     *   Resizes the container to adjust it to the container\r\n     */\n  resize: function resize() {\n    var self = this;\n    // Resize results\n    self.resizeResults();\n  },\n\n  /* \r\n     Resizes the container to split the view\r\n     */\n  resizeResults: function resizeResults() {\n    var self = this;\n    var resultsGrid = self.resultsGrid;\n\n    if (self.resultsContainer.is(':visible')) {\n      self.criteriaContainer.height(\"auto\");\n\n    } else {\n      self.criteriaContainer.height(\"100%\");\n    }\n\n    // Resize grid results\n    resultsGrid.resize({\n      width: self.criteriaContainer.width(),\n      onSearchFinished: function onSearchFinished() {\n        var self = this;\n        if (self.properties)\n        if (self.properties.records == 0) {\n          $(\".ui-bizagi-container-search-results\", self.container).show();\n          $(\".ui-bizagi-container-search-results .ui-jqgrid-title\", self.container).hide();\n        } else {\n          $(\".ui-bizagi-container-search-results .ui-jqgrid-title\", self.container).show();\n        }\n      } });\n\n  } });","/**\r\n *   Name: Bizagi Desktop Render Text Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the text render class to adjust to desktop devices\r\n */\n\n// Extends from render desktop base\nbizagi.rendering.desktop.render.extend(\"bizagi.rendering.desktop.text\", bizagi.rendering.text.prototype);\n// Extends itself\nbizagi.rendering.desktop.text.extend(\"bizagi.rendering.desktop.text\", {}, {\n\n  /**\r\n                                                                             *   Template method to implement in each device to customize each render after processed\r\n                                                                             */\n  postRender: function postRender() {\n    // Call base\n    this._super();\n\n    // Define max length of element\n    if (this.properties.maxLength > 0)\n    this.input.attr(\"maxlength\", this.properties.maxLength);\n  },\n\n  /**\r\n      *   Sets the value in the rendered control\r\n      * @param {} value\r\n      * @returns {}\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n    var decodedValue = bizagi.util.decodeURI(value);\n\n    value = this.validateValue(decodedValue, self.properties.maxLength);\n\n    // Call base\n    self.setValue(value);\n    this._super(value);\n\n    // Set value in input\n    if (!bizagi.util.isEmpty(value) && this.properties.editable) {\n      this.input && this.input.val(value);\n    } else {\n      if (value === null && this.properties.editable) {\n        this.input && this.input.val(\"\");\n      }\n    }\n  },\n\n  attachRetypeDouble: function attachRetypeDouble() {\n    var self = this;\n    var element = self.element;\n\n    var input = $(\"input\", element);\n    if (!input || input.length == 0) return;\n\n    // Apply blur handler to check value\n    input.blur(function () {\n      var control = $(this);\n      self.retypeDouble(control);\n    });\n  },\n\n  changeRequired: function changeRequired(argument) {\n    this.properties.required = argument;\n    this.changeRequiredLabel(argument);\n  },\n\n  changeRequiredLabel: function changeRequiredLabel(argument) {\n    var control = this.getControl();\n    control.tooltip({ disabled: true });\n\n    if (control.length > 0) {\n      if (this.getMode() !== \"execution\") {\n        if (bizagi.util.parseBoolean(argument) == true && this.properties.editable) {\n          control.addClass(\"control-required\");\n        } else {\n          control.removeClass(\"control-required\");\n        }\n      } else {\n        if (bizagi.util.parseBoolean(argument) == true && !this.hasValue() && this.properties.editable) {\n          control.addClass(\"control-required\");\n        } else {\n          control.removeClass(\"control-required\");\n        }\n      }\n    }\n\n    this.triggerRenderValidate();\n  },\n\n  changeCellRequired: function changeCellRequired(argument) {\n    this.changeRequired(argument);\n  },\n\n  retypeDouble: function retypeDouble(control) {\n    var self = this;\n    var currentValue = control.val();\n    var isVisible = $(control).attr(\"type\") !== \"hidden\" && $(control).css(\"display\") !== \"none\" && $(control).css(\"visibility\") !== \"hidden\";\n\n    if (isVisible && $(this).data(\"newValue\") == undefined) {\n\n      if (!control.data(\"oldValue\") || $(this).data(\"oldValue\") === \"\") {\n        // Check that there is something in the value or if a value has already been set\n        if (currentValue === \"\" || currentValue === control.data(\"newValue\")) return;\n\n        self.createTooltip(control, currentValue, self.getResource(\"render-number-retype\"));\n      } else {\n        // Check that there is something in the value\n        if (currentValue === \"\") return;\n\n        if (currentValue != control.data(\"oldValue\")) {\n          self.setValue(\"\");\n\n          self.createTooltip(control, \"\", self.getResource(\"render-text-retype-error\"));\n        } else {\n          control.data(\"newValue\", currentValue);\n          control.data(\"oldValue\", \"\");\n\n          // Destroy tooltips\n          control.tooltip(\"destroy\");\n        }\n      }\n    }\n  },\n\n  collectData: function collectData(renderValues) {\n    var self = this;\n\n    // Add the render value\n    var xpath = self.properties.xpath;\n\n    // replace strange character\n    var value = self.getValue();\n\n    if (value != null && typeof value !== \"undefined\" && typeof value !== \"number\") {\n      value = value.replaceAll(String.fromCharCode(\"030\"), '');\n      value = value.replaceAll(String.fromCharCode(\"018\"), '');\n      value = value.replaceAll(String.fromCharCode(\"016\"), '');\n    }\n\n    if (self.controlValueIsChanged()) {\n      // Filter by valid xpaths and valid values\n      if (!bizagi.util.isEmpty(xpath)) {\n        if (!bizagi.util.isEmpty(value)) {\n          renderValues[xpath] = value;\n        } else if (value === \"\") {\n          renderValues[xpath] = \"\";\n        }\n      }\n    }\n\n    //Validate if the input has a retype configured and check that both values matches, otherwise delete the original value\n    if (!self.validateInputRetype()) {\n      renderValues[self.properties.xpath] = \"\";\n    }\n  },\n\n  /**\r\n      * Customizes the font underline\r\n      * It does not apply when we use the render.base component\r\n      * @param underline\r\n      * @param isLabelFormat\r\n      */\n  changeFontUnderline: function changeFontUnderline(underline, isLabelFormat) {\n    var self = this;\n    var textFormat = self.properties.textFormat || {};\n    var valueFormat = self.properties.valueFormat || {};\n\n    var labelStrikethrough = bizagi.util.parseBoolean(textFormat.strikethru) ? \"line-through \" : \"\";\n    var valueStrikethrough = bizagi.util.parseBoolean(valueFormat.strikethru) ? \"line-through \" : \"\";\n    var formatUnderline = bizagi.util.parseBoolean(underline) ? \"underline\" : \"\";\n\n    var isLabelToFormat = typeof isLabelFormat != \"undefined\" || isLabelFormat != null ? isLabelFormat : true;\n    var $formatElements = isLabelToFormat ? self.getFormattingLabel() : self.getElementsToStylized(self.getControl());\n    var formatStrikeThrough = isLabelToFormat ? labelStrikethrough : valueStrikethrough;\n\n    self.changeTextDecoration($formatElements, formatStrikeThrough + formatUnderline);\n  },\n\n  /**\r\n      * Customizes the font Strikethrough property\r\n      * It does not apply when we use the render.base component\r\n      * @param strikeThrough\r\n      * @param isLabelFormat\r\n      */\n  changeFontStrikethru: function changeFontStrikethru(strikeThrough, isLabelFormat) {\n    var self = this;\n    var textFormat = self.properties.textFormat || {};\n    var valueFormat = self.properties.valueFormat || {};\n\n    var labelUnderline = bizagi.util.parseBoolean(textFormat.underline) ? \"underline \" : \"\";\n    var valueUnderline = bizagi.util.parseBoolean(valueFormat.underline) ? \"underline \" : \"\";\n    var formatStrikeThrough = bizagi.util.parseBoolean(strikeThrough) ? \"line-through\" : \"\";\n\n    var isLabelToFormat = typeof isLabelFormat != \"undefined\" || isLabelFormat != null ? isLabelFormat : true;\n    var $formatElements = isLabelToFormat ? self.getFormattingLabel() : self.getElementsToStylized(self.getControl());\n\n    var formatUnderline = isLabelToFormat ? labelUnderline : valueUnderline;\n\n    self.changeTextDecoration($formatElements, formatUnderline + formatStrikeThrough);\n  },\n\n  /**\r\n      * Context to apply styles\r\n      * @param context\r\n      * @returns {jQuery|HTMLElement}\r\n      */\n  getElementsToStylized: function getElementsToStylized(context) {\n    return $(\"input.ui-bizagi-render-text, label.readonly-control\", context);\n  },\n\n  /**\r\n      * Customizes the font Strikethrough or underline property\r\n      * @param {} $element\r\n      * @param {} textDecoration\r\n      * @returns {}\r\n      */\n  changeTextDecoration: function changeTextDecoration($element, textDecoration) {\n    if (textDecoration === undefined) return this;\n    if ($element === undefined) return this;\n\n    textDecoration && $element.css(\"text-decoration\", textDecoration);\n\n    return this;\n  } });","/**\r\n *   Name: Bizagi Desktop Render Readonly Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the readonly render class to adjust to desktop devices\r\n */\n\n// Extends from render Desktop base\nbizagi.rendering.desktop.render.extend(\"bizagi.rendering.desktop.readonly\", bizagi.rendering.render.base.prototype);\n// Extends from render Desktop base\nbizagi.rendering.desktop.readonly.extend(\"bizagi.rendering.desktop.readonly\", bizagi.rendering.readonly.prototype);\n// Extends itself\nbizagi.rendering.desktop.readonly.extend(\"bizagi.rendering.desktop.readonly\", {}, {\n\n  /**\r\n                                                                                     * Returns the html templated element\r\n                                                                                     * @returns {*}\r\n                                                                                     */\n  renderElement: function renderElement() {\n    return this._super(\"render-base\");\n  },\n\n  /**\r\n      * Template method to get the label element\r\n      * @returns {jQuery|HTMLElement}\r\n      */\n  getLabel: function getLabel() {\n    return $(\"label\", this._super());\n  } });","/*\r\n *   Name: Bizagi Desktop Render Text Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the text render class to adjust to desktop devices\r\n */\n\n// Extends from render desktop base\nbizagi.rendering.desktop.render.extend(\"bizagi.rendering.desktop.extendedText\", bizagi.rendering.extendedText.prototype);\n// Extends itself\nbizagi.rendering.desktop.extendedText.extend(\"bizagi.rendering.desktop.extendedText\", {\n\n  //#region Side effects functions\n\n  /**\r\n   * Is triggered after the control exists in the DOM\r\n   */\n  postRender: function postRender() {\n    this._super();\n\n    if (bizagi.util.isIE8()) {\n      this.textarea.attr(\"cols\", \"5000\");\n    }\n  },\n\n  /**\r\n      * Is triggered after the control exists in the DOM when it's readonly\r\n      */\n  postRenderReadOnly: function postRenderReadOnly() {\n    this._super();\n    $(this.getControl()).addClass(\"ui-bizagi-text-extended-readonly\");\n  },\n\n  /**\r\n      *   Template method to implement in each device to customize the render's behaviour to add handlers\r\n      */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    var properties = self.properties;\n\n    // Call base\n    self._super();\n\n    // Define max length of element\n    if (properties.maxLength > 0) {\n\n      self.textarea.attr(\"maxlength\", properties.maxLength);\n      self.actualMaxLength = properties.maxLength;\n\n    }\n\n    self.ready().done(function () {\n      // auto extend\n      if (properties.autoExtend) {\n        var minHeight = self.textarea.css(\"height\");\n        var valMinHeight;\n\n        if (properties.maxLines === undefined) {\n          if (typeof minHeight == \"string\" && minHeight.search(\"px\") !== -1) {\n            valMinHeight = Number(minHeight.split(\"px\")[0]);\n\n            if (valMinHeight <= 150)\n            minHeight = \"150px\";\n          } else {\n            minHeight = \"150px\";\n          }\n        }\n\n        // set textarea styles\n        self.textarea.css({ overflow: \"hidden\", resize: \"none\", minHeight: minHeight });\n\n        var timeoutAutoExtended = setTimeout(function () {\n          self.changeHeightAutoExtended(self.textarea[0]);\n          clearTimeout(timeoutAutoExtended);\n        }, 100);\n\n        self.textarea.bind(\"keyup\", function () {\n          self.changeHeightAutoExtended(this);\n        });\n      }\n    });\n  },\n\n  /**\r\n      *   Sets the value in the rendered control\r\n      * @param {} value\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n    var control = self.getControl();\n    value = this.validateValue(typeof value == \"string\" ? value : \"\", self.properties.maxLength);\n\n    // Call base\n    self.setValue(value);\n\n    // Set value in input\n    var resolvedValue = $.br2nl(value);\n    if (self.textarea) self.textarea.val(resolvedValue);\n\n    if (!bizagi.util.parseBoolean(self.properties.editable)) {\n      // Render as simple value\n      if (typeof value === \"string\") {\n        // Replace line breaks for html line breaks\n        var valueToDisplay = bizagi.util.encodeHtmlText(self.getDisplayValue());\n\n        control.html(\"<label class='readonly-control'>\" + valueToDisplay + \"</label>\");\n      } else {\n        if (bizagi.util.isNull(value)) {\n          control.html(\"\");\n        }\n      }\n    }\n  },\n\n  /**\r\n      * Gets control's value\r\n      * @param {} renderValues\r\n      */\n  collectData: function collectData(renderValues) {\n    var self = this;\n    var properties = self.properties;\n\n    // Add the render value\n    var xpath = properties.xpath;\n\n    // replace strange character\n    var value = self.getValue();\n\n    if (self.getValue() != null && typeof self.getValue() != \"undefined\") {\n      value = self.getValue().replaceAll(String.fromCharCode(\"030\"), '');\n      value = self.getValue().replaceAll(String.fromCharCode(\"018\"), '');\n      value = self.getValue().replaceAll(String.fromCharCode(\"016\"), '');\n    }\n\n    if ($.controlValueIsChanged(self)) {\n      // Filter by valid xpaths and valid values\n      if (!bizagi.util.isEmpty(xpath)) {\n        if (!bizagi.util.isEmpty(value)) {\n          renderValues[xpath] = value;\n        } else if (value === \"\") {\n          renderValues[xpath] = \"\";\n        }\n      }\n    }\n\n    // Validate if the input has a retype configured and check that both values matches,\n    // otherwise delete the original value\n    if (!self.validateInputRetype()) {\n      renderValues[properties.xpath] = \"\";\n    }\n  },\n\n  /**\r\n      * Cleans current value\r\n      */\n  cleanData: function cleanData() {\n    this.setValue(\"\");\n    this.setDisplayValue(this.getValue());\n\n    // Reset height\n    if (this.textarea) {\n      this.textarea[0].style.removeProperty(\"height\");\n    }\n  },\n\n  /**\r\n      * function virtual implements on children (desktop,smartphone...)\r\n      */\n  attachRetypeDouble: function attachRetypeDouble() {\n    var self = this;\n    var element = self.element;\n\n    var input = $(\"input, textarea\", element);\n    if (!input || input.length == 0) return;\n\n    // Apply blur handler to check value\n    input.blur(function () {\n      var control = $(this);\n      var previousValue = self.previousValue;\n      var value = self.value;\n\n      if (previousValue != null && value != previousValue) {\n        if ($(this).data(\"newValue\") != undefined && control.val() != $(this).data(\"newValue\"))\n        $(this).data().newValue = undefined;\n      }\n\n      self.retypeDouble(control);\n    });\n  },\n\n  /**\r\n      * Changes required status\r\n      * @param {} argument\r\n      */\n  changeRequired: function changeRequired(argument) {\n    this.properties.required = argument;\n    this.changeRequiredLabel(argument);\n  },\n\n  /**\r\n      * Changes label's required status\r\n      * @param {} argument\r\n      */\n  changeRequiredLabel: function changeRequiredLabel(argument) {\n    var control = this.getControl();\n\n    if (control.length > 0) {\n      if (this.getMode() !== \"execution\") {\n        if (bizagi.util.parseBoolean(argument) == true && this.properties.editable) {\n          control.addClass('control-required');\n        } else {\n          control.removeClass('control-required');\n        }\n      } else {\n        if (bizagi.util.parseBoolean(argument) == true && !this.hasValue() && this.properties.editable) {\n          control.addClass('control-required');\n        } else {\n          control.removeClass('control-required');\n        }\n      }\n    }\n\n    this.triggerRenderValidate();\n  },\n\n  /**\r\n      * Changes cell's required status\r\n      * @param {} argument\r\n      */\n  changeCellRequired: function changeCellRequired(argument) {\n    this.changeRequired(argument);\n  },\n\n  /**\r\n      * Validates the double value from retype\r\n      * @param {jQuery Object} control jQuery Object\r\n      */\n  retypeDouble: function retypeDouble(control) {\n    var self = this;\n    var currentValue = control.val();\n    var isVisible = $(control).attr(\"type\") != \"hidden\" && $(control).css(\"display\") != \"none\" && $(control).css(\"visibility\") != \"hidden\";\n\n    if (isVisible && $(this).data(\"newValue\") == undefined) {\n\n      if (!control.data(\"oldValue\") || $(this).data(\"oldValue\") == \"\") {\n        // Check that there is something in the value or if a value has already been set\n        if (currentValue == \"\" || currentValue == control.data(\"newValue\")) return;\n\n        self.createTooltip(control, currentValue, self.getResource(\"render-number-retype\"));\n      } else {\n        // Check that there is something in the value\n        if (currentValue == \"\") return;\n\n        if (currentValue != control.data(\"oldValue\")) {\n          self.setValue(\"\");\n          self.createTooltip(control, \"\", self.getResource(\"render-text-retype-fail\"));\n        } else {\n          control.data(\"newValue\", currentValue);\n          control.data(\"oldValue\", \"\");\n          // Destroy tooltips\n          control.tooltip(\"destroy\");\n        }\n      }\n    }\n  },\n\n  /**\r\n      * Changes control's height when it's auto extended\r\n      * @param {Object} control HTML Object\r\n      */\n  changeHeightAutoExtended: function changeHeightAutoExtended(control) {\n    if (control.scrollHeight < this.properties.maxLines * 20) {\n      control.style.height = this.properties.maxLines * 20;\n    } else {\n      control.style.height = control.scrollHeight + \"px\";\n    }\n  },\n\n  /**\r\n     * Customizes the font underline\r\n     * It does not apply when we use the render.base component\r\n     * @param underline\r\n     * @param isLabelFormat\r\n     */\n  changeFontUnderline: function changeFontUnderline(underline, isLabelFormat) {\n    var self = this;\n    var textFormat = self.properties.textFormat || {};\n    var valueFormat = self.properties.valueFormat || {};\n\n    var labelStrikethrough = bizagi.util.parseBoolean(textFormat.strikethru) ? \"line-through \" : \"\";\n    var valueStrikethrough = bizagi.util.parseBoolean(valueFormat.strikethru) ? \"line-through \" : \"\";\n    var formatUnderline = bizagi.util.parseBoolean(underline) ? \"underline\" : \"\";\n\n    var isLabelToFormat = typeof isLabelFormat != \"undefined\" || isLabelFormat != null ? isLabelFormat : true;\n    var $formatElements = isLabelToFormat ? self.getFormattingLabel() : self.getElementsToStylized(self.getControl());\n    var formatStrikeThrough = isLabelToFormat ? labelStrikethrough : valueStrikethrough;\n\n    self.changeTextDecoration($formatElements, formatStrikeThrough + formatUnderline);\n  },\n\n  /**\r\n      * Customizes the font Strikethrough property\r\n      * It does not apply when we use the render.base component\r\n      * @param strikeThrough\r\n      * @param isLabelFormat\r\n      */\n  changeFontStrikethru: function changeFontStrikethru(strikeThrough, isLabelFormat) {\n    var self = this;\n    var textFormat = self.properties.textFormat || {};\n    var valueFormat = self.properties.valueFormat || {};\n\n    var labelUnderline = bizagi.util.parseBoolean(textFormat.underline) ? \"underline \" : \"\";\n    var valueUnderline = bizagi.util.parseBoolean(valueFormat.underline) ? \"underline \" : \"\";\n    var formatStrikeThrough = bizagi.util.parseBoolean(strikeThrough) ? \"line-through\" : \"\";\n\n    var isLabelToFormat = typeof isLabelFormat != \"undefined\" || isLabelFormat != null ? isLabelFormat : true;\n    var $formatElements = isLabelToFormat ? self.getFormattingLabel() : self.getElementsToStylized(self.getControl());\n\n    var formatUnderline = isLabelToFormat ? labelUnderline : valueUnderline;\n\n    self.changeTextDecoration($formatElements, formatUnderline + formatStrikeThrough);\n  },\n\n  /**\r\n      * Context to apply styles\r\n      * @param context\r\n      * @returns {jQuery|HTMLElement}\r\n      */\n  getElementsToStylized: function getElementsToStylized(context) {\n    return $(\"input.ui-bizagi-render-text, label.readonly-control\", context);\n  },\n\n  /**\r\n      * Customizes the font Strikethrough or underline property\r\n      * @param {} $element\r\n      * @param {} textDecoration\r\n      * @returns {}\r\n      */\n  changeTextDecoration: function changeTextDecoration($element, textDecoration) {\n    if (textDecoration === undefined) return this;\n    if ($element === undefined) return this;\n\n    textDecoration && $element.css(\"text-decoration\", textDecoration);\n\n    return this;\n  }\n  //#endregion Side effects functions\n});","/*\r\n*   Name: Bizagi Desktop Render Label Extension\r\n*   Author: UI Forms Team\r\n*   Comments:\r\n*   -   This script will redefine the label render class to adjust to desktop devices\r\n*/\n\n// Extends from render Desktop base\nbizagi.rendering.desktop.render.extend(\"bizagi.rendering.desktop.label\", bizagi.rendering.label.prototype);\n// Extends itself\nbizagi.rendering.desktop.label.extend(\"bizagi.rendering.desktop.label\", {}, {\n\n  /**\r\n                                                                               * Method to render non editable values\r\n                                                                               */\n  renderReadOnly: function renderReadOnly() {\n    this.setValue(this.properties.displayName);\n    return this._super();\n  },\n\n  /**\r\n      * Template method to implement in each device to customize each render after processed     \r\n      */\n  postRender: function postRender() {\n    // Apply a css class\n    this.getLabel().addClass(\"ui-bizagi-render-label\");\n  },\n\n  /**\r\n      * Method to render non editable values     \r\n      */\n  postRenderReadOnly: function postRenderReadOnly() {\n    // Apply a css class\n    this.getLabel().addClass(\"ui-bizagi-render-label\");\n  } });","/*\r\n *   Name: BizAgi Desktop Render Query Label Extension\r\n *   Author: Paola Herrera\r\n *   Comments:\r\n *   -   This script will redefine the number render class to adjust to desktop devices\r\n */\n\n// Extends itself\nbizagi.rendering.desktop.label.extend(\"bizagi.rendering.desktop.queryLabel\", {}, {});","/*\r\n*   Name: Bizagi Desktop Render Number Extension\r\n*   Author: UI Forms Team\r\n*   Comments:\r\n*   -   This script will redefine the number render class to adjust to desktop devices\r\n*/\n\n// Extends from render desktop base\nbizagi.rendering.desktop.render.extend(\"bizagi.rendering.desktop.number\", bizagi.rendering.number.prototype);\n// Extends itself\nbizagi.rendering.desktop.number.extend(\"bizagi.rendering.desktop.number\", {}, {\n\n  /**\r\n                                                                                 *   Sets the value in the rendered control\r\n                                                                                 * @param {} value\r\n                                                                                 * @returns {}\r\n                                                                                 */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n\n    // Call base\n    self._super(value);\n\n    // Set value in input\n    if (value != null && self.properties.editable) {\n      self.numericInput.val(bizagi.util.numberToFixedString(value));\n\n      self.value = self.properties.value = value;\n\n      // Formats the input\n      self.executeFormatCurrencyPlugin();\n    }\n  },\n\n  attachRetypeDouble: function attachRetypeDouble() {\n    var self = this;\n    var element = self.element;\n\n    var input = $(\"input\", element);\n    if (!input || input.length === 0) return;\n\n    // Apply blur handler to check value\n    input.blur(function () {\n      var control = $(this);\n      var previousValue = self.previousValue;\n      var value = self.value;\n      var typeControl = self.parent.properties.type;\n\n      if (typeControl === \"grid\") {\n        if (previousValue != null && value !== previousValue) {\n          if ($(this).data(\"newValue\") !== undefined && control.val() !== $(this).data(\"newValue\")) {\n            $(this).data().newValue = undefined;\n          }\n        }\n        self.retypeDouble(control);\n      } else {\n        self.retypeDouble(control);\n      }\n    });\n  },\n\n  retypeDouble: function retypeDouble(control) {\n    var self = this;\n    var currentValue = control.val();\n    var isVisible = $(control).attr(\"type\") !== \"hidden\" && $(control).css(\"display\") !== \"none\" && $(control).css(\"visibility\") !== \"hidden\";\n\n    if (isVisible && $(this).data(\"newValue\") === undefined) {\n\n      if (!control.data(\"oldValue\") || $(this).data(\"oldValue\") === \"\") {\n\n        // Check that there is something in the value or if a value has already been set\n        if (currentValue === \"\" || currentValue === control.data(\"newValue\"))\n        return;\n\n        self.createTooltip(control, currentValue, self.getResource(\"render-number-retype\"));\n      } else {\n        // Check that there is something in the value\n        if (currentValue === \"\") return;\n\n        if (currentValue !== control.data(\"oldValue\")) {\n          self.setValue(\"\");\n\n          self.createTooltip(control, \"\", self.getResource(\"render-text-retype-error\"));\n        } else {\n          control.data(\"newValue\", control.val());\n          control.data(\"oldValue\", \"\");\n\n          try {\n            // Destroy tooltips\n            control.tooltip(\"destroy\");\n          } catch (e) {\n          }\n        }\n      }\n    }\n  },\n\n  changeCellRequired: function changeCellRequired(argument) {\n    this.changeRequired(argument);\n  },\n\n  changeRequired: function changeRequired(argument) {\n    this.properties.required = argument;\n    this.changeRequiredLabel(argument);\n  },\n\n  changeRequiredLabel: function changeRequiredLabel(argument) {\n    var control = this.getControl();\n    if (control.length > 0) {\n      if (this.getMode() !== \"execution\") {\n        if (bizagi.util.parseBoolean(argument) === true && this.properties.editable) {\n          control.addClass(\"control-required\");\n        } else {\n          control.removeClass(\"control-required\");\n        }\n      } else {\n        if (bizagi.util.parseBoolean(argument) === true && !this.hasValue() && this.properties.editable) {\n          control.addClass(\"control-required\");\n        } else {\n          control.removeClass(\"control-required\");\n        }\n      }\n    }\n\n    this.triggerRenderValidate();\n  },\n\n  /**\r\n     * Customizes the font underline\r\n     * It does not apply when we use the render.base component\r\n     * @param underline\r\n     * @param isLabelFormat\r\n     */\n  changeFontUnderline: function changeFontUnderline(underline, isLabelFormat) {\n    var self = this;\n    var textFormat = self.properties.textFormat || {};\n    var valueFormat = self.properties.valueFormat || {};\n\n    var labelStrikethrough = bizagi.util.parseBoolean(textFormat.strikethru) ? \"line-through \" : \"\";\n    var valueStrikethrough = bizagi.util.parseBoolean(valueFormat.strikethru) ? \"line-through \" : \"\";\n    var formatUnderline = bizagi.util.parseBoolean(underline) ? \"underline\" : \"\";\n\n    var isLabelToFormat = typeof isLabelFormat != \"undefined\" || isLabelFormat != null ? isLabelFormat : true;\n    var $formatElements = isLabelToFormat ? self.getFormattingLabel() : self.getElementsToStylized(self.getControl());\n    var formatStrikeThrough = isLabelToFormat ? labelStrikethrough : valueStrikethrough;\n\n    self.changeTextDecoration($formatElements, formatStrikeThrough + formatUnderline);\n  },\n\n  /**\r\n      * Customizes the font Strikethrough property\r\n      * It does not apply when we use the render.base component\r\n      * @param strikeThrough\r\n      * @param isLabelFormat\r\n      */\n  changeFontStrikethru: function changeFontStrikethru(strikeThrough, isLabelFormat) {\n    var self = this;\n    var textFormat = self.properties.textFormat || {};\n    var valueFormat = self.properties.valueFormat || {};\n\n    var labelUnderline = bizagi.util.parseBoolean(textFormat.underline) ? \"underline \" : \"\";\n    var valueUnderline = bizagi.util.parseBoolean(valueFormat.underline) ? \"underline \" : \"\";\n    var formatStrikeThrough = bizagi.util.parseBoolean(strikeThrough) ? \"line-through\" : \"\";\n\n    var isLabelToFormat = typeof isLabelFormat != \"undefined\" || isLabelFormat != null ? isLabelFormat : true;\n    var $formatElements = isLabelToFormat ? self.getFormattingLabel() : self.getElementsToStylized(self.getControl());\n\n    var formatUnderline = isLabelToFormat ? labelUnderline : valueUnderline;\n\n    self.changeTextDecoration($formatElements, formatUnderline + formatStrikeThrough);\n  },\n\n  /**\r\n      * Context to apply styles\r\n      * @param context\r\n      * @returns {jQuery|HTMLElement}\r\n      */\n  getElementsToStylized: function getElementsToStylized(context) {\n    return $(\"input.ui-bizagi-render-numeric, label.readonly-control\", context);\n  },\n\n  /**\r\n      * Customizes the font Strikethrough or underline property\r\n      * @param {} $element\r\n      * @param {} textDecoration\r\n      * @returns {}\r\n      */\n  changeTextDecoration: function changeTextDecoration($element, textDecoration) {\n    if (textDecoration === undefined) return this;\n    if ($element === undefined) return this;\n\n    textDecoration && $element.css(\"text-decoration\", textDecoration);\n\n    return this;\n  } });","/**\r\n *   Name: Bizagi Desktop Render Query Number Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the number render class to adjust to desktop devices\r\n */\n\n// Extends itself\nbizagi.rendering.desktop.number.extend(\"bizagi.rendering.desktop.queryNumber\", {}, {\n\n  /*\r\n                                                                                      *   Sets the value in the rendered control\r\n                                                                                      */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n    var properties = self.properties;\n\n    // Call base\n    this._super(value);\n\n    if (value !== null && properties.editable) {\n      self.setValue(self.numericInput.asNumber({\n        symbol: properties.symbol,\n        positiveFormat: properties.positiveFormat,\n        negativeFormat: properties.negativeFormat,\n        decimalSymbol: properties.decimalSymbol,\n        digitGroupSymbol: properties.digitGroupSymbol,\n        groupDigits: properties.groupDigits }));\n\n    }\n  } });","/**\r\n *   Name: Bizagi Desktop Render Date Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the Date render class to adjust to desktop devices\r\n */\n\n// Extends from render base\nbizagi.rendering.desktop.render.extend(\"bizagi.rendering.desktop.date\", bizagi.rendering.render.base.prototype);\n// Extends from render desktop base\nbizagi.rendering.desktop.date.extend(\"bizagi.rendering.desktop.date\", bizagi.rendering.date.prototype);\n// Extends itself\nbizagi.rendering.desktop.date.extend(\"bizagi.rendering.desktop.date\", {}, {\n\n  //#region Side effects functions\n  /**\r\n   * Returns the html templated element\r\n   * @returns {*}\r\n   */\n  renderElement: function renderElement(renderTemplateName) {\n    // The renderTemplateName parameter only apply to advanced queries\n    return this._super(renderTemplateName || \"render-base\");\n  },\n\n  /**\r\n      * Method to render non editable values\r\n      * @returns {*|jQuery}\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    var self = this;\n    var properties = self.properties;\n    var ud = bizagi.util.dateFormatter;\n\n    var date = ud.getDateFromInvariant(self.getValue(), properties.showTime);\n    var value = ud.formatDate(date, properties.fullFormat, self.i18n);\n\n    var data = {\n      value: self.getMode() !== \"execution\" ? properties.fullFormat : value,\n      editable: properties.editable };\n\n\n    var template = this.renderFactory.getTemplate(\"readonly\");\n    return $.fasttmpl(template, data);\n  },\n\n  /**\r\n      * Translate standar date format to jquery date picker\r\n      * @property {DOM Object} context Control\r\n      * @returns {jQuery object} jQuery Object whith the element to stylize\r\n      */\n  getElementsToStylize: function getElementsToStylize(context) {\n    return $(\".bz-input-icon__input, .bz-input--readonly, .readonly-control\", context);\n  },\n\n  /*\r\n      *   Template method to implement in each device to customize the render's behaviour to add handlers\r\n      */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    var dateControl = self.getDateControl();\n    var inputDate = $(\".bz-input-icon__input\", dateControl);\n\n    self.configureMobiscollCalendar();\n    self.calendarInstance = $(\".bz-hidden\", dateControl).mobiscroll(\"getInst\");\n\n    // Bind event on input date\n    inputDate.on(\"focusInput\", function (e) {\n      //Para lograr la compatibilidad con las formas de inicio es necesario manejar el focus del input con validaciones para no mostrar el calendario cuando no es necesario po el autofocus de los dialog.\n      if (!self.getCalendarInstance().isVisible()) {\n        self.getCalendarInstance().show(false, true);\n        inputDate.focus();\n      }\n    }).\n    on(\"keydown\", function (e) {\n      if (e.keyCode == \"9\") self.getCalendarInstance().hide();\n      var timeoutKeyDown = setTimeout(function () {\n        var value = inputDate.val();\n        if (bizagi.util.isEmpty(value)) {\n          if (self.compareDates(value, self.getCalendarInstance().getVal()))\n          self.setValueFromCalendarButtons(null, function (v) {\n            self.getCalendarInstance().setVal(v, false, false, false);\n            self.setValue(\"\");\n            self.setDisplayValue(\"\");\n          });\n        } else {\n          var fecValid = self.getNormalizeDate(\n          bizagi.util.dateFormatter.getDateFromFormat(value, self.properties.fullFormat, self.i18n));\n\n          if (fecValid == 0) {\n            self.setValue(\"\");\n            self.getCalendarInstance().setVal(null);\n          } else {\n            if (self.compareDates(inputDate.val(), self.getCalendarInstance().getVal())) {\n              self.getCalendarInstance().setVal(fecValid, false, false, false);\n              self.onChangeHandler();\n            }\n          }\n        }\n        if (e.keyCode == \"13\") self.onChangeHandler();\n        clearTimeout(timeoutKeyDown);\n      }, 1);\n    }).\n    on(\"blur\", function (e) {\n      if (self.compareDates(inputDate.val(), self.getCalendarInstance().getVal())) self.onChangeHandler();\n    });\n\n    dateControl.click(function (e) {\n      self.getCalendarInstance().show(false, true);\n      inputDate.focus();\n    });\n  },\n\n  /**\r\n      * Initializes the Mobiscroll Calendar with the indicated configuration\r\n      */\n  configureMobiscollCalendar: function configureMobiscollCalendar() {\n    var self = this;\n    var properties = self.properties;\n    self.elementCalendar = null;\n    var controlElements = properties.showTime ? [\"calendar\", \"time\"] : [\"calendar\"];\n    var dateControl = self.getDateControl();\n    var fakeDiv = $(\".bz-hidden\", dateControl);\n    var inputDate = $(\".bz-input-icon__input\", dateControl);\n    var orientation = self.getOrientation();\n\n    fakeDiv.mobiscroll().calendar({\n      touchUi: false,\n      display: \"bubble\",\n      animate: false,\n      anchor: dateControl.get(0),\n      focusOnClose: inputDate.get(0),\n      controls: controlElements,\n      min: self.getNormalizeDate(new Date(properties.minValue)),\n      max: self.getNormalizeDate(new Date(properties.maxValue)),\n      defaultValue: self.getDisplayValue(),\n      timeFormat: properties.timePickerFormat ? self.getTimeFormat(properties.timePickerFormat) : \"\",\n      dateFormat: properties.datePickerFormat,\n      dateWheels: 'dd/MM/yyyy',\n      select: \"single\",\n      selectType: \"Day\",\n      rtl: orientation && orientation === \"rtl\",\n      lang: bizagi.util.languages[BIZAGI_LANGUAGE] || bizagi.localization.language || \"en\",\n      cssClass: \"mbsc-bizagi-theme\",\n      buttons: self.properties.showTime ?\n      [\n      {\n        text: self.getResource(\"render-timeentry-now\"),\n        handler: function handler() {\n          self.setValueFromCalendarButtons(new Date(), function (v) {\n            self.getCalendarInstance().setVal(v, false, false, false);\n            self.getCalendarInstance().hide();\n          });\n        },\n        cssClass: \"mbsc-fr-btn mbsc-btnNow\" },\n\n      {\n        text: self.getResource(\"render-plugin-search-users-select-link\"),\n        handler: \"set\",\n        cssClass: \"mbsc-fr-btn mbsc-btnSet\" },\n\n      {\n        text: self.getResource(\"render-plugin-search-users-clear-button-name\"),\n        handler: function handler(e, inst) {\n          inst.clear();\n        },\n        cssClass: \"mbsc-fr-btn mbsc-btnClear\" }] :\n\n\n      [\n      {\n        text: self.getResource(\"render-timeentry-now\"),\n        handler: function handler() {\n          self.setValueFromCalendarButtons(new Date(), function (v) {\n            self.getCalendarInstance().setVal(v, false, false, false);\n            self.getCalendarInstance().hide();\n          });\n        },\n        cssClass: \"mbsc-fr-btn mbsc-btnNow\" },\n\n      {\n        text: self.getResource(\"render-plugin-search-users-clear-button-name\"),\n        handler: function handler(e, inst) {\n          inst.clear();\n        },\n        cssClass: \"mbsc-fr-btn mbsc-btnClear\" }],\n\n\n      onSet: function onSet() {\n        self.onChangeHandler();\n      },\n      onDayChange: function onDayChange(obj) {\n        self.setValueFromCalendarButtons(obj.date, function (v) {\n          self.getCalendarInstance().setVal(v, false, false, false);\n          if (!self.properties.showTime) self.getCalendarInstance().hide();\n        });\n      },\n      onChange: function onChange(obj) {\n        if (self.elementCalendar) {\n          var c = $(\".mbsc-sc-whl-anim\", self.elementCalendar).length;\n          if (c == 0) {\n            self.setDateFromTimeSelector(obj.valueText);\n          } else {\n            var fnControl = setInterval(function () {\n              if (!self.elementCalendar || $(\".mbsc-sc-whl-anim\", self.elementCalendar).length == 0) {\n                self.setDateFromTimeSelector(obj.valueText);\n                clearInterval(fnControl);\n              }\n            }, 100);\n          }\n        }\n      },\n      onClear: function onClear() {\n        self.setValueFromCalendarButtons(null, function (v) {\n          self.getCalendarInstance().setVal(v, false, false, false);\n          self.getCalendarInstance().hide();\n        });\n      },\n      onBeforeShow: function onBeforeShow(opt, inst) {\n        inst.option({\n          max: bizagi.util.dateFormatter.getDateFromInvariant(properties.maxValue, properties.showTime),\n          min: bizagi.util.dateFormatter.getDateFromInvariant(properties.minValue, properties.showTime) });\n\n      },\n      onShow: function onShow(event) {\n        self.elementCalendar = calendar = $(\".mbsc-fr-popup\", event.target);\n        //Para customizar los botones del calendario\n        $(\".mbsc-btnNow\", calendar).\n        parent().\n        addClass(\"mbsc-div-btnNow\");\n        $(\".mbsc-btnSet\", calendar).\n        parent().\n        addClass(\"mbsc-div-btnSet\");\n      },\n      onClose: function onClose() {\n        self.elementCalendar = null;\n      } });\n\n  },\n\n  /**\r\n      * Sets the date selected from the time selector\r\n      * @param {String} value New value\r\n      * @returns {}\r\n      */\n  setDateFromTimeSelector: function setDateFromTimeSelector(value) {\n    var self = this;\n    self.setValueFromCalendarButtons(bizagi.util.dateFormatter.getDateFromFormat(value, self.properties.fullFormat), function (v) {\n      self.getCalendarInstance().setVal(v, false, false, false);\n      if (!self.properties.showTime) self.getCalendarInstance().hide();\n    });\n  },\n\n  /**\r\n      * Compares two dates and and determines if they are equal\r\n      * @param {Date} firsDate first date to compare\r\n      * @param {Date} secondDate second date to compare\r\n      * @returns {boolean} true o false\r\n      */\n  compareDates: function compareDates(firstDate, secondDate) {\n    var self = this;\n    var util = bizagi.util.dateFormatter;\n    var funcNormalice = self.getNormalizeDate;\n    firstDate = funcNormalice.call(\n    self,\n    typeof firstDate != \"string\" ? firstDate : util.getDateFromFormat(firstDate, self.properties.fullFormat, self.i18n));\n\n    secondDate = funcNormalice.call(\n    self,\n    typeof secondDate != \"string\" ? secondDate : util.getDateFromFormat(secondDate, self.properties.fullFormat, self.i18n));\n\n\n    if (!firstDate && !secondDate) return false;\n    if (!firstDate && secondDate || firstDate && !secondDate) return true;\n    if (firstDate.getTime() != secondDate.getTime()) return true;\n    return false;\n  },\n\n  /**\r\n      * Gets Mobiscroll Calendar's instance\r\n      * @returns {Object} Mobiscroll's instance\r\n      */\n  getCalendarInstance: function getCalendarInstance() {\n    return this.calendarInstance || (this.calendarInstance = $(\".bz-hidden\", this.getDateControl()).mobiscroll(\"getInst\"));\n  },\n\n  /*\r\n      *   Template method to implement in each device to customize the render's behaviour when rendering in design mode\r\n      */\n  configureDesignView: function configureDesignView() {\n  },\n  /*\r\n      *   Gets the date control\r\n      */\n\n  getDateControl: function getDateControl() {\n    return this.properties.editable ? $(\".bz-input-icon, .bz-input\", this.getControl()) : this.getControl();\n  },\n\n  removeValidations: function removeValidations() {\n    var self = this;\n    var form = self.getFormContainer();\n    if (form.clearValidationMessages) {\n      form.clearValidationMessages();\n    } else {\n      if (form.getFormContainer().parent && form.getFormContainer().parent.getFormContainer) {\n        form = form.getFormContainer().parent.getFormContainer();\n        if (form.clearValidationMessages) {\n          form.clearValidationMessages();\n        }\n      }\n    }\n  },\n\n  changeRequired: function changeRequired(argument) {\n    this.properties.required = argument;\n    this.changeRequiredLabel(argument);\n  },\n\n  changeRequiredLabel: function changeRequiredLabel(argument) {\n    var self = this;\n    var properties = self.properties;\n    var control = self.getControl();\n\n    if (control.length > 0) {\n      if (self.getMode() !== \"execution\") {\n        if (bizagi.util.parseBoolean(argument) == true && properties.editable) {\n          control.addClass(\"control-required\");\n        } else {\n          control.removeClass(\"control-required\");\n        }\n      } else {\n        if (bizagi.util.parseBoolean(argument) == true && !self.hasValue() && properties.editable) {\n          control.addClass(\"control-required\");\n        } else {\n          control.removeClass(\"control-required\");\n        }\n      }\n    }\n    self.triggerRenderValidate();\n  },\n\n  changeCellRequired: function changeCellRequired(argument) {\n    this.changeRequired(argument);\n  },\n  /*\r\n      *   Formats the date time value to the hidden control\r\n      */\n  onChangeHandler: function onChangeHandler(isNow) {\n    var self = this;\n    var properties = self.properties;\n    var currentDate = self.getNormalizeDate(self.getCalendarInstance().getVal());\n    var currentDateString = \"\";\n    var ud = bizagi.util.dateFormatter;\n\n    if (!currentDate || currentDate == 0) {\n      return;\n    }\n    //Attemp set the value of the datepicker control. If not valid go back to the previous.\n    var previousValue = self.value;\n\n    //sets the value with the current format date, changed to use the same displayValue method\n    if (isNow == true) {\n      currentDate = self.getNormalizeDate(new Date());\n      currentDateString = ud.formatDate(currentDate, \"MM/dd/yyyy HH:mm:ss\");\n      self.value = currentDateString;\n    } else {\n      self.value = ud.formatInvariant(currentDate, properties.showTime);\n    }\n    //Set seconds in 0 when control have default format and showTime enabled\n    if (properties.showTime && !properties.fullFormat.includes(\"s\")) {\n      currentDate.setSeconds(0);\n      self.value = ud.formatInvariant(currentDate, properties.showTime);\n    }\n\n    if (isNow || currentDate) {\n      var form = self.getFormContainer();\n\n      if (typeof form.validationController === \"undefined\") {\n        var $canvas = form.getValidationsContainer();\n        form.validationController = new bizagi.command.controllers.validation(form, self.validations, $canvas);\n      }\n\n      self.removeValidations();\n      if (!self.isValid([])) {\n        var oldVal = self.getCalendarInstance().getVal();\n        var message = bizagi.localization.getResource(\"workportal-general-invalid-date\");\n        message = message.replace(\"{0}\", properties.displayName);\n\n        var validationController = form.validationController || form.parent.validationController;\n        validationController.showValidationMessage(message + \" \" + oldVal);\n      }\n\n      self.value = previousValue;\n      currentDateString = ud.formatDate(currentDate, \"MM/dd/yyyy HH:mm:ss\");\n      self.setValue(currentDateString);\n      self.setDisplayValue(currentDateString);\n    }\n  },\n\n  getLabel: function getLabel() {\n    var self = this;\n    if (!self.label) {\n      self.label = $(\".ui-bizagi-label > label\", self.element || self.observableElement);\n    }\n\n    return self.label;\n  },\n\n  hideIcon: function hideIcon(icon) {\n    var self = this;\n    self._super(icon);\n\n    var containerIcons = $(\".ui-bizagi-render-icons\", self.element);\n    var errorIcon = $(\".ui-bizagi-render-icon-error\", self.element);\n    var helpIcon = $(\".ui-bizagi-render-icon-help\", self.element);\n\n    if (!helpIcon.is(\":visible\") && !errorIcon.is(\":visible\")) {\n      containerIcons.css({ width: \"1px\", \"min-width\": \"1px\" });\n    }\n  },\n  /**\r\n      * Apply the final format that will be showed on the input\r\n      */\n  getFullFormatedDate: function getFullFormatedDate(currentDate, currentTime) {\n    var fullDate = \"\";\n    var ud = bizagi.util.dateFormatter;\n\n    if (currentDate.length > 0) {\n      fullDate = currentDate;\n    } else if (currentDate !== undefined) {\n      fullDate = ud.formatISO(currentDate, false);\n    } else {\n      fullDate = ud.formatISO(new Date(), false);\n    }\n\n    fullDate += currentTime;\n    var dateFromFormat = ud.getDateFromFormat(fullDate, \"yyyy-MM-dd H:m\");\n\n    return ud.formatDate(dateFromFormat !== 0 ? dateFromFormat : currentDate, \"yyyy-MM-dd H:mm:ss\");\n  },\n\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n    if (self.getMode() !== \"execution\") {\n      return;\n    }\n\n    var properties = self.properties;\n    var dateControl = self.getControl();\n    var ud = bizagi.util.dateFormatter;\n\n    if (bizagi.util.isNumeric(value) && value !== 0) {\n      value = ud.formatInvariant(new Date(value), properties.showTime);\n    }\n\n    if (value) {\n      if (typeof value == \"string\") {\n        value = self.getNormalizeDate(ud.getDateFromInvariant(value, properties.showTime));\n      } else {\n        value = self.getNormalizeDate(value);\n      }\n    }\n\n    // Assert that the date could be parsed\n    var ci = self.getCalendarInstance();\n    if (properties.editable && ci.setVal) ci.setVal(value);\n    self.setValue(ud.formatInvariant(value, true));\n    properties.displayValue = ud.formatDate(value, properties.fullFormat, self.i18n);\n\n    var input = properties.editable ? $(\".bz-input-icon__input, .bz-input--readonly\", dateControl) : $(\".readonly-control\", dateControl);\n    // Set display value\n    if (typeof properties.displayValue === \"string\" || typeof properties.displayValue === \"number\") {\n      if (properties.editable) {\n        input.prop(\"value\", properties.displayValue);\n      } else {\n        input.html(properties.displayValue);\n      }\n      input.prop(\"title\", properties.displayValue);\n    }\n  },\n\n  /**\r\n      * Sets value to the control and execute a callback function\r\n      * @param {Date} date date to asign\r\n      * @param {Function} callBack function to execute\r\n      * @returns {}\r\n      */\n  setValueFromCalendarButtons: function setValueFromCalendarButtons(date, callBack) {\n    this._super(date);\n    if (typeof callBack === \"function\") callBack(date);\n    this.onChangeHandler();\n  },\n\n  cleanData: function cleanData() {\n    this.setValue(\"\");\n    this.setDisplayValue(\"\");\n  },\n\n  disablePopup: function disablePopup() {\n    if (this.getCalendarInstance()) this.getCalendarInstance().disable();\n  }\n\n  //#endregion Side effects functions\n});","/**\r\n *   Name: Bizagi Desktop queryDate\r\n *   Author: Ivn Ricardo Taimal Narvez\r\n *   Comments:\r\n *   -\r\n */\n\n// Extends itself\nbizagi.rendering.desktop.date.extend(\"bizagi.rendering.desktop.queryDate\", {}, {\n\n  /*\r\n                                                                                  *   Add the render data to the given collection in order to send data to the server\r\n                                                                                  */\n  collectDataQueryForm: function collectDataQueryForm(renderValues) {\n    var self = this;\n    var properties = self.properties;\n    var xpath = properties.xpath;\n    var value = self.getValue();\n\n    var queryValue = null;\n    var changed = self.controlValueIsChanged();\n    if (!bizagi.util.isEmpty(xpath)) {\n      if (value !== null && typeof value !== \"undefined\" && value !== \"\") {\n        queryValue = value;\n      }\n      if (queryValue !== null || properties.included) {\n        var searchType = self.properties.typeSearch || self.properties.rangeQuery || \"NONE\";\n        searchType = searchType.toUpperCase();\n\n        renderValues.push({\n          \"value\": queryValue,\n          \"included\": self.properties.included,\n          \"xpath\": properties.xpath,\n          \"searchType\": searchType,\n          \"orderType\": \"NONE\",\n          \"renderId\": self.getRenderId() });\n\n      }\n    }\n  } });","/**\r\n *   Name: Bizagi Desktop Render Yes-No Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the Yes-No render class to adjust to desktop devices\r\n */\n\n// Extends from render Desktop base\nbizagi.rendering.desktop.render.extend(\"bizagi.rendering.desktop.yesno\", bizagi.rendering.yesno.prototype);\n// Extends itself\nbizagi.rendering.desktop.yesno.extend(\"bizagi.rendering.desktop.yesno\", {}, {\n\n  /**\r\n                                                                               * Template method to implement in each device to customize each render after processed\r\n                                                                               */\n  postRender: function postRender() {\n    var control = this.getControl();\n\n    // Call base \n    this._super();\n\n    // Set control container to behave as a block\n    control.addClass(\"ui-bizagi-render-display-block\");\n    control.addClass(\"ui-bizagi-render-boolean-yesno\");\n\n    // Remove data for cell refresh\n    if (control[0]) {\n      $.removeData(control[0]);\n    }\n\n    // Apply plugins\n    control.optiongroup({ orientation: this.properties.orientation });\n  },\n\n  /**\r\n      * Template method to implement in each device to customize the render's behaviour to add handlers\r\n      */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    var control = self.getControl();\n\n    // Call base\n    self._super();\n\n    // Bind change event\n    control.bind(\"optiongroupchange\", function (evt, ui) {\n      // Only change the internal value when it truly changes\n      if (bizagi.util.parseBoolean(self.value) !== bizagi.util.parseBoolean(ui.value)) {\n        self.setValue(ui.value);\n      }\n    });\n  },\n\n  /**\r\n      * Template method to implement in each device to customize the render's behaviour\r\n      * when rendering in design mode\r\n      */\n  configureDesignView: function configureDesignView() {\n    var control = this.getControl();\n\n    // Unbind plugin handlers\n    control.find(\"input\").unbind(\"click\");\n  },\n\n  /**\r\n      * Sets the value in the rendered control\r\n      * @param {} value\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    var control = this.getControl();\n\n    // Call base\n    this._super(value);\n\n    // Set value in control\n    if (value != null && this.properties.editable) {\n      var parsedValue = bizagi.util.parseBoolean(value);\n\n      if (parsedValue != null) {\n        control.optiongroup(\"setValue\", parsedValue.toString());\n      }\n    }\n  },\n\n  /**\r\n      * Cleans current value\r\n      */\n  cleanData: function cleanData() {\n    var value = null;\n\n    this.setDisplayValue(value);\n    this.clearDisplayValue();\n  },\n\n  /**\r\n      * Sets the value in the rendered control\r\n      */\n  clearDisplayValue: function clearDisplayValue() {\n    var selectedItem = this.element.find(\".ui-radio-state-checked\");\n    selectedItem.removeClass(\"ui-radio-state-checked\");\n  } });","/**\r\n *   Name: BizAgi Desktop Render Check Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the Check render class to adjust to desktop devices\r\n */\n\n// Extends from render Desktop base\nbizagi.rendering.desktop.render.extend(\"bizagi.rendering.desktop.check\", bizagi.rendering.check.prototype);\n// Extends itself\nbizagi.rendering.desktop.check.extend(\"bizagi.rendering.desktop.check\", {}, {\n\n  /**\r\n                                                                               * Template method to implement in each device to customize each render after processed\r\n                                                                               */\n  postRender: function postRender() {\n    var $control = this.getControl();\n\n    // Call base\n    this._super();\n\n    this.input = $control.find(\"label\");\n    this.performStyles();\n  },\n\n  postRenderReadOnly: function postRenderReadOnly() {\n    var $control = this.getControl();\n    var showLetters = bizagi.override.enableCheck === true && !this.properties.editable;\n    this.input = $control.find(\"label\");\n\n    if (!showLetters) {\n      this.performStyles();\n\n      // Set as disabled\n      var check = $(\"input\", $control);\n      check.attr(\"readonly\", \"readonly\");\n      check.attr(\"disabled\", \"disabled\");\n    }\n  },\n\n  /**\r\n      * Method to render non editable values\r\n      * @returns {jQuery|*}\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    var html = \"\";\n    var showLetters = bizagi.override.enableCheck === true && !this.properties.editable;\n\n    if (!showLetters) {\n      html = this._super();\n    } else {\n      var template = this.renderFactory.getTemplate(\"readonly\");\n      var randomId = bizagi.util.randomNumber(100, 10000000);\n\n      // Render template\n      html = $.fasttmpl(template, {\n        id: randomId,\n        editable: this.properties.editable });\n\n    }\n\n    return html;\n  },\n\n  /**\r\n      * Template method to implement in each device to customize the render's behaviour to add handlers\r\n      */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n\n    // Call base\n    self._super();\n\n    // Bind change event\n    if (!bizagi.util.isIE()) {\n      // PLUGIN IMPLEMENTATION\n      self.input.bind(\"checkchange\", function (evt, ui) {\n        self.setValue(ui.value);\n      });\n    } else {\n      // NON PLUGIN IMPLEMENTATION\n      self.input.bind(\"change\", function (evt, ui) {\n        var value = $(\"input\", self.input).is(\":checked\");\n\n        self.setValue(value);\n        self.setDisplayValue(value);\n      });\n    }\n  },\n\n  /**\r\n      * Template method to implement in each device to customize the render's behaviour when rendering in design mode\r\n      */\n  configureDesignView: function configureDesignView() {\n    var $control = this.getControl();\n\n    // Unbind plugin handlers\n    $control.find(\"input\").unbind(\"click\");\n  },\n\n  /**\r\n      * Sets the value in the rendered control\r\n      * @param value\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n    var parsedValue = bizagi.util.parseBoolean(value);\n    var showLetters = bizagi.override.enableCheck === true && !this.properties.editable;\n\n    // Call base\n    this._super(parsedValue);\n\n    if (!showLetters) {\n\n      if (!bizagi.util.isIE()) {\n        // PLUGIN IMPLEMENTATION\n        try {\n          if (parsedValue === true) {\n            self.input.check(\"checkItem\");\n          } else {\n            self.input.check(\"uncheckItem\");\n          }\n        } catch (e) {}\n      } else if (self.input) {\n        // NON PLUGIN IMPLEMENTATION\n        if (parsedValue === true) {\n          self.input.addClass(\"ui-checkbox-state-checked\");\n          $(\"input\", self.input).attr(\"checked\", \"checked\");\n        } else {\n          self.input.removeClass(\"ui-checkbox-state-checked\");\n          $(\"input\", self.input).removeAttr(\"checked\");\n        }\n      }\n    } else if (self.input) {\n      self.input.val(this.getDisplayValue());\n    }\n  },\n\n  /**\r\n      * Cleans current value\r\n      */\n  cleanData: function cleanData() {\n    this.setDisplayValue(false);\n    this.setValue(false, false);\n  },\n\n  /**\r\n      * Modify styles\r\n      */\n  performStyles: function performStyles() {\n    var self = this;\n    var $control = self.getControl();\n\n    // Set control container to behave as a block\n    $control.addClass(\"ui-bizagi-render-display-block\");\n    $control.addClass(\"ui-bizagi-render-boolean-yesno\");\n\n    if (self.properties.required) {\n      $(\".ui-bizagi-render-control-required\", $control).css({ height: \"22px\" });\n    }\n\n    // Apply plugins\n    if (!bizagi.util.isIE()) {\n      // JUST FOR NON IE-BROWSERS\n      self.input.check();\n    } else {\n      $control.removeClass();\n      $control.addClass(\"ui-bizagi-render-control ui-bizagi-render-boolean-yesno-ie\");\n      $control.find(\"label\").addClass(\"checkbox-ie\");\n    }\n  },\n\n  changeRequired: function changeRequired(argument) {\n    this.properties.required = argument;\n    this.changeRequiredLabel(argument);\n  },\n\n  changeRequiredLabel: function changeRequiredLabel(argument) {\n    var control = this.getControl();\n\n    if (control.length > 0) {\n      if (this.getMode() !== \"execution\") {\n        if (bizagi.util.parseBoolean(argument) == true && this.properties.editable) {\n          control.addClass(\"control-required\");\n        } else {\n          control.removeClass(\"control-required\");\n        }\n      } else {\n        if (bizagi.util.parseBoolean(argument) == true && !this.hasValue() && this.properties.editable) {\n          control.addClass(\"control-required\");\n        } else {\n          control.removeClass(\"control-required\");\n        }\n      }\n    }\n    this.triggerRenderValidate();\n  },\n\n  changeCellRequired: function changeCellRequired(argument) {\n    this.changeRequired(argument);\n  },\n\n  changeFontSize: function changeFontSize(size, isLabelFormat) {\n    //this is required Just to avoid change the font size in this control\n    if (isLabelFormat) {\n      this._super(size, isLabelFormat);\n    }\n  } });","/**\r\n *   Name: Bizagi Desktop Render Cascading combo Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the cascading combo render class to adjust to desktop devices\r\n */\n\n// Extends from render desktop base\nbizagi.rendering.desktop.render.extend(\"bizagi.rendering.desktop.cascadingCombo\", bizagi.rendering.combo.prototype);\n// Extends itself\nbizagi.rendering.desktop.cascadingCombo.extend(\"bizagi.rendering.desktop.cascadingCombo\", bizagi.rendering.cascadingCombo.prototype);\n// Extends itself\nbizagi.rendering.desktop.cascadingCombo.extend(\"bizagi.rendering.desktop.cascadingCombo\", {\n  // Statics\n  BA_ACTION_PARAMETER_PREFIX: bizagi.render.services.service.BA_ACTION_PARAMETER_PREFIX,\n  BA_CONTEXT_PARAMETER_PREFIX: bizagi.render.services.service.BA_CONTEXT_PARAMETER_PREFIX },\n{\n\n  /*\r\n  *   Template method to implement in each device to customize each render after processed\r\n  */\n  postRender: function postRender() {\n    var self = this;\n\n    // Call desktop.combo method\n    bizagi.rendering.desktop.combo.prototype.postRender.apply(self, arguments);\n    self.processLayout(false, self.properties.valueFormat || {});\n  },\n\n  /*\r\n     *   Template method to implement in each device to customize the render's behaviour to add handlers\r\n     */\n  configureHandlers: function configureHandlers() {\n    // Call base\n    this._super();\n\n    // Call desktop.combo method\n    bizagi.rendering.desktop.combo.prototype.configureHandlers.apply(this, arguments);\n  },\n\n  comboDropDown: function comboDropDown() {\n    // Call desktop.combo method\n    bizagi.rendering.desktop.combo.prototype.comboDropDown.apply(this, arguments);\n  },\n\n  showLoadingData: function showLoadingData() {\n    // Call desktop.combo method\n    bizagi.rendering.desktop.combo.prototype.showLoadingData.apply(this, arguments);\n  },\n\n  hideLoadingData: function hideLoadingData() {\n    // Call desktop.combo method\n    bizagi.rendering.desktop.combo.prototype.hideLoadingData.apply(this, arguments);\n  },\n\n  internalComboDropDown: function internalComboDropDown() {\n    // Call desktop.combo method\n    bizagi.rendering.desktop.combo.prototype.internalComboDropDown.apply(this, arguments);\n  },\n\n  resizeCombo: function resizeCombo() {\n    // Call desktop.combo method\n    bizagi.rendering.desktop.combo.prototype.resizeCombo.apply(this, arguments);\n  },\n\n  validateValueInDatasource: function validateValueInDatasource() {\n    // Call desktop.combo method\n    bizagi.rendering.desktop.combo.prototype.validateValueInDatasource.apply(this, arguments);\n  },\n\n  /*\r\n     *   Keydown listener\r\n     */\n  keyDownFunction: function keyDownFunction(e) {\n    // Call desktop.combo method\n    bizagi.rendering.desktop.combo.prototype.keyDownFunction.apply(this, arguments);\n  },\n\n  /*\r\n     *   KeyUp listener\r\n     */\n  keyUpFunction: function keyUpFunction(e) {\n    // Call desktop.combo method\n    bizagi.rendering.desktop.combo.prototype.keyUpFunction.apply(this, arguments);\n  },\n\n  /*\r\n     * Select letter by letter\r\n     */\n  selectItemByKeyUp: function selectItemByKeyUp() {\n    // Call desktop.combo method\n    bizagi.rendering.desktop.combo.prototype.selectItemByKeyUp.apply(this, arguments);\n  },\n\n  selectFirstElement: function selectFirstElement() {\n    // Call desktop.combo method\n    bizagi.rendering.desktop.combo.prototype.selectFirstElement.apply(this, arguments);\n  },\n\n  selectLastElement: function selectLastElement() {\n    // Call desktop.combo method\n    bizagi.rendering.desktop.combo.prototype.selectLastElement.apply(this, arguments);\n  },\n\n  /*\r\n     * Handler key Up\r\n     */\n  selectPreviousElement: function selectPreviousElement() {\n    // Call desktop.combo method\n    bizagi.rendering.desktop.combo.prototype.selectPreviousElement.apply(this, arguments);\n  },\n  /*\r\n     *Handler key Down\r\n     */\n  selectNextElement: function selectNextElement() {\n    // Call desktop.combo method\n    bizagi.rendering.desktop.combo.prototype.selectNextElement.apply(this, arguments);\n  },\n\n  /*\r\n     *   Sets the value in the rendered control\r\n     */\n  setDisplayValue: function setDisplayValue() {\n    // Call desktop.combo method\n    bizagi.rendering.desktop.combo.prototype.setDisplayValue.apply(this, arguments);\n  },\n\n  /*\r\n     *   Sets the value in the rendered control\r\n     */\n  clearDisplayValue: function clearDisplayValue() {\n    // Call desktop.combo method\n    bizagi.rendering.desktop.combo.prototype.clearDisplayValue.apply(this, arguments);\n  },\n\n  /*\r\n     *   Returns the selected value in the template\r\n     */\n  getSelectedValue: function getSelectedValue() {\n    // Call desktop.combo method\n    return bizagi.rendering.desktop.combo.prototype.getSelectedValue.apply(this, arguments);\n  },\n\n  /*\r\n     *   Handler to react when a combo item is selected\r\n     */\n  onComboItemSelected: function onComboItemSelected() {\n    this.itemSelected = true;\n    // Call desktop.combo method\n    return bizagi.rendering.desktop.combo.prototype.onComboItemSelected.apply(this, arguments);\n  },\n\n  postRenderPrintVersion: function postRenderPrintVersion() {\n    var control = this.getControl();\n\n    control.empty();\n    control.append(this.value.value);\n  },\n\n  /*\r\n     * validate when fire event form document and window\r\n     */\n  dropDownValidClose: function dropDownValidClose() {\n    return bizagi.rendering.desktop.combo.prototype.dropDownValidClose.apply(this, arguments);\n  },\n\n  /*\r\n     * set a new dropdown position\r\n     */\n  dropDownReposition: function dropDownReposition(dropDown, containerForm) {\n    return bizagi.rendering.desktop.combo.prototype.dropDownReposition.apply(this, arguments);\n  },\n\n  /*\r\n     * destroy dropdown\r\n     */\n  dropDownDestroy: function dropDownDestroy(dropDown) {\n    return bizagi.rendering.desktop.combo.prototype.dropDownDestroy.apply(this, arguments);\n  },\n\n  /*\r\n     *   Find elements within a data source\r\n     */\n  findDataById: function findDataById() {\n    return bizagi.rendering.desktop.combo.prototype.findDataById.apply(this, arguments);\n  },\n\n  findDataByValue: function findDataByValue() {\n    return bizagi.rendering.desktop.combo.prototype.findDataByValue.apply(this, arguments);\n  },\n\n  recalculateComboOffset: function recalculateComboOffset() {\n    return bizagi.rendering.desktop.combo.prototype.recalculateComboOffset.apply(this, arguments);\n  },\n  /**\r\n      * Check if dialog is preferences view\r\n      */\n  isPreferencesDialog: function isPreferencesDialog(container) {\n    return bizagi.rendering.desktop.combo.prototype.isPreferencesDialog.apply(this, arguments);\n  },\n\n  setValue: function setValue(val, triggerEvents) {\n    var self = this;\n    triggerEvents = triggerEvents !== undefined ? triggerEvents : true;\n\n    if (val === '') {\n      val = { id: \"\", value: \"\" };\n    }\n\n    if (!!val) {\n      var id = val.id || \"\";\n      var label = val.value || self.findDataById(id).value;\n\n      self.selectedValue = { id: id, value: label };\n\n      if (!self.internalSetInitialValueFlag) {\n        if (self.value === null || self.value.id !== val.id) {\n          self.triggerHandler(\"select\", [{ id: id, value: label }, false]);\n        }\n      }\n\n      this._super(self.selectedValue, triggerEvents);\n    }\n  },\n\n  /*\r\n      * Cleans current data\r\n      */\n  cleanData: function cleanData() {\n    var self = this;\n\n    self.value = self.properties.value = self.selectedValue = { id: \"\", value: \"\" };\n    self.setValue(self.value, false);\n    self.setDisplayValue(self.value);\n    self.clearDisplayValue();\n  },\n\n  changeRequired: function changeRequired(argument) {\n    return bizagi.rendering.desktop.combo.prototype.changeRequired.apply(this, arguments);\n  },\n\n  changeRequiredLabel: function changeRequiredLabel(argument) {\n    return bizagi.rendering.desktop.combo.prototype.changeRequiredLabel.apply(this, arguments);\n  },\n\n  changeRequiredControl: function changeRequiredControl(argument) {\n    return bizagi.rendering.desktop.combo.prototype.changeRequiredControl.apply(this, arguments);\n  },\n\n  //#region Format\n\n  /**\r\n   * Customizes the font underline\r\n   * It does not apply when we use the render.base component\r\n   * @param underline\r\n   * @param isLabelFormat\r\n   */\n  changeFontUnderline: function changeFontUnderline(underline, isLabelFormat) {\n    // Call desktop.combo method\n    bizagi.rendering.desktop.combo.prototype.changeFontUnderline.apply(this, arguments);\n  },\n\n  /**\r\n      * Customizes the font Strikethrough property\r\n      * It does not apply when we use the render.base component\r\n      * @param strikeThrough\r\n      * @param isLabelFormat\r\n      */\n  changeFontStrikethru: function changeFontStrikethru(strikeThrough, isLabelFormat) {\n    // Call desktop.combo method\n    bizagi.rendering.desktop.combo.prototype.changeFontStrikethru.apply(this, arguments);\n  },\n\n  /**\r\n      * Context to apply styles\r\n      * @param context\r\n      * @returns {jQuery|HTMLElement}\r\n      */\n  getElementsToStylized: function getElementsToStylized(context) {\n    // Call desktop.combo method\n    return bizagi.rendering.desktop.combo.prototype.getElementsToStylized.apply(this, arguments);\n  },\n\n  /**\r\n      * Customizes the font Strikethrough or underline property\r\n      * @param {} $element\r\n      * @param {} textDecoration\r\n      * @returns {}\r\n      */\n  changeTextDecoration: function changeTextDecoration($element, textDecoration) {\n    // Call desktop.combo method\n    return bizagi.rendering.desktop.combo.prototype.changeTextDecoration.apply(this, arguments);\n  }\n\n  //#endregion Format\n});\n\n// We override original select menu refresh position method to adjust custom stuff\nvar originalRefreshPositionMethod = $.ui.selectmenu.prototype._refreshPosition;\n$.ui.selectmenu.prototype._refreshPosition = function () {\n  // Set initial height to zero\n  this.list.height(0);\n\n  // Call original method\n  var result = originalRefreshPositionMethod.apply(this, arguments);\n\n  // Return original response\n  this.list.css(\"width\", this.newelement.width() + \"px\");\n  return result;\n};","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /**\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: Bizagi Desktop Render Search Extension\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: Bizagi UI Forms\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This script will redefine the search render class to adjust to desktop devices\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\n// Extends from render Desktop base\nbizagi.rendering.desktop.render.extend(\"bizagi.rendering.desktop.search\", bizagi.rendering.search.prototype);\n// Extends itself\nbizagi.rendering.desktop.search.extend(\"bizagi.rendering.desktop.search\", {\n  ADVANCED_SEARCH_ID: -1,\n  ADVANCED_ADDITION_ID: -2,\n  CLEAR_SEARCH_ID: -3,\n  NO_RESULTS_SEARCH_ID: -4,\n  SEARCH_DELAY: 750,\n  SEARCH_MAX_RECORDS: 50 },\n{\n  /**\r\n   *   Update or init the element data\r\n   * @param {} data submitData\r\n   * @returns {}\r\n   */\n  initializeData: function initializeData(data) {\n    var self = this;\n\n    // Call base\n    self._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n    properties.searchImage = properties.searchImage || this.dataService.getSearchDefaultImage();\n\n    // Store reference of all ajax request in order to run only one instance of them\n    self.deferredReference = null;\n  },\n\n  /**\r\n      *   Template method to implement in each device to customize each render after processed\r\n      * @returns {}\r\n      */\n  postRender: function postRender() {\n    var self = this;\n    var control = self.getControl();\n\n    // Call base\n    self._super();\n\n    // Apply plugin\n    self.searchInput = $(\"input\", control);\n    self.advancedSearch = $(\"button\", control);\n\n    if (self.properties.advancedSearch) {\n      control.addClass('ui-bizagi-advanced-search');\n    }\n\n    self.applyAutocompletePlugin();\n  },\n\n  postRenderReadOnly: function postRenderReadOnly() {\n    this.setDisplayValue(this.properties.value);\n  },\n\n  /**\r\n      * Template method to implement in each device to customize the render's behaviour to add handlers\r\n      * @returns {}\r\n      */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n\n    // Call base\n    self._super();\n\n    // Bind select event\n    var searchInput = self.searchInput;\n    searchInput.bind(\"autocompleteselect\", function (e, ui) {\n      // ui.item.id == self.Class.CLEAR_SEARCH_ID || was taken off in order to allow rule execution when clicking on clear\n      if (ui.item.id == self.Class.ADVANCED_SEARCH_ID || ui.item.id == self.Class.ADVANCED_ADDITION_ID || ui.item.id == self.Class.CLEAR_SEARCH_ID || ui.item.id == self.Class.NO_RESULTS_SEARCH_ID)\n      return false;\n\n      self.setValue(ui.item);\n      self.selectedValue = ui.item.value;\n\n      // Format additional label\n      ui.item.value = self.formatItem(ui.item.value);\n\n      //IE 8 Focus fix - SUITE-9517\n      if (document.selection) {\n        // Set focus on the element\n        searchInput.focus();\n\n        // Create empty selection range\n        var oSel = document.selection.createRange();\n\n        // Move selection start and end to 0 position\n        oSel.moveStart(\"character\", -self.selectedValue.length);\n\n        // Move selection start and end to desired position\n        oSel.moveStart(\"character\", 0);\n        oSel.moveEnd(\"character\", self.selectedValue.length);\n        oSel.select();\n      }\n\n      return true;\n    });\n\n    self.bind(\"onSearchError\", function (e, data) {\n      var form = self.getFormContainer();\n      form.clearValidationMessages();\n\n      try {\n        // Add information of control\n        var msgObj = self.properties.displayName + \": \";\n        msgObj += JSON.parse(data.responseText).message;\n        form.addValidationMessage(msgObj, \"\", \"ui-icon-alert\");\n      } catch (e) {\n        // If data does not json string, show data content\n        form.addValidationMessage(data);\n      }\n\n      self.hideAutocompleteLoading();\n    });\n\n    // Bind click event\n    searchInput.click(function () {\n      // close if already visible\n      if (searchInput.autocomplete(\"widget\").is(\":visible\")) {\n        searchInput.autocomplete(\"close\");\n        return;\n      }\n\n      searchInput.autocomplete(\"search\", $(searchInput).val());\n    });\n\n    // Bind click event\n    self.advancedSearch.click(function () {\n      self.showSearchDialog();\n    });\n\n    // Allow delete item If It's a suggest and \"allow clear\" property is enable\n    if (!self.properties.advancedSearch) {\n      var suggestFocus = function suggestFocus(event) {\n        if (this.value === \"\" && self.properties.allowClear) {\n          var value = { id: \"\" };\n\n          self.setDisplayValue(value);\n          self.setValue(value);\n        } else {\n          self.setDisplayValue(self.getValue());\n        }\n      };\n\n      searchInput.on(\"blur\", suggestFocus);\n    }\n  },\n\n  /**\r\n      * Apply autocomplete capabilities to a single input\r\n      * @returns {}\r\n      */\n  applyAutocompletePlugin: function applyAutocompletePlugin() {\n    var self = this;\n    var searchInput = self.searchInput;\n    var orientation = self.getFormContainer().properties.orientation;\n    var alignForSuggest = orientation == \"rtl\" ? \"right\" : \"left\";\n    var rtlClassForSuggest = orientation == \"rtl\" ? \" suggest-rtl\" : \"\";\n    var idDropdown = \"sg-\" + self.properties.id;\n\n    // Apply autocomplete plugin\n    searchInput.autocomplete({\n      autoFocus: true,\n      messages: {\n        noResults: null, //\"No search results.\",\n        results: function results() {\n        } },\n\n      search: function search(event, ui) {\n      },\n      source: function source(req, add) {\n        // active search\n        self.activeRequestTerm = req.term;\n\n        // Check local storage\n        var now = new Date().getTime();\n        var parseRequest = encodeURIComponent(req.term);\n        var expireKey = self.properties.xpath + \"_\" + parseRequest + \"_expire\";\n        var requestKey = self.properties.xpath + \"_\" + parseRequest;\n        var expire = bizagi.util.getItemLocalStorage(expireKey);\n\n        if (expire && self.properties.enableLocalStorage && now < expire) {\n          try {\n            var data = JSON.parse(bizagi.util.getItemLocalStorage(requestKey));\n            add(data);\n            self.hideAutocompleteLoading();\n          } catch (e) {\n            self.processRequest(req, add);\n          }\n        } else {\n          self.processRequest(req, add);\n        }\n      },\n      open: function open() {\n        var suggestMenu = searchInput.data(\"ui-autocomplete\").menu.element;\n        var suggestStyles = { top: 0, left: 0 };\n        var suggestContainer = searchInput.closest(\".ui-bizagi-control\");\n        var controlContainer = suggestContainer.parent();\n        var itemWidth = self.calculateSuggestionWidth();\n\n        $('li', suggestMenu).each(function () {\n          $(this).addClass(rtlClassForSuggest);\n\n          if ($(this).index() % 2 < 1) $(this).addClass(\"biz-ui-even\");\n        });\n\n        // Fix position to prevent the scroll of autocomplete\n        suggestMenu.css(suggestStyles);\n        suggestMenu.attr(\"id\", idDropdown);\n\n        suggestContainer.addClass(\"ac-is-visible\");\n        controlContainer.addClass(\"ac-is-visible ac-clear-floats\");\n\n        var suggestList = suggestMenu.appendTo(suggestContainer);\n\n        // Apply to combo in the modal\n        if (self.isPreferencesDialog(suggestContainer)) {\n          var $comboDialog = $(suggestContainer.closest(\".ui-dialog-content\"));\n          var top = suggestList.offset().top - $comboDialog.offset().top;\n          var left = suggestList.offset().left - $comboDialog.offset().left;\n\n          var dropDownContainer = $(\"#wrapper-\" + idDropdown);\n          if (dropDownContainer && dropDownContainer.length > 0) dropDownContainer.remove();\n\n          // Container\n          var $comboWrapper = $(\"<div/>\", {\n            id: \"wrapper-\" + idDropdown,\n            css: {\n              \"position\": \"absolute\",\n              \"top\": top,\n              \"left\": left } });\n\n\n\n          $comboWrapper.appendTo($comboDialog);\n          $(suggestList).appendTo($comboWrapper);\n        }\n\n        suggestList.position({\n          my: alignForSuggest + \" top\",\n          at: alignForSuggest + \" bottom\",\n          of: this,\n          collision: \"flipfit\" });\n\n\n        suggestList.css(\"z-index\", $.getMaxZindex() + 10);\n\n        // Add data to check if element is visible\n        suggestList.attr(\"visible\", true);\n\n        // Apply with to menu and items\n        $(\".ui-bizagi-render-search-item\", suggestList).width(itemWidth);\n        $(\".ui-bizagi-render-search-item-label\", suggestList).width(itemWidth);\n\n        suggestList.width(itemWidth);\n        self.hideAutocompleteLoading();\n      },\n      close: function close() {\n        searchInput.data(\"ui-autocomplete\").menu.element.attr(\"visible\", false);\n      },\n      delay: this.Class.SEARCH_DELAY });\n\n\n    // Special rendering\n    searchInput.data(\"ui-autocomplete\")._renderItem = function (ul, item) {\n      // Render for clear search\n      if (item.id == self.Class.CLEAR_SEARCH_ID) {\n        return self.renderClearItem(ul, item).appendTo(ul);\n      }\n      // Render for advanced search\n      if (item.id == self.Class.ADVANCED_SEARCH_ID) {\n        return self.renderAdvancedItem(ul, item).appendTo(ul);\n      }\n\n      // Render for allow addition\n      if (item.id == self.Class.ADVANCED_ADDITION_ID) {\n        return self.renderAddItem(ul, item).appendTo(ul);\n      }\n\n      // Normal rendering\n      return self.renderSearchItem(item).appendTo(ul);\n    };\n\n    // We override original select menu resize\n    searchInput.data(\"ui-autocomplete\")._resizeMenu = function () {\n      var ul = this.menu.element;\n      ul.outerWidth(this.element.outerWidth());\n    };\n  },\n\n  /**\r\n      *   Renders a search item\r\n      * @param {} item\r\n      * @returns {}\r\n      */\n  renderSearchItem: function renderSearchItem(item) {\n    var self = this;\n    var properties = self.properties;\n    var template = self.renderFactory.getTemplate(\"searchItem\");\n\n    var searchItem = $.tmpl(template, {\n      image: properties.searchImage,\n      label: item.label,\n      orientation: self.properties.orientation || \"lrt\" });\n\n\n    searchItem.data(\"item.autocomplete\", item);\n\n    return searchItem;\n  },\n\n  /**\r\n      * Renders the advanced item\r\n      * @returns {}\r\n      */\n  renderAdvancedItem: function renderAdvancedItem() {\n    var self = this;\n    var searchItem = self.renderSearchItem({\n      id: self.Class.ADVANCED_SEARCH_ID,\n      label: this.getResource(\"render-search-advanced-label\") });\n\n\n    // Bind click event\n    searchItem.click(function () {\n      self.showSearchDialog();\n    });\n\n    return searchItem;\n  },\n\n  /**\r\n      * Renders the advanced item\r\n      * @returns {}\r\n      */\n  renderClearItem: function renderClearItem() {\n    var self = this;\n    var searchItem = self.renderSearchItem({\n      id: self.Class.CLEAR_SEARCH_ID,\n      label: this.getResource(\"render-search-clear-label\") });\n\n\n    // Bind click event\n    searchItem.click(function () {\n      var value = { id: \"\" };\n\n      self.setDisplayValue(value);\n      self.setValue(value);\n    });\n\n    return searchItem;\n  },\n\n  /**\r\n      * Renders the add item\r\n      * @returns {}\r\n      */\n  renderAddItem: function renderAddItem() {\n    var data = { id: this.Class.ADVANCED_ADDITION_ID, label: this.getResource(\"render-search-add-label\") };\n    var searchItem = this.renderSearchItem(data);\n\n    return searchItem;\n  },\n\n  /**\r\n      *   Process the request data for the autocomplete control\r\n      * @param {} req\r\n      * @param {} add\r\n      * @returns {}\r\n      */\n  processRequest: function processRequest(req, add) {\n    var self = this;\n    var properties = self.properties;\n    // Create array for response objects\n    var suggestions = [];\n\n    if (self.properties.allowSuggest && req.term.length >= self.properties.searchLength) {\n      self.showAutocompleteLoading();\n\n      // Update term property to reflect the search\n      properties.term = req.term;\n\n      /**\r\n                                   * Cancel previous request in order to improve the performance\r\n                                   */\n      if (this.deferredReference && typeof this.deferredReference.reject === \"function\" && this.deferredReference.state() !== \"resolved\") {\n        this.deferredReference.reject({ hideStatus: true });\n      }\n\n      self.deferredReference = this.getData().done(function (data) {\n\n        if (data && data.length > 0) {\n          data = data.slice(0, properties.maxRecords);\n\n          if (data.length > self.Class.SEARCH_MAX_RECORDS) {\n            data = data.slice(0, self.Class.SEARCH_MAX_RECORDS);\n\n            suggestions.push({\n              id: self.Class.NO_RESULTS_SEARCH_ID,\n              label: self.getResource(\"render-search-maximum-records-allowed\"),\n              value: \"\" });\n\n          } else {\n            data = data.slice(0, properties.maxRecords);\n          }\n\n          $.each(data, function (i, val) {\n            if (properties.maxRecords == 0 || i < properties.maxRecords) {\n              var parseValue = bizagi.util.performTermMatches(val.value, req.term);\n              var labelWithoutFormat = bizagi.util.performTermMatches(val.value, req.term, true);\n\n              suggestions.push({\n                id: val.id,\n                label: parseValue,\n                labelWithoutFormat: labelWithoutFormat,\n                value: val.value });\n\n            }\n          });\n        } else {\n          suggestions.push({\n            id: self.Class.NO_RESULTS_SEARCH_ID,\n            label: self.getResource(\"render-grid-no-records\"),\n            value: \"\" });\n\n        }\n\n        addToSuggestions(suggestions, req.term);\n\n        self.hideAutocompleteLoading();\n      });\n    } else {\n      addToSuggestions(suggestions, req.term);\n    }\n\n    /*\r\n      *   Method to add the special items to the suggestions\r\n      */\n    function addToSuggestions(allSuggestions, request) {\n      // Add the clear option\n      if (properties.allowClear && self.value !== undefined) {\n        allSuggestions.push({ id: self.Class.CLEAR_SEARCH_ID, label: \"\", value: \"\" });\n      }\n      // Add additional option if advanced search is on\n      if (properties.advancedSearch) {\n        allSuggestions.push({ id: self.Class.ADVANCED_SEARCH_ID, label: \"\", value: \"\" });\n      }\n\n      // Add additional option if allow addition is on\n      if (properties.allowAdd) {\n        allSuggestions.push({ id: self.Class.ADVANCED_ADDITION_ID, label: \"\", value: \"\" });\n      }\n\n      // Create local storage to improve the speed\n      var expireTime = new Date().getTime() + self.properties.expireCache;\n      var parseRequest = encodeURIComponent(request);\n\n      if (self.properties.enableLocalStorage) {\n        var expireKey = self.properties.xpath + \"_\" + parseRequest + \"_expire\";\n        var requestKey = self.properties.xpath + \"_\" + parseRequest;\n\n        bizagi.util.setItemLocalStorage(expireKey, expireTime);\n        bizagi.util.setItemLocalStorage(requestKey, JSON.encode(allSuggestions));\n      }\n\n      // Pass array to callback\n      add(allSuggestions);\n    }\n  },\n\n  /**\r\n      *   Returns the desired width for the suggestion menu\r\n      * @returns {}\r\n      */\n  calculateSuggestionWidth: function calculateSuggestionWidth() {\n    var suggestMenu = this.searchInput.data(\"ui-autocomplete\").menu.element;\n    return suggestMenu.width();\n  },\n  /**\r\n      *   Sets the value in the rendered control\r\n      * @param {} value\r\n      * @returns {}\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n    var properties = self.properties;\n    var label = \"\";\n\n    value = self.mapValue(value);\n\n    if (value != undefined && value != null) {\n      if (properties.editable) {\n        if (typeof value.value !== \"undefined\" && value.value) {\n          if (typeof value.labelWithoutFormat !== \"undefined\") {\n            self.searchInput.val(value.labelWithoutFormat);\n          } else {\n            self.searchInput.val(self.formatItem(value.value));\n          }\n\n          self.setValue(value);\n        } else if (value.additionallabel && value.label) {\n          label = value.label + \" - \" + value.additionallabel;\n          self.searchInput.val(label);\n        } else if (value.label) {\n          self.searchInput.val(value.label);\n        } else if (value && typeof value.id !== \"undefined\" && value.id === \"\") {\n          self.searchInput.val(\"\");\n        } else if (_typeof(value) != \"object\") {\n          self.searchInput.val(value);\n        }\n      } else {\n        var control = self.getControl();\n\n        if (typeof value.labelWithoutFormat !== \"undefined\") {\n          label = value.labelWithoutFormat;\n        } else {\n          label = value.label || value.value;\n        }\n\n        if (label !== undefined && label !== null) {\n          if (_typeof(label) == \"object\") {\n            label = label.join(\" - \");\n          }\n        } else {\n          label = \"\";\n        }\n\n        if (typeof label === \"string\") {\n          if (value.additionallabel) {\n            label += \" - \" + value.additionallabel;\n          }\n\n          label = bizagi.util.sanitizeHTML(label);\n        }\n\n        control.html(label);\n      }\n    }\n  },\n\n  /**\r\n      *   Returns the value to display, ex. non-editable renders\r\n      * @returns {}\r\n      */\n  getDisplayValue: function getDisplayValue() {\n    return this.selectedValue;\n  },\n\n  /**\r\n      * Open Add new record dialog\r\n      * @returns {}\r\n      */\n  showAddRecordDialog: function showAddRecordDialog() {\n    var self = this;\n    var properties = self.properties;\n    var buttons = {\n      text: bizagi.localization.getResource(\"render-form-dialog-box-add\"),\n      click: function click() {\n        // Show dialog with add form\n        var dialog = new bizagi.rendering.dialog.form(self.dataService, self.renderFactory, {\n          showSaveButton: properties.editable,\n          title: bizagi.localization.getResource(\"render-dialog-entity\"),\n          orientation: self.properties.orientation || \"ltr\",\n          onSave: function onSave(data) {\n            // Remove pagecache from data\n            var idPageCache = data.idPageCache;\n            var defer = $.Deferred();\n\n            var params = {\n              action: \"SAVE\",\n              data: data,\n              idPageCache: idPageCache,\n              guidEntity: properties.entity,\n              contexttype: \"entity\" };\n\n\n            // Check if the add form has data\n            var formData = {};\n            // Turn on flag to force to collect all data on the form\n            $.forceCollectData = true;\n\n            dialog.form.collectRenderValues(formData);\n\n            // Turn off flag\n            $.forceCollectData = false;\n\n            if (!bizagi.util.isMapEmpty(formData)) {\n              $.when(self.dataService.submitData(params)).done(function (response) {\n\n                // Set the previous added record to search grid form\n                function dataHasXpath(xpath) {\n                  var render = self.searchDialog.currentSearchForm.getRender(xpath);\n\n                  if (_typeof(render) == \"object\" && render != null) {\n                    return { \"found\": true, \"obj\": render };\n                  }\n\n                  return { \"found\": false, \"obj\": {} };\n                }\n\n                if (response && response.type === \"validationMessages\") {\n                  defer.resolve(response);\n                } else {\n                  for (var i in formData) {\n                    var mapping = dataHasXpath(i);\n                    if (mapping.found) {\n                      mapping.obj.setValue(formData[i]);\n                      self.setDisplayValueToControl(mapping.obj, dialog.form, i, formData);\n                    }\n                  }\n\n                  self.searchDialog.currentSearchForm.performSearch({\n                    allowFullSearch: properties.allowFullSearch,\n                    maxRecords: properties.maxRecords });\n\n\n                  if (dialog.form.properties.needsUserConfirmation) {\n                    $.when(bizagi.showConfirmationBox(dialog.form.properties.userConfirmationMessage, null, false)).done(function () {\n                      defer.resolve(data);\n                      dialog.closeDialogBox();\n                    }).fail(function () {\n                      defer.reject();\n                    });\n                  } else {\n                    defer.resolve(data);\n                    dialog.closeDialogBox();\n                  }\n                }\n              }).fail(function (jqXHR, type, message) {\n                if (type == \"parsererror\") {\n                  defer.resolve({\n                    type: \"error\",\n                    message: message.message });\n\n                } else {\n                  defer.reject(arguments);\n                }\n              });\n            } else {\n              // Form has not data\n              bizagi.showMessageBox(self.getResource(\"render-search-advanced-no-filters\"), \"\", \"error\");\n              defer.resolve();\n            }\n\n            return defer.promise();\n          },\n          close: function close() {\n            dialog.dialog('destroy');\n            dialog.remove();\n          } });\n\n        dialog.render({\n          idRender: properties.id,\n          idPageCache: properties.idPageCache,\n          requestedForm: \"addForm\",\n          guidEntity: properties.entity,\n          contextType: 'entity' }).\n        fail(function () {\n\n        });\n      } };\n\n\n    return { buttons: buttons };\n  },\n\n  /**\r\n      * Set display value by control type, when add new record\r\n      * @param renderControlSearchForm\r\n      * @param addForm\r\n      * @param xpath\r\n      * @param formData\r\n      */\n  setDisplayValueToControl: function setDisplayValueToControl(renderControlSearchForm, addForm, xpath, formData) {\n    if (renderControlSearchForm.properties.type === \"searchSuggest\") {\n      renderControlSearchForm.setDisplayValue(addForm.getRender(xpath).getDisplayValue());\n    } else {\n      renderControlSearchForm.setDisplayValue(formData[xpath]);\n    }\n  },\n\n  /**\r\n      *   Opens the search dialog\r\n      * @returns {}\r\n      */\n  showSearchDialog: function showSearchDialog() {\n    var self = this;\n    var properties = self.properties;\n    var extraButtons;\n    var contextType = properties.searchForms.length > 0 && properties.searchForms[0].type === \"searchForm\" ? \"metadata\" : \"entity\";\n\n    // Define add button\n    if (properties.allowNew) {\n      extraButtons = self.showAddRecordDialog();\n    }\n\n    // Show search dialog\n    self.searchDialog = new bizagi.rendering.dialog.search(self.dataService, self.renderFactory, properties.searchForms, {\n      allowFullSearch: properties.allowFullSearch,\n      maxRecords: properties.maxRecords,\n      orientation: properties.orientation || \"ltr\" },\n    extraButtons);\n\n    self.searchDialog.render({\n      idRender: properties.id,\n      xpath: properties.xpath,\n      xpathContext: properties.xpathContext,\n      idPageCache: properties.idPageCache,\n      contexttype: contextType,\n      orientation: properties.orientation || \"ltr\" }).\n    done(function (item) {\n      // Set data\n      self.setValue(item);\n\n      self.readyActionExecution().done(function () {\n        var form = self.getFormContainer();\n\n        if (!self.properties.submitOnChange) {\n          $.when(form.submitData()).done(function () {\n            self.refreshControl();\n          });\n        }\n      });\n\n    });\n  },\n\n  showAutocompleteLoading: function showAutocompleteLoading() {\n    $(\"i\", this.getControl()).addClass(\"ui-autocomplete-loading\");\n  },\n\n  hideAutocompleteLoading: function hideAutocompleteLoading() {\n    $(\"i\", this.getControl()).removeClass(\"ui-autocomplete-loading\");\n  },\n\n  /**\r\n      * Cleans current data\r\n      * @returns {}\r\n      */\n  cleanData: function cleanData() {\n    var self = this;\n    var control = self.getControl();\n    var value = { id: \"\" };\n\n    self.setDisplayValue(value);\n    self.setValue(value, false);\n\n    if (!self.properties.editable) {\n      $(control).html(\"<label class='readonly-control'></label>\");\n    }\n  },\n\n  changeRequired: function changeRequired(argument) {\n    this.properties.required = argument;\n    this.changeRequiredLabel(argument);\n  },\n\n  changeRequiredLabel: function changeRequiredLabel(argument) {\n    var control = this.getControl();\n\n    if (control.length > 0) {\n      if (this.getMode() !== \"execution\") {\n        if (bizagi.util.parseBoolean(argument) == true && this.properties.editable) {\n          control.addClass('control-required');\n        } else {\n          control.removeClass('control-required');\n        }\n      } else {\n        if (bizagi.util.parseBoolean(argument) == true && !this.hasValue() && this.properties.editable) {\n          control.addClass('control-required');\n        } else {\n          control.removeClass('control-required');\n        }\n      }\n    }\n\n    this.triggerRenderValidate();\n  },\n\n  changeCellRequired: function changeCellRequired(argument) {\n    this.changeRequired(argument);\n  },\n\n  /**\r\n      * Get valid id of control\r\n      * @param value\r\n      * @returns {number}\r\n      */\n  getValueId: function getValueId(value) {\n    var currentId = value.id || \"\";\n\n    // Check if it's a virtual entity\n    if (bizagi.util.isString(currentId) && /idEntity(.*)businessKey/ig.test(currentId)) return currentId;\n    return bizagi.util.isNumeric(currentId) ? currentId : value.value;\n  },\n\n  /**\r\n      * Check valid label of control\r\n      * @param value\r\n      */\n  getValueLabel: function getValueLabel(value) {\n    var displayValue = value.label;\n\n    if (!bizagi.util.isString(displayValue) && bizagi.util.isString(value.value)) {\n      displayValue = value.value;\n    }\n\n    return displayValue;\n  },\n\n  /**\r\n      * Check if dialog is preferences view\r\n      * @param container\r\n      * @returns {*|Array|boolean}\r\n      */\n  isPreferencesDialog: function isPreferencesDialog(container) {\n    var preferences = container && container.closest(\".bz-wp-userpreferences-main\") || [];\n    return preferences && preferences.length > 0;\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /**\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: Bizagi Desktop Render Form Link Extension\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: UI Forms Team\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This script will redefine the link render class to adjust to desktop devices\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\n// Extends from render Desktop base\nbizagi.rendering.desktop.render.extend(\"bizagi.rendering.desktop.formLink\", {\n  BA_ACTION_PARAMETER_PREFIX: \"p_\",\n  BA_CONTEXT_PARAMETER_PREFIX: \"h_\",\n  BA_PAGE_CACHE: \"pageCacheId\" },\nbizagi.rendering.formLink.prototype);\n// Extends itself\nbizagi.rendering.desktop.formLink.extend(\"bizagi.rendering.desktop.formLink\", {}, {\n  /**\r\n                                                                                     * Customize the render's behaviour to add handlers\r\n                                                                                     */\n  configureHandlers: function configureHandlers() {\n    this.attachEvents();\n  },\n\n  /**\r\n      * Customize the render's behaviour\r\n      * to add handlers when the control is readonly\r\n      */\n  configureHandlersReadOnly: function configureHandlersReadOnly() {\n    this.attachEvents();\n  },\n\n  /**\r\n      * Execute the rule action\r\n      * @param propertyName\r\n      * @returns {*}\r\n      */\n  executeRule: function executeRule(propertyName) {\n    var defer = new $.Deferred();\n\n    this.dataService.multiaction().getPropertyData({\n      url: this.properties.dataUrl,\n      xpath: this.properties.xpath,\n      idRender: this.properties.id,\n      xpathContext: this.properties.xpathContext,\n      idPageCache: this.properties.idPageCache,\n      property: propertyName }).\n    done(function (data) {\n      if (data.type === \"error\") {\n        // Workflow engine error\n        defer.reject(data);\n      } else if (data.messages != null) {\n        var message = data.messages[0];\n        defer.reject({ type: data.type, message: message });\n      } else {\n        defer.resolve(data);\n      }\n    }).fail(function (jqXHR, textStatus, errorThrown) {\n      defer.reject({ type: \"error\", message: jqXHR.message });\n    });\n    return defer.promise();\n  },\n\n  /**\r\n      * Validation of rule on exit\r\n      * @returns {*}\r\n      */\n  executeExitRule: function executeExitRule(data) {\n    var self = this;\n    var deferred = new $.Deferred();\n    if (self.properties.hasexitrule && !self.isThisFormReadOnly()) {\n      return self.saveFormLinkData(data).then(function () {\n        return self.executeRule(\"exitrule\");\n      });\n    } else {\n      deferred.resolve();\n    }\n    return deferred.promise();\n  },\n\n  /**\r\n      * Execution of rule before the formLink on enter\r\n      * @returns {*}\r\n      */\n  executeEntryRule: function executeEntryRule() {\n    var deferred = new $.Deferred();\n\n    if (this.properties.hasentryrule && !this.isThisFormReadOnly()) {\n      return this.executeRule(\"entryrule\");\n    } else {\n      deferred.resolve();\n    }\n\n    return deferred.promise();\n  },\n\n  /**\r\n      * Submits a link save request for the displayed form\r\n      * @param data\r\n      * @returns {*} Returns a deferred\r\n      */\n  submitSaveRequest: function submitSaveRequest(data) {\n    var self = this;\n    var properties = self.properties;\n\n    // Don't send request when the link is not editable\n    if (!properties.editable && !properties.value) {\n      return null;\n    }\n\n    var xpath = self.getFormLinkXpath();\n    var xpathContext = xpath;\n\n    if (typeof properties.xpathContext !== \"undefined\" && properties.xpathContext !== \"\") {\n      xpathContext = xpath ? properties.xpathContext + \".\" + xpath : properties.xpathContext;\n    }\n\n    return self.dataService.saveLinkForm({\n      url: properties.saveUrl,\n      idRender: properties.id,\n      xpathContext: xpathContext,\n      submitData: data });\n\n  },\n\n  /**\r\n      * Check if display is readonly\r\n      * @returns {undefined|boolean}\r\n      */\n  isThisFormReadOnly: function isThisFormReadOnly() {\n    var form = this.getFormContainer();\n    return form && form.properties.displayAsReadOnly;\n  },\n\n  /**\r\n      * Opens the link display form inside a dialog\r\n      */\n  openFormLink: function openFormLink() {\n    var self = this;\n    var properties = self.properties;\n    var form = self.getFormContainer();\n\n    if (typeof properties.canBeSaved == \"undefined\") {\n      properties.canBeSaved = true;\n    }\n\n    // When the link is not editable, then the form can't have save button\n    if (properties.editable === false || form.properties.displayAsReadOnly) {\n      properties.canBeSaved = false;\n    }\n\n    return $.when(form.properties.editable && !self.isThisFormReadOnly() ? form.submitData() : undefined).then(function () {\n      // Send edit request\n      return $.when(self.submitEditRequest()).then(function () {\n        return self.executeEntryRule().then(function () {\n          self.openFormLinkDialog();\n        }).fail(function (response) {\n          self.submitRollbackRequest();\n          self.handleFailRuleExecution(response);\n        });\n      }).fail(function () {\n        console.warn(\"EDITRELATION action Fails\");\n      });\n    });\n  },\n\n  /**\r\n      * Show dialog with new form\r\n      */\n  openFormLinkDialog: function openFormLinkDialog() {\n    var self = this;\n    var properties = self.properties;\n    var form = self.getFormContainer();\n\n    // Show dialog with new form after that\n    self.dialog = new bizagi.rendering.dialog.form(self.dataService, self.renderFactory, {\n      showSaveButton: properties.canBeSaved,\n      isPlanForm: properties.isPlanForm || false, //If this formLink is in a plan form\n      maximized: properties.maximized,\n      title: properties.displayName,\n      orientation: properties.orientation || \"ltr\",\n      onSave: function onSave(data) {\n        var def = new $.Deferred();\n        var deferredsToWait = null;\n\n        if (data && data.deferreds) {\n          deferredsToWait = $.when.apply($, data.deferreds);\n          delete data.deferreds;\n        }\n\n        $.when(deferredsToWait).then(function () {\n          self.handleOnSaveDialog(data).then(function (response) {\n            def.resolve(response);\n            form.refreshForm();\n          }).fail(function () {\n            def.reject();\n          });\n        });\n        return def.promise();\n      },\n      close: function close() {\n      } });\n\n\n    // Open dialog\n    self.dialog.render({\n      idRender: properties.id,\n      xpathContext: self.getFormLinkXpathContext(),\n      idPageCache: properties.idPageCache,\n      recordXPath: self.getFormLinkXpath(),\n      requestedForm: \"linkform\",\n      editable: properties.editable,\n      url: properties.editPage,\n      fromRender: self,\n      mainForm: self.getMainForm(self.getFormContainer()) }).\n    fail(function (data) {\n      // Sends a rollback request to delete checkpoints\n      $.when(self.submitRollbackRequest(data)).done(function () {\n        self.submitInvalidatePageCacheRequest(data);\n      });\n    });\n  },\n\n  /**\r\n      * Add an error message to the form\r\n      * @param response\r\n      */\n  handleFailRuleExecution: function handleFailRuleExecution(response) {\n    if (response.type === \"alertMessages\") {\n      bizagi.modalError &&\n      bizagi.modalError.show(response.message, \"workportal-general-word-information\", false);\n    } else {\n      var form = this.getFormContainer();\n      if (response.type === \"validationMessages\") {\n        form.validationController.showErrorMessage(response.message);\n      } else {\n        form.addErrorMessage(response.message);\n      }\n    }\n  },\n\n  /**\r\n      * Manage the action execution on save action\r\n      * @param data\r\n      * @returns {*}\r\n      */\n  handleOnSaveDialog: function handleOnSaveDialog(data) {\n    var self = this;\n\n    return self.executeExitRule(data).then(function () {\n      var def = new $.Deferred();\n      //If has exit rule, the data has been processed previously (executeExitRule()),\n      //then is only needed process the form and do a commit with the submitSaveRequest.\n      var submitData = self.properties.hasexitrule ? { idPageCache: data.idPageCache } : data;\n      self.submitSaveRequest(submitData).then(function (result) {\n        if (result.type === \"error\") {\n          // Workflow engine error\n          def.reject(result);\n        } else if (result.messages != null) {\n          var message = result.messages[0];\n          def.reject({ type: result.type, message: message });\n        } else {\n          def.resolve(result);\n        }\n      }).fail(function (jqXHR) {\n        def.reject({ type: \"error\", message: jqXHR.message });\n      });\n      return def.promise();\n    }).fail(function (response) {\n      self.handleFailRuleExecution(response);\n      return response;\n    });\n  },\n\n  /**\r\n      * Get context of FormLink\r\n      * @returns {string|*}\r\n      */\n  getFormLinkXpathContext: function getFormLinkXpathContext() {\n    var self = this;\n    var xpathContext = self.properties.xpathContext;\n    var parentXpathContext = self.getXpathContext();\n\n    if (parentXpathContext && xpathContext) {\n      if (xpathContext.indexOf(parentXpathContext) === 0) {\n        return xpathContext;\n      } else {\n        return parentXpathContext + \".\" + xpathContext;\n      }\n    } else {\n      return xpathContext;\n    }\n  },\n\n  /**\r\n      * Configure event handlers\r\n      */\n  attachEvents: function attachEvents() {\n    var self = this;\n    var $link = $(\".ui-bizagi-render-link\", self.getControl());\n\n    // Define dialog\n    self.dialog = null;\n\n    // Bind click event\n    $link.on(\"click\", function () {\n      // Open the link inside a dialog\n      var $buttonLink = $(this);\n      $buttonLink.prop(\"disabled\", true);\n\n      $.when(self.openFormLink()).always(function () {\n        $buttonLink.prop(\"disabled\", false);\n      });\n    });\n  },\n\n  /**\r\n      * Customizes render color\r\n      * @param color\r\n      */\n  changeColor: function changeColor(color) {\n    var self = this;\n    var control = self.getControl();\n    var label = self.getLabel();\n\n    if (control && label) {\n      if (color !== \"none\") {\n        self.getControl().find(\"a\").css(\"color\", color, \"!important\");\n\n        if (typeof self.getControl().find(\"a\").style == \"function\") {\n          self.getControl().find(\"a\").style(\"color\", color, \"!important\");\n        }\n      } else {\n        self.getControl().find(\"a\").css(\"color\", \"\");\n\n        if (typeof self.getControl().find(\"a\").style == \"function\") {\n          self.getControl().find(\"a\").style(\"color\", \"\");\n        }\n      }\n    }\n    self._super(color);\n  },\n\n  /**\r\n      * Customizes render font style\r\n      */\n  changeFontBold: function changeFontBold() {\n    var self = this;\n    var control = self.getControl().children();\n    var textFormat = self.properties.textFormat;\n\n    if (typeof textFormat.bold !== \"undefined\") {\n      if (_typeof(control) == \"object\" && control.length > 0) {\n        self.getElementsToStylize(control).css(\"font-weight\", \"bold\", \"!important\");\n      }\n    }\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /*\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: BizAgi Desktop Render Association Extension\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: Edward Morales\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This script will redefine the Association control\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\n// Extends from render Desktop base\nbizagi.rendering.desktop.render.extend(\"bizagi.rendering.desktop.association\", bizagi.rendering.render.base.prototype);\n// Extends from render Desktop base\nbizagi.rendering.desktop.association.extend(\"bizagi.rendering.desktop.association\", bizagi.rendering.association.prototype);\n// Extends itself\nbizagi.rendering.desktop.association.extend(\"bizagi.rendering.desktop.association\", {}, {\n\n  /*\r\n                                                                                          *   Template method to implement in each device to customize each render after processed\r\n                                                                                          */\n  postRender: function postRender() {\n    var self = this;\n\n  },\n\n  /*\r\n     *   Template method to implement in each device to customize the render's behaviour to add handlers\r\n     */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"association\");\n    var control = self.getControl();\n\n    // Call base\n    self._super();\n\n    // Set close event to element into self.properties.value\n    $(\"ol .deleteBotton\", control).bind(\"click\", function () {\n      self.closeElement($(this).parent(\"li\"));\n    });\n\n    // Apply accordion control\n    $(\".bz-render-association-accordion\", control).togglepanels({\n      header: \"> div > h3\",\n      autoHeight: false,\n      animated: false });\n\n\n    $.when(self.isRendered()).\n    done(function () {\n      var firstGroup = $(\".bz-render-association-accordion h3\", control).first();\n      firstGroup.click();\n    });\n\n\n    if (self.properties.allowFlip) {\n      // Bind event for flip botton\n      $(\".bz-render-association .flip-arrow\", control).bind(\"click\", function () {\n        $(control).empty();\n        // Define flipped\n        self.properties.flipped = !self.properties.flipped;\n\n        // Send flip data to server\n        self.properties.flipstate = self.properties.flipped;\n\n        self.dataService.getFlipAssociation(self.properties);\n\n        // Render template  \n        $.tmpl(template, self.properties, {\n          getColumnData: self.getColumnData,\n          getRightAssociation: self.getRightAssociation }).\n        appendTo(control);\n\n        self.internalPostRender();\n      });\n    }\n\n    if (self.properties.editable) {\n      $(\".bz-render-association bz-render-association-check-mask, .bz-render-association .bz-render-association-check\", control).bind(\"click\", function (e) {\n        e.stopPropagation();\n        var input = $(this);\n        var idLeft = $(this).parents(\"ol\").data(\"id\");\n        var idRight = $(this).data(\"id\");\n\n        if (input.prop(\"checked\")) {\n          // check element\n          input.prop(\"checked\", true);\n\n          // Add element to global value\n          self.addElement(idLeft, idRight);\n        } else {\n          // uncheck\n          input.prop(\"checked\", false);\n\n          // Remove from JSON\n          self.removeElement(idLeft, idRight);\n        }\n      });\n\n      $(\".bz-render-association .bz-render-association-left-container li\", control).bind(\"click\", function (e, ui) {\n        e.stopPropagation();\n\n        var input = $(this).find(\"input\").length > 0 ? $(this).find(\"input\") : $(this);\n        var mask = $(\".bz-render-association-check-mask\", $(this));\n        var idLeft = $(this).parent(\"ol\").data(\"id\");\n        var idRight = $(this).data(\"id\") || $(this).parents(\"li\").data(\"id\");\n\n        if (input.prop(\"checked\")) {\n          // uncheck\n          input.removeAttr(\"checked\");\n          mask.removeClass(\"checked\");\n          mask.addClass(\"unchecked\");\n\n          // Remove from JSON\n          self.removeElement(idLeft, idRight);\n\n        } else {\n          // check element\n          input.prop(\"checked\", true);\n          mask.removeClass(\"unchecked\");\n          mask.addClass(\"checked\");\n\n          // Add element to global value\n          self.addElement(idLeft, idRight);\n        }\n\n      });\n    }\n  },\n\n  /**\r\n     * Set Bind event to delete botton\r\n     */\n  setBindToClose: function setBindToClose(element) {\n    var self = this;\n    element.find(\".deleteBotton\").bind(\"click\", function () {\n      self.closeElement($(this).parent(\"li\"));\n    });\n  },\n\n  /**\r\n     * Execute close action\r\n     */\n  closeElement: function closeElement(element) {\n    var self = this;\n    var ol = element.parent(\"ol\");\n    // Remove from JSON\n    self.removeElement($(ol).data(\"id\"), element.data(\"id\"));\n\n    // Remove element\n    element.hide(\"highlight\", 1000, function () {\n      $(this).remove();\n    });\n  },\n\n\n\n  /*\r\n     *   Method to render non editable values\r\n     */\n  postRenderReadOnly: function postRenderReadOnly() {\n    var self = this;\n    var control = self.getControl();\n    var template = self.renderFactory.getTemplate(\"association\");\n\n    self.properties.classCss = \"read-only\";\n\n    // Make json base, create self.properties.formatJson\n    self.makeJsonBase();\n\n    // Render template  \n    $.tmpl(template, self.properties, {\n      getColumnData: self.getColumnData,\n      getRightAssociation: self.getRightAssociation,\n      getLeftName: self.getLeftName }).\n    appendTo(control);\n\n    // Apply accordion control\n    $(\".bz-render-association-accordion\", control).togglepanels({\n      header: \"> div > h3\",\n      autoHeight: false });\n\n\n    $.when(self.isRendered()).\n    done(function () {\n      var firstGroup = $(\".bz-render-association-accordion h3\", control).first();\n      firstGroup.click();\n    });\n\n    if (self.properties.allowFlip) {\n      // Bind event for flip botton\n      $(\".bz-render-association .flip-arrow\", control).bind(\"click\", function () {\n        $(control).empty();\n        // Define flipped\n        self.properties.flipped = !self.properties.flipped;\n\n        self.postRenderReadOnly();\n      });\n    }\n  },\n\n  /*\r\n     *   Add the render data to the given collection in order to send data to the server\r\n     */\n  collectData: function collectData(renderValues) {\n    var self = this;\n\n    // Call base method\n    self._super(renderValues);\n  },\n\n  /*\r\n     * Method to render non editable values\r\n     */\n  renderReadOnly: function renderReadOnly() {\n    var result = this.getValue();\n    return _typeof(result) === \"object\" ? \"\" : result;\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /*\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: BizAgi Render Query Search User\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: Jeison Borja\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This script will define desktop stuff for query search user renders\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Modified by: Andrs F. Muoz\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   - This control Implemments the search users plugin\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\n// Extends from render Desktop base\nbizagi.rendering.desktop.render.extend(\"bizagi.rendering.desktop.querySearchUser\", bizagi.rendering.querySearchUser.prototype);\n// Extends itself\nbizagi.rendering.desktop.querySearchUser.extend(\"bizagi.rendering.desktop.querySearchUser\", {}, {\n  /*\r\n                                                                                                   *   Update or init the element data\r\n                                                                                                   */\n  initializeData: function initializeData(data) {\n    // Call base\n    this._super(data);\n  },\n\n  /*\r\n      * Template method to implement in each device to customize each render after processed\r\n      */\n  postRender: function postRender() {\n    var self = this;\n    // Call base\n    self.input = $(\".ui-bizagi-render-text\", self.getControl());\n    // Call base\n    this._super();\n  },\n\n  /*\r\n      *   Sets the value in the rendered control\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    if (_typeof(value) === \"object\") {\n      if (_typeof(value[0]) === \"object\" && value[0].label !== undefined) {\n        value = value[0].label;\n      } else\n      {\n        value = value.label;\n      }\n    } else\n    {\n      value = '';\n    }\n\n    var self = this,\n    properties = self.properties;\n\n    // Call base\n    this._super(value);\n\n    // Set value in input\n    if (!bizagi.util.isEmpty(value) && properties.editable) {\n      self.input.val(value);\n    }\n  },\n\n  /*\r\n      * Template method to implement in each device to customize the render's behaviour to add handlers\r\n      */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    var control = self.getControl();\n\n    self.bindSearchUserPlugin(control);\n  },\n\n  /*\r\n      * Binds the search user plugin\r\n      */\n  bindSearchUserPlugin: function bindSearchUserPlugin(control) {\n    var self = this;\n    var idForm = self.getFormContainer().properties.id;\n\n    var options = {\n      title: self.getResource(\"render-plugin-search-users-title\"),\n      filters: [\"domain\", \"userName\", \"fullName\"],\n      displayNames: [\n      self.getResource(\"render-plugin-search-users-domain\"),\n      self.getResource(\"render-plugin-search-users-user-name\"),\n      self.getResource(\"render-plugin-search-users-full-name\")],\n      searchButtonName: self.getResource(\"render-plugin-search-users-search-button-name\"),\n      clearButtonName: self.getResource(\"render-plugin-search-users-clear-button-name\"),\n      valuesToSelect: [\"iduser\", \"username\"], //\"iduser\",\"username\",\"user\",\"domain\",\"email\"\n      renderFactoryReference: self.renderFactory,\n      getResourceReference: self.getResource.bind(self),\n      selectItem: function selectItem() {\n        var deferred = $.Deferred();\n        deferred.done(function (data) {\n          self.onItemSelectedSuccess(data);\n        }).fail(function (error) {\n          bizagi.log(error);\n        });\n        return deferred;\n      },\n      searchUsers: function searchUsers(filterData) {\n        return self.dataService.getUsersListFromQueryForm($.extend(filterData, { queryFormId: idForm }));\n      },\n      showError: function showError(error) {\n        bizagi.log(error);\n      },\n      showMessageBox: function showMessageBox(message) {\n        bizagi.showMessageBox(bizagi.localization.getResource(message), \"Bizagi\", \"warning\");\n      } };\n\n\n    opt = options;\n\n    $('#btn-get-user', control).bizagiSearchUser(options);\n  },\n  /*\r\n     * returns the opt var for unit testing\r\n     * */\n  getOptions: function getOptions() {\n    return opt;\n  },\n\n  onItemSelectedSuccess: function onItemSelectedSuccess(itemSelected) {\n    var self = this;\n    var control = self.getControl();\n    $(\".ui-bizagi-render-text\", control).val(itemSelected.username);\n    var item = {};\n    item.id = itemSelected.iduser;\n    item.label = itemSelected.username;\n    item.value = itemSelected.username;\n    self.setValue(item);\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /**\r\n                                                                                                                                                                                                                                                                                                                                                                                * Device definition of Polymorphic launcher\r\n                                                                                                                                                                                                                                                                                                                                                                                *\r\n                                                                                                                                                                                                                                                                                                                                                                                * @author: Edward J Morales\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\n// Extends from render desktop base\nbizagi.rendering.desktop.render.extend(\"bizagi.rendering.desktop.polymorphicLauncher\", bizagi.rendering.polymorphicLauncher.prototype);\n// Extends itself\nbizagi.rendering.desktop.polymorphicLauncher.extend(\"bizagi.rendering.desktop.polymorphicLauncher\", {}, {\n  /**\r\n                                                                                                           * Render a specific implementation for Desktop device\r\n                                                                                                           */\n  postRender: function postRender() {\n    var self = this;\n    var properties = self.properties;\n    var mode = self.getMode();\n    var html, template;\n    var def = new $.Deferred();\n\n    if (mode == \"design\" || !self.properties.surrogatedKey) {\n      return \"\";\n    }\n\n    self.configureQueueVisibility();\n\n    /**\r\n                                      * Render a template\r\n                                      * @param template\r\n                                      * @param templateArguments\r\n                                      */\n    function appendContent(template, templateArguments) {\n      var control = self.getControl();\n      var actionsContainer = $(\".bz-action-launcher-actions-container\", control);\n      html = $.fasttmpl(template, templateArguments);\n      actionsContainer.append(html);\n      if (self.properties.readOnly !== true) {\n        self.configureHandlers();\n      }\n\n      def.resolve(actionsContainer);\n    }\n\n    /**\r\n       * Define params to get list of actions\r\n       */\n    $.when(self.dataService.multiaction().getPolymorphicActions(self.processPropertyValueArgs)).done(function (response) {\n      // Convert default response to tree data structure\n      response = self.dataService.serializePolymorphicActions(response);\n\n\n      self.totalActions = bizagi.clone(response);\n      var actions = bizagi.clone(response);\n\n      self.lessActions = bizagi.clone(actions);\n\n\n      // NOTE: Code extracted\n      var templateArguments = {\n        actions: actions,\n        allowSearch: properties.allowSearch,\n        treeActionsList: self.getTreeItems(actions) };\n\n      template = self.renderFactory.getTemplate(\"render-polymorphicLauncher-vertical-tree\");\n\n      appendContent(template, templateArguments);\n\n    }).fail(function (error) {\n      def.fail(error);\n    });\n\n    return def.promise();\n  },\n\n  /**\r\n      * Get rendered html of each node of constructors\r\n      * @param actions\r\n      * @param level\r\n      * @return {string}\r\n      */\n  getTreeItems: function getTreeItems(actions, level) {\n    var self = this;\n    var item = \"<ul>\";\n    var templateTreeItem = self.renderFactory.getTemplate(\"render-polymorphicLauncher-vertical-tree-item\");\n    actions = actions || {};\n    level = level || 1;\n\n    $.each(actions, function (key, value) {\n      item += $.fasttmpl(templateTreeItem, value);\n\n      if (value.children) {\n        item += self.getTreeItems(value.children, level + 1);\n      }\n    });\n    item += \"</ul>\";\n    return item;\n  },\n\n  /**\r\n      * Add binding to html elements\r\n      */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    var control = self.getControl();\n    var formContainer = self.getFormContainer();\n    if (typeof formContainer.params.printversion === \"undefined\" || formContainer.params.printversion == false) {\n      var actionLauncherControls = $(\".ui-bizagi-render-polymorphicLauncher-list li>span\", control);\n\n      //Binding for click action on buttons\n      actionLauncherControls.on(\"click\", function () {\n        var $targetData = $(this).parent();\n        var action = {\n          guidEntity: $targetData.data(\"guidentity\"),\n          guidObject: $targetData.data(\"guidobject\"),\n          guidConstructor: $targetData.data(\"guidconstructor\"),\n          displayName: $targetData.data(\"display-name\"),\n          actionType: $targetData.data(\"action-type\"),\n          xpathContext: $targetData.data(\"xpathcontext\") };\n\n        self.onActionClicked(action);\n      });\n      //Catch the typed text in the search field and filter the action list\n      $.expr[\":\"].FilterAction = function (entity, i, array) {\n        var search = array[3];\n        if (!search) {\n          return false;\n        }\n        return new RegExp(search, \"i\").test($(entity).text());\n      };\n      $(\"input#ui-bizagi-render-action-launcher-filter-input\", control).keyup(function () {\n        var search = $(this).val();\n\n        if (search) {\n          // Hide all nodes\n          $(\"li\", control).hide(0);\n          // Show only the nodes that match with the respective search pattern\n          $(\"li[data-hasconstructor='true']\", control).filter(\":FilterAction(\" + search + \")\").show(0, function () {\n            var actualValue = $(\"label\", this).html();\n            var $node = $(this);\n            var path = $node.data(\"parents\") + $node.data(\"title\");\n            // Set value to cache\n            if (!$node.data(\"cachedvalue\")) {\n              $node.data(\"cachedvalue\", actualValue);\n            }\n            $(\"label\", this).html(path);\n          });\n        } else {\n          $(\"li\", control).show(0, function () {\n            var cachedValue = $(this).data(\"cachedvalue\");\n            $(\"label\", this).html(cachedValue);\n          });\n        }\n      });\n    }\n  },\n\n  /**\r\n      * Execute an Action\r\n      * @param action\r\n      */\n  onActionClicked: function onActionClicked(action) {\n    var self = this;\n\n    $.when(self.actionManager(action)).done(function (act) {\n      self.executeAction(act);\n    });\n  },\n\n  /**\r\n      * Show a message when action has been executed\r\n      * @param status\r\n      * @param action\r\n      */\n  notifyExecution: function notifyExecution(status, action) {\n    var self = this;\n    var notifications = new bizagi.INotifications();\n    if (status == \"success\") {\n      notifications.showSucessMessage(printf(self.getResource(\"render-action-launcher-success-excecution\"), action.displayName), null, {});\n    } else {\n      notifications.showErrorMessage(printf(self.getResource(\"render-action-launcher-failed-excecution\"), action.displayName), null, {});\n    }\n  },\n\n  /**\r\n      * Show a dialog with a form\r\n      * @param action\r\n      * @return {*}\r\n      */\n  processActionForm: function processActionForm(action) {\n    var self = this;\n    var properties = self.properties;\n    var form = self.getFormContainer();\n    var additionalXpaths = self.properties.additionalXpath.join(\",\");\n    var def = new $.Deferred();\n    var xpathContext = action.xpathContext || \"\";\n    var surrogatedKey;\n    if (self.properties.type !== \"polymorphicLauncher\") {\n      surrogatedKey = _typeof(self.properties.surrogatedKey) == \"object\" && self.properties.surrogatedKey.length > 1 ? self.properties.surrogatedKey : self.properties.surrogatedKey[0];\n    }\n\n    var recordXpath = self.properties.recordXpath;\n\n    // Show dialog with new form after that\n    var dialog = new bizagi.rendering.dialog.form(self.dataService, self.renderFactory, {\n      title: properties.detailLabel || bizagi.localization.getResource(\"render-grid-details-form\"),\n      showSaveButton: true,\n      cancelButtonLabel: bizagi.localization.getResource(\"render-form-dialog-box-close\"),\n      onSave: function onSave(data) {\n        var pageCache = data.idPageCache;\n        data.idPageCache = null;\n        // Submit the form\n        return self.dataService.multiaction().submitData({\n          action: \"SAVE\",\n          data: data,\n          xpathContext: dialog.form.properties.xpathContext, //self.properties.xpathContext,\n          idPageCache: pageCache,\n          isOfflineForm: false,\n          isActionStartForm: true }).\n        pipe(function (savedData) {\n          if (!action.editMode && self.countSameActions(action) == 0) {\n            action.idStartScope = savedData.IdScope;\n          }\n          def.resolve(savedData.IdScope);\n        });\n      },\n      onCancel: function onCancel(data) {\n\n      } });\n\n\n    dialog.render({\n      \"idForm\": action.guidObject,\n      \"contextType\": \"entity\",\n      \"guidEntity\": action.guidEntity,\n      \"idCase\": self.properties.caseId,\n      \"idWorkitem\": form.properties.typeForm != \"SummaryForm\" ? bizagi.context.idWorkitem : undefined,\n      \"additionalXpaths\": additionalXpaths,\n      //\"xpathContext\": xpathContext,\n      \"idStartScope\": action.idStartScope,\n      \"surrogateKey\": surrogatedKey,\n      \"recordXpath\": recordXpath });\n\n\n    return def.promise();\n  },\n\n  /**\r\n      * Process a start form\r\n      * @param args\r\n      * @return {*}\r\n      */\n  processStartForm: function processStartForm(args) {\n    var self = this;\n    var properties = self.properties;\n    var form = self.getFormContainer();\n    var def = new $.Deferred();\n    var surrogatedKey;\n    if (self.properties.type !== \"polymorphicLauncher\") {\n      surrogatedKey = _typeof(self.properties.surrogatedKey) == \"object\" && self.properties.surrogatedKey.length > 1 ? self.properties.surrogatedKey : self.properties.surrogatedKey[0];\n    }\n    args = args || {};\n\n    var dialog = new bizagi.rendering.dialog.startForm(self.dataService, self.renderFactory, {\n      //showSaveButton: properties.editable,\n      maximized: properties.maximized,\n      title: args.title || \"\",\n      saveButtonLabel: self.typeForm == \"GlobalForm\" || this.typeForm == \"SummaryForm\" ? bizagi.localization.getResource(\"render-form-button-create\") : bizagi.localization.getResource(\"render-form-dialog-box-save\"),\n      onSave: function onSave(data) {\n        form.startLoading();\n\n        // Submit the form\n        return self.dataService.multiaction().submitData({\n          action: \"SAVE\",\n          data: data,\n          xpathContext: self.properties.xpathContext,\n          idPageCache: data.idPageCache,\n          isOfflineForm: false,\n          isActionStartForm: true }).\n        pipe(function (savedData) {\n          form.endLoading();\n          def.resolve(savedData.IdScope);\n        });\n      } });\n\n\n    dialog.render({\n      guidprocess: args.guidprocess,\n      idStartScope: args.idStartScope,\n      idCase: self.properties.caseId,\n      idWorkitem: form.properties.typeForm != \"SummaryForm\" ? bizagi.context.idWorkitem : undefined,\n      additionalXpaths: self.properties.additionalXpath.join(\",\"),\n      surrogatedKey: surrogatedKey,\n      recordXpath: args.recordXpath,\n      mappingstakeholders: true });\n\n\n    return def.promise();\n  },\n\n  /**\r\n      * Execute and action if a form is global form or summary, or send to queue\r\n      * @param action\r\n      */\n  executeAction: function executeAction(action) {\n    var self = this;\n\n    if (self.typeForm == \"GlobalForm\" || self.typeForm == \"SummaryForm\") {\n      $.when(bizagi.showConfirmationBox(bizagi.localization.getResource(\"render-action-launcher-immediatly-action-confirmation\"), null, false)).done(function (response) {\n        self.executeActionImmediately(action);\n      });\n    } else {\n      self.addActionToQueue(action);\n    }\n  },\n\n  /**\r\n      * Show confirmation dialog\r\n      * @param action\r\n      */\n  showConfirmationDialog: function showConfirmationDialog(action) {\n    var self = this;\n    self.confirmTemplate = self.renderFactory.getTemplate(\"render-polymorphicLauncher-confirm\");\n    var message = bizagi.localization.getResource(\"render-action-launcher-single-action-confirmation\");\n    var confirmContent = $.tmpl(self.confirmTemplate, { confirmationMessage: message });\n    var confirmContentParams = {\n      resizable: false,\n      modal: true,\n      title: \"Bizagi\",\n      buttons: [] };\n\n    confirmContentParams.buttons = [\n    {\n      text: bizagi.localization.getResource(\"render-boolean-yes\"),\n      click: function click() {\n        self.setValue([]);\n        $.when(self.actionManager(action)).done(function (act) {\n          self.executeAction(act);\n        });\n        $(this).dialog(\"close\");\n      } },\n\n    {\n      text: bizagi.localization.getResource(\"render-boolean-no\"),\n      click: function click() {\n        $(this).dialog(\"close\");\n      } }];\n\n\n    $(confirmContent).dialog(confirmContentParams);\n  },\n\n  /**\r\n      * Render actual value of control and set events\r\n      * @param data\r\n      */\n  setDisplayValue: function setDisplayValue(data) {\n    var self = this;\n    var control = self.getControl();\n    var actionsToExecuteContainer = $(\".bz-action-launcher-actions-to-execute-container\", control);\n    var template = self.renderFactory.getTemplate(\"render-polymorphicLauncher-actions-to-execute\");\n    self.configureQueueVisibility();\n\n    $.when($.fasttmpl(template, { actions: data })).done(function (html) {\n      actionsToExecuteContainer.empty();\n      actionsToExecuteContainer.append(html);\n      var removeActionSelector = $(\".action-to-execute-control i\", actionsToExecuteContainer);\n      var openActionSelector = $(\".action-to-execute-control label\", actionsToExecuteContainer);\n      removeActionSelector.bind(\"click\", function () {\n        var index = $(this).parent().data(\"index\");\n        self.removeActionToQueue(index);\n      });\n      openActionSelector.bind(\"click\", function () {\n        var $target = $(this).parent();\n        var type = $target.data(\"actiontype\");\n        var guidprocess = $target.data(\"guidprocess\");\n        var idStartScope = $target.data(\"idstartscope\");\n        var title = $target.data(\"title\");\n        var xpathContext = $target.data(\"xpathcontext\");\n        var idEntity = $target.data(\"identity\") || \"\";\n        var guidEntity = $target.data(\"guidentity\");\n        var recordXpath = xpathContext || self.properties.xpathContext;\n\n        switch (type) {\n          case \"Process\":\n            if (idStartScope) {\n              self.processStartForm({\n                guidprocess: guidprocess,\n                idStartScope: idStartScope,\n                title: title,\n                xpathContext: xpathContext,\n                recordXpath: recordXpath });\n\n            }\n            break;\n          case \"Form\":\n            var action = {\n              guidProcess: guidprocess,\n              idStartScope: idStartScope,\n              editMode: true,\n              xpathContext: xpathContext,\n              idEntity: idEntity,\n              guidEntity: guidEntity,\n              guidObject: guidprocess };\n\n\n            self.processActionForm(action);\n            break;\n          case \"Rule\":\n            // Rules dont have forms or something like that\n            break;}\n\n      });\n    });\n  },\n\n  /**\r\n      * Show container if it has actions\r\n      */\n  configureQueueVisibility: function configureQueueVisibility() {\n    var self = this;\n    var control = self.getControl();\n    var actionsToExecuteContainer = $(\".bz-action-launcher-actions-to-execute-container\", control);\n    var actionsToExecuteTitle = $(\".actions-to-execute-title\", control);\n    if (self.getValue().length > 0) {\n      actionsToExecuteContainer.show();\n      actionsToExecuteTitle.show();\n    } else {\n      actionsToExecuteContainer.hide();\n      actionsToExecuteTitle.hide();\n    }\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /**\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: Bizagi Desktop queryDate\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: UI Forms Team\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments: queryDateAdvanced\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This script will redefine the query text-advanced render class to adjust to desktop devices\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\n// Extends from render Desktop base\nbizagi.rendering.desktop.render.extend(\"bizagi.rendering.desktop.queryDateAdvanced\", bizagi.rendering.render.base.prototype);\n// Extends itself\nbizagi.rendering.desktop.queryDateAdvanced.extend(\"bizagi.rendering.desktop.queryDateAdvanced\", bizagi.rendering.queryAdvanced.prototype);\n// Extends itself\nbizagi.rendering.desktop.queryDateAdvanced.extend(\"bizagi.rendering.desktop.queryDateAdvanced\", {\n  DATATYPE: \"DateTime\" },\n{\n\n  // region // #region CONTROL BASE\n\n  /**\r\n   * Update or init the element data\r\n   * @param data\r\n   */\n  initializeData: function initializeData(data) {\n    // Call base\n    this._super(data);\n\n    this.isNewRenderForm = true;\n    this.defaultFilter = this.isExecutionMode() ? \"equal\" : \"\";\n\n    // Fill default properties\n    var properties = this.properties;\n    var dateFormat = this.getResource(\"dateFormat\");\n    var timeFormat = this.getResource(\"timeFormat\");\n\n    properties.showTime = typeof properties.showTime !== \"undefined\" ? bizagi.util.parseBoolean(properties.showTime) : false;\n    properties.dateFormat = properties.dateFormat || dateFormat;\n    properties.timeFormat = properties.timeFormat || timeFormat;\n    properties.fullFormat = properties.dateFormat;\n\n    var maxUndefinedYear = parseInt(new Date().getFullYear() + 200).toString();\n    var minUndefinedYear = parseInt(new Date().getFullYear() - 200).toString();\n\n    if (typeof properties.maxValue == \"undefined\") properties.maxValue = \"12/31/\" + maxUndefinedYear + \" 00:00:00\"; //Current year + 200 IE or 9999\n    if (typeof properties.minValue == \"undefined\") properties.minValue = \"01/01/\" + minUndefinedYear + \" 00:00:00\"; //Current year - 200 IE or 1753 for SQL Server compat\n\n    if (properties.value) this.value = properties.value;\n  },\n\n  /**\r\n      * Customize each render after processed\r\n      */\n  postRender: function postRender() {\n    var filterType = this.properties.filterType || \"\";\n\n    // Call to base\n    this._super();\n\n    // Call to repaint filters\n    this.setFilter(filterType);\n  },\n\n  /**\r\n      * Sets the internal value\r\n      * @param value\r\n      * @param triggerEvents\r\n      */\n  setValue: function setValue(value, triggerEvents) {\n    triggerEvents = triggerEvents !== undefined ? triggerEvents : true;\n\n    value = Array.isArray(value) ? JSON.encode(value) : value;\n    this._super(value, triggerEvents);\n  },\n\n  /**\r\n      * Sets the value in the rendered control\r\n      * @param value\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n\n    if (self.properties.editable)\n    self.prepareForSetValue();\n\n    var action = this.getCurrentAction();\n\n    // Set internal value\n    this.setValue(value, false);\n\n    // Update clean icon\n    if (this.isExecutionMode()) {\n      self.showHideCleanButton(true);\n    } else {\n      this.controlInitial && this.controlInitial.setDisplayValue(value);\n    }\n\n    // Render by filter type\n    if (value && [\"to\", \"from\", \"equal\"].includes(action)) {\n      this.controlInitial && this.controlInitial.setDisplayValue(value);\n    } else if (value && [\"between\"].includes(action)) {\n      var newValue = self.performListValue(value);\n\n      if (newValue.from) this.controlInitial && this.controlInitial.setDisplayValue(newValue.from);\n      if (newValue.to) this.controlEnd && this.controlEnd.setDisplayValue(newValue.to);\n    }\n  },\n\n  /**\r\n      * Returns the html templated element\r\n      * @returns {*}\r\n      */\n  renderElement: function renderElement() {\n    return this._super(\"render-base\");\n  },\n\n  /**\r\n      *  Changes the render required\r\n      * @param argument\r\n      */\n  changeRequired: function changeRequired(argument) {\n    this.properties.required = argument;\n\n    this.changeRequiredLabel(argument);\n  },\n\n  /**\r\n      * Change cell required and attach bindings\r\n      * @param argument\r\n      */\n  changeCellRequired: function changeCellRequired(argument) {\n    this.changeRequired(argument);\n  },\n\n  /**\r\n      * This method just make a toggle of red label indicator\r\n      * @argument {boolean} argument\r\n      */\n  changeRequiredLabel: function changeRequiredLabel(argument) {\n    var control = this.getControl();\n\n    if (control.length > 0) {\n      if (this.getMode() !== \"execution\") {\n        if (bizagi.util.parseBoolean(argument) === true && this.properties.editable) {\n          control.addClass(\"control-required\");\n        } else {\n          control.removeClass(\"control-required\");\n        }\n      } else {\n        if (bizagi.util.parseBoolean(argument) === true && !this.hasValue() && this.properties.editable) {\n          control.addClass(\"control-required\");\n        } else {\n          control.removeClass(\"control-required\");\n        }\n      }\n    }\n    this.triggerRenderValidate();\n  },\n\n  /**\r\n      * Returns the internal value\r\n      * @returns {*|Array}\r\n      */\n  getValue: function getValue() {\n    if (this.isCurrentBetweenFilter()) {\n      var initial = this.controlInitial ? this.formatInputValue(this.controlInitial.getValue()) : \"null\";\n      var end = this.controlEnd ? this.formatInputValue(this.controlEnd.getValue()) : \"null\";\n      var newValue = [initial, end];\n\n      return initial === \"null\" && end === \"null\" ? \"\" : JSON.encode(newValue);\n    }\n\n    if (this.isCurrentNullFilter()) return null;\n\n    // Call to base\n    return this.controlInitial ? this.controlInitial.getValue() : \"\";\n  },\n\n  /**\r\n      * Get the label element\r\n      * @returns {jQuery|HTMLElement}\r\n      */\n  getLabel: function getLabel() {\n    return $(\"label\", this._super());\n  },\n\n  // endregion // #endregion\n\n  // region // #region METHODS TO LITE CONTROLS\n\n  /**\r\n   * Define the controls depend of filter type\r\n   * @param {*} params\r\n   */\n  defineLiteControl: function defineLiteControl(params) {\n    var self = this;\n    var typeFilter = params && params.typeFilter || \"advanced\";\n    var dateEnd = null;\n    var dateInitial = new bizagi.rendering.desktop.dateAdvanced(\n    self.getRenderProperties({\n      typeControl: typeFilter,\n      isRange: this.isCurrentBetweenFilter(),\n      isMinimum: true }));\n\n\n\n    if (this.isCurrentBetweenFilter()) {\n      dateEnd = new bizagi.rendering.desktop.dateAdvanced(\n      self.getRenderProperties({\n        typeControl: typeFilter + \"_to\",\n        isRange: this.isCurrentBetweenFilter(),\n        isMaximum: true }));\n\n\n\n      dateInitial.subscribe(dateEnd);\n      dateEnd.subscribe(dateInitial);\n    }\n\n    self.setLiteControls(dateInitial, dateEnd);\n  },\n\n  /**\r\n      * set the rendered controls\r\n      * @param {*} controlInitial\r\n      * @param {*} controlEnd\r\n      */\n  setLiteControls: function setLiteControls(controlInitial, controlEnd) {\n    var self = this;\n    var control = self.getControl();\n\n    var filter = this.getCurrentFilter();\n    var filterType = filter && filter.action || \"default\";\n\n    self.controlInitial = controlInitial || null;\n    self.controlEnd = controlEnd || null;\n\n    var template = this.renderFactory.getTemplate(\"query.advanced-content\");\n    var $templateItem = $.tmpl(template, {\n      value: self.getResourceByKey(filter.label, filter.defaultLabel),\n      id: filter.id,\n      filterType: filterType });\n\n\n    var $canvas = $(\".bz-query-advanced__filter\", control).empty();\n\n    if (this.isCurrentBetweenFilter()) {\n      $canvas.append($templateItem);\n\n      var $dateMin = $(\".bz-query-advanced__filter-input-from\", $canvas);\n      var $dateMax = $(\".bz-query-advanced__filter-input-to\", $canvas);\n\n      self.renderLiteControl(filterType, $dateMin, self.controlInitial);\n      self.renderLiteControl(filterType, $dateMax, self.controlEnd);\n    } else {\n      $canvas.append($templateItem);\n\n      var $dateInitial = $(\".bz-query-advanced__filter-input\", $canvas);\n      self.renderLiteControl(filterType, $dateInitial, controlInitial);\n    }\n  },\n\n  /**\r\n      * Render control\r\n      * @param {*} filterType\r\n      * @param {*} $canvas\r\n      * @param {*} control\r\n      */\n  renderLiteControl: function renderLiteControl(filterType, $canvas, control) {\n    var self = this;\n\n    // templates: input or between\n    $.when(control.render(this.getTemplateByType(filterType))).done(function (html) {\n      $canvas.empty().append(html);\n\n      var $inputFiler = $(\".bz-query-advanced__input, .bz-input-icon__input\", $canvas);\n\n      if (self.isCurrentNullFilter() || filterType === \"default\") {\n        $inputFiler.attr(\"readonly\", true);\n      }\n\n      control.postRenderElement($canvas, true); // true for skip design hack\n      self.configureInternalHandlers(control);\n\n      if (filterType === \"default\" && !self.isDesignMode()) {\n        control.disablePopup();\n      }\n    });\n  },\n\n  /**\r\n      * Get template\r\n      * @param {*} filterType\r\n      */\n  getTemplateByType: function getTemplateByType(filterType) {\n    if (filterType === \"is-null\") return \"query.advanced-input\";\n    return \"query.advanced-date\";\n  },\n\n  configureInternalHandlers: function configureInternalHandlers(control) {\n    var self = this;\n    var $internalControl = control.getDateControl();\n\n    // Handler for update data value\n    $internalControl.bind(\"change\", function () {\n      self.setValue(self.getValue());\n    });\n  },\n\n  getRequiredProperties: function getRequiredProperties() {\n    var properties = this.properties;\n    return {\n      showTime: false,\n      minValue: properties.minValue,\n      maxValue: properties.maxValue,\n      dateFormat: properties.dateFormat,\n      timeFormat: properties.timeFormat,\n      fullFormat: properties.fullFormat };\n\n  },\n\n  // endregion // #endregion\n\n  // region // #region A&V METHODS\n  /**\r\n   * Sets milliseconds to 0 in date\r\n   * @param {Date} date date to be treated\r\n   * @returns {Date} date converted with milliseconds 0\r\n   */\n  getNormalizeDate: function getNormalizeDate(date) {\n    var self = this;\n    if (date != 0 && date != null) {\n      if (!self.properties.showTime) {\n        date.setHours(0, 0, 0, 0);\n      } else date.setMilliseconds(0);\n    }\n    return date;\n  },\n\n  /*\r\n      *   Changes the render min value\r\n      */\n  changeMinValue: function changeMinValue(value) {\n    var self = this;\n    var properties = self.properties;\n    var ud = bizagi.util.dateFormatter;\n\n    // Set value in control\n\n    if (typeof value === \"number\") {\n      value = ud.formatInvariant(self.getNormalizeDate(new Date(value)), properties.showTime); // Set as invariant\n    } else {\n      value = self.getNormalizeDate(_typeof(value) === \"object\" ? value : ud.getDateFromInvariant(value, properties.showTime));\n      value = ud.formatInvariant(value);\n    }\n    properties.minValue = value;\n\n    if (self.controlInitial) self.controlInitial.changeMinValue(value);\n    if (self.controlEnd) self.controlEnd.changeMinValue(value);\n  },\n\n  /*\r\n      *   Changes the render max value\r\n      */\n  changeMaxValue: function changeMaxValue(value) {\n    var self = this;\n    var properties = self.properties;\n    var ud = bizagi.util.dateFormatter;\n\n    if (typeof value === \"number\") {\n      value = ud.formatInvariant(self.getNormalizeDate(new Date(value)), properties.showTime); // Set as invariant\n    } else {\n      value = self.getNormalizeDate(_typeof(value) === \"object\" ? value : ud.getDateFromInvariant(value, properties.showTime));\n      value = ud.formatInvariant(value);\n    }\n    properties.maxValue = value;\n\n    if (self.controlInitial) self.controlInitial.changeMaxValue(value);\n    if (self.controlEnd) self.controlEnd.changeMaxValue(value);\n  },\n\n  /**\r\n      * Customizes render color\r\n      * @param {} color\r\n      * @returns {}\r\n      */\n  changeColor: function changeColor(color) {\n    var $control = this.getControl();\n\n    // To review: Save the command to propagate action when filter is changed\n    if (this.controlInitial) this.controlInitial.changeColor(color, true);\n    if (this.controlEnd) this.controlEnd.changeColor(color, true);\n\n    return this._super(color).changeFontColor($(\"label\", $control), color);\n  }\n  // endregion // #endregion\n});\n\n\n// Extends from render desktop base\nbizagi.rendering.desktop.date.extend(\"bizagi.rendering.desktop.dateAdvanced\", {}, {\n  /**\r\n                                                                                     * Define new scope\r\n                                                                                     */\n  getControl: function getControl() {\n    var self = this;\n    if (!self.control || self.control instanceof jQuery && self.control.length === 0) {\n      self.control = $(self.element || self.observableElement);\n    }\n    if (!self.control || self.control.length === 0) {\n      return null;\n    }\n    return self.control;\n  },\n\n  /**\r\n      * Add subscribe\r\n      * @param {*} control\r\n      */\n  subscribe: function subscribe(control) {\n    this.observer = this.observer || [];\n    this.observer.push(control);\n  },\n\n  /**\r\n      * Notify all subscribers\r\n      * @param {*} value\r\n      */\n  notify: function notify(value) {\n    if (this.properties.isRange) {\n      for (var i = this.observer.length - 1; i >= 0; i--) {\n        if (this.properties.isMaximumValue) {\n          this.observer[i].changeMaxValue(value);\n        } else if (this.properties.isMinimumValue) {\n          this.observer[i].changeMinValue(value);\n        }\n      }\n    }\n  },\n\n  setValue: function setValue(value) {\n    value = value || \"\";\n    this._super(value);\n    this.notify(value);\n  },\n\n  getInputControl: function getInputControl() {\n    return $(\"input\", this.getControl()) || null;\n  } });","/*\r\n*   Name: BizAgi Desktop querycombo\r\n*   Author: Ivan Ricardo Taimal Narvaez\r\n*   Comments:\r\n*   -\r\n*/\n\nbizagi.rendering.desktop.combo.extend(\"bizagi.rendering.desktop.queryCombo\", {}, {\n  /*\r\n                                                                                   *  configure Handlers for check, column included in the response\r\n                                                                                   */});","/**\r\n *   Name: Bizagi Desktop queryCascadingCombo\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -\r\n */\n\nbizagi.rendering.desktop.cascadingCombo.extend(\"bizagi.rendering.desktop.queryCascadingCombo\", {}, {\n  /*\r\n                                                                                                      *  configure Handlers for check, column included in the response\r\n                                                                                                      */\n  initializeData: function initializeData(data) {\n    var self = this;\n\n    // Call base\n    this._super(data);\n    self.properties.contexttype = self.properties.contexttype || \"metadata\";\n  },\n\n  postRender: function postRender() {\n    var self = this;\n\n    if (self.parentCombo !== null && self.isDependant) {\n      self.parentCombo.isRendered().done(function () {\n        $(\".ui-bizagi-render-control-included\", self.parentCombo.getRenderedElement()).hide();\n      });\n    }\n\n    this._super();\n  },\n\n  /*\r\n      *   Template method to implement in each children to customize each control\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var mode = self.getMode();\n\n    // Check if this is a dependant combo\n    var parentCombo = self.parentCombo = self.getParentCombo();\n    if (parentCombo !== null) {\n      if (parentCombo.properties.type === \"queryCascadingCombo\") {\n        self.isDependant = true;\n      }\n    }\n\n    // Apply element plugin, set a flag to avoid dependant combo ajax requests\n    self.initializingCascadingCombo = true;\n\n    // Call base\n    var result = this._super();\n\n    if (mode !== \"execution\") {\n      self.initializingCascadingCombo = false;\n    }\n\n    return result;\n  },\n\n  /*\r\n      *   Bind the combos to create the cascading feature\r\n      */\n  bindDependantCombo: function bindDependantCombo(dependantCombo) {\n    var self = this;\n    var properties = self.properties;\n\n    // Check it is a cascading combo\n    if (dependantCombo.properties.type === \"queryCascadingCombo\") {\n\n      // Append to dependant combos\n      self.dependants.push(dependantCombo);\n\n      // When this combo is selected we need to make the other combo to auto fill with an extra filter\n      dependantCombo.onChangeFunction = function (event, item, isInitialValue) {\n        // Fill items for next combo\n\n        self.refreshDependantCombo(dependantCombo, item.id, false, isInitialValue);\n\n        //if initial value is true, it prevents deleting the next combo\n        if (!isInitialValue) {\n          // Clean next inputs\n          dependantCombo.cleanInput();\n        }\n      };\n\n      if (!self.isEventBinded(\"select\")) {\n        self.bind(\"select\", dependantCombo.onChangeFunction);\n      }\n\n      // After the event binding has been made, we need to fill the new dependant render if this instance (the parent) has a value\n      if (!bizagi.util.isEmpty(self.getValue())) {\n\n        // Auto fill dependant items with current value\n        if (properties.hasLocalData) {\n          self.refreshDependantCombo(dependantCombo, self.getValue().id);\n        }\n\n      }\n    }\n  },\n  /*\r\n      *  Method to determine if the render value can be sent to search\r\n      */\n  canBeSentQueryForm: function canBeSentQueryForm() {\n    return true;\n  } });","/**\r\n *   Name: Bizagi Render CollectionNavigator\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for collection navigator renders\r\n */\n\n// Extends from render Desktop base\nbizagi.rendering.desktop.render.extend(\"bizagi.rendering.desktop.collectionnavigator\", bizagi.rendering.collectionnavigator.prototype);\n// Extends itself\nbizagi.rendering.desktop.collectionnavigator.extend(\"bizagi.rendering.desktop.collectionnavigator\", {}, {\n  /*\r\n                                                                                                          *   Update or init the element data\r\n                                                                                                          */\n  initializeData: function initializeData(data) {\n    data.properties.displayType = \"value\";\n\n    // Call base\n    this._super(data);\n  },\n  /*\r\n     *   Template method to implement in each device to customize each render after processed\r\n     */\n  postRender: function postRender() {\n    var self = this;\n\n    // Call base\n    self._super();\n\n    var control = self.getControl();\n    self.navigationControls = control.find(\".bz-collectionnavigator-controls\");\n    self.canvas = self.getCanvas();\n    $('[title]', control).tooltip();\n  },\n  /*\r\n     *   Template method to implement in each device to customize the render's behaviour to add handlers\r\n     */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n\n    // Call base\n    self._super();\n\n    $.when(self.isRendered()).done(function () {\n      if (self.hasData())\n      self.showRow(self.getFirstRow());\n\n      self.refreshControls();\n    });\n\n    var controls = self.navigationControls.find(\".bz-navigation-controls\");\n    controls.on(\"click\", \"span\", function (ev) {\n      var target = ev.currentTarget;\n\n      if (!$(target).hasClass(\"ui-state-disabled\")) {\n        self.paginationActions(target);\n      }\n\n    });\n\n    var currentRow = self.navigationControls.find(\".bz-navigation-current-row\");\n    currentRow.on(\"change\", function (ev) {\n\n      if (self.isValidRow()) {\n        var value = $(this).val();\n\n        $.when(self.saveChanges()).done(function () {\n          self.updateRow(value);\n        });\n      }\n\n    });\n\n    // Add Form\n    var add = self.navigationControls.find(\".bz-collectionnavigator-addform\");\n    add.on(\"click\", function (ev) {\n      var target = ev.currentTarget;\n\n      if (!$(target).hasClass(\"ui-state-disabled\")) {\n        if (self.hasData() && self.isValidRow()) {\n          $.when(self.saveChanges()).done(function () {\n            self.addRow();\n          });\n        } else if (!self.hasData()) {\n          self.addRow();\n        }\n      }\n\n    });\n\n    // Edit Form\n    var edit = self.navigationControls.find(\".bz-collectionnavigator-editform\");\n    edit.on(\"click\", function (ev) {\n      var target = ev.currentTarget;\n\n      if (!$(target).hasClass(\"ui-state-disabled\")) {\n        if (self.isValidRow()) {\n          $.when(self.saveChanges()).done(function () {\n            self.editRow();\n          });\n        }\n      }\n\n    });\n\n    // Detail Form\n    var detail = self.navigationControls.find(\".bz-collectionnavigator-detailform\");\n    detail.on(\"click\", function (ev) {\n      var target = ev.currentTarget;\n\n      if (!$(target).hasClass(\"ui-state-disabled\")) {\n        if (self.isValidRow()) {\n          $.when(self.saveChanges()).done(function () {\n            self.showDetailForm();\n          });\n        }\n      }\n\n    });\n\n    //Save Form\n    var save = self.navigationControls.find(\".bz-collectionnavigator-save\");\n    save.on(\"click\", function (ev) {\n      var target = ev.currentTarget;\n\n      if (!$(target).hasClass(\"ui-state-disabled\")) {\n        if (self.isValidRow()) {\n          var properties = self.properties;\n          var refreshForm = !properties.inlineEdit && self.isTherePendingInlineRow();\n\n          $.when(self.saveChanges()).done(function () {\n            self.showRow(self.getRow());\n          });\n        }\n      }\n\n    });\n\n    //Cancel\n    var cancel = self.navigationControls.find(\".bz-collectionnavigator-cancel\");\n    cancel.on(\"click\", function (ev) {\n      var target = ev.currentTarget;\n\n      if (!$(target).hasClass(\"ui-state-disabled\")) {\n        self.cancelChanges();\n      }\n    });\n\n    self.configureButtonsForm();\n  },\n\n  /*\r\n     *   Template method to implement in each device to customize each render after processed in read-only mode\r\n     */\n  postRenderReadOnly: function postRenderReadOnly() {\n    this.postRender();\n    this.configureHandlers();\n  },\n\n  /*\r\n     * Each time an action is executed, is necessary to refresh \r\n     * the navigation controls\r\n     */\n  refreshControls: function refreshControls() {\n    var self = this;\n\n    self.refreshForwardButtons();\n    self.refreshBackButtons();\n    self.refreshPagination();\n    self.refreshTotal();\n    self.refreshRemoveAction();\n  },\n  /*\r\n     * Enabled o disabled a control (next or last)\r\n     */\n  refreshForwardButtons: function refreshForwardButtons() {\n    var self = this;\n    var nextControl = self.getInnerControl(\"navigation\", \"next\");\n    var lastControl = self.getInnerControl(\"navigation\", \"last\");\n    var keys = self.keys.length;\n\n    if (self.hasData() && self.pointer < keys - 1) {\n      nextControl.removeClass(\"ui-state-disabled\");\n      lastControl.removeClass(\"ui-state-disabled\");\n    } else {\n      nextControl.addClass(\"ui-state-disabled\");\n      lastControl.addClass(\"ui-state-disabled\");\n    }\n  },\n  /*\r\n     * Enabled o disabled a control (previous or first)\r\n     */\n  refreshBackButtons: function refreshBackButtons() {\n    var self = this;\n    var previousControl = self.getInnerControl(\"navigation\", \"previous\");\n    var firstControl = self.getInnerControl(\"navigation\", \"first\");\n\n    if (self.hasData() && self.pointer > 0) {\n      previousControl.removeClass(\"ui-state-disabled\");\n      firstControl.removeClass(\"ui-state-disabled\");\n    } else {\n      previousControl.addClass(\"ui-state-disabled\");\n      firstControl.addClass(\"ui-state-disabled\");\n    }\n  },\n\n  /*\r\n     * Enabled o disabled the remove button\r\n     */\n  refreshRemoveAction: function refreshRemoveAction() {\n    var self = this;\n    var properties = self.properties;\n\n    if (properties.editable) {\n      var removeButton = self.getInnerControl(\"navigation\", \"remove\");\n\n      if (self.hasData() && !self.isTherePendingInlineRow()) {\n        removeButton.removeClass(\"ui-state-disabled\");\n      } else {\n        removeButton.addClass(\"ui-state-disabled\");\n      }\n    }\n  },\n\n  /*\r\n     * Updates the current row\r\n     */\n  refreshPagination: function refreshPagination() {\n    var self = this;\n\n    var control = self.getInnerControl(\"navigation\", \"current\");\n    var keys = self.keys.length;\n\n    if (keys > 0) {\n      control.val(self.pointer + 1);\n      control.removeClass(\"ui-state-disabled\");\n    } else {\n      control.val(self.pointer);\n      control.addClass(\"ui-state-disabled\");\n    }\n  },\n\n  /*\r\n     * Updates the total of rows in collection\r\n     */\n  refreshTotal: function refreshTotal() {\n    var self = this;\n\n    self.totalRows = self.getTotalRows();\n    var total = self.getInnerControl(\"navigation\", \"total\");\n    total.text(self.totalRows);\n  },\n\n  /*\r\n     * Enabled o disabled the save and cancel actions\r\n     */\n  refreshActions: function refreshActions(eSave, eCancel) {\n    var self = this;\n    var save = self.navigationControls.find(\".bz-collectionnavigator-save\");\n    var cancel = self.navigationControls.find(\".bz-collectionnavigator-cancel\");\n\n    eSave ? save.removeClass(\"ui-state-disabled\") : save.addClass(\"ui-state-disabled\");\n    eCancel ? cancel.removeClass(\"ui-state-disabled\") : cancel.addClass(\"ui-state-disabled\");\n  },\n\n  /*\r\n     * Gets the specific control\r\n     */\n  getInnerControl: function getInnerControl(section, action) {\n    var self = this;\n    var properties = self.properties;\n    var group = $(\"div[data-navigation-id='\" + properties.id + \"']\");\n\n    if (section) {\n      if (action === \"next\") {\n        return group.find(\".bz-navigation-next\");\n      }\n      if (action === \"last\") {\n        return group.find(\".bz-navigation-last\");\n      }\n      if (action === \"previous\") {\n        return group.find(\".bz-navigation-previous\");\n      }\n      if (action === \"first\") {\n        return group.find(\".bz-navigation-first\");\n      }\n      if (action === \"current\") {\n        return group.find(\".bz-navigation-current-row\");\n      }\n      if (action === \"total\") {\n        return group.find(\".bz-navigation-total-rows\");\n      }\n      if (action === \"add\") {\n        return group.find(\".bz-navigation-add\");\n      }\n      if (action === \"remove\") {\n        return group.find(\".bz-navigation-remove\");\n      }\n      if (action === \"save\") {\n        return group.find(\".bz-collectionnavigator-save\");\n      }\n      if (action === \"cancel\") {\n        return group.find(\".bz-collectionnavigator-cancel\");\n      }\n    }\n\n    return undefined;\n  },\n\n  /*\r\n     * Shows the navigation form, with the data specified in the row[id]\r\n     */\n  showRow: function showRow(id, setFocus) {\n    var self = this;\n    var properties = self.properties;\n\n    if (id) {\n      var data = {\n        id: id,\n        requestedForm: \"navigationForm\",\n        url: self.properties.navigationPage,\n        editable: properties.editable ? properties.inlineEdit : false };\n\n\n      $.when(self.renderForm(self.getParameters(data))).done(function (form) {\n        self.loadForm(form, setFocus);\n        self.refreshControls();\n      });\n    }\n  },\n  /*\r\n     * Shows the navigation form, with the data specified in the row[id]\r\n     */\n  showDetailForm: function showDetailForm() {\n    var self = this;\n    var properties = self.properties;\n\n    // Show dialog with new form after that\n    var dialog = new bizagi.rendering.dialog.form(self.dataService, self.renderFactory, {\n      title: properties.detailLabel || bizagi.localization.getResource(\"render-grid-details-form\"),\n      showSaveButton: false,\n      cancelButtonLabel: bizagi.localization.getResource(\"render-form-dialog-box-close\") });\n\n\n    dialog.render(self.getParameters({\n      id: self.getRow(),\n      requestedForm: \"detailForm\",\n      url: properties.editPage,\n      editable: false }));\n\n  },\n  /*\r\n     * Shows the navigation form inline, with the data specified in the row[id]\r\n     */\n  showInlineRow: function showInlineRow(id, setFocus) {\n    var self = this;\n    var data = {\n      id: id,\n      requestedForm: \"navigationForm\",\n      url: self.properties.navigationPage,\n      editable: true };\n\n\n    self.startLoading();\n\n    $.when(self.renderForm(self.getParameters(data))).done(function (data) {\n      self.loadForm(data, setFocus);\n      self.refreshControls();\n    }).always(function () {\n      self.endLoading();\n    });\n  },\n\n  /*\r\n     * Updates the navigation form, with the data specified in the row[id]\r\n     */\n  updateRow: function updateRow(id) {\n    var self = this;\n\n    if ($.isNumeric(id) && self.isValidKey(id)) {\n      id = parseInt(id);\n      self.setPointer(id);\n      self.showRow(self.getRow());\n      self.refreshControls();\n    } else {\n      self.refreshPagination();\n    }\n  },\n  /*\r\n     * Returns true if the key is within the range. Otherwise it returns false\r\n     */\n  isValidKey: function isValidKey(key) {\n    if (key <= 0) return false;\n    if (key > this.keys.length) return false;\n    return true;\n  },\n  /*\r\n     * Renders the navigation form\r\n     */\n  renderForm: function renderForm(params) {\n    var self = this;\n    var defer = new $.Deferred();\n    var form = self.getFormContainer();\n\n    form.useOrSetLoaderDeferred();\n    form.appendWaitForLoader({ promise: defer.promise() });\n\n    // Load template and data\n    $.when(self.dataService.getFormData(params)).pipe(function (data) {\n\n      // Apply contextType\n      data.form.contextType = params.contextType;\n\n      //delete buttons\n      delete data.form.buttons;\n\n      // Apply editable param\n      if (params.editable == false) {\n        data.form.properties.editable = false;\n      }\n\n      // The transitions don't apply in collection navigator\n      self.removeTransitions(data.form);\n      var formContainer = self.getFormContainer();\n\n      // Render dialog template\n      self.form = self.renderFactory.getContainer({\n        type: \"form\",\n        data: data.form,\n        canvas: formContainer.params.canvas || formContainer.container,\n        focus: params.focus || false,\n        selectedTabs: params.selectedTabs,\n        isRefresh: params.isRefresh || false });\n\n\n      self.form.render();\n\n      formContainer.rendersById = $.extend(formContainer.rendersById, self.form.rendersById);\n\n      // Publish an event to check if the form has been set in the DOM\n      self.form.triggerHandler(\"ondomincluded\", self.getFormContainer());\n\n      // Attach a refresh handler to recreate all the form\n      self.form.bind(\"refresh\", function (_, refreshParams) {\n        self.showRow(self.getRow());\n      });\n\n      self.bindRenderChangeEvent(self.form.children);\n\n      defer.resolve(self.form);\n    });\n\n    return defer.promise();\n  },\n\n  /*\r\n     * This method binds the render change event of each control \r\n     * at the current form\r\n     */\n  bindRenderChangeEvent: function bindRenderChangeEvent(children) {\n    var self = this;\n    children = children || [];\n\n    for (var i = 0, l = children.length; i < l; i++) {\n      var child = children[i];\n      var type = child.getElementType();\n      var changes;\n\n      if (type == bizagi.rendering.element.ELEMENT_TYPE_RENDER) {\n        child.bind(\"renderchange\", function (ev, params) {\n          params = params || {};\n          var render = params.render;\n          var changed = params.changed;\n          var isEmpty;\n\n          if (render && (render.properties.type == \"collectionnavigator\" || render.properties.type == \"grid\")) {\n            isEmpty = false;\n            if (!changed && render.properties.type == \"grid\") {\n              changes = [];\n              var temp = $.forceCollectData;\n              $.forceCollectData = false;\n              self.form.hasChanged(changes);\n              $.forceCollectData = temp;\n              isEmpty = changes.length === 0 ? true : false;\n            }\n          } else {\n            changes = [];\n            self.form.hasChanged(changes);\n            isEmpty = changes.length === 0 ? true : false;\n          }\n\n          self.refreshActions(!isEmpty, !isEmpty);\n          self.triggerRenderChange();\n        });\n      } else if (type == bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) {\n        self.bindRenderChangeEvent(child.children);\n      }\n    }\n  },\n\n  /*\r\n     * Returns the elements html (canvas), where will be located the navigation form \r\n     */\n  getCanvas: function getCanvas() {\n    var control = this.getControl();\n    return control.find(\".bz-collectionnavigator-navigationform\");\n  },\n  /*\r\n     * Return true if the data of navigation form is valid\r\n     */\n  isValidRow: function isValidRow() {\n    if (!this.form) return false;\n    return this.form.validationController.performValidations();\n  },\n\n  /*\r\n     * Saves changes in navigation form\r\n     */\n  saveChanges: function saveChanges() {\n    var self = this;\n    var data = self.getChanges();\n    var arrayCollectionNavigator = [];\n    var hasChildren = false;\n\n    if (self.form) {\n      var children = self.getChildCollectionNavigator(self.form.children, arrayCollectionNavigator);\n      hasChildren = children.length > 0 ? true : false;\n\n      return $.when(function () {\n        if (hasChildren) {\n          return self.saveChangesChildren(arrayCollectionNavigator);\n        }\n      }).then(function () {\n        return self.submitSaveRequest(self.getRow(), data).\n        pipe(function (response) {\n          response = response || {};\n          if (response.type == \"success\") {\n            // Mark data collected as original values\n            self.form.collectRenderValuesForSubmit();\n            self.removeInlineAddRecord();\n            self.refreshControls();\n            self.refreshActions(false, false);\n\n            return self.fetchData();\n          } else {\n            if (response.type == \"validationMessages\") {\n              var form = self.getFormContainer();\n              var message = response.messages.join(\" \");\n              form.failHandler({ message: message });\n            }\n            return false;\n          }\n        });\n      });\n    } else {\n      self.removeInlineAddRecord();\n      self.refreshControls();\n      self.refreshActions(false, false);\n    }\n\n    return true;\n  },\n  /*\r\n     * Cancel changes\r\n     */\n  cancelChanges: function cancelChanges() {\n    var self = this;\n    self.refreshActions(false, false);\n\n    if (self.inlineAddRecords.length > 0) {\n      self.removeKey();\n      self.inlineAddRecords.pop();\n      self.submitRollbackRequest({ idPageCache: self.form.properties.idPageCache });\n      self.refreshTotal();\n      self.refreshControls();\n\n      if (self.getTotalRows() == 0) {\n        self.removeNavigationForm();\n        self.drawPreview();\n      } else {\n        self.showRow(self.getRow());\n      }\n    } else {\n      var data = self.getChanges();\n      if (!$.isEmptyObject(data)) {\n        self.showRow(self.getRow());\n      }\n    }\n\n  },\n  /*\r\n     * Gets changes of current navigation form\r\n     */\n  getChanges: function getChanges() {\n    var self = this;\n    var data = {};\n\n    if (self.form) {\n      self.form.collectRenderValues(data);\n    }\n\n    $.each(data, function (key, value) {\n      var renders = self.form.getRenders(key);\n      $.each(renders, function (i, render) {\n        render.updateOriginalValue();\n      });\n    });\n\n    return data;\n  },\n  /*\r\n     *  Adds a row inline to collection\r\n     */\n  addInlineRow: function addInlineRow() {\n    var self = this;\n    var setFocus = true;\n\n    // Send add request\n    $.when(self.submitAddRequest()).\n    done(function (newid) {\n      self.refreshActions(true, true);\n      self.inlineAddRecords.push(newid);\n      self.addKey(newid);\n      self.showInlineRow(self.getLastRow(), setFocus);\n      self.refreshTotal();\n      self.refreshControls();\n    });\n  },\n  /*\r\n     *  Adds a row to collection\r\n     */\n  addRow: function addRow() {\n    var self = this;\n    var properties = self.properties;\n\n    // Send add request\n    $.when(self.submitAddRequest()).done(function (newid) {\n\n      // Show dialog with new form after that\n      var dialog = new bizagi.rendering.dialog.form(self.dataService, self.renderFactory, {\n        title: properties.addLabel,\n        orientation: properties.orientation || \"ltr\",\n        onSave: function onSave(data) {\n          if (properties.contextType) {\n            data[self.dataService.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = properties.contextType;\n          }\n          return self.submitSaveRequest(newid, data);\n        } });\n\n\n      dialog.render(self.getParameters({\n        id: newid,\n        requestedForm: \"addForm\",\n        url: properties.addPage,\n        editable: true })).\n      done(function () {\n        // Set loading status\n        self.startLoading();\n\n        $.when(self.fetchData()).done(function () {\n          self.showRow(self.getLastRow());\n        });\n\n        self.endLoading();\n      }).fail(function (error) {\n        $.when(self.submitRollbackRequest(error)).done(function () {\n          self.submitInvalidatePageCacheRequest(error);\n        });\n      });\n    });\n  },\n  /*\r\n     * Edits a row in the collection with Form\r\n     */\n  editRow: function editRow() {\n    var self = this;\n    var properties = self.properties;\n    var id = self.getRow();\n\n    // Send edit request\n    $.when(self.submitEditRequest(id)).done(function () {\n\n      // Show dialog with new form\n      var dialog = new bizagi.rendering.dialog.form(self.dataService, self.renderFactory, {\n        title: properties.editLabel,\n        orientation: properties.orientation || \"ltr\",\n        onSave: function onSave(data) {\n          return self.submitSaveRequest(id, data);\n        } });\n\n\n      dialog.render(self.getParameters({\n        id: id,\n        requestedForm: \"editForm\",\n        url: self.properties.editPage,\n        editable: true })).\n      done(function () {\n        $.when(self.fetchData()).done(function () {\n          self.showRow(self.getRow());\n        });\n      }).fail(function (error) {\n        $.when(self.submitRollbackRequest(error)).done(function () {\n          self.submitInvalidatePageCacheRequest(error);\n        });\n      });\n    });\n  },\n  /*\r\n     * removes current row\r\n     */\n  removeRow: function removeRow() {\n    var self = this;\n    var id = self.getRow();\n\n    bizagi.showConfirmationBox(this.getResource(\"render-grid-delete-confirmation\")).done(function () {\n      // Do a collection record deletion\n      $.when(self.submitDeleteRequest(id)).done(function (data) {\n        data = data || {};\n        if (data.type == \"success\") {\n          // Set loading status\n          self.startLoading();\n          self.removeKey();\n          self.refreshTotal();\n          self.refreshControls();\n          if (self.getTotalRows() == 0) {\n            self.removeNavigationForm();\n            self.drawPreview();\n          } else {\n            self.showRow(self.getRow());\n          }\n\n          self.endLoading();\n        }\n      });\n    });\n  },\n\n  /*\r\n     * Removes of local list the rows added inline\r\n     */\n  removeInlineAddRecord: function removeInlineAddRecord() {\n    var self = this;\n\n    if (self.isTherePendingInlineRow()) {\n      self.inlineAddRecords.pop();\n    }\n  },\n  /*\r\n     * Loads form in canvas\r\n     */\n  loadForm: function loadForm(form, setFocus) {\n    var self = this;\n\n    self.removeNavigationForm();\n    var buttons = form.container.find(\".ui-bizagi-button-container\");\n    buttons.remove();\n    self.addNavigationForm(form.container);\n\n    if (setFocus) {\n      self.focusFirstControl(form);\n    }\n  },\n  /*\r\n     * Method to process button actions in the form\r\n     */\n  configureButtonsForm: function configureButtonsForm() {\n    var self = this;\n    var form = self.getFormContainer();\n\n    form.processButton = function (buttonProperties) {\n      // Deferred is defined in order to avoid a permanent overlay after submitting with custom buttons\n      var deferred = $.Deferred();\n      var valid = true;\n\n      if (!self.form || buttonProperties.action === \"\") {\n        form.originalProcessButton.apply(form, [buttonProperties]).done(function () {\n          deferred.resolve();\n        }).fail(function () {\n          deferred.reject();\n        });\n      } else if (buttonProperties.action === \"save\") {\n        $.when(self.saveChanges()).done(function () {\n          form.originalProcessButton.apply(form, [buttonProperties]).done(function () {\n            deferred.resolve();\n          }).fail(function () {\n            deferred.reject();\n          });\n        }).fail(function (error) {\n          self.processFailMessage(error);\n          deferred.resolve();\n        });\n      } else if ([\"next\", \"createnewcase\"].includes(buttonProperties.action)) {\n        // Process to save form\n        valid = bizagi.util.parseBoolean(buttonProperties.validate) ? self.isValidRow() : true;\n        if (valid) {\n          $.when(self.saveChanges()).done(function () {\n            form.originalProcessButton.apply(form, [buttonProperties]).done(function () {\n              deferred.resolve();\n            }).fail(function () {\n              deferred.reject();\n            });\n          }).fail(function (error) {\n            self.processFailMessage(error);\n            deferred.resolve();\n          });\n        } else {\n          form.originalProcessButton.apply(form, [buttonProperties]).done(function () {\n            deferred.resolve();\n          }).fail(function () {\n            deferred.reject();\n          });\n        }\n      } else if (buttonProperties.action === \"nextWithoutValidations\") {\n        $.when(self.saveChanges()).done(function () {\n          form.originalProcessButton.apply(form, [buttonProperties]).done(function () {\n            deferred.resolve();\n          }).fail(function () {\n            deferred.reject();\n          });\n        }).fail(function (error) {\n          self.processFailMessage(error);\n          deferred.resolve();\n        });\n      } else if (buttonProperties.action === \"validate\") {\n        form.originalProcessButton.apply(form, [buttonProperties]).done(function () {\n          deferred.resolve();\n        }).fail(function () {\n          deferred.reject();\n        });\n      }\n\n      return deferred.promise();\n    };\n  },\n  /*\r\n     * Removes navigation form\r\n     */\n  removeNavigationForm: function removeNavigationForm() {\n    this.canvas.children().remove();\n  },\n  /*\r\n     * Adds navigation form\r\n     */\n  addNavigationForm: function addNavigationForm(content) {\n    this.canvas.append(content);\n  },\n  /*\r\n     *   Method to fetch data from the server and then update the data\r\n     */\n  fetchData: function fetchData() {\n    var self = this;\n    var defer = new $.Deferred();\n    var form = self.getFormContainer();\n\n    form.useOrSetLoaderDeferred();\n    form.appendWaitForLoader({ promise: defer.promise() });\n\n    // Start loading to avoid multiple calls to the server\n    self.startLoading();\n    $.when(self.getRemoteData()).done(function (data) {\n      self.endLoading();\n      if (self.disposed) return;\n      if (data) {\n        self.refresh(data);\n        defer.resolve();\n      } else {\n        defer.reject();\n      }\n    });\n\n    return defer.promise();\n  },\n  /*\r\n     * Verify if data is different the filter\r\n     */\n  refresh: function refresh(data) {\n    var self = this;\n    var keys = self.getKeys(data.rows);\n    self.keys = keys;\n\n    if (keys.indexOf(self.getRow()) == -1) {\n      self.totalRows = keys.length;\n      self.pointer = self.pointer > 0 ? self.pointer - 1 : self.pointer;\n      if (self.totalRows == 0) {\n        self.removeNavigationForm();\n        self.drawPreview();\n        self.refreshControls();\n      }\n    }\n  },\n  /*\r\n     * Sets the focus to the first control\r\n     */\n  focusFirstControl: function focusFirstControl(form, time) {\n    // Configures effect\n    var effect = function effect() {\n      var defaultControl = $(\"input:visible, select:visible, option:visible, textarea:visible\", form.container).not(\".ui-bizagi-render-date,.ui-bizagi-render-search\");\n      if (defaultControl.length > 0) {\n        // Focus control\n        var innerControl = defaultControl[0];\n        try {\n          innerControl.focus();\n        } catch (e) {\n        }\n      }\n    };\n\n    // Run effect\n    if (time > 0) {\n      var timeoutEffect = setTimeout(function () {\n        effect();\n        clearTimeout(timeoutEffect);\n      }, time);\n    } else {\n      effect();\n    }\n  },\n  /*\r\n     * Return array with children of type collectionnavigator\r\n     */\n  getChildCollectionNavigator: function getChildCollectionNavigator(children, arrayCollectionNavigator) {\n    var self = this;\n    children = children || [];\n\n    for (var i = 0, l = children.length; i < l; i++) {\n      var child = children[i];\n      var type = child.getElementType();\n      if (type == bizagi.rendering.element.ELEMENT_TYPE_RENDER) {\n        if (child.properties.type == \"collectionnavigator\" || child.properties.type == \"grid\") {\n          arrayCollectionNavigator.push(child);\n        }\n      } else if (type == bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) {\n        self.getChildCollectionNavigator(child.children, arrayCollectionNavigator);\n      }\n    }\n    return arrayCollectionNavigator;\n  },\n  /*\r\n     *save changes for children of type collectionnavigator\r\n     */\n  saveChangesChildren: function saveChangesChildren(arrayCollectionNavigator) {\n    var promises = [];\n    for (var i = 0, l = arrayCollectionNavigator.length; i < l; i++) {\n      if (arrayCollectionNavigator[i].properties.type == \"collectionnavigator\") {\n        var promise = arrayCollectionNavigator[i].saveChanges();\n        promises.push(promise);\n      }\n    }\n    return $.when.apply($, promises);\n  },\n\n  drawControls: function drawControls(html) {\n    var self = this;\n    var properties = self.properties;\n\n    html = $(html);\n    var controls = self.collectionControls = $(\".bz-collectionnavigator-controls\", html);\n\n    self.drawForms(controls);\n    self.drawControl(controls);\n\n    if (properties.editable)\n    self.drawActions(controls);\n\n    return html[0].outerHTML;\n  },\n  /*  render several actions in the navigation palete\r\n     *  ex. save, cancel \r\n     */\n  drawActions: function drawActions(controls) {\n    var self = this;\n    var actions = $(\".actions-group\", controls);\n\n    var template = self.renderFactory.getTemplate(\"collectionnavigator-actions\");\n    var html = $.tmpl(template);\n    html.appendTo(actions);\n\n    return controls;\n  },\n\n  /*\r\n     * Render navigation controls (next, previous, last, first. etc )\r\n     */\n  drawControl: function drawControl(controls) {\n    var self = this;\n    var properties = self.properties;\n    var editable = properties.editable;\n    var control = $(\".control-group\", controls);\n\n    var template = self.renderFactory.getTemplate(\"collectionnavigator-control\");\n    var html = $.tmpl(template, {\n      inlineAdd: editable && properties.inlineAdd,\n      allowDelete: editable && properties.allowDelete,\n      total: self.totalRows });\n\n\n    html.appendTo(control);\n\n    return controls;\n  },\n\n  /*\r\n     * Draw forms options (add form, edit form, navigation form)\r\n     */\n  drawForms: function drawForms(controls) {\n    var self = this;\n    var properties = self.properties;\n    var withAddForm = properties.withAddForm;\n    var withEditForm = properties.withEditForm;\n    var allowDetail = properties.allowDetail;\n    var html = null;\n    var forms = $(\".bz-navigation-group\", controls);\n\n    if (properties.editable && (withAddForm || withEditForm || allowDetail)) {\n      forms.addClass(\"group-visible\");\n\n      if (withAddForm) {\n        html = self.getActionsTemplate(\"add\");\n        html.appendTo(forms);\n      }\n\n      if (withEditForm) {\n        html = self.getActionsTemplate(\"edit\");\n        html.appendTo(forms);\n      }\n\n      if (allowDetail) {\n        html = self.getActionsTemplate(\"details\");\n        html.appendTo(forms);\n      }\n\n    } else {\n      forms.addClass(\"group-no-visible\");\n    }\n\n\n    return controls;\n  },\n\n  /*\r\n     * This method removes the transitions\r\n     */\n  removeTransitions: function removeTransitions(data) {\n    data = data || {};\n\n    if (data.transitions) {\n      delete data.transitions;\n    }\n  },\n\n  collectData: function collectData(renderValues) {\n    var saveDeferred;\n    if (this.isRendered()) {\n      saveDeferred = this.saveChanges();\n\n      if (saveDeferred !== true) {\n        renderValues.deferreds = renderValues.deferreds || [];\n        renderValues.deferreds.push(saveDeferred);\n      }\n    }\n  },\n\n  getActionsTemplate: function getActionsTemplate(type) {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"collectionnavigator-form-button\");\n    var html = null;\n\n    switch (type) {\n      case \"add\":\n        html = $.tmpl(template, {\n          actionClass: \"bz-collectionnavigator-addform\",\n          buttonClass: \"ui-icon bz-collectionnavigator-addform-icon\",\n          title: bizagi.localization.getResource(\"render-collection-navigator-add-form\") });\n\n        break;\n      case \"edit\":\n        html = $.tmpl(template, {\n          actionClass: \"bz-collectionnavigator-editform\",\n          buttonClass: \"ui-icon bz-collectionnavigator-editform-icon\",\n          title: bizagi.localization.getResource(\"render-collection-navigator-edit-form\") });\n\n        break;\n      case \"details\":\n        html = $.tmpl(template, {\n          actionClass: \"bz-collectionnavigator-detailform\",\n          buttonClass: \"ui-icon bz-collectionnavigator-detailform-icon\",\n          title: bizagi.localization.getResource(\"render-collection-navigator-details-form\") });\n\n        break;}\n\n\n    return html;\n  },\n\n  /**\r\n      * Perform actions for the pagination grid\r\n      * @param contextPagination\r\n      */\n  paginationActions: function paginationActions(contextPagination) {\n    var self = this;\n\n    if ($(contextPagination).hasClass(\"bz-navigation-next\") && self.isValidRow()) {\n      $.when(self.saveChanges()).done(function () {\n        self.showRow(self.getNextRow());\n      });\n    } else if ($(contextPagination).hasClass(\"bz-navigation-previous\") && self.isValidRow()) {\n      $.when(self.saveChanges()).done(function () {\n        self.showRow(self.getPreviousRow());\n      });\n    } else if ($(contextPagination).hasClass(\"bz-navigation-first\") && self.isValidRow()) {\n      $.when(self.saveChanges()).done(function () {\n        self.showRow(self.getFirstRow());\n      });\n    } else if ($(contextPagination).hasClass(\"bz-navigation-last\") && self.isValidRow()) {\n      $.when(self.saveChanges()).done(function () {\n        self.showRow(self.getLastRow());\n      });\n    } else if ($(contextPagination).hasClass(\"bz-navigation-remove\")) {\n      if (self.hasData()) {\n        self.removeRow();\n      }\n    } else if ($(contextPagination).hasClass(\"bz-navigation-add\")) {\n      if (self.hasData() && self.isValidRow()) {\n        $.when(self.saveChanges()).done(function () {\n          self.addInlineRow();\n        });\n      } else if (!self.hasData()) {\n        self.addInlineRow();\n      }\n    }\n\n  } });","/**\r\n *   Name: Bizagi Desktop Render ECM file upload control\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script extend some functionalities of file upload control\r\n */\n\n// Extends from render Desktop base\nbizagi.rendering.desktop.render.extend(\"bizagi.rendering.desktop.ecm\", {\n  // Statics\n  BA_ACTION_PARAMETER_PREFIX: bizagi.render.services.service.BA_ACTION_PARAMETER_PREFIX,\n  BA_CONTEXT_PARAMETER_PREFIX: bizagi.render.services.service.BA_CONTEXT_PARAMETER_PREFIX,\n  BA_PAGE_CACHE: bizagi.render.services.service.BA_PAGE_CACHE },\nbizagi.rendering.ecm.prototype);\n\n// Extends itself\nbizagi.rendering.desktop.ecm.extend(\"bizagi.rendering.desktop.ecm\", {}, {\n  renderControl: function renderControl(listControl, fileProperties) {\n  },\n  /*\r\n     *   Template method to implement in each device to customize each render after processed\r\n     */\n  postRender: function postRender() {\n    var self = this;\n    var control = self.getControl();\n    var properties = self.properties;\n    var dateFormat = this.getResource(\"dateFormat\");\n    var timeFormat = this.getResource(\"timeFormat\");\n    var mode = self.getMode();\n\n    // Call base\n    self._super();\n\n    properties.maxSize = Number(properties.maxSize) || (typeof BIZAGI_SETTINGS !== \"undefined\" && typeof BIZAGI_SETTINGS.UploadMaxFileSize !== \"undefined\" ? Number(BIZAGI_SETTINGS.UploadMaxFileSize) : properties.maxSize = Number(properties.maxSize) || 4091904);\n    properties.maxFiles = Number(properties.maxfiles) || 999;\n    properties.validExtensions = properties.validExtensions || \"\";\n\n    if (properties.validExtensions.length > 0 && properties.validExtensions.indexOf(\".\") < 0) {\n      var singleExtensions = properties.validExtensions.split(\";\");\n\n      for (var i = 0, length = singleExtensions.length; i < length; i++) {\n        singleExtensions[i] = \"*.\" + singleExtensions[i];\n      }\n\n      properties.validExtensions = singleExtensions.join(\";\");\n    }\n\n    properties.addUrl = properties.addUrl || self.dataService.getUploadAddUrl();\n    properties.deleteUrl = properties.deleteUrl || undefined;\n    properties.allowDelete = bizagi.util.parseBoolean(properties.allowDelete) !== null ? bizagi.util.parseBoolean(properties.allowDelete) : true;\n    properties.q_xpath = bizagi.util.encodeXpath(self.getUploadXpath());\n\n    // We will hold here the value to display\n    properties.displayValue = \"\";\n    properties.showTime = properties.showTime !== undefined ? bizagi.util.parseBoolean(properties.showTime) : false;\n    properties.dateFormat = properties.dateFormat || dateFormat;\n    properties.timeFormat = properties.timeFormat || timeFormat;\n    properties.fullFormat = properties.dateFormat;\n\n    // Fix dateFormat for datepicker\n    properties.datePickerFormat = properties.dateFormat.replaceAll(\"M\", \"m\"); // Fix months\n    properties.datePickerFormat = properties.datePickerFormat.replaceAll(\"yyyy\", \"yy\"); // Fix years\n    properties.datePickerFormat = properties.datePickerFormat.replaceAll(\"dddd\", \"DD\"); // Fix days\n    properties.datePickerFormat = properties.datePickerFormat.replaceAll(\"mmmm\", \"MM\"); // Fix days\n\n    // Set files property\n    self.files = properties.value || [];\n    self.filesCount = self.files.length;\n\n    // define xpath context if coming from grid column\n    properties.xpathContext = this.parent.properties.xpathContext || properties.xpathContext || \"\";\n\n    // Set control container to behave as a block\n    control.addClass(\"ui-bizagi-render-display-block\");\n    control.addClass(\"ui-bizagi-render-upload\");\n    control.addClass(\"ui-bizagi-render-ecm\");\n    $(control).closest(\".ui-bizagi-control-wrapper\").addClass(\"ui-bizagi-control-wrapper-ecm\");\n\n    // First run show render options\n    self.properties.showRenderOptions = true;\n\n    // Call service and render control\n    if (mode == \"execution\") {\n      self.renderUploadItem();\n    } else {\n      control.append(\"<div class='ui-icon ecm-file'></div>\");\n    }\n\n    // Check number of files and hide or show button to upload\n    self.checkMaxFiles();\n\n\n    self.preventDefaultForAnchorTag();\n  },\n  /*\r\n     *   Template method to implement in each device to customize the render's behaviour to add handlers\r\n     */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    var control = self.getControl();\n\n    // Call base\n    self._super();\n\n    data = self.buildAddParams();\n    data.networkSpeed = networkSpeed();\n\n    $(\".biz-render-ecm-upload-wrapper\", control).bizagiUpload({\n      renderReference: this,\n      dialogTemplate: self.renderFactory.getTemplate(\"upload.ecm.dialog\"),\n\n      properties: data,\n      uploadedFiles: self.filesCount,\n      isECM: true,\n\n      onUploadFileCompletedCallback: self.onUploadFileCompleted,\n      dialogTitle: self.getResource(\"render-upload-link-label\") });\n\n  },\n\n  configureUploadHandlers: function configureUploadHandlers(reference, extraData, control) {\n    var self = reference;\n    var data = self.buildUpgradeParams(control);\n\n    $(control).bizagiUpload({\n      renderReference: self,\n      dialogTemplate: self.renderFactory.getTemplate(\"upload.ecm.dialog\"),\n\n      properties: data,\n      uploadedFiles: self.filesCount,\n      isECM: true,\n      isUpdatingECM: true,\n\n      onUploadFileCompletedCallback: self.onUpdateUploadFileCompleted,\n      dialogTitle: self.getResource(\"render-upload-link-label\") });\n\n\n  },\n\n  onUpdateUploadFileCompleted: function onUpdateUploadFileCompleted(renderReference, data, control, response) {\n    var self = renderReference;\n\n    control.empty();\n    self.waiting(control, true);\n    self.filesCount++;\n\n    self.renderFileLayout(self, data, control, response);\n  },\n\n  renderUploadItem: function renderUploadItem(listControl, fileProperties) {\n    var self = this;\n    var mode = self.getMode();\n    var control = self.getControl();\n    var template = self.renderFactory.getTemplate(\"upload-ecm-view-default\");\n    var properties = self.properties;\n\n    properties.value = fileProperties ? [[fileProperties.idFileUpload, fileProperties.fileName]] : self.value;\n\n    // If there's an error it displays a dialog and stops this method\n    if (typeof fileProperties != \"undefined\" && typeof fileProperties.status != \"undefined\" && fileProperties.status == \"error\") {\n      bizagi.showMessageBox(fileProperties.message);\n      return;\n    }\n\n    $.when($.tmpl(template, properties, {\n      getFileExtension: self.getFileExtension,\n      isImage: self.isImage,\n      allowSendInMail: properties.allowSendInMail })).\n    done(function (controlContent) {\n      // Append content\n      if (listControl && listControl.length > 0) {\n        controlContent.insertAfter(listControl.last());\n      } else {\n        control.append(controlContent);\n      }\n\n      //Remove load information tab\n      control.find(\".uploadifyQueueItem\").remove();\n\n      // Load metadata for each file\n      if (self.properties.value != undefined) {\n        $.each(self.properties.value, function (key, value) {\n          var data = {};\n\n          data.idFileUpload = value[0] || value.uploadId;\n          data.fileName = value[1] || value.fileName;\n          data.idPageCache = self.properties.idPageCache;\n          data.xpathContext = self.getXpathContext();\n\n          data.xPath = self.properties.xpath;\n          data.idAttrib = self.properties.idAttrib;\n\n          if (mode == \"execution\") {\n            self.renderFileLayout(self, data, $(\".\" + self.properties.id + \"-\" + data.idFileUpload, control), fileProperties);\n          }\n        });\n      }\n\n      // set event sendmail\n      if (self.properties.allowSendInMail) {\n        self.bindEmailDialog();\n      }\n    });\n  },\n\n  /**\r\n      * Bind dialog for send email\r\n      */\n  bindEmailDialog: function bindEmailDialog() {\n    var self = this;\n    var control = self.getControl();\n    var xpathContext = self.getXpathContext() || \"\";\n    var xpath = self.properties.xpath;\n\n    $(\".ui-bizagi-render-ecm-sendmail\", control).bizagiSendEmail({\n      tmpl: self.renderFactory.getTemplate(\"dialog-send-email\"),\n      value: self.value,\n      self: self,\n      dataService: self.dataService,\n      properties: self.properties,\n      xpath: xpath,\n      xpathContext: xpathContext });\n\n  },\n\n  /**\r\n      * Render file layout     \r\n      */\n  renderFileLayout: function renderFileLayout(self, data, fileControl, fileProperties) {\n    self = self || this;\n    var form = self.getFormContainer();\n    var metadataTemplate = self.renderFactory.getTemplate(\"upload-ecm-view-default-metadata\");\n\n    var imageConfig = { zIndex: $.getMaxZindex() + 1 };\n    var originalData = $.extend({}, data);\n    var metadataParams = fileProperties ? [fileProperties] : self.dataService.metadataECMMultiaction().getFileProperties(originalData);\n\n    $.when(self.dataService.metadataECMMultiaction().getECMMetadata(data), metadataParams).\n    done(function (metaData, fileProperties) {\n\n      self.waiting(fileControl, true);\n\n      if (Array.isArray(fileProperties)) {\n        fileProperties = fileProperties[0];\n      }\n\n      if (Array.isArray(metaData)) {\n        metaData = metaData[0];\n      }\n\n      fileProperties.data = data;\n\n      // Make xpath context\n      fileProperties.xpathContext = fileProperties.xpathContext || form.properties.xpathContext || \"\";\n      fileProperties.xpath = self.properties.xpath;\n\n      metaData.filename = data.fileName;\n\n      // Define File Properties\n      metaData.ecm_ecmStatus = fileProperties.ecmStatus;\n      metaData.ecm_isVisible = fileProperties.isVisible;\n      metaData.ecm_allowUpdateMetadata = fileProperties.allowUpdateMetadata;\n      metaData.ecm_allowDelete = fileProperties.allowDelete;\n      metaData.ecm_allowUpdateContent = fileProperties.allowUpdateContent;\n      metaData.ecm_allowView = fileProperties.allowView;\n      metaData.ecm_allowCheckOut = fileProperties.allowCheckOut;\n      metaData.ecm_allowCancelCheckOut = fileProperties.allowCancelCheckOut;\n      metaData.ecm_allowEdit = fileProperties.allowEdit;\n      metaData.idFileUploads = fileProperties.idFileUpload;\n      metaData.xpath = fileProperties.xpath;\n      metaData.value = bizagi.util.parseBoolean(fileProperties.value);\n\n      // Check if file its image\n      var container = fileControl.parent().find('.extension:last');\n      if (self.isImage(metaData.filename)) {\n\n        // Append image\n        container.empty();\n        container.append('<img>');\n        var image = container.find('img');\n\n        // Add class thumbnail\n        container.addClass('thumb-image');\n\n        self.requestFile({ id: metaData.idFileUploads, filename: metaData.filename }, false).then(function (imgURL) {\n          image.attr({ src: imgURL, width: 32, height: 32 });\n        });\n\n        image.imageZoom(imageConfig);\n\n        $(\".checkuot , .readonly\", fileControl.parent()).off(\"click\").on('click', function () {\n          image.click();\n        });\n      } else {\n        fileControl.parent().find('li:first').off(\"click\").on('click', function (e) {\n          e.stopPropagation();\n          self.requestFile({ id: metaData.idFileUploads, filename: metaData.filename }, true);\n        });\n      }\n\n      // Check if file is visible\n      if (fileProperties.isVisible) {\n        fileControl.empty();\n\n        var dataItem = $.extend(metaData, {\n          showMetadata: self.properties.showMetadata,\n          orientation: form.properties.orientation || \"ltr\" });\n\n\n        $.when($.tmpl(metadataTemplate, dataItem).appendTo(fileControl)).done(function () {\n          // Bind options\n          $(\".ecm-options-slide li\", fileControl).hover(function () {\n            $(this).toggleClass(\"ecm-options-slide-hover\");\n          });\n\n          $(\".filename_download\", fileControl).off(\"click\").on('click', function (e) {\n            e.stopPropagation();\n            self.requestFile({ id: metaData.idFileUploads, filename: metaData.filename }, true);\n          });\n\n          // Check if file its image\n          if (self.isImage(metaData.filename)) {\n            $(\".filename a\", fileControl).imageZoom(imageConfig);\n          }\n\n          // Set global events\n          self.setControlEvents(fileControl, data);\n\n          // Make Instance of file upload\n          if (metaData.ecm_allowUpdateContent) {\n            self.configureUploadHandlers(self, data, fileControl, fileProperties);\n          }\n\n          // Verify security of file\n          switch (fileProperties.ecmStatus) {\n            case 1: //LOCAL\n              break;\n            case 2: //PERSISTED\n              fileControl.parent().find(\".checkuot\").css(\"visibility\", \"hidden\");\n              fileControl.parent().find(\".checkuot\").hide();\n\n              break;\n            case 3: //DELETED\n              break;\n            case 4: //READONLY\n              // Hide control options\n              $(\".emc-options\", fileControl).hide();\n\n              // Disable event to edit meta data                                \n              fileControl.parent().find(\".readonly\").css(\"visibility\", \"visible\");\n              fileControl.parent().find(\".readonly\").show();\n              break;\n            case 5: //CHECKEDOUT\n              fileControl.parent().find(\".checkuot\").css(\"visibility\", \"visible\");\n              fileControl.parent().find(\".checkuot\").show();\n              break;\n            case 6: //UNDEFINED\n              bizagi.debug(\"ECM control return undefined status\", fileProperties);\n              break;\n            default:\n              fileControl.parent().find(\".checkuot\").css(\"visibility\", \"hidden\").hide();\n              fileControl.parent().find(\".readonly\").css(\"visibility\", \"hidden\").hide();\n              break;}\n\n\n          // Set Events\n          // Check if the control its readonly\n          if (bizagi.util.parseBoolean(self.properties.editable)) {\n            var multiClickControl = true;\n            fileControl.data(\"pluginAvailable\", false);\n\n            $(\".emc-options\", fileControl).on('click', function (evt) {\n              evt.stopPropagation();\n\n              // Block multi click\n              if (multiClickControl) {\n                multiClickControl = false;\n\n                var toggleOptions = function toggleOptions(fileControl) {\n                  var def = new $.Deferred();\n                  var modalEcm = $(\".modal-ecm\", fileControl);\n                  var control = self.control;\n                  // Show slide options\n                  if (modalEcm.is(\":visible\")) {\n                    $(\".modal-ecm\", control).hide();\n                    $(\".ecm-options-slide\", modalEcm).hide();\n                    modalEcm.hide();\n                    def.resolve(true);\n                  } else {\n\n                    var displayOptionsContent = function displayOptionsContent() {\n                      $(\".modal-ecm\", control).hide();\n                      $(\".ecm-options-slide\", modalEcm).show();\n\n                      modalEcm.show().position({\n                        my: \"center top\",\n                        at: \"center bottom\",\n                        of: $(\".emc-options\", fileControl),\n                        collision: \"none\" });\n\n                    };\n\n                    //  Hides the control when click somewhere else\n                    self.configureToggleHandlers();\n\n                    def.resolve(true);\n\n                    //Check if is the ECM is Async \n                    if (self.properties.isAsync !== undefined) {\n\n                      if (!metaData.ecm_allowUpdateContent)\n                      $(\".ecm-options-upgrade\", modalEcm).hide();\n\n                      //it's a flag to prevent multiple sever queries\n                      if (self.asynCheckEnabled === undefined) {\n\n                        self.asynCheckEnabled = true;\n\n                        self.asyncCheckTimeout = setTimeout(function () {\n                          //Clear the flag, to enable the interaction\n                          // Equal to undefined and not null, could be side efects if changed to null. \n                          self.asynCheckEnabled = undefined;\n                          self.asyncCheckTimeout = undefined;\n                          clearTimeout(self.asyncCheckTimeout);\n                        }, 2000);\n\n                        //Checks if the control already have check if the file is on ECM\n                        if (!data.IsFileOnECM) {\n\n                          //Pre hide the elements, so when the services response, show or hide the elements we need\n                          $(\".ecm-options-checkout\", modalEcm).hide();\n                          $(\".ecm-options-cancelcheckout\", modalEcm).hide();\n                          $(\".ecm-options-upgrade\", modalEcm).hide();\n\n                          //invokes the server to retrieve the file status\n                          $.when(self.dataService.isFileOnECM({ \"idUpload\": data.idFileUpload })).\n                          done(function (result) {\n\n                            //Checks the service response, and show/hide the desired controls\n                            if (result.IsFileOnECM) {\n\n                              if (metaData.ecm_allowUpdateContent)\n                              $(\".ecm-options-upgrade\", modalEcm).show();\n\n                              if (metaData.ecm_allowCheckOut)\n                              $(\".ecm-options-checkout\", modalEcm).show();\n\n                              if (metaData.ecm_allowCancelCheckOut)\n                              $(\".ecm-options-cancelcheckout\", modalEcm).show();\n                            }\n\n                            //Stores the server response, so if the response is true, prevents the service recall\n                            data.IsFileOnECM = result.IsFileOnECM;\n\n                            //Show the content\n                            displayOptionsContent();\n\n                          }).fail(function (error) {\n                            bizagi.log(\"isFileOnECM error\");\n                          });\n                        } else {\n                          displayOptionsContent();\n                        }\n                      }\n                    } else {\n                      displayOptionsContent();\n                    }\n                  }\n\n                  return def.promise();\n                };\n\n                $.when(toggleOptions(fileControl)).done(function () {\n                  multiClickControl = true;\n                });\n              }\n            });\n          } else {\n            $(\".emc-options\", fileControl).hide();\n            $(self.getControl()).trigger('ecmLoaded', { container: container });\n          }\n        });\n      }\n    });\n  },\n\n  requestFile: function requestFile(fileMetadata, download) {\n    var self = this;\n    download = typeof download !== \"undefined\" ? download : true;\n    var properties = self.properties;\n\n    return self.dataService.getFile({\n      idRender: properties.id,\n      xpath: properties.xpath,\n      xpathContext: self.getXpathContext(),\n      idPageCache: properties.idPageCache,\n      fileId: fileMetadata.id,\n      contexttype: properties.contexttype }).\n    then(function (response) {\n      return bizagi.util.handleJSONResponse(response);\n    }).then(function (blobFile) {\n      if (download) {\n        bizagi.util.downloadBlobFile(blobFile, fileMetadata.filename);\n      } else {\n        return window.URL.createObjectURL(blobFile);\n      }\n    }).fail(function (err) {\n      var form = self.getFormContainer();\n      form && form.failHandler(err);\n    });\n  },\n\n  /*\r\n     * Bind events for control\r\n     */\n  setControlEvents: function setControlEvents(control, params) {\n    var self = this;\n    var properties = self.properties;\n    var globalControl = self.getControl();\n\n    // Bind for delete options\n    $(\".ecm-options-delete\", control).on('click', function (e) {\n      e.stopPropagation();\n\n      $(\".emc-options\", control).click();\n      var message = $(\".biz-render-ecm-delete-confirmation\", globalControl).first().clone();\n      message.dialog({\n        resizable: false,\n        modal: true,\n        title: self.getResource(\"render-ecm-confirm-title\"),\n        buttons: [\n        {\n          text: self.getResource(\"render-ecm-confirm-bt-delete\"),\n          click: function click() {\n            delete params.prepare; // Ensure run Ajax\n            self.dataService.deleteECMFile(params);\n            $(this).dialog(\"close\");\n            control.parent(\"ul\").hide(\"highlight\", {}, 100);\n\n            //Set files in a temporal array\n            var files = [].concat(self.files);\n\n            //Remove element form files array\n            for (var i = 0; i < files.length; i++) {\n              if (files[i][0] == params.idFileUpload) files.splice(i, 1);\n            }\n\n            //Set Value\n            self.setValue(files);\n\n            // Check maxFiles\n            self.checkMaxFiles();\n          } },\n\n        {\n          text: self.getResource(\"render-ecm-confirm-bt-cancel\"),\n          click: function click() {\n            $(this).dialog(\"close\");\n          } }] });\n\n\n\n    });\n\n    // Bind for cancelcheckout options\n    $(\".ecm-options-cancelcheckout\", control).on('click', function (e) {\n      e.stopPropagation();\n\n      //Close popup\n      $(\".emc-options\", control).click();\n\n      self.waiting(control, false);\n      control.find(\".filename\").empty();\n\n      delete params.prepare; // Ensure run Ajax\n      $.when(self.dataService.cancelCheckOut(params)).\n      done(function (fileProperties) {\n        self.renderFileLayout(self, params, control, fileProperties);\n      });\n    });\n\n    // Bind for checkout options\n    $(\".ecm-options-checkout\", control).off('click').on('click', function (e) {\n      e.stopPropagation();\n\n      //Close popup\n      $(\".meta-data-wrapper\", control).click();\n      self.waiting(control, false);\n      control.find(\".filename\").empty();\n\n      delete params.prepare; // Ensure run Ajax\n      $.when(self.dataService.checkOutFile(params)).done(\n      function (fileProperties) {\n        self.renderFileLayout(self, params, control, fileProperties);\n      });\n    });\n\n    // Bind for edit metadata\n    // Check if the ECM status is READONLY = 4\n    if ($(\".ecm-metadata-value\", control).data(\"ecmstatus\") != 4 && $(\".ecm-metadata-value\", control).data(\"allowupdatemetadata\")) {\n      $(\".ecm-metadata-value\", control).bind('activeeditmode', function (e) {\n        e.stopPropagation();\n\n        // Check read only\n        if (!$(this).data(\"readonly\")) {\n          // Check propagation\n          if ($(this).data(\"edit-mode\") == \"false\" || $(this).data(\"edit-mode\") == \"\") {\n            $(this).data(\"edit-mode\", \"true\");\n\n            switch ($(this).data(\"metadatatype\")) {\n              case \"STRING\":\n                self.makeStringMetaDataControler($(this), control);\n                break;\n              case \"INTEGER\":\n                self.makeStringMetaDataControler($(this), control, function (value) {\n                  // validation function\n                  var valueMatch = value.match(/\\d+/);\n                  return valueMatch != null && valueMatch[0] == valueMatch['input'];\n                });\n                break;\n              case \"DATETIME\":\n                self.makeDatetimeMetaDataControler($(this), control);\n                break;\n              case \"DECIMAL\":\n                self.makeStringMetaDataControler($(this), control, function (value, separator) {\n                  // validation function\n                  var numericFormat = self.getResource('numericFormat');\n\n                  var reg = new RegExp(\"\\\\d+(\\\\\" + numericFormat.decimalSymbol + \"\\\\d)*\");\n                  var valueMatch = value.match(reg);\n                  try {\n                    var lastChar = value.substr(value.length - 1, 1);\n                  } catch (e) {\n                    return false;\n                  }\n                  return valueMatch != null && (valueMatch[0] == valueMatch['input'] || lastChar == numericFormat.decimalSymbol);\n                });\n                break;\n              case \"BOOL\":\n                self.makeBooleanMetaDataControler($(this), control);\n                break;\n              default:\n                self.makeStringMetaDataControler($(this), control);\n                break;}\n\n          }\n        }\n      });\n    }\n\n    // Set events for done and cancel button\n    $(\".ecm-metadata-done\", control).on('click', function (e) {\n      e.stopPropagation();\n      var control = $(this).parent('td');\n      var ecmMetaDataFieldEdit = $(\".ecm-metadata-field-edit\", control);\n      var metadatavalue = \"\";\n      var metadatapostvalue = \"\";\n\n      // Define metadataValue\n      switch (control.data('metadatatype')) {\n        case 'STRING':\n        case 'DECIMAL':\n        case 'INTEGER':\n          metadatavalue = $(\".ecm-metadata-input\", control).val();\n          metadatapostvalue = $(\".ecm-metadata-input\", control).val();\n          break;\n        case 'BOOL':\n          metadatavalue = $(\".biz-render-ecm-upload-boolean input:checked\", control).val();\n          metadatapostvalue = bizagi.util.parseBoolean(metadatavalue) ? 'True' : 'False';\n          metadatavalue = metadatavalue == 'False' ? self.getResource('render-boolean-no') : self.getResource('render-boolean-yes');\n          break;\n        case 'DATETIME':\n          metadatavalue = $(\".ecm-metadata-input\", control).val();\n          if (metadatavalue) {\n            var date = bizagi.util.dateFormatter.getDateFromFormat(metadatavalue, self.properties.datePickerFormat);\n            metadatapostvalue = bizagi.util.dateFormatter.formatInvariant(date, true);\n          }\n          break;}\n\n      // Update metadata\n      control.data('value', metadatapostvalue);\n\n      var spanMetaDataValue = $(\"<span></span>\").addClass(\"ecm-metadata-text\").text(metadatavalue);\n      ecmMetaDataFieldEdit.replaceWith(spanMetaDataValue);\n\n      // Show and hide elements\n      $(\".ecm-metadata-edit\", control).css('display', 'block');\n      $(\".ecm-metadata-done\", control).hide();\n      $(\".ecm-metadata-cancel\", control).hide();\n      control.data(\"edit-mode\", \"false\");\n    });\n\n    $(\".ecm-options-edit\", control).on('click', function (evt, data) {\n      var modalEcm = control;\n      var validateData = data && data.checkData || false;\n\n      evt.stopPropagation();\n\n      // Close popup            \n      if ($(\".emc-options\", control).css(\"display\") === \"block\")\n      $(\".modal-ecm\", control).hide();\n\n      // If data is valid then return \t\n      if (validateData && self.isValidFields(modalEcm)) return;\n\n      if ($(\".ecm-options-edit\", modalEcm).data('editmode') == 'true') {\n        return;\n      } else {\n        $(\".ecm-options-edit\", modalEcm).data('editmode', 'true'); // Active edit mode\n      }\n\n      var template = self.renderFactory.getTemplate(\"upload-ecm-view-default-edit-buttons\");\n      var metadata = [];\n\n      // Render template\n      var editButtons = $.tmpl(template);\n\n      // Enable edit mode for all elements available in the control\n      $(\".ecm-metadata-value[data-allowUpdateMetadata=true]\", control).trigger('activeeditmode');\n\n      // Show save and cancel buttons\n      editButtons.insertAfter($('table', control));\n      $(\".biz-render-ecm-metadata-edit\", control).show(500);\n\n      // Set events to save and cancel buttons\n      // Save button\n      $(\".biz-render-ecm-metadata-edit button:first\", control).on('click', function (evt) {\n        var error = false;\n        var modalEcm = control;\n\n        evt.stopPropagation();\n\n        // verify all mandatory fields\n        $.each($(\".ecm-metadata-value[data-mandatory='true']\", control), function (key, field) {\n          var type = $(field).data('metadatatype');\n          var actualValue;\n\n          if (type == \"BOOL\") {\n            actualValue = $(\".biz-render-ecm-upload-boolean input:checked\", field).val();\n          } else {\n            actualValue = $(field).find('.ecm-metadata-field-edit').val();\n          }\n\n          if (actualValue === \"\" || actualValue === null) {\n            $(field).find('input').attr('placeholder', self.getResource(\"render-ecm-tooltip-mandatory\"));\n            $(field).parent().find('.ecm-metadata-key').addClass(\"mandatory-error\");\n            $(field).parent().effect('highlight', 500);\n\n            error = true;\n          } else {\n            $(field).parent().find('.ecm-metadata-key').removeClass(\"mandatory-error\");\n          }\n        });\n\n        if (error) return;\n\n        $(\".ecm-metadata-done\", control).click();\n        $(\".biz-render-ecm-metadata-edit\", control).hide(300, function () {\n          $(\".biz-render-ecm-metadata-edit\", control).remove();\n        });\n\n        $.each($(\".ecm-metadata-value\", control), function (key, value) {\n          // uses the key as an index for the  ecm-metadata-key and ecm-metadata-value\n          metadata.push({\n            idMetadata: $($(\".ecm-metadata-key\", control)[key]).data(\"idmetadata\"),\n            value: $(value).data(\"value\") });\n\n        });\n\n        params.metaValues = JSON.encode({ metadataValues: metadata });\n\n        delete params.prepare; // Ensure run Ajax\n        $.when(self.dataService.updateECMMetadata(params)).done(function (fileProperties) {\n          $(\".ecm-options-edit\", modalEcm).data('editmode', 'false');\n        });\n      });\n\n      // Cancel button\n      $(\".biz-render-ecm-metadata-edit button:last\", control).on('click', function (evt) {\n        var modalEcm = control;\n\n        evt.stopPropagation();\n\n        $(\".ecm-metadata-cancel\", control).click();\n        $(\".biz-render-ecm-metadata-edit button:first\", control).unbind('click');\n        if ($('.ecm-options-slide', modalEcm).is(':visible')) {\n          $(\".emc-options\", control).click();\n        }\n        $(\".biz-render-ecm-metadata-edit\", control).hide(500, function () {\n          $(\".biz-render-ecm-metadata-edit\", control).remove();\n        });\n        $(\".ecm-options-edit\", modalEcm).data('editmode', 'false');\n      });\n\n    });\n\n    $(\".ecm-metadata-cancel\", control).on('click', function (e) {\n      e.stopPropagation();\n      var control = $(this).parent('td');\n      var inputMetaDataValue = $(\".ecm-metadata-field-edit\", control);\n      var spanMetaDataValue = $(\"<span></span>\").addClass(\"ecm-metadata-text\").text(inputMetaDataValue.data('original-value'));\n\n      inputMetaDataValue.replaceWith(spanMetaDataValue);\n\n      // Show and hide elements\n      $(\".ecm-metadata-edit\", control).css('display', 'block');\n      $(\".ecm-metadata-done\", control).hide();\n      $(\".ecm-metadata-cancel\", control).hide();\n\n      control.data(\"edit-mode\", \"false\");\n    });\n  },\n\n  /*\r\n     * Make input field for edit string metadata\r\n     */\n  makeStringMetaDataControler: function makeStringMetaDataControler(field, control, validationFunction) {\n    var spanMetaDataValue = $(\".ecm-metadata-text\", field);\n    var inputMetaDataValue = $(\"<input></input>\").addClass(\"ecm-metadata-field-edit ecm-metadata-input\").val(spanMetaDataValue.text());\n\n    // Persist in data tag the original value\n    inputMetaDataValue.data('original-value', spanMetaDataValue.text());\n\n    // Change element\n    spanMetaDataValue.replaceWith(inputMetaDataValue);\n\n    inputMetaDataValue.focus();\n\n    // Show and hide elements\n    $(\".ecm-metadata-edit\", field).hide();\n    $(\".ecm-metadata-done\", field).css('visibility', 'visible').show();\n    $(\".ecm-metadata-cancel\", field).css('visibility', 'visible').show();\n\n    // Set event for enter key press\n    $(\".ecm-metadata-input\", field).bind(\"keyup\", function (e) {\n      var inputValue = inputMetaDataValue.val();\n      if (validationFunction) {\n        if (validationFunction(inputValue) || inputValue == \"\") {\n          inputMetaDataValue.data(\"latestdonevalue\", inputValue);\n        } else {\n          inputMetaDataValue.val(inputMetaDataValue.data(\"latestdonevalue\") || \"\");\n        }\n      }\n    });\n  },\n  /*\r\n     * Make input field for edit string metadata\r\n     */\n  makeDatetimeMetaDataControler: function makeDatetimeMetaDataControler(field, control) {\n    var self = this;\n    var spanMetaDataValue = $(\".ecm-metadata-text\", field);\n    var inputMetaDataValue = $(\"<input></input>\").addClass(\"ecm-metadata-field-edit ecm-metadata-input\").val(spanMetaDataValue.text());\n\n    // Persist in data tag the original value\n    inputMetaDataValue.data('original-value', spanMetaDataValue.text());\n\n    // Change element\n    spanMetaDataValue.replaceWith(inputMetaDataValue);\n    inputMetaDataValue.datepicker({\n      dateFormat: self.properties.datePickerFormat,\n      changeYear: true,\n      onSelect: function onSelect(dateText, inst) {\n        inputMetaDataValue.val(dateText + \" 00:00 AM\");\n      } });\n\n\n    // Show and hide elements\n    $(\".ecm-metadata-edit\", field).hide();\n    $(\".ecm-metadata-done\", field).css('visibility', 'visible').show();\n    $(\".ecm-metadata-cancel\", field).css('visibility', 'visible').show();\n\n    // Set event for enter key press\n    $(\".ecm-metadata-input\", field).bind(\"keypress\", function (e) {\n      if (e.keyCode == 13) {\n        $(\".ecm-metadata-done\", control).trigger('click');\n      }\n    });\n  },\n\n  /**\r\n      * Make input field for edit string metadata     \r\n      */\n  makeDecimalMetaDataControler: function makeDecimalMetaDataControler(field, control) {\n    var self = this;\n    var separator = self.getResource('decimalSymbol');\n    self.makeStringMetaDataControler($(this), control, function (value, separator) {\n      // validation function\n      var reg = new RegExp(\"\\\\d+(\\\\\" + separator + \"\\\\d)*\");\n      var valueMatch = value.match(reg);\n      return valueMatch != null && (valueMatch[0] == valueMatch['input'] || valueMatch[1] == undefined);\n    });\n\n  },\n\n  /**\r\n      * Make input field for edit string metadata     \r\n      */\n  makeBooleanMetaDataControler: function makeBooleanMetaDataControler(field, control) {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"upload-ecm-view-default-yesno\");\n    var spanMetaDataValue = $(\".ecm-metadata-text\", field);\n    var metadatavalue = $(field).data(\"value\") || false;\n    var checked = bizagi.util.parseBoolean(metadatavalue) ? true : false;\n    var randomNumber = Math.ceil(Math.random() * 100);\n\n    var inputMetaDataValue = $.tmpl(template, { id: self.properties.id, checked: checked, rnd: randomNumber });\n\n    // Persist in data tag the original value\n    inputMetaDataValue.data('original-value', spanMetaDataValue.text());\n\n    // Change element\n    spanMetaDataValue.replaceWith(inputMetaDataValue);\n\n    // Show and hide elements\n    $(\".ecm-metadata-edit\", field).hide();\n    $(\".ecm-metadata-done\", field).css('visibility', 'visible').show();\n    $(\".ecm-metadata-cancel\", field).css('visibility', 'visible').show();\n\n  },\n\n  /**\r\n      * Check if file its image or not     \r\n      */\n  isImage: function isImage(file) {\n    var extension = this.getFileExtension(file);\n    var image = [\"JPG\", \"JPEG\", \"GIF\", \"PNG\", \"BMP\"];\n\n    return $.inArray(extension.toUpperCase(), image) > -1 ? true : false;\n  },\n\n  /**\r\n      * Template method to implement in each device to customize each render after processed in read-only mode     \r\n      */\n  postRenderReadOnly: function postRenderReadOnly() {\n    var self = this;\n    var control = self.getControl();\n    var mode = self.getMode();\n\n    if (mode != \"execution\") {\n      control.append(\"<div class='ui-icon upload-file'></div>\");\n      return;\n    }\n\n    // Set control container to behave as a block\n    control.addClass(\"ui-bizagi-render-display-block\");\n    control.addClass(\"ui-bizagi-render-upload\");\n\n    // Remove upload wrapper\n    $(\".biz-render-ecm-upload-wrapper\", control).remove();\n\n    // First run show render options\n    self.properties.showRenderOptions = false;\n\n    // Call service and render control\n    self.renderUploadItem();\n\n    $(\".emc-options\", control).remove();\n  },\n\n  /**\r\n      * Build add params to send to the server\r\n      */\n  buildAddParams: function buildAddParams() {\n    var properties = this.properties;\n\n    var data = {\n      url: properties.addUrl,\n      xPath: properties.xpath,\n      idAttrib: properties.idAttrib,\n      xpathContext: properties.xpathContext,\n      metaValues: [],\n      idPageCache: properties.idPageCache,\n      folder: BIZAGI_PATH_TO_BASE,\n      contexttype: properties.contexttype,\n      validExtensions: properties.validExtensions,\n      maxSize: properties.maxSize };\n\n\n    var scriptData = {};\n    $.extend(scriptData, scriptData, data);\n    data.scriptData = scriptData;\n\n    return data;\n  },\n\n  /**\r\n      * Build add params to send to the server     \r\n      */\n  buildUpgradeParams: function buildUpgradeParams(fileControl) {\n    var properties = this.properties;\n\n    var data = {\n      url: properties.editUrl,\n      xPath: properties.xpath,\n      idFileUpload: $(\".ecm-options-upgrade > input\", fileControl).data(\"idfileupload\"),\n      idPageCache: properties.idPageCache,\n      idAttrib: properties.idAttrib,\n      xpathContext: this.getXpathContext(),\n      folder: BIZAGI_PATH_TO_BASE,\n      validExtensions: properties.validExtensions,\n      maxSize: properties.maxSize };\n\n\n    var scriptData = {};\n    $.extend(scriptData, scriptData, data);\n    data.scriptData = scriptData;\n\n    return data;\n  },\n\n  /**\r\n      * Check if the max files condition is true to hide the upload link    \r\n      */\n  checkMaxFiles: function checkMaxFiles() {\n    var self = this;\n    var properties = self.properties;\n    var control = self.getControl();\n    var uploadWrapper = $(\".biz-render-ecm-upload-wrapper\", control);\n\n    if (properties.maxFiles > 0 && self.filesCount >= properties.maxFiles) {\n      uploadWrapper.hide();\n    } else if (self.filesCount < properties.maxFiles) {\n      // Show upload link\n      uploadWrapper.show();\n    }\n  },\n\n  /**\r\n      * Handler to process server response after a file has been uploaded     \r\n      */\n  onUploadFileCompleted: function onUploadFileCompleted(renderReference, result) {\n    var self = renderReference;\n    var control = self.getControl();\n\n    if (result.type != \"error\") {\n\n      self.properties.showRenderOptions = false;\n      var controlList = $(\".biz-render-ecm-view-default\", control);\n      controlList = controlList.length > 0 ? controlList : $(\".biz-render-ecm-delete-confirmation\", control);\n\n      // Increment counter\n      self.filesCount = self.filesCount + 1;\n\n      // Check maxFiles\n      self.checkMaxFiles();\n\n      //Set files in temporal array\n      var files = [].concat(self.files);\n      files.push([result.idFileUpload, result.fileName]);\n\n      //Set Value\n      self.setValue(files, false);\n\n      // Trigger change\n      self.triggerRenderChange();\n\n      self.renderUploadItem(controlList, result);\n    } else {\n      // Show server error\n      if (!result.isMaintenanceWindow) bizagi.showMessageBox(result.message);\n    }\n  },\n\n  /**\r\n      * Check if all meta data fields that's right     \r\n      */\n  isValid: function isValid(invalidElements) {\n    var self = this;\n    var control = self.getControl();\n    var message = [];\n    var error = false;\n    var properties = self.properties;\n    var bValid = true;\n\n    var isNewRow = self.grid && self.grid.isFromCreatedRow.apply(self);\n    var isValidBase = (properties.required || properties.editable) && !isNewRow ? self._super(invalidElements) : true;\n\n    if (properties.required) {\n      bValid = isNewRow ? true : isValidBase;\n\n      if (self.filesCount == 0 && bValid) {\n\n        invalidElements.push({\n          xPath: properties.xpath,\n          message: self.getResource('render-required-text').replaceAll('#label#', properties.displayName) });\n\n\n        bValid = false;\n      }\n    }\n\n    if (properties.editable) {\n      bValid = isNewRow ? true : isValidBase;\n\n      if (!isNewRow) {\n        var $arrayEcmControls = $(\"ul:visible\", control).find(\".ecm-metadata-value[data-mandatory='true']\");\n\n        $.each($arrayEcmControls, function (key, value) {\n          if ($('.ecm-metadata-text', value).text() == \"\") {\n            message.push($(value).data(\"mandatoryfield\"));\n            error = true;\n          }\n        });\n      }\n    }\n\n    if (error) {\n      var errorMessage = self.getResource('render-required-text').replaceAll('#label#', message.join(', '));\n      invalidElements.push({ xPath: properties.xpath, message: errorMessage });\n\n      // If it has error, enable editable view. Then, open popup\n      if ($(\".ecm-options-edit\", control).data('editmode') != \"true\") {\n        $(\".ecm-options-edit\", control).trigger('click', { checkData: true });\n      }\n    }\n\n    return bValid;\n  },\n\n  /*\r\n      * Cleans current value\r\n      */\n  cleanData: function cleanData() {\n    this.setValue(null);\n    this.clearDisplayValue();\n  },\n\n  /**\r\n      * Sets the value in the rendered control     \r\n      */\n  clearDisplayValue: function clearDisplayValue() {\n    var self = this;\n    var control = self.getControl();\n    var arrayItems = control.find(\".biz-render-ecm-view-default\");\n    var length = arrayItems.length - 1;\n\n    $.each(arrayItems, function (index, value) {\n      var item = $(value);\n      var file = item.data();\n\n      if (file) {\n        $.when(self.deleteUploadItem(item, file.id)).done(function () {\n          // Detach item\n          item.remove();\n\n          // Trigger change\n          self.triggerRenderChange();\n        });\n      }\n    });\n\n    // Remove items\n    arrayItems.hide();\n\n    // Check maxFiles\n    self.filesCount = 0;\n    self.checkMaxFiles();\n  },\n\n  /**\r\n      * Add waiting message     \r\n      */\n  waiting: function waiting(ctrl, visible) {\n    ctrl.find(\".ecm-file-name\").css(\"visibility\", visible ? \"visible\" : \"hidden\");\n    ctrl.find(\"table\").css(\"visibility\", visible ? \"visible\" : \"hidden\");\n    ctrl.css(\"background\", visible ? \"\" : \"transparent\");\n\n    if (visible) {\n      ctrl.removeClass(\"waiting\");\n    } else {\n      ctrl.addClass(\"waiting\");\n    }\n  },\n\n  /**\r\n      * Hides the control when click somewhere else          \r\n      */\n  configureToggleHandlers: function configureToggleHandlers() {\n    $(document.body).off(\"click\").on(\"click\", function (e) {\n      if (!$(e.target).hasClass(\"emc-options\") && !$(e.target).hasClass(\"ui-icon-gear\")) {\n        $(\".modal-ecm\", this).hide();\n        $(\"#content-wrapper, .bz-rn-grid-data-wraper\").unbind('scroll');\n        $(document.body).unbind('click');\n      }\n    });\n\n    $(\"#content-wrapper, .bz-rn-grid-data-wraper, .ui-bizagi-dialog-search\").off(\"scroll\").on(\"scroll\", function (e) {\n      if (!$(e.target).hasClass(\"emc-options\") && !$(e.target).hasClass(\"ui-icon-gear\")) {\n        $(\".modal-ecm\", this).hide();\n        $(document.body).unbind('click');\n        $(\"#content-wrapper, .bz-rn-grid-data-wraper\").unbind('scroll');\n      }\n    });\n  },\n\n  /**\r\n      * Validate required field     \r\n      */\n  isValidFields: function isValidFields(metadataContext) {\n    var isValid = true;\n    var $arrayEcmControls = $(metadataContext).find(\".ecm-metadata-value[data-mandatory='true']\");\n\n    $.each($arrayEcmControls, function (key, value) {\n      var currentField = $('.ecm-metadata-text', value).text();\n      if (bizagi.util.isEmpty(currentField)) {\n        isValid = false;\n        return;\n      }\n    });\n\n    return isValid;\n  } });","/*\r\n *   Name: Bizagi Desktop Render Grid Extension\r\n *   Author: oscaro\r\n *   Comments:\r\n *   -   This script will redefine the grid render class to adjust to desktop devices\r\n */\n\n// Extends from render desktop base\nbizagi.rendering.desktop.render.extend(\"bizagi.rendering.desktop.grid.bizagi\", bizagi.rendering.grid.prototype);\n// Extends itself\nbizagi.rendering.desktop.grid.bizagi.extend(\"bizagi.rendering.desktop.grid.bizagi\", {}, {\n  /*\r\n                                                                                          *   Update or init the element data\r\n                                                                                          */\n  initializeData: function initializeData(data) {\n    var self = this;\n\n    this.isRTLDirection = this.isRTLOrientation(this.parent, data && data.properties ? data.properties.orientation : \"\");\n    data.properties.orientation = this.isRTLDirection ? \"rtl\" : data.properties.orientation;\n\n    self.showActionColumn(data);\n\n    // Create a single instance for each cell\n    data.properties.singleInstance = false;\n\n    // Call base\n    this._super(data);\n\n    // Create a data-structure to keep track of each cell properties\n    this.cellMetadata = {};\n\n    // Create a collection to save grid cell changes to execute after it is loaded\n    this.pendingActions = [];\n\n    // Fill default properties\n    var properties = this.properties;\n\n    // set collapse grid\n    this.collapseState = properties.collapseState;\n\n    // Just apply display-type: vertical, align it to the left\n    properties.displayType = \"vertical\";\n    properties.labelAlign = \"left\";\n\n  },\n\n  /*\r\n       If grid has allow some action (Delete, Edit or Detail action), show the action column in grid render.\r\n      */\n  showActionColumn: function showActionColumn(data) {\n    var self = this;\n    var mode = self.getMode();\n    var form = self.getFormContainer();\n    var properties = data.properties || {};\n    var editableGrid = bizagi.util.parseBoolean(properties.editable) != null ? bizagi.util.parseBoolean(properties.editable) : true;\n    var columnActions = bizagi.util.parseBoolean(properties.columnActions) != null ? bizagi.util.parseBoolean(properties.columnActions) : false;\n\n    // If print version mode then columns actions are disabled\n    if (form.getParams() && form.getParams().printversion) {\n      columnActions = false;\n    }\n\n    self.columnActionParams = {\n      columnActions: columnActions,\n      allowDelete: typeof properties.allowDelete == \"undefined\" && editableGrid ? true : false,\n      allowEdit: typeof properties.allowEdit == \"undefined\" && editableGrid ? true : false,\n      allowDetail: typeof properties.allowDetail == \"undefined\" ? false : true,\n      withEditForm: typeof properties.withEditForm == \"undefined\" ? false : true };\n\n\n    if (!data.properties.hideActionsColumn && mode === \"execution\") {\n      var actionsColumn = {\n        \"render\": {\n          \"properties\": {\n            \"id\": \"e51580f3-fd6c-49c0-8c69-73dff93723e5\",\n            \"type\": \"columnActions\",\n            \"xpath-column\": \"constant(\\\"\\\")\",\n            \"displayName\": \"\",\n            \"submitOnChange\": false,\n            \"totalize\": {\n              \"format\": {} },\n\n            \"hasTotalizer\": false,\n            \"preventDefault\": true,\n            \"columnwidth\": \"24px\",\n            \"headerStyles\": {\n              \"header\": \"width: 24px\",\n              \"label\": \"width: 24px\" },\n\n            \"cssclass\": \"bz-grid-header-actions\" } } };\n\n\n\n\n      if (!self.isRTLDirection) {\n        data.elements.splice(0, 0, actionsColumn);\n\n        self.spliceRowData(data.properties.data, 1);\n        self.spliceRowDataVisible(data.properties.data, 1);\n        self.spliceRowDataEditable(data.properties.data, 1);\n      } else {\n        data.elements.push(actionsColumn);\n\n        self.spliceRowData(data.properties.data);\n      }\n    }\n  },\n\n  /*\r\n      *   hasActions\r\n      */\n  hasActions: function hasActions(columnActionParams) {\n    var self = this;\n    if (typeof self.columnActionParams === \"undefined\") {\n      return false;\n    }\n    return self.columnActionParams.columnActions && (self.columnActionParams.allowDelete || self.columnActionParams.allowEdit && self.columnActionParams.withEditForm || self.columnActionParams.allowDetail);\n  },\n\n  getGridTemplate: function getGridTemplate() {\n    return this.renderFactory.getTemplate(\"grid.bizagi\");\n  },\n  /*\r\n     *   Template method to implement in each device to customize each render after processed\r\n     */\n  postRender: function postRender() {\n    var self = this;\n    var properties = self.properties;\n    var control = self.getControl();\n\n    // Call base \n    this._super();\n\n    // Find component holder\n    var grid = self.grid = $(\">div\", control);\n    // Build column metadata\n    var columns = self.buildColumnModel();\n\n    // Hide common label\n    self.getLabel().hide();\n\n    // Reset new records\n    self.cleanNewRecords();\n\n    self.applyGridPlugin();\n\n    // Set initial data\n    if (properties.data) {\n      if (properties.data === \"\" || properties.data.rows.length === 0 && properties.data.page > 1) {\n        self.fetchData(undefined, self.sortBy, self.sortType);\n\n      } else {\n        self.updateData(properties.data);\n\n        // Trigger change in order to start up the actions when the controls is ready\n        $.when(self.ready()).\n        done(function () {\n          self.triggerRenderChange({ changed: false });\n        });\n      }\n    }\n\n    self.initialLoadDone = true;\n    for (var i in self.pendingActions) {\n      if (typeof self.pendingActions[i].method == \"function\") {\n        self.pendingActions[i].method.apply(self, self.pendingActions[i].arguments);\n      }\n    }\n\n    // Set tooltip\n    var buttonsComponent = $(\"[data-bizagi-component='buttons'] li[title!='']\", self.getControl());\n    buttonsComponent.tooltip();\n\n    buttonsComponent = $(\"[data-bizagi-component='cellContent'] button[title!='']\", self.getControl());\n    buttonsComponent.tooltip();\n\n    // Add tooltips to header\n    var columComponent = $(\"[data-bizagi-component='columns'] th > div[title!='']\", self.getControl());\n    columComponent.tooltip();\n\n    //apply columns width\n    self.applyColumnsWidth(grid, columns);\n  },\n\n  /**\r\n      * WARNING: This method here is required in order to avoid changes in the font weigth for the grid\r\n      */\n  changeFontBold: function changeFontBold() {\n    return this;\n  },\n\n  /*\r\n     * Apply grid plugin\r\n     */\n  applyGridPlugin: function applyGridPlugin() {\n    var self = this;\n    var grid = self.grid;\n    var properties = self.properties;\n    var mode = self.getMode();\n\n    var pager = self.renderFactory.getTemplate(\"bizagi.grid.pagination\");\n\n    var form = self.getFormContainer();\n    var canvas = form.container;\n    if (form.params && form.params.context == \"search\" && form.parent && form.parent.params && form.parent.params.canvas) {\n      canvas = form.parent.params.canvas;\n    } else if (form.params && form.params.canvas) {\n      canvas = form.params.canvas;\n    }\n\n    var scrollableArea = canvas.css('overflow-y') == 'scroll' || canvas.css('overflow-y') == 'auto' ? canvas : canvas.scrollParent();\n\n    grid.bizagi_grid_desktop({\n      columns: self.buildColumnModel(),\n      showSummary: properties.showSummary,\n      title: properties.displayName,\n      mode: self.getMode(),\n      scrollableArea: scrollableArea,\n      floatingHeader: properties.floatingHeader || false,\n      hasExclusiveCheck: properties.hasExclusiveCheck || false,\n      tableCssClass: \"\",\n      sortBy: properties.sortBy || \"\",\n      collapse: mode !== \"execution\" ? false : true, // por defecto las grillas seran colapsables en ejecucion\n      collapseState: mode !== \"execution\" ? false : self.collapseState,\n      buttonsPst: mode !== \"execution\" ? false : properties.buttonsPst,\n      sortOrder: properties.sortOrder || \"\",\n      smartPagination: true,\n      sortType: bizagi.override.gridDefaultSortBy || \"asc\",\n      isSortable: properties.isSortable,\n      headerStyles: self.getHeaderStyles(),\n      orientation: properties.orientation || \"ltr\",\n      template: {\n        grid: self.renderFactory.getTemplate(\"bizagi.grid.grid\"),\n        gridRtl: self.renderFactory.getTemplate(\"bizagi.grid.grid.rtl\"),\n        waiting: self.renderFactory.getTemplate(\"bizagi.grid.waiting\"),\n        table: self.renderFactory.getTemplate(\"bizagi.grid.table\"),\n        emptyTable: self.renderFactory.getTemplate(\"bizagi.grid.table.empty\"),\n        column: self.renderFactory.getTemplate(\"bizagi.grid.column\"),\n        specialColumn: self.renderFactory.getTemplate(\"bizagi.grid.column.special\"),\n        row: self.renderFactory.getTemplate(\"bizagi.grid.row\"),\n        rowButtons: self.renderFactory.getTemplate(\"bizagi.grid.row.buttons\"),\n        rowButtonsRtl: self.renderFactory.getTemplate(\"bizagi.grid.row.buttons.rtl\"),\n        cell: self.renderFactory.getTemplate(\"bizagi.grid.cell\"),\n        specialCell: self.renderFactory.getTemplate(\"bizagi.grid.cell.special\"),\n        pager: pager,\n        buttons: self.renderFactory.getTemplate(\"bizagi.grid.buttons\"),\n        buttonsRtl: self.renderFactory.getTemplate(\"bizagi.grid.buttons.rtl\"),\n        dynamicPager: self.renderFactory.getTemplate(\"bizagi.grid.dynamicpager\"),\n        summary: self.renderFactory.getTemplate(\"bizagi.grid.summary\"),\n        summaryCell: self.renderFactory.getTemplate(\"bizagi.grid.summaryCell\"),\n        exportOptions: self.renderFactory.getTemplate(\"bizagi.grid.exportOptions\") },\n\n      actions: {\n        add: properties.allowAdd,\n        edit: properties.allowEdit && properties.withEditForm && properties.data != null,\n        remove: properties.allowDelete,\n        details: properties.allowDetail,\n        inlineAdd: properties.inlineAdd,\n        allowMore: properties.allowMore,\n        enableXlsExport: properties.enableXlsExport,\n        enablePdfExport: properties.enablePdfExport },\n\n      tooltips: {\n        addLabel: properties.addLabel,\n        editLabel: properties.editLabel,\n        deleteLabel: properties.deleteLabel,\n        detailLabel: properties.detailLabel,\n        exportOptionsLabel: properties.exportOptionsLabel },\n\n      isValid: function isValid() {\n        // Validate records \n        var errorsMessage = [];\n        var form = self.getFormContainer();\n\n        // fix for SUITE-8696\n        if (form.validationController !== undefined) {\n          form.validationController.clearValidationMessages();\n        }\n\n        self.isValid(errorsMessage);\n\n        if (errorsMessage.length > 0) {\n          // Show validation message\n          for (var i = 0; i < errorsMessage.length; i++) {\n            form.validationController.showValidationMessage(errorsMessage[i].message, errorsMessage[i].xpath);\n          }\n\n          return false;\n        } else {\n          return true;\n        }\n      },\n      pageRequested: function pageRequested(ui) {\n        if (mode !== \"execution\") return;\n\n        var hasColumnChanges = self.changes && Object.keys(self.changes).length >= 1 ||\n        self.exclusiveChanges && Object.keys(self.exclusiveChanges).length >= 1;\n\n        if (!self.isSummaryOrGlobalForm() && hasColumnChanges) {\n          $.when(self.getFormContainer().saveForm()).done(function () {\n            self.sortRequestedPage(ui);\n          });\n        } else {\n          self.sortRequestedPage(ui);\n        }\n      },\n      sortRequested: function sortRequested(ui) {\n        if (mode != \"execution\" || typeof ui.sortBy === \"undefined\") return;\n\n        // Get column sort xpath\n        var sortName;\n        var getColumn = self.getColumn(ui.sortBy);\n        if (getColumn) {\n          sortName = getColumn.getSortName();\n        } else {\n          getColumn = self.getColumn(ui.sortBy.split(\".\")[0]);\n\n          if (getColumn) {\n            sortName = getColumn.getSortName();\n          }\n        }\n\n        if (ui.sortBy.split(\".\").length > 1) {\n          if (ui.sortBy.split(\".\")[0] == sortName) {\n            sortName = ui.sortBy;\n          }\n        }\n\n        // Perform the sort\n        self.fetchData(ui.page, sortName, ui.sortType);\n      },\n      drawCell: function drawCell(ui) {\n        return self.drawCell(ui.column, ui.key, ui.value, ui.isNewRow);\n      },\n      cellReady: function cellReady(ui) {\n        return self.onCellReady(ui.column, ui.key, ui.cell, ui.isNewRow);\n      },\n      rowSelected: function rowSelected(ui) {\n        if (mode != \"execution\") return;\n\n        self.triggerHandler(\"rowSelected\", { id: ui.key });\n      },\n      addRow: function addRow() {\n        if (mode != \"execution\") return;\n\n        self.addRow.apply(self, arguments);\n      },\n      editRow: function editRow(ui) {\n        if (mode != \"execution\") return;\n\n        if (self.properties.withEditForm)\n        self.editRow(ui.key);\n      },\n      deleteRow: function deleteRow(ui) {\n        if (mode != \"execution\") return;\n\n        self.deleteRow(ui.key);\n      },\n      moreRows: function moreRows(ui) {\n        if (mode != \"execution\") return;\n\n        self.moreRows(ui);\n      },\n      saveAddedRows: function saveAddedRows(ui) {\n        $.when(self.saveInlineAddedRows(ui.keys)).done(function () {\n          //save edited inline rows\n          if (self.properties.inlineEdit) {\n            $.when(self.saveRows()).\n            done(function () {\n              self.refresh();\n\n              self.properties.canBeExported = true;\n            });\n          } else {\n            self.refresh();\n          }\n        });\n      },\n      beforeInlineAdd: function beforeInlineAdd() {\n        self.inlineAddDeferred = new $.Deferred();\n      },\n      afterInlineAdd: function afterInlineAdd() {\n        if (self.inlineAddDeferred) {\n          self.inlineAddDeferred.resolve();\n          self.properties.canBeExported = $(\"li[data-action='save']\", self.grid).is(\":visible\") ? false : true;\n        }\n      },\n      showFormDetails: function showFormDetails(id) {\n        self.showFormDetails(id.key);\n      },\n      cancelEdition: function cancelEdition(ui) {\n        ui.refresh = true;\n        self.removeNewRecords(ui);\n      },\n      removeNewRecords: function removeNewRecords(ui) {\n        self.removeNewRecords(ui);\n      },\n      showGridExportOptions: function showGridExportOptions() {\n        self.showGridExportOptions();\n      },\n      performExportGrid: function performExportGrid(printParams) {\n        self.performExportGrid(printParams);\n      },\n      performCollapseGrid: function performCollapseGrid() {\n        self.performCollapseGrid();\n      },\n      rowdblclick: function rowdblclick(ui) {\n        if (mode != \"execution\") return;\n\n        if (self.canEditRow())\n        self.editRow(ui.businessKey);\n      } });\n\n\n  },\n\n  /*\r\n     *   Triggers the grid plugin event\r\n     */\n  triggerGridPluginHandler: function triggerGridPluginHandler() {\n    try {\n      var args = Array.prototype.slice.call(arguments, 0);\n      return this.grid.bizagi_grid_desktop.apply(this.grid, args);\n    } catch (e) {\n    }\n  },\n\n  /*\r\n     *   Method to render non editable values\r\n     */\n  postRenderReadOnly: function postRenderReadOnly() {\n    // Do the same as the post-render            \n    this.postRender();\n  },\n  /**\r\n      *   Creates the column model required to initialize the grid plugin\r\n      */\n  buildColumnModel: function buildColumnModel() {\n    var self = this;\n    var columns = self.columns;\n\n    // Create id column first\n    var keyColumn = {\n      name: \"id\",\n      index: 0,\n      label: \"id\",\n      hidden: true,\n      key: true,\n      tooltip: \"\" };\n\n\n    // Add to column model\n    var columnModel = [];\n    columnModel.push(keyColumn);\n\n    $.each(columns, function (index, column) {\n\n      // Set grid column\n      column.columnIndex = index + 1;\n\n      var dataType = bizagi.util.normalizeType(column.properties.type);\n      var columnLabel = !bizagi.util.isEmpty(column.properties.displayName) ? column.properties.displayName : \" \";\n      var gridColumn = {\n        name: column.properties.xpath,\n        index: index + 1,\n        label: columnLabel,\n        key: false,\n        tooltip: column.properties.tooltip || \"\",\n        hidden: !column.properties.visible || /columnHidden/i.test(dataType) || column.properties.columnVisible == false,\n        summarizeBy: column.properties.totalize && column.properties.totalize.operation ? column.properties.totalize.operation : undefined,\n        bizAgiProperties: column.properties };\n\n\n      columnModel.push(gridColumn);\n    });\n\n    return columnModel;\n  },\n  /**\r\n      * Makes the grid to refresh\r\n      */\n  refresh: function refresh() {\n    var self = this;\n    if (self.parent && self.parent.properties && self.parent.properties.searchParams && self.parent.properties.searchParams.searchTriggeredBy) {\n      self.fetchData(1);\n    } else {\n      self.fetchData();\n    }\n  },\n  /*\r\n     *   Holds the execution until the grid data is ready after a load operation\r\n     */\n  dataReady: function dataReady() {\n    return this.dataReadyDeferred != null ? this.dataReadyDeferred.promise() : null;\n  },\n  /*\r\n     * Update data from local changes\r\n     */\n  loadChanges: function loadChanges(rows) {\n    var self = this;\n    // get data from the rows\n    for (var rowIndex = 0; rowIndex < rows.length; rowIndex++) {\n      var rowChanges = self.changes[rows[rowIndex][0]];\n      if (self.exclusiveChanges) {\n        rowChanges = $.extend(rowChanges || {}, self.getExclusiveChangeByRow(rows[rowIndex][0]));\n      }\n      // search for changes\n      if (rowChanges !== undefined) {\n        // update all rowChanges in data\n        for (var xpath in rowChanges) {\n          if (rowChanges.hasOwnProperty(xpath)) {\n            var columnData = self.getColumn(xpath);\n            rows[rowIndex][columnData.columnIndex] = self.mapChangeValue(columnData.properties.type, rowChanges[xpath], columnData.comboData);\n          }\n        }\n      }\n    }\n  },\n\n  mapChangeValue: function mapChangeValue(type, change, data) {\n    data = data || [];\n    var value = change;\n    if (change !== null && typeof change !== \"undefined\") {\n      if (type == \"columnCombo\" || type == \"columnRadio\") {\n        if (!bizagi.util.isArray(change)) {\n          var item = data.find(function (el) {\n            return el.id == change;\n          });\n\n          if (item) {\n            value = [[item.id, item.value]];\n          }\n        }\n      }\n    }\n\n    return value;\n  },\n\n  /*\r\n     *   Method to set data and update the grid\r\n     */\n  updateData: function updateData(data) {\n    var self = this;\n    var grid = self.grid;\n    var columns = self.columns;\n\n    // Set value in control\n    if (data) {\n      self.properties.data = data;\n      self.setCellOverrides(data, columns);\n      self.triggerGridPluginHandler(\"setData\", data);\n\n      //apply columns width\n      self.applyColumnsWidthUpdate(grid, columns);\n\n      self.processLayout(isLabelFormat, self.properties.textFormat || {});\n      self.processLayout(!isLabelFormat, self.properties.valueFormat || {});\n    }\n  },\n  /*\r\n     *   Method to fetch data from the server and then update the data\r\n     */\n  fetchData: function fetchData(page, sortBy, sortType) {\n    var self = this;\n    var properties = self.properties;\n\n    self.dataReadyDeferred = new $.Deferred();\n    self.sortBy = sortBy;\n    self.sortType = sortType;\n\n    // Define defaults\n    page = page || properties.page || 1;\n    sortBy = sortBy || properties.sortBy || \"\";\n    sortType = sortType || properties.sortOrder || \"asc\";\n\n    // Update control properties\n    properties.page = page;\n    properties.sortBy = sortBy;\n    properties.sortType = sortType;\n    properties.sort = sortBy + \" \" + sortType;\n\n    // Start loading to avoid multiple calls to the server\n    self.startLoading();\n\n    $.when(self.getRemoteData()).\n    then(function (data) {\n      self.endLoading();\n      if (self.disposed) return;\n      if (data) {\n\n        if (!properties.hideActionsColumn) {\n          if (!self.isRTLDirection) {\n            self.spliceRowData(data, 1);\n\n            self.spliceRowDataVisible(data, 1);\n            self.spliceRowDataEditable(data, 1);\n          } else {\n            self.spliceRowData(data);\n          }\n        }\n\n        if (self.isRTL()) {\n          //remove one extra column from backend. A unnecessary guid to Front-End.\n          //In BPM Project a note says:\n          ////NOTES: At this time there is no way to know whether an Entity has Localized attributes,\n          ////so, the Query Engine will always get Guid values for every Parametric Entity\n          data.rows = self.removeRemainingColumns(data.rows, self.columns.length);\n\n          data.rows = self.changeOrderData(data.rows);\n        }\n        self.loadChanges(data.rows);\n        self.updateData(data);\n\n        if (self.properties.changed !== false || self.properties.method === \"delete\") {\n          self.triggerRenderChange({ changed: false });\n          delete self.properties.changed;\n          delete self.properties.method;\n        }\n\n        if (self.properties.textFormat && typeof self.properties.textFormat.color != \"undefined\") {\n          $(\".bz-rn-grid-header-title, .bz-rn-grid-header-title-rtl\", self.grid).\n          style(\"color\", self.properties.textFormat.color, \"important\");\n        }\n\n        if (self.properties.textFormat && typeof self.properties.textFormat.background != \"undefined\") {\n          $(\".bz-rn-grid-cn-header, .bz-rn-grid-cn-header-rtl\", self.grid).\n          css(\"backgroundColor\", self.properties.textFormat.background);\n\n          $(\".bz-rn-grid-container-foother, .bz-rn-grid-container-foother-rtl\", self.grid).\n          css(\"backgroundColor\", self.properties.textFormat.background);\n        }\n\n        $(\"th\", self.grid).css(\"fontWeight\", \"400\");\n        self.dataReadyDeferred.resolve();\n      }\n    }).fail(function (data) {\n      self.endLoading();\n    });\n  },\n  /*\r\n     *   Returns a promise that will resolve when the element is ready to save\r\n     */\n  isReadyToSave: function isReadyToSave() {\n    var self = this;\n\n    // Save pending inline add rows\n    if (self.grid && self.properties.inlineAdd && (self.properties.allowEdit || this.hasNewRecordsToSave())) {\n      var errorsMessage = [];\n      var newKeys = self.triggerGridPluginHandler(\"getNewRowKeys\");\n      var form = self.getFormContainer();\n\n      // Save new rows then save the whole screen\n      if (newKeys && newKeys.length > 0 && self.isValid(errorsMessage)) {\n        self.properties.alreadySaved = true;\n        return self.saveInlineAddedRows(newKeys).\n        then(function () {\n          self.refresh();\n        });\n      }\n\n      // Show validation message\n      if (errorsMessage.length > 0) {\n        var errDef = $.Deferred();\n\n        errorsMessage.forEach(function (error, index) {\n          form.validationController.showValidationMessage(error.message, error.xpath);\n        });\n\n        errDef.reject(\"error\");\n\n        return errDef.promise();\n      }\n    }\n\n    return null;\n  },\n\n  /*\r\n     *   Add the render data to the given collection in order to send data to the server\r\n     */\n  collectData: function collectData(renderValues) {\n    var self = this;\n    var form = self.getFormContainer();\n    var lastActionButton = form ? form.getLastActionButton() : {};\n    var skipSubmitData = lastActionButton && lastActionButton.action === \"next\";\n    var errorsMessage = [];\n    var saveDeferred;\n    var newKeys;\n\n    // Save pending inline add rows\n    if (self.grid && (self.properties.inlineAdd || self.properties.inlineEdit)) {\n\n      try {\n        newKeys = self.triggerGridPluginHandler(\"getNewRowKeys\");\n        newKeys = newKeys || [];\n      } catch (e) {\n        newKeys = [];\n      }\n\n      if (newKeys && newKeys.length > 0 && skipSubmitData) {\n        self.properties.alreadySaved = false;\n\n        if (!self.isValid(errorsMessage)) return renderValues;\n      }\n\n      // Save new rows then save the whole screen\n      if (newKeys && newKeys.length > 0 && !self.properties.alreadySaved && self.isValid(errorsMessage)) {\n        saveDeferred = self.saveInlineAddedRows(newKeys).\n        then(function () {\n          self.refresh();\n        });\n\n        // Add to deferred collections in order to sync when saving\n        renderValues.deferreds = renderValues.deferreds || [];\n        renderValues.deferreds.push(saveDeferred);\n      }\n\n      if (newKeys && newKeys.length > 0 && !self.isValid(errorsMessage) && saveDeferred) {\n        self.cleanNewRecords();\n      }\n\n      // Remove adding keys from current changes\n      for (var i = 0; i < newKeys.length; i++) {\n        if (self.changes[newKeys[i]]) {\n          delete self.changes[newKeys[i]];\n        }\n      }\n\n    }\n\n    // Call base method\n    self._super(renderValues);\n  },\n\n  sortRequestedPage: function sortRequestedPage(ui) {\n    var self = this;\n    var sortName;\n    var getColumn = self.getColumn(ui.sortBy);\n\n    if (getColumn) {\n      sortName = getColumn.getSortName();\n    } else {\n      getColumn = self.getColumn(ui.sortBy.split(\".\")[0]);\n      if (getColumn) {\n        sortName = getColumn.getSortName();\n      }\n    }\n\n    if (ui.sortBy.split(\".\").length > 1) {\n      if (ui.sortBy.split(\".\")[0] == sortName) {\n        sortName = ui.sortBy;\n      }\n    }\n\n    self.fetchData(ui.page, sortName, ui.sortType);\n  },\n\n  /*\r\n     *   Customizes the content drawing inside the cell\r\n     */\n  drawCell: function drawCell(column, key, value, isNewRow) {\n    var self = this;\n\n    if (column.key) return value;\n\n    // Get render column\n    var cellOverride = self.getCellOverride(key, column.index - 1);\n    var columnIndex = column.index - 1;\n    var renderColumn = self.columns[columnIndex];\n\n    // Fix issue suite-8559, data with null records        \n    self.newRecords = self.newRecords || {};\n\n    // Get cell properties\n    if (!self.cellMetadata[key]) self.cellMetadata[key] = {};\n    if (!self.cellMetadata[key][columnIndex]) self.cellMetadata[key][columnIndex] = {};\n\n    var properties = self.cellMetadata[key][columnIndex].properties || renderColumn.properties;\n    var visible = properties.visible !== undefined ? properties.visible : true;\n    var editable = properties.editable !== undefined ? properties.editable : true;\n\n\n    // Apply overrides from cellOverrides\n    visible = cellOverride.visible;\n    editable = properties.editable ? cellOverride.editable : false;\n\n    // Show editable cell when we are performing inline add operation\n    if (isNewRow && column.bizAgiProperties.type !== \"columnFormLink\") {/*FIX: QAF-1883*/\n      editable = true;\n    }\n\n    renderColumn.properties.displayType = 'value';\n\n    if (column.bizAgiProperties.type === \"columnActions\") {\n      editable = true;\n    }\n\n    // If the cell we are drawing is the summary cell, we need to make it readonly\n    if (key == \"summary\") {\n      editable = false;\n    }\n\n    // Do the render\n    if (visible) {\n      if (editable) {\n        return self.drawEditableCell(renderColumn, properties, key, value, isNewRow);\n      } else {\n        return self.drawReadonlyCell(renderColumn, properties, key, value);\n      }\n    } else {\n      // This line is just to instantiate the decorator for actions and validations. TM02298\n      self.drawReadonlyCell(renderColumn, properties, key, value);\n      return \"<label></label>\";\n    }\n  },\n\n  /*\r\n     *   Draws the editable version for the cell\r\n     */\n  drawEditableCell: function drawEditableCell(renderColumn, properties, key, value, isNewRow) {\n    var self = this;\n    var defer = new $.Deferred();\n\n    // Set editable\n    var originalEditable = renderColumn.properties.editable;\n    renderColumn.properties.editable = true;\n\n    // Fix problem when required property lose\n    renderColumn.overrideProperties({ required: properties.required });\n\n    // Render cell\n    $.when(renderColumn.render(key, value)).done(function (cell) {\n      // Register array with new records, just when this is a newrecord\n      if (isNewRow && !self.newRecords[key]) {\n        self.newRecords[key] = {};\n      }\n\n      // convert all row visible\n      for (var j = 0; j < self.columns.length; j++) {\n        self.cellOverrides[key] = self.cellOverrides[key] || {};\n        self.getCellOverride(key, j).visible = self.getCellOverride(key, j).visible != undefined ? self.getCellOverride(key, j).visible : true;\n      }\n\n      // Add change handler\n      renderColumn.getDecorated(key).\n      unbind(\"renderchange.draweditable\").\n      bind(\"renderchange.draweditable\", function (render, args) {\n        self.onCellChange(renderColumn, cell, key, args);\n      });\n\n      // Resolve cell\n      defer.resolve(cell);\n    });\n\n    // Restore editable\n    renderColumn.properties.editable = originalEditable;\n\n    // Return promise\n    return defer.promise();\n  },\n  /*\r\n     *   Draws the readonly version for the cell\r\n     */\n  drawReadonlyCell: function drawReadonlyCell(renderColumn, properties, key, value) {\n    var result = \"\";\n\n    // Use totalizer format when printing summary row\n    if (key === \"summary\") {\n      var originalFormat = renderColumn.properties.textFormat;\n      if (renderColumn.properties.totalize) {\n        renderColumn.properties.textFormat = renderColumn.properties.totalize.format;\n      }\n\n      result = renderColumn.renderSummary(key, value);\n\n      // Restore column format\n      renderColumn.properties.textFormat = originalFormat;\n    } else {\n      result = renderColumn.renderReadOnly(key, value);\n    }\n\n    return result;\n  },\n  /*\r\n     *   Defines the handler when a cell changes its value\r\n     */\n  onCellChange: function onCellChange(renderColumn, cell, key, args) {\n    var self = this;\n    var _value = renderColumn.getValue(key);\n    var compositeValue = renderColumn.getCompositeValue(key);\n\n    var isNewRecord = self.triggerGridPluginHandler(\"isNewRecord\", key);\n    var newKeys;\n    var errorsMessage = [];\n    var trigger = isNewRecord ? false : true;\n    var dataType = renderColumn.properties.type;\n\n    try {\n      if (dataType == \"columnDate\" && renderColumn.data.properties.showTime == true) {\n\n        if (!bizagi.util.isEmpty(_value)) {\n          var date = bizagi.util.dateFormatter.getDateFromInvariant(_value, true);\n          _value = bizagi.util.dateFormatter.formatInvariant(date, true);\n        } else if (_value === \"\") {\n          _value = \"\";\n        }\n      } else {\n\n        if (dataType == \"columnDate\") {\n\n          if (!bizagi.util.isEmpty(_value)) {\n            var date = bizagi.util.dateFormatter.getDateFromInvariant(_value, false);\n            date.setHours(0, 0, 0, 0);\n            _value = bizagi.util.dateFormatter.formatInvariant(date, true);\n          } else if (_value === \"\") {\n            _value = \"\";\n          }\n\n        } else {\n          if (dataType === \"columnSearch\") {\n\n            var isSubmitOnChange = false;\n\n            if (self.properties.submitOnChange)\n            isSubmitOnChange = renderColumn.properties.advancedSearch || false;\n\n            if (isNewRecord && self.properties.inlineAdd && isSubmitOnChange) {\n              self.collectGridChange($.extend(args, {\n                id: key,\n                xpath: renderColumn.properties.xpath || renderColumn.properties.id,\n                value: _value,\n                compositeValue: compositeValue,\n                columnIndex: renderColumn.columnIndex,\n                trigger: trigger,\n                dataType: dataType,\n                renderId: renderColumn.properties.id }));\n\n\n              try {\n                newKeys = self.triggerGridPluginHandler(\"getNewRowKeys\");\n              } catch (e) {\n                newKeys = [];\n              }\n\n              args.render.startActionExecution();\n\n              var saveDeferred = self.saveInlineAddedRows(newKeys);\n              // Remove adding keys from current changes\n              for (var i = 0; i < newKeys.length; i++) {\n                if (self.changes[newKeys[i]]) {\n                  delete self.changes[newKeys[i]];\n                }\n              }\n\n              $.when(saveDeferred).done(function () {\n                //Save edited rows\n                if (!bizagi.util.isEmpty(self.changes)) {\n                  $.when(self.saveRows()).done(function () {\n                    self.refresh();\n                  });\n                } else {\n                  self.refresh();\n                }\n\n                args.render.endActionExecution();\n              });\n\n              return;\n            }\n          }\n        }\n      }\n\n      var isExclusiveControl = dataType === \"columnBoolean\" && renderColumn.properties.isExclusive;\n\n      if (!isExclusiveControl && (self.properties.allowEdit || isNewRecord)) {\n        self.collectGridChange($.extend(args, {\n          id: key,\n          xpath: renderColumn.properties.xpath || renderColumn.properties.id,\n          value: _value,\n          compositeValue: compositeValue,\n          columnIndex: renderColumn.columnIndex,\n          trigger: trigger,\n          dataType: dataType,\n          renderId: renderColumn.properties.id }));\n\n      }\n\n      if (isExclusiveControl && self.properties.allowEdit) {\n        self.triggerGridPluginHandler(\"deleteCellExclusiveValues\", renderColumn.columnIndex);\n      }\n\n      // Update change in grid's component data\n      self.triggerGridPluginHandler(\"changeCellValue\", key, renderColumn.columnIndex, _value);\n\n      // If the column has totalizers then we need to refresh the summary\n      if (renderColumn.properties.totalize && renderColumn.properties.totalize.operation) {\n        self.triggerGridPluginHandler(\"refreshSummary\", renderColumn.columnIndex);\n      }\n    } catch (error) {\n      bizagi.log(error.message);\n    }\n  },\n\n  /*\r\n     *   Executes when the cell is ready and inserted into the DOM\r\n     */\n  onCellReady: function onCellReady(column, key, cell, isNewRow) {\n    var self = this;\n\n    // Get render column\n    var columnIndex = column.index - 1;\n    var cellOverride = self.getCellOverride(key, columnIndex);\n    var renderColumn = self.columns[columnIndex];\n    var properties = self.cellMetadata[key][columnIndex].properties || renderColumn.properties;\n    var visible = properties.visible !== undefined ? properties.visible : true;\n    var editable = properties.editable !== undefined ? properties.editable : true;\n\n    // apply overrides\n    visible = cellOverride.visible;\n\n    if (column.bizAgiProperties.columnwidth) {\n      if (/boolean/i.test(column.bizAgiProperties.type)) {\n        $(cell).css({\n          \"min-width\": column.bizAgiProperties.columnwidth,\n          \"width\": column.bizAgiProperties.columnwidth });\n\n      } else {\n        $(cell).css({\n          \"min-width\": column.bizAgiProperties.columnwidth,\n          \"max-width\": column.bizAgiProperties.columnwidth });\n\n      }\n    }\n\n    // If the cell we are drawing is the summary cell, we need to make it readonly\n    if (key == \"summary\")\n    editable = false;\n\n    // Show editable cell when we are performing inline add operation\n    if (isNewRow) {\n      editable = true;\n    }\n\n    // Show editable cell when we are performing inline add operation\n    if (column.bizAgiProperties.type === \"columnActions\") {\n      editable = true;\n    }\n\n    if (visible) {\n\n      if (editable) {\n\n        // Set editable\n        var originalEditable = renderColumn.properties.editable;\n        renderColumn.properties.editable = editable;\n\n        // Set xpath context for submitonchange action\n        if (renderColumn.properties.submitOnChange) {\n          var control = renderColumn.getDecorated(key);\n          if (control) {\n            control.properties.submitOnChangexpathContext = self.properties.xpath + \"[]\";\n            control.properties.submitOnChangexpathContextRow = self.properties.xpath + \"[id=\" + key + \"]\";\n          }\n        }\n\n        // Execute cell post render\n        renderColumn.postRender(key, cell);\n\n        // Restore editable\n        renderColumn.properties.editable = originalEditable;\n\n      } else {\n\n        if (key == \"summary\") {\n          //apply styles to summary cells\n          if (!renderColumn.postRenderSummary(key, cell)) {\n            self.applySummaryColumnStyles(cell, properties);\n          }\n\n        } else {\n          // Call post-render\n          renderColumn.postRenderReadOnly(key, cell);\n        }\n\n      }\n\n    }\n  },\n\n  /*\r\n     *   Get aligning class\r\n     */\n  getAlignClass: function getAlignClass(alignType) {\n    switch (alignType) {\n      case 'right':\n        return \"ui-bizagi-grid-align-right\";\n        break;\n      case 'left':\n        return \"ui-bizagi-grid-align-left\";\n        break;\n      case 'center':\n        return \"ui-bizagi-grid-align-center\";\n        break;\n      case 'justify':\n        return \"ui-bizagi-grid-align-justify\";\n        break;}\n\n\n  },\n  /**\r\n      *  Adds a row to the grid\r\n      */\n  addRow: function addRow(addFormDialog) {\n    var self = this;\n    var properties = self.properties;\n    var reverseButtons = properties.orientation == \"rtl\" ? true : false;\n    var buttons = [];\n\n    if (addFormDialog) {\n      // Send add request\n      if (addFormDialog.open) {\n        return;\n      } else {\n        addFormDialog.open = true;\n      }\n    }\n    $.when(self.submitAddRequest()).\n    done(function (newid) {\n\n      // Show dialog with new form after that\n      var dialog = new bizagi.rendering.dialog.form(self.dataService, self.renderFactory, {\n        title: properties.addLabel,\n        orientation: properties.orientation || \"ltr\",\n        maximized: bizagi.override.maximizeGridPopup || false,\n        onSave: function onSave(data) {\n          if (properties.contextType) {\n            data[self.dataService.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = properties.contextType;\n          }\n          return self.submitSaveRequest(newid, data);\n        },\n        onCancel: function onCancel() {\n        } });\n\n\n      buttons[0] = {\n        text: bizagi.localization.getResource(\"render-form-dialog-box-save\"),\n        click: function click(data) {\n          if (properties.contextType) {\n            data[self.dataService.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = properties.contextType;\n          }\n          return self.submitSaveRequest(newid, data);\n        } };\n\n\n      buttons[1] = {\n        text: bizagi.localization.getResource(\"render-form-dialog-box-cancel\"),\n        click: function click() {\n          self.submitRollbackRequest();\n        } };\n\n\n      if (reverseButtons)\n      buttons.reverse();\n\n      var recordXpath = properties.xpath + \"[id=\" + newid + \"]\";\n      dialog.render({\n        idRender: properties.id,\n        recordXPath: recordXpath,\n        xpathContext: properties.xpathContext,\n        idPageCache: properties.idPageCache,\n        requestedForm: \"addForm\",\n        contextType: properties.contextType,\n        url: properties.addPage,\n        fromRender: self,\n        mainForm: self.getMainForm(self.getFormContainer()) }).\n\n      done(function (data) {\n        // Set loading status\n        self.addExclusiveChange(newid, data);\n        self.startLoading();\n\n        if (!properties.submitOnChange) {\n          // Reload grid\n          self.fetchData();\n\n        } else {\n          // Submits the entire form\n          self.submitOnChange().always(function () {\n            self.endLoading();\n          });\n        }\n      }).\n      fail(function (data) {\n        addFormDialog.open = false;\n        $.when(self.submitRollbackRequest(data)).done(function () {\n          self.submitInvalidatePageCacheRequest(data);\n        });\n      });\n    });\n  },\n\n  /* Return true of the grid is editable and has edit form*/\n  canEditRow: function canEditRow() {\n    var self = this;\n    var properties = self.properties;\n    return properties.allowEdit && properties.withEditForm && properties.data != null;\n  },\n  /**\r\n      *  Edits a row in the grid with Form\r\n      *\r\n      */\n  editRow: function editRow(id) {\n\n    if (id == 0 || id == undefined) {\n      bizagi.showMessageBox(bizagi.localization.getResource(\"render-grid-message-no-selected-row\"), bizagi.localization.getResource(\"render-grid-header-no-selected-row\"));\n      return;\n    }\n\n    var self = this;\n    var properties = self.properties;\n\n    //Checks if there is any pending changes in the selected row\n    if (self.changes[id] !== undefined || self.exclusiveChanges && Object.keys(self.exclusiveChanges).length >= 1) {\n\n      var data = $.extend(self.changes[id], {});\n      data.idPageCache = properties.idPageCache;\n      data.disableServerGridValidations = true;\n\n      $(\".ui-tooltip\").remove();\n\n      $.when(self.submitSaveRequest(id, data)).done(function () {\n\n        // Set loading status\n        self.startLoading();\n\n        if (!properties.submitOnChange) {\n          // Reload grid\n          self.fetchData();\n\n        } else {\n          // Submits the entire form\n          self.submitForGridChange().always(function () {\n            self.endLoading();\n\n            // Send edit request\n            self.executeSubmitEditRequest(id, function (data) {\n              self.addExclusiveChange(id, data);\n            });\n          });\n        }\n      });\n    } else {\n      self.executeSubmitEditRequest(id, function (data) {\n        self.addExclusiveChange(id, data);\n      });\n    }\n  },\n\n  /*\r\n     * Gets the format header and builds a object with a css string for label and header\r\n     */\n  getHeaderStyles: function getHeaderStyles() {\n    var self = this;\n    var label = \"\";\n    var header = \"\";\n    var properties = self.properties;\n\n    if (properties.headerFormat) {\n      var format = properties.headerFormat;\n\n      if (format.color) {\n        label += \"color: \" + format.color + \" !important;\";\n      }\n\n      if (format.background) {\n        header += \"background-color: \" + format.background + \";\";\n      }\n\n      label += \"font-weight: \" + (format.bold ? \"bold; \" : \"normal; \");\n\n      if (format.italic) {\n        label += \"font-style: italic; \";\n      }\n\n      if (format.underline || format.strikethru) {\n        var strikethru = bizagi.util.parseBoolean(format.strikethru) ? \"line-through \" : \"\";\n        var underline = bizagi.util.parseBoolean(format.underline) ? \"underline \" : \"\";\n\n        label += \"text-decoration: \" + strikethru + underline + \";\";\n      }\n\n      if (format.size && format.size != \"0\") {\n        var newFontSize = 100 + Number(format.size) * 10 + \"%\";\n        label += \"font-size: \" + newFontSize + \";\";\n      }\n\n    }\n\n    return { label: label, header: header };\n  },\n\n  /**\r\n      * Deprecated method\r\n      *\r\n      * Edit record without form\r\n      * @param int id\r\n      * @returns\r\n      */\n  editInlineRow: function editInlineRow(id) {\n    var self = this;\n    var control = self.getControl();\n\n    if (id == 0 || id == undefined) {\n      bizagi.showMessageBox(bizagi.localization.getResource(\"render-grid-message-no-selected-row\"), bizagi.localization.getResource(\"render-grid-header-no-selected-row\"));\n      return;\n    }\n\n    // Show save and cancel buttons\n    var buttons = $(\"[data-bizagi-component=buttons]\", control);\n    buttons.find(\"[data-action=save]\").css(\"display\", \"inline-block\");\n    buttons.find(\"[data-action=cancel]\").css(\"display\", \"inline-block\");\n\n    // Change row to editable\n    self.changeRowEditable(id, true);\n\n  },\n  /*\r\n     * Change all cells in the row\r\n     */\n  changeRowEditable: function changeRowEditable(id, editable) {\n  },\n  /*\r\n     *   Changes the background for a cell\r\n     */\n  changeCellBackgroundColor: function changeCellBackgroundColor(key, xpath, argument) {\n    var self = this;\n\n    if (self.initialLoadDone) {\n      var control = self.getControlCell(key, xpath);\n      if (control) {\n        control.changeCellBackgroundColor(argument);\n      }\n    } else {\n      self.pendingActions.push({\n        method: self.changeCellBackgroundColor,\n        arguments: arguments });\n\n    }\n\n\n  },\n  /*\r\n     *   Changes the background for a cell\r\n     */\n  changeCellColor: function changeCellColor(key, xpath, argument) {\n    var self = this;\n\n    if (self.initialLoadDone) {\n      var control = self.getControlCell(key, xpath);\n\n      control && control.changeColor(argument);\n    } else {\n      self.pendingActions.push({\n        method: self.changeCellColor,\n        arguments: arguments });\n\n    }\n  },\n  /**\r\n      * Changes the visibility for a cell\r\n      * @param key\r\n      * @param xpath\r\n      * @param argument\r\n      */\n  changeCellVisibility: function changeCellVisibility(key, xpath, argument) {\n    var self = this;\n\n    if (self.initialLoadDone) {\n\n      var control = self.getControlCell(key, xpath);\n      if (control) {\n        control.changeCellVisibility(argument);\n\n        var index = (self.columns || []).findIndex(function (cell) {\n          return self.isCurrentGridCell(cell.properties.xpath, cell.properties.id, xpath);\n        }) || 0;\n\n        var column = self.getColumn(xpath);\n        var cellVisible = column && column.properties.columnVisible && argument;\n\n        self.cellOverrides[key] = self.cellOverrides[key] || {};\n        self.getCellOverride(key, index).visible = cellVisible;\n      }\n    } else {\n      self.pendingActions.push({\n        method: self.changeCellVisibility,\n        arguments: arguments });\n\n    }\n  },\n\n  /**\r\n      * Changes the editability for a cell\r\n      * @param key\r\n      * @param xpath\r\n      * @param argument\r\n      */\n  changeCellEditability: function changeCellEditability(key, xpath, argument) {\n    var self = this;\n\n    if (self.initialLoadDone) {\n\n      var control = self.getControlCell(key, xpath);\n      if (control && control.control) {\n        control.changeEditabilityCellControl(argument, key, xpath);\n\n        var index = (self.columns || []).findIndex(function (cell) {\n          return self.isCurrentGridCell(cell.properties.xpath, cell.properties.id, xpath);\n        }) || 0;\n\n        self.cellOverrides[key] = self.cellOverrides[key] || {};\n        self.getCellOverride(key, index).editable = argument;\n      }\n    } else {\n      self.pendingActions.push({ method: self.changeEditability, arguments: arguments });\n    }\n  },\n\n  changeColumnEditability: function changeColumnEditability(xpath, argument) {\n    var self = this;\n    if (self.initialLoadDone) {\n      var column = self.getColumn(xpath);\n      if (column) {\n        column.properties.editable = argument === \"Default\" ? self.originalProperties.editable : bizagi.util.parseBoolean(argument);\n      }\n    } else {\n      self.pendingActions.push({ method: self.changeEditability, arguments: arguments });\n    }\n  },\n\n  changeColumnVisibility: function changeColumnVisibility(xpath, argument) {\n    var self = this;\n    if (self.initialLoadDone) {\n      var column = self.getColumn(xpath);\n      if (column) {\n        column.properties.visible = argument === \"Default\" ? self.originalProperties.visible : bizagi.util.parseBoolean(argument);\n      }\n    } else {\n      self.pendingActions.push({ method: self.changeCellVisibility, arguments: arguments });\n    }\n  },\n\n  changeColumnRequired: function changeColumnRequired(xpath, argument) {\n    var self = this;\n    if (self.initialLoadDone) {\n      var column = self.getColumn(xpath);\n      if (column) {\n        column.properties.required = argument === \"Default\" ? self.originalProperties.required : bizagi.util.parseBoolean(argument);\n      }\n    } else {\n      self.pendingActions.push({\n        method: self.changeCellRequired,\n        arguments: arguments });\n\n    }\n  },\n\n  afterToRefresh: function afterToRefresh() {\n    var self = this;\n    var action, form;\n    var args = Array.prototype.slice.call(arguments);\n\n    if (bizagi.override.enableGridRefreshAfterCellRefresh) {\n      if (args[0] && bizagi.util.isObject(args[0])) {\n        action = args[0].action;\n\n        if (action == \"refreshCell\") {\n          form = self.getFormContainer();\n          $.when(form.getLoaderPromise()).done(function () {\n            form.actionController.refreshControl(self.properties.xpath, form.properties.xpathContext, \"refresh\");\n          });\n        }\n      }\n    }\n  },\n\n  /**\r\n      * Clean data of cell\r\n      * @param key\r\n      * @param xpath\r\n      * @returns {*}\r\n      */\n  cleanCellData: function cleanCellData(key, xpath) {\n    var self = this;\n\n    if (self.initialLoadDone) {\n      var control = self.getControlCell(key, xpath);\n      if (control) {\n        return $.when(control.cleanData()).then(function () {\n          var index = (self.columns || []).findIndex(function (cell) {\n            return self.isCurrentGridCell(cell.properties.xpath, cell.properties.id, xpath);\n          }) || 0;\n\n          var rows = self.properties.data.rows;\n          var i = 0;\n          var rowLength = rows.length;\n\n          for (; i < rowLength; i++) {\n            if (Number(key) === rows[i][0]) {\n              rows[i][index + 1] = \"\";\n              break;\n            }\n          }\n          self.cellOverrides[key] = self.cellOverrides[key] || {};\n          self.getCellOverride(key, index).value = null;\n        });\n      }\n    } else {\n      self.pendingActions.push({\n        method: self.cleanData,\n        arguments: \"\" });\n\n    }\n  },\n  /**\r\n      * Changes the required for cell\r\n      * @param key\r\n      * @param xpath\r\n      * @param argument\r\n      */\n  changeCellRequired: function changeCellRequired(key, xpath, argument) {\n    var self = this;\n\n    if (self.initialLoadDone) {\n      var control = self.getControlCell(key, xpath);\n      if (control) {\n        control.changeCellRequired(argument);\n        var index = (self.columns || []).findIndex(function (cell) {\n          return self.isCurrentGridCell(cell.properties.xpath, cell.properties.id, xpath);\n        }) || 0;\n\n        self.cellOverrides[key] = self.cellOverrides[key] || {};\n        self.getCellOverride(key, index).required = argument;\n      }\n    } else {\n      self.pendingActions.push({\n        method: self.changeCellRequired,\n        arguments: arguments });\n\n    }\n  },\n  /*\r\n     *  Changes the required for cell\r\n     */\n  changeCellValue: function changeCellValue(key, xpath, argument) {\n    var self = this;\n\n    if (self.initialLoadDone) {\n      var control = self.getControlCell(key, xpath);\n      if (control) {\n        control.setDisplayValue(argument);\n\n        var renderColumn = control.column || {};\n        var dataType = renderColumn.properties && renderColumn.properties.type;\n        var _value = self.getCellValueFormatted(renderColumn, renderColumn.getValue(key));\n\n        control.triggerHandler(\"renderchange\", { render: self, changed: true });\n\n        self.collectGridChange({\n          id: key,\n          xpath: renderColumn.properties.xpath,\n          value: _value,\n          compositeValue: renderColumn.getCompositeValue(key),\n          columnIndex: control.columnIndex,\n          trigger: false,\n          dataType: dataType,\n          renderId: renderColumn.properties.id });\n\n      }\n    } else {\n      self.pendingActions.push({\n        method: self.setDisplayValue,\n        arguments: arguments });\n\n    }\n  },\n\n  /*\r\n      *   Changes the max value for a cell\r\n      */\n  changeCellMaxValue: function changeCellMaxValue(key, xpath, argument) {\n    var self = this;\n\n    if (self.initialLoadDone) {\n      var control = self.getControlCell(key, xpath);\n      if (control) {\n        control.changeMaxValue(argument);\n      }\n    } else {\n      self.pendingActions.push({\n        method: self.changeMaxValue,\n        arguments: arguments });\n\n    }\n  },\n  /*\r\n      *   Changes the min value for a cell\r\n      */\n  changeCellMinValue: function changeCellMinValue(key, xpath, argument) {\n    var self = this;\n\n    if (self.initialLoadDone) {\n      var control = self.getControlCell(key, xpath);\n      if (control) {\n        control.changeMinValue(argument);\n      }\n    } else {\n      self.pendingActions.push({\n        method: self.changeMinValue,\n        arguments: arguments });\n\n    }\n  },\n  /**\r\n      *  Deletes  a row to the grid\r\n      */\n  deleteRow: function deleteRow(id) {\n    var self = this;\n\n    if (!id || id == 0) {\n      bizagi.showMessageBox(bizagi.localization.getResource(\"render-grid-message-no-selected-row\"), bizagi.localization.getResource(\"render-grid-header-no-selected-row\"));\n      return;\n    }\n\n    bizagi.showConfirmationBox(this.getResource(\"render-grid-delete-confirmation\")).\n    done(function () {\n      self.startLoading();\n      $.when(self.saveRows()).then(function () {\n        // Do a grid record deletion\n        return $.when(self.submitDeleteRequest(id)).then(function (data) {\n          // Remove temporal record\n          self.removeNewRecords({ keys: [id] });\n\n          // Check if the answer of request was valid\n          // if there an rule validation on delete action, the answer could be invalid\n          // data.type == \"validationMessage\"\n          if (data.type == \"success\") {\n            // Trigger the event\n            //'key' must be included to trigger a single call to actions and validations\n            //line 310 bizagi.command.controllers.action\n            self.triggerRenderChange({ rowDeleted: true, changed: false, key: id });\n            //For exclusive checks - Remove check over list\n            for (var key in self.enabledChecks) {\n              var checks = self.enabledChecks[key];\n              var index = checks.findIndex(function (el) {\n                return el.id == id;\n              });\n              checks.splice(index, 1);\n            }\n          }\n\n          // Reload grid\n          self.properties.changed = false;\n          self.properties.method = \"delete\";\n\n          self.calculateFetchData(data, id);\n        });\n      }).always(function () {\n        self.endLoading();\n      });\n    });\n  },\n\n  calculateFetchData: function calculateFetchData(data, id) {\n    var self = this,rows;\n    var properties = self.properties;\n\n    if (data.type === \"success\") {\n      rows = properties.data && properties.data.rows;\n      if (rows.length === 1 && rows[0][0] === Number(id)) {\n        if (properties.page > 1) {\n          return self.fetchData(properties.page - 1);\n        }\n      }\n    }\n\n    return self.fetchData();\n  },\n\n  saveRows: function saveRows() {\n    var self = this;\n    var data = {};\n    var form = self.getFormContainer();\n\n    self.collectData(data);\n\n    if ($.isEmptyObject(data)) {\n      return;\n    } else {\n      return self.dataService.submitData({\n        action: \"SUBMITDATA\",\n        data: data,\n        xpathContext: form.properties.xpathContext,\n        idPageCache: form.properties.idPageCache });\n\n    }\n  },\n\n  moreRows: function moreRows(ui) {\n    var self = this;\n    var properties = self.properties;\n\n    if (typeof properties.originalrowsPerPage === \"undefined\") {\n      properties.originalrowsPerPage = properties.rowsPerPage;\n    }\n    properties.rowsPerPage += properties.originalrowsPerPage;\n\n    var dataToSend = {};\n    self.collectData(dataToSend);\n\n    if (jQuery.isEmptyObject(dataToSend)) {\n      self.moreRowsCommon(ui);\n      return;\n    }\n    // Send the data\n    self.dataService.submitData({\n      action: \"SUBMITDATA\",\n      data: dataToSend,\n      idRender: properties.id,\n      xpath: properties.xpath,\n      xpathContext: properties.xpathContext,\n      idPageCache: properties.idPageCache }).\n    done(function () {\n      self.moreRowsCommon(ui);\n    });\n\n  },\n\n  moreRowsCommon: function moreRowsCommon(ui) {\n    var self = this;\n    var properties = self.properties;\n\n    self.fetchData(ui.page, ui.sortBy, ui.sortType);\n\n    $.when(self.dataReadyDeferred).done(function () {\n\n      if (properties.records != 0)\n      if (properties.records + 1 <= properties.rowsPerPage) {\n        $(\".ui-bizagi-grid-dynamic-pager\", self.getControl()).hide();\n      }\n\n    });\n  },\n\n  executeSubmitEditRequest: function executeSubmitEditRequest(id, callback) {\n    var self = this;\n    var properties = self.properties;\n    var reverseButtons = properties.orientation == \"rtl\" ? true : false;\n    var buttons = [];\n\n    var showSaveButton = self.getFormContainer().properties.displayAsReadOnly == true ? false : true;\n\n    $.when(self.submitEditRequest(id)).\n    done(function () {\n      // Show dialog with new form after that\n      var recordXpath = properties.xpath + \"[id=\" + id + \"]\";\n\n      var dialog = new bizagi.rendering.dialog.form(self.dataService, self.renderFactory, {\n        title: properties.editLabel,\n        showSaveButton: showSaveButton,\n        orientation: properties.orientation || \"ltr\",\n        maximized: bizagi.override.maximizeGridPopup || false,\n        onSave: function onSave(data) {\n          return self.submitSaveRequest(id, data);\n        }, //Setup the print functionality\n        extraButtons: bizagi.override.enablePrintFromEditForm ? {\n          \"workportal-widget-dialog-box-print\": function workportalWidgetDialogBoxPrint() {\n            self.printFormCommand = new bizagi.workportal.command.printform(self.renderFactory);\n\n            var printParams = {\n              idRender: properties.id,\n              recordXPath: recordXpath,\n              xpathContext: properties.xpathContext,\n              idPageCache: properties.idPageCache,\n              requestedForm: \"editForm\",\n              contextType: properties.contextType,\n              fileName: properties.displayName };\n\n\n            self.printFormCommand.print(printParams);\n          } } :\n        {} });\n\n\n      buttons[0] = {\n        text: bizagi.localization.getResource(\"render-form-dialog-box-save\"),\n        click: function click(data) {\n          return self.submitSaveRequest(id, data);\n        } };\n\n\n      if (reverseButtons)\n      buttons.reverse();\n\n      dialog.render({\n        idRender: properties.id,\n        recordXPath: recordXpath,\n        xpathContext: properties.xpathContext,\n        idPageCache: properties.idPageCache,\n        requestedForm: \"editForm\",\n        url: properties.editPage,\n        contextType: properties.contextType }).\n\n      done(function (data) {\n        if (callback) {\n          callback(data);\n        }\n        // Set loading status\n        self.startLoading();\n\n        if (!properties.submitOnChange) {\n          // Reload grid\n          self.fetchData();\n\n        } else {\n          // Submits the entire form\n          self.submitOnChange().always(function () {\n            self.endLoading();\n          });\n        }\n\n      }).\n      fail(function (data) {\n        $.when(self.submitRollbackRequest(data)).done(function () {\n          self.submitInvalidatePageCacheRequest(data);\n        });\n      });\n    });\n  },\n  /**\r\n      *  Show details with record information\r\n      */\n  showFormDetails: function showFormDetails(id) {\n    var self = this;\n    var properties = self.properties;\n\n    if (id == 0 || id == undefined) {\n      bizagi.showMessageBox(bizagi.localization.getResource(\"render-grid-message-no-selected-row\"), bizagi.localization.getResource(\"render-grid-header-no-selected-row\"));\n      return;\n    }\n\n    var dialog = new bizagi.rendering.dialog.form(self.dataService, self.renderFactory, {\n      title: properties.detailLabel || bizagi.localization.getResource(\"render-grid-details-form\"),\n      showSaveButton: false,\n      maximized: bizagi.override.maximizeGridPopup || false,\n      cancelButtonLabel: bizagi.localization.getResource(\"render-form-dialog-box-close\") });\n\n\n    // Show dialog with new form after that\n    var recordXpath = properties.xpath + \"[id=\" + id + \"]\";\n    dialog.render({\n      idRender: properties.id,\n      recordXPath: recordXpath,\n      xpathContext: properties.xpathContext,\n      idPageCache: properties.idPageCache,\n      requestedForm: \"detailForm\",\n      url: properties.editPage,\n      editable: false });\n\n  },\n  /**\r\n      * Retrieve the data for the new rows and push them into the server\r\n      * @param keys\r\n      * @returns {*}\r\n      */\n  saveInlineAddedRows: function saveInlineAddedRows(keys) {\n    var self = this;\n    var queue = [];\n\n    for (var i = 0; i < keys.length; i++) {\n      queue.push(self.prepareAddAction(keys[i]));\n    }\n\n    // Set Flag to prevent duplicate records (modal window)\n    self.properties.alreadySaved = true;\n\n    var form = self.getFormContainer();\n    var defer = new $.Deferred();\n\n    form.useOrSetLoaderDeferred();\n    form.appendWaitForLoader({\n      promise: defer.promise() });\n\n\n    // Perform the batch\n    return $.when.apply($, queue).always(function () {\n      defer.resolve();\n    });\n  },\n  /*\r\n     *   Prepares the add action\r\n     */\n  prepareAddAction: function prepareAddAction(key) {\n    var self = this;\n    var properties = self.properties;\n\n    // Build submit data\n    var submitData = self.changes[key];\n\n    return self.dataService.multiaction().addGridRecordData({\n      url: properties.addUrl,\n      idRender: properties.id,\n      xpath: properties.xpath,\n      xpathContext: properties.xpathContext,\n      contexttype: properties.contexttype,\n      idPageCache: properties.idPageCache,\n      submitData: submitData }).\n    then(function (data) {\n      delete self.changes[key];\n      delete self.cellOverrides[key];\n      delete self.newRecords[key];\n\n      // Remove new records\n      self.setRowAsSaved(key);\n\n      return data;\n    });\n  },\n  /*\r\n     * Removes invalid records\r\n     */\n  removeNewRecords: function removeNewRecords(ui) {\n    var self = this;\n    var hasRefresh = false;\n\n    if (ui && ui.refresh) {\n      hasRefresh = self.changes && Object.keys(self.changes).length > 0 && !self.isValid([]);\n    }\n\n    if (ui && ui.keys) {\n      $.each(ui.keys, function (_, key) {\n        if (self.newRecords[key]) {\n          delete self.newRecords[key];\n        }\n      });\n    }\n\n    // Refresh grid\n    if (hasRefresh) {\n      self.properties.changed = false;\n      self.refresh();\n    }\n  },\n\n  /*\r\n     * Show the print menu options\r\n     */\n  showGridExportOptions: function showGridExportOptions() {\n    var self = this;\n    var exportPst;\n    var content = self.getControl();\n    var changes = [];\n\n    var form = self.getFormContainer();\n    var expMenuDirection = self.properties.buttonsPst === true ? \"top\" : \"bottom\";\n    var isRTLOrientation = self.properties.orientation === \"rtl\";\n\n    var exportPstWrapperCss = isRTLOrientation ? \".ui-bizagi-grid-export-options-wrapper-rtl\" : \".ui-bizagi-grid-export-options-wrapper\";\n    var exportPstContentCss = isRTLOrientation ? \".ui-bizagi-grid-export-options-content-rtl\" : \".ui-bizagi-grid-export-options-content\";\n\n    if (self.properties.buttonsPst === true) {\n      exportPst = $(exportPstWrapperCss, content).outerHeight();\n    } else {\n      exportPst = -1 * $(exportPstContentCss, content).outerHeight();\n    }\n\n    // Adjust the print options wrapper to the required position, upper the print options button\n    $(exportPstContentCss, content).css(expMenuDirection, exportPst);\n\n    if ($(exportPstContentCss, content).hasClass('hidden')) {\n      $(exportPstContentCss, content).removeClass('hidden');\n      $(exportPstContentCss, content).show();\n    } else {\n      $(exportPstContentCss, content).addClass('hidden');\n    }\n\n    if (form) {\n\n      if (self.hasChanged(changes) && self.properties.alreadySaved === false && form.properties.editable || self.properties.canBeExported === false && form.properties.editable) {\n        var hasVisibleActions = $(\"li[data-action='save']\", self.grid).is(\":visible\");\n\n        if (!self.hasChanged(changes) && self.properties.alreadySaved === false && !hasVisibleActions || self.canBeExport()) {\n          self.properties.canBeExported = true;\n        } else {\n          // When the table has totalizer counts as change,  although that is not a change\n          if (!(Object.keys(self.changes).length === 1 && self.changes.summary)) {\n            $(\"#print-grid-save-first\", content).show();\n            $(\"#print-grid-pdf\", content).hide();\n            $(\"#print-grid-xls\", content).hide();\n          }\n        }\n      } else {\n        self.properties.canBeExported = true;\n      }\n    }\n\n  },\n\n  /**\r\n      * Executes collapse grid\r\n      */\n  performCollapseGrid: function performCollapseGrid() {\n    var self = this;\n    var $content = self.getControl();\n    var isRTLOrientation = self.properties.orientation === \"rtl\";\n    var collapseHeaderCss = isRTLOrientation ? \".bz-rn-grid-cn-header-rtl\" : \".bz-rn-grid-cn-header\";\n\n    var $gridWrapper = $(\".bz-rn-grid-wrapper\", $content);\n    var $collapseIcon = $(collapseHeaderCss + \" .ui-icon\", $content);\n\n    if (!isRTLOrientation) {\n      var $header = $(\".bz-rn-grid-cn-header\", $content);\n      $header.toggleClass(\"bz-rn-grid-header-state-collapsed\").\n      toggleClass(\"bz-rn-grid-header-state-active\");\n    }\n\n    $collapseIcon.toggleClass(\"ui-state-collapse\").toggleClass(\"ui-state-expand\");\n    $gridWrapper.toggleClass(\"bz-rn-grid-body-collapse\");\n\n    self.collapseState = $gridWrapper.hasClass(\"bz-rn-grid-body-collapse\");\n    self.triggerGridPluginHandler(\"updateCollapseState\", self.collapseState);\n\n    self.updateCollapseState();\n  },\n\n  /**\r\n      * Update collapse grid state\r\n      * @returns {*}\r\n      */\n  updateCollapseState: function updateCollapseState() {\n    var properties = this.properties;\n    var params = {\n      url: properties.dataUrl,\n      xpath: properties.xpath,\n      idRender: properties.id,\n      xpathContext: properties.xpathContext,\n      contexttype: properties.contextType,\n      idPageCache: properties.idPageCache,\n      collapseState: this.collapseState };\n\n\n    // Example of process property value\n    return this.dataService.multiaction().getCollapseData(params);\n  },\n\n  /**\r\n      * Executes the grid export\r\n      * @param params (Object) exportType: \"pdfExport\" Handles the print functionality showing a message warning the user\r\n      * to install Adobe Acrobat, if he haven't installed\r\n      */\n  performExportGrid: function performExportGrid(params) {\n    var self = this;\n    var result = true;\n\n    if (params.exportType === \"pdfExport\") {\n      var isAcrobatInstalled = self.checkAdobePlugin();\n      if ($.browser.msie && !isAcrobatInstalled) {\n        result = false;\n\n        $.when(bizagi.showMessageBox(bizagi.localization.getResource(\"workportal-acrobat-message\"))).\n        done(function () {\n          self.downloadExportedGrid(params);\n        });\n      }\n    }\n\n    if (result)\n    self.downloadExportedGrid(params);\n  },\n\n  /*\r\n     * Updates manually the affected cell \r\n     * @param key: the key of the affected cells's column\r\n     * @param newValue: the new value to store in the affected cell\r\n     * @param columnIndex: the column index of the cells's column\r\n     */\n  updateAffectedCellManually: function updateAffectedCellManually(key, newValue, columnIndex) {\n    var self = this;\n    var i = self.columns.length;\n    var rowIndex = self.getRowIndexByKey(key);\n\n    //updates the value manually if is different than the current\n    if (typeof rowIndex !== \"undefined\" && self.properties.data.rows[rowIndex][columnIndex] !== newValue) {\n      self.properties.data.rows[rowIndex][columnIndex] = newValue;\n\n      //Refresh the summary\n      var summary = $(\".ui-bizagi-grid-summary\", self.grid);\n      summary.empty();\n      summary.html(self.grid.bizagi_grid_desktop(\"drawSummary\"));\n      self.grid.bizagi_grid_desktop(\"postRenderSummary\", summary);\n    }\n  },\n\n  /*\r\n     * Get the row index using the key as a reference\r\n     */\n  getRowIndexByKey: function getRowIndexByKey(key) {\n    var self = this;\n    var i = self.properties.data.rows.length;\n\n    while (i-- > 0) {\n      if (key == self.properties.data.rows[i][0]) {\n        return i;\n      }\n    }\n  },\n\n  /**\r\n      * Checks if the Adobe Acrobat is installed\r\n      * @returns {*}\r\n      */\n  checkAdobePlugin: function checkAdobePlugin() {\n    var installed;\n    try {\n      installed = new ActiveXObject('AcroPDF.PDF');\n    } catch (e) {\n      bizagi.log(e);\n    }\n\n    if (!installed) {\n      try {\n        // Older Ie\n        installed = new ActiveXObject('PDF.PdfCtrl');\n      } catch (e) {\n        bizagi.log(e);\n      }\n    }\n\n    return installed;\n  },\n\n  /**\r\n      * Download the created file\r\n      * @param params\r\n      */\n  downloadExportedGrid: function downloadExportedGrid(params) {\n    var self = this;\n\n    self.getGridExportFile(params).then(function (blobFile) {\n      var fileName = self.properties.displayName;\n      fileName += params.exportType === \"xlsExport\" ? \".xlsx\" : \".pdf\";\n\n      bizagi.util.downloadBlobFile(blobFile, fileName);\n    }).fail(function (err) {\n      var form = self.getFormContainer();\n      form && form.failHandler(err);\n    });\n  },\n\n  /*\r\n     *\r\n     */\n  formatGrid: function formatGrid(control) {\n    //var control = printContent,\n    var tableControl = $('.ui-bizagi-grid-table', control);\n    var closeButton = $('.ui-jqgrid-titlebar-close', control);\n\n    $(\"th.ui-bizagi-column-hidden, td.ui-bizagi-grid-key, .bz-rn-grid-container-foother\", control).remove();\n\n    //Remove click event\n    $(\"[data-action], ul li, .ui-bizagi-grid-column, tr, th\", tableControl).unbind(\"click\");\n\n    // Remove close button\n    $(closeButton).remove();\n  },\n  /*\r\n     *   Returns a promise that will resolve when the element is ready\r\n     */\n  ready: function ready() {\n    var self = this;\n    var parentPromise = self._super();\n    var inlineAddPromise = self.inlineAddDeferred ? self.inlineAddDeferred.promise() : null;\n    return $.when(parentPromise, inlineAddPromise);\n  },\n\n  /*\r\n     * Apply Columns Width in postrender\r\n     */\n  applyColumnsWidth: function applyColumnsWidth(grid, columns) {\n\n    for (var i = 0; i < columns.length; i++) {\n      var column = grid.find(\".resizableColumn\")[i];\n\n      if (column) {\n        var columnIndex = $(column).find(\">.ui-bizagi-grid-column\");\n        var index = columnIndex.length == 1 ? Number($(column).find(\">.ui-bizagi-grid-column\").data(\"column-index\")) : i;\n        var columnWidth = columns[index].bizAgiProperties.columnwidth;\n        var widthToApply = \"auto\";\n\n        if (columns[index].bizAgiProperties && columnWidth && columnWidth != \"auto\") {\n          widthToApply = columnWidth;\n        }\n        $(column).css(\"width\", widthToApply);\n        $(column).find(\".ui-bizagi-grid-column\").css(\"width\", \"auto\");\n      }\n    }\n  },\n\n  /*\r\n     * Apply Columns Width in update (add or delete a row)\r\n     */\n  applyColumnsWidthUpdate: function applyColumnsWidthUpdate(grid, columns) {\n\n    var self = this,index = null,column = null,columnIndex = null,columnWidth = null,widthToApply = null;\n    var resizableColumns = grid.find(\".resizableColumn\");\n    var length = resizableColumns.length;\n\n    for (var i = 0; i < length; i++) {\n      column = resizableColumns[i];\n      columnIndex = $(column).find(\">.ui-bizagi-grid-column\");\n      index = columnIndex.length == 1 ? Number($(column).find(\">.ui-bizagi-grid-column\").data(\"column-index\")) - 1 : i;\n\n      columnWidth = columns[index].properties.columnwidth;\n      widthToApply = \"auto\";\n\n      if (columns[index].properties && columnWidth && columnWidth != \"auto\") {\n        widthToApply = columnWidth;\n      }\n\n      $(column).css(\"width\", widthToApply);\n      $(column).find(\".ui-bizagi-grid-column\").css(\"width\", \"auto\");\n    }\n\n  },\n\n  /*\r\n     *   Apply summary column styles to a specified element\r\n     */\n  applySummaryColumnStyles: function applySummaryColumnStyles(element, properties) {\n    var self = this;\n    var elementChild = element.find(\".ui-bizagi-grid-summary-readonly\");\n\n    if (properties.totalize != null && properties.totalize.format != null) {\n      var format = properties.totalize.format;\n      var textDecorator = \"\";\n\n      // Set cell back color\n      if (format.background) {\n        element.css(\"background-color\", format.background);\n        element.css(\"background-image\", \"none\");\n      }\n      if (format.size && format.size != \"0\") {\n        var size = format.size.toString();\n        var operator = size.substring(0, 1);\n        var value = size.substring(1, size.length);\n        value = operator == \"+\" ? 100 + 10 * Number(value) : 100 - 10 * Number(value);\n        elementChild.css(\"font-size\", value + \"%\");\n      }\n      if (format.italic) {\n        elementChild.css(\"font-style\", \"italic\");\n      }\n      if (format.color) {\n        $(\"label\", elementChild).css(\"color\", format.color);\n      }\n      if (format.underline) {\n        textDecorator += \"underline \";\n      }\n      if (format.strikethru) {\n        textDecorator += \"line-through\";\n      }\n      if (format.bold == true || format.bold == undefined) {\n        elementChild.css(\"font-weight\", \"bold\");\n      }\n      elementChild.css(\"text-decoration\", textDecorator);\n    }\n  },\n\n  /* Return the icons container*/\n  getContainerIcons: function getContainerIcons() {\n    return $(\"> .ui-bizagi-control > .ui-bizagi-control-wrapper > .ui-bizagi-render-icons\", this.element);\n  },\n\n  /**\r\n      * Customizes render color\r\n      * @param color\r\n      * @param isLabelFormat\r\n      */\n  changeColor: function changeColor(color, isLabelFormat) {\n    var self = this;\n    var control = self.getControl();\n    var label = self.getLabel();\n    var isLabelFormat = typeof isLabelFormat !== \"undefined\" || isLabelFormat != null ? isLabelFormat : true;\n\n    if (control && label) {\n      if (color != \"none\") {\n        // Hide - show the render\n        if (self.properties.displayType === \"value\" || !isLabelFormat) {\n          self.getElementsToStylize(self.getControl()).css(\"color\", color, \"!important\");\n          self.getControl().find(\"*\").\n          each(function (i, element) {\n            self.getElementsToStylize(element).css(\"color\", color, \"!important\");\n          });\n        } else {\n          self.element.each(function () {\n            this.style.setProperty('color', color, 'important');\n          });\n\n          // Container of header\n          self.getControl().find(\"[data-bizagi-component=header] span\").each(function () {\n            this.style.setProperty('color', color, 'important');\n          });\n\n          self.getLabel().find(\"label\").css(\"color\", color, \"!important\");\n\n          if (!self.properties.editable) {\n            var $tableContext = self.getControl();\n\n            self.getElementsToStylize($tableContext).css(\"color\", color, \"!important\");\n\n            // Container of content\n            if (bizagi.override && bizagi.override.enableColorHeaderGrid === true && self.hasColorHeader()) {\n              $tableContext = $tableContext.find(\"[data-bizagi-component=rows]\");\n            }\n\n            self.getElementsToStylize($(\"label\", $tableContext).css(\"color\", color, \"!important\"));\n          }\n\n        }\n      } else {\n        this._super(color, isLabelFormat);\n      }\n    }\n  },\n\n  /**\r\n      * Check has new record to save\r\n      * @returns {Array|boolean}\r\n      */\n  hasNewRecordsToSave: function hasNewRecordsToSave() {\n    var newKeys;\n\n    try {\n      newKeys = this.triggerGridPluginHandler(\"getNewRowKeys\");\n    } catch (e) {\n      newKeys = [];\n    }\n\n    return newKeys && newKeys.length > 0 && !this.properties.alreadySaved;\n  },\n\n  /**\r\n      * Get Cell value with format\r\n      * @param renderColumn\r\n      * @param _value\r\n      * @returns {string}\r\n      */\n  getCellValueFormatted: function getCellValueFormatted(renderColumn, _value) {\n    var dataType = renderColumn.properties.type;\n    var formatted = _value;\n\n    if (dataType === \"columnDate\") {\n      var columnProperties = renderColumn.data.properties;\n\n      if (!bizagi.util.isEmpty(formatted)) {\n        // Formats the value in full invariant (with time) in order to send to the server\n        var date = bizagi.util.dateFormatter.getDateFromInvariant(formatted, columnProperties.showTime);\n\n        if (typeof date != \"undefined\" && date !== 0) {\n          if (!columnProperties.showTime) {\n            date.setHours(0, 0, 0, 0);\n          }\n\n          formatted = bizagi.util.dateFormatter.formatInvariant(date, true);\n        }\n      } else if (_value === \"\") {\n        formatted = \"\";\n      }\n    }\n\n    return formatted;\n  },\n\n  addExclusiveChange: function addExclusiveChange(id, data) {\n    var self = this;\n    if (this.properties.hasExclusiveCheck) {\n\n      for (var xpath in data) {\n\n        var column = self.columns.find(function (el) {\n          return el.properties.xpath == xpath;\n        });\n\n        // Check if some of the changes from the edit or add form match with the exclusive controls in the grid\n        var value = data[xpath];\n\n        if (column && column.properties.isExclusive && value) {\n          self.exclusiveChanges[xpath] = {\n            xpath: xpath,\n            simpleXpath: xpath,\n            value: value,\n            key: id };\n\n        }\n      }\n\n    }\n\n  } });","/**\r\n *   Name: Bizagi Smartphone Render Grouped Grid Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the Grouped Grid render class to adjust to smartphone devices\r\n */\n\n// Extends from Grid desktop base\nbizagi.rendering.desktop.grid.bizagi.extend(\"bizagi.rendering.desktop.grid.grouped\", {}, {\n  /*\r\n                                                                                           *   Update or init the element data\r\n                                                                                           */\n  initializeData: function initializeData(data) {\n    var self = this;\n\n    data.properties.hideActionsColumn = true;\n    data.properties = self.convertProperties(data.properties);\n    // Parse data through group engine\n\n    // Create a single instance for each cell\n    data.properties.singleInstance = false;\n\n    // Call base\n    this._super(data);\n\n    // Create a data-structure to keep track of each cell properties\n    this.cellMetadata = {};\n\n    // Create a collection to save grid cell changes to execute after it is loaded\n    this.pendingActions = [];\n\n    // Fill default properties\n    var properties = this.properties;\n\n    properties.withEditForm = properties.allowEdit;\n\n\n    // set collapse grid\n    this.collapseState = properties.collapseState;\n\n    // Just apply display-type: vertical, align it to the left\n    properties.displayType = \"vertical\";\n    properties.labelAlign = \"left\";\n\n  },\n\n  /*\r\n     *   Customizes the content drawing inside the cell\r\n     */\n  drawCell: function drawCell(column, key, value, isNewRow) {\n    var self = this;\n    if (column.key) {\n      return value;\n    }\n\n    // Get render column\n    var cellOverride = self.getCellOverride(key, column.index - 1);\n    var columnIndex = column.index - 1;\n    var renderColumn = self.columns[columnIndex];\n\n    // Fix issue suite-8559, data with null records\n    /* console.log(self.newRecords);*/\n    self.newRecords = self.newRecords || {};\n\n    // Get cell properties\n    if (!self.cellMetadata[key]) {\n      self.cellMetadata[key] = {};\n    }\n    if (!self.cellMetadata[key][columnIndex]) {\n      self.cellMetadata[key][columnIndex] = {};\n    }\n    var properties = self.cellMetadata[key][columnIndex].properties || renderColumn.originalProperties;\n    var visible = properties.visible !== undefined ? properties.visible : true;\n    var editable = properties.editable !== undefined ? properties.editable : true;\n\n    // Apply overrides from cellOverrides\n    visible = cellOverride.visible;\n    editable = properties.editable ? cellOverride.editable : false;\n\n    // Show editable cell when we are performing inline add operation\n    if (isNewRow)\n    editable = true;\n\n    renderColumn.properties.displayType = 'value';\n\n    // If the cell we are drawing is the summary cell, we need to make it readonly\n    if (typeof key === \"string\" && key.indexOf(\"summary\") >= 0) {\n      editable = false;\n    }\n    // Do the render\n    if (visible) {\n      if (editable)\n      return self.drawEditableCell(renderColumn, properties, key, value, isNewRow);else\n\n      return self.drawReadonlyCell(renderColumn, properties, key, value);\n\n    } else {\n      return \"<label></label>\";\n    }\n  },\n\n  /*\r\n     *   Draws the readonly version for the cell\r\n     */\n  drawReadonlyCell: function drawReadonlyCell(renderColumn, properties, key, value) {\n    var self = this;\n    var result = \"\";\n\n    // Use totalizer format when printing summary row\n    if (typeof key === \"string\" && key.indexOf(\"summary\") >= 0) {\n      var originalFormat = renderColumn.properties.textFormat;\n      if (renderColumn.properties.totalize) {\n        renderColumn.properties.textFormat = renderColumn.properties.totalize.format;\n      }\n\n      result = renderColumn.renderSummary(key, value);\n\n      // Restore column format\n      renderColumn.properties.textFormat = originalFormat;\n    } else {\n      result = renderColumn.renderReadOnly(key, value);\n    }\n    return result;\n  },\n\n  /*\r\n     *   Executes when the cell is ready and inserted into the DOM\r\n     */\n  onCellReady: function onCellReady(column, key, cell, isNewRow) {\n    var self = this;\n\n    // Get render column\n    var columnIndex = column.index - 1;\n    var renderColumn = self.columns[columnIndex];\n    var properties = self.cellMetadata[key][columnIndex].properties || renderColumn.originalProperties;\n    var visible = properties.visible !== undefined ? properties.visible : true;\n    var editable = properties.editable !== undefined ? properties.editable : true;\n\n    // If the cell we are drawing is the summary cell, we need to make it readonly\n    if (typeof key === \"string\" && key.indexOf(\"summary\") >= 0)\n    editable = false;\n\n    // Show editable cell when we are performing inline add operation\n    if (isNewRow) {\n      editable = true;\n    }\n\n    if (visible) {\n\n      if (editable) {\n\n        // Set editable\n        var originalEditable = renderColumn.properties.editable;\n        renderColumn.properties.editable = editable;\n\n        // Set xpath context for submitonchange action\n        if (renderColumn.properties.submitOnChange) {\n          var control = renderColumn.getDecorated(key);\n          if (control) {\n            control.properties.submitOnChangexpathContext = self.properties.xpath + \"[]\";\n          }\n        }\n\n        // Execute cell post render\n        renderColumn.postRender(key, cell);\n\n        // Restore editable\n        renderColumn.properties.editable = originalEditable;\n\n      } else {\n\n        if (typeof key === \"string\" && key.indexOf(\"summary\") >= 0) {\n          //apply styles to summary cells\n          if (!renderColumn.postRenderSummary(key, cell)) {\n            self.applySummaryColumnStyles(cell, properties);\n          }\n\n        } else {\n          // Call post-render\n          renderColumn.postRenderReadOnly(key, cell);\n        }\n      }\n    }\n  },\n\n  // Reserverd to make convertions of control properties\n  convertProperties: function convertProperties(properties) {\n\n    // Change inline add\n    properties.inlineAdd = false;\n\n    // Change inline edit\n    properties.inlineEdit = false;\n\n    return properties;\n  },\n\n  /**\r\n      * WARNING: This method here is required in order to avoid changes in the font weigth for the grid\r\n      */\n  changeFontBold: function changeFontBold() {\n    return this;\n  },\n\n  /*\r\n     * Applies grid plugin \r\n     */\n  applyGridPlugin: function applyGridPlugin() {\n    var self = this,\n    grid = self.grid,\n    properties = self.properties,\n    mode = self.getMode();\n\n    var pager = self.renderFactory.getTemplate(\"bizagi.grid.pagination\");\n\n    var scrollableArea = self.getFormContainer().params.canvas.scrollParent();\n    // Apply grid plugin\n    grid.bizagi_grid_grouped_desktop({\n      columns: self.buildColumnModel(),\n      showSummary: properties.showSummary,\n      title: properties.displayName,\n      mode: self.getMode(),\n      scrollableArea: scrollableArea,\n      floatingHeader: properties.floatingHeader || false,\n      tableCssClass: \"\",\n      sortBy: properties.sortBy || \"\",\n      sortOrder: properties.sortOrder || \"\",\n      isSortable: properties.isSortable,\n      smartPagination: true,\n      collapse: mode !== \"execution\" ? false : true, // por defecto las grillas seran colapsables en ejecucion\n      collapseState: mode !== \"execution\" ? false : self.collapseState,\n      buttonsPst: mode !== \"execution\" ? false : properties.buttonsPst,\n      sortType: bizagi.override.gridDefaultSortBy || \"asc\",\n      headerStyles: self.getHeaderStyles(),\n      groupByColumns: self.groupByColumns() || [],\n      template: {\n        grid: self.renderFactory.getTemplate(\"bizagi.grid.grid\"),\n        waiting: self.renderFactory.getTemplate(\"bizagi.grid.waiting\"),\n        table: self.renderFactory.getTemplate(\"bizagi.grid.grouped.table\"),\n        emptyTable: self.renderFactory.getTemplate(\"bizagi.grid.table.empty\"),\n        column: self.renderFactory.getTemplate(\"bizagi.grid.grouped.column\"),\n        specialColumn: self.renderFactory.getTemplate(\"bizagi.grid.column.special\"),\n        row: self.renderFactory.getTemplate(\"bizagi.grid.grouped.row\"),\n        headerRow: self.renderFactory.getTemplate(\"bizagi.grid.grouped.header.row\"),\n        rowButtons: self.renderFactory.getTemplate(\"bizagi.grid.row.buttons\"),\n        cell: self.renderFactory.getTemplate(\"bizagi.grid.cell\"),\n        emptyCell: self.renderFactory.getTemplate(\"bizagi.grid.grouped.emptyCell\"),\n        specialCell: self.renderFactory.getTemplate(\"bizagi.grid.cell.special\"),\n        pager: pager,\n        buttons: self.renderFactory.getTemplate(\"bizagi.grid.buttons\"),\n        dynamicPager: self.renderFactory.getTemplate(\"bizagi.grid.dynamicpager\"),\n        summary: self.renderFactory.getTemplate(\"bizagi.grid.grouped.summary\"),\n        summaryCell: self.renderFactory.getTemplate(\"bizagi.grid.grouped.summaryCell\"),\n        exportOptions: self.renderFactory.getTemplate(\"bizagi.grid.exportOptions\") },\n\n      actions: {\n        add: properties.allowAdd,\n        edit: properties.allowEdit && properties.withEditForm && properties.data != null,\n        remove: properties.allowDelete,\n        details: properties.allowDetail,\n        inlineAdd: properties.inlineAdd,\n        allowMore: properties.allowMore,\n        enableXlsExport: properties.enableXlsExport,\n        enablePdfExport: properties.enablePdfExport },\n\n      tooltips: {\n        addLabel: properties.addLabel,\n        editLabel: properties.editLabel,\n        deleteLabel: properties.deleteLabel,\n        detailLabel: properties.detailLabel,\n        exportOptionsLabel: properties.exportOptionsLabel },\n\n      isValid: function isValid() {\n        // Validate records\n        var errorsMessage = [];\n        var form = self.getFormContainer();\n\n        // fix for SUITE-8696\n        if (form.validationController !== undefined) {\n          form.validationController.clearValidationMessages();\n        }\n\n        self.isValid(errorsMessage);\n\n        if (errorsMessage.length > 0) {\n          // Show validation message\n          for (var i = 0; i < errorsMessage.length; i++) {\n            form.validationController.showValidationMessage(errorsMessage[i].message, errorsMessage[i].xpath);\n          }\n\n          return false;\n        } else {\n          return true;\n        }\n      },\n      pageRequested: function pageRequested(ui) {\n        if (mode !== \"execution\") return;\n\n        var sortName;\n        var getColumn = self.getColumn(ui.sortBy);\n        if (getColumn) {\n          sortName = getColumn.getSortName();\n        } else {\n          getColumn = self.getColumn(ui.sortBy.split(\".\")[0]);\n          if (getColumn) {\n            sortName = getColumn.getSortName();\n          }\n        }\n\n        if (ui.sortBy.split(\".\").length > 1) {\n          if (ui.sortBy.split(\".\")[0] == sortName) {\n            sortName = ui.sortBy;\n          }\n        }\n\n        self.fetchData(ui.page, sortName, ui.sortType);\n\n      },\n      sortRequested: function sortRequested(ui) {\n        if (mode !== \"execution\") return;\n\n        // Get column sort xpath\n        var sortName;\n        var getColumn = self.getColumn(ui.sortBy);\n        if (getColumn) {\n          sortName = getColumn.getSortName();\n        } else {\n          getColumn = self.getColumn(ui.sortBy.split(\".\")[0]);\n          if (getColumn) {\n            sortName = getColumn.getSortName();\n          }\n        }\n\n        if (ui.sortBy.split(\".\").length > 1) {\n          if (ui.sortBy.split(\".\")[0] == sortName) {\n            sortName = ui.sortBy;\n          }\n        }\n\n        // Perform the sort\n        self.fetchData(ui.page, sortName, ui.sortType);\n      },\n      drawCell: function drawCell(ui) {\n        return self.drawCell(ui.column, ui.key, ui.value, ui.isNewRow);\n      },\n      cellReady: function cellReady(ui) {\n        return self.onCellReady(ui.column, ui.key, ui.cell, ui.isNewRow);\n      },\n      rowSelected: function rowSelected(ui) {\n        if (mode !== \"execution\") return;\n        self.triggerHandler(\"rowSelected\", { id: ui.key });\n      },\n      addRow: function addRow() {\n        if (mode !== \"execution\") return;\n        self.addRow.apply(self, arguments);\n      },\n      editRow: function editRow(ui) {\n        if (mode !== \"execution\") return;\n\n        if (self.properties.withEditForm) {\n          self.editRow(ui.key);\n        }\n      },\n      deleteRow: function deleteRow(ui) {\n        if (mode !== \"execution\") return;\n        self.deleteRow(ui.key);\n      },\n      moreRows: function moreRows(ui) {\n        if (mode !== \"execution\") return;\n        self.moreRows(ui);\n      },\n      saveAddedRows: function saveAddedRows(ui) {\n        self.saveInlineAddedRows(ui.keys).done(function () {\n          self.refresh();\n        });\n      },\n      beforeInlineAdd: function beforeInlineAdd() {\n        self.inlineAddDeferred = new $.Deferred();\n      },\n      afterInlineAdd: function afterInlineAdd() {\n        if (self.inlineAddDeferred) {\n          self.inlineAddDeferred.resolve();\n        }\n      },\n      showFormDetails: function showFormDetails(id) {\n        self.showFormDetails(id.key);\n      },\n      cancelEdition: function cancelEdition(ui) {\n        self.removeNewRecords(ui);\n      },\n      removeNewRecords: function removeNewRecords(ui) {\n        self.removeNewRecords(ui);\n      },\n      showGridExportOptions: function showGridExportOptions() {\n        self.showGridExportOptions();\n      },\n      performExportGrid: function performExportGrid(printParams) {\n        self.performExportGrid(printParams);\n      },\n      performCollapseGrid: function performCollapseGrid() {\n        self.performCollapseGrid();\n      },\n      rowdblclick: function rowdblclick(ui) {\n        if (mode != \"execution\") return;\n\n        if (self.canEditRow())\n        self.editRow(ui.businessKey);\n      } });\n\n\n  },\n\n  /*\r\n     * Returns an array with the position of columns set to group by property\r\n     */\n  groupByColumns: function groupByColumns() {\n    var self = this;\n    var groupByColumns = [];\n\n    for (var i = 0, l = self.columns.length; i < l; i++) {\n      var column = self.columns[i];\n      if (column.properties.groupBy) {\n        groupByColumns.push(i + 1);\n      }\n    }\n\n    return groupByColumns;\n  },\n\n  /*\r\n     *\r\n     */\n  triggerGridPluginHandler: function triggerGridPluginHandler() {\n    var self = this;\n    var args = Array.prototype.slice.call(arguments, 0);\n\n    return self.grid.bizagi_grid_grouped_desktop.apply(self.grid, args);\n  },\n\n\n  /*\r\n     *   Method to fetch data from the server and then update the data\r\n     */\n  fetchData: function fetchData(page, sortBy, sortType) {\n    var self = this;\n    var properties = self.properties;\n    self.dataReadyDeferred = new $.Deferred();\n\n    // Define defaults\n    page = page || properties.page || 1;\n    sortBy = sortBy || properties.sortBy || \"id\";\n    sortType = sortType || properties.sortOrder || \"asc\";\n\n    // Update control properties\n    properties.page = page;\n    properties.sortBy = sortBy;\n    properties.sortType = sortType;\n    properties.sort = sortBy + \" \" + sortType;\n\n    // Start loading to avoid multiple calls to the server\n    self.startLoading();\n\n    $.when(self.getRemoteData()).then(function (data) {\n      self.endLoading();\n      if (self.disposed) return;\n      if (data) {\n        self.loadChanges(data.rows);\n        self.updateData(data);\n        self.triggerRenderChange();\n        self.dataReadyDeferred.resolve();\n      }\n    });\n  } });","/**\r\n *   Name: Bizagi Desktop Render Letter Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the letter render class to adjust to desktop devices\r\n */\n\n// Extends from render Desktop base\nbizagi.rendering.desktop.render.extend(\"bizagi.rendering.desktop.letter\", bizagi.rendering.letter.prototype);\n// Extends itself\nbizagi.rendering.desktop.letter.extend(\"bizagi.rendering.desktop.letter\", {}, {\n\n  /**\r\n                                                                                 * Template method to implement in each device to customize each render\r\n                                                                                 * after processed\r\n                                                                                 */\n  postRender: function postRender() {\n    var button = $(\":button\", this.getControl());\n\n    // Stylize button\n    button.button();\n  },\n\n  /**\r\n      * Template method to implement in each device to customize the render's\r\n      * behaviour to add handlers\r\n      */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    var button = $(\":button\", self.getControl());\n\n    // Call base\n    self._super();\n\n    // Bind event\n    button.click(function () {\n      // Save the form prior opening the dialog\n      $.when(self.saveForm()).done(function () {\n        // Show letter dialog\n        self.showLetterDialog();\n      });\n    });\n  },\n\n  /**\r\n      *  Method to render non editable values\r\n      */\n  postRenderReadOnly: function postRenderReadOnly() {\n\n  },\n\n  /**\r\n      * Template method to implement in each device to customize the render's behaviour\r\n      * to add handlers when the control is readonly\r\n      */\n  configureHandlersReadOnly: function configureHandlersReadOnly() {\n    var self = this;\n    var control = self.getControl();\n    var url = self.dataService.getLetterNotEditableUrl({\n      idRender: self.properties.id,\n      xpath: self.getXpath(),\n      xpathContext: self.getContextXpath(),\n      idPageCache: self.properties.idPageCache });\n\n\n    // Bind click\n    $(\".ui-bizagi-render-letter-readonly\", control).click(function () {\n      // Save the form prior opening the link\n      $.when(self.saveForm()).done(function () {\n        $.when(self.getCanGenerateLetter()).\n        done(function (wasGenerated) {\n          // Save content in server\n          if (wasGenerated && bizagi.util.parseBoolean(wasGenerated.canGenerate))\n            // Open the url in a new window\n            window.open(url);else\n          {\n            bizagi.showMessageBox(bizagi.localization.getResource(\"render-letter-not-generated\"));\n          }\n        });\n      });\n    });\n  },\n\n  /**\r\n      * Shows letter dialog\r\n      */\n  showLetterDialog: function showLetterDialog() {\n    var self = this;\n    var dialog = new bizagi.rendering.dialog.letter(self.dataService, self.renderFactory);\n\n    $.when(self.getCanGenerateLetter()).\n    done(function (wasGenerated) {\n      // Save content in server\n      if (wasGenerated && bizagi.util.parseBoolean(wasGenerated.canGenerate)) {\n        $.when(self.getLetterContent()).\n        pipe(function (content) {\n          return dialog.render(content);\n        }).done(function (newContent) {\n          // Save content in server\n          self.saveLetterContent(newContent);\n        });\n      } else {\n        bizagi.showMessageBox(bizagi.localization.getResource(\"render-letter-not-generated\"));\n      }\n    });\n  } });","/**\r\n *   Name: Bizagi Desktop Render Button Extension\r\n *   Author: Bizagi UI Forms\r\n *   Comments:\r\n *   -   This script will redefine the button render class to adjust to desktop devices\r\n */\n\n// Extends from render Desktop base \nbizagi.rendering.desktop.render.extend(\"bizagi.rendering.desktop.button\", bizagi.rendering.render.base.prototype);\n// Extends from render Desktop base\nbizagi.rendering.desktop.button.extend(\"bizagi.rendering.desktop.button\", bizagi.rendering.button.prototype);\n// Extends itself\nbizagi.rendering.desktop.button.extend(\"bizagi.rendering.desktop.button\", {}, {\n\n  /**\r\n                                                                                 * Template method to implement in each device to customize each render after processed\r\n                                                                                 * @returns {}\r\n                                                                                 */\n  postRender: function postRender() {\n    var self = this;\n    var control = self.getControl();\n    var button = $(\":button\", control);\n    var buttonInput = $(control.find(\"input\"));\n\n    // Stylize button\n    button.button();\n\n    buttonInput.addClass(\"ui-button--ellipsis\");\n    buttonInput.attr(\"title\", $(control.find(\"input\")).val());\n  },\n\n  /**\r\n      * Template method to implement in each device to customize the render's behaviour to add handlers\r\n      * @returns {}\r\n      */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    var button = $(\":button\", self.getControl());\n\n    // Call base\n    self._super();\n\n    // Bind event\n    button.on(\"click\", function () {\n      //disable button to avoid multiple clicks\n      $(\"input\", self.element).attr(\"disabled\", true);\n\n      // Process button actions\n      self.processButton();\n\n      var timeoutRemoveAttr = setTimeout(function () {\n        //allow button to be clickeable again\n        $(\"input\", self.element).removeAttr(\"disabled\");\n        clearTimeout(timeoutRemoveAttr);\n      }, 1500);\n    });\n  },\n\n  /**\r\n      * Method to render non editable values\r\n      * @returns {}\r\n      */\n  postRenderReadOnly: function postRenderReadOnly() {\n    // Execute the same as post-render\n    this.postRender();\n\n    // Set as disabled\n    var button = $(\":button\", this.getControl());\n    button.button(\"option\", \"disabled\", \"true\");\n  },\n\n  /**\r\n      * Process the button actions workflow\r\n      * @returns {}\r\n      */\n  processButton: function processButton() {\n    var self = this;\n    var properties = self.properties;\n    var mode = self.getMode();\n\n    if (properties.editable) {\n\n      if (typeof self.getFormContainer != \"undefined\")\n\n      var form = self.getFormContainer();\n\n      if (bizagi.override.validateGridsOnButtonClick != false && mode == \"execution\" && form &&\n      !form.hasValidGrids([])) {\n        form.validationController.performValidations();\n      } else {\n        // Check if action need conformation\n        if (properties.needsUserConfirmation) {\n          var htmlMessage = $(\"<div>\").append(properties.userConfirmationMessage);\n          var defer = $.Deferred();\n\n          $(htmlMessage).dialog({\n            modal: true,\n            width: 500,\n            height: 250,\n            draggable: false,\n            resizable: true,\n            maximize: false,\n            title: properties.caption || properties.displayName,\n            buttons: [{\n              text: bizagi.localization.getResource(\"confirmation-box-ok\"),\n              click: function click() {\n                defer.resolve();\n                self.triggerRenderChange({ pressed: true });\n                $(this).dialog(\"close\");\n              } },\n            {\n              text: bizagi.localization.getResource(\"confirmation-box-cancel\"),\n              click: function click() {\n                defer.reject();\n                $(this).dialog(\"close\");\n              } }] });\n\n\n\n          if (!properties.preventDefault) {\n            $.when(defer.promise()).done(function () {\n              self.runButtonAction();\n            });\n          }\n        } else {\n          if (!properties.preventDefault)\n          self.runButtonAction();\n\n          // Trigger change\n          self.triggerRenderChange({ pressed: true });\n        }\n      }\n    }\n  } });","/**\r\n *   Name: Bizagi Desktop Render Button Extension\r\n *   Author: Bizagi UI Forms\r\n *   Comments:\r\n *   -   This script will redefine the button render class to adjust to desktop devices\r\n */\n\n// Extends itself\nbizagi.rendering.desktop.button.extend(\n\"bizagi.rendering.desktop.uiPathButton\", {},\n{\n  /**\r\n   * Update or init the element data\r\n   * @param {*} data \r\n   */\n  initializeData: function initializeData(data) {\n    this._super(data);\n    this.properties.rpabot = this.properties.rpabot || {};\n  },\n  /**\r\n      * Template method to implement in each device to customize each render after processed\r\n      * @returns {}\r\n      */\n  postRender: function postRender() {\n    this._super();\n\n    if (this.getMode() === \"execution\") {\n      bizagi.bzToast.init({\n        zIndex: bizagi.util.getMaxZIndex() + 1 });\n\n      this.initializeRobot();\n    }\n  },\n\n  /**\r\n      * Template method to implement in each device to customize the render's behaviour to add handlers\r\n      * @returns {}\r\n      */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    var button = $(\":button\", self.getControl());\n\n    // Call base\n    self._super();\n\n    // Bind event\n    button.on(\"click\", function () {\n      if (self.robotInstance) {\n        self.runRobot();\n      }\n    });\n  },\n  /**\r\n      * Get and init robot instance\r\n      */\n  initializeRobot: function initializeRobot() {\n    var self = this;\n\n    UiPathRobot.getProcesses().then(\n    function (results) {\n      if (results.length === 0) {\n        var message = self.getResourceByKey(\"workportal-rpa-uipath-error-proccess-not-found\", \"UIPath processes cannot be found or are not available.\");\n        bizagi.showMessageBox(message, \"Error\");\n        self.disabledButton();\n        return;\n      }\n\n      // Get the ID for the sample process\n      self.robotInstance = results.find(function (i) {\n        return i.name.includes(self.properties.rpabot.robotName);\n      });\n\n      if (!self.robotInstance) {\n        var message = self.getResourceByKey(\"workportal-rpa-error-bot-not-found\", \"bot is not found\");\n        bizagi.showMessageBox(self.properties.rpabot.robotName + \" \" + message, \"Error\");\n        self.disabledButton();\n      }\n    },\n    function (err) {\n      var message = self.getResourceByKey(\"workportal-rpa-error-loading-bots\", \"Something went wrong,\");\n      bizagi.showMessageBox(message + \" \" + err, \"Error\");\n      self.disabledButton();\n    });\n\n  },\n  /**\r\n      * Create toast for bot and put on queue\r\n      */\n  runRobot: function runRobot() {\n    var self = this;\n    self.disabledButton();\n    var queueMessage = self.getResourceByKey(\"workportal-rpa-bot-queue\", \"The bot is being executed, please wait\");\n\n    if (!self.properties.toast) {\n      self.properties.toast = bizagi.bzToast.addItem({\n        title: self.properties.rpabot.robotName,\n        content: queueMessage,\n        onClickIcon: function onClickIcon(item) {\n          if (item.status === \"error\") {\n            item.relaunch().setLoaderStatus().setContent(queueMessage);\n          }\n        },\n        onCanStartJob: function onCanStartJob() {\n          self.startJob();\n        } });\n\n    } else {\n      self.properties.toast.relaunch().setLoaderStatus().setContent(queueMessage);\n    }\n  },\n  /**\r\n      * Verify if all required inputs and outputs are in form, then execute bot task. \r\n      */\n  startJob: function startJob() {\n    var self = this;\n    var toast = self.properties.toast;\n    var properties = self.properties;\n\n    var inputs = properties.rpabot.inputs || [];\n    var outputs = properties.rpabot.outputs || [];\n\n    var controlsInForm = this.areAllControlsInForm(inputs.concat(outputs));\n    if (controlsInForm.allControlsFound) {\n      var inputs = self.getRobotInputs();\n      self.disabledButton();\n      toast.setLoaderStatus();\n\n      self.robotInstance.\n      start(inputs).\n      onStatus(function (status) {\n        toast.setContent(status);\n      }).\n      then(\n      function (processResults) {\n        self.processOutput(processResults);\n\n        var successMessage = self.getResourceByKey(\"workportal-rpa-bot-executed-succesfully\", \"Bot executed succesfully\");\n        toast.setSuccessStatus().setContent(successMessage);\n        self.properties.toast = undefined;\n        self.enableButton();\n      },\n      //error function\n      function (err) {\n        var message = err.InnerException ? err.InnerException.Message : self.getResourceByKey(\"workportal-rpa-bot-error-executed\", \"There is an error in the bot execution\");\n        toast.setErrorStatus().setContent(message);\n        self.enableButton();\n      });\n\n    } else {\n      self.handleNotFoundControls(controlsInForm.controlsNotFound);\n    }\n  },\n  /**\r\n      * Set the getted value from output robot in control with xpath in form.\r\n      * @param {*} robotResult \r\n      */\n  processOutput: function processOutput(robotResult) {\n    var form = this.getFormContainer();\n    var outputs = this.properties.rpabot.outputs || [];\n\n    outputs.forEach(function (output) {\n      var responseValue = robotResult[output.robotArgumentName];\n      if (responseValue) {\n        var relatedControl = form.getRenders(output.xpath)[0];\n        if (!bizagi.util.isEmpty(relatedControl)) {\n          relatedControl.setDisplayValue(responseValue);\n        }\n      }\n    });\n  },\n  /**\r\n      * Disabled button for user can't click it.\r\n      */\n  disabledButton: function disabledButton() {\n    var input = $(\"input\", this.getControl());\n    input.attr(\"disabled\", true).addClass(\"ui-state-disabled rpa-disabled\");\n\n  },\n  /**\r\n      * Enavle button for user can click it.\r\n      */\n  enableButton: function enableButton() {\n    var input = $(\"input\", this.getControl());\n    input.removeAttr(\"disabled\").removeClass(\"ui-state-disabled rpa-disabled\");\n  },\n  /**\r\n      * Return a object with required inputs and their values.\r\n      */\n  getRobotInputs: function getRobotInputs() {\n    var form = this.getFormContainer();\n    var args = {};\n    var inputs = this.properties.rpabot.inputs || [];\n\n    inputs.forEach(function (input) {\n      var relatedControl = form.getRenders(input.xpath)[0];\n      var value = \"\";\n      if (!bizagi.util.isEmpty(relatedControl)) {\n        value = relatedControl.getValue();\n      }\n      args[input.robotArgumentName] = value;\n    });\n\n    return args;\n  },\n  /**\r\n      * Return if the controls in parameters are in form. If any control isn't form return the control's xpath.\r\n      * @param {*} rpaArgs \r\n      */\n  areAllControlsInForm: function areAllControlsInForm(rpaArgs) {\n    var form = this.getFormContainer();\n    var resp = {\n      allControlsFound: true,\n      controlsNotFound: [] };\n\n    rpaArgs = rpaArgs || [];\n    rpaArgs.forEach(function (arg) {\n      var relatedControl = form.getRenders(arg.xpath)[0];\n      if (bizagi.util.isEmpty(relatedControl)) {\n        resp.allControlsFound = false;\n        resp.controlsNotFound.push(arg.xpath);\n      }\n    });\n    return resp;\n  },\n  /**\r\n      * Show modal message when any required input or output aren't in form.\r\n      * @param {*} controls \r\n      */\n  handleNotFoundControls: function handleNotFoundControls(controls) {\n    var message = this.getResourceByKey(\"workportal-rpa-controls-not-found\", \"Controls associated with the bots inputs and outputs are not within the form\");\n    this.properties.toast.setErrorStatus().setContent(message);\n\n    message += \":\";\n    controls.forEach(function (i) {\n      message += i + \",\\n\";\n    });\n    bizagi.showMessageBox(message, \"Error\");\n\n    this.disabledButton();\n  } });","/**\r\n *   Name: Bizagi Desktop Render fileprint Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the fileprint render class to adjust to desktop devices\r\n */\n\n// Extends from render Desktop base\nbizagi.rendering.desktop.render.extend(\"bizagi.rendering.desktop.fileprint\", bizagi.rendering.fileprint.prototype);\n// Extends itself\nbizagi.rendering.desktop.fileprint.extend(\"bizagi.rendering.desktop.fileprint\", {}, {\n\n  /**\r\n                                                                                       * Method to customize each render after processed\r\n                                                                                       */\n  postRender: function postRender() {\n    var button = $(\":button\", this.getControl());\n\n    // Stylize button\n    button.button();\n  },\n\n  /**\r\n      * Method to customize the render's behaviour to add handlers\r\n      */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    var properties = self.properties;\n    var button = $(\":button\", self.getControl());\n\n    // Call base\n    self._super();\n\n    if (properties.filesCount > 0) {\n      // Bind event\n      button.click(function () {\n        // Process button actions\n        self.processButton();\n      });\n    } else {\n      button.button(\"option\", \"disabled\", \"true\");\n    }\n  },\n\n  /**\r\n      * Method to render non editable values\r\n      * @returns {}\r\n      */\n  postRenderReadOnly: function postRenderReadOnly() {\n    var self = this;\n    var form = self.getFormContainer();\n    var typeForm = form.properties.typeForm;\n\n    // Execute the same as post-render\n    this.postRender();\n\n    // Set as disabled\n    var button = $(\":button\", this.getControl());\n\n    if (typeForm === \"SummaryForm\" || typeForm === \"GlobalForm\") {\n      self.configureHandlers();\n    } else {\n      button.button(\"option\", \"disabled\", \"true\");\n    }\n  },\n\n  /**\r\n      * Process the button actions workflow\r\n      */\n  processButton: function processButton() {\n    var self = this;\n    var form = self.getFormContainer();\n    var typeForm = form.properties.typeForm;\n\n    if (self.properties.editable || typeForm === \"SummaryForm\" || typeForm === \"GlobalForm\") {\n      self.runButtonAction();\n    }\n  },\n\n  /**\r\n      * Run button actions\r\n      */\n  runButtonAction: function runButtonAction() {\n    var self = this;\n    var form = self.getFormContainer();\n\n    // Clear previous validations\n    form.clearValidationMessages();\n\n    // Set the loading feedback\n    form.startLoading();\n\n    self.downloadFile().then(function (blobFile) {\n      if ($.browser.mozilla) {\n        bizagi.util.downloadBlobFile(blobFile, \"PDF.pdf\");\n      } else {\n        // Remove previous iframe\n        var control = self.getControl();\n        $(\"iframe\", control).remove();\n\n        // Render new iframe\n        var idFrame = \"bz-render-fileprint-iframe-\" + new Date().getTime();\n        var tmpl = self.renderFactory.getTemplate(\"fileprint-iframe\");\n        var fileURL = window.URL.createObjectURL(blobFile);\n        var iframe = $.tmpl(tmpl, {\n          url: fileURL,\n          id: idFrame });\n\n\n        control.append(iframe);\n\n        // Print iframe\n        var frm = document.getElementById(idFrame).contentWindow;\n        if (typeof frm.print != \"undefined\" && !bizagi.util.isIE()) {\n          frm.print();\n        } else {\n          bizagi.util.downloadBlobFile(blobFile, \"PDF.pdf\");\n        }\n\n        // No longer need to read the blob so it's revoked\n        window.URL.revokeObjectURL(fileURL);\n      }\n    }).fail(function (error) {\n      form && form.failHandler(error);\n    }).always(function () {\n      // Finish loading\n      form && form.endLoading();\n    });\n  } });","/**\r\n *   Name: Bizagi Desktop Render Link Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the link render class to adjust to desktop devices\r\n */\n\nbizagi.rendering.desktop.render.extend(\"bizagi.rendering.desktop.link\", bizagi.rendering.render.base.prototype);\n// Extends from render desktop base\nbizagi.rendering.desktop.link.extend(\"bizagi.rendering.desktop.link\", bizagi.rendering.link.prototype);\n// Extends itself\nbizagi.rendering.desktop.link.extend(\"bizagi.rendering.desktop.link\", {}, {\n\n  /**\r\n                                                                             * Template method to implement in each device to customize each render after processed\r\n                                                                             * @returns {}\r\n                                                                             */\n  postRender: function postRender() {\n  },\n\n  /**\r\n      * Template method to implement in each device to customize the render's behaviour to add handlers\r\n      * @returns {}\r\n      */\n  configureHandlers: function configureHandlers() {\n    this.attachEvents();\n  },\n\n  /**\r\n      * Template method to implement in each device to customize the render's behaviour\r\n      * to add handlers when the control is readonly\r\n      */\n  configureHandlersReadOnly: function configureHandlersReadOnly() {\n    this.attachEvents();\n  },\n\n  /**\r\n      * Solve action to link\r\n      * @param args\r\n      */\n  linkSolver: function linkSolver(args) {\n    args = args || {};\n    var self = this;\n    var url = args.url || \"\";\n    var target = args.target || \"_blank\";\n\n    if (bizagi.override.linkPrefix === true && url) {\n      if (url.indexOf(\"http\") === -1 && url.indexOf(\"\\\\\\\\\") === -1) {\n        url = \"//\" + bizagi.util.trim(url);\n      }\n    }\n\n    switch (args.linkType) {\n      case \"newwindow\":\n        var windowParamsPatter = \"width=%s,height=%s,resizable,scrollbars=yes,status=1,toolbar=yes\";\n        var windowParams = printf(windowParamsPatter, window.screen.width, window.screen.height);\n        self.windowObjReference = window.open(url, target, windowParams);\n        break;\n      case \"newtab\":\n        self.windowObjReference = window.open(url, target);\n        break;\n      default:\n        self.windowObjReference = window.open(url, target);\n        break;}\n\n  },\n\n  /**\r\n      * Method to render non editable values\r\n      * @returns {}\r\n      */\n  postRenderReadOnly: function postRenderReadOnly() {\n    // Execute the same as post-render\n    this.postRender();\n  },\n\n  /**\r\n      * Configure event handlers\r\n      */\n  attachEvents: function attachEvents() {\n    var self = this;\n    var control = self.getControl();\n    var properties = self.properties;\n    var link = $(\".ui-bizagi-render-link\", control);\n\n    if (properties.value) {\n      // Modify href\n      link.attr(\"href\", properties.value);\n      link.attr(\"target\", \"_blank\");\n\n      link.click(function () {\n        //if the container form of this component is detail, executes the link\n        self.linkSolver({ linkType: properties.linktarget, url: properties.value });\n        return false;\n      });\n    } else {\n      link.addClass(\"ui-state-disabled\");\n    }\n\n\n    self.preventDefaultForAnchorTag();\n  },\n\n  processLayout: function processLayout(isLabelFormat) {\n    if (!isLabelFormat) {\n      this._super(isLabelFormat, this.properties.textFormat);\n    } else {\n      if (typeof this.properties.textFormat.background !== \"undefined\") {\n        this._super(isLabelFormat, { background: this.properties.textFormat.background });\n      }\n    }\n  },\n\n  getElementsToStylize: function getElementsToStylize($context) {\n    return $(\".ui-bizagi-render-link\", $context);\n  } });","/*\r\n*   Name: Bizagi Desktop Render Template Text Extension\r\n*   Author: Andres Fernando Munoz\r\n*   Comments:\r\n*   -   This script will redefine the layout render class to adjust to desktop devices\r\n*/\n\n// Extends from render desktop base\nbizagi.rendering.desktop.render.extend(\"bizagi.rendering.desktop.layoutRender\", bizagi.rendering.layoutRender.prototype);","/*\r\n *   Name: BizAgi Render Layout Label Class\r\n *   Author: Mauricio Snchez\r\n *   Comments:\r\n *   -   This script will define basic stuff for labels inside templates\r\n */\n\nbizagi.rendering.desktop.layoutRender.extend(\"bizagi.rendering.desktop.layoutPlaceholder\", bizagi.rendering.layoutPlaceholder.prototype);","/*\r\n*   Name: BizAgi Render Layout Boolean Class\r\n*   Author: Alexander Mejia\r\n*   Comments:\r\n*   -   This script will define basic stuff for boolean renders inside templates\r\n*/\n\nbizagi.rendering.desktop.layoutRender.extend(\"bizagi.rendering.desktop.layoutBoolean\", bizagi.rendering.layoutBoolean.prototype);","/*\r\n*   Name: Bizagi render layout image\r\n*   Author: Andres Fernando Munoz\r\n*   Comments:\r\n*   -   This script will redefine the non editable image render class to adjust to desktop devices\r\n*/\n\n// Extends from layoutRender desktop base\nbizagi.rendering.desktop.layoutRender.extend(\"bizagi.rendering.desktop.layoutImage\", bizagi.rendering.layoutImage.prototype);\n// Extends itself\nbizagi.rendering.desktop.layoutImage.extend(\"bizagi.rendering.desktop.layoutImage\", {}, {\n  /**\r\n                                                                                           * Gets the url to get the array image\r\n                                                                                           */\n\n  postRender: function postRender() {\n\n    var self = this;\n    var control = self.getControl();\n\n    if (self.value && typeof self.value.value !== \"undefined\" && self.value.value !== \"\" && self.value.value !== null) {\n      //Get image of customer in binary format\n      var url = self.getImageUri();\n      $.ajax({\n        url: url,\n        type: \"GET\",\n        dataType: \"binary\",\n        processData: false,\n        success: function success(blob) {\n\n          if (typeof blob == \"string\") {\n            var xhr = arguments[2];\n            var contentType = xhr.getResponseHeader('Content-type');\n            blob = bizagi.util.byteArrayToBlob(bizagi.util.stringToByteArray(blob), contentType);\n          }\n\n          var urlCreator = window.URL || window.webkitURL;\n          var imageUrl = urlCreator.createObjectURL(blob);\n\n          $(control).find('img').attr(\"src\", imageUrl);\n        } });\n\n    }\n  },\n\n  getImageUri: function getImageUri() {\n    var self = this;\n\n    var templateControl = self.parent.parent;\n    var renderParams = templateControl.properties.paramsRender || {};\n\n    var map = {\n      entity: self.value.guid,\n      surrogateKey: self.value.surrogateKey,\n      xpath: self.properties.xpath,\n      width: 96,\n      height: 96,\n      hash: self.value.value,\n      idcase: renderParams.idRender ? bizagi.context.idCase : \"_\",\n      idworkitem: renderParams.idRender ? bizagi.context.idWorkitem : \"_\",\n      contextxpath: renderParams.idRender ? renderParams.xpathActions : \"_\" };\n\n\n    return self.dataService.serviceLocator.getUrl(\"render-entity-layout-imageByteArray\").replaceMultiple(map);\n  } });","/**\r\n * Name: Bizagi Desktop Render Link Extension\r\n * Author: Andres Fernando Munoz\r\n * Comments:\r\n * -   This script will redefine the non editable link render class to adjust to desktop devices\r\n * -   This control is based on the link render control\r\n */\n\n// Extends from layoutRender desktop base\nbizagi.rendering.desktop.layoutRender.extend(\"bizagi.rendering.desktop.layoutLink\", bizagi.rendering.layoutLink.prototype);\n// Extends itself\nbizagi.rendering.desktop.layoutLink.extend(\"bizagi.rendering.desktop.layoutLink\", {}, {\n\n  /**\r\n                                                                                         * Template method to implement in each device to customize each render after processed\r\n                                                                                         */\n  postRender: function postRender() {\n    var self = this;\n    var element = self.element;\n\n    // Call base\n    self._super();\n    if (element) {\n      $(element).on('click', $.proxy(self.onClickElement, self));\n    }\n  },\n  /**\r\n      * When click over link\r\n      */\n  onClickElement: function onClickElement() {\n    var self = this;\n    var properties = self.properties || {};\n    var args = {\n      displayName: properties.displayName,\n      reference: properties.reference,\n      referenceType: properties.referenceType,\n      xpath: properties.xpath,\n      contextEvent: self.getFormContainer().getContextEvent ? self.getFormContainer().getContextEvent() : '' };\n\n    self.triggerGlobalHandler(\"DATA-NAVIGATION\", args);\n  } });","/*\r\n *   Name: Bizagi Desktop Render Template Label Extension\r\n *   Author: Mauricio Snchez\r\n *   Comments:\r\n *   -   This script will redefine the label render class inside templates to adjust to desktop devices\r\n */\n\n// Extends from layoutRender desktop base\nbizagi.rendering.desktop.layoutRender.extend(\"bizagi.rendering.desktop.layoutLabel\", bizagi.rendering.layoutLabel.prototype);\n// Extends itself\nbizagi.rendering.desktop.layoutLabel.extend(\"bizagi.rendering.desktop.layoutLabel\", {}, {\n\n  setValue: function setValue(val, triggerEvents) {\n    var self = this;\n    self.properties.displayName = val;\n    this._super(val, triggerEvents);\n    var control = self.getControl();\n    if (control) {\n      $(\".ui-bizagi-render-label\", control).text(val);\n    }\n  } });","/*\r\n*   Name: Bizagi Desktop Render Template Text Extension\r\n*   Author: Mauricio Sanchez\r\n*   Comments:\r\n*   -   This script will redefine the text render class inside templates to adjust to desktop devices\r\n*/\n\n// Extends from layoutRender desktop base\nbizagi.rendering.desktop.layoutRender.extend(\"bizagi.rendering.desktop.layoutText\", bizagi.rendering.layoutText.prototype);","/*\r\n*   Name: Bizagi Desktop Render Template dateTime Extension\r\n*   Author: Andres Fernando Munoz\r\n*   Comments:\r\n*   -   This script will redefine the date time render class inside templates to adjust to desktop devices\r\n*/\n\n// Extends from layoutRender desktop base\nbizagi.rendering.desktop.layoutRender.extend(\"bizagi.rendering.desktop.layoutDateTime\", bizagi.rendering.layoutDateTime.prototype);","/**\r\n * Name: Bizagi Desktop Render Template number Extension\r\n * Author: Mauricio Sanchez\r\n * Comments:\r\n * - This script will redefine the number render class inside templates to adjust to desktop devices\r\n */\n\n// Extends from layoutRender desktop base\nbizagi.rendering.desktop.layoutRender.extend(\"bizagi.rendering.desktop.layoutNumber\", bizagi.rendering.layoutNumber.prototype);\n// Extends itself\nbizagi.rendering.desktop.layoutNumber.extend(\"bizagi.rendering.desktop.layoutNumber\", {}, {\n\n  /**\r\n                                                                                             * Sets the value in the rendered control\r\n                                                                                             */\n  setValue: function setValue(val, triggerEvents) {\n    var self = this;\n    var control = self.getControl();\n\n    if (self.getMode() === \"execution\") {\n      val = val === null || val === \"\" ? \"\" : self.getDisplayValue(val);\n    }\n\n    self.properties.displayName = val;\n\n    this._super(val, triggerEvents);\n    if (control) {\n      $(\".ui-bizagi-render-number\", control).text(val);\n    }\n  } });","/**\r\n * Name: Bizagi Desktop Render Template Money Extension\r\n * Author: Andres Fernando Munoz\r\n * Comments:\r\n * - This script will redefine the money render class inside templates to adjust to desktop devices\r\n */\n\n// Extends from layoutRender desktop base\nbizagi.rendering.desktop.layoutRender.extend(\"bizagi.rendering.desktop.layoutMoney\", bizagi.rendering.layoutNumber.prototype);\n// Extends itself\nbizagi.rendering.desktop.layoutMoney.extend(\"bizagi.rendering.desktop.layoutMoney\", bizagi.rendering.layoutMoney.prototype);\n// Extends itself\nbizagi.rendering.desktop.layoutMoney.extend(\"bizagi.rendering.desktop.layoutMoney\", {}, {\n\n  /**\r\n                                                                                           * Sets the value in the rendered control\r\n                                                                                           */\n  setValue: function setValue(val, triggerEvents) {\n    var self = this;\n    var control = self.getControl();\n\n    if (self.getMode() === \"execution\") {\n      val = val === null || val === \"\" ? \"\" : self.getDisplayValue(val);\n    }\n    self.properties.displayName = val;\n\n    this._super(val, triggerEvents);\n    if (control) {\n      $(\".ui-bizagi-render-number\", control).text(val);\n    }\n  } });","/**\r\n *   Name: Bizagi Desktop Render Layout Upload\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define the upload on entity template\r\n */\n\n// Extends from layoutRender desktop base\nbizagi.rendering.desktop.layoutRender.extend(\"bizagi.rendering.desktop.layoutUpload\", bizagi.rendering.layoutUpload.prototype);\n// Extends itself\nbizagi.rendering.desktop.layoutUpload.extend(\"bizagi.rendering.desktop.layoutUpload\", {}, {\n\n  /**\r\n                                                                                             *   Template method to implement in each children to customize each control\r\n                                                                                             */\n  renderControl: function renderControl() {\n    var self = this;\n    var properties = self.properties;\n    var defer = $.Deferred();\n    var mode = self.getMode();\n\n    if (mode === \"execution\") {\n      $.when(self.getValueFilesByData(bizagi.clone(properties))).\n      done(function (properties, valueResult) {\n        self.properties = properties;\n        self.files = valueResult.files;\n        defer.resolve(self.getHTMLFiles(properties));\n      });\n    } else {\n      self.files = [];\n      defer.resolve(self.getHTMLFiles());\n    }\n\n    return defer.promise();\n  },\n\n  getHTMLFiles: function getHTMLFiles() {\n    var self = this;\n    self.filesCount = self.files.length;\n\n    var template = self.renderFactory.getTemplate(\"layout-upload\");\n\n    // Render template\n    var html = $.fasttmpl(template, {\n      xpath: bizagi.util.encodeXpath(self.getUploadXpath()),\n      noFiles: self.filesCount == 0 });\n\n\n    // Render current children\n    var items = \"\";\n    for (var i = 0; i < self.filesCount; i++) {\n      var file = { id: self.files[i][0], fileName: self.files[i][1] };\n      items += self.renderUploadItem(file);\n    }\n\n    html = self.replaceFilesHtml(html, items);\n\n    return html;\n  },\n\n  /**\r\n      *   Replaces a {{files}} tag in the container for the specified \"replace\" element\r\n      */\n  replaceFilesHtml: function replaceFilesHtml(html, replace) {\n    return html.replace(\"{{files}}\", replace);\n  },\n\n  /**\r\n      *   Renders a single upload item\r\n      */\n  renderUploadItem: function renderUploadItem(file) {\n    var self = this;\n    var properties = self.properties;\n    var template = self.renderFactory.getTemplate(\"layout-uploadItem\");\n\n    return $.fasttmpl(template, {\n      allowDelete: properties.allowDelete,\n      filename: file.fileName,\n      id: file.id,\n      mode: self.getMode(),\n      editable: properties.editable });\n\n  },\n\n  /**\r\n      * Method to customize the container's behaviour to add handlers\r\n      */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    var $control = self.getControl();\n\n    if (self.isExecutionMode()) {\n      $(\".ui-bizagi-render-upload-layout-item\", $control).on(\"click\", function (e) {\n        e.stopPropagation();\n\n        self.downloadFile($(this).data());\n      });\n    }\n  },\n\n  /**\r\n      * Download the upload item\r\n      * @param file\r\n      * @returns {*}\r\n      */\n  downloadFile: function downloadFile(file) {\n    var self = this;\n    var properties = self.properties;\n    var form = self.getFormContainer();\n\n    return self.dataService.getUploadFileEntity({\n      isContextContainerWidgetRender: self.isContextContainerWidgetRender(),\n      xpath: self.getUploadXpath(),\n      fileId: file.id,\n      idRender: form.properties.paramsRender.idRender || \"undefined\",\n      xpathContext: properties.xpathContext,\n      idPageCache: form.properties.paramsRender.idPageCache || \"undefined\",\n      xpathActions: form.properties.paramsRender.xpathActions || \"undefined\",\n      surrogatekey: self.properties.value.surrogateKey,\n      guidentity: self.properties.value.guid }).\n    then(function (blobFile) {\n      bizagi.util.downloadBlobFile(blobFile, file.filename);\n    }).fail(function (error) {\n      form && form.failHandler(error);\n    });\n  } });","/**\r\n *   Name: Bizagi Render Geolocation control\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for form link renders\r\n */\n// Extends from render desktop base\nbizagi.rendering.desktop.render.extend(\"bizagi.rendering.desktop.geolocation\", bizagi.rendering.geolocation.prototype);\n// Extends itself\nbizagi.rendering.desktop.geolocation.extend(\"bizagi.rendering.desktop.geolocation\", {}, {\n\n  /**\r\n                                                                                           * Method to customize each render after processed in read-only mode\r\n                                                                                           */\n  renderReadOnly: function renderReadOnly() {\n    return this.renderControl();\n  },\n\n  postRenderReadOnly: function postRenderReadOnly() {\n    this.postRender();\n  },\n\n  postRender: function postRender() {\n    // Call base\n    this._super();\n\n    this.cordinate = $(\".ui-geolocation-cordinate\", this.getControl());\n  },\n\n  /**\r\n      * Template method to implement in each device to customize the render's behaviour to add handlers\r\n      */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n\n    if (self.isExecutionMode()) {\n      var control = self.getControl();\n\n      // If the control doesn't have a value set the position\n      if (self.value == null) {\n        self.setDisplayValue().then(function () {\n        }).fail(function (msg) {\n          self.cordinate.html(\"<span style='color: red'>\" + msg + \"</span>\");\n        });\n      }\n\n      $(\".ui-bizagi-render-geolocation\", control).bind(\"click\", function () {\n        self.cordinate.empty();\n        // This retun a promise if is usefull\n        self.setDisplayValue().then(function () {\n        }).fail(function (msg) {\n          self.cordinate.html(\"<span style='color: red'>\" + msg + \"</span>\");\n        });\n      });\n    }\n  },\n\n  /**\r\n      * Sets the value in the rendered control\r\n      * @param value\r\n      * @returns {*}\r\n      */\n\n  clearDisplayValue: function clearDisplayValue() {\n    var self = this;\n    var control = self.getControl();\n    var input = control.find(\"span\");\n\n    if (input.length > 0) {\n      input.val(\"\");\n    }\n  },\n\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n    var def = new $.Deferred();\n\n    if (value != null && value !== \"\") {\n      self.cordinate.html(self.performPrecision(value));\n\n      // Set internal value\n      self.setValue(value, false);\n      def.resolve();\n    } else {\n\n      var onSuccess = function onSuccess(position) {\n        var coordinate = position.coords.latitude + \" \" + position.coords.longitude;\n\n        self.cordinate.html(self.performPrecision(coordinate));\n\n        // Set internal value\n        self.setValue(coordinate, false);\n        def.resolve();\n      };\n\n      // onError Callback receives a PositionError object\n      var onError = function onError(msg) {\n        self.cordinate.html(self.properties.value);\n        def.reject(msg);\n      };\n\n      self.getCurrentPosition(onSuccess, onError);\n    }\n\n    return def.promise();\n  } });","/**\r\n  *   Name: Bizagi Desktop Render HIdden Extension\r\n  *   Author: UI Forms Team\r\n  *   Comments:\r\n  *   -   This script will redefine the hidden render class to adjust to desktop devices\r\n  */\n\n// Extends from render Desktop base\nbizagi.rendering.desktop.render.extend(\"bizagi.rendering.desktop.hidden\", bizagi.rendering.hidden.prototype);\n// Extends itself\nbizagi.rendering.desktop.hidden.extend(\"bizagi.rendering.desktop.hidden\", {}, {});","/*\r\n*   Name: Bizagi Desktop Render Money Extension\r\n*   Author: UI Forms Team\r\n*   Comments:\r\n*   -   This script will redefine the money render class to adjust to desktop devices\r\n*/\n\n// Extends from render desktop base\nbizagi.rendering.desktop.render.extend(\"bizagi.rendering.desktop.money\", bizagi.rendering.number.prototype);\n// Extends itself\nbizagi.rendering.desktop.money.extend(\"bizagi.rendering.desktop.money\", bizagi.rendering.money.prototype);\n// Extends itself\nbizagi.rendering.desktop.money.extend(\"bizagi.rendering.desktop.money\", {}, {\n\n  /*\r\n                                                                              *   Sets the value in the rendered control\r\n                                                                              */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n    var properties = self.properties;\n\n    // Call base\n    this._super(value);\n\n    // Set value in input\n    if (value !== undefined && value !== null && properties.editable) {\n      self.numericInput.val(bizagi.util.numberToFixedString(value));\n\n      // Formats the input\n      self.executeFormatCurrencyPlugin();\n    }\n  },\n\n  changeCellRequired: function changeCellRequired(argument) {\n    this.changeRequired(argument);\n  },\n\n  changeRequired: function changeRequired(argument) {\n    this.properties.required = argument;\n    this.changeRequiredLabel(argument);\n  },\n\n  changeRequiredLabel: function changeRequiredLabel(argument) {\n    var control = this.getControl();\n\n    if (control.length > 0) {\n      if (this.getMode() !== \"execution\") {\n        if (bizagi.util.parseBoolean(argument) === true && this.properties.editable) {\n          control.addClass(\"control-required\");\n        } else {\n          control.removeClass(\"control-required\");\n        }\n      } else {\n        if (bizagi.util.parseBoolean(argument) === true && !this.hasValue() && this.properties.editable) {\n          control.addClass(\"control-required\");\n        } else {\n          control.removeClass(\"control-required\");\n        }\n      }\n    }\n\n    this.triggerRenderValidate();\n  },\n\n  /**\r\n     * Customizes the font underline\r\n     * It does not apply when we use the render.base component\r\n     * @param underline\r\n     * @param isLabelFormat\r\n     */\n  changeFontUnderline: function changeFontUnderline(underline, isLabelFormat) {\n    var self = this;\n    var textFormat = self.properties.textFormat || {};\n    var valueFormat = self.properties.valueFormat || {};\n\n    var labelStrikethrough = bizagi.util.parseBoolean(textFormat.strikethru) ? \"line-through \" : \"\";\n    var valueStrikethrough = bizagi.util.parseBoolean(valueFormat.strikethru) ? \"line-through \" : \"\";\n    var formatUnderline = bizagi.util.parseBoolean(underline) ? \"underline\" : \"\";\n\n    var isLabelToFormat = typeof isLabelFormat != \"undefined\" || isLabelFormat != null ? isLabelFormat : true;\n    var $formatElements = isLabelToFormat ? self.getFormattingLabel() : self.getElementsToStylized(self.getControl());\n    var formatStrikeThrough = isLabelToFormat ? labelStrikethrough : valueStrikethrough;\n\n    self.changeTextDecoration($formatElements, formatStrikeThrough + formatUnderline);\n  },\n\n  /**\r\n      * Customizes the font Strikethrough property\r\n      * It does not apply when we use the render.base component\r\n      * @param strikeThrough\r\n      * @param isLabelFormat\r\n      */\n  changeFontStrikethru: function changeFontStrikethru(strikeThrough, isLabelFormat) {\n    var self = this;\n    var textFormat = self.properties.textFormat || {};\n    var valueFormat = self.properties.valueFormat || {};\n\n    var labelUnderline = bizagi.util.parseBoolean(textFormat.underline) ? \"underline \" : \"\";\n    var valueUnderline = bizagi.util.parseBoolean(valueFormat.underline) ? \"underline \" : \"\";\n    var formatStrikeThrough = bizagi.util.parseBoolean(strikeThrough) ? \"line-through\" : \"\";\n\n    var isLabelToFormat = typeof isLabelFormat != \"undefined\" || isLabelFormat != null ? isLabelFormat : true;\n    var $formatElements = isLabelToFormat ? self.getFormattingLabel() : self.getElementsToStylized(self.getControl());\n\n    var formatUnderline = isLabelToFormat ? labelUnderline : valueUnderline;\n\n    self.changeTextDecoration($formatElements, formatUnderline + formatStrikeThrough);\n  },\n\n  /**\r\n      * Context to apply styles\r\n      * @param context\r\n      * @returns {jQuery|HTMLElement}\r\n      */\n  getElementsToStylized: function getElementsToStylized(context) {\n    return $(\"input.ui-bizagi-render-numeric, label.readonly-control\", context);\n  },\n\n  /**\r\n      * Customizes the font Strikethrough or underline property\r\n      * @param {} $element\r\n      * @param {} textDecoration\r\n      * @returns {}\r\n      */\n  changeTextDecoration: function changeTextDecoration($element, textDecoration) {\n    if (textDecoration === undefined) return this;\n    if ($element === undefined) return this;\n\n    textDecoration && $element.css(\"text-decoration\", textDecoration);\n\n    return this;\n  } });","/**\r\n *   Name: Bizagi Desktop Render Query Money Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the query money render class to adjust to desktop devices\r\n */\n\n// Extends itself\nbizagi.rendering.desktop.money.extend(\"bizagi.rendering.desktop.queryMoney\", {}, {\n\n  /**\r\n                                                                                    * Adds the format currency plugin\r\n                                                                                    */\n  attachFormatCurrency: function attachFormatCurrency() {\n    var self = this;\n    var properties = self.properties;\n    if (properties.showSymbol) {\n\n      if (properties.symbol === '' && typeof bizagi != \"undefined\" && properties.dataType == 8 && typeof bizagi.currentUser != \"undefined\") {\n        if (typeof bizagi.currentUser.symbol != \"undefined\") {\n          properties.symbol = bizagi.currentUser.symbol;\n        }\n      }\n    }\n\n    // Call base\n    this._super();\n  } });","/**\r\n *   Name: Bizagi Desktop Render list Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the list render class to adjust to desktop devices\r\n */\n\n// Extends from render desktop base\nbizagi.rendering.desktop.render.extend(\"bizagi.rendering.desktop.radio\", bizagi.rendering.combo.prototype);\n// Extends itself\nbizagi.rendering.desktop.radio.extend(\"bizagi.rendering.desktop.radio\", bizagi.rendering.radio.prototype);\n// Extends itself\nbizagi.rendering.desktop.radio.extend(\"bizagi.rendering.desktop.radio\", {}, {\n\n  /**\r\n                                                                               * Template method to implement in each device to customize each render after processed\r\n                                                                               */\n  postRender: function postRender() {\n    var self = this;\n    var control = self.getControl();\n\n    // Call base \n    self._super();\n\n    // Set control container to behave as a block\n    control.addClass(\"ui-bizagi-render-display-block\");\n    control.addClass(\"ui-bizagi-render-boolean-yesno\");\n\n    self.properties.unique = Math.ceil(Math.random() * 1000);\n\n\n    // Apply plugin\n    self.radiogroup = $(\".ui-bizagi-render-radio\", control);\n    self.radiogroup.optiongroup({ orientation: self.properties.orientation });\n    if (self.selectedValue) {\n      self.radiogroup.optiongroup(\"setValue\", self.selectedValue);\n    }\n  },\n\n  /**\r\n      * Template method to implement in each device to customize the render's behaviour to add handlers\r\n      */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n\n    // Call base\n    self._super();\n\n    // Bind handler\n    self.radiogroup.bind(\"optiongroupchange\", function (event, ui) {\n      // Updates internal value\n      self.onOptionGroupChange(ui);\n    });\n  },\n\n  onOptionGroupChange: function onOptionGroupChange(ui) {\n    var self = this;\n    var newValue = { id: ui.value, value: ui.text };\n    self.selectedValue = newValue.value;\n    self.setValue(newValue);\n  },\n\n  /**\r\n      * Template method to implement in each device to customize the render's behaviour when rendering in design mode\r\n      */\n  configureDesignView: function configureDesignView() {\n    var self = this;\n    var control = self.getControl();\n\n    // Unbind plugin handlers\n    control.find(\"input\").unbind(\"click\");\n  },\n\n  /**\r\n      * Sets the value in the rendered control\r\n      * @param value\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n    var properties = self.properties;\n\n    if (properties.editable) {\n      if (value !== undefined && value.id != \"\") {\n        self.radiogroup.optiongroup(\"setValue\", value.id || value.value);\n      }\n    }\n  },\n\n  /**\r\n      * Sets the value in the rendered control\r\n      */\n  clearDisplayValue: function clearDisplayValue() {\n    var self = this;\n    var control = self.getControl();\n    if (self.radiogroup) {\n      if ($.data(self.radiogroup[0])['ui-optiongroup']) {\n        self.radiogroup.optiongroup(\"setValue\", 0);\n      } else {\n        $(control).html(\"<label class='readonly-control'></label>\");\n      }\n    } else if (!self.properties.editable) {\n      $(control).html(\"<label class='readonly-control'></label>\");\n    }\n  },\n\n  /**\r\n      * Returns the selected value in the template\r\n      * @returns {*}\r\n      */\n  getSelectedValue: function getSelectedValue() {\n    return this.selectedValue;\n  },\n\n  /**\r\n      * Customizes the font underline\r\n      * It does not apply when we use the render.base component\r\n      * @param underline\r\n      * @param isLabelFormat\r\n      */\n  changeFontUnderline: function changeFontUnderline(underline, isLabelFormat) {\n    var self = this;\n    var textFormat = self.properties.textFormat || {};\n    var valueFormat = self.properties.valueFormat || {};\n\n    var labelStrikethrough = bizagi.util.parseBoolean(textFormat.strikethru) ? \"line-through \" : \"\";\n    var valueStrikethrough = bizagi.util.parseBoolean(valueFormat.strikethru) ? \"line-through \" : \"\";\n    var formatUnderline = bizagi.util.parseBoolean(underline) ? \"underline\" : \"\";\n\n    var isLabelToFormat = typeof isLabelFormat != \"undefined\" || isLabelFormat != null ? isLabelFormat : true;\n    var $formatElements = isLabelToFormat ? self.getFormattingLabel() : self.getElementsToStylized(self.getControl());\n    var formatStrikeThrough = isLabelToFormat ? labelStrikethrough : valueStrikethrough;\n\n    self.changeTextDecoration($formatElements, formatStrikeThrough + formatUnderline);\n  },\n\n  /**\r\n      * Customizes the font Strikethrough property\r\n      * It does not apply when we use the render.base component\r\n      * @param strikeThrough\r\n      * @param isLabelFormat\r\n      */\n  changeFontStrikethru: function changeFontStrikethru(strikeThrough, isLabelFormat) {\n    var self = this;\n    var textFormat = self.properties.textFormat || {};\n    var valueFormat = self.properties.valueFormat || {};\n\n    var labelUnderline = bizagi.util.parseBoolean(textFormat.underline) ? \"underline \" : \"\";\n    var valueUnderline = bizagi.util.parseBoolean(valueFormat.underline) ? \"underline \" : \"\";\n    var formatStrikeThrough = bizagi.util.parseBoolean(strikeThrough) ? \"line-through\" : \"\";\n\n    var isLabelToFormat = typeof isLabelFormat != \"undefined\" || isLabelFormat != null ? isLabelFormat : true;\n    var $formatElements = isLabelToFormat ? self.getFormattingLabel() : self.getElementsToStylized(self.getControl());\n\n    var formatUnderline = isLabelToFormat ? labelUnderline : valueUnderline;\n\n    self.changeTextDecoration($formatElements, formatUnderline + formatStrikeThrough);\n  },\n\n  /**\r\n      * Context to apply styles\r\n      * @param context\r\n      * @returns {jQuery|HTMLElement}\r\n      */\n  getElementsToStylized: function getElementsToStylized(context) {\n    return $(\".ui-bizagi-render-radio label, label.readonly-control\", context);\n  },\n\n  /**\r\n      * Customizes the font Strikethrough or underline property\r\n      * @param {} $element\r\n      * @param {} textDecoration\r\n      * @returns {}\r\n      */\n  changeTextDecoration: function changeTextDecoration($element, textDecoration) {\n    if (textDecoration === undefined) return this;\n    if ($element === undefined) return this;\n\n    textDecoration && $element.css(\"text-decoration\", textDecoration);\n\n    return this;\n  } });","/*\r\n *   Name: BizAgi Desktop Render Query Radio Extension\r\n *   Author: Paola Herrera\r\n *   Comments:\r\n *   -   This script will redefine the query list render class to adjust to desktop devices\r\n */\n\n// Extends itself\nbizagi.rendering.desktop.radio.extend(\"bizagi.rendering.desktop.queryRadio\", {}, {\n  /*\r\n                                                                                    *   Template method to implement in each device to customize each render after processed\r\n                                                                                    */\n  postRender: function postRender() {\n    var self = this;\n    var control = self.getControl();\n\n    // Call base\n    this._super();\n\n    // Remove yesno class\n    control.removeClass(\"ui-bizagi-render-boolean-yesno\");\n  } });","/*\r\n* *   Name: BizAgi Desktop Render Query State Extension\r\n*   Author: Paola Herrera\r\n*   Comments:\r\n*   -   This script will redefine the query list render class to adjust to desktop devices\r\n*/\n\n// Extends itself\nbizagi.rendering.desktop.radio.extend(\"bizagi.rendering.desktop.queryState\", {}, {\n\n  /*\r\n                                                                                    *   Update or init the element data\r\n                                                                                    */\n  initializeData: function initializeData(data) {\n    var self = this;\n    var horizontal = typeof data.properties.horizontal !== \"undefined\" ? bizagi.util.parseBoolean(data.properties.horizontal) : true;\n    // Call base\n    this._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n    properties.horizontal = horizontal;\n    if (typeof properties.defaultValue == \"undefined\" && properties.value === null) {\n      self.setValue({ id: \"0\" }, false);\n    }\n  },\n  /*\r\n      *   Returns the internal value\r\n      */\n  getValue: function getValue() {\n    if (this.value && this.value.id && !isNaN(this.value.id)) {\n      return { id: parseInt(this.value.id), value: this.value.value };\n    } else {\n      return this.value;\n    }\n  },\n  /*\r\n      *   Sets the value in the rendered control\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    value.id = value.id + \"\";\n    this._super(value);\n  } });","/*\r\n* *   Name: BizAgi Desktop Render Query Case State Extension\r\n*   Author: Ivn Ricardo Taimal Narvez\r\n*   Comments:\r\n*   -   This script will redefine the query list render class to adjust to desktop devices\r\n*/\n\n// Extends itself\nbizagi.rendering.desktop.radio.extend(\"bizagi.rendering.desktop.queryCaseState\", {}, {\n\n  /*\r\n                                                                                        *   Update or init the element data\r\n                                                                                        */\n  initializeData: function initializeData(data) {\n    var self = this;\n    var horizontal = typeof data.properties.horizontal !== \"undefined\" ? bizagi.util.parseBoolean(data.properties.horizontal) : true;\n    // Call base\n    this._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n    properties.horizontal = horizontal;\n    if (typeof properties.defaultValue == \"undefined\" && properties.value === null) {\n      self.setValue({ id: \"0\" }, false);\n    }\n  },\n  /*\r\n      *   Returns the internal value\r\n      */\n  getValue: function getValue() {\n    if (this.value && this.value.id && !isNaN(this.value.id)) {\n      return { id: parseInt(this.value.id), value: this.value.value };\n    } else {\n      return this.value;\n    }\n  },\n  /*\r\n      *   Sets the value in the rendered control\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    value.id = value.id + \"\";\n    this._super(value);\n  } });","/*\r\n *   Name: BizAgi Desktop Render queryGrid Extension\r\n *   Author: Ivn Ricardo Taimal Narvez\r\n *   Comments:\r\n *   -   This script will redefine the queryGrid render class to adjust to desktop devices\r\n */\n\n// Extends itself\nbizagi.rendering.desktop.panel.extend(\"bizagi.rendering.desktop.queryGrid\", {}, {\n\n  /*\r\n                                                                                   *   Update or init the element data,  concat children xpath\r\n                                                                                   */\n  initializeData: function initializeData(data) {\n    var self = this;\n    console.log('sucede initializeData queryGrid');\n\n    // Call base\n    self._super(data);\n\n    // Set defaults\n    var properties = self.properties;\n    properties.uniqueId = Math.ceil(Math.random() * 1000000);\n    properties.editable = typeof properties.editable != \"undefined\" ? bizagi.util.parseBoolean(properties.editable) : true;\n    properties.visible = typeof properties.visible != \"undefined\" ? bizagi.util.parseBoolean(properties.visible) : true;\n\n    // Override orientation from parent if not set\n    properties.orientation = properties.orientation || (self.parent ? self.parent.properties.orientation : \"ltr\");\n\n    // Save original properties\n    this.originalProperties = JSON.parse(JSON.encode(properties));\n\n    // Create children\n    this.children = [];\n    this.childrenHash = {};\n    if (data.elements) {\n      $.each(data.elements, function (i, element) {\n        element.render.properties.xpath = self.properties.xpath + \".\" + element.render.properties.xpath;\n        if (element.render) {\n          self.createRenderElement(element);\n        } else\n        if (element.container) {\n          self.createContainerElement(element);\n        } else\n        if (element.form) {\n          self.createFormElement(element);\n        }\n      });\n    }\n  } });","/*  \r\n*   Name: Bizagi Desktop Render list Extension\r\n*   Author: Bizagi UI Forms\r\n*   Comments:\r\n*   -   This script will redefine the list render class to adjust to desktop devices\r\n*/\n\nbizagi.rendering.desktop.render.extend(\"bizagi.rendering.desktop.list\", bizagi.rendering.render.base.prototype);\n// Extends from render desktop base\nbizagi.rendering.desktop.list.extend(\"bizagi.rendering.desktop.list\", bizagi.rendering.combo.prototype);\n// Extends itself\nbizagi.rendering.desktop.list.extend(\"bizagi.rendering.desktop.list\", bizagi.rendering.list.prototype);\n// Extends itself\nbizagi.rendering.desktop.list.extend(\"bizagi.rendering.desktop.list\", {}, {\n\n  /**\r\n                                                                             * Template method to implement in each device to customize each render after processed\r\n                                                                             * @returns {} \r\n                                                                             */\n  postRender: function postRender() {\n    var self = this;\n    var control = self.getControl();\n    var properties = self.properties;\n\n    // Call base \n    self._super();\n\n    // Set control container to behave as a block\n    control.addClass(\"ui-bizagi-render-display-block\");\n    control.addClass(\"ui-bizagi-render-boolean-yesno\");\n\n    // Apply plugin\n    self.list = $(\".ui-bizagi-render-list\", control);\n\n    self.list.selectable2({\n      closest: false,\n      multiple: false,\n      select: function select(e, ui) {\n\n        if (e.isPropagationStopped()) return;\n\n        var selected = $(\"li[tabindex='0']\", this);\n        var value = $(selected).data(\"value\");\n        var label = $(selected).text();\n\n        // Updates internal value\n        var newValue = { id: value, value: label };\n        self.setValue(newValue);\n        self.selectedValue = newValue.value;\n        self.focusSelectedItem(selected);\n\n        e.stopPropagation();\n      } });\n\n\n    // Apply list size\n    if (properties.listSize > 0) {\n      var listSize = Number(properties.listSize) * 23;\n      self.list.height(listSize + \"px\");\n    }\n  },\n\n  focusSelectedItem: function focusSelectedItem(elList) {\n    var self = this;\n\n    $.when(self.ready()).done(function () {\n      elList.focus(0);\n    });\n  },\n\n  /**\r\n      * Template method to implement in each device to customize the render's behaviour\r\n      * to add handlers     \r\n      * @returns {} \r\n      */\n  configureHandlers: function configureHandlers() {\n    // Call base\n    this._super();\n  },\n\n  /**\r\n      * Template method to implement in each device to customize the render's behaviour\r\n      * when rendering in design mode\r\n      * @returns {} \r\n      */\n  configureDesignView: function configureDesignView() {\n    var self = this;\n\n    // Call base\n    self._super();\n\n    // Un-bind selection handlers\n    if (self.properties.editable) {\n      self.list.unbind(\"mousedown.selectable\");\n      self.list.unbind(\"focus.selectable\");\n      self.list.unbind(\"blur.selectable\");\n      self.list.unbind(\"keydown.selectable\");\n    }\n  },\n\n  /**\r\n      * Sets the value in the rendered control\r\n      * @param {} value \r\n      * @returns {} \r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n    value = this.mapValue(value);\n\n    if (self.properties.editable) {\n      if (value !== undefined && value.id !== \"\") {\n        self.list.selectable2(\"select\", \"[id='ui-bizagi-list-\" + value.id + \"']\");\n      }\n    }\n  },\n\n  /**\r\n      * Sets the value in the rendered control\r\n      * @returns {} \r\n      */\n  clearDisplayValue: function clearDisplayValue() {\n    var self = this;\n    var control = self.getControl();\n    var selected = control.find(\".ui-state-active\");\n\n    if (selected.length > 0) {\n      // Updates internal value\n      var newValue = self.getValue();\n\n      self.selectedValue = newValue.value;\n      selected.removeClass(\"ui-state-focus ui-selected ui-state-active\");\n    } else if (!self.properties.editable) {\n      $(control).html(\"<label class='readonly-control'></label>\");\n    }\n  },\n\n  /**\r\n      * Returns the selected value in the template\r\n      * @returns {} \r\n      */\n  getSelectedValue: function getSelectedValue() {\n    return this.selectedValue;\n  },\n\n  /**\r\n      * Cleans current data\r\n      * @returns {} \r\n      */\n  cleanData: function cleanData() {\n    var self = this;\n    self.value = self.properties.value = self.selectedValue = { id: \"\", value: \"\" };\n    self.clearDisplayValue();\n  },\n\n  getLabel: function getLabel() {\n    return $(\"label\", this._super());\n  },\n\n  getElementsToStylize: function getElementsToStylize($context) {\n    return $(\"ul li\", $context);\n  },\n\n  changeRequired: function changeRequired(argument) {\n    this.properties.required = argument;\n    this.changeRequiredLabel(argument);\n  },\n\n  changeRequiredLabel: function changeRequiredLabel(argument) {\n    var control = this.getControl();\n    if (this.getMode() !== \"execution\") {\n      if (bizagi.util.parseBoolean(argument) == true && this.properties.editable) {\n        control.addClass(\"control-required\");\n      } else {\n        control.removeClass(\"control-required\");\n      }\n    } else {\n      if (bizagi.util.parseBoolean(argument) == true && !this.hasValue() && this.properties.editable) {\n        control.addClass(\"control-required\");\n      } else {\n        control.removeClass(\"control-required\");\n      }\n    }\n    this.triggerRenderValidate();\n  },\n\n  changeCellRequired: function changeCellRequired(argument) {\n    this.changeRequired(argument);\n  } });","/**\r\n *   Name: Bizagi Desktop Render MultiSelect Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the multiSelect render class to adjust to desktop devices\r\n */\n\n// Extends from render Desktop base\nbizagi.rendering.desktop.render.extend(\"bizagi.rendering.desktop.multiSelect\", bizagi.rendering.render.base.prototype);\n// Extends from render Desktop base\nbizagi.rendering.desktop.multiSelect.extend(\"bizagi.rendering.desktop.multiSelect\", bizagi.rendering.multiSelect.prototype);\n// Extends itself\nbizagi.rendering.desktop.multiSelect.extend(\"bizagi.rendering.desktop.multiSelect\", {\n  MORE_OPTION_WIDTH: 40 },\n{\n\n  /**\r\n   * Update or init the element data\r\n   * @param data\r\n   */\n  initializeData: function initializeData(data) {\n    // Call base\n    this._super(data);\n\n    this.isNewRenderForm = true;\n  },\n\n  /**\r\n      * Template method to implement in each device to customize each render after processed\r\n      */\n  postRender: function postRender() {\n    var $control = this.getControl();\n    this.multiSelect = $(\".bz-multiselect\", $control);\n\n    // Call base\n    this._super();\n  },\n\n  /**\r\n      * Returns the html templated element\r\n      * @returns {*}\r\n      */\n  renderElement: function renderElement() {\n    return this._super(\"render-base\");\n  },\n\n  /**\r\n      * Template method to implement in each device to customize each render after processed in read-only mode\r\n      */\n  postRenderReadOnly: function postRenderReadOnly() {\n    var $control = this.getControl();\n    this.multiSelect = $(\".bz-multiselect\", $control);\n\n    // Call base\n    this._super();\n  },\n\n  /**\r\n      * Sets the value in the rendered control\r\n      * @param value\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n\n    // Set internal value\n    self._super(value);\n\n    var timeoutSelectedItems = setTimeout(function () {\n      self.addSelectedElements();\n      clearTimeout(timeoutSelectedItems);\n    }, 100);\n  },\n\n  /**\r\n      * Template method to implement in each device to customize the render's behaviour to add handlers\r\n      */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    var $control = self.getControl();\n\n    $(\".bz-multiselect\", $control).\n    on(\"click, mousedown.multiselect\", function (evt) {\n      if ($(evt.target).hasClass(\"bz-multiselect__tags\") || $(evt.target).hasClass(\"bz-multiselect__arrow\")) {\n        self.onToggleDataView(evt);\n      }\n    });\n\n    $('ul.bz-multiselect__tags', $control).\n    on(\"click\", \"li div.bz-btn-icn\", this.onUnselectElement.bind(this)).\n    on(\"click\", \"li.bz-multiselect__plus\", this.onShowSelectedElements.bind(this));\n  },\n\n  /**\r\n      * Template method to implement in each device to customize the render's behaviour to add handlers when the control is readonly\r\n      */\n  configureHandlersReadOnly: function configureHandlersReadOnly() {\n    var $control = this.getControl();\n\n    $('ul.bz-multiselect__tags', $control).\n    on(\"click\", \"li.bz-multiselect__plus\", this.onShowSelectedElements.bind(this));\n  },\n\n  /**\r\n      * addSelectedElements\r\n      */\n  addSelectedElements: function addSelectedElements() {\n    var self = this;\n    var $control = this.getControl();\n    var values = this.getDataValue() || [];\n    var totalValues = values.length;\n    var $tagsContainer = $('ul.bz-multiselect__tags', $control);\n    var editable = this.properties.editable;\n    var template = this.renderFactory.getTemplate(\"list-multiselect-tag\");\n\n    $tagsContainer.empty();\n\n    if (totalValues > 0) {\n\n      if (this.getFormContainer().params.printversion) {\n        $control.html(values.map(function (el) {\n          return self.formatItem(el.value);\n        }).join(\", \"));\n      } else {\n\n        for (var i = 0; i < totalValues; i++) {\n          var item = values[i];\n          var data = { id: item.id, value: item.value, editable: editable };\n          var $ChildToAdd = $.tmpl(template, data, {\n            formatItem: self.formatItem });\n\n\n          $tagsContainer.append($ChildToAdd);\n\n          // Process the control in the layout\n          this.processControlLayout(this.properties.valueFormat || {});\n\n          if (!this.canAddMoreItems($tagsContainer)) {\n            // Remove last item added\n            $tagsContainer.\n            children().\n            last().\n            remove();\n\n            // Add the view mode item\n            var $viewMore = $.tmpl(this.renderFactory.getTemplate(\"list-multiselect-view-more\"), {\n              value: totalValues - i,\n              index: i });\n\n\n            $tagsContainer.append($viewMore);\n            break;\n          }\n        }\n      }\n    }\n\n  },\n\n  /**\r\n      * Get data and render the float list view\r\n      */\n  renderFloatView: function renderFloatView() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"list-multiselect-item\");\n\n    self.updateArrow();\n\n    $.when(self.getData()).done(function (data) {\n      try {\n        var params = { datasource: data };\n        var options = {\n          selected: self.getDataValue(),\n          isChecked: function isChecked(id) {\n            return self.markAsChecked.call(this, id);\n          },\n          formatItem: self.formatItem };\n\n\n        var $floatList = self.showFloatListView(template, params, options);\n        self.floatListHandlers($floatList);\n\n      } catch (e) {\n        bizagi.log(e.message);\n      }\n    }).fail(function (data) {\n      var auxMsg = \"\";\n      var msgObj = self.properties.displayName + \": \";\n      var form = self.getFormContainer();\n\n      if (typeof data == \"string\") {\n        auxMsg = JSON && JSON.parse(data) || $.parseJSON(data);\n      } else {\n        auxMsg = data;\n      }\n\n      msgObj += auxMsg.message;\n\n      // Show error from server\n      form.addValidationMessage(msgObj);\n    });\n  },\n\n  /**\r\n      * Show float list view\r\n      * @param template\r\n      * @param data\r\n      * @param options\r\n      */\n  showFloatListView: function showFloatListView(template, data, options) {\n    var self = this;\n    var $control = self.getControl();\n    var $containerControl = $control.closest(\".ui-bizagi-control-wrapper\");\n    var $containerRender = $containerControl.closest(\".bz-form-old-item\");\n\n    var $floatList = $.tmpl(template, data, options);\n    var widthControl = self.multiSelect.width();\n\n    $containerRender.addClass(\"bz-multiselect__visible\");\n    $containerControl.addClass(\"bz-multiselect__visible bz-multiselect__floats\");\n    $containerControl.append($floatList);\n\n    $floatList.width(widthControl);\n\n    $floatList.position({\n      my: \"left top\",\n      at: \"left bottom\",\n      of: self.multiSelect,\n      collision: \"fit\" }).\n    hide();\n\n    // Display view\n    $floatList.show();\n\n    // Stop bubbling outside the dropdown\n    $floatList.on(\"mousedown\", function (ev) {\n      ev.preventDefault();\n      return false;\n    });\n\n    // Add global handler to close the float view\n    var timeoutMouseDown = setTimeout(function () {\n      $(document).one(\"mousedown.multiselect\", function (evt) {\n        $floatList.trigger('closeView');\n      });\n      clearTimeout(timeoutMouseDown);\n    }, 0);\n\n    return $floatList;\n  },\n\n  /**\r\n      * Destroy the float list view\r\n      * @param $list\r\n      */\n  destroyFloatView: function destroyFloatView($list) {\n    var $control = this.getControl();\n    var $containerControl = $control.closest(\".ui-bizagi-control-wrapper\");\n    var $containerRender = $containerControl.closest(\".bz-form-old-item\");\n\n    if ($containerControl.hasClass(\"bz-multiselect__visible\"))\n    $containerControl.removeClass(\"bz-multiselect__visible\");\n\n    if ($containerControl.hasClass(\"bz-multiselect__floats\"))\n    $containerControl.removeClass(\"bz-multiselect__floats\");\n\n    if ($containerRender.hasClass(\"bz-multiselect__visible\"))\n    $containerRender.removeClass(\"bz-multiselect__visible\");\n\n    $list.remove();\n  },\n\n  /**\r\n      * Update the float list view\r\n      */\n  closeFloatView: function closeFloatView() {\n    var $control = this.getControl();\n    var $containerControl = $control.closest(\".ui-bizagi-control-wrapper\");\n    var $containerRender = $containerControl.closest(\".bz-form-old-item\");\n\n    var $listView = $($containerRender).find(\".bz-multiselect__content\");\n\n    $listView.hide();\n\n    this.updateArrow();\n    this.destroyFloatView($listView);\n  },\n\n  updateArrow: function updateArrow() {\n    var $control = this.getControl();\n\n    $control.find(\".bz-multiselect__arrow\").\n    toggleClass(\"bz-multiselect__arrow-collapse\");\n  },\n\n  floatViewIsCollapsed: function floatViewIsCollapsed() {\n    var $listView = $(\".bz-multiselect__content\", this.element);\n\n    return $listView && $listView.length > 0;\n  },\n\n  changeRequired: function changeRequired(argument) {\n    this.properties.required = argument;\n    this.changeRequiredLabel(argument);\n  },\n\n  changeRequiredLabel: function changeRequiredLabel(argument) {\n    var control = this.getControl();\n\n    if (control.length > 0) {\n      if (this.getMode() !== \"execution\") {\n        if (bizagi.util.parseBoolean(argument) === true && this.properties.editable) {\n          control.addClass(\"control-required\");\n        } else {\n          control.removeClass(\"control-required\");\n        }\n      } else {\n        if (bizagi.util.parseBoolean(argument) === true && !this.hasValue() && this.properties.editable) {\n          control.addClass(\"control-required\");\n        } else {\n          control.removeClass(\"control-required\");\n        }\n      }\n    }\n\n    this.triggerRenderValidate();\n  },\n\n  changeCellRequired: function changeCellRequired(argument) {\n    this.changeRequired(argument);\n  },\n\n  onUnselectElement: function onUnselectElement(ev) {\n    var $element = $(ev.target);\n    var idToRemove = $element.data(\"id\");\n\n    // Remove element\n    this.removeElement({ id: idToRemove });\n    this.addSelectedElements();\n  },\n\n  onShowSelectedElements: function onShowSelectedElements(ev) {\n    var self = this;\n    var $element = $(ev.currentTarget);\n    var index = $element.data('index');\n\n    var valuesToShow = (this.getDataValue() || []).slice(index);\n    var template = this.renderFactory.getTemplate(\"list-multiselect-tags\");\n    var $listView = this.showFloatListView(template, {\n      datasource: valuesToShow,\n      editable: self.properties.editable },\n    {\n      formatItem: self.formatItem });\n\n\n    var $tagElements = $('ul.bz-multiselect__tags', $listView);\n\n    $tagElements.on(\"click, mousedown\", \"li div.bz-btn-icn\", function (ev) {\n      self.onUnselectElement(ev);\n      $listView.remove();\n      ev.stopPropagation();\n    });\n\n    $listView.on(\"closeView\", function () {\n      $tagElements.off(\"click\", \"li div.bz-btn-icn\", self.onUnselectElement.bind(self));\n      $listView.remove();\n    });\n\n  },\n\n  onToggleDataView: function onToggleDataView(evt) {\n    this.floatViewIsCollapsed() ? this.closeFloatView() : this.renderFloatView();\n  },\n\n  floatListHandlers: function floatListHandlers($floatListContext) {\n    var self = this;\n    var $listContainer = $floatListContext.find(\".bz-multiselect__list li\");\n    var checkbox = $listContainer.find(\"input[type=checkbox]\");\n    var $search = $floatListContext.find(\".bz-multiselect__search_input\");\n    if (this.properties.enableTyping) {\n      $search.bind(\"change keypress keyup mousedown\", function (evt) {\n        evt.stopPropagation();\n        self.filterList(this.value, $listContainer);\n      });\n    } else {\n      $search.addClass(\"bz-multiselect__search--disabled\");\n    }\n\n    checkbox.change(function () {\n      var $context = $(this);\n      var isChecked = $context.is(\":checked\");\n      var id = $context.data(\"id\");\n      var element = self.findItemById(id);\n      var value = element.value;\n\n      var newValue = { id: id, value: value };\n\n      if (isChecked) {\n        self.addElement(newValue);\n      } else {\n        self.removeElement(newValue);\n      }\n\n      self.addSelectedElements();\n    });\n\n    $floatListContext.on(\"closeView\", function () {\n      self.closeFloatView();\n\n      $(document).unbind(\"mousedown.multiselect\");\n    });\n  },\n\n  /**\r\n      * Template method to get the label element\r\n      * @returns {jQuery|HTMLElement}\r\n      */\n  getLabel: function getLabel() {\n    return $(\"label\", this._super());\n  } });","/**\r\n *   Name: Bizagi Render Hand Signature Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the Hand Signature render class to adjust to desktop devices\r\n */\n\n// Extends from render base\nbizagi.rendering.desktop.render.extend(\"bizagi.rendering.desktop.handSignature\", bizagi.rendering.render.base.prototype);\n// Extends from render Desktop base\nbizagi.rendering.desktop.handSignature.extend(\"bizagi.rendering.desktop.handSignature\", {\n  // Statics\n  BA_ACTION_PARAMETER_PREFIX: bizagi.render.services.service.BA_ACTION_PARAMETER_PREFIX,\n  BA_CONTEXT_PARAMETER_PREFIX: bizagi.render.services.service.BA_CONTEXT_PARAMETER_PREFIX,\n  BA_PAGE_CACHE: bizagi.render.services.service.BA_PAGE_CACHE },\nbizagi.rendering.handSignature.prototype);\n// Extends itself\nbizagi.rendering.desktop.handSignature.extend(\"bizagi.rendering.desktop.handSignature\", {}, {\n\n  /**\r\n                                                                                               * Returns the html templated element\r\n                                                                                               * @returns {*}\r\n                                                                                               */\n  renderElement: function renderElement() {\n    return this._super(\"render-base\");\n  },\n\n  /**\r\n      * Render after processed in read-only mode\r\n      */\n  postRenderReadOnly: function postRenderReadOnly() {\n    var self = this;\n    var form = self.getFormContainer();\n    var printVersion = form.params && form.params.printversion;\n\n    // Apply plugin\n    if (this.isExecutionMode()) {\n      if (printVersion) {\n        self.postRenderPrintVersion();\n      } else {\n        var $container = self.getSignatureContainer();\n\n        // Wait until current element is rendered\n        self.setResizeObserver($container, function () {\n          self.renderSignature();\n        });\n      }\n    }\n  },\n\n  postRenderPrintVersion: function postRenderPrintVersion() {\n    var $container = this.getSignatureContainer();\n    var imageElement = document.createElement(\"img\");\n\n    this.buildItemUrl().then(function (dataUrl) {\n      imageElement.src = dataUrl;\n      $container.append(imageElement);\n    });\n  },\n\n  changeRequired: function changeRequired(argument) {\n    this.properties.required = argument;\n    this.changeRequiredLabel(argument);\n  },\n\n  changeRequiredLabel: function changeRequiredLabel(argument) {\n    var control = this.getControl();\n\n    if (control.length > 0) {\n      if (this.getMode() !== \"execution\") {\n        if (bizagi.util.parseBoolean(argument) === true && this.properties.editable) {\n          control.addClass(\"control-required\");\n        } else {\n          control.removeClass(\"control-required\");\n        }\n      } else {\n        if (bizagi.util.parseBoolean(argument) === true && !this.hasValue() && this.properties.editable) {\n          control.addClass(\"control-required\");\n        } else {\n          control.removeClass(\"control-required\");\n        }\n      }\n    }\n\n    this.triggerRenderValidate();\n  },\n\n  changeCellRequired: function changeCellRequired(argument) {\n    this.changeRequired(argument);\n  },\n\n  getLabel: function getLabel() {\n    return $(\"label\", this._super());\n  },\n\n  /**\r\n      * Add action handlers\r\n      */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    var $actions = $(\".bz-actions\", this.getControl());\n    var $container = self.getSignatureContainer();\n    var autoSave = bizagi.util.debounce2(function (params) {\n      if (!changed) return;\n\n      var data = Array.prototype.slice.call(params || []);\n      var dataImage = (data && data[0] || []).dataImage || \"\";\n\n      self.saveDeferred = $.when(self.saveSignature(dataImage));\n    }, self.DELAY_TO_SAVE);\n\n    var changed = false;\n\n    $container.bind(\"change\", function () {\n      changed = true;\n      if ($(this).BzjSignature(\"isModified\")) {\n        self.saveTimestamp = new Date().getTime();\n        var $canvas = $(\".bz-signature__container-canvas\", this)[0];\n        var dataImage = $canvas.toDataURL(\"image/png\");\n        autoSave.fire({ dataImage: dataImage });\n        self.setData(dataImage.replace(/^data:image\\/(png|jpg|jpeg);base64,/, \"\"));\n        self.properties.url = dataImage;\n        self.setState(self.STATE_TYPE.done);\n      }\n    });\n\n    $actions.on(\"click\", \"[data-action='clear']\", function () {\n      changed = true;\n      autoSave.cancel();\n      self.onSignatureClear($container);\n    });\n\n    $actions.on(\"click\", \"[data-action='edit']\", function () {\n      self.onSignatureEdit($container);\n      changed = false;\n    });\n\n    $actions.on(\"click\", \"[data-action='save']\", function () {\n      if (!changed) {\n        self.setState(self.STATE_TYPE.edit);\n        $container.BzjSignature(\"disable\");\n        return;\n      }\n\n      self.onSignatureSave($container, autoSave);\n      changed = false;\n    });\n\n  },\n\n  onSignatureClear: function onSignatureClear($container) {\n    var self = this;\n    $container.BzjSignature(\"reset\");\n\n    if (self.hasValue()) {\n      self.setData(self.EMPTY_VALUE);\n      self.properties.url = self.EMPTY_VALUE;\n      self.saveDeferred = $.when(self.deleteImage()).done(function () {\n        self.setData(self.EMPTY_VALUE);\n        self.properties.url = self.EMPTY_VALUE;\n      }).fail(function (error) {\n        self.executeFormFailHandler(error);\n      });\n    }\n\n    return $.when(self.saveDeferred);\n  },\n\n  onSignatureEdit: function onSignatureEdit($container) {\n    this.setState(this.STATE_TYPE.draw);\n    $container.BzjSignature(\"enable\");\n  },\n\n  onSignatureSave: function onSignatureSave($container, autoSave) {\n    var self = this;\n\n    $container.BzjSignature(\"disable\");\n\n    if ($container && $container.BzjSignature(\"isModified\")) {\n      var $canvas = $(\".bz-signature__container-canvas\", $container)[0];\n\n      autoSave.cancel();\n      self.saveSignature($canvas.toDataURL(\"image/png\")).always(function () {\n        self.setState(self.STATE_TYPE.edit);\n      });\n    } else {\n      self.setState(self.STATE_TYPE.edit);\n    }\n  },\n\n\n  /**\r\n      * Apply plugin\r\n      */\n  renderSignature: function renderSignature() {\n    var self = this;\n    var $container = self.getSignatureContainer();\n    var config = {\n      sizeRatio: 3,\n      cssclass: \"bz-signature__container-canvas\",\n      color: \"#000\",\n      background: \"#FFFFFF\" };\n\n\n    $container.empty();\n    $container.BzjSignature(config);\n    $container.BzjSignature(\"disable\");\n\n    if (self.pluginInitialized && self.properties.url) {\n      self.setSignature($container);\n    } else {\n      self.renderSignatureValue($container);\n    }\n\n    // Required for resize observer\n    self.pluginInitialized = true;\n  },\n\n  /**\r\n      * Set data to control\r\n      * @param $container\r\n      * @returns {*}\r\n      */\n  renderSignatureValue: function renderSignatureValue($container) {\n    var self = this;\n\n    return self.buildItemUrl().then(function (dataUrl) {\n      if (!self.isDisposed()) {\n        var url = dataUrl !== \"\" ? dataUrl : \"\";\n        self.properties.url = url;\n\n        if (!bizagi.util.isEmpty(url)) {\n          $container.BzjSignature(\"setData\", url);\n        } else {\n          self.setData(self.EMPTY_VALUE);\n        }\n      }\n    });\n  } });","/*\r\n *   Name: BizAgi Desktop Render Query List Extension\r\n *   Author: Paola Herrera\r\n *   Comments:\r\n *   -   This script will redefine the query list render class to adjust to desktop devices\r\n */\n\nbizagi.rendering.desktop.list.extend(\"bizagi.rendering.desktop.queryList\", {}, {});","/**\r\n *   Name: BizAgi Desktop Render Query MultiSelect Extension\r\n *   Author: Alexander Mejia\r\n *   Comments:\r\n *   -   This script will redefine the query multi select render class to adjust to desktop devices\r\n */\n\n// Extends itself\nbizagi.rendering.desktop.multiSelect.extend(\"bizagi.rendering.desktop.queryMultiSelect\", {}, {\n\n  /**\r\n                                                                                                * Fetch the data into a deferred\r\n                                                                                                * @returns {*[]}\r\n                                                                                                */\n  getData: function getData() {\n    var properties = this.properties;\n\n    return properties.data ? this.normalizeData(properties.data) : [];\n  },\n  /*\r\n     *   Add the render data to the given collection in order to send data to the server\r\n     */\n  collectDataQueryForm: function collectDataQueryForm(renderValues) {\n    var self = this;\n    var properties = self.properties;\n    var xpath = properties.xpath;\n    var queryValue = self.mapValue(self.getValue());\n\n    if (!bizagi.util.isEmpty(xpath) && (!bizagi.util.isEmpty(queryValue) || properties.included)) {\n      var searchType = (self.properties.typeSearch || self.properties.rangeQuery || \"NONE\").toUpperCase();\n      var newParameter = {\n        \"value\": queryValue,\n        \"included\": self.properties.included,\n        \"xpath\": properties.xpath,\n        \"searchType\": searchType,\n        \"orderType\": \"NONE\",\n        \"renderId\": self.getRenderId() };\n\n\n      if (typeof properties.displayXpath !== \"undefined\" && properties.displayXpath !== \"\") {\n        newParameter.displayXpath = properties.displayXpath;\n      }\n\n      renderValues.push(newParameter);\n    }\n  },\n\n  mapValue: function mapValue(value) {\n    var mappedValue = value || [];\n    var valueObj = Array.isArray(mappedValue) ? {} : JSON.parse(value);\n\n    if (!bizagi.util.isEmpty(value) && typeof valueObj.value !== \"undefined\") {\n      mappedValue = !bizagi.util.isEmpty(valueObj.value) ? value : [];\n    }\n\n    return mappedValue;\n  } });","/**\r\n *   Name: Bizagi User Field render Desktop Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define the basic behaviour for userfields\r\n */\n\nbizagi.rendering.desktop.render.extend(\"bizagi.rendering.desktop.userfieldWrapper\", bizagi.rendering.userfieldWrapper.prototype);\nbizagi.rendering.desktop.userfieldWrapper.extend(\"bizagi.rendering.desktop.userfieldWrapper\", {}, {\n\n  /**\r\n                                                                                                     *  Load userfield\r\n                                                                                                     */\n  getUserfieldControl: function getUserfieldControl() {\n    var self = this;\n    var sControl = self.userfieldName;\n    var mode = self.getMode();\n    var exists = eval(\"typeof bizagi.rendering.desktop.\" + sControl + \" !== 'undefined'\");\n    var def = new $.Deferred();\n\n    if (exists) {\n      // Creates the userfield instance\n      // Set true argument for tabItem\n      $.when(self.parent.ready()).done(function () {\n        def.resolve(self.createUserfieldInstance(sControl));\n      });\n\n    } else {\n      if (mode != \"execution\") {\n        var timeOutTrigger = setTimeout(function () {\n          $.when(self.triggerGlobalHandler(\"loadUserField\", { userfield: self.userfieldGuid, device: \"Desktop\" })).\n          pipe(function (result) {\n            if (result) {\n              // Creates the userfield instance\n              def.resolve(self.createUserfieldInstance(sControl));\n            }\n          });\n          clearTimeout(timeOutTrigger);\n        }, 10);\n\n      } else\n      {\n        // Call ajax service in order to retrieve user field definitions\n        $.when(self.dataService.getUserfieldDefinition({\n          userfield: self.userfieldGuid,\n          device: \"desktop\" })).\n        pipe(function (data) {\n          // Load userfield in memory\n          self.loadUserfield(data);\n\n          // Creates the userfield instance\n          def.resolve(self.createUserfieldInstance(sControl));\n        });\n      }\n    }\n\n    return def.promise();\n  },\n\n  /**\r\n      * Creates the userfield instance when the userfield prototype is loaded in memory\r\n      */\n  createUserfieldInstance: function createUserfieldInstance(sControl) {\n    var self = this;\n    var control;\n    try {\n      // Create a dynamic function to avoid problem with eval calls when minifying the code\n      var dynamicFunction = \"var baDynamicFn = function(renderParams){ \\r\\n\";\n      dynamicFunction += \"return new bizagi.rendering.desktop.\" + sControl + \"(renderParams);\\r\\n\";\n      dynamicFunction += \"}\\r\\n\";\n      dynamicFunction += \"baDynamicFn\";\n      dynamicFunction = eval(dynamicFunction);\n\n      // Call the dynamic function\n      control = dynamicFunction(self.initialParams);\n    } catch (e) {\n      // If the call fails, return the default user field\n      control = self.getUserFieldInstance(self.initialParams);\n    }\n\n    control.properties.isUserField = true;\n\n    // Save userfield instance\n    self.userfieldInstance = control;\n\n    // Create proxy methods from the wrapper to the userfield instance\n    self.replicateUserfieldMethods(control);\n\n    // Replicate renderchange event from wrapped element to grid if applies\n    self.userfieldInstance.bind(\"renderchange\", function () {\n      self.triggerHandler(\"renderchange\", arguments);\n    });\n\n    return control;\n  },\n\n  /**\r\n      * Load userfield into memory\r\n      */\n  loadUserfield: function loadUserfield(data) {\n    var self = this;\n    var styleContent = \"\";\n\n    self.properties.styleGuid = self.properties.styleGuid || Math.guid();\n\n    try {\n      // Parse data\n      try {\n        data = eval(data);\n      } catch (e) {\n        bizagi.log(\"Could not parse result userfield \" + self.userfieldName, e.message);\n      }\n\n      // Iterate elements\n      $.each(data, function (index, val) {\n        if (val.type === \"js\") {\n          try {var\n            replaceWithDevice = function replaceWithDevice(str) {\n              return str.replace(/bizagi.rendering/gi, \"bizagi.rendering.desktop\");\n            };\n\n            val.content = val.content.replace(/bizagi\\.rendering\\.[^\\s]+\\.extend(\\s|\\n|\\s)*\\((\\s|\\n|\\s)*\\\"bizagi\\.rendering\\.[^\\s]+\\\"/gmi, replaceWithDevice);\n            window.eval(val.content);\n          } catch (ex) {\n            bizagi.log(\"Could not parse result userfield3 \" + self.userfieldName, ex.message);\n          }\n        }\n        if (val.type === \"css\") {\n          styleContent += val.content;\n        }\n      });\n\n      if ($.trim(styleContent) !== \"\") {\n        bizagi.util.loadStyle(styleContent, self.properties.styleGuid);\n      }\n\n      // Replicate userfield methods to the wrapper\n      var control = eval(\"bizagi.rendering.\" + self.userfieldName);\n\n    } catch (e) {\n      bizagi.log(\"Could not parse result userfield \" + self.userfieldName, e.message);\n    }\n  },\n\n  getUserFieldInstance: function getUserFieldInstance(params) {\n    var mode = this.getMode();\n\n    // If the call fails, return the default user field\n    return mode === \"execution\" ? new bizagi.rendering.desktop.defaultUserField(params) : new bizagi.rendering.desktop.designUserField(params);\n  },\n\n  /*\r\n     *   Starts waiting signal for async stuff\r\n     */\n  startUserfieldLoading: function startUserfieldLoading() {\n    this.element.addClass('bz-form-userfield__loader');\n    this.startLoading();\n  },\n\n  /*\r\n     *   Ends waiting for async stuff\r\n     */\n  endUserfieldLoading: function endUserfieldLoading() {\n    this.element.removeClass('bz-form-userfield__loader');\n    this.endLoading();\n  } });\n\n\n// Auto-extension\nbizagi.rendering.desktop.render.extend(\"bizagi.rendering.desktop.basicUserField\", bizagi.rendering.userfieldDefinition.prototype);\nbizagi.rendering.desktop.basicUserField.extend(\"bizagi.rendering.desktop.basicUserField\", bizagi.rendering.basicUserField.prototype);\nbizagi.rendering.desktop.basicUserField.extend(\"bizagi.rendering.desktop.basicUserField\", {}, {\n  /*\r\n                                                                                                * Shows a jquery dialog\r\n                                                                                                */\n  showDialog: function showDialog(url, params) {\n    var self = this;\n    var formDialog = $(\"<div class='iframeContent'><iframe scrolling='yes' id='innerFrameContent' src='\" + url + \"' style='width:100%;height:100%;border:0'  /></div>\");\n    var iframe = $(\"#innerFrameContent\", formDialog);\n\n    // The following procedure adds the \"closeWindow\" function, this will serve as callback from the\n    // window, also it's going to serve as brigde to update data back into bizagi fields.\n    iframe.load(function () {\n      iframe.callInside(function (params) {\n        // This script will execute inside the iframe context\n        this.BACloseWindow = function (controls, submitForm) {\n          // close dialog\n          params.formDialog.dialog(\"close\");\n\n          // Executes the callback to assign values and submit form (if requested)\n          params.formDialog.callback(controls, submitForm);\n        };\n\n      }, {\n        formDialog: formDialog,\n        container: self });\n\n\n      // Callback function which will update the values in bizagi\n      formDialog.callback = function (controls, submitForm) {\n        $.each(controls, function (index, item) {\n          if (!item.xpath) {\n            bizagi.showMessageBox('Error calling closeWindow, the xpath was not defined.', 'Userfield error');\n          }\n          if (!item.value) {\n            bizagi.showMessageBox('Error calling closeWindow, the value was not defined.', 'Userfield error');\n          }\n\n          self.getFormContainer().getRender(item.xpath).setDisplayValue(item.value);\n        });\n\n        // If the closeWindow was call with \"submitForm\" then execute the submit on change\n        if (submitForm) {\n          self.submitOnChange();\n        }\n      };\n    });\n\n    formDialog.dialog({ height: params.height, width: params.width, title: params.title });\n  },\n\n  /*\r\n     *   Shows a browser popup\r\n     */\n  showPopup: function showPopup(url, params) {\n    var self = this;\n\n    // Callback function which will update the values in bizagi\n    var callbackFn = function callbackFn(controls, submitForm) {\n      $.each(controls, function (index, item) {\n        if (!item.xpath) {\n          bizagi.showMessageBox('Error calling closeWindow, the xpath was not defined.', 'Userfield error');\n        }\n\n        if (!item.value) {\n          bizagi.showMessageBox('Error calling closeWindow, the value was not defined.', 'Userfield error');\n        }\n\n        self.getFormContainer().getRender(item.xpath).setDisplayValue(item.value);\n      });\n\n      // If the closeWindow was call with \"submitForm\" then execute the submit on change\n      if (submitForm) {\n        self.submitOnChange();\n      }\n    };\n\n    bizagi.showPopup(url, params, callbackFn);\n  } });\n\n\n/*\r\n        *   Default implementation for user fields\r\n        */\nbizagi.rendering.desktop.basicUserField.extend(\"bizagi.rendering.desktop.defaultUserField\", {}, {\n\n  /*\r\n                                                                                                  *   Template method to implement in each device to customize each render after processed\r\n                                                                                                  */\n  getEditableControl: function getEditableControl() {\n    var self = this;\n    var control = self.getControl();\n    var properties = self.properties;\n    var controlName = properties.control;\n\n    self.input = $(\"<label>Userfield: \" + controlName + \" not found</label>\").appendTo(control);\n  },\n\n  /*\r\n     *  Dont send the data to the server\r\n     */\n  collectData: function collectData(renderValues) {\n  },\n\n  getDisplayValue: function getDisplayValue() {\n    var self = this;\n    var properties = self.properties;\n    var controlName = properties.control;\n\n    return \"Userfield: \" + controlName + \" not found\";\n  },\n\n  getReadonlyControl: function getReadonlyControl() {\n    var self = this;\n    var control = self.getControl();\n    var properties = self.properties;\n    var controlName = properties.control;\n    var mycontrol = $(\"<label>Userfield: \" + controlName + \" not found</label>\").appendTo(control);\n\n    return mycontrol;\n  } });","/**\r\n *   Name: Bizagi Desktop Render Document Generator Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the document generator render class to adjust to desktop devices\r\n */\n\n// Extends from render Desktop base\nbizagi.rendering.desktop.render.extend(\"bizagi.rendering.desktop.document\", bizagi.rendering.document.prototype);\n// Extends itself\nbizagi.rendering.desktop.document.extend(\"bizagi.rendering.desktop.document\", {}, {\n\n  /**\r\n                                                                                     * Method to customize each render after processed\r\n                                                                                     */\n  postRender: function postRender() {\n    var self = this;\n    self.applyDocumentTemplatesFormat();\n\n    if (self.properties.allowSendInMail) {\n      self.bindEmailDialog();\n    }\n  },\n\n  /**\r\n      * Method to render non editable values\r\n      * @returns {string}\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    return \"\";\n  },\n\n  /**\r\n      * Bind dialog for send email\r\n      */\n  bindEmailDialog: function bindEmailDialog() {\n    var self = this;\n    var control = self.getControl();\n    var xpathContext = self.properties.xpathContext || \"\";\n    var xpath = self.properties.xpath;\n\n    $(\".ui-bizagi-render-documentgenerator-sendmail\", control).bizagiSendEmail({\n      tmpl: self.renderFactory.getTemplate(\"dialog-send-email\"),\n      value: self.value,\n      self: self,\n      dataService: self.dataService,\n      properties: self.properties,\n      xpath: xpath,\n      xpathContext: xpathContext });\n\n  },\n\n  /**\r\n      * Put formatting to the documents that are generated by the control\r\n      */\n  applyDocumentTemplatesFormat: function applyDocumentTemplatesFormat() {\n    var self = this;\n    var control = self.getControl();\n\n    // Set control container to behave as a block\n    control.addClass(\"ui-bizagi-render-display-block\");\n    // Resolve the type of the document based on the extension and put the icon to acconding to it\n    var documentList = $(\".ui-bizagi-document-upload-item\", control);\n\n    $.each(documentList, function (index, value) {\n      $(\".ui-bizagi-document-type\", value).addClass(\"ui-bizagi-document-extension\");\n      var returnType = self.returnCssTypeFile($(\"a > span\", value).html());\n      $(\".ui-bizagi-document-type\", value).addClass(returnType);\n    });\n  },\n\n  /**\r\n      * Method to correct the visualization of the link in the print mode.\r\n      * @param control\r\n      */\n  updateControlForPrintMode: function updateControlForPrintMode(control) {\n\n    //clear item that be dont render\n    $('.ui-bizagi-render-button', control).each(function () {\n      $(this).remove();\n    });\n\n    $('.ui-bizagi-div-error-container', control).each(function () {\n      $(this).remove();\n    });\n\n    $('.ui-bizagi-document-type', control).each(function () {\n      $(this).remove();\n    });\n\n    $('a', control).each(function () {\n      $(this).attr('target', '_blank').attr('title', $('span', this).html()).css('text-decoration', 'none');\n    });\n\n    $('ol', control).each(function () {\n      $(this).removeClass('ui-bizagi-container-documents');\n      $(this).addClass('ui-bizagi-container-documents-print');\n    });\n  },\n\n  /**\r\n      * Previews the document inside a dialog\r\n      * @param url\r\n      * @param filename\r\n      */\n  showDocumentPreview: function showDocumentPreview(url, filename) {\n    navigator.sayswho = function () {\n      var N = navigator.appName,ua = navigator.userAgent,tem;\n      var M = ua.match(/(opera|chrome|safari|firefox|msie)\\/?\\s*(\\.?\\d+(\\.\\d+)*)/i);\n      if (M && (tem = ua.match(/version\\/([\\.\\d]+)/i)) != null) M[2] = tem[1];\n      M = M ? [M[1], M[2]] : [N, navigator.appVersion, '-?'];\n\n      return M;\n    }();\n\n    var self = this;\n    var dialogBox = $(\"<div style='overflow:hidden;'></div>\");\n\n    dialogBox.empty();\n    dialogBox.appendTo(\"body\", window.document);\n\n    // Create embed object\n    var template = !$.browser.mozilla && !$.browser.msie ?\n    self.renderFactory.getTemplate(\"document-item-preview\") :\n    self.renderFactory.getTemplate(\"document-item-preview-object\");\n\n    dialogBox.append($.fasttmpl(template, {\n      url: url }));\n\n\n    // Create dialog buttons\n    var buttons = {};\n    buttons[self.getResource(\"confirmation-box-ok\")] = function () {\n      // No longer need to read the blob so it's revoked\n      !bizagi.util.isIE() ? window.URL.revokeObjectURL(url) : \"\";\n      dialogBox.dialog('destroy');\n      dialogBox.remove();\n    };\n\n    if (navigator.sayswho[0] !== \"Firefox\") {\n      buttons[self.getResource(\"render-actions-print\")] = function () {\n        // Print the document\n        var count = 0;\n        var printFn = function printFn(pdf) {\n          //Wait until PDF is ready to print    \n          if (!document.getElementById('ui-bizagi-document-pdf-preview') && count < 5) {\n            count += 1;\n            var timeoutPrint = setTimeout(function () {\n              printFn(pdf);\n              clearTimeout(timeoutPrint);\n            }, 1000);\n          } else {\n            if (!$.browser.mozilla && !$.browser.msie) {\n              document.getElementById('ui-bizagi-document-pdf-preview').focus();\n              document.getElementById('ui-bizagi-document-pdf-preview').contentWindow.print();\n            } else {\n              $(\".ui-bizagi-document-pdf-preview\").focus();\n              $(\".ui-bizagi-document-pdf-preview\")[0].print();\n            }\n          }\n        };\n        printFn($(\"#ui-bizagi-document-pdf-preview\", dialogBox)[0]);\n      };\n    }\n\n    // Create dialog\n    dialogBox.dialog({\n      width: 800,\n      height: 600,\n      title: filename,\n      maximized: false,\n      modal: true,\n      buttons: buttons,\n      close: function close() {\n        // No longer need to read the blob so it's revoked\n        !bizagi.util.isIE() ? window.URL.revokeObjectURL(url) : \"\";\n        dialogBox.dialog('destroy');\n        dialogBox.remove();\n      } });\n\n\n  },\n\n  /**\r\n      * Redraw documents when needed\r\n      * @param documents\r\n      * @param noFiles\r\n      * @param downloadAllDocuments\r\n      */\n  redrawDocuments: function redrawDocuments(documents, noFiles, downloadAllDocuments) {\n    this._super(documents, noFiles, downloadAllDocuments);\n\n    // Add icons\n    this.applyDocumentTemplatesFormat();\n  },\n\n  /**\r\n      * Shows the document if the flag is set.\r\n      */\n  autoOpenDocuments: function autoOpenDocuments() {\n    var self = this;\n    var properties = self.properties;\n    var control = self.getControl();\n\n    if (properties.autoOpen) {\n      if (properties.downloadalldocuments) {\n        //Show only the joined document\n        var joinedDocument = $(\".ui-bizagi-document-upload-item[data-joined=true]\", control);\n\n        if (joinedDocument && joinedDocument.length === 1) {\n          var fileName = joinedDocument.attr(\"data-filename\");\n\n          self.getAllDocumentFiles({ filename: fileName }).then(function (blobFile) {\n            var fileURL = bizagi.util.isIE() ? joinedDocument.attr(\"data-url\") + \"&h_disposition=inline\" : window.URL.createObjectURL(blobFile);\n\n            self.showDocumentPreview(fileURL, fileName);\n\n            // No longer need to read the blob so it's revoked\n            !bizagi.util.isIE() ? window.URL.revokeObjectURL(fileURL) : \"\";\n          }).fail(function (error) {\n            var form = self.getFormContainer();\n            form && form.failHandler(error);\n          });\n        }\n      } else {\n        // Auto-open documents if flag is set\n        $.each($(\".ui-bizagi-document-upload-item\", control), function () {\n          var $item = $(this).data();\n          var fileName = $item.filename;\n\n          // show only preview for files that are pdf\n          var extension = fileName.substr(fileName.lastIndexOf('.') + 1);\n\n          if (extension.toUpperCase() === \"PDF\" && !$item.joined) {\n            self.getDocumentFile($item).then(function (blobFile) {\n              var fileURL = bizagi.util.isIE() ? $item.url + \"&h_disposition=inline\" : window.URL.createObjectURL(blobFile);\n              self.showDocumentPreview(fileURL, fileName);\n            }).fail(function (error) {\n              var form = self.getFormContainer();\n              form && form.failHandler(error);\n            });\n          }\n        });\n      }\n    }\n  } });","/**\r\n *   Name: BizAgi Render Image\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the image render class to adjust to desktop devices\r\n */\n\n// Extends from render Desktop base\nbizagi.rendering.desktop.render.extend(\"bizagi.rendering.desktop.image\", {\n  // Statics\n  BA_ACTION_PARAMETER_PREFIX: bizagi.render.services.service.BA_ACTION_PARAMETER_PREFIX,\n  BA_CONTEXT_PARAMETER_PREFIX: bizagi.render.services.service.BA_CONTEXT_PARAMETER_PREFIX,\n  BA_PAGE_CACHE: bizagi.render.services.service.BA_PAGE_CACHE },\nbizagi.rendering.image.prototype);\n\n// Extends itself\nbizagi.rendering.desktop.image.extend(\"bizagi.rendering.desktop.image\", {}, {\n\n  /**\r\n                                                                               * Update or init the element data\r\n                                                                               * @param data\r\n                                                                               */\n  initializeData: function initializeData(data) {\n    // Call base\n    this._super(data);\n\n    // Allow to get the thumbnail image on desktop devices\n    this.properties.forceBase64 = true;\n    this.properties.value = this.properties.value || [];\n  },\n\n  /**\r\n      * Template method to implement in each device to customize each render after processed\r\n      */\n  postRender: function postRender() {\n    var self = this;\n    var control = self.getControl();\n    var properties = self.properties;\n    var mode = self.getMode();\n    var template = self.renderFactory.getTemplate(\"images\");\n    var containerHeight;\n    var imgWidth = self.properties.width;\n    var imgHeight = self.properties.height;\n\n    // Flash to define flash version\n    self.properties.flashVersion = false;\n\n    // Render template\n    var html = $.fasttmpl(template, {\n      xpath: bizagi.util.encodeXpath(self.getUploadXpath()),\n      editable: properties.editable,\n      url: self.properties.url,\n      allowDelete: properties.allowDelete,\n      mode: mode });\n\n\n    $(\".image-wrapper\", control).empty().append(html);\n\n    //If is not any image include, load the default properties of the controls\n    if (mode === \"design\" || mode === \"layout\" || self.properties.url.length === 0) {\n\n      var timeoutDefaultProperties = setTimeout(function () {\n        if (imgHeight === \"auto\") {\n\n          // if null means that container is the form\n          if (self.parent.properties.type === \"grid\") {\n            containerHeight = $(control).height() + \"px\";\n            bizagi.util.cssExtended($(\".image-wrapper\", control), 'width:100%!important');\n          } else {\n            var parent = self.parent.properties.type === \"panel\" ? self.parent.parent : self.parent;\n            var height = control.height();\n\n            containerHeight = parent.container.height() - 17;\n\n            var containerChildsSize = self.parent.getChildreCount();\n            var containerChildsHeightSum = self.parent.getChildrenSumHeight(\"image\");\n\n            if (typeof self.getFormContainer().properties !== \"undefined\" &&\n            self.parent.properties.id == self.getFormContainer().properties.id) {\n              containerHeight = 50;\n            } else if (containerChildsSize > 1) {\n              containerHeight = containerHeight - (containerChildsHeightSum - height);\n            }\n\n            $(\".image-wrapper\", control).height(containerHeight);\n          }\n\n          imgHeight = containerHeight;\n\n        }\n\n        $('a', control).css({ width: imgWidth, height: imgHeight });\n\n        $(\".resizable_img\", control).css({ width: imgWidth, height: imgHeight });\n        clearTimeout(timeoutDefaultProperties);\n      }, 150);\n\n      if ($(\".resizable_img\", control).hasClass('background-image')) {\n        //Creates an image node to store the sample image, and resize it to the control required dimensions\n\n        // Image url pattern\n        var pattern = /url\\(|\\)|\"|'/g;\n        var baseImageURL = $(\".resizable_img\", control).css('background-image').replace(pattern, \"\");\n\n        // Creates the image node with the base image URL\n        var resizableImgNode = $('<img src=' + baseImageURL + '>');\n\n        resizableImgNode.css({ width: imgWidth, height: imgHeight });\n\n        // Append the created node\n        $(\".resizable_img\", control).append(resizableImgNode);\n\n        //Reset the styles, and make room to the created image node\n        $(\".resizable_img\", control).css({\n          'background-image': 'none',\n          'border-top-width': '0',\n          'border-left-width': '0',\n          'border-right-width': '0',\n          'border-down-width': '0',\n          'padding': '0',\n          'display': 'inline-block' });\n\n      }\n\n      // Otherwise, set the styles to adjust the image in the center, regardless his dimesions\n    } else {\n      var isImageGreaterThanContainer = false;\n      var controlWidth = control.width();\n\n      var timeoutAdjustImage = setTimeout(function () {\n        var isAuto = self.properties.isAutoWidth;\n\n        if (isAuto && self.parent.properties.type === \"grid\") {\n          var $imgWidth = $(\".img\", control).width();\n          if ($imgWidth < controlWidth && 0 < $imgWidth) {\n            imgWidth = $imgWidth;\n          } else if ($imgWidth >= controlWidth) {\n            imgWidth = controlWidth - 20;\n            isImageGreaterThanContainer = true;\n          }\n\n          $('a', control).css({ height: \"auto\" });\n        } else {\n          $('a', control).css({ width: imgWidth, height: \"auto\" });\n        }\n\n        $(\".img, .ui-bizagi-render-image-wrapper .image-file\", control).\n        css({ width: imgWidth, height: \"auto\" });\n        $(\".ui-bizagi-render-upload-wrapper\", control).addClass(\"uploaded\");\n\n        var wSize = 48;\n        if ((self.properties.width + \"\").indexOf(\"px\") !== -1) {\n          wSize = (self.properties.width + \"\").replace(\"px\", \"\");\n        }\n\n        $(\".ui-bizagi-render-image-wrapper .image-file\", control).addClass('w-size-' + wSize);\n        $(\"img\", control).css(\"width\", imgWidth);\n        $(\"img\", control).css(\"height\", \"auto\");\n\n\n        if (isAuto && Number($('a', control).css(\"width\").slice(0, -2)) >\n        Number($(\".img\", control).css(\"width\").slice(0, -2))) {\n          $('a', control).css({ width: $(\".img\", control).css(\"width\") });\n        }\n\n        if (isAuto && isImageGreaterThanContainer && self.parent.properties.type === \"grid\") {\n          $('a', control).closest(\".ui-bizagi-render\").css(\"text-align\", \"left\");\n        }\n        clearTimeout(timeoutAdjustImage);\n      }, 50);\n    }\n\n    self.preventDefaultForAnchorTag();\n\n    // Resolve a deferred after the postRender\n    if (self.isPostRendered) self.isPostRendered.resolve();\n\n  },\n\n  /**\r\n      * isReadyToSave\r\n      * @returns {*}\r\n      */\n  isReadyToSave: function isReadyToSave() {\n    return this.ready();\n  },\n\n  /**\r\n      * Template method to implement in each device to customize the render's behaviour to add handlers\r\n      */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    var control = self.getControl();\n    var properties = self.properties;\n\n    // Call base\n    self._super();\n\n    self.deleteHandler();\n\n    $(\".ui-bizagi-render-image-wrapper\", control).bizagiUpload({\n      renderReference: this,\n      dialogTemplate: self.renderFactory.getTemplate(\"image-dialog\"),\n      properties: {\n        scriptData: self.buildAddParams(),\n        url: properties.addUrl,\n        xpath: properties.xpath,\n        validExtensions: properties.validExtensions,\n        maxSize: properties.maxSize },\n\n      onUploadFileCompletedCallback: self.onUploadFileCompleted,\n      dialogTitle: self.getResource(\"render-upload-link-label\") });\n\n\n    // Bind handlers\n    //  * Item Mouse over\n    control.delegate(\".ui-bizagi-render-upload-item\", \"mouseover\", function () {\n      var item = $(this);\n      $(\".ui-bizagi-render-upload-icon\", item).css(\"display\", \"inline-block\");\n      item.removeClass(\"ui-state-default\").addClass(\"ui-state-hover\");\n    });\n\n    //  * Item Mouse out\n    control.delegate(\".ui-bizagi-render-upload-item\", \"mouseout\", function () {\n      var item = $(this);\n      $(\".ui-bizagi-render-upload-icon\", item).css(\"display\", \"none\");\n      item.addClass(\"ui-state-default\").removeClass(\"ui-state-hover\");\n    });\n\n  },\n\n  deleteHandler: function deleteHandler() {\n    var self = this;\n    var control = self.getControl();\n\n\n    $(\".delete-button\", control).bind(\"click\", function (e) {\n      e.stopPropagation();\n      self.deleteImage();\n    });\n  },\n\n  /**\r\n      * Remove the current image\r\n      */\n  deleteImage: function deleteImage() {\n    var self = this;\n    var properties = self.properties;\n\n    return self.dataService.deleteImage({\n      url: properties.deleteUrl,\n      idRender: properties.id,\n      xpath: properties.xpath,\n      xpathContext: properties.xpathContext,\n      idPageCache: properties.idPageCache,\n      contexttype: properties.contexttype }).\n    done(function () {\n      self.properties.value = [];\n      self.refreshControl();\n    });\n  },\n\n  /**\r\n      * Template method to implement in each device to customize the render's behaviour when rendering in design mode\r\n      */\n  configureDesignView: function configureDesignView() {\n    var self = this;\n    var control = self.getControl();\n\n    // Call base\n    self._super();\n\n    $(\"*:not(.ui-bizagi-render-control-required)\", control).css({\n      padding: \"0px\",\n      margin: \"0px\",\n      border: \"0px\",\n      'line-height': '0px',\n      position: 'relative',\n      display: 'inline-block',\n      top: '0' });\n\n\n    $(\".image-file\", control).css({ width: self.properties.width, height: self.properties.height });\n  },\n\n  renderReadOnly: function renderReadOnly() {\n    return this.renderControl();\n  },\n  /**\r\n      * Template method to implement in each device to customize each render after processed in read-only mode\r\n      */\n  postRenderReadOnly: function postRenderReadOnly() {\n    var self = this;\n    var control = self.getControl();\n    var template = self.renderFactory.getTemplate(\"images\");\n    var mode = self.getMode();\n\n    // Render template\n    var html = $.fasttmpl(template, {\n      xpath: bizagi.util.encodeXpath(self.getUploadXpath()),\n      editable: false,\n      url: self.properties.url,\n      allowDelete: false,\n      mode: mode });\n\n\n    $(\".ui-bizagi-render-upload-wrapper\", control).empty().append(html);\n\n    $(\"a,.img, .ui-bizagi-render-image-wrapper .image-file, .ui-bizagi-render-image-wrapper\", control).css({\n      width: self.properties.width,\n      height: self.properties.height });\n\n  },\n\n  getTemplateItem: function getTemplateItem() {\n    return this.renderFactory.getTemplate(\"image-item\");\n  },\n\n  /**\r\n      * Opens a dialog in order to upload file per file\r\n      */\n  openUploadDialog: function openUploadDialog() {\n    var self = this;\n    var properties = self.properties;\n    var doc = window.document;\n\n    var dialogBox = self.dialogBox = $(\"<div class='ui-bizagi-component-loading'/>\");\n    dialogBox.empty();\n    dialogBox.appendTo(\"body\", doc);\n\n    // Define buttons\n    var buttons = {};\n\n    // Select button\n    buttons[self.getResource(\"render-upload-dialog-select\")] = function () {\n      if (self.checkMaxSize() && self.checkFileTypes()) {\n        $.when(self.processUploadFile()).done(function (data) {\n          self.onUploadFileCompleted(data);\n          self.closeUploadDialog();\n        });\n      }\n    };\n\n    // Cancel button\n    buttons[self.getResource(\"text-cancel\")] = function () {\n      self.closeUploadDialog();\n    };\n\n    // Creates a dialog\n    dialogBox.dialog({\n      width: 500,\n      height: 200,\n      title: self.getResource(\"render-upload-link-label\"),\n      modal: true,\n      buttons: buttons,\n      close: function close() {\n        self.closeUploadDialog();\n      },\n      resizeStop: function resizeStop(event, ui) {\n        if (self.form) {\n          self.form.resize(ui.size);\n        }\n      } });\n\n\n    // Render template\n    var dialogTemplate = self.renderFactory.getTemplate(\"image-dialog\");\n    $.tmpl(dialogTemplate, {\n      scriptData: self.buildAddParams(),\n      url: properties.addUrl,\n      xpath: properties.xpath,\n      validExtensions: properties.validExtensions.replace(\";\", \",\"),\n      maxSize: properties.maxSize }).\n    appendTo(dialogBox);\n    $('.ui-bizagi-loading-message').remove();\n\n  },\n\n  /**\r\n      * Close the upload dialog\r\n      */\n  closeUploadDialog: function closeUploadDialog() {\n    var self = this;\n    self.dialogBox.dialog('destroy');\n    self.dialogBox.remove();\n  },\n\n  /**\r\n      * Handler to process server response after a file has been uploaded\r\n      * @param renderReference\r\n      * @param response\r\n      */\n  onUploadFileCompleted: function onUploadFileCompleted(renderReference, response) {\n    var self = renderReference;\n    var control = self.getControl();\n    var imageWrapper = $(\".ui-bizagi-render-image-wrapper\", control);\n    var result = JSON.parse(response);\n    var imgWidth = 0;\n    var controlWidth = control.width();\n    var isImageLoaded = control.find(\".img\").size() > 0;\n    var widthBase = control.find(\".resizable_img\").width();\n\n    if (self.properties.isAutoWidth) {\n      imgWidth = self.properties.type != \"image\" ? control.width() : \"99%\";\n    } else {\n      imgWidth = self.properties.width;\n    }\n\n    // Set width\n    $(\".uploadifyQueueItem\", control).css({ width: self.properties.width });\n\n    if (result.type !== \"error\") {\n      // Allow the update image\n      if (bizagi.util.isEmpty(self.properties.value))\n      self.properties.value = [[0, \"uploaded\"]];\n\n      $.when(self.renderUploadItem()).done(function (htmlImage) {\n        // Empty container and add new image\n        $(imageWrapper).empty();\n        $(imageWrapper).append(htmlImage);\n        self.deleteHandler();\n\n        // Trigger change\n        self.triggerRenderChange();\n\n        var timeoutAdjustContainer = setTimeout(function () {\n          var isImageGreaterThanContainer = false;\n          var isAuto = self.properties.isAutoWidth;\n\n          if (isAuto && self.parent.properties.type === \"grid\") {\n\n            if ($(\".img\", control).width() < controlWidth) {\n              imgWidth = $(\".img\", control).width();\n            } else if ($(\".img\", control).width() >= controlWidth) {\n              imgWidth = controlWidth - 20;\n              isImageGreaterThanContainer = true;\n            }\n\n            if (!isImageLoaded) {\n              $('a', control).closest(\"td\").css(\"width\", widthBase);\n            }\n\n            $('a', control).css({ height: \"auto\" });\n\n          } else {\n            $('a', control).css({ width: imgWidth, height: \"auto\" });\n          }\n\n          $(\".img, .ui-bizagi-render-image-wrapper .image-file\", control).\n          css({ width: imgWidth, height: \"auto\" });\n\n          $(\".ui-bizagi-render-upload-wrapper\", control).addClass(\"uploaded\");\n\n          var wSize = 48;\n          if ((self.properties.width + \"\").indexOf(\"px\") !== -1) {\n            wSize = (self.properties.width + \"\").replace(\"px\", \"\");\n          }\n\n          $(\".ui-bizagi-render-image-wrapper .image-file\", control).addClass('w-size-' + wSize);\n\n          $(\"img\", control).css(\"width\", imgWidth);\n          $(\"img\", control).css(\"height\", \"auto\");\n          $('.image-wrapper', control).css(\"height\", \"auto\");\n\n\n          if (isAuto && Number($('a', control).css(\"width\").slice(0, -2)) >\n          Number($(\".img\", control).css(\"width\").slice(0, -2))) {\n            $('a', control).css({ width: $(\".img\", control).css(\"width\") });\n          }\n\n          if (self.parent.properties.type === \"grid\" && isAuto) {\n            if (isImageGreaterThanContainer) {\n              $('a', control).closest(\".ui-bizagi-render\").css(\"text-align\", \"left\");\n            } else {\n              if (self.properties.columnAlign) {\n                $('a', control).closest(\".ui-bizagi-render\").\n                css(\"text-align\", self.properties.columnAlign);\n                $('.image-wrapper', control).css(\"text-align\", self.properties.columnAlign);\n              } else {\n                $('a', control).closest(\".ui-bizagi-render\").css(\"text-align\", \"center\");\n              }\n            }\n          }\n          clearTimeout(timeoutAdjustContainer);\n        }, 50);\n\n      });\n    } else {\n      // Show server error\n      if (!result.isMaintenanceWindow) bizagi.showMessageBox(result.message);\n    }\n  },\n\n  /**\r\n      * Build add params to send to the server\r\n      * @returns {Array}\r\n      */\n  buildAddParams: function buildAddParams() {\n    var self = this;\n    var properties = self.properties;\n    var form = self.getFormContainer();\n\n    var data = [];\n    var action = \"savefile\";\n\n    if (properties.isUserPreference) {\n      action = \"SAVEUSERIMAGE\";\n      data.push({ key: self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\", value: \"entity\" });\n      data.push({ key: self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"surrogateKey\", value: self.currentUser });\n    }\n\n    data.push({ key: self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\", value: self.getUploadXpath() });\n    data.push({ key: self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\", value: properties.id });\n    data.push({ key: self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\", value: properties.xpathContext });\n    data.push({\n      key: self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE,\n      value: properties.idPageCache });\n\n    data.push({ key: self.Class.BA_ACTION_PARAMETER_PREFIX + \"sessionId\", value: form.properties.sessionId });\n    data.push({ key: self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\", value: action });\n\n    if (properties.contexttype) {\n      data.push({ key: self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\", value: properties.contexttype });\n    }\n\n    try {\n      if (typeof BIZAGI_SESSION_NAME !== \"undefined\") {\n        data.push({ key: BIZAGI_SESSION_NAME, value: form.properties.sessionId });\n      } else {\n        data.push({ key: \"JSESSIONID\", value: form.properties.sessionId });\n      }\n    } catch (e) {\n      data.push({ key: \"JSESSIONID\", value: form.properties.sessionId });\n    }\n\n    return data;\n  },\n\n  checkMaxSize: function checkMaxSize() {\n    var self = this;\n    var properties = self.properties;\n    var dialogBox = self.dialogBox;\n    var fileControl = $(\"input[type=file]\", dialogBox).get(0) || {};\n\n    // Dont exist any fucking way to know file size in IEx, just skip this validation\n    if (fileControl.files != undefined) {\n      if (fileControl.files.length > 0) {\n        if (fileControl.files[0].size > properties.maxSize) {\n          self.showError(self.getResource(\"render-upload-alert-maxsize\").replace(\"{0}\", properties.maxSize));\n          return false;\n        }\n        return true;\n      } else {\n        self.showError(self.getResource(\"render-required-upload\").replace(\"#label#\", \"\"));\n        return false;\n      }\n    } else {\n      if (bizagi.util.isIE()) {\n        if (fileControl.value === \"\" || !fileControl.value) {\n          self.showError(self.getResource(\"render-required-upload\").replace(\"#label#\", \"\"));\n          return false;\n        } else {\n          return true;\n        }\n      } else {\n        return true;\n      }\n    }\n  },\n\n  checkFileTypes: function checkFileTypes() {\n    var self = this;\n    var properties = self.properties;\n    var dialogBox = self.dialogBox;\n    var file = $(\"input[type=file]\", dialogBox).val();\n\n    if (properties.validExtensions && properties.validExtensions.length > 0) {\n      var validExtensions = properties.validExtensions.replaceAll(\"*.\", \"\").split(\";\");\n      if (!self.stringEndsWithValidExtension(file, validExtensions, true)) {\n        self.showError(self.getResource(\"render-upload-allowed-extensions\") + properties.validExtensions);\n        return false;\n      }\n    }\n    return true;\n  },\n\n  stringEndsWithValidExtension: function stringEndsWithValidExtension(stringToCheck, acceptableExtensionsArray, required) {\n    if (required == false && stringToCheck.length == 0) return true;\n\n    for (var i = 0; i < acceptableExtensionsArray.length; i++) {\n      if (acceptableExtensionsArray[i].toLowerCase() == \"*\") return true;\n      if (stringToCheck.toLowerCase().endsWith(acceptableExtensionsArray[i].toLowerCase())) return true;\n    }\n\n    return false;\n  },\n\n  showError: function showError(message) {\n    var self = this;\n    var errorContainer = $(\"#alert-file-upload\", self.dialogBox);\n\n    // Empty container\n    errorContainer.empty();\n    errorContainer.show();\n\n    errorContainer.html(message);\n  },\n\n  changeRequired: function changeRequired(argument) {\n    this.properties.required = argument;\n    this.changeRequiredLabel(argument);\n  },\n\n  changeRequiredLabel: function changeRequiredLabel(argument) {\n    var control = this.getControl();\n\n    if (control.length > 0) {\n      if (this.getMode() !== \"execution\") {\n        if (bizagi.util.parseBoolean(argument) == true && this.properties.editable) {\n          control.addClass(\"control-required\");\n        } else {\n          control.removeClass(\"control-required\");\n        }\n      } else {\n        if (bizagi.util.parseBoolean(argument) == true && !this.hasValue() && this.properties.editable) {\n          control.addClass(\"control-required\");\n        } else {\n          control.removeClass(\"control-required\");\n        }\n      }\n    }\n\n    this.triggerRenderValidate();\n  },\n\n  changeCellRequired: function changeCellRequired(argument) {\n    this.changeRequired(argument);\n  },\n\n  /**\r\n      * Process an upload file into the server\r\n      * @returns {*}\r\n      */\n  processUploadFile: function processUploadFile() {\n    var self = this;\n    var defer = new $.Deferred();\n    var dialogBox = self.dialogBox;\n    var uploadForm = $(\"form\", dialogBox);\n    var uploadIFrame = $(\"iframe\", uploadForm);\n\n    // When the iframe loads the user we need to evaluate the response and close the dialog\n    var timeoutFn = function timeoutFn() {\n      try {\n        var response = \"\";\n        if (uploadIFrame[0].contentWindow) {\n          var iframeContent = bizagi.util.isIE8() ? $(uploadIFrame[0].contentWindow.document.body) :\n          $(uploadIFrame[0].contentWindow.eval(\"document.body\"));\n\n          response = iframeContent.text();\n        }\n        if (response.length > 0) {\n          defer.resolve(response);\n        } else {\n          var timeoutForFn = setTimeout(function () {\n            timeoutFn();\n            clearTimeout(timeoutForFn);\n          }, 50);\n        }\n      } catch (error) {\n        // Nothing to do, just close the window and show error message\n        self.closeUploadDialog();\n        bizagi.showMessageBox(error.toString());\n      }\n    };\n\n    // Execute the timed function in order to check when the response has arrived\n    timeoutFn();\n\n    // Submit the form\n    uploadForm.submit();\n\n    return defer.promise();\n  },\n\n  /**\r\n      * Cleans current value\r\n      */\n  cleanData: function cleanData() {\n    if (!this.hasValue()) return;\n    return $.when(this.deleteImage());\n  } });","/*\r\n *   Name: Bizagi Desktop Render Yes-No Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the Yes-No render class to adjust to desktop devices\r\n */\n\n// Extends from render Desktop base\nbizagi.rendering.desktop.render.extend(\"bizagi.rendering.desktop.searchList\", bizagi.rendering.searchList.prototype);\n// Extends itself\nbizagi.rendering.desktop.searchList.extend(\"bizagi.rendering.desktop.searchList\", {\n  SEARCH_MIN_LENGTH: 2 },\n{\n\n  /**\r\n   * Template method to implement in each device to customize each render after processed\r\n   * @returns {}\r\n   */\n  postRender: function postRender() {\n    var self = this;\n    var control = self.getControl();\n\n    // Call base \n    self._super();\n\n    // Apply plugin\n    self.searchInput = $(\"input\", control);\n    $(control).find(\"input\").css({ \"width\": \"100%\", \"padding-right\": \"25px\" });\n\n    self.applyAutocompletePlugin();\n    self.attachKeyEvents();\n  },\n\n  /**\r\n      * Attaches key events to the control\r\n      * @returns {}\r\n      */\n  attachKeyEvents: function attachKeyEvents() {\n    var self = this;\n\n    self.element.keydown(function (e) {\n      e = window.event || e;\n      var keyUnicode = e.charCode || e.keyCode;\n\n      if (e !== undefined) {\n        switch (keyUnicode) {\n          case 8: // Backspace\n            var caretPos = $(\"input:first\", self.element)[0].selectionStart;\n\n            if (caretPos === 0) {\n              self.removeLastElement();\n              $(\"li:nth-last-child(2)\", self.element).remove();\n              $(\".biz-render-input-search\", self.getControl()).focus();\n            }\n\n            break;}\n\n      }\n    });\n  },\n\n  /**\r\n      * Apply autocomplete capabilities to a single input\r\n      * @returns {}\r\n      */\n  applyAutocompletePlugin: function applyAutocompletePlugin() {\n    var self = this;\n    var control = self.getControl();\n    var searchInput = self.searchInput;\n\n    searchInput.autocomplete({\n      autoFocus: true,\n      messages: {\n        noResults: null, //\"No search results.\",\n        results: function results() {\n        } },\n\n      source: function source(req, add) {\n        // active search\n        self.activeRequestTerm = req.term;\n\n        // Check local storage\n        var now = new Date().getTime();\n        var parseRequest = encodeURIComponent(req.term);\n        var expireKey = self.properties.xpath + \"_\" + parseRequest + \"_expire\";\n        var requestKey = self.properties.xpath + \"_\" + parseRequest;\n        var expire = bizagi.util.getItemLocalStorage(expireKey);\n\n        if (expire && self.properties.enableLocalStorage && now < expire) {\n          try {\n            var data = JSON.parse(bizagi.util.getItemLocalStorage(requestKey));\n            add(data);\n            self.hideAutocompleteLoading();\n          } catch (e) {\n            self.processRequest(req, add);\n          }\n        } else {\n          self.processRequest(req, add);\n        }\n      },\n      select: function select(event, ui) {\n        var selectedValues = JSON.parse(self.getValue()).value;\n        var isNewItem = true;\n        if (typeof ui.item.id == \"undefined\") {\n          isNewItem = false;\n        } else {\n          $.each(selectedValues, function (i, val) {\n            if (ui.item.id == val.id) {\n              isNewItem = false;\n              return isNewItem;\n            }\n          });\n        }\n\n        if (isNewItem) {\n          self.appendFoundItem(event, ui);\n          self.changeRequired(false);\n        }\n\n        searchInput.autocomplete('close');\n        ui.item.value = \"\";\n      },\n      open: function open() {\n        var suggestMenu = searchInput.data(\"ui-autocomplete\").menu.element;\n        var suggestStyles = { top: 0, left: 0 };\n        var suggestContainer = searchInput.closest(\".ui-bizagi-control\");\n        var controlContainer = suggestContainer.parent();\n        var itemWidth = self.calculateSuggestionWidth();\n\n        $('li', suggestMenu).each(function () {\n          if ($(this).index() % 2 < 1)\n          $(this).addClass('biz-ui-even');\n        });\n\n        // Fix position to prevent the scroll of autocomplete\n        suggestMenu.css(suggestStyles);\n        suggestContainer.addClass(\"ac-is-visible\");\n        controlContainer.addClass(\"ac-is-visible ac-clear-floats\");\n\n        suggestMenu.appendTo(suggestContainer).position({\n          my: \"left top\",\n          at: \"left bottom\",\n          of: this,\n          collision: \"flipfit\" });\n\n\n        suggestMenu.css(\"z-index\", $.getMaxZindex() + 10);\n\n        // Add data to check if element is visible\n        suggestMenu.attr(\"visible\", true);\n\n        // Apply width to menu and items\n        $(\".ui-bizagi-render-search-item\", suggestMenu).width(itemWidth);\n        suggestMenu.width(itemWidth);\n        self.hideAutocompleteLoading();\n\n      },\n      close: function close() {\n        searchInput.data(\"ui-autocomplete\").menu.element.attr(\"visible\", false);\n      },\n      delay: this.Class.SEARCH_DELAY,\n      minLength: self.Class.SEARCH_MIN_LENGTH });\n\n\n\n    // Special rendering\n    searchInput.data(\"ui-autocomplete\")._renderItem = function (ul, item) {\n      // Normal rendering\n      return self.renderSearchItem(item).appendTo(ul);\n    };\n\n    // Set close event\n    $('[data-action=remove]', control).click(function () {\n      self.deleteItem($(this));\n    });\n  },\n\n  /**\r\n      * Append matched element\r\n      * @param {} event\r\n      * @param {} ui\r\n      * @returns {}\r\n      */\n  appendFoundItem: function appendFoundItem(event, ui) {\n    var self = this;\n    var control = this.getControl();\n    var ul = $('.biz-render-input-search', control).closest('ul');\n    var last = $('li:last', ul);\n    var newElement;\n\n    // Format additional label\n    ui.item.value = self.formatItem(ui.item.value);\n\n    var element = self.renderFactory.getTemplate(\"searchListTag\");\n\n    newElement = $.fasttmpl(element,\n    {\n      id: ui.item.id,\n      value: ui.item.value,\n      editable: true },\n\n    {\n      formatItem: self.formatItem });\n\n\n    // Append new li with match word\n    $(last).before(newElement);\n\n    // Set close event\n    $('[data-action=remove]', ul).click(function () {\n      self.deleteItem($(this));\n    });\n\n    // Set selected flag\n    $('.biz-render-input-search', control).data('selected', '1');\n\n    // Set focus on input field\n    $('.biz-render-input-search', control).focus();\n\n    // Remove selected css class from all elements\n    $('li', ul).removeClass('selected');\n\n    // Set value\n    this.addElement({ id: ui.item.id, value: ui.item.value });\n\n  },\n\n  deleteItem: function deleteItem(element) {\n    var self = this;\n    var control = self.getControl();\n    var li = element.parent('.bz-pill');\n\n    // Remove from main memory and set the new value\n    this.removeElement({ id: li.data('id') });\n\n    // Remove list element\n    li.remove();\n\n    //Changing required label\n    var list = JSON.parse(this.value);\n    if (list.value.length === 0)\n    self.changeRequired(self.properties.required);\n\n    // Set focus on input element\n    $('.biz-render-input-search', control).focus();\n  },\n\n  /* \r\n      *   Renders a search item\r\n      */\n  renderSearchItem: function renderSearchItem(item) {\n    var self = this;\n    var properties = self.properties;\n    var template = self.renderFactory.getTemplate(\"searchItem\");\n\n    var searchItem = $.tmpl(template, {\n      image: properties.searchImage,\n      label: item.label,\n      orientation: self.properties.orientation || \"lrt\" });\n\n\n    searchItem.data(\"item.autocomplete\", item);\n\n    return searchItem;\n  },\n\n  /* \r\n      *   Process the request data for the autocomplete control\r\n      */\n  processRequest: function processRequest(req, add) {\n    var self = this;\n    var properties = self.properties;\n\n    self.showAutocompleteLoading();\n    // Create array for response objects\n    var suggestions = [];\n\n    if (req.term.length >= this.Class.SEARCH_MIN_LENGTH) {\n\n      // Update term property to reflect the search\n      properties.term = req.term;\n      $.when(this.getData()).done(function (data) {\n        data = data.slice(0, properties.maxRecords);\n\n        if (data.length > 50) {\n          data = data.slice(0, 50);\n\n          suggestions.push({\n            id: self.Class.NO_RESULTS_SEARCH_ID,\n            label: self.getResource(\"render-search-maximum-records-allowed\"),\n            value: '' });\n\n        } else data = data.slice(0, properties.maxRecords);\n        if (data && data.length > 0) {\n          $.each(data, function (i, val) {\n            if (properties.maxRecords == 0 || i < properties.maxRecords) {\n              var parseValue = bizagi.util.performTermMatches(val.value, req.term);\n\n              suggestions.push({ id: val.id, label: parseValue, value: val.value });\n            }\n          });\n        } else {\n          suggestions.push({\n            id: self.Class.NO_RESULTS_SEARCH_ID,\n            label: self.getResource(\"render-grid-no-records\"),\n            value: '' });\n\n        }\n\n        addToSuggestions(suggestions, req.term);\n\n        self.hideAutocompleteLoading();\n\n        /*\r\n                                         *   Method to add the special items to the suggestions\r\n                                         */\n        function addToSuggestions(allSuggestions, request) {\n\n          // Create local storage to improve the speed\n          var expireTime = new Date().getTime() + self.properties.expireCache;\n          var parseRequest = encodeURIComponent(request);\n\n          if (self.properties.enableLocalStorage) {\n            var expireKey = self.properties.xpath + \"_\" + parseRequest + \"_expire\";\n            var requestKey = self.properties.xpath + \"_\" + parseRequest;\n\n            bizagi.util.setItemLocalStorage(expireKey, expireTime);\n            bizagi.util.setItemLocalStorage(requestKey, JSON.encode(allSuggestions));\n          }\n          // Pass array to callback\n          add(allSuggestions);\n        }\n      });\n\n    }\n  },\n\n  showAutocompleteLoading: function showAutocompleteLoading() {\n    $('i', this.getControl()).addClass('ui-autocomplete-loading');\n  },\n\n  hideAutocompleteLoading: function hideAutocompleteLoading() {\n    $('i', this.getControl()).removeClass('ui-autocomplete-loading');\n  },\n  /**\r\n      * Returns the desired width for the suggestion menu\r\n      * @returns {}\r\n      */\n  calculateSuggestionWidth: function calculateSuggestionWidth() {\n    var self = this;\n    var suggestMenu = self.searchInput.data(\"ui-autocomplete\").menu.element;\n\n    return suggestMenu.width();\n  },\n\n  /**\r\n      * Sets the value in the rendered control\r\n      * @param {} value\r\n      * @returns {}\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    if (value !== undefined) {\n      if (this.properties.editable) {\n        this.searchInput.val(value.label);\n      }\n    }\n  },\n\n  /*\r\n      *   Returns the value to display, ex. non-editable renders\r\n      */\n  getDisplayValue: function getDisplayValue() {\n    return this.selectedValue;\n  },\n  /*\r\n      *   Method to render non editable values\r\n      */\n  postRenderReadOnly: function postRenderReadOnly() {\n    var self = this;\n    var control = self.getControl();\n    var properties = self.properties;\n\n    var stringValue = properties.value.map(function (el) {\n      return self.formatItem(el.value);\n    }).join(\", \");\n\n    var tempHTML = \"<label class='readonly-control'>${value}</label>\";\n    var templateWithValues = $.tmpl(tempHTML, { value: stringValue });\n\n    control.empty();\n    control.append(templateWithValues);\n  },\n\n  changeRequired: function changeRequired(argument) {\n    this.properties.required = argument;\n    this.changeRequiredLabel(argument);\n  },\n\n  changeRequiredLabel: function changeRequiredLabel(argument) {\n    var control = this.getControl();\n    if (control.length > 0) {\n      if (this.getMode() !== \"execution\") {\n        if (bizagi.util.parseBoolean(argument) === true && this.properties.editable) {\n          control.addClass(\"control-required\");\n        } else {\n          control.removeClass(\"control-required\");\n        }\n      } else {\n        if (bizagi.util.parseBoolean(argument) === true && !this.hasValue() && this.properties.editable) {\n          control.addClass(\"control-required\");\n        } else {\n          control.removeClass(\"control-required\");\n        }\n      }\n    }\n    this.triggerRenderValidate();\n  },\n  changeCellRequired: function changeCellRequired(argument) {\n    this.changeRequired(argument);\n  } });","/**\r\n *   Name: Bizagi Desktop Render Upload Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the upload render class in order to provide a compatibility to browsers without flash installed\r\n */\n\n// Extends from render base\nbizagi.rendering.desktop.render.extend(\"bizagi.rendering.desktop.upload\", bizagi.rendering.render.base.prototype);\n// Extends from render Desktop base\nbizagi.rendering.desktop.upload.extend(\"bizagi.rendering.desktop.upload\", {\n  // Statics\n  BA_ACTION_PARAMETER_PREFIX: bizagi.render.services.service.BA_ACTION_PARAMETER_PREFIX,\n  BA_CONTEXT_PARAMETER_PREFIX: bizagi.render.services.service.BA_CONTEXT_PARAMETER_PREFIX,\n  BA_PAGE_CACHE: bizagi.render.services.service.BA_PAGE_CACHE },\nbizagi.rendering.upload.prototype);\n\n// Extends itself\nbizagi.rendering.desktop.upload.extend(\"bizagi.rendering.desktop.upload\", {}, {\n\n  /**\r\n                                                                                 * Template method to implement in each children to customize each control\r\n                                                                                 * @returns {*|jQuery}\r\n                                                                                 */\n  renderControl: function renderControl() {\n    var self = this;\n    var properties = self.properties;\n    var template = self.renderFactory.getTemplate(\"upload\");\n\n    // Render template\n    var html = $.fasttmpl(template, {\n      xpath: bizagi.util.encodeXpath(self.getUploadXpath()),\n      editable: properties.editable,\n      haveFiles: self.filesCount != 0,\n      allowSendInMail: properties.allowSendInMail });\n\n\n    // Render current children\n    var items = \"\";\n    for (var i = 0; i < self.filesCount; i++) {\n      var file = { id: self.files[i][0], fileName: self.files[i][1] };\n      var item = self.renderUploadItem(file);\n      items += item;\n    }\n\n    html = self.replaceFilesHtml(html, items);\n    return html;\n  },\n\n  /**\r\n      * Returns the html templated element\r\n      * @returns {*}\r\n      */\n  renderElement: function renderElement() {\n    return this._super(\"render-base\");\n  },\n\n  /**\r\n      * Template method to implement in each device to customize each render after processed\r\n      */\n  postRender: function postRender() {\n    var self = this;\n\n    // Call base\n    self._super();\n\n    self.isClicked = false;\n    if (self.properties.allowSendInMail) self.bindEmailDialog();\n\n    self.checkMaxFiles();\n\n    self.preventDefaultForAnchorTag();\n  },\n\n  postRenderReadOnly: function postRenderReadOnly() {\n    var self = this;\n    self._super();\n\n    if (self.properties.allowSendInMail)\n    self.bindEmailDialog();\n  },\n\n  changeRequired: function changeRequired(argument) {\n    this.properties.required = argument;\n    this.changeRequiredLabel(argument);\n  },\n\n  changeRequiredLabel: function changeRequiredLabel(argument) {\n    var control = this.getControl();\n\n    if (control.length > 0) {\n      if (this.getMode() !== \"execution\") {\n        if (bizagi.util.parseBoolean(argument) === true && this.properties.editable) {\n          control.addClass(\"control-required\");\n        } else {\n          control.removeClass(\"control-required\");\n        }\n      } else {\n        if (bizagi.util.parseBoolean(argument) === true && !this.hasValue() && this.properties.editable) {\n          control.addClass(\"control-required\");\n        } else {\n          control.removeClass(\"control-required\");\n        }\n      }\n    }\n\n    this.triggerRenderValidate();\n  },\n\n  changeCellRequired: function changeCellRequired(argument) {\n    this.changeRequired(argument);\n  },\n\n  /**\r\n      * Adds a validation message to the render TODO:Remover al genomizar\r\n      * @param message\r\n      */\n  setValidationMessage: function setValidationMessage(message) {\n    this._super(message);\n    var iconError = $(\".ui-bizagi-render-icon-error\", this.element);\n    $(iconError).parent().removeClass(\"ui-hidden\");\n  },\n\n  /**\r\n      * Bind dialog for send email\r\n      */\n  bindEmailDialog: function bindEmailDialog() {\n    var self = this;\n    var control = self.getControl();\n    var xpathContext = self.getXpathContext() || \"\";\n    var xpath = self.properties.xpath;\n    var template = self.properties.orientation === \"rtl\" ? \"dialog-send-email-rtl\" : \"dialog-send-email\";\n\n    $(\".ui-bizagi-render-upload-sendmail\", control).bizagiSendEmail({\n      tmpl: self.renderFactory.getTemplate(template),\n      value: self.value,\n      self: self,\n      dataService: self.dataService,\n      properties: self.properties,\n      xpath: xpath,\n      xpathContext: xpathContext });\n\n\n  },\n\n  bindExternalPopup: function bindExternalPopup() {\n    var self = this;\n    var control = self.getControl();\n    var params = self.getParams();\n    var properties = self.properties;\n    var isInGrid = self.grid ? true : false;\n\n    var options = {\n      idCase: params.idCase || bizagi.context.idCase,\n      idWorkitem: params.idWorkitem || bizagi.context.idWorkitem,\n      field: properties.xpath.split(\".\")[properties.xpath.split(\".\").length - 1] };\n\n\n    var xpathContext = self.getXpathContext();\n    var xpath = properties.xpath;\n\n    if (isInGrid || xpathContext !== \"\") {\n      if (typeof xpathContext == \"string\") {\n        $.extend(options, { xPath: xpathContext.split(\"[\")[0] + \".\" + xpath });\n      } else {\n        $.extend(options, { xPath: self.grid.properties.xpath + \".\" + xpath });\n      }\n    } else {\n      $.extend(options, { xPath: xpath });\n    }\n\n    $(\".ui-bizagi-render-upload-sendmail\", control).tooltip();\n\n    $(\".ui-bizagi-render-upload-sendmail\", control).click(function () {\n      var url = \"App/Upload/SendAttachedDocs.aspx?\";\n      url += \"idCase=\" + options.idCase;\n      url += \"&idWorkitem=\" + options.idWorkitem;\n      url += \"&xPath=\" + options.xPath;\n      url += \"&field=\" + options.field;\n\n      self.dataService.getCaseNumber({\n        idCase: options.idCase }).\n      done(function (response) {\n        var caseNumber = response.caseNumber;\n        caseNumber = caseNumber ? caseNumber : options.idCase;\n        url += \"&radNumber=\" + caseNumber;\n\n        // fix for SUITE-8927\n        var values = [];\n        if (self.value) {\n          for (var i = 0; i < self.value.length; i++) {\n            values.push(self.value[i][1]);\n          }\n        }\n\n        self.currentPopup = \"genericiframe\";\n        $(document).triggerHandler(\"showDialogWidget\", {\n          widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_GENERICIFRAME,\n          widgetURL: url,\n          injectCss: [\".ui-bizagi-old-render*\", \".ui-bizagi-old-render-upload\"],\n          modalParameters: {\n            title: \"Send attached documents\",\n            id: \"sendEmail\" },\n\n          afterLoad: function afterLoad(params) {\n            var input = document.getElementById(\"btnClose\");\n            if (input) {\n              input.style.display = \"none\";\n            }\n            input = document.getElementById(\"btnCloseConfirm\");\n            if (input) {\n              input.style.display = \"none\";\n            }\n\n            // fix for SUITE-8927\n            if (params) {\n              if (params.values) {\n                var values = params.values;\n                var labels = document.getElementsByTagName(\"label\");\n                if (labels) {\n                  for (var i = 0; i < labels.length; i++) {\n                    var label = labels[i];\n                    // fix for SUITE-8927\n                    if (label.innerText !== undefined) {\n                      if (values.indexOf(label.innerText) === -1) {\n                        if (label.control) {\n                          label.control.checked = false;\n                          label.parentElement.style.display = \"none\";\n                        } else {\n                          label.previousSibling.checked = false;\n                          label.parentElement.style.display = \"none\";\n                        }\n\n                      }\n                    }\n                    if (label.textContent !== undefined) {\n                      if (values.indexOf(label.textContent) === -1) {\n                        if (label.control) {\n                          label.control.checked = false;\n                          label.parentElement.style.display = \"none\";\n                        } else {\n                          label.previousSibling.checked = false;\n                          label.parentElement.style.display = \"none\";\n                        }\n                      }\n                    }\n                  }\n                }\n              }\n            }\n          },\n          afterLoadParams: {\n            values: values } });\n\n\n      });\n\n    });\n\n  },\n\n  /**\r\n      * Template method to implement in each device to customize the render's behaviour to add handlers\r\n      */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    var control = self.getControl();\n    var properties = self.properties;\n    // Call base\n    self._super();\n\n    self.pluginUpload = $(\".ui-bizagi-render-upload-wrapper\", control).bizagiUpload({\n      renderReference: this,\n      dialogTemplate: self.renderFactory.getTemplate(\"upload.dialog\"),\n      properties: {\n        url: properties.addUrl,\n        xpath: this.getUploadXpath(),\n        idRender: properties.id,\n        xpathContext: self.getUploadXpathContext(),\n        idPageCache: properties.idPageCache,\n        idSession: properties.sessionId,\n        validExtensions: properties.validExtensions,\n        maxSize: properties.maxSize,\n        contexttype: properties.contexttype,\n        networkSpeed: networkSpeed() },\n\n      onUploadFileCompletedCallback: self.onUploadFileCompleted,\n      onChangeFile: self.onChangeFile,\n      onCheckMaxSize: self.checkMaxSize,\n      onValidate: self.validate,\n      maxAllowedFiles: properties.maxfiles,\n      uploadedFiles: self.filesCount,\n      dialogTitle: self.getResource(\"render-upload-link-label\") });\n\n\n    control.off(\"click\").on(\"click\", \".bz-file-name\", function (evt) {\n      evt.preventDefault();\n      var item = $(this).closest(\".ui-bizagi-render-upload-item\");\n      self.downloadFile(item.data());\n    });\n\n    control.on(\"click\", \".bz-btn-icn--delete\", function () {\n      var item = $(this).closest(\".ui-bizagi-render-upload-item\");\n      var file = item.data();\n      $.when(self.deleteUploadItem(item, file.id)).done(function () {\n        // Remove item\n        item.hide();\n\n        // Detach item\n        item.remove();\n\n        // Check maxFiles\n        self.checkMaxFiles();\n\n        //Set Value\n        self.setValue(self.files, false);\n\n        // Trigger change\n        self.triggerRenderChange();\n      });\n    });\n  },\n\n  configureHandlersReadOnly: function configureHandlersReadOnly() {\n    var self = this;\n    var control = self.getControl();\n    control.off(\"click\").on(\"click\", \".bz-file-name\", function (evt) {\n      var item = $(this).closest(\".ui-bizagi-render-upload-item\");\n      self.downloadFile(item.data());\n    });\n  },\n\n  /**\r\n      * Download file\r\n      * @param file\r\n      */\n  downloadFile: function downloadFile(file) {\n    var self = this;\n    var properties = self.properties;\n\n    self.dataService.getFile({\n      idRender: properties.id,\n      xpath: properties.xpath,\n      xpathContext: self.getXpathContext(),\n      idPageCache: properties.idPageCache,\n      fileId: file.id,\n      contexttype: properties.contexttype }).\n    then(function (response) {\n      return bizagi.util.handleJSONResponse(response);\n    }).then(function (blobFile) {\n      bizagi.util.downloadBlobFile(blobFile, file.filename);\n    }).fail(function (err) {\n      var form = self.getFormContainer();\n      form && form.failHandler(err);\n    });\n  },\n\n  /**\r\n      * Opens a dialog in order to upload file per file\r\n      */\n  openUploadDialog: function openUploadDialog() {\n    var self = this;\n    var properties = self.properties;\n    var doc = window.document;\n\n    // Reset Flag\n    self.isClicked = false;\n\n    var dialogBox = self.dialogBox = $(\"<div class='ui-bizagi-component-loading'/>\");\n    dialogBox.empty();\n    dialogBox.appendTo(\"body\", doc);\n\n    // Define buttons\n    var buttons = {};\n\n    // Select button\n    buttons[self.getResource(\"render-upload-dialog-select\")] = function (e) {\n      e.stopPropagation();\n      if (!self.isClicked) {\n        self.isClicked = true;\n        if (self.checkMaxSize() && self.checkFileTypes() && !self.maxFilesLimit()) {\n          $.when(self.processUploadFile()).done(function (data) {\n            self.onUploadFileCompleted(data);\n            self.closeUploadDialog();\n          });\n        } else {\n          self.isClicked = false;\n        }\n      }\n    };\n\n    // Cancel button\n    buttons[self.getResource(\"text-cancel\")] = function () {\n      self.closeUploadDialog();\n    };\n\n    // Creates a dialog\n    dialogBox.dialog({\n      width: 500,\n      height: 350,\n      title: self.getResource(\"render-upload-link-label\"),\n      modal: true,\n      buttons: buttons,\n      close: function close() {\n        self.closeUploadDialog();\n      },\n      resizeStop: function resizeStop(event, ui) {\n        if (self.form) {\n          self.form.resize(ui.size);\n        }\n      } });\n\n\n    // Render template\n    var dialogTemplate = self.renderFactory.getTemplate(\"upload.dialog\");\n    $.tmpl(dialogTemplate, {\n      url: properties.addUrl,\n      xpath: properties.xpath,\n      idRender: properties.id,\n      xpathContext: properties.xpathContext,\n      idPageCache: properties.idPageCache,\n      idSession: properties.sessionId,\n      validExtensions: properties.validExtensions.replace(\";\", \",\"),\n      maxSize: properties.maxSize,\n      contexttype: properties.contexttype }).\n    appendTo(dialogBox);\n    $(\".ui-bizagi-loading-message\").remove();\n  },\n\n  /**\r\n      * Process an upload file into the server\r\n      * @returns {*}\r\n      */\n  processUploadFile: function processUploadFile() {\n    var self = this;\n    var defer = new $.Deferred();\n    var dialogBox = self.dialogBox;\n    var uploadForm = $(\"form\", dialogBox);\n    var uploadIFrame = $(\"iframe\", uploadForm);\n\n    // When the iframe loads the user we need to evaluate the response and close the dialog\n    var timeoutFn = function timeoutFn() {\n      try {\n        var response = \"\";\n        if (uploadIFrame[0].contentWindow) {\n          var iframeContent = bizagi.util.isIE8() ? $(uploadIFrame[0].contentWindow.document.body) :\n          $(uploadIFrame[0].contentWindow.eval(\"document.body\"));\n\n          response = iframeContent.text();\n        }\n        if (response.length > 0) {\n          defer.resolve(response);\n        } else {\n          var timeoutForFn = setTimeout(function () {\n            timeoutFn();\n            clearTimeout(timeoutForFn);\n          }, 50);\n        }\n      } catch (e) {\n        // Nothing todo, just close the window and show error message\n        self.closeUploadDialog();\n        window.alert(\"Error:\" + e.toString());\n      }\n    };\n\n    // Execute the timed function in order to check when the response has arrived\n    timeoutFn();\n\n    // Submit the form\n    uploadForm.submit();\n\n    return defer.promise();\n  },\n\n  /**\r\n      * Close the upload dialog\r\n      */\n  closeUploadDialog: function closeUploadDialog() {\n    var self = this;\n    self.isClicked = false;\n    self.dialogBox.dialog(\"destroy\");\n    self.dialogBox.remove();\n  },\n\n  /**\r\n      * Verify if control reached maximum number of files\r\n      */\n  maxFilesLimit: function maxFilesLimit() {\n    return this.filesCount >= this.properties.maxfiles;\n  },\n\n  /**\r\n      * Check if the max files condition is true to hide the upload link\r\n      */\n  checkMaxFiles: function checkMaxFiles() {\n    var self = this;\n    var properties = self.properties;\n    var control = self.getControl();\n    var uploadField = $(\".ui-bizagi-render-upload-wrapper\", control);\n\n    if (self.maxFilesLimit()) {\n      //Hide upload element             \n      bizagi.util.cssExtended(uploadField.find(\"a\"), \"display:none!important\");\n\n      //Disable the control, to prevent further click events\n      self.enabled = false;\n\n    } else {\n      // show upload element\n      bizagi.util.cssExtended(uploadField.find(\"a\"), \"display:block!important\");\n\n      //Enable the control, to prevent further click events\n      self.enabled = true;\n    }\n\n    //Checks if the files count is equals to 0, to show the no files dialog\n    if (self.filesCount == 0) {\n      $(\".no-files\", control).css(\"display\", \"block\");\n    } else {\n      $(\".no-files\", control).hide();\n    }\n  },\n\n  onChangeFile: function onChangeFile(files) {\n    var self = this;\n    var i = 0;\n    var length;\n    var file;\n    var maxSize = self.properties.maxSize;\n\n    if (files) {\n\n      length = files.length;\n\n      for (; i < length;) {\n\n        file = files[i++];\n\n        if (file.size > maxSize) {\n          self.previousCheck = false;\n          return;\n        }\n      }\n    }\n\n    self.previousCheck = true;\n  },\n\n  /**\r\n      * Resolves default value align for each display type\r\n      * @param displayType\r\n      * @returns {string}\r\n      */\n  getDefaultValueAlign: function getDefaultValueAlign() {//displayType is not more important for align values \n    return \"\";\n  },\n\n  /**\r\n      * Handler to process server response after a file has been uploaded\r\n      * @param renderReference\r\n      * @param response\r\n      */\n  onUploadFileCompleted: function onUploadFileCompleted(renderReference, response) {\n    var self = renderReference;\n    var control = self.getControl();\n    var uploadWrapper = $(\".ui-bizagi-render-upload-wrapper\", control);\n\n    // Pre-parse response because in IE sometimes the server returns the JSON enclosed with some weird <FONT> tags\n    response = response.replace(/<.+>({.*})\\r?\\n?.*<.+>/gm, \"$1\");\n\n    // Check if previous call return a valid json\n    try {\n      var result = JSON.parse(response);\n    } catch (e) {\n      // Invalid json, try to catch error response\n      var errorList = [\n      {\n        toFind: \"Maximum request length\",\n        message: self.getResource(\"render-upload-alert-maxsize\").replace(\"{0}\", self.properties.maxSize) }];\n\n\n\n      $.each(errorList, function (key, validation) {\n        if (response.indexOf(validation.toFind) >= 0 && !result) {\n          result = { type: \"error\", message: validation.message };\n        }\n      });\n\n      if (!result) {\n        // Dont mapped \n        result = { type: \"error\", message: \"Error:\" + result };\n      }\n    }\n\n    if (result.type != \"error\") {\n      // Locate it before the upload wrapper\n      var newItem = self.renderUploadItem({ id: result.id, fileName: result.fileName });\n      $(newItem).insertBefore(uploadWrapper);\n\n      self.processControlLayout(self.properties.valueFormat);\n\n      // Increment counter\n      self.filesCount = self.filesCount + 1;\n\n      //Copy the files value but not its reference\n      var files = self.files.slice();\n\n      //Add the new item to this temporal array\n      files.push([result.id, result.fileName]);\n\n      // Check maxFiles\n      self.checkMaxFiles();\n      //Set Value\n      self.setValue(files, false);\n\n\n      // Trigger change\n      self.triggerRenderChange();\n\n      if (typeof self.grid != \"undefined\" && typeof self.grid.properties != \"undefined\") {\n        self.grid.properties.canBeExported = true;\n      }\n    } else {\n\n      //HTTP Error 404.13 is launched when the max file size configurated for iis is reached. the Request to the server is blocked \n      if (result.message === \"Error:undefined\" && response.indexOf(\"HTTP Error 404.13\") > -1)\n      result.message = self.getResource(\"render-upload-iis-maxsize\");\n      // Show server error\n      if (!result.isMaintenanceWindow) bizagi.showMessageBox(result.message);\n    }\n  },\n\n  //#region Render-Base    \n\n  changeFontItalic: function changeFontItalic($element, italic) {\n\n    this._super($element, italic);\n\n    if ($element.hasClass(\"ui-bizagi-render-control\") && bizagi.util.parseBoolean(italic)) {\n      this.getElementsToStylize(control).css(\"padding\", \"0 .1em\");\n    }\n\n    return this;\n  },\n\n  getElementsToStylize: function getElementsToStylize(context) {\n    return $(\".ui-bizagi-render-upload-item .bz-file-name, .no-files\", context);\n  },\n\n  //#endregion\n\n  /**\r\n   * checkMaxSize\r\n   * @param {object} renderReference\r\n   */\n  checkMaxSize: function checkMaxSize(renderReference) {\n    var self = renderReference;\n    var properties = self.properties;\n    var dialogBox = self.dialogBox;\n    var fileControl = $(\"input[type=file]\", dialogBox).get(0);\n\n    // Dont exist any fucking way to know file size in IEx, just skip this validation\n    if (fileControl.files != undefined) {\n      if (fileControl.files.length > 0) {\n        if (fileControl.files[0].size === 0) {\n          self.showError(self.getResource(\"render-upload-error-file-empty\").\n          replace(\"%s\", fileControl.files[0].name));\n          return false;\n        }\n        if (fileControl.files[0].size > properties.maxSize) {\n          self.showError(self.getResource(\"render-upload-alert-maxsize\").replace(\"{0}\", properties.maxSize));\n          return false;\n        }\n        return true;\n      } else {\n        self.showError(self.getResource(\"render-required-upload\").replace(\"#label#\", \"\"));\n        return false;\n      }\n    } else {\n      if (bizagi.util.isIE()) {\n        if (fileControl.value === \"\" || !fileControl.value) {\n          self.showError(self.getResource(\"render-required-upload\").replace(\"#label#\", \"\"));\n          return false;\n        } else {\n          if (self.previousCheck) {\n            return true;\n          } else {\n            if (document.documentMode > 9) {\n              self.showError(self.getResource(\"render-upload-alert-maxsize\").\n              replace(\"{0}\", properties.maxSize));\n              return false;\n            } else {\n              return true;\n            }\n          }\n        }\n      } else {\n        return true;\n      }\n    }\n  },\n\n  checkFileTypes: function checkFileTypes() {\n    var self = this;\n    var properties = self.properties;\n    var dialogBox = self.dialogBox;\n    var file = $(\"input[type=file]\", dialogBox).val();\n\n    if (properties.validExtensions && properties.validExtensions.length > 0) {\n      var validExtensions = properties.validExtensions.replaceAll(\"*.\", \"\").split(\";\");\n      if (!self.stringEndsWithValidExtension(file, validExtensions, true)) {\n        self.showError(self.getResource(\"render-upload-allowed-extensions\") + properties.validExtensions);\n        return false;\n      }\n    }\n    return true;\n  },\n\n  /**\r\n      * Additional validations\r\n      * @param renderReference\r\n      * @returns {boolean}\r\n      */\n  validate: function validate(renderReference) {\n    var self = renderReference;\n    var properties = self.properties;\n    var fileControl = $(\"input[type=file]\", self.dialogBox).get(0) || {};\n\n    //Verifies that the file name is not repeated\n    if (self.files) {\n      for (var i = 0; i < self.files.length; i++) {\n        var fileName = self.files[i][1];\n        if (fileName.toUpperCase() == fileControl.files[0].name.toUpperCase()) {\n          self.showError(self.getResource(\"render-upload-error-file-exists\"));\n          return false;\n        }\n      }\n    }\n\n    return true;\n  },\n\n  stringEndsWithValidExtension: function stringEndsWithValidExtension(stringToCheck, acceptableExtensionsArray, required) {\n    if (required == false && stringToCheck.length == 0) return true;\n\n    for (var i = 0; i < acceptableExtensionsArray.length; i++) {\n      if (acceptableExtensionsArray[i].toLowerCase() == \"*\") return true;\n      if (stringToCheck.toLowerCase().endsWith(acceptableExtensionsArray[i].toLowerCase())) return true;\n    }\n\n    return false;\n  },\n\n  showError: function showError(message) {\n    var self = this;\n    var errorContainer = $(\"#alert-file-upload\", self.dialogBox);\n\n    // Empty container\n    errorContainer.empty();\n    errorContainer.show();\n\n    errorContainer.html(message);\n  },\n\n  /**\r\n      * Cleans current value\r\n      */\n  cleanData: function cleanData() {\n    var self = this;\n    self.setValue(null);\n\n    return $.when(self.clearDisplayValue());\n  },\n\n  /**\r\n      * Sets the value in the rendered control\r\n      */\n  clearDisplayValue: function clearDisplayValue() {\n    var self = this;\n    var control = self.getControl();\n\n    var arrayItems = control.find(\".ui-bizagi-render-upload-item\");\n    var promises = [];\n\n    $.each(arrayItems, function (index, value) {\n      var item = $(value);\n      var file = item.data();\n\n      if (file) {\n        var promise = $.when(self.deleteUploadItem(item, file.id)).done(function () {\n          // Detach item\n          item.remove();\n\n          // Trigger change\n          self.triggerRenderChange();\n        });\n        promises.push(promise);\n      }\n    });\n\n    // Remove items\n    arrayItems.hide();\n\n    // Check maxFiles\n    self.filesCount = 0;\n    self.checkMaxFiles();\n\n    return $.when.apply($, promises);\n  },\n\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n    var properties = self.properties,control,item;\n\n    if (properties.editable) {\n      if (value && value.length === 0) {\n        control = self.getControl();\n        item = control.find(\".ui-bizagi-render-upload-item\");\n        item.hide();\n        item.remove();\n        self.checkMaxFiles();\n      }\n    }\n\n    self._super(value);\n  },\n\n  getLabel: function getLabel() {\n    return $(\"label\", this._super());\n  } });","/**\r\n * Description of file\r\n * @author: Jeison Borja\r\n */\n\n// Extends from render Desktop base\nbizagi.rendering.desktop.render.extend(\"bizagi.rendering.desktop.getUser\", bizagi.rendering.getUser.prototype);\n// Extends itself\nbizagi.rendering.desktop.getUser.extend(\"bizagi.rendering.desktop.getUser\", {}, {\n\n  /**\r\n                                                                                   * Template method to implement in each device to customize each render after processed\r\n                                                                                   */\n  postRender: function postRender() {\n    var self = this;\n    var opt = {};\n    self.input = $(\".ui-bizagi-render-text\", self.getControl());\n\n    if (self.properties.value != null && self.properties.value.length > 0) {\n      self.setDisplayValue(self.properties.value[0]);\n    }\n    // Call base\n    this._super();\n  },\n\n  /**\r\n      * Template method to implement in each device to customize the render's behaviour to add handlers\r\n      */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    var control = self.getControl();\n    self.bindSearchUserPlugin(control);\n    $('#btn-clear-user', control).on('click', function () {\n      self.clearValue();\n    });\n  },\n\n  /**\r\n      * Set display value\r\n      */\n  setDisplayValue: function setDisplayValue(data, triggerEvents) {\n    var self = this;\n    triggerEvents = triggerEvents == false ? triggerEvents : true;\n    var value = typeof data !== \"undefined\" ? data.value : null;\n\n    if (self.properties.editable) {\n      self.input.val(value);\n    }\n\n    self.setValue(data, triggerEvents);\n  },\n\n  /**\r\n      * Clear data control\r\n      */\n  clearValue: function clearValue() {\n    var self = this;\n\n    if (self.input) {\n      self.setDisplayValue(\"\", false);\n    }\n  },\n\n  /**\r\n      * Binds the search user plugin\r\n      */\n  bindSearchUserPlugin: function bindSearchUserPlugin(control) {\n    var self = this;\n    var options = {\n      title: self.getResource(\"render-plugin-search-users-title\"),\n      maximize: false,\n      filters: [\"domain\", \"userName\", \"fullName\"],\n      displayNames: [\n      self.getResource(\"render-plugin-search-users-domain\"),\n      self.getResource(\"render-plugin-search-users-user-name\"),\n      self.getResource(\"render-plugin-search-users-full-name\")],\n      searchButtonName: self.getResource(\"render-plugin-search-users-search-button-name\"),\n      clearButtonName: self.getResource(\"render-plugin-search-users-clear-button-name\"),\n      valuesToSelect: [\"iduser\", \"user\"], //\"iduser\",\"username\",\"user\",\"domain\",\"email\"\n      renderFactoryReference: self.renderFactory,\n      getResourceReference: self.getResource.bind(self),\n      selectItem: function selectItem() {\n        var deferred = $.Deferred();\n        deferred.done(function (data) {\n          self.onItemSelectedSuccess(data);\n        }).fail(function (error) {\n          bizagi.log(error);\n        });\n        return deferred;\n      },\n      searchUsers: function searchUsers(filterData) {\n        return self.callSearchUserEndpointByContext(self.properties, filterData);\n      },\n      showError: function showError(error) {\n        bizagi.log(error);\n      },\n      showMessageBox: function showMessageBox(message) {\n        bizagi.showMessageBox(bizagi.localization.getResource(message), \"Bizagi\", \"warning\");\n      } };\n\n\n    if (self.properties.allowDelegatedUser) {\n      options.editingUser = self.properties.idUser;\n    }\n\n    opt = options;\n\n    // Allows add new user when creating the pluggin\n    var params = self.getParams();\n    if (typeof params.isEntityForm !== \"undefined\" && params.isEntityForm) {\n      options.allowAddUser = bizagi.menuSecurity.UserAdmin || false;\n      options.dataService = self.dataService;\n      options.renderFactory = self.renderFactory;\n    }\n\n    $('#btn-get-user', control).bizagiSearchUser(options);\n  },\n\n  /**\r\n      * Call the search users endpoint depending on the scope\r\n      * @param {*} properties \r\n      * @param {*} filterData \r\n      */\n  callSearchUserEndpointByContext: function callSearchUserEndpointByContext(properties, filterData) {\n\n    var self = this;\n    if (self.getFormContainer().params.type === \"usersForm\") {\n      return self.callSearchUserEndpointInUsersForm(properties, filterData);\n    }\n\n    var form = self.getFormContainer();\n    if (form.params.context === \"userPreferencesForm\") {\n      return self.callSearchUserEndpointInUserPreferencesForm(properties, filterData);\n    }\n\n    // default behavior\n    return self.callSearchUserEndpointInOtherCases(properties, filterData);\n  },\n\n  /**\r\n      * Call search user endpoint depending on xpath in Users Form\r\n      * @param {*} properties \r\n      * @param {*} filterData \r\n      */\n  callSearchUserEndpointInUsersForm: function callSearchUserEndpointInUsersForm(properties, filterData) {\n    var self = this;\n    if (properties.xpath === \"idBossUser\") {\n      return self.dataService.getUsersListForXpathIdBossUser(filterData);\n    }\n\n    if (self.xpathIsDelegated(properties)) {\n      return self.dataService.getUsersListForXpathIdDelegate(filterData);\n    }\n\n    // if any call happens, call by default the next:\n    return self.callSearchUserEndpointInOtherCases(properties, filterData);\n  },\n\n  /**\r\n      * Call search user endpoint depending on xpath in Preferences Form\r\n      * @param {*} properties \r\n      * @param {*} filterData \r\n      */\n  callSearchUserEndpointInUserPreferencesForm: function callSearchUserEndpointInUserPreferencesForm(properties, filterData) {\n    var self = this;\n    if (self.xpathIsDelegated(properties)) {\n      return self.dataService.getUsersListForXpathIdDelegate(filterData);\n    }\n  },\n\n  /**\r\n      * Identify if the xpath is delegate\r\n      * @param {*} properties \r\n      */\n  xpathIsDelegated: function xpathIsDelegated(properties) {\n    return properties.xpath === \"idDelegate\";\n  },\n\n  /**\r\n      * Call search users endpoint depending on other cases\r\n      * @param {*} properties \r\n      * @param {*} filterData \r\n      */\n  callSearchUserEndpointInOtherCases: function callSearchUserEndpointInOtherCases(properties, filterData) {\n    var self = this;\n    if (properties.allowDelegatedUser) {\n      return self.dataService.getUsersListFromPreferences(filterData);\n    } else {\n      return self.dataService.getUsersListForStakeholders(filterData);\n    }\n  },\n\n\n  /**\r\n      * returns the opt var for unit testing\r\n      */\n  getOptions: function getOptions() {\n    return opt;\n  },\n  /**\r\n      *\r\n      * @param itemSelected\r\n      */\n  onItemSelectedSuccess: function onItemSelectedSuccess(itemSelected) {\n    var self = this;\n    var data = {\n      id: itemSelected.iduser,\n      value: itemSelected.user };\n\n\n    self.setDisplayValue(data);\n  },\n\n  changeRequired: function changeRequired(argument) {\n    this.properties.required = argument;\n    this.changeRequiredLabel(argument);\n  },\n\n  changeRequiredLabel: function changeRequiredLabel(argument) {\n    var control = this.getControl();\n\n    if (control.length > 0) {\n      if (this.getMode() !== \"execution\") {\n        if (bizagi.util.parseBoolean(argument) == true && this.properties.editable) {\n          control.addClass('control-required');\n        } else {\n          control.removeClass('control-required');\n        }\n      } else\n      {\n        if (bizagi.util.parseBoolean(argument) == true && !this.hasValue() && this.properties.editable) {\n          control.addClass('control-required');\n        } else {\n          control.removeClass('control-required');\n        }\n      }\n    }\n\n    this.triggerRenderValidate();\n  },\n\n  changeRequiredControl: function changeRequiredControl(argument) {\n    this.changeRequiredLabel(argument);\n  } });","/*\r\n *   Name: BizAgi Desktop Render Query Process Extension\r\n *   Author: Jeison Borja\r\n *   Comments:\r\n *   -   This script will redefine the query process render class to adjust to desktop devices\r\n */\n// Extends itself\n\n// Extends from render Desktop base\nbizagi.rendering.desktop.render.extend(\"bizagi.rendering.desktop.queryProcess\", bizagi.rendering.queryProcess.prototype);\n// Extends itself\nbizagi.rendering.desktop.queryProcess.extend(\"bizagi.rendering.desktop.queryProcess\", {}, {\n  /*\r\n                                                                                             * Template method to implement in each device to customize each render after processed\r\n                                                                                             */\n  postRender: function postRender() {\n    var self = this;\n    // Call base\n    this._super();\n    var template = self.renderFactory.getTemplate(\"queryProcessWrapper\");\n    var control = self.getControl();\n    self.getElement(\"row\").bind(\"click\", function () {\n      var wrapper = self.getWrapper();\n      if (wrapper.properties.visible) {\n        wrapper.element.hide();\n        wrapper.element.css(\"visibility\", \"hidden\");\n        wrapper.element.empty();\n      } else {\n        wrapper.element.show();\n        wrapper.element.css(\"visibility\", \"visible\");\n        var data = self.loadData(\"aplications\");\n        self.renderData(data, wrapper.element);\n      }\n    });\n\n  },\n\n  /**\r\n      * get wrapper html and their properties\r\n      *\r\n      * @return {element: html, properties{visible:boolean}}\r\n      */\n  getWrapper: function getWrapper() {\n    var self = this;\n    var wrapperElement = self.getElement(\"wrapper\");\n    var result = {\n      element: wrapperElement,\n      properties: {} };\n\n    // Check visibility\n    result.properties.visible = wrapperElement.css(\"visibility\") === \"visible\" ? true : false;\n    return result;\n  },\n\n  /**\r\n      * @return {key(row|wrapper): html element}\r\n      */\n  getElement: function getElement(key) {\n    var control = this.getControl();\n    var objectMapper = {\n      row: $(\".ui-selectmenu-btn , .ui-bizagi-container-query-process :input[type=text]\", control),\n      wrapper: $(\".ui-selectmenu-wrapper\", control),\n      linkApplication: $(\".linkApplication\", control) };\n\n\n    return objectMapper[key];\n  },\n\n  /**\r\n      * get data from server\r\n      * @return {applications:[{id:integer, appName: string},...] }\r\n      */\n  loadData: function loadData(type) {\n    if (type == \"aplications\") {\n      var result = {\n        items: [\n        {\n          id: 1,\n          displayName: \"My App 1\" },\n\n        {\n          id: 2,\n          displayName: \"My App 2\" },\n\n        {\n          id: 3,\n          displayName: \"My App 3\" }] };\n\n\n\n    }\n\n    if (type == \"process\") {\n      var result = {\n        items: [\n        {\n          id: 4,\n          displayName: \"My Category 1\",\n          process: false },\n\n        {\n          id: 5,\n          displayName: \"My Process 1\",\n          process: true },\n\n        {\n          id: 6,\n          displayName: \"My Category 2\",\n          process: false }] };\n\n\n\n    }\n    return result;\n  },\n\n  /**\r\n      * Render data within canvas\r\n      * @param data\r\n      * @param canvas\r\n      */\n  renderData: function renderData(data, canvas) {\n    var self = this;\n    $(canvas).empty();\n    if (data.items[0].process === undefined) {\n      canvas.append('<a class=\"linkApplication\" data-idcategory=\"0\" data-typeitem=\"process\"><i class=\"biz-ico biz-wp-tree-icon biz-wp-tree-image-process\"></i>All process </a>');\n    }\n    $.each(data.items, function (key, value) {\n      canvas.append('<a class=\"linkApplication\" data-idCategory=\"' + value.id + '\"><i  name=\"app\" class=\"biz-wp-tree-icon biz-wp-tree-expand-icon\"></i><i class=\"biz-ico biz-wp-tree-icon\"></i>' + value.displayName + '</a>');\n      var itemElement = $('[data-idCategory=' + value.id + ']', canvas);\n      if (value.process) {\n        var iconProcess = itemElement.find('i').last();\n        iconProcess.addClass('biz-wp-tree-image-process');\n        itemElement.find('i').first().remove();\n        itemElement.css('margin-left', '25px');\n        itemElement.attr('data-typeItem', 'process');\n      } else\n      {\n        // item category\n        if (value.process == false) {\n          var iconCategory = itemElement.find('i').last();\n          iconCategory.addClass('biz-wp-tree-image-category');\n          itemElement.attr('data-typeItem', 'category');\n        } else\n        {\n          //item application\n          var iconApp = itemElement.find('i').last();\n          iconApp.addClass('biz-wp-tree-image-application');\n          itemElement.attr('data-typeItem', 'app');\n        }\n        var idParent = $(canvas).attr('class') != \"ui-selectmenu-wrapper\" ? $(canvas).attr('id').replace('category_', '') : \"\";\n        var idContCategory = idParent != \"\" ? \"category_\" + idParent + \"-\" + value.id : \"category_\" + value.id;\n        canvas.append(\"<div class='ui-bizagi-contCategory' id='\" + idContCategory + \"'></div>\");\n      }\n    });\n    self.setupLinks(canvas);\n  },\n\n  setupLinks: function setupLinks(canvas) {\n    var self = this;\n    $(\".linkApplication\", canvas).on(\"click\", function () {\n      var idCategory = $(this).attr(\"data-idCategory\");\n      var idParent = $(canvas).attr('class') != \"ui-selectmenu-wrapper\" ? $(canvas).attr('id').replace('category_', '') : \"\";\n      var elementRender = idParent != \"\" ? $(\"#category_\" + idParent + \"-\" + idCategory) : $(\"#category_\" + idCategory);\n      if ($(this).attr('data-typeItem') == 'process') {\n        var processSelect = $(this).text();\n        var wrapper = self.getWrapper();\n        wrapper.element.hide();\n        wrapper.element.css(\"visibility\", \"hidden\");\n        var parentType = '';\n        var item = this;\n        var routeProcess = [];\n        if ($(this).attr(\"data-idcategory\") > 0) {\n          while (parentType != \"app\" || parentType == null) {\n            item = $(item).closest('div').prev();\n            parentType = item[0].getAttribute(\"data-typeItem\");\n            routeProcess.push(item.text());\n          }\n        }\n        wrapper.element.empty();\n        routeProcess = routeProcess.reverse().join(\" > \");\n        routeProcess = routeProcess == \"\" ? processSelect : routeProcess += ' > ' + processSelect;\n\n        $('.ui-bizagi-container-query-process :input[type=text]').val(routeProcess);\n      } else\n      {\n        var iconProcess = $(this).find('i').first();\n        if (elementRender.css(\"visibility\") === \"visible\") {\n          iconProcess.addClass('biz-wp-tree-expand-icon');\n          iconProcess.removeClass('biz-wp-tree-collapse-icon');\n          elementRender.hide();\n          elementRender.css(\"visibility\", \"hidden\");\n          elementRender.empty();\n        } else\n        {\n          var data = self.loadData(\"process\");\n          iconProcess.removeClass('biz-wp-tree-expand-icon');\n          iconProcess.addClass('biz-wp-tree-collapse-icon');\n          elementRender.show();\n          elementRender.css(\"visibility\", \"visible\");\n          self.renderData(data, elementRender);\n        }\n      }\n    });\n  } });","/*\r\n *   Name: Bizagi Render ComboSelected class\r\n *   Author: Paola Herrera\r\n *   Comments:\r\n *   -   This script will define basic stuff for comboSelected renders\r\n */\n\n// Extends from render Desktop base\nbizagi.rendering.desktop.render.extend(\"bizagi.rendering.desktop.comboSelected\", bizagi.rendering.comboSelected.prototype);\n// Extends itself\nbizagi.rendering.desktop.comboSelected.extend(\"bizagi.rendering.desktop.comboSelected\", {}, {\n\n  /*\r\n                                                                                              * Template method to implement in each device to customize each render after processed\r\n                                                                                              */\n  postRender: function postRender() {\n    // Call base\n    this._super();\n    var control = this.getControl();\n\n    // Value data into selectedItemsToUpdate\n    this.showInitialData(this.properties.value);\n\n    //Show initial value or nothing\n    if (this.selectedItemsToUpdate.length >= 0) {\n      $.each(this.selectedItemsToUpdate, function (index, value) {\n        $(\"#listBoxComboData\", control).append(\"<option value='\" + value.id + \"'>\" + value.value + \" </option>\");\n      });\n    }\n\n    $(control).closest(\".ui-bizagi-render-control\").addClass(\"ui-bizagi-render-comboselected\");\n  },\n\n  orderArrayList: function orderArrayList() {\n    var arrayOrderList = this.properties.value;\n    var orderList = arrayOrderList.sort(function (a, b) {\n\n      var nA = a.value !== undefined && a.value !== null ? a.value.toLowerCase() : \"\";\n      var nB = b.value !== undefined && b.value !== null ? b.value.toLowerCase() : \"\";\n\n      if (nA < nB)\n      return -1;else\n      if (nA > nB)\n      return 1;\n      return 0;\n    });\n    this.properties.value = orderList;\n  },\n\n  /*\r\n     * Template method to implement in each device to customize the render's behaviour to add handlers\r\n     */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    var control = self.getControl();\n\n    //Event to move right the elements\n    $(\"#move_right\", control).click(function (e) {\n      self.addItem();\n      var input = $(\"#bz-render-comboSelected-listBoxResults .ui-bizagi-render-text\", control);\n      self.filterFunction(input.val(), self.rightValues, $(\"#bz-render-comboSelected-listBoxResults select\", control));\n      input.focus();\n    });\n\n    //Event to move left the elements\n    $(\"#move_left\", control).click(function (e) {\n      self.removeItem();\n      var input = $(\"#bz-render-comboSelected-selectOptions .ui-bizagi-render-text\", control);\n      self.filterFunction(input.val(), self.leftValues, $(\"#bz-render-comboSelected-selectOptions select\", control));\n      input.focus();\n    });\n\n    $(\"#bz-render-comboSelected-selectOptions .ui-bizagi-render-text\", control).bind(\"keyup input\", function (e) {\n      self.filterFunction(this.value, self.leftValues, $(\"#bz-render-comboSelected-selectOptions select\", control));\n    });\n\n    $(\"#bz-render-comboSelected-listBoxResults .ui-bizagi-render-text\", control).bind(\"keyup input\", function (e) {\n      self.filterFunction(this.value, self.rightValues, $(\"#bz-render-comboSelected-listBoxResults select\", control));\n    });\n  },\n\n  filterFunction: function filterFunction(filter, list, selectInput) {\n    $(selectInput).empty();\n    //Add the values that match\n    var results = list.reduce(function (val, el) {\n      if (el.value.toUpperCase().indexOf(filter.toUpperCase()) !== -1) {\n        val += \"<option value='\" + el.id + \"'>\" + el.value + \" </option>\";\n      }\n      return val;\n    }, \"\");\n    selectInput.append(results);\n  },\n\n  changeRequired: function changeRequired(argument) {\n    this.properties.required = argument;\n    this.changeRequiredLabel(argument);\n  },\n\n  changeRequiredLabel: function changeRequiredLabel(argument) {\n    var control = this.getControl();\n\n    if (control.length > 0) {\n      if (this.getMode() !== \"execution\") {\n        if (bizagi.util.parseBoolean(argument) == true && this.properties.editable) {\n          control.addClass(\"control-required\");\n        } else {\n          control.removeClass(\"control-required\");\n        }\n      } else {\n        if (bizagi.util.parseBoolean(argument) == true && !this.hasValue() && this.properties.editable) {\n          control.addClass(\"control-required\");\n        } else {\n          control.removeClass(\"control-required\");\n        }\n      }\n    }\n\n    this.triggerRenderValidate();\n  },\n\n  /*\r\n     * Override display value\r\n     */\n  setDisplayValue: function setDisplayValue(value) {\n    // Set internal value\n    this.setValue(value, false);\n  },\n\n  /*\r\n     * Add item to listBoxComboData and selectedItemsToUpdate array\r\n     */\n  addItem: function addItem() {\n    var self = this;\n    var control = self.getControl();\n    var dataSelected = $(\"#selectionData option:selected\", control);\n    var dataResults = $(\"#listBoxComboData\", control);\n    $.each(dataSelected, function (i, item) {\n      var newItem = {\n        id: parseInt(item.value),\n        value: item.text };\n\n      var inArray = $.grep(self.selectedItemsToUpdate, function (e) {\n        return e.id == newItem.id;\n      });\n      if (inArray.length <= 0) {\n        self.selectedItemsToUpdate.push(newItem);\n\n        self.rightValues.push(newItem);\n        self.leftValues = $.grep(self.leftValues, function (el) {\n          return el.id != newItem.id;\n        });\n      }\n    });\n    dataSelected.remove();\n    self.setValue(self.selectedItemsToUpdate);\n  },\n\n  /*\r\n     * Remove item from listBoxComboData and selectedItemsToUpdate array\r\n     */\n  removeItem: function removeItem() {\n    var self = this;\n    var control = self.getControl();\n\n    var dataSelectedToRemove = $(\"#listBoxComboData option:selected\", control);\n    var dataOptions = $(\"#selectionData\", control);\n\n    $.each(dataSelectedToRemove, function (i, item) {\n      var removeItem = {\n        id: parseInt(item.value),\n        value: item.text };\n\n      var inArray = $.grep(dataOptions, function (e) {\n        return e.id == removeItem.id;\n      });\n      if (inArray.length <= 0) {\n        self.leftValues.push(removeItem);\n        self.rightValues = $.grep(self.rightValues, function (e) {\n          return e.id != removeItem.id;\n        });\n\n        self.selectedItemsToUpdate = $.grep(self.selectedItemsToUpdate, function (e) {\n          return e.id != removeItem.id;\n        });\n      }\n    });\n\n    dataSelectedToRemove.remove();\n    self.setValue(self.selectedItemsToUpdate);\n  },\n\n  /*\r\n     * Show listBoxComboData and move_left button from control view\r\n     */\n  showListBoxComboData: function showListBoxComboData() {\n    var control = this.getControl();\n    $(\"#move_left\", control).show();\n    $(\"#bz-render-comboSelected-listBoxResults\", control).show();\n  },\n\n  /*\r\n     *   Sets the value in the rendered control\r\n     */\n  showInitialData: function showInitialData(val) {\n    var self = this;\n    self.orderArrayList();\n    self.selectedItemsToUpdate = [];\n\n    if (!!val) {\n      $.each(val, function (index, value) {\n        self.selectedItemsToUpdate.push({\n          id: value.id,\n          value: value.value });\n\n      });\n    }\n  },\n\n  renderReadOnly: function renderReadOnly() {\n    var htmlControl = this.renderFactory.getTemplate(\"render-comboSelectedReadOnly\");\n    this.showInitialData(this.properties.value);\n    return $.fasttmpl(htmlControl, { datasource: this.selectedItemsToUpdate });\n  },\n\n  /*\r\n     * Has Value\r\n     */\n  hasValue: function hasValue() {\n    var data = typeof this.value === \"string\" ? JSON.parse(this.value).value : this.value;\n    return !bizagi.util.isEmpty(data);\n  },\n\n  /*\r\n     *   Sets the internal value\r\n     */\n  setValue: function setValue(value, triggerEvents) {\n    // Set previous value\n    this.properties.previousValue = this.properties.originalValue = JSON.stringify({ \"value\": this.value });\n\n    // Change internal value\n    this.value = this.properties.value = JSON.stringify({ \"value\": value });\n\n    if (this.properties.required && this.getMode() == \"execution\") {\n\n      if (this.checkRequired([])) {\n        this.changeRequiredLabel(false);\n      } else {\n        this.changeRequiredLabel(true);\n      }\n    }\n\n    triggerEvents = triggerEvents !== undefined ? triggerEvents : true;\n    // Trigger events\n    if (triggerEvents && !this.internalSetInitialValueFlag) {\n      this.triggerRenderChange();\n      this.triggerRenderValidate();\n    }\n  } });","/**\r\n *   Name: Bizagi Rendering Users Form\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script override rendering.form to create and update users\r\n */\n\n// Extends from container desktop form base\nbizagi.rendering.desktop.form.extend(\"bizagi.rendering.desktop.usersForm\", {}, {\n\n  init: function init(params) {\n    // Set observable element\n    this.form = this.getFormContainer();\n    this.observableElement = $({});\n    this.collectedValues = {};\n\n    this._super(params);\n  },\n\n  /*\r\n     * Reimplement loading for users form\r\n     */\n  startLoading: function startLoading() {\n    var self = this;\n    var waitingTemplate = self.renderFactory.getTemplate(\"form-waiting\");\n\n    if (self.waitingOverlay && self.waitingMessage) return;\n\n    var $canvas = $(self.params.canvas).closest(\".ui-dialog\");\n    var position = $canvas.offset();\n\n    self.waitingOverlay = $('<div class=\"ui-widget-overlay\" />').appendTo($canvas);\n    self.waitingMessage = $.tmpl(waitingTemplate).appendTo($('body', $(document)));\n\n    self.waitingMessage.css({\n      \"top\": position.top + Math.ceil(($canvas.height() - self.waitingMessage.outerHeight()) / 2) + \"px\",\n      \"left\": position.left + Math.ceil(($canvas.width() - self.waitingMessage.outerWidth()) / 2) + \"px\" });\n\n  },\n\n  /*\r\n     *   Method to process button actions in the form\r\n     */\n  processButtons: function processButtons() {\n    var self = this;\n    var buttons = self.getButtons();\n\n    // Don't process buttons if they are undefined in the template\n    if (!buttons || buttons.length === 0) return;\n    if (self.properties.orientation === \"rtl\") self.buttons.reverse();\n\n    // Attach a handler for each button\n    buttons.click(function () {\n      var button = $(this);\n      var ordinal = button.attr(\"ordinal\");\n      var buttonProperties = self.buttons[ordinal];\n\n      // Execute button\n      self.processButton(buttonProperties);\n    });\n  },\n\n  /**\r\n      * Reimplement process button actions in users forms\r\n      * @param buttonProperties\r\n      */\n  processButton: function processButton(buttonProperties) {\n    var self = this;\n\n    // First hide and clear validation box\n    self.validationController.clearValidationMessages();\n\n    $.when(self.ready()).done(function () {\n\n      switch (buttonProperties.action) {\n        case \"save\":\n\n          var sendMailControl = self.form.getRender(\"sendMail\");\n          var passwordControl = self.form.getRender(\"password\");\n\n          var paramsSave = {\n            formAction: \"save\",\n            sendMail: sendMailControl && sendMailControl.getValue() || false,\n            password: passwordControl === null ? \"\" : passwordControl.getValue() };\n\n\n          if (sendMailControl && passwordControl && paramsSave.sendMail && paramsSave.password === \"\") {\n            $.when(self.dataService.getConfiguration()).done(function (response) {\n              if (response.redirectErrorPage) {\n                window.location.href = response.redirectErrorPage;\n                return;\n              }\n\n              var minLength = response.passwordMinLength;\n              var maxLength = response.passwordMaxLength;\n\n              self.generateRandomPassword(passwordControl, minLength, maxLength);\n              paramsSave.password = passwordControl.getValue();\n\n              self.processSave(paramsSave);\n            }).fail(function (response) {\n              self.generateRandomPassword(passwordControl, 8, 12);\n              paramsSave.password = passwordControl.getValue();\n              self.processSave(paramsSave);\n\n              var error = JSON.parse(response.responseText);\n              self.validationController.showValidationMessage(error.message);\n            });\n          } else {\n            self.processSave(paramsSave);\n          }\n          break;\n        case \"cancel\":\n          var paramsCancel = {\n            formAction: \"cancel\",\n            sendMail: false };\n\n\n          self.triggerHandler(\"endUsersForm\", paramsCancel);\n          break;}\n\n\n    });\n  },\n\n  /**\r\n      * Process save actions\r\n      * @param params\r\n      */\n  processSave: function processSave(params) {\n\n    var self = this;\n\n    // validate the form\n    var valid = self.validationController.performValidations();\n\n    if (valid) {\n      self.startLoading();\n\n      var saveDeferred;\n      $.extend(self.collectedValues, self.collectRenderValuesForSubmit());\n\n      var userFormData = {\n        action: \"SAVEUSER\",\n        data: {},\n        contexttype: \"entity\",\n        idPageCache: self.idPageCache };\n\n\n      delete self.collectedValues.sendMail;\n      delete self.collectedValues[\"@Metadata.Stakeholders\"];\n\n      if (self.params.action === \"add\") {\n        saveDeferred = self.createUser(userFormData, params);\n      } else if (self.params.action === \"edit\") {\n        saveDeferred = self.updateUser(userFormData);\n      }\n\n      $.extend(params, userFormData.data);\n\n      $.when(saveDeferred).done(function () {\n        self.triggerHandler(\"endUsersForm\", params);\n      }).fail(function (response) {\n        var error = response;\n\n        if (response && response.responseText) {\n          error = JSON.parse(response.responseText);\n        }\n\n        self.endLoading();\n        self.validationController.showValidationMessage(error.message);\n        self.triggerHandler(\"endUsersForm\", $.extend(params, { error: error }));\n      });\n    } else {\n      self.validationController.expandNotificationBox();\n    }\n  },\n\n  /**\r\n      * Generates a random password between 8 and 12 characters\r\n      * @param passwordControl\r\n      * @param minLength\r\n      * @param maxLength\r\n      */\n  generateRandomPassword: function generateRandomPassword(passwordControl, minLength, maxLength) {\n    var self = this;\n    var length = self.getLengthPassword(minLength, maxLength);\n    var chars = \"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghiklmnopqrstuvwxyz\";\n    var randomPassword = \"\";\n\n    for (var i = 0; i < length; i++) {\n      var randomPosition = Math.floor(Math.random() * chars.length);\n      randomPassword += chars.substring(randomPosition, randomPosition + 1);\n    }\n\n    passwordControl.saveValue(randomPassword);\n  },\n\n  /**\r\n      * Generates a random length between minLength and maxLength\r\n      * if both are defined, or between 8 and 12\r\n      * @param minLength\r\n      * @param maxLength\r\n      * @returns {*}\r\n      */\n  getLengthPassword: function getLengthPassword(minLength, maxLength) {\n    minLength = minLength && maxLength ? minLength : 8;\n    maxLength = maxLength && minLength ? maxLength : 12;\n\n    return Math.floor(Math.random() * (maxLength - (minLength - 1))) + minLength;\n  },\n\n  /**\r\n      * Create a new User\r\n      * @param userFormData\r\n      * @param params\r\n      * @returns {*}\r\n      */\n  createUser: function createUser(userFormData, params) {\n    var self = this;\n    var collectedData = self.getCollectedData();\n\n    // Data for first calling\n    $.extend(userFormData, {\n      data: {\n        domain: collectedData.domain,\n        fullName: collectedData.fullName,\n        userName: collectedData.userName },\n\n      prepare: true });\n\n\n    var submitDataAction = self.dataService.submitData(userFormData);\n    submitDataAction.tag = \"submitData\";\n\n    delete collectedData.userName;\n    delete collectedData.domain;\n\n    $.extend(userFormData, {\n      data: collectedData,\n      surrogatekey: false,\n      prepare: true });\n\n\n    var performAction = self.dataService.submitData(userFormData);\n    performAction.tag = \"performAction\";\n\n    // Assemble the actions\n    var actions = [];\n    actions.push(submitDataAction);\n    actions.push(performAction);\n\n    return $.when(self.dataService.multiaction().execute({ actions: actions })).\n    then(function (responses) {\n      var resultUser = {};\n\n      if (responses && bizagi.util.isArray(responses) && responses.length > 0) {\n        resultUser = responses[0] && responses[0].result || {};\n      }\n\n      // After save the action change to be edition\n      self.params.action = \"edit\";\n      self.params.userId = resultUser.idEntity || undefined;\n\n      $.extend(params, { userId: resultUser.idEntity || undefined });\n    });\n  },\n\n  /**\r\n      * Update data of current user\r\n      * @param userFormData\r\n      * @returns {*}\r\n      */\n  updateUser: function updateUser(userFormData) {\n    var self = this;\n    var collectedData = self.collectedValues;\n\n    $.extend(userFormData, {\n      data: collectedData,\n      surrogatekey: self.params.userId });\n\n\n    return self.dataService.submitData(userFormData);\n\n  },\n\n  /**\r\n      * Get collected data\r\n      * @returns {*}\r\n      */\n  getCollectedData: function getCollectedData() {\n    var self = this;\n    var collectedData = self.collectedValues;\n\n    var expiredAccountControl = self.form.getRender(\"expiredAccount\");\n    var lockedAccountControl = self.form.getRender(\"lockedAccount\");\n    var domain = self.form.getRender(\"domain\");\n\n    // Add these parameters for the collected data\n    collectedData.expiredAccount = expiredAccountControl ? expiredAccountControl.getValue() : null;\n    collectedData.lockedAccount = lockedAccountControl ? lockedAccountControl.getValue() : null;\n    collectedData.domain = domain ? domain.getValue() : \"\";\n\n    return collectedData;\n  } });","/**\r\n *   Name: BizAgi Desktop Stakeholder\r\n *   Author: Fabian Moreno\r\n */\n\n// Extends from render Desktop base\nbizagi.rendering.desktop.render.extend(\"bizagi.rendering.desktop.stakeholder\", bizagi.rendering.stakeholder.prototype);\n// Extends itself\nbizagi.rendering.desktop.stakeholder.extend(\"bizagi.rendering.desktop.stakeholder\", {}, {\n  /**\r\n                                                                                           * Template method to implement in each device to customize each render after processed\r\n                                                                                           */\n  postRender: function postRender() {\n    var self = this;\n    var control = self.getControl();\n    var bizagiControl = $('.ui-bizagi-render-stakeholder-container').closest('.ui-bizagi-control.ui-bizagi-render-align-left ');\n\n    // Hide initial control label\n    bizagiControl.css('width', '100%');\n    bizagiControl.prev().css('display', 'none');\n\n    self.maxElemShow = 10;\n    self.maxPageToShow = 5;\n    self.selectedItems = [];\n    self.valueXpath;\n    self.guidEntity;\n    self.currentPage;\n\n    // Call base\n    this._super();\n  },\n\n  /**\r\n      * Template method to implement in each device to customize the render's behaviour to add handlers\r\n      */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    var control = self.getControl();\n\n    //Event to associate stakeholder\n    $(\"#ui-bizagi-render-stakeholder-add\", control).click($.proxy(self.addInstance, self));\n    $(\".ui-bizagi-render-stakeholder-entity-row\", control).click($.proxy(self.addGrid, self));\n    $(\".ui-bizagi-render-stakeholder-back\", control).click($.proxy(self.goToBack, self));\n    $(\".ui-bizagi-render-stakeholder-link\", control).click($.proxy(self.removeAssociated, self));\n    $(\".ui-bizagi-render-stakeholder-search\", control).keyup($.proxy(self.onKeyUpFilter, self));\n\n    control.on(\"click\", \"table .sortColumnsData-stakeholder\", function (e) {\n      var currentTarget = $(e.currentTarget);\n      var paramField = currentTarget.data(\"orderfield\");\n      var orderType = currentTarget.data(\"ordertype\");\n\n      self.gridDataService(self.currentPage, null, paramField, orderType === \"DESC\" ? \"ASC\" : \"DESC\");\n    });\n  },\n\n  /**\r\n      *\r\n      */\n  goToBack: function goToBack() {\n    var self = this;\n    var control = self.getControl();\n\n    if (self.status === \"step1\") {\n      $(\"#ui-bizagi-render-stakeholder-entity-list\", control).hide();\n      $(\"#ui-bizagi-render-stakeholder-add-instance\", control).hide();\n\n      $(\"#ui-bizagi-render-stakeholder-associated-list\", control).show();\n      $(\".ui-bizagi-render-stakeholder-associated\", control).show();\n      $(\"#ui-bizagi-render-stakeholder-add\", control).show();\n\n      $(\".ui-bizagi-render-stakeholder-back\", control).hide();\n\n      self.status = null;\n    } else\n    if (self.status === \"step2\") {\n      $(\"#ui-bizagi-render-stakeholder-grid\", control).hide();\n      $(\"#ui-bizagi-render-stakeholder-add-instance\", control).show();\n\n      self.status = \"step1\";\n    }\n  },\n\n  /**\r\n      *\r\n      */\n  addInstance: function addInstance() {\n    var self = this;\n    var control = self.getControl();\n\n    self.status = \"step1\";\n    $(\"#ui-bizagi-render-stakeholder-associated-list\", control).hide();\n    $(\".ui-bizagi-render-stakeholder-associated\", control).hide();\n    $(\"#ui-bizagi-render-stakeholder-add\", control).hide();\n    $(\"#ui-bizagi-render-stakeholder-entity-list\", control).show();\n    $(\"#ui-bizagi-render-stakeholder-add-instance\", control).show();\n    $(\".ui-bizagi-render-stakeholder-back\", control).show();\n    $(\".ui-bizagi-render-stakeholder-entity-row\").removeClass(\"ui-bizagi-render-stakeholder-selected\");\n\n  },\n\n  /**\r\n      *\r\n      * @param e\r\n      */\n  addGrid: function addGrid(e) {\n    var self = this;\n    var control = self.getControl();\n    self.valueXpath = $(e.currentTarget).attr(\"data-value\");\n    self.guidEntity = $(e.currentTarget).attr(\"guid-entity\");\n\n    self.status = \"step2\";\n    $(\".ui-bizagi-render-stakeholder-entity-row\").removeClass(\"ui-bizagi-render-stakeholder-selected\");\n    $(e.currentTarget).addClass(\"ui-bizagi-render-stakeholder-selected\");\n\n    $(\"#ui-bizagi-render-stakeholder-add-instance\", control).hide();\n    $(\"#ui-bizagi-render-stakeholder-grid\", control).show();\n\n    $(\".ui-bizagi-render-stakeholder-search\", control).val(\"\");\n\n    self.gridDataService(null, \"\", \"\", \"DESC\");\n  },\n\n  /**\r\n      *\r\n      * @param currentPage\r\n      * @param filter\r\n      * @param sort\r\n      * @param orderType\r\n      */\n  gridDataService: function gridDataService(currentPage, filter, sort, orderType) {\n    var self = this;\n\n    self.getData(self.valueXpath, currentPage, filter, sort, orderType).done(function (data) {\n      self.onGetData(data, orderType);\n    }).fail(function (e) {\n      self.onGetDataFail(e);\n    });\n  },\n\n  /**\r\n      *\r\n      * @param data\r\n      */\n  onGetData: function onGetData(data, orderType) {\n    var self = this;\n    var control = self.getControl();\n    var tempGrid = self.renderFactory.getTemplate(\"stakeholder-grid\");\n    self.currentPage = data.page;\n\n    if (data.rows.length > 0) {\n      var dataColumns = data.rows[0][1];\n\n      //preprocess columns because more template simple\n      var tempColumns = dataColumns.slice(1, dataColumns.length);\n      var columns = [];\n      for (iColumn = 0; iColumn < tempColumns.length; iColumn++) {\n        var objectColumn = {\n          name: tempColumns[iColumn][0],\n          displayName: tempColumns[iColumn][1],\n          orderType: orderType };\n\n        columns.push(objectColumn);\n      }\n\n\n      var idData = self.selectedItems[self.valueXpath];\n\n      $.each(data.rows, function (key, value) {\n        var item = value[2][0][0];\n        if (!idData && item != undefined || idData && item == idData.id)\n        {\n          self.selectedItems[self.valueXpath] = { \"id\": value[0], \"idInstance\": item, \"nameInstance\": value[2][0][1] };\n          return;\n        }\n      });\n\n      if (self.selectedItems[self.valueXpath] && self.selectedItems[self.valueXpath].idUser == \"null\")\n      {\n        delete self.selectedItems[self.valueXpath];\n      }\n\n      //preprocess data.rows because more template simple\n      var newDataRows = [];\n      for (var iRow = 0; iRow < data.rows.length; iRow++) {\n        var stateInstance = \"\";\n        var tooltipLink = \"\";\n\n        if (data.rows[iRow][2][0][0] && data.rows[iRow][2][0][0] != self.properties.idUser) {\n          stateInstance = \"associatedWithAnotherUser\";\n          tooltipLink = bizagi.localization.getResource(\"render-stakeholder-link-tooltip-associate-another-user\").replace(\"{0}\", data.rows[iRow][2][0][1]);\n        } else\n        if (data.rows[iRow][2][0][0] == self.properties.idUser) {\n          stateInstance = \"associateMe\";\n          tooltipLink = bizagi.localization.getResource(\"render-stakeholder-link-tooltip-associate\");\n        } else\n        {\n          stateInstance = \"unassociated\";\n          tooltipLink = bizagi.localization.getResource(\"render-stakeholder-link-tooltip-unassociate\");\n        }\n\n        var rowTemplate = {};\n        rowTemplate.columns = [];\n        rowTemplate.columns.push({\n          stateInstance: stateInstance,\n          value: data.rows[iRow][0],\n          tooltipLink: tooltipLink });\n\n\n        for (var iColumn = 0; iColumn < data.rows[iRow][2].length; iColumn++) {\n          if (iColumn > 0) {\n            rowTemplate.columns.push({ value: data.rows[iRow][2][iColumn] });\n          }\n        }\n\n        newDataRows.push(rowTemplate);\n      }\n\n      var gridTmp = $.tmpl(tempGrid, {\n        datasource: newDataRows,\n        columns: columns,\n        tooltipUnassociated: bizagi.localization.getResource(\"render-stakeholder-link-tooltip-unassociate\") });\n\n\n      $(\".ui-bizagi-render-stakeholder-items-grid-content\", control).empty().append(gridTmp);\n\n      var tempPagination = self.renderFactory.getTemplate(\"stakeholder-paginator\");\n\n      //Keep in track the total Records\n      self.totalRecords = data.records;\n      //keep in track the total pages\n      self.totalPages = data.total;\n      var pageToshow = self.maxPageToShow > self.totalPages ? self.totalPages : self.maxPageToShow;\n      var pagerData = {};\n\n      // show or hide \"load more\" button\n      pagerData.pagination = self.totalPages > 1;\n      pagerData.page = data.page;\n      pagerData.pages = {};\n\n      for (var i = 1; i <= pageToshow; i++) {\n        pagerData[\"pages\"][i] = {\n          \"pageNumber\": i };\n\n      }\n\n      //load and append the paginator to the result table\n      paginationHtml = $.tmpl(tempPagination, pagerData).html();\n      $(\".ui-bizagi-render-stakeholder-paginator\", control).empty().append(paginationHtml);\n\n      var $pager = $(\".ui-bizagi-render-stakeholder-paginator ul\", control);\n\n      $pager.bizagiPagination({\n        maxElemShow: self.maxPageToShow,\n        totalPages: self.totalPages,\n        actualPage: self.currentPage,\n        listElement: $pager,\n        clickCallBack: function clickCallBack(options) {\n          self.gridDataService(options.page);\n        } });\n\n\n      self.setRowsEvents();\n\n\n    } else\n    {//hay datos en data.rows//No\n      $(\".ui-bizagi-render-stakeholder-items-grid-content\", control).empty();\n      $(\".ui-bizagi-render-stakeholder-paginator\", control).empty();\n    }\n\n  },\n\n\n  /**\r\n      *\r\n      * @param e\r\n      */\n  onGetDataFail: function onGetDataFail(e) {\n    console.log(\"process property value error: \" + e);\n  },\n\n  /**\r\n      *\r\n      */\n  setRowsEvents: function setRowsEvents() {\n    var self = this;\n    $(\".ui-bizagi-render-stakeholder-table-link\").click($.proxy(self.onLinkClick, self));\n  },\n\n  /**\r\n      *\r\n      * @param e\r\n      */\n  onLinkClick: function onLinkClick(e) {\n    var self = this;\n    var idUser;\n    var idEntity = $(e.currentTarget).attr(\"data-value\");\n\n\n    function executeLinkClickIfProceed(event) {\n      if ($(event.currentTarget).hasClass(\"ui-bizagi-render-stakeholder-table-link-close\")) {\n        $(\".ui-bizagi-render-stakeholder-table-link\").removeClass(\"ui-bizagi-render-stakeholder-table-link-close\");\n        idUser = \"null\";\n      } else\n      {\n        $(\".ui-bizagi-render-stakeholder-table-link\").removeClass(\"ui-bizagi-render-stakeholder-table-link-close\");\n        $(event.currentTarget).addClass(\"ui-bizagi-render-stakeholder-table-link-close\");\n        idUser = self.properties.idUser;\n      }\n\n      self.selectedItems[self.valueXpath] = { \"id\": idEntity, \"idUser\": idUser };\n\n      //if idUser is null, remove associated Stakeholder\n      self.associatedUser(idEntity, self.guidEntity, idUser).done(function () {\n        self.refreshStakeholderValue();\n\n        //if only target contents ui-bizagi-render-stakeholder-table-stakeholder-associated-other-user\n        //set association stakeholder to user\n        if ($(event.currentTarget).hasClass(\"ui-bizagi-render-stakeholder-table-stakeholder-associated-other-user\")) {\n          $(\".ui-bizagi-render-stakeholder-table-link\").removeClass(\"ui-bizagi-render-stakeholder-table-stakeholder-associated-other-user\");\n          $(event.currentTarget).addClass(\"ui-bizagi-render-stakeholder-table-link-close\");\n          idUser = self.properties.idUser;\n          self.associatedUser(idEntity, self.guidEntity, idUser).done(function () {\n            self.refreshStakeholderValue();\n          }).fail(function (e) {\n            self.onStakeAssociatedFail(e);\n          });\n        }\n\n      }).fail(function (e) {\n        self.onStakeAssociatedFail(e);\n      });\n    }\n\n    //Confirm to delete stakeholder association with another user.\n    if ($(e.currentTarget).hasClass(\"ui-bizagi-render-stakeholder-table-link-close\") && $(e.currentTarget).hasClass(\"ui-bizagi-render-stakeholder-table-stakeholder-associated-other-user\")) {\n      var confirmationMsg = bizagi.localization.getResource(\"render-stakeholder-delete-associate-instance-other-user-confirm-msg\");\n      $.when(bizagi.showConfirmationBox(confirmationMsg, \"Bizagi\", \"warning\")).\n      done(function () {\n        executeLinkClickIfProceed(e);\n      });\n    } else\n    {\n      executeLinkClickIfProceed(e);\n    }\n  },\n\n  /**\r\n      *\r\n      * @param e\r\n      */\n  removeAssociated: function removeAssociated(e) {\n    var self = this;\n\n    var idEntity = $(e.currentTarget).attr(\"data-value\");\n    self.guidEntity = $(e.currentTarget).attr(\"guid-entity\");\n    var state = \"null\";\n    self.selectedItems[self.valueXpath] = { \"id\": idEntity, \"idUser\": state };\n\n    self.associatedUser(idEntity, self.guidEntity, state).done(function () {\n      self.refreshStakeholderValue();\n    }).fail(function (e) {\n      self.onStakeAssociatedFail(e);\n    });\n  },\n\n  /**\r\n      *\r\n      * @param e\r\n      */\n  onKeyUpFilter: function onKeyUpFilter(e) {\n    var self = this;\n    if (e.keyCode == 13)\n    {\n      var filter = $(e.target).val();\n      self.gridDataService(null, filter);\n    }\n\n  },\n\n  /**\r\n      *\r\n      */\n  refreshStakeholderValue: function refreshStakeholderValue() {\n    var self = this;\n    var control = self.getControl();\n\n    self.refreshStakeholderList().done(function (data) {\n      //Update Stakeholder List\n      self.setValue(data);\n      control.empty().append(self.renderControl());\n      self.configureHandlers();\n    }).fail(function (e) {\n      self.onStakeAssociatedFail(e);\n    });\n  },\n\n  /**\r\n      *\r\n      * @param e\r\n      */\n  onStakeAssociatedFail: function onStakeAssociatedFail(e) {\n    console.log(\"stakeholder associated error: \" + e);\n  },\n\n  /**\r\n      * Override display value\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n\n    // Set internal value\n    self.setValue(value);\n  },\n\n  /**\r\n      *   Sets the internal value\r\n      */\n  setValue: function setValue(value) {\n    var self = this;\n\n    // Set previous value\n    self.properties.previousValue = self.properties.originalValue = JSON.stringify({ \"value\": self.value });\n\n    // Change internal value\n    self.value = self.properties.value = JSON.stringify({ \"value\": value });\n  } });","/*\r\n *   Name: Bizagi Render userPassword class\r\n *   Author: Paola Herrera\r\n *   Comments:\r\n *   -   This script will define basic stuff for userPassword renders\r\n */\n\n// Extends from render Desktop base\nbizagi.rendering.desktop.render.extend(\"bizagi.rendering.desktop.userPassword\", bizagi.rendering.userPassword.prototype);\n// Extends itself\nbizagi.rendering.desktop.userPassword.extend(\"bizagi.rendering.desktop.userPassword\", {}, {\n  /*\r\n                                                                                            * Template method to implement in each device to customize each render after processed\r\n                                                                                            */\n  postRender: function postRender() {\n    var self = this;\n    var control = self.getControl();\n    // Call base\n    this._super();\n\n    self.input = control.find(\"input#bz-render-userPassword-inputPassword\");\n\n    // Define max length of element\n    if (self.properties.maxLength > 0) {\n      self.input.attr(\"maxlength\", self.properties.maxLength);\n    }\n  },\n\n  /*\r\n     * Template method to implement in each device to customize the render's behaviour to add handlers\r\n     */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    var control = self.getControl();\n\n    // Attach change event\n    self.input.bind(\"change\", function () {\n\n      var inputValue = self.input.val();\n\n      if (inputValue !== \"\") {\n        // Updates internal value\n        self.saveValue(inputValue);\n      } else {\n        self.setValue(inputValue);\n      }\n\n    }).keypress(function (e) {\n      e = window.event || e;\n      var keyUnicode = e.charCode || e.keyCode;\n      if (e !== undefined) {\n        if (keyUnicode == 13) {\n          $(this).trigger(\"change\");\n        }\n      }\n    });\n  },\n\n  saveValue: function saveValue(inputValue) {\n    var self = this;\n\n    var C = CryptoJS;\n    var userFormsSpanner = C.enc.Utf8.parse('pc30n84e15lvdD68');\n    var userFormsCode = CryptoJS.enc.Latin1.parse('1v00628X62bJE2mi');\n\n    var aes = C.algo.AES.createEncryptor(userFormsSpanner, {\n      mode: C.mode.CBC,\n      padding: C.pad.Pkcs7,\n      iv: userFormsCode });\n\n\n    var resultMain = aes.finalize(inputValue);\n    var resultMainFinal = C.enc.Base64.stringify(resultMain);\n\n    self.setValue(resultMainFinal);\n  },\n\n  /*\r\n     *   Template method to implement in each device to customize each render after processed in read-only mode\r\n     */\n  postRenderReadOnly: function postRenderReadOnly() {\n    var self = this;\n    var control = self.getControl();\n\n    var tempHTML = \"<label class='readonly-control'></label>\";\n    var spanTmp = $.tmpl(tempHTML, {});\n\n    control.append(spanTmp);\n  } });","/*\r\n*   Name: Bizagi Desktop grid Actions Extension\r\n*    Author: Cristian Olaya\r\n*           Ivn Ricardo Taimal\r\n*\r\n*/\n\n// Extends itself\nbizagi.rendering.render.extend(\"bizagi.rendering.desktop.gridActions\", {}, {\n\n  renderControl: function renderControl() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"gridActions\");\n    var hasActions = self.grid && self.grid.hasActions() || false;\n\n    // Render template\n    var html = $.fasttmpl(template, { hasActions: hasActions });\n    return html;\n  } });","/*\r\n *   Name: Bizagi Rendering Desktop numberScientificNotation\r\n *   Author: Laura Ariza\r\n *   Comments:\r\n *   -   This script define a render control that support scientific notation format\r\n */\n\n// Extends from render desktop base\nbizagi.rendering.desktop.render.extend(\"bizagi.rendering.desktop.numberScientificNotation\", bizagi.rendering.numberScientificNotation.prototype);\n// Extends itself\nbizagi.rendering.desktop.numberScientificNotation.extend(\"bizagi.rendering.desktop.numberScientificNotation\", {}, {\n\n  /*\r\n                                                                                                                    * Template method to implement in each device to customize each render after processed\r\n                                                                                                                    */\n  postRender: function postRender() {\n    var self = this;\n\n    self._super();\n\n    // Attach Format Currency Plugin to format the input\n    self.attachFormatScientificNotation();\n  },\n\n\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n\n    value = bizagi.util.scientificNotationFormat(value.replace(self.properties.decimalSymbol, '.'));\n    // Set value in input\n    if (value != null && self.properties.editable) {\n      self.numericInput.val(value.replace('.', self.properties.decimalSymbol));\n      self.setValue(value);\n\n    }\n    // Call base\n    this._super(value.replace('.', self.properties.decimalSymbol));\n  },\n\n  attachFormatScientificNotation: function attachFormatScientificNotation() {\n    var self = this;\n\n    // Attach events\n    self.numericInput.blur(function () {\n      var inputValue = self.numericInput.val();\n      var scientificNotationNumber =\n      bizagi.util.scientificNotationFormat(inputValue, self.properties.decimalSymbol);\n      // Updates internal value\n      self.setValue(scientificNotationNumber);\n      self.numericInput.val(scientificNotationNumber);\n    });\n  } });","/**\r\n * Desktop definition of Action Launcher\r\n *\r\n * @author: Edward Morales\r\n */\n\n// Extends from render Desktop base\nbizagi.rendering.desktop.render.extend(\"bizagi.rendering.desktop.actionLauncher\", bizagi.rendering.actionLauncher.prototype);\n// Extends itself\nbizagi.rendering.desktop.actionLauncher.extend(\"bizagi.rendering.desktop.actionLauncher\", {}, {\n  /**\r\n                                                                                                 * Render a specific implementation for Desktop device\r\n                                                                                                 */\n  postRender: function postRender() {\n    var self = this;\n    var properties = self.properties;\n    var mode = self.getMode();\n    var html, template;\n    var data = {};\n    var def = new $.Deferred();\n\n    if (mode == \"design\" || !self.properties.surrogatedKey) {\n      return \"\";\n    }\n\n    self.configureQueueVisibility();\n\n    function appendContent(template, templateArguments) {\n      var control = self.getControl();\n      var actionsContainer = $(\".bz-action-launcher-actions-container\", control);\n      html = $.fasttmpl(template, templateArguments);\n      actionsContainer.append(html);\n\n      if (templateArguments.template) {\n        actionsContainer.\n        find('.actions-container.actions-container-template').\n        append(templateArguments.template);\n      }\n      self.configureHandlers();\n      def.resolve(actionsContainer);\n    }\n\n    /**\r\n       * Define params to get list of actions\r\n       */\n    $.when(self.dataService.multiaction().getActions(self.processPropertyValueArgs)).\n    pipe(function (actions) {\n      actions = self.getPropertiesActionLaucher(actions);\n      data.actions = actions;\n\n      return properties.templatetype != 'none' ? self.dataService.multiaction().getPropertyData(self.processPropertyValueDataTmplArgs) : null;\n    }).\n    done(function (templateData) {\n      var response = data.actions;\n      self.deferredActions.resolve(response);\n      self.totalActions = bizagi.clone(response);\n      var actions = bizagi.clone(response);\n      var templateArguments = {};\n\n      var moreActionsManager = self.moreActionsManager(actions);\n      var isMoreActions = moreActionsManager.isMoreActions;\n      actions = moreActionsManager.actions;\n      self.lessActions = bizagi.clone(actions);\n\n      if (properties.isHorizontal) {\n        if (properties.templatetype != 'none') {\n          $.when(self.engine.render($.extend(templateData, { isDefaultTemplate: properties.templatetype == 'default' }), self.processPropertyValueDataTmplArgs)).\n          done(function (template) {\n            templateArguments = {\n              actions: self.getPropertiesActionLaucher(actions),\n              template: template,\n              isMoreActions: isMoreActions,\n              moreActions: self.moreActions,\n              allowactions: properties.allowactions };\n\n            template = self.renderFactory.getTemplate(\"render-actionLauncher-horizontal\");\n            appendContent(template, templateArguments);\n          });\n        } else {\n          templateArguments = {\n            actions: self.getPropertiesActionLaucher(actions),\n            isMoreActions: isMoreActions,\n            template: false,\n            moreActions: self.moreActions,\n            allowactions: properties.allowactions };\n\n          template = self.renderFactory.getTemplate(\"render-actionLauncher-horizontal\");\n          appendContent(template, templateArguments);\n        }\n\n      } else {\n        var actionsVertical = isMoreActions ? self.lessActions : self.totalActions;\n        templateArguments = {\n          actions: self.getPropertiesActionLaucher(actionsVertical),\n          allowSearch: properties.allowSearch,\n          isMoreActions: isMoreActions,\n          isExpanded: false,\n          moreButtonTitle: self.getResource(\"render-action-launcher-more-actions\") };\n\n        template = self.renderFactory.getTemplate(\"render-actionLauncher-vertical\");\n        appendContent(template, templateArguments);\n      }\n    }).\n    fail(function (error) {\n      def.fail(error);\n    });\n\n    self.engine.subscribe('onLoadDataNavigation', function (ev, params) {\n      bizagi.loader.start(\"entity-engine-view\").then(function () {\n        $(document).triggerHandler(\"showDialogWidget\", {\n          widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_DIALOGNAV,\n          data: params,\n          modalParameters: {\n            title: params.data.displayName,\n            refreshInbox: false },\n\n          maximizeOnly: false });\n\n      });\n    });\n\n    return def.promise();\n  },\n\n  /**\r\n      * Check maxitems action and create sub list of actions\r\n      * in order to create contextual menu with them\r\n      * @param actions\r\n      * @return {{isMoreActions: boolean, actions: *}}\r\n      */\n  moreActionsManager: function moreActionsManager(actions) {\n    var self = this;\n    var properties = self.properties;\n    var isMoreActions = actions.length > properties.maxItems || false;\n    if (isMoreActions) {\n      var moreActionsTemp = actions.splice(0, properties.maxItems);\n      self.moreActions = bizagi.clone(actions);\n      actions = moreActionsTemp;\n    }\n\n    return { isMoreActions: isMoreActions, actions: actions };\n  },\n\n  /**\r\n      * Add binding to html elements\r\n      */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    var formContainer = self.getFormContainer();\n    if (typeof formContainer.params.printversion === \"undefined\" || formContainer.params.printversion == false) {\n      var control = self.getControl();\n      var actionLauncherControls = $(\".action-launcher-control\", control);\n      var moreVerticalButton = $(\".action-launcher-more-vertical\", control);\n      var properties = self.properties;\n\n      self.configureMoreActionsHandler();\n      /**\r\n                                           * Binding for a tooltip when max items is exceeded horizontal\r\n                                           */\n      moreVerticalButton.on(\"click\", function (event) {\n        var $button = $(this);\n        var isExpanded = false;\n        var moreButtonTitle = \"\";\n        var actionsVertical = {};\n        if ($button.hasClass(\"expanded\")) {\n          isExpanded = false;\n          actionsVertical = self.lessActions;\n          moreButtonTitle = self.getResource(\"render-action-launcher-more-actions\");\n        } else {\n          isExpanded = true;\n          actionsVertical = self.totalActions;\n          moreButtonTitle = self.getResource(\"render-action-launcher-less-actions\");\n        }\n\n        var templateArguments = {\n          actions: self.getPropertiesActionLaucher(actionsVertical),\n          allowSearch: properties.allowSearch,\n          isMoreActions: true,\n          isExpanded: isExpanded,\n          moreButtonTitle: moreButtonTitle };\n\n        var template = self.renderFactory.getTemplate(\"render-actionLauncher-vertical\");\n        appendContent(template, templateArguments);\n\n        function appendContent(template, templateArguments) {\n          var control = self.getControl();\n          var actionsContainer = $(\".bz-action-launcher-actions-container\", control);\n          actionsContainer.empty();\n          var html = $.fasttmpl(template, templateArguments);\n          actionsContainer.append(html);\n          self.configureHandlers();\n        }\n\n      });\n\n      /**\r\n           * Binding for click action on buttons\r\n           */\n      actionLauncherControls.on(\"click\", function () {\n        var action = {\n          guidProcess: $(this).data(\"guidprocess\"),\n          guidAction: $(this).data(\"guidaction\"),\n          displayName: $(this).data(\"display-name\"),\n          actionType: $(this).data(\"action-type\"),\n          xpathContext: $(this).data(\"xpathcontext\"),\n          readOnlyForm: $(this).data(\"readonlyform\") || false,\n          guidEntity: self.properties.guidEntity,\n          xpathActions: self.properties.xpathActions || \"\" };\n\n        self.onActionClicked(action);\n      });\n\n      /**\r\n           * Catch the typed text in the search field and filter the action list\r\n           */\n      $.expr[\":\"].FilterAction = function (entity, i, array) {\n        var search = array[3];\n        if (!search) {\n          return false;\n        }\n        return new RegExp(search, \"i\").test($(entity).text());\n      };\n      $(\"input#ui-bizagi-render-action-launcher-filter-input\", control).keyup(function () {\n        var search = $(this).val();\n        $(\".ui-bizagi-render-actionLauncher-vertical-item\", control).show(0);\n        if (!moreVerticalButton.hasClass(\"expanded\")) {\n          moreVerticalButton.trigger(\"click\");\n          $(\"input#ui-bizagi-render-action-launcher-filter-input\").val(search);\n          $(\"input#ui-bizagi-render-action-launcher-filter-input\").focus();\n        }\n        if (search) {\n          $(\".ui-bizagi-render-actionLauncher-vertical-item\", control).not(\":FilterAction(\" + search + \")\").hide(0);\n        }\n      });\n    }\n  },\n\n  configureMoreActionsHandler: function configureMoreActionsHandler() {\n    var self = this,\n    control = self.getControl();\n    var moreButton = $(\".action-launcher-more\", control);\n\n    bizagi.loader.startAndThen(\"kendo\").then(function () {\n      self.tooltip = moreButton.kendoTooltip({\n        autoHide: false,\n        content: function content(event) {\n          var tmpl = self.renderFactory.getTemplate(\"render-actionLauncher-horizontal-more\");\n          var html = $.fasttmpl(tmpl, { actions: self.getPropertiesActionLaucher(self.moreActions) });\n          return html;\n        },\n        show: function show() {\n          //add custom styles tooltip\n          $(\"div[role='tooltip']\").addClass(\"bizagi-custom-tooltip-more-actions\");\n          $(\".action-launcher-control-more\").off(\"click\").on(\"click\", function (event) {\n            var action = {\n              guidProcess: $(this).data(\"guidprocess\"),\n              guidAction: $(this).data(\"guidaction\"),\n              displayName: $(this).data(\"display-name\"),\n              actionType: $(this).data(\"action-type\"),\n              xpathContext: $(this).data(\"xpathcontext\"),\n              readOnlyForm: $(this).data(\"readonlyform\") || false,\n              xpathActions: self.properties.xpathActions || \"\" };\n\n            self.onActionClicked(action);\n            self.tooltip.hide();\n          });\n        },\n        width: 185 }).\n      data(\"kendoTooltip\");\n    });\n  },\n\n  onActionClicked: function onActionClicked(action) {\n    var self = this;\n    var control = self.getControl();\n    var properties = self.properties;\n    var multipleSelection = typeof properties.multipleSelection == \"undefined\" ? true : properties.multipleSelection;\n\n    if (multipleSelection) {\n      // If this is a form and has been queued, so open it\n      if (action.actionType == \"Form\" && self.countSameActions(action) >= 1 && !action.xpathContext) {\n        //Open action\n        $(\".action-to-execute-control[data-guidaction='\" + action.guidAction + \"'] label\", control).click();\n      } else {\n        $.when(self.actionManager(action)).done(function (act) {\n          self.executeAction(act);\n        });\n      }\n    } else\n    if (self.getValue().length > 0) {\n      self.showConfirmationDialog(action);\n    } else\n    {\n      $.when(self.actionManager(action)).done(function (act) {\n        self.executeAction(act);\n      });\n    }\n  },\n\n  notifyExecution: function notifyExecution(data, action) {\n    var self = this;\n    var notifications = new bizagi.INotifications();\n    if (data.response == \"success\") {\n      notifications.showSucessMessage(printf(self.getResource(\"render-action-launcher-success-excecution\"), action.displayName), null, {});\n    } else {\n      notifications.showErrorMessage(printf(self.getResource(\"render-action-launcher-failed-excecution\"), action.displayName), null, {});\n    }\n  },\n\n  processActionForm: function processActionForm(action) {\n    var self = this;\n    var properties = self.properties;\n    var form = self.getFormContainer();\n    var additionalXpaths = self.properties.additionalXpath.join(\",\");\n    var xpathContext = action.xpathContext ? self.properties.xpathActions + \".\" + action.xpathContext : self.properties.xpathActions;\n    var def = new $.Deferred();\n\n    // Show dialog with new form after that\n    var dialog = new bizagi.rendering.dialog.form(self.dataService, self.renderFactory, {\n      title: properties.detailLabel || bizagi.localization.getResource(\"render-grid-details-form\"),\n      showSaveButton: true,\n      cancelButtonLabel: bizagi.localization.getResource(\"render-form-dialog-box-close\"),\n      onSave: function onSave(data) {\n        // Submit the form\n        return self.dataService.multiaction().submitData({\n          action: \"SAVE\",\n          data: data,\n          xpathContext: dialog.form.properties.xpathContext, //self.properties.xpathContext,\n          idPageCache: dialog.form.properties.idPageCache,\n          isOfflineForm: false,\n          isActionStartForm: true }).\n        pipe(function (savedData) {\n          if (!action.editMode && self.countSameActions(action) == 0) {\n            action.idStartScope = savedData.IdScope;\n            //self.addActionToQueue(action);\n          }\n          def.resolve(savedData.IdScope);\n        });\n      },\n      onCancel: function onCancel(data) {\n\n      } });\n\n\n    var paramsRender = {\n      \"idForm\": action.guidProcess,\n      \"contextType\": \"start\",\n      \"idCase\": self.properties.caseId,\n      \"idWorkitem\": form.properties.typeForm != \"SummaryForm\" ? bizagi.context.idWorkitem : undefined,\n      \"additionalXpaths\": additionalXpaths,\n      \"xpathContext\": xpathContext,\n      \"idStartScope\": action.idStartScope,\n      \"surrogateKey\": self.properties.surrogatedKey,\n      \"readOnlyForm\": action.readOnlyForm,\n      \"recordXpath\": action.recordXpath };\n\n    if (action.actionType === \"Form\") {\n      paramsRender.contextType = \"entitytemplate\";\n      paramsRender.xpathContext = undefined;\n      paramsRender.guidEntity = action.guidEntity;\n      paramsRender.rewriteContextType = true;\n    }\n\n    dialog.render(paramsRender);\n\n    return def.promise();\n  },\n\n  processActionFormCollection: function processActionFormCollection(action) {\n    var self = this;\n    var properties = self.properties;\n    var form = self.getFormContainer();\n    var additionalXpaths = self.properties.additionalXpath.join(\",\");\n    var def = new $.Deferred();\n    var xpathContext = action.xpathContext ? self.properties.xpathActions + \".\" + action.xpathContext : self.properties.xpathActions;\n    var xpathPattern = \"%s[id=%s]\";\n    var xpathPatternWithoutkey = \"%s[]\";\n    var xpathContextWithKey = xpathContext != \"\" ? printf(xpathPattern, xpathContext, action.idEntity) : xpathContext;\n    var xpathContextWithoutKey = xpathContext != \"\" ? printf(xpathPatternWithoutkey, xpathContext) : xpathContext;\n\n    var dialog = new bizagi.rendering.dialog.form(self.dataService, self.renderFactory, {\n      title: properties.detailLabel || bizagi.localization.getResource(\"render-grid-details-form\"),\n      showSaveButton: true,\n      cancelButtonLabel: bizagi.localization.getResource(\"render-form-dialog-box-close\"),\n      onSave: function onSave(data) {\n        if (action.editMode) {\n          return self.dataService.multiaction().submitData({\n            action: \"SAVE\",\n            data: data,\n            xpathContext: xpathContextWithKey,\n            idPageCache: data.idPageCache,\n            isOfflineForm: false,\n            isActionStartForm: true }).\n          pipe(function (savedData) {\n            def.resolve(savedData.IdScope);\n          });\n        } else {\n          return self.dataService.addGridRecordData({\n            idRender: properties.id,\n            //xpath: properties.xpath,\n            xpathContext: xpathContext,\n            contexttype: \"start\",\n            idPageCache: data.idPageCache,\n            submitData: data }).\n          pipe(function (savedData) {\n            action.idStartScope = savedData.IdScope;\n            action.idEntity = savedData.IdEntity;\n            self.addActionToQueue(action);\n            def.resolve(savedData.IdScope);\n          });\n        }\n      },\n      onCancel: function onCancel(data) {\n\n      } });\n\n\n    dialog.render({\n      \"idForm\": action.guidProcess,\n      \"contextType\": \"start\",\n      \"idCase\": bizagi.context.idCase,\n      \"additionalXpaths\": additionalXpaths,\n      \"xpathContext\": action.editMode ? xpathContextWithKey : xpathContextWithoutKey,\n      \"idStartScope\": action.idStartScope,\n      \"surrogateKey\": self.properties.surrogatedKey,\n      \"readOnlyForm\": action.readOnlyForm,\n      \"recordXpath\": action.recordXpath });\n\n\n    return def.promise();\n  },\n\n  /**\r\n      * Process a start form\r\n      * @param args\r\n      * @return {*}\r\n      */\n  processStartForm: function processStartForm(args) {\n    var self = this;\n    var properties = self.properties;\n    var form = self.getFormContainer();\n    var def = new $.Deferred();\n    args = args || {};\n\n\n    var dialog = new bizagi.rendering.dialog.startForm(self.dataService, self.renderFactory, {\n      //showSaveButton: properties.editable,\n      maximized: properties.maximized,\n      title: args.title || \"\",\n      saveButtonLabel: self.typeForm == \"GlobalForm\" || this.typeForm == \"SummaryForm\" ? bizagi.localization.getResource(\"render-form-button-create\") : bizagi.localization.getResource(\"render-form-dialog-box-save\"),\n      onSave: function onSave(data) {\n        form.startLoading();\n\n        // Submit the form\n        return self.dataService.multiaction().submitData({\n          action: \"SAVE\",\n          data: data,\n          xpathContext: self.properties.xpathContext,\n          idPageCache: data.idPageCache,\n          isOfflineForm: false,\n          isActionStartForm: true }).\n        pipe(function (savedData) {\n          form.endLoading();\n          def.resolve(savedData.IdScope);\n        });\n      } });\n\n\n    dialog.render({\n      guidprocess: args.guidprocess,\n      idStartScope: args.idStartScope,\n      idCase: self.properties.caseId,\n      idWorkitem: form.properties.typeForm != \"SummaryForm\" ? bizagi.context.idWorkitem : undefined,\n      additionalXpaths: self.properties.additionalXpath.join(\",\"),\n      surrogatedKey: self.properties.surrogatedKey,\n      recordXpath: args.recordXpath,\n      mappingstakeholders: true });\n\n\n    return def.promise();\n  },\n\n  executeAction: function executeAction(action) {\n    var self = this;\n\n    if (self.typeForm === \"GlobalForm\" || self.typeForm === \"SummaryForm\") {\n      if (action.actionType !== \"Form\") {\n        $.when(bizagi.showConfirmationBox(bizagi.localization.getResource(\"render-action-launcher-immediatly-action-confirmation\"), null, false)).done(function (response) {\n          self.executeActionImmediately(action);\n        });\n      } else {// Remove the confirmation message by BA52657\n        self.setValue([]);\n      }\n    } else {\n      self.addActionToQueue(action);\n    }\n  },\n\n  /**\r\n      * Show confirmation dialog\r\n      * @param action\r\n      */\n  showConfirmationDialog: function showConfirmationDialog(action) {\n    var self = this;\n    self.confirmTemplate = self.renderFactory.getTemplate(\"render-actionLauncher-confirm\");\n    var message = bizagi.localization.getResource(\"render-action-launcher-single-action-confirmation\");\n    var confirmContent = $.tmpl(self.confirmTemplate, { confirmationMessage: message });\n    var confirmContentParams = {\n      resizable: false,\n      modal: true,\n      title: \"Bizagi\",\n      buttons: [] };\n\n    confirmContentParams.buttons = [\n    {\n      text: bizagi.localization.getResource(\"render-boolean-yes\"),\n      click: function click() {\n        self.setValue([]);\n        $.when(self.actionManager(action)).done(function (act) {\n          self.executeAction(act);\n        });\n        $(this).dialog(\"close\");\n      } },\n\n    {\n      text: bizagi.localization.getResource(\"render-boolean-no\"),\n      click: function click() {\n        $(this).dialog(\"close\");\n      } }];\n\n\n    $(confirmContent).dialog(confirmContentParams);\n  },\n\n  /**\r\n      * Render actual value of control and set events\r\n      * @param data\r\n      */\n  setDisplayValue: function setDisplayValue(data) {\n    var self = this;\n    var control = self.getControl();\n    var actionsToExecuteContainer = $(\".bz-action-launcher-actions-to-execute-container\", control);\n    var template = self.renderFactory.getTemplate(\"render-actionLauncher-actions-to-execute\");\n\n    self.configureQueueVisibility();\n    $.when(self.deferredActions).done(function (listOfActions) {\n      var getMappingAction = function getMappingAction(guidAction) {\n        var mapping = [];\n        $.each(listOfActions, function (key, value) {\n          if (value[4] == guidAction) {\n            mapping = value;\n          }\n        });\n        return mapping;\n\n      };\n      $.each(data, function (key, value) {\n        var mapping = getMappingAction(value.guidAction);\n        data[key].displayName = mapping[1];\n        data[key].guidProcess = mapping[0];\n        data[key].actionType = mapping[3];\n        data[key].xpathContext = mapping[5];\n        data[key].readOnlyForm = mapping[6];\n\n        if (data[key].params && data[key].params.idStartScope) {\n          data[key].idStartScope = data[key].params.idStartScope;\n        }\n        if (data[key].params && data[key].params.idPageCache) {\n          data[key].idPageCache = data[key].params.idPageCache;\n        }\n        if (data[key].params && data[key].params.idEntity) {\n          data[key].idEntity = data[key].params.idEntity;\n        }\n      });\n      $.when($.fasttmpl(template, { actions: data })).done(function (html) {\n        actionsToExecuteContainer.empty();\n        actionsToExecuteContainer.append(html);\n        var removeActionSelector = $(\".action-to-execute-control i\", actionsToExecuteContainer);\n        var openActionSelector = $(\".action-to-execute-control label\", actionsToExecuteContainer);\n        removeActionSelector.bind(\"click\", function () {\n          var index = $(this).parent().data(\"index\");\n          self.removeActionToQueue(index);\n        });\n        openActionSelector.bind(\"click\", function () {\n          var target = $(this).parent();\n          var type = target.data(\"actiontype\");\n          var guidprocess = target.data(\"guidprocess\");\n          var idStartScope = target.data(\"idstartscope\");\n          var title = target.data(\"title\");\n          var xpathContext = target.data(\"xpathcontext\");\n          var readOnlyForm = target.data(\"readonlyform\") || false;\n          var idEntity = target.data(\"identity\") || \"\";\n          var guidAction = target.data(\"guidaction\");\n          var recordXpath = xpathContext || self.properties.xpathContext;\n          switch (type) {\n            case \"Process\":\n              if (idStartScope) {\n                self.processStartForm({\n                  guidprocess: guidprocess,\n                  idStartScope: idStartScope,\n                  title: title,\n                  xpathContext: xpathContext,\n                  recordXpath: recordXpath });\n\n              }\n              break;\n            case \"Form\":\n\n              var action = {\n                guidProcess: guidprocess,\n                idStartScope: idStartScope,\n                editMode: true,\n                xpathContext: xpathContext,\n                readOnlyForm: readOnlyForm,\n                idEntity: idEntity,\n                recordXpath: recordXpath };\n\n\n              if (action.xpathContext) {\n                self.processActionFormCollection(action);\n              } else {\n                //Add parameters if action form\n                var extraParameters = {};\n                var dataAction = self.value.filter(function (item) {\n                  return item.guidAction == guidAction;\n                });\n                if (dataAction.length > 0) {\n                  extraParameters = {\n                    actionType: \"Form\",\n                    contextType: \"entitytemplate\",\n                    guidEntity: self.properties.guidEntity || dataAction[0].guidEntity };\n\n                }\n                self.processActionForm($.extend(action, extraParameters));\n              }\n              break;\n            case \"Rule\":\n              // Rules dont have forms or something like that\n              break;}\n\n        });\n      });\n    });\n  },\n  /**\r\n      * Show container if it has actions\r\n      */\n  configureQueueVisibility: function configureQueueVisibility() {\n    var self = this;\n    var control = self.getControl();\n    var actionsToExecuteContainer = $(\".bz-action-launcher-actions-to-execute-container\", control);\n    var actionsToExecuteTitle = $(\".actions-to-execute-title\", control);\n    if (self.getValue().length > 0) {\n      actionsToExecuteContainer.show();\n      actionsToExecuteTitle.show();\n    } else {\n      actionsToExecuteContainer.hide();\n      actionsToExecuteTitle.hide();\n    }\n  } });","/**\r\n * Desktop definition of range control\r\n *\r\n * @author: Andres Fernando Munoz\r\n */\n\n// Extends from render Desktop base\nbizagi.rendering.desktop.render.extend(\"bizagi.rendering.desktop.range\", bizagi.rendering.range.prototype);\n// Extends itself\nbizagi.rendering.desktop.range.extend(\"bizagi.rendering.desktop.range\", {}, {\n\n  /**\r\n                                                                               * Render a specific implementation for Desktop device\r\n                                                                               */\n  postRender: function postRender() {\n    var self = this;\n    var properties = self.properties;\n  },\n  /**\r\n      * Render actual value of control and set events\r\n      * @param data\r\n      */\n  setDisplayValue: function setDisplayValue(data) {\n    var self = this;\n    var control = self.getControl();\n  } });","/**\r\n * Desktop definition of range date control\r\n *\r\n * @author: Andres Fernando Munoz\r\n */\n\n// Extends from range desktop base\nbizagi.rendering.desktop.range.extend(\"bizagi.rendering.desktop.rangeDate\", bizagi.rendering.rangeDate.prototype);\n// Extends itself\nbizagi.rendering.desktop.rangeDate.extend(\"bizagi.rendering.desktop.rangeDate\", {}, {\n\n  /**\r\n                                                                                       * Render a specific implementation for Desktop device\r\n                                                                                       */\n  postRender: function postRender() {\n    var self = this;\n    self.defineRangeControl();\n  } });","/**\r\n * Desktop definition of range money control\r\n *\r\n * @author: Andres Fernando Munoz\r\n */\n\n// Extends from range desktop base\nbizagi.rendering.desktop.range.extend(\"bizagi.rendering.desktop.rangeMoney\", bizagi.rendering.rangeMoney.prototype);\n// Extends itself\nbizagi.rendering.desktop.rangeMoney.extend(\"bizagi.rendering.desktop.rangeMoney\", {}, {\n\n  /**\r\n                                                                                         * Render a specific implementation for Desktop device\r\n                                                                                         */\n  postRender: function postRender() {\n    var self = this;\n    self.defineRangeControl();\n  },\n\n  /**\r\n      * Render actual value of control and set events\r\n      * @param data\r\n      */\n  setDisplayValue: function setDisplayValue(data) {\n    var self = this;\n    var control = self.getControl();\n  } });","/**\r\n * Desktop definition of range number control\r\n *\r\n * @author: Andres Fernando Munoz\r\n */\n\n// Extends from range desktop base\nbizagi.rendering.desktop.range.extend(\"bizagi.rendering.desktop.rangeNumber\", bizagi.rendering.rangeNumber.prototype);\n// Extends itself\nbizagi.rendering.desktop.rangeNumber.extend(\"bizagi.rendering.desktop.rangeNumber\", {}, {\n\n  /**\r\n                                                                                           * Render a specific implementation for Desktop device\r\n                                                                                           */\n  postRender: function postRender() {\n    this.defineRangeControl();\n  } });","/**\r\n * Desktop definition of entity template\r\n *\r\n * @author: Andrs Fernando Muoz\r\n * based on action launcher control\r\n */\n\nbizagi.rendering.desktop.actionLauncher.extend(\"bizagi.rendering.desktop.entityTemplate\", {}, {\n\n  /**\r\n                                                                                                 *\r\n                                                                                                 * @param data\r\n                                                                                                 */\n  initializeData: function initializeData(data) {\n    var self = this,\n    data = data || {},\n    properties = data.properties || {};\n\n    self._super(data);\n    self.properties.allowactions = typeof properties.allowactions != \"undefined\" ? bizagi.util.parseBoolean(properties.allowactions) : false;\n    self.properties.templatetype = typeof properties.templatetype != \"undefined\" ? properties.templatetype : 'default';\n  },\n\n  /**\r\n      * Render a specific implementation for Desktop device\r\n      */\n  postRender: function postRender() {\n    var self = this;\n    var properties = self.properties;\n    var mode = self.getMode();\n    var html, template;\n    var control = self.getControl();\n\n    if (mode == \"design\" || !self.properties.surrogatedKey) {\n      return \"\";\n    }\n\n    self.configureQueueVisibility();\n\n    // Define params to get template\n    $.when(self.dataService.multiaction().getPropertyData(self.processPropertyValueDataTmplArgs)).\n    done(function (templateData) {\n\n      // Put the guidTemplate in the request for the multiaction loadtemplate.\n      if (typeof templateData.templateGuid !== \"undefined\" && templateData.templateGuid) {\n        templateData.isDefaultTemplate = false;\n        templateData.guidTemplate = templateData.templateGuid;\n        delete templateData[\"templateGuid\"];\n      }\n\n      $.when(self.engine.render(templateData, self.processPropertyValueDataTmplArgs)).done(function (template) {\n        var htmlTemplate = template;\n        var actionsContainer = $(\".bz-action-launcher-actions-container\", control);\n        template = self.renderFactory.getTemplate(\"render-actionLauncher-horizontal\");\n\n        if (properties.allowactions) {\n          $.when(self.dataService.multiaction().getActions(self.processPropertyValueArgs)).done(function (response) {\n            self.deferredActions.resolve(response);\n            var actions = bizagi.clone(response);\n            var moreActionsManager = self.moreActionsManager(actions);\n            var isMoreActions = moreActionsManager.isMoreActions;\n            actions = moreActionsManager.actions;\n\n            var html = $.fasttmpl(template, { actions: actions, template: true, isMoreActions: isMoreActions, allowactions: properties.allowactions });\n            actionsContainer.append(html);\n            actionsContainer.find('.actions-container.actions-container-template').append(htmlTemplate);\n\n            self.configureHandlers();\n          }).fail(function (error) {\n            //TODO: do something\n          });\n        } else\n        {\n          var html = $.fasttmpl(template, { template: true, allowactions: properties.allowactions });\n\n          actionsContainer.append(html);\n          actionsContainer.find('.actions-container.actions-container-template').append(htmlTemplate);\n        }\n      });\n    }).fail(function (error) {\n      //TODO: do something\n    });\n    self.engine.subscribe('onLoadDataNavigation', function (ev, params) {\n      bizagi.loader.start(\"entity-engine-view\").then(function () {\n        params.skipRefresh = true;\n        $(document).triggerHandler(\"showDialogWidget\", {\n          widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_DIALOGNAV,\n          data: params,\n          modalParameters: {\n            refreshInbox: false,\n            title: params.data.displayName },\n\n          maximizeOnly: false });\n\n      });\n    });\n  },\n\n  /**\r\n      * Add binding to html elements\r\n      */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    var formContainer = self.getFormContainer();\n    if (typeof formContainer.params.printversion === \"undefined\" || formContainer.params.printversion == false) {\n      var control = self.getControl();\n      var properties = self.properties;\n      var entityTemplateControls = $(\".action-launcher-control\", control);\n\n      // Binding for a tooltip when max items is excedded\n      self.configureMoreActionsHandler();\n\n      // Binding for click action on buttons\n      entityTemplateControls.on(\"click\", function () {\n        var action = {\n          guidProcess: $(this).data(\"guidprocess\"),\n          guidAction: $(this).data(\"guidaction\"),\n          displayName: $(this).data(\"display-name\"),\n          actionType: $(this).data(\"action-type\"),\n          xpathContext: $(this).data(\"xpathcontext\"),\n          xpathActions: self.properties.xpathActions || \"\" };\n\n\n        if (action.actionType === \"Form\") {\n          action.xpathContext = undefined;\n          action.contextType = \"entitytemplate\";\n          action.guidEntity = self.properties.guidEntity;\n        }\n        self.onActionClicked(action);\n      });\n    }\n\n\n  } });","/*  \r\n *   Name: BizAgi Desktop Render list Extension\r\n *   Author: Ivn Ricardo Taimal Narvez\r\n *   Comments:\r\n *   -   This script will redefine the list render class to adjust to desktop devices\r\n */\n\n// Extends from render Desktop base\nbizagi.rendering.desktop.render.extend(\"bizagi.rendering.desktop.checkList\", bizagi.rendering.checkList.prototype);\n// Extends itself\nbizagi.rendering.desktop.checkList.extend(\"bizagi.rendering.desktop.checkList\", {}, {\n\n  /*\r\n                                                                                       *   Template method to implement in each device to customize each render after processed\r\n                                                                                       */\n  postRender: function postRender() {\n    var self = this;\n    var control = self.getControl();\n    // Call base \n    this._super();\n    // Set control container to behave as a block\n    control.addClass(\"ui-bizagi-render-display-block\");\n    self.properties.unique = Math.ceil(Math.random() * 1000);\n    // Apply plugin\n    $(\".ui-bizagi-render-checkList-label\", self.checkListGroup).check();\n  },\n\n  /*\r\n      *   Template method to implement in each device to customize the render's behaviour to add handlers\r\n      */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    // Call base\n    self._super();\n    // Bind change event\n    if (!bizagi.util.isIE()) {\n      // PLUGIN IMPLEMENTATION\n      //todo: change bind type for IE\n      $(\"input[type=checkbox]\", self.checkListGroup).bind(\"change\", function (evt, ui) {\n        var itemId = $(this).data(\"item-guid\");\n        var checked = $(this).is(\":checked\");\n        self.updateDisplay($(this), checked);\n        self.onCheckListGroupChange(itemId, checked);\n      });\n    } else {\n      // NON PLUGIN IMPLEMENTATION\n      $(\"input[type=checkbox]\", self.checkListGroup).bind(\"change\", function (evt, ui) {\n        var itemId = $(this).data(\"item-guid\");\n        var checked = $(this).is(\":checked\");\n        self.updateDisplay($(this), checked);\n        self.onCheckListGroupChange(itemId, checked);\n      });\n    }\n  },\n\n  updateDisplay: function updateDisplay(element, checked) {\n    var self = this;\n    var item = element.closest(\".ui-bizagi-render-checkList-item\");\n    if (checked) {\n      item.addClass('checked');\n    } else {\n      item.removeClass('checked');\n    }\n  },\n\n  onCheckListGroupChange: function onCheckListGroupChange(itemId, checked) {\n    var self = this;\n    var item;\n    var items = $.grep(self.properties.items, function (element, index) {\n      return element.guid === itemId;\n    });\n    if (items && items.length > 0) {\n      item = items[0];\n    }\n    item.checked = checked;\n  },\n\n  /*\r\n      *   Sets the value in the rendered control\r\n      */\n  clearDisplayValue: function clearDisplayValue() {\n    var self = this;\n    if (!bizagi.util.isIE()) {\n      // PLUGIN IMPLEMENTATION\n      $(\"input[type=checkbox]\", self.checkListGroup).check(\"uncheckItem\");\n    } else\n    {\n      // NON PLUGIN IMPLEMENTATION\n      $(\"input[type=checkbox]\", self.checkListGroup).removeAttr(\"checked\");\n    }\n  },\n\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n  } });","/*  \r\n *   Name: BizAgi Desktop Render list Extension\r\n *   Author: Ivn Ricardo Taimal Narvez\r\n *   Comments:\r\n *   -   This script will redefine the list render class to adjust to desktop devices\r\n */\n\n// Extends from base list\nbizagi.rendering.desktop.checkList.extend(\"bizagi.rendering.desktop.activityCheckList\", {}, {\n\n  /*\r\n                                                                                               *   Template method to implement in each device to customize each render after processed\r\n                                                                                               */\n  postRender: function postRender() {\n    var self = this;\n    var control = self.getControl();\n    // Call base\n    this._super();\n    self.addButton = $(\".ui-bizagi-render-checkList-add-item\", self.element);\n    self.newItemName = $(\".ui-bizagi-render-checkList-input-name\", self.control);\n    self.separator = $(\".ui-bizagi-render-checkList-separator\", self.element);\n    self.goalActivity = $(\".ui-bizagi-render-checkList-goal-activity\", self.element);\n    self.additionalElements();\n    self.notifyLoadItems();\n\n  },\n\n  renderReadOnly: function renderReadOnly() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"checkList-disabled\");\n    return $.fasttmpl(template, { items: this.value });\n  },\n\n  additionalElements: function additionalElements() {\n    var self = this;\n    var control = self.getControl();\n    var activityWorkTitle = this.getResource(\"render-activity-check-list-activitywork\") + \" (\" + self.properties.activityWork + \"%)\";\n    var activityFormTitle = this.getResource(\"render-activity-check-list-form\");\n\n    if (!(self.addButton && self.addButton.length > 0)) {\n      var $divContainer = $(\"<div/>\").addClass(\"ui-bizagi-render-checkList-add-item\");\n      $divContainer.append($(\"<h4 />\").text(bizagi.localization.getResource(\"workportal-project-plan-activity-work-title\")));\n      $divContainer.append($(\"<button class=''/>\").text(\"+ \" + bizagi.localization.getResource(\"workportal-project-plan-activity-action-add\")));\n      self.element.prepend($divContainer);\n    }\n    if (!(self.separator && self.separator.length > 0)) {\n      self.element.append($(\"<div/>\").addClass(\"ui-bizagi-render-checkList-separator\").append($(\"<span/>\")));\n    }\n    if (!(self.goalActivity && self.goalActivity.length > 0)) {\n      if (self.properties.activityDescription && self.properties.activityDescription !== \"\") {\n        self.element.prepend($(\"<div/>\").addClass(\"ui-bizagi-render-checkList-goal-activity\").append(\"<h3><span class='ui-bizagi-wp-bold'>\" +\n        bizagi.localization.getResource(\"workportal-project-plan-activity-goal\") +\n        \": </span><span>\" + self.properties.activityDescription + \"</span></h3>\"));\n      }\n    }\n  },\n\n  notifyLoadItems: function notifyLoadItems() {\n    var self = this;\n    setTimeout(function () {\n      self.triggerGlobalHandler(\"onLoadDataItemsFromFormActivityPlan\", { \"items\": self.properties.items, \"activityWork\": self.properties.activityWork });\n    }, 100);\n  },\n\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    var control = self.getControl();\n    this._super();\n    $(\".ui-bizagi-render-checkList-add-item button\", self.element).unbind(\"click\").click(function () {\n      var itemSelected = $(\".ui-bizagi-render-checkList-item.selected\", self.control);\n      if (itemSelected.length <= 0) {\n        self.prepareNewItem();\n      } else {\n        $(\".ui-bizagi-render-checkList-input-name\", itemSelected).focus();\n      }\n    });\n\n    $(\".item-button.delete\", self.checkListGroup).bind(\"click\", function (evt, ui) {\n      var itemId = $(this).closest(\".ui-bizagi-render-checkList-item\").data(\"item-guid\");\n      self.deleteItem(itemId);\n    });\n\n    $(\"label.item-name\", self.checkListGroup).bind(\"click\", function (evt, ui) {\n      var itemSelected = $(this).closest(\".ui-bizagi-render-checkList-item\");\n      var itemId = itemSelected.data(\"item-guid\");\n      self.selectItem(itemId);\n    });\n  },\n\n  selectItem: function selectItem(itemId) {\n    var self = this;\n    for (var i = 0; i < self.properties.items.length; i++) {\n      if (self.properties.items[i].guid === itemId) {\n        self.properties.items[i].selected = true;\n      } else {\n        self.properties.items[i].selected = false;\n      }\n    }\n    self.repaintControl();\n    var itemSelected = $(\".ui-bizagi-render-checkList-item.selected\");\n    var itemSelectedName = $(\".ui-bizagi-render-checkList-input-name\", itemSelected);\n    var itemContent = itemSelectedName.val();\n    itemSelectedName.focus();\n    itemSelectedName[0].setSelectionRange(itemContent.length, itemContent.length);\n    self.configureHandlers();\n    self.addSelectedHandlers();\n  },\n\n  deleteItem: function deleteItem(itemId) {\n    var self = this;\n    for (var i = 0; i < self.properties.items.length; i++) {\n      if (self.properties.items[i].guid === itemId) {\n        self.properties.items.splice(i, 1);\n        break;\n      }\n    }\n    self.setValue(self.properties.items);\n    self.repaintControl();\n    self.configureHandlers();\n    self.refreshValue(self.properties.items);\n  },\n\n  prepareNewItem: function prepareNewItem() {\n    var self = this;\n    var newItem = {\n      guid: Math.guid(),\n      resolved: false,\n      name: \"\",\n      selected: true };\n\n    self.properties.items.push(newItem);\n    self.repaintControl();\n    self.configureHandlers();\n    self.addSelectedHandlers();\n  },\n\n  addSelectedHandlers: function addSelectedHandlers() {\n    var self = this;\n    var itemSelected = $(\".ui-bizagi-render-checkList-item.selected\", self.control);\n    var itemSelectedName = $(\".ui-bizagi-render-checkList-input-name\", itemSelected);\n    itemSelectedName.focus();\n    itemSelectedName.blur(function () {\n      var newItemName = itemSelectedName.val();\n      if (newItemName && newItemName !== \"\") {\n        self.addItem();\n      } else\n      {\n        self.properties.items.splice(self.properties.items.length - 1, 1);\n        self.setValue(self.properties.items);\n        self.repaintControl();\n        self.configureHandlers();\n      }\n    });\n    itemSelectedName.keypress(function (event) {\n      if (event.which == 13) {\n        event.preventDefault();\n        var newItemName = itemSelectedName.val();\n        if (newItemName && newItemName !== \"\") {\n          self.addItem();\n          self.prepareNewItem();\n        }\n      }\n    });\n  },\n\n  addItem: function addItem() {\n    var self = this;\n    var control = self.getControl();\n    var itemSelected = $(\".ui-bizagi-render-checkList-item.selected\", self.control);\n    var itemSelectedName = $(\".ui-bizagi-render-checkList-input-name\", itemSelected);\n    var newItemName = itemSelectedName.val();\n    self.addButton.show();\n    $.each(self.properties.items, function (index, item) {\n      if (item.selected) {\n        item.name = newItemName;\n        item.selected = false;\n      }\n    });\n    self.updateOriginalValue();\n    self.setValue(self.properties.items);\n    self.repaintControl();\n    self.configureHandlers();\n    self.refreshValue(self.properties.items);\n  },\n\n  repaintControl: function repaintControl() {\n    var self = this;\n    var control = self.getControl();\n    var checkListHtml = self.renderControl();\n    $(\".ui-bizagi-render-checkList\", self.control).replaceWith(checkListHtml);\n    self.postRender();\n  },\n\n  onCheckListGroupChange: function onCheckListGroupChange(itemId, checked) {\n    var self = this;\n    var item;\n    var items = $.grep(self.properties.items, function (element, index) {\n      return element.guid === itemId;\n    });\n    if (items && items.length > 0) {\n      item = items[0];\n    }\n    item.resolved = checked;\n    self.setValue(self.properties.items);\n    self.refreshValue(self.properties.items);\n  },\n\n  refreshValue: function refreshValue(items) {\n    var self = this,\n    control = self.getControl(),\n    length = items.length,\n    completed = 0;\n\n    for (var i = 0; i < length; i++) {\n      if (items[i].resolved) {\n        completed += 1;\n      }\n    }\n\n    if (length > 0) {\n      self.properties.activityWork = Math.floor(100 * completed / length);\n    } else\n    {\n      self.properties.activityWork = 0;\n    }\n\n    var html = this.getResource(\"render-activity-check-list-activitywork\") + \" (\" + self.properties.activityWork + \"%)\";\n    $(\".ui-bizagi-render-checkList-activity-work span\", self.element).html(html);\n    self.triggerGlobalHandler(\"onLoadDataItemsFromFormActivityPlan\", { \"items\": self.properties.items, \"activityWork\": self.properties.activityWork });\n  },\n\n  getValue: function getValue(data) {\n    var self = this;\n    return self.value || [];\n  },\n\n  controlValueIsChanged: function controlValueIsChanged() {\n    var self = this;\n    var originalValue = JSON.stringify(self.properties.originalValue);\n    var newValue = JSON.stringify(self.value);\n    return originalValue !== newValue;\n  },\n\n  /**\r\n      * Validate if all checked items on activity\r\n      * @returns {boolean}\r\n      */\n  allCheckedItems: function allCheckedItems() {\n    var self = this;\n    var response = false;\n    if (Array.isArray(self.value)) {\n      response = self.value.every(function (item) {\n        return item.resolved == true;\n      });\n    }\n    return response;\n  },\n\n  /*\r\n      *   Updates original value for some comparisons\r\n      */\n  updateOriginalValue: function updateOriginalValue() {\n    var self = this;\n    self.properties.originalValue = bizagi.clone(self.value);\n  },\n  /*\r\n      *   Add the render data to the given collection in order to send data to the server\r\n      */\n  collectData: function collectData(renderValues) {\n    var self = this;\n    var properties = self.properties;\n\n    // Add the render value\n    var xpath = properties.xpath;\n    var value = self.getValue();\n    var idActivity = self.properties.idActivity;\n\n    var validationResolvedItems = true;\n    var lastActionButton = self.getFormContainer().getLastActionButton();\n    if (lastActionButton && lastActionButton.action == \"next\") {\n      validationResolvedItems = self.allCheckedItems();\n    }\n\n    if (self.controlValueIsChanged() && validationResolvedItems) {\n      // Filter by valid xpaths and valid values\n      if (!bizagi.util.isEmpty(xpath) && !bizagi.util.isEmpty(idActivity)) {\n        if (Array.isArray(value)) {\n          var data = {\n            idActivity: idActivity,\n            items: value };\n\n          renderValues[properties.xpath] = JSON.stringify(data);\n        } else if (value === \"\") {\n          renderValues[properties.xpath] = \"\";\n        }\n      }\n    }\n  },\n  isValid: function isValid(invalidElements) {\n    var self = this,\n    properties = self.properties,\n    message;\n    var items = self.getValue();\n    var valid = true;\n    message = self.getResource(\"render-activity-check-list-validation\");\n    for (var i = 0; i < items.length; i += 1) {\n      var item = items[i];\n      if (!item.resolved) {\n        invalidElements.push({\n          xpath: properties.xpath,\n          message: message });\n\n        valid = false;\n        break;\n      }\n    }\n    return valid;\n  } });","/*\r\n*   Name: BizAgi Desktop Column Decorator Extension\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will redefine the column decorator class to adjust to desktop devices\r\n*/\n\n// Extends from columns desktop base\nbizagi.rendering.desktop.columns.column.extend(\"bizagi.rendering.desktop.columns.combo\", bizagi.rendering.columns.combo.prototype);\n// Extends itself\nbizagi.rendering.desktop.columns.combo.extend(\"bizagi.rendering.desktop.columns.combo\", {}, {\n\n  /*\r\n                                                                                              *   Post process the element after it has been rendered\r\n                                                                                              */\n  postRender: function postRender(surrogateKey, cell, tableCell) {\n    // Call base\n    this._super(surrogateKey, cell, tableCell);\n\n    var self = this,\n    mode = self.getMode();\n\n    // Apply styles to input\n    var input = $(\".ui-selectmenu-status\", cell);\n    this.applyColumnStyles(input);\n\n    // Remove padding for td\n    if (this.properties.editable && tableCell) {\n      tableCell.addClass(\"ui-bizagi-cell-combo\");\n    }\n\n    if (mode === \"execution\") {\n\n      var decorated = this.getDecorated(surrogateKey),\n      control = decorated.getControl();\n\n      // Check if its new row\n      if (control.parents(\"tr\").data(\"new-row\")) {\n        //Set the column with this attribute, so when the control is evaluated in isValid(), validated\n        //also if it is required, and belongs from a new row\n        self.isNewRow = true;\n      } else {\n        self.isNewRow = false;\n      }\n    }\n  },\n\n  /*\r\n     *   Post process the element after it has been rendered\r\n     */\n  postRenderReadOnly: function postRenderReadOnly(surrogateKey, cell, tableCell) {\n    // Call base\n    this._super(surrogateKey, cell, tableCell);\n\n    // Apply styles to input\n    var input = $(\".ui-selectmenu-status\", cell);\n    this.applyColumnStyles(input);\n\n    // Add padding for td\n    if (tableCell)\n    tableCell.removeClass(\"ui-bizagi-cell-combo\");\n  },\n\n  /*\r\n      *   Apply custom overrides to each decorated instance\r\n      */\n  applyOverrides: function applyOverrides(decorated) {\n    var self = this;\n    this._super(decorated);\n    // Hacks the upload render to add features\n    decorated.getUploadXpath = this.getUploadXpath;\n\n    decorated.cleanData = function () {\n      var self = this;\n\n      self.value = self.properties.value = self.selectedValue = { id: 0, value: self.getResource(\"render-combo-empty-value\") };\n      self.setValue(self.value);\n      var control = self.getControl();\n      var input = control.find(\"input\");\n      if (input) {\n        input.val(self.getValue().value);\n      }\n    };\n  } });","/**\r\n *   Name: Bizagi Desktop Render Document Generator Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the document generator render class to adjust to desktop devices\r\n */\n\n// Extends from columns desktop base\nbizagi.rendering.desktop.columns.column.extend(\"bizagi.rendering.desktop.columns.document\", bizagi.rendering.columns.document.prototype);\n// Extends itself\nbizagi.rendering.desktop.columns.document.extend(\"bizagi.rendering.desktop.columns.document\", {}, {\n\n  /**\r\n                                                                                                     * Apply custom overrides to each decorated instance\r\n                                                                                                     * @param decorated\r\n                                                                                                     */\n  applyOverrides: function applyOverrides(decorated) {\n    var self = this;\n    var mode = self.getMode();\n    self._super(decorated);\n\n    decorated.getControlHtml = self.getControlHtml;\n\n    if (mode !== \"design\") {\n      self.surrogateKey = decorated.surrogateKey;\n\n      decorated.getXpath = this.getXpath;\n      decorated.getDocumentXpath = this.getDocumentXpath;\n      decorated.getContextXpath = this.getContextXpath;\n      decorated.documentTemplateGenerate = this.documentTemplateGenerate;\n      decorated.preRenderControl = this.preRenderControl;\n      decorated.deleteDocumentTemplate = this.deleteDocumentTemplate;\n      decorated.getTemplateItem = this.getTemplateItem;\n      decorated.properties.xpathContext = self.getContextXpath();\n    }\n  },\n\n  getTemplateItem: function getTemplateItem() {\n    return \"document-column-item\";\n  },\n\n  /**\r\n      * Creates the event of generation of templates.\r\n      */\n  documentTemplateGenerate: function documentTemplateGenerate() {\n    var self = this;\n    var properties = self.properties;\n    self.startLoading();\n    //Get the context xPath\n    properties.xpathcontext = self.getContextXpath();\n    properties.xpath = self.getDocumentXpath(properties.xpath);\n    properties.buttonExecuted = true;\n\n    var grid = self.parent;\n    var form = self.getFormContainer();\n\n    $.when(form.submitData()).\n    done(function () {\n      $.when(self.dataService.generateDocumentTemplate(properties)).\n      done(function (response) {\n        $.when(grid.refresh()).\n        done(function () {\n          self.autoOpenDocuments();\n        });\n\n        self.endLoading();\n      }).fail(function () {\n        self.showErrorMessage();\n        self.endLoading();\n      });\n    }).fail(function (message) {\n      // Add error messages\n      self.getFormContainer().addErrorMessage(message);\n      self.endLoading();\n    });\n\n    properties.buttonExecuted = false;\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @param template\r\n      * @param mode\r\n      * @param downloadalldocuments\r\n      * @param allowGenerate\r\n      * @param properties\r\n      * @param noFiles\r\n      * @returns {*}\r\n      */\n  getControlHtml: function getControlHtml(template, mode, downloadalldocuments, allowGenerate, properties, noFiles) {\n    var self = this;\n    var isInlineRow = true;\n\n    for (var i = 0; i < self.parent.properties.data.rows.length; i++) {\n      if (self.parent.properties.data.rows[i][0] == self.surrogateKey) {\n        isInlineRow = false;\n        break;\n      }\n    }\n\n    var html = $.fasttmpl(template, {\n      noActivateButton: isInlineRow,\n      editable: mode !== \"execution\",\n      downloadalldocuments: downloadalldocuments,\n      required: properties.required,\n      allowgenerate: allowGenerate,\n      xpath: self.getXpath(properties.xpath),\n      append: properties.append ? properties.append : false,\n      caption: properties.caption,\n      noFiles: noFiles,\n      allowSendInMail: properties.allowSendInMail,\n      mode: mode });\n\n\n    return html.replace(\"ui-bizagi-document-upload-item-design\", \"ui-bizagi-document-upload-item-design-column\");\n  },\n\n  /**\r\n      * Apply custom overrides to each decorated instance\r\n      * @param xpath\r\n      * @returns {string}\r\n      */\n  getXpath: function getXpath(xpath) {\n    var xpathPath = xpath;\n    var index = xpathPath.indexOf(this.grid.properties.xpath);\n\n    if (index != -1) {\n      xpathPath = xpathPath.substr(index + this.grid.properties.xpath.length + 1);\n    }\n\n    return this.grid.properties.xpath + \"[id=\" + this.surrogateKey + \"].\" + xpathPath;\n  },\n\n  /**\r\n      * Returns the xpath to be used\r\n      * @param xpath\r\n      * @returns {*|string}\r\n      */\n  getDocumentXpath: function getDocumentXpath(xpath) {\n    var xpathPath = xpath;\n    var index = xpathPath.indexOf(this.grid.properties.xpath);\n\n    if (index != -1) {\n      xpathPath = xpathPath.substr(index + this.grid.properties.xpath.length + 1);\n    }\n\n    return xpathPath;\n  },\n\n  /**\r\n      * Post process the element after it has been rendered\r\n      * @param surrogateKey\r\n      * @param cell\r\n      * @param tableCell\r\n      */\n  postRenderReadOnly: function postRenderReadOnly(surrogateKey, cell, tableCell) {\n    // Call base\n    this._super(surrogateKey, cell, tableCell);\n  },\n\n  /**\r\n      * Returns the xpath to be used\r\n      * @returns {string}\r\n      */\n  getContextXpath: function getContextXpath() {\n    var self = this;\n    var form = self.getFormContainer();\n    var xpathContext = form.properties.xpathContext ? form.properties.xpathContext + \".\" : \"\";\n    return xpathContext + this.grid.properties.xpath + \"[id=\" + this.surrogateKey + \"]\";\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      */\n  preRenderControl: function preRenderControl() {\n    if (this.value != undefined && this.properties.value != undefined) {\n      this.properties.value = this.value;\n    }\n  },\n\n  /**\r\n      * Creates the event of generation of templates.\r\n      * @param filename\r\n      */\n  deleteDocumentTemplate: function deleteDocumentTemplate(filename) {\n    var self = this;\n    var grid = self.parent;\n    var params = {};\n\n    params.xpath = self.properties.xpath + \"[fileName='\" + filename + \"']\";\n    params.idRender = self.properties.id;\n    params.xpathContext = self.getContextXpath();\n    params.idPageCache = self.properties.idPageCache;\n\n    $.when(self.dataService.deleteUploadFile(params)).done(function () {\n      grid.refresh();\n    });\n  } });","/*\r\n*   Name: BizAgi Desktop Letter Column Decorator Extension\r\n*   Author: Alexander Mejia\r\n*   Comments:\r\n*   -   This script will redefine the letter column decorator class to adjust to desktop devices\r\n*/\n\n// Extends from columns desktop base\nbizagi.rendering.desktop.columns.column.extend(\"bizagi.rendering.desktop.columns.letter\", bizagi.rendering.columns.letter.prototype);\n// Extends itself\nbizagi.rendering.desktop.columns.letter.extend(\"bizagi.rendering.desktop.columns.letter\", {}, {\n\n  /*\r\n                                                                                                *   Apply custom overrides to each decorated instance\r\n                                                                                                */\n  applyOverrides: function applyOverrides(decorated) {\n    var self = this;\n    var properties = self.properties;\n    var mode = self.getMode();\n\n    //Call base\n    self._super(decorated);\n\n    // Hacks some methods to add features\n    decorated.getContextXpath = self.getContextXpath;\n    decorated.getXpath = self.getXpath;\n    decorated.getControl = self.getControl;\n    decorated.setDisplayValue = self.setDisplayValue;\n\n    decorated.postRenderReadOnly = function (element) {\n      var html = decorated.renderReadOnly.apply(decorated);\n      var control = $(\".ui-bizagi-cell\", element);\n      control.append(html);\n    };\n  },\n\n  /*\r\n     *   Returns the current context xpath  \r\n     */\n  getContextXpath: function getContextXpath() {\n    var self = this;\n    var mode = self.getMode();\n    var properties = self.properties;\n\n    if (mode === \"execution\") {\n\n      return properties.xpathContext && properties.xpathContext.length > 0 ?\n      properties.xpathContext + \".\" + self.grid.properties.xpath + \"[id=\" + self.surrogateKey + \"]\" :\n      self.grid.properties.xpath + \"[id=\" + self.surrogateKey + \"]\";\n    }\n\n    return \"\";\n\n  },\n\n  /*\r\n     *   Returns the current xpath  \r\n     */\n  getXpath: function getXpath() {\n    var self = this;\n    var properties = self.properties;\n\n    var xpathPath = properties.xpath;\n    var index = xpathPath.indexOf(self.grid.properties.xpath);\n    if (index != -1) {xpathPath = xpathPath.substr(index + self.grid.properties.xpath.length + 1);}\n\n    return xpathPath;\n  },\n\n  /* \r\n     * Post process the element after it has been rendered\r\n     */\n  postRender: function postRender(surrogateKey, cell) {\n\n    // Call base\n    this._super(surrogateKey, cell);\n\n    var self = this;\n    var mode = self.getMode();\n\n    this.setSurrogateKey(surrogateKey);\n    if (mode == \"execution\") {\n\n      var decorated = this.getDecorated(surrogateKey);\n      var control = decorated.getControl();\n\n      // Check if its new row\n      if (control.parents(\"tr\").data(\"new-row\")) {\n        // Show message:  Please save record before to generate a letter\n        control.html(bizagi.localization.getResource('render-grid-column-letter-mandatory-key'));\n      }\n    }\n  },\n\n  /*\r\n     *   Template method to get the control element\r\n     *   This will execute under the decorated element context\r\n     */\n  getControl: function getControl() {\n    var self = this;\n    var properties = self.properties;\n\n    if (properties.editable) {return $(\".ui-bizagi-render-control\", self.element);}\n\n    return $(\".ui-bizagi-cell\", self.element);\n  },\n\n  /*\r\n     * Override function\r\n     */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n    // Set internal value\n    self.setValue(value, false);\n  } });","/**\r\n *   Name: Bizagi Desktop Column Decorator Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the column decorator class to adjust to desktop devices\r\n */\n\n// Extends from columns desktop base\nbizagi.rendering.desktop.columns.column.extend(\"bizagi.rendering.desktop.columns.search\", bizagi.rendering.columns.search.prototype);\n// Extends itself\nbizagi.rendering.desktop.columns.search.extend(\"bizagi.rendering.desktop.columns.search\", {}, {\n\n  /*\r\n                                                                                                *   Post process the element after it has been rendered\r\n                                                                                                */\n  postRender: function postRender(surrogateKey, cell) {\n    // Call base\n    this._super(surrogateKey, cell);\n\n    var decorated = this.getDecorated(surrogateKey);\n\n    // Apply styles to input\n    var input = $(\".ui-selectmenu-status\", decorated.getControl());\n    this.applyColumnStyles(input);\n\n    // Remove padding for td\n    if (this.properties.editable) {\n      decorated.getControl().addClass(\"ui-bizagi-cell-search\");\n    }\n  },\n\n  /*\r\n     *   Post process the element after it has been rendered\r\n     */\n  postRenderReadOnly: function postRenderReadOnly(surrogateKey, cell, tableCell) {\n    // Call base\n    this._super(surrogateKey, cell);\n\n    // Apply styles to input\n    var input = $(\".ui-selectmenu-status\", cell);\n    this.applyColumnStyles(input);\n  },\n\n  /**\r\n      * Apply custom overrides to each decorated instance\r\n      * @param decorated\r\n      */\n  applyOverrides: function applyOverrides(decorated) {\n    this._super(decorated);\n\n    decorated.refreshControl = this.refreshControl;\n\n    // Only apply to advanced search control\n    if (decorated.properties.advancedSearch) {\n      var originalRenderCellControl = decorated.internalRenderCellControl;\n\n      // Override to base function\n      decorated.internalRenderCellControl = function (editable, key, renderColumn, decorated) {\n        var self = this;\n\n        // Set editable\n        var originalEditable = renderColumn.properties.editable;\n        renderColumn.properties.editable = editable;\n\n        $.when(renderColumn.render(key, decorated.getValue(key))).done(function (cell) {\n\n          // Update cell content\n          self.element && self.element.find(\"[data-bizagi-component=cellContent] > div\").replaceWith(cell);\n\n          // Call to base\n          originalRenderCellControl.call(self, editable, key, renderColumn, decorated);\n        });\n\n        // Restore editable\n        renderColumn.properties.editable = originalEditable;\n\n      };\n    }\n  },\n\n  refreshControl: function refreshControl() {\n    this.grid.refreshCell({\n      key: this.surrogateKey,\n      column: this.properties.xpath,\n      xpathContext: this.getFormContainer().properties.xpathContext });\n\n  } });","/*\r\n*   Name: Bizagi Desktop Date Column Decorator Extension\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will redefine the date column decorator class to adjust to desktop devices\r\n*/\n\n// Extends from columns desktop base\nbizagi.rendering.desktop.columns.column.extend(\"bizagi.rendering.desktop.columns.date\", bizagi.rendering.columns.date.prototype);\n// Extends itself\nbizagi.rendering.desktop.columns.date.extend(\"bizagi.rendering.desktop.columns.date\", {}, {\n\n  /*\r\n                                                                                            *   Apply custom overrides to each decorated instance\r\n                                                                                            */\n  applyOverrides: function applyOverrides(decorated) {\n    var self = this;\n    decorated.originalRenderElement = decorated.renderElement;\n\n    decorated.renderElement = function () {\n      return this.originalRenderElement(\"render-base\");\n    };\n    self._super(decorated);\n  },\n\n  resolveValue: function resolveValue(context, value) {\n    var result = \"\";\n    if (bizagi.util.isString(value) || bizagi.util.isNumeric(value)) {\n      result = value;\n    }\n\n    if (bizagi.util.isArray(value)) {\n      var indexes = context.grid.getIndexes();\n      var surrogateKey = context.surrogateKey;\n      var index = indexes.indexOf(surrogateKey);\n      if (index !== -1) {\n        result = value[index];\n      }\n    }\n    return result;\n  },\n\n  /*\r\n     *   Post process the element after it has been rendered\r\n     */\n  postRender: function postRender(surrogateKey, cell) {\n    // Call base\n    this._super(surrogateKey, cell);\n\n    var self = this;\n    var properties = self.properties;\n    var decorated = this.getDecorated(surrogateKey);\n    // Call base\n    //decorated.properties.showTime = false;\n    decorated.properties.showTime = properties.showTime ? properties.showTime : false;\n\n    // Apply styles to input\n    var input = $(\".bz-input-icon\", cell);\n    this.applyColumnStyles(input);\n  },\n\n\n  /*\r\n     *   Post process the element after it has been rendered\r\n     */\n  postRenderReadOnly: function postRenderReadOnly(surrogateKey, cell) {\n    // Call base\n    this._super(surrogateKey, cell);\n\n    var self = this;\n    var properties = self.properties;\n    var decorated = this.getDecorated(surrogateKey);\n    // Call base, but resuming the original show time property when rendering not editable\n    decorated.properties.showTime = properties.showTime ? properties.showTime : false;\n  } });","/*\r\n*   Name: BizAgi Desktop Text Column Decorator Extension\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will redefine the text column decorator class to adjust to desktop devices\r\n*/\n\n// Extends from column\nbizagi.rendering.desktop.columns.column.extend(\"bizagi.rendering.desktop.columns.text\", {}, {\n\n  /*\r\n                                                                                              *   Post process the element after it has been rendered\r\n                                                                                              */\n  postRender: function postRender(surrogateKey, cell) {\n    // Call base\n    this._super(surrogateKey, cell);\n\n    // Apply styles to input\n    var input = $(\"input, textarea\", cell);\n    this.applyColumnStyles(input);\n  },\n\n  postRenderReadOnly: function postRenderReadOnly(surrogateKey, cell) {\n    var self = this;\n    var properties = self.properties;\n\n    if (properties.autoExtend) {\n      var readOnly = cell.find(\".ui-bizagi-cell-readonly\");\n      if (readOnly.length > 0) {\n        readOnly.css(\"max-height\", \"none\");\n      }\n    }\n\n    self._super(surrogateKey, cell);\n  },\n\n  attachRetypeDouble: function attachRetypeDouble() {\n    var self = this;\n    var element = self.element;\n\n    var input = $(\"input\", element);\n    if (!input || input.length == 0) return;\n\n    // Apply blur handler to check value\n    input.blur(function () {\n      var control = $(this);\n      var previousValue = self.previousValue;\n      var value = self.value;\n\n      if (previousValue != null && value != previousValue) {\n        if ($(this).data(\"newValue\") != undefined && control.val() != $(this).data(\"newValue\")) {\n          $(this).data().newValue = undefined;\n        }\n      }\n      self.retypeDouble(control);\n\n    });\n  },\n  /**\r\n     * Apply custom overrides to each decorated instance\r\n     * @param decorated\r\n     */\n  applyOverrides: function applyOverrides(decorated) {\n    this._super(decorated);\n\n    var originalRenderCellControl = decorated.internalRenderCellControl;\n\n    // Override to base function\n    decorated.internalRenderCellControl = function (editable, key, renderColumn, decorated) {\n      var self = this;\n\n      // Set editable\n      var originalEditable = renderColumn.properties.editable;\n      renderColumn.properties.editable = editable;\n\n      $.when(renderColumn.render(key, decorated.getValue(key))).done(function (cell) {\n        // Update cell content\n        self.element && self.element.find(\"[data-bizagi-component=cellContent] > div\").replaceWith(cell);\n\n        // Call to base\n        originalRenderCellControl.call(self, editable, key, renderColumn, decorated);\n      });\n\n      // Restore editable\n      renderColumn.properties.editable = originalEditable;\n    };\n\n  } });","/*\r\n*   Name: BizAgi Desktop Seacrh List Column Decorator Extension\r\n*   Author: Paola Herrera\r\n*   Comments:\r\n*   -   This script will redefine the text column decorator class to adjust to desktop devices\r\n*/\n\n// Extends from column\nbizagi.rendering.desktop.columns.column.extend(\"bizagi.rendering.desktop.columns.searchList\", {}, {\n\n  /*\r\n                                                                                                     *   Constructor\r\n                                                                                                     */\n  init: function init(params) {\n    // Call base\n    this._super(params);\n\n    // Set base column styles\n    var properties = this.properties;\n  },\n  /*\r\n      *   Returns the in-memory processed element\r\n      *   so the caller could append it to any place\r\n      */\n  render: function render(surrogateKey, value, tableCell) {\n    var self = this;\n    var decorated = self.getDecorated(surrogateKey);\n    var properties = self.properties;\n\n    // If the control needs to recalculate data, reset it on the decorated render\n    if (properties.recalculate) {\n      decorated.resetData();\n    }\n\n    // Change the xpath context\n    var xpathContext = properties.xpathContext.length > 0 ? properties.xpathContext + \".\" + self.grid.properties.xpath + \"[id=\" + surrogateKey + \"]\" : self.grid.properties.xpath + \"[id=\" + surrogateKey + \"]\";\n    decorated.properties.xpathContext = xpathContext;\n\n    // Render the control\n    var result = this._super(surrogateKey, value, tableCell);\n\n    return result;\n  },\n\n  /*\r\n      *   Sets the internal value, only must be called internally\r\n      */\n  setValue: function setValue(surrogateKey, value) {\n    var self = this;\n\n    var decorated = self.getDecorated(surrogateKey);\n    if (decorated != \"undefined\" && decorated != null) {\n\n      decorated.properties.originalValue = value;\n      decorated.properties.previousValue = value;\n\n      if ((value === null || value === undefined) && self.properties.defaultvalue !== undefined && decorated.grid != undefined) {\n        value = self.setDefaultValue(surrogateKey, decorated);\n      }\n\n      if (value === null || value === undefined) value = [];\n\n      decorated.properties.value = value;\n      decorated.setValue(value, false);\n    }\n  } });","/*\r\n*   Name: BizAgi Desktop Number Column Decorator Extension\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will redefine the number column decorator class to adjust to desktop devices\r\n*/\n\n// Extends from column\nbizagi.rendering.desktop.columns.column.extend(\"bizagi.rendering.desktop.columns.number\", {}, {\n\n  /*\r\n                                                                                                *   Post process the element after it has been rendered\r\n                                                                                                */\n  postRender: function postRender(surrogateKey, cell) {\n    // Call base\n    this._super(surrogateKey, cell);\n\n    // Apply styles to input\n    var input = $(\"input\", cell);\n    this.applyColumnStyles(input);\n  },\n  renderSummary: function renderSummary(key, value) {\n    var self = this;\n    return self.renderReadOnly(key, value);\n  },\n  postRenderSummary: function postRenderSummary(key, value) {\n    var self = this;\n    self.postRenderReadOnly(key, value);\n    return true;\n  },\n  /**\r\n      * Apply custom overrides to each decorated instance\r\n      * @param decorated\r\n      */\n  applyOverrides: function applyOverrides(decorated) {\n    this._super(decorated);\n\n    var originalRenderCellControl = decorated.internalRenderCellControl;\n\n    // Override to base function\n    decorated.internalRenderCellControl = function (editable, key, renderColumn, decorated) {\n      var self = this;\n\n      // Set editable\n      var originalEditable = renderColumn.properties.editable;\n      renderColumn.properties.editable = editable;\n\n      $.when(renderColumn.render(key, decorated.getValue(key))).done(function (cell) {\n\n        // Update cell content\n        self.element && self.element.find(\"[data-bizagi-component=cellContent] > div\").replaceWith(cell);\n\n        // Call to base\n        originalRenderCellControl.call(self, editable, key, renderColumn, decorated);\n      });\n\n      // Restore editable\n      renderColumn.properties.editable = originalEditable;\n    };\n  } });","/*\r\n *   Name: BizAgi Desktop NumberScientificNotation Column Decorator Extension\r\n *   Author: Laura Ariza\r\n *   Comments:\r\n *   -   This script define a render control that support scientific notation format in a column\r\n */\n\nbizagi.rendering.desktop.columns.column.extend(\"bizagi.rendering.desktop.columns.numberScientificNotation\", {}, {\n  /*\r\n                                                                                                                   *   Post process the element after it has been rendered\r\n                                                                                                                   */\n  postRender: function postRender(surrogateKey, cell) {\n    // Call base\n    this._super(surrogateKey, cell);\n\n    // Apply styles to input\n    var input = $(\"input\", cell);\n    this.applyColumnStyles(input);\n  },\n  renderSummary: function renderSummary(key, value) {\n    var self = this;\n    return self.renderReadOnly(key, value);\n  },\n  postRenderSummary: function postRenderSummary(key, value) {\n    var self = this;\n    self.postRenderReadOnly(key, value);\n    return true;\n  } });","/**\r\n *   Name: Bizagi Desktop Upload Column Decorator Extension\r\n *   Author: Bizagi UI Forms\r\n *   Comments:\r\n *   -   This script will redefine the upload column decorator class to adjust to desktop devices\r\n */\n\n// Extends from column\nbizagi.rendering.desktop.columns.column.extend(\"bizagi.rendering.desktop.columns.upload\", {}, {\n\n  /**\r\n                                                                                                 * Apply custom overrides to each decorated instance\r\n                                                                                                 * @param {} decorated\r\n                                                                                                 * @returns {}\r\n                                                                                                 */\n  applyOverrides: function applyOverrides(decorated) {\n    var self = this;\n    var mode = self.getMode();\n\n    self._super(decorated);\n\n    // Hacks the upload render to add features\n    decorated.getUploadXpath = self.getUploadXpath;\n\n    // Hack apply upload plugin method in order to execute it only when the control is inserted in the DOM\n    if (mode !== \"design\" && mode !== \"layout\") {\n\n      var originalMethod = decorated.applyUploadPlugin;\n\n      decorated.getXpathContext = function () {\n        var that = this;\n        var xpath = that.grid.properties.xpath + \"[id=\" + that.surrogateKey + \"]\";\n\n        if (that.properties.xpathContext.length > 0) {\n          return that.properties.xpathContext + \".\" + xpath;\n        } else {\n          return xpath;\n        }\n      };\n\n      decorated.getUploadXpathContext = function () {\n        return this.properties.xpathContext.length > 0 ? this.properties.xpathContext : \"\";\n      };\n\n      decorated.applyUploadPlugin = function () {\n        var control = this.getControl();\n\n        originalMethod.apply(decorated, arguments);\n\n        control.undelegate(\".ui-bizagi-render-upload-item\", \"mouseover\");\n        control.undelegate(\".ui-bizagi-render-upload-item\", \"mouseout\");\n\n        $(\".ui-bizagi-render-upload-icon\", control).css(\"display\", \"inline-block\");\n\n        // fix to firefox and chrome\n        $(\".ui-bizagi-render-upload-wrapper object\", control).css({ position: 'relative' });\n\n        $(\".ui-bizagi-render-upload-queue\", control).css({ 'max-width': \"150px\" });\n\n      };\n\n      decorated.postRender = function () {\n        var self = this;\n        var control = self.getControl();\n\n        if (self.properties.allowSendInMail) {\n          self.bindEmailDialog();\n        }\n\n        //Set control container to behave as a block\n        control.addClass(\"ui-bizagi-render-display-block\");\n        control.addClass(\"ui-bizagi-render-upload\");\n        self.checkMaxFiles();\n      };\n\n      decorated.buildItemUrl = function (file) {\n        var self = this;\n        var properties = self.properties;\n        var form = self.getFormContainer();\n\n        return self.dataService.getUploadFileUrl({\n          idRender: properties.id,\n          xpath: self.getUploadXpath(),\n          xpathContext: properties.xpathContext,\n          idPageCache: properties.idPageCache,\n          fileId: file.id,\n          sessionId: form.properties.sessionId,\n          contexttype: properties.contexttype });\n\n      };\n    }\n\n    decorated.buildItemUrl = function (file) {\n      var self = this;\n      var properties = self.properties;\n      var form = self.getFormContainer();\n      var xpathContext = self.getXpathContext();\n\n      return self.dataService.getUploadFileUrl({\n        idRender: properties.id,\n        xpath: properties.xpath,\n        xpathContext: xpathContext,\n        idPageCache: properties.idPageCache,\n        fileId: file.id,\n        sessionId: form.properties.sessionId,\n        contexttype: properties.contexttype });\n\n    };\n\n    decorated.processUploadFile = function () {\n      var self = this;\n      var dialogBox = self.dialogBox;\n      var defer = new $.Deferred();\n      var uploadForm = $(\"form\", dialogBox);\n      var uploadIFrame = $(\"iframe\", uploadForm);\n      var xpathContext = self.getXpathContext();\n\n      // Change xpath context within form element\n      $(\"[name=h_xpathContext]\", uploadForm).val(xpathContext);\n\n      // When the iframe loads the user we need to evaluate the response and close the dialog\n      var timeoutFn = function timeoutFn() {\n        try {\n          var response = \"\";\n          if (uploadIFrame[0].contentWindow) {\n            var iframeContent = bizagi.util.isIE8() ? $(uploadIFrame[0].contentWindow.document.body) :\n            $(uploadIFrame[0].contentWindow.eval(\"document.body\"));\n\n            response = iframeContent.text();\n          }\n          if (response.length > 0) {\n            defer.resolve(response);\n          } else {\n            var timeoutForFn = setTimeout(function () {\n              timeoutFn();\n              clearTimeout(timeoutForFn);\n            }, 50);\n          }\n        } catch (e) {\n          // Nothing todo, just close the window and show error message\n          self.closeUploadDialog();\n          window.alert(e.toString());\n        }\n      };\n\n      // Execute the timed function in order to check when the response has arrived\n      timeoutFn();\n\n      // Submit the form\n      uploadForm.submit();\n\n      return defer.promise();\n    };\n  },\n\n  /**\r\n      * Returns the in-memory processed element when the element is read-only\r\n      * @param {} surrogateKey\r\n      * @param {} value\r\n      * @returns {}\r\n      */\n  renderReadOnly: function renderReadOnly(surrogateKey, value) {\n    var self = this;\n    var cell;\n\n    var decorated = this.getDecorated(surrogateKey);\n    self.setValue(surrogateKey, value);\n    self.setSurrogateKey(surrogateKey);\n\n    self.applyOverrides(decorated);\n    // Set grid and id references to the control in order to render the content\n    decorated.grid = this.grid;\n    decorated.column = this;\n    decorated.surrogateKey = surrogateKey;\n\n    // Set ready deferred\n    self.readyDeferred = new $.Deferred();\n\n    // We need to render the inner control as read-only\n    if (decorated.files.length > 0) {\n      // Changes editable to false to render read-only\n      var editable = this.properties.editable;\n      decorated.properties.editable = false;\n      cell = decorated.render(\"cell.upload\");\n      decorated.properties.editable = editable;\n    }\n\n    // Attach rendered handler\n    self.bind(\"rendered\", function () {\n      self.readyDeferred.resolve();\n    });\n\n    return cell;\n  },\n\n  /**\r\n      * Post process the element after it has been rendered\r\n      * @param {} surrogateKey\r\n      * @param {} cell\r\n      * @returns {}\r\n      */\n  postRenderReadOnly: function postRenderReadOnly(surrogateKey, cell) {\n    var self = this;\n\n    // Call base\n    self._super(surrogateKey, cell);\n\n\n    var decorated = self.getDecorated(surrogateKey);\n\n    if (decorated.files.length == 0) {\n      var message = self.getResource(\"render-upload-no-files\");\n      $(\".ui-bizagi-cell-readonly\", cell).html(message);\n\n      // Set cell icon to the right\n      var cellIcon = $(\".ui-bizagi-cell-icon\", cell);\n      cellIcon.addClass(\"ui-bizagi-cell-icon-right\");\n    } else {\n      // Just draw render if the cell layout has been filled\n      if (cell && cell.length > 0) {\n        // Apply styles to cell\n        self.applyColumnStyles(cell);\n      }\n    }\n  },\n\n  /**\r\n      * Post process the element after it has been rendered\r\n      * @param {} surrogateKey\r\n      * @param {} cell\r\n      * @returns {}\r\n      */\n  postRender: function postRender(surrogateKey, cell) {\n    var self = this;\n    var mode = self.getMode();\n\n    // Call base\n    self._super(surrogateKey, cell);\n\n    self.setSurrogateKey(surrogateKey);\n\n    if (mode != \"design\") {\n\n      var decorated = this.getDecorated(surrogateKey);\n      var control = decorated.getControl();\n\n      // Check if its new row\n      if (control.parents(\"tr\").data(\"new-row\")) {\n        // Show message:  Please save record before to upload a file\n        control.html(bizagi.localization.getResource('render-grid-column-upload-mandatory-key'));\n\n        //Set the column with this attribute, so when the control is evaluated in isValid(), validated\n        //also if it is required, and belongs from a new row\n        self.isNewRow = true;\n      } else {\n        self.isNewRow = false;\n      }\n    }\n  },\n\n  canBeSent: function canBeSent() {\n    return false;\n  },\n\n  /**\r\n      * Returns the xpath to be used\r\n      * @returns {}\r\n      */\n  getUploadXpath: function getUploadXpath() {\n    return this.grid.properties.xpath + \"[id=\" + this.surrogateKey + \"].\" + this.properties.xpath;\n  } });","/*\r\n *   Name: Bizagi Desktop Radio Column Decorator Extension\r\n *   Author: Bizagi UI Forms\r\n *   Comments:\r\n *   -   This script will redefine the Radio column decorator class to adjust to desktop devices\r\n */\n\n// Extends from column\nbizagi.rendering.desktop.columns.combo.extend(\"bizagi.rendering.desktop.columns.radio\", {}, {\n  /*\r\n                                                                                               *   Apply custom overrides to each decorated instance\r\n                                                                                               */\n  applyOverrides: function applyOverrides(decorated) {\n    var self = this;\n    this._super(decorated);\n    // Hacks the upload render to add features\n    decorated.getUploadXpath = this.getUploadXpath;\n\n    decorated.cleanData = function () {\n      var self = this;\n      var value = { id: \"\", label: \"\" };\n      var selectedItem = self.element.find(\".ui-radio-state-checked\");\n\n      selectedItem.removeClass(\"ui-radio-state-checked\");\n      self.setDisplayValue(value);\n      self.setValue(value);\n    };\n  } });","/*\r\n*   Name: BizAgi Desktop Radio Column Decorator Extension\r\n*   Author: Maria Camila Angel\r\n*   Comments:\r\n*   -   This script will redefine the text column decorator class to adjust to desktop devices\r\n*/\n\n// Extends from column\nbizagi.rendering.desktop.columns.combo.extend(\"bizagi.rendering.desktop.columns.list\", {}, {\n  /*\r\n                                                                                             *   Apply custom overrides to each decorated instance\r\n                                                                                             */\n  applyOverrides: function applyOverrides(decorated) {\n    var self = this;\n    this._super(decorated);\n    // Hacks the upload render to add features\n    decorated.getUploadXpath = this.getUploadXpath;\n\n    decorated.cleanData = function () {\n      var self = this;\n      var control = self.getControl();\n      var selected = control.find(\".ui-state-active\");\n      var newValue = self.getValue();\n\n      self.value = self.properties.value = self.selectedValue = { id: \"\", value: \"\" };\n      self.selectedValue = newValue.value;\n      selected.removeClass(\"ui-state-focus ui-selected ui-state-active\");\n    };\n  } });","/*\r\n *   Name: BizAgi Desktop Text Column Decorator Extension\r\n *   Author: Diego Parra\r\n *   Comments:\r\n *   -   This script will redefine the image column decorator class to adjust to desktop devices\r\n */\n\n// Extends from column\nbizagi.rendering.desktop.columns.column.extend(\"bizagi.rendering.desktop.columns.image\", {}, {\n  /*\r\n                                                                                               *   Apply custom overrides to each decorated instance\r\n                                                                                               */\n  applyOverrides: function applyOverrides(decorated) {\n    var self = this;\n    var properties = self.properties;\n    var mode = self.getMode();\n    this._super(decorated);\n\n\n    // Hacks the upload render to add features\n    decorated.getUploadXpath = this.getUploadXpath;\n\n    // hack apply upload plugin method in order to execute it only when the control is inserted in the DOM\n    var originalApplyUploadPlugin = decorated.applyUploadPlugin;\n    if (decorated.properties.flashVersion) {\n      decorated.applyUploadPlugin = function () {\n        var uploadRender = this,\n        control = uploadRender.getControl();\n        originalApplyUploadPlugin.apply(decorated, arguments);\n        control.undelegate(\".ui-bizagi-render-upload-item\", \"mouseover\");\n        control.undelegate(\".ui-bizagi-render-upload-item\", \"mouseout\");\n        $(\".ui-bizagi-render-upload-icon\", control).css(\"display\", \"inline-block\");\n\n        // fix to firefox and chrome\n        $(\".ui-bizagi-render-upload-wrapper object\", control).css({\n          position: 'relative' });\n\n      };\n    }\n\n\n    // Hack renderControl and post render to avoid processing when using inline add\n    var originalRenderControl = decorated.renderControl;\n    var originalInternalPostRender = decorated.internalPostRender;\n    //var originalPostRender = decorated.postRender;\n    decorated.renderControl = function () {\n      return \"\";\n    };\n\n    decorated.internalPostRender = function () {\n      var control = decorated.getControl();\n\n      // Check if its new row\n      if (control.parents(\"tr\").data(\"new-row\")) {\n        // Show message:  Please save record before to upload a file\n        control.html(bizagi.localization.getResource('render-grid-column-upload-mandatory-key'));\n\n        //Set the column with this attribute, so when the control is evaluated in isValid(), validated\n        //also if it is required, and belongs from a new row\n        self.isNewRow = true;\n      } else {\n\n        self.isNewRow = false;\n\n        $.when(originalRenderControl.apply(decorated, arguments)).done(function (html) {\n          if (control.hasClass(\"ui-bizagi-render-control\") ||\n          control.hasClass(\"ui-bizagi-cell-readonly\")) {\n            control.append(html);\n            originalInternalPostRender.apply(decorated, arguments);\n          }\n        });\n      }\n    };\n\n    decorated.buildAddParams = function () {\n      var self = this,\n      properties = self.properties,\n      form = self.getFormContainer();\n\n      var data = [];\n\n      data.push({ key: self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\", value: properties.xpath });\n      data.push({ key: self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\", value: properties.id });\n      data.push({ key: self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\", value: properties.xpathContext });\n      data.push({ key: self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE, value: properties.idPageCache });\n      data.push({ key: self.Class.BA_ACTION_PARAMETER_PREFIX + \"sessionId\", value: form.properties.sessionId });\n      data.push({ key: self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\", value: 'savefile' });\n      properties.contexttype ? data.push({ key: self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\", value: properties.contexttype }) : \"\";\n\n      try {\n        BIZAGI_SESSION_NAME != undefined ? data.push({ key: BIZAGI_SESSION_NAME, value: form.properties.sessionId }) : data.push({ key: \"JSESSIONID\", value: form.properties.sessionId });\n      } catch (e) {\n        data.push({ key: \"JSESSIONID\", value: form.properties.sessionId });\n      }\n\n      return data;\n    };\n\n    decorated.refreshControl = this.refreshControl;\n\n    // Change xpath context\n    if (mode === \"execution\") {\n      if (properties.xpathContext.length > 0) {\n        decorated.properties.xpathContext = properties.xpathContext + \".\" + self.grid.properties.xpath + \"[id=\" + decorated.surrogateKey + \"]\";\n      } else {\n        decorated.properties.xpathContext = self.grid.properties.xpath + \"[id=\" + decorated.surrogateKey + \"]\";\n      }\n    }\n  },\n  /*\r\n     *   Returns the xpath to be used  \r\n     */\n  getUploadXpath: function getUploadXpath() {\n    return this.grid.properties.xpath + \"[id=\" + this.surrogateKey + \"].\" + this.properties.xpath;\n  },\n\n  refreshControl: function refreshControl() {\n    this.grid.refreshCell({ key: this.surrogateKey, column: this.properties.xpath, xpathContext: this.getFormContainer().properties.xpathContext });\n  },\n\n  canBeSent: function canBeSent() {\n    return false;\n  } });","/*\r\n *   Name: Bizagi Desktop Text Column Decorator Extension\r\n *   Author: Diego Parra\r\n *   Comments:\r\n *   -   This script will redefine the text column decorator class to adjust to desktop devices\r\n */\n\n// Extends from column\nbizagi.rendering.desktop.columns.column.extend(\"bizagi.rendering.desktop.columns.uploadecm\", {}, {\n  /*\r\n                                                                                                   *   Apply custom overrides to each decorated instance\r\n                                                                                                   */\n  applyOverrides: function applyOverrides(decorated) {\n    var self = this;\n    this._super(decorated);\n\n    // Hacks the upload render to add features\n    decorated.getUploadXpath = this.getUploadXpath;\n\n    // hack apply upload plugin method in order to execute it only when the control is inserted in the DOM\n    var originalMethod = decorated.applyUploadPlugin;\n    decorated.applyUploadPlugin = function () {\n      var uploadRender = this;\n      var control = uploadRender.getControl();\n\n      originalMethod.apply(decorated, arguments);\n      control.undelegate(\".ui-bizagi-render-upload-item\", \"mouseover\");\n      control.undelegate(\".ui-bizagi-render-upload-item\", \"mouseout\");\n      $(\".ui-bizagi-render-upload-icon\", control).css(\"display\", \"inline-block\");\n\n      // fix to firefox and chrome\n      $(\".ui-bizagi-render-upload-wrapper object\", control).css({\n        position: 'relative' });\n\n    };\n\n    decorated.buildAddParams = function () {\n      var self = this;\n      var properties = self.properties;\n      var data = {};\n\n      var columnXpath = self.getUploadXpath(self.surrogateKey);\n      columnXpath = columnXpath.split(\".\");\n      var xpathContext = self.getXpathContext(self.surrogateKey);\n\n      data.url = properties.addUrl;\n      data.xpath = properties.xpath;\n      data.idAttrib = properties.idAttrib;\n      data.xpathContext = xpathContext;\n      data.metaValues = [];\n      data.idPageCache = properties.idPageCache;\n      data.contexttype = \"entity\";\n      data.validExtensions = properties.validExtensions;\n      data.maxSize = properties.maxSize;\n\n      return data;\n    };\n\n\n    decorated.getXpathContext = function () {\n      var self = this;\n      var xpath = self.grid.properties.xpath + \"[id=\" + self.surrogateKey + \"]\";\n\n      return self.properties.xpathContext.length > 0 ? self.properties.xpathContext + \".\" + xpath : xpath;\n    };\n\n\n  },\n  /*\r\n     *   Returns the in-memory processed element when the element is read-only\r\n     */\n  renderReadOnly: function renderReadOnly(surrogateKey, value) {\n    var self = this;\n    var cell;\n\n    var decorated = this.getDecorated(surrogateKey);\n    decorated.setValue(value);\n    self.setValue(surrogateKey, value);\n    self.setSurrogateKey(surrogateKey);\n\n    self.applyOverrides(decorated);\n    // Set grid and id references to the control in order to render the content\n    decorated.grid = this.grid;\n    decorated.column = this;\n    decorated.surrogateKey = surrogateKey;\n\n    // Set ready deferred\n    self.readyDeferred = new $.Deferred();\n\n    // We need to render the inner control as read-only\n    if (decorated.files.length > 0) {\n      // Changes editable to false to render read-only\n      var editable = this.properties.editable;\n      decorated.properties.editable = false;\n      cell = decorated.render(\"cell.upload\");\n    }\n\n    // Attach rendered handler\n    self.bind(\"rendered\", function () {\n      self.readyDeferred.resolve();\n    });\n\n    return cell;\n  },\n  /*\r\n     *   Post process the element after it has been rendered\r\n     */\n  postRenderReadOnly: function postRenderReadOnly(surrogateKey, cell) {\n    // Call base\n    this._super(surrogateKey, cell);\n\n    var self = this;\n    var decorated = this.getDecorated(surrogateKey);\n    if (decorated.files.length == 0) {\n      var message = self.getResource(\"render-upload-no-files\");\n      $(\".ui-bizagi-cell-readonly\", cell).html(message);\n\n      // Set cell icon to the right\n      var cellIcon = $(\".ui-bizagi-cell-icon\", cell);\n      cellIcon.addClass(\"ui-bizagi-cell-icon-right\");\n    } else {\n      // Just draw render if the cell layout has been filled\n      if (cell && cell.length > 0) {\n        // Apply styles to cell\n        self.applyColumnStyles(cell);\n      }\n    }\n  },\n  /*\r\n     *   Post process the element after it has been rendered\r\n     */\n  postRender: function postRender(surrogateKey, cell) {\n    // Call base\n    this._super(surrogateKey, cell);\n\n    var self = this;\n    var mode = self.getMode();\n\n    this.setSurrogateKey(surrogateKey);\n    if (mode == \"execution\") {\n\n      var decorated = this.getDecorated(surrogateKey);\n      var control = decorated.getControl();\n\n      // Check if its new row\n      if (control.parents(\"tr\").data(\"new-row\")) {\n        // Show message:  Please save record before to upload a file\n        control.html(bizagi.localization.getResource('render-grid-column-upload-mandatory-key'));\n\n        // Set the column with this attribute, so when the control is evaluated in isValid(), validated\n        // also if it is required, and belongs from a new row\n        self.isNewRow = true;\n      } else {\n        self.isNewRow = false;\n      }\n    }\n  },\n  /*\r\n     *   Returns the xpath to be used  \r\n     */\n  getUploadXpath: function getUploadXpath(surrogateKey) {\n    var self = this;\n    surrogateKey = this.surrogateKey || surrogateKey || \"\";\n    var xpath = self.grid.properties.xpath + \"[id=\" + self.surrogateKey + \"].\" + self.properties.xpath;\n\n    return self.properties.xpathContext.length > 0 ? self.properties.xpathContext + \".\" + xpath : xpath;\n  } });","/**\r\n *   Name: Bizagi Desktop Link Column Decorator Extension\r\n *   Author: UI Forms Team\r\n *   -   This script will redefine the link column decorator class to adjust to desktop devices\r\n */\n\n// Extends from column\nbizagi.rendering.desktop.columns.column.extend(\"bizagi.rendering.desktop.columns.link\", {}, {\n\n  /*\r\n                                                                                              *   Apply custom overrides to each decorated instance\r\n                                                                                              */\n  applyOverrides: function applyOverrides(decorated) {\n    var self = this;\n    this._super(decorated);\n    decorated.getControl = this.getControl;\n    // Hacks the getControl method in the decorated render to add features\n    if (decorated.properties.type === \"columnFormLink\") {\n      decorated.getFormLinkXpath = this.getFormLinkXpath;\n    }\n    // Hack renderControl and post render to avoid processing when using inline add\n    var originalRenderControl = decorated.renderControl;\n    var originalInternalPostRender = decorated.internalPostRender;\n\n    decorated.internalPostRender = function () {\n      var control = decorated.getControl();\n      // Check if its new row\n      if (control.parents(\"tr\").data(\"new-row\")) {\n        // Show message:  Please save record before to upload a file\n        control.html('<label style=\"font-weight: normal;\">' + bizagi.localization.getResource('render-grid-column-button-mandatory-key') + '</label>');\n        //Set the column with this attribute, so when the control is evaluated in isValid(), validated\n        //also if it is required, and belongs from a new row\n        self.isNewRow = true;\n      } else {\n        self.isNewRow = false;\n        $.when(originalRenderControl.apply(decorated, arguments)).done(function (html) {\n          if (control.hasClass(\"ui-bizagi-render-control\") ||\n          control.hasClass(\"ui-bizagi-cell-readonly\")) {\n            originalInternalPostRender.apply(decorated, arguments);\n          }\n        });\n      }\n    };\n  },\n\n  /*\r\n     *   Template method to get the control element\r\n     *   This will execute under the decorated element context\r\n     */\n  getControl: function getControl() {\n    var self = this;\n    var properties = self.properties;\n    var controlElement = self.element || self.observableElement;\n\n    if (properties.editable) {\n      return $(\".ui-bizagi-render-control\", controlElement);\n    } else {\n      if ($(\".ui-bizagi-cell-readonly\", controlElement).length > 0) {\n        return $(\".ui-bizagi-cell-readonly\", controlElement);\n      } else {\n        return $(\".ui-bizagi-render-control\", controlElement);\n      }\n    }\n  },\n\n  /*\r\n     *   Returns the in-memory processed element\r\n     *   so the caller could append it to any place\r\n     */\n  render: function render(surrogateKey, value, tableCell, caller) {\n    var self = this;\n    var decorated = self.getDecorated(surrogateKey);\n\n    // Change the xpath context\n    decorated.properties.xpathContext = self.grid.properties.xpath + \"[id=\" + surrogateKey + \"]\";\n\n    if (self.grid.properties.xpathContext && decorated.properties.xpathContext.indexOf(self.grid.properties.xpathContext) == -1)\n    decorated.properties.xpathContext = self.grid.properties.xpathContext + \".\" + decorated.properties.xpathContext;\n\n    // Render the control\n    var result = this._super(surrogateKey, value, tableCell, caller);\n\n    return result;\n  },\n  /*\r\n     *   Returns the cell html to be inserted in the table\r\n     */\n  renderReadOnly: function renderReadOnly(surrogateKey, value, tableCell) {\n    var self = this;\n\n    // Render the control editable\n    if (typeof self.properties.canBeSaved == \"undefined\") self.properties.canBeSaved = self.properties.editable == true;\n    var result = this.render(surrogateKey, value, tableCell, \"CALLER_RENDER_READ_ONLY_COLUMNSLINK\");\n\n    return result;\n  },\n\n  /*\r\n     *   Post process the element after it has been rendered\r\n     */\n  postRenderReadOnly: function postRenderReadOnly(surrogateKey, cell, tableCell) {\n    var self = this;\n\n    // Render the control editable\n    this.postRender(surrogateKey, cell, tableCell);\n  },\n\n  /*\r\n     *   Get Form Link xpath to use\r\n     */\n  getFormLinkXpath: function getFormLinkXpath() {\n    // Calculate layout properties to maximized property\n    this.properties.maximized = bizagi.util.parseBoolean(this.properties.maximized) != null ? bizagi.util.parseBoolean(this.properties.maximized) : false;\n    this.calculateInitialLayoutProperties();\n\n    if (!this.properties.xpath) {\n      return;\n    }\n    return this.properties.xpath;\n  } });","/**\r\n * Grid control Column Button\r\n *\r\n * @author Edward Morales\r\n */\nbizagi.rendering.desktop.columns.column.extend(\"bizagi.rendering.desktop.columns.button\", {}, {\n  applyOverrides: function applyOverrides(decorated) {\n    var self = this;\n    var properties = self.properties;\n    var mode = self.getMode();\n    this._super(decorated);\n\n    decorated.configureHandlers = function () {\n      var self = this;\n      var control = decorated.getControl();\n      var button = $(\":button\", control);\n\n      button.bind(\"click\", function (e) {\n        decorated.processButton.apply(self);\n\n      });\n    };\n  },\n\n  /*\r\n     *   Post process the element after it has been rendered\r\n     */\n  postRender: function postRender(surrogateKey, cell) {\n    // Call base\n    this._super(surrogateKey, cell);\n\n    var self = this;\n    var mode = self.getMode();\n\n    this.setSurrogateKey(surrogateKey);\n    if (mode == \"execution\") {\n\n      var decorated = this.getDecorated(surrogateKey);\n      var control = decorated.getControl();\n\n      // Check if its new row\n      if (control.parents(\"tr\").data(\"new-row\")) {\n        // Show message:  Please save record before to click the button\n        control.html(bizagi.localization.getResource('render-grid-column-button-mandatory-key'));\n\n        //Set the column with this attribute, so when the control is evaluated in isValid(), validated\n        //also if it is required, and belongs from a new row\n        self.isNewRow = true;\n      } else {\n        self.isNewRow = false;\n      }\n    }\n  },\n\n  /*\r\n     *   Post process the element after it has been rendered\r\n     */\n  postRenderReadOnly: function postRenderReadOnly(surrogateKey, cell) {\n    var self = this;\n    var properties = self.properties;\n\n    // Call base\n    this._super(surrogateKey, cell);\n\n  },\n  /*\r\n     *   Returns the in-memory processed element when the element is read-only\r\n     */\n  renderReadOnly: function renderReadOnly(surrogateKey, value) {\n    var self = this;\n    var cell;\n\n    var decorated = this.getDecorated(surrogateKey);\n    self.setSurrogateKey(surrogateKey);\n\n    self.applyOverrides(decorated);\n    // Set grid and id references to the control in order to render the content\n    decorated.grid = this.grid;\n    decorated.column = this;\n    decorated.surrogateKey = surrogateKey;\n\n    // Set ready deferred\n    self.readyDeferred = new $.Deferred();\n\n    // We need to render the inner control as read-only\n\n    // Changes editable to false to render read-only\n    var editable = this.properties.editable;\n    decorated.properties.editable = false;\n    cell = decorated.render(\"cell.button\");\n    decorated.properties.editable = editable;\n\n\n    // Attach rendered handler\n    self.bind(\"rendered\", function () {\n      self.readyDeferred.resolve();\n    });\n\n    return cell;\n  } });","/**\r\n *   Name: Bizagi Desktop Actions Column Decorator Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the text column decorator class to adjust to desktop devices\r\n */\n\n// Extends from column\nbizagi.rendering.desktop.columns.column.extend(\"bizagi.rendering.desktop.columns.actions\", {}, {\n\n  /*\r\n                                                                                                  *   Post process the element after it has been rendered\r\n                                                                                                  */\n  postRender: function postRender(surrogateKey, cell) {\n    // Call base\n    var self = this;\n    var mode = self.getMode();\n\n    this._super(surrogateKey, cell);\n\n    self.configureHandlersActions(surrogateKey);\n\n    $(\".ui-bizagi-render\", cell).css(\"overflow\", \"auto\");\n\n\n    if (mode == \"execution\") {\n      var decorated = this.getDecorated(surrogateKey);\n      var control = decorated.getControl();\n      // Check if its new row\n      if (control.parents(\"tr\").data(\"new-row\")) {\n        control.html(self.renderDraftControl());\n      }\n    }\n\n  },\n\n  /**\r\n      * Configure additional Handlers\r\n      * @param surrogateKey\r\n      */\n  configureHandlersActions: function configureHandlersActions(surrogateKey) {\n    var self = this;\n    var decorated = self.getDecorated(surrogateKey);\n    var viewMore = decorated.element.find(\".gn-bz-grid__more\");\n    var items = [];\n\n    // Add selection events for the draft rows\n    decorated.element.on(\"click\", \".gn-bz-grid__delete\", function (events) {\n      var $context = $(this).closest(\"tr[data-new-row='true']\");\n\n      $context.trigger(\"delete-row\");\n    });\n\n    if (self.grid.columnActionParams.allowDetail) {\n      items.push({\n        name: self.parent.properties.detailLabel,\n        icon: \"icon-detail\",\n        fn: function fn() {\n          self.grid.showFormDetails(surrogateKey);\n        } });\n\n    }\n\n    if (self.grid.columnActionParams.allowEdit && self.grid.columnActionParams.withEditForm) {\n      items.push({\n        name: self.parent.properties.editLabel,\n        icon: \"icon-edit\",\n        fn: function fn() {\n          self.grid.editRow(surrogateKey);\n        } });\n\n    }\n\n    if (self.grid.columnActionParams.allowDelete) {\n      items.push({\n        name: self.parent.properties.deleteLabel,\n        icon: \"icon-delete\",\n        fn: function fn() {\n          self.grid.deleteRow(surrogateKey);\n        } });\n\n    }\n\n    viewMore.overflowMenu({ items: items });\n  },\n\n  renderDraftControl: function renderDraftControl() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"gridActions-delete\");\n\n    // Render template\n    var html = $.fasttmpl(template, {});\n    return html;\n  } });","/*\r\n *   Name: BizAgi Desktop Actions Column Decorator Extension\r\n *   Author: Cristian Olaya\r\n *           Ivn Ricardo Taimal\r\n *   Comments:\r\n *   -   This script will redefine the text column decorator class to adjust to desktop devices\r\n */\n\n// Extends from column\nbizagi.rendering.desktop.columns.column.extend(\"bizagi.rendering.desktop.columns.exclusiveCheck\", {}, {\n\n  /*\r\n                                                                                                         *   Returns the in-memory processed element\r\n                                                                                                         *   so the caller could append it to any place\r\n                                                                                                         */\n  render: function render(surrogateKey, value) {\n\n    var self = this;\n    // Set flag to check when a render has changed\n    self.changed = false;\n    var properties = self.properties;\n    var gridChanges = self.grid.changes;\n    // Set grid and id references to the control in order to render the content\n    var decorated = self.getDecorated(surrogateKey);\n    decorated.grid = self.grid;\n    decorated.column = this;\n    decorated.surrogateKey = surrogateKey;\n\n    // Set cell value\n\n    if (self.getMode() == \"execution\") {\n      self.setValue(surrogateKey, value || false);\n      var tmpCheck = self.grid.enabledChecks[self.properties.xpath].find(function (el) {\n        return el.id == surrogateKey;\n      });\n      if (typeof tmpCheck == \"undefined\") {\n        self.grid.enabledChecks[self.properties.xpath].push({\n          id: surrogateKey,\n          value: value || false,\n          originalValue: value || false,\n          changed: false });\n\n      }\n    }\n\n    if (value == null) {\n      self.changed = true;\n      var obj = {};\n      obj[self.properties.xpath] = self.getValue(surrogateKey);\n      if (bizagi.util.isEmpty(gridChanges[surrogateKey])) gridChanges[surrogateKey] = {};\n      gridChanges[surrogateKey] = $.extend({}, gridChanges[surrogateKey], obj);\n    }\n\n    // Override render properties\n    self.overrideDecoratedRenderProperties(surrogateKey);\n\n\n    // If the render is not editable return the readonly version of the column\n    if (!properties.editable)\n    return self.renderReadOnly.apply(self, arguments);\n\n    // Returns the decorated render inside a custom layout for columns\n    self.readyDeferred = new $.Deferred();\n    var cell = decorated.render(\"cell\");\n\n    // If the render changes set the flag on\n    decorated.bind(\"renderchange\", function () {\n      self.changed = true;\n      var checkList = self.grid.enabledChecks[self.properties.xpath];\n\n      checkList.forEach(function (el) {\n        if (el.id == surrogateKey) {\n          el.value = decorated.value;\n          el.changed = true;\n        } else\n        if (decorated.value && el.value) {\n          var tmpDecorated = self.getDecorated(el.id);\n          tmpDecorated.setDisplayValue(false);\n          self.setValue(el.id, false);\n          el.value = false;\n          el.changed = true;\n        }\n      });\n\n      var simpleXpathArray = self.properties.xpath.split(\".\");\n      self.grid.exclusiveChanges[self.properties.xpath] = {\n        xpath: self.properties.xpath,\n        simpleXpath: simpleXpathArray[simpleXpathArray.length - 1],\n        value: self.getValue(surrogateKey),\n        key: surrogateKey };\n\n    });\n\n    self.bind(\"rendered\", function () {\n      self.readyDeferred.resolve();\n    });\n\n\n    return cell;\n  },\n\n  /*\r\n      *   Post process the element after it has been rendered\r\n      */\n  postRender: function postRender(surrogateKey, cell) {\n    // Call base\n    this._super(surrogateKey, cell);\n\n    var self = this;\n    var mode = self.getMode();\n\n    this.setSurrogateKey(surrogateKey);\n    if (mode == \"execution\") {\n\n      var decorated = this.getDecorated(surrogateKey);\n      var control = decorated.getControl();\n\n      // Check if its new row\n      if (control.parents(\"tr\").data(\"new-row\")) {\n        // Show a disabled check box\n        control.html('<input type=\"checkbox\" name=\"exclusiveCheck\" title=\"' + bizagi.localization.getResource('render-grid-column-button-mandatory-key') + '\" disabled=\"disabled\" style=\"width:16.5px;height:16.5px;\">');\n\n        //Set the column with this attribute, so when the control is evaluated in isValid(), validated\n        //also if it is required, and belongs from a new row\n        self.isNewRow = true;\n      } else {\n        self.isNewRow = false;\n      }\n    }\n  },\n\n  isValueValid: function isValueValid(surrogateKey, value, invalidElements, propertyOverrides) {\n    var self = this;\n    self.grid.enabledChecks = self.grid.enabledChecks || {};\n    var checkedValues = (self.grid.enabledChecks[self.properties.xpath] || []).filter(function (el) {\n      return el.value;\n    });\n\n    if (checkedValues.length > 1) {\n      var message = self.getResource(\"render-exclusive-column-check-error\").replaceAll(\"#label#\", self.properties.displayName);\n      /* var messageData = {xpath: self.properties.xpath, message: message}; */\n      invalidElements.push(message);\n      return false;\n    } else {\n      return true;\n    }\n\n  } });","/**\r\n *   Name: Bizagi Desktop Column Decorator Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the column decorator class to adjust to desktop devices\r\n */\n\n// Extends from columns desktop base\nbizagi.rendering.desktop.columns.column.extend(\"bizagi.rendering.desktop.columns.readonly\", bizagi.rendering.columns.readonly.prototype);\n// Extends itself\nbizagi.rendering.desktop.columns.readonly.extend(\"bizagi.rendering.desktop.columns.readonly\", {}, {});","/**\r\n *   Name: Bizagi Render Hidden Column Decorator Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the hidden render class to adjust to desktop devices\r\n */\n\n// Extends from columns desktop base\nbizagi.rendering.desktop.columns.column.extend(\"bizagi.rendering.desktop.columns.hidden\", bizagi.rendering.columns.hidden.prototype);\n// Extends itself\nbizagi.rendering.desktop.columns.hidden.extend(\"bizagi.rendering.desktop.columns.hidden\", {}, {});","/*\r\n*   Name: BizAgi Desktop querySuggest\r\n*   Author: Ivan Ricardo Taimal Narvaez\r\n*   Comments:querySuggest\r\n*   -\r\n*/\n\nbizagi.rendering.desktop.search.extend(\"bizagi.rendering.desktop.querySuggest\", {}, {\n  //h_contexttype:metadata\n\n  /*\r\n   *   Fetch the data into a deferred\r\n   */\n  getData: function getData(params) {\n    var self = this;\n    var properties = self.properties;\n    var defer = new $.Deferred();\n    var form = self.getFormContainer();\n    var contextType = form.getContextType() || form.params.contexttype || false;\n    params = params || {};\n\n    // Verify context type\n    if (self.properties.contexttype) {\n      params.h_contexttype = self.properties.contexttype;\n    } else if (contextType) {\n      params.h_contexttype = contextType;\n    }\n\n    // QA-471 When the contexttype is metadata it does not\n    // send xpathcontext\n    if (params && params.h_contexttype && params.h_contexttype === 'metadata') {\n      properties.xpathContext = '';\n    }\n\n    // TM00529\n    if (properties.term.indexOf(\"\\'\") > -1) {\n      var regexC = new RegExp(\"\\'\", \"g\");\n      properties.term = properties.term.replace(regexC, \"\\\\'\\\\'\");\n    }\n    // TM00529\n    if (properties.term.indexOf(\"\\\"\") > -1) {\n      var regexC = new RegExp(\"\\\"\", \"g\");\n      properties.term = properties.term.replace(regexC, \"\\\"\");\n    }\n\n    // Resolve with remote data\n    self.dataService.multiaction().getSearchData({\n      url: properties.dataUrl,\n      contexttype: 'metadata',\n      xpath: properties.xpath,\n      idRender: properties.id,\n      xpathContext: properties.xpathContext,\n      idPageCache: properties.idPageCache,\n      term: properties.allowFullSearch ? \"%\" + properties.term : properties.term,\n      extra: params }).\n    done(function (data) {\n      // Resolve with fetched data\n      properties.data = data;\n      defer.resolve(properties.data);\n    }).fail(function (data) {\n      var hideStatus = data.hideStatus || false;\n      defer.resolve({});\n      if (!hideStatus) {\n        self.trigger(\"onSearchError\", data);\n      }\n    });\n    return defer.promise(defer);\n  },\n\n  /* Renders the advanced item */\n  renderClearItem: function renderClearItem() {\n    var self = this;\n    var searchItem = self.renderSearchItem({\n      id: self.Class.CLEAR_SEARCH_ID,\n      label: this.getResource(\"render-search-clear-label\") });\n\n\n    // Bind click event\n    searchItem.click(function () {\n      self.setValue({ id: \"\" });\n      self.setDisplayValue(\"\");\n    });\n\n    return searchItem;\n  } });","/**\r\n*   Name: Bizagi Desktop queryExtendedText\r\n*   Author: UI Forms Team\r\n*   Comments: queryExtendedText\r\n*   - This script will redefine the query extended text render class to adjust to desktop devices\r\n*/\n\nbizagi.rendering.desktop.extendedText.extend(\"bizagi.rendering.desktop.queryExtendedText\", {}, {});","/**\r\n *   Name: Bizagi Desktop queryText\r\n *   Author: UI Forms Team\r\n *   Comments:queryText\r\n *   -   This script will redefine the query text render class to adjust to desktop devices\r\n */\n\nbizagi.rendering.desktop.text.extend(\"bizagi.rendering.desktop.queryText\", {}, {});","/*\r\n*   Name: BizAgi Desktop queryCheck\r\n*   Author: Ivan Ricardo Taimal Narvaez\r\n*   Comments:queryCheck\r\n*   -\r\n*/\n\nbizagi.rendering.desktop.check.extend(\"bizagi.rendering.desktop.queryCheck\", {}, {\n  /*\r\n                                                                                   *   Returns the internal value\r\n                                                                                   */\n  getValue: function getValue() {\n    return bizagi.util.parseBoolean(this.value);\n  } });","/*\r\n*   Name: BizAgi Desktop queryYesNo\r\n*   Author: Ivan Ricardo Taimal Narvaez\r\n*   Comments:queryYesNo\r\n*   -\r\n*/\n\nbizagi.rendering.desktop.yesno.extend(\"bizagi.rendering.desktop.queryYesNo\", {}, {\n  /*\r\n                                                                                    *   Returns the internal value\r\n                                                                                    */\n  getValue: function getValue() {\n    return bizagi.util.parseBoolean(this.value);\n  } });","/*\r\n*   Name: BizAgi Desktop querySearch\r\n*   Author: Ivan Ricardo Taimal Narvaez\r\n*   Comments:querySearch\r\n*   -\r\n*/\n\nbizagi.rendering.desktop.search.extend(\"bizagi.rendering.desktop.querySearch\", {}, {\n  /*\r\n                                                                                     *   Opens the search dialog\r\n                                                                                     */\n  showSearchDialog: function showSearchDialog() {\n    var self = this,\n    properties = self.properties,\n    extraButtons,\n    contextType = properties.searchForms.length > 0 && properties.searchForms[0].type == \"searchForm\" ? \"metadata\" : \"entity\";\n\n    // Define add button\n    if (properties.allowNew) {\n      extraButtons = self.showAddRecordDialog();\n    }\n\n    // Show search dialog\n    self.searchDialog = new bizagi.rendering.dialog.search(self.dataService, self.renderFactory, properties.searchForms, {\n      allowFullSearch: properties.allowFullSearch,\n      maxRecords: properties.maxRecords },\n    extraButtons);\n\n    self.searchDialog.render({\n      idRender: properties.id,\n      xpath: properties.xpath,\n      xpathContext: properties.xpathContext,\n      idPageCache: properties.idPageCache,\n      contexttype: contextType }).\n    done(function (item) {\n      data = { id: item.id, value: item.id };\n      // Set data\n      self.setDisplayValue(data);\n      self.setValue(data);\n    });\n  } });","/**\r\n*   Name: Bizagi Desktop queryForm Extension\r\n*   Author: UI Forms Team\r\n *   Comments:\r\n*   -   This script will redefine the container class to adjust to desktop devices\r\n*   -   Will apply a desktop form template\r\n*/\n\n// Extends from form desktop base\nbizagi.rendering.desktop.form.extend(\"bizagi.rendering.desktop.queryForm\", {}, {\n\n  /*\r\n                                                                                  *    Create a function to hide check all element in view when no contains check elements\r\n                                                                                  */\n  postRenderContainer: function postRenderContainer(container) {\n    var self = this;\n    var checkIncluded = [];\n    var checkIncludedAll = self.container.find(\".ui-bizagi-render-control-included-all\");\n    // Call base\n    self._super(container);\n    checkIncluded = self.container.find(\".ui-bizagi-render-control-included\");\n    if (checkIncluded.length <= 0) {\n      checkIncludedAll.parent().hide();\n    }\n  },\n  /*\r\n     *    Creates a json array with key values to send to the server\r\n     */\n  collectRenderValuesForSubmit: function collectRenderValuesForSubmit(request) {\n    var self = this;\n    var data = [],\n    _matchedRender = function _matchedRender(renders, item) {\n      var _matched = function _matched(rType, iType) {\n        return rType.toUpperCase() === iType.toUpperCase();\n      },\n      _validateMatch = function _validateMatch(r) {\n        return bizagi.util.tryCatch(\n        function () {return _matched(r.properties.rangeQuery, item.searchType);},\n        true);\n\n      };\n\n      return renders.filter(_validateMatch);\n    };\n    // Collect data in array\n    self.collectRenderValuesQueryForm(data);\n\n    // Mark data collected as original values\n    $.each(data, function (i, item) {\n      var _rendersFounded = self.getRenders(item.xpath),\n      renders = _matchedRender(_rendersFounded, item);\n      if (renders.length === 0) {\n        renders = _rendersFounded;\n      }\n\n      item[\"displayHeader\"] = renders[0].properties.xpath.indexOf(\"@\") > -1 ? renders[0].properties.xpath : null;\n      $.each(renders, function (i, render) {\n        render.updateOriginalValue();\n      });\n    });\n    request.parameters = data;\n    return request;\n  },\n\n  getSearchParams: function getSearchParams(request) {\n    var self = this;\n    var $canvas = self.getValidationsContainer();\n    self.validationController = new bizagi.command.controllers.validation(self, self.validations, $canvas);\n\n    var valid = self.validationController.performValidations();\n    if (valid) {\n      return self.collectRenderValuesForSubmit(request);\n    } else {\n      self.validationController.expandNotificationBox();\n      return null;\n    }\n  },\n  /*\r\n     *  configure Handlers for check  all column included in the response\r\n     */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    self._super();\n    var checkIncludedAll = self.container.find(\".ui-bizagi-render-control-included-all\");\n    checkIncludedAll.tooltip({ position: { my: \"right-20 center\", at: \"right center\" }, tooltipClass: 'bz-wp-queryForm-check-all' });\n    checkIncludedAll.change(function () {\n      var newValue = checkIncludedAll.is(\":checked\");\n\n      var checkedChildren = function checkedChildren(target) {\n        $.each(target.children, function (i, item) {\n          if (item.element) {\n            if (self.isControlVisible(item) && item.properties.includedInResult === true) {\n              item.properties.included = newValue;\n              var checkIncluded = item.element.find(\".ui-bizagi-render-control-included\");\n              checkIncluded.prop(\"checked\", newValue);\n            }\n          } else\n          if (item.children) {\n            checkedChildren(item);\n          }\n        });\n      };\n\n      checkedChildren(self);\n    });\n  },\n\n  isControlVisible: function isControlVisible(control) {\n    var self = this;\n    if (control.parent) {\n      if (control.properties.visible) {\n        return self.isControlVisible(control.parent);\n      } else {\n        return false;\n      }\n    } else {\n      return control.properties.visible;\n    }\n  } });","/**\r\n *   Name: Bizagi Desktop queryTextAdvanced\r\n *   Author: UI Forms Team\r\n *   Comments: queryTextAdvanced\r\n *   -   This script will redefine the query text-advanced render class to adjust to desktop devices\r\n */\n\n// Extends from render Desktop base\nbizagi.rendering.desktop.render.extend(\"bizagi.rendering.desktop.queryTextAdvanced\", bizagi.rendering.render.base.prototype);\n// Extends itself\nbizagi.rendering.desktop.queryTextAdvanced.extend(\"bizagi.rendering.desktop.queryTextAdvanced\", bizagi.rendering.queryAdvanced.prototype);\n// Extends itself\nbizagi.rendering.desktop.queryTextAdvanced.extend(\"bizagi.rendering.desktop.queryTextAdvanced\", {\n  DATATYPE: \"Text\",\n  TOOLTIP_TITLE: \"Use the (%) percent to get accurate results related to your keyword. e.g:\",\n  TOOLTIP_CONTENT: \"<br/>&#9679; %ABC if the keyword ends with ABC.</br>&#9679; AB%C if the keyword starts with AB and ends with C.<br/>&#9679; ABC% if the keyword starts with ABC.\" },\n{\n\n  // region // #region CONTROL BASE\n\n  /**\r\n   * Update or init the element data\r\n   * @param data\r\n   */\n  initializeData: function initializeData(data) {\n\n    // Default maxLength\n    this.maxLength = data.properties.maxLength;\n    data.properties.maxLength = 0;\n    this.defaultFilter = 'wildcard';\n\n    // Call base\n    this._super(data);\n\n    this.isNewRenderForm = true;\n  },\n\n  /**\r\n      * Customize each render after processed\r\n      */\n  postRender: function postRender() {\n    var filterType = this.properties.filterType || \"\";\n\n    // Call to base\n    this._super();\n\n    // Call to repaint filters\n    this.setFilter(filterType);\n  },\n\n  /**\r\n      * Sets the internal value\r\n      * @param value\r\n      * @param triggerEvents\r\n      */\n  setValue: function setValue(value, triggerEvents) {\n    triggerEvents = triggerEvents !== undefined ? triggerEvents : true;\n\n    value = Array.isArray(value) ? JSON.encode(value) : value;\n\n    this._super(value, triggerEvents);\n  },\n\n  prepareForSetValue: function prepareForSetValue() {\n    var currentFilter = this.getCurrentFilter();\n    var noFilterSettled = bizagi.util.isEmpty(currentFilter);\n\n    var filterToSet = noFilterSettled ? this.defaultFilter : currentFilter.id;\n\n    this.setFilter(filterToSet);\n  },\n\n  /**\r\n      * Sets the value in the rendered control\r\n      * @param value\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n    var $control = self.getControl();\n\n    if (self.properties.editable)\n    self.prepareForSetValue();\n\n    var action = this.getCurrentAction();\n    var newValue = self.performDataValue(value);\n\n    // Set internal value\n    this.setValue(newValue, false);\n\n    // Update clean icon\n    if (this.isExecutionMode()) {\n      self.showHideCleanButton(true);\n    } else {\n      this.controlInitial && this.controlInitial.setDisplayValue(value);\n    }\n\n    // Render by filter type\n    if (self.isCurrentTagFilter()) {\n      self.addSelectedElements();\n    } else if ([\"wildcard\", \"like\", \"starts-with\", \"ends-with\"].includes(action)) {\n\n      // Enable wildcard\n      if (value && $.trim(value).length > 0) {\n\n        this.controlInitial && this.controlInitial.setDisplayValue(newValue);\n\n        if (self.isCurrentWildcardFilter()) {\n          var $container = $control.find(\".bz-query-advanced\");\n          $container.data(\"mode-wildcard\", true);\n        }\n      }\n\n    }\n  },\n\n  /**\r\n      * The render's behaviour to add handlers\r\n      */\n  configureHandlers: function configureHandlers() {\n    // Call Base\n    this._super();\n\n    // Call to wildcard handlers\n    this.configureWildcardHandlers();\n  },\n\n  /**\r\n      * Add handlers to query-filter control\r\n      */\n  configureWildcardHandlers: function configureWildcardHandlers() {\n    var self = this;\n    var $control = self.getControl();\n    var templateTooltip = self.renderFactory.getTemplate(\"query.advanced-tooltip\");\n\n    var $templateItem = $.tmpl(templateTooltip, {\n      title: bizagi.localization.getResource(\"workportal-widget-filter-wildcard-tooltip-title\", self.Class.TOOLTIP_TITLE),\n      content: bizagi.localization.getResource(\"workportal-widget-filter-wildcard-tooltip-content\", self.Class.TOOLTIP_CONTENT) });\n\n\n    $control.on(\"keyup\", \".bz-query-advanced__input\", function () {\n\n      if (!self.filterOptionIsShowed()) {\n        var $container = $control.find(\".bz-query-advanced\");\n        var $buttonClean = $(\".bz-query-advanced__clean\", $container);\n        var updateCleanButton;\n\n        if ($.trim(this.value).length > 0) {\n\n          $container.data(\"mode-wildcard\", true);\n\n          updateCleanButton = $buttonClean.hasClass(\"bz-hidden\");\n          self.setCurrentFilter({ id: \"wildcard\" });\n\n          // Hide list of filters\n          self.closeFloatView();\n        } else {\n          $container.data(\"mode-wildcard\", false);\n\n          $buttonClean.addClass('bz-hidden');\n          updateCleanButton = !$buttonClean.hasClass(\"bz-hidden\");\n\n          self.setCurrentFilter({ id: \"\" });\n        }\n\n        // Toggle to show the clean button\n        if (updateCleanButton) {\n          self.showHideCleanButton(true);\n        }\n\n        if (self.isCurrentWildcardFilter()) {\n          self.showTooltip($container, $templateItem.html());\n        }\n      }\n    });\n  },\n\n  /**\r\n      * Show tooltip\r\n      * @param $container\r\n      * @param $templateItem\r\n      */\n  showTooltip: function showTooltip($container, $templateItem) {\n    //Show Tooltip\n    $container.attr(\"title\", $templateItem);\n\n    if ($container.data(\"tooltip\") === undefined) {\n      // Apply tooltip plugin\n      $container.tooltip({\n        tooltipClass: 'bz-query-advanced__wildcard-tooltip',\n        position: {\n          my: \"left bottom\",\n          at: \"left top\" },\n\n        content: function content() {\n          var element = $(this)[0];\n          if (element && element.title) {\n            var _title = element.title;\n\n            element.title = \"\";\n\n            return _title;\n          }\n        } });\n\n    }\n\n    $container.tooltip(\"open\");\n  },\n\n  /**\r\n      * Returns the html templated element\r\n      * @returns {*}\r\n      */\n  renderElement: function renderElement() {\n    return this._super(\"render-base\");\n  },\n\n  /**\r\n      *  Changes the render required\r\n      * @param argument\r\n      */\n  changeRequired: function changeRequired(argument) {\n    this.properties.required = argument;\n\n    this.changeRequiredLabel(argument);\n  },\n\n  /**\r\n      * Change cell required and attach bindings\r\n      * @param argument\r\n      */\n  changeCellRequired: function changeCellRequired(argument) {\n    this.changeRequired(argument);\n  },\n\n  /**\r\n      * This method just make a toggle of red label indicator\r\n      * @argument {boolean} argument\r\n      */\n  changeRequiredLabel: function changeRequiredLabel(argument) {\n    var control = this.getControl();\n\n    if (control.length > 0) {\n      if (this.getMode() !== \"execution\") {\n        if (bizagi.util.parseBoolean(argument) === true && this.properties.editable) {\n          control.addClass(\"control-required\");\n        } else {\n          control.removeClass(\"control-required\");\n        }\n      } else {\n        if (bizagi.util.parseBoolean(argument) === true && !this.hasValue() && this.properties.editable) {\n          control.addClass(\"control-required\");\n        } else {\n          control.removeClass(\"control-required\");\n        }\n      }\n    }\n    this.triggerRenderValidate();\n  },\n\n  /**\r\n      * Returns the internal value\r\n      * @returns {*|Array}\r\n      */\n  getValue: function getValue() {\n    if (this.isCurrentTagFilter()) return this.performTagItems();\n\n    if (this.isCurrentNullFilter()) return null;\n\n    // Call to base\n    return this.controlInitial ? this.controlInitial.getValue() : \"\";\n  },\n\n  /**\r\n      * Get the label element\r\n      * @returns {jQuery|HTMLElement}\r\n      */\n  getLabel: function getLabel() {\n    return $(\"label\", this._super());\n  },\n\n  // endregion // #endregion\n\n  // region // #region METHODS TO LIST FILTERS\n\n  cleanDataFilter: function cleanDataFilter(refresh) {\n    var $inputWildcard = $(\".bz-query-advanced\", this.getControl());\n    if ($inputWildcard.data('ui-tooltip')) {\n      $inputWildcard.tooltip('destroy');\n      $inputWildcard.removeAttr(\"title\");\n    }\n    $inputWildcard.data(\"mode-wildcard\", false);\n    this._super(refresh);\n  },\n\n  // endregion // #endregion\n\n  // region // #region METHODS TO LITE CONTROLS\n\n  /**\r\n   * Define the controls depend of filter type\r\n   * @param {*} params\r\n   */\n  defineLiteControl: function defineLiteControl(params) {\n    var self = this;\n    var typeFilter = params && params.typeFilter || \"advanced\";\n    var controlEnd = null;\n\n    var controlInitial = new bizagi.rendering.desktop.textAdvanced(self.getRenderProperties({\n      typeControl: typeFilter,\n      isRange: this.isCurrentBetweenFilter() }));\n\n\n    self.setLiteControls(controlInitial, controlEnd);\n  },\n\n  /**\r\n      * set the rendered controls\r\n      * @param {*} controlInitial\r\n      * @param {*} controlEnd\r\n      */\n  setLiteControls: function setLiteControls(controlInitial, controlEnd) {\n    var self = this;\n    var control = self.getControl();\n\n    var filter = this.getCurrentFilter();\n    var filterType = filter && filter.action || \"default\";\n\n    self.controlInitial = controlInitial || null;\n    self.controlEnd = controlEnd || null;\n\n    var template = this.renderFactory.getTemplate(\"query.advanced-content\");\n    var $templateItem = $.tmpl(template, {\n      value: self.getResourceByKey(filter.label, filter.defaultLabel),\n      id: filter.id,\n      filterType: filterType });\n\n\n    var $canvas = $(\".bz-query-advanced__filter\", control).empty();\n    $canvas.append($templateItem);\n\n    var $controlInitial = $(\".bz-query-advanced__filter-input\", $canvas);\n    self.renderLiteControl(filterType, $controlInitial, controlInitial);\n  },\n\n  /**\r\n      * Render control\r\n      * @param {*} filterType\r\n      * @param {*} $canvas\r\n      * @param {*} control\r\n      */\n  renderLiteControl: function renderLiteControl(filterType, $canvas, control) {\n    var self = this;\n\n    // Templates: input or between\n    $.when(control.render(this.getTemplateByType(filterType))).\n    done(function (html) {\n      $canvas.empty().append(html);\n\n      var action = self.getCurrentAction();\n      var $inputFiler = $(\".bz-query-advanced__input\", $canvas);\n\n      $inputFiler.attr(\"data-action\", action);\n\n      if (self.isCurrentNullFilter()) {\n        $inputFiler.attr(\"readonly\", true);\n      }\n\n      control.postRenderElement($canvas, true); // true for skip design hack\n\n      if (!self.isCurrentTagFilter()) {\n        self.configureInternalHandlers(control);\n      }\n    });\n  },\n\n  getTemplateByType: function getTemplateByType(filterType) {\n    if ([\"between\", \"tags\"].includes(filterType)) return \"query.advanced-text\";\n    return \"query.advanced-input\";\n  },\n\n  configureInternalHandlers: function configureInternalHandlers(control) {\n    var self = this;\n    var $internalControl = control.getInputControl();\n\n    // Handler for update data value\n    $internalControl.bind(\"updateData\", function (evt, params) {\n      // Update data value\n      self.setValue(self.getValue());\n    });\n  },\n\n  getRequiredProperties: function getRequiredProperties() {\n    return {\n      maxLength: this.maxLength };\n\n  }\n\n  // endregion // #endregion\n});\n\n\n// Extends from render desktop base\nbizagi.rendering.desktop.text.extend(\"bizagi.rendering.desktop.textAdvanced\", {}, {\n\n  getControl: function getControl() {\n    var self = this;\n    if (!self.control || self.control instanceof jQuery && self.control.length === 0) {\n      self.control = $(self.element || self.observableElement);\n    }\n    if (!self.control || self.control.length === 0) {\n      return null;\n    }\n    return self.control;\n  },\n\n  setValue: function setValue(value) {\n    value = value || \"\";\n\n    this._super(value);\n\n    // Update parent control\n    var $inputControl = this.getInputControl();\n    $inputControl && $inputControl.trigger('updateData', { data: value });\n  },\n\n  getInputControl: function getInputControl() {\n    return $(\"input\", this.getControl()) || null;\n  } });","/**\r\n *   Name: Bizagi Desktop queryNumber\r\n *   Author: UI Forms Team\r\n *   Comments: queryNumberAdvanced\r\n *   -   This script will redefine the query text-advanced render class to adjust to desktop devices\r\n */\n\n// Extends from render desktop base\nbizagi.rendering.desktop.render.extend(\"bizagi.rendering.desktop.queryNumberAdvanced\", bizagi.rendering.render.base.prototype);\n// Extends itself\nbizagi.rendering.desktop.queryNumberAdvanced.extend(\"bizagi.rendering.desktop.queryNumberAdvanced\", bizagi.rendering.queryAdvanced.prototype);\n// Extends itself\nbizagi.rendering.desktop.queryNumberAdvanced.extend(\"bizagi.rendering.desktop.queryNumberAdvanced\", {\n  DATATYPE: \"Number\" },\n{\n  // region // #region CONTROL BASE\n\n  /**\r\n   * Update or init the element data\r\n   * @param data\r\n   */\n  initializeData: function initializeData(data) {\n    // Call base\n    this._super(data);\n\n    this.isNewRenderForm = true;\n    this.defaultFilter = \"default\";\n\n    var properties = this.properties;\n    var format = this.getResource(\"numericFormat\");\n\n    properties.allowDecimals =\n    typeof properties.allowDecimals !== \"undefined\" ?\n    bizagi.util.parseBoolean(properties.allowDecimals) :\n    this.getDefaultAllowDecimals(properties.dataType);\n    properties.numDecimals = properties.allowDecimals ?\n    properties.numDecimals ?\n    properties.numDecimals :\n    typeof BIZAGI_DEFAULT_CURRENCY_INFO !== \"undefined\" ?\n    BIZAGI_DEFAULT_CURRENCY_INFO.decimalDigits :\n    2 :\n    0;\n    properties.symbol = \"\";\n    properties.positiveFormat = format.positiveFormat;\n    properties.negativeFormat = format.negativeFormat;\n    properties.decimalSymbol =\n    typeof BIZAGI_DEFAULT_CURRENCY_INFO !== \"undefined\" ?\n    BIZAGI_DEFAULT_CURRENCY_INFO.decimalSeparator :\n    format.decimalSymbol;\n    properties.digitGroupSymbol =\n    typeof BIZAGI_DEFAULT_CURRENCY_INFO !== \"undefined\" ?\n    BIZAGI_DEFAULT_CURRENCY_INFO.groupSeparator :\n    format.digitGroupSymbol;\n    properties.groupDigits = this.setGroupDigits();\n    properties.colorize = properties.colorizeOnNegative || false;\n    properties.minValue = properties.minValue || null;\n    properties.maxValue = properties.maxValue || null;\n    properties.dataType = properties.dataType || 1;\n  },\n\n  /**\r\n      * Customize each render after processed\r\n      */\n  postRender: function postRender() {\n    var filterType = this.properties.filterType || \"\";\n\n    // Call to base\n    this._super();\n\n    // Call to repaint filters\n    this.setFilter(filterType);\n  },\n\n  /**\r\n      * Sets the internal value\r\n      * @param value\r\n      * @param triggerEvents\r\n      */\n  setValue: function setValue(value, triggerEvents) {\n    triggerEvents = triggerEvents !== undefined ? triggerEvents : true;\n\n    value = Array.isArray(value) ? JSON.encode(value) : value;\n\n    this._super(value, triggerEvents);\n  },\n\n  /**\r\n      * Sets the value in the rendered control\r\n      * @param value\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n\n    if (self.properties.editable)\n    self.prepareForSetValue();\n\n    var action = this.getCurrentAction();\n    var newValue = self.performDataValue(value);\n\n\n    // Set internal value\n    this.setValue(newValue, false);\n\n    // Update clean icon\n    if (this.isExecutionMode() && action !== this.defaultFilter) {\n      self.showHideCleanButton(true);\n    } else {\n      this.controlInitial && this.controlInitial.setDisplayValue(value);\n    }\n\n    // Render by filter type\n    if (self.isCurrentTagFilter()) {\n      self.addSelectedElements();\n    } else if ([\"to\", \"from\"].includes(action)) {\n      this.controlInitial && this.controlInitial.setDisplayValue(newValue);\n    } else if (value && [\"between\"].includes(action)) {\n      var newListValue = self.performListValue(value);\n\n      if (newListValue && newListValue.from)\n      this.controlInitial &&\n      this.controlInitial.setDisplayValue(newListValue.from);\n      if (newListValue && newListValue.to)\n      this.controlEnd && this.controlEnd.setDisplayValue(newListValue.to);\n    }\n  },\n\n  /**\r\n      * Returns the html templated element\r\n      * @returns {*}\r\n      */\n  renderElement: function renderElement() {\n    return this._super(\"render-base\");\n  },\n\n  /**\r\n      *  Changes the render required\r\n      * @param argument\r\n      */\n  changeRequired: function changeRequired(argument) {\n    this.properties.required = argument;\n\n    this.changeRequiredLabel(argument);\n  },\n\n  /**\r\n      * Change cell required and attach bindings\r\n      * @param argument\r\n      */\n  changeCellRequired: function changeCellRequired(argument) {\n    this.changeRequired(argument);\n  },\n\n  /**\r\n      * This method just make a toggle of red label indicator\r\n      * @argument {boolean} argument\r\n      */\n  changeRequiredLabel: function changeRequiredLabel(argument) {\n    var control = this.getControl();\n\n    if (control.length > 0) {\n      if (this.getMode() !== \"execution\") {\n        if (bizagi.util.parseBoolean(argument) === true && this.properties.editable) {\n          control.addClass(\"control-required\");\n        } else {\n          control.removeClass(\"control-required\");\n        }\n      } else {\n        if (bizagi.util.parseBoolean(argument) === true && !this.hasValue() && this.properties.editable) {\n          control.addClass(\"control-required\");\n        } else {\n          control.removeClass(\"control-required\");\n        }\n      }\n    }\n    this.triggerRenderValidate();\n  },\n\n  /**\r\n      * Returns the internal value\r\n      * @returns {*|Array}\r\n      */\n  getValue: function getValue() {\n    if (this.isCurrentTagFilter()) return this.performTagItems();\n\n    if (this.isCurrentBetweenFilter()) {\n      var initial = this.controlInitial ? this.formatInputValue(this.controlInitial.getValue()) : \"null\";\n      var end = this.controlEnd ? this.formatInputValue(this.controlEnd.getValue()) : \"null\";\n      var newValue = [initial, end];\n\n      return initial === \"null\" && end === \"null\" ? \"\" : JSON.encode(newValue);\n    }\n\n    if (this.isCurrentNullFilter()) return null;\n\n    // Call to base\n    return this.controlInitial ? this.controlInitial.getValue() : \"\";\n  },\n  /**\r\n      * Return the value on controlInitial as number\r\n      * @param {*} value\r\n      */\n  getValidTagValue: function getValidTagValue(value) {\n    return this.controlInitial && this.controlInitial.numericInput.asNumber() || $.trim(value);\n  },\n  /**\r\n      * Return the group digits default property based on digitGroupSymbol\r\n      * @returns {*}\r\n      */\n  setGroupDigits: function setGroupDigits() {\n    var self = this;\n    if (typeof self.properties.thousands !== \"undefined\") {\n      if (self.properties.digitGroupSymbol) {\n        // some cultures\n        return bizagi.util.parseBoolean(self.properties.thousands);\n      } else {\n        return false;\n      }\n    } else if (self.properties.digitGroupSymbol) {\n      // some cultures\n      return this.getDefaultGroupDigits(self.properties.dataType);\n    } else {\n      return false;\n    }\n  },\n\n  /**\r\n      * Return the allow decimals default property based on the datatype\r\n      * @param dataType\r\n      * @returns {boolean}\r\n      */\n  getDefaultAllowDecimals: function getDefaultAllowDecimals(dataType) {\n    if (dataType) {\n      // Integer data types\n      if ([1, 2, 3, 4, 7].includes(dataType)) return false;\n\n      // Decimal and money data types\n      if ([6, 8, 10, 11].includes(dataType)) return true;\n    }\n\n    return false;\n  },\n\n  /**\r\n      * Return the group digits default property based on the datatype\r\n      * @param dataType\r\n      * @returns {boolean}\r\n      */\n  getDefaultGroupDigits: function getDefaultGroupDigits(dataType) {\n    if (dataType) {\n      // Integer data types\n      if ([1, 2, 3, 4, 7].includes(dataType)) return false;\n\n      // Decimal data types\n      if ([6, 8, 10, 11].includes(dataType)) return true;\n    }\n\n    return false;\n  },\n\n  /**\r\n      * Get the label element\r\n      * @returns {jQuery|HTMLElement}\r\n      */\n  getLabel: function getLabel() {\n    return $(\"label\", this._super());\n  },\n\n  // endregion // #endregion\n\n  // region // #region METHODS TO LITE CONTROLS\n\n  /**\r\n   * Define the controls depend of filter type\r\n   * @param {*} params\r\n   */\n  defineLiteControl: function defineLiteControl(params) {\n    var self = this;\n    var typeFilter = params && params.typeFilter || \"advanced\";\n    var numberEnd = null;\n    var numberInitial = new bizagi.rendering.desktop.numberAdvanced(\n    self.getRenderProperties({\n      typeControl: typeFilter,\n      isRange: this.isCurrentBetweenFilter(),\n      isMinimum: true }));\n\n\n\n    if (this.isCurrentBetweenFilter()) {\n      numberEnd = new bizagi.rendering.desktop.numberAdvanced(\n      self.getRenderProperties({\n        typeControl: typeFilter + \"_max\",\n        isRange: this.isCurrentBetweenFilter(),\n        isMaximum: true }));\n\n\n\n      numberInitial.subscribe(numberEnd);\n      numberEnd.subscribe(numberInitial);\n    }\n\n    self.setLiteControls(numberInitial, numberEnd);\n  },\n\n  /**\r\n      * set the rendered controls\r\n      * @param {*} controlInitial\r\n      * @param {*} controlEnd\r\n      */\n  setLiteControls: function setLiteControls(controlInitial, controlEnd) {\n    var self = this;\n    var control = self.getControl();\n\n    var filter = this.getCurrentFilter();\n    var filterType = filter && filter.action || \"default\";\n\n    self.controlInitial = controlInitial || null;\n    self.controlEnd = controlEnd || null;\n\n    var template = this.renderFactory.getTemplate(\"query.advanced-content\");\n    var $templateItem = $.tmpl(template, {\n      value: self.getResourceByKey(filter.label, filter.defaultLabel),\n      id: filter.id,\n      filterType: filterType });\n\n\n    var $canvas = $(\".bz-query-advanced__filter\", control).empty();\n\n    if (this.isCurrentBetweenFilter()) {\n      $canvas.append($templateItem);\n\n      var $numberMin = $(\".bz-query-advanced__filter-input-from\", $canvas);\n      var $numberMax = $(\".bz-query-advanced__filter-input-to\", $canvas);\n\n      self.renderLiteControl(filterType, $numberMin, controlInitial);\n      self.renderLiteControl(filterType, $numberMax, controlEnd);\n    } else {\n      $canvas.append($templateItem);\n\n      var $numberInitial = $(\".bz-query-advanced__filter-input\", $canvas);\n      self.renderLiteControl(filterType, $numberInitial, controlInitial);\n    }\n  },\n\n  /**\r\n      * Render control\r\n      * @param {*} filterType\r\n      * @param {*} $canvas\r\n      * @param {*} control\r\n      */\n  renderLiteControl: function renderLiteControl(filterType, $canvas, control) {\n    var self = this;\n\n    // Templates: input or between\n    $.when(control.render(this.getTemplateByType(filterType))).done(function (html) {\n      $canvas.empty().append(html);\n\n      var action = self.getCurrentAction();\n      var $inputFiler = $(\".bz-query-advanced__input\", $canvas);\n\n      $inputFiler.attr(\"data-action\", action);\n\n      if (self.isCurrentNullFilter()) {\n        $inputFiler.attr(\"readonly\", true);\n      }\n\n      control.postRenderElement($canvas, true); // true for skip design hack\n\n      if (!self.isCurrentTagFilter()) {\n        self.configureInternalHandlers(control);\n      }\n    });\n  },\n\n  getTemplateByType: function getTemplateByType(filterType) {\n    if ([\"between\", \"tags\"].includes(filterType)) return \"query.advanced-text\";\n    return \"query.advanced-input\";\n  },\n\n  configureInternalHandlers: function configureInternalHandlers(control) {\n    var self = this;\n    var $internalControl = control.getInputControl();\n\n    // Handler for update data value\n    $internalControl.bind(\"updateData\", function (evt, params) {\n      // Update data value\n      self.setValue(self.getValue());\n    });\n  },\n\n  getRequiredProperties: function getRequiredProperties() {\n    var properties = this.properties;\n\n    return {\n      allowDecimals: properties.allowDecimals,\n      numDecimals: properties.numDecimals,\n      symbol: properties.symbol,\n      positiveFormat: properties.positiveFormat,\n      negativeFormat: properties.negativeFormat,\n      decimalSymbol: properties.decimalSymbol,\n      digitGroupSymbol: properties.digitGroupSymbol,\n      groupDigits: properties.groupDigits,\n      colorize: properties.colorize,\n      minValue: properties.minValue,\n      maxValue: properties.maxValue,\n      dataType: properties.dataType,\n      percentage: properties.percentage };\n\n  },\n\n  // endregion // #endregion\n\n  // region // #region METHODS TO TAGS FILTER\n\n  addTag: function addTag(tagItem) {\n    var controlTag = this.controlInitial;\n    if (controlTag) {\n      var numericInput = controlTag.numericInput;\n      controlTag.formatNumericInput(numericInput[0]);\n\n      if (bizagi.util.isEmpty(controlTag.getValue())) return;\n\n      tagItem.value = controlTag.getValue() || \"\";\n      tagItem.displayValue = numericInput.val() || \"\";\n    }\n\n    this._super(tagItem);\n  },\n\n  /**\r\n      * Add format to tag\r\n      * @param value\r\n      * @returns {*}\r\n      */\n  formatTagItem: function formatTagItem(value) {\n    var properties = this.properties;\n    var decimalFormat = {\n      symbol: properties.symbol,\n      positiveFormat: properties.positiveFormat,\n      negativeFormat: properties.negativeFormat,\n      decimalSymbol: properties.decimalSymbol,\n      digitGroupSymbol: properties.digitGroupSymbol,\n      groupDigits: properties.groupDigits,\n      roundToDecimalPlace: properties.numDecimals,\n      colorize: properties.colorize };\n\n\n    return bizagi.util.formatDecimal(value, decimalFormat);\n  },\n\n  // endregion // #endregion\n\n  // region // #region A&V METHODS\n\n  /**\r\n   * Changes the render minimum value\r\n   * @param value\r\n   */\n  changeMinValue: function changeMinValue(value) {\n    if (!!this.controlInitial) {\n      var newValue = this.controlInitial.performMinValue(value);\n\n      this.properties.minValue = this.properties.dataTypeMinValue = newValue;\n      this.controlInitial.changeMinValue(value);\n\n      // Condition for between filter\n      if (!!this.controlEnd && !!this.controlInitial) {\n        this.controlEnd.changeMinValue(value);\n      }\n    }\n  },\n\n  /**\r\n      * Changes the render maximum value\r\n      * @param value\r\n      */\n  changeMaxValue: function changeMaxValue(value) {\n    if (!!this.controlInitial) {\n      var newValue = this.controlInitial.performMaxValue(value);\n\n      this.properties.maxValue = this.properties.dataTypeMaxValue = newValue;\n\n      // Condition for between filter\n      if (!!this.controlEnd && !!this.controlInitial) {\n        this.controlEnd.changeMaxValue(value);\n      } else {\n        this.controlInitial.changeMaxValue(value);\n      }\n    }\n  },\n\n  /**\r\n      * Customizes render color\r\n      * @param {} color\r\n      * @returns {}\r\n      */\n  changeColor: function changeColor(color) {\n    var $control = this.getControl();\n\n    // To review: Save the command to propagate action when filter is changed\n    if (!!this.controlInitial) this.controlInitial.changeColor(color, true);\n    if (!!this.controlEnd) this.controlEnd.changeColor(color, true);\n\n    return this._super(color).changeFontColor($(\"label\", $control), color);\n  },\n\n  /**\r\n      * Context to apply styles\r\n      * @param context\r\n      * @returns {jQuery|HTMLElement}\r\n      */\n  getElementsToStylize: function getElementsToStylize(context) {\n    return this._super(context);\n  }\n\n  // endregion // #endregion\n});\n\n// Extends from render desktop base\nbizagi.rendering.desktop.number.extend(\"bizagi.rendering.desktop.numberAdvanced\", {}, {\n  getControl: function getControl() {\n    var self = this;\n    if (!self.control || self.control instanceof jQuery && self.control.length === 0) {\n      self.control = $(self.element || self.observableElement);\n    }\n    if (!self.control || self.control.length === 0) {\n      return null;\n    }\n    return self.control;\n  },\n\n  subscribe: function subscribe(control) {\n    this.observer = this.observer || [];\n    this.observer.push(control);\n  },\n\n  notify: function notify(value) {\n    if (this.properties.isRange) {\n      for (var i = this.observer.length - 1; i >= 0; i--) {\n        if (this.properties.isMaximumValue) {\n          value = bizagi.util.isNumeric(value) ? value : this.properties.maxValue || this.calculateMaxValue(this.properties.dataType);\n          this.observer[i].changeMaxValue(value);\n        } else if (this.properties.isMinimumValue) {\n          value = bizagi.util.isNumeric(value) ? value : this.properties.minValue || this.calculateMinValue(this.properties.dataType);\n          this.observer[i].changeMinValue(value);\n        }\n      }\n    }\n  },\n\n  setValue: function setValue(value) {\n    this._super(value);\n    this.notify(value);\n\n    // Update parent control\n    var $inputControl = this.getInputControl();\n    $inputControl && $inputControl.trigger(\"updateData\", { data: value });\n  },\n\n  getInputControl: function getInputControl() {\n    return $(\"input\", this.getControl()) || null;\n  } });","/**\r\n *   Name: Bizagi Desktop queryNumber\r\n *   Author: UI Forms Team\r\n *   Comments: queryMoneyAdvanced\r\n *   -   This script will redefine the query text-advanced render class to adjust to desktop devices\r\n */\n\n// Extends from render Desktop base\nbizagi.rendering.desktop.render.extend(\"bizagi.rendering.desktop.queryMoneyAdvanced\", bizagi.rendering.render.base.prototype);\n// Extends itself\nbizagi.rendering.desktop.queryMoneyAdvanced.extend(\"bizagi.rendering.desktop.queryMoneyAdvanced\", bizagi.rendering.queryAdvanced.prototype);\n// Extends itself\nbizagi.rendering.desktop.queryMoneyAdvanced.extend(\"bizagi.rendering.desktop.queryMoneyAdvanced\", {\n  DATATYPE: \"Currency\" },\n{\n\n  // region // #region CONTROL BASE\n\n  /**\r\n   * Update or init the element data\r\n   * @param data\r\n   */\n  initializeData: function initializeData(data) {\n    // Call base\n    this._super(data);\n\n    this.isNewRenderForm = true;\n    this.defaultFilter = \"default\";\n\n    var properties = this.properties;\n    var format = this.getResource(\"numericFormat\");\n\n    properties.allowDecimals = typeof properties.allowDecimals !== \"undefined\" ? bizagi.util.parseBoolean(properties.allowDecimals) : this.getDefaultAllowDecimals(properties.dataType);\n    properties.numDecimals = properties.allowDecimals ? properties.numDecimals ? properties.numDecimals : typeof BIZAGI_DEFAULT_CURRENCY_INFO !== \"undefined\" ? BIZAGI_DEFAULT_CURRENCY_INFO.decimalDigits : 2 : 0;\n    properties.symbol = \"\";\n    properties.positiveFormat = format.positiveFormat;\n    properties.negativeFormat = format.negativeFormat;\n    properties.decimalSymbol = typeof BIZAGI_DEFAULT_CURRENCY_INFO !== \"undefined\" ? BIZAGI_DEFAULT_CURRENCY_INFO.decimalSeparator : format.decimalSymbol;\n    properties.digitGroupSymbol = typeof BIZAGI_DEFAULT_CURRENCY_INFO !== \"undefined\" ? BIZAGI_DEFAULT_CURRENCY_INFO.groupSeparator : format.digitGroupSymbol;\n    properties.groupDigits = this.setGroupDigits();\n    properties.colorize = properties.colorizeOnNegative || false;\n    properties.minValue = properties.minValue || null;\n    properties.maxValue = properties.maxValue || null;\n    properties.dataType = properties.dataType || 6;\n\n    // Configures symbol\n    properties.showsymbol = typeof properties.showsymbol !== \"undefined\" ? properties.showsymbol : true;\n\n    if (properties.showsymbol) {\n      var symbol = typeof BIZAGI_DEFAULT_CURRENCY_INFO !== \"undefined\" ? BIZAGI_DEFAULT_CURRENCY_INFO.symbol : format.symbol;\n      properties.symbol = properties.currencySymbol ? properties.currencySymbol : symbol;\n    } else {\n      properties.symbol = \"\";\n    }\n\n    properties.groupDigits = true;\n\n  },\n\n  /**\r\n      * Customize each render after processed\r\n      */\n  postRender: function postRender() {\n    var filterType = this.properties.filterType || \"\";\n\n    // Call to base\n    this._super();\n\n    // Call to repaint filters\n    this.setFilter(filterType);\n  },\n\n  /**\r\n      * Sets the internal value\r\n      * @param value\r\n      * @param triggerEvents\r\n      */\n  setValue: function setValue(value, triggerEvents) {\n    triggerEvents = triggerEvents !== undefined ? triggerEvents : true;\n\n    value = Array.isArray(value) ? JSON.encode(value) : value;\n\n    this._super(value, triggerEvents);\n  },\n\n  /**\r\n      * Sets the value in the rendered control\r\n      * @param value\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n\n    if (self.properties.editable)\n    self.prepareForSetValue();\n\n    var action = this.getCurrentAction();\n    var newValue = self.performDataValue(value);\n\n\n    // Set internal value\n    this.setValue(newValue, false);\n\n    // Update clean icon\n    if (this.isExecutionMode() && action !== this.defaultFilter) {\n      self.showHideCleanButton(true);\n    } else {\n      this.controlInitial && this.controlInitial.setDisplayValue(value);\n    }\n\n    // Render by filter type\n    if (self.isCurrentTagFilter()) {\n      self.addSelectedElements();\n    } else if ([\"to\", \"from\"].includes(action)) {\n      this.controlInitial && this.controlInitial.setDisplayValue(newValue);\n    } else if (value && [\"between\"].includes(action)) {\n      var newListValue = self.performListValue(value);\n\n      if (newListValue && newListValue.from) this.controlInitial && this.controlInitial.setDisplayValue(newListValue.from);\n      if (newListValue && newListValue.to) this.controlEnd && this.controlEnd.setDisplayValue(newListValue.to);\n    }\n  },\n\n  /**\r\n      * Returns the html templated element\r\n      * @returns {*}\r\n      */\n  renderElement: function renderElement() {\n    return this._super(\"render-base\");\n  },\n\n  /**\r\n      *  Changes the render required\r\n      * @param argument\r\n      */\n  changeRequired: function changeRequired(argument) {\n    this.properties.required = argument;\n\n    this.changeRequiredLabel(argument);\n  },\n\n  /**\r\n      * Change cell required and attach bindings\r\n      * @param argument\r\n      */\n  changeCellRequired: function changeCellRequired(argument) {\n    this.changeRequired(argument);\n  },\n\n  /**\r\n      * This method just make a toggle of red label indicator\r\n      * @argument {boolean} argument\r\n      */\n  changeRequiredLabel: function changeRequiredLabel(argument) {\n    var control = this.getControl();\n\n    if (control.length > 0) {\n      if (this.getMode() !== \"execution\") {\n        if (bizagi.util.parseBoolean(argument) === true && this.properties.editable) {\n          control.addClass(\"control-required\");\n        } else {\n          control.removeClass(\"control-required\");\n        }\n      } else {\n        if (bizagi.util.parseBoolean(argument) === true && !this.hasValue() && this.properties.editable) {\n          control.addClass(\"control-required\");\n        } else {\n          control.removeClass(\"control-required\");\n        }\n      }\n    }\n    this.triggerRenderValidate();\n  },\n\n  /**\r\n      * Returns the internal value\r\n      * @returns {*|Array}\r\n      */\n  getValue: function getValue() {\n    if (this.isCurrentTagFilter()) return this.performTagItems();\n\n    if (this.isCurrentBetweenFilter()) {\n      var initial = this.controlInitial ? this.formatInputValue(this.controlInitial.getValue()) : \"null\";\n      var end = this.controlEnd ? this.formatInputValue(this.controlEnd.getValue()) : \"null\";\n      var newValue = [initial, end];\n\n      return initial === \"null\" && end === \"null\" ? \"\" : JSON.encode(newValue);\n    }\n\n    if (this.isCurrentNullFilter()) return null;\n\n    // Call to base\n    return this.controlInitial ? this.controlInitial.getValue() : \"\";\n  },\n  /**\r\n      * Return the value on controlInitial as number\r\n      * @param {*} value\r\n      */\n  getValidTagValue: function getValidTagValue(value) {\n    return this.controlInitial && this.controlInitial.numericInput.asNumber() || $.trim(value);\n  },\n  /**\r\n      * Return the group digits default property based on digitGroupSymbol\r\n      * @returns {*}\r\n      */\n  setGroupDigits: function setGroupDigits() {\n    var self = this;\n    if (typeof self.properties.thousands !== \"undefined\") {\n      if (self.properties.digitGroupSymbol) {// some cultures\n        return bizagi.util.parseBoolean(self.properties.thousands);\n      } else {\n        return false;\n      }\n    } else if (self.properties.digitGroupSymbol) {// some cultures\n      return this.getDefaultGroupDigits(self.properties.dataType);\n    } else {\n      return false;\n    }\n  },\n\n  /**\r\n      * Return the allow decimals default property based on the datatype\r\n      * @param dataType\r\n      * @returns {boolean}\r\n      */\n  getDefaultAllowDecimals: function getDefaultAllowDecimals(dataType) {\n    if (dataType) {\n      // Integer data types\n      if ([1, 2, 3, 4, 7].includes(dataType)) return false;\n\n      // Decimal and money data types\n      if ([6, 8, 10, 11].includes(dataType)) return true;\n    }\n\n    return false;\n  },\n\n  /**\r\n      * Return the group digits default property based on the datatype\r\n      * @param dataType\r\n      * @returns {boolean}\r\n      */\n  getDefaultGroupDigits: function getDefaultGroupDigits(dataType) {\n    if (dataType) {\n      // Integer data types\n      if ([1, 2, 3, 4, 7].includes(dataType)) return false;\n\n      // Decimal data types\n      if ([6, 8, 10, 11].includes(dataType)) return true;\n    }\n\n    return false;\n  },\n\n  /**\r\n      * Get the label element\r\n      * @returns {jQuery|HTMLElement}\r\n      */\n  getLabel: function getLabel() {\n    return $(\"label\", this._super());\n  },\n\n  // endregion // #endregion\n\n  // region // #region METHODS TO LITE CONTROLS\n\n  /**\r\n   * Define the controls depend of filter type\r\n   * @param {*} params\r\n   */\n  defineLiteControl: function defineLiteControl(params) {\n    var self = this;\n    var typeFilter = params && params.typeFilter || \"advanced\";\n    var numberEnd = null;\n    var numberInitial = new bizagi.rendering.desktop.moneyAdvanced(self.getRenderProperties({\n      typeControl: typeFilter,\n      isRange: this.isCurrentBetweenFilter(),\n      isMinimum: true }));\n\n\n    if (this.isCurrentBetweenFilter()) {\n      numberEnd = new bizagi.rendering.desktop.moneyAdvanced(self.getRenderProperties({\n        typeControl: typeFilter + \"_max\",\n        isRange: this.isCurrentBetweenFilter(),\n        isMaximum: true }));\n\n\n      numberInitial.subscribe(numberEnd);\n      numberEnd.subscribe(numberInitial);\n    }\n\n    self.setLiteControls(numberInitial, numberEnd);\n  },\n\n  /**\r\n      * set the rendered controls\r\n      * @param {*} controlInitial\r\n      * @param {*} controlEnd\r\n      */\n  setLiteControls: function setLiteControls(controlInitial, controlEnd) {\n    var self = this;\n    var control = self.getControl();\n\n    var filter = this.getCurrentFilter();\n    var filterType = filter && filter.action || \"default\";\n\n    self.controlInitial = controlInitial || null;\n    self.controlEnd = controlEnd || null;\n\n    var template = this.renderFactory.getTemplate(\"query.advanced-content\");\n    var $templateItem = $.tmpl(template, {\n      value: self.getResourceByKey(filter.label, filter.defaultLabel),\n      id: filter.id,\n      filterType: filterType });\n\n\n    var $canvas = $(\".bz-query-advanced__filter\", control).empty();\n\n    if (this.isCurrentBetweenFilter()) {\n      $canvas.append($templateItem);\n\n      var $numberMin = $(\".bz-query-advanced__filter-input-from\", $canvas);\n      var $numberMax = $(\".bz-query-advanced__filter-input-to\", $canvas);\n\n      self.renderLiteControl(filterType, $numberMin, controlInitial);\n      self.renderLiteControl(filterType, $numberMax, controlEnd);\n\n    } else {\n      $canvas.append($templateItem);\n\n      var $numberInitial = $(\".bz-query-advanced__filter-input\", $canvas);\n      self.renderLiteControl(filterType, $numberInitial, controlInitial);\n    }\n  },\n\n  /**\r\n      * Render control\r\n      * @param {*} filterType\r\n      * @param {*} $canvas\r\n      * @param {*} control\r\n      */\n  renderLiteControl: function renderLiteControl(filterType, $canvas, control) {\n    var self = this;\n\n    // Templates: input or between\n    $.when(control.render(this.getTemplateByType(filterType))).\n    done(function (html) {\n      $canvas.empty().append(html);\n\n      var action = self.getCurrentAction();\n      var $inputFiler = $(\".bz-query-advanced__input\", $canvas);\n\n      $inputFiler.attr(\"data-action\", action);\n\n      if (self.isCurrentNullFilter()) {\n        $inputFiler.attr(\"readonly\", true);\n      }\n\n      control.postRenderElement($canvas, true); // true for skip design hack\n\n      if (!self.isCurrentTagFilter()) {\n        self.configureInternalHandlers(control);\n      }\n    });\n  },\n\n  getTemplateByType: function getTemplateByType(filterType) {\n    if ([\"between\", \"tags\"].includes(filterType)) return \"query.advanced-text\";\n    return \"query.advanced-input\";\n  },\n\n  configureInternalHandlers: function configureInternalHandlers(control) {\n    var self = this;\n    var $internalControl = control.getInputControl();\n\n    // Handler for update data value\n    $internalControl.bind(\"updateData\", function (evt, params) {\n      // Update data value\n      self.setValue(self.getValue());\n    });\n  },\n\n  getRequiredProperties: function getRequiredProperties() {\n    var properties = this.properties;\n\n    return {\n      allowDecimals: properties.allowDecimals,\n      numDecimals: properties.numDecimals,\n      symbol: properties.symbol,\n      positiveFormat: properties.positiveFormat,\n      negativeFormat: properties.negativeFormat,\n      decimalSymbol: properties.decimalSymbol,\n      digitGroupSymbol: properties.digitGroupSymbol,\n      groupDigits: properties.groupDigits,\n      colorize: properties.colorize,\n      minValue: properties.minValue,\n      maxValue: properties.maxValue,\n      dataType: properties.dataType };\n\n  },\n\n  // endregion // #endregion\n\n  // region // #region METHODS TO TAGS FILTER\n\n  addTag: function addTag(tagItem) {\n    var controlTag = this.controlInitial;\n    if (controlTag) {\n      var numericInput = controlTag.numericInput;\n      controlTag.formatNumericInput(numericInput[0]);\n\n      //if(bizagi.util.isEmpty(controlTag.getValue()))return;\n\n      tagItem.value = controlTag.getValue() || \"\";\n      tagItem.displayValue = numericInput.val() || \"\";\n    }\n\n    this._super(tagItem);\n  },\n\n  /**\r\n      * Add format to tag\r\n      * @param value\r\n      * @returns {*}\r\n      */\n  formatTagItem: function formatTagItem(value) {\n    var properties = this.properties;\n    var decimalFormat = {\n      symbol: properties.symbol,\n      positiveFormat: properties.positiveFormat,\n      negativeFormat: properties.negativeFormat,\n      decimalSymbol: properties.decimalSymbol,\n      digitGroupSymbol: properties.digitGroupSymbol,\n      groupDigits: properties.groupDigits,\n      roundToDecimalPlace: properties.numDecimals,\n      colorize: properties.colorize };\n\n\n    return bizagi.util.formatDecimal(value, decimalFormat);\n  },\n\n  // endregion // #endregion\n\n  // region // #region A&V METHODS\n\n  /**\r\n   * Changes the render minimum value\r\n   * @param value\r\n   */\n  changeMinValue: function changeMinValue(value) {\n    if (!!this.controlInitial) {\n      var newValue = this.controlInitial.performMinValue(value);\n\n      this.properties.minValue = this.properties.dataTypeMinValue = newValue;\n      this.controlInitial.changeMinValue(value);\n\n      // Condition for between filter\n      if (!!this.controlEnd && !!this.controlInitial) {\n        this.controlEnd.changeMinValue(value);\n      }\n    }\n  },\n\n  /**\r\n      * Changes the render maximum value\r\n      * @param value\r\n      */\n  changeMaxValue: function changeMaxValue(value) {\n    if (!!this.controlInitial) {\n      var newValue = this.controlInitial.performMaxValue(value);\n\n      this.properties.maxValue = this.properties.dataTypeMaxValue = newValue;\n\n      // Condition for between filter\n      if (!!this.controlEnd && !!this.controlInitial) {\n        this.controlEnd.changeMaxValue(value);\n      } else {\n        this.controlInitial.changeMaxValue(value);\n      }\n    }\n  },\n\n  /**\r\n      * Customizes render color\r\n      * @param {} color\r\n      * @returns {}\r\n      */\n  changeColor: function changeColor(color) {\n    var $control = this.getControl();\n\n    // To review: Save the command to propagate action when filter is changed\n    if (!!this.controlInitial) this.controlInitial.changeColor(color, true);\n    if (!!this.controlEnd) this.controlEnd.changeColor(color, true);\n\n    return this._super(color).\n    changeFontColor($(\"label\", $control), color);\n  },\n\n  /**\r\n      * Context to apply styles\r\n      * @param context\r\n      * @returns {jQuery|HTMLElement}\r\n      */\n  getElementsToStylize: function getElementsToStylize(context) {\n    return this._super(context);\n  }\n\n  // endregion // #endregion\n});\n\n\n// Extends from render desktop base\nbizagi.rendering.desktop.money.extend(\"bizagi.rendering.desktop.moneyAdvanced\", {}, {\n\n  getControl: function getControl() {\n    var self = this;\n    if (!self.control || self.control instanceof jQuery && self.control.length === 0) {\n      self.control = $(self.element || self.observableElement);\n    }\n    if (!self.control || self.control.length === 0) {\n      return null;\n    }\n    return self.control;\n  },\n\n  subscribe: function subscribe(control) {\n    this.observer = this.observer || [];\n    this.observer.push(control);\n  },\n\n  notify: function notify(value) {\n    if (this.properties.isRange) {\n      for (var i = this.observer.length - 1; i >= 0; i--) {\n        if (this.properties.isMaximumValue) {\n          value = bizagi.util.isNumeric(value) ? value : this.properties.maxValue || this.calculateMaxValue(this.properties.dataType);\n          this.observer[i].changeMaxValue(value);\n        } else if (this.properties.isMinimumValue) {\n          value = bizagi.util.isNumeric(value) ? value : this.properties.minValue || this.calculateMinValue(this.properties.dataType);\n          this.observer[i].changeMinValue(value);\n        }\n      }\n    }\n  },\n\n  setValue: function setValue(value) {\n    this._super(value);\n    this.notify(value);\n\n    // Update parent control\n    var $inputControl = this.getInputControl();\n    $inputControl && $inputControl.trigger('updateData', { data: value });\n  },\n\n  getInputControl: function getInputControl() {\n    return $(\"input\", this.getControl()) || null;\n  } });","/**\r\n *   Name: Bizagi Desktop FormTemplate Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the form template class to adjust to desktop devices\r\n */\n\n// Extends from desktop form base\nbizagi.rendering.desktop.form.extend(\"bizagi.rendering.desktop.formTemplate\", bizagi.rendering.formTemplate.prototype);\n// Extends itself\nbizagi.rendering.desktop.formTemplate.extend(\"bizagi.rendering.desktop.formTemplate\", {}, {});","/*\r\n *   Name: Bizagi Desktop Render Factory\r\n *   Author: Diego Parra\r\n *   Comments:\r\n *   -   This script will define a render factory to create desktop versions of each render type\r\n */\n\nbizagi.rendering.base.factory.extend(\"bizagi.rendering.desktop.factory\", {}, {\n  /**\r\n                                                                                * Constructor\r\n                                                                                */\n  init: function init(dataService) {\n    // Call base\n    this._super(dataService);\n\n    // Desktop implementation\n    this.printVersion = false;\n  },\n\n  /**\r\n      * Load all the templates used for rendering\r\n      */\n  loadTemplates: function loadTemplates() {\n    var self = this;\n    var defer = new $.Deferred();\n\n    $.when(\n    // Icons\n    self.loadTemplate(\"icons\", bizagi.getTemplate(\"common.bizagi.rendering.icons\")),\n\n    // Common\n    self.loadTemplate(\"form-error\", bizagi.getTemplate(\"bizagi.rendering.desktop.form-error\")),\n    self.loadTemplate(\"form-waiting\", bizagi.getTemplate(\"bizagi.rendering.desktop.form-waiting\")),\n    self.loadTemplate(\"info-message\", bizagi.getTemplate(\"common.bizagi.desktop.info-message\")),\n    // Containers\n    self.loadTemplate(\"form\", bizagi.getTemplate(\"bizagi.rendering.desktop.form\") + \"#ui-bizagi-render-form\"),\n    self.loadTemplate(\"form-process-path\", bizagi.getTemplate(\"bizagi.rendering.desktop.form\") + \"#ui-bizagi-render-form-process-path\"),\n    self.loadTemplate(\"panel\", bizagi.getTemplate(\"bizagi.rendering.desktop.panel\")),\n    self.loadTemplate(\"contentPanel\", bizagi.getTemplate(\"bizagi.rendering.desktop.contentPanel\")),\n    self.loadTemplate(\"tab\", bizagi.getTemplate(\"bizagi.rendering.desktop.tab\")),\n    self.loadTemplate(\"tabItem\", bizagi.getTemplate(\"bizagi.rendering.desktop.tabItem\")),\n    self.loadTemplate(\"collectionnavigator\", bizagi.getTemplate(\"bizagi.rendering.desktop.collectionnavigator\") + \"#ui-bizagi-render-collectionnavigator\"),\n    self.loadTemplate(\"collectionnavigator-form-button\", bizagi.getTemplate(\"bizagi.rendering.desktop.collectionnavigator\") + \"#ui-bizagi-render-collectionnavigator-form-button\"),\n    self.loadTemplate(\"collectionnavigator-control\", bizagi.getTemplate(\"bizagi.rendering.desktop.collectionnavigator\") + \"#ui-bizagi-render-collectionnavigator-control\"),\n    self.loadTemplate(\"collectionnavigator-actions\", bizagi.getTemplate(\"bizagi.rendering.desktop.collectionnavigator\") + \"#ui-bizagi-render-collectionnavigator-actions\"),\n    self.loadTemplate(\"collectionnavigator-preview\", bizagi.getTemplate(\"bizagi.rendering.desktop.collectionnavigator\") + \"#ui-bizagi-render-collectionnavigator-preview\"),\n    self.loadTemplate(\"collectionnavigator-execution\", bizagi.getTemplate(\"bizagi.rendering.desktop.collectionnavigator\") + \"#ui-bizagi-render-collectionnavigator-execution\"),\n    self.loadTemplate(\"horizontal\", bizagi.getTemplate(\"bizagi.rendering.desktop.horizontal\")),\n    self.loadTemplate(\"accordion\", bizagi.getTemplate(\"bizagi.rendering.desktop.accordion\")),\n    self.loadTemplate(\"accordionItem\", bizagi.getTemplate(\"bizagi.rendering.desktop.accordionItem\")),\n    self.loadTemplate(\"group\", bizagi.getTemplate(\"bizagi.rendering.desktop.group\")),\n    self.loadTemplate(\"section-header\", bizagi.getTemplate(\"bizagi.rendering.desktop.section\") + \"#ui-bizagi-container-section\"),\n    self.loadTemplate(\"section-content\", bizagi.getTemplate(\"bizagi.rendering.desktop.section\") + \"#ui-bizagi-container-section-content\"),\n    self.loadTemplate(\"searchForm\", bizagi.getTemplate(\"bizagi.rendering.desktop.searchForm\")),\n    // Renders\n    self.loadTemplate(\"render\", bizagi.getTemplate(\"bizagi.rendering.desktop.render\")),\n    self.loadTemplate(\"render-base\", bizagi.getTemplate(\"bizagi.rendering.desktop.render.base\")),\n\n    self.loadTemplate(\"render-layout\", bizagi.getTemplate(\"bizagi.rendering.desktop.render.layout\")),\n\n    self.loadTemplate(\"render-userPassword\", bizagi.getTemplate(\"bizagi.rendering.desktop.userPassword\") + \"#bz-rendering-userPassword\"),\n    self.loadTemplate(\"render-getUser\", bizagi.getTemplate(\"bizagi.rendering.desktop.getUser\") + \"#bz-rendering-getUser\"),\n    self.loadTemplate(\"render-user-email\", bizagi.getTemplate(\"bizagi.rendering.desktop.userEmail\") + \"#bz-rendering-user-email\"),\n    self.loadTemplate(\"render-comboSelected\", bizagi.getTemplate(\"bizagi.rendering.desktop.comboSelected\") + \"#bz-rendering-comboSelected\"),\n    self.loadTemplate(\"render-comboSelectedReadOnly\", bizagi.getTemplate(\"bizagi.rendering.desktop.comboSelected\") + \"#bz-rendering-comboSelected-ReadOnly\"),\n    self.loadTemplate(\"render-querySearchUser\", bizagi.getTemplate(\"bizagi.rendering.desktop.querySearchUser\") + \"#ui-bizagi-render-querySearchUser\"),\n    self.loadTemplate(\"text\", bizagi.getTemplate(\"bizagi.rendering.desktop.text\") + \"#ui-bizagi-render-text\"),\n    self.loadTemplate(\"text-read-only\", bizagi.getTemplate(\"bizagi.rendering.desktop.text\") + \"#ui-bizagi-render-text-read-only\"),\n    self.loadTemplate(\"extendedText\", bizagi.getTemplate(\"bizagi.rendering.desktop.extendedText\")),\n    self.loadTemplate(\"number\", bizagi.getTemplate(\"bizagi.rendering.desktop.number\")),\n    self.loadTemplate(\"numberScientificNotation\", bizagi.getTemplate(\"bizagi.rendering.desktop.numberScientificNotation\") + \"#bz-rendering-numberScientificNotation\"),\n    self.loadTemplate(\"date\", bizagi.getTemplate(\"bizagi.rendering.desktop.date\")),\n    self.loadTemplate(\"yesno\", bizagi.getTemplate(\"bizagi.rendering.desktop.yesno\")),\n    self.loadTemplate(\"check\", bizagi.getTemplate(\"bizagi.rendering.desktop.check\")),\n    self.loadTemplate(\"combo\", bizagi.getTemplate(\"bizagi.rendering.desktop.combo\")),\n    self.loadTemplate(\"list\", bizagi.getTemplate(\"bizagi.rendering.desktop.list\")),\n    self.loadTemplate(\"geolocation\", bizagi.getTemplate(\"bizagi.rendering.desktop.geolocation\")),\n    self.loadTemplate(\"radio\", bizagi.getTemplate(\"bizagi.rendering.desktop.radio\")),\n    self.loadTemplate(\"image\", bizagi.getTemplate(\"bizagi.rendering.desktop.image\") + \"#ui-bizagi-render-image\"),\n    self.loadTemplate(\"images\", bizagi.getTemplate(\"bizagi.rendering.desktop.image\") + \"#ui-bizagi-render-images\"),\n    self.loadTemplate(\"image-dialog\", bizagi.getTemplate(\"bizagi.rendering.desktop.image\") + \"#ui-bizagi-render-image-dialog\"),\n    self.loadTemplate(\"image-item\", bizagi.getTemplate(\"bizagi.rendering.desktop.image\") + \"#ui-bizagi-render-image-item\"),\n    self.loadTemplate(\"upload-ecm-view-default\", bizagi.getTemplate(\"bizagi.rendering.desktop.ecm\") + \"#biz-render-ecm-view-default\"),\n    self.loadTemplate(\"upload-ecm-view-default-metadata\", bizagi.getTemplate(\"bizagi.rendering.desktop.ecm\") + \"#biz-render-ecm-view-default-metadata\"),\n    self.loadTemplate(\"upload-ecm-view-default-yesno\", bizagi.getTemplate(\"bizagi.rendering.desktop.ecm\") + \"#biz-render-ecm-view-default-yesno\"),\n    self.loadTemplate(\"upload-ecm-view-default-edit-buttons\", bizagi.getTemplate(\"bizagi.rendering.desktop.ecm\") + \"#biz-render-ecm-view-default-edit-buttons\"),\n    self.loadTemplate(\"document\", bizagi.getTemplate(\"bizagi.rendering.desktop.document\") + \"#bz-document-generator\"),\n    self.loadTemplate(\"document-item\", bizagi.getTemplate(\"bizagi.rendering.desktop.document\") + \"#bz-document-generator-item\"),\n    self.loadTemplate(\"document-column-item\", bizagi.getTemplate(\"bizagi.rendering.desktop.document\") + \"#bz-document-generator-column-item\"),\n    self.loadTemplate(\"document-item-preview\", bizagi.getTemplate(\"bizagi.rendering.desktop.document\") + \"#bz-document-generator-item-preview\"),\n    self.loadTemplate(\"document-item-preview-object\", bizagi.getTemplate(\"bizagi.rendering.desktop.document\") + \"#bz-document-generator-item-preview-object\"),\n    self.loadTemplate(\"uploadItem\", bizagi.getTemplate(\"bizagi.rendering.desktop.uploadItem\")),\n    self.loadTemplate(\"upload\", bizagi.getTemplate(\"bizagi.rendering.desktop.upload\")),\n    self.loadTemplate(\"upload.dialog\", bizagi.getTemplate(\"bizagi.rendering.desktop.upload.dialog\")),\n    self.loadTemplate(\"upload.template.dialog\", bizagi.getTemplate(\"bizagi.rendering.desktop.upload.template.dialog\")),\n    self.loadTemplate(\"upload.ecm.dialog\", bizagi.getTemplate(\"bizagi.rendering.desktop.upload.ecm.dialog\")),\n    self.loadTemplate(\"dialog-send-email\", bizagi.getTemplate(\"bizagi.rendering.desktop.dialog-sendEmail\") + \"#dialog-send-email\"),\n    self.loadTemplate(\"dialog-send-email-rtl\", bizagi.getTemplate(\"bizagi.rendering.desktop.dialog-sendEmail\") + \"#dialog-send-email-rtl\"),\n    self.loadTemplate(\"grid\", bizagi.getTemplate(\"bizagi.rendering.desktop.grid\")),\n    self.loadTemplate(\"cell\", bizagi.getTemplate(\"bizagi.rendering.desktop.cell\")),\n    self.loadTemplate(\"cell.readonly\", bizagi.getTemplate(\"bizagi.rendering.desktop.cell.readonly\")),\n    self.loadTemplate(\"cell.summary\", bizagi.getTemplate(\"bizagi.rendering.desktop.cell.summary\")),\n    self.loadTemplate(\"cell.upload\", bizagi.getTemplate(\"bizagi.rendering.desktop.cell.upload\")),\n    self.loadTemplate(\"cell.button\", bizagi.getTemplate(\"bizagi.rendering.desktop.cell.button\")),\n    self.loadTemplate(\"search\", bizagi.getTemplate(\"bizagi.rendering.desktop.search\")),\n    self.loadTemplate(\"searchItem\", bizagi.getTemplate(\"bizagi.rendering.desktop.searchItem\")),\n    self.loadTemplate(\"searchList\", bizagi.getTemplate(\"bizagi.rendering.desktop.searchList\") + \"#bz-searchList\"),\n    self.loadTemplate(\"searchListTag\", bizagi.getTemplate(\"bizagi.rendering.desktop.searchList\") + \"#bz-searchList-tag\"),\n    self.loadTemplate(\"letter\", bizagi.getTemplate(\"bizagi.rendering.desktop.letter\")),\n    self.loadTemplate(\"letter.readonly\", bizagi.getTemplate(\"bizagi.rendering.desktop.letter.readonly\")),\n    self.loadTemplate(\"letter.dialog\", bizagi.getTemplate(\"bizagi.rendering.desktop.dialog-letter\")),\n    self.loadTemplate(\"button\", bizagi.getTemplate(\"bizagi.rendering.desktop.button\")),\n    self.loadTemplate(\"fileprint\", bizagi.getTemplate(\"bizagi.rendering.desktop.fileprint\") + \"#ui-bizagi-render-fileprint\"),\n    self.loadTemplate(\"fileprint-object\", bizagi.getTemplate(\"bizagi.rendering.desktop.fileprint\") + \"#ui-bizagi-render-fileprint-object\"),\n    self.loadTemplate(\"fileprint-iframe\", bizagi.getTemplate(\"bizagi.rendering.desktop.fileprint\") + \"#ui-bizagi-render-fileprint-iframe\"),\n    self.loadTemplate(\"link\", bizagi.getTemplate(\"bizagi.rendering.desktop.link\")),\n    self.loadTemplate(\"formLink\", bizagi.getTemplate(\"bizagi.rendering.desktop.formLink\")),\n    self.loadTemplate(\"association\", bizagi.getTemplate(\"bizagi.rendering.desktop.association\")),\n    self.loadTemplate(\"stakeholder\", bizagi.getTemplate(\"bizagi.rendering.desktop.stakeholder\") + \"#bz-rendering-stakeholder\"),\n    self.loadTemplate(\"stakeholder-grid\", bizagi.getTemplate(\"bizagi.rendering.desktop.stakeholder\") + \"#bz-rendering-stakeholder-grid\"),\n    self.loadTemplate(\"stakeholder-paginator\", bizagi.getTemplate(\"bizagi.rendering.desktop.stakeholder\") + \"#bz-rendering-stakeholder-paginator\"),\n    self.loadTemplate(\"queryProcess\", bizagi.getTemplate(\"bizagi.rendering.desktop.queryProcess\") + \"#ui-bizagi-render-query-process\"),\n    self.loadTemplate(\"checkList\", bizagi.getTemplate(\"bizagi.rendering.desktop.checkList\") + \"#bz-rendering-checkList\"),\n    self.loadTemplate(\"checkList-disabled\", bizagi.getTemplate(\"bizagi.rendering.desktop.checkList\") + \"#bz-rendering-checkList-disabled\"),\n    self.loadTemplate(\"readonly\", bizagi.getTemplate(\"bizagi.rendering.desktop.readonly\") + \"#readonly\"),\n    self.loadTemplate(\"readonly-gn\", bizagi.getTemplate(\"bizagi.rendering.desktop.readonly\") + \"#readonly-gn\"),\n\n    self.loadTemplate(\"readonly-value\", bizagi.getTemplate(\"bizagi.rendering.desktop.readonly\") + \"#readonly-value\"),\n\n    // Hand Signature\n    self.loadTemplate(\"hand-signature\", bizagi.getTemplate(\"bizagi.rendering.desktop.handSignature\") + \"#bz-signature\"),\n    self.loadTemplate(\"hand-signature-readonly\", bizagi.getTemplate(\"bizagi.rendering.desktop.handSignature\") + \"#bz-signature-readonly\"),\n\n    //render layout controls\n    self.loadTemplate(\"layout-link\", bizagi.getTemplate(\"bizagi.rendering.desktop.layout.link\")),\n    self.loadTemplate(\"layout-image\", bizagi.getTemplate(\"bizagi.rendering.desktop.layout.image\") + \"#ui-bizagi-render-layout-image\"),\n    self.loadTemplate(\"layout-image64\", bizagi.getTemplate(\"bizagi.rendering.desktop.layout.image\") + \"#ui-bizagi-render-layout-image64\"),\n    self.loadTemplate(\"layout-label\", bizagi.getTemplate(\"bizagi.rendering.desktop.layout.label\")),\n    self.loadTemplate(\"layout-text\", bizagi.getTemplate(\"bizagi.rendering.desktop.layout.text\")),\n    self.loadTemplate(\"layout-upload\", bizagi.getTemplate(\"bizagi.rendering.desktop.layout.upload\")),\n    self.loadTemplate(\"layout-uploadItem\", bizagi.getTemplate(\"bizagi.rendering.desktop.layout.uploadItem\")),\n    self.loadTemplate(\"layout-date-time\", bizagi.getTemplate(\"bizagi.rendering.desktop.layout.dateTime\")),\n    self.loadTemplate(\"layout-number\", bizagi.getTemplate(\"bizagi.rendering.desktop.layout.number\")),\n    self.loadTemplate(\"layout-money\", bizagi.getTemplate(\"bizagi.rendering.desktop.layout.money\")),\n    self.loadTemplate(\"layout-placeholder\", bizagi.getTemplate(\"bizagi.rendering.desktop.layout.placeholder\")),\n    self.loadTemplate(\"layout-boolean\", bizagi.getTemplate(\"bizagi.rendering.desktop.layout.yesno\")),\n\n    //action launcher\n    self.loadTemplate(\"render-actionLauncher\", bizagi.getTemplate(\"bizagi.rendering.desktop.actionLauncher\") + \"#bz-rendering-actionLauncher\"),\n    self.loadTemplate(\"render-actionLauncher-horizontal\", bizagi.getTemplate(\"bizagi.rendering.desktop.actionLauncher\") + \"#bz-rendering-actionLauncher-horizontal\"),\n    self.loadTemplate(\"render-actionLauncher-horizontal-more\", bizagi.getTemplate(\"bizagi.rendering.desktop.actionLauncher\") + \"#bz-rendering-actionLauncher-horizontal-more\"),\n    self.loadTemplate(\"render-actionLauncher-vertical\", bizagi.getTemplate(\"bizagi.rendering.desktop.actionLauncher\") + \"#bz-rendering-actionLauncher-vertical\"),\n    self.loadTemplate(\"render-actionLauncher-actions-to-execute\", bizagi.getTemplate(\"bizagi.rendering.desktop.actionLauncher\") + \"#bz-rendering-actionLauncher-actions-to-execute\"),\n    self.loadTemplate(\"render-actionLauncher-design\", bizagi.getTemplate(\"bizagi.rendering.desktop.actionLauncher\") + \"#bz-rendering-actionLauncher-design\"),\n    self.loadTemplate(\"render-actionLauncher-confirm\", bizagi.getTemplate(\"bizagi.rendering.desktop.actionLauncher\") + \"#bz-rendering-actionLauncher-confirm\"),\n\n    self.loadTemplate(\"render-polymorphicLauncher\", bizagi.getTemplate(\"bizagi.rendering.desktop.polymorphicLauncher\") + \"#bz-rendering-polymorphicLauncher\"),\n    self.loadTemplate(\"render-polymorphicLauncher-vertical-tree\", bizagi.getTemplate(\"bizagi.rendering.desktop.polymorphicLauncher\") + \"#bz-rendering-polymorphicLauncher-vertical-tree\"),\n    self.loadTemplate(\"render-polymorphicLauncher-vertical-tree-item\", bizagi.getTemplate(\"bizagi.rendering.desktop.polymorphicLauncher\") + \"#bz-rendering-polymorphicLauncher-vertical-tree-item\"),\n    self.loadTemplate(\"render-polymorphicLauncher-actions-to-execute\", bizagi.getTemplate(\"bizagi.rendering.desktop.polymorphicLauncher\") + \"#bz-rendering-polymorphicLauncher-actions-to-execute\"),\n    self.loadTemplate(\"render-polymorphicLauncher-design\", bizagi.getTemplate(\"bizagi.rendering.desktop.polymorphicLauncher\") + \"#bz-rendering-polymorphicLauncher-design\"),\n    self.loadTemplate(\"render-polymorphicLauncher-confirm\", bizagi.getTemplate(\"bizagi.rendering.desktop.polymorphicLauncher\") + \"#bz-rendering-polymorphicLauncher-confirm\"),\n\n    bizagi.override.enablePrintFromEditForm ? self.loadTemplate(\"print-frame\", bizagi.getTemplate(\"bizagi.workportal.desktop.widget.print\") + \"#bz-wp-widget-print-frame\") : null, bizagi.override.enablePrintFromEditForm ? self.loadTemplate(\"print-frame-header\", bizagi.getTemplate(\"bizagi.workportal.desktop.widget.print\") + \"#bz-wp-widget-print-frame-header\") : null,\n\n    //Bizagi grid\n    self.loadTemplate(\"grid.bizagi\", bizagi.getTemplate(\"bizagi.rendering.desktop.grid.component\")),\n    self.loadTemplate(\"bizagi.grid.grid\", bizagi.getTemplate(\"bizagi.rendering.desktop.grid.bizagi\") + \"#ui-bizagi-grid\"),\n    self.loadTemplate(\"bizagi.grid.grid.rtl\", bizagi.getTemplate(\"bizagi.rendering.desktop.grid.bizagi\") + \"#ui-bizagi-grid-rtl\"),\n    self.loadTemplate(\"bizagi.grid.waiting\", bizagi.getTemplate(\"bizagi.rendering.desktop.grid.bizagi\") + \"#ui-bizagi-grid-waiting\"),\n    self.loadTemplate(\"bizagi.grid.table\", bizagi.getTemplate(\"bizagi.rendering.desktop.grid.bizagi\") + \"#ui-bizagi-grid-table\"),\n    self.loadTemplate(\"bizagi.grid.table.empty\", bizagi.getTemplate(\"bizagi.rendering.desktop.grid.bizagi\") + \"#ui-bizagi-grid-table-empty\"),\n    self.loadTemplate(\"bizagi.grid.column\", bizagi.getTemplate(\"bizagi.rendering.desktop.grid.bizagi\") + \"#ui-bizagi-grid-column\"),\n    self.loadTemplate(\"bizagi.grid.column.special\", bizagi.getTemplate(\"bizagi.rendering.desktop.grid.bizagi\") + \"#ui-bizagi-grid-column-special\"),\n    self.loadTemplate(\"bizagi.grid.row\", bizagi.getTemplate(\"bizagi.rendering.desktop.grid.bizagi\") + \"#ui-bizagi-grid-row\"),\n    self.loadTemplate(\"bizagi.grid.row.buttons\", bizagi.getTemplate(\"bizagi.rendering.desktop.grid.bizagi\") + \"#ui-bizagi-grid-row-buttons\"),\n    self.loadTemplate(\"bizagi.grid.row.buttons.rtl\", bizagi.getTemplate(\"bizagi.rendering.desktop.grid.bizagi\") + \"#ui-bizagi-grid-row-buttons-rtl\"),\n    self.loadTemplate(\"bizagi.grid.cell\", bizagi.getTemplate(\"bizagi.rendering.desktop.grid.bizagi\") + \"#ui-bizagi-grid-cell\"),\n    self.loadTemplate(\"bizagi.grid.cell.special\", bizagi.getTemplate(\"bizagi.rendering.desktop.grid.bizagi\") + \"#ui-bizagi-grid-cell-special\"),\n    //Grig Pager based on inboxgrid pager\n    self.loadTemplate(\"bizagi.grid.pagination\", bizagi.getTemplate(\"bizagi.rendering.desktop.grid.bizagi\") + \"#ui-bizagi-grid-pagination\"),\n    self.loadTemplate(\"bizagi.grid.pager\", bizagi.getTemplate(\"bizagi.rendering.desktop.grid.bizagi\") + \"#ui-bizagi-grid-pager\"),\n    self.loadTemplate(\"bizagi.grid.buttons\", bizagi.getTemplate(\"bizagi.rendering.desktop.grid.bizagi\") + \"#ui-bizagi-grid-buttons\"),\n    self.loadTemplate(\"bizagi.grid.buttons.rtl\", bizagi.getTemplate(\"bizagi.rendering.desktop.grid.bizagi\") + \"#ui-bizagi-grid-buttons-rtl\"),\n    self.loadTemplate(\"bizagi.grid.dynamicpager\", bizagi.getTemplate(\"bizagi.rendering.desktop.grid.bizagi\") + \"#ui-bizagi-grid-dynamic-pager\"),\n    self.loadTemplate(\"bizagi.grid.summary\", bizagi.getTemplate(\"bizagi.rendering.desktop.grid.bizagi\") + \"#ui-bizagi-grid-summary\"),\n    self.loadTemplate(\"bizagi.grid.summaryCell\", bizagi.getTemplate(\"bizagi.rendering.desktop.grid.bizagi\") + \"#ui-bizagi-grid-summary-cell\"),\n    // Grouped grid\n    self.loadTemplate(\"bizagi.grid.grouped.table\", bizagi.getTemplate(\"bizagi.rendering.desktop.grid.bizagi\") + \"#ui-bizagi-grid-grouped-table\"),\n    self.loadTemplate(\"bizagi.grid.grouped.column\", bizagi.getTemplate(\"bizagi.rendering.desktop.grid.bizagi\") + \"#ui-bizagi-grid-grouped-column\"),\n    self.loadTemplate(\"bizagi.grid.grouped.row\", bizagi.getTemplate(\"bizagi.rendering.desktop.grid.bizagi\") + \"#ui-bizagi-grid-grouped-row\"),\n    self.loadTemplate(\"bizagi.grid.grouped.header.row\", bizagi.getTemplate(\"bizagi.rendering.desktop.grid.bizagi\") + \"#ui-bizagi-grid-grouped-header-row\"),\n    self.loadTemplate(\"bizagi.grid.grouped.summary\", bizagi.getTemplate(\"bizagi.rendering.desktop.grid.bizagi\") + \"#ui-bizagi-grid-grouped-summary\"),\n    self.loadTemplate(\"bizagi.grid.grouped.summaryCell\", bizagi.getTemplate(\"bizagi.rendering.desktop.grid.bizagi\") + \"#ui-bizagi-grid-grouped-summary-cell\"),\n    self.loadTemplate(\"bizagi.grid.grouped.emptyCell\", bizagi.getTemplate(\"bizagi.rendering.desktop.grid.bizagi\") + \"#ui-bizagi-grid-grouped-empty-cell\"),\n    //plugin search user\n    self.loadTemplate(\"bizagi.plugin.search.user\", bizagi.getTemplate(\"bizagi.plugin.searchuser\") + \"#ui-bizagi-plugin-search-user\"),\n    self.loadTemplate(\"gridActions\", bizagi.getTemplate(\"bizagi.rendering.desktop.gridActions\") + \"#ui-bizagi-grid-actions-more\"),\n    self.loadTemplate(\"gridActions-delete\", bizagi.getTemplate(\"bizagi.rendering.desktop.gridActions\") + \"#ui-bizagi-grid-actions-delete\"),\n\n    // List multi-select\n    self.loadTemplate(\"list-multiselect\", bizagi.getTemplate(\"bizagi.rendering.desktop.multiSelect\") + \"#bz-list-multiselect\"),\n    self.loadTemplate(\"list-multiselect-item\", bizagi.getTemplate(\"bizagi.rendering.desktop.multiSelect\") + \"#bz-list-multiselect-item\"),\n    self.loadTemplate(\"list-multiselect-tag\", bizagi.getTemplate(\"bizagi.rendering.desktop.multiSelect\") + \"#bz-list-multiselect-tag\"),\n    self.loadTemplate(\"list-multiselect-tags\", bizagi.getTemplate(\"bizagi.rendering.desktop.multiSelect\") + \"#bz-list-multiselect-tags\"),\n    self.loadTemplate(\"list-multiselect-view-more\", bizagi.getTemplate(\"bizagi.rendering.desktop.multiSelect\") + \"#bz-list-multiselect-view-more\"),\n\n    //Range control\n    self.loadTemplate(\"render-range\", bizagi.getTemplate(\"bizagi.rendering.desktop.range\") + \"#bz-rendering-range\"),\n\n    // Query Forms\n    self.loadTemplate(\"query.advanced\", bizagi.getTemplate(\"bizagi.rendering.desktop.queryAdvanced\") + \"#bz-query-advanced\"), //EXTERNAL CONTAINER\n    self.loadTemplate(\"query.advanced.readonly\", bizagi.getTemplate(\"bizagi.rendering.desktop.queryAdvanced\") + \"#bz-query-advanced-readonly\"), //EXTERNAL CONTAINER READONLY\n    self.loadTemplate(\"query.advanced-item\", bizagi.getTemplate(\"bizagi.rendering.desktop.queryAdvanced\") + \"#bz-query-advanced-item\"), //ITEM OF DROPDOWN FILTER\n    self.loadTemplate(\"query.advanced-filter\", bizagi.getTemplate(\"bizagi.rendering.desktop.queryAdvanced\") + \"#bz-query-advanced-filter\"), //FILTER WORD\n\n    self.loadTemplate(\"query.advanced-content\", bizagi.getTemplate(\"bizagi.rendering.desktop.queryAdvanced\") + \"#bz-query-advanced-content\"), //FILTER CONTENT\n    self.loadTemplate(\"query.advanced-input\", bizagi.getTemplate(\"bizagi.rendering.desktop.queryAdvanced\") + \"#bz-query-advanced-filter_input\"), //FILTER INPUT\n    self.loadTemplate(\"query.advanced-text\", bizagi.getTemplate(\"bizagi.rendering.desktop.queryAdvanced\") + \"#bz-query-advanced-filter_text\"), //FILTER TEXT\n    self.loadTemplate(\"query.advanced-date\", bizagi.getTemplate(\"bizagi.rendering.desktop.queryAdvanced\") + \"#bz-query-advanced-filter_date\"), //FILTER DATE\n\n    self.loadTemplate(\"query.advanced-pill\", bizagi.getTemplate(\"bizagi.rendering.desktop.queryAdvanced\") + \"#bz-query-advanced__pills\"), // PILLS\n    self.loadTemplate(\"query.advanced-tooltip\", bizagi.getTemplate(\"bizagi.rendering.desktop.queryAdvanced\") + \"#bz-query-advanced__wildcard-tooltip\"), // WILDCARDS TOOLTIP\n\n    self.loadTemplate(\"bizagi.grid.exportOptions\", bizagi.getTemplate(\"bizagi.rendering.desktop.grid.bizagi\") + \"#ui-bizagi-grid-export-options\")).done(function () {\n      var tmplIcons = $.fasttmpl(self.getTemplate(\"icons\"));\n      var svgStoreCounter = $(\"head\").find('#genome-forms-icons').length;\n\n      if (svgStoreCounter === 0) {\n        $(\"head\").append(tmplIcons);\n      }\n\n      // Resolve when all templates are loaded\n      defer.resolve();\n\n    });\n\n    return defer.promise();\n  },\n\n  /**\r\n      * Load javascripts after render has been rendered\r\n      */\n  loadOverrides: function loadOverrides() {\n    // Load custom javascript overrides\n    if (bizagi.enableCustomizations) {\n      return bizagi.util.loadFile({\n        src: bizagi.getJavaScript(\"bizagi.rendering.desktop.overrides\"),\n        type: \"js\" });\n\n    }\n\n    return;\n  },\n\n  getContainer: function getContainer(params) {\n    var self = this;\n    var type = params.type;\n    var data = params.data;\n    var containerParams = $.extend(params, {\n      renderFactory: this,\n      dataService: params.dataService || this.dataService });\n\n\n    if (type == \"form\") {\n      return new bizagi.rendering.desktop.form(containerParams);\n    }\n\n    if (type == \"template\") {\n      return new bizagi.rendering.desktop.formTemplate(containerParams);\n    }\n\n    if (type == \"queryForm\") {\n      return new bizagi.rendering.desktop.queryForm(containerParams);\n    }\n\n    if (type == \"layout\") {\n      return new bizagi.rendering.desktop.layout(containerParams);\n    }\n\n    if (type == \"usersForm\") {\n      return new bizagi.rendering.desktop.usersForm(containerParams);\n    }\n\n    if (type == \"panel\") {\n      return new bizagi.rendering.desktop.panel(containerParams);\n    }\n\n    if (/^contentpanel$/i.test(type)) {\n      return new bizagi.rendering.desktop.contentPanel(containerParams);\n    }\n\n    if (/^nestedform$/i.test(type)) {\n      return new bizagi.rendering.desktop.nestedForm(containerParams);\n    }\n\n    if (type == \"tab\") {\n      return new bizagi.rendering.desktop.tab(containerParams);\n    }\n\n    if (/^tabitem$/i.test(type)) {\n      return new bizagi.rendering.desktop.tabItem(containerParams);\n    }\n\n    if (type == \"horizontal\") {\n      return new bizagi.rendering.desktop.horizontal(containerParams);\n    }\n\n    if (type == \"accordion\") {\n      return new bizagi.rendering.desktop.accordion(containerParams);\n    }\n\n    if (type == \"accordionItem\") {\n      return new bizagi.rendering.desktop.accordionItem(containerParams);\n    }\n\n    if (type == \"group\") {\n      return new bizagi.rendering.desktop.group(containerParams);\n    }\n\n    if (type == \"section\") {\n      return new bizagi.rendering.desktop.section(containerParams);\n    }\n\n    if (type == \"searchForm\") {\n      containerParams.context = \"search\";\n      containerParams.contexttype = \"metadata\";\n      return new bizagi.rendering.desktop.searchForm(containerParams);\n    }\n\n    if (type == \"mobileform\") {\n      return new bizagi.rendering.mobileform(containerParams);\n    }\n    if (type == \"mobilegroup\") {\n      return new bizagi.rendering.mobilegroup(containerParams);\n    }\n\n    if (type == \"mobiletext\") {\n      return new bizagi.rendering.mobiletext(renderParams);\n    }\n\n    // No type supported\n    bizagi.log(type + \" not supported in render factory\", data, \"error\");\n    return null;\n  },\n\n  /*\r\n      *   Returns the appropriate render based on the render type\r\n      */\n  getRender: function getRender(params) {\n    var self = this;\n    var type = params.type;\n    var data = params.data;\n    var properties = data.properties;\n    var isAdvanced = bizagi.util.parseBoolean(properties.advancedQuery) || false;\n    var renderParams = $.extend(params, {\n      renderFactory: this,\n      dataService: params.dataService || this.dataService });\n\n\n    if (!type)\n    type = \"label\";\n\n    // Data searches using advanced query\n    if (!/^query/i.test(type) && isAdvanced) {\n      return self.getAdvancedQueryRender(renderParams);\n    }\n\n    if (type === \"text\") {\n      var isExtended = bizagi.util.parseBoolean(data.properties.isExtended) || false;\n\n      // Creates one extended render\n      if (isExtended) {\n        return new bizagi.rendering.desktop.extendedText(renderParams);\n      }\n\n      // Creates one normal text render\n      return new bizagi.rendering.desktop.text(renderParams);\n    }\n\n    if (type === \"association\") {\n      return new bizagi.rendering.desktop.association(renderParams);\n    }\n\n    if (type === \"label\") {\n      if (!bizagi.override.hiddenControlsWithDataType) {\n        delete properties.dataType;\n      }\n      return new bizagi.rendering.desktop.label(renderParams);\n    }\n\n    if (type === \"hidden\") {\n      if (!bizagi.override.hiddenControlsWithDataType) {\n        delete properties.dataType;\n      }\n      return new bizagi.rendering.desktop.hidden(renderParams);\n    }\n\n    if (type === \"number\") {\n      // Number Scientific Notation\n      if (properties && properties.dataType === 29) {\n        return new bizagi.rendering.desktop.numberScientificNotation(renderParams);\n      }\n\n      return new bizagi.rendering.desktop.number(renderParams);\n    }\n\n    if (type === \"money\") {\n      return new bizagi.rendering.desktop.money(renderParams);\n    }\n\n    if (type === \"date\") {\n      return new bizagi.rendering.desktop.date(renderParams);\n    }\n\n    if (type === \"boolean\") {\n      var display = data.properties.display || \"option\";\n\n      // Creates one check render\n      if (display === \"check\") {\n        return new bizagi.rendering.desktop.check(renderParams);\n      }\n\n      // Creates one yes-no render\n      return new bizagi.rendering.desktop.yesno(renderParams);\n    }\n\n    if (type === \"combo\") {\n      return new bizagi.rendering.desktop.combo(renderParams);\n    }\n\n    if (/^cascadingcombo$/i.test(type)) {\n      return new bizagi.rendering.desktop.cascadingCombo(renderParams);\n    }\n\n    if (type === \"list\") {\n      return new bizagi.rendering.desktop.list(renderParams);\n    }\n\n    if (type === \"radio\") {\n      return new bizagi.rendering.desktop.radio(renderParams);\n    }\n\n    if (type === \"image\") {\n      return new bizagi.rendering.desktop.image(renderParams);\n    }\n\n    if (type === \"uploadecm\") {\n      // Check if its ECM file            \n      return new bizagi.rendering.desktop.ecm(renderParams);\n    }\n\n    if (type === \"upload\") {\n      return new bizagi.rendering.desktop.upload(renderParams);\n    }\n\n    if (type === \"grid\") {\n      return new bizagi.rendering.desktop.grid.bizagi(renderParams);\n    }\n\n    if (type === \"groupedgrid\") {\n      return new bizagi.rendering.desktop.grid.grouped(renderParams);\n    }\n\n    if (type === \"search\") {\n      return new bizagi.rendering.desktop.search(renderParams);\n    }\n\n    if (type === \"suggest\") {\n      renderParams.data.properties.enableQuerySuggestBehavior = true;\n      return new bizagi.rendering.desktop.search(renderParams);\n    }\n\n    if (type === \"searchList\") {\n      return new bizagi.rendering.desktop.searchList(renderParams);\n    }\n\n    if (type == \"multiSelect\") {\n      return new bizagi.rendering.desktop.multiSelect(renderParams);\n    }\n\n    if (type === \"letter\") {\n      return new bizagi.rendering.desktop.letter(renderParams);\n    }\n\n    if (type === \"button\") {\n      var isRPAButton = bizagi.util.isEmpty(data.properties.rpabot) ? false : true;\n\n      if (isRPAButton) {\n        return new bizagi.rendering.desktop.uiPathButton(renderParams);\n      } else {\n        return new bizagi.rendering.desktop.button(renderParams);\n      }\n    }\n\n    if (type === \"formLink\") {\n      return new bizagi.rendering.desktop.formLink(renderParams);\n    }\n\n    if (type === \"link\") {\n      return new bizagi.rendering.desktop.link(renderParams);\n    }\n\n    if (type === \"actionLauncher\") {\n      return new bizagi.rendering.desktop.actionLauncher(renderParams);\n    }\n\n    if (type === \"entityTemplate\") {\n      return new bizagi.rendering.desktop.entityTemplate(renderParams);\n    }\n\n    if (type === \"polymorphicLauncher\") {\n      return new bizagi.rendering.desktop.polymorphicLauncher(renderParams);\n    }\n\n    if (type === \"userfield\") {\n      return new bizagi.rendering.desktop.userfieldWrapper(renderParams);\n    }\n    // Check layout renders (starts with \"layout\")\n    if (type.indexOf(\"layout\") === 0) {\n      return self.getLayoutRender(params);\n    }\n\n    // Check search renders (starts with \"search\")\n    if (type.indexOf(\"search\") === 0) {\n      return self.getSearchRender(params);\n    }\n\n    // Check query renders (starts with \"query\")\n    if (type.indexOf(\"query\") === 0) {\n      return self.getQueryRender(params);\n    }\n\n    // Check range renders (starts with \"range\")\n    if (type.indexOf(\"range\") === 0) {\n      return self.getRangeRender(params);\n    }\n\n    if (type === \"document\") {\n      return new bizagi.rendering.desktop.document(renderParams);\n    }\n\n    if (type === \"image\") {\n      return new bizagi.rendering.desktop.image(renderParams);\n    }\n\n    if (type === \"fileprint\") {\n      return new bizagi.rendering.desktop.fileprint(renderParams);\n    }\n\n    if (type === \"geolocation\") {\n      return new bizagi.rendering.desktop.geolocation(renderParams);\n    }\n\n    if (type === \"collectionnavigator\") {\n      return new bizagi.rendering.desktop.collectionnavigator(renderParams);\n    }\n\n    if (type === \"activityCheckList\") {\n      return new bizagi.rendering.desktop.activityCheckList(renderParams);\n    }\n\n    if (type === \"getUser\") {\n      return new bizagi.rendering.desktop.getUser(renderParams);\n    }\n\n    if (type == \"userPassword\") {\n      return new bizagi.rendering.desktop.userPassword(renderParams);\n    }\n\n    if (type == \"comboSelected\") {\n      return new bizagi.rendering.desktop.comboSelected(renderParams);\n    }\n\n    if (type == \"stakeholder\") {\n      return new bizagi.rendering.desktop.stakeholder(renderParams);\n    }\n\n    if (/^signature$/i.test(type)) {\n      return new bizagi.rendering.desktop.handSignature(renderParams);\n    }\n\n    if (/^readonly$/i.test(type)) {\n      return new bizagi.rendering.desktop.readonly(renderParams);\n    }\n\n    // No type supported\n    bizagi.log(type + \" not supported in render factory\", data, \"error\");\n    return null;\n  },\n\n  /**\r\n      * Returns the appropiate column based on the render type\r\n      */\n  getColumn: function getColumn(params) {\n    var self = this;\n    var type = params.type;\n    var data = params.data;\n    var properties = data.properties;\n    var columnParams = $.extend(params, {\n      renderFactory: this,\n      dataService: params.dataService || this.dataService,\n      singleInstance: bizagi.util.isEmpty(params.singleInstance) ? true : params.singleInstance });\n\n\n    if (type === \"columnText\") {\n      var isExtended = bizagi.util.parseBoolean(data.properties.isExtended) || false;\n\n      if (isExtended) {\n        // Creates one extended render\n        columnParams.decorated = bizagi.rendering.desktop.extendedText;\n      } else {\n        // Creates one normal text render\n        columnParams.decorated = bizagi.rendering.desktop.text;\n      }\n      return new bizagi.rendering.desktop.columns.text(columnParams);\n    }\n\n    if (type === \"columnSearchList\") {\n      columnParams.decorated = bizagi.rendering.desktop.searchList;\n      return new bizagi.rendering.desktop.columns.searchList(columnParams);\n    }\n\n    if (type === \"columnNumberScientificNotation\") {\n      columnParams.decorated = bizagi.rendering.desktop.numberScientificNotation;\n      return new bizagi.rendering.desktop.columns.numberScientificNotation(columnParams);\n    }\n\n    if (type === \"columnNumber\") {\n      if (properties && properties.dataType === 29) {\n        columnParams.decorated = bizagi.rendering.desktop.numberScientificNotation;\n        return new bizagi.rendering.desktop.columns.numberScientificNotation(columnParams);\n      } else {\n        columnParams.decorated = bizagi.rendering.desktop.number;\n        return new bizagi.rendering.desktop.columns.number(columnParams);\n      }\n    }\n\n    if (type === \"columnMoney\") {\n      columnParams.decorated = bizagi.rendering.desktop.money;\n      return new bizagi.rendering.desktop.columns.number(columnParams);\n    }\n\n    if (type === \"columnDate\") {\n      columnParams.decorated = bizagi.rendering.desktop.date;\n      return new bizagi.rendering.desktop.columns.date(columnParams);\n    }\n\n    if (type === \"columnBoolean\") {\n      var display = data.properties.display || \"option\";\n\n      if (display === \"check\") {\n        // Creates one check render\n        columnParams.decorated = bizagi.rendering.desktop.check;\n        if (params.data.properties.isExclusive) {\n          return new bizagi.rendering.desktop.columns.exclusiveCheck(columnParams);\n        }\n      } else {\n        // Creates one yes-no render\n        columnParams.decorated = bizagi.rendering.desktop.yesno;\n      }\n\n      return new bizagi.rendering.desktop.columns.column(columnParams);\n    }\n\n    if (type === \"columnCombo\") {\n      columnParams.decorated = bizagi.rendering.desktop.combo;\n      return new bizagi.rendering.desktop.columns.combo(columnParams);\n    }\n\n    if (type === \"columnRadio\") {\n      columnParams.decorated = bizagi.rendering.desktop.radio;\n      return new bizagi.rendering.desktop.columns.radio(columnParams);\n    }\n\n    if (type === \"columnList\") {\n      columnParams.decorated = bizagi.rendering.desktop.list;\n      return new bizagi.rendering.desktop.columns.list(columnParams);\n    }\n\n    if (type === \"columnHidden\") {\n      if (!bizagi.override.hiddenControlsWithDataType) {\n        delete properties.dataType;\n      }\n      columnParams.decorated = bizagi.rendering.desktop.hidden;\n      return new bizagi.rendering.desktop.columns.hidden(columnParams);\n    }\n\n    if (type === \"columnUpload\") {\n      columnParams.decorated = bizagi.rendering.desktop.upload;\n      return new bizagi.rendering.desktop.columns.upload(columnParams);\n    }\n\n    if (type === \"columnImage\") {\n      columnParams.decorated = bizagi.rendering.desktop.image;\n      return new bizagi.rendering.desktop.columns.image(columnParams);\n    }\n\n    if (type === \"columnUploadEcm\") {\n      columnParams.decorated = bizagi.rendering.desktop.ecm;\n      return new bizagi.rendering.desktop.columns.uploadecm(columnParams);\n    }\n\n    if (type === \"columnLink\") {\n      columnParams.decorated = bizagi.rendering.desktop.link;\n      return new bizagi.rendering.desktop.columns.link(columnParams);\n    }\n\n    if (type === \"columnFormLink\") {\n      columnParams.decorated = bizagi.rendering.desktop.formLink;\n      return new bizagi.rendering.desktop.columns.link(columnParams);\n    }\n\n    if (type === \"columnUserfield\") {\n      columnParams.decorated = bizagi.rendering.desktop.userfieldWrapper;\n      return new bizagi.rendering.desktop.columns.column(columnParams);\n    }\n\n    if (type === \"columnSearch\") {\n      columnParams.decorated = bizagi.rendering.desktop.search;\n      return new bizagi.rendering.desktop.columns.search(columnParams);\n    }\n\n    if (type === \"columnLabel\") {\n      if (!bizagi.override.hiddenControlsWithDataType) {\n        delete properties.dataType;\n      }\n      columnParams.decorated = bizagi.rendering.desktop.label;\n      return new bizagi.rendering.desktop.columns.column(columnParams);\n    }\n\n    if (type === \"columnReadonly\") {\n      columnParams.decorated = bizagi.rendering.desktop.readonly;\n      return new bizagi.rendering.desktop.columns.readonly(columnParams);\n    }\n\n    if (type === \"columnDocument\") {\n      columnParams.decorated = bizagi.rendering.desktop.document;\n      return new bizagi.rendering.desktop.columns.document(columnParams);\n    }\n\n    if (type === \"columnLetter\") {\n      columnParams.decorated = bizagi.rendering.desktop.letter;\n      return new bizagi.rendering.desktop.columns.letter(columnParams);\n    }\n\n    if (type === \"columnButton\") {\n      columnParams.decorated = bizagi.rendering.desktop.button;\n      return new bizagi.rendering.desktop.columns.button(columnParams);\n    }\n\n    if (type === \"columnActions\") {\n      columnParams.decorated = bizagi.rendering.desktop.gridActions;\n      return new bizagi.rendering.desktop.columns.actions(columnParams);\n    }\n\n    // No type supported\n    bizagi.log(type + \" not supported in render factory\", data, \"error\");\n    return null;\n  },\n\n  /**\r\n      * Returns the appropiatelayout render based on the type\r\n      * @param {} params\r\n      * @returns {}\r\n      */\n  getLayoutRender: function getLayoutRender(params) {\n    var type = params.type;\n    var data = params.data;\n    var properties = data.properties;\n    var renderParams = $.extend(params, {\n      renderFactory: this,\n      dataService: params.dataService || this.dataService });\n\n\n    if (type === \"layoutImage\") {\n      return new bizagi.rendering.desktop.layoutImage(renderParams);\n    }\n\n    if (type === \"layoutLink\") {\n      return new bizagi.rendering.desktop.layoutLink(renderParams);\n    }\n\n    if (type === \"layoutLabel\") {\n      if (!bizagi.override.hiddenControlsWithDataType) {\n        delete properties.dataType;\n      }\n      return new bizagi.rendering.desktop.layoutLabel(renderParams);\n    }\n\n    if (type === \"layoutText\") {\n      return new bizagi.rendering.desktop.layoutText(renderParams);\n    }\n\n    if (type === \"layoutDateTime\") {\n      return new bizagi.rendering.desktop.layoutDateTime(renderParams);\n    }\n\n    if (type === \"layoutNumber\") {\n      return new bizagi.rendering.desktop.layoutNumber(renderParams);\n    }\n\n    if (type === \"layoutMoney\") {\n      return new bizagi.rendering.desktop.layoutMoney(renderParams);\n    }\n\n    if (type === \"layoutPlaceholder\") {\n      return new bizagi.rendering.desktop.layoutPlaceholder(renderParams);\n    }\n\n    if (type === \"layoutBoolean\") {\n      return new bizagi.rendering.desktop.layoutBoolean(renderParams);\n    }\n\n    if (type === \"layoutUpload\") {\n      return new bizagi.rendering.desktop.layoutUpload(renderParams);\n    }\n\n    // No type supported\n    bizagi.log(type + \" not supported in render factory\", data, \"error\");\n    return null;\n  },\n\n  /*\r\n     *   Returns the appropiate search render based on the type\r\n     */\n  getSearchRender: function getSearchRender(params) {\n    var type = params.type;\n    var data = params.data;\n    var properties = data.properties;\n    var searchParams = $.extend(params, {\n      renderFactory: this,\n      dataService: params.dataService || this.dataService });\n\n\n    if (type == \"searchText\") {\n      var isExtended = bizagi.util.parseBoolean(data.properties.isExtended) || false;\n\n      if (isExtended) {\n        // Creates one extended render\n        return new bizagi.rendering.desktop.extendedText(searchParams);\n      }\n\n      // Creates one normal text render\n      return new bizagi.rendering.desktop.text(searchParams);\n    }\n\n    if (type == \"searchBoolean\") {\n      var display = data.properties.display || \"option\";\n\n      if (display == \"check\") {\n        // Creates one check render\n        return new bizagi.rendering.desktop.check(searchParams);\n      }\n\n      // Creates one yes-no render\n      return new bizagi.rendering.desktop.yesno(searchParams);\n    }\n\n    if (type == \"searchNumber\") {\n      if (data.properties.dataType == 29) {\n        // Creates a Scientific Notation render\n        return new bizagi.rendering.desktop.numberScientificNotation(searchParams);\n      }\n      return new bizagi.rendering.desktop.number(searchParams);\n    }\n\n    if (type == \"searchMoney\") {\n      return new bizagi.rendering.desktop.money(searchParams);\n    }\n\n    if (type == \"searchDate\") {\n      return new bizagi.rendering.desktop.date(searchParams);\n    }\n\n    if (type == \"searchCombo\") {\n      return new bizagi.rendering.desktop.combo(searchParams);\n    }\n\n    if (type == \"searchSuggest\") {\n      return new bizagi.rendering.desktop.search(searchParams);\n    }\n\n    if (type == \"searchLabel\") {\n      if (!bizagi.override.hiddenControlsWithDataType) {\n        delete properties.dataType;\n      }\n      return new bizagi.rendering.desktop.label(searchParams);\n    }\n\n    // No type supported\n    bizagi.log(type + \" not supported in render factory\", data, \"error\");\n    return null;\n  },\n\n  /*\r\n     *   Returns the appropiate query render based on the type\r\n     */\n  getQueryRender: function getQueryRender(params) {\n    var type = params.type;\n    var data = params.data;\n    var properties = data.properties;\n    var isAdvanced = bizagi.util.parseBoolean(data.properties.advancedQuery) || false;\n    var renderParams = $.extend(params, {\n      renderFactory: this,\n      dataService: params.dataService || this.dataService });\n\n\n    if (type === \"queryText\") {\n      var isExtended = bizagi.util.parseBoolean(data.properties.isExtended) || false;\n\n      if (isExtended) {\n        // Creates one extended render\n        return new bizagi.rendering.desktop.queryExtendedText(renderParams);\n      } else {\n        // Creates one normal text render\n        if (isAdvanced) {\n          return new bizagi.rendering.desktop.queryTextAdvanced(renderParams);\n        } else {\n          return new bizagi.rendering.desktop.queryText(renderParams);\n        }\n      }\n    }\n\n    if (type == \"queryBoolean\") {\n      var display = data.properties.display || \"option\";\n\n      // Creates one check render\n      if (display == \"check\") {\n        return new bizagi.rendering.desktop.queryCheck(renderParams);\n      }\n\n      // Creates one yes-no render\n      return new bizagi.rendering.desktop.queryYesNo(renderParams);\n    }\n\n    if (type === \"queryNumber\") {\n      if (isAdvanced) {\n        return new bizagi.rendering.desktop.queryNumberAdvanced(renderParams);\n      } else {\n        return new bizagi.rendering.desktop.queryNumber(renderParams);\n      }\n    }\n\n    if (type === \"queryMoney\") {\n      if (isAdvanced) {\n        return new bizagi.rendering.desktop.queryMoneyAdvanced(renderParams);\n      } else {\n        return new bizagi.rendering.desktop.queryMoney(renderParams);\n      }\n    }\n\n    if (type === \"queryDate\") {\n      if (isAdvanced) {\n        return new bizagi.rendering.desktop.queryDateAdvanced(renderParams);\n      } else {\n        return new bizagi.rendering.desktop.queryDate(renderParams);\n      }\n    }\n\n    if (type == \"queryCombo\") {\n      return new bizagi.rendering.desktop.queryCombo(renderParams);\n    }\n\n    if (type == \"queryCascadingCombo\") {\n      return new bizagi.rendering.desktop.queryCascadingCombo(renderParams);\n    }\n\n    if (type == \"querySuggest\") {\n      return new bizagi.rendering.desktop.querySuggest(renderParams);\n    }\n\n    if (type == \"queryLabel\") {\n      if (!bizagi.override.hiddenControlsWithDataType) {\n        delete properties.dataType;\n      }\n      return new bizagi.rendering.desktop.queryLabel(renderParams);\n    }\n\n    if (type == \"queryList\") {\n      return new bizagi.rendering.desktop.queryList(renderParams);\n    }\n\n    if (type == \"queryMultiSelect\") {\n      return new bizagi.rendering.desktop.queryMultiSelect(renderParams);\n    }\n\n    if (type == \"querySearch\") {\n      return new bizagi.rendering.desktop.querySearch(renderParams);\n    }\n\n    if (type == \"queryRadio\") {\n      return new bizagi.rendering.desktop.queryRadio(renderParams);\n    }\n\n    if (type == \"queryState\") {\n      return new bizagi.rendering.desktop.queryState(renderParams);\n    }\n\n    if (type == \"queryCaseState\") {\n      return new bizagi.rendering.desktop.queryCaseState(renderParams);\n    }\n\n    if (type == \"queryProcess\") {\n      return new bizagi.rendering.desktop.queryProcess(renderParams);\n    }\n\n    if (type == \"querySearchUser\") {\n      return new bizagi.rendering.desktop.querySearchUser(renderParams);\n    }\n\n    if (type == \"queryHidden\") {\n      if (!bizagi.override.hiddenControlsWithDataType) {\n        delete properties.dataType;\n      }\n      return new bizagi.rendering.desktop.hidden(renderParams);\n    }\n\n    // No type supported\n    bizagi.log(type + \" not supported in render factory\", data, \"error\");\n    return null;\n  },\n\n  /*\r\n     *   Returns the appropiate search render based on the type\r\n     */\n  getRangeRender: function getRangeRender(params) {\n    var type = params.type;\n    var data = params.data;\n    var renderParams = $.extend(params, {\n      renderFactory: this,\n      dataService: params.dataService || this.dataService });\n\n\n    if (type === \"rangeDate\") {\n      return new bizagi.rendering.desktop.rangeDate(renderParams);\n    }\n\n    if (type === \"rangeMoney\") {\n      return new bizagi.rendering.desktop.rangeMoney(renderParams);\n    }\n\n    if (type === \"rangeNumber\") {\n      return new bizagi.rendering.desktop.rangeNumber(renderParams);\n    }\n\n    // No type supported\n    bizagi.log(type + \" not supported in render factory\", data, \"error\");\n    return null;\n  },\n\n  getAdvancedQueryRender: function getAdvancedQueryRender(params) {\n    var type = params.type;\n    var renderParams = $.extend(params, {\n      renderFactory: this,\n      dataService: params.dataService || this.dataService });\n\n\n    if (type === \"text\") {\n      return new bizagi.rendering.desktop.queryTextAdvanced(renderParams);\n    }\n\n    if (type === \"number\") {\n      return new bizagi.rendering.desktop.queryNumberAdvanced(renderParams);\n    }\n\n    if (type === \"money\") {\n      return new bizagi.rendering.desktop.queryMoneyAdvanced(renderParams);\n    }\n\n    if (type === \"date\") {\n      return new bizagi.rendering.desktop.queryDateAdvanced(renderParams);\n    }\n  } });"]}