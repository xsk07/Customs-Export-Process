{"version":3,"sources":["jquery/workportal/desktop/widget/project.activity/bizagi.workportal.desktop.widgets.project.activity.js","jquery/workportal/desktop/widget/project.dashboard.menu/bizagi.workportal.desktop.widgets.project.dashboard.menu.js","jquery/workportal/desktop/widget/project.dashboard.menu.activity.plan/bizagi.workportal.desktop.widgets.project.dashboard.menu.activity.plan.js","jquery/workportal/desktop/widget/project.content.dashboard/bizagi.workportal.desktop.widgets.project.content.dashboard.js","jquery/workportal/desktop/widget/project.plan.activity.sidebar/bizagi.workportal.desktop.widgets.project.plan.activity.sidebar.js","jquery/workportal/desktop/widget/project.plan.activity.action/bizagi.workportal.desktop.widgets.project.plan.activity.action.js","jquery/workportal/desktop/widget/project.plan.activity.time/bizagi.workportal.desktop.widgets.project.plan.activity.time.js","jquery/workportal/desktop/widget/project.plan.activity.progress/bizagi.workportal.desktop.widgets.project.plan.activity.progress.js","jquery/workportal/desktop/widget/project.plan.activity.subprocesses/bizagi.workportal.desktop.widgets.project.plan.activity.subprocesses.js","jquery/workportal/desktop/widget/project.plan.activity.parent/bizagi.workportal.desktop.widgets.project.plan.activity.parent.js","jquery/workportal/desktop/widget/project.plan.activity.users/bizagi.workportal.desktop.widgets.project.plan.activity.users.js"],"names":["_typeof","obj","Symbol","iterator","constructor","prototype","bizagi","workportal","widgets","widget","extend","onDiscussionsMenuStatusChange","ev","params","this","updateDiscussionsIcons","hasDiscussionsOrComment","sub","$","proxy","toggle","clean","unsub","injector","register","project","dashboard","menu","init","workportalFacade","dataService","_super","loadTemplates","project-dashboard-menu","getTemplate","concat","renderContent","content","postRender","self","contextsLeftSidebarCaseDashboard","forEach","context","updateView","event","args","$content","getContent","empty","argsTemplate","showFormOverview","menuDashboard","showFormActivity","showCommentsOptionMenu","showFilesOptionMenu","showTimeLineOptionMenu","showPlanOptionMenu","contextPlanOptionMenu","contextFormActivityOptionMenu","contextualized","plan","render","appendTo","showContextByMenuDashboard","type","toUpperCase","addClass","siblings","removeClass","handlerEvents","paramsGetPlan","idPlan","id","when","callGetPlan","then","responsePlan","pub","loadContentById","preventDefault","$item","target","closest","hasClass","util","autoSave","done","document","data","getLevelNavigator","newLevelNavigator","parseInt","refreshLastItemBreadcrumb","histName","level","defer","Deferred","getPlan","always","response","status","undefined","resolve","reject","promise","subMenuHandler","$comments","$files","$timeline","on","off","activity","project-content-dashboard","template","setTimeout","window","trigger","base","project-activity","templateHomeActivity","renderForm","idCase","idWorkitem","idTask","radNumber","withOutGlobalForm","isClosed","belongCurrentUser","hasGlobalForm","parseBoolean","showForm","isOfflineForm","messageForm","where","renderContainer","errorTemplate","message","resources","getResource","_forButton","_textActionNoActivitiesButton","getMessageFromNetworkState","online","errorHtml","tmpl","textButton","text","click","onClickButtonNoActivities","bind","actionGoBack","fail","proxyPrefix","serviceLocator","database","rendering","facade","setContext","subscribe","execute","canvas","triggerparams","action","actions","BIZAGI_WORKPORTAL_ACTION_ROUTING","fromTask","fromWorkItemId","formsRenderVersion","onClose","publish","widgetName","defaultWidget","renderingFacade","resizeLayout","goBack","get","goToBack","call","getWidgetByCookie","_key","_to","routing","RETURN_TO","_goBack","BAM","QUERIES","INBOX","serviceloadDataPlan","project-plan-activity-sidebar","onNotifyLoadInfoPlan","parans","idActivitySelected","loadData","getDateServer","loadedWithDataActivities","loadedWithDataFirstParent","unsubscribe","sidebar","notifier","dateFormat","localization","timeFormat","estimatedFinishDateTime","beforeUserAssignedActivity","activity-action-main","activity-action-editionpopup","dialogBox","onNotifyLoadInfoActivityExecution","onNotifyExpandedRightSidebar","currentActivity","activities","filter","idUserCreator","currentUser","idUser","userAssigned","currentActivityName","name","showEditAction","append","initilizeActionMenu","initializeTempleteAndEvents","plugins","activityEdition","initPluginPopupEdition","formEditActivity","assignee","date","duration","buttonCancel","buttonUpdate","onClickPopupButtonCancel","onClickPopupButtonUpdate","onDeleteDate","onTypeDuration","select","onSelectMenu","popupEditActivity","formContent","initializeAutoComplete","element","url","getUrl","autocomplete","minLength","source","request","ajax","domain","userName","fullName","term","organization","pag","pagSize","orderField","success","map","users","item","label","user","value","ui","val","IdAssignee","focus","change","initializeDatePicker","datepicker","onSelect","getTime","dateFormatter","getDateFormatByDatePickerJqueryUI","initializeSpiner","desactivateDateByDuration","newValue","isNumeric","spinner","min","max","placeHolder","spin","keyCode","fieldDurationActive","activateElement","form","currentTarget","find","length","onClickOpenPopupEdition","dialog","resizable","draggable","height","width","modal","title","maximize","open","onOpenPopupEdition","close","onClosePopupEdition","activityDate","isEmpty","estimatedFinishDate","isNaN","formatInvariant","Date","getDateFromInvariant","isMinimumDate","setUserAssignedById","removePopupWidgets","callGetDataUsers","responseUsers","next","html","remove","validateParamsOfFormEditActivity","idUserAssigned","updateActivity","progress","startDate","allowEdition","description","finishDate","items","editActivityPlan","refreshAllWidgets","showSucessMessage","onClickFavorite","favoriteOptions","idObject","favoriteType","addFavorite","favoritesData","guidFavorite","idFavorites","delFavorite","messageValidationField","replace","toLowerCase","csvIdUsers","userIds","getUsersData","EXECUTING_ACTIVITY","FINISHED_ACTIVITY","datePickerRegional","plan-time-main","onNotifyLoadInfoActivitySummary","getStateActivity","time","fromDate","getFormattedDate","getFirstDate","dataProgressWidget","getDataByScenarios","unitTime","auxUnitTime","updateWidget","contentTemplate","relativeTime","getRelativeTime","now","minutes","messageDescripionDifference","keywordResource","messageTime","$barRemainingDate","widthNumberDays","css","toString","percentBar","currentState","colorBar","getColorByCreatedAndEstimatedDate","toDate","callGetEffectiveDuration","getColorBar","getPercentBar","getKeywordResourceDescriptionBar","getUnitTime","getUTCDate","dateObj","monthNames","getMonth","formatDate","d","getEffectiveDuration","plan-progress-main","plan-progress-popup-edit","onNotifyUpdateItemFromRender","activityToShow","valuePercentBarComplete","canEdit","popupEditProgress","initPluginPopupEditProgress","formEditProgress","sliderProgress","slider","orientation","range","from","to","step","slide","onChangesliderProgress","each","vals","i","el","numericTextBoxPlugin","format","onChangeNumericTextBoxProgress","decimals","buttonChangeProgress","onShowPopupEditProgress","onClickCancel","onSubmitFormChangeProgress","updateProgressUI","listItems","activityWork","hide","show","newPercentProgress","templatePopupEditProgress","onOpenPopupPlan","detach","previusValueProgress","prop","project-subprocesses","project-subprocesses-tootip-custom-properties","subprocesses","plan-parent-main","getPlanParent","planParent","parent","idParent","nameParent","displayName","idWorkflow","idWorkItem","onClickGoToParentCase","routingExecute","usersMap","usersInformation","globalHandlersService","usersAssignees","plan-users-main","activityRunning","cvsGuidUsers","activitiesUsers","ownerUserId","ownerUserGuid","push","guidUser","userType","picture","guid","index","userId","userGuid","userAssignedGuid","inArray","justAssignees","addEventHandlersModal","showCreatorInformation","renderUserProfilesAndImages","allUsers","usersAssignee","isOwner","indexOf","isAssignee","usersAdapter","createJsonUserInfo","userCreator","userInfo","username","email","getInitials","userinformation","$li","console","log","not","userSelected","$target","usersActivities","userParam","getIsAssignee","getIsOwner","usertooltip","usersGuids","join","getUsersAssignees","getUserAssignee","tasks","types","actUser","stopPropagation","BIZAGI_WORKPORTAL_WIDGET_USERS_MODAL","closeVisible","modalParameters","refreshInbox"],"mappings":"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","sourcesContent":["function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /*\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: Bizagi Workportal Desktop Project Activity Controller\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: Elkin Fernando Siabato Cruz\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\nbizagi.workportal.widgets.project.base.extend(\"bizagi.workportal.widgets.project.activity\", {}, {\n  /*\r\n                                                                                                   *   Constructor\r\n                                                                                                   */\n  init: function init(workportalFacade, dataService, params) {\n\n    var self = this;\n\n    //Call base\n    self._super(workportalFacade, dataService, params);\n\n    //Load templates\n    self.loadTemplates({\n      \"project-activity\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.project.activity\").concat(\"#project-activity-wrapper\") });\n\n\n  },\n\n  /*\r\n      * Renders the template defined in the widget\r\n      */\n  renderContent: function renderContent() {\n    var self = this;\n    var templateHomeActivity = self.getTemplate(\"project-activity\");\n    self.content = templateHomeActivity.render({});\n    return self.content;\n  },\n\n  /*\r\n      * Post render and links events with handlers\r\n      */\n  postRender: function postRender() {\n\n    var self = this;\n    self.renderForm({\n      idCase: self.params.idCase,\n      idWorkitem: self.params.idWorkitem,\n      idTask: self.params.idTask,\n      radNumber: self.params.radNumber,\n      withOutGlobalForm: self.params.withOutGlobalForm || false,\n      isClosed: self.params.isClosed,\n      belongCurrentUser: self.params.belongCurrentUser,\n      hasGlobalForm: bizagi.util.parseBoolean(self.params.hasGlobalForm),\n      showForm: bizagi.util.parseBoolean(self.params.showForm),\n      isOfflineForm: self.params.isOfflineForm || false,\n      messageForm: self.params.messageForm || \"\",\n      where: self.params.where });\n\n\n  },\n\n  renderForm: function renderForm(params) {\n\n    var self = this,resultRender;\n    var renderContainer = self.getContent();\n\n    var runningAndAssignToOtherUser = !params.isClosed && !params.belongCurrentUser;\n\n    if (runningAndAssignToOtherUser && !params.hasGlobalForm) {\n      params.withOutGlobalForm = true;\n    }\n\n    if (!params.withOutGlobalForm) {\n      // it has't activities and global form\n      var proxyPrefix = _typeof(self.dataService.serviceLocator.proxyPrefix) != undefined ? self.dataService.serviceLocator.proxyPrefix : \"\";\n      var database = _typeof(self.dataService.database) != undefined ? self.dataService.database : \"\";\n\n\n      // Load render page\n      var rendering = self.rendering = new bizagi.rendering.facade({ \"proxyPrefix\": proxyPrefix, \"database\": database });\n      // Executes rendering into render container\n      bizagi.util.setContext(params);\n\n      self.rendering.subscribe(\"onLoadDataItemsFromFormActivityPlan\", function (event, params) {\n        self.pub(\"notify\", {\n          type: \"UPDATE_ITEMS_FROM_FORMRENDER\",\n          args: params });\n\n      });\n      self.rendering.subscribe(\"rendering-formRendered\", function (event, params) {\n        self.pub(\"notify\", {\n          type: \"ON_RENDER_FINISH\",\n          args: params });\n\n      });\n\n      var resultRender = rendering.execute($.extend(params, {\n        canvas: renderContainer,\n        menu: self.menu }));\n\n\n      // Attach handler to render container to subscribe for routing events\n      renderContainer.bind(\"routing\", function (context, triggerparams) {\n        // Executes routing action\n\n        var params = {\n          action: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,\n          idCase: self.params.idCase,\n          fromTask: self.params.fromTask || self.params.idTask,\n          fromWorkItemId: self.params.fromWorkItemId || self.params.idWorkitem,\n          isOfflineForm: self.params.isOfflineForm,\n          formsRenderVersion: self.params.formsRenderVersion,\n          onClose: function onClose() {\n            // If the user closes the dialog we need to redirect to inbox widget\n            self.publish(\"changeWidget\", {\n              widgetName: bizagi.util.defaultWidget() });\n\n          } };\n\n        params = $.extend(params, triggerparams);\n        self.publish(\"executeAction\", params);\n      });\n    } else\n    {\n      var errorTemplate = self.workportalFacade.getTemplate(\"info-message\"),\n      message = params.messageForm !== \"\" ? params.messageForm : self.resources.getResource(\"render-without-globalform\"),\n      _forButton = self._textActionNoActivitiesButton(params.where);\n\n      if (typeof self.params != \"undefined\" && typeof self.params.isOfflineForm !== \"undefined\" && self.params.isOfflineForm == true) {\n        message = bizagi.util.getMessageFromNetworkState(self.dataService.online);\n      }\n\n      var errorHtml = $.tmpl(errorTemplate, {\n        message: message,\n        textButton: _forButton.text });\n\n      // Remove loading icon from summary container\n      errorHtml.appendTo(renderContainer);\n\n      $(\"#ui-bizagi-btn-go-to-inbox\", errorHtml).click(self.onClickButtonNoActivities.bind(self, _forButton.actionGoBack));\n\n      resultRender = $.Deferred();\n      resultRender.fail();\n\n    }\n    // Keep reference to rendering facade\n    self.renderingFacade = rendering;\n\n    // Resize layout\n    self.resizeLayout();\n  },\n\n  /**\r\n      * Go to inbox when click on the button \"Go to inbox of \r\n      * @param {Boolean} goBack \r\n      */\n  onClickButtonNoActivities: function onClickButtonNoActivities(goBack) {\n    var self = this,\n    _inbox = function _inbox() {\n      self.publish(\"changeWidget\", {\n        widgetName: self.workportalFacade.workportal.getWidgetByCookie(true) });\n\n    },\n    _goBack = function _goBack() {\n      var backNavigator = bizagi.injector.get(\"backNavigator\");\n      backNavigator.goToBack.call(self);\n    };\n    goBack ? _goBack() : _inbox();\n  },\n\n  /**\r\n      * return text an action for button on no have activities\r\n      * @param {actions.routing.RETURN_TO} where to go\r\n      */\n  _textActionNoActivitiesButton: function _textActionNoActivitiesButton(where) {\n    var self = this,\n    _key,\n    _to = bizagi.workportal.actions.routing.RETURN_TO,\n    _goBack = true;\n    switch (where) {\n      case _to.BAM:\n      case _to.QUERIES:\n        _key = \"workportal-without-globalform-button-to-results\";\n        break;\n\n      case _to.INBOX:\n        _key = \"workportal-without-globalform-button-to-inbox\";\n        break;\n\n      default:\n        _key = \"render-without-globalform-button\";\n        _goBack = false;\n        break;}\n\n    return {\n      text: self.resources.getResource(_key),\n      actionGoBack: _goBack };\n\n  },\n\n  clean: function clean() {\n\n  } });\n\n\nbizagi.injector.register('bizagi.workportal.widgets.project.activity', ['workportalFacade', 'dataService', bizagi.workportal.widgets.project.activity], true);","/**\r\n * Name: BizAgi Desktop Widget Dashboard menu (left sidebar) * \r\n * @author Valeria Vanegas\r\n */\n\n\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.project.dashboard.menu\", {}, {\n\n  /**\r\n                                                                                                   * Handler when discussions menu status change\r\n                                                                                                   * @param {*} ev \r\n                                                                                                   * @param {*} params \r\n                                                                                                   */\n  onDiscussionsMenuStatusChange: function onDiscussionsMenuStatusChange(ev, params) {\n    var self = this;\n    self.updateDiscussionsIcons(params.hasDiscussionsOrComment);\n  },\n\n  /**\r\n      * Update discussions icon on sidebar menu\r\n      * The icon is different when there is other discussion or there are comments\r\n      * @param {*} hasDiscussionsOrComment \r\n      */\n  updateDiscussionsIcons: function updateDiscussionsIcons(hasDiscussionsOrComment) {\n    var self = this;\n\n    self.sub(\"UPDATE_DISCUSSIONS_MENU_STATUS\", $.proxy(self.onDiscussionsMenuStatusChange, self));\n\n    $(\".bz-icon-discussion-comment\").toggle(hasDiscussionsOrComment);\n    $(\".bz-icon-discussion-no-comment\").toggle(!hasDiscussionsOrComment);\n    self.params.hasDiscussionsOrComment = hasDiscussionsOrComment;\n  },\n\n  /**\r\n      * Detach events\r\n      */\n  clean: function clean() {\n    var self = this;\n    self.unsub(\"UPDATE_DISCUSSIONS_MENU_STATUS\", $.proxy(self.onDiscussionsMenuStatusChange, self));\n  } });\n\n\nbizagi.injector.register(\"bizagi.workportal.widgets.project.dashboard.menu\", [\"workportalFacade\", \"dataService\", bizagi.workportal.widgets.project.dashboard.menu], true);","/*\r\n *   Name: Bizagi Workportal project Dashboard Menu Activity Plan\r\n *   Author: Elkin Fernando Siabato Cruz\r\n */\n\nbizagi.workportal.widgets.project.dashboard.menu.extend(\"bizagi.workportal.widgets.project.dashboard.menu.activity.plan\", {}, {\n\n  /**\r\n                                                                                                                                 *   Constructor\r\n                                                                                                                                 */\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n    self.params = params || {};\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    //Load templates\n    self.loadTemplates({\n      \"project-dashboard-menu\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.project.dashboard.menu.activity.plan\").concat(\"#project-dashboard-menu2\") });\n\n  },\n\n  /**\r\n      * Renders the template defined in the widget\r\n      */\n  renderContent: function renderContent() {\n    var self = this;\n    self.content = $(\"<div></div>\");\n    return self.content;\n  },\n\n  /**\r\n      * links events with handlers\r\n      */\n  postRender: function postRender() {\n    var self = this;\n    self._super();\n    //Handlers\n    self.params.contextsLeftSidebarCaseDashboard.forEach(function (context) {\n      self.sub(context, $.proxy(self.updateView, self));\n    });\n  },\n\n  /**\r\n      * Update view\r\n      * @param event\r\n      * @param params\r\n      */\n  updateView: function updateView(event, params) {\n    var self = this;\n    self.params = $.extend(self.params, params.args);\n    self.clean();\n    var $content = self.getContent().empty();\n\n    var argsTemplate = {\n      showFormOverview: self.params.menuDashboard.showFormOverview,\n      showFormActivity: self.params.menuDashboard.showFormActivity,\n      showCommentsOptionMenu: self.params.menuDashboard.showCommentsOptionMenu,\n      showFilesOptionMenu: self.params.menuDashboard.showFilesOptionMenu,\n      showTimeLineOptionMenu: self.params.menuDashboard.showTimeLineOptionMenu,\n      showPlanOptionMenu: self.params.menuDashboard.showPlanOptionMenu,\n      contextPlanOptionMenu: self.params.menuDashboard.contextPlanOptionMenu,\n      contextFormActivityOptionMenu: self.params.menuDashboard.contextFormActivityOptionMenu,\n      contextualized: self.params.plan.contextualized };\n\n\n    //Update widget\n    var template = self.getTemplate(\"project-dashboard-menu\");\n    template.render(argsTemplate).appendTo($content);\n\n    if (self.params.showContextByMenuDashboard) {\n      $(\"li[data-context='\" + event.type.toUpperCase() + \"']\", self.content).addClass(\"active\").siblings().removeClass(\"active\");\n    }\n\n    self.updateDiscussionsIcons(self.params.hasDiscussionsOrComment);\n    self.handlerEvents();\n\n    var paramsGetPlan = { idPlan: self.params.plan.id };\n    $.when(self.callGetPlan(paramsGetPlan)).then(function (responsePlan) {\n      $.extend(self.params.plan, responsePlan);\n      self.pub(\"notify\", {\n        type: \"LOAD_INFO_PLAN\",\n        args: self.params });\n\n    });\n  },\n\n  /**\r\n      *   Load Content By Id\r\n      */\n  loadContentById: function loadContentById(event) {\n    var self = this;\n    event.preventDefault();\n    var $item = $(event.target).closest(\"li\");\n\n    if (!$item.hasClass(\"active\")) {\n      $.when(bizagi.util.autoSave()).done(function () {\n        $(document).data('auto-save', '');\n\n        var showContextByMenuDashboard = $item.data(\"context\");\n        if (showContextByMenuDashboard) {\n          var getLevelNavigator = self.pub(\"notify\", { type: \"NAVIGATOR_GETLEVEL\" });\n          var currentLevelNavigator = parseInt(getLevelNavigator[0]);\n          var nameItemNavigator = \"\";\n          var newLevelNavigator = currentLevelNavigator;\n\n          self.params.refreshLastItemBreadcrumb = false;\n          self.pub(\"notify\", {\n            type: showContextByMenuDashboard.toUpperCase(),\n            args: $.extend(self.params, { showContextByMenuDashboard: showContextByMenuDashboard,\n              histName: nameItemNavigator,\n              level: newLevelNavigator }) });\n\n          $(\"li[data-context='\" + self.params.showContextByMenuDashboard.toUpperCase() + \"']\", self.content).addClass(\"active\").siblings().removeClass(\"active\");\n        }\n      });\n    }\n  },\n\n  /**\r\n      * Call services\r\n      */\n\n  callGetPlan: function callGetPlan(params) {\n    var self = this;\n    var defer = $.Deferred();\n    self.dataService.getPlan(params).always(function (response) {\n      if (response.status === 200 || response.status === 201 || response.status === undefined) {\n        defer.resolve(response);\n      } else\n      {\n        defer.reject();\n      }\n    });\n\n    return defer.promise();\n  },\n\n  subMenuHandler: function subMenuHandler() {\n    var self = this;\n    var content = self.getContent();\n    var $comments = $(\"[data-context='ACTIVITYPLANCOMMENTS']\", content);\n    var $files = $(\"[data-context='ACTIVITYPLANFILES']\", content);\n    var $timeline = $(\"[data-context='ACTIVITYPLANTIMELINE']\", content);\n\n    $(\".ui-bizagi-wp-project-tab-submenu a\", content).on(\"click\", function () {\n      $comments.toggle();\n      $files.toggle();\n      $timeline.toggle();\n    });\n  },\n\n  /**\r\n      * Handler events\r\n      */\n  handlerEvents: function handlerEvents() {\n    var self = this;\n    var content = self.getContent();\n    self.subMenuHandler();\n    $(\".ui-bizagi-wp-project-tab-links a\", content).on(\"click\", $.proxy(self.loadContentById, self));\n  },\n\n  /**\r\n      * Clean widgets and events\r\n      */\n  clean: function clean() {\n    var self = this;\n    var content = self.getContent();\n\n    self._super();\n\n    if (self.params && self.params.contextsLeftSidebarCaseDashboard) {\n      self.params.contextsLeftSidebarCaseDashboard.forEach(function (context) {\n        self.unsub(context, $.proxy(self.updateView, self));\n      });\n    }\n\n    $(\".ui-bizagi-wp-project-tab-links a\", content).off();\n  } });\n\n\n\nbizagi.injector.register(\"bizagi.workportal.widgets.project.dashboard.menu.activity.plan\", [\"workportalFacade\", \"dataService\", bizagi.workportal.widgets.project.dashboard.menu.activity.plan], true);","/*\r\n *   Name: Bizagi Workportal Project Content Dashboard\r\n *   Author: Elkin Fernando Siabato Cruz\r\n */\n\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.project.content.dashboard\", {}, {\n\n  /*\r\n                                                                                                      *   Constructor\r\n                                                                                                      */\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    //Load templates\n    self.loadTemplates({\n      \"project-content-dashboard\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.project.content.dashboard\").concat(\"#project-plan-content-dashboard\") });\n\n\n  },\n\n  /*\r\n      * Renders the template defined in the widget\r\n      */\n  renderContent: function renderContent() {\n    var self = this;\n\n    var template = self.getTemplate(\"project-content-dashboard\");\n    self.content = template.render({});\n\n    return self.content;\n  },\n  postRender: function postRender() {\n    var self = this;\n\n    setTimeout(function () {\n      $(window).trigger(\"resize\"); //Simulate resize for fix when load first time.\n    }, 1000);\n\n  } });\n\n\n\nbizagi.injector.register(\"bizagi.workportal.widgets.project.content.dashboard\", [\"workportalFacade\", \"dataService\", bizagi.workportal.widgets.project.content.dashboard], true);","/*\r\n *   Name: Bizagi Workportal Project Activity Sidebar\r\n *   Author: Elkin Fernando Siabato Cruz\r\n */\n\nbizagi.workportal.widgets.project.base.extend(\"bizagi.workportal.widgets.project.plan.activity.sidebar\", {}, {\n\n  /*\r\n                                                                                                                *   Constructor\r\n                                                                                                                */\n  init: function init(workportalFacade, dataService, serviceloadDataPlan, params) {\n    var self = this;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    self.serviceloadDataPlan = serviceloadDataPlan;\n\n    //Load templates\n    self.loadTemplates({\n      \"project-plan-activity-sidebar\": bizagi.getTemplate(\"bizagi.workportal.desktop.project.plan.activity.sidebar\").concat(\"#project-plan-activity-sidebar\") });\n\n  },\n\n  /*\r\n      * Renders the template defined in the widget\r\n      */\n  renderContent: function renderContent() {\n    var self = this;\n\n    var template = self.getTemplate(\"project-plan-activity-sidebar\");\n    self.content = template.render({});\n\n    return self.content;\n  },\n  postRender: function postRender() {\n    var self = this;\n    self.sub(\"LOAD_INFO_PLAN\", $.proxy(self.onNotifyLoadInfoPlan, self));\n  },\n\n  onNotifyLoadInfoPlan: function onNotifyLoadInfoPlan(event, parans) {\n    var self = this;\n    if (self.params.plan.idActivitySelected) {\n\n      var params = { idPlan: self.params.plan.id };\n      self.serviceloadDataPlan.loadData(params, self.getDateServer, self.params);\n      self.serviceloadDataPlan.subscribe(\"loadedWithDataActivities\", $.proxy(self.loadedWithDataActivities, self));\n      self.serviceloadDataPlan.subscribe(\"loadedWithDataFirstParent\", $.proxy(self.loadedWithDataFirstParent, self));\n    }\n  },\n\n  loadedWithDataActivities: function loadedWithDataActivities() {\n    var self = this;\n    self.pub(\"notify\", {\n      type: \"LOADED_ACTIVITIES_PLAN\",\n      args: self.params });\n\n    self.pub(\"notify\", {\n      type: \"LOAD_INFO_SUMMARY_PROGRESS_PLAN\",\n      args: self.params });\n\n    self.pub(\"notify\", {\n      type: \"LOAD_INFO_ACTIVITY_SUMMARY\",\n      args: self.params });\n\n    self.pub(\"notify\", {\n      type: \"LOAD_INFO_ACTIVITIES_PLAN\",\n      args: self.params });\n\n  },\n\n  loadedWithDataFirstParent: function loadedWithDataFirstParent() {\n    var self = this;\n    self.pub(\"notify\", {\n      type: \"LOAD_INFO_SUMMARY_PLAN\",\n      args: self.params });\n\n  },\n\n  clean: function clean() {\n    var self = this;\n    if (self.serviceloadDataPlan) {\n      self.serviceloadDataPlan.unsubscribe(\"loadedWithDataActivities\", $.proxy(self.loadedWithDataActivities, self));\n      self.serviceloadDataPlan.unsubscribe(\"loadedWithDataFirstParent\", $.proxy(self.loadedWithDataFirstParent, self));\n    }\n  } });\n\n\n\nbizagi.injector.register(\"bizagi.workportal.widgets.project.plan.activity.sidebar\", [\"workportalFacade\", \"dataService\", \"bizagi.workportal.services.behaviors.loadDataPlan\", bizagi.workportal.widgets.project.plan.activity.sidebar], true);","/*\r\n *   Name: Bizagi Workportal Desktop Project Plan Activity Action\r\n *   Author: Elkin Fernando Siabato Cruz\r\n */\n\nbizagi.workportal.widgets.project.base.extend(\"bizagi.workportal.widgets.project.plan.activity.action\", {}, {\n\n  /**\r\n                                                                                                               *   Constructor\r\n                                                                                                               */\n  init: function init(workportalFacade, dataService, notifier, params) {\n    var self = this;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    self.dateFormat = bizagi.localization.getResource(\"dateFormat\");\n    self.timeFormat = bizagi.localization.getResource(\"timeFormat\");\n    self.estimatedFinishDateTime; //Save complete date and time, because datepicker dont save time\n\n    self.beforeUserAssignedActivity = \"\";\n    self.notifier = notifier;\n\n\n    //Load templates\n    self.loadTemplates({\n      \"activity-action-main\": bizagi.getTemplate(\"bizagi.workportal.desktop.project.plan.activity.action\").concat(\"#project-plan-activity-action\"),\n      \"activity-action-editionpopup\": bizagi.getTemplate(\"bizagi.workportal.desktop.project.plan.activity.action\").concat(\"#project-plan-activity-action-editionpopup\") });\n\n\n    self.dialogBox = {};\n  },\n\n  /**\r\n      *\r\n      * @returns {*|jQuery|HTMLElement}\r\n      */\n  renderContent: function renderContent() {\n    var self = this;\n    self.content = $(\"<div></div>\");\n    return self.content;\n  },\n\n  /**\r\n      *\r\n      */\n  postRender: function postRender() {\n    var self = this;\n    self.sub(\"LOAD_INFO_ACTIVITY_SUMMARY\", $.proxy(self.onNotifyLoadInfoActivityExecution, self));\n    self.sub(\"EXPANDED_RIGHT_SIDEBAR\", $.proxy(self.onNotifyExpandedRightSidebar, self));\n  },\n\n  /**\r\n      * Notifies when an event is raised\r\n      */\n  onNotifyLoadInfoActivityExecution: function onNotifyLoadInfoActivityExecution(event, params) {\n    var self = this;\n    self.params = $.extend(self.params, params.args);\n\n    var $content = self.getContent().empty();\n\n    var currentActivity = {};\n    if (self.params.plan.idActivitySelected) {\n      currentActivity = self.params.plan.activities.filter(function (activity) {\n        return activity.id.toUpperCase() === self.params.plan.idActivitySelected.toUpperCase();\n      })[0];\n    }\n\n    if (self.params.plan.idUserCreator === bizagi.currentUser.idUser || currentActivity.userAssigned == bizagi.currentUser.idUser) {\n\n      var argsTemplate = {};\n      argsTemplate.currentActivityName = currentActivity.name;\n      argsTemplate.showEditAction = true;\n      if (self.params.plan.idUserCreator !== bizagi.currentUser.idUser) {\n        argsTemplate.showEditAction = false;\n      }\n\n      var tmpl = self.getTemplate(\"activity-action-main\");\n      $content.append(tmpl.render(argsTemplate));\n\n      if (argsTemplate.showEditAction) {\n        self.initilizeActionMenu();\n        self.beforeUserAssignedActivity = currentActivity.userAssigned;\n        self.content.append($content);\n        self.initializeTempleteAndEvents();\n      }\n    }\n  },\n\n  initializeTempleteAndEvents: function initializeTempleteAndEvents() {\n    var self = this;\n    self.plugins = {};\n    self.plugins.activityEdition = self.initPluginPopupEdition();\n\n    self.formEditActivity = {\n      assignee: $(\"#activity-form-assignee\", self.plugins.activityEdition),\n      date: $(\"#activity-form-date\", self.plugins.activityEdition),\n      duration: $(\"#activity-form-duration\", self.plugins.activityEdition),\n      buttonCancel: $(\"#ui-bizagi-wp-project-popupform-action-cancel\", self.plugins.activityEdition),\n      buttonUpdate: $(\"#ui-bizagi-wp-project-popupform-action-update\", self.plugins.activityEdition) };\n\n\n    self.formEditActivity.buttonCancel.on(\"click\", $.proxy(self.onClickPopupButtonCancel, self));\n    self.formEditActivity.buttonUpdate.on(\"click\", $.proxy(self.onClickPopupButtonUpdate, self));\n\n    self.formEditActivity.date.on(\"keydown\", $.proxy(self.onDeleteDate, self));\n    self.formEditActivity.duration.on(\"keyup\", $.proxy(self.onTypeDuration, self));\n  },\n\n  /**\r\n      *\r\n      */\n  onNotifyExpandedRightSidebar: function onNotifyExpandedRightSidebar() {\n    var self = this;\n    self.initilizeActionMenu();\n  },\n\n  /**\r\n      *\r\n      */\n  initilizeActionMenu: function initilizeActionMenu() {\n    var self = this;\n    $(\"#ui-bizagi-wp-project-plan-activity-action .menu\", self.content).menu({\n      select: $.proxy(self.onSelectMenu, self) }).\n    removeClass(\"ui-widget-content\");\n  },\n\n  /**\r\n      *\r\n      * @returns dialogBox.formContent\r\n      */\n  initPluginPopupEdition: function initPluginPopupEdition() {\n    var self = this;\n    var popupEditActivity = self.getTemplate(\"activity-action-editionpopup\");\n    self.dialogBox.formContent = popupEditActivity.render({});\n    return self.dialogBox.formContent;\n\n  },\n\n  /**\r\n      *\r\n      * @param element\r\n      */\n  initializeAutoComplete: function initializeAutoComplete(element) {\n    var self = this;\n    var url = self.dataService.serviceLocator.getUrl(\"admin-getUsersList\");\n\n    element.autocomplete({\n      minLength: 2,\n      source: function source(request, response) {\n        $.ajax({\n          url: url,\n          data: {\n            domain: \"\",\n            userName: \"\",\n            fullName: request.term,\n            organization: \"\",\n            pag: 1,\n            pagSize: 100,\n            orderField: \"fullName\" },\n\n          success: function success(data) {\n            response($.map(data.users, function (item) {\n              return {\n                label: item.user,\n                value: item.idUser };\n\n            }));\n          } });\n\n      },\n      select: function select(event, ui) {\n        var name = ui.item.label;\n        element.val(name);\n        self.formEditActivity.IdAssignee = ui.item.value;\n        return false;\n      },\n      focus: function focus() {\n        return false;\n      },\n      change: function change(event, ui) {\n        if (ui.item === null) {\n          self.formEditActivity.IdAssignee = null;\n          self.formEditActivity.assignee.val(\"\");\n        }\n        return false;\n      } });\n\n\n\n  },\n\n  /**\r\n      *\r\n      * @param element\r\n      */\n  initializeDatePicker: function initializeDatePicker(element) {\n    var self = this;\n    element.datepicker({\n      onSelect: function onSelect() {\n        self.formEditActivity.duration.val(\"\");\n        self.estimatedFinishDateTime = self.formEditActivity.date.datepicker(\"getDate\") ? self.formEditActivity.date.datepicker(\"getDate\").getTime() : undefined;\n      } });\n\n    element.datepicker(\"option\", \"dateFormat\", bizagi.util.dateFormatter.getDateFormatByDatePickerJqueryUI());\n  },\n\n  /**\r\n      *\r\n      * @param element\r\n      */\n  initializeSpiner: function initializeSpiner(element) {\n    var self = this;\n    function desactivateDateByDuration(event, newValue) {\n      var value = newValue || $(event.target).val();\n      if (bizagi.util.isNumeric(value) && parseInt(value, 10) > 0) {\n        self.formEditActivity.date.val(\"\");\n        self.estimatedFinishDateTime = undefined;\n      } else {\n        $(event.target).val(\"\");\n      }\n    }\n\n    element.spinner({\n      min: 1,\n      max: 1000,\n      placeHolder: bizagi.localization.getResource(\"workportal-hours\"),\n      change: function change(event) {\n        desactivateDateByDuration(event);\n      },\n      spin: function spin(event, ui) {\n        desactivateDateByDuration(event, ui.value);\n      } });\n\n  },\n\n  /***\r\n      * Events\r\n      * @param event\r\n      */\n\n  onDeleteDate: function onDeleteDate(event) {\n    var self = this;\n    if (event.keyCode === 8) {\n      $(event.target).val(\"\");\n      self.fieldDurationActive(true);\n    }\n  },\n\n  /**\r\n      *\r\n      * @param event\r\n      */\n  onTypeDuration: function onTypeDuration(event) {\n    var self = this;\n    var $target = $(event.target);\n    if ($target.val() !== \"\") {\n      self.estimatedFinishDateTime = undefined;\n    } else {\n      self.activateElement(self.form.date);\n    }\n  },\n\n  /**\r\n      * When select menu\r\n      * @param event\r\n      * @param ui\r\n      */\n  onSelectMenu: function onSelectMenu(event, ui) {\n    var self = this;\n    if ($(event.currentTarget).find(\"i\").length === 0) {\n      var item = $(ui.item).data(\"item\");\n      switch (item) {\n        case \"edit\":\n          self.onClickOpenPopupEdition();\n          break;}\n\n    }\n  },\n\n  /**\r\n      *\r\n      */\n  onClickOpenPopupEdition: function onClickOpenPopupEdition() {\n    var self = this;\n    self.initializeTempleteAndEvents();\n    self.dialogBox.formContent.dialog({\n      resizable: false,\n      draggable: false,\n      height: \"auto\",\n      width: \"600px\",\n      modal: true,\n      title: bizagi.localization.getResource(\"workportal-project-plan-title-activity-properties\"),\n      maximize: true,\n      open: $.proxy(self.onOpenPopupEdition, self),\n      close: $.proxy(self.onClosePopupEdition, self) });\n\n  },\n\n  /**\r\n     *\r\n     */\n  onOpenPopupEdition: function onOpenPopupEdition() {\n    var self = this;\n    var currentActivity = self.params.plan.activities.filter(function (activity) {\n      return activity.id.toUpperCase() === self.params.plan.idActivitySelected.toUpperCase();\n    })[0];\n\n    var activityDate = currentActivity && !bizagi.util.isEmpty(currentActivity.estimatedFinishDate) ? currentActivity.estimatedFinishDate : \"\";\n    if (!isNaN(activityDate)) {\n      activityDate = bizagi.util.dateFormatter.formatInvariant(new Date(activityDate));\n    }\n    var estimatedFinishDate = activityDate ? bizagi.util.dateFormatter.getDateFromInvariant(activityDate) : \"\";\n    var isMinimumDate = estimatedFinishDate instanceof Date ? estimatedFinishDate.getTime() < self.getDateServer() : false;\n\n    self.initializeAutoComplete(self.formEditActivity.assignee);\n    self.initializeDatePicker(self.formEditActivity.date);\n    self.initializeSpiner(self.formEditActivity.duration);\n\n    if (currentActivity.userAssigned) {\n      self.setUserAssignedById(currentActivity.userAssigned);\n    }\n\n    self.formEditActivity.date.datepicker(\"option\", \"minDate\", new Date(self.getDateServer()));\n\n    if (currentActivity.estimatedFinishDate && isMinimumDate) {\n      self.formEditActivity.date.datepicker(\"option\", \"minDate\", estimatedFinishDate); //set minimum because, if date is past\n    }\n\n    if (currentActivity.estimatedFinishDate) {\n      if (estimatedFinishDate) {\n        self.formEditActivity.date.datepicker(\"setDate\", estimatedFinishDate);\n      }\n      self.estimatedFinishDateTime = currentActivity.estimatedFinishDate;\n    }\n\n    if (currentActivity.duration) {\n      self.formEditActivity.duration.val(parseInt(currentActivity.duration, 10));\n    }\n  },\n\n  /**\r\n      * When close popup edition\r\n      */\n  onClosePopupEdition: function onClosePopupEdition() {\n    var self = this;\n    self.removePopupWidgets();\n  },\n\n  /**\r\n      *\r\n      * @param idUser\r\n      */\n  setUserAssignedById: function setUserAssignedById(idUser) {\n    var self = this;\n    //Show images users\n    self.callGetDataUsers(idUser).then(function (responseUsers) {\n      self.formEditActivity.assignee.val(responseUsers[0].name);\n    });\n    self.formEditActivity.IdAssignee = idUser;\n  },\n\n  /**\r\n      *\r\n      * @param event\r\n      */\n  onClickPopupButtonCancel: function onClickPopupButtonCancel(event) {\n    var self = this;\n    event.preventDefault();\n    self.removePopupWidgets();\n  },\n\n  /**\r\n     * Remove popup widgets\r\n     */\n  removePopupWidgets: function removePopupWidgets() {\n    var self = this;\n    self.formEditActivity.assignee.next().find(\"span\").html(\"\");\n    self.dialogBox.formContent.remove();\n    $(\"#ui-datepicker-div\").remove();\n  },\n\n  /**\r\n      *  Triggered when click update plan activity\r\n      */\n  onClickPopupButtonUpdate: function onClickPopupButtonUpdate() {\n    var self = this;\n    if (self.validateParamsOfFormEditActivity()) {\n      var currentActivity = self.params.plan.activities.filter(function (activity) {\n        return activity.id.toUpperCase() === self.params.plan.idActivitySelected.toUpperCase();\n      })[0];\n      var idUserAssigned = self.formEditActivity.IdAssignee || bizagi.currentUser.idUser;\n      if (self.formEditActivity.duration.val() != \"\") {\n        self.params.plan.activities.filter(function (activity) {\n          return activity.id.toUpperCase() === self.params.plan.idActivitySelected.toUpperCase();\n        })[0].estimatedFinishDate = \"\";\n      }\n      var updateActivity = {\n        progress: currentActivity.progress,\n        id: currentActivity.id,\n        startDate: currentActivity.startDate,\n        duration: self.formEditActivity.duration.val(),\n        userAssigned: idUserAssigned,\n        allowEdition: currentActivity.allowEdition,\n        description: currentActivity.description,\n        name: currentActivity.name,\n        idPlan: currentActivity.idPlan,\n        estimatedFinishDate: self.estimatedFinishDateTime,\n        finishDate: currentActivity.finishDate,\n        items: currentActivity.items };\n\n      $.when(self.dataService.editActivityPlan(updateActivity)).done(function () {\n        currentActivity = $.extend(currentActivity, updateActivity);\n        self.removePopupWidgets();\n\n        if (self.beforeUserAssignedActivity !== self.formEditActivity.IdAssignee) {\n          self.pub(\"notify\", {\n            type: \"ACTIVITYPLANCOMMENTS\",\n            args: $.extend(self.params, { refreshAllWidgets: true }) });\n\n        } else\n        {\n          self.pub(\"notify\", {\n            type: self.params.showContextByMenuDashboard,\n            args: self.params });\n\n        }\n\n        self.removePopupWidgets();\n        self.notifier.showSucessMessage(bizagi.localization.getResource(\"workportal-project-plan-activity-update-message\"));\n      });\n    }\n  },\n\n  /***\r\n      * Events\r\n      */\n  onClickFavorite: function onClickFavorite(event) {\n    event.preventDefault();\n    var self = this;\n    var favoriteOptions = {};\n    if ($(event.target).hasClass(\"bz-icon-star-outline\")) {\n      favoriteOptions = {\n        idObject: self.params.idCase,\n        favoriteType: \"CASES\" };\n\n      $.when(self.dataService.addFavorite(favoriteOptions)).done(function (favoritesData) {\n        self.params.guidFavorite = favoritesData.idFavorites;\n        $(event.target).removeClass(\"bz-icon-star-outline\");\n        $(event.target).addClass(\"bz-icon-star\");\n      });\n    } else\n    {\n      favoriteOptions = {\n        idObject: self.params.guidFavorite,\n        favoriteType: \"CASES\" };\n\n      $.when(self.dataService.delFavorite(favoriteOptions)).done(function () {\n        $(event.target).addClass(\"bz-icon-star-outline\");\n        $(event.target).removeClass(\"bz-icon-star\");\n      });\n    }\n  },\n\n  /**\r\n      * Clean events and plugins\r\n      */\n  clean: function clean() {\n    var self = this;\n    self.unsub(\"LOAD_INFO_ACTIVITY_SUMMARY\", $.proxy(self.onNotifyLoadInfoActivityExecution, self));\n    self.unsub(\"EXPANDED_RIGHT_SIDEBAR\", $.proxy(self.onNotifyExpandedRightSidebar, self));\n  },\n\n  /**\r\n      * Validate form edit plan activity\r\n      * @returns {boolean}\r\n      */\n  validateParamsOfFormEditActivity: function validateParamsOfFormEditActivity() {\n    var self = this;\n    var userAssigned = self.formEditActivity.assignee;\n    if (userAssigned.val() && userAssigned.val() !== \"\" && self.formEditActivity.IdAssignee) {\n      return true;\n    } else {\n      var messageValidationField = bizagi.localization.getResource(\"workportal-general-error-field-required\");\n      messageValidationField = messageValidationField.replace(\"{0}\", bizagi.localization.getResource(\"workportal-project-plan-assignee\").toLowerCase());\n      userAssigned.next().find(\"span\").html(messageValidationField);\n      return false;\n    }\n  },\n\n  /**\r\n      * Call services\r\n      */\n  callGetDataUsers: function callGetDataUsers(csvIdUsers) {\n    var self = this,\n    defer = $.Deferred();\n    var params = {\n      userIds: csvIdUsers,\n      width: 50,\n      height: 50 };\n\n\n    self.dataService.getUsersData(params).always(function (response) {\n      defer.resolve(response);\n    });\n    return defer.promise();\n  } });\n\n\nbizagi.injector.register(\"bizagi.workportal.widgets.project.plan.activity.action\", [\"workportalFacade\", \"dataService\", \"notifier\", bizagi.workportal.widgets.project.plan.activity.action]);","/*\r\n *   Name: Bizagi Workportal Desktop Project Plan Activity Time\r\n *   Author: Elkin Fernando Siabato Cruz\r\n */\n/***\r\n     * TODO IMPORTANT: This widget is development with TDD, test this file when changes\r\n     */\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.project.plan.activity.time\", {}, {\n\n  /*\r\n                                                                                                       *   Constructor\r\n                                                                                                       *\r\n                                                                                                       */\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    //Constants\n    self.EXECUTING_ACTIVITY = \"EXECUTING\";\n    self.FINISHED_ACTIVITY = \"FINISHED\";\n\n    //Regional\n    self.datePickerRegional = bizagi.localization.getResource(\"datePickerRegional\");\n\n    //Load templates\n    self.loadTemplates({\n      \"plan-time-main\": bizagi.getTemplate(\"bizagi.workportal.desktop.project.plan.activity.time\").concat(\"#project-plan-activity-time\") });\n\n  },\n\n  renderContent: function renderContent() {\n    var self = this;\n    self.content = $(\"<div></div>\");\n    return self.content;\n  },\n\n  postRender: function postRender() {\n    var self = this;\n    self.sub(\"LOAD_INFO_ACTIVITY_SUMMARY\", $.proxy(self.onNotifyLoadInfoActivitySummary, self));\n  },\n\n  /**\r\n      * Notifies when an event is raised\r\n      */\n  onNotifyLoadInfoActivitySummary: function onNotifyLoadInfoActivitySummary(event, params) {\n    var self = this;\n    self.params = $.extend(self.params, params.args);\n    self.getContent().empty();\n\n    var currentActivity = self.params.plan.activities.filter(function (activity) {\n      return activity.id === self.params.plan.idActivitySelected;\n    })[0];\n\n    if (currentActivity.startDate) {\n      self.getStateActivity(currentActivity);\n\n      var argsTemplate = {\n        time: {\n          fromDate: self.getFormattedDate(new Date(self.getFirstDate(currentActivity))) } };\n\n\n      var dataProgressWidget = self.getDataByScenarios(currentActivity, true);\n\n      $.when(dataProgressWidget.unitTime).done(function (auxUnitTime) {\n        dataProgressWidget = $.extend(dataProgressWidget, {\n          unitTime: auxUnitTime });\n\n        self.updateWidget($.extend(argsTemplate.time, dataProgressWidget));\n      });\n\n    }\n  },\n  updateWidget: function updateWidget(argsTemplate) {\n    var self = this;\n    var $content = self.getContent().empty();\n    var contentTemplate = self.getTemplate(\"plan-time-main\");\n\n    var relativeTime = bizagi.util.dateFormatter.getRelativeTime(new Date(Date.now() - argsTemplate.unitTime.minutes * 60 * 1000), null, false);\n\n    var messageDescripionDifference = bizagi.localization.getResource(\"workportal-project-activity-state-\" + argsTemplate.keywordResource);\n    argsTemplate.messageTime = messageDescripionDifference.replace(\"%s\", relativeTime);\n\n    contentTemplate.\n    render(argsTemplate).\n    appendTo($content);\n\n    //Begin Adjust status bar next to the number days\n    var $barRemainingDate = $(\".remaining-days .time-remaining\", $content);\n    var widthNumberDays = $(\".remaining-days .days\", $content).width();\n    $barRemainingDate.css(\"padding-left\", (widthNumberDays + 7).toString() + \"px\");\n\n    var $barCompletedDate = $(\".remaining-days .bar-completed\", $content);\n\n    $barCompletedDate.css(\"width\", argsTemplate.percentBar + \"%\");\n    //End Adjust status bar next to the number days\n\n  },\n  getStateActivity: function getStateActivity(activity) {\n    var self = this;\n    if (activity.finishDate) {\n      activity.currentState = self.FINISHED_ACTIVITY;\n      return self.FINISHED_ACTIVITY;\n    } else\n    {\n      activity.currentState = self.EXECUTING_ACTIVITY;\n      return self.EXECUTING_ACTIVITY;\n    }\n  },\n  getFirstDate: function getFirstDate(activity) {\n    var self = this;\n    if (activity.currentState === self.EXECUTING_ACTIVITY) {\n      return activity.startDate;\n    } else {\n      return activity.finishDate;\n    }\n  },\n  getDataByScenarios: function getDataByScenarios(activity) {\n    var self = this;\n    var response = {\n      colorBar: null,\n      percentBar: 100,\n      keywordResource: null,\n      unitTime: null };\n\n    var params = {};\n    switch (activity.currentState) {\n      case self.EXECUTING_ACTIVITY:\n        response.keywordResource = \"opened\";\n        response.colorBar = self.getColorByCreatedAndEstimatedDate(activity);\n\n        params = {\n          idUser: bizagi.currentUser.idUser,\n          fromDate: activity.startDate,\n          toDate: Date.now() };\n\n        response.unitTime = self.callGetEffectiveDuration(params);\n\n        break;\n      case self.FINISHED_ACTIVITY:\n        response.colorBar = \"Gray\";\n        response.keywordResource = \"closed\";\n        params = {\n          idUser: bizagi.currentUser.idUser,\n          fromDate: activity.finishDate,\n          toDate: Date.now() };\n\n        response.unitTime = self.callGetEffectiveDuration(params);\n        break;}\n\n    return response;\n  },\n\n  getColorBar: function getColorBar(activity) {\n    var self = this;\n    return self.getDataByScenarios(activity).colorBar;\n  },\n  getPercentBar: function getPercentBar(activity) {\n    var self = this;\n    return self.getDataByScenarios(activity).percentBar;\n  },\n  getKeywordResourceDescriptionBar: function getKeywordResourceDescriptionBar(activity) {\n    var self = this;\n    return self.getDataByScenarios(activity).keywordResource;\n  },\n  getUnitTime: function getUnitTime(activity) {\n    var self = this;\n    return self.getDataByScenarios(activity).unitTime;\n  },\n\n  getColorByCreatedAndEstimatedDate: function getColorByCreatedAndEstimatedDate(activity) {\n    var self = this;\n    var response = \"Red\";\n    if (activity.estimatedFinishDate) {\n      if (Date.now() < activity.estimatedFinishDate) {\n        var theSameDay = new Date().getUTCDate() === new Date(activity.estimatedFinishDate).getUTCDate();\n        if (theSameDay) {\n          response = \"Yellow\";\n        } else\n        {\n          response = \"Green\";\n        }\n      }\n    }\n    return response;\n  },\n\n  getFormattedDate: function getFormattedDate(dateObj) {\n    var self = this;\n    var monthsNames = self.datePickerRegional.monthNames;\n    var shortMonth = dateObj.getMonth();\n\n    return monthsNames[shortMonth] + \" \" + bizagi.util.dateFormatter.formatDate(dateObj, \"dd hh:mm tt\", bizagi.localization.getResource(\"datePickerRegional\"));\n  },\n\n  /**\r\n      * Call services\r\n      */\n  callGetEffectiveDuration: function callGetEffectiveDuration(params) {\n    var self = this;\n    var d = $.Deferred();\n    $.when(\n    self.dataService.getEffectiveDuration(params)).\n    done(function (data) {\n      d.resolve(data);\n    });\n    return d.promise();\n  } });\n\n\n\nbizagi.injector.register(\"bizagi.workportal.widgets.project.plan.activity.time\", [\"workportalFacade\", \"dataService\", bizagi.workportal.widgets.project.plan.activity.time], true);","/*\r\n *   Name: Bizagi Workportal Desktop Project Plan Activity Progress\r\n *   Author: Elkin Fernando Siabato Cruz\r\n */\n\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.project.plan.activity.progress\", {}, {\n\n  /*\r\n                                                                                                           *   Constructor\r\n                                                                                                           */\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    self.plugins = {};\n    self.dialogBox = {};\n\n    //Load templates\n    self.loadTemplates({\n      \"plan-progress-main\": bizagi.getTemplate(\"bizagi.workportal.desktop.project.plan.activity.progress\").concat(\"#project-plan-activity-progress\"),\n      \"plan-progress-popup-edit\": bizagi.getTemplate(\"bizagi.workportal.desktop.project.plan.activity.progress\").concat(\"#project-plan-activity-edit-progress\") });\n\n  },\n\n  renderContent: function renderContent() {\n    var self = this;\n    self.content = $(\"<div></div>\");\n    return self.content;\n  },\n\n  postRender: function postRender() {\n    var self = this;\n    self.sub(\"LOAD_INFO_ACTIVITY_SUMMARY\", $.proxy(self.onNotifyLoadInfoActivityExecution, self));\n    self.sub(\"UPDATE_ITEMS_FROM_FORMRENDER\", $.proxy(self.onNotifyUpdateItemFromRender, self));\n  },\n\n  /**\r\n      * Notifies when an event is raised\r\n      */\n  onNotifyLoadInfoActivityExecution: function onNotifyLoadInfoActivityExecution(event, params) {\n    var self = this;\n    self.params = $.extend(self.params, params.args);\n    var $content = self.getContent().empty();\n\n    var activityToShow = self.params.plan.activities.filter(function (activity) {\n      return activity.id.toUpperCase() == self.params.plan.idActivitySelected.toUpperCase();\n    })[0];\n\n    var argsTemplate = {};\n    argsTemplate.valuePercentBarComplete = 0;\n    argsTemplate.progress = {\n      progress: activityToShow.progress,\n      canEdit: activityToShow.items.length === 0 };\n\n\n    if (argsTemplate.progress.progress) {\n      argsTemplate.valuePercentBarComplete = argsTemplate.progress.progress;\n    }\n\n    //Update widget\n    var templateMain = self.getTemplate(\"plan-progress-main\");\n    templateMain.render(argsTemplate).appendTo($content);\n\n    self.plugins.popupEditProgress = self.initPluginPopupEditProgress();\n\n    var popupEditProgress = self.plugins.popupEditProgress;\n\n    self.formEditProgress = {\n      sliderProgress: $(\"#sliderProgress\", popupEditProgress).slider({\n        orientation: \"horizontal\",\n        range: \"min\",\n        max: 100,\n        width: 100,\n        from: 5,\n        to: 50,\n        step: 1,\n        value: argsTemplate.valuePercentBarComplete,\n        slide: $.proxy(self.onChangesliderProgress, self),\n        change: $.proxy(self.onChangesliderProgress, self) }).\n      each(function () {\n        var vals = $(this).slider(\"option\", \"max\") - $(this).slider(\"option\", \"min\");\n        for (var i = 0; i <= vals; i += 10) {\n          var el = $(\"<label class='step'>\" + i + \"</label>\").css(\"left\", i / vals * 100 + \"%\");\n          $(this).append(el);\n        }\n      }),\n      numericTextBoxPlugin: $(\"#inputProgressNumericTextBox\", popupEditProgress).spinner({\n        format: \"n0\",\n        min: 0,\n        max: 100,\n        spin: $.proxy(self.onChangeNumericTextBoxProgress, self),\n        change: $.proxy(self.onChangeNumericTextBoxProgress, self),\n        value: argsTemplate.valuePercentBarComplete,\n        decimals: 0 }),\n\n      buttonChangeProgress: $(\"#button-accept-change-progress\", popupEditProgress),\n      buttonCancel: $(\"#button-cancel-change-progress\", popupEditProgress) };\n\n\n    //Handlers\n    $(\".action-open-popup-edit-progress\", $content).on(\"click\", $.proxy(self.onShowPopupEditProgress, self));\n\n    self.formEditProgress.buttonCancel.on(\"click\", $.proxy(self.onClickCancel, self));\n    self.formEditProgress.buttonChangeProgress.on(\"click\", $.proxy(self.onSubmitFormChangeProgress, self));\n\n    self.updateProgressUI(argsTemplate.valuePercentBarComplete);\n    self.formEditProgress.numericTextBoxPlugin.spinner(\"value\", argsTemplate.valuePercentBarComplete);\n\n  },\n\n  onNotifyUpdateItemFromRender: function onNotifyUpdateItemFromRender(event, params) {\n    var self = this;\n    var listItems = params.args.items;\n    var activityWork = params.args.activityWork;\n\n    var progress;\n    if (listItems.length > 0) {\n      //Hide edit progress\n      $(\".action-open-popup-edit-progress\", self.content).hide();\n    } else {\n      $(\".action-open-popup-edit-progress\", self.content).show();\n    }\n    //set new progress\n    $(\".bz-wp-timestamp span\", self.content).text(activityWork);\n    $(\".bz-wp-progress-bar\", self.content).css(\"width\", activityWork + \"%\");\n\n  },\n\n  updateProgressUI: function updateProgressUI(newPercentProgress) {\n    var self = this,\n    $content = self.getContent();\n\n    $(\".bz-wp-timestamp span\", $content).text(newPercentProgress);\n\n    //Begin Adjust status bar next to the number days\n    var $barRemainingDate = $(\".remaining-days .time-remaining\", $content);\n    var widthNumberDays = $(\".remaining-days .days\", $content).width();\n    $barRemainingDate.css(\"padding-left\", (widthNumberDays + 7).toString() + \"px\");\n\n    var $barCompletedDate = $(\".remaining-days .bar-completed\", $content);\n\n    $barCompletedDate.css(\"width\", newPercentProgress.toString() + \"%\");\n    //End Adjust status bar next to the number days\n  },\n\n  initPluginPopupEditProgress: function initPluginPopupEditProgress() {\n    var self = this;\n    var templatePopupEditProgress = self.getTemplate(\"plan-progress-popup-edit\");\n    self.dialogBox.formContent = templatePopupEditProgress.render();\n    return self.dialogBox.formContent;\n\n  },\n  /*\r\n      * UI\r\n      */\n\n  onShowPopupEditProgress: function onShowPopupEditProgress() {\n    var self = this;\n\n    self.dialogBox.formContent.dialog({\n      resizable: false,\n      draggable: false,\n      height: \"auto\",\n      width: \"600px\",\n      modal: true,\n      title: bizagi.localization.getResource(\"workportal-project-plan-progress-title\"),\n      maximize: true,\n      open: $.proxy(self.onOpenPopupPlan, self),\n      close: function close() {\n        self.dialogBox.formContent.dialog(\"destroy\");\n        self.dialogBox.formContent.detach();\n      } });\n\n\n    self.previusValueProgress = self.formEditProgress.sliderProgress.slider(\"value\");\n\n  },\n\n  onChangeNumericTextBoxProgress: function onChangeNumericTextBoxProgress(event) {\n    var self = this;\n    var newValue = self.formEditProgress.numericTextBoxPlugin.spinner(\"value\");\n    self.formEditProgress.sliderProgress.slider(\"value\", newValue);\n  },\n\n  onChangesliderProgress: function onChangesliderProgress(event) {\n    var self = this;\n    var newValue = self.formEditProgress.sliderProgress.slider(\"value\");\n    self.formEditProgress.numericTextBoxPlugin.spinner(\"value\", newValue);\n  },\n\n  onClickCancel: function onClickCancel(event) {\n    event.preventDefault();\n    var self = this;\n\n    self.dialogBox.formContent.dialog(\"destroy\");\n    self.dialogBox.formContent.detach();\n    //return before value progress\n    self.formEditProgress.sliderProgress.slider(\"value\", self.previusValueProgress);\n    self.formEditProgress.numericTextBoxPlugin.spinner(\"value\", self.previusValueProgress);\n  },\n\n  onSubmitFormChangeProgress: function onSubmitFormChangeProgress(event) {\n    event.preventDefault();\n    var self = this;\n\n    self.formEditProgress.buttonChangeProgress.prop(\"disabled\", true);\n\n    var activityToShow = self.params.plan.activities.filter(function (activity) {\n      return activity.id == self.params.plan.idActivitySelected;\n    })[0];\n    var params = $.extend(activityToShow, {\n      progress: self.formEditProgress.numericTextBoxPlugin.spinner(\"value\"),\n      idPlan: self.params.plan.id });\n\n    $.when(self.dataService.editActivityPlan(params)).done(function () {\n      self.formEditProgress.buttonChangeProgress.prop(\"disabled\", false);\n      activityToShow.progress = self.formEditProgress.numericTextBoxPlugin.spinner(\"value\");\n      self.updateProgressUI(activityToShow.progress);\n      self.dialogBox.formContent.dialog(\"destroy\");\n      self.dialogBox.formContent.detach();\n    });\n  } });\n\n\n\nbizagi.injector.register(\"bizagi.workportal.widgets.project.plan.activity.progress\", [\"workportalFacade\", \"dataService\", bizagi.workportal.widgets.project.plan.activity.progress], true);","/*\r\n *   Name: Bizagi Workportal Desktop Project Plan Activity Subprocesses Controller\r\n *   Author: Elkin Fernando Siabato Cruz\r\n */\n\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.project.plan.activity.subprocesses\", {}, {\n  /*\r\n                                                                                                               *   Constructor\r\n                                                                                                               */\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    //Load templates\n    self.loadTemplates({\n      \"project-subprocesses\": bizagi.getTemplate(\"bizagi.workportal.desktop.project.plan.activity.subprocesses\").concat(\"#project-plan-activity-plan-subprocesses-wrapper\"),\n      \"project-subprocesses-tootip-custom-properties\": bizagi.getTemplate(\"bizagi.workportal.desktop.project.plan.activity.subprocesses\").concat(\"#project-activity-plan-subprocesses-tooltip-custom-properties-wrapper\") });\n\n  },\n\n  /*\r\n      * Renders the template defined in the widget\r\n      */\n  renderContent: function renderContent() {\n    var self = this;\n    self.content = $(\"<div></div>\");\n    return self.content;\n  },\n\n  /*\r\n      * links events with handlers\r\n      */\n  postRender: function postRender() {\n    var self = this;\n  } });\n\n\n\nbizagi.injector.register(\"bizagi.workportal.widgets.project.plan.activity.subprocesses\", [\"workportalFacade\", \"dataService\", bizagi.workportal.widgets.project.plan.activity.subprocesses]);","/*\r\n *   Name: Bizagi Workportal Desktop Project Plan Activity Parent\r\n *   Author: Elkin Fernando Siabato Cruz\r\n */\n\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.project.plan.activity.parent\", {}, {\n\n  /*\r\n                                                                                                         *   Constructor\r\n                                                                                                         */\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    //Load templates\n    self.loadTemplates({\n      \"plan-parent-main\": bizagi.getTemplate(\"bizagi.workportal.desktop.project.plan.activity.parent\").concat(\"#project-plan-activity-parent\") });\n\n  },\n\n  renderContent: function renderContent() {\n    var self = this;\n    self.content = $(\"<div></div>\");\n    return self.content;\n  },\n\n  postRender: function postRender() {\n    var self = this;\n    self.sub(\"LOAD_INFO_ACTIVITY_SUMMARY\", $.proxy(self.onNotifyLoadInfoActivityExecution, self));\n  },\n\n  /**\r\n      * Notifies when an event is raised\r\n      */\n\n  onNotifyLoadInfoActivityExecution: function onNotifyLoadInfoActivityExecution(event, params) {\n    var self = this;\n    self.params = $.extend(self.params, params.args);\n    var $content = self.getContent().empty();\n\n    $.when(self.dataService.getPlanParent({ idPlan: self.params.plan.id })).done(function (planParent) {\n      self.params.plan.parent = planParent;\n      if (self.params.plan.parent) {\n        var argsTemplate = {};\n        argsTemplate.parent = {\n          idParent: self.params.plan.parent.radNumber,\n          nameParent: self.params.plan.parent.displayName,\n          idCase: self.params.plan.parent.idCase,\n          idWorkflow: self.params.plan.parent.idWorkflow,\n          idWorkItem: self.params.plan.parent.idWorkItem,\n          idTask: self.params.plan.parent.idTask };\n\n\n        //Update widget\n        var contentTemplate = self.getTemplate(\"plan-parent-main\");\n        contentTemplate.\n        render(argsTemplate).\n        appendTo($content);\n\n        $(\"#go-to-parent-case\", $content).on(\"click\", $.proxy(self.onClickGoToParentCase, self));\n      }\n    });\n\n\n  },\n\n  onClickGoToParentCase: function onClickGoToParentCase(event) {\n    event.preventDefault();\n    var self = this;\n    self.routingExecute($(event.target).closest(\"#go-to-parent-case\"));\n  } });\n\n\nbizagi.injector.register(\"bizagi.workportal.widgets.project.plan.activity.parent\", [\"workportalFacade\", \"dataService\", bizagi.workportal.widgets.project.plan.activity.parent], true);","/*\r\n *   Name: Bizagi Workportal Desktop Project Plan Activity Users Controller\r\n *   Author: Elkin Fernando Siabato Cruz\r\n */\n\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.project.plan.activity.users\", {}, {\n  /*\r\n                                                                                                        *   Constructor\r\n                                                                                                        */\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n\n    self.usersMap = {};\n    self.plugins = {};\n    self.usersInformation = [];\n    self.globalHandlersService = bizagi.injector.get('globalHandlersService');\n    self.usersAssignees = [];\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    //Load templates\n    //The load template the users plan because they are the same\n    self.loadTemplates({\n      \"plan-users-main\": bizagi.getTemplate(\"bizagi.workportal.desktop.project.plan.users\").concat(\"#project-plan-users\") });\n\n  },\n\n  /*\r\n      * Renders the template defined in the widget\r\n      */\n  renderContent: function renderContent() {\n    var self = this;\n    self.content = $(\"<div></div>\");\n    return self.content;\n  },\n\n  /*\r\n      * links events with handlers\r\n      */\n  postRender: function postRender() {\n    var self = this;\n    self.sub(\"LOAD_INFO_ACTIVITY_SUMMARY\", $.proxy(self.onNotifyLoadInfoActivityExecution, self));\n  },\n\n  /*\r\n      * validate if the activity is running\r\n      */\n  activityRunning: function activityRunning(activity) {\n    return activity.startDate !== null && activity.finishDate === null;\n  },\n\n  onNotifyLoadInfoActivityExecution: function onNotifyLoadInfoActivityExecution(event, params) {\n    var self = this,\n    cvsGuidUsers = [],\n    activitiesUsers = [],\n    $content = self.getContent().empty();\n    self.params = $.extend(self.params, params.args);\n\n    var ownerUserId = self.params.plan.idUserCreator;\n    var ownerUserGuid = self.params.plan.idUserCreator;\n\n    activitiesUsers.push({ \"idUser\": ownerUserId, \"guidUser\": ownerUserGuid, \"userType\": [\"owner\"] });\n    self.usersMap[\"-\" + ownerUserId + \"-\"] = {\n      picture: \"\",\n      id: ownerUserId,\n      guid: ownerUserGuid,\n      name: \"\",\n      userType: [\"owner\"] };\n\n    cvsGuidUsers.push(ownerUserGuid);\n    $.each(self.params.plan.activities, function (index, activity) {\n      if (self.activityRunning(activity)) {\n        var userId = activity.userAssigned;\n        var userGuid = activity.userAssignedGuid;\n        if (userId === ownerUserId) {\n          if ($.inArray(\"Assigned\", activitiesUsers[0].userType) === -1) {\n            activitiesUsers[0].userType.push(\"Assigned\");\n            self.usersMap[\"-\" + ownerUserId + \"-\"].userType.push(\"Assigned\");\n          }\n        } else\n        {\n          self.usersMap[\"-\" + userId + \"-\"] = {\n            picture: \"\",\n            id: userId,\n            name: \"\",\n            userType: [\"Assigned\"] };\n\n          if (activitiesUsers.filter(function (user) {return user.idUser == userId;}).length === 0) {\n            var id = userGuid ? userGuid : userId;\n            activitiesUsers.push({ \"idUser\": id, \"userGuid\": id, \"userType\": [\"Assigned\"] });\n            cvsGuidUsers.push(id);\n          }\n        }\n      }\n    });\n    self.activitiesUsers = activitiesUsers;\n\n    //Update widget\n    var contentTemplate = self.getTemplate(\"plan-users-main\");\n    contentTemplate.\n    render({\n      assignee: self.justAssignees(activitiesUsers),\n      label: bizagi.localization.getResource(\"workportal-project-plan-assignee\") }).\n\n    appendTo($content);\n    self.addEventHandlersModal();\n    $.when(self.callGetDataUsers(cvsGuidUsers)).then(function () {\n      self.showCreatorInformation(ownerUserId);\n      self.renderUserProfilesAndImages();\n    });\n  },\n\n  /**\r\n      * return standar userAdapter information with only assigned users\r\n      * @param {Array} allUsers \r\n      */\n  justAssignees: function justAssignees(allUsers) {\n    var usersAssignee = [];\n    allUsers.map(function (user) {\n      var isOwner = user.userType.indexOf(\"owner\") !== -1;\n      var isAssignee = user.userType.indexOf(\"Assigned\") !== -1;\n      usersAssignee.push(usersAdapter.createJsonUserInfo(user.idUser, \"\", \"\", \"\", \"\", \"\", isAssignee, isOwner, [], []));\n    });\n    return usersAdapter.justAssignees(usersAssignee);\n  },\n\n  /**\r\n      * show the information of the creator case\r\n      * @param {string} ownerUserId guid user creator\r\n      */\n  showCreatorInformation: function showCreatorInformation(ownerUserId) {\n    var self = this;\n    var userCreator = self.usersMap[\"-\" + ownerUserId + \"-\"];\n    var userInfo = usersAdapter.createJsonUserInfo(\n    userCreator.id,\n    userCreator.name,\n    userCreator.username,\n    userCreator.picture ? userCreator.picture : undefined,\n    userCreator.email,\n    userCreator.name.getInitials(),\n    false,\n    true,\n    [],\n    []);\n\n    self.content.find(\".ui-bizagi-wp-project-plan-users .ui-bizagi-wp-project-users-creator-info\").userinformation(self, { user: userInfo });\n  },\n\n  /**\r\n      * UI\r\n      */\n\n  renderUserProfilesAndImages: function renderUserProfilesAndImages() {\n    var self = this;\n    $.each(self.usersMap, function (i, obj) {\n      var $li = $(\".ui-bizagi-wp-userlist li[data-iduser=\" + obj.id + \"]\", self.content);\n      if (obj.picture !== \"\") {\n        $li.find(\"img\").prop(\"src\", obj.picture);\n      } else\n      {\n        $li.find(\"img\").hide();\n        if (obj.name !== undefined) {\n          $li.find(\"span\").html(obj.name.getInitials());\n        } else\n        {\n          console.log(\"obj.name is undefined\");\n        }\n\n      }\n    });\n    $(\".ui-bizagi-wp-userlist li\", self.content).not(\".moreUsers\").on('mouseenter', function (ev) {\n      var $target = $(ev.target);\n      var userId = $(this).data(\"iduser\");\n      var userSelected;\n      $.each(self.usersMap, function (i, obj) {\n        if (obj.id === userId)\n        userSelected = obj;\n      });\n      var usersActivities = self.usersAssignees.find(function (assignee) {\n        return assignee.userAssigned === userSelected.id;\n      });\n      var activities = [];\n      if (usersActivities)\n      usersActivities.activities.map(function (activity) {\n        activities.push(activity.name);\n      });\n      var userParam = usersAdapter.createJsonUserInfo(userSelected.id, userSelected.name, userSelected.username, userSelected.picture, userSelected.email, userSelected.name.getInitials(), self.getIsAssignee(userSelected), self.getIsOwner(userSelected), activities, undefined);\n\n      $target.parent().usertooltip(self, { target: $target, user: userParam });\n    });\n  },\n\n  getIsAssignee: function getIsAssignee(userSelected) {\n    if (userSelected.userType.indexOf(\"Assigned\") > -1) {\n      return true;\n    }\n    return false;\n  },\n\n  getIsOwner: function getIsOwner(userSelected) {\n    if (userSelected.userType.indexOf(\"owner\") > -1) {\n      return true;\n    }\n    return false;\n  },\n  /*\r\n      *  Get data for users\r\n      */\n  callGetDataUsers: function callGetDataUsers(cvsGuidUsers) {\n    var self = this,\n    params = {},\n    defer = $.Deferred();\n    params = {\n      usersGuids: cvsGuidUsers.join(),\n      width: 50,\n      height: 50 };\n\n    $.when(self.dataService.getUsersData(params)).always(function (response) {\n      self.usersInformation = response;\n      for (var i = 0, length = response.length; i < length; i += 1) {\n        if (typeof response[i].name === \"undefined\") {\n          bizagi.log(response[i] + \" Id Not Found\", response, \"error\");\n        } else {\n          if (self.usersMap[\"-\" + response[i].id + \"-\"]) {\n            self.usersMap[\"-\" + response[i].id + \"-\"].picture += response[i].picture ? \"data:image/png;base64,\" + response[i].picture : \"\";\n            self.usersMap[\"-\" + response[i].id + \"-\"].name = response[i].name || \"\";\n            self.usersMap[\"-\" + response[i].id + \"-\"].username = response[i].username || \"\";\n            self.usersMap[\"-\" + response[i].id + \"-\"].email = response[i].email || \"\";\n          } else\n          {\n            console.log(\"The object is undefined\");\n          }\n        }\n      }\n      self.getUsersAssignees();\n      defer.resolve();\n    });\n    return defer.promise();\n  },\n\n  getUsersAssignees: function getUsersAssignees() {\n    var self = this;\n    for (var i = 0; i < self.usersInformation.length; i++) {\n      self.usersAssignees.push(self.getUserAssignee(self.usersInformation[i]));\n    }\n\n  },\n\n  getUserAssignee: function getUserAssignee(user) {\n    var self = this;\n    var tasks = [];\n    $.each(self.params.plan.activities, function (index, activity) {\n      var userId = activity.userAssigned;\n      if (userId === user.id && self.activityRunning(activity)) {\n        tasks.push({ \"name\": activity.name });\n      }\n    });\n    user.tasks = tasks;\n    var types = self.activitiesUsers.find(function (actUser) {\n      return actUser.idUser == user.id;\n    });\n    user.userType = types.userType;\n\n    var userAssignees = usersAdapter.createJsonUserInfo(\n    user.id,\n    user.name,\n    user.username,\n    user.picture ? \"data:image/png;base64,\" + user.picture : undefined,\n    user.email,\n    user.name.getInitials(),\n    self.getIsAssignee(user),\n    self.getIsOwner(user),\n    user.tasks,\n    []);\n\n    return userAssignees;\n  },\n\n  addEventHandlersModal: function addEventHandlersModal() {\n    var self = this;\n    $(\".moreUsers\").click(function (event) {\n      event.preventDefault();\n      event.stopPropagation();\n      var usersAssignees = self.usersAssignees || [];\n      self.globalHandlersService.publish(\"showDialogWidget\", {\n        widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_USERS_MODAL,\n        closeVisible: true,\n        data: usersAssignees,\n        maximize: true,\n        modalParameters: {\n          title: bizagi.localization.getResource(\"workportal-project-users-title\") + \" (\" + usersAssignees.length + \")\",\n          width: 790,\n          height: 526,\n          refreshInbox: false } });\n\n\n    });\n  } });\n\n\n\nbizagi.injector.register(\"bizagi.workportal.widgets.project.plan.activity.users\", [\"workportalFacade\", \"dataService\", bizagi.workportal.widgets.project.plan.activity.users], true);"]}