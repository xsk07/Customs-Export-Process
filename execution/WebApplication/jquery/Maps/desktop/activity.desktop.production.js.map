{"version":3,"sources":["jquery/workportal/desktop/widget/project.activity/bizagi.workportal.desktop.widgets.project.activity.js","jquery/workportal/desktop/widget/project.plan.activities.sidebar/bizagi.workportal.desktop.widgets.project.plan.activities.sidebar.js","jquery/workportal/desktop/widget/project.plan.create/bizagi.workportal.desktop.project.plan.create.js","jquery/workportal/desktop/widget/project.plan.edit/bizagi.workportal.desktop.project.plan.edit.js","jquery/workportal/desktop/widget/project.plan.template.create/bizagi.workportal.desktop.project.plan.template.create.js","jquery/workportal/js/desktop/widget/bizagi.workportal.desktop.widgets.reassigncase.js","jquery/workportal/desktop/widget/project.content.dashboard/bizagi.workportal.desktop.widgets.project.content.dashboard.js","jquery/workportal/desktop/widget/project.dashboard.menu/bizagi.workportal.desktop.widgets.project.dashboard.menu.js","jquery/workportal/desktop/widget/project.dashboard.menu.activity/bizagi.workportal.desktop.widgets.project.dashboard.menu.activity.js","jquery/workportal/desktop/widget/project.activity.plan.sidebar/bizagi.workportal.desktop.widgets.project.activity.plan.sidebar.js","jquery/workportal/desktop/widget/project.caseState/bizagi.workportal.desktop.widgets.project.caseState.js","jquery/workportal/desktop/widget/project.caseState/cancelCase/bizagi.workportal.desktop.widgets.project.cancelCase.js","jquery/workportal/desktop/widget/project.activityState/bizagi.workportal.desktop.widgets.project.activityState.js","jquery/workportal/desktop/widget/project.processState/bizagi.workportal.desktop.widgets.project.processState.js","jquery/workportal/desktop/widget/project.users/bizagi.workportal.desktop.widgets.project.users.js","jquery/workportal/desktop/widget/project.subprocesses.data/bizagi.workportal.desktop.widgets.project.subprocesses.data.js","jquery/workportal/desktop/widget/project.events/bizagi.workportal.desktop.widgets.project.events.js","jquery/workportal/desktop/widget/project.subprocesses/bizagi.workportal.desktop.widgets.project.subprocesses.js","jquery/workportal/desktop/widget/project.activity.description/bizagi.workportal.project.activity.description.js"],"names":["_typeof","obj","Symbol","iterator","constructor","prototype","bizagi","workportal","widgets","widget","extend","init","workportalFacade","dataService","params","this","_super","loadTemplates","project-plan-activities-sidebar","getTemplate","concat","renderContent","template","content","render","injector","register","project","plan","activities","sidebar","notifier","contextualized","plan-create","dialogBox","$","postRender","initPlugins","formContent","elements","inputName","inputTemplate","buttonSave","buttonCancel","on","proxy","onClickSavePlan","closeDialogBox","get","dialog","detach","templateGuid","showPopupAddPlan","self","html","getTemplatesByParentWorkItem","parentWorkItem","guidWorkItem","done","data","comboDataSource","combo","id","uicombo","isEditable","itemValue","itemText","name","onChange","value","ui","val","css","keydown","event","keyCode","preventDefault","length","show","hide","fail","resizable","draggable","height","width","modal","title","localization","getResource","maximize","close","validateParams","createNewPlan","parentWorkItemRaw","paramsNewPlan","idUserCreator","currentUser","idUser","undefined","startDate","creationDate","description","currentState","waitForCompletion","dueDate","idTemplate","when","sendDataInsertPlan","then","response","users","servicesPD","services","behaviors","projectDashboard","menuPlanDashboard","showCommentsOptionMenu","getMenuDashboardSecurity","menuSecurity","isVisibleButtonComments","showFilesOptionMenu","isVisibleButtonFiles","showTimeLineOptionMenu","isVisibleButtonTimeLine","util","encodeHtml","getFirstParentInfo","args","radNumber","hasDiscussionsOrComment","pub","showSucessMessage","printf","nameValidation","next","find","defer","Deferred","postPlan","always","responseText","xhr","status","resolve","reject","promise","create","planToEdit","plans.manager.popup.edit.plan","editDialogBox","closeEditDialogBox","inputDueDate","datepicker","showPopup","initEditDialogBox","decodeHtmlEntities","inputDesc","inputWaitForCompletion","prop","dateFormatter","getDateFormatByDatePickerJqueryUI","Date","ev","editPlanTemplate","saveEditedPlan","validateEditDialogBoxParams","getParamsUpdatePlan","updateParams","updatePlan","paramsEditPlan","dueDateRaw","date","getTime","getEndHourWorkingByDate","dateTime","edit","idPlanSelected","plan-template-create","onClickSaveTemplate","showPopupAddTemplatePlan","validateSaveDialogBoxParams","idPlan","createTemplateByPlan","admin","caseSearch","admin.case.search","admin.case.search.fields","admin.case.search.button","admin.case.search.result","admin.case.search.pagination","admin.case.search.invalidate","admin.case.search.reassign","admin.case.search.reassign.form","admin.case.search.action.result","useNewEngine","getWidgetName","BIZAGI_WORKPORTAL_WIDGET_REASSIGN_CASE","tmpl","loadtemplates","generalContentTmpl","fieldsContentTmpl","buttonContentTmpl","resultContentTmpl","paginationTmpl","invalidateContentTmpl","reassignContentTmpl","reassignFormTmpl","actionResultContentTmpl","maxElemShow","maxPageToShow","processNavigation","setupData","selectedTasks","cases","selectedTasksToShow","setupInitialData","setupDatePicker","setupProcessTree","setupMainButtons","push","idCase","idWorkItem","taskItem","idtask","showReassignForm","fields","getContent","buttonBackAction","selectedUserId","selectedUserName","searchParams","processTree","remove","append","controlType","dateFormat","treeRoutSelected","processtree","canvas","setupUsersSearchForm","def","usersTable","userstable","userLinkLabel","parentDef","userId","userName","assignEventReassignLinks","findResults","pageToShow","Page","getAdminCasesList","resultList","totalRecords","records","totalPages","total","rows","showCasesSearchResultFrame","setupActionsButton","paginationHtml","pageToshow","summaryWrapper","pagerData","pagination","page","pages","i","pageNumber","bizagiPagination","actualPage","listElement","clickCallBack","options","showMessageBox","error","log","processedItems","preprocessResultList","headers","resultTemplate","invalidateForm","reassignForm","setupActivitiesLink","setupGraphicQueryEvent","processResultItem","rowItem","taskElements","taskElementsLength","currentTaskObj","taskColumnIndexLength","rowItemData","idWorkflow","idWorkFlow","resultArray","firstRowItem","taskColumnIndex","j","columnIndex","resultTaskArray","fieldName","columnsID","caseNumber","process","task","taskDueDate","k","Array","isArray","splice","processTaskObjectUser","indexOf","processTaskObject","processTaskObjectDate","estimatedSolutionDate","processCreationDate","processDueDate","idworkflow","attr","taskData","totalTask","taskObject","taskName","colorState","idTask","assignee","invalidateCases","selectedCases","each","showConfirmationBox","reason","action","JSON","stringify","abortReassignItems","abortResult","showActionResultFrame","showReassignTasksFrame","tasks","split","reassignTasks","idNewUser","reassignCurrent","reassignResult","result","type","items","itemsFailed","resultStatus","deleted","reassigned","innerHTML","replace","buttons","widgetButtonSet","click","e","idAppToSend","idCategorytoSend","idProcessToSend","errorMessage","errorFieldName","selectedProcessRoute","getTreeRouteSelected","h_action","I_ProcessState","h_idApp","I_Users","eventAsTask","orderType","order","orderField","I_radNumber","I_idWFClass","I_USERFULLNAME","I_USERPOSITION","I_From__CreationDate","I_To__CreationDate","h_idWFClassAuth","I_idCategory","I_idApplication","PageSize","isDate","backToMainForm","backToCases","publish","actions","BIZAGI_WORKPORTAL_ACTION_ROUTING","getAttribute","columnOrderId","columnOrderBy","columnOrderName","showGraphicQuery","project-content-dashboard","setTimeout","window","trigger","dashboard","onDiscussionsMenuStatusChange","updateDiscussionsIcons","sub","toggle","clean","unsub","menu","project-dashboard-menu","contextsLeftSidebarCaseDashboard","forEach","context","updateView","idActivitySelected","$content","empty","showContextByMenuDashboard","argsTemplate","showFormOverview","menuDashboard","showFormActivity","isAdhocProcess","isEnableFeature","showPlanOptionMenu","contextPlanOptionMenu","contextFormActivityOptionMenu","appendTo","toUpperCase","addClass","siblings","removeClass","handlerEvents","loadContentById","$item","target","closest","hasClass","getLevelNavigator","currentLevelNavigator","parseInt","nameItemNavigator","newLevelNavigator","refreshLastItemBreadcrumb","histName","level","subMenuHandler","$comments","$files","$timeline","idWorkitem","referrer","off","activity","base","project-activity","templateHomeActivity","renderForm","withOutGlobalForm","isClosed","belongCurrentUser","hasGlobalForm","parseBoolean","showForm","isOfflineForm","messageForm","where","renderContainer","errorTemplate","message","resources","_forButton","_textActionNoActivitiesButton","getMessageFromNetworkState","online","errorHtml","textButton","text","onClickButtonNoActivities","bind","actionGoBack","proxyPrefix","serviceLocator","database","rendering","facade","setContext","subscribe","execute","triggerparams","fromTask","fromWorkItemId","formsRenderVersion","onClose","widgetName","defaultWidget","renderingFacade","resizeLayout","goBack","goToBack","call","getWidgetByCookie","_key","_to","routing","RETURN_TO","_goBack","BAM","QUERIES","INBOX","supportNav","project-activity-plan-sidebar","isAdhoc","hasRelatedPlan","planChild","showPlanAction","$contentWidget","loadPlanForm","planParent","getPlanAsParent","getPlanParent","tryCatch","contextsSidebarActivity","datePickerRegional","project-caseState","project-caseState-remaining","project-cancel-case-button","isFavoriteCase","isFavorite","parse","showCaseNumber","timeZoneName","creationDateObject","getDateWithTimezone","creationDateFormat","getFormattedDate","solutionDateObject","solutionDate","solutionDateFormat","currentDate","calculateDataForTemplate","idCaseForGraphicQuery","idProcess","idAdhocProcess","showHelpUrl","helpUrl","paramsEffectiveDuration","isOpen","fromDate","toDate","differenceCreationToCurrent","actualDate","relativeTime","getRelativeTime","relativeTimeState","colorStateCase","percentCompleteBar","showCancelCase","_showCancelCase","contentTemplate","buttonCancelCase","widgetParameters","BIZAGI_WORKPORTAL_WIDGET_CANCEL_CASE","dialogClass","modalParameters","refreshInbox","closeVisible","validateUrlWellFormed","security","urlHelp","isEmpty","_startShowCancelCase","onClickFavorite","goToCase","showBackNextNavigation","_navigatorWidget","_start","getShowCancelCase","dateObj","monthsNames","monthNames","shortMonth","getMonth","bizagiLanguage","BIZAGI_LANGUAGE","substring","formatDate","favoriteOptions","idObject","favoriteType","addFavorite","favoritesData","guidFavorite","idFavorites","delFavorite","open","callGetEffectiveDuration","d","getEffectiveDuration","cntxtSidebarActivity","getBackCase","getNextCase","getListKey","lstIdCases","key","nextCase","backCase","caseState","project-cancel-case-wrapper","project-cancel-case-wrapper-error","defineButtons","class","cancelCaseRequest","$loader","showErrorAlertDialog","cancelCase","showToastError","bizagiConfig","environment","message_error","statusText","showTextIsRequired","desktop","project-activityState-wrapper","currentWorkitem","filter","objectWorkItem","activityName","state","activityIsEvent","isEvent","initDateObject","entryDateWorkItem","initDateFormat","estimatedSolutionDateObject","estimatedSolutionDateFormat","updateTemplateWidget","initilizeActionMenu","allowsReassign","btReassing","btShareActivity","onClickMenuReasign","onClickShareActivity","onCloseSaveDialogBox","loader","startAndThen","closeDialogWidget","button","getShareActivity","parent","unbind","showErrorMessage","diffMillisecondsCurrentToEstimated","diffMillisecondsCreationToSolution","paramsEffectiveDurationOpened","currentDateExceededEstimatedDate","paramsEffectiveDurationInitialToEstimated","differenceCreatedToCurrent","differenceCurrentToEstimated","differenceInitialToEstimated","showEstimatedSolutionDate","percentBar","getPercentBar","percent","canShareActivity","isShared","totalMinutes","sectionMinutes","Math","round","override","enableShareActivity","shareActivityTooltip","activityButton","texto","tooltip","tooltipClass","position","my","at","of","collision","activityState","project-process-state","displayName","onClickGoToParentCase","routingExecute","processState","relatedusers","plugins","loadedUsers","project-users","onRenderFinish","showCreatorInformation","typesAssignUser","createdBy","typeName","userIds","getUsersData","user","userInfo","usersAdapter","createJsonUserInfo","username","picture","email","getInitials","userinformation","responseSubprocessState","responseSubprocess","newValue","auxArrayListSubprocessesState","auxArrayListSubprocesses","newItem","jQuery","Class","project-subprocesses-tootip-custom-properties","initializeTooltip","selectorTooltip","indexSubprocess","idCustData","itemsFinded","item","getContentTooltip","originalEvent","$id","not","hover","stop","fadeTo","fadeOut","textLI","templateTooltip","rowCustomProperty","nameProperty","valueProperty","arrayCustomsProperties","auxValueProperty","subprocessData","getSubprocessData","custData","custDataTypes","custFields","formatMonetaryCell","formatBoolean","formatDecimalCell","objectTemplate","nameSubprocess","contentTableCustomProperties","subProcessData","subProcess","subProcesses","subProcPersonalized","customFields","CustFields","Object","keys","subprocesses","project-events","getArgsTemplate","responseArgsTemplate","onClickGoEvent","callSummaryCaseEvents","responseEvents","elementEvent","autoSave","summaryCaseEvents","events","project-subprocesses","summarySubProcess","organizeDataForSubprocesses","showSubProcess","tempSubprocesses","renderWidget","onClickGoSubprocess","pluginTooltip","project-activity-description","getWorkitemDescription","callTaskDescription","taskDescriptionParams","container","taskDescriptionWidget","tskDescription"],"mappings":"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","sourcesContent":["function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /*\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: Bizagi Workportal Desktop Project Activity Controller\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: Elkin Fernando Siabato Cruz\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\nbizagi.workportal.widgets.project.base.extend(\"bizagi.workportal.widgets.project.activity\", {}, {\n  /*\r\n                                                                                                   *   Constructor\r\n                                                                                                   */\n  init: function init(workportalFacade, dataService, params) {\n\n    var self = this;\n\n    //Call base\n    self._super(workportalFacade, dataService, params);\n\n    //Load templates\n    self.loadTemplates({\n      \"project-activity\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.project.activity\").concat(\"#project-activity-wrapper\") });\n\n\n  },\n\n  /*\r\n      * Renders the template defined in the widget\r\n      */\n  renderContent: function renderContent() {\n    var self = this;\n    var templateHomeActivity = self.getTemplate(\"project-activity\");\n    self.content = templateHomeActivity.render({});\n    return self.content;\n  },\n\n  /*\r\n      * Post render and links events with handlers\r\n      */\n  postRender: function postRender() {\n\n    var self = this;\n    self.renderForm({\n      idCase: self.params.idCase,\n      idWorkitem: self.params.idWorkitem,\n      idTask: self.params.idTask,\n      radNumber: self.params.radNumber,\n      withOutGlobalForm: self.params.withOutGlobalForm || false,\n      isClosed: self.params.isClosed,\n      belongCurrentUser: self.params.belongCurrentUser,\n      hasGlobalForm: bizagi.util.parseBoolean(self.params.hasGlobalForm),\n      showForm: bizagi.util.parseBoolean(self.params.showForm),\n      isOfflineForm: self.params.isOfflineForm || false,\n      messageForm: self.params.messageForm || \"\",\n      where: self.params.where });\n\n\n  },\n\n  renderForm: function renderForm(params) {\n\n    var self = this,resultRender;\n    var renderContainer = self.getContent();\n\n    var runningAndAssignToOtherUser = !params.isClosed && !params.belongCurrentUser;\n\n    if (runningAndAssignToOtherUser && !params.hasGlobalForm) {\n      params.withOutGlobalForm = true;\n    }\n\n    if (!params.withOutGlobalForm) {\n      // it has't activities and global form\n      var proxyPrefix = _typeof(self.dataService.serviceLocator.proxyPrefix) != undefined ? self.dataService.serviceLocator.proxyPrefix : \"\";\n      var database = _typeof(self.dataService.database) != undefined ? self.dataService.database : \"\";\n\n\n      // Load render page\n      var rendering = self.rendering = new bizagi.rendering.facade({ \"proxyPrefix\": proxyPrefix, \"database\": database });\n      // Executes rendering into render container\n      bizagi.util.setContext(params);\n\n      self.rendering.subscribe(\"onLoadDataItemsFromFormActivityPlan\", function (event, params) {\n        self.pub(\"notify\", {\n          type: \"UPDATE_ITEMS_FROM_FORMRENDER\",\n          args: params });\n\n      });\n      self.rendering.subscribe(\"rendering-formRendered\", function (event, params) {\n        self.pub(\"notify\", {\n          type: \"ON_RENDER_FINISH\",\n          args: params });\n\n      });\n\n      var resultRender = rendering.execute($.extend(params, {\n        canvas: renderContainer,\n        menu: self.menu }));\n\n\n      // Attach handler to render container to subscribe for routing events\n      renderContainer.bind(\"routing\", function (context, triggerparams) {\n        // Executes routing action\n\n        var params = {\n          action: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,\n          idCase: self.params.idCase,\n          fromTask: self.params.fromTask || self.params.idTask,\n          fromWorkItemId: self.params.fromWorkItemId || self.params.idWorkitem,\n          isOfflineForm: self.params.isOfflineForm,\n          formsRenderVersion: self.params.formsRenderVersion,\n          onClose: function onClose() {\n            // If the user closes the dialog we need to redirect to inbox widget\n            self.publish(\"changeWidget\", {\n              widgetName: bizagi.util.defaultWidget() });\n\n          } };\n\n        params = $.extend(params, triggerparams);\n        self.publish(\"executeAction\", params);\n      });\n    } else\n    {\n      var errorTemplate = self.workportalFacade.getTemplate(\"info-message\"),\n      message = params.messageForm !== \"\" ? params.messageForm : self.resources.getResource(\"render-without-globalform\"),\n      _forButton = self._textActionNoActivitiesButton(params.where);\n\n      if (typeof self.params != \"undefined\" && typeof self.params.isOfflineForm !== \"undefined\" && self.params.isOfflineForm == true) {\n        message = bizagi.util.getMessageFromNetworkState(self.dataService.online);\n      }\n\n      var errorHtml = $.tmpl(errorTemplate, {\n        message: message,\n        textButton: _forButton.text });\n\n      // Remove loading icon from summary container\n      errorHtml.appendTo(renderContainer);\n\n      $(\"#ui-bizagi-btn-go-to-inbox\", errorHtml).click(self.onClickButtonNoActivities.bind(self, _forButton.actionGoBack));\n\n      resultRender = $.Deferred();\n      resultRender.fail();\n\n    }\n    // Keep reference to rendering facade\n    self.renderingFacade = rendering;\n\n    // Resize layout\n    self.resizeLayout();\n  },\n\n  /**\r\n      * Go to inbox when click on the button \"Go to inbox of \r\n      * @param {Boolean} goBack \r\n      */\n  onClickButtonNoActivities: function onClickButtonNoActivities(goBack) {\n    var self = this,\n    _inbox = function _inbox() {\n      self.publish(\"changeWidget\", {\n        widgetName: self.workportalFacade.workportal.getWidgetByCookie(true) });\n\n    },\n    _goBack = function _goBack() {\n      var backNavigator = bizagi.injector.get(\"backNavigator\");\n      backNavigator.goToBack.call(self);\n    };\n    goBack ? _goBack() : _inbox();\n  },\n\n  /**\r\n      * return text an action for button on no have activities\r\n      * @param {actions.routing.RETURN_TO} where to go\r\n      */\n  _textActionNoActivitiesButton: function _textActionNoActivitiesButton(where) {\n    var self = this,\n    _key,\n    _to = bizagi.workportal.actions.routing.RETURN_TO,\n    _goBack = true;\n    switch (where) {\n      case _to.BAM:\n      case _to.QUERIES:\n        _key = \"workportal-without-globalform-button-to-results\";\n        break;\n\n      case _to.INBOX:\n        _key = \"workportal-without-globalform-button-to-inbox\";\n        break;\n\n      default:\n        _key = \"render-without-globalform-button\";\n        _goBack = false;\n        break;}\n\n    return {\n      text: self.resources.getResource(_key),\n      actionGoBack: _goBack };\n\n  },\n\n  clean: function clean() {\n\n  } });\n\n\nbizagi.injector.register('bizagi.workportal.widgets.project.activity', ['workportalFacade', 'dataService', bizagi.workportal.widgets.project.activity], true);","/*\r\n *   Name: Bizagi Workportal Project File Sidebar\r\n *   Author: David Romero Estrada\r\n */\n\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.project.plan.activities.sidebar\", {}, {\n\n  /*\r\n                                                                                                           *   Constructor\r\n                                                                                                           */\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    params = params || {};\n\n    //Load templates\n    self.loadTemplates({\n      \"project-plan-activities-sidebar\": bizagi.getTemplate(\"bizagi.workportal.desktop.project.plan.activities.sidebar\").concat(\"#project-plan-activities-sidebar\") });\n\n\n  },\n\n  /*\r\n     * Renders the template defined in the widget\r\n     */\n  renderContent: function renderContent() {\n    var self = this;\n\n    var template = self.getTemplate(\"project-plan-activities-sidebar\");\n    self.content = template.render({});\n\n    return self.content;\n  } });\n\n\nbizagi.injector.register('bizagi.workportal.widgets.project.plan.activities.sidebar', ['workportalFacade', 'dataService', bizagi.workportal.widgets.project.plan.activities.sidebar], true);","/**\r\n * Name: Bizagi Workportal Desktop Create plan\r\n */\n\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.project.plan.create\", {}, {\n  /**\r\n                                                                                                * Constructor\r\n                                                                                                */\n  init: function init(workportalFacade, dataService, notifier, params) {\n    var self = this;\n    self.params = params;\n    self.contextualized;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n    self.notifier = notifier;\n\n    //Load template\n    self.loadTemplates({\n      \"plan-create\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.project.plan.create\").concat(\"#plan-create\") });\n\n\n    self.dialogBox = {};\n  },\n\n  renderContent: function renderContent() {\n    var self = this;\n    self.content = $(\"<div></div>\");\n    return self.content;\n  },\n\n  postRender: function postRender() {\n    var self = this;\n    self.initPlugins();\n  },\n\n  initPlugins: function initPlugins() {\n    var self = this,\n    template = self.getTemplate('plan-create');\n    self.dialogBox.formContent = template.render({});\n    self.dialogBox.elements = {\n      inputName: $('#input-name-plan', self.dialogBox.formContent),\n      inputTemplate: $('#templates-plan', self.dialogBox.formContent),\n      buttonSave: $('#button-accept-create-plan', self.dialogBox.formContent),\n      buttonCancel: $('#button-cancel-create-plan', self.dialogBox.formContent) };\n\n    self.dialogBox.elements.buttonSave.on('click', $.proxy(self.onClickSavePlan, self));\n    self.dialogBox.elements.buttonCancel.on('click', $.proxy(self.closeDialogBox, self));\n\n    self.notifier = bizagi.injector.get('notifier');\n  },\n\n  closeDialogBox: function closeDialogBox() {\n    var self = this;\n    self.dialogBox.formContent.dialog('destroy');\n    self.dialogBox.formContent.detach();\n    self.dialogBox.templateGuid = '';\n  },\n\n  showPopupAddPlan: function showPopupAddPlan(params, dataService, contextualized) {\n    var self = this;\n    self.params = params;\n    self.dataService = dataService;\n    self.contextualized = contextualized;\n    self.content = $(\"<div></div>\");\n    self.initPlugins();\n\n    self.dialogBox.elements.inputTemplate.html('');\n    self.dataService.getTemplatesByParentWorkItem({ parentWorkItem: params.guidWorkItem }).done(function (data) {\n      var comboDataSource = { combo: [], id: 'templates' };\n      comboDataSource.combo = data;\n      self.dialogBox.elements.inputTemplate.uicombo({\n        isEditable: false,\n        data: comboDataSource,\n        itemValue: function itemValue(obj) {\n          return obj.id;\n        },\n        itemText: function itemText(obj) {\n          return obj.name;\n        },\n        onChange: function onChange(obj) {\n          var value = obj.ui.data('value');\n          self.dialogBox.elements.inputTemplate.val(value);\n          self.dialogBox.templateGuid = value;\n        }, css: 'display: none' });\n\n\n      self.dialogBox.elements.inputTemplate.keydown(function () {\n        if (event.keyCode == 8 || event.keyCode == 46) {\n          event.preventDefault();\n          self.dialogBox.templateGuid = '';\n          self.dialogBox.elements.inputTemplate.val('');\n          $('input', self.dialogBox.elements.inputTemplate).val('');\n        }\n      });\n\n      if (data.length > 0) {\n        $(\".field-template\", self.dialogBox.formContent).show();\n      } else\n      {\n        $(\".field-template\", self.dialogBox.formContent).hide();\n      }\n    }).fail(function () {\n      $(\".field-template\", self.dialogBox.formContent).hide();\n    });\n    self.dialogBox.formContent.dialog({\n      resizable: false,\n      draggable: false,\n      height: 'auto',\n      width: '600px',\n      modal: true,\n      title: bizagi.localization.getResource('workportal-project-plan-popup-title-add-plan'),\n      maximize: false,\n      close: function close() {\n        self.dialogBox.formContent.dialog('destroy');\n        self.dialogBox.formContent.detach();\n      } });\n\n  },\n\n  onClickSavePlan: function onClickSavePlan(event) {\n    event.preventDefault();\n    var self = this;\n    if (self.validateParams()) {\n      self.createNewPlan();\n    }\n\n  },\n\n  createNewPlan: function createNewPlan() {\n    var self = this;\n    var parentWorkItemRaw = self.params.guidWorkItem || null;\n\n    var paramsNewPlan = {\n      idUserCreator: bizagi.currentUser.idUser,\n      id: undefined,\n      startDate: null,\n      creationDate: null,\n      parentWorkItem: parentWorkItemRaw,\n      description: null,\n      currentState: 'PENDING',\n      name: self.dialogBox.elements.inputName.val(),\n      waitForCompletion: true,\n      dueDate: null,\n      contextualized: self.contextualized,\n      idTemplate: self.dialogBox.templateGuid };\n\n    $.when(self.sendDataInsertPlan(paramsNewPlan)).then(function (response) {\n      paramsNewPlan = $.extend(paramsNewPlan, { id: response.id });\n      paramsNewPlan.activities = [];\n      paramsNewPlan.users = [];\n\n      //Set security menuDashboard\n      var servicesPD = new bizagi.workportal.services.behaviors.projectDashboard(self.dataService);\n      self.params.menuPlanDashboard = {};\n      self.params.menuPlanDashboard.showCommentsOptionMenu =\n      servicesPD.getMenuDashboardSecurity(bizagi.menuSecurity).isVisibleButtonComments;\n      self.params.menuPlanDashboard.showFilesOptionMenu =\n      servicesPD.getMenuDashboardSecurity(bizagi.menuSecurity).isVisibleButtonFiles;\n      self.params.menuPlanDashboard.showTimeLineOptionMenu =\n      servicesPD.getMenuDashboardSecurity(bizagi.menuSecurity).isVisibleButtonTimeLine;\n\n      //XSS Security\n      paramsNewPlan.name = bizagi.util.encodeHtml(paramsNewPlan.name);\n\n      $.when(servicesPD.getFirstParentInfo(paramsNewPlan.id, paramsNewPlan.contextualized)).done(function (response) {\n        var args = {\n          paramsNewPlan: paramsNewPlan,\n          radNumber: response.id,\n          hasDiscussionsOrComment: response.hasDiscussionsOrComment };\n\n\n        self.pub('planCreated', args);\n\n        self.closeDialogBox();\n        self.notifier.showSucessMessage(printf(bizagi.localization.getResource('workportal-project-plan-created'), ''));\n      });\n    });\n  },\n\n  validateParams: function validateParams() {\n    var self = this;\n    var name = self.dialogBox.elements.inputName;\n    if (name.val() && name.val() !== '') {\n      return true;\n    } else {\n      var nameValidation = bizagi.localization.getResource('workportal-project-plan-popup-field-name-required');\n      name.next().find('span').html(nameValidation);\n      return false;\n    }\n  },\n\n  sendDataInsertPlan: function sendDataInsertPlan(params) {\n    var self = this;\n    var defer = $.Deferred();\n    $.when(self.dataService.postPlan(params)).always(function (response, responseText, xhr) {\n      if (xhr.status === 201) {\n        defer.resolve(response);\n      } else\n      {\n        defer.reject();\n      }\n    });\n    return defer.promise();\n  } });\n\n\nbizagi.injector.register('bizagi.workportal.widgets.project.plan.create', ['workportalFacade', 'dataService', 'notifier', bizagi.workportal.widgets.project.plan.create]);","/**\r\n * Name: Bizagi Workportal Desktop Edit plan\r\n */\n\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.project.plan.edit\", {}, {\n  /**\r\n                                                                                              * Constructor\r\n                                                                                              */\n  init: function init(workportalFacade, dataService, notifier, params) {\n    var self = this;\n    self.params = params;\n    self.planToEdit;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n    self.notifier = notifier;\n\n    //Load template\n    self.loadTemplates({\n      'plans.manager.popup.edit.plan': bizagi.getTemplate('bizagi.workportal.desktop.widgets.project.plan.edit').concat('#plans-manager-popup-edit-plan') });\n\n\n    self.editDialogBox = {};\n  },\n\n  renderContent: function renderContent() {\n    var self = this;\n    self.content = $(\"<div></div>\");\n    return self.content;\n  },\n\n  postRender: function postRender() {\n    var self = this;\n  },\n\n  closeEditDialogBox: function closeEditDialogBox() {\n    var self = this;\n    self.editDialogBox.elements.inputDueDate.datepicker(\"destroy\");\n    self.editDialogBox.formContent.dialog('destroy');\n    self.editDialogBox.formContent.detach();\n  },\n\n  showPopup: function showPopup(params, dataService, planToEdit) {\n    var self = this;\n    var defer = $.Deferred();\n    self.planToEdit = planToEdit;\n    self.initEditDialogBox(planToEdit);\n    self.editDialogBox.elements.inputName.val(bizagi.util.decodeHtmlEntities(planToEdit.name));\n    self.editDialogBox.elements.inputDesc.val(bizagi.util.decodeHtmlEntities(planToEdit.description));\n    self.editDialogBox.elements.inputWaitForCompletion.prop(\"checked\", planToEdit.waitForCompletion);\n    self.editDialogBox.elements.inputDueDate.datepicker();\n    self.editDialogBox.elements.inputDueDate.datepicker(\"option\", \"dateFormat\", bizagi.util.dateFormatter.getDateFormatByDatePickerJqueryUI());\n    if (planToEdit.dueDate) {\n      self.editDialogBox.elements.inputDueDate.datepicker('setDate', new Date(planToEdit.dueDate));\n    }\n    self.editDialogBox.formContent.dialog({\n      resizable: false,\n      draggable: false,\n      height: 'auto',\n      width: '600px',\n      modal: true,\n      title: bizagi.localization.getResource('workportal-project-plan-editplan'),\n      maximize: true,\n      close: function close(ev, ui) {\n        self.editDialogBox.elements.inputDueDate.datepicker(\"destroy\");\n        self.editDialogBox.formContent.dialog('destroy');\n        self.editDialogBox.formContent.detach();\n        defer.resolve();\n      } });\n\n    return defer.promise();\n  },\n\n  initEditDialogBox: function initEditDialogBox(plan) {\n    var self = this,\n    editPlanTemplate = self.getTemplate('plans.manager.popup.edit.plan');\n    self.editDialogBox.formContent = editPlanTemplate.render(plan);\n    self.editDialogBox.elements = {\n      inputName: $('#input-name-plan', self.editDialogBox.formContent),\n      inputDesc: $('#input-desc-plan', self.editDialogBox.formContent),\n      inputDueDate: $('#input-dueDate-plan', self.editDialogBox.formContent),\n      inputWaitForCompletion: $('#input-waitForCompletion', self.editDialogBox.formContent),\n      buttonSave: $('#button-accept-edit-plan', self.editDialogBox.formContent),\n      buttonCancel: $('#button-cancel-edit-plan', self.editDialogBox.formContent) };\n\n    self.editDialogBox.elements.buttonSave.on('click', $.proxy(self.saveEditedPlan, self));\n    self.editDialogBox.elements.buttonCancel.on('click', $.proxy(self.closeEditDialogBox, self));\n  },\n\n\n  saveEditedPlan: function saveEditedPlan(event) {\n    event.preventDefault();\n    var self = this;\n    if (self.validateEditDialogBoxParams()) {\n      $.when(self.getParamsUpdatePlan()).done(function (updateParams) {\n        $.when(self.dataService.updatePlan(updateParams)).done(function () {\n          self.closeEditDialogBox();\n          self.pub('planEditedSuccess', {\n            paramsEditPlan: updateParams });\n\n\n        }).fail(function () {\n          self.pub('planEditedFailed');\n        });\n      });\n    }\n  },\n\n  getParamsUpdatePlan: function getParamsUpdatePlan() {\n    var self = this;\n    var defer = $.Deferred();\n    var updateParams = {};\n    updateParams = self.planToEdit;\n\n    updateParams.name = self.editDialogBox.elements.inputName.val();\n    updateParams.description = self.editDialogBox.elements.inputDesc.val();\n    if (self.editDialogBox.elements.inputWaitForCompletion.length !== 0) {\n      updateParams.waitForCompletion = self.editDialogBox.elements.inputWaitForCompletion.prop(\"checked\");\n    }\n\n    var dueDateRaw = self.editDialogBox.elements.inputDueDate.datepicker('getDate');\n    if (dueDateRaw) {\n      var params = {\n        idUser: bizagi.currentUser.idUser,\n        date: dueDateRaw.getTime() };\n\n      $.when(self.dataService.getEndHourWorkingByDate(params)).done(function (data) {\n        updateParams.dueDate = data.dateTime;\n        defer.resolve(updateParams);\n      });\n    } else\n    {\n      defer.resolve(updateParams);\n    }\n\n    return defer.promise();\n  },\n\n\n  validateEditDialogBoxParams: function validateEditDialogBoxParams() {\n    var self = this;\n    var name = self.editDialogBox.elements.inputName;\n    if (name.val() && name.val() !== '') {\n      return true;\n    } else {\n      var nameValidation = bizagi.localization.getResource('workportal-project-plan-popup-field-name-required');\n      name.next().find('span').html(nameValidation);\n      return false;\n    }\n  } });\n\n\nbizagi.injector.register('bizagi.workportal.widgets.project.plan.edit', ['workportalFacade', 'dataService', 'notifier', bizagi.workportal.widgets.project.plan.edit], true);","/**\r\n * Name: Bizagi Workportal Desktop Create plan template\r\n */\n\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.project.plan.template.create\", {}, {\n  /**\r\n                                                                                                         * Constructor\r\n                                                                                                         */\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n    self.params = params;\n    self.contextualized;\n    self.idPlanSelected;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    //Load template\n    self.loadTemplates({\n      \"plan-template-create\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.project.plan.template.create\").concat(\"#plan-template-create\") });\n\n\n    self.dialogBox = {};\n  },\n\n  renderContent: function renderContent() {\n    var self = this;\n    self.content = $(\"<div></div>\");\n    return self.content;\n  },\n\n  postRender: function postRender() {\n    var self = this;\n    self.initPlugins();\n  },\n\n  initPlugins: function initPlugins() {\n    var self = this,\n    template = self.getTemplate('plan-template-create');\n    self.dialogBox.formContent = template.render({});\n    self.dialogBox.elements = {\n      inputName: $('#input-name-template', self.dialogBox.formContent),\n      buttonSave: $('#button-accept-create-template', self.dialogBox.formContent),\n      buttonCancel: $('#button-cancel-create-template', self.dialogBox.formContent) };\n\n    self.dialogBox.elements.buttonSave.on('click', $.proxy(self.onClickSaveTemplate, self));\n    self.dialogBox.elements.buttonCancel.on('click', $.proxy(self.closeDialogBox, self));\n  },\n\n  closeDialogBox: function closeDialogBox() {\n    var self = this;\n    self.dialogBox.formContent.dialog('destroy');\n    self.dialogBox.formContent.detach();\n  },\n\n  showPopupAddTemplatePlan: function showPopupAddTemplatePlan(params, dataService, contextualized, idPlanSelected) {\n    var self = this;\n    self.params = params;\n    self.dataService = dataService;\n    self.contextualized = contextualized;\n    self.idPlanSelected = idPlanSelected;\n    self.content = $(\"<div></div>\");\n    self.initPlugins();\n\n    self.dialogBox.formContent.dialog({\n      resizable: false,\n      draggable: false,\n      height: 'auto',\n      width: '600px',\n      modal: true,\n      title: bizagi.localization.getResource('workportal-project-plan-action-popup-save-as-template'),\n      maximize: false,\n      close: function close(ev, ui) {\n        self.dialogBox.formContent.dialog('destroy');\n        self.dialogBox.formContent.detach();\n      } });\n\n  },\n\n  onClickSaveTemplate: function onClickSaveTemplate(event) {\n    event.preventDefault();\n    var self = this;\n\n    if (self.validateSaveDialogBoxParams()) {\n      var params = {\n        idPlan: self.idPlanSelected,\n        name: self.dialogBox.elements.inputName.val() };\n\n      $.when(self.dataService.createTemplateByPlan(params)).done(function () {\n        self.closeDialogBox();\n        self.pub('planTemplateCreatedSuccess', {});\n      }).fail(function () {\n        self.pub('planTemplateCreatedFailed', {});\n      });\n    }\n\n  },\n\n  validateSaveDialogBoxParams: function validateSaveDialogBoxParams() {\n    var self = this;\n    var name = self.dialogBox.elements.inputName;\n    if (name.val() && name.val() !== '') {\n      return true;\n    } else {\n      var nameValidation = bizagi.localization.getResource('workportal-project-plan-popup-field-name-required');\n      name.next().find('span').html(nameValidation);\n      return false;\n    }\n  } });\n\n\nbizagi.injector.register('bizagi.workportal.widgets.project.plan.template.create', ['workportalFacade', 'dataService', bizagi.workportal.widgets.project.plan.template.create]);","/**\r\n* Name: BizAgi Desktop Widget Reassing Case\r\n* @author NAN\r\n*/\n\n\nbizagi.workportal.widgets.admin.caseSearch.extend(\"bizagi.workportal.widgets.reassigncase\", {}, {\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    //Load templates\n    self.loadTemplates({\n      \"admin.case.search\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.admin.caseSearch\").concat(\"#ui-bizagi-workportal-widget-admin-case-search\"),\n      \"admin.case.search.fields\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.admin.caseSearch\").concat(\"#ui-bizagi-workportal-widget-admin-case-search-fields\"),\n      \"admin.case.search.button\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.admin.caseSearch\").concat(\"#ui-bizagi-workportal-widget-admin-case-search-buttons\"),\n      \"admin.case.search.result\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.admin.caseSearch\").concat(\"#ui-bizagi-workportal-widget-admin-case-search-result\"),\n      \"admin.case.search.pagination\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.admin.caseSearch\").concat(\"#ui-bizagi-workportal-widget-admin-case-search-pagination\"),\n      \"admin.case.search.invalidate\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.admin.caseSearch\").concat(\"#ui-bizagi-workportal-widget-admin-case-search-invalidate\"),\n      \"admin.case.search.reassign\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.admin.caseSearch\").concat(\"#ui-bizagi-workportal-widget-admin-case-search-reassign\"),\n      \"admin.case.search.reassign.form\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.admin.caseSearch\").concat(\"#ui-bizagi-workportal-widget-admin-case-search-reassign-form\"),\n      \"admin.case.search.action.result\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.admin.caseSearch\").concat(\"#ui-bizagi-workportal-widget-admin-case-search-action-result\"),\n      useNewEngine: false });\n\n  },\n  getWidgetName: function getWidgetName() {\n    return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_REASSIGN_CASE;\n  },\n\n  renderContent: function renderContent() {\n    var self = this;\n    var template = self.getTemplate(\"admin.case.search\");\n    var content;\n\n    content = self.content = $.tmpl(template, {});\n    self.loadtemplates();\n    return content;\n  },\n\n\n  loadtemplates: function loadtemplates() {\n    var self = this;\n\n    //Template vars \n    self.generalContentTmpl = self.getTemplate(\"admin.case.search\");\n    self.fieldsContentTmpl = self.getTemplate(\"admin.case.search.fields\");\n    self.buttonContentTmpl = self.getTemplate(\"admin.case.search.button\");\n    self.resultContentTmpl = self.getTemplate(\"admin.case.search.result\");\n    self.paginationTmpl = self.getTemplate(\"admin.case.search.pagination\");\n    self.invalidateContentTmpl = self.getTemplate(\"admin.case.search.invalidate\");\n    self.reassignContentTmpl = self.getTemplate(\"admin.case.search.reassign\");\n    self.reassignFormTmpl = self.getTemplate(\"admin.case.search.reassign.form\");\n    self.actionResultContentTmpl = self.getTemplate(\"admin.case.search.action.result\");\n  },\n\n  postRender: function postRender() {\n    var self = this;\n    self.maxElemShow = 10;\n    self.maxPageToShow = 5;\n\n    //load form data\n    self.processNavigation = [];\n    self.setupData();\n  },\n\n  /*\r\n     * Setup form data\r\n     */\n  setupData: function setupData() {\n    var self = this;\n\n\n    var selectedTasks = {\n      cases: [] };\n\n    var selectedTasksToShow = [];\n\n    self.setupInitialData();\n    self.setupDatePicker();\n    self.setupProcessTree();\n    self.setupMainButtons();\n\n    selectedTasks.cases.push({\n      idCase: self.params.data.idCase,\n      idWorkItem: self.params.data.idWorkItem });\n\n    selectedTasksToShow.push({\n      taskItem: self.params.data.idCase + \": \" + self.params.data.idtask,\n      idWorkItem: self.params.data.idWorkItem });\n\n\n    self.selectedTasks = selectedTasks;\n    self.selectedTasksToShow = selectedTasksToShow;\n    self.showReassignForm(self.content, self.selectedTasksToShow);\n  },\n\n  /*\r\n     * Load form data\r\n     */\n  setupInitialData: function setupInitialData() {\n    var self = this,\n    content = self.getContent(),\n    fields;\n\n    //set self variables to default\n    self.buttonBackAction = \"backToMainForm\";\n    self.selectedUserId = \"\";\n    self.selectedUserName = \"\";\n    self.selectedTasks = \"\";\n    self.selectedTasksToShow = \"\";\n    self.searchParams = \"\";\n    self.processTree = \"\";\n\n\n    //set content form to default\n    $(\"#generalTitle\").html(bizagi.localization.getResource(\"workportal-widget-admincasesearch-subtitle\"));\n    $(\"#mainForm\", content).remove();\n    $(\"#dinamicContent\", content).remove();\n    $(\"#case-search-log-data-buttonset\", content).remove();\n\n    //append fields to wrapper\n    fields = $.tmpl(self.reassignFormTmpl, {});\n    content.append(fields);\n  },\n\n  /*\r\n     * Load dateTime plugin and apply to respective fields\r\n     */\n  setupDatePicker: function setupDatePicker() {\n    var self = this,\n    content = self.getContent();\n\n    $(\".biz-wp-form-datepicker\", content).datepicker({\n      controlType: 'select',\n      dateFormat: 'dd/mm/yy' });\n\n  },\n\n  /*\r\n     * initialize the process tree widget\r\n     */\n  setupProcessTree: function setupProcessTree() {\n    var self = this,\n    content = self.getContent();\n\n    bizagi.treeRoutSelected = [];\n    $(\"#treeLinksId\").remove();\n\n    self.processTree = new bizagi.workportal.widgets.processtree(self.workportalFacade, self.dataService, $.extend(self.params, {\n      canvas: $(\"#processTree\", content) }));\n\n\n    self.processTree.render();\n  },\n\n  /*\r\n     * initialize the users search form widget\r\n     */\n  setupUsersSearchForm: function setupUsersSearchForm() {\n    var self = this,\n    content = self.getContent(),\n    def = $.Deferred();\n\n    $(\"#biz-wp-users-table-form\").html(\"\");\n\n    self.usersTable = new bizagi.workportal.widgets.userstable(self.workportalFacade, self.dataService, $.extend(self.params, {\n      canvas: $(\"#biz-wp-users-table-form\", content),\n      userLinkLabel: [bizagi.localization.getResource(\"workportal-widget-admincasesearch-reassign\")],\n      parentDef: def }));\n\n\n    self.usersTable.render();\n\n    $.when(def).done(function (userId, userName) {\n      self.assignEventReassignLinks(userId, userName);\n    });\n  },\n\n  /*\r\n     * Find cases results using the input data\r\n     */\n  findResults: function findResults(content, params, pageToShow) {\n    var self = this;\n\n    //If there is not a page to Show, begins whith the fist one\n    pageToShow ? params.Page = pageToShow : params.Page = 1;\n\n    $.when(\n    self.dataService.getAdminCasesList(params)).\n    done(function (resultList) {\n\n      //clean old results\n      $(\".biz-wp-table\").remove();\n      $(\".case-search-action-wrapper\").remove();\n      $(\"#biz-wp-table-summary-wrapper\").remove();\n\n      //Keep in track the total Records\n      self.totalRecords = resultList.records;\n      //keep in track the total pages\n      self.totalPages = resultList.total;\n\n      if (resultList.rows.length > 0) {\n\n        self.showCasesSearchResultFrame(content, resultList);\n        self.setupActionsButton(content);\n\n        var pageToshow = self.maxPageToShow > self.totalPages ? self.totalPages : self.maxPageToShow;\n        var summaryWrapper = $(\"#biz-wp-table-pager-wrapper\"),\n        pagerData = {},\n        paginationHtml;\n\n        // show or hide \"load more\" button\n        pagerData.pagination = self.totalPages > 1 ? true : false;\n        pagerData.page = resultList.page;\n        pagerData.pages = {};\n\n        for (var i = 1; i <= pageToshow; i++) {\n          pagerData[\"pages\"][i] = {\n            \"pageNumber\": i };\n\n        }\n\n        //load and append the paginator to the result table\n        paginationHtml = $.tmpl(self.paginationTmpl, pagerData).html();\n        summaryWrapper.append(paginationHtml);\n\n        //add data and behaviour to pager\n        $(\"ul\").bizagiPagination({\n          maxElemShow: self.maxElemShow,\n          totalPages: self.totalPages,\n          actualPage: resultList.page,\n          listElement: $(\"#biz-wp-table-pager-wrapper\"),\n          clickCallBack: function clickCallBack(options) {\n            self.findResults(content, params, options.page);\n          } });\n\n      } else {\n        bizagi.showMessageBox(bizagi.localization.getResource(\"workportal-widget-authentication-log-none\"), \"Bizagi\", \"warning\");\n      }\n\n\n    }).fail(function (error) {\n      bizagi.log(error);\n    });\n  },\n\n  /*\r\n     * Show cases search result frames\r\n     */\n  showCasesSearchResultFrame: function showCasesSearchResultFrame(content, resultList) {\n    var self = this;\n\n    var processedItems = self.preprocessResultList(resultList.headers, resultList);\n    var resultTemplate = $.tmpl(self.resultContentTmpl, {\n      headers: resultList.headers,\n      rows: processedItems });\n\n\n    var invalidateForm = $.tmpl(self.invalidateContentTmpl, {}),\n    reassignForm = $.tmpl(self.reassignContentTmpl, {});\n\n    $(\"#mainForm\", content).hide();\n    $(\"#dinamicContent\", content).html(resultTemplate);\n    $(\".case-search-action-wrapper\", content).append(invalidateForm);\n    $(\".case-search-action-wrapper\", content).append(reassignForm);\n\n    $(\"#generalTitle\").html(bizagi.localization.getResource(\"workportal-widget-admincasesearch-table-title\"));\n    $(\"#btn-admin-case-search-clear\", content).hide();\n    $(\"#btn-admin-case-search\", content).hide();\n    $(\"#btn-admin-case-back\", content).css(\"display\", \"inline\");\n\n    self.setupActivitiesLink(content);\n    self.setupGraphicQueryEvent(content);\n  },\n\n  /*\r\n     *\r\n     */\n  preprocessResultList: function preprocessResultList(headers, resultList) {\n    var self = this;\n\n    var processedItems = [],\n    length = resultList.rows.length,\n    i = 0;\n\n    for (; i < length; i++) {\n      processedItems.push(self.processResultItem(headers, resultList.rows[i]));\n    }\n\n    return processedItems;\n  },\n\n  /*\r\n     * Process each result item\r\n     */\n  processResultItem: function processResultItem(headers, rowItem) {\n    var self = this;\n\n    var rowItemData = rowItem.data,\n    idCase = rowItem.idCase,\n    idWorkflow = rowItem.idWorkFlow;\n\n    var resultArray = [],\n    firstRowItem = [];\n\n    //Handle the task elements\n    var taskElements,\n    taskElementsLength;\n\n    var currentTaskObj;\n\n    var taskColumnIndex = [],\n    taskColumnIndexLength;\n\n    var j = -1,\n    columnIndex = 0;\n\n    var resultTaskArray = false;\n\n\n    firstRowItem.push({\n      id: \"checkCaseAdmin\",\n      value: idCase });\n\n\n    while (j++ < headers.length - 1) {\n\n      switch (headers[j].fieldName) {\n        case self.columnsID.caseNumber:\n          //Insert case number\n          firstRowItem.push({\n            id: \"caseNumber\",\n            value: {\n              'idCase': idCase,\n              'caseNumber': rowItemData[columnIndex] } });\n\n\n\n          columnIndex++;\n          break;\n\n        case self.columnsID.process:\n          //Insert process name\n          firstRowItem.push({\n            id: \"idWorkItem\",\n            value: rowItemData[columnIndex] });\n\n\n          columnIndex++;\n          break;\n\n        case self.columnsID.userName:\n        case self.columnsID.task:\n        case self.columnsID.taskDueDate:\n\n          //Gets the row elements if is not already assigned to taskElements array\n          if (taskElements === undefined) {\n            var k = rowItemData.length;\n            while (k-- > 0) {\n              if (Array.isArray(rowItemData[k])) {\n                taskElements = rowItemData[k];\n\n                //Notifies the existence of the array of task elements\n                resultTaskArray = true;\n                break;\n              }\n            }\n            columnIndex++;\n          }\n\n          //set the current task obj\n          if (resultTaskArray) {\n\n            //Removes the unecessary due date\n            if (headers[j].fieldName == self.columnsID.taskDueDate) {\n              rowItemData.splice(j, 1);\n            }\n\n            currentTaskObj = taskElements[0];\n\n            if (self.columnsID.userName == headers[j].fieldName) {\n              firstRowItem = firstRowItem.concat(self.processTaskObjectUser(currentTaskObj));\n\n              if (taskColumnIndex.indexOf(self.columnsID.userName) == -1)\n              taskColumnIndex.push(self.columnsID.userName);\n            } else\n            if (self.columnsID.task == headers[j].fieldName) {\n              firstRowItem = firstRowItem.concat(self.processTaskObject(currentTaskObj, idCase));\n\n              if (taskColumnIndex.indexOf(self.columnsID.task) == -1)\n              taskColumnIndex.push(self.columnsID.task);\n            } else\n            if (self.columnsID.taskDueDate == headers[j].fieldName) {\n              firstRowItem = firstRowItem.concat(self.processTaskObjectDate(currentTaskObj));\n\n              if (taskColumnIndex.indexOf(self.columnsID.taskDueDate) == -1)\n              taskColumnIndex.push(self.columnsID.taskDueDate);\n            }\n            //TODO : userLocation logic in case its come inside the task array\n          } else {\n            if (headers[j].fieldName == self.columnsID.taskDueDate) {\n              //inserts the estimated Solution date in a object\n              firstRowItem = firstRowItem.concat({\n                'estimatedSolutionDate': rowItemData[j] });\n\n\n              if (taskColumnIndex.indexOf(self.columnsID.taskDueDate) == -1)\n              taskColumnIndex.push(self.columnsID.taskDueDate);\n            }\n          }\n\n          break;\n        //TODO : create case logic for single element, or create the required logic whe userLocation comes in the task list array               \n        /*\r\n        case self.columnsID.userLocation:\r\n        break;\r\n        /**/\n\n\n        case self.columnsID.processCreationDate:\n          //Creation Date\n          firstRowItem.push({\n            id: \"processCreationDate\",\n            value: rowItemData[columnIndex] });\n\n\n          columnIndex++;\n          break;\n\n        case self.columnsID.processDueDate:\n          //Task Due Date\n          firstRowItem.push({\n            id: \"processDueDate\",\n            value: rowItemData[columnIndex] });\n\n\n          columnIndex++;\n          break;\n\n        default:\n          firstRowItem.push({\n            id: \"customField\",\n            value: rowItemData[columnIndex] });\n\n\n          columnIndex++;\n          break;}\n\n    }\n\n    //Inserts view Process Column\n    firstRowItem.push({\n      id: \"viewProcess\",\n      value: {\n        'idCase': idCase,\n        'idworkflow': idWorkflow } });\n\n\n\n    //Insert the first row element\n    resultArray.push({\n      attr: \"first_row\",\n      data: firstRowItem });\n\n\n    taskElementsLength = taskElements ? taskElements.length : 0;\n\n    //If there is more task, add the remaining rows\n    if (taskElementsLength > 1) {\n      taskColumnIndexLength = taskColumnIndex.length;\n      for (var i = 1; i < taskElementsLength; i++) {\n\n        var taskData = [],\n        k = -1;\n        //Adds the elements in the right order as the columns are\n\n        while (k++ < taskColumnIndexLength - 1) {\n          if (taskColumnIndex[k] == self.columnsID.task)\n          taskData.push(self.processTaskObject(taskElements[i], idCase));else\n\n          if (taskColumnIndex[k] == self.columnsID.taskDueDate)\n          taskData.push(self.processTaskObjectDate(taskElements[i]));else\n\n          if (taskColumnIndex[k] == self.columnsID.userName)\n          taskData.push(self.processTaskObjectUser(taskElements[i]));\n        }\n\n        resultArray.push({\n          attr: \"next_row\",\n          data: taskData });\n\n      }\n    }\n\n    return {\n      data: resultArray,\n      totalTask: taskElementsLength };\n\n  },\n\n  /*\r\n     *   Process each task object\r\n     */\n  processTaskObject: function processTaskObject(taskObject, idCase) {\n    var obj = {\n      'taskName': taskObject.taskName,\n      'colorState': taskObject.colorState,\n      'idCase': idCase,\n      'idWorkItem': taskObject.idWorkItem,\n      'idTask': taskObject.idTask };\n\n    return obj;\n  },\n\n  /*\r\n     * Process task object detecting if is has or not estimated solution date\r\n     */\n  processTaskObjectDate: function processTaskObjectDate(taskObject) {\n    var obj = {};\n    taskObject.estimatedSolutionDate ? obj.estimatedSolutionDate = taskObject.estimatedSolutionDate : obj.estimatedSolutionDate = \"\";\n\n    return obj;\n  },\n\n  /*\r\n     * Process task object detecting if is has or not estimated solution date\r\n     */\n  processTaskObjectUser: function processTaskObjectUser(taskObject) {\n    var obj = {};\n    taskObject.assignee ? obj.userName = taskObject.assignee : obj.userName = \"\";\n\n    return obj;\n  },\n\n  /*\r\n     * Invalidate selected cases\r\n     */\n  invalidateCases: function invalidateCases(content) {\n    var self = this;\n    var selectedCases = {\n      cases: [] };\n\n\n    $(\"input:checkbox[name=CaseAdmin]:checked\", content).each(function () {\n      var val = $(this).val();\n      selectedCases.cases.push({\n        idCase: val });\n\n    });\n\n    if (selectedCases.cases.length == 0) {\n      bizagi.showMessageBox(bizagi.localization.getResource(\"workportal-widget-admincasesearch-invalidate-empty-msg\"), \"Bizagi\", \"warning\");\n    } else {\n      $.when(bizagi.showConfirmationBox(bizagi.localization.getResource(\"workportal-widget-admincasesearch-invalidate-confirm-msg\"), \"Bizagi\", \"warning\")).\n      done(function () {\n        var reason = $(\"#txtReason\", content).val();\n        var params = {\n          action: \"abort\",\n          cases: JSON.stringify(selectedCases),\n          reason: reason };\n\n\n        $.when(self.dataService.abortReassignItems(params)).done(function (abortResult) {\n          self.showActionResultFrame(content, abortResult.response, \"invalidate\");\n        }).fail(function (error) {\n          bizagi.log(error);\n        });\n      });\n    }\n  },\n\n  /*\r\n     * Reassign selected tasks\r\n     */\n  showReassignTasksFrame: function showReassignTasksFrame(content) {\n    var self = this;\n    var selectedTasks = {\n      cases: [] };\n\n    var selectedTasksToShow = [];\n\n    $(\"input:checkbox[name=workItemAdmin]:checked\", content).each(function () {\n      var tasks = $(this).val();\n      tasks = tasks.split(\"|\");\n      selectedTasks.cases.push({\n        idCase: tasks[0],\n        idWorkItem: tasks[1] });\n\n      selectedTasksToShow.push({\n        taskItem: tasks[0] + \": \" + tasks[2],\n        idWorkItem: tasks[1] });\n\n    });\n\n    if (selectedTasksToShow.length == 0) {\n      bizagi.showMessageBox(bizagi.localization.getResource(\"workportal-widget-admincasesearch-reassign-empty-msg\"), \"Bizagi\", \"warning\");\n    } else {\n      self.selectedTasks = selectedTasks;\n      self.selectedTasksToShow = selectedTasksToShow;\n      self.showReassignForm(content, selectedTasksToShow);\n    }\n  },\n\n  /*\r\n     * Show Reassign frame\r\n     */\n  showReassignForm: function showReassignForm(content, selectedTasksToShow) {\n    var self = this;\n    self.buttonBackAction = \"backToCases\";\n    var resultTemplate = $.tmpl(self.reassignFormTmpl, {\n      tasks: selectedTasksToShow });\n\n\n    $(\"#dinamicContent\", content).hide();\n    $(\"#dinamicContent2\", content).html(resultTemplate);\n    $(\"#btn-admin-case-search-clear\", content).hide();\n    $(\"#btn-admin-case-search\", content).hide();\n    $(\"#generalTitle\").html(bizagi.localization.getResource(\"workportal-widget-admincasesearch-reassign-title\"));\n    self.setupUsersSearchForm();\n\n  },\n\n  /*\r\n     * Reassign one or more taskt to other user\r\n     */\n  reassignTasks: function reassignTasks() {\n    var self = this;\n    var content = self.getContent();\n\n    var params = {\n      action: \"reassignItems\",\n      cases: JSON.stringify(self.selectedTasks),\n      idNewUser: self.selectedUserId };\n\n\n    $.when(self.dataService.reassignCurrent(params)).done(function (reassignResult) {\n      self.showActionResultFrame(content, reassignResult.response, \"reassign\");\n    }).fail(function (error) {\n      bizagi.log(error);\n    });\n  },\n\n  /*\r\n     * Show Invalidate / Reassign Result frame\r\n     */\n  showActionResultFrame: function showActionResultFrame(content, result, type) {\n    var self = this;\n    var action = result.length > 1 ? \"-several\" : \"\";\n    var items = \"\";\n    var itemsFailed = \"\";\n    var resultStatus = [];\n    action = type + action;\n\n    if (action == \"invalidate\") {\n      for (var i = 0; i < result.length; i++) {\n        if (result[i].deleted == true) {\n          items = result[i].idCase;\n          items += i + 1 < result.length ? \", \" : \"\";\n          resultStatus[0] = true;\n        } else {\n          itemsFailed = result[i].idCase;\n          itemsFailed += i + 1 < result.length ? \", \" : \"\";\n          resultStatus[1] = false;\n        }\n      }\n    } else if (action == \"invalidate-several\") {\n      for (var i = 0; i < result.length; i++) {\n        if (result[i].deleted == true) {\n          items += result[i].idCase;\n          items += i + 1 < result.length ? \", \" : \"\";\n          resultStatus[0] = true;\n        } else {\n          itemsFailed += result[i].idCase;\n          itemsFailed += i + 1 < result.length ? \", \" : \"\";\n          resultStatus[1] = false;\n        }\n      }\n    } else if (action == \"reassign\") {\n      for (var i = 0; i < result.length; i++) {\n        if (result[i].reassigned == true) {\n          items += result[i].idCase;\n          items += i + 1 < result.length ? \", \" : \"\";\n          resultStatus[0] = true;\n        } else {\n          itemsFailed = result[i].idCase;\n          itemsFailed += i + 1 < result.length ? \", \" : \"\";\n          resultStatus[1] = false;\n        }\n      }\n    } else if (action == \"reassign-several\") {\n      items += \"<br/><br/>\";\n      itemsFailed += \"<br/><br/>\";\n      for (var i = 0; i < result.length; i++) {\n        if (result[i].reassigned == true) {\n          items += result[i].idCase + \"<br/>\";\n          resultStatus[0] = true;\n        } else {\n          itemsFailed += result[i].idCase + \"<br/>\";\n          resultStatus[1] = false;\n        }\n      }\n      items += \"<br/>\";\n      itemsFailed += \"<br/>\";\n    }\n\n    //load result template\n    var resultTemplate = $.tmpl(self.actionResultContentTmpl, {\n      action: action,\n      resultStatus: resultStatus });\n\n    resultTemplate = resultTemplate[0].innerHTML.replace(\"{0}\", \"<strong>\" + items + \"</strong>\");\n    resultTemplate = resultTemplate.replace(\"{3}\", \"<strong>\" + itemsFailed + \"</strong>\");\n    resultTemplate = resultTemplate.replace(\"{1}\", self.selectedUserName);\n    resultTemplate = resultTemplate.replace(\"{1}\", self.selectedUserName);\n\n    //reset and load respective result data and elements\n    if (type == \"invalidate\") $(\"#generalTitle\").html(bizagi.localization.getResource(\"workportal-widget-admincasesearch-invalidate-result-title\"));\n    $(\"#mainForm\", content).html(\"\");\n    $(\"#dinamicContent\", content).css(\"display\", \"inline\");\n    $(\"#dinamicContent\", content).html(resultTemplate);\n    $(\"#dinamicContent2\", content).remove();\n    $(\"#usersTable\", content).remove();\n    $(\"#btn-admin-case-back\", content).css(\"display\", \"none\");\n    $(\"#btn-admin-case-search-clear\", content).css(\"display\", \"none\");\n    $(\"#btn-admin-case-search\", content).css(\"display\", \"none\");\n    $(\"#btn-admin-case-finish\", content).css(\"display\", \"inline\");\n    $(\"#biz-wp-userstable-wrapperform\").hide();\n    $(\"#biz-wp-userstable-wrapperlist\").hide();\n    // Next variable specifies whether is redirecting to inbox or back to the case depending on the result status.\n    self.usersTable.resultStatus = resultStatus.indexOf(false) == -1;\n  },\n\n\n\n  //******************************** EVENTS ********************************//\n\n  /*\r\n  * Implement main buttons behaviour\r\n  */\n  setupMainButtons: function setupMainButtons() {\n    var self = this,\n    content = self.getContent(),\n    buttons = $.tmpl(self.buttonContentTmpl, {});\n\n    content.append(buttons);\n\n    var widgetButtonSet = $(\"#case-search-log-data-buttonset\", content);\n\n    $(\"#btn-admin-case-search-clear\", widgetButtonSet).click(function (e) {\n\n      //clear all fields\n      $(\".biz-wp-input-text\", content).val(\"\");\n      $(\".biz-wp-form-datepicker\", content).val(\"\");\n      self.setupProcessTree();\n\n    });\n\n    $(\"#btn-admin-case-search\", widgetButtonSet).click(function (e) {\n\n      var idAppToSend = \"\";\n      var idCategorytoSend = \"\";\n      var idProcessToSend = \"\";\n      var errorMessage = \"\";\n      var errorFieldName = \"\";\n\n      var selectedProcessRoute = self.processTree.getTreeRouteSelected();\n\n      if (selectedProcessRoute.length > 0) {\n        if (selectedProcessRoute.length == 2) {\n          idAppToSend = selectedProcessRoute[1];\n          idProcessToSend = selectedProcessRoute[0];\n          idCategorytoSend = \"\";\n        } else\n        {\n          idAppToSend = selectedProcessRoute[selectedProcessRoute.length - 1];\n          idCategorytoSend = selectedProcessRoute[1];\n          idProcessToSend = selectedProcessRoute[0];\n        }\n      }\n\n      var params = {\n        h_action: \"getCases\",\n        I_ProcessState: \"Running\",\n        h_idApp: \"\",\n        I_Users: \"ALL\",\n        eventAsTask: true,\n        orderType: 1,\n        order: \"\",\n        orderField: \"\",\n        I_radNumber: $(\"#caseInput\").val(),\n        I_idWFClass: idProcessToSend,\n        I_USERFULLNAME: $(\"#userNameInput\").val(),\n        I_USERPOSITION: $(\"#userPositionInput\").val(),\n        I_From__CreationDate: $(\"#sinceDate\").val(),\n        I_To__CreationDate: $(\"#toDate\").val(),\n        h_idWFClassAuth: \"\",\n        I_idCategory: idCategorytoSend,\n        I_idApplication: idAppToSend,\n        PageSize: self.maxElemShow };\n\n\n\n      if ($(\"#sinceDate\").val() != \"\" && !bizagi.util.isDate($(\"#sinceDate\").val())) {\n        errorMessage = bizagi.localization.getResource(\"workportal-general-invalid-date\");\n        errorFieldName = bizagi.localization.getResource(\"workportal-widget-admincasesearch-date-since\");\n        errorMessage = errorMessage.replace(\"{0}\", errorFieldName);\n        bizagi.showMessageBox(errorMessage, \"Bizagi\", \"warning\");\n      } else if ($(\"#toDate\").val() != \"\" && !bizagi.util.isDate($(\"#toDate\").val())) {\n        errorMessage = bizagi.localization.getResource(\"workportal-general-invalid-date\");\n        errorFieldName = bizagi.localization.getResource(\"workportal-widget-admincasesearch-to-date\");\n        errorMessage = errorMessage.replace(\"{0}\", errorFieldName);\n        bizagi.showMessageBox(errorMessage, \"Bizagi\", \"warning\");\n      } else {\n        self.searchParams = params;\n        self.findResults(content, params);\n      }\n\n    });\n\n    $(\"#btn-admin-case-back\", widgetButtonSet).click(function (e) {\n      if (self.buttonBackAction == \"backToMainForm\") {\n        self.backToMainForm();\n      } else if (self.buttonBackAction == \"backToCases\") {\n        self.backToCases();\n      }\n    });\n\n    $(\"#btn-admin-case-finish\", widgetButtonSet).click(function (e) {\n      self.publish(\"closeCurrentDialog\");\n    });\n\n  },\n\n  /*\r\n     * Back to Cases\r\n     */\n  backToCases: function backToCases() {\n\n    var self = this;\n    var content = self.getContent();\n\n    self.buttonBackAction = \"backToMainForm\";\n    $(\"#dinamicContent\", content).show();\n    $(\"#dinamicContent2\", content).html(\"\");\n    $(\"#usersTable\").remove();\n    $(\"#generalTitle\").html(bizagi.localization.getResource(\"workportal-widget-admincasesearch-table-title\"));\n    $(\"#btn-admin-case-search-clear\", content).hide();\n    $(\"#btn-admin-case-search\", content).hide();\n  },\n\n  /*\r\n     * Back to Main Form\r\n     */\n  backToMainForm: function backToMainForm() {\n\n    var self = this;\n    var content = self.getContent();\n\n    $(\"#mainForm\", content).show();\n    $(\"#dinamicContent\", content).html(\"\");\n    $(\"#generalTitle\").html(bizagi.localization.getResource(\"workportal-widget-admincasesearch-subtitle\"));\n    $(\"#btn-admin-case-search-clear\", content).show();\n    $(\"#btn-admin-case-search\", content).show();\n    $(\"#btn-admin-case-back\", content).css(\"display\", \"none\");\n  },\n\n  /*\r\n     * Set event to reassign link in users table\r\n     */\n  assignEventReassignLinks: function assignEventReassignLinks(userId, userName) {\n    var self = this;\n    self.selectedUserId = userId;\n    self.selectedUserName = userName;\n    self.reassignTasks();\n  },\n\n  /*\r\n     * Implement actions buttons behaviour\r\n     */\n  setupActionsButton: function setupActionsButton(content) {\n    var self = this;\n\n    //boton invalidar\n    $(\"#btn-admin-case-invalidate\", content).click(function (e) {\n      self.invalidateCases(content);\n    });\n\n    //boton reasignar\n    $(\"#btn-admin-case-reassign\", content).click(function (e) {\n      self.showReassignTasksFrame(content);\n    });\n  },\n\n  /*\r\n     * Manage cases table links events(cases, activities and view workflow)\r\n     */\n  setupActivitiesLink: function setupActivitiesLink(content) {\n    var self = this;\n\n    // Add click event to task (Activity) link\n    $(\".activityClicked\", content).click(function () {\n      self.publish(\"executeAction\", {\n        action: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,\n        idCase: $(this)[0].getAttribute(\"data-idCase\"),\n        idWorkItem: $(this)[0].getAttribute(\"data-idworkItem\"),\n        idTask: $(this)[0].getAttribute(\"data-idTask\") });\n\n      self.publish(\"closeCurrentDialog\");\n\n    });\n\n    // Add click event to case link\n    $(\".caseClicked\", content).click(function () {\n      self.publish(\"executeAction\", {\n        action: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,\n        idCase: $(this)[0].getAttribute(\"data-idCase\"),\n        idWorkItem: \"\",\n        idTask: \"\" });\n\n      self.publish(\"closeCurrentDialog\");\n    });\n\n    // Add click event to column header\n    $(\".cases-column-header\", content).click(function () {\n      var columnOrderId = $(this)[0].getAttribute(\"data-columnorder\");\n      var columnOrderBy = $(this)[0].getAttribute(\"data-ordertype\");\n      var columnOrderName = $(this)[0].getAttribute(\"data-columnOrderName\");\n\n      if (columnOrderBy == \"1\") {\n        columnOrderBy = 0;\n      } else {\n        columnOrderBy = 1;\n      }\n\n      self.searchParams.order = columnOrderId;\n      self.searchParams.orderType = columnOrderBy;\n      self.searchParams.orderField = columnOrderName;\n      self.findResults(content, self.searchParams, self.searchParams.Page);\n\n    });\n  },\n\n  /*\r\n     * Set up graphic query event\r\n     */\n  setupGraphicQueryEvent: function setupGraphicQueryEvent(content) {\n\n    var self = this;\n\n    // Add click event to view workflow\n    $(\".biz-wp-diagram-view-icon\", content).click(function () {\n      var idCase = $(this).data(\"idcase\");\n      var idWorkflow = $(this).data('idworkflow');\n      self.showGraphicQuery({\n        idCase: idCase,\n        idWorkflow: idWorkflow });\n\n    });\n  } });","/*\r\n *   Name: Bizagi Workportal Project Content Dashboard\r\n *   Author: Elkin Fernando Siabato Cruz\r\n */\n\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.project.content.dashboard\", {}, {\n\n  /*\r\n                                                                                                      *   Constructor\r\n                                                                                                      */\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    //Load templates\n    self.loadTemplates({\n      \"project-content-dashboard\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.project.content.dashboard\").concat(\"#project-plan-content-dashboard\") });\n\n\n  },\n\n  /*\r\n      * Renders the template defined in the widget\r\n      */\n  renderContent: function renderContent() {\n    var self = this;\n\n    var template = self.getTemplate(\"project-content-dashboard\");\n    self.content = template.render({});\n\n    return self.content;\n  },\n  postRender: function postRender() {\n    var self = this;\n\n    setTimeout(function () {\n      $(window).trigger(\"resize\"); //Simulate resize for fix when load first time.\n    }, 1000);\n\n  } });\n\n\n\nbizagi.injector.register(\"bizagi.workportal.widgets.project.content.dashboard\", [\"workportalFacade\", \"dataService\", bizagi.workportal.widgets.project.content.dashboard], true);","/**\r\n * Name: BizAgi Desktop Widget Dashboard menu (left sidebar) * \r\n * @author Valeria Vanegas\r\n */\n\n\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.project.dashboard.menu\", {}, {\n\n  /**\r\n                                                                                                   * Handler when discussions menu status change\r\n                                                                                                   * @param {*} ev \r\n                                                                                                   * @param {*} params \r\n                                                                                                   */\n  onDiscussionsMenuStatusChange: function onDiscussionsMenuStatusChange(ev, params) {\n    var self = this;\n    self.updateDiscussionsIcons(params.hasDiscussionsOrComment);\n  },\n\n  /**\r\n      * Update discussions icon on sidebar menu\r\n      * The icon is different when there is other discussion or there are comments\r\n      * @param {*} hasDiscussionsOrComment \r\n      */\n  updateDiscussionsIcons: function updateDiscussionsIcons(hasDiscussionsOrComment) {\n    var self = this;\n\n    self.sub(\"UPDATE_DISCUSSIONS_MENU_STATUS\", $.proxy(self.onDiscussionsMenuStatusChange, self));\n\n    $(\".bz-icon-discussion-comment\").toggle(hasDiscussionsOrComment);\n    $(\".bz-icon-discussion-no-comment\").toggle(!hasDiscussionsOrComment);\n    self.params.hasDiscussionsOrComment = hasDiscussionsOrComment;\n  },\n\n  /**\r\n      * Detach events\r\n      */\n  clean: function clean() {\n    var self = this;\n    self.unsub(\"UPDATE_DISCUSSIONS_MENU_STATUS\", $.proxy(self.onDiscussionsMenuStatusChange, self));\n  } });\n\n\nbizagi.injector.register(\"bizagi.workportal.widgets.project.dashboard.menu\", [\"workportalFacade\", \"dataService\", bizagi.workportal.widgets.project.dashboard.menu], true);","/*\r\n *   Name: Bizagi Workportal project Dashboard Menu Activity\r\n *   Author: Elkin Fernando Siabato Cruz\r\n */\n\nbizagi.workportal.widgets.project.dashboard.menu.extend(\"bizagi.workportal.widgets.project.dashboard.menu.activity\", {}, {\n\n  /**\r\n                                                                                                                            *   Constructor\r\n                                                                                                                            */\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n    self.params = params || {};\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    //Load templates\n    self.loadTemplates({\n      \"project-dashboard-menu\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.project.dashboard.menu.activity\").concat(\"#project-dashboard-menu1\") });\n\n  },\n\n  /**\r\n      * Renders the template defined in the widget\r\n      */\n  renderContent: function renderContent() {\n    var self = this;\n    self.content = $(\"<div></div>\");\n    return self.content;\n  },\n\n  /**\r\n      * links events with handlers\r\n      */\n  postRender: function postRender() {\n    var self = this;\n    self._super();\n    //Handlers\n    self.params.contextsLeftSidebarCaseDashboard.forEach(function (context) {\n      self.sub(context, $.proxy(self.updateView, self));\n    });\n  },\n\n  /**\r\n      * Update view\r\n      * @param event\r\n      * @param params\r\n      */\n  updateView: function updateView(event, params) {\n    var self = this;\n    self.params = $.extend(self.params, params.args);\n    self.params.plan.idActivitySelected = undefined;\n    self.clean();\n    var $content = self.getContent().empty();\n\n    if (typeof event.type !== \"undefined\") {\n      self.params.showContextByMenuDashboard = event.type;\n    }\n\n    var argsTemplate = {\n      showFormOverview: self.params.menuDashboard.showFormOverview,\n      showFormActivity: self.params.menuDashboard.showFormActivity,\n      showCommentsOptionMenu: self.params.menuDashboard.showCommentsOptionMenu,\n      showFilesOptionMenu: self.params.menuDashboard.showFilesOptionMenu,\n      showTimeLineOptionMenu: self.params.menuDashboard.showTimeLineOptionMenu && (\n      !self.params.isAdhocProcess ||\n      self.params.isAdhocProcess && bizagi.util.isEnableFeature(\"enableTimelineOnLiveProcesses\")),\n      showPlanOptionMenu: self.params.menuDashboard.showPlanOptionMenu,\n      contextPlanOptionMenu: self.params.menuDashboard.contextPlanOptionMenu,\n      contextFormActivityOptionMenu: self.params.menuDashboard.contextFormActivityOptionMenu };\n\n\n    //Update widget\n    var template = self.getTemplate(\"project-dashboard-menu\");\n    template.render(argsTemplate).appendTo($content);\n\n\n    if (self.params.showContextByMenuDashboard) {\n      $(\"li[data-context='\" + self.params.showContextByMenuDashboard.toUpperCase() + \"']\", self.content).addClass(\"active\").siblings().removeClass(\"active\");\n    }\n\n    self.updateDiscussionsIcons(self.params.hasDiscussionsOrComment);\n    self.handlerEvents();\n  },\n\n  /**\r\n      *   Load Content By Id\r\n      */\n  loadContentById: function loadContentById(event) {\n    var self = this;\n    event.preventDefault();\n    var $item = $(event.target).closest(\"li\");\n\n    if (!$item.hasClass(\"active\")) {\n\n      var showContextByMenuDashboard = $item.data(\"context\");\n\n      if (showContextByMenuDashboard) {\n        var getLevelNavigator = self.pub(\"notify\", { type: \"NAVIGATOR_GETLEVEL\" });\n        var currentLevelNavigator = parseInt(getLevelNavigator[0], 10);\n        var nameItemNavigator = \"\";\n        var newLevelNavigator = currentLevelNavigator;\n\n        if (showContextByMenuDashboard == \"PLANACTIVITIES\") {\n          newLevelNavigator = currentLevelNavigator + 1;\n          nameItemNavigator = bizagi.localization.getResource(\"workportal-project-casedashboard-plan\");\n        }\n\n        self.params.refreshLastItemBreadcrumb = false;\n        self.pub(\"notify\", {\n          type: showContextByMenuDashboard.toUpperCase(),\n          args: $.extend(self.params, { showContextByMenuDashboard: showContextByMenuDashboard,\n            histName: nameItemNavigator,\n            level: newLevelNavigator }) });\n\n        $(\"li[data-context='\" + self.params.showContextByMenuDashboard.toUpperCase() + \"']\", self.content).addClass(\"active\").siblings().removeClass(\"active\");\n      }\n    }\n  },\n\n  subMenuHandler: function subMenuHandler() {\n    var self = this;\n    var content = self.getContent();\n    var $comments = $(\"[data-context='COMMENTS']\", content);\n    var $files = $(\"[data-context='FILES']\", content);\n    var $timeline = $(\"[data-context='TIMELINE']\", content);\n\n    $(\".ui-bizagi-wp-project-tab-submenu a\", content).on(\"click\", function () {\n      $comments.toggle();\n      $files.toggle();\n      $timeline.toggle();\n    });\n  },\n\n  /**\r\n      * Handler events\r\n      */\n  handlerEvents: function handlerEvents() {\n    var self = this;\n    var content = self.getContent();\n\n    self.subMenuHandler();\n\n    $(\".ui-bizagi-wp-project-tab-links a\", content).on(\"click\", $.proxy(self.loadContentById, self));\n\n    // Bind for click event on refresh botton\n    $(\".ui-bizagi-wp-project-tab-links li .ui-bizagi-refresh-form\", content).on(\"click\", function () {\n      var options = {\n        action: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,\n        idCase: self.params.idCase,\n        idTask: self.params.idTask,\n        idWorkflow: self.params.idWorkflow,\n        idWorkItem: self.params.idWorkitem,\n        referrer: self.params.referrer || \"inboxGrid\" };\n\n      self.publish(\"executeAction\", options);\n    });\n  },\n\n  /**\r\n      * Clean widgets and events\r\n      */\n  clean: function clean() {\n    var self = this;\n    var content = self.getContent();\n\n    self._super();\n\n    if (self.params && self.params.contextsLeftSidebarCaseDashboard) {\n      self.params.contextsLeftSidebarCaseDashboard.forEach(function (context) {\n        self.unsub(context, $.proxy(self.updateView, self));\n      });\n    }\n\n    $(\".ui-bizagi-wp-project-tab-links a\", content).off();\n    $(\".ui-bizagi-wp-project-tab-links li .ui-bizagi-refresh-form\", content).off();\n  } });\n\n\nbizagi.injector.register(\"bizagi.workportal.widgets.project.dashboard.menu.activity\", [\"workportalFacade\", \"dataService\", bizagi.workportal.widgets.project.dashboard.menu.activity], true);","/*\r\n    Name   : Bizagi Workportal Project Activity Plan Sidebar\r\n    Created on : Feb 09, 2016\r\n    Author     : Jose Aranzazu\r\n*/\n\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.project.activity.plan.sidebar\", {}, {\n\n  /*\r\n                                                                                                          *   Constructor\r\n                                                                                                          */\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    params = params || {};\n    params.supportNav = false;\n\n    //Load templates\n    self.loadTemplates({\n      \"project-activity-plan-sidebar\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.project.activity.plan.sidebar\").concat(\"#project-activity-plan-sidebar\") });\n\n  },\n\n  /**\r\n      * Renders the template defined in the widget\r\n      */\n  renderContent: function renderContent() {\n    var self = this;\n    var isAdhoc = false;\n    var template = self.getTemplate(\"project-activity-plan-sidebar\");\n    if (!self.params.isAdhocProcess || typeof self.params.isAdhocProcess === 'undefined') {\n      isAdhoc = false;\n    } else\n    {\n      isAdhoc = self.params.isAdhocProcess;\n    }\n    self.content = template.render({ hasRelatedPlan: self.params.planChild, showPlanAction: self.params.menuDashboard.showPlanOptionMenu, isAdhocProcess: isAdhoc });\n\n    return self.content;\n  },\n\n  /**\r\n      * links events with handlers\r\n      */\n  postRender: function postRender() {\n    var self = this;\n    var $contentWidget = self.getContent();\n    $(\".ui-bizagi-wp-project-activity-plan-sidebar-action-add > a\", $contentWidget).on(\"click\",\n    $.proxy(self.loadPlanForm, self));\n  },\n\n  /**\r\n      * Events elements\r\n      */\n  loadPlanForm: function loadPlanForm() {\n    var self = this;\n    if (self.params.planChild) {\n      var servicesPlan = new bizagi.workportal.services.behaviors.plan(self.dataService);\n      var planParent = servicesPlan.getPlanAsParent(self.params.plan);\n      self.params.planParent = self.getPlanParent(planParent);\n\n    }\n    var showContextByMenuDashboard = self.params.planChild && (self.params.planChild.currentState === \"EXECUTING\" ||\n    self.params.planChild.currentState === \"CLOSED\" || self.params.planChild.currentState === \"PENDING\") ? \"PLANACTIVITIES\" : self.params.menuDashboard.contextPlanOptionMenu;\n    var getLevelNavigator = self.pub(\"notify\", { type: \"NAVIGATOR_GETLEVEL\" });\n    var currentLevelNavigator = parseInt(getLevelNavigator[0]);\n    var nameItemNavigator = \"\";\n    var newLevelNavigator = currentLevelNavigator;\n\n    if (showContextByMenuDashboard === \"PLANOVERVIEW\" || showContextByMenuDashboard === \"PLANACTIVITIES\") {\n      newLevelNavigator = currentLevelNavigator + 1;\n      nameItemNavigator = bizagi.localization.getResource(\"workportal-project-casedashboard-plan\");\n    }\n\n    self.params.refreshLastItemBreadcrumb = false;\n    self.pub(\"notify\", {\n      type: showContextByMenuDashboard.toUpperCase(),\n      args: $.extend(self.params, {\n        showContextByMenuDashboard: showContextByMenuDashboard,\n        histName: nameItemNavigator,\n        level: newLevelNavigator }) });\n\n\n  },\n\n  /**\r\n      * return planParent or undefined if planParent is equal to planChild\r\n      * @param {*} planParent \r\n      */\n  getPlanParent: function getPlanParent(planParent) {\n    var self = this;\n    var isFromAnActivityCase = bizagi.util.tryCatch(\n    function () {return planParent.id === self.params.planChild.id;},\n    false);\n\n    return isFromAnActivityCase ? undefined : planParent;\n  },\n  /**\r\n      * Clean widget\r\n      */\n  clean: function clean() {\n    var self = this;\n    $(\".ui-bizagi-wp-project-activity-plan-sidebar-action-add > a\", self.getContent()).off(\"click\",\n    $.proxy(self.loadPlanForm, self));\n  } });\n\n\nbizagi.injector.register('bizagi.workportal.widgets.project.activity.plan.sidebar', ['workportalFacade', 'dataService', bizagi.workportal.widgets.project.activity.plan.sidebar], true);","/*\r\n *   Name: Bizagi Workportal Desktop Project Case State Controller\r\n *   Author: Elkin Fernando Siabato Cruz\r\n */\n\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.project.caseState\", {}, {\n  /*\r\n                                                                                              *   Constructor\r\n                                                                                              */\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    self.contextsSidebarActivity = params.contextsSidebarActivity;\n\n    //Regional\n    self.datePickerRegional = bizagi.localization.getResource(\"datePickerRegional\");\n\n    //Load templates\n    self.loadTemplates({\n      \"project-caseState\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.project.caseState\").concat(\"#project-caseState-wrapper\"),\n      \"project-caseState-remaining\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.project.caseState\").concat(\"#project-caseState-remaining\"),\n      \"project-cancel-case-button\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.project.caseState\").concat(\"#project-caseState-cancel-case-button\") });\n\n  },\n\n  /**\r\n      * Renders the template defined in the widget\r\n      */\n  renderContent: function renderContent() {\n    var self = this;\n    self.content = $(\"<div></div>\");\n    return self.content;\n  },\n\n  /*\r\n      * links events with handlers\r\n      */\n  postRender: function postRender() {\n    var self = this;\n    var cntxtSidebarActivity = self.contextsSidebarActivity || [];\n    //Handlers\n    cntxtSidebarActivity.forEach(function (context) {\n      self.sub(context, $.proxy(self.updateView, self));\n    });\n  },\n\n  /**\r\n      * Update view when load case\r\n      * @param event\r\n      * @param params\r\n      */\n  updateView: function updateView(event, params) {\n    var self = this;\n    $.extend(self.params, params.args);\n    var args = params.args;\n    self.getContent().empty();\n\n    var argsTemplate = {};\n\n    //is Favorite Case\n    argsTemplate.isFavoriteCase = \"off\";\n    if (args.isFavorite && JSON.parse(args.isFavorite)) {\n      argsTemplate.isFavoriteCase = \"bz-icon-star\";\n    } else\n    {\n      argsTemplate.isFavoriteCase = \"bz-icon-star-outline\";\n    }\n\n    self.showCaseNumber(args, argsTemplate);\n\n    //Begin Calculated Remaining Date\n    if (args.creationDate) {\n      var MOMENT_FORMAT = \"MM/DD/yyyy H:mm\";\n      var timeZoneName = bizagi.currentUser.timeZoneName;\n      var creationDate = args.creationDate;\n      var creationDateObject = self.getDateWithTimezone(MOMENT_FORMAT, timeZoneName, creationDate);\n\n      argsTemplate.creationDateFormat = self.getFormattedDate(creationDateObject);\n\n      var solutionDateObject = self.getDateWithTimezone(MOMENT_FORMAT, timeZoneName, args.solutionDate);\n      argsTemplate.solutionDateFormat = self.getFormattedDate(solutionDateObject);\n\n      var currentDate = self.getDateWithTimezone(MOMENT_FORMAT, timeZoneName);\n      self.calculateDataForTemplate(argsTemplate, creationDateObject, currentDate, solutionDateObject, args);\n    }\n    $(self.getContent()).on(\"click\", \".show-diagram-case\", function () {\n      var isAdhoc = false;\n      if (!self.params.isAdhocProcess || typeof self.params.isAdhocProcess === 'undefined') {\n        isAdhoc = false;\n      } else {\n        isAdhoc = true;\n      }\n      if (isAdhoc) {\n        self.showGraphicQuery({ idCase: self.params.idCaseForGraphicQuery || self.params.idCase, idWorkflow: self.params.idWorkFlow, isAdhoc: true, idProcess: self.params.idAdhocProcess });\n      } else {\n        self.showGraphicQuery({ idCase: self.params.idCaseForGraphicQuery || self.params.idCase, idWorkflow: self.params.idWorkflow });\n      }\n\n    });\n\n    $(self.getContent()).on(\"click\", \".show-process-help\", function () {\n      self.showHelpUrl(self.params.helpUrl);\n    });\n\n  },\n\n  /**\r\n      * Calculate percent bar\r\n      * @param argsTemplate\r\n      * @param creationDateObject\r\n      * @param currentDate\r\n      * @param solutionDateObject\r\n      * @param args\r\n      */\n  calculateDataForTemplate: function calculateDataForTemplate(argsTemplate, creationDateObject, currentDate, solutionDateObject, args) {\n    var self = this;\n    var $content = self.getContent();\n    var MOMENT_FORMAT = \"MM/DD/yyyy H:mm\";\n    var timeZoneName = bizagi.currentUser.timeZoneName;\n    var paramsEffectiveDuration = {};\n    paramsEffectiveDuration.idUser = bizagi.currentUser.idUser;\n    if (bizagi.util.parseBoolean(args.isOpen)) {\n      paramsEffectiveDuration.fromDate = creationDateObject.getTime();\n      paramsEffectiveDuration.toDate = currentDate.getTime();\n    } else\n    {\n      paramsEffectiveDuration.fromDate = solutionDateObject.getTime();\n      paramsEffectiveDuration.toDate = currentDate.getTime();\n    }\n\n    var differenceCreationToCurrent = paramsEffectiveDuration.toDate - paramsEffectiveDuration.fromDate;\n    var actualDate = self.getDateWithTimezone(MOMENT_FORMAT, timeZoneName);\n    var relativeTime = bizagi.util.dateFormatter.getRelativeTime(new Date(actualDate.getTime() - differenceCreationToCurrent), null, false, timeZoneName);\n    if (bizagi.util.parseBoolean(args.isOpen)) {\n      argsTemplate.relativeTimeState = bizagi.localization.getResource(\"workportal-project-case-state-opened\").replace(\"%s\", relativeTime);\n      argsTemplate.colorStateCase = \"Opened\";\n    } else\n    {\n      argsTemplate.relativeTimeState = bizagi.localization.getResource(\"workportal-project-case-state-closed\").replace(\"%s\", relativeTime);\n      argsTemplate.colorStateCase = \"Closed\";\n    }\n\n    argsTemplate.percentCompleteBar = 100;\n    argsTemplate.isOpen = bizagi.util.parseBoolean(args.isOpen);\n    //Update widget\n    var contentTemplate = self.getTemplate(\"project-caseState-remaining\");\n    contentTemplate.\n    render($.extend(args, argsTemplate)).\n    appendTo($(\"#ui-bizagi-remaining\", $content));\n  },\n\n\n  /**\r\n      * Show cancel case button\r\n      * @param {JSON} args \r\n      * @param {Template} argsTemplate \r\n      * @param {Boolean} showCancelCase \r\n      */\n  showCancelCase: function showCancelCase(args, argsTemplate, _showCancelCase) {\n    var self = this;\n    var $content = self.getContent();\n    var contentTemplate = self.getTemplate(\"project-cancel-case-button\");\n\n    argsTemplate.buttonCancelCase = _showCancelCase;\n    contentTemplate.render($.extend(args, argsTemplate)).appendTo($(\"#ui-bizagi-cancel-case\", $content));\n    $(\"#ui-bizagi-wp-project-activity-cancel-case-button > a\", self.content).click(function () {\n      var widgetParameters = {\n        widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_CANCEL_CASE,\n        maximize: false,\n        dialogClass: 'bz-cancel-case-widget',\n        idWorkitem: self.params.idWorkitem,\n        idCase: self.params.idCase,\n        modalParameters: {\n          refreshInbox: false,\n          title: bizagi.localization.getResource(\"workportal-widget-cancel-case-title\"),\n          width: 420,\n          height: 400 },\n\n        closeVisible: false };\n\n      self.publish(\"showDialogWidget\", widgetParameters);\n    });\n  },\n\n  /**\r\n      * Show case number\r\n      * @param args\r\n      * @param argsTemplate\r\n      */\n  showCaseNumber: function showCaseNumber(args, argsTemplate) {\n    var self = this;\n    var $content = self.getContent();\n    var contentTemplate = self.getTemplate(\"project-caseState\");\n    var isAdhoc = false;\n    if (!this.params.isAdhocProcess || typeof this.params.isAdhocProcess === 'undefined') {\n      isAdhoc = false;\n    } else\n    {\n      isAdhoc = this.params.isAdhocProcess;\n    }\n\n    self.params.helpUrl = bizagi.util.validateUrlWellFormed(self.params.helpUrl);\n\n    contentTemplate.\n    render(\n    $.extend(\n    args,\n    argsTemplate,\n    {\n      security: bizagi.menuSecurity,\n      isAdhocProcess: isAdhoc,\n      urlHelp: !bizagi.util.isEmpty(self.params.helpUrl) })).\n\n\n\n    appendTo($content);\n    self._startShowCancelCase(args, argsTemplate);\n    //Handle events\n    $(\".case-summary-favorite\", $content).on(\"click\", $.proxy(self.onClickFavorite, self));\n    // Set back and next case navigation\n    $(\".case-summary-back\", self.content).on(\"click\", $.proxy(self.goToCase, self, 'back'));\n    $(\".case-summary-next\", self.content).on(\"click\", $.proxy(self.goToCase, self, 'next'));\n\n    self.showBackNextNavigation();\n  },\n\n  /**\r\n      * wait for showCancelCase value from Navigator widget\r\n      * @param {JSON} args \r\n      * @param {Template} argsTemplate \r\n      */\n  _startShowCancelCase: function _startShowCancelCase(args, argsTemplate) {\n    var self = this,\n    _navigatorWidget = bizagi.injector.get(\"bizagi.workportal.widgets.navigator\"),\n    _start = self.showCancelCase.bind(self, args, argsTemplate);\n\n    _navigatorWidget.getShowCancelCase().done(_start);\n  },\n\n  /**\r\n      * Get Format date\r\n      * @param dateObj\r\n      * @returns {string}\r\n      */\n  getFormattedDate: function getFormattedDate(dateObj) {\n    var self = this;\n    var monthsNames = self.datePickerRegional.monthNames;\n    var shortMonth = dateObj.getMonth();\n    var bizagiLanguage = BIZAGI_LANGUAGE;\n    if (bizagiLanguage != null && bizagiLanguage != undefined && bizagiLanguage.length > 0 && bizagiLanguage.substring(0, 2) == \"fr\")\n    return $.datepicker.formatDate(\"dd\", dateObj) + \" \" + monthsNames[shortMonth];else\n\n    return monthsNames[shortMonth] + \" \" + $.datepicker.formatDate(\"dd\", dateObj);\n  },\n\n  /***\r\n      * Events\r\n      */\n  onClickFavorite: function onClickFavorite(event) {\n    event.preventDefault();\n    var self = this;\n    var favoriteOptions = {};\n    if ($(event.target).hasClass(\"bz-icon-star-outline\")) {\n      favoriteOptions = {\n        idObject: self.params.idCase,\n        favoriteType: \"CASES\" };\n\n      $.when(self.dataService.addFavorite(favoriteOptions)).done(function (favoritesData) {\n        self.params.guidFavorite = favoritesData.idFavorites;\n        $(event.target).removeClass(\"bz-icon-star-outline\");\n        $(event.target).addClass(\"bz-icon-star\");\n      });\n    } else\n    {\n      favoriteOptions = {\n        idObject: self.params.guidFavorite,\n        favoriteType: \"CASES\" };\n\n      $.when(self.dataService.delFavorite(favoriteOptions)).done(function () {\n        $(event.target).addClass(\"bz-icon-star-outline\");\n        $(event.target).removeClass(\"bz-icon-star\");\n      });\n    }\n  },\n\n  showHelpUrl: function showHelpUrl(urlHelp) {\n    window.open(urlHelp);\n  },\n\n  /**\r\n      * Call service effective duration by schedule work\r\n      * @param params\r\n      * @return {*}\r\n      */\n  callGetEffectiveDuration: function callGetEffectiveDuration(params) {\n    var self = this;\n    var d = $.Deferred();\n\n    if (params.fromDate) {\n      $.when(\n      self.dataService.getEffectiveDuration(params)).\n      done(function (data) {\n        d.resolve(data);\n      });\n    } else\n    {\n      d.resolve(null);\n    }\n\n    return d.promise();\n  },\n\n  /**\r\n      * Clean plugins and events\r\n      */\n  clean: function clean() {\n    var self = this;\n    $(\".show-diagram-case\", self.getContent()).off();\n    var cntxtSidebarActivity = self.contextsSidebarActivity || [];\n    this.params = {};\n    cntxtSidebarActivity.forEach(function (context) {\n      self.unsub(context, $.proxy(self.updateView, self));\n    });\n  },\n\n  goToCase: function goToCase(action) {\n    var self = this;\n    var idCase = action == 'back' ? self.getBackCase() : self.getNextCase();\n    if (idCase > 0) {\n      self.publish(\"executeAction\", {\n        action: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,\n        idCase: idCase });\n\n    }\n  },\n\n  getListKey: function getListKey() {\n    var self = this;\n    bizagi.lstIdCases = bizagi.lstIdCases || {};\n    if (bizagi.lstIdCases.length > 1) {\n      for (var i = 0; i < bizagi.lstIdCases.length; i++) {\n        if (self.params.idCase == bizagi.lstIdCases[i]) {\n          return i;\n        }\n      }\n    }\n    return -1;\n  },\n\n  getNextCase: function getNextCase() {\n    var self = this;\n    var nextIdCase = 0;\n    var key = self.getListKey();\n\n    // Check if last element\n    if (bizagi.lstIdCases.length == key + 1 || bizagi.lstIdCases.length == 1) {\n      nextIdCase = -1;\n    } else {\n      nextIdCase = bizagi.lstIdCases[key + 1];\n    }\n\n    return nextIdCase;\n  },\n\n  getBackCase: function getBackCase() {\n    var self = this;\n    var prevIdCase = 0;\n    var key = self.getListKey();\n\n    // Check if first element\n    if (key == 0) {\n      prevIdCase = -1;\n    } else {\n      prevIdCase = bizagi.lstIdCases[key - 1] || -1;\n    }\n\n    return prevIdCase;\n  },\n\n  showBackNextNavigation: function showBackNextNavigation() {\n    var self = this;\n    var nextCase = self.getNextCase();\n    var backCase = self.getBackCase();\n    nextCase <= 0 ? $(\".case-summary-next\", self.content).hide() : $(\".case-summary-next\", self.content).show();\n    backCase <= 0 ? $(\".case-summary-back\", self.content).hide() : $(\".case-summary-back\", self.content).show();\n\n    if (nextCase <= 0 && backCase <= 0) {\n      $(\".content-right-sidebar\").removeClass(\"bz-state-number--active-case\");\n      $(\".bz-case-navigation\").hide();\n    } else\n    {\n      $(\".content-right-sidebar\").addClass(\"bz-state-number--active-case\");\n      $(\".bz-case-navigation\").show();\n    }\n  } });\n\n\nbizagi.injector.register(\"bizagi.workportal.widgets.project.caseState\", [\"workportalFacade\", \"dataService\", bizagi.workportal.widgets.project.caseState]);","/*\r\n *   Name: Bizagi Workportal Project Cancel Case\r\n *   Author: Yesid Alberto Ochoa Luque\r\n */\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.desktop.widgets.project.cancelCase\", {}, {\n  /*\r\n                                                                                                      *   Constructor\r\n                                                                                                      */\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    self.notifier = bizagi.injector.get('notifier');\n    params = params || {};\n    //Load templates\n    self.loadTemplates({\n      \"project-cancel-case-wrapper\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.project.cancelCase\").concat(\"#project-caseState-cancel-case-wrapper\"),\n      \"project-cancel-case-wrapper-error\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.project.cancelCase\").concat(\"#project-caseState-cancel-case-wrapper-error\") });\n\n  },\n\n  /*\r\n     * Renders the template defined in the widget\r\n     */\n  renderContent: function renderContent() {\n    var self = this;\n    var template = self.getTemplate(\"project-cancel-case-wrapper\");\n    self.content = template.render({});\n    self.defineButtons();\n    return self.content;\n  },\n  /*\r\n     * Define modal buttons\r\n     */\n  defineButtons: function defineButtons() {\n    var self = this;\n    self.params.buttons = [{\n      text: bizagi.localization.getResource(\"workportal-general-word-no\"),\n      \"class\": \"bz-cancel-case__btn biz-wp-button-secondary\",\n      click: function click() {\n        $(this).dialog('close');\n      } },\n    {\n      text: bizagi.localization.getResource(\"workportal-general-word-yes\"),\n      \"class\": \"bz-cancel-case__btn\",\n      click: function click() {self.cancelCaseRequest();} }];\n\n  },\n  /**\r\n      * Execute request to cancel case\r\n      */\n  cancelCaseRequest: function cancelCaseRequest() {\n    var self = this,\n    reason = \"\",\n    $loader = $(\"#bz-wp-cancelcase-wrapperload\", self.content);\n    reason = $(\"textarea#cancel-case-reason\").val();\n    var params = {\n      idWorkitem: self.params.idWorkitem,\n      action: \"abort\",\n      cases: JSON.stringify({\n        cases: [{ idCase: self.params.idCase }] }),\n\n      reason: reason };\n\n\n    bizagi.showErrorAlertDialog = false;\n\n    if (reason != \"\") {\n      $loader.show();\n      $.when(self.dataService.cancelCase(params)).done(function (result) {\n        if (result.response[0].deleted) {\n          $loader.hide();\n          self.notifier.showSucessMessage(bizagi.localization.getResource(\"workportal-widget-cancel-case-the-case-was-cancelled-successfully\"));\n          $('.ui-dialog-content').dialog('close');\n          bizagi.injector.get(\"bizagi.workportal.widgets.navigator\", {}).goToBack();\n        } else {\n          $loader.hide();\n          bizagi.showToastError(bizagiConfig.environment, result.response[0].idCase);\n        }\n      }).fail(function (error) {\n        var message_error = error.status + \" - \" + error.statusText;\n        bizagi.showToastError(bizagiConfig.environment, message_error);\n        $loader.hide();\n        bizagi.log(error);\n      });\n    } else {\n      $(\"textarea#cancel-case-reason\").css(\"border-color\", \"#F50E0E\");\n      $(\".bz-cancel-case__help-text\").text(bizagi.localization.getResource(\"workportal-widget-cancel-case-the-cancellation-reason-is-mandatory\")).css(\"color\", \"#F50E0E\");\n      self.showTextIsRequired();\n    }\n  },\n\n  /**\r\n      * If the text area is empty, it shows alert that the text is required\r\n      */\n  showTextIsRequired: function showTextIsRequired() {\n    $('textarea#cancel-case-reason').bind('input propertychange', function () {\n      $(\"textarea#cancel-case-reason\").css(\"border-color\", \"#F50E0E\");\n      $(\".bz-cancel-case__help-text\").text(bizagi.localization.getResource(\"workportal-widget-cancel-case-the-cancellation-reason-is-mandatory\")).css(\"color\", \"#F50E0E\");\n      if (this.value.length) {\n        $(\"textarea#cancel-case-reason\").css(\"border-color\", \"#\");\n        $(\".bz-cancel-case__help-text\").text(bizagi.localization.getResource(\"workportal-widget-cancel-case-max-characters\")).css(\"color\", \"##757575\");\n      }\n    });\n  } });\n\n\nbizagi.injector.register('bizagi.workportal.desktop.widgets.project.cancelCase', ['workportalFacade', 'dataService', bizagi.workportal.desktop.widgets.project.cancelCase], true);","/*\r\n *   Name: Bizagi Workportal Desktop Project Activity State Controller\r\n *   Author: Elkin Fernando Siabato Cruz\r\n */\n\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.project.activityState\", {}, {\n  /*\r\n                                                                                                  *   Constructor\r\n                                                                                                  */\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    self.contextsSidebarActivity = params.contextsSidebarActivity;\n\n    //Regional\n    self.datePickerRegional = bizagi.localization.getResource(\"datePickerRegional\");\n\n    //Load templates\n    self.loadTemplates({\n      \"project-activityState-wrapper\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.project.activityState\").concat(\"#project-activityState-wrapper\") });\n\n  },\n\n  /*\r\n      * Renders the template defined in the widget\r\n      */\n  renderContent: function renderContent() {\n    var self = this;\n    self.content = $(\"<div></div>\");\n    return self.content;\n  },\n\n  /*\r\n      * links events with handlers\r\n      */\n  postRender: function postRender() {\n    var self = this;\n    //Handlers\n    self.contextsSidebarActivity.forEach(function (context) {\n      self.sub(context, $.proxy(self.updateView, self));\n    });\n\n  },\n\n  updateView: function updateView(event, params) {\n    var self = this,\n    args = params.args;\n    self.params = args;\n    self.getContent();\n    var timeZoneName = bizagi.currentUser.timeZoneName;\n    var argsTemplate = {};\n    var currentState = args.currentState || [];\n\n    var currentWorkitem = currentState.filter(function (objectWorkItem) {return objectWorkItem.idWorkItem == args.idWorkitem;})[0];\n\n\n    if (currentWorkitem) {\n      argsTemplate.activityName = currentWorkitem.state;\n      argsTemplate.activityIsEvent = bizagi.util.parseBoolean(currentWorkitem.isEvent);\n\n      var MOMENT_FORMAT = \"MM/DD/yyyy H:mm\";\n      var initDateObject = self.getDateWithTimezone(MOMENT_FORMAT, timeZoneName, currentWorkitem.entryDateWorkItem);\n      if (initDateObject.getTime) {\n        argsTemplate.initDateFormat = self.getFormattedDate(initDateObject);\n      }\n\n      var currentDate = self.getDateWithTimezone(MOMENT_FORMAT, timeZoneName);\n      var estimatedSolutionDateObject = self.getDateWithTimezone(MOMENT_FORMAT, timeZoneName, currentWorkitem.estimatedSolutionDate);\n      argsTemplate.estimatedSolutionDateFormat = \"\";\n\n      if (initDateObject.getTime && estimatedSolutionDateObject.getTime && currentWorkitem) {\n        self.calculateDataForTemplate(currentWorkitem, argsTemplate, initDateObject, currentDate, estimatedSolutionDateObject, currentState);\n      } else\n      {\n        //Update widget\n        self.updateTemplateWidget(argsTemplate, currentState);\n      }\n    }\n  },\n\n  initilizeActionMenu: function initilizeActionMenu(currentState) {\n    var self = this;\n    var allowsReassign = false;\n\n    if (currentState && currentState.length > 0) {\n      for (j = 0; j < currentState.length; ++j) {\n        if (currentState[j] && self.params && currentState[j].idWorkItem == self.params.idWorkitem) {\n          allowsReassign = bizagi.util.parseBoolean(currentState[j].allowsReassign) || false;\n        }\n      }\n    }\n    var btReassing = $(\"#bt-case-action-reassing\", self.content);\n    var btShareActivity = $(\"#ui-bizagi-wp-project-activity-button:not(.ui-bizagi-wp-project-activity-shared)\", self.content);\n\n    if (allowsReassign) {\n      btReassing.show();\n    }\n    btReassing.on(\"click\", function () {\n      self.onClickMenuReasign();\n    });\n    btShareActivity.on(\"click\", function () {\n      self.onClickShareActivity();\n    });\n  },\n  /**\r\n       * Executed when user reasign case\r\n       */\n  onClickMenuReasign: function onClickMenuReasign() {\n    var self = this;\n    var idCase = self.params.idCase;\n    var idWorkItem = self.params.idWorkitem,\n    onCloseSaveDialogBox = function onCloseSaveDialogBox() {\n      self.publish(\"closeCurrentDialog\");\n    };\n    bizagi.loader.startAndThen(\"admin\").then(function () {\n      $.when(self.publish(\"showDialogWidget\", {\n        widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_REASSIGN_CASE,\n        data: {\n          \"idCase\": idCase,\n          \"idWorkItem\": idWorkItem,\n          closeDialogWidget: onCloseSaveDialogBox },\n\n        closeVisible: false,\n        maximize: true,\n        modalParameters: {\n          title: bizagi.localization.getResource(\"render-actions-reassign\"),\n          width: \"910px\",\n          id: \"CaseAdmin\" } }));\n\n\n    });\n  },\n\n  /**\r\n      * let share the activity\r\n      */\n  onClickShareActivity: function onClickShareActivity() {\n    var self = this;\n    var params = {\n      \"idWorkItem\": self.params.idWorkitem };\n\n    var button = $(\"#ui-bizagi-wp-project-activity-button\", self.content);\n    button.attr(\"disabled\", true);\n    $.when(self.dataService.getShareActivity(params)).done(function (data) {\n      var notifier = window.parent.bizagi.injector.get('notifier');\n      if (data.value === true) {\n        button.addClass(\"ui-bizagi-wp-project-activity-shared\").\n        unbind(\"click\");\n        notifier.showSucessMessage(bizagi.localization.getResource(\"workportal-project-activity-success-message\"), '');\n      } else {\n        notifier.showErrorMessage(bizagi.localization.getResource(\"workportal-project-activity-error-message\"), '');\n      }\n    }).always(function () {\n      button.attr(\"disabled\", false);\n    });\n  },\n\n  calculateDataForTemplate: function calculateDataForTemplate(currentWorkitem, argsTemplate, creationDateObject, currentDate, estimatedSolutionDateObject, currentState) {\n    var self = this;\n    var MOMENT_FORMAT = \"MM/DD/yyyy H:mm\";\n    var timeZoneName = bizagi.currentUser.timeZoneName;\n    var diffMillisecondsCurrentToEstimated = currentDate.getTime() - estimatedSolutionDateObject.getTime();\n    var diffMillisecondsCreationToSolution = creationDateObject.getTime() - estimatedSolutionDateObject.getTime();\n\n    var paramsEffectiveDurationOpened = {\n      idUser: bizagi.currentUser.idUser,\n      fromDate: creationDateObject.getTime(),\n      toDate: self.getDateWithTimezone(MOMENT_FORMAT, timeZoneName).getTime() };\n\n\n    var currentDateExceededEstimatedDate = false;\n    var paramsEffectiveDuration = {\n      idUser: bizagi.currentUser.idUser,\n      fromDate: currentDate.getTime(),\n      toDate: estimatedSolutionDateObject.getTime() };\n\n    var paramsEffectiveDurationInitialToEstimated = {};\n    if (diffMillisecondsCurrentToEstimated > 0) {//Exceeded limit estimatedSolution\n      paramsEffectiveDuration.fromDate = estimatedSolutionDateObject.getTime();\n      paramsEffectiveDuration.toDate = currentDate.getTime();\n      currentDateExceededEstimatedDate = true;\n    } else\n    {\n      paramsEffectiveDurationInitialToEstimated.idUser = bizagi.currentUser.idUser;\n      paramsEffectiveDurationInitialToEstimated.fromDate = creationDateObject.getTime();\n      paramsEffectiveDurationInitialToEstimated.toDate = estimatedSolutionDateObject.getTime();\n    }\n\n    var differenceCreatedToCurrent = paramsEffectiveDurationOpened.toDate - paramsEffectiveDurationOpened.fromDate;\n    var differenceCurrentToEstimated = paramsEffectiveDuration.toDate - paramsEffectiveDuration.fromDate;\n    var differenceInitialToEstimated = diffMillisecondsCurrentToEstimated > 0 ? 0 : paramsEffectiveDurationInitialToEstimated.toDate - paramsEffectiveDurationInitialToEstimated.fromDate;\n\n    var actualDate = self.getDateWithTimezone(MOMENT_FORMAT, timeZoneName);\n    var relativeTime = bizagi.util.dateFormatter.getRelativeTime(new Date(actualDate.getTime() - differenceCreatedToCurrent), null, false, timeZoneName);\n    argsTemplate.colorState = currentWorkitem.colorState;\n    argsTemplate.relativeTimeState = bizagi.localization.getResource(\"workportal-project-activity-state-opened\").replace(\"%s\", relativeTime);\n    argsTemplate.percentCompleteBar = 100;\n\n    if (diffMillisecondsCreationToSolution === 0) {\n      argsTemplate.showEstimatedSolutionDate = false;\n    } else\n    {\n      argsTemplate.showEstimatedSolutionDate = true;\n      if (currentDateExceededEstimatedDate === false) {\n        var percentBar = self.getPercentBar(differenceInitialToEstimated / 1000 / 60, differenceCurrentToEstimated / 1000 / 60);\n        argsTemplate.percentCompleteBar = percentBar.percent;\n      }\n    }\n\n    if (currentWorkitem) {\n      argsTemplate.isEvent = bizagi.util.parseBoolean(currentWorkitem.isEvent);\n      argsTemplate.canShareActivity = currentWorkitem.canShareActivity;\n      argsTemplate.isShared = currentWorkitem.isShared;\n    }\n\n    argsTemplate.estimatedSolutionDateFormat = self.getFormattedDate(estimatedSolutionDateObject);\n\n    //Update widget\n    self.updateTemplateWidget(argsTemplate, currentState);\n  },\n\n  getPercentBar: function getPercentBar(totalMinutes, sectionMinutes) {\n    var response = {};\n    response.percent = Math.round((1 - sectionMinutes / totalMinutes) * 100);\n    return response;\n  },\n\n\n  updateTemplateWidget: function updateTemplateWidget(argsTemplate, currentState) {\n    var self = this,\n    $content = self.getContent().empty();\n    if (bizagi.override.enableShareActivity === false) {\n      argsTemplate.canShareActivity = false;\n      argsTemplate.isShared = false;\n    }\n    //Update widget\n    var contentTemplate = self.getTemplate(\"project-activityState-wrapper\");\n    contentTemplate.\n    render(argsTemplate).appendTo($content);\n\n    if (currentState.length > 0) {\n      self.initilizeActionMenu(currentState);\n    }\n    self.shareActivityTooltip();\n  },\n\n  /**\r\n      * show tooltip when the activity is shared or can be\r\n      */\n  shareActivityTooltip: function shareActivityTooltip() {\n    var self = this;\n    var activityButton = $(\"#ui-bizagi-wp-project-activity-button\", self.content);\n    activityButton.on('mouseenter', function () {\n      var texto = activityButton.hasClass(\"ui-bizagi-wp-project-activity-shared\") ? \"workportal-project-activity-shared\" : \"workportal-project-activity-share\";\n      activityButton.attr(\"title\", bizagi.localization.getResource(texto));\n    });\n    activityButton.tooltip({\n      tooltipClass: \"custom-tooltip-styling-bottom-bar\",\n      position: {\n        my: 'right top',\n        at: 'left top',\n        of: activityButton,\n        collision: 'flip' } });\n\n\n  },\n\n  getFormattedDate: function getFormattedDate(dateObj) {\n    var self = this;\n    var monthsNames = self.datePickerRegional.monthNames;\n    var shortMonth = dateObj.getMonth();\n    var bizagiLanguage = BIZAGI_LANGUAGE;\n    if (bizagiLanguage != null && bizagiLanguage != undefined && bizagiLanguage.length > 0 && bizagiLanguage.substring(0, 2) == \"fr\")\n    return $.datepicker.formatDate(\"dd\", dateObj) + \" \" + monthsNames[shortMonth];else\n\n    return monthsNames[shortMonth] + \" \" + $.datepicker.formatDate(\"dd\", dateObj);\n  },\n\n  clean: function clean() {\n    var self = this;\n    var cntxtSidebarActivity = self.contextsSidebarActivity || [];\n    this.params = {};\n    cntxtSidebarActivity.forEach(function (context) {\n      self.unsub(context, $.proxy(self.updateView, self));\n    });\n  },\n\n  /**\r\n      * Call services\r\n      */\n  callGetEffectiveDuration: function callGetEffectiveDuration(params) {\n    var self = this;\n    var d = $.Deferred();\n\n    //Fix .NET, multiple call service with same data in a few milliseconds\n    setTimeout(function () {\n      if (params.fromDate) {\n        $.when(\n        self.dataService.getEffectiveDuration(params)).\n        done(function (data) {\n          d.resolve(data);\n        });\n      } else\n      {\n        d.resolve(null);\n      }\n    }, 200);\n\n\n    return d.promise();\n  } });\n\n\nbizagi.injector.register(\"bizagi.workportal.widgets.project.activityState\", [\"workportalFacade\", \"dataService\", bizagi.workportal.widgets.project.activityState]);","/*\r\n *   Name: Bizagi Workportal Desktop Project Process State Controller\r\n *   Author: Elkin Fernando Siabato Cruz\r\n */\n\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.project.processState\", {}, {\n  /*\r\n                                                                                                 *   Constructor\r\n                                                                                                 */\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    self.contextsSidebarActivity = params.contextsSidebarActivity;\n\n    //Load templates\n    self.loadTemplates({\n      \"project-process-state\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.project.processState\").concat(\"#project-process-state\") });\n\n  },\n\n  /*\r\n      * Renders the template defined in the widget\r\n      */\n  renderContent: function renderContent() {\n    var self = this;\n    var template = self.getTemplate(\"project-process-state\");\n    self.content = template.render({});\n    return self.content;\n  },\n\n  /*\r\n      * links events with handlers\r\n      */\n  postRender: function postRender() {\n    var self = this;\n\n    //Handlers\n    self.contextsSidebarActivity.forEach(function (context) {\n      self.sub(context, $.proxy(self.updateView, self));\n    });\n  },\n\n  updateView: function updateView(event, params) {\n    var self = this,\n    args = params.args,\n    $content = self.getContent().empty();\n    self.params = args;\n\n    var argsTemplate = {};\n    argsTemplate[\"showParentProcess\"] = args[\"idParentCase\"] >= 1 ? true : false;\n    argsTemplate[\"parentProcess\"] = {\n      \"displayName\": args[\"parentDisplayName\"],\n      \"idCase\": args[\"idParentCase\"],\n      \"idWorkItem\": args[\"idWorkItem\"],\n      \"idTask\": args[\"idTask\"] == \"0\" ? \"\" : args[\"idTask\"],\n      \"idWorkflow\": args[\"idWorkflowParentCase\"] };\n\n\n    //Update widget\n    var contentTemplate = self.getTemplate(\"project-process-state\");\n    contentTemplate.\n    render($.extend(args, argsTemplate)).\n    appendTo($content);\n\n    //handle click\n\n    $(\"#go-to-parent-case\", $content).on(\"click\", $.proxy(self.onClickGoToParentCase, self));\n\n  },\n\n  onClickGoToParentCase: function onClickGoToParentCase(event) {\n    event.preventDefault();\n    var self = this;\n\n    self.routingExecute($(event.target).closest(\"#go-to-parent-case\"));\n  },\n\n  clean: function clean() {\n    var self = this;\n    self.params = {};\n    self.contextsSidebarActivity.forEach(function (context) {\n      self.unsub(context, $.proxy(self.updateView, self));\n    });\n  } });\n\n\n\nbizagi.injector.register('bizagi.workportal.widgets.project.processState', ['workportalFacade', 'dataService', bizagi.workportal.widgets.project.processState]);","/*\r\n *   Name: Bizagi Workportal Desktop Project Users Controller\r\n *   Author: Elkin Fernando Siabato Cruz\r\n */\n\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.project.users\", {}, {\n  /*\r\n                                                                                          *   Constructor\r\n                                                                                          */\n  init: function init(workportalFacade, dataService, relatedusers, params) {\n    var self = this;\n    self.relatedusers = relatedusers;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    self.contextsSidebarActivity = params.contextsSidebarActivity;\n\n    self.plugins = {};\n    self.users = [];\n    self.loadedUsers = false;\n\n    //Load templates\n    self.loadTemplates({\n      \"project-users\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.project.users\").concat(\"#project-users-main\") });\n\n  },\n\n  /*\r\n      * Renders the template defined in the widget\r\n      */\n  renderContent: function renderContent() {\n    var self = this;\n    self.content = $(\"<div></div>\");\n    return self.content;\n  },\n\n  /*\r\n      * links events with handlers\r\n      */\n  postRender: function postRender() {\n    var self = this;\n\n    //Handlers\n    self.contextsSidebarActivity.forEach(function (context) {\n      self.sub(context, $.proxy(self.updateView, self));\n    });\n    self.sub('ON_RENDER_FINISH', $.proxy(self.onRenderFinish, self));\n  },\n\n  updateView: function updateView(event, params) {\n    var self = this;\n    self.params = params;\n    setTimeout(function () {\n      if (self.loadedUsers === false) {\n        self.onRenderFinish();\n      }\n    }, 500);\n  },\n\n  onRenderFinish: function onRenderFinish() {\n    var self = this;\n    var args = self.params.args;\n    var $content = self.getContent().empty();\n    self.loadedUsers = true;\n\n    var contentTemplate = self.getTemplate(\"project-users\");\n    contentTemplate.render().appendTo($content);\n    self.showCreatorInformation($content);\n\n    var typesAssignUser = [{\n      id: args.createdBy.userId,\n      typeName: \"owner\" }];\n\n\n    if (args.idCase > 0) {\n      self.relatedusers.render(self.content, \".relatedusers-wrapper\", args.idCase, typesAssignUser);\n    }\n  },\n\n  /**\r\n      * show the information of the creator case\r\n      * @param {string} $content html conteiner\r\n      */\n  showCreatorInformation: function showCreatorInformation($content) {\n    var self = this;\n    var params = {\n      userIds: self.params.args.createdBy.userId,\n      width: 50,\n      height: 50 };\n\n\n    self.dataService.getUsersData(params).done(function (user) {\n      var userInfo = usersAdapter.createJsonUserInfo(\n      user[0].id,\n      user[0].name,\n      user[0].username,\n      user[0].picture ? \"data:image/png;base64,\" + user[0].picture : undefined,\n      user[0].email,\n      user[0].name.getInitials(),\n      false,\n      true,\n      [],\n      []);\n\n      $content.find(\"#ui-bizagi-wp-project-users-wrapper .ui-bizagi-wp-project-users-creator-info\").userinformation(self, { user: userInfo });\n    });\n  },\n\n  clean: function clean() {\n    var self = this;\n    self.loadedUsers = false;\n    self.contextsSidebarActivity.forEach(function (context) {\n      self.unsub(context, $.proxy(self.updateView, self));\n    });\n  } });\n\n\nbizagi.injector.register(\"bizagi.workportal.widgets.project.users\", [\"workportalFacade\", \"dataService\", \"relatedusers\", bizagi.workportal.widgets.project.users]);","/*\r\n *   Name: Bizagi Workportal Desktop Project Subprocesses Data Tooltip\r\n *   Author: Bizagi Latam\r\n */\n\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.project.subprocesses.data\", {\n\n  responseSubprocessState: {},\n  responseSubprocess: function responseSubprocess(newValue) {\n    if (newValue) {\n      responseSubprocessState = newValue;\n    }\n    return responseSubprocessState;\n  },\n\n  auxArrayListSubprocessesState: [],\n  auxArrayListSubprocesses: function auxArrayListSubprocesses(newItem) {\n    if (newItem) {\n      if (jQuery.isArray(newItem) && newItem.length === 0) {\n        this.auxArrayListSubprocessesState.length = 0; //clean array if change reference\n      } else\n      {\n        return this.auxArrayListSubprocessesState.push(newItem);\n      }\n    } else\n    {\n      return this.auxArrayListSubprocessesState;\n    }\n  } },\n{\n  /*\r\n   *   Constructor\r\n   */\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    // Init static properties\n    self.Class.auxArrayListSubprocesses([]);\n\n    //Load templates\n    self.loadTemplates({\n      \"project-subprocesses-tootip-custom-properties\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.project.subprocesses.data\").concat(\"#project-subprocesses-tooltip-custom-properties-wrapper\") });\n\n  },\n\n\n  initializeTooltip: function initializeTooltip(selectorTooltip) {\n    var self = this;\n    var $content = self.getContent();\n\n    $(selectorTooltip, $content).tooltip({\n      position: {\n        collision: \"flipfit\",\n        my: \"right center\", at: \"left-10 center\" },\n\n      show: null, // show immediately\n      content: function content() {\n\n        var idCase = $(this).closest(\"li\").find(\"#idCase\").val();\n        var itemsFinded = self.Class.auxArrayListSubprocesses().filter(function (item) {\n          return item.idCase == idCase;\n        });\n\n        var indexSubprocess, idCustData, text;\n        if (itemsFinded.length > 0) {\n          indexSubprocess = itemsFinded[0].indexSubprocess;\n          idCustData = itemsFinded[0].idCustData;\n          text = $(this).text();\n\n          return self.getContentTooltip(indexSubprocess, idCustData, text,\n          self.getTemplate(\"project-subprocesses-tootip-custom-properties\"));\n        }\n\n\n      },\n      open: function open(event, ui) {\n        if (typeof event.originalEvent === 'undefined') {\n          return false;\n        }\n        var $id = $(ui.tooltip).attr('id');\n        // close any lingering tooltips\n        $('div.ui-tooltip').not('#' + $id).remove();\n      },\n      close: function close(event, ui) {\n        ui.tooltip.hover(function () {\n          $(this).stop(true).fadeTo(400, 1);\n        },\n        function () {\n          $(this).fadeOut('400', function () {\n            $(this).remove();\n          });\n        });\n      } });\n\n  },\n\n  getContentTooltip: function getContentTooltip(indexSubprocess, idCustData, textLI, templateTooltip) {\n    var self = this;\n\n    //when not show custom columns\n    if (idCustData == \"-1\") {\n      idCustData = \"0\"; //So show only basic data subprocess\n    }\n\n    var rowCustomProperty = function rowCustomProperty(nameProperty, valueProperty) {\n      return {\n        nameProperty: nameProperty,\n        valueProperty: valueProperty };\n\n    };\n\n    var arrayCustomsProperties = [];\n    var auxValueProperty = \"\";\n    var subprocessData = self.getSubprocessData(indexSubprocess, idCustData);\n    var custData = subprocessData.custData;\n    var custDataTypes = subprocessData.custDataTypes;\n    var custFields = subprocessData.custFields;\n    var displayName = subprocessData.displayName;\n\n    //subproceso\n    arrayCustomsProperties.push(new rowCustomProperty(bizagi.localization.getResource(\"workportal-widget-inboxcommon-subprocess\"), displayName));\n\n    //Others custom properties\n    if (custData.length) {\n      for (var i = 0; i < custData.length; i += 1) {\n        auxValueProperty = custData[i];\n        if (custDataTypes) {\n          if (custDataTypes[i] == \"Money\") {\n            auxValueProperty = bizagi.util.formatMonetaryCell(auxValueProperty);\n          } else {\n            if (custDataTypes[i] == \"Boolean\") {\n              auxValueProperty = bizagi.util.formatBoolean(auxValueProperty);\n            } else {\n              if (custDataTypes[i] == \"Float\" || custDataTypes[i] == \"Real\") {\n                auxValueProperty = bizagi.util.formatDecimalCell(auxValueProperty);\n              } else\n              {\n                if (typeof auxValueProperty === \"function\") {\n                  auxValueProperty = \"\";\n                }\n              }\n            }\n          }\n        }\n        arrayCustomsProperties.push(new rowCustomProperty(custFields[i], auxValueProperty));\n      }\n    }\n\n    //Render properties\n    var objectTemplate = {};\n    objectTemplate.arrayCustomsProperties = arrayCustomsProperties;\n    objectTemplate.nameSubprocess = textLI;\n    var contentTemplate = templateTooltip;\n    var contentTableCustomProperties = $('<div class=\"bizagi-custom-tooltip-subprocesses\"></div>');\n    contentTemplate.render(objectTemplate).appendTo(contentTableCustomProperties);\n\n    return contentTableCustomProperties.html();\n  },\n\n  getSubprocessData: function getSubprocessData(indexSubprocess, idCustData) {\n    var self = this;\n    var subProcessData = {};\n    var subProcess = self.Class.responseSubprocess().subProcesses;\n    var subProcPersonalized = self.Class.responseSubprocess().subProcPersonalized;\n\n    if (subProcess && subProcess.length > 0) {\n      subProcessData.custData = subProcess[indexSubprocess].custData;\n      subProcessData.custDataTypes = subProcess[indexSubprocess].custDataTypes;\n      var customFields = self.Class.responseSubprocess().CustFields[idCustData];\n      subProcessData.custFields = customFields[Object.keys(customFields)[0]];\n      subProcessData.displayName = subProcess[indexSubprocess].displayName;\n    } else if (subProcPersonalized && Object.keys(subProcPersonalized).length > 0) {\n      subProcessData.custData = subProcPersonalized[0].subProcesses[indexSubprocess].custData;\n      subProcessData.custDataTypes = subProcPersonalized[0].subProcesses[indexSubprocess].custDataTypes;\n      subProcessData.custFields = subProcPersonalized[0].CustFields[0];\n      subProcessData.displayName = subProcPersonalized[0].subProcesses[indexSubprocess].displayName;\n    }\n    return subProcessData;\n  },\n\n\n  clean: function clean() {\n\n  } });\n\n\nbizagi.injector.register(\"bizagi.workportal.widgets.project.subprocesses.data\", [\"workportalFacade\", \"dataService\", bizagi.workportal.widgets.project.subprocesses.data]);","/*\r\n *   Name: Bizagi Workportal Desktop Project Events Controller\r\n *   Author: Elkin Fernando Siabato Cruz\r\n */\n\nbizagi.workportal.widgets.project.subprocesses.data.extend(\"bizagi.workportal.widgets.project.events\", {}, {\n  /*\r\n                                                                                                              *   Constructor\r\n                                                                                                              */\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    self.contextsSidebarActivity = params.contextsSidebarActivity;\n\n    //Load templates\n    self.loadTemplates({\n      \"project-events\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.project.events\").concat(\"#project-events-wrapper\") });\n\n  },\n\n  /*\r\n      * Renders the template defined in the widget\r\n      */\n  renderContent: function renderContent() {\n    var self = this;\n    var template = self.getTemplate(\"project-events\");\n    self.content = template.render({});\n    return self.content;\n  },\n\n  /*\r\n      * links events with handlers\r\n      */\n  postRender: function postRender() {\n    var self = this;\n\n    //Handlers\n    self.contextsSidebarActivity.forEach(function (context) {\n      self.sub(context, $.proxy(self.updateView, self));\n    });\n  },\n\n  updateView: function updateView(event, params) {\n    var self = this,\n    args = params.args,\n    $content = self.getContent().empty();\n    self.params = args;\n\n    $.when(self.getArgsTemplate(args)).done(function (responseArgsTemplate) {\n      //Update widget\n      var contentTemplate = self.getTemplate(\"project-events\");\n      contentTemplate.\n      render($.extend(args, responseArgsTemplate)).\n      appendTo($content);\n\n      $(\".list-events li.event a\", $content).on(\"click\", $.proxy(self.onClickGoEvent, self));\n\n      self.initializeTooltip(\".list-events li\");\n    });\n  },\n\n  getArgsTemplate: function getArgsTemplate(args) {\n    var def = $.Deferred(),\n    argsTemplate = {},\n    self = this;\n\n    //check if show event tab or not\n    if (args[\"countEvents\"] >= 1) {\n      for (var i = 0; i < args[\"currentState\"].length; i++) {\n        if (args[\"currentState\"][i][\"isEvent\"] == \"true\" && args[\"currentState\"][i][\"idWorkItem\"] == args.idWorkitem) {\n          args[\"countEvents\"] = args[\"countEvents\"] - 1;\n        }\n      }\n    }\n    argsTemplate[\"showEvents\"] = args[\"countEvents\"] >= 1 ? true : false;\n\n    if (argsTemplate[\"showEvents\"]) {\n      $.when(self.callSummaryCaseEvents(args.idCase)).done(function (responseEvents) {\n        args[\"showEvents\"] = responseEvents[\"events\"].length >= 1 ? true : false;\n\n        if (args[\"showEvents\"]) {\n          argsTemplate[\"events\"] = [];\n          responseEvents[\"events\"].forEach(function (elementEvent) {\n            argsTemplate[\"events\"].push($.extend(elementEvent[Object.keys(elementEvent)[0]],\n            { idWorkFlow: responseEvents[\"idWorkFlow\"] }));\n          });\n        }\n        def.resolve(argsTemplate);\n      });\n    } else\n    {\n      def.resolve(argsTemplate);\n    }\n    return def.promise();\n  },\n\n  /**\r\n      * Events UI\r\n      */\n\n  onClickGoEvent: function onClickGoEvent(event) {\n    event.preventDefault();\n    var self = this;\n    $.when(bizagi.util.autoSave()).done(function () {\n      self.routingExecute($(event.target).closest(\"li\"));\n    });\n  },\n\n  /**\r\n      * Call services\r\n      */\n\n  /*\r\n          *  Get data for users\r\n          */\n  callSummaryCaseEvents: function callSummaryCaseEvents(idCase) {\n    var self = this,\n    def = $.Deferred();\n\n    $.when(\n    self.dataService.summaryCaseEvents({\n      idCase: idCase })).\n\n    done(function (events) {\n      def.resolve(events);\n    });\n\n    return def.promise();\n  },\n\n  clean: function clean() {\n    var self = this;\n    this.params = {};\n    self.contextsSidebarActivity.forEach(function (context) {\n      self.unsub(context, $.proxy(self.updateView, self));\n    });\n  } });\n\n\n\nbizagi.injector.register('bizagi.workportal.widgets.project.events', ['workportalFacade', 'dataService', bizagi.workportal.widgets.project.events], true);","/*\r\n *   Name: Bizagi Workportal Desktop Project Subprocesses Controller\r\n *   Author: Elkin Fernando Siabato Cruz\r\n */\n\nbizagi.workportal.widgets.project.subprocesses.data.extend(\"bizagi.workportal.widgets.project.subprocesses\", {\n\n  responseSubprocess: function responseSubprocess(newValue) {\n    return this._super(newValue);\n  },\n\n  auxArrayListSubprocesses: function auxArrayListSubprocesses(newValue) {\n    return this._super(newValue);\n  } },\n\n{\n  /*\r\n   *   Constructor\r\n   */\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    self.contextsSidebarActivity = params.contextsSidebarActivity;\n\n    //Load templates\n    self.loadTemplates({\n      \"project-subprocesses\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.project.subprocesses\").concat(\"#project-subprocesses-wrapper\") });\n\n  },\n\n  /*\r\n      * Renders the template defined in the widget\r\n      */\n  renderContent: function renderContent() {\n    var self = this;\n    self.content = $(\"<div></div>\");\n    return self.content;\n  },\n\n  /*\r\n      * links events with handlers\r\n      */\n  postRender: function postRender() {\n    var self = this;\n\n    //Handlers\n    self.contextsSidebarActivity.forEach(function (context) {\n      self.sub(context, $.proxy(self.updateView, self));\n    });\n  },\n\n  updateView: function updateView(event, params) {\n    var self = this,\n    args = params.args,\n    $content = self.getContent().empty();\n    self.params = args;\n\n    if (self.params.idCase > 0) {\n      $.when(\n      self.dataService.summarySubProcess({\n        idCase: self.params.idCase })).\n\n      done(function (responseSubprocess) {\n        self.Class.responseSubprocess(responseSubprocess);\n\n        self.organizeDataForSubprocesses(self.params);\n      });\n    }\n  },\n\n  organizeDataForSubprocesses: function organizeDataForSubprocesses(args) {\n    var self = this;\n    if (self.Class.responseSubprocess().showSubProcess) {\n      $.each(self.Class.responseSubprocess().subProcesses, function (key) {\n        var custData = self.Class.responseSubprocess().subProcesses[key].custData;\n        if (custData && custData.length) {\n          for (var i = 0; i < custData.length; i += 1) {\n            if (custData[i] === null) {\n              custData[i] = \"\";\n            }\n          }\n        }\n\n      });\n\n      var subProcess = self.Class.responseSubprocess().subProcesses || self.Class.responseSubprocess().subProcPersonalized;\n\n      //prepare array with subprocess\n      self.Class.auxArrayListSubprocesses([]);\n      for (var i = 0; i < Object.keys(subProcess).length; i += 1) {\n        var tempSubprocesses = subProcess[i];\n\n        self.Class.auxArrayListSubprocesses({\n          isOpen: tempSubprocesses.isOpen,\n          radNumber: tempSubprocesses.radNumber,\n          displayName: tempSubprocesses.displayName,\n          idCase: tempSubprocesses.idCase,\n          indexSubprocess: i,\n          idCustData: tempSubprocesses.idCustData });\n\n        if (tempSubprocesses.subProcesses) {\n          Object.keys(tempSubprocesses).forEach(function (key) {//only one iteration\n            self.Class.auxArrayListSubprocesses({\n              isOpen: tempSubprocesses[key].isOpen,\n              radNumber: tempSubprocesses[key].radNumber,\n              displayName: tempSubprocesses[key].displayName,\n              idCase: tempSubprocesses[key].idCase,\n              indexSubprocess: i,\n              idCustData: tempSubprocesses[key].idCustData });\n\n          });\n        }\n      }\n\n      self.renderWidget();\n    }\n  },\n\n  renderWidget: function renderWidget() {\n    var self = this;\n    var $content = self.getContent();\n\n    //Update widget\n    var contentTemplate = self.getTemplate(\"project-subprocesses\");\n    contentTemplate.\n    render({ auxArrayListSubprocesses: self.Class.auxArrayListSubprocesses() }).\n    appendTo($content);\n\n    $(\".list-subprocesses a\", $content).on(\"click\", $.proxy(self.onClickGoSubprocess, self));\n\n    self.initializeTooltip(\".list-subprocesses li\");\n  },\n\n\n  /**\r\n      * Events UI\r\n      */\n\n  onClickGoSubprocess: function onClickGoSubprocess(event) {\n    event.preventDefault();\n    var self = this;\n\n    self.routingExecute($(event.target).closest(\"li\"));\n  },\n\n  clean: function clean() {\n    var self = this;\n\n    self.params = {};\n    self.pluginTooltip = null;\n\n    self.contextsSidebarActivity.forEach(function (context) {\n      self.unsub(context, $.proxy(self.updateView, self));\n    });\n  } });\n\n\n\nbizagi.injector.register(\"bizagi.workportal.widgets.project.subprocesses\", [\"workportalFacade\", \"dataService\", bizagi.workportal.widgets.project.subprocesses]);","/*\r\n    Name   : Bizagi Workportal Project Activity Description\r\n    Created on : Jun 27, 2017\r\n    Author     : Diana Mogollon\r\n*/\n\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.project.activity.description\", {}, {\n\n  /*\r\n                                                                                                         *   Constructor\r\n                                                                                                         */\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    params = params || {};\n\n    //Load templates\n    self.loadTemplates({\n      \"project-activity-description\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.project.activity.description\").concat(\"#project-activity-description\") });\n\n  },\n\n  /**\r\n      * Renders the template defined in the widget\r\n      */\n  renderContent: function renderContent() {\n    var self = this;\n    var template = self.getTemplate(\"project-activity-description\");\n    self.content = template.render();\n    return self.content;\n  },\n\n  /**\r\n      * links events with handlers\r\n      */\n  postRender: function postRender() {\n    var self = this;\n    self.description = self.getWorkitemDescription();\n    if (self.description) {\n      self.callTaskDescription();\n    } else {\n      self.content = $('<div />');\n    }\n  },\n\n  /**\r\n      * \r\n      * Call task description widget \r\n      */\n\n  callTaskDescription: function callTaskDescription() {\n    var self = this;\n    var width = 310;\n    var taskDescriptionParams = {\n      container: $(\"#ui-bizagi-wp-project-activity-task_description_container\", self.content),\n      description: self.description,\n      width: width };\n\n    self.taskDescriptionWidget = new bizagi.workportal.widgets.task.description(self.workportalFacade, self.dataService, taskDescriptionParams);\n    self.taskDescriptionWidget.render();\n  },\n\n  getWorkitemDescription: function getWorkitemDescription() {\n    var self = this;\n    var params = self.params || {};\n    var idWorkitem = params.idWorkitem || 0;\n    var currentState = params.currentState || [];\n    var description = \"\";\n\n    for (var i = 0; i < currentState.length; i++) {\n      if (idWorkitem == currentState[i].idWorkItem) {\n        description = currentState[i].tskDescription;\n        break;\n      }\n    }\n\n    return description;\n  },\n\n  /**\r\n      * Clean widget\r\n      */\n  clean: function clean() {\n\n  } });\n\n\nbizagi.injector.register('bizagi.workportal.widgets.project.activity.description', ['workportalFacade', 'dataService', bizagi.workportal.widgets.project.activity.description], true);"]}