{"version":3,"sources":["jquery/workportal/js/base/widget/bizagi.workportal.widgets.reports.js","jquery/workportal/js/base/widget/bizagi.workportal.widgets.reportsMenu.js","jquery/workportal/js/base/widget/bizagi.workportal.widgets.reportsChart.js","jquery/workportal/js/desktop/widget/bizagi.workportal.desktop.widgets.reports.js","jquery/workportal/js/desktop/widget/bizagi.workportal.desktop.widgets.reportsMenu.js","jquery/workportal/js/desktop/widget/bizagi.workportal.desktop.widgets.reportsChart.js","jquery/reporting/bizagi.reporting.definition.js"],"names":["bizagi","workportal","widgets","widget","extend","getWidgetName","BIZAGI_WORKPORTAL_WIDGET_REPORTS","init","workportalFacade","dataService","params","this","_super","renderContent","template","getTemplate","content","$","tmpl","endPoint","reportsMenu","getRawReportsJSON","BIZAGI_WORKPORTAL_WIDGET_REPORTS_MENU","Reports","displayName","resources","getResource","icon","show","menuSecurity","BAMProcess","BAMTask","BAMResourceMonitor","subItems","AnalyticsProcess","AnalyticsTask","AnalyticsSensor","BAM","Analytics","AnalysisQuery","reporting","defaultReport","filters","myTeam","BIZAGI_WORKPORTAL_WIDGET_REPORTS_CHART","callBack","loadReportingModule","self","loader","deferred","Deferred","start","then","reportingModule","facade","proxyPrefix","resolve","myTeamCallBack","when","getDataForMyTeam","done","result","$teamTab","items","length","css","reports","loadTemplates","concat","reports-elements","reports-empty-elements","reports-query-tree","reports-query-confirm","reports-query-edit","useNewEngine","postRender","configureTreeNavigation","configureBackButton","renderReports","scrollVertical","autohide","getReports","def","idElement","getAnalisysQueries","data","childsBam","childsAnalytics","push","childs","AnalysisQueries","getReportsById","each","key","value","promise","finalJson","queries","name","reportSet","extraArgs","idQuery","activeEdit","description","idParentQuery","appendElement","queryContent","mergeData","getContent","emptyTemplate","reportsContainer","empty","undefined","merge","nodes","checkChildNode","appendTo","configureNavTree","jsInjection","url","title","hackParams","callback","openModalWindow","sUrl","dialogWidth","dialogHeight","buttonArray","resizeable","doc","ownerDocument","controller","publish","widgetName","genericIframe","widgetURL","injectCss","modalParameters","afterLoad","openBACase","idCase","sHref","desktop","popup","closePopupInstance","workitem","indexOf","substring","action","routingAction","idWorkItem","buttonCancel_onclick","CloseParentDialog","afterLoadParams","actions","BIZAGI_WORKPORTAL_ACTION_ROUTING","BIZAGI_WORKPORTAL_WIDGET_GENERICIFRAME","confirm","headerTemplate","click","maximized","categoryTree","finalUrl","serviceLocator","getUrl","queryDisplayName","currentPopup","hack","id","e","stopPropagation","editFolder","parents","queryId","dialog","resizable","modal","buttons","text","deleteQueries","btnBack","remove","children","val","nextAll","idParent","bizagiScrollbar","element","util","trim","find","html","nodeTemplate","query","updateQueries","queryName","queryDescription","reportsMenu-container","reportsMenu-items","reportsMenu-itemsdata","reportsMenu-tree","reportsMenu-noitems","reportsMenu-edition","reportsMenu-vldmessage","reportsMenu-delete","buildAnalysisJSON","renderReportsMenu","eventsHandler","getAnalysisQueries","analysisJSON","getReporstAnalysisQuery","filterParameters","index","tmplItems","tmplNoItems","elements","pipe","$menuList","on","event","$el","execSelectedItem","buildNavTree","preventDefault","$li","closest","hasClass","showReportEdition","showDeleteForm","cancelReportAction","applyReportEdition","deleteReport","path","getFiltersById","form","slideUp","removeClass","addClass","slideDown","deleteReportData","response","status","$liSiblings","size","fadeOut","jQuery","grep","pop","trigger","categoryCnt","append","reportData","getReportsData","validateFormElements","JSON","stringify","updateReportData","cnt","siblings","msg","message","showValidationMessage","isValid","i","msgContainer","validateRequired","validateSpecialCharacters","removeValidationMessage","attr","RegExp","test","filter","obj","reportsChart","admin.case.search.quicksearch","caseSearch","report","referrerParams","fromBackButton","tab","loadReport","info","components","model","render","canvas","widgetInstance","attachReportEvents","apply","bindWindowResize","subscribe","showGraphicQuery","initCaseAdministration","showCaseAdministration","caseData","idTask","getCaseSearchContent","admin","container","loadtemplates","setupActivitiesLink","findResults","I_radNumber","radNumber","bamprocessloadanalysis","resource","bamprocessworkinprogress","bamtasksworkinprogress","bamtaskloadanalysis","analyticsprocesscycletime","analyticsprocessdurationhistogram","analyticsprocessactivity","analyticsprocessactivationranking","analyticsprocessfrequentspaths","analyticstaskcycletime","ResourceBAM","bamresourcemonitorworkinprogress","bamresourcemonitorworkinprogressuser","bamresourcemonitorworkinprogressteam","sensors"],"mappings":"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","sourcesContent":["/*\r\n*   Name: BizAgi Workportal Reports Widget Controller\r\n*   Author: Edward Morales\r\n*   Comments:\r\n*   -   This script will define a base class to show all reports categories\r\n*/\n\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.reports\", {}, {\n\n  /*\r\n                                                                                   *   Returns the widget name\r\n                                                                                   */\n  getWidgetName: function getWidgetName() {\n    return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_REPORTS;\n  },\n\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n  },\n\n  /*\r\n     *   Renders the content for the current controller\r\n     *   Returns a deferred because it has to load the current user\r\n     */\n  renderContent: function renderContent() {\n    var self = this;\n    var template = self.getTemplate(\"reports\");\n    var content = self.content = $.tmpl(template);\n\n    return content;\n  } });","/*\r\n*   Name: BizAgi Workportal Reports Widget Controller\r\n*   Author: David Romero\r\n*   Comments:\r\n*   -   This script will define a base class to show all reports categories\r\n*/\n\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.reportsMenu\", {}, {\n\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n\n    self._super(workportalFacade, dataService, params);\n\n    self.endPoint = [\"Reports\", \"BAMProcess\", \"BAMTask\", \"AnalyticsProcess\", \"AnalyticsTask\", \"AnalyticsSensor\", \"ResourceBAM\"];\n    self.reportsMenu = self.getRawReportsJSON();\n  },\n  /*\r\n     *   Returns the widget name\r\n     */\n  getWidgetName: function getWidgetName() {\n    return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_REPORTS_MENU;\n  },\n\n  /*\r\n     *   Renders the content for the current controller\r\n     *   Returns a deferred because it has to load the current user\r\n     */\n  renderContent: function renderContent() {\n    var self = this;\n    var template = self.getTemplate(\"reportsMenu-container\");\n    var content = self.content = $.tmpl(template);\n\n    return content;\n  },\n\n  /*\r\n     * JON for reports menu\r\n     */\n  getRawReportsJSON: function getRawReportsJSON() {\n\n    var self = this;\n\n    return {\n      \"Reports\": [\n      {\n        displayName: self.resources.getResource(\"workportal-menu-submenu-BAMMenu\"),\n        icon: \"bz-icon-folder-outline\",\n        show: function show() {\n          return bizagi.menuSecurity.BAMProcess || bizagi.menuSecurity.BAMTask || bizagi.menuSecurity.BAMResourceMonitor ? true : false;\n        },\n        endPoint: \"\",\n        subItems: \"BAM\" },\n\n      {\n        displayName: self.resources.getResource(\"workportal-menu-submenu-AnalyticsMenu\"),\n        icon: \"bz-icon-folder-outline\",\n        show: function show() {\n          return bizagi.menuSecurity.AnalyticsProcess || bizagi.menuSecurity.AnalyticsTask ? true : false;\n        },\n        endPoint: \"\",\n        subItems: \"Analytics\" },\n\n      {\n        displayName: self.resources.getResource(\"workportal-menu-submenu-AnalyticsSensor\"),\n        show: bizagi.menuSecurity.AnalyticsSensor,\n        icon: \"AnalyticsSensor bz-icon-rules\",\n        endPoint: \"AnalyticsSensor\",\n        subItems: [] }],\n\n\n      \"BAM\": [\n      {\n        displayName: self.resources.getResource(\"workportal-menu-submenu-AnalyticsProcess\"),\n        show: bizagi.menuSecurity.BAMProcess,\n        icon: \"BAMProcess bz-icon-cogs\",\n        endPoint: \"BAMProcess\",\n        subItems: [] },\n\n      {\n        displayName: self.resources.getResource(\"workportal-menu-submenu-AnalyticsTask\"),\n        show: bizagi.menuSecurity.BAMTask,\n        icon: \"BAMTask bz-icon-sheet-pencil\",\n        endPoint: \"BAMTask\",\n        subItems: [] },\n\n      {\n        displayName: self.resources.getResource(\"workportal-menu-submenu-BAMResourceMonitor\"),\n        show: bizagi.menuSecurity.BAMResourceMonitor,\n        icon: \"BAMResourceMonitor bz-icon-user-manage\",\n        endPoint: \"ResourceBAM\",\n        subItems: [] }],\n\n\n      \"Analytics\": [\n      {\n        displayName: self.resources.getResource(\"workportal-menu-submenu-AnalyticsProcess\"),\n        show: bizagi.menuSecurity.AnalyticsProcess,\n        icon: \"AnalyticsProcess bz-icon-cogs\",\n        endPoint: \"AnalyticsProcess\",\n        subItems: [] },\n\n      {\n        displayName: self.resources.getResource(\"workportal-menu-submenu-AnalyticsTask\"),\n        show: bizagi.menuSecurity.AnalyticsTask,\n        icon: \"AnalyticsTask bz-icon-sheet-pencil\",\n        endPoint: \"AnalyticsTask\",\n        subItems: [] }],\n\n\n      \"AnalysisQuery\": [] };\n\n\n\n  } });","/*\r\n *   Name: BizAgi Workportal Reports Chart Widget\r\n *   Author: David Romero\r\n *   Comments:\r\n *   -   This script will load the selected report in workarea\r\n */\n\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.reportsChart\", {}, {\n\n  /*\r\n                                                                                        * Initialize report widget\r\n                                                                                        */\n  init: function init(workportalFacade, dataService, params) {\n\n    var self = this;\n\n    self._super(workportalFacade, dataService, params);\n    self.endPoint = bizagi.reporting[params.endPoint];\n    self.endPoint.defaultReport = params.defaultReport || self.endPoint.defaultReport;\n    self.filters = params.filters || {};\n    self.myTeam = [];\n\n  },\n\n  /*\r\n     *   Returns the widget name\r\n     */\n  getWidgetName: function getWidgetName() {\n    return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_REPORTS_CHART;\n  },\n\n  /*\r\n     *   Renders the content for the current controller\r\n     *   Returns a deferred because it has to load the current user\r\n     */\n  renderContent: function renderContent() {\n\n    var self = this;\n    var template = self.getTemplate(\"reportsChart\");\n    var content = self.content = $.tmpl(template, self.endPoint);\n\n    //Evaluate callbacks\n    if (typeof self.endPoint.callBack !== \"undefined\") {\n      self[self.endPoint.callBack]();\n    }\n\n    return content;\n  },\n\n  /*\r\n     * Load Reporting Module\r\n     */\n  loadReportingModule: function loadReportingModule() {\n\n    var self = this;\n    var loader = bizagi.loader;\n    var deferred = new $.Deferred();\n\n    loader.init(function () {\n      loader.start(\"reporting\").then(function () {\n        self.reportingModule = new bizagi.reporting.facade({\n          proxyPrefix: typeof bizagi.proxyPrefix !== \"undefined\" ? bizagi.proxyPrefix : \"\" });\n\n        deferred.resolve();\n      });\n    });\n\n    return deferred;\n  },\n\n  /*\r\n     * callBack for report myTeam\r\n     */\n  myTeamCallBack: function myTeamCallBack() {\n\n    var self = this;\n\n    return $.when(self.dataService.getDataForMyTeam()).done(function (result) {\n\n      var $teamTab = $(\"li[data-report='bamresourcemonitorworkinprogressteam']\", self.content);\n\n      if (!result.items.length) {\n        $teamTab.css('display', 'none');\n      } else {\n        self.myTeam = result;\n      }\n\n    });\n  } });","/*\r\n*   Name: BizAgi Workportal Desktop Reports Widget Controller\r\n*   Author: Edward Morales\r\n*   Comments:\r\n*   -   This script will provide desktop overrides to implement reports widget\r\n*/\n\n// Auto extend\nbizagi.workportal.widgets.reports.extend(\"bizagi.workportal.widgets.reports\", {}, {\n\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    //Load templates\n    self.loadTemplates({\n      \"reports\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.reports\").concat(\"#ui-bizagi-workportal-widget-reports\"),\n      \"reports-elements\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.reports\").concat(\"#ui-bizagi-workportal-widget-reports-elements\"),\n      \"reports-empty-elements\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.reports\").concat(\"#ui-bizagi-workportal-widget-reports-empty-elements\"),\n      \"reports-query-tree\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.reports\").concat(\"#ui-bizagi-workportal-widget-reports-query-tree\"),\n      \"reports-query-confirm\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.reports\").concat(\"#ui-bizagi-workportal-widget-reports-confirm\"),\n      \"reports-query-edit\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.reports\").concat(\"#ui-bizagi-workportal-widget-reports-edit\"),\n      useNewEngine: false });\n\n  },\n\n  /**\r\n     *   To be overriden in each device to apply layouts\r\n     */\n  postRender: function postRender() {\n    var self = this;\n\n    // Set bind event for last element\n    self.configureTreeNavigation();\n\n    // Bind back button\n    self.configureBackButton();\n\n    // Render base categories\n    self.renderReports();\n\n    // set vertical scroll\n    self.scrollVertical({\n      \"autohide\": false });\n\n\n    //self.getSubMenuData(self.jsonSecurityList,\"AnalysisReports\")\n  },\n\n  /**\r\n     * Get all categories of reports\r\n     * @param integer idElement\r\n     * @return\r\n     */\n  getReports: function getReports(params) {\n    var self = this;\n    var def = new $.Deferred();\n    var idElement = params.idElement || 0;\n\n    $.when(self.getAnalisysQueries()).\n    done(function (data) {\n      var reports = [];\n      var childsBam = [];\n      var childsAnalytics = [];\n      /*\r\n                                *\"BAMTask\",\r\n                                \"AnalyticsProcess\",\r\n                                \"AnalyticsTask\",\r\n                                \"AnalyticsSensor\",\r\n                                \"AnalysisQueries\"\r\n                                *\r\n                                **/\n      // Check Menu security\n\n      if (bizagi.menuSecurity.BAMProcess) {\n        childsBam.push({\n          idElement: 2,\n          displayName: self.resources.getResource('workportal-menu-submenu-BAMProcess'),\n          icon: \"BAMProcess\",\n          endPoint: \"BAMProcess\",\n          childs: [] });\n\n      }\n\n      if (bizagi.menuSecurity.BAMTask) {\n        childsBam.push({\n          idElement: 3,\n          displayName: self.resources.getResource('workportal-menu-submenu-BAMTask'),\n          icon: \"BAMTask\",\n          endPoint: \"BAMTask\",\n          childs: [] });\n\n      }\n\n      if (bizagi.menuSecurity.BAMResourceMonitor) {\n        childsBam.push({\n          idElement: 4,\n          displayName: self.resources.getResource('workportal-menu-submenu-BAMResourceMonitor'),\n          icon: \"BAMResourceMonitor\",\n          endPoint: \"ResourceBAM\",\n          childs: [] });\n\n      }\n\n\n      if (childsBam.length > 0) {\n        reports.push({\n          idElement: 1,\n          displayName: self.resources.getResource('workportal-menu-submenu-BAMMenu'),\n          icon: \"\",\n          endPoint: \"\",\n          childs: childsBam });\n\n      }\n\n\n      if (bizagi.menuSecurity.AnalyticsProcess) {\n        childsAnalytics.push({\n          idElement: 11,\n          displayName: self.resources.getResource('workportal-menu-submenu-AnalyticsProcess'),\n          icon: \"AnalyticsProcess\",\n          endPoint: \"AnalyticsProcess\",\n          childs: [] });\n\n      }\n\n      if (bizagi.menuSecurity.AnalyticsTask) {\n        childsAnalytics.push({\n          idElement: 12,\n          displayName: self.resources.getResource('workportal-menu-submenu-AnalyticsTask'),\n          icon: \"AnalyticsTask\",\n          endPoint: \"AnalyticsTask\",\n          childs: [] });\n\n      }\n\n      if (childsAnalytics.length > 0) {\n        reports.push({\n          idElement: 10,\n          displayName: self.resources.getResource('workportal-menu-submenu-AnalyticsMenu'),\n          icon: \"\",\n          endPoint: \"\",\n          childs: childsAnalytics });\n\n      }\n\n      if (bizagi.menuSecurity.AnalyticsSensor) {\n        reports.push({\n          idElement: 13,\n          displayName: self.resources.getResource('workportal-menu-submenu-AnalyticsSensor'),\n          icon: \"AnalyticsSensor\",\n          endPoint: \"AnalyticsSensor\",\n          childs: [] });\n\n      }\n\n      if (bizagi.menuSecurity.AnalysisQueries && data.length > 0) {\n        reports.push({\n          idElement: 20,\n          displayName: self.resources.getResource('workportal-menu-submenu-AnalysisQueries'),\n          icon: \"\",\n          endPoint: \"\",\n          childs: data });\n\n      }\n\n      var getReportsById = function getReportsById(idElement, reports) {\n        var result;\n        if (idElement) {\n          $.each(reports, function (key, value) {\n            if (typeof result == \"undefined\") {\n              if (value.idElement == idElement) {\n                result = value.childs;\n              } else {\n                return getReportsById(idElement, value.childs);\n              }\n            }\n          });\n        } else {\n          result = reports;\n        }\n        return result || {};\n      };\n      def.resolve(getReportsById(idElement, reports));\n    });\n    return def.promise();\n\n  },\n\n\n\n  /**\r\n     * Get getAnalisysQueries service and parse json to\r\n     * create tree categories\r\n     * \r\n     * @return json\r\n     */\n  getAnalisysQueries: function getAnalisysQueries() {\n    var self = this;\n    var finalJson = [];\n    var idElement = 100;\n    var def = new $.Deferred();\n\n    $.when(\n    self.dataService.getAnalisysQueries()).\n    done(function (data) {\n      $.each(data.queries, function (key, value) {\n        finalJson.push({\n          idElement: idElement++,\n          displayName: value.name || \"\",\n          icon: \"\",\n          endPoint: value.reportSet,\n          extraArgs: \"?idUserQuery=\" + value.idQuery,\n          activeEdit: true,\n          description: value.description,\n          idQuery: value.idQuery,\n          childs: [] });\n\n      });\n      def.resolve(finalJson);\n    });\n\n    return def.promise();\n\n  },\n\n  /**\r\n     * Render List categories for each idCategory\r\n     */\n  renderReports: function renderReports(idParentQuery, appendElement) {\n    var self = this;\n    var content = self.getContent();\n    var template = self.getTemplate(\"reports-elements\");\n    var emptyTemplate = self.getTemplate(\"reports-empty-elements\");\n    var reportsContainer = $(\"#reports\", content);\n    var queryContent;\n    var mergeData;\n\n    $.when(\n    self.getReports({\n      idElement: idParentQuery })).\n\n    done(function (data) {\n\n      reportsContainer.empty();\n\n      // check if service have nodes\n      data = data || {};\n      if (data.length >= 1) {\n        // Check if have appendElement\n        if (appendElement != undefined) {\n          mergeData = $.merge(appendElement, data);\n        } else {\n          mergeData = data;\n        }\n\n        queryContent = $.tmpl(template, {\n          nodes: mergeData,\n          idParentQuery: idParentQuery },\n        {\n          checkChildNode: self.checkChildNode });\n\n      } else {\n        queryContent = $.tmpl(emptyTemplate, {\n          nodes: mergeData,\n          idParentQuery: idParentQuery });\n\n      }\n      queryContent.appendTo(reportsContainer);\n\n      // set actions to rendered html \n      self.configureNavTree(reportsContainer);\n    });\n  },\n\n  /*\r\n     *   Get the page hacks in order to work properly in each case\r\n     */\n  jsInjection: function jsInjection(url, title) {\n    var self = this;\n    var callback;\n    var hackParams = {\n      title: title };\n\n\n    callback = function callback(params) {\n      // This script will execute inside the iframe context\n\n      this.openModalWindow = function (sUrl, dialogWidth, dialogHeight, buttonArray, resizeable) {\n\n        //Instance dialog\n        var doc = this.ownerDocument;\n        var callBackOpenCase = function callBackOpenCase(params) {\n          this.openBACase = function (idCase, sHref) {\n            // close parent window\n            params.bizagi.workportal.desktop.popup.closePopupInstance();\n            params.controller.publish(\"closeCurrentDialog\");\n\n            var workitem = null;\n            if (sHref.indexOf(\"idWorkitem=\") > -1) {\n              workitem = sHref.substring(sHref.indexOf(\"idWorkitem=\") + 11);\n              workitem = workitem.substring(0, workitem.indexOf(\"&\"));\n            }\n            // Executes the act on\n            params.controller.publish(\"executeAction\", {\n              action: params.routingAction,\n              idCase: idCase,\n              idWorkItem: workitem });\n\n\n            // close dialog\n            params.controller.publish(\"closeCurrentDialog\");\n          };\n          this.buttonCancel_onclick = function () {\n            params.controller.publish(\"closeCurrentDialog\");\n          };\n          this.CloseParentDialog = function () {\n            params.controller.publish(\"closeCurrentDialog\");\n          };\n        };\n        params.controller.publish(\"showDialogWidget\", {\n          widgetName: params.genericIframe,\n          widgetURL: \"App/Cockpit/\" + sUrl,\n          injectCss: [\".ui-bizagi-old-render*\", \"@font-face\"],\n          modalParameters: {\n            title: \"Bizagi\" },\n\n          afterLoad: callBackOpenCase,\n          afterLoadParams: {\n            routingAction: params.bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,\n            genericIframe: params.bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_GENERICIFRAME,\n            bizagi: params.bizagi,\n            doc: doc } });\n\n\n      };\n    };\n    // Set hack params\n    hackParams = $.extend(hackParams, {\n      routingAction: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,\n      genericIframe: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_GENERICIFRAME,\n      bizagi: bizagi });\n\n\n\n    return {\n      callback: callback,\n      params: hackParams };\n\n  },\n\n  configureNavTree: function configureNavTree(reportsContainer) {\n    var self = this;\n    var confirm = self.getTemplate(\"reports-query-confirm\");\n    var headerTemplate = self.getTemplate(\"reports-query-tree\");\n\n    // Bind for list elements\n    $(\".reportsListDisplay\", reportsContainer).click(function () {\n      var endPoint = $(this).data('endpoint');\n      var idElement = $(this).data('id-element');\n      var displayName = $(this).data('displayname');\n      var maximized = $(this).data('maximized') || false;\n      var extraArgs = $(this).data('extra-args');\n      var categoryTree = $(\"#categoryTree\");\n      var finalUrl = self.dataService.serviceLocator.getUrl(endPoint) + extraArgs;\n\n      // check if element has childrens\n      if (endPoint == \"\") {\n        // Its category, render their childrens\n        // and set the new category whitin tree nav\n        self.renderReports(idElement);\n\n        $.tmpl(headerTemplate, {\n          idElement: idElement,\n          queryDisplayName: displayName }).\n        appendTo(categoryTree);\n        self.configureTreeNavigation();\n\n      } else {\n        // If the same popup is opened close it\n        if (self.currentPopup == \"reports\") {\n          bizagi.workportal.desktop.popup.closePopupInstance();\n          return;\n        }\n        var hack = self.jsInjection(self.dataService.serviceLocator.getUrl(endPoint), displayName);\n        // Shows a popup widget\n        self.currentPopup = \"reports\";\n        self.publish(\"showDialogWidget\", {\n          widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_GENERICIFRAME,\n          widgetURL: finalUrl,\n          maximized: maximized,\n          // injectCss:[\".ui-bizagi-old-render*\",\".\"+title, \"@font-face\"],\n          modalParameters: {\n            title: displayName,\n            id: endPoint },\n\n          afterLoad: hack.callback,\n          afterLoadParams: hack.params });\n\n        if (self.params.widgetName == \"reports\") {\n          bizagi.workportal.desktop.popup.closePopupInstance();\n          return;\n        };\n      }\n    });\n\n\n    // Bind for action elements (Edit and delete buttons)\n    $(\".editButton\").click(function (e) {\n      e.stopPropagation();\n      self.editFolder($(this).parents('ul'));\n      bizagi.workportal.desktop.popup.closePopupInstance();\n    });\n\n    $(\".deleteButton\").click(function (e) {\n      e.stopPropagation();\n\n      var queryId = $(this).parents('ul').data('idquery');\n      var content = $.tmpl(confirm);\n\n      // Open dialog with confirm message\n      $(content).dialog({\n        resizable: true,\n        modal: true,\n        title: self.getResource(\"workportal-widget-reports-confirm-title\"),\n        buttons: [\n        {\n          text: self.getResource(\"workportal-widget-reports-confirm-delete\"),\n          click: function click() {\n            // Call service\n            self.dataService.deleteQueries(queryId); // Close dialog and menu\n            $(this).dialog(\"close\");\n            bizagi.workportal.desktop.popup.closePopupInstance();\n          } },\n\n        {\n          text: self.getResource(\"workportal-widget-reports-confirm-cancel\"),\n          click: function click() {\n            $(this).dialog(\"close\");\n          } }] });\n\n\n\n    });\n  },\n\n  /**\r\n     *   Binds the back buttons so we can navigate back\r\n     */\n  configureBackButton: function configureBackButton() {\n    var self = this;\n    var content = self.getContent();\n    var btnBack = $(\"#bt-back\", content);\n    var categoryTree = $(\"#categoryTree\", content);\n\n    // Bind click\n    btnBack.click(function () {\n      if ($(\"li\", categoryTree).length > 1) {\n        // Removes last child                    \n        $(\"li:last-child\", categoryTree).remove();\n        var idParentQuery = $(\"li:last-child\").children(\"#idParent\").val();\n\n        // Render Querie again\n        self.renderReports(idParentQuery);\n      }\n    });\n  },\n\n  /**\r\n     * Bind tree navigation\r\n     */\n  configureTreeNavigation: function configureTreeNavigation() {\n    var self = this;\n    var content = self.getContent();\n    var categoryTree = $(\"#categoryTree\", content);\n\n    // Bind header events\n    $(\"li:last-child\", categoryTree).click(function () {\n      // Remove all elements\n      $(this).nextAll().remove();\n      var idParent = $(this).data(\"id-element\");\n      // Render query tree again\n      self.renderReports(idParent);\n    });\n  },\n\n  scrollVertical: function scrollVertical() {\n    var self = this;\n    var content = self.getContent();\n\n    $(\"#reports\", content).bizagiScrollbar({\n      \"autohide\": false });\n\n  },\n\n  /**\r\n     * Edit folder\r\n     */\n  editFolder: function editFolder(element) {\n    var self = this;\n    var value = bizagi.util.trim($(element).find(\"h3\").html());\n    var description = bizagi.util.trim($(\".newCaseDescription\", element).html());\n    var idQuery = $(element).data(\"idquery\");\n    var nodeTemplate = self.getTemplate(\"reports-query-edit\");\n\n    var dialogForm = $.tmpl(nodeTemplate, {\n      name: value,\n      description: description,\n      idQuery: idQuery });\n\n\n\n    dialogForm.dialog({\n      resizable: true,\n      modal: true,\n      title: self.getResource(\"workportal-widget-reports-confirm-edit-title\"),\n      buttons: [\n      {\n        text: self.getResource(\"workportal-widget-reports-confirm-save\"),\n        click: function click() {\n          var query = $(\"#namequery\", this).val();\n          var description = $(\"#querydescripcion\", this).val();\n          var idQuery = $(this).data(\"idquery\");\n\n          self.dataService.updateQueries({\n            queryName: query,\n            queryDescription: description,\n            idQuery: idQuery });\n\n\n          $(this).dialog(\"close\");\n          bizagi.workportal.desktop.popup.closePopupInstance();\n        } },\n\n      {\n        text: self.getResource(\"workportal-widget-reports-confirm-cancel\"),\n        click: function click() {\n          $(this).dialog(\"close\");\n        } }] });\n\n\n\n  } });","/*\r\n*   Name: BizAgi Workportal Desktop Reports Widget Controller\r\n*   Author: David Romero\r\n*/\n\n// Auto extend\nbizagi.workportal.widgets.reportsMenu.extend(\"bizagi.workportal.widgets.reportsMenu\", {}, {\n\n  init: function init(workportalFacade, dataService, params) {\n\n    var self = this;\n    self._super(workportalFacade, dataService, params);\n\n    //Load templates\n    self.loadTemplates({\n      \"reportsMenu-container\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.reportsMenu\").concat(\"#ui-bizagi-workportal-widget-reportsmenu-container\"),\n      \"reportsMenu-items\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.reportsMenu\").concat(\"#ui-bizagi-workportal-widget-reportsmenu-items\"),\n      \"reportsMenu-itemsdata\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.reportsMenu\").concat(\"#ui-bizagi-workportal-widget-reportsmenu-itemsdata\"),\n      \"reportsMenu-tree\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.reportsMenu\").concat(\"#ui-bizagi-workportal-widget-reportsmenu-tree\"),\n      \"reportsMenu-noitems\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.reportsMenu\").concat(\"#ui-bizagi-workportal-widget-reportsmenu-noitems\"),\n      \"reportsMenu-edition\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.reportsMenu\").concat(\"#ui-bizagi-workportal-widget-reportsmenu-edition\"),\n      \"reportsMenu-vldmessage\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.reportsMenu\").concat(\"#ui-bizagi-workportal-widget-reportsmenu-vldnmessage\"),\n      \"reportsMenu-delete\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.reportsMenu\").concat(\"#ui-bizagi-workportal-widget-reportsmenu-delete\"),\n      useNewEngine: false });\n\n  },\n\n  /**\r\n     *   To be overriden in each device to apply layouts\r\n     */\n  postRender: function postRender() {\n    var self = this;\n\n    //prepare json\n    $.when(self.buildAnalysisJSON()).done(function () {\n\n      //render reports menu\n      self.renderReportsMenu(\"Reports\");\n    });\n\n    //Events handler\n    self.eventsHandler();\n  },\n\n  /**\r\n     * Get getAnalysis Queries service and parse json to\r\n     * create tree categories\r\n     */\n  getAnalysisQueries: function getAnalysisQueries() {\n\n    var self = this;\n    var analysisJSON = [];\n    var def = new $.Deferred();\n\n    $.when(self.dataService.getReporstAnalysisQuery()).done(function (data) {\n      $.each(data.queries, function (key, value) {\n        analysisJSON.push({\n          displayName: value.name || \"\",\n          description: value.description || \"\",\n          icon: \"processIco\",\n          show: true,\n          filters: value.filterParameters,\n          endPoint: self.endPoint[value.reportSet],\n          reportSet: value.reportSet,\n          activeEdit: true,\n          id: value.id,\n          subItems: [] });\n\n      });\n\n      def.resolve(analysisJSON);\n    });\n\n    return def.promise();\n  },\n\n  /*\r\n     * Render list categories for each idCategory\r\n     */\n  renderReportsMenu: function renderReportsMenu(index) {\n\n    var self = this;\n    var content = self.getContent();\n    var tmplItems = self.getTemplate(\"reportsMenu-items\");\n    var tmplNoItems = self.getTemplate(\"reportsMenu-noitems\");\n    var reportsContainer = $(\"#bz-wp-widget-reportsmenu-list\", content);\n    var elements = self.reportsMenu[index];\n\n    if (elements.length) {\n      reportsContainer.html($.tmpl(tmplItems, { elements: elements }));\n    } else {\n      reportsContainer.html($.tmpl(tmplNoItems, { elements: elements }));\n    }\n\n  },\n\n  /*\r\n     * Build menu JSON\r\n     */\n  buildAnalysisJSON: function buildAnalysisJSON() {\n\n    var self = this;\n    var deferred = $.Deferred();\n\n    $.when(self.getAnalysisQueries()).pipe(function (data) {\n\n      if (bizagi.menuSecurity.AnalysisQueries && data.length > 0) {\n\n        self.reportsMenu[\"AnalysisQuery\"] = data;\n\n        self.reportsMenu[\"Reports\"].push({\n          displayName: self.resources.getResource('workportal-menu-submenu-AnalysisQueries'),\n          show: true,\n          icon: \"\",\n          endPoint: \"\",\n          subItems: \"AnalysisQuery\" });\n\n      }\n\n      deferred.resolve();\n    });\n\n    return deferred.promise();\n  },\n\n  /*\r\n     * Events Handler\r\n     */\n  eventsHandler: function eventsHandler() {\n\n    var self = this;\n    var content = self.getContent();\n    var $menuList = $(\"#bz-wp-widget-reportsmenu-list\", content);\n\n    //event for selected menu item\n    $menuList.on(\"click\", \"li.bz-wp-widget-reportsmenu-readmode\", function (event) {\n\n      event.stopPropagation();\n\n      var $el = $(this);\n      var subItems = $el.data(\"subitems\"),\n      displayName = $el.data(\"displayname\"),\n      endPoint = $el.data(\"endpoint\"),\n      id = $el.find(\".bz-wp-widget-reportsmenu-itemactions\").data(\"id\");\n\n      //execute selected item\n      self.execSelectedItem(id, subItems, endPoint);\n\n      //build navigation tree\n      self.buildNavTree(displayName, subItems);\n\n    });\n\n    //event for edit o delete custom report\n    $menuList.on(\"click\", \".bz-wp-widget-reportsmenu-action\", function (event) {\n\n      event.stopPropagation();\n      event.preventDefault();\n\n      var $li = $(this).closest(\"li.bz-wp-widget-reportsmenu-item\");\n      var id = $(this).closest(\".bz-wp-widget-reportsmenu-itemactions\").data(\"id\");\n\n      if ($(this).hasClass(\"bz-wp-widget-reportsmenu-edit\")) {\n        self.showReportEdition(id, $li);\n      } else if ($(this).hasClass(\"bz-wp-widget-reportsmenu-delete\")) {\n        self.showDeleteForm(id, $li);\n      } else if ($(this).hasClass(\"bz-wp-widget-reportsmenu-cancel\")) {\n        self.cancelReportAction(id, $li);\n      } else if ($(this).hasClass(\"bz-wp-widget-reportsmenu-applyedition\")) {\n        self.applyReportEdition(id, $li);\n      } else if ($(this).hasClass(\"bz-wp-widget-reportsmenu-applydelete\")) {\n        self.deleteReport(id, $li);\n      }\n\n    });\n\n    //event for navigation tree\n    $(\"#bz-wp-widget-reportsmenu-navtree\", content).on(\"click\", \"li\", function (event) {\n\n      //remove tree\n      $(this).nextAll().remove();\n\n      var path = $(this).data(\"path\");\n      self.renderReportsMenu(path);\n\n    });\n\n  },\n\n  /*\r\n     * Actions for the selected item in menu\r\n     */\n  execSelectedItem: function execSelectedItem(id, subItems, endPoint) {\n\n    var self = this;\n\n    if (endPoint === \"\") {\n      self.renderReportsMenu(subItems);\n    } else {\n\n      var filters = !id ? {} : self.getFiltersById(id);\n\n      self.publish(\"changeWidget\", {\n        widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_REPORTS_CHART,\n        endPoint: endPoint,\n        filters: filters });\n\n    }\n\n  },\n\n  /*\r\n     * Form to delete report \r\n     */\n  showDeleteForm: function showDeleteForm(id, $li) {\n\n    var self = this;\n    var tmpl = self.getTemplate(\"reportsMenu-delete\");\n    var form = $.tmpl(tmpl, { id: id });\n\n    $li.slideUp(\"fast\", function () {\n      $(this).removeClass('bz-wp-widget-reportsmenu-readmode').addClass('bz-wp-widget-reportsmenu-edition').html(form);\n    });\n\n    $li.slideDown(\"fast\");\n  },\n\n  /*\r\n     * Delete report by id\r\n     */\n  deleteReport: function deleteReport(id, $li) {\n\n    var self = this;\n    var content = self.getContent();\n    var params = \"id=\" + id;\n\n    $.when(self.dataService.deleteReportData(params)).done(function (response) {\n\n      if (response.status === true) {\n\n        var $liSiblings = $li.nextAll();\n\n        if ($liSiblings.size() > 0) {\n\n          $liSiblings.slideUp(\"fast\", function () {\n            //remove item\n            $li.remove();\n          });\n\n          $liSiblings.slideDown(\"fast\");\n        } else {\n          $li.fadeOut(\"fast\", function () {\n            $(this).remove();\n          });\n        }\n\n        //remove data from array\n        self.reportsMenu[\"AnalysisQuery\"] = jQuery.grep(self.reportsMenu[\"AnalysisQuery\"], function (value) {\n          return value.id !== id;\n        });\n\n        if (!self.reportsMenu[\"AnalysisQuery\"].length) {\n          self.reportsMenu[\"Reports\"].pop();\n          $(\"#bz-wp-widget-reportsmenu-navtree li:nth-of-type(1)\", content).trigger(\"click\");\n        }\n\n      }\n\n    });\n\n  },\n\n  /*\r\n     * Build Navigation Tree\r\n     */\n  buildNavTree: function buildNavTree(displayName, path) {\n\n    var self = this;\n    var content = self.getContent();\n    var tmpl = self.getTemplate(\"reportsMenu-tree\");\n    var categoryCnt = $.tmpl(tmpl, { displayName: displayName, path: path });\n\n    $(\"#bz-wp-widget-reportsmenu-navtree\", content).append(categoryCnt);\n\n  },\n\n  /*\r\n     * Show edition form \r\n     */\n  showReportEdition: function showReportEdition(id, $li) {\n\n    var self = this;\n    var tmpl = self.getTemplate(\"reportsMenu-edition\");\n    var reportData = self.getReportsData(id);\n\n    var form = $.tmpl(tmpl, {\n      displayName: reportData[0].displayName,\n      description: reportData[0].description,\n      id: id });\n\n\n    $li.slideUp(\"fast\", function () {\n      $(this).removeClass('bz-wp-widget-reportsmenu-readmode').addClass('bz-wp-widget-reportsmenu-edition').html(form);\n    });\n\n    $li.slideDown(\"fast\");\n  },\n\n  /*\r\n     * Apply report edition\r\n     */\n  applyReportEdition: function applyReportEdition(id, $li) {\n\n    var self = this;\n    var elements = $li.find(\"input, textarea\");\n\n    if (self.validateFormElements(elements)) {\n\n      var reportData = self.getReportsData(id);\n      var name = elements[0].value;\n      var description = elements[1].value;\n\n      var params = \"parameters=\" + JSON.stringify({ id: id, name: name, description: description, reportSet: reportData[0].reportSet, filterParameters: reportData[0].filters });\n\n      $.when(self.dataService.updateReportData(params)).done(function (response) {\n\n        if (response.status !== true) {\n\n          var cnt = $(elements[0]).siblings(\".bz-wp-widget-reportmenu-messagecnt\");\n          var msg = response.message;\n\n          self.showValidationMessage(msg, cnt);\n        } else {\n\n          reportData[0].displayName = name;\n          reportData[0].description = description;\n\n          self.cancelReportAction(id, $li);\n        }\n      });\n    }\n\n  },\n\n\n  /*\r\n     * Validate form\r\n     */\n  validateFormElements: function validateFormElements(elements) {\n\n    var self = this;\n    var isValid = true;\n\n    for (var i = 0, length = elements.length; i < length; i++) {\n\n      var msgContainer = $(elements[i]).siblings(\".bz-wp-widget-reportmenu-messagecnt\");\n\n      if (self.validateRequired($(elements[i]))) {\n\n        if (self.validateSpecialCharacters($(elements[i]))) {\n          self.removeValidationMessage(msgContainer);\n        } else {\n          isValid = false;\n          self.showValidationMessage(self.getResource(\"bz-rp-components-customreports-invalidvalue\"), msgContainer);\n        }\n\n      } else {\n        isValid = false;\n        self.showValidationMessage(self.getResource(\"bz-rp-components-customreports-required\"), msgContainer);\n      }\n    }\n\n    return isValid;\n  },\n\n  /*\r\n     * Show message\r\n     */\n  showValidationMessage: function showValidationMessage(msg, cnt) {\n\n    var self = this;\n    var tmpl = self.getTemplate(\"reportsMenu-vldmessage\");\n\n    cnt.html($.tmpl(tmpl, { message: msg }));\n  },\n\n  /*\r\n     * Remove message\r\n     */\n  removeValidationMessage: function removeValidationMessage(cnt) {\n\n    var self = this;\n\n    $(\".bz-wp-widget-reportmenu-errormsg\", cnt).remove();\n  },\n\n  /*\r\n     * Validate required\r\n     */\n  validateRequired: function validateRequired($el) {\n\n    var self = this;\n    var isValid = true;\n\n    if ($el.attr('required')) {\n      if ($el.val() === \"\") {\n        isValid = false;\n      }\n    }\n\n    return isValid;\n  },\n\n  /*\r\n     * Validate special caracters\r\n     */\n  validateSpecialCharacters: function validateSpecialCharacters($el) {\n\n    var exp = new RegExp(/^[a-zA-Z0-9- ]*$/);\n    var isValid = true;\n\n    if (!exp.test($el.val())) {\n      isValid = false;\n    }\n\n    return isValid;\n  },\n\n  /*\r\n     * Cancel report action\r\n     */\n  cancelReportAction: function cancelReportAction(id, $li) {\n\n    var self = this;\n    var tmpl = self.getTemplate(\"reportsMenu-itemsdata\");\n    var reportData = self.getReportsData(id);\n\n    var content = $.tmpl(tmpl, { element: reportData[0] });\n\n    $li.slideUp(\"fast\", function () {\n      $(this).addClass(\"bz-wp-widget-reportsmenu-readmode\").removeClass('bz-wp-widget-reportsmenu-edition').html(content);\n    });\n\n    $li.slideDown(\"fast\");\n\n  },\n\n  /*\r\n     * Get Reports Data\r\n     */\n  getReportsData: function getReportsData(id) {\n\n    var self = this;\n    var queryItems = self.reportsMenu[\"AnalysisQuery\"];\n\n    return queryItems.filter(function (obj) {\n      return obj.id === id;\n    });\n  },\n\n  /*\r\n     * Get filter by id\r\n     */\n  getFiltersById: function getFiltersById(id) {\n\n    var self = this;\n    var rpData = self.getReportsData(id);\n\n    return rpData[0].filters;\n  } });","/*\r\n*   Name: BizAgi Workportal Desktop Reports Chart Widget\r\n*   Author: David Romero\r\n*   Comments:\r\n*   -   This script will load the selected report in workarea\r\n*/\n\n// Auto extend\nbizagi.workportal.widgets.reportsChart.extend(\"bizagi.workportal.widgets.reportsChart\", {}, {\n\n  /*\r\n                                                                                              * Initialize report widget\r\n                                                                                              */\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n\n    self._super(workportalFacade, dataService, params);\n\n    //Load templates\n    self.loadTemplates({\n      \"reportsChart\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.reportsChart\").concat(\"#ui-bizagi-workportal-widget-reports-chart\"),\n      \"admin.case.search.quicksearch\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.admin.caseSearch\").concat(\"#ui-bizagi-workportal-widget-admin-case-search-quicksearch\"),\n      useNewEngine: false });\n\n  },\n\n  /**\r\n     *   To be overriden in each device to apply layouts\r\n     */\n  postRender: function postRender() {\n\n    var self = this;\n\n    //case search widget object\n    self.caseSearch = {};\n\n    $.when(self.loadReportingModule()).done(function () {\n      var report = self.endPoint.defaultReport;\n      if (bizagi.referrerParams && bizagi.referrerParams.reports && bizagi.referrerParams.reports.fromBackButton) {\n        report = bizagi.referrerParams.reports.tab;\n      }\n      //Load the first report\n      self.loadReport(report, self.endPoint.info);\n      self.eventsHandler();\n\n    });\n  },\n\n  /**\r\n     * Events Handler\r\n     */\n  eventsHandler: function eventsHandler() {\n\n    var self = this;\n\n    $(\"#reports-menu, li\", self.content).on(\"click\", function () {\n\n      var element = $(this);\n      var report = element.data('report');\n\n      element.siblings().removeClass(\"ui-bizagi-wp-widget-reports-menu-active\");\n      element.addClass(\"ui-bizagi-wp-widget-reports-menu-active\");\n      self.loadReport(report, self.endPoint.info);\n    });\n\n  },\n\n  /**\r\n     * Load Report\r\n     */\n  loadReport: function loadReport(report, info) {\n\n    var self = this;\n    var components = self.endPoint.reports[report].components;\n\n    $(\"#reports-canvas\", self.content).empty();\n    if (bizagi.referrerParams && bizagi.referrerParams.reports && bizagi.referrerParams.reports.params && bizagi.referrerParams.reports.fromBackButton) {\n      self.filters = bizagi.referrerParams.reports.model;\n    }\n    $.when(self.reportingModule.render({\n      canvas: $(\"#reports-canvas\", self.content),\n      report: report,\n      components: components,\n      info: info,\n      filters: self.filters,\n      myTeam: self.myTeam,\n      widgetInstance: self })).\n    done(function (report) {\n\n      self.attachReportEvents.apply(self, [report]);\n    });\n\n  },\n\n  /*\r\n     * Attach events for reports object\r\n     */\n  attachReportEvents: function attachReportEvents(report) {\n\n    var self = this;\n\n    //resize event\n    report.bindWindowResize();\n\n    //change filter evnet\n    report.subscribe(\"filterChange\", function (event, filters) {\n      self.filters = filters;\n    });\n\n    //graphic query event\n    report.subscribe(\"graphicquery\", function (event, data) {\n      self.showGraphicQuery(data);\n    });\n\n    //open case administration\n    report.subscribe(\"caseadministration\", function (event, data) {\n\n      self.initCaseAdministration(data);\n      self.showCaseAdministration(data);\n\n    });\n\n    //open case event\n    report.subscribe(\"opencase\", function (event, data) {\n      self.publish(\"executeAction\", {\n        action: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,\n        idCase: data.caseData.idCase,\n        idWorkItem: data.caseData.idWorkItem,\n        idTask: data.caseData.idTask });\n\n    });\n\n  },\n\n  /*\r\n     * Initialize Case Administration\r\n     */\n  initCaseAdministration: function initCaseAdministration(data) {\n\n    var self = this;\n    var content = self.getCaseSearchContent();\n\n    self.caseSearch = new bizagi.workportal.widgets.admin.caseSearch(self.workportalFacade, self.dataService, $.extend(self.params, {\n      container: data.canvas }));\n\n\n    self.caseSearch.loadtemplates();\n    self.caseSearch.setupActivitiesLink = function () {};\n  },\n\n  /*\r\n     * Show Case Administration\r\n     */\n  showCaseAdministration: function showCaseAdministration(data) {\n\n    var self = this;\n    var content = self.getCaseSearchContent();\n\n    self.caseSearch.content = content;\n    data.canvas.html(content);\n\n    self.caseSearch.findResults(\n    data.canvas,\n    { \"I_radNumber\": data.radNumber });\n\n  },\n\n  /*\r\n     * Get Case Search Content\r\n     */\n  getCaseSearchContent: function getCaseSearchContent() {\n\n    var self = this;\n    var tmpl = self.getTemplate(\"admin.case.search.quicksearch\");\n\n    return $.tmpl(tmpl);\n  } });","/*\r\n*   Name: BizAgi Reporting Definition JSON\r\n*   Author: David Romero\r\n*   Comments:\r\n*   -   This script defines global components for reports\r\n*/\n\nif (!bizagi.reporting) {\n  bizagi.reporting = {};\n}\n\nbizagi.reporting = {\n  BAMProcess: {\n    defaultReport: \"bamprocessloadanalysis\",\n    info: {\n      reportSet: 1 },\n\n    reports: {\n      \"bamprocessloadanalysis\": {\n        components: [\"filters-processversion\", \"filters-dimension\"],\n        resource: \"bz-rp-loadanalysis-tab\" },\n\n      \"bamprocessworkinprogress\": {\n        components: [\"filters-processversion\", \"filters-dimension\"],\n        resource: \"bz-rp-workinprogress-tab\" } } },\n\n\n\n  BAMTask: {\n    defaultReport: \"bamtasksworkinprogress\",\n    info: {\n      reportSet: 2 },\n\n    reports: {\n      \"bamtasksworkinprogress\": {\n        components: [\"filters-processversion\", \"filters-dimension\"],\n        resource: \"bz-rp-workinprogress-tab\" },\n\n      \"bamtaskloadanalysis\": {\n        components: [\"filters-processversion\", \"filters-dimension\"],\n        resource: \"bz-rp-loadanalysis-tab\" } } },\n\n\n\n  AnalyticsProcess: {\n    defaultReport: \"analyticsprocesscycletime\",\n    info: {\n      reportSet: 3 },\n\n    reports: {\n      \"analyticsprocesscycletime\": {\n        components: [\"filters-processversion\", \"filters-dimension\", \"filters-time\"],\n        resource: \"bz-rp-cycletime-tab\" },\n\n      \"analyticsprocessdurationhistogram\": {\n        components: [\"filters-processversion\", \"filters-dimension\", \"filters-time\"],\n        resource: \"bz-rp-durationhistogram-tab\" },\n\n      \"analyticsprocessactivity\": {\n        components: [\"filters-processversion\", \"filters-dimension\", \"filters-time\"],\n        resource: \"bz-rp-processactivity-tab\" },\n\n      \"analyticsprocessactivationranking\": {\n        components: [\"filters-dimension\", \"filters-time\"],\n        resource: \"bz-rp-activationranking-tab\" },\n\n      \"analyticsprocessfrequentspaths\": {\n        components: [\"filters-processversion\", \"filters-dimension\", \"filters-time\"],\n        resource: \"bz-rp-frequentspaths-tab\" } } },\n\n\n\n  AnalyticsTask: {\n    defaultReport: \"analyticstaskcycletime\",\n    info: {\n      reportSet: 4 },\n\n    reports: {\n      \"analyticstaskcycletime\": {\n        components: [\"filters-processversion\", \"filters-dimension\", \"filters-time\"],\n        resource: \"bz-rp-cycletime-tab\" } } },\n\n\n\n  ResourceBAM: {\n    callBack: \"myTeamCallBack\",\n    defaultReport: \"bamresourcemonitorworkinprogress\",\n    info: {\n      reportSet: 6 },\n\n    reports: {\n      \"bamresourcemonitorworkinprogress\": {\n        components: [\"filters-processversion\", \"filters-dimension\", \"filters-time\"],\n        resource: \"bz-rp-workinprogress-tab\" },\n\n      \"bamresourcemonitorworkinprogressuser\": {\n        components: [\"filters-processversion\", \"filters-dimension\", \"filters-time\"],\n        resource: \"bz-rp-workinprogressuser-tab\" },\n\n      \"bamresourcemonitorworkinprogressteam\": {\n        components: [\"filters-processversion\", \"filters-dimension\", \"filters-time\"],\n        resource: \"bz-rp-workinprogressteam-tab\" } } },\n\n\n\n  AnalyticsSensor: {\n    defaultReport: \"sensors\",\n    reports: {\n      \"sensors\": {\n        components: [\"filters-dimension\", \"filters-time\"] } },\n\n\n    info: {\n      reportSet: 5 } } };"]}