{"version":3,"sources":["jquery/workportal/desktop/widget/project.overview/bizagi.workportal.desktop.widgets.project.overview.js","jquery/workportal/desktop/widget/project.dashboard.menu/bizagi.workportal.desktop.widgets.project.dashboard.menu.js","jquery/workportal/desktop/widget/project.dashboard.menu.activity/bizagi.workportal.desktop.widgets.project.dashboard.menu.activity.js","jquery/workportal/desktop/widget/project.content.dashboard/bizagi.workportal.desktop.widgets.project.content.dashboard.js","jquery/workportal/desktop/widget/project.plan/bizagi.workportal.desktop.widgets.project.plan.js","jquery/workportal/desktop/widget/project.caseState/bizagi.workportal.desktop.widgets.project.caseState.js","jquery/workportal/desktop/widget/project.activityState/bizagi.workportal.desktop.widgets.project.activityState.js","jquery/workportal/desktop/widget/project.processState/bizagi.workportal.desktop.widgets.project.processState.js","jquery/workportal/desktop/widget/project.users/bizagi.workportal.desktop.widgets.project.users.js","jquery/workportal/desktop/widget/project.subprocesses.data/bizagi.workportal.desktop.widgets.project.subprocesses.data.js","jquery/workportal/desktop/widget/project.events/bizagi.workportal.desktop.widgets.project.events.js","jquery/workportal/desktop/widget/project.subprocesses/bizagi.workportal.desktop.widgets.project.subprocesses.js","jquery/workportal/desktop/widget/project.activity.description/bizagi.workportal.project.activity.description.js"],"names":["_typeof","obj","Symbol","iterator","constructor","prototype","bizagi","workportal","widgets","widget","extend","onDiscussionsMenuStatusChange","ev","params","this","updateDiscussionsIcons","hasDiscussionsOrComment","sub","$","proxy","toggle","clean","unsub","injector","register","project","dashboard","menu","init","workportalFacade","dataService","_super","loadTemplates","project-dashboard-menu","getTemplate","concat","renderContent","content","postRender","self","contextsLeftSidebarCaseDashboard","forEach","context","updateView","event","args","plan","idActivitySelected","undefined","$content","getContent","empty","type","showContextByMenuDashboard","argsTemplate","showFormOverview","menuDashboard","showFormActivity","showCommentsOptionMenu","showFilesOptionMenu","showTimeLineOptionMenu","isAdhocProcess","util","isEnableFeature","showPlanOptionMenu","contextPlanOptionMenu","contextFormActivityOptionMenu","render","appendTo","toUpperCase","addClass","siblings","removeClass","handlerEvents","loadContentById","preventDefault","$item","target","closest","hasClass","data","getLevelNavigator","pub","currentLevelNavigator","parseInt","nameItemNavigator","newLevelNavigator","localization","getResource","refreshLastItemBreadcrumb","histName","level","subMenuHandler","$comments","$files","$timeline","on","options","action","actions","BIZAGI_WORKPORTAL_ACTION_ROUTING","idCase","idTask","idWorkflow","idWorkItem","idWorkitem","referrer","publish","off","activity","project-content-dashboard","template","setTimeout","window","trigger","base","planCreate","project-plan","project-plan-popup","templateHomePlan","$contentWidget","form","buttonShowPopupPlanToAdd","onShowPopupPlan","contextualized","showPopupAddPlan","paramsNewPlan","planChild","indexOf","servicesPlan","services","behaviors","planParent","getPlanAsParent","clone","project-overview","project-overview-no-summary-form-found","contentWidget","canvas","bind","e","isPropagationStopped","stopPropagation","oldrenderevent","eventMethod","addEventListener","eventer","when","getWorkitems","onlyUserWorkItems","done","workItems","length","url","serviceLocator","getUrl","tmpl","iframeOldRender","getCaseFormsRenderVersion","formsVersion","formsRenderVersion","renderSummaryForm","container","proxyPrefix","rendering","facade","execute","summaryForm","subscribe","append","renderingFacade","resizeLayout","iframe","queryString","readQueryString","each","is","load","contents","cssLocation","browser","mozilla","webkit","replace","overview","contextsSidebarActivity","datePickerRegional","project-caseState","project-caseState-remaining","project-cancel-case-button","isFavoriteCase","isFavorite","JSON","parse","showCaseNumber","creationDate","timeZoneName","currentUser","creationDateObject","getDateWithTimezone","creationDateFormat","getFormattedDate","solutionDateObject","solutionDate","solutionDateFormat","currentDate","calculateDataForTemplate","showGraphicQuery","idCaseForGraphicQuery","idWorkFlow","isAdhoc","idProcess","idAdhocProcess","showHelpUrl","helpUrl","paramsEffectiveDuration","idUser","parseBoolean","isOpen","fromDate","getTime","toDate","differenceCreationToCurrent","actualDate","relativeTime","dateFormatter","getRelativeTime","Date","relativeTimeState","colorStateCase","percentCompleteBar","showCancelCase","_showCancelCase","contentTemplate","buttonCancelCase","click","widgetParameters","widgetName","BIZAGI_WORKPORTAL_WIDGET_CANCEL_CASE","maximize","dialogClass","modalParameters","refreshInbox","title","width","height","closeVisible","validateUrlWellFormed","security","menuSecurity","urlHelp","isEmpty","_startShowCancelCase","onClickFavorite","goToCase","showBackNextNavigation","_navigatorWidget","get","_start","getShowCancelCase","dateObj","monthsNames","monthNames","shortMonth","getMonth","bizagiLanguage","BIZAGI_LANGUAGE","substring","datepicker","formatDate","favoriteOptions","idObject","favoriteType","addFavorite","favoritesData","guidFavorite","idFavorites","delFavorite","open","callGetEffectiveDuration","d","Deferred","getEffectiveDuration","resolve","promise","cntxtSidebarActivity","getBackCase","getNextCase","getListKey","lstIdCases","i","key","nextCase","backCase","hide","show","caseState","project-activityState-wrapper","currentState","currentWorkitem","filter","objectWorkItem","activityName","state","activityIsEvent","isEvent","initDateObject","entryDateWorkItem","initDateFormat","estimatedSolutionDateObject","estimatedSolutionDate","estimatedSolutionDateFormat","updateTemplateWidget","initilizeActionMenu","allowsReassign","j","btReassing","btShareActivity","onClickMenuReasign","onClickShareActivity","onCloseSaveDialogBox","loader","startAndThen","then","BIZAGI_WORKPORTAL_WIDGET_REASSIGN_CASE","closeDialogWidget","id","button","attr","getShareActivity","notifier","parent","value","unbind","showSucessMessage","showErrorMessage","always","diffMillisecondsCurrentToEstimated","diffMillisecondsCreationToSolution","paramsEffectiveDurationOpened","currentDateExceededEstimatedDate","paramsEffectiveDurationInitialToEstimated","differenceCreatedToCurrent","differenceCurrentToEstimated","differenceInitialToEstimated","colorState","showEstimatedSolutionDate","percentBar","getPercentBar","percent","canShareActivity","isShared","totalMinutes","sectionMinutes","response","Math","round","override","enableShareActivity","shareActivityTooltip","activityButton","texto","tooltip","tooltipClass","position","my","at","of","collision","activityState","project-process-state","displayName","onClickGoToParentCase","routingExecute","processState","relatedusers","plugins","users","loadedUsers","project-users","onRenderFinish","showCreatorInformation","typesAssignUser","createdBy","userId","typeName","userIds","getUsersData","user","userInfo","usersAdapter","createJsonUserInfo","name","username","picture","email","getInitials","find","userinformation","responseSubprocessState","responseSubprocess","newValue","auxArrayListSubprocessesState","auxArrayListSubprocesses","newItem","jQuery","isArray","push","Class","project-subprocesses-tootip-custom-properties","initializeTooltip","selectorTooltip","indexSubprocess","idCustData","text","val","itemsFinded","item","getContentTooltip","ui","originalEvent","$id","not","remove","close","hover","stop","fadeTo","fadeOut","textLI","templateTooltip","rowCustomProperty","nameProperty","valueProperty","arrayCustomsProperties","auxValueProperty","subprocessData","getSubprocessData","custData","custDataTypes","custFields","formatMonetaryCell","formatBoolean","formatDecimalCell","objectTemplate","nameSubprocess","contentTableCustomProperties","html","subProcessData","subProcess","subProcesses","subProcPersonalized","customFields","CustFields","Object","keys","subprocesses","project-events","getArgsTemplate","responseArgsTemplate","onClickGoEvent","def","callSummaryCaseEvents","responseEvents","elementEvent","autoSave","summaryCaseEvents","events","project-subprocesses","summarySubProcess","organizeDataForSubprocesses","showSubProcess","tempSubprocesses","radNumber","renderWidget","onClickGoSubprocess","pluginTooltip","project-activity-description","description","getWorkitemDescription","callTaskDescription","taskDescriptionParams","taskDescriptionWidget","task","tskDescription"],"mappings":"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","sourcesContent":["function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /*\r\n                                                                                                                                                                                                                                                                                                                                                                               *   Name: Bizagi Workportal Desktop Project Overview Controller\r\n                                                                                                                                                                                                                                                                                                                                                                               *   Author: David Romero Estrada\r\n                                                                                                                                                                                                                                                                                                                                                                               */\n\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.project.overview\", {}, {\n\n  /*\r\n                                                                                            *   Constructor\r\n                                                                                            */\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    //Load templates\n    self.loadTemplates({\n      \"project-overview\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.project.overview\").concat(\"#project-overview\"),\n      \"project-overview-no-summary-form-found\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.project.overview\").concat(\"#project-overview-no-summary-form-found\") });\n\n  },\n\n  /*\r\n     * Renders the template defined in the widget\r\n     */\n  renderContent: function renderContent() {\n\n    var self = this;\n    var template = self.getTemplate(\"project-overview\");\n\n    self.content = template.render({});\n    return self.content;\n  },\n\n  /*\r\n     * Links events with handlers\r\n     */\n  postRender: function postRender() {\n    var self = this;\n    var contentWidget = self.getContent();\n\n    var canvas = $(\"#ui-bizagi-wp-project-overview-wrapper\", contentWidget);\n\n    // Define action when render form has not been migrated\n    canvas.bind(\"oldrenderintegration\", function (e) {\n      if (e.isPropagationStopped()) {\n        return;\n      }\n      e.stopPropagation();\n\n      var template = self.workportalFacade.getTemplate(\"inbox-common-case-summary-oldrender\");\n      var data = {};\n\n      bizagi.oldrenderevent = true; // has been loaded\n      var eventMethod = window.addEventListener ? \"addEventListener\" : \"attachEvent\";\n      var eventer = window[eventMethod];\n      var messageEvent = eventMethod == \"attachEvent\" ? \"onmessage\" : \"message\";\n\n      // Listen to message from child window\n      eventer(messageEvent, function (e) {\n        e.stopPropagation();\n        self.publish(\"executeAction\", {\n          action: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,\n          idCase: e.data });\n\n      }, false);\n\n      // Define wirkitem and idtask\n      $.when(self.dataService.getWorkitems({\n        idCase: self.params.idCase,\n        onlyUserWorkItems: true })).\n      done(function (getWorkitems) {\n        // verify workitem, in some cases these variables are not available\n        if (_typeof(getWorkitems.workItems) == \"object\" && getWorkitems.workItems.length >= 1) {\n          // Case Open\n          var idWorkitem = getWorkitems.workItems[0]['idWorkItem'];\n          var idTask = getWorkitems.workItems[0]['idTask'];\n          data.url = self.dataService.serviceLocator.getUrl(\"old-render\") + \"?PostBack=1&idCase=\" + self.idCase + \"&idWorkitem=\" + idWorkitem + \"&idTask=\" + idTask + \"&isSummary=1\";\n        } else {\n          // Case closed\n          data.url = self.dataService.serviceLocator.getUrl(\"old-render\") + \"?PostBack=1&idCase=\" + self.idCase + \"&isSummary=1\";\n        }\n\n        // Render content\n        canvas.empty();\n        $.tmpl(template, data).appendTo(canvas);\n        //Set styles\n        self.iframeOldRender($(\"iframe\", canvas));\n      });\n    });\n\n    var params = {\n      idCase: self.params.idCase };\n\n    $.when(self.dataService.getCaseFormsRenderVersion(params)).\n    done(function (formsVersion) {\n      if (formsVersion.formsRenderVersion == 1) {\n        canvas.trigger(\"oldrenderintegration\");\n      } else {\n        self.renderSummaryForm(self.params.idCase, $(\"#ui-bizagi-wp-project-overview-wrapper\", contentWidget));\n      }\n    });\n  },\n\n  renderSummaryForm: function renderSummaryForm(idCase, container) {\n    var self = this;\n\n    var proxyPrefix = _typeof(self.dataService.serviceLocator.proxyPrefix) != undefined ? self.dataService.serviceLocator.proxyPrefix : \"\";\n\n    // Load render page\n    var rendering = new bizagi.rendering.facade({ \"proxyPrefix\": proxyPrefix });\n\n    // Executes rendering into render container\n    rendering.execute({\n      canvas: container,\n      summaryForm: true,\n      idCase: idCase });\n\n    rendering.subscribe(\"no-data-found\", function () {\n      var template = self.getTemplate(\"project-overview-no-summary-form-found\");\n      container.append(template.render());\n    });\n\n    // Keep reference to rendering facade\n    self.renderingFacade = rendering;\n\n    // Resize layout\n    setTimeout(function () {\n      self.resizeLayout();\n    }, 1000);\n  },\n\n  /**\r\n      * Inject styles and js into the iframe\r\n      */\n  iframeOldRender: function iframeOldRender(canvas) {\n    var self = this;\n    var iframe;\n    var content = self.getContent();\n    var theme = \"bizagiDefault\";\n    var queryString = bizagi.readQueryString();\n\n    $.each(canvas, function () {\n      if ($(this).is(\"iframe\")) {\n        iframe = $(this);\n      }\n    });\n\n    iframe.load(function () {\n      // inject css\n      var content = $(this).contents();\n\n      // Fixed problem with relative path across the different browsers\n      var cssLocation = $.browser.mozilla || $.browser.webkit ? \"../../css/render_%theme%.css\" : \"css/render_%theme%.css\";\n\n      // Define theme\n      cssLocation = cssLocation.replace(\"%theme%\", queryString[\"theme\"] || theme);\n\n      // Append css\n      $('body', content).append(\"<link type='text/css' rel='stylesheet' href='\" + cssLocation + \"'>\");\n\n      // Append javascript\n      //  $('head',content).append(\"<script type='text/javascript' src='../../js/renderintegration.js'></script>\");\n    });\n  } });\n\n\n\nbizagi.injector.register('bizagi.workportal.widgets.project.overview', ['workportalFacade', 'dataService', bizagi.workportal.widgets.project.overview], true);","/**\r\n * Name: BizAgi Desktop Widget Dashboard menu (left sidebar) * \r\n * @author Valeria Vanegas\r\n */\n\n\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.project.dashboard.menu\", {}, {\n\n  /**\r\n                                                                                                   * Handler when discussions menu status change\r\n                                                                                                   * @param {*} ev \r\n                                                                                                   * @param {*} params \r\n                                                                                                   */\n  onDiscussionsMenuStatusChange: function onDiscussionsMenuStatusChange(ev, params) {\n    var self = this;\n    self.updateDiscussionsIcons(params.hasDiscussionsOrComment);\n  },\n\n  /**\r\n      * Update discussions icon on sidebar menu\r\n      * The icon is different when there is other discussion or there are comments\r\n      * @param {*} hasDiscussionsOrComment \r\n      */\n  updateDiscussionsIcons: function updateDiscussionsIcons(hasDiscussionsOrComment) {\n    var self = this;\n\n    self.sub(\"UPDATE_DISCUSSIONS_MENU_STATUS\", $.proxy(self.onDiscussionsMenuStatusChange, self));\n\n    $(\".bz-icon-discussion-comment\").toggle(hasDiscussionsOrComment);\n    $(\".bz-icon-discussion-no-comment\").toggle(!hasDiscussionsOrComment);\n    self.params.hasDiscussionsOrComment = hasDiscussionsOrComment;\n  },\n\n  /**\r\n      * Detach events\r\n      */\n  clean: function clean() {\n    var self = this;\n    self.unsub(\"UPDATE_DISCUSSIONS_MENU_STATUS\", $.proxy(self.onDiscussionsMenuStatusChange, self));\n  } });\n\n\nbizagi.injector.register(\"bizagi.workportal.widgets.project.dashboard.menu\", [\"workportalFacade\", \"dataService\", bizagi.workportal.widgets.project.dashboard.menu], true);","/*\r\n *   Name: Bizagi Workportal project Dashboard Menu Activity\r\n *   Author: Elkin Fernando Siabato Cruz\r\n */\n\nbizagi.workportal.widgets.project.dashboard.menu.extend(\"bizagi.workportal.widgets.project.dashboard.menu.activity\", {}, {\n\n  /**\r\n                                                                                                                            *   Constructor\r\n                                                                                                                            */\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n    self.params = params || {};\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    //Load templates\n    self.loadTemplates({\n      \"project-dashboard-menu\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.project.dashboard.menu.activity\").concat(\"#project-dashboard-menu1\") });\n\n  },\n\n  /**\r\n      * Renders the template defined in the widget\r\n      */\n  renderContent: function renderContent() {\n    var self = this;\n    self.content = $(\"<div></div>\");\n    return self.content;\n  },\n\n  /**\r\n      * links events with handlers\r\n      */\n  postRender: function postRender() {\n    var self = this;\n    self._super();\n    //Handlers\n    self.params.contextsLeftSidebarCaseDashboard.forEach(function (context) {\n      self.sub(context, $.proxy(self.updateView, self));\n    });\n  },\n\n  /**\r\n      * Update view\r\n      * @param event\r\n      * @param params\r\n      */\n  updateView: function updateView(event, params) {\n    var self = this;\n    self.params = $.extend(self.params, params.args);\n    self.params.plan.idActivitySelected = undefined;\n    self.clean();\n    var $content = self.getContent().empty();\n\n    if (typeof event.type !== \"undefined\") {\n      self.params.showContextByMenuDashboard = event.type;\n    }\n\n    var argsTemplate = {\n      showFormOverview: self.params.menuDashboard.showFormOverview,\n      showFormActivity: self.params.menuDashboard.showFormActivity,\n      showCommentsOptionMenu: self.params.menuDashboard.showCommentsOptionMenu,\n      showFilesOptionMenu: self.params.menuDashboard.showFilesOptionMenu,\n      showTimeLineOptionMenu: self.params.menuDashboard.showTimeLineOptionMenu && (\n      !self.params.isAdhocProcess ||\n      self.params.isAdhocProcess && bizagi.util.isEnableFeature(\"enableTimelineOnLiveProcesses\")),\n      showPlanOptionMenu: self.params.menuDashboard.showPlanOptionMenu,\n      contextPlanOptionMenu: self.params.menuDashboard.contextPlanOptionMenu,\n      contextFormActivityOptionMenu: self.params.menuDashboard.contextFormActivityOptionMenu };\n\n\n    //Update widget\n    var template = self.getTemplate(\"project-dashboard-menu\");\n    template.render(argsTemplate).appendTo($content);\n\n\n    if (self.params.showContextByMenuDashboard) {\n      $(\"li[data-context='\" + self.params.showContextByMenuDashboard.toUpperCase() + \"']\", self.content).addClass(\"active\").siblings().removeClass(\"active\");\n    }\n\n    self.updateDiscussionsIcons(self.params.hasDiscussionsOrComment);\n    self.handlerEvents();\n  },\n\n  /**\r\n      *   Load Content By Id\r\n      */\n  loadContentById: function loadContentById(event) {\n    var self = this;\n    event.preventDefault();\n    var $item = $(event.target).closest(\"li\");\n\n    if (!$item.hasClass(\"active\")) {\n\n      var showContextByMenuDashboard = $item.data(\"context\");\n\n      if (showContextByMenuDashboard) {\n        var getLevelNavigator = self.pub(\"notify\", { type: \"NAVIGATOR_GETLEVEL\" });\n        var currentLevelNavigator = parseInt(getLevelNavigator[0], 10);\n        var nameItemNavigator = \"\";\n        var newLevelNavigator = currentLevelNavigator;\n\n        if (showContextByMenuDashboard == \"PLANACTIVITIES\") {\n          newLevelNavigator = currentLevelNavigator + 1;\n          nameItemNavigator = bizagi.localization.getResource(\"workportal-project-casedashboard-plan\");\n        }\n\n        self.params.refreshLastItemBreadcrumb = false;\n        self.pub(\"notify\", {\n          type: showContextByMenuDashboard.toUpperCase(),\n          args: $.extend(self.params, { showContextByMenuDashboard: showContextByMenuDashboard,\n            histName: nameItemNavigator,\n            level: newLevelNavigator }) });\n\n        $(\"li[data-context='\" + self.params.showContextByMenuDashboard.toUpperCase() + \"']\", self.content).addClass(\"active\").siblings().removeClass(\"active\");\n      }\n    }\n  },\n\n  subMenuHandler: function subMenuHandler() {\n    var self = this;\n    var content = self.getContent();\n    var $comments = $(\"[data-context='COMMENTS']\", content);\n    var $files = $(\"[data-context='FILES']\", content);\n    var $timeline = $(\"[data-context='TIMELINE']\", content);\n\n    $(\".ui-bizagi-wp-project-tab-submenu a\", content).on(\"click\", function () {\n      $comments.toggle();\n      $files.toggle();\n      $timeline.toggle();\n    });\n  },\n\n  /**\r\n      * Handler events\r\n      */\n  handlerEvents: function handlerEvents() {\n    var self = this;\n    var content = self.getContent();\n\n    self.subMenuHandler();\n\n    $(\".ui-bizagi-wp-project-tab-links a\", content).on(\"click\", $.proxy(self.loadContentById, self));\n\n    // Bind for click event on refresh botton\n    $(\".ui-bizagi-wp-project-tab-links li .ui-bizagi-refresh-form\", content).on(\"click\", function () {\n      var options = {\n        action: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,\n        idCase: self.params.idCase,\n        idTask: self.params.idTask,\n        idWorkflow: self.params.idWorkflow,\n        idWorkItem: self.params.idWorkitem,\n        referrer: self.params.referrer || \"inboxGrid\" };\n\n      self.publish(\"executeAction\", options);\n    });\n  },\n\n  /**\r\n      * Clean widgets and events\r\n      */\n  clean: function clean() {\n    var self = this;\n    var content = self.getContent();\n\n    self._super();\n\n    if (self.params && self.params.contextsLeftSidebarCaseDashboard) {\n      self.params.contextsLeftSidebarCaseDashboard.forEach(function (context) {\n        self.unsub(context, $.proxy(self.updateView, self));\n      });\n    }\n\n    $(\".ui-bizagi-wp-project-tab-links a\", content).off();\n    $(\".ui-bizagi-wp-project-tab-links li .ui-bizagi-refresh-form\", content).off();\n  } });\n\n\nbizagi.injector.register(\"bizagi.workportal.widgets.project.dashboard.menu.activity\", [\"workportalFacade\", \"dataService\", bizagi.workportal.widgets.project.dashboard.menu.activity], true);","/*\r\n *   Name: Bizagi Workportal Project Content Dashboard\r\n *   Author: Elkin Fernando Siabato Cruz\r\n */\n\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.project.content.dashboard\", {}, {\n\n  /*\r\n                                                                                                      *   Constructor\r\n                                                                                                      */\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    //Load templates\n    self.loadTemplates({\n      \"project-content-dashboard\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.project.content.dashboard\").concat(\"#project-plan-content-dashboard\") });\n\n\n  },\n\n  /*\r\n      * Renders the template defined in the widget\r\n      */\n  renderContent: function renderContent() {\n    var self = this;\n\n    var template = self.getTemplate(\"project-content-dashboard\");\n    self.content = template.render({});\n\n    return self.content;\n  },\n  postRender: function postRender() {\n    var self = this;\n\n    setTimeout(function () {\n      $(window).trigger(\"resize\"); //Simulate resize for fix when load first time.\n    }, 1000);\n\n  } });\n\n\n\nbizagi.injector.register(\"bizagi.workportal.widgets.project.content.dashboard\", [\"workportalFacade\", \"dataService\", bizagi.workportal.widgets.project.content.dashboard], true);","/*\r\n *   Name: Bizagi Workportal Desktop Project Plan\r\n *   Author: Elkin Fernando Siabato Cruz\r\n */\n\nbizagi.workportal.widgets.project.base.extend(\"bizagi.workportal.widgets.project.plan\", {}, {\n  /*\r\n                                                                                               *   Constructor\r\n                                                                                               */\n  init: function init(workportalFacade, dataService, planCreate, params) {\n\n    var self = this;\n\n    //Call base\n    self._super(workportalFacade, dataService, params);\n    self.params = $.extend(self.params, params);\n    self.planCreate = planCreate;\n\n    //Load templates\n    self.loadTemplates({\n      \"project-plan\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.project.plan\").concat(\"#project-plan-wrapper\"),\n      \"project-plan-popup\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.project.plan\").concat(\"#project-plan-popup-template\") });\n\n  },\n\n  /*\r\n      * Renders the template defined in the widget\r\n      */\n  renderContent: function renderContent() {\n    var self = this;\n    var templateHomePlan = self.getTemplate(\"project-plan\");\n    self.content = templateHomePlan.render({});\n    return self.content;\n  },\n\n  /*\r\n      * Post render and links events with handlers\r\n      */\n  postRender: function postRender() {\n    var self = this;\n    var $contentWidget = self.getContent();\n    //reference for html elements\n    self.form = {\n      buttonShowPopupPlanToAdd: $(\"#buttonShowPopupCreatePlan\", $contentWidget) };\n\n    self.form.buttonShowPopupPlanToAdd.on(\"click\", $.proxy(self.onShowPopupPlan, self));\n  },\n\n  onShowPopupPlan: function onShowPopupPlan() {\n    var self = this;\n    var contextualized = typeof self.params.plan.contextualized === \"undefined\" ? true : self.params.plan.contextualized;\n    self.planCreate.showPopupAddPlan(self.params, self.dataService, contextualized);\n    self.planCreate.unsub('planCreated');\n    self.planCreate.sub('planCreated', function (ev, params) {\n      var paramsNewPlan = params.paramsNewPlan;\n      self.params.planChild = {};\n\n      //Set planparent if we are on activity plan\n      if (self.params.showContextByMenuDashboard.indexOf(\"ACTIVITYPLAN\") != -1) {\n        var servicesPlan = new bizagi.workportal.services.behaviors.plan(self.dataService);\n        self.params.planParent = servicesPlan.getPlanAsParent(self.params.plan);\n      }\n      self.params.planChild = bizagi.clone(paramsNewPlan);\n\n      self.pub(\"notify\", {\n        type: \"UPDATE_LASTCRUMBPARAMS_INFO\",\n        args: {\n          planChild: self.params.planChild } });\n\n\n\n      self.params.menuDashboard.contextPlanOptionMenu = \"PLANACTIVITIES\";\n\n      var getLevelNavigator = self.pub(\"notify\", { type: \"NAVIGATOR_GETLEVEL\" });\n      var currentLevelNavigator = parseInt(getLevelNavigator[0], 10);\n      var newLevelNavigator = currentLevelNavigator + 1;\n      var nameItemNavigator = bizagi.localization.getResource(\"workportal-project-casedashboard-plan\");\n\n      self.pub(\"notify\", {\n        type: \"PLANACTIVITIES\",\n        args: $.extend(self.params, { showContextByMenuDashboard: \"PLANACTIVITIES\",\n          histName: nameItemNavigator,\n          level: newLevelNavigator }) });\n\n    });\n  } });\n\n\nbizagi.injector.register(\"bizagi.workportal.widgets.project.plan\", [\"workportalFacade\", \"dataService\", \"bizagi.workportal.widgets.project.plan.create\", bizagi.workportal.widgets.project.plan], true);","/*\r\n *   Name: Bizagi Workportal Desktop Project Case State Controller\r\n *   Author: Elkin Fernando Siabato Cruz\r\n */\n\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.project.caseState\", {}, {\n  /*\r\n                                                                                              *   Constructor\r\n                                                                                              */\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    self.contextsSidebarActivity = params.contextsSidebarActivity;\n\n    //Regional\n    self.datePickerRegional = bizagi.localization.getResource(\"datePickerRegional\");\n\n    //Load templates\n    self.loadTemplates({\n      \"project-caseState\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.project.caseState\").concat(\"#project-caseState-wrapper\"),\n      \"project-caseState-remaining\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.project.caseState\").concat(\"#project-caseState-remaining\"),\n      \"project-cancel-case-button\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.project.caseState\").concat(\"#project-caseState-cancel-case-button\") });\n\n  },\n\n  /**\r\n      * Renders the template defined in the widget\r\n      */\n  renderContent: function renderContent() {\n    var self = this;\n    self.content = $(\"<div></div>\");\n    return self.content;\n  },\n\n  /*\r\n      * links events with handlers\r\n      */\n  postRender: function postRender() {\n    var self = this;\n    var cntxtSidebarActivity = self.contextsSidebarActivity || [];\n    //Handlers\n    cntxtSidebarActivity.forEach(function (context) {\n      self.sub(context, $.proxy(self.updateView, self));\n    });\n  },\n\n  /**\r\n      * Update view when load case\r\n      * @param event\r\n      * @param params\r\n      */\n  updateView: function updateView(event, params) {\n    var self = this;\n    $.extend(self.params, params.args);\n    var args = params.args;\n    self.getContent().empty();\n\n    var argsTemplate = {};\n\n    //is Favorite Case\n    argsTemplate.isFavoriteCase = \"off\";\n    if (args.isFavorite && JSON.parse(args.isFavorite)) {\n      argsTemplate.isFavoriteCase = \"bz-icon-star\";\n    } else\n    {\n      argsTemplate.isFavoriteCase = \"bz-icon-star-outline\";\n    }\n\n    self.showCaseNumber(args, argsTemplate);\n\n    //Begin Calculated Remaining Date\n    if (args.creationDate) {\n      var MOMENT_FORMAT = \"MM/DD/yyyy H:mm\";\n      var timeZoneName = bizagi.currentUser.timeZoneName;\n      var creationDate = args.creationDate;\n      var creationDateObject = self.getDateWithTimezone(MOMENT_FORMAT, timeZoneName, creationDate);\n\n      argsTemplate.creationDateFormat = self.getFormattedDate(creationDateObject);\n\n      var solutionDateObject = self.getDateWithTimezone(MOMENT_FORMAT, timeZoneName, args.solutionDate);\n      argsTemplate.solutionDateFormat = self.getFormattedDate(solutionDateObject);\n\n      var currentDate = self.getDateWithTimezone(MOMENT_FORMAT, timeZoneName);\n      self.calculateDataForTemplate(argsTemplate, creationDateObject, currentDate, solutionDateObject, args);\n    }\n    $(self.getContent()).on(\"click\", \".show-diagram-case\", function () {\n      var isAdhoc = false;\n      if (!self.params.isAdhocProcess || typeof self.params.isAdhocProcess === 'undefined') {\n        isAdhoc = false;\n      } else {\n        isAdhoc = true;\n      }\n      if (isAdhoc) {\n        self.showGraphicQuery({ idCase: self.params.idCaseForGraphicQuery || self.params.idCase, idWorkflow: self.params.idWorkFlow, isAdhoc: true, idProcess: self.params.idAdhocProcess });\n      } else {\n        self.showGraphicQuery({ idCase: self.params.idCaseForGraphicQuery || self.params.idCase, idWorkflow: self.params.idWorkflow });\n      }\n\n    });\n\n    $(self.getContent()).on(\"click\", \".show-process-help\", function () {\n      self.showHelpUrl(self.params.helpUrl);\n    });\n\n  },\n\n  /**\r\n      * Calculate percent bar\r\n      * @param argsTemplate\r\n      * @param creationDateObject\r\n      * @param currentDate\r\n      * @param solutionDateObject\r\n      * @param args\r\n      */\n  calculateDataForTemplate: function calculateDataForTemplate(argsTemplate, creationDateObject, currentDate, solutionDateObject, args) {\n    var self = this;\n    var $content = self.getContent();\n    var MOMENT_FORMAT = \"MM/DD/yyyy H:mm\";\n    var timeZoneName = bizagi.currentUser.timeZoneName;\n    var paramsEffectiveDuration = {};\n    paramsEffectiveDuration.idUser = bizagi.currentUser.idUser;\n    if (bizagi.util.parseBoolean(args.isOpen)) {\n      paramsEffectiveDuration.fromDate = creationDateObject.getTime();\n      paramsEffectiveDuration.toDate = currentDate.getTime();\n    } else\n    {\n      paramsEffectiveDuration.fromDate = solutionDateObject.getTime();\n      paramsEffectiveDuration.toDate = currentDate.getTime();\n    }\n\n    var differenceCreationToCurrent = paramsEffectiveDuration.toDate - paramsEffectiveDuration.fromDate;\n    var actualDate = self.getDateWithTimezone(MOMENT_FORMAT, timeZoneName);\n    var relativeTime = bizagi.util.dateFormatter.getRelativeTime(new Date(actualDate.getTime() - differenceCreationToCurrent), null, false, timeZoneName);\n    if (bizagi.util.parseBoolean(args.isOpen)) {\n      argsTemplate.relativeTimeState = bizagi.localization.getResource(\"workportal-project-case-state-opened\").replace(\"%s\", relativeTime);\n      argsTemplate.colorStateCase = \"Opened\";\n    } else\n    {\n      argsTemplate.relativeTimeState = bizagi.localization.getResource(\"workportal-project-case-state-closed\").replace(\"%s\", relativeTime);\n      argsTemplate.colorStateCase = \"Closed\";\n    }\n\n    argsTemplate.percentCompleteBar = 100;\n    argsTemplate.isOpen = bizagi.util.parseBoolean(args.isOpen);\n    //Update widget\n    var contentTemplate = self.getTemplate(\"project-caseState-remaining\");\n    contentTemplate.\n    render($.extend(args, argsTemplate)).\n    appendTo($(\"#ui-bizagi-remaining\", $content));\n  },\n\n\n  /**\r\n      * Show cancel case button\r\n      * @param {JSON} args \r\n      * @param {Template} argsTemplate \r\n      * @param {Boolean} showCancelCase \r\n      */\n  showCancelCase: function showCancelCase(args, argsTemplate, _showCancelCase) {\n    var self = this;\n    var $content = self.getContent();\n    var contentTemplate = self.getTemplate(\"project-cancel-case-button\");\n\n    argsTemplate.buttonCancelCase = _showCancelCase;\n    contentTemplate.render($.extend(args, argsTemplate)).appendTo($(\"#ui-bizagi-cancel-case\", $content));\n    $(\"#ui-bizagi-wp-project-activity-cancel-case-button > a\", self.content).click(function () {\n      var widgetParameters = {\n        widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_CANCEL_CASE,\n        maximize: false,\n        dialogClass: 'bz-cancel-case-widget',\n        idWorkitem: self.params.idWorkitem,\n        idCase: self.params.idCase,\n        modalParameters: {\n          refreshInbox: false,\n          title: bizagi.localization.getResource(\"workportal-widget-cancel-case-title\"),\n          width: 420,\n          height: 400 },\n\n        closeVisible: false };\n\n      self.publish(\"showDialogWidget\", widgetParameters);\n    });\n  },\n\n  /**\r\n      * Show case number\r\n      * @param args\r\n      * @param argsTemplate\r\n      */\n  showCaseNumber: function showCaseNumber(args, argsTemplate) {\n    var self = this;\n    var $content = self.getContent();\n    var contentTemplate = self.getTemplate(\"project-caseState\");\n    var isAdhoc = false;\n    if (!this.params.isAdhocProcess || typeof this.params.isAdhocProcess === 'undefined') {\n      isAdhoc = false;\n    } else\n    {\n      isAdhoc = this.params.isAdhocProcess;\n    }\n\n    self.params.helpUrl = bizagi.util.validateUrlWellFormed(self.params.helpUrl);\n\n    contentTemplate.\n    render(\n    $.extend(\n    args,\n    argsTemplate,\n    {\n      security: bizagi.menuSecurity,\n      isAdhocProcess: isAdhoc,\n      urlHelp: !bizagi.util.isEmpty(self.params.helpUrl) })).\n\n\n\n    appendTo($content);\n    self._startShowCancelCase(args, argsTemplate);\n    //Handle events\n    $(\".case-summary-favorite\", $content).on(\"click\", $.proxy(self.onClickFavorite, self));\n    // Set back and next case navigation\n    $(\".case-summary-back\", self.content).on(\"click\", $.proxy(self.goToCase, self, 'back'));\n    $(\".case-summary-next\", self.content).on(\"click\", $.proxy(self.goToCase, self, 'next'));\n\n    self.showBackNextNavigation();\n  },\n\n  /**\r\n      * wait for showCancelCase value from Navigator widget\r\n      * @param {JSON} args \r\n      * @param {Template} argsTemplate \r\n      */\n  _startShowCancelCase: function _startShowCancelCase(args, argsTemplate) {\n    var self = this,\n    _navigatorWidget = bizagi.injector.get(\"bizagi.workportal.widgets.navigator\"),\n    _start = self.showCancelCase.bind(self, args, argsTemplate);\n\n    _navigatorWidget.getShowCancelCase().done(_start);\n  },\n\n  /**\r\n      * Get Format date\r\n      * @param dateObj\r\n      * @returns {string}\r\n      */\n  getFormattedDate: function getFormattedDate(dateObj) {\n    var self = this;\n    var monthsNames = self.datePickerRegional.monthNames;\n    var shortMonth = dateObj.getMonth();\n    var bizagiLanguage = BIZAGI_LANGUAGE;\n    if (bizagiLanguage != null && bizagiLanguage != undefined && bizagiLanguage.length > 0 && bizagiLanguage.substring(0, 2) == \"fr\")\n    return $.datepicker.formatDate(\"dd\", dateObj) + \" \" + monthsNames[shortMonth];else\n\n    return monthsNames[shortMonth] + \" \" + $.datepicker.formatDate(\"dd\", dateObj);\n  },\n\n  /***\r\n      * Events\r\n      */\n  onClickFavorite: function onClickFavorite(event) {\n    event.preventDefault();\n    var self = this;\n    var favoriteOptions = {};\n    if ($(event.target).hasClass(\"bz-icon-star-outline\")) {\n      favoriteOptions = {\n        idObject: self.params.idCase,\n        favoriteType: \"CASES\" };\n\n      $.when(self.dataService.addFavorite(favoriteOptions)).done(function (favoritesData) {\n        self.params.guidFavorite = favoritesData.idFavorites;\n        $(event.target).removeClass(\"bz-icon-star-outline\");\n        $(event.target).addClass(\"bz-icon-star\");\n      });\n    } else\n    {\n      favoriteOptions = {\n        idObject: self.params.guidFavorite,\n        favoriteType: \"CASES\" };\n\n      $.when(self.dataService.delFavorite(favoriteOptions)).done(function () {\n        $(event.target).addClass(\"bz-icon-star-outline\");\n        $(event.target).removeClass(\"bz-icon-star\");\n      });\n    }\n  },\n\n  showHelpUrl: function showHelpUrl(urlHelp) {\n    window.open(urlHelp);\n  },\n\n  /**\r\n      * Call service effective duration by schedule work\r\n      * @param params\r\n      * @return {*}\r\n      */\n  callGetEffectiveDuration: function callGetEffectiveDuration(params) {\n    var self = this;\n    var d = $.Deferred();\n\n    if (params.fromDate) {\n      $.when(\n      self.dataService.getEffectiveDuration(params)).\n      done(function (data) {\n        d.resolve(data);\n      });\n    } else\n    {\n      d.resolve(null);\n    }\n\n    return d.promise();\n  },\n\n  /**\r\n      * Clean plugins and events\r\n      */\n  clean: function clean() {\n    var self = this;\n    $(\".show-diagram-case\", self.getContent()).off();\n    var cntxtSidebarActivity = self.contextsSidebarActivity || [];\n    this.params = {};\n    cntxtSidebarActivity.forEach(function (context) {\n      self.unsub(context, $.proxy(self.updateView, self));\n    });\n  },\n\n  goToCase: function goToCase(action) {\n    var self = this;\n    var idCase = action == 'back' ? self.getBackCase() : self.getNextCase();\n    if (idCase > 0) {\n      self.publish(\"executeAction\", {\n        action: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,\n        idCase: idCase });\n\n    }\n  },\n\n  getListKey: function getListKey() {\n    var self = this;\n    bizagi.lstIdCases = bizagi.lstIdCases || {};\n    if (bizagi.lstIdCases.length > 1) {\n      for (var i = 0; i < bizagi.lstIdCases.length; i++) {\n        if (self.params.idCase == bizagi.lstIdCases[i]) {\n          return i;\n        }\n      }\n    }\n    return -1;\n  },\n\n  getNextCase: function getNextCase() {\n    var self = this;\n    var nextIdCase = 0;\n    var key = self.getListKey();\n\n    // Check if last element\n    if (bizagi.lstIdCases.length == key + 1 || bizagi.lstIdCases.length == 1) {\n      nextIdCase = -1;\n    } else {\n      nextIdCase = bizagi.lstIdCases[key + 1];\n    }\n\n    return nextIdCase;\n  },\n\n  getBackCase: function getBackCase() {\n    var self = this;\n    var prevIdCase = 0;\n    var key = self.getListKey();\n\n    // Check if first element\n    if (key == 0) {\n      prevIdCase = -1;\n    } else {\n      prevIdCase = bizagi.lstIdCases[key - 1] || -1;\n    }\n\n    return prevIdCase;\n  },\n\n  showBackNextNavigation: function showBackNextNavigation() {\n    var self = this;\n    var nextCase = self.getNextCase();\n    var backCase = self.getBackCase();\n    nextCase <= 0 ? $(\".case-summary-next\", self.content).hide() : $(\".case-summary-next\", self.content).show();\n    backCase <= 0 ? $(\".case-summary-back\", self.content).hide() : $(\".case-summary-back\", self.content).show();\n\n    if (nextCase <= 0 && backCase <= 0) {\n      $(\".content-right-sidebar\").removeClass(\"bz-state-number--active-case\");\n      $(\".bz-case-navigation\").hide();\n    } else\n    {\n      $(\".content-right-sidebar\").addClass(\"bz-state-number--active-case\");\n      $(\".bz-case-navigation\").show();\n    }\n  } });\n\n\nbizagi.injector.register(\"bizagi.workportal.widgets.project.caseState\", [\"workportalFacade\", \"dataService\", bizagi.workportal.widgets.project.caseState]);","/*\r\n *   Name: Bizagi Workportal Desktop Project Activity State Controller\r\n *   Author: Elkin Fernando Siabato Cruz\r\n */\n\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.project.activityState\", {}, {\n  /*\r\n                                                                                                  *   Constructor\r\n                                                                                                  */\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    self.contextsSidebarActivity = params.contextsSidebarActivity;\n\n    //Regional\n    self.datePickerRegional = bizagi.localization.getResource(\"datePickerRegional\");\n\n    //Load templates\n    self.loadTemplates({\n      \"project-activityState-wrapper\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.project.activityState\").concat(\"#project-activityState-wrapper\") });\n\n  },\n\n  /*\r\n      * Renders the template defined in the widget\r\n      */\n  renderContent: function renderContent() {\n    var self = this;\n    self.content = $(\"<div></div>\");\n    return self.content;\n  },\n\n  /*\r\n      * links events with handlers\r\n      */\n  postRender: function postRender() {\n    var self = this;\n    //Handlers\n    self.contextsSidebarActivity.forEach(function (context) {\n      self.sub(context, $.proxy(self.updateView, self));\n    });\n\n  },\n\n  updateView: function updateView(event, params) {\n    var self = this,\n    args = params.args;\n    self.params = args;\n    self.getContent();\n    var timeZoneName = bizagi.currentUser.timeZoneName;\n    var argsTemplate = {};\n    var currentState = args.currentState || [];\n\n    var currentWorkitem = currentState.filter(function (objectWorkItem) {return objectWorkItem.idWorkItem == args.idWorkitem;})[0];\n\n\n    if (currentWorkitem) {\n      argsTemplate.activityName = currentWorkitem.state;\n      argsTemplate.activityIsEvent = bizagi.util.parseBoolean(currentWorkitem.isEvent);\n\n      var MOMENT_FORMAT = \"MM/DD/yyyy H:mm\";\n      var initDateObject = self.getDateWithTimezone(MOMENT_FORMAT, timeZoneName, currentWorkitem.entryDateWorkItem);\n      if (initDateObject.getTime) {\n        argsTemplate.initDateFormat = self.getFormattedDate(initDateObject);\n      }\n\n      var currentDate = self.getDateWithTimezone(MOMENT_FORMAT, timeZoneName);\n      var estimatedSolutionDateObject = self.getDateWithTimezone(MOMENT_FORMAT, timeZoneName, currentWorkitem.estimatedSolutionDate);\n      argsTemplate.estimatedSolutionDateFormat = \"\";\n\n      if (initDateObject.getTime && estimatedSolutionDateObject.getTime && currentWorkitem) {\n        self.calculateDataForTemplate(currentWorkitem, argsTemplate, initDateObject, currentDate, estimatedSolutionDateObject, currentState);\n      } else\n      {\n        //Update widget\n        self.updateTemplateWidget(argsTemplate, currentState);\n      }\n    }\n  },\n\n  initilizeActionMenu: function initilizeActionMenu(currentState) {\n    var self = this;\n    var allowsReassign = false;\n\n    if (currentState && currentState.length > 0) {\n      for (j = 0; j < currentState.length; ++j) {\n        if (currentState[j] && self.params && currentState[j].idWorkItem == self.params.idWorkitem) {\n          allowsReassign = bizagi.util.parseBoolean(currentState[j].allowsReassign) || false;\n        }\n      }\n    }\n    var btReassing = $(\"#bt-case-action-reassing\", self.content);\n    var btShareActivity = $(\"#ui-bizagi-wp-project-activity-button:not(.ui-bizagi-wp-project-activity-shared)\", self.content);\n\n    if (allowsReassign) {\n      btReassing.show();\n    }\n    btReassing.on(\"click\", function () {\n      self.onClickMenuReasign();\n    });\n    btShareActivity.on(\"click\", function () {\n      self.onClickShareActivity();\n    });\n  },\n  /**\r\n       * Executed when user reasign case\r\n       */\n  onClickMenuReasign: function onClickMenuReasign() {\n    var self = this;\n    var idCase = self.params.idCase;\n    var idWorkItem = self.params.idWorkitem,\n    onCloseSaveDialogBox = function onCloseSaveDialogBox() {\n      self.publish(\"closeCurrentDialog\");\n    };\n    bizagi.loader.startAndThen(\"admin\").then(function () {\n      $.when(self.publish(\"showDialogWidget\", {\n        widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_REASSIGN_CASE,\n        data: {\n          \"idCase\": idCase,\n          \"idWorkItem\": idWorkItem,\n          closeDialogWidget: onCloseSaveDialogBox },\n\n        closeVisible: false,\n        maximize: true,\n        modalParameters: {\n          title: bizagi.localization.getResource(\"render-actions-reassign\"),\n          width: \"910px\",\n          id: \"CaseAdmin\" } }));\n\n\n    });\n  },\n\n  /**\r\n      * let share the activity\r\n      */\n  onClickShareActivity: function onClickShareActivity() {\n    var self = this;\n    var params = {\n      \"idWorkItem\": self.params.idWorkitem };\n\n    var button = $(\"#ui-bizagi-wp-project-activity-button\", self.content);\n    button.attr(\"disabled\", true);\n    $.when(self.dataService.getShareActivity(params)).done(function (data) {\n      var notifier = window.parent.bizagi.injector.get('notifier');\n      if (data.value === true) {\n        button.addClass(\"ui-bizagi-wp-project-activity-shared\").\n        unbind(\"click\");\n        notifier.showSucessMessage(bizagi.localization.getResource(\"workportal-project-activity-success-message\"), '');\n      } else {\n        notifier.showErrorMessage(bizagi.localization.getResource(\"workportal-project-activity-error-message\"), '');\n      }\n    }).always(function () {\n      button.attr(\"disabled\", false);\n    });\n  },\n\n  calculateDataForTemplate: function calculateDataForTemplate(currentWorkitem, argsTemplate, creationDateObject, currentDate, estimatedSolutionDateObject, currentState) {\n    var self = this;\n    var MOMENT_FORMAT = \"MM/DD/yyyy H:mm\";\n    var timeZoneName = bizagi.currentUser.timeZoneName;\n    var diffMillisecondsCurrentToEstimated = currentDate.getTime() - estimatedSolutionDateObject.getTime();\n    var diffMillisecondsCreationToSolution = creationDateObject.getTime() - estimatedSolutionDateObject.getTime();\n\n    var paramsEffectiveDurationOpened = {\n      idUser: bizagi.currentUser.idUser,\n      fromDate: creationDateObject.getTime(),\n      toDate: self.getDateWithTimezone(MOMENT_FORMAT, timeZoneName).getTime() };\n\n\n    var currentDateExceededEstimatedDate = false;\n    var paramsEffectiveDuration = {\n      idUser: bizagi.currentUser.idUser,\n      fromDate: currentDate.getTime(),\n      toDate: estimatedSolutionDateObject.getTime() };\n\n    var paramsEffectiveDurationInitialToEstimated = {};\n    if (diffMillisecondsCurrentToEstimated > 0) {//Exceeded limit estimatedSolution\n      paramsEffectiveDuration.fromDate = estimatedSolutionDateObject.getTime();\n      paramsEffectiveDuration.toDate = currentDate.getTime();\n      currentDateExceededEstimatedDate = true;\n    } else\n    {\n      paramsEffectiveDurationInitialToEstimated.idUser = bizagi.currentUser.idUser;\n      paramsEffectiveDurationInitialToEstimated.fromDate = creationDateObject.getTime();\n      paramsEffectiveDurationInitialToEstimated.toDate = estimatedSolutionDateObject.getTime();\n    }\n\n    var differenceCreatedToCurrent = paramsEffectiveDurationOpened.toDate - paramsEffectiveDurationOpened.fromDate;\n    var differenceCurrentToEstimated = paramsEffectiveDuration.toDate - paramsEffectiveDuration.fromDate;\n    var differenceInitialToEstimated = diffMillisecondsCurrentToEstimated > 0 ? 0 : paramsEffectiveDurationInitialToEstimated.toDate - paramsEffectiveDurationInitialToEstimated.fromDate;\n\n    var actualDate = self.getDateWithTimezone(MOMENT_FORMAT, timeZoneName);\n    var relativeTime = bizagi.util.dateFormatter.getRelativeTime(new Date(actualDate.getTime() - differenceCreatedToCurrent), null, false, timeZoneName);\n    argsTemplate.colorState = currentWorkitem.colorState;\n    argsTemplate.relativeTimeState = bizagi.localization.getResource(\"workportal-project-activity-state-opened\").replace(\"%s\", relativeTime);\n    argsTemplate.percentCompleteBar = 100;\n\n    if (diffMillisecondsCreationToSolution === 0) {\n      argsTemplate.showEstimatedSolutionDate = false;\n    } else\n    {\n      argsTemplate.showEstimatedSolutionDate = true;\n      if (currentDateExceededEstimatedDate === false) {\n        var percentBar = self.getPercentBar(differenceInitialToEstimated / 1000 / 60, differenceCurrentToEstimated / 1000 / 60);\n        argsTemplate.percentCompleteBar = percentBar.percent;\n      }\n    }\n\n    if (currentWorkitem) {\n      argsTemplate.isEvent = bizagi.util.parseBoolean(currentWorkitem.isEvent);\n      argsTemplate.canShareActivity = currentWorkitem.canShareActivity;\n      argsTemplate.isShared = currentWorkitem.isShared;\n    }\n\n    argsTemplate.estimatedSolutionDateFormat = self.getFormattedDate(estimatedSolutionDateObject);\n\n    //Update widget\n    self.updateTemplateWidget(argsTemplate, currentState);\n  },\n\n  getPercentBar: function getPercentBar(totalMinutes, sectionMinutes) {\n    var response = {};\n    response.percent = Math.round((1 - sectionMinutes / totalMinutes) * 100);\n    return response;\n  },\n\n\n  updateTemplateWidget: function updateTemplateWidget(argsTemplate, currentState) {\n    var self = this,\n    $content = self.getContent().empty();\n    if (bizagi.override.enableShareActivity === false) {\n      argsTemplate.canShareActivity = false;\n      argsTemplate.isShared = false;\n    }\n    //Update widget\n    var contentTemplate = self.getTemplate(\"project-activityState-wrapper\");\n    contentTemplate.\n    render(argsTemplate).appendTo($content);\n\n    if (currentState.length > 0) {\n      self.initilizeActionMenu(currentState);\n    }\n    self.shareActivityTooltip();\n  },\n\n  /**\r\n      * show tooltip when the activity is shared or can be\r\n      */\n  shareActivityTooltip: function shareActivityTooltip() {\n    var self = this;\n    var activityButton = $(\"#ui-bizagi-wp-project-activity-button\", self.content);\n    activityButton.on('mouseenter', function () {\n      var texto = activityButton.hasClass(\"ui-bizagi-wp-project-activity-shared\") ? \"workportal-project-activity-shared\" : \"workportal-project-activity-share\";\n      activityButton.attr(\"title\", bizagi.localization.getResource(texto));\n    });\n    activityButton.tooltip({\n      tooltipClass: \"custom-tooltip-styling-bottom-bar\",\n      position: {\n        my: 'right top',\n        at: 'left top',\n        of: activityButton,\n        collision: 'flip' } });\n\n\n  },\n\n  getFormattedDate: function getFormattedDate(dateObj) {\n    var self = this;\n    var monthsNames = self.datePickerRegional.monthNames;\n    var shortMonth = dateObj.getMonth();\n    var bizagiLanguage = BIZAGI_LANGUAGE;\n    if (bizagiLanguage != null && bizagiLanguage != undefined && bizagiLanguage.length > 0 && bizagiLanguage.substring(0, 2) == \"fr\")\n    return $.datepicker.formatDate(\"dd\", dateObj) + \" \" + monthsNames[shortMonth];else\n\n    return monthsNames[shortMonth] + \" \" + $.datepicker.formatDate(\"dd\", dateObj);\n  },\n\n  clean: function clean() {\n    var self = this;\n    var cntxtSidebarActivity = self.contextsSidebarActivity || [];\n    this.params = {};\n    cntxtSidebarActivity.forEach(function (context) {\n      self.unsub(context, $.proxy(self.updateView, self));\n    });\n  },\n\n  /**\r\n      * Call services\r\n      */\n  callGetEffectiveDuration: function callGetEffectiveDuration(params) {\n    var self = this;\n    var d = $.Deferred();\n\n    //Fix .NET, multiple call service with same data in a few milliseconds\n    setTimeout(function () {\n      if (params.fromDate) {\n        $.when(\n        self.dataService.getEffectiveDuration(params)).\n        done(function (data) {\n          d.resolve(data);\n        });\n      } else\n      {\n        d.resolve(null);\n      }\n    }, 200);\n\n\n    return d.promise();\n  } });\n\n\nbizagi.injector.register(\"bizagi.workportal.widgets.project.activityState\", [\"workportalFacade\", \"dataService\", bizagi.workportal.widgets.project.activityState]);","/*\r\n *   Name: Bizagi Workportal Desktop Project Process State Controller\r\n *   Author: Elkin Fernando Siabato Cruz\r\n */\n\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.project.processState\", {}, {\n  /*\r\n                                                                                                 *   Constructor\r\n                                                                                                 */\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    self.contextsSidebarActivity = params.contextsSidebarActivity;\n\n    //Load templates\n    self.loadTemplates({\n      \"project-process-state\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.project.processState\").concat(\"#project-process-state\") });\n\n  },\n\n  /*\r\n      * Renders the template defined in the widget\r\n      */\n  renderContent: function renderContent() {\n    var self = this;\n    var template = self.getTemplate(\"project-process-state\");\n    self.content = template.render({});\n    return self.content;\n  },\n\n  /*\r\n      * links events with handlers\r\n      */\n  postRender: function postRender() {\n    var self = this;\n\n    //Handlers\n    self.contextsSidebarActivity.forEach(function (context) {\n      self.sub(context, $.proxy(self.updateView, self));\n    });\n  },\n\n  updateView: function updateView(event, params) {\n    var self = this,\n    args = params.args,\n    $content = self.getContent().empty();\n    self.params = args;\n\n    var argsTemplate = {};\n    argsTemplate[\"showParentProcess\"] = args[\"idParentCase\"] >= 1 ? true : false;\n    argsTemplate[\"parentProcess\"] = {\n      \"displayName\": args[\"parentDisplayName\"],\n      \"idCase\": args[\"idParentCase\"],\n      \"idWorkItem\": args[\"idWorkItem\"],\n      \"idTask\": args[\"idTask\"] == \"0\" ? \"\" : args[\"idTask\"],\n      \"idWorkflow\": args[\"idWorkflowParentCase\"] };\n\n\n    //Update widget\n    var contentTemplate = self.getTemplate(\"project-process-state\");\n    contentTemplate.\n    render($.extend(args, argsTemplate)).\n    appendTo($content);\n\n    //handle click\n\n    $(\"#go-to-parent-case\", $content).on(\"click\", $.proxy(self.onClickGoToParentCase, self));\n\n  },\n\n  onClickGoToParentCase: function onClickGoToParentCase(event) {\n    event.preventDefault();\n    var self = this;\n\n    self.routingExecute($(event.target).closest(\"#go-to-parent-case\"));\n  },\n\n  clean: function clean() {\n    var self = this;\n    self.params = {};\n    self.contextsSidebarActivity.forEach(function (context) {\n      self.unsub(context, $.proxy(self.updateView, self));\n    });\n  } });\n\n\n\nbizagi.injector.register('bizagi.workportal.widgets.project.processState', ['workportalFacade', 'dataService', bizagi.workportal.widgets.project.processState]);","/*\r\n *   Name: Bizagi Workportal Desktop Project Users Controller\r\n *   Author: Elkin Fernando Siabato Cruz\r\n */\n\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.project.users\", {}, {\n  /*\r\n                                                                                          *   Constructor\r\n                                                                                          */\n  init: function init(workportalFacade, dataService, relatedusers, params) {\n    var self = this;\n    self.relatedusers = relatedusers;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    self.contextsSidebarActivity = params.contextsSidebarActivity;\n\n    self.plugins = {};\n    self.users = [];\n    self.loadedUsers = false;\n\n    //Load templates\n    self.loadTemplates({\n      \"project-users\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.project.users\").concat(\"#project-users-main\") });\n\n  },\n\n  /*\r\n      * Renders the template defined in the widget\r\n      */\n  renderContent: function renderContent() {\n    var self = this;\n    self.content = $(\"<div></div>\");\n    return self.content;\n  },\n\n  /*\r\n      * links events with handlers\r\n      */\n  postRender: function postRender() {\n    var self = this;\n\n    //Handlers\n    self.contextsSidebarActivity.forEach(function (context) {\n      self.sub(context, $.proxy(self.updateView, self));\n    });\n    self.sub('ON_RENDER_FINISH', $.proxy(self.onRenderFinish, self));\n  },\n\n  updateView: function updateView(event, params) {\n    var self = this;\n    self.params = params;\n    setTimeout(function () {\n      if (self.loadedUsers === false) {\n        self.onRenderFinish();\n      }\n    }, 500);\n  },\n\n  onRenderFinish: function onRenderFinish() {\n    var self = this;\n    var args = self.params.args;\n    var $content = self.getContent().empty();\n    self.loadedUsers = true;\n\n    var contentTemplate = self.getTemplate(\"project-users\");\n    contentTemplate.render().appendTo($content);\n    self.showCreatorInformation($content);\n\n    var typesAssignUser = [{\n      id: args.createdBy.userId,\n      typeName: \"owner\" }];\n\n\n    if (args.idCase > 0) {\n      self.relatedusers.render(self.content, \".relatedusers-wrapper\", args.idCase, typesAssignUser);\n    }\n  },\n\n  /**\r\n      * show the information of the creator case\r\n      * @param {string} $content html conteiner\r\n      */\n  showCreatorInformation: function showCreatorInformation($content) {\n    var self = this;\n    var params = {\n      userIds: self.params.args.createdBy.userId,\n      width: 50,\n      height: 50 };\n\n\n    self.dataService.getUsersData(params).done(function (user) {\n      var userInfo = usersAdapter.createJsonUserInfo(\n      user[0].id,\n      user[0].name,\n      user[0].username,\n      user[0].picture ? \"data:image/png;base64,\" + user[0].picture : undefined,\n      user[0].email,\n      user[0].name.getInitials(),\n      false,\n      true,\n      [],\n      []);\n\n      $content.find(\"#ui-bizagi-wp-project-users-wrapper .ui-bizagi-wp-project-users-creator-info\").userinformation(self, { user: userInfo });\n    });\n  },\n\n  clean: function clean() {\n    var self = this;\n    self.loadedUsers = false;\n    self.contextsSidebarActivity.forEach(function (context) {\n      self.unsub(context, $.proxy(self.updateView, self));\n    });\n  } });\n\n\nbizagi.injector.register(\"bizagi.workportal.widgets.project.users\", [\"workportalFacade\", \"dataService\", \"relatedusers\", bizagi.workportal.widgets.project.users]);","/*\r\n *   Name: Bizagi Workportal Desktop Project Subprocesses Data Tooltip\r\n *   Author: Bizagi Latam\r\n */\n\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.project.subprocesses.data\", {\n\n  responseSubprocessState: {},\n  responseSubprocess: function responseSubprocess(newValue) {\n    if (newValue) {\n      responseSubprocessState = newValue;\n    }\n    return responseSubprocessState;\n  },\n\n  auxArrayListSubprocessesState: [],\n  auxArrayListSubprocesses: function auxArrayListSubprocesses(newItem) {\n    if (newItem) {\n      if (jQuery.isArray(newItem) && newItem.length === 0) {\n        this.auxArrayListSubprocessesState.length = 0; //clean array if change reference\n      } else\n      {\n        return this.auxArrayListSubprocessesState.push(newItem);\n      }\n    } else\n    {\n      return this.auxArrayListSubprocessesState;\n    }\n  } },\n{\n  /*\r\n   *   Constructor\r\n   */\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    // Init static properties\n    self.Class.auxArrayListSubprocesses([]);\n\n    //Load templates\n    self.loadTemplates({\n      \"project-subprocesses-tootip-custom-properties\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.project.subprocesses.data\").concat(\"#project-subprocesses-tooltip-custom-properties-wrapper\") });\n\n  },\n\n\n  initializeTooltip: function initializeTooltip(selectorTooltip) {\n    var self = this;\n    var $content = self.getContent();\n\n    $(selectorTooltip, $content).tooltip({\n      position: {\n        collision: \"flipfit\",\n        my: \"right center\", at: \"left-10 center\" },\n\n      show: null, // show immediately\n      content: function content() {\n\n        var idCase = $(this).closest(\"li\").find(\"#idCase\").val();\n        var itemsFinded = self.Class.auxArrayListSubprocesses().filter(function (item) {\n          return item.idCase == idCase;\n        });\n\n        var indexSubprocess, idCustData, text;\n        if (itemsFinded.length > 0) {\n          indexSubprocess = itemsFinded[0].indexSubprocess;\n          idCustData = itemsFinded[0].idCustData;\n          text = $(this).text();\n\n          return self.getContentTooltip(indexSubprocess, idCustData, text,\n          self.getTemplate(\"project-subprocesses-tootip-custom-properties\"));\n        }\n\n\n      },\n      open: function open(event, ui) {\n        if (typeof event.originalEvent === 'undefined') {\n          return false;\n        }\n        var $id = $(ui.tooltip).attr('id');\n        // close any lingering tooltips\n        $('div.ui-tooltip').not('#' + $id).remove();\n      },\n      close: function close(event, ui) {\n        ui.tooltip.hover(function () {\n          $(this).stop(true).fadeTo(400, 1);\n        },\n        function () {\n          $(this).fadeOut('400', function () {\n            $(this).remove();\n          });\n        });\n      } });\n\n  },\n\n  getContentTooltip: function getContentTooltip(indexSubprocess, idCustData, textLI, templateTooltip) {\n    var self = this;\n\n    //when not show custom columns\n    if (idCustData == \"-1\") {\n      idCustData = \"0\"; //So show only basic data subprocess\n    }\n\n    var rowCustomProperty = function rowCustomProperty(nameProperty, valueProperty) {\n      return {\n        nameProperty: nameProperty,\n        valueProperty: valueProperty };\n\n    };\n\n    var arrayCustomsProperties = [];\n    var auxValueProperty = \"\";\n    var subprocessData = self.getSubprocessData(indexSubprocess, idCustData);\n    var custData = subprocessData.custData;\n    var custDataTypes = subprocessData.custDataTypes;\n    var custFields = subprocessData.custFields;\n    var displayName = subprocessData.displayName;\n\n    //subproceso\n    arrayCustomsProperties.push(new rowCustomProperty(bizagi.localization.getResource(\"workportal-widget-inboxcommon-subprocess\"), displayName));\n\n    //Others custom properties\n    if (custData.length) {\n      for (var i = 0; i < custData.length; i += 1) {\n        auxValueProperty = custData[i];\n        if (custDataTypes) {\n          if (custDataTypes[i] == \"Money\") {\n            auxValueProperty = bizagi.util.formatMonetaryCell(auxValueProperty);\n          } else {\n            if (custDataTypes[i] == \"Boolean\") {\n              auxValueProperty = bizagi.util.formatBoolean(auxValueProperty);\n            } else {\n              if (custDataTypes[i] == \"Float\" || custDataTypes[i] == \"Real\") {\n                auxValueProperty = bizagi.util.formatDecimalCell(auxValueProperty);\n              } else\n              {\n                if (typeof auxValueProperty === \"function\") {\n                  auxValueProperty = \"\";\n                }\n              }\n            }\n          }\n        }\n        arrayCustomsProperties.push(new rowCustomProperty(custFields[i], auxValueProperty));\n      }\n    }\n\n    //Render properties\n    var objectTemplate = {};\n    objectTemplate.arrayCustomsProperties = arrayCustomsProperties;\n    objectTemplate.nameSubprocess = textLI;\n    var contentTemplate = templateTooltip;\n    var contentTableCustomProperties = $('<div class=\"bizagi-custom-tooltip-subprocesses\"></div>');\n    contentTemplate.render(objectTemplate).appendTo(contentTableCustomProperties);\n\n    return contentTableCustomProperties.html();\n  },\n\n  getSubprocessData: function getSubprocessData(indexSubprocess, idCustData) {\n    var self = this;\n    var subProcessData = {};\n    var subProcess = self.Class.responseSubprocess().subProcesses;\n    var subProcPersonalized = self.Class.responseSubprocess().subProcPersonalized;\n\n    if (subProcess && subProcess.length > 0) {\n      subProcessData.custData = subProcess[indexSubprocess].custData;\n      subProcessData.custDataTypes = subProcess[indexSubprocess].custDataTypes;\n      var customFields = self.Class.responseSubprocess().CustFields[idCustData];\n      subProcessData.custFields = customFields[Object.keys(customFields)[0]];\n      subProcessData.displayName = subProcess[indexSubprocess].displayName;\n    } else if (subProcPersonalized && Object.keys(subProcPersonalized).length > 0) {\n      subProcessData.custData = subProcPersonalized[0].subProcesses[indexSubprocess].custData;\n      subProcessData.custDataTypes = subProcPersonalized[0].subProcesses[indexSubprocess].custDataTypes;\n      subProcessData.custFields = subProcPersonalized[0].CustFields[0];\n      subProcessData.displayName = subProcPersonalized[0].subProcesses[indexSubprocess].displayName;\n    }\n    return subProcessData;\n  },\n\n\n  clean: function clean() {\n\n  } });\n\n\nbizagi.injector.register(\"bizagi.workportal.widgets.project.subprocesses.data\", [\"workportalFacade\", \"dataService\", bizagi.workportal.widgets.project.subprocesses.data]);","/*\r\n *   Name: Bizagi Workportal Desktop Project Events Controller\r\n *   Author: Elkin Fernando Siabato Cruz\r\n */\n\nbizagi.workportal.widgets.project.subprocesses.data.extend(\"bizagi.workportal.widgets.project.events\", {}, {\n  /*\r\n                                                                                                              *   Constructor\r\n                                                                                                              */\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    self.contextsSidebarActivity = params.contextsSidebarActivity;\n\n    //Load templates\n    self.loadTemplates({\n      \"project-events\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.project.events\").concat(\"#project-events-wrapper\") });\n\n  },\n\n  /*\r\n      * Renders the template defined in the widget\r\n      */\n  renderContent: function renderContent() {\n    var self = this;\n    var template = self.getTemplate(\"project-events\");\n    self.content = template.render({});\n    return self.content;\n  },\n\n  /*\r\n      * links events with handlers\r\n      */\n  postRender: function postRender() {\n    var self = this;\n\n    //Handlers\n    self.contextsSidebarActivity.forEach(function (context) {\n      self.sub(context, $.proxy(self.updateView, self));\n    });\n  },\n\n  updateView: function updateView(event, params) {\n    var self = this,\n    args = params.args,\n    $content = self.getContent().empty();\n    self.params = args;\n\n    $.when(self.getArgsTemplate(args)).done(function (responseArgsTemplate) {\n      //Update widget\n      var contentTemplate = self.getTemplate(\"project-events\");\n      contentTemplate.\n      render($.extend(args, responseArgsTemplate)).\n      appendTo($content);\n\n      $(\".list-events li.event a\", $content).on(\"click\", $.proxy(self.onClickGoEvent, self));\n\n      self.initializeTooltip(\".list-events li\");\n    });\n  },\n\n  getArgsTemplate: function getArgsTemplate(args) {\n    var def = $.Deferred(),\n    argsTemplate = {},\n    self = this;\n\n    //check if show event tab or not\n    if (args[\"countEvents\"] >= 1) {\n      for (var i = 0; i < args[\"currentState\"].length; i++) {\n        if (args[\"currentState\"][i][\"isEvent\"] == \"true\" && args[\"currentState\"][i][\"idWorkItem\"] == args.idWorkitem) {\n          args[\"countEvents\"] = args[\"countEvents\"] - 1;\n        }\n      }\n    }\n    argsTemplate[\"showEvents\"] = args[\"countEvents\"] >= 1 ? true : false;\n\n    if (argsTemplate[\"showEvents\"]) {\n      $.when(self.callSummaryCaseEvents(args.idCase)).done(function (responseEvents) {\n        args[\"showEvents\"] = responseEvents[\"events\"].length >= 1 ? true : false;\n\n        if (args[\"showEvents\"]) {\n          argsTemplate[\"events\"] = [];\n          responseEvents[\"events\"].forEach(function (elementEvent) {\n            argsTemplate[\"events\"].push($.extend(elementEvent[Object.keys(elementEvent)[0]],\n            { idWorkFlow: responseEvents[\"idWorkFlow\"] }));\n          });\n        }\n        def.resolve(argsTemplate);\n      });\n    } else\n    {\n      def.resolve(argsTemplate);\n    }\n    return def.promise();\n  },\n\n  /**\r\n      * Events UI\r\n      */\n\n  onClickGoEvent: function onClickGoEvent(event) {\n    event.preventDefault();\n    var self = this;\n    $.when(bizagi.util.autoSave()).done(function () {\n      self.routingExecute($(event.target).closest(\"li\"));\n    });\n  },\n\n  /**\r\n      * Call services\r\n      */\n\n  /*\r\n          *  Get data for users\r\n          */\n  callSummaryCaseEvents: function callSummaryCaseEvents(idCase) {\n    var self = this,\n    def = $.Deferred();\n\n    $.when(\n    self.dataService.summaryCaseEvents({\n      idCase: idCase })).\n\n    done(function (events) {\n      def.resolve(events);\n    });\n\n    return def.promise();\n  },\n\n  clean: function clean() {\n    var self = this;\n    this.params = {};\n    self.contextsSidebarActivity.forEach(function (context) {\n      self.unsub(context, $.proxy(self.updateView, self));\n    });\n  } });\n\n\n\nbizagi.injector.register('bizagi.workportal.widgets.project.events', ['workportalFacade', 'dataService', bizagi.workportal.widgets.project.events], true);","/*\r\n *   Name: Bizagi Workportal Desktop Project Subprocesses Controller\r\n *   Author: Elkin Fernando Siabato Cruz\r\n */\n\nbizagi.workportal.widgets.project.subprocesses.data.extend(\"bizagi.workportal.widgets.project.subprocesses\", {\n\n  responseSubprocess: function responseSubprocess(newValue) {\n    return this._super(newValue);\n  },\n\n  auxArrayListSubprocesses: function auxArrayListSubprocesses(newValue) {\n    return this._super(newValue);\n  } },\n\n{\n  /*\r\n   *   Constructor\r\n   */\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    self.contextsSidebarActivity = params.contextsSidebarActivity;\n\n    //Load templates\n    self.loadTemplates({\n      \"project-subprocesses\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.project.subprocesses\").concat(\"#project-subprocesses-wrapper\") });\n\n  },\n\n  /*\r\n      * Renders the template defined in the widget\r\n      */\n  renderContent: function renderContent() {\n    var self = this;\n    self.content = $(\"<div></div>\");\n    return self.content;\n  },\n\n  /*\r\n      * links events with handlers\r\n      */\n  postRender: function postRender() {\n    var self = this;\n\n    //Handlers\n    self.contextsSidebarActivity.forEach(function (context) {\n      self.sub(context, $.proxy(self.updateView, self));\n    });\n  },\n\n  updateView: function updateView(event, params) {\n    var self = this,\n    args = params.args,\n    $content = self.getContent().empty();\n    self.params = args;\n\n    if (self.params.idCase > 0) {\n      $.when(\n      self.dataService.summarySubProcess({\n        idCase: self.params.idCase })).\n\n      done(function (responseSubprocess) {\n        self.Class.responseSubprocess(responseSubprocess);\n\n        self.organizeDataForSubprocesses(self.params);\n      });\n    }\n  },\n\n  organizeDataForSubprocesses: function organizeDataForSubprocesses(args) {\n    var self = this;\n    if (self.Class.responseSubprocess().showSubProcess) {\n      $.each(self.Class.responseSubprocess().subProcesses, function (key) {\n        var custData = self.Class.responseSubprocess().subProcesses[key].custData;\n        if (custData && custData.length) {\n          for (var i = 0; i < custData.length; i += 1) {\n            if (custData[i] === null) {\n              custData[i] = \"\";\n            }\n          }\n        }\n\n      });\n\n      var subProcess = self.Class.responseSubprocess().subProcesses || self.Class.responseSubprocess().subProcPersonalized;\n\n      //prepare array with subprocess\n      self.Class.auxArrayListSubprocesses([]);\n      for (var i = 0; i < Object.keys(subProcess).length; i += 1) {\n        var tempSubprocesses = subProcess[i];\n\n        self.Class.auxArrayListSubprocesses({\n          isOpen: tempSubprocesses.isOpen,\n          radNumber: tempSubprocesses.radNumber,\n          displayName: tempSubprocesses.displayName,\n          idCase: tempSubprocesses.idCase,\n          indexSubprocess: i,\n          idCustData: tempSubprocesses.idCustData });\n\n        if (tempSubprocesses.subProcesses) {\n          Object.keys(tempSubprocesses).forEach(function (key) {//only one iteration\n            self.Class.auxArrayListSubprocesses({\n              isOpen: tempSubprocesses[key].isOpen,\n              radNumber: tempSubprocesses[key].radNumber,\n              displayName: tempSubprocesses[key].displayName,\n              idCase: tempSubprocesses[key].idCase,\n              indexSubprocess: i,\n              idCustData: tempSubprocesses[key].idCustData });\n\n          });\n        }\n      }\n\n      self.renderWidget();\n    }\n  },\n\n  renderWidget: function renderWidget() {\n    var self = this;\n    var $content = self.getContent();\n\n    //Update widget\n    var contentTemplate = self.getTemplate(\"project-subprocesses\");\n    contentTemplate.\n    render({ auxArrayListSubprocesses: self.Class.auxArrayListSubprocesses() }).\n    appendTo($content);\n\n    $(\".list-subprocesses a\", $content).on(\"click\", $.proxy(self.onClickGoSubprocess, self));\n\n    self.initializeTooltip(\".list-subprocesses li\");\n  },\n\n\n  /**\r\n      * Events UI\r\n      */\n\n  onClickGoSubprocess: function onClickGoSubprocess(event) {\n    event.preventDefault();\n    var self = this;\n\n    self.routingExecute($(event.target).closest(\"li\"));\n  },\n\n  clean: function clean() {\n    var self = this;\n\n    self.params = {};\n    self.pluginTooltip = null;\n\n    self.contextsSidebarActivity.forEach(function (context) {\n      self.unsub(context, $.proxy(self.updateView, self));\n    });\n  } });\n\n\n\nbizagi.injector.register(\"bizagi.workportal.widgets.project.subprocesses\", [\"workportalFacade\", \"dataService\", bizagi.workportal.widgets.project.subprocesses]);","/*\r\n    Name   : Bizagi Workportal Project Activity Description\r\n    Created on : Jun 27, 2017\r\n    Author     : Diana Mogollon\r\n*/\n\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.project.activity.description\", {}, {\n\n  /*\r\n                                                                                                         *   Constructor\r\n                                                                                                         */\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    params = params || {};\n\n    //Load templates\n    self.loadTemplates({\n      \"project-activity-description\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.project.activity.description\").concat(\"#project-activity-description\") });\n\n  },\n\n  /**\r\n      * Renders the template defined in the widget\r\n      */\n  renderContent: function renderContent() {\n    var self = this;\n    var template = self.getTemplate(\"project-activity-description\");\n    self.content = template.render();\n    return self.content;\n  },\n\n  /**\r\n      * links events with handlers\r\n      */\n  postRender: function postRender() {\n    var self = this;\n    self.description = self.getWorkitemDescription();\n    if (self.description) {\n      self.callTaskDescription();\n    } else {\n      self.content = $('<div />');\n    }\n  },\n\n  /**\r\n      * \r\n      * Call task description widget \r\n      */\n\n  callTaskDescription: function callTaskDescription() {\n    var self = this;\n    var width = 310;\n    var taskDescriptionParams = {\n      container: $(\"#ui-bizagi-wp-project-activity-task_description_container\", self.content),\n      description: self.description,\n      width: width };\n\n    self.taskDescriptionWidget = new bizagi.workportal.widgets.task.description(self.workportalFacade, self.dataService, taskDescriptionParams);\n    self.taskDescriptionWidget.render();\n  },\n\n  getWorkitemDescription: function getWorkitemDescription() {\n    var self = this;\n    var params = self.params || {};\n    var idWorkitem = params.idWorkitem || 0;\n    var currentState = params.currentState || [];\n    var description = \"\";\n\n    for (var i = 0; i < currentState.length; i++) {\n      if (idWorkitem == currentState[i].idWorkItem) {\n        description = currentState[i].tskDescription;\n        break;\n      }\n    }\n\n    return description;\n  },\n\n  /**\r\n      * Clean widget\r\n      */\n  clean: function clean() {\n\n  } });\n\n\nbizagi.injector.register('bizagi.workportal.widgets.project.activity.description', ['workportalFacade', 'dataService', bizagi.workportal.widgets.project.activity.description], true);"]}