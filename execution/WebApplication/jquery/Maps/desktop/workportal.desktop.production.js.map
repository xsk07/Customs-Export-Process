{"version":3,"sources":["jquery/workportal/js/base/command/bizagi.workportal.command.security.js","jquery/workportal/js/bizagi.workportal.webpart.helper.js","jquery/workportal/js/base/widget/bizagi.workportal.widgets.widget.js","jquery/workportal/js/base/action/bizagi.workportal.actions.search.js","jquery/workportal/js/base/widget/bizagi.workportal.widgets.render.js","jquery/workportal/js/base/widget/bizagi.workportal.widgets.listCases.js","jquery/workportal/js/base/widget/bizagi.workportal.widgets.renderForm.js","jquery/workportal/js/desktop/widget/bizagi.workportal.desktop.widgets.print.js","jquery/workportal/desktop/widget/homeportal/bizagi.workportal.desktop.widgets.homeportal.js","jquery/workportal/desktop/widget/dialognav/bizagi.workportal.desktop.widgets.dialognav.js","jquery/common/bizagi.ui.controls/jquery.ui.controls.definition.js","jquery/workportal/js/base/command/bizagi.workportal.command.printform.js","jquery/workportal/js/base/bizagi.workportal.controllers.controller.js","jquery/workportal/js/base/bizagi.workportal.controllers.main.js","jquery/workportal/js/base/bizagi.workportal.controllers.menu.js","jquery/workportal/js/base/bizagi.workportal.controllers.workarea.js","jquery/workportal/js/base/webpart/bizagi.workportal.webparts.webpart.js","jquery/workportal/js/base/action/bizagi.workportal.actions.action.js","jquery/workportal/js/base/action/bizagi.workportal.actions.routing.js","jquery/workportal/js/desktop/action/bizagi.workportal.desktop.actions.routing.js","jquery/workportal/js/base/widget/bizagi.workportal.widgets.webpart.js","jquery/workportal/js/base/widget/bizagi.workportal.widgets.print.js","jquery/workportal/js/base/widget/bizagi.workportal.widgets.fontsize.js","jquery/workportal/js/base/widget/bizagi.workportal.widgets.routing.js","jquery/workportal/js/base/widget/bizagi.workportal.widgets.startForm.js","jquery/workportal/js/base/widget/bizagi.workportal.widgets.MySearchList.js","jquery/workportal/js/base/widget/bizagi.workportal.widgets.loadForm.js","jquery/workportal/js/base/widget/bizagi.workportal.widgets.subMenu.js","jquery/workportal/js/base/widget/bizagi.workportal.widgets.search.js","jquery/workportal/js/base/widget/bizagi.workportal.widgets.page.js","jquery/workportal/js/base/widget/bizagi.workportal.widgets.genericiframe.js","jquery/workportal/js/base/widget/bizagi.workportal.widgets.oldrenderintegration.js","jquery/workportal/js/desktop/widget/bizagi.workportal.desktop.widgets.fontsize.js","jquery/workportal/js/desktop/bizagi.workportal.desktop.controllers.main.js","jquery/workportal/js/desktop/bizagi.workportal.desktop.controllers.menu.js","jquery/workportal/js/desktop/bizagi.workportal.desktop.controllers.workarea.js","jquery/workportal/js/desktop/bizagi.workportal.desktop.popup.js","jquery/workportal/js/desktop/widget/bizagi.workportal.desktop.widgets.popup.js","jquery/workportal/js/desktop/widget/bizagi.workportal.desktop.widgets.routing.js","jquery/workportal/js/desktop/widget/bizagi.workportal.desktop.widgets.render.js","jquery/workportal/js/desktop/widget/bizagi.workportal.desktop.widgets.startForm.js","jquery/workportal/js/desktop/widget/bizagi.workportal.desktop.widgets.renderForm.js","jquery/workportal/desktop/widget/smartinbox/bizagi.workportal.desktop.widgets.smartinbox.js","jquery/workportal/desktop/widget/smartinbox.filter/bizagi.workportal.desktop.widgets.smartinbox.filter.js","jquery/workportal/js/desktop/widget/bizagi.workportal.desktop.widgets.subMenu.js","jquery/workportal/js/desktop/widget/bizagi.workportal.desktop.widgets.genericiframe.js","jquery/workportal/js/desktop/widget/bizagi.workportal.desktop.widgets.search.js","jquery/plugins/jsgrid/js/jsgrid.js","jquery/workportal/js/desktop/widget/bizagi.workportal.desktop.widgets.mySearchList.js","jquery/workportal/js/desktop/widget/bizagi.workportal.desktop.widgets.loadForm.js","jquery/workportal/js/desktop/widget/bizagi.workportal.desktop.widgets.oldrenderintegration.js","jquery/workportal/desktop/widget/createcase/bizagi.workportal.desktop.widgets.createcase.js","jquery/workportal/desktop/widget/updateform/bizagi.workportal.desktop.widgets.updateform.js","jquery/workportal/desktop/widget/templateEngine/bizagi.workportal.desktop.widgets.templateEngine.js","jquery/workportal/js/bizagi.workportal.override.helper.js","jquery/common/bizagi.ui.controls/jquery.ui.controls.loadtmpls.js","jquery/common/bizagi.dragScroll/js/bizagi.dragScroll.js","jquery/common/bizagi.internals/bizagi.workportal.desktop.overrides.js","jquery/workportal/desktop/widget/dashboard/bizagi.workportal.desktop.widgets.dashboard.js","jquery/workportal/desktop/widget/stuff/bizagi.workportal.desktop.widgets.stuff.js","jquery/workportal/desktop/widget/project.base/bizagi.workportal.desktop.widgets.project.base.js","jquery/workportal/desktop/widget/decontextualized.plans/bizagi.workportal.desktop.widgets.decontextualized.plans.js","jquery/workportal/desktop/widget/navigator/bizagi.workportal.desktop.widgets.navigator.js","jquery/workportal/desktop/widget/backnavigator/bizagi.workportal.desktop.widgets.backnavigator.js","jquery/workportal/desktop/widget/sidebarhome/bizagi.workportal.desktop.widgets.sidebarhome.js","jquery/workportal/desktop/widget/usersummary/bizagi.workportal.desktop.widgets.usersummary.js","jquery/workportal/desktop/widget/shortcuts/bizagi.workportal.desktop.widgets.shortcuts.js","jquery/workportal/desktop/widget/rightsidebar/bizagi.workportal.desktop.widgets.rightsidebar.js","jquery/workportal/desktop/widget/leftsidebar/bizagi.workportal.desktop.widgets.leftsidebar.js","jquery/workportal/desktop/widget/dummy/bizagi.workportal.desktop.widgets.dummy.js","jquery/workportal/desktop/widget/sidebar/bizagi.workportal.desktop.widgets.sidebar.js","jquery/workportal/js/base/widget/admin/admin.cases.js","jquery/workportal/js/base/widget/admin/admin.caseSearch.js","jquery/workportal/js/desktop/widget/bizagi.workportal.desktop.widgets.adhoc.create.process.js","jquery/workportal/desktop/widget/profly/bizagi.workportal.desktop.widgets.profly.js","jquery/workportal/desktop/widget/sessionTimeout/bizagi.workportal.desktop.widgets.sessionTimeout.js","jquery/workportal/desktop/widget/sessionTimeout/expired/bizagi.workportal.desktop.widgets.sessionTimeoutExpired.js","jquery/workportal/desktop/widget/user.privacy/bizagi.workportal.desktop.widgets.user.privacy.js","jquery/workportal/desktop/widget/users.modal/bizagi.workportal.desktop.widgets.users.modal.js","jquery/workportal/desktop/widget/accessDenied/bizagi.workportal.desktop.widgets.accessDenied.js","jquery/common/bizagi/js/bizagi.users.adapter.js","jquery/webparts/desktop/SharePoint/caseSummary/task.description/bizagi.workportal.desktop.widgets.task.description.js","jquery/webparts/desktop/SharePoint/workitemSummary/task.options/bizagi.workportal.desktop.widgets.task.options.js","jquery/workportal/js/services/bizagi.workportal.services.quickActionsRequester.js","jquery/workportal/desktop/widget/casesTemplate/bizagi.workportal.desktop.widgets.casestemplate.js"],"names":["_typeof","obj","Symbol","iterator","constructor","prototype","_$$Class$extend","_bizagi$workportal$co","_defineProperty","key","value","Object","defineProperty","enumerable","configurable","writable","$","bizagi","ui","controls","uitable","namespace","availableComponents","css","tmpl","tmpl2","tmpl3","uicombo","uicheckbox","uiradio","uitreeview","uimultiselect","Class","init","dataService","this","rawData","getSecurity","self","def","Deferred","security","jsonSecurityList","menuSecurity","resolve","when","getMenuAuthorization","done","data","currentUser","associatedStakeholders","length","permissions","push","convertSecurityData","each","authMenu","fail","reject","promise","permsMenu","getRecursivePerms","perms","checkSecurityPerm","module","deferred","currentMenuSecurity","getRawData","renderFactory","print","properties","printParams","extend","document","triggerHandler","widgetName","workportal","widgets","widget","BIZAGI_WORKPORTAL_WIDGET_PRINT","modalParameters","title","localization","getResource","refreshInbox","params","referrer","hasOwnProperty","referrerParams","buttons","text","click","selfButton","frameTemplate","getTemplate","headerTemplate","executePrintWidgetAction","objFrame","strFrameName","Date","getTime","jFrame","printID","jFrameHeader","environment","loader","productBuild","productBuildToAbout","build","fileName","window","parent","appendTo","util","isIE","frames","i","name","objDoc","contentWindow","open","objDocStr","innerHTML","html","write","close","win","styleLoading","timeoutClose","setTimeout","clearTimeout","focus","tmpWindowTitle","timeoutPrint","timeoutRemove","remove","removeAttr","attr","timeoutWidgetAction","workportalFacade","resources","componentContainers","subscribers","disposed","templatesDeferred","getWorkportal","publish","eventName","subscribe","callback","bind","event","subscribeOneTime","one","unsubscribe","unbind","render","defer","renderingDeferred","areTemplatedLoaded","pipe","renderContent","postRender","getContent","content","defaultValue","getComponentSelector","component","getComponentContainer","resizeLayout","performResizeLayout","dispose","item","override","disposeTime","loadTemplates","templates","tmplPromises","useNewEngine","undefined","loadTemplate","path","apply","templateService","getTemplateWidget","isRendered","controllers","controller","componentRegex","_super","e","p","liveSave","autoSave","liveProcessesEvents","saveEvent","saveLivePromise","BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID","BIZAGI_WORKPORTAL_WIDGET_INBOX","defaultWidget","setContext","setWidget","addDialogToDialogStack","showDialogWidget","closeCurrentDialog","closeAllDialogs","popupWidget","popWidget","pushWidget","executeAction","disposeWidget","appendWidgetTo","NotificationDispatcher","dispatch","notification","type","refreshQueryFormShortCut","template","workarea","getWorkareaController","menu","getMenuController","resize","currentWidget","currentWidgetParams","getMenu","assert","isEmpty","renderWorkarea","action","actions","BIZAGI_WORKPORTAL_ACTION_ROUTING","start","then","getAction","execute","BIZAGI_WORKPORTAL_ACTION_SEARCH","workareaContainer","cleanWidgets","empty","loadWidgetFromFacade","getWidget","widgetController","renderedContent","dialog","resizeContainer","height","container","containerHeight","adjustableChildren","children","adjustableContainersHeight","fixedContentHeight","element","hasClass","overflowY","addClass","marginTop","Number","replace","finalHeight","overflow-y","find","closest","show","customPreferencesObj","services","preferences","customFormats","customPreferencesValues","getPreferences","windowMaintenance","datepicker","setDefaults","currencyInfo","decimalSymbol","decimalSeparator","symbol","digitGroupSymbol","thousandSeparator","groupSeparator","setResource","BIZAGI_DEFAULT_CURRENCY_INFO","decimalDigits","uploadMaxFileSize","BIZAGI_SETTINGS","UploadMaxFileSize","changeData","overrideUserPreferences","command","enableFeatureDisplayOptions","DisplayOptions","base64image","themeLogo","photo","userPicture","hasPicture","initials","userFullName","getInitials","showQrMobileMenu","overrideLocalization","changeWidget","adjustMenuWP","buttonMenuContainer","toleranceFor","Jelement","changeWidth","sign","end","searchInputWidth","outerWidth","widthComponentsWithoutResponsive","limitWidth","width","selectorMenuButtons","indexButtonToHide","indexLastButton","thereIsAButtonOverlaped","position","top","eq","hide","clean","webpart","hideCasesColumn","columnName","columns","visible","old","imageColumn","newData","transformed","column","displayName","cases","columnTitle","oldColumn","fieldName","dataType","parseBoolean","isOrdered","orderBy","orderType","rows","oldRow","newRow","id","j","fields","totalPages","page","pages","number","active","filters","getCaseId","row","getEntityId","splitHeaderName","finalDispName","dispNameParts","split","getWorkItems","workitemsData","workitems","wi","wiInfo","idWorkItem","idTask","imageLabelColumn","getImage","files","getFileImage","getEmptyFile","getFile","removeClass","templateDestination","resolvedRemplate","errorTemplateName","errorMessage","message","remoteSeverURL","sharepointProxyPrefix","indexOf","substr","eTemplate","address","helpAddress","msg","alert","deferRet","console","log","webpartName","postMessageSocket","canvas","whenInitialized","webPartToDraw","iframeidentifier","send","mask","createElement","className","style","popUpParams","preClosePopUp","ev","eventPhase","closePopUp","addEventListener","attachEvent","closeCanvas","appendChild","webpartCanvasDiv","pathiFrame","location","href","substring","queryStringParams","toString","idCase","idWorkitem","idWfClass","iframe","postmessageSocket","postmessage","remoteServer","destination","origin","receive","parentNode","src","removeChild","iframeclosemsg","resizeInPopUp","heightActivitiFormContainer","body","webpartObject","canHide","showCasesMSG","readQueryString","destroy","webpartParams","adjustButtonsToContent","startWaiting","executeWebpart","result","onclick","dialogParams","showCloseButton","a","webparts","addConfigurationMessage","messageResourceName","doc","ownerDocument","errorTemplate","whenCreated","fullname","whenExecuted","helper","project","isVisible","isWebpartInIFrame","BIZAGI_IFRAME_IDENTIFIER","shortName","webPartDestine","startReceiving","sendDimensionsiFrame","mandatorysend","canvasobject","onresize","sendDimensionsiFramePostMessage","addResizeListener","iframeDimentions","iframeName","iframeHeight","iframeWidth","notFireToIframe","refresh","prepareForRefresh","newContent","contains","replaceSelector","creating","createWebpart","manageError","canvasError","errorMsg","responseText","getFailServerErrorDeferred","endWaiting","append","iframeCommunicator","trigger","onWaiting","getElementById","hideParent","routing","getRoute","route","deferredDialogOpened","isOfflineForm","moduleParams","formsRenderVersion","guid","BIZAGI_WORKPORTAL_WIDGET_RENDER","BIZAGI_WORKPORTAL_WIDGET_OLDRENDERINTEGRATION","BIZAGI_WORKPORTAL_WIDGET_ASYNC","BIZAGI_WORKPORTAL_WIDGET_PROJECT_DASHBOARD","enableWorkPortalMenu","_executeWidgetProjectDashboard","BIZAGI_WORKPORTAL_WIDGET_START_FORM","parameters","onClose","dialogOpened","closeVisible","dialogClass","response","widgetReference","BIZAGI_WORKPORTAL_WIDGET_ROUTING","isThereAsync","asyncWidget","validateGoToLastSection","getPreference","hasWorkItems","goToInbox","routeModuleParams","getWidgetByCookie","notifier","injector","get","messageWhenGoToInbox","messageForm","showSucessMessage","goToInboxPreference","widgetReferrer","workItems","index","isAsynch","RETURN_TO","INBOX","INBOX_GRID","HOME_PORTAL","LAST_INBOX","QUERIES","BAM","NONE","LAUNCH_NOTIFICATION","_calcResult","_calcOnFinishWhere2Go","_returnTo","goBack","where","_changeWidgetTo","executeChangeWidget","_showToastMessage","_clearLaunchNotification","_to","_referrer","tryCatch","_isQueriesReferrer","_preferGo2Inbox","_go2LastSection","_execute","res","_where","_moduleParams","clone","_goBack","_return","navigator","goToBack","radNumber","trim","idWorkflow","taskState","onlyFavorites","order","orderFieldName","group","bizagiConfig","groupByCaseNumber","getCustomizedColumnsData","lstIdCases","key2","value2","isArray","TaskName","State","IsFavorite","IsOpen","BIZAGI_WORKPORTAL_WIDGET_SEARCH","showNoResults","showSearch","requestGlobalForm","referrerBackButton","context","isTabletDevice","originarlColor","detectDevice","noresults","redirectToProcess","onlyUserWorkItems","formatRequest","formatCategories","isDate","state","slash","getYear","BIZAGI_WORKPORTAL_WIDGET_INTEGRATION","BIZAGI_WORKPORTAL_WIDGET_WEBPART","BIZAGI_WORKPORTAL_WIDGET_ADVANCE_SEARCH","BIZAGI_WORKPORTAL_WIDGET_HOMEPORTAL","BIZAGI_WORKPORTAL_WIDGET_ACTIVITY","BIZAGI_WORKPORTAL_WIDGET_RENDERFORM","BIZAGI_WORKPORTAL_WIDGET_NEWCASE","BIZAGI_WORKPORTAL_WIDGET_QUERIES","BIZAGI_WORKPORTAL_WIDGET_QUERIES_DEFINITION","BIZAGI_WORKPORTAL_WIDGET_QUERIES_SHORTCUT","BIZAGI_WORKPORTAL_WIDGET_QUERYFORM","BIZAGI_WORKPORTAL_WIDGET_LISTCASES","BIZAGI_WORKPORTAL_WIDGET_GENERICIFRAME","BIZAGI_WORKPORTAL_WIDGET_SUBMENU","BIZAGI_WORKPORTAL_WIDGET_FONTSIZE","BIZAGI_WORKPORTAL_WIDGET_PAGE","BIZAGI_WORKPORTAL_WIDGET_ENTITIES","BIZAGI_WORKPORTAL_WIDGET_REPORTS","BIZAGI_WORKPORTAL_WIDGET_REPORTS_MENU","BIZAGI_WORKPORTAL_WIDGET_REPORTS_CHART","BIZAGI_WORKPORTAL_WIDGET_SMARTFOLDERS","BIZAGI_WORKPORTAL_WIDGET_ADMIN_CASES","BIZAGI_WORKPORTAL_WIDGET_REASSIGN_CASE","BIZAGI_WORKPORTAL_WIDGET_ASYNCECM_UPLOAD","BIZAGI_WORKPORTAL_WIDGET_PROCESS_TREE","BIZAGI_WORKPORTAL_WIDGET_ENTITIES_TREE","BIZAGI_WORKPORTAL_WIDGET_USERS_TABLE","BIZAGI_WORKPORTAL_WIDGET_ACTIVITY_LOG","BIZAGI_WORKPORTAL_WIDGET_AUTHENTICATION_LOG","BIZAGI_WORKPORTAL_WIDGET_ADMIN_ENTITIES","BIZAGI_WORKPORTAL_WIDGET_ADMIN_ENCRYPT_PASSWORDS","BIZAGI_WORKPORTAL_WIDGET_ADMIN_USERS_REQUESTS","BIZAGI_WORKPORTAL_WIDGET_ADMIN_CASE_SEARCH","BIZAGI_WORKPORTAL_WIDGET_ADMIN_ASYNC_ACTIVITIES","BIZAGI_WORKPORTAL_WIDGET_ADMIN_DEFAULTS_ASSIGNATION_USER","BIZAGI_WORKPORTAL_WIDGET_ADMIN_TRANSFER_CASE_SECURITY_PERMISSIONS","BIZAGI_WORKPORTAL_WIDGET_ADMIN_USER_PROFILES","BIZAGI_WORKPORTAL_WIDGET_ADMIN_ALARMS","BIZAGI_WORKPORTAL_WIDGET_ADMIN_USER_LICENSES","BIZAGI_WORKPORTAL_WIDGET_ADMIN_DIMENSIONS","BIZAGI_WORKPORTAL_WIDGET_ADMIN_DOCUMENT_TEMPLATES","BIZAGI_WORKPORTAL_WIDGET_ADMIN_PROCESSES","BIZAGI_WORKPORTAL_WIDGET_START_PROCESS","BIZAGI_WORKPORTAL_WIDGET_ADMIN_BUSINESS_POLICIES","BIZAGI_WORKPORTAL_WIDGET_ADMIN_LANGUAGE","BIZAGI_WORKPORTAL_WIDGET_ADMIN_BUSINESS_POLICIES_DECISION_TABLE","BIZAGI_WORKPORTAL_WIDGET_ADMIN_BUSINESS_POLICIES_POLITICS","BIZAGI_WORKPORTAL_WIDGET_ADMIN_BUSINESS_POLICIES_RULES","BIZAGI_WORKPORTAL_WIDGET_ADMIN_BUSINESS_POLICIES_TABS","BIZAGI_WORKPORTAL_WIDGET_ADMIN_BUSINESS_POLICIES_VOCABULARIES","BIZAGI_WORKPORTAL_WIDGET_ADMIN_PREFERENCES","BIZAGI_WORKPORTAL_WIDGET_ADMIN_DISPLAY_OPTIONS","BIZAGI_WORKPORTAL_WIDGET_TREE","BIZAGI_WORKPORTAL_WIDGET_GRAPHIC_QUERY","BIZAGI_WORKPORTAL_WIDGET_PROCESS_MODELER_VIEW","BIZAGI_WORKPORTAL_WIDGET_ADMIN_USERS_ADMINISTRATION","BIZAGI_WORKPORTAL_WIDGET_ADMIN_USERS_DELEGATION","BIZAGI_WORKPORTAL_WIDGET_ADMIN_USERS_DELEGATION_SEARCH_USER","BIZAGI_WORKPORTAL_WIDGET_ADMIN_STAKEHOLDERS","BIZAGI_WORKPORTAL_WIDGET_BIZAGI_EVENTS","BIZAGI_WORKPORTAL_WIDGET_BIZAGI_RELEASE","BIZAGI_WORKPORTAL_WIDGET_PROJECT_PROCESS_DIAGRAM_HELPER","BIZAGI_WORKPORTAL_WIDGET_PROJECT_ACTIVITY_MAP_TOOLTIP","BIZAGI_WORKPORTAL_WIDGET_PROJECT_USERSUMMARY","BIZAGI_WORKPORTAL_WIDGET_MYSEARCHLIST","BIZAGI_WORKPORTAL_WIDGET_LOADFORM","BIZAGI_WORKPORTAL_WIDGET_TEMPLATE_ENGINE","BIZAGI_WORKPORTAL_WIDGET_DIALOGNAV","BIZAGI_WORKPORTAL_WIDGET_ADMIN_HOLIDAYS","BIZAGI_WORKPORTAL_WIDGET_ADMIN_PROJECTNAME","BIZAGI_WORKPORTAL_WIDGET_ADMIN_OAUTH2APPLICATIONS","BIZAGI_WORKPORTAL_WIDGET_ADMIN_ADHOC_PROCESSES","BIZAGI_WORKPORTAL_WIDGET_TIMELINE","BIZAGI_WORKPORTAL_WIDGET_ADHOC_PROCESS_MODELER","BIZAGI_WORKPORTAL_WIDGET_ADMIN_ADHOC_ENTITIES","BIZAGI_WORKPORTAL_WIDGET_ADMIN_ADHOC_USER_GROUPS","BIZAGI_WORKPORTAL_WIDGET_ADMIN_ADHOC_CREATE_PROCESS","BIZAGI_WORKPORTAL_WIDGET_ADMIN_ADHOC_BOOLEAN_EXP","BIZAGI_WORKPORTAL_WIDGET_ADHOC_CREATE_PROCESS","BIZAGI_WORKPORTAL_WIDGET_PROFLY","BIZAGI_WORKPORTAL_WIDGET_SESSION_TIMEOUT","BIZAGI_WORKPORTAL_WIDGET_SESSION_TIMEOUT_EXPIRED","BIZAGI_WORKPORTAL_WIDGET_USER_PRIVACY","BIZAGI_WORKPORTAL_WIDGET_ACCESS_DENIED","BIZAGI_WORKPORTAL_WIDGET_ADMIN_BUSINESS_POLICES","BIZAGI_WORKPORTAL_WIDGET_USERS_MODAL","BIZAGI_WORKPORTAL_WIDGET_QUERIES_MANAGEMENT","BIZAGI_WORKPORTAL_WIDGET_ADMIN_USER_PERMISSION_REPORT","BIZAGI_WORKPORTAL_WIDGET_ACTIVITY_DESCRIPTION_CONTENT","BIZAGI_WORKPORTAL_WIDGET_QUICKACTIONS_EXECUTE","BIZAGI_WORKPORTAL_WIDGET_ADMIN_ERROR_LOGS","BIZAGI_WORKPORTAL_WIDGET_SMARTINBOX","BIZAGI_WORKPORTAL_WIDGET_ADMIN_SMARTINBOX","BIZAGI_WORKPORTAL_WIDGET_CANCEL_CASE","observableElement","widgetReadyDeferred","isBlocked","getWidgetName","widgetParams","actionName","actionParams","showGraphicQuery","isAdhoc","maximizeOnly","desktop","dialogStack","pop","isProcessOnTheFlyCase","showTimeLine","startAndThen","showSelectUser","maximize","userLinkLabel","parentDef","showBackButton","userId","userName","val","eventAsTasks","fullName","off","arguments","on","pubDef","pub","queueDef","Array","events","_data","unsub","format","timeZone","date","moment","tz","checkProcess","checkWorkItems","getCaseSubprocesses","process","subProcessPersonalized","forEach","workitem","formatDate","formatDateFromInvariantStringDate","estimatedSolutionDate","hash","search","queryString","getQueryString","isConfiguredFromHash","hashParams","getHashParams","details","summaryDeferred","currentInboxView","summaryCaseDetails","caseNumber","releaseCurrentActivity","grep","currentState","activity","allowReleaseActivity","renderSummary","parents","renderForm","withOutGlobalForm","cache","htmlContent","showComments","PrintableVersion","StateLog","GraphicQuery","printableVersion","stateLog","graphicQuery","summary","caseSummaryTemplate","formatInvariantDate","delegate","routingExecute","tabs","create","activate","commentsFocus","newPanel","prop","comments","readOnly","tab","renderComments","summarySubProcess","subprocess","subProcesses","custData","caseSummaryTemplateSubprocess","summaryAssigness","assignees","eventsUniqueList","el","inArray","join","activitiesUniqueList","activities","caseSummaryTemplateAssigness","summaryCaseEvents","caseSummaryTemplateEvents","summaryActivities","fullFormat","caseSummaryTemplateActivities","resultRender","renderContainer","getMessageFromNetworkState","online","proxyPrefix","serviceLocator","database","rendering","facade","triggerparams","fromTask","fromWorkItemId","oldrenderevent","eventMethod","eventer","stopPropagation","renderingFacade","idProcess","startForm","concat","idOrganization","form","IsDisposed","searchCriteriasApplied","preProcessValue","control","processForm","containerParams","getRenderById","setValue","queryFormParams","h_action","h_contexttype","h_idForm","guidForm","getQueryForm","processedForm","match","g1","offset","string","toLowerCase","JSON","parse","isSearchesQueryForm","contextType","renderingParams","setTableHeadFixed","TableElement","floatThead","floatOptions","_startQuickActions","_QActionsStared","quickActionsInstance","_params","getContainerSelector","getQuickActionContainerSelector","checkAllSelector","getQuickActionCheckAllContainerSelector","refreshShowedResults","updateResults","quickActions","changeProcessOptions","changeProcess","_QuickActionsRenderIn","parentTemplate","workItemsInfo","_QActionsContainer","setDataToExecute","renderIn","renderCheckboxGroup","_getWorkItemsInfo","headers","_finalWorkItems","indexWorkItems","_getIndexFromTableColumn","indexCaseNumber","_rowInfo","_rowWorkItems","k","_workItem","findIndex","toUpperCase","showCase","caseSummaryContainer","adhocProcessId","isAdhocProcess","idAdhocProcess","hasComments","enableFeatureShowTimelineButton","enableTimelineByProcessType","isAvailableTimelineByProcessType","processPath","renderedTemplate","callTaskDescription","caseSummaryDialog","isPropagationStopped","getWorkitems","url","getUrl","iframeOldRender","getCaseFormsRenderVersion","formsVersion","renderSummaryForm","preview","button","_getIdCase","modal","draggable","resizable","workItemId","_parent","taskDescriptionParams","classNeedsModal","task","description","renderManyTasksDescription","summaryForm","isEnableFeature","listCases","renderStaticForm","BIZAGI_WORKPORTAL_WIDGET_RENDER_FORM","idForm","idEntity","surrogateKey","genericiframe","widgetURL","fontsize","sizeSelected","fontsizeTemplate","fontButton","textSize","main","showOldWindow","sessionTimeOut","session-timeout","session-timeout-expired","getIEVersion","renderIENotCompatibleTemplate","BIZAGI_PATH_TO_BASE","renderWidget","closeQuirksModePopup","iDialog","iTotalDialog","closeContentDialog","dialogContent","popup","options","closed","extendQueryString","showQuirksModePopup","windowParameters","instance","dontClose","innerDialog","queries","shortcut","renderStoredQueries","actualWidget","storeWidget","inbox","grid","homeportal","isFunction","cookie","resetNavigatorInfo","searchContent","iconsTemplate","menuContent","sec","reportsSecurity","AnalysisReports","getWidgetByDataUser","siblings","LogOut","preventDefault","Search","setActiveSection","Inbox","showWidgetsPopup","showNewCasePopup","enableMySearch","showMySearchPopup","home","showQueriesPopup","renderAdminMenu","renderQuickProcessMenu","validateUrlInQuickProcess","renderReportsMenu","endPoint","showUserProfileMenu","showQRCodePopup","inputSearchField","renderFontMenu","CURRENT_THEME_REMOVE_IT","logout","showAboutPopup","keyCode","searchValue","emptyNavigatorInfo","$userProfile","target","is","ajax","success","popupContent","allowmaximize","maximized","showMenuPopup","sourceElement","buttonSelector","my","at","currentPopup","closePopupInstance","showUserPopup","max-height","activeScroll","disableFrankensteinQueryForms","argsTemplate","currentYear","currentYearVersion","hostName","checkRootCategory","getsRootCategory","getSubMenuData","category","v","categoryKey","categoryName","categoryUrl","menuData","BIZAGI_WORKPORTAL_WIDGET_ADMIN_SMARTFOLDERS","menuValidator","AdhocProcessAdmin","AdhocUserGroupAdmin","applicationUrl","error","alertMessage","isIE8","renderSubMenu","menuButton","submenu","categoryClassName","customClickHandler","showEntitiesPopup","arrowPosition","insertAfter","scrollElement","closeDeferred","after","showPopup","popupWidth","popupHeight","display","float","left","z-index","of","collision","printversion","p_all_rows","formatTabs","formatGroups","appendCaseDetails","formatECM","formatButton","formatGrid","formatRenderContainer","tabElement","ind","ul","labels","formatContent","$caseDetails","setProcess","createdBy","Name","creationDate","idPlan","getPlan","responsePlan","prepend","containerText","cont","image","file","parentContainer","tableControl","pageContent","closeButton","register","registerCallback","contexts","HOME","dashboard","layout","stuff","plans","sidebar","usersummary","myshortcuts","rightSidebar","empty1","empty2","nav","level","belongs","toLeftSidebarCD","toRightSidebarCD","toTaskSidebarCD","TEMPLATEENGINE-VIEW","paginator","sortbar","mysearchfilter","ENTITY-ENGINE-VIEW","SEARCH-ENGINE-VIEW","mysearchcriteria","CASES-TEMPLATE-VIEW","proccesseslist","filtercases","PLANS-VIEW","topmenu","manager","ACTIVITY","leftSidebar","contentDashboard","caseState","activityState","activityDescription","processState","users","subprocesses","relatedPlan","OVERVIEW","overview","refreshLastItemBreadcrumb","COMMENTS","discussions","discussionSidebar","FILES","filesPreview","TIMELINE","timeline","timelineSidebar","PLANCREATE","plan","PLANOVERVIEW","planActivities","planSidebar","planAction","planState","planProgress","planTime","planParent","planUsers","PLANACTIVITIES","PLANFILES","empty3","empty4","empty5","empty6","empty7","PLANCOMMENTS","PLANTIMELINE","PLANSIDEBAR","EDITACTIVITY","activitiesForm","ACTIVITYPLAN","activitySidebar","activityAction","activityTime","activityProgress","activityParent","activityUsers","ACTIVITYPLANCREATE","ACTIVITYPLANOVERVIEW","ACTIVITYPLANCOMMENTS","ACTIVITYPLANFILES","ACTIVITYPLANTIMELINE","REFRESHALL","CONTEXT_HOME","supportNav","setContextsByNotifyEvents","sub","proxy","onNotifyChange","registerInstance","selectedInboxData","smartInboxId","owner","contextsSidebarActivity","contextsWithoutLeftSidebarCaseDashboard","contextsLeftSidebarCaseDashboard","contextsWithoutRightSidebarCaseDashboard","contextsRightSidebarCaseDashboard","d","necesaryClean","setLayout","servicesPD","behaviors","projectDashboard","getContextToShow","dataPD","responseGetCaseSummaryDetails","hasAccessToCase","currentContext","contextToShow","themesEnabled","getCurrentTheme","theme","loadContext","setCurrentTheme","setWidgetReady","histName","hasGlobalForm","updateView","args","showContextByMenuDashboard","isValidContext","removeCurrentTheme","emit","newInstance","dialognavdata","BIZAGI_WORKPORTAL_DIALOGNAV","paramsData","eventType","fromActionLauncher","guidEntityCurrent","reference","referenceType","showDateNavigator","xpath","skipRefresh","classContext","unsubscribeEvents","workOnITActivitySelector","workOnITProcessSelector","fromSearchWidget","showWorkitem","showAsyncWidget","inbox-common-case-summary-subprocess","inbox-common-case-summary-assignees","inbox-common-case-summary-events","inbox-common-case-summary-activities","render-case-summary","paginationTemplate","summaryDisplayed","bizagiScrollbar","autohide","configureSlider","configureHeader","identicalObjects","scrollabletab","tooltipNext","tooltipPrevious","getBackCase","getNextCase","restoreStatus","queryFormAction","urlParameters","getCasesByFolder","customized","casesGroupedByFolder","idFolder","hover","lastQueryFullKey","idtask","printFormCommand","printform","summaryContainer","hideSummary","showSummary","animate","renderPanel","sliderPanel","panelArrow","forceResize","windowWidth","openOldWorkportalForm","getListKey","renderform","afterLoad","backURL","smartInboxModel","_smartInboxModel","Math","ownerType","resultsPerPage","pinned","processes","filter","sort","access","getModel","setModel","model","property","set","addColumn","from","removeColumn","splice","updateColumn","moveColumn","fromIndex","toIndex","getColumns","addAccess","removeAccess","updateAccess","getAccess","resetAccess","dataModel","processesAvailable","currentStep","numberOfSteps","customizedColumnsAvailable","loadDataDef","sortOptions","pageSizeOptions","maxColumns","editing","cloning","filterWidget","smartinbox","smartinbox-main","smartinbox-columns","smartinbox-share","smartinbox-shared-inbox-not-found","getSpecificSmartInbox","settingName","err","status","sharedInboxNotFound","postRenderDef","closeWizard","shareMode","renderShareMode","renderWizardMode","onResize","adjustStep2Height","adjustStep3Height","mainTemplate","columnsTemplate","adminMode","isRTL","getAllProcessesSmartInbox","loadProcesses","checkCurrentStep","validateMode","filterContent","movePrevious","moveNext","saveSmartInbox","$form","createColumn","showErrorMessage","configureHandlers","validateWizardAction","moveStepWizard","dialogBox","getPersistenceModel","updateSmartInbox","createSmartInbox","createAdminSmartInbox","errorCode","inboxWidget","selectedSmartInboxId","stepNumber","checkStepOne","checkStepTwo","checkStepThree","updateFilterModel","loadCustomizedColumns","getAllCustomizedColumnsSmartInbox","filterModel","setWFClassList","setCustomizedColumns","buildColumnsForFilterModel","loadSortingOptions","masterEditor","warningOrder","outerHeight","changeStepWizard","newStep","$search","bizagi_multiSelect","list","itemValue","itemText","onChange","defaultColumns","isDefault","label","iconClass","parentPositionElement","parentElementToFitWidth","parentElementToBorder","classOpenedList","classOpenedParent","classItem","SEARCH_MIN_LENGTH","openOnFocus","classMenuList","customRenderItem","application","convertProcessesFromModelToMultiSelect","allProcess","selectedProcess","l","getSelectedProcessesId","processesId","_","sortable","items","handle","update","updatedColumns","any","alwaysVisible","isOptional","isColumnValid","scroll","customizedColumn","$content","values","combo","initValue","first","srcElement","scrollIntoView","selectedValue","createComboSortCustomizedColumns","isSortColumnValid","createComboSortOptions","createComboEmptySortOptions","customizedColumnItem","unshift","initialValue","priority","object","nextStep","duplicatedColumns","arrayMessagesErrors","x","hasDuplicatedColumns","validateFilterForSave","elem","validateEmail","email","test","objectValues","groupBy","tagInputEmails","tagsinput","allowDuplicates","trimValue","confirmKeys","delimiter","validateEmailAddress","shareSmartInbox","_this","cancel","usersNotFound","showWarningMessage","disabledUsers","smartInboxFilterModel","_filters","getInternalModel","now","addRow","operator","getRow","removeRow","setRowProperty","deleteRowProperty","MAX_DECIMALS","maxFilters","maxInValues","entityValuesCache","smartinbox-filter-main","smartinbox-filter-field-boolean","smartinbox-filter-field-text","smartinbox-filter-field-number","smartinbox-filter-field-datetime","smartinbox-filter-field-on-operator","smartinbox-filter-field-in-operator-combo","smartinbox-filter-field-in-operator-text","wfClassList","userTasksCache","booleanFieldTemplate","textFieldTemplate","numberFieldTemplate","dateTimeFieldTemplate","onOperatorTemplate","inOperatorComboTemplate","inOperatorTextTemplate","renderFilters","createFilterRow","internalModel","keys","c","messages","rowsRender","to","$newRow","createComboCustomizedColumns","createComboOperatorFilters","removeFilterRow","scrollTop","$row","removeValidationValue","columnItem","b","elements","entity","isEditable","$column","cleanOperator","cleanValueField","valueField","operatorItem","operators","buildOperatorValues","isValid","$operator","createValueField","isDateTimeDataType","buildDateTimeBetweenField","isNumberDataType","buildNumberBetweenField","buildInOperatorComboValueField","buildInOperatorComboForActivityField","buildInOperatorNotEntityValueField","isNumber","buildOnOperatorValueField","isTextDataType","buildTextValueField","buildNumberValueField","isBooleanDataType","buildBooleanValueField","buildDateTimeValueField","setValueField","booleanComboValues","validate","change","propertyToUpdate","placeholder","numeric","isInvalidNumber","originalValue","replaceAll","focusout","formatCurrency","getValue","removeMoneyExtraDecimals","numberFrom","valueTo","numberTo","wrapInner","datetime","firstDay","dateFormat","getDateFormat","BIZAGI_DEFAULT_DATETIME_INFO","shortDateFormat","changeYear","changeMonth","shortYearCutoff","twoDigitYearMaxDelta","yearRange","sValue","dateFormatter","getDateFromFormat","defaultDatetimeInfo","formatInvariant","getDate","parseDate","dateFrom","fromValue","dateTo","toValue","onOperatorValues","guidElement","multiselectCombo","bizagi_searchMultiSelect","scope","entityGuid","asyncList","getEntityValues","loadUserTasks","internalId","processName","request","term","entityValues","getEntityValuesForInboxFilter","wildcard","getUserTasksByWFClass","workflowId","isSmartInbox","getUserTasksForInboxFilter","multiselectText","map","possibleOperators","appliesTo","operatorsToAdd","datePickerFormat","calculateMaxValue","calculateMinValue","RegExp","dotIndex","groupSymbol","$test","groupDigits","roundToDecimalPlace","mySearchList","mySearchListWrapper","loadtemplates","renderSearchLists","mySearchListTmpl","getSearchLists","searchLists","$searchLists","closeModal","onListItemClick","keypress","$target","currentTarget","guidform","displayname","guidEntity","publishParams","summaryDecorator","validateForm","renderValues","forceCollectData","collectRenderValuesQueryForm","filterObject","metadataFilters","getRenders","getFilterControl","newValue","searchType","rangeQuery","advancedQuery","defineFilterObject","displayValue","getDisplayValue","editable","performQuery","guidSearch","pageSize","calculateFilters","onlyLocalResults","cleanContext","dataParams","homeportalInstance","_context","isReady","itemFilter","searchTypeFilter","typeSearch","loadForm","subMenu","renderSubMenuContent","scrollVertical","listTemplate","isAdminMenu","listContainer","callBack","ThemeBuilder","windowOpenBlank","asyncECMUpload","showWidgetPopup","AdminSmartInbox","enableMultipleCasesReassigment","CaseAdmin","enableAsyncECMUploadJobs","authorized","getSubItemsAuthorized","deleteMenuOption","features","enableOldBusinessPoliciesAdministration","enableNewBusinessPoliciesAdministration","typeIcon","BIZAGI_WORKPORTAL_WIDGET_ADMIN_UNLOCK_FORMS","UserAdmin","StakeholderAdmin","AuthenticationLogQuery","EncryptionAdmin","UserPendingRequests","UnlockFormsAdmin","AsynchronousWorkitemRetries","UserDefaultAssignation","Profiles","AlarmAdmin","Licenses","GRDimensionAdmin","DocumentTemplates","ProcessAdmin","LanguageAdmin","EntityAdmin","AdhocEntityAdmin","AdhocCreateProcess","showCustomWidgetPopup","_$$extend","UserPermissionReport","Holidays","_$$extend2","OAuthApplications","_$$extend3","ProjectName","_$$extend4","UsersDelegation","_$$extend5","ErrorLogs","innerWidth","BusinessPolicies","showContentPopup","Vocabularies","loadBusinessPolicesWidget","getCathegoriesMenuList","showBreadCrumb","eventHandlerGoBackBreadCrumb","checkIsAlive","eventHandlerCategoryGroupsParent","eventHandlerCategoryGroupsChildrenWithoutCustomClick","Jparent","categoryDisplayName","menuList","categoriesGroupsChildrenList","getCategoriesGroupsChildren","getMenuList","isIE11","isEdge","localStorage","setItem","sessionStorage","bizagiAuthentication","startLoading","loadDashboardQuickProcess","childrenList","groupCategoryChildren1","groupCategoryChildren2","groupCategoryChildren3","groupCategoryChildren4","groupCategoryChildren5","sortChildList","sortParentList","menulist","groupCategory1","getItemMenuList","groupCategory2","groupCategory3","groupCategory4","groupCategory5","listmenu_children","groupCategory","routeEvents","dispatchEvent","newLiveProcess","widgetParameters","needsQuicksMode","getPageHacks","hackParams","openBACase","sHref","routingAction","changeToWidget","stopLoading","hack","getInternetExplorerVersion","injectCss","afterLoadParams","settings","defaultWidth","idUser","fromDate","toDate","ping","load","fadeIn","callInside","cssList","getStyle","iframeContent","contents","$self","inputClasses","adhocIds","inbox-grid-cases","inbox-common-case-summary","inbox-common-case-summary-oldrender","search-details","searchTemplate","searchDetailsTemplate","searchPagination","renderSearch","contentDetails","pdata","pageSelector","actualPage","caseId","processId","timeLine","TimeLine","haveQuickActions","setFormat","formatValue","getRadNumberColumnIndex","showColumn","columnIndex","createGroupedHeader","rowIndex","getRadNumber","_dataCases","parseInt","isComplex","tooltip","elmnt","idObject","favoriteType","addFavorite","delFavorite","itemSelector","confirmationMsg","showConfirmationBox","dissasociateCaseFromFolder","pagination","pageToshow","pageNumber","previousPage","nextPage","paginationHtml","bizagiPagination","maxElemShow","listElement","clickCallBack","smartfoldersParameters","currentWorkitemId","workitemCaseId","cssLocation","browser","mozilla","webkit","oldrenderintegration","icoTaskState","integration-old-render","insertIframeOldRender","getInjectJavaScript","getInjectJS","_processId","_mapping","mapping","_idParentCase","idParentCase","_mappingstakeholders","mappingstakeholders","_guidprocess","guidprocess","createcase","getStartForm","_getServiceParams","_getRenderingFacade","_getCanvasForm","_rendering","RPproxyPrefix","getMapping","stringify","$canvas","onCaseCreated","_guidForm","_entityGuid","_surrogateKey","_readonlyform","readonlyform","updateform","getEntityForm","_overrideHandlers","idPageCache","originalProcessButton","processButton","buttonProperties","endLoading","actionService","casetoolbar","usersCasesService","actionsEventsService","accumulatedcontext","processActionService","templateEngine","templateEngineElement","templateEngineTooltip","templateEmptyData","selectorCheckboxItems","_currentPage","entitiesSelected","onEntityChecked","getCommonActions","updateData","setValues","onFormActionExecuted","onFormRuleExecuted","onFormExecuted","_page","_totalRecords","totalRecords","_defaultFilterApplied","defaultFilterApplied","_guidSearch","_fromActionLauncher","_reference","_referenceType","_xpath","_guidEntityCurrent","_pageSize","_onlyLocalResults","entityDataParams","filtersAppliedCounter","getEntityData","deferProcessEntities","processEntities","entitiesData","checkAll","renderEntities","commonActions","getTemplateEngine","renderDataService","service","factory","initAsyncStuff","router","addContext","getLevelNavigator","currentLevelNavigator","contextEvent","_matchHeaderWithColumns","ERROR_STR","onError","str","validArray","cells","headerMapper","reduce","xPaths","col","_exists","appliedFilters","_matchDataHeaders","extra","columnsXPaths","getSearchData","setFiltersData","getCollectionEntityData","getFiltersEntityData","filtersData","processFiltersData","updateCounterFiltersApplied","hideSortBar","appliedFilter","count","defaultValues","applied","attribute","filtersApplied","templateType","engine","entities","entityId","entityData","isDefaultTemplate","guidTemplate","entityDataForRender","paramsRender","makeArray","requestRepeat","idCasesOfProcessEntitiesPromise","lastParamsSendit","getIdCasesOfProcessEntities","generalDefer","collectionDeferreds","$dataViewList","entitiesLength","$elementsTmpl","$template","renderTemplate","getEmptyDataMessage","isRefresh","$templateData","isChecked","collectionGetActionsDeferred","idCases","$cardWrapper","$casetoolbar","getCaseToolbar","casetoolbarData","idcase","always","getEntityActionsAndEvents","$footer","actionData","loadEvents","delay","overlay","getActionsView","responseActions","$actionsView","actionsView","actionsData","$item","getCheckBox","showCheckItem","removeCheckItem","surrogateKeys","itemsSelected","guidentity","$inputs","input","refreshRegister","idBox","$templateBox","replaceWith","outerHTML","counterFilterParams","customWorkportalHandlers","customizeWorkportalHandler","handler","newUrl","original","customizeWorkportalWidget","extensionMethod","widgetImplementation","getWidgetImplementation","eval","customButtons","addCustomMenuButton","customButtonTemplate","menuButtonContainer","isAvailable","customButton","addDataService","functionName","fn","extensionObject","tmpls","templatesMap","arrPromises","_create","clicked","curYPos","curXPos","cursor","$scrollable","pageY","pageX","scrollLeft","_move","y","moveX","moveY","Widget","call","jQuery","enableFolder","enableSmartFolders","enableListOfRecentProcesses","enableCustomizeReports","enablePrintFromEditForm","enableDebug","enableE2EInterface","disableOldInbox","enableBatchRequest","forceBatchRequest","showAssignees","enableSecurityCaseDashBoard","enableQueriesClassicMenu","disableAbortCases","enableAdhocProcess","enableCCBCCFeatureOnLiveProcesses","enableReviewModeFeatureOnLiveProcesses","enableFilterByProcessGroupOnLiveProcesses","enableLocalizationInModelerOnLiveProcesses","enablePredefinedPerformersOnLiveProcesses","enableMaximizeModalsOption","enableStartPageDisplayOption","enablePing","enableECMMetadataMultiaction","validateGridsOnButtonClick","enableCustomFormats","enableShareActivity","enableFormatMoneyColumnQueryResult","enableSymbolMoneyColumnQueryResult","enableGridRefreshAfterCellRefresh","enableExecuteRefreshAction","restoreAppearanceAfterRefresh","maxButtonForQuickActions","hideTimeWhenHourMinutesSecondsAreZero","enableActionIsChangedSupport","breakActionWithUnavailableRenders","hiddenControlsWithDataType","iconclass","icon","getData","slice","onShowCases","$route","$title","idworkflow","collections","onClickEntity","selectItem","getUserStuff","buildModel","lf","pubDeadLockDetection","differenceMillisecondsServer","uploadMaxFilesSize","supportFileExt","getDateServer","getDifferenceBetweenDates","mergePropertiesActivitiesWithWorkitems","workItemFilter","workItem","guidActivity","startDate","wiEntryDate","finishDate","wiSolutionDate","workItemState","estimatedFinishDate","wiEstimatedSolutionDate","base","decontextualized.plans","Plans","getServerDateDifference","resolveGetDateServer","onClickCard","flowContext","isOpen","decontextualized","CONTEXTS","EDIT_ACTIVITY","ACTIVITY_PLAN","TEMPLATE_ENGINE_VIEW","PLANS_VIEW","PLAN_ACTIVITIES","CASES_TEMPLATE_VIEW","CLASSES","GRID_CONTAINER","flagDisplayDate","fromClickBreadCrumb","showReleaseButton","caseLink","taskOptionsWidget","onRenderFinishParams","child","popup-release","releaseDialogBox","getDataObj","info","_level","printCase","actionButtonEvent","formContent","$container","onRenderFinish","updateLastCrumbParamsInfo","getLevel","goToPreviousCrumb","crumbEvent","plugins","popupRelease","buttonAccept","buttonCancel","onClickAcceptRelease","onClickCancelRelease","renderEnds","getBreadCrumbInfo","setBreadCrumbInfo","drawBreadCrumb","breadCrumbInfo","showSteps","crumbItem","crumbContent","drawCrumb","itemCrumb","isPrincipalHome","goToCrumb","crumb","contextActivity","getParentContext","cutContext","deleteRemainingCrumbs","pathSize","crumbBack","resetBreadCrumb","copyDataObjectWithoutReference","updateInfo","lastCrumb","secondLastCrumb","cleanBreadCumb","firstCrumb","factCrumbItem","hasGuidEntityInBreadCrumb","newFactCrumbItem","hasXpathInBreadCrumb","steps","drawDateNavigator","onDisplayDate","homeNavBarAdjust","setEnabledLeftSidebar","setEnabledRightSidebar","setEnabledBreadCrumb","setEnabledBackButton","_addGridContainerClass","toAdd","_$contentWrapper","setPropertiesForEngineTemplate","_CONTEXTS","_needsProjectGrid","getActivityName","setStateBarNavigator","backnavigator","GO_TO_BACK","activityName","taskOptions","getButtonForActivityAction","showButtonPrintForm","showUrlHelp","regional","currentDate","dayNames","getDay","monthNames","getMonth","getFullYear","$wrapperButtonPrint","$wrapperUrlHelp","helpUrl","validateUrlWellFormed","textForButton","buttonOption","buttonContainer","_taskOptionsRequest","showRelease","showTakeOwnership","_request","getTaskOptions","_waitShowCancelCase","showCancelCase","getShowCancelCase","destroyReleaseDialogBox","actionTakeOwnership","detach","launchReleaseActivity","multiactionService","disableRequests","validateIfRenderingIsCallingAEndpoint","releaseActivity","taskReleased","showMessageAndRefreshContext","waitForLoadCompletely","keyResourceDescriptionMessage","showMessageBox","refreshActivityContext","validateIfBatchIsExecuting","refreshAllWidgets","takeOwnershipActivity","_defaultMessage","_message","timeOut","ol","il","$date","navigatorInstance","queryForm","actionForm","notMigratedUrl","queryParams","pageToShow","recalculateQueryForm","reports","fromBackButton","modalWasOpened","sidebarData","isFromQueriesBackButton","sidebarhome","showStakeholders","$tooltip","getInfoToUser","getCurrentUser","stakeholders","totalStakeholders","stakeholdersToShow","stakeholdersHidden","showMore","user","orgArray","requestsInProgressProcessGuid","shortcuts","onClickShortcut","getMyShortcutsByCategory","actionsHasStartForm","hasStartForm","showConfirmation","executeProcessAction","actionCreateCase","launchActionsAfterCreateCase","includeRadicationPhase","printf","behaviorCollapsiblePanels","right-sidebar","enableOrDisableRightSidebar","eventsHandler","addBottomPadding","onCollapsePanel","addClassesCollapseSideBar","disableSidebar","enableSidebar","openRightSidebar","closeRightSidebar","collapseSideBar","setDisabledSidebar","right","left-sidebar","showTooltip","classArrow","textTooltip","tooltipClass","classSuffix","dummy","_defer","adhoc.create.process","addEventHandlers","isValidForm","next","nameValidation","onClickCancel","onSubmitFormCreateProcess","paramsNewProcess","showErrorAlertDialog","createNewAdhocProcess","isIE10OrLower","project-filespreview-wrapper","argumentsTemplate","paramsURL","encodeURI","generalTmpl","reload","currentFile","filesNumber","profly","sessionTimeoutService","_onClickMinValue","keepSessionOpen","removeXClose","sessionTimeout","redirectToLogoutPage","sessionTimeoutExpired","user-privacy","onDownloadReport","downloadReportUser","privacy","usuarios","showActivityInfo","isActivity","users-modal","clickArrow","contentItemSelected","access-denied","accessDenied","getOrApply","defaultController","loadData","noop","insertItem","updateItem","deleteItem","Grid","config","$element","_container","_editingRow","_sortField","_sortOrder","_firstDisplayingPage","_init","updateOnResize","rowClass","rowRenderer","rowClick","editItem","rowDoubleClick","noDataContent","noDataRowClass","heading","headerRowRenderer","headerRowClass","headerCellClass","filtering","filterRowRenderer","filterRowClass","inserting","insertRowRenderer","insertRowClass","editRowRenderer","editRowClass","confirmDeleting","deleteConfirm","selecting","selectedRowClass","oddRowClass","evenRowClass","cellClass","sorting","sortableClass","sortAscClass","sortDescClass","paging","pagerContainer","pageIndex","pageButtonCount","pagerFormat","pagePrevText","pageNextText","pageFirstText","pageLastText","pageNavigatorNextText","pageNavigatorPrevText","pagerContainerClass","pagerClass","pagerNavButtonClass","pagerNavButtonInactiveClass","pageClass","currentPageClass","customLoading","pageLoading","autoload","loadIndication","loadIndicationDelay","loadMessage","loadShading","invalidMessage","invalidNotify","errors","onInit","onRefreshing","onRefreshed","onPageChanged","onItemDeleting","onItemDeleted","onItemInserting","onItemInserted","onItemEditing","onItemUpdating","onItemUpdated","onItemInvalid","onDataLoading","onDataLoaded","onOptionChanging","onOptionChanged","invalidClass","containerClass","tableClass","gridHeaderClass","gridBodyClass","_initLoadStrategy","_initController","_initFields","_attachWindowLoadResize","_attachWindowResizeCallback","_callEventHandler","loadStrategy","jsGrid","loadStrategies","PageLoadingStrategy","DirectLoadingStrategy","_loadStrategy","_controller","source","loadIndicator","LoadIndicator","validation","Validation","field","isPlainObject","Field","_grid","_refreshSize","_detachWindowResizeCallback","option","optionChangingEventArgs","optionChangedEventArgs","oldValue","_handleOptionChange","fieldOption","_normalizeField","_renderGrid","_refreshContent","_refreshPager","openPage","cancelEdit","_clear","removeData","_createHeader","_createBody","_pagerContainer","_createPagerContainer","_loadIndicator","_createLoadIndicator","_validation","_createValidation","shading","_loadingTimer","$headerRow","_headerRow","_createHeaderRow","$filterRow","_filterRow","_createFilterRow","$insertRow","_insertRow","_createInsertRow","$headerGrid","_headerGrid","_header","_scrollBarWidth","_content","$bodyGrid","_bodyGrid","_body","_eachField","$result","$th","_prepareCell","cell","cssprop","align","filterTemplate","insertTemplate","eventParams","reset","_resetSorting","_resetPager","_setPage","_clearSortingCss","_refreshHeading","_refreshFiltering","_refreshInserting","toggle","_createNoDataRow","indexFrom","firstDisplayIndex","indexTo","lastDisplayIndex","itemIndex","_createRow","amountOfFields","_renderCells","_getRowClasses","_attachRowHover","classes","_createCell","fieldValue","_getItemFieldValue","cellRenderer","itemTemplate","props","shift","_setItemFieldValue","current","_setSortingParams","_setSortingCss","_reversedSortOrder","isNumeric","f","fieldIndex","_visibleFieldIndex","_sortData","sortFactor","_sortFactor","sortField","item1","item2","sortingFunc","_itemsCount","itemsCount","_pagesCount","floor","$pagerContainer","_createPager","showPager","pagerRenderer","pageCount","_createPagerByFormat","itemCount","pagerParts","pagerPart","_createPages","_createPagerNavButton","firstDisplayingPage","_createPagerPageNavButton","showPrevPages","_createPagerCurrentPage","_createPagerPage","showNextPages","isActive","_createPagerButton","$link","_refreshHeight","_refreshWidth","$ghostContainer","$ghostContent","widthExcludingScrollBar","nonBodyHeight","_controllerCall","method","param","isCanceled","doneCallback","_showLoading","Error","_errorHandler","_hideLoading","getFilter","loadParams","_sortingParams","loadedData","finishLoad","filterValue","sortOrder","getSorting","sortingParams","clearFilter","insertingItem","_getValidatedInsertItem","insertedItem","finishInsert","_getInsertItem","_validateItem","insertValue","validationErrors","_rowIndex","rules","_setCellValidity","invalidArgs","$cell","toggleClass","clearInsert","insertRow","rowByItem","_editRow","jquery","nodeType","_itemIndex","$editRow","_createEditRow","insertBefore","editTemplate","editedItem","_getValidatedEditedItem","_updateRow","_getEditedItem","_getEditRow","$updatingRow","updatingItem","updatingItemIndex","previousItem","updatedItem","$updatedRow","_finishUpdate","updatedItemIndex","editValue","confirm","_deleteRow","deletingItem","deletingItemIndex","finishDelete","methodArgs","methodResult","locales","setLocale","localeConfig","componentPrototype","locale","lang","version","zIndex","shaderClass","loadPanelClass","_initContainer","_initShader","_initLoadPanel","_shader","bottom","_loadPanel","$loadPanel","actualWidth","actualHeight","marginLeft","min","deletedItem","deletedItemIndex","isDefined","sortStrategies","str1","str2","localeCompare","n1","n2","dt1","dt2","numberAsString","parseFloat","_normalizeRules","rule","validator","_normalizeRule","_applyNamedValidator","validatorName","validators","required","rangeLength","minLength","maxLength","pattern","range","max","_getSortingFunc","sorter","_value","TextField","autosearch","filterControl","_createTextBox","which","insertControl","editControl","NumberField","TextAreaField","_createTextArea","textarea","SelectField","selectedIndex","textField","firstItemValue","valueType","resultItem","_createSelect","select","CheckboxField","_createCheckbox","checked","disabled","indeterminate","$cb","checkbox","ControlField","_configInitialized","buttonClass","modeButtonClass","modeOnButtonClass","searchModeButtonClass","insertModeButtonClass","editButtonClass","deleteButtonClass","searchButtonClass","clearFilterButtonClass","insertButtonClass","updateButtonClass","cancelEditButtonClass","searchModeButtonTooltip","insertModeButtonTooltip","editButtonTooltip","deleteButtonTooltip","searchButtonTooltip","clearFilterButtonTooltip","insertButtonTooltip","updateButtonTooltip","cancelEditButtonTooltip","editButton","deleteButton","clearFilterButton","modeSwitchButton","_initConfig","_hasFiltering","_hasInserting","hasFiltering","hasInserting","_createFilterSwitchButton","_createInsertSwitchButton","_createModeSwitchButton","add","_createEditButton","_createDeleteButton","_createSearchButton","_createClearFilterButton","_createInsertButton","_createUpdateButton","_createCancelEditButton","_createOnOffSwitchButton","cssClass","isOnInitially","isOn","updateButtonState","$button","_createGridButton","isInserting","cls","clickHandler","usersAdapter","matchExtendedInfo","usersWithExtendedInfo","uuser","u","extendedInfo","validateDataURIScheme","picture","createJsonUserInfo","userAssigned","username","isAssignee","participant","isParticipant","isAnonymized","anonymizedUserInformation","matchUsersForExtendedInfoCase","casee","justAssignees","usersWithoutAnonymized","fromWebpart","task-description","getContentOnRender","renderParams","modalForDescription","isNecessaryModal","DOMPurify","sanitize","isNecessaryModalForDescription","showModalDescription","baseUrl","getPathUrl","showConfirmationMessage","validateTrustDomains","closeOnEscape","resp","scrollWidth","scrollHeight","currentStates","newWidgets","tskDescription","_start","pipeResponse","_renderDefer","_wait4Render","_wait4RenderDefer","allowTakeOwnership","allowRelease","allowCaseCancel","QUICK_ACTIONS_QUEUE","numberAllActions","executedRequests","_startRequest","paramsQuickAction","paramsToBackend","taskId","quickActionGuid","_buildParametersByActions","paramsRequest","executeQuickAction","_finishRequest","backResponse","_finishAllRequests","_clearQueue","_skipPendingRequests","numberSkipActions","clearQueue","stop","_executeQueueRequests","arrayRequestsInformation","queue","dequeue","quickAction","ruleGuid","_buildRequestSubmitData","_buildRequestCheckpoint","_buildRequestProcessPropertyValue","_buildRequestCommit","h_tag","h_xpath","h_idRender","h_xpathContext","h_propertyName","startAllRequests","arrayRequestsInformationRaw","stopAllRequests","quickActionsRequester","casestemplate-container","casestemplate-item","casestemplate-empty-data","hasBatchActions","sequenceCall","templateContainer","updateCases","onCaseChecked","sequence","casesSelected","getCasesData","casesData","getCasesTemplates","templateString","casesLength","$templateCase","renderCase","caseData","templateCase","$case","batchActions","getAssignees","$assignees","refreshCase","caseTemplate","getActivitiesData","getPendingsData","casesTemplates","guidFavorite","forcePersonalizedColumns","parentsid","casestemplate"],"mappings":"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","sourcesContent":["function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /*\r\n                                                                                                                                                                                                                                                                                                                                                                               *   Name: BizAgi Workportal Security Command\r\n                                                                                                                                                                                                                                                                                                                                                                               *   Author: Edward Morales\r\n                                                                                                                                                                                                                                                                                                                                                                               *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                               *   -   This script will define a common class to access the security data\r\n                                                                                                                                                                                                                                                                                                                                                                               */\n\n\n$.Class(\"bizagi.workportal.command.security\", {}, {\n\n\n  init: function init(dataService) {\n    var self = this;\n    self.dataService = dataService;\n    self.rawData = {};\n  },\n\n  getSecurity: function getSecurity() {\n    var self = this;\n    var def = new $.Deferred();\n    self.security = {};\n    self.jsonSecurityList = {};\n\n    if (bizagi.menuSecurity) {\n      def.resolve(bizagi.menuSecurity);\n    } else {\n\n      $.when(self.dataService.getMenuAuthorization()).done(function (data) {\n        if (bizagi.currentUser.associatedStakeholders && bizagi.currentUser.associatedStakeholders.length > 0) {\n          data.permissions.push({ \"associatedStakeholders\": [] });\n        }\n        self.rawData = data;\n        bizagi.menuSecurity = self.convertSecurityData(data);\n        self.jsonSecurityList = data;\n        $.each(self.security, function (key, value) {\n          authMenu[key] = value;\n        });\n        def.resolve(bizagi.menuSecurity);\n      }).fail(function () {\n        def.reject();\n      });\n    }\n\n    return def.promise();\n  },\n\n\n  convertSecurityData: function convertSecurityData(data) {\n    var permsMenu = {};\n    var getRecursivePerms = function getRecursivePerms(perms) {\n      $.each(perms, function (key, value) {\n        if (_typeof(value) == 'object') {\n          if (typeof key != \"number\") {\n            permsMenu[key] = true;\n          }\n          getRecursivePerms(value);\n        } else {\n          permsMenu[value] = true;\n        }\n      });\n    };\n    getRecursivePerms(data.permissions);\n    return permsMenu;\n  },\n\n  checkSecurityPerm: function checkSecurityPerm(module) {\n    var self = this;\n    module = module || \"\";\n    var deferred = $.Deferred();\n    if (!bizagi.menuSecurity) {\n      self.getSecurity().done(function (currentMenuSecurity) {\n        deferred.resolve(!!currentMenuSecurity[module]);\n      }).fail(function () {\n        deferred.resolve(false);\n      });\n    } else {\n      deferred.resolve(!!bizagi.menuSecurity[module]);\n    }\n\n    return deferred.promise();\n  },\n\n  getRawData: function getRawData() {\n    return this.rawData;\n  } });","var _$$Class$extend;function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;} /*\r\n                                                                                                                                                                                                                                *   Name: BizAgi Workportal Webpart helper\r\n                                                                                                                                                                                                                                *   Author: Diego Parra\r\n                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                *   -   This script will define helper functions that the webparts could use to reuse some logic\r\n                                                                                                                                                                                                                                */\n\n\n$.Class.extend(\"bizagi.workportal.webpart.helper\", {}, (_$$Class$extend = {\n  /* \r\n                                                                             *   Constructor\r\n                                                                             */\n  init: function init(webpart) {\n    // Set data service\n    this.dataService = webpart.dataService;\n\n    // Set l10n service\n    this.resources = webpart.resources;\n\n    // Set workportal facade\n    this.workportalFacade = webpart.workportalFacade;\n\n    //Load Aditional templates\n    this.templates = {};\n  },\n\n  /*\r\n      *   Helper to set visible property to false to the given columns\r\n      */\n  hideCasesColumn: function hideCasesColumn(data, columnName) {\n    var self = this;\n    for (i = 0; i < data.columns.length; i++) {\n      if (data.columns[i].name == columnName) {\n        data.columns[i].visible = false;\n        break;\n      }\n    }\n    return data;\n  } }, _defineProperty(_$$Class$extend, \"hideCasesColumn\",\n\n\n\nfunction hideCasesColumn(data, columnName) {\n  var self = this;\n  for (i = 0; i < data.columns.length; i++) {\n    if (data.columns[i].name == columnName) {\n      data.columns[i].visible = false;\n      break;\n    }\n  }\n  return data;\n}), _defineProperty(_$$Class$extend, \"transformCasesInfo\",\n\n\n\n\nfunction transformCasesInfo(params) {\n  var old = params.data,\n  imageColumn = params.imageColumn;\n  var newData = {\n    transformed: true };\n\n\n  // If the data is already transformed, don't do anything\n  if (old.transformed) return old;\n\n  var getColumnType = function getColumnType(column) {\n    if (column.fieldName == imageColumn) return \"upload\";\n    if (column.fieldName == \"I_idTask\") return \"workitems\";\n    return column.type;\n  };\n\n  // Parse columns, and add \"id\" column\n  newData.columns = [{\n    name: \"id\",\n    displayName: \"id\",\n    visible: false }];\n\n\n  for (var i = 0; i < old.cases.columnTitle.length; i++) {\n    var oldColumn = old.cases.columnTitle[i];\n    newData.columns.push({\n      name: oldColumn.fieldName,\n      displayName: oldColumn.displayName,\n      dataType: getColumnType(oldColumn) });\n\n\n    if (bizagi.util.parseBoolean(oldColumn.isOrdered) == true) {\n      newData.orderBy = oldColumn.fieldName;\n      newData.orderType = oldColumn.orderType == 0 ? \"asc\" : \"desc\";\n    }\n  }\n\n  // Add \"workitems\" column\n  newData.columns.push({\n    name: \"workitems\",\n    displayName: \"workitems\",\n    visible: false,\n    dataType: \"workitems\" });\n\n\n  newData.columns.push({\n    name: \"permissions\",\n    displayName: \"permissions\",\n    visible: false,\n    dataType: \"permissions\" });\n\n\n  // Parse rows\n  newData.rows = [];\n  for (i = 0; i < old.cases.rows.length; i++) {\n    var oldRow = old.cases.rows[i];\n    var newRow = [];\n    newRow.push(oldRow.id);\n\n    // Add other fields\n    for (var j = 0; j < oldRow.fields.length; j++) {\n      newRow.push(oldRow.fields[j]);\n    }\n    newData.rows.push(newRow);\n  }\n\n  // Add other stuff\n  newData.totalPages = old.cases.totalPages;\n  newData.page = old.cases.page;\n\n  return newData;\n}), _defineProperty(_$$Class$extend, \"drawGridView\",\n\n\n\n\nfunction drawGridView(params) {\n  var templates = params.template;\n\n  // This is the data that will be used in order to render the template\n  var data = params.data;\n\n  // Complete column information with defaults\n  for (i = 0; i < data.columns.length; i++) {\n    data.columns[i].visible = typeof data.columns[i].visible !== \"undefined\" ? bizagi.util.parseBoolean(data.columns[i].visible) : true;\n\n    // Hide uploads & workitems\n    if (data.columns[i].dataType == \"upload\") data.columns[i].visible = false;\n    if (data.columns[i].dataType == \"workitems\") data.columns[i].visible = false;\n    if (data.columns[i].dataType == \"permissions\") data.columns[i].visible = false;\n  }\n\n  // Check that required params are defined\n  if (data.orderType == 0) data.orderType = \"asc\";\n  if (data.orderType == 1) data.orderType = \"desc\";\n  data.orderBy = !bizagi.util.isEmpty(data.orderBy) ? data.orderBy : \"\";\n  data.orderType = !bizagi.util.isEmpty(data.orderType) ? data.orderType : \"asc\";\n  data.totalPages = !bizagi.util.isEmpty(data.totalPages) ? data.totalPages : 0;\n\n  // Add paging stuff\n  var pages = [];\n  for (var i = 1; i <= data.totalPages; i++) {\n    pages.push({\n      number: i,\n      active: i == data.page });\n\n  }\n\n  // Build the html\n  var result = $.tmpl(templates, $.extend(data, {\n    pages: pages,\n    actions: params.actions,\n    filters: params.filters,\n    title: params.title,\n    getCaseId: function getCaseId(row) {\n      return row[0];\n    },\n    getEntityId: function getEntityId(row) {\n      return row[0];\n    },\n    splitHeaderName: function splitHeaderName(displayName) {\n      var finalDispName = displayName;\n      var dispNameParts = displayName.split('_');\n      if (dispNameParts.length > 1)\n      finalDispName = dispNameParts[1];\n      return finalDispName;\n    },\n    getWorkItems: function getWorkItems(row) {\n      var workitemsData = \"[\";\n      var workitems = row[row.length - 2].workitems;\n      if (workitems && workitems.length > 0) {\n        for (var wi in workitems) {\n          if (wi > 0) {\n            workitemsData += \",\";\n          }\n          var wiInfo = \"{\\\"idWorkItem\\\":\";\n          wiInfo += workitems[wi].idWorkItem;\n          wiInfo += \",\\\"idTask\\\":\";\n          wiInfo += workitems[wi].idTask;\n          wiInfo += \"}\";\n          workitemsData += wiInfo;\n        }\n\n      }\n      workitemsData += \"]\";\n      return workitemsData;\n    } }));\n\n\n  return result;\n}), _defineProperty(_$$Class$extend, \"drawThumbnailsView\",\n\n\n\n\nfunction drawThumbnailsView(params) {\n  var self = this;\n  var templates = params.template;\n\n  // This is the data that will be used in order to render the template\n  var data = params.data;\n  var imageUrl, label;\n\n  // Normalize label item\n  for (i = 0; i < data.columns.length; i++) {\n    // Set default visibility to true\n    data.columns[i].visible = typeof data.columns[i].visible !== \"undefined\" ? bizagi.util.parseBoolean(data.columns[i].visible) : true;\n\n    // Check label item\n    if (data.columns[i].name == params.imageLabelColumn) {\n      data.columns[i].dataType = \"imageLabel\";\n    }\n\n    // Check workitem item\n    if (data.columns[i].dataType == \"workitems\") {\n      data.columns[i].visible = false;\n    }\n  }\n\n  // Check that required params are defined\n  data.orderBy = !bizagi.util.isEmpty(data.orderBy) ? data.orderBy : \"\";\n  data.orderType = !bizagi.util.isEmpty(data.orderType) ? data.orderType : \"asc\";\n  data.totalPages = !bizagi.util.isEmpty(data.totalPages) ? data.totalPages : 0;\n\n  // Add paging stuff\n  var pages = [];\n  for (var i = 1; i <= data.totalPages; i++) {\n    pages.push({\n      number: i,\n      active: i == data.page });\n\n  }\n\n  // Build the html\n  return $.tmpl(templates,\n  $.extend(data, {\n    pages: pages,\n    getImage: function getImage(files) {\n      return self.getFileImage(files);\n    },\n    actions: params.actions,\n    getCaseId: function getCaseId(row) {\n      return row[0];\n    },\n    getEntityId: function getEntityId(row) {\n      return row[0];\n    },\n    getWorkItems: function getWorkItems(row) {\n      var workitemsData = \"[\";\n      var workitems = row[row.length - 1].workitems;\n      if (workitems && workitems.length > 0) {\n        for (var wi in workitems) {\n          if (wi > 0) {\n            workitemsData += \",\";\n          }\n          var wiInfo = \"{\\\"idWorkItem\\\":\";\n          wiInfo += workitems[wi].idWorkItem;\n          wiInfo += \",\\\"idTask\\\":\";\n          wiInfo += workitems[wi].idTask;\n          wiInfo += \"}\";\n          workitemsData += wiInfo;\n        }\n\n      }\n      workitemsData += \"]\";\n      return workitemsData;\n    } }));\n\n}), _defineProperty(_$$Class$extend, \"getEmptyFile\",\n\nfunction getEmptyFile() {\n  return \"/_layouts/Proxy/jquery/overrides/css/desktop/images/EmptyAsset.png\";\n  //return \"\"; //No Picture\n}), _defineProperty(_$$Class$extend, \"getFileImage\",\n\n\n\nfunction getFileImage(files) {\n  var self = this;\n\n  if (!files || files.length == 0) return self.getEmptyFile();\n  return files;\n}), _defineProperty(_$$Class$extend, \"getFile\",\nfunction getFile(files) {\n  var self = this;\n\n  if (!files || files.length == 0) return self.getEmptyFile();\n  return self.dataService.getFile(files[0]);\n}), _defineProperty(_$$Class$extend, \"removeWaitContainer\",\nfunction removeWaitContainer(container) {\n  if ($(container)) {\n    $(container).addClass(\"ui-bizagi-sharepoint-loading-container-hidden\");\n  }\n}), _defineProperty(_$$Class$extend, \"addWaitContainer\",\nfunction addWaitContainer(container) {\n  if ($(container)) {\n    $(container).removeClass(\"ui-bizagi-sharepoint-loading-container-hidden\");\n  }\n}), _defineProperty(_$$Class$extend, \"loadTemplate\",\n\nfunction loadTemplate(template, templateDestination) {\n  var self = this;\n\n  // Go fetch the template\n  return bizagi.templateService.getTemplate(templateDestination).\n  done(function (resolvedRemplate) {\n    self.templates[template] = resolvedRemplate;\n  });\n}), _defineProperty(_$$Class$extend, \"getFailServerErrorDeferred\",\n\nfunction getFailServerErrorDeferred(params, defer) {\n  var self = this;\n  var errorMessage = params.message;\n  var remoteSeverURL = \"\";\n  var errorTemplateName;\n  if (params.sharepointProxyPrefix.indexOf(\"URL\") != -1) {\n    remoteSeverURL = params.sharepointProxyPrefix.substr(params.sharepointProxyPrefix.indexOf(\"URL\") + 4, params.sharepointProxyPrefix.length);\n    errorTemplateName = \"bizagi.workportal.desktop.error-message-sharepoint\";\n  } else {\n    errorTemplateName = \"bizagi.workportal.desktop.error-message-portal\";\n  }\n  errorMessage = remoteSeverURL + \": \" + errorMessage;\n  self.loadTemplate(\"error-message\", bizagi.getTemplate(errorTemplateName)).\n  done(function (eTemplate) {\n    var content = self.content = $.tmpl(eTemplate, {\n      message: errorMessage,\n      address: params.helpAddress });\n\n\n    defer.resolve(content);\n\n  }).fail(function (msg) {\n    defer.resolve(\"<div>Unhandled error</div>\");\n  });\n\n}), _defineProperty(_$$Class$extend, \"getPaginationTemplate\",\nfunction getPaginationTemplate() {\n  return self.loadTemplate(\"pagination-template\", bizagi.getTemplate(\"inbox-common-pagination-inbox\"));\n}), _defineProperty(_$$Class$extend, \"publishShowRenderEvent\",\n\nfunction publishShowRenderEvent(event, webpart, params) {\n  // Check if the current render form can be changed\n  if (!!!event) {\n    alert(\"Event param cannot be undefined\");\n  }\n  //The webparts that not visible no receive events  \n  var deferRet = webpart.publish(\"ui-bizagi-can-change-activityform\");\n  if (deferRet) {\n    deferRet.done(function () {\n      // When the \"ui-bizagi-can-change-activityform\" event deferred is resolved, it means that we can change the activityform instance\n      // otherwise the deferred fails and nothing happens because we don't have fail implementation\n\n      // Publish the event so any other webpart could react to that\n      webpart.publish(event, params);\n    });\n  } else {\n    //Error autosave verification send error\n    console.log(\"autosave verification send error\");\n    //webpart.publish(event, params);\n  }\n}), _defineProperty(_$$Class$extend, \"isWebpartInIFrame\",\nfunction isWebpartInIFrame() {\n  try {\n    return window.self !== window.top;\n  } catch (e) {\n    return true;\n  }\n}), _defineProperty(_$$Class$extend, \"displayWebPartPopUpExternalIframe\",\n\nfunction displayWebPartPopUpExternalIframe(webpartName, params, callback, postMessageSocket) {\n  params.message = {};\n  var data = $.extend({}, params, {\n    workportal: null,\n    canvas: null,\n    whenInitialized: null,\n    event: \"postmessage-bizagi-openParentPopUp\",\n    message: {\n      webPartToDraw: webpartName,\n      iframeidentifier: postMessageSocket.iframeidentifier } });\n\n\n\n  postMessageSocket.send(data);\n}), _defineProperty(_$$Class$extend, \"displayWebPartPopUpinIFrame\",\nfunction displayWebPartPopUpinIFrame(webpartName, params, callback) {\n\n  var webpartObject;\n  // Publish the event so any other webpart could react to that\n  var mask = document.createElement(\"div\");\n  mask.className = \"containerPopUp\";\n  mask.style.height = \"100%\";\n\n  var popUpParams = params;\n\n  if (!mask.addEventListener) {\n    mask.attachEvent(\"onclick\", preClosePopUp);\n  } else {\n    mask.addEventListener(\"click\", preClosePopUp, false);\n  }\n\n  function preClosePopUp(ev, params) {\n    if (ev.eventPhase === 2) {\n      closePopUp(ev, params);\n    }\n  }\n\n  var canvas = document.createElement(\"div\");\n  canvas.className = \"activitiFormContainer\";\n  var closeCanvas = document.createElement(\"div\");\n  closeCanvas.className = \"closeCanvas\";\n\n  if (!closeCanvas.addEventListener) {\n    closeCanvas.attachEvent(\"onclick\", function (e, params) {\n      closePopUp(e, params);\n    });\n  } else {\n    closeCanvas.addEventListener(\"click\", function (e, params) {\n      closePopUp(e, params);\n    }, false);\n  }\n\n  canvas.appendChild(closeCanvas);\n  mask.appendChild(canvas);\n\n  var webpartCanvasDiv = document.createElement(\"div\");\n  webpartCanvasDiv.className = \"webpartCanvasDiv\";\n  webpartCanvasDiv.id = \"webpartCanvasPopUp\";\n  canvas.appendChild(webpartCanvasDiv);\n\n  var pathiFrame = \"\";\n  if (params.pathiFrame) {\n    pathiFrame = params.pathiFrame;\n  } else {\n    pathiFrame = window.location.href.substring(0, window.location.href.indexOf(\"jquery\"));\n  }\n\n  var queryStringParams = window.location.toString().split('?')[1];\n\n\n  pathiFrame = pathiFrame + \"jquery/webparts/desktop/portal/pages/webpart.htm\";\n  pathiFrame = pathiFrame + \"?type=\" + webpartName;\n  if (params.idCase) {\n    pathiFrame = pathiFrame + \"&idCase=\" + params.idCase;\n  }\n  if (params.idWorkitem) {\n    pathiFrame = pathiFrame + \"&idWorkitem=\" + params.idWorkitem;\n  }\n  if (params.idWfClass) {\n    pathiFrame = pathiFrame + \"&idWfClass=\" + params.idWfClass;\n  }\n  if (queryStringParams) {\n    pathiFrame = pathiFrame + \"&\" + queryStringParams;\n  }\n\n  pathiFrame = pathiFrame + \"&remoteServer=\" + window.location.toString();\n\n\n  //Aqui se agrega el iframe\n  var iframe = document.createElement(\"iframe\");\n  iframe.className = \"csswebpartIframePopUp\";\n  iframe.id = \"iframePopUp\";\n  iframe.src = pathiFrame;\n  iframe.resizeInPopUp = function (params) {\n    var self = this;\n    var heightActivitiFormContainer = $(\".activitiFormContainer\").height() || 0;\n    $(iframe).height(heightActivitiFormContainer);\n  };\n\n  webpartCanvasDiv.appendChild(iframe);\n  document.body.appendChild(mask);\n\n  iframe.resizeInPopUp(params);\n  $(window).resize(function () {\n    iframe.resizeInPopUp(params);\n  });\n\n  function closePopUp(ev, params) {\n    //if webpart has canHide event, call event canHide before\n\n    var postmessageSocket = new bizagi.postmessage({\n      remoteServer: pathiFrame,\n      destination: iframe.contentWindow,\n      origin: window });\n\n    postmessageSocket.receive = function (msg) {\n      //the canHide process is made in iframe\n      var params = msg.data;\n      if (params.event == \"postmessage-bizagi-closeIFramePopUp\") {\n        if (mask.parentNode) {\n          iframe.src = undefined;\n          mask.parentNode.removeChild(mask);\n          if (callback) {\n            callback(this, popUpParams);\n          }\n        }\n      }\n    };\n    var iframeclosemsg = {};\n    iframeclosemsg.event = \"postmessage-bizagi-canCloseIFramePopUp\";\n    postmessageSocket.send(iframeclosemsg);\n  }\n\n}), _defineProperty(_$$Class$extend, \"displayWebPartPopUp\",\nfunction displayWebPartPopUp(webpartName, params, callback) {\n  var webpartObject;\n  // Publish the event so any other webpart could react to that\n  var mask = document.createElement(\"div\");\n  mask.className = \"containerPopUp\";\n  mask.style.height = \"100%\";\n\n  var popUpParams = params;\n\n  if (!mask.addEventListener) {\n    mask.attachEvent(\"onclick\", preClosePopUp);\n  } else {\n    mask.addEventListener(\"click\", preClosePopUp, false);\n  }\n\n  function preClosePopUp(ev, params) {\n    if (ev.eventPhase === 2) {\n      closePopUp(ev, params);\n    }\n  }\n\n  function closePopUp(ev, params) {\n    //if webpart has canHide event, call event canHide before\n    if (webpartObject.canHide) {\n      $.when(webpartObject.canHide()).\n      done(function () {\n        var showCasesMSG = {\n          message: {} };\n\n        showCasesMSG.event = \"ui-bizagi-reload-cases\";\n\n        if (webpartObject.postmessageSocket) {\n          webpartObject.postmessageSocket.send(showCasesMSG);\n        } else {\n          var postmessageSocket = new bizagi.postmessage({\n            remoteServer: bizagi.readQueryString()[\"remoteServer\"],\n            destination: window.parent,\n            origin: window });\n\n          postmessageSocket.send(showCasesMSG);\n        }\n\n        mask.parentNode.removeChild(mask);\n        if (callback) {\n          callback(this, popUpParams);\n        }\n        webpartObject.destroy();\n      }).fail(function () {\n        mask.parentNode.removeChild(mask);\n        if (callback) {\n          callback(this, popUpParams);\n        }\n        webpartObject.destroy();\n      });\n    } else {\n      mask.parentNode.removeChild(mask);\n      if (callback) {\n        callback(this, popUpParams);\n      }\n      webpartObject.destroy();\n    }\n  }\n\n  var canvas = document.createElement(\"div\");\n  canvas.className = \"activitiFormContainer\";\n  var closeCanvas = document.createElement(\"div\");\n  closeCanvas.className = \"closeCanvas\";\n\n  if (!closeCanvas.addEventListener) {\n    closeCanvas.attachEvent(\"onclick\", function (e, params) {\n      closePopUp(e, params);\n    });\n  } else {\n    closeCanvas.addEventListener(\"click\", function (e, params) {\n      closePopUp(e, params);\n    }, false);\n  }\n\n  canvas.appendChild(closeCanvas);\n  mask.appendChild(canvas);\n\n  var webpartCanvasDiv = document.createElement(\"div\");\n  webpartCanvasDiv.className = \"webpartCanvasDiv\";\n  webpartCanvasDiv.id = \"webpartCanvasPopUp\";\n  canvas.appendChild(webpartCanvasDiv);\n\n  var webpartParams = $.extend({}, params, {\n    webpart: webpartName,\n    canvas: $(webpartCanvasDiv),\n    namespace: \"PopUp\",\n    data: null,\n    adjustButtonsToContent: true });\n\n\n  //add popUp in document\n  document.body.appendChild(mask);\n  //The element webpartCanvasDiv must be already added to document, for can call  bizagi.starWaiting\n  bizagi.startWaiting(webpartCanvasDiv);\n\n  params.workportal.executeWebpart(webpartParams).done(function (result) {\n    webpartObject = result.webpart;\n    closeCanvas.onclick = function (e, params) {\n      // callback(params);\n    };\n  });\n}), _defineProperty(_$$Class$extend, \"displayWebPartDialog\",\nfunction displayWebPartDialog(webpartName, params, callback) {\n  var webpartObject;\n  var dialogParams = params.dialogParams;\n  var canvas = document.createElement(\"div\");\n  canvas.className = \"activitiFormContainer\";\n  var webpartCanvasDiv = document.createElement(\"div\");\n  webpartCanvasDiv.className = \"webpartCanvasDiv\";\n  webpartCanvasDiv.id = \"webpartCanvasPopUp\";\n  canvas.appendChild(webpartCanvasDiv);\n  var webpartParams = $.extend({}, params, {\n    webpart: webpartName,\n    canvas: $(webpartCanvasDiv),\n    namespace: \"PopUp\",\n    data: null,\n    adjustButtonsToContent: true });\n\n  params.workportal.executeWebpart(webpartParams).done(function (result) {\n    webpartObject = result.webpart;\n    if (dialogParams.showCloseButton) {\n      dialogParams.buttons.push({\n        text: bizagi.localization.getResource(\"workportal-widget-dialog-box-close\"),\n        click: function click(p, a) {\n          webpartObject.content.dialog(\"close\");\n        } });\n\n    }\n    webpartObject.content.dialog(dialogParams);\n  });\n}), _$$Class$extend));\n\n\n/*\r\n                        *   Static Methods to configure webparts\r\n                        */\nbizagi = typeof bizagi !== \"undefined\" ? bizagi : {};\nbizagi.webparts = typeof bizagi.webparts !== \"undefined\" ? bizagi.webparts : {};\n\nbizagi.webparts.addConfigurationMessage = function (webpartParams, messageResourceName) {\n  var doc = this.ownerDocument;\n  var body = $(\"body\", doc);\n  var canvas = webpartParams.canvas || $(\"<div/>\").appendTo(body);\n  var errorTemplate = bizagi.getTemplate(\"bizagi.sharepoint.configurationerror\");\n  // Load template\n  $.when(bizagi.templateService.getTemplate(errorTemplate)).\n  then(function (template) {\n    $.tmpl(template, {\n      message: bizagi.localization.getResource(messageResourceName) }).\n    appendTo(canvas);\n\n  });\n};","var _bizagi$workportal$co;function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;}\n/*\r\n                                                                                                                                                                                                                                     *   Name: BizAgi Workportal Widget Controller\r\n                                                                                                                                                                                                                                     *   Author: Diego Parra\r\n                                                                                                                                                                                                                                     *   Comments:\r\n                                                                                                                                                                                                                                     *   -   This script will define a base class to all widgets\r\n                                                                                                                                                                                                                                     */\n\nbizagi.workportal.controllers.controller.extend(\"bizagi.workportal.widgets.widget\", {\n  BIZAGI_WORKPORTAL_WIDGET_INTEGRATION: \"widgetIntegration\",\n  BIZAGI_WORKPORTAL_WIDGET_WEBPART: \"webpart\",\n  BIZAGI_WORKPORTAL_WIDGET_INBOX: \"inbox\",\n  BIZAGI_WORKPORTAL_WIDGET_ADVANCE_SEARCH: \"advanceSearch\",\n  BIZAGI_WORKPORTAL_WIDGET_HOMEPORTAL: \"homeportal\",\n  BIZAGI_WORKPORTAL_WIDGET_ACTIVITY: \"project.activity\",\n  BIZAGI_WORKPORTAL_WIDGET_PROJECT_DASHBOARD: \"projectDashboard\",\n  BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID: \"inboxGrid\",\n  BIZAGI_WORKPORTAL_WIDGET_ROUTING: \"routing\",\n  BIZAGI_WORKPORTAL_WIDGET_SEARCH: \"search\",\n  BIZAGI_WORKPORTAL_WIDGET_RENDER: \"activityform\",\n  BIZAGI_WORKPORTAL_WIDGET_START_FORM: \"startForm\",\n  BIZAGI_WORKPORTAL_WIDGET_RENDERFORM: \"renderform\",\n  BIZAGI_WORKPORTAL_WIDGET_NEWCASE: \"newCase\",\n  BIZAGI_WORKPORTAL_WIDGET_QUERIES: \"queries\",\n  BIZAGI_WORKPORTAL_WIDGET_QUERIES_DEFINITION: \"queriesDefinition\",\n  BIZAGI_WORKPORTAL_WIDGET_QUERIES_SHORTCUT: \"queriesShortcut\",\n  BIZAGI_WORKPORTAL_WIDGET_QUERYFORM: \"queryform\",\n  BIZAGI_WORKPORTAL_WIDGET_LISTCASES: \"listCases\",\n  BIZAGI_WORKPORTAL_WIDGET_ASYNC: \"async\",\n  BIZAGI_WORKPORTAL_WIDGET_GENERICIFRAME: \"genericiframe\",\n  BIZAGI_WORKPORTAL_WIDGET_SUBMENU: \"subMenu\",\n  BIZAGI_WORKPORTAL_WIDGET_PRINT: \"print\",\n  BIZAGI_WORKPORTAL_WIDGET_FONTSIZE: \"fontsize\",\n  BIZAGI_WORKPORTAL_WIDGET_OLDRENDERINTEGRATION: \"oldrenderintegration\",\n  BIZAGI_WORKPORTAL_WIDGET_PAGE: \"page\",\n  BIZAGI_WORKPORTAL_WIDGET_ENTITIES: \"entities\",\n  BIZAGI_WORKPORTAL_WIDGET_REPORTS: \"reports\",\n  BIZAGI_WORKPORTAL_WIDGET_REPORTS_MENU: \"reportsMenu\",\n  BIZAGI_WORKPORTAL_WIDGET_REPORTS_CHART: \"reportsChart\",\n  BIZAGI_WORKPORTAL_WIDGET_SMARTFOLDERS: \"smartfolders\",\n  BIZAGI_WORKPORTAL_WIDGET_ADMIN_CASES: \"adminReassignCases\",\n  BIZAGI_WORKPORTAL_WIDGET_REASSIGN_CASE: \"reassignCase\",\n  BIZAGI_WORKPORTAL_WIDGET_ASYNCECM_UPLOAD: \"asyncECMUpload\",\n  BIZAGI_WORKPORTAL_WIDGET_PROCESS_TREE: \"processTree\",\n  BIZAGI_WORKPORTAL_WIDGET_ENTITIES_TREE: \"entitiesTree\",\n  BIZAGI_WORKPORTAL_WIDGET_USERS_TABLE: \"usersTable\",\n  BIZAGI_WORKPORTAL_WIDGET_ACTIVITY_LOG: \"activityLog\",\n  BIZAGI_WORKPORTAL_WIDGET_AUTHENTICATION_LOG: \"authenticationLog\",\n  BIZAGI_WORKPORTAL_WIDGET_ADMIN_ENTITIES: \"entityAdmin\",\n  BIZAGI_WORKPORTAL_WIDGET_ADMIN_ENCRYPT_PASSWORDS: \"encryptPasswords\",\n  BIZAGI_WORKPORTAL_WIDGET_ADMIN_USERS_REQUESTS: \"userPendingRequests\",\n  BIZAGI_WORKPORTAL_WIDGET_ADMIN_CASE_SEARCH: \"adminCaseSearch\",\n  BIZAGI_WORKPORTAL_WIDGET_ADMIN_ASYNC_ACTIVITIES: \"asyncActivities\",\n  BIZAGI_WORKPORTAL_WIDGET_ADMIN_DEFAULTS_ASSIGNATION_USER: \"defaultsAssignUser\",\n  BIZAGI_WORKPORTAL_WIDGET_ADMIN_TRANSFER_CASE_SECURITY_PERMISSIONS: \"transferCaseSecurityPermissions\",\n  BIZAGI_WORKPORTAL_WIDGET_ADMIN_USER_PROFILES: \"userProfiles\",\n  BIZAGI_WORKPORTAL_WIDGET_ADMIN_ALARMS: \"adminAlarms\",\n  BIZAGI_WORKPORTAL_WIDGET_ADMIN_USER_LICENSES: \"userlicenses\",\n  BIZAGI_WORKPORTAL_WIDGET_ADMIN_DIMENSIONS: \"dimensions\",\n  BIZAGI_WORKPORTAL_WIDGET_ADMIN_DOCUMENT_TEMPLATES: \"documentTemplates\",\n  BIZAGI_WORKPORTAL_WIDGET_ADMIN_PROCESSES: \"processes\",\n  BIZAGI_WORKPORTAL_WIDGET_START_PROCESS: \"startProcess\",\n  BIZAGI_WORKPORTAL_WIDGET_ADMIN_BUSINESS_POLICIES: \"businessPolicies\",\n  BIZAGI_WORKPORTAL_WIDGET_ADMIN_LANGUAGE: \"languageAdmin\",\n  BIZAGI_WORKPORTAL_WIDGET_ADMIN_BUSINESS_POLICIES_DECISION_TABLE: \"businessPoliciesDecisionTable\",\n  BIZAGI_WORKPORTAL_WIDGET_ADMIN_BUSINESS_POLICIES_POLITICS: \"businessPoliciesPolitics\",\n  BIZAGI_WORKPORTAL_WIDGET_ADMIN_BUSINESS_POLICIES_RULES: \"businessPoliciesRules\",\n  BIZAGI_WORKPORTAL_WIDGET_ADMIN_BUSINESS_POLICIES_TABS: \"businessPoliciesTabs\",\n  BIZAGI_WORKPORTAL_WIDGET_ADMIN_BUSINESS_POLICIES_VOCABULARIES: \"businessPoliciesVocabularies\",\n  BIZAGI_WORKPORTAL_WIDGET_ADMIN_PREFERENCES: \"adminPreferences\",\n  BIZAGI_WORKPORTAL_WIDGET_ADMIN_DISPLAY_OPTIONS: \"adminDisplayOptions\",\n  BIZAGI_WORKPORTAL_WIDGET_TREE: \"tree\",\n  BIZAGI_WORKPORTAL_WIDGET_GRAPHIC_QUERY: \"graphicquery\",\n  BIZAGI_WORKPORTAL_WIDGET_PROCESS_MODELER_VIEW: \"processModeler\",\n  BIZAGI_WORKPORTAL_WIDGET_ADMIN_USERS_ADMINISTRATION: \"adminUsers\",\n  BIZAGI_WORKPORTAL_WIDGET_ADMIN_USERS_DELEGATION: \"usersDelegation\",\n  BIZAGI_WORKPORTAL_WIDGET_ADMIN_USERS_DELEGATION_SEARCH_USER: \"usersDelegationSearchUser\",\n  BIZAGI_WORKPORTAL_WIDGET_ADMIN_STAKEHOLDERS: \"adminStakeholders\",\n  BIZAGI_WORKPORTAL_WIDGET_BIZAGI_EVENTS: \"events\",\n  BIZAGI_WORKPORTAL_WIDGET_BIZAGI_RELEASE: \"release\",\n  BIZAGI_WORKPORTAL_WIDGET_PROJECT_PROCESS_DIAGRAM_HELPER: \"processDiagramHelper\",\n  BIZAGI_WORKPORTAL_WIDGET_PROJECT_ACTIVITY_MAP_TOOLTIP: \"activityMapTooltip\",\n  BIZAGI_WORKPORTAL_WIDGET_PROJECT_USERSUMMARY: \"usersummary\",\n  BIZAGI_WORKPORTAL_WIDGET_MYSEARCHLIST: \"mySearchList\",\n  BIZAGI_WORKPORTAL_WIDGET_LOADFORM: \"loadForm\",\n  BIZAGI_WORKPORTAL_WIDGET_TEMPLATE_ENGINE: \"templates\",\n  BIZAGI_WORKPORTAL_WIDGET_DIALOGNAV: \"dialognav\",\n  BIZAGI_WORKPORTAL_WIDGET_ADMIN_HOLIDAYS: \"holidays\",\n  BIZAGI_WORKPORTAL_WIDGET_ADMIN_PROJECTNAME: \"projectName\",\n  BIZAGI_WORKPORTAL_WIDGET_ADMIN_OAUTH2APPLICATIONS: \"oauth2Applications\",\n  BIZAGI_WORKPORTAL_WIDGET_ADMIN_ADHOC_PROCESSES: \"adhocProcesses\",\n  BIZAGI_WORKPORTAL_WIDGET_TIMELINE: \"timeline\",\n  BIZAGI_WORKPORTAL_WIDGET_ADHOC_PROCESS_MODELER: \"adhocProcessModeler\",\n  BIZAGI_WORKPORTAL_WIDGET_ADMIN_ADHOC_ENTITIES: \"adhocEntities\",\n  BIZAGI_WORKPORTAL_WIDGET_ADMIN_ADHOC_USER_GROUPS: \"adhocUserGroups\",\n  BIZAGI_WORKPORTAL_WIDGET_ADMIN_ADHOC_CREATE_PROCESS: \"adhocCreateProcess\",\n  BIZAGI_WORKPORTAL_WIDGET_ADMIN_ADHOC_BOOLEAN_EXP: \"adhocBooleanExp\",\n  BIZAGI_WORKPORTAL_WIDGET_ADHOC_CREATE_PROCESS: \"adhocCreateProcess\",\n  BIZAGI_WORKPORTAL_WIDGET_PROFLY: \"adhocprofly\",\n  BIZAGI_WORKPORTAL_WIDGET_SESSION_TIMEOUT: \"sessionTimeOut\",\n  BIZAGI_WORKPORTAL_WIDGET_SESSION_TIMEOUT_EXPIRED: \"sessionTimeOutExpired\",\n  BIZAGI_WORKPORTAL_WIDGET_USER_PRIVACY: \"userPrivacy\",\n  BIZAGI_WORKPORTAL_WIDGET_ACCESS_DENIED: \"accessDenied\",\n  BIZAGI_WORKPORTAL_WIDGET_ADMIN_BUSINESS_POLICES: \"adminBusinessPolices\",\n  BIZAGI_WORKPORTAL_WIDGET_USERS_MODAL: \"usersModal\",\n  BIZAGI_WORKPORTAL_WIDGET_QUERIES_MANAGEMENT: \"queriesManagement\",\n  BIZAGI_WORKPORTAL_WIDGET_ADMIN_USER_PERMISSION_REPORT: \"userPermissionReport\",\n  BIZAGI_WORKPORTAL_WIDGET_ACTIVITY_DESCRIPTION_CONTENT: \"activityDescriptionContent\",\n  BIZAGI_WORKPORTAL_WIDGET_QUICKACTIONS_EXECUTE: \"quickActionsExecute\",\n  BIZAGI_WORKPORTAL_WIDGET_ADMIN_ERROR_LOGS: \"errorLogs\",\n  BIZAGI_WORKPORTAL_WIDGET_SMARTINBOX: \"smartinbox\",\n  BIZAGI_WORKPORTAL_WIDGET_ADMIN_SMARTINBOX: \"smartinboxAdmin\",\n  BIZAGI_WORKPORTAL_WIDGET_CANCEL_CASE: \"cancelCase\" }, (_bizagi$workportal$co = {\n\n\n  /*\r\n                                                                                   *   Constructor\r\n                                                                                   */\n  init: function init(workportalFacade, dataService, params) {\n    // Call base\n    this._super(workportalFacade, dataService);\n\n    // Set params\n    this.params = params;\n    if (params && params.menu) {\n      this.menu = params.menu;\n    }\n\n    this.observableElement = $({});\n\n    this.widgetReadyDeferred = new $.Deferred();\n\n    this.isBlocked = false;\n  },\n\n  /*\r\n     *   Publish an event so any controller can subscribe to it\r\n     */\n  publish: function publish(eventName, params) {\n    if (this.disposed) return null;\n    // Overrides base method to add referrer\n    $(document).triggerHandler(eventName, $.extend(params, {\n      referrer: this.getWidgetName() }));\n\n  },\n\n\n  /*\r\n     *   Change the current widget\r\n     */\n  changeWidget: function changeWidget(widgetName, params) {\n    var self = this;\n    params = params || {};\n    var widgetParams = $.extend(params, {\n      widgetName: widgetName });\n\n    self.publish(\"changeWidget\", widgetParams);\n  },\n\n  /*\r\n     *   Executes a workportal action\r\n     */\n  executeAction: function executeAction(actionName, params) {\n    var self = this;\n    params = params || {};\n    var actionParams = $.extend(params, {\n      action: actionName });\n\n    self.publish(\"executeAction\", actionParams);\n  },\n\n  /*\r\n     * Show graphic query\r\n     */\n  showGraphicQuery: function showGraphicQuery(data) {\n    var self = this;\n    /*This method is used for validate if the request is referd to process on the fly */\n    var processOnTheFly = data.isAdhoc;\n    if (processOnTheFly === true) {\n      bizagi.loader.start(\"processmodelerview\").then(function () {\n        self.publish(\"showDialogWidget\", {\n          widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_PROCESS_MODELER_VIEW,\n          data: data,\n          modalParameters: {\n            title: \"Process viewer\",\n            refreshInbox: false },\n\n          maximizeOnly: true,\n          onClose: function onClose() {\n            bizagi.workportal.desktop.dialogStack.pop();\n          } });\n\n      });\n    } else\n    {\n      bizagi.loader.start(\"processviewer\").then(function () {\n        self.publish(\"showDialogWidget\", {\n          widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_GRAPHIC_QUERY,\n          data: data,\n          modalParameters: {\n            title: self.getResource(\"render-graphic-query\"),\n            refreshInbox: false },\n\n          maximizeOnly: true,\n          onClose: function onClose() {\n            bizagi.workportal.desktop.dialogStack.pop();\n          } });\n\n      });\n    }\n  },\n\n  isProcessOnTheFlyCase: function isProcessOnTheFlyCase() {\n    return true;\n  },\n\n  showTimeLine: function showTimeLine(data) {\n    var self = this;\n    bizagi.loader.startAndThen(\"timeline\").then(function () {\n      self.publish(\"showDialogWidget\", {\n        widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_TIMELINE,\n        data: data,\n        modalParameters: {\n          title: self.getResource(\"workportal-project-casedashboard-timeline\"),\n          refreshInbox: false },\n\n        maximizeOnly: true,\n        onClose: function onClose() {\n          bizagi.workportal.desktop.dialogStack.pop();\n        } });\n\n    });\n  },\n\n\n  /**\r\n      * open modal for selec an user\r\n      * @param {Deffered} def \r\n      */\n  showSelectUser: function showSelectUser(def) {\n    var self = this;\n    bizagi.loader.startAndThen(\"admin\").then(function () {\n      self.publish(\"showDialogWidget\", {\n        widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_USERS_TABLE,\n        data: {},\n        closeVisible: false,\n        maximize: true,\n        modalParameters: {\n          title: bizagi.localization.getResource(\"workportal-widget-usertable-search-user\"),\n          width: \"930px\",\n          id: \"SelectUser\" },\n\n        userLinkLabel: [bizagi.localization.getResource(\"workportal-widget-admin-defaults-assignation-select-link\")],\n        parentDef: def,\n        showBackButton: false,\n        onClose: function onClose() {\n          def.reject();\n        } });\n\n\n      $.when(def).done(function (userId, userName, guid) {\n        self.publish(\"closeCurrentDialog\");\n      });\n    });\n  } }, _defineProperty(_bizagi$workportal$co, \"showSelectUser\",\n\n\n\n\n\nfunction showSelectUser(def) {\n  var self = this;\n  bizagi.loader.startAndThen(\"admin\").then(function () {\n    self.publish(\"showDialogWidget\", {\n      widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_USERS_TABLE,\n      data: {},\n      closeVisible: false,\n      maximize: true,\n      modalParameters: {\n        title: bizagi.localization.getResource(\"workportal-widget-usertable-search-user\"),\n        width: \"930px\",\n        id: \"SelectUser\" },\n\n      userLinkLabel: [bizagi.localization.getResource(\"workportal-widget-admin-defaults-assignation-select-link\")],\n      parentDef: def,\n      showBackButton: false,\n      onClose: function onClose() {\n        def.reject();\n      } });\n\n\n    $.when(def).done(function (userId, userName, guid) {\n      self.publish(\"closeCurrentDialog\");\n    });\n  });\n}), _defineProperty(_bizagi$workportal$co, \"routingExecute\",\n\nfunction routingExecute(element) {\n  // Executes routing action\n  if (element == undefined) {\n    return false;\n  }\n\n  var self = this;\n\n  var idCase = element.find(\"#idCase\").val() || self.params.idCase;\n  var idWorkflow = element.find(\"#idWorkflow\").val() || self.params.idWorkflow;\n  var idWorkItem = element.find(\"#idWorkItem\").val() || element.parent().find(\"#idWorkItem\").val();\n  var idTask = element.find(\"#idTask\").val();\n  var eventAsTasks = element.find(\"#eventAsTasks\").val() || false;\n\n  self.publish(\"executeAction\", {\n    action: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,\n    idCase: idCase,\n    idWorkflow: idWorkflow,\n    idWorkItem: idWorkItem,\n    idTask: idTask,\n    eventAsTasks: eventAsTasks });\n\n\n  return true;\n}), _defineProperty(_bizagi$workportal$co, \"getWidgetName\",\n\n\n\n\n\nfunction getWidgetName() {\n  return this.Class.fullName;\n}), _defineProperty(_bizagi$workportal$co, \"sub\",\n\n\n\n\n\nfunction sub(event) {\n  // Gets events registered\n  //var events = $._data(this.observableElement[0], \"events\");\n  // If the events exist, ignore it\n  //if (!events || !events[event]) {\n  this.observableElement.off.apply(this.observableElement, arguments);\n  this.observableElement.on.apply(this.observableElement, arguments);\n  //}\n}), _defineProperty(_bizagi$workportal$co, \"unsub\",\n\n\n\n\nfunction unsub() {\n  this.observableElement.off.apply(this.observableElement, arguments);\n}), _defineProperty(_bizagi$workportal$co, \"pub\",\n\n\n\n\nfunction pub() {\n  return this.observableElement.triggerHandler.apply(this.observableElement, arguments);\n}), _defineProperty(_bizagi$workportal$co, \"pubDeadLockDetection\",\n\n\n\n\nfunction pubDeadLockDetection() {\n  var def = new $.Deferred();\n  if (!self.isBlocked) {\n    self.isBlocked = true;\n    var pubDef = this.pub.apply(this, arguments);\n    var queueDef = Array.isArray(pubDef) ? pubDef : [pubDef];\n    $.when.apply($, queueDef).done(function (data) {\n      self.isBlocked = false;\n      def.resolve();\n    });\n  } else {\n    def.reject();\n  }\n  return def.promise();\n}), _defineProperty(_bizagi$workportal$co, \"clean\",\n\n\n\n\nfunction clean() {\n  var self = this;\n\n  //remove events\n  if (this.observableElement) {\n    var events = $._data(this.observableElement[0], \"events\");\n\n    if (events) {\n      for (var event in events) {\n        if (event != \"notify\" &&\n        event != 'showDialogWidget' &&\n        event != 'showNotification') {\n          self.unsub(event);\n        }\n      }\n    }\n  }\n}), _defineProperty(_bizagi$workportal$co, \"isReady\",\n\nfunction isReady() {\n  return this.widgetReadyDeferred.promise();\n}), _defineProperty(_bizagi$workportal$co, \"setWidgetReady\",\n\nfunction setWidgetReady() {\n  this.widgetReadyDeferred.resolve();\n}), _defineProperty(_bizagi$workportal$co, \"getDateWithTimezone\",\n\n\n\n\n\n\n\nfunction getDateWithTimezone(format, timeZone, date) {\n  var moment = window.bizagi.moment;\n  var _actualDate = function _actualDate() {\n    return new Date(moment().tz(timeZone).format());\n  },\n  _formatDate = function _formatDate() {\n    return new Date(moment.tz(date, format, timeZone).format());\n  };\n  return date ? _formatDate() : _actualDate();\n}), _bizagi$workportal$co));","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /*\r\n                                                                                                                                                                                                                                                                                                                                                                               *   Name: BizAgi Workportal Search Action\r\n                                                                                                                                                                                                                                                                                                                                                                               *   Author: Edward Morales\r\n                                                                                                                                                                                                                                                                                                                                                                               *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                               *   -   This script will execute the search action\r\n                                                                                                                                                                                                                                                                                                                                                                               */\n\nbizagi.workportal.actions.action.extend(\"bizagi.workportal.actions.search\", {}, {\n\n  /*\r\n                                                                                  *   Executes the action\r\n                                                                                  *   Could return a deferred\r\n                                                                                  */\n  execute: function execute(params) {\n    var self = this;\n    // Set params reference\n    self.params = params;\n\n    // Referer parameters for render actions\n    var referrerParams = {\n      radNumber: $.trim(params.radNumber),\n      idWorkflow: \"\",\n      taskState: \"all\",\n      // Filter by favorites  only when we are searching all processes and favorites\n      onlyFavorites: false,\n      // Sort and order parameters\n      order: params.order || \"\",\n      orderFieldName: params.orderFieldName || \"\",\n      orderType: params.orderType || \"0\",\n      page: params.page || 1,\n      group: bizagiConfig.groupByCaseNumber ? \"T_RADNUMBER\" : null };\n\n\n    // Loads case workitems\n    $.when(\n    //self.dataService.searchCases(referrerParams)\n    self.dataService.getCustomizedColumnsData(referrerParams)).\n\n    done(function (data) {\n      bizagi.lstIdCases = data.cases.lstIdCases;\n      //  Hack json data :(\n      var i = 0;\n      $(data.cases.columnTitle).each(function (key, value) {\n        value[\"radNumber\"] = $.trim(params.radNumber);\n        if (value.order == \"T_idTask\") {\n          $(data.cases.rows).each(function (key2, value2) {\n            if (!self.isArray(value2[\"fields\"][i])) {\n              data[\"cases\"][\"rows\"][key2][\"fields\"][i] = {\n                \"workitems\": [{\n                  \"TaskName\": value2[\"fields\"][i],\n                  \"State\": data[\"cases\"][\"rows\"][key2][\"taskState\"] }] };\n\n\n            }\n          });\n        }\n        i++;\n      });\n      // Define radnumber for render actions bottons \n      bizagi.referrerParams = bizagi.referrerParams || {};\n      bizagi.referrerParams.radNumber = params.radNumber;\n      bizagi.referrerParams.page = params.page || 1;\n      data.IsFavorite = false;\n      data.IsOpen = false;\n      bizagi.referrerParams.referrer = bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_SEARCH;\n      //bizagi.referrerParams.referrer = bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID;\n      // one result\n      if (data.cases.lstIdCases.length == 0) {\n        //show no results found\n        self.showNoResults(referrerParams);\n      } else if (data.cases.rows.length == 1) {\n\n        self.showSearch(data, params);\n\n\n      } else if (data.cases.rows.length >= 1) {\n        self.showSearch(data, referrerParams);\n      }\n    });\n  },\n\n  /*\r\n     *   Shows search results\r\n     */\n  showSearch: function showSearch(data, parameters) {\n    var self = this;\n    // Shows a dialog widget\n    bizagi.referrerParams.requestGlobalForm = true;\n\n    // define params to back button\n    bizagi.referrerParams.referrerBackButton = bizagi.referrerParams.referrerBackButton || bizagi.context.widget || bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID;\n\n    self.publish(\"changeWidget\", {\n      widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_SEARCH,\n      data: data,\n      referrerParams: parameters }).\n    done(function () {\n      // Hide the container pagination:\n      if (bizagi.util.isEmpty($(\"#footer #casesPagination\").html().trim())) {\n        $(\"#footer #casesPagination\").hide();\n      }\n\n    });\n\n    if (bizagi.util.isTabletDevice()) {\n      $(\"#menu-items #search\").trigger(\"closePopUp\");\n    }\n\n    // Simulate a click on the button after a successful search\n    //  $('#menu-toggler').trigger('click');\n  },\n\n  showNoResults: function showNoResults(referrerParams) {\n    var self = this;\n    var originarlColor = $(\"#menuQuery\").css(\"color\");\n\n    $(\"#menuQuery\").css(\"color\", \"#f88f88\");\n    setTimeout(function () {\n      $(\"#menuQuery\").css(\"color\", originarlColor);\n    }, 5000);\n\n    if (bizagi.detectDevice() == \"smartphone_ios\" || bizagi.detectDevice() == \"smartphone_android\") {\n      self.showSearch({ \"noresults\": referrerParams.radNumber }, referrerParams);\n    }\n\n  },\n\n  /*\r\n     *   Show process\r\n     */\n  redirectToProcess: function redirectToProcess(idCase) {\n    var self = this;\n    // Executes routing action\n    self.publish(\"executeAction\", {\n      action: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,\n      idCase: idCase,\n      onlyUserWorkItems: \"false\" });\n\n  },\n  /*\r\n     *   Misc method to format cell values\r\n     */\n  formatRequest: function formatRequest(value) {\n    return value;\n  },\n  /**\r\n     * Misc method to render categories\r\n     */\n  formatCategories: function formatCategories(value) {\n    return value;\n  },\n  isArray: function isArray(value) {\n    if (_typeof(value) == 'object') {\n      return true;\n    } else {\n      return false;\n    }\n  },\n  isDate: function isDate(value) {\n    value = value || '';\n    var state = false;\n    var slash = typeof value == 'string' ? value.split(\"/\") : '';\n    try {\n      // Check format int/int/int\n      if (slash.length == 3) {\n        var date = new Date(value);\n        if (date.getYear() > 0) {\n          state = true;\n        }\n      }\n    } catch (e) {\n      state = false;\n    }\n\n    return state;\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /*\r\n                                                                                                                                                                                                                                                                                                                                                                               *   Name: BizAgi Workportal Render Widget Controller\r\n                                                                                                                                                                                                                                                                                                                                                                               *   Author: Diego Parra\r\n                                                                                                                                                                                                                                                                                                                                                                               *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                               *   -   This script will define a base class to to define the render widget\r\n                                                                                                                                                                                                                                                                                                                                                                               *       the rendering module is loaded here\r\n                                                                                                                                                                                                                                                                                                                                                                               */\n\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.render\", {}, {\n\n  /*\r\n                                                                                  *   Returns the widget name\r\n                                                                                  */\n  getWidgetName: function getWidgetName() {\n    return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_RENDER;\n  },\n\n  /*\r\n     *   Constructor\r\n     */\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n\n    // Check if the required params are filled\n    if (bizagi.util.isEmpty(params.idCase)) {\n\n      if (!bizagi.util.isEmpty(window.location.hash)) {\n        // Check in the hash\n        var hashParams = bizagi.util.getHashParams();\n\n        // Set the first hash param as the idCase\n        if (hashParams.length > 1) {\n          params.idCase = hashParams[1];\n          self.isConfiguredFromHash = true;\n        }\n\n        // Set the second hash param as the idWorkitem\n        if (hashParams.length > 2) {\n          params.idWorkitem = hashParams[2];\n        }\n      } else if (!bizagi.util.isEmpty(window.location.search)) {\n        var queryString = bizagi.util.getQueryString();\n\n        // Set idCase param from query string\n        if (queryString[\"idCase\"]) {\n          params.idCase = queryString[\"idCase\"];\n          self.isConfiguredFromHash = true;\n        } else\n\n          // Set guid param from query string\n          if (queryString[\"guid\"]) {\n            params.guid = queryString[\"guid\"];\n            self.isConfiguredFromHash = true;\n          }\n        // Set idWorkitem param from query string\n        if (queryString[\"idWorkitem\"]) {\n          params.idWorkitem = queryString[\"idWorkitem\"];\n        }\n      }\n    }\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n  },\n\n  /*\r\n     *   Renders the content for the current controller\r\n     *   Returns a deferred because it has to load the current user\r\n     */\n  renderContent: function renderContent() {\n    var self = this;\n    var template = self.getTemplate(\"render\");\n    var summaryDeferred = new $.Deferred();\n    var details = {};\n    // Check if the required params are filled\n    if (bizagi.util.isEmpty(self.params.idCase) && bizagi.util.isEmpty(self.params.guid)) {\n      self.changeWidget(bizagi.workportal.currentInboxView);\n      return null;\n    }\n    details = self.params.idCase ?\n    {\n      idCase: self.params.idCase,\n      eventAsTasks: self.params.eventAsTasks,\n      onlyUserWorkItems: self.params.onlyUserWorkItems,\n      idWorkitem: self.params.idWorkitem,\n      isOfflineForm: self.params.isOfflineForm || false } :\n\n    {\n      guid: self.params.guid,\n      eventAsTasks: self.params.eventAsTasks,\n      onlyUserWorkItems: self.params.onlyUserWorkItems,\n      idWorkitem: self.params.idWorkitem,\n      isOfflineForm: self.params.isOfflineForm || false };\n\n    // Check if the required params are filled\n    if (bizagi.util.isEmpty(self.params.idWorkitem) && self.isConfiguredFromHash) {\n      if (!bizagi.util.isEmpty(self.params.idCase)) self.executeAction(bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING, { idCase: self.params.idCase });else\n      if (!bizagi.util.isEmpty(self.params.guid)) self.executeAction(bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING, { guid: self.params.guid });\n      return null;\n    }\n\n    // Render base template\n    self.content = $.tmpl(template);\n\n    // Render Form Tab\n    $.when(\n    self.dataService.summaryCaseDetails(details)).done(function (data) {\n\n      // Define global context into the comments section\n      // they need know global context to eval if stop interval\n      // or keep running, bizagi.util.setInterval\n      bizagi.util.setContext({\n        idCase: data.idCase || null,\n        caseNumber: data.caseNumber || null,\n        widget: self.getWidgetName(),\n        idWorkitem: self.params.idWorkitem || null,\n        idTask: self.params.idTask || null,\n        isOfflineForm: self.params.isOfflineForm || false });\n\n      data[\"params\"] = self.params;\n      //check if show event tab or not\n      if (data[\"countEvents\"] >= 1) {\n        for (var i = 0; i < data[\"currentState\"].length; i++) {\n          if (data[\"currentState\"][i][\"isEvent\"] == \"true\" && data[\"currentState\"][i][\"idWorkItem\"] == data.params.idWorkitem) {\n            data[\"countEvents\"] = data[\"countEvents\"] - 1;\n          }\n        }\n      }\n      data[\"showEvents\"] = data[\"countEvents\"] >= 1 ? true : false;\n\n      //check if the activity can be released\n      var releaseCurrentActivity = $.grep(data.currentState, function (activity) {\n        return activity.idWorkItem === data.params.idWorkitem && activity.allowReleaseActivity;\n      });\n      data[\"allowReleaseActivity\"] = releaseCurrentActivity.length === 1 ? releaseCurrentActivity[0].allowReleaseActivity : false;\n\n      summaryDeferred.resolve(self.renderSummary(data));\n    });\n\n\n    // Check if the content is already in dom\n    var includedInDom = self.content.parents(\"body\").length > 0;\n    if (includedInDom) {\n      self.renderForm();\n    } else {\n      // Wait until the dom is ready to execute the rendering, because some controls need references to full DOM\n      // (grids and uploads)\n      self.subscribeOneTime(\"onWidgetIncludedInDOM\", function () {\n\n        // Load render page\n        self.renderForm({\n          idCase: self.params.idCase,\n          idWorkitem: self.params.idWorkitem,\n          idTask: self.params.idTask,\n          radNumber: self.params.radNumber,\n          withOutGlobalForm: self.params.withOutGlobalForm || false,\n          isOfflineForm: self.params.isOfflineForm || false,\n          messageForm: self.params.messageForm || \"\" });\n\n      });\n    }\n\n    // Synchronize deferreds to resolve method\n    return summaryDeferred.promise();\n  },\n\n  /*\r\n     *   Renders the summary component of the widget\r\n     */\n  renderSummary: function renderSummary(data) {\n    var self = this;\n    var content = self.getContent();\n    var cache = {};\n    var htmlContent = \"\";\n    var security = new bizagi.workportal.command.security(self.dataService);\n\n    data.showComments = true;\n\n    $.when(security.checkSecurityPerm(\"PrintableVersion\"), security.checkSecurityPerm(\"StateLog\"), security.checkSecurityPerm(\"GraphicQuery\")).done(function (PrintableVersion, StateLog, GraphicQuery) {\n      data.printableVersion = PrintableVersion;\n      data.stateLog = StateLog;\n      data.graphicQuery = GraphicQuery;\n\n      //Hide summary case tabs when idCase = 0\n      if (data.idCase == 0) {\n        setTimeout(function () {\n          $(\"div.ui-bizagi-wp-app-inbox-description-container \\\r\n                    div.ui-bizagi-loading-message \\\r\n                    div.ui-bizagi-loading-message-center \\\r\n                    div.ui-bizagi-loading-icon\").hide();\n        }, 1000);\n\n        return;\n      }\n\n      var summary = $.tmpl(self.caseSummaryTemplate, $.extend(data, { security: bizagi.menuSecurity })).appendTo(self.getComponentContainer(\"summary\"));\n\n      // Format invariant dates\n      bizagi.util.formatInvariantDate(content, self.getResource(\"dateFormat\") + \" \" + self.getResource(\"timeFormat\"));\n\n\n      // Delegate events for parent process\n      $(\"#details\", summary).delegate(\".summaryLink\", \"click\", function () {\n        self.routingExecute($(this));\n      });\n\n      // jQuery-ui tabs\n      $(\"#ui-bizagi-details-tabs\", content).tabs({\n        active: -1,\n        create: function create(event, ui) {\n          $(this).tabs(\"option\", \"active\", 0);\n        },\n        activate: function activate(event, ui) {\n          bizagi.util.setContext({\n            commentsFocus: false });\n\n          switch (ui.newPanel.prop('id')) {\n            case \"comments\":\n              if (cache[\"comments\"] == undefined) {\n                // Extend render with comments\n                $.extend(self, {}, bizagi.workportal.comments);\n\n                // Define canvas\n                data.canvas = $(\"#comments\", self.getComponentContainer(\"summary\"));\n                data.readOnly = $(ui.tab).data('isclosed') ? true : false;\n\n                $.when(self.renderComments(data)).\n                done(function (htmlContent) {\n                  cache[\"comments\"] = htmlContent;\n                });\n              }\n              bizagi.util.setContext({\n                commentsFocus: true });\n\n              break;\n            case \"subprocess\":\n              if (cache[\"subprocess\"] == undefined) {\n                $.when(\n                self.dataService.summarySubProcess({\n                  idCase: self.params.idCase })).\n\n                done(function (subprocess) {\n\n                  $.each(subprocess.subProcesses, function (key, value) {\n                    var custData = subprocess.subProcesses[key].custData;\n                    for (var i = 0; i < custData.length; i++) {\n                      if (custData[i] == null) {\n                        custData[i] = \"\";\n                      }\n                    }\n                  });\n\n                  htmlContent = $.tmpl(self.caseSummaryTemplateSubprocess, subprocess);\n                  htmlContent.appendTo($(\"#subprocess\", self.getComponentContainer(\"summary\")));\n                  cache[\"subprocess\"] = htmlContent;\n\n                  // Define Events for subprocess tab\n                  htmlContent.delegate(\".summaryLink\", \"click\", function () {\n                    self.routingExecute($(this));\n                  });\n                });\n              }\n              break;\n\n            case \"assignees\":\n              if (cache[\"assignees\"] == undefined) {\n                $.when(\n                self.dataService.summaryAssigness({\n                  idCase: self.params.idCase })).\n\n                done(function (assignees) {\n                  // Generates  lists of unique assignees for Events\n                  var eventsUniqueList = [];\n                  $.each(assignees.events.split(\", \"), function (i, el) {\n                    if ($.inArray(el, eventsUniqueList) === -1) eventsUniqueList.push(el);\n                  });\n                  assignees.events = eventsUniqueList.join(\", \");\n\n                  // Generates  lists of unique assignees for activities\n                  var activitiesUniqueList = [];\n                  $.each(assignees.activities.split(\", \"), function (i, el) {\n                    if ($.inArray(el, activitiesUniqueList) === -1) activitiesUniqueList.push(el);\n                  });\n                  assignees.activities = activitiesUniqueList.join(\", \");\n\n                  htmlContent = $.tmpl(self.caseSummaryTemplateAssigness, assignees);\n                  htmlContent.appendTo($(\"#assignees\", self.getComponentContainer(\"summary\")));\n                  cache[\"assignees\"] = htmlContent;\n                });\n              }\n              break;\n\n            case \"events\":\n              if (cache[\"events\"] == undefined) {\n                $.when(\n                self.dataService.summaryCaseEvents({\n                  idCase: self.params.idCase })).\n\n                done(function (events) {\n                  htmlContent = $.tmpl(self.caseSummaryTemplateEvents, events);\n                  htmlContent.appendTo($(\"#events\", self.getComponentContainer(\"summary\")));\n                  cache[\"events\"] = htmlContent;\n\n                  htmlContent.delegate(\".summaryLink\", \"click\", function () {\n                    self.routingExecute($(this));\n                  });\n                });\n              }\n              break;\n\n            case \"activities\":\n              if (cache[\"activities\"] == undefined) {\n                $.when(\n                self.dataService.summaryActivities({\n                  data: data,\n                  idWorkitem: self.params.idWorkitem })).\n\n                done(function (activities) {\n                  activities[\"idCase\"] = self.params.idCase;\n                  activities[\"idWorkflow\"] = self.params.idWorkflow;\n\n                  //To solve QA-2124\n                  var defaultDateFormat = bizagi.localization.getResource(\"dateFormat\");\n                  var defaultTimeFormat = bizagi.localization.getResource(\"timeFormat\");\n                  var fullFormat = defaultDateFormat + ' ' + defaultTimeFormat;\n\n                  htmlContent = $.tmpl(self.caseSummaryTemplateActivities, activities);\n                  bizagi.util.formatInvariantDate(htmlContent, fullFormat);\n                  htmlContent.appendTo($(\"#activities\", self.getComponentContainer(\"summary\")));\n                  cache[\"activities\"] = htmlContent;\n\n                  htmlContent.delegate(\".summaryLink\", \"click\", function () {\n                    self.routingExecute($(this));\n                  });\n                });\n              }\n              break;}\n\n        } });\n\n    });\n  },\n\n\n  /*\r\n     *   Renders the form component of the widget\r\n     */\n  renderForm: function renderForm(params) {\n    var self = this,resultRender;\n\n    var renderContainer = self.getComponentContainer(\"render\");\n    if (!params.withOutGlobalForm) {\n      // it has't activities and global form\n      var proxyPrefix = _typeof(self.dataService.serviceLocator.proxyPrefix) != undefined ? self.dataService.serviceLocator.proxyPrefix : \"\";\n      var database = _typeof(self.dataService.database) != undefined ? self.dataService.database : \"\";\n\n\n      // Load render page\n      var rendering = self.rendering = new bizagi.rendering.facade({ \"proxyPrefix\": proxyPrefix, \"database\": database });\n      // Executes rendering into render container\n      resultRender = rendering.execute($.extend(params, {\n        canvas: renderContainer,\n        menu: self.menu }));\n\n\n      // Attach handler to render container to subscribe for routing events\n      renderContainer.bind(\"routing\", function (context, triggerparams) {\n        // Executes routing action\n\n        var params = {\n          action: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,\n          idCase: self.params.idCase,\n          fromTask: self.params.fromTask || self.params.idTask,\n          fromWorkItemId: self.params.fromWorkItemId || self.params.idWorkitem,\n          isOfflineForm: self.params.isOfflineForm,\n          formsRenderVersion: self.params.formsRenderVersion,\n          onClose: function onClose() {\n            // If the user closes the dialog we need to redirect to inbox widget\n            self.publish(\"changeWidget\", {\n              widgetName: bizagi.workportal.currentInboxView });\n\n          } };\n\n        params = $.extend(params, triggerparams);\n        self.publish(\"executeAction\", params);\n      });\n\n      //\n      renderContainer.bind(\"oldrenderintegration\", function () {\n        if (bizagi.oldrenderevent == undefined) {\n          bizagi.oldrenderevent = true; // has been loaded\n          var eventMethod = window.addEventListener ? \"addEventListener\" : \"attachEvent\";\n          var eventer = window[eventMethod];\n          var messageEvent = eventMethod == \"attachEvent\" ? \"onmessage\" : \"message\";\n\n          // Listen to message from child window\n          eventer(messageEvent, function (e) {\n            e.stopPropagation();\n            self.publish(\"executeAction\", {\n              action: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,\n              idCase: e.data });\n\n          }, false);\n        }\n\n        self.publish(\"changeWidget\", {\n          widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_OLDRENDERINTEGRATION,\n          idCase: self.params.idCase,\n          idWorkitem: self.params.idWorkitem,\n          idTask: self.params.idTask,\n          onlyUserWorkItems: self.params.onlyUserWorkItems,\n          referrer: self.params.referrer,\n          eventAsTasks: self.params.eventAsTasks });\n\n\n      });\n    } else {\n      var errorTemplate = self.workportalFacade.getTemplate(\"info-message\");\n      var message = params.messageForm !== \"\" ? params.messageForm : self.resources.getResource(\"render-without-globalform\");\n\n      if (typeof self.params != \"undefined\" && typeof self.params.isOfflineForm !== \"undefined\" && self.params.isOfflineForm == true) {\n        message = bizagi.util.getMessageFromNetworkState(self.dataService.online);\n      }\n\n      var errorHtml = $.tmpl(errorTemplate, {\n        message: message });\n\n      // Remove loading icon from summary container\n      errorHtml.appendTo(renderContainer);\n\n      resultRender = $.Deferred();\n      resultRender.fail();\n    }\n\n    // Keep reference to rendering facade\n    self.renderingFacade = rendering;\n\n    // Resize layout\n    self.resizeLayout();\n\n    return resultRender;\n  },\n\n\n  routingExecute: function routingExecute(element) {\n    // Executes routing action\n    if (element == undefined) {\n      return false;\n    }\n\n    var self = this;\n\n    var idCase = element.find(\"#idCase\").val() || self.params.idCase;\n    var idWorkflow = element.find(\"#idWorkflow\").val() || self.params.idWorkflow;\n    var idWorkItem = element.find(\"#idWorkItem\").val() || element.parent().find(\"#idWorkItem\").val();\n    var idTask = element.find(\"#idTask\").val();\n    var eventAsTasks = element.find(\"#eventAsTasks\").val() || false;\n\n    self.publish(\"executeAction\", {\n      action: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,\n      idCase: idCase,\n      idWorkflow: idWorkflow,\n      idWorkItem: idWorkItem,\n      idTask: idTask,\n      eventAsTasks: eventAsTasks });\n\n\n    return true;\n  },\n\n  dispose: function dispose() {\n    var self = this;\n\n    // Dispose the rendering binds\n    setTimeout(function () {\n      if (self.rendering) {\n        var renderContainer = self.rendering.canvas;\n        renderContainer.off();\n        self.rendering.dispose();\n      }\n    }, bizagi.override.disposeTime || 50);\n\n    // Call base\n    self._super();\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /*\r\n                                                                                                                                                                                                                                                                                                                                                                               *   Name: BizAgi Desktop List Cases implementation\r\n                                                                                                                                                                                                                                                                                                                                                                               *   Author: Kevin Alvarado\r\n                                                                                                                                                                                                                                                                                                                                                                               *   Used for Search, Queries Result and InboxGrid Desktop\r\n                                                                                                                                                                                                                                                                                                                                                                               *   Because they share show cases as list \r\n                                                                                                                                                                                                                                                                                                                                                                               */\n\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.listCases\", {}, {\n  /*\r\n                                                                                     *   Returns the widget name\r\n                                                                                     */\n  getWidgetName: function getWidgetName() {\n    return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_LISTCASES;\n  },\n\n  /**\r\n     * Set the table with the fixed thead\r\n     * @param {Json} params TableElement,groupByCaseNumber,floatOptions\r\n     */\n  setTableHeadFixed: function setTableHeadFixed(params) {\n    params.TableElement.floatThead(params.floatOptions);\n\n    if (params.groupByCaseNumber && bizagi.util.isIE()) {\n      params.TableElement.find(\"tbody > tr.ui-bizagi-wp-app-inbox-grouped-trtag-hide\").hide();\n    }\n  },\n  /**\r\n     * create a new instance and start to show the checkboxGroup for each activity\r\n     */\n  _startQuickActions: function _startQuickActions() {\n    var self = this,\n    _QActionsStared = self.quickActionsInstance !== undefined,\n    _params = {\n      getContainerSelector: self.getQuickActionContainerSelector.bind(self),\n      checkAllSelector: self.getQuickActionCheckAllContainerSelector(),\n      refreshShowedResults: self.updateResults.bind(self) };\n\n    if (!_QActionsStared)\n    self.quickActionsInstance = new bizagi.workportal.widgets.quickActions(self.workportalFacade, self.dataService, _params);\n  },\n\n  /**\r\n      * Refresh page results\r\n      */\n  updateResults: function updateResults() {\n    var self = this;\n    var _params = bizagi.util.tryCatch(function () {return bizagi.referrerParams.changeProcessOptions;}, {});\n    self.changeProcess(_params);\n  },\n\n  /**\r\n      * render quickActions in parentTemplate\r\n      * @param {Jquery Template} parentTemplate \r\n      */\n  _QuickActionsRenderIn: function _QuickActionsRenderIn(parentTemplate, workItemsInfo, quickActions) {\n    var self = this,\n    _QActionsContainer = parentTemplate.find(\"#contentQuickActions\");\n\n    self.quickActionsInstance.setDataToExecute(workItemsInfo, quickActions);\n    self.quickActionsInstance.renderIn(_QActionsContainer);\n    self.quickActionsInstance.renderCheckboxGroup(parentTemplate);\n  },\n\n  /**\r\n      * Filter the data from the workItems to send to QuickAction Widget.\r\n      * Return a dictionary by the workItem id as key and its information as value.\r\n      * @param {*} headers\r\n      * @param {*} rows\r\n      */\n  _getWorkItemsInfo: function _getWorkItemsInfo(headers, rows) {\n    var self = this,\n    _finalWorkItems = {};\n\n    var indexWorkItems = self._getIndexFromTableColumn(headers, \"order\", \"T_IDTASK\");\n    var indexCaseNumber = self._getIndexFromTableColumn(headers, \"order\", \"T_RADNUMBER\");\n\n    for (var j = 0; j < rows.length && indexWorkItems !== -1; j++) {\n      var _rowInfo = rows[j].fields,\n      _rowWorkItems = _rowInfo[indexWorkItems].workitems;\n\n      for (var k = 0; k < _rowWorkItems.length && indexCaseNumber !== -1; k++) {\n        var _workItem = _rowWorkItems[k];\n\n        _workItem.idCase = rows[j].id;\n        _workItem.caseNumber = _rowInfo[indexCaseNumber];\n        _finalWorkItems[_workItem.idWorkItem] = _workItem;\n      }\n    }\n\n    return _finalWorkItems;\n  },\n\n  /**\r\n      * Get the index of the column for workItems\r\n      */\n  _getIndexFromTableColumn: function _getIndexFromTableColumn(columnTitle, columnName, name) {\n    return columnTitle.findIndex(function (column) {\n      return column[columnName].toUpperCase() === name;\n    });\n  },\n\n  /**\r\n      * Return the selector of the quick action checkbox\r\n      * @param {*} workItem \r\n      */\n  getQuickActionCheckAllContainerSelector: function getQuickActionCheckAllContainerSelector() {\n    return \"#ui-quickActions-all-processes\";\n  },\n\n  /**\r\n      * Return the selector of the quick action checkbox\r\n      * @param {*} workItem \r\n      */\n  getQuickActionContainerSelector: function getQuickActionContainerSelector(id) {\n    return \"#ui-quickActions-checkbox-\" + id;\n  },\n\n  /*\r\n     *   Shows a popup with the case information\r\n     */\n  showCase: function showCase(idCase, idWorkflow) {\n    var self = this;\n    var content = self.getContent();\n    var caseSummaryContainer = $(\"#contentDesc\", content);\n    var cache = {};\n    var htmlContent = \"\";\n\n    // Update internal variable\n    self.idCase = idCase;\n\n    caseSummaryContainer.empty();\n\n    // Don't search data when there is no case\n    if (self.idCase == 0) {\n      return;\n    }\n\n    // Render Form Tab\n    $.when(self.dataService.summaryCaseDetails({\n      idCase: self.idCase })).\n\n    done(function (data) {\n      var adhocProcessId = null;\n      var isAdhoc = false;\n      if (!data.isAdhocProcess || typeof data.isAdhocProcess === 'undefined') data.isAdhocProcess = false;\n      if (data.isAdhocProcess) {\n        adhocProcessId = data.idAdhocProcess;\n        isAdhoc = true;\n      }\n      data.hasComments = data.hasComments == 'true' ? true : false;\n\n      // Get security\n      var security = new bizagi.workportal.command.security(self.dataService);\n      data.graphicQuery = security.checkSecurityPerm(\"GraphicQuery\");\n\n      data.enableFeatureShowTimelineButton = bizagi.override.enableFeatureShowTimelineButton;\n      data.enableTimelineByProcessType = self.isAvailableTimelineByProcessType(data.isAdhocProcess);\n\n      if (data.currentState && data.currentState.length > 0) {\n        data.currentState.forEach(function (currentState) {\n          if (!currentState.idTask) {\n            currentState.idTask = 0;\n          }\n          if (!currentState.state) {\n            currentState.state = currentState.displayName || \" \";\n          }\n        });\n      }\n\n      if (data.process === \"undefined\" || data.process === \"\" || typeof data.process === \"undefined\") {\n        data.process = false;\n      }\n\n      if (data.processPath === \"undefined\" || data.processPath === \"\" || typeof data.processPath === \"undefined\") {\n        data.processPath = false;\n      }\n\n\n      var renderedTemplate = $.tmpl(self.caseSummaryTemplate, $.extend(data, { security: bizagi.menuSecurity })).appendTo(caseSummaryContainer);\n      self.callTaskDescription(data, renderedTemplate);\n\n      // Format invariant dates\n      bizagi.util.formatInvariantDate(content, self.getResource(\"dateFormat\") + \" \" + self.getResource(\"timeFormat\"));\n\n\n      // Delegate events for parent process\n      $(\"#details\", renderedTemplate).delegate(\".summaryLink\", \"click\", function () {\n        self.routingExecute($(this));\n        caseSummaryDialog.dialog('close');\n      });\n\n      var caseSummaryDialog = renderedTemplate;\n\n      // jQuery-ui tabs\n      $(\"#ui-bizagi-details-tabs\", content).tabs({\n        active: -1,\n        create: function create(event, ui) {\n          $(this).tabs(\"option\", \"active\", 0);\n        },\n        \"activate\": function activate(event, ui) {\n          var panel = ui == undefined ? \"formSummary\" : ui.newPanel.attr('id');\n          switch (panel) {\n            case \"comments\":\n              if (cache[\"comments\"] == undefined) {\n                // Extend render with comments\n                $.extend(self, {}, bizagi.workportal.comments);\n\n                // Define canvas\n                data.canvas = $(\"#comments\");\n                data.readOnly = true;\n\n                $.when(self.renderComments(data)).\n                done(function (htmlContent) {\n                  cache[\"comments\"] = htmlContent;\n                });\n              }\n              bizagi.util.setContext({\n                commentsFocus: true });\n\n              break;\n            case \"formSummary\":\n              if (cache[\"formSummary\"] == undefined) {\n                var canvas = $(\"#formSummary\", caseSummaryContainer);\n\n                // Define action when render form has not been migrated\n                canvas.bind(\"oldrenderintegration\", function (e) {\n                  if (e.isPropagationStopped()) {\n                    return;\n                  }\n                  e.stopPropagation();\n\n                  var template = self.getTemplate(\"inbox-common-case-summary-oldrender\");\n                  var data = {};\n\n                  bizagi.oldrenderevent = true; // has been loaded\n                  var eventMethod = window.addEventListener ? \"addEventListener\" : \"attachEvent\";\n                  var eventer = window[eventMethod];\n                  var messageEvent = eventMethod == \"attachEvent\" ? \"onmessage\" : \"message\";\n\n                  // Listen to message from child window\n                  eventer(messageEvent, function (e) {\n                    e.stopPropagation();\n                    self.publish(\"executeAction\", {\n                      action: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,\n                      idCase: e.data });\n\n                  }, false);\n\n                  // Define wirkitem and idtask\n                  $.when(self.dataService.getWorkitems({\n                    idCase: self.idCase,\n                    onlyUserWorkItems: true,\n                    eventAsTasks: true })).\n                  done(function (getWorkitems) {\n                    // verify workitem, in some cases these variables are not available\n                    if (_typeof(getWorkitems.workItems) == \"object\" && getWorkitems.workItems.length >= 1) {\n                      // Case Open\n                      var idWorkitem = getWorkitems.workItems[0]['idWorkItem'];\n                      var idTask = getWorkitems.workItems[0]['idTask'];\n\n                      for (i = 0; i < getWorkitems.workItems.length; i++) {\n                        if (getWorkitems.workItems[i]['idCase'] == self.idCase) {\n                          idWorkitem = getWorkitems.workItems[i]['idWorkItem'];\n                          idTask = getWorkitems.workItems[i]['idTask'];\n                          break;\n                        }\n                      }\n\n                      data.url = self.dataService.serviceLocator.getUrl(\"old-render\") + \"?PostBack=1&idCase=\" + self.idCase + \"&idWorkitem=\" + idWorkitem + \"&idTask=\" + idTask + \"&isSummary=1\";\n                    } else {\n                      // Case closed\n                      data.url = self.dataService.serviceLocator.getUrl(\"old-render\") + \"?PostBack=1&idCase=\" + self.idCase + \"&isSummary=1\";\n                    }\n\n                    // Render content\n                    canvas.empty();\n                    $.tmpl(template, data).appendTo(canvas);\n                    //Set styles\n                    self.iframeOldRender($(\"iframe\", canvas));\n                  });\n                });\n\n                var params = {\n                  idCase: self.idCase };\n\n\n                $.when(self.dataService.getCaseFormsRenderVersion(params)).\n                done(function (formsVersion) {\n                  if (formsVersion.formsRenderVersion == 1) {\n                    canvas.trigger(\"oldrenderintegration\");\n                  } else {\n                    $.when(\n                    self.renderSummaryForm($(\"#formSummary\", renderedTemplate))).\n                    done(function () {\n                      htmlContent = $(\"#formSummary\", renderedTemplate).html();\n                      cache[\"formSummary\"] = htmlContent;\n                    });\n                  }\n                });\n              }\n              break;\n            case \"subprocess\":\n              if (cache[\"subprocess\"] == undefined) {\n                $.when(\n                self.dataService.summarySubProcess({\n                  idCase: self.idCase })).\n\n                done(function (subprocess) {\n                  htmlContent = $.tmpl(self.caseSummaryTemplateSubprocess, subprocess);\n                  htmlContent.appendTo($(\"#subprocess\", renderedTemplate));\n                  cache[\"subprocess\"] = htmlContent;\n\n                  // Define Events for subprocess tab\n                  htmlContent.delegate(\".summaryLink\", \"click\", function () {\n                    self.routingExecute($(this));\n                    caseSummaryDialog.dialog('close');\n                  });\n                });\n              }\n              break;\n            case \"assignees\":\n              if (cache[\"assignees\"] == undefined) {\n                $.when(\n                self.dataService.summaryAssigness({\n                  idCase: self.idCase,\n                  preview: true })).\n\n                done(function (assignees) {\n                  // Generates  lists of unique assignees for Events\n                  var eventsUniqueList = [];\n                  $.each(assignees.events.split(\", \"), function (i, el) {\n                    if ($.inArray(el, eventsUniqueList) === -1) eventsUniqueList.push(el);\n                  });\n                  assignees.events = eventsUniqueList.join(\", \");\n\n                  htmlContent = $.tmpl(self.caseSummaryTemplateAssigness, assignees);\n                  htmlContent.appendTo($(\"#assignees\", renderedTemplate));\n                  cache[\"assignees\"] = htmlContent;\n                });\n              }\n              break;\n            case \"events\":\n              if (cache[\"events\"] == undefined) {\n                $.when(\n                self.dataService.summaryCaseEvents({\n                  idCase: self.idCase })).\n\n                done(function (events) {\n                  htmlContent = $.tmpl(self.caseSummaryTemplateEvents, events);\n                  htmlContent.appendTo($(\"#events\", renderedTemplate));\n                  cache[\"events\"] = htmlContent;\n\n                  htmlContent.delegate(\".summaryLink\", \"click\", function () {\n                    self.routingExecute($(this));\n                    caseSummaryDialog.dialog('close');\n                  });\n                });\n              }\n              break;}\n\n        } });\n\n\n\n      // jquery UI Button work on it button\n      $(\".workonitRow\", renderedTemplate).button();\n\n      // Add click to timeline icon\n      $(\".js-show-timeline\", renderedTemplate).click(function (event) {\n        var caseNumber = $.trim($(this).closest(\"div.ui-bizagi-wp-app-inbox-processes-title\").find(\"span.js-case-number\").text());\n        self.showTimeLine({ radNumber: caseNumber, idCase: idCase });\n      });\n\n      // Add click to view workflow\n      $(\"#ui-bizagi-wp-app-inbox-description-container .ui-bizagi-wp-app-inbox-cases-ico-view\", content).click(function () {\n        if (isAdhoc) {\n          self.showGraphicQuery({ idCase: idCase, idWorkflow: idWorkflow, isAdhoc: true, idProcess: adhocProcessId });\n        } else {\n          self.showGraphicQuery({ idCase: idCase, idWorkflow: idWorkflow });\n        }\n      });\n\n\n\n      // Bind events for events and process on summary case\n      $(\".workonitRow\", renderedTemplate).click(function () {\n        // Executes routing action\n        caseSummaryDialog.dialog('close');\n        var idWorkItem = $(this).parent().find(\"#idWorkItem\").val();\n        self.publish(\"executeAction\", {\n          action: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,\n          idCase: self._getIdCase(data, idWorkItem),\n          idWorkflow: idWorkflow,\n          idTask: $(this).parent().find(\"#idTask\").val(),\n          idWorkItem: idWorkItem });\n\n      });\n\n      // Set buttons\n      var buttons = {};\n      buttons[bizagi.localization.getResource(\"workportal-case-dialog-box-close\")] = function () {\n        caseSummaryContainer.empty();\n        renderedTemplate.remove();\n        $(\"#ui-bizagi-wp-app-inbox-description-container\").remove();\n      };\n\n      caseSummaryDialog.dialog({\n        modal: true,\n        title: data.process,\n        width: 1000,\n        height: 600,\n        draggable: true,\n        resizable: true,\n        buttons: buttons,\n        close: function close() {\n          caseSummaryContainer.empty();\n          renderedTemplate.remove();\n          $(\"#ui-bizagi-wp-app-inbox-description-container\").remove();\n        } });\n\n\n    });\n  },\n\n  /**\r\n      * Returns the idCase or the parent idCase\r\n      * @param {JSON} data \r\n      * @param {String} workItemId \r\n      * @returns \r\n      */\n  _getIdCase: function _getIdCase(data, workItemId) {\n    var _parent = $.grep(data.currentState, function (item) {\n      return item.idWorkItem == workItemId;\n    })[0],\n    _hasParent = _parent && _parent.idCase !== undefined;\n\n    return _hasParent ? _parent.idCase : data.idCase;\n  },\n\n  /**\r\n      * \r\n      * Call task description widget \r\n      */\n\n  callTaskDescription: function callTaskDescription(data, summary) {\n    var self = this;\n    var width = 720;\n    var taskDescriptionParams = {\n      classNeedsModal: \"task_description_needs_modal\",\n      width: width };\n\n    new bizagi.workportal.widgets.task.description(self.workportalFacade, self.dataService, taskDescriptionParams).renderManyTasksDescription(data.currentState, summary);\n  },\n\n\n  /*\r\n     *   Renders the summary form inside a given container\r\n     */\n  renderSummaryForm: function renderSummaryForm(container) {\n    var self = this;\n\n    var proxyPrefix = typeof self.dataService.serviceLocator.proxyPrefix !== \"undefined\" ?\n    self.dataService.serviceLocator.proxyPrefix : \"\";\n\n    bizagi.loader.start(\"rendering\").then(function () {\n      // Load render page\n      var rendering = new bizagi.rendering.facade({ \"proxyPrefix\": proxyPrefix });\n\n      // Executes rendering into render container\n      rendering.execute({\n        canvas: container,\n        summaryForm: true,\n        idCase: self.idCase });\n\n\n      // Keep reference to rendering facade\n      self.renderingFacade = rendering;\n\n      // Resize layout\n      setTimeout(function () {\n        self.resizeLayout();\n      }, 1000);\n    });\n  },\n\n  /**\r\n      * Validate if the timeline icon should be shown or not, depending on features endpoint\r\n      */\n  isAvailableTimelineByProcessType: function isAvailableTimelineByProcessType(isAdhocProcess) {\n    return !isAdhocProcess ||\n    isAdhocProcess && bizagi.util.isEnableFeature(\"enableTimelineOnLiveProcesses\");\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);}\n/*\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: BizAgi Workportal Render Widget Controller\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: Diego Parra\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This script will define a base class to to define the render widget\r\n                                                                                                                                                                                                                                                                                                                                                                                *       the rendering module is loaded here\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.renderform\", {}, {\n\n  /*\r\n                                                                                       *   Returns the widget name\r\n                                                                                       */\n  getWidgetName: function getWidgetName() {\n    return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_RENDER_FORM;\n  },\n\n  /*\r\n      *   Constructor\r\n      */\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n\n    // Check if the required params are filled\n    if (bizagi.util.isEmpty(params.idForm)) {\n\n      if (!bizagi.util.isEmpty(window.location.hash)) {\n        // Check in the hash\n        var hashParams = bizagi.util.getHashParams();\n\n        // Set the first hash param as the idCase\n        if (hashParams.length > 1) {\n          params.idCase = hashParams[1];\n          self.isConfiguredFromHash = true;\n        }\n\n        // Set the second hash param as the idWorkitem\n        if (hashParams.length > 2) {\n          params.idWorkitem = hashParams[2];\n        }\n      } else if (!bizagi.util.isEmpty(window.location.search)) {\n        var queryString = bizagi.util.getQueryString();\n\n        // Set idCase param from query string\n        if (queryString[\"idEntity\"]) {\n          params.idEntity = queryString[\"idEntity\"];\n          self.isConfiguredFromHash = true;\n        }\n\n        // Set idWorkitem param from query string\n        if (queryString[\"surrogateKey\"]) {\n          params.surrogateKey = queryString[\"surrogateKey\"];\n        }\n      }\n    }\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n  },\n\n  /*\r\n      *   Renders the content for the current controller\r\n      *   Returns a deferred because it has to load the current user\r\n      */\n  renderContent: function renderContent() {\n    var self = this;\n    var template = self.getTemplate(\"renderform\");\n    var summaryDeferred = new $.Deferred();\n\n    // Check if the required params are filled\n    if (bizagi.util.isEmpty(self.params.idForm)) {\n      self.changeWidget(bizagi.workportal.currentInboxView);\n      return null;\n    }\n\n    // Render base template\n    self.content = $.tmpl(template);\n\n    // Check if the content is already in dom\n    var includedInDom = self.content.parents(\"body\").length > 0;\n    if (includedInDom) {\n      self.renderForm();\n    } else {\n      // Wait until the dom is ready to execute the rendering, because some controls need references to full DOM\n      // (grids and uploads)\n      self.subscribeOneTime(\"onWidgetIncludedInDOM\", function () {\n\n        // Load render page\n        self.renderForm({\n          idEntity: self.params.idEntity,\n          surrogateKey: self.params.surrogateKey });\n\n      });\n    }\n  },\n\n  /*\r\n      *   Renders the form component of the widget\r\n      */\n  renderForm: function renderForm(params) {\n    var self = this;\n\n\n    var proxyPrefix = _typeof(self.dataService.serviceLocator.proxyPrefix) != undefined ? self.dataService.serviceLocator.proxyPrefix : \"\";\n    // Load render page\n    var rendering = new bizagi.rendering.facade({ \"proxyPrefix\": proxyPrefix });\n    var renderContainer = self.getComponentContainer(\"render\");\n\n    // Executes rendering into render container\n    rendering.execute($.extend(params, {\n      canvas: renderContainer }));\n\n\n    // Attach handler to render container to subscribe for routing events\n    renderContainer.bind(\"routing\", function () {\n      // Executes routing action\n      self.publish(\"executeAction\", {\n        action: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,\n        idCase: self.params.idCase,\n        onClose: function onClose() {\n          // If the user closes the dialog we need to redirect to inbox widget\n          self.publish(\"changeWidget\", {\n            widgetName: bizagi.workportal.currentInboxView });\n\n        } });\n\n    });\n\n    // Keep reference to rendering facade\n    self.renderingFacade = rendering;\n\n    // Resize layout\n    self.resizeLayout();\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /*\r\n                                                                                                                                                                                                                                                                                                                                                                               *   Name: BizAgi Workportal Desktop Print Version Widget Controller\r\n                                                                                                                                                                                                                                                                                                                                                                               *   Author: Edward Morales\r\n                                                                                                                                                                                                                                                                                                                                                                               *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                               *   -   This script will provide desktop overrides to implement the print version\r\n                                                                                                                                                                                                                                                                                                                                                                               */\n\n// Auto extend\nbizagi.workportal.widgets.print.extend(\"bizagi.workportal.widgets.print\", {}, {\n\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    //Load templates\n    self.loadTemplates({\n      \"print\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.print\").concat(\"#bz-wp-widget-print\"),\n      useNewEngine: false });\n\n  },\n\n  /**\r\n     *   To be overriden in each device to apply layouts\r\n     */\n  postRender: function postRender() {\n    var self = this;\n    var content = self.getContent();\n\n\n    var proxyPrefix = _typeof(self.dataService.serviceLocator.proxyPrefix) != undefined ? self.dataService.serviceLocator.proxyPrefix : \"\";\n    // Load render page\n    var facade = new bizagi.rendering.facade({ \"proxyPrefix\": proxyPrefix });\n\n    //Print all grid rows\n    var configParams = { p_all_rows: 1000000 };\n\n    $.when(facade.execute($.extend({\n      canvas: content,\n      printversion: true },\n    $.extend(self.params.params, configParams)))).done(function () {\n\n      // Remove Tabs elements\n      self.formatTabs();\n\n      // Remove Group elements\n      self.formatGroups();\n\n      // Add case details only of idCase is available\n      if (self.params.params.idCase) {\n        self.appendCaseDetails();\n      }\n\n      // Remove events to ECM control\n      self.formatECM();\n\n      // Remove events to button control\n      self.formatButton();\n\n      // format grid\n      self.formatGrid();\n\n      // format renders\n      self.formatRenderContainer();\n\n      // Remove bottons save and next\n      $(\".ui-bizagi-button-container\", content).remove();\n\n    });\n  },\n\n  formatTabs: function formatTabs() {\n    var self = this,\n    i = 0,\n    control = self.getContent(),\n    tabElement = $('.ui-tabs', control);\n\n    // Destroy tabs\n    $.each(tabElement, function (ind, element) {\n\n      // Reorder tabs content\n      var ul = $('>ul', $(element)); // header elements\n      var labels = $('>div', $(element)); // page elements\n\n      var formatContent = $(\"<div>\");\n      $.each($('li', ul), function (i) {\n        // Select all tabs element to force the content loading\n        $(element).tabs(\"option\", \"active\", i);\n\n        // add header to final content\n\n        $(formatContent).append('<h3>' + $(this).text() + '</h3>');\n\n        // Add content to final content\n        $(formatContent).append(labels[i++]);\n      });\n\n      // Empty old content and append formated\n      $(element).empty();\n      $(element).append(formatContent);\n      $(element).tabs(\"destroy\");\n    });\n  },\n\n  /* APPEND CASE DETAILS\r\n     =====================================================*/\n  appendCaseDetails: function appendCaseDetails() {\n    var self = this;\n    var control = self.getContent();\n\n    self.dataService.summaryCaseDetails({\n      idCase: self.params.params.idCase }).\n    done(function (data) {\n\n      var getState = function getState(idWorkItem, currentState) {\n        var state = \"\";\n        $.each(currentState, function (key, value) {\n          if (value.idWorkItem == idWorkItem) {\n            state = value.state || value.displayName;\n          }\n        });\n        return state;\n      };\n      // Process Metadata\n      var $caseDetails = $('<ul></ul>').addClass('ui-bz-print-case-details');\n\n      // Case Number\n      $('<li></li>').text(self.resources.getResource('workportal-widget-inboxcommon-case-number') + ' ' + data.caseNumber).appendTo($caseDetails);\n\n      // task\n      if (self.params && self.params.params && self.params.params.idWorkitem != 0) {\n        $('<li></li>').text(self.resources.getResource('workportal-widget-inboxcommon-activities-name') + ' ' + getState(self.params.params.idWorkitem, data.currentState)).appendTo($caseDetails);\n      }\n      // Created by\n      $('<li></li>').text(self.resources.getResource('workportal-widget-inboxcommon-created-by') + ' ' + data.createdBy.Name).appendTo($caseDetails);\n\n      // Creation date\n      $('<li></li>').html(self.resources.getResource('workportal-widget-inboxcommon-creation-date') + '<span class=\\\"formatDate\\\">' + data.creationDate + \"</span>\").appendTo($caseDetails);\n\n      // State expires on\n      if (typeof data.estimatedSolutionDate != \"undefined\") {\n        $('<li></li>').html(self.resources.getResource('workportal-widget-inboxcommon-state-expires-on') + '<span class=\\\"formatDate\\\">' + data.estimatedSolutionDate + \"</span>\").appendTo($caseDetails);\n      }\n\n      function setProcess(process) {\n        $('<li></li>').text(self.resources.getResource('workportal-widget-inboxcommon-process') + ' ' + process).appendTo($caseDetails);\n      }\n      // Process\n      if (data.idPlan) {\n        $.when(self.dataService.getPlan({ idPlan: data.idPlan })).done(function (responsePlan) {\n          setProcess(responsePlan.name);\n        });\n      } else\n      {\n        setProcess(data.process);\n      }\n\n      // Process path\n      if (data.processPath && data.processPath !== \"undefined\") {\n        $('<li></li>').text(self.resources.getResource('workportal-widget-inboxcommon-process-path') + ' ' + data.processPath).appendTo($caseDetails);\n      }\n\n      // Append data\n      $('.ui-bizagi-container:first', control).prepend($caseDetails);\n\n      //Format dates\n      bizagi.util.formatInvariantDate(control, self.getResource(\"dateFormat\") + \" \" + self.getResource(\"timeFormat\"));\n    });\n  },\n\n  formatGroups: function formatGroups() {\n    var self = this,\n    control = self.getContent(),\n    container = $('h3.ui-bizagi-container-group-header', control);\n\n    $.each(container, function () {\n      var containerText = $(this).text();\n\n      // Get html to container and convert to plain text\n      $(this).empty();\n      $(this).append(containerText);\n    });\n  },\n\n\n  /**\r\n     * Format ECM control\r\n     */\n  formatECM: function formatECM() {\n    var self = this,\n    control = self.getContent(),\n    container = $('.ui-bizagi-render-upload', control);\n\n    $(container).bind('ecmLoaded', function (cont) {\n      var image = $('img', cont.container);\n      var file = $(\".filename a:last\", cont.container);\n      var value = $(file).parent('li').text().replace(/^\\s+|\\s+$/g, \"\");\n\n      // Remove click event to image\n      image.unbind('click');\n\n      // Remove click event to link an parse value\n      file.unbind('click');\n      $(file).parent('li').text(value);\n\n    });\n  },\n\n  /**\r\n     * Format Button Control\r\n     */\n  formatButton: function formatButton() {\n    var self = this,\n    control = self.getContent(),\n    buttons = $('.ui-bizagi-render-button', control);\n\n    $.each(buttons, function (k, button) {\n      var value = $(button).val();\n      var parentContainer = $(button).parent();\n      $(parentContainer).empty();\n      $(parentContainer).append(\"<div class='ui-bizagi-render-button'>\" + value + \"</div>\");\n    });\n  },\n\n  /**\r\n     *  Format Grid Control\r\n     */\n  formatGrid: function formatGrid() {\n    var self = this,\n    control = self.getContent(),\n    tableControl = $('.ui-bizagi-grid-table', control);\n    pageContent = $('.ui-pg-table', control),\n    closeButton = $('.ui-jqgrid-titlebar-close', control);\n\n    // Clean paginator\n    /*$.each(pageContent, function () {\r\n    $(\"td:not[align='left'],td:not[align='center']\", $(this)).remove();\r\n    });*/\n\n    $(\"th.ui-bizagi-column-hidden, td.ui-bizagi-column-hidden, th.ui-bizagi-grid-key, td.ui-bizagi-grid-key, .bz-rn-grid-container-foother\", control).remove();\n\n    //Remove click event\n    $(\"[data-action], ul li, .ui-bizagi-grid-column, tr, th\", tableControl).unbind(\"click\");\n    // Remove close button\n    $(closeButton).remove();\n  },\n\n  /**\r\n     *   Format Render Style\r\n     */\n\n  formatRenderContainer: function formatRenderContainer() {\n    var self = this,\n    control = self.getContent();\n    $('.ui-bizagi-notifications-container', control).remove();\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /**\r\n                                                                                                                                                                                                                                                                                                                                                                               *   Name: Bizagi Workportal Desktop HomePortal Controller\r\n                                                                                                                                                                                                                                                                                                                                                                               *   Author: Manuel Mejia\r\n                                                                                                                                                                                                                                                                                                                                                                               */\n\n/**\r\n                                                                                                                                                                                                                                                                                                                                                                                   *  CD: Case Dashboard, example: toLeftSidebarCD: To left sidebar Case dashboard\r\n                                                                                                                                                                                                                                                                                                                                                                                   */\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.homeportal\", {\n  contexts: {\n    \"HOME\": {\n      widgets: {\n        \"dashboard\": {\n          \"layout\": \"content\",\n          \"name\": \"bizagi.workportal.widgets.dashboard\" },\n\n        \"stuff\": {\n          \"layout\": \"dashboard\",\n          \"name\": \"bizagi.workportal.widgets.stuff\",\n          \"canvas\": \"stuff\" },\n\n        \"plans\": {\n          \"layout\": \"dashboard\",\n          \"name\": \"bizagi.workportal.widgets.decontextualized.plans\",\n          \"canvas\": \"plans\" },\n\n        \"navigator\": {\n          \"layout\": \"navigator\",\n          \"name\": \"bizagi.workportal.widgets.navigator\",\n          \"refresh\": false },\n\n        \"sidebar\": {\n          \"layout\": \"leftsidebar\",\n          \"name\": \"bizagi.workportal.widgets.sidebarhome\" },\n\n        \"usersummary\": {\n          \"layout\": \"sidebar\",\n          \"name\": \"bizagi.workportal.widgets.usersummary\",\n          \"canvas\": \"content1\" },\n\n        \"myshortcuts\": {\n          \"layout\": \"sidebar\",\n          \"name\": \"bizagi.workportal.widgets.shortcuts\",\n          \"canvas\": \"content2\" },\n\n        \"rightSidebar\": {\n          \"layout\": \"contentrightsidebar\",\n          \"name\": \"bizagi.workportal.widgets.right.sidebar\" },\n\n        \"empty1\": { layout: \"rightSidebar\", name: \"bizagi.workportal.widgets.dummy\", canvas: \"sidebarcontent1\" },\n        \"empty2\": { layout: \"rightSidebar\", name: \"bizagi.workportal.widgets.dummy\", canvas: \"sidebarcontentextra\" } },\n\n\n      nav: { level: 0 },\n      belongs: { \"toLeftSidebarCD\": false, \"toRightSidebarCD\": false, \"toTaskSidebarCD\": false } },\n\n\n    \"TEMPLATEENGINE-VIEW\": {\n      widgets: {\n        \"templates\": {\n          \"layout\": \"content\",\n          \"name\": \"bizagi.workportal.widgets.templates\" },\n\n        \"navigator\": {\n          \"layout\": \"navigator\",\n          \"name\": \"bizagi.workportal.widgets.navigator\",\n          \"refresh\": false },\n\n        \"paginator\": {\n          \"layout\": \"templates\",\n          \"name\": \"bizagi.workportal.widgets.paginator\",\n          \"canvas\": \"paginator\" },\n\n        \"sortbar\": {\n          \"layout\": \"templates\",\n          \"name\": \"bizagi.workportal.widgets.sortbar\",\n          \"canvas\": \"sortbar\" },\n\n        \"mysearchfilter\": {\n          \"layout\": \"templates\",\n          \"name\": \"bizagi.workportal.widgets.mysearchfilter\",\n          \"canvas\": \"mysearchfilter\" },\n\n        \"sidebar\": {\n          \"layout\": \"leftsidebar\",\n          \"name\": \"bizagi.workportal.widgets.sidebar\" },\n\n        \"stuff\": {\n          \"layout\": \"sidebar\",\n          \"name\": \"bizagi.workportal.widgets.stuff\",\n          \"canvas\": \"content1\" },\n\n        \"rightSidebar\": {\n          \"layout\": \"contentrightsidebar\",\n          \"name\": \"bizagi.workportal.widgets.right.sidebar\" },\n\n        \"empty1\": { layout: \"rightSidebar\", name: \"bizagi.workportal.widgets.dummy\", canvas: \"sidebarcontent1\" },\n        \"empty2\": { layout: \"rightSidebar\", name: \"bizagi.workportal.widgets.dummy\", canvas: \"sidebarcontentextra\" } },\n\n      nav: { level: 1 },\n      belongs: { \"toLeftSidebarCD\": false, \"toRightSidebarCD\": false, \"toTaskSidebarCD\": false } },\n\n\n    \"ENTITY-ENGINE-VIEW\": {\n      widgets: {\n        \"templates\": {\n          \"layout\": \"content\",\n          \"name\": \"bizagi.workportal.widgets.templates\" },\n\n        \"navigator\": {\n          \"layout\": \"navigator\",\n          \"name\": \"bizagi.workportal.widgets.navigator\",\n          \"refresh\": false },\n\n        \"sidebar\": {\n          \"layout\": \"leftsidebar\",\n          \"name\": \"bizagi.workportal.widgets.sidebar\" },\n\n        \"stuff\": {\n          \"layout\": \"sidebar\",\n          \"name\": \"bizagi.workportal.widgets.stuff\",\n          \"canvas\": \"content1\" },\n\n        \"rightSidebar\": {\n          \"layout\": \"contentrightsidebar\",\n          \"name\": \"bizagi.workportal.widgets.right.sidebar\" },\n\n        \"empty1\": { layout: \"rightSidebar\", name: \"bizagi.workportal.widgets.dummy\", canvas: \"sidebarcontent1\" },\n        \"empty2\": { layout: \"rightSidebar\", name: \"bizagi.workportal.widgets.dummy\", canvas: \"sidebarcontentextra\" } },\n\n      nav: { level: 1 },\n      belongs: { \"toLeftSidebarCD\": false, \"toRightSidebarCD\": false, \"toTaskSidebarCD\": false } },\n\n\n    \"SEARCH-ENGINE-VIEW\": {\n      widgets: {\n        \"templates\": {\n          \"layout\": \"content\",\n          \"name\": \"bizagi.workportal.widgets.templates\" },\n\n        \"paginator\": {\n          \"layout\": \"templates\",\n          \"name\": \"bizagi.workportal.widgets.paginator\",\n          \"canvas\": \"paginator\" },\n\n        \"sortbar\": {\n          \"layout\": \"templates\",\n          \"name\": \"bizagi.workportal.widgets.sortbar\",\n          \"canvas\": \"sortbar\" },\n\n        \"mysearchfilter\": {\n          \"layout\": \"templates\",\n          \"name\": \"bizagi.workportal.widgets.mysearchfilter\",\n          \"canvas\": \"mysearchfilter\" },\n\n        \"sidebar\": {\n          \"layout\": \"leftsidebar\",\n          \"name\": \"bizagi.workportal.widgets.sidebar\" },\n\n        \"mysearchcriteria\": {\n          \"layout\": \"sidebar\",\n          \"name\": \"bizagi.workportal.widgets.mysearchcriteria\",\n          \"canvas\": \"content1\" },\n\n        \"rightSidebar\": {\n          \"layout\": \"contentrightsidebar\",\n          \"name\": \"bizagi.workportal.widgets.right.sidebar\" },\n\n        \"empty1\": { layout: \"rightSidebar\", name: \"bizagi.workportal.widgets.dummy\", canvas: \"sidebarcontent1\" },\n        \"empty2\": { layout: \"rightSidebar\", name: \"bizagi.workportal.widgets.dummy\", canvas: \"sidebarcontentextra\" } },\n\n      nav: { level: 1 },\n      belongs: { \"toLeftSidebarCD\": false, \"toRightSidebarCD\": false, \"toTaskSidebarCD\": false } },\n\n\n    \"CASES-TEMPLATE-VIEW\": {\n      widgets: {\n        \"templates\": {\n          \"layout\": \"content\",\n          \"name\": \"bizagi.workportal.widgets.casestemplate\" },\n\n        \"navigator\": {\n          \"layout\": \"navigator\",\n          \"name\": \"bizagi.workportal.widgets.navigator\",\n          \"refresh\": false },\n\n        \"paginator\": {\n          \"layout\": \"templates\",\n          \"name\": \"bizagi.workportal.widgets.paginator\",\n          \"canvas\": \"paginator\" },\n\n        \"sortbar\": {\n          \"layout\": \"templates\",\n          \"name\": \"bizagi.workportal.widgets.sortbar\",\n          \"canvas\": \"sortbar\" },\n\n        \"sidebar\": {\n          \"layout\": \"leftsidebar\",\n          \"name\": \"bizagi.workportal.widgets.sidebar\" },\n\n        \"proccesseslist\": {\n          \"layout\": \"sidebar\",\n          \"name\": \"bizagi.workportal.widgets.processeslist\",\n          \"canvas\": \"content1\" },\n\n        \"filtercases\": {\n          \"layout\": \"sidebar\",\n          \"name\": \"bizagi.workportal.widgets.filtercases\",\n          \"canvas\": \"sidebarfooter\" },\n\n        \"rightSidebar\": {\n          \"layout\": \"contentrightsidebar\",\n          \"name\": \"bizagi.workportal.widgets.right.sidebar\" },\n\n        \"empty1\": { layout: \"rightSidebar\", name: \"bizagi.workportal.widgets.dummy\", canvas: \"sidebarcontent1\" },\n        \"empty2\": { layout: \"rightSidebar\", name: \"bizagi.workportal.widgets.dummy\", canvas: \"sidebarcontentextra\" } },\n\n      nav: { level: 1 },\n      belongs: { \"toLeftSidebarCD\": false, \"toRightSidebarCD\": false, \"toTaskSidebarCD\": false } },\n\n    \"PLANS-VIEW\": {\n      widgets: {\n        \"topmenu\": {\n          \"layout\": \"content\",\n          \"name\": \"bizagi.workportal.widgets.plans.topmenu\" },\n\n        \"navigator\": {\n          \"layout\": \"navigator\",\n          \"name\": \"bizagi.workportal.widgets.navigator\",\n          \"refresh\": false },\n\n        \"manager\": {\n          \"layout\": \"topmenu\",\n          \"name\": \"bizagi.workportal.widgets.plans.manager\",\n          \"canvas\": \"plansList\" },\n\n        \"sidebar\": {\n          \"layout\": \"leftsidebar\",\n          \"name\": \"bizagi.workportal.widgets.sidebar\" },\n\n        \"filters\": {\n          \"layout\": \"sidebar\",\n          \"name\": \"bizagi.workportal.widgets.plans.filters\",\n          \"canvas\": \"content1\" },\n\n        \"rightSidebar\": {\n          \"layout\": \"contentrightsidebar\",\n          \"name\": \"bizagi.workportal.widgets.right.sidebar\" },\n\n        \"empty1\": { layout: \"rightSidebar\", name: \"bizagi.workportal.widgets.dummy\", canvas: \"sidebarcontent1\" },\n        \"empty2\": { layout: \"rightSidebar\", name: \"bizagi.workportal.widgets.dummy\", canvas: \"sidebarcontentextra\" } },\n\n      nav: { level: 1 },\n      belongs: { \"toLeftSidebarCD\": false, \"toRightSidebarCD\": false, \"toTaskSidebarCD\": false } },\n\n    //CONTEXTS CASE DASHBOARD\n    \"ACTIVITY\": {\n      widgets: {\n        activity: {\n          layout: \"contentDashboard\",\n          name: \"bizagi.workportal.widgets.project.activity\",\n          canvas: \"contentprincipal\" },\n\n        \"leftSidebar\": {\n          layout: \"leftsidebar\",\n          name: \"bizagi.workportal.widgets.left.sidebar\" },\n\n        \"menu\": {\n          layout: \"leftSidebar\",\n          name: \"bizagi.workportal.widgets.project.dashboard.menu.activity\",\n          canvas: \"contentsidebar\" },\n\n        \"navigator\": {\n          \"layout\": \"navigator\",\n          \"name\": \"bizagi.workportal.widgets.navigator\",\n          \"refresh\": false },\n\n        \"contentDashboard\": {\n          \"layout\": \"content\",\n          \"name\": \"bizagi.workportal.widgets.project.content.dashboard\" },\n\n        \"rightSidebar\": {\n          \"layout\": \"contentrightsidebar\",\n          \"name\": \"bizagi.workportal.widgets.right.sidebar\" },\n\n        caseState: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.caseState\",\n          canvas: \"sidebarcontent1\" },\n\n        activityState: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.activityState\",\n          canvas: \"sidebarcontent2\" },\n\n        activityDescription: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.activity.description\",\n          canvas: \"sidebarcontent3\" },\n\n        processState: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.processState\",\n          canvas: \"sidebarcontent4\" },\n\n        users: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.users\",\n          canvas: \"sidebarcontent5\" },\n\n        events: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.events\",\n          canvas: \"sidebarcontent6\" },\n\n        subprocesses: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.subprocesses\",\n          canvas: \"sidebarcontent7\" },\n\n        relatedPlan: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.activity.plan.sidebar\",\n          canvas: \"sidebarcontentextra\" } },\n\n\n      nav: { level: 0 },\n      belongs: { \"toLeftSidebarCD\": true, \"toRightSidebarCD\": true, \"toTaskSidebarCD\": true } },\n\n    \"OVERVIEW\": {\n      widgets: {\n        \"leftSidebar\": {\n          layout: \"leftsidebar\",\n          name: \"bizagi.workportal.widgets.left.sidebar\" },\n\n        \"menu\": {\n          layout: \"leftSidebar\",\n          name: \"bizagi.workportal.widgets.project.dashboard.menu.activity\",\n          canvas: \"contentsidebar\" },\n\n        \"navigator\": {\n          \"layout\": \"navigator\",\n          \"name\": \"bizagi.workportal.widgets.navigator\",\n          \"refresh\": false },\n\n        \"contentDashboard\": {\n          \"layout\": \"content\",\n          \"name\": \"bizagi.workportal.widgets.project.content.dashboard\" },\n\n        overview: {\n          layout: \"contentDashboard\",\n          name: \"bizagi.workportal.widgets.project.overview\",\n          canvas: \"contentprincipal\" },\n\n        \"rightSidebar\": {\n          \"layout\": \"contentrightsidebar\",\n          \"name\": \"bizagi.workportal.widgets.right.sidebar\" },\n\n        caseState: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.caseState\",\n          canvas: \"sidebarcontent1\" },\n\n        activityState: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.activityState\",\n          canvas: \"sidebarcontent2\" },\n\n        activityDescription: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.activity.description\",\n          canvas: \"sidebarcontent3\" },\n\n        processState: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.processState\",\n          canvas: \"sidebarcontent4\" },\n\n        users: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.users\",\n          canvas: \"sidebarcontent5\" },\n\n        events: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.events\",\n          canvas: \"sidebarcontent6\" },\n\n        subprocesses: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.subprocesses\",\n          canvas: \"sidebarcontent7\" },\n\n        \"empty1\": { layout: \"rightSidebar\", name: \"bizagi.workportal.widgets.dummy\", canvas: \"sidebarcontentextra\" } },\n\n      nav: { level: 0, refreshLastItemBreadcrumb: false },\n      belongs: { \"toLeftSidebarCD\": true, \"toRightSidebarCD\": true, \"toTaskSidebarCD\": true } },\n\n    \"COMMENTS\": {\n      widgets: {\n        \"leftSidebar\": {\n          layout: \"leftsidebar\",\n          name: \"bizagi.workportal.widgets.left.sidebar\" },\n\n        \"navigator\": {\n          \"layout\": \"navigator\",\n          \"name\": \"bizagi.workportal.widgets.navigator\",\n          \"refresh\": false },\n\n        \"menu\": {\n          layout: \"leftSidebar\",\n          name: \"bizagi.workportal.widgets.project.dashboard.menu.activity\",\n          canvas: \"contentsidebar\" },\n\n        \"contentDashboard\": {\n          \"layout\": \"content\",\n          \"name\": \"bizagi.workportal.widgets.project.content.dashboard\" },\n\n        discussions: {\n          layout: \"contentDashboard\",\n          name: \"bizagi.workportal.widgets.project.discussions\",\n          canvas: \"contentprincipal\" },\n\n        \"rightSidebar\": {\n          \"layout\": \"contentrightsidebar\",\n          \"name\": \"bizagi.workportal.widgets.right.sidebar\" },\n\n        discussionSidebar: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.discussion.sidebar\",\n          canvas: \"sidebarcontent1\" },\n\n        caseState: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.caseState\",\n          canvas: \"sidebarcontent2\" },\n\n        activityState: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.activityState\",\n          canvas: \"sidebarcontent3\" },\n\n        activityDescription: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.activity.description\",\n          canvas: \"sidebarcontent4\" },\n\n        processState: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.processState\",\n          canvas: \"sidebarcontent5\" },\n\n        users: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.users\",\n          canvas: \"sidebarcontent6\" },\n\n        events: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.events\",\n          canvas: \"sidebarcontent7\" },\n\n        subprocesses: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.subprocesses\",\n          canvas: \"sidebarcontentextra\" } },\n\n\n      nav: { level: 0, refreshLastItemBreadcrumb: false },\n      belongs: { \"toLeftSidebarCD\": true, \"toRightSidebarCD\": true, \"toTaskSidebarCD\": true } },\n\n    \"FILES\": {\n      widgets: {\n        \"leftSidebar\": {\n          layout: \"leftsidebar\",\n          name: \"bizagi.workportal.widgets.left.sidebar\" },\n\n        \"navigator\": {\n          \"layout\": \"navigator\",\n          \"name\": \"bizagi.workportal.widgets.navigator\",\n          \"refresh\": false },\n\n        \"menu\": {\n          layout: \"leftSidebar\",\n          name: \"bizagi.workportal.widgets.project.dashboard.menu.activity\",\n          canvas: \"contentsidebar\" },\n\n        \"contentDashboard\": {\n          \"layout\": \"content\",\n          \"name\": \"bizagi.workportal.widgets.project.content.dashboard\" },\n\n        files: {\n          layout: \"contentDashboard\",\n          name: \"bizagi.workportal.widgets.project.files\",\n          canvas: \"contentprincipal\" },\n\n        \"rightSidebar\": {\n          \"layout\": \"contentrightsidebar\",\n          \"name\": \"bizagi.workportal.widgets.right.sidebar\" },\n\n        filesPreview: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.filesPreview\",\n          canvas: \"sidebarcontent1\" },\n\n        caseState: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.caseState\",\n          canvas: \"sidebarcontent2\" },\n\n        activityState: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.activityState\",\n          canvas: \"sidebarcontent3\" },\n\n        activityDescription: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.activity.description\",\n          canvas: \"sidebarcontent4\" },\n\n        processState: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.processState\",\n          canvas: \"sidebarcontent5\" },\n\n        users: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.users\",\n          canvas: \"sidebarcontent6\" },\n\n        events: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.events\",\n          canvas: \"sidebarcontent7\" },\n\n        subprocesses: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.subprocesses\",\n          canvas: \"sidebarcontentextra\" } },\n\n\n      nav: { level: 0, refreshLastItemBreadcrumb: false },\n      belongs: { \"toLeftSidebarCD\": true, \"toRightSidebarCD\": true, \"toTaskSidebarCD\": true } },\n\n    \"TIMELINE\": {\n      widgets: {\n        \"leftSidebar\": {\n          layout: \"leftsidebar\",\n          name: \"bizagi.workportal.widgets.left.sidebar\" },\n\n        \"menu\": {\n          layout: \"leftSidebar\",\n          name: \"bizagi.workportal.widgets.project.dashboard.menu.activity\",\n          canvas: \"contentsidebar\" },\n\n        \"contentDashboard\": {\n          \"layout\": \"content\",\n          \"name\": \"bizagi.workportal.widgets.project.content.dashboard\" },\n\n        \"timeline\": {\n          layout: \"contentDashboard\",\n          name: \"bizagi.workportal.widgets.project.timeline\",\n          canvas: \"contentprincipal\" },\n\n        \"rightSidebar\": {\n          \"layout\": \"contentrightsidebar\",\n          \"name\": \"bizagi.workportal.widgets.right.sidebar\" },\n\n        \"timelineSidebar\": {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.timeline.sidebar\",\n          canvas: \"sidebarcontent1\" },\n\n        caseState: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.caseState\",\n          canvas: \"sidebarcontent2\" },\n\n        activityState: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.activityState\",\n          canvas: \"sidebarcontent3\" },\n\n        activityDescription: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.activity.description\",\n          canvas: \"sidebarcontent4\" },\n\n        processState: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.processState\",\n          canvas: \"sidebarcontent5\" },\n\n        users: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.users\",\n          canvas: \"sidebarcontent6\" },\n\n        events: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.events\",\n          canvas: \"sidebarcontent7\" },\n\n        subprocesses: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.subprocesses\",\n          canvas: \"sidebarcontentextra\" } },\n\n\n      nav: { level: 0, refreshLastItemBreadcrumb: false },\n      belongs: { \"toLeftSidebarCD\": true, \"toRightSidebarCD\": true, \"toTaskSidebarCD\": true } },\n\n    //CONTEXTS FOR PLAN\n    \"PLANCREATE\": {\n      widgets: {\n        \"leftSidebar\": {\n          layout: \"leftsidebar\",\n          name: \"bizagi.workportal.widgets.left.sidebar\" },\n\n        \"menu\": {\n          layout: \"leftSidebar\",\n          name: \"bizagi.workportal.widgets.project.dashboard.menu.activity\",\n          canvas: \"contentsidebar\" },\n\n        \"contentDashboard\": {\n          \"layout\": \"content\",\n          \"name\": \"bizagi.workportal.widgets.project.content.dashboard\" },\n\n        plan: {\n          layout: \"contentDashboard\",\n          name: \"bizagi.workportal.widgets.project.plan\",\n          canvas: \"contentprincipal\" },\n\n        \"rightSidebar\": {\n          \"layout\": \"contentrightsidebar\",\n          \"name\": \"bizagi.workportal.widgets.right.sidebar\" },\n\n        caseState: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.caseState\",\n          canvas: \"sidebarcontent1\" },\n\n        activityState: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.activityState\",\n          canvas: \"sidebarcontent2\" },\n\n        activityDescription: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.activity.description\",\n          canvas: \"sidebarcontent3\" },\n\n        processState: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.processState\",\n          canvas: \"sidebarcontent4\" },\n\n        users: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.users\",\n          canvas: \"sidebarcontent5\" },\n\n        events: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.events\",\n          canvas: \"sidebarcontent6\" },\n\n        subprocesses: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.subprocesses\",\n          canvas: \"sidebarcontent7\" },\n\n        \"empty1\": { layout: \"rightSidebar\", name: \"bizagi.workportal.widgets.dummy\", canvas: \"sidebarcontentextra\" } },\n\n      nav: { level: 0, refreshLastItemBreadcrumb: false },\n      belongs: { \"toLeftSidebarCD\": true, \"toRightSidebarCD\": true, \"toTaskSidebarCD\": true } },\n\n    \"PLANOVERVIEW\": {\n      widgets: {\n        \"leftSidebar\": {\n          layout: \"leftsidebar\",\n          name: \"bizagi.workportal.widgets.left.sidebar\" },\n\n        \"menu\": {\n          layout: \"leftSidebar\",\n          name: \"bizagi.workportal.widgets.project.dashboard.menu.plan\",\n          canvas: \"contentsidebar\" },\n\n        \"contentDashboard\": {\n          \"layout\": \"content\",\n          \"name\": \"bizagi.workportal.widgets.project.content.dashboard\" },\n\n        planActivities: {\n          layout: \"contentDashboard\",\n          name: \"bizagi.workportal.widgets.project.plan.activities\",\n          canvas: \"contentprincipal\" },\n\n        \"rightSidebar\": {\n          \"layout\": \"contentrightsidebar\",\n          \"name\": \"bizagi.workportal.widgets.right.sidebar\" },\n\n        planSidebar: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.plan.sidebar\",\n          canvas: \"sidebarcontentextra\" },\n\n        planAction: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.plan.action\",\n          canvas: \"sidebarcontent1\" },\n\n        planState: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.plan.state\",\n          canvas: \"sidebarcontent3\" },\n\n        planProgress: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.plan.progress\",\n          canvas: \"sidebarcontent4\" },\n\n        planTime: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.plan.time\",\n          canvas: \"sidebarcontent5\" },\n\n        planParent: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.plan.parent\",\n          canvas: \"sidebarcontent6\" },\n\n        planUsers: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.plan.users\",\n          canvas: \"sidebarcontent7\" } },\n\n\n      nav: { level: 0, refreshLastItemBreadcrumb: false },\n      belongs: { \"toLeftSidebarCD\": true, \"toRightSidebarCD\": true, \"toTaskSidebarCD\": false } },\n\n    \"PLANACTIVITIES\": {\n      widgets: {\n        \"leftSidebar\": {\n          layout: \"leftsidebar\",\n          name: \"bizagi.workportal.widgets.left.sidebar\" },\n\n        \"navigator\": {\n          \"layout\": \"navigator\",\n          \"name\": \"bizagi.workportal.widgets.navigator\",\n          \"refresh\": false },\n\n        \"menu\": {\n          layout: \"leftSidebar\",\n          name: \"bizagi.workportal.widgets.project.dashboard.menu.plan\",\n          canvas: \"contentsidebar\" },\n\n        \"contentDashboard\": {\n          \"layout\": \"content\",\n          \"name\": \"bizagi.workportal.widgets.project.content.dashboard\" },\n\n        planActivities: {\n          layout: \"contentDashboard\",\n          name: \"bizagi.workportal.widgets.project.plan.activities\",\n          canvas: \"contentprincipal\" },\n\n        \"rightSidebar\": {\n          \"layout\": \"contentrightsidebar\",\n          \"name\": \"bizagi.workportal.widgets.right.sidebar\" },\n\n        planSidebar: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.plan.sidebar\",\n          canvas: \"sidebarcontentextra\" },\n\n        planAction: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.plan.action\",\n          canvas: \"sidebarcontent1\" },\n\n        planState: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.plan.state\",\n          canvas: \"sidebarcontent3\" },\n\n        planProgress: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.plan.progress\",\n          canvas: \"sidebarcontent4\" },\n\n        planTime: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.plan.time\",\n          canvas: \"sidebarcontent5\" },\n\n        planParent: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.plan.parent\",\n          canvas: \"sidebarcontent6\" },\n\n        planUsers: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.plan.users\",\n          canvas: \"sidebarcontent7\" } },\n\n\n      nav: { level: 1 },\n      belongs: { \"toLeftSidebarCD\": true, \"toRightSidebarCD\": true, \"toTaskSidebarCD\": false } },\n\n    \"PLANFILES\": {\n      widgets: {\n        \"leftSidebar\": {\n          layout: \"leftsidebar\",\n          name: \"bizagi.workportal.widgets.left.sidebar\" },\n\n        \"menu\": {\n          layout: \"leftSidebar\",\n          name: \"bizagi.workportal.widgets.project.dashboard.menu.plan\",\n          canvas: \"contentsidebar\" },\n\n        \"contentDashboard\": {\n          \"layout\": \"content\",\n          \"name\": \"bizagi.workportal.widgets.project.content.dashboard\" },\n\n        files: {\n          layout: \"contentDashboard\",\n          name: \"bizagi.workportal.widgets.project.files\",\n          canvas: \"contentprincipal\" },\n\n        \"rightSidebar\": {\n          \"layout\": \"contentrightsidebar\",\n          \"name\": \"bizagi.workportal.widgets.right.sidebar\" },\n\n        filesPreview: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.filesPreview\",\n          canvas: \"sidebarcontent1\" },\n\n        empty2: { layout: \"rightSidebar\", name: \"bizagi.workportal.widgets.dummy\", canvas: \"sidebarcontent3\" },\n        empty3: { layout: \"rightSidebar\", name: \"bizagi.workportal.widgets.dummy\", canvas: \"sidebarcontent4\" },\n        empty4: { layout: \"rightSidebar\", name: \"bizagi.workportal.widgets.dummy\", canvas: \"sidebarcontent5\" },\n        empty5: { layout: \"rightSidebar\", name: \"bizagi.workportal.widgets.dummy\", canvas: \"sidebarcontent6\" },\n        empty6: { layout: \"rightSidebar\", name: \"bizagi.workportal.widgets.dummy\", canvas: \"sidebarcontent7\" },\n        empty7: { layout: \"rightSidebar\", name: \"bizagi.workportal.widgets.dummy\", canvas: \"sidebarcontentextra\" } },\n\n      nav: { level: 0, refreshLastItemBreadcrumb: false },\n      belongs: { \"toLeftSidebarCD\": true, \"toRightSidebarCD\": true, \"toTaskSidebarCD\": false } },\n\n    \"PLANCOMMENTS\": {\n      widgets: {\n        \"leftSidebar\": {\n          layout: \"leftsidebar\",\n          name: \"bizagi.workportal.widgets.left.sidebar\" },\n\n        \"menu\": {\n          layout: \"leftSidebar\",\n          name: \"bizagi.workportal.widgets.project.dashboard.menu.plan\",\n          canvas: \"contentsidebar\" },\n\n        \"contentDashboard\": {\n          \"layout\": \"content\",\n          \"name\": \"bizagi.workportal.widgets.project.content.dashboard\" },\n\n        discussions: {\n          layout: \"contentDashboard\",\n          name: \"bizagi.workportal.widgets.project.discussions\",\n          canvas: \"contentprincipal\" },\n\n        \"rightSidebar\": {\n          \"layout\": \"contentrightsidebar\",\n          \"name\": \"bizagi.workportal.widgets.right.sidebar\" },\n\n        planSidebar: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.plan.sidebar\",\n          canvas: \"sidebarcontentextra\" },\n\n        discussionSidebar: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.discussion.sidebar\",\n          canvas: \"sidebarcontent1\" },\n\n        planAction: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.plan.action\",\n          canvas: \"sidebarcontent3\" },\n\n        planState: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.plan.state\",\n          canvas: \"sidebarcontent4\" },\n\n        planProgress: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.plan.progress\",\n          canvas: \"sidebarcontent5\" },\n\n        planTime: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.plan.time\",\n          canvas: \"sidebarcontent6\" },\n\n        planUsers: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.plan.users\",\n          canvas: \"sidebarcontent7\" } },\n\n\n      nav: { level: 0, refreshLastItemBreadcrumb: false },\n      belongs: { \"toLeftSidebarCD\": true, \"toRightSidebarCD\": true, \"toTaskSidebarCD\": false } },\n\n    \"PLANTIMELINE\": {\n      widgets: {\n        \"leftSidebar\": {\n          layout: \"leftsidebar\",\n          name: \"bizagi.workportal.widgets.left.sidebar\" },\n\n        \"navigator\": {\n          \"layout\": \"navigator\",\n          \"name\": \"bizagi.workportal.widgets.navigator\",\n          \"refresh\": false },\n\n        \"menu\": {\n          layout: \"leftSidebar\",\n          name: \"bizagi.workportal.widgets.project.dashboard.menu.plan\",\n          canvas: \"contentsidebar\" },\n\n        \"contentDashboard\": {\n          \"layout\": \"content\",\n          \"name\": \"bizagi.workportal.widgets.project.content.dashboard\" },\n\n        \"timeline\": {\n          layout: \"contentDashboard\",\n          name: \"bizagi.workportal.widgets.project.timeline\",\n          canvas: \"contentprincipal\" },\n\n        \"rightSidebar\": {\n          \"layout\": \"contentrightsidebar\",\n          \"name\": \"bizagi.workportal.widgets.right.sidebar\" },\n\n        empty1: { layout: \"rightSidebar\", name: \"bizagi.workportal.widgets.dummy\", canvas: \"sidebarcontent1\" },\n        empty2: { layout: \"rightSidebar\", name: \"bizagi.workportal.widgets.dummy\", canvas: \"sidebarcontent3\" },\n        empty3: { layout: \"rightSidebar\", name: \"bizagi.workportal.widgets.dummy\", canvas: \"sidebarcontent4\" },\n        empty4: { layout: \"rightSidebar\", name: \"bizagi.workportal.widgets.dummy\", canvas: \"sidebarcontent5\" },\n        empty5: { layout: \"rightSidebar\", name: \"bizagi.workportal.widgets.dummy\", canvas: \"sidebarcontent6\" },\n        empty6: { layout: \"rightSidebar\", name: \"bizagi.workportal.widgets.dummy\", canvas: \"sidebarcontent7\" },\n        empty7: { layout: \"rightSidebar\", name: \"bizagi.workportal.widgets.dummy\", canvas: \"sidebarcontentextra\" } },\n\n      nav: { level: 1 },\n      belongs: { \"toLeftSidebarCD\": true, \"toRightSidebarCD\": true, \"toTaskSidebarCD\": false } },\n\n    \"PLANSIDEBAR\": {\n      widgets: {\n        \"leftSidebar\": {\n          layout: \"leftsidebar\",\n          name: \"bizagi.workportal.widgets.left.sidebar\" },\n\n        \"menu\": {\n          layout: \"leftSidebar\",\n          name: \"bizagi.workportal.widgets.project.dashboard.menu.plan\",\n          canvas: \"contentsidebar\" },\n\n        \"rightSidebar\": {\n          \"layout\": \"contentrightsidebar\",\n          \"name\": \"bizagi.workportal.widgets.right.sidebar\" },\n\n        planSidebar: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.plan.sidebar\",\n          canvas: \"sidebarcontentextra\" },\n\n        planAction: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.plan.action\",\n          canvas: \"sidebarcontent1\" },\n\n        planState: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.plan.state\",\n          canvas: \"sidebarcontent3\" },\n\n        planProgress: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.plan.progress\",\n          canvas: \"sidebarcontent4\" },\n\n        planTime: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.plan.time\",\n          canvas: \"sidebarcontent5\" },\n\n        planParent: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.plan.parent\",\n          canvas: \"sidebarcontent6\" },\n\n        planUsers: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.plan.users\",\n          canvas: \"sidebarcontent7\" } },\n\n\n      nav: { level: 0, refreshLastItemBreadcrumb: false },\n      belongs: { \"toLeftSidebarCD\": true, \"toRightSidebarCD\": true, \"toTaskSidebarCD\": false } },\n\n    \"EDITACTIVITY\": {\n      widgets: {\n        \"rightSidebar\": {\n          \"layout\": \"contentrightsidebar\",\n          \"name\": \"bizagi.workportal.widgets.right.sidebar\" },\n\n        activitiesForm: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.desktop.widgets.project.plan.activities.form\",\n          canvas: \"sidebarcontent1\" },\n\n        empty1: { layout: \"rightSidebar\", name: \"bizagi.workportal.widgets.dummy\", canvas: \"sidebarcontentextra\" },\n        empty2: { layout: \"rightSidebar\", name: \"bizagi.workportal.widgets.dummy\", canvas: \"sidebarcontent3\" },\n        empty3: { layout: \"rightSidebar\", name: \"bizagi.workportal.widgets.dummy\", canvas: \"sidebarcontent4\" },\n        empty4: { layout: \"rightSidebar\", name: \"bizagi.workportal.widgets.dummy\", canvas: \"sidebarcontent5\" },\n        empty5: { layout: \"rightSidebar\", name: \"bizagi.workportal.widgets.dummy\", canvas: \"sidebarcontent6\" },\n        empty6: { layout: \"rightSidebar\", name: \"bizagi.workportal.widgets.dummy\", canvas: \"sidebarcontent7\" } },\n\n      nav: { level: 0, refreshLastItemBreadcrumb: false },\n      belongs: { \"toLeftSidebarCD\": true, \"toRightSidebarCD\": true, \"toTaskSidebarCD\": false } },\n\n    //CONTEXTS FOR ACTIVITY PLAN\n    \"ACTIVITYPLAN\": {\n      widgets: {\n        \"leftSidebar\": {\n          layout: \"leftsidebar\",\n          name: \"bizagi.workportal.widgets.left.sidebar\" },\n\n        \"navigator\": {\n          \"layout\": \"navigator\",\n          \"name\": \"bizagi.workportal.widgets.navigator\",\n          \"refresh\": false },\n\n        \"menu\": {\n          layout: \"leftSidebar\",\n          name: \"bizagi.workportal.widgets.project.dashboard.menu.activity.plan\",\n          canvas: \"contentsidebar\" },\n\n        \"contentDashboard\": {\n          \"layout\": \"content\",\n          \"name\": \"bizagi.workportal.widgets.project.content.dashboard\" },\n\n        activity: {\n          layout: \"contentDashboard\",\n          name: \"bizagi.workportal.widgets.project.activity\",\n          canvas: \"contentprincipal\" },\n\n        \"rightSidebar\": {\n          \"layout\": \"contentrightsidebar\",\n          \"name\": \"bizagi.workportal.widgets.right.sidebar\" },\n\n        activitySidebar: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.plan.activity.sidebar\",\n          canvas: \"sidebarcontentextra\" },\n\n        activityAction: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.plan.activity.action\",\n          canvas: \"sidebarcontent1\" },\n\n        activityTime: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.plan.activity.time\",\n          canvas: \"sidebarcontent3\" },\n\n        activityProgress: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.plan.activity.progress\",\n          canvas: \"sidebarcontent4\" },\n\n        activityParent: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.plan.activity.parent\",\n          canvas: \"sidebarcontent5\" },\n\n        activityUsers: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.plan.activity.users\",\n          canvas: \"sidebarcontent6\" },\n\n        relatedPlan: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.activity.plan.sidebar\",\n          canvas: \"sidebarcontent7\" } },\n\n\n      nav: { level: 0 },\n      belongs: { \"toLeftSidebarCD\": true, \"toRightSidebarCD\": true, \"toTaskSidebarCD\": false } },\n\n    \"ACTIVITYPLANCREATE\": {\n      widgets: {\n        \"leftSidebar\": {\n          layout: \"leftsidebar\",\n          name: \"bizagi.workportal.widgets.left.sidebar\" },\n\n        \"menu\": {\n          layout: \"leftSidebar\",\n          name: \"bizagi.workportal.widgets.project.dashboard.menu.activity.plan\",\n          canvas: \"contentsidebar\" },\n\n        \"navigator\": {\n          \"layout\": \"navigator\",\n          \"name\": \"bizagi.workportal.widgets.navigator\",\n          \"refresh\": false },\n\n        \"contentDashboard\": {\n          \"layout\": \"content\",\n          \"name\": \"bizagi.workportal.widgets.project.content.dashboard\" },\n\n        plan: {\n          layout: \"contentDashboard\",\n          name: \"bizagi.workportal.widgets.project.plan\",\n          canvas: \"contentprincipal\" },\n\n        \"rightSidebar\": {\n          \"layout\": \"contentrightsidebar\",\n          \"name\": \"bizagi.workportal.widgets.right.sidebar\" },\n\n        activitySidebar: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.plan.activity.sidebar\",\n          canvas: \"sidebarcontentextra\" },\n\n        activityAction: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.plan.activity.action\",\n          canvas: \"sidebarcontent1\" },\n\n        activityTime: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.plan.activity.time\",\n          canvas: \"sidebarcontent3\" },\n\n        activityProgress: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.plan.activity.progress\",\n          canvas: \"sidebarcontent4\" },\n\n        activityParent: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.plan.activity.parent\",\n          canvas: \"sidebarcontent5\" },\n\n        activityUsers: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.plan.activity.users\",\n          canvas: \"sidebarcontent6\" },\n\n        empty6: { layout: \"rightSidebar\", name: \"bizagi.workportal.widgets.dummy\", canvas: \"sidebarcontent7\" } },\n\n      nav: { level: 0 },\n      belongs: { \"toLeftSidebarCD\": true, \"toRightSidebarCD\": true, \"toTaskSidebarCD\": false } },\n\n    \"ACTIVITYPLANOVERVIEW\": {\n      widgets: {\n        \"leftSidebar\": {\n          layout: \"leftsidebar\",\n          name: \"bizagi.workportal.widgets.left.sidebar\" },\n\n        \"menu\": {\n          layout: \"leftSidebar\",\n          name: \"bizagi.workportal.widgets.project.dashboard.menu.activity.plan\",\n          canvas: \"contentsidebar\" },\n\n        \"navigator\": {\n          \"layout\": \"navigator\",\n          \"name\": \"bizagi.workportal.widgets.navigator\",\n          \"refresh\": false },\n\n        \"contentDashboard\": {\n          \"layout\": \"content\",\n          \"name\": \"bizagi.workportal.widgets.project.content.dashboard\" },\n\n        overview: {\n          layout: \"contentDashboard\",\n          name: \"bizagi.workportal.widgets.project.plan.activities\",\n          canvas: \"contentprincipal\" },\n\n        \"rightSidebar\": {\n          \"layout\": \"contentrightsidebar\",\n          \"name\": \"bizagi.workportal.widgets.right.sidebar\" },\n\n        planSidebar: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.plan.sidebar\",\n          canvas: \"sidebarcontentextra\" },\n\n        planAction: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.plan.action\",\n          canvas: \"sidebarcontent1\" },\n\n        planState: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.plan.state\",\n          canvas: \"sidebarcontent3\" },\n\n        planProgress: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.plan.progress\",\n          canvas: \"sidebarcontent4\" },\n\n        planTime: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.plan.time\",\n          canvas: \"sidebarcontent5\" },\n\n        planParent: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.plan.parent\",\n          canvas: \"sidebarcontent6\" },\n\n        planUsers: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.plan.users\",\n          canvas: \"sidebarcontent7\" } },\n\n\n      nav: { level: 0 },\n      belongs: { \"toLeftSidebarCD\": true, \"toRightSidebarCD\": true, \"toTaskSidebarCD\": false } },\n\n    \"ACTIVITYPLANCOMMENTS\": {\n      widgets: {\n        \"leftSidebar\": {\n          layout: \"leftsidebar\",\n          name: \"bizagi.workportal.widgets.left.sidebar\" },\n\n        \"menu\": {\n          layout: \"leftSidebar\",\n          name: \"bizagi.workportal.widgets.project.dashboard.menu.activity.plan\",\n          canvas: \"contentsidebar\" },\n\n        \"contentDashboard\": {\n          \"layout\": \"content\",\n          \"name\": \"bizagi.workportal.widgets.project.content.dashboard\" },\n\n        discussions: {\n          layout: \"contentDashboard\",\n          name: \"bizagi.workportal.widgets.project.discussions\",\n          canvas: \"contentprincipal\" },\n\n        \"rightSidebar\": {\n          \"layout\": \"contentrightsidebar\",\n          \"name\": \"bizagi.workportal.widgets.right.sidebar\" },\n\n        discussionSidebar: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.discussion.sidebar\",\n          canvas: \"sidebarcontent1\" },\n\n        activitySidebar: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.plan.activity.sidebar\",\n          canvas: \"sidebarcontentextra\" },\n\n        activityAction: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.plan.activity.action\",\n          canvas: \"sidebarcontent3\" },\n\n        activityTime: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.plan.activity.time\",\n          canvas: \"sidebarcontent4\" },\n\n        activityProgress: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.plan.activity.progress\",\n          canvas: \"sidebarcontent5\" },\n\n        activityParent: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.plan.activity.parent\",\n          canvas: \"sidebarcontent6\" },\n\n        activityUsers: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.plan.activity.users\",\n          canvas: \"sidebarcontent7\" } },\n\n\n      nav: { level: 0 },\n      belongs: { \"toLeftSidebarCD\": true, \"toRightSidebarCD\": true, \"toTaskSidebarCD\": false } },\n\n    \"ACTIVITYPLANFILES\": {\n      widgets: {\n        \"leftSidebar\": {\n          layout: \"leftsidebar\",\n          name: \"bizagi.workportal.widgets.left.sidebar\" },\n\n        \"menu\": {\n          layout: \"leftSidebar\",\n          name: \"bizagi.workportal.widgets.project.dashboard.menu.activity.plan\",\n          canvas: \"contentsidebar\" },\n\n        \"contentDashboard\": {\n          \"layout\": \"content\",\n          \"name\": \"bizagi.workportal.widgets.project.content.dashboard\" },\n\n        files: {\n          layout: \"contentDashboard\",\n          name: \"bizagi.workportal.widgets.project.files\",\n          canvas: \"contentprincipal\" },\n\n        \"rightSidebar\": {\n          \"layout\": \"contentrightsidebar\",\n          \"name\": \"bizagi.workportal.widgets.right.sidebar\" },\n\n        filesPreview: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.filesPreview\",\n          canvas: \"sidebarcontent1\" },\n\n        activitySidebar: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.plan.activity.sidebar\",\n          canvas: \"sidebarcontentextra\" },\n\n        activityAction: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.plan.activity.action\",\n          canvas: \"sidebarcontent3\" },\n\n        activityTime: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.plan.activity.time\",\n          canvas: \"sidebarcontent4\" },\n\n        activityProgress: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.plan.activity.progress\",\n          canvas: \"sidebarcontent5\" },\n\n        activityParent: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.plan.activity.parent\",\n          canvas: \"sidebarcontent6\" },\n\n        activityUsers: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.plan.activity.users\",\n          canvas: \"sidebarcontent7\" } },\n\n\n      nav: { level: 0 },\n      belongs: { \"toLeftSidebarCD\": true, \"toRightSidebarCD\": true, \"toTaskSidebarCD\": false } },\n\n    \"ACTIVITYPLANTIMELINE\": {\n      widgets: {\n        \"leftSidebar\": {\n          layout: \"leftsidebar\",\n          name: \"bizagi.workportal.widgets.left.sidebar\" },\n\n        \"menu\": {\n          layout: \"leftSidebar\",\n          name: \"bizagi.workportal.widgets.project.dashboard.menu.activity.plan\",\n          canvas: \"contentsidebar\" },\n\n        \"contentDashboard\": {\n          \"layout\": \"content\",\n          \"name\": \"bizagi.workportal.widgets.project.content.dashboard\" },\n\n        \"timeline\": {\n          layout: \"contentDashboard\",\n          name: \"bizagi.workportal.widgets.project.timeline\",\n          canvas: \"contentprincipal\" },\n\n        \"rightSidebar\": {\n          \"layout\": \"contentrightsidebar\",\n          \"name\": \"bizagi.workportal.widgets.right.sidebar\" },\n\n        activitySidebar: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.plan.activity.sidebar\",\n          canvas: \"sidebarcontentextra\" },\n\n        activityAction: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.plan.activity.action\",\n          canvas: \"sidebarcontent1\" },\n\n        activityTime: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.plan.activity.time\",\n          canvas: \"sidebarcontent3\" },\n\n        activityProgress: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.plan.activity.progress\",\n          canvas: \"sidebarcontent4\" },\n\n        activityParent: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.plan.activity.parent\",\n          canvas: \"sidebarcontent5\" },\n\n        activityUsers: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.plan.activity.users\",\n          canvas: \"sidebarcontent6\" },\n\n        empty6: { layout: \"rightSidebar\", name: \"bizagi.workportal.widgets.dummy\", canvas: \"sidebarcontent7\" } },\n\n      nav: { level: 0 },\n      belongs: { \"toLeftSidebarCD\": true, \"toRightSidebarCD\": true, \"toTaskSidebarCD\": false } },\n\n    \"REFRESHALL\": {\n      widgets: {\n        \"leftSidebar\": {\n          layout: \"leftsidebar\",\n          name: \"bizagi.workportal.widgets.dummy\" },\n\n        \"contentDashboard\": { layout: \"content\", name: \"bizagi.workportal.widgets.dummy\" },\n        \"rightSidebar\": {\n          \"layout\": \"contentrightsidebar\",\n          \"name\": \"bizagi.workportal.widgets.dummy\" } },\n\n\n      nav: { level: 0 } } } },\n\n\n{\n\n  /*\r\n   *   Constructor\r\n   */\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    self.CONTEXT_HOME = \"HOME\";\n\n    params = params || {};\n    params.supportNav = true;\n\n    self.setContextsByNotifyEvents();\n    //Load templates\n    self.loadTemplates({\n      \"homeportal\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.homeportal\").concat(\"#homeportal-frame\") });\n\n\n    if (params.widgetName == \"homeportal\") {\n      if (!bizagi.referrerParams) bizagi.referrerParams = {};\n\n      bizagi.referrerParams.referrer = self.getWidgetName();\n    }\n\n    self.manager = bizagi.injector.get(\"widgetManager\", params);\n    self.manager.sub(\"notifyChange\", $.proxy(self.onNotifyChange, self));\n    self.sub(\"notify\", $.proxy(self.onNotifyChange, self));\n\n    bizagi.injector.registerInstance(\"homeportal\", self);\n\n    //Load smartinbox modal according to the params\n    if (self.params.widget === bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_SMARTINBOX && self.params.action === \"create\") {\n      self.publish(\"showDialogWidget\", {\n        selectedInboxData: {\n          smartInboxId: self.params.id,\n          owner: self.params.owner,\n          actionName: self.params.action },\n\n        modalParameters: {\n          title: bizagi.localization.getResource(\"workportal-widget-smartinbox-title-new\", \"New Smart Inbox\"),\n          width: \"800px\",\n          showCloseButton: false,\n          refreshInbox: false },\n\n        showBackButton: false,\n        closeVisible: false,\n        widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_SMARTINBOX,\n        buttons: {} });\n\n    }\n  },\n  /**\r\n      * Set context by behaviors sidebars\r\n      */\n  setContextsByNotifyEvents: function setContextsByNotifyEvents() {\n    var self = this;\n    self.params = self.params || {};\n    self.params.contextsSidebarActivity = [];\n    self.params.contextsWithoutLeftSidebarCaseDashboard = [];\n    self.params.contextsLeftSidebarCaseDashboard = [];\n    self.params.contextsWithoutRightSidebarCaseDashboard = [];\n    self.params.contextsRightSidebarCaseDashboard = [];\n\n\n    for (var context in this.Class.contexts) {\n      if (this.Class.contexts.hasOwnProperty(context)) {\n        if (this.Class.contexts[context].belongs && this.Class.contexts[context].belongs.toTaskSidebarCD) {\n          self.params.contextsSidebarActivity.push(context);\n        }\n\n        if (this.Class.contexts[context].belongs && this.Class.contexts[context].belongs.toLeftSidebarCD) {\n          self.params.contextsLeftSidebarCaseDashboard.push(context);\n        } else\n        {\n          self.params.contextsWithoutLeftSidebarCaseDashboard.push(context);\n        }\n\n        if (this.Class.contexts[context].belongs && this.Class.contexts[context].belongs.toRightSidebarCD) {\n          self.params.contextsRightSidebarCaseDashboard.push(context);\n        } else\n        {\n          self.params.contextsWithoutRightSidebarCaseDashboard.push(context);\n        }\n      }\n    }\n  },\n\n  /*\r\n      *   Returns the widget name\r\n      */\n  getWidgetName: function getWidgetName() {\n    return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_HOMEPORTAL;\n  },\n\n  /*\r\n      * Renders the template defined in the widget\r\n      */\n  renderContent: function renderContent() {\n    var self = this;\n    var d = $.Deferred();\n\n    var template = self.getTemplate(\"homeportal\");\n    self.content = template.render({});\n\n    d.resolve(self.content);\n\n    return d.promise();\n  },\n\n  /*\r\n      * links events with handlers\r\n      */\n  postRender: function postRender() {\n    var self = this;\n    self.manager.necesaryClean();\n    self.manager.setLayout(self.getContent());\n    var servicesPD = new bizagi.workportal.services.behaviors.projectDashboard(self.dataService);\n    $.when(servicesPD.getContextToShow(self.params)).done(function (dataPD) {\n\n      // User doesn't have permision to access this case\n      if (dataPD.responseGetCaseSummaryDetails && dataPD.responseGetCaseSummaryDetails.hasAccessToCase === false) {\n        self.publish(\"changeWidget\", {\n          widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ACCESS_DENIED });\n\n        return;\n      }\n\n      var currentContext = dataPD.contextToShow.toLowerCase();\n\n      if (currentContext === \"home\") {\n        if (!bizagiConfig.themesEnabled) {\n          self.loadContext(currentContext, self, dataPD);\n        } else\n        {\n          servicesPD.getCurrentTheme().done(function (theme) {\n            if (theme.name == \"classic\") {\n              self.loadContext(currentContext, self, dataPD);\n            } else\n            {\n              servicesPD.setCurrentTheme(theme);\n              self.setWidgetReady();\n            }\n          });\n        }\n      } else\n      {\n        self.loadContext(currentContext, self, dataPD);\n      }\n\n\n    });\n\n    self.subscribe(\"openCloseSidebar\", function () {\n      $(\".content-scroll\", self.getContent()).trigger(\"resize\");\n    });\n  },\n\n  loadContext: function loadContext(currentContext, self, dataPD) {\n    var contexts = self.Class.contexts;\n    var histName;\n    var level;\n\n    bizagi.loader.startAndThen(currentContext).then(function () {\n      if (dataPD.contextToShow !== self.CONTEXT_HOME) {\n        //Summary case return differnet result to get workitems.\n        dataPD.responseGetCaseSummaryDetails.hasGlobalForm = undefined;\n        $.extend(self.params, dataPD.responseGetCaseSummaryDetails, dataPD.params);\n        //histName = dataPD.nameWorkItem;\n      } else\n      {\n        level = 0;\n        histName = bizagi.localization.getResource(\"workportal-widget-home-title\");\n      }\n\n      $(\"#ui-bizagi-wp-project-homeportal-main\").show();\n\n      $.when(self.manager.updateView({\n        context: dataPD.contextToShow,\n        data: contexts[dataPD.contextToShow],\n        args: $.extend(self.params, {\n          histName: histName,\n          level: level,\n          showContextByMenuDashboard: dataPD.contextToShow }) })).\n\n      done(function () {\n        self.publish(\"showMainMenu\");\n        self.setWidgetReady();\n        self.manager.pub(\"homeportalReady\");\n      });\n    });\n  },\n\n  /**\r\n      * Notifies when an event is raised\r\n      */\n  onNotifyChange: function onNotifyChange(ev, params) {\n    var self = this,\n    context = params.type;\n\n    if (self.isValidContext(context)) {\n      //load the module\n      return bizagi.loader.startAndThen(context.toLowerCase()).then(function () {\n        var servicesPD = new bizagi.workportal.services.behaviors.projectDashboard(self.dataService);\n        servicesPD.removeCurrentTheme();\n\n        $.when(self.manager.updateView($.extend({\n          context: context,\n          data: self.Class.contexts[context] },\n        params))).done(function () {\n          $(\"#ui-bizagi-wp-project-homeportal-main\").show();\n          self.publish(\"showMainMenu\");\n        });\n      });\n    }\n\n    return self.manager.emit($.extend(params, { context: context }));\n  },\n\n  /**\r\n      * Returns true if the context is valid\r\n      */\n  isValidContext: function isValidContext(context) {\n    return this.Class.contexts[context] !== null &&\n    _typeof(this.Class.contexts[context]) == \"object\";\n  },\n\n  /**\r\n      * Override base dispose method\r\n      */\n  dispose: function dispose() {\n    var self = this;\n\n    self.manager.dispose();\n    self._super();\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /**\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: Bizagi Workportal Desktop HomePortal Controller\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: Danny González\r\n                                                                                                                                                                                                                                                                                                                                                                                */\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.dialognav\", {\n  contexts: {\n    \"TEMPLATEENGINE-VIEW\": {\n      widgets: {\n        \"navigator\": {\n          \"layout\": \"navigator\",\n          \"name\": \"bizagi.workportal.widgets.navigator\",\n          \"refresh\": false,\n          \"newInstance\": true },\n\n        \"template\": {\n          \"layout\": \"template\",\n          \"name\": \"bizagi.workportal.widgets.templates\",\n          \"newInstance\": true },\n\n        \"paginator\": {\n          \"layout\": \"paginator\",\n          \"name\": \"bizagi.workportal.widgets.paginator\",\n          \"newInstance\": true } },\n\n\n      nav: { level: 1 } } } },\n\n\n{\n\n  /**\r\n   * Constructor\r\n   */\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n    params = params || {};\n    params.supportNav = true;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    //Load templates\n    self.loadTemplates({\n      \"dialognavdata\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.dialognav\").concat(\"#dialognavdata-frame\") });\n\n\n    self.manager = new bizagi.workportal.widgets.manager(self.workportalFacade, self.dataService, '', params);\n    self.manager.sub(\"notifyChange\", $.proxy(self.onNotifyChange, self));\n\n    self.sub(\"notify\", $.proxy(self.onNotifyChange, self));\n  },\n\n  /**\r\n      *   Returns the widget name\r\n      */\n  getWidgetName: function getWidgetName() {\n    return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_DIALOGNAV;\n  },\n\n  /**\r\n      * Renders the template defined in the widget\r\n      */\n  renderContent: function renderContent() {\n    var self = this;\n    var template = self.getTemplate(\"dialognavdata\");\n    self.content = template.render({});\n\n    return self.content;\n  },\n\n  /**\r\n      * links events with handlers\r\n      */\n  postRender: function postRender() {\n    var self = this;\n    var paramsData = self.params.data.data || {};\n    var eventType = self.params.data.eventType || \"\";\n    var args = {\n      fromActionLauncher: true,\n      guidEntityCurrent: paramsData.guidEntityCurrent,\n      histName: paramsData.displayName,\n      level: 1,\n      page: 1,\n      reference: paramsData.reference,\n      referenceType: paramsData.referenceType,\n      showDateNavigator: false,\n      surrogateKey: paramsData.surrogateKey,\n      xpath: paramsData.xpath,\n      eventType: eventType };\n\n\n    self.manager.setLayout(self.getContent());\n    self.manager.updateView({\n      context: \"TEMPLATEENGINE-VIEW\",\n      data: self.Class.contexts[\"TEMPLATEENGINE-VIEW\"],\n      args: args,\n      skipRefresh: self.params.data.skipRefresh });\n\n  },\n\n  /**\r\n      * Notifies when an event is raised\r\n      */\n  onNotifyChange: function onNotifyChange(ev, params) {\n    var self = this;\n    var context = params.type;\n\n    if (self.isValidContext(context)) {\n      return self.manager.updateView($.extend({\n        context: context,\n        data: self.Class.contexts[context] },\n      params));\n    }\n    self.manager = self.manager || bizagi.injector.get(\"widgetManager\");\n    return self.manager.emit($.extend(params, { context: context }));\n  },\n\n  /**\r\n      * Returns true if the context is valid\r\n      */\n  isValidContext: function isValidContext(context) {\n    var self = this;\n    var classContext = self.Class.contexts;\n\n    return classContext[context] !== null && _typeof(classContext[context]) == \"object\";\n  },\n\n  unsubscribeEvents: function unsubscribeEvents() {\n    var self = this;\n    self.manager.unsub(\"notifyChange\");\n    self.unsub(\"notify\");\n  },\n\n  /**\r\n      * Override base dispose method\r\n      */\n  dispose: function dispose() {\n    var self = this;\n    self.unsubscribeEvents();\n    self.manager.dispose();\n    self._super();\n  } });","if (!$.bizagi) {\n  $.bizagi = { ui: {} };\n}\n\n$.bizagi.ui = {\n  controls: {\n    uitable: {\n      namespace: 'bizagi.ui.controls.uitable',\n      availableComponents: ['uicombo', 'uiradio', 'uicheckbox'],\n      css: 'biz-ui-controls-table',\n      tmpl: 'bizagi.ui.controls.table.template',\n      tmpl2: 'bizagi.ui.controls.table.tr.template',\n      tmpl3: 'bizagi.ui.controls.table.list.template' },\n\n    uicombo: {\n      namespace: 'bizagi.ui.controls.uicombo',\n      css: 'biz-ui-controls-combo',\n      tmpl: 'bizagi.ui.controls.combo.template',\n      tmpl2: 'bizagi.ui.controls.combo.list.template' },\n\n    uicheckbox: {\n      namespace: 'bizagi.ui.controls.uicheckbox',\n      css: 'biz-ui-controls-checkbox',\n      tmpl: 'bizagi.ui.controls.checkbox.template' },\n\n    uiradio: {\n      namespace: 'bizagi.ui.controls.uiradio',\n      css: 'biz-ui-controls-radio',\n      tmpl: 'bizagi.ui.controls.radio.template' },\n\n    uitreeview: {\n      namespace: 'bizagi.ui.controls.uitreeview',\n      css: 'biz-ui-controls-treeview',\n      tmpl: 'bizagi.ui.controls.treeview.template' },\n\n    uimultiselect: {\n      namespace: 'bizagi.ui.controls.multiselect',\n      css: 'biz-ui-controls-multiselect',\n      tmpl: 'bizagi.ui.controls.multiselect.template' } } };","/*\r\n*   Name: BizAgi Workportal Security Command\r\n*   Author: David Andres Niño\r\n*   Comments:\r\n*   -   This script will define a common class to print forms, and edit mode forms\r\n*/\n\n\n$.Class(\"bizagi.workportal.command.printform\", {}, {\n\n  init: function init(renderFactory) {\n    var self = this;\n\n    self.renderFactory = renderFactory;\n  },\n\n  print: function print(properties) {\n\n    var self = this;\n\n    var printParams = $.extend({}, properties);\n\n    $(document).triggerHandler(\"showDialogWidget\", {\n      widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_PRINT,\n      modalParameters: {\n        title: bizagi.localization.getResource(\"render-actions-print\"),\n        refreshInbox: false },\n\n      params: printParams,\n      referrer: bizagi.hasOwnProperty('referrerParams') && bizagi.referrerParams.hasOwnProperty('referrer') ? bizagi.referrerParams.referrer : \"inboxGrid\",\n      buttons: [\n      {\n        text: bizagi.localization.getResource(\"workportal-widget-dialog-box-print\"),\n        click: function click() {\n          var selfButton = $(this);\n\n          var frameTemplate = self.renderFactory.getTemplate(\"print-frame\");\n          var headerTemplate = self.renderFactory.getTemplate(\"print-frame-header\");\n\n          var executePrintWidgetAction = function executePrintWidgetAction() {\n\n            /**/\n            // Create a random name for the print frame.\n            var strFrameName = \"printer-\" + new Date().getTime();\n\n            var jFrame = $.tmpl(frameTemplate, { printID: strFrameName });\n            var jFrameHeader = $.tmpl(headerTemplate, { environment: bizagi.loader.environment, productBuild: bizagi.loader.productBuildToAbout, build: bizagi.loader.productBuild });\n\n            if (!printParams.fileName) {\n              printParams.fileName = window.parent.document.title;\n            }\n\n            jFrame.appendTo($(\"body:first\"));\n\n            // Get a FRAMES reference to the new frame.\n            var objFrame;\n\n            if (bizagi.util.isIE()) {\n              objFrame = window.frames[strFrameName];\n              if (!objFrame) {\n                var i = 0;\n                var length = window.frames.length;\n                for (; i < length; i++) {\n                  if (window.frames[i] && window.frames[i].name == strFrameName) {\n                    objFrame = window.frames[i];\n                    break;\n                  }\n                }\n              }\n            } else {\n              objFrame = window.frames[strFrameName];\n            }\n\n            // Get a reference to the DOM in the new frame.\n            var objDoc = objFrame.document || objFrame.contentWindow.document;\n\n            // Write the HTML for the document. In this, we will\n            // write out the HTML of the current element.\n            objDoc.open();\n            var objDocStr = \"<!DOCTYPE html PUBLIC \\\"-//W3C//DTD XHTML 1.0 Transitional//EN\\\" \\\"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\\\">\";\n\n            objDocStr += \"<html style='overflow: visible !important'> <head> <title>\" + printParams.fileName + \"</title>\";\n\n            objDocStr += jFrameHeader[0].innerHTML;\n\n            objDocStr += \"</head> <body class='bz-wp-widget-print bz-wp-widget-print-load' style='overflow: visible !important'>\";\n\n            objDocStr += $(\".bz-wp-widget-print\").html();\n\n            objDocStr += \"</body></html>\";\n\n\n            objDoc.write(objDocStr);\n\n            objDoc.close();\n            $(\".ui-bizagi-cell-readonly\", objDoc).css(\"maxHeight\", \"100%\");\n            if (bizagi.util.isIE()) {\n              var win = window.open(\"\", \"\", \"top=0,left=0,width=10,height=10\");\n\n              var styleLoading = '';\n              styleLoading += '<style>';\n              styleLoading += 'html{background: #293f55; color: #fff; text-align: center;}';\n              styleLoading += '</style>';\n\n              var textStyle = 'padding:10px auto; width:100%; text-align:center; font-family:Arial; font-size:12px;';\n\n              win.document.open();\n              win.document.write(styleLoading + '<div id=\"loading-emp\" style=\"' + textStyle + '\">' + bizagi.localization.getResource(\"webpart-render-loading\") + '</div>');\n              win.document.close();\n\n              win.document.open();\n              win.document.write(objDocStr);\n              win.document.close();\n\n              win.print();\n              var timeoutClose = setTimeout(function () {\n                win.close();\n                clearTimeout(timeoutClose);\n              }, 10000);\n            } else\n            {\n              objFrame.focus();\n              var tmpWindowTitle = window.parent.document.title;\n              window.parent.document.title = printParams.fileName;\n\n              var timeoutPrint = setTimeout(function () {\n                objFrame.print();\n                window.parent.document.title = tmpWindowTitle;\n                clearTimeout(timeoutPrint);\n              }, 500);\n            }\n\n            // Have the frame remove itself in about a minute so that\n            // we don't build up too many of these frames.\n            var timeoutRemove = setTimeout(function () {\n              jFrame.remove();\n              clearTimeout(timeoutRemove);\n            }, 1000);\n\n            selfButton.removeAttr('disabled');\n          };\n\n          selfButton.attr('disabled', 'disabled');\n\n\n          if ($('#bz-wp-widget-print').length === 0) {\n            var timeoutWidgetAction = setTimeout(function () {\n              executePrintWidgetAction();\n              clearTimeout(timeoutWidgetAction);\n            }, 1000);\n          } else {\n            executePrintWidgetAction();\n          }\n        } }] });\n\n\n\n  } });","/*\r\n*   Name: BizAgi Workportal Main Controller\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will define a base class to handle workportal layouts for any device\r\n*/\n\n$.Class.extend(\"bizagi.workportal.controllers.controller\", {}, {\n\n  /**\r\n                                                                 *   Constructor\r\n                                                                 */\n  init: function init(workportalFacade, dataService) {\n    // Set workportal facade\n    this.workportalFacade = workportalFacade;\n\n    // Set data service\n    this.dataService = dataService;\n\n    // Set l10n service\n    this.resources = bizagi.localization;\n\n    // Set a component container hash to use with templates\n    this.componentContainers = {};\n\n    // Define an object to hold the subscribe collection\n    this.subscribers = [];\n\n    // Flag to check if the element is disposed\n    this.disposed = false;\n\n    // Define an object to hold the templates used in the widget\n    this.tmpl = {};\n\n    //Define deferred to know if the templates were loaded\n    this.templatesDeferred = null;\n  },\n\n  /*\r\n     *   Returns the current workportal\r\n     */\n  getWorkportal: function getWorkportal() {\n    return this.workportalFacade.workportal;\n  },\n\n  /**\r\n     *   Publish an event so any controller can subscribe to it\r\n     */\n  publish: function publish(eventName, params) {\n    if (this.disposed) return null;\n    return $(document).triggerHandler(eventName, params);\n  },\n\n  /**\r\n     *   Subscribe to an event that any controller could trigger\r\n     */\n  subscribe: function subscribe(eventName, callback) {\n    if (this.disposed) return null;\n    $(document).bind(eventName, callback);\n    this.subscribers.push({ event: eventName });\n  },\n\n  /**\r\n     *   Subscribe to one time event that any controller could trigger\r\n     */\n  subscribeOneTime: function subscribeOneTime(eventName, callback) {\n    if (this.disposed) return null;\n    $(document).one(eventName, callback);\n    this.subscribers.push({ event: eventName });\n  },\n\n  /**\r\n     *   Un Subscribe to an event that any controller could trigger in this document\r\n     */\n  unsubscribe: function unsubscribe(eventName, callback) {\n    if (this.disposed) return null;\n    if (callback) {\n      $(document).unbind(eventName, callback);\n    } else\n    {$(document).unbind(eventName);}\n  },\n\n  /**\r\n     *   Makes the base processing of the layout (mix templates + data)\r\n     *   after all that processing will call a post-render method to\r\n     *   be implemented in each device to apply custom plugins\r\n     *   Returns a promise because the rendering could be asynchronous\r\n     */\n  render: function render() {\n    var self = this;\n    var defer = new $.Deferred();\n    self.renderingDeferred = new $.Deferred();\n\n    // Render content\n    $.when(self.areTemplatedLoaded()).\n    pipe(function () {\n      return self.renderContent();\n    }).\n    done(function () {\n\n      // Call post-render method\n      self.postRender();\n\n      // Resolve deferred\n      defer.resolve(self.getContent());\n      self.renderingDeferred.resolve();\n    });\n\n    return defer.promise();\n  },\n\n  /*\r\n     *   Returs the rendered content\r\n     */\n  getContent: function getContent() {\n    return this.content;\n  },\n\n  /*\r\n     *   Returns the mapped resource\r\n     */\n  getResource: function getResource(key, defaultValue) {\n    return this.resources.getResource(key, defaultValue);\n  },\n\n  /*\r\n     *   Renders the content for the current controller\r\n     *\r\n     */\n  renderContent: function renderContent() {\n    // Override on implementations\n    return \"\";\n  },\n\n\n  /*\r\n     *   To be overriden in each device to apply layouts\r\n     */\n  postRender: function postRender() {},\n\n  /*\r\n                                        *   Returns the component replaced tag selector\r\n                                        */\n  getComponentSelector: function getComponentSelector(component) {\n    return \"[data-bizagi-component=\" + component + \"]\";\n  },\n\n  /*\r\n     *   Returns the component replaced tag selector\r\n     */\n  getComponentContainer: function getComponentContainer(component) {\n    var self = this;\n    var content = self.getContent();\n    if (!content || content.length == 0) return null;\n\n    // Find component parent and cache it\n    //var componentElement = self.componentContainers[component];\n    //if (componentElement == null) {\n    // Find the component inside the main content\n    //componentElement = $(self.getComponentSelector(component), content);\n\n    // If still not found, try to check if content element is the component\n    //  if (componentElement.length == 0 && content.is(self.getComponentSelector(component))) {\n    //      componentElement = content;\n    //  }\n\n    // Cache the component\n    // self.componentContainers[component] = componentElement;\n    //}\n    //return self.componentContainers[component];\n    return $(self.getComponentSelector(component), content);\n  },\n\n  /*\r\n     *   Asks for a full resize\r\n     */\n  resizeLayout: function resizeLayout() {\n    this.publish(\"resizeLayout\");\n  },\n\n  /*\r\n     * Do stuff when a resize has been triggered\r\n     */\n  performResizeLayout: function performResizeLayout() {},\n\n  /*\r\n                                                          *   Disposes the widget\r\n                                                          */\n  dispose: function dispose() {\n    var self = this;\n\n    if (self.subscribers != null) {\n      // Remove all subcriptions\n      $.each(self.subscribers, function (i, item) {\n        self.unsubscribe(item.event);\n      });\n    }\n\n    setTimeout(function () {\n      bizagi.util.dispose(self);\n      self.disposed = true;\n    }, bizagi.override.disposeTime || 50);\n  },\n\n\n  /*\r\n     * Loads dinamically a set of templates\r\n     */\n  loadTemplates: function loadTemplates(templates) {\n    var self = this,\n    def = self.templatesDeferred = new $.Deferred(),\n    tmplPromises = [];\n\n    var useNewEngine = templates.useNewEngine != undefined ? templates.useNewEngine : true;\n\n    for (var name in templates) {\n      if (name != \"useNewEngine\") {\n        tmplPromises.push(\n        self.loadTemplate({\n          \"name\": name,\n          \"path\": templates[name],\n          \"useNewEngine\": useNewEngine }));\n\n\n      }\n    }\n\n    $.when.apply($, tmplPromises).\n    done(function () {\n      def.resolve();\n    });\n\n    return def.promise();\n  },\n\n\n  /*\r\n     * Loads template \r\n     */\n  loadTemplate: function loadTemplate(data) {\n    var self = this;\n\n    if (self.tmpl[data.name]) {\n      return self.tmpl[data.name];\n    } else {\n      if (data.useNewEngine) {\n        return bizagi.templateService.getTemplateWidget(data.path).\n        done(function (tmpl) {\n          self.tmpl[data.name] = tmpl;\n        });\n      }\n\n      return bizagi.templateService.getTemplate(data.path).\n      done(function (tmpl) {\n        self.tmpl[data.name] = tmpl;\n      });\n\n    }\n  },\n\n  /*\r\n     * Gets template \r\n     */\n  getTemplate: function getTemplate(name) {\n    if (this.tmpl.hasOwnProperty(name)) {\n      return this.tmpl[name];\n    }\n    return null;\n\n  },\n\n  /*\r\n     * Returns a promise, it is resoved when the widget is rendered\r\n     */\n  isRendered: function isRendered() {\n    var self = this;\n\n    if (!self.renderingDeferred) {\n      return false;\n    }\n    return self.renderingDeferred.promise();\n  },\n\n  /*\r\n     *\r\n     */\n  areTemplatedLoaded: function areTemplatedLoaded() {\n    return this.templatesDeferred;\n  } });","/*\r\n*   Name: BizAgi Workportal Main Controller\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will define a base class to handle workportal layouts for any device\r\n*   -   This layout must contain a menu and widget container placeholders\r\n*/\n\n\n// Defines the main controller\nbizagi.workportal.controllers.controller.extend(\"bizagi.workportal.controllers.main\", {}, {\n\n  /*\r\n                                                                                            *   Constructor\r\n                                                                                            */\n  init: function init(workportalFacade, dataService) {\n    var self = this;\n\n    // Define regex to apply to templates\n    self.componentRegex = /{{component (\\w+)}}/g;\n\n    // Call base\n    this._super(workportalFacade, dataService);\n\n    // Subscribe to change widget event\n    this.subscribe(\"changeWidget\", function (e, params) {\n\n      bizagi[\"currentWidget\"] = params.widgetName;\n\n      var def = new $.Deferred();\n\n      self.subscribeOneTime(\"onWidgetIncludedInDOM\", function (e, p) {\n        def.resolve();\n      });\n\n      // $.when(bizagi.util.autoSave()).done(function () {\n      $.when(bizagi.util.liveSave(params.widgetName), bizagi.util.autoSave()).done(function () {\n\n        $(document).data('auto-save', '');\n        bizagi.util.liveProcessesEvents.saveEvent.saveLivePromise = null;\n\n        if (params.widgetName == bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID ||\n        params.widgetName == bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX) {\n          bizagi.util.defaultWidget(params.widgetName);\n        }\n\n        bizagi.util.setContext({\n          widget: params.widgetName });\n\n        self.publish('cleanAllWidgets');\n        self.setWidget(params);\n\n      });\n\n      return def.promise();\n    });\n\n    // Subscribe to add dialog to stack dialogs\n    this.subscribe(\"addDialogToDialogStack\", function (e, params) {\n      // Add dialog to stack\n      self.addDialogToDialogStack(params);\n    });\n\n    // Subscribe to dialog widget event\n    this.subscribe(\"showDialogWidget\", function (e, params) {\n      // Shows a dialog a widget                \n      return self.showDialogWidget(params);\n    });\n\n    // Subscribe to clsoe current dialog\n    this.subscribe(\"closeCurrentDialog\", function (e, params) {\n      // Close the current dialog widget\n      return self.closeCurrentDialog(params);\n    });\n\n    // Subscribe to close all dialogs\n    this.subscribe(\"closeAllDialogs\", function (e, params) {\n      // Close all dialogs\n      self.closeAllDialogs();\n    });\n\n    // Subscribe to popup widget event\n    this.subscribe(\"popupWidget\", function (e, params) {\n      // Shows a popup a widget\n      self.popupWidget(params);\n    });\n\n    // Subscribe to pop widget event\n    this.subscribe(\"popWidget\", function (e, params) {\n      // Shows a pop a widget\n      self.popWidget(params);\n    });\n\n    // Subscribe to push widget event\n    this.subscribe(\"pushWidget\", function (e, params) {\n      // Shows a push a widget\n      self.pushWidget(params);\n    });\n\n\n    // Subscribe to execute action event\n    this.subscribe(\"executeAction\", function (e, params) {\n      // Executes the action\n      self.executeAction(params);\n    });\n\n    // Subscribe to resize layout event\n    this.subscribe(\"resizeLayout\", function () {\n      // Resize all the layout\n      self.performResizeLayout();\n    });\n\n    // Subscribe to dispose Widget event\n    this.subscribe(\"disposeWidget\", function () {\n      // Resize all the layout\n      self.disposeWidget();\n    });\n\n    // Subscribe to 'append Widget to' event\n    this.subscribe(\"appendWidgetTo\", function (e, params) {\n      // attach the widget to a given element\n      return self.appendWidgetTo(params);\n    });\n\n    // Subscribe to Notifications event\n    /**\r\n           * @param params {notification, type}\r\n           */\n    this.subscribe(\"notification\", function (e, params) {\n      NotificationDispatcher.dispatch(params.notification, params.type);\n    });\n\n    // Subscribe to 'refreshQueryFormShortCut' event\n    this.subscribe(\"refreshQueryFormShortCut\", function (e, params) {\n      // attach the widget to a given element\n      return self.refreshQueryFormShortCut(params);\n    });\n  },\n\n  /*\r\n     *   Renders the content for the current controller\r\n     *\r\n     */\n  renderContent: function renderContent() {\n    var self = this;\n    var template = self.workportalFacade.getTemplate(\"workportal\");\n\n    // Render content\n    var content = self.content = $.tmpl(template, {});\n\n    // Add workarea\n    self.workarea = self.workportalFacade.getWorkareaController();\n\n    // Add menu\n    var menu = self.menu = self.workportalFacade.getMenuController();\n    $.when(menu.render()).\n    done(function () {\n      // Build menu\n      menu.getContent().appendTo(self.getComponentContainer(\"menu\"));\n    });\n\n    // Set resize layout event\n    $(window).resize(function () {\n      self.resizeLayout();\n    });\n\n    return content;\n  },\n\n  /*\r\n     *   Sets the current working widget\r\n     */\n  setWidget: function setWidget(params) {\n    var self = this;\n    self.currentWidget = params.widgetName;\n    self.currentWidgetParams = $.extend({}, params, { menu: self.getMenu() });\n\n    // Set assertion to avoid calls without widget name\n    bizagi.assert(!bizagi.util.isEmpty(params.widgetName), \"No widget name defined for changeWidget call\");\n\n    // Renders the workarea again\n    self.renderWorkarea();\n  },\n\n  /*\r\n     *   Executes the desired action\r\n     */\n  executeAction: function executeAction(params) {\n    var self = this;\n\n    if (params.action == bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING) {\n      bizagi.loader.start(\"activity\").then(function () {\n        var actionController = self.workportalFacade.getAction(params.action);\n\n        // Executes the action\n        actionController.execute(params);\n      });\n    } else\n    if (params.action == bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_SEARCH) {\n      bizagi.loader.start(\"inbox\").then(function () {\n        var actionController = self.workportalFacade.getAction(params.action);\n\n        // Executes the action\n        actionController.execute(params);\n      });\n    }\n  },\n\n  /*\r\n     *   Renders the workarea based on the current widget\r\n     */\n  renderWorkarea: function renderWorkarea() {\n    var self = this;\n\n    var workarea = self.workarea;\n\n    if (workarea) {\n      var workareaContainer = self.getComponentContainer(\"workarea\");\n\n      // clean widgets\n      self.cleanWidgets();\n\n      // Clean workarea\n      workareaContainer.empty();\n\n      //Prepare first load. If inboxGrid, first: load module inbox\n      if (!bizagi.util.isEmpty(self.currentWidget) && self.currentWidget != \"none\") {\n        self.currentWidgetParams = $.extend({}, self.currentWidgetParams, { menu: self.getMenu() });\n        if (self.currentWidget === bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID ||\n        self.currentWidget === bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX) {\n          bizagi.loader.start(\"inbox\").then(function () {\n            self.loadWidgetFromFacade(workarea, workareaContainer);\n          });\n        } else\n        {\n          self.loadWidgetFromFacade(workarea, workareaContainer);\n        }\n      }\n    }\n  },\n\n  /*\r\n      *   Load widget from facade\r\n      */\n  loadWidgetFromFacade: function loadWidgetFromFacade(workarea, workareaContainer) {\n    var self = this;\n    // Load widget from facade\n    $.when(\n    self.workportalFacade.getWidget(self.currentWidget, self.currentWidgetParams)).\n    pipe(function (widgetController) {\n      // Set into workarea\n      workarea.setWidget(widgetController);\n      return workarea.render();\n\n    }).done(function () {\n\n      var renderedContent = workarea.getContent();\n      if (renderedContent) {\n        // Replace workarea\n        renderedContent.appendTo(workareaContainer);\n\n        //Resize layout on workarea\n        self.resizeLayout();\n\n        // Trigger \"widget included in dom\" event\n        self.publish(\"onWidgetIncludedInDOM\");\n      }\n    });\n  },\n\n  /*\r\n     *   Shows a widget inside a modal dialog\r\n     *   Implement on each device\r\n     */\n  showDialogWidget: function showDialogWidget(params) {},\n\n  /*\r\n                                                          *   Close the current modal dialog\r\n                                                          *   Implement on each device\r\n                                                          */\n  closeCurrentDialog: function closeCurrentDialog(params) {},\n\n  /*\r\n                                                              *   Popup a widget\r\n                                                              *   Implement on each device\r\n                                                              */\n  popupWidget: function popupWidget(params) {},\n\n  /*\r\n                                                 *   Add dialog to dialogStack\r\n                                                 */\n  addDialogToDialogStack: function addDialogToDialogStack(dialog) {},\n\n  /**\r\n                                                                      *   Close all modal dialogs\r\n                                                                      *   Implement on each device\r\n                                                                      */\n  closeAllDialogs: function closeAllDialogs() {},\n\n  /*\r\n                                                  *   push a widget\r\n                                                  *   Implement on each device\r\n                                                  */\n  pushWidget: function pushWidget(params) {\n    var self = this;\n    self.currentWidget = params.widgetName;\n    self.currentWidgetParams = $.extend({}, params, { menu: self.getMenu() });\n    // Set assertion to avoid calls without widget name\n    bizagi.assert(!bizagi.util.isEmpty(params.widgetName), \"No widget name defined for pushWidget call\");\n  },\n\n  /*\r\n     *   pop a widget\r\n     *   Implement on each device\r\n     */\n  popWidget: function popWidget(params) {\n    var self = this;\n    self.currentWidget = params.widgetName;\n    self.currentWidgetParams = $.extend({}, params, { menu: self.getMenu() });\n    // Set assertion to avoid calls without widget name\n    bizagi.assert(!bizagi.util.isEmpty(params.widgetName), \"No widget name defined for popupWidget call\");\n\n\n  },\n\n  disposeWidget: function disposeWidget(params) {\n    var self = this;\n    self.currentWidget = params.widgetName;\n    self.currentWidgetParams = $.extend({}, params, { menu: self.getMenu() });\n    // Set assertion to avoid calls without widget name\n    bizagi.assert(!bizagi.util.isEmpty(params.widgetName), \"No widget name defined for disposeWidget call\");\n\n\n  },\n\n  /*\r\n     *   Shows a widget inside a given element\r\n     *   paramms: widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_***,\r\n     *            appendToElement: \"#elementid\" or \".elementClass\"\r\n     *   Implement on each device\r\n     */\n  appendWidgetTo: function appendWidgetTo(params) {},\n\n  /*\r\n                                                      *   When the window resizes, runs this method to adjust stuff in each controller or widget\r\n                                                      *   Override when needed  \r\n                                                      */\n  performResizeLayout: function performResizeLayout() {\n    var self = this;\n    var content = self.getContent();\n\n    // Resize content\n    self.resizeContainer(content, $(window).height());\n\n    // Call menu, and workarea resize layout\n    if (self.menu) self.menu.performResizeLayout();\n    if (self.workarea) self.workarea.performResizeLayout();\n  },\n\n  /*\r\n     *   Resizes a container according its rules\r\n     */\n  resizeContainer: function resizeContainer(container, containerHeight) {\n    var self = this;\n\n    // Only perform layout resize if the container has adjustable elements\n    var adjustableChildren = container.children(\".ui-bizagi-component-adjustable\");\n    var adjustableContainersHeight = containerHeight;\n\n    if (adjustableChildren.length > 0) {\n      // Sum fixed content\n      var fixedContentHeight = 0;\n      $.each(container.children(), function (i, element) {\n        if (!$(element).hasClass(\"ui-bizagi-component-adjustable\") && $(element).css('display') !== 'none') fixedContentHeight += $(element).height();\n      });\n\n      // Resize adjustable elements\n      adjustableContainersHeight = containerHeight - fixedContentHeight;\n\n      var overflowY = \"\";\n      $.each(adjustableChildren, function (i, element) {\n\n        overflowY = $(element).css(\"overflow-y\") != \"\" ? $(element).css(\"overflow-y\") : \"hidden\";\n        if (overflowY == \"visible\") overflowY = \"hidden\";\n        $(element).addClass(\"ui-bizagi-adjustable\");\n        var marginTop = $(element).css(\"margin-top\") === \"auto\" ? 0 : Number($(element).css(\"margin-top\").replace(\"px\", \"\"));\n        var finalHeight = adjustableContainersHeight - marginTop;\n\n        $(element).css({\n          \"height\": finalHeight,\n          \"overflow-y\": overflowY });\n\n\n      });\n    }\n\n    // Resize inner containers if it has any adjustable inner containers\n    $.each(container.children(), function (i, element) {\n      if ($(element).find(\".ui-bizagi-component-adjustable\").length > 0) {\n        $(element).addClass(\"ui-bizagi-component-adjustable\");\n        self.resizeContainer($(element), adjustableContainersHeight);\n      }\n    });\n  },\n\n  /*\r\n     *   Return the menu component\r\n     */\n  getMenu: function getMenu() {\n    return this.menu;\n  },\n\n  refreshQueryFormShortCut: function refreshQueryFormShortCut(params) {} });","/*\r\n *   Name: BizAgi Workportal Menu Controller\r\n *   Author: Diego Parra\r\n *   Comments:\r\n *   -   This script will define a base class to handle manu layouts for any device\r\n */\n\nbizagi.workportal.controllers.controller.extend(\"bizagi.workportal.controllers.menu\", {}, {\n  init: function init(workportalFacade, dataService) {\n    var self = this;\n    self._super(workportalFacade, dataService);\n\n    // Subscribe to change widget event\n    this.subscribe(\"showMainMenu\", function (e, params) {\n      var def = new $.Deferred();\n      $(self.getContent()).closest(\"#ui-bizagi-wp-menu\").show();\n      return def.promise();\n    });\n  },\n  /*\r\n     *   Renders the content for the current controller\r\n     *   Returns a deferred because it has to load the current user\r\n     */\n  renderContent: function renderContent() {\n    var self = this;\n    var template = self.workportalFacade.getTemplate(\"menu\");\n    var defer = new $.Deferred();\n    var defaultImg = \"iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAMAAAD04JH5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAZQTFRF////////VXz1bAAAAAJ0Uk5T/wDltzBKAAAA+0lEQVR42uzaSxLCMAwE0c79L82SFMXHJpKHhJ59at4utmS2cBAgQMCBT3dZDuBJ1gF4mSUA3qYfALUCauvnCZT3Twqo758T0NA/JaCjf0ZwIgC0COjpHxecBgBNAgF09Y8KBAgQIECAAAFnAXgiEiDAq5mA8wEuOCERIMBBpYAfAMTH9QLygPjOSEB+b5gHxFe3I4Lt4oD0+v4HAPEXFAIECBDw70+58oDw7zh7JMteTrPTcr5MDYBDOQqgIAcAFOU7AKWZBlCeKQAtGQXQmAEAzfkAYEHeAWC5gOX1DwQS/XsBkf6dgEz/XSBAgAABAgQIECBAQBxwE2AAjnkjnL/SDJsAAAAASUVORK5CYII=\";\n\n\n    self.customPreferencesObj = new bizagi.services.preferences();\n    self.customFormats = new bizagi.services.preferences.customFormats();\n    var customPreferencesValues = self.customPreferencesObj.getPreferences();\n\n    /** Manage windows maintenance **/\n    var windowMaintenance = new bizagi.workportal.services.windowMaintenance(self.dataService);\n\n    $.datepicker.setDefaults(bizagi.localization.getResource(\"datePickerRegional\"));\n\n    //symbol from Rest/Users/CurrentUser, in server : bizagi.currentUser.symbol =  Business/Localization/Currency Symbol  || {language}.numericFormat.symbol\n    var currencyInfo = bizagi.localization.getResource('numericFormat');\n    if (currencyInfo) {\n      currencyInfo.decimalSymbol = customPreferencesValues.decimalSeparator || bizagi.currentUser.decimalSeparator || currencyInfo.decimalSymbol;\n      currencyInfo.symbol = customPreferencesValues.symbol || bizagi.currentUser.symbol || currencyInfo.symbol;\n      currencyInfo.digitGroupSymbol = customPreferencesValues.thousandSeparator || bizagi.currentUser.groupSeparator || currencyInfo.digitGroupSymbol;\n\n      bizagi.localization.setResource('numericFormat', currencyInfo);\n      if (BIZAGI_DEFAULT_CURRENCY_INFO) {\n        BIZAGI_DEFAULT_CURRENCY_INFO.decimalDigits = bizagi.currentUser.decimalDigits;\n        BIZAGI_DEFAULT_CURRENCY_INFO.decimalSeparator = currencyInfo.decimalSymbol;\n        BIZAGI_DEFAULT_CURRENCY_INFO.symbol = currencyInfo.symbol;\n        BIZAGI_DEFAULT_CURRENCY_INFO.groupSeparator = currencyInfo.digitGroupSymbol;\n      }\n    }\n\n    if (bizagi.currentUser.uploadMaxFileSize) {\n      BIZAGI_SETTINGS.UploadMaxFileSize = bizagi.currentUser.uploadMaxFileSize;\n      bizagi.util.changeData({ uploadMaxFileSize: BIZAGI_SETTINGS.UploadMaxFileSize });\n    }\n\n    self.overrideUserPreferences();\n\n    self.security = new bizagi.workportal.command.security(self.dataService);\n    $.when(self.security.getSecurity()).\n    done(function (security) {\n      // Checking for DisplayOptions into security(response)\n      if (bizagi.override.enableFeatureDisplayOptions === false) {\n        security.DisplayOptions = false;\n      }\n      // Render content\n      var content = self.content = $.tmpl(template, $.extend(bizagi.currentUser, {\n        environment: bizagi.loader.environment || \"\",\n        build: bizagi.loader.build,\n        base64image: bizagi.themeLogo || \"img/img/barra/logo-bizagi.svg\",\n        photo: \"data:image/png;base64,\" + (bizagi.currentUser.userPicture ? bizagi.currentUser.userPicture : defaultImg),\n        hasPicture: bizagi.currentUser.userPicture ? true : false,\n        initials: bizagi.currentUser.userFullName ? bizagi.currentUser.userFullName.getInitials() : \"\",\n        security: security,\n        showQrMobileMenu: bizagi.override.showQrMobileMenu !== false }));\n\n      defer.resolve(content);\n    });\n\n    return defer.promise();\n  },\n\n  overrideUserPreferences: function overrideUserPreferences() {\n    var self = this;\n    self.customFormats.overrideLocalization();\n  },\n\n  /**\r\n      *   Helper method to change the current widget in the workportal\r\n      * @param params\r\n      */\n  changeWidget: function changeWidget(params) {\n    var self = this;\n    self.publish(\"changeWidget\", params);\n  },\n\n  /**\r\n      *   Helper method to show a widget inside a dialog in the wokportal\r\n      * @param params\r\n      */\n  showDialogWidget: function showDialogWidget(params) {\n    var self = this;\n    return self.publish(\"showDialogWidget\", params);\n  },\n\n  /**\r\n      *\r\n      */\n  performResizeLayout: function performResizeLayout() {\n    var self = this;\n    self.adjustMenuWP();\n  },\n\n  adjustMenuWP: function adjustMenuWP() {\n    var buttonMenuContainer = $(\"#ui-bizagi-wp-app-menu-bt-container\"),\n    /**\r\n                                                                         * add tolerance of an element and after calculate everything restore original size\r\n                                                                         */\n    toleranceFor = function toleranceFor(Jelement) {\n      var changeWidth = function changeWidth(sign) {\n        Jelement.css(\"width\", sign + \"=10\");\n      };\n      return {\n        start: changeWidth.bind(null, \"-\"),\n        end: changeWidth.bind(null, \"+\") };\n\n    };\n    if (buttonMenuContainer.length === 1) {\n      // Define width for elements with responsive\n      var elementsMargin = 70, //jquery does not get the margin width with outerWidth :(\n      searchInputWidth = $(\"#ui-bizagi-wp-widget-searchContainer\").outerWidth() + 10;\n      toleranceFor(buttonMenuContainer).start();\n      var widthComponentsWithoutResponsive = searchInputWidth + $(\"#user\").outerWidth() +\n      $(\"#ui-bizagi-wp-app-menu-logo-container\").outerWidth() + elementsMargin;\n\n      // Define maximum width of menu\n      var limitWidth = $(\"#ui-bizagi-wp-app-menu-container\").width() - widthComponentsWithoutResponsive;\n      buttonMenuContainer.width(limitWidth);\n\n      //restart visible buttons\n      $(\"span.text\", selectorMenuButtons).show();\n\n      // hide button text by button text until all buttons and text is ok.\n      var selectorMenuButtons = $(\"#ui-bizagi-wp-app-menu-bt-container li\");\n      var indexButtonToHide = indexLastButton = selectorMenuButtons.length - 1;\n      var thereIsAButtonOverlaped = true;\n\n      while (thereIsAButtonOverlaped) {\n        if (indexButtonToHide < 0) {\n          break;\n        }\n        if (buttonMenuContainer.position().top > 0 || selectorMenuButtons.eq(indexLastButton).position().top > 0) {\n          $(\"span.text\", selectorMenuButtons).eq(indexButtonToHide).hide();\n          indexButtonToHide -= 1;\n        } else\n        {\n          toleranceFor(buttonMenuContainer).end();\n          thereIsAButtonOverlaped = false;\n        }\n      }\n    }\n  } });","/*\r\n*   Name: BizAgi Workportal Workarea Controller \r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will define a base class to handle all the workarea of the application\r\n*/\n\nbizagi.workportal.controllers.controller.extend(\"bizagi.workportal.controllers.workarea\", {}, {\n\n  /*\r\n                                                                                                *   This method sets the internal widget to be rendered\r\n                                                                                                */\n  setWidget: function setWidget(widget) {\n    var self = this;\n    self.widget = widget;\n  },\n\n  disposeWidget: function disposeWidget() {\n    var self = this;\n    if (self.widget) {\n      self.widget.dispose();\n      delete self.widget;\n    }\n  },\n\n  cleanWidgets: function cleanWidgets() {\n    var self = this;\n\n    if (self.widget) {\n      self.widget.clean();\n    }\n  },\n\n  /*\r\n     *   Renders the content for the current controller\r\n     *   Returns a deferred because it has to load the current user\r\n     */\n  renderContent: function renderContent() {\n    var self = this;\n\n    var defer = new $.Deferred();\n\n    if (self.widget) {\n      // Renders the widget\n      $.when(self.widget.render()).\n      done(function () {\n        self.content = self.widget.getContent();\n        defer.resolve(self.content);\n      });\n\n    } else {\n      self.content = $(\"<div/>\");\n      defer.resolve(self.content);\n    }\n\n    return defer.promise();\n  },\n\n  /*\r\n     *   Resizes layout for controller\r\n     */\n  performResizeLayout: function performResizeLayout() {\n    var self = this;\n\n    // Call internal widget resize\n    if (self.widget) self.widget.performResizeLayout();\n  } });","/*\r\n *   Name: BizAgi Workportal Webpart Controller\r\n *   Author: Diego Parra\r\n *   Comments:\r\n *   -   This script will define a base class to all widgets\r\n */\n\n/* Asegura que el namespace este creado*/\nbizagi = typeof bizagi !== \"undefined\" ? bizagi : {};\nbizagi.webpart = typeof bizagi.webpart !== \"undefined\" ? bizagi.webpart : {};\nbizagi.webpart.subscribe = function (eventName, callback) {\n  $(document).bind(eventName, callback);\n};\nbizagi.webpart.publish = function (eventName, params) {\n  return $(document).triggerHandler(eventName, params);\n};\n\nbizagi.webpart.whenCreated = function (webpartName, callback) {\n  bizagi.webpart.subscribe(\"bizagi-webpart-created\", function (params) {\n    if (params.webpart.Class.fullname == \"bizagi.workportal.webparts.\" + webpartName) {\n      if (callback) callback(params);\n    }\n  });\n};\n\nbizagi.webpart.whenExecuted = function (webpartName, callback) {\n  bizagi.webpart.subscribe(\"bizagi-webpart-executed\", function (params) {\n    if (params.webpart.Class.fullname == \"bizagi.workportal.webparts.\" + webpartName) {\n      if (callback) callback(params);\n    }\n  });\n};\n\n\nbizagi.workportal.controllers.controller.extend(\"bizagi.workportal.webparts.webpart\", {},\n\n{\n  /*\r\n   *   Constructor\r\n   */\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n\n    // Call base\n    this._super(workportalFacade, dataService, params);\n\n    // Set helper\n    this.helper = new bizagi.workportal.webpart.helper(this);\n\n    this.canvas = params.canvas;\n\n    // Set project\n    this.project = params.project;\n    this.sharepointProxyPrefix = params.sharepointProxyPrefix;\n\n    // Set namespace\n    this.namespace = params.namespace;\n    // visible\n    this.isVisible = true;\n    this.isWebpartInIFrame = typeof params.isWebpartInIFrame != 'undefined' ? params.isWebpartInIFrame : self.helper.isWebpartInIFrame();\n    this.adjustButtonsToContent = params.adjustButtonsToContent;\n    this.remoteServer = params.remoteServer;\n\n    if (this.remoteServer) {\n\n      //postmessage object definition\n      self.postmessageSocket = new bizagi.postmessage({\n        remoteServer: this.remoteServer,\n        destination: window.parent,\n        origin: window });\n\n      self.postmessageSocket.iframeidentifier = BIZAGI_IFRAME_IDENTIFIER;\n      self.postmessageSocket.receive = function (msg) {\n        var params = msg.data;\n\n        // Auto-discard self messages\n        if (params.message) {\n          if (params.message.iframeidentifier == BIZAGI_IFRAME_IDENTIFIER) {\n            return;\n          }\n        }\n\n        if (params.event) {\n          switch (params.event) {\n            case \"postmessage-bizagi-canCloseIFramePopUp\":\n\n              if (self.canHide && self.Class.shortName == params.message.webPartDestine) {\n                $.when(self.canHide()).\n                done(function () {\n                  var iframeclosemsg = {};\n                  iframeclosemsg.event = \"postmessage-bizagi-closeIFramePopUp\";\n                  iframeclosemsg.message = {};\n                  iframeclosemsg.message.iframeidentifier = BIZAGI_IFRAME_IDENTIFIER;\n                  self.postmessageSocket.send(iframeclosemsg);\n                  var showCasesMSG = {\n                    message: {} };\n\n                  showCasesMSG.event = \"ui-bizagi-reload-cases\";\n                  self.postmessageSocket.send(showCasesMSG);\n                });\n              }\n              break;\n            case \"postmessage-bizagi-openParentPopUp\":\n              //Do nothing this message is for parent\n              break;\n            default:\n              //re send message to other webparts\n              self.publish(params.event, params.message, true);\n              break;}\n\n        } else {\n          //set iframe height and width\n\n        }\n      };\n      self.postmessageSocket.startReceiving();\n      self.sendDimensionsiFrame();\n    }\n  },\n  sendDimensionsiFrame: function sendDimensionsiFrame(mandatorysend) {\n    var self = this;\n    //If webpart is put in iFrame resize the iframe with content height\n    //else if iframe show in popUp FixButtons, is desirable\n    //If namespace is defined this is a chil webpart\n    //delay wait for finish render\n    if (self.remoteServer) {\n      if (!!!self.adjustButtonsToContent && (!!!self.namespace || mandatorysend)) {\n        if (self.isWebpartInIFrame) {\n          if (self.canvas[0]) {\n            //send dimensions in resize event \n            var canvasobject = self.canvas[0];\n            if (canvasobject.attachEvent) {\n              canvasobject.onresize = function () {\n                self.sendDimensionsiFramePostMessage();\n              };\n            } else {\n              bizagi.addResizeListener(canvasobject, function (e) {\n                self.sendDimensionsiFramePostMessage();\n              });\n            }\n          }\n        }\n      }\n    }\n  },\n\n\n  sendDimensionsiFramePostMessage: function sendDimensionsiFramePostMessage() {\n    var self = this;\n    var iframeDimentions = {\n      message: {} };\n\n    iframeDimentions.message.iframeName = BIZAGI_IFRAME_IDENTIFIER;\n    iframeDimentions.message.iframeHeight = $('body').height();\n    if (self.Class.shortName == \"newcaselist\") {\n    } else {\n      iframeDimentions.message.iframeWidth = undefined;\n    }\n    self.postmessageSocket.send(iframeDimentions);\n  },\n\n  /**\r\n      *   Publish an event so any controller can subscribe to it\r\n      */\n  publish: function publish(eventName, params, notFireToIframe) {\n    var self = this;\n    eventName = this.namespace ? this.namespace + \".\" + eventName : eventName;\n    //publish event to iframe\n    if (!!!notFireToIframe && eventName.indexOf(\"bizagi-webpart-created\") == -1 && eventName.indexOf(\"bizagi-webpart-executed\") == -1 && self.postmessageSocket) {\n      var msg = {};\n      msg.event = eventName;\n      //By iFrame messages it can not transmit the canvas object or object workportal\n      if (params) {\n        params.canvas = null;\n        params.workportal = null;\n      }\n\n      msg.message = {};\n      msg.message = $.extend(params, {\n        project: this.project,\n        iframeidentifier: BIZAGI_IFRAME_IDENTIFIER });\n\n      msg.message.whenInitialized = null;\n      self.postmessageSocket.send(msg);\n    }\n    //publish event localy in webparts\n    return this._super(eventName, $.extend(params, {\n      project: this.project }));\n\n  },\n\n  /**\r\n      *   Subscribe to an event that any controller could trigger\r\n      */\n  subscribe: function subscribe(eventName, callback) {\n    var self = this;\n    eventName = this.namespace ? this.namespace + \".\" + eventName : eventName;\n    this._super(eventName, function (e, params) {\n      if (self.project == params.project && self.isVisible)\n      return callback(e, params);\n    });\n  },\n\n  /**\r\n      *   UnSubscribe to an event that any controller could trigger\r\n      */\n  unsubscribe: function unsubscribe(eventName, callback) {\n    var self = this;\n    eventName = this.namespace ? this.namespace + \".\" + eventName : eventName;\n    this._super(eventName, callback);\n  },\n\n  /*\r\n      *   Re-draw the webpart\r\n      */\n  refresh: function refresh(params) {\n    var self = this;\n    var content = this.getContent();\n\n    // Clear content\n    content.empty();\n\n    // Dispose stuff\n    self.prepareForRefresh();\n\n    // Re-draw content;\n    $.when(self.render(params)).\n    done(function (newContent) {\n      if ($.contains(window.document, content[0])) {\n        bizagi.util.replaceSelector($(\"body\", window.document), content, newContent);\n      } else {\n        $(\"#\" + content.attr(\"id\"), window.document).empty();\n        bizagi.util.replaceSelector($(\"body\", window.document), \"#\" + content.attr(\"id\"), newContent);\n      }\n    });\n  },\n\n  /*\r\n      *   Renders the web part\r\n      *   Also ensures that templates are loaded\r\n      */\n  render: function render(params) {\n    var self = this;\n\n    // Set params in webpart variable\n    self.params = params;\n\n    if (params.creating) {\n      self.content = self.empty();\n\n      // Trigger webpart created event\n      self.publish(\"bizagi-webpart-created\", {\n        webpart: self });\n\n\n      return self.content;\n    }\n\n    // Load templates\n    return $.when(self.renderContent(params)).\n    pipe(function (content) {\n      // Then customize in current device\n      // if you use fastTmpl the object string is transformed to object html -jquery\n      if (typeof content == \"string\") content = $(content);\n\n      self.content = content;\n      self.postRender(params);\n\n      // Trigger webpart executed event\n      self.publish(\"bizagi-webpart-executed\", {\n        webpart: self });\n\n      self.sendDimensionsiFrame();\n      return self.getContent();\n    });\n  },\n\n  /*\r\n      *   Renders the web part, override this method in each webpart\r\n      */\n  renderContent: function renderContent(params) {},\n\n  /*\r\n                                                     *   Customize the web part in each device\r\n                                                     */\n  postRender: function postRender(params) {},\n\n  /*\r\n                                               *   Return the rendered content\r\n                                               */\n  getContent: function getContent() {\n    return this.content;\n  },\n\n  /*\r\n      *   Creates an empty content\r\n      */\n  empty: function empty() {\n    return $(\"<div/>\");\n  },\n\n  /*  \r\n      *   Return a specified template\r\n      */\n  getTemplate: function getTemplate(template) {\n    return this.workportalFacade.getTemplate(template);\n  },\n\n  /*  \r\n      *   Create webpart\r\n      */\n  createWebpart: function createWebpart(params) {\n    return this.workportalFacade.workportal.createWebpart(params);\n  },\n\n  /*  \r\n      *   Execute webpart\r\n      */\n  executeWebpart: function executeWebpart(params) {\n    return this.workportalFacade.workportal.executeWebpart(params);\n  },\n  /**\r\n      *   Manage the error in base class\r\n      */\n  manageError: function manageError(msg, defer, canvasError) {\n    var self = this;\n    var errorMsg = '';\n    if (msg.responseText) {\n      errorMsg = msg.responseText;\n    } else {\n      errorMsg = msg;\n    }\n    if (errorMsg.indexOf(\"AUTHENTICATION_ERROR\") == -1) {\n      self.helper.getFailServerErrorDeferred({\n        message: errorMsg,\n        sharepointProxyPrefix: self.sharepointProxyPrefix },\n      defer);\n      self.endWaiting();\n      //en caso de no tener un canvasError el error se despliega en todo el content\n      if (canvasError) {\n        defer.done(function (value) {\n          canvasError.append(value);\n          self.endWaiting();\n        });\n      }\n      if (bizagi.iframeCommunicator) {\n        bizagi.iframeCommunicator.trigger(\"authorization-internal-error\");\n      }\n      //defer.resolve(msg);\n    } else {\n      //when it's generate autentication error, cannot load the template\n      var content = self.content = \"<div class='ui-bizagi-webpart-error-message'>The current user does not exist as a registered user in the bizagi project</div>\";\n      if (canvasError) {\n        canvasError.append(content);\n      }\n      self.endWaiting();\n      defer.resolve(content);\n    }\n  },\n  /**\r\n      *   On waiting. En el area del webpart agrega un div del mismo tamanio y de las mismas coordenadas que el content.\r\n      */\n  onWaiting: function onWaiting() {\n    var self = this;\n    bizagi.startWaiting(document.getElementById(self.canvas[0].id));\n  },\n  /**\r\n      *   Off waiting. \r\n      */\n  endWaiting: function endWaiting() {\n    var self = this;\n    self.canvas.children(\".ui-bizagi-sharepoint-loading-container\").remove();\n  },\n\n  /**\r\n      *   Hide WebPart\r\n      */\n  hide: function hide(hideParent) {\n    var self = this;\n    self.canvas.hide();\n    if (hideParent) {\n      self.canvas.parent().hide();\n    }\n    self.isVisible = false;\n  },\n  /**\r\n      *    Show WebPart\r\n      */\n  show: function show() {\n    var self = this;\n    self.canvas.show();\n    self.canvas.parent().show();\n    self.isVisible = true;\n  },\n  /**\r\n      *    visible flat\r\n      */\n  isVisible: function isVisible() {\n    var self = this;\n    return self.isVisible;\n  },\n\n  destroy: function destroy() {\n\n  },\n\n  prepareForRefresh: function prepareForRefresh() {\n\n  } });","\n/*\r\n *   Name: BizAgi Workportal Action\r\n *   Author: Diego Parra\r\n *   Comments:\r\n *   -   This script will define a base class to process workportal actions in order to take decisions\r\n */\n\nbizagi.workportal.controllers.controller.extend(\"bizagi.workportal.actions.action\", {\n  BIZAGI_WORKPORTAL_ACTION_ROUTING: \"routing\",\n  BIZAGI_WORKPORTAL_ACTION_SEARCH: \"search\" },\n{\n\n  /*\r\n   *   Makes the base processing of the layout (mix templates + data)\r\n   *   after all that processing will call a post-render method to\r\n   *   be implemented in each device to apply custom plugins\r\n   *   Returns a promise because the rendering could be asynchronous\r\n   */\n  render: function render() {\n    bizagi.assert(false, \"An action can't be rendered because it has no view\");\n  },\n\n\n  /*\r\n      *   To be overriden in each device to apply layouts\r\n      */\n  postRender: function postRender() {\n    bizagi.assert(false, \"An action can't be rendered because it has no view\");\n  },\n\n  /*\r\n      *   Executes the action\r\n      *   Could return a deferred\r\n      */\n  execute: function execute() {\n    // Override in implementations\n  } });","/*\r\n *   Name: BizAgi Workportal Routing Action\r\n *   Author: Diego Parra && Edward Morales\r\n *   Comments:\r\n *   - This script will execute the routing action to determine what to do in the workportal\r\n *   - This class has been refactored based on jira story DRAGON-4943\r\n */\n\nbizagi.workportal.actions.action.extend(\"bizagi.workportal.actions.routing\", {}, {\n\n  /*\r\n                                                                                   *   Executes the action\r\n                                                                                   *   Could return a deferred\r\n                                                                                   */\n  execute: function execute(params) {\n    var self = this;\n    self.params = params || {};\n    /* New implementation of routing*/\n\n    $.when(self.dataService.routing.getRoute(params)).done(function (route) {\n      var deferredDialogOpened = $.Deferred();\n      route = route || {};\n      if (self.params.isOfflineForm != \"undefined\" && self.params.isOfflineForm == true) {\n        route.moduleParams = $.extend(route.moduleParams, { formsRenderVersion: self.params.formsRenderVersion, isOfflineForm: self.params.isOfflineForm, idCase: self.params.idCase, idWorkitem: self.params.idWorkitem, guid: self.params.guid }) || {};\n      } else\n      {\n        route.moduleParams = route.moduleParams || {};\n      }\n\n      switch (route.module) {\n\n        case bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_RENDER:\n        case bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_OLDRENDERINTEGRATION:\n        case bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ASYNC:\n          self.publish(\"changeWidget\", route.moduleParams);\n          self.publish(\"closeAllDialogs\");\n          break;\n        case bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_PROJECT_DASHBOARD:\n\n          /**\r\n                                                                                           * TODO: To improvement when enable workportal menu from live processes\r\n                                                                                           */\n          bizagi.util.enableWorkPortalMenu();\n          self.publish(\"closeAllDialogs\");\n          self._executeWidgetProjectDashboard(params, route.moduleParams);\n          break;\n\n        case bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_START_FORM:\n          var parameters = {\n            title: self.getResource(\"workportal-widget-newcase-title\"),\n            width: 850,\n            height: 750,\n            refreshInbox: false,\n            onClose: route.moduleParams.onClose,\n            dialogOpened: deferredDialogOpened };\n\n\n          self.publish(\"showDialogWidget\", {\n            widgetName: route.module,\n            data: route.moduleParams.data,\n            modalParameters: parameters,\n            closeVisible: false,\n            dialogClass: \"ui-bizagi-start-form-dialog\" });\n\n\n          deferredDialogOpened.promise().done(function (response) {\n            self.publish(\"onWidgetIncludedInDOM\");\n            response.widgetReference.postRender();\n          });\n\n          break;\n        case bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ROUTING:\n          var parameters = {\n            title: self.getResource(\"workportal-widget-routing-window-selector\"),\n            width: 670,\n            height: 450,\n            refreshInbox: false,\n            onClose: route.moduleParams.onClose };\n\n\n          if (self.isThereAsync(route.moduleParams.data)) {\n            self.asyncWidget(route.moduleParams);\n          } else {\n            self.publish(\"showDialogWidget\", {\n              widgetName: route.module,\n              data: route.moduleParams.data,\n              modalParameters: parameters,\n              onClose: parameters.onClose });\n\n          }\n\n          break;}\n\n\n    });\n  },\n\n  /**\r\n      * execute the inbox or the noHavePendingActions in this case\r\n      * @overridable\r\n      * @param {JSON} params \r\n      * @param {JSON} moduleParams \r\n      */\n  _executeWidgetProjectDashboard: function _executeWidgetProjectDashboard(params, moduleParams) {\n    var self = this;\n\n    if (self.validateGoToLastSection(\n    bizagi.services.preferences().getPreference(\"goToInboxOnActivityExit\"),\n    moduleParams.referrer,\n    moduleParams.hasWorkItems))\n    {\n      self.goToInbox(moduleParams);\n    } else {\n      var data = $.extend(params, moduleParams);\n      bizagi.util.setContext(data);\n      self.publish(\"changeWidget\", moduleParams);\n    }\n  },\n\n  /*\r\n     * Go to inbox when an activity ends\r\n     */\n  goToInbox: function goToInbox(routeModuleParams) {\n    var self = this;\n    self.publish(\"changeWidget\", {\n      widgetName: self.workportalFacade.workportal.getWidgetByCookie(true) });\n\n\n    self.notifier = bizagi.injector.get(\"notifier\");\n\n    var messageWhenGoToInbox = routeModuleParams.messageForm ? routeModuleParams.messageForm : bizagi.localization.getResource(\"render-without-globalform\");\n\n    self.notifier.showSucessMessage(messageWhenGoToInbox, \"\", \"\");\n  },\n\n  validateGoToLastSection: function validateGoToLastSection(goToInboxPreference, widgetReferrer, hasWorkItems) {\n    return goToInboxPreference &&\n    widgetReferrer === \"bizagi.workportal.widgets.project.activity\" &&\n    hasWorkItems === false;\n  },\n\n  /*\r\n     * Search for async workitems\r\n     */\n  isThereAsync: function isThereAsync(data) {\n    var workitems = data.workItems,wi,index = 0;\n    var length = workitems.length,result = false;\n    if (length > 0) {\n      for (; index < length;) {\n        wi = workitems[index++];\n        if (wi.isAsynch === \"true\") {\n          result = result || [];\n          result.push(wi);\n        }\n      }\n    }\n    return result;\n  },\n\n  asyncWidget: function asyncWidget(params) {\n    var self = this;\n    params.widgetName = \"async\";\n    self.publish(\"changeWidget\", params);\n  } });","/*\r\n *   Name: BizAgi Workportal Routing Action Desktop\r\n *   Author: Kvn Alvarado\r\n *   Comments:\r\n *   - This script was created for Desktop version\r\n */\n\nbizagi.workportal.actions.routing.extend(\"bizagi.workportal.actions.routing\", {\n\n  /**\r\n                                                                                 * sections to return when the user finish a case\r\n                                                                                 */\n  RETURN_TO: {\n    INBOX: \"inbox\",\n    INBOX_GRID: \"inboxGrid\",\n    HOME_PORTAL: \"homeportal\",\n    LAST_INBOX: \"lastInbox\",\n    QUERIES: \"queryform\",\n    BAM: \"reports\",\n    NONE: \"none\" },\n\n\n  /**\r\n                     * \r\n                     */\n  LAUNCH_NOTIFICATION: function LAUNCH_NOTIFICATION() {} },\n\n{\n\n  /**\r\n   * @override\r\n   */\n  _executeWidgetProjectDashboard: function _executeWidgetProjectDashboard(params, moduleParams) {\n    var self = this,\n    _calcResult = self._calcOnFinishWhere2Go(moduleParams);\n\n    self._returnTo(_calcResult.goBack, _calcResult.where, moduleParams);\n    self._changeWidgetTo(_calcResult.executeChangeWidget, _calcResult.where, params, moduleParams);\n\n  },\n\n\n  _showToastMessage: function _showToastMessage(moduleParams) {\n    var self = this;\n    self.Class.LAUNCH_NOTIFICATION = function () {\n      self._clearLaunchNotification();\n      notifier = bizagi.injector.get(\"notifier\");\n      var messageWhenGoToInbox = moduleParams.messageForm ? moduleParams.messageForm : bizagi.localization.getResource(\"render-without-globalform\");\n      notifier.showSucessMessage(messageWhenGoToInbox, \"\", \"\");\n    };\n  },\n\n  _clearLaunchNotification: function _clearLaunchNotification() {\n    var self = this;\n    self.Class.LAUNCH_NOTIFICATION = function () {};\n  },\n\n  /**\r\n      * review if is necessary to return back or continue with the activity\r\n      * @param {JSON} moduleParams for changeWidget\r\n      */\n  _calcOnFinishWhere2Go: function _calcOnFinishWhere2Go(moduleParams) {\n    var self = this,\n    _to = self.Class.RETURN_TO,\n    _referrer = bizagi.util.tryCatch(function () {return bizagi.referrerParams.referrer;}, _to.NONE),\n    _isQueriesReferrer = _referrer === _to.QUERIES,\n    _preferGo2Inbox = bizagi.services.preferences().getPreference(\"goToInboxOnActivityExit\"),\n    _go2LastSection = self.validateGoToLastSection(_preferGo2Inbox, moduleParams.referrer, moduleParams.hasWorkItems),\n    _execute = !_go2LastSection || _go2LastSection && _isQueriesReferrer,\n    _where = function _where() {\n      var res;\n      switch (_referrer) {\n        case _to.INBOX_GRID:\n          res = _to.INBOX;\n          break;\n        case _to.HOME_PORTAL: // not supporting goBack when implement please remove this line\n        case undefined:\n          res = _to.NONE;\n          break;\n        default:\n          res = _referrer;\n          break;}\n\n      return res;\n    };\n\n    return {\n      where: _where(),\n      goBack: _go2LastSection,\n      executeChangeWidget: _execute };\n\n  },\n\n  /**\r\n      * if execute then continue changeWidget\r\n      * @param {Boolean} execute the changeWidget\r\n      * @param {Class.RETURN_TO} where the referrer is\r\n      * @param {JSON} params for setContext\r\n      * @param {JSON} moduleParams for changeWidget\r\n      */\n  _changeWidgetTo: function _changeWidgetTo(execute, where, params, moduleParams) {\n    var self = this,\n    data = $.extend(params, moduleParams),\n    _moduleParams = bizagi.clone(moduleParams),\n    _show = function _show() {\n      bizagi.util.setContext(data);\n      _moduleParams.where = where;\n      self.publish(\"changeWidget\", _moduleParams);\n    };\n    if (execute)\n    _show();\n  },\n\n  /**\r\n      * when the user goBack, execute goBack to the where site\r\n      * if where site is NONE return to inbox\r\n      * @param {Boolean} goBack \r\n      * @param {Class.RETURN_TO} where the referrer is\r\n      * @param {JSON} moduleParams for goToInbox\r\n      */\n  _returnTo: function _returnTo(goBack, where, moduleParams) {\n    var self = this,\n    _to = self.Class.RETURN_TO,\n    _return = function _return(where) {\n      where === _to.NONE ? self.goToInbox(moduleParams) : self._goBack(moduleParams);\n    };\n\n    if (goBack)\n    _return(where);\n  },\n\n  /**\r\n      * \r\n      */\n  _goBack: function _goBack(moduleParams) {\n    var self = this;\n    var navigator = bizagi.injector.get(\"bizagi.workportal.widgets.navigator\");\n    self._showToastMessage(moduleParams);\n    navigator.goToBack();\n  } });","\n/*\r\n*   Name: BizAgi Workportal Webpart Widget Controller\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will define a wrapper class to to load custom webparts\r\n*/\n\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.webpart\", {}, {\n  /*\r\n                                                                                   *   Returns the widget name\r\n                                                                                   */\n  getWidgetName: function getWidgetName() {\n    return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_WEBPART;\n  },\n\n\n  /*\r\n     *   Constructor\r\n     */\n  init: function init(workportalFacade, dataService, params) {\n    // Call base\n    this._super(workportalFacade, dataService, params);\n\n    // Set webpart \n    this.webpartName = params.webpart;\n  },\n\n  /*\r\n     *   Renders the content for the current controller\r\n     *   Returns a deferred because it has to load the current user\r\n     */\n  renderContent: function renderContent() {\n    var self = this;\n    var content = self.content = $(\"<div />\");\n    var workportal = self.getWorkportal();\n\n    // Execute webpart\n    workportal.executeWebpart($.extend(self.params, {\n      canvas: content,\n      webpart: self.webpartName }));\n\n\n    return content;\n  } });","/*\r\n *   Name: BizAgi Workportal Print Version Widget Controller\r\n *   Author: Edward Morales\r\n *   Comments:\r\n *   -   This script will define a base class to to define the print version widget\r\n *       the rendering module is loaded here\r\n */\n\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.print\", {}, {\n  /*\r\n                                                                                 *   Returns the widget name\r\n                                                                                 */\n  getWidgetName: function getWidgetName() {\n    return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_PRINT;\n  },\n\n  /*\r\n     *   Renders the content for the current controller\r\n     *   Returns a deferred because it has to load the current user\r\n     */\n  renderContent: function renderContent() {\n    var self = this;\n    var template = self.getTemplate(\"print\");\n\n    var content = self.content = $.tmpl(template);\n\n    return content;\n  } });","\n/*\n*   Name: BizAgi Workportal Search Controller\n*   Author: Jair Cardenas\n*   Comments:\n*   -   Base library for fontsize \n*/\n\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.fontsize\", {}, {\n  /*\n                                                                                    *   Returns the widget name\n                                                                                    */\n  getWidgetName: function getWidgetName() {\n    return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_FONTSIZE;\n  },\n\n  /*\n     *   Renders the content for the current controller\n     *   Returns a deferred because it has to load the current user\n     */\n  renderContent: function renderContent() {\n    var self = this;\n    var template = self.getTemplate(\"fontsize\");\n\n    var content = self.content = $.tmpl(template);\n\n    return content;\n  } });","/*\r\n*   Name: BizAgi Workportal Routing Widget Controller\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will define a base class to to define the routing widget\r\n*/\n\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.routing\", {}, {\n\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n  },\n  /*\r\n     *   Returns the widget name\r\n     */\n  getWidgetName: function getWidgetName() {\n    return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ROUTING;\n  },\n\n  /*\r\n     *   Renders the content for the current controller\r\n     *   Returns a deferred because it has to load the current user\r\n     */\n  renderContent: function renderContent() {\n    var self = this;\n    var template = self.getTemplate(\"routing\");\n    var def = new $.Deferred();\n    //check subprocess\n    if (self.params.data.checkProcess || self.params.data.checkWorkItems) {\n      $.when(\n      self.dataService.getCaseSubprocesses({\n        idCase: self.params.data.idCase })).\n\n      done(function (process) {\n        self.params.data.subProcessPersonalized = process[\"subProcesses\"];\n\n        //Validate in workitems have property idtask. Scenario when workitem is activity from plan\n        self.params.data.workItems.forEach(function (workitem) {\n          if (!workitem.idTask) {\n            workitem.idTask = \"\";\n          }\n        });\n\n        // Loads case workitems\n        // Solve QA-2197\n        var content = self.content = $.tmpl(\n        template,\n        self.params.data,\n        {\n          formatDate: self.formatDate });\n\n\n        def.resolve(content);\n\n      });\n    }\n    return def.promise();\n  },\n\n  formatDate: function formatDate(item) {\n    return bizagi.util.formatDateFromInvariantStringDate(item.estimatedSolutionDate);\n  } });","/*\r\n*   Name: Start Form Widget Controller\r\n*   Author: Fabian Moreno (based on Diego Parra version)\r\n*   Comments:\r\n*   -   This script will provide start form widget\r\n*/\n\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.startForm\", {}, {\n\n  /*\r\n                                                                                     *   Returns the widget name\r\n                                                                                     */\n  getWidgetName: function getWidgetName() {\n    return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_START_FORM;\n  },\n\n  /*\r\n     *   Constructor\r\n     */\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n    self.idProcess = params.data.idProcess;\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    //Load templates\n    self.loadTemplates({\n      \"startForm\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.startForm\").concat(\"#ui-bizagi-workportal-widget-start-form\"),\n      useNewEngine: false });\n\n  },\n\n  /*\r\n     *   Renders the content for the current controller\r\n     *   Returns a deferred because it has to load the current user\r\n     */\n  renderContent: function renderContent() {\n    var self = this;\n    var template = self.getTemplate(\"startForm\");\n\n    // Render base template\n    self.content = $.tmpl(template);\n\n    // Check if the content is already in dom\n    var includedInDom = self.content.parents(\"body\").length > 0;\n    if (includedInDom) {\n      self.renderForm();\n    } else {\n      // Wait until the dom is ready to execute the rendering, because some controls need references to full DOM\n      // (grids and uploads)\n      self.subscribeOneTime(\"onWidgetIncludedInDOM\", function () {\n\n        // Load render page\n        self.renderForm({\n          idCase: self.params.idCase,\n          idWorkitem: self.params.idWorkitem,\n          idTask: self.params.idTask,\n          withOutGlobalForm: self.params.withOutGlobalForm || false,\n          isOfflineForm: self.params.isOfflineForm || false,\n          messageForm: self.params.messageForm || \"\" });\n\n      });\n    }\n  },\n\n\n  /*\r\n     *   Renders the form component of the widget\r\n     */\n  renderForm: function renderForm(params) {\n    var self = this,resultRender;\n\n    var renderContainer = self.getComponentContainer(\"render\");\n    if (!params.withOutGlobalForm) {\n      // it has't activities and global form\n      var proxyPrefix = typeof self.dataService.serviceLocator.proxyPrefix !== \"undefined\" ? self.dataService.serviceLocator.proxyPrefix : \"\";\n      var database = typeof self.dataService.database !== \"undefined\" ? self.dataService.database : \"\";\n\n\n      // Load render page\n      var rendering = self.rendering = new bizagi.rendering.facade({ \"proxyPrefix\": proxyPrefix, \"database\": database });\n      // Executes rendering into render container\n\n      params.action = \"LOADSTARTFORM\";\n      params.idProcess = self.idProcess;\n\n      if (self.params.data && self.params.data.idOrganization) {\n        params.idOrganization = self.params.data.idOrganization;\n      }\n\n      resultRender = rendering.execute($.extend(params, {\n        canvas: renderContainer,\n        menu: self.menu }));\n\n\n      // Attach handler to render container to subscribe for routing events\n      renderContainer.bind(\"routing\", function (context, triggerparams) {\n        //Close de startForm dialog and executes the routing action\n        self.publish(\"closeCurrentDialog\");\n\n        var params = {\n          action: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,\n          idCase: self.params.idCase || triggerparams.idCase,\n          fromTask: self.params.fromTask || self.params.idTask,\n          fromWorkItemId: self.params.fromWorkItemId || self.params.idWorkitem,\n          isOfflineForm: self.params.isOfflineForm,\n          formsRenderVersion: self.params.formsRenderVersion,\n          onClose: function onClose() {\n            // If the user closes the dialog we need to redirect to inbox widget\n            self.publish(\"changeWidget\", {\n              widgetName: bizagi.workportal.currentInboxView });\n\n          } };\n\n        params = $.extend(params, triggerparams);\n        self.publish(\"executeAction\", params);\n      });\n\n      //\n      renderContainer.bind(\"oldrenderintegration\", function () {\n        if (bizagi.oldrenderevent === undefined) {\n          bizagi.oldrenderevent = true; // has been loaded\n          var eventMethod = window.addEventListener ? \"addEventListener\" : \"attachEvent\";\n          var eventer = window[eventMethod];\n          var messageEvent = eventMethod == \"attachEvent\" ? \"onmessage\" : \"message\";\n\n          // Listen to message from child window\n          eventer(messageEvent, function (e) {\n            e.stopPropagation();\n            self.publish(\"executeAction\", {\n              action: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,\n              idCase: e.data });\n\n          }, false);\n        }\n\n        self.publish(\"changeWidget\", {\n          widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_OLDRENDERINTEGRATION,\n          idCase: self.params.idCase,\n          idWorkitem: self.params.idWorkitem,\n          idTask: self.params.idTask,\n          onlyUserWorkItems: self.params.onlyUserWorkItems,\n          referrer: self.params.referrer,\n          eventAsTasks: self.params.eventAsTasks });\n\n\n      });\n    } else {\n      var errorTemplate = self.workportalFacade.getTemplate(\"info-message\");\n      var message = params.messageForm !== \"\" ? params.messageForm : self.resources.getResource(\"render-without-globalform\");\n\n      if (typeof self.params !== \"undefined\" && typeof self.params.isOfflineForm !== \"undefined\" && self.params.isOfflineForm === true) {\n        message = bizagi.util.getMessageFromNetworkState(self.dataService.online);\n      }\n\n      var errorHtml = $.tmpl(errorTemplate, {\n        message: message });\n\n      // Remove loading icon from summary container\n      errorHtml.appendTo(renderContainer);\n\n      resultRender = $.Deferred();\n      resultRender.fail();\n    }\n\n    // Keep reference to rendering facade\n    self.renderingFacade = rendering;\n\n    // Resize layout\n    self.resizeLayout();\n\n    return resultRender;\n  },\n\n\n  routingExecute: function routingExecute(element) {\n    // Executes routing action\n    if (element === undefined) {\n      return false;\n    }\n\n    var self = this;\n\n    var idCase = element.find(\"#idCase\").val() || self.params.idCase;\n    var idWorkflow = element.find(\"#idWorkflow\").val() || self.params.idWorkflow;\n    var idWorkItem = element.find(\"#idWorkItem\").val() || element.parent().find(\"#idWorkItem\").val();\n    var idTask = element.find(\"#idTask\").val();\n    var eventAsTasks = element.find(\"#eventAsTasks\").val() || false;\n\n    self.publish(\"executeAction\", {\n      action: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,\n      idCase: idCase,\n      idWorkflow: idWorkflow,\n      idWorkItem: idWorkItem,\n      idTask: idTask,\n      eventAsTasks: eventAsTasks });\n\n\n    return true;\n  },\n\n  dispose: function dispose() {\n    var self = this;\n\n    // Dispose the rendering binds\n    if (self.rendering) {\n      var renderContainer = self.rendering.canvas;\n      renderContainer.off();\n\n      if (self.rendering.form) {\n        self.rendering.form.dispose();\n      }\n\n      if (this.IsDisposed)\n      return;\n    }\n\n    // Call base\n    self._super();\n  } });","/*\r\n*   Name: BizAgi Workportal my search search lists Widget Controller\r\n*   Author: Andr�s Fernando Mu�oz\r\n*   Comments:\r\n*   -   This script will define a base class to to define the \"my search search lists\" widget\r\n*/\n\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.mySearchList\", {}, {\n  /*\r\n                                                                                        *   Returns the widget name\r\n                                                                                        */\n  getWidgetName: function getWidgetName() {\n    return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_MYSEARCHLIST;\n  },\n\n  /*\r\n     *   Renders the content for the current controller\r\n     *   Returns a deferred because it has to load the current user\r\n     */\n  renderContent: function renderContent() {\n    var self = this;\n    var template = self.getTemplate(\"mySearchListWrapper\");\n    var content = self.content = $.tmpl(template);\n\n    return content;\n  } });","bizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.loadForm\", {}, {\n\n  init: function init(workportalFacade, dataService, params) {\n    this.workportalFacade = workportalFacade;\n    this.dataService = dataService;\n    this.params = params || {};\n    this.form;\n    this.searchCriteriasApplied = params.searchCriteriasApplied || [];\n  },\n\n  getWidgetName: function getWidgetName() {\n    return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_LOADFORM;\n  },\n\n  preProcessValue: function preProcessValue(value, control) {\n    if (control.properties.type == \"combo\" || control.properties.type == \"radio\") {\n      value = { \"id\": value[0] };\n    }\n\n    return value;\n  },\n\n  renderContent: function renderContent() {\n    var self = this;\n    var template = self.workportalFacade.getTemplate(\"loadForm\");\n\n    self.content = $.tmpl(template);\n\n    bizagi.loader.start(\"rendering\").then(function () {\n\n      var renderFacade = bizagi.rendering.facade.extend({\n        processForm: function processForm(data, renderFactory, params) {\n          var containerParams = $.extend(params, {\n            renderFactory: renderFactory,\n            dataService: params.dataService || this.dataService,\n            data: data });\n\n          var form = new bizagi.rendering.desktop.form(containerParams);\n\n          //set default data\n          if (self.searchCriteriasApplied.length > 0) {\n            $.each(self.searchCriteriasApplied, function (key, value) {\n              var control = form.getRenderById(value.id);\n              if (control) {\n                control.setValue(self.preProcessValue(value.value, control));\n              }\n            });\n          }\n\n          // Render the full form\n          form.render();\n\n          return form;\n        } });\n\n\n      var render = new renderFacade();\n\n      var queryFormParams = {\n        h_action: \"QUERYFORM\",\n        h_contexttype: \"entity\",\n        h_idForm: self.params.guidForm,\n        dataType: \"text\" };\n\n\n\n      //request to queryForm definition service\n      self.dataService.getQueryForm(queryFormParams).done(function (data) {\n        //convert the form json\n        var regexTypeString = /\\\"type\\\"\\s*:\\s*\\\"([':.,-\\[\\]\\w\\s]*)\\\"/g;\n        var regexIncludedInResultString = /\\\"includedInResult\\\"\\s*:\\s*(true)/g;\n\n        var processedForm = data.replace(regexTypeString, function (match, g1, offset, string) {\n          return match.replace(g1, g1.replace(/query/i, \"\").toLowerCase());\n        });\n        processedForm = processedForm.replace(regexIncludedInResultString, '\"includedInResult\":false');\n\n        var form = JSON.parse(processedForm);\n        form.form.buttons = [];\n        form.form.properties.isSearchesQueryForm = true;\n\n        // For searches of Rubik the \"metadata\" field is required\n        form.form.contextType = form.form.contextType || \"metadata\";\n\n        var renderingParams = { canvas: $(self.content), data: form };\n\n        render.execute(renderingParams).done(function (form) {\n          self.form = form;\n        });\n\n        return self.content;\n      });\n    });\n  } });","/*\r\n*   Name: BizAgi Workportal New Case Widget Controller\r\n*   Author: Edward Morales\r\n*   Comments:\r\n*   -   This script will define a base class to to define the sub menu widget\r\n*/\n\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.subMenu\", {}, {\n  /*\r\n                                                                                   *   Returns the widget name\r\n                                                                                   */\n  getWidgetName: function getWidgetName() {\n    return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_SUBMENU;\n  },\n\n  /*\r\n     *   Renders the content for the current controller\r\n     *   Returns a deferred because it has to load the current user\r\n     */\n  renderContent: function renderContent() {\n    var self = this;\n    var template = self.workportalFacade.getTemplate(\"menu.submenu\");\n    var content = self.content = $.tmpl(template);\n\n    return content;\n  } });","/*\r\n *   Name: BizAgi Workportal Search Controller\r\n *   Author: Edward Morales\r\n *   Comments:\r\n *   -   Base library for search cases\r\n */\n\nbizagi.workportal.widgets.listCases.extend(\"bizagi.workportal.widgets.search\", {}, {\n  /*\r\n                                                                                      *   Returns the widget name\r\n                                                                                      */\n  getWidgetName: function getWidgetName() {\n    return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_SEARCH;\n  },\n  /*\r\n      *   Renders the content for the current controller\r\n      *   Returns a deferred because it has to load the current user\r\n      */\n  renderContent: function renderContent() {\n    var self = this;\n    var template = self.workportalFacade.getTemplate(\"search\");\n\n    var content = self.content = $.tmpl(template);\n\n    return content;\n  },\n  routingExecute: function routingExecute(element) {\n    // Executes routing action\n    if (element == undefined) {\n      return false;\n    }\n\n    var self = this;\n\n    var idCase = element.find(\"#idCase\").val();\n    var idWorkItem = element.find(\"#idWorkItem\").val();\n    var idTask = element.find(\"#idTask\").val();\n    var eventAsTasks = element.find(\"#eventAsTasks\").val() || false;\n\n    self.publish(\"executeAction\", {\n      action: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,\n      idCase: idCase,\n      idWorkItem: idWorkItem,\n      idTask: idTask,\n      eventAsTasks: eventAsTasks });\n\n  } });","/*\r\n*   Name: BizAgi Generic Page Widget Implementation\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*/\n\n\n// Extends itself\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.page\", {}, {\n  /*\r\n                                                                                *   Returns the widget name\r\n                                                                                */\n  getWidgetName: function getWidgetName() {\n    return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_PAGE;\n  },\n\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    //Load templates\n    self.loadTemplates({\n      \"page\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.page\").concat(\"#ui-bizagi-workportal-widget-page\"),\n      useNewEngine: false });\n\n  },\n\n  /*\r\n     *   Renders the content for the current controller\r\n     *   Returns a deferred because it has to load the current user\r\n     */\n  renderContent: function renderContent() {\n    var self = this;\n\n    var template = self.getTemplate(\"page\");\n    var content = self.content = $.tmpl(template, {});\n\n    self.renderStaticForm(self.params);\n\n    // Return content\n    return content;\n  },\n\n  renderStaticForm: function renderStaticForm(params) {\n    var self = this;\n    var canvas = self.getComponentContainer(\"render\");\n    var rendering = new bizagi.rendering.facade(params.context);\n\n    // Executes rendering into render container\n    params = params || {};\n    $.extend(params, {\n      canvas: canvas });\n\n\n    rendering.execute(params);\n\n    canvas.bind(\"close\", function () {\n      self.publish(\"closeCurrentDialog\");\n    });\n  } });","/*\r\n*   Name: BizAgi Desktop Queries Dialog implementation\r\n*   Author: Juan Pablo Crossley\r\n*   Comments:\r\n*   -   ???\r\n*/\n\n\n// Extends itself\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.genericiframe\", {}, {\n  /*\r\n                                                                                         *   Returns the widget name\r\n                                                                                         */\n  getWidgetName: function getWidgetName() {\n    return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_GENERICIFRAME;\n  },\n\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    //Load templates\n    self.loadTemplates({\n      \"genericiframe\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.genericiframe\"),\n      useNewEngine: false });\n\n  },\n\n  /*\r\n     *   Renders the content for the current controller\r\n     *   Returns a deferred because it has to load the current user\r\n     */\n  renderContent: function renderContent() {\n    var self = this;\n\n    var template = self.getTemplate(\"genericiframe\");\n    var data = {\n      widgetURL: self.params.widgetURL };\n\n    var content = self.content = $.tmpl(template, data);\n\n    // Return content\n    return content;\n  } });","/*\r\n*   Name: BizAgi Workportal Integration old render within new look and feel\r\n*   Author: Edward Morales\r\n*   Comments:\r\n*   -   This script define base controller to integrate old render within new workportal\r\n*/\n\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.oldrenderintegration\", {}, {\n\n  /*\r\n                                                                                                *   Returns the widget name\r\n                                                                                                */\n  getWidgetName: function getWidgetName() {\n    return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_OLDRENDERINTEGRATION;\n  },\n\n  /*\r\n     *   Renders the content for the current controller\r\n     *   Returns a deferred because it has to load the current user\r\n     */\n  renderContent: function renderContent() {\n    var self = this;\n    var template = self.getTemplate(\"integration-old-render\");\n\n    var data = {};\n    data.url = self.params.url || \"App/ListaDetalle/Detalle.aspx?PostBack=1&idCase=\" + self.params.idCase + \"&idWorkitem=\" + self.params.idWorkitem + \"&idTask=\" + self.params.idTask;\n\n    // Render content\n    var content = self.content = $.tmpl(template, data);\n\n    // Set inbox view variable\n    bizagi.workportal.currentInboxView = self.getWidgetName();\n\n    return content;\n  } });","\n/*\r\n *   Name: BizAgi Workportal Fontsize Controller\r\n *   Author: Jair Cardenas\r\n *   Comments:\r\n *   -\tThis script will provide base library for fontsize\r\n */\n\n// Auto extend\nbizagi.workportal.widgets.fontsize.extend(\"bizagi.workportal.widgets.fontsize\", {}, {\n\n  /*\r\n                                                                                       *\t Constructor\r\n                                                                                       */\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n\n    // Call base\n    this._super(workportalFacade, dataService, params);\n\n    //Load templates\n    self.loadTemplates({\n      \"fontsize\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.fontsize\"),\n      useNewEngine: false });\n\n  },\n  /*\r\n      *\t To be overriden in each device to apply layouts\r\n      */\n  postRender: function postRender() {\n    var self = this;\n    var content = self.getContent();\n    var sizeSelected = $('body').data('sizeselected') || 'font-large';\n\n    // Set templates\n    self.fontsizeTemplate = self.getTemplate(\"fontsize\");\n\n    // Set focus\n    $('.ui-bizagi-wp-font-content a', content).removeClass('active');\n    $('.ui-bizagi-wp-font-content .' + sizeSelected + ' a', content).addClass('active');\n\n    var fontButton = $('.font-switcher', content);\n    $(fontButton).click(function () {\n      var textSize = $(this).parent().attr('class');\n      $('body').data('sizeselected', textSize);\n      $('.ui-bizagi-wp-font-content a', content).removeClass('active');\n      $('.ui-bizagi-wp-font-content .' + textSize + ' a', content).addClass('active');\n\n      $('html, body').removeClass('font-medium font-large font-x-large').addClass(textSize);\n      return true;\n    });\n\n  } });","/*\r\n*   Name: BizAgi Workportal Desktop Main Controller\r\n*   Author: Diego Parra (based on  Edward Morales version)\r\n*   Comments:\r\n*   -   This script will override main controller class to apply custom stuff just for desktop device\r\n*/\n\n// Auto extend\nbizagi.workportal.controllers.main.extend(\"bizagi.workportal.controllers.main\", {}, {\n\n  /*\r\n                                                                                         *   Constructor\r\n                                                                                         */\n  init: function init(workportalFacade, dataService) {\n    var self = this;\n\n    // Call base\n    self._super(workportalFacade, dataService);\n\n    // Subscribe to show old window event\n    this.subscribe(\"showOldWindow\", function (e, params) {\n      self.showOldWindow(params);\n    });\n    self.sessionTimeOut();\n  },\n\n  /*\r\n        * call session time out service\r\n        */\n  sessionTimeOut: function sessionTimeOut() {\n    var self = this;\n\n    // Instantiate the sessionTimeOut Service\n    bizagi.injector.get('sessionTimeOutService');\n    self.loadTemplates({\n      \"session-timeout\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.sessionTimeout\").concat(\"#session-timeout\") });\n\n    self.loadTemplates({\n      \"session-timeout-expired\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.sessionTimeoutExpired\").concat(\"#session-timeout-expired\") });\n\n    $().dialog();\n  },\n\n  /*\r\n        *   Renders the content for the current controller\r\n        *\r\n        */\n  renderContent: function renderContent() {\n    var self = this;\n\n    // Check navigator compatibility\n    if (bizagi.util.isIE()) {\n      var version = bizagi.util.getIEVersion();\n      if (version < 9) {\n        return self.renderIENotCompatibleTemplate();\n      }\n    }\n\n    return self._super();\n  },\n\n  /*\r\n     *   Render not compatible template\r\n     */\n  renderIENotCompatibleTemplate: function renderIENotCompatibleTemplate() {\n    var self = this;\n    var template = self.workportalFacade.getTemplate(\"workportal.notCompatibleIE\");\n\n    // Render content\n    var content = self.content = $.tmpl(template, { url: BIZAGI_PATH_TO_BASE + \"defaulthtml.aspx\" });\n\n    // Set resize layout event\n    $(window).resize(function () {\n      self.resizeLayout();\n    });\n\n    return content;\n  },\n\n  /*\r\n     *   To be overriden in each device to apply layouts\r\n     */\n  postRender: function postRender() {\n    // TODO: Apply logic here\n  },\n\n  /*\r\n      *   Add dialog to dialogStack\r\n      */\n  addDialogToDialogStack: function addDialogToDialogStack(dialog) {\n    var self = this;\n    // Add to stack\n    bizagi.workportal.desktop.dialogStack = bizagi.workportal.desktop.dialogStack || [];\n    bizagi.workportal.desktop.dialogStack.push(dialog);\n  },\n\n  /*\r\n     *   Shows a widget inside a modal dialog\r\n     *   Implement on each device\r\n     */\n  showDialogWidget: function showDialogWidget(data) {\n    var self = this;\n    var dialog = new bizagi.workportal.desktop.widgets.dialog(self.dataService, self.workportalFacade);\n    dialog.renderWidget(data);\n\n    self.addDialogToDialogStack(dialog);\n\n    return dialog;\n  },\n\n  /*\r\n     *   Close the current modal dialog\r\n     *   Implement on each device\r\n     */\n  closeCurrentDialog: function closeCurrentDialog(params) {\n    // Remove from\n    bizagi.workportal.desktop.dialogStack = bizagi.workportal.desktop.dialogStack || [];\n    if (bizagi.workportal.desktop.dialogStack.length > 0) {\n      var dialog = bizagi.workportal.desktop.dialogStack.pop();\n      try {\n        dialog.close();\n      } catch (e) {\n        //\n      }\n    }\n\n    // Close a quirks mode popup if opened\n    bizagi.closeQuirksModePopup();\n  },\n\n  /**\r\n      *   Close all modal dialogs\r\n      *   Implement on each device\r\n      */\n  closeAllDialogs: function closeAllDialogs() {\n    var self = this;\n    bizagi.workportal.desktop.dialogStack = bizagi.workportal.desktop.dialogStack || [];\n    if (bizagi.workportal.desktop.dialogStack.length > 0) {\n      for (iDialog = 0, iTotalDialog = bizagi.workportal.desktop.dialogStack.length; iDialog < iTotalDialog; iDialog++) {\n        var dialog = bizagi.workportal.desktop.dialogStack.pop();\n        try {\n          dialog.close();\n        } catch (e) {\n          //\n        }\n      }\n    }\n    /**\r\n       * this try catch was added for this error: TM09197\r\n       * Uncaught Error: cannot call methods on dialog prior to initialization; attempted to call method 'close'\r\n       */\n    try {\n      self.closeContentDialog($(\".ui-dialog-content\")); //Close the dialogs that were created with jquery UI and couldn't be closed with dialog.close()\n\n    } catch (e) {\n      //\n    }\n  },\n\n  /**\r\n      * close dialog content\r\n      * @param {*} dialogContent \r\n      */\n  closeContentDialog: function closeContentDialog(dialogContent) {\n    dialogContent.dialog(\"close\");\n  },\n\n  /*\r\n     *   Popup a widget\r\n     *   Implement on each device\r\n     */\n  popupWidget: function popupWidget(params) {\n    var self = this;\n    var popup = new bizagi.workportal.desktop.widgets.popup(self.dataService, self.workportalFacade, params.options);\n    popup.renderWidget(params);\n\n    // Attach closed handler if present\n    if (params.options && params.options.closed) {\n      $.when(popup.closed()).\n      done(function () {\n        // Executes callback\n        params.options.closed();\n      });\n    }\n  },\n\n  /*\r\n     *   Shows an url inside a window popup\r\n     */\n  showOldWindow: function showOldWindow(params) {\n    // Call bizagi internal function\n    var url = bizagi.util.extendQueryString(params.url, { referrer: \"workportal\" });\n    bizagi.showQuirksModePopup(url, params.windowParameters);\n  },\n\n  cleanWidgets: function cleanWidgets() {\n\n    this.workarea.cleanWidgets();\n\n    if (bizagi.workportal.desktop.popup) {\n      if (bizagi.workportal.desktop.popup.instance) {\n        if (bizagi.workportal.desktop.popup.instance.dontClose !== undefined) {\n          bizagi.workportal.desktop.popup.instance.dontClose = false;\n          bizagi.workportal.desktop.popup.instance.close();\n        }\n      } else {\n        var innerDialog = $(\".modal .complex-frame\");\n        if (innerDialog.length > 0) {\n          innerDialog.closest(\".modal\").remove();\n        }\n      }\n    }\n  },\n\n  refreshQueryFormShortCut: function refreshQueryFormShortCut() {\n    if (bizagi.workportal.widgets.queries.shortcut.instance)\n    bizagi.workportal.widgets.queries.shortcut.instance.renderStoredQueries();\n  } });","/*\r\n *   Name: BizAgi Workportal Desktop Menu Controller\r\n *   Author: Diego Parra (based on  Edward Morales version)\r\n *   Comments:\r\n *   -   This script will override menu controller class to apply custom stuff just for desktop device\r\n */\n\n\nbizagi.workportal.controllers.menu.extend(\"bizagi.workportal.controllers.menu\", {}, {\n\n  /**\r\n                                                                                       * same click on inbox menu option\r\n                                                                                       */\n  goToInbox: function goToInbox() {\n    var self = this;\n    var inbox = bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX;\n    var grid = bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID;\n    var homeportal = bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_HOMEPORTAL;\n    var actualWidget;\n    var storeWidget;\n    if ($.isFunction(bizagi.cookie) && bizagi.util.defaultWidget() !== homeportal) {\n      storeWidget = bizagi.util.defaultWidget();\n    } else\n    {\n      storeWidget = grid;\n    }\n\n    bizagi.loader.start(\"inbox\").then(function () {\n      switch (storeWidget) {\n        case inbox:\n          actualWidget = inbox;\n          break;\n        case grid:\n          actualWidget = grid;\n          break;\n        case homeportal:\n          actualWidget = homeportal;\n          break;\n        default:\n          actualWidget = grid;\n          break;}\n\n      self.publish(\"changeWidget\", {\n        widgetName: actualWidget });\n\n\n    });\n    self.resetNavigatorInfo();\n  },\n\n  /**\r\n      *\r\n      * @return {*}\r\n      */\n  postRender: function postRender() {\n    var self = this;\n    var defer = new $.Deferred();\n    var content = self.getContent();\n    var searchContent = $(\"#ui-bizagi-wp-widget-searchContainer\", content);\n    var iconsTemplate = self.workportalFacade.getTemplate(\"menu.security\");\n    var menuContent = $(\"#main_menu\", content);\n\n\n    /**\r\n                                                 * Define security fo actual stakeholder\r\n                                                 * @type {bizagi.workportal.controllers.menu.security}\r\n                                                 */\n\n    var sec = bizagi.menuSecurity;\n\n    /**\r\n                                    * Draw menu with allowed sections\r\n                                    */\n    $.tmpl(iconsTemplate, sec, {\n      reportsSecurity: function reportsSecurity() {\n        return sec.AnalysisReports;\n      } }).\n    appendTo(menuContent);\n\n    /**\r\n                            * Set highlight item menu\r\n                            */\n    switch (self.workportalFacade.workportal.getWidgetByDataUser()) {\n      case bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_HOMEPORTAL:\n        $(\"#menuListHome\", menuContent).addClass(\"activeMenu\").siblings().removeClass(\"activeMenu\");\n        break;\n      case bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID:\n      case bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX:\n        $('#menuListInbox', menuContent).addClass(\"activeMenu\").siblings().removeClass(\"activeMenu\");\n        break;}\n\n\n    // Fix logout button\n    if (!sec.LogOut) {\n      //Hide it\n      $(\"#logout\", content).hide();\n    }\n    //Prevent event beforeunload to be trigger by clicking the menu\n    $(\"#main_menu a\", content).click(function (event) {\n      event.preventDefault();\n    });\n\n    // Fix search field\n    if (!sec.Search) {\n      $(\"#ui-bizagi-wp-widget-searchContainer\", content).remove();\n    }\n\n    $(\"#main_menu li\", content).on(\"click\", self.setActiveSection);\n\n    //To add the style to know the item is selected after go to inbox from decontextualized plan\n    self.subscribe(\"changeWidget\", function () {\n      if (arguments[1].widgetName === self.workportalFacade.workportal.getWidgetByCookie(true)) {\n        self.setActiveSection.apply($(\"#main_menu li#menuListInbox\")[0]);\n      }\n    });\n\n    if (!sec.Inbox) {\n      $(\"#menuListInbox\", content).hide();\n    }\n\n    // Bind Widgets button\n    $(\"#main_menu li#menuListWidget\", content).click(function () {\n      self.showWidgetsPopup();\n    });\n\n    // Bind New Case button\n    $(\"#main_menu li#menuListNew\", content).click(function () {\n      bizagi.loader.start(\"newcase\").then(function () {\n        self.showNewCasePopup();\n      });\n    });\n\n    // Bind my Search\n    if (bizagi.util.parseBoolean(bizagi.override.enableMySearch) &&\n    bizagi.currentUser.associatedStakeholders && bizagi.currentUser.associatedStakeholders.length > 0) {\n      $(\"#ui-bizagi-wp-widget-searchContainer\", content).click(function () {\n        self.showMySearchPopup();\n      });\n    }\n\n    $(\"#main_menu li#menuListHome\", content).click(function () {\n      var home = bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_HOMEPORTAL;\n\n      self.publish(\"changeWidget\", {\n        widgetName: home });\n\n    });\n\n    //  Bind inbox button\n    $(\"#main_menu li#menuListInbox\", content).click(self.goToInbox.bind(self));\n\n    // Bind New Case button\n    $(\"#main_menu li#menuListQueries\", content).click(function () {\n      self.showQueriesPopup();\n    });\n\n    $(\"#tempEntities\", content).click(function () {\n      self.publish(\"showDialogWidget\", {\n        widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ENTITIES,\n        modalParameters: {\n          title: self.getResource(\"workportal-menu-preferences\"),\n          width: \"1020px\",\n          showCloseButton: false } });\n\n\n    });\n\n    // Bind admin menu\n    $(\"#menuListAdmin\", content).click(function () {\n      self.renderAdminMenu();\n    });\n\n    $(\"#menuListQuickProcess\", content).click(function () {\n      self.renderQuickProcessMenu();\n      self.validateUrlInQuickProcess();\n    });\n\n    $(\"#menuListReports\", content).click(function () {\n\n      self.renderReportsMenu();\n    });\n\n    $(\"#menuUserPrivacy\", content).click(function () {\n      self.publish(\"showDialogWidget\", {\n        widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_USER_PRIVACY,\n        closeVisible: false,\n        maximize: false,\n        modalParameters: {\n          title: self.getResource(\"workportal-project-discussion-privacy\"),\n          width: 600,\n          height: \"auto\" } });\n\n\n    });\n\n    $(\"#menuListPreferences\", content).click(function () {\n      var url = self.dataService.getUrl({\n        \"endPoint\": \"ListPreferences\" });\n\n\n      var widgetName = bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_PREFERENCES;\n      bizagi.loader.start(\"admin\").then(function () {\n        self.publish(\"showDialogWidget\", {\n          widgetName: widgetName,\n          widgetURL: url,\n          closeVisible: false,\n          maximize: true,\n          modalParameters: {\n            title: self.getResource(\"workportal-menu-preferences\"),\n            width: 600,\n            height: 710 } });\n\n\n      });\n    });\n    $(\"#displayOptions\", content).click(function () {\n\n      var widgetName = bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_DISPLAY_OPTIONS;\n      bizagi.loader.start(\"admin\").then(function () {\n        self.publish(\"showDialogWidget\", {\n          widgetName: widgetName,\n          closeVisible: false,\n          maximize: false,\n          modalParameters: {\n            title: self.getResource(\"workportal-menu-display-options\"),\n            width: 600,\n            height: 280 } });\n\n\n      });\n    });\n    $(\"#user\", content).click(function () {\n      self.showUserProfileMenu();\n    });\n    $(\"#qr\", content).click(function () {\n      self.showQRCodePopup();\n    });\n    defer.resolve(content);\n\n\n    // Bind Search field\n    var inputSearchField = $(\"#menuQuery\", searchContent);\n\n    // Bind Font Size\n    $(\".ui-bizagi-wp-bt-font\", content).click(function () {\n      self.renderFontMenu();\n    });\n\n    //TODO: Remove this variable, It is used for mocking the service\n    window.CURRENT_THEME_REMOVE_IT = \"theme1\";\n    $(\".ui-bizagi-wp-bt-classic-theme,.ui-bizagi-wp-bt-modern-theme,.ui-bizagi-wp-bt-booking-theme\", content).hide();\n\n    $(\".ui-bizagi-wp-bt-classic-theme\", content).click(function () {\n      $(\"body\").append(\"<div id='workportal-theme-layer' ></div>\");\n      $(\"#workportal-theme-layer\").addClass(\"workportal-theme-layer-visible\");\n\n      //change to classic theme\n      window.CURRENT_THEME_REMOVE_IT = \"theme1\";\n\n      var home = bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_HOMEPORTAL;\n\n      self.publish(\"changeWidget\", {\n        widgetName: home });\n\n\n      $(\".ui-bizagi-wp-bt-modern-theme\").show();\n      $(\".ui-bizagi-wp-bt-booking-theme\").show();\n      $(\".ui-bizagi-wp-bt-classic-theme\").hide();\n      $(\"#user-profile\").hide(\"fast\");\n    });\n\n    $(\".ui-bizagi-wp-bt-modern-theme\", content).click(function () {\n      $(\"body\").append(\"<div id='workportal-theme-layer' ></div>\");\n      $(\"#workportal-theme-layer\").addClass(\"workportal-theme-layer-visible\");\n\n      //change to modern theme\n      window.CURRENT_THEME_REMOVE_IT = \"theme2\";\n\n      var home = bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_HOMEPORTAL;\n\n      self.publish(\"changeWidget\", {\n        widgetName: home });\n\n\n      $(\".ui-bizagi-wp-bt-modern-theme\").hide();\n      $(\".ui-bizagi-wp-bt-classic-theme\").show();\n      $(\".ui-bizagi-wp-bt-booking-theme\").show();\n      $(\"#user-profile\").hide(\"fast\");\n    });\n\n    $(\".ui-bizagi-wp-bt-booking-theme\", content).click(function () {\n      $(\"body\").append(\"<div id='workportal-theme-layer' ></div>\");\n      $(\"#workportal-theme-layer\").addClass(\"workportal-theme-layer-visible\");\n\n      //change to booking theme\n      window.CURRENT_THEME_REMOVE_IT = \"theme3\";\n\n      var home = bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_HOMEPORTAL;\n\n      self.publish(\"changeWidget\", {\n        widgetName: home });\n\n\n      $(\".ui-bizagi-wp-bt-booking-theme\").hide();\n      $(\".ui-bizagi-wp-bt-classic-theme\").show();\n      $(\".ui-bizagi-wp-bt-modern-theme\").show();\n      $(\"#user-profile\").hide(\"fast\");\n    });\n\n    $(\"#logout\", content).click(function () {\n\n      $.when(bizagi.util.autoSave()).done(function () {\n        $(document).data('auto-save', '');\n        self.dataService.logout();\n      });\n    });\n\n    $(\"#about\", content).click(function () {\n      self.showAboutPopup();\n    });\n\n    /**\r\n         * Binding for search field\r\n         */\n    $(inputSearchField).bind('keypress', function (e) {\n      if (e.keyCode == 13) {\n        var searchValue = inputSearchField.val();\n        if (searchValue != \"\" && searchValue != self.getResource(\"workportal-menu-search\")) {\n          self.publish(\"executeAction\", {\n            action: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_SEARCH,\n            radNumber: inputSearchField.val(),\n            onlyUserWorkItems: false });\n\n        }\n        self.resetNavigatorInfo();\n      }\n    });\n\n    $(window).trigger(\"resize\");\n\n    return defer.promise();\n  },\n\n  resetNavigatorInfo: function resetNavigatorInfo() {\n    bizagi.util.emptyNavigatorInfo();\n  },\n\n  /**\r\n      *\tHighligth for active menu\r\n      */\n  setActiveSection: function setActiveSection() {\n    var self = this;\n\n    $(self).parent().find('li').removeClass('activeMenu');\n    $(self).addClass('activeMenu');\n  },\n\n  /**\r\n      * Show User profile menu\r\n      */\n  showUserProfileMenu: function showUserProfileMenu() {\n    var self = this;\n    var content = self.getContent();\n    var $userProfile = $(\"div#user-profile\", content);\n\n    $userProfile.show(\"fast\", function () {\n      $userProfile.click(function (e) {\n        e.stopPropagation();\n      });\n\n    });\n\n    $(document).on(\"click\", function (e) {\n\n      if (!$(e.target).is(\"#user-profile\") && $(e.target).closest(\"#user\").length === 0) {\n        $userProfile.hide(\"fast\");\n      }\n\n      e.stopPropagation();\n    });\n  },\n  /*\r\n     * Show QR mobile authentication popup\r\n     */\n  showQRCodePopup: function showQRCodePopup() {\n    var self = this;\n    var url = this.dataService.serviceLocator.getUrl(\"login-qr-image64\");\n\n    $.ajax({\n      url: url,\n      success: function success(data) {\n        var template = self.workportalFacade.getTemplate(\"menu.modal.qr\");\n        var popupContent = $.tmpl(template, {});\n\n        $(popupContent).find(\"#QRCode\").attr(\"src\", \"data:image/png;base64,\" + data);\n        $(popupContent).dialog({\n          width: 590,\n          modal: true,\n          title: null,\n          dialogClass: \"qr-dialog\",\n          allowmaximize: false,\n          maximized: false,\n          resizable: false,\n          draggable: false });\n\n      } });\n\n  },\n  /**\r\n      * Creates a generic menu popup\r\n      * @param options\r\n      */\n  showMenuPopup: function showMenuPopup(options) {\n    var self = this;\n    var content = self.getContent();\n    var popup = new bizagi.workportal.desktop.popup(self.dataService, self.workportalFacade, {\n      sourceElement: options.buttonSelector,\n      my: options.my || \"center top\",\n      at: options.at || \"center bottom\",\n      offset: options.offset,\n      height: options.height,\n      width: options.width });\n\n\n    // If the same popup is opened close it\n    if (self.currentPopup == options.buttonSelector) {\n      bizagi.workportal.desktop.popup.closePopupInstance();\n      return;\n    }\n\n    // Shows the popup\n    self.currentPopup = options.buttonSelector;\n    var popupContent = self.workportalFacade.getTemplate(options.template);\n    popup.render(popupContent);\n\n    // Adds the active class for buttons\n    $(options.buttonSelector, content).addClass(\"active\");\n\n    // Checks for close signal to change the class again\n    $.when(popup.closed()).\n    done(function () {\n      self.currentPopup = null;\n      $(options.buttonSelector, content).removeClass(\"active\");\n    });\n  },\n\n  /**\r\n      * Shows the user popup to access more options\r\n      */\n  showUserPopup: function showUserPopup() {\n    var self = this;\n    self.showMenuPopup({\n      buttonSelector: \"#ui-bizagi-wp-menu-username\",\n      template: \"menu.modal.user\",\n      offset: \"0 0\",\n      height: 80,\n      width: 90 });\n\n  },\n\n  /**\r\n      *  Shows the widgets popup to access all dynamic content\r\n      * @param options\r\n      */\n  showWidgetsPopup: function showWidgetsPopup(options) {\n    options = options || {};\n    var self = this;\n    self.showMenuPopup({\n      buttonSelector: options[\"buttonSelector\"] || \"#main_menu li#menuListWidget\",\n      template: options[\"template\"] || \"menu.modal.widgets\",\n      offset: options[\"offset\"] || \"18 -34\",\n      height: options[\"height\"] || 160,\n      width: options[\"width\"] || 175 });\n\n  },\n\n  /**\r\n      * Show new case popup to create a case\r\n      */\n  showNewCasePopup: function showNewCasePopup() {\n    var self = this;\n    var content = self.getContent();\n\n    // Switch buttonstyle\n    $(\"#main_menu li#menuListNew\", content).addClass(\"active\");\n\n    // If the same popup is opened close it\n    if (self.currentPopup == \"newCase\") {\n      bizagi.workportal.desktop.popup.closePopupInstance();\n      return;\n    }\n\n    // Shows a popup widget\n    self.currentPopup = \"newCase\";\n    self.publish(\"popupWidget\", {\n      widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_NEWCASE,\n      options: {\n        sourceElement: \"#main_menu li#menuListNew\",\n        'max-height': '746',\n        height: 'auto',\n        width: '339',\n        offset: \"18 -4\", //x y\n        activeScroll: false,\n        closed: function closed() {\n          self.currentPopup = null;\n          $(\"#main_menu li#menuListNew\", content).removeClass(\"active\");\n        } } });\n\n\n  },\n\n  /**\r\n        *   Show new case popup to create a case\r\n        */\n  showMySearchPopup: function showMySearchPopup() {\n    var self = this;\n    var content = self.getContent();\n\n    // Switch buttonstyle\n    $(\"#ui-bizagi-wp-widget-searchContainer\", content).addClass(\"active\");\n\n    // If the same popup is opened close it\n    if (self.currentPopup == \"mySearch\") {\n      bizagi.workportal.desktop.popup.closePopupInstance();\n      return;\n    }\n\n    // Shows a popup widget\n    self.currentPopup = \"mySearch\";\n    self.publish(\"popupWidget\", {\n      widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_MYSEARCHLIST,\n      options: {\n        sourceElement: \"#ui-bizagi-wp-widget-searchContainer\",\n        'max-height': '346',\n        height: 'auto',\n        width: '339',\n        top: '52',\n        offset: \"18 10\",\n        activeScroll: true,\n        closed: function closed() {\n          self.currentPopup = null;\n          $(\"#ui-bizagi-wp-widget-searchContainer\", content).removeClass(\"active\");\n        } } });\n\n\n  },\n\n  /**\r\n      * Show new case popup to create a case\r\n      */\n  showQueriesPopup: function showQueriesPopup() {\n    var self = this;\n    var content = self.getContent();\n\n    // Switch buttonstyle\n    $(\"#main_menu li#menuListQueries\", content).addClass(\"active\");\n\n    // If the same popup is opened close it\n    if (self.currentPopup == \"queries\") {\n      bizagi.workportal.desktop.popup.closePopupInstance();\n      return;\n    }\n    var widgetName = bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_QUERIES;\n    if (bizagi.util.parseBoolean(bizagi.override.disableFrankensteinQueryForms) == true) {\n      widgetName = bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_QUERIES_DEFINITION;\n    }\n\n    bizagi.loader.start(\"queries\").then(function () {\n      // Shows a popup widget\n      self.currentPopup = \"queries\";\n      self.publish(\"popupWidget\", {\n        widgetName: widgetName,\n        options: {\n          sourceElement: \"#main_menu li#menuListQueries\",\n          'max-height': '346',\n          height: 'auto',\n          width: '339',\n          offset: \"18 -4\",\n          activeScroll: true,\n          closed: function closed() {\n            self.currentPopup = null;\n            $(\"#main_menu li#menuListQueries\", content).removeClass(\"active\");\n          } } });\n\n\n    });\n  },\n\n  /**\r\n      * Show popup with information about the product\r\n      */\n  showAboutPopup: function showAboutPopup() {\n    var self = this;\n    var template = self.workportalFacade.getTemplate(\"menu.modal.about\");\n\n    var argsTemplate = {\n      build: bizagi.loader.productBuildToAbout,\n      currentYear: bizagi.loader.currentYearVersion,\n      hostName: bizagiConfig.hostName || \"\" };\n\n\n    var popupContent = $.tmpl(template, argsTemplate);\n    $(popupContent).dialog({\n      width: 430,\n      height: 200,\n      modal: true,\n      title: bizagi.localization.getResource('workportal-menu-about'),\n      allowmaximize: false,\n      maximized: false,\n      resizable: false,\n      draggable: false });\n\n  },\n\n  /**\r\n      * Check permisions for category\r\n      * @param data\r\n      * @param key\r\n      * @return {boolean}\r\n      */\n  checkRootCategory: function checkRootCategory(data, key) {\n    if (data[\"permissions\"] != undefined) {\n      for (var i = 0; i < data[\"permissions\"].length; i++) {\n        if (data[\"permissions\"][i][key] != undefined) {\n          return true;\n        }\n      }\n    }\n    return false;\n  },\n\n  /**\r\n      *\tGet root category\r\n      * @param data\r\n      * @param key\r\n      * @return {*}\r\n      */\n  getsRootCategory: function getsRootCategory(data, key) {\n    for (var i = 0; i < data[\"permissions\"].length; i++) {\n      if (data[\"permissions\"][i][key] != undefined) {\n        return data[\"permissions\"][i][key];\n      }\n    }\n    return {};\n  },\n\n  /**\r\n      * Get data for a category menu\r\n      * @param data\r\n      * @param category\r\n      * @return {Array}\r\n      */\n  getSubMenuData: function getSubMenuData(data, category) {\n    var self = this;\n    var result = [];\n    var prefix = \"workportal-menu-submenu-\";\n    data = data || self.security.getRawData() || {};\n\n    if (self.checkRootCategory(data, category)) {\n      $.each(self.getsRootCategory(data, category), function (k, v) {\n        if (v !== \"MultilanguageEntities\") {//To avoid add in the menu an option that not exists\n          result.push(\n          {\n            \"categoryKey\": v,\n            \"categoryName\": self.getResource(prefix + v),\n            \"categoryUrl\": self.dataService.getUrl({\n              \"endPoint\": v }) });\n\n\n        }\n\n      });\n    }\n\n    return result;\n  },\n  /**\r\n      * Render a submenu trough  BIZAGI_WORKPORTAL_WIDGET_SUBMENU\r\n      */\n  renderAdminMenu: function renderAdminMenu() {\n    var self = this;\n    var content = self.getContent();\n    var menuData = self.getSubMenuData(self.jsonSecurityList, \"Admin\");\n\n\n    //TODO: Remove this code when authorization services return a smartfolders value\n    menuData.push({\n      categoryKey: \"SmartFolders\",\n      categoryName: bizagi.localization.getResource(\"workportal-widget-smartfolders\"),\n      categoryUrl: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_SMARTFOLDERS });\n\n\n    // Switch buttonstyle\n    $(\"#main_menu li#menuListAdmin\", content).addClass(\"active\");\n    // If the same popup is opened close it\n    if (self.currentPopup == \"subMenu\") {\n      bizagi.workportal.desktop.popup.closePopupInstance();\n      self.currentPopup = null;\n      return;\n    }\n    // Shows a popup widget\n    self.currentPopup = \"subMenu\";\n    self.publish(\"popupWidget\", {\n      widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_SUBMENU,\n      options: {\n        sourceElement: \"#main_menu li#menuListAdmin\",\n        'max-height': '346',\n        height: 'auto',\n        width: '339',\n        offset: \"18 -4\",\n        activeScroll: true,\n        closed: function closed() {\n          self.currentPopup = null;\n          $(\"#main_menu li#menuListAdmin\", content).removeClass(\"active\");\n        },\n        menuData: menuData } });\n\n\n  },\n\n  /**\r\n      * Render Quick Process Menu\r\n      */\n\n  renderQuickProcessMenu: function renderQuickProcessMenu() {\n    var self = this;\n    var content = self.getContent();\n\n    var menuData = self.getSubMenuData(self.jsonSecurityList, \"AdhocProcess\");\n    var menuValidator = {\n      AdhocProcessAdmin: -1,\n      AdhocUserGroupAdmin: -1 };\n\n    for (var i = 0; i < menuData.length; i += 1) {\n      // Verify which permissions exist\n      menuValidator[menuData[i].categoryKey] = i;\n    }\n    if (menuValidator.AdhocProcessAdmin > -1) {\n      // Add the Create Process control\n      menuData.push({\n        \"categoryKey\": \"AdhocCreateProcess\",\n        \"categoryName\": self.getResource(\"workportal-menu-submenu-AdhocCreateProcess\"),\n        \"categoryUrl\": undefined });\n\n    }\n\n    // Switch buttonstyle\n    $(\"#main_menu li#menuListQuickProcess\", content).addClass(\"active\");\n    // If the same popup is opened close it\n    if (self.currentPopup == \"subMenu\") {\n      bizagi.workportal.desktop.popup.closePopupInstance();\n      self.currentPopup = null;\n      return;\n    }\n    // Shows a popup widget\n    self.currentPopup = \"subMenu\";\n\n    self.publish(\"popupWidget\", {\n      widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_SUBMENU,\n      options: {\n        sourceElement: \"#main_menu li#menuListQuickProcess\",\n        'max-height': '346',\n        height: 'auto',\n        width: '339',\n        offset: \"18 -4\",\n        activeScroll: true,\n        closed: function closed() {\n          self.currentPopup = null;\n          $(\"#main_menu li#menuListQuickProcess\", content).removeClass(\"active\");\n        },\n        menuData: menuData } });\n\n\n  },\n\n  /**\r\n      * Validate current url and bizagiConfig applicationUrl\r\n      */\n  validateUrlInQuickProcess: function validateUrlInQuickProcess() {\n    if (bizagiConfig.applicationUrl != undefined &&\n    window.location.href != bizagiConfig.applicationUrl) {\n      var alertMessage = \".:ERROR:. Please verify the key <app key='ApplicationURL'> in the web.config for Engine.\";\n      console.error(alertMessage + ' Current Url: ' + window.location.href + ' and BizagiBPM Url: ' + bizagiConfig.applicationUrl);\n    }\n  },\n\n  /**\r\n      * Render BAM Reports\r\n      */\n  renderReportsMenu: function renderReportsMenu() {\n    var self = this;\n    var content = self.getContent();\n\n    bizagi.loader.start(\"reports\").then(function () {\n      var widget = !bizagi.util.isIE8() ? bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_REPORTS_MENU : bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_REPORTS;\n      // Switch buttonstyle\n      $(\"#main_menu li#menuListReports\", content).addClass(\"active\");\n\n      // If the same popup is opened close it\n      if (self.currentPopup == \"subMenu\") {\n        bizagi.workportal.desktop.popup.closePopupInstance();\n        return;\n      }\n\n      // Shows a popup widget\n      self.currentPopup = \"subMenu\";\n      self.publish(\"popupWidget\", {\n        widgetName: widget,\n        options: {\n          sourceElement: \"#main_menu li#menuListReports\",\n          'max-height': '346',\n          height: 'auto',\n          width: '339',\n          offset: \"18 -4\",\n          activeScroll: true,\n          closed: function closed() {\n            self.currentPopup = null;\n            $(\"#main_menu li#menuListReports\", content).removeClass(\"active\");\n          },\n\n          menuData: self.getSubMenuData(self.jsonSecurityList, \"AnalysisReports\") } });\n\n\n    });\n  },\n\n  /**\r\n      * Shows the options for font size\r\n      */\n  renderFontMenu: function renderFontMenu() {\n    var self = this;\n    var content = self.getContent();\n\n    // Switch buttonstyle\n    $(\".ui-bizagi-wp-bt-font\", content).addClass(\"active\");\n\n    // If the same popup is opened close it\n    if (self.currentPopup == \"fontsize\") {\n      bizagi.workportal.desktop.popup.closePopupInstance();\n      return;\n    }\n\n    // Shows a popup widget\n    self.currentPopup = \"fontsize\";\n    self.publish(\"popupWidget\", {\n      widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_FONTSIZE,\n      options: {\n        sourceElement: \".ui-bizagi-wp-bt-font\",\n        offset: \"0 16\",\n        closed: function closed() {\n          self.currentPopup = null;\n          $(\".ui-bizagi-wp-bt-font\", content).removeClass(\"active\");\n        } } });\n\n\n\n  },\n\n  /**\r\n      * Renders a custom sub-menu\r\n      * @param menuButton\r\n      * @param submenu\r\n      * @param callback\r\n      */\n  renderSubMenu: function renderSubMenu(menuButton, submenu, callback) {\n    var self = this;\n    var content = self.getContent();\n    var menuData = [];\n\n    // Transform menu data\n    for (i in submenu) {\n      if (submenu.hasOwnProperty(i)) {\n        menuData.push({\n          categoryKey: submenu[i].id,\n          categoryName: submenu[i].text,\n          categoryClassName: submenu[i].className });\n\n      }\n    }\n\n    // Switch buttonstyle\n    menuButton.addClass(\"active\");\n\n    // If the same popup is opened close it\n    if (self.currentPopup == \"subMenu\") {\n      bizagi.workportal.desktop.popup.closePopupInstance();\n      return;\n    }\n\n    // Shows a popup widget\n    self.currentPopup = \"subMenu\";\n    self.publish(\"popupWidget\", {\n      widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_SUBMENU,\n      options: {\n        sourceElement: menuButton,\n        'max-height': '346',\n        height: 'auto',\n        width: '339',\n        offset: \"18 -4\",\n        activeScroll: true,\n        closed: function closed() {\n          self.currentPopup = null;\n          menuButton.removeClass(\"active\");\n        },\n        menuData: menuData,\n        customClickHandler: function customClickHandler(id) {\n          if (callback)\n          callback(self, id);\n        } } });\n\n\n  },\n\n  /**\r\n      * Show popup for entities\r\n      * @param url\r\n      * @todo Check if this method has any active dependency\r\n      */\n  showEntitiesPopup: function showEntitiesPopup(url) {\n    var self = this;\n    var content = self.getContent();\n\n\n    // Switch buttonstyle\n    $(\"#main_menu li#temp\", content).addClass(\"active\");\n\n    // If the same popup is opened close it\n    if (self.currentPopup == \"genericiframe\") {\n      bizagi.workportal.desktop.popup.closePopupInstance();\n      return;\n    }\n\n    // Shows a popup widget\n    self.currentPopup = \"genericiframe\";\n    self.publish(\"showDialogWidget\", {\n      widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_GENERICIFRAME,\n      widgetURL: url });\n\n  } });","/*\r\n*   Name: BizAgi Workportal Desktop Workarea Controller\r\n*   Author: Diego Parra \r\n*   Comments:\r\n*   -   This script will override workarea controller class to apply custom stuff just for desktop device\r\n*/\n\n// Auto extend\nbizagi.workportal.controllers.main.extend(\"bizagi.workportal.controllers.main\", {}, {});","/*\r\n*   Name: BizAgi Desktop Popup Implementation\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will shows a widget inside a popup box\r\n*/\n\n// Bind resize window\n$(window).bind(\"resize\", function () {\n  bizagi.workportal.desktop.popup.closePopupInstance();\n});\n\n// Extends itself\n$.Class.extend(\"bizagi.workportal.desktop.popup\", {\n\n  /*\r\n                                                    *   Static method that will return the current popup instance\r\n                                                    */\n  closePopupInstance: function closePopupInstance() {\n    if (bizagi.workportal.desktop.popup.instance) {\n      bizagi.workportal.desktop.popup.instance.close();\n    }\n  } },\n{\n\n  /* \r\n  *   Constructor\r\n  */\n  init: function init(dataService, workportalFacade, options) {\n    this.dataService = dataService;\n    this.workportalFacade = workportalFacade;\n\n    // Set display options\n    options = options || {};\n    this.sourceElement = options.sourceElement;\n    this.my = options.my || \"center top\";\n    this.at = options.at || \"center bottom\";\n    this.offset = options.offset || \"18 -20\";\n    this.activeScroll = options.activeScroll || false;\n    this.arrowPosition = options.arrowPosition || false;\n    if (options.position) {\n      this.position = options.position;\n    }\n    if (options.insertAfter) {\n      this.insertAfter = options.insertAfter;\n    }\n\n    // This option is only to help graphics designers on dummy pages\n    this.dontClose = options.dontClose || false;\n\n    // TODO: implement scroll for personalised container\n    this.scrollElement = options.scrollElement || \".content\";\n  },\n\n  /*\r\n     *   Renders some content inside a popup\r\n     *   Return a deferred to check when the popup closes\r\n     */\n  render: function render(content, params) {\n    var self = this;\n    var doc = window.document;\n    var template = self.workportalFacade.getTemplate(\"popup\");\n\n    params = params || {};\n\n    // Creates an instance deferred to be resolved when the popup closes\n    self.closeDeferred = new $.Deferred();\n\n    // Check if there are any popup open so we close first those instances\n    self.Class.closePopupInstance();\n\n    // Add to popup instances\n    bizagi.workportal.desktop.popup.instance = this;\n\n    // Extend Parameters\n    $.extend(params, params, { activeScroll: self.activeScroll });\n\n    // Append content into a div\n    self.popup = $.tmpl(template, params);\n    $(\".content\", self.popup).append(content);\n\n    if (self.insertAfter) {\n      $(self.insertAfter).after(self.popup);\n    } else {\n      self.popup.appendTo(\"body\", doc);\n    }\n\n    // Create popup box\n    self.showPopup(self.popup);\n  },\n\n  /*\r\n     *   Shows the popup box in the browser\r\n     */\n  showPopup: function showPopup(popup) {\n    var doc = window.document;\n    var self = this;\n\n    // Set width and height\n    if (self.popupWidth) popup.width(self.popupWidth);\n    if (self.popupHeight) popup.height(self.popupHeight);\n\n    // Locate over element\n    if (self.sourceElement) {\n      if (self.insertAfter) {\n        popup.find(\".selectarrow\").hide();\n        popup.css({\n          display: \"inline-block\",\n          \"float\": \"left\",\n          position: \"relative\",\n          left: \"37%\",\n          top: \"20px\",\n          \"z-index\": 1 });\n\n      } else {\n        popup.position({\n          my: self.my,\n          at: self.at,\n          of: $(self.sourceElement),\n          collision: \"none\",\n          offset: self.offset });\n\n        if (self.position) {\n          popup.css(\"position\", self.position);\n        }\n      }\n    } else {\n      popup.css(\"left\", ($(window).width() - popup.width()) / 2);\n      popup.css(\"top\", ($(window).height() - popup.height()) / 2);\n    }\n\n    // Move arrow\n    if (self.arrowPosition) {\n      var arrow = $(\".selectarrow\", popup);\n      arrow.css(self.arrowPosition);\n    }\n\n    // Define handler to close the item\n    setTimeout(function () {\n      // Capture all click elements inside the popup\n      popup.click(function (e) {\n        if (!bizagi.workportal.desktop.popup.instance) {\n          self.close();\n        }\n        e.stopPropagation();\n      });\n\n      // Make a document click, if the event bubbles up to here then the click was made outside popup boundaries\n      $(doc).one(\"click\", function () {\n        self.close();\n      });\n    }, 100);\n  },\n\n  /*\r\n     *   Returns the instance deferred to hold executions until \r\n     *   the popup is closed\r\n     */\n  closed: function closed() {\n    var self = this;\n    return self.closeDeferred;\n  },\n\n  /*\r\n     *   Forces to close the popup\r\n     */\n  close: function close() {\n    var doc = window.document;\n    var self = this;\n\n    // Just for testing purposes - used in complexgateway\n    if (this.dontClose) return;\n\n    //$(doc).unbind(\"click\"); Comment for prevent disable others click event\n\n    // Removes element\n    self.popup.remove();\n    bizagi.workportal.desktop.popup.instance = null;\n\n    // Resolve deferred\n    self.closeDeferred.resolve();\n  },\n\n  /*\r\n     *   Returns the popup content\r\n     */\n  getContent: function getContent() {\n    var self = this;\n    return self.popup;\n  } });","/*\r\n*   Name: BizAgi Desktop Popup Widget Implementation\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will shows a widget inside a popup box\r\n*/\n\n// Extends itself\nbizagi.workportal.desktop.popup.extend(\"bizagi.workportal.desktop.widgets.popup\", {}, {\n\n  /*\r\n                                                                                        *   Render the Widget\r\n                                                                                        *   Returns a deferred\r\n                                                                                        */\n  renderWidget: function renderWidget(params) {\n    var self = this;\n    var widget;\n    // Creates widget\n    $.when(\n    self.workportalFacade.getWidget(params.widgetName, params)).\n\n    pipe(function (result) {\n      // Renders widget\n      widget = result;\n      // register\n      self.register(widget);\n      return widget.render();\n\n    }).done(function () {\n      var content = widget.getContent();\n\n      // Renders content\n      self.render(content, params.options);\n    });\n  },\n\n  register: function register(widget) {\n    var self = this;\n    if (widget.registerCallback) {\n      widget.registerCallback(self);\n    }\n  } });","/*\r\n *   Name: BizAgi Workportal Desktop Render Widget Controller\r\n *   Author: Diego Parra (based on Edward Morales version)\r\n *   Comments:\r\n *   -   This script will provide desktop overrides to implement the render widget\r\n */\n\n// Auto extend\nbizagi.workportal.widgets.routing.extend(\"bizagi.workportal.widgets.routing\", {}, {\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    //Load templates\n    self.loadTemplates({\n      \"routing\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.routing\"),\n      useNewEngine: false });\n\n  },\n\n  /*\r\n      *   To be overriden in each device to apply layouts\r\n      */\n  postRender: function postRender() {\n    var self = this;\n    var content = self.getContent();\n\n    var workOnITActivitySelector = $(\"#ui-bizagi-wp-app-routing-activity-wf tbody tr\", content);\n    var workOnITProcessSelector = $(\"#ui-bizagi-wp-app-routing-process-wf tbody tr\", content);\n\n    var onlyUserWorkItems = self.params.data.fromSearchWidget ? \"false\" : \"true\";\n    var eventAsTasks = self.params.data.fromSearchWidget ? \"true\" : \"false\";\n\n    // Assing even style\n    $(\"tr:nth-child(even)\", content).addClass(\"event\");\n\n    $(\".workonitRow\", content).button();\n\n    $(workOnITActivitySelector).click(function () {\n      self.showWorkitem({\n        idCase: $(this).children(\":first\").children(\"#idCase\").val(),\n        idWorkitem: $(this).children(\":first\").children(\"#idWorkItem\").val(),\n        idTask: $(this).children(\":first\").children(\"#idTask\").val(),\n        idWorkflow: $(this).children(\":first\").children(\"#idWorkflow\").val(),\n        onlyUserWorkItems: onlyUserWorkItems,\n        eventAsTasks: eventAsTasks });\n\n    });\n\n\n    $(workOnITProcessSelector).click(function () {\n      self.publish(\"executeAction\", {\n        action: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,\n        idCase: $(this).children(\":first\").children(\"#idCase\").val(),\n        onlyUserWorkItems: onlyUserWorkItems,\n        eventAsTasks: eventAsTasks });\n\n\n      // close dialog\n      self.publish(\"closeCurrentDialog\");\n    });\n  },\n  /*\r\n      *   Shows the rendering widget\r\n      */\n  showWorkitem: function showWorkitem(params) {\n    var self = this;\n    var referrer = self.params.referrer;\n    // Shows render widget\n    $.when(bizagi.util.autoSave()).done(function () {\n      $(document).data('auto-save', '');\n      self.publish(\"executeAction\", {\n        action: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,\n        idCase: params.idCase,\n        idWorkItem: params.idWorkitem,\n        idWorkflow: params.idWorkflow,\n        idTask: params.idTask,\n        referrer: referrer });\n\n      // close dialog\n      self.publish(\"closeCurrentDialog\");\n    });\n  },\n  /**\r\n      * Show Async widget\r\n      */\n  showAsyncWidget: function showAsyncWidget(params) {\n    var self = this;\n\n    // Shows dialog widget with async template           \n    self.publish(\"showDialogWidget\", {\n      widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ASYNC,\n      data: data,\n      modalParameters: parameters });\n\n  } });","/*\r\n *   Name: BizAgi Workportal Desktop Routing Widget Controller\r\n *   Author: Diego Parra (based on Edward Morales version)\r\n *   Comments:\r\n *   -   This script will provide desktop overrides to implement the routing widget\r\n */\n\n// Auto extend\nbizagi.workportal.widgets.render.extend(\"bizagi.workportal.widgets.render\", {}, {\n\n  /*\r\n                                                                                  *   Constructor\r\n                                                                                  */\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    //Load templates\n    self.loadTemplates({\n      \"inbox-common-case-summary-subprocess\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.inbox.common\").concat(\"#ui-bizagi-workportal-widget-inbox-common-case-description-subprocess\"),\n      \"inbox-common-case-summary-assignees\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.inbox.common\").concat(\"#ui-bizagi-workportal-widget-inbox-common-case-description-assignees\"),\n      \"inbox-common-case-summary-events\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.inbox.common\").concat(\"#ui-bizagi-workportal-widget-inbox-common-case-description-events\"),\n      \"inbox-common-case-summary-activities\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.inbox.common\").concat(\"#ui-bizagi-workportal-widget-inbox-common-case-description-activities\"),\n      \"render-case-summary\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.render\").concat(\"#ui-bizagi-workportal-widget-render-case-description\"),\n      useNewEngine: false });\n\n  },\n\n  /*\r\n     *   Renders the content for the current controller\r\n     *   Returns a deferred because it has to load the current user\r\n     */\n  renderContent: function renderContent() {\n    var self = this;\n\n    // Set sub-templates\t\t\n    self.caseSummaryTemplate = self.getTemplate(\"render-case-summary\");\n    self.caseSummaryTemplateSubprocess = self.getTemplate(\"inbox-common-case-summary-subprocess\");\n    self.caseSummaryTemplateAssigness = self.getTemplate(\"inbox-common-case-summary-assignees\");\n    self.caseSummaryTemplateActivities = self.getTemplate(\"inbox-common-case-summary-activities\");\n    self.caseSummaryTemplateEvents = self.getTemplate(\"inbox-common-case-summary-events\");\n    self.paginationTemplate = self.workportalFacade.getTemplate(\"inbox-common-pagination-inbox\");\n\n    var result = self._super();\n    return result;\n  },\n\n  /*\r\n     *   To be overriden in each device to apply layouts\r\n     */\n  postRender: function postRender() {\n    var self = this;\n    var content = self.getContent();\n\n    self.params.referrerParams = self.params.referrerParams || {};\n\n    // Set instance variables\n    self.summaryDisplayed = true;\n\n    // Set scrollbars\n    $(\"#ui-bizagi-wp-app-render-desc-panel\", content).bizagiScrollbar();\n    $(\".scrollRender\", content).bizagiScrollbar({\n      autohide: false });\n\n\n    // Attach panel slide event\n    self.configureSlider();\n\n    // Configure header buttons\n    self.configureHeader();\n\n    // Resize layout\n    self.resizeLayout();\n\n\n    //self.renderSummaryTab.scrollabletab();\n    // jQuery-ui tabs\n    window.setTimeout(function () {\n      if (!bizagi.util.identicalObjects($(\"#ui-bizagi-details-tabs\", content).find('.ui-tabs-nav').offset(), { top: 0, left: 0 })) {\n        $(\"#ui-bizagi-details-tabs\", content).tabs().scrollabletab({\n          tooltipNext: self.getResource(\"workportal-scrollabletab-nex\"),\n          tooltipPrevious: self.getResource(\"workportal-scrollabletab-prev\") });\n\n      }\n\n    }, 500);\n\n    // Add click to view workflow\n    $(\".ui-bizagi-wp-app-inbox-cases-ico-view\", content).click(function () {\n      self.showGraphicQuery({ idCase: self.params.idCase, idWorkflow: self.params.idWorkflow });\n    });\n\n    // Bind navigation bar\n    // Set idcase data\n    $(\".back\", content).data(\"idCase\", self.getBackCase());\n    $(\".next\", content).data(\"idCase\", self.getNextCase());\n\n    // Bind for click event on back and next botton\n    $(\".back, .next\", content).click(function () {\n      var idCase = $(this).data(\"idCase\");\n      if (idCase > 0) {\n        self.publish(\"executeAction\", {\n          action: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,\n          idCase: idCase });\n\n      }\n    });\n\n    // Bind for click event on refresh botton\n    $(\".refresh\", content).click(function () {\n      var options = {\n        action: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,\n        idCase: self.params.idCase,\n        idTask: self.params.idTask,\n        idWorkflow: self.params.idWorkflow,\n        idWorkItem: self.params.idWorkitem,\n        referrer: self.params.referrer || \"inboxGrid\" };\n\n\n      self.publish(\"executeAction\", options);\n    });\n\n    // Bind for click event on return botton\n    $(\".ui-bizagi-wp-app-inbox-bt-back, #innerContentInbox h2\", content).click(function () {\n      if (bizagi)\n      if (bizagi.referrerParams)\n      var widget = bizagi.referrerParams.referrer || bizagi.cookie('bizagiDefaultWidget');\n      if (widget == \"queryform\") widget = bizagi.workportal.currentInboxView || \"inboxGrid\";\n\n      // switch referer widget \n      switch (widget) {\n        case \"inbox\":\n          self.publish(\"changeWidget\", {\n            widgetName: widget,\n            restoreStatus: true });\n\n          break;\n        case \"inboxGrid\":\n\n          self.publish(\"changeWidget\", {\n            widgetName: widget,\n            restoreStatus: true });\n\n          break;\n        case \"search\":\n          self.publish(\"executeAction\", {\n            action: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_SEARCH,\n            radNumber: bizagi.referrerParams.radNumber || \"\",\n            page: bizagi.referrerParams.page || 1,\n            onlyUserWorkItems: false });\n\n          break;\n        case \"queryform\":\n          self.publish(\"showDialogWidget\", {\n            widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_QUERYFORM,\n            queryFormAction: \"loadPrevious\" });\n\n          break;\n        case \"folders\":\n          var url = bizagi.referrerParams.urlParameters + \"&page=\" + bizagi.referrerParams.page;\n          $.when(self.dataService.getCasesByFolder(url)).\n          done(function (data) {\n            data.customized = true;\n            data.urlParameters = bizagi.referrerParams.urlParameters;\n\n            // Define title of widget\n            data.title = bizagi.referrerParams.name;\n\n            // Set a flag here to tell the search widget that must show the ungroup case from folder (icon).\n            data.casesGroupedByFolder = true;\n            data.idFolder = bizagi.referrerParams.id;\n\n            self.publish(\"changeWidget\", {\n              widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_SEARCH,\n              data: data,\n              referrerParams: {} });\n\n          });\n          break;\n        default:\n          self.publish(\"changeWidget\", {\n            widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID,\n            restoreStatus: true });\n\n          break;}\n\n    });\n\n    // Bind for hover event on refresh and return botton\n    $(\".refresh,.return\", content).hover(function () {\n      $(this).addClass(\"active\");\n    }, function () {\n      $(this).removeClass(\"active\");\n    });\n\n    // Bind for hover event on next and back botton\n    $(\".next,.back\", content).hover(\n    function () {\n      if ($(this).data(\"idCase\") > 0) {\n        $(this).addClass(\"active\");\n      }\n    },\n    function () {\n      $(this).removeClass(\"active\");\n    });\n\n    if (self.dataService.lastQueryFullKey != null) {\n      $(\"#bt-case-action-showquery\", content).click(function () {\n        self.publish(\"showDialogWidget\", {\n          widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_QUERYFORM,\n          queryFormAction: \"loadPrevious\" });\n\n\n      });\n    }\n\n    // Bind botton summary actions\n    $(\"#bt-case-action-log\", content).click(function () {\n\n      self.publish(\"showDialogWidget\", {\n        widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ACTIVITY_LOG,\n        data: { \"idCase\": self.params.idCase, \"idWorkflow\": self.params.idWorkflow },\n        modalParameters: {\n          title: bizagi.localization.getResource(\"render-actions-log\") } });\n\n\n\n    });\n\n    $(\"#bt-case-action-reassing\", content).click(function () {\n      var idCase = self.params.idCase;\n      var idWorkItem = self.params.idWorkitem;\n      var idtask = self.params.idtask;\n      $.when(self.publish(\"showDialogWidget\", {\n        widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_REASSIGN_CASE,\n        data: { \"idCase\": idCase,\n          \"idWorkItem\": idWorkItem },\n\n        closeVisible: false,\n        maximize: true,\n        modalParameters: {\n          title: bizagi.localization.getResource(\"render-actions-reassign\"),\n          width: \"910px\",\n          id: \"CaseAdmin\" } }));\n\n\n\n\n\n    });\n\n    self.printFormCommand = new bizagi.workportal.command.printform(self.workportalFacade);\n\n    $(\"#bt-case-action-print\", content).click(function () {\n\n      var printParams = { idCase: self.params.idCase,\n        idWorkitem: self.params.idWorkitem,\n        idTask: self.params.idTask };\n\n\n      self.printFormCommand.print(printParams);\n\n    });\n\n    $(\"#bt-case-action-help\", content).click(function () {\n      var url = $(this).find(\"#helpUrl\").val();\n\n      self.publish(\"showDialogWidget\", {\n        widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_GENERICIFRAME,\n        widgetURL: url,\n        modalParameters: {\n          title: bizagi.localization.getResource(\"render-actions-help\") } });\n\n\n    });\n  },\n  /*\r\n     *   configures the slide event\r\n     */\n  configureSlider: function configureSlider() {\n    var self = this;\n    var content = self.getContent();\n    if (!content) {\n      return;\n    }\n\n    var summaryContainer = self.getComponentContainer(\"summary\");\n    var sliderPanel = $(\"#panelArrowContainer\", content);\n\n    sliderPanel.click(function () {\n      if (summaryContainer.is(\":visible\")) {\n        // Hide left panel\n        self.hideSummary();\n\n      } else {\n        // Show left panel\n        self.showSummary();\n      }\n    });\n  },\n  /*\r\n     *   Hides the summary component\r\n     */\n  hideSummary: function hideSummary(animate) {\n    var self = this;\n    var content = self.getContent();\n    if (!content) {\n      return;\n    }\n\n    var summaryContainer = self.getComponentContainer(\"summary\");\n    var renderPanel = $(\"#ui-bizagi-wp-app-render-form\", content);\n    var sliderPanel = $(\"#panelArrowContainer\", content);\n    var panelArrow = $(\"#panelArrow\", content);\n    animate = typeof animate !== \"undefined\" ? animate : false;\n\n    if (!self.summaryDisplayed) {\n      return;\n    }\n\n    if (animate) {\n      // Hide description panel\n      summaryContainer.parent().hide('drop', {}, 300);\n\n      // Run animation\n      $.when(sliderPanel.animate({\n        left: \"0px\" },\n      300)).\n      done(function () {\n        renderPanel.addClass(\"ui-bizagi-state-extended\");\n        $(\"#ui-bizagi-wp-app-render-form-content\", content).css(\"padding-left\", \"0px\");\n      });\n\n    } else {\n      // Hide description panel\n      summaryContainer.parent().hide();\n      sliderPanel.css(\"left\", \"0px\");\n      renderPanel.addClass(\"ui-bizagi-state-extended\");\n      $(\"#ui-bizagi-wp-app-render-form-content\", content).css(\"padding-left\", \"0px\");\n    }\n\n    // Change arrows\n    panelArrow.removeClass(\"panelArrowLeft\");\n    panelArrow.addClass(\"panelArrowRight\");\n\n    // Turn off flag\n    self.summaryDisplayed = false;\n\n    // Trigger render resize\n    if (self.renderingFacade) {\n      self.renderingFacade.resize({\n        forceResize: true });\n\n    }\n  },\n  /*\r\n     *   Show the summary component\r\n     */\n  showSummary: function showSummary(animate) {\n    var self = this;\n    var content = self.getContent();\n    if (!content) {\n      return;\n    }\n\n    var summaryContainer = self.getComponentContainer(\"summary\");\n    var renderPanel = $(\"#ui-bizagi-wp-app-render-form\", content);\n    var sliderPanel = $(\"#panelArrowContainer\", content);\n    var panelArrow = $(\"#panelArrow\", content);\n    animate = typeof animate !== \"undefined\" ? animate : false;\n\n    if (self.summaryDisplayed) {\n      return;\n    }\n\n    // Show description panel\n    summaryContainer.parent().show();\n    $(\"#ui-bizagi-wp-app-render-form-content\", content).css(\"padding-left\", \"380px\");\n    sliderPanel.css(\"left\", \"380px\");\n    renderPanel.removeClass(\"ui-bizagi-state-extended\");\n\n    // Change arrows\n    panelArrow.removeClass(\"panelArrowRight\");\n    panelArrow.addClass(\"panelArrowLeft\");\n\n    // Turn on flag\n    self.summaryDisplayed = true;\n\n\n    // jQuery-ui tabs scrollable\n    if (!($(\"#ui-bizagi-details-tabs\", content).closest(\"#stTabswrapper\").length > 0)) {\n      $(\"#ui-bizagi-details-tabs\", content).tabs().scrollabletab({\n        tooltipNext: self.getResource(\"workportal-scrollabletab-nex\"),\n        tooltipPrevious: self.getResource(\"workportal-scrollabletab-prev\") });\n\n    }\n\n    // Trigger render resize\n    if (self.renderingFacade) {\n      self.renderingFacade.resize({\n        forceResize: true });\n\n    }\n\n  },\n  /*\r\n     *   Configure header for the widget\r\n     */\n  configureHeader: function configureHeader() {\n    var self = this;\n    var content = self.getContent();\n\n    // Configure back button\n    //        $(\"#ui-bizagi-wp-app-inbox-bt-back\", content).click(function() {\n    //            self.publish(\"changeWidget\", {\n    //                widgetName: bizagi.workportal.currentInboxView\n    //            });\n    //        });\n  },\n  /*\r\n     *   When the window resizes, runs this method to adjust stuff in each controller or widget\r\n     *   Override when needed\r\n     */\n  performResizeLayout: function performResizeLayout() {\n    var self = this;\n    var windowWidth = $(window).width();\n\n    // Call base\n    this._super();\n\n    // If window width is less or equals 1366 hide the summary\n    if (windowWidth <= 1366) {\n      if (self.summaryDisplayed) {\n        self.hideSummary(false);\n      } else {\n        // Trigger render resize\n        if (self.renderingFacade) {\n          self.renderingFacade.resize({\n            forceResize: true });\n\n        }\n      }\n\n    } else {\n      if (!self.summaryDisplayed) {\n        self.showSummary(false);\n      } else\n      {\n        // Trigger render resize\n        if (self.renderingFacade) {\n          self.renderingFacade.resize({\n            forceResize: true });\n\n        }\n      }\n    }\n  },\n  /*\r\n     *   Opens the workportal old form in a window\r\n     */\n  openOldWorkportalForm: function openOldWorkportalForm() {\n    var self = this;\n    //var url = BIZAGI_PATH_TO_BASE + \"defaulthtml.aspx?FrameURL=App/ListaDetalle/Detalle.aspx?idCase=\" + self.params.idCase;\n    var url = BIZAGI_PATH_TO_BASE + \"App/ListaDetalle/Detalle.aspx?PostBack=1&idCase=\" + self.params.idCase;\n    if (typeof self.params.idWorkitem != 'undefined') {\n      url = url + \"&idWorkitem=\" + self.params.idWorkitem;\n    }\n    if (typeof self.params.idTask != 'undefined') {\n      url = url + \"&idTask=\" + self.params.idTask;\n    }\n    if (false) {\n      url = url + \"&isSummary=1\";\n\n    }\n\n    alert(url);\n    window.open(url, \"oldStyleBizAgi\", \"width=1024,height=768, Menubar=NO, Location=NO, Status=NO\");\n  },\n  /*\r\n     *  Navigation options\r\n     */\n  getListKey: function getListKey() {\n    var self = this;\n    bizagi.lstIdCases = bizagi.lstIdCases || {};\n    if (bizagi.lstIdCases.length > 1) {\n      for (var i = 0; i < bizagi.lstIdCases.length; i++) {\n        if (self.params.idCase == bizagi.lstIdCases[i]) {\n          return i;\n        }\n      }\n    }\n    return -1;\n  },\n  getNextCase: function getNextCase() {\n    var self = this;\n    var nextIdCase = 0;\n    var key = self.getListKey();\n\n    // Check if last element\n    if (bizagi.lstIdCases.length == key + 1 || bizagi.lstIdCases.length == 1) {\n      nextIdCase = -1;\n    } else {\n      nextIdCase = bizagi.lstIdCases[key + 1];\n    }\n\n    return nextIdCase;\n  },\n  getBackCase: function getBackCase() {\n    var self = this;\n    var prevIdCase = 0;\n    var key = self.getListKey();\n\n    // Check if first element\n    if (key == 0) {\n      prevIdCase = -1;\n    } else {\n      prevIdCase = bizagi.lstIdCases[key - 1] || -1;\n    }\n\n    return prevIdCase;\n  } });","/*\r\n *   Name: Start Form Widget Controller\r\n *   Author: Fabian Moreno (based on Diego Parra version)\r\n *   Comments:\r\n *   -   This script will provide start form widget\r\n */\n\n// Auto extend\nbizagi.workportal.widgets.startForm.extend(\"bizagi.workportal.widgets.startForm\", {}, {\n  /*\r\n                                                                                        *   To be overriden in each device to apply layouts\r\n                                                                                        */\n\n  postRender: function postRender() {\n    var self = this;\n    var content = self.getContent();\n\n    self.params.referrerParams = self.params.referrerParams || {};\n\n    $(\"#ui-bizagi-wp-app-render-form-content\", content).css(\"padding-left\", \"0px\");\n    $('.renderNavigation .back,.renderNavigation .next', content).hide();\n  } });","/*\r\n *   Name: BizAgi Workportal Desktop Routing Widget Controller\r\n *   Author: Diego Parra (based on Edward Morales version)\r\n *   Comments:\r\n *   -   This script will provide desktop overrides to implement the routing widget\r\n */\n\n// Auto extend\nbizagi.workportal.widgets.renderform.extend(\"bizagi.workportal.widgets.renderform\", {}, {\n\n  /*\r\n                                                                                           *   Constructor\r\n                                                                                           */\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    //Load templates\n    self.loadTemplates({\n      \"renderform\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.renderform\").concat(\"#ui-bizagi-workportal-widget-renderform\"),\n      useNewEngine: false });\n\n  },\n  /*\r\n      *   To be overriden in each device to apply layouts\r\n      */\n  postRender: function postRender() {\n    var self = this;\n    var content = self.getContent();\n\n    self.params.referrerParams = self.params.referrerParams || {};\n\n    // Set instance variables\n    self.summaryDisplayed = true;-\n\n    // Set scrollbars\n    $(\"#ui-bizagi-wp-app-render-desc-panel\", content).bizagiScrollbar();\n    $(\".scrollRender\", content).bizagiScrollbar({\n      autohide: false });\n\n\n    // Attach panel slide event\n    self.configureSlider();\n\n    // Configure header buttons\n    self.configureHeader();\n\n    // Resize layout\n    self.resizeLayout();\n\n\n    //self.renderSummaryTab.scrollabletab();\n    // jQuery-ui tabs\n    $(\"#ui-bizagi-details-tabs\", content).tabs().scrollabletab({\n      tooltipNext: self.getResource(\"workportal-scrollabletab-nex\"),\n      tooltipPrevious: self.getResource(\"workportal-scrollabletab-prev\") });\n\n\n\n    // Add click to view workflow\n    $(\".ui-bizagi-wp-app-inbox-cases-ico-view\", content).click(function () {\n      var baseUrl = \"App/Cockpit/graphicquery.aspx?analysisType=2&CaseId=\";\n      window.open(baseUrl + self.params.idCase);\n    });\n\n    // Bind navigation bar\n    // Set idcase data\n    $(\".back\", content).data(\"idCase\", self.getBackCase());\n    $(\".next\", content).data(\"idCase\", self.getNextCase());\n\n    // Bind for click event on back and bext botton\n    $(\".back, .next\", content).click(function () {\n      var idCase = $(this).data(\"idCase\");\n      if (idCase > 0) {\n        self.publish(\"executeAction\", {\n          action: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,\n          idCase: idCase });\n\n      }\n    });\n\n    // Bind for click event on refresh botton\n    $(\".refresh\", content).click(function () {\n      self.publish(\"changeWidget\", {\n        widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_RENDER,\n        idCase: self.params.idCase,\n        idWorkitem: self.params.idWorkitem,\n        idTask: self.params.idTask,\n        referrer: bizagi.referrerParams.referrer });\n\n    });\n\n    // Bind for click event on return botton\n    $(\".ui-bizagi-wp-app-inbox-bt-back, #innerContentInbox h2\", content).click(function () {\n      var widget = bizagi.referrerParams.referrer || bizagi.cookie('bizagiDefaultWidget');\n      // switch referer widget\n      switch (widget) {\n        case \"inbox\":\n          self.publish(\"changeWidget\", {\n            widgetName: widget,\n            restoreStatus: true });\n\n          break;\n        case \"inboxGrid\":\n          self.publish(\"changeWidget\", {\n            widgetName: widget,\n            restoreStatus: true });\n\n          break;\n        case \"search\":\n          self.publish(\"executeAction\", {\n            action: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_SEARCH,\n            radNumber: bizagi.referrerParams.radNumber || \"\",\n            page: bizagi.referrerParams.page || 1,\n            onlyUserWorkItems: false });\n\n          break;\n        case \"queryform\":\n          self.publish(\"showDialogWidget\", {\n            widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_QUERYFORM,\n            queryFormAction: \"loadPrevious\" });\n\n          break;\n        case \"folders\":\n          var url = bizagi.referrerParams.urlParameters + \"&page=\" + bizagi.referrerParams.page;\n          $.when(self.dataService.getCasesByFolder(url)).\n          done(function (data) {\n            data.customized = true;\n            data.urlParameters = bizagi.referrerParams.urlParameters;\n\n            // Define title of widget\n            data.title = bizagi.referrerParams.name;\n\n            // Set a flag here to tell the search widget that must show the ungroup case from folder (icon).\n            data.casesGroupedByFolder = true;\n            data.idFolder = bizagi.referrerParams.id;\n\n            self.publish(\"changeWidget\", {\n              widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_SEARCH,\n              data: data,\n              referrerParams: {} });\n\n          });\n          break;\n        default:\n          self.publish(\"changeWidget\", {\n            widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX,\n            restoreStatus: true });\n\n          break;}\n\n    });\n\n    // Bind for hover event on refresh and return botton\n    $(\".refresh,.return\", content).hover(function () {\n      $(this).addClass(\"active\");\n    }, function () {\n      $(this).removeClass(\"active\");\n    });\n\n    // Bind for hover event on next and back botton\n    $(\".next,.back\", content).hover(\n    function () {\n      if ($(this).data(\"idCase\") > 0) {\n        $(this).addClass(\"active\");\n      }\n    },\n    function () {\n      $(this).removeClass(\"active\");\n    });\n\n    if (self.dataService.lastQueryFullKey != null) {\n      $(\"#bt-case-action-showquery\", content).click(function () {\n        self.publish(\"showDialogWidget\", {\n          widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_QUERYFORM,\n          queryFormAction: \"loadPrevious\" });\n\n\n      });\n    }\n\n    // Bind botton summary actions\n    $(\"#bt-case-action-log\", content).click(function () {\n      var url = \"App/Log/log.aspx?idCase=\" + self.params.idCase + \"&logtype=s\";\n\n      self.publish(\"showDialogWidget\", {\n        widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_GENERICIFRAME,\n        widgetURL: url,\n        modalParameters: {\n          title: bizagi.localization.getResource(\"render-actions-log\") },\n\n        afterLoad: function afterLoad(params) {\n          // This script will execute inside the iframe context\n\n          // Hack this method because it will try to change iframe location\n          // instead of this we will for to close the current dialog\n          this.backURL = function () {\n            // Close current dialog\n            params.controller.publish(\"closeCurrentDialog\");\n          };\n        } });\n\n    });\n\n    $(\"#bt-case-action-reassing\", content).click(function () {\n      var url = \"App/Admin/ListUsers.aspx?WorkItemAdmin=\" + self.params.idCase + \"|\" + self.params.idWorkitem + \"|&UserAdminAction=2\";\n\n      self.publish(\"showDialogWidget\", {\n        widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_GENERICIFRAME,\n        widgetURL: url,\n        modalParameters: {\n          title: bizagi.localization.getResource(\"render-actions-reassign\") },\n\n        onClose: function onClose() {\n          self.executeAction(bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING, {\n            idCase: self.params.idCase,\n            idWorkitem: self.params.idWorkitem,\n            idTask: self.params.idTask });\n\n        } });\n\n    });\n\n    //        $(\"#bt-case-action-print\",content).click(function(){\n    //            var url =\"App/ListaDetalle/PrintVersion.aspx?PostBack=1&idCase=\"+self.params.idCase+\"&idWorkitem=\"+self.params.idWorkitem+\"&idTask=\"+self.params.idTask;\n    //\n    //\n    //\n    //            self.publish(\"showDialogWidget\", {\n    //                widgetName : bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_GENERICIFRAME,\n    //                widgetURL: url,\n    //                modalParameters: {\n    //                    title: bizagi.localization.getResource(\"render-actions-print\")\n    //                },\n    //                buttons: [\n    //                    {\n    //                        text: bizagi.localization.getResource(\"workportal-widget-dialog-box-print\"),\n    //                        click: function() {\n    //                            $(window.frames[\"iframe\"]).focus();\n    //                            window.frames[\"iframe\"].print();\n    //                        }\n    //                    }\n    //                ]\n    //            });\n    //        });\n    $(\"#bt-case-action-print\", content).click(function () {\n      var url = \"App/Admin/ListUsers.aspx?WorkItemAdmin=\" + self.params.idCase + \"|\" + self.params.idWorkitem + \"|&UserAdminAction=2\";\n\n      self.publish(\"showDialogWidget\", {\n        widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_GENERICIFRAME,\n        widgetURL: url,\n        modalParameters: {\n          title: bizagi.localization.getResource(\"render-actions-reassign\") },\n\n        onClose: function onClose() {\n          self.executeAction(bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING, {\n            idCase: self.params.idCase,\n            idWorkitem: self.params.idWorkitem,\n            idTask: self.params.idTask });\n\n        } });\n\n    });\n\n\n\n\n\n    $(\"#bt-case-action-help\", content).click(function () {\n      var url = $(this).find(\"#helpUrl\").val();\n\n      self.publish(\"showDialogWidget\", {\n        widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_GENERICIFRAME,\n        widgetURL: url,\n        modalParameters: {\n          title: bizagi.localization.getResource(\"render-actions-help\") } });\n\n\n    });\n  },\n\n  /*\r\n      *   configures the slide event\r\n      */\n  configureSlider: function configureSlider() {\n    var self = this;\n    var content = self.getContent();\n    if (!content) return;\n\n    var summaryContainer = self.getComponentContainer(\"summary\");\n    var sliderPanel = $(\"#panelArrowContainer\", content);\n\n    sliderPanel.click(function () {\n      if (summaryContainer.is(\":visible\")) {\n        // Hide left panel\n        self.hideSummary();\n\n      } else {\n        // Show left panel\n        self.showSummary();\n      }\n    });\n  },\n\n  /*\r\n      *   Hides the summary component\r\n      */\n  hideSummary: function hideSummary(animate) {\n    var self = this;\n    var content = self.getContent();\n    if (!content) return;\n\n    var summaryContainer = self.getComponentContainer(\"summary\");\n    var renderPanel = $(\"#ui-bizagi-wp-app-render-form\", content);\n    var sliderPanel = $(\"#panelArrowContainer\", content);\n    var panelArrow = $(\"#panelArrow\", content);\n\n    if (!self.summaryDisplayed) return;\n\n    // Hide description panel\n    summaryContainer.parent().hide();\n    sliderPanel.css(\"left\", \"0px\");\n    renderPanel.addClass(\"ui-bizagi-state-extended\");\n    $(\"#ui-bizagi-wp-app-render-form-content\", content).css(\"padding-left\", \"0px\");\n\n    // Change arrows\n    panelArrow.removeClass(\"panelArrowLeft\");\n    panelArrow.addClass(\"panelArrowRight\");\n\n    // Turn off flag\n    self.summaryDisplayed = false;\n\n    // Trigger render resize\n    if (self.renderingFacade) self.renderingFacade.resize({\n      forceResize: true });\n\n  },\n\n  /*\r\n      *   Show the summary component\r\n      */\n  showSummary: function showSummary(animate) {\n    var self = this;\n    var content = self.getContent();\n    if (!content) return;\n\n    var summaryContainer = self.getComponentContainer(\"summary\");\n    var renderPanel = $(\"#ui-bizagi-wp-app-render-form\", content);\n    var sliderPanel = $(\"#panelArrowContainer\", content);\n    var panelArrow = $(\"#panelArrow\", content);\n    animate = typeof animate !== \"undefined\" ? animate : false;\n\n    if (self.summaryDisplayed) return;\n\n    if (animate) {\n      // Show description panel\n      summaryContainer.parent().show('drop', {}, 500);\n\n      // Resize render layout to set padding 400px\n      $(\"#ui-bizagi-wp-app-render-form-content\", content).css(\"padding-left\", \"380px\");\n\n      // Run animation\n      $.when(sliderPanel.animate({\n        left: \"380px\" },\n      300)).\n      done(function () {\n        renderPanel.removeClass(\"ui-bizagi-state-extended\");\n      });\n\n    } else {\n      // Show description panel\n      summaryContainer.parent().show();\n      $(\"#ui-bizagi-wp-app-render-form-content\", content).css(\"padding-left\", \"380px\");\n      sliderPanel.css(\"left\", \"380px\");\n      renderPanel.removeClass(\"ui-bizagi-state-extended\");\n    }\n\n    // Change arrows\n    panelArrow.removeClass(\"panelArrowRight\");\n    panelArrow.addClass(\"panelArrowLeft\");\n\n    // Turn on flag\n    self.summaryDisplayed = true;\n\n    // Trigger render resize\n    if (self.renderingFacade) self.renderingFacade.resize({\n      forceResize: true });\n\n  },\n\n  /*\r\n      *   Configure header for the widget\r\n      */\n  configureHeader: function configureHeader() {\n    var self = this;\n    var content = self.getContent();\n\n    // Configure back button\n    //        $(\"#ui-bizagi-wp-app-inbox-bt-back\", content).click(function() {\n    //            self.publish(\"changeWidget\", {\n    //                widgetName: bizagi.workportal.currentInboxView\n    //            });\n    //        });\n  },\n\n\n  /*\r\n      *   When the window resizes, runs this method to adjust stuff in each controller or widget\r\n      *   Override when needed  \r\n      */\n  performResizeLayout: function performResizeLayout() {\n    var self = this;\n    var windowWidth = $(window).width();\n\n    // Call base\n    this._super();\n\n    // If window width is less or equals 1024 hide the summary\n    if (windowWidth <= 1024) {\n      if (self.summaryDisplayed) {\n        self.hideSummary(false);\n      } else {\n        // Trigger render resize\n        if (self.renderingFacade) self.renderingFacade.resize({\n          forceResize: true });\n\n      }\n\n    } else {\n      if (!self.summaryDisplayed) {\n        self.showSummary(false);\n      } else\n      {\n        // Trigger render resize\n        if (self.renderingFacade) self.renderingFacade.resize({\n          forceResize: true });\n\n      }\n    }\n  },\n\n  /*\r\n      *   Opens the workportal old form in a window\r\n      */\n  openOldWorkportalForm: function openOldWorkportalForm() {\n    var self = this;\n    var url = BIZAGI_PATH_TO_BASE + \"defaulthtml.aspx?FrameURL=App/ListaDetalle/Detalle.aspx?idCase=\" + self.params.idCase;\n    window.open(url, \"oldStyleBizAgi\", \"width=1024,height=768, Menubar=NO, Location=NO, Status=NO\");\n  },\n\n  /*\r\n      *  Navigation options\r\n      */\n  getListKey: function getListKey() {\n    var self = this;\n    bizagi.lstIdCases = bizagi.lstIdCases || {};\n    if (bizagi.lstIdCases.length > 1) {\n      for (var i = 0; i < bizagi.lstIdCases.length; i++) {\n        if (self.params.idCase == bizagi.lstIdCases[i]) {\n          return i;\n        }\n      }\n    }\n    return -1;\n  },\n\n  getNextCase: function getNextCase() {\n    var self = this;\n    var nextIdCase = 0;\n    var key = self.getListKey();\n\n    // Check if last element \n    if (bizagi.lstIdCases.length == key + 1 || bizagi.lstIdCases.length == 1) {\n      nextIdCase = -1;\n    } else {\n      nextIdCase = bizagi.lstIdCases[key + 1];\n    }\n\n    return nextIdCase;\n  },\n\n  getBackCase: function getBackCase() {\n    var self = this;\n    var prevIdCase = 0;\n    var key = self.getListKey();\n\n    // Check if first element \n    if (key == 0) {\n      prevIdCase = -1;\n    } else {\n      prevIdCase = bizagi.lstIdCases[key - 1];\n    }\n\n    return prevIdCase;\n  } });","var smartInboxModel = function smartInboxModel() {\n  /**\r\n                                                  * Smart Inbox Data Model\r\n                                                  */\n  var _smartInboxModel = {\n    \"id\": Math.guid(),\n    \"ownerType\": \"user\",\n    \"name\": \"\",\n    \"resultsPerPage\": 50,\n    \"order\": 0,\n    \"pinned\": false,\n    \"processes\": [],\n    \"columns\": [],\n    \"filter\": {},\n    \"sort\": [],\n    \"access\": [] };\n\n\n  var _getModel = function _getModel() {\n    return _smartInboxModel;\n  };\n\n  var _setModel = function _setModel(model) {\n    if (model == null || model === undefined) return;\n    _smartInboxModel = model;\n  };\n  var _getProperty = function _getProperty(property) {\n    return _smartInboxModel[property];\n  };\n  var _setProperty = function _setProperty(property, value) {\n    _smartInboxModel[property] = value;\n  };\n\n  var _addColumn = function _addColumn() {\n    _smartInboxModel.columns.push({\n      \"name\": \"\",\n      \"displayName\": \"\",\n      \"type\": \"\",\n      \"from\": [\n      {\n        \"process\": \"\",\n        \"column\": \"\" }] });\n\n\n\n  };\n\n  var _removeColumn = function _removeColumn(index) {\n    _smartInboxModel.columns.splice(index, 1);\n  };\n\n  var _updateColumn = function _updateColumn(index, column) {\n    _smartInboxModel.columns[index] = column;\n  };\n\n  var _moveColumn = function _moveColumn(fromIndex, toIndex) {\n    if (_smartInboxModel.columns[fromIndex] === undefined)\n    return;else\n    if (_smartInboxModel.columns[toIndex] === undefined) {\n      var column = _smartInboxModel.columns[fromIndex];\n      _smartInboxModel.columns.splice(fromIndex, 1);\n      _smartInboxModel.columns[toIndex] = column;\n    } else\n    {\n      var column = _smartInboxModel.columns.splice(fromIndex, 1)[0];\n      _smartInboxModel.columns.splice(toIndex, 0, column);\n    }\n  };\n\n  var _getColumns = function _getColumns() {\n    return _smartInboxModel.columns;\n  };\n\n  var _addAccess = function _addAccess() {\n    _smartInboxModel.access.push({\n      \"type\": \"\", //usergroup|role|stakeholder\n      \"value\": \"\", //guid       \n      \"displayName\": \"\" });\n\n  };\n\n  var _removeAccess = function _removeAccess(index) {\n    _smartInboxModel.access.splice(index, 1);\n  };\n\n  var _updateAccess = function _updateAccess(index, access) {\n    _smartInboxModel.access[index] = access;\n  };\n\n  var _getAccess = function _getAccess() {\n    return _smartInboxModel.access;\n  };\n\n  var _resetAccess = function _resetAccess() {\n    _smartInboxModel.access = [];\n  };\n\n  return {\n    getModel: _getModel,\n    setModel: _setModel,\n    get: _getProperty,\n    set: _setProperty,\n    addColumn: _addColumn,\n    removeColumn: _removeColumn,\n    updateColumn: _updateColumn,\n    moveColumn: _moveColumn,\n    getColumns: _getColumns,\n    addAccess: _addAccess,\n    removeAccess: _removeAccess,\n    updateAccess: _updateAccess,\n    getAccess: _getAccess,\n    resetAccess: _resetAccess };\n\n\n};\n\n\n// Auto extend\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.smartinbox\", {}, {\n\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n    self._super(workportalFacade, dataService, params);\n    self.context = params.context || \"workportal\";\n    self.dataModel = new smartInboxModel();\n    self.processesAvailable = null;\n    self.currentStep = 1;\n    self.numberOfSteps = params.numberOfSteps || 3;\n    self.customizedColumnsAvailable = null;\n    self.notifier = bizagi.injector.get('notifier');\n    self.loadDataDef = new $.Deferred();\n    self.sortOptions = [\n    { id: \"ascending\", text: bizagi.localization.getResource(\"workportal-widget-smartinbox-ascending\", \"Ascending\") },\n    { id: \"descending\", text: bizagi.localization.getResource(\"workportal-widget-smartinbox-descending\", \"Descending\") }];\n\n    self.pageSizeOptions = [\n    { id: \"10\", text: \"10\" },\n    { id: \"20\", text: \"20\" },\n    { id: \"30\", text: \"30\" },\n    { id: \"40\", text: \"40\" },\n    { id: \"50\", text: \"50\" },\n    { id: \"100\", text: \"100\" }];\n\n    self.maxColumns = 20;\n    // Define editor modes\n    if (params.selectedInboxData && params.selectedInboxData.smartInboxId && self.context == \"workportal\") {\n      if (!bizagi.util.isEmpty(params.selectedInboxData.owner)) {\n        self.cloning = params.cloning = true;\n      } else {\n        self.editing = params.editing = true;\n      }\n    }\n\n    self.filterWidget = new bizagi.workportal.widgets.smartinbox.filter(workportalFacade, dataService, params);\n\n    //Load templates\n    self.loadTemplates({\n      \"smartinbox-main\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.smartinbox\").concat(\"#ui-bizagi-workportal-widget-smartinbox-wizard\"),\n      \"smartinbox-columns\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.smartinbox\").concat(\"#ui-bizagi-workportal-widget-smartinbox-columns\"),\n      \"smartinbox-share\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.smartinbox\").concat(\"#ui-bizagi-workportal-widget-smartinbox-share\"),\n      \"smartinbox-shared-inbox-not-found\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.smartinbox\").concat(\"#ui-bizagi-workportal-widget-smartinbox-sharedinbox-not-found\"),\n\n      useNewEngine: false });\n\n\n    // Load smart inbox\n    if (params.selectedInboxData && params.selectedInboxData.smartInboxId) {\n      $.when(self.dataService.getSpecificSmartInbox({\n        settingName: params.selectedInboxData.settingName,\n        owner: params.selectedInboxData.owner,\n        smartInboxId: params.selectedInboxData.smartInboxId })).\n      done(function (data) {\n\n        if (!bizagi.util.isEmpty(params.selectedInboxData.owner)) data.id = Math.guid();\n        if (!bizagi.util.isEmpty(data.filter)) self.filterWidget.setModel(data.filter);\n        if (bizagi.util.isEmpty(data) || data.ownerType !== \"user\" && data.ownerType !== \"default\") data.ownerType = \"user\";\n\n        self.dataModel.setModel(data);\n        self.loadDataDef.resolve();\n      }).fail(function (err) {\n        if (err.status) {\n          self.sharedInboxNotFound = true;\n          self.loadDataDef.resolve();\n        }\n      });\n    } else {\n      self.loadDataDef.resolve();\n    }\n\n    self.renderContent();\n  },\n\n  /*\r\n     *   Returns the widget name\r\n     */\n  getWidgetName: function getWidgetName() {\n    return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_SMARTINBOX;\n  },\n\n  /*\r\n     *   Renders the content for the current controller\r\n     *   Returns a deferred because it has to load the current user\r\n     */\n  renderContent: function renderContent() {\n    var self = this;\n    // var template = self.getTemplate(\"smartinbox\");\n    var content = self.content = $(\"<div>\");\n\n    return content;\n  },\n\n  /**\r\n      *   To be overriden in each device to apply layouts\r\n      */\n  postRender: function postRender() {\n    var self = this;\n    var content = self.getContent();\n    var postRenderDef = new $.Deferred();\n    var callback;\n\n    $.when(self.loadDataDef).done(function () {\n      if (self.sharedInboxNotFound) {\n        $.tmpl(self.getTemplate(\"smartinbox-shared-inbox-not-found\")).appendTo(content);\n        postRenderDef.resolve();\n        $(\"#bz-btn-smartinbox-close\", content).bind(\"click\", $.proxy(self.closeWizard, self));\n        return;\n      }\n\n      if (self.params.shareMode !== undefined) {\n        self.renderShareMode();\n        postRenderDef.resolve();\n      } else\n      {\n        callback = self.renderWizardMode();\n      }\n\n      $.when(callback).done(function () {\n        postRenderDef.resolve();\n      });\n    });\n    return postRenderDef.promise();\n  },\n\n  onResize: function onResize() {\n    var self = this;\n    self.adjustStep2Height();\n    self.adjustStep3Height();\n  },\n\n  renderWizardMode: function renderWizardMode() {\n    var self = this;\n    var content = self.getContent();\n    var def = new $.Deferred();\n\n    self.mainTemplate = self.getTemplate(\"smartinbox-main\");\n    self.columnsTemplate = self.getTemplate(\"smartinbox-columns\");\n\n    $.when(self.loadDataDef).then(function () {\n\n      // Render wizard\n      $.tmpl(self.mainTemplate, {\n        dataModel: self.dataModel,\n        action: typeof self.params.selectedInboxData != \"undefined\" ? self.params.selectedInboxData : \"new\",\n        editing: self.editing,\n        adminMode: self.adminMode,\n        numberOfSteps: self.numberOfSteps }).\n      appendTo(content);\n\n      // Set rtl\n      if (bizagi.localization.isRTL)\n      content.addClass(\"bz-smartinbox-rtl\");\n\n      // Load available processes\n      $.when(self.dataService.getAllProcessesSmartInbox()).\n      then(function (data) {\n        self.processesAvailable = data;\n        if (self.processesAvailable == null || self.processesAvailable.length == 0) {\n          $(\"#bz-smartinbox-label-warning-processes-notfound\").css(\"display\", \"block\");\n          if (self.editing) {\n            $(\"#bz-btn-smartinbox-create\").hide();\n            $(\"#bz-btn-smartinbox-cancel\").removeClass(\"bz-btn--secondary\");\n            $(\"#bz-smartinbox-label-warning-processes\").css(\"display\", \"none\");\n          } else {\n            $(\"#bz-btn-smartinbox-next\").hide();\n            $(\"#bz-btn-smartinbox-cancel\").show();\n          }\n        }\n        self.loadProcesses(self.processesAvailable);\n      });\n\n      self.checkCurrentStep();\n      self.validateMode();\n\n      // Render filters\n      $.when(self.filterWidget.render()).\n      then(function (filterContent) {\n        $(\".bz-container-filters\", self.content).append(filterContent);\n        def.resolve();\n      });\n\n      // Configure buttons\n      $(\"#bz-btn-smartinbox-back\", self.content).bind(\"click\", $.proxy(self.movePrevious, self));\n      $(\"#bz-btn-smartinbox-next\", self.content).bind(\"click\", $.proxy(self.moveNext, self));\n      $(\"#bz-btn-smartinbox-cancel\", self.content).bind(\"click\", $.proxy(self.closeWizard, self));\n      $(\"#bz-btn-smartinbox-create\", self.content).bind(\"click\", $.proxy(self.saveSmartInbox, self));\n      $(\"#bz-smartinbox-label-warning-filters\", self.content).bind(\"click\", function () {$(this).hide();});\n      $(\"#bz-smartinbox-label-warning-processes\", self.content).bind(\"click\", function () {$(this).hide();});\n      $(\"#bz-smartinbox-label-warning-order\", self.content).bind(\"click\", function () {$(this).hide();});\n      // Add column handler\n      self.content.on(\"click\", \"#bz-smartinbox-step-2-add-column\", function (e) {\n        e.stopPropagation();\n        var $form = $(\"#bz-smartinbox-step2 > form\", content);\n        //Create a new combo element\n        if ($(\"#bz-smartinbox-step2\", content).find(\".bz-columns-options\").length < self.maxColumns) {\n          self.createColumn($form);\n        } else\n        {\n          self.notifier.showErrorMessage(bizagi.localization.getResource(\"workportal-widget-smartinbox-error-columns-limit\", \"You have reached the maximum number of columns\"));\n        }\n      });\n\n      if (self.editing) {\n        $(\"#bz-smartinbox-label-warning-processes\").css(\"display\", \"block\");\n      }\n\n      self.configureHandlers();\n    });\n\n    return def.promise();\n  },\n\n  movePrevious: function movePrevious() {\n    var self = this;\n    if (self.validateWizardAction(self.currentStep, self.currentStep - 1))\n    self.moveStepWizard(self.currentStep - 1);\n    if (self.currentStep == 1)\n    $(\"#bz-smartinbox-label-warning-processes\").css(\"display\", \"block\");\n  },\n\n  moveNext: function moveNext() {\n    var self = this;\n    if (self.validateWizardAction(self.currentStep, self.currentStep + 1))\n    self.moveStepWizard(self.currentStep + 1);\n  },\n\n  closeWizard: function closeWizard() {\n    var self = this;\n    self.params.dialogBox.dialog(\"close\");\n  },\n\n  saveSmartInbox: function saveSmartInbox() {\n    var self = this;\n\n    // Wait to onchage events set a parsed data\n    window.setTimeout(function () {\n      self.dataModel.set(\"filter\", self.filterWidget.getPersistenceModel());\n      var model = self.dataModel.getModel();\n\n      if (self.editing) {\n        if (!self.validateWizardAction(1)) {self.moveStepWizard(1);return;};\n        if (!self.validateWizardAction(2)) {self.moveStepWizard(2);return;};\n        if (!self.validateWizardAction(3)) {self.moveStepWizard(3);return;};\n        if (self.adminMode) {\n          if (!self.validateWizardAction(4)) {self.moveStepWizard(4);return;};\n        }\n      } else {\n        if (!self.validateWizardAction(self.currentStep)) return;\n      }\n      var service;\n      if (self.params.selectedInboxData && !self.cloning) {\n        service = self.dataService.updateSmartInbox(self.params.selectedInboxData, model);\n      } else if (model.ownerType == \"user\") {\n        service = self.dataService.createSmartInbox(model);\n      } else {\n        service = self.dataService.createAdminSmartInbox(model);\n      }\n\n      service.done(function (response) {\n        if (response && response.errorCode) {\n          if (response.errorCode == \"exceededLimit\")\n          self.notifier.showErrorMessage(bizagi.localization.getResource(\"workportal-widget-smartinbox-error-exceeded-limit\", \"This Smart folder cannot be created. You have exceeded the maximum number of Smart folders allowed.\"));else\n          if (response.errorCode == \"existingName\")\n          self.notifier.showErrorMessage(bizagi.localization.getResource(\"workportal-widget-smartinbox-error-existing-name\", \"A smart inbox already exists with the name\") + \" '\" + model.name + \"'\");\n        } else\n        {\n          self.publish(\"changeWidget\", {\n            widgetName: bizagi.inboxWidget || bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID,\n            selectedSmartInboxId: model.id });\n\n          try {\n            self.closeWizard();\n          } catch (e) {\n            $(\".ui-dialog-content\").dialog(\"close\");\n          }\n        }\n      });\n    }, 300);\n  },\n\n  moveStepWizard: function moveStepWizard(stepNumber) {\n    var self = this;\n    self.currentStep = stepNumber;\n    self.checkCurrentStep();\n  },\n\n  validateMode: function validateMode() {\n    var self = this;\n    if (self.params.selectedInboxData !== undefined && self.params.selectedInboxData.actionName !== undefined) {\n      if (self.params.selectedInboxData.actionName == \"create\" || self.params.selectedInboxData.actionName == \"edit\") {\n        $(\"#bz-smartinbox-name\", self.content).parent().removeClass('control-required');\n        if (self.params.selectedInboxData.actionName == \"create\")\n        $(\"#bz-smartinbox-name\", self.content).val($(\"#bz-smartinbox-name\", self.content).val());\n      }\n    }\n  },\n\n  checkCurrentStep: function checkCurrentStep() {\n    var self = this;\n\n    $('#bz-smartinbox-current-step-label', self.content).text(self.currentStep);\n    if (self.currentStep == 1) self.checkStepOne();else\n    if (self.currentStep == 2) self.checkStepTwo();else\n    if (self.currentStep == 3) self.checkStepThree();\n  },\n\n  checkStepOne: function checkStepOne() {\n    var self = this;\n\n    if (!self.editing) {\n      $(\"#bz-btn-smartinbox-back\", self.content).css('display', 'none');\n      $(\"#bz-btn-smartinbox-next\", self.content).css('display', '');\n      $(\"#bz-btn-smartinbox-create\", self.content).css('display', 'none');\n      $(\"#bz-smartinbox-navigate-label1\", self.content).removeClass('bz-inactive-done');\n      $(\"#bz-smartinbox-navigate-label1 > span\", self.content).html('1');\n    }\n    $(\"#bz-smartinbox-step1\", self.content).css('display', '');\n    $(\"#bz-smartinbox-step2\", self.content).css('display', 'none');\n    $(\"#bz-smartinbox-step3\", self.content).css('display', 'none');\n    $(\"#bz-smartinbox-navigate-label1\", self.content).addClass('bz-active');\n    $(\"#bz-smartinbox-navigate-label2\", self.content).addClass('bz-inactive');\n    $(\"#bz-smartinbox-navigate-label2\", self.content).removeClass('bz-active');\n    $(\"#bz-smartinbox-navigate-label3\", self.content).addClass('bz-inactive');\n    $(\"#bz-smartinbox-navigate-label3\", self.content).removeClass('bz-active');\n\n    self.updateFilterModel();\n  },\n\n  checkStepTwo: function checkStepTwo() {\n    var self = this;\n\n    if (!self.editing) {\n      $(\"#bz-btn-smartinbox-back\", self.content).css('display', '');\n      $(\"#bz-btn-smartinbox-next\", self.content).css('display', '');\n      $(\"#bz-btn-smartinbox-create\", self.content).css('display', 'none');\n      $(\"#bz-smartinbox-navigate-label1 > span\", self.content).html('<svg style=\"width:16px;height:16px\" xmlns=\"http://www.w3.org/2000/svg\"><use xmlns:xlink=\"http://www.w3.org/1999/xlink\" xlink:href=\"#check-mark\" /></svg>');\n      $(\"#bz-smartinbox-navigate-label2 > span\", self.content).html('2');\n      $(\"#bz-smartinbox-navigate-label1\", self.content).addClass('bz-inactive-done');\n      $(\"#bz-smartinbox-navigate-label2\", self.content).removeClass('bz-inactive-done');\n    }\n\n    $(\"#bz-smartinbox-step1\", self.content).css('display', 'none');\n    $(\"#bz-smartinbox-step2\", self.content).css('display', '');\n    $(\"#bz-smartinbox-step3\", self.content).css('display', 'none');\n    $(\"#bz-smartinbox-navigate-label1\", self.content).removeClass('bz-active');\n    $(\"#bz-smartinbox-navigate-label2\", self.content).addClass('bz-active');\n    $(\"#bz-smartinbox-navigate-label2\", self.content).removeClass('bz-inactive');\n    $(\"#bz-smartinbox-navigate-label3\", self.content).addClass('bz-inactive');\n    $(\"#bz-smartinbox-navigate-label3\", self.content).removeClass('bz-active');\n    self.adjustStep2Height();\n\n    self.loadCustomizedColumns();\n    self.updateFilterModel();\n  },\n\n  checkStepThree: function checkStepThree() {\n    var self = this;\n\n    if (!self.editing) {\n      $(\"#bz-btn-smartinbox-back\", self.content).css('display', '');\n      $(\"#bz-btn-smartinbox-next\", self.content).css('display', 'none');\n      $(\"#bz-btn-smartinbox-create\", self.content).css('display', '');\n      $(\"#bz-smartinbox-navigate-label2 > span\", self.content).html('<svg style=\"width:16px;height:16px\" xmlns=\"http://www.w3.org/2000/svg\"><use xmlns:xlink=\"http://www.w3.org/1999/xlink\" xlink:href=\"#check-mark\" /></svg>');\n      $(\"#bz-smartinbox-navigate-label2\", self.content).addClass('bz-inactive-done');\n    }\n\n    $(\"#bz-smartinbox-step1\", self.content).css('display', 'none');\n    $(\"#bz-smartinbox-step2\", self.content).css('display', 'none');\n    $(\"#bz-smartinbox-step3\", self.content).css('display', '');\n    $(\"#bz-smartinbox-navigate-label1\", self.content).removeClass('bz-active');\n    $(\"#bz-smartinbox-navigate-label2\", self.content).removeClass('bz-active');\n    $(\"#bz-smartinbox-navigate-label3\", self.content).addClass('bz-active');\n    $(\"#bz-smartinbox-navigate-label3\", self.content).removeClass('bz-inactive');\n    self.adjustStep3Height();\n\n    self.getAllCustomizedColumnsSmartInbox().\n    then(function () {\n      var filterModel = self.dataModel.get(\"filter\");\n      self.updateFilterModel();\n      self.filterWidget.setWFClassList(self.dataModel.get(\"processes\"));\n      if (!bizagi.util.isEmpty(self.dataModel.get(\"processes\")) && self.dataModel.get(\"processes\").length > 1) {\n        $(\"#bz-smartinbox-label-warning-filters\", self.content).css(\"display\", \"block\");\n        self.filterWidget.setCustomizedColumns(self.buildColumnsForFilterModel(self.customizedColumnsAvailable));\n      } else {\n        self.filterWidget.setCustomizedColumns(self.customizedColumnsAvailable);\n      }\n\n      self.filterWidget.setModel(filterModel);\n      self.loadSortingOptions();\n    });\n  },\n\n  adjustStep2Height: function adjustStep2Height() {\n    var self = this;\n    var dialogBox = self.params.dialogBox || self.params.masterEditor.params.dialogBox;\n    var warningOrder = $(\"#bz-smartinbox-label-warning-order\", self.content).outerHeight(true) || 0;\n    $(\"#bz-smartinbox-step2 form\", self.content).css('max-height', dialogBox.height() - 240 - warningOrder + 'px');\n  },\n\n  adjustStep3Height: function adjustStep3Height() {\n    var self = this;\n    var dialogBox = self.params.dialogBox || self.params.masterEditor.params.dialogBox;\n    $(\".bz-smartfilters-content\", self.content).css('max-height', dialogBox.height() - 350 + 'px');\n  },\n\n  buildColumnsForFilterModel: function buildColumnsForFilterModel(columns) {\n    var self = this;\n    return $.grep(columns, function (column) {return !column.from || column.from.length == self.dataModel.get(\"processes\").length;});\n  },\n\n  updateFilterModel: function updateFilterModel() {\n    var self = this;\n\n    var filterModel = self.filterWidget.getModel();\n    if (filterModel != null) {\n      self.dataModel.set(\"filter\", filterModel);\n    }\n  },\n\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    var content = self.getContent();\n\n    $(\"#bz-smartinbox-name\", content).on(\"change\", function (e) {\n      self.dataModel.set(\"name\", e.target.value);\n\n      if (e.target.value.trim() == \"\")\n      $(this).parent().addClass('control-required');else\n\n      $(this).parent().removeClass('control-required');\n    });\n\n    // For editing mode, configure tabs\n    if (self.editing) {\n      $(\"#bz-smartinbox-navigate-label1\", self.content).bind(\"click\", function () {self.changeStepWizard(1);});\n      $(\"#bz-smartinbox-navigate-label2\", self.content).bind(\"click\", function () {self.changeStepWizard(2);});\n      $(\"#bz-smartinbox-navigate-label3\", self.content).bind(\"click\", function () {self.changeStepWizard(3);});\n    }\n  },\n\n  changeStepWizard: function changeStepWizard(newStep) {\n    var self = this;\n\n    if (self.validateWizardAction(self.currentStep, newStep)) {\n      self.moveStepWizard(newStep);\n    }\n  },\n\n  loadProcesses: function loadProcesses(processesAvailable) {\n    var self = this;\n    var $search = $(\"#bz-processes-search\", self.content);\n\n    $search.bizagi_multiSelect({\n      list: processesAvailable,\n      itemValue: function itemValue(obj) {\n        return obj.guid;\n      },\n      itemText: function itemText(obj) {\n        return obj.displayName;\n      },\n      onChange: function onChange(data) {\n        self.customizedColumnsAvailable = null;\n        var processes = [];\n        for (var i = 0; i < data.length; i++) {\n          processes.push(data[i].value);\n        }\n\n        var columns = self.dataModel.get(\"columns\");\n        var defaultColumns = $.grep(columns, function (item) {return item != null && item.isDefault;});\n\n        self.dataModel.set(\"processes\", processes);\n        self.dataModel.set(\"columns\", defaultColumns);\n        self.dataModel.set(\"filter\", {});\n        self.filterWidget.setModel({});\n        self.dataModel.set(\"sort\", []);\n      },\n      label: \"\",\n      iconClass: \"bz-icon bz-icon-search-outline bz-icon-16\",\n      parentPositionElement: \"#bz-processes-search > ul\",\n      parentElementToFitWidth: \"#bz-processes-search\",\n      parentElementToBorder: \"#bz-processes-search > ul\",\n      classOpenedList: \"bz-processes-search-border-open-list\",\n      classOpenedParent: \"bz-opened\",\n      classItem: \"theme-navigation-border\",\n      SEARCH_MIN_LENGTH: 0,\n      openOnFocus: true,\n      classMenuList: \"ui-smart-inbox\",\n      customRenderItem: function customRenderItem(ul, item) {\n        return $(\"<li>\").\n        append(\n        $(\"<a>\").\n        append(\"<span class='bz-processes-name'>\" + item.value.displayName + \"</span>\").\n        append(\"<span class='bz-processes-category'>\" + item.value.application + \" - \" + item.value.category + \"</span>\")).\n\n        appendTo(ul);\n      } });\n\n\n    $search.bizagi_multiSelect(\"setDataItems\", self.convertProcessesFromModelToMultiSelect(self.processesAvailable, self.dataModel.get(\"processes\")));\n  },\n\n  convertProcessesFromModelToMultiSelect: function convertProcessesFromModelToMultiSelect(allProcess, selectedProcess) {\n    var data = [];\n    allProcess = allProcess || [];\n    selectedProcess = selectedProcess || [];\n\n    for (var i = 0, l = allProcess.length; i < l; i++) {\n      if (selectedProcess.indexOf(allProcess[i].guid) > -1) {\n        data.push({\n          displayName: allProcess[i].displayName,\n          guid: allProcess[i].guid });\n\n      }\n    }\n    return data;\n  },\n\n  /**\r\n      * STEP 2: SELECT COLUMNS\r\n      */\n  getSelectedProcessesId: function getSelectedProcessesId() {\n    var self = this;\n    var $search = $(\"#bz-processes-search\", self.content);\n    var processesId = [];\n    $.each($search.bizagi_multiSelect(\"getDataItems\"), function (_, item) {\n      processesId.push(item.value);\n    });\n\n    return processesId;\n  },\n\n  loadCustomizedColumns: function loadCustomizedColumns() {\n    var self = this;\n    var content = self.content;\n    var processesId = self.getSelectedProcessesId();\n    var $form = $(\"#bz-smartinbox-step2 > form\", content);\n\n    $form.sortable({\n      items: \"> div\",\n      handle: \".bz-drag\",\n      start: function start(e, ui) {\n        $(this).attr('data-previndex', ui.item.index());\n      },\n      update: function update(e, ui) {\n        var toIndex = ui.item.index();\n        var fromIndex = $(this).attr('data-previndex');\n        $(this).removeAttr('data-previndex');\n        self.dataModel.moveColumn(fromIndex, toIndex);\n      } });\n\n\n    // Invoke service\n    self.getAllCustomizedColumnsSmartInbox().\n    then(function () {\n      var columns = self.dataModel.get(\"columns\");\n      var updatedColumns = [];\n      if ($form.data(\"rendered\") == \"true\") $form.empty();\n\n      if (columns.length == 0 || !$.any(columns, function (item) {return item != null && item.alwaysVisible;})) {\n        var defaultColumns = $.grep(self.customizedColumnsAvailable, function (item) {return item.isDefault && !item.isOptional;});\n        columns = defaultColumns.concat(columns);\n      }\n\n      // Add previously configured columns\n      for (var i = 0, l = columns.length; i < l; i++) {\n        var column = columns[i];\n        if (column) {\n          if (self.isColumnValid(column, processesId, updatedColumns)) {\n            self.createColumn($form, column);\n          }\n        } else {\n          self.createColumn($form);\n          updatedColumns.push(null);\n        }\n      }\n      self.dataModel.set(\"columns\", updatedColumns);\n\n      if (updatedColumns.length == 0) {\n        if (!self.cloning) {\n          // Add first column\n          setTimeout(function () {self.createColumn($form);}, 100);\n        }\n      }\n\n      $form.data(\"rendered\", \"true\");\n      $form.scroll(function (e) {\n        $(\".ui-select-dropdown.open\", $form).remove();\n      });\n    });\n  },\n\n  getAllCustomizedColumnsSmartInbox: function getAllCustomizedColumnsSmartInbox(processesId) {\n    var self = this;\n    if (!bizagi.util.isEmpty(self.customizedColumnsAvailable)) {\n      return $.Deferred().resolve(self.customizedColumnsAvailable).promise();\n    }\n\n    var processesId = self.getSelectedProcessesId();\n    return $.when(self.dataService.getAllCustomizedColumnsSmartInbox(processesId)).\n    then(function (data) {\n      self.customizedColumnsAvailable = data;\n      return data;\n    });\n  },\n\n\n  isColumnValid: function isColumnValid(column, processesId, updatedColumns) {\n    var self = this;\n    var result = column.isDefault || $.any(column.from, function (item) {return processesId.indexOf(item.process) != -1;});\n    if (result) {\n      var index = self.customizedColumnsAvailable.findIndex(function (obj) {return obj.name == column.name;});\n      if (index > -1) {\n        var customizedColumn = self.customizedColumnsAvailable[index];\n        column.displayName = customizedColumn.displayName;\n        updatedColumns.push(customizedColumn);\n      } else {\n        result = false;\n      }\n    }\n    return result;\n  },\n\n  /**\r\n     * Create a new column \r\n     */\n  createColumn: function createColumn($form, value) {\n    var self = this;\n    value = value || \"\";\n    var guid = Math.guid();\n    var $content = $.tmpl(self.columnsTemplate, {\n      guid: guid, alwaysVisible: value.alwaysVisible, displayName: value.displayName });\n\n\n    if (!value.alwaysVisible) {\n      var values = $.grep(self.customizedColumnsAvailable, function (item) {return !item.alwaysVisible;});\n\n      $(\"#\" + guid, $content).uicombo({\n        data: { combo: values },\n        initValue: value,\n        itemValue: function itemValue(obj) {\n          return obj.name;\n        },\n        itemText: function itemText(obj) {\n          return obj.displayName;\n        },\n        onChange: function onChange(obj) {\n          var value = obj.ui.data('value');\n          var column = $.first(self.customizedColumnsAvailable, function (item) {return item.name == value;});\n          if (column != null) {\n            var index = $(\".bz-columns-options\").index($(obj.element).closest(\".bz-columns-options\"));\n            self.dataModel.updateColumn(index, column);\n          }\n        } });\n\n\n      $(\".bz-delete-column\", $content).bind(\"click\", function (e) {\n        var index = $(\".bz-delete-column\").index(this);\n        self.dataModel.removeColumn(index);\n        $(e.srcElement).closest(\".bz-columns-options\").remove();\n      });\n    } else\n    {\n      $(\".bz-delete-column\", $content).hide();\n    }\n\n    $content.appendTo($form);\n    $content[0].scrollIntoView();\n\n    //Add empty column to the model\n    if (value === \"\") {\n      var index = $(\".bz-columns-options\").index($(\"#\" + guid, $form).closest(\".bz-columns-options\"));\n      self.dataModel.updateColumn(index, null);\n    }\n  },\n\n  /**\r\n      * STEP 3: DEFINE FILTERS / SORT\r\n      */\n\n  loadSortingOptions: function loadSortingOptions() {\n    var self = this;\n    $(\".column-combo-sort\", self.content).empty();\n    $(\".column-combo-order\", self.content).empty();\n    var selectedValue = null;\n    var sort = self.dataModel.get(\"sort\");\n\n    if (sort != null && sort.length > 0 && sort[0].column !== undefined) selectedValue = sort[0];\n\n    self.createComboSortCustomizedColumns($(\".column-combo-sort\", self.content), selectedValue);\n\n    if (selectedValue == null || !self.isSortColumnValid(selectedValue.column)) {\n      self.dataModel.set(\"sort\", []);\n      self.createComboEmptySortOptions($(\".column-combo-order\", self.content));\n    } else {\n      self.createComboSortOptions($(\".column-combo-order\", self.content), selectedValue);\n    }\n  },\n\n  createComboSortCustomizedColumns: function createComboSortCustomizedColumns(customizedColumnItem, sort) {\n    var self = this;\n\n    var columns = bizagi.clone(self.dataModel.get(\"columns\"));\n    columns.unshift({ name: \"\", displayName: bizagi.localization.getResource(\"workportal-widget-smartinbox-please-select-a-value\", \"Please select a value\") });\n\n    var initialValue = columns[0];\n    if (sort != null) {\n      var search = $.grep(columns, function (item) {return item.name == sort.column;});\n      if (search.length > 0) initialValue = search[0];\n    }\n\n    $(customizedColumnItem).uicombo({\n      data: { combo: columns },\n      initValue: initialValue,\n      itemValue: function itemValue(obj) {\n        return obj.name;\n      },\n      itemText: function itemText(obj) {\n        return obj.displayName;\n      },\n      onChange: function onChange(obj) {\n        if (obj.value == \"\") {\n          $(\".column-combo-order\", self.content).empty();\n          self.createComboEmptySortOptions($(\".column-combo-order\", self.content));\n          self.dataModel.set(\"sort\", []);\n        } else\n        {\n          $(\".column-combo-order\", self.content).empty();\n          self.createComboSortOptions($(\".column-combo-order\", self.content), sort);\n          self.dataModel.set(\"sort\", [{\n            \"priority\": 1,\n            \"column\": obj.value,\n            \"type\": sort ? sort.type : \"ascending\" }]);\n\n        }\n      } });\n\n  },\n\n  createComboSortOptions: function createComboSortOptions(element, sort) {\n    var self = this;\n    var initialValue = self.sortOptions[0];\n    if (sort != null) {\n      var search = $.grep(self.sortOptions, function (item) {return item.id == sort.type;});\n      if (search.length > 0) initialValue = search[0];\n    }\n\n    $(element).uicombo({\n      data: { combo: self.sortOptions },\n      initValue: initialValue,\n      itemValue: function itemValue(obj) {\n        return obj.id;\n      },\n      itemText: function itemText(obj) {\n        return obj.text;\n      },\n      onChange: function onChange(obj) {\n        self.dataModel.set(\"sort\", [{\n          \"priority\": self.dataModel.get(\"sort\")[0].priority,\n          \"column\": self.dataModel.get(\"sort\")[0].column,\n          \"type\": obj.value }]);\n\n      } });\n\n  },\n\n  createComboEmptySortOptions: function createComboEmptySortOptions(object) {\n    var sortOptions = [\n    { id: \"\", text: bizagi.localization.getResource(\"workportal-widget-smartinbox-please-select-a-value\", \"Please select a value\") }];\n\n\n    $(object).uicombo({\n      data: { combo: sortOptions },\n      initValue: sortOptions[0],\n      itemValue: function itemValue(obj) {\n        return obj.id;\n      },\n      itemText: function itemText(obj) {\n        return obj.text;\n      } });\n\n  },\n\n\n  validateWizardAction: function validateWizardAction(currentStep, nextStep) {\n    var self = this;\n    var duplicatedColumns = [];\n\n    if (currentStep > nextStep) {\n      return true;\n    } else {\n      var arrayMessagesErrors = [];\n      if (currentStep == 1) {\n        if (self.dataModel.get(\"name\").trim() === \"\") {\n          $(\"#bz-smartinbox-name\", self.content).val(\"\");\n          arrayMessagesErrors.push(bizagi.localization.getResource(\"workportal-widget-smartinbox-name-cannot-be-empty\", \"Name field cannot be empty\"));\n        }\n        if (self.dataModel.get(\"processes\").length == 0) {\n          arrayMessagesErrors.push(bizagi.localization.getResource(\"workportal-widget-smartinbox-at-least-one-process\", \"At least select one process\"));\n        }\n      } else if (currentStep == 2) {\n        // Check if exists empty columns\n        var emptyColumns = self.dataModel.get(\"columns\").filter(function (x) {return x === null;});\n        if (emptyColumns.length > 0) {\n          arrayMessagesErrors.push(bizagi.localization.getResource(\"workportal-widget-smartinbox-empty-columns\", \"Can not contain empty columns\"));\n        } else\n        if (self.hasDuplicatedColumns(duplicatedColumns)) {\n          arrayMessagesErrors.push(bizagi.localization.getResource(\"workportal-widget-smartinbox-duplicated-columns\", \"Can not contain duplicate columns\") + \": \" + duplicatedColumns.join(\", \"));\n        }\n      } else if (currentStep == 3) {\n        self.filterWidget.validateFilterForSave(arrayMessagesErrors);\n      }\n      // Check if exists any error message\n      if (arrayMessagesErrors.length > 0) {\n        $.each(arrayMessagesErrors, function (ind, elem) {\n          self.notifier.showErrorMessage(elem);\n        });\n        return false;\n      } else\n      {\n        return true;\n      }\n    }\n  },\n\n  validateEmail: function validateEmail(email) {\n    var regexEmail = /^(([^<>()[\\]\\\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n    return regexEmail.test(email);\n  },\n\n  isSortColumnValid: function isSortColumnValid(columnName) {\n    var self = this;\n    var columns = self.dataModel.get(\"columns\");\n    return $.any(columns, function (item) {return item.name == columnName;});\n  },\n\n  hasDuplicatedColumns: function hasDuplicatedColumns(duplicatedColumns) {\n    var self = this;\n    var columns = self.dataModel.get(\"columns\");\n    var result = $.any(bizagi.util.objectValues($.groupBy(columns, \"name\")), function (item) {\n      if (item.length > 1) {\n        if (duplicatedColumns.indexOf(item[0].displayName) == -1) {\n          duplicatedColumns.push(item[0].displayName);\n        }\n        return true;\n      } else {\n        return false;\n      }\n    });\n    return result;\n  },\n\n  /*  SHARE FOLDER WIZARD*/\n  renderShareMode: function renderShareMode() {\n    var self = this;\n    var content = self.getContent();\n\n    self.mainTemplate = self.getTemplate(\"smartinbox-share\");\n    $.tmpl(self.mainTemplate).appendTo(content);\n\n    // Set rtl\n    if (bizagi.localization.isRTL)\n    content.addClass(\"bz-smartinbox-rtl\");\n\n    var tagInputEmails = $(\"#bz-users-search > input\", self.content);\n    tagInputEmails.tagsinput(\"items\", { allowDuplicates: false, trimValue: true, confirmKeys: [13, 59, 44], delimiter: \";\" });\n    tagInputEmails.on('beforeItemAdd', $.proxy(self.validateEmailAddress, self));\n    $(\"#bz-users-search\", self.content).bind(\"click\", function () {$(this).parent().find('.bootstrap-tagsinput input').focus();});\n    $(\"#bz-btn-smartinbox-share\", self.content).bind(\"click\", function () {self.shareSmartInbox(tagInputEmails);});\n    $(\"#bz-btn-smartinbox-cancel-share\", self.content).bind(\"click\", function () {self.closeWizard();});\n  },\n\n  validateEmailAddress: function validateEmailAddress(event) {\n    var self = this;\n\n    if (!self.validateEmail(event.item)) {\n      self.notifier.showErrorMessage(bizagi.localization.getResource(\"workportal-widget-smartinbox-share-invalid-email-address\", \"Please insert a valid email address\"));\n      var _this = this;\n      setTimeout(function () {\n        $(_this).parent().find('.bootstrap-tagsinput input').val(event.item);\n        $(_this).parent().find('.bootstrap-tagsinput input').attr(\"size\", event.item.length);\n      }, 5);\n      event.cancel = true;\n    }\n  },\n\n  shareSmartInbox: function shareSmartInbox(tagInputEmails) {\n    var self = this;\n    if (tagInputEmails.tagsinput('items').length > 0) {\n      self.dataService.shareSmartInbox(self.params.selectedInboxData, tagInputEmails.tagsinput('items')).done(function (response) {\n        if (response === undefined) {\n          self.notifier.showSucessMessage(bizagi.localization.getResource(\"workportal-widget-smartinbox-share-success-message\", \"Smart Inbox was shared successfully\"));\n          self.params.dialogBox.dialog(\"close\");\n        } else\n        {\n          if (response.usersNotFound)\n          self.notifier.showWarningMessage(bizagi.localization.getResource(\"workportal-widget-smartinbox-share-usersnotfound\", \"The following email addresses don't exist:\") + \" \" + response.usersNotFound.join(\",\"));\n          if (response.disabledUsers)\n          self.notifier.showWarningMessage(bizagi.localization.getResource(\"workportal-widget-smartinbox-share-disabledusers\", \"The following email addresses belong to disabled users:\") + \" \" + response.disabledUsers.join(\",\"));\n          if (response.currentUser)\n          self.notifier.showWarningMessage(bizagi.localization.getResource(\"workportal-widget-smartinbox-share-currentUser\", \"Cannot share a smart inbox with itself\"));\n        }\n      });\n    } else\n    {\n      self.notifier.showErrorMessage(bizagi.localization.getResource(\"workportal-widget-smartinbox-share-message-insert-at-least-one\", \"Please insert at least one email address\"));\n    }\n  } });","var smartInboxFilterModel = function smartInboxFilterModel() {\n  /**\r\n                                                              * Smart Inbox Filter Data Model\r\n                                                              */\n  var _filters = {};\n\n  var _getModel = function _getModel() {\n    return bizagi.util.objectValues(_filters);\n  };\n\n  var _getInternalModel = function _getInternalModel() {\n    return _filters;\n  };\n\n  var _setModel = function _setModel(model) {\n    if (model === undefined || model == null) return;\n    _filters = {};\n    var date = Date.now();\n    $.each(model, function (i, item) {\n      _filters[date] = item;\n      date++;\n    });\n  };\n\n  var _addRow = function _addRow() {\n    var row = { column: undefined, operator: undefined, type: undefined };\n    var id = Date.now();\n    _filters[id] = row;\n    return id;\n  };\n\n  var _getRow = function _getRow(id) {\n    return _filters[id];\n  };\n\n  var _removeRow = function _removeRow(id) {\n    delete _filters[id];\n  };\n\n  var _setRowProperty = function _setRowProperty(id, property, value) {\n    _filters[id][property] = value;\n  };\n\n  var _deleteRowProperty = function _deleteRowProperty(id, property) {\n    delete _filters[id][property];\n  };\n\n  return {\n    getModel: _getModel,\n    getInternalModel: _getInternalModel,\n    setModel: _setModel,\n    addRow: _addRow,\n    getRow: _getRow,\n    removeRow: _removeRow,\n    setRowProperty: _setRowProperty,\n    deleteRowProperty: _deleteRowProperty };\n\n};\n\n// Auto extend\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.smartinbox.filter\", {}, {\n  MAX_DECIMALS: 2,\n\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n    self._super(workportalFacade, dataService, params);\n    self.model = new smartInboxFilterModel();\n    self.processesAvailable = null;\n    self.currentStep = 1;\n    self.customizedColumnsAvailable = null;\n    self.loadDataDef = new $.Deferred();\n    self.maxFilters = 15;\n    self.maxInValues = 20;\n    self.notifier = bizagi.injector.get('notifier');\n    self.entityValuesCache = {};\n    self.decimalSymbol = typeof BIZAGI_DEFAULT_CURRENCY_INFO !== \"undefined\" ? BIZAGI_DEFAULT_CURRENCY_INFO.decimalSeparator : \".\";\n\n    //Load templates\n    self.loadTemplates({\n      \"smartinbox-filter-main\": bizagi.getTemplate(\"bizagi.workportal.desktop.smartinbox.filter\").concat(\"#ui-bizagi-workportal-smartinbox-filter\"),\n      \"smartinbox-filter-field-boolean\": bizagi.getTemplate(\"bizagi.workportal.desktop.smartinbox.filter\").concat(\"#ui-bizagi-workportal-smartinbox-filter-value-field-boolean\"),\n      \"smartinbox-filter-field-text\": bizagi.getTemplate(\"bizagi.workportal.desktop.smartinbox.filter\").concat(\"#ui-bizagi-workportal-smartinbox-filter-value-field-text\"),\n      \"smartinbox-filter-field-number\": bizagi.getTemplate(\"bizagi.workportal.desktop.smartinbox.filter\").concat(\"#ui-bizagi-workportal-smartinbox-filter-value-field-number\"),\n      \"smartinbox-filter-field-datetime\": bizagi.getTemplate(\"bizagi.workportal.desktop.smartinbox.filter\").concat(\"#ui-bizagi-workportal-smartinbox-filter-value-field-datetime\"),\n      \"smartinbox-filter-field-on-operator\": bizagi.getTemplate(\"bizagi.workportal.desktop.smartinbox.filter\").concat(\"#ui-bizagi-workportal-smartinbox-filter-value-field-on-operator\"),\n      \"smartinbox-filter-field-in-operator-combo\": bizagi.getTemplate(\"bizagi.workportal.desktop.smartinbox.filter\").concat(\"#ui-bizagi-workportal-smartinbox-filter-value-field-in-operator-combo\"),\n      \"smartinbox-filter-field-in-operator-text\": bizagi.getTemplate(\"bizagi.workportal.desktop.smartinbox.filter\").concat(\"#ui-bizagi-workportal-smartinbox-filter-value-field-in-operator-text\"),\n\n      useNewEngine: false });\n\n  },\n\n  setCustomizedColumns: function setCustomizedColumns(columns) {\n    var self = this;\n    self.customizedColumnsAvailable = columns;\n  },\n\n  setWFClassList: function setWFClassList(wfClassList) {\n    var self = this;\n    self.userTasksCache = null;\n    self.wfClassList = wfClassList;\n  },\n\n  /**\r\n      * Renders the template defined in the widget\r\n      */\n  renderContent: function renderContent() {\n    var self = this;\n    var template = self.getTemplate(\"smartinbox-filter-main\");\n    self.content = $.tmpl(template, {});\n    return self.content;\n  },\n\n  /**\r\n      *   To be overriden in each device to apply layouts\r\n      */\n  postRender: function postRender() {\n    var self = this;\n\n    self.booleanFieldTemplate = self.getTemplate(\"smartinbox-filter-field-boolean\");\n    self.textFieldTemplate = self.getTemplate(\"smartinbox-filter-field-text\");\n    self.numberFieldTemplate = self.getTemplate(\"smartinbox-filter-field-number\");\n    self.dateTimeFieldTemplate = self.getTemplate(\"smartinbox-filter-field-datetime\");\n    self.onOperatorTemplate = self.getTemplate(\"smartinbox-filter-field-on-operator\");\n    self.inOperatorComboTemplate = self.getTemplate(\"smartinbox-filter-field-in-operator-combo\");\n    self.inOperatorTextTemplate = self.getTemplate(\"smartinbox-filter-field-in-operator-text\");\n\n    self.content.on(\"click\", \".bz-filter-add-container i\", $.proxy(self.addRow, self));\n    self.content.on(\"click\", \".bz-filter-add-container label\", $.proxy(self.addRow, self));\n    self.content.on(\"click\", \".bz-smartfilters-row-icons .bz-smartfilters-add\", $.proxy(self.addRow, self));\n    // Set rtl\n    if (bizagi.localization.isRTL)\n    self.content.addClass(\"bz-smartfilters-rtl\");\n\n    self.renderFilters();\n  },\n\n  addRow: function addRow() {\n    var self = this;\n\n    if ($(\".bz-smartfilters-content\", self.content).find(\".bz-smartfilters-row-real\").length < self.maxFilters) {\n      var container = $(\".bz-smartfilters-content\", self.content);\n      var row = self.createFilterRow();\n      container.append(row);\n      row[0].scrollIntoView();\n    } else\n    {\n      self.notifier.showErrorMessage(bizagi.localization.getResource(\"workportal-widget-smartinbox-filters-error-filters-limit\", \"You have reached the maximum number of filterssss\"));\n    }\n  },\n\n  renderFilters: function renderFilters() {\n    var self = this;\n    var internalModel = self.model.getInternalModel();\n    var container = $(\".bz-smartfilters-content\", self.content);\n\n    $.each(Object.keys(internalModel), function (_, id) {\n      var item = self.model.getRow(id);\n      if (self.isColumnValid(item)) {\n        var row = self.createFilterRow(item, id);\n        container.append(row);\n        row[0].scrollIntoView();\n      }\n    });\n  },\n\n  isColumnValid: function isColumnValid(item) {\n    var self = this;\n    if (item.column === undefined) return true;\n    return $.any(self.customizedColumnsAvailable, function (c) {return c.name == item.column;});\n  },\n\n  /* PUBLIC METHODS */\n\n  setModel: function setModel(model) {\n    var self = this;\n    self.model.setModel(model);\n\n    // Update view\n    $(\".bz-smartfilters-row-real\", self.content).remove();\n    if (!bizagi.util.isEmpty(self.customizedColumnsAvailable))\n    self.renderFilters();\n  },\n\n  getModel: function getModel() {\n    var self = this;\n    return self.model.getModel();\n  },\n\n  getPersistenceModel: function getPersistenceModel() {\n    var self = this;\n    var result = $.grep(self.model.getModel(), function (item) {return item.column !== undefined && item.operator !== undefined;});\n    if (result.length == 0) result = undefined;\n    return result;\n  },\n\n  validateFilterForSave: function validateFilterForSave(messages) {\n    var self = this;\n    var model = self.model.getModel();\n    var result = true;\n    var rowsRender = $(\".bz-smartfilters-row-real\", self.content);\n    $.each(model, function (i, item) {\n      /* validate column selection*/\n      if (item.column === undefined || bizagi.util.isEmpty(item.column)) {\n        result = false;\n        $(rowsRender[i]).find(\".bz-smartfilters-row-select-column\").find(\".biz-wp-combo-input\").addClass(\"bz-filter-not-valid\");\n      } else\n      {\n        $(rowsRender[i]).find(\".bz-smartfilters-row-select-column\").find(\".biz-wp-combo-input\").removeClass(\"bz-filter-not-valid\");\n      }\n      /* validate operator selection*/\n      if (item.operator === undefined || bizagi.util.isEmpty(item.operator)) {\n        result = false;\n        $(rowsRender[i]).find(\".bz-smartfilters-row-select-operator\").find(\".biz-wp-combo-input\").addClass(\"bz-filter-not-valid\");\n      } else\n      {\n        $(rowsRender[i]).find(\".bz-smartfilters-row-select-operator\").find(\".biz-wp-combo-input\").removeClass(\"bz-filter-not-valid\");\n        /* validate value*/\n        if (item.operator != 'is-empty' && item.operator != 'is-not-empty') {\n          if (item.operator == 'between') {\n            if (item.from === undefined || item.to === undefined) {\n              result = false;\n              $(rowsRender[i]).find(\".bz-smartfilters-row-select-value\").addClass(\"bz-filter-not-valid\");\n            } else\n            {\n              $(rowsRender[i]).find(\".bz-smartfilters-row-select-value\").removeClass(\"bz-filter-not-valid\");\n            }\n          } else\n          {\n            if (item.value === undefined) {\n              result = false;\n              $(rowsRender[i]).find(\".bz-smartfilters-row-select-value\").addClass(\"bz-filter-not-valid\");\n            } else\n            {\n              $(rowsRender[i]).find(\".bz-smartfilters-row-select-value\").removeClass(\"bz-filter-not-valid\");\n            }\n          }\n        } else\n        {\n          $(rowsRender[i]).find(\".bz-smartfilters-row-select-value\").removeClass(\"bz-filter-not-valid\");\n        }\n      }\n    });\n    if (!result) {\n      messages.push(bizagi.localization.getResource(\"workportal-widget-smartinbox-filter-error\", \"Please fill all controls in the filter section\"));\n    }\n\n    return result;\n  },\n\n  /* PRIVATE METHODS */\n  createFilterRow: function createFilterRow(item, id) {\n    var self = this;\n\n    //Update model\n    if (!item) {\n      var id = self.model.addRow();\n    }\n\n    $(\".bz-smartfilters-header\", self.content).css(\"display\", \"flex\");\n    $newRow = $(\".bz-smartfilters-row-model\", self.content).clone().removeClass('bz-smartfilters-row-model').removeClass('bz-smartfilters-hidden').addClass('bz-smartfilters-row-real');\n    $newRow.data(\"row-id\", id);\n\n    var params = {\n      id: id,\n      row: $newRow,\n      item: item };\n\n\n    self.createComboCustomizedColumns(params);\n    self.createComboOperatorFilters(params);\n\n    $newRow.find('.bz-smartfilters-add').bind(\"click\", function () {\n      self.createFilterRow(this.closest('.bz-smartfilters-row'));\n    });\n\n    $newRow.find('.bz-smartfilters-remove').bind(\"click\", function () {\n      self.removeFilterRow(this);\n    });\n\n    $(\".bz-container-filters\").scrollTop($(\".bz-container-filters\").prop(\"scrollHeight\"));\n    return $newRow;\n  },\n\n  removeFilterRow: function removeFilterRow(el) {\n    var self = this;\n    var $row = $(el).closest(\".bz-smartfilters-row-real\");\n    //Update model\n    self.model.removeRow($row.data(\"row-id\"));\n\n    $row.closest('.bz-smartfilters-row').remove();\n  },\n\n  removeValidationValue: function removeValidationValue(params) {\n    params.row.find('.bz-smartfilters-row-select-value').removeClass(\"bz-filter-not-valid\");\n  },\n\n  createComboCustomizedColumns: function createComboCustomizedColumns(params) {\n    var self = this;\n    var columnItem = params.row.find('.column-combo');\n    var columns = bizagi.clone(self.customizedColumnsAvailable);\n    if (bizagi.util.isEmpty(columns)) columns = [];\n    columns.sort(function (a, b) {\n      return a.displayName > b.displayName ? 1 : b.displayName > a.displayName ? -1 : 0;\n    });\n    columns.unshift({ displayName: bizagi.localization.getResource(\"workportal-widget-smartinbox-please-select-a-value\", \"Please select a value\"), name: \"\", type: \"\" });\n\n    // Set initial value\n    var initialValue = columns[0];\n    if (params.item) {\n      var elements = $.grep(columns, function (item) {return item.name == params.item.column;});\n      if (elements.length > 0) {\n        initialValue = elements[0];\n        params.item.entity = initialValue.entity;\n      }\n    }\n\n    columnItem.uicombo({\n      data: { combo: columns },\n      initValue: initialValue,\n      isEditable: true,\n      itemValue: function itemValue(obj) {\n        return obj.name;\n      },\n      itemText: function itemText(obj) {\n        return obj.displayName;\n      },\n      onChange: function onChange(obj) {\n        var value = obj.ui.data('value');\n        if (obj.text == undefined && obj.value == undefined) return;\n        var column = $.grep(columns, function (item) {return item.name == value;});\n        if (column.length > 0) {\n          $column = column[0];\n          self.createComboOperatorFilters($.extend({}, params, { item: { column: $column.name, type: $column.type, entity: $column.entity } }));\n\n          //Update model\n          self.model.setRowProperty(params.id, \"column\", value);\n          self.model.setRowProperty(params.id, \"type\", $column.type);\n\n          //Clean operator\n          self.cleanOperator(params.id);\n          //Clean value in model and render\n          self.cleanValueField(params.id);\n          params.row.find('.bz-smartfilters-row-select-column').find('.biz-wp-combo-input').removeClass(\"bz-filter-not-valid\");\n          self.removeValidationValue(params);\n          if (!bizagi.util.isEmpty(params.valueField))\n          params.valueField.empty();\n        }\n      } });\n\n  },\n\n\n  createComboOperatorFilters: function createComboOperatorFilters(params) {\n    var self = this;\n    var operatorItem = params.row.find('.operator-combo');\n    var operators = self.buildOperatorValues(params.item ? params.item.type : null);\n    var isValid = operatorItem.find(\".bz-filter-not-valid\").length !== undefined && operatorItem.find(\".bz-filter-not-valid\").length > 0 ? false : true;\n\n    if (operatorItem.attr(\"role\") == \"bizagi.ui.controls.uicombo\") {\n      // Reset plugin\n      operatorItem.uicombo(\"destroy\");\n    }\n\n    var initialValue = operators[0];\n    if (params.item) {\n      var elements = $.grep(operators, function (item) {return item.id == params.item.operator;});\n      if (elements.length > 0) initialValue = elements[0];\n    }\n\n    operatorItem.uicombo({\n      data: { combo: operators },\n      initValue: initialValue,\n      isEditable: true,\n      itemValue: function itemValue(obj) {\n        return obj.id;\n      },\n      itemText: function itemText(obj) {\n        return obj.name;\n      },\n      onChange: function onChange(obj) {\n        var $operator = obj.ui.data('value');\n        if (obj.text == undefined && obj.value == undefined) return;\n        self.createValueField($.extend({}, params, { item: { column: params.item.column, operator: $operator, type: params.item.type, entity: params.item.entity } }));\n\n        //Update model\n        self.model.setRowProperty(params.id, \"operator\", $operator == \"0\" ? undefined : $operator);\n        self.cleanValueField(params.id);\n        params.row.find('.biz-wp-combo-input').removeClass(\"bz-filter-not-valid\");\n        self.removeValidationValue(params);\n        if ($operator == \"0\")\n        params.valueField.empty();\n      } });\n\n\n    if (!isValid)\n    operatorItem.find(\".biz-wp-combo-input\").addClass(\"bz-filter-not-valid\");\n\n    // Render value field if present\n    if (params.item) {\n      self.createValueField(params);\n    }\n  },\n\n  createValueField: function createValueField(params) {\n    var self = this;\n    var dataType = params.item.type;\n    var operator = params.item.operator;\n    params.valueField = params.row.find('.bz-smartfilters-value-field');\n    params.valueField.empty();\n    if (bizagi.util.isEmpty(params.item.operator)) return;\n\n    if (operator == 'is-empty' || operator == 'is-not-empty') {\n      // these special cases doesn't show any value field, so we need to hide it\n    } else if (operator == 'between') {\n      // special case because there should be two editors\n      if (self.isDateTimeDataType(dataType)) {\n        // show double datetime editor\n        self.buildDateTimeBetweenField(params);\n      } else if (self.isNumberDataType(dataType)) {\n        // show double number editor\n        self.buildNumberBetweenField(params);\n      }\n    } else if (operator == 'in' || operator == 'not-in') {\n      // special case because there should be a combo editor or a multientry depending on datatype\n      if (params.item.type == \"entity\") {\n        self.buildInOperatorComboValueField(params);\n      } else if (params.item.column == \"IdTask\" || params.item.column == \"Activity\") {\n        self.buildInOperatorComboForActivityField(params);\n      } else if (self.isNumberDataType(dataType)) {\n        self.buildInOperatorNotEntityValueField($.extend(params, { isNumber: true }));\n      } else {\n        self.buildInOperatorNotEntityValueField(params);\n      }\n    } else if (operator == 'starts-with' || operator == 'ends-with' || operator == 'contains') {\n      self.buildInOperatorNotEntityValueField(params);\n    } else if (operator == 'on') {\n      // this special case shows a combo of values\n      self.buildOnOperatorValueField(params);\n    } else if (self.isTextDataType(dataType) || params.item.type == \"entity\") {\n      // show a text editor\n      self.buildTextValueField(params);\n    } else if (self.isNumberDataType(dataType)) {\n      // show a number editor\n      self.buildNumberValueField(params);\n    } else if (self.isBooleanDataType(dataType)) {\n      // show a combo editor\n      self.buildBooleanValueField(params);\n    } else if (self.isDateTimeDataType(dataType)) {\n      // show a datetime editor\n      self.buildDateTimeValueField(params);\n    }\n  },\n\n  setValueField: function setValueField(id, property, value) {\n    var self = this;\n    self.model.setRowProperty(id, property, value);\n  },\n\n  cleanValueField: function cleanValueField(id, property) {\n    var self = this;\n    if (property) {\n      self.model.deleteRowProperty(id, property);\n    } else {\n      self.model.deleteRowProperty(id, \"value\");\n      self.model.deleteRowProperty(id, \"from\");\n      self.model.deleteRowProperty(id, \"to\");\n    }\n  },\n\n  cleanOperator: function cleanOperator(id) {\n    var self = this;\n    self.model.deleteRowProperty(id, \"operator\");\n  },\n\n  /* CONTROL BUILD METHODS*/\n\n\n  buildBooleanValueField: function buildBooleanValueField(params) {\n    var self = this;\n    var combo = $.tmpl(self.booleanFieldTemplate, {}).appendTo(params.valueField);\n    var booleanComboValues = [{ id: 0, displayName: bizagi.localization.getResource(\"workportal-widget-smartinbox-please-select-a-value\", \"Please select a value\") },\n    { id: 'true', displayName: bizagi.localization.getResource(\"workportal-widget-smartinbox-filters-true-label\", \"True\") },\n    { id: 'false', displayName: bizagi.localization.getResource(\"workportal-widget-smartinbox-filters-false-label\", \"False\") }];\n    var initialValue = booleanComboValues[0];\n    if (params.item) {\n      var elements = $.grep(booleanComboValues, function (item) {return item.id == params.item.value;});\n      if (elements.length > 0) initialValue = elements[0];\n    }\n\n    combo.uicombo({\n      data: { combo: booleanComboValues },\n      initValue: initialValue,\n      isEditable: true,\n      itemValue: function itemValue(obj) {return obj.id;},\n      itemText: function itemText(obj) {return obj.displayName;},\n      onChange: function onChange(obj) {\n        if (obj.ui.data('value') !== \"0\") {\n          self.setValueField(params.id, \"value\", obj.ui.data('value'));\n          self.removeValidationValue(params);\n        } else\n        {\n          self.cleanValueField(params.id);\n        }\n      } });\n\n  },\n\n  buildTextValueField: function buildTextValueField(params) {\n    var self = this;\n    var maxAllowedLength = 100;\n    var text = $.tmpl(self.textFieldTemplate, {}).appendTo(params.valueField);\n\n    var validate = function validate(text) {\n      text = text || \"\";\n      // Length validation\n      text = text.substr(0, maxAllowedLength);\n\n      //Trim content\n      text = text.trim();\n\n      return text;\n    };\n\n    text.change(function () {\n      var value = validate(text.val());\n\n      if (value != \"\") {\n        self.setValueField(params.id, \"value\", value);\n        self.removeValidationValue(params);\n      } else {\n        self.cleanValueField(params.id);\n      }\n    });\n\n    if (params.item && params.item.value) {\n      var value = validate(params.item.value);\n      text.val(value);\n      self.setValueField(params.id, \"value\", value);\n    }\n  },\n\n  buildNumberValueField: function buildNumberValueField(params) {\n    var self = this;\n    params.propertyToUpdate = params.propertyToUpdate || \"value\";\n    params.placeholder = params.placeholder || \"\";\n    var number = $.tmpl(self.numberFieldTemplate, params).appendTo(params.valueField);\n    number.numeric(self.decimalSymbol);\n    number.change(function () {\n      var value = number.val();\n      if (value.length && self.isInvalidNumber(value, params.item.type)) {\n        number.val(\"\");\n        number.data(\"value\", \"\");\n        self.cleanValueField(params.id, params.propertyToUpdate);\n        return;\n      }\n\n      if (number.val().trim() != \"\") {\n        number.setValue(value);\n      } else {\n        number.data(\"value\", \"\");\n        self.cleanValueField(params.id, params.propertyToUpdate);\n      }\n\n      if (params.onChange) {\n        params.onChange(this);\n      }\n    });\n    number.focus(function () {\n      if (params.item.type == \"Money\") {\n        var originalValue = number.data(\"value\");\n        if (!bizagi.util.isEmpty(originalValue)) {\n          originalValue = originalValue.replaceAll(\".\", self.decimalSymbol);\n          originalValue = originalValue.replaceAll(\",\", self.decimalSymbol);\n        }\n        number.val(originalValue);\n      }\n    });\n    number.focusout(function () {\n      if (params.item.type == \"Money\") {\n        var value = number.val();\n        number.val(self.formatCurrency(value));\n      }\n    });\n\n    number.getValue = function () {\n      return Number(params.item.type == \"Money\" ? number.data(\"value\") : number.val());\n    };\n\n    number.setValue = function (value) {\n      // Convert always to . decimal separator for persistence\n      value = value.toString().replaceAll(\",\", \".\");\n      self.setValueField(params.id, params.propertyToUpdate, value);\n      self.removeValidationValue(params);\n      if (params.item.type == \"Money\") {\n        var originalValue = self.removeMoneyExtraDecimals(value);\n        val = self.formatCurrency(originalValue);\n        number.data(\"value\", originalValue);\n        number.val(val);\n      } else {\n        number.val(value);\n      }\n    };\n\n    if (params.item && params.item[params.propertyToUpdate] !== undefined) {\n      var value = params.item[params.propertyToUpdate];\n      var originalValue = self.removeMoneyExtraDecimals(value);\n      if (!bizagi.util.isEmpty(originalValue)) {\n        originalValue = originalValue.replaceAll(\".\", self.decimalSymbol);\n        originalValue = originalValue.replaceAll(\",\", self.decimalSymbol);\n      }\n\n      if (params.item.type == \"Money\") {\n        number.data(\"value\", originalValue);\n        number.val(self.formatCurrency(originalValue));\n      } else {\n        number.val(originalValue);\n      }\n    }\n    return number;\n  },\n\n  buildNumberBetweenField: function buildNumberBetweenField(params) {\n    var self = this;\n    var numberFrom = self.buildNumberValueField($.extend({}, params, {\n      propertyToUpdate: \"from\",\n      placeholder: bizagi.localization.getResource(\"workportal-widget-smartinbox-filters-from-label\", \"From\"),\n      onChange: function onChange(element) {\n        if (bizagi.util.isEmpty(numberFrom.val())) return;\n        var value = numberFrom.getValue();\n        var valueTo = numberTo.getValue();\n        if (value > valueTo && valueTo !== \"\") {\n          numberTo.setValue(value);\n        }\n      } }));\n\n    var numberTo = self.buildNumberValueField($.extend({}, params, {\n      propertyToUpdate: \"to\",\n      placeholder: bizagi.localization.getResource(\"workportal-widget-smartinbox-filters-to-label\", \"To\"),\n      onChange: function onChange(element) {\n        if (bizagi.util.isEmpty(numberTo.val())) return;\n        var value = numberTo.getValue();\n        var valueFrom = numberFrom.getValue();\n        if (valueFrom > value) {\n          numberFrom.setValue(value);\n        }\n      } }));\n\n\n    numberFrom.parent().wrapInner(\"<div class='bz-smartfilters-value-field-between' />\");\n  },\n\n  buildDateTimeValueField: function buildDateTimeValueField(params) {\n    var self = this;\n    params.propertyToUpdate = params.propertyToUpdate || \"value\";\n    params.placeholder = params.placeholder || bizagi.localization.getResource(\"dateFormat\");\n    var datetime = $.tmpl(self.dateTimeFieldTemplate, { placeholder: params.placeholder }).appendTo(params.valueField);\n    var options = {\n      firstDay: bizagi.override.firstDay || 0,\n      dateFormat: self.getDateFormat(BIZAGI_DEFAULT_DATETIME_INFO.shortDateFormat),\n      changeYear: true,\n      changeMonth: true,\n      shortYearCutoff: typeof BIZAGI_DEFAULT_DATETIME_INFO != \"undefined\" && typeof BIZAGI_DEFAULT_DATETIME_INFO.twoDigitYearMaxDelta != \"undefined\" ? \"+\" + BIZAGI_DEFAULT_DATETIME_INFO.twoDigitYearMaxDelta : \"+50\",\n      yearRange: \"c-100:c+20\" };\n\n\n    datetime.datepicker(options);\n    datetime.change(function () {\n      // Validate format of the value \n      var sValue = datetime.val();\n      if (bizagi.util.dateFormatter.getDateFromFormat(sValue, bizagi.localization.defaultDatetimeInfo.shortDateFormat) == 0) {\n        datetime.val(\"\");\n        datetime.setValue(undefined);\n        return;\n      }\n\n      if (datetime.val().trim() != \"\") {\n        var value = bizagi.util.dateFormatter.formatInvariant(datetime.datepicker(\"getDate\"), false);\n        self.setValueField(params.id, params.propertyToUpdate, value);\n        if (typeof params.onChange == \"function\") {\n          params.onChange(this);\n        }\n        self.removeValidationValue(params);\n      } else\n      {\n        self.cleanValueField(params.id);\n      }\n    });\n\n    datetime.setValue = function (value) {\n      self.setValueField(params.id, params.propertyToUpdate, value);\n    };\n\n    if (params.item && params.item[params.propertyToUpdate] !== undefined) {\n      datetime.datepicker().datepicker(\"setDate\", new Date(params.item[params.propertyToUpdate]));\n    }\n\n    return datetime;\n  },\n\n  buildDateTimeBetweenField: function buildDateTimeBetweenField(params) {\n    var self = this;\n\n    var getDate = function getDate(element) {\n      var date;\n      try {\n        date = $.datepicker.parseDate(self.getDateFormat(BIZAGI_DEFAULT_DATETIME_INFO.shortDateFormat), element.value);\n      } catch (error) {\n        date = null;\n      }\n      return date;\n    };\n\n    var dateFrom = self.buildDateTimeValueField($.extend({}, params, {\n      placeholder: bizagi.localization.getResource(\"workportal-widget-smartinbox-filters-from-label\", \"From\") + \": \" + bizagi.localization.getResource(\"dateFormat\"),\n      propertyToUpdate: \"from\",\n      onChange: function onChange(element) {\n        // Validate valid range\n        var fromValue = dateFrom.datepicker(\"getDate\");\n        var toValue = dateTo.datepicker(\"getDate\");\n        if (toValue < fromValue) {\n          dateTo.setValue(bizagi.util.dateFormatter.formatInvariant(fromValue, false));\n        }\n        dateTo.datepicker(\"option\", \"minDate\", getDate(element));;\n      } }));\n\n\n\n    var dateTo = self.buildDateTimeValueField($.extend({}, params, {\n      placeholder: bizagi.localization.getResource(\"workportal-widget-smartinbox-filters-to-label\", \"To\") + \": \" + bizagi.localization.getResource(\"dateFormat\"),\n      propertyToUpdate: \"to\",\n      onChange: function onChange(element) {\n        // Validate valid range\n        var fromValue = dateFrom.datepicker(\"getDate\");\n        var toValue = dateTo.datepicker(\"getDate\");\n        if (toValue < fromValue) {\n          dateFrom.setValue(bizagi.util.dateFormatter.formatInvariant(toValue, false));\n        }\n        dateFrom.datepicker(\"option\", \"maxDate\", getDate(element));\n      } }));\n\n\n\n    dateFrom.parent().wrapInner(\"<div class='bz-smartfilters-value-field-between' />\");\n  },\n\n  buildOnOperatorValueField: function buildOnOperatorValueField(params) {\n    var self = this;\n    var combo = $.tmpl(self.onOperatorTemplate, {}).appendTo(params.valueField);\n    var onOperatorValues = [{ id: 0, displayName: bizagi.localization.getResource(\"workportal-widget-smartinbox-please-select-a-value\", \"Please select a value\") },\n    { id: 'today', displayName: bizagi.localization.getResource(\"workportal-widget-smartinbox-filters-today-label\", \"Today\") },\n    { id: 'this-week', displayName: bizagi.localization.getResource(\"workportal-widget-smartinbox-filters-thisweek-label\", \"This week\") },\n    { id: 'this-month', displayName: bizagi.localization.getResource(\"workportal-widget-smartinbox-filters-thismonth-label\", \"This month\") }];\n\n    var initialValue = onOperatorValues[0];\n    if (params.item) {\n      var elements = $.grep(onOperatorValues, function (item) {return item.id == params.item.value;});\n      if (elements.length > 0) initialValue = elements[0];\n    }\n\n    combo.uicombo({\n      data: { combo: onOperatorValues },\n      initValue: initialValue,\n      isEditable: true,\n      itemValue: function itemValue(obj) {return obj.id;},\n      itemText: function itemText(obj) {return obj.displayName;},\n      onChange: function onChange(obj) {\n        if (obj.ui.data('value') !== \"0\") {\n          self.setValueField(params.id, \"value\", obj.ui.data('value'));\n          self.removeValidationValue(params);\n        } else\n        {\n          self.cleanValueField(params.id);\n        }\n      } });\n\n  },\n\n  buildInOperatorComboValueField: function buildInOperatorComboValueField(params) {\n    var self = this;\n    params.guidElement = Math.guid();\n    var multiselectCombo = $.tmpl(self.inOperatorComboTemplate, { guidElement: params.guidElement }).appendTo(params.valueField);\n\n    setTimeout(function () {\n      multiselectCombo.bizagi_searchMultiSelect({\n        scope: { entityGuid: params.item.entity, dataService: self.dataService },\n        asyncList: self.getEntityValues,\n        list: {},\n        itemValue: function itemValue(obj) {\n          return obj.id || obj.value;\n        },\n        itemText: function itemText(obj) {\n          return obj.label || obj.displayName;\n        },\n        onChange: function onChange(data) {\n          var values = [];\n          for (var i = 0; i < data.length; i++) {\n            values.push({ id: data[i].value, displayName: data[i].text });\n          }\n          if (values.length > 0) {\n            self.setValueField(params.id, \"value\", values);\n            self.removeValidationValue(params);\n          } else\n          {\n            self.cleanValueField(params.id);\n          }\n        },\n        label: \"\",\n        iconClass: \"bz-icon bz-icon-search-outline bz-icon-16\",\n        parentPositionElement: \".bz-smartfilters-value-field-combo-in-operator-combo-values[data-guid='\" + params.guidElement + \"'] > ul\",\n        parentElementToFitWidth: \".bz-smartfilters-value-field-combo-in-operator-combo-values[data-guid='\" + params.guidElement + \"']\",\n        parentElementToBorder: \".bz-smartfilters-value-field-combo-in-operator-combo-values[data-guid='\" + params.guidElement + \"'] > ul\",\n        classOpenedList: \"bz-processes-search-border-open-list\",\n        classOpenedParent: \"bz-opened\",\n        classItem: \"theme-navigation-border\",\n        SEARCH_MIN_LENGTH: 0,\n        openOnFocus: true,\n        classMenuList: \"ui-smart-inbox\",\n        customRenderItem: function customRenderItem(ul, item) {\n          return $(\"<li>\").\n          append(\n          $(\"<a>\").\n          append(\"<span class='bz-combo-in-operator-combo-values-name'>\" + (item.label || item.displayName) + \"</span>\")).\n\n          appendTo(ul);\n        } });\n\n\n      if (params.item && params.item.value) {\n        multiselectCombo.bizagi_searchMultiSelect('setDataItems', params.item.value);\n      }\n    }, 100);\n  },\n\n  buildInOperatorComboForActivityField: function buildInOperatorComboForActivityField(params) {\n    var self = this;\n    params.guidElement = Math.guid();\n    var multiselectCombo = $.tmpl(self.inOperatorComboTemplate, { guidElement: params.guidElement }).appendTo(params.valueField);\n    self.loadUserTasks();\n\n    setTimeout(function () {\n      multiselectCombo.bizagi_multiSelect({\n        list: self.userTasksCache,\n        itemValue: function itemValue(obj) {\n          return obj.id || obj.value;\n        },\n        itemText: function itemText(obj) {\n          return obj.label || obj.displayName;\n        },\n        onChange: function onChange(data) {\n          var values = [];\n          for (var i = 0; i < data.length; i++) {\n            var val = $.grep(self.userTasksCache, function (item) {return item.id == data[i].value;})[0];\n            values.push({ id: data[i].value, displayName: data[i].text, internalId: val.internalId, processName: val.processName });\n          }\n          if (values.length > 0) {\n            self.setValueField(params.id, \"value\", values);\n            self.removeValidationValue(params);\n          } else\n          {\n            self.cleanValueField(params.id);\n          }\n        },\n        label: \"\",\n        iconClass: \"bz-icon bz-icon-search-outline bz-icon-16\",\n        parentPositionElement: \".bz-smartfilters-value-field-combo-in-operator-combo-values[data-guid='\" + params.guidElement + \"'] > ul\",\n        parentElementToFitWidth: \".bz-smartfilters-value-field-combo-in-operator-combo-values[data-guid='\" + params.guidElement + \"']\",\n        parentElementToBorder: \".bz-smartfilters-value-field-combo-in-operator-combo-values[data-guid='\" + params.guidElement + \"'] > ul\",\n        classOpenedList: \"bz-processes-search-border-open-list\",\n        classOpenedParent: \"bz-opened\",\n        classItem: \"theme-navigation-border\",\n        SEARCH_MIN_LENGTH: 0,\n        openOnFocus: true,\n        classMenuList: \"ui-smart-inbox\",\n        customRenderItem: function customRenderItem(ul, item) {\n          return $(\"<li>\").\n          append(\n          $(\"<a>\").\n          append(\"<span class='bz-combo-in-operator-combo-values-name'>\" + (typeof item.label === 'string') ? item.label : item.displayName || \"\" + \"</span>\")).\n\n          appendTo(ul);\n        } });\n\n\n      if (params.item && params.item.value) {\n        multiselectCombo.bizagi_multiSelect('setDataItems', params.item.value);\n      }\n    }, 100);\n  },\n\n  /**\r\n      * Get entity values from server\r\n      * \r\n      * @param {*} request \r\n      * @param {*} response \r\n      * @param {*} scope \r\n      */\n  getEntityValues: function getEntityValues(request, response, scope) {\n    scope.entityValuesCache = scope.entityValuesCache || [];\n\n    if (request.term in scope.entityValuesCache) {\n      response(scope.entityValuesCache[request.term]);\n      return;\n    }\n\n    var entityValues = [];\n    $.when(scope.dataService.getEntityValuesForInboxFilter({ entityGuid: scope.entityGuid, wildcard: request.term })).done(function (data) {\n      $.grep(data, function (item) {\n        entityValues.push({\n          label: item.displayName,\n          value: item.displayName,\n          id: item.id });\n\n      });\n      scope.entityValuesCache[request.term] = entityValues;\n      response(entityValues);\n    });\n  },\n\n  loadUserTasks: function loadUserTasks() {\n    var self = this;\n    if (self.userTasksCache) {\n      return self.userTasksCache;\n    }\n\n    var values = [];\n    if (self.wfClassList) {\n      $.when(self.dataService.getUserTasksByWFClass(self.wfClassList)).done(function (data) {\n        $.grep(data, function (item) {\n          values.push({\n            label: item.displayName,\n            value: item.displayName,\n            internalId: item.internalId,\n            processName: item.processName,\n            id: item.id });\n\n        });\n        self.userTasksCache = values;\n      });\n    } else\n    {\n      var smartInboxId = self.params.selectedInboxData ? self.params.selectedInboxData.smartInboxId : undefined;\n      var id = self.params.workflowId ? self.params.workflowId : self.params.smartInboxId || smartInboxId;\n      var isSmartInbox = self.params.smartInboxId || smartInboxId !== undefined;\n      $.when(self.dataService.getUserTasksForInboxFilter({ id: id, isSmartInbox: isSmartInbox })).done(function (data) {\n        $.grep(data, function (item) {\n          values.push({\n            label: item.displayName,\n            value: item.displayName,\n            internalId: item.internalId,\n            processName: item.processName,\n            id: item.id });\n\n        });\n        self.userTasksCache = values;\n      });\n    }\n  },\n\n  buildInOperatorNotEntityValueField: function buildInOperatorNotEntityValueField(params) {\n    var self = this;\n    var template = self.inOperatorTextTemplate;\n    var multiselectText = $.tmpl(template, {}).appendTo(params.valueField);\n    multiselectText.tagsinput(\"items\", {\n      allowDuplicates: false,\n      itemText: function itemText(item) {\n        if (params.item.type == \"Money\") {\n          var item = self.removeMoneyExtraDecimals(item);\n          return self.formatCurrency(item);\n        }\n        return this.itemValue(item);\n      },\n      confirmKeys: [13],\n      delimiter: null });\n\n    multiselectText.on('beforeItemAdd', function (event) {\n      var values = multiselectText.tagsinput(\"items\");\n\n      if (params.isNumber) {\n        if (event.item.length > 0 && self.isInvalidNumber(event.item, params.item.type)) {\n          event.cancel = true;\n          return;\n        }\n      }\n\n      if (values.length >= self.maxInValues) {\n        self.notifier.showErrorMessage(bizagi.localization.getResource(\"workportal-widget-smartinbox-filters-error-in-values-limit\", \"You have reached the maximum number of values\"));\n        event.cancel = true;\n      }\n    });\n    multiselectText.on('itemAdded itemRemoved', function (event) {\n      var values = multiselectText.tagsinput(\"items\");\n\n      if (params.isNumber) {\n        values = $.map(values, function (value) {\n          // Convert always to . decimal separator for persistence\n          value = value.replaceAll(\",\", \".\");\n          return self.removeMoneyExtraDecimals(value);\n        });\n      }\n\n      if (values.length > 0) {\n        self.setValueField(params.id, \"value\", values);\n        self.removeValidationValue(params);\n      } else\n      {\n        self.cleanValueField(params.id);\n      }\n    });\n\n\n    if (params.isNumber) {\n      multiselectText.tagsinput(\"input\").numeric(self.decimalSymbol);\n    }\n    if (params.item && params.item.value) {\n      $.each(params.item.value, function (_, val) {\n        multiselectText.tagsinput('add', val);\n      });\n    }\n  },\n\n  /* MISC METHODS*/\n  /**\r\n                     * \r\n                     * @param {*} type \r\n                     */\n  buildOperatorValues: function buildOperatorValues(type) {\n    var operators = [{ id: 0, name: bizagi.localization.getResource(\"workportal-widget-smartinbox-please-select-a-value\", \"Please select a value\") }];\n    var possibleOperators = [\n    { id: \"is-empty\", name: bizagi.localization.getResource(\"workportal-widget-smartinbox-filters-is-empty-label\", \"is empty\"),\n      appliesTo: [\"boolean\", \"int\", \"bigint\", \"smallint\", \"tinyint\", \"decimal\", \"numeric\", \"money\", \"float\", \"real\", \"varchar\", \"char\", \"text\", \"nchar\", \"nvarchar\", \"ntext\", \"datetime\", \"smalldatetime\", \"entity\"] },\n    { id: \"is-not-empty\", name: bizagi.localization.getResource(\"workportal-widget-smartinbox-filters-is-not-empty-label\", \"is not empty\"),\n      appliesTo: [\"boolean\", \"int\", \"bigint\", \"smallint\", \"tinyint\", \"decimal\", \"numeric\", \"money\", \"float\", \"real\", \"varchar\", \"char\", \"text\", \"nchar\", \"nvarchar\", \"ntext\", \"datetime\", \"entity\"] },\n    { id: \"equals\", name: bizagi.localization.getResource(\"workportal-widget-smartinbox-filters-equals-label\", \"equals\"),\n      appliesTo: [\"boolean\", \"int\", \"bigint\", \"smallint\", \"tinyint\", \"decimal\", \"numeric\", \"money\", \"float\", \"real\", \"varchar\", \"char\", \"text\", \"nchar\", \"nvarchar\", \"ntext\", \"entity\"] },\n    { id: \"not-equals\", name: bizagi.localization.getResource(\"workportal-widget-smartinbox-filters-not-equals-label\", \"not equals\"),\n      appliesTo: [\"boolean\", \"int\", \"bigint\", \"smallint\", \"tinyint\", \"decimal\", \"numeric\", \"money\", \"float\", \"real\", \"varchar\", \"char\", \"text\", \"nchar\", \"nvarchar\", \"ntext\", \"entity\"] },\n    { id: \"starts-with\", name: bizagi.localization.getResource(\"workportal-widget-smartinbox-filters-starts-with-label\", \"starts with\"),\n      appliesTo: [\"varchar\", \"char\", \"text\", \"nchar\", \"nvarchar\", \"ntext\", \"entity\"] },\n    { id: \"not-starts-with\", name: bizagi.localization.getResource(\"workportal-widget-smartinbox-filters-not-starts-with-label\", \"not starts with\"),\n      appliesTo: [\"varchar\", \"char\", \"text\", \"nchar\", \"nvarchar\", \"ntext\", \"entity\"] },\n    { id: \"ends-with\", name: bizagi.localization.getResource(\"workportal-widget-smartinbox-filters-ends-with-label\", \"ends with\"),\n      appliesTo: [\"varchar\", \"char\", \"text\", \"nchar\", \"nvarchar\", \"ntext\", \"entity\"] },\n    { id: \"not-ends-with\", name: bizagi.localization.getResource(\"workportal-widget-smartinbox-filters-not-ends-with-label\", \"not ends with\"),\n      appliesTo: [\"varchar\", \"char\", \"text\", \"nchar\", \"nvarchar\", \"ntext\", \"entity\"] },\n    { id: \"contains\", name: bizagi.localization.getResource(\"workportal-widget-smartinbox-filters-contains-label\", \"contains\"),\n      appliesTo: [\"varchar\", \"char\", \"text\", \"nchar\", \"nvarchar\", \"ntext\", \"entity\"] },\n    { id: \"not-contains\", name: bizagi.localization.getResource(\"workportal-widget-smartinbox-filters-not-contains-label\", \"not contains\"),\n      appliesTo: [\"varchar\", \"char\", \"text\", \"nchar\", \"nvarchar\", \"ntext\", \"entity\"] },\n    { id: \"greater-than\", name: bizagi.localization.getResource(\"workportal-widget-smartinbox-filters-greater-than-label\", \"greater than\"),\n      appliesTo: [\"int\", \"bigint\", \"smallint\", \"tinyint\", \"decimal\", \"numeric\", \"money\", \"float\", \"real\", \"datetime\"] },\n    { id: \"greater-than-or-equals\", name: bizagi.localization.getResource(\"workportal-widget-smartinbox-filters-greater-than-or-equals-label\", \"greater than or equals\"),\n      appliesTo: [\"int\", \"bigint\", \"smallint\", \"tinyint\", \"decimal\", \"numeric\", \"money\", \"float\", \"real\", \"datetime\"] },\n    { id: \"less-than\", name: bizagi.localization.getResource(\"workportal-widget-smartinbox-filters-less-than-label\", \"less than\"),\n      appliesTo: [\"int\", \"bigint\", \"smallint\", \"tinyint\", \"decimal\", \"numeric\", \"money\", \"float\", \"real\", \"datetime\"] },\n    { id: \"less-than-or-equals\", name: bizagi.localization.getResource(\"workportal-widget-smartinbox-filters-less-than-or-equals-label\", \"less than or equals\"),\n      appliesTo: [\"int\", \"bigint\", \"smallint\", \"tinyint\", \"decimal\", \"numeric\", \"money\", \"float\", \"real\", \"datetime\"] },\n    { id: \"on\", name: bizagi.localization.getResource(\"workportal-widget-smartinbox-filters-on-label\", \"on\"),\n      appliesTo: [\"datetime\"] },\n    { id: \"between\", name: bizagi.localization.getResource(\"workportal-widget-smartinbox-filters-between-label\", \"between\"),\n      appliesTo: [\"datetime\", \"int\", \"smallint\", \"tinyint\", \"decimal\", \"numeric\", \"money\", \"float\", \"real\", \"bigint\"] },\n    { id: \"in\", name: bizagi.localization.getResource(\"workportal-widget-smartinbox-filters-in-label\", \"in\"),\n      appliesTo: [\"varchar\", \"char\", \"text\", \"nchar\", \"int\", \"bigint\", \"smallint\", \"tinyint\", \"decimal\", \"numeric\", \"money\", \"float\", \"real\", \"entity\"] },\n    { id: \"not-in\", name: bizagi.localization.getResource(\"workportal-widget-smartinbox-filters-not-in-label\", \"not in\"),\n      appliesTo: [\"varchar\", \"char\", \"text\", \"nchar\", \"int\", \"bigint\", \"smallint\", \"tinyint\", \"decimal\", \"numeric\", \"money\", \"float\", \"real\", \"entity\"] }];\n\n\n    if (type) {\n      type = type.toLowerCase();\n      var operatorsToAdd = $.grep(possibleOperators, function (item) {\n        return item.appliesTo.indexOf(type) >= 0;\n      });\n      Array.prototype.push.apply(operators, operatorsToAdd);\n    }\n\n    return operators;\n  },\n\n  isTextDataType: function isTextDataType(dataType) {\n    var charDataType = [\"varchar\", \"char\", \"text\", \"nchar\", \"nvarchar\", \"ntext\"];\n    dataType = dataType.toLowerCase();\n    return charDataType.indexOf(dataType) > -1;\n  },\n\n  isNumberDataType: function isNumberDataType(dataType) {\n    var numberDataType = [\"int\", \"bigint\", \"smallint\", \"tinyint\", \"decimal\", \"numeric\", \"money\", \"float\", \"real\"];\n    dataType = dataType.toLowerCase();\n    return numberDataType.indexOf(dataType) > -1;\n  },\n\n  isBooleanDataType: function isBooleanDataType(dataType) {\n    dataType = dataType.toLowerCase();\n    return dataType == \"boolean\";\n  },\n\n  isDateTimeDataType: function isDateTimeDataType(dataType) {\n    var dateDataType = [\"datetime\", \"smalldatetime\"];\n    dataType = dataType.toLowerCase();\n    return dateDataType.indexOf(dataType) > -1;\n  },\n\n  /**\r\n      * Translate standar date format to jquery date picker\r\n      *\r\n      */\n  getDateFormat: function getDateFormat(format) {\n    var datePickerFormat = format;\n    var init;\n\n    if (format.search(\"h\") != -1 || format.search(\"H\") != -1) {\n      if (format.search(\"h\") != -1) {\n        init = format.search(\"h\");\n      } else {\n        init = format.search(\"H\");\n      }\n\n      datePickerFormat = format.substring(0, init - 1);\n    }\n\n    // Fix month\n    if (datePickerFormat.indexOf(\"MMMM\") >= 0) {\n      datePickerFormat = datePickerFormat.replaceAll(\"MMMM\", \"MM\");\n    } else if (datePickerFormat.indexOf(\"MMM\") >= 0) {\n      // Month name short\n      datePickerFormat = datePickerFormat.replaceAll(\"MMM\", \"M\");\n    } else if (datePickerFormat.indexOf(\"MM\") >= 0) {\n      // Month two digits\n      datePickerFormat = datePickerFormat.replaceAll(\"MM\", \"mm\");\n    } else if (datePickerFormat.indexOf(\"M\") >= 0) {\n      // Month one digits\n      datePickerFormat = datePickerFormat.replaceAll(\"M\", \"m\");\n    }\n\n    // Fix years\n    if (datePickerFormat.search(\"yyyy\") != -1) {\n      datePickerFormat = datePickerFormat.replaceAll(\"yyyy\", \"yy\");\n    } else {\n      if (datePickerFormat.search(\"yy\") != -1) {\n        datePickerFormat = datePickerFormat.replaceAll(\"yy\", \"y\");\n      }\n    }\n\n    datePickerFormat = datePickerFormat.replaceAll(\"dddd\", \"DD\"); // Fix days\n\n    return datePickerFormat;\n  },\n\n  isInvalidNumber: function isInvalidNumber(value, type) {\n    var self = this;\n    if (value == \".\") return true;\n    if (value.match(\"[#$%'()]\")) return true;\n    value = self.decimalSymbol == \".\" ? value.replaceAll(\",\", \".\") : value.replaceAll(\".\", \",\");\n    if (Number(value) > self.calculateMaxValue(type)) return true;\n    if (Number(value) < self.calculateMinValue(type)) return true;\n    return value.replace(new RegExp(\"[^\" + self.decimalSymbol + \"]\", \"g\"), \"\").length > 1;\n  },\n\n  calculateMinValue: function calculateMinValue(dataType) {\n    if (dataType === \"TinyInt\") {\n      return 0; // tinyint\n    } else\n    if (dataType === \"SmallInt\") {\n      return -32768; // smallint\n    } else\n    if (dataType === \"Int\") {\n      return -2147483648; // int\n    } else\n    if (dataType === \"BigInt\") {\n      return -999999999999999; // bigint\n    } else\n    {\n      return -922337203685477; // Money | Float | Real | Decimal\n    }\n  },\n\n  calculateMaxValue: function calculateMaxValue(dataType) {\n    if (dataType === \"TinyInt\") {\n      return 255; // tinyint\n    } else\n    if (dataType === \"SmallInt\") {\n      return 32767; // smallint\n    } else\n    if (dataType === \"Int\") {\n      return 2147483647; // int\n    } else\n    if (dataType === \"BigInt\") {\n      return 999999999999999; // bigint\n    } else\n    {\n      return 922337203685477; // Money | Float | Real | Decimal\n    }\n\n  },\n\n  removeMoneyExtraDecimals: function removeMoneyExtraDecimals(value) {\n    var self = this;\n    var originalValue = value + \"\";\n    var dotIndex = originalValue.indexOf(self.decimalSymbol);\n    if (dotIndex > 0 && dotIndex + self.MAX_DECIMALS + 1 < originalValue.length) {\n      originalValue = originalValue.substring(0, dotIndex + self.MAX_DECIMALS + 1);\n    }\n    return originalValue;\n  },\n\n  formatCurrency: function formatCurrency(value) {\n    var self = this;\n    var groupSymbol = typeof BIZAGI_DEFAULT_CURRENCY_INFO !== \"undefined\" ? BIZAGI_DEFAULT_CURRENCY_INFO.groupSeparator : \",\";\n    var decimalSymbol = typeof BIZAGI_DEFAULT_CURRENCY_INFO !== \"undefined\" ? BIZAGI_DEFAULT_CURRENCY_INFO.decimalSeparator : \".\";\n    var symbol = typeof BIZAGI_DEFAULT_CURRENCY_INFO !== \"undefined\" ? BIZAGI_DEFAULT_CURRENCY_INFO.symbol : \"$\";\n\n    $test = $(\"<input type='text' value='\" + value + \"'>\");\n    $test.formatCurrency({\n      symbol: symbol,\n      decimalSymbol: decimalSymbol,\n      digitGroupSymbol: groupSymbol,\n      groupDigits: \"3\",\n      roundToDecimalPlace: self.MAX_DECIMALS });\n\n    return $test.val();\n  } });","function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;} /*\r\n                                                                                                                                                                                                            *   Name: BizAgi Workportal Desktop New Case Widget Controller\r\n                                                                                                                                                                                                            *   Author: Edward Morales\r\n                                                                                                                                                                                                            *   Comments:\r\n                                                                                                                                                                                                            *   -   This script will provide sub menu widget\r\n                                                                                                                                                                                                            */\n\n// Auto extend\nbizagi.workportal.widgets.subMenu.extend(\"bizagi.workportal.widgets.subMenu\", {}, {\n  /**\r\n                                                                                     *   To be overriden in each device to apply layouts\r\n                                                                                     */\n  postRender: function postRender() {\n    var self = this;\n    self.notifier = bizagi.injector.get(\"notifier\");\n\n    // render sub menu content\n    self.renderSubMenuContent();\n\n    self.scrollVertical({\n      \"autohide\": false });\n\n  },\n  scrollVertical: function scrollVertical() {\n    var self = this;\n    var content = self.getContent();\n\n    $(\"#categories\", content).bizagiScrollbar({\n      \"autohide\": false });\n\n  },\n  /*\r\n      *   Show content for sub menu item\r\n      */\n\n  renderSubMenuContent: function renderSubMenuContent() {\n    var self = this;\n    var content = self.getContent();\n    var listTemplate = self.workportalFacade.getTemplate(self.isAdminMenu() ? \"menu.submenu.cathegories.list\" : \"menu.submenu.list\");\n    var listContainer = $(\"#categories\", content);\n    var data = {};\n    var callBack = {\n      \"ThemeBuilder\": function ThemeBuilder(args) {\n        args = args || {};\n        if (args.url) {\n          args.windowOpenBlank.location; //Prevent security message browsers open popups. Reason: window.open after callbacks.\n        }\n      },\n      \"asyncECMUpload\": function asyncECMUpload(args) {\n        args = args || {};\n        self.showWidgetPopup({\n          widget: args.url,\n          title: args.title,\n          id: args.id });\n\n      },\n\n      \"AdminSmartInbox\": function AdminSmartInbox(args) {\n        args = args || {};\n        args.width = 1000;\n        args.height = 400;\n        self.showWidgetPopup({\n          widget: args.url,\n          title: args.title,\n          id: args.id,\n          width: 850,\n          height: 800 });\n\n      } };\n\n\n    // TODO: SNAKE-1296 remove these lines\n    try {\n      if (bizagi.override.enableMultipleCasesReassigment) {\n        self.params.options.menuData.push({\n          categoryKey: \"CaseAdmin\",\n          categoryName: self.getResource(\"workportal-menu-submenu-adminReassignCases\"),\n          categoryUrl: \"adminReassignCases\" });\n\n\n        callBack.CaseAdmin = function (args) {\n          args = args || {};\n          self.showWidgetPopup({\n            widget: args.url,\n            title: args.title,\n            id: args.id });\n\n        };\n      }\n    } catch (e) {\n\n    } // Nothing todo, just skip this option in menu\n\n    //DRAGON-152 Adidas - Async ECM\n    try {\n      if (bizagi.override.enableAsyncECMUploadJobs) {\n        self.params.options.menuData.push({\n          categoryKey: \"asyncECMUpload\",\n          categoryName: self.getResource(\"workportal-menu-submenu-asyncECMUpload\"),\n          categoryUrl: \"asyncECMUpload\" });\n\n      }\n    } catch (e) {\n      // Nothing todo, just skip this option in menu\n    }\n\n\n    try {\n\n      //delete frankenstein implementations\n      // revisar el contenido de self.params.options.menuData para tener en cuenta los sub menus   autorizados\n      var authorized = self.getSubItemsAuthorized();\n\n      self.deleteMenuOption(\"UserAdmin\");\n      self.deleteMenuOption(\"Stakeholder\");\n      self.deleteMenuOption(\"AuthenticationLogQuery\");\n      self.deleteMenuOption(\"EncryptionAdmin\");\n      self.deleteMenuOption(\"UserPendingRequests\");\n      self.deleteMenuOption(\"CaseAdmin\");\n      self.deleteMenuOption(\"AsynchronousWorkitemRetries\");\n      self.deleteMenuOption(\"UserDefaultAssignation\");\n      self.deleteMenuOption(\"Profiles\");\n      self.deleteMenuOption(\"AlarmAdmin\");\n      self.deleteMenuOption(\"Licenses\");\n      self.deleteMenuOption(\"UnlockFormsAdmin\");\n      self.deleteMenuOption(\"GRDimensionAdmin\");\n      self.deleteMenuOption(\"DocumentTemplates\");\n      self.deleteMenuOption(\"ProcessAdmin\");\n      self.deleteMenuOption(\"Multilanguage\");\n      self.deleteMenuOption(\"EntityAdmin\");\n      self.deleteMenuOption(\"Holidays\");\n      self.deleteMenuOption(\"ProjectName\");\n      self.deleteMenuOption(\"OAuthApplications\");\n      self.deleteMenuOption(\"AdhocProcessAdmin\");\n      self.deleteMenuOption(\"AdhocEntityAdmin\");\n      self.deleteMenuOption(\"AdhocUserGroupAdmin\");\n      self.deleteMenuOption(\"AdhocCreateProcess\");\n      self.deleteMenuOption(\"UserDelegates\");\n      self.deleteMenuOption(\"AdhocUserGroupReport\");\n      self.deleteMenuOption(\"UserPermissionReport\");\n      self.deleteMenuOption(\"ErrorLogs\");\n      self.deleteMenuOption(\"AdminSmartInbox\");\n\n      $.each(self.params.options.menuData, function (key, value) {\n\n        if (value.categoryKey == \"BusinessPolicies\") {\n          self.params.options.menuData[key].categoryClassName = \"bz-icon-policy-outline\";\n        }\n\n        if (value.categoryKey == \"ThemeBuilder\") {\n          self.params.options.menuData[key].categoryClassName = \"bz-icon-paint-outline\";\n        }\n\n        if (value.categoryKey == \"AdminSmartInbox\") {\n          self.params.options.menuData[key].categoryClassName = \"bz-icon-folder-add-outline\";\n        }\n      });\n      if ($.inArray(\"BusinessPolicies\", authorized) == -1 || !bizagi.features.enableOldBusinessPoliciesAdministration) {\n        self.deleteMenuOption(\"BusinessPolicies\");\n      }\n\n      if ($.inArray(\"BusinessPolicies\", authorized) !== -1 && bizagi.features.enableNewBusinessPoliciesAdministration) {\n        self.params.options.menuData.unshift({\n          categoryKey: \"Vocabularies\",\n          categoryClassName: \"icon-vocabulary\",\n          categoryName: self.getResource(\"workportal-widget-admin-business-policies-vocabulary\"),\n          categoryUrl: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_BUSINESS_POLICES,\n          typeIcon: \"svg\" });\n\n      }\n\n      if (bizagi.util.isEnableFeature(\"enableUserPermissionsReportDownload\") && $.inArray(\"Userpermissionsreport\", authorized) !== -1) {\n        self.params.options.menuData.unshift({\n          categoryKey: \"UserPermissionReport\",\n          categoryClassName: \"icon-user-report\",\n          categoryName: self.getResource(\"workportal-menu-submenu-UserPermissionReport\"),\n          categoryUrl: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_USER_PERMISSION_REPORT,\n          typeIcon: \"svg\" });\n\n      }\n\n      if ($.inArray(\"UserAdmin\", authorized) !== -1) {\n        self.params.options.menuData.unshift({\n          categoryKey: \"UserAdmin\",\n          categoryClassName: \"bz-icon-users-outline\",\n          categoryName: self.getResource(\"workportal-menu-submenu-UserAdmin\"),\n          categoryUrl: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_USERS_ADMINISTRATION });\n\n      }\n\n      if ($.inArray(\"Stakeholder\", authorized) != -1) {\n        self.params.options.menuData.push({\n          categoryKey: \"StakeholderAdmin\",\n          categoryClassName: \"bz-icon-stakeholders-outline\",\n          categoryName: self.getResource(\"workportal-menu-submenu-StakeholderAdmin\"),\n          categoryUrl: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_STAKEHOLDERS });\n\n      }\n\n      if ($.inArray(\"EntityAdmin\", authorized) != -1) {\n        self.params.options.menuData.unshift({\n          categoryKey: \"EntityAdmin\",\n          categoryClassName: \"bz-icon-database-outline\",\n          categoryName: self.getResource(\"workportal-menu-submenu-EntityAdmin\"),\n          categoryUrl: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_ENTITIES });\n\n      }\n\n      //create the new menu option using the old categoryKey\n      if ($.inArray(\"AuthenticationLogQuery\", authorized) != -1) {\n        self.params.options.menuData.push({\n          categoryKey: \"AuthenticationLogQuery\",\n          categoryClassName: \"bz-icon-authentication-outline\",\n          categoryName: self.getResource(\"workportal-menu-submenu-AuthenticationLogQuery\"),\n          categoryUrl: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_AUTHENTICATION_LOG });\n\n      }\n\n      if ($.inArray(\"EncryptionAdmin\", authorized) != -1) {\n        self.params.options.menuData.push({\n          categoryKey: \"EncryptionAdmin\",\n          categoryClassName: \"bz-icon-lock-outline\",\n          categoryName: self.getResource(\"workportal-menu-submenu-EncryptionAdmin\"),\n          categoryUrl: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_ENCRYPT_PASSWORDS });\n\n      }\n\n      if ($.inArray(\"UserPendingRequests\", authorized) != -1) {\n        self.params.options.menuData.push({\n          categoryKey: \"UserPendingRequests\",\n          categoryClassName: \"bz-icon-unlock-outline\",\n          categoryName: self.getResource(\"workportal-menu-submenu-UserPendingRequests\"),\n          categoryUrl: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_USERS_REQUESTS });\n\n      }\n\n      if ($.inArray(\"CaseAdmin\", authorized) != -1) {\n        self.params.options.menuData.push({\n          categoryKey: \"CaseAdmin\",\n          categoryClassName: \"bz-icon-case-outline\",\n          categoryName: self.getResource(\"workportal-menu-submenu-CaseAdmin\"),\n          categoryUrl: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_CASE_SEARCH });\n\n      }\n\n      if ($.inArray(\"UnlockFormsAdmin\", authorized) != -1) {\n        self.params.options.menuData.push({\n          categoryKey: \"UnlockFormsAdmin\",\n          categoryName: self.getResource(\"workportal-menu-submenu-UnlockFormsAdmin\"),\n          categoryUrl: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_UNLOCK_FORMS });\n\n      }\n\n      if ($.inArray(\"AsynchronousWorkitemRetries\", authorized) != -1) {\n        self.params.options.menuData.push({\n          categoryKey: \"AsynchronousWorkitemRetries\",\n          categoryClassName: \"bz-icon-asynchronous-outline\",\n          categoryName: self.getResource(\"workportal-menu-submenu-AsynchronousWorkitemRetries\"),\n          categoryUrl: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_ASYNC_ACTIVITIES });\n\n      }\n\n      if ($.inArray(\"UserDefaultAssignation\", authorized) != -1) {\n        self.params.options.menuData.push({\n          categoryKey: \"UserDefaultAssignation\",\n          categoryClassName: \"bz-icon-user-manage-outline\",\n          categoryName: self.getResource(\"workportal-menu-submenu-UserDefaultAssignation\"),\n          categoryUrl: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_DEFAULTS_ASSIGNATION_USER });\n\n\n      }\n\n      if ($.inArray(\"Profiles\", authorized) != -1) {\n        self.params.options.menuData.push({\n          categoryKey: \"Profiles\",\n          categoryClassName: \"bz-icon-user-outline\",\n          categoryName: self.getResource(\"workportal-menu-submenu-Profiles\"),\n          categoryUrl: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_USER_PROFILES });\n\n\n      }\n\n      if ($.inArray(\"AlarmAdmin\", authorized) != -1) {\n        self.params.options.menuData.push({\n          categoryKey: \"AlarmAdmin\",\n          categoryClassName: \"bz-icon-alarm-outline\",\n          categoryName: self.getResource(\"workportal-menu-submenu-AlarmAdmin\"),\n          categoryUrl: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_ALARMS });\n\n      }\n\n      if ($.inArray(\"Licenses\", authorized) != -1) {\n        self.params.options.menuData.push({\n          categoryKey: \"Licenses\",\n          categoryClassName: \"bz-icon-license-outline\",\n          categoryName: self.getResource(\"workportal-menu-submenu-Licenses\"),\n          categoryUrl: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_USER_LICENSES });\n\n      }\n\n      if ($.inArray(\"GRDimensionAdmin\", authorized) != -1) {\n        self.params.options.menuData.push({\n          categoryKey: \"GRDimensionAdmin\",\n          categoryClassName: \"bz-icon-dimension-outline\",\n          categoryName: self.getResource(\"workportal-menu-submenu-GRDimensionAdmin\"),\n          categoryUrl: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_DIMENSIONS });\n\n      }\n\n      if ($.inArray(\"DocumentTemplates\", authorized) != -1) {\n        self.params.options.menuData.push({\n          categoryKey: \"DocumentTemplates\",\n          categoryClassName: \"bz-icon-admin-template-outline\",\n          categoryName: self.getResource(\"workportal-menu-submenu-DocumentTemplates\"),\n          categoryUrl: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_DOCUMENT_TEMPLATES });\n\n      }\n\n      if ($.inArray(\"ProcessAdmin\", authorized) != -1) {\n        self.params.options.menuData.push({\n          categoryKey: \"ProcessAdmin\",\n          categoryClassName: \"bz-icon-case-time-outline\",\n          categoryName: self.getResource(\"workportal-menu-submenu-ProcessAdmin\"),\n          categoryUrl: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_PROCESSES });\n\n      }\n\n      if ($.inArray(\"Holidays\", authorized) != -1) {\n        self.params.options.menuData.push({\n          categoryKey: \"Holidays\",\n          categoryName: self.getResource(\"workportal-menu-submenu-holidays\"), //\"Holidays Calendar\",\n          categoryClassName: \"bz-icon-holidays-outline\",\n          categoryUrl: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_HOLIDAYS });\n\n      }\n\n      if ($.inArray(\"ProjectName\", authorized) != -1) {\n        self.params.options.menuData.push({\n          categoryKey: \"ProjectName\",\n          categoryName: self.getResource(\"workportal-menu-submenu-ProjectName\"),\n          categoryClassName: \"bz-icon-project-name-outline\",\n          categoryUrl: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_PROJECTNAME });\n\n      }\n\n      if ($.inArray(\"OAuthApplications\", authorized) != -1) {\n        self.params.options.menuData.push({\n          categoryKey: \"OAuthApplications\",\n          categoryName: self.getResource(\"workportal-menu-submenu-OAuth2Applications\"),\n          categoryClassName: \"bz-icon-admin-template-outline\",\n          categoryUrl: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_OAUTH2APPLICATIONS });\n\n      }\n\n      if ($.inArray(\"Multilanguage\", authorized) != -1) {\n        self.params.options.menuData.push({\n          categoryKey: \"LanguageAdmin\",\n          categoryClassName: \"bz-icon-world-outline\",\n          categoryName: self.getResource(\"workportal-menu-submenu-LanguageAdmin\"),\n          categoryUrl: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_LANGUAGE });\n\n      }\n\n      if ($.inArray(\"AdhocProcessAdmin\", authorized) != -1) {\n        self.params.options.menuData.push({\n          categoryKey: \"AdhocProcessAdmin\",\n          categoryClassName: \"bz-icon-bz-light-box\",\n          categoryName: self.getResource(\"workportal-menu-submenu-AdhocProcessAdmin\"),\n          categoryUrl: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_ADHOC_PROCESSES });\n\n      }\n\n      if ($.inArray(\"AdhocEntityAdmin\", authorized) != -1) {\n        self.params.options.menuData.push({\n          categoryKey: \"AdhocEntityAdmin\",\n          categoryClassName: \"bz-icon-bz-edit-entity\",\n          categoryName: self.getResource(\"workportal-menu-submenu-AdhocEntityAdmin\"),\n          categoryUrl: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_ADHOC_ENTITIES });\n\n      }\n\n      if ($.inArray(\"AdhocCreateProcess\", authorized) != -1) {\n        self.params.options.menuData.push({\n          categoryKey: \"AdhocCreateProcess\",\n          categoryClassName: \"bz-icon bz-icon-reload\",\n          categoryName: self.getResource(\"workportal-menu-submenu-AdhocCreateProcess\"),\n          categoryUrl: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_ADHOC_CREATE_PROCESS });\n\n      }\n\n      if ($.inArray(\"AdhocUserGroupAdmin\", authorized) != -1) {\n        self.params.options.menuData.push({\n          categoryKey: \"AdhocUserGroupAdmin\",\n          categoryClassName: \"bz-icon-bz-user-jobs\",\n          categoryName: self.getResource(\"workportal-menu-submenu-AdhocUserGroupAdmin\"),\n          categoryUrl: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_ADHOC_USER_GROUPS });\n\n      }\n\n      if ($.inArray(\"UserDelegates\", authorized) != -1) {\n        self.params.options.menuData.push({\n          categoryKey: \"UsersDelegation\",\n          categoryClassName: \"bz-icon bz-icon-group\",\n          categoryName: self.getResource(\"workportal-menu-submenu-UserDelegation\"),\n          categoryUrl: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_USERS_DELEGATION });\n\n      }\n\n\n      if ($.inArray(\"ErrorLogs\", authorized) != -1) {\n        self.params.options.menuData.push({\n          categoryKey: \"ErrorLogs\",\n          categoryClassName: \"icon-error-logs\",\n          categoryName: self.getResource(\"workportal-menu-submenu-ErrorLogs\"),\n          categoryUrl: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_ERROR_LOGS,\n          typeIcon: \"svg\" });\n\n      }\n\n      if ($.inArray(\"AdminSmartInbox\", authorized) != -1 && bizagi.util.isEnableFeature(\"enableSmartInbox\")) {\n        self.params.options.menuData.push({\n          categoryKey: \"AdminSmartInbox\",\n          categoryClassName: \"bz-icon bz-icon-group\",\n          categoryName: self.getResource(\"workportal-menu-submenu-adminsmartinbox\", \"Smart Inbox\"),\n          categoryUrl: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_SMARTINBOX });\n\n      }\n\n\n      //add the callback for each new widget\n      callBack.UserAdmin =\n      callBack.StakeholderAdmin =\n      callBack.AuthenticationLogQuery =\n      callBack.EncryptionAdmin =\n      callBack.UserPendingRequests =\n      callBack.UnlockFormsAdmin =\n      callBack.AsynchronousWorkitemRetries =\n      callBack.UserDefaultAssignation =\n      callBack.Profiles =\n      callBack.AlarmAdmin =\n      callBack.Licenses =\n      callBack.GRDimensionAdmin =\n      callBack.DocumentTemplates =\n      callBack.ProcessAdmin =\n      callBack.LanguageAdmin =\n      callBack.EntityAdmin =\n      callBack.AdhocProcessAdmin =\n      callBack.AdhocEntityAdmin =\n      callBack.AdhocUserGroupAdmin =\n      callBack.AdhocCreateProcess =\n      function (args) {\n        args = args || {};\n\n        $.extend(args, {\n          showCloseButton: false });\n\n\n        if (args.id === \"Licenses\" || args.id === \"AdhocProcessAdmin\") {\n          $.extend(args, {\n            maximize: false });\n\n        }\n\n        self.showCustomWidgetPopup(args);\n      };\n      callBack.CaseAdmin = function (args) {var _$$extend;\n        args = args || {};\n        args = $.extend(true, args, (_$$extend = {\n          showCloseButton: false,\n          title: self.getResource(\"workportal-menu-submenu-CaseAdmin\"),\n          height: 780 }, _defineProperty(_$$extend, \"showCloseButton\",\n        false), _defineProperty(_$$extend, \"id\",\n        \"CaseAdmin\"), _$$extend));\n\n\n        self.showCustomWidgetPopup(args);\n      };\n      callBack.UserPermissionReport = function (args) {\n        args = args || {};\n        args = $.extend(true, args, {\n          showCloseButton: false,\n          title: self.getResource(\"workportal-menu-submenu-UserPermissionReport\"),\n          height: 410,\n          width: \"650px\",\n          maximize: false,\n          id: \"UserPermissionReport\" });\n\n\n        self.showCustomWidgetPopup(args);\n      };\n      callBack.Holidays = function (args) {var _$$extend2;\n        args = args || {};\n        args = $.extend(true, args, (_$$extend2 = {\n          showCloseButton: false,\n          title: self.getResource(\"workportal-menu-submenu-holidays\"),\n          width: \"1080px\",\n          height: 910 }, _defineProperty(_$$extend2, \"showCloseButton\",\n        false), _defineProperty(_$$extend2, \"id\",\n        \"Holidays\"), _$$extend2));\n\n\n        self.showCustomWidgetPopup(args);\n      };\n\n      callBack.OAuthApplications = function (args) {var _$$extend3;\n        args = args || {};\n        args = $.extend(true, args, (_$$extend3 = {\n          showCloseButton: false,\n          title: self.getResource(\"workportal-menu-submenu-OAuth2Applications\"),\n          width: \"980px\",\n          height: 700 }, _defineProperty(_$$extend3, \"showCloseButton\",\n        false), _defineProperty(_$$extend3, \"id\",\n        \"OAuthApplications\"), _$$extend3));\n\n\n        self.showCustomWidgetPopup(args);\n      };\n\n      callBack.ProjectName = function (args) {var _$$extend4;\n        args = args || {};\n        args = $.extend(true, args, (_$$extend4 = {\n          showCloseButton: false,\n          title: self.getResource(\"workportal-menu-submenu-ProjectName\"),\n          width: \"600px\",\n          height: 400 }, _defineProperty(_$$extend4, \"showCloseButton\",\n        false), _defineProperty(_$$extend4, \"id\",\n        \"ProjectName\"), _$$extend4));\n\n\n        self.showCustomWidgetPopup(args);\n      };\n\n\n      callBack.UsersDelegation = function (args) {var _$$extend5;\n        args = args || {};\n        args = $.extend(true, args, (_$$extend5 = {\n          showCloseButton: false,\n          title: self.getResource(\"workportal-menu-submenu-UserDelegation\"),\n          width: \"740px\",\n          height: 910 }, _defineProperty(_$$extend5, \"showCloseButton\",\n        false), _defineProperty(_$$extend5, \"id\",\n        \"UsersDelegation\"), _$$extend5));\n\n\n        self.showCustomWidgetPopup(args);\n      };\n\n      callBack.ErrorLogs = function (args) {\n        args = args || {};\n\n        var options = {};\n        options.showCloseButton = false;\n        options.title = self.getResource(\"workportal-menu-submenu-ErrorLogs\");\n        options.id = \"ErrorLogs\";\n        options.maximize = true;\n\n        if (window.innerWidth > 1200) {\n          options.width = 1000;\n        } else {\n          options.maximized = true;\n        }\n\n        args = $.extend(true, args, options);\n\n        self.showCustomWidgetPopup(args);\n      };\n\n      callBack.BusinessPolicies = function (args) {\n        self.showContentPopup(args.url, args.title, args.id, true);\n\n      };\n      callBack.Vocabularies = function (args) {\n        self.loadBusinessPolicesWidget();\n      };\n\n    } catch (e) {\n\n    } // Nothing todo, just skip this option in menu\n\n    //Get List with categories\n    data[\"listmenu\"] = self.getCathegoriesMenuList();\n\n    var render = $.tmpl(listTemplate, data);\n\n    listContainer.append(render);\n    self.showBreadCrumb(listContainer);\n    self.eventHandlerGoBackBreadCrumb(listContainer.parent().parent());\n\n    // Bind sub menu\n    if (!self.params.options.customClickHandler) {\n      $(\"li\", listContainer).click(function (event) {\n        //---- Click on the items of the list of parents of category groups\n        if ($(this).hasClass(\"ui-bizagi-workportal-widget-menu-parent-item-li\")) {\n          event.preventDefault();\n          event.stopPropagation();\n          self.eventHandlerCategoryGroupsParent($(this));\n\n        } else {//---- Click on the items of the list of childs of category groups\n\n          var url = $(this).find(\"#categoryUrl\").val();\n          var title = $(this).find(\".title\").text();\n          var id = $(this).data('id') || '';\n          self.eventHandlerCategoryGroupsChildrenWithoutCustomClick(url, title, id, callBack);\n\n        }\n\n        //-----\n      });\n\n    } else {\n\n      self.checkIsAlive();\n      $(\"li\", listContainer).click(function () {\n        //---- Click on the items of the list of parents of category groups\n        if ($(this).hasClass(\"ui-bizagi-workportal-widget-menu-parent-item-li\")) {\n          self.eventHandlerCategoryGroupsParent($(this));\n\n        } else {//---- Click on the items of the list of childs of category groups\n          var id = $(this).data(\"id\");\n          bizagi.loader.start(\"admin\").then(function () {\n            bizagi.workportal.desktop.popup.closePopupInstance();\n            self.params.options.customClickHandler(id);\n          });\n        }\n      });\n\n    }\n\n  },\n  /**\r\n      * show the child breadCrumb and show the display name of the parent\r\n      * @param {Jquery Element} Jparent \r\n      */\n  eventHandlerCategoryGroupsParent: function eventHandlerCategoryGroupsParent(Jparent) {\n    var categoryName = Jparent.data(\"id\");\n    var categoryDisplayName = Jparent.find(\".title\").text();\n    var container = Jparent.parent().parent();\n    $(\".ui-bizagi-workportal-widget-menu-child-item.child_of_\" + categoryName, container).show();\n    $(\".modalMenuBt .breadCrumb .breadCrumb_child\").css(\"display\", \"inline-block\").text(\"> \" + categoryDisplayName);\n    $(\".ui-bizagi-workportal-widget-menu-parent-item\").hide();\n  },\n\n  /**\r\n      * return the List with categories or not\r\n      */\n  getCathegoriesMenuList: function getCathegoriesMenuList() {\n    var self = this;\n    var menuList = self.params.options.menuData;\n    //menuListAdmin has cathegories\n    if ($(self.params.options.sourceElement).attr(\"id\") == \"menuListAdmin\") {\n      var categoriesGroupsChildrenList = self.getCategoriesGroupsChildren(self.params.options.menuData);\n      menuList = self.getMenuList(categoriesGroupsChildrenList);\n    }\n    return menuList;\n  },\n\n  /**\r\n      * if the menu has breadCrumb shows it\r\n      */\n  showBreadCrumb: function showBreadCrumb() {\n    var self = this;\n    if (self.isAdminMenu())\n    $(\"#categoryTree.categoryTree.breadCrumb\", self.content).show();\n  },\n\n  /**\r\n      * return true if the menu to show is admin\r\n      */\n  isAdminMenu: function isAdminMenu() {\n    var self = this;\n    return $(self.params.options.sourceElement).attr(\"id\") == \"menuListAdmin\";\n  },\n\n  eventHandlerGoBackBreadCrumb: function eventHandlerGoBackBreadCrumb(container) {\n    $(\".breadCrumb .breadCrumb_admin_parent\", container).click(function () {\n      $(\".ui-bizagi-workportal-widget-menu-child-item\", container).hide();\n      $(\".breadCrumb .breadCrumb_child\", container).hide();\n      $(\".ui-bizagi-workportal-widget-menu-parent-item\", container).show();\n    });\n  },\n  eventHandlerCategoryGroupsChildrenWithoutCustomClick: function eventHandlerCategoryGroupsChildrenWithoutCustomClick(url, title, id, callBack) {\n    var self = this;\n    self.checkIsAlive();\n\n    if (bizagi.util.isIE11() || bizagi.util.isEdge()) {\n      localStorage.setItem('auxBizagiAuthentication', window.sessionStorage.bizagiAuthentication);\n    }\n    //prevent message open popup on browser\n    var windowOpenBlank;\n    if (url.indexOf('ThemeBuilder') !== -1) {\n      windowOpenBlank = window.open(url, '_blank');\n      return;\n    }\n\n    if (url.toLowerCase().indexOf('adhoc') !== -1) {\n      self.loadDashboardQuickProcess(url);\n      return;\n    }\n    bizagi.util.startLoading();\n    bizagi.loader.start(\"admin\").then(function () {\n      // Find call back\n      if (callBack[id]) {\n        callBack[id]({\n          windowOpenBlank: windowOpenBlank,\n          url: url,\n          title: title,\n          id: id });\n\n      } else {\n        self.showContentPopup(url, title, id, true);\n      }\n      bizagi.workportal.desktop.popup.closePopupInstance();\n    });\n  },\n\n  getCategoriesGroupsChildren: function getCategoriesGroupsChildren(menuList) {\n    var self = this;\n    var childrenList = [];\n    var groupCategoryChildren1 = [];\n    var groupCategoryChildren2 = [];\n    var groupCategoryChildren3 = [];\n    var groupCategoryChildren4 = [];\n    var groupCategoryChildren5 = [];\n    for (var i = 0; i < menuList.length; i++) {\n      if (menuList[i].categoryKey === \"AlarmAdmin\" ||\n      menuList[i].categoryKey === \"AsynchronousWorkitemRetries\" ||\n      menuList[i].categoryKey === \"CaseAdmin\" ||\n      menuList[i].categoryKey === \"GRDimensionAdmin\" ||\n      menuList[i].categoryKey === \"EntityAdmin\" ||\n      menuList[i].categoryKey === \"BusinessPolicies\" ||\n      menuList[i].categoryKey === \"Vocabularies\" ||\n      menuList[i].categoryKey === \"ProcessAdmin\") {\n        groupCategoryChildren1.push(menuList[i]);\n      }\n\n      if (menuList[i].categoryKey === \"AuthenticationLogQuery\" ||\n      menuList[i].categoryKey === \"Holidays\" ||\n      menuList[i].categoryKey === \"UserPendingRequests\" ||\n      menuList[i].categoryKey === \"Licenses\" ||\n      menuList[i].categoryKey === \"UserDefaultAssignation\" ||\n      menuList[i].categoryKey === \"Profiles\" ||\n      menuList[i].categoryKey === \"StakeholderAdmin\" ||\n      menuList[i].categoryKey === \"UserAdmin\") {\n        groupCategoryChildren2.push(menuList[i]);\n      }\n\n      if (menuList[i].categoryKey === \"LanguageAdmin\" ||\n      menuList[i].categoryKey === \"ProjectName\" ||\n      menuList[i].categoryKey === \"ThemeBuilder\" ||\n      menuList[i].categoryKey === \"AdminSmartInbox\") {\n        groupCategoryChildren3.push(menuList[i]);\n      }\n\n      if (menuList[i].categoryKey === \"OAuthApplications\" ||\n      menuList[i].categoryKey === \"EncryptionAdmin\" ||\n      menuList[i].categoryKey === \"UserPermissionReport\") {\n        groupCategoryChildren4.push(menuList[i]);\n      }\n\n      if (menuList[i].categoryKey === \"ErrorLogs\") {\n        groupCategoryChildren5.push(menuList[i]);\n      }\n    }\n\n    childrenList.push(self.sortChildList(groupCategoryChildren1));\n    childrenList.push(self.sortChildList(groupCategoryChildren2));\n    childrenList.push(self.sortChildList(groupCategoryChildren3));\n    childrenList.push(self.sortChildList(groupCategoryChildren4));\n    childrenList.push(self.sortChildList(groupCategoryChildren5));\n\n    return childrenList;\n  },\n  sortChildList: function sortChildList(list) {\n    var sortList = list.sort(function (a, b) {\n      return a.categoryName > b.categoryName ? 1 : -1;\n    });\n\n    return sortList;\n  },\n  sortParentList: function sortParentList(list) {\n    var sortList = list.sort(function (a, b) {\n      return a.displayName > b.displayName ? 1 : -1;\n    });\n\n    return sortList;\n  },\n  getMenuList: function getMenuList(childrenList) {\n    var self = this;\n    var menulist = [];\n\n    if (childrenList[0].length > 0) {\n      var groupCategory1 = self.getItemMenuList(bizagi.localization.getResource(\"workportal-menu-submenu-ProcessManagement\"),\n      \"groupCategory1\", false, \"icon-process-management\", true, childrenList[0]);\n      menulist.push(groupCategory1);\n    }\n\n    if (childrenList[1].length > 0) {\n      var groupCategory2 = self.getItemMenuList(bizagi.localization.getResource(\"workportal-menu-submenu-UserManagement\"),\n      \"groupCategory2\", false, \"icon-user-configuration\", true, childrenList[1]);\n      menulist.push(groupCategory2);\n    }\n\n    if (childrenList[2].length > 0) {\n      var groupCategory3 = self.getItemMenuList(bizagi.localization.getResource(\"workportal-menu-submenu-Customization\"),\n      \"groupCategory3\", false, \"icon-customization\", true, childrenList[2]);\n      menulist.push(groupCategory3);\n    }\n\n    if (childrenList[3].length > 0) {\n      var groupCategory4 = self.getItemMenuList(bizagi.localization.getResource(\"workportal-menu-submenu-Security\"),\n      \"groupCategory4\", false, \"icon-security\", true, childrenList[3]);\n      menulist.push(groupCategory4);\n    }\n\n    if (childrenList[4].length > 0) {\n      var groupCategory5 = self.getItemMenuList(bizagi.localization.getResource(\"workportal-menu-submenu-System\"),\n      \"groupCategory5\", false, \"icon-system\", true, childrenList[4]);\n      menulist.push(groupCategory5);\n    }\n    return self.sortParentList(menulist);\n  },\n\n  getItemMenuList: function getItemMenuList(displayName, name, typeIcon, className, categoryClassName, listmenu_children) {\n    var groupCategory = [];\n    groupCategory.displayName = displayName;\n    groupCategory.name = name;\n    groupCategory.typeIcon = typeIcon;\n    groupCategory.className = className;\n    groupCategory.categoryClassName = categoryClassName;\n    groupCategory.listmenu_children = listmenu_children;\n    return groupCategory;\n  },\n\n  loadDashboardQuickProcess: function loadDashboardQuickProcess(url) {\n    var self = this;\n    bizagi.workportal.desktop.popup.closePopupInstance();\n    if (url === \"adhocUserGroups\") {\n      if ($(document).find('iframe').length > 0 && $(document).find('iframe')[0].contentWindow.location.href.indexOf('quickprocess') !== -1) {\n        bizagi.util.liveProcessesEvents.routeEvents.route = '/manage-groups';\n        document.dispatchEvent(bizagi.util.liveProcessesEvents.routeEvents);\n      } else {\n        self.publish(\"changeWidget\", {\n          widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_PROFLY,\n          data: {\n            route: \"manage-groups\",\n            params: { module: \"none\" } } });\n\n\n      }\n    } else if (url === \"adhocProcesses\") {\n      self.publish(\"changeWidget\", {\n        widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_PROFLY });\n\n    } else if (url === \"adhocCreateProcess\") {\n      if ($(document).find('iframe').length > 0 && ($(document).find('iframe')[0].contentWindow.location.href.indexOf('quickprocess') !== -1 || $(document).find('iframe')[0].contentWindow.location.href.indexOf('quick-process') !== -1)) {\n        document.dispatchEvent(bizagi.util.liveProcessesEvents.newLiveProcess);\n        bizagi.workportal.desktop.popup.closePopupInstance();\n      } else {\n        var widgetParameters = {\n          widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADHOC_CREATE_PROCESS,\n          closeVisible: false,\n          maximize: false,\n          modalParameters: {\n            height: 310,\n            title: bizagi.localization.getResource(\"workportal-quickprocess-create-qp\"),\n            width: 400 } };\n\n\n        self.publish(\"showDialogWidget\", widgetParameters);\n      }\n    }\n  },\n\n  /**\r\n      * Load Business Polices Widget\r\n      */\n  loadBusinessPolicesWidget: function loadBusinessPolicesWidget() {\n    var self = this;\n    self.publish(\"changeWidget\", {\n      widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_BUSINESS_POLICES });\n\n  },\n  /*\r\n      *   Determines if a window must be show always in quirks mode for IE\r\n      */\n  needsQuicksMode: function needsQuicksMode(url) {\n\n    // If an old url is not working ok, put the url in the following filters\n    if (url.toLowerCase().indexOf(\"businesspoliciesselector.aspx\") >= 0)\n    return true;\n    if (url.toLowerCase().indexOf(\"bamprocess.aspx\") >= 0)\n    return true;\n    if (url.toLowerCase().indexOf(\"bamtask.aspx\") >= 0)\n    return true;\n    if (url.toLowerCase().indexOf(\"analyticsprocess.aspx\") >= 0)\n    return true;\n    if (url.toLowerCase().indexOf(\"analyticssensor.aspx\") >= 0)\n    return true;\n\n    return false;\n  },\n  /*\r\n      *   Get the page hacks in order to work properly in each case\r\n      */\n  getPageHacks: function getPageHacks(url, title) {\n    var self = this;\n    var callback;\n    var hackParams = {\n      title: title };\n\n\n    //if (url.toLowerCase().indexOf(\"casesearch.aspx\") > 0 || url.toLowerCase().indexOf(\"AsynchDisabledWorkitems.aspx\") > 0) {\n    // Hack for  Admin / Processes\n    callback = function callback(params) {\n      // This script will execute inside the iframe context\n      this.openBACase = function (idCase, sHref) {\n        var workitem = null;\n        if (sHref.indexOf(\"idWorkitem=\") > -1) {\n          workitem = sHref.substring(sHref.indexOf(\"idWorkitem=\") + 11);\n          workitem = workitem.substring(0, workitem.indexOf(\"&\"));\n        }\n        // Executes the act on\n        params.controller.publish(\"executeAction\", {\n          action: params.routingAction,\n          idCase: idCase,\n          idWorkItem: workitem });\n\n\n        // close dialog\n        params.controller.publish(\"closeCurrentDialog\");\n      };\n\n      this.changeToWidget = function (widget) {\n        params.controller.publish(\"changeWidget\", {\n          widgetName: widget || params.bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID });\n\n\n        // close dialog\n        params.controller.publish(\"closeCurrentDialog\");\n      };\n    };\n\n    // Set hack params\n    hackParams = $.extend(hackParams, {\n      routingAction: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,\n      bizagi: bizagi });\n\n    // }\n\n    return {\n      callback: callback,\n      params: hackParams };\n\n  },\n  /*\r\n      *  Show modal window with static url\r\n      **/\n  showContentPopup: function showContentPopup(url, title, id, maximized) {\n    var self = this;\n    id = id || \"\";\n    var defer = $.Deferred();\n    defer.done(function () {\n      bizagi.util.stopLoading();\n    });\n    // Define hacks for each page\n    var hack = self.getPageHacks(url, title);\n\n    if (bizagi.util.isIE() && bizagi.util.getInternetExplorerVersion() < 10 && self.needsQuicksMode(url)) {\n      // Shows a popup window\n      self.publish(\"showOldWindow\", {\n        url: url,\n        windowParameters: $.extend(hack.params, {\n          controller: self,\n          afterLoad: hack.callback }) });\n\n\n      bizagi.util.stopLoading();\n    } else {\n      // Show a normal popup\n\n      // If the same popup is opened close it\n      if (self.currentPopup == \"genericiframe\") {\n        bizagi.workportal.desktop.popup.closePopupInstance();\n        return;\n      }\n\n      // Shows a popup widget\n      self.currentPopup = \"genericiframe\";\n      self.publish(\"showDialogWidget\", {\n        widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_GENERICIFRAME,\n        widgetURL: url,\n        injectCss: [\".ui-bizagi-old-render*\", \".\" + title, \"@font-face\"],\n        modalParameters: {\n          refreshInbox: false,\n          id: id,\n          title: title,\n          dialogOpened: defer },\n\n        maximized: maximized,\n        afterLoad: hack.callback,\n        afterLoadParams: hack.params });\n\n    }\n  },\n\n  /**\r\n      * Open dialog\r\n      * \r\n      * @param {*} args {widget, title, id, width, height}\r\n      */\n  showWidgetPopup: function showWidgetPopup(args) {\n    var self = this;\n    args = args || {};\n    var defer = $.Deferred();\n    var settings = {\n      widget: args.widget,\n      title: args.title,\n      id: args.id,\n      width: args.width,\n      height: args.height };\n\n\n    defer.done(function () {\n      bizagi.util.stopLoading();\n    });\n    self.publish(\"showDialogWidget\", {\n      widgetName: settings.widget,\n      closeVisible: false,\n      modalParameters: {\n        title: settings.title,\n        width: settings.width,\n        height: settings.height,\n        showCloseButton: false,\n        dialogOpened: defer } });\n\n\n  },\n  showCustomWidgetPopup: function showCustomWidgetPopup(params) {\n    var self = this;\n    var defer = $.Deferred();\n    defer.done(function () {\n      bizagi.util.stopLoading();\n    });\n    var defaultWidth = $(window).width() - $(window).width() * 15 / 100 + \"px\";\n    var widgetParameters = {\n      widgetName: params.url,\n      data: { \"idCase\": params.id },\n      closeVisible: params.showCloseButton,\n      modalParameters: {\n        title: params.title,\n        width: params.width || defaultWidth,\n        height: params.height,\n        id: params.id,\n        dialogOpened: defer },\n\n      maximize: typeof params.maximize !== \"undefined\" ? params.maximize : true,\n      maximized: typeof params.maximized !== \"undefined\" ? params.maximized : false };\n\n\n    if (params.buttons) {\n      widgetParameters.buttons = params.buttons;\n    }\n\n    self.publish(\"showDialogWidget\", widgetParameters);\n  },\n  deleteMenuOption: function deleteMenuOption(categoryKey) {\n    var self = this;\n    var menuData = self.params.options.menuData;\n\n    for (var i = 0; i < menuData.length; i++) {\n      if (menuData[i].categoryKey == categoryKey) {\n        self.params.options.menuData.splice(i, 1);\n      }\n    }\n  },\n\n  /*\r\n      * Regresa un arreglo con los submenu autorizados\r\n      */\n  getSubItemsAuthorized: function getSubItemsAuthorized() {\n    var self = this;\n    var result = [];\n    $.each(self.params.options.menuData, function (k, v) {\n      result.push(v.categoryKey);\n    });\n    return result;\n  },\n\n  checkIsAlive: function checkIsAlive() {\n    var self = this,\n    params = {\n      idUser: bizagi.currentUser.idUser,\n      fromDate: Date.now(),\n      toDate: Date.now() };\n\n    self.dataService.ping(params);\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /*\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: BizAgi Desktop Queries Dialog implementation\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: Juan Pablo Crossley\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   ???\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\n// Extends itself\nbizagi.workportal.widgets.genericiframe.extend(\"bizagi.workportal.widgets.genericiframe\", {}, {\n\n  /*\r\n                                                                                                *   To be overriden in each device to apply layouts\r\n                                                                                                */\n  postRender: function postRender() {\n    var self = this;\n    var content = self.getContent();\n    var iframe = $(\"iframe\", content);\n    var injectCss = self.params.injectCss ? self.params.injectCss : [\".ui-bizagi-old-render*\", \"@font-face\"];\n\n    iframe.parent().addClass('loading-iframe');\n    iframe.hide();\n\n\n    iframe.load(function () {\n      iframe.parent().removeClass('loading-iframe');\n      iframe.fadeIn();\n    });\n\n    if (self.params.afterLoad && self.params.afterLoad != null) {\n      iframe.load(function () {\n        iframe.callInside(\n        self.params.afterLoad,\n        $.extend(self.params.afterLoadParams, {\n          controller: self }));\n\n\n      });\n    }\n\n    if (injectCss != undefined) {\n      var css = \"\";\n      var cssList = \"\";\n\n      if (_typeof(injectCss) == \"object\") {\n        $.each(injectCss, function (key, value) {\n          css += bizagi.getStyle(value);\n          cssList += value.replace(\".\", \"\") + \" \";\n        });\n      } else {\n        css += bizagi.getStyle(injectCss);\n        cssList += injectCss.replace(\".\", \"\");\n      }\n\n      // Inject css within iframe\n      iframe.load(function () {\n        // inject css\n        var iframeContent = $(this).contents();\n\n        // Append css\n        $('head', iframeContent).append(\"<style type='text/css'>\" + css + \"</style>\");\n        $('body', iframeContent).addClass(cssList.replace(\"*\", \"\"));\n\n        // Hack position fixed for IE8 in quirks mode\n        /*if ($.browser.msie && parseInt($.browser.version, 10) <= 8) {\r\n            var fixWizard = '<!--[if lte IE 8]> <style type=\"text/css\"> #floater1Div { position: absolute; bottom: auto; right: auto; top: expression( ( -10 - floater1Div.offsetHeight + ( document.documentElement.clientHeight ? document.documentElement.clientHeight : document.body.clientHeight ) + ( ignoreMe = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop ) ) + \"px\" ); left: expression( ( -20 - floater1Div.offsetWidth + ( document.documentElement.clientWidth ? document.documentElement.clientWidth : document.body.clientWidth ) + ( ignoreMe2 = document.documentElement.scrollLeft ? document.documentElement.scrollLeft : document.body.scrollLeft ) ) + \"px\" ); } #divClose { bottom: -3px; left: 0; } </style> <![endif]--><!--[if lte IE 7]> <link href=\"../../css/estilos.css\" type=\"text/css\" rel=\"stylesheet\" /> <![endif]-->';\r\n            $('head', iframeContent).append(fixWizard);\r\n        }*/\n\n        // Add classes for IE8 in quirks mode\n        $('body input', iframeContent).each(function () {\n          var $self = $(this),\n          inputType = $self.attr('type') ? 'ui-' + $self.attr('type') : '',\n          inputName = $self.attr('name') ? 'ui-' + $self.attr('name').replace(/_\\d+$/, '') : '',\n          inputClasses = inputType + ' ' + inputName;\n\n          $self.addClass(inputClasses);\n        });\n\n        // Remove borders for buttons\n        $('body img[src$=\"Button.gif\"]', iframeContent).parent().remove();\n      }).attr('frameborder', '0');\n    }\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /*\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: BizAgi Workportal Search Controller\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: Diego Parra (based on Edward Morales version)\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -\tThis script will provide base library for search cases\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\n// Auto extend\nbizagi.workportal.widgets.search.extend(\"bizagi.workportal.widgets.search\", {}, {\n\n  /*\r\n                                                                                   *\t Constructor\r\n                                                                                   */\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    // Define variables\n    self.radNumber = params.referrerParams.radNumber || params.radNumber || \"\";\n    self.isAdhocProcess = true;\n    self.adhocIds = [];\n    //Load templates\n    self.loadTemplates({\n      \"inbox-grid-cases\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.inbox.grid\").concat(\"#ui-bizagi-workportal-widget-inbox-grid-cases\"),\n      \"inbox-common-case-summary\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.inbox.common\").concat(\"#ui-bizagi-workportal-widget-inbox-common-case-description\"),\n      \"inbox-common-case-summary-subprocess\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.inbox.common\").concat(\"#ui-bizagi-workportal-widget-inbox-common-case-description-subprocess\"),\n      \"inbox-common-case-summary-assignees\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.inbox.common\").concat(\"#ui-bizagi-workportal-widget-inbox-common-case-description-assignees\"),\n      \"inbox-common-case-summary-events\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.inbox.common\").concat(\"#ui-bizagi-workportal-widget-inbox-common-case-description-events\"),\n      \"inbox-common-case-summary-oldrender\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.inbox.common\").concat(\"#ui-bizagi-workportal-widget-inbox-common-oldrender\"),\n      \"search-details\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.search\").concat(\"#ui-bizagi-workportal-widget-search-details\"),\n      useNewEngine: false });\n\n\n    self._startQuickActions();\n  },\n\n  /**\r\n      * @override\r\n      */\n  postRender: function postRender() {\n    var self = this;\n\n    // Set templates\n    self.searchTemplate = self.workportalFacade.getTemplate(\"search\");\n    self.searchDetailsTemplate = self.getTemplate(\"search-details\");\n    self.searchPagination = self.workportalFacade.getTemplate(\"inbox-common-pagination-grid\");\n    self.caseSummaryTemplate = self.getTemplate(\"inbox-common-case-summary\");\n    self.caseSummaryTemplateSubprocess = self.getTemplate(\"inbox-common-case-summary-subprocess\");\n    self.caseSummaryTemplateAssigness = self.getTemplate(\"inbox-common-case-summary-assignees\");\n    self.caseSummaryTemplateEvents = self.getTemplate(\"inbox-common-case-summary-events\");\n    self.paginationTemplate = self.workportalFacade.getTemplate(\"inbox-common-pagination-inbox\");\n\n    self.renderSearch();\n  },\n\n  renderSearch: function renderSearch() {\n    var self = this;\n    var content = self.getContent();\n    var contentDetails = $(\"#searchDetails\", content);\n    var pdata = {};\n    var pageSelector = $(\"#casesPagination\", content);\n    var nElemToShow = 14;\n    var totalPages = self.params.data.cases.totalPages;\n    var actualPage = self.params.data.cases.page;\n    var AdhocProcessId = null;\n\n\n    $(self.params.data.cases.rows).each(function (key, value) {\n      if (!value.isAdhocProcess) value.isAdhocProcess = false;\n      if (value.isAdhocProcess) {\n        self.adhocIds.push({ 'caseId': value.id, 'processId': value.idAdhocProcess });\n      }\n      value.enableTimelineByProcessType = self.isAvailableTimelineByProcessType(value.isAdhocProcess);\n    });\n    contentDetails.empty();\n\n    // Define title of module\n    self.params.data.title = self.params.data.title || bizagi.localization.getResource(\"workportal-widget-search\");\n\n    // Set title\n    $(\".title\", content).html(self.params.data.title);\n\n    // Convert null to empty \"\" fields\n    for (i = 0; i < self.params.data.cases.rows.length; i++) {\n      for (j = 0; j < self.params.data.cases.rows[i].fields.length; j++) {\n        self.params.data.cases.rows[i].fields[j] = self.params.data.cases.rows[i].fields[j] == null ? \"\" : self.params.data.cases.rows[i].fields[j];\n      }\n      // when user search a case\n      self.params.data.cases.rows[i].graphicQuery = bizagi.menuSecurity.GraphicQuery;\n      self.params.data.cases.rows[i].timeLine = bizagi.menuSecurity.TimeLine && bizagi.override.enableFeatureShowTimelineButton;\n    }\n\n    self.params.data.cases.groupByCaseNumber = bizagiConfig.groupByCaseNumber;\n    self.params.data.cases.haveQuickActions = self.params.data.cases.quickActions && self.params.data.cases.quickActions.length > 0;\n\n    $.when(\n    $.tmpl(self.searchDetailsTemplate, self.params.data.cases, {\n      setFormat: self.formatValue,\n      isArray: self.isArray,\n      formatCategories: self.formatCategories,\n      isDate: bizagi.util.isDate,\n      getRadNumberColumnIndex: function getRadNumberColumnIndex() {\n        var data = this.data;\n        var index = -1;\n        for (var i = 0, l = data.columnTitle.length; i < l; i++) {\n          if (data.columnTitle[i].fieldName == \"I_RadNumber\") {\n            index = i;\n          }\n        }\n        return index;\n      },\n      showColumn: function showColumn(columnIndex) {\n        var index = this.getRadNumberColumnIndex();\n        return this.data.groupByCaseNumber && index == columnIndex ? \" style=display:none; \" : \"\";\n      },\n      createGroupedHeader: function createGroupedHeader(rowIndex) {\n        var data = this.data;\n        var result = false;\n        var radNumber = this.getRadNumber(data.rows[rowIndex]);\n        if (data.groupByCaseNumber) {\n          if (rowIndex == 0) {\n            result = true;\n          } else {\n            var previousRadNumber = this.getRadNumber(data.rows[rowIndex - 1]);\n            if (radNumber != previousRadNumber) {\n              result = true;\n            }\n          }\n        }\n        return result;\n      },\n      getRadNumber: function getRadNumber(row) {\n        var index = this.getRadNumberColumnIndex();\n        return index >= 0 ? row.fields[index] : \"\";\n      } }).\n    appendTo(contentDetails)).done(function () {\n\n      var _dataCases = self.params.data.cases;\n      if (_dataCases.haveQuickActions) {\n        var workItemsInfo = self._getWorkItemsInfo(_dataCases.columnTitle, _dataCases.rows);\n        self._QuickActionsRenderIn(contentDetails, workItemsInfo, _dataCases.quickActions);\n      }\n\n      // Format invariant dates\n      bizagi.util.formatInvariantDate(content, self.getResource(\"dateFormat\") + \" \" + self.getResource(\"timeFormat\"));\n\n      // bind activities and process\n      $(\".ui-bizagi-wp-app-inbox-activity-name\", contentDetails).click(function () {\n        var idCase = $(this).find(\"#idCase\").val() || \"\";\n        var idWorkItem = $(this).find(\"#idWorkItem\").val() || \"\";\n        var idTask = $(this).find(\"#idTask\").val() || \"\";\n        var idWorkflow = $(this).closest('tr').data(\"idworkflow\");\n\n        if (idWorkItem === \"0\" || idTask === \"0\") {\n          return;\n        }\n\n        // fix for SUITE-8792\n        if (idWorkItem != \"\" && idTask != \"\") {\n          if (bizagi.cache === undefined) {\n            bizagi.cache = {};\n          } else {\n            if (bizagi.cache[idCase] !== undefined) {\n              if (bizagi.cache[idCase].idWorkitem == parseInt(idWorkItem) && bizagi.cache[idCase].idTask == parseInt(idTask) && bizagi.cache[idCase].isComplex !== undefined) {\n                idWorkItem = \"\";\n              }\n            }\n          }\n        }\n\n        // Executes routing action\n        self.publish(\"executeAction\", {\n          action: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,\n          idCase: idCase,\n          idWorkItem: idWorkItem,\n          idTask: idTask,\n          idWorkflow: idWorkflow,\n          eventAsTasks: true,\n          onlyUserWorkItems: \"true\" });\n\n      });\n\n\n      $(\".ui-bizagi-wp-app-inbox-grouped\", contentDetails).bind(\"click\", function () {\n        var radNumber = $(this).data(\"radnumber\");\n        var referrerParams = {\n          taskState: self.params.taskState,\n          idWorkItem: $(this).find(\"#idWorkItem\").val(),\n          idCase: $(this).find(\"#idCase\").val(),\n          idTask: $(this).find(\"#idTask\").val(),\n          onlyFavorites: self.onlyFavorites,\n          idWorkflow: self.idWorkflow,\n          referrer: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID };\n\n\n        $.extend(bizagi.referrerParams, bizagi.referrerParams, referrerParams);\n\n        var idCase = $(this).find(\"#idCase\").val();\n\n        self.publish(\"executeAction\", {\n          action: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,\n          idCase: idCase });\n\n      });\n\n\n      // Add click to timeline icon\n      $(\".js-show-timeline\", contentDetails).click(function (event) {\n        var idCase = $(this).parent().find(\"#idCase\").val();\n        var caseNumber = $.trim($(this).closest(\"tr\").find(\".I_RadNumber\").text());\n        self.showTimeLine({ radNumber: caseNumber, idCase: idCase });\n      });\n\n      // Add click to view workflow\n      $(\".ui-bizagi-wp-app-inbox-cases-ico-view\", contentDetails).click(function () {\n        var idCase = $(this).parent().find(\"#idCase\").val();\n        var idWorkflow = $(this).closest(\"tr\").data(\"idworkflow\");\n        var isAdhoc = $(this).closest(\"tr\").data(\"isadhoc\");\n        if (isAdhoc) {\n          for (var i = 0; i < self.adhocIds.length; i++) {\n            if (parseInt(idCase) == self.adhocIds[i].caseId) {\n              processId = self.adhocIds[i].processId;\n              self.showGraphicQuery({ idCase: idCase, idWorkflow: idWorkflow, isAdhoc: true, idProcess: processId });\n              break;\n            }\n          }\n        } else {\n          self.showGraphicQuery({ idCase: idCase, idWorkflow: idWorkflow });\n        }\n        return false;\n      });\n      $(\".inbox-grid-tooltip-button\", content).tooltip();\n      // show case summary\n      $(\".workonitRow\", content).click(function () {\n        // Call routing action\n        var idCase = $(this).parents(\"td\").first().find(\"#idCase\").val();\n        var idWorkflow = $(this).closest(\"tr\").data(\"idworkflow\");\n        $(\".inbox-grid-tooltip-button\", content).tooltip(\"close\");\n        self.showCase(idCase, idWorkflow);\n      });\n      /* End lines by CAAA */\n\n      // Bind favorites start\n      $(contentDetails).delegate(\".ui-bizagi-wp-app-inbox-cases-start\", \"click\", function (e) {\n        e.stopPropagation();\n        var options = {};\n        var elmnt = this;\n        $(elmnt).removeClass(\"ui-bizagi-wp-app-inbox-cases-start\").addClass(\"ui-bizagi-wp-app-inbox-cases-start-wait\");\n\n        // check if its favorite\n        if ($(elmnt).parent().find(\"#isFavorite\").val() == \"false\") {\n          options = {\n            idObject: $(elmnt).parent().find(\"#idCase\").val(),\n            favoriteType: \"CASES\" };\n\n          $.when(\n          self.dataService.addFavorite(options)).\n          done(function (data) {\n            $(elmnt).parent().find(\"#guidFavorite\").val(data[\"idFavorites\"]);\n            $(elmnt).removeClass(\"bz-icon-star-outline\").addClass(\"bz-icon-star\");\n            $(elmnt).parent().find(\"#isFavorite\").val(\"true\");\n            $(elmnt).removeClass(\"ui-bizagi-wp-app-inbox-cases-start-wait\").addClass(\"ui-bizagi-wp-app-inbox-cases-start\");\n          });\n        } else {\n          options = {\n            idObject: $(elmnt).parent().find(\"#guidFavorite\").val(),\n            favoriteType: \"CASES\" };\n\n          $.when(\n          self.dataService.delFavorite(options)).\n          done(function (data) {\n            if (data[\"deleted\"] == \"true\" || data[\"deleted\"] == true) {\n              $(elmnt).parent().find(\"#guidFavorite\").val(\"\");\n              $(elmnt).removeClass(\"bz-icon-star\").addClass(\"bz-icon-star-outline\");\n              $(elmnt).parent().find(\"#isFavorite\").val(\"false\");\n              $(elmnt).removeClass(\"ui-bizagi-wp-app-inbox-cases-start-wait\").addClass(\"ui-bizagi-wp-app-inbox-cases-start\");\n            }\n          });\n        }\n      });\n\n      // Bind action to ungroup cases from folders\n      $('.folders-case-ungroup', contentDetails).click(function () {\n\n        // Used to remove the row later on\n        var itemSelector = this;\n\n        var options = {\n          idFolder: $(this).data('folder-id'),\n          idCase: $(this).data('case-id') };\n\n\n        var confirmationMsg = bizagi.localization.getResource('workportal-search-desasociate-case');\n\n        $.when(bizagi.showConfirmationBox(confirmationMsg, null, false)).\n        done(function () {\n          // This is supposed to be the \"trutsy\" part of the confirmation however the concept is\n          // not properly used, anyways is done like this because Diego likes deferreds\n          // for a lot of things - Andres Valencia\n\n          // Call service to ungroup case from folders\n          $.when(\n          self.dataService.dissasociateCaseFromFolder(options)).\n          done(function (data) {\n\n            // Whilst this is not the most elegant solution to remove the desasociated case from the current folder\n            // it can act as a temporary \"hack\" to avoid the search widget to refresh and lose context as it is happening so far\n\n            $(itemSelector).closest('tr').remove();\n\n            // Confirm that case has been removed from folder\n          });\n        }).\n        fail(function () {\n          // And this is supposed to be the \"falsy\" part of the confirmation dialog\n          // also a misused true/false concept - Andres Valencia\n        });\n      });\n\n      $(\".ui-bizagi-wp-app-inbox-bt-back\", content).click(function () {\n        var widget = bizagi.referrerParams.referrerBackButton || bizagi.cookie('bizagiDefaultWidget');\n        // switch referer widget \n        switch (widget) {\n          case \"inbox\":\n            self.publish(\"changeWidget\", {\n              widgetName: widget,\n              restoreStatus: true });\n\n            break;\n          case \"inboxGrid\":\n\n            self.publish(\"changeWidget\", {\n              widgetName: widget,\n              restoreStatus: true });\n\n            break;\n          case \"search\":\n            self.publish(\"executeAction\", {\n              action: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_SEARCH,\n              radNumber: bizagi.referrerParams.radNumber || \"\",\n              page: bizagi.referrerParams.page || 1,\n              onlyUserWorkItems: false });\n\n            break;\n          case \"queryform\":\n            self.publish(\"showDialogWidget\", {\n              widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_QUERYFORM,\n              queryFormAction: \"loadPrevious\" });\n\n            break;\n          case \"folders\":\n            var url = bizagi.referrerParams.urlParameters + \"&page=\" + bizagi.referrerParams.page;\n            $.when(self.dataService.getCasesByFolder(url)).\n            done(function (data) {\n              data.customized = true;\n              data.urlParameters = bizagi.referrerParams.urlParameters;\n\n              // Define title of widget\n              data.title = bizagi.referrerParams.name;\n\n              // Set a flag here to tell the search widget that must show the ungroup case from folder (icon).\n              data.casesGroupedByFolder = true;\n              data.idFolder = bizagi.referrerParams.id;\n\n              self.publish(\"changeWidget\", {\n                widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_SEARCH,\n                data: data,\n                referrerParams: {} });\n\n            });\n            break;\n          case \"activityform\":\n            self.publish(\"executeAction\", {\n              action: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,\n              idCase: bizagi.referrerParams.idCase || undefined,\n              idWorkItem: bizagi.referrerParams.idWorkItem || undefined,\n              idTask: bizagi.referrerParams.idTask || undefined,\n              eventAsTasks: true,\n              onlyUserWorkItems: \"true\" });\n\n            break;\n          default:\n            self.publish(\"changeWidget\", {\n              widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX,\n              restoreStatus: true });\n\n            break;}\n\n      });\n\n      // sort columns\n      $(\".sortColumnsData\", contentDetails).click(function () {\n        var params = {\n          action: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_SEARCH,\n          radNumber: $(this).find(\"#radNumber\").val(),\n          orderFieldName: $(this).find(\"#orderFieldName\").val(),\n          orderType: $(this).find(\"#orderType\").val() == 0 ? 1 : 0,\n          order: $(this).find(\"#order\").val(),\n          onlyUserWorkItems: false };\n\n        self.publish(\"executeAction\", params);\n      });\n\n      // Define Pagination\n\n\n      // Show/hide pagination\n      pdata.pagination = totalPages > 1 ? true : false;\n      pdata.page = self.params.referrerParams.page || actualPage;\n\n      // set total pages\n      pdata.pages = {};\n      var pageToshow = nElemToShow > totalPages ? totalPages : nElemToShow;\n      for (var i = 1; i <= pageToshow; i++) {\n        pdata.pages[i] = {\n          \"pageNumber\": i };\n\n      }\n\n      // Set style pagination\n      pdata[\"gridPagination\"] = \"gridCasePagination\";\n      pdata.previousPage = actualPage > 1 ? actualPage - 1 : 1;\n      pdata.nextPage = actualPage < totalPages ? actualPage + 1 : totalPages;\n      pdata.totalPages = totalPages;\n\n      var paginationHtml = $.tmpl(self.searchPagination, pdata).html();\n\n      // Get template\n      $(pageSelector).append(paginationHtml);\n\n      // Crate pagination control\n      $(\"ul\").bizagiPagination({\n        maxElemShow: 50,\n        totalPages: pdata.totalPages,\n        actualPage: pdata.page,\n        listElement: $(\"ul\", pageSelector),\n        clickCallBack: self.changeProcess.bind(self) });\n\n\n      contentDetails.bizagiScrollbar({\n        autohide: false });\n\n    });\n  },\n\n  /**\r\n      * Update the data showed in search\r\n      * @param {*} options \r\n      */\n  changeProcess: function changeProcess(options) {\n    var self = this;\n    var page = options && options.page ? options.page : 1;\n    // Check if action from search or folders\n    if (self.params.data.customized != undefined && self.params.data.customized) {\n      var url = self.params.data.urlParameters + \"&page=\" + page;\n      $.when(self.dataService.getCustomizedColumnsData({\n        smartfoldersParameters: url })).\n\n      done(function (data) {\n        // Define widget customized for pagination purposes\n        data.customized = true;\n        data.urlParameters = self.params.data.urlParameters;\n\n        // Define title of widget\n        data.title = self.params.data.title;\n\n        bizagi.referrerParams.page = page;\n\n        // Set a flag here to tell the search widget that must show the ungroup case from folder (icon).\n        data.casesGroupedByFolder = true;\n        data.idFolder = self.params.data.id;\n        self.publish(\"changeWidget\", {\n          widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_SEARCH,\n          data: data,\n          referrerParams: {} });\n\n      });\n    } else {\n      self.publish(\"executeAction\", {\n        action: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_SEARCH,\n        radNumber: self.params.referrerParams.radNumber,\n        page: page,\n        onlyUserWorkItems: false });\n\n    }\n  },\n\n  /**\r\n       * Validate if the timeline icon should be shown or not, depending on features endpoint\r\n       */\n  isAvailableTimelineByProcessType: function isAvailableTimelineByProcessType(isAdhocProcess) {\n    return !isAdhocProcess ||\n    isAdhocProcess && bizagi.util.isEnableFeature(\"enableTimelineOnLiveProcesses\");\n  },\n\n  /*\r\n      *   Shows a popup with the case information\r\n      */\n  showCase: function showCase(idCase, idWorkflow) {\n    var self = this;\n    var content = self.getContent();\n    var caseSummaryContainer = $(\"#contentDesc\", content);\n    var cache = {};\n    var htmlContent = \"\";\n    // Update internal variable\n    self.idCase = idCase;\n    caseSummaryContainer.empty();\n    // Don't search data when there is no case\n    if (self.idCase == 0) {\n      return;\n    }\n    // Render Form Tab\n    $.when(\n    self.dataService.summaryCaseDetails({\n      idCase: self.idCase })).\n\n    done(function (data) {\n      data.hasComments = data.hasComments == 'true' ? true : false;\n\n      // Get security\n      var security = new bizagi.workportal.command.security(self.dataService);\n      data.graphicQuery = security.checkSecurityPerm(\"GraphicQuery\");\n\n      data.enableFeatureShowTimelineButton = bizagi.override.enableFeatureShowTimelineButton;\n      data.enableTimelineByProcessType = self.isAvailableTimelineByProcessType(data.isAdhocProcess);\n\n      if (data.currentState && data.currentState.length > 0) {\n        data.currentState.forEach(function (currentState) {\n          if (!currentState.idTask) {\n            currentState.idTask = 0;\n          }\n          if (!currentState.state) {\n            currentState.state = currentState.displayName || \" \";\n          }\n        });\n      }\n\n      if (data.process === \"undefined\" || data.process === \"\" || typeof data.process === \"undefined\") {\n        data.process = false;\n      }\n\n      if (data.processPath === \"undefined\" || data.processPath === \"\" || typeof data.processPath === \"undefined\") {\n        data.processPath = false;\n      }\n\n      var renderedTemplate = $.tmpl(self.caseSummaryTemplate, $.extend(data, { security: bizagi.menuSecurity })).appendTo(caseSummaryContainer);\n      self.callTaskDescription(data, renderedTemplate);\n\n      // Format invariant dates\n      bizagi.util.formatInvariantDate(content, self.getResource(\"dateFormat\") + \" \" + self.getResource(\"timeFormat\"));\n\n      // Delegate events for parent process\n      $(\"#details\", renderedTemplate).delegate(\".summaryLink\", \"click\", function () {\n        self.routingExecute($(this));\n        caseSummaryDialog.dialog('close');\n      });\n      var caseSummaryDialog = renderedTemplate;\n      // Fix for tab height\n      $('.scrollSummary', caseSummaryDialog).css({ 'height': '', 'overflow-y': 'visible' });\n\n      // jQuery-ui tabs\n      $(\"#ui-bizagi-details-tabs\", content).tabs({\n        active: -1,\n        create: function create(event, ui) {\n          $(this).tabs(\"option\", \"active\", 0);\n        },\n        \"activate\": function activate(event, ui) {\n\n          var panel = ui == undefined ? \"formSummary\" : ui.newPanel.attr('id');\n          switch (panel) {\n            /* 0 = details\r\n                           * 1 = formSummary\r\n                           * 2 = subprocess\r\n                           * 3 = assigness\r\n                           * 4 = events\r\n                           * 5 = activities\r\n                           **/\n            case \"comments\":\n              if (cache[\"comments\"] == undefined) {\n                // Extend render with comments\n                $.extend(self, {}, bizagi.workportal.comments);\n\n                // Define canvas\n                data.canvas = $(\"#comments\");\n                data.readOnly = true;\n\n                $.when(self.renderComments(data)).\n                done(function (htmlContent) {\n                  cache[\"comments\"] = htmlContent;\n                });\n              }\n              bizagi.util.setContext({\n                commentsFocus: true });\n\n              break;\n            case \"formSummary\":\n              if (cache[\"formSummary\"] == undefined) {\n                var canvas = $(\"#formSummary\", caseSummaryContainer);\n\n                // Define action when render form has not been migrated\n                canvas.bind(\"oldrenderintegration\", function (e) {\n                  if (e.isPropagationStopped()) {\n                    return;\n                  }\n                  e.stopPropagation();\n\n                  var template = self.getTemplate(\"inbox-common-case-summary-oldrender\");\n                  var data = {};\n\n                  bizagi.oldrenderevent = true; // has been loaded\n                  var eventMethod = window.addEventListener ? \"addEventListener\" : \"attachEvent\";\n                  var eventer = window[eventMethod];\n                  var messageEvent = eventMethod == \"attachEvent\" ? \"onmessage\" : \"message\";\n\n                  // Listen to message from child window\n                  eventer(messageEvent, function (e) {\n                    e.stopPropagation();\n                    self.publish(\"executeAction\", {\n                      action: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,\n                      idCase: e.data });\n\n                  }, false);\n\n                  // Define workitem and idtask\n                  $.when(self.dataService.getWorkitems({\n                    idCase: self.idCase,\n                    onlyUserWorkItems: true,\n                    eventAsTasks: true })).\n                  done(function (getWorkitems) {\n                    // verify workitem, in some cases these variables are not available\n                    if (_typeof(getWorkitems.workItems) == \"object\" && getWorkitems.workItems.length >= 1) {\n                      // Case Open\n                      var idWorkitem = getWorkitems.workItems[0]['idWorkItem'];\n                      var idTask = getWorkitems.workItems[0]['idTask'];\n                      var idCase = getWorkitems.workItems[0]['idCase'];\n                      data.url = self.dataService.serviceLocator.getUrl(\"old-render\") + \"?PostBack=1&idCase=\" + idCase + \"&idWorkitem=\" + idWorkitem + \"&idTask=\" + idTask + \"&isSummary=1\";\n                    } else {\n                      // Case closed\n                      data.url = self.dataService.serviceLocator.getUrl(\"old-render\") + \"?PostBack=1&idCase=\" + self.idCase + \"&isSummary=1\";\n                    }\n\n                    // Render content\n                    canvas.empty();\n                    $.tmpl(template, data).appendTo(canvas);\n                    //Set styles\n                    self.iframeOldRender($(\"iframe\", canvas));\n                  });\n                });\n\n                var params = {\n                  idCase: self.idCase };\n\n\n                $.when(self.dataService.getCaseFormsRenderVersion(params)).\n                done(function (formsVersion) {\n                  if (formsVersion.formsRenderVersion == 1) {\n                    canvas.trigger(\"oldrenderintegration\");\n                  } else {\n                    $.when(\n                    self.renderSummaryForm($(\"#formSummary\", renderedTemplate))).\n                    done(function () {\n                      htmlContent = $(\"#formSummary\", renderedTemplate).html();\n                      cache[\"formSummary\"] = htmlContent;\n                    });\n                  }\n                });\n              }\n              break;\n            case \"subprocess\":\n              if (cache[\"subprocess\"] == undefined) {\n                $.when(\n                self.dataService.summarySubProcess({\n                  idCase: self.idCase })).\n\n                done(function (subprocess) {\n                  htmlContent = $.tmpl(self.caseSummaryTemplateSubprocess, subprocess);\n                  htmlContent.appendTo($(\"#subprocess\", renderedTemplate));\n                  cache[\"subprocess\"] = htmlContent;\n                  // Define Events for subprocess tab\n                  htmlContent.delegate(\".summaryLink\", \"click\", function () {\n                    self.routingExecute($(this));\n                    caseSummaryDialog.dialog('close');\n                  });\n                });\n              }\n              break;\n            case \"assignees\":\n\n              if (cache[\"assignees\"] == undefined) {\n                $.when(\n                self.dataService.summaryAssigness({\n                  idCase: self.idCase,\n                  preview: true })).\n\n                done(function (assignees) {\n                  // Generates  lists of unique assignees for Events\n                  var eventsUniqueList = [];\n                  $.each(assignees.events.split(\", \"), function (i, el) {\n                    if ($.inArray(el, eventsUniqueList) === -1) eventsUniqueList.push(el);\n                  });\n                  assignees.events = eventsUniqueList.join(\", \");\n\n                  // Generates  lists of unique assignees for activities\n                  var activitiesUniqueList = [];\n                  $.each(assignees.activities.split(\", \"), function (i, el) {\n                    if ($.inArray(el, activitiesUniqueList) === -1) activitiesUniqueList.push(el);\n                  });\n                  assignees.activities = activitiesUniqueList.join(\", \");\n                  htmlContent = $.tmpl(self.caseSummaryTemplateAssigness, assignees);\n                  htmlContent.appendTo($(\"#assignees\", renderedTemplate));\n                  cache[\"assignees\"] = htmlContent;\n                });\n              }\n              break;\n            case \"events\":\n              if (cache[\"events\"] == undefined) {\n                $.when(\n                self.dataService.summaryCaseEvents({\n                  idCase: self.idCase })).\n\n                done(function (events) {\n                  htmlContent = $.tmpl(self.caseSummaryTemplateEvents, events);\n                  htmlContent.appendTo($(\"#events\", renderedTemplate));\n                  cache[\"events\"] = htmlContent;\n                  htmlContent.delegate(\".summaryLink\", \"click\", function () {\n                    self.routingExecute($(this));\n                    caseSummaryDialog.dialog('close');\n                  });\n                });\n              }\n              break;}\n\n        } });\n\n\n      $(\".workonitRow\", renderedTemplate).button();\n      $(\".inbox-grid-tooltip-button\", content).tooltip();\n      // Add click to view workflow\n      $(\"#ui-bizagi-wp-app-inbox-description-container .ui-bizagi-wp-app-inbox-cases-ico-view\", content).click(function () {\n        if (self.adhocIds.length > 0) {\n          for (var i = 0; i < self.adhocIds.length; i++) {\n            if (idCase == self.adhocIds[i].caseId) {\n              self.showGraphicQuery({\n                idCase: idCase,\n                idWorkflow: idWorkflow,\n                isAdhoc: true,\n                idProcess: self.adhocIds[i].processId });\n\n            } else {\n              self.showGraphicQuery({ idCase: idCase, idWorkflow: idWorkflow });\n            }\n          }\n        } else {\n          self.showGraphicQuery({ idCase: idCase, idWorkflow: idWorkflow });\n        }\n\n      });\n      // Bind events for events and process on summary case\n      $(\".workonitRow\", renderedTemplate).click(function () {\n        var currentWorkitemId = $(this).parent().find(\"#idWorkItem\").val();\n\n        var referrerParams = {\n          taskState: self.params.taskState,\n          idWorkItem: currentWorkitemId,\n          idCase: data.idCase,\n          onlyFavorites: self.onlyFavorites,\n          idWorkflow: self.idWorkflow,\n          referrer: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID };\n\n        $.extend(bizagi.referrerParams, bizagi.referrerParams, referrerParams);\n        // Executes routing action\n        caseSummaryDialog.dialog('close');\n\n        var workitem = $.grep(data.currentState, function (item, i) {\n          return item.idWorkItem == currentWorkitemId;\n        })[0];\n\n        var workitemCaseId;\n        if (workitem && workitem.idCase)\n        workitemCaseId = workitem.idCase; //Only to access a Subprocess from parent.\n        else\n          workitemCaseId = data.idCase;\n\n        self.publish(\"executeAction\", {\n          action: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,\n          idCase: workitemCaseId,\n          idWorkflow: idWorkflow,\n          idWorkItem: currentWorkitemId });\n\n      });\n\n      // Add click to timeline icon\n      $(\".js-show-timeline\", renderedTemplate).click(function (event) {\n        var caseNumber = $.trim($(this).closest(\"div.ui-bizagi-wp-app-inbox-processes-title\").find(\"span.js-case-number\").text());\n        self.showTimeLine({ radNumber: caseNumber, idCase: idCase });\n      });\n\n      // Set buttons\n      var buttons = {};\n      buttons[bizagi.localization.getResource(\"workportal-case-dialog-box-close\")] = function () {\n        caseSummaryContainer.empty();\n        renderedTemplate.remove();\n        $(\"#ui-bizagi-wp-app-inbox-description-container\").remove();\n      };\n      // Show dialog\n      caseSummaryDialog.dialog({\n        modal: true,\n        title: data.process,\n        width: 1000,\n        height: 600,\n        draggable: true,\n        resizable: true,\n        buttons: buttons,\n        close: function close() {\n          caseSummaryContainer.empty();\n          renderedTemplate.remove();\n          $(\"#ui-bizagi-wp-app-inbox-description-container\").remove();\n        } });\n\n      //$(\"\").add(\"workonitRow\")\n    });\n  },\n\n  /**\r\n      * \r\n      * Call task description widget \r\n      */\n\n  callTaskDescription: function callTaskDescription(data, summary) {\n    var self = this;\n    var width = 720;\n    var taskDescriptionParams = {\n      classNeedsModal: \"task_description_needs_modal\",\n      width: width };\n\n    new bizagi.workportal.widgets.task.description(self.workportalFacade, self.dataService, taskDescriptionParams).renderManyTasksDescription(data.currentState, summary);\n  },\n\n  /*\r\n      *   Misc method to format cell values\r\n      */\n  formatRequest: function formatRequest(value) {\n    return value;\n  },\n  /**\r\n      * Misc method to render categories\r\n      */\n  formatCategories: function formatCategories(value) {\n    return value;\n  },\n  isArray: function isArray(value) {\n    if (_typeof(value) == 'object') {\n      return true;\n    } else {\n      return false;\n    }\n  },\n  /*\r\n      *   Renders the summary form inside a given container\r\n      */\n  renderSummaryForm: function renderSummaryForm(container) {\n    var self = this;\n\n    var proxyPrefix = _typeof(self.dataService.serviceLocator.proxyPrefix) != undefined ? self.dataService.serviceLocator.proxyPrefix : \"\";\n\n    bizagi.loader.start(\"rendering\").then(function () {\n      // Load render page\n      var rendering = new bizagi.rendering.facade({ \"proxyPrefix\": proxyPrefix });\n\n      // Executes rendering into render container\n      rendering.execute({\n        canvas: container,\n        summaryForm: true,\n        idCase: self.idCase });\n\n\n      // Keep reference to rendering facade\n      self.renderingFacade = rendering;\n\n      // Resize layout\n      setTimeout(function () {\n        self.resizeLayout();\n      }, 1000);\n    });\n  },\n  /**\r\n      * Inject styles and js into the iframe\r\n      */\n  iframeOldRender: function iframeOldRender(canvas) {\n    var self = this;\n    var iframe;\n    var content = self.getContent();\n    var theme = \"bizagiDefault\";\n    var queryString = bizagi.readQueryString();\n\n    $.each(canvas, function () {\n      if ($(this).is(\"iframe\")) {\n        iframe = $(this);\n      }\n    });\n\n    iframe.load(function () {\n      // inject css\n      var content = $(this).contents();\n\n      // Fixed problem with relative path across the different browsers\n      var cssLocation = $.browser.mozilla || $.browser.webkit ? \"../../css/render_%theme%.css\" : \"css/render_%theme%.css\";\n\n      // Define theme\n      cssLocation = cssLocation.replace(\"%theme%\", queryString[\"theme\"] || theme);\n\n      // Append css\n      $('body', content).append(\"<link type='text/css' rel='stylesheet' href='\" + cssLocation + \"'>\");\n\n      // Append javascript\n      //\t$('head',content).append(\"<script type='text/javascript' src='../../js/renderintegration.js'></script>\");\t\n    });\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /*\r\n                                                                                                                                                                                                                                                                                                                                                                                * jsGrid v1.5.1 (http://js-grid.com)\r\n                                                                                                                                                                                                                                                                                                                                                                                * (c) 2016 Artem Tabalin\r\n                                                                                                                                                                                                                                                                                                                                                                                * Licensed under MIT (https://github.com/tabalinas/jsgrid/blob/master/LICENSE)\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\n(function (window, $, undefined) {\n\n  var JSGRID = \"JSGrid\",\n  JSGRID_DATA_KEY = JSGRID,\n  JSGRID_ROW_DATA_KEY = \"JSGridItem\",\n  JSGRID_EDIT_ROW_DATA_KEY = \"JSGridEditRow\",\n\n  SORT_ORDER_ASC = \"asc\",\n  SORT_ORDER_DESC = \"desc\",\n\n  FIRST_PAGE_PLACEHOLDER = \"{first}\",\n  PAGES_PLACEHOLDER = \"{pages}\",\n  PREV_PAGE_PLACEHOLDER = \"{prev}\",\n  NEXT_PAGE_PLACEHOLDER = \"{next}\",\n  LAST_PAGE_PLACEHOLDER = \"{last}\",\n  PAGE_INDEX_PLACEHOLDER = \"{pageIndex}\",\n  PAGE_COUNT_PLACEHOLDER = \"{pageCount}\",\n  ITEM_COUNT_PLACEHOLDER = \"{itemCount}\",\n\n  EMPTY_HREF = \"javascript:void(0);\";\n\n  var getOrApply = function getOrApply(value, context) {\n    if ($.isFunction(value)) {\n      return value.apply(context, $.makeArray(arguments).slice(2));\n    }\n    return value;\n  };\n\n  var normalizePromise = function normalizePromise(promise) {\n    var d = $.Deferred();\n\n    if (promise && promise.then) {\n      promise.then(function () {\n        d.resolve.apply(d, arguments);\n      }, function () {\n        d.reject.apply(d, arguments);\n      });\n    } else {\n      d.resolve(promise);\n    }\n\n    return d.promise();\n  };\n\n  var defaultController = {\n    loadData: $.noop,\n    insertItem: $.noop,\n    updateItem: $.noop,\n    deleteItem: $.noop };\n\n\n\n  function Grid(element, config) {\n    var $element = $(element);\n\n    $element.data(JSGRID_DATA_KEY, this);\n\n    this._container = $element;\n\n    this.data = [];\n    this.fields = [];\n\n    this._editingRow = null;\n    this._sortField = null;\n    this._sortOrder = SORT_ORDER_ASC;\n    this._firstDisplayingPage = 1;\n\n    this._init(config);\n    this.render();\n  }\n\n  Grid.prototype = {\n    width: \"auto\",\n    height: \"auto\",\n    updateOnResize: true,\n\n    rowClass: $.noop,\n    rowRenderer: null,\n\n    rowClick: function rowClick(args) {\n      if (this.editing) {\n        this.editItem($(args.event.target).closest(\"tr\"));\n      }\n    },\n    rowDoubleClick: $.noop,\n\n    noDataContent: \"Not found\",\n    noDataRowClass: \"jsgrid-nodata-row\",\n\n    heading: true,\n    headerRowRenderer: null,\n    headerRowClass: \"jsgrid-header-row\",\n    headerCellClass: \"jsgrid-header-cell\",\n\n    filtering: false,\n    filterRowRenderer: null,\n    filterRowClass: \"jsgrid-filter-row\",\n\n    inserting: false,\n    insertRowRenderer: null,\n    insertRowClass: \"jsgrid-insert-row\",\n\n    editing: false,\n    editRowRenderer: null,\n    editRowClass: \"jsgrid-edit-row\",\n\n    confirmDeleting: true,\n    deleteConfirm: \"Are you sure?\",\n\n    selecting: true,\n    selectedRowClass: \"jsgrid-selected-row\",\n    oddRowClass: \"jsgrid-row\",\n    evenRowClass: \"jsgrid-alt-row\",\n    cellClass: \"jsgrid-cell\",\n\n    sorting: false,\n    sortableClass: \"jsgrid-header-sortable\",\n    sortAscClass: \"jsgrid-header-sort jsgrid-header-sort-asc\",\n    sortDescClass: \"jsgrid-header-sort jsgrid-header-sort-desc\",\n\n    paging: false,\n    pagerContainer: null,\n    pageIndex: 1,\n    pageSize: 20,\n    pageButtonCount: 15,\n    pagerFormat: \"Pages: {first} {prev} {pages} {next} {last} &nbsp;&nbsp; {pageIndex} of {pageCount}\",\n    pagePrevText: \"Prev\",\n    pageNextText: \"Next\",\n    pageFirstText: \"First\",\n    pageLastText: \"Last\",\n    pageNavigatorNextText: \"...\",\n    pageNavigatorPrevText: \"...\",\n    pagerContainerClass: \"jsgrid-pager-container\",\n    pagerClass: \"jsgrid-pager\",\n    pagerNavButtonClass: \"jsgrid-pager-nav-button\",\n    pagerNavButtonInactiveClass: \"jsgrid-pager-nav-inactive-button\",\n    pageClass: \"jsgrid-pager-page\",\n    currentPageClass: \"jsgrid-pager-current-page\",\n\n    customLoading: false,\n    pageLoading: false,\n\n    autoload: false,\n    controller: defaultController,\n\n    loadIndication: true,\n    loadIndicationDelay: 500,\n    loadMessage: \"Please, wait...\",\n    loadShading: true,\n\n    invalidMessage: \"Invalid data entered!\",\n\n    invalidNotify: function invalidNotify(args) {\n      var messages = $.map(args.errors, function (error) {\n        return error.message || null;\n      });\n\n      window.alert([this.invalidMessage].concat(messages).join(\"\\n\"));\n    },\n\n    onInit: $.noop,\n    onRefreshing: $.noop,\n    onRefreshed: $.noop,\n    onPageChanged: $.noop,\n    onItemDeleting: $.noop,\n    onItemDeleted: $.noop,\n    onItemInserting: $.noop,\n    onItemInserted: $.noop,\n    onItemEditing: $.noop,\n    onItemUpdating: $.noop,\n    onItemUpdated: $.noop,\n    onItemInvalid: $.noop,\n    onDataLoading: $.noop,\n    onDataLoaded: $.noop,\n    onOptionChanging: $.noop,\n    onOptionChanged: $.noop,\n    onError: $.noop,\n\n    invalidClass: \"jsgrid-invalid\",\n\n    containerClass: \"jsgrid\",\n    tableClass: \"jsgrid-table\",\n    gridHeaderClass: \"jsgrid-grid-header\",\n    gridBodyClass: \"jsgrid-grid-body\",\n\n    _init: function _init(config) {\n      $.extend(this, config);\n      this._initLoadStrategy();\n      this._initController();\n      this._initFields();\n      this._attachWindowLoadResize();\n      this._attachWindowResizeCallback();\n      this._callEventHandler(this.onInit);\n    },\n\n    loadStrategy: function loadStrategy() {\n      return this.pageLoading ?\n      new jsGrid.loadStrategies.PageLoadingStrategy(this) :\n      new jsGrid.loadStrategies.DirectLoadingStrategy(this);\n    },\n\n    _initLoadStrategy: function _initLoadStrategy() {\n      this._loadStrategy = getOrApply(this.loadStrategy, this);\n    },\n\n    _initController: function _initController() {\n      this._controller = $.extend({}, defaultController, getOrApply(this.controller, this));\n    },\n\n    renderTemplate: function renderTemplate(source, context, config) {\n      args = [];\n      for (var key in config) {\n        args.push(config[key]);\n      }\n\n      args.unshift(source, context);\n\n      source = getOrApply.apply(null, args);\n      return source === undefined || source === null ? \"\" : source;\n    },\n\n    loadIndicator: function loadIndicator(config) {\n      return new jsGrid.LoadIndicator(config);\n    },\n\n    validation: function validation(config) {\n      return jsGrid.Validation && new jsGrid.Validation(config);\n    },\n\n    _initFields: function _initFields() {\n      var self = this;\n      self.fields = $.map(self.fields, function (field) {\n        if ($.isPlainObject(field)) {\n          var fieldConstructor = field.type && jsGrid.fields[field.type] || jsGrid.Field;\n          field = new fieldConstructor(field);\n        }\n        field._grid = self;\n        return field;\n      });\n    },\n\n    _attachWindowLoadResize: function _attachWindowLoadResize() {\n      $(window).on(\"load\", $.proxy(this._refreshSize, this));\n    },\n\n    _attachWindowResizeCallback: function _attachWindowResizeCallback() {\n      if (this.updateOnResize) {\n        $(window).on(\"resize\", $.proxy(this._refreshSize, this));\n      }\n    },\n\n    _detachWindowResizeCallback: function _detachWindowResizeCallback() {\n      $(window).off(\"resize\", this._refreshSize);\n    },\n\n    option: function option(key, value) {\n      var optionChangingEventArgs,\n      optionChangedEventArgs;\n\n      if (arguments.length === 1)\n      return this[key];\n\n      optionChangingEventArgs = {\n        option: key,\n        oldValue: this[key],\n        newValue: value };\n\n      this._callEventHandler(this.onOptionChanging, optionChangingEventArgs);\n\n      this._handleOptionChange(optionChangingEventArgs.option, optionChangingEventArgs.newValue);\n\n      optionChangedEventArgs = {\n        option: optionChangingEventArgs.option,\n        value: optionChangingEventArgs.newValue };\n\n      this._callEventHandler(this.onOptionChanged, optionChangedEventArgs);\n    },\n\n    fieldOption: function fieldOption(field, key, value) {\n      field = this._normalizeField(field);\n\n      if (arguments.length === 2)\n      return field[key];\n\n      field[key] = value;\n      this._renderGrid();\n    },\n\n    _handleOptionChange: function _handleOptionChange(name, value) {\n      this[name] = value;\n\n      switch (name) {\n        case \"width\":\n        case \"height\":\n          this._refreshSize();\n          break;\n        case \"rowClass\":\n        case \"rowRenderer\":\n        case \"rowClick\":\n        case \"rowDoubleClick\":\n        case \"noDataRowClass\":\n        case \"noDataContent\":\n        case \"selecting\":\n        case \"selectedRowClass\":\n        case \"oddRowClass\":\n        case \"evenRowClass\":\n          this._refreshContent();\n          break;\n        case \"pageButtonCount\":\n        case \"pagerFormat\":\n        case \"pagePrevText\":\n        case \"pageNextText\":\n        case \"pageFirstText\":\n        case \"pageLastText\":\n        case \"pageNavigatorNextText\":\n        case \"pageNavigatorPrevText\":\n        case \"pagerClass\":\n        case \"pagerNavButtonClass\":\n        case \"pageClass\":\n        case \"currentPageClass\":\n        case \"pagerRenderer\":\n          this._refreshPager();\n          break;\n        case \"fields\":\n          this._initFields();\n          this.render();\n          break;\n        case \"data\":\n        case \"editing\":\n        case \"heading\":\n        case \"filtering\":\n        case \"inserting\":\n        case \"paging\":\n          this.refresh();\n          break;\n        case \"loadStrategy\":\n        case \"pageLoading\":\n          this._initLoadStrategy();\n          this.search();\n          break;\n        case \"pageIndex\":\n          this.openPage(value);\n          break;\n        case \"pageSize\":\n          this.refresh();\n          this.search();\n          break;\n        case \"editRowRenderer\":\n        case \"editRowClass\":\n          this.cancelEdit();\n          break;\n        case \"updateOnResize\":\n          this._detachWindowResizeCallback();\n          this._attachWindowResizeCallback();\n          break;\n        case \"invalidNotify\":\n        case \"invalidMessage\":\n          break;\n        default:\n          this.render();\n          break;}\n\n    },\n\n    destroy: function destroy() {\n      this._detachWindowResizeCallback();\n      this._clear();\n      this._container.removeData(JSGRID_DATA_KEY);\n    },\n\n    render: function render() {\n      this._renderGrid();\n      return this.autoload ? this.loadData() : $.Deferred().resolve().promise();\n    },\n\n    _renderGrid: function _renderGrid() {\n      this._clear();\n\n      this._container.addClass(this.containerClass).\n      css(\"position\", \"relative\").\n      append(this._createHeader()).\n      append(this._createBody());\n\n      this._pagerContainer = this._createPagerContainer();\n      this._loadIndicator = this._createLoadIndicator();\n      this._validation = this._createValidation();\n\n      this.refresh();\n    },\n\n    _createLoadIndicator: function _createLoadIndicator() {\n      return getOrApply(this.loadIndicator, this, {\n        message: this.loadMessage,\n        shading: this.loadShading,\n        container: this._container });\n\n    },\n\n    _createValidation: function _createValidation() {\n      return getOrApply(this.validation, this);\n    },\n\n    _clear: function _clear() {\n      this.cancelEdit();\n\n      clearTimeout(this._loadingTimer);\n\n      this._pagerContainer && this._pagerContainer.empty();\n\n      this._container.empty().\n      css({ position: \"\", width: \"\", height: \"\" });\n    },\n\n    _createHeader: function _createHeader() {\n      var $headerRow = this._headerRow = this._createHeaderRow(),\n      $filterRow = this._filterRow = this._createFilterRow(),\n      $insertRow = this._insertRow = this._createInsertRow();\n\n      var $headerGrid = this._headerGrid = $(\"<table>\").addClass(this.tableClass).\n      append($headerRow).\n      append($filterRow).\n      append($insertRow);\n\n      var $header = this._header = $(\"<div>\").addClass(this.gridHeaderClass).\n      addClass(this._scrollBarWidth() ? \"jsgrid-header-scrollbar\" : \"\").\n      append($headerGrid);\n\n      return $header;\n    },\n\n    _createBody: function _createBody() {\n      var $content = this._content = $(\"<tbody>\");\n\n      var $bodyGrid = this._bodyGrid = $(\"<table>\").addClass(this.tableClass).\n      append($content);\n\n      var $body = this._body = $(\"<div>\").addClass(this.gridBodyClass).\n      append($bodyGrid).\n      on(\"scroll\", $.proxy(function (e) {\n        this._header.scrollLeft(e.target.scrollLeft);\n      }, this));\n\n      return $body;\n    },\n\n    _createPagerContainer: function _createPagerContainer() {\n      var pagerContainer = this.pagerContainer || $(\"<div>\").appendTo(this._container);\n      return $(pagerContainer).addClass(this.pagerContainerClass);\n    },\n\n    _eachField: function _eachField(callBack) {\n      var self = this;\n      $.each(this.fields, function (index, field) {\n        if (field.visible) {\n          callBack.call(self, field, index);\n        }\n      });\n    },\n\n    _createHeaderRow: function _createHeaderRow() {\n      if ($.isFunction(this.headerRowRenderer))\n      return $(this.renderTemplate(this.headerRowRenderer, this));\n\n      var $result = $(\"<tr>\").addClass(this.headerRowClass);\n\n      this._eachField(function (field, index) {\n        var $th = this._prepareCell(\"<th>\", field, \"headercss\", this.headerCellClass).\n        append(this.renderTemplate(field.headerTemplate, field)).\n        appendTo($result);\n\n        if (this.sorting && field.sorting) {\n          $th.addClass(this.sortableClass).\n          on(\"click\", $.proxy(function () {\n            this.sort(index);\n          }, this));\n        }\n      });\n\n      return $result;\n    },\n\n    _prepareCell: function _prepareCell(cell, field, cssprop, cellClass) {\n      return $(cell).css(\"width\", field.width).\n      addClass(cellClass || this.cellClass).\n      addClass(cssprop && field[cssprop] || field.css).\n      addClass(field.align ? \"jsgrid-align-\" + field.align : \"\");\n    },\n\n    _createFilterRow: function _createFilterRow() {\n      if ($.isFunction(this.filterRowRenderer))\n      return $(this.renderTemplate(this.filterRowRenderer, this));\n\n      var $result = $(\"<tr>\").addClass(this.filterRowClass);\n\n      this._eachField(function (field) {\n        this._prepareCell(\"<td>\", field, \"filtercss\").\n        append(this.renderTemplate(field.filterTemplate, field)).\n        appendTo($result);\n      });\n\n      return $result;\n    },\n\n    _createInsertRow: function _createInsertRow() {\n      if ($.isFunction(this.insertRowRenderer))\n      return $(this.renderTemplate(this.insertRowRenderer, this));\n\n      var $result = $(\"<tr>\").addClass(this.insertRowClass);\n\n      this._eachField(function (field) {\n        this._prepareCell(\"<td>\", field, \"insertcss\").\n        append(this.renderTemplate(field.insertTemplate, field)).\n        appendTo($result);\n      });\n\n      return $result;\n    },\n\n    _callEventHandler: function _callEventHandler(handler, eventParams) {\n      handler.call(this, $.extend(eventParams, {\n        grid: this }));\n\n\n      return eventParams;\n    },\n\n    reset: function reset() {\n      this._resetSorting();\n      this._resetPager();\n      return this._loadStrategy.reset();\n    },\n\n    _resetPager: function _resetPager() {\n      this._firstDisplayingPage = 1;\n      this._setPage(1);\n    },\n\n    _resetSorting: function _resetSorting() {\n      this._sortField = null;\n      this._sortOrder = SORT_ORDER_ASC;\n      this._clearSortingCss();\n    },\n\n    refresh: function refresh() {\n      this._callEventHandler(this.onRefreshing);\n\n      this.cancelEdit();\n\n      this._refreshHeading();\n      this._refreshFiltering();\n      this._refreshInserting();\n      this._refreshContent();\n      this._refreshPager();\n      this._refreshSize();\n\n      this._callEventHandler(this.onRefreshed);\n    },\n\n    _refreshHeading: function _refreshHeading() {\n      this._headerRow.toggle(this.heading);\n    },\n\n    _refreshFiltering: function _refreshFiltering() {\n      this._filterRow.toggle(this.filtering);\n    },\n\n    _refreshInserting: function _refreshInserting() {\n      this._insertRow.toggle(this.inserting);\n    },\n\n    _refreshContent: function _refreshContent() {\n      var $content = this._content;\n      $content.empty();\n\n      if (!this.data.length) {\n        $content.append(this._createNoDataRow());\n        return this;\n      }\n\n      var indexFrom = this._loadStrategy.firstDisplayIndex();\n      var indexTo = this._loadStrategy.lastDisplayIndex();\n\n      for (var itemIndex = indexFrom; itemIndex < indexTo; itemIndex++) {\n        var item = this.data[itemIndex];\n        $content.append(this._createRow(item, itemIndex));\n      }\n    },\n\n    _createNoDataRow: function _createNoDataRow() {\n      var amountOfFields = 0;\n      this._eachField(function () {\n        amountOfFields++;\n      });\n\n      return $(\"<tr>\").addClass(this.noDataRowClass).\n      append($(\"<td>\").attr(\"colspan\", amountOfFields).\n      append(this.renderTemplate(this.noDataContent, this)));\n    },\n\n    _createRow: function _createRow(item, itemIndex) {\n      var $result;\n\n      if ($.isFunction(this.rowRenderer)) {\n        $result = this.renderTemplate(this.rowRenderer, this, { item: item, itemIndex: itemIndex });\n      } else {\n        $result = $(\"<tr>\");\n        this._renderCells($result, item);\n      }\n\n      $result.addClass(this._getRowClasses(item, itemIndex)).\n      data(JSGRID_ROW_DATA_KEY, item).\n      on(\"click\", $.proxy(function (e) {\n        this.rowClick({\n          item: item,\n          itemIndex: itemIndex,\n          event: e });\n\n      }, this)).\n      on(\"dblclick\", $.proxy(function (e) {\n        this.rowDoubleClick({\n          item: item,\n          itemIndex: itemIndex,\n          event: e });\n\n      }, this));\n\n      if (this.selecting) {\n        this._attachRowHover($result);\n      }\n\n      return $result;\n    },\n\n    _getRowClasses: function _getRowClasses(item, itemIndex) {\n      var classes = [];\n      classes.push((itemIndex + 1) % 2 ? this.oddRowClass : this.evenRowClass);\n      classes.push(getOrApply(this.rowClass, this, item, itemIndex));\n      return classes.join(\" \");\n    },\n\n    _attachRowHover: function _attachRowHover($row) {\n      var selectedRowClass = this.selectedRowClass;\n      $row.hover(function () {\n        $(this).addClass(selectedRowClass);\n      },\n      function () {\n        $(this).removeClass(selectedRowClass);\n      });\n\n    },\n\n    _renderCells: function _renderCells($row, item) {\n      this._eachField(function (field) {\n        $row.append(this._createCell(item, field));\n      });\n      return this;\n    },\n\n    _createCell: function _createCell(item, field) {\n      var $result;\n      var fieldValue = this._getItemFieldValue(item, field);\n\n      var args = { value: fieldValue, item: item };\n      if ($.isFunction(field.cellRenderer)) {\n        $result = this.renderTemplate(field.cellRenderer, field, args);\n      } else {\n        $result = $(\"<td>\").append(this.renderTemplate(field.itemTemplate || fieldValue, field, args));\n      }\n\n      return this._prepareCell($result, field);\n    },\n\n    _getItemFieldValue: function _getItemFieldValue(item, field) {\n      var props = field.name.split('.');\n      var result = item[props.shift()];\n\n      while (result && props.length) {\n        result = result[props.shift()];\n      }\n\n      return result;\n    },\n\n    _setItemFieldValue: function _setItemFieldValue(item, field, value) {\n      var props = field.name.split('.');\n      var current = item;\n      var prop = props[0];\n\n      while (current && props.length) {\n        item = current;\n        prop = props.shift();\n        current = item[prop];\n      }\n\n      if (!current) {\n        while (props.length) {\n          item = item[prop] = {};\n          prop = props.shift();\n        }\n      }\n\n      item[prop] = value;\n    },\n\n    sort: function sort(field, order) {\n      if ($.isPlainObject(field)) {\n        order = field.order;\n        field = field.field;\n      }\n\n      this._clearSortingCss();\n      this._setSortingParams(field, order);\n      this._setSortingCss();\n      return this._loadStrategy.sort();\n    },\n\n    _clearSortingCss: function _clearSortingCss() {\n      this._headerRow.find(\"th\").\n      removeClass(this.sortAscClass).\n      removeClass(this.sortDescClass);\n    },\n\n    _setSortingParams: function _setSortingParams(field, order) {\n      field = this._normalizeField(field);\n      order = order || (this._sortField === field ? this._reversedSortOrder(this._sortOrder) : SORT_ORDER_ASC);\n\n      this._sortField = field;\n      this._sortOrder = order;\n    },\n\n    _normalizeField: function _normalizeField(field) {\n      if ($.isNumeric(field)) {\n        return this.fields[field];\n      }\n\n      if (typeof field === \"string\") {\n        return $.grep(this.fields, function (f) {\n          return f.name === field;\n        })[0];\n      }\n\n      return field;\n    },\n\n    _reversedSortOrder: function _reversedSortOrder(order) {\n      return order === SORT_ORDER_ASC ? SORT_ORDER_DESC : SORT_ORDER_ASC;\n    },\n\n    _setSortingCss: function _setSortingCss() {\n      var fieldIndex = this._visibleFieldIndex(this._sortField);\n\n      this._headerRow.find(\"th\").eq(fieldIndex).\n      addClass(this._sortOrder === SORT_ORDER_ASC ? this.sortAscClass : this.sortDescClass);\n    },\n\n    _visibleFieldIndex: function _visibleFieldIndex(field) {\n      return $.inArray(field, $.grep(this.fields, function (f) {return f.visible;}));\n    },\n\n    _sortData: function _sortData() {\n      var sortFactor = this._sortFactor(),\n      sortField = this._sortField;\n\n      if (sortField) {\n        this.data.sort(function (item1, item2) {\n          return sortFactor * sortField.sortingFunc(item1[sortField.name], item2[sortField.name]);\n        });\n      }\n    },\n\n    _sortFactor: function _sortFactor() {\n      return this._sortOrder === SORT_ORDER_ASC ? 1 : -1;\n    },\n\n    _itemsCount: function _itemsCount() {\n      return this._loadStrategy.itemsCount();\n    },\n\n    _pagesCount: function _pagesCount() {\n      var itemsCount = this._itemsCount(),\n      pageSize = this.pageSize;\n      return Math.floor(itemsCount / pageSize) + (itemsCount % pageSize ? 1 : 0);\n    },\n\n    _refreshPager: function _refreshPager() {\n      var $pagerContainer = this._pagerContainer;\n      $pagerContainer.empty();\n\n      if (this.paging) {\n        $pagerContainer.append(this._createPager());\n      }\n\n      var showPager = this.paging && this._pagesCount() > 1;\n      $pagerContainer.toggle(showPager);\n    },\n\n    _createPager: function _createPager() {\n      var $result;\n\n      if ($.isFunction(this.pagerRenderer)) {\n        $result = $(this.pagerRenderer({\n          pageIndex: this.pageIndex,\n          pageCount: this._pagesCount() }));\n\n      } else {\n        $result = $(\"<div>\").append(this._createPagerByFormat());\n      }\n\n      $result.addClass(this.pagerClass);\n\n      return $result;\n    },\n\n    _createPagerByFormat: function _createPagerByFormat() {\n      var pageIndex = this.pageIndex,\n      pageCount = this._pagesCount(),\n      itemCount = this._itemsCount(),\n      pagerParts = this.pagerFormat.split(\" \");\n\n      return $.map(pagerParts, $.proxy(function (pagerPart) {\n        var result = pagerPart;\n\n        if (pagerPart === PAGES_PLACEHOLDER) {\n          result = this._createPages();\n        } else if (pagerPart === FIRST_PAGE_PLACEHOLDER) {\n          result = this._createPagerNavButton(this.pageFirstText, 1, pageIndex > 1);\n        } else if (pagerPart === PREV_PAGE_PLACEHOLDER) {\n          result = this._createPagerNavButton(this.pagePrevText, pageIndex - 1, pageIndex > 1);\n        } else if (pagerPart === NEXT_PAGE_PLACEHOLDER) {\n          result = this._createPagerNavButton(this.pageNextText, pageIndex + 1, pageIndex < pageCount);\n        } else if (pagerPart === LAST_PAGE_PLACEHOLDER) {\n          result = this._createPagerNavButton(this.pageLastText, pageCount, pageIndex < pageCount);\n        } else if (pagerPart === PAGE_INDEX_PLACEHOLDER) {\n          result = pageIndex;\n        } else if (pagerPart === PAGE_COUNT_PLACEHOLDER) {\n          result = pageCount;\n        } else if (pagerPart === ITEM_COUNT_PLACEHOLDER) {\n          result = itemCount;\n        }\n\n        return $.isArray(result) ? result.concat([\" \"]) : [result, \" \"];\n      }, this));\n    },\n\n    _createPages: function _createPages() {\n      var pageCount = this._pagesCount(),\n      pageButtonCount = this.pageButtonCount,\n      firstDisplayingPage = this._firstDisplayingPage,\n      pages = [];\n\n      if (firstDisplayingPage > 1) {\n        pages.push(this._createPagerPageNavButton(this.pageNavigatorPrevText, this.showPrevPages));\n      }\n\n      for (var i = 0, pageNumber = firstDisplayingPage; i < pageButtonCount && pageNumber <= pageCount; i++, pageNumber++) {\n        pages.push(pageNumber === this.pageIndex ?\n        this._createPagerCurrentPage() :\n        this._createPagerPage(pageNumber));\n      }\n\n      if (firstDisplayingPage + pageButtonCount - 1 < pageCount) {\n        pages.push(this._createPagerPageNavButton(this.pageNavigatorNextText, this.showNextPages));\n      }\n\n      return pages;\n    },\n\n    _createPagerNavButton: function _createPagerNavButton(text, pageIndex, isActive) {\n      return this._createPagerButton(text, this.pagerNavButtonClass + (isActive ? \"\" : \" \" + this.pagerNavButtonInactiveClass),\n      isActive ? function () {this.openPage(pageIndex);} : $.noop);\n    },\n\n    _createPagerPageNavButton: function _createPagerPageNavButton(text, handler) {\n      return this._createPagerButton(text, this.pagerNavButtonClass, handler);\n    },\n\n    _createPagerPage: function _createPagerPage(pageIndex) {\n      return this._createPagerButton(pageIndex, this.pageClass, function () {\n        this.openPage(pageIndex);\n      });\n    },\n\n    _createPagerButton: function _createPagerButton(text, css, handler) {\n      var $link = $(\"<a>\").attr(\"href\", EMPTY_HREF).\n      html(text).\n      on(\"click\", $.proxy(handler, this));\n\n      return $(\"<span>\").addClass(css).append($link);\n    },\n\n    _createPagerCurrentPage: function _createPagerCurrentPage() {\n      return $(\"<span>\").\n      addClass(this.pageClass).\n      addClass(this.currentPageClass).\n      text(this.pageIndex);\n    },\n\n    _refreshSize: function _refreshSize() {\n      this._refreshHeight();\n      this._refreshWidth();\n    },\n\n    _refreshWidth: function _refreshWidth() {\n      var $headerGrid = this._headerGrid,\n      $bodyGrid = this._bodyGrid,\n      width = this.width;\n\n      if (width === \"auto\") {\n        $headerGrid.width(\"auto\");\n        width = $headerGrid.outerWidth();\n      }\n\n      $headerGrid.width(\"\");\n      $bodyGrid.width(\"\");\n      this._container.width(width);\n      width = $headerGrid.outerWidth();\n      $bodyGrid.width(width);\n    },\n\n    _scrollBarWidth: function () {\n      var result;\n\n      return function () {\n        if (result === undefined) {\n          var $ghostContainer = $(\"<div style='width:50px;height:50px;overflow:hidden;position:absolute;top:-10000px;left:-10000px;'></div>\");\n          var $ghostContent = $(\"<div style='height:100px;'></div>\");\n          $ghostContainer.append($ghostContent).appendTo(\"body\");\n          var width = $ghostContent.innerWidth();\n          $ghostContainer.css(\"overflow-y\", \"auto\");\n          var widthExcludingScrollBar = $ghostContent.innerWidth();\n          $ghostContainer.remove();\n          result = width - widthExcludingScrollBar;\n        }\n        return result;\n      };\n    }(),\n\n    _refreshHeight: function _refreshHeight() {\n      var container = this._container,\n      pagerContainer = this._pagerContainer,\n      height = this.height,\n      nonBodyHeight;\n\n      container.height(height);\n\n      if (height !== \"auto\") {\n        height = container.height();\n\n        nonBodyHeight = this._header.outerHeight(true);\n        if (pagerContainer.parents(container).length) {\n          nonBodyHeight += pagerContainer.outerHeight(true);\n        }\n        if (nonBodyHeight === 0) {\n          nonBodyHeight = 41; //Bug: Subtract header height the first time.\n          if (pagerContainer.style(\"display\") !== \"none\") {\n            nonBodyHeight += 29; //Bug: Subtract pageContainer height the first time.\n          }\n        }\n\n        this._body.outerHeight(height - nonBodyHeight);\n      }\n    },\n\n    showPrevPages: function showPrevPages() {\n      var firstDisplayingPage = this._firstDisplayingPage,\n      pageButtonCount = this.pageButtonCount;\n\n      this._firstDisplayingPage = firstDisplayingPage > pageButtonCount ? firstDisplayingPage - pageButtonCount : 1;\n\n      this._refreshPager();\n    },\n\n    showNextPages: function showNextPages() {\n      var firstDisplayingPage = this._firstDisplayingPage,\n      pageButtonCount = this.pageButtonCount,\n      pageCount = this._pagesCount();\n\n      this._firstDisplayingPage = firstDisplayingPage + 2 * pageButtonCount > pageCount ?\n      pageCount - pageButtonCount + 1 :\n      firstDisplayingPage + pageButtonCount;\n\n      this._refreshPager();\n    },\n\n    openPage: function openPage(pageIndex) {\n      if (pageIndex < 1 || pageIndex > this._pagesCount())\n      return;\n\n      this._setPage(pageIndex);\n      this._loadStrategy.openPage(pageIndex);\n    },\n\n    _setPage: function _setPage(pageIndex) {\n      var firstDisplayingPage = this._firstDisplayingPage,\n      pageButtonCount = this.pageButtonCount;\n\n      this.pageIndex = pageIndex;\n\n      if (pageIndex < firstDisplayingPage) {\n        this._firstDisplayingPage = pageIndex;\n      }\n\n      if (pageIndex > firstDisplayingPage + pageButtonCount - 1) {\n        this._firstDisplayingPage = pageIndex - pageButtonCount + 1;\n      }\n\n      this._callEventHandler(this.onPageChanged, {\n        pageIndex: pageIndex });\n\n    },\n\n    _controllerCall: function _controllerCall(method, param, isCanceled, doneCallback) {\n      if (isCanceled)\n      return $.Deferred().reject().promise();\n\n      this._showLoading();\n\n      var controller = this._controller;\n      if (!controller || !controller[method]) {\n        throw Error(\"controller has no method '\" + method + \"'\");\n      }\n\n      return normalizePromise(controller[method](param)).\n      done($.proxy(doneCallback, this)).\n      fail($.proxy(this._errorHandler, this)).\n      always($.proxy(this._hideLoading, this));\n    },\n\n    _errorHandler: function _errorHandler() {\n      this._callEventHandler(this.onError, {\n        args: $.makeArray(arguments) });\n\n    },\n\n    _showLoading: function _showLoading() {\n      if (!this.loadIndication)\n      return;\n\n      clearTimeout(this._loadingTimer);\n\n      this._loadingTimer = setTimeout($.proxy(function () {\n        this._loadIndicator.show();\n      }, this), this.loadIndicationDelay);\n    },\n\n    _hideLoading: function _hideLoading() {\n      if (!this.loadIndication)\n      return;\n\n      clearTimeout(this._loadingTimer);\n      this._loadIndicator.hide();\n    },\n\n    search: function search(filter) {\n      this._resetSorting();\n      this._resetPager();\n      return this.loadData(filter);\n    },\n\n    loadData: function loadData(filter) {\n      filter = filter || (this.filtering ? this.getFilter() : {});\n\n      $.extend(filter, this._loadStrategy.loadParams(), this._sortingParams());\n\n      var args = this._callEventHandler(this.onDataLoading, {\n        filter: filter });\n\n\n      return this._controllerCall(\"loadData\", filter, args.cancel, function (loadedData) {\n        if (!loadedData)\n        return;\n\n        this._loadStrategy.finishLoad(loadedData);\n\n        this._callEventHandler(this.onDataLoaded, {\n          data: loadedData });\n\n      });\n    },\n\n    getFilter: function getFilter() {\n      var result = {};\n      this._eachField(function (field) {\n        if (field.filtering) {\n          this._setItemFieldValue(result, field, field.filterValue());\n        }\n      });\n      return result;\n    },\n\n    _sortingParams: function _sortingParams() {\n      if (this.sorting && this._sortField) {\n        return {\n          sortField: this._sortField.name,\n          sortOrder: this._sortOrder };\n\n      }\n      return {};\n    },\n\n    getSorting: function getSorting() {\n      var sortingParams = this._sortingParams();\n      return {\n        field: sortingParams.sortField,\n        order: sortingParams.sortOrder };\n\n    },\n\n    clearFilter: function clearFilter() {\n      var $filterRow = this._createFilterRow();\n      this._filterRow.replaceWith($filterRow);\n      this._filterRow = $filterRow;\n      return this.search();\n    },\n\n    insertItem: function insertItem(item) {\n      var insertingItem = item || this._getValidatedInsertItem();\n\n      if (!insertingItem)\n      return $.Deferred().reject().promise();\n\n      var args = this._callEventHandler(this.onItemInserting, {\n        item: insertingItem });\n\n\n      return this._controllerCall(\"insertItem\", insertingItem, args.cancel, function (insertedItem) {\n        insertedItem = insertedItem || insertingItem;\n        this._loadStrategy.finishInsert(insertedItem);\n\n        this._callEventHandler(this.onItemInserted, {\n          item: insertedItem });\n\n      });\n    },\n\n    _getValidatedInsertItem: function _getValidatedInsertItem() {\n      var item = this._getInsertItem();\n      return this._validateItem(item, this._insertRow) ? item : null;\n    },\n\n    _getInsertItem: function _getInsertItem() {\n      var result = {};\n      this._eachField(function (field) {\n        if (field.inserting) {\n          this._setItemFieldValue(result, field, field.insertValue());\n        }\n      });\n      return result;\n    },\n\n    _validateItem: function _validateItem(item, $row) {\n      var validationErrors = [];\n\n      var args = {\n        item: item,\n        itemIndex: this._rowIndex($row),\n        row: $row };\n\n\n      this._eachField(function (field) {\n        if (!field.validate)\n        return;\n\n        var fieldValue = this._getItemFieldValue(item, field);\n\n        if (fieldValue === undefined)\n        return;\n\n        var errors = this._validation.validate($.extend({\n          value: fieldValue,\n          rules: field.validate },\n        args));\n\n        this._setCellValidity($row.children().eq(this._visibleFieldIndex(field)), errors);\n\n        if (!errors.length)\n        return;\n\n        validationErrors.push.apply(validationErrors,\n        $.map(errors, function (message) {\n          return { field: field, message: message };\n        }));\n      });\n\n      if (!validationErrors.length)\n      return true;\n\n      var invalidArgs = $.extend({\n        errors: validationErrors },\n      args);\n      this._callEventHandler(this.onItemInvalid, invalidArgs);\n      this.invalidNotify(invalidArgs);\n\n      return false;\n    },\n\n    _setCellValidity: function _setCellValidity($cell, errors) {\n      $cell.\n      toggleClass(this.invalidClass, !!errors.length).\n      attr(\"title\", errors.join(\"\\n\"));\n    },\n\n    clearInsert: function clearInsert() {\n      var insertRow = this._createInsertRow();\n      this._insertRow.replaceWith(insertRow);\n      this._insertRow = insertRow;\n      this.refresh();\n    },\n\n    editItem: function editItem(item) {\n      var $row = this.rowByItem(item);\n      if ($row.length) {\n        this._editRow($row);\n      }\n    },\n\n    rowByItem: function rowByItem(item) {\n      if (item.jquery || item.nodeType)\n      return $(item);\n\n      return this._content.find(\"tr\").filter(function () {\n        return $.data(this, JSGRID_ROW_DATA_KEY) === item;\n      });\n    },\n\n    _editRow: function _editRow($row) {\n      if (!this.editing)\n      return;\n\n      var item = $row.data(JSGRID_ROW_DATA_KEY);\n\n      var args = this._callEventHandler(this.onItemEditing, {\n        row: $row,\n        item: item,\n        itemIndex: this._itemIndex(item) });\n\n\n      if (args.cancel)\n      return;\n\n      if (this._editingRow) {\n        this.cancelEdit();\n      }\n\n      var $editRow = this._createEditRow(item);\n\n      this._editingRow = $row;\n      $row.hide();\n      $editRow.insertBefore($row);\n      $row.data(JSGRID_EDIT_ROW_DATA_KEY, $editRow);\n    },\n\n    _createEditRow: function _createEditRow(item) {\n      if ($.isFunction(this.editRowRenderer)) {\n        return $(this.renderTemplate(field.editRowRenderer, field, { item: item, itemIndex: this._itemIndex(item) }));\n      }\n\n      var $result = $(\"<tr>\").addClass(this.editRowClass);\n\n      this._eachField(function (field) {\n        var fieldValue = this._getItemFieldValue(item, field);\n\n        this._prepareCell(\"<td>\", field, \"editcss\").\n        append(this.renderTemplate(field.editTemplate || \"\", field, { value: fieldValue, item: item })).\n        appendTo($result);\n      });\n\n      return $result;\n    },\n\n    updateItem: function updateItem(item, editedItem) {\n      if (arguments.length === 1) {\n        editedItem = item;\n      }\n\n      var $row = item ? this.rowByItem(item) : this._editingRow;\n      editedItem = editedItem || this._getValidatedEditedItem();\n\n      if (!editedItem)\n      return;\n\n      return this._updateRow($row, editedItem);\n    },\n\n    _getValidatedEditedItem: function _getValidatedEditedItem() {\n      var item = this._getEditedItem();\n      return this._validateItem(item, this._getEditRow()) ? item : null;\n    },\n\n    _updateRow: function _updateRow($updatingRow, editedItem) {\n      var updatingItem = $updatingRow.data(JSGRID_ROW_DATA_KEY),\n      updatingItemIndex = this._itemIndex(updatingItem),\n      previousItem = $.extend(true, {}, updatingItem);\n\n      $.extend(true, updatingItem, editedItem);\n\n      var args = this._callEventHandler(this.onItemUpdating, {\n        row: $updatingRow,\n        item: updatingItem,\n        itemIndex: updatingItemIndex,\n        previousItem: previousItem });\n\n\n      return this._controllerCall(\"updateItem\", updatingItem, args.cancel, function (updatedItem) {\n        updatedItem = updatedItem || updatingItem;\n        var $updatedRow = this._finishUpdate($updatingRow, updatedItem, updatingItemIndex);\n\n        this._callEventHandler(this.onItemUpdated, {\n          row: $updatedRow,\n          item: updatedItem,\n          itemIndex: updatingItemIndex,\n          previousItem: previousItem });\n\n      });\n    },\n\n    _rowIndex: function _rowIndex(row) {\n      return this._content.children().index($(row));\n    },\n\n    _itemIndex: function _itemIndex(item) {\n      return $.inArray(item, this.data);\n    },\n\n    _finishUpdate: function _finishUpdate($updatingRow, updatedItem, updatedItemIndex) {\n      this.cancelEdit();\n      this.data[updatedItemIndex] = updatedItem;\n\n      var $updatedRow = this._createRow(updatedItem, updatedItemIndex);\n      $updatingRow.replaceWith($updatedRow);\n      return $updatedRow;\n    },\n\n    _getEditedItem: function _getEditedItem() {\n      var result = {};\n      this._eachField(function (field) {\n        if (field.editing) {\n          this._setItemFieldValue(result, field, field.editValue());\n        }\n      });\n      return result;\n    },\n\n    cancelEdit: function cancelEdit() {\n      if (!this._editingRow)\n      return;\n\n      this._getEditRow().remove();\n      this._editingRow.show();\n      this._editingRow = null;\n    },\n\n    _getEditRow: function _getEditRow() {\n      return this._editingRow.data(JSGRID_EDIT_ROW_DATA_KEY);\n    },\n\n    deleteItem: function deleteItem(item) {\n      var $row = this.rowByItem(item);\n\n      if (!$row.length)\n      return;\n\n      if (this.confirmDeleting && !window.confirm(getOrApply(this.deleteConfirm, this, $row.data(JSGRID_ROW_DATA_KEY))))\n      return;\n\n      return this._deleteRow($row);\n    },\n\n    _deleteRow: function _deleteRow($row) {\n      var deletingItem = $row.data(JSGRID_ROW_DATA_KEY),\n      deletingItemIndex = this._itemIndex(deletingItem);\n\n      var args = this._callEventHandler(this.onItemDeleting, {\n        row: $row,\n        item: deletingItem,\n        itemIndex: deletingItemIndex });\n\n\n      return this._controllerCall(\"deleteItem\", deletingItem, args.cancel, function () {\n        this._loadStrategy.finishDelete(deletingItem, deletingItemIndex);\n\n        this._callEventHandler(this.onItemDeleted, {\n          row: $row,\n          item: deletingItem,\n          itemIndex: deletingItemIndex });\n\n      });\n    } };\n\n\n  $.fn.jsGrid = function (config) {\n    var args = $.makeArray(arguments),\n    methodArgs = args.slice(1),\n    result = this;\n\n    this.each(function () {\n      var $element = $(this),\n      instance = $element.data(JSGRID_DATA_KEY),\n      methodResult;\n\n      if (instance) {\n        if (typeof config === \"string\") {\n          methodResult = instance[config].apply(instance, methodArgs);\n          if (methodResult !== undefined && methodResult !== instance) {\n            result = methodResult;\n            return false;\n          }\n        } else {\n          instance._detachWindowResizeCallback();\n          instance._init(config);\n          instance.render();\n        }\n      } else {\n        new Grid($element, config);\n      }\n    });\n\n    return result;\n  };\n\n  var fields = {};\n\n  var setDefaults = function setDefaults(config) {\n    var componentPrototype;\n\n    if ($.isPlainObject(config)) {\n      componentPrototype = Grid.prototype;\n    } else {\n      componentPrototype = fields[config].prototype;\n      config = arguments[1] || {};\n    }\n\n    $.extend(componentPrototype, config);\n  };\n\n  var locales = {};\n\n  var locale = function locale(lang) {\n    var localeConfig = $.isPlainObject(lang) ? lang : locales[lang];\n\n    if (!localeConfig)\n    throw Error(\"unknown locale \" + lang);\n\n    setLocale(jsGrid, localeConfig);\n  };\n\n  var setLocale = function setLocale(obj, localeConfig) {\n    $.each(localeConfig, function (field, value) {\n      if ($.isPlainObject(value)) {\n        setLocale(obj[field] || obj[field[0].toUpperCase() + field.slice(1)], value);\n        return;\n      }\n\n      if (obj.hasOwnProperty(field)) {\n        obj[field] = value;\n      } else {\n        obj.prototype[field] = value;\n      }\n    });\n  };\n\n  window.jsGrid = {\n    Grid: Grid,\n    fields: fields,\n    setDefaults: setDefaults,\n    locales: locales,\n    locale: locale,\n    version: '1.5.1' };\n\n\n})(window, jQuery);\n\n(function (jsGrid, $, undefined) {\n\n  function LoadIndicator(config) {\n    this._init(config);\n  }\n\n  LoadIndicator.prototype = {\n\n    container: \"body\",\n    message: \"Loading...\",\n    shading: true,\n\n    zIndex: 1000,\n    shaderClass: \"jsgrid-load-shader\",\n    loadPanelClass: \"jsgrid-load-panel\",\n\n    _init: function _init(config) {\n      $.extend(true, this, config);\n\n      this._initContainer();\n      this._initShader();\n      this._initLoadPanel();\n    },\n\n    _initContainer: function _initContainer() {\n      this._container = $(this.container);\n    },\n\n    _initShader: function _initShader() {\n      if (!this.shading)\n      return;\n\n      this._shader = $(\"<div>\").addClass(this.shaderClass).\n      hide().\n      css({\n        position: \"absolute\",\n        top: 0,\n        right: 0,\n        bottom: 0,\n        left: 0,\n        zIndex: this.zIndex }).\n\n      appendTo(this._container);\n    },\n\n    _initLoadPanel: function _initLoadPanel() {\n      this._loadPanel = $(\"<div>\").addClass(this.loadPanelClass).\n      text(this.message).\n      hide().\n      css({\n        position: \"absolute\",\n        top: \"50%\",\n        left: \"50%\",\n        zIndex: this.zIndex }).\n\n      appendTo(this._container);\n    },\n\n    show: function show() {\n      var $loadPanel = this._loadPanel.show();\n\n      var actualWidth = $loadPanel.outerWidth();\n      var actualHeight = $loadPanel.outerHeight();\n\n      $loadPanel.css({\n        marginTop: -actualHeight / 2,\n        marginLeft: -actualWidth / 2 });\n\n\n      this._shader.show();\n    },\n\n    hide: function hide() {\n      this._loadPanel.hide();\n      this._shader.hide();\n    } };\n\n\n\n  jsGrid.LoadIndicator = LoadIndicator;\n\n})(jsGrid, jQuery);\n\n(function (jsGrid, $, undefined) {\n\n  function DirectLoadingStrategy(grid) {\n    this._grid = grid;\n  }\n\n  DirectLoadingStrategy.prototype = {\n\n    firstDisplayIndex: function firstDisplayIndex() {\n      var grid = this._grid;\n      return grid.option(\"paging\") ? (grid.option(\"pageIndex\") - 1) * grid.option(\"pageSize\") : 0;\n    },\n\n    lastDisplayIndex: function lastDisplayIndex() {\n      var grid = this._grid;\n      var itemsCount = grid.option(\"data\").length;\n\n      return grid.option(\"paging\") ?\n      Math.min(grid.option(\"pageIndex\") * grid.option(\"pageSize\"), itemsCount) :\n      itemsCount;\n    },\n\n    itemsCount: function itemsCount() {\n      return this._grid.option(\"data\").length;\n    },\n\n    openPage: function openPage(index) {\n      this._grid.refresh();\n    },\n\n    loadParams: function loadParams() {\n      return {};\n    },\n\n    sort: function sort() {\n      this._grid._sortData();\n      this._grid.refresh();\n      return $.Deferred().resolve().promise();\n    },\n\n    reset: function reset() {\n      this._grid.refresh();\n      return $.Deferred().resolve().promise();\n    },\n\n    finishLoad: function finishLoad(loadedData) {\n      this._grid.option(\"data\", loadedData);\n    },\n\n    finishInsert: function finishInsert(insertedItem) {\n      var grid = this._grid;\n      grid.option(\"data\").push(insertedItem);\n      grid.refresh();\n    },\n\n    finishDelete: function finishDelete(deletedItem, deletedItemIndex) {\n      var grid = this._grid;\n      grid.option(\"data\").splice(deletedItemIndex, 1);\n      grid.reset();\n    } };\n\n\n\n  function PageLoadingStrategy(grid) {\n    this._grid = grid;\n    this._itemsCount = 0;\n  }\n\n  PageLoadingStrategy.prototype = {\n\n    firstDisplayIndex: function firstDisplayIndex() {\n      return 0;\n    },\n\n    lastDisplayIndex: function lastDisplayIndex() {\n      return this._grid.option(\"data\").length;\n    },\n\n    itemsCount: function itemsCount() {\n      return this._itemsCount;\n    },\n\n    openPage: function openPage(index) {\n      this._grid.loadData();\n    },\n\n    loadParams: function loadParams() {\n      var grid = this._grid;\n      return {\n        pageIndex: grid.option(\"pageIndex\"),\n        pageSize: grid.option(\"pageSize\") };\n\n    },\n\n    reset: function reset() {\n      return this._grid.loadData();\n    },\n\n    sort: function sort() {\n      return this._grid.loadData();\n    },\n\n    finishLoad: function finishLoad(loadedData) {\n      this._itemsCount = loadedData.itemsCount;\n      this._grid.option(\"data\", loadedData.data);\n    },\n\n    finishInsert: function finishInsert(insertedItem) {\n      this._grid.search();\n    },\n\n    finishDelete: function finishDelete(deletedItem, deletedItemIndex) {\n      this._grid.search();\n    } };\n\n\n  jsGrid.loadStrategies = {\n    DirectLoadingStrategy: DirectLoadingStrategy,\n    PageLoadingStrategy: PageLoadingStrategy };\n\n\n})(jsGrid, jQuery);\n\n(function (jsGrid, $, undefined) {\n\n  var isDefined = function isDefined(val) {\n    return typeof val !== \"undefined\" && val !== null;\n  };\n\n  var sortStrategies = {\n    string: function string(str1, str2) {\n      if (!isDefined(str1) && !isDefined(str2))\n      return 0;\n\n      if (!isDefined(str1))\n      return -1;\n\n      if (!isDefined(str2))\n      return 1;\n\n      return (\"\" + str1).localeCompare(\"\" + str2);\n    },\n\n    number: function number(n1, n2) {\n      return n1 - n2;\n    },\n\n    date: function date(dt1, dt2) {\n      return dt1 - dt2;\n    },\n\n    numberAsString: function numberAsString(n1, n2) {\n      return parseFloat(n1) - parseFloat(n2);\n    } };\n\n\n  jsGrid.sortStrategies = sortStrategies;\n\n})(jsGrid, jQuery);\n\n(function (jsGrid, $, undefined) {\n\n  function Validation(config) {\n    this._init(config);\n  }\n\n  Validation.prototype = {\n\n    _init: function _init(config) {\n      $.extend(true, this, config);\n    },\n\n    validate: function validate(args) {\n      var errors = [];\n\n      $.each(this._normalizeRules(args.rules), function (_, rule) {\n        if (rule.validator(args.value, args.item, rule.param))\n        return;\n\n        var errorMessage = $.isFunction(rule.message) ? rule.message(args.value, args.item) : rule.message;\n        errors.push(errorMessage);\n      });\n\n      return errors;\n    },\n\n    _normalizeRules: function _normalizeRules(rules) {\n      if (!$.isArray(rules))\n      rules = [rules];\n\n      return $.map(rules, $.proxy(function (rule) {\n        return this._normalizeRule(rule);\n      }, this));\n    },\n\n    _normalizeRule: function _normalizeRule(rule) {\n      if (typeof rule === \"string\")\n      rule = { validator: rule };\n\n      if ($.isFunction(rule))\n      rule = { validator: rule };\n\n      if ($.isPlainObject(rule))\n      rule = $.extend({}, rule);else\n\n      throw Error(\"wrong validation config specified\");\n\n      if ($.isFunction(rule.validator))\n      return rule;\n\n      return this._applyNamedValidator(rule, rule.validator);\n    },\n\n    _applyNamedValidator: function _applyNamedValidator(rule, validatorName) {\n      delete rule.validator;\n\n      var validator = validators[validatorName];\n      if (!validator)\n      throw Error(\"unknown validator \\\"\" + validatorName + \"\\\"\");\n\n      if ($.isFunction(validator)) {\n        validator = { validator: validator };\n      }\n\n      return $.extend({}, validator, rule);\n    } };\n\n\n  jsGrid.Validation = Validation;\n\n\n  var validators = {\n    required: {\n      message: \"Field is required\",\n      validator: function validator(value) {\n        return value !== undefined && value !== null && value !== \"\";\n      } },\n\n\n    rangeLength: {\n      message: \"Field value length is out of the defined range\",\n      validator: function validator(value, _, param) {\n        return value.length >= param[0] && value.length <= param[1];\n      } },\n\n\n    minLength: {\n      message: \"Field value is too short\",\n      validator: function validator(value, _, param) {\n        return value.length >= param;\n      } },\n\n\n    maxLength: {\n      message: \"Field value is too long\",\n      validator: function validator(value, _, param) {\n        return value.length <= param;\n      } },\n\n\n    pattern: {\n      message: \"Field value is not matching the defined pattern\",\n      validator: function validator(value, _, param) {\n        if (typeof param === \"string\") {\n          param = new RegExp(\"^(?:\" + param + \")$\");\n        }\n        return param.test(value);\n      } },\n\n\n    range: {\n      message: \"Field value is out of the defined range\",\n      validator: function validator(value, _, param) {\n        return value >= param[0] && value <= param[1];\n      } },\n\n\n    min: {\n      message: \"Field value is too small\",\n      validator: function validator(value, _, param) {\n        return value >= param;\n      } },\n\n\n    max: {\n      message: \"Field value is too large\",\n      validator: function validator(value, _, param) {\n        return value <= param;\n      } } };\n\n\n\n  jsGrid.validators = validators;\n\n})(jsGrid, jQuery);\n\n(function (jsGrid, $, undefined) {\n\n  function Field(config) {\n    $.extend(true, this, config);\n    this.sortingFunc = this._getSortingFunc();\n  }\n\n  Field.prototype = {\n    name: \"\",\n    title: null,\n    css: \"\",\n    align: \"\",\n    width: 100,\n\n    visible: true,\n    filtering: true,\n    inserting: true,\n    editing: true,\n    sorting: true,\n    sorter: \"string\", // name of SortStrategy or function to compare elements\n\n    headerTemplate: function headerTemplate() {\n      return this.title === undefined || this.title === null ? this.name : this.title;\n    },\n\n    itemTemplate: function itemTemplate(value, item) {\n      return value;\n    },\n\n    filterTemplate: function filterTemplate() {\n      return \"\";\n    },\n\n    insertTemplate: function insertTemplate() {\n      return \"\";\n    },\n\n    editTemplate: function editTemplate(value, item) {\n      this._value = value;\n      return this.itemTemplate(value, item);\n    },\n\n    filterValue: function filterValue() {\n      return \"\";\n    },\n\n    insertValue: function insertValue() {\n      return \"\";\n    },\n\n    editValue: function editValue() {\n      return this._value;\n    },\n\n    _getSortingFunc: function _getSortingFunc() {\n      var sorter = this.sorter;\n\n      if ($.isFunction(sorter)) {\n        return sorter;\n      }\n\n      if (typeof sorter === \"string\") {\n        return jsGrid.sortStrategies[sorter];\n      }\n\n      throw Error(\"wrong sorter for the field \\\"\" + this.name + \"\\\"!\");\n    } };\n\n\n  jsGrid.Field = Field;\n\n})(jsGrid, jQuery);\n\n(function (jsGrid, $, undefined) {\n\n  var Field = jsGrid.Field;\n\n  function TextField(config) {\n    Field.call(this, config);\n  }\n\n  TextField.prototype = new Field({\n\n    autosearch: true,\n    readOnly: false,\n\n    filterTemplate: function filterTemplate() {\n      if (!this.filtering)\n      return \"\";\n\n      var grid = this._grid,\n      $result = this.filterControl = this._createTextBox();\n\n      if (this.autosearch) {\n        $result.on(\"keypress\", function (e) {\n          if (e.which === 13) {\n            grid.search();\n            e.preventDefault();\n          }\n        });\n      }\n\n      return $result;\n    },\n\n    insertTemplate: function insertTemplate() {\n      if (!this.inserting)\n      return \"\";\n\n      return this.insertControl = this._createTextBox();\n    },\n\n    editTemplate: function editTemplate(value) {\n      if (!this.editing)\n      return this.itemTemplate(value);\n\n      var $result = this.editControl = this._createTextBox();\n      $result.val(value);\n      return $result;\n    },\n\n    filterValue: function filterValue() {\n      return this.filterControl.val();\n    },\n\n    insertValue: function insertValue() {\n      return this.insertControl.val();\n    },\n\n    editValue: function editValue() {\n      return this.editControl.val();\n    },\n\n    _createTextBox: function _createTextBox() {\n      return $(\"<input>\").attr(\"type\", \"text\").\n      prop(\"readonly\", !!this.readOnly);\n    } });\n\n\n  jsGrid.fields.text = jsGrid.TextField = TextField;\n\n})(jsGrid, jQuery);\n\n(function (jsGrid, $, undefined) {\n\n  var TextField = jsGrid.TextField;\n\n  function NumberField(config) {\n    TextField.call(this, config);\n  }\n\n  NumberField.prototype = new TextField({\n\n    sorter: \"number\",\n    align: \"right\",\n    readOnly: false,\n\n    filterValue: function filterValue() {\n      return parseInt(this.filterControl.val() || 0, 10);\n    },\n\n    insertValue: function insertValue() {\n      return parseInt(this.insertControl.val() || 0, 10);\n    },\n\n    editValue: function editValue() {\n      return parseInt(this.editControl.val() || 0, 10);\n    },\n\n    _createTextBox: function _createTextBox() {\n      return $(\"<input>\").attr(\"type\", \"number\").\n      prop(\"readonly\", !!this.readOnly);\n    } });\n\n\n  jsGrid.fields.number = jsGrid.NumberField = NumberField;\n\n})(jsGrid, jQuery);\n\n(function (jsGrid, $, undefined) {\n\n  var TextField = jsGrid.TextField;\n\n  function TextAreaField(config) {\n    TextField.call(this, config);\n  }\n\n  TextAreaField.prototype = new TextField({\n\n    insertTemplate: function insertTemplate() {\n      if (!this.inserting)\n      return \"\";\n\n      return this.insertControl = this._createTextArea();\n    },\n\n    editTemplate: function editTemplate(value) {\n      if (!this.editing)\n      return this.itemTemplate(value);\n\n      var $result = this.editControl = this._createTextArea();\n      $result.val(value);\n      return $result;\n    },\n\n    _createTextArea: function _createTextArea() {\n      return $(\"<textarea>\").prop(\"readonly\", !!this.readOnly);\n    } });\n\n\n  jsGrid.fields.textarea = jsGrid.TextAreaField = TextAreaField;\n\n})(jsGrid, jQuery);\n\n(function (jsGrid, $, undefined) {\n\n  var NumberField = jsGrid.NumberField;\n  var numberValueType = \"number\";\n  var stringValueType = \"string\";\n\n  function SelectField(config) {\n    this.items = [];\n    this.selectedIndex = -1;\n    this.valueField = \"\";\n    this.textField = \"\";\n\n    if (config.valueField && config.items.length) {\n      var firstItemValue = config.items[0][config.valueField];\n      this.valueType = _typeof(firstItemValue) === numberValueType ? numberValueType : stringValueType;\n    }\n\n    this.sorter = this.valueType;\n\n    NumberField.call(this, config);\n  }\n\n  SelectField.prototype = new NumberField({\n\n    align: \"center\",\n    valueType: numberValueType,\n\n    itemTemplate: function itemTemplate(value) {\n      var items = this.items,\n      valueField = this.valueField,\n      textField = this.textField,\n      resultItem;\n\n      if (valueField) {\n        resultItem = $.grep(items, function (item, index) {\n          return item[valueField] === value;\n        })[0] || {};\n      } else\n      {\n        resultItem = items[value];\n      }\n\n      var result = textField ? resultItem[textField] : resultItem;\n\n      return result === undefined || result === null ? \"\" : result;\n    },\n\n    filterTemplate: function filterTemplate() {\n      if (!this.filtering)\n      return \"\";\n\n      var grid = this._grid,\n      $result = this.filterControl = this._createSelect();\n\n      if (this.autosearch) {\n        $result.on(\"change\", function (e) {\n          grid.search();\n        });\n      }\n\n      return $result;\n    },\n\n    insertTemplate: function insertTemplate() {\n      if (!this.inserting)\n      return \"\";\n\n      return this.insertControl = this._createSelect();\n    },\n\n    editTemplate: function editTemplate(value) {\n      if (!this.editing)\n      return this.itemTemplate(value);\n\n      var $result = this.editControl = this._createSelect();\n      value !== undefined && $result.val(value);\n      return $result;\n    },\n\n    filterValue: function filterValue() {\n      var val = this.filterControl.val();\n      return this.valueType === numberValueType ? parseInt(val || 0, 10) : val;\n    },\n\n    insertValue: function insertValue() {\n      var val = this.insertControl.val();\n      return this.valueType === numberValueType ? parseInt(val || 0, 10) : val;\n    },\n\n    editValue: function editValue() {\n      var val = this.editControl.val();\n      return this.valueType === numberValueType ? parseInt(val || 0, 10) : val;\n    },\n\n    _createSelect: function _createSelect() {\n      var $result = $(\"<select>\"),\n      valueField = this.valueField,\n      textField = this.textField,\n      selectedIndex = this.selectedIndex;\n\n      $.each(this.items, function (index, item) {\n        var value = valueField ? item[valueField] : index,\n        text = textField ? item[textField] : item;\n\n        var $option = $(\"<option>\").\n        attr(\"value\", value).\n        text(text).\n        appendTo($result);\n\n        $option.prop(\"selected\", selectedIndex === index);\n      });\n\n      $result.prop(\"disabled\", !!this.readOnly);\n\n      return $result;\n    } });\n\n\n  jsGrid.fields.select = jsGrid.SelectField = SelectField;\n\n})(jsGrid, jQuery);\n\n(function (jsGrid, $, undefined) {\n\n  var Field = jsGrid.Field;\n\n  function CheckboxField(config) {\n    Field.call(this, config);\n  }\n\n  CheckboxField.prototype = new Field({\n\n    sorter: \"number\",\n    align: \"center\",\n    autosearch: true,\n\n    itemTemplate: function itemTemplate(value) {\n      return this._createCheckbox().prop({\n        checked: value,\n        disabled: true });\n\n    },\n\n    filterTemplate: function filterTemplate() {\n      if (!this.filtering)\n      return \"\";\n\n      var grid = this._grid,\n      $result = this.filterControl = this._createCheckbox();\n\n      $result.prop({\n        readOnly: true,\n        indeterminate: true });\n\n\n      $result.on(\"click\", function () {\n        var $cb = $(this);\n\n        if ($cb.prop(\"readOnly\")) {\n          $cb.prop({\n            checked: false,\n            readOnly: false });\n\n        } else\n        if (!$cb.prop(\"checked\")) {\n          $cb.prop({\n            readOnly: true,\n            indeterminate: true });\n\n        }\n      });\n\n      if (this.autosearch) {\n        $result.on(\"click\", function () {\n          grid.search();\n        });\n      }\n\n      return $result;\n    },\n\n    insertTemplate: function insertTemplate() {\n      if (!this.inserting)\n      return \"\";\n\n      return this.insertControl = this._createCheckbox();\n    },\n\n    editTemplate: function editTemplate(value) {\n      if (!this.editing)\n      return this.itemTemplate(value);\n\n      var $result = this.editControl = this._createCheckbox();\n      $result.prop(\"checked\", value);\n      return $result;\n    },\n\n    filterValue: function filterValue() {\n      return this.filterControl.get(0).indeterminate ?\n      undefined :\n      this.filterControl.is(\":checked\");\n    },\n\n    insertValue: function insertValue() {\n      return this.insertControl.is(\":checked\");\n    },\n\n    editValue: function editValue() {\n      return this.editControl.is(\":checked\");\n    },\n\n    _createCheckbox: function _createCheckbox() {\n      return $(\"<input>\").attr(\"type\", \"checkbox\");\n    } });\n\n\n  jsGrid.fields.checkbox = jsGrid.CheckboxField = CheckboxField;\n\n})(jsGrid, jQuery);\n\n(function (jsGrid, $, undefined) {\n\n  var Field = jsGrid.Field;\n\n  function ControlField(config) {\n    Field.call(this, config);\n    this._configInitialized = false;\n  }\n\n  ControlField.prototype = new Field({\n    css: \"jsgrid-control-field\",\n    align: \"center\",\n    width: 50,\n    filtering: false,\n    inserting: false,\n    editing: false,\n    sorting: false,\n\n    buttonClass: \"jsgrid-button\",\n    modeButtonClass: \"jsgrid-mode-button\",\n\n    modeOnButtonClass: \"jsgrid-mode-on-button\",\n    searchModeButtonClass: \"jsgrid-search-mode-button\",\n    insertModeButtonClass: \"jsgrid-insert-mode-button\",\n    editButtonClass: \"jsgrid-edit-button\",\n    deleteButtonClass: \"jsgrid-delete-button\",\n    searchButtonClass: \"jsgrid-search-button\",\n    clearFilterButtonClass: \"jsgrid-clear-filter-button\",\n    insertButtonClass: \"jsgrid-insert-button\",\n    updateButtonClass: \"jsgrid-update-button\",\n    cancelEditButtonClass: \"jsgrid-cancel-edit-button\",\n\n    searchModeButtonTooltip: \"Switch to searching\",\n    insertModeButtonTooltip: \"Switch to inserting\",\n    editButtonTooltip: \"Edit\",\n    deleteButtonTooltip: \"Delete\",\n    searchButtonTooltip: \"Search\",\n    clearFilterButtonTooltip: \"Clear filter\",\n    insertButtonTooltip: \"Insert\",\n    updateButtonTooltip: \"Update\",\n    cancelEditButtonTooltip: \"Cancel edit\",\n\n    editButton: true,\n    deleteButton: true,\n    clearFilterButton: true,\n    modeSwitchButton: true,\n\n    _initConfig: function _initConfig() {\n      this._hasFiltering = this._grid.filtering;\n      this._hasInserting = this._grid.inserting;\n\n      if (this._hasInserting && this.modeSwitchButton) {\n        this._grid.inserting = false;\n      }\n\n      this._configInitialized = true;\n    },\n\n    headerTemplate: function headerTemplate() {\n      if (!this._configInitialized) {\n        this._initConfig();\n      }\n\n      var hasFiltering = this._hasFiltering;\n      var hasInserting = this._hasInserting;\n\n      if (!this.modeSwitchButton || !hasFiltering && !hasInserting)\n      return \"\";\n\n      if (hasFiltering && !hasInserting)\n      return this._createFilterSwitchButton();\n\n      if (hasInserting && !hasFiltering)\n      return this._createInsertSwitchButton();\n\n      return this._createModeSwitchButton();\n    },\n\n    itemTemplate: function itemTemplate(value, item) {\n      var $result = $([]);\n\n      if (this.editButton) {\n        $result = $result.add(this._createEditButton(item));\n      }\n\n      if (this.deleteButton) {\n        $result = $result.add(this._createDeleteButton(item));\n      }\n\n      return $result;\n    },\n\n    filterTemplate: function filterTemplate() {\n      var $result = this._createSearchButton();\n      return this.clearFilterButton ? $result.add(this._createClearFilterButton()) : $result;\n    },\n\n    insertTemplate: function insertTemplate() {\n      return this._createInsertButton();\n    },\n\n    editTemplate: function editTemplate() {\n      return this._createUpdateButton().add(this._createCancelEditButton());\n    },\n\n    _createFilterSwitchButton: function _createFilterSwitchButton() {\n      return this._createOnOffSwitchButton(\"filtering\", this.searchModeButtonClass, true);\n    },\n\n    _createInsertSwitchButton: function _createInsertSwitchButton() {\n      return this._createOnOffSwitchButton(\"inserting\", this.insertModeButtonClass, false);\n    },\n\n    _createOnOffSwitchButton: function _createOnOffSwitchButton(option, cssClass, isOnInitially) {\n      var isOn = isOnInitially;\n\n      var updateButtonState = $.proxy(function () {\n        $button.toggleClass(this.modeOnButtonClass, isOn);\n      }, this);\n\n      var $button = this._createGridButton(this.modeButtonClass + \" \" + cssClass, \"\", function (grid) {\n        isOn = !isOn;\n        grid.option(option, isOn);\n        updateButtonState();\n      });\n\n      updateButtonState();\n\n      return $button;\n    },\n\n    _createModeSwitchButton: function _createModeSwitchButton() {\n      var isInserting = false;\n\n      var updateButtonState = $.proxy(function () {\n        $button.attr(\"title\", isInserting ? this.searchModeButtonTooltip : this.insertModeButtonTooltip).\n        toggleClass(this.insertModeButtonClass, !isInserting).\n        toggleClass(this.searchModeButtonClass, isInserting);\n      }, this);\n\n      var $button = this._createGridButton(this.modeButtonClass, \"\", function (grid) {\n        isInserting = !isInserting;\n        grid.option(\"inserting\", isInserting);\n        grid.option(\"filtering\", !isInserting);\n        updateButtonState();\n      });\n\n      updateButtonState();\n\n      return $button;\n    },\n\n    _createEditButton: function _createEditButton(item) {\n      return this._createGridButton(this.editButtonClass, this.editButtonTooltip, function (grid, e) {\n        grid.editItem(item);\n        e.stopPropagation();\n      });\n    },\n\n    _createDeleteButton: function _createDeleteButton(item) {\n      return this._createGridButton(this.deleteButtonClass, this.deleteButtonTooltip, function (grid, e) {\n        grid.deleteItem(item);\n        e.stopPropagation();\n      });\n    },\n\n    _createSearchButton: function _createSearchButton() {\n      return this._createGridButton(this.searchButtonClass, this.searchButtonTooltip, function (grid) {\n        grid.search();\n      });\n    },\n\n    _createClearFilterButton: function _createClearFilterButton() {\n      return this._createGridButton(this.clearFilterButtonClass, this.clearFilterButtonTooltip, function (grid) {\n        grid.clearFilter();\n      });\n    },\n\n    _createInsertButton: function _createInsertButton() {\n      return this._createGridButton(this.insertButtonClass, this.insertButtonTooltip, function (grid) {\n        grid.insertItem().done(function () {\n          grid.clearInsert();\n        });\n      });\n    },\n\n    _createUpdateButton: function _createUpdateButton() {\n      return this._createGridButton(this.updateButtonClass, this.updateButtonTooltip, function (grid, e) {\n        grid.updateItem();\n        e.stopPropagation();\n      });\n    },\n\n    _createCancelEditButton: function _createCancelEditButton() {\n      return this._createGridButton(this.cancelEditButtonClass, this.cancelEditButtonTooltip, function (grid, e) {\n        grid.cancelEdit();\n        e.stopPropagation();\n      });\n    },\n\n    _createGridButton: function _createGridButton(cls, tooltip, clickHandler) {\n      var grid = this._grid;\n\n      return $(\"<input>\").addClass(this.buttonClass).\n      addClass(cls).\n      attr({\n        type: \"button\",\n        title: tooltip }).\n\n      on(\"click\", function (e) {\n        clickHandler(grid, e);\n      });\n    },\n\n    editValue: function editValue() {\n      return \"\";\n    } });\n\n\n\n  jsGrid.fields.control = jsGrid.ControlField = ControlField;\n\n})(jsGrid, jQuery);","/*\r\n *   Name: BizAgi Workportal Desktop my search search lists Widget Controller\r\n *   Author: Andres Fernando Munoz\r\n *   Comments:\r\n *   -   This script will provide desktop overrides to implement the my search search lists widget\r\n */\n\n// Auto extend\nbizagi.workportal.widgets.mySearchList.extend(\"bizagi.workportal.widgets.mySearchList\", {}, {\n\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    //Load templates\n    self.loadTemplates({\n      \"mySearchListWrapper\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.mySearchList\").concat(\"#ui-bizagi-workportal-widget-mysearchlist-searchlists-wrapper\"),\n      \"mySearchList\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.mySearchList\").concat(\"#ui-bizagi-workportal-widget-mysearchlist-searchlists\"),\n      useNewEngine: false });\n\n  },\n\n  /**\r\n      *   To be overriden in each device to apply layouts\r\n      */\n  postRender: function postRender() {\n    var self = this;\n\n    self.loadtemplates();\n    self.renderSearchLists();\n  },\n\n  loadtemplates: function loadtemplates() {\n    var self = this;\n\n    self.mySearchListTmpl = self.getTemplate(\"mySearchList\");\n  },\n\n  renderSearchLists: function renderSearchLists() {\n    var self = this;\n    var content = self.getContent();\n\n    $.when(self.dataService.getSearchLists()).done(function (data) {\n      var searchLists = data;\n      var $searchLists = $.tmpl(self.mySearchListTmpl, { searchLists: searchLists });\n\n      content.append($searchLists);\n      self.configureHandlers();\n    });\n  },\n\n  closeModal: function closeModal() {\n    var self = this;\n    var modal = $(self.content).closest('.modal');\n\n    modal.hide();\n  },\n\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    var content = self.getContent();\n\n    $(\".ui-bizagi-wp-widget-my-search-list-item\", content).on('click', $.proxy(self.onListItemClick, self));\n    $(\"#menuQuery\").keypress(function () {//Hides the widget when the user types something\n      self.closeModal();\n    });\n  },\n\n  onListItemClick: function onListItemClick(ev) {\n    var self = this;\n    self.closeModal(); //Hides the widget when the user selects any item on the list\n    var $target = $(ev.currentTarget);\n    var guidform = $target.data(\"guidform\");\n    var id = $target.data(\"id\");\n    var displayname = $target.data(\"displayname\");\n    var guidEntity = $target.data(\"guidentity\");\n\n    var publishParams = {\n      widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_LOADFORM,\n      summaryDecorator: false,\n      guidForm: guidform,\n      displayname: displayname,\n      guidEntity: guidEntity,\n      closeVisible: false,\n      buttons: [\n      {\n        text: bizagi.localization.getResource('workportal-menu-search'),\n        click: function click(e) {\n          var that = this;\n          var widget = $(this).dialog(\"option\", \"widget\");\n          var form = widget.form || {};\n\n          if (Object.keys(form).length !== 0) {\n\n            if (form && form.validateForm()) {\n              var renderValues = [];\n              $.forceCollectData = true;\n              form.collectRenderValuesQueryForm(renderValues);\n              $.forceCollectData = false;\n\n              var filterObject = [];\n              var metadataFilters = [];\n\n              $.each(renderValues, function (i, item) {\n                if (typeof item.value !== 'function') {\n                  var controls = form.getRenders(item.xpath);\n                  var control = self.getFilterControl(controls, item);\n\n                  var newValue = control.value;\n                  var searchType = control.properties.rangeQuery;\n                  if (item && item.advancedQuery) {\n                    newValue = item.value;\n                    searchType = item.searchType || control.properties.rangeQuery || \"NONE\";\n                  }\n\n                  self.dataService.defineFilterObject({\n                    properties: control.properties,\n                    value: newValue },\n                  filterObject, function (filter) {\n                    metadataFilters.push($.extend(filter, {\n                      id: control.properties.id,\n                      rangeQuery: searchType,\n                      displayValue: control.getDisplayValue(),\n                      displayName: control.properties.displayName,\n                      editable: !!control.properties.editable }));\n\n                  });\n                }\n              });\n\n              self.performQuery({ guidSearch: id, guidForm: guidform, guidEntity: guidEntity, displayname: displayname, metadataFilters: metadataFilters, filters: filterObject, page: 1, pageSize: 10, calculateFilters: true, histName: displayname, onlyLocalResults: true });\n              self.cleanContext();\n              $(that).dialog('close');\n            }\n\n          }\n        } },\n\n      {\n        text: bizagi.localization.getResource(\"workportal-widget-dialog-box-close\"),\n        click: function click() {\n          $(this).dialog('close');\n        } }],\n\n\n      modalParameters: {\n        title: displayname } };\n\n\n\n    self.publish(\"showDialogWidget\", publishParams);\n    self.publish(\"onWidgetIncludedInDOM\");\n  },\n\n  performQuery: function performQuery(params) {\n    var self = this;\n    var dataParams = {\n      \"type\": \"SEARCH-ENGINE-VIEW\",\n      \"args\": params };\n\n\n    $.when(self.publish(\"changeWidget\", {\n      widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_HOMEPORTAL })).\n    done(function () {\n      var homeportalInstance = bizagi.injector.get('homeportal');\n      var widgetManager = bizagi.injector.get('widgetManager');\n      widgetManager._context = \"home\";\n\n      $.when(homeportalInstance.isReady()).done(function () {\n        homeportalInstance.pub(\"notify\", dataParams);\n      });\n    });\n  },\n\n  getFilterControl: function getFilterControl(controls, itemFilter) {\n    if (controls.length === 1) {\n      return controls[0];\n    } else {\n      var searchTypeFilter = itemFilter.searchType.toUpperCase();\n\n      for (var index = 0; index < controls.length; index++) {\n        var properties = controls[index].properties;\n        var searchType = properties.typeSearch || properties.rangeQuery || \"NONE\";\n        searchType = searchType.toUpperCase();\n\n        if (searchType === searchTypeFilter && !bizagi.util.isEmpty(controls[index].value)) {\n          return controls[index];\n        }\n      }\n\n    }\n  },\n  /**\r\n      * Initialize the context each time a search is done\r\n      */\n  cleanContext: function cleanContext() {\n    var context = bizagi.injector.get(\"accumulatedcontext\");\n    context.clean();\n  } });","/**\r\n *\r\n */\nbizagi.workportal.widgets.loadForm.extend(\"bizagi.workportal.widgets.loadForm\", {\n  postRender: function postRender() {\n    var self = this;\n  } });","/*\r\n *   Name: BizAgi Workportal Desktop Integration old render within new look and feel\r\n *   Author: Edward Morales\r\n *   Comments:\r\n *   -   This script define base controller to integrate old render within new workportal\r\n */\n\n// Extends itself\nbizagi.workportal.widgets.oldrenderintegration.extend(\"bizagi.workportal.widgets.oldrenderintegration\", {}, {\n  /*\r\n                                                                                                              *   Constructor\r\n                                                                                                              */\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n    // Call base\n    this._super(workportalFacade, dataService, params);\n\n    // Declare widget variables\n    self.taskState = \"all\"; // general taskState from tabs\n    self.icoTaskState = \"\"; // real staskState from list cases\n    self.idWorkflow = 0;\n    self.idCase = 0;\n\n    //Load templates\n    self.loadTemplates({\n      \"integration-old-render\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.oldrenderintegration\").concat(\"#ui-bizagi-workportal-widget-oldrender\"),\n      useNewEngine: false });\n\n  },\n  /*\r\n     *   To be overriden in each device to apply layouts\r\n     */\n  postRender: function postRender() {\n    var self = this,\n    content = self.getContent();\n\n    if (self.params.restoreStatus) {\n      bizagi.referrerParams = bizagi.referrerParams || {};\n    } else {\n      bizagi.referrerParams = bizagi.referrerParams ? { page: bizagi.referrerParams.page } : {};\n    }\n\n    self.params.taskState = self.params.taskState || bizagi.referrerParams.taskState || \"all\";\n\n\n    // Bind navigation bar\n    // Set idcase data\n    $(\".back\", content).data(\"idCase\", self.getBackCase());\n    $(\".next\", content).data(\"idCase\", self.getNextCase());\n\n    // Bind for click event on back and bext botton\n    $(\".back, .next\", content).click(function () {\n      var idCase = $(this).data(\"idCase\");\n      if (idCase > 0) {\n        self.publish(\"executeAction\", {\n          action: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,\n          idCase: idCase });\n\n      }\n    });\n\n    // Bind for click event on refresh botton\n    $(\".refresh\", content).click(function () {\n      self.publish(\"executeAction\", {\n        action: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,\n        idCase: self.params.idCase,\n        idTask: self.params.idTask,\n        idWorkItem: self.params.idWorkitem,\n        referrer: self.params.referrer || \"inboxGrid\" });\n\n    });\n\n    // Bind for click event on return botton\n    $(\".ui-bizagi-wp-app-inbox-bt-back, #innerContentInbox > h2\", content).click(function () {\n      var widget = bizagi.referrerParams.referrer || bizagi.cookie('bizagiDefaultWidget');\n      // switch referer widget\n      switch (widget) {\n        case \"inbox\":\n          self.publish(\"changeWidget\", {\n            widgetName: widget,\n            restoreStatus: true });\n\n          break;\n        case \"inboxGrid\":\n          self.publish(\"changeWidget\", {\n            widgetName: widget,\n            restoreStatus: true });\n\n          break;\n        case \"search\":\n          self.publish(\"executeAction\", {\n            action: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_SEARCH,\n            radNumber: bizagi.referrerParams.radNumber || \"\",\n            page: bizagi.referrerParams.page || 1,\n            onlyUserWorkItems: false });\n\n          break;\n        case \"queryform\":\n          self.publish(\"showDialogWidget\", {\n            widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_QUERYFORM,\n            queryFormAction: \"loadPrevious\" });\n\n          break;\n        case \"folders\":\n          var url = bizagi.referrerParams.urlParameters + \"&page=\" + bizagi.referrerParams.page;\n          $.when(self.dataService.getCasesByFolder(url)).\n          done(function (data) {\n            data.customized = true;\n            data.urlParameters = bizagi.referrerParams.urlParameters;\n\n            // Define title of widget\n            data.title = bizagi.referrerParams.name;\n\n            // Set a flag here to tell the search widget that must show the ungroup case from folder (icon).\n            data.casesGroupedByFolder = true;\n            data.idFolder = bizagi.referrerParams.id;\n\n            self.publish(\"changeWidget\", {\n              widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_SEARCH,\n              data: data,\n              referrerParams: {} });\n\n          });\n          break;\n        default:\n          self.publish(\"changeWidget\", {\n            widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX,\n            restoreStatus: true });\n\n          break;}\n\n    });\n\n    // Bind for hover event on refresh and return botton\n    $(\".refresh,.return\", content).hover(function () {\n      $(this).addClass(\"active\");\n    }, function () {\n      $(this).removeClass(\"active\");\n    });\n\n    // Bind for hover event on next and back botton\n    $(\".next,.back\", content).hover(\n    function () {\n      if ($(this).data(\"idCase\") > 0) {\n        $(this).addClass(\"active\");\n      }\n    },\n    function () {\n      $(this).removeClass(\"active\");\n    });\n\n\n    // Insert iframe with old render\n    self.insertIframeOldRender();\n  },\n  getInjectJavaScript: function getInjectJavaScript(params) {\n\n    var args = {};\n    var callback = function callback(args) {\n      this.changeToWidget = function (widget) {\n        args.controller.publish(\"changeWidget\", {\n          widgetName: args.bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID });\n\n      };\n\n      this.openBACase = function (idCase, sHref) {\n        var workitem = null;\n        if (sHref.indexOf(\"idWorkitem=\") > -1) {\n          workitem = sHref.substring(sHref.indexOf(\"idWorkitem=\") + 11);\n          workitem = workitem.substring(0, workitem.indexOf(\"&\"));\n        }\n        // Executes the act on\n        args.controller.publish(\"executeAction\", {\n          action: args.routingAction,\n          idCase: idCase,\n          idWorkItem: workitem });\n\n\n        // close dialog\n        params.controller.publish(\"closeCurrentDialog\");\n      };\n    };\n\n\n    return {\n      callback: callback,\n      args: {\n        routingAction: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,\n        bizagi: bizagi } };\n\n\n\n  },\n  insertIframeOldRender: function insertIframeOldRender() {\n    var self = this;\n    var content = self.getContent();\n    var iframe;\n    var theme = \"bizagiDefault\";\n    var queryString = bizagi.readQueryString();\n\n    $.each(content, function () {\n      if ($(this).is(\"iframe\")) {\n        iframe = $(this);\n      }\n    });\n\n    iframe.load(function () {\n      // inject css\n      var content = $(this).contents();\n      var getInjectJS = self.getInjectJavaScript();\n\n      // Fixed problem with relative path across the different browsers\n      var cssLocation = $.browser.mozilla || $.browser.webkit ? \"../../css/render_%theme%.css\" : \"css/render_%theme%.css\";\n\n      // Define theme\n      cssLocation = cssLocation.replace(\"%theme%\", queryString[\"theme\"] || theme);\n\n      // Append css\n      $('head', content).append(\"<link type='text/css' rel='stylesheet' href='\" + cssLocation + \"'>\");\n\n      iframe.callInside(\n      getInjectJS.callback,\n      $.extend(getInjectJS.args, {\n        controller: self }));\n\n\n\n      content.bind('click', function () {\n        bizagi.workportal.desktop.popup.closePopupInstance();\n      });\n\n      // Append javascript\n      $('head', content).append(\"<script type='text/javascript' src='../../js/renderintegration.js'></script>\");\n\n      // Hack position fixed for IE8 in quirks mode\n      /*if ($.browser.msie && parseInt($.browser.version, 10) <= 8) {\r\n          var fixWizard = '<!--[if lte IE 8]> <style type=\"text/css\"> #floater1Div { position: absolute; bottom: auto; right: auto; top: expression( ( -10 - floater1Div.offsetHeight + ( document.documentElement.clientHeight ? document.documentElement.clientHeight : document.body.clientHeight ) + ( ignoreMe = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop ) ) + \"px\" ); left: expression( ( -20 - floater1Div.offsetWidth + ( document.documentElement.clientWidth ? document.documentElement.clientWidth : document.body.clientWidth ) + ( ignoreMe2 = document.documentElement.scrollLeft ? document.documentElement.scrollLeft : document.body.scrollLeft ) ) + \"px\" ); } #divClose { bottom: -3px; left: 0; } </style> <![endif]--><!--[if lte IE 7]> <link href=\"../../css/estilos.css\" type=\"text/css\" rel=\"stylesheet\" /> <![endif]-->';\r\n          $('head', content).append(fixWizard);\r\n      }*/\n\n      // Remove all the old elements than doesn't look well\n      var $oldElements = $('body img[src*=\"Button.gif\"], body td[style*=\"CellShadow.gif\"], body img[src*=\"tab_active\"], body img[src*=\"tab_inactive\"]', content);\n\n      // Remove elements\n      $oldElements.parent().remove();\n\n      // Fix scroll bug in FF\n      iframe.css('overflow-y', 'auto');\n\n    });\n  },\n  /*\r\n     *  Navigation options\r\n     */\n  getListKey: function getListKey() {\n    var self = this;\n    bizagi.lstIdCases = bizagi.lstIdCases || {};\n    if (bizagi.lstIdCases.length > 1) {\n      for (var i = 0; i < bizagi.lstIdCases.length; i++) {\n        if (self.params.idCase == bizagi.lstIdCases[i]) {\n          return i;\n        }\n      }\n    }\n    return -1;\n  },\n  getNextCase: function getNextCase() {\n    var self = this;\n    var nextIdCase = 0;\n    var key = self.getListKey();\n\n    // Check if last element\n    if (bizagi.lstIdCases.length == key + 1 || bizagi.lstIdCases.length == 1) {\n      nextIdCase = -1;\n    } else {\n      nextIdCase = bizagi.lstIdCases[key + 1];\n    }\n\n    return nextIdCase;\n  },\n  getBackCase: function getBackCase() {\n    var self = this;\n    var prevIdCase = 0;\n    var key = self.getListKey();\n\n    // Check if first element\n    if (key == 0) {\n      prevIdCase = -1;\n    } else {\n      prevIdCase = bizagi.lstIdCases[key - 1];\n    }\n\n    return prevIdCase;\n  } });","/**\r\n *   Name: Bizagi Workportal Desktop Create Case Controller\r\n *   Author: Alexander Mejia\r\n */\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.createcase\", {}, {\n  /**\r\n                                                                                       *   Constructor\r\n                                                                                       */\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    // Private fields\n    self._processId = params.idObject;\n    self._mapping = params.mapping || [];\n    self._idParentCase = params.idParentCase;\n    self._mappingstakeholders = params.mappingstakeholders;\n    self._guidprocess = params.guidprocess;\n\n    //Load templates\n    self.loadTemplates({\n      \"createcase\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.createcase\").concat(\"#createcase-wrapper\") });\n\n  },\n\n  /**\r\n      * Renders the template defined in the widget\r\n      */\n  renderContent: function renderContent() {\n    var self = this,\n    template = self.getTemplate(\"createcase\");\n    self.content = template.render();\n\n    return self.content;\n  },\n\n  /**\r\n      * Process widget\r\n      */\n  postRender: function postRender() {\n    var self = this,\n    defer = new $.Deferred(),\n    $content = self.getContent();\n\n    bizagi.loader.start(\"rendering\").then(function () {\n      $.when(self.dataService.getStartForm(self._getServiceParams())).then(function (data) {\n        return self._getRenderingFacade().execute({ canvas: self._getCanvasForm(), data: data, type: \"\" });\n      }).done(function (form) {\n        self.startForm = form;\n        $content.find('#createcase-content').append(form.container);\n        defer.resolve($content);\n      });\n    });\n\n    return defer.promise();\n  },\n\n  /**\r\n      * Returns an instance of rendering facade\r\n      */\n  _getRenderingFacade: function _getRenderingFacade() {\n    var self = this;\n\n    if (!self._rendering) {\n      self._rendering = new bizagi.rendering.facade({ \"proxyPrefix\": bizagi.RPproxyPrefix, \"database\": \"\" });\n    }\n\n    return self._rendering;\n  },\n\n  /**\r\n      * Returns an object with the parameters available to gets the start form\r\n      */\n  _getServiceParams: function _getServiceParams() {\n    var self = this,\n    params = self.getMapping();\n\n    params[\"h_action\"] = \"LOADSTARTFORM\";\n\n    if (self._idParentCase) {\n      params[\"h_idParentCase\"] = self._idParentCase;\n    }\n    if (self._mappingstakeholders) {\n      params[\"h_mappingstakeholders\"] = self._mappingstakeholders;\n    }\n    if (self._guidprocess) {\n      params[\"h_guidprocess\"] = self._guidprocess;\n    } else\n    {\n      params[\"h_idProcess\"] = self._processId;\n    }\n    return params;\n  },\n\n  /**\r\n      * Builds the mapping to send at LOADSTARTFORM action\r\n      */\n  getMapping: function getMapping() {\n    var self = this,\n    params = {};\n\n    for (var i = 0, l = self._mapping.length; i < l; i++) {\n      var map = self._mapping[i];\n      if (map.surrogateKey) {\n        params[map.xpath] = JSON.stringify(map.surrogateKey);\n      }\n    }\n\n    return params;\n  },\n\n  /**\r\n      * returns the canvas used renderize the start form, also the\r\n      * routing event is attach al canvas.\r\n      * after the case is created succesfully, the form trigger the routing event\r\n      */\n  _getCanvasForm: function _getCanvasForm() {\n    var self = this,\n    $content = self.getContent();\n    var $canvas = $content.find('#createcase-content');\n\n    // When the case is created, rendering module trigger the routing event\n    $canvas.on('routing', $.proxy(self.onCaseCreated, self));\n    return $canvas;\n  },\n\n  /**\r\n      * This handler is called when the create button is clicked in\r\n      * the start form\r\n      */\n  onCaseCreated: function onCaseCreated(ev, params) {\n    var self = this;\n    self.pub('closeDialog', params);\n  },\n\n  /**\r\n      * Dispose widget\r\n      */\n  dispose: function dispose() {\n    var self = this;\n    if (self.startForm) {\n      self.pub('createCaseDisposed');\n      self.startForm.dispose();\n    }\n    // Call base\n    self._super();\n  } });\n\n\nbizagi.injector.register('bizagi.workportal.widgets.createcase', ['workportalFacade', 'dataService', bizagi.workportal.widgets.createcase], true);","/**\r\n * Name: Bizagi Workportal Desktop Update Form Controller\r\n * Author: Alexander Mejia\r\n */\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.updateform\", {}, {\n  /**\r\n                                                                                       *   Constructor\r\n                                                                                       */\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n    // Private fields\n    self._guidForm = params.guidForm;\n    self._entityGuid = params.entityGuid;\n    self._surrogateKey = params.surrogateKey;\n    self._mapping = params.mapping;\n    self._readonlyform = params.readonlyform;\n    //Load templates\n    self.loadTemplates({\n      \"updateform\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.updateform\").concat(\"#updateform-wrapper\"),\n      \"content\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.updateform\").concat(\"#form-content\") });\n\n  },\n\n  /**\r\n      * Renders the template defined in the widget\r\n      */\n  renderContent: function renderContent() {\n    var self = this,\n    template = self.getTemplate(\"updateform\");\n    self.content = template.render();\n\n    return self.content;\n  },\n\n  /**\r\n      * Process widget\r\n      */\n  postRender: function postRender() {\n    var self = this,\n    defer = new $.Deferred(),\n    $content = self.getContent();\n\n    self.dataService.getEntityForm(self._getServiceParams()).then(function (data) {\n      return self._getRenderingFacade().execute({ canvas: $content.find('#updateform-content'), data: data, type: \"\" });\n    }).done(function (form) {\n      $content.find('#updateform-content').append(form.container);\n      defer.resolve($content);\n    });\n\n    return defer.promise();\n  },\n\n  /**\r\n      * Returns an instance of rendering facade\r\n      * */\n  _getRenderingFacade: function _getRenderingFacade() {\n    var self = this;\n\n    if (!self._rendering) {\n      self._rendering = new bizagi.rendering.facade({ \"proxyPrefix\": bizagi.RPproxyPrefix, \"database\": \"\" });\n    }\n    self._rendering.subscribe('rendering-formRendered', $.proxy(self._overrideHandlers, self));\n\n    return self._rendering;\n  },\n\n  /**\r\n      * Returns an object with the parameters available to gets the start form\r\n      * */\n  _getServiceParams: function _getServiceParams() {\n    var self = this,\n    params = {};\n\n    params[\"h_action\"] = \"LOADENTITYFORM\";\n    params[\"h_contexttype\"] = \"entity\";\n    params[\"h_guidForm\"] = self._guidForm;\n    params[\"h_showDisabled\"] = false;\n    params[\"h_guidEntity\"] = self._entityGuid;\n    params[\"h_readonlyform\"] = self._readonlyform;\n\n    if (self._mapping) {\n      params[\"h_mapping\"] = JSON.stringify(self._mapping);\n    }\n\n    if (self._surrogateKey) {\n      params[\"h_surrogateKey\"] = self._surrogateKey;\n    }\n\n    return params;\n  },\n\n  /**\r\n      * returns the canvas used renderize the start form, also the\r\n      * routing event is attach al canvas.\r\n      * after the case is created succesfully, the form trigger the routing event\r\n      */\n  _getCanvasForm: function _getCanvasForm() {\n    var self = this;\n    var formTemplate = self.getTemplate('content');\n\n    return formTemplate.render();\n  },\n\n  /**\r\n      *\r\n      * @private\r\n      */\n  _overrideHandlers: function _overrideHandlers() {\n    var self = this,\n    form = typeof self._rendering === \"undefined\" ? null : self._rendering.form;\n\n    if (form) {\n      self.idPageCache = self.idPageCache || form.idPageCache;\n      var properties = form.properties;\n      var originalProcessButton = form.processButton;\n\n      form.processButton = function (buttonProperties) {\n        var action = buttonProperties.action;\n\n        if (action == \"cancel\") {\n          form.endLoading();\n          self.pub('closeDialog', { refresh: false });\n          form.dispose();\n        } else\n        {\n          properties.surrogateKey = self._surrogateKey;\n          properties.contextType = \"entity\";\n\n          form.bind('refresh', function () {\n            form.endLoading();\n            self.pub('closeDialog', { refresh: true });\n            form.dispose();\n          });\n\n          return originalProcessButton.apply(form, arguments);\n        }\n      };\n\n    }\n  },\n\n  /**\r\n      * Dispose\r\n      */\n  dispose: function dispose() {\n    var self = this;\n    if (self._rendering && self._rendering.form) {\n      self._rendering.form.dispose();\n    }\n    bizagi.util.dispose(self);\n  } });\n\nbizagi.injector.register('bizagi.workportal.widgets.updateform', ['workportalFacade', 'dataService', bizagi.workportal.widgets.updateform], true);","/**\r\n * This widget show information of entities using Template engine\r\n */\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.templates\", {}, {\n  /**\r\n                                                                                      * Constructor\r\n                                                                                      * @param workportalFacade\r\n                                                                                      * @param dataService\r\n                                                                                      * @param actionService\r\n                                                                                      * @param accumulatedcontext\r\n                                                                                      * @param processActionService\r\n                                                                                      * @param params\r\n                                                                                      * @param casetoolbar\r\n                                                                                      * @param usersCasesService\r\n                                                                                      * @param actionsEventsService\r\n                                                                                      */\n  init: function init(workportalFacade, dataService, actionService, casetoolbar, usersCasesService, actionsEventsService, accumulatedcontext, processActionService, params) {\n    var self = this;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    //Load templates\n    self.loadTemplates({\n      \"templateEngine\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.templateEngine\").concat(\"#templateengine-wrapper\"),\n      \"templateEngineElement\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.templateEngine\").concat(\"#templateengine-wrapper-element\"),\n      \"templateEngineTooltip\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.templateEngine\").concat(\"#templateengine-wrapper-tooltip\"),\n      \"templateEmptyData\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.templateEngine\").concat(\"#templateengine-empty-message\") });\n\n\n    //Private fields\n    self.selectorCheckboxItems = \".template-box-header input:checkbox\";\n    self.actionService = actionService;\n    self.casetoolbar = casetoolbar;\n    self.usersCasesService = usersCasesService;\n    self.actionsEventsService = actionsEventsService;\n    self.processActionService = processActionService;\n    self.accumulatedcontext = accumulatedcontext;\n    self._currentPage = 1;\n    self.entitiesSelected = {};\n  },\n\n  /**\r\n      * Renders the template defined in the widget\r\n      * @return {*}\r\n      */\n  renderContent: function renderContent() {\n    var self = this;\n    var template = self.getTemplate(\"templateEngine\");\n    self.content = template.render({});\n\n    return self.content;\n  },\n\n  /**\r\n      * links events with handlers\r\n      */\n  postRender: function postRender() {\n    var self = this;\n    self.configureHandlers();\n  },\n\n  /**\r\n      * configure Handlers\r\n      */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    var $content = self.getContent();\n\n    $content.find(\"#template-dataviewer-list\").on(\"click\", self.selectorCheckboxItems, $.proxy(self.onEntityChecked, self));\n\n    self.sub(\"GET-COMMON-ACTIONS\", $.proxy(self.getCommonActions, self));\n\n    self.sub(\"TEMPLATEENGINE-VIEW\", function (ev, params) {\n      self.params.event = \"TEMPLATEENGINE-VIEW\";\n      return self.updateData(params);\n    });\n\n    self.sub(\"SEARCH-ENGINE-VIEW\", function (ev, params) {\n      self.params.event = \"SEARCH-ENGINE-VIEW\";\n      return self.updateData(params);\n    });\n\n    self.sub(\"UPDATE-DATATEMPLATE-VIEW\", function (ev, params) {\n      return self.updateData(params);\n    });\n\n    self.sub(\"SET-VALUES\", function (ev, params) {\n      return self.setValues(params);\n    });\n\n    self.actionService.subscribe(\"onFormActionExecuted\", $.proxy(self.onFormActionExecuted, self));\n    self.processActionService.subscribe(\"onFormRuleExecuted\", $.proxy(self.onFormRuleExecuted, self));\n    self.processActionService.subscribe(\"onFormExecuted\", $.proxy(self.onFormExecuted, self));\n  },\n\n  /**\r\n      * Gets entity data and inject it in the defined template\r\n      * @param params\r\n      * @return {*}\r\n      */\n  updateData: function updateData(params) {\n    var self = this;\n    var args = params.args || {};\n    var defer = new $.Deferred();\n\n    // Clean the displayed data before getting the new one\n    var $dataViewList = $(\"#template-dataviewer-list\", self.getContent());\n    $dataViewList.empty();\n\n    self.actionService.init();\n    self.entitiesSelected = {};\n\n    self._referrer = args.guidSearch ? \"search\" : args.referenceType ? \"dataNavigation\" : self._referrer;\n    self._page = args.page || self._page;\n    self._totalRecords = args.totalRecords;\n    self._filters = args.filters || self._filters;\n    self._defaultFilterApplied = typeof args.defaultFilterApplied !== \"undefined\" ? args.defaultFilterApplied : typeof self._defaultFilterApplied !== \"undefined\" ? self._defaultFilterApplied : true;\n    self._guidSearch = args.guidSearch || self._guidSearch;\n    self._fromActionLauncher = typeof args.fromActionLauncher !== \"undefined\" ? args.fromActionLauncher : self._fromActionLauncher;\n    self._reference = args.reference || self._reference || \"\";\n    self._surrogateKey = args.surrogateKey || self._surrogateKey;\n    self._referenceType = args.referenceType || self._referenceType;\n    self._xpath = args.xpath || self._xpath;\n    self._guidEntityCurrent = args.guidEntityCurrent || self._guidEntityCurrent;\n    self._pageSize = args.pageSize || self._pageSize;\n    self._onlyLocalResults = args.onlyLocalResults || self._onlyLocalResults;\n\n    // Get entity data\n    var entityDataParams = {\n      guidSearch: self._guidSearch,\n      fromActionLauncher: self._fromActionLauncher,\n      reference: self._reference,\n      surrogateKey: self._surrogateKey,\n      referenceType: self._referenceType,\n      page: self._page,\n      filters: self._filters,\n      filtersAppliedCounter: args.filtersAppliedCounter,\n      totalRecords: self._totalRecords,\n      calculateFilters: typeof args.calculateFilters === \"undefined\" ? true : args.calculateFilters,\n      defaultFilterApplied: self._defaultFilterApplied,\n      xpath: self._xpath,\n      guidEntityCurrent: self._guidEntityCurrent,\n      pageSize: self._pageSize,\n      onlyLocalResults: self._onlyLocalResults };\n\n\n    $.when(self.getEntityData(entityDataParams)).then(function (data) {\n      var deferProcessEntities = $.Deferred();\n      if (data && data.reference === self._reference) {\n        //clone args, because bizagi.navigator.info is referenced to args\n        self.pub(\"notify\", { type: \"PAGINATOR-UPDATE\", args: $.extend(bizagi.clone(args), data, { event: params.type }) });\n        $.when(self.processEntities($.extend(data, { referenceType: self._referenceType }))).done(function (response) {\n          deferProcessEntities.resolve(response, data.reference);\n        });\n      } else\n      {\n        deferProcessEntities.reject();\n      }\n      return deferProcessEntities.promise();\n\n    }).done(function (entitiesData, reference) {\n      if (reference === self._reference) {\n        self.checkAll = false; //When updateData always uncheck all\n        $.when(self.renderEntities(entitiesData, args)).done(function () {\n          self.pub(\"notify\", {\n            type: \"ENABLE-BATCHS-ACTIONS\",\n            args: { commonActions: self.setValues({ args: { value: self.checkAll } }) } });\n\n          defer.resolve(entitiesData);\n        });\n      }\n    });\n\n    return defer.promise();\n  },\n\n  /**\r\n      * returns an instance of  the template engine\r\n      * @return {*}\r\n      */\n  getTemplateEngine: function getTemplateEngine() {\n    var self = this;\n\n    if (self.templateEngine) {\n      return self.templateEngine;\n    }\n\n    var renderDataService = new bizagi.render.services.service({ proxyPrefix: bizagi.RPproxyPrefix });\n    var renderFactory = new bizagi.rendering.desktop.factory(renderDataService);\n    var defer = new $.Deferred();\n\n    $.when(renderFactory.initAsyncStuff()).done(function () {\n      self.templateEngine = new bizagi.templateEngine({\n        renderFactory: renderFactory,\n        cache: true,\n        router: self.router });\n\n\n      self.templateEngine.subscribe(\"onLoadDataNavigation\", function (ev, params) {\n        var data = params.data || {};\n        var args = {\n          reference: data.reference,\n          surrogateKey: data.surrogateKey,\n          referenceType: data.referenceType,\n          histName: data.displayName,\n          guidEntityCurrent: data.guidEntityCurrent,\n          filters: [],\n          page: 1,\n          calculateFilters: true };\n\n\n        if (typeof data.xpath !== \"undefined\" && data.xpath) {\n          args.xpath = data.xpath;\n        }\n\n        self.accumulatedcontext.addContext({ \"entityGuid\": params.data.guidEntityCurrent, \"surrogateKey\": [params.data.surrogateKey] });\n\n        var getLevelNavigator = self.pub(\"notify\", { type: \"NAVIGATOR_GETLEVEL\" });\n        var currentLevelNavigator = getLevelNavigator && getLevelNavigator.length > 0 ? parseInt(getLevelNavigator[0]) : 1;\n\n        self.pub(\"notify\", {\n          type: data.contextEvent,\n          args: $.extend(args, { level: currentLevelNavigator + 1 }) });\n\n      });\n      defer.resolve(self.templateEngine);\n    });\n    return defer.promise();\n  },\n\n  /**\r\n      * match in a json the cells columns with headerMapper\r\n      * @param {JSON} data \r\n      */\n  _matchHeaderWithColumns: function _matchHeaderWithColumns(data) {\n    var ERROR_STR = \"_matchHeaderWithColumns: property \",\n    onError = function onError(str, response) {\n      console.error(ERROR_STR + str + \" does not exist\");\n      return response;\n    },\n    validArray = function validArray(value) {\n      var isArray = Array.isArray(value);\n      if (!isArray)\n      console.error(ERROR_STR + \" value is not an array\");\n      return isArray ? value : [];\n    },\n    columns = bizagi.util.tryCatch(\n    function () {return validArray(data.cells[0].columns);},\n    onError.bind(null, \"data.cells[0].columns\", [])),\n\n    headerMapper = bizagi.util.tryCatch(\n    function () {return validArray(data.cells[0].headerMapper);},\n    onError.bind(null, \"data.cells[0].headerMapper\", columns)),\n\n    xpathMatch = columns.reduce(function (xPaths, col, i) {\n      var _exists = headerMapper[i] !== undefined;\n      xPaths[col] = _exists ? headerMapper[i] : col;\n      return xPaths;\n    }, {});\n\n    return xpathMatch;\n  },\n\n  /**\r\n      * Gets the data related to entity\r\n      * @param params\r\n      * @return {*}\r\n      */\n  getEntityData: function getEntityData(params) {\n    var self = this;\n    var appliedFilters = params.filters;\n    var filtersAppliedCounter = params.filtersAppliedCounter;\n    var calculateFilters = params.calculateFilters,\n    _matchDataHeaders = function _matchDataHeaders(data) {\n      var extra = {\n        columnsXPaths: self._matchHeaderWithColumns(data) };\n\n      return $.extend(data, extra);\n    };\n\n    if (self._referrer === \"search\") {\n      return self.dataService.getSearchData(params).\n      pipe(_matchDataHeaders).\n      then(function (data) {\n        self.setFiltersData(data.filters, appliedFilters, filtersAppliedCounter, data.totalRecords, calculateFilters, null);\n        return $.extend(data, { reference: params.reference });\n      });\n    } else\n    {\n      return self.dataService.getCollectionEntityData(params).\n      pipe(_matchDataHeaders).\n      then(function (data) {\n        if (self._reference === data.reference) {\n          var totalRecords = data.totalRecords;\n\n          if (totalRecords > 0) {\n            var referenceType = params.referenceType;\n            if (referenceType === \"FACT\") {\n              self.dataService.getFiltersEntityData(params).then(function (filtersData) {\n                if (self._reference === filtersData.reference) {\n                  self.processFiltersData(filtersData, appliedFilters, filtersAppliedCounter, totalRecords, calculateFilters, params.defaultFilterApplied);\n                  self.updateCounterFiltersApplied(appliedFilters);\n                }\n              }).fail(function () {\n                self.hideSortBar();\n              });\n            } else\n            {\n              self.hideSortBar();\n            }\n          }\n          // There is no data but there is an applied filter\n          else if (filtersAppliedCounter > 0) {\n              self.setFiltersData([], appliedFilters, filtersAppliedCounter, totalRecords, false, null);\n              self.updateCounterFiltersApplied(appliedFilters);\n            } else\n            {\n              self.hideSortBar();\n            }\n          return $.extend(data, { reference: params.reference });\n        }\n      });\n    }\n  },\n\n  /**\r\n      *\r\n      */\n  hideSortBar: function hideSortBar() {\n    var self = this;\n\n    self.pub(\"notify\", { type: \"HIDE-SORT-BUTTONS\", args: {} });\n    self.pub(\"notify\", { type: \"HIDE-FILTER-BUTTONANDBAR\", args: {} });\n  },\n\n  /**\r\n      *\r\n      * @param filtersData\r\n      * @param appliedFilters\r\n      * @param filtersAppliedCounter\r\n      * @param totalRecords\r\n      * @param calculateFilters\r\n      * @param defaultFilterApplied\r\n      */\n  processFiltersData: function processFiltersData(filtersData, appliedFilters, filtersAppliedCounter, totalRecords, calculateFilters, defaultFilterApplied) {\n    var self = this;\n\n    if (defaultFilterApplied) {\n      var appliedFilter = {\n        properties: { xpath: \"\", type: \"entity\", typeSearch: \"exact\" },\n        value: [] };\n\n      var a,i = -1,count = 0;\n      while (a = filtersData[++i]) {\n        var data = a.data;\n        if (a.type === \"Entity\") {\n          var b,j = -1;\n          while (b = data.defaultValues[++j]) {\n            if (b.applied) {\n              appliedFilter.properties.xpath = a.attribute;\n              appliedFilter.value.push({ \"id\": b.id });\n              count++;\n            }\n          }\n        }\n      }\n      if (count > 0) {\n        appliedFilters.push(appliedFilter);\n      }\n      filtersAppliedCounter = typeof filtersAppliedCounter !== \"undefined\" ? filtersAppliedCounter + count : count;\n      self.setFiltersData(filtersData, appliedFilters, filtersAppliedCounter, totalRecords, calculateFilters, defaultFilterApplied);\n    } else\n    {\n      self.setFiltersData(filtersData, [], filtersAppliedCounter, totalRecords, calculateFilters, null);\n    }\n  },\n\n  /**\r\n      *\r\n      * @param filters\r\n      * @param filtersApplied\r\n      * @param filtersAppliedCounter\r\n      * @param totalRecords\r\n      * @param calculateFilters\r\n      * @param defaultFilterApplied\r\n      */\n  setFiltersData: function setFiltersData(filters, filtersApplied, filtersAppliedCounter, totalRecords, calculateFilters, defaultFilterApplied) {\n    var self = this;\n    var args = {\n      filters: filters || [],\n      filtersApplied: filtersApplied,\n      filtersAppliedCounter: filtersAppliedCounter || 0,\n      totalRecords: totalRecords || 0,\n      calculateFilters: calculateFilters || false };\n\n\n    if (defaultFilterApplied) {\n      args.defaultFilterApplied = defaultFilterApplied;\n    }\n\n    self.pub(\"notify\", {\n      type: \"SET-FILTERS-DATA\",\n      args: args });\n\n  },\n\n  /**\r\n      * Renders each entity and return a promise, it will be resolved when all entities has been procesed\r\n      * @param data\r\n      * @return {*}\r\n      */\n  processEntities: function processEntities(data) {\n    var self = this;\n    var result = [];\n    var processEntities = [];\n    var defer = new $.Deferred();\n    var templateType = data.referenceType === \"ENTITY\" ? \"Content\" : \"List\";\n\n    if (data.reference === self._reference) {\n      bizagi.loader.start(\"rendering\").then(function () {\n        $.when(self.getTemplateEngine()).then(\n        $.proxy(function (engine) {\n          return $.when.apply($, $.map(data.entities, $.proxy(function (entity) {\n            processEntities.push({ surrogateKey: entity.surrogateKey, entityId: entity.guid });\n\n            var entityData = $.extend(entity, { isDefaultTemplate: entity.guidTemplate === null, templateType: templateType }),\n            entityDataForRender = $.extend({}, entityData, { columnsXPaths: data.columnsXPaths });\n            var paramsRender = { contextEvent: this.params.event };\n            return engine.render(entityDataForRender, paramsRender);\n          }, this)));\n        }, self)).\n        done(function () {\n          var templates = $.makeArray(arguments);\n          var tmpl;\n\n          for (var i = 0, l = data.entities.length; i < l; i++) {\n            tmpl = l === 1 ? templates[i] : templates[i][0];\n            result.push({ tmpl: tmpl, data: data.entities[i] });\n          }\n\n          //dont repeat request with the same params\n          var requestRepeat = false;\n          if (typeof self.idCasesOfProcessEntitiesPromise !== \"undefined\" &&\n          self.idCasesOfProcessEntitiesPromise.state() === \"pending\" &&\n          self.lastParamsSendit &&\n          JSON.stringify(processEntities) === self.lastParamsSendit)\n          {\n            defer.reject();\n            requestRepeat = true;\n          }\n\n          if (!requestRepeat) {\n            // Promesa que retorna id de casos (cuando la entidad es una entidad de proceso) y sera utilizada después\n            // al renderizar el TMPL - ver renderEntities\n            self.lastParamsSendit = JSON.stringify(processEntities);\n            self.idCasesOfProcessEntitiesPromise = self.dataService.getIdCasesOfProcessEntities(processEntities);\n            $.when(self.idCasesOfProcessEntitiesPromise).done(function () {\n              defer.resolve(result);\n            });\n          }\n        });\n      });\n    } else\n    {\n      defer.reject();\n    }\n\n    return defer.promise();\n  },\n\n  /**\r\n      * Gets entity data and inject it in the defined template\r\n      * @param entitiesData\r\n      * @param args\r\n      */\n  renderEntities: function renderEntities(entitiesData, args) {\n    var self = this;\n    var generalDefer = $.Deferred();\n    var collectionDeferreds = [];\n    var $dataViewList = $(\"#template-dataviewer-list\", self.getContent());\n    var entitiesLength = self.entitiesLength = entitiesData.length;\n    var $elementsTmpl = $();\n\n    for (var i = 0; i < entitiesLength; i++) {\n      var $template = self.renderTemplate(entitiesData[i], false, args);\n      $elementsTmpl.push.apply($elementsTmpl, $template);\n    }\n\n    if ($elementsTmpl.length > 0) {\n      $dataViewList.append($elementsTmpl);\n      // Dado que la respuesta de este servicio se puede demorar, primero se renderiza todas las entidades\n      // y despues se busca cuales de ellas son entidades de proceso\n      collectionDeferreds.push(self.getIdCasesOfProcessEntities(entitiesData, args.fromActionLauncher, $dataViewList));\n      $.when.apply($, collectionDeferreds).done(function () {\n        generalDefer.resolve();\n      });\n    } else\n    {\n      $dataViewList.append(self.getEmptyDataMessage());\n      generalDefer.resolve();\n    }\n\n    return generalDefer.promise();\n  },\n\n  /**\r\n      * returns the template for the current entity\r\n      * @param entity\r\n      * @param isRefresh\r\n      * @param params\r\n      * @return {*}\r\n      */\n  renderTemplate: function renderTemplate(entity, isRefresh, params) {\n    var self = this;\n    var entityData = entity.data || {};\n    var surrogateKey = entityData.surrogateKey;\n    var guidEntity = entityData.guid;\n    var fromActionLauncher = params.fromActionLauncher;\n\n    //Render card tmpl with data\n    var $templateData = self.getTemplate(\"templateEngineElement\").render({\n      fromActionLauncher: fromActionLauncher,\n      guidEntity: guidEntity,\n      isChecked: self.checkAll,\n      surrogateKey: surrogateKey });\n\n    //Render entity tmpl in card tmpl\n    $templateData.find(\"#template\").append(entity.tmpl);\n\n    return $templateData;\n  },\n\n  /**\r\n      * Get IdCases Of Process Entities and get actions and events\r\n      */\n  getIdCasesOfProcessEntities: function getIdCasesOfProcessEntities(entitiesData, fromActionLauncher, content) {\n    var self = this;\n    var generalDefer = $.Deferred();\n\n    if (typeof self.collectionGetActionsDeferred === \"undefined\") {\n      self.collectionGetActionsDeferred = [];\n    }\n\n    self.idCasesOfProcessEntitiesPromise.then(function (response) {\n      var idCases = [];\n      var a,i = -1;\n      while (a = response[++i]) {\n        var idCase = a.caseId;\n        if (typeof idCase !== \"undefined\" && idCase > 0) {\n          var entity = entitiesData.find(function (el) {\n            return el.data.surrogateKey === a.surrogateKey;\n          });\n\n          if (typeof entity !== \"undefined\" && typeof idCase !== \"undefined\") {\n\n            var data = entity.data || {};\n            var $cardWrapper = $(\"#template-box-wrapper-\" + data.surrogateKey, content);\n            var $casetoolbar = self.casetoolbar.getCaseToolbar({ casetoolbarData: { idcase: idCase, referrer: \"RenderTemplate\" } });\n\n            $(\".template-box-header .casetoolbar\", $cardWrapper).append($casetoolbar);\n            $(self.selectorCheckboxItems, $cardWrapper).data(\"caseid\", idCase);\n            idCases.push(idCase);\n            $.extend(data, { idCase: idCase });\n\n          }\n        }\n      }\n      self.actionsEventsService.render(idCases);\n    }).always(function () {\n      var i = -1,e;\n      var countRequest = Object.keys(entitiesData).length;\n      if (self.collectionGetActionsDeferred.length > 0) {\n        self.collectionGetActionsDeferred = [];\n      }\n      while (e = entitiesData[++i]) {\n        var data = e.data || {};\n        self.collectionGetActionsDeferred.push(self.getEntityActionsAndEvents(fromActionLauncher, false, data.guidEntity, data.surrogateKey, data.idCase));\n      }\n      $.when.apply($, self.collectionGetActionsDeferred).done(function () {\n        generalDefer.resolve();\n        self.collectionGetActionsDeferred = [];\n      });\n\n\n    });\n    return generalDefer.promise();\n  },\n\n  /**\r\n      * Get Entity Actions and Events\r\n      * @param fromActionLauncher\r\n      * @param guidEntity\r\n      * @param surrogateKey\r\n      * @param idCase\r\n      * @param isRefresh\r\n      */\n  getEntityActionsAndEvents: function getEntityActionsAndEvents(fromActionLauncher, isRefresh, guidEntity, surrogateKey, idCase) {\n    var self = this;\n    var defer = $.Deferred();\n    var content = self.getContent();\n\n    // Get Actions and Events only if it does not come from actionlauncher\n    if (!fromActionLauncher) {\n      setTimeout(function () {\n        var $footer = content.find(\"#template-box-wrapper-\" + surrogateKey + \" .template-box-footer\");\n        var params = {\n          actionData: {\n            guidEntity: guidEntity,\n            surrogateKey: surrogateKey },\n\n          loadEvents: false,\n          isRefresh: isRefresh };\n\n\n        // If there is idCase then loadEvents\n        if (typeof idCase !== \"undefined\" && idCase > 0) {\n          params.actionData.idCase = idCase;\n          params.loadEvents = true;\n        }\n        // Render loading\n        $footer.startLoading({ delay: 0, overlay: true });\n        // Get actions and events\n        $.when(self.actionService.getActionsView(params)).done($.proxy(function (reference, responseActions) {\n          var $actionsView = responseActions.actionsView;\n          var actionsData = responseActions.actionsData;\n\n          if (reference === self._reference) {\n            var $item = content.find(\"#template-box-wrapper-\" + surrogateKey + \" .template-box-element .template-box-footer\");\n            if ($actionsView) {\n              $item.empty().append($actionsView);\n\n              if (actionsData.length > 0 && self.getCheckBox($item).data(\"surrogatekey\") != -1) {\n                self.showCheckItem($item);\n                self.pub(\"notify\", {\n                  type: \"SOME-ITEM-ALLOW-SELECT\",\n                  args: {} });\n\n              } else\n              {\n                self.removeCheckItem($item);\n              }\n            } else\n            {\n              self.removeCheckItem($item);\n            }\n            $footer.endLoading();\n            defer.resolve();\n          }\n        }, self, bizagi.clone(self._reference)));\n      }, 0);\n    }\n    return defer.promise();\n  },\n\n  /**\r\n      * Get check item by case\r\n      * @param $item\r\n      */\n  getCheckBox: function getCheckBox($item) {\n    var self = this;\n    return $item.closest(\".template-box-element\").find(self.selectorCheckboxItems);\n  },\n\n  /**\r\n      * Hide check item\r\n      * @param $item\r\n      */\n  removeCheckItem: function removeCheckItem($item) {\n    var self = this;\n    self.getCheckBox($item).after(\"<div></div>\").remove(); //Add div because CSS with flex\n  },\n\n  /**\r\n      * Show checkbox\r\n      * @param $item\r\n      */\n  showCheckItem: function showCheckItem($item) {\n    var self = this;\n    self.getCheckBox($item).show();\n  },\n\n  /**\r\n      * Returns the model\r\n      * @return {{}}\r\n      */\n  getCommonActions: function getCommonActions() {\n    var self = this;\n    var model = {};\n\n    model.actions = self.actionService.getCommonActions(self.entitiesSelected);\n    model.surrogateKeys = [];\n    model.checkAll = undefined;\n\n    for (var surrogateKey in self.entitiesSelected) {\n      model.surrogateKeys.push(typeof surrogateKey === \"string\" ? parseInt(surrogateKey) : surrogateKey);\n    }\n    model.guidEntity = surrogateKey !== undefined ? self.entitiesSelected[surrogateKey].guidEntity : \"\";\n\n    if (model.surrogateKeys.length === 0) {\n      self.checkAll = false;\n      model.checkAll = false;\n    } else\n    if (model.surrogateKeys.length == self.entitiesLength) {\n      self.checkAll = true;\n      model.checkAll = true;\n    } else\n    if (model.surrogateKeys.length !== self.entitiesLength) {\n      self.checkAll = false;\n      model.checkAll = false;\n    }\n\n    model.itemsSelected = self.entitiesSelected;\n\n    return model;\n  },\n\n  /**\r\n      * Handler to hold the entities selected\r\n      * @param ev\r\n      */\n  onEntityChecked: function onEntityChecked(ev) {\n    var self = this;\n    var $target = $(ev.target);\n    var surrogateKey = $target.data(\"surrogatekey\");\n    var guidentity = $target.data(\"guidentity\");\n    var isChecked = $target.is(\":checked\");\n    var caseId = $target.data(\"caseid\");\n    var params = {\n      surrogateKey: surrogateKey,\n      guidEntity: guidentity };\n\n\n    if (typeof caseId !== \"undefined\" && caseId > 0) {\n      params.idCase = caseId;\n    }\n\n    self.entitiesSelected[surrogateKey] = params;\n\n    if (!isChecked) {\n      delete self.entitiesSelected[surrogateKey];\n    }\n\n    self.pub(\"notify\", { type: \"ENABLE-BATCHS-ACTIONS\", args: { commonActions: self.getCommonActions() } });\n  },\n\n  /**\r\n      * Set current value\r\n      * @param params\r\n      * @return {*}\r\n      */\n  setValues: function setValues(params) {\n    var self = this;\n    var $content = self.getContent();\n    var args = params.args || {};\n    var isChecked = args.value;\n\n    if ($content) {\n      self.entitiesSelected = {};\n      var $inputs = $content.find(self.selectorCheckboxItems);\n\n      $.map($inputs, function (input) {\n        $(input).prop(\"checked\", isChecked);\n\n        if (isChecked) {\n          var surrogateKey = $(input).data(\"surrogatekey\"),\n          guidentity = $(input).data(\"guidentity\"),\n          idCase = $(input).data(\"caseid\");\n\n          self.entitiesSelected[surrogateKey] = {\n            surrogateKey: surrogateKey,\n            guidEntity: guidentity,\n            idCase: idCase };\n\n        }\n      });\n\n      self.checkAll = isChecked;\n\n      return self.getCommonActions();\n    }\n  },\n\n  /**\r\n      *\r\n      * @param ev\r\n      * @param params\r\n      */\n  onFormActionExecuted: function onFormActionExecuted(ev, params) {\n    var self = this;\n\n    if (params.refresh) {\n      self.refreshRegister(params);\n    }\n  },\n\n  /**\r\n      *\r\n      * @param ev\r\n      * @param params\r\n      */\n  onFormRuleExecuted: function onFormRuleExecuted(ev, params) {\n    var self = this;\n\n    if (params.refresh) {\n      self.refreshRegister(params.action);\n    }\n  },\n\n  onFormExecuted: function onFormExecuted(ev, params) {\n    var self = this;\n\n    if (params.refresh) {\n      self.refreshRegister(params.action);\n    }\n  },\n\n  /**\r\n      * Gets data of current register and update it\r\n      * @param params\r\n      */\n  refreshRegister: function refreshRegister(params) {\n    var self = this;\n    if (self._referrer == \"search\") {\n      self.updateData({ args: { calculateFilters: false } });\n    } else\n    if (self._referrer == \"dataNavigation\") {\n      // It is necessary to send calculateFilters = true so when the data is modified the min and max of\n      // each filter is recalculated\n      self.updateData({ args: {\n          calculateFilters: true } });\n\n    } else\n    {\n      // Get element to refresh\n      var idBox = \"#template-box-wrapper-\" + params.surrogateKey;\n      var $templateBox = $(idBox);\n      var isChecked = $templateBox.find(\".template-box-header > input:checkbox\").is(\":checked\");\n\n      var filters = {\n        operator: \"\",\n        filters: [{\n          key: \"id\",\n          value: params.surrogateKey }] };\n\n\n\n      $templateBox.startLoading({ delay: 250, overlay: true });\n\n      $.when(self.getEntityData({\n        reference: params.reference,\n        surrogateKey: params.surrogateKey,\n        referenceType: params.referenceType,\n        xpath: params.xpath,\n        guidEntityCurrent: params.guidEntityCurrent,\n        page: self._page,\n        filters: filters })).\n      then(function (data) {\n        return self.processEntities(data);\n      }).done(function (result) {\n        var renderedTemplate = self.renderTemplate(result[0], true, params);\n        $templateBox.replaceWith(renderedTemplate);\n        $templateBox.endLoading();\n        // Restore checked value\n        if (isChecked) {\n          $templateBox = $(idBox);\n          $templateBox.find(\".template-box-header > input\").prop(\"checked\", true);\n        }\n      }).always(function () {\n        $templateBox.endLoading();\n      });\n    }\n  },\n\n  /**\r\n      *\r\n      */\n  router: function router() {\n  },\n\n  /**\r\n      * Gets Message when there aren't data\r\n      * @return {*}\r\n      */\n  getEmptyDataMessage: function getEmptyDataMessage() {\n    var self = this;\n    var emptyTemplate = self.getTemplate(\"templateEmptyData\");\n\n    return emptyTemplate.render()[0].outerHTML;\n  },\n\n  /**\r\n      *\r\n      * @param filtersApplied\r\n      */\n  updateCounterFiltersApplied: function updateCounterFiltersApplied(filtersApplied) {\n    var self = this;\n    var counterFilterParams = {\n      type: \"UPDATE-COUNTER-FILTERS-APPLIED\",\n      args: {\n        filtersApplied: filtersApplied } };\n\n\n    self.pub(\"notify\", counterFilterParams);\n  },\n\n  /**\r\n      * Detach events\r\n      */\n  clean: function clean() {\n    var self = this;\n    var $content = self.getContent();\n\n    self._currentPage = 1;\n    self._pageSize = 10;\n    self.checkAll = false;\n\n    if ($content) {\n      $content.find(\"#template-dataviewer-list\").off(\"click\", self.selectorCheckboxItems);\n      self.unsub(\"TEMPLATEENGINE-VIEW\");\n      self.unsub(\"SEARCH-ENGINE-VIEW\");\n      self.unsub(\"UPDATE-DATATEMPLATE-VIEW\");\n      self.unsub(\"GET-COMMON-ACTIONS\");\n      self.unsub(\"SET-VALUES\");\n      self.actionService.unsubscribe(\"onFormActionExecuted\");\n      self.processActionService.unsubscribe(\"onFormRuleExecuted\");\n      self.processActionService.unsubscribe(\"onFormExecuted\");\n    }\n  } });\n\n\nbizagi.injector.register(\"bizagi.workportal.widgets.templates\", [\"workportalFacade\", \"dataService\", \"actionService\", \"casetoolbar\", \"usersCasesService\", \"actionsEventsService\", \"accumulatedcontext\", \"processActionService\", bizagi.workportal.widgets.templates]);","/*\r\n*   Name: BizAgi Workportal\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will define helper functions so the projects can customize via javascript some aspects for the UI appearance and some behaviours\r\n*/\nbizagi = typeof bizagi !== \"undefined\" ? bizagi : {};\nbizagi.override = typeof bizagi.override !== \"undefined\" ? bizagi.override : {};\n\n/*\r\n                                                                                 *   Allow to customize an url in the workportal\r\n                                                                                 */\nbizagi.override.customWorkportalHandlers = {};\nbizagi.override.customizeWorkportalHandler = function (handler, newUrl) {\n\n  // Redefine a handler to allow customization\n  bizagi.override.customWorkportalHandlers[handler] = newUrl;\n};\n\nif (bizagi.workportal.services.context) {\n  bizagi.workportal.services.context.original = $.extend(true, {}, bizagi.workportal.services.context.prototype);\n  $.extend(bizagi.workportal.services.context.prototype, {\n    getUrl: function getUrl(service) {\n      if (this.context == \"workportal\" && bizagi.override.customWorkportalHandlers[service]) {\n        return bizagi.override.customWorkportalHandlers[service];\n      }\n      return bizagi.workportal.services.context.original.getUrl.apply(this, arguments);\n    } });\n\n}\n\n/*\r\n  *   Allows to extend widget features by extending the postRender method and calling a custom calllback\r\n  */\nbizagi.override.customizeWorkportalWidget = function (widget, extensionMethod) {\n  var widgetImplementation = bizagi.workportal.desktop.facade.getWidgetImplementation(widget);\n\n  if (widgetImplementation) {\n\n    // Prototype modification\n    eval(widgetImplementation).extend(widgetImplementation, {}, {\n      /*\r\n                                                                        *   Override postRender\r\n                                                                        */\n      postRender: function postRender() {\n        var self = this;\n\n        // Call bizagi implementation\n        self._super();\n\n        // Call custom implementation\n        var content = self.getContent();\n        if (extensionMethod) extensionMethod(this, content);\n      } });\n\n  }\n};\n\n/*\r\n   *   Allows to add custom menus to the main menu bar\r\n   */\nbizagi.override.customButtons = [];\nbizagi.override.addCustomMenuButton = function (button) {\n  bizagi.override.customButtons.push(button);\n};\n// Set an override to menu\nif (bizagi.workportal.controllers.menu) {\n  bizagi.workportal.controllers.menu.original = $.extend(true, {}, bizagi.workportal.controllers.menu.prototype);\n  $.extend(bizagi.workportal.controllers.menu.prototype, {\n    postRender: function postRender() {\n      var self = this;\n      var customButtonTemplate = self.workportalFacade.getTemplate(\"menu.custom-button\");\n\n      // Render the menu\n      return $.when(bizagi.workportal.controllers.menu.original.postRender.apply(this, arguments)).\n      pipe(function (result) {\n        var menuButtonContainer = $(\"[data-bizagi-component=menuItems]\", result);\n\n        $.each(bizagi.override.customButtons, function (i, button) {\n\n          if (typeof button.isAvailable == \"function\") {\n            if (!button.isAvailable()) return;\n          }\n          var customButton = $.tmpl(customButtonTemplate, button);\n\n          // Bind click handler\n          if (button.submenu == null) {\n            customButton.click(function () {\n              if (button.click) button.click(self);\n            });\n          } else {\n            customButton.click(function () {\n              // Pops up the submenu\n              self.renderSubMenu(customButton, button.submenu, button.click);\n            });\n          }\n\n          menuButtonContainer.append(customButton);\n        });\n\n        return result;\n      });\n    } });\n\n}\n\n/*\r\n  *   Allows to add custom services\r\n  */\nbizagi.override.addDataService = function (functionName, fn) {\n  if (bizagi.workportal.services.service) {\n    bizagi.workportal.services.service.original = $.extend(true, {}, bizagi.workportal.services.service.prototype);\n\n    // Create an extension object\n    var extensionObject = {};\n    extensionObject[functionName] = fn;\n\n    // Extend data service\n    $.extend(bizagi.workportal.services.service.prototype, extensionObject);\n  }\n};\n\n//TODO: How to customize project aspx or ashx without compilation","$.Class.extend(\"bizagi.ui.controls.tmplloader\", {}, {\n\n  init: function init() {\n    this.templates = [];\n  },\n\n  loadTemplates: function loadTemplates(tmpls) {\n\n    var self = this;\n    var templatesMap = tmpls || {};\n\n    var defer = new $.Deferred();\n    var arrPromises = [];\n\n    $.each(templatesMap, function (key, template) {\n      var promise = self.loadTemplate(key, template);\n      arrPromises.push(promise);\n    });\n\n    $.when.apply($, arrPromises).\n    done(function () {\n      defer.resolve();\n    });\n\n    return defer.promise();\n  },\n\n  loadTemplate: function loadTemplate(name, path) {\n\n    var self = this;\n    var templates = self.templates;\n    var defer = new $.Deferred();\n\n    if (templates[name]) {\n      defer.resolve();\n    } else {\n      return bizagi.templateService.getTemplate(path).\n      done(function (tmpl) {\n        templates[name] = tmpl;\n      });\n    }\n    return defer.promise();\n  },\n\n  getTemplate: function getTemplate(name) {\n\n    var self = this;\n    var templates = self.templates;\n\n    if (templates[name]) {\n      return templates[name];\n    } else {\n      return null;\n    }\n  } });","/**\r\n * Zoom plugin creates a drag and scroll control\r\n *\r\n * @author Andrés Fernando Muñoz\r\n */\n(function ($) {\n\n  $.widget(\"diagram.dragScroll\", {\n    options: {},\n\n\n    _create: function _create() {\n      var self = this;\n      var options = this.options;\n      var clicked = false;\n      self.curYPos = 0;\n      self.curXPos = 0;\n\n      $(self.element).css({\n        'cursor': 'move' });\n\n\n      $(self.element).bind(\"mousedown\", function (e) {\n        clicked = true;\n\n        self.options.$scrollable.data({\n          \"clicked\": clicked });\n\n\n        self.curYPos = e.pageY;\n        self.curXPos = e.pageX;\n        self.scrollLeft = self.options.$scrollable.scrollLeft();\n        self.scrollTop = self.options.$scrollable.scrollTop();\n        options.$scrollable.bind(\"mousemove\", function (e) {\n          if (clicked) {\n            self._move(e.pageX, e.pageY);\n          }\n        });\n      });\n\n      $(self.element).bind(\"mouseup\", function (e) {\n        clicked = false;\n        self.options.$scrollable.data({\n          \"clicked\": clicked });\n\n        options.$scrollable.unbind(\"mousemove\");\n      });\n\n\n    },\n    /**\r\n        * Moves the element\r\n        * @param x, x axis differential\r\n        * @param y, y axis differential\r\n        * @private\r\n        */\n    _move: function _move(x, y) {\n      var self = this;\n      var moveX = self.scrollLeft + self.curXPos - x;\n      var moveY = self.scrollTop + self.curYPos - y;\n      if (moveX != 0 && moveY != 0) {\n        self.options.$scrollable.scrollTop(moveY);\n        self.options.$scrollable.scrollLeft(moveX);\n      }\n\n    },\n\n\n    destroy: function destroy() {\n      // Call the base destroy function.\n      $.Widget.prototype.destroy.call(this);\n    } });\n\n})(jQuery);","/**\r\n * This file contains all keys that can be change the default functionality\r\n * of Bizagi, please use it carefully.\r\n *\r\n * @author Edward J Morales\r\n */\n\n\n// TODO: Please make a documentation for each override\n\n/**\r\n * Active folders functionality that is used in workportal inbox to create\r\n * categories of process\r\n *\r\n * @type {boolean}\r\n */\nbizagi.override.enableFolder = false;\n\n/**\r\n                                       * Smart Folders are case repositories that meet certain filters.\r\n                                       * Each smart folder can be associated with a filter, for example,\r\n                                       * all files that have been registered as of a determined date.\r\n                                       *\r\n                                       * @type {boolean}\r\n                                       */\nbizagi.override.enableSmartFolders = false;\n\n/**\r\n                                             * This functionality allow a new tap within modal window of new case,\r\n                                             * that create a shortcut to most used process\r\n                                             *\r\n                                             * @type {boolean}\r\n                                             */\nbizagi.override.enableListOfRecentProcesses = false;\n\n\n/**\r\n                                                      * Unused key. The Author must be define what can do\r\n                                                      *\r\n                                                      * @type {boolean}\r\n                                                      */\nbizagi.override.enableCustomizeReports = false;\n\n/**\r\n                                                 * This key enable within admin menu a new item that will\r\n                                                 * open \"Multiple case reassigment\" module\r\n                                                 *\r\n                                                 * SNAKE-1296\r\n                                                 * @type {boolean}\r\n                                                 */\nbizagi.override.enableMultipleCasesReassigment = false;\n\n/**\r\n                                                         * This key enable within admin menu a new item thah will\r\n                                                         * open \"Async ECM Upload\" module\r\n                                                         *\r\n                                                         * DRAGON-152 Adidas\r\n                                                         * @type {boolean}\r\n                                                         */\nbizagi.override.enableAsyncECMUploadJobs = false;\n\n/**\r\n                                                   * This key enable the capability to print an edit form of a grid\r\n                                                   * @type {boolean}\r\n                                                   */\nbizagi.override.enablePrintFromEditForm = false;\n\n/**\r\n                                                  * This key can be allow debug window in release environments\r\n                                                  * @type {boolean}\r\n                                                  */\nbizagi.enableDebug = false;\n\n/**\r\n                             * This key disable old windows and enable new REST development\r\n                             * @type {boolean}\r\n                             */\n//bizagi.override.disableFrankenstein = (typeof BIZAGI_SERVICE_ACTIVATION !== \"undefined\" && BIZAGI_SERVICE_ACTIVATION) ? true : false;\n\n\n/**\r\n * Disable old query forms and enable new tier using REST services\r\n * @type {boolean}\r\n */\nbizagi.override.disableFrankensteinQueryForms = true;\n\n/**\r\n                                                       * Change default behavior of grid column sort\r\n                                                       * @type String\r\n                                                       * @example desc || asc\r\n                                                       */\n//bizagi.override.gridDefaultSortBy= \"desc\";\n\n/**\r\n * Expose interface to access to DOM elements\r\n * @type {boolean}\r\n */\nbizagi.override.enableE2EInterface = true;\n\n/**\r\n                                            * Disable old inbox\r\n                                            * @type {boolean}\r\n                                            */\nbizagi.override.disableOldInbox = true;\n\n/**\r\n                                         * Time out to remove elements that not will be used anymore\r\n                                         * @type {number} Milliseconds\r\n                                         */\nbizagi.override.disposeTime = 50;\n\n/**\r\n                                   * Enable REST batch request functionality\r\n                                   * @type {boolean}\r\n                                   */\nbizagi.override.enableBatchRequest = true;\n\n/**\r\n                                            * force all request that consume a REST through Web API will be sending in a batch request\r\n                                            * @type {boolean}\r\n                                            */\nbizagi.override.forceBatchRequest = false;\n\n/**\r\n                                            * Security option to enable visualization of current assignee\r\n                                            * @type {boolean}\r\n                                            */\nbizagi.override.showAssignees = true;\n\n/**\r\n                                       *\r\n                                       * @type {boolean}\r\n                                       */\nbizagi.override.enableMySearch = true;\n\n/**\r\n                                        *\r\n                                        * @type {boolean}\r\n                                        */\nbizagi.override.enableSecurityCaseDashBoard = false;\n\n/**\r\n                                                      * Show classic view(Sub levels of application and entities)\r\n                                                      * @type {boolean}\r\n                                                      */\nbizagi.override.enableQueriesClassicMenu = false;\n\n/**\r\n                                                   * disable cancel cases functionality in manage cases and hide the Cancel cases tab in Admin cases\r\n                                                   * @type {boolean}\r\n                                                   */\nbizagi.override.disableAbortCases = false;\n\n\n\n/**\r\n                                            * Enable \"plus icon\" on inbox, and load Adhoc Process module\r\n                                            * @type {boolean}\r\n                                            */\nbizagi.override.enableAdhocProcess = false;\n\n/**\r\n                                             * Enable \"BCC/CC\" feature for Notification Task on Live Processes\r\n                                             * @type {boolean}\r\n                                             */\nbizagi.override.enableCCBCCFeatureOnLiveProcesses = true;\n\n/**\r\n                                                           * Enable \"Review Mode\" feature on Live Processes\r\n                                                           * @type {boolean}\r\n                                                           */\nbizagi.override.enableReviewModeFeatureOnLiveProcesses = true;\n\n/**\r\n                                                                * Enable \"Filter by process grouo\" feature on Live Processes\r\n                                                                * @type {boolean}\r\n                                                                */\nbizagi.override.enableFilterByProcessGroupOnLiveProcesses = false;\n\n/**\r\n                                                                    * Enable \"Support localization in the process modeler\" feature on Live Processes\r\n                                                                    * @type {boolean}\r\n                                                                    */\nbizagi.override.enableLocalizationInModelerOnLiveProcesses = true;\n\n/**\r\n                                                                    * Enable \"Support predefined performers in the process modeler\" feature on Live Processes\r\n                                                                    * @type {boolean}\r\n                                                                    */\nbizagi.override.enablePredefinedPerformersOnLiveProcesses = true;\n\n\n/**\r\n                                                                   * Enable \"Show timeline icon in inbox\" feature on Workportal\r\n                                                                   * @type {boolean}\r\n                                                                   */\nbizagi.override.enableFeatureShowTimelineButton = true;\n\n/**\r\n                                                         * Enable \"Display Options\" feature on Workportal\r\n                                                         * @type {boolean}\r\n                                                         */\nbizagi.override.enableFeatureDisplayOptions = false;\n\n/**\r\n                                                      * Enable \"Mazimize Modals\" option inside  \"Display Options\" feature on Workportal\r\n                                                      * @type {boolean}\r\n                                                      */\nbizagi.override.enableMaximizeModalsOption = false;\n\n/**\r\n                                                     * Enable \"Start Page\" option inside  \"Display Options\" feature on Workportal\r\n                                                     * @type {boolean}\r\n                                                     */\nbizagi.override.enableStartPageDisplayOption = false;\n\n/**\r\n                                                       * Enable \"Ping to Server\" feature on Workportal\r\n                                                       * @type {boolean}\r\n                                                       */\nbizagi.override.enablePing = false;\n\n/**\r\n                                    * Use multiaction implementation for get ECM metadata\r\n                                    * @type {boolean}\r\n                                    */\nbizagi.override.enableECMMetadataMultiaction = true;\n\n/* Validate the form before than buttons' actions\r\n                                                     */\nbizagi.override.validateGridsOnButtonClick = false;\n\n/* Enable custom formats form\r\n                                                     */\nbizagi.override.enableCustomFormats = false;\n\n/* Enable share activity\r\n                                              */\nbizagi.override.enableShareActivity = true;\n\n/* \r\n                                             * Enable format in Money type column in the queries results\r\n                                             */\nbizagi.override.enableFormatMoneyColumnQueryResult = true;\n\n/* \r\n                                                            * Enable symbol in Money type column in the queries results\r\n                                                            */\nbizagi.override.enableSymbolMoneyColumnQueryResult = true;\n\n/*\r\n                                                            * Refresh grid parent of cell when there are expressions on visible property\r\n                                                            */\nbizagi.override.enableGridRefreshAfterCellRefresh = false;\n\n/**\r\n                                                            * Show the QR mobile in user menu\r\n                                                            */\nbizagi.override.showQrMobileMenu = true;\n\n/**\r\n                                          * Allow execution action before to refresh (v11.2.4)\r\n                                          */\nbizagi.override.enableExecuteRefreshAction = true;\n\n/**\r\n                                                    * Restore control's appearance after to refresh (v11.2.4 R2 and latest)\r\n                                                    * @type {boolean}\r\n                                                    */\nbizagi.override.restoreAppearanceAfterRefresh = true;\n\n/**\r\n                                                       * Maximum number of button in the form\r\n                                                       * @type {number} Milliseconds\r\n                                                       */\nbizagi.override.maxButtonForQuickActions = 6;\n\n/**\r\n                                               * hide time when hour, minutes, seconds and milliseconds are 0\r\n                                               * @type {boolean}\r\n                                               */\nbizagi.override.hideTimeWhenHourMinutesSecondsAreZero = true;\n\n/**\r\n                                                               * Enable new changed action\r\n                                                               */\nbizagi.override.enableActionIsChangedSupport = true;\n\n/**\r\n                                                      * Enables the action to be built even if some control defined in the condition doesn't exist in the form\r\n                                                      */\nbizagi.override.breakActionWithUnavailableRenders = false;\n\n/**\r\n                                                            * Enable the use of property dataType in controls without this support before 11.2.5 \r\n                                                            * Default Value => true, but the key exists in order to support migration processes\r\n                                                            * Find the list of controls in the commit link, most important is hidden control.\r\n                                                            * https://bizagidev.visualstudio.com/DefaultCollection/Bizagi%20Core/_git/Bizagi.Core/commit/b8cf7ce2afe0aa917e63534f2d96b846f2682436\r\n                                                            */\nbizagi.override.hiddenControlsWithDataType = true;","\n/**\r\n *   Name: Bizagi Workportal Desktop Dashboard Controller\r\n *   Author: Mauricio Sánchez - Alexander Mejia\r\n */\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.dashboard\", {\n\n  data: {\n    \"home\": [{\n      type: \"cases\",\n      title: \"workportal-widget-dashboard-cases\",\n      items: [{\n        \"title\": \"workportal-widget-dashboard-pendings-title\",\n        \"iconclass\": \"pendings-ico\",\n        \"icon\": \"watch-pending-outline\",\n        \"data\": \"pendings\" },\n      {\n        \"title\": \"workportal-widget-dashboard-favorites-title\",\n        \"iconclass\": \"star-ico\",\n        \"icon\": \"star\",\n        \"data\": \"following\" }] }] } },\n\n\n\n\n{\n  /**\r\n   *   Constructor\r\n   */\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    //Load templates\n    self.loadTemplates({\n      \"dashboard\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.dashboard\").concat(\"#dashboard-wrapper\") });\n\n  },\n\n  /**\r\n      * Renders the template defined in the widget\r\n      */\n  renderContent: function renderContent() {\n    var self = this,\n    template;\n\n    template = self.getTemplate(\"dashboard\");\n    self.content = template.render(self.getData());\n\n    return self.content;\n\n  },\n\n  /**\r\n      * returns data\r\n      */\n  getData: function getData() {\n    var self = this,\n    result = {},\n    data = self.Class.data;\n\n\n    var content = data.home.slice(0);\n\n    result.home = $.map(content, function (item) {\n      item.title = bizagi.localization.getResource(item.title);\n      for (var i = 0, l = item.items.length; i < l; i++) {\n        item.items[i].title = bizagi.localization.getResource(item.items[i].title);\n      }\n      return item;\n    });\n\n    return result;\n\n  },\n\n  /**\r\n      * links events with handlers\r\n      */\n  postRender: function postRender() {\n    var self = this,\n    $content = self.getContent();\n\n    $content.closest(\".wdg-dash-board\").on(\"click\", \".wdg-db-card\", $.proxy(self.onShowCases, self));\n    $(window).trigger(\"resize\");\n  },\n\n  /**\r\n      *\r\n      */\n  clean: function clean() {\n    var self = this,\n    $content = self.getContent();\n\n    if ($content) {\n      $content.closest(\".wdg-dash-board\").off(\"click\", \".wdg-db-card\");\n    }\n  },\n\n  /**\r\n      * Shows the cases related to action clicked\r\n      */\n  onShowCases: function onShowCases(ev) {\n    var self = this,\n    $target = $(ev.target),\n    $route = $target.closest(\".wdg-db-card\").data(\"route\");\n\n    var $title = $target.closest(\".wdg-db-card\").find(\".wdg-db-title\");\n\n    self.pub(\"notify\", {\n      type: \"CASES-TEMPLATE-VIEW\",\n      args: {\n        histName: $.trim($title.text()),\n        page: 1,\n        level: 2,\n        route: $route,\n        idworkflow: \"\" } });\n\n\n  } });\n\nbizagi.injector.register(\"bizagi.workportal.widgets.dashboard\", [\"workportalFacade\", \"dataService\", bizagi.workportal.widgets.dashboard]);","/**\r\n * Bizagi Workportal Desktop Stuff Controller\r\n * @author Alexander Mejia\r\n */\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.stuff\", {}, {\n  /**\r\n                                                                                  * Constructor\r\n                                                                                  * @param workportalFacade\r\n                                                                                  * @param dataService\r\n                                                                                  * @param accumulatedcontext\r\n                                                                                  * @param params\r\n                                                                                  */\n  init: function init(workportalFacade, dataService, accumulatedcontext, params) {\n    var self = this;\n    self.accumulatedcontext = accumulatedcontext;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n    //Load templates\n    self.loadTemplates({\n      \"stuff\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.stuff\").concat(\"#stuff-wrapper\") });\n\n  },\n  /**\r\n      * Renders the template defined in the widget\r\n      * @return {*}\r\n      */\n  renderContent: function renderContent() {\n    var self = this;\n    var template = self.getTemplate(\"stuff\");\n\n    return $.when(self.getData()).done(function (data) {\n      self.content = data.collections.length > 0 ? template.render(data) : \"\";\n      return self.content;\n    });\n  },\n  /**\r\n      * links events with handlers\r\n      */\n  postRender: function postRender() {\n    var self = this;\n    var $content = self.getContent();\n\n    $('.wdg-stf-card', $content).on(\"click\", $.proxy(self.onClickEntity, self));\n    self.sub('TEMPLATEENGINE-VIEW', $.proxy(self.selectItem, self));\n  },\n  /**\r\n      *\r\n      * @returns {*}\r\n      */\n  getData: function getData() {\n    var self = this;\n\n    return $.when(self.dataService.getUserStuff({ icon: true })).then(function (data) {\n      data = self.buildModel(data) || {};\n      return {\n        title: bizagi.localization.getResource(\"workportal-widget-dashboard-stuff\"),\n        collections: data };\n\n    });\n  },\n  /**\r\n      * Add style to the selected item\r\n      */\n  selectItem: function selectItem() {\n    var self = this;\n    $('.wdg-stf-card', self.content).removeClass('wdg-stf-selected');\n    $(\"#\" + arguments[1].args.reference, self.content).addClass('wdg-stf-selected');\n  },\n  /**\r\n      * Holds a refence to each collection\r\n      * @param data\r\n      * @return {Array}\r\n      */\n  buildModel: function buildModel(data) {\n    var self = this;\n    var collections = {};\n    var items = [];\n    data = data || {};\n    self.model = {};\n\n    for (var i = 0, lf = data.length; i < lf; i++) {\n      var item = data[i];\n      item.guid = Math.guid();\n      collections[item.guid] = item;\n      items.push(item);\n    }\n\n    self.model.collections = collections;\n\n    return items;\n  },\n  /**\r\n      * Raises the execution of templates for the entity selected\r\n      * @param ev\r\n      */\n  onClickEntity: function onClickEntity(ev) {\n    var self = this;\n    var target = $(ev.target).closest('.wdg-stf-card');\n    var item = self.model.collections[target.data('guid')];\n    var args = {\n      calculateFilters: true,\n      filters: [],\n      fromActionLauncher: false,\n      histName: target.data('title') || item.displayName,\n      level: 1,\n      page: 1,\n      reference: item.reference,\n      referenceType: item.referenceType,\n      surrogateKey: item.surrogateKey };\n\n\n    if (typeof item.entityId !== \"undefined\" && item.entityId) {\n      args.guidEntityCurrent = item.entityId;\n    }\n    if (typeof item.xpath !== \"undefined\" && item.xpath) {\n      args.xpath = item.xpath;\n    }\n\n    self.accumulatedcontext.clean();\n\n    self.pubDeadLockDetection(\"notify\", { type: \"TEMPLATEENGINE-VIEW\", args: args });\n  },\n  /**\r\n      *  Detach events linked\r\n      */\n  clean: function clean() {\n    var self = this;\n    var $content = self.getContent();\n\n    if ($content) {\n      $('.wdg-stf-card', $content).off('click');\n      self.unsub('TEMPLATEENGINE-VIEW');\n    }\n  } });\n\n\nbizagi.injector.register('bizagi.workportal.widgets.stuff', ['workportalFacade', 'dataService', 'accumulatedcontext', bizagi.workportal.widgets.stuff]);","/*\r\n *   Name: Bizagi Workportal Desktop Project Base\r\n *   Author: David Romero Estrada\r\n */\n\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.project.base\", {}, {\n\n  /*\r\n                                                                                        * Initilize\r\n                                                                                        */\n  init: function init(workportalFacade, dataService, params) {\n\n    var self = this;\n    params = params || {};\n    self.differenceMillisecondsServer = params.differenceMillisecondsServer;\n    self.uploadMaxFilesSize = bizagi.currentUser.uploadMaxFileSize;\n    self.supportFileExt = [\n    \".jpg\",\n    \".pdf\",\n    \".txt\",\n    \".png\",\n    \".pptx\",\n    \".docx\",\n    \".gif\",\n    \".rtfx\",\n    \".xlsx\",\n    \".zip\",\n    \".rar\"];\n\n\n    // Set radNumber\n    self.radNumber = params.radNumber;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n  },\n\n  renderContent: function renderContent() {\n    var self = this;\n\n    if (!self.differenceMillisecondsServer) {\n      return $.when(self.dataService.getDateServer()).done(function (response) {\n        self.differenceMillisecondsServer = bizagi.util.dateFormatter.getDifferenceBetweenDates(new Date(), new Date(response.date), \"milliseconds\");\n      });\n    }\n  },\n  /*\r\n     * Calculate Server Date\r\n     */\n  getDateServer: function getDateServer() {\n\n    var dateLocal = new Date();\n\n    return dateLocal.getTime() + this.differenceMillisecondsServer;\n  },\n\n  mergePropertiesActivitiesWithWorkitems: function mergePropertiesActivitiesWithWorkitems(activities, workItems) {\n    activities.forEach(function (activity) {\n      var workItemFilter = workItems.filter(function (workItem) {\n        return workItem.guidActivity === activity.id;\n      });\n      if (workItemFilter.length > 0) {\n        $.extend(activity, {\n          startDate: workItemFilter[0].wiEntryDate || null,\n          finishDate: workItemFilter[0].wiSolutionDate || null,\n          idWorkItem: workItemFilter[0].idWorkItem,\n          workItemState: workItemFilter[0].workItemState,\n          idCase: workItemFilter[0].idCase,\n          estimatedFinishDate: workItemFilter[0].wiEstimatedSolutionDate || activity.estimatedFinishDate });\n\n      }\n    });\n  } });\n\n\n\n\nbizagi.injector.register(\"bizagi.workportal.widgets.project.base\", [\"workportalFacade\", \"dataService\", bizagi.workportal.widgets.project.base], true);","/*\r\n *   Name: Bizagi Workportal Desktop descontextualized plans Controller\r\n *   Author: Iván Ricardo Taimal Narváez\r\n */\n\nbizagi.workportal.widgets.widget.extend('bizagi.workportal.widgets.decontextualized.plans', {\n  data: {\n    title: 'workportal-widget-dashboard-decontextualized-plans-title',\n    items: [\n    {\n      'title': 'workportal-widget-dashboard-decontextualized-plans-pendings-title',\n      'description': 'workportal-widget-dashboard-decontextualized-plans-pendings-description',\n      'iconclass': 'star-ico',\n      'icon': 'pending',\n      'data': 'PENDING' },\n\n    {\n      'title': 'workportal-widget-dashboard-decontextualized-plans-running-title',\n      'description': 'workportal-widget-dashboard-decontextualized-plans-running-description',\n      'iconclass': 'star-ico',\n      'icon': 'executing',\n      'data': 'EXECUTING' },\n\n    {\n      'title': 'workportal-widget-dashboard-decontextualized-plans-completed-title',\n      'description': 'workportal-widget-dashboard-decontextualized-plans-completed-description',\n      'iconclass': 'star-ico',\n      'icon': 'closed',\n      'data': 'CLOSED' }] } },\n\n\n\n{\n  /**\r\n   *   Constructor\r\n   * @param workportalFacade\r\n   * @param dataService\r\n   * @param params\r\n   */\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    //Load templates\n    self.loadTemplates({\n      'decontextualized.plans': bizagi.getTemplate('bizagi.workportal.desktop.widget.decontextualized.plans').concat('#plans-wrapper') });\n\n  },\n\n  /**\r\n      * Renders the template defined in the widget\r\n      * @return {*}\r\n      */\n  renderContent: function renderContent() {\n    var self = this,\n    template,\n    data,\n    filteredData = {};\n    template = self.getTemplate(\"decontextualized.plans\");\n\n    if (bizagi.menuSecurity.Plans) {\n      data = self.getData();\n      filteredData.title = data.title;\n      self.content = template.render(data);\n    } else\n    {\n      self.content = $(\"<div></div>\");\n    }\n\n    return self.content;\n  },\n\n  /**\r\n      * links events with handlers\r\n      */\n  postRender: function postRender() {\n    var self = this,\n    $content = self.getContent();\n    $.when(self.getServerDateDifference()).then(function (resolveGetDateServer) {});\n    $('.wdg-plans-card', $content).on('click', $.proxy(self.onClickCard, self));\n  },\n\n  /**\r\n      * Gets data, Fact entities related with stakeholders\r\n      * @return {{}}\r\n      */\n  getData: function getData() {\n    var self = this,\n    result = {},\n    data = self.Class.data;\n    result.items = $.map(data.items, function (item) {\n      item.title = bizagi.localization.getResource(item.title);\n      item.description = bizagi.localization.getResource(item.description);\n      return item;\n    });\n    result.title = bizagi.localization.getResource(data.title);\n    return result;\n  },\n\n\n  /**\r\n      * Raises the execution of templates for the entity selected\r\n      * @param ev\r\n      */\n  onClickCard: function onClickCard(ev) {\n    var self = this,\n    target = $(ev.target).closest('.wdg-plans-card'),\n    title = target.data('title'),\n    data = target.data('data');\n    var args = {\n      histName: title,\n      planState: data,\n      flowContext: 'FLOW-DECONTEXTUALIZED-PLANS',\n      isOpen: true, //TODO  fix state for decontextualized plans,\n      level: 1 };\n\n    self.pub('notify', {\n      type: 'PLANS-VIEW',\n      args: $.extend(self.params, args) });\n\n  },\n\n  /**\r\n      *\r\n      * @returns {*}\r\n      */\n  getServerDateDifference: function getServerDateDifference() {\n    var self = this;\n    return self.dataService.getDateServer().done(function (response) {\n      self.params.differenceMillisecondsServer = bizagi.util.dateFormatter.getDifferenceBetweenDates(new Date(), new Date(response.date), 'milliseconds');\n    });\n  },\n\n  /**\r\n      * Detach events linked\r\n      */\n  clean: function clean() {\n    var self = this,\n    $content = self.getContent();\n\n    if ($content) {\n      $('.wdg-plans-card', $content).off('click');\n    }\n  } });\n\n\nbizagi.injector.register('bizagi.workportal.widgets.decontextualized.plans', ['workportalFacade', 'dataService', bizagi.workportal.widgets.decontextualized.plans]);","/**\r\n *   Name: Bizagi Workportal Desktop Navigator Controller\r\n *   Author: Mauricio Sánchez - Alexander Mejia\r\n */\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.navigator\", {\n  CONTEXTS: {\n    ACTIVITY: \"ACTIVITY\",\n    EDIT_ACTIVITY: \"EDITACTIVITY\",\n    ACTIVITY_PLAN: \"ACTIVITYPLAN\",\n    HOME: \"HOME\",\n    TEMPLATE_ENGINE_VIEW: \"TEMPLATEENGINE-VIEW\",\n    PLANS_VIEW: \"PLANS-VIEW\",\n    PLAN_ACTIVITIES: \"PLANACTIVITIES\",\n    CASES_TEMPLATE_VIEW: \"CASES-TEMPLATE-VIEW\" },\n\n  CLASSES: {\n    GRID_CONTAINER: \"ui-bizagi-wp-project-grid-container\" } },\n\n{\n  /**\r\n   *   Constructor\r\n   */\n  init: function init(workportalFacade, dataService, accumulatedcontext, params) {\n    var self = this;\n    // Call base\n    self.workportalFacade = workportalFacade;\n    self.accumulatedcontext = accumulatedcontext;\n    self.dataService = dataService;\n    self._super(workportalFacade, dataService, params);\n\n    // Params\n    self.flagDisplayDate = true;\n    self.printFormCommand = new bizagi.workportal.command.printform(self.workportalFacade);\n    self.fromClickBreadCrumb = false;\n    self.showReleaseButton = false;\n    self.caseLink = params && params.caseLink ? params.caseLink : false;\n    self.taskOptionsWidget = new bizagi.workportal.widgets.task.options(workportalFacade, dataService, params);\n\n    // Used to save parameters from the form\n    self.onRenderFinishParams = null;\n\n    //Load templates\n    self.loadTemplates({\n      \"navigator\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.navigator\").concat(\"#navigator-wrapper\"),\n      \"child\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.navigator\").concat(\"#navigator-child\"),\n      \"popup-release\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.navigator\").concat(\"#navigator-popup-release\") });\n\n    self.accumulatedcontext = accumulatedcontext;\n\n    self.releaseDialogBox = {};\n  },\n\n  /**\r\n      * Renders the template defined in the widget\r\n      */\n  renderContent: function renderContent() {\n    var self = this;\n    var template = self.getTemplate(\"navigator\");\n    self.content = template.render($.extend(self.getDataObj(), { security: bizagi.menuSecurity }));\n    bizagi.navigator = bizagi.navigator || { info: {} };\n    self.info = bizagi.navigator.info;\n    self._level = Object.keys(self.info).length - 1;\n    $(\".navbar-print\", self.content).on(\"click\", $.proxy(self.printCase, self));\n    $(\".navbar-back\", self.content).on(\"click\", $.proxy(self.goToBack, self));\n    $(\".navbar-assignation-everyone > .ae-action\", self.content).on(\"click\", $.proxy(self.actionButtonEvent, self));\n    self.releaseDialogBox.formContent = self.getTemplate(\"popup-release\").render({});\n\n    return self.content;\n  },\n  /**\r\n      * links events with handlers\r\n      */\n  postRender: function postRender() {\n    var self = this;\n    var content = self.getContent();\n    var $container = content.find(\"ul\");\n    self.sub('ON_RENDER_FINISH', $.proxy(self.onRenderFinish, self));\n    self.sub(\"NAVIGATE\", $.proxy(self.refresh, self));\n    self.sub(\"UPDATE_LASTCRUMBPARAMS_INFO\", $.proxy(self.updateLastCrumbParamsInfo, self));\n    self.sub(\"NAVIGATOR_GETLEVEL\", function () {\n      return self.getLevel();\n    });\n    self.sub(\"NAVIGATOR_BACK\", $.proxy(self.goToPreviousCrumb, self));\n    $container.on(\"click\", \"li\", $.proxy(self.crumbEvent, self));\n\n    self.plugins = {};\n    self.plugins.popupRelease = {\n      form: {\n        buttonAccept: $(\"#button-accept-release\", self.releaseDialogBox.formContent),\n        buttonCancel: $(\"#button-cancel-release\", self.releaseDialogBox.formContent) } };\n\n\n\n    self.plugins.popupRelease.form.buttonAccept.on(\"click\", $.proxy(self.onClickAcceptRelease, self));\n    self.plugins.popupRelease.form.buttonCancel.on(\"click\", $.proxy(self.onClickCancelRelease, self));\n    //Notification service\n    self.notifier = bizagi.injector.get('notifier');\n  },\n\n  /**\r\n      * Called from the event when the form is rendered\r\n      * @param {subscription} event \r\n      * @param {form} params \r\n      */\n  onRenderFinish: function onRenderFinish(event, params) {\n    var self = this;\n    self.onRenderFinishParams = params;\n    self.taskOptionsWidget.renderEnds();\n  },\n\n  getBreadCrumbInfo: function getBreadCrumbInfo() {\n    return bizagi.navigator.info;\n  },\n\n  setBreadCrumbInfo: function setBreadCrumbInfo(info) {\n    bizagi.navigator.info = info;\n  },\n\n  drawBreadCrumb: function drawBreadCrumb(breadCrumbInfo, showSteps) {\n    var self = this;\n    $(self.content).find(\"ul\").html('');\n    if (showSteps) {\n      for (var i = -1; i < Object.keys(breadCrumbInfo).length - 1; i += 1) {\n        var crumbItem = breadCrumbInfo[i];\n        crumbItem.surrogateKey = i;\n        var crumbContent = self.drawCrumb(crumbItem);\n        $(self.content).find(\"ul\").append(crumbContent);\n      }\n    }\n  },\n\n  drawCrumb: function drawCrumb(itemCrumb) {\n    var self = this;\n    var name = itemCrumb.args.histName;\n    var isPrincipalHome = false;\n    var template = self.getTemplate(\"child\");\n    var child = template.render({\n      surrogateKey: itemCrumb.surrogateKey,\n      name: name,\n      isPrincipalHome: isPrincipalHome });\n\n    return child;\n  },\n  crumbEvent: function crumbEvent(event) {\n    var self = this;\n    var itemCrumb = self.info[$(event.target).data(\"surrogatekey\")];\n    self.goToCrumb(itemCrumb, event);\n  },\n\n  goToCrumb: function goToCrumb(crumb, event) {\n    var self = this;\n    if (crumb) {\n      var args = crumb.args;\n      var skipRefresh = false;\n      var contextActivity = this.getParentContext(crumb.context);\n      if (contextActivity == \"TEMPLATEENGINE-VIEW\" || contextActivity == \"SEARCH-ENGINE-VIEW\") {\n        skipRefresh = true;\n        if (event && event.target) {\n          var index = parseInt($(event.target).data(\"surrogatekey\"), 10) + 1;\n          self.accumulatedcontext.cutContext(index);\n        }\n      }\n      this.deleteRemainingCrumbs(crumb);\n      self.pub(\"notify\", {\n        skipRefresh: skipRefresh,\n        type: contextActivity,\n        args: $.extend(args, { showContextByMenuDashboard: contextActivity }) });\n\n    }\n  },\n\n  goToPreviousCrumb: function goToPreviousCrumb() {\n    var self = this;\n    var pathSize = Object.keys(self.info).length;\n    var crumbBack = self.info[pathSize - 3];\n    if (!crumbBack) {\n      crumbBack = self.info[pathSize - 2];\n    }\n    self.goToCrumb(crumbBack);\n  },\n\n  deleteRemainingCrumbs: function deleteRemainingCrumbs(itemCrumb) {\n    var self = this;\n    $.each(self.info, function (key) {\n      if (itemCrumb.surrogateKey < parseInt(key, 10)) {\n        delete self.info[key];\n      }\n    });\n  },\n\n  getParentContext: function getParentContext(context) {\n    if (context === \"OVERVIEW\" || context === \"COMMENTS\" || context === \"FILES\" || context === \"TIMELINE\") {\n      return \"ACTIVITY\";\n    } else\n    if (context === \"ACTIVITYPLANOVERVIEW\" || context === \"ACTIVITYPLANCOMMENTS\" || context === \"ACTIVITYPLANFILES\" || context === \"ACTIVITYPLANTIMELINE\") {\n      return \"ACTIVITYPLAN\";\n    } else\n    if (context === \"PLANSIDEBAR\" || context === \"EDITACTIVITY\" || context === \"PLANACTIVITIES\" || context === \"PLANCOMMENTS\" || context === \"PLANFILES\" || context === \"PLANTIMELINE\") {\n      return \"PLANACTIVITIES\";\n    }\n    return context;\n  },\n\n  resetBreadCrumb: function resetBreadCrumb(params) {\n    var self = this;\n    self.info = {};\n    self.info[-1] = self.copyDataObjectWithoutReference(params);\n  },\n\n  updateInfo: function updateInfo(params) {\n    var self = this;\n    var pathSize = Object.keys(self.info).length;\n    if (params.args.level && params.args.level < pathSize && params.args.level > 0) {\n      for (var j = params.args.level - 1; j < pathSize - 1; j += 1) {\n        delete self.info[j];\n      }\n      pathSize = params.args.level;\n    }\n\n    var lastCrumb = self.info[pathSize - 2];\n    var secondLastCrumb = self.info[pathSize - 3];\n    if (params.context == \"HOME\" || params.context === \"SEARCH-ENGINE-VIEW\" && typeof params.args.reference === \"undefined\") {//reset breadCrumb\n      this.resetBreadCrumb(params); //clean breadcrumb and add new item with entity name\n    } else\n    if (params.context == \"ACTIVITY\" || params.context == \"ACTIVITYPLAN\") {\n      if (secondLastCrumb && self.getParentContext(params.context) == self.getParentContext(secondLastCrumb.context)) {\n        self.cleanBreadCumb(secondLastCrumb, params, 3);\n      } else if (lastCrumb && self.getParentContext(params.context) == self.getParentContext(lastCrumb.context)) {\n        self.cleanBreadCumb(lastCrumb, params, 2);\n      } else {\n        self.info[pathSize - 1] = self.copyDataObjectWithoutReference(params);\n      }\n    } else\n    if (params.context == \"TEMPLATEENGINE-VIEW\" || params.context === \"SEARCH-ENGINE-VIEW\") {\n      var firstCrumb = self.info[-1];\n      if (firstCrumb && firstCrumb.context != \"TEMPLATEENGINE-VIEW\" &&\n      firstCrumb.context != \"SEARCH-ENGINE-VIEW\" &&\n      firstCrumb.context != \"HOME\") {\n        self.info = {};\n        pathSize = Object.keys(self.info).length;\n        lastCrumb = null;\n      }\n      if (params.args.referenceType == \"FACT\" || params.args.referenceType == \"VIRTUAL\") {\n        var factCrumbItem = self.hasGuidEntityInBreadCrumb(params.args.guidEntityCurrent);\n        var newFactCrumbItem = self.copyDataObjectWithoutReference(params);\n        if (params.args.level == 1) {\n          self.info = {};\n          self.info[-1] = newFactCrumbItem;\n        } else\n        if (lastCrumb && lastCrumb.args && lastCrumb.args.level == params.args.level) {\n          self.cleanBreadCumb(lastCrumb, params, 2);\n        } else if (!factCrumbItem) {\n          self.info[pathSize - 1] = newFactCrumbItem;\n        } else {\n          newFactCrumbItem.surrogateKey = factCrumbItem.surrogateKey;\n          self.info[newFactCrumbItem.surrogateKey] = newFactCrumbItem;\n          self.deleteRemainingCrumbs(newFactCrumbItem);\n        }\n      } else if (params.args.referenceType == \"ENTITY\") {\n        if (params.args.eventType != \"DATA-NAVIGATION\" && !self.hasXpathInBreadCrumb(params.args.xpath)) {\n          self.info[pathSize - 1] = self.copyDataObjectWithoutReference(params);\n        }\n      }\n    } else\n    {\n      if (lastCrumb && self.getParentContext(params.context) == self.getParentContext(lastCrumb.context)) {\n        self.cleanBreadCumb(lastCrumb, params, 2);\n      } else {\n        self.info[pathSize - 1] = self.copyDataObjectWithoutReference(params);\n      }\n    }\n    self.setBreadCrumbInfo(self.info);\n  },\n\n  updateLastCrumbParamsInfo: function updateLastCrumbParamsInfo(event, params) {\n    var self = this;\n    var pathSize = Object.keys(self.info).length;\n    if (pathSize > 0) {\n      $.extend(self.info[pathSize - 2].args, self.copyDataObjectWithoutReference(params.args));\n    }\n  },\n\n  hasXpathInBreadCrumb: function hasXpathInBreadCrumb(xpath) {\n    var self = this;\n    for (var i = -1; i < Object.keys(bizagi.navigator.info).length - 1; i += 1) {\n      var crumbItem = bizagi.navigator.info[i];\n      if (crumbItem.args.xpath == xpath) {\n        return true;\n      }\n    }\n    return false;\n  },\n\n  hasGuidEntityInBreadCrumb: function hasGuidEntityInBreadCrumb(guidEntity) {\n    var self = this;\n    for (var i = -1; i < Object.keys(bizagi.navigator.info).length - 1; i += 1) {\n      var crumbItem = bizagi.navigator.info[i];\n      if (crumbItem.args.guidEntityCurrent == guidEntity) {\n        return crumbItem;\n      }\n    }\n    return false;\n  },\n\n  cleanBreadCumb: function cleanBreadCumb(crumb, params, steps) {\n    var self = this;\n    var pathSize = Object.keys(self.info).length;\n    crumb = self.copyDataObjectWithoutReference(params);\n    self.info[pathSize - steps] = crumb;\n    this.deleteRemainingCrumbs(crumb);\n  },\n\n  drawDateNavigator: function drawDateNavigator(params) {\n    var self = this;\n    var currentLevel = Object.keys(self.info).length;\n    var showDateNavigator = currentLevel == 1;\n    if (params.args.showDateNavigator === false) {\n      showDateNavigator = false;\n    }\n    self.onDisplayDate(showDateNavigator);\n  },\n\n  /**\r\n      * Adjusts for home-navbar (back, print, etc.)\r\n      * @param {JSON} params \r\n      */\n  homeNavBarAdjust: function homeNavBarAdjust(params) {\n    if (params.context == \"HOME\") {\n      $(\"#ui-bizagi-wp-project-homeportal-main\").addClass(\"disabled-right-sidebar\");\n      $(\"#ui-bizagi-wp-project-homeportal-main\").removeClass(\"enabled-right-sidebar\");\n    }\n  },\n\n  setEnabledLeftSidebar: function setEnabledLeftSidebar(params) {\n    if (params.data && params.data.belongs) {\n      if (params.data.belongs.toLeftSidebarCD) {\n        $(\"#ui-bizagi-wp-project-homeportal-main\").addClass(\"enabledLeftSidebar\");\n      } else\n      {\n        $(\"#ui-bizagi-wp-project-homeportal-main\").removeClass(\"enabledLeftSidebar\");\n      }\n    }\n  },\n\n  setEnabledRightSidebar: function setEnabledRightSidebar(params) {\n    var self = this;\n    if (params.data && params.data.belongs) {\n      if (params.data.belongs.toRightSidebarCD) {\n        $(\"#ui-bizagi-wp-project-homeportal-main\").removeClass(\"disabled-right-sidebar\");\n        $(\"#ui-bizagi-wp-project-homeportal-main\").addClass(\"enabled-right-sidebar\");\n      } else\n      {\n        $(\"#ui-bizagi-wp-project-homeportal-main\").removeClass(\"enabled-right-sidebar\");\n        $(\"#ui-bizagi-wp-project-homeportal-main\").addClass(\"disabled-right-sidebar\");\n      }\n    }\n  },\n\n  //Show back button only in activity or plan context\n  setEnabledBreadCrumb: function setEnabledBreadCrumb(params) {\n    var self = this;\n    if (params.context == \"ACTIVITY\" || params.context == \"ACTIVITYPLAN\") {\n      self.setEnabledBackButton();\n      $(\".nav-items-ctn\", self.content).hide();\n      $(\".nav-items-ctn\", self.content).removeClass(\"toLeft\");\n      $(\".nav-items-ctn\", self.content).addClass(\"clearfix\");\n    } else\n    {\n      $(\".navbar-back\", self.content).hide();\n      $(\".nav-items-ctn\", self.content).show();\n      $(\".nav-items-ctn\", self.content).addClass(\"toLeft\");\n      $(\".nav-items-ctn\", self.content).removeClass(\"clearfix\");\n    }\n  },\n\n  /**\r\n      * add or remove the class to content wrapper for navbar\r\n      */\n  _addGridContainerClass: function _addGridContainerClass(toAdd) {\n    var self = this,\n    _$contentWrapper = self.getContent().closest(\"#content-wrapper\");\n\n    if (toAdd) {\n      _$contentWrapper.addClass(self.Class.CLASSES.GRID_CONTAINER);\n    } else {\n      _$contentWrapper.removeClass(self.Class.CLASSES.GRID_CONTAINER);\n    }\n  },\n\n  /**\r\n      * add properties to DOM if the context is TEMPLATEENGINE-VIEW\r\n      * @param {JSON} params \r\n      */\n  setPropertiesForEngineTemplate: function setPropertiesForEngineTemplate(params) {\n    var self = this,\n    _CONTEXTS = self.Class.CONTEXTS,\n    _contextsForProjectGrid = [\n    _CONTEXTS.TEMPLATE_ENGINE_VIEW,\n    _CONTEXTS.CASES_TEMPLATE_VIEW],\n\n    _needsProjectGrid =\n    _contextsForProjectGrid.indexOf(params.context) !== -1;\n\n    self._addGridContainerClass(_needsProjectGrid);\n  },\n\n  /**\r\n      * Hide back button if from caseLink, only one time.\r\n      */\n  setEnabledBackButton: function setEnabledBackButton() {\n    var self = this;\n    if (self.caseLink === true) {\n      self.caseLink = false;\n      $(\".navbar-back\", self.content).hide();\n    } else\n    {\n      $(\".navbar-back\", self.content).show();\n    }\n  },\n\n  /**\r\n      * Return actual level.\r\n      */\n  getLevel: function getLevel() {\n    var self = this;\n    return Object.keys(self.info).length;\n  },\n\n  refresh: function refresh(ev, params) {\n    var self = this;\n    self.params = params.args;\n    this.homeNavBarAdjust(params);\n    this.setEnabledLeftSidebar(params);\n    this.setEnabledRightSidebar(params);\n    this.setEnabledBreadCrumb(params);\n    this.setPropertiesForEngineTemplate(params);\n    if (params.context == \"ACTIVITY\" || params.context == \"ACTIVITYPLAN\") {\n      params.args.histName = self.getActivityName(params);\n    }\n\n    self.setStateBarNavigator(params.context);\n\n    if (!params.skipRefresh) {\n      if (params.args.histName && params.args.histName != \"\") {\n        self.updateInfo(params);\n      }\n    }\n    var showSteps = params.args.eventType != \"DATA-NAVIGATION\";\n    self.drawBreadCrumb(self.info, showSteps);\n    self.drawDateNavigator(params);\n  },\n  goToBack: function goToBack() {\n    var self = this;\n    bizagi.workportal.widgets.backnavigator.GO_TO_BACK(self);\n  },\n\n  getActivityName: function getActivityName(params) {\n    var activityName;\n    var idWorkItem = params.args.idWorkitem;\n    for (var i = 0; i < params.args.currentState.length; i++) {\n      var state = params.args.currentState[i];\n      if (state && state.idWorkItem == idWorkItem) {\n        if (state.displayName) {\n          activityName = state.displayName;\n        } else\n        if (state.state) {\n          activityName = state.state;\n        }\n        break;\n      }\n    }\n    return activityName; //+ '-' + params.args.radNumber;\n  },\n\n  /**\r\n      *\r\n      * @param event\r\n      * @param params\r\n      */\n  setStateBarNavigator: function setStateBarNavigator(context) {\n    var self = this;\n    if (context == \"ACTIVITY\") {\n      self.taskOptions();\n    } else {\n      self.getButtonForActivityAction().hide();\n    }\n    if (context == \"ACTIVITY\" || context == \"ACTIVITYPLAN\") {\n      self.showButtonPrintForm(true);\n      self.showUrlHelp(true);\n      self.flagDisplayDate = false;\n      self.onDisplayDate(false);\n    } else\n    {\n      self.showButtonPrintForm(false);\n      self.showUrlHelp(false);\n      self.flagDisplayDate = true;\n      self.onDisplayDate(true);\n    }\n  },\n\n  getDataObj: function getDataObj() {\n    var self = this,\n    regional = self.getResource(\"datePickerRegional\"),\n    currentDate = new Date(),\n    currentDay = regional.dayNames[currentDate.getDay()],\n    currentMonth = regional.monthNames[currentDate.getMonth()];\n\n    return {\n      \"date\": currentDay + \", \" + currentMonth + \" \" + currentDate.getDate() + \", \" + currentDate.getFullYear() };\n\n  },\n\n  /**\r\n      * Copy object by value, not reference\r\n      */\n  copyDataObjectWithoutReference: function copyDataObjectWithoutReference(params) {\n    return $.extend(true, {}, params);\n  },\n  /**\r\n      *\r\n      * @param show\r\n      */\n  showButtonPrintForm: function showButtonPrintForm(show) {\n    var self = this;\n    var $content = self.getContent();\n    var $wrapperButtonPrint = $content.find(\".navbar-print\");\n\n    if (show === true) {\n      $wrapperButtonPrint.show();\n    } else\n    {\n      $wrapperButtonPrint.hide();\n    }\n  },\n  showUrlHelp: function showUrlHelp(show) {\n    var self = this;\n    var $content = self.getContent();\n    var $wrapperUrlHelp = $content.find(\".navbar-help\");\n    if (show === true) {\n      var helpUrl = \"\";\n      for (var i = 0; i < self.params.currentState.length; i++) {\n        if (self.params.currentState[i].idTask === self.params.idTask) {\n          helpUrl = bizagi.util.validateUrlWellFormed(self.params.currentState[i].helpUrl);\n        }\n      }\n      if (!bizagi.util.isEmpty(helpUrl)) {\n        $wrapperUrlHelp.show();\n\n        $(\".navbar-help a\").attr(\"href\", helpUrl);\n      }\n    } else\n    {\n      $wrapperUrlHelp.hide();\n    }\n  },\n  /**\r\n      *\r\n      */\n  printCase: function printCase() {\n    var self = this;\n    var printParams = {\n      idCase: self.params.idCase,\n      idWorkitem: self.params.idWorkitem,\n      idTask: self.params.idTask,\n      fileName: self.params.caseNumber + \"_\" + self.params.process };\n\n\n    self.printFormCommand.print(printParams);\n  },\n\n  /**\r\n      * validate if is necessary to show release or take ownership buttons\r\n      */\n  taskOptions: function taskOptions() {\n    var self = this,\n    buttonOption = self.getButtonForActivityAction(),\n    buttonContainer = buttonOption.parent(),\n    textForButton;\n    $.when(self._taskOptionsRequest()).done(function (data) {\n      buttonContainer.removeClass('nae--loading');\n      textForButton = data.showRelease ? self.getResource('render-actions-release') : self.getResource('render-actions-take-ownership');\n      buttonOption.text(textForButton);\n      self.showReleaseButton = data.showRelease;\n      if (data.showRelease === true || data.showTakeOwnership === true) {\n        buttonOption.show();\n        buttonContainer.show();\n      } else buttonOption.hide();\n    });\n  },\n\n  /**\r\n      * make request for taskOptions\r\n      * and on done resolve _waitShowCancelCase promise with showCancelCase value\r\n      * @returns promise of TaskOptions request\r\n      */\n  _taskOptionsRequest: function _taskOptionsRequest() {\n    var self = this,\n    _done = function _done(result) {\n      if (self._waitShowCancelCase !== undefined)\n      self._waitShowCancelCase.resolve(result.showCancelCase);\n    },\n    _request = self.taskOptionsWidget.getTaskOptions(self.params.idCase, self.params.idWorkitem);\n\n    _request.done(_done);\n    return _request;\n  },\n\n  /***\r\n      * create a new promise for wait the result of endpoint taskOptions\r\n      * @returns promise\r\n      */\n  getShowCancelCase: function getShowCancelCase() {\n    var self = this;\n    self._waitShowCancelCase = new $.Deferred();\n    return self._waitShowCancelCase;\n  },\n\n  /**\r\n      * return the action button for release or takeOwnership\r\n      */\n  getButtonForActivityAction: function getButtonForActivityAction() {\n    var self = this,\n    content = self.getContent(),\n    buttonContainer = $(\".navbar-assignation-everyone\", content);\n    return buttonContainer.find(\".ae-action\");\n  },\n\n  /**\r\n      * trigger release or takeOwnership action\r\n      */\n  actionButtonEvent: function actionButtonEvent() {\n    var self = this,\n    onCloseReleaseDialogBox = function onCloseReleaseDialogBox() {\n      self.destroyReleaseDialogBox();\n    };\n\n    $(\".navbar-assignation-everyone\", self.getContent()).addClass('nae--loading');\n    if (self.showReleaseButton) {\n      self.releaseDialogBox.formContent.dialog({\n        resizable: false,\n        draggable: false,\n        height: \"auto\",\n        width: \"660px\",\n        modal: true,\n        title: self.getResource(\"workportal-widget-dialog-box-release-ok\"),\n        maximize: true,\n        close: onCloseReleaseDialogBox });\n\n    } else {\n      self.actionTakeOwnership();\n    }\n  },\n\n  /**\r\n      * destroy correctly the release confirmation modal\r\n      */\n  destroyReleaseDialogBox: function destroyReleaseDialogBox() {\n    var self = this,\n    modal = self.releaseDialogBox.formContent;\n    $(\".navbar-assignation-everyone\", self.getContent()).removeClass('nae--loading');\n    modal.dialog(\"destroy\");\n    modal.detach();\n  },\n\n  /**\r\n      * Triggered when user click over accept button and validate autoSave\r\n      */\n  onClickAcceptRelease: function onClickAcceptRelease() {\n    var self = this,\n    done = function done() {\n      $(document).data('auto-save', '');\n      self.launchReleaseActivity();\n    },\n    fail = function fail() {\n      self.destroyReleaseDialogBox();\n    };\n    $.when(bizagi.util.autoSave()).done(done).fail(fail);\n  },\n\n  /**\r\n      * method called after autoSave is done\r\n      */\n  launchReleaseActivity: function launchReleaseActivity() {\n    var self = this;\n    var params = {\n      idCase: self.params.idCase,\n      idWorkItem: self.params.idWorkitem };\n\n\n    self.releaseDialogBox.formContent.dialog(\"destroy\");\n    self.releaseDialogBox.formContent.detach();\n\n    self.onRenderFinishParams.args.form.dataService.multiactionService.disableRequests();\n    $.when(self.validateIfRenderingIsCallingAEndpoint()).done(function () {\n      $.when(self.dataService.releaseActivity(params)).done(function (data) {\n        var status = data.status ? data.status : \"\";\n        switch (status) {\n          case \"Success\":\n            self.taskReleased();\n            break;\n\n          case \"ConfigurationError\":\n            self.showMessageAndRefreshContext(\"workportal-widget-dialog-box-release-configuration-error-message\", params);\n            break;\n\n          default:\n            self.showMessageAndRefreshContext(\"workportal-widget-dialog-box-release-error-message\", params);\n            break;}\n\n        self.waitForLoadCompletely();\n      }).fail(function () {\n        self.showMessageAndRefreshContext(\"workportal-widget-dialog-box-release-error-message\", params);\n        self.waitForLoadCompletely();\n      });\n    });\n  },\n\n  /**\r\n      * Show message, when user clicks on ok button, refresh the context\r\n      * @param {string} keyResourceDescriptionMessage \r\n      * @param {object} params \r\n      */\n  showMessageAndRefreshContext: function showMessageAndRefreshContext(keyResourceDescriptionMessage, params) {\n    var self = this;\n    var message = self.getResource(keyResourceDescriptionMessage).replace(\"{0}\", params.idWorkItem);\n    $.when(bizagi.showMessageBox(message, self.getResource(\"workportal-widget-dialog-box-release-error\"), \"error\", false)).\n    done(function () {self.refreshActivityContext();});\n  },\n\n  /**\r\n      * Returns always a resolve when the request is successful or not\r\n      * @returns deferred multiaction service in the form \r\n      */\n  validateIfRenderingIsCallingAEndpoint: function validateIfRenderingIsCallingAEndpoint() {\n    var self = this;\n    var deferred = $.Deferred();\n\n    $.when(self.onRenderFinishParams.args.form.dataService.multiactionService.validateIfBatchIsExecuting())\n    // we only need to know when finishing the request with error or not\n    .always(function () {\n      deferred.resolve();\n    });\n    return deferred.promise();\n  },\n\n  /**\r\n      * Refresh the context (all widgets in that context)\r\n      */\n  refreshActivityContext: function refreshActivityContext() {\n    var self = this;\n    self.pub(\"notify\", {\n      type: self.params.showContextByMenuDashboard,\n      args: $.extend(self.params, { refreshAllWidgets: true }) });\n\n  },\n\n  /**\r\n      * Triggered when user click over accept button\r\n      */\n  actionTakeOwnership: function actionTakeOwnership() {\n    var self = this;\n    var params = {\n      idCase: self.params.idCase,\n      idWorkItem: self.params.idWorkitem };\n\n    $.when(self.dataService.takeOwnershipActivity(params)).done(function (data) {\n\n      var status = data.status ? data.status : \"\";\n      switch (status) {\n        case \"Success\":\n          // Refresh case\n          self.pub(\"notify\", {\n            type: self.params.showContextByMenuDashboard,\n            args: $.extend(self.params, { refreshAllWidgets: true }) });\n\n\n          break;\n\n        default:\n          var _defaultMessage = self.getResource(\"workportal-widget-dialog-box-takeownership-error-message\").replace(\"{0}\", params.idWorkItem),\n          _message = data.message ? data.message : _defaultMessage;\n          bizagi.showMessageBox(_message, self.getResource(\"workportal-general-error-page-title\"), \"error\", false);\n          break;}\n\n      self.waitForLoadCompletely();\n\n    }).fail(function () {self.waitForLoadCompletely();});\n  },\n\n  /**\r\n      * on task released send to inbox with toast notification\r\n      */\n  taskReleased: function taskReleased() {\n    var self = this;\n    //go to inbox\n    self.publish(\"changeWidget\", {\n      widgetName: bizagi.util.defaultWidget() });\n\n    var options = {\n      closeButton: true,\n      onclick: function onclick() {\n        self.publish(\"executeAction\", {\n          action: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,\n          idCase: self.params.idCase,\n          idWorkItem: self.params.idWorkitem,\n          idWorkflow: self.params.idWorkflow,\n          idTask: self.params.idTask,\n          referrer: undefined });\n\n      },\n      timeOut: 10000 };\n\n    self.notifier.showSucessMessage(bizagi.localization.getResource(\"workportal-widget-dialog-box-release-configuration-success-message\"), self.params.histName, options);\n  },\n\n  waitForLoadCompletely: function waitForLoadCompletely() {\n    var self = this;\n    var content = self.content;\n    var fn = function fn() {\n      var ol = $('body #loadModuleStatus > *');\n      var il = $(content).closest('.content-portal').find('#home-content').find('.ui-bizagi-loading-message');\n      if (ol.length === 0 && il.length === 0) {\n        $(\".navbar-assignation-everyone\", content).removeClass('nae--loading');\n      } else setTimeout(function () {\n        $(\".navbar-assignation-everyone\", content).addClass('nae--loading');\n        fn();\n      }, 100);\n    };\n    fn();\n  },\n\n  /**\r\n         * Close dialog release case\r\n         */\n  onClickCancelRelease: function onClickCancelRelease() {\n    var self = this;\n    $(\".navbar-assignation-everyone\", self.getContent()).removeClass('nae--loading');\n    self.releaseDialogBox.formContent.dialog(\"destroy\");\n    self.releaseDialogBox.formContent.detach();\n  },\n  /**\r\n      * Hides the date displayed in the widget\r\n      */\n  onDisplayDate: function onDisplayDate(show) {\n    var self = this,\n    $content = self.getContent(),\n    $date = $content.find(\".navbar-date\");\n\n    if (show && self.flagDisplayDate) {\n      $date.show();\n    } else\n    {\n      $date.hide();\n    }\n  },\n\n  /**\r\n      * Clean widget\r\n      */\n  clean: function clean() {\n    var self = this;\n    var $content = self.getContent();\n    if ($content) {\n      var $container = $content.find(\"ul\");\n\n      self.unsub('ON_RENDER_FINISH', $.proxy(self.onRenderFinish, self));\n      self.unsub(\"UPDATE_LASTCRUMBPARAMS_INFO\");\n      self.unsub(\"NAVIGATE\");\n      self.unsub(\"NAVIGATOR_GETLEVEL\");\n      self.unsub(\"NAVIGATOR_BACK\");\n      $container.off(\"click\", \"li\");\n\n      $(\".navbar-print\", self.content).off(\"click\", $.proxy(self.printCase, self));\n    }\n  } });\n\n\nbizagi.injector.register(\"bizagi.workportal.widgets.navigator\", [\"workportalFacade\", \"dataService\", \"accumulatedcontext\", bizagi.workportal.widgets.navigator]);","/**\r\n *   Name: Bizagi Workportal Desktop back Navigator\r\n */\nbizagi.workportal.widgets.navigator.extend(\"bizagi.workportal.widgets.backnavigator\", {\n\n  GO_TO_BACK: function GO_TO_BACK(navigatorInstance) {\n    navigatorInstance.defer = $.Deferred();\n    if (bizagi && bizagi.referrerParams) {\n      var widget = bizagi.referrerParams.referrer || bizagi.util.defaultWidget();\n\n      // switch referer widget\n      switch (widget) {\n        case \"inbox\":\n          navigatorInstance.publish(\"changeWidget\", {\n            widgetName: widget,\n            restoreStatus: true });\n\n          bizagi.workportal.actions.routing.LAUNCH_NOTIFICATION();\n          break;\n        case \"inboxGrid\":\n          navigatorInstance.publish(\"changeWidget\", {\n            widgetName: widget,\n            restoreStatus: true });\n\n          bizagi.workportal.actions.routing.LAUNCH_NOTIFICATION();\n          break;\n        case \"homeportal\":\n          navigatorInstance.goToPreviousCrumb();\n          bizagi.workportal.actions.routing.LAUNCH_NOTIFICATION();\n          break;\n        case \"search\":\n          navigatorInstance.publish(\"executeAction\", {\n            action: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_SEARCH,\n            radNumber: bizagi.referrerParams.radNumber || \"\",\n            page: bizagi.referrerParams.page || 1,\n            onlyUserWorkItems: false });\n\n          bizagi.workportal.actions.routing.LAUNCH_NOTIFICATION();\n          break;\n        case \"queryform\":\n          var params = {\n            widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_QUERYFORM,\n            queryFormAction: bizagi.referrerParams.queryForm.actionForm,\n            notMigratedUrl: \"\",\n            queryParams: bizagi.referrerParams.queryForm.queryParams,\n            pageToShow: bizagi.referrerParams.queryForm.pageToShow,\n            queryForm: bizagi.referrerParams.queryForm.queryForm };\n\n\n          $.extend(params, bizagi.referrerParams.queryForm.data, {\n            recalculateQueryForm: true });\n\n\n          params.modalParameters.dialogOpened = navigatorInstance.defer;\n          $.when(bizagi.util.autoSave()).done(function () {\n            $(document).data('auto-save', '');\n            navigatorInstance.publish(\"showDialogWidget\", params);\n          });\n\n          navigatorInstance.defer.promise().done(function () {\n            bizagi.workportal.actions.routing.LAUNCH_NOTIFICATION();\n          });\n          break;\n        case \"reports\":\n          var params = {\n            widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_REPORTS_CHART,\n            endPoint: bizagi.referrerParams.reports.endPoint,\n            filters: {},\n            tab: bizagi.referrerParams.reports.tab };\n\n          bizagi.referrerParams.reports.fromBackButton = true;\n          params.modalWasOpened = navigatorInstance.defer;\n          navigatorInstance.publish(\"changeWidget\", params);\n          break;\n        case \"folders\":\n          var url = bizagi.referrerParams.urlParameters + \"&page=\" + bizagi.referrerParams.page;\n          $.when(navigatorInstance.dataService.getCasesByFolder(url)).\n          done(function (data) {\n            data.customized = true;\n            data.urlParameters = bizagi.referrerParams.urlParameters;\n            // Define title of widget\n            data.title = bizagi.referrerParams.name;\n            // Set a flag here to tell the search widget that must show the ungroup case from folder (icon).\n            data.casesGroupedByFolder = true;\n            data.idFolder = bizagi.referrerParams.id;\n            navigatorInstance.publish(\"changeWidget\", {\n              widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_SEARCH,\n              data: data,\n              referrerParams: {} });\n\n          });\n          break;\n        case \"LPQueries\":\n          bizagi.referrerParams.sidebarData.isFromQueriesBackButton = true;\n          navigatorInstance.publish(\"changeWidget\", {\n            widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_PROFLY,\n            data: {\n              route: \"reports\",\n              params: { module: 'none' } } });\n\n\n          break;\n        default:\n          navigatorInstance.publish(\"changeWidget\", {\n            widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX,\n            restoreStatus: true });\n\n          break;}\n\n    }\n  } },\n{});\n\nbizagi.injector.register(\"backNavigator\", [bizagi.workportal.widgets.backnavigator]);","/**\r\n * Name: Bizagi Workportal Desktop Sidebar Controller\r\n * Author: Mauricio Sánchez  -  Danny Gonzalez\r\n */\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.sidebarhome\", {}, {\n  /**\r\n                                                                                        * Constructor\r\n                                                                                        */\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n    //Load templates\n    self.loadTemplates({\n      \"sidebarhome\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.sidebarhome\").concat(\"#sidebarhome-wrapper\") });\n\n  },\n\n  /**\r\n      * Renders the template defined in the widget\r\n      */\n  renderContent: function renderContent() {\n    var self = this;\n    var template = self.getTemplate(\"sidebarhome\");\n    self.content = $(template.render({}));\n\n    return self.content;\n  },\n\n  /**\r\n      * links events with handlers\r\n      */\n  postRender: function postRender() {\n  } });\n\n\nbizagi.injector.register('bizagi.workportal.widgets.sidebarhome', ['workportalFacade', 'dataService', bizagi.workportal.widgets.sidebarhome], true);","/**\r\n * Name: Bizagi Workportal Desktop Dashboard Controller\r\n * Author: Mauricio Sánchez\r\n */\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.usersummary\", {}, {\n  /**\r\n                                                                                        * Constructor\r\n                                                                                        */\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n    self.workportalFacade = workportalFacade;\n    self.dataService = dataService;\n    self.params = params;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n    //Load templates\n    self.loadTemplates({\n      \"usersummary\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.usersummary\").concat(\"#usersummary-wrapper\") });\n\n  },\n\n  /**\r\n      * Renders the template defined in the widget\r\n      */\n  renderContent: function renderContent() {\n    var self = this,\n    template = self.getTemplate(\"usersummary\");\n\n    return $.when(self.getData()).done(function (data) {\n      self.content = template.render(data);\n    });\n  },\n\n  /**\r\n      * links events with handlers\r\n      */\n  postRender: function postRender() {\n    var self = this,\n    $container = $(\".wdg-usmry-stk-container\", self.getContent());\n\n    $container.on(\"click\", \"div.wdg-usmry-see-more\", $.proxy(self.showStakeholders, self));\n  },\n\n  /**\r\n      * Show the tooltip if the user have more of 3 stakeholder related\r\n      */\n  showStakeholders: function showStakeholders() {\n    var self = this,\n    $tooltip = $(\".wdg-usmry-stk-overlay\", self.getContent());\n\n    $tooltip.show(\"fast\", function () {\n      $tooltip.click(function (e) {\n        e.stopPropagation();\n      });\n      $(document).one(\"click\", function () {\n        $tooltip.hide(\"fast\");\n      });\n    });\n  },\n\n  /**\r\n      * End point service to get User Info\r\n      */\n  getData: function getData() {\n    var self = this;\n\n    if (!bizagi.currentUser) {\n      return self.dataService.getCurrentUser().then(function (data) {\n        bizagi.currentUser = data;\n        return self.getInfoToUser(data);\n      });\n    }\n\n    return this.getInfoToUser(bizagi.currentUser);\n  },\n\n  /**\r\n      * Organize the user info to return the necessary format\r\n      */\n  getInfoToUser: function getInfoToUser(currentUser) {\n    var stakeholders = [];\n    var totalStakeholders = currentUser.associatedStakeholders.length;\n    var stakeholdersToShow = currentUser.associatedStakeholders.slice(0, 2);\n    var stakeholdersHidden = currentUser.associatedStakeholders.slice(2, totalStakeholders);\n    var showMore = totalStakeholders > 2;\n\n    $.each(stakeholdersToShow, function (index, item) {\n      stakeholders.push(item.displayName);\n    });\n\n    var data = {\n      user: currentUser.userName,\n      stakeholders: stakeholders.length > 0 ? stakeholders.join(', ') : '--',\n      stakeholdersHidden: stakeholdersHidden.length > 0 ? stakeholdersHidden : '',\n      showMore: showMore,\n      orgArray: stakeholders,\n      initials: currentUser.initials };\n\n\n    if (currentUser.userPicture) {\n      data.photo = 'data:image/png;base64,' + currentUser.userPicture;\n    }\n\n    return data;\n  } });\n\n\nbizagi.injector.register('bizagi.workportal.widgets.usersummary', ['workportalFacade', 'dataService', bizagi.workportal.widgets.usersummary]);","/**\r\n * Bizagi Workportal Desktop My Shortcuts list controller\r\n * @author Danny Gonzalez\r\n */\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.shortcuts\", {}, {\n  /**\r\n                                                                                      * Constructor\r\n                                                                                      * @param workportalFacade instance of facade, mandatory\r\n                                                                                      * @param dataService instance of service tier, mandatory\r\n                                                                                      * @param params extra params, its not mandatory\r\n                                                                                      * @param processActionService\r\n                                                                                      * @param accumulatedcontext\r\n                                                                                      * @param notifier\r\n                                                                                      */\n  init: function init(workportalFacade, dataService, processActionService, accumulatedcontext, notifier, params) {\n    var self = this;\n    self.requestsInProgressProcessGuid = {};\n    self.params = params;\n    self.processActionService = processActionService;\n    self.accumulatedcontext = accumulatedcontext;\n    self.notifier = notifier;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n    //Load templates\n    self.loadTemplates({\n      \"myshortcuts\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.shortcuts\").concat(\"#shortcuts-wrapper\") });\n\n  },\n  /**\r\n      * Renders the template defined in the widget\r\n      * @return {string} html\r\n      */\n  renderContent: function renderContent() {\n    var self = this;\n    var template = self.getTemplate(\"myshortcuts\");\n\n    return $.when(self.getData()).done(function (data) {\n      self.content = data.length > 0 ? template.render({ shortcuts: data }) : '';\n      return self.content;\n    });\n  },\n  /**\r\n      * links events with handlers\r\n      */\n  postRender: function postRender() {\n    var self = this;\n    var $content = self.getContent();\n    $('.wdg-srcts-container', $content).on(\"click\", $.proxy(self.onClickShortcut, self));\n  },\n  /**\r\n      *\r\n      * @returns {*}\r\n      */\n  getData: function getData() {\n    var self = this;\n\n    return self.dataService.getMyShortcutsByCategory({ icon: true }).then(function (data) {\n      self.model = {};\n      var category,i = -1;\n\n      while (category = data[++i]) {\n        var shortcut,j = -1;\n\n        while (shortcut = category.items[++j]) {\n          var id = Math.guid();\n          shortcut.id = id;\n          self.model[id] = shortcut;\n        }\n      }\n      return data;\n    });\n  },\n  /**\r\n      * event listener for each action in the shrotcuts list\r\n      * @param ev\r\n      */\n  onClickShortcut: function onClickShortcut(ev) {\n    var self = this;\n    var $target = $(ev.target).closest('.wdg-srcts-container');\n    var shortcut = self.model[$target.data('id')];\n    self.target = $target;\n\n    if (self.requestsInProgressProcessGuid[shortcut.idProcess])\n    return;\n\n    self.startLoading(self.target, shortcut.idProcess);\n\n    if (shortcut) {\n      self.dataService.actionsHasStartForm({ processId: shortcut.idProcess }).done(function (data, $target) {\n        if (!data.startForm) {\n          self.dataService.actionCreateCase(shortcut).done(function (data) {\n            $.when(self.processActionService.launchActionsAfterCreateCase({\n              idCase: data.caseId,\n              caseNumber: data.caseNumber,\n              includeRadicationPhase: data.includeRadicationPhase,\n              action: shortcut })).\n            done(function () {\n              self.stopLoading(self.target, shortcut.idProcess);\n            });\n\n          }).fail(function () {\n            self.stopLoading(self.target, shortcut.idProcess);\n          });\n        } else\n        {\n          var action = {\n            displayName: shortcut.displayName,\n            hasStartForm: data.startForm,\n            showConfirmation: shortcut.showConfirmation };\n\n\n          $.when(self.processActionService.executeProcessAction({\n            action: action,\n            mappingstakeholders: true,\n            guidprocess: shortcut.idProcess })).\n          done(function () {\n            self.stopLoading(self.target, shortcut.idProcess);\n          });\n        }\n      }).fail(function () {\n        self.notifier.showErrorMessage(\n        printf(\n        bizagi.localization.getResource('workportal-widget-sortbar-execute-error-message'),\n        shortcut.displayName));\n\n\n        self.stopLoading(self.target, shortcut.idProcess);\n      });\n    }\n  },\n  /**\r\n      * Detach handlers\r\n      */\n  clean: function clean() {\n    var self = this;\n    var $content = self.getContent();\n\n    if ($content) {\n      $('.wdg-srcts-container', $content).off('click');\n    }\n  },\n\n  /**\r\n      * Start loading shortcut\r\n      * */\n  startLoading: function startLoading($target, idProcess) {\n    var self = this;\n    $target.prepend(\"<div class=\\\"bz-wp-ls-list-item-loading\\\"><div class=\\\"ui-bizagi-loading-icon\\\"></div></div>\");\n    self.requestsInProgressProcessGuid[idProcess] = true;\n  },\n\n  /**\r\n      * Stop loading shortcut\r\n      * */\n  stopLoading: function stopLoading($target, idProcess) {\n    var self = this;\n    $target.find(\".bz-wp-ls-list-item-loading\").remove();\n    delete self.requestsInProgressProcessGuid[idProcess];\n  } });\n\n\nbizagi.injector.register('bizagi.workportal.widgets.shortcuts', ['workportalFacade', 'dataService', 'processActionService', 'accumulatedcontext', 'notifier', bizagi.workportal.widgets.shortcuts]);","/**\r\n *   Name: Bizagi Workportal Right Sidebar\r\n *   Author: Elkin Fernando Siabato Cruz\r\n */\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.right.sidebar\", {}, {\n\n  /**\r\n                                                                                          *   Constructor\r\n                                                                                          */\n  init: function init(workportalFacade, dataService, behaviorCollapsiblePanels, params) {\n    var self = this;\n    self.behaviorCollapsiblePanels = behaviorCollapsiblePanels;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n    //Load templates\n    self.loadTemplates({\n      \"right-sidebar\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.right.sidebar\").concat(\"#rightsidebar-wrapper\") });\n\n\n    if (bizagi.services.preferences().getPreference(\"activityCollapseSidebars\")) {\n      $(\"#ui-bizagi-wp-project-homeportal-main\").addClass(\"ui-bizagi-wp-project-collapse-rightpanel\");\n      $(\"#right-sidebar-wrapper\").addClass(\"always-collpase\");\n    }\n  },\n\n  /**\r\n      * Renders the template defined in the widget\r\n      */\n  renderContent: function renderContent() {\n    var self = this;\n    var template = self.getTemplate(\"right-sidebar\");\n    self.content = template.render({});\n\n    return self.content;\n  },\n\n  /**\r\n      *\r\n      */\n  postRender: function postRender() {\n    var self = this;\n\n    if (self.params && self.params.contextsRightSidebarCaseDashboard) {\n      self.params.contextsRightSidebarCaseDashboard.forEach(function (context) {\n        self.sub(context, $.proxy(self.updateView, self));\n      });\n    }\n  },\n\n  /**\r\n      *\r\n      * @param event\r\n      * @param params\r\n      */\n  updateView: function updateView(event, params) {\n    var self = this;\n\n    self.enableOrDisableRightSidebar(params.context);\n    self.eventsHandler();\n\n    if (params.context === \"ACTIVITY\" || params.context === \"ACTIVITYPLAN\") {\n      self.addBottomPadding();\n    }\n\n  },\n  addBottomPadding: function addBottomPadding() {\n    $('.content-dashboard-right-sidebar .content-right-sidebar').css('padding-bottom', '30px');\n  },\n\n  /**\r\n      *\r\n      * @param event\r\n      */\n  onCollapsePanel: function onCollapsePanel(event) {\n\n    var self = this;\n    var $target = event ? $(event.currentTarget) : $(\"#project-collapse-rightpanel\");\n    var classSuffix = \"-rightpanel\";\n\n    self.behaviorCollapsiblePanels.addClassesCollapseSideBar(self.content, classSuffix, false);\n\n    if ($target.closest(\".ui-bizagi-wp-project-open-rightpanel\").length > 0) {\n      self.pub(\"notify\", {\n        type: \"EXPANDED_RIGHT_SIDEBAR\" });\n\n    }\n    $(\"#right-sidebar-wrapper\").removeClass(\"always-collpase\");\n\n    self.publish(\"openCloseSidebar\");\n  },\n\n  /**\r\n      *\r\n      */\n  disableSidebar: function disableSidebar() {\n    $(\"#ui-bizagi-wp-project-homeportal-main\").addClass(\"disabled-right-sidebar\");\n    $(\"#ui-bizagi-wp-project-homeportal-main\").removeClass(\"enabled-right-sidebar\");\n  },\n\n  /**\r\n      *\r\n      */\n  enableSidebar: function enableSidebar() {\n    $(\"#ui-bizagi-wp-project-homeportal-main\").removeClass(\"disabled-right-sidebar\");\n    $(\"#ui-bizagi-wp-project-homeportal-main\").addClass(\"enabled-right-sidebar\");\n  },\n\n  /**\r\n      *\r\n      */\n  openRightSidebar: function openRightSidebar() {\n    var self = this;\n    $(\"#right-sidebar-wrapper\").removeClass(\"always-collpase\");\n    self.behaviorCollapsiblePanels.addClassesCollapseSideBar(self.content, \"-rightpanel\", true);\n  },\n\n  closeRightSidebar: function closeRightSidebar() {\n    var self = this;\n    self.behaviorCollapsiblePanels.collapseSideBar(\"-rightpanel\");\n  },\n\n\n  /**\r\n      *\r\n      * @param currentContext\r\n      */\n  enableOrDisableRightSidebar: function enableOrDisableRightSidebar(currentContext) {\n    var self = this;\n\n    var setDisabledSidebar = false;\n    self.params.contextsWithoutRightSidebarCaseDashboard.forEach(function (context) {\n      if (context === currentContext) {\n        self.disableSidebar();\n        setDisabledSidebar = true;\n      }\n    });\n    if (setDisabledSidebar === false) {\n      self.enableSidebar();\n    }\n  },\n\n  /**\r\n      * Configure event handlers\r\n      */\n  eventsHandler: function eventsHandler() {\n    var self = this;\n    $(\".ui-bizagi-wp-project-panel-collapse\", self.content).off(\"click\", $.proxy(self.onCollapsePanel, self));\n    $(\".ui-bizagi-wp-project-panel-collapse\", self.content).on(\"click\", $.proxy(self.onCollapsePanel, self));\n\n    self.sub(\"OPEN_RIGHT_SIDEBAR\", $.proxy(self.openRightSidebar, self));\n    self.sub(\"CLOSE_RIGHT_SIDEBAR\", $.proxy(self.closeRightSidebar, self));\n    self.sub(\"DISABLED_RIGHT_SIDEBAR\", $.proxy(self.disableSidebar, self));\n    self.sub(\"ENABLED_RIGHT_SIDEBAR\", $.proxy(self.enableSidebar, self));\n  },\n\n  /**\r\n      *\r\n      */\n  clean: function clean() {\n    var self = this;\n    if (self.params && self.params.contextsRightSidebarCaseDashboard) {\n      self.params.contextsRightSidebarCaseDashboard.forEach(function (context) {\n        self.unsub(context, $.proxy(self.updateView, self));\n      });\n    }\n    $(\".ui-bizagi-wp-project-panel-collapse\", self.content).off(\"click\", $.proxy(self.onCollapsePanel, self));\n\n    self.unsub(\"OPEN_RIGHT_SIDEBAR\", $.proxy(self.openRightSidebar, self));\n    self.unsub(\"CLOSE_RIGHT_SIDEBAR\", $.proxy(self.closeRightSidebar, self));\n    self.unsub(\"DISABLED_RIGHT_SIDEBAR\", $.proxy(self.disableSidebar, self));\n    self.unsub(\"ENABLED_RIGHT_SIDEBAR\", $.proxy(self.enableSidebar, self));\n  } });\n\n\n\nbizagi.injector.register(\"bizagi.workportal.widgets.right.sidebar\", [\"workportalFacade\", \"dataService\", \"behaviorCollapsiblePanels\", bizagi.workportal.widgets.right.sidebar], true);","/**\r\n *   Name: Bizagi Workportal Left Sidebar\r\n *   Author: Elkin Fernando Siabato Cruz\r\n */\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.left.sidebar\", {}, {\n\n  /**\r\n                                                                                         *   Constructor\r\n                                                                                         */\n  init: function init(workportalFacade, dataService, behaviorCollapsiblePanels, params) {\n    var self = this;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n    self.behaviorCollapsiblePanels = behaviorCollapsiblePanels;\n    //Load templates\n    self.loadTemplates({\n      \"left-sidebar\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.left.sidebar\").concat(\"#leftsidebar-wrapper\") });\n\n\n    if (bizagi.services.preferences().getPreference(\"activityCollapseSidebars\")) {\n      $(\"#ui-bizagi-wp-project-homeportal-main\").addClass(\"ui-bizagi-wp-project-collapse-leftpanel\");\n      $(\"#left-sidebar-wrapper\").addClass(\"always-collpase\");\n    }\n\n  },\n\n  /**\r\n      * Renders the template defined in the widget\r\n      */\n  renderContent: function renderContent() {\n    var self = this;\n    var template = self.getTemplate(\"left-sidebar\");\n    self.content = template.render({});\n\n    return self.content;\n  },\n\n  /**\r\n      *\r\n      */\n  postRender: function postRender() {\n    var self = this;\n    self.eventsHandler();\n  },\n\n  /**\r\n      * Configure event handlers\r\n      */\n  eventsHandler: function eventsHandler() {\n    var self = this;\n    $(\".ui-bizagi-wp-project-panel-collapse\", self.content).on(\"click\", $.proxy(self.onCollapsePanel, self));\n\n    self.showTooltip($(\".bz-icon-right-outline\", self.content), bizagi.localization.getResource(\"workportal-sidebar-show-more-tooltip\"));\n    self.showTooltip($(\".bz-icon-left-outline\", self.content), bizagi.localization.getResource(\"workportal-sidebar-show-less-tooltip\"));\n\n  },\n  showTooltip: function showTooltip(classArrow, textTooltip) {\n    classArrow.tooltip({\n      content: textTooltip,\n      tooltipClass: \"custom-tooltip-styling-bottom-bar\",\n      position: {\n        my: \"left+15 center\",\n        at: \"right top+8\",\n        of: classArrow } });\n\n\n  },\n\n  /**\r\n      *\r\n      * @param event\r\n      */\n  onCollapsePanel: function onCollapsePanel(event) {\n    $('.ui-tooltip.custom-tooltip-styling-bottom-bar').hide();\n    var self = this;\n    var $target = event ? $(event.currentTarget) : $(\"#project-collapse-leftpanel\");\n    var classSuffix = $target.prop(\"id\") === \"project-collapse-rightpanel\" ? \"-rightpanel\" : \"-leftpanel\";\n\n    self.behaviorCollapsiblePanels.addClassesCollapseSideBar(self.content, classSuffix, false);\n    $(\"#left-sidebar-wrapper\").removeClass(\"always-collpase\");\n    self.publish(\"openCloseSidebar\");\n  },\n\n  /**\r\n      *\r\n      */\n  clean: function clean() {\n    var self = this;\n    $(\".ui-bizagi-wp-project-panel-collapse\", self.content).off(\"click\", $.proxy(self.onCollapsePanel, self));\n  } });\n\n\n\nbizagi.injector.register(\"bizagi.workportal.widgets.left.sidebar\", [\"workportalFacade\", \"dataService\", \"behaviorCollapsiblePanels\", bizagi.workportal.widgets.left.sidebar], true);","/**\r\n *   Name: Bizagi Workportal Desktop Widget Dummy\r\n *   Author: Elkin Fernando Siabato Cruz\r\n */\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.dummy\", {}, {\n  /**\r\n                                                                                  *   Constructor\r\n                                                                                  */\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n    // Call base\n    self._super(workportalFacade, dataService, params);\n  },\n\n  /**\r\n      * Renders the template defined in the widget\r\n      */\n  renderContent: function renderContent() {\n    var self = this;\n    self.content = $(\"<div></div>\");\n    return self.content;\n  } });\n\n\nbizagi.injector.register(\"bizagi.workportal.widgets.dummy\", [\"workportalFacade\", \"dataService\", bizagi.workportal.widgets.dummy]);","/**\r\n *   Name: Bizagi Workportal Desktop Sidebar Controller\r\n *   Author: Mauricio Sánchez  -  Danny Gonzalez\r\n */\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.sidebar\", {}, {\n  /**\r\n                                                                                    * Constructor\r\n                                                                                    */\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n    //Load templates\n    self.loadTemplates({\n      \"sidebar\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.sidebar\").concat(\"#sidebar-wrapper\") });\n\n  },\n\n  /**\r\n      * Renders the template defined in the widget\r\n      */\n  renderContent: function renderContent() {\n    var self = this;\n    var template = self.getTemplate(\"sidebar\");\n    self.content = $(template.render({}));\n\n    return self.content;\n  },\n\n  /**\r\n      * links events with handlers\r\n      */\n  postRender: function postRender() {\n  } });\n\n\nbizagi.injector.register('bizagi.workportal.widgets.sidebar', ['workportalFacade', 'dataService', bizagi.workportal.widgets.sidebar], true);","/**\r\n * Admin module to case massively reassign\r\n * \r\n * @author Edward J Morales\r\n */\n\n\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.admin.cases\", {}, {\n  /*\r\n                                                                                        *   Returns the widget name\r\n                                                                                        */\n  getWidgetName: function getWidgetName() {\n    return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ASYNC;\n  },\n  /*\r\n      *   Renders the content for the current controller\r\n      */\n  renderContent: function renderContent() {\n    var self = this;\n    var template = self.getTemplate(\"admin.cases\");\n    var content = self.content = $.tmpl(template);\n\n    return content;\n  } });","/**\r\n * Admin / Cases Search\r\n * \r\n * @author Christian Collazos\r\n */\n\n\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.admin.caseSearch\", {}, {\n  /*\r\n                                                                                            *   Returns the widget name\r\n                                                                                            */\n  getWidgetName: function getWidgetName() {\n    return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_CASE_SEARCH;\n  },\n\n  /*\r\n     *   Renders the content for the current controller\r\n     */\n  renderContent: function renderContent() {\n    var self = this,\n    _defer = new $.Deferred();\n    var template = self.getTemplate(\"admin.case.search\");\n    var content;\n\n    content = self.content = $.tmpl(template, {});\n    $.when(self.loadtemplates()).always(function () {\n      _defer.resolve(content);\n    });\n    return _defer.promise();\n  },\n\n  /*\r\n     * this will be implemented on each device\r\n     */\n  loadtemplates: function loadtemplates() {} });","bizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.adhoc.create.process\", {}, {\n\n  init: function init(workportalFacade, dataService, params) {\n\n    var self = this;\n\n    self.notifier = bizagi.injector.get(\"notifier\");\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    // Load Templates\n    self.loadTemplates({\n      \"adhoc.create.process\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.adhoc.create.process\").concat(\"#adhoc-create-process\") });\n\n  },\n\n  /**\r\n      * Renders the template defined in the widget\r\n      * @return {*}\r\n      */\n  renderContent: function renderContent() {\n    var self = this,\n    template = self.getTemplate(\"adhoc.create.process\");\n    self.content = template.render();\n    return self.content;\n  },\n\n  /**\r\n      * Method called after render widget\r\n      */\n  postRender: function postRender() {\n    var self = this;\n    self.addEventHandlers();\n  },\n\n  /**\r\n      * Called when change input and validate form\r\n      * @returns {boolean}\r\n      */\n  validateForm: function validateForm() {\n    var self = this;\n    var isValidForm = false;\n    var name = $(\".js-input-name\", self.content);\n    if (name.val() && name.val() !== \"\") {\n      name.next().find(\"span\").html(\"\");\n      isValidForm = true;\n    } else {\n      var nameValidation = bizagi.localization.getResource(\"workportal-general-error-field-required\");\n      nameValidation = nameValidation.replace(\"{0}\", bizagi.localization.getResource(\"workportal-widget-admin-adhoc-processes-name\").toLowerCase());\n      name.next().find(\"span\").html(nameValidation);\n      isValidForm = false;\n    }\n    return isValidForm;\n  },\n\n  /**\r\n      * Trigger when click cancel button\r\n      */\n  onClickCancel: function onClickCancel() {\n    var self = this;\n    self.publish(\"closeCurrentDialog\");\n  },\n\n  /**\r\n      * Trigger when submit form\r\n      * @param event\r\n      */\n  onSubmitFormCreateProcess: function onSubmitFormCreateProcess(event) {\n    event.preventDefault();\n    var self = this;\n    $(\".js-input-name\", self.content).on(\"input\", $.proxy(self.validateForm, self));\n    if (self.validateForm()) {\n      var paramsNewProcess = {\n        displayName: $(\"input\", self.content).val() };\n\n      bizagi.showErrorAlertDialog = false;\n      $.when(self.dataService.createNewAdhocProcess(paramsNewProcess)).done(function (data) {\n        self.notifier.showSucessMessage(bizagi.localization.getResource(\"workportal-adhoc-process-created\"),\n        bizagi.localization.getResource(\"workportal-quickprocess-notification-process-title\"), \"\");\n        self.publish(\"closeCurrentDialog\");\n        if (bizagi.util.isIE10OrLower()) {// redirect to dashboard, IE10 doesn't support routing in angular app\n          self.publish(\"changeWidget\", {\n            widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_PROFLY });\n\n\n        } else {\n          self.publish(\"changeWidget\", {\n            widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_PROFLY,\n            data: {\n              route: 'process-modeler',\n              params: data } });\n\n\n        }\n      }).fail(function (error) {\n        error = JSON.parse(error.responseText);\n        self.notifier.showErrorMessage(error.message, bizagi.localization.getResource(\"workportal-quickprocess-notification-generic-error-title\"), \"\");\n      });\n    }\n  },\n\n  /**\r\n      * Add event handlers to elements\r\n      */\n  addEventHandlers: function addEventHandlers() {\n    var self = this;\n    $(\"#button-cancel-create-adhoc-process\", self.content).on(\"click\", $.proxy(self.onClickCancel, self));\n    $(\"form\", self.content).on(\"submit\", $.proxy(self.onSubmitFormCreateProcess, self));\n  },\n\n  /**\r\n      * Remove event handlers to elements. Dispose widget\r\n      */\n  dispose: function dispose() {\n    var self = this;\n    $(\".js-input-name\", self.content).off(\"input\", $.proxy(self.validateForm, self));\n    $(\"#button-cancel-create-adhoc-process\", self.content).off(\"click\", $.proxy(self.onClickCancel, self));\n    $(\"form\", self.content).off(\"submit\", $.proxy(self.onSubmitFormCreateProcess, self));\n  } });","/*\r\n *   Name: Bizagi Workportal Desktop Project File Preview\r\n *   Author: David Romero Estrada\r\n */\n\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.profly\", {}, {\n  /*\r\n                                                                                  *   Constructor\r\n                                                                                  */\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    //Load templates\n    self.loadTemplates({\n      \"project-filespreview-wrapper\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.profly\").concat(\"#project-filespreview-wrapper\") });\n\n  },\n\n  /**\r\n     * Renders the template defined in the widget\r\n     */\n  renderContent: function renderContent() {\n    var self = this;\n    // Define parameters to route angular app\n    var argumentsTemplate = {\n      paramsURL: '' };\n\n    if (self.params.data && self.params.data.route && self.params.data.params.id) {\n      argumentsTemplate.paramsURL =\n      encodeURI('?route=' + self.params.data.route + '&id=' + self.params.data.params.id + '&displayName=' + self.params.data.params.displayName);\n\n    }\n\n    if (self.params.data && self.params.data.route && self.params.data.params.module) {\n      argumentsTemplate.paramsURL =\n      encodeURI('?route=' + self.params.data.route + '&module=' + self.params.data.params.module);\n    }\n\n    var generalTmpl = self.getTemplate(\"project-filespreview-wrapper\");\n    self.content = generalTmpl.render(argumentsTemplate);\n\n    $(self.content).on(\"load\", function (event) {\n      var path = event.currentTarget.contentWindow.location.href;\n      if (path.indexOf('quickprocess') === -1) {\n        location.reload(); // QAF-5934\n      }\n    });\n    return self.content;\n  },\n\n\n  /**\r\n     * links events with handlers\r\n     */\n  postRender: function postRender() {\n    var self = this;\n  },\n\n  clean: function clean() {\n    var self = this;\n    $('#iframe-liveprocesses', self.content).off();\n    self.plugins = {};\n    self.form = {};\n    self.currentFile = {};\n    self.filesNumber = 0;\n  } });\n\n\nbizagi.injector.register(\"bizagi.workportal.widgets.profly\", [\"workportalFacade\", \"dataService\", bizagi.workportal.widgets.profly]);","bizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.sessionTimeout\", {}, {\n  /**\r\n                                                                                           * Constructor\r\n                                                                                           */\n  init: function init(workportalFacade, dataService, notifier, params) {\n    var self = this;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    //Load template\n    self.loadTemplates({\n      \"session-timeout\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.sessionTimeout\").concat(\"#session-timeout\") });\n\n\n    // Have an instance of the session timeout\n    self.sessionTimeoutService = bizagi.injector.get('sessionTimeOutService');\n  },\n\n  renderContent: function renderContent() {\n    var self = this;\n    var template = self.getTemplate('session-timeout');\n    self.content = template.render({});\n    return self.content;\n  },\n\n  postRender: function postRender() {\n    var self = this;\n    self._onClickMinValue;\n\n    // When the user clicks on the modal button reset the countDown\n    $('button', self.content).click(\n    $.proxy(function () {\n      // Keep the session opened\n      self.sessionTimeoutService.keepSessionOpen();\n      $(this.content).closest('.ui-dialog').find('.ui-dialog-titlebar-close').trigger('click');\n    },\n    self));\n\n\n    // Remove the x of the modal\n    self.renderingDeferred.then($.proxy(self.removeXClose, self));\n  },\n\n  /**\r\n      * Remove the x of the modal, whe don't need it here\r\n      * We don't want the possibility to close the modal\r\n      */\n  removeXClose: function removeXClose() {\n    var self = this;\n    setTimeout(function () {\n      $(self.content).closest('.ui-dialog').find('.ui-dialog-titlebar-close').hide();\n    }, 0);\n  },\n\n  clean: function clean() {\n    var self = this;\n  } });\n\n\nbizagi.injector.register('bizagi.workportal.widgets.sessionTimeout', ['workportalFacade', 'dataService', 'notifier', bizagi.workportal.widgets.sessionTimeout]);","bizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.sessionTimeoutExpired\", {}, {\n  /**\r\n                                                                                                  * Constructor\r\n                                                                                                  */\n  init: function init(workportalFacade, dataService, notifier, params) {\n    var self = this;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    //Load template\n    self.loadTemplates({\n      \"session-timeout-expired\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.sessionTimeoutExpired\").concat(\"#session-timeout-expired\") });\n\n  },\n\n  renderContent: function renderContent() {\n    var self = this;\n    var template = self.getTemplate('session-timeout-expired');\n    self.content = template.render({});\n    return self.content;\n  },\n\n  postRender: function postRender() {\n    var self = this;\n    self._onClickMinValue;\n\n    // When the user clicks on the modal button reset the countDown\n    $('button', self.content).click(\n    function () {\n      bizagi.services.redirectToLogoutPage();\n    });\n\n\n    // Remove the x of the modal\n    self.renderingDeferred.then($.proxy(self.removeXClose, self));\n  },\n\n  /**\r\n      * Remove the x of the modal, whe don't need it here\r\n      * We don't want the possibility to close the modal\r\n      */\n  removeXClose: function removeXClose() {\n    var self = this;\n    setTimeout(function () {\n      $(self.content).closest('.ui-dialog').find('.ui-dialog-titlebar-close').hide();\n    }, 0);\n  },\n\n  clean: function clean() {\n    var self = this;\n  } });\n\n\nbizagi.injector.register('bizagi.workportal.widgets.sessionTimeoutExpired', ['workportalFacade', 'dataService', 'notifier', bizagi.workportal.widgets.sessionTimeoutExpired]);","/**\r\n * Name: Bizagi Workportal Desktop Create plan\r\n */\n\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.user.privacy\", {}, {\n  /**\r\n                                                                                         * Constructor\r\n                                                                                         */\n  init: function init(workportalFacade, dataService, notifier, params) {\n    var self = this;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n    self.notifier = notifier;\n\n    //Load template\n    self.loadTemplates({\n      \"user-privacy\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.user.privacy\").concat(\"#user-privacy\") });\n\n\n  },\n\n  renderContent: function renderContent() {\n    var self = this;\n    var template = self.getTemplate('user-privacy');\n    self.content = template.render({});\n    return self.content;\n  },\n\n  postRender: function postRender() {\n    var self = this;\n    $('#js-btn-downloadReport', self.content).on('click', $.proxy(self.onDownloadReport, self));\n  },\n\n  onDownloadReport: function onDownloadReport() {\n    var self = this;\n    self.dataService.downloadReportUser(bizagi.currentUser.idUser);\n  },\n\n  clean: function clean() {\n    var self = this;\n    $('#js-btn-downloadReport', self.content).off();\n  } });\n\n\n\nbizagi.injector.register('bizagi.workportal.widgets.user.privacy', ['workportalFacade', 'dataService', 'notifier', bizagi.workportal.widgets.user.privacy]);","/**\r\n * Name: Bizagi Workportal Users Modal\r\n */\n\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.users.modal\", {}, {\n  /**\r\n                                                                                        * Constructor\r\n                                                                                        */\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n    self.usuarios = params.data;\n    self.showActivityInfo = params.data.users !== undefined;\n    if (self.showActivityInfo) {\n      self.usuarios = params.data.users;\n      self.isActivity = params.data.isActivity;\n      self.activityName = params.data.activityName;\n    }\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    //Load template\n    self.loadTemplates({\n      \"users-modal\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.users.modal\").concat(\"#users-modal\") });\n\n\n  },\n\n  renderContent: function renderContent() {\n    var self = this;\n    var template = self.getTemplate('users-modal');\n    self.content = template.render({\n      usuarios: self.usuarios,\n      isActivity: self.isActivity,\n      activityName: self.activityName,\n      showActivityInfo: self.showActivityInfo });\n\n    self.clickArrow(self.content);\n    return self.content;\n  },\n\n  postRender: function postRender() {\n    var self = this;\n\n  },\n\n  clean: function clean() {\n    var self = this;\n  },\n  clickArrow: function clickArrow(context) {\n    $(\".expand__arrow\", context).click(function (event) {\n      var contentItemSelected = $(this).parent().parent();\n      if ($(\".users_collapse\", contentItemSelected).css('display') == 'none') {\n        $(this).addClass(\"expand__arrow--active\");\n        $(\".users_collapse\", contentItemSelected).show();\n      } else {\n        $(this).removeClass(\"expand__arrow--active\");\n        $(\".users_collapse\", contentItemSelected).hide();\n      }\n\n    });\n  } });\n\n\n\nbizagi.injector.register('bizagi.workportal.widgets.users.modal', ['workportalFacade', 'dataService', bizagi.workportal.widgets.users.modal]);","bizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.accessDenied\", {}, {\n  /**\r\n                                                                                         * Constructor\r\n                                                                                         */\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    //Load template\n    self.loadTemplates({\n      \"access-denied\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.accessDenied\").concat(\"#access-denied\") });\n\n  },\n\n  renderContent: function renderContent() {\n    var self = this;\n    var template = self.getTemplate('access-denied');\n    self.content = template.render({});\n    return self.content;\n  } });\n\n\nbizagi.injector.register('bizagi.workportal.widgets.accessDenied', ['workportalFacade', 'dataService', bizagi.workportal.widgets.accessDenied]);","var usersAdapter = function () {\n\n  var self = this;\n  /**\r\n                    * Private methods\r\n                    */\n\n  function matchExtendedInfo(list, usersWithExtendedInfo) {\n    list.map(function (uuser) {\n      var u = usersWithExtendedInfo.find(function (e) {\n        return uuser.idUser == e.idUser;\n      });\n      uuser.extendedInfo = u.extendedInfo;\n    });\n  }\n\n\n  /**\r\n     * Public methods\r\n     */\n\n  /**\r\n         * create a json standard for user information\r\n         * (this is used in modals and usertooltip)\r\n         * if the isAssignee and owner are false the user is participant\r\n         * if the isAssignee and owner are null the user is not in (isAssignee, owner and participant)\r\n         * @param {string} userAssigned guid del usuario\r\n         * @param {string} name \r\n         * @param {string} username \r\n         * @param {string} picture \r\n         * @param {string} email \r\n         * @param {string} initials \r\n         * @param {boolean} isAssignee if is true the user shows like assignee\r\n         * @param {boolean} owner if is true the user shows like creator\r\n         * @param {Array} activities \r\n         * @param {Array} events \r\n         */\n  var createJsonUserInfo = function createJsonUserInfo(userAssigned, name, username, picture, email, initials, isAssignee, owner, activities, events) {\n    var participant = owner === false && isAssignee === false;\n    if (owner === null && isAssignee === null)\n    owner = participant = false;\n\n    picture = self.validateDataURIScheme(picture);\n\n    return {\n      userAssigned: userAssigned,\n      name: name,\n      username: username,\n      picture: picture,\n      email: email,\n      initials: initials,\n      isAssignee: isAssignee,\n      isParticipant: participant,\n      owner: owner,\n      activities: activities,\n      events: events,\n      isAnonymized: userAssigned === bizagi.util.anonymizedUserInformation.id };\n\n  };\n\n  /**\r\n      * Ensure the correct data URI Schema in the picture\r\n      * @param {base64} picture \r\n      */\n  self.validateDataURIScheme = function (picture) {\n    var dataURIScheme = \"data:image/png;base64,\";\n    if (picture !== undefined) {\n      if (picture.indexOf(dataURIScheme) === -1) {\n        picture = dataURIScheme + picture;\n      } else {\n        picture = picture.replace(\"data:image/png;base64,data:image/png;base64,\", dataURIScheme);\n      }\n    }\n    return picture;\n  };\n\n  /**\r\n      * let to add extendedInfo to each users,assigned,createdBy\r\n      * @param {*} cases \r\n      * @param {*} usersWithExtendedInfo \r\n      */\n  var matchUsersForExtendedInfoCase = function matchUsersForExtendedInfoCase(cases, usersWithExtendedInfo) {\n    cases.map(function (casee) {\n      if (casee.assignees)\n      matchExtendedInfo(casee.assignees, usersWithExtendedInfo);\n      if (casee.users)\n      matchExtendedInfo(casee.users, usersWithExtendedInfo);\n      if (casee.createdBy) {\n        var u = usersWithExtendedInfo.find(function (e) {\n          return casee.createdBy.idUser == e.idUser;\n        });\n        casee.createdBy.extendedInfo = u.extendedInfo;\n      }\n    });\n  };\n\n  /**\r\n      * return just the assigned users if exists a only creator user this is ommited\r\n      * @param {Array} users \r\n      */\n  var justAssignees = function justAssignees(users) {\n    return users.filter(function (user) {\n      return user.isAssignee === true;\n    });\n  };\n\n  var usersWithoutAnonymized = function usersWithoutAnonymized(users) {\n    return users.filter(function (user) {\n      return user.isAnonymized === false;\n    });\n  };\n\n  return {\n    createJsonUserInfo: createJsonUserInfo,\n    matchUsersForExtendedInfoCase: matchUsersForExtendedInfoCase,\n    justAssignees: justAssignees,\n    usersWithoutAnonymized: usersWithoutAnonymized };\n\n}();","/**\r\n * Name: Bizagi Workportal Task Description\r\n* \r\n* @author Kvn Alvarado\r\n */\n\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.task.description\", {}, {\n  /**\r\n                                                                                             * Constructor\r\n                                                                                             */\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    self.fromWebpart = self.params.fromWebpart || false;\n    if (!self.fromWebpart) {\n      //Load template\n      self.loadTemplates({\n        \"task-description\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.task.description\").concat(\"#task-description\") });\n\n    } else {\n      self.template = self.params.template;\n      if (self.template === undefined)\n      throw \"if is from webpart needs template param\";\n    }\n\n  },\n\n  /**\r\n      * render tmpl depends if comes from webpart or not\r\n      */\n  getContentOnRender: function getContentOnRender() {\n    var self = this;\n    var template = self.template || self.getTemplate('task-description'),\n    renderParams = {\n      modalForDescription: self.isNecessaryModal };\n\n    return self.fromWebpart ? $.tmpl(template, renderParams) : template.render(renderParams);\n  },\n\n  renderContent: function renderContent() {\n    var self = this;\n    var width = self.params.width;\n    if (DOMPurify) {\n      self.description = DOMPurify.sanitize(self.params.description);\n    }\n    self.isNecessaryModal = self.isNecessaryModalForDescription(self.description, width);\n    self.content = self.getContentOnRender();\n    return self.content;\n  },\n\n  postRender: function postRender() {\n    var self = this;\n    self.params.container.html(self.content);\n    if (self.isNecessaryModal && self.params.classNeedsModal) {\n      self.params.container.addClass(self.params.classNeedsModal);\n    }\n    $(\"#ui-bizagi-wp-project-activity-description-text\", self.content).append(self.description);\n    $(\"#ui-bizagi-wp-project-activity-description-more-button > a\", self.content).click(function () {\n      self.showModalDescription();\n    });\n    var params = {\n      baseUrl: bizagi.util.getPathUrl(''),\n      container: $(\"#ui-bizagi-wp-project-activity-description-text\", self.content)[0],\n      callback: self.showConfirmationMessage };\n\n    bizagi.validateTrustDomains(params);\n  },\n\n  /**\r\n      * show simple modal with task description content\r\n      */\n  showModalDescription: function showModalDescription() {\n    var self = this;\n    var e = $(\"<div id='modalDescription'></div>\");\n    e.append(self.description);\n    e.dialog({\n      show: 'fade',\n      width: 600,\n      height: 500,\n      modal: true,\n      dialogClass: \"\",\n      closeOnEscape: true,\n      draggable: false,\n      title: bizagi.localization.getResource(\"workportal-project-casedashboard-activity-description\"),\n      maximize: true,\n      maximized: false,\n      maximizeOnly: false,\n      buttons: [{\n        text: bizagi.localization.getResource(\"workportal-widget-dialog-box-close\"),\n        click: function click() {\n          e.dialog('close');\n        } }],\n\n      close: function close() {\n        $(this).dialog('destroy');\n        $(this).detach();\n      },\n      resizable: false });\n\n    var params = {\n      baseUrl: bizagi.util.getPathUrl(''),\n      container: $(\"#modalDescription\")[0],\n      callback: self.showConfirmationMessage };\n\n    bizagi.validateTrustDomains(params);\n  },\n  /**\r\n      * show a confirmation message when user go to another domain\r\n      */\n  showConfirmationMessage: function showConfirmationMessage() {\n    var message = bizagi.localization.getResource(\"workportal-widget-task-description-confirm-message\") + \" <br><strong>\" + bizagi.localization.getResource(\"workportal-widget-task-description-do-you-want-to-continue\") + \"</strong>\",\n    title = bizagi.localization.getResource(\"workportal-widget-task-description-confirm-title\"),\n    buttons = [\n    { label: bizagi.localization.getResource(\"workportal-general-word-cancel\"), action: \"reject\" },\n    { label: bizagi.localization.getResource(\"workportal-general-word-continue\"), action: \"resolve\" }];\n\n    return bizagi.showConfirmationBox(message, title, true, buttons);\n  },\n\n  /**\r\n      * validate if the description is longer to it's container\r\n      * in BizagiModeler is saved in p > span tags each new line so, is necessary to verify between them\r\n      * @param {string} description task description text\r\n      */\n  isNecessaryModalForDescription: function isNecessaryModalForDescription(description, width) {\n    var resp = false;\n    /**\r\n                       * if width is undefined return true to show a modal\r\n                       */\n    if (width == undefined) {\n      console.error(\"width is undefined\");\n      resp = true;\n    }\n    if (description) {\n      var container = $(\"<div id='description' style='border: solid; width:\" + width + \"px; height:200px; box-sizing: border-box; border: hidden;'></div>\");\n      container.append(description);\n      $(\"body\").append(container);\n      if (container[0].scrollWidth > width || container[0].scrollHeight > 200) {\n        resp = true;\n      }\n      container.remove();\n    }\n    return resp;\n  },\n\n  /**\r\n      * render all the bizagi.workportal.widgets.task.description widget in each currentState of case\r\n      * @param {Array} currentStates \r\n      * @param {Jquery Template} renderedTemplate container template\r\n      */\n  renderManyTasksDescription: function renderManyTasksDescription(currentStates, renderedTemplate) {\n    var self = this;\n    var newWidgets = [];\n\n    for (var i = 0; i < currentStates.length; i++) {\n      var taskDescriptionParams = {\n        container: $(\"#ui-bizagi-wp-app-inbox-description-task_description_container_\" + i, renderedTemplate),\n        description: currentStates[i].tskDescription,\n        classNeedsModal: self.params.classNeedsModal,\n        width: self.params.width,\n        idWorkItem: self.params.idWorkItem,\n        fromWebpart: self.fromWebpart,\n        template: self.template };\n\n      newWidgets.push(new bizagi.workportal.widgets.task.description(self.workportalFacade, self.dataService, taskDescriptionParams));\n      newWidgets[i].render();\n    }\n    return newWidgets;\n  },\n\n  clean: function clean() {\n    var self = this;\n    $(\"#ui-bizagi-wp-project-activity-description-more-button > a\", self.content).unbind(\"click\");\n  } });\n\n\n\nbizagi.injector.register('bizagi.workportal.widgets.task.description', ['workportalFacade', 'dataService', bizagi.workportal.widgets.task.description]);","/**\r\n * Name: Bizagi Workportal Task Options\r\n* \r\n* @author Kvn Alvarado\r\n */\n\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.task.options\", {}, {\n  /**\r\n                                                                                         * Constructor\r\n                                                                                         */\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n  },\n\n  /**\r\n      * return a jquery promise for widgets needs taskOptions call\r\n      * if the idWorkitem is 0 request is not necessary\r\n      * @param {Int} idCase \r\n      * @param {Int} idWorkitem \r\n      */\n  _start: function _start(idCase, idWorkitem) {\n    var self = this,\n    defer;\n    if (idWorkitem === 0) {\n      defer = $.Deferred();\n      defer.resolve(self.pipeResponse({}));\n    } else {\n      defer = self.request(idCase, idWorkitem);\n    }\n    return defer;\n  },\n\n  /**\r\n      * wait for render and start request\r\n      * @param {Int} idCase \r\n      * @param {Int} idWorkitem \r\n      */\n  getTaskOptions: function getTaskOptions(idCase, idWorkitem) {\n    var self = this,\n    _renderDefer = self._wait4Render(true),\n    _defer = new $.Deferred();\n\n    _renderDefer.done(function () {\n      self._start(idCase, idWorkitem).done(_defer.resolve);\n    });\n    return _defer;\n  },\n\n  /**\r\n      * create a promise for wait for render endpoint ends\r\n      * @param {Boolean} start if true the promise is new, false the promise resolves\r\n      */\n  _wait4Render: function _wait4Render(start) {\n    var self = this,\n    _finish = start !== true && self._wait4RenderDefer !== undefined;\n    if (_finish) {\n      self._wait4RenderDefer.resolve();\n    }\n    if (start) {\n      self._wait4RenderDefer = new $.Deferred();\n    }\n    return self._wait4RenderDefer;\n  },\n\n  /**\r\n      * ends to wait for render\r\n      */\n  renderEnds: function renderEnds() {\n    var self = this;\n    self._wait4Render(false);\n  },\n\n  /**\r\n      * make request for get taskOptions\r\n      * @param {Int} idCase\r\n      * @param {Int} idWorkitem \r\n      */\n  request: function request(idCase, idWorkitem) {\n    var self = this,\n    params = {\n      idCase: idCase,\n      idWorkitem: idWorkitem };\n\n    return $.when(self.dataService.getTaskOptions(params)).pipe(function (data) {\n      if (data.allowTakeOwnership === true && data.allowRelease === true) {\n        throw \"can't get both allowTakeOwnership and allowTakeOwnership properties equal true\";\n      }\n      return self.pipeResponse(data);\n    });\n  },\n\n  /**\r\n      * return the correct params or the default\r\n      * @param {JSON} params taskOptions response\r\n      */\n  pipeResponse: function pipeResponse(params) {\n    return {\n      showTakeOwnership: params.allowTakeOwnership || false,\n      showRelease: params.allowRelease || false,\n      showCancelCase: params.allowCaseCancel || false };\n\n  },\n\n  clean: function clean() {\n    var self = this;\n  } });\n\n\n\nbizagi.injector.register('bizagi.workportal.widgets.task.options', ['workportalFacade', 'dataService', bizagi.workportal.widgets.task.options]);","/*\r\n*   Name: Service to handle the requests for Quick Actions\r\n*   Author: Bizagi\r\n*/\n\n$.Class.extend(\"bizagi.workportal.services.quickActionsRequester\", {\n  QUICK_ACTIONS_QUEUE: 'QUICK_ACTIONS_QUEUE' },\n{\n  /*\r\n  *  Constructor\r\n  */\n  init: function init(dataService, params) {\n    var self = this;\n    self.dataService = dataService;\n    self.params = params;\n    self.numberAllActions = 0;\n    self.executedRequests = 0;\n  },\n\n\n  /**\r\n      * Start a request with specific information\r\n      * @param {object} paramsRequest \r\n      */\n  _startRequest: function _startRequest(paramsQuickAction) {\n    var self = this;\n\n    var paramsToBackend = {\n      caseId: paramsQuickAction.caseId,\n      workItemId: paramsQuickAction.workItemId,\n      taskId: paramsQuickAction.taskId,\n      quickActionGuid: paramsQuickAction.quickActionGuid,\n      actions: self._buildParametersByActions(paramsQuickAction) };\n\n\n    // necessary to jquery queue()\n    return function (next) {\n\n      self.executedRequests++;\n\n      self.params.callback({\n        type: 'one-start',\n        response: {\n          paramsRequest: paramsQuickAction } });\n\n\n\n      self.dataService.executeQuickAction(paramsToBackend).done(function (response) {\n        self._finishRequest(paramsQuickAction, response);\n        next();\n      }).fail(function (response) {\n        self._finishRequest(paramsQuickAction, response);\n        next();\n      });\n    };\n  },\n\n  /**\r\n      * \r\n      * Receive the notification when a request is success or fail \r\n      * @param {object} paramsRequest \r\n      * @param {object} response \r\n      */\n  _finishRequest: function _finishRequest(paramsRequest, response) {\n    var self = this;\n\n    self.params.callback({\n      type: 'one-end',\n      response: {\n        paramsRequest: paramsRequest,\n        backResponse: response } });\n\n\n  },\n\n  /**\r\n      * When finish all executions of quick actions\r\n      */\n  _finishAllRequests: function _finishAllRequests() {\n    var self = this;\n    self._clearQueue();\n    self.params.callback({\n      type: 'all' });\n\n  },\n\n  /**\r\n      * When the user stop all, clear the queue\r\n      */\n  _skipPendingRequests: function _skipPendingRequests() {\n    var self = this;\n    self._clearQueue();\n    self.params.callback({\n      type: 'stop-by-user',\n      response: {\n        numberSkipActions: self.numberAllActions - self.executedRequests } });\n\n\n  },\n\n  /**\r\n      * Clear queue\r\n      */\n  _clearQueue: function _clearQueue() {\n    var self = this;\n    $(document).clearQueue(self.Class.QUICK_ACTIONS_QUEUE);\n    $(document).stop();\n  },\n\n  /**\r\n      * Build and execute the queue\r\n      * @param {Array} arrayRequestsInformation \r\n      */\n  _executeQueueRequests: function _executeQueueRequests(arrayRequestsInformation) {\n    var self = this;\n\n    self.numberAllActions = arrayRequestsInformation.length;\n\n    //fill the queue\n    for (var i = 0; i < arrayRequestsInformation.length; i++) {\n      $(document).queue(self.Class.QUICK_ACTIONS_QUEUE, self._startRequest(arrayRequestsInformation[i]));\n    }\n\n    //start the first element\n    $(document).dequeue(self.Class.QUICK_ACTIONS_QUEUE);\n\n    // events\n    $(document).queue(self.Class.QUICK_ACTIONS_QUEUE, function () {\n      self._finishAllRequests();\n    });\n\n  },\n\n  _buildParametersByActions: function _buildParametersByActions(quickAction) {\n    var self = this;\n    var actions = quickAction.actions;\n\n    var response = [];\n    if (quickAction.ruleGuid) {\n      response.push(self._buildRequestSubmitData(quickAction.ruleGuid));\n      response.push(self._buildRequestCheckpoint(quickAction.ruleGuid));\n      response.push(self._buildRequestProcessPropertyValue(quickAction.ruleGuid));\n      response.push(self._buildRequestCommit(quickAction.ruleGuid));\n    }\n\n    //Next \n    if (JSON.stringify(actions) == '[\"next\",\"submitData\",\"validate\"]') {\n      response.push({\n        \"h_action\": \"next\",\n        \"h_tag\": \"performAction\" });\n\n    }\n    // none\n    else if (JSON.stringify(actions) == '[\"submitData\",\"refresh\"]') {\n        response.push({\n          \"h_action\": \"save\",\n          \"h_tag\": \"performAction\" });\n\n      }\n      //next without validation\n      else if (JSON.stringify(actions) == '[\"nextWithoutValidations\",\"submitData\"]') {\n          response.push({\n            \"h_action\": \"nextWithoutValidations\",\n            \"h_tag\": \"performAction\" });\n\n        }\n    return response;\n  },\n\n  _buildRequestSubmitData: function _buildRequestSubmitData() {\n    return {\n      \"h_action\": \"SUBMITDATA\",\n      \"h_tag\": \"submitData\" };\n\n  },\n\n  _buildRequestCheckpoint: function _buildRequestCheckpoint(ruleGuid) {\n    return {\n      \"h_action\": \"CHECKPOINT\",\n      \"h_xpath\": \"\",\n      \"h_idRender\": ruleGuid,\n      \"h_xpathContext\": \"\",\n      \"h_tag\": \"checkpoint\" };\n\n  },\n\n  _buildRequestProcessPropertyValue: function _buildRequestProcessPropertyValue(ruleGuid) {\n    return {\n      \"h_action\": \"PROCESSPROPERTYVALUE\",\n      \"h_idRender\": ruleGuid,\n      \"h_xpathContext\": \"\",\n      \"h_propertyName\": \"buttonRule\",\n      \"h_tag\": \"executeRule\" };\n\n  },\n\n  _buildRequestCommit: function _buildRequestCommit(ruleGuid) {\n    return {\n      \"h_action\": \"COMMIT\",\n      \"h_xpath\": \"\",\n      \"h_idRender\": ruleGuid,\n      \"h_xpathContext\": \"\",\n      \"h_tag\": \"commit\" };\n\n  },\n\n  /**\r\n      * Receive the data, transform, and call execution the queue\r\n      * @param {Array} arrayRequestsInformationRaw \r\n      */\n  startAllRequests: function startAllRequests(arrayRequestsInformationRaw) {\n    var self = this;\n\n    self._executeQueueRequests(arrayRequestsInformationRaw);\n  },\n\n  /**\r\n      * Stop the queue of the requests\r\n      */\n  stopAllRequests: function stopAllRequests() {\n    var self = this;\n    if (self.numberAllActions > self.executedRequests) {\n      self._skipPendingRequests();\n    }\n  } });\n\n\n\n\nbizagi.injector.register('quickActionsRequesterService', ['dataService', bizagi.workportal.services.quickActionsRequester]);","bizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.casestemplate\", {}, {\n  /**\r\n                                                                                          * Constructor\r\n                                                                                          */\n  init: function init(workportalFacade, dataService, actionService, casetoolbar, usersCasesService, actionsEventsService, accumulatedcontext, params) {\n    var self = this;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    //Load templates\n    self.loadTemplates({\n      \"casestemplate-container\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.casestemplate\").concat(\"#casestemplate-wrapper\"),\n      \"casestemplate-item\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.casestemplate\").concat(\"#casestemplate-item\"),\n      \"casestemplate-empty-data\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.casestemplate\").concat(\"#casestemplate-empty-message\") });\n\n\n    self.selectorCheckboxItems = \".casetemplate-box-check-selector input:checkbox\";\n    self.actionService = actionService;\n    self.casetoolbar = casetoolbar;\n    self.usersCasesService = usersCasesService;\n    self.actionsEventsService = actionsEventsService;\n    self.hasBatchActions = false;\n\n    self.sequenceCall = 0;\n    self.accumulatedcontext = accumulatedcontext;\n  },\n\n  /**\r\n      * Renders the template defined in the widget\r\n      */\n  renderContent: function renderContent() {\n    var self = this,\n    templateContainer = self.getTemplate(\"casestemplate-container\");\n\n    self.content = templateContainer.render({});\n    return self.content;\n  },\n\n  /**\r\n      * links events with handlers\r\n      */\n  postRender: function postRender() {\n    var self = this,\n    $content = self.getContent();\n\n    self.sub(\"CASES-TEMPLATE-VIEW\", $.proxy(self.updateCases, self));\n    self.sub(\"UPDATE-DATATEMPLATE-VIEW\", $.proxy(self.updateCases, self));\n    self.sub(\"GET-COMMON-ACTIONS\", $.proxy(self.getCommonActions, self));\n    self.sub(\"SET-RECORDS\", $.proxy(self.updateCases, self));\n    self.sub(\"SET-VALUES\", function (ev, params) {return self.setValues(params);});\n    self.actionService.subscribe(\"onFormActionExecuted\", $.proxy(self.onFormActionExecuted, self));\n    self.actionService.subscribe(\"onFormRuleExecuted\", $.proxy(self.onFormRuleExecuted, self));\n    $content.find(\"#casestemplate-dataviewer-list\").on(\"click\", self.selectorCheckboxItems, $.proxy(self.onCaseChecked, self));\n  },\n\n  /**\r\n      * Detach events\r\n      */\n  clean: function clean() {\n    var self = this,\n    $content = self.getContent();\n\n    self.checkAll = false;\n    self.sequenceCall = 0;\n\n    if ($content) {\n      self.actionService.unsubscribe(\"onFormActionExecuted\");\n      self.actionService.unsubscribe(\"onFormRuleExecuted\");\n      self.unsub(\"CASES-TEMPLATE-VIEW\");\n      self.unsub(\"UPDATE-DATATEMPLATE-VIEW\");\n      self.unsub(\"GET-COMMON-ACTIONS\");\n      self.sub(\"SET-VALUES\");\n      $content.find(\"#casestemplate-dataviewer-list\").off(\"click\", self.selectorCheckboxItems);\n    }\n  },\n\n\n\n  /**\r\n      * Updates the cases list\r\n      */\n  updateCases: function updateCases(ev, data) {\n    var self = this,\n    args = data.args,\n    defer = new $.Deferred(),\n    $dataViewList = $(\"#casestemplate-dataviewer-list\", self.getContent());\n\n    $dataViewList.empty();\n    self.actionService.init();\n    self.casesSelected = {};\n    self.sequenceCall++;\n\n    self.page = args.page || self.page;\n    self.idworkflow = args.idworkflow == undefined ? self.idworkflow : args.idworkflow;\n    self.route = args.route || self.route;\n    self.filter = args.filter || self.filter;\n    self.pageSize = args.pageSize || self.pageSize;\n\n    (function (sequence) {\n      $.when(self.getCasesData({ page: self.page, idworkflow: self.idworkflow, pageSize: self.pageSize })).\n      pipe(function (casesData) {\n        if (self.sequenceCall !== sequence) {\n          defer.resolve();\n          return null;\n        }\n        self.pub(\"notify\", { type: \"PAGINATOR-UPDATE\", args: $.extend(args, casesData, { event: data.type }) });\n        return self.getCasesTemplates(casesData);\n      }).\n      done(function (templates) {\n        if (templates !== null) {\n          var casesLength = self.casesLength = templates.length,\n          templateString = casesLength > 0 ? \"\" : self.getEmptyDataMessage(),\n          $templateCase = null,\n          $elementsTmpl = $();\n\n          self.hasBatchActions = false;\n          for (var i = 0, l = templates.length; i < l; i++) {\n            if (self.sequenceCall !== sequence) {\n              defer.resolve();\n              return;\n            }\n            $templateCase = self.renderCase(templates[i], false, sequence);\n            $elementsTmpl.push.apply($elementsTmpl, $templateCase);\n          }\n          if (!self.hasBatchActions) {\n            self.pub(\"notify\", {\n              type: \"HIDE-CHECK-ALL\",\n              args: {} });\n\n          }\n\n          if ($elementsTmpl.length > 0) {\n            $dataViewList.append($elementsTmpl);\n          } else\n          {\n            $dataViewList.append(templateString);\n          }\n\n          self.checkAll = false;\n\n          self.pub(\"notify\", { type: \"ENABLE-BATCHS-ACTIONS\", args: { commonActions: self.setValues({ args: { value: self.checkAll } }) } });\n          defer.resolve(templates);\n        }\n\n      });\n    })(self.sequenceCall);\n\n    return defer.promise();\n  },\n\n  /**\r\n      * Renders the case with the decorators related\r\n      * actions events and images\r\n      */\n  renderCase: function renderCase(caseData, isRefresh, sequence) {\n    var self = this,\n    actionData = caseData.actionData,\n    idCase = actionData.idCase,\n    surrogateKey = actionData.surrogateKey,\n    guidEntity = actionData.guidEntity,\n    templateCase = self.getTemplate(\"casestemplate-item\"),\n    security = new bizagi.workportal.command.security(self.dataService);\n    var $templateCase = templateCase.render({\n      idCase: idCase,\n      guidEntity: guidEntity,\n      surrogateKey: surrogateKey });\n\n\n    $templateCase.find(\"#template\").append(caseData.tmpl);\n\n    $.when(security.checkSecurityPerm(\"GraphicQuery\")).done(function (graphicQuery) {\n      caseData.casetoolbarData[\"graphicQuery\"] = graphicQuery;\n      // Set header\n      setTimeout(function () {\n        var $casetoolbar = self.casetoolbar.getCaseToolbar({ casetoolbarData: $.extend(caseData.casetoolbarData, { referrer: \"CasesTemplate\" }) });\n        var $case = self.getContent().find(\"#casetemplate-box-wrapper-\" + idCase + \" .casetemplate-box-element\");\n\n        if (sequence === self.sequenceCall) {\n          $case.append($casetoolbar);\n        }\n      }, 0);\n    });\n\n    // Get Actions and events\n    setTimeout(function () {\n      var $footer = self.getContent().find(\"#casetemplate-box-wrapper-\" + idCase + \" .casetemplate-box-footer\");\n\n      $footer.startLoading({ delay: 0, overlay: true });\n      $.when(self.actionService.getActionsView({\n        actionData: caseData.actionData,\n        loadEvents: true,\n        isRefresh: isRefresh })).\n\n      done(function (responseActions) {\n        var $actionsView = responseActions.actionsView;\n        var actionsData = responseActions.actionsData;\n\n        // Get the batch actions in the actionsData array\n        var batchActions = actionsData.length === 0 ? [] : self.pub(\"notify\", {\n          type: \"BATCH-ACTIONS\",\n          args: { actionsData: actionsData } })[\n        0];\n        var $case = self.getContent().\n        find(\"#casetemplate-box-wrapper-\" + idCase + \" .casetemplate-box-element .casetemplate-box-footer\");\n        if ($actionsView && sequence === self.sequenceCall) {\n          $case.append($actionsView);\n\n          // Show cases checboxes and check all checkbox if there are batch actions\n          if (batchActions.length > 0 && self.getCheckBox($case).data(\"surrogatekey\") != -1) {\n            self.hasBatchActions = true;\n            self.showCheckItem($case);\n            self.pub(\"notify\", {\n              type: \"SOME-ITEM-ALLOW-SELECT\",\n              args: {} });\n\n          } else\n          {\n            self.removeCheckItem($case);\n          }\n        } else\n        {\n          self.removeCheckItem($case);\n        }\n        $footer.endLoading();\n      });\n    }, 0);\n    // Get cases assignees\n    setTimeout(function () {\n      $.when(self.usersCasesService.getAssignees(idCase)).\n      done(function ($assignees) {\n        if ($assignees && sequence === self.sequenceCall) {\n          var $case = self.getContent().\n          find(\"#casetemplate-box-wrapper-\" + idCase + \" .casetemplate-box-element .casetemplate-box-footer\");\n          $case.append($assignees);\n        }\n      });\n    }, 0);\n\n    return $templateCase;\n  },\n\n  /**\r\n      * Get check item by case\r\n      * @param $item\r\n      */\n  getCheckBox: function getCheckBox($item) {\n    var self = this;\n    return $item.closest(\".casetemplate-box-element\").find(self.selectorCheckboxItems);\n  },\n\n  /**\r\n      * Hide check item\r\n      * @param $item\r\n      */\n  removeCheckItem: function removeCheckItem($item) {\n    var self = this;\n    self.getCheckBox($item).remove();\n  },\n\n  /**\r\n      * Show checkbox\r\n      * @param $item\r\n      */\n  showCheckItem: function showCheckItem($item) {\n    var self = this;\n    self.getCheckBox($item).show();\n  },\n\n  /**\r\n      * Process action was executed\r\n      */\n  onFormActionExecuted: function onFormActionExecuted(ev, data) {\n    var self = this;\n    data = data || {};\n\n    if (data.refresh) {\n      self.refreshCase(data.idCase);\n    }\n  },\n\n  /**\r\n      * Process action was executed\r\n      */\n  onFormRuleExecuted: function onFormRuleExecuted(ev, data) {\n    var self = this;\n    data = data || {};\n\n    if (data.refresh) {\n      self.refreshCase(data.idCase);\n    }\n  },\n\n  /**\r\n      * Refresh the case with the new data\r\n      */\n  refreshCase: function refreshCase(idCase) {\n    var self = this;\n\n    var idBox = \"#casetemplate-box-wrapper-\" + idCase;\n    var $templateBox = $(idBox);\n    var isChecked = $templateBox.\n    find(\".casetemplate-box-check-selector > input\").\n    is(\":checked\");\n\n    $templateBox.startLoading({ delay: 250, overlay: true });\n\n    $.when(self.getCasesData({ idCase: idCase })).\n    then(function (caseData) {\n      return self.getCasesTemplates(caseData, true);\n    }).\n    done(function (caseTemplate) {\n\n      var $templateCase = null;\n\n      if (caseTemplate[0] != undefined && caseTemplate[0] != null) {\n        $templateCase = self.renderCase(caseTemplate[0], true, self.sequenceCall);\n        $templateBox.replaceWith($templateCase);\n      }\n\n      $templateBox.endLoading();\n\n      // Restore checked value\n      if (isChecked) {\n        $templateBox = $(idBox);\n        $templateBox.find(\".casetemplate-box-check-selector > input\").prop(\"checked\", true);\n      }\n    });\n  },\n\n  /**\r\n      * Gets the data related with the cases\r\n      */\n  getCasesData: function getCasesData(params) {\n    var self = this;\n\n    if (self.route == \"following\") {\n      return self.dataService.getActivitiesData(params);\n    }\n\n    if (self.route == \"pendings\") {\n      return self.dataService.getPendingsData(params);\n    }\n\n    if (self.route == \"Green\" ||\n    self.route == \"Yellow\" ||\n    self.route == \"Red\") {\n      $.extend(params, { taskState: self.route });\n      return self.dataService.getPendingsData(params);\n    }\n  },\n\n  /**\r\n      * Invokes the template engine, to gets the custom columns\r\n      */\n  getCasesTemplates: function getCasesTemplates(casesData, refreshCase) {\n    var self = this,\n    result = [],\n    defer = new $.Deferred();\n\n    $.when(self.getTemplateEngine()).\n    then(function (engine) {\n      return $.when.apply($, $.map(casesData.entities, function (cases) {\n        return engine.render(cases);\n      }));\n    }).\n    done(function () {\n      var casesTemplates = $.makeArray(arguments),\n      idCases = [],\n      cases = casesData.entities.length;\n\n      for (var i = 0; i < cases; i++) {\n        var tmpl = cases === 1 ? casesTemplates[i] : casesTemplates[i][0];\n        var caseData = casesData.entities[i];\n        result.push({\n          tmpl: tmpl,\n          casetoolbarData: {\n            guidFavorite: casesData.entities[i].guidFavorite,\n            idcase: casesData.entities[i].idCase,\n            idWorkflow: casesData.entities[i].idWorkflow,\n            radNumber: casesData.entities[i].radNumber || casesData.entities[i].idCase },\n\n          actionData: {\n            guidEntity: caseData.guid,\n            idCase: caseData.idCase,\n            radNumber: caseData.radNumber,\n            surrogateKey: caseData.surrogateKey } });\n\n\n        idCases.push(caseData.idCase);\n      }\n\n      if (!refreshCase) {\n        self.usersCasesService.render(idCases);\n        self.actionsEventsService.render(idCases);\n      }\n\n      defer.resolve(result);\n    });\n\n    return defer.promise();\n  },\n\n  /**\r\n      *  returns an instance of  the template engine\r\n      */\n  getTemplateEngine: function getTemplateEngine() {\n    var self = this;\n\n    if (self.templateEngine) {\n      return self.templateEngine;\n    }\n\n    var params = {};\n\n    params.proxyPrefix = bizagi.RPproxyPrefix;\n    var renderDataService = new bizagi.render.services.service(params),\n    renderFactory = new bizagi.rendering.desktop.factory(renderDataService),\n    defer = new $.Deferred();\n\n    $.when(renderFactory.initAsyncStuff()).\n    done(function () {\n      self.templateEngine = new bizagi.templateEngine({ renderFactory: renderFactory, cache: true, forcePersonalizedColumns: true });\n      self.templateEngine.subscribe(\"onLoadDataNavigation\", function (ev, params) {\n        var data = params.data || {};\n        var args = {\n          reference: data.reference,\n          surrogateKey: data.surrogateKey,\n          referenceType: data.referenceType,\n          fromActionLauncher: false,\n          histName: data.displayName,\n          guidEntityCurrent: data.guidEntityCurrent,\n          page: 1 };\n\n\n        if (typeof data.xpath !== \"undefined\" && data.xpath) {\n          args.xpath = data.xpath;\n        }\n\n        self.accumulatedcontext.clean();\n        self.pubDeadLockDetection(\"notify\", {\n          type: \"TEMPLATEENGINE-VIEW\",\n          args: args });\n\n      });\n      defer.resolve(self.templateEngine);\n    });\n\n    return defer.promise();\n  },\n\n  /**\r\n      * Gets Message when there aren\"t data\r\n      */\n  getEmptyDataMessage: function getEmptyDataMessage() {\n    var self = this;\n    var casestemplateEmptyData = self.getTemplate(\"casestemplate-empty-data\");\n\n    return casestemplateEmptyData.render()[0].outerHTML;\n  },\n\n  /**\r\n      * Handler to hold the cases selected\r\n      */\n  onCaseChecked: function onCaseChecked(ev) {\n    var self = this,\n    $target = $(ev.target),\n    surrogateKey = $target.data(\"surrogatekey\"),\n    idCase = $target.data(\"idcase\"),\n    guidEntity = $target.data(\"guidentity\"),\n    isChecked = $target.is(\":checked\");\n\n    self.casesSelected[idCase] = {\n      surrogateKey: surrogateKey,\n      guidEntity: guidEntity,\n      idCase: idCase };\n\n\n    if (!isChecked) {\n      delete self.casesSelected[idCase];\n    }\n    self.pub(\"notify\", { type: \"ENABLE-BATCHS-ACTIONS\", args: { commonActions: self.getCommonActions() } });\n\n  },\n\n  /**\r\n      * Returns the common actions in the set of data\r\n      */\n  getCommonActions: function getCommonActions() {\n    var self = this,\n    model = {};\n\n    model.actions = self.actionService.getCommonActions(self.casesSelected);\n    model.surrogateKeys = [];\n    model.parentsid = [];\n\n    for (var idcase in self.casesSelected) {\n      var data = self.casesSelected[idcase];\n      if (data.surrogateKey !== -1) {\n        model.surrogateKeys.push(data.surrogateKey);\n        model.parentsid.push(data.idCase);\n      }\n    }\n\n    model.guidEntity = idcase !== undefined ? self.casesSelected[idcase].guidEntity : \"\";\n\n    if (model.surrogateKeys.length == 0) {\n      self.checkAll = false;\n      model.checkAll = false;\n    } else\n    if (model.surrogateKeys.length == self.casesLength) {\n      self.checkAll = true;\n      model.checkAll = true;\n    }\n\n    model.itemsSelected = self.casesSelected;\n\n    return model;\n  },\n\n  /**\r\n      * Set current value\r\n      */\n  setValues: function setValues(params) {\n    var self = this,\n    $content = self.getContent(),\n    args = params.args || {},\n    isChecked = args.value;\n\n    if ($content) {\n      self.casesSelected = {};\n      var $inputs = $content.find(self.selectorCheckboxItems);\n      $.map($inputs, function (input) {\n        $(input).prop(\"checked\", isChecked);\n\n        if (isChecked) {\n          var surrogateKey = $(input).data(\"surrogatekey\"),\n          idCase = $(input).data(\"idcase\"),\n          guidentity = $(input).data(\"guidentity\");\n\n          self.casesSelected[idCase] = {\n            surrogateKey: surrogateKey,\n            guidEntity: guidentity,\n            idCase: idCase };\n\n        }\n      });\n\n      self.checkAll = isChecked;\n\n      return self.getCommonActions();\n    }\n  } });\n\n\nbizagi.injector.register(\"bizagi.workportal.widgets.casestemplate\", [\"workportalFacade\", \"dataService\", \"actionService\", \"casetoolbar\", \"usersCasesService\", \"actionsEventsService\", \"accumulatedcontext\", bizagi.workportal.widgets.casestemplate]);"]}