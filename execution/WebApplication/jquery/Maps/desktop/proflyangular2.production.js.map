{"version":3,"sources":["jquery/workportal/desktop/widget/profly/bizagi.workportal.desktop.widgets.profly.js"],"names":["bizagi","workportal","widgets","widget","extend","init","workportalFacade","dataService","params","this","_super","loadTemplates","project-filespreview-wrapper","getTemplate","concat","renderContent","argumentsTemplate","paramsURL","data","route","id","encodeURI","displayName","module","generalTmpl","content","render","$","on","event","currentTarget","contentWindow","location","href","indexOf","reload","postRender","clean","off","plugins","form","currentFile","filesNumber","injector","register","profly"],"mappings":"AAKAA,OAAOC,WAAWC,QAAQC,OAAOC,OAAO,mCAAoC,GAAI,CAI9EC,KAAM,SAAcC,EAAkBC,EAAaC,GACtCC,KAGNC,OAAOJ,EAAkBC,EAAaC,GAHhCC,KAMNE,cAAc,CACjBC,+BAAgCZ,OAAOa,YAAY,2CAA2CC,OAAO,oCAOzGC,cAAe,WACb,IAEIC,EAAoB,CACtBC,UAAW,IAHFR,KAKFD,OAAOU,MALLT,KAKkBD,OAAOU,KAAKC,OAL9BV,KAK4CD,OAAOU,KAAKV,OAAOY,KACxEJ,EAAkBC,UAClBI,UAAU,UAPDZ,KAOkBD,OAAOU,KAAKC,MAAQ,OAPtCV,KAOoDD,OAAOU,KAAKV,OAAOY,GAAK,gBAP5EX,KAOmGD,OAAOU,KAAKV,OAAOc,cAPtHb,KAWFD,OAAOU,MAXLT,KAWkBD,OAAOU,KAAKC,OAX9BV,KAW4CD,OAAOU,KAAKV,OAAOe,SACxEP,EAAkBC,UAClBI,UAAU,UAbDZ,KAakBD,OAAOU,KAAKC,MAAQ,WAbtCV,KAawDD,OAAOU,KAAKV,OAAOe,SAGtF,IAAIC,EAhBOf,KAgBYI,YAAY,gCASnC,OAzBWJ,KAiBNgB,QAAUD,EAAYE,OAAOV,GAElCW,EAnBWlB,KAmBJgB,SAASG,GAAG,QAAQ,SAAUC,IAEG,IAD3BA,EAAMC,cAAcC,cAAcC,SAASC,KAC7CC,QAAQ,iBACfF,SAASG,YAtBF1B,KAyBCgB,SAOdW,WAAY,aAIZC,MAAO,WAELV,EAAE,wBADSlB,KACqBgB,SAASa,MAD9B7B,KAEN8B,QAAU,GAFJ9B,KAGN+B,KAAO,GAHD/B,KAINgC,YAAc,GAJRhC,KAKNiC,YAAc,KAIvB1C,OAAO2C,SAASC,SAAS,mCAAoC,CAAC,mBAAoB,cAAe5C,OAAOC,WAAWC,QAAQ2C","sourcesContent":["/*\r\n *   Name: Bizagi Workportal Desktop Project File Preview\r\n *   Author: David Romero Estrada\r\n */\n\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.profly\", {}, {\n  /*\r\n                                                                                  *   Constructor\r\n                                                                                  */\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    //Load templates\n    self.loadTemplates({\n      \"project-filespreview-wrapper\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.profly\").concat(\"#project-filespreview-wrapper\") });\n\n  },\n\n  /**\r\n     * Renders the template defined in the widget\r\n     */\n  renderContent: function renderContent() {\n    var self = this;\n    // Define parameters to route angular app\n    var argumentsTemplate = {\n      paramsURL: '' };\n\n    if (self.params.data && self.params.data.route && self.params.data.params.id) {\n      argumentsTemplate.paramsURL =\n      encodeURI('?route=' + self.params.data.route + '&id=' + self.params.data.params.id + '&displayName=' + self.params.data.params.displayName);\n\n    }\n\n    if (self.params.data && self.params.data.route && self.params.data.params.module) {\n      argumentsTemplate.paramsURL =\n      encodeURI('?route=' + self.params.data.route + '&module=' + self.params.data.params.module);\n    }\n\n    var generalTmpl = self.getTemplate(\"project-filespreview-wrapper\");\n    self.content = generalTmpl.render(argumentsTemplate);\n\n    $(self.content).on(\"load\", function (event) {\n      var path = event.currentTarget.contentWindow.location.href;\n      if (path.indexOf('quickprocess') === -1) {\n        location.reload(); // QAF-5934\n      }\n    });\n    return self.content;\n  },\n\n\n  /**\r\n     * links events with handlers\r\n     */\n  postRender: function postRender() {\n    var self = this;\n  },\n\n  clean: function clean() {\n    var self = this;\n    $('#iframe-liveprocesses', self.content).off();\n    self.plugins = {};\n    self.form = {};\n    self.currentFile = {};\n    self.filesNumber = 0;\n  } });\n\n\nbizagi.injector.register(\"bizagi.workportal.widgets.profly\", [\"workportalFacade\", \"dataService\", bizagi.workportal.widgets.profly]);"]}