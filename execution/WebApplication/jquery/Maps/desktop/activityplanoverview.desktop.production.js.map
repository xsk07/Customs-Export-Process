{"version":3,"sources":["jquery/workportal/desktop/widget/project.plan.activity.sidebar/bizagi.workportal.desktop.widgets.project.plan.activity.sidebar.js","jquery/workportal/desktop/widget/project.plan.activity.action/bizagi.workportal.desktop.widgets.project.plan.activity.action.js","jquery/workportal/desktop/widget/project.plan.activity.time/bizagi.workportal.desktop.widgets.project.plan.activity.time.js","jquery/workportal/desktop/widget/project.plan.activity.progress/bizagi.workportal.desktop.widgets.project.plan.activity.progress.js","jquery/workportal/desktop/widget/project.plan.activity.subprocesses/bizagi.workportal.desktop.widgets.project.plan.activity.subprocesses.js","jquery/workportal/desktop/widget/project.plan.activity.parent/bizagi.workportal.desktop.widgets.project.plan.activity.parent.js","jquery/workportal/desktop/widget/project.dashboard.menu/bizagi.workportal.desktop.widgets.project.dashboard.menu.js","jquery/workportal/desktop/widget/project.dashboard.menu.activity/bizagi.workportal.desktop.widgets.project.dashboard.menu.activity.js","jquery/workportal/desktop/widget/project.dashboard.menu.activity.plan/bizagi.workportal.desktop.widgets.project.dashboard.menu.activity.plan.js","jquery/workportal/desktop/widget/project.content.dashboard/bizagi.workportal.desktop.widgets.project.content.dashboard.js","jquery/workportal/desktop/widget/project.plan.activities/bizagi.workportal.desktop.project.plan.activities.js","jquery/workportal/desktop/widget/project.plan.sidebar/bizagi.workportal.desktop.widgets.project.plan.sidebar.js","jquery/workportal/desktop/widget/project.plan.action/bizagi.workportal.desktop.widgets.project.plan.action.js","jquery/workportal/desktop/widget/project.plan.state/bizagi.workportal.desktop.widgets.project.plan.state.js","jquery/workportal/desktop/widget/project.plan.progress/bizagi.workportal.desktop.widgets.project.plan.progress.js","jquery/workportal/desktop/widget/project.plan.time/bizagi.workportal.desktop.widgets.project.plan.time.js","jquery/workportal/desktop/widget/project.plan.parent/bizagi.workportal.desktop.widgets.project.plan.parent.js","jquery/workportal/desktop/widget/project.plan.users/bizagi.workportal.desktop.widgets.project.plan.users.js"],"names":["bizagi","workportal","widgets","project","base","extend","init","workportalFacade","dataService","serviceloadDataPlan","params","this","_super","loadTemplates","project-plan-activity-sidebar","getTemplate","concat","renderContent","template","content","render","postRender","sub","$","proxy","onNotifyLoadInfoPlan","event","parans","plan","idActivitySelected","idPlan","id","loadData","getDateServer","subscribe","loadedWithDataActivities","loadedWithDataFirstParent","pub","type","args","clean","unsubscribe","injector","register","activity","sidebar","notifier","dateFormat","localization","getResource","timeFormat","estimatedFinishDateTime","beforeUserAssignedActivity","activity-action-main","activity-action-editionpopup","dialogBox","onNotifyLoadInfoActivityExecution","onNotifyExpandedRightSidebar","self","$content","getContent","empty","currentActivity","activities","filter","toUpperCase","idUserCreator","currentUser","idUser","userAssigned","argsTemplate","currentActivityName","name","showEditAction","tmpl","append","initilizeActionMenu","initializeTempleteAndEvents","plugins","activityEdition","initPluginPopupEdition","formEditActivity","assignee","date","duration","buttonCancel","buttonUpdate","on","onClickPopupButtonCancel","onClickPopupButtonUpdate","onDeleteDate","onTypeDuration","menu","select","onSelectMenu","removeClass","popupEditActivity","formContent","initializeAutoComplete","element","url","serviceLocator","getUrl","autocomplete","minLength","source","request","response","ajax","data","domain","userName","fullName","term","organization","pag","pagSize","orderField","success","map","users","item","label","user","value","ui","val","IdAssignee","focus","change","initializeDatePicker","datepicker","onSelect","getTime","undefined","util","dateFormatter","getDateFormatByDatePickerJqueryUI","initializeSpiner","desactivateDateByDuration","newValue","target","isNumeric","parseInt","spinner","min","max","placeHolder","spin","keyCode","fieldDurationActive","activateElement","form","currentTarget","find","length","onClickOpenPopupEdition","dialog","resizable","draggable","height","width","modal","title","maximize","open","onOpenPopupEdition","close","onClosePopupEdition","activityDate","isEmpty","estimatedFinishDate","isNaN","formatInvariant","Date","getDateFromInvariant","isMinimumDate","setUserAssignedById","removePopupWidgets","callGetDataUsers","then","responseUsers","preventDefault","next","html","remove","validateParamsOfFormEditActivity","idUserAssigned","updateActivity","progress","startDate","allowEdition","description","finishDate","items","when","editActivityPlan","done","refreshAllWidgets","showContextByMenuDashboard","showSucessMessage","onClickFavorite","favoriteOptions","hasClass","idObject","idCase","favoriteType","addFavorite","favoritesData","guidFavorite","idFavorites","addClass","delFavorite","unsub","messageValidationField","replace","toLowerCase","csvIdUsers","defer","Deferred","userIds","getUsersData","always","resolve","promise","action","widget","EXECUTING_ACTIVITY","FINISHED_ACTIVITY","datePickerRegional","plan-time-main","onNotifyLoadInfoActivitySummary","getStateActivity","time","fromDate","getFormattedDate","getFirstDate","dataProgressWidget","getDataByScenarios","unitTime","auxUnitTime","updateWidget","contentTemplate","relativeTime","getRelativeTime","now","minutes","messageDescripionDifference","keywordResource","messageTime","appendTo","$barRemainingDate","widthNumberDays","css","toString","percentBar","currentState","colorBar","getColorByCreatedAndEstimatedDate","toDate","callGetEffectiveDuration","getColorBar","getPercentBar","getKeywordResourceDescriptionBar","getUnitTime","getUTCDate","dateObj","monthNames","getMonth","formatDate","d","getEffectiveDuration","plan-progress-main","plan-progress-popup-edit","onNotifyUpdateItemFromRender","activityToShow","valuePercentBarComplete","canEdit","popupEditProgress","initPluginPopupEditProgress","formEditProgress","sliderProgress","slider","orientation","range","from","to","step","slide","onChangesliderProgress","each","vals","i","el","numericTextBoxPlugin","format","onChangeNumericTextBoxProgress","decimals","buttonChangeProgress","onShowPopupEditProgress","onClickCancel","onSubmitFormChangeProgress","updateProgressUI","listItems","activityWork","hide","show","text","newPercentProgress","templatePopupEditProgress","onOpenPopupPlan","detach","previusValueProgress","prop","project-subprocesses","project-subprocesses-tootip-custom-properties","subprocesses","plan-parent-main","getPlanParent","planParent","parent","idParent","radNumber","nameParent","displayName","idWorkflow","idWorkItem","idTask","onClickGoToParentCase","routingExecute","closest","onDiscussionsMenuStatusChange","ev","updateDiscussionsIcons","hasDiscussionsOrComment","toggle","dashboard","project-dashboard-menu","contextsLeftSidebarCaseDashboard","forEach","context","updateView","showFormOverview","menuDashboard","showFormActivity","showCommentsOptionMenu","showFilesOptionMenu","showTimeLineOptionMenu","isAdhocProcess","isEnableFeature","showPlanOptionMenu","contextPlanOptionMenu","contextFormActivityOptionMenu","siblings","handlerEvents","loadContentById","$item","getLevelNavigator","currentLevelNavigator","nameItemNavigator","newLevelNavigator","refreshLastItemBreadcrumb","histName","level","subMenuHandler","$comments","$files","$timeline","options","actions","BIZAGI_WORKPORTAL_ACTION_ROUTING","idWorkitem","referrer","publish","off","contextualized","paramsGetPlan","callGetPlan","responsePlan","autoSave","document","getPlan","status","reject","project-content-dashboard","setTimeout","window","trigger","serviceOrderActivitiesByTransitions","PENDING_PLAN","EXECUTING_PLAN","CONTEXT_PLANACTIVITIES","CONTEXT_PLANOVERVIEW","CONTEXT_PLANCREATE","fromIndexEnabledSortingActivities","idActivityEditing","_statePlan","userPictures","refresh","plan-activities-main","plan-activities-item","onNotifySummaryProgressPlan","onNotifyUpdatePlan","renderWidgetByStatePlan","refreshActivityRow","collapseSidebars","state","isEnableEventsOnActivitiesByCurrentContext","enableEventsOnActivitiesByCurrentContext","auxCountActivitiesFinished","statePlan","statePendingPlan","stateExecutingPlan","contextPlanActivities","showFormAddActivityByNotFinishedAllActivities","currentUserGuid","userGuid","sortablelist","initializeSortableList","addEventHandlers","setContentWrapper","onClickEditActivity","onClickDeleteActivity","onClickWorkonItActivity","onClickChangeParallel","onExecutePlan","onClosePlan","renderActivities","updateTransitions","getCopyObjectPlan","dueDate","waitForCompletion","parentWorkItem","creationDate","currentContext","kendoSortable","hint","$clone","clone","onChangePosition","disabled","end","e","newIndex","oldIndex","movePositionActivity","$liActivityGoDown","eq","canChangeToParallelActivity","parallel","transitions","getActualTransitions","changeTransitions","responseText","xhr","showErrorMessage","orderActivitiesByTransitions","getActivitiesByTransitions","auxOrderTransitions","getActualTransitionsByActivities","transition","onCreateActivity","guidActivity","paramsDetailActivity","idActivity","getActivity","createPlanActivity","reset","responseActivity","activityNew","numTotalItems","numResolvedItems","push","$activityList","activityParallel","$wrapperArrow","$liActivitySelected","changeActivityProperties","result","idLastParallelActivity","getLastParallelActivityIsRunningOrClose","prev","$target","isEditableFormActivity","workItemState","idActivityToShow","showFormToEditActivity","activityGuid","activityPropertiesToUpdate","iActivity","lengthActivities","$list","$element","arrayActivities","currentUserId","classEnabledActionActivities","isRunning","runningActivity","decodeHtmlEntities","loadAndShowImagesUsers","listActivities","csvguidUsers","a","seen","out","len","j","removeDuplicateItemsFromArray","join","getDataUsers","renderUserProfilesAndImages","iUser","getInitials","picture","attr","usersGuids","array","splice","arrayUnique","onCancelActivityForm","closeSidebar","$contentWrapper","stopPropagation","showConfirmationBox","deleteActivityPlan","putExecutePlan","sendNotification","planChild","_notifyPlanActivities","callUpdatePlan","getCaseByPlan","printf","activitiesAreCompleted","closePlan","callClosePlan","fail","updatePlan","lastIndexParallelInExecution","parallelActivitiesInRunning","_getJElementSelectedActivity","_jElementFromId","_jElementSelected","_","$selectedActivity","activityEdited","services","preferences","getPreference","supportNav","project-plan-sidebar","areTemplatedLoaded","projectDashboard","planTemplateCreate","planPopupEdit","CLOSED_PLAN","CONTEXT_ACTIVITYPLAN","CONTEXT_ACTIVITYPLANOVERVIEW","CONTEXT_ACTIVITYPLANCREATE","showActionsPlan","plan-action-main","stateClosedPlan","currentStatePlan","$contentWidget","onNotifyLoadInfoSummaryPlan","clearAlertsOnFocus","setNamePlan","setStatePlan","namePlan","onClickMenuOpenEdition","onClickMenuDeletePlan","onClickMenuSaveAsTemplate","planSelected","showPopup","showPopupAddTemplatePlan","callDeletePlan","getParamsByBackFromPlan","typeContext","paramsNotify","onSubmitFormPlan","focusout","deletePlan","plan-state-main","renderWidget","calculateProgress","completedActivities","totalActivities","percentProgress","Math","round","planDatesToStamp","closedDate","getClosedDatePlan","getIntervalOnMinutes","minutesToShowTime","messageUnitTimeCalculated","keywordResourceDescriptionDifference","getKeywordDifferenceDates","valueOfTimeCalculated","auxToDate","getSecondDate","auxPercentBar","getWidthBar","auxColorBar","getColorBarByPercent","getLastActivity","JSON","parse","stringify","sort","activityA","activityB","getDifferenceBetweenDates","firstDate","secondDate","difference","minutesNowToDueDate","minutesCreateToNow","minutesDueDateToCreate","minutesCreateToDueDate","minutesStartToNow","minutesDueDateToNow","minutesStartToDueDate","milliseconds","intervalMinutes","differenceStartDateToCurrentDate","totalInterval","valuePercentInterval","ceil","differenceStartDateToClosedDate","percent","processName","process","planName","goToParentCase","msg","usersMap","usersInformation","globalHandlersService","get","usersAssignees","plan-users-main","auxNoRepeatTypesUser","hashTypesUser","assigned","owner","cvsGuidUsers","activitiesUsers","ownerUserGuid","ownerUserId","userType","guid","index","userId","userAssignedGuid","inArray","guidUser","justAssignees","initilizeTooltip","addEventHandlersModal","showCreatorInformation","allUsers","usersAssignee","indexOf","isOwner","isAssignee","usersAdapter","createJsonUserInfo","userCreator","userInfo","username","email","userinformation","obj","$li","console","log","getUsersAssignees","activityRunning","res_user","getUserAssignee","tasks","types","actUser","not","id_userSelected","task","userParam","usertooltip","click","widgetName","BIZAGI_WORKPORTAL_WIDGET_USERS_MODAL","closeVisible","modalParameters","refreshInbox"],"mappings":"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","sourcesContent":["/*\r\n *   Name: Bizagi Workportal Project Activity Sidebar\r\n *   Author: Elkin Fernando Siabato Cruz\r\n */\n\nbizagi.workportal.widgets.project.base.extend(\"bizagi.workportal.widgets.project.plan.activity.sidebar\", {}, {\n\n  /*\r\n                                                                                                                *   Constructor\r\n                                                                                                                */\n  init: function init(workportalFacade, dataService, serviceloadDataPlan, params) {\n    var self = this;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    self.serviceloadDataPlan = serviceloadDataPlan;\n\n    //Load templates\n    self.loadTemplates({\n      \"project-plan-activity-sidebar\": bizagi.getTemplate(\"bizagi.workportal.desktop.project.plan.activity.sidebar\").concat(\"#project-plan-activity-sidebar\") });\n\n  },\n\n  /*\r\n      * Renders the template defined in the widget\r\n      */\n  renderContent: function renderContent() {\n    var self = this;\n\n    var template = self.getTemplate(\"project-plan-activity-sidebar\");\n    self.content = template.render({});\n\n    return self.content;\n  },\n  postRender: function postRender() {\n    var self = this;\n    self.sub(\"LOAD_INFO_PLAN\", $.proxy(self.onNotifyLoadInfoPlan, self));\n  },\n\n  onNotifyLoadInfoPlan: function onNotifyLoadInfoPlan(event, parans) {\n    var self = this;\n    if (self.params.plan.idActivitySelected) {\n\n      var params = { idPlan: self.params.plan.id };\n      self.serviceloadDataPlan.loadData(params, self.getDateServer, self.params);\n      self.serviceloadDataPlan.subscribe(\"loadedWithDataActivities\", $.proxy(self.loadedWithDataActivities, self));\n      self.serviceloadDataPlan.subscribe(\"loadedWithDataFirstParent\", $.proxy(self.loadedWithDataFirstParent, self));\n    }\n  },\n\n  loadedWithDataActivities: function loadedWithDataActivities() {\n    var self = this;\n    self.pub(\"notify\", {\n      type: \"LOADED_ACTIVITIES_PLAN\",\n      args: self.params });\n\n    self.pub(\"notify\", {\n      type: \"LOAD_INFO_SUMMARY_PROGRESS_PLAN\",\n      args: self.params });\n\n    self.pub(\"notify\", {\n      type: \"LOAD_INFO_ACTIVITY_SUMMARY\",\n      args: self.params });\n\n    self.pub(\"notify\", {\n      type: \"LOAD_INFO_ACTIVITIES_PLAN\",\n      args: self.params });\n\n  },\n\n  loadedWithDataFirstParent: function loadedWithDataFirstParent() {\n    var self = this;\n    self.pub(\"notify\", {\n      type: \"LOAD_INFO_SUMMARY_PLAN\",\n      args: self.params });\n\n  },\n\n  clean: function clean() {\n    var self = this;\n    if (self.serviceloadDataPlan) {\n      self.serviceloadDataPlan.unsubscribe(\"loadedWithDataActivities\", $.proxy(self.loadedWithDataActivities, self));\n      self.serviceloadDataPlan.unsubscribe(\"loadedWithDataFirstParent\", $.proxy(self.loadedWithDataFirstParent, self));\n    }\n  } });\n\n\n\nbizagi.injector.register(\"bizagi.workportal.widgets.project.plan.activity.sidebar\", [\"workportalFacade\", \"dataService\", \"bizagi.workportal.services.behaviors.loadDataPlan\", bizagi.workportal.widgets.project.plan.activity.sidebar], true);","/*\r\n *   Name: Bizagi Workportal Desktop Project Plan Activity Action\r\n *   Author: Elkin Fernando Siabato Cruz\r\n */\n\nbizagi.workportal.widgets.project.base.extend(\"bizagi.workportal.widgets.project.plan.activity.action\", {}, {\n\n  /**\r\n                                                                                                               *   Constructor\r\n                                                                                                               */\n  init: function init(workportalFacade, dataService, notifier, params) {\n    var self = this;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    self.dateFormat = bizagi.localization.getResource(\"dateFormat\");\n    self.timeFormat = bizagi.localization.getResource(\"timeFormat\");\n    self.estimatedFinishDateTime; //Save complete date and time, because datepicker dont save time\n\n    self.beforeUserAssignedActivity = \"\";\n    self.notifier = notifier;\n\n\n    //Load templates\n    self.loadTemplates({\n      \"activity-action-main\": bizagi.getTemplate(\"bizagi.workportal.desktop.project.plan.activity.action\").concat(\"#project-plan-activity-action\"),\n      \"activity-action-editionpopup\": bizagi.getTemplate(\"bizagi.workportal.desktop.project.plan.activity.action\").concat(\"#project-plan-activity-action-editionpopup\") });\n\n\n    self.dialogBox = {};\n  },\n\n  /**\r\n      *\r\n      * @returns {*|jQuery|HTMLElement}\r\n      */\n  renderContent: function renderContent() {\n    var self = this;\n    self.content = $(\"<div></div>\");\n    return self.content;\n  },\n\n  /**\r\n      *\r\n      */\n  postRender: function postRender() {\n    var self = this;\n    self.sub(\"LOAD_INFO_ACTIVITY_SUMMARY\", $.proxy(self.onNotifyLoadInfoActivityExecution, self));\n    self.sub(\"EXPANDED_RIGHT_SIDEBAR\", $.proxy(self.onNotifyExpandedRightSidebar, self));\n  },\n\n  /**\r\n      * Notifies when an event is raised\r\n      */\n  onNotifyLoadInfoActivityExecution: function onNotifyLoadInfoActivityExecution(event, params) {\n    var self = this;\n    self.params = $.extend(self.params, params.args);\n\n    var $content = self.getContent().empty();\n\n    var currentActivity = {};\n    if (self.params.plan.idActivitySelected) {\n      currentActivity = self.params.plan.activities.filter(function (activity) {\n        return activity.id.toUpperCase() === self.params.plan.idActivitySelected.toUpperCase();\n      })[0];\n    }\n\n    if (self.params.plan.idUserCreator === bizagi.currentUser.idUser || currentActivity.userAssigned == bizagi.currentUser.idUser) {\n\n      var argsTemplate = {};\n      argsTemplate.currentActivityName = currentActivity.name;\n      argsTemplate.showEditAction = true;\n      if (self.params.plan.idUserCreator !== bizagi.currentUser.idUser) {\n        argsTemplate.showEditAction = false;\n      }\n\n      var tmpl = self.getTemplate(\"activity-action-main\");\n      $content.append(tmpl.render(argsTemplate));\n\n      if (argsTemplate.showEditAction) {\n        self.initilizeActionMenu();\n        self.beforeUserAssignedActivity = currentActivity.userAssigned;\n        self.content.append($content);\n        self.initializeTempleteAndEvents();\n      }\n    }\n  },\n\n  initializeTempleteAndEvents: function initializeTempleteAndEvents() {\n    var self = this;\n    self.plugins = {};\n    self.plugins.activityEdition = self.initPluginPopupEdition();\n\n    self.formEditActivity = {\n      assignee: $(\"#activity-form-assignee\", self.plugins.activityEdition),\n      date: $(\"#activity-form-date\", self.plugins.activityEdition),\n      duration: $(\"#activity-form-duration\", self.plugins.activityEdition),\n      buttonCancel: $(\"#ui-bizagi-wp-project-popupform-action-cancel\", self.plugins.activityEdition),\n      buttonUpdate: $(\"#ui-bizagi-wp-project-popupform-action-update\", self.plugins.activityEdition) };\n\n\n    self.formEditActivity.buttonCancel.on(\"click\", $.proxy(self.onClickPopupButtonCancel, self));\n    self.formEditActivity.buttonUpdate.on(\"click\", $.proxy(self.onClickPopupButtonUpdate, self));\n\n    self.formEditActivity.date.on(\"keydown\", $.proxy(self.onDeleteDate, self));\n    self.formEditActivity.duration.on(\"keyup\", $.proxy(self.onTypeDuration, self));\n  },\n\n  /**\r\n      *\r\n      */\n  onNotifyExpandedRightSidebar: function onNotifyExpandedRightSidebar() {\n    var self = this;\n    self.initilizeActionMenu();\n  },\n\n  /**\r\n      *\r\n      */\n  initilizeActionMenu: function initilizeActionMenu() {\n    var self = this;\n    $(\"#ui-bizagi-wp-project-plan-activity-action .menu\", self.content).menu({\n      select: $.proxy(self.onSelectMenu, self) }).\n    removeClass(\"ui-widget-content\");\n  },\n\n  /**\r\n      *\r\n      * @returns dialogBox.formContent\r\n      */\n  initPluginPopupEdition: function initPluginPopupEdition() {\n    var self = this;\n    var popupEditActivity = self.getTemplate(\"activity-action-editionpopup\");\n    self.dialogBox.formContent = popupEditActivity.render({});\n    return self.dialogBox.formContent;\n\n  },\n\n  /**\r\n      *\r\n      * @param element\r\n      */\n  initializeAutoComplete: function initializeAutoComplete(element) {\n    var self = this;\n    var url = self.dataService.serviceLocator.getUrl(\"admin-getUsersList\");\n\n    element.autocomplete({\n      minLength: 2,\n      source: function source(request, response) {\n        $.ajax({\n          url: url,\n          data: {\n            domain: \"\",\n            userName: \"\",\n            fullName: request.term,\n            organization: \"\",\n            pag: 1,\n            pagSize: 100,\n            orderField: \"fullName\" },\n\n          success: function success(data) {\n            response($.map(data.users, function (item) {\n              return {\n                label: item.user,\n                value: item.idUser };\n\n            }));\n          } });\n\n      },\n      select: function select(event, ui) {\n        var name = ui.item.label;\n        element.val(name);\n        self.formEditActivity.IdAssignee = ui.item.value;\n        return false;\n      },\n      focus: function focus() {\n        return false;\n      },\n      change: function change(event, ui) {\n        if (ui.item === null) {\n          self.formEditActivity.IdAssignee = null;\n          self.formEditActivity.assignee.val(\"\");\n        }\n        return false;\n      } });\n\n\n\n  },\n\n  /**\r\n      *\r\n      * @param element\r\n      */\n  initializeDatePicker: function initializeDatePicker(element) {\n    var self = this;\n    element.datepicker({\n      onSelect: function onSelect() {\n        self.formEditActivity.duration.val(\"\");\n        self.estimatedFinishDateTime = self.formEditActivity.date.datepicker(\"getDate\") ? self.formEditActivity.date.datepicker(\"getDate\").getTime() : undefined;\n      } });\n\n    element.datepicker(\"option\", \"dateFormat\", bizagi.util.dateFormatter.getDateFormatByDatePickerJqueryUI());\n  },\n\n  /**\r\n      *\r\n      * @param element\r\n      */\n  initializeSpiner: function initializeSpiner(element) {\n    var self = this;\n    function desactivateDateByDuration(event, newValue) {\n      var value = newValue || $(event.target).val();\n      if (bizagi.util.isNumeric(value) && parseInt(value, 10) > 0) {\n        self.formEditActivity.date.val(\"\");\n        self.estimatedFinishDateTime = undefined;\n      } else {\n        $(event.target).val(\"\");\n      }\n    }\n\n    element.spinner({\n      min: 1,\n      max: 1000,\n      placeHolder: bizagi.localization.getResource(\"workportal-hours\"),\n      change: function change(event) {\n        desactivateDateByDuration(event);\n      },\n      spin: function spin(event, ui) {\n        desactivateDateByDuration(event, ui.value);\n      } });\n\n  },\n\n  /***\r\n      * Events\r\n      * @param event\r\n      */\n\n  onDeleteDate: function onDeleteDate(event) {\n    var self = this;\n    if (event.keyCode === 8) {\n      $(event.target).val(\"\");\n      self.fieldDurationActive(true);\n    }\n  },\n\n  /**\r\n      *\r\n      * @param event\r\n      */\n  onTypeDuration: function onTypeDuration(event) {\n    var self = this;\n    var $target = $(event.target);\n    if ($target.val() !== \"\") {\n      self.estimatedFinishDateTime = undefined;\n    } else {\n      self.activateElement(self.form.date);\n    }\n  },\n\n  /**\r\n      * When select menu\r\n      * @param event\r\n      * @param ui\r\n      */\n  onSelectMenu: function onSelectMenu(event, ui) {\n    var self = this;\n    if ($(event.currentTarget).find(\"i\").length === 0) {\n      var item = $(ui.item).data(\"item\");\n      switch (item) {\n        case \"edit\":\n          self.onClickOpenPopupEdition();\n          break;}\n\n    }\n  },\n\n  /**\r\n      *\r\n      */\n  onClickOpenPopupEdition: function onClickOpenPopupEdition() {\n    var self = this;\n    self.initializeTempleteAndEvents();\n    self.dialogBox.formContent.dialog({\n      resizable: false,\n      draggable: false,\n      height: \"auto\",\n      width: \"600px\",\n      modal: true,\n      title: bizagi.localization.getResource(\"workportal-project-plan-title-activity-properties\"),\n      maximize: true,\n      open: $.proxy(self.onOpenPopupEdition, self),\n      close: $.proxy(self.onClosePopupEdition, self) });\n\n  },\n\n  /**\r\n     *\r\n     */\n  onOpenPopupEdition: function onOpenPopupEdition() {\n    var self = this;\n    var currentActivity = self.params.plan.activities.filter(function (activity) {\n      return activity.id.toUpperCase() === self.params.plan.idActivitySelected.toUpperCase();\n    })[0];\n\n    var activityDate = currentActivity && !bizagi.util.isEmpty(currentActivity.estimatedFinishDate) ? currentActivity.estimatedFinishDate : \"\";\n    if (!isNaN(activityDate)) {\n      activityDate = bizagi.util.dateFormatter.formatInvariant(new Date(activityDate));\n    }\n    var estimatedFinishDate = activityDate ? bizagi.util.dateFormatter.getDateFromInvariant(activityDate) : \"\";\n    var isMinimumDate = estimatedFinishDate instanceof Date ? estimatedFinishDate.getTime() < self.getDateServer() : false;\n\n    self.initializeAutoComplete(self.formEditActivity.assignee);\n    self.initializeDatePicker(self.formEditActivity.date);\n    self.initializeSpiner(self.formEditActivity.duration);\n\n    if (currentActivity.userAssigned) {\n      self.setUserAssignedById(currentActivity.userAssigned);\n    }\n\n    self.formEditActivity.date.datepicker(\"option\", \"minDate\", new Date(self.getDateServer()));\n\n    if (currentActivity.estimatedFinishDate && isMinimumDate) {\n      self.formEditActivity.date.datepicker(\"option\", \"minDate\", estimatedFinishDate); //set minimum because, if date is past\n    }\n\n    if (currentActivity.estimatedFinishDate) {\n      if (estimatedFinishDate) {\n        self.formEditActivity.date.datepicker(\"setDate\", estimatedFinishDate);\n      }\n      self.estimatedFinishDateTime = currentActivity.estimatedFinishDate;\n    }\n\n    if (currentActivity.duration) {\n      self.formEditActivity.duration.val(parseInt(currentActivity.duration, 10));\n    }\n  },\n\n  /**\r\n      * When close popup edition\r\n      */\n  onClosePopupEdition: function onClosePopupEdition() {\n    var self = this;\n    self.removePopupWidgets();\n  },\n\n  /**\r\n      *\r\n      * @param idUser\r\n      */\n  setUserAssignedById: function setUserAssignedById(idUser) {\n    var self = this;\n    //Show images users\n    self.callGetDataUsers(idUser).then(function (responseUsers) {\n      self.formEditActivity.assignee.val(responseUsers[0].name);\n    });\n    self.formEditActivity.IdAssignee = idUser;\n  },\n\n  /**\r\n      *\r\n      * @param event\r\n      */\n  onClickPopupButtonCancel: function onClickPopupButtonCancel(event) {\n    var self = this;\n    event.preventDefault();\n    self.removePopupWidgets();\n  },\n\n  /**\r\n     * Remove popup widgets\r\n     */\n  removePopupWidgets: function removePopupWidgets() {\n    var self = this;\n    self.formEditActivity.assignee.next().find(\"span\").html(\"\");\n    self.dialogBox.formContent.remove();\n    $(\"#ui-datepicker-div\").remove();\n  },\n\n  /**\r\n      *  Triggered when click update plan activity\r\n      */\n  onClickPopupButtonUpdate: function onClickPopupButtonUpdate() {\n    var self = this;\n    if (self.validateParamsOfFormEditActivity()) {\n      var currentActivity = self.params.plan.activities.filter(function (activity) {\n        return activity.id.toUpperCase() === self.params.plan.idActivitySelected.toUpperCase();\n      })[0];\n      var idUserAssigned = self.formEditActivity.IdAssignee || bizagi.currentUser.idUser;\n      if (self.formEditActivity.duration.val() != \"\") {\n        self.params.plan.activities.filter(function (activity) {\n          return activity.id.toUpperCase() === self.params.plan.idActivitySelected.toUpperCase();\n        })[0].estimatedFinishDate = \"\";\n      }\n      var updateActivity = {\n        progress: currentActivity.progress,\n        id: currentActivity.id,\n        startDate: currentActivity.startDate,\n        duration: self.formEditActivity.duration.val(),\n        userAssigned: idUserAssigned,\n        allowEdition: currentActivity.allowEdition,\n        description: currentActivity.description,\n        name: currentActivity.name,\n        idPlan: currentActivity.idPlan,\n        estimatedFinishDate: self.estimatedFinishDateTime,\n        finishDate: currentActivity.finishDate,\n        items: currentActivity.items };\n\n      $.when(self.dataService.editActivityPlan(updateActivity)).done(function () {\n        currentActivity = $.extend(currentActivity, updateActivity);\n        self.removePopupWidgets();\n\n        if (self.beforeUserAssignedActivity !== self.formEditActivity.IdAssignee) {\n          self.pub(\"notify\", {\n            type: \"ACTIVITYPLANCOMMENTS\",\n            args: $.extend(self.params, { refreshAllWidgets: true }) });\n\n        } else\n        {\n          self.pub(\"notify\", {\n            type: self.params.showContextByMenuDashboard,\n            args: self.params });\n\n        }\n\n        self.removePopupWidgets();\n        self.notifier.showSucessMessage(bizagi.localization.getResource(\"workportal-project-plan-activity-update-message\"));\n      });\n    }\n  },\n\n  /***\r\n      * Events\r\n      */\n  onClickFavorite: function onClickFavorite(event) {\n    event.preventDefault();\n    var self = this;\n    var favoriteOptions = {};\n    if ($(event.target).hasClass(\"bz-icon-star-outline\")) {\n      favoriteOptions = {\n        idObject: self.params.idCase,\n        favoriteType: \"CASES\" };\n\n      $.when(self.dataService.addFavorite(favoriteOptions)).done(function (favoritesData) {\n        self.params.guidFavorite = favoritesData.idFavorites;\n        $(event.target).removeClass(\"bz-icon-star-outline\");\n        $(event.target).addClass(\"bz-icon-star\");\n      });\n    } else\n    {\n      favoriteOptions = {\n        idObject: self.params.guidFavorite,\n        favoriteType: \"CASES\" };\n\n      $.when(self.dataService.delFavorite(favoriteOptions)).done(function () {\n        $(event.target).addClass(\"bz-icon-star-outline\");\n        $(event.target).removeClass(\"bz-icon-star\");\n      });\n    }\n  },\n\n  /**\r\n      * Clean events and plugins\r\n      */\n  clean: function clean() {\n    var self = this;\n    self.unsub(\"LOAD_INFO_ACTIVITY_SUMMARY\", $.proxy(self.onNotifyLoadInfoActivityExecution, self));\n    self.unsub(\"EXPANDED_RIGHT_SIDEBAR\", $.proxy(self.onNotifyExpandedRightSidebar, self));\n  },\n\n  /**\r\n      * Validate form edit plan activity\r\n      * @returns {boolean}\r\n      */\n  validateParamsOfFormEditActivity: function validateParamsOfFormEditActivity() {\n    var self = this;\n    var userAssigned = self.formEditActivity.assignee;\n    if (userAssigned.val() && userAssigned.val() !== \"\" && self.formEditActivity.IdAssignee) {\n      return true;\n    } else {\n      var messageValidationField = bizagi.localization.getResource(\"workportal-general-error-field-required\");\n      messageValidationField = messageValidationField.replace(\"{0}\", bizagi.localization.getResource(\"workportal-project-plan-assignee\").toLowerCase());\n      userAssigned.next().find(\"span\").html(messageValidationField);\n      return false;\n    }\n  },\n\n  /**\r\n      * Call services\r\n      */\n  callGetDataUsers: function callGetDataUsers(csvIdUsers) {\n    var self = this,\n    defer = $.Deferred();\n    var params = {\n      userIds: csvIdUsers,\n      width: 50,\n      height: 50 };\n\n\n    self.dataService.getUsersData(params).always(function (response) {\n      defer.resolve(response);\n    });\n    return defer.promise();\n  } });\n\n\nbizagi.injector.register(\"bizagi.workportal.widgets.project.plan.activity.action\", [\"workportalFacade\", \"dataService\", \"notifier\", bizagi.workportal.widgets.project.plan.activity.action]);","/*\r\n *   Name: Bizagi Workportal Desktop Project Plan Activity Time\r\n *   Author: Elkin Fernando Siabato Cruz\r\n */\n/***\r\n     * TODO IMPORTANT: This widget is development with TDD, test this file when changes\r\n     */\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.project.plan.activity.time\", {}, {\n\n  /*\r\n                                                                                                       *   Constructor\r\n                                                                                                       *\r\n                                                                                                       */\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    //Constants\n    self.EXECUTING_ACTIVITY = \"EXECUTING\";\n    self.FINISHED_ACTIVITY = \"FINISHED\";\n\n    //Regional\n    self.datePickerRegional = bizagi.localization.getResource(\"datePickerRegional\");\n\n    //Load templates\n    self.loadTemplates({\n      \"plan-time-main\": bizagi.getTemplate(\"bizagi.workportal.desktop.project.plan.activity.time\").concat(\"#project-plan-activity-time\") });\n\n  },\n\n  renderContent: function renderContent() {\n    var self = this;\n    self.content = $(\"<div></div>\");\n    return self.content;\n  },\n\n  postRender: function postRender() {\n    var self = this;\n    self.sub(\"LOAD_INFO_ACTIVITY_SUMMARY\", $.proxy(self.onNotifyLoadInfoActivitySummary, self));\n  },\n\n  /**\r\n      * Notifies when an event is raised\r\n      */\n  onNotifyLoadInfoActivitySummary: function onNotifyLoadInfoActivitySummary(event, params) {\n    var self = this;\n    self.params = $.extend(self.params, params.args);\n    self.getContent().empty();\n\n    var currentActivity = self.params.plan.activities.filter(function (activity) {\n      return activity.id === self.params.plan.idActivitySelected;\n    })[0];\n\n    if (currentActivity.startDate) {\n      self.getStateActivity(currentActivity);\n\n      var argsTemplate = {\n        time: {\n          fromDate: self.getFormattedDate(new Date(self.getFirstDate(currentActivity))) } };\n\n\n      var dataProgressWidget = self.getDataByScenarios(currentActivity, true);\n\n      $.when(dataProgressWidget.unitTime).done(function (auxUnitTime) {\n        dataProgressWidget = $.extend(dataProgressWidget, {\n          unitTime: auxUnitTime });\n\n        self.updateWidget($.extend(argsTemplate.time, dataProgressWidget));\n      });\n\n    }\n  },\n  updateWidget: function updateWidget(argsTemplate) {\n    var self = this;\n    var $content = self.getContent().empty();\n    var contentTemplate = self.getTemplate(\"plan-time-main\");\n\n    var relativeTime = bizagi.util.dateFormatter.getRelativeTime(new Date(Date.now() - argsTemplate.unitTime.minutes * 60 * 1000), null, false);\n\n    var messageDescripionDifference = bizagi.localization.getResource(\"workportal-project-activity-state-\" + argsTemplate.keywordResource);\n    argsTemplate.messageTime = messageDescripionDifference.replace(\"%s\", relativeTime);\n\n    contentTemplate.\n    render(argsTemplate).\n    appendTo($content);\n\n    //Begin Adjust status bar next to the number days\n    var $barRemainingDate = $(\".remaining-days .time-remaining\", $content);\n    var widthNumberDays = $(\".remaining-days .days\", $content).width();\n    $barRemainingDate.css(\"padding-left\", (widthNumberDays + 7).toString() + \"px\");\n\n    var $barCompletedDate = $(\".remaining-days .bar-completed\", $content);\n\n    $barCompletedDate.css(\"width\", argsTemplate.percentBar + \"%\");\n    //End Adjust status bar next to the number days\n\n  },\n  getStateActivity: function getStateActivity(activity) {\n    var self = this;\n    if (activity.finishDate) {\n      activity.currentState = self.FINISHED_ACTIVITY;\n      return self.FINISHED_ACTIVITY;\n    } else\n    {\n      activity.currentState = self.EXECUTING_ACTIVITY;\n      return self.EXECUTING_ACTIVITY;\n    }\n  },\n  getFirstDate: function getFirstDate(activity) {\n    var self = this;\n    if (activity.currentState === self.EXECUTING_ACTIVITY) {\n      return activity.startDate;\n    } else {\n      return activity.finishDate;\n    }\n  },\n  getDataByScenarios: function getDataByScenarios(activity) {\n    var self = this;\n    var response = {\n      colorBar: null,\n      percentBar: 100,\n      keywordResource: null,\n      unitTime: null };\n\n    var params = {};\n    switch (activity.currentState) {\n      case self.EXECUTING_ACTIVITY:\n        response.keywordResource = \"opened\";\n        response.colorBar = self.getColorByCreatedAndEstimatedDate(activity);\n\n        params = {\n          idUser: bizagi.currentUser.idUser,\n          fromDate: activity.startDate,\n          toDate: Date.now() };\n\n        response.unitTime = self.callGetEffectiveDuration(params);\n\n        break;\n      case self.FINISHED_ACTIVITY:\n        response.colorBar = \"Gray\";\n        response.keywordResource = \"closed\";\n        params = {\n          idUser: bizagi.currentUser.idUser,\n          fromDate: activity.finishDate,\n          toDate: Date.now() };\n\n        response.unitTime = self.callGetEffectiveDuration(params);\n        break;}\n\n    return response;\n  },\n\n  getColorBar: function getColorBar(activity) {\n    var self = this;\n    return self.getDataByScenarios(activity).colorBar;\n  },\n  getPercentBar: function getPercentBar(activity) {\n    var self = this;\n    return self.getDataByScenarios(activity).percentBar;\n  },\n  getKeywordResourceDescriptionBar: function getKeywordResourceDescriptionBar(activity) {\n    var self = this;\n    return self.getDataByScenarios(activity).keywordResource;\n  },\n  getUnitTime: function getUnitTime(activity) {\n    var self = this;\n    return self.getDataByScenarios(activity).unitTime;\n  },\n\n  getColorByCreatedAndEstimatedDate: function getColorByCreatedAndEstimatedDate(activity) {\n    var self = this;\n    var response = \"Red\";\n    if (activity.estimatedFinishDate) {\n      if (Date.now() < activity.estimatedFinishDate) {\n        var theSameDay = new Date().getUTCDate() === new Date(activity.estimatedFinishDate).getUTCDate();\n        if (theSameDay) {\n          response = \"Yellow\";\n        } else\n        {\n          response = \"Green\";\n        }\n      }\n    }\n    return response;\n  },\n\n  getFormattedDate: function getFormattedDate(dateObj) {\n    var self = this;\n    var monthsNames = self.datePickerRegional.monthNames;\n    var shortMonth = dateObj.getMonth();\n\n    return monthsNames[shortMonth] + \" \" + bizagi.util.dateFormatter.formatDate(dateObj, \"dd hh:mm tt\", bizagi.localization.getResource(\"datePickerRegional\"));\n  },\n\n  /**\r\n      * Call services\r\n      */\n  callGetEffectiveDuration: function callGetEffectiveDuration(params) {\n    var self = this;\n    var d = $.Deferred();\n    $.when(\n    self.dataService.getEffectiveDuration(params)).\n    done(function (data) {\n      d.resolve(data);\n    });\n    return d.promise();\n  } });\n\n\n\nbizagi.injector.register(\"bizagi.workportal.widgets.project.plan.activity.time\", [\"workportalFacade\", \"dataService\", bizagi.workportal.widgets.project.plan.activity.time], true);","/*\r\n *   Name: Bizagi Workportal Desktop Project Plan Activity Progress\r\n *   Author: Elkin Fernando Siabato Cruz\r\n */\n\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.project.plan.activity.progress\", {}, {\n\n  /*\r\n                                                                                                           *   Constructor\r\n                                                                                                           */\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    self.plugins = {};\n    self.dialogBox = {};\n\n    //Load templates\n    self.loadTemplates({\n      \"plan-progress-main\": bizagi.getTemplate(\"bizagi.workportal.desktop.project.plan.activity.progress\").concat(\"#project-plan-activity-progress\"),\n      \"plan-progress-popup-edit\": bizagi.getTemplate(\"bizagi.workportal.desktop.project.plan.activity.progress\").concat(\"#project-plan-activity-edit-progress\") });\n\n  },\n\n  renderContent: function renderContent() {\n    var self = this;\n    self.content = $(\"<div></div>\");\n    return self.content;\n  },\n\n  postRender: function postRender() {\n    var self = this;\n    self.sub(\"LOAD_INFO_ACTIVITY_SUMMARY\", $.proxy(self.onNotifyLoadInfoActivityExecution, self));\n    self.sub(\"UPDATE_ITEMS_FROM_FORMRENDER\", $.proxy(self.onNotifyUpdateItemFromRender, self));\n  },\n\n  /**\r\n      * Notifies when an event is raised\r\n      */\n  onNotifyLoadInfoActivityExecution: function onNotifyLoadInfoActivityExecution(event, params) {\n    var self = this;\n    self.params = $.extend(self.params, params.args);\n    var $content = self.getContent().empty();\n\n    var activityToShow = self.params.plan.activities.filter(function (activity) {\n      return activity.id.toUpperCase() == self.params.plan.idActivitySelected.toUpperCase();\n    })[0];\n\n    var argsTemplate = {};\n    argsTemplate.valuePercentBarComplete = 0;\n    argsTemplate.progress = {\n      progress: activityToShow.progress,\n      canEdit: activityToShow.items.length === 0 };\n\n\n    if (argsTemplate.progress.progress) {\n      argsTemplate.valuePercentBarComplete = argsTemplate.progress.progress;\n    }\n\n    //Update widget\n    var templateMain = self.getTemplate(\"plan-progress-main\");\n    templateMain.render(argsTemplate).appendTo($content);\n\n    self.plugins.popupEditProgress = self.initPluginPopupEditProgress();\n\n    var popupEditProgress = self.plugins.popupEditProgress;\n\n    self.formEditProgress = {\n      sliderProgress: $(\"#sliderProgress\", popupEditProgress).slider({\n        orientation: \"horizontal\",\n        range: \"min\",\n        max: 100,\n        width: 100,\n        from: 5,\n        to: 50,\n        step: 1,\n        value: argsTemplate.valuePercentBarComplete,\n        slide: $.proxy(self.onChangesliderProgress, self),\n        change: $.proxy(self.onChangesliderProgress, self) }).\n      each(function () {\n        var vals = $(this).slider(\"option\", \"max\") - $(this).slider(\"option\", \"min\");\n        for (var i = 0; i <= vals; i += 10) {\n          var el = $(\"<label class='step'>\" + i + \"</label>\").css(\"left\", i / vals * 100 + \"%\");\n          $(this).append(el);\n        }\n      }),\n      numericTextBoxPlugin: $(\"#inputProgressNumericTextBox\", popupEditProgress).spinner({\n        format: \"n0\",\n        min: 0,\n        max: 100,\n        spin: $.proxy(self.onChangeNumericTextBoxProgress, self),\n        change: $.proxy(self.onChangeNumericTextBoxProgress, self),\n        value: argsTemplate.valuePercentBarComplete,\n        decimals: 0 }),\n\n      buttonChangeProgress: $(\"#button-accept-change-progress\", popupEditProgress),\n      buttonCancel: $(\"#button-cancel-change-progress\", popupEditProgress) };\n\n\n    //Handlers\n    $(\".action-open-popup-edit-progress\", $content).on(\"click\", $.proxy(self.onShowPopupEditProgress, self));\n\n    self.formEditProgress.buttonCancel.on(\"click\", $.proxy(self.onClickCancel, self));\n    self.formEditProgress.buttonChangeProgress.on(\"click\", $.proxy(self.onSubmitFormChangeProgress, self));\n\n    self.updateProgressUI(argsTemplate.valuePercentBarComplete);\n    self.formEditProgress.numericTextBoxPlugin.spinner(\"value\", argsTemplate.valuePercentBarComplete);\n\n  },\n\n  onNotifyUpdateItemFromRender: function onNotifyUpdateItemFromRender(event, params) {\n    var self = this;\n    var listItems = params.args.items;\n    var activityWork = params.args.activityWork;\n\n    var progress;\n    if (listItems.length > 0) {\n      //Hide edit progress\n      $(\".action-open-popup-edit-progress\", self.content).hide();\n    } else {\n      $(\".action-open-popup-edit-progress\", self.content).show();\n    }\n    //set new progress\n    $(\".bz-wp-timestamp span\", self.content).text(activityWork);\n    $(\".bz-wp-progress-bar\", self.content).css(\"width\", activityWork + \"%\");\n\n  },\n\n  updateProgressUI: function updateProgressUI(newPercentProgress) {\n    var self = this,\n    $content = self.getContent();\n\n    $(\".bz-wp-timestamp span\", $content).text(newPercentProgress);\n\n    //Begin Adjust status bar next to the number days\n    var $barRemainingDate = $(\".remaining-days .time-remaining\", $content);\n    var widthNumberDays = $(\".remaining-days .days\", $content).width();\n    $barRemainingDate.css(\"padding-left\", (widthNumberDays + 7).toString() + \"px\");\n\n    var $barCompletedDate = $(\".remaining-days .bar-completed\", $content);\n\n    $barCompletedDate.css(\"width\", newPercentProgress.toString() + \"%\");\n    //End Adjust status bar next to the number days\n  },\n\n  initPluginPopupEditProgress: function initPluginPopupEditProgress() {\n    var self = this;\n    var templatePopupEditProgress = self.getTemplate(\"plan-progress-popup-edit\");\n    self.dialogBox.formContent = templatePopupEditProgress.render();\n    return self.dialogBox.formContent;\n\n  },\n  /*\r\n      * UI\r\n      */\n\n  onShowPopupEditProgress: function onShowPopupEditProgress() {\n    var self = this;\n\n    self.dialogBox.formContent.dialog({\n      resizable: false,\n      draggable: false,\n      height: \"auto\",\n      width: \"600px\",\n      modal: true,\n      title: bizagi.localization.getResource(\"workportal-project-plan-progress-title\"),\n      maximize: true,\n      open: $.proxy(self.onOpenPopupPlan, self),\n      close: function close() {\n        self.dialogBox.formContent.dialog(\"destroy\");\n        self.dialogBox.formContent.detach();\n      } });\n\n\n    self.previusValueProgress = self.formEditProgress.sliderProgress.slider(\"value\");\n\n  },\n\n  onChangeNumericTextBoxProgress: function onChangeNumericTextBoxProgress(event) {\n    var self = this;\n    var newValue = self.formEditProgress.numericTextBoxPlugin.spinner(\"value\");\n    self.formEditProgress.sliderProgress.slider(\"value\", newValue);\n  },\n\n  onChangesliderProgress: function onChangesliderProgress(event) {\n    var self = this;\n    var newValue = self.formEditProgress.sliderProgress.slider(\"value\");\n    self.formEditProgress.numericTextBoxPlugin.spinner(\"value\", newValue);\n  },\n\n  onClickCancel: function onClickCancel(event) {\n    event.preventDefault();\n    var self = this;\n\n    self.dialogBox.formContent.dialog(\"destroy\");\n    self.dialogBox.formContent.detach();\n    //return before value progress\n    self.formEditProgress.sliderProgress.slider(\"value\", self.previusValueProgress);\n    self.formEditProgress.numericTextBoxPlugin.spinner(\"value\", self.previusValueProgress);\n  },\n\n  onSubmitFormChangeProgress: function onSubmitFormChangeProgress(event) {\n    event.preventDefault();\n    var self = this;\n\n    self.formEditProgress.buttonChangeProgress.prop(\"disabled\", true);\n\n    var activityToShow = self.params.plan.activities.filter(function (activity) {\n      return activity.id == self.params.plan.idActivitySelected;\n    })[0];\n    var params = $.extend(activityToShow, {\n      progress: self.formEditProgress.numericTextBoxPlugin.spinner(\"value\"),\n      idPlan: self.params.plan.id });\n\n    $.when(self.dataService.editActivityPlan(params)).done(function () {\n      self.formEditProgress.buttonChangeProgress.prop(\"disabled\", false);\n      activityToShow.progress = self.formEditProgress.numericTextBoxPlugin.spinner(\"value\");\n      self.updateProgressUI(activityToShow.progress);\n      self.dialogBox.formContent.dialog(\"destroy\");\n      self.dialogBox.formContent.detach();\n    });\n  } });\n\n\n\nbizagi.injector.register(\"bizagi.workportal.widgets.project.plan.activity.progress\", [\"workportalFacade\", \"dataService\", bizagi.workportal.widgets.project.plan.activity.progress], true);","/*\r\n *   Name: Bizagi Workportal Desktop Project Plan Activity Subprocesses Controller\r\n *   Author: Elkin Fernando Siabato Cruz\r\n */\n\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.project.plan.activity.subprocesses\", {}, {\n  /*\r\n                                                                                                               *   Constructor\r\n                                                                                                               */\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    //Load templates\n    self.loadTemplates({\n      \"project-subprocesses\": bizagi.getTemplate(\"bizagi.workportal.desktop.project.plan.activity.subprocesses\").concat(\"#project-plan-activity-plan-subprocesses-wrapper\"),\n      \"project-subprocesses-tootip-custom-properties\": bizagi.getTemplate(\"bizagi.workportal.desktop.project.plan.activity.subprocesses\").concat(\"#project-activity-plan-subprocesses-tooltip-custom-properties-wrapper\") });\n\n  },\n\n  /*\r\n      * Renders the template defined in the widget\r\n      */\n  renderContent: function renderContent() {\n    var self = this;\n    self.content = $(\"<div></div>\");\n    return self.content;\n  },\n\n  /*\r\n      * links events with handlers\r\n      */\n  postRender: function postRender() {\n    var self = this;\n  } });\n\n\n\nbizagi.injector.register(\"bizagi.workportal.widgets.project.plan.activity.subprocesses\", [\"workportalFacade\", \"dataService\", bizagi.workportal.widgets.project.plan.activity.subprocesses]);","/*\r\n *   Name: Bizagi Workportal Desktop Project Plan Activity Parent\r\n *   Author: Elkin Fernando Siabato Cruz\r\n */\n\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.project.plan.activity.parent\", {}, {\n\n  /*\r\n                                                                                                         *   Constructor\r\n                                                                                                         */\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    //Load templates\n    self.loadTemplates({\n      \"plan-parent-main\": bizagi.getTemplate(\"bizagi.workportal.desktop.project.plan.activity.parent\").concat(\"#project-plan-activity-parent\") });\n\n  },\n\n  renderContent: function renderContent() {\n    var self = this;\n    self.content = $(\"<div></div>\");\n    return self.content;\n  },\n\n  postRender: function postRender() {\n    var self = this;\n    self.sub(\"LOAD_INFO_ACTIVITY_SUMMARY\", $.proxy(self.onNotifyLoadInfoActivityExecution, self));\n  },\n\n  /**\r\n      * Notifies when an event is raised\r\n      */\n\n  onNotifyLoadInfoActivityExecution: function onNotifyLoadInfoActivityExecution(event, params) {\n    var self = this;\n    self.params = $.extend(self.params, params.args);\n    var $content = self.getContent().empty();\n\n    $.when(self.dataService.getPlanParent({ idPlan: self.params.plan.id })).done(function (planParent) {\n      self.params.plan.parent = planParent;\n      if (self.params.plan.parent) {\n        var argsTemplate = {};\n        argsTemplate.parent = {\n          idParent: self.params.plan.parent.radNumber,\n          nameParent: self.params.plan.parent.displayName,\n          idCase: self.params.plan.parent.idCase,\n          idWorkflow: self.params.plan.parent.idWorkflow,\n          idWorkItem: self.params.plan.parent.idWorkItem,\n          idTask: self.params.plan.parent.idTask };\n\n\n        //Update widget\n        var contentTemplate = self.getTemplate(\"plan-parent-main\");\n        contentTemplate.\n        render(argsTemplate).\n        appendTo($content);\n\n        $(\"#go-to-parent-case\", $content).on(\"click\", $.proxy(self.onClickGoToParentCase, self));\n      }\n    });\n\n\n  },\n\n  onClickGoToParentCase: function onClickGoToParentCase(event) {\n    event.preventDefault();\n    var self = this;\n    self.routingExecute($(event.target).closest(\"#go-to-parent-case\"));\n  } });\n\n\nbizagi.injector.register(\"bizagi.workportal.widgets.project.plan.activity.parent\", [\"workportalFacade\", \"dataService\", bizagi.workportal.widgets.project.plan.activity.parent], true);","/**\r\n * Name: BizAgi Desktop Widget Dashboard menu (left sidebar) * \r\n * @author Valeria Vanegas\r\n */\n\n\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.project.dashboard.menu\", {}, {\n\n  /**\r\n                                                                                                   * Handler when discussions menu status change\r\n                                                                                                   * @param {*} ev \r\n                                                                                                   * @param {*} params \r\n                                                                                                   */\n  onDiscussionsMenuStatusChange: function onDiscussionsMenuStatusChange(ev, params) {\n    var self = this;\n    self.updateDiscussionsIcons(params.hasDiscussionsOrComment);\n  },\n\n  /**\r\n      * Update discussions icon on sidebar menu\r\n      * The icon is different when there is other discussion or there are comments\r\n      * @param {*} hasDiscussionsOrComment \r\n      */\n  updateDiscussionsIcons: function updateDiscussionsIcons(hasDiscussionsOrComment) {\n    var self = this;\n\n    self.sub(\"UPDATE_DISCUSSIONS_MENU_STATUS\", $.proxy(self.onDiscussionsMenuStatusChange, self));\n\n    $(\".bz-icon-discussion-comment\").toggle(hasDiscussionsOrComment);\n    $(\".bz-icon-discussion-no-comment\").toggle(!hasDiscussionsOrComment);\n    self.params.hasDiscussionsOrComment = hasDiscussionsOrComment;\n  },\n\n  /**\r\n      * Detach events\r\n      */\n  clean: function clean() {\n    var self = this;\n    self.unsub(\"UPDATE_DISCUSSIONS_MENU_STATUS\", $.proxy(self.onDiscussionsMenuStatusChange, self));\n  } });\n\n\nbizagi.injector.register(\"bizagi.workportal.widgets.project.dashboard.menu\", [\"workportalFacade\", \"dataService\", bizagi.workportal.widgets.project.dashboard.menu], true);","/*\r\n *   Name: Bizagi Workportal project Dashboard Menu Activity\r\n *   Author: Elkin Fernando Siabato Cruz\r\n */\n\nbizagi.workportal.widgets.project.dashboard.menu.extend(\"bizagi.workportal.widgets.project.dashboard.menu.activity\", {}, {\n\n  /**\r\n                                                                                                                            *   Constructor\r\n                                                                                                                            */\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n    self.params = params || {};\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    //Load templates\n    self.loadTemplates({\n      \"project-dashboard-menu\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.project.dashboard.menu.activity\").concat(\"#project-dashboard-menu1\") });\n\n  },\n\n  /**\r\n      * Renders the template defined in the widget\r\n      */\n  renderContent: function renderContent() {\n    var self = this;\n    self.content = $(\"<div></div>\");\n    return self.content;\n  },\n\n  /**\r\n      * links events with handlers\r\n      */\n  postRender: function postRender() {\n    var self = this;\n    self._super();\n    //Handlers\n    self.params.contextsLeftSidebarCaseDashboard.forEach(function (context) {\n      self.sub(context, $.proxy(self.updateView, self));\n    });\n  },\n\n  /**\r\n      * Update view\r\n      * @param event\r\n      * @param params\r\n      */\n  updateView: function updateView(event, params) {\n    var self = this;\n    self.params = $.extend(self.params, params.args);\n    self.params.plan.idActivitySelected = undefined;\n    self.clean();\n    var $content = self.getContent().empty();\n\n    if (typeof event.type !== \"undefined\") {\n      self.params.showContextByMenuDashboard = event.type;\n    }\n\n    var argsTemplate = {\n      showFormOverview: self.params.menuDashboard.showFormOverview,\n      showFormActivity: self.params.menuDashboard.showFormActivity,\n      showCommentsOptionMenu: self.params.menuDashboard.showCommentsOptionMenu,\n      showFilesOptionMenu: self.params.menuDashboard.showFilesOptionMenu,\n      showTimeLineOptionMenu: self.params.menuDashboard.showTimeLineOptionMenu && (\n      !self.params.isAdhocProcess ||\n      self.params.isAdhocProcess && bizagi.util.isEnableFeature(\"enableTimelineOnLiveProcesses\")),\n      showPlanOptionMenu: self.params.menuDashboard.showPlanOptionMenu,\n      contextPlanOptionMenu: self.params.menuDashboard.contextPlanOptionMenu,\n      contextFormActivityOptionMenu: self.params.menuDashboard.contextFormActivityOptionMenu };\n\n\n    //Update widget\n    var template = self.getTemplate(\"project-dashboard-menu\");\n    template.render(argsTemplate).appendTo($content);\n\n\n    if (self.params.showContextByMenuDashboard) {\n      $(\"li[data-context='\" + self.params.showContextByMenuDashboard.toUpperCase() + \"']\", self.content).addClass(\"active\").siblings().removeClass(\"active\");\n    }\n\n    self.updateDiscussionsIcons(self.params.hasDiscussionsOrComment);\n    self.handlerEvents();\n  },\n\n  /**\r\n      *   Load Content By Id\r\n      */\n  loadContentById: function loadContentById(event) {\n    var self = this;\n    event.preventDefault();\n    var $item = $(event.target).closest(\"li\");\n\n    if (!$item.hasClass(\"active\")) {\n\n      var showContextByMenuDashboard = $item.data(\"context\");\n\n      if (showContextByMenuDashboard) {\n        var getLevelNavigator = self.pub(\"notify\", { type: \"NAVIGATOR_GETLEVEL\" });\n        var currentLevelNavigator = parseInt(getLevelNavigator[0], 10);\n        var nameItemNavigator = \"\";\n        var newLevelNavigator = currentLevelNavigator;\n\n        if (showContextByMenuDashboard == \"PLANACTIVITIES\") {\n          newLevelNavigator = currentLevelNavigator + 1;\n          nameItemNavigator = bizagi.localization.getResource(\"workportal-project-casedashboard-plan\");\n        }\n\n        self.params.refreshLastItemBreadcrumb = false;\n        self.pub(\"notify\", {\n          type: showContextByMenuDashboard.toUpperCase(),\n          args: $.extend(self.params, { showContextByMenuDashboard: showContextByMenuDashboard,\n            histName: nameItemNavigator,\n            level: newLevelNavigator }) });\n\n        $(\"li[data-context='\" + self.params.showContextByMenuDashboard.toUpperCase() + \"']\", self.content).addClass(\"active\").siblings().removeClass(\"active\");\n      }\n    }\n  },\n\n  subMenuHandler: function subMenuHandler() {\n    var self = this;\n    var content = self.getContent();\n    var $comments = $(\"[data-context='COMMENTS']\", content);\n    var $files = $(\"[data-context='FILES']\", content);\n    var $timeline = $(\"[data-context='TIMELINE']\", content);\n\n    $(\".ui-bizagi-wp-project-tab-submenu a\", content).on(\"click\", function () {\n      $comments.toggle();\n      $files.toggle();\n      $timeline.toggle();\n    });\n  },\n\n  /**\r\n      * Handler events\r\n      */\n  handlerEvents: function handlerEvents() {\n    var self = this;\n    var content = self.getContent();\n\n    self.subMenuHandler();\n\n    $(\".ui-bizagi-wp-project-tab-links a\", content).on(\"click\", $.proxy(self.loadContentById, self));\n\n    // Bind for click event on refresh botton\n    $(\".ui-bizagi-wp-project-tab-links li .ui-bizagi-refresh-form\", content).on(\"click\", function () {\n      var options = {\n        action: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,\n        idCase: self.params.idCase,\n        idTask: self.params.idTask,\n        idWorkflow: self.params.idWorkflow,\n        idWorkItem: self.params.idWorkitem,\n        referrer: self.params.referrer || \"inboxGrid\" };\n\n      self.publish(\"executeAction\", options);\n    });\n  },\n\n  /**\r\n      * Clean widgets and events\r\n      */\n  clean: function clean() {\n    var self = this;\n    var content = self.getContent();\n\n    self._super();\n\n    if (self.params && self.params.contextsLeftSidebarCaseDashboard) {\n      self.params.contextsLeftSidebarCaseDashboard.forEach(function (context) {\n        self.unsub(context, $.proxy(self.updateView, self));\n      });\n    }\n\n    $(\".ui-bizagi-wp-project-tab-links a\", content).off();\n    $(\".ui-bizagi-wp-project-tab-links li .ui-bizagi-refresh-form\", content).off();\n  } });\n\n\nbizagi.injector.register(\"bizagi.workportal.widgets.project.dashboard.menu.activity\", [\"workportalFacade\", \"dataService\", bizagi.workportal.widgets.project.dashboard.menu.activity], true);","/*\r\n *   Name: Bizagi Workportal project Dashboard Menu Activity Plan\r\n *   Author: Elkin Fernando Siabato Cruz\r\n */\n\nbizagi.workportal.widgets.project.dashboard.menu.extend(\"bizagi.workportal.widgets.project.dashboard.menu.activity.plan\", {}, {\n\n  /**\r\n                                                                                                                                 *   Constructor\r\n                                                                                                                                 */\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n    self.params = params || {};\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    //Load templates\n    self.loadTemplates({\n      \"project-dashboard-menu\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.project.dashboard.menu.activity.plan\").concat(\"#project-dashboard-menu2\") });\n\n  },\n\n  /**\r\n      * Renders the template defined in the widget\r\n      */\n  renderContent: function renderContent() {\n    var self = this;\n    self.content = $(\"<div></div>\");\n    return self.content;\n  },\n\n  /**\r\n      * links events with handlers\r\n      */\n  postRender: function postRender() {\n    var self = this;\n    self._super();\n    //Handlers\n    self.params.contextsLeftSidebarCaseDashboard.forEach(function (context) {\n      self.sub(context, $.proxy(self.updateView, self));\n    });\n  },\n\n  /**\r\n      * Update view\r\n      * @param event\r\n      * @param params\r\n      */\n  updateView: function updateView(event, params) {\n    var self = this;\n    self.params = $.extend(self.params, params.args);\n    self.clean();\n    var $content = self.getContent().empty();\n\n    var argsTemplate = {\n      showFormOverview: self.params.menuDashboard.showFormOverview,\n      showFormActivity: self.params.menuDashboard.showFormActivity,\n      showCommentsOptionMenu: self.params.menuDashboard.showCommentsOptionMenu,\n      showFilesOptionMenu: self.params.menuDashboard.showFilesOptionMenu,\n      showTimeLineOptionMenu: self.params.menuDashboard.showTimeLineOptionMenu,\n      showPlanOptionMenu: self.params.menuDashboard.showPlanOptionMenu,\n      contextPlanOptionMenu: self.params.menuDashboard.contextPlanOptionMenu,\n      contextFormActivityOptionMenu: self.params.menuDashboard.contextFormActivityOptionMenu,\n      contextualized: self.params.plan.contextualized };\n\n\n    //Update widget\n    var template = self.getTemplate(\"project-dashboard-menu\");\n    template.render(argsTemplate).appendTo($content);\n\n    if (self.params.showContextByMenuDashboard) {\n      $(\"li[data-context='\" + event.type.toUpperCase() + \"']\", self.content).addClass(\"active\").siblings().removeClass(\"active\");\n    }\n\n    self.updateDiscussionsIcons(self.params.hasDiscussionsOrComment);\n    self.handlerEvents();\n\n    var paramsGetPlan = { idPlan: self.params.plan.id };\n    $.when(self.callGetPlan(paramsGetPlan)).then(function (responsePlan) {\n      $.extend(self.params.plan, responsePlan);\n      self.pub(\"notify\", {\n        type: \"LOAD_INFO_PLAN\",\n        args: self.params });\n\n    });\n  },\n\n  /**\r\n      *   Load Content By Id\r\n      */\n  loadContentById: function loadContentById(event) {\n    var self = this;\n    event.preventDefault();\n    var $item = $(event.target).closest(\"li\");\n\n    if (!$item.hasClass(\"active\")) {\n      $.when(bizagi.util.autoSave()).done(function () {\n        $(document).data('auto-save', '');\n\n        var showContextByMenuDashboard = $item.data(\"context\");\n        if (showContextByMenuDashboard) {\n          var getLevelNavigator = self.pub(\"notify\", { type: \"NAVIGATOR_GETLEVEL\" });\n          var currentLevelNavigator = parseInt(getLevelNavigator[0]);\n          var nameItemNavigator = \"\";\n          var newLevelNavigator = currentLevelNavigator;\n\n          self.params.refreshLastItemBreadcrumb = false;\n          self.pub(\"notify\", {\n            type: showContextByMenuDashboard.toUpperCase(),\n            args: $.extend(self.params, { showContextByMenuDashboard: showContextByMenuDashboard,\n              histName: nameItemNavigator,\n              level: newLevelNavigator }) });\n\n          $(\"li[data-context='\" + self.params.showContextByMenuDashboard.toUpperCase() + \"']\", self.content).addClass(\"active\").siblings().removeClass(\"active\");\n        }\n      });\n    }\n  },\n\n  /**\r\n      * Call services\r\n      */\n\n  callGetPlan: function callGetPlan(params) {\n    var self = this;\n    var defer = $.Deferred();\n    self.dataService.getPlan(params).always(function (response) {\n      if (response.status === 200 || response.status === 201 || response.status === undefined) {\n        defer.resolve(response);\n      } else\n      {\n        defer.reject();\n      }\n    });\n\n    return defer.promise();\n  },\n\n  subMenuHandler: function subMenuHandler() {\n    var self = this;\n    var content = self.getContent();\n    var $comments = $(\"[data-context='ACTIVITYPLANCOMMENTS']\", content);\n    var $files = $(\"[data-context='ACTIVITYPLANFILES']\", content);\n    var $timeline = $(\"[data-context='ACTIVITYPLANTIMELINE']\", content);\n\n    $(\".ui-bizagi-wp-project-tab-submenu a\", content).on(\"click\", function () {\n      $comments.toggle();\n      $files.toggle();\n      $timeline.toggle();\n    });\n  },\n\n  /**\r\n      * Handler events\r\n      */\n  handlerEvents: function handlerEvents() {\n    var self = this;\n    var content = self.getContent();\n    self.subMenuHandler();\n    $(\".ui-bizagi-wp-project-tab-links a\", content).on(\"click\", $.proxy(self.loadContentById, self));\n  },\n\n  /**\r\n      * Clean widgets and events\r\n      */\n  clean: function clean() {\n    var self = this;\n    var content = self.getContent();\n\n    self._super();\n\n    if (self.params && self.params.contextsLeftSidebarCaseDashboard) {\n      self.params.contextsLeftSidebarCaseDashboard.forEach(function (context) {\n        self.unsub(context, $.proxy(self.updateView, self));\n      });\n    }\n\n    $(\".ui-bizagi-wp-project-tab-links a\", content).off();\n  } });\n\n\n\nbizagi.injector.register(\"bizagi.workportal.widgets.project.dashboard.menu.activity.plan\", [\"workportalFacade\", \"dataService\", bizagi.workportal.widgets.project.dashboard.menu.activity.plan], true);","/*\r\n *   Name: Bizagi Workportal Project Content Dashboard\r\n *   Author: Elkin Fernando Siabato Cruz\r\n */\n\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.project.content.dashboard\", {}, {\n\n  /*\r\n                                                                                                      *   Constructor\r\n                                                                                                      */\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    //Load templates\n    self.loadTemplates({\n      \"project-content-dashboard\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.project.content.dashboard\").concat(\"#project-plan-content-dashboard\") });\n\n\n  },\n\n  /*\r\n      * Renders the template defined in the widget\r\n      */\n  renderContent: function renderContent() {\n    var self = this;\n\n    var template = self.getTemplate(\"project-content-dashboard\");\n    self.content = template.render({});\n\n    return self.content;\n  },\n  postRender: function postRender() {\n    var self = this;\n\n    setTimeout(function () {\n      $(window).trigger(\"resize\"); //Simulate resize for fix when load first time.\n    }, 1000);\n\n  } });\n\n\n\nbizagi.injector.register(\"bizagi.workportal.widgets.project.content.dashboard\", [\"workportalFacade\", \"dataService\", bizagi.workportal.widgets.project.content.dashboard], true);","/*\r\n*   Name: Bizagi Workportal Desktop Project Plan Activities\r\n*   Author: David Romero Estrada\r\n*/\n\nbizagi.workportal.widgets.project.base.extend(\"bizagi.workportal.widgets.project.plan.activities\", {}, {\n\n  /*\r\n                                                                                                         *   Constructor\r\n                                                                                                         */\n  init: function init(workportalFacade, dataService, notifier, serviceOrderActivitiesByTransitions, params) {\n    var self = this;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    self.serviceOrderActivitiesByTransitions = serviceOrderActivitiesByTransitions;\n\n    // Modes widget: designed plan or execution plan\n    self.PENDING_PLAN = \"PENDING_PLAN\";\n    self.EXECUTING_PLAN = \"EXECUTING_PLAN\";\n    self.CONTEXT_PLANACTIVITIES = \"PLANACTIVITIES\";\n    self.CONTEXT_PLANOVERVIEW = \"PLANOVERVIEW\";\n    self.CONTEXT_PLANCREATE = \"PLANCREATE\";\n\n    self.plugins = {};\n    self.fromIndexEnabledSortingActivities = 0;\n    self.idActivityEditing = \"\";\n    self.plugins.notifier = notifier;\n\n    //private fields\n    self._statePlan = self.PENDING_PLAN;\n\n    self.userPictures = [];\n    self.refresh = params.refreshAllWidgets;\n\n    // Load templates\n    self.loadTemplates({\n      \"plan-activities-main\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.project.plan.activities\").concat(\"#project-plan-activities\"),\n      \"plan-activities-item\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.project.plan.activities\").concat(\"#project-plan-activities-item\") });\n\n  },\n\n  renderContent: function renderContent() {\n    var self = this;\n    self.content = $(\"<div></div>\");\n    return self.content;\n  },\n\n  postRender: function postRender() {\n    var self = this;\n    self.sub(\"LOAD_INFO_SUMMARY_PROGRESS_PLAN\", $.proxy(self.onNotifySummaryProgressPlan, self));\n    self.sub(\"UPDATE_INFO_PLAN\", $.proxy(self.onNotifyUpdatePlan, self));\n    self.sub(\"UPDATE_LIST_ACTIVITIES\", $.proxy(self.renderWidgetByStatePlan, self));\n    self.sub(\"UPDATE_ACTIVITY_INFO\", $.proxy(self.refreshActivityRow, self));\n    if (!self.refresh) {\n      self.collapseSidebars();\n    }\n  },\n\n  onNotifySummaryProgressPlan: function onNotifySummaryProgressPlan(event, params) {\n    var self = this;\n    self.params = $.extend(self.params, params.args);\n\n    var state = self.params.plan.currentState;\n    self._statePlan = state + \"_PLAN\";\n\n    self.renderWidgetByStatePlan(event.type);\n\n  },\n\n  renderWidgetByStatePlan: function renderWidgetByStatePlan(event) {\n    var self = this;\n    self.idActivityEditing = \"\";\n    var $content = self.getContent().empty();\n\n    var isEnableEventsOnActivitiesByCurrentContext = self.enableEventsOnActivitiesByCurrentContext(self.params.showContextByMenuDashboard);\n\n    var auxCountActivitiesFinished = self.params.plan.activities.filter(function (activity) {\n      return activity.finishDate;\n    }).length;\n\n    var argsTemplate = {\n      showContextByMenuDashboard: self.params.showContextByMenuDashboard,\n      statePlan: self._statePlan,\n      statePendingPlan: self.PENDING_PLAN,\n      stateExecutingPlan: self.EXECUTING_PLAN,\n      contextPlanActivities: self.CONTEXT_PLANACTIVITIES,\n      plan: self.params.plan,\n      showFormAddActivityByNotFinishedAllActivities: auxCountActivitiesFinished !== self.params.plan.activities.length,\n      currentUserGuid: bizagi.currentUser.userGuid };\n\n\n    var contentTemplate = self.getTemplate(\"plan-activities-main\");\n    contentTemplate.\n    render($.extend(self.params, argsTemplate)).\n    appendTo($content);\n\n    if ((self._statePlan === self.PENDING_PLAN || self._statePlan === self.EXECUTING_PLAN) && isEnableEventsOnActivitiesByCurrentContext) {\n      self.plugins.sortablelist = self.initializeSortableList();\n      self.addEventHandlers();\n    }\n\n    self.setContentWrapper($content);\n\n    $(\".project-plan-activity-list\", $content).on(\"click\", \"li\", $.proxy(self.onClickEditActivity, self));\n\n    $(\".project-plan-activity-list\", $content).on(\"click\", \"li .activity-view\", $.proxy(self.onClickEditActivity, self));\n\n    $(\".project-plan-activity-list\", $content).on(\"click\", \"li .bz-icon-trash-outline\", $.proxy(self.onClickDeleteActivity, self));\n\n    $(\".project-plan-activity-list\", $content).on(\"click\", \"li .item-workonit-button\", $.proxy(self.onClickWorkonItActivity, self));\n\n    if (self.params.showContextByMenuDashboard === self.CONTEXT_PLANACTIVITIES) {\n      $(\".project-plan-activity-list\", $content).on(\"click\", \"li .ui-bizagi-wrapper-parallel-icon\", $.proxy(self.onClickChangeParallel, self));\n    }\n\n    if (self._statePlan === self.PENDING_PLAN) {\n      $(\"a#to-execute-plan\", $content).on(\"click\", $.proxy(self.onExecutePlan, self));\n    } else if (self._statePlan !== \"CLOSED_PLAN\") {\n      $(\"a#to-close-plan\", $content).on(\"click\", $.proxy(self.onClosePlan, self));\n    }\n\n    self.renderActivities();\n    if (event) {\n      if (event.type === \"UPDATE_LIST_ACTIVITIES\") {\n        self.updateTransitions();\n      }\n    }\n  },\n\n  getCopyObjectPlan: function getCopyObjectPlan() {\n    var self = this;\n    return {\n      id: self.params.plan.id,\n      name: self.params.plan.name,\n      description: self.params.plan.description,\n      dueDate: self.params.plan.dueDate,\n      waitForCompletion: self.params.plan.waitForCompletion,\n      currentState: self.params.plan.currentState,\n      parentWorkItem: self.params.plan.parentWorkItem,\n      creationDate: self.params.plan.creationDate,\n      startDate: self.params.plan.startDate,\n      idUserCreator: self.params.plan.idUserCreator,\n      contextualized: self.params.plan.contextualized,\n      activities: self.params.plan.activities };\n\n  },\n\n  enableEventsOnActivitiesByCurrentContext: function enableEventsOnActivitiesByCurrentContext(currentContext) {\n    var self = this;\n    return currentContext === self.CONTEXT_PLANACTIVITIES;\n  },\n\n  onNotifyUpdatePlan: function onNotifyUpdatePlan() {\n    var self = this;\n    if (self.params.showContextByMenuDashboard === self.CONTEXT_PLANOVERVIEW) {\n      $(\".ui-bizagi-wp-project-plan-activities-header h3\", self.content).text(self.params.plan.name);\n      $(\".ui-bizagi-wp-project-plan-activities-header p\", self.content).text(self.params.plan.description);\n    }\n\n  },\n\n  initializeSortableList: function initializeSortableList() {\n    var self = this;\n    return $(\".project-plan-activity-list\", self.content).kendoSortable({\n      hint: function hint(element) {\n        var $clone = element.clone().width(element.width());\n        return $(\"<ol class='project-plan-activity-list ui-bizagi-wp-nolist'></ol>\").append($clone);\n      },\n      change: $.proxy(self.onChangePosition, self),\n      disabled: \".disabled\",\n      end: function end(e) {\n        if (e.newIndex < self.fromIndexEnabledSortingActivities) {\n          e.preventDefault();\n        } else\n        {\n          if (e.oldIndex !== e.newIndex) {\n            self.serviceOrderActivitiesByTransitions.movePositionActivity(self.params.plan.activities, e.oldIndex, e.newIndex);\n\n            var $liActivityGoDown = $(\".project-plan-activity-list li\", self.content).eq(e.newIndex);\n\n            if (!self.canChangeToParallelActivity(self.params.plan.activities, $liActivityGoDown)) {var\n\n\n              setSerieActivity = function setSerieActivity() {\n                setTimeout(function () {\n                  //TODO: Update selector when show arrows in all activities\n                  $(\".project-plan-activity-list li .wrapper-arrow-css i\", self.content).eq(0).\n                  removeClass(\"bz-icon-arrow-right-outline\").addClass(\"bz-icon-arrow-down-outline\");\n                }, 50);\n              };self.params.plan.activities[e.newIndex].parallel = false;\n              setSerieActivity(e.newIndex);\n\n\n            }\n\n\n          }\n        }\n      } }).\n    data(\"kendoSortable\");\n  },\n\n  /*initializeNotifier: function(){\r\n         var self = this;\r\n         return $(\"#project-plan-notifier\", self.content).kendoNotification().data(\"kendoNotification\");\r\n     },*/\n\n  updateTransitions: function updateTransitions() {\n    var self = this;\n    var defer = $.Deferred();\n    var params = {\n      idPlan: self.params.plan.id,\n      transitions: self.getActualTransitions() };\n\n\n    $.when(self.dataService.changeTransitions(params)).always(function (response, responseText, xhr) {\n      if (xhr.status === 500) {\n        self.plugins.notifier.showErrorMessage(bizagi.localization.getResource(\"workportal-project-plan-activities-sorterror\"), \"error\");\n      }\n      self.params.plan.activities = self.orderActivitiesByTransitions(self.params.plan.activities, params.transitions);\n      defer.resolve();\n    });\n    return defer.promise();\n  },\n\n  orderActivitiesByTransitions: function orderActivitiesByTransitions(activities, transitions) {\n    var self = this;\n    return self.serviceOrderActivitiesByTransitions.\n    getActivitiesByTransitions(activities, transitions);\n  },\n\n  getActualTransitions: function getActualTransitions() {\n    var self = this;\n    var auxOrderTransitions = self.serviceOrderActivitiesByTransitions.\n    getActualTransitionsByActivities(self.params.plan.activities);\n\n    auxOrderTransitions.forEach(function (transition) {\n      transition.id = undefined;\n      transition.idPlan = self.params.plan.id;\n    });\n\n    return auxOrderTransitions;\n  },\n\n  onChangePosition: function onChangePosition() {\n    var self = this;\n    self.updateTransitions();\n  },\n\n  onCreateActivity: function onCreateActivity(event) {\n    event.preventDefault();\n\n    var self = this;\n    var $input = $(\"#project-plan-activity-create\", $(event.target));\n    var name = $input.val();\n\n    var idUserAssigned;\n    if (self.params.plan.activities.length > 0) {\n      idUserAssigned = self.params.plan.activities[self.params.plan.activities.length - 1].userAssigned;\n    } else\n    {\n      idUserAssigned = bizagi.currentUser.idUser;\n    }\n\n    if (name.replace(/\\s/g, \"\") !== \"\") {\n\n      var params = {\n        progress: 0,\n        id: \"\",\n        startDate: null,\n        duration: null,\n        userAssigned: idUserAssigned,\n        allowEdition: true,\n        description: null,\n        name: name,\n        idPlan: self.params.plan.id,\n        estimatedFinishDate: null,\n        finishDate: null };\n\n\n      if (self.params.plan.parent && !bizagi.util.isEmpty(self.params.plan.parent.guidActivity)) {\n        var paramsDetailActivity = {\n          idPlan: self.params.plan.id,\n          idActivity: self.params.plan.parent.guidActivity };\n\n        $.when(self.dataService.getActivity(paramsDetailActivity)).done(function (response) {\n          params.allowEdition = response.allowEdition;\n          self.createPlanActivity(params);\n\n        });\n      } else {\n        self.createPlanActivity(params);\n      }\n\n\n    }\n\n    event.target.reset();\n\n    event.preventDefault();\n  },\n  createPlanActivity: function createPlanActivity(params) {\n    var self = this;\n    $.when(self.dataService.createPlanActivity(params)).always(function (response, responseText, xhr) {\n\n      if (xhr.status === 201) {\n        var paramsDetailActivity = {\n          idPlan: params.idPlan,\n          idActivity: response.id };\n\n        $.when(self.dataService.getActivity(paramsDetailActivity)).always(function (responseActivity) {\n          var activityNew = $.extend(responseActivity, {\n            id: response.id,\n            items: [],\n            numTotalItems: 0,\n            numResolvedItems: 0,\n            parallel: false });\n\n\n          self.renderActivities([activityNew]);\n          self.params.plan.activities.push(activityNew);\n\n          var $activityList = $(\".project-plan-activity-list\", self.content);\n          $(\"li:last .bz-icon-pencil-outline\", $activityList).trigger(\"click\");\n\n          self.updateTransitions();\n        });\n      } else if (response.status === 500) {\n        self.plugins.notifier.showErrorMessage(bizagi.localization.getResource(\"workportal-project-plan-activities-createarror\"), \"error\");\n      }\n    });\n  },\n  onClickChangeParallel: function onClickChangeParallel(event) {\n    event.preventDefault();\n    var self = this;\n    var $wrapperArrow = $(\".wrapper-arrow-css\", event.currentTarget);\n\n    var $liActivitySelected = $wrapperArrow.closest(\"li\");\n    var idActivitySelected = $liActivitySelected.data(\"id\");\n\n    if (self.canChangeToParallelActivity(self.params.plan.activities, $liActivitySelected)) {\n      /**\r\n                                                                                              * Changes UI\r\n                                                                                              * */\n      var activityParallel;\n      if ($(\"i\", $wrapperArrow).hasClass(\"bz-icon-arrow-down-outline\")) {\n        activityParallel = true;\n        $(\"i\", $wrapperArrow).removeClass(\"bz-icon-arrow-down-outline\").addClass(\"bz-icon-arrow-right-outline\").\n        prop(\"title\", bizagi.localization.getResource(\"workportal-project-plan-activity-parallel\"));\n      } else\n      {\n        activityParallel = false;\n        $(\"i\", $wrapperArrow).removeClass(\"bz-icon-arrow-right-outline\").addClass(\"bz-icon-arrow-down-outline\").\n        prop(\"title\", bizagi.localization.getResource(\"workportal-project-plan-activity-sequential\"));\n      }\n\n      /**\r\n         * Change Activity Data\r\n         */\n      self.changeActivityProperties(idActivitySelected, { parallel: activityParallel });\n\n      self.updateTransitions();\n    }\n  },\n\n  canChangeToParallelActivity: function canChangeToParallelActivity(activities, $liActivitySelected) {\n    var self = this;\n    var result = true;\n    var idLastParallelActivity = self.getLastParallelActivityIsRunningOrClose(activities);\n    if (idLastParallelActivity) {\n      var $liPreviusActivity = $liActivitySelected.prev();\n      var idPreviusActivity = $liPreviusActivity.data(\"id\");\n      if (idLastParallelActivity === idPreviusActivity) {\n        result = false;\n      }\n    }\n    return result;\n  },\n\n  onClickEditActivity: function onClickEditActivity(event) {\n    var self = this;\n    var $target = $(event.currentTarget);\n\n    var idActivitySelected = $target.data(\"id\");\n\n    var activityToShow = self.params.plan.activities.filter(function (activity) {\n      return activity.id === idActivitySelected;\n    })[0];\n\n    var isEditableFormActivity = self._statePlan !== \"CLOSED_PLAN\" && activityToShow.workItemState !== \"Completed\";\n\n    if (self.params.showContextByMenuDashboard === self.CONTEXT_PLANACTIVITIES) {var\n      showFormToEditActivity = function showFormToEditActivity(idActivitySelected) {\n        if (self.idActivityEditing !== idActivitySelected) {\n          self.params.plan.idActivitySelected = idActivitySelected;\n\n          $target.closest(\"li\").addClass(\"selected\").siblings().removeClass(\"selected\");\n          self.idActivityEditing = idActivitySelected;\n          self.pub(\"notify\", {\n            type: \"EDITACTIVITY\",\n            args: $.extend(self.params, {\n              isEditableFormActivity: isEditableFormActivity,\n              idActivityToShow: idActivitySelected }) });\n\n\n          self.pub(\"notify\", {\n            type: \"OPEN_RIGHT_SIDEBAR\" });\n\n        }\n      };\n\n      showFormToEditActivity(idActivitySelected);\n    }\n  },\n\n  changeActivityProperties: function changeActivityProperties(activityGuid, activityPropertiesToUpdate) {\n    var self = this;\n    for (var iActivity = 0, lengthActivities = self.params.plan.activities.length; iActivity < lengthActivities; iActivity += 1) {\n      if (self.params.plan.activities[iActivity].id === activityGuid) {\n        $.extend(self.params.plan.activities[iActivity], activityPropertiesToUpdate);\n        break;\n      }\n    }\n  },\n\n  addEventHandlers: function addEventHandlers() {\n    var self = this;\n\n    $(\"#project-plan-activity-createform\", self.content).on(\"submit\", $.proxy(self.onCreateActivity, self));\n    $(\"#project-plan-activity-create\", self.content).focus();\n  },\n\n  /**\r\n      * UI\r\n      */\n  renderActivities: function renderActivities(activities) {\n    var self = this;\n    var $list = $(\".project-plan-activity-list\", self.content);\n    var tmpl = self.getTemplate(\"plan-activities-item\");\n\n    if (self.params.showContextByMenuDashboard === self.CONTEXT_PLANACTIVITIES) {\n      $list.addClass(\"enabled-actions\");\n    }\n\n    var $element = self.params.plan.currentState === \"PENDING\" ? $(\"a#to-execute-plan\", self.content) : $(\"a#to-close-plan\", self.content);\n    if (activities || self.params.plan.activities.length > 0) {\n      $element.show();\n    } else {\n      $element.hide();\n    }\n\n    var arrayActivities = activities || self.params.plan.activities;\n\n    var argsTemplate = {\n      statePlan: self._statePlan,\n      statePendingPlan: self.PENDING_PLAN,\n      stateExecutingPlan: self.EXECUTING_PLAN,\n      context: self.params.showContextByMenuDashboard,\n      activities: activities || self.params.plan.activities,\n      currentUserId: bizagi.currentUser.idUser };\n\n\n    if (self._statePlan === self.EXECUTING_PLAN) {\n      arrayActivities.forEach(function (activity) {\n        if (activity.startDate) {\n          activity.classEnabledActionActivities = \"disabled\";\n        } else\n        {\n          activity.classEnabledActionActivities = self.params.showContextByMenuDashboard === self.CONTEXT_PLANACTIVITIES ? \"enabled\" : \"disabled\";\n        }\n\n        activity.isRunning = self.runningActivity(activity);\n\n      });\n    }\n\n    // XSS Fix Bug \n    argsTemplate.activities = argsTemplate.activities.map(function (activity) {\n      activity.name = bizagi.util.decodeHtmlEntities(activity.name);\n      activity.description = bizagi.util.decodeHtmlEntities(activity.description);\n      return activity;\n    });\n\n    var $item = tmpl.render(argsTemplate);\n    $list.append($item);\n\n    self.fromIndexEnabledSortingActivities = self.params.plan.activities.filter(function (activity) {\n      return activity.classEnabledActionActivities === \"disabled\";\n    }).length;\n\n    self.loadAndShowImagesUsers(self.params.plan.activities);\n  },\n\n  /**\r\n      * Know if the activity is running\r\n      * @param activity\r\n      * @returns {boolean}\r\n      */\n  runningActivity: function runningActivity(activity) {\n    //Inactive represent created but user dont access yet\n    return activity.workItemState === 'Active' || activity.workItemState === 'Inactive';\n  },\n\n  loadAndShowImagesUsers: function loadAndShowImagesUsers(listActivities) {\n    var self = this;\n\n    var guidUsers = $.map(listActivities, function (element) {\n      return element.userAssigned;\n    });\n\n    function removeDuplicateItemsFromArray(a) {\n      var seen = {};\n      var out = [];\n      var len = a.length;\n      var j = 0;\n      for (var i = 0; i < len; i++) {\n        var item = a[i];\n        if (seen[item] !== 1) {\n          seen[item] = 1;\n          out[j++] = item;\n        }\n      }\n      return out;\n    }\n\n    var csvguidUsers = removeDuplicateItemsFromArray(guidUsers.concat(bizagi.currentUser.userGuid)).join(\",\");\n\n    self.getDataUsers(csvguidUsers).then(function () {\n      self.renderUserProfilesAndImages();\n    });\n  },\n\n  renderUserProfilesAndImages: function renderUserProfilesAndImages() {\n    var self = this;\n\n    var base64Prefix = \"data:image/png;base64,\";\n\n    for (var iUser = 0; iUser < self.userPictures.length; iUser += 1) {\n      $(\"div[data-iduser='\" + self.userPictures[iUser].id + \"']  span.ui-bizagi-user-initials\").html(self.userPictures[iUser].name.getInitials());\n      if (self.userPictures[iUser].picture) {\n        $(\"div[data-iduser='\" + self.userPictures[iUser].id + \"']  img\").show();\n        $(\"div[data-iduser='\" + self.userPictures[iUser].id + \"']  span.ui-bizagi-user-initials\").hide();\n        $(\"div[data-iduser='\" + self.userPictures[iUser].id + \"']  img\").attr(\"src\", base64Prefix + self.userPictures[iUser].picture);\n      }\n    }\n  },\n\n  /**\r\n      * Call services\r\n      */\n\n  /*\r\n          *  Get data for users\r\n          */\n  getDataUsers: function getDataUsers(csvguidUsers) {\n    var self = this,\n    defer = $.Deferred();\n\n    var params = {\n      usersGuids: csvguidUsers,\n      width: 50,\n      height: 50 };\n\n\n    self.dataService.getUsersData(params).always(function (response) {\n\n      function arrayUnique(array) {\n        var a = array.concat();\n        for (var i = 0; i < a.length; ++i) {\n          for (var j = i + 1; j < a.length; ++j) {\n            if (a[i] === a[j]) {\n              a.splice(j -= 1, 1);\n            }\n\n          }\n        }\n        return a;\n      }\n\n      self.userPictures = arrayUnique(self.userPictures.concat(response));\n      defer.resolve(response);\n    });\n\n    return defer.promise();\n  },\n\n  /**\r\n      * When cancel form\r\n      */\n  onCancelActivityForm: function onCancelActivityForm() {\n    var self = this;\n    self.closeSidebar();\n    self.pub(\"notify\", {\n      type: \"PLANSIDEBAR\",\n      args: self.params });\n\n  },\n\n  setContentWrapper: function setContentWrapper(content) {\n    var self = this;\n    var $contentWrapper = $(\".project-plan-content-wrapper\", content);\n    $contentWrapper.on(\"click\", $.proxy(self.onCancelActivityForm, self));\n    var activityArea = $(\"#project-plan-activities-wrapper\", content);\n    activityArea.on(\"click\", function (e) {e.stopPropagation();});\n    var windowHeight = $(window).height();\n    var height = windowHeight - 156;\n    $contentWrapper.css(\"height\", height + \"px\");\n  },\n\n  onClickDeleteActivity: function onClickDeleteActivity(event) {\n    event.stopPropagation();\n    var self = this;\n    var idActivitySelected = $(event.currentTarget).data(\"id\");\n    var params = {\n      idPlan: self.params.plan.id,\n      id: idActivitySelected };\n\n    $.when(bizagi.showConfirmationBox(bizagi.localization.getResource(\"workportal-project-plan-activity-delete-confirmation\"), \"\", \"info\")).done(function () {\n      $.when(self.dataService.deleteActivityPlan(params)).done(function () {\n        self.closeSidebar();\n        //The next activity of the deleted, if its parallel, have to set dont parallel\n        for (var iActivity = 0, lengthActivities = self.params.plan.activities.length; iActivity < lengthActivities; iActivity += 1) {\n          if (self.params.plan.activities[iActivity].id === idActivitySelected) {\n            //activity isn't the first or last activity\n            if (lengthActivities > iActivity + 1 && iActivity > 0) {\n              if (self.params.plan.activities[iActivity + 1].parallel && self.params.plan.activities[iActivity - 1].parallel) {\n                self.params.plan.activities[iActivity + 1].parallel = false;\n                $(\".project-plan-activity-list li[data-id='\" + self.params.plan.activities[iActivity].id + \"']\", self.content).\n                next().find(\".wrapper-arrow-css i\").removeClass(\"bz-icon-arrow-right-outline\").addClass(\"bz-icon-arrow-down-outline\");\n              }\n            }\n          }\n        }\n\n        //Delete activity\n        self.params.plan.activities = self.params.plan.activities.filter(function (activity) {\n          return activity.id !== idActivitySelected;\n        });\n\n        $.when(self.updateTransitions()).done(function () {\n          self.renderWidgetByStatePlan();\n\n          self.pub(\"notify\", {\n            type: \"PLANSIDEBAR\",\n            args: self.params });\n\n        });\n      });\n    });\n  },\n\n  /**\r\n      * Go to activity\r\n      */\n  onClickWorkonItActivity: function onClickWorkonItActivity(event) {\n    event.preventDefault();\n    var self = this;\n    var idActivitySelected = $(event.target).closest(\"li\").data(\"id\");\n    var activity = self.params.plan.activities.filter(function (activity) {\n      return activity.id === idActivitySelected;\n    })[0];\n\n    self.publish(\"executeAction\", {\n      action: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,\n      idCase: activity.idCase,\n      idWorkItem: activity.idWorkItem });\n\n  },\n\n  onExecutePlan: function onExecutePlan(event) {\n    event.preventDefault();\n    var self = this;\n\n    var numberActivitiesCreated = self.params.plan.activities.length;\n\n    if (numberActivitiesCreated > 0) {\n      if (!$(event.target).closest(\"a\").hasClass(\"disabled\")) {\n        self.params.plan.currentState = \"EXECUTING\";\n        $(event.target).closest(\"a\").addClass(\"disabled\");\n        var params = {\n          idPlan: self.params.plan.id };\n\n\n        $.when(self.dataService.putExecutePlan(params)).done(function () {\n          var params = $.extend(self.getCopyObjectPlan(), { startDate: self.getDateServer() });\n          self.callUpdatePlan(params);\n\n          $(event.target).closest(\"a\").removeClass(\"disabled\");\n\n          function sendNotification(params) {\n            if (self.params.planChild) {\n              self.params.planChild.currentState = self.params.plan.currentState;\n            }\n\n            self._notifyPlanActivities(params);\n          }\n\n          if (typeof self.radNumber === \"undefined\") {\n            $.when(self.dataService.getCaseByPlan({ idPlan: self.params.plan.id })).done(function (response) {\n              self.params.idCase = response.id;\n              sendNotification(self.params);\n            });\n          } else\n          {\n            sendNotification(self.params);\n          }\n\n\n\n        });\n      }\n    } else\n    {\n      self.plugins.notifier.showErrorMessage(printf(bizagi.localization.getResource(\"workportal-project-plan-action-execute-message-activities-required\"), \"\"));\n    }\n  },\n\n  /**\r\n      * notify PLANACTIVITIES with refreshAllWidgets false\r\n      * @param {JSON} params \r\n      */\n  _notifyPlanActivities: function _notifyPlanActivities(params) {\n    var self = this;\n    self.pub(\"notify\", {\n      type: \"PLANACTIVITIES\",\n      args: $.extend(params, { refreshAllWidgets: true }) });\n\n  },\n\n  onClosePlan: function onClosePlan(event) {\n    var self = this;\n    event.preventDefault();\n    if (self.activitiesAreCompleted(self.params.plan.activities)) {\n      self.closePlan();\n    } else {\n      $.when(bizagi.showConfirmationBox(bizagi.localization.getResource(\"workportal-project-plan-action-close-message-activities-finished\"), \"\", \"info\")).done(function () {\n        self.closePlan();\n      });\n    }\n  },\n\n  closePlan: function closePlan() {\n    var self = this;\n    var params = $.extend(self.getCopyObjectPlan(), { currentState: \"CLOSED\" });\n    $.when(self.callUpdatePlan(params)).done(function () {\n      $.when(self.callClosePlan({ idPlan: params.id })).done(function () {\n        self.params.plan = params;\n        self.pub(\"notify\", {\n          type: \"LOAD_INFO_SUMMARY_PLAN\",\n          args: self.params });\n\n\n        self.pub(\"notify\", {\n          type: \"LOAD_INFO_SUMMARY_PROGRESS_PLAN\",\n          args: self.params });\n\n      }).fail(function () {\n        self.notifier.showErrorMessage(printf(bizagi.localization.getResource('workportal-project-plan-close-fail'), ''));\n      });\n    }).fail(function () {\n      self.notifier.showErrorMessage(printf(bizagi.localization.getResource('workportal-project-plan-close-fail'), ''));\n    });\n  },\n\n  callUpdatePlan: function callUpdatePlan(params) {\n    var self = this;\n    return $.when(self.dataService.updatePlan(params)).done(function () {\n      $.extend(self.params.plan, params);\n    });\n  },\n\n  callClosePlan: function callClosePlan(params) {\n    var self = this;\n    return $.when(self.dataService.closePlan(params)).done(function () {\n      $.extend(self.params.plan, params);\n      self.plugins.notifier.showSucessMessage(printf(bizagi.localization.getResource(\"workportal-project-plan-close-success\"), \"\"));\n    });\n  },\n\n  activitiesAreCompleted: function activitiesAreCompleted(activities) {\n    var listActivities = activities || [];\n    var numActivitiesCompleted = listActivities.filter(function (activity) {\n      return activity.finishDate;\n    }).length;\n    return numActivitiesCompleted === activities.length;\n  },\n\n  getLastParallelActivityIsRunningOrClose: function getLastParallelActivityIsRunningOrClose(activities) {\n    var lastIndexParallelInExecution = -1;\n    var parallelActivitiesInRunning = activities.filter(function (activity) {\n      if (activity.startDate !== null && activity.parallel) {\n        lastIndexParallelInExecution += 1;\n        return true;\n      }\n    });\n    if (lastIndexParallelInExecution >= 0 && lastIndexParallelInExecution + 1 !== activities.length) {\n      return parallelActivitiesInRunning[parallelActivitiesInRunning.length - 1].id;\n    } else\n    {\n      return null;\n    }\n  },\n\n  /**\r\n      * return JElement from id or selected from class\r\n      * @param {JSON} params \r\n      */\n  _getJElementSelectedActivity: function _getJElementSelectedActivity(params) {\n    var _jElementFromId = $(\".project-plan-activity-list li[data-id='\" + params.args.id + \"']\"),\n    _jElementSelected = $(\".project-plan-activity-list li.selected\");\n    return params.args.id ? _jElementFromId : _jElementSelected;\n  },\n\n  /**\r\n      * update activity information in row activities\r\n      * @param {Event} _ \r\n      * @param {JSON} params \r\n      */\n  refreshActivityRow: function refreshActivityRow(_, params) {\n    var self = this;\n    var $selectedActivity = self._getJElementSelectedActivity(params);\n    if (params.args.displayName) $(\"p>span\", $selectedActivity).text(params.args.displayName);\n    if (params.args.assignee) {\n\n      var idActivitySelected = $($selectedActivity).data(\"id\");\n      var activityEdited = self.params.plan.activities.filter(function (activity) {\n        return activity.id === idActivitySelected;\n      })[0];\n\n      if (params.args.assignee === bizagi.currentUser.idUser && (activityEdited.workItemState === \"Active\" || activityEdited.workItemState === \"Inactive\")) {\n        $(\".item-workonit-button\", $selectedActivity).show();\n      } else\n      {\n        $(\".item-workonit-button\", $selectedActivity).hide();\n      }\n\n      self.getDataUsers([params.args.assignee].join()).then(function (response) {\n        $(\".bz-wp-avatar span.ui-bizagi-user-initials\", $selectedActivity).html(response[0].name.getInitials());\n        $(\"div.ui-bizagi-wp-project-plan-activity-infobox[data-iduser]\", $selectedActivity).attr(\"data-iduser\", params.args.assignee);\n        if (response[0].picture) {\n          var base64Prefix = \"data:image/png;base64,\";\n          $(\".bz-wp-avatar img\", $selectedActivity).show();\n          $(\".bz-wp-avatar  span.ui-bizagi-user-initials\", $selectedActivity).hide();\n          $(\".bz-wp-avatar img\", $selectedActivity).attr(\"src\", base64Prefix + response[0].picture);\n        } else\n        {\n          $(\".bz-wp-avatar img\", $selectedActivity).hide();\n          $(\".bz-wp-avatar  span.ui-bizagi-user-initials\", $selectedActivity).show();\n        }\n      });\n    }\n  },\n\n  closeSidebar: function closeSidebar() {\n    var that = this;\n    if (bizagi.services.preferences().getPreference(\"activityCollapseSidebars\") && $(\".ui-bizagi-wp-project-panel-rowicon-right i.bz-icon-left-outline\").css(\"display\") == \"none\" && $(\"li.clearfix.selected\").length > 0) {\n      that.pub(\"notify\", {\n        type: \"CLOSE_RIGHT_SIDEBAR\" });\n\n    }\n  },\n\n  collapseSidebars: function collapseSidebars() {\n    if (bizagi.services.preferences().getPreference(\"activityCollapseSidebars\")) {\n      $(\"#ui-bizagi-wp-project-homeportal-main\").addClass(\"ui-bizagi-wp-project-collapse-rightpanel\");\n      $(\"#ui-bizagi-wp-project-homeportal-main\").removeClass(\"ui-bizagi-wp-project-open-rightpanel\");\n      $(\"#right-sidebar-wrapper\").addClass(\"always-collpase\");\n\n      $(\"#ui-bizagi-wp-project-homeportal-main\").addClass(\"ui-bizagi-wp-project-collapse-leftpanel\");\n      $(\"#ui-bizagi-wp-project-homeportal-main\").removeClass(\"ui-bizagi-wp-project-open-leftpanel\");\n      $(\"#left-sidebar-wrapper\").addClass(\"always-collpase\");\n    }\n  } });\n\n\n\nbizagi.injector.register(\"bizagi.workportal.widgets.project.plan.activities\", [\"workportalFacade\", \"dataService\", \"notifier\", \"bizagi.workportal.services.behaviors.orderActivitiesByTransitions\", bizagi.workportal.widgets.project.plan.activities], true);","/*\r\n *   Name: Bizagi Workportal project Plan Sidebar\r\n *   Author: Elkin Fernando Siabato Cruz\r\n */\n\nbizagi.workportal.widgets.project.base.extend(\"bizagi.workportal.widgets.project.plan.sidebar\", {}, {\n\n  /*\r\n                                                                                                       *   Constructor\r\n                                                                                                       */\n  init: function init(workportalFacade, dataService, serviceloadDataPlan, params) {\n    var self = this;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    self.serviceloadDataPlan = serviceloadDataPlan;\n    self.params = params || {};\n    params.supportNav = false;\n\n    //Load templates\n    self.loadTemplates({\n      \"project-plan-sidebar\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.project.plan.sidebar\").concat(\"#project-plan-sidebar\") });\n\n\n  },\n\n  /*\r\n      * Renders the template defined in the widget\r\n      */\n  renderContent: function renderContent() {\n    var self = this;\n    var template = self.getTemplate(\"project-plan-sidebar\");\n    self.content = template.render({});\n    $.when(self.areTemplatedLoaded()).\n    done(function () {\n      var params = { idPlan: self.params.plan.id };\n      if (self.params.planChild && self.params.planChild.id) {\n        params.idPlan = self.params.planChild.id;\n      }\n      self.serviceloadDataPlan.loadData(params, self.getDateServer, self.params);\n      self.serviceloadDataPlan.subscribe(\"loadedWithDataActivities\", $.proxy(self.loadedWithDataActivities, self));\n      self.serviceloadDataPlan.subscribe(\"loadedWithDataFirstParent\", $.proxy(self.loadedWithDataFirstParent, self));\n    });\n    return self.content;\n  },\n\n  loadedWithDataActivities: function loadedWithDataActivities() {\n    var self = this;\n    self.pub(\"notify\", {\n      type: \"LOADED_ACTIVITIES_PLAN\",\n      args: self.params });\n\n    self.pub(\"notify\", {\n      type: \"UPDATE_INFO_PLAN\",\n      args: self.params });\n\n    self.pub(\"notify\", {\n      type: \"LOAD_INFO_SUMMARY_PROGRESS_PLAN\",\n      args: self.params });\n\n    self.pub(\"notify\", {\n      type: \"LOAD_INFO_ACTIVITIES_PLAN\",\n      args: self.params });\n\n  },\n\n  loadedWithDataFirstParent: function loadedWithDataFirstParent() {\n    var self = this;\n    self.pub(\"notify\", {\n      type: \"LOAD_INFO_SUMMARY_PLAN\",\n      args: self.params });\n\n  },\n\n  clean: function clean() {\n    var self = this;\n    if (self.serviceloadDataPlan) {\n      self.serviceloadDataPlan.unsubscribe(\"loadedWithDataActivities\", $.proxy(self.loadedWithDataActivities, self));\n      self.serviceloadDataPlan.unsubscribe(\"loadedWithDataFirstParent\", $.proxy(self.loadedWithDataFirstParent, self));\n    }\n  } });\n\n\n\nbizagi.injector.register(\"bizagi.workportal.widgets.project.plan.sidebar\", [\"workportalFacade\", \"dataService\", \"bizagi.workportal.services.behaviors.loadDataPlan\", bizagi.workportal.widgets.project.plan.sidebar], true);","/*\r\n *   Name: Bizagi Workportal Desktop Project Plan Action\r\n *   Author: Elkin Fernando Siabato Cruz\r\n */\n\nbizagi.workportal.widgets.project.base.extend(\"bizagi.workportal.widgets.project.plan.action\", {}, {\n\n  /*\r\n                                                                                                      *   Constructor\r\n                                                                                                      */\n  init: function init(workportalFacade, dataService, projectDashboard, notifier, planTemplateCreate, planPopupEdit, params) {\n    var self = this;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    self.PENDING_PLAN = \"PENDING\";\n    self.EXECUTING_PLAN = \"EXECUTING\";\n    self.CLOSED_PLAN = \"CLOSED\";\n\n    self.CONTEXT_ACTIVITYPLAN = \"ACTIVITYPLAN\";\n    self.CONTEXT_ACTIVITYPLANOVERVIEW = \"ACTIVITYPLANOVERVIEW\";\n    self.CONTEXT_PLANCREATE = \"PLANCREATE\";\n    self.CONTEXT_ACTIVITYPLANCREATE = \"ACTIVITYPLANCREATE\";\n\n    self.showActionsPlan = false;\n    self.projectDashboard = projectDashboard;\n    self.notifier = notifier;\n    self.planTemplateCreate = planTemplateCreate;\n    self.planPopupEdit = planPopupEdit;\n\n    //Load templates\n    self.loadTemplates({\n      \"plan-action-main\": bizagi.getTemplate(\"bizagi.workportal.desktop.project.plan.action\").concat(\"#project-plan-action\") });\n\n  },\n\n  renderContent: function renderContent() {\n    var self = this;\n    var tmpl = self.getTemplate(\"plan-action-main\");\n\n    self.showActionsPlan = self.params.showContextByMenuDashboard !== self.CONTEXT_ACTIVITYPLAN &&\n    self.params.showContextByMenuDashboard !== self.CONTEXT_ACTIVITYPLANOVERVIEW;\n\n    self.plugins = {};\n    self.content = tmpl.render({\n      plan: self.params.plan.name,\n      stateClosedPlan: self.CLOSED_PLAN,\n      currentStatePlan: self.params.plan.currentState,\n      showActionsPlan: self.showActionsPlan });\n\n\n    if (self.showActionsPlan) {\n      self.params.plan.contextualized = typeof self.params.plan.contextualized == \"undefined\" ? true : self.params.plan.contextualized;\n    }\n\n    return self.content;\n  },\n\n  postRender: function postRender() {\n\n    var self = this;\n    var $contentWidget = self.getContent();\n\n    if (self.showActionsPlan) {\n      self.initilizeActionMenu();\n      $(\"a#to-close-plan\", $contentWidget).on(\"click\", $.proxy(self.onClosePlan, self));\n    }\n\n    self.sub(\"LOAD_INFO_SUMMARY_PLAN\", $.proxy(self.onNotifyLoadInfoSummaryPlan, self));\n    self.clearAlertsOnFocus();\n\n    self.planTemplateCreate.sub('planTemplateCreatedSuccess', function () {\n      self.notifier.showSucessMessage(\n      printf(bizagi.localization.getResource('workportal-project-plan-create-template-success'), ''));\n    });\n    self.planTemplateCreate.sub('planTemplateCreatedFailed', function () {\n      self.notifier.showErrorMessage(\n      printf(bizagi.localization.getResource('workportal-project-plan-create-template-fail'), ''));\n    });\n\n    self.planPopupEdit.sub('planEditedSuccess', function () {\n      self.setNamePlan(self.params.plan.name);\n\n      self.pub(\"notify\", {\n        type: \"UPDATE_INFO_PLAN\" });\n\n\n      self.pub(\"notify\", {\n        type: \"LOAD_INFO_SUMMARY_PLAN\",\n        args: self.params });\n\n\n      self.notifier.showSucessMessage(\n      printf(bizagi.localization.getResource('workportal-project-plan-edit-success'), ''));\n    });\n\n    self.planPopupEdit.sub('planEditedFailed', function () {\n      self.notifier.showErrorMessage(\n      printf(bizagi.localization.getResource('workportal-project-plan-edit-fail'), ''));\n    });\n\n    self.sub(\"EXPANDED_RIGHT_SIDEBAR\", $.proxy(self.onNotifyExpandedRightSidebar, self));\n  },\n\n  onNotifyExpandedRightSidebar: function onNotifyExpandedRightSidebar() {\n    var self = this;\n    if (self.showActionsPlan) {\n      self.initilizeActionMenu();\n    }\n  },\n\n  /**\r\n      * Notifies when an event is raised\r\n      */\n\n  onNotifyLoadInfoSummaryPlan: function onNotifyLoadInfoSummaryPlan() {\n    var self = this;\n    self.setStatePlan(self.params.plan.currentState);\n    self.setNamePlan(self.params.plan.name);\n  },\n\n  /**\r\n      * UI\r\n      */\n\n  setStatePlan: function setStatePlan(statePlan) {\n    var self = this;\n    if (statePlan) {\n      switch (statePlan.toUpperCase()) {\n        case \"PENDING\":\n          $(\".state-pending-plan\", self.content).show().siblings().hide();\n          break;\n        case \"EXECUTING\":\n          $(\".state-executing-plan\", self.content).show().siblings().hide();\n          break;\n        case \"CLOSED\":\n          $(\".state-closed-plan\", self.content).show().siblings().hide();\n          break;}\n\n    }\n  },\n\n  setNamePlan: function setNamePlan(namePlan) {\n    var self = this;\n    $(\".ui-bizagi-wp-project-plan-header .bz-wp-section\", self.content).text(bizagi.util.decodeHtmlEntities(namePlan));\n  },\n\n  /**\r\n      Events\r\n      */\n  onSelectMenu: function onSelectMenu(event, ui) {\n    var self = this;\n    if ($(event.currentTarget).find(\"i\").length === 0) {\n      var item = $(ui.item).data(\"item\");\n\n      switch (item) {\n        case \"edit\":\n          self.onClickMenuOpenEdition();\n          break;\n        case \"delete\":\n          self.onClickMenuDeletePlan();\n          break;\n        case \"saveastmpl\":\n          self.onClickMenuSaveAsTemplate();\n          break;}\n\n    }\n\n  },\n\n  onClickMenuOpenEdition: function onClickMenuOpenEdition() {\n    var self = this;\n    var planSelected = self.params.plan;\n    self.planPopupEdit.showPopup(self.params, self.dataService, planSelected);\n  },\n\n  onClickMenuSaveAsTemplate: function onClickMenuSaveAsTemplate() {\n    var self = this;\n    self.planTemplateCreate.showPopupAddTemplatePlan(self.params,\n    self.dataService, self.params.plan.contextualized, self.params.plan.id);\n  },\n\n  onClickMenuDeletePlan: function onClickMenuDeletePlan() {\n    var self = this;\n\n    $.when(bizagi.showConfirmationBox(bizagi.localization.getResource(\"workportal-project-plan-action-delete-confirmation\"), \"\", \"info\")).done(function () {\n      var params = { id: self.params.plan.id };\n\n      $.when(self.callDeletePlan(params)).always(function (response) {\n        if (response.status === 200 || typeof response.status === \"undefined\") {\n          $.extend(self.params.plan, params);\n          self.notifier.showSucessMessage(\n          printf(bizagi.localization.getResource(\"workportal-project-plan-delete-success\"), \"\"));\n\n          //when a plan created from an activity is deleted, not created from a case\n          var getLevelNavigator = self.pub(\"notify\", { type: \"NAVIGATOR_GETLEVEL\" });\n          var currentLevelNavigator = parseInt(getLevelNavigator[0]);\n          var params = self.projectDashboard.getParamsByBackFromPlan(self.params, currentLevelNavigator, true);\n\n          self.pub(\"notify\", {\n            type: params.typeContext,\n            args: $.extend(self.params, params.paramsNotify) });\n\n        } else\n        {\n          self.notifier.showErrorMessage(\n          printf(bizagi.localization.getResource('workportal-project-plan-delete-fail'), ''));\n        }\n      });\n    });\n  },\n\n  onSubmitFormPlan: function onSubmitFormPlan(event) {\n    event.preventDefault();\n  },\n\n  initilizeActionMenu: function initilizeActionMenu() {\n    var self = this;\n    $(\".ui-bizagi-wp-project-plan-action-menu\", self.content).menu({\n      select: $.proxy(self.onSelectMenu, self) }).\n    removeClass(\"ui-widget-content\");\n  },\n\n\n  /**\r\n      * Initialize edit plugin\r\n      */\n\n  clearAlertsOnFocus: function clearAlertsOnFocus() {\n    $(\".ui-bizagi-wp-project-container-validator-relative input, .ui-bizagi-wp-project-container-validator-relative textarea\").focus(function () {\n      $(this).parent().find(\".k-invalid-msg\").hide();\n    }).focusout(function () {\n      if ($(this).val().length < 1) {\n        $(this).parent().find(\".k-invalid-msg\").show();\n      }\n    });\n  },\n\n  /*activitiesAreCompleted: function(activities){\r\n         var listActivities = activities || [];\r\n         var numActivitiesCompleted =  listActivities.filter(function(activity){\r\n             return activity.finishDate;\r\n         }).length;\r\n         return numActivitiesCompleted == activities.length;\r\n     },*/\n\n  /*getCopyObjectPlan: function(){\r\n              var self = this;\r\n              return {\r\n                  id: self.params.plan.id,\r\n                  name: self.params.plan.name,\r\n                  description: self.params.plan.description,\r\n                  dueDate: self.params.plan.dueDate,\r\n                  waitForCompletion: self.params.plan.waitForCompletion,\r\n                  currentState: self.params.plan.currentState,\r\n                  parentWorkItem: self.params.plan.parentWorkItem,\r\n                  creationDate: self.params.plan.creationDate,\r\n                  startDate: self.params.plan.startDate,\r\n                  idUserCreator: self.params.plan.idUserCreator,\r\n                  contextualized: self.params.plan.contextualized,\r\n                  activities: self.params.plan.activities\r\n              };\r\n          },*/\n\n  /**\r\n                * Call services\r\n                */\n  /*callUpdatePlan: function(params){\r\n                       var self = this;\r\n                       return $.when(self.dataService.updatePlan(params)).done(function () {\r\n                           $.extend(self.params.plan, params);\r\n                         });\r\n                   },\r\n                     callClosePlan: function(params){\r\n                       var self = this;\r\n                       return $.when(self.dataService.closePlan(params)).done(function () {\r\n                           $.extend(self.params.plan, params);\r\n                           self.notifier.showSucessMessage(\r\n                               printf(bizagi.localization.getResource(\"workportal-project-plan-close-success\"), \"\"));\r\n                       });\r\n                   },*/\n\n\n\n  callDeletePlan: function callDeletePlan(params) {\n    var self = this;\n    return $.when(self.dataService.deletePlan(params));\n  },\n\n  clean: function clean() {\n    var self = this;\n    self.planTemplateCreate.unsub(\"planTemplateCreatedSuccess\");\n    self.planTemplateCreate.unsub(\"planTemplateCreatedFailed\");\n    self.planPopupEdit.unsub(\"planEditedSuccess\");\n    self.planPopupEdit.unsub(\"planEditedFailed\");\n\n    self.unsub(\"EXPANDED_RIGHT_SIDEBAR\", $.proxy(self.onNotifyExpandedRightSidebar, self));\n  } });\n\n\nbizagi.injector.register(\"bizagi.workportal.widgets.project.plan.action\", [\"workportalFacade\", \"dataService\",\n\"bizagi.workportal.services.behaviors.projectDashboard\", \"notifier\",\n\"bizagi.workportal.widgets.project.plan.template.create\",\n\"bizagi.workportal.widgets.project.plan.edit\",\nbizagi.workportal.widgets.project.plan.action], true);","/*\r\n *   Name: Bizagi Workportal Desktop Project Plan State\r\n *   Author: Elkin Fernando Siabato Cruz\r\n */\n\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.project.plan.state\", {}, {\n\n  /*\r\n                                                                                               *   Constructor\r\n                                                                                               */\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    //Load templates\n    self.loadTemplates({\n      \"plan-state-main\": bizagi.getTemplate(\"bizagi.workportal.desktop.project.plan.state\").concat(\"#project-plan-state\") });\n\n  },\n\n  renderContent: function renderContent() {\n    var self = this;\n    self.content = $(\"<div></div>\");\n    return self.content;\n  },\n\n  postRender: function postRender() {\n    var self = this;\n    self.sub(\"LOAD_INFO_SUMMARY_PLAN\", $.proxy(self.onNotifyLoadInfoSummaryPlan, self));\n  },\n\n  /**\r\n      * Notifies when an event is raised\r\n      */\n\n  onNotifyLoadInfoSummaryPlan: function onNotifyLoadInfoSummaryPlan(event, params) {\n    var self = this;\n    var tmpl = self.getTemplate(\"plan-state-main\");\n    var renderWidget = tmpl.render({});\n    self.params = $.extend(self.params, params.args);\n\n    var state = self.params.plan.currentState;\n\n    switch (state.toUpperCase()) {\n      case \"PENDING\":\n        $(\".state-pending\", renderWidget).show().siblings().hide();\n        break;\n      case \"EXECUTING\":\n        $(\".state-executing\", renderWidget).show().siblings().hide();\n        break;\n      case \"CLOSED\":\n        $(\".state-closed\", renderWidget).show().siblings().hide();\n        break;}\n\n    self.content.empty().append(renderWidget);\n\n  } });\n\n\n\nbizagi.injector.register(\"bizagi.workportal.widgets.project.plan.state\", [\"workportalFacade\", \"dataService\", bizagi.workportal.widgets.project.plan.state], true);","/*\r\n *   Name: Bizagi Workportal Desktop Project Plan Progress\r\n *   Author: Elkin Fernando Siabato Cruz\r\n */\n\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.project.plan.progress\", {}, {\n\n  /*\r\n                                                                                                  *   Constructor\r\n                                                                                                  */\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    //Load templates\n    self.loadTemplates({\n      \"plan-progress-main\": bizagi.getTemplate(\"bizagi.workportal.desktop.project.plan.progress\").concat(\"#project-plan-progress\") });\n\n  },\n\n  renderContent: function renderContent() {\n    var self = this;\n    self.content = $(\"<div></div>\");\n    return self.content;\n  },\n\n  postRender: function postRender() {\n    var self = this;\n\n    self.sub(\"LOAD_INFO_SUMMARY_PROGRESS_PLAN\", $.proxy(self.onNotifyLoadInfoSummaryPlan, self));\n  },\n\n  /**\r\n      * Notifies when an event is raised\r\n      */\n\n  onNotifyLoadInfoSummaryPlan: function onNotifyLoadInfoSummaryPlan(event, params) {\n    var self = this;\n    self.params = $.extend(self.params, params.args);\n\n    var $content = self.getContent().empty();\n\n    var valuePercentBarComplete = self.calculateProgress();\n\n    var argsTemplate = {};\n    argsTemplate.progress = valuePercentBarComplete;\n\n    if (argsTemplate.progress < 33) {\n      argsTemplate.colorBar = \"Red\";\n    } else\n    if (argsTemplate.progress < 66) {\n      argsTemplate.colorBar = \"Yellow\";\n    } else\n    {\n      argsTemplate.colorBar = \"Green\";\n    }\n\n    //Update widget\n    var contentTemplate = self.getTemplate(\"plan-progress-main\");\n    contentTemplate.\n    render(argsTemplate).\n    appendTo($content);\n\n    //Begin Adjust status bar next to the number days\n    var $barRemainingDate = $(\".remaining-days .time-remaining\", $content);\n    var widthNumberDays = $(\".remaining-days .days\", $content).width();\n    $barRemainingDate.css(\"padding-left\", (widthNumberDays + 7).toString() + \"px\");\n    //End Adjust status bar next to the number days\n\n\n  },\n\n  calculateProgress: function calculateProgress() {\n    var self = this;\n\n    var completedActivities = 0;\n    var totalActivities = self.params.plan.activities.length;\n    var percentProgress = 0;\n\n    if (totalActivities !== 0) {\n      self.params.plan.activities.forEach(function (activity) {\n        if (activity.workItemState === \"Completed\") {\n          completedActivities++;\n        }\n      });\n      percentProgress = Math.round(completedActivities / totalActivities * 100);\n    }\n    return percentProgress;\n  } });\n\n\nbizagi.injector.register(\"bizagi.workportal.widgets.project.plan.progress\", [\"workportalFacade\", \"dataService\", bizagi.workportal.widgets.project.plan.progress], true);","/*\r\n *   Name: Bizagi Workportal Desktop Project Plan Time\r\n *   Author: Elkin Fernando Siabato Cruz\r\n */\n\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.project.plan.time\", {}, {\n\n  /*\r\n                                                                                              *   Constructor\r\n                                                                                              */\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    self.PENDING_PLAN = \"PENDING\";\n    self.EXECUTING_PLAN = \"EXECUTING\";\n    self.CLOSED_PLAN = \"CLOSED\";\n\n    //Regional\n    self.datePickerRegional = bizagi.localization.getResource(\"datePickerRegional\");\n\n    //Load templates\n    self.loadTemplates({\n      \"plan-time-main\": bizagi.getTemplate(\"bizagi.workportal.desktop.project.plan.time\").concat(\"#project-plan-time\") });\n\n  },\n\n  renderContent: function renderContent() {\n    var self = this;\n    self.content = $(\"<div></div>\");\n    return self.content;\n  },\n\n  postRender: function postRender() {\n    var self = this;\n\n    self.sub(\"LOAD_INFO_SUMMARY_PLAN\", $.proxy(self.onNotifyLoadInfoSummaryPlan, self));\n  },\n\n  /**\r\n      * Notifies when an event is raised\r\n      */\n\n  onNotifyLoadInfoSummaryPlan: function onNotifyLoadInfoSummaryPlan(event, params) {\n    var self = this;\n    self.params = $.extend(self.params, params.args);\n\n    if (self.params.plan) {\n      if (self.params.plan.dueDate) {\n        if (self.params.plan.currentState === self.PENDING_PLAN || self.params.plan.currentState === self.EXECUTING_PLAN) {\n          self.updateWidget(event, params);\n        } else\n        {\n          self.sub(\"LOADED_ACTIVITIES_PLAN\", $.proxy(self.updateWidget, self));\n        }\n      } else\n      {\n        self.getContent().empty();\n      }\n    }\n\n  },\n\n  /**\r\n      * change the time properties string to timestamp number\r\n      * @param {*} plan \r\n      */\n  planDatesToStamp: function planDatesToStamp(plan) {\n    if (plan.activities)\n    plan.activities.map(function (a) {\n      if (a.estimatedFinishDate) a.estimatedFinishDate = new Date(a.estimatedFinishDate).getTime();\n      if (a.startDate) a.startDate = new Date(a.startDate).getTime();\n      if (a.finishDate) a.finishDate = new Date(a.finishDate).getTime();\n    });\n    if (plan.dueDate) plan.dueDate = new Date(plan.dueDate).getTime();\n    if (plan.creationDate) plan.creationDate = new Date(plan.creationDate).getTime();\n    if (plan.startDate) plan.startDate = new Date(plan.startDate).getTime();\n    if (plan.closedDate) plan.closedDate = new Date(plan.closedDate).getTime();\n    if (plan.finishDate) plan.finishDate = new Date(plan.finishDate).getTime();\n  },\n  updateWidget: function updateWidget(event, params) {\n    var self = this;\n    self.params = $.extend(self.params, params.args);\n    self.planDatesToStamp(self.params.plan);\n    var $content = self.getContent().empty();\n    if (self.params.plan.currentState === self.CLOSED_PLAN) {\n      self.getClosedDatePlan(self.params.plan);\n    }\n    $.when(self.getIntervalOnMinutes(self.params.plan)).done(function (response) {\n      var relativeTime = bizagi.util.dateFormatter.getRelativeTime(new Date(Date.now() - response.minutesToShowTime * 60 * 1000), null, true);\n\n      var messageUnitTimeCalculated = relativeTime.replace(/\\d/g, \"\");\n      var keywordResourceDescriptionDifference = self.getKeywordDifferenceDates(self.params.plan);\n      var messageDescripionDifference = bizagi.localization.getResource(\"workportal-project-plan-state-\" + keywordResourceDescriptionDifference);\n      messageDescripionDifference = messageDescripionDifference.replace(\"%s\", messageUnitTimeCalculated);\n\n      var valueOfTimeCalculated = relativeTime.replace(/\\D/g, \"\");\n\n      var auxToDate = self.getSecondDate(self.params.plan);\n      var auxPercentBar = self.getWidthBar(self.params.plan, response);\n      var auxColorBar = self.getColorBarByPercent(auxPercentBar);\n      var argsTemplate = {\n        fromDate: self.getFormattedDate(new Date(self.getFirstDate(self.params.plan))),\n        toDate: auxToDate ? self.getFormattedDate(new Date(auxToDate)) : null,\n        valueOfTimeCalculated: valueOfTimeCalculated,\n        messageDescripionDifference: messageDescripionDifference,\n        percentBar: auxPercentBar,\n        colorBar: auxColorBar };\n\n\n      var contentTemplate = self.getTemplate(\"plan-time-main\");\n      contentTemplate.\n      render(argsTemplate).\n      appendTo($content);\n\n    });\n  },\n  getFirstDate: function getFirstDate(plan) {\n    var self = this;\n    switch (plan.currentState) {\n      case self.PENDING_PLAN:\n        if (plan.dueDate) {\n          return plan.dueDate;\n        } else\n        {\n          return plan.creationDate;\n        }\n        break;\n      case self.EXECUTING_PLAN:\n      case self.CLOSED_PLAN:\n        return plan.startDate;}\n\n  },\n  getSecondDate: function getSecondDate(plan) {\n    var self = this;\n    switch (plan.currentState) {\n      case self.PENDING_PLAN:\n        return null;\n      case self.EXECUTING_PLAN:\n        return plan.dueDate;\n      case self.CLOSED_PLAN:\n        return plan.closedDate;}\n\n  },\n  getLastActivity: function getLastActivity(activities) {\n    var copyActivities = JSON.parse(JSON.stringify(activities));\n    return copyActivities.sort(function (activityA, activityB) {\n      return activityA.finishDate < activityB.finishDate ? 1 : -1;\n    })[0];\n  },\n\n  getClosedDatePlan: function getClosedDatePlan(plan) {\n    var self = this;\n    plan.closedDate = self.getLastActivity(plan.activities).finishDate;\n    return plan.closedDate;\n  },\n\n  getDifferenceBetweenDates: function getDifferenceBetweenDates(firstDate, secondDate) {\n    var self = this;\n    var defer = $.Deferred();\n    var params = {\n      idUser: bizagi.currentUser.idUser,\n      fromDate: firstDate,\n      toDate: secondDate };\n\n\n    $.when(self.callGetEffectiveDuration(params)).done(function (difference) {\n      defer.resolve(difference.minutes);\n    });\n    return defer.promise();\n  },\n\n  getIntervalOnMinutes: function getIntervalOnMinutes(plan) {\n    var self = this;\n    var defer = $.Deferred();\n    switch (plan.currentState) {\n      case self.PENDING_PLAN:\n        if (plan.dueDate > Date.now()) {\n          $.when(self.getDifferenceBetweenDates(Date.now(), plan.dueDate)).done(function (minutesNowToDueDate) {\n            $.when(self.getDifferenceBetweenDates(plan.creationDate, Date.now())).done(function (minutesCreateToNow) {\n              defer.resolve({ minutesToShowTime: minutesNowToDueDate, minutesCreateToNow: minutesCreateToNow });\n            });\n          });\n        } else\n        if (plan.dueDate < plan.creationDate) {\n          $.when(self.getDifferenceBetweenDates(plan.dueDate, plan.creationDate)).done(function (minutesDueDateToCreate) {\n            $.when(self.getDifferenceBetweenDates(plan.creationDate, Date.now())).done(function (minutesCreateToNow) {\n              defer.resolve({ minutesToShowTime: minutesDueDateToCreate + minutesCreateToNow, minutesCreateToNow: minutesCreateToNow });\n            });\n          });\n        } else\n        if (plan.dueDate > plan.creationDate) {\n          $.when(self.getDifferenceBetweenDates(plan.creationDate, plan.dueDate)).done(function (minutesCreateToDueDate) {\n            $.when(self.getDifferenceBetweenDates(plan.dueDate, Date.now())).done(function (minutesCreateToNow) {\n              defer.resolve({ minutesToShowTime: minutesCreateToDueDate + minutesCreateToNow, minutesCreateToNow: minutesCreateToNow });\n            });\n          });\n        }\n        break;\n      case self.EXECUTING_PLAN:\n        if (plan.dueDate) {\n          if (plan.dueDate > Date.now()) {\n            $.when(self.getDifferenceBetweenDates(Date.now(), plan.dueDate)).done(function (minutesNowToDueDate) {\n              $.when(self.getDifferenceBetweenDates(plan.startDate, Date.now())).done(function (minutesStartToNow) {\n                defer.resolve({ minutesToShowTime: minutesNowToDueDate, minutesStartToNow: minutesStartToNow });\n              });\n            });\n          } else\n          {\n            $.when(self.getDifferenceBetweenDates(plan.dueDate, Date.now())).done(function (minutesDueDateToNow) {\n              $.when(self.getDifferenceBetweenDates(plan.startDate, plan.dueDate)).done(function (minutesStartToDueDate) {\n                defer.resolve({ minutesToShowTime: minutesDueDateToNow, minutesStartToDueDate: minutesStartToDueDate });\n              });\n            });\n          }\n\n        } else\n        {\n          $.when(self.getDifferenceBetweenDates(plan.startDate, Date.now())).done(function (minutes) {\n            defer.resolve({ minutesToShowTime: minutes });\n          });\n        }\n        break;\n      case self.CLOSED_PLAN:\n        $.when(self.getDifferenceBetweenDates(plan.startDate, plan.closedDate)).done(function (minutes) {\n          defer.resolve({ minutesToShowTime: minutes });\n        });}\n\n\n    return defer.promise();\n  },\n\n  getKeywordDifferenceDates: function getKeywordDifferenceDates(plan) {\n    var self = this;\n    switch (plan.currentState) {\n      case self.PENDING_PLAN:\n        if (plan.dueDate > Date.now()) {\n          return \"remaining\";\n        } else\n        {\n          return \"exceeded\";\n        }\n        break;\n      case self.EXECUTING_PLAN:\n        if (plan.dueDate) {\n          if (plan.dueDate > Date.now()) {\n            return \"remaining\";\n          } else\n          {\n            return \"exceeded\";\n          }\n\n        } else\n        {\n          return \"opened\";\n        }\n        break;\n      case self.CLOSED_PLAN:\n        return \"executed\";}\n\n  },\n\n  getRelativeTime: function getRelativeTime(milliseconds) {\n    return bizagi.util.dateFormatter.getRelativeTime(milliseconds, null, false);\n  },\n\n  getWidthBar: function getWidthBar(plan, intervalMinutes) {\n    var self = this,\n    differenceStartDateToCurrentDate = {};\n    switch (plan.currentState) {\n      case self.PENDING_PLAN:\n        if (plan.dueDate) {\n          if (plan.dueDate < Date.now()) {\n            return 0;\n          } else\n          {\n            var totalInterval = intervalMinutes.minutesCreateToNow + intervalMinutes.minutesToShowTime;\n            valuePercentInterval = intervalMinutes.minutesToShowTime;\n            return Math.ceil(valuePercentInterval * 100 / totalInterval);\n          }\n        } else\n        {\n          return 0;\n        }\n        break;\n      case self.EXECUTING_PLAN:\n        if (plan.dueDate) {\n          if (plan.dueDate > Date.now()) {\n            var totalInterval = intervalMinutes.minutesStartToNow + intervalMinutes.minutesToShowTime;\n            valuePercentInterval = intervalMinutes.minutesToShowTime;\n            return Math.ceil(valuePercentInterval * 100 / totalInterval);\n          } else\n          {\n            return 0;\n          }\n        } else\n        {\n          return 0;\n        }\n        break;\n      case self.CLOSED_PLAN:\n        if (plan.closedDate > Date.now()) {\n          var differenceStartDateToClosedDate = plan.closedDate - plan.startDate;\n          differenceStartDateToCurrentDate = Date.now() - plan.startDate;\n          return Math.ceil(differenceStartDateToCurrentDate * 100 / differenceStartDateToClosedDate);\n        } else\n        {\n          return 100;\n        }}\n\n\n\n  },\n\n  getColorBarByPercent: function getColorBarByPercent(percent) {\n    if (percent < 33) {\n      return \"Red\";\n    } else\n    if (percent < 66) {\n      return \"Yellow\";\n    } else\n    {\n      return \"Green\";\n    }\n  },\n\n  /**\r\n      * Call services\r\n      */\n\n  callGetEffectiveDuration: function callGetEffectiveDuration(params) {\n    var self = this;\n    var d = $.Deferred();\n\n    $.when(\n    self.dataService.getEffectiveDuration(params)).\n    done(function (data) {\n      d.resolve(data);\n    });\n    return d.promise();\n  },\n\n  getFormattedDate: function getFormattedDate(dateObj) {\n    var self = this;\n    var monthsNames = self.datePickerRegional.monthNames;\n    var shortMonth = dateObj.getMonth();\n    return monthsNames[shortMonth] + \" \" + bizagi.util.dateFormatter.formatDate(dateObj, \"dd hh:mm tt\", bizagi.localization.getResource(\"datePickerRegional\"));\n  } });\n\n\nbizagi.injector.register(\"bizagi.workportal.widgets.project.plan.time\", [\"workportalFacade\", \"dataService\", bizagi.workportal.widgets.project.plan.time], true);","/*\r\n *   Name: Bizagi Workportal Desktop Project Plan Parent\r\n *   Author: Elkin Fernando Siabato Cruz\r\n */\n\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.project.plan.parent\", {}, {\n\n  /*\r\n                                                                                                *   Constructor\r\n                                                                                                */\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    //Load templates\n    self.loadTemplates({\n      \"plan-parent-main\": bizagi.getTemplate(\"bizagi.workportal.desktop.project.plan.parent\").concat(\"#project-plan-parent\") });\n\n  },\n\n  renderContent: function renderContent() {\n\n    var self = this;\n    self.content = $(\"<div></div>\");\n    return self.content;\n  },\n\n  postRender: function postRender() {\n    var self = this;\n    self.sub(\"LOAD_INFO_SUMMARY_PLAN\", $.proxy(self.onNotifyLoadInfoSummaryPlan, self));\n  },\n\n  /**\r\n      * Notifies when an event is raised\r\n      */\n  onNotifyLoadInfoSummaryPlan: function onNotifyLoadInfoSummaryPlan(event, params) {\n    var self = this,\n    $content = self.getContent().empty();\n    self.params = $.extend(self.params, params.args);\n    if (self.params.plan.parentWorkItem) {\n      $.when(self.dataService.getPlanParent({ idPlan: self.params.plan.id })).done(function (planParent) {\n        self.params.plan.parent = planParent;\n\n        if (self.params.plan.parent) {\n          var argsTemplate = {\n            idParent: self.params.plan.parent.radNumber,\n            nameParent: self.params.plan.parent.displayName,\n            idCase: self.params.plan.parent.idCase,\n            idWorkflow: self.params.plan.parent.idWorkflow,\n            idWorkItem: self.params.plan.parent.idWorkItem,\n            idTask: self.params.plan.parent.idTask,\n            processName: self.params.process ? self.params.process : self.params.plan.parent.planName };\n\n\n          if (bizagi.util.isEmpty(self.params.plan.parent.guidActivity)) {\n            self.goToParentCase($content, argsTemplate);\n          } else {\n            var paramsDetailActivity = {\n              idPlan: self.params.plan.id,\n              idActivity: self.params.plan.parent.guidActivity };\n\n            $.when(self.dataService.getActivity(paramsDetailActivity)).done(function (response) {\n              self.params.plan.parent.allowEdition = response.allowEdition;\n              self.goToParentCase($content, argsTemplate);\n            });\n          }\n\n        }\n\n      }).fail(function (msg) {\n\n      });\n    }\n  },\n  goToParentCase: function goToParentCase(content, argsTemplate) {\n    var self = this;\n    //TODO: double call because routing dont release memory and widgets\n    //Test with a breakpoint\n    content.empty();\n\n    //Update widget\n    var contentTemplate = self.getTemplate(\"plan-parent-main\");\n    contentTemplate.\n    render(argsTemplate).\n    appendTo(content);\n    $(\"#go-to-parent-case\", content).on(\"click\", $.proxy(self.onClickGoToParentCase, self));\n  },\n  onClickGoToParentCase: function onClickGoToParentCase(event) {\n    event.preventDefault();\n    var self = this;\n    self.routingExecute($(event.target).closest(\"#go-to-parent-case\"));\n  } });\n\n\nbizagi.injector.register(\"bizagi.workportal.widgets.project.plan.parent\", [\"workportalFacade\", \"dataService\", bizagi.workportal.widgets.project.plan.parent], true);","/*\r\n *   Name: Bizagi Workportal Desktop Project Plan Users\r\n *   Author: Elkin Fernando Siabato Cruz\r\n */\n\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.project.plan.users\", {}, {\n\n  /*\r\n                                                                                               *   Constructor\r\n                                                                                               */\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n    self.usersMap = {};\n    self.plugins = {};\n    self.usersInformation = [];\n    self.globalHandlersService = bizagi.injector.get('globalHandlersService');\n    self.usersAssignees = [];\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    //Load templates\n    self.loadTemplates({\n      \"plan-users-main\": bizagi.getTemplate(\"bizagi.workportal.desktop.project.plan.users\").concat(\"#project-plan-users\") });\n\n\n    self.auxNoRepeatTypesUser = {};\n    self.hashTypesUser = {\n      \"assigned\": bizagi.localization.getResource(\"workportal-project-user-assigned\"),\n      \"owner\": bizagi.localization.getResource(\"workportal-project-user-owner\") };\n\n  },\n\n  renderContent: function renderContent() {\n\n    var self = this;\n    self.content = $(\"<div></div>\");\n    return self.content;\n  },\n\n  postRender: function postRender() {\n    var self = this;\n    self.sub(\"LOAD_INFO_ACTIVITIES_PLAN\", $.proxy(self.onNotifyLoadInfoSummaryPlan, self));\n  },\n\n  /**\r\n      * Notifies when an event is raised\r\n      */\n  onNotifyLoadInfoSummaryPlan: function onNotifyLoadInfoSummaryPlan(event, params) {\n    var self = this,\n    args = params.args,\n    cvsGuidUsers = [],\n    activitiesUsers = [],\n    $content = self.getContent().empty();\n    var ownerUserGuid = params.args.plan.idUserCreator;\n    var ownerUserId = params.args.plan.idUserCreator;\n    self.params = $.extend(self.params, params.args);\n\n    activitiesUsers.push({ \"idUser\": ownerUserId, 'userGuid': ownerUserGuid, \"userType\": [\"owner\"] });\n    self.usersMap[\"-\" + ownerUserId + \"-\"] = {\n      picture: \"\",\n      id: ownerUserId,\n      guid: ownerUserGuid,\n      name: \"\",\n      userType: [\"owner\"] };\n\n    cvsGuidUsers.push(ownerUserId);\n    $.each(self.params.plan.activities, function (index, activity) {\n      var userId = activity.userAssigned;\n      var userGuid = activity.userAssignedGuid;\n      if (activity.isRunning == true) {\n        if (userId === ownerUserId) {\n          if ($.inArray(\"Assigned\", activitiesUsers[0].userType) === -1) {\n            activitiesUsers[0].userType.push(\"Assigned\");\n            self.usersMap[\"-\" + ownerUserId + \"-\"].userType.push(\"Assigned\");\n          }\n        } else\n        {\n          self.usersMap[\"-\" + userId + \"-\"] = {\n            picture: \"\",\n            id: userId,\n            guid: userGuid,\n            name: \"\",\n            userType: [\"Assigned\"] };\n\n          if (activitiesUsers.filter(function (user) {return user.idUser == userId;}).length === 0) {\n            activitiesUsers.push({ \"idUser\": userId, \"guidUser\": userGuid, \"userType\": [\"Assigned\"] });\n            cvsGuidUsers.push(userId);\n          }\n        }\n      }\n    });\n    self.activitiesUsers = activitiesUsers;\n    self.params = args;\n    //Update widget\n    var contentTemplate = self.getTemplate(\"plan-users-main\");\n    contentTemplate.\n    render({\n      assignee: self.justAssignees(activitiesUsers),\n      label: bizagi.localization.getResource(\"workportal-project-plan-assignee\") }).\n\n    appendTo($content);\n    self.initilizeTooltip();\n    self.addEventHandlersModal();\n    $.when(self.callGetDataUsers(cvsGuidUsers)).then(function () {\n      self.showCreatorInformation(ownerUserId);\n      self.renderUserProfilesAndImages();\n    });\n  },\n\n  /**\r\n      * return standar userAdapter information with only assigned users when the plan has started\r\n      * @param {Array} allUsers \r\n      */\n  justAssignees: function justAssignees(allUsers) {\n    var self = this;\n    var usersAssignee = [];\n    if ([\"CLOSED\", \"PENDING\"].indexOf(self.params.plan.currentState) == -1) {\n      allUsers.map(function (user) {\n        var isOwner = user.userType.indexOf(\"owner\") !== -1;\n        var isAssignee = user.userType.indexOf(\"Assigned\") !== -1;\n        usersAssignee.push(usersAdapter.createJsonUserInfo(user.idUser, \"\", \"\", \"\", \"\", \"\", isAssignee, isOwner, [], []));\n      });\n    }\n    return usersAdapter.justAssignees(usersAssignee);\n  },\n\n  /**\r\n      * show the information of the creator case\r\n      * @param {string} ownerUserId guid user creator\r\n      */\n  showCreatorInformation: function showCreatorInformation(ownerUserId) {\n    var self = this;\n    var userCreator = self.usersInformation.find(function (user) {\n      return user.id == ownerUserId;\n    });\n    var userInfo = usersAdapter.createJsonUserInfo(\n    userCreator.id,\n    userCreator.name,\n    userCreator.username,\n    userCreator.picture ? \"data:image/png;base64,\" + userCreator.picture : undefined,\n    userCreator.email,\n    userCreator.name.getInitials(),\n    false,\n    true,\n    [],\n    []);\n\n    self.content.find(\".ui-bizagi-wp-project-plan-users .ui-bizagi-wp-project-users-creator-info\").userinformation(self, { user: userInfo });\n  },\n\n  /**\r\n      * UI\r\n      */\n  renderUserProfilesAndImages: function renderUserProfilesAndImages() {\n    var self = this;\n    $.each(self.usersMap, function (i, obj) {\n      var $li = $(\".ui-bizagi-wp-userlist li[data-iduser=\" + obj.id + \"]\", self.content);\n\n      if (obj.picture !== \"\") {\n        $li.find(\"img\").prop(\"src\", obj.picture);\n        $(\".bz-wp-avatar-label\", $li).hide();\n      } else\n      {\n        if (obj.name !== undefined) {\n          $(\".bz-wp-avatar-img\", $li).hide();\n          $(\".bz-wp-avatar-label\", $li).html(obj.name.getInitials());\n        } else\n        {\n          console.log(\"obj.name is undefined\");\n        }\n\n      }\n    });\n  },\n\n  /*\r\n      *  Get data for users\r\n      */\n  callGetDataUsers: function callGetDataUsers(csvguidUsers) {\n    var self = this,\n    params = {},\n    defer = $.Deferred();\n    params = {\n      usersGuids: csvguidUsers.join(),\n      width: 50,\n      height: 50 };\n\n    $.when(self.dataService.getUsersData(params)).always(function (response) {\n      self.usersInformation = response;\n      for (var i = 0, length = response.length; i < length; i += 1) {\n        if (typeof response[i].name === \"undefined\") {\n          bizagi.log(response[i] + \" Id Not Found\", response, \"error\");\n        } else {\n          if (self.usersMap[\"-\" + response[i].id + \"-\"]) {\n            self.usersMap[\"-\" + response[i].id + \"-\"].picture += response[i].picture ? \"data:image/png;base64,\" + response[i].picture : \"\";\n            self.usersMap[\"-\" + response[i].id + \"-\"].name = response[i].name || \"\";\n          } else\n          {\n            console.log(\"self.usersMap['-' + response[i].id + '-'] is undefined\");\n          }\n\n        }\n      }\n      self.getUsersAssignees();\n      defer.resolve();\n    });\n    return defer.promise();\n  },\n\n  /*\r\n     * validate if the activity is running\r\n     */\n  activityRunning: function activityRunning(activity) {\n    return activity.startDate !== null && activity.finishDate === null;\n  },\n\n  getUsersAssignees: function getUsersAssignees() {\n    var self = this;\n    for (var i = 0; i < self.usersInformation.length; i++) {\n      var res_user = self.getUserAssignee(self.params.plan.activities, self.usersInformation[i]);\n      if (res_user !== false) {\n        self.usersAssignees.push(res_user);\n      }\n    }\n\n  },\n\n  /**\r\n      * review if the user is assigned to some active activities and return this user, else return false\r\n      * @param {Array} activities all activities of this plan\r\n      * @param {User} user to review\r\n      */\n  getUserAssignee: function getUserAssignee(activities, user) {\n    var self = this;\n    var tasks = activities.filter(function (activity) {\n      return activity.userAssigned === user.id && self.activityRunning(activity);\n    }).map(function (a) {\n      return { \"name\": a.name };\n    });\n    if (tasks.length == 0) return false;\n    user.tasks = tasks;\n    var types = self.activitiesUsers.find(function (actUser) {\n      return actUser.idUser == user.id;\n    });\n    user.types = types === undefined ? [] : types.userType;\n\n    var userAssignees = usersAdapter.createJsonUserInfo(\n    user.id,\n    user.name,\n    user.username,\n    user.picture ? \"data:image/png;base64,\" + user.picture : undefined,\n    user.email,\n    user.name.getInitials(),\n    user.types.indexOf(\"Assigned\") > -1,\n    user.types.indexOf(\"owner\") > -1,\n    user.tasks,\n    []);\n\n    return userAssignees;\n  },\n\n  /*\r\n      *  Tooltips\r\n      */\n  initilizeTooltip: function initilizeTooltip() {\n    var self = this;\n\n    $(\".ui-bizagi-wp-userlist > li\", self.content).not(\".moreUsers\").on('mouseenter', '', function (ev) {\n      var $target = $(ev.target);\n      var id_userSelected = $target.closest(\"[data-iduser]\").attr('data-iduser');\n      var user = self.usersInformation.find(function (user) {\n        return user.id == id_userSelected;\n      });\n      var activities = [];\n\n      if (user.tasks)\n      user.tasks.map(function (task) {\n        activities.push(task.name);\n      });\n\n      var types = self.activitiesUsers.find(function (actUser) {\n        return actUser.idUser == id_userSelected;\n      });\n      user.types = types.userType;\n\n      user.owner = user.types.find(function (type) {\n        return type == \"owner\";\n      });\n      user.isAssignee = user.types.find(function (type) {\n        return type == \"Assigned\";\n      });\n\n      var userParam = usersAdapter.createJsonUserInfo(user.id, user.name, user.username, user.picture ? \"data:image/png;base64,\" + user.picture : undefined, user.email, user.name.getInitials(), user.isAssignee, user.owner, activities, []);\n      $target.parent().usertooltip(self, { target: $target, user: userParam });\n    });\n  },\n  addEventHandlersModal: function addEventHandlersModal() {\n    var self = this;\n    $(\".moreUsers\").click(function (event) {\n      event.preventDefault();\n      event.stopPropagation();\n      var usersAssignees = self.usersAssignees || [];\n      self.globalHandlersService.publish(\"showDialogWidget\", {\n        widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_USERS_MODAL,\n        closeVisible: true,\n        data: usersAssignees,\n        maximize: true,\n        modalParameters: {\n          title: bizagi.localization.getResource(\"workportal-project-users-title\") + \" (\" + usersAssignees.length + \")\",\n          width: 790,\n          height: 526,\n          refreshInbox: false } });\n\n\n    });\n  } });\n\n\n\n\nbizagi.injector.register(\"bizagi.workportal.widgets.project.plan.users\", [\"workportalFacade\", \"dataService\", bizagi.workportal.widgets.project.plan.users], true);"]}