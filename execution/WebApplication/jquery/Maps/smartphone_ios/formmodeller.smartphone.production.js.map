{"version":3,"sources":["jquery/editor/component/renderingview/js/smartphone/bizagi.hacks.rendering.smartphone.form.js","jquery/editor/component/renderingview/js/base/bizagi.hacks.rendering.element.js","jquery/editor/component/renderingview/js/smartphone/bizagi.hacks.rendering.smartphone.container.js","jquery/editor/component/renderingview/js/smartphone/bizagi.hacks.rendering.smartphone.render.js","jquery/editor/component/renderingview/js/smartphone/bizagi.hacks.rendering.smartphone.group.js","jquery/editor/component/renderingview/js/smartphone/bizagi.hacks.rendering.smartphone.section.js","jquery/editor/component/renderingview/js/smartphone/bizagi.hacks.rendering.smartphone.contentPanel.js","jquery/editor/component/renderingview/js/smartphone/bizagi.hacks.rendering.smartphone.tab.js","jquery/editor/component/renderingview/js/smartphone/bizagi.hacks.rendering.smartphone.tabitem.js","jquery/editor/component/renderingview/js/smartphone/bizagi.hacks.rendering.smartphone.search.js","jquery/editor/component/renderingview/js/smartphone/bizagi.hacks.rendering.smartphone.image.js","jquery/editor/component/renderingview/js/smartphone/bizagi.hacks.rendering.smartphone.grid.js","jquery/editor/component/renderingview/js/smartphone/bizagi.hacks.rendering.smartphone.collectionnavigator.js","jquery/editor/component/renderingview/js/smartphone/bizagi.hacks.rendering.smartphone.nestedform.js","jquery/editor/component/renderingview/js/smartphone/bizagi.hacks.rendering.smartphone.date.js","jquery/editor/component/renderingview/js/smartphone/bizagi.hacks.rendering.smartphone.widget.js"],"names":["_typeof","obj","Symbol","iterator","constructor","prototype","bizagi","rendering","element","original","$","extend","isContainedInNestedForm","this","parent","properties","type","isContainedInCollectionNavigator","getFormContainer","isNavigationForm","isContainedInGrid","undefined","column","isReadOnlyForm","isReadOnly","findElement","guid","selectElement","unselectElement","smartphone","container","postRenderContainer","self","apply","arguments","getFormType","click","ev","onClickCanvas","hasClass","sortable","addClass","addDraggableClassToContainer","isContainerSortable","data","display","displayName","form","modeler","params","reviewMode","setTimeout","configureSortablePlugin","isClickEventAllowed","mousedown","onMouseDown","onClick","messageValidation","showValidationMessage","hasChildren","children","length","selectElementByGuid","guids","i","l","foundElement","IsOnClickEvent","disableSortablePlugin","position","offset","width","outerWidth","height","outerHeight","triggerGlobalHandler","removeClass","mainPanel","formModelerSelector","bind","args","onSortStart","onSortFinish","onScrollingForm","ui","currentDragSource","getDragSource","item","items","revert","connectWith","distance","cursorAt","top","left","placeholder","delay","cancel","getMode","containment","helper","event","$template","sortableHelper","$container","start","stop","beforeStop","window","x3","disableSelection","loadHelperTemplate","setConnectWith","classConnect","isContainerDraggable","$containerPanel","each","$child","append","mouseenter","mouseleave","normalizeType","includes","isElementSortAllowed","mode","sortableElement","helperTemplate","toLowerCase","id","caption","icon","mainContainer","tmpl","wrapperMainScroll","appendTo","css","zIndex","widthTotal","parseFloat","eq","when","templateService","getTemplate","concat","pipe","result","toolbar","xpathNavigator","layout","parents","first","changeVisibility","argument","visible","util","parseBoolean","index","sourceContainer","$mainPanel","sortContainerTimeout","finalPosition","not","targetContainer","initialPosition","source","stopImmediatePropagation","button","ctrlIsPressed","x","clientX","y","clientY","preventDefault","stopPropagation","replace","messages","message","split","setValidationMessage","getContainerMessage","containerMessage","next","uniqueId","$message","attr","text","$form","localization","getResource","removeAttr","allowButtons","remove","messageElement","createMessageValidationElement","prepend","resource","mainElement","boundingClient","getBoundingClientRect","clientTopY","clientButtonY","bottom","isInTop","Math","abs","factor","scrollTop","scrollHeight","offsetHeight","delta","render","postRenderElement","configureLayoutElement","setMouseDownEvent","renderSearch","labelElement","getLabelGrid","getLabel","onRenderClick","dblclick","onLabelDoubleClick","resetStyle","configureDroppablePlugin","configureDraggablePlugin","find","onRemoveElement","setDeleteLayoutItem","hoverElement","hoverRestoreElement","closest","hover","detach","draggable","opacity","droppable","hoverClass","tolerance","activeClass","greedy","drop","activate","show","deactivate","hide","on","onDrop","el","colorText","backgroundColor","options","isInternal","isColumn","e","document","activeElement","is","trigger","presenter","editor","component","editableLabel","label","value","subscribe","showElementLabelEditor","$sourceElement","$helperElement","helperData","xpathValue","utilities","buildComplexXpath","xpath","contextScope","isScopeAttribute","guidRelatedEntity","property","renderType","nodeSubtype","sourceGuid","isLayoutElement","columns","postRender","group","$content","header","isInNestedform","lastElementInserted","section","$section","$header","overflow","accept","dropRender","originalEvent","isObject","contentPanel","$panel","done","getElement","adjustEditLabel","background-color","border-radius","margin-left","right","tab","$tab","$addButton","$offsetLeft","$offsetRigth","$tabContainer","wrap","before","after","info","currentTarget","updatePositions","updateErrorPositions","htmlTabELement","scrollLeft","tabItem","$tabHeader","setTabHeader","axis","sortStart","sortFinish","removeSortableClass","idx","getActiveTab","addSortableClass","forEach","$htmlTabELement","get","scrollWidth","clientWidth","$currentTabItem","isEditableLabelActive","editDisplayName","redraw","tabHeader","editableLabelPresenter","measureString","search","advancedSearch","image","control","getControl","containerType","thumbnail","widthWrapper","containerHeight","totalImagesInSameContainer","containerChildsSize","getChildreCount","containerChildsHeightSum","getChildrenSumHeight","countByRenderTypeWithParams","changeImageSize","imageWidth","imageHeight","executeTriggerHandler","widthValue","heightValue","slice","grid","collectionnavigator","isRendered","canvas","navigationform","nestedForm","configureDesignView","title","formDisplayName","date","setDisplayValue","dateControl","getDateControl","inputPlaceholder","valueFormat","color","nameNewClass","fullNewClass","loadStyle","strikethru","underline","basicUserField","getEditableControl","$control","input","collectData","renderValues","getDisplayValue","getReadonlyControl"],"mappings":"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","sourcesContent":["function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);}\n/*\r\n                                                                                                                                                                                                                                                                                                                                                                               *   @tittle: Bizagi FormModeler Editor Hacks Rendering Form\r\n                                                                                                                                                                                                                                                                                                                                                                               *   @authors: UI Forms Team\r\n                                                                                                                                                                                                                                                                                                                                                                               *   @Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                               *   -   This script will define basic stuff for enable the rendering Form\r\n                                                                                                                                                                                                                                                                                                                                                                               *\t\tin the formModeler (delete div button container)\r\n                                                                                                                                                                                                                                                                                                                                                                               */\n\n\nbizagi.rendering.smartphone.form.original = $.extend(true, {}, bizagi.rendering.smartphone.form.prototype);\n$.extend(bizagi.rendering.smartphone.form.prototype, {\n  /*\r\n                                                        *   Renders the current container\r\n                                                        *   Removes buttons from original rendering\r\n                                                        */\n  postRenderContainer: function postRenderContainer(form) {\n    var self = this;\n    var $form = form;\n\n    self.children.length === 0 ? $form.attr(\"drophere\", bizagi.localization.getResource(\"formmodeler-component-editor-layout-drophere-containers\")) :\n    $form.removeAttr(\"drophere\");\n\n    // Call original rendering\n    bizagi.rendering.smartphone.form.original.postRenderContainer.apply(this, arguments);\n\n\n    // Remove button container\n    var allowButtons = _typeof(self.params.allowButtons) !== undefined ? self.params.allowButtons : false;\n    if (!allowButtons) {\n      $(\".ui-bizagi-button-container\", form).remove();\n    }\n\n    if (self.properties.messageValidation && self.properties.messageValidation.length > 0) {\n      var messageElement = self.createMessageValidationElement(self.properties.messageValidation);\n      form.prepend(messageElement);\n    }\n\n    return form;\n  },\n\n  createMessageValidationElement: function createMessageValidationElement(message) {\n    var self = this;\n    var resource = bizagi.localization.getResource(\"formmodeler-validations-form\");\n\n    var messageElement = $('<div class=\"ui-message-validation\"/>');\n    $('<span>' + resource + '<i class=\"biz-ico bz-studio bz-warning-red_16x16_standard\" title=\"' + message + '\"></i></span>').appendTo(messageElement);\n    $(messageElement, \"div\").click(function () {\n      self.triggerGlobalHandler(\"showPropertiesForm\");\n    });\n\n    return messageElement;\n  },\n\n\n  /*\r\n     *   Manages scrolling  event\r\n     */\n  onScrollingForm: function onScrollingForm($mainPanel, ev) {\n    var mainElement = $mainPanel[0];\n    var boundingClient = mainElement.getBoundingClientRect();\n    var clientTopY = boundingClient.top;\n    var clientButtonY = boundingClient.bottom;\n\n    function isInTop() {\n      return Math.abs(ev.clientY - clientTopY) <= 20;\n    }\n\n    function isInBottom() {\n      return Math.abs(clientButtonY - ev.clientY) <= 30;\n    }\n\n    function move() {\n      var factor = isInTop() ? -1 : 1;\n      var scrollTop = $mainPanel.scrollTop();\n\n      if (factor === 1) {\n        if (scrollTop > mainElement.scrollHeight - mainElement.offsetHeight) {\n          return;\n        }\n      }\n\n      var delta = scrollTop + 40 * factor;\n      $mainPanel.scrollTop(delta);\n    }\n\n    // Top border\n    if (isInTop() || isInBottom()) {\n      setTimeout(move, 100);\n    }\n  } });","\n/*\r\n*   @tittle: BizAgi FormModeler Editor Hacks Rendering Render\r\n*   @authors: Alexander Mejia\r\n\t@date: 06-mar-12\r\n*   @Comments:\r\n*   -   This script will define basic stuff for enable the rendering render\r\n*\t\tin the formModeler\r\n*/\n\nbizagi.rendering.element.original = $.extend(true, {}, bizagi.rendering.element.prototype);\n$.extend(bizagi.rendering.element.prototype, {\n  /*\r\n                                               *   Check if the current element is inside a nested form\r\n                                               */\n  isContainedInNestedForm: function isContainedInNestedForm() {\n    var self = this;\n\n    // If the element has no parent, we are in the root element\n    if (!self.parent) return false;\n\n    // If the parent is nested form, this element is contained in a nested form\n    if (self.parent.properties.type === \"nestedForm\") return true;\n\n    // If the parent is collectionnavigator, this element is contained in a collectionnavigator control\n    if (self.parent.properties.type === \"collectionnavigator\") return true;\n\n    // If the element has a parent, then check in parent recursively\n    return self.parent.isContainedInNestedForm();\n  },\n\n\n  /*\r\n     *   Check if the current element is inside a collection navigator\r\n     */\n  isContainedInCollectionNavigator: function isContainedInCollectionNavigator() {\n    var self = this;\n\n    var form = self.getFormContainer();\n    var properties = form.properties;\n\n    return properties.isNavigationForm || false;\n  },\n\n  /*\r\n     * Returns true if the element is a column of a grid \r\n     */\n  isContainedInGrid: function isContainedInGrid() {\n    var self = this,\n    column = self.column;\n\n    return column != undefined;\n\n  },\n\n\n  /*\r\n     * This method returns true if the current form is read only\r\n     */\n  isReadOnlyForm: function isReadOnlyForm() {\n    var self = this;\n\n    var form = self.getFormContainer() || {};\n    var properties = form.properties || {};\n    if (properties.isReadOnly) {\n      return true;\n    }\n\n    return false;\n  },\n\n  /*\r\n     *   Finds an element by guid\r\n     */\n  findElement: function findElement(guid) {\n    var self = this;\n    if (!guid) {return null;}\n\n    if (self.properties.guid === guid) {\n      // Element found\n      return this;\n    }\n\n    // Element not found\n    return null;\n  },\n\n  /*\r\n     *  Selects the current element\r\n     */\n  selectElement: function selectElement() {},\n\n  /*\r\n                                              *  Un-selects the current element\r\n                                              */\n  unselectElement: function unselectElement() {} });","/*\r\n*   @tittle: BizAgi FormModeler Editor Hacks Rendering Container\r\n*   @authors: David Montoya\r\n\t@date: 02-mar-12\r\n*   @Comments:\r\n*   -   This script will define basic stuff for enable the rendering Container\r\n*\t\tin the formModeler\r\n*/\n\nbizagi.rendering.smartphone.container.original = $.extend(true, {}, bizagi.rendering.smartphone.container.prototype);\n$.extend(bizagi.rendering.smartphone.container.prototype, {\n  /*\r\n                                                            *   Renders the current container\r\n                                                            *   Also adds sortable behaviour\r\n                                                            */\n  postRenderContainer: function postRenderContainer(container) {\n    var self = this;\n\n    // Call original post-render\n    bizagi.rendering.smartphone.container.original.postRenderContainer.apply(this, arguments);\n\n    // If the current form is readonly return;\n    if (self.isReadOnlyForm()) {\n      return container;\n    }\n\n    if (self.getFormType() == 'template') {\n      if (self.properties.type == 'template') {\n        container.click(function (ev) {\n          self.onClickCanvas(ev);\n        });\n      }\n\n      return container;\n    }\n\n    // Configure sortable\n    if (container.hasClass('ui-sortable')) {container.sortable('destroy');}\n    container.addClass(\"ui-bizagi-itemfordrag\");\n    self.addDraggableClassToContainer();\n\n    if (self.isContainerSortable()) {\n\n      // Populate element data \n      container.data({\n        guid: self.properties.guid,\n        display: self.properties.displayName,\n        type: self.properties.type });\n\n\n      if (!bizagi.form.modeler.params.reviewMode) {\n        // Configure sortable plugin\n        setTimeout(function () {\n          self.configureSortablePlugin(container);\n        }, 100);\n      }\n    }\n\n    // Process clicks\n    if (self.isClickEventAllowed()) {\n      if (self.properties.type !== undefined &&\n      self.properties.type !== \"searchForm\" &&\n      self.properties.type !== \"form\" &&\n      self.properties.type !== \"queryForm\") {\n        container.mousedown(function (ev) {self.onMouseDown(ev);});\n        container.click(function (ev) {\n          self.onClick(ev);\n        });\n      } else {\n        container.click(function (ev) {\n          self.onClickCanvas(ev);\n        });\n      }\n    }\n\n\n    if (self.properties.messageValidation) {\n      self.showValidationMessage(self.properties.messageValidation);\n    }\n\n    return container;\n  },\n\n  /*\r\n     * Return true if the container isn't empty\r\n     */\n  hasChildren: function hasChildren() {\n    return this.children.length > 0;\n  },\n\n  /*\r\n     *   Selects an element in order to keep consistency between renderings\r\n     */\n  selectElementByGuid: function selectElementByGuid(guids) {\n    var self = this;\n\n    for (var i = 0, l = guids.length; i < l; i++) {\n      var guid = guids[i];\n      var foundElement = self.findElement(guid);\n      if (foundElement) {\n        // If the element has been found, then select that element\n        foundElement.selectElement({ IsOnClickEvent: false });\n      }\n    }\n  },\n\n  /*\r\n     *   Finds an element by guid\r\n     */\n  findElement: function findElement(guid) {\n    var self = this;\n    if (!guid) {return null;}\n\n    if (self.properties.guid === guid) {\n      // Element found\n      return this;\n    } else {\n      // Find in children\n      for (var i = 0; i < self.children.length; i++) {\n        var foundElement = self.children[i].findElement(guid);\n        if (foundElement) return foundElement;\n      }\n    }\n\n    // Element not found\n    return null;\n  },\n\n  /*\r\n     *   Disable sortable plugin\r\n     */\n  disableSortablePlugin: function disableSortablePlugin() {\n    var self = this;\n\n    if (self.container && self.container.hasClass('ui-sortable')) {\n      if (self.container.data()[\"ui-sortable\"]) {\n        self.container.sortable('destroy');\n      }\n    }\n\n    for (var i = 0, l = self.children.length; i < l; i = i + 1) {\n      if (self.children[i].container) {\n        self.children[i].disableSortablePlugin();\n      }\n    }\n  },\n\n  /*\r\n     *  Selects the current element\r\n     */\n  selectElement: function selectElement(params) {\n    var self = this;\n    var container = self.container;\n\n    // Add selected class\n    container.addClass(\"ui-bizagi-container-selected\");\n\n    // Get current element boundaries for select element event\n    var position = container.offset();\n    $.extend(position, {\n      width: container.outerWidth(),\n      height: container.outerHeight() });\n\n\n    // Trigger select element handler\n    self.triggerGlobalHandler(\"selectelement\", $.extend(params, { position: position, guid: self.properties.guid, element: container, type: self.properties.type }));\n  },\n\n  /*\r\n     *  Un-selects the current element\r\n     */\n  unselectElement: function unselectElement(params) {\n    var self = this;\n    var container = self.container;\n\n    container.removeClass(\"ui-bizagi-container-selected\");\n\n    if (params) {\n      $.extend(params, { guid: self.properties.guid });\n    }\n\n    // Trigger unselect element handler\n    self.triggerGlobalHandler(\"unselectelement\", params);\n  },\n\n  /*\r\n     *   \r\n     */\n  configureSortablePlugin: function configureSortablePlugin(container) {\n    var self = this;\n    var mainPanel = self.triggerGlobalHandler(\"getMainPanel\", {});\n    var viewID = self.triggerGlobalHandler(\"getViewID\");\n\n    var formModelerSelector = 'form-modeler[id=\"' + viewID + '\"]';\n\n    // Decorate with class to allow sortable connections\n    container.addClass(\"ui-bizagi-container-connectedSortable\");\n\n    // Define handlers\n    container.bind(\"sortstart\", function (ev, args) {self.onSortStart(args);});\n    container.bind(\"sortstop\", function (ev, args) {self.onSortFinish(args);});\n    container.bind(\"sort\", function (ev) {self.onScrollingForm(mainPanel, ev);});\n    container.bind(\"sortactivate\", function (ev, ui) {\n      self.currentDragSource = self.getDragSource(ui.item);\n    });\n\n    var items = \"> .ui-bizagi-draggable-item\";\n\n    // Apply sortable plugin\n    container.sortable({\n      items: items,\n      revert: false,\n      connectWith: formModelerSelector + \" .ui-bizagi-container-connectedSortable:not(.ui-sortable-helper)\",\n      distance: 10,\n      cursorAt: { top: 0, left: 0 },\n      placeholder: \"ui-bizagi-placeholder\",\n      delay: 10,\n      cancel: self.getMode() === \"layout\" ? \".bz-form-item, .ui-bizagi-input-editable\" : \".ui-bizagi-input-editable, .ui-bizagi-grid-cell\",\n      containment: mainPanel,\n\n      helper: function helper(event, ui) {\n        var $template = self.sortableHelper(ui);\n        var $container = $(this);\n        setTimeout(function () {\n          $container.sortable(\"refreshPositions\");\n        }, 10);\n\n        return $template;\n      },\n      start: function start() {\n        mainPanel && mainPanel.addClass('ui-start-drag');\n      },\n      stop: function stop() {\n        mainPanel && mainPanel.removeClass('ui-start-drag');\n      },\n      beforeStop: function beforeStop() {\n        window.x3 = $('#mtool-container-helper');\n      } }).\n    disableSelection();\n\n    // Load helper template\n    self.loadHelperTemplate();\n  },\n\n  /*\r\n     *   Connects to another sortable container\r\n     */\n  setConnectWith: function setConnectWith(parent, guid) {\n    var self = this,\n    classConnect;\n\n    if (typeof parent === \"undefined\") {\n      return;\n    }\n\n    classConnect = \".ui-bizagi-container-connectedSortable\";\n    classConnect = classConnect + \"[id!= \" + guid + \"]\";\n    if (parent.container && parent.container.hasClass(\"ui-sortable\")) {\n      if (parent.container.data()[\"ui-sortable\"]) {\n        parent.container.sortable(\"option\", \"connectWith\", classConnect);\n      }\n    }\n\n\n    self.setConnectWith(parent.parent, guid);\n  },\n\n  /*\r\n     *   Add draggable class, and styles\r\n     */\n  addDraggableClassToContainer: function addDraggableClassToContainer() {\n    var self = this;\n\n    // Check if the container is draggable or not\n    if (self.isContainerDraggable()) {\n      // Add container draggable styles\n      self.container.addClass(\"ui-bizagi-draggable-item\");\n      self.container.addClass('ui-dashed-layout');\n      var conteinerType = self.properties.type;\n\n      if (conteinerType === \"horizontal\") {\n        var $containerPanel = $('> .bz-layout-col', self.container);\n\n        $.each($containerPanel, function () {\n          var $child = $(this);\n          if ($child.children().length === 0) {$child.append('<div class=\"children\"></div>');}\n        });\n\n      }\n\n      if (self.container.hasClass('ui-dashed-layout')) {\n        self.container.data('display', 'Layout');\n        self.container.data('type', 'layout');\n      }\n\n\n      // Add hovering style\n      $('> .ui-bizagi-container-panel', self.container).mouseenter(function () {$(this).addClass('ui-col-hover');}).mouseleave(function () {$(this).removeClass('ui-col-hover');});\n    }\n  },\n\n  /*\r\n     *   Check if the container can be draggable or not\r\n     */\n  isContainerDraggable: function isContainerDraggable() {\n    var self = this;\n\n    // Don't allow draggable when the item is inside a nested form\n    if (self.isContainedInNestedForm() || self.isContainedInCollectionNavigator()) return false;\n\n    // Allow draggable in the following containers\n    var type = self.properties.type || \"form\";\n    type = self.normalizeType(type);\n\n    return [\"group\", \"section\", \"nestedForm\", \"tab\", \"horizontal\", \"contentPanel\", \"collectionnavigator\"].includes(type);\n  },\n\n  /*\r\n     *   Check if the container can be sortable or not\r\n     */\n  isContainerSortable: function isContainerSortable() {\n    var self = this;\n\n    // Don't allow sortable when the item is inside a nested form\n    if (self.isContainedInNestedForm() || self.isContainedInCollectionNavigator()) return false;\n\n    // Allow sortable in the following containers\n    var type = self.properties.type || \"form\";\n    type = self.normalizeType(type);\n\n    return [\"form\", \"group\", \"panel\", \"tabItem\", \"queryForm\", \"searchForm\", \"contentPanel\", \"offlineForm\", \"adhocForm\"].includes(type);\n\n  },\n\n  /*\r\n     *   Filter sortable depending current execution mode\r\n     */\n  isElementSortAllowed: function isElementSortAllowed(item) {\n    var self = this,\n    mode = self.getMode();\n\n    if (mode === \"layout\") {\n      if (item.hasClass('bz-form-item')) {return false;}\n    }\n\n    return true;\n  },\n\n  /*\r\n     *   Check if this container can be clicked or not depending the execution mode\r\n     */\n  isClickEventAllowed: function isClickEventAllowed() {\n    var self = this,\n    mode = self.getMode(),\n    result = true;\n\n    // Don't allow clicks when the item is inside a nested form\n    if (self.isContainedInNestedForm() || self.isContainedInCollectionNavigator()) return false;\n\n    var type = self.properties.type || \"form\";\n    type = self.normalizeType(type);\n    if (mode == \"design\") {\n      // Check in design mode\n      //if (type == \"form\" || type == \"horizontal\" || type == \"panel\" || type == \"searchForm\") { return false; }\n      if (type == \"panel\") {return false;}\n\n    } else if (mode === \"layout\") {\n      // Check in layout mode\n      if ([\"form\", \"group\", \"section\", \"panel\", \"tab\", \"tabItem\", \"contentPanel\"].includes(type)) {return false;}\n    }\n\n    return result;\n  },\n\n  /*\r\n     *   Draws the sortable helper when draggin a container\r\n     */\n  sortableHelper: function sortableHelper(sortableElement) {\n    var self = this;\n\n    // Makes sure the helper template has been loaded\n    if (!self.helperTemplate) return null;\n\n    // Decorate current dragging element with a class\n    sortableElement.addClass('ui-dragging');\n\n    // Extract data from element\n    var data = sortableElement.data();\n    var type = data.type ? data.type.toLowerCase() : \"render\";\n    var id = data.guid;\n    var caption = data.display;\n\n    var icon = self.triggerGlobalHandler(\"getControlIcon\", { type: type, id: id });\n    var mainContainer = self.triggerGlobalHandler(\"getMainContainer\", {});\n\n\n    if (!caption || caption === '') {\n      caption = type;\n    }\n\n    // Draw the helper\n    var element = $.tmpl(self.helperTemplate, { id: type, caption: caption, icon: icon });\n    var wrapperMainScroll = $('.wrapper-main-scroll', mainContainer);\n    var sortableHelper = element.appendTo(wrapperMainScroll).css({ 'zIndex': 900 });\n\n    // Adjust size\n    var widthLabel = parseFloat($('label', sortableHelper).width());\n    var widthIcon = parseFloat($('.biz-ico', sortableHelper).eq(0).width());\n    var widthTotal = widthLabel + widthIcon + 40 + 'px';\n    sortableHelper.css('width', widthTotal);\n\n    return sortableHelper;\n  },\n\n  /*\r\n     *   Loads the helper template\r\n     */\n  loadHelperTemplate: function loadHelperTemplate() {\n    var self = this;\n\n    // Load helper template and return deferred\n    return $.when(\n    bizagi.templateService.getTemplate(bizagi.getTemplate(\"bizagi.editor.component.renderingview\").concat(\"#bizagi-render-drag-helper\"))).\n    pipe(function (tmpl) {\n      self.helperTemplate = tmpl;\n      return self.helperTemplate;\n    });\n  },\n\n  /*\r\n     *   Evaluates the drag source based on the item\r\n     */\n  getDragSource: function getDragSource(item) {\n    var result = {\n      container: false,\n      toolbar: false,\n      xpathNavigator: false,\n      layout: false,\n      data: null };\n\n\n    if ($(item).hasClass(\"bz-form-item\") || $(item).hasClass(\"bz-container\")) {\n      // Render source\n      result.container = true;\n      result.data = { guid: $(item).parents(\"bz-container\").first().data(\"guid\") };\n\n    } else if ($(item).hasClass(\"mtool-item\")) {\n      // Controls navigator source\n      result.toolbar = true;\n      result.data = $(item).data(\"render\");\n\n    } else if ($(item).hasClass(\"bizagi_editor_xpathnavigator_data\")) {\n      // Xpath navigator source\n      result.xpathNavigator = true;\n      result.data = $(item).data();\n\n    } else if ($(item).hasClass(\"bz-fm-layout-navigator-item\")) {\n      // layout navigator source\n      result.layout = true;\n      result.data = $(item).data(\"id\");\n    }\n\n    return result;\n  },\n\n  /* \r\n     *   Hides / Show container \r\n     */\n  changeVisibility: function changeVisibility(argument) {\n    var self = this;\n    var properties = self.properties;\n\n    // Store in properties\n    properties.visible = bizagi.util.parseBoolean(argument);\n\n    // Hide - show the render\n    if (properties.visible) {\n      $(self.container).removeClass(\"ui-state-disabled\");\n\n    } else {\n      $(self.container).addClass(\"ui-state-disabled\");\n    }\n  },\n\n  /*\r\n     *   EVENT HANDLERS\r\n     */\n\n  /*\r\n        *   Manages sort start event\r\n        */\n  onSortStart: function onSortStart(ui) {\n    var self = this;\n\n    // Save drag position\n    var index = $(ui.item).parent().children(\".ui-bizagi-itemfordrag\").index(ui.item);\n    ui.item.data(\"start-position\", index);\n\n    // Save parent source        \n    var sourceContainer = $(ui.item).parents(\".bz-container\").first().data(\"guid\") ||\n    self.triggerGlobalHandler(\"getparentid\", { guid: $(ui.item).data(\"guid\") });\n\n    ui.item.data(\"sourceContainer\", sourceContainer);\n\n    if (index >= 0) {\n      // Trigger event to callers\n      self.triggerGlobalHandler(\"sortstart\");\n    }\n  },\n\n  onScrollingForm: function onScrollingForm($mainPanel, ev) {\n\n  },\n\n  /*\r\n     *   Manages sort finish event\r\n     */\n  onSortFinish: function onSortFinish(ui) {\n    var self = this;\n\n\n    // Set a timer to avoid multiple drop bug at the same time\n    if (bizagi.sortContainerTimeout != null) {\n      return;\n    }\n    bizagi.sortContainerTimeout = setTimeout(function () {\n      bizagi.sortContainerTimeout = null;\n    }, 100);\n\n\n    var finalPosition = $(ui.item).parent().children(\".ui-bizagi-itemfordrag\").not(\".ui-sortable-placeholder\").index(ui.item),\n    targetContainer = $(ui.item).parents(\".bz-container\").first().data(\"guid\") || self.triggerGlobalHandler(\"getparentid\", { guid: $(ui.item).data(\"guid\") }),\n    initialPosition = ui.item.data(\"start-position\"),\n    sourceContainer = ui.item.data(\"sourceContainer\");\n\n    // Check if sort finish operation is available\n    if (self.isElementSortAllowed($(ui.item)) == false) {\n      self.container.sortable('cancel');\n      return false;\n    };\n\n    if (finalPosition >= 0) {\n      // Trigger sort finish event\n      self.triggerGlobalHandler(\"sortfinish\", {\n        source: self.currentDragSource,\n        initialPosition: initialPosition,\n        finalPosition: finalPosition,\n        sourceContainer: sourceContainer,\n        targetContainer: targetContainer });\n\n    }\n\n    return true;\n  },\n\n  onClickCanvas: function onClickCanvas(ev) {\n    var self = this;\n\n    // Cancel bubble\n    ev.stopImmediatePropagation();\n\n\n    $(\".bz-form-item\").removeClass(\"ui-state-active\");\n    $(\".ui-bizagi-grid-cell\").removeClass(\"ui-state-active\");\n    $(\".bz-container\").removeClass(\"ui-bizagi-container-selected\");\n    $(\".bz-button--container\").removeClass(\"bz-state-active\");\n    self.unselectElement();\n\n    if (ev.button == 0 || ev.button == 1) {\n      self.triggerGlobalHandler(\"selectcontainerform\", {});\n    }\n  },\n\n\n  /*\r\n     *   Manages container click\r\n     */\n  onClick: function onClick(ev) {\n    var self = this,\n    container = self.container;\n\n    // Cancel bubble\n    ev.stopImmediatePropagation();\n\n    var isCtrlPressed = self.triggerGlobalHandler(\"checkCtrlKey\", {});\n    if (isCtrlPressed) {\n      // Toggle selection\n      if (container.hasClass(\"ui-bizagi-container-selected\")) {\n        self.unselectElement({ ctrlIsPressed: true });\n      } else {\n        self.selectElement({\n          IsOnClickEvent: true,\n          ctrlIsPressed: true });\n\n      }\n    } else {\n      if (ev.button == 0 || ev.button == 1) {\n        // Remove selected style to any render\n        $(\".bz-form-item\").removeClass(\"ui-state-active\");\n        $(\".bz-container\").not(container).removeClass(\"ui-bizagi-container-selected\");\n        $(\".bz-button--container\").removeClass(\"bz-state-active\");\n        // Toggle selection\n        if (container.hasClass(\"ui-bizagi-container-selected\")) {\n          self.unselectElement();\n        } else {\n          self.selectElement({ IsOnClickEvent: true });\n        }\n      }\n    }\n  },\n\n  /*\r\n     *   Manages mouse down event \r\n     */\n  onMouseDown: function onMouseDown(ev) {\n    var self = this;\n\n\n    if (ev.button == 0 || ev.button == 1) {\n      self.setConnectWith(self.parent, self.container.data(\"guid\"));\n\n    } else if (ev.button == 2) {\n      // Trigger element right click event\n      self.triggerGlobalHandler(\"elementrightclick\", { guid: self.properties.guid, position: { x: ev.clientX, y: ev.clientY } });\n\n      // Prevent default behaviour\n      ev.preventDefault();\n      ev.stopPropagation();\n      return false;\n    }\n\n  },\n\n  normalizeType: function normalizeType(type) {\n    return type.\n    replace(/smartphone/, '').\n    replace(/tablet/, '').\n    replace(/offline/, '');\n  },\n\n  /**\r\n      * Show validation messages\r\n      * @param messages\r\n      */\n  showValidationMessage: function showValidationMessage(messages) {\n    var self = this;\n    var message = messages.split('</br>')[0];\n    if (message) {self.setValidationMessage(message);}\n  },\n\n  getContainerMessage: function getContainerMessage() {\n    if (!this.containerMessage)\n    this.containerMessage = $(\".bz-container-message__text\", this.container.next(\"[data-parent=\" + this.properties.uniqueId + \"]\"));\n\n    return this.containerMessage;\n  },\n\n  setValidationMessage: function setValidationMessage(message) {\n    var self = this;\n\n    if (typeof this.container !== \"undefined\") {\n      var $message = self.getContainerMessage();\n\n      if (message && message.length > 0) {\n        message = message.replace(/<\\w+>([^<]*)<\\/\\w+>/g, \"$1\");\n\n        $message.attr(\"data-error\", message);\n        $message.text(message);\n        this.container.addClass(\"bz-container--error\");\n      } else {\n        $message.text(\"\");\n        this.container.removeClass(\"bz-container--error\");\n      }\n    }\n  } });","\n/*\r\n*   @tittle: BizAgi FormModeler Editor Hacks Rendering Render\r\n*   @authors: Alexander Mejia\r\n\t@date: 06-mar-12\r\n*   @Comments:\r\n*   -   This script will define basic stuff for enable the rendering render\r\n*\t\tin the formModeler\r\n*/\n\nbizagi.rendering.smartphone.render.original = $.extend(true, {}, bizagi.rendering.smartphone.render.prototype);\n$.extend(bizagi.rendering.smartphone.render.prototype, {\n\n  /*\r\n                                                         *   Renders the current element\r\n                                                         *   Also adds draggable behaviour, and selection handlers\r\n                                                         */\n  postRenderElement: function postRenderElement(element) {\n    var self = this,\n    properties = self.properties;\n\n    // Call original method\n    bizagi.rendering.smartphone.render.original.postRenderElement.apply(this, arguments);\n\n    // If the current form is readonly return;\n    if (self.isReadOnlyForm()) {\n      return element;\n    }\n\n    // Add guid to DOM\n    element.attr(\"guid\", self.properties.guid);\n\n    if (self.getFormType() == 'template') {\n      return self.configureLayoutElement(element);\n    }\n\n    // If the render is inside a nested form don't allow any events\n    if (!self.isContainedInNestedForm() && !self.isContainedInCollectionNavigator()) {\n\n      // Add mouse down handler\n      self.setMouseDownEvent(element);\n\n      // Add dragabble class\n      if (!self.isContainedInGrid()) {\n        element.addClass(\"ui-bizagi-draggable-item\");\n        element.addClass(\"ui-bizagi-itemfordrag\");\n      }\n\n      var renderSearch = $('.ui-bizagi-render-search', element);\n      if (renderSearch.length > 0) {\n        renderSearch.parent().addClass('ui-bizagi-display-as-search');\n      }\n\n      if (self.isClickEventAllowed()) {\n        var labelElement;\n        var type = self.properties.type || \"\";\n        type = type.replace('smartphone', '');\n\n        if (self.getMode() == \"design\" && type == \"grid\") {\n          labelElement = self.getLabelGrid();\n        } else {\n          labelElement = self.getLabel();\n        }\n\n        // Add click handlers\n        element.click(function (ev) {\n          self.onRenderClick(ev, element);\n        });\n        if (!bizagi.form.modeler.params.reviewMode) {\n          labelElement && labelElement.dblclick(function () {\n            self.onLabelDoubleClick(labelElement);\n          });\n        }\n      }\n    }\n\n    if (self.properties.messageValidation) {\n      self.showValidationMessage(self.properties.messageValidation);\n    }\n\n    element.data({\n      guid: self.properties.guid,\n      display: self.properties.displayName,\n      type: self.properties.type });\n\n\n    return self.resetStyle(element);\n  },\n\n\n  /*\r\n     * Set several options used in template mode\r\n     */\n  configureLayoutElement: function configureLayoutElement(element) {\n    var self = this;\n\n    self.configureDroppablePlugin(element);\n    self.configureDraggablePlugin(element);\n\n    // Add click handlers\n    element.click(function (ev) {\n      self.onRenderClick(ev, element);\n    });\n\n    element.dblclick(function () {\n      self.onLabelDoubleClick(element);\n    });\n\n    element.\n    find('.biz-template-editor-render-hide-control').\n    click(function (ev) {\n      self.onRemoveElement(ev, element);\n    });\n\n    self.setDeleteLayoutItem(element);\n\n    return element;\n  },\n\n  /*\r\n     * Enable handler to allow delete an repeteable item or o layout item\r\n     */\n  setDeleteLayoutItem: function setDeleteLayoutItem(element) {\n    var self = this,\n    type = self.properties.type,\n    hoverElement = $(\"<span class='biz-icon biz-tmpl-delete pull-right bz-studio bz-delete_16x16_standard'></span>\"),\n    hoverRestoreElement = $(\"<span class='biz-icon biz-tmpl-delete pull-right bz-studio bz-undo_16x16_black'></span>\"),\n    parent = element.closest('[id]');\n\n\n    // Wait to template is rendered\n    setTimeout(function () {\n      // If the element \n      if (parent.length == 0 && self.triggerGlobalHandler(\"isDeleteOptionAllowed\", { guid: self.properties.guid })) {\n        element.addClass('hover-applied');\n\n\n        element.hover(function () {\n          $(this).append(hoverRestoreElement);\n        }, function () {\n          $(this).find(\"span.biz-tmpl-delete\").detach();\n        });\n\n        (function () {\n          hoverRestoreElement.click(function () {\n            // Trigger element right click event\n            self.triggerGlobalHandler(\"restoreItem\", { guid: self.properties.guid });\n          });\n        })();\n      }\n      // if the elements is a repeater item\n      else {\n          if (parent.attr('id') == undefined) {return;}\n          if (parent.hasClass('hover-applied')) {return;}\n\n          parent.addClass('hover-applied');\n          parent.hover(function () {\n            $(this).append(hoverElement);\n          }, function () {\n            $(this).find(\"span.biz-tmpl-delete\").detach();\n          });\n\n          (function (parent) {\n            hoverElement.click(function () {\n              // Trigger element right click event\n              self.triggerGlobalHandler(\"deleteRepeaterItem\", { guid: parent.attr('id') });\n            });\n          })(parent);\n        }\n    }, 10);\n\n  },\n\n  /*\r\n     * Apply draggable plugin\r\n     */\n  configureDraggablePlugin: function configureDraggablePlugin(element) {\n    var self = this;\n\n    element.draggable({\n      helper: 'clone',\n      zIndex: 9999,\n      opacity: 0.75,\n      cursorAt: { left: 5 },\n      containment: 'document',\n      cancel: '.biz-template-editor-render-placeholder',\n      start: function start(event, ui) {\n        $(ui.helper).data('isLayoutElement', true);\n      } });\n\n  },\n\n\n  /*\r\n     * Apply droppable plugin\r\n     */\n  configureDroppablePlugin: function configureDroppablePlugin(element) {\n    var self = this;\n\n    element.droppable({\n      hoverClass: \"ui-state-highlight\",\n      tolerance: \"pointer\",\n      activeClass: 'ui-editor-highlight',\n      greedy: true,\n      drop: function drop(event, ui) {\n        $(this).addClass('ui-state-highlight');\n      },\n      activate: function activate() {\n        self.getFormContainer().\n        container.\n        find(\"[noShow='true']\").\n        show();\n      },\n      deactivate: function deactivate() {\n        self.getFormContainer().\n        container.\n        find(\"[noShow='true']\").\n        hide();\n      } });\n\n\n    element.on(\"drop\", function (ev, ui) {self.onDrop(ui);});\n  },\n\n\n  getLabelGrid: function getLabelGrid() {\n    return $(\".bz-mobile-grid__header-title\", this.element);\n  },\n\n  resetStyle: function resetStyle(el) {\n    var element = el,self = this;\n    var colorText = element.css('color');\n    var backgroundColor = element.css('background-color');\n\n    if (colorText == 'black') {element.css('color', '');}\n    if (backgroundColor == 'white') {element.css('background-color', '');}\n\n    return element;\n  },\n\n  /*\r\n     *  Selects the current element\r\n     */\n  selectElement: function selectElement(params) {\n    var self = this,options;\n    var properties = self.properties;\n\n    if (self.element) {\n      // Add selected class\n      self.element.addClass(\"ui-state-active\");\n\n      // Get current element boundaries for select element event\n      var position = self.element.offset();\n      $.extend(position, {\n        width: self.element.outerWidth(),\n        height: self.element.outerHeight() });\n\n\n      // Trigger select element handler\n      options = $.extend(params, {\n        position: position,\n        guid: self.properties.guid,\n        element: self.element,\n        type: self.properties.type,\n        isInternal: properties.isInternal });\n\n      self.triggerGlobalHandler(\"selectelement\", options);\n    }\n  },\n\n  /*\r\n     *  Un-selects the current element\r\n     */\n  unselectElement: function unselectElement(params) {\n    var self = this;\n\n    // Remove selected class\n    self.element.removeClass(\"ui-state-active\");\n\n    if (params) {\n      $.extend(params, { guid: self.properties.guid });\n    }\n\n    // Trigger unselect element handler\n    self.triggerGlobalHandler(\"unselectelement\", params);\n  },\n\n\n  /*\r\n     *   Check if this container can be clicked or not depending the execution mode\r\n     */\n  isClickEventAllowed: function isClickEventAllowed() {\n    var self = this;\n    var mode = self.getMode();\n\n    // If is design and not a column\n    if (mode === \"design\" && !(self.column || self.isColumn)) return true;\n    return false;\n  },\n\n\n\n  /*\r\n     *   Configure mouse down handler\r\n     */\n  setMouseDownEvent: function setMouseDownEvent(element) {\n    var self = this;\n\n\n    if (self.isClickEventAllowed()) {\n\n      // Add mouse down handler\n      element.bind('mousedown.contextmenu', function (e) {\n        if (e.button == 2) {\n          // Trigger element right click event\n          self.triggerGlobalHandler(\"elementrightclick\", { guid: self.properties.guid, position: { x: e.clientX, y: e.clientY } });\n\n          // Prevent default behaviour\n          e.preventDefault();\n          e.stopPropagation();\n          return false;\n        }\n\n        return true;\n      });\n    }\n  },\n\n  /*\r\n     *   Overrides visibility change to avoid hiding the element when not visible\r\n     */\n  changeVisibility: function changeVisibility(argument) {\n    var self = this,\n    properties = self.properties;\n\n    if (bizagi.util.parseBoolean(argument) == true) {\n      $(self.element).removeClass(\"ui-state-disabled\");\n    } else {\n      $(self.element).addClass(\"ui-state-disabled\");\n    }\n\n    // Update properties\n    properties.visible = argument;\n  },\n\n  /*\r\n     *   Show validation messages\r\n     */\n  showValidationMessage: function showValidationMessage(messages) {\n    var self = this;\n    var message = messages.split('</br>')[0];\n    if (message) {self.setValidationMessage(message);}\n  },\n\n  /*\r\n     *   Manages render clicks\r\n     */\n  onRenderClick: function onRenderClick(ev, element) {\n    var self = this;\n\n    // Stop bubbling and default behaviour\n    ev.stopPropagation();\n    ev.preventDefault();\n\n    // Enable / disable selected style\n    var isCtrlPressed = self.triggerGlobalHandler(\"checkCtrlKey\", {});\n    if (isCtrlPressed) {\n      // Toggle selection\n      if (element && element.hasClass(\"ui-state-active\")) {\n        self.unselectElement({ ctrlIsPressed: true });\n      } else {\n        // fix for SUITE-7498\n        if ($(document.activeElement).is(\"input\") && $(document.activeElement).closest(\".bizagi_editor_component_properties\").length > 0) {\n          $(document.activeElement).trigger(\"blur\");\n          $(\".bizagi_editor_component_properties\").hide();\n        }\n\n        self.selectElement({\n          IsOnClickEvent: true,\n          ctrlIsPressed: true });\n\n      }\n    } else {\n      if (ev.button == 0 || ev.button == 1) {\n        // Remove all render selections\n        $(\".bz-form-item\").not(element).removeClass(\"ui-state-active\");\n        $(\".ui-bizagi-grid-cell\").not(element).removeClass(\"ui-state-active\");\n        $(\".ui-bizagi-button\").not(element).removeClass(\"bz-state-active\");\n        $(\".bz-container\").removeClass(\"ui-bizagi-container-selected\");\n        $(\".ui-bizagi-render-layout\").not(element).removeClass(\"ui-state-active\");\n        $(\".bz-button--container\").not(element).removeClass(\"bz-state-active\");\n      }\n\n      // Toggle selection\n      if (element && element.hasClass(\"ui-state-active\")) {\n        self.unselectElement();\n      } else {\n        // fix for SUITE-7498\n        if ($(document.activeElement).is(\"input\") && $(document.activeElement).closest(\".bizagi_editor_component_properties\").length > 0) {\n          $(document.activeElement).trigger(\"blur\");\n          $(\".bizagi_editor_component_properties\").hide();\n        }\n\n        self.selectElement({ IsOnClickEvent: true });\n      }\n    }\n  },\n\n  /*\r\n     *   Manages label double click event\r\n     */\n  onLabelDoubleClick: function onLabelDoubleClick(labelElement) {\n    var self = this;\n\n    // In template context there are some elements (ex image) that can't change the label\n    if (self.triggerGlobalHandler(\"canChangeLabel\", { guid: self.properties.guid })) {\n\n      // Publish label edition event\n      self.triggerGlobalHandler(\"startlabeledition\");\n\n      // Create editable label component\n      var presenter = new bizagi.editor.component.editableLabel.presenter({\n        label: labelElement,\n        value: self.properties.displayName });\n\n\n      // Bind change event\n      presenter.subscribe(\"change\", function (ev, args) {\n        self.triggerGlobalHandler(\"changelabel\", { guid: self.properties.guid, value: args.value });\n      });\n\n      presenter.subscribe(\"finish\", function () {\n        self.triggerGlobalHandler(\"finishlabeledition\");\n      });\n\n      // Render label\n      presenter.render();\n    }\n  },\n\n  /*\r\n     *   Manages hide click event for layout elements\r\n     */\n  onRemoveElement: function onRemoveElement(ev, element) {\n    var self = this;\n\n    self.triggerGlobalHandler(\"hideElement\", { guid: self.properties.guid });\n  },\n\n  /*\r\n     *   Show the label editor and update the element\r\n     */\n  showElementLabelEditor: function showElementLabelEditor() {\n    var self = this;\n\n    if (!(self.element.find(\".ui-bizagi-container-input-editable > input.ui-bizagi-input-editable\").length > 0)) {\n      $('label', self.element).trigger('dblclick');\n    }\n  },\n\n  /*\r\n     *   Manages drop event\r\n     */\n  onDrop: function onDrop(ui) {\n    var self = this;\n\n    var $sourceElement = $(ui.draggable);\n    var $helperElement = $(ui.helper);\n    var data = $sourceElement.data();\n    var helperData = $helperElement.data();\n\n    var xpathValue = bizagi.editor.utilities.buildComplexXpath(data.xpath, data.contextScope, data.isScopeAttribute, data.guidRelatedEntity);\n\n    // Trigger sort finish event\n    self.triggerGlobalHandler(\"dropfinish\", {\n      guid: self.properties.guid,\n      property: 'xpath',\n      value: xpathValue,\n      renderType: data.nodeSubtype,\n      sourceGuid: helperData && helperData.isLayoutElement ? $helperElement.attr('guid') : false });\n\n  } });\n\n\n\n\nbizagi.rendering.smartphone.columns.column.original = $.extend(true, {}, bizagi.rendering.smartphone.columns.column.prototype);\n$.extend(bizagi.rendering.smartphone.columns.column.prototype, {\n\n  postRender: function postRender(element) {\n    // Call original method\n    bizagi.rendering.smartphone.columns.column.original.postRender.apply(this, arguments);\n  } });","/**\r\n *   Name: Bizagi Form Modeler Group Extension\r\n *   Author: Alexander Mejia\r\n *   Comments:\r\n *   -   This script will redefine the group class to adjust to form modeler\r\n */\n\nbizagi.rendering.smartphone.group.original = $.extend(true, {}, bizagi.rendering.smartphone.group.prototype);\n$.extend(bizagi.rendering.smartphone.group.prototype, {\n\n  /**\r\n                                                         * Template method to implement in each device to customize each container after processed\r\n                                                         * @param {} group\r\n                                                         * @returns {}\r\n                                                         */\n  postRenderContainer: function postRenderContainer(group) {\n    var self = this;\n\n    // Call original method        \n    bizagi.rendering.smartphone.group.original.postRenderContainer.apply(this, arguments);\n\n    if (\n    !self.hasChildren() &&\n    !self.isContainedInNestedForm() &&\n    !self.isContainedInCollectionNavigator())\n    {\n      var $content = $('.bz-collapsible__content', group);\n      $content.append('<div class=\"children\"></div>');\n    }\n\n    // If the current form is readonly return;\n    if (self.isReadOnlyForm()) return;\n\n    // Bind header double click\n    var header = group.find(\".bz-collapsible__header\");\n\n    if (!self.isInNestedform()) {\n      header.dblclick(function () {\n        // Publish label edition event\n        self.triggerGlobalHandler(\"startlabeledition\");\n\n        // Create editable label component\n        var presenter =\n        new bizagi.editor.component.editableLabel.presenter({\n          label: header,\n          value: self.properties.displayName });\n\n\n        // Bind change event\n        presenter.subscribe(\"change\", function (ev, args) {\n          self.triggerGlobalHandler(\"changelabel\", { guid: self.properties.guid, value: args.value });\n        });\n\n        presenter.subscribe(\"finish\", function () {\n          self.triggerGlobalHandler(\"finishlabeledition\");\n        });\n\n        // Render label\n        presenter.render();\n      });\n    }\n\n    var guid = self.properties.guid;\n    setTimeout(function () {\n      var lastElementInserted = self.triggerGlobalHandler(\"getLastInsertedElement\");\n\n      if (guid == lastElementInserted) {\n        self.showElementLabelEditor();\n        self.triggerGlobalHandler(\"setLastInsertedElement\", null);\n      }\n    }, 0);\n  },\n\n  /**\r\n      * Disable sortable plugin\r\n      * @returns {}\r\n      */\n  disableSortablePlugin: function disableSortablePlugin() {\n    var self = this;\n    var container = self.container.find('> .bz-collapsible__content');\n\n    if (container && container.hasClass('ui-sortable')) {\n      if (container.data()[\"ui-sortable\"]) {\n        container.sortable('destroy');\n      }\n    }\n\n    for (var i = 0, l = self.children.length; i < l; i = i + 1) {\n      if (self.children[i].container) {\n        self.children[i].disableSortablePlugin();\n      }\n    }\n  },\n\n  /**\r\n      * Configure  sortable plugin\r\n      * @param {} container\r\n      * @returns {}\r\n      */\n  configureSortablePlugin: function configureSortablePlugin(container) {\n    container = container.find('> .bz-collapsible__content');\n\n    return bizagi.rendering.smartphone.group.original.configureSortablePlugin.apply(this, arguments);\n  },\n\n  /**\r\n      * Check is in Nestedform\r\n      * Fix for SUITE-6665\r\n      * @returns {}\r\n      */\n  isInNestedform: function isInNestedform() {\n    var self = this;\n    var parent = self.parent;\n    var properties = self.properties;\n    var result = false;\n\n    do {\n      if (properties.type === \"nestedForm\" || properties.type === \"collectionnavigator\") {\n        result = true;\n        break;\n      } else {\n        properties = parent.properties;\n        parent = parent.parent;\n      }\n    } while (parent !== undefined);\n\n    return result;\n  },\n\n  /**\r\n      * Show the label editor and update the element\r\n      * @returns {}\r\n      */\n  showElementLabelEditor: function showElementLabelEditor() {\n    var self = this;\n    var $header = self.container.find(\".bz-collapsible__header\");\n    $header.trigger('dblclick');\n  } });","/**\r\n *   Name: Bizagi Form Modeler Group Extension\r\n *   Author: Alexander Mejia\r\n *   Comments:\r\n *   -   This script will redefine the group class to adjust to form modeler\r\n */\n\nbizagi.rendering.smartphone.section.original = $.extend(true, {}, bizagi.rendering.smartphone.section.prototype);\n$.extend(bizagi.rendering.smartphone.section.prototype, {\n\n  /**\r\n                                                           * Template method to implement in each device to customize each container after processed\r\n                                                           * @param {} section\r\n                                                           * @returns {}\r\n                                                           */\n  postRenderContainer: function postRenderContainer($section) {\n    var self = this;\n\n    // Call original method        \n    bizagi.rendering.smartphone.section.original.postRenderContainer.apply(this, arguments);\n\n    // If the current form is readonly return;\n    if (self.isReadOnlyForm()) return;\n\n    // Bind header double click\n    var $header = $section.find(\".bz-section__header > span\");\n\n    if (self.parent &&\n    self.parent.properties &&\n    self.parent.properties.type &&\n    bizagi.util.normalizeType(self.parent.properties.type) === \"group\") {\n      $(\".bz-collapsible__content\", self.parent.container).css({ 'overflow': 'initial' });\n    }\n\n    if (!self.isInNestedform()) {\n      $header.dblclick(function () {\n        // Publish label edition event\n        self.triggerGlobalHandler(\"startlabeledition\");\n\n        // Create editable label component\n        var presenter =\n        new bizagi.editor.component.editableLabel.presenter({\n          label: $header,\n          value: self.properties.displayName });\n\n\n        // Bind change event\n        presenter.subscribe(\"change\", function (ev, args) {\n          self.triggerGlobalHandler(\"changelabel\", { guid: self.properties.guid, value: args.value });\n        });\n\n        presenter.subscribe(\"finish\", function () {\n          self.triggerGlobalHandler(\"finishlabeledition\");\n        });\n\n        // Render label\n        presenter.render();\n      });\n\n      // Allow sortable connections in sections\n      $section.droppable({\n        accept: \".ui-bizagi-draggable-item\",\n        hoverClass: \"ui-bizagi-section-drop-hover\",\n        tolerance: \"pointer\",\n        drop: function drop(event, ui) {self.dropRender(event, ui);},\n        activate: function activate(event, ui) {\n          self.currentDragSource = self.getDragSource(ui.draggable);\n        } });\n\n    }\n\n    var guid = self.properties.guid;\n    setTimeout(function () {\n      var lastElementInserted = self.triggerGlobalHandler(\"getLastInsertedElement\");\n\n      if (guid == lastElementInserted) {\n        self.showElementLabelEditor();\n        self.triggerGlobalHandler(\"setLastInsertedElement\", null);\n      }\n    }, 0);\n  },\n\n  /**\r\n      * Check is in Nestedform\r\n      * Fix for SUITE-6665\r\n      * @returns {}\r\n      */\n  isInNestedform: function isInNestedform() {\n    var self = this;\n    var parent = self.parent;\n    var properties = self.properties;\n    var result = false;\n\n    do {\n      if (properties.type === \"nestedForm\" || properties.type === \"collectionnavigator\") {\n        result = true;\n        break;\n      } else {\n        properties = parent.properties;\n        parent = parent.parent;\n      }\n    } while (parent !== undefined);\n\n    return result;\n  },\n\n  /**\r\n      * Show the label editor and update the element\r\n      * @returns {}\r\n      */\n  showElementLabelEditor: function showElementLabelEditor() {\n    var self = this;\n    var $header = self.container.find(\".bz-section__header > span\");\n    $header.trigger('dblclick');\n  },\n\n  /*\r\n     *   Handles renders drop finish operation\r\n     */\n  dropRender: function dropRender(e, ui) {\n    var self = this;\n\n    // If the original event isn't mouseup returns\n    if (e.originalEvent.type !== \"mouseup\") {return;}\n\n    var finalPosition = self.children.length;\n    var targetContainer = self.properties.guid;\n    var initialPosition = ui.draggable ? ui.draggable.data(\"start-position\") : null;\n    var sourceContainer = ui.draggable ? ui.draggable.data(\"sourceContainer\") : null;\n    var source = self.currentDragSource;\n\n    if (bizagi.editor.utilities.isObject(source)) {\n\n      // Set a timer to avoid multiple drop bug at the same time\n      if (bizagi.sortContainerTimeout != null) {\n        return;\n      }\n      bizagi.sortContainerTimeout = setTimeout(function () {\n        bizagi.sortContainerTimeout = null;\n      }, 100);\n\n      // Trigger sort finish event\n      self.triggerGlobalHandler(\"sortfinish\", {\n        source: source,\n        initialPosition: initialPosition,\n        finalPosition: finalPosition,\n        sourceContainer: sourceContainer,\n        targetContainer: targetContainer });\n\n    }\n  } });","/*\r\n*   Name: Bizagi Form Modeler Panel Extension\r\n*   Author: UI Forms Team\r\n*   Comments:\r\n*   -   This script will redefine the panel class to adjust to form modeler\r\n*/\n\n\n\nbizagi.rendering.smartphone.contentPanel.original = $.extend(true, {}, bizagi.rendering.smartphone.contentPanel.prototype);\n$.extend(bizagi.rendering.smartphone.contentPanel.prototype, {\n\n  /**\r\n                                                                * Template method to implement in each device to customize each container after processed     \r\n                                                                */\n  postRenderContainer: function postRenderContainer($panel) {\n    var self = this;\n\n    // Call original post-render\n    bizagi.rendering.smartphone.contentPanel.original.postRenderContainer.apply(this, arguments);\n\n    if (\n    !self.hasChildren() &&\n    !self.isContainedInNestedForm() &&\n    !self.isContainedInCollectionNavigator())\n    {\n      $panel.find('.panel__content').\n      append('<div class=\"children\"></div>');\n    }\n\n    // Add custom class just for form modeler\n    $panel.addClass(\"ui-bizagi-container-contentpanel-formmodeler\");\n\n    //bind header double click\n    var $header = $panel.find(\".ui-bizagi-container-contentpanel-header\");\n\n    $header.dblclick(function () {\n\n      $header.hide();\n\n      // Publish label edition event\n      self.triggerGlobalHandler(\"startlabeledition\");\n\n      // Create editable label component\n      var presenter = new bizagi.editor.component.editableLabel.presenter({ label: $header, value: self.properties.displayName });\n\n      // Bind change event\n      presenter.subscribe(\"change\", function (ev, args) {\n        self.triggerGlobalHandler(\"changelabel\", { guid: self.properties.guid, value: args.value });\n      });\n      presenter.subscribe(\"finish\", function () {\n        self.triggerGlobalHandler(\"finishlabeledition\");\n      });\n\n      // Render label\n      $.when(presenter.render()).done(function () {\n        if (self.getElement().find(\".ui-bizagi-container-input-editable\").length == 0) {\n          setTimeout(function () {\n            $header.hide();\n            self.adjustEditLabel();\n          }, 100);\n        } else {\n          self.adjustEditLabel();\n        }\n      });\n    });\n  },\n\n  /**\r\n      * Configure  sortable plugin\r\n      * @param {} container \r\n      * @returns {} \r\n      */\n  configureSortablePlugin: function configureSortablePlugin(container) {\n    container = container.find('> .panel__content');\n\n    return bizagi.rendering.smartphone.contentPanel.original.configureSortablePlugin.apply(this, arguments);\n  },\n\n  /**\r\n      * Disable sortable plugin    \r\n      */\n  disableSortablePlugin: function disableSortablePlugin() {\n    var self = this;\n    var container = self.container.find('.ui-bizagi-container-contentpanel-wrapper');\n\n    if (container && container.hasClass('ui-sortable')) {\n      if (container.data()[\"ui-sortable\"]) {\n        container.sortable('destroy');\n      }\n    }\n\n    for (var i = 0, l = self.children.length; i < l; i++) {\n      if (self.children[i].container) {\n        self.children[i].disableSortablePlugin();\n      }\n    }\n  },\n\n  /**\r\n      * Adjust edit label     \r\n      */\n  adjustEditLabel: function adjustEditLabel() {\n    var self = this;\n\n    self.getElement().find(\".ui-bizagi-container-input-editable\").css({\n      \"width\": \"95%\",\n      \"background-color\": \"orange\",\n      \"top\": \"-18px\",\n      \"border-radius\": \"10px\" });\n\n\n    self.getElement().find(\".ui-bizagi-container-input-editable input\").css({\n      \"margin-left\": \"5px\",\n      \"width\": \"90%\" });\n\n\n    self.getElement().find(\".ui-bizagi-render-confirmation\").css({\n      \"right\": \"10px\",\n      \"top\": \"5px\" });\n\n  },\n\n  /**\r\n      * Show label editor     \r\n      */\n  showElementLabelEditor: function showElementLabelEditor() {\n    var self = this;\n\n    if (!(self.container.find(\".ui-bizagi-container-input-editable > input.ui-bizagi-input-editable\").length > 0)) {\n      self.container.find(\"span:first\").trigger('dblclick');\n    }\n  } });","/*\r\n*   Name: BizAgi Form Modeler Tab Extension\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will redefine the tab class to adjust to form modeler\r\n*/\n\nbizagi.rendering.smartphone.tab.original = $.extend(true, {}, bizagi.rendering.smartphone.tab.prototype);\n$.extend(bizagi.rendering.smartphone.tab.prototype, {\n  /* \r\n                                                      *   Template method to implement in each device to customize each container after processed\r\n                                                      */\n  postRenderContainer: function postRenderContainer($tab) {\n    var self = this;\n    var properties = self.properties;\n\n    // Call original method        \n    bizagi.rendering.smartphone.tab.original.postRenderContainer.apply(this, arguments);\n\n    // If the current form is readonly return;\n    if (self.isReadOnlyForm()) {\n      return;\n    }\n\n    var $addButton = $('<div class=\"bz-tab--add\"><svg class=\"ico_16x16\"><use xlink:href=\"#icon-plus\"></use></svg></div>');\n    var $offsetLeft = $('<div style=\"display: none;\"><svg class=\"ico_16x16 offset__left-indicator\"><use xlink:href=\"#icon-arrow-left\"></svg></div>');\n    var $offsetRigth = $('<div style=\"display: none;\"><svg class=\"ico_16x16 offset__right-indicator\"><use xlink:href=\"#icon-arrow-rigth\"></svg></div>');\n    var $tabContainer = $('.bz-tabs', $tab).first();\n\n    $tabContainer.\n    wrap('<div class=\"bz__tabs--container\"></div>').\n    before($offsetLeft).\n    after($addButton).\n    after($offsetRigth).\n    on('updatePositions', function (ev, info) {\n      setTimeout(function () {\n\n        var $container = $(ev.currentTarget);\n\n        self.updatePositions($offsetLeft, $offsetRigth);\n        self.updateErrorPositions($container);\n      }, 100);\n    });\n\n    $offsetLeft.click(function (event) {\n      event.stopPropagation();\n      var htmlTabELement = $('.bz-tabs', self.container);\n      htmlTabELement.scrollLeft(htmlTabELement.scrollLeft() - 15);\n      self.updatePositions($offsetLeft, $offsetRigth);\n    });\n\n    $offsetRigth.click(function (event) {\n      event.stopPropagation();\n      var htmlTabELement = $('.bz-tabs', self.container);\n      htmlTabELement.scrollLeft(htmlTabELement.scrollLeft() + 15);\n      self.updatePositions($offsetLeft, $offsetRigth);\n    });\n\n    // Add handlers if the tab isn't contained in a nested form\n    if (!self.isContainedInNestedForm() && !self.isContainedInCollectionNavigator()) {\n\n      // Add handler\n      $addButton.click(function (ev) {\n        ev.stopImmediatePropagation();\n        // Publish addtab event to the view\n        self.triggerGlobalHandler(\"addtab\", { guid: properties.guid });\n        return false;\n      });\n\n      // Assign tab headers to children\n      $.each(self.children, function (i, tabItem) {\n        var $tabHeader = $(\"li[data-reference= #ui-bizagi-tab-\" + tabItem.properties.guid + \"]\", $tab);\n        tabItem.setTabHeader($tabHeader);\n      });\n\n      // Make headers sortable\n      var header = $(\".bz-tabs\", $tab).first();\n      header.sortable({\n        items: \"li[data-reference]\",\n        revert: true,\n        distance: 10,\n        axis: \"x\",\n        cursorAt: { top: -3, left: 0 },\n        placeholder: \"bz-tab-placeholder\",\n        delay: 150,\n        start: function start(e, ui) {\n          self.sortStart(e, ui);\n        },\n        tolerance: \"pointer\",\n        stop: function stop(e, ui) {\n          self.sortFinish(e, ui);\n        } });\n\n    }\n\n    $tab.data({\n      guid: self.properties.guid,\n      display: self.properties.displayName,\n      type: self.properties.type });\n\n\n    $tab.on(\"tabsload\", function (event, ui) {\n      self.triggerGlobalHandler(\"controlRefreshCanvas\", {});\n    }).on(\"tabsactivate\", function (event, ui) {\n      self.triggerGlobalHandler(\"controlRefreshCanvas\", {});\n    });\n\n    setTimeout(function () {\n      self.updatePositions($offsetLeft, $offsetRigth);\n\n      self.removeSortableClass();\n      var idx = self.getActiveTab();\n      self.children[idx].addSortableClass();\n\n    }, 100);\n\n    var item = (self.children || []).find(function (item) {\n      if (item.properties && item.properties.messageValidation) return item;\n    });\n\n    if (item && item.properties && item.properties.messageValidation) {\n      self.showValidationMessage(item.properties.messageValidation);\n    }\n\n  },\n\n  /* Remove drag target class from inactive containers  */\n  removeSortableClass: function removeSortableClass() {\n    (this.children || []).forEach(function (item) {\n      item.removeSortableClass();\n    });\n  },\n\n  updatePositions: function updatePositions($offsetLeft, $offsetRigth) {\n    var $htmlTabELement = $('.bz-tabs', this.container).get(0);\n\n    $offsetLeft.css({ display: \"none\" });\n    $offsetRigth.css({ display: \"none\" });\n\n    if ($htmlTabELement.scrollLeft > 0) {\n      $offsetLeft.css({ display: \"flex\" });\n    }\n\n    if ($htmlTabELement.scrollWidth > $htmlTabELement.clientWidth + $htmlTabELement.scrollLeft + 30) {\n      $offsetRigth.css({ display: \"flex\" });\n    }\n  },\n\n  /*\r\n     *   Manages the drag start event when sorting the header tabs\r\n     */\n  sortStart: function sortStart(event, ui) {\n    var self = this;\n\n    var index = $(ui.item).parent().children(\"li[data-reference]\").not(\".bz-tab-placeholder\").index(ui.item);\n    ui.item.data(\"start-position\", index);\n    self.initialPosition = index;\n    return true;\n  },\n\n  /*\r\n     *   Manages the drag end event when sorting the header tabs\r\n     */\n  sortFinish: function sortFinish(event, ui) {\n    var self = this;\n    var index = $(ui.item).parent().children(\"li[data-reference]\").not(\".bz-tab-placeholder\").index(ui.item);\n\n    // Trigger sort finish event\n    self.triggerGlobalHandler(\"sortfinish\", {\n      source: {},\n      initialPosition: ui.item.data(\"start-position\") || self.initialPosition,\n      finalPosition: index,\n      sourceContainer: self.properties.guid,\n      targetContainer: self.properties.guid });\n\n\n    return true;\n  },\n\n  updateErrorPositions: function updateErrorPositions($container) {\n    var $currentTabItem = $container.find(\"li.active\");\n\n    $(\".bz-indicator-bar\", $container).removeClass(\"bz-indicator-bar--error\");\n\n    if ($currentTabItem && $currentTabItem.hasClass(\"bz-tab--error\")) {\n      $(\".bz-indicator-bar\", $container).addClass(\"bz-indicator-bar--error\");\n    }\n  } });","/*\r\n*   Name: BizAgi Form Modeler Tab Item Extension\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will redefine the tab item class to adjust to form modeler\r\n*/\n\nbizagi.rendering.smartphone.tabItem.original = $.extend(true, {}, bizagi.rendering.smartphone.tabItem.prototype);\n$.extend(bizagi.rendering.smartphone.tabItem.prototype, {\n\n  /*\r\n                                                          *   Renders the current container\r\n                                                          *   Also adds sortable behaviour\r\n                                                          */\n  postRenderContainer: function postRenderContainer($container) {\n    var self = this;\n\n    // Call original postrRenderContainer\n    bizagi.rendering.smartphone.tabItem.original.postRenderContainer.apply(this, arguments);\n\n    if (!self.hasChildren()) {\n      $container.append('<div class=\"children\"></div>');\n    }\n\n    $container.addClass('bz-tab-item');\n  },\n\n  /*\r\n     *   Set the tab header reference from the parent in order to attach edition handlers\r\n     */\n  setTabHeader: function setTabHeader($tabHeader) {\n    var self = this,\n    properties = self.properties;\n\n    // Add handlers if the tabitem isn't contained in a nested form\n    if (!self.isContainedInNestedForm() && !self.isContainedInCollectionNavigator()) {\n\n      // Delete handler\n      $(\".tab--delete\", $tabHeader).click(function () {\n        // Publish deletetab event to the view\n        self.triggerGlobalHandler(\"deletetab\", { guid: properties.guid });\n        return false;\n      });\n\n      $tabHeader.dblclick(function () {\n        if (!self.isEditableLabelActive()) {\n          self.editDisplayName($tabHeader);\n        }\n      }).click(function (ev) {\n        if (!self.isEditableLabelActive()) {\n          self.triggerGlobalHandler(\"showProperties\", { guid: self.properties.guid, redraw: true });\n        }\n      }).mousedown(function (ev) {\n        if (ev.button === 2) {\n          ev.stopImmediatePropagation();\n          if (!self.isEditableLabelActive()) {\n            self.triggerGlobalHandler(\"elementrightclick\", {\n              guid: self.properties.guid,\n              position: { x: ev.clientX, y: ev.clientY } });\n\n          }\n        }\n      });\n\n      // Allow sortable connections between tabs\n      /* tabHeader.droppable({\r\n          accept: \".ui-bizagi-draggable-item\",\r\n          hoverClass: \"ui-bizagi-tab-drop-hover\",\r\n          tolerance: \"pointer\",\r\n          drop: function (event, ui) { self.dropRender(event, ui); },\r\n          activate: function (event, ui) {\r\n              self.currentDragSource = self.getDragSource(ui.draggable);\r\n          }\r\n        }); */\n\n\n    }\n  },\n\n  /* \r\n     *   Change selected item \r\n     */\n  activate: function activate() {\n    var self = this;\n\n    // Call base        \n    bizagi.rendering.smartphone.tabItem.original.activate.apply(this, arguments);\n\n    self.parent.removeSortableClass();\n    self.addSortableClass();\n\n    // Publish activatetab event to the view\n    self.triggerGlobalHandler(\"activatetab\", { guid: self.properties.guid });\n  },\n\n  /*  Remove drag target class from inactive containers */\n  removeSortableClass: function removeSortableClass() {\n    this.container.removeClass('ui-bizagi-container-connectedSortable');\n  },\n\n  /* Make sure current container has connected sortable class */\n  addSortableClass: function addSortableClass() {\n    this.container.addClass('ui-bizagi-container-connectedSortable');\n  },\n\n  /*\r\n     * Edit the current display name\r\n     */\n  editDisplayName: function editDisplayName(tabHeader) {\n    var self = this;\n    var label = $(\"a\", tabHeader);\n\n    // Publish label edition event\n    self.triggerGlobalHandler(\"startlabeledition\");\n\n    // Create editable label component\n    var presenter = self.editableLabelPresenter = new bizagi.editor.component.editableLabel.presenter({\n      label: label,\n      value: self.properties.displayName });\n\n\n    // Bind change event\n    presenter.subscribe(\"change\", function (ev, args) {\n      self.triggerGlobalHandler(\"changelabel\", { guid: self.properties.guid, value: args.value });\n    });\n\n    presenter.subscribe(\"finish\", function () {\n      self.triggerGlobalHandler(\"finishlabeledition\");\n    });\n\n    // Bind keyup event\n    presenter.subscribe(\"keyup\", function (ev, args) {\n      // Extend tab header\n      tabHeader.find(\".ui-bizagi-container-input-editable\").width(bizagi.measureString(args.value) + 100);\n    });\n\n    // Render label\n    presenter.render();\n\n  },\n\n  /*\r\n     * Returns true if the editable label component is active\r\n     */\n  isEditableLabelActive: function isEditableLabelActive() {\n    var self = this;\n\n    if (self.editableLabelPresenter && self.editableLabelPresenter.editableLabel) {\n      return true;\n    }\n    return false;\n  },\n\n  /*\r\n     *   Handles renders drop finish operation\r\n     */\n  dropRender: function dropRender(e, ui) {\n    var self = this;\n\n    // If the original event isn't mouseup returns\n    if (e.originalEvent.type !== \"mouseup\") {\n      return;\n    }\n\n    var finalPosition = self.children.length;\n    var targetContainer = self.properties.guid;\n    var initialPosition = ui.draggable ? ui.draggable.data(\"start-position\") : null;\n    var sourceContainer = ui.draggable ? ui.draggable.data(\"sourceContainer\") : null;\n    var source = self.currentDragSource;\n\n    if (bizagi.editor.utilities.isObject(source)) {\n\n      // Set a timer to avoid multiple drop bug at the same time\n      if (bizagi.sortContainerTimeout != null) {\n        return;\n      }\n      bizagi.sortContainerTimeout = setTimeout(function () {\n        bizagi.sortContainerTimeout = null;\n      }, 100);\n\n      // Trigger sort finish event\n      self.triggerGlobalHandler(\"sortfinish\", {\n        source: source,\n        initialPosition: initialPosition,\n        finalPosition: finalPosition,\n        sourceContainer: sourceContainer,\n        targetContainer: targetContainer });\n\n    }\n  },\n\n  /**\r\n      * Show validation messages\r\n      * @param messages\r\n      */\n  showValidationMessage: function showValidationMessage(messages) {\n    // Prevent propagation\n  } });","/*\r\n*   Name: BizAgi Form Modeler Tab Extension\r\n*   Author: Alexander Mejia\r\n*   Comments:\r\n*   -   This script will redefine the search class to adjust to form modeler\r\n*/\n\n\nbizagi.rendering.smartphone.search.original = $.extend(true, {}, bizagi.rendering.smartphone.search.prototype);\n$.extend(bizagi.rendering.smartphone.search.prototype, {\n  /*\r\n                                                         *   Template method to implement in each device to customize each render after processed\r\n                                                         */\n  postRender: function postRender() {\n    var self = this;\n\n    // Call original method        \n    bizagi.rendering.smartphone.search.original.postRender.apply(this, arguments);\n\n    // If the current form is readonly return;\n    if (self.isReadOnlyForm()) {\n      return;\n    }\n\n    if (self.advancedSearch && !self.isContainedInNestedForm()) {\n      self.advancedSearch.click(function (ev) {\n        ev.stopPropagation();\n        // Publish showSearchForm event to the view\n        self.triggerGlobalHandler(\"showsearchform\", {\n          guid: self.properties.guid });\n\n      });\n    }\n  } });","/*\r\n*   Name: BizAgi Form Modeler Image Extension\r\n*   Author: Christian Collazos\r\n*   Comments:\r\n*   -   This script will redefine the image class to adjust to form modeler\r\n*/\n\nbizagi.rendering.smartphone.image.original = $.extend(true, {}, bizagi.rendering.smartphone.image.prototype);\n$.extend(bizagi.rendering.smartphone.image.prototype, {\n  /*\r\n                                                            * Extend original method\r\n                                                            */\n  postRender: function postRender() {\n    var self = this;\n    var control = self.getControl();\n    var width = self.properties.width;\n    var containerType = self.parent.properties.type;\n\n    // Call original method        \n    bizagi.rendering.smartphone.image.original.postRender.apply(this, arguments);\n\n    setTimeout(function () {\n      if (width === -1) {\n\n        var thumbnail = $(\".resizable_img\", control);\n        var widthWrapper = control.width();\n        var height = control.height();\n        var containerHeight = 0;\n        var totalImagesInSameContainer = 0;\n\n        if (containerType == \"grid\") {\n          containerHeight = $(\".resizable_img\", control).closest(\"td\").height();\n        } else\n        {\n          if (self.parent.properties.id == self.getFormContainer().properties.id) {\n            containerHeight = 50;\n          } else {\n            var containerChildsSize = self.parent.getChildreCount();\n            var containerChildsHeightSum = self.parent.getChildrenSumHeight(\"image\");\n            containerHeight = $(\".resizable_img\", control).closest(\".ui-bizagi-container\").height() - 17;\n            containerHeight = containerHeight < 50 ? 50 : containerHeight;\n            totalImagesInSameContainer = self.parent.countByRenderTypeWithParams(\"image\", -1);\n\n            if (containerChildsSize > 1) {\n              containerHeight = containerHeight - containerChildsHeightSum;\n            }\n          }\n        }\n\n        thumbnail.width(widthWrapper);\n\n        if (totalImagesInSameContainer > 1) {\n          if (null != containerHeight && containerHeight > 0) {\n            $(\".resizable_img\", self.parent.container).height(containerHeight / totalImagesInSameContainer + \"px\");\n          } else {\n            $(\".resizable_img\", control).height(height + \"px\");\n          }\n        } else {\n          if (null != containerHeight && containerHeight > 0) {\n            thumbnail.height(containerHeight + \"px\");\n          } else {\n            thumbnail.height(height + \"px\");\n          }\n        }\n      }\n\n      self.triggerGlobalHandler(\"controlRefreshCanvas\");\n\n    }, 160);\n\n  },\n\n  /*\r\n     * Get image width and height and send them to modeler \r\n     */\n  changeImageSize: function changeImageSize(imageWidth, imageHeight) {\n    var self = this;\n    var control = self.getControl();\n\n    self.executeTriggerHandler(control, imageWidth, imageHeight, \"string\");\n\n  },\n\n  /*\r\n     * Update control definition\r\n     */\n  executeTriggerHandler: function executeTriggerHandler(control, imageWidth, imageHeight, type) {\n    var self = this;\n    var widthValue = \"\";\n    var heightValue = \"\";\n\n    if (type == \"string\") {\n      widthValue = imageWidth.slice(0, -2);\n      heightValue = imageHeight.slice(0, -2);\n    } else {\n      widthValue = imageWidth;\n      heightValue = imageHeight;\n    }\n    self.triggerGlobalHandler(\"resizeImage\", {\n      guid: self.properties.guid,\n      properties: [{\n        property: \"thumbnail.width\",\n        value: widthValue },\n\n      {\n        property: \"thumbnail.height\",\n        value: heightValue }] });\n\n\n  } });","/*\r\n*   Name: BizAgi Form Modeler Image Extension\r\n*   Author: Christian Collazos\r\n*   Comments:\r\n*   -   This script will redefine the image class to adjust to form modeler\r\n*/\n\nbizagi.rendering.smartphone.grid.original = $.extend(true, {}, bizagi.rendering.smartphone.grid.prototype);\n$.extend(bizagi.rendering.smartphone.grid.prototype, {\n  /*\r\n                                                           * Extend original method\r\n                                                           */\n  postRender: function postRender() {\n    // Call original method        \n    bizagi.rendering.smartphone.grid.original.postRender.apply(this, arguments);\n\n    var control = this.getControl();\n\n    $(\".bz-mobile-grid__cell.bz-hidden\", control).each(function (index, item) {\n      $(item).addClass(\"ui-state-disabled\");\n    });\n  } });","/*\r\n*   Name: BizAgi Form Modeler Collection Navigator Extension\r\n*   Author: Alexander Mejia\r\n*   Date: 02-12-213\r\n*   Comments:\r\n*   -   This script will redefine the collection navigator class to adjust to form modeler\r\n*/\n\n\nbizagi.rendering.smartphone.collectionnavigator.original = $.extend(true, {}, bizagi.rendering.smartphone.collectionnavigator.prototype);\n$.extend(bizagi.rendering.smartphone.collectionnavigator.prototype, {\n\n  postRender: function postRender() {\n    var self = this;\n\n    // Call original method\n    bizagi.rendering.smartphone.collectionnavigator.original.postRender.apply(this, arguments);\n\n    $.when(self.isRendered()).\n    done(function () {\n      var properties = self.properties;\n      var control = self.getControl();\n      var canvas = control.find(\".bz-collectionnavigator-navigationform\");\n\n      if (properties.navigationform) {\n        setTimeout(function () {\n          self.triggerGlobalHandler(\"refreshControl\", {\n            guid: properties.guid,\n            canvas: canvas });\n\n        }, 0);\n      }\n    });\n  } });","\n\nbizagi.rendering.smartphone.nestedForm.original = $.extend(true, {}, bizagi.rendering.smartphone.nestedForm.prototype);\n$.extend(bizagi.rendering.smartphone.nestedForm.prototype, {\n  /*\r\n                                                             *   Template method to implement in each device to customize the render's behaviour when rendering in design mode\r\n                                                             */\n  configureDesignView: function configureDesignView() {\n    var self = this;\n    var properties = self.properties;\n    var $container = self.container;\n\n    $container.removeClass(\"ui-bizagi-container-panel\");\n    $container.addClass(\"ui-bizagi-container-nestedform\");\n\n    setTimeout(function () {\n      var title = $(\"<span class= 'ui-bizagi-container-nestedform-title'>Nested Form: \" + properties.formDisplayName + \"</span>\");\n      if (self.triggerGlobalHandler(\"isOfflineForm\")) {\n        title = $(\"<span class= 'ui-bizagi-container-nestedform-title'>Nested <b>Offline</b> Form: \" + properties.formDisplayName + \"</span>\");\n      } else if (self.triggerGlobalHandler(\"hasOfflineForm\")) {\n        title = $(\"<span class= 'ui-bizagi-container-nestedform-title'>Nested <b>Online</b> Form: \" + properties.formDisplayName + \"</span>\");\n      }\n\n      $container.prepend(title);\n    }, 100);\n  } });","/*\r\n*   Name: BizAgi Form Modeler Group Extension\r\n*   Author: Ivan Avila\r\n*   Comments:\r\n*   -   This script will redefine the group class to adjust to form modeler\r\n*/\n\nbizagi.rendering.smartphone.date.original = $.extend(true, {}, bizagi.rendering.smartphone.date.prototype);\n$.extend(bizagi.rendering.smartphone.date.prototype, {\n  /* \r\n                                                       *   Template method to implement in each device to customize each container after processed\r\n                                                       */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n\n    // Call original method\n    bizagi.rendering.smartphone.date.original.setDisplayValue.apply(this, arguments);\n\n    //Apply format\n    var properties = self.properties;\n    var dateControl = self.getDateControl().parent();\n    var inputPlaceholder = $(\".ui-bizagi-render-date, .bz-input-icon__input\", dateControl);\n\n    if (properties.valueFormat.color && properties.valueFormat.color.length > 0) {\n      var nameNewClass = \"bz-\" + properties.valueFormat.color.replace('#', '') + \"-placeholder\";\n      var fullNewClass = \".\" + nameNewClass + \"::-webkit-input-placeholder{color:\" + properties.valueFormat.color + \"}\";\n      bizagi.util.loadStyle(fullNewClass, nameNewClass);\n      inputPlaceholder.addClass(nameNewClass);\n    }\n\n    if (properties.valueFormat.strikethru && properties.valueFormat.underline) {\n      inputPlaceholder.addClass(\"biz-modify-placeholder-through-underline\");\n    } else {\n      inputPlaceholder.removeClass(\"biz-modify-placeholder-through-underline\");\n\n      if (properties.valueFormat.strikethru) {\n        inputPlaceholder.addClass(\"biz-modify-placeholder-through\");\n      } else {\n        inputPlaceholder.removeClass(\"biz-modify-placeholder-through\");\n      }\n\n      if (properties.valueFormat.underline) {\n        inputPlaceholder.addClass(\"biz-modify-placeholder-underline\");\n      } else {\n        inputPlaceholder.removeClass(\"biz-modify-placeholder-underline\");\n      }\n    }\n  } });","/*\r\n*   Default implementation for user fields\r\n*/\nbizagi.rendering.smartphone.basicUserField.extend(\"bizagi.rendering.smartphone.designUserField\", {}, {\n\n  /*\r\n                                                                                                       *   Template method to implement in each device to customize each render after processed\r\n                                                                                                       */\n  getEditableControl: function getEditableControl() {\n    var self = this;\n    var $control = self.getControl();\n    var properties = self.properties;\n    var controlName = properties.control + ' Custom control';\n    var tmpl = '<div class=\"bz-input-icon bz-widget--fake\"><input class=\"bz-input-icon__input bz-space--inline-s\" placeholder=\"' + controlName + '\"/><svg class=\"bz-icn bz-space--inline-s\" width=\"32px\" height=\"32px\"><use xlink:href=\"#gear\" /></svg></div>';\n\n    $control.addClass(\"bz-widget__control--fake\");\n\n    self.input = $(tmpl).appendTo($control);\n  },\n\n  /*\r\n     *  Dont send the data to the server\r\n     */\n  collectData: function collectData(renderValues) {\n  },\n\n  getDisplayValue: function getDisplayValue() {\n    var self = this;\n    var properties = self.properties;\n    var controlName = properties.control;\n    return \"Userfield in design mode: \" + controlName;\n  },\n\n  getReadonlyControl: function getReadonlyControl() {\n    var self = this;\n    var $control = self.getControl();\n    var properties = self.properties;\n    var controlName = properties.control + ' Custom control';\n    var tmpl = '<div class=\"bz-input-icon bz-widget--fake\"><input class=\"bz-input-icon__input bz-space--inline-s\" placeholder=\"' + controlName + '/><svg class=\"bz-icn bz-space--inline-s\" width=\"32px\" height=\"32px\"><use xlink:href=\"#gear\" /></svg></div>';\n\n    $control.addClass(\"bz-widget__control--fake\");\n\n    var myControl = $(tmpl).appendTo($control);\n    return myControl;\n  } });"]}