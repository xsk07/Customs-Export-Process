{"version":3,"sources":["jquery/editor/component/renderingview/js/tablet/bizagi.hacks.rendering.tablet.form.js","jquery/editor/component/renderingview/js/base/bizagi.hacks.rendering.element.js","jquery/editor/component/renderingview/js/tablet/bizagi.hacks.rendering.tablet.container.js","jquery/editor/component/renderingview/js/tablet/bizagi.hacks.rendering.tablet.render.js","jquery/editor/component/renderingview/js/tablet/bizagi.hacks.rendering.tablet.group.js","jquery/editor/component/renderingview/js/tablet/bizagi.hacks.rendering.tablet.section.js","jquery/editor/component/renderingview/js/tablet/bizagi.hacks.rendering.tablet.contentPanel.js","jquery/editor/component/renderingview/js/tablet/bizagi.hacks.rendering.tablet.tab.js","jquery/editor/component/renderingview/js/tablet/bizagi.hacks.rendering.tablet.tabitem.js","jquery/editor/component/renderingview/js/tablet/bizagi.hacks.rendering.tablet.search.js","jquery/editor/component/renderingview/js/tablet/bizagi.hacks.rendering.tablet.image.js","jquery/editor/component/renderingview/js/tablet/bizagi.hacks.rendering.tablet.grid.js","jquery/editor/component/renderingview/js/tablet/bizagi.hacks.rendering.tablet.collectionnavigator.js","jquery/editor/component/renderingview/js/tablet/bizagi.hacks.rendering.tablet.nestedform.js","jquery/editor/component/renderingview/js/tablet/bizagi.hacks.rendering.tablet.date.js","jquery/editor/component/renderingview/js/tablet/bizagi.hacks.rendering.tablet.widget.js"],"names":["_typeof","obj","Symbol","iterator","constructor","prototype","bizagi","rendering","element","original","$","extend","isContainedInNestedForm","this","parent","properties","type","isContainedInCollectionNavigator","getFormContainer","isNavigationForm","isContainedInGrid","undefined","column","isReadOnlyForm","isReadOnly","findElement","guid","selectElement","unselectElement","tablet","container","postRenderContainer","self","apply","arguments","getFormType","click","ev","onClickCanvas","hasClass","sortable","addClass","addDraggableClassToContainer","isContainerSortable","data","display","displayName","form","modeler","params","reviewMode","setTimeout","configureSortablePlugin","isClickEventAllowed","mousedown","onMouseDown","onClick","messageValidation","showValidationMessage","selectElementByGuid","guids","i","l","length","foundElement","IsOnClickEvent","children","disableSortablePlugin","position","offset","width","outerWidth","height","outerHeight","triggerGlobalHandler","removeClass","mainPanel","formModelerSelector","bind","args","onSortStart","onSortFinish","onScrollingForm","ui","currentDragSource","getDragSource","item","items","revert","connectWith","distance","cursorAt","top","left","placeholder","delay","cancel","getMode","containment","helper","event","$template","sortableHelper","$container","start","stop","beforeStop","window","x3","disableSelection","loadHelperTemplate","setConnectWith","classConnect","isContainerDraggable","$containerPanel","each","$child","append","mouseenter","mouseleave","normalizeType","includes","isElementSortAllowed","mode","sortableElement","helperTemplate","toLowerCase","id","caption","icon","mainContainer","tmpl","wrapperMainScroll","appendTo","css","zIndex","widthTotal","parseFloat","eq","when","templateService","getTemplate","concat","pipe","result","toolbar","xpathNavigator","layout","parents","first","changeVisibility","argument","visible","util","parseBoolean","hasChildren","$mainPanel","index","sourceContainer","sortContainerTimeout","finalPosition","not","targetContainer","initialPosition","source","stopImmediatePropagation","button","ctrlIsPressed","x","clientX","y","clientY","preventDefault","stopPropagation","replace","messages","message","split","setValidationMessage","getContainerMessage","containerMessage","next","uniqueId","$message","attr","text","$form","localization","getResource","removeAttr","allowButtons","remove","messageElement","createMessageValidationElement","prepend","resource","mainElement","boundingClient","getBoundingClientRect","clientTopY","clientButtonY","bottom","isInTop","Math","abs","factor","scrollTop","scrollHeight","offsetHeight","delta","render","postRenderElement","configureLayoutElement","setMouseDownEvent","renderSearch","labelElement","getLabelGrid","getLabel","onRenderClick","dblclick","onLabelDoubleClick","resetStyle","configureDroppablePlugin","configureDraggablePlugin","find","onRemoveElement","setDeleteLayoutItem","hoverElement","hoverRestoreElement","closest","hover","detach","draggable","opacity","droppable","hoverClass","tolerance","activeClass","greedy","drop","activate","show","deactivate","hide","on","onDrop","el","colorText","backgroundColor","options","isInternal","isColumn","e","document","activeElement","is","trigger","presenter","editor","component","editableLabel","label","value","subscribe","showElementLabelEditor","$sourceElement","$helperElement","helperData","xpathValue","utilities","buildComplexXpath","xpath","contextScope","isScopeAttribute","guidRelatedEntity","property","renderType","nodeSubtype","sourceGuid","isLayoutElement","group","$content","header","isInNestedform","lastElementInserted","section","$section","$header","overflow","accept","dropRender","originalEvent","isObject","contentPanel","$panel","done","getElement","adjustEditLabel","background-color","border-radius","margin-left","right","tab","$tab","$addButton","$offsetLeft","$offsetRigth","$tabContainer","wrap","before","after","info","currentTarget","updatePositions","updateErrorPositions","htmlTabELement","scrollLeft","tabItem","$tabHeader","setTabHeader","axis","sortStart","sortFinish","removeSortableClass","idx","getActiveTab","addSortableClass","forEach","$htmlTabELement","get","scrollWidth","clientWidth","$currentTabItem","isEditableLabelActive","editDisplayName","redraw","tabHeader","editableLabelPresenter","measureString","search","postRender","advancedSearch","image","control","getControl","containerType","thumbnail","widthWrapper","containerHeight","totalImagesInSameContainer","containerChildsSize","getChildreCount","containerChildsHeightSum","getChildrenSumHeight","countByRenderTypeWithParams","changeImageSize","imageWidth","imageHeight","executeTriggerHandler","widthValue","heightValue","slice","grid","collectionnavigator","isRendered","canvas","navigationform","nestedForm","configureDesignView","title","formDisplayName","date","setDisplayValue","dateControl","getDateControl","inputPlaceholder","valueFormat","color","nameNewClass","fullNewClass","loadStyle","strikethru","underline","basicUserField","getEditableControl","$control","input","collectData","renderValues","getDisplayValue","getReadonlyControl"],"mappings":"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","sourcesContent":["function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);}\n/*\r\n                                                                                                                                                                                                                                                                                                                                                                               *   @tittle: Bizagi FormModeler Editor Hacks Rendering Form\r\n                                                                                                                                                                                                                                                                                                                                                                               *   @authors: UI Forms Team\r\n                                                                                                                                                                                                                                                                                                                                                                               *   @Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                               *   -   This script will define basic stuff for enable the rendering Form\r\n                                                                                                                                                                                                                                                                                                                                                                               *\t\tin the formModeler (delete div button container)\r\n                                                                                                                                                                                                                                                                                                                                                                               */\n\n\nbizagi.rendering.tablet.form.original = $.extend(true, {}, bizagi.rendering.tablet.form.prototype);\n$.extend(bizagi.rendering.tablet.form.prototype, {\n  /*\r\n                                                    *   Renders the current container\r\n                                                    *   Removes buttons from original rendering\r\n                                                    */\n  postRenderContainer: function postRenderContainer(form) {\n    var self = this;\n    var $form = form;\n\n    self.children.length === 0 ? $form.attr(\"drophere\", bizagi.localization.getResource(\"formmodeler-component-editor-layout-drophere-containers\")) :\n    $form.removeAttr(\"drophere\");\n\n    // Call original rendering\n    bizagi.rendering.tablet.form.original.postRenderContainer.apply(this, arguments);\n\n\n    // Remove button container\n    var allowButtons = _typeof(self.params.allowButtons) !== undefined ? self.params.allowButtons : false;\n    if (!allowButtons) {\n      $(\".ui-bizagi-button-container\", form).remove();\n    }\n\n    if (self.properties.messageValidation && self.properties.messageValidation.length > 0) {\n      var messageElement = self.createMessageValidationElement(self.properties.messageValidation);\n      form.prepend(messageElement);\n    }\n\n    return form;\n  },\n\n  createMessageValidationElement: function createMessageValidationElement(message) {\n    var self = this;\n    var resource = bizagi.localization.getResource(\"formmodeler-validations-form\");\n\n    var messageElement = $('<div class=\"ui-message-validation\"/>');\n    $('<span>' + resource + '<i class=\"biz-ico bz-studio bz-warning-red_16x16_standard\" title=\"' + message + '\"></i></span>').appendTo(messageElement);\n    $(messageElement, \"div\").click(function () {\n      self.triggerGlobalHandler(\"showPropertiesForm\");\n    });\n\n    return messageElement;\n  },\n\n  /*\r\n     *   Manages scrolling  event\r\n     */\n  onScrollingForm: function onScrollingForm($mainPanel, ev) {\n    var mainElement = $mainPanel[0];\n    var boundingClient = mainElement.getBoundingClientRect();\n    var clientTopY = boundingClient.top;\n    var clientButtonY = boundingClient.bottom;\n\n    function isInTop() {\n      return Math.abs(ev.clientY - clientTopY) <= 20;\n    }\n\n    function isInBottom() {\n      return Math.abs(clientButtonY - ev.clientY) <= 30;\n    }\n\n    function move() {\n      var factor = isInTop() ? -1 : 1;\n      var scrollTop = $mainPanel.scrollTop();\n\n      if (factor === 1) {\n        if (scrollTop > mainElement.scrollHeight - mainElement.offsetHeight) {\n          return;\n        }\n      }\n\n      var delta = scrollTop + 40 * factor;\n      $mainPanel.scrollTop(delta);\n    }\n\n    // Top border\n    if (isInTop() || isInBottom()) {\n      setTimeout(move, 100);\n    }\n  } });","\n/*\r\n*   @tittle: BizAgi FormModeler Editor Hacks Rendering Render\r\n*   @authors: Alexander Mejia\r\n\t@date: 06-mar-12\r\n*   @Comments:\r\n*   -   This script will define basic stuff for enable the rendering render\r\n*\t\tin the formModeler\r\n*/\n\nbizagi.rendering.element.original = $.extend(true, {}, bizagi.rendering.element.prototype);\n$.extend(bizagi.rendering.element.prototype, {\n  /*\r\n                                               *   Check if the current element is inside a nested form\r\n                                               */\n  isContainedInNestedForm: function isContainedInNestedForm() {\n    var self = this;\n\n    // If the element has no parent, we are in the root element\n    if (!self.parent) return false;\n\n    // If the parent is nested form, this element is contained in a nested form\n    if (self.parent.properties.type === \"nestedForm\") return true;\n\n    // If the parent is collectionnavigator, this element is contained in a collectionnavigator control\n    if (self.parent.properties.type === \"collectionnavigator\") return true;\n\n    // If the element has a parent, then check in parent recursively\n    return self.parent.isContainedInNestedForm();\n  },\n\n\n  /*\r\n     *   Check if the current element is inside a collection navigator\r\n     */\n  isContainedInCollectionNavigator: function isContainedInCollectionNavigator() {\n    var self = this;\n\n    var form = self.getFormContainer();\n    var properties = form.properties;\n\n    return properties.isNavigationForm || false;\n  },\n\n  /*\r\n     * Returns true if the element is a column of a grid \r\n     */\n  isContainedInGrid: function isContainedInGrid() {\n    var self = this,\n    column = self.column;\n\n    return column != undefined;\n\n  },\n\n\n  /*\r\n     * This method returns true if the current form is read only\r\n     */\n  isReadOnlyForm: function isReadOnlyForm() {\n    var self = this;\n\n    var form = self.getFormContainer() || {};\n    var properties = form.properties || {};\n    if (properties.isReadOnly) {\n      return true;\n    }\n\n    return false;\n  },\n\n  /*\r\n     *   Finds an element by guid\r\n     */\n  findElement: function findElement(guid) {\n    var self = this;\n    if (!guid) {return null;}\n\n    if (self.properties.guid === guid) {\n      // Element found\n      return this;\n    }\n\n    // Element not found\n    return null;\n  },\n\n  /*\r\n     *  Selects the current element\r\n     */\n  selectElement: function selectElement() {},\n\n  /*\r\n                                              *  Un-selects the current element\r\n                                              */\n  unselectElement: function unselectElement() {} });","/*\r\n*   @tittle: BizAgi FormModeler Editor Hacks Rendering Container\r\n*   @authors: David Montoya\r\n\t@date: 02-mar-12\r\n*   @Comments:\r\n*   -   This script will define basic stuff for enable the rendering Container\r\n*\t\tin the formModeler\r\n*/\n\nbizagi.rendering.tablet.container.original = $.extend(true, {}, bizagi.rendering.tablet.container.prototype);\n$.extend(bizagi.rendering.tablet.container.prototype, {\n  /*\r\n                                                        *   Renders the current container\r\n                                                        *   Also adds sortable behaviour\r\n                                                        */\n  postRenderContainer: function postRenderContainer(container) {\n    var self = this;\n\n    // Call original post-render\n    bizagi.rendering.tablet.container.original.postRenderContainer.apply(this, arguments);\n\n    // If the current form is readonly return;\n    if (self.isReadOnlyForm()) {\n      return container;\n    }\n\n    if (self.getFormType() == 'template') {\n      if (self.properties.type == 'template') {\n        container.click(function (ev) {\n          self.onClickCanvas(ev);\n        });\n      }\n\n      return container;\n    }\n\n    // Configure sortable\n    if (container.hasClass('ui-sortable')) {container.sortable('destroy');}\n    container.addClass(\"ui-bizagi-itemfordrag\");\n    self.addDraggableClassToContainer();\n\n    if (self.isContainerSortable()) {\n\n      // Populate element data \n      container.data({\n        guid: self.properties.guid,\n        display: self.properties.displayName,\n        type: self.properties.type });\n\n\n      if (!bizagi.form.modeler.params.reviewMode) {\n        // Configure sortable plugin\n        setTimeout(function () {\n          self.configureSortablePlugin(container);\n        }, 100);\n      }\n    }\n\n    // Process clicks\n    if (self.isClickEventAllowed()) {\n      if (self.properties.type !== undefined &&\n      self.properties.type !== \"searchForm\" &&\n      self.properties.type !== \"form\" &&\n      self.properties.type !== \"queryForm\") {\n        container.mousedown(function (ev) {self.onMouseDown(ev);});\n        container.click(function (ev) {\n          self.onClick(ev);\n        });\n      } else {\n        container.click(function (ev) {\n          self.onClickCanvas(ev);\n        });\n      }\n    }\n\n    if (self.properties.messageValidation) {\n      self.showValidationMessage(self.properties.messageValidation);\n    }\n\n    return container;\n  },\n\n  /*\r\n     *   Selects an element in order to keep consistency between renderings\r\n     */\n  selectElementByGuid: function selectElementByGuid(guids) {\n    var self = this;\n\n    for (var i = 0, l = guids.length; i < l; i++) {\n      var guid = guids[i];\n      var foundElement = self.findElement(guid);\n      if (foundElement) {\n        // If the element has been found, then select that element\n        foundElement.selectElement({ IsOnClickEvent: false });\n      }\n    }\n  },\n\n  /*\r\n     *   Finds an element by guid\r\n     */\n  findElement: function findElement(guid) {\n    var self = this;\n    if (!guid) {return null;}\n\n    if (self.properties.guid === guid) {\n      // Element found\n      return this;\n    } else {\n      // Find in children\n      for (var i = 0; i < self.children.length; i++) {\n        var foundElement = self.children[i].findElement(guid);\n        if (foundElement) return foundElement;\n      }\n    }\n\n    // Element not found\n    return null;\n  },\n\n  /*\r\n     *   Disable sortable plugin\r\n     */\n  disableSortablePlugin: function disableSortablePlugin() {\n    var self = this;\n\n    if (self.container && self.container.hasClass('ui-sortable')) {\n      if (self.container.data()[\"ui-sortable\"]) {\n        self.container.sortable('destroy');\n      }\n    }\n\n    for (var i = 0, l = self.children.length; i < l; i = i + 1) {\n      if (self.children[i].container) {\n        self.children[i].disableSortablePlugin();\n      }\n    }\n  },\n\n  /*\r\n     *  Selects the current element\r\n     */\n  selectElement: function selectElement(params) {\n    var self = this;\n    var container = self.container;\n\n    // Add selected class\n    container.addClass(\"ui-bizagi-container-selected\");\n\n    // Get current element boundaries for select element event\n    var position = container.offset();\n    $.extend(position, {\n      width: container.outerWidth(),\n      height: container.outerHeight() });\n\n\n    // Trigger select element handler\n    self.triggerGlobalHandler(\"selectelement\", $.extend(params, { position: position, guid: self.properties.guid, element: container, type: self.properties.type }));\n  },\n\n  /*\r\n     *  Un-selects the current element\r\n     */\n  unselectElement: function unselectElement(params) {\n    var self = this;\n    var container = self.container;\n\n    container.removeClass(\"ui-bizagi-container-selected\");\n\n    if (params) {\n      $.extend(params, { guid: self.properties.guid });\n    }\n\n    // Trigger unselect element handler\n    self.triggerGlobalHandler(\"unselectelement\", params);\n  },\n\n  /*\r\n     *   \r\n     */\n  configureSortablePlugin: function configureSortablePlugin(container) {\n    var self = this;\n    var mainPanel = self.triggerGlobalHandler(\"getMainPanel\", {});\n    var viewID = self.triggerGlobalHandler(\"getViewID\");\n\n    var formModelerSelector = 'form-modeler[id=\"' + viewID + '\"]';\n\n    // Decorate with class to allow sortable connections\n    container.addClass(\"ui-bizagi-container-connectedSortable\");\n\n    // Define handlers\n    container.bind(\"sortstart\", function (ev, args) {self.onSortStart(args);});\n    container.bind(\"sortstop\", function (ev, args) {self.onSortFinish(args);});\n    container.bind(\"sort\", function (ev) {self.onScrollingForm(mainPanel, ev);});\n    container.bind(\"sortactivate\", function (ev, ui) {\n      self.currentDragSource = self.getDragSource(ui.item);\n    });\n\n    var items = \"> .ui-bizagi-draggable-item\";\n\n    // Apply sortable plugin\n    container.sortable({\n      items: items,\n      revert: false,\n      connectWith: formModelerSelector + \" .ui-bizagi-container-connectedSortable:not(.ui-sortable-helper)\",\n      distance: 10,\n      cursorAt: { top: 0, left: 0 },\n      placeholder: \"ui-bizagi-placeholder\",\n      delay: 10,\n      cancel: self.getMode() === \"layout\" ? \".bz-form-item, .ui-bizagi-input-editable\" : \".ui-bizagi-input-editable, .ui-bizagi-grid-cell\",\n      containment: mainPanel,\n\n      helper: function helper(event, ui) {\n        var $template = self.sortableHelper(ui);\n        var $container = $(this);\n        setTimeout(function () {\n          $container.sortable(\"refreshPositions\");\n        }, 10);\n\n        return $template;\n      },\n      start: function start() {\n        mainPanel && mainPanel.addClass('ui-start-drag');\n      },\n      stop: function stop() {\n        mainPanel && mainPanel.removeClass('ui-start-drag');\n      },\n      beforeStop: function beforeStop() {\n        window.x3 = $('#mtool-container-helper');\n      } }).\n    disableSelection();\n\n    // Load helper template\n    self.loadHelperTemplate();\n  },\n\n  /*\r\n     *   Connects to another sortable container\r\n     */\n  setConnectWith: function setConnectWith(parent, guid) {\n    var self = this,\n    classConnect;\n\n    if (typeof parent === \"undefined\") {\n      return;\n    }\n\n    classConnect = \".ui-bizagi-container-connectedSortable\";\n    classConnect = classConnect + \"[id!= \" + guid + \"]\";\n    if (parent.container && parent.container.hasClass(\"ui-sortable\")) {\n      if (parent.container.data()[\"ui-sortable\"]) {\n        parent.container.sortable(\"option\", \"connectWith\", classConnect);\n      }\n    }\n\n\n    self.setConnectWith(parent.parent, guid);\n  },\n\n  /*\r\n     *   Add draggable class, and styles\r\n     */\n  addDraggableClassToContainer: function addDraggableClassToContainer() {\n    var self = this;\n\n    // Check if the container is draggable or not\n    if (self.isContainerDraggable()) {\n      // Add container draggable styles\n      self.container.addClass(\"ui-bizagi-draggable-item\");\n      self.container.addClass('ui-dashed-layout');\n      var conteinerType = self.properties.type;\n\n      if (conteinerType === \"horizontal\") {\n        var $containerPanel = $('> .bz-layout-col', self.container);\n\n        $.each($containerPanel, function () {\n          var $child = $(this);\n          if ($child.children().length === 0) {$child.append('<div class=\"children\"></div>');}\n        });\n\n      }\n\n      if (self.container.hasClass('ui-dashed-layout')) {\n        self.container.data('display', 'Layout');\n        self.container.data('type', 'layout');\n      }\n\n\n      // Add hovering style\n      $('> .ui-bizagi-container-panel', self.container).mouseenter(function () {$(this).addClass('ui-col-hover');}).mouseleave(function () {$(this).removeClass('ui-col-hover');});\n    }\n  },\n\n  /*\r\n     *   Check if the container can be draggable or not\r\n     */\n  isContainerDraggable: function isContainerDraggable() {\n    var self = this;\n\n    // Don't allow draggable when the item is inside a nested form\n    if (self.isContainedInNestedForm() || self.isContainedInCollectionNavigator()) return false;\n\n    // Allow draggable in the following containers\n    var type = self.properties.type || \"form\";\n    type = self.normalizeType(type);\n\n    return [\"group\", \"section\", \"nestedForm\", \"tab\", \"horizontal\", \"contentPanel\", \"collectionnavigator\"].includes(type);\n  },\n\n  /*\r\n     *   Check if the container can be sortable or not\r\n     */\n  isContainerSortable: function isContainerSortable() {\n    var self = this;\n\n    // Don't allow sortable when the item is inside a nested form\n    if (self.isContainedInNestedForm() || self.isContainedInCollectionNavigator()) return false;\n\n    // Allow sortable in the following containers\n    var type = self.properties.type || \"form\";\n    type = self.normalizeType(type);\n\n    return [\"form\", \"group\", \"panel\", \"tabItem\", \"queryForm\", \"searchForm\", \"contentPanel\", \"offlineForm\", \"adhocForm\"].includes(type);\n  },\n\n  /*\r\n     *   Filter sortable depending current execution mode\r\n     */\n  isElementSortAllowed: function isElementSortAllowed(item) {\n    var self = this,\n    mode = self.getMode();\n\n    if (mode === \"layout\") {\n      if (item.hasClass('bz-form-item')) {return false;}\n    }\n\n    return true;\n  },\n\n  /*\r\n     *   Check if this container can be clicked or not depending the execution mode\r\n     */\n  isClickEventAllowed: function isClickEventAllowed() {\n    var self = this,\n    mode = self.getMode(),\n    result = true;\n\n    // Don't allow clicks when the item is inside a nested form\n    if (self.isContainedInNestedForm() || self.isContainedInCollectionNavigator()) return false;\n\n    var type = self.properties.type || \"form\";\n    type = self.normalizeType(type);\n    if (mode == \"design\") {\n      // Check in design mode\n      //if (type == \"form\" || type == \"horizontal\" || type == \"panel\" || type == \"searchForm\") { return false; }\n      if (type == \"panel\") {return false;}\n\n    } else if (mode === \"layout\") {\n      // Check in layout mode\n      if ([\"form\", \"group\", \"section\", \"panel\", \"tab\", \"tabItem\", \"contentPanel\"].includes(type)) {return false;}\n    }\n\n    return result;\n  },\n\n  /*\r\n     *   Draws the sortable helper when draggin a container\r\n     */\n  sortableHelper: function sortableHelper(sortableElement) {\n    var self = this;\n\n    // Makes sure the helper template has been loaded\n    if (!self.helperTemplate) return null;\n\n    // Decorate current dragging element with a class\n    sortableElement.addClass('ui-dragging');\n\n    // Extract data from element\n    var data = sortableElement.data();\n    var type = data.type ? data.type.toLowerCase() : \"render\";\n    var id = data.guid;\n    var caption = data.display;\n\n    var icon = self.triggerGlobalHandler(\"getControlIcon\", { type: type, id: id });\n    var mainContainer = self.triggerGlobalHandler(\"getMainContainer\", {});\n\n\n    if (!caption || caption === '') {\n      caption = type;\n    }\n\n    // Draw the helper\n    var element = $.tmpl(self.helperTemplate, { id: type, caption: caption, icon: icon });\n    var wrapperMainScroll = $('.wrapper-main-scroll', mainContainer);\n    var sortableHelper = element.appendTo(wrapperMainScroll).css({ 'zIndex': 900 });\n\n    // Adjust size\n    var widthLabel = parseFloat($('label', sortableHelper).width());\n    var widthIcon = parseFloat($('.biz-ico', sortableHelper).eq(0).width());\n    var widthTotal = widthLabel + widthIcon + 40 + 'px';\n    sortableHelper.css('width', widthTotal);\n\n    return sortableHelper;\n  },\n\n  /*\r\n     *   Loads the helper template\r\n     */\n  loadHelperTemplate: function loadHelperTemplate() {\n    var self = this;\n\n    // Load helper template and return deferred\n    return $.when(\n    bizagi.templateService.getTemplate(bizagi.getTemplate(\"bizagi.editor.component.renderingview\").concat(\"#bizagi-render-drag-helper\"))).\n    pipe(function (tmpl) {\n      self.helperTemplate = tmpl;\n      return self.helperTemplate;\n    });\n  },\n\n  /*\r\n     *   Evaluates the drag source based on the item\r\n     */\n  getDragSource: function getDragSource(item) {\n    var result = {\n      container: false,\n      toolbar: false,\n      xpathNavigator: false,\n      layout: false,\n      data: null };\n\n\n    if ($(item).hasClass(\"ui-bizagi-render\") || $(item).hasClass(\"ui-bizagi-container\")) {\n      // Render source\n      result.container = true;\n      result.data = { guid: $(item).parents(\".ui-bizagi-container\").first().data(\"guid\") };\n\n    } else if ($(item).hasClass(\"mtool-item\")) {\n      // Controls navigator source\n      result.toolbar = true;\n      result.data = $(item).data(\"render\");\n\n    } else if ($(item).hasClass(\"bizagi_editor_xpathnavigator_data\")) {\n      // Xpath navigator source\n      result.xpathNavigator = true;\n      result.data = $(item).data();\n\n    } else if ($(item).hasClass(\"bz-fm-layout-navigator-item\")) {\n      // layout navigator source\n      result.layout = true;\n      result.data = $(item).data(\"id\");\n    }\n\n    return result;\n  },\n\n  /* \r\n     *   Hides / Show container \r\n     */\n  changeVisibility: function changeVisibility(argument) {\n    var self = this;\n    var properties = self.properties;\n\n    // Store in properties\n    properties.visible = bizagi.util.parseBoolean(argument);\n\n    // Hide - show the render\n    if (properties.visible) {\n      $(self.container).removeClass(\"ui-state-disabled\");\n\n    } else {\n      $(self.container).addClass(\"ui-state-disabled\");\n    }\n  },\n\n  /*\r\n     * Return true if the container isn't empty\r\n     */\n  hasChildren: function hasChildren() {\n    return this.children.length > 0;\n  },\n\n\n  /*\r\n     *   EVENT HANDLERS\r\n     */\n  onScrollingForm: function onScrollingForm($mainPanel, ev) {\n\n  },\n\n  /*\r\n     *   Manages sort start event\r\n     */\n  onSortStart: function onSortStart(ui) {\n    var self = this;\n\n    // Save drag position\n    var index = $(ui.item).parent().children(\".ui-bizagi-itemfordrag\").index(ui.item);\n    ui.item.data(\"start-position\", index);\n\n    // Save parent source        \n    var sourceContainer = $(ui.item).parents(\".bz-container\").first().data(\"guid\") ||\n    self.triggerGlobalHandler(\"getparentid\", { guid: $(ui.item).data(\"guid\") });\n\n    ui.item.data(\"sourceContainer\", sourceContainer);\n\n    if (index >= 0) {\n      // Trigger event to callers\n      self.triggerGlobalHandler(\"sortstart\");\n    }\n  },\n\n  /*\r\n     *   Manages sort finish event\r\n     */\n  onSortFinish: function onSortFinish(ui) {\n    var self = this;\n\n\n    // Set a timer to avoid multiple drop bug at the same time\n    if (bizagi.sortContainerTimeout != null) {\n      return;\n    }\n    bizagi.sortContainerTimeout = setTimeout(function () {\n      bizagi.sortContainerTimeout = null;\n    }, 100);\n\n\n    var finalPosition = $(ui.item).parent().children(\".ui-bizagi-itemfordrag\").not(\".ui-sortable-placeholder\").index(ui.item),\n    targetContainer = $(ui.item).parents(\".bz-container\").first().data(\"guid\") || self.triggerGlobalHandler(\"getparentid\", { guid: $(ui.item).data(\"guid\") }),\n    initialPosition = ui.item.data(\"start-position\"),\n    sourceContainer = ui.item.data(\"sourceContainer\");\n\n    // Check if sort finish operation is available\n    if (self.isElementSortAllowed($(ui.item)) == false) {\n      self.container.sortable('cancel');\n      return false;\n    };\n\n    if (finalPosition >= 0) {\n      // Trigger sort finish event\n      self.triggerGlobalHandler(\"sortfinish\", {\n        source: self.currentDragSource,\n        initialPosition: initialPosition,\n        finalPosition: finalPosition,\n        sourceContainer: sourceContainer,\n        targetContainer: targetContainer });\n\n    }\n\n    return true;\n  },\n\n  onClickCanvas: function onClickCanvas(ev) {\n    var self = this;\n\n    // Cancel bubble\n    ev.stopImmediatePropagation();\n\n    $(\".bz-form-item\").removeClass(\"ui-state-active\");\n    $(\".ui-bizagi-grid-cell\").removeClass(\"ui-state-active\");\n    $(\".bz-container\").removeClass(\"ui-bizagi-container-selected\");\n    $(\".bz-button--container\").removeClass(\"bz-state-active\");\n    self.unselectElement();\n\n    if (ev.button == 0 || ev.button == 1) {\n      self.triggerGlobalHandler(\"selectcontainerform\", {});\n    }\n  },\n\n\n  /*\r\n     *   Manages container click\r\n     */\n  onClick: function onClick(ev) {\n    var self = this,\n    container = self.container;\n\n    // Cancel bubble\n    ev.stopImmediatePropagation();\n\n    var isCtrlPressed = self.triggerGlobalHandler(\"checkCtrlKey\", {});\n    if (isCtrlPressed) {\n      // Toggle selection\n      if (container.hasClass(\"ui-bizagi-container-selected\")) {\n        self.unselectElement({ ctrlIsPressed: true });\n      } else {\n        self.selectElement({\n          IsOnClickEvent: true,\n          ctrlIsPressed: true });\n\n      }\n    } else {\n      if (ev.button == 0 || ev.button == 1) {\n        // Remove selected style to any render\n        $(\".bz-form-item\").removeClass(\"ui-state-active\");\n        $(\".bz-container\").not(container).removeClass(\"ui-bizagi-container-selected\");\n        $(\".bz-button--container\").removeClass(\"bz-state-active\");\n        // Toggle selection\n        if (container.hasClass(\"ui-bizagi-container-selected\")) {\n          self.unselectElement();\n        } else {\n          self.selectElement({ IsOnClickEvent: true });\n        }\n      }\n    }\n  },\n\n  /*\r\n     *   Manages mouse down event \r\n     */\n  onMouseDown: function onMouseDown(ev) {\n    var self = this;\n\n\n    if (ev.button == 0 || ev.button == 1) {\n      self.setConnectWith(self.parent, self.container.data(\"guid\"));\n\n    } else if (ev.button == 2) {\n      // Trigger element right click event\n      self.triggerGlobalHandler(\"elementrightclick\", { guid: self.properties.guid, position: { x: ev.clientX, y: ev.clientY } });\n\n      // Prevent default behaviour\n      ev.preventDefault();\n      ev.stopPropagation();\n      return false;\n    }\n  },\n\n  normalizeType: function normalizeType(type) {\n    return type.\n    replace(/smartphone/, '').\n    replace(/tablet/, '').\n    replace(/offline/, '');\n  },\n\n  /*\r\n     *   Show validation messages\r\n     */\n  showValidationMessage: function showValidationMessage(messages) {\n    var self = this;\n    var message = messages.split('</br>')[0];\n    if (message) {self.setValidationMessage(message);}\n  },\n\n  getContainerMessage: function getContainerMessage() {\n    if (!this.containerMessage)\n    this.containerMessage = $(\".bz-container-message__text\", this.container.next(\"[data-parent=\" + this.properties.uniqueId + \"]\"));\n\n    return this.containerMessage;\n  },\n\n  setValidationMessage: function setValidationMessage(message) {\n    var self = this;\n\n    if (typeof this.container !== \"undefined\") {\n      var $message = self.getContainerMessage();\n\n      if (message && message.length > 0) {\n        message = message.replace(/<\\w+>([^<]*)<\\/\\w+>/g, \"$1\");\n\n        $message.attr(\"data-error\", message);\n        $message.text(message);\n        this.container.addClass(\"bz-container--error\");\n      } else {\n        $message.text(\"\");\n        this.container.removeClass(\"bz-container--error\");\n      }\n    }\n  } });","\n/*\r\n*   @tittle: BizAgi FormModeler Editor Hacks Rendering Render\r\n*   @authors: Alexander Mejia\r\n\t@date: 06-mar-12\r\n*   @Comments:\r\n*   -   This script will define basic stuff for enable the rendering render\r\n*\t\tin the formModeler\r\n*/\n\nbizagi.rendering.tablet.render.original = $.extend(true, {}, bizagi.rendering.tablet.render.prototype);\n$.extend(bizagi.rendering.tablet.render.prototype, {\n\n  /*\r\n                                                     *   Renders the current element\r\n                                                     *   Also adds draggable behaviour, and selection handlers\r\n                                                     */\n  postRenderElement: function postRenderElement(element) {\n    var self = this,\n    properties = self.properties;\n\n    // Call original method\n    bizagi.rendering.tablet.render.original.postRenderElement.apply(this, arguments);\n\n    // If the current form is readonly return;\n    if (self.isReadOnlyForm()) {\n      return element;\n    }\n\n    // Add guid to DOM\n    element.attr(\"guid\", self.properties.guid);\n\n    if (self.getFormType() == 'template') {\n      return self.configureLayoutElement(element);\n    }\n\n    // If the render is inside a nested form don't allow any events\n    if (!self.isContainedInNestedForm() && !self.isContainedInCollectionNavigator()) {\n\n      // Add mouse down handler\n      self.setMouseDownEvent(element);\n\n      // Add dragabble class\n      if (!self.isContainedInGrid()) {\n        element.addClass(\"ui-bizagi-draggable-item\");\n        element.addClass(\"ui-bizagi-itemfordrag\");\n      }\n\n      var renderSearch = $('.ui-bizagi-render-search', element);\n      if (renderSearch.length > 0) {\n        renderSearch.parent().addClass('ui-bizagi-display-as-search');\n      }\n\n      if (self.isClickEventAllowed()) {\n        var labelElement;\n        var type = self.properties.type || \"\";\n        type = type.replace('tablet', '');\n\n        if (self.getMode() == \"design\" && type == \"grid\") {\n          labelElement = self.getLabelGrid();\n        } else {\n          labelElement = self.getLabel();\n        }\n\n        // Add click handlers\n        element.click(function (ev) {\n          self.onRenderClick(ev, element);\n        });\n\n        if (!bizagi.form.modeler.params.reviewMode) {\n          labelElement && labelElement.dblclick(function () {\n            self.onLabelDoubleClick(labelElement);\n          });\n        }\n      }\n    }\n\n    if (self.properties.messageValidation) {\n      // if is a column control, the message is added at parent grid\n      if (self.column) {\n        self.parent.properties.messageValidation += self.properties.displayName + ' - ' + self.properties.messageValidation;\n      }\n      self.showValidationMessage(self.properties.messageValidation);\n    }\n\n    element.data({\n      guid: self.properties.guid,\n      display: self.properties.displayName,\n      type: self.properties.type });\n\n\n    return self.resetStyle(element);\n  },\n\n\n  /*\r\n     * Set several options used in template mode\r\n     */\n  configureLayoutElement: function configureLayoutElement(element) {\n    var self = this;\n\n    self.configureDroppablePlugin(element);\n    self.configureDraggablePlugin(element);\n\n    // Add click handlers\n    element.click(function (ev) {\n      self.onRenderClick(ev, element);\n    });\n\n    element.dblclick(function () {\n      self.onLabelDoubleClick(element);\n    });\n\n    element.\n    find('.biz-template-editor-render-hide-control').\n    click(function (ev) {\n      self.onRemoveElement(ev, element);\n    });\n\n    self.setDeleteLayoutItem(element);\n\n    return element;\n  },\n\n  /*\r\n     * Enable handler to allow delete an repeteable item or o layout item\r\n     */\n  setDeleteLayoutItem: function setDeleteLayoutItem(element) {\n    var self = this,\n    type = self.properties.type,\n    hoverElement = $(\"<span class='biz-icon biz-tmpl-delete pull-right bz-studio bz-delete_16x16_standard'></span>\"),\n    hoverRestoreElement = $(\"<span class='biz-icon biz-tmpl-delete pull-right bz-studio bz-undo_16x16_black'></span>\"),\n    parent = element.closest('[id]');\n\n\n    // Wait to template is rendered\n    setTimeout(function () {\n      // If the element \n      if (parent.length == 0 && self.triggerGlobalHandler(\"isDeleteOptionAllowed\", { guid: self.properties.guid })) {\n        element.addClass('hover-applied');\n\n\n        element.hover(function () {\n          $(this).append(hoverRestoreElement);\n        }, function () {\n          $(this).find(\"span.biz-tmpl-delete\").detach();\n        });\n\n        (function () {\n          hoverRestoreElement.click(function () {\n            // Trigger element right click event\n            self.triggerGlobalHandler(\"restoreItem\", { guid: self.properties.guid });\n          });\n        })();\n      }\n      // if the elements is a repeater item\n      else {\n          if (parent.attr('id') == undefined) {return;}\n          if (parent.hasClass('hover-applied')) {return;}\n\n          parent.addClass('hover-applied');\n          parent.hover(function () {\n            $(this).append(hoverElement);\n          }, function () {\n            $(this).find(\"span.biz-tmpl-delete\").detach();\n          });\n\n          (function (parent) {\n            hoverElement.click(function () {\n              // Trigger element right click event\n              self.triggerGlobalHandler(\"deleteRepeaterItem\", { guid: parent.attr('id') });\n            });\n          })(parent);\n        }\n    }, 10);\n\n  },\n\n  /*\r\n     * Apply draggable plugin\r\n     */\n  configureDraggablePlugin: function configureDraggablePlugin(element) {\n    var self = this;\n\n    element.draggable({\n      helper: 'clone',\n      zIndex: 9999,\n      opacity: 0.75,\n      cursorAt: { left: 5 },\n      containment: 'document',\n      cancel: '.biz-template-editor-render-placeholder',\n      start: function start(event, ui) {\n        $(ui.helper).data('isLayoutElement', true);\n      } });\n\n  },\n\n\n  /*\r\n     * Apply droppable plugin\r\n     */\n  configureDroppablePlugin: function configureDroppablePlugin(element) {\n    var self = this;\n\n    element.droppable({\n      hoverClass: \"ui-state-highlight\",\n      tolerance: \"pointer\",\n      activeClass: 'ui-editor-highlight',\n      greedy: true,\n      drop: function drop(event, ui) {\n        $(this).addClass('ui-state-highlight');\n      },\n      activate: function activate() {\n        self.getFormContainer().\n        container.\n        find(\"[noShow='true']\").\n        show();\n      },\n      deactivate: function deactivate() {\n        self.getFormContainer().\n        container.\n        find(\"[noShow='true']\").\n        hide();\n      } });\n\n\n    element.on(\"drop\", function (ev, ui) {self.onDrop(ui);});\n  },\n\n\n  getLabelGrid: function getLabelGrid() {\n    return $(\".bz-mobile-grid__header-title\", this.element);\n  },\n\n  resetStyle: function resetStyle(el) {\n    var element = el,self = this;\n    var colorText = element.css('color');\n    var backgroundColor = element.css('background-color');\n\n    if (colorText == 'black') {element.css('color', '');}\n    if (backgroundColor == 'white') {element.css('background-color', '');}\n\n    return element;\n  },\n\n  /*\r\n     *  Selects the current element\r\n     */\n  selectElement: function selectElement(params) {\n    var self = this,options;\n    var properties = self.properties;\n\n    if (self.element) {\n      // Add selected class\n      self.element.addClass(\"ui-state-active\");\n\n      // Get current element boundaries for select element event\n      var position = self.element.offset();\n      $.extend(position, {\n        width: self.element.outerWidth(),\n        height: self.element.outerHeight() });\n\n\n      // Trigger select element handler\n      options = $.extend(params, {\n        position: position,\n        guid: self.properties.guid,\n        element: self.element,\n        type: self.properties.type,\n        isInternal: properties.isInternal });\n\n      self.triggerGlobalHandler(\"selectelement\", options);\n    }\n  },\n\n  /*\r\n     *  Un-selects the current element\r\n     */\n  unselectElement: function unselectElement(params) {\n    var self = this;\n\n    // Remove selected class\n    self.element.removeClass(\"ui-state-active\");\n\n    if (params) {\n      $.extend(params, { guid: self.properties.guid });\n    }\n\n    // Trigger unselect element handler\n    self.triggerGlobalHandler(\"unselectelement\", params);\n  },\n\n\n  /*\r\n     *   Check if this container can be clicked or not depending the execution mode\r\n     */\n  isClickEventAllowed: function isClickEventAllowed() {\n    var self = this;\n    var mode = self.getMode();\n\n    // If is design and not a column\n    if (mode === \"design\" && !(self.column || self.isColumn)) return true;\n    return false;\n  },\n\n\n\n  /*\r\n     *   Configure mouse down handler\r\n     */\n  setMouseDownEvent: function setMouseDownEvent(element) {\n    var self = this;\n\n\n    if (self.isClickEventAllowed()) {\n\n      // Add mouse down handler\n      element.bind('mousedown.contextmenu', function (e) {\n        if (e.button == 2) {\n          // Trigger element right click event\n          self.triggerGlobalHandler(\"elementrightclick\", {\n            guid: self.properties.guid,\n            position: {\n              x: e.clientX,\n              y: e.clientY } });\n\n\n\n          // Prevent default behaviour\n          e.preventDefault();\n          e.stopPropagation();\n          return false;\n        }\n\n        return true;\n      });\n    }\n  },\n\n  /*\r\n     *   Overrides visibility change to avoid hiding the element when not visible\r\n     */\n  changeVisibility: function changeVisibility(argument) {\n    var self = this,\n    properties = self.properties;\n\n    if (bizagi.util.parseBoolean(argument) == true) {\n      $(self.element).removeClass(\"ui-state-disabled\");\n    } else {\n      $(self.element).addClass(\"ui-state-disabled\");\n    }\n\n    // Update properties\n    properties.visible = argument;\n  },\n\n  /*\r\n     *   Show validation messages\r\n     */\n  showValidationMessage: function showValidationMessage(messages) {\n    var self = this;\n    var message = messages.split('</br>')[0];\n    if (message) {self.setValidationMessage(message);}\n  },\n\n  /*\r\n     *   Manages render clicks\r\n     */\n  onRenderClick: function onRenderClick(ev, element) {\n    var self = this;\n\n    // Stop bubbling and default behaviour\n    ev.stopPropagation();\n    ev.preventDefault();\n\n    // Enable / disable selected style\n    var isCtrlPressed = self.triggerGlobalHandler(\"checkCtrlKey\", {});\n    if (isCtrlPressed) {\n      // Toggle selection\n      if (element && element.hasClass(\"ui-state-active\")) {\n        self.unselectElement({ ctrlIsPressed: true });\n      } else {\n        // fix for SUITE-7498\n        if ($(document.activeElement).is(\"input\") && $(document.activeElement).closest(\".bizagi_editor_component_properties\").length > 0) {\n          $(document.activeElement).trigger(\"blur\");\n          $(\".bizagi_editor_component_properties\").hide();\n        }\n\n        self.selectElement({\n          IsOnClickEvent: true,\n          ctrlIsPressed: true });\n\n      }\n    } else {\n      if (ev.button == 0 || ev.button == 1) {\n        // Remove all render selections\n        $(\".bz-form-item\").not(element).removeClass(\"ui-state-active\");\n        $(\".ui-bizagi-grid-cell\").not(element).removeClass(\"ui-state-active\");\n        $(\".ui-bizagi-button\").not(element).removeClass(\"bz-state-active\");\n        $(\".bz-container\").removeClass(\"ui-bizagi-container-selected\");\n        $(\".ui-bizagi-render-layout\").not(element).removeClass(\"ui-state-active\");\n        $(\".bz-button--container\").not(element).removeClass(\"bz-state-active\");\n      }\n\n      // Toggle selection\n      if (element && element.hasClass(\"ui-state-active\")) {\n        self.unselectElement();\n      } else {\n        // fix for SUITE-7498\n        if ($(document.activeElement).is(\"input\") && $(document.activeElement).closest(\".bizagi_editor_component_properties\").length > 0) {\n          $(document.activeElement).trigger(\"blur\");\n          $(\".bizagi_editor_component_properties\").hide();\n        }\n\n        self.selectElement({ IsOnClickEvent: true });\n      }\n    }\n  },\n\n  /*\r\n     *   Manages label double click event\r\n     */\n  onLabelDoubleClick: function onLabelDoubleClick(labelElement) {\n    var self = this;\n\n    // In template context there are some elements (ex image) that can't change the label\n    if (self.triggerGlobalHandler(\"canChangeLabel\", { guid: self.properties.guid })) {\n\n      // Publish label edition event\n      self.triggerGlobalHandler(\"startlabeledition\");\n\n      // Create editable label component\n      var presenter = new bizagi.editor.component.editableLabel.presenter({\n        label: labelElement,\n        value: self.properties.displayName });\n\n\n      // Bind change event\n      presenter.subscribe(\"change\", function (ev, args) {\n        self.triggerGlobalHandler(\"changelabel\", { guid: self.properties.guid, value: args.value });\n      });\n\n      presenter.subscribe(\"finish\", function () {\n        self.triggerGlobalHandler(\"finishlabeledition\");\n      });\n\n      // Render label\n      presenter.render();\n    }\n  },\n\n  /*\r\n     *   Manages hide click event for layout elements\r\n     */\n  onRemoveElement: function onRemoveElement(ev, element) {\n    var self = this;\n\n    self.triggerGlobalHandler(\"hideElement\", { guid: self.properties.guid });\n  },\n\n  /*\r\n     *   Show the label editor and update the element\r\n     */\n  showElementLabelEditor: function showElementLabelEditor() {\n    var self = this;\n\n    if (!(self.element.find(\".ui-bizagi-container-input-editable > input.ui-bizagi-input-editable\").length > 0)) {\n      $('label', self.element).trigger('dblclick');\n    }\n  },\n\n  /*\r\n     *   Manages drop event\r\n     */\n  onDrop: function onDrop(ui) {\n    var self = this;\n\n    var $sourceElement = $(ui.draggable);\n    var $helperElement = $(ui.helper);\n    var data = $sourceElement.data();\n    var helperData = $helperElement.data();\n\n    var xpathValue = bizagi.editor.utilities.buildComplexXpath(data.xpath, data.contextScope, data.isScopeAttribute, data.guidRelatedEntity);\n\n    // Trigger sort finish event\n    self.triggerGlobalHandler(\"dropfinish\", {\n      guid: self.properties.guid,\n      property: 'xpath',\n      value: xpathValue,\n      renderType: data.nodeSubtype,\n      sourceGuid: helperData && helperData.isLayoutElement ? $helperElement.attr('guid') : false });\n\n  } });","/**\r\n *   Name: Bizagi Form Modeler Group Extension\r\n *   Author: Alexander Mejia\r\n *   Comments:\r\n *   -   This script will redefine the group class to adjust to form modeler\r\n */\n\nbizagi.rendering.tablet.group.original = $.extend(true, {}, bizagi.rendering.tablet.group.prototype);\n$.extend(bizagi.rendering.tablet.group.prototype, {\n\n  /**\r\n                                                     * Template method to implement in each device to customize each container after processed\r\n                                                     * @param {} group \r\n                                                     * @returns {} \r\n                                                     */\n  postRenderContainer: function postRenderContainer(group) {\n    var self = this;\n\n    // Call original method        \n    bizagi.rendering.tablet.group.original.postRenderContainer.apply(this, arguments);\n\n    if (\n    !self.hasChildren() &&\n    !self.isContainedInNestedForm() &&\n    !self.isContainedInCollectionNavigator())\n    {\n      var $content = $('.bz-collapsible__content', group);\n      $content.append('<div class=\"children\"></div>');\n    }\n\n    // If the current form is readonly return;\n    if (self.isReadOnlyForm()) return;\n\n    // Bind header double click\n    var header = group.find(\".bz-collapsible__header\");\n\n    if (!self.isInNestedform()) {\n      header.dblclick(function () {\n        // Publish label edition event\n        self.triggerGlobalHandler(\"startlabeledition\");\n\n        // Create editable label component\n        var presenter =\n        new bizagi.editor.component.editableLabel.presenter({\n          label: header,\n          value: self.properties.displayName });\n\n\n        // Bind change event\n        presenter.subscribe(\"change\", function (ev, args) {\n          self.triggerGlobalHandler(\"changelabel\", { guid: self.properties.guid, value: args.value });\n        });\n\n        presenter.subscribe(\"finish\", function () {\n          self.triggerGlobalHandler(\"finishlabeledition\");\n        });\n        // Render label\n        presenter.render();\n      });\n    }\n\n    var guid = self.properties.guid;\n    setTimeout(function () {\n      var lastElementInserted = self.triggerGlobalHandler(\"getLastInsertedElement\");\n\n      if (guid == lastElementInserted) {\n        self.showElementLabelEditor();\n        self.triggerGlobalHandler(\"setLastInsertedElement\", null);\n      }\n    }, 0);\n  },\n\n  /**\r\n      * Disable sortable plugin\r\n      * @returns {} \r\n      */\n  disableSortablePlugin: function disableSortablePlugin() {\n    var self = this;\n    var container = self.container.find('> .bz-collapsible__content');\n\n    if (container && container.hasClass('ui-sortable')) {\n      if (container.data()[\"ui-sortable\"]) {\n        container.sortable('destroy');\n      }\n    }\n\n    for (var i = 0, l = self.children.length; i < l; i = i + 1) {\n      if (self.children[i].container) {\n        self.children[i].disableSortablePlugin();\n      }\n    }\n  },\n\n  /**\r\n      * Configure  sortable plugin\r\n      * @param {} container \r\n      * @returns {} \r\n      */\n  configureSortablePlugin: function configureSortablePlugin(container) {\n    container = container.find('> .bz-collapsible__content');\n\n    return bizagi.rendering.tablet.group.original.configureSortablePlugin.apply(this, arguments);\n  },\n\n  /**\r\n      * Check is in Nestedform\r\n      * Fix for SUITE-6665\r\n      * @returns {} \r\n      */\n  isInNestedform: function isInNestedform() {\n    var self = this;\n    var parent = self.parent;\n    var properties = self.properties;\n    var result = false;\n\n    do {\n      if (properties.type === \"nestedForm\" || properties.type === \"collectionnavigator\") {\n        result = true;\n        break;\n      } else {\n        properties = parent.properties;\n        parent = parent.parent;\n      }\n    } while (parent !== undefined);\n\n    return result;\n  },\n\n  /**\r\n      * Show the label editor and update the element\r\n      * @returns {} \r\n      */\n  showElementLabelEditor: function showElementLabelEditor() {\n    var self = this;\n\n    var $header = self.container.find(\".bz-collapsible__header\");\n    $header.trigger('dblclick');\n  } });","/**\r\n *   Name: Bizagi Form Modeler Group Extension\r\n *   Author: Alexander Mejia\r\n *   Comments:\r\n *   -   This script will redefine the group class to adjust to form modeler\r\n */\n\nbizagi.rendering.tablet.section.original = $.extend(true, {}, bizagi.rendering.tablet.section.prototype);\n$.extend(bizagi.rendering.tablet.section.prototype, {\n\n  /**\r\n                                                       * Template method to implement in each device to customize each container after processed\r\n                                                       * @param {} section \r\n                                                       * @returns {} \r\n                                                       */\n  postRenderContainer: function postRenderContainer($section) {\n    var self = this;\n\n    // Call original method        \n    bizagi.rendering.tablet.section.original.postRenderContainer.apply(this, arguments);\n\n    // If the current form is readonly return;\n    if (self.isReadOnlyForm()) return;\n\n    // Bind header double click\n    var $header = $section.find(\".bz-section__header > span\");\n\n    if (self.parent &&\n    self.parent.properties &&\n    self.parent.properties.type &&\n    bizagi.util.normalizeType(self.parent.properties.type) === \"group\") {\n      $(\".bz-collapsible__content\", self.parent.container).css({ 'overflow': 'initial' });\n    }\n\n    if (!self.isInNestedform()) {\n      $header.dblclick(function () {\n        // Publish label edition event\n        self.triggerGlobalHandler(\"startlabeledition\");\n\n        // Create editable label component\n        var presenter =\n        new bizagi.editor.component.editableLabel.presenter({\n          label: $header,\n          value: self.properties.displayName });\n\n\n        // Bind change event\n        presenter.subscribe(\"change\", function (ev, args) {\n          self.triggerGlobalHandler(\"changelabel\", { guid: self.properties.guid, value: args.value });\n        });\n\n        presenter.subscribe(\"finish\", function () {\n          self.triggerGlobalHandler(\"finishlabeledition\");\n        });\n        // Render label\n        presenter.render();\n      });\n\n      // Allow sortable connections in sections\n      $section.droppable({\n        accept: \".ui-bizagi-draggable-item\",\n        hoverClass: \"ui-bizagi-section-drop-hover\",\n        tolerance: \"pointer\",\n        drop: function drop(event, ui) {self.dropRender(event, ui);},\n        activate: function activate(event, ui) {\n          self.currentDragSource = self.getDragSource(ui.draggable);\n        } });\n\n    }\n\n    var guid = self.properties.guid;\n    setTimeout(function () {\n      var lastElementInserted = self.triggerGlobalHandler(\"getLastInsertedElement\");\n\n      if (guid == lastElementInserted) {\n        self.showElementLabelEditor();\n        self.triggerGlobalHandler(\"setLastInsertedElement\", null);\n      }\n    }, 0);\n  },\n\n  /**\r\n      * Check is in Nestedform\r\n      * Fix for SUITE-6665\r\n      * @returns {} \r\n      */\n  isInNestedform: function isInNestedform() {\n    var self = this;\n    var parent = self.parent;\n    var properties = self.properties;\n    var result = false;\n\n    do {\n      if (properties.type === \"nestedForm\" || properties.type === \"collectionnavigator\") {\n        result = true;\n        break;\n      } else {\n        properties = parent.properties;\n        parent = parent.parent;\n      }\n    } while (parent !== undefined);\n\n    return result;\n  },\n\n  /**\r\n      * Show the label editor and update the element\r\n      * @returns {} \r\n      */\n  showElementLabelEditor: function showElementLabelEditor() {\n    var self = this;\n\n    var $header = self.container.find(\".bz-section__header > span\");\n    $header.trigger('dblclick');\n  },\n\n  /*\r\n     *   Handles renders drop finish operation\r\n     */\n  dropRender: function dropRender(e, ui) {\n    var self = this;\n\n    // If the original event isn't mouseup returns\n    if (e.originalEvent.type !== \"mouseup\") {return;}\n\n    var finalPosition = self.children.length;\n    var targetContainer = self.properties.guid;\n    var initialPosition = ui.draggable ? ui.draggable.data(\"start-position\") : null;\n    var sourceContainer = ui.draggable ? ui.draggable.data(\"sourceContainer\") : null;\n    var source = self.currentDragSource;\n\n    if (bizagi.editor.utilities.isObject(source)) {\n\n      // Set a timer to avoid multiple drop bug at the same time\n      if (bizagi.sortContainerTimeout != null) {\n        return;\n      }\n      bizagi.sortContainerTimeout = setTimeout(function () {\n        bizagi.sortContainerTimeout = null;\n      }, 100);\n\n      // Trigger sort finish event\n      self.triggerGlobalHandler(\"sortfinish\", {\n        source: source,\n        initialPosition: initialPosition,\n        finalPosition: finalPosition,\n        sourceContainer: sourceContainer,\n        targetContainer: targetContainer });\n\n    }\n  } });","/*\r\n*   Name: Bizagi Form Modeler Panel Extension\r\n*   Author: UI Forms Team\r\n*   Comments:\r\n*   -   This script will redefine the panel class to adjust to form modeler\r\n*/\n\n\nbizagi.rendering.tablet.contentPanel.original = $.extend(true, {}, bizagi.rendering.tablet.contentPanel.prototype);\n$.extend(bizagi.rendering.tablet.contentPanel.prototype, {\n\n  /**\r\n                                                            * Template method to implement in each device to customize each container after processed\r\n                                                            */\n  postRenderContainer: function postRenderContainer($panel) {\n    var self = this;\n\n    // Call original post-render\n    bizagi.rendering.tablet.contentPanel.original.postRenderContainer.apply(this, arguments);\n\n    if (\n    !self.hasChildren() &&\n    !self.isContainedInNestedForm() &&\n    !self.isContainedInCollectionNavigator())\n    {\n\n      $panel.find('.panel__content').\n      append('<div class=\"children\"></div>');\n    }\n\n    // Add custom class just for form modeler\n    $panel.addClass(\"ui-bizagi-container-contentpanel-formmodeler\");\n\n    //bind header double click\n    var $header = $panel.find(\".ui-bizagi-container-contentpanel-header\");\n\n    $header.dblclick(function () {\n\n      $header.hide();\n\n      // Publish label edition event\n      self.triggerGlobalHandler(\"startlabeledition\");\n\n      // Create editable label component\n      var presenter = new bizagi.editor.component.editableLabel.presenter({\n        label: $header,\n        value: self.properties.displayName });\n\n\n      // Bind change event\n      presenter.subscribe(\"change\", function (ev, args) {\n        self.triggerGlobalHandler(\"changelabel\", { guid: self.properties.guid, value: args.value });\n      });\n\n      presenter.subscribe(\"finish\", function () {\n        self.triggerGlobalHandler(\"finishlabeledition\");\n      });\n\n      // Render label\n      $.when(presenter.render()).done(function () {\n        if (self.getElement().find(\".ui-bizagi-container-input-editable\").length == 0) {\n          setTimeout(function () {\n            $header.hide();\n            self.adjustEditLabel();\n          }, 100);\n        } else {\n          self.adjustEditLabel();\n        }\n      });\n    });\n\n  },\n\n  /**\r\n      * Disable sortable plugin\r\n      */\n  disableSortablePlugin: function disableSortablePlugin() {\n    var self = this;\n    var container = self.container.find('.ui-bizagi-container-contentpanel-wrapper');\n\n    if (container && container.hasClass('ui-sortable')) {\n      if (container.data()[\"ui-sortable\"]) {\n        container.sortable('destroy');\n      }\n    }\n\n    for (var i = 0, l = self.children.length; i < l; i++) {\n      if (self.children[i].container) {\n        self.children[i].disableSortablePlugin();\n      }\n    }\n  },\n\n  /**\r\n      * Configure  sortable plugin\r\n      * @param {} container \r\n      * @returns {} \r\n      */\n  configureSortablePlugin: function configureSortablePlugin(container) {\n    container = container.find('> .panel__content');\n\n    return bizagi.rendering.tablet.contentPanel.original.configureSortablePlugin.apply(this, arguments);\n  },\n\n  /**\r\n      * Adjust edit label\r\n      */\n  adjustEditLabel: function adjustEditLabel() {\n    var self = this;\n\n    self.getElement().find(\".ui-bizagi-container-input-editable\").css({\n      \"width\": \"95%\",\n      \"background-color\": \"orange\",\n      \"top\": \"-18px\",\n      \"border-radius\": \"10px\" });\n\n\n    self.getElement().find(\".ui-bizagi-container-input-editable input\").css({\n      \"margin-left\": \"5px\",\n      \"width\": \"90%\" });\n\n\n    self.getElement().find(\".ui-bizagi-render-confirmation\").css({\n      \"right\": \"10px\",\n      \"top\": \"5px\" });\n\n  },\n\n  /**\r\n      * Show label editor\r\n      */\n  showElementLabelEditor: function showElementLabelEditor() {\n    var self = this;\n\n    if (!(self.container.find(\".ui-bizagi-container-input-editable > input.ui-bizagi-input-editable\").length > 0)) {\n      self.container.find(\"span:first\").trigger('dblclick');\n    }\n  } });","/*\r\n*   Name: BizAgi Form Modeler Tab Extension\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will redefine the tab class to adjust to form modeler\r\n*/\n\n\nbizagi.rendering.tablet.tab.original = $.extend(true, {}, bizagi.rendering.tablet.tab.prototype);\n$.extend(bizagi.rendering.tablet.tab.prototype, {\n  /* \r\n                                                  *   Template method to implement in each device to customize each container after processed\r\n                                                  */\n  postRenderContainer: function postRenderContainer($tab) {\n    var self = this;\n    var properties = self.properties;\n\n    // Call original method        \n    bizagi.rendering.tablet.tab.original.postRenderContainer.apply(this, arguments);\n\n    // If the current form is readonly return;\n    if (self.isReadOnlyForm()) {\n      return;\n    }\n\n    var $addButton = $('<div class=\"bz-tab--add\"><svg class=\"ico_16x16\"><use xlink:href=\"#icon-plus\"></use></svg></div>');\n    var $offsetLeft = $('<div style=\"display: none;\"><svg class=\"ico_16x16 offset__left-indicator\"><use xlink:href=\"#icon-arrow-left\"></svg></div>');\n    var $offsetRigth = $('<div style=\"display: none;\"><svg class=\"ico_16x16 offset__right-indicator\"><use xlink:href=\"#icon-arrow-rigth\"></svg></div>');\n    var $tabContainer = $('.bz-tabs', $tab).first();\n\n    $tabContainer.\n    wrap('<div class=\"bz__tabs--container\"></div>').\n    before($offsetLeft).\n    after($addButton).\n    after($offsetRigth).\n    on('updatePositions', function (ev, info) {\n      setTimeout(function () {\n        var $container = $(ev.currentTarget);\n\n        self.updatePositions($offsetLeft, $offsetRigth);\n        self.updateErrorPositions($container);\n\n      }, 100);\n    });\n\n    $offsetLeft.click(function (event) {\n      event.stopPropagation();\n      var htmlTabELement = $('.bz-tabs', self.container);\n      htmlTabELement.scrollLeft(htmlTabELement.scrollLeft() - 15);\n      self.updatePositions($offsetLeft, $offsetRigth);\n    });\n\n    $offsetRigth.click(function (event) {\n      event.stopPropagation();\n      var htmlTabELement = $('.bz-tabs', self.container);\n      htmlTabELement.scrollLeft(htmlTabELement.scrollLeft() + 15);\n      self.updatePositions($offsetLeft, $offsetRigth);\n    });\n\n    // Add handlers if the tab isn't contained in a nested form\n    if (!self.isContainedInNestedForm() && !self.isContainedInCollectionNavigator()) {\n\n\n      // Add handler\n      $addButton.click(function (ev) {\n        ev.stopImmediatePropagation();\n        // Publish addtab event to the view\n        self.triggerGlobalHandler(\"addtab\", { guid: properties.guid });\n        return false;\n      });\n\n      // Assign tab headers to children\n      $.each(self.children, function (i, tabItem) {\n        var $tabHeader = $(\"li[data-reference= #ui-bizagi-tab-\" + tabItem.properties.guid + \"]\", $tab);\n        tabItem.setTabHeader($tabHeader);\n      });\n\n      // Make headers sortable\n      var header = $(\".bz-tabs\", $tab).first();\n      header.sortable({\n        items: \"li[data-reference]\",\n        revert: true,\n        distance: 10,\n        axis: \"x\",\n        cursorAt: { top: 0, left: 0 },\n        placeholder: \"bz-tab-placeholder\",\n        delay: 150,\n        start: function start(e, ui) {\n          self.sortStart(e, ui);\n        },\n        tolerance: \"pointer\",\n        stop: function stop(e, ui) {\n          self.sortFinish(e, ui);\n        } });\n\n    }\n\n    $tab.data({\n      guid: self.properties.guid,\n      display: self.properties.displayName,\n      type: self.properties.type });\n\n\n    $tab.on(\"tabsload\", function (event, ui) {\n      self.triggerGlobalHandler(\"controlRefreshCanvas\", {});\n    }).on(\"tabsactivate\", function (event, ui) {\n      self.triggerGlobalHandler(\"controlRefreshCanvas\", {});\n    });\n\n    setTimeout(function () {\n      self.updatePositions($offsetLeft, $offsetRigth);\n      self.removeSortableClass();\n\n      var idx = self.getActiveTab();\n      self.children[idx].addSortableClass();\n    }, 100);\n\n    var item = (self.children || []).find(function (item) {\n      if (item.properties && item.properties.messageValidation) return item;\n    });\n\n    if (item && item.properties && item.properties.messageValidation) {\n      self.showValidationMessage(item.properties.messageValidation);\n    }\n  },\n\n  /* Remove drag target class from inactive containers  */\n  removeSortableClass: function removeSortableClass() {\n    (this.children || []).forEach(function (item) {\n      item.removeSortableClass();\n    });\n  },\n\n  updatePositions: function updatePositions($offsetLeft, $offsetRigth) {\n    var $htmlTabELement = $('.bz-tabs', this.container).get(0);\n\n    $offsetLeft.css({ display: \"none\" });\n    $offsetRigth.css({ display: \"none\" });\n\n    if ($htmlTabELement.scrollLeft > 0) {\n      $offsetLeft.css({ display: \"flex\" });\n    }\n\n    if ($htmlTabELement.scrollWidth > $htmlTabELement.clientWidth + $htmlTabELement.scrollLeft + 30) {\n      $offsetRigth.css({ display: \"flex\" });\n    }\n  },\n\n  /*\r\n     *   Manages the drag start event when sorting the header tabs\r\n     */\n  sortStart: function sortStart(event, ui) {\n    var self = this;\n\n    var index = $(ui.item).parent().children(\"li[data-reference]\").not(\".bz-tab-placeholder\").index(ui.item);\n    ui.item.data(\"start-position\", index);\n    self.initialPosition = index;\n    return true;\n  },\n\n  /*\r\n     *   Manages the drag end event when sorting the header tabs\r\n     */\n  sortFinish: function sortFinish(event, ui) {\n    var self = this;\n    var index = $(ui.item).parent().children(\"li[data-reference]\").not(\".bz-tab-placeholder\").index(ui.item);\n\n    // Trigger sort finish event\n    self.triggerGlobalHandler(\"sortfinish\", {\n      source: {},\n      initialPosition: ui.item.data(\"start-position\") || self.initialPosition,\n      finalPosition: index,\n      sourceContainer: self.properties.guid,\n      targetContainer: self.properties.guid });\n\n    return true;\n  },\n\n  updateErrorPositions: function updateErrorPositions($container) {\n    var $currentTabItem = $container.find(\"li.active\");\n\n    $(\".bz-indicator-bar\", $container).removeClass(\"bz-indicator-bar--error\");\n\n    if ($currentTabItem && $currentTabItem.hasClass(\"bz-tab--error\")) {\n      $(\".bz-indicator-bar\", $container).addClass(\"bz-indicator-bar--error\");\n    }\n  } });","/*\r\n*   Name: BizAgi Form Modeler Tab Item Extension\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will redefine the tab item class to adjust to form modeler\r\n*/\n\nbizagi.rendering.tablet.tabItem.original = $.extend(true, {}, bizagi.rendering.tablet.tabItem.prototype);\n$.extend(bizagi.rendering.tablet.tabItem.prototype, {\n\n  /*\r\n                                                      *   Renders the current container\r\n                                                      *   Also adds sortable behaviour\r\n                                                      */\n  postRenderContainer: function postRenderContainer($container) {\n    var self = this;\n\n    // Call original postrRenderContainer\n    bizagi.rendering.tablet.tabItem.original.postRenderContainer.apply(this, arguments);\n\n    if (!self.hasChildren()) {\n      $container.append('<div class=\"children\"></div>');\n    }\n\n    $container.addClass('bz-tab-item');\n  },\n\n  /*\r\n     *   Renders the current container\r\n     *   Also adds sortable behaviour\r\n     */\n  setTabHeader: function setTabHeader($tabHeader) {\n    var self = this,\n    properties = self.properties;\n\n    // Add handlers if the tabitem isn't contained in a nested form\n    if (!self.isContainedInNestedForm() && !self.isContainedInCollectionNavigator()) {\n\n      // Delete handler\n      $(\".tab--delete\", $tabHeader).click(function () {\n        // Publish deletetab event to the view\n        self.triggerGlobalHandler(\"deletetab\", { guid: properties.guid });\n        return false;\n      });\n\n\n      $tabHeader.dblclick(function () {\n        if (!self.isEditableLabelActive()) {\n          self.editDisplayName($tabHeader);\n        }\n      }).click(function (ev) {\n        if (!self.isEditableLabelActive()) {\n          self.triggerGlobalHandler(\"showProperties\", { guid: self.properties.guid, redraw: true });\n        }\n      }).mousedown(function (ev) {\n        if (ev.button === 2) {\n          ev.stopImmediatePropagation();\n          if (!self.isEditableLabelActive()) {\n            self.triggerGlobalHandler(\"elementrightclick\", {\n              guid: self.properties.guid,\n              position: { x: ev.clientX, y: ev.clientY } });\n\n          }\n        }\n      });\n\n\n      // Allow sortable connections between tabs\n      /* tabHeader.droppable({\r\n          accept: \".ui-bizagi-draggable-item\",\r\n          hoverClass: \"ui-bizagi-tab-drop-hover\",\r\n          tolerance: \"pointer\",\r\n          drop: function (event, ui) { self.dropRender(event, ui); },\r\n          activate: function (event, ui) {\r\n              self.currentDragSource = self.getDragSource(ui.draggable);\r\n          }\r\n        }); */\n\n\n    }\n  },\n\n  /*\r\n     *   Change selected item\r\n     */\n  activate: function activate() {\n    var self = this;\n\n    // Call base\n    bizagi.rendering.tablet.tabItem.original.activate.apply(this, arguments);\n\n    self.parent.removeSortableClass();\n    self.addSortableClass();\n\n    // Publish activatetab event to the view\n    self.triggerGlobalHandler(\"activatetab\", { guid: self.properties.guid });\n  },\n\n  /* Remove drag target class from inactive containers  */\n  removeSortableClass: function removeSortableClass() {\n    this.container.removeClass('ui-bizagi-container-connectedSortable');\n  },\n\n  /* Make sure current container has connected sortable class */\n  addSortableClass: function addSortableClass() {\n    this.container.addClass('ui-bizagi-container-connectedSortable');\n  },\n\n  /*\r\n     * Edit the current display name\r\n     */\n  editDisplayName: function editDisplayName(tabHeader) {\n    var self = this;\n    var label = $(\"a\", tabHeader);\n\n    // Publish label edition event\n    self.triggerGlobalHandler(\"startlabeledition\");\n\n    // Create editable label component\n    var presenter = self.editableLabelPresenter = new bizagi.editor.component.editableLabel.presenter({\n      label: label,\n      value: self.properties.displayName });\n\n\n    // Bind change event\n    presenter.subscribe(\"change\", function (ev, args) {\n      self.triggerGlobalHandler(\"changelabel\", { guid: self.properties.guid, value: args.value });\n    });\n\n    presenter.subscribe(\"finish\", function () {\n      self.triggerGlobalHandler(\"finishlabeledition\");\n    });\n    // Bind keyup event\n    presenter.subscribe(\"keyup\", function (ev, args) {\n      // Extend tab header\n      tabHeader.find(\".ui-bizagi-container-input-editable\").width(bizagi.measureString(args.value) + 100);\n    });\n\n    // Render label\n    presenter.render();\n\n  },\n\n  /*\r\n     * Returns true if the editable label component is active\r\n     */\n  isEditableLabelActive: function isEditableLabelActive() {\n    var self = this;\n\n    if (self.editableLabelPresenter && self.editableLabelPresenter.editableLabel) {\n      return true;\n    }\n    return false;\n  },\n\n  /*\r\n     *   Handles renders drop finish operation\r\n     */\n  dropRender: function dropRender(e, ui) {\n    var self = this;\n\n    // If the original event isn't mouseup returns\n    if (e.originalEvent.type !== \"mouseup\") {\n      return;\n    }\n\n    var finalPosition = self.children.length;\n    var targetContainer = self.properties.guid;\n    var initialPosition = ui.draggable ? ui.draggable.data(\"start-position\") : null;\n    var sourceContainer = ui.draggable ? ui.draggable.data(\"sourceContainer\") : null;\n    var source = self.currentDragSource;\n\n    if (bizagi.editor.utilities.isObject(source)) {\n\n      // Set a timer to avoid multiple drop bug at the same time\n      if (bizagi.sortContainerTimeout != null) {\n        return;\n      }\n      bizagi.sortContainerTimeout = setTimeout(function () {\n        bizagi.sortContainerTimeout = null;\n      }, 100);\n\n      // Trigger sort finish event\n      self.triggerGlobalHandler(\"sortfinish\", {\n        source: source,\n        initialPosition: initialPosition,\n        finalPosition: finalPosition,\n        sourceContainer: sourceContainer,\n        targetContainer: targetContainer });\n\n    }\n  },\n\n  /**\r\n      * Show validation messages\r\n      * @param messages\r\n      */\n  showValidationMessage: function showValidationMessage(messages) {\n    // Prevent propagation\n  } });","/*\r\n*   Name: BizAgi Form Modeler Tab Extension\r\n*   Author: Alexander Mejia\r\n*   Comments:\r\n*   -   This script will redefine the search class to adjust to form modeler\r\n*/\n\n\nbizagi.rendering.tablet.search.original = $.extend(true, {}, bizagi.rendering.tablet.search.prototype);\n$.extend(bizagi.rendering.tablet.search.prototype, {\n  /*\r\n                                                     *   Template method to implement in each device to customize each render after processed\r\n                                                     */\n  postRender: function postRender() {\n    var self = this;\n\n    // Call original method        \n    bizagi.rendering.tablet.search.original.postRender.apply(this, arguments);\n\n    // If the current form is readonly return;\n    if (self.isReadOnlyForm()) {\n      return;\n    }\n\n    if (self.advancedSearch && !self.isContainedInNestedForm()) {\n      self.advancedSearch.click(function (ev) {\n        ev.stopPropagation();\n        // Publish showSearchForm event to the view\n        self.triggerGlobalHandler(\"showsearchform\", {\n          guid: self.properties.guid });\n\n      });\n    }\n  } });","/*\r\n*   Name: BizAgi Form Modeler Image Extension\r\n*   Author: Christian Collazos\r\n*   Comments:\r\n*   -   This script will redefine the image class to adjust to form modeler\r\n*/\n\nbizagi.rendering.tablet.image.original = $.extend(true, {}, bizagi.rendering.tablet.image.prototype);\n$.extend(bizagi.rendering.tablet.image.prototype, {\n  /*\r\n                                                        * Extend original method\r\n                                                        */\n  postRender: function postRender() {\n    var self = this;\n    var control = self.getControl();\n    var width = self.properties.width;\n    var containerType = self.parent.properties.type;\n\n    // Call original method        \n    bizagi.rendering.tablet.image.original.postRender.apply(this, arguments);\n\n    setTimeout(function () {\n      if (width === -1) {\n\n        var thumbnail = $(\".resizable_img\", control);\n        var widthWrapper = control.width();\n        var height = control.height();\n        var containerHeight = 0;\n        var totalImagesInSameContainer = 0;\n\n        if (containerType == \"grid\") {\n          containerHeight = $(\".resizable_img\", control).closest(\"td\").height();\n        } else\n        {\n          if (self.parent.properties.id == self.getFormContainer().properties.id) {\n            containerHeight = 50;\n          } else {\n            var containerChildsSize = self.parent.getChildreCount();\n            var containerChildsHeightSum = self.parent.getChildrenSumHeight(\"image\");\n            containerHeight = $(\".resizable_img\", control).closest(\".ui-bizagi-container\").height() - 17;\n            containerHeight = containerHeight < 50 ? 50 : containerHeight;\n            totalImagesInSameContainer = self.parent.countByRenderTypeWithParams(\"image\", -1);\n\n            if (containerChildsSize > 1) {\n              containerHeight = containerHeight - containerChildsHeightSum;\n            }\n          }\n        }\n\n        thumbnail.width(widthWrapper);\n\n        if (totalImagesInSameContainer > 1) {\n          if (null != containerHeight && containerHeight > 0) {\n            $(\".resizable_img\", self.parent.container).height(containerHeight / totalImagesInSameContainer + \"px\");\n          } else {\n            $(\".resizable_img\", control).height(height + \"px\");\n          }\n        } else {\n          if (null != containerHeight && containerHeight > 0) {\n            thumbnail.height(containerHeight + \"px\");\n          } else {\n            thumbnail.height(height + \"px\");\n          }\n        }\n      }\n\n      self.triggerGlobalHandler(\"controlRefreshCanvas\");\n\n    }, 160);\n\n  },\n\n  /*\r\n     * Get image width and height and send them to modeler \r\n     */\n  changeImageSize: function changeImageSize(imageWidth, imageHeight) {\n    var self = this;\n    var control = self.getControl();\n\n    self.executeTriggerHandler(control, imageWidth, imageHeight, \"string\");\n\n  },\n\n  /*\r\n     * Update control definition\r\n     */\n  executeTriggerHandler: function executeTriggerHandler(control, imageWidth, imageHeight, type) {\n    var self = this;\n    var widthValue = \"\";\n    var heightValue = \"\";\n\n    if (type == \"string\") {\n      widthValue = imageWidth.slice(0, -2);\n      heightValue = imageHeight.slice(0, -2);\n    } else {\n      widthValue = imageWidth;\n      heightValue = imageHeight;\n    }\n    self.triggerGlobalHandler(\"resizeImage\", {\n      guid: self.properties.guid,\n      properties: [{\n        property: \"thumbnail.width\",\n        value: widthValue },\n\n      {\n        property: \"thumbnail.height\",\n        value: heightValue }] });\n\n\n  } });","/*\r\n*   Name: BizAgi Form Modeler Image Extension\r\n*   Author: Christian Collazos\r\n*   Comments:\r\n*   -   This script will redefine the image class to adjust to form modeler\r\n*/\n\nbizagi.rendering.tablet.grid.original = $.extend(true, {}, bizagi.rendering.tablet.grid.prototype);\n$.extend(bizagi.rendering.tablet.grid.prototype, {\n  /*\r\n                                                       * Extend original method\r\n                                                       */\n  postRender: function postRender() {\n    // Call original method        \n    bizagi.rendering.tablet.grid.original.postRender.apply(this, arguments);\n\n    var control = this.getControl();\n\n    $(\"th.bz-hidden, td.bz-hidden\", control).each(function (index, item) {\n      $(item).addClass(\"ui-state-disabled\");\n    });\n  } });","/*\r\n*   Name: BizAgi Form Modeler Collection Navigator Extension\r\n*   Author: Alexander Mejia\r\n*   Date: 02-12-213\r\n*   Comments:\r\n*   -   This script will redefine the collection navigator class to adjust to form modeler\r\n*/\n\n\nbizagi.rendering.tablet.collectionnavigator.original = $.extend(true, {}, bizagi.rendering.tablet.collectionnavigator.prototype);\n$.extend(bizagi.rendering.tablet.collectionnavigator.prototype, {\n\n  postRender: function postRender() {\n    var self = this;\n\n    // Call original method\n    bizagi.rendering.tablet.collectionnavigator.original.postRender.apply(this, arguments);\n\n    $.when(self.isRendered()).\n    done(function () {\n      var properties = self.properties;\n      var control = self.getControl();\n      var canvas = control.find(\".bz-collectionnavigator-navigationform\");\n\n      if (properties.navigationform) {\n        setTimeout(function () {\n          self.triggerGlobalHandler(\"refreshControl\", {\n            guid: properties.guid,\n            canvas: canvas });\n\n        }, 0);\n      }\n    });\n  } });","\n\nbizagi.rendering.tablet.nestedForm.original = $.extend(true, {}, bizagi.rendering.tablet.nestedForm.prototype);\n$.extend(bizagi.rendering.tablet.nestedForm.prototype, {\n  /*\r\n                                                         *   Template method to implement in each device to customize the render's behaviour when rendering in design mode\r\n                                                         */\n  configureDesignView: function configureDesignView() {\n    var self = this;\n    var properties = self.properties;\n    var $container = self.container;\n\n    $container.removeClass(\"ui-bizagi-container-panel\");\n    $container.addClass(\"ui-bizagi-container-nestedform\");\n\n    setTimeout(function () {\n      var title = $(\"<span class= 'ui-bizagi-container-nestedform-title'>Nested Form: \" + properties.formDisplayName + \"</span>\");\n      if (self.triggerGlobalHandler(\"isOfflineForm\")) {\n        title = $(\"<span class= 'ui-bizagi-container-nestedform-title'>Nested <b>Offline</b> Form: \" + properties.formDisplayName + \"</span>\");\n      } else if (self.triggerGlobalHandler(\"hasOfflineForm\")) {\n        title = $(\"<span class= 'ui-bizagi-container-nestedform-title'>Nested <b>Online</b> Form: \" + properties.formDisplayName + \"</span>\");\n      }\n\n      $container.prepend(title);\n    }, 100);\n\n  } });","/*\r\n*   Name: BizAgi Form Modeler Group Extension\r\n*   Author: Ivan Avila\r\n*   Comments:\r\n*   -   This script will redefine the group class to adjust to form modeler\r\n*/\n\nbizagi.rendering.tablet.date.original = $.extend(true, {}, bizagi.rendering.tablet.date.prototype);\n$.extend(bizagi.rendering.tablet.date.prototype, {\n  /* \r\n                                                   *   Template method to implement in each device to customize each container after processed\r\n                                                   */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n\n    // Call original method\n    bizagi.rendering.tablet.date.original.setDisplayValue.apply(this, arguments);\n\n    //Apply format\n    var properties = self.properties;\n    var dateControl = self.getDateControl().parent();\n    var inputPlaceholder = $(\".ui-bizagi-render-date, .bz-input-icon__input\", dateControl);\n\n    if (properties.valueFormat.color && properties.valueFormat.color.length > 0) {\n      var nameNewClass = \"bz-\" + properties.valueFormat.color.replace('#', '') + \"-placeholder\";\n      var fullNewClass = \".\" + nameNewClass + \"::-webkit-input-placeholder{color:\" + properties.valueFormat.color + \"}\";\n      bizagi.util.loadStyle(fullNewClass, nameNewClass);\n      inputPlaceholder.addClass(nameNewClass);\n    }\n\n    if (properties.valueFormat.strikethru && properties.valueFormat.underline) {\n      inputPlaceholder.addClass(\"biz-modify-placeholder-through-underline\");\n    } else {\n      inputPlaceholder.removeClass(\"biz-modify-placeholder-through-underline\");\n\n      if (properties.valueFormat.strikethru) {\n        inputPlaceholder.addClass(\"biz-modify-placeholder-through\");\n      } else {\n        inputPlaceholder.removeClass(\"biz-modify-placeholder-through\");\n      }\n\n      if (properties.valueFormat.underline) {\n        inputPlaceholder.addClass(\"biz-modify-placeholder-underline\");\n      } else {\n        inputPlaceholder.removeClass(\"biz-modify-placeholder-underline\");\n      }\n    }\n  } });","/*\r\n*   Default implementation for user fields\r\n*/\nbizagi.rendering.tablet.basicUserField.extend(\"bizagi.rendering.tablet.designUserField\", {}, {\n\n  /*\r\n                                                                                               *   Template method to implement in each device to customize each render after processed\r\n                                                                                               */\n  getEditableControl: function getEditableControl() {\n    var self = this;\n    var $control = self.getControl();\n    var properties = self.properties;\n    var controlName = properties.control + ' Custom control';\n    var tmpl = '<div class=\"bz-input-icon bz-widget--fake\"><input class=\"bz-input-icon__input bz-space--inline-s\" placeholder=\"' + controlName + '\"/><svg class=\"bz-icn bz-space--inline-s\" width=\"32px\" height=\"32px\"><use xlink:href=\"#gear\" /></svg></div>';\n\n    $control.addClass(\"bz-widget__control--fake\");\n\n    self.input = $(tmpl).appendTo($control);\n  },\n\n  /*\r\n     *  Dont send the data to the server\r\n     */\n  collectData: function collectData(renderValues) {\n  },\n\n  getDisplayValue: function getDisplayValue() {\n    var self = this;\n    var properties = self.properties;\n    var controlName = properties.control;\n    return \"Userfield in design mode: \" + controlName;\n  },\n\n  getReadonlyControl: function getReadonlyControl() {\n    var self = this;\n    var $control = self.getControl();\n    var properties = self.properties;\n    var controlName = properties.control + ' Custom control';\n    var tmpl = '<div class=\"bz-input-icon bz-widget--fake\"><input class=\"bz-input-icon__input bz-space--inline-s\" placeholder=\"' + controlName + '/><svg class=\"bz-icn bz-space--inline-s\" width=\"32px\" height=\"32px\"><use xlink:href=\"#gear\" /></svg></div>';\n\n    $control.addClass(\"bz-widget__control--fake\");\n\n    var myControl = $(tmpl).appendTo($control);\n    return myControl;\n  } });"]}