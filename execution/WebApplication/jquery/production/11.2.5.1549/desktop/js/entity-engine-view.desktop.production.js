bizagi.workportal.widgets.widget.extend("bizagi.workportal.widgets.paginator",{},{init:function(t,e,i){this._super(t,e,i),this.loadTemplates({paginator:bizagi.getTemplate("bizagi.workportal.desktop.widget.paginator").concat("#paginator-wrapper"),content:bizagi.getTemplate("bizagi.workportal.desktop.widget.paginator").concat("#paginator-content")})},renderContent:function(){var t="ENTITY"===this.params.referenceType,e=this.getTemplate("paginator"+this.getSuffixWidget());return this.content=e.render({hide:t}),this.content},postRender:function(){this.sub("PAGINATOR-UPDATE",$.proxy(this.updateView,this)),this.configureHandlers()},getSuffixWidget:function(){return""},updateView:function(t,e){var i=this,r=e.args,o="ENTITY"===r.referenceType,a=i.getContent();function n(){i.getTemplate("content"+i.getSuffixWidget()).render({totalRecords:i.totalRecords,totalPages:i.totalPages,displayName:i.displayName,currentPage:i.currentPage,hide:o}).appendTo(a)}i.setModel(r),a.empty(),r.fromActionLauncher?i.totalRecords>1?n():i.clean():n()},setModel:function(t){this.totalRecords=void 0===t.totalRecords?this.totalRecords:t.totalRecords,this.totalPages=t.totalPages||this.totalPages,this.displayName=t.histName||this.displayName,this.currentPage=t.currentPage||this.currentPage,this.action=t.action,this.reference=t.reference||this.reference,this.surrogateKey=t.surrogateKey||this.surrogateKey,this.referenceType=t.referenceType,this.event=t.event,this.guidSearch=t.guidSearch},getModel:function(){return{page:this.currentPage,totalRecords:this.totalRecords,action:this.action,reference:this.reference,surrogateKey:this.surrogateKey,referenceType:this.referenceType,stopNavigation:!0,guidSearch:this.guidSearch}},configureHandlers:function(){this.getContent().on("click",$.proxy(this.onPageBreak,this))},onPageBreak:function(t){var e=$(t.target),i=this.getContent();if(e.hasClass("control-icon")&&!e.hasClass("ui-state-disabled")){var r=e.data("type");"forward"==r?this.currentPage+=1:"rewind"==r?this.currentPage-=1:this.currentPage="fastrewind"==r?1:this.totalPages,this.disabledPaginatorButtonsByLimits(),i.find(".paginator-controls__currentPage").text(this.currentPage),this.pub("notify",{type:"UPDATE-DATATEMPLATE-VIEW",args:this.getModel()})}},disabledPaginatorButtonsByLimits:function(){var t=$("[data-type='fastrewind']",this.content),e=$("[data-type='rewind']",this.content),i=$("[data-type='forward']",this.content),r=$("[data-type='fastforward']",this.content);1===this.totalPages?(t.addClass("ui-state-disabled"),e.addClass("ui-state-disabled"),i.addClass("ui-state-disabled"),r.addClass("ui-state-disabled")):1===this.currentPage?(t.addClass("ui-state-disabled"),e.addClass("ui-state-disabled"),i.removeClass("ui-state-disabled"),r.removeClass("ui-state-disabled")):this.currentPage===this.totalPages?(t.removeClass("ui-state-disabled"),e.removeClass("ui-state-disabled"),i.addClass("ui-state-disabled"),r.addClass("ui-state-disabled")):(t.removeClass("ui-state-disabled"),e.removeClass("ui-state-disabled"),i.removeClass("ui-state-disabled"),r.removeClass("ui-state-disabled"))},calculateNewPage:function(t,e,i){var r=(e=e||10)*i-e+1,o=Math.ceil(r/t);return o||1},clean:function(){var t=this.getContent();t&&t.empty()}}),bizagi.injector.register("bizagi.workportal.widgets.paginator",["workportalFacade","dataService",bizagi.workportal.widgets.paginator]),bizagi.workportal.widgets.widget.extend("bizagi.workportal.widgets.sortbar",{},{init:function(t,e,i,r,o){this._super(t,e,o),this.loadTemplates({sortbar:bizagi.getTemplate("bizagi.workportal.desktop.widget.sortbar").concat("#sortbar-wrapper"),content:bizagi.getTemplate("bizagi.workportal.desktop.widget.sortbar").concat("#sortbar-content"),"right-content":bizagi.getTemplate("bizagi.workportal.desktop.widget.sortbar").concat("#sortbar-right"),addButton:bizagi.getTemplate("bizagi.workportal.desktop.widget.sortbar").concat("#sortbar-content-add-button"),sortMenu:bizagi.getTemplate("bizagi.workportal.desktop.widget.sortbar").concat("#sortbar-sort-menu"),actions:bizagi.getTemplate("bizagi.workportal.desktop.widget.sortbar").concat("#sortbar-content-actions"),recordsPerPage:bizagi.getTemplate("bizagi.workportal.desktop.widget.sortbar").concat("#sortbar-records-per-page"),recordsMenu:bizagi.getTemplate("bizagi.workportal.desktop.widget.sortbar").concat("#sortbar-records-menu")}),this.processActionService=i,this.accumulatedcontext=r},renderContent:function(){var t=this.getTemplate("sortbar");return this.content=t.render({enableFilter:!0}),this.$checkAll=this.content.find(".sortbar-left-check-uncheck input"),this.content},postRender:function(){var t=this.getTemplate("right-content");this.setVisibleSortbar(!0),this.configureHandlers(),$(".sortbar-right",this.content).append(t.render()),this.configureAfterPaintHandlers()},configureHandlers:function(){var t=this,e=t.getContent();t.sub("TEMPLATEENGINE-VIEW",$.proxy(t.initializeAndProcessFilterButton,t)),t.sub("SEARCH-ENGINE-VIEW",$.proxy(t.initializeAndProcessFilterButton,t)),t.sub("SET-FILTERS-DATA",$.proxy(t.setFiltersSortData,t)),t.sub("HIDE-FILTER-BUTTONANDBAR",$.proxy(t.hideFilterButtonAndBar,t)),t.sub("HIDE-SORT-BUTTONS",$.proxy(t.hideSortButtons,t)),t.sub("ENABLE-BATCHS-ACTIONS",(function(e,i){return t.enableBatchActions(i)})),t.sub("UPDATE-COUNTER-FILTERS-APPLIED",(function(e,i){return t.updateCounterByFilterApplied(i)})),t.sub("CASES-TEMPLATE-VIEW",(function(e,i){t.showingFiltering=!1,t.setVisibleCheckAll(!1)})),t.sub("SOME-ITEM-ALLOW-SELECT",(function(e,i){t.setVisibleCheckAll(!0)})),t.sub("HIDE-CHECK-ALL",(function(e,i){t.setVisibleCheckAll(!1)})),t.sub("BATCH-ACTIONS",(function(e,i){return t.validActions(i.args.actionsData)})),e.find(".wgd-sortbar-add-button").tooltip(),t.$checkAll.on("click",$.proxy(t.onCheckUncheck,t))},configureAfterPaintHandlers:function(){var t=this,e=t.getContent();e.find(".right-menu").on("click",(function(e){t.showSortMenu(e,$(this))})),e.find(".records-menu").on("click",(function(e){t.showRecordsMenu(e,$(this))})),e.find(".sortbar-az").on("click",(function(){t.sortSelection.attribute&&(t.setIconSortType($(this),t._sortType),t.pub("notify",{type:"SET-ORDERBY",args:{properties:{xpath:t.sortSelection.attribute,orderType:t._sortType,typeSearch:"none"}}}))})),e.find(".filter-icon").on("click",(function(){t.pub("notify",{type:"OPENCLOSE-MYSEARCHFILTER",args:{guidSearch:t.params.guidSearch,target:$(this)}})})),$(".remove-selected-items-collections",e).on("click",$.proxy(t.onRemoveSelectedItemsCollections,t))},setVisibleSortbar:function(t){var e=this.getContent();t?e.show():e.hide()},setVisibleCheckAll:function(t){t?(this.$checkAll.closest(".border-check-uncheck").show(),this.showingCheckAll=!0):(this.$checkAll.closest(".border-check-uncheck").hide(),this.showingCheckAll=!1)},showSelectedItems:function(t){if(t&&t>0){this.content.addClass("there-are-actions");var e=this.getResource("workportal-general-word-selected-singular");t>1&&(e=this.getResource("workportal-general-word-selected-plural")),$(".actions-count-selected",this.content).text(t+" "+e+" ")}else this.content.removeClass("there-are-actions")},setIconSortType:function(t,e){"asc"===e?(this._sortType="desc",t.removeClass("bz-icon-order-ascendant-outline").addClass("bz-icon-order-descendant-outline")):(this._sortType="asc",t.removeClass("bz-icon-order-descendant-outline").addClass("bz-icon-order-ascendant-outline"))},onClickBatchAction:function(t){var e=this,i=$(t.target).closest("li"),r=i.data("guid"),o=e.getAction(r);e.requestsInProgressActionGuid[r]||(e.requestsInProgressActionGuid[r]=!0,e.addLoadingButtonAction(i),$.when(e.processActionService.executeBatchAction({action:o,commonActionsmodel:e.commonActionsmodel})).always((function(){e.quitLoadingButtonAction(i),e.requestsInProgressActionGuid[r]=void 0})))},addLoadingButtonAction:function(t){t.find(".wdg-tple-button").addClass("state-loading"),t.find(".wdg-tple-button").prepend('<div class="ui-bizagi-loading-icon ui-bizagi-loading-button"></div>').find("i").hide()},quitLoadingButtonAction:function(t){t.find(".wdg-tple-button").removeClass("state-loading"),t.find(".ui-bizagi-loading-button").remove(),t.find("i").show()},onRemoveSelectedItemsCollections:function(){var t=this.pub("notify",{type:"SET-VALUES",args:{value:!1}})[0];this.enableBatchActions({args:{commonActions:t}})},showSortMenu:function(t,e){var i=this,r=i.getContent(),o=i.getTemplate("sortMenu").render({filters:i._filters},{displayValue:function(t){return t}});$(".sortbar-box-menu",e).length&&$(".sortbar-box-menu",e).remove(),e.append(o),o.show("fast",(function(){o.click((function(t){t.stopPropagation()})),$(document).one("click",(function(){o.hide("fast"),o.remove()}))})),r.find(".sortbar-option").on("click",(function(t){var a=$(t.currentTarget).data(),n=i._filters[a.index];r.find(".sortbar-az").removeClass("disabled"),i.sortSelection!=n&&(i.sortSelection=n,$(".sortbar-selected",e).text(i.sortSelection.display.split(".").pop()),i.pub("notify",{type:"SET-ORDERBY",args:{properties:{xpath:n.attribute,orderType:i._sortType,typeSearch:"none"}}})),o.hide("fast")}))},showRecordsMenu:function(t,e){var i=this,r=i.getContent(),o=i.getTemplate("recordsMenu").render({});$(".sortbar-records-box-menu",e).length&&$(".sortbar-records-box-menu",e).remove(),e.append(o),o.show("fast",(function(){o.click((function(t){t.stopPropagation()})),$(document).one("click",(function(){o.hide("fast"),o.remove()}))})),r.find(".sortbar-records-option").on("click",(function(t){i.oldPageSize=i.oldPageSize?i.oldPageSize:10;var r=Number(bizagi.util.trim(this.textContent)),a=bizagi.injector.get("bizagi.workportal.widgets.paginator"),n=a.currentPage?a.currentPage:1,s=a.calculateNewPage(r,i.oldPageSize,n);$(".sortbar-records-selected",e).text(r),i.pub("notify",{type:"SET-RECORDS",args:{pageSize:r,page:s}}),i.oldPageSize=r,o.hide("fast")}))},initializeAndProcessFilterButton:function(t,e){this.showingFiltering=!1,this.setVisibleCheckAll(!1),this.restoreOrderSelected(),this.setIconSortType($(".sortbar-az",this.content),"desc"),this.params=e.args,this.sortSelection={},this.processAddButton(t,e)},processAddButton:function(t,e){var i=this,r=i.getContent(),o=e.args,a=o.action,n=r.find(".sortbar-left .add-button");i._lastReferenceEntity=o.reference,n.children().remove(),$(".wrapper-sortbar-actions",r).remove(),i._haveAddButton=!1,o.reference&&"ENTITY"!==o.referenceType?(n.startLoading({delay:0,overlay:!0}),i.dataService.getProcessAddAction(e).done((function(t){i._lastReferenceEntity===t.referenceEntity&&void 0!==t&&Object.getOwnPropertyNames(t).length>1&&t.guidEntity&&t.id&&i.renderButton(n,t)})).always((function(){n.endLoading()}))):a&&i.renderButton(n,a)},renderButton:function(t,e){var i=this,r=i.getTemplate("addButton").render({action:e});t.empty(),r.appendTo(t),i._haveAddButton=!0,r.on("click",(function(){i.clickAddButton(e)}))},clickAddButton:function(t){var e=this;$.when(e.dataService.getMapping({guidEntity:t.guidEntity,accumulatedContext:e.accumulatedcontext.getContext({}),xpathContext:"Process"===t.type?t.xpathContext:"",collectionId:t.referenceEntity,collectionType:t.referenceType})).done((function(i){"Process"===t.type?e.onExecuteProcess(t,i):e.onExecuteForm(t,i)}))},onCheckUncheck:function(t){var e=$(t.target).is(":checked"),i=this.pub("notify",{type:"SET-VALUES",args:{value:e}})[0];this.enableBatchActions({args:{commonActions:i}})},enableBatchActions:function(t){var e=t.args,i=this.commonActionsmodel=e.commonActions,r=this.validActions(i.actions);(r.length>0||this._haveAddButton)&&$(this.getContent()).show(),this.showBatchActions(r,i,"batchAction"),void 0!==i.checkAll&&this.$checkAll.prop("checked",i.checkAll)},showBatchActions:function(t,e,i){var r=this,o=r.getContent(),a=r.getTemplate("actions");r.showSelectedItems(Object.keys(e.itemsSelected).length);var n=t.slice(3,9999),s=a.render({actions:t.slice(0,3),moreActions:n,typeActions:i});$(".wdg-tple-button.batchAction",r.content).off("click",$.proxy(r.onClickBatchAction,r)),$(".wrapper-sortbar-actions",o).remove(),$(".sortbar-left .sortbar-menu",o).append(s),$(".wdg-tple-button.batchAction",r.content).on("click",$.proxy(r.onClickBatchAction,r)),n.length>0&&(r.content.data("ui-tooltip")&&$(r.content).tooltip("destroy"),$(r.content).tooltip({tooltipClass:"sortbar-tooltip-more-actions",items:".bz-actions-showmore",content:$(".template-box-tooltip",r.content).html(),open:function(t,e){$(".wdg-tple-button.batchAction",e.tooltip).on("click",$.proxy(r.onClickBatchAction,r));var i=$("div.ui-tooltip");if(void 0===t.originalEvent)return i.remove(),!1;var o=$(e.tooltip).attr("id");for(var a in i.not("#"+o).remove(),r.requestsInProgressActionGuid)if(r.requestsInProgressActionGuid[a]){var n=$("li[data-guid='"+a+"']",e.tooltip);r.addLoadingButtonAction(n)}$("li[id='emptyLi0']").focus((function(){$("div.bz-actions-showmore.ellipsis-icon")[0].focus(),$("ul[class='actions-container'] li:nth-child(3")[0].focus()})),$("li[id='emptyLi1']").focus((function(){$("div.bz-actions-showmore.ellipsis-icon")[0].focus(),$("a.remove-selected-items-collections")[0].focus()})),$("li",e.tooltip)[1].focus()},close:function(t,e){e.tooltip.hover((function(){$(this).stop(!0).fadeTo(400,1)}),(function(){$(this).fadeOut("400",(function(){$(".wdg-tple-button.batchAction",this).off("click",$.proxy(r.onClickBatchAction,r)),$(this).remove()}))}))}}))},setFiltersSortData:function(t,e){var i=e.args.filtersAppliedCounter,r=e.args.totalRecords;if(this._filters=e.args.calculateFilters?e.args.filters:this._filters,e.args.calculateFilters){for(var o,a=-1,n=0,s=0;o=this._filters[++a];)"Text"!=o.type&&"Link"!==o.type&&o.data&&(o.data.defaultValues&&o.data.defaultValues.length>0||o.data.min&&o.data.max)&&n++,""!==o.display&&s++;r>0?(n>0?this.showFilterButton():this.hideFilterButton(),s>0?this.showSortButtons():this.hideSortButtons()):0===i&&(this.hideFilterButton(),this.hideSortButtons())}this.updateCounter(i)},showFilterButton:function(){$(".filter-icon",this.getContent()).show()},hideFilterButton:function(){$(".filter-icon",this.getContent()).hide(),this.showingFiltering=!1},showSortButtons:function(){$(".sortbar-text",this.getContent()).show(),$(".sortbar-icon",this.getContent()).show(),$(".sortbar-az",this.getContent()).show(),this.showingSorting=!0,this.showingFiltering=!0},hideSortButtons:function(){var t=$(".sortbar-az",this.getContent());$(".sortbar-text",this.getContent()).hide(),t.addClass("disabled"),t.removeClass("bz-icon-order-ascendant-outline"),t.removeClass("bz-icon-order-descendant-outline"),t.addClass("bz-icon-order-ascendant-outline"),t.hide(),this.showingSorting=!1},restoreOrderSelected:function(){$(".sortbar-selected",this.getContent()).text(this.getResource("workportal-my-search-order-by"))},updateCounterByFilterApplied:function(t){t.args.filtersApplied&&this.updateCounter(t.args.filtersApplied.length)},updateCounter:function(t){var e=this.getContent(),i=$(".counter-filters-applied",e);t>0?(i.html(t),i.show()):i.hide()},hideFilterButtonAndBar:function(){this.showingFilter=!1,$(".filter-icon",this.getContent()).hide(),this.pub("notify",{type:"CLOSE-MYSEARCHFILTER",args:{show:!1,$target:null}})},onExecuteProcess:function(t,e){var i=this;t.startForm&&(t.hasStartForm=t.startForm),$.when(i.processActionService.executeProcessAction({action:t,mappingData:e})).done((function(e){(e=e||{})&&!1!==e.refreshTemplateData&&i.loadTemplateData(t)}))},loadTemplateData:function(t){this.pub("notify",{type:"TEMPLATEENGINE-VIEW",args:{action:t,isRefresh:!0}})},onExecuteForm:function(t,e){var i=this;$.when(i.processActionService.executeFormAction({action:t,mappingData:e})).done((function(e){e.refresh&&i.pub("notify",{type:"UPDATE-DATATEMPLATE-VIEW",args:{action:t,isRefresh:!0,calculateFilters:!0}})}))},getAction:function(t){return this.commonActionsmodel.actions.filter((function(e){return e.id==t}))[0]},validActions:function(t){return $.grep(t,(function(t){return 2==t.multiplicity||"Collection"!=t.mode&&("Form"!=t.type&&(!t.isEvent&&("Process"!=t.type||!t.hasStartForm)))}))},clean:function(){var t=this.getContent();this.requestsInProgressActionGuid={},t&&(this.unsub("TEMPLATEENGINE-VIEW"),this.unsub("ENABLE-BATCHS-ACTIONS"),this.unsub("SEARCH-ENGINE-VIEW"),this.unsub("SET-FILTERS-DATA"),this.unsub("HIDE-FILTER-BUTTONANDBAR"),this.unsub("HIDE-SORT-BUTTONS"),this.$checkAll.off("click"),t.find(".right-menu").off("click"),t.find(".sortbar-az").off("click"),t.find(".filter-icon").off("click"),t.find(".sortbar-action").off("click"),$(".wdg-tple-button.batchAction",t).off("click",$.proxy(this.onClickBatchAction,this)),$(".remove-selected-items-collections",t).off("click",$.proxy(this.onRemoveSelectedItemsCollections,this)))}}),bizagi.injector.register("bizagi.workportal.widgets.sortbar",["workportalFacade","dataService","processActionService","accumulatedcontext",bizagi.workportal.widgets.sortbar]),bizagi.workportal.widgets.widget.extend("bizagi.workportal.widgets.mysearchfilter",{init:function(t,e,i,r){var o=this;o.params={},o._super(t,e,r),o.loadTemplates({mysearchfilter:bizagi.getTemplate("bizagi.workportal.desktop.widget.mysearchfilter").concat("#mysearchfilter-wrapper"),"mysearchfilter-item":bizagi.getTemplate("bizagi.workportal.desktop.widget.mysearchfilter").concat("#mysearchfilter-item")}).done((function(){o.filterItem=o.getTemplate("mysearchfilter-item")})),o.processActionService=i,o.filtersApplied=[],o.filters=[]},renderContent:function(){return this.content=this.getTemplate("mysearchfilter").render({}),this.content.hide(),this.content},postRender:function(){this.configureHandlers()},initializeMySearchFilter:function(t,e){var i=this.getContent();this.criteriaSearchApplied=e.args.filters?bizagi.clone(e.args.filters):[],this.filtersApplied=[],this.filterControlArray=[],this.orderBy={},$(".mysearchfilter-list",i).empty()},configureHandlers:function(){this.sub("TEMPLATEENGINE-VIEW",$.proxy(this.initializeMySearchFilter,this)),this.sub("SEARCH-ENGINE-VIEW",$.proxy(this.initializeMySearchFilter,this)),this.sub("OPENCLOSE-MYSEARCHFILTER",$.proxy(this.toggleWidget,this)),this.sub("CLOSE-MYSEARCHFILTER",$.proxy(this.openCloseWidget,this)),this.sub("SET-FILTERS-DATA",$.proxy(this.setFiltersData,this)),this.sub("SET-ORDERBY",$.proxy(this.setOrderBy,this)),this.sub("SET-RECORDS",$.proxy(this.setRecordsPerPage,this))},setFiltersData:function(t,e){if(e.args.defaultFilterApplied){e.args.filtersApplied=e.args.filtersApplied||[];var i=e.args.filtersApplied.filter((function(t){return void 0!==t.properties}));this.filtersApplied=i}if(e.args.calculateFilters){for(var r=this.getContent(),o=$(".mysearchfilter-list",r),a=e.args.filters,n=e.args.filtersAppliedCounter,s=-1,l=0;d=a[++s];)if("Text"!=d.type&&"Link"!==d.type&&d.data&&(d.data.defaultValues&&d.data.defaultValues.length>0||d.data.min&&d.data.max)){l++;break}if(0===e.args.totalRecords&&0===n?this.openCloseWidget({show:!1}):0===l?this.openCloseWidget({show:!1}):this.openCloseWidget({show:!0}),this.filterControlArray&&0===this.filterControlArray.length)for(s=-1;d=a[++s];){d.tmplid=d.attribute.replaceAll(".","-"),this.filtersApplied.filter((function(t){return t.properties.type===d.type.toLowerCase()&&t.properties.xpath===d.tmplid})).length>0?d.filterApplied="filter-applied":d.filterApplied="";var c=this.filterItem.render(d);"Text"!==d.type&&"Link"!==d.type&&d.data&&(d.data.defaultValues&&d.data.defaultValues.length>0||d.data.min&&d.data.max)&&(o.append(c),this.buildFilter(c,d),"filter-applied"===d.filterApplied&&$(".remove-filter",c).show())}else if(this.filterControlArray&&this.filterControlArray.length>0){var d;for(s=-1;d=this.filterControlArray[++s];){var u=a.find((function(t){return t.attribute===d.xpath}));u&&this.setFilterData(d,u)}}}$(".filters-loading",this.content).hide()},toggleWidget:function(t,e){var i=this.getContent().is(":visible");this.openCloseWidget({show:!i,$target:e.args.target})},openCloseWidget:function(t){var e=this.getContent(),i=t.$target||$("<div>");t.show?(i.addClass("opened"),e.show()):(i.removeClass("opened"),e.hide(),$("button#ui-bizagi-cancel-filter").click())},buildFilter:function(t,e){switch(e.type){case"Entity":this.buildFilterMultiple(t,e);break;case"Number":this.buildFilterNumber(t,e);break;case"Money":this.buildFilterMoney(t,e);break;case"Datetime":this.buildFilterDate(t,e);break;case"Boolean":this.buildFilterBoolean(t,e)}},setFilterData:function(t,e){var i="Int"===e.subType;switch(t.type){case"Entity":t.widget.bizagi_multipleFilter("setData",e.data);break;case"Number":i?t.widget.bizagi_integerFilter("setData",e.data):t.widget.bizagi_numberFilter("setData",e.data);break;case"Money":t.widget.bizagi_moneyFilter("setData",e.data);break;case"Datetime":t.widget.bizagi_dateFilter("setData",e.data);break;case"Boolean":t.widget.bizagi_booleanFilter("setData",e.data)}},buildFilterMoney:function(t,e){var i=this,r=t.bizagi_moneyFilter({showButtonClearFilter:!0,numericFormat:i.getResource("numericFormat"),properties:e,data:e.data,onApply:function(t,e){i.addFilterSelection(t),i.triggerFilter({calculateFilters:!0})},onClear:function(t){i.removeFilterApplied(t),i.triggerFilter({calculateFilters:!0})},getResource:function(t){return bizagi.localization.getResource(t)}});i.filterControlArray.push({type:e.type,xpath:e.attribute,widget:r})},buildFilterNumber:function(t,e){var i=this,r="Int"===e.subType,o={showButtonClearFilter:!0,numericFormat:i.getResource("numericFormat"),properties:e,data:e.data,onApply:function(t,e){0!==t.length&&(i.addFilterSelection(t),i.triggerFilter({calculateFilters:!0}))},onClear:function(t){i.removeFilterApplied(t),i.triggerFilter({calculateFilters:!0})},getResource:function(t){return bizagi.localization.getResource(t)}},a=r?t.bizagi_integerFilter(o):t.bizagi_numberFilter(o);i.filterControlArray.push({type:e.type,xpath:e.attribute,widget:a})},buildFilterDate:function(t,e){var i=this,r=t.bizagi_dateFilter({showButtonClearFilter:!0,properties:e,onApply:function(t,e){i.addFilterSelection(t),i.triggerFilter({calculateFilters:!0})},onClear:function(t){i.removeFilterApplied(t),i.triggerFilter({calculateFilters:!0})},getResource:function(t){return i.getResource(t)}});i.filterControlArray.push({type:e.type,xpath:e.attribute,widget:r})},buildFilterMultiple:function(t,e){var i=this,r=t.bizagi_multipleFilter({showButtonClearFilter:!0,properties:e,data:e.data,onApply:function(t,e){i.addFilterSelection(t),i.triggerFilter({calculateFilters:!0})},onClear:function(t){i.removeFilterApplied(t),i.triggerFilter({calculateFilters:!0})},getResource:function(t){return bizagi.localization.getResource(t)}});i.filterControlArray.push({type:e.type,xpath:e.attribute,widget:r})},buildFilterBoolean:function(t,e){var i=this,r=t.bizagi_booleanFilter({showButtonClearFilter:!0,properties:e,data:e.data,onApply:function(t,e){i.addFilterSelection(t),i.triggerFilter({calculateFilters:!0})},onClear:function(t){i.removeFilterApplied(t),i.triggerFilter({calculateFilters:!0})},getResource:function(t){return bizagi.localization.getResource(t)}});i.filterControlArray.push({type:e.type,xpath:e.attribute,widget:r})},addFilterSelection:function(t){$(".filters-loading",this.content).show();for(var e=0,i=t.length;e<i;e++)this.removeFilterApplied([t[e].properties.xpath]),this.filtersApplied.push(t[e])},removeFilterApplied:function(t){$(".filters-loading",this.content).show();for(var e,i=-1;e=t[++i];){var r=this.filtersApplied.find((function(t){return t.properties.xpath===e}));r&&this.filtersApplied.splice(this.filtersApplied.indexOf(r),1)}},setOrderBy:function(t,e){this.orderBy=e.args,this.triggerFilter({calculateFilters:!1})},setRecordsPerPage:function(t,e){this.triggerFilter({calculateFilters:!1,page:e.args.page,pageSize:e.args&&e.args.pageSize})},triggerFilter:function(t){for(var e,i=this.criteriaSearchApplied?bizagi.clone(this.criteriaSearchApplied):[],r=this.filtersApplied.slice(),o=[],a=-1;e=r[++a];)this.dataService.defineFilterObject(e,i),this.dataService.defineFilterObject(e,o);var n=o.length;this.orderBy.properties&&this.dataService.defineFilterObject(this.orderBy,i),t.pageSize&&this._setPageSize(t.pageSize);var s={type:"UPDATE-DATATEMPLATE-VIEW",args:{filters:i,page:t.page,level:1,calculateFilters:t.calculateFilters||!1,defaultFilterApplied:!1,typeSearch:"filter",filtersAppliedCounter:n,pageSize:this._getPageSize()||10}};this.pub("notify",s)},_setPageSize:function(t){this.dataService.pageSize=t},_getPageSize:function(){return this.dataService.pageSize}}),bizagi.injector.register("bizagi.workportal.widgets.mysearchfilter",["workportalFacade","dataService","processActionService",bizagi.workportal.widgets.mysearchfilter],!1);
//# sourceMappingURL=../../../../Maps/desktop/entity-engine-view.desktop.production.js.map
