function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(e){var t=/_|-/,a=/::/,n=/([A-Z]+)([A-Z][a-z])/g,r=/([a-z\d])([A-Z])/g,o=/([a-z\d])([A-Z])/g,l=/\{([^\}]+)\}/g,s=/\./,u=function(e,t,i){return e[t]||i&&(e[t]={})},c=function(e){var t=_typeof(e);return t&&("function"==t||"object"==t)},d=function(t,i,a){var n,r,o,l=t?t.split(s):[],d=l.length,g=e.isArray(i)?i:[i||window],p=0;if(0==d)return g[0];for(;n=g[p++];){for(o=0;o<d-1&&c(n);o++)n=u(n,l[o],a);if(c(n)&&void 0!==(r=u(n,l[o],a)))return!1===a&&delete n[l[o]],r}},g=e.String=e.extend(e.String||{},{getObject:d,capitalize:function(e,t){return e.charAt(0).toUpperCase()+e.substr(1)},camelize:function(e){return(e=g.classize(e)).charAt(0).toLowerCase()+e.substr(1)},classize:function(e,i){for(var a=e.split(t),n=0;n<a.length;n++)a[n]=g.capitalize(a[n]);return a.join(i||"")},niceName:function(e){g.classize(parts[i]," ")},underscore:function(e){return e.replace(a,"/").replace(n,"$1_$2").replace(r,"$1_$2").replace(o,"_").toLowerCase()},sub:function(e,t,i){var a=[];return a.push(e.replace(l,(function(e,n){var r=d(n,t,"boolean"==typeof i?!i:i),o=_typeof(r);return"object"!==o&&"function"!==o||null===o?""+r:(a.push(r),"")}))),a.length<=1?a[0]:a}})}(jQuery),function(e){var t=!1,i=e.makeArray,a=e.isFunction,n=e.isArray,r=e.extend,o=function(e,t){return e.concat(i(t))},l=/xyz/.test((function(){xyz}))?/\b_super\b/:/.*/,s=function(e,t,i){for(var n in i=i||e,e)i[n]=a(e[n])&&a(t[n])&&l.test(e[n])?function(e,i){return function(){var a,n=this._super;return this._super=t[e],a=i.apply(this,arguments),this._super=n,a}}(n,e[n]):e[n]},u=e.Class=function(){arguments.length&&u.extend.apply(u,arguments)};r(u,{callback:function(e){var t,a=i(arguments);return e=a.shift(),n(e)||(e=[e]),t=this,function(){for(var i,r,l=o(a,arguments),s=e.length,u=0;u<s;u++)(r=e[u])&&((i="string"==typeof r)&&t._set_called&&(t.called=r),l=(i?t[r]:r).apply(t,l||[]),u<s-1&&(l=!n(l)||l._use_call?[l]:l));return l}},getObject:e.String.getObject,newInstance:function(){var e,t=this.rawInstance();return t.setup&&(e=t.setup.apply(t,arguments)),t.init&&t.init.apply(t,n(e)?e:arguments),t},setup:function(e,t){return this.defaults=r(!0,{},e.defaults,this.defaults),arguments},rawInstance:function(){t=!0;var e=new this;return t=!1,e},extend:function(e,i,a){"string"!=typeof e&&(a=i,i=e,e=null),a||(a=i,i=null),a=a||{};var n,l,c=this,d=this.prototype;function g(){if(!t)return this.constructor!==g&&arguments.length?arguments.callee.extend.apply(arguments.callee,arguments):this.Class.newInstance.apply(this.Class,arguments)}for(n in t=!0,l=new this,t=!1,s(a,d,l),this)this.hasOwnProperty(n)&&(g[n]=this[n]);if(s(i,this,g),e){var p=e.split(/\./),b=p.pop(),f=u.getObject(p.join("."),window,!0),h=f;f[b]=g}r(g,{prototype:l,namespace:h,shortName:b,constructor:g,fullName:e}),g.prototype.Class=g.prototype.constructor=g;var m=g.setup.apply(g,o([c],arguments));return g.init&&g.init.apply(g,m||[]),g}}),u.prototype.callback=u.callback}(jQuery),function(e,t){var i,a=e.fn.domManip,n=/^[^<]*(<[\w\W]+>)[^>]*$|\{\{\! /,r={},o={},l={key:0,data:{}},s=0,u=0,c=[];function d(t,i,a,n){var l={data:n||(i?i.data:{}),_wrap:i?i._wrap:null,tmpl:null,parent:i||null,nodes:[],calls:z,nest:_,wrap:w,html:S,update:E};return t&&e.extend(l,t,{nodes:[],parent:i}),a&&(l.tmpl=a,l._ctnt=l._ctnt||l.tmpl(e,l),l.key=++s,(c.length?o:r)[s]=l),l}e.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(t,a){e.fn[t]=function(n){var o,l,s,c,d=[],g=e(n),p=1===this.length&&this[0].parentNode;if(i=r||{},p&&11===p.nodeType&&1===p.childNodes.length&&1===g.length)g[a](this[0]),d=this;else{for(l=0,s=g.length;l<s;l++)u=l,o=(l>0?this.clone(!0):this).get(),e.fn[a].apply(e(g[l]),o),d=d.concat(o);u=0,d=this.pushStack(d,t,g.selector)}return c=i,i=null,e.tmpl.complete(c),d}})),e.fn.extend({tmpl:function(t,i,a){return e.tmpl(this[0],t,i,a)},tmplItem:function(){return e.tmplItem(this[0])},template:function(t){return e.template(t,this[0])},domManip:function(t,n,o,l){if(t[0]&&t[0].nodeType){for(var s,c=e.makeArray(arguments),d=t.length,g=0;g<d&&!(s=e.data(t[g++],"tmplItem")););d>1&&(c[0]=[e.makeArray(t)]),s&&u&&(c[2]=function(t){e.tmpl.afterManip(this,t,o)}),a.apply(this,c)}else a.apply(this,arguments);return u=0,i||e.tmpl.complete(r),this}}),e.extend({fasttmpl:function(t,i,a,n){a=a||{},$.extend(a,{fast:!0}),bizagi.chrono.start("fasttmpl");var r=e.tmpl(t,i,a,n);return bizagi.chrono.stop("fasttmpl"),r},tmpl:function(t,i,a,n){a&&a.nestedExecution||(g=[]);var s,u,c=!n,f=a&&a.fast;if(c)n=l,t=e.template[t]||e.template(null,t),o={};else if(!t)return t=n.tmpl,r[n.key]=n,n.nodes=[],n.wrapped&&m(n,n.wrapped),u=b(n,null,n.tmpl(e,n),f),a&&a.nestedExecution||p(),f?u:e(u);return t?("function"==typeof i&&(i=i.call(n||{})),a&&a.wrapped&&m(a,a.wrapped),s=e.isArray(i)?e.map(i,(function(e){return e?d(a,n,t,e):null})):[d(a,n,t,i)],c?(u=b(n,null,s,f),a&&a.nestedExecution||p(),f?u:e(u)):(a&&a.nestedExecution||p(),s)):[]},tmplItem:function(t){var i;for(t instanceof e&&(t=t[0]);t&&1===t.nodeType&&!(i=e.data(t,"tmplItem"))&&(t=t.parentNode););return i||l},template:function(t,i){return i?("string"==typeof i?i=h(i):i instanceof e&&(i=i[0]||{}),i.nodeType&&(i=e.data(i,"tmpl")||e.data(i,"tmpl",h(i.innerHTML))),"string"==typeof t?e.template[t]=i:i):t?"string"!=typeof t?e.template(null,t):e.template[t]||e.template(null,n.test(t)?t:e(t)):null},encode:function(e){return(""+e).split("<").join("&lt;").split(">").join("&gt;").split('"').join("&#34;").split("'").join("&#39;")}}),e.extend(e.tmpl,{tag:{tmpl:{_default:{$2:"null"},open:"if($notnull_1){_=_.concat($item.nest($1,$2));}"},wrap:{_default:{$2:"null"},open:"$item.calls(_,$1,$2);_=[];",close:"call=$item.calls();_=call._.concat($item.wrap(call,_));"},each:{_default:{$2:"$index, $value"},open:"if($notnull_1){$.each($1a,function($2){with(this){",close:"}});}"},if:{open:"if(($notnull_1) && $1a){",close:"}"},else:{_default:{$1:"true"},open:"}else if(($notnull_1) && $1a){"},html:{open:"if($notnull_1){_.push($1a);}"},"=":{_default:{$1:"$data"},open:"if($notnull_1){_.push($.encode($1a));}"},"!":{open:""}},complete:function(e){r={}},afterManip:function(t,i,a){var n=11===i.nodeType?e.makeArray(i.childNodes):1===i.nodeType?[i]:[];a.call(t,i),y(n),u++}});var g=[];function p(){if(g)for(var e=0;e<g.length;e++){$(g[e]).removeData("tmplItem")}g=null}function b(t,i,a,n){var r,o;return o=n?a?e.map(a,(function(e){return"string"==typeof e?e:b(e,t,e._ctnt,!0)})):t:a?e.map(a,(function(e){return"string"==typeof e?t.key?e.replace(/(<\w+)(?=[\s>])(?![^>]*_tmplitem)([^>]*)/g,'$1 _tmplitem="'+t.key+'" $2'):e:b(e,t,e._ctnt)})):t,i?o:(o=o.join(""),n?o:(o.replace(/^\s*([^<\s][^<]*)?(<[\w\W]+>)([^>]*[^>\s])?\s*$/,(function(t,i,a,n){y(r=e(a).get()),i&&(r=f(i).concat(r)),n&&(r=r.concat(f(n)))})),r||f(o)))}function f(t){var i=document.createElement("div");return i.innerHTML=t,e.makeArray(i.childNodes)}function h(t){var i="var $=jQuery,call,_=[],$data=$item.data;with($data){_.push('"+e.trim(t).replace(/([\\'])/g,"\\$1").replace(/[\r\t\n]/g," ").replace(/\$\{([^\}]*)\}/g,"{{= $1}}").replace(/\{\{(\/?)(\w+|.)(?:\(((?:[^\}]|\}(?!\}))*?)?\))?(?:\s+(.*?)?)?(\(((?:[^\}]|\}(?!\}))*?)\))?\s*\}\}/g,(function(t,i,a,n,r,o,l){var s,u,c,d=e.tmpl.tag[a];if(!d)throw"Template command not found: "+a;return s=d._default||[],o&&!/\w$/.test(r)&&(r+=o,o=""),r?(r=v(r),l=l?","+v(l)+")":o?")":"",u=o?r.indexOf(".")>-1?r+o:"("+r+").call($item"+l:r,c=o?u:"(typeof("+r+")==='function'?("+r+").call($item):("+r+"))"):c=u=s.$1||"null",n=v(n),"');"+d[i?"close":"open"].split("$notnull_1").join(r?"typeof("+r+")!=='undefined' && ("+r+")!=null":"true").split("$1a").join(c).split("$1").join(u).split("$2").join(n?n.replace(/\s*([^\(]+)\s*(\((.*?)\))?/g,(function(e,t,i,a){return(a=a?","+a+")":i?")":"")?"("+t+").call($item"+a:e})):s.$2||"")+"_.push('"}))+"');}return _;";return new Function("jQuery","$item",i)}function m(t,i){t._wrap=b(t,!0,e.isArray(i)?i:[n.test(i)?i:e(i).html()]).join("")}function v(e){return e?e.replace(/\\'/g,"'").replace(/\\\\/g,"\\"):null}function y(t){var i,a,n,l,c,g="_"+u,p={};for(n=0,l=t.length;n<l;n++)if(1===(i=t[n]).nodeType){for(c=(a=i.getElementsByTagName("*")).length-1;c>=0;c--)b(a[c]);b(i)}function b(t){var i,a,n,l,c=t;if(l=t.getAttribute("_tmplitem")){for(;c.parentNode&&1===(c=c.parentNode).nodeType&&!(i=c.getAttribute("_tmplitem")););i!==l&&(c=c.parentNode?11===c.nodeType?0:c.getAttribute("_tmplitem")||0:0,(n=r[l])||((n=d(n=o[l],r[c]||o[c],null,!0)).key=++s,r[s]=n),u&&b(l)),t.removeAttribute("_tmplitem")}else u&&(n=e.data(t,"tmplItem"))&&(b(n.key),r[n.key]=n,c=(c=e.data(t.parentNode,"tmplItem"))?c.key:0);if(n){for(a=n;a&&a.key!=c;)a.nodes.push(t),a=a.parent;delete n._ctnt,delete n._wrap,e.data(t,"tmplItem",n)}function b(e){n=p[e+=g]=p[e]||d(n,r[n.parent.key+g]||n.parent,null,!0)}}}function z(e,t,i,a){if(!e)return c.pop();c.push({_:e,tmpl:t,item:this,data:i,options:a})}function _(t,i,a){return a||(a={}),a.nestedExecution=!0,e.tmpl(e.template(t),i,a,this)}function w(t,i){var a=t.options||{};return a.wrapped=i,e.tmpl(e.template(t.tmpl),t.data,a,t.item)}function S(t,i){var a=this._wrap;return e.map(e(e.isArray(a)?a.join(""):a).filter(t||"*"),(function(e){return i?e.innerText||e.textContent:e.outerHTML||(t=e,(a=document.createElement("div")).appendChild(t.cloneNode(!0)),a.innerHTML);var t,a}))}function E(){var t=this.nodes;e.tmpl(null,null,null,this).insertBefore(t[0]),e(t).remove()}}(jQuery),$.Class.extend("bizagi.services.service",{},{init:function(){},getServerResourceDictionary:function(){var e="";"undefined"!=typeof bizagiConfig&&bizagiConfig.proxyPrefix?e=bizagiConfig.proxyPrefix:"undefined"!=typeof BIZAGI_PROXY_PREFIX&&(e=BIZAGI_PROXY_PREFIX);var t="undefined"==typeof BIZAGI_LANGUAGE?bizagi.language:BIZAGI_LANGUAGE;return $.ajax({url:e+"Rest/Multilanguage/Client?cultureName="+t+"&version="+bizagi.loader.version,rpcEnabled:!1,cache:!0,dataType:"json",async:!0})},getResourceDictionary:function(e){return $.ajax({url:e,rpcEnabled:!1,dataType:"json",async:!0})}}),$.Class.extend("bizagi.templates.services.service",{customTemplateFile:bizagi.loader.getResource("tmpl","bizagi.overrides."+bizagi.detectDevice()+".custom.templates"),cachedTemplates:{},customTemplates:{}},{init:function(e){this.localization=e,this.cssRegex=/{{css "(.+)"}}/g,this.loadingFileDeferred={}},loadCustomTemplates:function(){var e=this,t=new $.Deferred;return $.when(this.getTemplateFile(this.Class.customTemplateFile)).done((function(i){var a=$("<div />").html(i),n=$("script",a);$.each(n,(function(t,i){i=$(i),e.Class.customTemplates[i.attr("id")]=i.html()})),t.resolve()})),t.promise()},getTemplate:function(e){var t=!1;if(e=(e=e.replace(/([^#]*#)([^#]*#)([^#]*)/g,"$1$3")).replace(/([a-zA-Z_\/.-=]*)#([a-zA-Z_\/.-]*)\?(build=[a-zA-Z0-9.-]*)/g,"$1?$3#$2"),bizagi.enableCustomizations){var i=this.getHash(e);this.Class.customTemplates[i]&&(t=!0)}return t||"release"!==bizagi.loader.environment?this.internalGetTemplate(e).pipe((function(t){return $.template("#"+e,t)})):this.getTemplateForRelease(e).pipe((function(t){return $.template("#"+e,t)}))},getTemplateWidget:function(e){var t=!1;if(e=(e=e.replace(/([^#]*#)([^#]*#)([^#]*)/g,"$1$3")).replace(/([a-zA-Z_\/.-=]*)#([a-zA-Z_\/.-]*)\?(build=[a-zA-Z0-9.-]*)/g,"$1?$3#$2"),bizagi.enableCustomizations){var i=this.getHash(e);this.Class.customTemplates[i]&&(t=!0)}return t||"release"!==bizagi.loader.environment?this.internalGetTemplate(e).pipe((function(t){return $.templates("#"+e,t)})):this.getTemplateForRelease(e).pipe((function(t){return $.templates("#"+e,t)}))},getTemplateWebpart:function(e){return e=(e=e.replace(/([^#]*#)([^#]*#)([^#]*)/g,"$1$3")).replace(/([a-zA-Z_\/.-=]*)#([a-zA-Z_\/.-]*)\?(build=[a-zA-Z0-9.-]*)/g,"$1?$3#$2"),this.internalGetTemplate(e).pipe((function(t){return $.template("#"+e,t)}))},getTemplateForRelease:function(e){var t,i,a=this,n=$.Deferred();return a.containsHash(e)?(t=a.getUrlWithoutHashes(e),i=a.getHash(e)):(t=e,i=""),a.Class.cachedTemplates[t]?n.resolve(a.processAndReturnTemplate(t,i)):$.when(a.loadTemplateFileForRelease(t)).done((function(){n.resolve(a.processAndReturnTemplate(t,i))})),n.promise()},loadTemplateFileForRelease:function(e){var t=this,i=$.Deferred();return t.Class.cachedTemplates[e]?t.Class.cachedTemplates[e]:t.loadingFileDeferred[e]?($.when(t.loadingFileDeferred[e]).done((function(){i.resolve(t.Class.cachedTemplates[e])})),i.promise()):(t.loadingFileDeferred[e]=$.Deferred(),$.when($.ajax({url:e,dataType:"text"}),t.localization.ready()).done((function(a){var n,r,o;for(n in a||i.reject(""),"string"!=typeof a&&(a=JSON.parse(a[0])),t.Class.cachedTemplates[e]=a,a)a.hasOwnProperty(n)&&(r=a[n],o=(o=t.localization.translate(r)).replace(t.cssRegex,""),n.indexOf("jsrender")>=0?(delete t.Class.cachedTemplates[e][n],n=n.substring(0,n.indexOf("jsrender")-1),t.Class.cachedTemplates[e][n]=r,$.templates("#"+n,o)):$.template("#"+n,o),t.Class.cachedTemplates[e][n]=t.Class.cachedTemplates[n]=o);t.loadingFileDeferred[e].resolve(),i.resolve(a)})),i.promise())},processAndReturnTemplate:function(e,t){var i=this.Class.cachedTemplates[e][t];if(!i)throw"template "+i+"doesn't exist";return i},internalGetTemplate:function(e){var t=this,i=new $.Deferred,a=this.Class.cachedTemplates[e];if(a)i.resolve(a);else if(t.containsHash(e)){var n=t.getUrlWithoutHashes(e),r=t.getHash(e);if(t.Class.customTemplates[r])return i.resolve(t.Class.customTemplates[r]),i.promise();$.when(t.getTemplatePart(n,r)).done((function(a){t.Class.cachedTemplates[e]=a,i.resolve(a)}))}else $.when(t.getTemplateFile(e)).done((function(e){i.resolve(e)}));return i.promise()},getTemplatePart:function(e,t){var i=this,a=new $.Deferred;return $.when(i.loadingTemplatePartExecution).done((function(){i.loadingTemplatePart=!0,i.loadingTemplatePartExecution=new $.Deferred,$.when(i.getTemplateFile(e)).done((function(n){var r=$("<div />").html(n),o=$("#"+t,r);bizagi.assert(o.length>0,"No template part ("+t+") found in content for:"+e),n=o.html(),i.loadingTemplatePartExecution.resolve(),i.loadingTemplatePart=!0,a.resolve(n)}))})),a.promise()},getTemplateFile:function(e){var t=this,i=$.Deferred(),a=this.Class.cachedTemplates[e];return a||(t.loadingFileDeferred[e]?($.when(t.loadingFileDeferred[e]).done((function(){i.resolve(t.Class.cachedTemplates[e])})),i.promise()):(t.loadingFileDeferred[e]=$.Deferred(),$.when($.ajax({url:e,dataType:"text"}),t.localization.ready()).pipe((function(a){if(!a)return"";if("string"!=typeof a&&(a=a[0]),void 0===a)return"";var n=t.localization.translate(a),r=n.match(t.cssRegex);r&&$.each(r,(function(e,i){var a=i.replace(t.cssRegex,"$1");bizagi.loader.loadFile({src:a,type:"css",environment:"debug"})})),n=n.replace(t.cssRegex,"");var o=$("<div />").html(n);$("script",o).each((function(e,t){var i=$(t).attr("id"),a=$(t).attr("type");if($.templates&&a&&a.indexOf("jsrender")>=0)$.templates("#"+i,$(t).html());else try{$.template("#"+i,$(t).html())}catch(e){console.log(e,o)}})),t.Class.cachedTemplates[e]="string"==typeof n?n:n[0].outerHTML,t.loadingFileDeferred[e].resolve(),i.resolve(n)})),i.promise()))},containsHash:function(e){return-1!=e.indexOf("#")},getHash:function(e){return e.substring(e.indexOf("#")+1,e.length)},getUrlWithoutHashes:function(e){return e.substring(0,e.indexOf("#"))}});var originalEmptyMethod=jQuery.fn.empty;jQuery.fn.empty=function(){var e=originalEmptyMethod.apply(this,arguments),t=$(this);return t.hasClass("ui-bizagi-component-loading")&&t.loadingMessage(),e},jQuery.fn.fastEmpty=function(){this.children().remove();var e=$(this);e.hasClass("ui-bizagi-component-loading")&&e.loadingMessage()};var originalPrependMethod=jQuery.fn.prepend;jQuery.fn.prepend=function(){var e=$(this);if(0==e.length)return jQuery.fn;e.data("loading")&&(originalEmptyMethod.apply(this),e.data("loading",!1));var t=originalPrependMethod.apply(this,arguments);return"body"!=e[0].tagName.toLowerCase()&&e.find(".ui-bizagi-component-adjustable").length>0&&$(document).triggerHandler("resizeLayout"),e.removeData("loading"),t};var originalAppendMethod=jQuery.fn.append;jQuery.fn.append=function(){var element=$(this);if(0==element.length)return jQuery.fn;eval(element.attr("data-loading"))&&(originalEmptyMethod.apply(this),element.data("loading",!1));var result=originalAppendMethod.apply(this,arguments),tagName=element[0].tagName||"";return"body"!=tagName.toLowerCase()&&element.find(".ui-bizagi-component-adjustable").length>0&&$(document).triggerHandler("resizeLayout"),element.removeData("loading"),result};var originalTmplMethod=jQuery.tmpl;for(key in jQuery.tmpl=function(){var e=originalTmplMethod.apply(this,arguments);return arguments[2]&&arguments[2].fast?e:($(".ui-bizagi-component",e).each((function(e,t){for(var i=$(t).attr("component"),a=$(t).parent();0==a[0].tagName.length;)a=a.parent();a.attr("data-bizagi-component",i),$(t).detach()})),$("[data-loading=true]",e).length>0&&$("[data-loading=true]",e).loadingMessage(),$("[data-loading=true]",e).addClass("ui-bizagi-component-loading"),e.jquery&&$.each(e,(function(e,t){t.outerHTML&&$(t).is("[data-loading=true]")&&($(t).loadingMessage(),$(t).addClass("ui-bizagi-component-loading"))})),$("[data-adjustable=true]",e).addClass("ui-bizagi-component-adjustable"),e.jquery&&$.each(e,(function(e,t){t.outerHTML&&$(t).is("[data-adjustable=true]")&&$(t).addClass("ui-bizagi-component-adjustable")})),e)},originalTmplMethod)jQuery.tmpl[key]=originalTmplMethod[key];function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}$.extend(jQuery.tmpl.tag,{component:{open:'_ = _.concat(\'<div class="ui-bizagi-component" component="$1"></div>\');'},loading:{open:"_ = _.concat('data-loading=\"true\"');"},adjustable:{open:"_ = _.concat('data-adjustable=\"true\"');"},resource:{_default:{$1:"$data"},open:"if($notnull_1){_.push($.encode(bizagi.localization.getResource($1a)));}"},log:{open:"console.log($1, $2);"},children:{open:"_ = _.concat('{{children}}');"},control:{open:"_ = _.concat('{{control}}');"},files:{open:"_ = _.concat('{{files}}');"},result:{open:"_ = _.concat('{{result}}');"},element:{open:"_ = _.concat('{{element $1}}');"},for:{_default:{$2:"var i=1;i<=1;i++"},open:"for ($2){",close:"};"},actions:{open:"_ = _.concat('{{actions}}');"}}),bizagi="undefined"!=typeof bizagi?bizagi:{},bizagi.chrono=void 0!==bizagi.chrono?bizagi.chrono:{},bizagi.enableTrace=!1,bizagi.enableDebug=!1,bizagi.enableChrono=!1,bizagi.log=function(e,t,i){var a=window.document;if(bizagi.enableTrace){var n,r;if(void 0===bizagi.logContainer&&(bizagi.logContainer=$(".ui-bizagi-log-container",a),0==bizagi.logContainer.length&&(bizagi.logContainer=(n=$("<div />").appendTo($("body",a)),r=void 0!==bizagi.detectDevice?bizagi.detectDevice():bizagi.util.detectDevice(),n.bizagi_notifications({headerAdditionalClass:"ui-bizagi-log-container-header",containerAdditionalClass:"ui-bizagi-notifications-container ui-bizagi-log-container",itemIcon:"ui-icon-info",title:"Debugging Log",location:"top",device:r}),n.bind("itemClick",(function(e,t){var i=$("<div />").appendTo($("body"),a),n="desktop"==r?$("<textarea />"):$("<textarea readonly=true />");"string"==typeof t.data?(n.height("90%"),n.width("100%"),n.text(t.data),i.append(n)):(n.height("90%"),n.width("100%"),n.text(JSON.encode(t.data)),i.append(n)),i.dialog({width:640,height:480,modal:!0,title:"Object Hierarchy",close:function(){i.dialog("destroy"),i.detach()}})})),n))),t)try{t=JSON.parse(JSON.encode(t))}catch(e){t={}}bizagi.logContainer.bizagi_notifications("addNotification",e,t,function(e){if("info"==(e=e||"ui-icon-bullet"))return"ui-icon-info";if("warning"==e)return"ui-icon-alert";if("error"==e)return"ui-icon-circle-close";if("timer"==e)return"ui-icon-clock";if("success"==e)return"ui-icon-check";return e}(i))}},bizagi.assert=function(e,t,i){e||bizagi.log(t,i,"error")},bizagi.logError=function(e,t){bizagi.log(e,t,"error")},bizagi.debug=function(e,t){bizagi.enableDebug&&bizagi.log(e,t,"info")},bizagi.getLogInstance=function(){return bizagi.logContainer},bizagi.chrono.init=function(e){e?bizagi.chronos[e]={millis:0,timestamp:0}:bizagi.chronos={}},bizagi.chrono.start=function(e,t){bizagi.enableChrono&&(t=void 0!==t&&t,bizagi.chronos[e]=bizagi.chronos[e]||{millis:0,timestamp:0},bizagi.chronos[e].running||(bizagi.chronos[e].timestamp=(new Date).getTime(),bizagi.chronos[e].profiling=bizagi.enableProfiler&&t,bizagi.chronos[e].running=!0,bizagi.enableProfiler&&t&&(console.time(e),console.timeStamp(e),console.profile(e))))},bizagi.chrono.initAndStart=function(e){bizagi.chrono.init(e),bizagi.chrono.start(e)},bizagi.chrono.stop=function(e){if(bizagi.enableChrono&&(bizagi.chronos[e]=bizagi.chronos[e]||{millis:0,timestamp:0},bizagi.chronos[e].running)){var t=(new Date).getTime()-bizagi.chronos[e].timestamp;bizagi.chronos[e].millis=bizagi.chronos[e].millis+t,bizagi.chronos[e].running=!1,bizagi.chronos[e].profiling&&(console.timeEnd(e),console.timeStamp(e+"end"),console.profileEnd(e))}},bizagi.chrono.stopAndLog=function(e){bizagi.chronos[e]&&bizagi.chronos[e].running&&bizagi.chrono.stop(e),bizagi.chrono.log(e)},bizagi.chrono.log=function(e){bizagi.chronos[e]&&bizagi.log("Timer "+e+": "+bizagi.chronos[e].millis+"ms",null,"timer")},bizagi.chrono.logTimers=function(){if(bizagi.enableChrono)for(key in bizagi.chronos)bizagi.chrono.log(key)},bizagi.chrono.init(),bizagi="undefined"!=typeof bizagi?bizagi:{},bizagi.util=void 0!==bizagi.util?bizagi.util:{},$.Class.extend("bizagi.l10n",{templateRegex:/%{([\w-{}$.]+)(?:\s'([^']+)')?}/,templateSubExpressionRegex:/[$]{([\w.]+)}/g},{init:function(e){this.resourceLocationDefinition=e,this.service=new bizagi.services.service,this.dictionaries={},this.dictionary={},this.readyDeferred=null,this.enableCustomizations=void 0!==bizagi.enableCustomizations?bizagi.enableCustomizations:"undefined"==typeof BIZAGI_ENABLE_CUSTOMIZATIONS||BIZAGI_ENABLE_CUSTOMIZATIONS,this.defaultDatetimeInfo="undefined"!=typeof BIZAGI_DEFAULT_DATETIME_INFO&&BIZAGI_DEFAULT_DATETIME_INFO,this.useLocalAndServerResources="undefined"!=typeof BIZAGI_ENABLE_LOCAL_AND_SERVER_RESOURCES&&BIZAGI_ENABLE_LOCAL_AND_SERVER_RESOURCES,this.observableElement=$("<div></div>"),!0===this.useLocalAndServerResources&&"undefined"!=typeof PouchDB&&(this.resourcesDatabase=new PouchDB("Resources",{auto_compaction:!0}))},setLanguage:function(e){var t=this;t.language=e,t.readyDeferred=new $.Deferred,$.when(t._getDictionary(e)).done((function(e){if(t.dictionary=e,t.isRTL=e.datePickerRegional.isRTL,t.defaultDatetimeInfo&&(t.defaultDatetimeInfo.shortDateFormat&&t.overrideSpecificResource("dateFormat",t.defaultDatetimeInfo.shortDateFormat),t.defaultDatetimeInfo.timeFormat&&t.overrideSpecificResource("timeFormat",t.defaultDatetimeInfo.timeFormat)),t.enableCustomizations){if(t.resourceLocationDefinition.custom){var i="undefined"!=typeof BIZAGI_LOCAL_RESOURCES&&BIZAGI_LOCAL_RESOURCES?t.service.getResourceDictionary:t.service.getServerResourceDictionary;i===t.service.getServerResourceDictionary&&BIZAGI_LANGUAGE===t.language?t.service.getResourceDictionary(t.resourceLocationDefinition.custom).done((function(e){t.overrideResources(e),t.readyDeferred.resolve(),t.observableElement.trigger("setLanguage",t.dictionary)})):i(t.resourceLocationDefinition.custom).done((function(e){t.enableCustomizations&&t.overrideResources(e),t.readyDeferred.resolve(),t.observableElement.trigger("setLanguage",t.dictionary)}))}}else t.readyDeferred.resolve(),t.observableElement.trigger("setLanguage",t.dictionary)}))},loadLanguageExtension:function(e){var t=this;t.language=e,t.readyDeferred=new $.Deferred;var i=t.getLanguageFromCulture(e);return void 0===t.resourceLocationDefinition[i.toLowerCase()]&&(i="default"),t.service.getResourceDictionary(t.resourceLocationDefinition[i.toLowerCase()]).done((function(i){t.dictionaries[e.toLowerCase()]=t.dictionaries[e.toLowerCase()]||{},$.extend(t.dictionaries[e.toLowerCase()],i),t.readyDeferred.resolve()})).fail((function(t,i,a){alert("Can't load localization file for language: "+e+", "+i+" - "+a)})),t.readyDeferred.promise()},getLanguageFromCulture:function(e){return-1!==e.indexOf("-")?e.split("-")[0]:e},resolvei18n:function(e){if(!e)return"";if("string"==typeof e)return e;if(this.language&&"default"!=this.language){var t=e.i18n.default.languages[this.language];if(t)return t}return e.i18n.default},getResource:function(e,t){return null==this.dictionary[e]?void 0!==t?t:e:this.dictionary[e]},getResourceByElementsNumber:function(e,t){return t>1?this.getResource(e+"-plural"):this.getResource(e+"-singular")},setResource:function(e,t){e&&""!==e&&(this.dictionary[e]=t)},getMessageFromLocalization:function(e,t,i,a){var n="";"error"===t?a?n=e:(e=e.toLowerCase(),(n=bizagi.localization.getResource("workportal-general-error-"+e))==="workportal-general-error-"+e&&"workportal-general-error-generic"===bizagi.localization.getResource("workportal-general-error-generic")&&(n="The request could not be completed.")):n=bizagi.localization.getResource(e);if(i)for(var r=0;r<i.length;r++)n=n.replace("{"+r+"}",i[r]);return n},translate:function(e){var t;do{if(t=this.Class.templateRegex.exec(e)){var i=t[1],a=t.length>=2?t[2]:void 0;if(-1==i.indexOf("$"))e=e.replaceAll(t[0],this.getResource(i,a));else{var n=this.Class.templateSubExpressionRegex.exec(i);if(!n){n=/[$]{([\w.]+)}/g.exec(i)}e=e.replaceAll(t[0],"{{resource "+n[1]+"}}")}}}while(null!=t);return e},overrideResources:function(e){var t,i=e[bizagiConfig.defaultLanguage||"default"];for(var a in i)if(t=this.dictionary[a],bizagi.util.isObject(t))for(var n in i[a])t[n]=i[a][n];else this.dictionary[a]=i[a]},overrideSpecificResource:function(e,t){e=e||"nodefined",t=t||"",this.dictionary[e]=t},_getDictionary:function(e){var t=this,i=new $.Deferred;if(e=e.toLowerCase(),null!=t.dictionaries[e])return t.dictionaries[e];var a=t._getUserLanguage(e);return t.useLocalAndServerResources?t._getLocalAndServerResourcesDictionary(a):(("undefined"!=typeof BIZAGI_LOCAL_RESOURCES&&BIZAGI_LOCAL_RESOURCES?t.service.getResourceDictionary:t.service.getServerResourceDictionary)(t.resourceLocationDefinition[a]).done((function(a){t.dictionaries[e]=a,i.resolve(a)})).fail((function(t,a,n){if(void 0===t.responseJSON&&0===t.status&&"error"===t.statusText&&""===n)console.log("Can't load localization file for language: "+e+", "+a+" - "+n);else if(503===t.status){i.resolve({})}else alert("Can't load localization file for language: "+e+", "+a+" - "+n)})),i.promise())},_getLocalAndServerResourcesDictionary:function(e){var t=new $.Deferred,i=this,a=i.resourceLocationDefinition[e],n=new $.Deferred,r=new $.Deferred;return i.service.getServerResourceDictionary(a).then((function(t){n.resolve(t),i._saveServerResourcesInDatabase(e,t)})).fail((function(t,a,r){$.when(i._getServerResourcesFromDatabase(e)).then((function(e){n.resolve(e),console.log("Server resources were loaded from DB")})).fail((function(){n.resolve({})})),console.error("Can't load localization file (server) for language: "+e,a,r)})),i.service.getResourceDictionary(a).then((function(e){r.resolve(e)})).fail((function(t,i,a){r.resolve({}),console.error("Can't load localization file (local resources) for language: "+e,i,a)})),$.when(r,n).then((function(a,n){var r={};$.extend(r,a,n),i.dictionaries[e]=r,t.resolve(r)})).fail((function(){console.error("Error loading mixed resources",arguments),t.reject()})),t.promise()},_getServerResourcesFromDatabase:function(e){var t=this.resourcesDatabase;if(null==t)return{};var i=new $.Deferred,a=e+"-"+(bizagiConfig&&bizagiConfig.applicationUrl?bizagiConfig.applicationUrl:"default");return $.when(bizagi.util.db.getDocument(t,a)).then((function(e){i.resolve(e.dictionary)})).fail((function(){i.resolve({}),console.error("Can't load localization resources from DB for language: ",arguments)})),i.promise()},_saveServerResourcesInDatabase:function(e,t){var i=this.resourcesDatabase;if(null!=i){var a=e+"-"+(bizagiConfig&&bizagiConfig.applicationUrl?bizagiConfig.applicationUrl:"default");$.when(bizagi.util.db.getDocument(i,a)).then((function(e){e.dictionary=t,bizagi.util.db.saveDocument(i,e)})).fail((function(){var n={language:e,dictionary:t,_id:a};bizagi.util.db.saveDocument(i,n)}))}},_getUserLanguage:function(e){var t=e;if(t.length>0&&null==this.resourceLocationDefinition[t]){var i=t.split("-");t=i[0]}return 0!=t.length&&null!=this.resourceLocationDefinition[t]||(bizagi.log("No resource definition location has been given for language :"+e+", loading default language"),t="default"),t},ready:function(){return this.readyDeferred.promise()}}),bizagi="undefined"!=typeof bizagi?bizagi:{},bizagi.util=void 0!==bizagi.util?bizagi.util:{},bizagi.context=void 0!==bizagi.context?bizagi.context:{},bizagi.util.smartphone=void 0!==bizagi.util.smartphone?bizagi.util.smartphone:{},bizagi.util.tablet=void 0!==bizagi.util.tablet?bizagi.util.tablet:{};var DEVICES={};function printf(e){var t,i=Array.prototype.slice.call(arguments,1);return e.replace(/(%[disv])/g,(function(e,a){if(void 0!==(t=i.shift()))switch(a.charCodeAt(1)){case 100:return+t;case 105:return Math.round(+t);case 115:return String(t);case 118:return t}return a}))}function bizagiQueue(){var e,t,i=[];this.length=function(){return i.length},this.add=function(a){if(!t)return t=!0,e=void 0,i.push({callbacks:[a]});i[i.length-1].callbacks.push(a)},this.addParallel=function(a){if(!e)return e=!0,t=void 0,i.push({callbacks:[a]});i[i.length-1].callbacks.push(a)},this.execute=function(){for(var e=new $.Deferred,t=e.promise(),a=i.length,n=0;n<a;n++)t=t.pipe((function(){var e=i.shift();return $.when.apply($,$.map(e.callbacks,(function(e){if("function"==typeof e){var t=$.Deferred();return $.when(e()).done((function(){t.resolve()})).fail((function(){t.reject()})),t.promise()}return e})))}));return e.resolve(),t=t.done((function(){i=[]}))}}DEVICES[DEVICES.desktop=0]="desktop",DEVICES[DEVICES.smartphone=1]="smartphone",DEVICES[DEVICES.tablet=2]="tablet",bizagi.deviceEnum=DEVICES,function(e){e.fn.callInside=function(t,i){if("iframe"!=e(this)[0].tagName.toLowerCase())return null;if(null==e(this)[0].contentWindow)return null;try{e(this)[0].contentWindow.args=i}catch(e){return null}return e.browser.msie?e(this)[0].contentWindow.execScript("args = (this.window.args)?this.window.args:{}; insideFunction = "+t.toString()+"; insideFunction(args)"):e.browser.webkit||e.browser.mozilla?e(this)[0].contentWindow.eval("args = window.args;insideFunction = "+t.toString()+"; insideFunction(args)"):void 0}}(jQuery),function(e){e.fn.callInsidePopup=function(t,i){var a=this;e(document).ready((function(){try{e(a)[0].args=i}catch(e){return null}return e.browser.msie?e(a)[0].execScript("args = (this.window.args)?this.window.args:{}; insideFunction = "+t.toString()+"; insideFunction(args)"):e.browser.webkit||e.browser.mozilla?e(a)[0].eval("args = window.args;insideFunction = "+t.toString()+"; insideFunction(args)"):void 0}))}}(jQuery),jQuery,!!CSSStyleDeclaration.prototype.getPropertyValue||(CSSStyleDeclaration.prototype.getPropertyValue=function(e){return this.getAttribute(e)},CSSStyleDeclaration.prototype.setProperty=function(e,t,i){if(this.setAttribute(e,t),""!=(i=void 0!==i?i:"")){var a=new RegExp(RegExp.escape(e)+"\\s*:\\s*"+RegExp.escape(t)+"(\\s*;)?","gmi");this.cssText=this.cssText.replace(a,e+": "+t+" !"+i+";")}},CSSStyleDeclaration.prototype.removeProperty=function(e){return this.removeAttribute(e)},CSSStyleDeclaration.prototype.getPropertyPriority=function(e){return new RegExp(RegExp.escape(e)+"\\s*:\\s*[^\\s]*\\s*!important(\\s*;)?","gmi").test(this.cssText)?"important":""}),RegExp.escape=function(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},jQuery.fn.style=function(e,t,i){if(void 0!==this.get(0)){var a=this.get(0).style;if(void 0===e)return a;if(void 0===t)return a.getPropertyValue(e);i=void 0!==i?i:"",a.setProperty?a.setProperty(e,t,i):a.setAttribute(e,t,i)}},jQuery,jQuery.nl2br=function(e){return e.replace(/(\r\n|\n\r|\r|\n|\\r\\n|\\n\\r|\\r|\\n)/g,"<br>")},jQuery,jQuery.br2nl=function(e){return e.replace(/\r\n|\r|\n/g,"\r")},function(e){jQuery.controlValueIsChanged=function(t){var i=t,a=i.properties,n=i.getValue(),r=a.originalValue,o=!0;return!!e.forceCollectData||("grid"!=t.properties.type||"pending"!=t.ready().state())&&(["combo","queryCombo","list","queryList","radio","queryRadio","queryState"].includes(a.type)||/^cascadingcombo$/i.test(a.type)?(n&&void 0!==n.length&&(n=n[0]),r&&void 0!==r.length&&(r=r[0]),n=n&&n.id?n.id:n,o=(r=r&&r.id?r.id:r)!=n):o="boolean"==a.type||"queryBoolean"==a.type||"queryCheck"==a.type?bizagi.util.parseBoolean(r)!=bizagi.util.parseBoolean(n):"searchNumber"==a.type?!!n:"date"===a.type?new Date(r).getTime()!==new Date(n).getTime():r!==n,o)}}(jQuery),function(e){jQuery.getMaxZindex=function(){var t=e("*"),i=1;return e.each(t,(function(t,a){var n=parseInt(e(a).css("z-index"));n>i&&(i=n+1)})),i}}(jQuery),function(e){jQuery.equalizeHeights=function(t){var i=new Array;e(t).each((function(){e(this).css("min-height","0"),e(this).css("max-height","none"),e(this).css("height","auto"),i.push(e(this).outerHeight())}));var a=Math.max.apply(Math,i);e(t).each((function(){e(this).css("height",a+"px")}))}}(jQuery),bizagi.util.autoSave=function(){var e=$.Deferred();return"desktop"!==bizagi.util.detectDevice()?$(document).data("auto-save")?$(document).trigger("save-form",[e]):e.resolve():$._data($(document)[0],"events")["save-form"]&&$._data($(document)[0],"events")["save-form"].length>0?$(document).trigger("save-form",[e]):e.resolve(),e.promise()},bizagi.util.anonymizedUserInformation={id:"00000000-0000-0000-0000-000000000000",name:"",username:"",email:"",domain:"",picture:"",isAnonymized:!0},bizagi.util.datepickerResource=[],bizagi.util.datepickerResource.en={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"dd/mm/yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},bizagi.util.datepickerResource.es={closeText:"Cerrar",prevText:"&#x3C;Ant",nextText:"Sig&#x3E;",currentText:"Hoy",monthNames:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"],monthNamesShort:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],dayNames:["domingo","lunes","martes","miércoles","jueves","viernes","sábado"],dayNamesShort:["dom","lun","mar","mié","jue","vie","sáb"],dayNamesMin:["D","L","M","X","J","V","S"],weekHeader:"Sm",dateFormat:"dd/mm/yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},bizagi.util.datepickerResource.ar={closeText:"إغلاق",prevText:"&#x3C;السابق",nextText:"التالي&#x3E;",currentText:"اليوم",monthNames:["يناير","ٝبراير","مارس","أبريل","مايو","يونيو","يوليو","أغسطس","سبتمبر","أكتوبر","نوٝمبر","ديسمبر"],monthNamesShort:["1","2","3","4","5","6","7","8","9","10","11","12"],dayNames:["الأحد","الاثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],dayNamesShort:["أحد","اثنين","ثلاثاء","أربعاء","خميس","جمعة","سبت"],dayNamesMin:["ح","ن","ث","ر","خ","ج","س"],weekHeader:"أسبوع",dateFormat:"dd/mm/yy",firstDay:0,isRTL:!0,showMonthAfterYear:!1,yearSuffix:""},bizagi.util.datepickerResource.cs={closeText:"Zavřít",prevText:"&#x3C;Dříve",nextText:"Později&#x3E;",currentText:"Nyní",monthNames:["leden","únor","březen","duben","květen","ĝerven","ĝervenec","srpen","září","říjen","listopad","prosinec"],monthNamesShort:["led","úno","bře","dub","kvě","ĝer","ĝvc","srp","zář","říj","lis","pro"],dayNames:["neděle","pondělí","úterý","středa","ĝtvrtek","pátek","sobota"],dayNamesShort:["ne","po","út","st","ĝt","pá","so"],dayNamesMin:["ne","po","út","st","ĝt","pá","so"],weekHeader:"Týd",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},bizagi.util.datepickerResource.de={closeText:"Schließen",prevText:"&#x3C;Zurück",nextText:"Vor&#x3E;",currentText:"Heute",monthNames:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],monthNamesShort:["Jan","Feb","Mär","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"],dayNames:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],dayNamesShort:["So","Mo","Di","Mi","Do","Fr","Sa"],dayNamesMin:["So","Mo","Di","Mi","Do","Fr","Sa"],weekHeader:"KW",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},bizagi.util.datepickerResource.fr={closeText:"Fermer",prevText:"Précédent",nextText:"Suivant",currentText:"Aujourd'hui",monthNames:["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre"],monthNamesShort:["janv.","févr.","mars","avr.","mai","juin","juil.","août","sept.","oct.","nov.","déc."],dayNames:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],dayNamesShort:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],dayNamesMin:["D","L","M","M","J","V","S"],weekHeader:"Sem.",dateFormat:"dd/mm/yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},bizagi.util.datepickerResource.it={closeText:"Chiudi",prevText:"&#x3C;Prec",nextText:"Succ&#x3E;",currentText:"Oggi",monthNames:["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"],monthNamesShort:["Gen","Feb","Mar","Apr","Mag","Giu","Lug","Ago","Set","Ott","Nov","Dic"],dayNames:["Domenica","Lunedì","Martedì","Mercoledì","Giovedì","Venerdì","Sabato"],dayNamesShort:["Dom","Lun","Mar","Mer","Gio","Ven","Sab"],dayNamesMin:["Do","Lu","Ma","Me","Gi","Ve","Sa"],weekHeader:"Sm",dateFormat:"dd/mm/yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},bizagi.util.datepickerResource.ja={closeText:"閉㝘る",prevText:"&#x3C;剝",nextText:"次&#x3E;",currentText:"今日",monthNames:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],monthNamesShort:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],dayNames:["日曜日","月曜日","睫曜日","水曜日","木曜日","金曜日","土曜日"],dayNamesShort:["日","月","睫","水","木","金","土"],dayNamesMin:["日","月","睫","水","木","金","土"],weekHeader:"週",dateFormat:"yy/mm/dd",firstDay:0,isRTL:!1,showMonthAfterYear:!0,yearSuffix:"年"},bizagi.util.datepickerResource.nl={closeText:"Sluiten",prevText:"←",nextText:"→",currentText:"Vandaag",monthNames:["januari","februari","maart","april","mei","juni","juli","augustus","september","oktober","november","december"],monthNamesShort:["jan","feb","mrt","apr","mei","jun","jul","aug","sep","okt","nov","dec"],dayNames:["zondag","maandag","dinsdag","woensdag","donderdag","vrijdag","zaterdag"],dayNamesShort:["zon","maa","din","woe","don","vri","zat"],dayNamesMin:["zo","ma","di","wo","do","vr","za"],weekHeader:"Wk",dateFormat:"dd-mm-yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},bizagi.util.datepickerResource.pt={closeText:"Fechar",prevText:"Anterior",nextText:"Seguinte",currentText:"Hoje",monthNames:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],monthNamesShort:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"],dayNames:["Domingo","Segunda-feira","Terça-feira","Quarta-feira","Quinta-feira","Sexta-feira","Sábado"],dayNamesShort:["Dom","Seg","Ter","Qua","Qui","Sex","Sáb"],dayNamesMin:["Dom","Seg","Ter","Qua","Qui","Sex","Sáb"],weekHeader:"Sem",dateFormat:"dd/mm/yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},bizagi.util.datepickerResource.ru={closeText:"Закрыть",prevText:"&#x3C;Пред",nextText:"След&#x3E;",currentText:"Сегоднѝ",monthNames:["Январь","Февраль","Март","Нпрель","Май","Июнь","Июль","Нвгуѝт","Сентѝбрь","Октѝбрь","Ноѝбрь","Декабрь"],monthNamesShort:["Янв","Фев","Мар","Нпр","Май","Июн","Июл","Нвг","Сен","Окт","Ноѝ","Дек"],dayNames:["воѝкреѝенье","понедельник","вторник","ѝреда","четверг","пѝтница","ѝуббота"],dayNamesShort:["вѝк","пнд","втр","ѝрд","чтв","птн","ѝбт"],dayNamesMin:["Вѝ","Пн","Вт","Ср","Чт","Пт","Сб"],weekHeader:"Нед",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},bizagi.util.datepickerResource.zh={closeText:"关闭",prevText:"&#x3C;上月",nextText:"下月&#x3E;",currentText:"今天",monthNames:["一月","二月","三月","四月","五月","六月","七月","八月","九月","坝月","坝一月","坝二月"],monthNamesShort:["一月","二月","三月","四月","五月","六月","七月","八月","九月","坝月","坝一月","坝二月"],dayNames:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],dayNamesShort:["周日","周一","周二","周三","周四","周五","周六"],dayNamesMin:["日","一","二","三","四","五","六"],weekHeader:"周",dateFormat:"yy-mm-dd",firstDay:1,isRTL:!1,showMonthAfterYear:!0,yearSuffix:"年"},bizagi.util.liveProcessesEvents=bizagi.util.liveProcessesEvents||{},bizagi.util.liveProcessesEvents.newLiveProcess=document.createEvent("Event"),bizagi.util.liveProcessesEvents.newLiveProcess.initEvent("new-live-process",!0,!0),bizagi.util.liveProcessesEvents.routeEvents=document.createEvent("Event"),bizagi.util.liveProcessesEvents.routeEvents.initEvent("parent-route-events",!0,!0),bizagi.util.liveProcessesEvents.routeEvents.route="/",bizagi.util.liveProcessesEvents.saveEvent=document.createEvent("Event"),bizagi.util.liveProcessesEvents.saveEvent.initEvent("save-live",!0,!0),bizagi.util.liveProcessesEvents.saveEvent.lastWidget="",bizagi.util.liveProcessesEvents.saveEvent.nextWidget="",bizagi.util.liveSave=function(e){bizagi.util.liveProcessesEvents.saveEvent.nextWidget=e;var t=$.Deferred(),i=0;try{i=$(document).find("iframe")[0].contentWindow.location.href.indexOf("quickprocess")}catch(e){i=-1}return(e!==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_PROFLY||e===bizagi.util.liveProcessesEvents.saveEvent.lastWidget)&&$(document).find("iframe").length>0&&i>0?(bizagi.util.liveProcessesEvents.saveEvent.saveLivePromise=t,document.dispatchEvent(bizagi.util.liveProcessesEvents.saveEvent)):t.resolve(),$.when(t).done((function(){bizagi.util.liveProcessesEvents.saveEvent.lastWidget=e})),t.promise()},bizagi.util.md5=function(e){var t=t||function(e,t){var i={},a=i.lib={},n=function(){},r=a.Base={extend:function(e){n.prototype=this;var t=new n;return e&&t.mixIn(e),t.hasOwnProperty("init")||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},o=a.WordArray=r.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||s).stringify(this)},concat:function(e){var t=this.words,i=e.words,a=this.sigBytes;if(e=e.sigBytes,this.clamp(),a%4)for(var n=0;n<e;n++)t[a+n>>>2]|=(i[n>>>2]>>>24-n%4*8&255)<<24-(a+n)%4*8;else if(65535<i.length)for(n=0;n<e;n+=4)t[a+n>>>2]=i[n>>>2];else t.push.apply(t,i);return this.sigBytes+=e,this},clamp:function(){var t=this.words,i=this.sigBytes;t[i>>>2]&=4294967295<<32-i%4*8,t.length=e.ceil(i/4)},clone:function(){var e=r.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var i=[],a=0;a<t;a+=4)i.push(4294967296*e.random()|0);return new o.init(i,t)}}),l=i.enc={},s=l.Hex={stringify:function(e){var t=e.words;e=e.sigBytes;for(var i=[],a=0;a<e;a++){var n=t[a>>>2]>>>24-a%4*8&255;i.push((n>>>4).toString(16)),i.push((15&n).toString(16))}return i.join("")},parse:function(e){for(var t=e.length,i=[],a=0;a<t;a+=2)i[a>>>3]|=parseInt(e.substr(a,2),16)<<24-a%8*4;return new o.init(i,t/2)}},u=l.Latin1={stringify:function(e){var t=e.words;e=e.sigBytes;for(var i=[],a=0;a<e;a++)i.push(String.fromCharCode(t[a>>>2]>>>24-a%4*8&255));return i.join("")},parse:function(e){for(var t=e.length,i=[],a=0;a<t;a++)i[a>>>2]|=(255&e.charCodeAt(a))<<24-a%4*8;return new o.init(i,t)}},c=l.Utf8={stringify:function(e){try{return decodeURIComponent(escape(u.stringify(e)))}catch(e){throw Error("Malformed UTF-8 data")}},parse:function(e){return u.parse(unescape(encodeURIComponent(e)))}},d=a.BufferedBlockAlgorithm=r.extend({reset:function(){this._data=new o.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=c.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var i=this._data,a=i.words,n=i.sigBytes,r=this.blockSize,l=n/(4*r);if(t=(l=t?e.ceil(l):e.max((0|l)-this._minBufferSize,0))*r,n=e.min(4*t,n),t){for(var s=0;s<t;s+=r)this._doProcessBlock(a,s);s=a.splice(0,t),i.sigBytes-=n}return new o.init(s,n)},clone:function(){var e=r.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});a.Hasher=d.extend({cfg:r.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){d.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,i){return new e.init(i).finalize(t)}},_createHmacHelper:function(e){return function(t,i){return new g.HMAC.init(e,i).finalize(t)}}});var g=i.algo={};return i}(Math);return function(e){function i(e,t,i,a,n,r,o){return((e=e+(t&i|~t&a)+n+o)<<r|e>>>32-r)+t}function a(e,t,i,a,n,r,o){return((e=e+(t&a|i&~a)+n+o)<<r|e>>>32-r)+t}function n(e,t,i,a,n,r,o){return((e=e+(t^i^a)+n+o)<<r|e>>>32-r)+t}function r(e,t,i,a,n,r,o){return((e=e+(i^(t|~a))+n+o)<<r|e>>>32-r)+t}for(var o=t,l=(u=o.lib).WordArray,s=u.Hasher,u=o.algo,c=[],d=0;64>d;d++)c[d]=4294967296*e.abs(e.sin(d+1))|0;u=u.MD5=s.extend({_doReset:function(){this._hash=new l.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var o=0;16>o;o++){var l=e[s=t+o];e[s]=16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8)}o=this._hash.words;var s=e[t+0],u=(l=e[t+1],e[t+2]),d=e[t+3],g=e[t+4],p=e[t+5],b=e[t+6],f=e[t+7],h=e[t+8],m=e[t+9],v=e[t+10],y=e[t+11],z=e[t+12],_=e[t+13],w=e[t+14],S=e[t+15],E=i(E=o[0],T=o[1],x=o[2],I=o[3],s,7,c[0]),I=i(I,E,T,x,l,12,c[1]),x=i(x,I,E,T,u,17,c[2]),T=i(T,x,I,E,d,22,c[3]);E=i(E,T,x,I,g,7,c[4]),I=i(I,E,T,x,p,12,c[5]),x=i(x,I,E,T,b,17,c[6]),T=i(T,x,I,E,f,22,c[7]),E=i(E,T,x,I,h,7,c[8]),I=i(I,E,T,x,m,12,c[9]),x=i(x,I,E,T,v,17,c[10]),T=i(T,x,I,E,y,22,c[11]),E=i(E,T,x,I,z,7,c[12]),I=i(I,E,T,x,_,12,c[13]),x=i(x,I,E,T,w,17,c[14]),E=a(E,T=i(T,x,I,E,S,22,c[15]),x,I,l,5,c[16]),I=a(I,E,T,x,b,9,c[17]),x=a(x,I,E,T,y,14,c[18]),T=a(T,x,I,E,s,20,c[19]),E=a(E,T,x,I,p,5,c[20]),I=a(I,E,T,x,v,9,c[21]),x=a(x,I,E,T,S,14,c[22]),T=a(T,x,I,E,g,20,c[23]),E=a(E,T,x,I,m,5,c[24]),I=a(I,E,T,x,w,9,c[25]),x=a(x,I,E,T,d,14,c[26]),T=a(T,x,I,E,h,20,c[27]),E=a(E,T,x,I,_,5,c[28]),I=a(I,E,T,x,u,9,c[29]),x=a(x,I,E,T,f,14,c[30]),E=n(E,T=a(T,x,I,E,z,20,c[31]),x,I,p,4,c[32]),I=n(I,E,T,x,h,11,c[33]),x=n(x,I,E,T,y,16,c[34]),T=n(T,x,I,E,w,23,c[35]),E=n(E,T,x,I,l,4,c[36]),I=n(I,E,T,x,g,11,c[37]),x=n(x,I,E,T,f,16,c[38]),T=n(T,x,I,E,v,23,c[39]),E=n(E,T,x,I,_,4,c[40]),I=n(I,E,T,x,s,11,c[41]),x=n(x,I,E,T,d,16,c[42]),T=n(T,x,I,E,b,23,c[43]),E=n(E,T,x,I,m,4,c[44]),I=n(I,E,T,x,z,11,c[45]),x=n(x,I,E,T,S,16,c[46]),E=r(E,T=n(T,x,I,E,u,23,c[47]),x,I,s,6,c[48]),I=r(I,E,T,x,f,10,c[49]),x=r(x,I,E,T,w,15,c[50]),T=r(T,x,I,E,p,21,c[51]),E=r(E,T,x,I,z,6,c[52]),I=r(I,E,T,x,d,10,c[53]),x=r(x,I,E,T,v,15,c[54]),T=r(T,x,I,E,l,21,c[55]),E=r(E,T,x,I,h,6,c[56]),I=r(I,E,T,x,S,10,c[57]),x=r(x,I,E,T,b,15,c[58]),T=r(T,x,I,E,_,21,c[59]),E=r(E,T,x,I,g,6,c[60]),I=r(I,E,T,x,y,10,c[61]),x=r(x,I,E,T,u,15,c[62]),T=r(T,x,I,E,m,21,c[63]);o[0]=o[0]+E|0,o[1]=o[1]+T|0,o[2]=o[2]+x|0,o[3]=o[3]+I|0},_doFinalize:function(){var t=this._data,i=t.words,a=8*this._nDataBytes,n=8*t.sigBytes;i[n>>>5]|=128<<24-n%32;var r=e.floor(a/4294967296);for(i[15+(n+64>>>9<<4)]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),i[14+(n+64>>>9<<4)]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),t.sigBytes=4*(i.length+1),this._process(),i=(t=this._hash).words,a=0;4>a;a++)n=i[a],i[a]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8);return t},clone:function(){var e=s.clone.call(this);return e._hash=this._hash.clone(),e}}),o.MD5=s._createHelper(u),o.HmacMD5=s._createHmacHelper(u)}(Math),t.MD5(e).toString()},bizagi.util.multiReplace=function(e,t){for(var i in t=t||{}){var a=new RegExp(i,"g");e=e.replace(a,t[i])}return e},bizagi.util.replaceAll=function(e,t,i){return bizagi.replaceAll(e,t,i)},bizagi.util.replaceAllGlobalRegExp=function(e,t,i){var a=e,n=new RegExp(t,"g");return(a=a.replace(n,i)).toString()},String.prototype.replaceAll=function(e,t){return bizagi.util.replaceAll(this,e,t)},String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)},String.prototype.startsWith=function(e){return this.slice(0,e.length)==e},String.prototype.getInitials=function(){var e="";if(0===this.length)e='<svg  class="bz-icon bz-icon-24 bz-icon-svg"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#icon-user-deactivated"></use></svg>';else{try{for(var t=this.replace(/  +/g," ").split(" "),i=0;i<t.length&&2!=(e+=t[i][0]||"").length;i+=1);}catch(e){}e=e.toUpperCase()}return e},Math.sign=Math.sign||function(e){return 0===(e=+e)||isNaN(e)?e:e>0?1:-1},bizagi.clone=function(e){if(null!=e)return null==e?null:JSON.parse(JSON.encode(e))},bizagi.measureString=function(e,t){var i=$("<span/>").appendTo("body");i.text(e),t&&i.css("font-size",t);var a=i.width();return i.detach(),a},bizagi.util.trim=function(e){return void 0===e||null==e?e:e.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},String.prototype.endsWith=function(e){return-1!==this.indexOf(e,this.length-e.length)},String.prototype.endsWith=function(e){return-1!==this.indexOf(e,this.length-e.length)},bizagi.util.isIE7=function(){return bizagi.util.isIE()&&7==document.documentMode},bizagi.util.isIE8=function(){return bizagi.util.isIE()&&8==document.documentMode},bizagi.util.isIE9=function(){return bizagi.util.isIE()&&9==document.documentMode},bizagi.util.isIE10=function(){return bizagi.util.isIE()&&10==document.documentMode},bizagi.util.isIE11=function(){return!!navigator.userAgent.match(/Trident\/7.0/)&&!navigator.userAgent.match(/MSIE/i)},bizagi.util.isIE11OrLower=function(){return bizagi.util.isIE11()||bizagi.util.isIE10()||bizagi.util.isIE9()||bizagi.util.isIE8()||bizagi.util.isIE7()},bizagi.util.isIE10OrLower=function(){return bizagi.util.isIE10()||bizagi.util.isIE9()||bizagi.util.isIE8()||bizagi.util.isIE7()},bizagi.util.isEdge=function(){return!!/Edge\/*./i.test(navigator.userAgent)},bizagi.util.isIE=function(){return navigator.appName.indexOf("Internet Explorer")>0||!!navigator.userAgent.match(/Trident/)},bizagi.util.objectValues=function(e){return bizagi.util.isIE()?Object.keys(e).map((function(t){return e[t]})):Object.values(e)},bizagi.util.getIEVersion=function(){var e=window.navigator.userAgent,t=e.indexOf("MSIE"),i=0;return t>0?i=parseInt(e.substring(t+5,e.indexOf(".",t))):(navigator.userAgent.match(/Trident/)||window.navigator.userAgent.indexOf("Edge")>-1)&&(i=11),i},bizagi.util.isChrome=function(){return/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)},bizagi.util.isFirefox=function(e){return/Firefox/.test(navigator.userAgent)&&(void 0===e||e<=(i=navigator.userAgent,a=i.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[],/trident/i.test(a[1])?{name:"IE",version:(t=/\brv[ :]+(\d+)/g.exec(i)||[])[1]||""}:"Chrome"===a[1]&&null!=(t=i.match(/\bOPR|Edge\/(\d+)/))?{name:"Opera",version:t[1]}:(a=a[2]?[a[1],a[2]]:[navigator.appName,navigator.appVersion,"-?"],null!=(t=i.match(/version\/(\d+)/i))&&a.splice(1,1,t[1]),{name:a[0],version:a[1]})).version);var t,i,a},bizagi.util.getBrowser=function(){var e="undetected";return bizagi.util.isChrome()?e="chrome":bizagi.util.isFirefox()?e="firefox":bizagi.util.isEdge()?e="edge":bizagi.util.isIE11()?e="ie11":bizagi.util.isIE10()&&(e="ie10"),e},bizagi.util.emptyNavigatorInfo=function(){bizagi.navigator&&bizagi.navigator.info&&(bizagi.navigator.info={})},$(document).ready((function(){if($("html").addClass("browser-"+bizagi.util.getBrowser()).addClass("device-"+bizagi.detectDevice()),bizagi.language){var e=bizagi.language.split("-");e&&e.length>0&&$("html").addClass("language-"+e[0])}})),bizagi.util.setIphoneXOverrides=function(){bizagi.util.isNativePluginSupported()&&void 0!==bizagiapp.isIphoneX&&bizagiapp.isIphoneX((function(e){if("true"===e)$("head").append('<style type="text/css" id="iphoneXStyle"></style>'),$("#iphoneXStyle").text(".bz-menu-home .bz-menu-carousel .bz-menu-carousel-seat{padding:0 16px 16px}.bz-home-header .km-navbar{padding:35px 16px 5px}#menuHome .bz-home-header .km-navbar{padding:30px 3px 0}#menuHome .km-navbar .km-rightitem{font-size:19px;right:.4em;top:32px}#menuHome .km-navbar .km-leftitem{font-size:24px;left:0;top:25px}#taskFeed .km-navbar .km-rightitem{font-size:19px;top:25px;right:0}#taskFeed .km-navbar .km-leftitem{font-size:24px;top:20px;left:0}#homePortal #menuHome .km-view-title .km-buttongroup{margin-left:0;top:2px}.bz-render-header,.search-container{padding-top:25px}#activity-search,.search-container .bz-wp-mu-button-search{padding-top:40px}#content-newCase-drawer{padding-top:25px}#menuHome{background:#EBEDF1!important}.km-flat .km-content{background-color:#fff} .k-loading-mask{top:0!important}");else if(bizagi.util.isiOSDevice()){$("head").append('<style type="text/css" id="iphoneStyle"></style>');$("#iphoneStyle").text("#homePortal .bz-home-header > div{padding-top:.8em}")}}))},bizagi.util.isString=function(e){return"[object String]"===Object.prototype.toString.apply(e)},bizagi.util.isObject=function(e){return"[object Object]"===Object.prototype.toString.apply(e)},bizagi.util.isArray=function(e){return Array.isArray(e)},bizagi.util.isNull=function(e){return"[object Null]"===Object.prototype.toString.apply(e)},bizagi.util.isBoolean=function(e){return"[object Boolean]"===Object.prototype.toString.apply(e)},bizagi.util.getInternetExplorerVersion=function(){return bizagi.util.isIE()?Number(document.documentMode):-1},bizagi.util.detectDevice=function(){return bizagi.detectDevice()},bizagi.util.isNumeric=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},bizagi.util.isGUID=function(e){return/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)},bizagi.util.mustImplement=function(e){try{console.log("Not implemented exception: "+e)}catch(e){}},bizagi.util.encodeXpath=function(e){return bizagi.util.isEmpty(e)||void 0===e.replaceAll?"":e.replaceAll(".","_").replaceAll("=","_").replaceAll("[","_").replaceAll("]","_")},bizagi.util.parseBoolean=function(e){return void 0===e?null:null===e?null:""===e?null:!0===e||1===e||"true"===e.toString()||"1"===e||("true"===e.toString().toLowerCase()||(null===e||!1!==e)&&0!==e&&"false"!==e.toString()&&"0"!==e&&("false"!==e.toString().toLowerCase()&&null))},bizagi.util.isEmpty=function(e){return 0!==e&&(null==e||""===e||("Array"==typeof e?0==e.length:"[object Array]"===Object.prototype.toString.apply(e)?0===e.length:"[object Object]"===Object.prototype.toString.apply(e)&&(!!$.isEmptyObject(e)||bizagi.util.isEmptyCombo(e))))},bizagi.util.isEmptyCombo=function(e){if("[object Object]"===Object.prototype.toString.apply(e)){var t,i=!1,a=!1;for(t in e)if(e.hasOwnProperty(t)&&("id"===t?i=!0:"value"===t?!0:a=!0,a))return!1;if(i)return""===e.id}},bizagi.util.decodeURI=function(e){for(var t,i=!1,a=e=e||"";!i;)try{if(t=decodeURI(a),bizagi.util.hasNonVisibleChars(t)){a=e;break}t==a?i=!0:a=t}catch(e){i=!0}return a},bizagi.util.hasNonVisibleChars=function(e){for(var t,i=(e=e||"").length,a=0,n=!1;a<i;)if((t=e.charCodeAt(a++))<32||t>126){n=!0;break}return n},bizagi.util.percent2Number=function(e){return Number(String(e).replace("%",""))},bizagi.util.isObjectEmpty=function(e){return!(e.length>0)},bizagi.util.isMapEmpty=function(e){if(1==e.length&&0==e[0].length)return!0;for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},bizagi.util.replaceSelector=function(e,t,i){var a=$(t,e);a.length>0&&(a.append(i),a.children().unwrap())},bizagi.util.hasScroll=function(e,t){e.length&&(e=e[0]);var i=!!e[t="vertical"===t?"scrollTop":"scrollLeft"];return i||(e[t]=1,i=!!e[t],e[t]=0),i},bizagi.util.identicalObjects=function(e,t){if(_typeof(e)!==_typeof(t))return!1;if("function"==typeof e)return e.toString()===t.toString();if(e instanceof Object&&t instanceof Object){if(bizagi.util.countProps(e)!==bizagi.util.countProps(t))return!1;for(k in e)if(!bizagi.util.identicalObjects(e[k],t[k]))return!1;return!0}return e===t},bizagi.util.countProps=function(e){var t=0;for(k in e)e.hasOwnProperty(k)&&t++;return t},bizagi.util.isScrolledIntoView=function(e,t){if(null==e)return!1;var i=(t=t||$(window)).scrollTop(),a=$(e).offset().top;return a+$(e).height()<=i+$(t).height()&&a>=i},bizagi.util.centerElementIntoScroll=function(e,t){if(null==e)return!1;var i=(t=t||$(window)).scrollTop(),a=$(e).offset().top,n=$(e).height(),r=i+(a>0?a+n:a-n);t.scrollTop(r)},bizagi.util.encodeHtml=function(e){return null==e?"":"string"==typeof e?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):e},bizagi.util.decodeHtmlEntities=function(e){return null==e?"":"string"==typeof e?e.replace(/&apos;/g,'"').replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,"'"):e},bizagi.util.getHashParams=function(){return window.location.hash.substring(1).split("#")},bizagi.util.loadFile=function(e){var t=new $.Deferred,i=e&&e.src?e.src:e,a=e&&e.type?e.type:null;return bizagi.loader.loadFile({src:i,type:a}).then((function(){t.resolve()})),t.promise()},bizagi.util.initWebpart=function(e,t){var i=new $.Deferred;return t=t||bizagi.detectDevice(),e.initialized?i.resolve():e.initializing?$.when(e.loadingDeferred.promise()).done((function(){i.resolve()})):(e.loadingDeferred=new $.Deferred,e.initializing=!0,bizagi.loader.initWebpart(e,t,(function(){e.loadingDeferred.resolve(),e.initializing=!1,i.resolve()}))),i.promise()},bizagi.util.getQueryString=function(e){for(var t={},i=((e=e||window.location.href).indexOf("?")>0?e.substring(e.indexOf("?")+1):"").split("&"),a=i.length-1;a>=0;a--){var n=i[a].indexOf("=");if(-1!=n){var r=i[a].substring(0,n),o=i[a].substring(n+1);t[r]=unescape(o)}}return t},bizagi.util.extendQueryString=function(e,t){var i=e.indexOf("?")>0?e.substring(0,e.indexOf("?")):e,a=bizagi.util.getQueryString(e),n=$.extend({},a,t);return i+"?"+$.param(n)},bizagi.util.getStackTrace=function(){var e=[],t=!1;try{i.dont.exist+=0}catch(o){if(o.stack){for(var i=0,a=(n=o.stack.split("\n")).length;i<a;i++)n[i].match(/^\s*[A-Za-z0-9\-_\$]+\(/)&&e.push(n[i]);e.shift(),t=!0}else if(window.opera&&o.message){var n;for(i=0,a=(n=o.message.split("\n")).length;i<a;i++)if(n[i].match(/^\s*[A-Za-z0-9\-_\$]+\(/)){var r=n[i];n[i+1]&&(r+=" at "+n[i+1],i++),e.push(r)}e.shift(),t=!0}}if(!t)for(var o=arguments.callee.caller;o;){var l=o.toString(),s=l.substring(l.indexOf("function")+8,l.indexOf(""))||"anonymous";e.push(s),o=o.caller}return e},bizagi.util.highLightElement=function(e){e.addClass("ui-highlight-control"),$.when(setTimeout((function(){e.addClass("ui-highlight-off-control")}),450)).done(setTimeout((function(){e.removeClass("ui-highlight-control ui-highlight-off-control")}),800))},bizagi.util.autoScrollBottom=function(e){try{var t;t=e[0].scrollHeight,e.scrollTop(t)}catch(e){}},bizagi.util.autoScrollInterval={init:!1},bizagi.util.autoScroll=function(e,t,i,a){var n=!1;clearInterval(bizagi.util.autoScrollInterval[a]),bizagi.util.autoScrollInterval[a]=0,bizagi.util.autoScrollInterval.init=!0,$("body").addClass("autoscroll"),$("body.autoscroll").mousemove((function(r){r.pageY<t?n||(n=!0,bizagi.util.autoScrollTopInterval(e,"autoscroll",a)):r.pageY>i?n||(n=!0,bizagi.util.autoScrollBottomInterval(e,"autoscroll",a)):(clearInterval(bizagi.util.autoScrollInterval[a]),n=!1)}))},bizagi.util.autoScrollTopInterval=function(e,t,i){clearInterval(bizagi.util.autoScrollInterval[i]),t&&$("body").addClass(t),0==e.scrollTop()?clearInterval(bizagi.util.autoScrollInterval[i]):(clearInterval(bizagi.util.autoScrollInterval[i]),bizagi.util.autoScrollInterval[i]=setInterval((function(){e.scrollTop()>0?e.scrollTop(e.scrollTop()-40):clearInterval(bizagi.util.autoScrollInterval[i])}),100))},bizagi.util.autoScrollBottomInterval=function(e,t,i){clearInterval(bizagi.util.autoScrollInterval[i]),t&&$("body").addClass(t);var a=$(e)[0].scrollHeight-$(e).innerHeight();e.scrollTop()>=a?clearInterval(bizagi.util.autoScrollInterval[i]):(clearInterval(bizagi.util.autoScrollInterval[i]),bizagi.util.autoScrollInterval[i]=setInterval((function(){bizagi.util.autoScrollBottom($("html")),e.scrollTop()<a?e.scrollTop(e.scrollTop()+40):clearInterval(bizagi.util.autoScrollInterval[i])}),100))},bizagi.util.removeAutoScroll=function(e,t){$("body."+e).unbind("mousemove").removeClass(e),clearInterval(bizagi.util.autoScrollInterval[t]),bizagi.util.autoScrollInterval.init=!1},bizagi.util.getMaxZIndex=function(e){return e=e||$("div,span"),Math.max.apply(null,$(e).map((function(){var e;return isNaN(e=parseInt($(this).css("z-index"),10))?0:e})))},bizagi.showPopup=function(e,t,i){var a=t.width||1024,n=t.height||768,r=$(window).height()/2-n/2,o=$(window).width()/2-a/2,l=window.open(e,"","width="+a+",height="+n+", top="+r+", left="+o+", Menubar=NO, Location=NO, Status=NO, scrollbars=YES");window.BAPopupWindow=l,window.BAPopupCallback=i,window.BACloseWindow=function(e,t){window.BAPopupWindow.close(),window.BAPopupCallback(e,t)}},bizagi.showQuirksModePopup=function(e,t){var i=window.BIZAGI_PATH_TO_BASE+"quirks.html",a=t.width||1024,n=t.height||768,r=$(window).height()/2-n/2,o=$(window).width()/2-a/2,l=window.open(i,"bizagiPopup","width="+a+",height="+n+", top="+r+", left="+o+", Menubar=NO, Location=NO, Status=NO, scrollbars=YES");window.BAQuirksPopupWindow=l,setTimeout((function(){try{l.document.title=t.title}catch(e){}}),50),$(l).callInsidePopup((function(e){var t=e.jQuery,i=e.popupWindow;i.quirksOnLoad=function(){var a=t("body",i.document),n=t("iframe",a);a.removeClass("ui-bizagi-loading-message"),n.show();var r=e.userParams.afterLoad;if(r&&null!=r){var o=t.extend(e.userParams,{popupWindow:i});n.callInside(r,o)}};!function a(){var n=t("body",i.document);n.length>0?n.append("<iframe scrolling='yes' id='innerFrameContent' src='"+e.url+"' style='width: 100%; height: 100%; display:none' frameborder='0' onload='quirksOnLoad();'></iframe>"):setTimeout((function(){a()}),50)}()}),{jQuery:$,userParams:t,popupWindow:l,url:e})},bizagi.resolveResult=function(e){var t;return e.done((function(e){t=e})),t},bizagi.createPopup=function(e){var t=e.name,i=e.onClose,a=e.title?e.title:"",n="boolean"!=typeof e.handleClose||e.handleClose,r=$('<div class="ui-widget-overlay '+t+'-overlay" />'),o=$('<div class="'+t+'-popup  ui-popup-modal"/>').appendTo(r),l=$('<div class="'+t+'-btn-close biz-btn-close"><i class="biz-icon ui-close-btn bz-studio bz-black bz-false_16x16_black"></i></div>').appendTo(o);e.title&&$('<div class="'+t+'-popup-header ui-popup-header" ><h3>'+a+"</h3></div>").appendTo(o);var s=$('<div class="'+t+'-popup-content" />').appendTo(o);o.hide(),e.additionalClass&&o.addClass(e.additionalClass);var u=e.container||"body";r.appendTo($(u,document)),e.center&&(o.css("top",(r.height()-o.height())/2),o.css("left",(r.width()-o.width())/2)),o.show();var c=function(e){r.detach(),i&&i(e)};return n&&l.click(c),{fullPopup:o,overlay:r,content:s,close:function(e){c(e)}}},bizagi.createOkCancelPopup=function(e){e.name="popup-ok-cancel";var t=e.onOk,i=e.onCancel,a=bizagi.createPopup(e),n=$("<div></div>").addClass("container-okcancel-popup"),r=$("<div></div>").addClass("message-okcancel-popup ui-light-bevel-border biz-gradient-v"),o=$("<div></div>").addClass("buttonsContainer-okcancel-popup biz-actions-bar");r.text(e.message),r.appendTo(n);var l=$("<span></span>").addClass("ok-button-okcancel-popup editor-ui-button-actions biz-action-btn biz-btn"),s=$("<span></span>").addClass("cancel-button-okcancel-popup editor-ui-button-actions biz-action-btn biz-btn");l.text(bizagi.localization.getResource("bizagi-editor-okcancel-ok")),s.text(bizagi.localization.getResource("bizagi-editor-okcancel-cancel")),l.appendTo(o),s.appendTo(o),o.appendTo(n),n.appendTo(a.content);var u=function(){a.close(),"function"==typeof t&&t()};l.click(u);var c=function(){a.close(),"function"==typeof i&&i()};return s.click(c),{close:function(){a.close()},ok:function(){u()},cancel:function(){c()}}},bizagi.dialog=function(e){var t=$("<div></div>").addClass("biz-dialog"),i=$("<p></p>");i.text(e.message||""),i.appendTo(t),t.appendTo($("body",document)),t.dialog({title:e.title,modal:!0,buttons:e.buttons,close:function(){t.dialog("destroy")}})},bizagi.closeQuirksModePopup=function(){var e=window.BAQuirksPopupWindow;window.BAQuirksPopupWindow=null;try{e&&e.close()}catch(e){}},bizagi.getStyle=function(e){var t,i=location.href.replace("/default.aspx",""),a=!!e.match(/@/),n=!!e.match(/\*/),r=new RegExp(e.replace("*",""),"g"),o="";if(""==e)return"";var l=function(e){for(var i=0;i<document.styleSheets.length;i++)if(null!=(t=document.styleSheets[i].rules||document.styleSheets[i].cssRules))for(var l=0;l<t.length;l++)if(null!=document.styleSheets[i].href&&(null==document.styleSheets[i].href.match(/less.css/g)||"release"==BIZAGI_ENVIRONMENT)){var s=t[l].cssText?t[l].cssText:"";n?null!=t[l].selectorText&&null!=t[l].selectorText.match(r)&&($.browser.webkit?o+=t[l].cssText.replace(/\(path\)/g,""):$.browser.msie&&"8.0"==$.browser.version?o+=t[l].style.cssText:o+=t[l].cssText.replace(/\(path\)/g,"../../jquery/workportal/css/desktop")):null!=t[l].selectorText&&t[l].selectorText==e&&(o+=t[l].cssText),a&&null!=t[l]&&null!=s&&-1!=s.indexOf("@font-face")&&($.browser.webkit?o+=s.replace(/jquery\/workportal\/css\/desktop\//g,"").replace(/\(path\)/g,""):o+=s.replace(/\(path\)/g,"../../"))}return o};return $.browser.msie?function(e){if("8.0"==$.browser.version)return l(e);for(var a,s=0;s<document.styleSheets.length;s++)if(null!=(t=document.styleSheets[s].cssRules||document.styleSheets[s].rules))for(var u=0;u<t.length;u++)if("release"==BIZAGI_ENVIRONMENT)n&&(null!=t[u].selectorText&&null!=t[u].selectorText.match(r)?o+=t[u].cssText.replace(/\(path\)/g,i+"/jquery/workportal/css/desktop"):null!=t[u].selectorText&&t[u].selectorText==e&&(o+=t[u].cssText.replace(/\(path\)/g,i+"/jquery/workportal/css/desktop")));else if(null!=t[u].href&&null!=t[u].href&&null==t[u].href.match(/less.css/g)){a=t[u].styleSheet.cssRules||[];for(var c=0;c<a.length;c++)n?null==a[c].selectorText&&null==a[c].selectorText||null==a[c].selectorText.match(r)||(o+=a[c].cssText.replace(/\(path\)/g,i+"/jquery/workportal/css/desktop")):null!=a[c].selectorText&&a[c].selectorText==e&&(o+=a[c].cssText.replace(/\(path\)/g,i+"/jquery/workportal/css/desktop"))}return o}(e):l(e)},bizagi.cookie=function(e,t,i){if(arguments.length>1&&"[object Object]"!==String(t)){if(i=$.extend({},i),null==t&&(i.expires=-1),"number"==typeof i.expires){var a=i.expires,n=i.expires=new Date;n.setDate(n.getDate()+a)}return t=String(t),document.cookie=[encodeURIComponent(e),"=",i.raw?t:encodeURIComponent(t),i.expires?"; expires="+i.expires.toUTCString():"",i.path?"; path="+i.path:"",i.domain?"; domain="+i.domain:"",i.secure?"; secure":""].join("")}var r,o=(i=t||{}).raw?function(e){return e}:decodeURIComponent;return(r=new RegExp("(?:^|; )"+encodeURIComponent(e)+"=([^;]*)").exec(document.cookie))?o(r[1]):null},bizagi.util.randomNumber=function(e,t){return e=e||1,t=t||1e7,Math.floor(Math.random()*(t-e+1))+e},bizagi.util.setContext=function(e,t){e=e||{},(t=t||!1)&&(bizagi.context={}),$.each(e,(function(e,t){bizagi.context[e]=t})),bizagi.context.idWorkItem=bizagi.context.idWorkitem},bizagi.util.reloadCSS=function(){var e="?reload="+(new Date).getTime();$('link[rel="stylesheet"]').each((function(){this.href=this.href.replace(/\?.*|$/,e)}))},bizagi.util.setInterval=function(params){var _name=params.name||"default",_call=params.call||function(){},_params=params.params||{},_singleton=params.singleton||!1,_timeOut=params.timeout||5e3,_maxIterations=params.iterations||1e3,_context=params.context||"true;",_killWhenExitContext=!params.hasOwnProperty("killWhenExitContext")||params.killWhenExitContext;bizagi.timeOut=bizagi.timeOut||{},null==bizagi.timeOut[_name]&&(bizagi.timeOut[_name]=[]),_singleton&&null!=bizagi.timeOut[_name]&&(bizagi.timeOut[_name]=[]),bizagi.timeOut[_name].push({name:_name,params:_params,call:_call,singleton:_singleton,timeOut:_timeOut,iterations:0,maxIterations:_maxIterations,context:_context,killWhenExitContext:_killWhenExitContext,itsRunning:!1,timeInit:Math.round((new Date).getTime())});var executeTimeOut=function executeTimeOut(){$.each(bizagi.timeOut,(function(k,v){$.each(v,(function(key,value){var now=Math.round((new Date).getTime()),actualIterations=Math.round((now-value.timeInit)/value.timeOut);if(bizagi.timeOut[value.name][key].iterations=actualIterations,actualIterations<value.maxIterations)if(eval(value.context)){if(!value.itsRunning){if(value.params&&$.browser.msie)var ieFunction=function(){return value.call(value.params)};bizagi.timeOut[value.name][key].pointer=$.browser.msie?setInterval(ieFunction,value.timeOut,"JavaScript"):setInterval(value.call,value.timeOut,value.params),bizagi.timeOut[value.name][key].itsRunning=!0}}else value.killWhenExitContext?(bizagi.timeOut[value.name].splice(key,1),clearTimeout(value.pointer)):(bizagi.timeOut[value.name][key].itsRunning=!1,clearTimeout(value.pointer));else clearTimeout(value.pointer),bizagi.timeOut[value.name].splice(key,1)}))}))};bizagi.timeOutRunning||(bizagi.timeOutRunning=!0,setInterval(executeTimeOut,1e3))},bizagi.util.isDate=function(e){var t,i,a=!1,n=!1,r=!1,o=(e=e||"").toString().split(" ");return t=o[0],(/^\d{1,2}\/\d{1,2}\/\d{4}$/.test(t)||/^\d{4}\/\d{1,2}\/\d{1,2}$/.test(t)||/^\d{1,2}\/\d{1,2}\/\d{1,2}$/.test(t))&&(a=!0),o.length>1&&(i=o[1],n=!0,3==o.length&&(i=i+" "+o[2]),/^\d{1,2}:\d{2}(:\d{2})?(\s[aApP][mM])?$/.test(i)&&(r=!0)),n?a&&r:a},bizagi.util.unicode2htmlencode=function(e){var t,i=(e=e.replace(/\r\n/g,"\n")).length,a="";for(t=0;t<i;t++)a+="&#x"+e.charCodeAt(t).toString(16)+";";return a},bizagi.util.getHeadElement=function(){var e=document.getElementsByTagName("head")[0],t=document&&document.documentElement;return e||(e=document.createElement("head"),t.insertBefore(e,t.firstChild)),bizagi.util.getHeadElement=function(){return e},e},bizagi.util.loadStyle=function(e,t){var i,a=document.getElementById(t);if(e&&!a){var n=document.createElement("style");n.type="text/css",n.id=t,n.styleSheet?n.styleSheet.cssText=e:(i=document.createTextNode(e),n.childNodes.length?n.firstChild.nodeValue!==i.nodeValue&&n.replaceChild(i,n.firstChild):n.appendChild(i)),bizagi.util.getHeadElement().appendChild(n)}},bizagi.util.loadIconStyle=function(e,t){bizagi.log("bizagi.util.loadIconStyle");var i=document.createElement("style");i.type="text/css";var a=".mtool-item-image-"+t+" { background:url(data:image/png;base64,"+e+"); }";i.innerHTML=a,bizagi.util.getHeadElement().appendChild(i)},bizagi.util.formatDecimalAndMoneyCell=function(e,t){var i,a,n,r,o={decimalSymbol:t.decimalSeparator,digitGroupSymbol:t.groupSeparator,roundToDecimalPlace:t.decimalDigits};for(i=$.extend({symbol:"€",decimalSeparator:",",groupSeparator:".",decimalDigits:"2"},t),a=$.extend({colorize:!1,decimalSymbol:".",digitGroupSymbol:",",groupDigits:!0,negativeFormat:"(%s%n)",positiveFormat:"%s%n",roundToDecimalPlace:"2",symbol:""},o),n=0;n<e.columnTitle.length;n++){if("MONEY"==e.columnTitle[n].type.toUpperCase())for(r=0;r<e.rows.length;r++)e.rows[r].fields[n]=bizagi.util.formatMoney(e.rows[r].fields[n],i);if("FLOAT"==e.columnTitle[n].type.toUpperCase()||"REAL"==e.columnTitle[n].type.toUpperCase())for(r=0;r<e.rows.length;r++){var l=bizagi.util.formatDecimal(e.rows[r].fields[n],a);if(!0===bizagi.override.removeTrailingZeros){var s=!0;-1!=l.toString().indexOf(")")&&(s=!1,l=l.replace("(","").replace(")",""));var u=new RegExp("("+BIZAGI_DEFAULT_CURRENCY_INFO.decimalSeparator+"\\d*?[1-9])0+$","g");l=l.replace(u,"$1"),u=new RegExp("\\"+BIZAGI_DEFAULT_CURRENCY_INFO.decimalSeparator+"0+$","g"),l=l.replace(u,""),s||(l="("+l+")")}e.rows[r].fields[n]=l}}return e},bizagi.util.formatBoolean=function(e){return 1==bizagi.util.parseBoolean(e)?bizagi.localization.getResource("render-boolean-yes"):0==bizagi.util.parseBoolean(e)?bizagi.localization.getResource("render-boolean-no"):""},bizagi.util.formatInvariantBoolean=function(e){e=e||"",$(".formatBoolean",e).not(".formatted").each((function(e,t){var i=$(t),a=i.html();i.addClass("formatted");try{var n=bizagi.util.formatBoolean(a);i.html(n)}catch(e){i.html(a)}}))},bizagi.util.formatDecimal=function(e,t){var i=$("<i/>").text(e);return i.formatCurrency&&i.formatCurrency(t),i.text()},bizagi.util.formatMonetaryCells=function(e,t){t=t||{symbol:"€",decimalSeparator:",",groupSeparator:".",decimalDigits:"2"};for(var i=0;i<e.columnTitle.length;i++)if("MONEY"==e.columnTitle[i].type.toUpperCase())for(var a=0;a<e.rows.length;a++)e.rows[a].fields[i]=bizagi.util.formatMoney(e.rows[a].fields[i],t);return e},bizagi.util.formatMoney=function(e,t){var i="",a="",n="",r="",o="",l=e<0;if(null==e&&(e=""),(e=e.toString()).length>=1){var s=e.indexOf(".");if(s>0)n=(e=bizagi.util.fixDecimalDigits(e,t.decimalDigits)).substring(0,s).replace(/\D/g,"");else{for(var u=0;u<t.decimalDigits;u++)o+="0";n=e.replace(/\D/g,"")}if(e=e.replace(/\D/g,""),r=t.decimalDigits>0?s>0?t.decimalSeparator+e.substring(e.length-t.decimalDigits,e.length):t.decimalSeparator+o:"",n.length>3){var c=0;for(u=n.length-1;u>=0;u--)3==c&&(a+=".",c=0),a+=n[u],c+=1;for(u=a.length-1;u>=0;u--)i+=a[u]}else i=n;if(i=i.replaceAll(".",t.groupSeparator),l)i=bizagi.localization.getResource("numericFormat").negativeFormat.replace("%s",t.symbol).replace("%n",i+r);else i=t.symbol+i+r;return i}return e},bizagi.util.getOnlyNumbersByString=function(e){return e.replace(/\D/g,"")},bizagi.util.fixDecimalDigits=function(e,t){var i,a;if(i=e.indexOf("."),e.substring(0,i),t>(a=e.substring(i+1,e.length)).length)for(var n=a.length;n<t;n++)e+="0";else e=parseFloat(e).toFixed(t);return e},bizagi.util.numberToFixedString=function(e){var t;e&&(Math.abs(e)<1?(t=parseInt(e.toString().split("e-")[1]))&&(e>=0?(e*=Math.pow(10,t-1),e="0."+new Array(t).join("0")+e.toString().substring(2)):(e=Math.abs(e)*Math.pow(10,t-1),e="-"+(e="0."+new Array(t).join("0")+e.toString().substring(2)))):(t=parseInt(e.toString().split("+")[1]))>20&&(t-=20,e/=Math.pow(10,t),e+=new Array(t+1).join("0")));return e},bizagi.util.formatInvariantMoney=function(e,t){e=e||"";var i={symbol:t.symbol,decimalSeparator:t.decimalSeparator||",",groupSeparator:t.groupSeparator||".",decimalDigits:t.decimalDigits||"2"};!1===t.allowDecimals&&(i.decimalDigits="0"),$(".formatMoney",e).not(".formated").each((function(e,t){var a=$(t).html();$(t).addClass("formated");try{var n=parseFloat(a);if(!isNaN(n)){var r=bizagi.util.formatMoney(n,i);$(t).html(r)}}catch(e){$(t).html(a)}}))},bizagi.util.formatInvariantNumber=function(e,t){e=e||"";var i="2";i="0"==t.decimalDigits?"0":t.decimalDigits||"2";var a=bizagi.util.isString(t.groupSeparator)&&t.groupSeparator?t.groupSeparator:".",n={symbol:"",decimalSeparator:t.decimalSeparator||",",groupSeparator:t.groupSeparator||t.thousands?a:"",decimalDigits:i};$(".formatMoney",e).not(".formated").each((function(e,i){var a=$(i).html();$(i).addClass("formated");try{var r=a.match(/[a-zA-Z]/),o=null!=r&&r.length>0?NaN:parseFloat(a);if(!isNaN(o)){var l=bizagi.util.formatMoney(o,n);t.percentage&&(l=l.toString()+"%"),$(i).html(l)}}catch(e){$(i).html(a)}}))},bizagi.util.formatInvariantDate=function(e,t){e=e||"",t=t||"MM/dd/yyyy hh:mm:ss",$(".formatDate",e).not(".formated").each((function(e,i){var a=$(i).html();$(i).addClass("formated");try{var n=new Date(a),r=t;bizagi.util.isValidDate(n)&&(r=bizagi.util.getFormatDate(n,r));var o=bizagi.util.dateFormatter.formatDate(n,r);$(i).html(o)}catch(e){$(i).html(a)}}))},bizagi.util.formatDateFromInvariantStringDate=function(e){if(bizagi.util.isValidDate(e)){var t=bizagi.localization.getResource("dateFormat")+" "+bizagi.localization.getResource("timeFormat"),i=new Date(e);return t=bizagi.util.getFormatDate(i,t),bizagi.util.dateFormatter.formatDate(i,t)}return e||""},bizagi.util.getFormatDate=function(e,t){var i=t,a=e.getHours(),n=e.getMinutes(),r=e.getSeconds(),o=e.getMilliseconds(),l=bizagi.override.hideTimeWhenHourMinutesSecondsAreZero;return 0===a&&0===n&&0===r&&0===o&&l&&(i=bizagi.localization.getResource("dateFormat")),i},bizagi.util.formatValueByDataType=function(e,t){var i=e;switch(t){case"NText":case 23:case"Char":case 14:case"VarChar":case 15:case"Text":case 16:e&&e.length>30&&(i=bizagi.util.replaceLineBreak(e));break;case"Boolean":case 5:case"Binary":case 17:i=bizagi.util.formatBoolean(e);break;case"Int":case 2:case"BigInt":case 1:case"SmallInt":case 3:case"TinyInt":case 4:case"Numeric":case 7:i=null==e?"":e;break;case"Money":case 8:i=bizagi.util.formatMonetaryCell(e);break;case"Float":case 10:case"Real":case 11:case"Decimal":case 6:i=bizagi.util.formatDecimalCell(e);break;case"DateTime":case 12:case"SmallDateTime":case 13:i=bizagi.util.formatDateFromInvariantStringDate(e)}return null==i&&(i=""),i},bizagi.util.isValidDate=function(e){if(void 0!==e&&null!=e){var t=new Date(e);return!isNaN(t.valueOf())}return!1},bizagi.util.monthNames=new Array("January","February","March","April","May","June","July","August","September","October","November","December","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"),bizagi.util.dayNames=new Array("Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sun","Mon","Tue","Wed","Thu","Fri","Sat"),bizagi.util.dateFormatter=new function(){this.LZ=function(e){return(e<0||e>9?"":"0")+e},this.isDate=function(e,t){return 0!=this.getDateFromFormat(e,t)},this.getRelativeTime=function(e,t,i,a){var n=a?new Date(bizagi.moment().tz(bizagi.currentUser.timeZoneName).format()):new Date,r=e instanceof Date?e:kendo.parseDate(e,t),o=n.getTime()-r.getTime(),l=s(o,"year",31536e6,i);return l||(l=s(o,"month",2628e6,i))||(l=s(o,"week",6048e5,i))||(l=s(o,"day",864e5,i))||(l=s(o,"hour",36e5,i))||(l=s(o,"minute",6e4,i))||(i?l=s(0===o?o+1:o,"minute",1,i):(l=s(o,"second",2e3,i))||(l=bizagi.localization.getResource("workportal-relativetime-momentago"))),l;function s(e,t,i,a){var n=(e/i).toFixed(0);if(n>0){if(a)return 1==n?bizagi.localization.getResource("workportal-relativetime-"+t).replace("%s",n):bizagi.localization.getResource("workportal-relativetime-"+t+"s").replace("%s",n);var r=bizagi.localization.getResource("workportal-relativetime-ago");return 1==n?r.replace("%s",bizagi.localization.getResource("workportal-relativetime-"+t).replace("%s",n)):r.replace("%s",bizagi.localization.getResource("workportal-relativetime-"+t+"s").replace("%s",n))}return null}},this.compareDates=function(e,t,i,a){var n=getDateFromFormat(e,t),r=getDateFromFormat(i,a);return 0==n||0==r?-1:n>r?1:0},this.getDifferenceBetweenDates=function(e,t,i){if(!(e instanceof Date&&e instanceof Date))return"one param not is Date";switch(i){case"seconds":return(t.getTime()-e.getTime())/1e3;case"milliseconds":return t.getTime()-e.getTime();default:return"unit is not Defined"}},this.formatDate=function(e,t,i){if(!bizagi.util.isValidDate(e)||0==e)return"";var a=bizagi.util.monthNames,n=bizagi.util.dayNames;t+="";var r,o,l="",s=0,u=e.getFullYear()+"",c=e.getMonth()+1,d=e.getDate(),g=e.getDay(),p=e.getHours(),b=e.getMinutes(),f=e.getSeconds(),h=e.getMilliseconds(),m=new Object;if(bizagi.util.isValidResource("datePickerRegional")&&(i=bizagi.localization.getResource("datePickerRegional")),i){var v=i.monthNames.concat(i.monthNamesShort),y=i.dayNames.concat(i.dayNamesShort);a=a.toString()===v.toString()?a:v,n=n.toString()===y.toString()?n:y}for((u.length<4||"-"===u.charAt(0)&&u.length<5)&&(u=""+(u-0+1900)),m.y=""+u,m.yyyy=u,m.yy=u.substring(2,4),m.M=c,m.MM=this.LZ(c),m.MMM=a[c+11],m.MMMM=a[c-1],m.NNN=a[c+11],m.d=d,m.dd=this.LZ(d),m.ddd=n[g+7],m.dddd=n[g],m.E=n[g+7],m.EE=n[g],m.H=p,m.HH=this.LZ(p),m.tt=p<12?"am":"pm",m.TT=p<12?"AM":"PM",m.h=0==p?12:p>12?p-12:p,m.hh=this.LZ(m.h),m.K=p>11?p-12:p,m.k=p+1,m.KK=this.LZ(m.K),m.kk=this.LZ(m.k),m.a=p>11?"PM":"AM",m.m=b,m.mm=this.LZ(b),m.s=f,m.ss=this.LZ(f),m.FFF=h;s<t.length;){for(r=t.charAt(s),o="";t.charAt(s)==r&&s<t.length;)o+=t.charAt(s++);null!=m[o]?l+=m[o]:l+=o}return l},this.getDateFromFormat=function(e,t,i){var a=bizagi.util.monthNames,n=bizagi.util.dayNames;e+="",t+="";var r,o,l=0,s=0,u=0,c=0,d=new Date,g=d.getYear(),p=d.getMonth()+1,b=1,f=d.getHours(),h=d.getMinutes(),m=d.getSeconds(),v=(d.getMilliseconds(),"");if(bizagi.util.isValidResource("datePickerRegional")&&(i=bizagi.localization.getResource("datePickerRegional")),i){var y=i.monthNames.concat(i.monthNamesShort),z=i.dayNames.concat(i.dayNamesShort);a=a.toString()===y.toString()?a:y,n=n.toString()===z.toString()?n:z}for(;s<t.length;){for(r=t.charAt(s),o="";t.charAt(s)==r&&s<t.length;)o+=t.charAt(s++);if("yyyy"==o||"yy"==o||"y"==o){if("yyyy"==o&&(u=4,c=4),"yy"==o&&(u=2,c=2),"y"==o&&(u=2,c=4),null==(g=x(e,l,u,c)))return 0;l+=g.length,2==g.length&&(g=g>70?g-0+1900:g-0+2e3)}else if("MMMM"==o||"MMM"==o||"NNN"==o){p=0;for(var _=0;_<a.length;_++){var w=a[_];if(e.substring(l,l+w.length).toLowerCase()==w.toLowerCase()&&("MMMM"==o||"MMM"==o||"NNN"==o&&_>11)){(p=_+1)>12&&(p-=12),l+=w.length;break}}if(0==p){if(null==(p=x(e,l,1,2))||p<1||p>12)return 0;l+=p.length}if(p<1||p>12)return 0}else if("dddd"==o||"EE"==o||"E"==o)for(var S=0;S<n.length;S++){var E=n[S];if(e.substring(l,l+E.length).toLowerCase()==E.toLowerCase()){l+=E.length;break}}else if("MM"==o||"M"==o){if(null==(p=x(e,l,1,2))||p<1||p>12)return 0;l+=p.length}else if("dd"==o||"d"==o){if(null==(b=x(e,l,1,2))||b<1||b>31)return 0;l+=b.length}else if("hh"==o||"h"==o){if(null==(f=x(e,l,o.length,2))||f<1||f>12)return 0;l+=f.length}else if("HH"==o||"H"==o){if(null==(f=x(e,l,o.length,2))||f<0||f>23)return 0;l+=f.length}else if("KK"==o||"K"==o){if(null==(f=x(e,l,o.length,2))||f<0||f>11)return 0;l+=f.length}else if("kk"==o||"k"==o){if(null==(f=x(e,l,o.length,2))||f<1||f>24)return 0;l+=f.length,f--}else if("mm"==o||"m"==o){if(null==(h=x(e,l,o.length,2))||h<0||h>59)return 0;l+=h.length}else if("ss"==o||"s"==o){if(null==(m=x(e,l,o.length,2))||m<0||m>59)return 0;l+=m.length}else if("FFF"==o){if(ff=x(e,l,o.length,3),null==ff||ff<0||ff>999)return 0;l+=ff.length}else if("a"==o||"tt"==o){if("am"==e.substring(l,l+2).toLowerCase())v="AM";else{if("pm"!=e.substring(l,l+2).toLowerCase())return 0;v="PM"}l+=2}else{if(e.substring(l,l+o.length)!=o)return 0;l+=o.length}}if(2==p)if(g%4==0&&g%100!=0||g%400==0){if(b>29)return 0}else if(b>28)return 0;return(4==p||6==p||9==p||11==p)&&b>30?0:(f<12&&"PM"==v?f=f-0+12:f>11&&"AM"==v&&(f-=12),new Date(g,p-1,b,f,h,m));function I(e){for(var t=0;t<e.length;t++)if(-1=="1234567890".indexOf(e.charAt(t)))return!1;return!0}function x(e,t,i,a){for(var n=a;n>=i;n--){var r=e.substring(t,t+n);if(r.length<i)return null;if(I(r))return r}return null}},this.parseDate=function(e){for(var t,i=2==arguments.length&&arguments[1],a=new Array("y-M-d","MMM d, y","MMM d,y","y-MMM-d","d-MMM-y","MMM d"),n=new Array("M/d/y","M-d-y","M.d.y","MMM-d","M/d","M-d"),r=new Array("d/M/y","d-M-y","d.M.y","d-MMM","d/M","d-M"),o=new Array(a,i?r:n,i?n:r),l=0;l<o.length;l++)for(var s=window[o[l]],u=0;u<s.length;u++)if(0!=(t=getDateFromFormat(e,s[u])))return new Date(t);return null},this.analyzeTimeFormat=function(e){for(var t,i,a=0,n={show24Hours:!1,showSeconds:!1,separator:":"},r="";a<e.length;){for(t=e.charAt(a),i="";e.charAt(a)==t&&a<e.length;)i+=e.charAt(a++);"hh"==i||"h"==i?(r=i,n.show24Hours=!1):"HH"==i||"H"==i?(r=i,n.show24Hours=!0):"mm"==i||"m"==i?r=i:"ss"==i||"s"==i?(r=i,n.showSeconds=!0):"a"==i?r=i:"H"!=r.toUpperCase()&&"HH"!=r.toUpperCase()||(n.separator=i)}return n},this.getDateFromInvariant=function(e,t){e="string"!=typeof(e=null==e?"":e)?e.toString():e;var i="MM/dd/yyyy"+(t?" H:mm:ss":"");t&&e&&(e.toLowerCase().indexOf("am")>0||e.toLowerCase().indexOf("pm")>0)&&(i="MM/dd/yyyy h:mm:ss a");var a=bizagi.util.dateFormatter.getDateFromFormat(e,i);return 0!=a||t?0==a&&t&&null!=e&&""!=e&&(i="MM/dd/yyyy",(a=bizagi.util.dateFormatter.getDateFromFormat(e,i)).setHours(0,0,0,0)):(i="MM/dd/yyyy H:mm:ss",a=bizagi.util.dateFormatter.getDateFromFormat(e,i)),a},this.formatInvariant=function(e,t){var i="MM/dd/yyyy"+(t?" HH:mm:ss":"");return bizagi.util.dateFormatter.formatDate(e,i)},this.getDateFromISO=function(e,t){var i="yyyy-MM-dd"+(t?" HH:mm":""),a=bizagi.util.dateFormatter.getDateFromFormat(e,i);return 0==a&&t&&(i="yyyy-MM-dd"+(t?" HH:mm:ss":""),a=bizagi.util.dateFormatter.getDateFromFormat(e,i)),0!=a||t||(i="yyyy-MM-dd HH:mm",0==(a=bizagi.util.dateFormatter.getDateFromFormat(e,i))&&(i="yyyy-MM-dd HH:mm:ss",a=bizagi.util.dateFormatter.getDateFromFormat(e,i))),a},this.formatISO=function(e,t){var i="yyyy-MM-dd"+(t?" HH:mm":"");return bizagi.util.dateFormatter.formatDate(e,i)},this.formatISO8601=function(e,t){return(t=t||!1)&&e.setHours(0,0,0,0),bizagi.util.dateFormatter.formatDate(e,"yyyy-MM-ddTHH:mm:ss")},this.isFormatISO8601=function(e){return/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(\.\d+)?(([+-]\d\d:\d\d)|Z)?$/i.test(e)},this.sleep=function(e){for(var t=(new Date).getTime();(new Date).getTime()<t+e;);},this.getDateFormatByDatePickerJqueryUI=function(){return bizagi.localization.getResource("dateFormat").replace("yyyy","yy")}},bizagi.util.sleepUntil=function(e,t){t=t||200;var i=new $.Deferred;return function a(){var n=setTimeout((function(){if("pending"===i.state()){if(!!e())return i.resolve(),void clearTimeout(n);a(name)}}),t)}(),i.promise()},bizagi.util.sleepFor=function(e){e=e||200;var t,i=new $.Deferred;return t=setTimeout((function(){"pending"===i.state()&&(i.resolve(),clearTimeout(t))}),e),i.promise()},bizagi.util.browserSupportLocalStorage=function(){try{return"localStorage"in window&&null!==window.localStorage}catch(e){return!1}},bizagi.util.setItemLocalStorage=function(e,t){return!!bizagi.util.browserSupportLocalStorage()&&(localStorage.setItem(e,t),!0)},bizagi.util.getItemLocalStorage=function(e){return localStorage.getItem(e)},bizagi.util.removeItemLocalStorage=function(e){localStorage.removeItem(e)},bizagi.util.clearLocalStorage=function(){bizagi.util.browserSupportLocalStorage()&&localStorage.clear()},"debug"==("undefined"!=typeof BIZAGI_ENVIRONMENT?BIZAGI_ENVIRONMENT:"release")?"object"!=_typeof(window.console)&&(window.console={log:function(e){}}):"object"!=("undefined"==typeof console?"undefined":_typeof(console))?window.console={log:function(e){}}:bizagiConfig&&!bizagiConfig.showConsoleLog&&(console.log=function(e){}),bizagi.util.startLoading=function(e){(e||$("body")).append('<div class="ui-widget-overlay ui-front" style="z-index: 1001;"><div class="ui-bizagi-loading-message-center" style="position: absolute; top: 48%; left: 48%; display: ;"><div class="ui-bizagi-loading-icon"></div></div></div>')},bizagi.util.stopLoading=function(e){var t=e||$("body");$(".ui-widget-overlay:first",t).remove()},bizagi.util.smartphone.startLoading=function(e){(e||$("body")).append('<div class="bz-util-loading-container"> <div class="ui-bizagi-loading-icon bz-util-loading"></div>  </div>')},bizagi.util.smartphone.stopLoading=function(e){var t=e||$("body");$(".bz-util-loading-container",t).remove()},bizagi.util.isEventSupported=function(e,t){var i,a=!("onblur"in document.documentElement);return!!e&&(t&&"string"!=typeof t||(t=document.createElement(t||"div")),!(i=(e="on"+e)in t)&&a&&(t.setAttribute||(t=document.createElement("div")),t.setAttribute&&t.removeAttribute&&(t.setAttribute(e,""),i="function"==typeof t[e],void 0!==t[e]&&(t[e]=void 0),t.removeAttribute(e))),i)},bizagi.circularDependencies=function(){var e=(new Function).prototype;e.list=[],e.lastNodeAdded,e.addNode=function(t,i){var r=JSON.encode(i),o=a(t,r);if(!o){var l=new n(t,r);return e.list.push({name:t,obj:r,nodeObj:l,timeStamp:(new Date).getTime()}),l}(e.lastNodeAdded||e.list[e.list.length-1]).nodeObj.addChild(o.nodeObj),e.lastNodeAdded=o},e.resolve=function(t,a,n){return t=t||i()||e.list[0].nodeObj,new r(t,a,n)};var t=function(){e.list=[]},i=function(){for(var t=0;t<e.list.length;t++)if(e.list[t].nodeObj.childs.length>0)return e.list[t].nodeObj;return e.list.length>0?e.list[0].nodeObj:{}},a=function(t,i){for(var a=0;a<e.list.length;a++)if(e.list[a].name==t){var n=(new Date).getTime();if(e.list[a].timeStamp+1e3<n)e.list.splice(a,1);else if(e.list[a].obj==i)return e.list[a]}return!1},n=function(e,t){e=e||"",t=t||{};var i=function(e,t){this.name=e,this.obj=t,this.childs=[]};return i.prototype.addChild=function(e){this.childs.push(e)},i}(),r=function(e,i,a){var n=function e(i,a,n){this.node=i||{},this.node.childs=this.node.childs||[],this.resolved=a||[],this.seen=n||[],this.seen.push(this.node);for(var o=0;o<this.node.childs.length;o++)if(!r.hasObject(this.node.childs[o],this.resolved)){if(r.hasObject(this.node.childs[o],this.seen)){t();var l={dependencyFrom:this.node.name,dependencyFromObj:this.node.obj,dependencyTo:this.node.childs[o].name,dependencyToObj:this.node.childs[o].obj,path:this.seen};return{error:$.extend({standardError:{status:"error",responseText:JSON.encode({message:r.makeErrorMessage(l),type:"alert"})},multiactionError:{message:r.makeErrorMessage(l),type:"alert"}},l)}}return e(this.node.childs[o],this.resolved,this.seen)}this.resolved&&this.resolved.push(this.node)},r=n.prototype;return r.hasObject=function(e,t){for(var i=0;i<t.length;i++)if(t[i].name==e.name)return!0;return!1},r.makeErrorMessage=function(e){return printf(bizagi.localization.getResource("render-actions-loop-validation"),e.dependencyFrom,e.dependencyTo)},n}();return e},bizagi.util.cssExtended=function(e,t){var a=t.split(";");for(i=0;i<a.length;i++)""!=a[i]&&bizagi.util.cssExtendedApplyChanges(e,a[i])},bizagi.util.cssExtendedApplyChanges=function(e,t){for(var i=0;i<e.length;i++){var a=$(e[i]),n=t.split(":")[0];if(a.attr("style")){var r=a.attr("style").split(";"),o=[],l="";for(j=0;j<r.length;j++){var s=r[j].split(":");$.trim(s[0])!=n&&""!=$.trim(s[0])&&o.push(s[0]+":"+s[1]+";"),l=JSON.stringify(o).replace(/\","/g," ").replace(/\["/g," ").replace(/\"]/g," ")}l="[]"==l?"":l,a.attr("style",l+t+";")}else if(a.css(n)){r=a.css(n),l="";(o=[]).push(t+";"),l="[]"==l?"":l,a.attr("style",l+t+";")}}},bizagi.util.scrollTop=function(e){if(e&&e[0])for(;"HTML"!==e[0].tagName&&"scroll"!=e.css("overflow-y")&&"auto"!=e.css("overflow-y")&&e.parent().length>0;)e=e.parent();return e},bizagi.util.sortJSON=function(e,t,i){return e.sort((function(e,a){var n=e[t],r=a[t];return"asc"===i?n<r?-1:n>r?1:0:"desc"===i?n>r?-1:n<r?1:0:void 0}))},bizagi.util.shortNumber=function(e){var t=e.toString(),i=t.length;return i>=4&&i<7?t="+"+t.charAt(0)+"K":i>=7&&i<10?t="+"+t.charAt(0)+"M":i>=10&&(t="+"+t.charAt(0)+"B"),"&nbsp;&nbsp;&nbsp;"+t},bizagi.util.replaceLineBreak=function(e){return"string"==typeof e?e.replace(/\r\n|\r|\n|<br>|<br\/>/g,"<br/>"):e},bizagi.util.escapeHtml=function(e){var t=document.createElement("div");return t.appendChild(document.createTextNode(e)),t.innerHTML},bizagi.util.formatMonetaryCell=function(e){return bizagi.util.formatMonetaryValue(e)},bizagi.util.formatDecimalCell=function(e){return bizagi.util.formatDecimalValue(e)},bizagi.util.formatDateValue=function(e){return bizagi.util.formatDateFromInvariantStringDate(e)},bizagi.util.formatMonetaryValue=function(e){return bizagi.util.formatMoney(e,BIZAGI_DEFAULT_CURRENCY_INFO)},bizagi.util.formatDecimalValue=function(e){var t,i={decimalSymbol:BIZAGI_DEFAULT_CURRENCY_INFO.decimalSeparator,digitGroupSymbol:BIZAGI_DEFAULT_CURRENCY_INFO.groupSeparator,roundToDecimalPlace:BIZAGI_DEFAULT_CURRENCY_INFO.decimalDigits};t=$.extend({colorize:!1,decimalSymbol:".",digitGroupSymbol:",",groupDigits:!0,negativeFormat:"(%s%n)",positiveFormat:"%s%n",roundToDecimalPlace:"2",symbol:""},i);var a=bizagi.util.formatDecimal(e,t);if(!0===bizagi.override.removeTrailingZeros){var n=!0;-1!=a.toString().indexOf(")")&&(n=!1,a=a.replace("(","").replace(")",""));var r=new RegExp("("+BIZAGI_DEFAULT_CURRENCY_INFO.decimalSeparator+"\\d*?[1-9])0+$","g");a=a.replace(r,"$1"),r=new RegExp("\\"+BIZAGI_DEFAULT_CURRENCY_INFO.decimalSeparator+"0+$","g"),a=a.replace(r,""),n||(a="("+a+")")}return a},bizagi.util.showNotification=function(e){e=e||{};var t=$('<div id="sync-notification" class="bz-cm-icon"></div>').text(e.text||"");t.appendTo($("body")),t.fadeIn(1500,(function(){t.stop()})),t.fadeOut(2e3,(function(){t.remove()}))},bizagi.util.isModeOnline=function(){return void 0!==bizagi.context.isOfflineForm&&!bizagi.context.isOfflineForm},bizagi.util.dispose=function(e){for(key in e)"object"==_typeof(e[key])&&delete e[key],"function"==typeof e[key]&&(e[key]=null,delete e[key])},bizagi.util.arrayEach=function(e,t){var i;if(e)if("[object Array]"===Object.prototype.toString.apply(e)&&"[object Function]"===Object.prototype.toString.apply(t)){for(i in e)if(e.hasOwnProperty(i)&&!1===t.call(e[i],i,e[i]))return}else $.each(e,t)},bizagi.util.getStandardNotation=function(e,t){t=t||".";var i="",a=!1,n=!1;e=(e.length>0?e.toString().toLowerCase():"").replace(/ /g,"");for(var r=0;r<e.length;r++)("+"!==e[r]&&"-"!==e[r]||0!==r&&"e"!=e[r-1])&&isNaN(Number(e[r]))?e[r]!==t||a?"e"!==e[r]||n||(i+=e[r],n=!0):(i+=e[r],a=!0):i+=e[r];return i},bizagi.util.scientificNotationFormat=function(e,t,i,a,n){t=t||".",e=bizagi.util.getStandardNotation(e,t),i=i>0?i:38,a=a>0?a:-125,n=n>0?n:125;var r=new RegExp("[0-9]+("+t+"[0-9]+)?(e[+-]?[0-9]+)?"),o=e.match(r),l=0,s="-"===e[0]?e[0]:"",u=0;if(e=e.replace(s,""),o&&o[0]&&o[2]){var c=o[0]?o[0].replace(o[2],"").split(t):"",d="",g="";return c[0]=c[0].replace(/^0+/g,""),c[0].length>1?(u=(d=c[0].slice(1)).length,g=c[0][0]||"",d=d.concat(o[1]||"")):1===c[0].length?(g=c[0][0]||"",d=d.concat(c[1]||"")):(u=c[1].length,c[1]=c[1].replace(/^0+/g,""),u=c[1].length-1-u,g=c[1][0],d=c[1].slice(1)),(d=d.replace(t,"").replace(/0+$/g,"")).length>=i&&(d=d.slice(0,i-1)),s+g+(d?t+d:"")+"e"+((l=(l=Number(o[2].replace("e",""))+u)>n?n:l<a?a:l)>0?"+"+l:l)}if(e){u=e.indexOf(t);var p=0,b=e.length-1;e=e.replace(t,"");for(var f=p;!h;)"0"!==e[f]&&e[f]!==t?(h=!0,p=f):f++;for(var h=!1,m=b;!h;)"0"!==e[m]&&e[m]!==t?(h=!0,b=m+1):m--;if(b=b>i+p?i+p:b,-1!==u){h=!1;return l=u-(p+1),(d=e.slice(p,b)).length>0&&!isNaN(Number(d[0]))?s+d[0]+(d.length>1?t+d.slice(1):"")+"e"+(l>0?"+"+l:l):"0"}var v=e.slice(p,p+1),y=e.slice(p+1,e.length);return l=y.length,(y=y.replace(/0+$/g,"")).length>i&&(y=e.slice(p+1,i+p)),Number(v)?s+v+(y.length>0?t+y:"")+"e"+(l>0?"+"+l:l):"0"}return""},bizagi.util.stripslashes=function(e){return e.replace(/\\'/g,"'").replace(/\"/g,'"').replace(/\\\\/g,"\\").replace(/\\0/g,"\0")},bizagi.util.isHTMLValidText=function(e){return new RegExp(/<(.|\n)*?>/g).test(e)},bizagi.util.resetData=function(){var e=JSON.parse(sessionStorage.getItem("bizagiAuthentication"));sessionStorage.removeItem("bizagiAuthentication"),$.extend(e,{isAuthenticate:"false"}),sessionStorage.setItem("bizagiAuthentication",JSON.encode(e))},bizagi.util.changeData=function(e){var t=JSON.parse(sessionStorage.getItem("bizagiAuthentication"));sessionStorage.removeItem("bizagiAuthentication"),$.extend(t,e),sessionStorage.setItem("bizagiAuthentication",JSON.encode(t))},bizagi.util.isMobileDevice=function(e){return e=e||bizagi.detectDevice(),["smartphone_ios","smartphone_ios_native","smartphone_android","smartphone_android_native","tablet","tablet_ios","tablet_ios_native","tablet_android","tablet_android_native"].indexOf(e)>-1},bizagi.util.isNativeMobileDevice=function(e){return bizagi.util.isMobileDevice(e)&&bizagi.util.isNativePluginSupported()},bizagi.util.isTabletDevice=function(e){return e=e||bizagi.util.detectDevice(),["tablet","tablet_ios","tablet_ios_native","tablet_android","tablet_android_native"].indexOf(e)>-1},bizagi.util.isAndroidTabletDevice=function(e){return e=e||bizagi.util.detectDevice(),bizagi.util.isTabletDevice()&&-1!==e.indexOf("android")},bizagi.util.isiOSTabletDevice=function(e){return e=e||bizagi.util.detectDevice(),bizagi.util.isTabletDevice()&&!(-1===e.indexOf("android"))},bizagi.util.isSmartphoneDevice=function(e){return e=e||bizagi.util.detectDevice(),["smartphone_ios","smartphone_ios_native","smartphone_android","smartphone_android_native"].indexOf(e)>-1},bizagi.util.isAndroidSmartphoneDevice=function(e){return e=e||bizagi.util.detectDevice(),bizagi.util.isSmartphoneDevice()&&-1!==e.indexOf("android")},bizagi.util.isiOSSmartphoneDevice=function(e){return e=e||bizagi.util.detectDevice(),bizagi.util.isSmartphoneDevice()&&-1!==e.indexOf("ios")},bizagi.util.isOfflineForm=function(e){if(!bizagi.util.isMobileDevice()||void 0===e)return!1;var t=e.context||null,i=e.container||null,a=null!==i?i:null!==t?t.getFormContainer():null;if(null===a)return!1;var n=a.getParams()||{};return void 0!==n.isOfflineForm&&bizagi.util.parseBoolean(n.isOfflineForm)},bizagi.util.detectAndroidVersion=function(){var e=navigator.userAgent.toLowerCase().indexOf("android"),t=navigator.userAgent.toLowerCase().substring(e+8,e+13);return t=t.replaceAll(".",""),Number(t)},bizagi.util.getPathUrl=function(e){var t="",i=location.pathname.split("/"),a=location.protocol+"//"+location.host;if("/"==BIZAGI_PATH_TO_BASE[0])t=a+BIZAGI_PATH_TO_BASE+e;else{for(var n=BIZAGI_PATH_TO_BASE.split("../").length,r=0,o=i.length;r<o-n;r++)a+=i[r]+"/";t=(a="/"===a[a.length-1]?a:a+"/")+e}return t},bizagi.util.getAndroidVersion=function(){var e=navigator.userAgent.toLowerCase().match(/android\s([0-9\.]*)/);return!!e&&parseFloat(e[1])},bizagi.util.mobileImagePath=function(e){var t=e,i=bizagi.util.getAndroidVersion();if(!i)return t;if("content://com.android"===t.substring(0,21)&&i<=4.4){var a=t.split("%3A");a.length>1?t="content://media/external/images/media/"+a[1]:(a=t.split("/"),t="content://media/external/images/media/"+a[a.length-1])}return t},bizagi.util.isValidResource=function(e){return!!bizagi.localization&&bizagi.localization.getResource(e)!==e},bizagi.util.b64toBlob=function(e,t,i){t=t||"",i=i||512;for(var a=atob(e),n=[],r=0;r<a.length;r+=i){for(var o=a.slice(r,r+i),l=new Array(o.length),s=0;s<o.length;s++)l[s]=o.charCodeAt(s);var u=new Uint8Array(l);n.push(u)}return new Blob(n,{type:t})},bizagi.util.stringToByteArray=function(e){for(var t=new Uint8Array(e.length),i=0;i<e.length;i++)t[i]=255&e.charCodeAt(i);return t},bizagi.util.hasOfflineFormsEnabled=function(){return"undefined"!=typeof BIZAGI_ENABLE_OFFLINE_FORMS&&!0===bizagi.util.parseBoolean(BIZAGI_ENABLE_OFFLINE_FORMS)},bizagi.util.isFlatDesignEnabled=function(){return"undefined"!=typeof BIZAGI_ENABLE_FLAT&&!0===bizagi.util.parseBoolean(BIZAGI_ENABLE_FLAT)},bizagi.util.isMobileGridEnabled=function(){return"undefined"!=typeof BIZAGI_ENABLE_MOBILE_GRID&&!0===bizagi.util.parseBoolean(BIZAGI_ENABLE_MOBILE_GRID)},bizagi.util.isNativeHeaderEnabled=function(){return"undefined"!=typeof NATIVE_HEADER_ENABLE&&!0===bizagi.util.parseBoolean(NATIVE_HEADER_ENABLE)},bizagi.util.isQuickSearchEnabled=function(){return"undefined"!=typeof BIZAGI_ENABLE_QUICK_SEARCH&&!0===bizagi.util.parseBoolean(BIZAGI_ENABLE_QUICK_SEARCH)},bizagi.util.isOAuth2Enabled=function(){return"undefined"!=typeof BIZAGI_AUTH_TYPE&&"OAuth"===BIZAGI_AUTH_TYPE},bizagi.util.getNativeComponent=function(){return"undefined"!=typeof BIZAGI_NATIVE_COMPONENT?BIZAGI_NATIVE_COMPONENT:""},bizagi.util.isVersionSupported=function(){var e=!0;if("undefined"!=typeof BIZAGI_SERVER_VERSION&&!bizagi.util.isEmpty(BIZAGI_SERVER_VERSION)){var t=BIZAGI_SERVER_VERSION.match(/\d+\.\d+/);e=!t||parseFloat(t.shift())>=11}return e},bizagi.util.isCordovaSupported=function(){return"undefined"!=typeof cordova},bizagi.util.isNativePluginSupported=function(){return"undefined"!=typeof bizagiapp},bizagi.util.isTabletNativeSupported=function(){return"undefined"!=typeof bizagiapp&&bizagi.util.isTabletDevice()},bizagi.util.isSmartphoneNativeSupported=function(){return"undefined"!=typeof bizagiapp&&bizagi.util.isSmartphoneDevice()},bizagi.util.isNativePluginSupported()&&window.cordova&&window.cordova.plugins.Keyboard&&cordova.plugins.Keyboard.hideKeyboardAccessoryBar(!1),bizagi.util.detectRealDevice=function(){var e="undefined"==typeof BIZAGI_DEFAULT_DEVICE||bizagi.util.isEmpty(BIZAGI_DEFAULT_DEVICE)?null:BIZAGI_DEFAULT_DEVICE;BIZAGI_DEFAULT_DEVICE="";var t=bizagi.detectDevice();return BIZAGI_DEFAULT_DEVICE=e,t},bizagi.util.isAndroid=function(){return navigator.userAgent.toLowerCase().indexOf("android")>-1},bizagi.util.isAndroidDevice=function(){return bizagi.util.detectDevice().indexOf("android")>-1},bizagi.util.isiOSDevice=function(){return-1===bizagi.util.detectDevice().indexOf("android")},bizagi.util.getChannelType=function(){return"undefined"==typeof BIZAGI_SERVER_CHANNEL||bizagi.util.isEmpty(BIZAGI_SERVER_CHANNEL)?bizagi.loader.channel||"":BIZAGI_SERVER_CHANNEL},bizagi.util.isDataUrl=function(e){try{return!!e.toString().match(/^\s*data:([a-z]+\/[a-z0-9-+.]+(;[a-z-]+=[a-z0-9-]+)?)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s]*)\s*$/i)}catch(e){}return!1},bizagi.util.getDataUrl=function(e){var t;try{if(void 0===e.value||bizagi.util.isEmpty(e.value))t=e.url||"";else{var i=e.value,a=i.value||i;if(Array.isArray(a)){var n=a.shift();t=Array.isArray(n)?n.join(""):n}else t=a}(t=bizagi.util.isEmpty(t)?"":"data:image/png;base64,"+t.replace(/^data:.*;base64,/,""))&&-1!==t.indexOf("Invalid case id")&&(t="")}catch(e){t=""}return t},bizagi.util.processFailMessage=function(e){var t=e||{};try{t=(t="string"==typeof t?JSON.parse(t):t).responseText||t.message||t}catch(i){t=e}return t},bizagi.util.getErrorFormatted=function(e){var t=e;if(!t)return e;if("string"==typeof t)try{t=JSON.parse(t)}catch(i){t={type:"error",code:"code",message:e}}return"object"==_typeof(t)&&(t.message||t.statusText)?{type:t.type||"error",code:t.code||t.errorCode||t.errorType||t.statusText||"code",message:t.message}:(t&&t.length&&t.length>=1&&(t=t[0]),t.responseText&&(t=t.responseText),t.error&&(t=t.error),bizagi.util.getErrorFormatted(t))};var tmp_block_header="<div class='blockHeaderByLiveProcess'></div>";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}/*! Build Number: 2.3.1 */bizagi.util.disableWorkPortalMenu=function(){var e=$("body").find("#ui-bizagi-wp-menu").height();$(tmp_block_header).prependTo("body"),$("body").find(".blockHeaderByLiveProcess").css({position:"absolute",width:"100%",height:e+"px",background:"gray",opacity:"0.9","z-index":"101"})},bizagi.util.enableWorkPortalMenu=function(){$("body").find(".blockHeaderByLiveProcess").detach()},bizagi.util.enableMenuSection=function(e){(new bizagi.workportal.controllers.menu).setActiveSection.apply($("#main_menu li#"+e)[0])},bizagi.util.getURLWithASlashAtTheEnd=function(e){var t;return"/"===(t=e).substr(t.length-1)?e:e+"/"},bizagi.util.downloadFile=function(e,t,i){var a,n=new $.Deferred,r=void 0===i||i,o=(t?"":bizagi.util.getURLWithASlashAtTheEnd(bizagiConfig.applicationUrl))+e,l=0!==$("#iframe-download").length,s=function(){var e=$(this)[0],t=bizagi.localization.getResource("workportal-general-error-message-contact-administrator"),i=bizagi.util.tryCatch((function(){return $(e.contentDocument).text()}),t),a=-1!==i.indexOf("HTTP Error 503"),o=bizagi.util.tryCatch((function(){return JSON.parse(i)}),{code:"error",status:"error",message:""===i?t:i}),l=r&&!a;a&&bizagiConfig.maintenanceWindows.start(),function(e,t){t&&bizagi.modalError.show(e.message,void 0,!1),n.reject(e)}(o,l)};return l||((a=$("<iframe/>")).attr({style:"visibility:hidden;display:none",id:"iframe-download"}).appendTo("body"),a[0].onload=s),$("#iframe-download").attr("src",o),n},bizagi.util.downloadFileByPOST=function(e,t){0!==$("#iframe-download").length&&$("#iframe-download").remove(),$("<iframe/>").attr({style:"visibility:hidden;display:none",id:"iframe-download"}).appendTo("body");for(var i="",a=0;a<t.length;a++)i=i+"<input type='text' name='"+t[a].name+"' value='"+t[a].value+"'>";var n="<form id='formPOST' action='"+e+"' method='POST'>"+i+"</form>";$("#iframe-download").contents().find("body").append(n),bizagi.util.isIE11()?(bizagi.showErrorAlertDialog=!1,$.ajax({type:"POST",url:e,data:t,dataType:"text"}).then((function(){$("#formPOST",$("#iframe-download").contents()).submit()}))):$("#formPOST",$("#iframe-download").contents()).submit()},bizagi.util.executeActionRoutingFromWorkportal=function(e,t){bizagi.workportal.controllers.menu.prototype.publish("executeAction",{action:bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,idCase:e,idWorkItem:t})},bizagi.util.getMessageFromNetworkState=function(e){return e?bizagi.localization.getResource("render-without-globalform-offline-userOnline","The case has been created successfully, please wait until the server synchronizes"):bizagi.localization.getResource("render-without-globalform-offline","Your offline case has been created successfully. It will synchronized as soon as you go online.")},bizagi.util.sanitizeHTML=function(e){var t=null!=e?e.toString():e,i=DOMPurify.sanitize(t),a=document.createElement("div");return a.innerHTML=i,0===a.childNodes.length?"":String(a.childNodes[0].nodeValue)},bizagi.util.arrayUnique=function(e){for(var t=e.concat(),i=0,a=t.length;i<a;++i)for(var n=i+1;n<a;++n)t[i]===t[n]&&t.splice(n-=1,1);return t},bizagi.util.debounce=function(e,t,i){var a;return function(){var n=this,r=arguments,o=function(){if(a=null,!i)return e.apply(n,r)},l=i&&!a;if(clearTimeout(a),a=setTimeout(o,t||200),l)return e.apply(n,r)}},bizagi.util.debounce2=function(e,t,i){var a,n=this,r=function(){var n=this,r=arguments,o=function(){if(a=null,!i)return e.apply(n,r)},l=i&&!a;if(clearTimeout(a),a=setTimeout(o,t||200),l)return e.apply(n,r)};return{timeout:a,cancel:function(){clearTimeout(a)},fire:function(){r.call(n,arguments)}}},bizagi.util.isNativeImageEditorSupported=function(){return bizagi.util.isNativePluginSupported()&&bizagi.util.isiOSDevice()&&bizagi.override.enableImageEditor},bizagi.util.errorMessage=function(e){return'<div class="admin-stakeholder-message"> <i class="bz-wp-empty__img"></i> <p class="bz-wp-empty__info bz-wp-empty__info--first"> '+e+"</p></div>"},bizagi.util.validateUrlWellFormed=function(e){var t=/^((http|https|ftp):\/\/)/.test(e)?e:"http://"+e,i=document.createElement("a");i.setAttribute("href",t);var a=DOMPurify.sanitize(i,{IN_PLACE:!0}),n=e?e.replace(/ /g,""):"";return bizagi.util.isEmpty(n)?null:a.href},bizagi.util.encodeHtmlText=function(e){var t=e||"",i="";if("string"==typeof t){var a=bizagi.util.decodeURI(t);i=bizagi.util.encodeString(a)}return i},bizagi.util.encodeString=function(e){var t=e||"";return t=(t=(t=(t=(t=t.replaceAll("&","&amp;")).replaceAll("$","&#36;")).replaceAll("<","&lt;").replaceAll(">","&gt;")).replaceAll('"',"&#34;").replaceAll("'","&#39;").replaceAll("/","&#47;")).replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g,"$1<br />$2")},bizagi.util.setCaretPosition=function(e,t){if(t.setSelectionRange)t.focus(),t.setSelectionRange(e,e);else if(t.createTextRange){var i=t.createTextRange();i.collapse(!0),i.moveEnd("character",e),i.moveStart("character",e),i.select()}},bizagi.util.getCaretPosition=function(e){var t=0;if(document.selection){e.focus();var i=document.selection.createRange();i.moveStart("character",-e.value.length),t=i.text.length}else(e.selectionStart||"0"==e.selectionStart)&&(t=e.selectionStart);return t},bizagi.util.escapeRegex=function(e){return(e=e||"").replace(/([\^\$\(\)\[\]\{\}\*\.\+\?\|\\])/gi,"\\$1")},bizagi.util.getFeatureObject=function(e){var t=e.split(".");return this.featureObjectCache=this.featureObjectCache||{},e in this.featureObjectCache?this.featureObjectCache[e]:this.featureObjectCache[e]=function(t){var i=bizagi.util.getConfigFeatures();if("string"==typeof e&&void 0!==i){for(var a=i,n=0,r=t.length;n<r;n++)if(void 0===(a=a[t[n]]))return;return a}}(t)},bizagi.util.getConfigFeatures=function(){var e=window.bizagiConfig||bizagiConfig||{};return bizagi.util.isMobileDevice()&&"undefined"!=typeof BIZAGI_MOBILE_FEATURES&&!bizagi.util.isEmpty(BIZAGI_MOBILE_FEATURES)&&(e.features=JSON.parse(BIZAGI_MOBILE_FEATURES||"{}")),e.features},bizagi.util.resetConfigFeatures=function(){bizagi.util.featureObjectCache=void 0},bizagi.util.isFailResponse=function(e){return e&&(e.type&&"error"===e.type||e.status&&"error"===e.status||e.code&&"UNKNOWN_ERROR"===e.code)},bizagi.util.formatItem=function(e){if(null!=e){if($.isArray(e)){for(var t=0,i=e.length;t<i;t++)null!=e[t]&&"boolean"==typeof e[t]&&(!0===bizagi.util.parseBoolean(e[t])?e[t]=bizagi.localization.getResource("render-boolean-yes"):!1===bizagi.util.parseBoolean(e[t])&&(e[t]=bizagi.localization.getResource("render-boolean-no"))),e[t]=bizagi.util.sanitizeHTML(e[t]);return e.join(" - ")}return bizagi.util.sanitizeHTML(e)}return""},bizagi.util.performTermMatches=function(e,t,i){return"object"===_typeof(e)?bizagi.util.formatItem(e):"string"==typeof e?i?bizagi.util.sanitizeHTML(e):bizagi.util.highlightMatches(e,t):e},bizagi.util.highlightMatches=function(e,t){var i=bizagi.util.escapeRegex(t).replaceAll("%",""),a=new RegExp("(?![^&;]+;)(?!<[^<>]*)("+i+")(?![^<>]*>)(?![^&;]+;)","gi");return bizagi.util.sanitizeHTML(e).replace(a,"<strong>$1</strong>")},bizagi.util.getDesktopResolution=function(){var e="",t=1,i=window.screen.width,a=window.screen.height;return"deviceXDPI"in screen?t=screen.deviceXDPI/screen.logicalXDPI:"devicePixelRatio"in window&&(t=window.devicePixelRatio),t=Number(t.toFixed(3)),i&&i>0&&a&&a>0&&(e=i*t+"x"+a*t),e},bizagi.util.getDeviceCode=function(){return bizagi.util.isMobileDevice()?"undefined"==typeof BIZAGI_DEVICE_MARKET_NAME||bizagi.util.isEmpty(BIZAGI_DEVICE_MARKET_NAME)?"":BIZAGI_DEVICE_MARKET_NAME:bizagi.util.getDesktopResolution()},bizagi.util.normalizeType=function(e){return void 0===e?e:e.replace(/smartphone/,"").replace(/tablet/,"").replace(/offline/,"")},bizagi.util.normalizeQueryType=function(e){return void 0===e?e:e.replace(/query/,"").toLowerCase()},bizagi.util.hideOrShowXToCloseDialog=function(e,t){var i=".ui-dialog-titlebar-close";t?$(i,e).show():$(i,e).hide()},bizagi.util.isEnableFeature=function(e){return void 0===bizagi.features&&(bizagi.features=[]),!1!==bizagi.features[e]},bizagi.util.isHtml=function(e){return/<[a-z][\s\S]*>/i.test(e)},bizagi.util.tryCatch=function(e,t){try{return e()}catch(e){return"function"==typeof t?t():t}},bizagi.util.pipe=function(e,t){var i=void 0===t?[]:t;return i.push(e),{next:function(e){return bizagi.util.pipe(e,i)},end:function(e){return i.reduce((function(e,t){return t(e)}),e)}}},function(e){var t=function(e,t){return getComputedStyle(e,null).getPropertyValue(t)},i=function(e){return/(auto|scroll)/.test(function(e){return t(e,"overflow")+t(e,"overflow-y")+t(e,"overflow-x")}(e))};e.scrollerParent=function(e){if(e instanceof HTMLElement||e instanceof SVGElement){for(var t=function e(t,i){return null===t.parentNode?i:e(t.parentNode,i.concat([t]))}(e.parentNode,[]),a=0;a<t.length;a+=1)if(i(t[a]))return t[a];return document.scrollingElement||document.documentElement}}}(jQuery),bizagi.util.startkendo=function(e){void 0===bizagi.kendoMobileApplication?(bizagi.kendoMobileApplication=new kendo.mobile.Application($("body"),{skin:"flat",browserHistory:!1,init:function(t){kendo.ui.progress($(".km-flat"),!0),e.started&&e.started()}}),bizagi.kendoMobileApplication.bizagiNavigate=function(e,t){this.navigate(e,t)}):e.started&&e.started()},bizagi.util.isMashupContext=function(){return"undefined"!=typeof BIZAGI_MASHUP_CONTEXT&&!0===bizagi.util.parseBoolean(BIZAGI_MASHUP_CONTEXT)},bizagi.util.isSharepointContext=function(){return"undefined"!=typeof BIZAGI_SHAREPOINT_CONTEXT&&!0===bizagi.util.parseBoolean(BIZAGI_SHAREPOINT_CONTEXT)},bizagi.util.isWebpartContext=function(){return"undefined"!=typeof isWebpart&&!0===bizagi.util.parseBoolean(isWebpart)},bizagi.util.startTimeline=function(e){(new bizagi.workportal.widgets.widget).showTimeLine(e)},bizagi.util.startGraphicquery=function(e){(new bizagi.workportal.widgets.widget).showGraphicQuery(e)},bizagi.util.startSelectUser=function(){return function(e,t){var i=$.Deferred();(new bizagi.workportal.widgets.widget).showSelectUser(i),i.done((function(t,i,a){e({userId:t,userName:i,guid:a})})).fail((function(){e({})}))}},bizagi.util.isEmptyValue=function(e){if(0===e)return!1;if(null==e||""===e)return!0;if("Array"==typeof e)return 0===e.length;if("[object Array]"===Object.prototype.toString.apply(e))return 0===e.length;if("[object Object]"===Object.prototype.toString.apply(e)){for(var t in e)if(e.hasOwnProperty(t)&&!bizagi.util.isEmptyValue(e[t]))return!1;return!0}return!1},bizagi.util.initializeReferrerParams=function(){bizagi.referrerParams||(bizagi.referrerParams={})},bizagi.util.getLPQueriesParameters=function(){return bizagi.util.initializeReferrerParams(),bizagi.referrerParams.sidebarData},bizagi.util.getLPQueriesSelectedItemFromTree=function(){return bizagi.util.initializeReferrerParams(),bizagi.referrerParams.selectedTreeItem},bizagi.util.setLPQueriesParameters=function(e,t){bizagi.util.initializeReferrerParams(),bizagi.referrerParams.sidebarData=e,bizagi.referrerParams.selectedTreeItem=t},bizagi.util.cleanLPQueriesParameters=function(){bizagi.referrerParams&&(bizagi.referrerParams.sidebarData=null,bizagi.referrerParams.selectedTreeItem=null)},bizagi.util.setLPQueriesReferrer=function(){bizagi.referrerParams.referrer="LPQueries"},bizagi.util.isConnected=function(){return bizagi.util.isNativeMobileDevice()?!navigator||void 0===navigator.connection||"undefined"==typeof Connection||!(navigator.connection.type==Connection.NONE||"unknown"==navigator.connection.type):!bizagi.util.isMobileDevice()||"debug"!==(""+BIZAGI_ENVIRONMENT).toLowerCase()||(!window.navigator||window.navigator.onLine)},bizagi.util.isRenderingUrlAllowed=function(e){for(var t,i=["Rest/(Handlers|Userfields|DocumentTemplates|(Processes(?!/(RecentProcesses|OfflineProcessTree)))|Cases|Authentication|Users)","Api/(Authentication|Entities|Users)"],a=(e||"").replaceAll("../","").replaceAll("./","");t=i.shift();){var n=new RegExp(t,"i");if(null!==a.match(n))return!0}return!1},bizagi.util.applyEyeFunction=function(e){function t(t){$(t,e).parent().find("svg").remove(),$(t,e).after('<svg  class=\'eye_show_icon\'  xmlns="http://www.w3.org/2000/svg" width="16" height="16">\n<path d="M15 7.8C14.9 7.6 12.7 3 8 3S1.1 7.6 1 7.8v.4c.1.2 2.3 4.8 7 4.8s6.9-4.6 7-4.8v-.4zM8 12c-3.5 0-5.5-3.1-5.9-4 .4-.9 2.4-4 5.9-4 3.5 0 5.5 3.1 5.9 4-.4.9-2.4 4-5.9 4z"/>\n<path d="M8 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 3c-.6 0-1-.4-1-1s.4-1 1-1 1 .4 1 1-.4 1-1 1z"/></svg>'),$(t,e).parent().find("input[type='text']").attr("type","password"),$(t,e).parent().find("svg").click(a(!0))}function i(t){$(t,e).parent().find("svg").remove(),$(t,e).after('<svg class=\'eye_hide_icon\' xmlns="http://www.w3.org/2000/svg" width="16" height="16">\n<path d="M3.6 10.5l.7-.7a12.1 12.1 0 0 1-2-1.6C3.1 7.3 5.4 5 8 5h1l.8-.8A6 6 0 0 0 8 4C4.3 4 1.4 7.8 1.2 7.9l-.2.3.3.3a12.3 12.3 0 0 0 2.3 2zm8.7-4.9l-.7.7a12.4 12.4 0 0 1 2.1 1.9C12.9 9 10.6 11 8 11H7l-.8.8L8 12c3.7 0 6.6-3.3 6.7-3.5l.3-.3-.2-.3a12.8 12.8 0 0 0-2.5-2.3zM1.5 15h-.4a.5.5 0 0 1 0-.7l13-13a.5.5 0 1 1 .7.7l-13 13h-.3z"/><path d="M6.3 7.8a1.7 1.7 0 0 1 1.5-1.5l.9-.9H8A2.7 2.7 0 0 0 5.3 8a2.7 2.7 0 0 0 .1.7l.9-.9zm3.4.4a1.7 1.7 0 0 1-1.5 1.5l-.9.9H8A2.7 2.7 0 0 0 10.7 8a2.7 2.7 0 0 0-.1-.7l-.9.9z"/></svg>'),$(t,e).parent().find("input[type='password']").attr("type","text"),$(t,e).parent().find("svg").click(a(!0))}function a(a){return function(n){if(a){var r=$(this).attr("class")||"",o=$(this).parent().find("input");"eye_show_icon"===r?i(o):t(o)}else $($(n,e).parent().find("svg")[0]).click((function(e){var a=$(this).attr("class")||"",n=$(this).parent().find("input");"eye_show_icon"===a?i(n):t(n)}))}}$(e).find("input[type='password']").map((function(e,i){e>0&&(t(i),a(!1)(i))}))},bizagi.util.accessibilityEnter=function(e,t,i){if("function"!=typeof t)throw new Error('Error in "accessibilityEnter" function: You must provide a valid callback');-1!==(i=$.isArray(i)?i:[]).indexOf("click")||i.push("click"),e.bind("keypress",(function(e){e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation(),13!==e.which&&32!==e.which||t(e)})),e.bind(i.join(", "),(function(e){e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation(),t(e)}))},bizagi.util.recreateNativeButtons=function(e){var t=e.getFormContainer().getParams();if(bizagi.util.isNativePluginSupported()&&bizagi.util.isiOSSmartphoneDevice()){var i=t.navigation;void 0!==i&&i.setNavigationButtons(e)}},bizagi.util.isOverrideFeatureEnabled=function(e){var t=bizagi.override&&bizagi.override[e]||null;return!0===bizagi.util.parseBoolean(t)},bizagi.util.createDynamicClass=function(nameClass,renderParams){if(nameClass)try{var dynamicFunction="var dynamicFn = function(renderParams){ \r\n";return dynamicFunction+="return new "+nameClass+"(renderParams);\r\n",dynamicFunction+="}\r\n",dynamicFunction+="dynamicFn",dynamicFunction=eval(dynamicFunction),dynamicFunction(renderParams)}catch(e){console.log(e)}return null},bizagi.util.languages={es:"es","es-ES":"es","es-AR":"es","es-BO":"es","es-Cl":"es","es-CO":"es","es-CR":"es","es-DO":"es","es-EC":"es","es-SV":"es","es-GT":"es","es-HN":"es","es-MX":"es","es-NI":"es","es-PA":"es","es-PY":"es","es-PR":"es","es-PE":"es","es-US":"es","es-UY":"es","es-VE":"es",en:"en-US","en-AU":"en-US","en-BZ":"en-US","en-CA":"en-US","en-029":"en-US","en-IN":"en-US","en-IE":"en-US","en-JM":"en-US","en-MY":"en-US","en-NZ":"en-US","en-PH":"en-US","en-SG":"en-US","en-ZA":"en-US","en-TT":"en-US","en-GB":"en-US","en-US":"en-US","en-ZW":"en-US",de:"de","de-AT":"de","de-DE":"de","de-LI":"de","de-LU":"de","de-CH":"de",fr:"fr","fr-BE":"fr","fr-CA":"fr","fr-LU":"fr","fr-MC":"fr","fr-CH":"fr","fr-FR":"fr",it:"it","it-IT":"it","it-CH":"it",ja:"ja","ja-JA":"ja","ja-JP":"ja",nl:"nl","nl-NL":"nl","nl-BE":"nl",pt:"pt-PT","pt-BR":"pt-PT","pt-PT":"pt-PT",ru:"ru","ru-RU":"ru",cs:"cs","cs-CZ":"cs",ar:"ar","ar-DZ":"ar","ar-BH":"ar","ar-EG":"ar","ar-IQ":"ar","ar-JO":"ar","ar-KW":"ar","ar-LB":"ar","ar-LY":"ar","ar-MA":"ar","ar-OM":"ar","ar-QA":"ar","ar-SA":"ar","ar-SY":"ar","ar-TN":"ar","ar-AE":"ar","ar-YE":"ar",zh:"zh","zh-HK":"zh","zh-MO":"zh","zh-CN":"zh","zh-Hans":"zh","zh-SG":"zh","zh-TW":"zh","zh-Hant":"zh"},bizagi.util.getNormalizedDate=function(e,t,i){var a=e;try{e&&"string"==typeof e&&(a=bizagi.util.dateFormatter.getDateFromInvariant(e,i)),a&&0!==a&&null!=a&&(i?a.setMilliseconds(0):a.setHours(0,0,0,0),a=bizagi.util.dateFormatter.formatDate(a,t))}catch(e){}return a},bizagi.util.isFeatureEnabled=function(e){var t=bizagi.override&&bizagi.override[e];return bizagi.util.parseBoolean(t)},bizagi.util.getLastProcessInboxKey=function(){var e="lastProcessInbox";return e=e.concat("_",bizagi.util.getUserHash())},bizagi.util.lastProcessInboxInit=function(){bizagi.util.setItemLocalStorage(bizagi.util.getLastProcessInboxKey(),JSON.stringify(bizagi.util.getLastProcessInboxCreate()))},bizagi.util.getLastProcessInboxCreate=function(){return{processInfo:bizagi.util.createLastProcessInboxProcess(),sortInfo:bizagi.util.createLastProcessInboxSort(),filterInfo:bizagi.util.createLastProcessInboxFilter(),processColumnsInfo:bizagi.util.createLastProcessInboxColumns(),inputTrayInfo:bizagi.util.createLastProcessInboxInputTray()}},bizagi.util.createLastProcessInboxProcess=function(){return{processInfoName:null,idWorkflow:-1}},bizagi.util.createLastProcessInboxSort=function(){return{sortDirection:"asc",sortFieldName:null,sortOrder:null}},bizagi.util.createLastProcessInboxFilter=function(){return{filterValue:null,filterFieldName:null,filterType:"equal"}},bizagi.util.createLastProcessInboxColumns=function(){return{processColumns:[]}},bizagi.util.createLastProcessInboxInputTray=function(){return"inbox"},bizagi.util.getLastProcessInbox=function(){var e=bizagi.util.getItemLocalStorage(bizagi.util.getLastProcessInboxKey());return e||(bizagi.util.lastProcessInboxInit(),e=bizagi.util.getItemLocalStorage(bizagi.util.getLastProcessInboxKey())),JSON.parse(e)},bizagi.util.setLastProcessInbox=function(e,t,i){var a=bizagi.util.getLastProcessInbox();a.processInfo&&(a.processInfo.idWorkflow!=t?a.processColumnsInfo=null:bizagi.util.isEmpty(i)||a.processInfo.smartInboxId==i||(a.processColumnsInfo=null)),a.processInfo.processInfoName=e,a.processInfo.idWorkflow=parseInt(t||-1),a.processInfo.smartInboxId=void 0!==i?i:null,a.filterInfo&&(a.filterInfo=bizagi.util.createLastProcessInboxFilter()),bizagi.util.setItemLocalStorage(bizagi.util.getLastProcessInboxKey(),JSON.stringify(a))},bizagi.util.setLastProcessInboxProcessColumns=function(e){var t=bizagi.util.getLastProcessInbox();t.processColumnsInfo=t.processColumnsInfo||{},t.processColumnsInfo.processColumns=e||[],bizagi.util.setItemLocalStorage(bizagi.util.getLastProcessInboxKey(),JSON.stringify(t))},bizagi.util.getLiveFiltersFromStorage=function(e){var t=[],i=bizagi.util.getItemLocalStorage("livefilters");try{var a=JSON.parse(i);t=void 0!==a[e]?JSON.parse(a[e]):t}catch(e){t=[]}return t},bizagi.util.setLiveFiltersToStorage=function(e,t){var i=bizagi.util.getItemLocalStorage("livefilters")||"[]",a=JSON.parse(i);a[e]=JSON.stringify(t),bizagi.util.setItemLocalStorage("livefilters",JSON.encode(Object.assign({},a)))},bizagi.util.setLastProcessInboxLiveFilter=function(e){var t=bizagi.util.getLastProcessInbox();t.liveFilters=e||[],bizagi.util.setItemLocalStorage(bizagi.util.getLastProcessInboxKey(),JSON.stringify(t))},bizagi.util.setLastProcessInboxSort=function(e,t,i){var a=bizagi.util.getLastProcessInbox();a.sortInfo.sortFieldName=e||null,a.sortInfo.sortDirection=t||"asc",a.sortInfo.sortOrder=i||null,bizagi.util.setItemLocalStorage(bizagi.util.getLastProcessInboxKey(),JSON.stringify(a))},bizagi.util.setLastProcessInboxFilter=function(e,t,i){var a=bizagi.util.getLastProcessInbox();a.filterInfo.filterValue=e||null,a.filterInfo.filterFieldName=t||null,a.filterInfo.filterType=i||"equal",bizagi.util.setItemLocalStorage(bizagi.util.getLastProcessInboxKey(),JSON.stringify(a))},bizagi.util.setLastProcessInboxInputTray=function(e){var t=bizagi.util.getLastProcessInbox();t.inputTrayInfo=e||"",bizagi.util.setItemLocalStorage(bizagi.util.getLastProcessInboxKey(),JSON.stringify(t))},bizagi.util.getLastProcessInboxProcessInfo=function(){var e=bizagi.util.getLastProcessInbox();return bizagi.localization&&null==e.processInfo.processInfoName&&(e.processInfo.processInfoName=bizagi.localization.getResource("workportal-widget-inbox-all-processes")),e.processInfo.allProcesses=-1===e.processInfo.idWorkflow,e.processInfo},bizagi.util.getLastProcessInboxSmartInboxId=function(){return bizagi.util.getLastProcessInbox().processInfo.smartInboxId},bizagi.util.getLastProcessInboxSort=function(){return bizagi.util.getLastProcessInbox().sortInfo},bizagi.util.getLastProcessInboxFilter=function(){return bizagi.util.getLastProcessInbox().filterInfo},bizagi.util.getLastProcessInboxLiveFilter=function(){return bizagi.util.getLastProcessInbox().liveFilters},bizagi.util.getLastProcessInboxProcessColumns=function(){return bizagi.util.getLastProcessInbox().processColumnsInfo},bizagi.util.getLastProcessInboxInputTray=function(){return bizagi.util.getLastProcessInbox().inputTrayInfo},bizagi.util.removeLastProcessInbox=function(){bizagi.util.removeItemLocalStorage(bizagi.util.getLastProcessInboxKey())},bizagi.util.removeLastProcessInboxSort=function(){var e=bizagi.util.getLastProcessInbox();e&&e.sortInfo&&(e.sortInfo=bizagi.util.createLastProcessInboxSort(),bizagi.util.setItemLocalStorage(bizagi.util.getLastProcessInboxKey(),JSON.stringify(e)))},bizagi.util.removeLastProcessLiveFilters=function(){var e=bizagi.util.getLastProcessInbox();e&&e.liveFilters&&(e.liveFilters=[],bizagi.util.setItemLocalStorage(bizagi.util.getLastProcessInboxKey(),JSON.stringify(e)))},bizagi.util.getSyncTimeStampKey=function(){var e="syncTimeStamp";return e=e.concat("_",bizagi.util.getUserHash())},bizagi.util.storeSyncTimeStamp=function(e){bizagi.util.setItemLocalStorage(bizagi.util.getSyncTimeStampKey(),e.toString())},bizagi.util.getSyncTimeStamp=function(){var e=bizagi.util.getItemLocalStorage(bizagi.util.getSyncTimeStampKey());return e?new Date(e):void 0},bizagi.util.getUserHash=function(){return("undefined"!=typeof BIZAGI_USER?(BIZAGI_USER+"-"+BIZAGI_PROXY_PREFIX+"-"+BIZAGI_DOMAIN).toLowerCase():"admon-http://localhost/bizagiR100x-domain").hashCode()},bizagi.util.defaultWidget=function(e){var t=bizagi.services.preferences(),i=bizagi.workportal.widgets.widget,a={set:function(e){bizagi.cookie("bizagiDefaultWidget",e,{expires:30})},get:function(){return bizagi.cookie("bizagiDefaultWidget")}},n={set:function(e){var i="inbox"===e?"DETAIL":"TABLE";t.changePreference(t.name.INBOX_VIEW_TYPE,i)},get:function(){var e=t.getPreference(t.name.INBOX_VIEW_TYPE);return"DETAIL"===e?i.BIZAGI_WORKPORTAL_WIDGET_INBOX:i.BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID}},r=bizagi.util.isMobile?a:n;return void 0!==e&&r.set(e),r.get()},bizagi.util.getMobileFeaturesKey=function(){var e="undefined"!=typeof BIZAGI_USER?(BIZAGI_USER+"-"+BIZAGI_PROXY_PREFIX+"-"+BIZAGI_DOMAIN).toLowerCase():"admon-http://localhost/bizagiR100x-domain",t="mobileFeatures";return t=t.concat("_",e)},bizagi.util.getMobileFeatures=function(){var e=bizagi.util.getItemLocalStorage(bizagi.util.getMobileFeaturesKey());return $.extend(bizagi.util.isEmpty(e)?{}:JSON.parse(e),bizagiConfig.features)},bizagi.util.storeMobileFeatures=function(e){var t=bizagi.util.getMobileFeatures(),i=$.extend(t,e);bizagi.util.setItemLocalStorage(bizagi.util.getMobileFeaturesKey(),JSON.stringify(i))},bizagi.util.getCardviewMaxColumsAllowed=function(){var e=100,t=bizagi.util.getMobileFeatures();return t&&t.maxColumnsEnabled&&!0===t.maxColumnsEnabled.enabled&&(e=t.maxColumnsEnabled.value),e},bizagi.util.blobTob64=function(e,t){var i=new $.Deferred,a=new FileReader;return a.readAsDataURL(e),a.onloadend=function(){base64data=a.result,t&&(base64data=base64data.split(",")[1]),i.resolve(base64data)},i},bizagi.util.blobToText=function(e){var t=new $.Deferred,i=new FileReader;return i.readAsText(e),i.onloadend=function(){t.resolve(i.result)},t.promise()},bizagi.util.getDataUrl=function(e){var t;try{if(void 0===e.value||bizagi.util.isEmpty(e.value))t=e.url||"";else{var i=e.value,a=i.value||i;if(Array.isArray(a)){var n=a.shift();t=Array.isArray(n)?n.join(""):n}else t=a}(t=bizagi.util.isEmpty(t)?"":"data:image/png;base64,"+t.replace(/^data:.*;base64,/,""))&&-1!==t.indexOf("Invalid case id")&&(t="")}catch(e){t=""}return t},bizagi.util.getDataUrl=function(e,t){var i;try{if(void 0===e||bizagi.util.isEmpty(e))i=t||"";else{var a=e,n=a.value||a;if(Array.isArray(n)){var r=n.shift();i=Array.isArray(r)?r.join(""):r}else i=n}(i=bizagi.util.isEmpty(i)?"":"data:image/png;base64,"+i.replace(/^data:.*;base64,/,""))&&-1!==i.indexOf("Invalid case id")&&(i="")}catch(e){i=""}return i},bizagi.util.console={},bizagi.util.console.log=function(){if("Bugsee"in window||bizagi.util.isCordovaSupported()){var e=Array.prototype.slice.call(arguments),t=e[0],i=e.length>1?e.slice(1):null;if(i)try{return void console.log("BUGSEE: "+t+" \r\n"+JSON.encode(i))}catch(e){}}console.log.apply(this,arguments)},bizagi.util.console.error=function(){if("Bugsee"in window||bizagi.util.isCordovaSupported()){var e=Array.prototype.slice.call(arguments),t=e[0],i=e.length>1?e.slice(1):null;if(i)try{return void console.error("BUGSEE: "+t+" \r\n"+JSON.encode(i))}catch(e){}}console.error.apply(this,arguments)},bizagi.util.deepExtend=function(e){e=e||{};for(var t=1;t<arguments.length;t++){var i=arguments[t];if(i)for(var a in i)i.hasOwnProperty(a)&&("object"===_typeof(i[a])?i[a]instanceof Array==1?e[a]=i[a].slice(0):e[a]=deepExtend(e[a],i[a]):e[a]=i[a])}return e},bizagi.util.extend=function(e){e=e||{};for(var t=1;t<arguments.length;t++)if(arguments[t])for(var i in arguments[t])arguments[t].hasOwnProperty(i)&&(e[i]=arguments[t][i]);return e},bizagi.util.getColumnType=function(e){if(void 0===e)return"default";var t=e.replace("column","").toLowerCase();return bizagi.util.normalizeType(t)},bizagi.util.mapAlignClassName=function(e){return{rigth:"flex-end",left:"flex-start",justify:"flex-start",default:"center",center:"center"}[e]||"center"},bizagi.util.isMobileErrorTracesEnabled=function(){var e=!1,t=bizagi.util.getMobileFeatures();return t&&t.mobileErrorTraces&&!0===t.mobileErrorTraces.enabled&&(e=!0),e&&bizagi.util.isTabletDevice()},bizagi.util.isMobileSmartInboxEnabled=function(){var e=!1,t=bizagi.util.getMobileFeatures();return t&&t.mobileSmartInbox&&!0===t.mobileSmartInbox.enabled&&(e=!0),e&&bizagi.util.isTabletDevice()},bizagi.util.isMobileLiveFiltersEnabled=function(){var e=!1,t=bizagi.util.getMobileFeatures();return t&&t.mobileLiveFilters&&!0===t.mobileLiveFilters.enabled&&(e=!0),e&&bizagi.util.isTabletDevice()},bizagi.util.getColumnType=function(e){if(void 0===e)return"default";var t=e.replace("column","").toLowerCase();return bizagi.util.normalizeType(t)},$.any=function(e,t){if(void 0===e||null==e||0==e.length)return!1;var i=$.grep(e,t);return null!=i&&void 0!==i&&i.length>0},$.first=function(e,t){if(void 0===e||null==e||0==e.length)return null;var i=$.grep(e,t);return null==i||void 0===i||0==i.length?null:i[0]},$.groupBy=function(e,t){if(void 0===e||null==e||0==e.length)return{};var i={};return $.each(e,(function(e,a){void 0!==a&&(void 0===i[a[t]]&&(i[a[t]]=[]),i[a[t]].push(a))})),i},bizagi.util.downloadBlobFile=function(e,t){if(window.navigator&&window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(e,t);else{var i=window.URL.createObjectURL(e),a=document.createElement("a");a.style="display: none",document.body.appendChild(a),a.href=i,a.download=t,a.click(),window.URL.revokeObjectURL(i),a.parentNode.removeChild(a)}},bizagi.util.handleJSONResponse=function(e){var t=new $.Deferred;return e&&/application\/json/i.test(e.type)?bizagi.util.blobToText(e).then((function(i){"error"===JSON.parse(i).type?t.reject(i):t.resolve(e)})).fail((function(e){t.reject(e)})):t.resolve(e),t.promise()},bizagi.util.bzValidator=function(e){var t=[],i=[];return{add:function(e,i){return"function"==typeof e?t.push({callback:e,message:i}):console.warn("Callback is not a function"),this},validate:function(a){i=[];try{t&&t.length>0?t.forEach((function(t){var a=t.callback(e);bizagi.util.isBoolean(a)?a||i.push(t.message||"Validation error"):i.push("Callback evaluation is not a function: "+t.message)})):i.push("There are not validators added")}catch(e){console.warn(e)}return a({errors:i}),t=[],this},isValid:function(){return i&&!i.length}}},function(e){var t={};function i(a){if(t[a])return t[a].exports;var n=t[a]={exports:{},id:a,loaded:!1};return e[a].call(n.exports,n,n.exports,i),n.loaded=!0,n.exports}i.m=e,i.c=t,i.p="",i(0)}([function(e,t,i){i(20).init()},function(e,t,i){var a=i(9);function n(){var e=a.get("wdc_approved_origins");return e&&0!==e.length?e.split(","):[]}e.exports.addApprovedOrigin=function(e){if(e){var t=n();t.push(e),i=t.join(","),console.log("Saving approved origins '"+i+"'"),a.set("wdc_approved_origins",i)}var i},e.exports.getApprovedOrigins=n},function(e,t){var i={phaseEnum:{interactivePhase:"interactive",authPhase:"auth",gatherDataPhase:"gatherData"},authPurposeEnum:{ephemeral:"ephemeral",enduring:"enduring"},authTypeEnum:{none:"none",basic:"basic",custom:"custom"},dataTypeEnum:{bool:"bool",date:"date",datetime:"datetime",float:"float",int:"int",string:"string",geometry:"geometry"},columnRoleEnum:{dimension:"dimension",measure:"measure"},columnTypeEnum:{continuous:"continuous",discrete:"discrete"},aggTypeEnum:{sum:"sum",avg:"avg",median:"median",count:"count",countd:"count_dist"},geographicRoleEnum:{area_code:"area_code",cbsa_msa:"cbsa_msa",city:"city",congressional_district:"congressional_district",country_region:"country_region",county:"county",state_province:"state_province",zip_code_postcode:"zip_code_postcode",latitude:"latitude",longitude:"longitude"},unitsFormatEnum:{thousands:"thousands",millions:"millions",billions_english:"billions_english",billions_standard:"billions_standard"},numberFormatEnum:{number:"number",currency:"currency",scientific:"scientific",percentage:"percentage"},localeEnum:{america:"en-us",brazil:"pt-br",china:"zh-cn",france:"fr-fr",germany:"de-de",japan:"ja-jp",korea:"ko-kr",spain:"es-es"},joinEnum:{inner:"inner",left:"left"}};e.exports.apply=function(e){for(var t in i)e[t]=i[t]}},function(e,t){function i(e){this.nativeApiRootObj=e,this._initPublicInterface(),this._initPrivateInterface()}i.prototype._initPublicInterface=function(){console.log("Initializing public interface for NativeDispatcher"),this._submitCalled=!1;var e={};e.abortForAuth=this._abortForAuth.bind(this),e.abortWithError=this._abortWithError.bind(this),e.addCrossOriginException=this._addCrossOriginException.bind(this),e.log=this._log.bind(this),e.submit=this._submit.bind(this),e.reportProgress=this._reportProgress.bind(this),this.publicInterface=e},i.prototype._abortForAuth=function(e){this.nativeApiRootObj.WDCBridge_Api_abortForAuth.api(e)},i.prototype._abortWithError=function(e){this.nativeApiRootObj.WDCBridge_Api_abortWithError.api(e)},i.prototype._addCrossOriginException=function(e){this.nativeApiRootObj.WDCBridge_Api_addCrossOriginException.api(e)},i.prototype._log=function(e){this.nativeApiRootObj.WDCBridge_Api_log.api(e)},i.prototype._submit=function(){this._submitCalled?console.log("submit called more than once"):(this._submitCalled=!0,this.nativeApiRootObj.WDCBridge_Api_submit.api())},i.prototype._initPrivateInterface=function(){console.log("Initializing private interface for NativeDispatcher"),this._initCallbackCalled=!1,this._shutdownCallbackCalled=!1;var e={};e._initCallback=this._initCallback.bind(this),e._shutdownCallback=this._shutdownCallback.bind(this),e._schemaCallback=this._schemaCallback.bind(this),e._tableDataCallback=this._tableDataCallback.bind(this),e._dataDoneCallback=this._dataDoneCallback.bind(this),this.privateInterface=e},i.prototype._initCallback=function(){this._initCallbackCalled?console.log("initCallback called more than once"):(this._initCallbackCalled=!0,this.nativeApiRootObj.WDCBridge_Api_initCallback.api())},i.prototype._shutdownCallback=function(){this._shutdownCallbackCalled?console.log("shutdownCallback called more than once"):(this._shutdownCallbackCalled=!0,this.nativeApiRootObj.WDCBridge_Api_shutdownCallback.api())},i.prototype._schemaCallback=function(e,t){this.nativeApiRootObj.WDCBridge_Api_schemaCallbackEx?this.nativeApiRootObj.WDCBridge_Api_schemaCallbackEx.api(e,t||[]):this.nativeApiRootObj.WDCBridge_Api_schemaCallback.api(e)},i.prototype._tableDataCallback=function(e,t){this.nativeApiRootObj.WDCBridge_Api_tableDataCallback.api(e,t)},i.prototype._reportProgress=function(e){this.nativeApiRootObj.WDCBridge_Api_reportProgress?this.nativeApiRootObj.WDCBridge_Api_reportProgress.api(e):console.log("reportProgress not available from this Tableau version")},i.prototype._dataDoneCallback=function(){this.nativeApiRootObj.WDCBridge_Api_dataDoneCallback.api()},e.exports=i},function(e,t,i){var a=i(6),n=i(2);function r(e,t,i){this.privateApiObj=t,this.globalObj=i,this._hasAlreadyThrownErrorSoDontThrowAgain=!1,this.changeTableauApiObj(e)}r.prototype.init=function(){console.log("Initializing shared WDC"),this.globalObj.onerror=this._errorHandler.bind(this),this._initTriggerFunctions(),this._initDeprecatedFunctions()},r.prototype.changeTableauApiObj=function(e){this.tableauApiObj=e,this.tableauApiObj.makeConnector=this._makeConnector.bind(this),this.tableauApiObj.registerConnector=this._registerConnector.bind(this),n.apply(this.tableauApiObj)},r.prototype._errorHandler=function(e,t,i,a,n){if(console.error(n),this._hasAlreadyThrownErrorSoDontThrowAgain)return!0;var r=e;if(n?r+="   stack:"+n.stack:(r+="   file: "+t,r+="   line: "+i),!this.tableauApiObj||!this.tableauApiObj.abortWithError)throw r;return this.tableauApiObj.abortWithError(r),this._hasAlreadyThrownErrorSoDontThrowAgain=!0,!0},r.prototype._makeConnector=function(){return{init:function(e){e()},shutdown:function(e){e()}}},r.prototype._registerConnector=function(e){for(var t=["init","shutdown","getSchema","getData"],i=t.length-1;i>=0;i--)if("function"!=typeof e[t[i]])throw"The connector did not define the required function: "+t[i];console.log("Connector registered"),this.globalObj._wdc=e,this._wdc=e},r.prototype._initTriggerFunctions=function(){this.privateApiObj.triggerInitialization=this._triggerInitialization.bind(this),this.privateApiObj.triggerSchemaGathering=this._triggerSchemaGathering.bind(this),this.privateApiObj.triggerDataGathering=this._triggerDataGathering.bind(this),this.privateApiObj.triggerShutdown=this._triggerShutdown.bind(this)},r.prototype._triggerInitialization=function(){this._wdc.init(this.privateApiObj._initCallback)},r.prototype._triggerSchemaGathering=function(){this._wdc.getSchema(this.privateApiObj._schemaCallback)},r.prototype._triggerDataGathering=function(e){if(1!=e.length)throw"Unexpected number of tables specified. Expected 1, actual "+e.length.toString();var t=e[0],i=!!t.filterColumnId,n=new a(t.tableInfo,t.incrementValue,i,t.filterColumnId||"",t.filterValues||[],this.privateApiObj._tableDataCallback);this._wdc.getData(n,this.privateApiObj._dataDoneCallback)},r.prototype._triggerShutdown=function(){this._wdc.shutdown(this.privateApiObj._shutdownCallback)},r.prototype._initDeprecatedFunctions=function(){this.tableauApiObj.initCallback=this._initCallback.bind(this),this.tableauApiObj.headersCallback=this._headersCallback.bind(this),this.tableauApiObj.dataCallback=this._dataCallback.bind(this),this.tableauApiObj.shutdownCallback=this._shutdownCallback.bind(this)},r.prototype._initCallback=function(){this.tableauApiObj.abortWithError("tableau.initCallback has been deprecated in version 2.0.0. Please use the callback function passed to init")},r.prototype._headersCallback=function(e,t){this.tableauApiObj.abortWithError("tableau.headersCallback has been deprecated in version 2.0.0")},r.prototype._dataCallback=function(e,t,i){this.tableauApiObj.abortWithError("tableau.dataCallback has been deprecated in version 2.0.0")},r.prototype._shutdownCallback=function(){this.tableauApiObj.abortWithError("tableau.shutdownCallback has been deprecated in version 2.0.0. Please use the callback function passed to shutdown")},e.exports=r},function(e,t,i){var a=i(1);function n(e){this.globalObj=e,this._initMessageHandling(),this._initPublicInterface(),this._initPrivateInterface()}i(8),n.prototype._initMessageHandling=function(){console.log("Initializing message handling"),this.globalObj.addEventListener("message",this._receiveMessage.bind(this),!1),this.globalObj.document.addEventListener("DOMContentLoaded",this._onDomContentLoaded.bind(this))},n.prototype._onDomContentLoaded=function(){if(this.globalObj.parent!==window&&this.globalObj.parent.postMessage(this._buildMessagePayload("loaded"),"*"),this.globalObj.opener)try{this.globalObj.opener.postMessage(this._buildMessagePayload("loaded"),"*")}catch(e){console.warn("Some versions of IE may not accurately simulate the Web Data Connector. Please retry on a Webkit based browser")}},n.prototype._packagePropertyValues=function(){return{connectionName:this.globalObj.tableau.connectionName,connectionData:this.globalObj.tableau.connectionData,password:this.globalObj.tableau.password,username:this.globalObj.tableau.username,usernameAlias:this.globalObj.tableau.usernameAlias,incrementalExtractColumn:this.globalObj.tableau.incrementalExtractColumn,versionNumber:this.globalObj.tableau.versionNumber,locale:this.globalObj.tableau.locale,authPurpose:this.globalObj.tableau.authPurpose,platformOS:this.globalObj.tableau.platformOS,platformVersion:this.globalObj.tableau.platformVersion,platformEdition:this.globalObj.tableau.platformEdition,platformBuildNumber:this.globalObj.tableau.platformBuildNumber}},n.prototype._applyPropertyValues=function(e){e&&(this.globalObj.tableau.connectionName=e.connectionName,this.globalObj.tableau.connectionData=e.connectionData,this.globalObj.tableau.password=e.password,this.globalObj.tableau.username=e.username,this.globalObj.tableau.usernameAlias=e.usernameAlias,this.globalObj.tableau.incrementalExtractColumn=e.incrementalExtractColumn,this.globalObj.tableau.locale=e.locale,this.globalObj.tableau.language=e.locale,this.globalObj.tableau.authPurpose=e.authPurpose,this.globalObj.tableau.platformOS=e.platformOS,this.globalObj.tableau.platformVersion=e.platformVersion,this.globalObj.tableau.platformEdition=e.platformEdition,this.globalObj.tableau.platformBuildNumber=e.platformBuildNumber)},n.prototype._buildMessagePayload=function(e,t,i){var a={msgName:e,msgData:t,props:i,version:"2.3.1"};return JSON.stringify(a)},n.prototype._sendMessage=function(e,t){var i=this._buildMessagePayload(e,t,this._packagePropertyValues());if(void 0!==this.globalObj.webkit&&void 0!==this.globalObj.webkit.messageHandlers&&void 0!==this.globalObj.webkit.messageHandlers.wdcHandler)this.globalObj.webkit.messageHandlers.wdcHandler.postMessage(i);else{if(!this._sourceWindow)throw"Looks like the WDC is calling a tableau function before tableau.init() has been called.";this._sourceWindow.postMessage(i,this._sourceOrigin)}},n.prototype._getPayloadObj=function(e){var t=null;try{t=JSON.parse(e)}catch(e){return null}return t},n.prototype._getWebSecurityWarningConfirm=function(){var e=this._sourceOrigin,t=new(i(18))(e).host();if(["localhost","tableau.github.io"].indexOf(t)>=0)return!0;if(t&&t.endsWith("online.tableau.com"))return!0;if(a.getApprovedOrigins().indexOf(e)>=0)return console.log("Already approved the origin'"+e+"', not asking again"),!0;var n=this._getLocalizedString("webSecurityWarning"),r=confirm(n+"\n\n"+t+"\n");return r&&a.addApprovedOrigin(e),r},n.prototype._getCurrentLocale=function(){var e=navigator.language||navigator.userLanguage,t=e?e.substring(0,2):"en";return["de","en","es","fr","ja","ko","pt","zh"].indexOf(t)<0&&(t="en"),t},n.prototype._getLocalizedString=function(e){var t=this._getCurrentLocale(),a=i(10),n=i(11),r=i(12),o=i(14);return{de:a,en:n,es:r,fr:i(13),ja:o,ko:i(15),pt:i(16),zh:i(17)}[t][e]},n.prototype._receiveMessage=function(e){if(console.log("Received message!"),!this.globalObj._wdc)throw"No WDC registered. Did you forget to call tableau.registerConnector?";var t=this._getPayloadObj(e.data);if(t){this._sourceWindow||(this._sourceWindow=e.source,this._sourceOrigin=e.origin);var i=t.msgData;switch(this._applyPropertyValues(t.props),t.msgName){case"init":this._getWebSecurityWarningConfirm()?(this.globalObj.tableau.phase=i.phase,this.globalObj._tableau.triggerInitialization()):window.close();break;case"shutdown":this.globalObj._tableau.triggerShutdown();break;case"getSchema":this.globalObj._tableau.triggerSchemaGathering();break;case"getData":this.globalObj._tableau.triggerDataGathering(i.tablesAndIncrementValues)}}},n.prototype._initPublicInterface=function(){console.log("Initializing public interface"),this._submitCalled=!1;var e={};e.abortForAuth=this._abortForAuth.bind(this),e.abortWithError=this._abortWithError.bind(this),e.addCrossOriginException=this._addCrossOriginException.bind(this),e.log=this._log.bind(this),e.reportProgress=this._reportProgress.bind(this),e.submit=this._submit.bind(this),this.publicInterface=e},n.prototype._abortForAuth=function(e){this._sendMessage("abortForAuth",{msg:e})},n.prototype._abortWithError=function(e){this._sendMessage("abortWithError",{errorMsg:e})},n.prototype._addCrossOriginException=function(e){console.log("Cross Origin Exception requested in the simulator. Pretending to work."),setTimeout(function(){this.globalObj._wdc.addCrossOriginExceptionCompleted(e)}.bind(this),0)},n.prototype._log=function(e){this._sendMessage("log",{logMsg:e})},n.prototype._reportProgress=function(e){this._sendMessage("reportProgress",{progressMsg:e})},n.prototype._submit=function(){this._sendMessage("submit")},n.prototype._initPrivateInterface=function(){console.log("Initializing private interface");var e={};e._initCallback=this._initCallback.bind(this),e._shutdownCallback=this._shutdownCallback.bind(this),e._schemaCallback=this._schemaCallback.bind(this),e._tableDataCallback=this._tableDataCallback.bind(this),e._dataDoneCallback=this._dataDoneCallback.bind(this),this.privateInterface=e},n.prototype._initCallback=function(){this._sendMessage("initCallback")},n.prototype._shutdownCallback=function(){this._sendMessage("shutdownCallback")},n.prototype._schemaCallback=function(e,t){this._sendMessage("_schemaCallback",{schema:e,standardConnections:t||[]})},n.prototype._tableDataCallback=function(e,t){this._sendMessage("_tableDataCallback",{tableName:e,data:t})},n.prototype._dataDoneCallback=function(){this._sendMessage("_dataDoneCallback")},e.exports=n},function(e,t){function i(e,t,i,a,n,r){this.tableInfo=e,this.incrementValue=t||"",this.isJoinFiltered=i,this.filterColumnId=a,this.filterValues=n,this._dataCallbackFn=r,this.appendRows=this._appendRows.bind(this)}i.prototype._appendRows=function(e){e?Array.isArray(e)?this._dataCallbackFn(this.tableInfo.id,e):console.warn("Table.appendRows must take an array of arrays or array of objects"):console.warn("rows data is null or undefined")},e.exports=i},function(e,t){e.exports.copyFunctions=function(e,t){for(var i in e)"function"==typeof e[i]&&(t[i]=e[i])},e.exports.linkObjectProperties=function(e,t,i){i.forEach((function(i){Object.defineProperty(t,i,{enumerable:!0,configurable:!0,get:function(){return e[i]},set:function(t){return e[i]=t}})}))},e.exports.tableauProperties=["authPurpose","authType","connectionData","connectionName","language","locale","logLevel","password","phase","platformBuildNumber","platformEdition","platformOs","platformVersion","propertiesReady","scriptVersion","username","usernameAlias","APIVersion"]},function(e,t){
/*! http://mths.be/endswith v0.2.0 by @mathias */
String.prototype.endsWith||function(){"use strict";var e=function(){try{var e={},t=Object.defineProperty,i=t(e,e,e)&&t}catch(e){}return i}(),t={}.toString,i=function(e){if(null==this)throw TypeError();var i=String(this);if(e&&"[object RegExp]"==t.call(e))throw TypeError();var a=i.length,n=String(e),r=n.length,o=a;if(arguments.length>1){var l=arguments[1];void 0!==l&&(o=l?Number(l):0)!=o&&(o=0)}var s=Math.min(Math.max(o,0),a),u=s-r;if(u<0)return!1;for(var c=-1;++c<r;)if(i.charCodeAt(u+c)!=n.charCodeAt(c))return!1;return!0};e?e(String.prototype,"endsWith",{value:i,configurable:!0,writable:!0}):String.prototype.endsWith=i}()},function(e,t,i){var a;!function(n,r){"use strict";var o=function(e){if("object"!==_typeof(e.document))throw new Error("Cookies.js requires a `window` with a `document` object");var t=function e(t,i,a){return 1===arguments.length?e.get(t):e.set(t,i,a)};return t._document=e.document,t._cacheKeyPrefix="cookey.",t._maxExpireDate=new Date("Fri, 31 Dec 9999 23:59:59 UTC"),t.defaults={path:"/",secure:!1},t.get=function(e){t._cachedDocumentCookie!==t._document.cookie&&t._renewCache();var i=t._cache[t._cacheKeyPrefix+e];return void 0===i?void 0:decodeURIComponent(i)},t.set=function(e,i,a){return(a=t._getExtendedOptions(a)).expires=t._getExpiresDate(void 0===i?-1:a.expires),t._document.cookie=t._generateCookieString(e,i,a),t},t.expire=function(e,i){return t.set(e,void 0,i)},t._getExtendedOptions=function(e){return{path:e&&e.path||t.defaults.path,domain:e&&e.domain||t.defaults.domain,expires:e&&e.expires||t.defaults.expires,secure:e&&void 0!==e.secure?e.secure:t.defaults.secure}},t._isValidDate=function(e){return"[object Date]"===Object.prototype.toString.call(e)&&!isNaN(e.getTime())},t._getExpiresDate=function(e,i){if(i=i||new Date,"number"==typeof e?e=e===1/0?t._maxExpireDate:new Date(i.getTime()+1e3*e):"string"==typeof e&&(e=new Date(e)),e&&!t._isValidDate(e))throw new Error("`expires` parameter cannot be converted to a valid Date instance");return e},t._generateCookieString=function(e,t,i){var a=(e=(e=e.replace(/[^#$&+\^`|]/g,encodeURIComponent)).replace(/\(/g,"%28").replace(/\)/g,"%29"))+"="+(t=(t+"").replace(/[^!#$&-+\--:<-\[\]-~]/g,encodeURIComponent));return a+=(i=i||{}).path?";path="+i.path:"",a+=i.domain?";domain="+i.domain:"",a+=i.expires?";expires="+i.expires.toUTCString():"",a+=i.secure?";secure":""},t._getCacheFromString=function(e){for(var i={},a=e?e.split("; "):[],n=0;n<a.length;n++){var r=t._getKeyValuePairFromCookieString(a[n]);void 0===i[t._cacheKeyPrefix+r.key]&&(i[t._cacheKeyPrefix+r.key]=r.value)}return i},t._getKeyValuePairFromCookieString=function(e){var t=e.indexOf("=");t=t<0?e.length:t;var i,a=e.substr(0,t);try{i=decodeURIComponent(a)}catch(e){console&&"function"==typeof console.error&&console.error('Could not decode cookie with key "'+a+'"',e)}return{key:i,value:e.substr(t+1)}},t._renewCache=function(){t._cache=t._getCacheFromString(t._document.cookie),t._cachedDocumentCookie=t._document.cookie},t._areEnabled=function(){var e="1"===t.set("cookies.js",1).get("cookies.js");return t.expire("cookies.js"),e},t.enabled=t._areEnabled(),t},l=n&&"object"===_typeof(n.document)?o(n):o;void 0===(a=function(){return l}.call(t,i,t,e))||(e.exports=a)}("undefined"==typeof window?this:window)},function(e,t){e.exports={webSecurityWarning:"To help prevent malicious sites from getting access to your confidential data, confirm that you trust the following site:"}},function(e,t){e.exports={webSecurityWarning:"To help prevent malicious sites from getting access to your confidential data, confirm that you trust the following site:"}},function(e,t){e.exports={webSecurityWarning:"To help prevent malicious sites from getting access to your confidential data, confirm that you trust the following site:"}},function(e,t){e.exports={webSecurityWarning:"To help prevent malicious sites from getting access to your confidential data, confirm that you trust the following site:"}},function(e,t){e.exports={webSecurityWarning:"To help prevent malicious sites from getting access to your confidential data, confirm that you trust the following site:"}},function(e,t){e.exports={webSecurityWarning:"To help prevent malicious sites from getting access to your confidential data, confirm that you trust the following site:"}},function(e,t){e.exports={webSecurityWarning:"To help prevent malicious sites from getting access to your confidential data, confirm that you trust the following site:"}},function(e,t){e.exports={webSecurityWarning:"wwTo help prevent malicious sites from getting access to your confidential data, confirm that you trust the following site:"}},function(e,t,i){var a;
/*!
                                     * jsUri
                                     * https://github.com/derek-watson/jsUri
                                     *
                                     * Copyright 2013, Derek Watson
                                     * Released under the MIT license.
                                     *
                                     * Includes parseUri regular expressions
                                     * http://blog.stevenlevithan.com/archives/parseuri
                                     * Copyright 2007, Steven Levithan
                                     * Released under the MIT license.
                                     */!function(n){var r={starts_with_slashes:/^\/+/,ends_with_slashes:/\/+$/,pluses:/\+/g,query_separator:/[&;]/,uri_parser:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*)(?::([^:@]*))?)?@)?(\[[0-9a-fA-F:.]+\]|[^:\/?#]*)(?::(\d+|(?=:)))?(:)?)((((?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/};function o(e){return e&&(e=e.toString().replace(r.pluses,"%20"),e=decodeURIComponent(e)),e}function l(e){var t,i,a,n,l,s,u,c=[];if(null==e||""===e)return c;for(0===e.indexOf("?")&&(e=e.substring(1)),t=0,u=(i=e.toString().split(r.query_separator)).length;t<u;t++)0!==(n=(a=i[t]).indexOf("="))&&(l=o(a.substring(0,n)),s=o(a.substring(n+1)),c.push(-1===n?[a,null]:[l,s]));return c}function s(e){this.uriParts=function(e){var t=r.uri_parser.exec(e||""),i={};return["source","protocol","authority","userInfo","user","password","host","port","isColonUri","relative","path","directory","file","query","anchor"].forEach((function(e,a){i[e]=t[a]||""})),i}(e),this.queryPairs=l(this.uriParts.query),this.hasAuthorityPrefixUserPref=null}Array.prototype.forEach||(Array.prototype.forEach=function(e,t){var i,a;if(null==this)throw new TypeError(" this is null or not defined");var n=Object(this),r=n.length>>>0;if("function"!=typeof e)throw new TypeError(e+" is not a function");for(arguments.length>1&&(i=t),a=0;a<r;){var o;a in n&&(o=n[a],e.call(i,o,a,n)),a++}}),["protocol","userInfo","host","port","path","anchor"].forEach((function(e){s.prototype[e]=function(t){return void 0!==t&&(this.uriParts[e]=t),this.uriParts[e]}})),s.prototype.hasAuthorityPrefix=function(e){return void 0!==e&&(this.hasAuthorityPrefixUserPref=e),null===this.hasAuthorityPrefixUserPref?-1!==this.uriParts.source.indexOf("//"):this.hasAuthorityPrefixUserPref},s.prototype.isColonUri=function(e){if(void 0===e)return!!this.uriParts.isColonUri;this.uriParts.isColonUri=!!e},s.prototype.query=function(e){var t,i,a,n="";for(void 0!==e&&(this.queryPairs=l(e)),t=0,a=this.queryPairs.length;t<a;t++)i=this.queryPairs[t],n.length>0&&(n+="&"),null===i[1]?n+=i[0]:(n+=i[0],n+="=",void 0!==i[1]&&(n+=encodeURIComponent(i[1])));return n.length>0?"?"+n:n},s.prototype.getQueryParamValue=function(e){var t,i,a;for(i=0,a=this.queryPairs.length;i<a;i++)if(e===(t=this.queryPairs[i])[0])return t[1]},s.prototype.getQueryParamValues=function(e){var t,i,a,n=[];for(t=0,a=this.queryPairs.length;t<a;t++)e===(i=this.queryPairs[t])[0]&&n.push(i[1]);return n},s.prototype.deleteQueryParam=function(e,t){var i,a,n,r,l,s=[];for(i=0,l=this.queryPairs.length;i<l;i++)n=o((a=this.queryPairs[i])[0])===o(e),r=a[1]===t,(1!==arguments.length||n)&&(2!==arguments.length||n&&r)||s.push(a);return this.queryPairs=s,this},s.prototype.addQueryParam=function(e,t,i){return 3===arguments.length&&-1!==i?(i=Math.min(i,this.queryPairs.length),this.queryPairs.splice(i,0,[e,t])):arguments.length>0&&this.queryPairs.push([e,t]),this},s.prototype.hasQueryParam=function(e){var t,i=this.queryPairs.length;for(t=0;t<i;t++)if(this.queryPairs[t][0]==e)return!0;return!1},s.prototype.replaceQueryParam=function(e,t,i){var a,n,r=-1,l=this.queryPairs.length;if(3===arguments.length){for(a=0;a<l;a++)if(o((n=this.queryPairs[a])[0])===o(e)&&decodeURIComponent(n[1])===o(i)){r=a;break}r>=0&&this.deleteQueryParam(e,o(i)).addQueryParam(e,t,r)}else{for(a=0;a<l;a++)if(o((n=this.queryPairs[a])[0])===o(e)){r=a;break}this.deleteQueryParam(e),this.addQueryParam(e,t,r)}return this},["protocol","hasAuthorityPrefix","isColonUri","userInfo","host","port","path","query","anchor"].forEach((function(e){var t="set"+e.charAt(0).toUpperCase()+e.slice(1);s.prototype[t]=function(t){return this[e](t),this}})),s.prototype.scheme=function(){var e="";return this.protocol()?(e+=this.protocol(),this.protocol().indexOf(":")!==this.protocol().length-1&&(e+=":"),e+="//"):this.hasAuthorityPrefix()&&this.host()&&(e+="//"),e},s.prototype.origin=function(){var e=this.scheme();return this.userInfo()&&this.host()&&(e+=this.userInfo(),this.userInfo().indexOf("@")!==this.userInfo().length-1&&(e+="@")),this.host()&&(e+=this.host(),(this.port()||this.path()&&this.path().substr(0,1).match(/[0-9]/))&&(e+=":"+this.port())),e},s.prototype.addTrailingSlash=function(){var e=this.path()||"";return"/"!==e.substr(-1)&&this.path(e+"/"),this},s.prototype.toString=function(){var e,t=this.origin();return this.isColonUri()?this.path()&&(t+=":"+this.path()):this.path()?(e=this.path(),r.ends_with_slashes.test(t)||r.starts_with_slashes.test(e)?(t&&t.replace(r.ends_with_slashes,"/"),e=e.replace(r.starts_with_slashes,"/")):t+="/",t+=e):this.host()&&(this.query().toString()||this.anchor())&&(t+="/"),this.query().toString()&&(t+=this.query().toString()),this.anchor()&&(0!==this.anchor().indexOf("#")&&(t+="#"),t+=this.anchor()),t},s.prototype.clone=function(){return new s(this.toString())},void 0===(a=function(){return s}.call(t,i,t,e))||(e.exports=a)}()},function(e,t,i){"use strict";var a=1,n=2,r=3,o=4,l=5,s=6,u=7,c=8,d=9,g=10;function p(e,t,i){this.__id__=e,i.objects[e]=this,this.__objectSignals__={},this.__propertyCache__={};var a=this;function n(e,t){var n=e[0],r=e[1];a[n]={connect:function(e){"function"==typeof e?(a.__objectSignals__[r]=a.__objectSignals__[r]||[],a.__objectSignals__[r].push(e),t||"destroyed"===n||i.exec({type:u,object:a.__id__,signal:r})):console.error("Bad callback given to connect to signal "+n)},disconnect:function(e){if("function"==typeof e){a.__objectSignals__[r]=a.__objectSignals__[r]||[];var o=a.__objectSignals__[r].indexOf(e);-1!==o?(a.__objectSignals__[r].splice(o,1),t||0!==a.__objectSignals__[r].length||i.exec({type:c,object:a.__id__,signal:r})):console.error("Cannot find connection of signal "+n+" to "+e.name)}else console.error("Bad callback given to disconnect from signal "+n)}}}function r(e,t){var i=a.__objectSignals__[e];i&&i.forEach((function(e){e.apply(e,t)}))}for(var e in this.unwrapQObject=function(e){if(e instanceof Array){for(var t=new Array(e.length),n=0;n<e.length;++n)t[n]=a.unwrapQObject(e[n]);return t}if(!e||!e["__QObject*__"]||void 0===e.id)return e;var r=e.id;if(i.objects[r])return i.objects[r];if(e.data){var o=new p(r,e.data,i);return o.destroyed.connect((function(){if(i.objects[r]===o){delete i.objects[r];var e=[];for(var t in o)e.push(t);for(var a in e)delete o[e[a]]}})),o.unwrapProperties(),o}console.error("Cannot unwrap unknown QObject "+r+" without data.")},this.unwrapProperties=function(){for(var e in a.__propertyCache__)a.__propertyCache__[e]=a.unwrapQObject(a.__propertyCache__[e])},this.propertyUpdate=function(e,t){for(var i in t){var n=t[i];a.__propertyCache__[i]=n}for(var o in e)r(o,e[o])},this.signalEmitted=function(e,t){r(e,this.unwrapQObject(t))},t.methods.forEach((function(e){var t=e[0],n=e[1];a[t]=function(){for(var e,t=[],r=0;r<arguments.length;++r){var o=arguments[r];"function"==typeof o?e=o:o instanceof p&&void 0!==i.objects[o.__id__]?t.push({id:o.__id__}):t.push(o)}i.exec({type:s,object:a.__id__,method:n,args:t},(function(t){if(void 0!==t){var i=a.unwrapQObject(t);e&&e(i)}}))}})),t.properties.forEach((function(e){var t=e[0],r=e[1],o=e[2];a.__propertyCache__[t]=e[3],o&&(1===o[0]&&(o[0]=r+"Changed"),n(o,!0)),Object.defineProperty(a,r,{configurable:!0,get:function(){var e=a.__propertyCache__[t];return void 0===e&&console.warn('Undefined value in property cache for property "'+r+'" in object '+a.__id__),e},set:function(e){if(void 0!==e){a.__propertyCache__[t]=e;var n=e;n instanceof p&&void 0!==i.objects[n.__id__]&&(n={id:n.__id__}),i.exec({type:d,object:a.__id__,property:t,value:n})}else console.warn("Property setter for "+r+" called with undefined value!")}})})),t.signals.forEach((function(e){n(e,!1)})),t.enums)a[e]=t.enums[e]}e.exports={QWebChannel:function(e,t){if("object"===_typeof(e)&&"function"==typeof e.send){var i=this;this.transport=e,this.send=function(e){"string"!=typeof e&&(e=JSON.stringify(e)),i.transport.send(e)},this.transport.onmessage=function(e){var t=e.data;switch("string"==typeof t&&(t=JSON.parse(t)),t.type){case a:i.handleSignal(t);break;case g:i.handleResponse(t);break;case n:i.handlePropertyUpdate(t);break;default:console.error("invalid message received:",e.data)}},this.execCallbacks={},this.execId=0,this.exec=function(e,t){t?(i.execId===Number.MAX_VALUE&&(i.execId=Number.MIN_VALUE),e.hasOwnProperty("id")?console.error("Cannot exec message with property id: "+JSON.stringify(e)):(e.id=i.execId++,i.execCallbacks[e.id]=t,i.send(e))):i.send(e)},this.objects={},this.handleSignal=function(e){var t=i.objects[e.object];t?t.signalEmitted(e.signal,e.args):console.warn("Unhandled signal: "+e.object+"::"+e.signal)},this.handleResponse=function(e){e.hasOwnProperty("id")?(i.execCallbacks[e.id](e.data),delete i.execCallbacks[e.id]):console.error("Invalid response message received: ",JSON.stringify(e))},this.handlePropertyUpdate=function(e){for(var t in e.data){var a=e.data[t],n=i.objects[a.object];n?n.propertyUpdate(a.signals,a.properties):console.warn("Unhandled property update: "+a.object+"::"+a.signal)}i.exec({type:o})},this.debug=function(e){i.send({type:l,data:e})},i.exec({type:r},(function(e){for(var a in e)new p(a,e[a],i);for(var a in i.objects)i.objects[a].unwrapProperties();t&&t(i),i.exec({type:o})}))}else console.error("The QWebChannel expects a transport object with a send function and onmessage callback property. Given is: transport: "+_typeof(e)+", transport.send: "+_typeof(e.send))}}},function(e,t,i){"use strict";var a=i(7),n=i(4),r=i(3),o=i(5),l=i(19);function s(e,t){a.copyFunctions(e.publicInterface,window.tableau),a.copyFunctions(e.privateInterface,window._tableau),t.init()}e.exports.init=function(){var e=null,t=null;window._tableau={},window.tableauVersionBootstrap?(console.log("Initializing NativeDispatcher, Reporting version number"),window.tableauVersionBootstrap.ReportVersionNumber("2.3.1"),e=new r(window)):window.qt&&window.qt.webChannelTransport?(console.log("Initializing NativeDispatcher for qwebchannel"),window.tableau={},window.channel=new l.QWebChannel(qt.webChannelTransport,(function(i){console.log("QWebChannel created successfully"),window._tableau._nativeSetupCompleted=function(){e=new r(i.objects),a.linkObjectProperties(i.objects.tableau,window.tableau,a.tableauProperties),t.changeTableauApiObj(window.tableau),s(e,t)},i.objects.tableauVersionBootstrap.ReportVersionNumber("2.3.1")}))):(console.log("Version Bootstrap is not defined, Initializing SimulatorDispatcher"),window.tableau={},e=new o(window)),t=new n(window.tableau,window._tableau,window),e&&s(e,t)}}]);var TableauController=function(e,t){return{init:function(){_biz_bizagiTableau.setApplicationUrl(e),bizagi.resourceDefinitionLocation={es:bizagi.loader.getResource("l10n","bizagi.tableau.resources.es"),en:bizagi.loader.getResource("l10n","bizagi.tableau.resources.en"),default:bizagi.loader.getResource("l10n","bizagi.tableau.resources.en")},bizagi.localization=new bizagi.l10n(bizagi.resourceDefinitionLocation),bizagi.localization.enableCustomizations=!1,bizagi.localization.setLanguage(t),$.when(bizagi.localization.readyDeferred).done((function(){bizagi.templateService=new bizagi.templates.services.service(bizagi.localization),_biz_uiTableau.renderTmpl("bizagi.connector.tableau.login",(function(){_biz_bizagiTableau.buildConnector(),_deferredInitUi.resolve()}))}))}}},UITableau=function(){function e(e,i){$("#nextButton").click(e),$("#tableau-uploadConfiguration").change((function(){var e=this.files[0];if(e){var t=new FileReader;t.onload=function(e){var t=e.target.result;if("{}"!==t)try{var i=JSON.parse(t);!function(e){var t=Object.keys(e);if(2!==t.length)throw"invalid configuration";if("entities"!==t[0]||"processes"!==t[1])throw"invalid configuration"}(i),document.getElementById("tableau-alert-error").style.display="none",s(i)}catch(e){!function(e){var t=document.getElementById("tableau-alert-error");t.style.removeProperty("display"),t.getElementsByClassName("tableau-alert-message")[0].innerText=e}(bizagi.localization.dictionary["tableau-error-invalid-file"])}},t.readAsText(e)}})),$("#importButton").click((function(){document.getElementById("tableau-uploadConfiguration").click()}));var a=document.getElementById("tableau-entity-tree");if(0===_biz_globalsTableau.entities.length)return t("importButton"),t("nextButton"),void(document.getElementById("emptyEntityList").style.display="block");for(var n=0;n<_biz_globalsTableau.entities.length;n++){var u=document.createElement("li"),c=_biz_globalsTableau.entities[n],d=o(c.name,c.name,!0,!1,n);if(u.className="parent-node",u.appendChild(l("btn-"+c.name)),u.appendChild(d),c.attribs&&c.attribs.length>0){var g=document.createElement("ul"),p=document.createElement("div");p.id="container-nodes-"+c.name,p.className="tableau-collapsed",r(c,p),g.appendChild(p),u.appendChild(g)}a.appendChild(u)}i&&s()}function t(e){document.getElementById(e).disabled=!0}function i(e,t){bizagi.templateService.getTemplate(bizagi.getTemplate(e)).done((function(e){$("#tableau-content").empty(),$.tmpl(e,{whiteLogo:("release"===BIZAGI_ENVIRONMENT?"jquery/production/"+bizagi.loader.productBuild+"/desktop/css/":"jquery/tableau/css/")+"images/logotype-bizagi-white.png",blackLogo:("release"===BIZAGI_ENVIRONMENT?"jquery/production/"+bizagi.loader.productBuild+"/desktop/css/":"jquery/tableau/css/")+"images/logotype-bizagi-black.png"}).appendTo("#tableau-content"),void 0!==t&&"function"==typeof t&&t()}))}function a(e,t){$("#nextButton").click(e),$("#backButton").click(t);for(var i=document.getElementById("tableau-entity-process-body"),a=Object.keys(_biz_globalsTableau.processByEntity),r=0;r<a.length;r++){var o=_biz_globalsTableau.entities[a[r]],l=document.createElement("tr"),s=document.createElement("td"),u=document.createElement("td");s.className="bz-table__cell",s.innerText=o.name,u.appendChild(n(a[r])),l.appendChild(s),l.appendChild(u),i.appendChild(l)}}function n(e){var t=document.createElement("select"),i=_biz_globalsTableau.entities[e],a=_biz_globalsTableau.processByEntity[e];t.className="bz-select",t.onchange=function(){_biz_globalsTableau.processByEntity[e]=this.value};for(var n=0;n<i.processesRelated.length;n++){var r=document.createElement("option");r.className="bz-option",r.innerText=i.processesRelated[n].displayName,r.value=i.processesRelated[n].id,t.appendChild(r)}return t.value=a,t}function r(e,t){for(var i=0;i<e.attribs.length;i++){var a,n,r=e.attribs[i],s=e.name+"."+r.name,u=1===r.xpaths.length||-1===r.id;if(e.isProcessEntity&&-1===r.id)for(var c=0;c<r.xpaths.length;c++){var d=r.xpaths[c].value,g=e.name+"."+d;"@workitems"!==d.toLowerCase()&&(a=document.createElement("li"),n=o(g,d,!1,u),a.appendChild(n),t.appendChild(a))}else if(-1!==r.id){if(n=o(s,r.name,!1,u),a=document.createElement("li"),u||a.appendChild(l("btn-"+s)),a.appendChild(n),!u){var p=document.createElement("ul"),b=document.createElement("div");a.className="parent-node",b.id="container-nodes-"+s,b.className="tableau-collapsed";for(c=1;c<r.xpaths.length;c++){d=r.xpaths[c].value.split(".")[1];var f=document.createElement("li");g=s+"."+d;f.appendChild(o(g,d,!1,!0)),b.appendChild(f),p.appendChild(b)}a.appendChild(p)}t.appendChild(a)}}}function o(e,t,i,a,n){i||(i=!1),a||(a=!1);var r=document.createElement("div"),o=document.createElement("input"),l=document.createElement("label");return r.id=e,r.className="bz-checkbox",r.setAttribute("bz-root",i),r.setAttribute("bz-leaf",a),i&&r.setAttribute("bz-index",n),o.className="bz-checkbox__input",l.className="bz-checkbox__label",o.type="checkbox",l.innerText=t,r.onclick=function(){var e=this.getElementsByClassName("bz-checkbox__input")[0],t=this.parentElement.getElementsByTagName("ul"),i=[],a=this.id.split(".")[0],n=document.getElementById(a).getAttribute("bz-index"),r=this.id.substring(0,this.id.length-this.innerText.length-1);if(t.length>0&&(i=t[0].getElementsByClassName("bz-checkbox__input")),null===e.getAttribute("checked")){for(var o=this.id.split("."),l="",s=0;s<o.length;s++){l+=o[s],(u=document.getElementById(l)).getElementsByClassName("bz-checkbox__input")[0].setAttribute("checked","checked"),"true"!=u.getAttribute("bz-root")&&(_biz_globalsTableau.selectedEntities[n]||(_biz_globalsTableau.selectedEntities[n]={}),_biz_globalsTableau.selectedEntities[n][u.id]=1),l+="."}for(s=0;s<i.length;s++){var u=i[s].parentElement;i[s].setAttribute("checked","checked"),"true"!=u.getAttribute("bz-root")&&(_biz_globalsTableau.selectedEntities[n]||(_biz_globalsTableau.selectedEntities[n]={}),_biz_globalsTableau.selectedEntities[n][u.id]=1)}}else{e.removeAttribute("checked"),delete _biz_globalsTableau.selectedEntities[n][this.id];for(s=0;s<i.length;s++){l=i[s].parentElement.id;i[s].removeAttribute("checked"),delete _biz_globalsTableau.selectedEntities[n][l]}"true"==this.getAttribute("bz-root")?delete _biz_globalsTableau.selectedEntities[n]:function(e,t,i){var a=document.getElementById(t),n=a.parentElement.getElementsByTagName("ul"),r=[];n.length>0&&(r=n[0].getElementsByClassName("bz-checkbox__input"));for(var o=!1,l=0;l<r.length;l++){if(null!=r[l].getAttribute("checked")){o=!1;break}o=!0}o&&(a.getElementsByClassName("bz-checkbox__input")[0].removeAttribute("checked"),"true"==a.getAttribute("bz-root")?delete _biz_globalsTableau.selectedEntities[i]:delete _biz_globalsTableau.selectedEntities[i][a.id]);if(e!==t&&0===Object.keys(_biz_globalsTableau.selectedEntities[i]).length){document.getElementById(e).getElementsByClassName("bz-checkbox__input")[0].removeAttribute("checked"),delete _biz_globalsTableau.selectedEntities[i]}}(a,r,n)}},r.appendChild(o),r.appendChild(l),r}function l(e){var t=document.createElement("button");return t.className="bz-btn bz-btn--s tableau-node-expand",t.innerText="+",t.id=e,t.onclick=function(){var e=this.id.substring(4,this.id.length),t=document.getElementById("container-nodes-"+e);t&&("tableau-collapsed"===t.className?(t.className="",this.innerText="-"):(t.className="tableau-collapsed",this.innerText="+"))},t}function s(e){e||(e={entities:_biz_globalsTableau.selectedEntities,processes:_biz_globalsTableau.processByEntity});for(var t=Object.keys(_biz_globalsTableau.selectedEntities),i=0;i<t.length;i++){var a=Object.keys(_biz_globalsTableau.selectedEntities[t[i]]),n=a[0].split(".")[0];(l=document.getElementById(n)).getElementsByClassName("bz-checkbox__input")[0].removeAttribute("checked");for(var r=0;r<a.length;r++){document.getElementById(a[r]).getElementsByClassName("bz-checkbox__input")[0].removeAttribute("checked")}}_biz_globalsTableau.selectedEntities={},_biz_globalsTableau.processByEntity={};var o=Object.keys(e.entities);for(i=0;i<o.length;i++){var l,s=Object.keys(e.entities[o[i]]);n=s[0].split(".")[0];if(l=document.getElementById(n)){var u=l.getAttribute("bz-index");l.getElementsByClassName("bz-checkbox__input")[0].setAttribute("checked","checked"),e.processes[o[i]]&&(_biz_globalsTableau.processByEntity[u]=e.processes[o[i]]);for(r=0;r<s.length;r++){var c=document.getElementById(s[r]);c&&(c.getElementsByClassName("bz-checkbox__input")[0].setAttribute("checked","checked"),_biz_globalsTableau.selectedEntities[u]||(_biz_globalsTableau.selectedEntities[u]={}),_biz_globalsTableau.selectedEntities[u][c.id]=1)}}}}return{loadTreeView:e,loadEntityProcessTable:a,loadResumeConfiguration:function t(n,r){$("#submitButton").click(n),$("#backButton").click((function(){var o=i.bind(this,"bizagi.connector.tableau.tree",e.bind(this,r,!0));if(0===Object.keys(_biz_globalsTableau.processByEntity).length)o();else{var l=i.bind(this,"bizagi.connector.tableau.export",t.bind(this,n,r));i("bizagi.connector.tableau.processTable",a.bind(this,l,o))}}));var o={entities:_biz_globalsTableau.selectedEntities,processes:_biz_globalsTableau.processByEntity};$("#selectConfiguration").click((function(){var e=document.createRange();e.selectNode(document.getElementById("tableau-container-configuration")),window.getSelection().removeAllRanges(),window.getSelection().addRange(e)})),document.getElementById("tableau-container-configuration").innerText=JSON.stringify(o,null,2)},showFailedConnectionMessage:function(){$("#form-client-id").addClass("bz-form-item--error"),$("#form-client-secret").addClass("bz-form-item--error"),document.getElementById("authButton").disabled=!1},disableBtn:t,renderTmpl:i}},BizagiTableau=function(){var e=null,t=new UtilsTableau;function i(i,a){_biz_uiTableau.disableBtn("authButton"),t.setConnectionDataProp("globals","url",e,!0),t.setAuthData("clientId",i),t.setAuthData("clientSecret",a),tableau.phase===tableau.phaseEnum.authPhase?s(tableau.submit):s(u)}function a(){_biz_uiTableau.disableBtn("nextButton");for(var e=_biz_globalsTableau.selectedEntities,t=Object.keys(e),i=!1,r=0;r<t.length;r++){for(var o=_biz_globalsTableau.entities[t[r]],l=Object.keys(e[t[r]]),s=!1,u=0;u<l.length;u++)-1!==l[u].indexOf("@")&&(s=!0,i=!0);s&&!_biz_globalsTableau.processByEntity[t[r]]?_biz_globalsTableau.processByEntity[t[r]]=o.processesRelated[0].id:s||delete _biz_globalsTableau.processByEntity[t[r]]}var c=Object.keys(_biz_globalsTableau.processByEntity);for(r=0;r<c.length;r++){(o=_biz_globalsTableau.selectedEntities[c[r]])||delete _biz_globalsTableau.processByEntity[c[r]]}var d=_biz_uiTableau.renderTmpl.bind(this,"bizagi.connector.tableau.tree",_biz_uiTableau.loadTreeView.bind(this,a,!0)),g=_biz_uiTableau.renderTmpl.bind(this,"bizagi.connector.tableau.export",_biz_uiTableau.loadResumeConfiguration.bind(this,n,a));i?_biz_uiTableau.renderTmpl("bizagi.connector.tableau.processTable",_biz_uiTableau.loadEntityProcessTable.bind(this,g,d)):g()}function n(){for(var e=Object.keys(_biz_globalsTableau.selectedEntities),i=0;i<e.length;i++){var a=_biz_globalsTableau.entities[e[i]],n=Object.keys(_biz_globalsTableau.selectedEntities[e[i]]),r=[],o=null,l=!1;r.push("BizagiId");for(var s=0;s<n.length;s++)r.push(n[s].substring(a.name.length+1,n[s].length)),-1!==n[s].indexOf("@")&&(l=!0,showNextStep=!0);l&&(o=_biz_globalsTableau.processByEntity[e[i]]),t.setConnectionDataProp("entities",a.name,{entityIndex:e[i],queryByProcess:l,processId:o,attribs:r})}tableau.connectionData=JSON.stringify(_biz_globalsTableau.connectionData),tableau.submit()}function r(e){for(var t=[],i=0;i<e.length;i++)t.push({id:d(e[i]),dataType:tableau.dataTypeEnum.string});return t}function o(e,t){t||(t=0);var i=$.Deferred();e.deferred=i,l(e),$.when(i).done((function(){e.doneCallback()})).fail((function(i){c(i,t+1,o.bind(this,e,t+1))}))}function l(e){var i=t.getConnectionData(),a=t.getAuthData(),n=e.table.tableInfo.id,r=i.entities[n].attribs;$.ajax({type:"POST",url:e.url,dataType:"json",data:e.bodyRequest,beforeSend:function(e){e.setRequestHeader("Authorization","Bearer "+a.accessToken)},success:function(t){for(var i=t.value,a=0;a<i.length;a++){for(var n={},o=0;o<r.length;o++){var l=d(r[o]),s=r[o];if("@"===s[0]){var u=s[1].toLowerCase();s=u+(s=s.substring(2,s.length))}n[l]=i[a][s]}_biz_globalsTableau.dataRows.push(n)}i.length>0?(tableau.reportProgress("Bizagi status: "+_biz_globalsTableau.dataRows.length+" of "+t["@odata.totalCount"]+" records"),e.deferred.resolve(t["@odata.totalCount"])):e.deferred.resolve(0)},error:function(t){e.deferred.reject(t)}})}function s(e){var i=tableau.phase===tableau.phaseEnum.interactivePhase?_biz_globalsTableau.connectionData:t.getConnectionData(),a=t.getAuthData();$.ajax({type:"POST",url:i.globals.url+"/oauth2/server/token",contentType:"application/x-www-form-urlencoded",data:"grant_type=client_credentials&scope=api",dataType:"json",beforeSend:function(e){e.setRequestHeader("Authorization","Basic "+btoa(a.clientId+":"+a.clientSecret))},success:function(i){i.access_token?(t.setAuthData("accessToken",i.access_token),void 0!==e&&"function"==typeof e&&e()):(_biz_uiTableau.showFailedConnectionMessage(),tableau.log("Bizagi Error: "+JSON.stringify(i)),tableau.abortForAuth("Bizagi Error: Wrong credentials"))},error:function(e){_biz_uiTableau.showFailedConnectionMessage(),tableau.log("Bizagi Error: "+JSON.stringify(e)),401===e.status?tableau.abortForAuth("Bizagi Error: Wrong credentials"):tableau.abortWithError("Bizagi Error: See log for details")}})}function u(e){e||(e=0);var i=_biz_globalsTableau.connectionData,n=t.getAuthData();$.ajax({type:"GET",url:i.globals.url+"/odata/query/entity?$orderby=name&$filter=type eq 'Master'",dataType:"json",beforeSend:function(e){e.setRequestHeader("Authorization","Bearer "+n.accessToken)},success:function(e){var t=e.value;t.length>0&&(_biz_globalsTableau.entities=t),_biz_uiTableau.renderTmpl("bizagi.connector.tableau.tree",_biz_uiTableau.loadTreeView.bind(this,a))},error:function(t){c(t,e+1,u.bind(this,e+1))}})}function c(e,t,i){if(console.log(t),401===e.status&&t<3)s(i);else{tableau.log("Bizagi Retry Error: "+JSON.stringify(e)),tableau.log("Number of retries: "+t);var a=e.responseJSON?e.responseJSON.message:"See log for details";tableau.abortWithError("Bizagi Error: "+a)}}function d(e){return e.replace(/ /g,"_").replace(/"/g,"_doublequote_").replace(/,/g,"_comma_").replace(/=/g,"_equal_").replace(/\//g,"_fslash_").replace(/-/g,"_dash_").replace(/\./g,"_dot_").replace(/[^A-Za-z0-9_]/g,"_")}return{buildConnector:function(){if(!t.isNewWebEngine()&&(window.tableauVersionBootstrap&&window._tableau.triggerInitialization(),!window.tableauVersionBootstrap)){var e=window.document.createEvent("Event");e.initEvent("DOMContentLoaded",!0,!0),window.document.dispatchEvent(e)}$("#authButton").click((function(){i($("#clientId").val(),$("#clientSecret").val())}))},connect:i,getSchema:function(e){for(var i=t.getConnectionData().entities,a=Object.keys(i),n=[],o="",l=0;l<a.length;l++)o=d(a[l]),n.push({id:o,alias:o,columns:r(i[a[l]].attribs)});e(n)},getData:function e(i,a,n){n||(n=0);var r=t.getConnectionData(),s=i.tableInfo.id,u=r.entities[s],d=u.attribs,g=r.globals.url+"/odata/query/executeEntityQuery",p={queryParameter:{entity:s,xpaths:[]}};u.queryByProcess&&(p.queryParameter.processId=u.processId);for(var b=0;b<d.length;b++)"BizagiId"!==d[b]&&p.queryParameter.xpaths.push({xpath:d[b]});_biz_globalsTableau.dataRows=[];var f=$.Deferred();l({url:g+"?$top="+t.ITEMS_PAGE,table:i,bodyRequest:p,deferred:f}),$.when(f).done((function(e){for(var n=t.calculateNumOfPages(e)-1,r=function(e,t,i){var a=0;return function(){if(a++,0===i||i===a)return e.appendRows(_biz_globalsTableau.dataRows),t()}}(i,a,n),l=1;l<=n;l++){var s="?$skip="+l*t.ITEMS_PAGE+"&$top="+t.ITEMS_PAGE;o({url:g+s,table:i,bodyRequest:p,doneCallback:r})}if(0===n)r();else if(-1===n)return a()})).fail((function(t){c(t,n+1,e.bind(this,i,a,n+1))}))},setApplicationUrl:function(t){e=t},getApplicationUrl:function(){return e}}},UtilsTableau=function(){function e(){try{return JSON.parse(tableau.password)}catch(e){return tableau.log("[Exception] Error parsing auth data: "+e),tableau.log("[Data] Error parsing auth data: "+tableau.password),tableau.abortWithError("Error: problem parsing authentication data. See log for details."),{clientId:"",clientSecret:"",accessToken:""}}}return{setAuthData:function(t,i){var a={clientId:"",clientSecret:"",accessToken:""};tableau.password&&(a=e()),a[t]=i,tableau.password=JSON.stringify(a)},setConnectionDataProp:function(e,t,i,a){a||(a=!1),a&&(_biz_globalsTableau.connectionData={globals:{},entities:{}}),t||i?t?_biz_globalsTableau.connectionData[e][t]=i:_biz_globalsTableau.connectionData[e]=i:_biz_globalsTableau.connectionData[e]={}},calculateNumOfPages:function(e){var t=Math.floor(e/50);return e%50>0&&t++,t},getConnectionData:function(){try{return JSON.parse(tableau.connectionData)}catch(e){return tableau.log("[Exception] Error parsing connection data: "+e),tableau.log("[Data] Error parsing connection data: "+tableau.connectionData),tableau.abortWithError("Error: problem parsing connection data. See log for details."),{globals:{},entities:{}}}},getAuthData:e,isNewWebEngine:function(){if(tableau.platformVersion){var e=tableau.platformVersion.split(".");return 2019===parseInt(e[0])&&parseInt(e[1])>=4||parseInt(e[0])>2019}return!1},ITEMS_PAGE:50}},GlobalsTableau=function(){return{entities:[],selectedEntities:{},dataRows:[],processByEntity:{},connectionData:{globals:{},entities:{}}}};!function(){_biz_uiTableau=new UITableau,_biz_globalsTableau=new GlobalsTableau,_biz_bizagiTableau=new BizagiTableau,_deferredInitUi=$.Deferred(),_deferredInitWDC=$.Deferred();var e=tableau.makeConnector();e.init=function(e){tableau.authType=tableau.authTypeEnum.custom,e(),_deferredInitWDC.resolve()},e.getSchema=_biz_bizagiTableau.getSchema,e.getData=_biz_bizagiTableau.getData,tableau.registerConnector(e),$.when(_deferredInitUi,_deferredInitWDC).done((function(){if((tableau.phase===tableau.phaseEnum.authPhase||tableau.phase===tableau.phaseEnum.interactivePhase)&&tableau.connectionData){var e=new UtilsTableau;if(e.getConnectionData().globals.url===_biz_bizagiTableau.getApplicationUrl()&&tableau.password){var t=e.getAuthData();$("#clientId").val(t.clientId),$("#clientSecret").val(t.clientSecret),_biz_bizagiTableau.connect($("#clientId").val(),$("#clientSecret").val())}}}))}();
//# sourceMappingURL=../../../../Maps/desktop/tableau.desktop.production.js.map
