function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}/*! jQRangeSlider 5.4.0 - 2013-09-16 - Copyright (C) Guillaume Gautreau 2012 - MIT and GPLv3 licenses.*/function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}
/*! */function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(t){var e=t.makeArray,i=t.isArray,n=t.isFunction,s=t.extend,r=t.String,o=t.each,a=Array.prototype.slice,h=function(e,i,s,r){return r?function(e,i,s,r){var o=e.delegate&&e.undelegate?e:t(n(e)?[e]:e);return o.delegate(i,s,r),function(){o.undelegate(i,s,r),o=e=s=r=i=null}}(e,r,i,s):function(e,i,s){var r,o=e.bind&&e.unbind?e:t(n(e)?[e]:e);return 0===i.indexOf(">")&&(i=i.substr(1),r=function(t){t.target===e&&s.apply(this,arguments)}),o.bind(i,r||s),function(){o.unbind(i,r||s),e=i=s=r=null}}(e,i,s)},l=function(e,i){var n="string"==typeof i?e[i]:i;return function(){return e.called=i,n.apply(e,[this.nodeName?t(this):this].concat(a.call(arguments,0)))}},c=/\./g,d=/_?controllers?/gi,u=function(t){return r.underscore(t.replace("jQuery.","").replace(c,"_").replace(d,""))},p=/[^\w]/,f=/\{([^\}]+)\}/g,g=/^(?:(.*?)\s)?([\w\.\:>]+)$/,m=function(e,i){return t.data(e,"controllers",i)};t.Class("jQuery.Controller",{setup:function(){if(this._super.apply(this,arguments),this.shortName&&"jQuery.Controller"!=this.fullName){this._fullName=u(this.fullName),this._shortName=u(this.shortName);var i,s=this,r=this.pluginName||this._fullName;for(i in t.fn[r]||(t.fn[r]=function(t){var i=e(arguments),o="string"==typeof t&&n(s.prototype[t]),a=i[0];return this.each((function(){var t=m(this),e=t&&t[r];e?o?e[a].apply(e,i.slice(1)):e.update.apply(e,i):s.newInstance.apply(s,[this].concat(i))}))}),this.actions={},this.prototype)"constructor"!=i&&n(this.prototype[i])&&this._isAction(i)&&(this.actions[i]=this._action(i))}},hookup:function(t){return new this(t)},_isAction:function(e){return!!p.test(e)||(t.inArray(e,this.listensTo)>-1||t.event.special[e]||v[e])},_action:function(t,e){if(f.lastIndex=0,!e&&f.test(t))return null;var n=e?r.sub(t,[e,window]):t,s=i(n),o=(s?n[1]:n).match(g),a=o[2];return{processor:v[a]||y,parts:o,delegate:s?n[0]:void 0}},processors:{},listensTo:[],defaults:{}},{setup:function(e,i){var n=this.constructor;e=e.jquery?e[0]:e;var r=n.pluginName||n._fullName;return this.element=t(e).addClass(r),(m(e)||m(e,{}))[r]=this,this.options=s(s(!0,{},n.defaults),i),this.called="init",this.bind(),this.element},bind:function(e,i,n){if(void 0===e){this._bindings=[];var s=this.constructor,r=this._bindings,o=s.actions,a=this.element;for(funcName in o)o.hasOwnProperty(funcName)&&(ready=o[funcName]||s._action(funcName,this.options),r.push(ready.processor(ready.delegate||a,ready.parts[2],ready.parts[1],funcName,this)));var h=l(this,"destroy");return a.bind("destroyed",h),r.push((function(e){t(e).unbind("destroyed",h)})),r.length}return"string"==typeof e&&(n=i,i=e,e=this.element),this._binder(e,i,n)},_binder:function(t,e,i,n){return"string"==typeof i&&(i=l(this,i)),this._bindings.push(h(t,e,i,n)),this._bindings.length},_unbind:function(){var t=this.element[0];o(this._bindings,(function(e,i){i(t)})),this._bindings=[]},delegate:function(t,e,i,n){return"string"==typeof t&&(n=i,i=e,e=t,t=this.element),this._binder(t,i,n,e)},update:function(t){s(this.options,t),this._unbind(),this.bind()},destroy:function(){if(this._destroyed)throw this.constructor.shortName+" controller already deleted";var e=this.constructor.pluginName||this.constructor._fullName;this._destroyed=!0,this.element.removeClass(e),this._unbind(),delete this._actions,delete this.element.data("controllers")[e],t(this).triggerHandler("destroyed"),this.element=null},find:function(t){return this.element.find(t)},_set_called:!0});var v=t.Controller.processors,y=function(t,e,i,n,s){return h(t,e,l(s,n),i)};o("change click contextmenu dblclick keydown keyup keypress mousedown mousemove mouseout mouseover mouseup reset resize scroll select submit focusin focusout mouseenter mouseleave".split(" "),(function(t,e){v[e]=y}));var b,w=function(t,e){for(b=0;b<e.length;b++)if("string"==typeof e[b]?t.constructor._shortName==e[b]:t instanceof e[b])return!0;return!1};t.fn.extend({controllers:function(){var i,n,s,r=e(arguments),o=[];return this.each((function(){for(s in i=t.data(this,"controllers"),i)i.hasOwnProperty(s)&&(n=i[s],r.length&&!w(n,r)||o.push(n))})),o},controller:function(t){return this.controllers.apply(this,arguments)[0]}})}(jQuery),bizagi.reporting=void 0!==bizagi.reporting?bizagi.reporting:{},bizagi.reporting.services=void 0!==bizagi.reporting.services?bizagi.reporting.services:{},bizagi.reporting.services.reporting=[],bizagi.reporting.services.getEndPoints=function(t){var e={"bam-process-loadanalysis":t.proxyPrefix+"Rest/Reports/BAM/Process/LoadAnalysis","bam-process-casestatus":t.proxyPrefix+"Rest/Reports/BAM/Process/CaseStatus","bam-process-casesgoingoverdue":t.proxyPrefix+"Rest/Reports/BAM/Process/CasesGoingOverdue","bam-task-taskgoingoverdue":t.proxyPrefix+"Rest/Reports/BAM/Task/TaskGoingOverdue","bam-task-loadanalysis":t.proxyPrefix+"Rest/Reports/BAM/Task/LoadAnalysis","bam-task-taskstatus":t.proxyPrefix+"Rest/Reports/BAM/Task/TaskStatus","bam-resourcemonitor-workinprogress":t.proxyPrefix+"Rest/Reports/BAM/Resources/Task","bam-resourcemonitor-workinprogressuser":t.proxyPrefix+"Rest/Reports/BAM/Resources/User","analytics-process-cycletime":t.proxyPrefix+"Rest/Reports/Analytics/Process/CycleTime","analytics-process-activitysummary":t.proxyPrefix+"Rest/Reports/Analytics/Process/ActivitySummary","analytics-process-activitytrend":t.proxyPrefix+"Rest/Reports/Analytics/Process/ActivityTrend","analytics-process-durationhistogram":t.proxyPrefix+"Rest/Reports/Analytics/Process/DurationHistogram","analytics-process-activationranking":t.proxyPrefix+"Rest/Reports/Analytics/Process/ActivationRanking","analytics-process-frecuentspaths":t.proxyPrefix+"Rest/Reports/Analytics/Process/FrequentPaths","analytics-task-cycletime":t.proxyPrefix+"Rest/Reports/Analytics/Task/CycleTime","sensors-list":t.proxyPrefix+"Rest/Reports/Sensors","sensors-updatecounter":t.proxyPrefix+"Rest/Reports/Sensors/Counter","sensors-addcounter":t.proxyPrefix+"Rest/Reports/Sensors/Counter","sensors-deletecounter":t.proxyPrefix+"Rest/Reports/Sensors/Counter","sensors-addstopwatch":t.proxyPrefix+"Rest/Reports/Sensors/Stopwatch","sensors-updatestopwatch":t.proxyPrefix+"Rest/Reports/Sensors/Stopwatch","sensors-deletestopwatch":t.proxyPrefix+"Rest/Reports/Sensors/Stopwatch","sensors-getdimensionslist":t.proxyPrefix+"Rest/Reports/Components/SensorDimensionsList","sensors-counter-summary":t.proxyPrefix+"Rest/Reports/Sensors/Process/CounterSummary","sensors-counterview-acttrend":t.proxyPrefix+"Rest/Reports/Sensors/CounterTrend","sensors-stopwatch-cycletimesummary":t.proxyPrefix+"Rest/Reports/Sensors/StopwatchSummary","sensors-stopwatch-lvservicesummary":t.proxyPrefix+"Rest/Reports/Sensors/StopwatchLevelOfService","sensors-stopwatch-durationhistogram":t.proxyPrefix+"Rest/Reports/Sensors/StopwatchDurationHistogram","sensors-stopwatch-durationtrend":t.proxyPrefix+"Rest/Reports/Sensors/StopwatchTrend","sensors-allpaths":t.proxyPrefix+"Rest/Reports/Components/AllPathsFromTask","components-processes":t.proxyPrefix+"Rest/Reports/Components/Processes","components-dimensions":t.proxyPrefix+"Rest/Reports/Components/DimensionsList","components-dimensions-system":t.proxyPrefix+"Rest/Reports/Components/SystemDimensionsList","components-dimensions-items":t.proxyPrefix+"Rest/Reports/Components/DimensionItems","components-processesversion":t.proxyPrefix+"Rest/Reports/Components/ProcessesVersion","components-processesversion-includeembedded":t.proxyPrefix+"Rest/Reports/Components/ProcessesVersion/IncludeEmbedded","process-definition":t.proxyPrefix+"Rest/Reports/Components/ProcessDefinition","process-graphicinfo":t.proxyPrefix+"Rest/Reports/Components/ProcessGraphicInfo","customreports-loaduserquery":t.proxyPrefix+"Rest/Reports/AnalysisQueries/Load","customreports-savequery":t.proxyPrefix+"Rest/Reports/AnalysisQueries","reports-exporttoexcel":t.proxyPrefix+"Rest/Reports/ReportToExcel","reports-detaillist":t.proxyPrefix+"Rest/Reports/caseList","reports-detaillist-exporttoexcel":t.proxyPrefix+"Rest/Reports/caseListToExcel","reports-detaillist-caseaccess":t.proxyPrefix+"Rest/Reports/caseAccess","processviewer-processdefinition":t.proxyPrefix+"Rest/Reports/Components/ProcessDefinition","processviewer-processgraphicinfo":t.proxyPrefix+"Rest/Reports/Components/ProcessGraphicInfo"};return t.proxy&&t.proxy.length>0?$.each(e,(function(i,n){e[n]=t.proxy+i})):e},$.Controller.extend("bizagi.reporting.observer",{},{init:function(){this.observableElement=$({})},subscribe:function(){this.observableElement.bind.apply(this.observableElement,arguments)},unsubscribe:function(){this.observableElement.unbind.apply(this.observableElement,arguments)},publish:function(){this.observableElement.triggerHandler.apply(this.observableElement,arguments)}}),$.Class.extend("bizagi.reporting.services.context",{},{init:function(t){this.endPoints=bizagi.reporting.services.getEndPoints(t),this.proxyPrefix=bizagi.util.isEmpty(t.proxyPrefix)?"":t.proxyPrefix},getUrl:function(t){return null==this.endPoints[t]&&alert("No endpoint defined for: "+t),this.endPoints[t]}}),$.Class.extend("bizagi.reporting.services.service",{},{init:function(t){(t=t||{}).proxyPrefix=bizagi.util.isEmpty(t.proxyPrefix)?"":t.proxyPrefix,t.proxyPrefix=this.normalizeUrl(t.proxyPrefix),this.device=bizagi.util.detectDevice(),this.serviceLocator=new bizagi.reporting.services.context(t)},getUrl:function(t){return this.serviceLocator.getUrl(t)},normalizeUrl:function(t){return""!=t&&("/"!=t[t.length-1]&&(t=t.concat("/")),-1==t.indexOf("http://")&&-1==t.indexOf("https://")&&(t="http://"+t)),t},getBAMProcessAnalysisData:function(t){return $.read(this.getUrl("bam-process-loadanalysis"))},getProcessList:function(t){return $.read({url:this.getUrl("components-processes")})},getDimensionsList:function(t){return $.create(this.getUrl("components-dimensions"),t)},getCaseStatus:function(t){return $.create(this.getUrl("bam-process-casestatus"),t)},getCasesGoingOverdue:function(t){return $.create(this.getUrl("bam-process-casesgoingoverdue"),t)},getTaskStatus:function(t){return $.create(this.getUrl("bam-task-taskstatus"),t)},getTaskGoingOverdue:function(t){return $.create(this.getUrl("bam-task-taskgoingoverdue"),t)},getDimensionsItems:function(t){return $.create(this.getUrl("components-dimensions-items"),t)},getTaskLoadAnalysis:function(t){return $.create(this.getUrl("bam-task-loadanalysis"),t)},getCycleTime:function(t){return $.create(this.getUrl("analytics-process-cycletime"),t)},getProcessActivitySummary:function(t){return $.create(this.getUrl("analytics-process-activitysummary"),t)},getProcessActivityTrend:function(t){return $.create(this.getUrl("analytics-process-activitytrend"),t)},getProcessVersionList:function(t){return $.read(this.getUrl("components-processesversion"))},getProcessVersionListIncludeEmbedded:function(){return $.read(this.getUrl("components-processesversion-includeembedded"))},getDurationHistogram:function(t){return $.create(this.getUrl("analytics-process-durationhistogram"),t)},getActivationRanking:function(t){return $.create(this.getUrl("analytics-process-activationranking"),t)},getProcessDefinition:function(t){var e="processId="+t;return $.read(this.getUrl("process-definition"),e)},getProcessGraphicInfo:function(t){var e="processId="+t;return $.read(this.getUrl("process-graphicinfo"),e)},getFrecuentsPaths:function(t){return $.create(this.getUrl("analytics-process-frecuentspaths"),t)},getTaskCycleTime:function(t){return $.create(this.getUrl("analytics-task-cycletime"),t)},getResourceMonitorWorkInProgress:function(t){return $.create(this.getUrl("bam-resourcemonitor-workinprogress"),t)},getResourceMonitorWorkInProgressPerUser:function(t){return $.create(this.getUrl("bam-resourcemonitor-workinprogressuser"),t)},getSensorsList:function(){return $.read(this.getUrl("sensors-list"))},updateCounter:function(t){return $.update(this.getUrl("sensors-updatecounter"),t)},addCounter:function(t){return $.create(this.getUrl("sensors-addcounter"),t)},deleteCounter:function(t){return $.destroy(this.getUrl("sensors-deletecounter")+"?"+t)},addStopwatch:function(t){return $.create(this.getUrl("sensors-addstopwatch"),t)},updateStopwatch:function(t){return $.update(this.getUrl("sensors-updatestopwatch"),t)},deleteStopwatch:function(t){return $.destroy(this.getUrl("sensors-deletestopwatch")+"?"+t)},getSensorsDimensions:function(t){return $.create(this.getUrl("sensors-getdimensionslist"),t)},getCounterSummary:function(t){return $.create(this.getUrl("sensors-counter-summary"),t)},getCounterTrend:function(t){return $.create(this.getUrl("sensors-counterview-acttrend"),t)},getCycleTimeSummary:function(t){return $.create(this.getUrl("sensors-stopwatch-cycletimesummary"),t)},getLvSeviceSummary:function(t){return $.create(this.getUrl("sensors-stopwatch-lvservicesummary"),t)},getSwDurationHistogram:function(t){return $.create(this.getUrl("sensors-stopwatch-durationhistogram"),t)},getSwDurationTrend:function(t){return $.create(this.getUrl("sensors-stopwatch-durationtrend"),t)},getAllPaths:function(t){return $.get(this.getUrl("sensors-allpaths"),t)},getDetailList:function(t){return $.create(this.getUrl("reports-detaillist"),t)},getSystemDimensions:function(){return $.read(this.getUrl("components-dimensions-system"))},customReportsLoadUserQuery:function(){return $.create(this.getUrl("customreports-loaduserquery"))},customReportsSaveQuery:function(t){return $.create(this.getUrl("customreports-savequery"),t)},getExportExcelUrl:function(t){return encodeURI(this.getUrl("reports-exporttoexcel")+"?"+t)},exportToExcel:function(t){var e=encodeURI(this.getUrl("reports-exporttoexcel")+"?"+t);"desktop"!==this.device?window.parent.open(e,"_system","location=yes"):window.open(e,"_blank","location=yes")},exportDetailList:function(t,e,i){var n=encodeURI(this.getUrl("reports-detaillist-exporttoexcel"));if("desktop"!==this.device);else{var s=[{name:"filters",value:t.split("=").pop()},{name:"user",value:e},{name:"xsrf",value:i}];bizagi.util.downloadFileByPOST(n,s)}},checkCaseAccess:function(t){return $.read(this.getUrl("reports-detaillist-caseaccess"),t)},processDefinition:function(t){return $.read(this.getUrl("processviewer-processdefinition"),t)},graphicInfo:function(t){return $.read(this.getUrl("processviewer-processgraphicinfo"),t)}}),bizagi.reporting.observer.extend("bizagi.reporting.component.controller",{init:function(t){this._super(),this.properties={},this.tmpl={},this.pstDeferred=$.Deferred(),this.canvas=t,this.device=bizagi.util.detectDevice(),this.resources=bizagi.localization},loadTemplate:function(t,e){var i=this,n=new $.Deferred;return i.tmpl[t]?(n.resolve(),n.promise()):bizagi.templateService.getTemplate(e).done((function(e){i.tmpl[t]=e}))},loadTemplates:function(t){var e=this,i=new $.Deferred,n=[];return $.each(t,(function(t,i){var s=e.loadTemplate(t,i);n.push(s)})),$.when.apply($,n).done((function(){i.resolve()})),i.promise()},getTemplate:function(t){return this.tmpl[t]?this.tmpl[t]:null},render:function(t){var e=this,i=$.Deferred();return t=t||{},e.options=$.extend(e.options,t.options),$.when(e.internalRender()).done((function(t){e.content=t,e.canvas.empty(),e.canvas.append(e.content),e.postRender(t)})),i},internalRender:function(){var t=this;return $.when(t.loadTemplates()).pipe((function(){return t.renderComponent()}))},renderComponent:function(){bizagi.mustImplement("renderComponent")},getResource:function(t){return this.resources.getResource(t)},resolvePostRender:function(){this.pstDeferred.resolve()}}),bizagi.reporting.component.controller("bizagi.reporting.component.processfilter",{init:function(t,e){e=e||{},this._super(t),this.processes=e.model.processes,this.process=this.setDefaultProcess(e.process),this.render()},loadTemplates:function(){var t={processfilter:bizagi.getTemplate("bizagi.reporting.component.processfilter")+"#bz-rp-filters-process"};return this._super(t)},renderComponent:function(){var t=this.getTemplate("processfilter");return $.tmpl(t,this.model)},postRender:function(t){var e=this;$.when(e.renderCombo(t)).done((function(){e.resolvePostRender()}))},setDefaultProcess:function(t){var e=[];return this.processes.length&&(e=$.isEmptyObject(t)?{process:{id:this.processes[0].id,guid:this.processes[0].guid}}:{process:t}),e},renderCombo:function(t){var e=this,i=e.getDataSourceForCombos(),n=$(t),s=$.Deferred();return n.uicombo({data:i,onChange:function(t){var i=t.ui.data("value");e.setProcess(i),e.publish("filterbyprocess",e.process)},onComplete:function(){s.resolve()},itemValue:function(t){return t.id},itemText:function(t){return t.name},initValue:i.dft}),s},getProcessId:function(){return this.process.process.id},setProcess:function(t){this.process.process={id:parseInt(t)}},getDataSourceForCombos:function(){for(var t={combo:[],label:this.getResource("bz-rp-components-process-label"),dft:0},e=0,i=this.processes.length;e<i;e++)t.combo.push(this.processes[e]),this.processes[e].id===this.process.process.id&&(t.dft=this.processes[e]);return t}}),bizagi.reporting.component.controller("bizagi.reporting.component.dimensionfilter",{init:function(t,e,i){i=i||{},this._super(t),this.model={},this.modal=[],this.srvActions=i.srvActions,this.services=e,this.process=i.process,this.dimensions=[],this.defaults=i.dftDimensions||[],this.dimension=[],this.edit=!1,this.editionList=[],this.load=!0,this.render()},loadTemplates:function(){var t={dimension:bizagi.getTemplate("bizagi.reporting.component.dimensionfilter")+"#bz-rp-filters-dimension","dimension-dialog":bizagi.getTemplate("bizagi.reporting.component.dimensionfilter")+"#bz-rp-filters-dimension-dialog","dimension-pills-wrapper":bizagi.getTemplate("bizagi.reporting.component.dimensionfilter")+"#bz-rp-filters-dimension-pills-wrapper","dimension-container":bizagi.getTemplate("bizagi.reporting.component.dimensionfilter")+"#bz-rp-filters-dimension-container"};return this._super(t)},setInitialDimension:function(){var t=this.model.dimensions[0].id||0,e=this.model.dimensions[0].guid,i=this.model.dimensions[0].type,n=this.model.dimensions[0].name;this.dimension={processId:this.process.process.id,guid:e,id:t,name:this.getResource(n),type:i}},renderComponent:function(){var t=this.getTemplate("dimension"),e=$.tmpl(t);return this.defaults.length&&this.setDefaults(),e},refresh:function(t){this.dimension.processId=t.process.id,this.process=t,this.removeAllDimensions(),this.checkPills(),this.load=!0},postRender:function(){this.resolvePostRender(),this.eventHandlers()},appendModal:function(){if(!this.modal.length){var t=this.getTemplate("dimension-container");this.modal=$.tmpl(t),this.modal.appendTo("body")}},setDefaults:function(){var t=this,e=t.defaults,i=e.length;$.when(t.loadDimensions()).done((function(){for(var n=0;n<i;n++){var s=!!e[n].includeEmptyValues,r=t.model.dimensions.filter((function(t,i){var s=t.id===e[n].id&&t.type===e[n].type&&t.id>0,r=t.guid===e[n].guid&&t.type===e[n].type&&null!=t.guid&&null!=t.guid;return s||r}));t.dimensions.push({id:r[0].id||0,guid:r[0].guid,name:t.getResource(r[0].name),values:e[n].values,type:r[0].type,includeEmptyValues:s}),t.buildPills({isNew:!0,position:[n]}),t.checkPills()}}))},renderDialog:function(t){var e=this,i=new $.Deferred,n=e.getResource("bz-rp-components-dimension-dimensions-label");return t.dialog({resizable:!1,modal:!0,title:n,dialogClass:"bz-rp-dialog",draggable:!1,appendTo:e.modal,maximize:!1,width:"50%",open:function(){var t=.5*window.innerHeight,e=(window.innerHeight-t)/3;$(this).closest(".ui-dialog-content").css("maxHeight",t),$(this).parent(".bz-rp-dialog").css("top",e),i.resolve()},close:function(){$(this).remove()},buttons:[{text:e.getResource("workportal-general-button-label-apply"),click:function(){e.applyDimensionsFilter(),$(this).dialog("close")}},{text:e.getResource("render-form-dialog-box-close"),click:function(){$(this).dialog("close")}}]}),i},renderDescription:function(){var t=this,e=t.model.dimensions.filter((function(e,i){return t.dimension.id||0===t.dimension.id?e.guid===t.dimension.guid:e.id===t.dimension.id}));e.length>0?$("#bz-rp-filters-dimension-description p",t.modal).html(t.getResource(e[0].description)):$("#bz-rp-filters-dimension-description p",t.modal).html("")},renderDimensions:function(){var t=this,e=t.getComboDataSource();$combo=$("#bz-rp-filters-dimension-list",t.modal),$combo.uicombo({data:e,disabled:t.edit,onChange:function(e){var i=e.ui.data("value").split("/");t.dimension.id=i[0]||0,t.dimension.name=i[1],t.dimension.type=i[2],t.dimension.guid=i[3],t.renderDescription(),$.when(t.getDimensionItems()).done((function(e){t.escapeQuotes(e),t.resetTabs(),t.refreshSearch(e.items),t.refreshTree(e.items)}))},itemValue:function(t){return t.id+"/"+t.name+"/"+t.type+"/"+t.guid},itemText:function(t){return t.name},initValue:e.combo[e.dft]})},resetTabs:function(){var t=this.tabs.tabs("option","disabled");t&&t.length>0&&(this.tabs.tabs("enable"),this.tabs.tabs({active:0}))},escapeQuotes:function(t){t&&t.items&&t.items.length>0&&t.items.map((function(t){t.name&&(t.name=bizagi.replaceAll(t.name,'\\"','"'))}))},renderTree:function(t){if(t&&t.length>200)$("#bz-rp-filters-dimension-tree",this.modal).treeview({list:[],itemValue:function(t){return t.id+"/"+t.subtype+"/"+t.guid},itemText:function(t){return t.name}}),this.tabs.tabs({active:1}),this.tabs.tabs("disable",0);else{var e=this.getTreeviewDataSource(t);$("#bz-rp-filters-dimension-tree",this.modal).treeview({list:e,itemValue:function(t){return t.id+"/"+t.subtype+"/"+t.guid},itemText:function(t){return t.name}})}},getDimensionItems:function(){var t="dimension="+JSON.stringify(this.dimension);return $.when(this.services.getDimensionsItems(t))},renderSearch:function(t){$("#bz-rp-filters-dimension-search",this.modal).bizagi_multiSelect({list:t,itemValue:function(t){return t.id+"/"+t.subtype+"/"+t.guid},itemText:function(t){return t.name},label:this.getResource("bz-rp-components-dimension-search-label")})},refreshSearch:function(t){$("#bz-rp-filters-dimension-search",this.modal).bizagi_multiSelect("setList",t)},refreshTree:function(t){var e;if(t&&t.length>200)(e=$("#bz-rp-filters-dimension-tree",this.modal)).treeview("setList",[]),this.tabs.tabs({active:1}),this.tabs.tabs("disable",0);else{e=$("#bz-rp-filters-dimension-tree",this.modal);var i=this.getTreeviewDataSource(t);e.treeview("setList",i)}},applyDimensionsFilter:function(){var t=$("#bz-rp-filters-dimension-search",this.modal),e=$("#bz-rp-filters-dimension-tree",this.modal),i=t.bizagi_multiSelect("getDataItems"),n=e.treeview("getDataItems"),s=$("#bz-rp-filters-dimension-nulls input",this.modal).prop("checked"),r=this.uniqueKeys(i,n,"value");if(r.length||this.edit||s){var o=this.buildDimensions(r,s),a=this.dimensions[o.position[0]];a.values.length||a.includeEmptyValues?this.buildPills(o):this.removeDimension(o.position),this.executeFilters()}},uniqueKeys:function(t,e,i){for(var n={},s=[].concat(t).concat(e),r=0,o=s.length;r<o;r++)n[s[r][i]]=s[r];if(s=new Array,"value"==i)for(y in n)data=n[y].value.split("/"),s.push({id:data[0],subType:data[1],name:n[y].text});else for(y in n)s.push(n[y]);return s},buildDimensions:function(t,e){var i=this.dimension.id,n=this.dimension.guid,s=!0,r=this.dimension.type,o=this.dimension.name,a={id:i,guid:n,name:o,values:[],type:r,includeEmptyValues:e},h=$.map(this.dimensions,(function(t,e){if("0"==i&&""!=n){if(t.guid==n)return e}else if(t.id==i&&t.type==r&&""==n)return e}));if(h.length){var l=this.dimensions[h[0]];s=!1,a.values=this.edit?t:this.uniqueKeys(t,l.values,"id"),l.values=a.values,l.includeEmptyValues=e}else a.values=t,this.dimensions.push(a),h.push(this.dimensions.length-1);return{isNew:s,position:h}},buildPills:function(t){var e=t.position,i=this.dimensions[e[0]],n="",s=this.getTemplate("dimension-pills-wrapper"),r=this.getPillsWrapper();if(t.isNew)(n=$.tmpl(s,i)).appendTo(r);else{var o=$(".bz-rp-filters-dimensions-pill",r).eq(e[0]);n=$.tmpl(s,i),o.replaceWith(n)}},checkPills:function(){var t=this.getPillsWrapper();$(".bz-rp-filters-dimensions-pill",t).length?t.addClass("bz-rp-filters-dimension-pills"):t.removeClass("bz-rp-filters-dimension-pills")},getPillsWrapper:function(){return $("#reports-canvas").find("#bz-rp-filters-dimension-pills")},getComboDataSource:function(){var t=[].concat(this.model.dimensions),e={combo:[],label:this.getResource("bz-rp-components-dimension-label"),dft:0};if(this.edit)e.combo.push({id:this.dimension.id||0,guid:this.dimension.guid,name:this.dimension.name,type:this.dimension.type});else for(var i=0,n=t.length;i<n;i++)e.combo.push({id:t[i].id||0,guid:t[i].guid,name:this.getResource(t[i].name),type:t[i].type});return e},getTreeviewDataSource:function(t){for(var e=[],i=this.editionList,n=[].concat(t),s=0,r=n.length;s<r;s++){n[s].defaults=!1;for(var o=0,a=i.length;o<a;o++)if(i[o].id==n[s].id){n[s].defaults=!0;break}if(0===n[s].parent)e.push(n[s]);else{var h=n.filter((function(t){return t.id===n[s].parent}));void 0!==h[0].subitems?h[0].subitems.push(n[s]):h[0].subitems=new Array(n[s])}}return e},renderDimensionsDialog:function(t){var e=this,i=e.getTemplate("dimension-dialog"),n=void 0!==t&&e.dimensions[t].includeEmptyValues,s=$.tmpl(i,{nulls:n});$.when(e.renderDialog(s)).done((function(){if(e.renderDescription(),e.tabs=s.find("#bz-rp-filters-dimension-filters"),e.tabs.tabs(),void 0!==t){var i=e.dimensions[t];e.edit=!0,e.editionList=i.values,e.dimension.id=i.id,e.dimension.guid=i.guid,e.dimension.name=i.name,e.dimension.type=i.type}else e.edit=!1,e.editionList=[];e.renderDimensions(),$.when(e.getDimensionItems()).done((function(t){e.escapeQuotes(t),e.resetTabs(),e.renderTree(t.items),e.renderSearch(t.items)}))}))},renderNoDataDialog:function(){var t=this.getResource("bz-rp-components-dimension-nodata");bizagi.showMessageBox(t)},loadDimensions:function(){var t=this,e=$.Deferred();if(t.load){var i="filters="+JSON.stringify(t.process);$.when(t.services[t.srvActions.dimensionsList](i)).done((function(i){t.load=!1,t.model=i,e.resolve()}))}else e.resolve();return e},eventHandlers:function(){var t=this,e=$(".bz-rp-filters-dimension-button",t.content),i=$("#reports-canvas");e.on("click",(function(e,i){$.when(t.loadDimensions()).done((function(){t.model.dimensions.length?(t.setInitialDimension(),t.appendModal(),t.renderDimensionsDialog(i)):t.renderNoDataDialog()}))})),i.off("click.dimension-delete").on("click.dimension-delete","#bz-rp-filters-dimension-pills .bz-rp-filters-dimensions-pill-delete",(function(e){var i=$(this).parent(),n=i.data("id"),s=i.data("type"),r=i.data("guid"),o=$.map(t.dimensions,(function(t,e){if("0"==n&&""!=r){if(t.guid==r)return e}else if(t.id==n&&t.type==s&&(bizagi.util.isEmpty(r)||"null"===r))return e}));t.removeDimension(o),t.executeFilters()})),i.off("click.dimension-edit").on("click.dimension-edit","#bz-rp-filters-dimension-pills .bz-rp-filters-dimensions-pill-edit",(function(i){var n=$(this).parent(),s=n.data("id"),r=n.data("type"),o=n.data("guid"),a=$.map(t.dimensions,(function(t,e){if("0"==s&&""!=o){if(t.guid==o)return e}else if(t.id==s&&t.type==r&&""==o)return e}));e.trigger("click",a)}))},removeAllDimensions:function(){var t=this.getPillsWrapper();$(".bz-rp-filters-dimensions-pill",t).remove(),this.dimensions=[]},removeDimension:function(t){var e=this.getPillsWrapper();$(".bz-rp-filters-dimensions-pill",e).eq(t[0]).remove(),this.dimensions.splice(t[0],1)},executeFilters:function(){this.publish("filterbydimension",[this.dimensions]),this.checkPills()}}),$.Class.extend("bizagi.reporting.helper.components",{},{init:function(t){this.services=t,this.process=new Object,this.processversion=new Object,this.dimension=new Object,this.time=new Object,this.customrp=new Object},initProcessesComponent:function(t,e,i){return this.process=new bizagi.reporting.component.processfilter(t,{model:e,process:i}),this.process},initDimensionsComponent:function(t,e){return this.dimension=new bizagi.reporting.component.dimensionfilter(t,this.services,e),this.dimension},initProcessesVersionComponent:function(t,e,i){return this.processversion=new bizagi.reporting.component.processversionfilter(t,this.services,{model:e,process:i}),this.processversion},initTimeComponent:function(t,e){return this.time=new bizagi.reporting.component.timefilter(t,e),this.time},initCustomReportsComponent:function(t,e,i){return this.customrp=new bizagi.reporting.component.customreports(t,this.services,{info:e,filters:i}),this.customrp},initDetailListComponent:function(t){return this.detailList=new bizagi.reporting.component.detaillist(t,this.services),this.detailList},renderDetailList:function(t,e){this.detailList.renderDetailList(t,e)}}),$.Class.extend("bizagi.reporting.helper.graphics",{},{init:function(t){this.report=t},getDataVizObject:function(t){var e=this,i={theme:"metro",title:{font:"14px Arial, Helvetica Neue, Helvetica, sans-serif"},legend:{labels:{font:"12px Arial, Helvetica Neue, Helvetica, sans-serif",color:"#444"},position:"bottom",visible:!0},seriesDefaults:{labels:{visible:!0,background:"none",font:"12px Arial, Helvetica Neue, Helvetica, sans-serif",color:"#444"},tooltip:{visible:!0,font:"12px Arial, Helvetica Neue, Helvetica, sans-serif",color:"#ffffff",template:"#= category #: #= value #"},stack:!1,type:"column"},seriesColor:["blue"],seriesClick:function(t){if(e.refreshTimeout)clearTimeout(e.refreshTimeout);else{var i=$("input[type=radio][checked]",e.report.graphics.report.element);i.length&&(t.sender.options.detailList.caseBased="crtdate"===i.data("timerange")),e.report.callDetailList($.extend(t,{dtlType:"dataViz"}))}e.refreshTimeout=setTimeout((function(){delete e.refreshTimeout}),300)},valueAxis:{title:{font:"12px Arial, Helvetica Neue, Helvetica, sans-serif",color:"#444",visible:!1},line:{visible:!1},minorGridLines:{visible:!1}},axisDefaults:{labels:{color:"#444"}},categoryAxis:{majorGridLines:{visible:!1},line:{visible:!1}}};return $.extend(!0,{},i,t)}}),bizagi.reporting.observer.extend("bizagi.reporting.report",{},{init:function(t){this._super(),this.templates={},this.content="",this.jCMP=t.components,this.canvas=t.canvas,this.info=t.info,this.services=t.dataService,this.components=new bizagi.reporting.helper.components(this.services),this.graphics=new bizagi.reporting.helper.graphics(this),this.widgetInstance=t.widgetInstance,bizagi.referrerParams=bizagi.referrerParams?bizagi.referrerParams:{},this.device=bizagi.util.detectDevice(),this.model=$.isEmptyObject(t.filters)?this.getFiltersObject():t.filters,this.resources=bizagi.localization,bizagi.referrerParams.referrer=bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_REPORTS,bizagi.referrerParams.reports||(bizagi.referrerParams.reports={})},getFiltersObject:function(){return{}},setReportNames:function(t,e){bizagi.referrerParams.reports.endPoint=t,bizagi.referrerParams.reports.tab=e},setReportParams:function(t,e){bizagi.referrerParams.reports.model=e,bizagi.referrerParams.reports.params=t},activateTab:function(t){$("#bz-rp-reports-menu li[data-report]").removeClass("ui-bizagi-wp-widget-reports-menu-active"),$("#bz-rp-reports-menu li[data-report="+t+"]").addClass("ui-bizagi-wp-widget-reports-menu-active")},callModalWindow:function(){bizagi.referrerParams.reports.params&&bizagi.referrerParams.reports.fromBackButton&&this.callDetailList(bizagi.referrerParams.reports.params)},cleanReferrerParams:function(){bizagi.referrerParams.reports={},bizagi.referrerParams.referrer="inboxGrid"},loadTemplate:function(t,e){var i=this,n=new $.Deferred;return i.templates[t]?(n.resolve(),n.promise()):bizagi.templateService.getTemplate(e).done((function(e){i.templates[t]=e}))},loadProcessesComponent:function(){var t=this,e=t.getTemplateComponent(t.content,"filters-process");return $.when(t.services.getProcessList()).pipe((function(i){var n=t.components.initProcessesComponent(e,i,t.model.process);return $.extend(t.model,n.process),t.publish("initProcessBreadcrumb"),n.subscribe("initProcessBreadcrumb",(function(e,i){t.publish("initProcessBreadcrumb")})),n.subscribe("filterbyprocess",(function(e,i){$.extend(t.model,i),t.refreshDimensions(i),t.excecuteFilterChange()})),t.subscribe("initProcessBreadcrumb",(function(){t.model.taskPathArray=[]})),n.pstDeferred}))},loadTimeComponent:function(){var t=this,e=t.getTemplateComponent(t.content,"filters-time"),i=t.getResource("dateFormat"),n=t.components.initTimeComponent(e,{dateFormat:i,time:t.model.time});return $.extend(t.model,n.getValue()),n.subscribe("filterbytime",(function(e,i){$.extend(t.model,i),t.excecuteFilterChange()})),n.pstDeferred},callDetailList:function(t){var e=this.getDetailListObject(t);if(e){var i=this.prepareExcelFilter(),n="filters="+JSON.stringify($.extend({},this.encodeUriFilter(i),e)),s=e.process||i.process;this.components.renderDetailList(n,s.id)}},loadProcessesVersionComponent:function(t){var e,i=this,n=i.getTemplateComponent(i.content,"filters-processversion");return e="SENSORS"===t?i.services.getProcessVersionListIncludeEmbedded():i.services.getProcessVersionList(),$.when(e).pipe((function(t){i.numberOfProcess=t.processes.length;var e=i.components.initProcessesVersionComponent(n,t,i.model.process.id?i.model.process:{});return e.process.process.name=encodeURIComponent(e.process.process.name),$.extend(i.model,e.process),i.publish("initProcessBreadcrumb"),e.subscribe("initProcessBreadcrumb",(function(t,e){i.publish("initProcessBreadcrumb")})),e.subscribe("filterbyprocessversion",(function(t,e){"loading"!=i.state&&($.extend(i.model,e),i.refreshDimensions(e),i.excecuteFilterChange())})),e.pstDeferred}))},loadCustomReportsComponent:function(){var t=this.getTemplateComponent(this.content,"customreports");this.components.initCustomReportsComponent(t,this.info,this.model)},loadDetailListComponent:function(){var t=this,e=t.getTemplateComponent(t.content,"detaillist"),i=t.components.initDetailListComponent(e);i.subscribe("rp-graphicquery",(function(e,i){t.publish("graphicquery",i)})),i.subscribe("rp-caseadministration",(function(e,i){t.publish("caseadministration",i)})),i.subscribe("rp-opencase",(function(e,i){t.publish("opencase",i)}))},refreshDimensions:function(t){$.isEmptyObject(this.components.dimension)||(this.model.dimension=[],this.components.dimension.refresh(t))},loadDimensionsComponent:function(t,e){var i=this,n=i.getTemplateComponent(i.content,"filters-dimension");e=e||"getDimensionsList";var s=i.components.initDimensionsComponent(n,{srvActions:{dimensionsList:e},process:t,dftDimensions:i.model.dimension});return i.publish("initProcessBreadcrumb"),s.subscribe("initProcessBreadcrumb",(function(t,e){i.publish("initProcessBreadcrumb")})),s.subscribe("filterbydimension",(function(e,n){$.extend(i.model,t),i.model.dimension=n,i.excecuteFilterChange()})),i.subscribe("initProcessBreadcrumb",(function(){i.model.taskPathArray=[]})),s.pstDeferred},loadTemplates:function(t){var e=this,i=new $.Deferred,n=[];return $.each(t,(function(t,i){var s=e.loadTemplate(t,i);n.push(s)})),$.when.apply($,n).done((function(){i.resolve()})),i.promise()},excecuteFilterChange:function(){var t="filters="+JSON.stringify(this.encodeUriFilter(this.model));this.publish("filterChange",this.model),this.drawReport(t)},getTemplate:function(t){return this.templates[t]?this.templates[t]:null},getResource:function(t){return this.resources.getResource(t)},getElement:function(){return this.element},getContent:function(){return this.content},initCommonTemplates:function(){return{component:bizagi.getTemplate("bizagi.reporting.component")+"#bz-rp-component-main","base-report-frame":bizagi.getTemplate("bizagi.reporting.report")+"#bz-rp-frame","report-detaillist":bizagi.getTemplate("bizagi.reporting.report")+"#bz-rp-detaillist","processviewer-nodata":bizagi.getTemplate("bizagi.reporting.component")+"#bz-rp-processviewer-nodata","process-breadcrumb":bizagi.getTemplate("bizagi.reporting.report.bamtaskloadanalysis")+"#bz-rp-process-breadcrumb"}},render:function(){var t=this,e=t.initializeTemplates?t.initializeTemplates():{};return $.extend(e,t.initCommonTemplates()),t.loadTemplates(e).pipe((function(){return t.internalRender()}))},internalRender:function(){var t=this,e=t.getTemplate("base-report-frame"),i=$.tmpl(e);return $.when(t.renderContent()).pipe((function(e){return t.content=e,t.getReportContainer(i).append(e),t.element=i,t.element}))},encodeUriFilter:function(t){var e=this,i=JSON.parse(JSON.stringify(t));return i.dimension&&i.dimension.length>0&&i.dimension.map((function(t){t.values&&t.values.map((function(t){t.name&&(t.name=encodeURIComponent(e.addBackSlashQuotes(t.name)))}))})),i},addBackSlashQuotes:function(t){return t.toString().replace(/\\"/g,'"').replace(/"/g,'\\"')},renderContent:function(){var t=this,e=t.getTemplate("main");return t.content=$.tmpl(e),t.content.appendTo("#canvas"),$.when(t.loadComponents()).pipe((function(){var e="filters="+JSON.stringify(t.encodeUriFilter(t.model));return t.drawReport(e),$(".bz-rp-processviewer-canvas",t.content).endLoadingMessage(),t.content}))},loadComponents:function(){var t=this.getTemplate("component"),e=$.tmpl(t,{components:this.jCMP});this.content.prepend(e),this.loadCustomReportsComponent(),this.loadDetailListComponent()},postRender:function(){this.callModalWindow()},refresh:function(){var t=this;t.refreshTimeout&&clearTimeout(t.refreshTimeout),t.refreshTimeout=setTimeout((function(){delete t.refreshTimeout,$(".bz-rp-chart",t.canvas).each((function(){var t=$(this).data("kendoChart");t&&t.refresh()}))}),150)},getReportContainer:function(t){if(!this.reportContainer){var e=this.getTemplateComponent(t,"report");null!=e&&e.length>0&&(this.reportContainer=e)}return this.reportContainer},getTemplateComponent:function(t,e){return t.data("bizagi-component")==e?t:$("[data-bizagi-component="+e+"]",t)},renderProcessViewer:function(t){var e=this;if(e.model.process.hasOwnProperty("id")){var i="processId="+e.model.process.id;e.viewerPlugin&&e.viewerPlugin.processviewer("destroy"),$.when(e.services.processDefinition(i),e.services.graphicInfo(i)).done((function(i,n){e.viewerPlugin=t.processviewer({height:bizagi.util.isIE()?window.innerHeight-288:"calc(100vh - 288px)",width:"100%",jsonBizagi:{processDefinition:i[0],processGraphicsInfo:n[0]},zoomRange:5})})).fail((function(){e.renderPVNoData(t)}))}else e.renderPVNoData(t)},renderPVNoData:function(t){var e=this.getTemplate("processviewer-nodata");t.html($.tmpl(e))},setFiltersForCustomRPComp:function(){var t=this.components.customrp;$.isEmptyObject(t)||t.setReportsFilters(this.model)},applyViewerTooltip:function(t,e){var i=this;t.tooltip({items:void 0!==e.items?e.items:".processviewer-hotspot",disabled:void 0!==e.disabled&&e.disabled,content:function(){return!i._isEmbeddedSubProcessTask(this.classList)&&i.getTooltipContent(this)},hide:{delay:250,duration:120},tooltipClass:"biz-rp-tooltip",close:function(t,e){e.tooltip.hover((function(){$(this).stop(!0).fadeTo(120,1)}),(function(){$(this).fadeOut(120,(function(){$(this).remove()}))}))}})},updateBreadcrumbData:function(t){this.model.taskPathArray||(this.model.taskPathArray=[]),!this.model.taskPathArray.filter((function(e){return e.id==t.id})).length>0&&this.model.taskPathArray.push({taskName:t.name,id:t.id})},bindDtlEvent:function(){var t=this;$(document).off("click.bz-rp-detaillist").on("click.bz-rp-detaillist",".bz-rp-processviewer-tooltip .bz-rp-icon-detail-list",(function(e){var i=$(this),n=i.parent().data("type"),s=i.closest(".bz-rp-processviewer-tooltip").data("guid");if(i.closest(".ui-tooltip").remove(),"load_subprocess"==n){var r,o=i.parent().data("subprocessid"),a=i.parent().find(".bz-rp-processviewer-breadcrump-item").text(),h={process:{id:o}};t.model&&(t.model.dimension?h.dimension=[].concat(t.model.dimension):h.dimension=[],t.model.time&&(h.time=$.extend({},t.model.time))),r="filters="+JSON.stringify(h),t.updateBreadcrumbData(t.model.process),t.model.process={id:o,name:a},t.updateBreadcrumbData(t.model.process),t.publish("filterChange",t.model),t.drawReport(r)}else t.callDetailList({type:n,guid:s,tooltip:!0})}))},setColumnsWidth:function(){var t=$(window).width(),e=$(".columns",this.content).removeClass();t>=1024?($(e[0]).addClass("medium-3 columns"),$(e[1]).addClass("medium-9 columns")):($(e[0]).addClass("medium-4 columns"),$(e[1]).addClass("medium-8 columns"))},loadReport:function(t){var e=this,i=new bizagi.reporting.facade({proxyPrefix:void 0!==bizagi.proxyPrefix?bizagi.proxyPrefix:""});$(".bz-rp-reports-wrapper",e.canvas).remove(),$.when(i.render({canvas:e.canvas,report:t,info:e.info,components:e.jCMP,widgetInstance:this.widgetInstance})).done((function(t){t.bindWindowResize(),t.widgetInstance=t.widgetInstance||e.widgetInstance,t.widgetInstance&&t.widgetInstance.attachReportEvents.apply(t.widgetInstance,[t])}))},bindWindowResize:function(){var t=this;$(window).off("resize.processviewer"),bizagi.util.isTabletDevice(t.device)?$(window).off("orientationchange.report").on("orientationchange.report",(function(e){e.preventDefault(),t.refresh()})):"desktop"===t.device&&$(window).off("resize.report").on("resize.report",(function(e){e.preventDefault(),t.refresh()}))},bindExportToExcel:function(t){var e=this;$(e.content).on("click",".bz-rp-export-excel",(function(i){i.stopPropagation();var n="reportName="+t+"&filters="+JSON.stringify(e.prepareExcelFilter())+"&user="+bizagi.currentUser.idUser;e.services.exportToExcel(n)}))},prepareExcelFilter:function(){var t=$.extend({},this.model);if(t.dimension)for(var e=0,i=t.dimension.length;e<i;e++){var n=t.dimension[e];delete n.name;for(var s=0,r=n.values.length;s<r;s++)n.values[s]}return t},bindToggleSummary:function(){$(this.content).on("click",".bz-rp-toggle-summary",(function(t){t.stopPropagation(),$(this).closest(".bz-rp-summary").find("tbody").toggle()}))},calculateGraphHeight:function(t){return t<3?{}:{chartArea:{height:115*t}}},setLabelSteps:function(t){var e=1;return t>6&&t<12?e=2:t>=12&&t<=19?e=3:t>=20&&(e=5),{categoryAxis:{labels:{step:e}}}},setNoDataAvailableLabel:function(t){t&&t.find(".bz-rp-chart .custom-overlay > .message").html(this.getResource("bz-rp-nodata"))},_isEmbeddedSubProcessTask:function(t){return bizagi.util.tryCatch((function(){return t.contains("subprocessemb")||t.contains("subprocessxaemb")}),!1)}}),$.Class.extend("bizagi.reporting.factory",{},{init:function(t){this.dataService=t;var e=bizagi.localization.getResource("datePickerRegional");$.datepicker.setDefaults(e)},create:function create(args){if(void 0===args.report)throw"The argument must contain a name to create the report";try{var fn=eval("var bafn = function(args) {  return new bizagi.reporting.report."+args.report+"(args);};bafn");args.dataService=this.dataService;var report=fn(args);return report}catch(t){throw"Can't create a report for "+args.report}}}),bizagi.reporting=bizagi.reporting||{},$.Class.extend("bizagi.reporting.facade",{},{init:function(t){t=t||{},this.dataService=new bizagi.reporting.services.service(t),this.reportFactory=new bizagi.reporting.factory(this.dataService)},render:function(t){var e,i=this.ownerDocument;if((t=t||{}).canvas||(t.canvas=$("body",i)),!t.report)throw"No report name was given";return $.when(this.reportFactory.create(t)).pipe((function(t){return e=t,t.render()})).pipe((function(i){return t.canvas.append(i),e.postRender(),e}))}}),bizagi.reporting.report.extend("bizagi.reporting.report.bamprocessloadanalysis",{},{init:function(t){this._super(t),this.setReportNames("BAMProcess","bamprocessloadanalysis")},initializeTemplates:function(){return{main:bizagi.getTemplate("bizagi.reporting.report.bamprocessloadanalysis")+"#bz-rp-bam-process-loadanalysis-main",loadanalysis:bizagi.getTemplate("bizagi.reporting.report.bamprocessloadanalysis")+"#bz-rp-bam-process-loadanalysis"}},drawReport:function(){this.setFiltersForCustomRPComp(),this.drawProcessAnalysis()},getDetailListObject:function(t){this.setReportParams(t);var e={};return t.dataItem.embedded&&(e={task:{id:t.dataItem.embedded.taskId,guid:t.dataItem.embedded.taskGuid},parentProcess:{id:t.dataItem.embedded.parentProcessId}}),{process:{id:t.dataItem.processId},detailList:{reportName:t.sender.options.chartName,columnName:t.series.field,embedded:e}}},drawProcessAnalysis:function(){var t=this,e=t.getTemplate("loadanalysis"),i=$.tmpl(e),n=t.getTemplateComponent(t.content,"bam-process-loadanalysis");n.empty().append(i),$.when(t.services.getBAMProcessAnalysisData()).done((function(e){if(e.rows.length){var i,s={seriesDefaults:{type:"bar",tooltip:{visible:!1}},chartName:"BAM.Process.LoadAnalysis",dataSource:{data:e.rows,sort:[{field:"overdue",dir:"asc"},{field:"onrisk",dir:"asc"},{field:"ontime",dir:"asc"}]},legend:{position:"top"},series:[{field:"ontime",name:t.getResource("reports-general-ontime-label"),color:"#8bbc21"},{field:"onrisk",name:t.getResource("reports-general-onrisk-label"),color:"#FFCF40"},{field:"overdue",name:t.getResource("reports-general-overdue-label"),color:"#FF4040"}],categoryAxis:{field:"processName",reverse:!0}};$.extend(s,t.calculateGraphHeight(e.rows.length)),i=t.graphics.getDataVizObject(s),n.find(".bz-rp-chart").kendoChart(i)}else t.setNoDataAvailableLabel(n)})).fail((function(e){t.setNoDataAvailableLabel(n)}))}}),bizagi.reporting.report.extend("bizagi.reporting.report.bamprocessworkinprogress",{},{init:function(t){this._super(t),this.setReportNames("BAMProcess","bamprocessworkinprogress")},getFiltersObject:function(){return{process:{},dimension:[]}},initializeTemplates:function(){return{main:bizagi.getTemplate("bizagi.reporting.report.bamprocessworkinprogress")+"#bz-rp-bam-process-workinprogress-main",casestatus:bizagi.getTemplate("bizagi.reporting.report.bamprocessworkinprogress")+"#bz-rp-bam-process-worinprogress-casestatus",casesgoingoverdue:bizagi.getTemplate("bizagi.reporting.report.bamprocessworkinprogress")+"#bz-rp-bam-process-worinprogress-casesgoingoverdue"}},loadComponents:function(){var t=this;return t._super(),$.when(t.loadProcessesVersionComponent()).pipe((function(){return t.loadDimensionsComponent({process:t.model.process})}))},getDetailListObject:function(t){this.setReportParams(t,this.model),this.activateTab("bamprocessworkinprogress");var e=t.sender.options.chartName,i={},n={};"BAM.Process.CasesGoingOverdue"===e?(t.series.embedded&&(n={task:{id:t.series.embedded.taskId,guid:t.series.embedded.taskGuid},parentProcess:{id:t.series.embedded.parentProcessId}}),i={detailList:{reportName:e,columnIndex:$.inArray(t.category,t.sender.options.categoryAxis.categories),embedded:n}}):"BAM.Process.CaseStatus"===e&&(t.dataItem.embedded&&(n={task:{id:t.dataItem.embedded.taskId,guid:t.dataItem.embedded.taskGuid},parentProcess:{id:t.dataItem.embedded.parentProcessId}}),i={detailList:{reportName:e,columnName:t.dataItem.name,embedded:n}});return i},drawReport:function(t){this.numberOfProcess>0?(this.setFiltersForCustomRPComp(),this.drawCaseStatus(t),this.drawCasesGoingOverdue(t)):this.drawNoDataAvailableLabel()},drawNoDataAvailableLabel:function(){var t=this.getTemplate("casesgoingoverdue"),e=this.getTemplateComponent(this.content,"bam-process-workinprogress-casesgoingoverdue"),i=$.tmpl(t);e.empty().append(i),this.setNoDataAvailableLabel(e);var n=this.getTemplate("casestatus"),s=$.tmpl(n),r=this.getTemplateComponent(this.content,"bam-process-workinprogress-casestatus");r.empty().append(s),this.setNoDataAvailableLabel(r)},drawCasesGoingOverdue:function(t){var e=this,i=e.getTemplate("casesgoingoverdue"),n=e.getTemplateComponent(e.content,"bam-process-workinprogress-casesgoingoverdue"),s=$.tmpl(i);n.empty().append(s),$.when(e.services.getCasesGoingOverdue(t)).done((function(t){if(t.rows.length){var i=e.getGraphData(t.rows),s=t.embedded?t.embedded:{},r={series:[{color:"#FF4040",data:i.series,embedded:s}],chartName:"BAM.Process.CasesGoingOverdue",categoryAxis:{categories:i.categories}},o=e.graphics.getDataVizObject(r);n.find(".bz-rp-chart").kendoChart(o)}else e.setNoDataAvailableLabel(n)})).fail((function(t){e.setNoDataAvailableLabel(n)}))},drawCaseStatus:function(t){var e=this,i=e.getTemplate("casestatus"),n=$.tmpl(i),s=e.getTemplateComponent(e.content,"bam-process-workinprogress-casestatus");s.empty().append(n),$.when(e.services.getCaseStatus(t)).done((function(t){if(t.ontime||t.overdue||t.onrisk){var i=t.embedded?t.embedded:{},n={dataSource:{data:[{category:e.getResource("reports-general-ontime-label"),value:t.ontime,color:"#8bbc21",name:"ontime",embedded:i},{category:e.getResource("reports-general-overdue-label"),value:t.overdue,color:"#FF4040",name:"overdue",embedded:i},{category:e.getResource("reports-general-onrisk-label"),value:t.onrisk,color:"#FFCF40",name:"onrisk",embedded:i}]},chartName:"BAM.Process.CaseStatus",seriesDefaults:{labels:{template:"#= value# - #= kendo.format('{0:P}', percentage)#"},tooltip:{template:"#= category# - #= value#"},type:"pie"},series:[{field:"value",colorField:"color",categoryField:"category"}],legendItemClick:function(t){var e=$("#chart-case-status").data("kendoChart");e&&e.refresh()}},r=e.graphics.getDataVizObject(n);s.find(".bz-rp-chart").kendoChart(r)}else e.setNoDataAvailableLabel(s)})).fail((function(t){e.setNoDataAvailableLabel(s)}))},getGraphData:function(t){for(var e=this.getResource("datePickerRegional").monthNamesShort,i=[0,0,0,0,0,0,0,0,0,0],n=[0,0,0,0,0,0,0,0,0],s=new Date,r=s.getDate(),o=s.getMonth(),a="",h=0,l=0;l<10;l++)void 0!==t[l]&&(t[l].daysLeft<10?i[t[l].daysLeft]=t[l].cases:h+=t[l].cases),a=e[o],n[l]=a+"/"+r,s.setDate(s.getDate()+1),r=s.getDate(),o=s.getMonth();return h>0&&(n.push(this.getResource("reports-general-moredays-label")),i.push(h)),{series:i,categories:n}}}),bizagi.reporting.report.extend("bizagi.reporting.report.bamtasksworkinprogress",{},{init:function(t){this._super(t),this.setReportNames("BAMTask","bamtasksworkinprogress")},getFiltersObject:function(){return{process:{},dimension:[]}},initializeTemplates:function(){return{main:bizagi.getTemplate("bizagi.reporting.report.bamtaskworkinprogress")+"#bz-rp-bam-task-workinprogress-main",taskstatus:bizagi.getTemplate("bizagi.reporting.report.bamtaskworkinprogress")+"#bz-rp-bam-task-worinprogress-taskstatus",taskgoingoverdue:bizagi.getTemplate("bizagi.reporting.report.bamtaskworkinprogress")+"#bz-rp-bam-task-worinprogress-taskgoingoverdue"}},loadComponents:function(){var t=this;return t._super(),$.when(t.loadProcessesVersionComponent()).pipe((function(){return t.loadDimensionsComponent({process:t.model.process})}))},getDetailListObject:function(t){var e=t.sender.options.chartName,i={};(this.setReportParams(t,this.model),"BAM.Task.GoingOverdue"===e)?i={detailList:{reportName:e,columnIndex:$.inArray(t.category,t.sender.options.categoryAxis.categories)}}:"BAM.Task.TaskStatus"===e&&(i={detailList:{reportName:e,columnName:t.dataItem.name}});return i},drawReport:function(t){this.setFiltersForCustomRPComp(),this.drawTaskStatus(t),this.drawTaskGoingOverdue(t)},drawTaskGoingOverdue:function(t){var e=this,i=e.getTemplate("taskgoingoverdue"),n=$.tmpl(i),s=e.getTemplateComponent(e.content,"bam-task-workinprogress-taskgoingoverdue");s.empty().append(n),$.when(e.services.getTaskGoingOverdue(t)).done((function(t){if(t.rows.length){var i=e.getGraphData(t.rows),n={chartName:"BAM.Task.GoingOverdue",series:[{color:"#FF4040",data:i.series}],categoryAxis:{categories:i.categories}},r=e.graphics.getDataVizObject(n);s.find(".bz-rp-chart").empty().kendoChart(r)}else e.setNoDataAvailableLabel(s)})).fail((function(t){e.setNoDataAvailableLabel(s)}))},drawTaskStatus:function(t){var e=this,i=e.getTemplate("taskstatus"),n=$.tmpl(i),s=e.getTemplateComponent(e.content,"bam-task-workinprogress-taskstatus");s.empty().append(n),$.when(e.services.getProcessVersionList()).pipe((function(i){0==i.processes.length?e.setNoDataAvailableLabel(s):$.when(e.services.getTaskStatus(t)).done((function(t){if(t.ontime>0||t.onrisk>0||t.overdue>0){var i={dataSource:{data:[{category:e.getResource("reports-general-ontime-label"),value:t.ontime,color:"#8bbc21",name:"ontime"},{category:e.getResource("reports-general-onrisk-label"),value:t.onrisk,color:"#FFCF40",name:"onrisk"},{category:e.getResource("reports-general-overdue-label"),value:t.overdue,color:"#FF4040",name:"overdue"}]},chartName:"BAM.Task.TaskStatus",seriesDefaults:{labels:{template:"#= value# - #= kendo.format('{0:P}', percentage)#"},tooltip:{template:"#= category# - #= value#"},type:"pie"},series:[{field:"value",colorField:"color",categoryField:"category"}]},n=e.graphics.getDataVizObject(i);s.find(".bz-rp-chart").empty().kendoChart(n)}else e.setNoDataAvailableLabel(s)})).fail((function(t){e.setNoDataAvailableLabel(s)}))}))},getGraphData:function(t){for(var e=this.getResource("datePickerRegional").monthNamesShort,i=new Array(10),n=new Array(10),s=new Date,r=s.getDate(),o=s.getMonth(),a="",h=0,l=0;l<10;l++)void 0!==t[l]&&(t[l].daysLeft<10?i[t[l].daysLeft]=t[l].tasks:h+=t[l].tasks),a=e[o],n[l]=a+"/"+r,s.setDate(s.getDate()+1),r=s.getDate(),o=s.getMonth();h>0&&(n.push(this.getResource("reports-general-moredays-label")),i.push(h));for(var c=0;c<i.length;c++)void 0===i[c]&&(i[c]=null);return{series:i,categories:n}}}),bizagi.reporting.report.extend("bizagi.reporting.report.bamtaskloadanalysis",{},{init:function(t){this._super(t),this.manualTasks=[],this.setReportNames("BAMTask","bamtaskloadanalysis")},getFiltersObject:function(){return{process:{},dimension:[]}},initializeTemplates:function(){return{main:bizagi.getTemplate("bizagi.reporting.report.bamtaskloadanalysis")+"#bz-rp-bam-task-loadanalysis-main",manualtasks:bizagi.getTemplate("bizagi.reporting.report.bamtaskloadanalysis")+"#bz-rp-bam-task-loadanalysis-manualtasks",tooltip:bizagi.getTemplate("bizagi.reporting.report.bamtaskloadanalysis")+"#bz-rp-bam-task-loadanalysis-tooltip","process-breadcrumb":bizagi.getTemplate("bizagi.reporting.report.bamtaskloadanalysis")+"#bz-rp-process-breadcrumb"}},loadComponents:function(){var t=this;return t._super(),$.when(t.loadProcessesVersionComponent()).pipe((function(){return t.loadDimensionsComponent({process:t.model.process})}))},postRender:function(){this.eventHandlers(),this.activateTab("bamtaskloadanalysis"),this.callModalWindow()},getDetailListObject:function(t){return this.setReportParams(t,this.model),{detailList:{reportName:"BAM.Task.LoadAnalysis",columnName:t.type,task:t.guid}}},drawReport:function(t){var e=this;e.setFiltersForCustomRPComp(),$.when(e.services.getProcessVersionList()).pipe((function(i){0==i.processes.length?e.drawProcessModel():$.when(e.services.getTaskLoadAnalysis(t)).done((function(t){e.manualTasks=t,e.drawProcessModel(),e.drawProcessBreadcrumb()}))}))},drawProcessModel:function(){var t=$(".bz-rp-processviewer-canvas",this.content);this.renderProcessViewer(t)},drawManualTask:function(){var t=$(".bz-rp-bam-task-loadanalysis-manualtasks",this.content),e=this.getTemplate("manualtasks"),i=$.tmpl(e,this.manualTasks);t.empty().append(i)},drawProcessBreadcrumb:function(){var t=$(".bz-rp-processbreadcrumb-container",this.content);if(t.empty(),this.model.taskPathArray&&this.model.taskPathArray.length>1){var e=this.getTemplate("process-breadcrumb");$.tmpl(e,{taskData:this.model.taskPathArray}).appendTo(t),this.addBreadCrumbHandlers()}},refreshBreadCrumb:function(){var t,e;if(this.model.taskPathArray){for(t=this.model.taskPathArray.length;t-- >0;)parseInt(this.model.process.id)==parseInt(this.model.taskPathArray[t].id)&&(e=t);0==e?this.model.taskPathArray=[].concat(this.model.taskPathArray[0]):this.model.taskPathArray.splice(e+1,this.model.taskPathArray.length)}},addBreadCrumbHandlers:function(){var t=this,e=$(".bz-rp-processbreadcrumb-container",t.content);$("a",e).click((function(e){e.preventDefault();var i=$(e.currentTarget).data("taskid"),n=e.currentTarget.text;0==n.indexOf(" > ")&&(n=n.substring(3,n.length)),t.model.process={id:i,name:n},t.refreshBreadCrumb(),t.components.dimension.publish("filterbydimension",[])}))},getTooltipContent:function(t){var e=t.id,i=this.getTemplate("tooltip"),n=this.manualTasks.rows.filter((function(t){return t.guid==e}));return $.tmpl(i,n[0])},eventHandlers:function(){var t=this,e=$(".bz-rp-processviewer-canvas",t.content),i=$(".bz-rp-bam-task-loadanalysis-manualtasks",t.content);t.applyViewerTooltip(e,{items:".usertask, .abstracttask, .manualtask, .subprocess, .singletontask, .nonetask, .callactivity"}),t.bindDtlEvent(),t.bindToggleSummary(),i.on("click",".bz-rp-bam-task-loadanalysis-manualtasks-rows",(function(e){var i=$(this),n=i.data("guid");i.siblings().removeClass(".bz-rp-summary-highlight"),i.addClass(".bz-rp-summary-highlight"),t.viewerPlugin.processviewer("unSelectAllShapes"),t.viewerPlugin.processviewer("selectShape",n)})),e.on("pvComplete",(function(e){t.drawManualTask(),$(".abstracttask, .usertask, .manualtask, .subprocess, .singletontask, .nonetask, .callactivity").addClass("bz-rp-process-viewer-activate"),$(".subprocess.subprocessemb").removeClass("bz-rp-process-viewer-activate")}))}}),bizagi.reporting.report.extend("bizagi.reporting.report.analyticsprocesscycletime",{},{init:function(t){this._super(t),this.cleanReferrerParams()},getFiltersObject:function(){return{process:{},dimension:[],time:{}}},initializeTemplates:function(){return{main:bizagi.getTemplate("bizagi.reporting.report.analyticsprocesscycletime")+"#bz-rp-analytics-process-cycletime-main",cycletimesummary:bizagi.getTemplate("bizagi.reporting.report.analyticsprocesscycletime")+"#bz-rp-analytics-process-cycletime-summary",caseduration:bizagi.getTemplate("bizagi.reporting.report.analyticsprocesscycletime")+"#bz-rp-analytics-process-cycletime-caseduration",casestatus:bizagi.getTemplate("bizagi.reporting.report.analyticsprocesscycletime")+"#bz-rp-analytics-process-cycletime-casestatus"}},loadComponents:function(){var t=this;return t._super(),$.when(t.loadProcessesVersionComponent()).pipe((function(){return t.loadDimensionsComponent({process:t.model.process})})).pipe((function(){return t.loadTimeComponent()}))},postRender:function(){this.bindToggleSummary()},getReportExcelUrl:function(t){var e=$.extend({},this.taskGuid,this.model),i="reportName="+t+"&filters="+JSON.stringify(e)+"&user="+bizagi.currentUser.idUser+"&xsrf="+bizagi.getXSRFToken();return this.services.getExportExcelUrl(i)},getDetailListObject:function(t){var e=t.sender.options.chartName,i=t.dataItem.name,n={};return t.dataItem.embedded&&(n={task:{id:t.dataItem.embedded.taskId,guid:t.dataItem.embedded.taskGuid},parentProcess:{id:t.dataItem.embedded.parentProcessId}}),"Analytics.Process.CycleTimeSummary"===e&&{detailList:{reportName:e,columnName:i,embedded:n}}},drawReport:function(t){var e=this;e.setFiltersForCustomRPComp();var i=$("#bizagi-reporting-wrapper");i.startLoading({overlay:!0,delay:150,opacity:.9}),$.when(e.services.getCycleTime(t)).done((function(t){i.endLoading(),e.drawCaseDuration([{averageDuration:t.summaryTable.averageDuration,expectedDuration:t.summaryTable.expectedDuration,embedded:t.embedded}]),e.drawCaseStatus(t.caseState,t.embedded),e.drawCycleTimeSummary(t.summaryTable,t.embedded)}))},drawCycleTimeSummary:function(t,e){var i=this.getTemplate("cycletimesummary");t.embedded=e||{};var n=$.tmpl(i,t,{getReportExcelUrl:this.getReportExcelUrl("analytics.process.cycletime"),showExcelIcon:!this.device||"desktop"==this.device.toLowerCase()});this.getTemplateComponent(this.content,"analytics-process-cycletime-summary").empty().append(n)},drawCaseDuration:function(t,e){var i=this.getTemplate("caseduration"),n=$.tmpl(i),s=this.getTemplateComponent(this.content,"analytics-process-cycletime-caseduration");if(s.empty().append(n),t.embedded=e||{},t[0].averageDuration>0||t[0].expectedDuration>0){var r={dataSource:{data:t},seriesDefaults:{tooltip:{template:"#= series.name #: #= value #"},type:"column",spacing:.3},series:[{field:"averageDuration",name:this.getResource("analytics-process-cycletime-avgduration"),color:"#FF4040"},{field:"expectedDuration",name:this.getResource("analytics-process-cycletime-expduration"),color:"#b8c7e8"}]},o=this.graphics.getDataVizObject(r);s.find(".bz-rp-chart").empty().kendoChart(o)}else this.setNoDataAvailableLabel(s)},drawCaseStatus:function(t,e){var i=this.getTemplate("casestatus"),n=$.tmpl(i),s=this.getTemplateComponent(this.content,"analytics-process-cycletime-casestatus");if(s.empty().append(n),t.onTime>0||t.overdue>0){var r={dataSource:{data:[{category:this.getResource("reports-general-ontime-label"),value:t.onTime,color:"#8bbc21",name:"ontime",embedded:e},{category:this.getResource("reports-general-overdue-label"),value:t.overdue,color:"#FF4040",name:"overdue",embedded:e}]},chartName:"Analytics.Process.CycleTimeSummary",seriesDefaults:{labels:{template:"#= value# - #= kendo.format('{0:P}', percentage)#"},tooltip:{template:"#= category# - #= value#"},type:"pie"},series:[{field:"value",colorField:"color",categoryField:"category"}]},o=this.graphics.getDataVizObject(r);s.find(".bz-rp-chart").kendoChart(o)}else this.setNoDataAvailableLabel(s)}}),bizagi.reporting.component.controller("bizagi.reporting.component.processversionfilter",{init:function(t,e,i){i=i||{},this._super(t),this.processes=i.model.processes,this.services=e,this.process=this.setDefaultProcess(i.process),this.position=0,this.version=0,this.render()},loadTemplates:function(){var t={processversionfilter:bizagi.getTemplate("bizagi.reporting.component.processversionfilter")+"#bz-rp-filters-process-version"};return this._super(t)},renderComponent:function(){var t=this.getTemplate("processversionfilter");return $.tmpl(t)},postRender:function(t){var e=this;$.when(e.renderProcessCombo(t),e.renderVersionCombo(t)).done((function(){e.resolvePostRender()}))},setDefaultProcess:function(t){var e=[];return this.processes.length&&(e=$.isEmptyObject(t)?{process:{id:this.processes[0].process[0].id,name:this.processes[0].name}}:{process:t}),e},getArrayPosFromBackButton:function(){return!!(bizagi.referrerParams.reports.model&&bizagi.referrerParams.reports.model.process&&bizagi.referrerParams.reports.fromBackButton)&&bizagi.referrerParams.reports.model.process.arrayPosition},renderProcessCombo:function(t){var e=this,i=$.Deferred(),n=e.getProcessDataForCombo();e.$processContainer=$("#process",t);var s=e.getArrayPosFromBackButton(),r=0==s?n.combo[e.position]:n.combo[s];return e.$processContainer.uicombo({data:n,itemValue:function(t){return t.process[0].id+"/"+t.position+"/"+t.process[0].guid},itemText:function(t){return t.name},onComplete:function(){i.resolve()},initValue:r,onChange:function(t){data=t.ui.data("value").split("/"),e.process.process.id=parseInt(data[0]),e.position=parseInt(data[1]),e.process.process.arrayPosition=e.position,e.version=0,e.renderVersionCombo(),e.publish("initProcessBreadcrumb"),e.publish("filterbyprocessversion",e.process)}}),i},renderVersionCombo:function(t){var e=this,i=$.Deferred(),n=e.getVersionDataForCombo();return e.$versionContainer=$("#version",t),e.$versionContainer.empty().uicombo({data:n,itemValue:function(t){return t.id},itemText:function(t){return t.version},initValue:n.combo[e.version],onComplete:function(t){i.resolve()},onChange:function(t){var i=t.ui.data("value");e.process.process.id=parseInt(i),e.publish("filterbyprocessversion",e.process)}}),i},getProcessDataForCombo:function(){for(var t={combo:[],label:this.getResource("bz-rp-components-process-label")},e=[].concat(this.processes),i=0,n=e.length;i<n;i++){e[i].position=i,t.combo.push(e[i]);for(var s=0,r=e[i].process.length;s<r;s++)e[i].process[s].id===this.process.process.id&&(this.position=i,this.version=s)}return t},getVersionDataForCombo:function(){return{combo:this.processes.length?[].concat(this.processes[this.position].process):[],label:this.getResource("bz-rp-components-process-version-label")}}}),function(t){"use strict";t.widget("ui.rangeSliderMouseTouch",t.ui.mouse,{enabled:!0,_mouseInit:function(){var e=this;t.ui.mouse.prototype._mouseInit.apply(this),this._mouseDownEvent=!1,this.element.bind("touchstart."+this.widgetName,(function(t){return e._touchStart(t)}))},_mouseDestroy:function(){t(document).unbind("touchmove."+this.widgetName,this._touchMoveDelegate).unbind("touchend."+this.widgetName,this._touchEndDelegate),t.ui.mouse.prototype._mouseDestroy.apply(this)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},destroy:function(){this._mouseDestroy(),t.ui.mouse.prototype.destroy.apply(this),this._mouseInit=null},_touchStart:function(e){if(!this.enabled)return!1;e.which=1,e.preventDefault(),this._fillTouchEvent(e);var i=this,n=this._mouseDownEvent;this._mouseDown(e),n!==this._mouseDownEvent&&(this._touchEndDelegate=function(t){i._touchEnd(t)},this._touchMoveDelegate=function(t){i._touchMove(t)},t(document).bind("touchmove."+this.widgetName,this._touchMoveDelegate).bind("touchend."+this.widgetName,this._touchEndDelegate))},_mouseDown:function(e){return!!this.enabled&&t.ui.mouse.prototype._mouseDown.apply(this,[e])},_touchEnd:function(e){this._fillTouchEvent(e),this._mouseUp(e),t(document).unbind("touchmove."+this.widgetName,this._touchMoveDelegate).unbind("touchend."+this.widgetName,this._touchEndDelegate),this._mouseDownEvent=!1,t(document).trigger("mouseup")},_touchMove:function(t){return t.preventDefault(),this._fillTouchEvent(t),this._mouseMove(t)},_fillTouchEvent:function(t){var e;e=void 0===t.targetTouches&&void 0===t.changedTouches?t.originalEvent.targetTouches[0]||t.originalEvent.changedTouches[0]:t.targetTouches[0]||t.changedTouches[0],t.pageX=e.pageX,t.pageY=e.pageY}})}(jQuery),function(t){"use strict";t.widget("ui.rangeSliderDraggable",t.ui.rangeSliderMouseTouch,{cache:null,options:{containment:null},_create:function(){t.ui.rangeSliderMouseTouch.prototype._create.apply(this),setTimeout(t.proxy(this._initElementIfNotDestroyed,this),10)},destroy:function(){this.cache=null,t.ui.rangeSliderMouseTouch.prototype.destroy.apply(this)},_initElementIfNotDestroyed:function(){this._mouseInit&&this._initElement()},_initElement:function(){this._mouseInit(),this._cache()},_setOption:function(e,i){"containment"===e&&(this.options.containment=null===i||0===t(i).length?null:t(i))},_mouseStart:function(t){return this._cache(),this.cache.click={left:t.pageX,top:t.pageY},this.cache.initialOffset=this.element.offset(),this._triggerMouseEvent("mousestart"),!0},_mouseDrag:function(t){var e=t.pageX-this.cache.click.left;return e=this._constraintPosition(e+this.cache.initialOffset.left),this._applyPosition(e),this._triggerMouseEvent("sliderDrag"),!1},_mouseStop:function(){this._triggerMouseEvent("stop")},_constraintPosition:function(t){return 0!==this.element.parent().length&&null!==this.cache.parent.offset&&(t=Math.min(t,this.cache.parent.offset.left+this.cache.parent.width-this.cache.width.outer),t=Math.max(t,this.cache.parent.offset.left)),t},_applyPosition:function(t){var e={top:this.cache.offset.top,left:t};this.element.offset({left:t}),this.cache.offset=e},_cacheIfNecessary:function(){null===this.cache&&this._cache()},_cache:function(){this.cache={},this._cacheMargins(),this._cacheParent(),this._cacheDimensions(),this.cache.offset=this.element.offset()},_cacheMargins:function(){this.cache.margin={left:this._parsePixels(this.element,"marginLeft"),right:this._parsePixels(this.element,"marginRight"),top:this._parsePixels(this.element,"marginTop"),bottom:this._parsePixels(this.element,"marginBottom")}},_cacheParent:function(){if(null!==this.options.parent){var t=this.element.parent();this.cache.parent={offset:t.offset(),width:t.width()}}else this.cache.parent=null},_cacheDimensions:function(){this.cache.width={outer:this.element.outerWidth(),inner:this.element.width()}},_parsePixels:function(t,e){return parseInt(t.css(e),10)||0},_triggerMouseEvent:function(t){var e=this._prepareEventData();this.element.trigger(t,e)},_prepareEventData:function(){return{element:this.element,offset:this.cache.offset||null}}})}(jQuery),function(t,e){"use strict";t.widget("ui.rangeSlider",{options:{bounds:{min:0,max:100},defaultValues:{min:20,max:50},wheelMode:null,wheelSpeed:4,arrows:!0,valueLabels:"show",formatter:null,durationIn:0,durationOut:400,delayOut:200,range:{min:!1,max:!1},step:!1,scales:!1,enabled:!0},_values:null,_valuesChanged:!1,bar:null,leftHandle:null,rightHandle:null,innerBar:null,container:null,arrows:null,labels:null,changing:{min:!1,max:!1},changed:{min:!1,max:!1},ruler:null,_create:function(){this._setDefaultValues(),this.labels={left:null,right:null,leftDisplayed:!0,rightDisplayed:!0},this.arrows={left:null,right:null},this.changing={min:!1,max:!1},this.changed={min:!1,max:!1},this._createElements(),this._bindResize(),setTimeout(t.proxy(this.resize,this),1),setTimeout(t.proxy(this._initValues,this),1)},_setDefaultValues:function(){this._values={min:this.options.defaultValues.min,max:this.options.defaultValues.max}},_bindResize:function(){var e=this;this._resizeProxy=function(t){e.resize(t)},t(window).resize(this._resizeProxy)},_initWidth:function(){this.container.css("width",this.element.width()-this.container.outerWidth(!0)+this.container.width()),this.innerBar.css("width",this.container.width()-this.innerBar.outerWidth(!0)+this.innerBar.width())},_initValues:function(){this.values(this._values.min,this._values.max)},_setOption:function(t,e){this._setWheelOption(t,e),this._setArrowsOption(t,e),this._setLabelsOption(t,e),this._setLabelsDurations(t,e),this._setFormatterOption(t,e),this._setBoundsOption(t,e),this._setRangeOption(t,e),this._setStepOption(t,e),this._setScalesOption(t,e),this._setEnabledOption(t,e)},_validProperty:function(t,e,i){return null===t||void 0===t[e]?i:t[e]},_setStepOption:function(t,e){"step"===t&&(this.options.step=e,this._leftHandle("option","step",e),this._rightHandle("option","step",e),this._changed(!0))},_setScalesOption:function(t,e){"scales"===t&&(!1===e||null===e?(this.options.scales=!1,this._destroyRuler()):e instanceof Array&&(this.options.scales=e,this._updateRuler()))},_setRangeOption:function(t,e){"range"===t&&(this._bar("option","range",e),this.options.range=this._bar("option","range"),this._changed(!0))},_setBoundsOption:function(t,e){"bounds"===t&&void 0!==e.min&&void 0!==e.max&&this.bounds(e.min,e.max)},_setWheelOption:function(t,e){("wheelMode"===t||"wheelSpeed"===t)&&(this._bar("option",t,e),this.options[t]=this._bar("option",t))},_setLabelsOption:function(t,e){if("valueLabels"===t){if("hide"!==e&&"show"!==e&&"change"!==e)return;this.options.valueLabels=e,"hide"!==e?(this._createLabels(),this._leftLabel("update"),this._rightLabel("update")):this._destroyLabels()}},_setFormatterOption:function(t,e){"formatter"===t&&null!==e&&"function"==typeof e&&(this.options.formatter=e,"hide"!==this.options.valueLabels&&(this._destroyLabels(),this._createLabels()))},_setArrowsOption:function(t,e){"arrows"!==t||!0!==e&&!1!==e||e===this.options.arrows||(!0===e?(this.element.removeClass("ui-rangeSlider-noArrow").addClass("ui-rangeSlider-withArrows"),this.arrows.left.css("display","block"),this.arrows.right.css("display","block"),this.options.arrows=!0):!1===e&&(this.element.addClass("ui-rangeSlider-noArrow").removeClass("ui-rangeSlider-withArrows"),this.arrows.left.css("display","none"),this.arrows.right.css("display","none"),this.options.arrows=!1),this._initWidth())},_setLabelsDurations:function(t,e){if("durationIn"===t||"durationOut"===t||"delayOut"===t){if(parseInt(e,10)!==e)return;null!==this.labels.left&&this._leftLabel("option",t,e),null!==this.labels.right&&this._rightLabel("option",t,e),this.options[t]=e}},_setEnabledOption:function(t,e){"enabled"===t&&this.toggle(e)},_createElements:function(){"absolute"!==this.element.css("position")&&this.element.css("position","relative"),this.element.addClass("ui-rangeSlider"),this.container=t("<div class='ui-rangeSlider-container' />").css("position","absolute").appendTo(this.element),this.innerBar=t("<div class='ui-rangeSlider-innerBar' />").css("position","absolute").css("top",0).css("left",0),this._createHandles(),this._createBar(),this.container.prepend(this.innerBar),this._createArrows(),"hide"!==this.options.valueLabels?this._createLabels():this._destroyLabels(),this._updateRuler(),this.options.enabled||this._toggle(this.options.enabled)},_createHandle:function(e){return t("<div />")[this._handleType()](e).bind("sliderDrag",t.proxy(this._changing,this)).bind("stop",t.proxy(this._changed,this))},_createHandles:function(){this.leftHandle=this._createHandle({isLeft:!0,bounds:this.options.bounds,value:this._values.min,step:this.options.step}).appendTo(this.container),this.rightHandle=this._createHandle({isLeft:!1,bounds:this.options.bounds,value:this._values.max,step:this.options.step}).appendTo(this.container)},_createBar:function(){this.bar=t("<div />").prependTo(this.container).bind("sliderDrag scroll zoom",t.proxy(this._changing,this)).bind("stop",t.proxy(this._changed,this)),this._bar({leftHandle:this.leftHandle,rightHandle:this.rightHandle,values:{min:this._values.min,max:this._values.max},type:this._handleType(),range:this.options.range,wheelMode:this.options.wheelMode,wheelSpeed:this.options.wheelSpeed}),this.options.range=this._bar("option","range"),this.options.wheelMode=this._bar("option","wheelMode"),this.options.wheelSpeed=this._bar("option","wheelSpeed")},_createArrows:function(){this.arrows.left=this._createArrow("left"),this.arrows.right=this._createArrow("right"),this.options.arrows?this.element.addClass("ui-rangeSlider-withArrows"):(this.arrows.left.css("display","none"),this.arrows.right.css("display","none"),this.element.addClass("ui-rangeSlider-noArrow"))},_createArrow:function(e){var i,n=t("<div class='ui-rangeSlider-arrow' />").append("<div class='ui-rangeSlider-arrow-inner' />").addClass("ui-rangeSlider-"+e+"Arrow").css("position","absolute").css(e,0).appendTo(this.element);return i="right"===e?t.proxy(this._scrollRightClick,this):t.proxy(this._scrollLeftClick,this),n.bind("mousedown touchstart",i),n},_proxy:function(t,e,i){var n=Array.prototype.slice.call(i);return t[e].apply(t,n)},_handleType:function(){return"rangeSliderHandle"},_barType:function(){return"rangeSliderBar"},_bar:function(){return this._proxy(this.bar,this._barType(),arguments)},_labelType:function(){return"rangeSliderLabel"},_leftLabel:function(){return this._proxy(this.labels.left,this._labelType(),arguments)},_rightLabel:function(){return this._proxy(this.labels.right,this._labelType(),arguments)},_leftHandle:function(){return this._proxy(this.leftHandle,this._handleType(),arguments)},_rightHandle:function(){return this._proxy(this.rightHandle,this._handleType(),arguments)},_getValue:function(t,e){return e===this.rightHandle&&(t-=e.outerWidth()),t*(this.options.bounds.max-this.options.bounds.min)/(this.container.innerWidth()-e.outerWidth(!0))+this.options.bounds.min},_trigger:function(t){var e=this;setTimeout((function(){e.element.trigger(t,{label:e.element,values:e.values()})}),1)},_changing:function(){this._updateValues()&&(this._trigger("valuesChanging"),this._valuesChanged=!0)},_deactivateLabels:function(){"change"===this.options.valueLabels&&(this._leftLabel("option","show","hide"),this._rightLabel("option","show","hide"))},_reactivateLabels:function(){"change"===this.options.valueLabels&&(this._leftLabel("option","show","change"),this._rightLabel("option","show","change"))},_changed:function(t){!0===t&&this._deactivateLabels(),(this._updateValues()||this._valuesChanged)&&(this._trigger("valuesChanged"),!0!==t&&this._trigger("userValuesChanged"),this._valuesChanged=!1),!0===t&&this._reactivateLabels()},_updateValues:function(){var t=this._leftHandle("value"),e=this._rightHandle("value"),i=this._min(t,e),n=this._max(t,e),s=i!==this._values.min||n!==this._values.max;return this._values.min=this._min(t,e),this._values.max=this._max(t,e),s},_min:function(t,e){return Math.min(t,e)},_max:function(t,e){return Math.max(t,e)},_createLabel:function(e,i){var n;return null===e?(n=this._getLabelConstructorParameters(e,i),e=t("<div />").appendTo(this.element)[this._labelType()](n)):(n=this._getLabelRefreshParameters(e,i),e[this._labelType()](n)),e},_getLabelConstructorParameters:function(t,e){return{handle:e,handleType:this._handleType(),formatter:this._getFormatter(),show:this.options.valueLabels,durationIn:this.options.durationIn,durationOut:this.options.durationOut,delayOut:this.options.delayOut}},_getLabelRefreshParameters:function(){return{formatter:this._getFormatter(),show:this.options.valueLabels,durationIn:this.options.durationIn,durationOut:this.options.durationOut,delayOut:this.options.delayOut}},_getFormatter:function(){return!1===this.options.formatter||null===this.options.formatter?this._defaultFormatter:this.options.formatter},_defaultFormatter:function(t){return Math.round(t)},_destroyLabel:function(t){return null!==t&&(t[this._labelType()]("destroy"),t.remove(),t=null),t},_createLabels:function(){this.labels.left=this._createLabel(this.labels.left,this.leftHandle),this.labels.right=this._createLabel(this.labels.right,this.rightHandle),this._leftLabel("pair",this.labels.right)},_destroyLabels:function(){this.labels.left=this._destroyLabel(this.labels.left),this.labels.right=this._destroyLabel(this.labels.right)},_stepRatio:function(){return this._leftHandle("stepRatio")},_scrollRightClick:function(t){return!!this.options.enabled&&(t.preventDefault(),this._bar("startScroll"),this._bindStopScroll(),void this._continueScrolling("scrollRight",4*this._stepRatio(),1))},_continueScrolling:function(t,e,i,n){if(!this.options.enabled)return!1;this._bar(t,i),n=n||5,n--;var s=this,r=Math.max(1,4/this._stepRatio());this._scrollTimeout=setTimeout((function(){0===n&&(e>16?e=Math.max(16,e/1.5):i=Math.min(r,2*i),n=5),s._continueScrolling(t,e,i,n)}),e)},_scrollLeftClick:function(t){return!!this.options.enabled&&(t.preventDefault(),this._bar("startScroll"),this._bindStopScroll(),void this._continueScrolling("scrollLeft",4*this._stepRatio(),1))},_bindStopScroll:function(){var e=this;this._stopScrollHandle=function(t){t.preventDefault(),e._stopScroll()},t(document).bind("mouseup touchend",this._stopScrollHandle)},_stopScroll:function(){t(document).unbind("mouseup touchend",this._stopScrollHandle),this._stopScrollHandle=null,this._bar("stopScroll"),clearTimeout(this._scrollTimeout)},_createRuler:function(){this.ruler=t("<div class='ui-rangeSlider-ruler' />").appendTo(this.innerBar)},_setRulerParameters:function(){this.ruler.ruler({min:this.options.bounds.min,max:this.options.bounds.max,scales:this.options.scales})},_destroyRuler:function(){null!==this.ruler&&t.fn.ruler&&(this.ruler.ruler("destroy"),this.ruler.remove(),this.ruler=null)},_updateRuler:function(){this._destroyRuler(),!1!==this.options.scales&&t.fn.ruler&&(this._createRuler(),this._setRulerParameters())},values:function(t,e){var i;return void 0!==t&&void 0!==e?(this._deactivateLabels(),i=this._bar("values",t,e),this._changed(!0),this._reactivateLabels()):i=this._bar("values",t,e),i},min:function(t){return this._values.min=this.values(t,this._values.max).min,this._values.min},max:function(t){return this._values.max=this.values(this._values.min,t).max,this._values.max},bounds:function(t,e){return this._isValidValue(t)&&this._isValidValue(e)&&e>t&&(this._setBounds(t,e),this._updateRuler(),this._changed(!0)),this.options.bounds},_isValidValue:function(t){return void 0!==t&&parseFloat(t)===t},_setBounds:function(t,e){this.options.bounds={min:t,max:e},this._leftHandle("option","bounds",this.options.bounds),this._rightHandle("option","bounds",this.options.bounds),this._bar("option","bounds",this.options.bounds)},zoomIn:function(t){this._bar("zoomIn",t)},zoomOut:function(t){this._bar("zoomOut",t)},scrollLeft:function(t){this._bar("startScroll"),this._bar("scrollLeft",t),this._bar("stopScroll")},scrollRight:function(t){this._bar("startScroll"),this._bar("scrollRight",t),this._bar("stopScroll")},resize:function(){this._initWidth(),this._leftHandle("update"),this._rightHandle("update"),this._bar("update")},enable:function(){this.toggle(!0)},disable:function(){this.toggle(!1)},toggle:function(t){void 0===t&&(t=!this.options.enabled),this.options.enabled!==t&&this._toggle(t)},_toggle:function(t){this.options.enabled=t,this.element.toggleClass("ui-rangeSlider-disabled",!t);var e=t?"enable":"disable";this._bar(e),this._leftHandle(e),this._rightHandle(e),this._leftLabel(e),this._rightLabel(e)},destroy:function(){this.element.removeClass("ui-rangeSlider-withArrows ui-rangeSlider-noArrow ui-rangeSlider-disabled"),this._destroyWidgets(),this._destroyElements(),this.element.removeClass("ui-rangeSlider"),this.options=null,t(window).unbind("resize",this._resizeProxy),this._resizeProxy=null,this._bindResize=null,t.Widget.prototype.destroy.apply(this,arguments)},_destroyWidget:function(t){this["_"+t]("destroy"),this[t].remove(),this[t]=null},_destroyWidgets:function(){this._destroyWidget("bar"),this._destroyWidget("leftHandle"),this._destroyWidget("rightHandle"),this._destroyRuler(),this._destroyLabels()},_destroyElements:function(){this.container.remove(),this.container=null,this.innerBar.remove(),this.innerBar=null,this.arrows.left.remove(),this.arrows.right.remove(),this.arrows=null}})}(jQuery),function(t){"use strict";t.widget("ui.rangeSliderHandle",t.ui.rangeSliderDraggable,{currentMove:null,margin:0,parentElement:null,options:{isLeft:!0,bounds:{min:0,max:100},range:!1,value:0,step:!1},_value:0,_left:0,_create:function(){t.ui.rangeSliderDraggable.prototype._create.apply(this),this.element.css("position","absolute").css("top",0).addClass("ui-rangeSlider-handle").toggleClass("ui-rangeSlider-leftHandle",this.options.isLeft).toggleClass("ui-rangeSlider-rightHandle",!this.options.isLeft),this.element.append("<div class='ui-rangeSlider-handle-inner' />"),this._value=this._constraintValue(this.options.value)},destroy:function(){this.element.empty(),t.ui.rangeSliderDraggable.prototype.destroy.apply(this)},_setOption:function(e,i){"isLeft"!==e||!0!==i&&!1!==i||i===this.options.isLeft?"step"===e&&this._checkStep(i)?(this.options.step=i,this.update()):"bounds"===e?(this.options.bounds=i,this.update()):"range"===e&&this._checkRange(i)&&(this.options.range=i,this.update()):(this.options.isLeft=i,this.element.toggleClass("ui-rangeSlider-leftHandle",this.options.isLeft).toggleClass("ui-rangeSlider-rightHandle",!this.options.isLeft),this._position(this._value),this.element.trigger("switch",this.options.isLeft)),t.ui.rangeSliderDraggable.prototype._setOption.apply(this,[e,i])},_checkRange:function(t){return!1===t||!this._isValidValue(t.min)&&!this._isValidValue(t.max)},_isValidValue:function(t){return void 0!==t&&!1!==t&&parseFloat(t)!==t},_checkStep:function(t){return!1===t||parseFloat(t)===t},_initElement:function(){t.ui.rangeSliderDraggable.prototype._initElement.apply(this),0===this.cache.parent.width||null===this.cache.parent.width?setTimeout(t.proxy(this._initElementIfNotDestroyed,this),500):(this._position(this._value),this._triggerMouseEvent("initialize"))},_bounds:function(){return this.options.bounds},_cache:function(){t.ui.rangeSliderDraggable.prototype._cache.apply(this),this._cacheParent()},_cacheParent:function(){var t=this.element.parent();this.cache.parent={element:t,offset:t.offset(),padding:{left:this._parsePixels(t,"paddingLeft")},width:t.width()}},_position:function(t){var e=this._getPositionForValue(t);this._applyPosition(e)},_constraintPosition:function(t){var e=this._getValueForPosition(t);return this._getPositionForValue(e)},_applyPosition:function(e){t.ui.rangeSliderDraggable.prototype._applyPosition.apply(this,[e]),this._left=e,this._setValue(this._getValueForPosition(e)),this._triggerMouseEvent("moving")},_prepareEventData:function(){var e=t.ui.rangeSliderDraggable.prototype._prepareEventData.apply(this);return e.value=this._value,e},_setValue:function(t){t!==this._value&&(this._value=t)},_constraintValue:function(t){if(t=Math.min(t,this._bounds().max),t=Math.max(t,this._bounds().min),t=this._round(t),!1!==this.options.range){var e=this.options.range.min||!1,i=this.options.range.max||!1;!1!==e&&(t=Math.max(t,this._round(e))),!1!==i&&(t=Math.min(t,this._round(i))),t=Math.min(t,this._bounds().max),t=Math.max(t,this._bounds().min)}return t},_round:function(t){return!1!==this.options.step&&this.options.step>0?Math.round(t/this.options.step)*this.options.step:t},_getPositionForValue:function(t){return this.cache&&this.cache.parent&&null!==this.cache.parent.offset?((t=this._constraintValue(t))-this.options.bounds.min)/(this.options.bounds.max-this.options.bounds.min)*(this.cache.parent.width-this.cache.width.outer)+this.cache.parent.offset.left:0},_getValueForPosition:function(t){var e=this._getRawValueForPositionAndBounds(t,this.options.bounds.min,this.options.bounds.max);return this._constraintValue(e)},_getRawValueForPositionAndBounds:function(t,e,i){return(t-(null===this.cache.parent.offset?0:this.cache.parent.offset.left))/(this.cache.parent.width-this.cache.width.outer)*(i-e)+e},value:function(t){return void 0!==t&&(this._cache(),t=this._constraintValue(t),this._position(t)),this._value},update:function(){this._cache();var t=this._constraintValue(this._value),e=this._getPositionForValue(t);t!==this._value?(this._triggerMouseEvent("updating"),this._position(t),this._triggerMouseEvent("update")):e!==this.cache.offset.left&&(this._triggerMouseEvent("updating"),this._position(t),this._triggerMouseEvent("update"))},position:function(t){return void 0!==t&&(this._cache(),t=this._constraintPosition(t),this._applyPosition(t)),this._left},add:function(t,e){return t+e},substract:function(t,e){return t-e},stepsBetween:function(t,e){return!1===this.options.step?e-t:(e-t)/this.options.step},multiplyStep:function(t,e){return t*e},moveRight:function(t){var e;return!1===this.options.step?(e=this._left,this.position(this._left+t),this._left-e):(e=this._value,this.value(this.add(e,this.multiplyStep(this.options.step,t))),this.stepsBetween(e,this._value))},moveLeft:function(t){return-this.moveRight(-t)},stepRatio:function(){if(!1===this.options.step)return 1;var t=(this.options.bounds.max-this.options.bounds.min)/this.options.step;return this.cache.parent.width/t}})}(jQuery),function(t){"use strict";function e(t,e){return void 0===t?e||!1:t}t.widget("ui.rangeSliderBar",t.ui.rangeSliderDraggable,{options:{leftHandle:null,rightHandle:null,bounds:{min:0,max:100},type:"rangeSliderHandle",range:!1,drag:function(){},stop:function(){},values:{min:0,max:20},wheelSpeed:4,wheelMode:null},_values:{min:0,max:20},_waitingToInit:2,_wheelTimeout:!1,_create:function(){t.ui.rangeSliderDraggable.prototype._create.apply(this),this.element.css("position","absolute").css("top",0).addClass("ui-rangeSlider-bar"),this.options.leftHandle.bind("initialize",t.proxy(this._onInitialized,this)).bind("mousestart",t.proxy(this._cache,this)).bind("stop",t.proxy(this._onHandleStop,this)),this.options.rightHandle.bind("initialize",t.proxy(this._onInitialized,this)).bind("mousestart",t.proxy(this._cache,this)).bind("stop",t.proxy(this._onHandleStop,this)),this._bindHandles(),this._values=this.options.values,this._setWheelModeOption(this.options.wheelMode)},destroy:function(){this.options.leftHandle.unbind(".bar"),this.options.rightHandle.unbind(".bar"),this.options=null,t.ui.rangeSliderDraggable.prototype.destroy.apply(this)},_setOption:function(t,e){"range"===t?this._setRangeOption(e):"wheelSpeed"===t?this._setWheelSpeedOption(e):"wheelMode"===t&&this._setWheelModeOption(e)},_setRangeOption:function(t){if(("object"!=_typeof(t)||null===t)&&(t=!1),!1!==t||!1!==this.options.range){if(!1!==t){var i=e(t.min,this.options.range.min),n=e(t.max,this.options.range.max);this.options.range={min:i,max:n}}else this.options.range=!1;this._setLeftRange(),this._setRightRange()}},_setWheelSpeedOption:function(t){"number"==typeof t&&t>0&&(this.options.wheelSpeed=t)},_setWheelModeOption:function(t){(null===t||!1===t||"zoom"===t||"scroll"===t)&&(this.options.wheelMode!==t&&this.element.parent().unbind("mousewheel.bar"),this._bindMouseWheel(t),this.options.wheelMode=t)},_bindMouseWheel:function(e){"zoom"===e?this.element.parent().bind("mousewheel.bar",t.proxy(this._mouseWheelZoom,this)):"scroll"===e&&this.element.parent().bind("mousewheel.bar",t.proxy(this._mouseWheelScroll,this))},_setLeftRange:function(){if(!1===this.options.range)return!1;var t=this._values.max,e={min:!1,max:!1};e.max=!1!==(this.options.range.min||!1)&&this._leftHandle("substract",t,this.options.range.min),e.min=!1!==(this.options.range.max||!1)&&this._leftHandle("substract",t,this.options.range.max),this._leftHandle("option","range",e)},_setRightRange:function(){var t=this._values.min,e={min:!1,max:!1};e.min=!1!==(this.options.range.min||!1)&&this._rightHandle("add",t,this.options.range.min),e.max=!1!==(this.options.range.max||!1)&&this._rightHandle("add",t,this.options.range.max),this._rightHandle("option","range",e)},_deactivateRange:function(){this._leftHandle("option","range",!1),this._rightHandle("option","range",!1)},_reactivateRange:function(){this._setRangeOption(this.options.range)},_onInitialized:function(){this._waitingToInit--,0===this._waitingToInit&&this._initMe()},_initMe:function(){this._cache(),this.min(this._values.min),this.max(this._values.max);var t=this._leftHandle("position"),e=this._rightHandle("position")+this.options.rightHandle.width();this.element.offset({left:t}),this.element.css("width",e-t)},_leftHandle:function(){return this._handleProxy(this.options.leftHandle,arguments)},_rightHandle:function(){return this._handleProxy(this.options.rightHandle,arguments)},_handleProxy:function(t,e){var i=Array.prototype.slice.call(e);return t[this.options.type].apply(t,i)},_cache:function(){t.ui.rangeSliderDraggable.prototype._cache.apply(this),this._cacheHandles()},_cacheHandles:function(){this.cache.rightHandle={},this.cache.rightHandle.width=this.options.rightHandle.width(),this.cache.rightHandle.offset=this.options.rightHandle.offset(),this.cache.leftHandle={},this.cache.leftHandle.offset=this.options.leftHandle.offset()},_mouseStart:function(e){t.ui.rangeSliderDraggable.prototype._mouseStart.apply(this,[e]),this._deactivateRange()},_mouseStop:function(e){t.ui.rangeSliderDraggable.prototype._mouseStop.apply(this,[e]),this._cacheHandles(),this._values.min=this._leftHandle("value"),this._values.max=this._rightHandle("value"),this._reactivateRange(),this._leftHandle().trigger("stop"),this._rightHandle().trigger("stop")},_onDragLeftHandle:function(t,e){if(this._cacheIfNecessary(),e.element[0]===this.options.leftHandle[0]){if(this._switchedValues())return this._switchHandles(),void this._onDragRightHandle(t,e);this._values.min=e.value,this.cache.offset.left=e.offset.left,this.cache.leftHandle.offset=e.offset,this._positionBar()}},_onDragRightHandle:function(t,e){if(this._cacheIfNecessary(),e.element[0]===this.options.rightHandle[0]){if(this._switchedValues())return this._switchHandles(),void this._onDragLeftHandle(t,e);this._values.max=e.value,this.cache.rightHandle.offset=e.offset,this._positionBar()}},_positionBar:function(){var t=this.cache.rightHandle.offset.left+this.cache.rightHandle.width-this.cache.leftHandle.offset.left;this.cache.width.inner=t,this.element.css("width",t).offset({left:this.cache.leftHandle.offset.left})},_onHandleStop:function(){this._setLeftRange(),this._setRightRange()},_switchedValues:function(){if(this.min()>this.max()){var t=this._values.min;return this._values.min=this._values.max,this._values.max=t,!0}return!1},_switchHandles:function(){var t=this.options.leftHandle;this.options.leftHandle=this.options.rightHandle,this.options.rightHandle=t,this._leftHandle("option","isLeft",!0),this._rightHandle("option","isLeft",!1),this._bindHandles(),this._cacheHandles()},_bindHandles:function(){this.options.leftHandle.unbind(".bar").bind("sliderDrag.bar update.bar moving.bar",t.proxy(this._onDragLeftHandle,this)),this.options.rightHandle.unbind(".bar").bind("sliderDrag.bar update.bar moving.bar",t.proxy(this._onDragRightHandle,this))},_constraintPosition:function(e){var i,n={};return n.left=t.ui.rangeSliderDraggable.prototype._constraintPosition.apply(this,[e]),n.left=this._leftHandle("position",n.left),i=this._rightHandle("position",n.left+this.cache.width.outer-this.cache.rightHandle.width),n.width=i-n.left+this.cache.rightHandle.width,n},_applyPosition:function(e){t.ui.rangeSliderDraggable.prototype._applyPosition.apply(this,[e.left]),this.element.width(e.width)},_mouseWheelZoom:function(e,i,n,s){if(!this.enabled)return!1;var r=this._values.min+(this._values.max-this._values.min)/2,o={},a={};return!1===this.options.range||!1===this.options.range.min?(o.max=r,a.min=r):(o.max=r-this.options.range.min/2,a.min=r+this.options.range.min/2),!1!==this.options.range&&!1!==this.options.range.max&&(o.min=r-this.options.range.max/2,a.max=r+this.options.range.max/2),this._leftHandle("option","range",o),this._rightHandle("option","range",a),clearTimeout(this._wheelTimeout),this._wheelTimeout=setTimeout(t.proxy(this._wheelStop,this),200),this.zoomOut(s*this.options.wheelSpeed),!1},_mouseWheelScroll:function(e,i,n,s){return!!this.enabled&&(!1===this._wheelTimeout?this.startScroll():clearTimeout(this._wheelTimeout),this._wheelTimeout=setTimeout(t.proxy(this._wheelStop,this),200),this.scrollLeft(s*this.options.wheelSpeed),!1)},_wheelStop:function(){this.stopScroll(),this._wheelTimeout=!1},min:function(t){return this._leftHandle("value",t)},max:function(t){return this._rightHandle("value",t)},startScroll:function(){this._deactivateRange()},stopScroll:function(){this._reactivateRange(),this._triggerMouseEvent("stop"),this._leftHandle().trigger("stop"),this._rightHandle().trigger("stop")},scrollLeft:function(t){return 0>(t=t||1)?this.scrollRight(-t):(t=this._leftHandle("moveLeft",t),this._rightHandle("moveLeft",t),this.update(),void this._triggerMouseEvent("scroll"))},scrollRight:function(t){return 0>(t=t||1)?this.scrollLeft(-t):(t=this._rightHandle("moveRight",t),this._leftHandle("moveRight",t),this.update(),void this._triggerMouseEvent("scroll"))},zoomIn:function(t){if(0>(t=t||1))return this.zoomOut(-t);var e=this._rightHandle("moveLeft",t);t>e&&(e/=2,this._rightHandle("moveRight",e)),this._leftHandle("moveRight",e),this.update(),this._triggerMouseEvent("zoom")},zoomOut:function(t){if(0>(t=t||1))return this.zoomIn(-t);var e=this._rightHandle("moveRight",t);t>e&&(e/=2,this._rightHandle("moveLeft",e)),this._leftHandle("moveLeft",e),this.update(),this._triggerMouseEvent("zoom")},values:function(t,e){if(void 0!==t&&void 0!==e){var i=Math.min(t,e),n=Math.max(t,e);this._deactivateRange(),this.options.leftHandle.unbind(".bar"),this.options.rightHandle.unbind(".bar"),this._values.min=this._leftHandle("value",i),this._values.max=this._rightHandle("value",n),this._bindHandles(),this._reactivateRange(),this.update()}return{min:this._values.min,max:this._values.max}},update:function(){this._values.min=this.min(),this._values.max=this.max(),this._cache(),this._positionBar()}})}(jQuery),function(t){"use strict";function e(e,i,n,s){this.label1=e,this.label2=i,this.type=n,this.options=s,this.handle1=this.label1[this.type]("option","handle"),this.handle2=this.label2[this.type]("option","handle"),this.cache=null,this.left=e,this.right=i,this.moving=!1,this.initialized=!1,this.updating=!1,this.Init=function(){this.BindHandle(this.handle1),this.BindHandle(this.handle2),"show"===this.options.show?(setTimeout(t.proxy(this.PositionLabels,this),1),this.initialized=!0):setTimeout(t.proxy(this.AfterInit,this),1e3),this._resizeProxy=t.proxy(this.onWindowResize,this),t(window).resize(this._resizeProxy)},this.Destroy=function(){this._resizeProxy&&(t(window).unbind("resize",this._resizeProxy),this._resizeProxy=null,this.handle1.unbind(".positionner"),this.handle1=null,this.handle2.unbind(".positionner"),this.handle2=null,this.label1=null,this.label2=null,this.left=null,this.right=null),this.cache=null},this.AfterInit=function(){this.initialized=!0},this.Cache=function(){"none"!==this.label1.css("display")&&(this.cache={},this.cache.label1={},this.cache.label2={},this.cache.handle1={},this.cache.handle2={},this.cache.offsetParent={},this.CacheElement(this.label1,this.cache.label1),this.CacheElement(this.label2,this.cache.label2),this.CacheElement(this.handle1,this.cache.handle1),this.CacheElement(this.handle2,this.cache.handle2),this.CacheElement(this.label1.offsetParent(),this.cache.offsetParent))},this.CacheIfNecessary=function(){null===this.cache?this.Cache():(this.CacheWidth(this.label1,this.cache.label1),this.CacheWidth(this.label2,this.cache.label2),this.CacheHeight(this.label1,this.cache.label1),this.CacheHeight(this.label2,this.cache.label2),this.CacheWidth(this.label1.offsetParent(),this.cache.offsetParent))},this.CacheElement=function(t,e){this.CacheWidth(t,e),this.CacheHeight(t,e),e.offset=t.offset(),e.margin={left:this.ParsePixels("marginLeft",t),right:this.ParsePixels("marginRight",t)},e.border={left:this.ParsePixels("borderLeftWidth",t),right:this.ParsePixels("borderRightWidth",t)}},this.CacheWidth=function(t,e){e.width=t.width(),e.outerWidth=t.outerWidth()},this.CacheHeight=function(t,e){e.outerHeightMargin=t.outerHeight(!0)},this.ParsePixels=function(t,e){return parseInt(e.css(t),10)||0},this.BindHandle=function(e){e.bind("updating.positionner",t.proxy(this.onHandleUpdating,this)),e.bind("update.positionner",t.proxy(this.onHandleUpdated,this)),e.bind("moving.positionner",t.proxy(this.onHandleMoving,this)),e.bind("stop.positionner",t.proxy(this.onHandleStop,this))},this.PositionLabels=function(){if(this.CacheIfNecessary(),null!==this.cache){var t=this.GetRawPosition(this.cache.label1,this.cache.handle1),e=this.GetRawPosition(this.cache.label2,this.cache.handle2);this.ConstraintPositions(t,e),this.PositionLabel(this.label1,t.left,this.cache.label1),this.PositionLabel(this.label2,e.left,this.cache.label2)}},this.PositionLabel=function(t,e,i){var n,s=this.cache.offsetParent.offset.left+this.cache.offsetParent.border.left;s-e>=0?(t.css("right",""),t.offset({left:e})):(n=s+this.cache.offsetParent.width-(e+i.margin.left+i.outerWidth+i.margin.right),t.css("left",""),t.css("right",n))},this.ConstraintPositions=function(t,e){t.center<e.center&&t.outerRight>e.outerLeft?(t=this.getLeftPosition(t,e),e=this.getRightPosition(t,e)):t.center>e.center&&e.outerRight>t.outerLeft&&(e=this.getLeftPosition(e,t),t=this.getRightPosition(e,t))},this.getLeftPosition=function(t,e){var i=(e.center+t.center)/2-t.cache.outerWidth-t.cache.margin.right+t.cache.border.left;return t.left=i,t},this.getRightPosition=function(t,e){var i=(e.center+t.center)/2;return e.left=i+e.cache.margin.left+e.cache.border.left,e},this.ShowIfNecessary=function(){"show"===this.options.show||this.moving||!this.initialized||this.updating||(this.label1.stop(!0,!0).fadeIn(this.options.durationIn||0),this.label2.stop(!0,!0).fadeIn(this.options.durationIn||0),this.moving=!0)},this.HideIfNeeded=function(){!0===this.moving&&(this.label1.stop(!0,!0).delay(this.options.delayOut||0).fadeOut(this.options.durationOut||0),this.label2.stop(!0,!0).delay(this.options.delayOut||0).fadeOut(this.options.durationOut||0),this.moving=!1)},this.onHandleMoving=function(t,e){this.ShowIfNecessary(),this.CacheIfNecessary(),this.UpdateHandlePosition(e),this.PositionLabels()},this.onHandleUpdating=function(){this.updating=!0},this.onHandleUpdated=function(){this.updating=!1,this.cache=null},this.onHandleStop=function(){this.HideIfNeeded()},this.onWindowResize=function(){this.cache=null},this.UpdateHandlePosition=function(t){null!==this.cache&&(t.element[0]===this.handle1[0]?this.UpdatePosition(t,this.cache.handle1):this.UpdatePosition(t,this.cache.handle2))},this.UpdatePosition=function(t,e){e.offset=t.offset},this.GetRawPosition=function(t,e){var i=e.offset.left+e.outerWidth/2,n=i-t.outerWidth/2,s=n+t.outerWidth-t.border.left-t.border.right,r=n-t.margin.left-t.border.left;return{left:n,outerLeft:r,top:e.offset.top-t.outerHeightMargin,right:s,outerRight:r+t.outerWidth+t.margin.left+t.margin.right,cache:t,center:i}},this.Init()}t.widget("ui.rangeSliderLabel",t.ui.rangeSliderMouseTouch,{options:{handle:null,formatter:!1,handleType:"rangeSliderHandle",show:"show",durationIn:0,durationOut:500,delayOut:500,isLeft:!1},cache:null,_positionner:null,_valueContainer:null,_innerElement:null,_create:function(){this.options.isLeft=this._handle("option","isLeft"),this.element.addClass("ui-rangeSlider-label").css("position","absolute").css("display","block"),this._createElements(),this._toggleClass(),this.options.handle.bind("moving.label",t.proxy(this._onMoving,this)).bind("update.label",t.proxy(this._onUpdate,this)).bind("switch.label",t.proxy(this._onSwitch,this)),"show"!==this.options.show&&this.element.hide(),this._mouseInit()},destroy:function(){this.options.handle.unbind(".label"),this.options.handle=null,this._valueContainer=null,this._innerElement=null,this.element.empty(),this._positionner&&(this._positionner.Destroy(),this._positionner=null),t.ui.rangeSliderMouseTouch.prototype.destroy.apply(this)},_createElements:function(){this._valueContainer=t("<div class='ui-rangeSlider-label-value' />").appendTo(this.element),this._innerElement=t("<div class='ui-rangeSlider-label-inner' />").appendTo(this.element)},_handle:function(){var t=Array.prototype.slice.apply(arguments);return this.options.handle[this.options.handleType].apply(this.options.handle,t)},_setOption:function(t,e){"show"===t?this._updateShowOption(e):("durationIn"===t||"durationOut"===t||"delayOut"===t)&&this._updateDurations(t,e)},_updateShowOption:function(t){this.options.show=t,"show"!==this.options.show?this.element.hide():(this.element.show(),this._display(this.options.handle[this.options.handleType]("value")),this._positionner.PositionLabels()),this._positionner.options.show=this.options.show},_updateDurations:function(t,e){parseInt(e,10)===e&&(this._positionner.options[t]=e,this.options[t]=e)},_display:function(t){!1===this.options.formatter?this._displayText(Math.round(t)):this._displayText(this.options.formatter(t))},_displayText:function(t){this._valueContainer.text(t)},_toggleClass:function(){this.element.toggleClass("ui-rangeSlider-leftLabel",this.options.isLeft).toggleClass("ui-rangeSlider-rightLabel",!this.options.isLeft)},_mouseDown:function(t){this.options.handle.trigger(t)},_mouseUp:function(t){this.options.handle.trigger(t)},_mouseMove:function(t){this.options.handle.trigger(t)},_onMoving:function(t,e){this._display(e.value)},_onUpdate:function(){"show"===this.options.show&&this.update()},_onSwitch:function(t,e){this.options.isLeft=e,this._toggleClass(),this._positionner.PositionLabels()},pair:function(t){null===this._positionner&&(this._positionner=new e(this.element,t,this.widgetName,{show:this.options.show,durationIn:this.options.durationIn,durationOut:this.options.durationOut,delayOut:this.options.delayOut}),t[this.widgetName]("positionner",this._positionner))},positionner:function(t){return void 0!==t&&(this._positionner=t),this._positionner},update:function(){this._positionner.cache=null,this._display(this._handle("value")),"show"===this.options.show&&this._positionner.PositionLabels()}})}(jQuery),function(t){"use strict";t.widget("ui.dateRangeSlider",t.ui.rangeSlider,{options:{bounds:{min:new Date(2010,0,1).valueOf(),max:new Date(2012,0,1).valueOf()},defaultValues:{min:new Date(2010,1,11).valueOf(),max:new Date(2011,1,11).valueOf()}},_create:function(){t.ui.rangeSlider.prototype._create.apply(this),this.element.addClass("ui-dateRangeSlider")},destroy:function(){this.element.removeClass("ui-dateRangeSlider"),t.ui.rangeSlider.prototype.destroy.apply(this)},_setDefaultValues:function(){this._values={min:this.options.defaultValues.min.valueOf(),max:this.options.defaultValues.max.valueOf()}},_setRulerParameters:function(){this.ruler.ruler({min:new Date(this.options.bounds.min),max:new Date(this.options.bounds.max),scales:this.options.scales})},_setOption:function(e,i){("defaultValues"===e||"bounds"===e)&&null!=i&&this._isValidDate(i.min)&&this._isValidDate(i.max)?t.ui.rangeSlider.prototype._setOption.apply(this,[e,{min:i.min.valueOf(),max:i.max.valueOf()}]):t.ui.rangeSlider.prototype._setOption.apply(this,this._toArray(arguments))},_handleType:function(){return"dateRangeSliderHandle"},option:function(e){if("bounds"===e||"defaultValues"===e){var i=t.ui.rangeSlider.prototype.option.apply(this,arguments);return{min:new Date(i.min),max:new Date(i.max)}}return t.ui.rangeSlider.prototype.option.apply(this,this._toArray(arguments))},_defaultFormatter:function(t){var e=t.getMonth()+1,i=t.getDate();return t.getFullYear()+"-"+(10>e?"0"+e:e)+"-"+(10>i?"0"+i:i)},_getFormatter:function(){var t=this.options.formatter;return(!1===this.options.formatter||null===this.options.formatter)&&(t=this._defaultFormatter),function(t){return function(e){return t(new Date(e))}}(t)},values:function(e,i){var n=null;return n=this._isValidDate(e)&&this._isValidDate(i)?t.ui.rangeSlider.prototype.values.apply(this,[e.valueOf(),i.valueOf()]):t.ui.rangeSlider.prototype.values.apply(this,this._toArray(arguments)),{min:new Date(n.min),max:new Date(n.max)}},min:function(e){return this._isValidDate(e)?new Date(t.ui.rangeSlider.prototype.min.apply(this,[e.valueOf()])):new Date(t.ui.rangeSlider.prototype.min.apply(this))},max:function(e){return this._isValidDate(e)?new Date(t.ui.rangeSlider.prototype.max.apply(this,[e.valueOf()])):new Date(t.ui.rangeSlider.prototype.max.apply(this))},bounds:function(e,i){var n;return n=this._isValidDate(e)&&this._isValidDate(i)?t.ui.rangeSlider.prototype.bounds.apply(this,[e.valueOf(),i.valueOf()]):t.ui.rangeSlider.prototype.bounds.apply(this,this._toArray(arguments)),{min:new Date(n.min),max:new Date(n.max)}},_isValidDate:function(t){return void 0!==t&&t instanceof Date},_toArray:function(t){return Array.prototype.slice.call(t)}})}(jQuery),function(t){"use strict";t.widget("ui.dateRangeSliderHandle",t.ui.rangeSliderHandle,{_steps:!1,_boundsValues:{},_create:function(){this._createBoundsValues(),t.ui.rangeSliderHandle.prototype._create.apply(this)},_getValueForPosition:function(t){var e=this._getRawValueForPositionAndBounds(t,this.options.bounds.min.valueOf(),this.options.bounds.max.valueOf());return this._constraintValue(new Date(e))},_setOption:function(e,i){return"step"===e?(this.options.step=i,this._createSteps(),void this.update()):(t.ui.rangeSliderHandle.prototype._setOption.apply(this,[e,i]),void("bounds"===e&&this._createBoundsValues()))},_createBoundsValues:function(){this._boundsValues={min:this.options.bounds.min.valueOf(),max:this.options.bounds.max.valueOf()}},_bounds:function(){return this._boundsValues},_createSteps:function(){if(!1!==this.options.step&&this._isValidStep()){var t=new Date(this.options.bounds.min),e=new Date(this.options.bounds.max),i=t,n=0,s=new Date;for(this._steps=[];e>=i&&(1===n||s.valueOf()!==i.valueOf());)s=i,this._steps.push(i.valueOf()),i=this._addStep(t,n,this.options.step),n++;s.valueOf()===i.valueOf()&&(this._steps=!1)}else this._steps=!1},_isValidStep:function(){return"object"==_typeof(this.options.step)},_addStep:function(t,e,i){var n=new Date(t.valueOf());return n=this._addThing(n,"FullYear",e,i.years),n=this._addThing(n,"Month",e,i.months),n=this._addThing(n,"Date",e,7*i.weeks),n=this._addThing(n,"Date",e,i.days),n=this._addThing(n,"Hours",e,i.hours),n=this._addThing(n,"Minutes",e,i.minutes),this._addThing(n,"Seconds",e,i.seconds)},_addThing:function(t,e,i,n){return 0===i||0===(n||0)?t:(t["set"+e](t["get"+e]()+i*(n||0)),t)},_round:function(t){if(!1===this._steps)return t;for(var e,i,n=this.options.bounds.max.valueOf(),s=this.options.bounds.min.valueOf(),r=Math.max(0,(t-s)/(n-s)),o=Math.floor(this._steps.length*r);this._steps[o]>t;)o--;for(;o+1<this._steps.length&&this._steps[o+1]<=t;)o++;return o>=this._steps.length-1?this._steps[this._steps.length-1]:0===o?this._steps[0]:(e=this._steps[o],(i=this._steps[o+1])-t>t-e?e:i)},update:function(){this._createBoundsValues(),this._createSteps(),t.ui.rangeSliderHandle.prototype.update.apply(this)},add:function(t,e){return this._addStep(new Date(t),1,e).valueOf()},substract:function(t,e){return this._addStep(new Date(t),-1,e).valueOf()},stepsBetween:function(t,e){if(!1===this.options.step)return e-t;var i=Math.min(t,e),n=Math.max(t,e),s=0,r=!1,o=t>e;for(this.add(i,this.options.step)-i<0&&(r=!0);n>i;)r?n=this.add(n,this.options.step):i=this.add(i,this.options.step),s++;return o?-s:s},multiplyStep:function(t,e){var i={};for(var n in t)t.hasOwnProperty(n)&&(i[n]=t[n]*e);return i},stepRatio:function(){if(!1===this.options.step)return 1;var t=this._steps.length;return this.cache.parent.width/t}})}(jQuery),function(t){"use strict";t.widget("ui.editRangeSlider",t.ui.rangeSlider,{options:{type:"text",round:1},_create:function(){t.ui.rangeSlider.prototype._create.apply(this),this.element.addClass("ui-editRangeSlider")},destroy:function(){this.element.removeClass("ui-editRangeSlider"),t.ui.rangeSlider.prototype.destroy.apply(this)},_setOption:function(e,i){("type"===e||"step"===e)&&this._setLabelOption(e,i),"type"===e&&(this.options[e]=null===this.labels.left?i:this._leftLabel("option",e)),t.ui.rangeSlider.prototype._setOption.apply(this,[e,i])},_setLabelOption:function(t,e){null!==this.labels.left&&(this._leftLabel("option",t,e),this._rightLabel("option",t,e))},_labelType:function(){return"editRangeSliderLabel"},_createLabel:function(e,i){var n=t.ui.rangeSlider.prototype._createLabel.apply(this,[e,i]);return null===e&&n.bind("valueChange",t.proxy(this._onValueChange,this)),n},_addPropertiesToParameter:function(t){return t.type=this.options.type,t.step=this.options.step,t.id=this.element.attr("id"),t},_getLabelConstructorParameters:function(e,i){var n=t.ui.rangeSlider.prototype._getLabelConstructorParameters.apply(this,[e,i]);return this._addPropertiesToParameter(n)},_getLabelRefreshParameters:function(e,i){var n=t.ui.rangeSlider.prototype._getLabelRefreshParameters.apply(this,[e,i]);return this._addPropertiesToParameter(n)},_onValueChange:function(t,e){e.isLeft?this.min(e.value):this.max(e.value)}})}(jQuery),function(t){"use strict";t.widget("ui.editRangeSliderLabel",t.ui.rangeSliderLabel,{options:{type:"text",step:!1,id:""},_input:null,_text:"",_create:function(){t.ui.rangeSliderLabel.prototype._create.apply(this),this._createInput()},_setOption:function(e,i){"type"===e?this._setTypeOption(i):"step"===e&&this._setStepOption(i),t.ui.rangeSliderLabel.prototype._setOption.apply(this,[e,i])},_createInput:function(){this._input=t("<input type='"+this.options.type+"' />").addClass("ui-editRangeSlider-inputValue").appendTo(this._valueContainer),this._setInputName(),this._input.bind("keyup",t.proxy(this._onKeyUp,this)),this._input.blur(t.proxy(this._onChange,this)),"number"===this.options.type&&(!1!==this.options.step&&this._input.attr("step",this.options.step),this._input.click(t.proxy(this._onChange,this))),this._input.val(this._text)},_setInputName:function(){var t=this.options.isLeft?"left":"right";this._input.attr("name",this.options.id+t)},_onSwitch:function(e,i){t.ui.rangeSliderLabel.prototype._onSwitch.apply(this,[e,i]),this._setInputName()},_destroyInput:function(){this._input.remove(),this._input=null},_onKeyUp:function(t){return 13===t.which?(this._onChange(t),!1):void 0},_onChange:function(){var t=this._returnCheckedValue(this._input.val());!1!==t&&this._triggerValue(t)},_triggerValue:function(t){var e=this.options.handle[this.options.handleType]("option","isLeft");this.element.trigger("valueChange",[{isLeft:e,value:t}])},_returnCheckedValue:function(t){var e=parseFloat(t);return!isNaN(e)&&e.toString()===t&&e},_setTypeOption:function(t){"text"!==t&&"number"!==t||this.options.type===t||(this._destroyInput(),this.options.type=t,this._createInput())},_setStepOption:function(t){this.options.step=t,"number"===this.options.type&&this._input.attr("step",!1!==t?t:"any")},_displayText:function(t){this._input.val(t),this._text=t},enable:function(){t.ui.rangeSliderLabel.prototype.enable.apply(this),this._input.attr("disabled",null)},disable:function(){t.ui.rangeSliderLabel.prototype.disable.apply(this),this._input.attr("disabled","disabled")}})}(jQuery),function(t){"use strict";var e={first:function(t){return t},next:function(t){return t+1},format:function(){},label:function(t){return Math.round(t)},stop:function(){return!1}};t.widget("ui.ruler",{options:{min:0,max:100,scales:[]},_create:function(){this.element.addClass("ui-ruler"),this._createScales()},destroy:function(){this.element.removeClass("ui-ruler"),this.element.empty()},_regenerate:function(){this.element.empty(),this._createScales()},_setOption:function(t,e){return"min"===t||"max"===t&&e!==this.options[t]?(this.options[t]=e,void this._regenerate()):"scales"===t&&e instanceof Array?(this.options.scales=e,void this._regenerate()):void 0},_createScales:function(){if(this.options.max!==this.options.min)for(var t=0;t<this.options.scales.length;t++)this._createScale(this.options.scales[t],t)},_createScale:function(i,n){var s=t.extend({},e,i),r=t("<div class='ui-ruler-scale' />").appendTo(this.element);r.addClass("ui-ruler-scale"+n),this._createTicks(r,s)},_createTicks:function(t,e){var i,n,s,r=e.first(this.options.min,this.options.max),o=this.options.max-this.options.min,a=!0;do{i=r,r=e.next(i),n=(Math.min(r,this.options.max)-Math.max(i,this.options.min))/o,s=this._createTick(i,r,e),t.append(s),s.css("width",100*n+"%"),a&&i>this.options.min&&s.css("margin-left",100*(i-this.options.min)/o+"%"),a=!1}while(!this._stop(e,r))},_stop:function(t,e){return t.stop(e)||e>=this.options.max},_createTick:function(e,i,n){var s=t("<div class='ui-ruler-tick' style='display:inline-block' />"),r=t("<div class='ui-ruler-tick-inner' />").appendTo(s);return t("<span class='ui-ruler-tick-label' />").appendTo(r).text(n.label(e,i)),n.format(s,e,i),s}})}(jQuery),bizagi.reporting.component.controller("bizagi.reporting.component.timefilter",{init:function(t,e){this._super(t),this.properties=e,this.date=this.getInitialDateRange(e.time),this.render()},getInitialDateRange:function(t){var e=new Date,i=e;return{range:{from:new Date(e.getFullYear()-3,0,1),to:i},values:{min:t.dateFrom?bizagi.util.dateFormatter.getDateFromInvariant(t.dateFrom,!1):new Date(e.getFullYear(),0,1),max:t.dateTo?bizagi.util.dateFormatter.getDateFromInvariant(t.dateTo,!1):i}}},loadTemplates:function(){var t={timefilter:bizagi.getTemplate("bizagi.reporting.component.timefilter")+"#bz-rp-filters-time",datebuttons:bizagi.getTemplate("bizagi.reporting.component.timefilter")+"#bz-rp-filters-time-buttons"};return this._super(t)},renderComponent:function(){var t=this.getTemplate("timefilter");return $.tmpl(t)},postRender:function(){var t=this;$.when(t.loadDatePickers(),t.loadDateButtons(),t.loadDateSlider()).done((function(){t.resolvePostRender()}))},loadDatePickers:function(){var t=this,e=t.getDateFormat(t.properties.dateFormat);t.$elementStart=$("#bz-rp-filters-time-start",t.canvas),t.$elementEnd=$("#bz-rp-filters-time-end",t.canvas),t.$elementStart.datepicker({dateFormat:e,defaultDate:t.date.values.min,minDate:t.date.range.from,maxDate:t.date.range.to,shortYearCutoff:"undefined"!=typeof BIZAGI_DEFAULT_DATETIME_INFO?"+"+BIZAGI_DEFAULT_DATETIME_INFO.twoDigitYearMaxDelta:"+10",changeYear:!0,changeMonth:!0,onSelect:function(){t.selectPicker()}}),t.$elementEnd.datepicker({dateFormat:e,defaultDate:t.date.values.max,minDate:t.date.values.min,maxDate:t.date.range.to,shortYearCutoff:"undefined"!=typeof BIZAGI_DEFAULT_DATETIME_INFO?"+"+BIZAGI_DEFAULT_DATETIME_INFO.twoDigitYearMaxDelta:"+10",changeYear:!0,changeMonth:!0,onSelect:function(){t.selectPicker()}}),t.$elementStart.val(bizagi.util.dateFormatter.formatDate(t.date.values.min,t.properties.dateFormat)),t.$elementEnd.val(bizagi.util.dateFormatter.formatDate(t.date.values.max,t.properties.dateFormat))},loadDateButtons:function(){var t=this,e=t.getTemplate("datebuttons"),i=$(".bz-rp-filters-time-buttons-container",t.content),n={day:t.getResource("reports-general-day").slice(0,1),month:t.getResource("reports-general-month").slice(0,1),year:t.getResource("reports-general-year").slice(0,1)};i.append($.tmpl(e,n)),i.on("click",".bz-rp-filters-time-buttons-list li",(function(){$.proxy(t.setDateRange($(this)),t)}))},loadDateSlider:function(){var t=this;t.dateSlider=$("#bz-rp-filters-time-slider",t.canvas),t.dateSlider.dateRangeSlider({bounds:{min:t.date.range.from,max:t.date.range.to},defaultValues:{min:t.date.values.min,max:t.date.values.max},formatter:function(e){return bizagi.util.dateFormatter.formatDate(e,t.properties.dateFormat)}}),t.dateSlider.bind("userValuesChanged",(function(e,i){t.changeSlider(e,i)}))},getDateFormat:function(t){var e,i=t;return-1==t.search("h")&&-1==t.search("H")||(e=-1!=t.search("h")?t.search("h"):t.search("H"),i=t.substring(0,e-1)),i.indexOf("MMMM")>=0?i=i.replaceAll("MMMM","MM"):i.indexOf("MMM")>=0?i=i.replaceAll("MMM","M"):i.indexOf("MM")>=0?i=i.replaceAll("MM","m"):i.indexOf("M")>=0&&(i=i.replaceAll("M","m")),-1!=i.search("yyyy")?i=i.replaceAll("yyyy","yy"):-1!=i.search("yy")&&(i=i.replaceAll("yy","y")),i=i.replaceAll("dddd","DD")},getValue:function(){return{time:{dateFrom:bizagi.util.dateFormatter.formatInvariant(this.date.values.min,!1),dateTo:bizagi.util.dateFormatter.formatInvariant(this.date.values.max,!1)}}},setValue:function(t,e){this.$elementEnd.datepicker("option","minDate",t),this.$elementStart.datepicker("option","maxDate",e),this.date.values.min=t,this.date.values.max=e,this.$elementStart.datepicker("option","defaultDate",t),this.$elementEnd.datepicker("option","defaultDate",e),this.$elementStart.val(bizagi.util.dateFormatter.formatDate(t,this.properties.dateFormat)),this.$elementEnd.val(bizagi.util.dateFormatter.formatDate(e,this.properties.dateFormat)),this.dateSlider.dateRangeSlider("values",t,e),this.publish("filterbytime",this.getValue())},selectPicker:function(){var t=this.$elementEnd.datepicker("getDate"),e=this.$elementStart.datepicker("getDate");this.setValue(e,t)},changeSlider:function(t,e){var i=e.values.min,n=e.values.max;this.setValue(i,n)},setDateRange:function(t){var e=t.data("value").split("-"),i=e[0],n=e[1],s=new Date,r=r=bizagi.moment(s).subtract(i,n).toDate();this.setValue(r,s)}}),bizagi.reporting.report.extend("bizagi.reporting.report.analyticsprocessactivity",{},{init:function(t){this._super(t),this.cleanReferrerParams()},initializeTemplates:function(){return{main:bizagi.getTemplate("bizagi.reporting.report.analyticsprocessactivity")+"#bz-rp-analytics-process-processactivity-main",activitysummary:bizagi.getTemplate("bizagi.reporting.report.analyticsprocessactivity")+"#bz-rp-analytics-process-processactivity-activitysummary",processactivity:bizagi.getTemplate("bizagi.reporting.report.analyticsprocessactivity")+"#bz-rp-analytics-process-processactivity-processactivity",activitytrend:bizagi.getTemplate("bizagi.reporting.report.analyticsprocessactivity")+"#bz-rp-analytics-process-processactivity-trend"}},getFiltersObject:function(){return{process:{},dimension:[],time:{}}},loadComponents:function(){var t=this;return t._super(),$.when(t.loadProcessesVersionComponent()).pipe((function(){return t.loadDimensionsComponent({process:t.model.process})})).pipe((function(){return t.loadTimeComponent()}))},getDetailListObject:function(t){var e=t.sender.options.chartName,i=t.dataItem.name,n={};return t.dataItem.embedded&&(n={task:{id:t.dataItem.embedded.taskId,guid:t.dataItem.embedded.taskGuid},parentProcess:{id:t.dataItem.embedded.parentProcessId}}),"Analytics.Process.ActivitySummary"===e&&{detailList:{reportName:e,columnName:i,embedded:n}}},postRender:function(){this.bindToggleSummary()},getReportExcelUrl:function(t){var e=$.extend({},this.taskGuid,this.model),i="reportName="+t+"&filters="+JSON.stringify(e)+"&user="+bizagi.currentUser.idUser+"&xsrf="+bizagi.getXSRFToken();return this.services.getExportExcelUrl(i)},drawReport:function(t){var e=this;e.setFiltersForCustomRPComp(),e.drawActivityTrend(t),$.when(e.services.getProcessActivitySummary(t)).done((function(t){t.effectiveness=Math.round(t.effectiveness),e.drawActivitySummary(t),e.drawProcessActivity({newCases:t.newCases,closedCases:t.closedCases,abortedCases:t.abortedCases,embedded:t.embedded})}))},drawActivitySummary:function(t){var e=this.getTemplate("activitysummary"),i=$.tmpl(e,t,{getReportExcelUrl:this.getReportExcelUrl("analytics.process.activity"),showExcelIcon:!this.device||"desktop"==this.device.toLowerCase()});this.getTemplateComponent(this.content,"analytics-process-processactivity-activitysummary").empty().append(i)},drawProcessActivity:function(t){var e=this.getTemplate("processactivity"),i=$.tmpl(e),n=this.getTemplateComponent(this.content,"analytics-process-processactivity-processactivity");if(n.empty().append(i),t.newCases>0||t.closedCases>0||t.abortedCases>0){var s=t.embedded?t.embedded:{},r={dataSource:{data:[{category:this.getResource("analytics-process-processactivity-newcases"),value:t.newCases,name:"open",embedded:s},{category:this.getResource("analytics-process-processactivity-closedcases"),value:t.closedCases,name:"closed",embedded:s},{category:this.getResource("analytics-process-processactivity-abortedcases"),value:t.abortedCases,name:"aborted",embedded:s}]},chartName:"Analytics.Process.ActivitySummary",series:[{color:"#B8c7E8",field:"value",name:this.getResource("analytics-process-processactivity-title")}],categoryAxis:{field:"category"}},o=this.graphics.getDataVizObject(r);n.find(".bz-rp-chart").empty().kendoChart(o)}else this.setNoDataAvailableLabel(n)},drawActivityTrend:function(t){var e=this,i=e.model.time.dateTo,n=e.model.time.dateFrom,s=e.getTemplate("activitytrend"),r=$.tmpl(s),o=e.getTemplateComponent(e.content,"analytics-process-processactivity-trend");o.empty().append(r),$.when(e.services.getProcessActivityTrend(t)).pipe((function(t){var s=new Date(n),r=new Date(i),o="",a=[];switch(t.scale){case"DAY":for(o="MM/dd";s<=r;s.setDate(s.getDate()+1))a.push(e.getDateRange(t.rows,s));break;case"MONTH":for(o="MM/yy";s<=r;s.setMonth(s.getMonth()+1))a.push(e.getDateRangeForMonthScale(t.rows,s));break;case"YEAR":for(o="yyyy";s<=r;s.setFullYear(s.getFullYear()+1))a.push(e.getDateRangeForYearScale(t.rows,s))}var h={dataSource:{data:a},seriesDefaults:{tooltip:{visible:!0,template:"#= kendo.format('{0:"+o+"}', category) #, #=value#"}},series:[{type:"line",field:"value",categoryField:"date",name:e.getResource("analytics-process-processactivity-trend-title")}],categoryAxis:{baseUnit:t.scale.toLowerCase()+"s",field:"date",labels:{format:o,padding:{left:-10}}}};return $.extend(!0,h,e.setLabelSteps(a.length)),e.graphics.getDataVizObject(h)})).done((function(t){o.find(".bz-rp-chart").kendoChart(t)})).fail((function(t){e.setNoDataAvailableLabel(o)}))},getDateRange:function(t,e){for(var i,n={value:0,date:new Date(e)},s=0,r=t.length;s<r;s++)i=new Date(t[s].date.month+"/"+t[s].date.day+"/"+t[s].date.year),e.getTime()===i.getTime()&&(n.value=t[s].activations);return n},getDateRangeForMonthScale:function(t,e){var i;e.setDate(1);for(var n={value:0,date:new Date(e)},s=0,r=t.length;s<r;s++)i=new Date(t[s].date.month+"/01/"+t[s].date.year),e.getTime()===i.getTime()&&(n.value=t[s].activations);return n},getDateRangeForYearScale:function(t,e){var i;e.setDate(1),e.setMonth(0);for(var n={value:0,date:new Date(e)},s=0,r=t.length;s<r;s++)i=new Date("01/01/"+t[s].date.year),e.getTime()===i.getTime()&&(n.value=t[s].activations);return n}}),bizagi.reporting.report.extend("bizagi.reporting.report.analyticsprocessdurationhistogram",{},{init:function(t){this._super(t),this.cleanReferrerParams()},getFiltersObject:function(){return{process:{},dimension:[],time:{}}},initializeTemplates:function(){return{main:bizagi.getTemplate("bizagi.reporting.report.analyticsprocessdurationhistogram")+"#bz-rp-analytics-process-durationhistogram-main",durationhistogram:bizagi.getTemplate("bizagi.reporting.report.analyticsprocessdurationhistogram")+"#bz-rp-analytics-process-durationhistogram-graph"}},loadComponents:function(){var t=this;return t._super(),$.when(t.loadProcessesVersionComponent()).pipe((function(){return t.loadDimensionsComponent({process:t.model.process})})).pipe((function(){return t.loadTimeComponent()}))},getDetailListObject:function(){return!1},drawReport:function(t){this.setFiltersForCustomRPComp(),this.drawDurationHistogram(t)},drawDurationHistogram:function(t){var e=this,i=e.getTemplate("durationhistogram"),n=$.tmpl(i),s=e.getTemplateComponent(e.content,"analytics-process-durationhistogram");s.empty().append(n),$.when(e.services.getDurationHistogram(t)).done((function(t){if(t.rows.length){var i=e.getGraphData(t),n={dataSource:{data:i.rows,sort:{field:"days",dir:"asc"}},seriesDefaults:{type:"area"},series:[{field:"cases",name:e.getResource("analytics-process-durationhistogram-foot-report-xaxis")}],categoryAxis:{notes:{icon:{visible:!1},label:{visible:!1},line:{dashType:"dashDot",width:4,color:"red",length:400},data:[{value:i.linePosition}]},field:"days"}},r=e.graphics.getDataVizObject(n);s.find(".bz-rp-chart").kendoChart(r)}else e.setNoDataAvailableLabel(s)})).fail((function(t){e.setNoDataAvailableLabel(s)}))},getGraphData:function(t){for(var e=t.durationExpected,i=t.rows,n=i.length,s=i.splice(15,n-15),r=0,o=0,a=s.length;o<a;o++)i[14].cases+=s[o].cases;for(o=0,a=i.length;o<a;o++){if(i[o].days==e){r=o;break}if(i[o].days>e){var h=(i[(r=o)-1].cases+i[r].cases)/2;i.splice(o,0,{cases:h,days:e});break}}return n>=15&&(i[14].days=this.getResource("reports-general-nextdays")),{linePosition:r,rows:i}}}),bizagi.reporting.report.extend("bizagi.reporting.report.analyticsprocessactivationranking",{},{init:function(t){this._super(t),this.process={process:{id:0}},this.cleanReferrerParams()},getFiltersObject:function(){return{process:{},dimension:[],time:{}}},initializeTemplates:function(){return{main:bizagi.getTemplate("bizagi.reporting.report.analyticsprocessactivationranking")+"#bz-rp-analytics-process-activationranking-main",activationranking:bizagi.getTemplate("bizagi.reporting.report.analyticsprocessactivationranking")+"#bz-rp-analytics-process-activationranking-graph"}},loadComponents:function(){var t=this;return t._super(),$.when(t.loadDimensionsComponent(t.process)).pipe((function(){return t.loadTimeComponent()}))},getDetailListObject:function(t){var e=t.sender.options.chartName,i=t.dataItem.id,n=t.dataItem.guid,s={};return t.dataItem.embedded&&(s={task:{id:t.dataItem.embedded.taskId,guid:t.dataItem.embedded.taskGuid},parentProcess:{id:t.dataItem.embedded.parentProcessId}}),{process:{id:i,guid:n},detailList:{reportName:e,embedded:s}}},drawReport:function(t){this.setFiltersForCustomRPComp(),this.drawActivationRanking(t)},drawActivationRanking:function(t){var e=this,i=e.getTemplate("activationranking"),n=$.tmpl(i),s=e.getTemplateComponent(e.content,"analytics-process-activationranking");s.empty().append(n),$.when(e.services.getProcessVersionList()).pipe((function(i){0==i.processes.length?e.setNoDataAvailableLabel(s):$.when(e.services.getActivationRanking(t)).done((function(t){if(t.processes.length){var i={dataSource:{data:t.processes},seriesDefaults:{type:"bar",tooltip:{visible:!1}},chartName:"Analytics.Process.ActivationRanking",series:[{field:"cases",name:e.getResource("analytics-process-activationranking-foot-report-xaxis")}],categoryAxis:{field:"name"}};$.extend(i,e.calculateGraphHeight(t.processes.length));var n=e.graphics.getDataVizObject(i);s.find(".bz-rp-chart").kendoChart(n)}else e.setNoDataAvailableLabel(s)})).fail((function(t){e.setNoDataAvailableLabel(s)}))}))}}),bizagi.reporting.report.extend("bizagi.reporting.report.analyticsprocessfrequentspaths",{},{init:function(t){this._super(t),this.frequentsPaths=[],this.path=0,this.total=0,this.cleanReferrerParams()},getFiltersObject:function(){return{process:{},dimension:[],time:{}}},initializeTemplates:function(){return{main:bizagi.getTemplate("bizagi.reporting.report.analyticsprocessfrequentspaths")+"#bz-rp-analytics-process-frequentspaths-main",header:bizagi.getTemplate("bizagi.reporting.report.analyticsprocessfrequentspaths")+"#bz-rp-analytics-process-frequentspaths-cases"}},loadComponents:function(){var t=this;return t._super(),$.when(t.loadProcessesVersionComponent()).pipe((function(){return t.loadDimensionsComponent({process:t.model.process})})).pipe((function(){return t.loadTimeComponent()}))},postRender:function(){this.eventsHandlers()},getDetailListObject:function(){return{detailList:{reportName:"Analytics.Process.FrequentPaths",columnIndex:this.frequentsPaths[this.path].pathIndex}}},drawReport:function(t){var e=this;e.setFiltersForCustomRPComp(),$.when(e.services.getFrecuentsPaths(t)).done((function(t){e.frequentsPaths=t.paths,e.drawProcessModel(),e.renderHeader()}))},drawProcessModel:function(){this.$processViewer=$(".bz-rp-processviewer-canvas",this.content),this.renderProcessViewer(this.$processViewer)},drawFrequentsPaths:function(){if(this.frequentsPaths.length>0){var t=this.frequentsPaths[this.path].path;this.$processViewer.processviewer("clearRoute"),this.$processViewer.processviewer("drawRoute",t)}},renderHeader:function(){$(".bz-rp-processviewer .bz-rp-frequentspaths-header",this.content).remove();var t=this.getTemplate("header");$(".bz-rp-processviewer",this.content).prepend($.tmpl(t)),this.frequentsPathsControl()},frequentsPathsControl:function(){this.frequentsPaths&&this.frequentsPaths.length?(this.path=0,this.total=this.getTotalCases()):0==$(".bz-rp-processviewer .bz-rp-frequentspaths-header").has("input[type=checkbox]").length&&$(".bz-rp-frequentspaths-detaillist").hide();this.renderPathsControl(),this.renderCasesData()},getTotalCases:function(){for(var t=0,e=[].concat(this.frequentsPaths),i=0,n=e.length;i<n;i++)t+=e[i].cases;return t},renderPathsControl:function(){var t=this,e=t.frequentsPaths&&t.frequentsPaths.length?t.frequentsPaths.length:0;$spinner=$(".bz-rp-frecuentspaths-control",t.content);var i=$spinner.spinner({min:e>0?1:0,max:e,spin:function(e,i){var n=parseInt(i.value);t.path=n-1,t.drawFrequentsPaths(),t.renderCasesData()}}).data("ui-spinner");i._parse=function(t){return"string"==typeof t?parseInt(t):t},i._format=function(t){return t+"/"+e},$spinner.spinner("value","1/"+e)},renderCasesData:function(){var t=this.frequentsPaths&&this.frequentsPaths.length>0,e=t?this.frequentsPaths[this.path].cases:0,i=e+" ( "+(t?100*e/this.total:0).toFixed(1)+"% )";0===e&&(i+=" <i>"+bizagi.localization.getResource("bam-resourcemonitor-workinprogressuser-noresult")+"</i>"),$(".bz-rp-frequentspaths-data",this.content).html(i)},eventsHandlers:function(){var t=this;$(".bz-rp-processviewer",t.content).on("click",".bz-rp-frequentspaths-detaillist",(function(e){t.callDetailList({})})),$(".bz-rp-processviewer",t.content).on("pvComplete",(function(e){t.frequentsPaths.length&&t.drawFrequentsPaths()}))}}),bizagi.reporting.component.controller("bizagi.reporting.component.detaillist",{init:function(t,e){this._super(t),this.services=e,this.modal=[],this.render(),this.process=0,this.rowsPerPages=20},loadTemplates:function(){var t={main:bizagi.getTemplate("bizagi.reporting.component.detaillist")+"#bz-rp-component-detaillist-main",content:bizagi.getTemplate("bizagi.reporting.component.detaillist")+"#bz-rp-component-detaillist-content",summary:bizagi.getTemplate("bizagi.reporting.component.detaillist")+"#bz-rp-component-detaillist-summary",pager:bizagi.getTemplate("bizagi.reporting.component.detaillist")+"#bz-rp-component-detaillist-pager",container:bizagi.getTemplate("bizagi.reporting.component.detaillist")+"#bz-rp-components-detaillist-container"};return this._super(t)},renderComponent:function(){var t=this.getTemplate("container");return this.modal=$.tmpl(t).appendTo("body"),[]},postRender:function(){this.eventsHandler()},renderDetailList:function(t,e){var i=this;i.filter=t,i.process=e;var n=i.getTemplate("main");i.content=$.tmpl(n),$.when(i.showDialog()).done((function(){i.setDetailList(),void 0!==bizagi.workportal.actions.routing.LAUNCH_NOTIFICATION&&bizagi.workportal.actions.routing.LAUNCH_NOTIFICATION()}))},setDetailList:function(){var t=this;return $.when(t.services.getDetailList(t.filter)).pipe((function(e){t.detailsTable=e.detailsTable,t.pages=Math.ceil(t.detailsTable.rows.length/t.rowsPerPages),t.renderContent(),t.bindPagerEvents()}))},renderContent:function(){var t=this.getTemplate("content"),e=$.extend({},this.getSummaryJSON(1),this.getPagerJSON(1,"next"));this.removeDuplicatesInData(e);var i=$.tmpl(t,e,{device:this.device,showExcelIcon:!this.device||"desktop"==this.device.toLowerCase(),formatValue:this.formatValue});$("#bz-rp-detaillist-container",this.modal).html(i),this.device&&"desktop"==this.device.toLowerCase()&&this.fixedHeadTable(),this.validateBackButtonFromActivity()},validateBackButtonFromActivity:function(){bizagi.referrerParams.reports.fromBackButton&&bizagi.referrerParams.page?(bizagi.referrerParams.reports.fromBackButton=!1,bizagi.referrerParams.page=Math.min(this.pages,bizagi.referrerParams.page),this.updatePager(bizagi.referrerParams.page),this.updateSummary(bizagi.referrerParams.page)):bizagi.referrerParams.page=1},fixedHeadTable:function(){var t=$(".ui-bizagi-wp-app-component-detaillist-content-parent-tableHeadFixed > .ui-bizagi-wp-app-component-detaillist-content-tableHeadFixed",this.modal);t.find("table:first").floatThead({position:"fixed",zIndex:1,scrollContainer:function(){return t}})},removeDuplicatesInData:function(t){var e=[];return $.each(t.summary.headers,(function(t,i){"DateTime"===i.dataType&&e.push(t)})),$.each(t.summary.rows,(function(i,n){$.each(n.cells,(function(n,s){var r,o=[];$.each(s,(function(t,e){-1===$.inArray(e,o)&&o.push(e)})),t.summary.rows[i].cells[n].isFormated&&(r=!0),t.summary.rows[i].cells[n]=o,-1!==e.indexOf(n)&&(r||(t.summary.rows[i].cells[n]=s),t.summary.rows[i].cells[n].isFormated=!0)}))})),t},getSummaryJSON:function(t){var e=(t-1)*this.rowsPerPages,i=e+this.rowsPerPages;return{summary:{headers:this.detailsTable.headers,rows:this.detailsTable.rows.slice(e,i)}}},getPagerJSON:function(t,e){var i=[],n=0;if(this.pages>1){n="next"===e?t+10>this.pages&&this.pages>10?this.pages-9:t:t-10<1?1:t-9;for(var s=this.pages>10?n+9:this.pages,r=n;r<=s;r++)i.push(r)}return{pager:{pages:i,page:t,total:this.pages}}},showDialog:function(){var t=$.Deferred();return this.content.dialog({resizable:!1,modal:!0,dialogClass:"bz-rp-dialog",appendTo:this.modal,title:this.getResource("bz-rp-components-detaillist-title"),draggable:!1,maximized:!0,maximizeOnly:!0,close:function(){$(this).remove()},open:function(e){e.stopPropagation(),t.resolve()}}),t.promise()},bindPagerEvents:function(){var t=this;t.modal.find("#bz-rp-detaillist-pagercnt").on("click",".bz-rp-detaillist-pagintation-page, .bz-rp-detaillist-pagination-firstpage, .bz-rp-detaillist-pagination-lastpage, .bz-rp-detaillist-pagination-nextpage, .bz-rp-detaillist-pagination-prevpage",(function(e){if(e.stopPropagation(),$(this).hasClass("bz-rp-detaillist-pagintation-page")){$(".ui-bizagi-wp-app-component-detaillist-content-tableHeadFixed").scrollTop(0);var i=parseInt($(this).data("page"));t.highlightPage($(this)),t.updateSummary(i)}else if($(this).hasClass("bz-rp-detaillist-pagination-firstpage"))t.updateContent(1,"prev");else if($(this).hasClass("bz-rp-detaillist-pagination-lastpage"))t.updateContent(t.pages,"next");else if($(this).hasClass("bz-rp-detaillist-pagination-nextpage")){i=$(this).prev(".bz-rp-detaillist-pagintation-page").data("page");i=parseInt(i)+1,t.updateContent(i,"next")}else if($(this).hasClass("bz-rp-detaillist-pagination-prevpage")){i=$(this).next(".bz-rp-detaillist-pagintation-page").data("page");i=parseInt(i)-1,t.updateContent(i,"prev")}}))},updateContent:function(t,e){this.updatePager(t,e),this.updateSummary(t)},updateSummary:function(t){var e=this.getTemplate("summary");bizagi.referrerParams.page=t;var i=this.getSummaryJSON(t);this.removeDuplicatesInData(i);var n=$.tmpl(e,i.summary,{device:this.device,formatValue:this.formatValue});$("#bz-rp-detaillist-summarycnt",this.modal).html(n),this.device&&"desktop"==this.device.toLowerCase()&&this.fixedHeadTable()},formatValue:function(t,e){return bizagi.util.formatValueByDataType(t,e.dataType)},updatePager:function(t,e){var i=this.getTemplate("pager"),n=this.getPagerJSON(t,e),s=$.tmpl(i,n.pager);$("#bz-rp-detaillist-pagercnt",this.modal).html(s)},highlightPage:function(t){$(".bz-rp-detaillist-pagintation-page",this.modal).removeClass("bz-rp-detaillist-pagination-active"),t.addClass("bz-rp-detaillist-pagination-active")},eventsHandler:function(){var t=this;t.modal.on("click",".bz-rp-exportdtl-excel, .bz-rp-detaillist-summary-admincell, .bz-rp-detaillist-summary-viewcell, .bz-rp-detaillist-return, .bz-rp-detaillist-summary-opencase, .caseClicked, .activityClicked",(function(e){e.stopPropagation();var i=$(this).closest("tr").data("case"),n=$(this);$(this).hasClass("bz-rp-exportdtl-excel")?t.exportExcel():$(this).hasClass("bz-rp-detaillist-summary-admincell")?$.when(t.userHasCaseAccess(i)).done((function(e){if(e){var i=n.closest("span").data("radnumber");t.excAdminAction(i,this),n.closest("tr").addClass("bz-wp-detaillist-selectedcase")}})):$(this).hasClass("bz-rp-detaillist-summary-viewcell")?$.when(t.userHasCaseAccess(i)).done((function(e){e&&t.excViewAction(i)})):$(this).hasClass("bz-rp-detaillist-return")?t.returnToDetailList():$(this).hasClass("bz-rp-detaillist-summary-opencase")?t.device&&"desktop"==t.device.toLowerCase()&&t.OpenCaseWithSecurity(i):($(this).hasClass("caseClicked")||$(this).hasClass("activityClicked"))&&(i=$(this)[0].getAttribute("data-idCase"),t.OpenCaseWithSecurity(i),t.content.dialog("close"))}))},OpenCaseWithSecurity:function(t){var e=this;$.when(e.userHasCaseAccess(t)).done((function(i){i&&(e.content.dialog("close"),e.openCase({idCase:t}))}))},userHasCaseAccess:function(t){var e=this,i=$.Deferred();return $.when(e.haveCaseAccess(t)).done((function(t){i.resolve(t.hasAccess),t.hasAccess||e.showErrorMessage()})),i.promise()},showErrorMessage:function(){var t=this.getResource("bz-rp-components-detaillist-access-error");bizagi.showMessageBox(t)},haveCaseAccess:function(t){var e="idCase="+t+"&user="+bizagi.currentUser.idUser;return this.services.checkCaseAccess(e)},openCase:function(t){this.publish("rp-opencase",{caseData:t})},exportExcel:function(){this.services.exportDetailList(this.filter,bizagi.currentUser.idUser,bizagi.getXSRFToken())},excAdminAction:function(t){this.publish("rp-caseadministration",{canvas:$("#bz-rp-detaillist-casesearch",this.modal),radNumber:t}),$("#bz-rp-detaillist-mainframe",this.modal).hide(),$("#bz-rp-detaillist-auxframe",this.modal).show()},excViewAction:function(t){this.publish("rp-graphicquery",{idCase:t,idWorkflow:this.process})},returnToDetailList:function(){var t=$("#bz-rp-detaillist-mainframe",this.modal),e=$("#bz-rp-detaillist-auxframe",this.modal);$(".bz-wp-casesearch-invalidation",e).length>0?$.when(this.setDetailList()).done((function(){t.show().trigger("scroll"),e.hide()})):($("tr.bz-wp-detaillist-selectedcase",t).removeClass("bz-wp-detaillist-selectedcase"),t.show(),e.hide())}}),$.bizagi||($.bizagi={processviewer:{}}),$.bizagi.processviewer={configuration:{constants:{ELEMENT_TYPE:{PROCESS:"Process",LANE:"Lane",MILESTONES:"Milestone",TEXTANNOTATION:"TextAnnotation",ASSOCIATION:"Association",SEQUENCEFLOW:"SequenceFlow"},CONDITION_TYPE:{SUBPROCESSEXP:"SubprocessException",CANCELLATION:"Cancellation",NORMAL:"Normal",RELATION:"Relation",COMPENSATION:"Compensation"},PROPERTIES:{WAYPOINTS:"waypoints",BOUNDS:"bounds"},LANESETS:"laneSets",LANES:"lanes",BPMNLABELSTYLES:"bpmnLabelStyles"},validTypeDefinitions:["artifacts","flowElements","laneSets","milestones"]},design:{markers:{normal:{type:"path",properties:{d:"M0.616,9.401  l2.05-4.4l-2.05-4.399l8.8,4.433L0.616,9.401",class:"normal"}},highlighted:{type:"path",properties:{d:"M0.616,9.401  l2.05-4.4l-2.05-4.399l8.8,4.433L0.616,9.401",class:"highlighted"}},selected:{type:"path",properties:{d:"M0.616,9.401  l2.05-4.4l-2.05-4.399l8.8,4.433L0.616,9.401",class:"highlighted"}},association:{type:"path",properties:{d:"M0.595,0.598  l8.8,4.132l-8.8,4.667",class:"association"}}}}},
/*! */
function(t){t.widget("ui.processviewer",{constants:t.bizagi.processviewer.configuration.constants,options:{image:null,zoomRange:50,hotspots:[],dragMessage:"Drag Image (Image Pane)",processMessage:"Process Image....",previewWidth:120,previewHeight:120,hotspotsCSS:"",draggable:!0,controls:!0,zoomImageOptions:!1,moveIncrement:20,isIE8:!1,device:"desktop",minZoom:.5,minZoomIE8:.5,maxZoomIE8:1.5,maxZoom:1.5,template:!1,unavailableImage:"img/unavailable_image.png",tmpl:"bizagi.processviewer.template",hotSpotsSVG:!1,formatStyles:{},milestonesHeight:25,width:"100%",height:150,dimentions:{width:100,height:150},animation:{path:[],interval:0,instance:0,time:200,counter:0},configuration:{localTemplate:"",processviewerStageId:"",processviewerStage:"",$processviewerStage:"",processviewerStageSet:"",processviewerImageStage:"",processviewerHotSpotsContainer:"",processviewerStagePathsSet:"",errorImageCSS:"processviewer-error-image",sliderOptions:{}},getTemplate:function(t){return bizagi.getTemplate(t)}},_create:function(){var e=this;t.support.touch="ontouchend"in document,e._isInWorkportal()?"undefined"!=typeof bizagi&&void 0!==bizagi.util&&(e.options.isIE8=bizagi.util.isIE8(),e.options.device=bizagi.util.detectDevice()):bizagi={workportal:!1},e.$el=t('<div class="wdg-processviewer"></div>'),e.$el.attr("role","widget.bizagi.processviewer"),e.element.append(e.$el),e.options.jsonBizagi?"string"==typeof e.options.jsonBizagi.processDefinition&&"string"==typeof e.options.jsonBizagi.processDefinition?t.when(t.get(e.options.jsonBizagi.processDefinition),t.get(e.options.jsonBizagi.processGraphicsInfo)).done((function(t,i){e._processDataForPlugin({definition:t[0],graphics:i[0]})})).fail((function(t){e.$el.text(t.message)})):e._processDataForPlugin({definition:e.options.jsonBizagi.processDefinition,graphics:e.options.jsonBizagi.processGraphicsInfo}):e._loadTemplate()},_processDataForPlugin:function(e){var i=this;e.definition.status||e.graphics.status?i._triggers.error({message:e.definition.message,json:e}):t.when(t(e).processviewerQueries()).done((function(e){t.extend(i.options,e),i._loadTemplate()}))},_triggerError:function(t){},_loadTemplate:function(){var e=this,i=e.options.template;bizagi.workportal?(e.loader=new bizagi.ui.controls.tmplloader,i?i.indexOf(".html")&&t.when(e.loader.loadTemplates({processviewer:i})).done((function(){e.options.configuration.localTemplate=e.loader.getTemplate("processviewer"),e._buildprocessviewer()})):(i=e.options.getTemplate(e.options.tmpl),t.when(e.loader.loadTemplates({processviewer:i})).done((function(){e.options.configuration.localTemplate=e.loader.getTemplate("processviewer"),e._buildprocessviewer()})))):i?i.indexOf(".html")&&t.when(t.get(e.options.template)).done((function(t){e.options.configuration.localTemplate=t,e._buildprocessviewer()})):(i=e.options.getTemplate(e.options.tmpl),t.when(t.get(i)).done((function(t){e.options.configuration.localTemplate=t,e._buildprocessviewer()})))},_buildprocessviewer:function(){var e,i;this.$el.empty(),e=this.options.configuration.processviewerStageId=this._generateID(),i=t.tmpl(this.options.configuration.localTemplate,{id:e,isIE8:this.options.isIE8}),this.$el.append(i),this._createStage()},resize:function(t,e){e=e||this.options.width,h=t||this.options.height,this.$el.outerWidth(e),this.$el.outerHeight(t)},calculatePosition:function(t,e,i,n){return{top:n/2-(e+45)+"px",left:i/2-(t+67.5)+"px"}},setPosition:function(e,i){var n=document.getElementById(i),s=this._getStageContainer(),r=t("#bz-gq-processviewer-canvas"),o=t(s),a=parseInt(isNaN(e.css("left").replace("px",""))?0:e.css("left").replace("px","")),h=parseInt(isNaN(e.css("top").replace("px",""))?0:e.css("top").replace("px","")),l=this.calculatePosition(a,h,r.width(),r.height());o.animate({left:l.left,top:l.top},1500,(function(){var t=!0,e=0,i=setInterval((function(){t?n.classList.remove("processviewer-shape-selected"):n.classList.add("processviewer-shape-selected"),t=!t,5==e&&clearInterval(i),e++}),400)}))},_createStage:function(){var e,i,n,s,r,o,a=this;e=a.options.width?a.options.width:"100%",i=a.options.height?a.options.height:150,a.$el.outerWidth(e),a.$el.outerHeight(i);var h=100*a.options.dimentions.width/150+a.options.dimentions.width,l=100*a.options.dimentions.height/150+a.options.dimentions.height,c=a._getStageContainer();a._ScrollZoomProcessViewer(c),a._setResetZoom(t("button#resetZoom"),c),a.options.configuration.processviewerStage=r=new Raphael(c,h,l),a.options.configuration.processviewerPathsStageGroup=r.group(),r.canvas.setAttribute("id",a._generateID()),r.canvas.setAttribute("id",a._generateID()),r.canvas.setAttribute("class","processviewer-zvg-container"),r.canvas.setAttribute("class","processviewer-zvg-nested"),a.options.configuration.processviewerStageSet=r.set(),a.options.configuration.processviewerstageHotSpotSet=r.set(),e.indexOf("%")&&(o=!0),o||a.options.dimentions.width<e?t("[data-processviewercontainer]",a.element).width("100%"):t("[data-processviewercontainer]",a.element).width(a.options.dimentions.width),a.options.dimentions.width<e&&t("[data-processviewercontainer]",a.element).width(e),a.options.image?t.when(a._verifyingImage(a.options.image)).done((function(t){n=t.width?t.width:"150",s=t.height?t.height:"150",a.options.configuration.processviewerImageStage=a.options.configuration.processviewerStage.image(t.src,0,0,n,s),a.options.configuration.processviewerStageSet.push(a.options.configuration.processviewerImageStage),a.options.configuration.processviewerRectStage.attr("fill","rgba(255,255,255,0)"),a.options.configuration.processviewerRectStage.attr("stroke","none"),a._createUIControls()})).fail((function(t){a._createUIFailView(t)})):(n=a.element.width()?a.element.width():"150",s=a.element.height()?a.element.height():"150",a.options.configuration.processviewerRectStage=a.options.configuration.processviewerStage.rect(0,0,2*e,2*i),a.options.configuration.processviewerRectStage.attr("fill","rgba(255,255,255,0)"),a.options.configuration.processviewerRectStage.attr("stroke","none"),a.options.configuration.processviewerRectStage[0].setAttribute("id","BaseStage"+a._generateID()),a._createUIControls())},_createUIControls:function(){var e=this;e.options.configuration.processviewerStage,e.options.configuration.processviewerImageStage;e.options.draggable&&e._setDraggable(),t.when(e._createSVGProcessPool(),e._createSVGLanes(),e._createSVGMilestones(),e._createSVGSequenceFlows()).done((function(){e._createStyleFormats(),e.options.isIE8||e._createMarkers(),e._addHandlers(),e._createSlider(),e.options.hotSpotsSVG?e._createSVGHotSpots():t.when(e._createHTMLHotSpots()).done((function(){e._adjustLabelsPosition();var t={type:"pvComplete",message:"processviewer complete",time:new Date,ui:e.$el};e.element.trigger(t)}))}))},_zoomProcessViewer:function(e,i){this._updateOutputSlider(i);var n=t(i).val();this.options.configuration.processviewerPathsStageGroup.scale(n),this.options.configuration.processviewerHotSpotsContainer.css("font-size",n+"em");var s=t(this.options.configuration.processviewerStage.defs);t(this.options.configuration.processviewerStage.canvas).append(s),this._updateHotSpotsScale(n),e.preventDefault(),e.stopPropagation()},calcProcessViewerTo:function(t,e,i,n){var s=t*(e-n),r=t>0?s-i+n:i-n-s;return t>0?(r<0?"":"-")+Math.abs(r):r},_ScrollZoomProcessViewer:function(e){var i=this,n=t(e).closest(".processviewer-wrapper"),s=t("input[type='range']",i.element),r=t(e),o=null;e.addEventListener("wheel",(function(t){null==o&&(o=r.find("[data-processviewerhotspots] > [data-processviewerhotspot]:first"));var e=parseInt(isNaN(r.css("left").replace("px",""))?0:r.css("left").replace("px","")),a=parseInt(isNaN(r.css("top").replace("px",""))?0:r.css("top").replace("px","")),h=Number(s.val()),l=(t.wheelDelta?t.wheelDelta:-1*t.deltaY)>=0;if(s.val(h+.1*(l?1:-1)),h!=s.val()){var c=n.offset(),d=parseInt(o.css("left").replace("px",""))+parseInt(o.css("width").replace("px",""))/2,u=parseInt(o.css("top").replace("px",""))+parseInt(o.css("height").replace("px",""))/2;i._zoomProcessViewer(t,s);var p=parseInt(o.css("left").replace("px",""))+parseInt(o.css("width").replace("px",""))/2,f=parseInt(o.css("top").replace("px",""))+parseInt(o.css("height").replace("px",""))/2,g=i.calcProcessViewerTo(p/d,t.clientX-e,t.clientX,c.left+10),m=i.calcProcessViewerTo(f/u,t.clientY-a,t.clientY,c.top+10);r.css({left:g+"px",top:m+"px"})}}))},_setResetZoom:function(e,i){var n=this;e.click((function(e){var s=t("input[type='range']",n.element);s.val(1),t(i).css({left:"0px",top:"0px"}),n._zoomProcessViewer(e,s)}))},_createSlider:function(){var e=this,i=e.validateHTML5Features.checkInput("range");if(t.support.touch||i){t(".ui-for-desktop",e.element).remove();var n=t("input[type='range']",e.element);n.attr("min",e.options.minZoom),n.attr("max",e.options.maxZoom),n.attr("step",.1),n.attr("value",1),t.support.touch&&"desktop"!==e.options.device?(n.change((function(){e._updateOutputSlider(this)})),n.bind("touchstart",(function(){t(this).prev("output").addClass("is-visible-output"),e._updateOutputSlider(this)})),n.bind("touchend",(function(){var i=t(this).val();t(this).prev("output").removeClass("is-visible-output"),e.options.configuration.processviewerPathsStageGroup.scale(i),e.options.configuration.processviewerHotSpotsContainer.css("font-size",i+"em"),e._updateHotSpotsScale(i),e._updateOutputSlider(this)}))):(n.mouseenter((function(){t(this).prev("output").addClass("is-visible-output"),e._updateOutputSlider(this)})).mouseleave((function(){t(this).prev("output").removeClass("is-visible-output")})),n.change((function(t){e._zoomProcessViewer(t,this)})))}else{t(".ui-for-touch",e.element).remove();var s=t(".processviewer-zvg-nested",e.element);s.data("real-width",s.width()),s.data("real-height",s.height());var r=function(e,i){var n=i.value||1,s='<div class="tooltip"><div class="tooltip-inner">'+(Math.round(100*n)+"%")+"</div></div>";t(".sliderTooltip").html(s)};e.options.configuration.sliderOptions={min:e.options.minZoomIE8,max:e.options.maxZoomIE8,step:.1,value:1,create:r,slide:r,stop:function(t,i){i.value>1&&(s[0].setAttribute("width",s.data("real-width")*i.value),s[0].setAttribute("height",s.data("real-height")*i.value)),e.options.configuration.processviewerPathsStageGroup.scale(i.value),e.options.configuration.processviewerHotSpotsContainer.css("font-size",i.value+"em"),e._updateHotSpotsScale(i.value),e._setDraggable()}},t("[data-processviewerslider]",e.element).slider(e.options.configuration.sliderOptions)}},_updateOutputSlider:function(e){var i=t(e);i.prev("output").text(Math.round(100*i.val())+"%")},_updateHotSpotsScale:function(e){var i=this.options.configuration.hotspotsList,n=t("[data-processviewerhotspots]",this.element),s=n;if(n.length>1){s=n[0];for(var r=1;r<n.length;r++)t(n[r]).offset().left>t(s).offset().left&&(s=n[r]);i=t(s).find(".processviewer-hotspot")}t(s).hide(),t(".processviewer-hotspot-icon svg g",this.element).each((function(){this.setAttribute("transform","scale("+e/10+")")}));for(var o=0;o<i.length;o++){var a=t(i[o]),h=a.data("real-width")*e,l=a.data("real-height")*e,c=a.data("real-left")*e,d=a.data("real-top")*e;a.outerWidth(h),a.outerHeight(l),a.css("left",c),a.css("top",d)}t(s).show()},_scaleSVG:function(){},_addHandlers:function(){var e=this;t(window).on("resize.processviewer",(function(){e._setDraggable()}))},_setDraggable:function(){if(t.support.touch&&"desktop"!==this.options.device){var e=this.options.configuration.processviewerPathsStageGroup.getScale(),i=this.options.configuration.processviewerStage.canvas.getAttribute("width")*e,n=this.options.configuration.processviewerStage.canvas.getAttribute("height")*e;t(".processviewer-wrapper",this.element).addClass("ui-scroll-touch"),t("[data-processviewercontainer]",this.element).width(i),t("[data-processviewercontainer]",this.element).height(n)}else{this.options.configuration.$processviewerStage=t(this.options.configuration.processviewerStage.canvas).parent();var s=t("[data-processviewercontainer]",this.element).position();if(s){e=this.options.configuration.processviewerPathsStageGroup.getScale();var r=this.element.width(),o=this.element.height();i=this.options.configuration.processviewerStage.width*e,n=this.options.configuration.processviewerStage.height*e;maxleft=s.left,maxTop=s.top;var a=t("[data-processviewer-wrapper-container]",this.element).is(":ui-draggable");r<i||o<n?a||(this.$el.addClass(" processviewer-drag"),this._dragLimits(),this.options.configuration.$processviewerStage.draggable({refreshPositions:!0,drag:function(t,e){}})):a&&(this.options.configuration.$processviewerStage.draggable("destroy"),this.element.removeClass("processviewer-drag"),this.options.configuration.$processviewerStage.css({left:0,top:0}),this.options.configuration.processviewerHotSpotsContainer.css({left:0,top:0}))}}},_dragLimits:function(){var t=this.options.configuration.processviewerPathsStageGroup.getScale(),e=this.element.width(),i=this.element.height(),n=this.options.configuration.processviewerStage.width*t,s=this.options.configuration.processviewerStage.height*t,r=0,o=0;return e<n&&(r=e-n),i<s&&(o=i-s),{x:r,y:o}},_movePaths:function(t,e){this.options.configuration.processviewerStage.move(t,e)},_createMarkers:function(){var e=t.bizagi.processviewer.design.markers;if(e)for(var i in e){var n=e[i].properties,s={id:i,css:i,markerHeight:10,markerWidth:10,refX:10,refY:5,orient:"auto"},r=this.options.configuration.processviewerStage.marker();t(r.node).attrSVG(s),t(r.node.lastElementChild).attrSVG(n),this.options.configuration.processviewerMarkerEndArrow||(this.options.configuration.processviewerMarkerEndArrow=[]),this.options.configuration.processviewerMarkerEndArrow.push(r)}},_createStyleFormats:function(){var e=this.options.formatStyles,i=t("<div></div>"),n="<style>";for(var s in e){var r="."+s.toLowerCase()+"{";i.css(e[s].css),n+=r+=i.attr("style")+"}"}n+="</style>",t("head").append(t(n))},_asignLabelFormat:function(e,i){if(i.bpmnLabel&&i.bpmnLabel.labelStyle){var n=i.bpmnLabel.labelStyle,s=this.options.formatStyles[n];t(e).closest("svg").length>0&&t(e).css(s.css);var r=s.cssClass;r.push(n);for(var o=0;o<r.length;o++)t(e).addClass(r[o].toLowerCase())}},_createSVGProcessPool:function(){for(var t=[],e=this.options.configuration.processviewerPathsStageGroup,i=this.options.hotspots.length-1;i>=0;i--)this.options.hotspots[i].elementType===this.constants.ELEMENT_TYPE.PROCESS&&(t.push(this.options.hotspots[i]),this.options.hotspots.splice(i,1));this._createSVGRect(e,t,"processPool")},_createSVGLanes:function(){for(var t=[],e=this.options.configuration.processviewerPathsStageGroup,i=this.options.hotspots.length-1;i>=0;i--)this.options.hotspots[i].elementType===this.constants.ELEMENT_TYPE.LANE&&(t.push(this.options.hotspots[i]),this.options.hotspots.splice(i,1));this._createSVGRect(e,t,"lanes")},_createSVGMilestones:function(){for(var t=[],e=this.options.configuration.processviewerPathsStageGroup,i=this.options.hotspots.length-1;i>=0;i--)this.options.hotspots[i].elementType===this.constants.ELEMENT_TYPE.MILESTONES&&(t.push(this.options.hotspots[i]),this.options.hotspots.splice(i,1));this._createSVGRect(e,t,"milestones")},_createSVGSequenceFlows:function(){for(var t=[],e=this.options.configuration.processviewerPathsStageGroup,i=this.options.hotspots.length-1;i>=0;i--)this.options.hotspots[i].elementType!==this.constants.ELEMENT_TYPE.SEQUENCEFLOW&&this.options.hotspots[i].elementType!==this.constants.ELEMENT_TYPE.ASSOCIATION||!this.options.hotspots[i].hasOwnProperty(this.constants.PROPERTIES.WAYPOINTS)||(t.push(this.options.hotspots[i]),this.options.hotspots[i].conditionType===this.constants.CONDITION_TYPE.NORMAL&&this.options.hotspots.splice(i,1));this._createSVGPaths(e,t)},_createSVGRect:function(e,i,n){for(var s,r=0;r<i.length;r++){var o=i[r];if(void 0===o[this.constants.PROPERTIES.BOUNDS])console.log(o);else{var a=o[this.constants.PROPERTIES.BOUNDS],h=e.rect(a.x,a.y,a.width,a.height);if(o.bpmnElementRef?h[0].setAttribute("id",o.bpmnElementRef):o.bpmnElement&&o.bpmnElement.baref&&o.bpmnElement.baref.ref&&h[0].setAttribute("id",o.bpmnElement.baref.ref),""===o.displayName&&(o.displayName="Lane"),null===o.displayName&&(o.displayName=" "),o.displayName&&(s=e.text(a.height/2*-1,10,o.displayName)),o.elementType===this.constants.ELEMENT_TYPE.PROCESS&&(s.attr({"font-weight":"600",y:o.bounds.y+a.height/2,x:10}).data("rotation",-90),s.transform("r-90")),o.elementType===this.constants.ELEMENT_TYPE.MILESTONES){s.attr({"font-weight":"600",y:o.bounds.y+16,x:o.bounds.x+a.width/2}),h.attr("height",this.options.milestonesHeight);var l=o.bounds.x+o.bounds.width,c=o.bounds.y+this.options.milestonesHeight,d=o.bounds.height,u=this._getPathString([{x:l,y:c},{x:l,y:d}]);e.path(u).attr({stroke:"#CCC","stroke-dasharray":"--"});var p=l-1,f=this._getPathString([{x:p,y:o.bounds.y},{x:p+this.options.milestonesHeight,y:this.options.milestonesHeight/2},{x:p,y:this.options.milestonesHeight}]);e.path(f).attr({stroke:"#CCC",fill:"#FFF"})}if(o.elementType===this.constants.ELEMENT_TYPE.LANE){t(s.node).width(),o.bounds.height,t(s.node).height();s.attr({y:o.bounds.y+o.bounds.height/2,x:o.bounds.x+10,"font-weight":"600"}).data("rotation",-90),s.transform("r-90");var g=o.bounds.x+30,m=o.bounds.height,v=this._getPathString([{x:g,y:o.bounds.y+25},{x:g,y:m}]);e.path(v).attr({stroke:"#E6E6E6",fill:"none"})}t(h[0]).attr("id")&&o.displayName&&t(s[0]).data("id",o.id),h.attr({stroke:"#E6E6E6",fill:"none"}),this._asignLabelFormat(s[0],o)}}},_createSVGPaths:function(e,i){for(var n=0;n<i.length;n++){var s=i[n];if(void 0===s[this.constants.PROPERTIES.WAYPOINTS])console.log(s);else{var r=!1;s.elementType!==this.constants.ELEMENT_TYPE.TEXTANNOTATION&&s.conditionType!==this.constants.CONDITION_TYPE.RELATION&&s.conditionType!==this.constants.CONDITION_TYPE.COMPENSATION&&(r=!0);var o=this._getPathString(s[this.constants.PROPERTIES.WAYPOINTS]);o+=this.options.isIE8&&r?this._getArrowPathString(s[this.constants.PROPERTIES.WAYPOINTS]):"";var a=e.path(o);s.bpmnElementRef?a[0].setAttribute("id",s.bpmnElementRef):s.bpmnElement&&s.bpmnElement.baref&&s.bpmnElement.baref.ref&&a[0].setAttribute("id",s.bpmnElement.baref.ref),r&&t(a.node).setMarkerSVG("normal");var h=a.getTotalLength()/2,l=a.getPointAtLength(h);s.displayName&&(nText=e.text(l.x,l.y,s.displayName)),t(a[0]).attr("id")&&s.displayName&&t(nText[0]).data("id",s.id),s.conditionType!==this.constants.CONDITION_TYPE.RELATION&&s.conditionType!==this.constants.CONDITION_TYPE.COMPENSATION||a.attr({"stroke-dasharray":".","stroke-width":"2"}),this._asignLabelFormat(a[0],s)}}},_createHTMLHotSpots:function(){for(var e=this,i=[],n=e.options.hotspots,s=e.options.configuration.processviewerHotSpotsContainer=t('<div class="processviewer-hotspots-container" data-processviewerhotspots style="position:absolute;"></div>'),r=0;r<n.length;r++){var o=n[r];if(o.bounds||o.x){o.number=r;var a=e._createHotSpotDiv(o);i.push(a),s.append(a)}}t("[data-processviewer-wrapper-container]",e.element).prepend(s),s.on("click",".processviewer-hotspot",(function(i){var n=t(this).data("number"),s=t(this);e.options.hotspots[n].onClick&&e.options.hotspots[n].onClick(i,s),e._triggers.click.apply(s,[e.element])})),s.on("mouseenter",".processviewer-hotspot",(function(i){var n=t(this).data("number"),s=t(this);e.options.hotspots[n].onMouseOver&&e.options.hotspots[n].onMouseOver(i,s),e._triggers.onMouseOver.apply(s,[e.element])})),s.on("mouseout",".processviewer-hotspot",(function(i){var n=t(this).data("number"),s=t(this);e.options.hotspots[n].onMouseOut&&e.options.hotspots[n].onMouseOut(i,s),e._triggers.onMouseOut.apply(s,[e.element])})),e.options.configuration.hotspotsList=t(".processviewer-hotspot",e.element)},_createHotSpotDiv:function(e){var i=t('<div class="processviewer-hotspot processviewer-hotspot-div" data-processviewerhotspot></div>'),n=t('<div class="processviewer-hotspot-label" data-processviewerlabel></div>'),s=this._getHotSpotData(e);return i.outerWidth(s.w),i.outerHeight(s.h),i.css("left",s.x+"px"),i.css("top",s.y+"px"),i.data("number",e.number),i.attr("number",e.number),e.bounds&&(i.data("real-width",e.bounds.width),i.data("real-height",e.bounds.height),i.data("real-left",e.bounds.x),i.data("real-top",e.bounds.y)),e.displayName&&e.elementType!==this.constants.ELEMENT_TYPE.SEQUENCEFLOW&&(n.text(e.displayName),i.append(n)),e.elementType&&this._createIconsForHotSpots(i,e),e.text&&e.text.content&&(n.text(e.text.content),i.append(n)),e.dataState&&e.dataState.displayName&&(n.text(e.dataState.displayName),i.append(n)),e.radius&&i.css("border-radius",e.radius),e.css&&i.addClass(e.css),e.loopCharacteristics&&(e.loopCharacteristics.isSequential?i.addClass("issequential"):e.loopCharacteristics.isSequential||i.addClass("isparallel")),this._asignLabelFormat(n[0],e),e.elementType&&i.addClass(e.elementType.toLowerCase()),e.conditionType&&i.addClass(e.conditionType.toLowerCase()),e.eventType&&i.addClass(e.eventType.toLowerCase()),e.subProcessType&&i.addClass(e.subProcessType.toLowerCase()),e.isForCompensation&&i.addClass("isforcompensation"),e.bpmnElementRef?i.attr("id",e.bpmnElementRef):e.bpmnElement&&e.bpmnElement.baref&&e.bpmnElement.baref.ref&&i.attr("id",e.bpmnElement.baref.ref),e.content&&i.append(e.content),i},_createIconsForHotSpots:function(e,i){var n=i.elementType.toLowerCase(),s=t('<div class="processviewer-hotspot-icon" data-processviewericon></div>');if(e.append(s),t.bizagi.processviewer.design.icons){var r=t.bizagi.processviewer.design.icons.scale,o=t.bizagi.processviewer.design.icons.bounds.width*r,a=t.bizagi.processviewer.design.icons.bounds.height*r,h=new Raphael(s[0],o,a).group();i.isForCompensation&&(n="isforcompensation");var l=t.bizagi.processviewer.design.icons.iconset[n];if(l){svgTmp=l.svg;for(var c=0;c<svgTmp.length;c++){var d=svgTmp[c],u=h[d.type]();for(var p in r<1&&h.node.setAttribute("transform","scale("+r+")"),d.properties)u[0].setAttribute(p,d.properties[p])}}}},_getPathString:function(t){for(var e="",i=0;i<t.length;i++)0===i&&(e+="M"),i>0&&(e+="L"),e+=t[i].x+",",e+=t[i].y+",";return e},_getArrowPathString:function(t){var e=t[t.length-1],i=t[t.length-2],n=i.x,s=e.x,r=i.y,o=e.y,a=Raphael.angle(s,o,n,r),h=Raphael.rad(a-135),l=Raphael.rad(a+135);return"M"+s+","+o+",L"+(s+10*Math.cos(h))+","+(o+10*Math.sin(h))+",M"+s+","+o+",L"+(s+10*Math.cos(l))+","+(o+10*Math.sin(l))},_getHotSpotData:function(t){var e={x:0,y:0,w:0,h:0};return t.x?e.x=t.x:t.bounds.x&&(e.x=t.bounds.x),t.y?e.y=t.y:t.bounds.y&&(e.y=t.bounds.y),t.w?e.w=t.w:t.bounds.width&&(e.w=t.bounds.width),t.h?e.h=t.h:t.bounds.height&&(e.h=t.bounds.height),e},_createSVGHotSpots:function(){for(var t=this.options.hotspots,e=0;e<t.length;e++){var i=t[e],n=this.options.configuration.processviewerStage.rect(i.x,i.y,50,50);n.id=i.id,"function"==typeof i.onClick?n.click(i.onClick):n.click(this._triggers.click);var s=this._triggers.onMouseOver,r=this._triggers.onMouseOut;"function"==typeof i.onMouseOver&&(s=i.onMouseOver),"function"==typeof i.onMouseOut&&(r=i.onMouseOut),n.hover(s,r),n.node.id=i.id,n.node.class=i.css,this.options.configuration.processviewerstageHotSpotSet.push(n)}this.options.configuration.processviewerStageSet.push(this.options.configuration.processviewerstageHotSpotSet)},_triggers:{click:function(e){var i={type:"pvClick",message:"hotspot clicked",time:new Date,ui:{control:this,id:t(this).attr("id")}};e.trigger(i)},onMouseOver:function(e){var i={type:"pvMouseIn",message:"hotspot mouse in",time:new Date,ui:{control:this,id:t(this).attr("id")}};e.trigger(i)},onMouseOut:function(e){var i={type:"pvMouseOut",message:"hotspot mouse out",time:new Date,ui:{control:this,id:t(this).attr("id")}};e.trigger(i)},error:function(e){var i={type:"pvError",time:new Date};t.extend(e,i),t.event.trigger(e)}},_createUIFailView:function(e){var i=t('<div class="'+this.options.configuration.errorImageCSS+' svg-error-content"><div class="processviewer-absolute-center"><img src="'+this.options.unavailableImage+'" class="processviewer-absolute-center"/></div><span class="processviewer-message">'+e+"</span></div>");t("[data-processviewercontainer]",this.element).append(i)},_verifyingImage:function(e){var i=t.Deferred(),n=document.createElement("img");return n.onload=function(){i.resolve(n)},n.onerror=function(){i.reject(e)},n.src=e,i.promise()},_getStageContainer:function(e){return t("[data-processviewer-wrapper-container]",this.element)[0]},_generateID:function(){var e=(new Date).getTime(),i="processviewer-xxxxxxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var i=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?i:7&i|8).toString(16)}));return t("#"+i).length>0?this._generateID():i},_adjustLabelsPosition:function(){for(var e=t(".processviewer-hotspot-label",this.element),i=(e.closest(".processviewer-hotspot"),0);i<e.length;i++){var n=t(e[i]),s=n.closest(".processviewer-hotspot"),r=s.outerHeight();if(s.hasClass("subprocess")||s.hasClass("callactivity")||s.hasClass("dataobject")){var o=t._ptToem(r+10);n.css({paddingTop:o})}else this.options.isIE8&&n.css({paddingTop:"1.8em"})}},_setOption:function(t,e){this.options[t]=e,this._update()},_update:function(){var t=this.options.value+"%";this.element.text(t),100===this.options.value&&this._trigger("complete",null,{value:100})},_destroy:function(){this.element.empty().removeAttr("style","").removeAttr("role",""),clearInterval(this.options.animation.interval)},_getSelectedClassCSSByWorkitemState:function(t,e){var i;e&&e.filter&&(i=e.filter((function(e){return e.guidTask===t})));var n="processviewer-shape-selected";return i&&i.length>0&&14==i[0].wiState&&(n="processviewer-shape-selected-standby"),n},selectShape:function(e,i){for(var n=t.isArray(e)?e:[e],s=0,r=n.length;s<r;s++){var o=t("#"+n[s],this.$el);if(o.length){var a=this._getSelectedClassCSSByWorkitemState(n[s],i);"div"!==o.prop("tagName").toLowerCase()?(o.addClassSVG(a),o.setMarkerSVG("selected")):o.addClass(a)}}},unSelectShape:function(e,i){for(var n=t.isArray(e)?e:[e],s=0,r=n.length;s<r;s++){var o=t("#"+n[s],this.$el),a=o.prop("tagName").toLowerCase(),h=this._getSelectedClassCSSByWorkitemState(n[s],i);"div"!==a?(o.removeClassSVG(h),o.reverseMarkerSVG()):o.removeClass(h)}},unSelectAllShapes:function(){for(var e=t(".processviewer-shape-selected",this.$el),i=0;i<e.length;i++){var n=t(e[i]);"div"!==n.prop("tagName").toLowerCase()?(n.removeClassSVG("processviewer-shape-selected"),n.reverseMarkerSVG()):n.removeClass("processviewer-shape-selected")}},drawRoute:function(e){for(var i=[],n=0;n<e.length;n++){var s=t("#"+e[n],this.$el);if(s.length>0)"div"!==s.prop("tagName").toLowerCase()?(s.addClassSVG("processviewer-highlighted"),s.setMarkerSVG("highlighted")):s.addClass("processviewer-highlighted");else i.push(e[n])}this._triggers.error({message:"Doesn't find element",ui:i})},animateRoute:function(e){this.option.counter;t.isArray(e)&&(this.options.animation.counter=0,this.options.animation.path=e,this.options.animation.status=0),0===this.options.animation.status?this._startRouteAnimation():this._stopRouteAnimation()},_startRouteAnimation:function(){var e=this,i=e.options.animation.path;e.options.animation.status=1,0===e.options.animation.counter&&e.clearRoute(),e.options.animation.interval=setInterval((function(){if(e.options.animation.counter<i.length){var n=t("[id="+i[e.options.animation.counter]+"]",e.$el).last();if(n.length>0)"div"!==n.prop("tagName").toLowerCase()?(n.addClassSVG("processviewer-highlighted"),n.setMarkerSVG("highlighted"),n[0].strokecolor="#FF7F00"):n.addClass("processviewer-highlighted");e.options.animation.counter++}else e.element.trigger({type:"animationComplete",message:"animation end!",time:new Date,ui:e.$el}),e.options.animation.counter=0,e._stopRouteAnimation()}),e.options.animation.time)},_stopRouteAnimation:function(){this.options.animation.status=0,clearInterval(this.options.animation.interval)},_isInWorkportal:function(){var t=!1;return"undefined"!=typeof bizagi&&void 0!==bizagi.workportal&&(t=!0),t},clearRoute:function(){for(var e=t(".processviewer-highlighted",this.$el),i=0;i<e.length;i++){var n=t(e[i]);"div"!==n.prop("tagName").toLowerCase()?(n.removeClassSVG("processviewer-highlighted"),n[0].strokecolor="#000",n.reverseMarkerSVG()):n.removeClass("processviewer-highlighted")}},validateHTML5Features:{checkInput:function(t){var e=document.createElement("input");return e.setAttribute("type",t),e.type==t}}}),t.fn.addClassSVG=function(e){var i=arguments[0];return e=t.extend({},t.fn.addClassSVG.config,e),this.each((function(){var t=this.getAttribute("class"),e="";null===t&&(t=""),"string"==typeof i&&-1===t.indexOf(i)&&(e=t+" "+i,this.setAttribute("class",e))}))},t.fn.addClassSVG.config={},t.fn.setMarkerSVG=function(e){var i="url(#"+arguments[0]+")";return e=t.extend({},t.fn.addClassSVG.config,e),this.each((function(){var t=this.getAttribute("marker-end");t!=i&&(this.setAttribute("marker-end",i),this.setAttribute("toggle-marker-end",t))}))},t.fn.reverseMarkerSVG=function(){return this.each((function(){var t=this.getAttribute("marker-end"),e=this.getAttribute("toggle-marker-end");null!==e&&null!==t&&(this.setAttribute("marker-end",e),this.removeAttribute("toggle-marker-end"))}))},t.fn.removeClassSVG=function(e){var i=arguments[0];return e=t.extend({},t.fn.addClassSVG.config,e),this.each((function(){var t=this.getAttribute("class"),e="";null!==t&&"string"==typeof i&&-1!==t.indexOf(i)&&(e=t.replace(i,"").replace("  "," "),this.setAttribute("class",e))}))},t.fn.removeClassSVG.config={},t.fn.hasClassSVG=function(t){var e=arguments[0],i=this[0],n=i.getAttribute("class"),s=!1;return null!==n&&"string"==typeof e&&-1!==n.indexOf(e)&&(s=!0),s},t.fn.attrSVG=function(t){var e=this[0];for(var i in t)e.setAttribute(i,t[i]);return e},t._ptToem=function(t,e){return e||(e=12),t/e+"em"}}(jQuery),function(t){t.fn.processviewerQueries=function(){this.css("color","green");var e=this;return e.data=this[0],e.internalDataSource={elements:[]},e.datasource={hotspots:[],formatStyles:[]},e.deferred=t.Deferred(),e.padding=80,e.typeDefinitions=t.bizagi.processviewer.configuration.validTypeDefinitions,e.constants=t.bizagi.processviewer.configuration.constants,this.methods={init:function(){var e=this,i=t.Deferred();return e.typeDefinitions.unshift("owner"),e.data.definition.owner={processType:e.data.definition.processType,elementType:e.data.definition.elementType,displayName:e.data.definition.displayName,id:e.data.definition.id},t.when(e.methods.processElements.apply(e,[])).done((function(){i.resolve(e.datasource)})),i.promise()},processElements:function(){var e=[];for(var i in this.data.definition){var n=this.data.definition[i];if(this.methods.validateKindObject.apply(this,[i]))if(i===this.constants.LANESETS){if(n){var s=this.methods.getLanesFromLaneSet.apply(this,[n]);e=e.concat(s)}}else e=e.concat(n)}this.internalDataSource.elements=this.internalDataSource.elements.concat(e);for(var r=0;r<this.internalDataSource.elements.length;r++){var o=this.internalDataSource.elements[r].id,a=this.methods.getElementGraphicDataById.apply(this,[o]);if(a){var h=t.extend({},a,this.internalDataSource.elements[r]);this.datasource.hotspots.push(h)}}this.datasource.dimentions=this.methods._getMaxDimentions.apply(this,[]),this.datasource.formatStyles=this.methods.getStylesFormat.apply(this,[])},getStylesFormat:function(){var e,i={};if(this.data.graphics[this.constants.BPMNLABELSTYLES]){e=this.data.graphics[this.constants.BPMNLABELSTYLES];for(var n=0;n<e.length;n++){var s=e[n],r=s.font.size?t._ptToem(s.font.size):"1em";i[s.id]={css:{fontFamily:s.font.name||"Arial",fontSize:r,fontWeight:s.font.isBold?"bold":"normal",fontStyle:s.font.isItalic?"italic":"normal",color:s.font.color||"Black"},cssClass:["alignment-"+s.alignment]}}}return i},_getMaxDimentions:function(){var t,e=0,i=0,n=[];for(var s in this.data.definition){var r=this.data.definition[s];s===this.constants.LANESETS&&r&&(n=this.methods.getLanesFromLaneSet.apply(this,[r]))}for(var o=0;o<n.length;o++)n[o].id&&(t=this.methods.getElementGraphicDataById.apply(this,[n[o].id])),"object"===_typeof(t)&&(e<t.bounds.width&&(e=t.bounds.width+this.padding),i+=t.bounds.height+this.padding);return{width:e,height:i}},_ptToEM:function(t){return t/e.pixelFontSize},getElementGraphicDataById:function(t){for(var e,i=this.data.graphics.bpmnPlane.diagramElements,n=0;n<i.length;n++){var s=this.methods.hasReferenceId(i[n]);if(s&&(localID=s,localID===t)){e=i[n];break}}return e},getLanesFromLaneSet:function(t){for(var e=[],i=0;i<t.length;i++)e=e.concat(t[i].lanes);return e},validateKindObject:function(t){for(var e=!1,i=0;i<this.typeDefinitions.length;i++)if(this.typeDefinitions[i]===t){e=!0;break}return e},hasReferenceId:function(t){var e=!1;return t.bpmnElement?t.bpmnElement.baref&&t.bpmnElement.baref.ref&&(e=t.bpmnElement.baref.ref):t.bpmnElementRef&&(e=t.bpmnElementRef),e}},this.methods.init.apply(this,[])}}(jQuery),
/*!
             * jQuery UI Touch Punch 0.2.2
             *
             * Copyright 2011, Dave Furfero
             * Dual licensed under the MIT or GPL Version 2 licenses.
             *
             * Depends:
             *  jquery.ui.widget.js
             *  jquery.ui.mouse.js
             */
function(t){if(t.support.touch="ontouchend"in document,t.support.touch){var e,i=t.ui.mouse.prototype,n=i._mouseInit;i._touchStart=function(t){!e&&this._mouseCapture(t.originalEvent.changedTouches[0])&&(e=!0,this._touchMoved=!1,s(t,"mouseover"),s(t,"mousemove"),s(t,"mousedown"))},i._touchMove=function(t){e&&(this._touchMoved=!0,s(t,"mousemove"))},i._touchEnd=function(t){e&&(s(t,"mouseup"),s(t,"mouseout"),this._touchMoved||s(t,"click"),e=!1)},i._mouseInit=function(){this.element.bind("touchstart",t.proxy(this,"_touchStart")).bind("touchmove",t.proxy(this,"_touchMove")).bind("touchend",t.proxy(this,"_touchEnd")),n.call(this)}}function s(t,e){if(!(t.originalEvent.touches.length>1)){t.preventDefault();var i=t.originalEvent.changedTouches[0],n=document.createEvent("MouseEvents");n.initMouseEvent(e,!0,!0,window,1,i.screenX,i.screenY,i.clientX,i.clientY,!1,!1,!1,!1,0,null),t.target.dispatchEvent(n)}}}(jQuery),function(t){var e,i,n="0.4.2",s="hasOwnProperty",r=/[\.\/]/,o=function(){},a=function(t,e){return t-e},h={n:{}},l=function t(n,s){n=String(n);var r,o=i,h=Array.prototype.slice.call(arguments,2),l=t.listeners(n),c=0,d=[],u={},p=[],f=e;e=n,i=0;for(var g=0,m=l.length;g<m;g++)"zIndex"in l[g]&&(d.push(l[g].zIndex),l[g].zIndex<0&&(u[l[g].zIndex]=l[g]));for(d.sort(a);d[c]<0;)if(r=u[d[c++]],p.push(r.apply(s,h)),i)return i=o,p;for(g=0;g<m;g++)if("zIndex"in(r=l[g]))if(r.zIndex==d[c]){if(p.push(r.apply(s,h)),i)break;do{if((r=u[d[++c]])&&p.push(r.apply(s,h)),i)break}while(r)}else u[r.zIndex]=r;else if(p.push(r.apply(s,h)),i)break;return i=o,e=f,p.length?p:null};l._events=h,l.listeners=function(t){var e,i,n,s,o,a,l,c,d=t.split(r),u=h,p=[u],f=[];for(s=0,o=d.length;s<o;s++){for(c=[],a=0,l=p.length;a<l;a++)for(i=[(u=p[a].n)[d[s]],u["*"]],n=2;n--;)(e=i[n])&&(c.push(e),f=f.concat(e.f||[]));p=c}return f},l.on=function(t,e){if(t=String(t),"function"!=typeof e)return function(){};for(var i=t.split(r),n=h,s=0,a=i.length;s<a;s++)n=(n=n.n).hasOwnProperty(i[s])&&n[i[s]]||(n[i[s]]={n:{}});for(n.f=n.f||[],s=0,a=n.f.length;s<a;s++)if(n.f[s]==e)return o;return n.f.push(e),function(t){+t==+t&&(e.zIndex=+t)}},l.f=function(t){var e=[].slice.call(arguments,1);return function(){l.apply(null,[t,null].concat(e).concat([].slice.call(arguments,0)))}},l.stop=function(){i=1},l.nt=function(t){return t?new RegExp("(?:\\.|\\/|^)"+t+"(?:\\.|\\/|$)").test(e):e},l.nts=function(){return e.split(r)},l.off=l.unbind=function(t,e){if(t){var i,n,o,a,c,d,u,p=t.split(r),f=[h];for(a=0,c=p.length;a<c;a++)for(d=0;d<f.length;d+=o.length-2){if(o=[d,1],i=f[d].n,"*"!=p[a])i[p[a]]&&o.push(i[p[a]]);else for(n in i)i[s](n)&&o.push(i[n]);f.splice.apply(f,o)}for(a=0,c=f.length;a<c;a++)for(i=f[a];i.n;){if(e){if(i.f){for(d=0,u=i.f.length;d<u;d++)if(i.f[d]==e){i.f.splice(d,1);break}!i.f.length&&delete i.f}for(n in i.n)if(i.n[s](n)&&i.n[n].f){var g=i.n[n].f;for(d=0,u=g.length;d<u;d++)if(g[d]==e){g.splice(d,1);break}!g.length&&delete i.n[n].f}}else for(n in delete i.f,i.n)i.n[s](n)&&i.n[n].f&&delete i.n[n].f;i=i.n}}else l._events=h={n:{}}},l.once=function(t,e){return l.on(t,(function i(){return l.unbind(t,i),e.apply(this,arguments)}))},l.version=n,l.toString=function(){return"You are running Eve "+n},"undefined"!=typeof module&&module.exports?module.exports=l:t.eve=l}(this),function(t,e){!function(t,e){function i(t){if(i.is(t,"function"))return b?t():e.on("raphael.DOMload",t);if(i.is(t,W))return i._engine.create[A](i,t.splice(0,3+i.is(t[0],j))).add(t);var n=Array.prototype.slice.call(arguments,0);if(i.is(n[n.length-1],"function")){var s=n.pop();return b?s.call(i._engine.create[A](i,n)):e.on("raphael.DOMload",(function(){s.call(i._engine.create[A](i,n))}))}return i._engine.create[A](i,arguments)}function n(t){if("function"==typeof t||Object(t)!==t)return t;var e=new t.constructor;for(var i in t)t[C](i)&&(e[i]=n(t[i]));return e}function s(t,e){for(var i=0,n=t.length;i<n;i++)if(t[i]===e)return t.push(t.splice(i,1)[0])}function r(t,e,i){return function n(){var r=Array.prototype.slice.call(arguments,0),o=r.join(""),a=n.cache=n.cache||{},h=n.count=n.count||[];return a[C](o)?(s(h,o),i?i(a[o]):a[o]):(h.length>=1e3&&delete a[h.shift()],h.push(o),a[o]=t[A](e,r),i?i(a[o]):a[o])}}function o(){return this.hex}function a(t,e){for(var i=[],n=0,s=t.length;s-2*!e>n;n+=2){var r=[{x:+t[n-2],y:+t[n-1]},{x:+t[n],y:+t[n+1]},{x:+t[n+2],y:+t[n+3]},{x:+t[n+4],y:+t[n+5]}];e?n?s-4==n?r[3]={x:+t[0],y:+t[1]}:s-2==n&&(r[2]={x:+t[0],y:+t[1]},r[3]={x:+t[2],y:+t[3]}):r[0]={x:+t[s-2],y:+t[s-1]}:s-4==n?r[3]=r[2]:n||(r[0]={x:+t[n],y:+t[n+1]}),i.push(["C",(-r[0].x+6*r[1].x+r[2].x)/6,(-r[0].y+6*r[1].y+r[2].y)/6,(r[1].x+6*r[2].x-r[3].x)/6,(r[1].y+6*r[2].y-r[3].y)/6,r[2].x,r[2].y])}return i}function h(t,e,i,n,s){return t*(t*(-3*e+9*i-9*n+3*s)+6*e-12*i+6*n)-3*e+3*i}function l(t,e,i,n,s,r,o,a,l){null==l&&(l=1);for(var c=(l=l>1?1:l<0?0:l)/2,d=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],u=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],p=0,f=0;f<12;f++){var g=c*d[f]+c,m=h(g,t,i,s,o),v=h(g,e,n,r,a),y=m*m+v*v;p+=u[f]*N.sqrt(y)}return c*p}function c(t,e,i,n,s,r,o,a){if(!(V(t,i)<F(s,o)||F(t,i)>V(s,o)||V(e,n)<F(r,a)||F(e,n)>V(r,a))){var h=(t-i)*(r-a)-(e-n)*(s-o);if(h){var l=((t*n-e*i)*(s-o)-(t-i)*(s*a-r*o))/h,c=((t*n-e*i)*(r-a)-(e-n)*(s*a-r*o))/h,d=+l.toFixed(2),u=+c.toFixed(2);if(!(d<+F(t,i).toFixed(2)||d>+V(t,i).toFixed(2)||d<+F(s,o).toFixed(2)||d>+V(s,o).toFixed(2)||u<+F(e,n).toFixed(2)||u>+V(e,n).toFixed(2)||u<+F(r,a).toFixed(2)||u>+V(r,a).toFixed(2)))return{x:l,y:c}}}}function d(t,e,n){var s=i.bezierBBox(t),r=i.bezierBBox(e);if(!i.isBBoxIntersect(s,r))return n?0:[];for(var o=l.apply(0,t),a=l.apply(0,e),h=V(~~(o/5),1),d=V(~~(a/5),1),u=[],p=[],f={},g=n?0:[],m=0;m<h+1;m++){var v=i.findDotsAtSegment.apply(i,t.concat(m/h));u.push({x:v.x,y:v.y,t:m/h})}for(m=0;m<d+1;m++)v=i.findDotsAtSegment.apply(i,e.concat(m/d)),p.push({x:v.x,y:v.y,t:m/d});for(m=0;m<h;m++)for(var y=0;y<d;y++){var b=u[m],w=u[m+1],x=p[y],_=p[y+1],k=H(w.x-b.x)<.001?"y":"x",C=H(_.x-x.x)<.001?"y":"x",S=c(b.x,b.y,w.x,w.y,x.x,x.y,_.x,_.y);if(S){if(f[S.x.toFixed(4)]==S.y.toFixed(4))continue;f[S.x.toFixed(4)]=S.y.toFixed(4);var T=b.t+H((S[k]-b[k])/(w[k]-b[k]))*(w.t-b.t),P=x.t+H((S[C]-x[C])/(_[C]-x[C]))*(_.t-x.t);T>=0&&T<=1.001&&P>=0&&P<=1.001&&(n?g++:g.push({x:S.x,y:S.y,t1:F(T,1),t2:F(P,1)}))}}return g}function u(t,e,n){t=i._path2curve(t),e=i._path2curve(e);for(var s,r,o,a,h,l,c,u,p,f,g=n?0:[],m=0,v=t.length;m<v;m++){var y=t[m];if("M"==y[0])s=h=y[1],r=l=y[2];else{"C"==y[0]?(p=[s,r].concat(y.slice(1)),s=p[6],r=p[7]):(p=[s,r,s,r,h,l,h,l],s=h,r=l);for(var b=0,w=e.length;b<w;b++){var x=e[b];if("M"==x[0])o=c=x[1],a=u=x[2];else{"C"==x[0]?(f=[o,a].concat(x.slice(1)),o=f[6],a=f[7]):(f=[o,a,o,a,c,u,c,u],o=c,a=u);var _=d(p,f,n);if(n)g+=_;else{for(var k=0,C=_.length;k<C;k++)_[k].segment1=m,_[k].segment2=b,_[k].bez1=p,_[k].bez2=f;g=g.concat(_)}}}}}return g}function p(t,e,i,n,s,r){null!=t?(this.a=+t,this.b=+e,this.c=+i,this.d=+n,this.e=+s,this.f=+r):(this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0)}function f(){return this.x+M+this.y+M+this.width+"  "+this.height}function g(t,e,i,n,s,r){function o(t){return((l*t+h)*t+a)*t}var a=3*e,h=3*(n-e)-a,l=1-a-h,c=3*i,d=3*(s-i)-c,u=1-c-d;return function(t,e){var i=function(t,e){var i,n,s,r,c,d;for(s=t,d=0;d<8;d++){if(r=o(s)-t,H(r)<e)return s;if(H(c=(3*l*s+2*h)*s+a)<1e-6)break;s-=r/c}if(n=1,(s=t)<(i=0))return i;if(s>n)return n;for(;i<n;){if(r=o(s),H(r-t)<e)return s;t>r?i=s:n=s,s=(n-i)/2+i}return s}(t,e);return((u*i+d)*i+c)*i}(t,1/(200*r))}function m(t,e){var i=[],n={};if(this.ms=e,this.times=1,t){for(var s in t)t[C](s)&&(n[K(s)]=t[s],i.push(K(s)));i.sort(ct)}this.anim=n,this.top=i[i.length-1],this.percents=i}function v(t,n,s,r,o,a){s=K(s);var h,l,c,d,u,f,m=t.ms,v={},y={},b={};if(r)for(_=0,k=re.length;_<k;_++){var w=re[_];if(w.el.id==n.id&&w.anim==t){w.percent!=s?(re.splice(_,1),c=1):l=w,n.attr(w.totalOrigin);break}}else r=+y;for(var _=0,k=t.percents.length;_<k;_++){if(t.percents[_]==s||t.percents[_]>r*t.top){s=t.percents[_],u=t.percents[_-1]||0,m=m/t.top*(s-u),d=t.percents[_+1],h=t.anim[s];break}r&&n.attr(t.anim[t.percents[_]])}if(h){if(l)l.initstatus=r,l.start=new Date-l.ms*r;else{for(var S in h)if(h[C](S)&&(it[C](S)||n.paper.customAttributes[C](S)))switch(v[S]=n.attr(S),null==v[S]&&(v[S]=et[S]),y[S]=h[S],it[S]){case j:b[S]=(y[S]-v[S])/m;break;case"colour":v[S]=i.getRGB(v[S]);var T=i.getRGB(y[S]);b[S]={r:(T.r-v[S].r)/m,g:(T.g-v[S].g)/m,b:(T.b-v[S].b)/m};break;case"path":var P=It(v[S],y[S]),A=P[1];for(v[S]=P[0],b[S]=[],_=0,k=v[S].length;_<k;_++){b[S][_]=[0];for(var D=1,E=v[S][_].length;D<E;D++)b[S][_][D]=(A[_][D]-v[S][_][D])/m}break;case"transform":var M=n._,B=Vt(M[S],y[S]);if(B)for(v[S]=B.from,y[S]=B.to,b[S]=[],b[S].real=!0,_=0,k=v[S].length;_<k;_++)for(b[S][_]=[v[S][_][0]],D=1,E=v[S][_].length;D<E;D++)b[S][_][D]=(y[S][_][D]-v[S][_][D])/m;else{var R=n.matrix||new p,O={_:{transform:M.transform},getBBox:function(){return n.getBBox(1)}};v[S]=[R.a,R.b,R.c,R.d,R.e,R.f],Ot(O,y[S]),y[S]=O._.transform,b[S]=[(O.matrix.a-R.a)/m,(O.matrix.b-R.b)/m,(O.matrix.c-R.c)/m,(O.matrix.d-R.d)/m,(O.matrix.e-R.e)/m,(O.matrix.f-R.f)/m]}break;case"csv":var N=L(h[S])[I](x),V=L(v[S])[I](x);if("clip-rect"==S)for(v[S]=V,b[S]=[],_=V.length;_--;)b[S][_]=(N[_]-v[S][_])/m;y[S]=N;break;default:for(N=[][z](h[S]),V=[][z](v[S]),b[S]=[],_=n.paper.customAttributes[S].length;_--;)b[S][_]=((N[_]||0)-(V[_]||0))/m}var F=h.easing,H=i.easing_formulas[F];if(!H)if((H=L(F).match(X))&&5==H.length){var U=H;H=function(t){return g(t,+U[1],+U[2],+U[3],+U[4],m)}}else H=dt;if(w={anim:t,percent:s,timestamp:f=h.start||t.start||+new Date,start:f+(t.del||0),status:0,initstatus:r||0,stop:!1,ms:m,easing:H,from:v,diff:b,to:y,el:n,callback:h.callback,prev:u,next:d,repeat:a||t.times,origin:n.attr(),totalOrigin:o},re.push(w),r&&!l&&!c&&(w.stop=!0,w.start=new Date-m*r,1==re.length))return ae();c&&(w.start=new Date-w.ms*r),1==re.length&&oe(ae)}e("raphael.anim.start."+n.id,n,t)}}function y(t){for(var e=0;e<re.length;e++)re[e].el.paper==t&&re.splice(e--,1)}i.version="2.1.2",i.eve=e;var b,w,x=/[, ]+/,_={circle:1,rect:1,path:1,ellipse:1,text:1,image:1},k=/\{(\d+)\}/g,C="hasOwnProperty",S={doc:document,win:t},T={was:Object.prototype[C].call(S.win,"Raphael"),is:S.win.Raphael},P=function(){this.ca=this.customAttributes={}},A="apply",z="concat",D="ontouchstart"in S.win||S.win.DocumentTouch&&S.doc instanceof DocumentTouch,E="",M=" ",L=String,I="split",B="click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend touchcancel"[I](M),R={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},O=L.prototype.toLowerCase,N=Math,V=N.max,F=N.min,H=N.abs,U=N.pow,$=N.PI,j="number",G="string",W="array",q=Object.prototype.toString,Y=(i._ISURL=/^url\(['"]?([^\)]+?)['"]?\)$/i,/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i),Q={NaN:1,Infinity:1,"-Infinity":1},X=/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,Z=N.round,K=parseFloat,J=parseInt,tt=L.prototype.toUpperCase,et=i._availableAttrs={"arrow-end":"none","arrow-start":"none",blur:0,"clip-rect":"0 0 1e9 1e9",cursor:"default",cx:0,cy:0,fill:"#fff","fill-opacity":1,font:'10px "Arial"',"font-family":'"Arial"',"font-size":"10","font-style":"normal","font-weight":400,gradient:0,height:0,href:"http://raphaeljs.com/","letter-spacing":0,opacity:1,path:"M0,0",r:0,rx:0,ry:0,src:"",stroke:"#000","stroke-dasharray":"","stroke-linecap":"butt","stroke-linejoin":"butt","stroke-miterlimit":0,"stroke-opacity":1,"stroke-width":1,target:"_blank","text-anchor":"middle",title:"Raphael",transform:"",width:0,x:0,y:0},it=i._availableAnimAttrs={blur:j,"clip-rect":"csv",cx:j,cy:j,fill:"colour","fill-opacity":j,"font-size":j,height:j,opacity:j,path:"path",r:j,rx:j,ry:j,stroke:"colour","stroke-opacity":j,"stroke-width":j,transform:"transform",width:j,x:j,y:j},nt=/[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/,st={hs:1,rg:1},rt=/,?([achlmqrstvxz]),?/gi,ot=/([achlmrqstvz])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi,at=/([rstm])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi,ht=/(-?\d*\.?\d*(?:e[\-+]?\d+)?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/gi,lt=(i._radial_gradient=/^r(?:\(([^,]+?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*([^\)]+?)\))?/,{}),ct=function(t,e){return K(t)-K(e)},dt=function(t){return t},ut=i._rectPath=function(t,e,i,n,s){return s?[["M",t+s,e],["l",i-2*s,0],["a",s,s,0,0,1,s,s],["l",0,n-2*s],["a",s,s,0,0,1,-s,s],["l",2*s-i,0],["a",s,s,0,0,1,-s,-s],["l",0,2*s-n],["a",s,s,0,0,1,s,-s],["z"]]:[["M",t,e],["l",i,0],["l",0,n],["l",-i,0],["z"]]},pt=function(t,e,i,n){return null==n&&(n=i),[["M",t,e],["m",0,-n],["a",i,n,0,1,1,0,2*n],["a",i,n,0,1,1,0,-2*n],["z"]]},ft=i._getPath={path:function(t){return t.attr("path")},circle:function(t){var e=t.attrs;return pt(e.cx,e.cy,e.r)},ellipse:function(t){var e=t.attrs;return pt(e.cx,e.cy,e.rx,e.ry)},rect:function(t){var e=t.attrs;return ut(e.x,e.y,e.width,e.height,e.r)},image:function(t){var e=t.attrs;return ut(e.x,e.y,e.width,e.height)},text:function(t){var e=t._getBBox();return ut(e.x,e.y,e.width,e.height)},set:function(t){var e=t._getBBox();return ut(e.x,e.y,e.width,e.height)}},gt=i.mapPath=function(t,e){if(!e)return t;var i,n,s,r,o,a,h;for(s=0,o=(t=It(t)).length;s<o;s++)for(r=1,a=(h=t[s]).length;r<a;r+=2)i=e.x(h[r],h[r+1]),n=e.y(h[r],h[r+1]),h[r]=i,h[r+1]=n;return t};if(i._g=S,i.type=S.win.SVGAngle||S.doc.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")?"SVG":"VML","VML"==i.type){var mt,vt=S.doc.createElement("div");if(vt.innerHTML='<v:shape adj="1"/>',(mt=vt.firstChild).style.behavior="url(#default#VML)",!mt||"object"!=_typeof(mt.adj))return i.type=E;vt=null}i.svg=!(i.vml="VML"==i.type),i._Paper=P,i.fn=w=P.prototype=i.prototype,i._id=0,i._oid=0,i.is=function(t,e){return"finite"==(e=O.call(e))?!Q[C](+t):"array"==e?t instanceof Array:"null"==e&&null===t||e==_typeof(t)&&null!==t||"object"==e&&t===Object(t)||"array"==e&&Array.isArray&&Array.isArray(t)||q.call(t).slice(8,-1).toLowerCase()==e},i.angle=function(t,e,n,s,r,o){if(null==r){var a=t-n,h=e-s;return a||h?(180+180*N.atan2(-h,-a)/$+360)%360:0}return i.angle(t,e,r,o)-i.angle(n,s,r,o)},i.rad=function(t){return t%360*$/180},i.deg=function(t){return 180*t/$%360},i.snapTo=function(t,e,n){if(n=i.is(n,"finite")?n:10,i.is(t,W)){for(var s=t.length;s--;)if(H(t[s]-e)<=n)return t[s]}else{var r=e%(t=+t);if(r<n)return e-r;if(r>t-n)return e-r+t}return e};i.createUUID=function(t,e){return function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(t,e).toUpperCase()}}(/[xy]/g,(function(t){var e=16*N.random()|0;return("x"==t?e:3&e|8).toString(16)}));i.setWindow=function(t){e("raphael.setWindow",i,S.win,t),S.win=t,S.doc=S.win.document,i._engine.initWin&&i._engine.initWin(S.win)};var yt=function(t){if(i.vml){var e,n=/^\s+|\s+$/g;try{var s=new ActiveXObject("htmlfile");s.write("<body>"),s.close(),e=s.body}catch(t){e=createPopup().document.body}var o=e.createTextRange();yt=r((function(t){try{e.style.color=L(t).replace(n,E);var i=o.queryCommandValue("ForeColor");return"#"+("000000"+(i=(255&i)<<16|65280&i|(16711680&i)>>>16).toString(16)).slice(-6)}catch(t){return"none"}}))}else{var a=S.doc.createElement("i");a.title="Raphal Colour Picker",a.style.display="none",S.doc.body.appendChild(a),yt=r((function(t){return a.style.color=t,S.doc.defaultView.getComputedStyle(a,E).getPropertyValue("color")}))}return yt(t)},bt=function(){return"hsb("+[this.h,this.s,this.b]+")"},wt=function(){return"hsl("+[this.h,this.s,this.l]+")"},xt=function(){return this.hex},_t=function(t,e,n){if(null==e&&i.is(t,"object")&&"r"in t&&"g"in t&&"b"in t&&(n=t.b,e=t.g,t=t.r),null==e&&i.is(t,G)){var s=i.getRGB(t);t=s.r,e=s.g,n=s.b}return(t>1||e>1||n>1)&&(t/=255,e/=255,n/=255),[t,e,n]},kt=function(t,e,n,s){var r={r:t*=255,g:e*=255,b:n*=255,hex:i.rgb(t,e,n),toString:xt};return i.is(s,"finite")&&(r.opacity=s),r};i.color=function(t){var e;return i.is(t,"object")&&"h"in t&&"s"in t&&"b"in t?(e=i.hsb2rgb(t),t.r=e.r,t.g=e.g,t.b=e.b,t.hex=e.hex):i.is(t,"object")&&"h"in t&&"s"in t&&"l"in t?(e=i.hsl2rgb(t),t.r=e.r,t.g=e.g,t.b=e.b,t.hex=e.hex):(i.is(t,"string")&&(t=i.getRGB(t)),i.is(t,"object")&&"r"in t&&"g"in t&&"b"in t?(e=i.rgb2hsl(t),t.h=e.h,t.s=e.s,t.l=e.l,e=i.rgb2hsb(t),t.v=e.b):(t={hex:"none"}).r=t.g=t.b=t.h=t.s=t.v=t.l=-1),t.toString=xt,t},i.hsb2rgb=function(t,e,i,n){var s,r,o,a,h;return this.is(t,"object")&&"h"in t&&"s"in t&&"b"in t&&(i=t.b,e=t.s,n=(t=t.h).o),a=(h=i*e)*(1-H((t=(t*=360)%360/60)%2-1)),s=r=o=i-h,kt(s+=[h,a,0,0,a,h][t=~~t],r+=[a,h,h,a,0,0][t],o+=[0,0,a,h,h,a][t],n)},i.hsl2rgb=function(t,e,i,n){var s,r,o,a,h;return this.is(t,"object")&&"h"in t&&"s"in t&&"l"in t&&(i=t.l,e=t.s,t=t.h),(t>1||e>1||i>1)&&(t/=360,e/=100,i/=100),a=(h=2*e*(i<.5?i:1-i))*(1-H((t=(t*=360)%360/60)%2-1)),s=r=o=i-h/2,kt(s+=[h,a,0,0,a,h][t=~~t],r+=[a,h,h,a,0,0][t],o+=[0,0,a,h,h,a][t],n)},i.rgb2hsb=function(t,e,i){var n,s;return t=(i=_t(t,e,i))[0],e=i[1],i=i[2],{h:((0==(s=(n=V(t,e,i))-F(t,e,i))?null:n==t?(e-i)/s:n==e?(i-t)/s+2:(t-e)/s+4)+360)%6*60/360,s:0==s?0:s/n,b:n,toString:bt}},i.rgb2hsl=function(t,e,i){var n,s,r,o;return t=(i=_t(t,e,i))[0],e=i[1],i=i[2],n=((s=V(t,e,i))+(r=F(t,e,i)))/2,{h:((0==(o=s-r)?null:s==t?(e-i)/o:s==e?(i-t)/o+2:(t-e)/o+4)+360)%6*60/360,s:0==o?0:n<.5?o/(2*n):o/(2-2*n),l:n,toString:wt}},i._path2string=function(){return this.join(",").replace(rt,"$1")};i._preload=function(t,e){var i=S.doc.createElement("img");i.style.cssText="position:absolute;left:-9999em;top:-9999em",i.onload=function(){e.call(this),this.onload=null,S.doc.body.removeChild(this)},i.onerror=function(){S.doc.body.removeChild(this)},S.doc.body.appendChild(i),i.src=t};i.getRGB=r((function(t){if(!t||(t=L(t)).indexOf("-")+1)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:o};if("none"==t)return{r:-1,g:-1,b:-1,hex:"none",toString:o};!st[C](t.toLowerCase().substring(0,2))&&"#"!=t.charAt()&&(t=yt(t));var e,n,s,r,a,h,l=t.match(Y);return l?(l[2]&&(s=J(l[2].substring(5),16),n=J(l[2].substring(3,5),16),e=J(l[2].substring(1,3),16)),l[3]&&(s=J((a=l[3].charAt(3))+a,16),n=J((a=l[3].charAt(2))+a,16),e=J((a=l[3].charAt(1))+a,16)),l[4]&&(h=l[4][I](nt),e=K(h[0]),"%"==h[0].slice(-1)&&(e*=2.55),n=K(h[1]),"%"==h[1].slice(-1)&&(n*=2.55),s=K(h[2]),"%"==h[2].slice(-1)&&(s*=2.55),"rgba"==l[1].toLowerCase().slice(0,4)&&(r=K(h[3])),h[3]&&"%"==h[3].slice(-1)&&(r/=100)),l[5]?(h=l[5][I](nt),e=K(h[0]),"%"==h[0].slice(-1)&&(e*=2.55),n=K(h[1]),"%"==h[1].slice(-1)&&(n*=2.55),s=K(h[2]),"%"==h[2].slice(-1)&&(s*=2.55),("deg"==h[0].slice(-3)||""==h[0].slice(-1))&&(e/=360),"hsba"==l[1].toLowerCase().slice(0,4)&&(r=K(h[3])),h[3]&&"%"==h[3].slice(-1)&&(r/=100),i.hsb2rgb(e,n,s,r)):l[6]?(h=l[6][I](nt),e=K(h[0]),"%"==h[0].slice(-1)&&(e*=2.55),n=K(h[1]),"%"==h[1].slice(-1)&&(n*=2.55),s=K(h[2]),"%"==h[2].slice(-1)&&(s*=2.55),("deg"==h[0].slice(-3)||""==h[0].slice(-1))&&(e/=360),"hsla"==l[1].toLowerCase().slice(0,4)&&(r=K(h[3])),h[3]&&"%"==h[3].slice(-1)&&(r/=100),i.hsl2rgb(e,n,s,r)):((l={r:e,g:n,b:s,toString:o}).hex="#"+(16777216|s|n<<8|e<<16).toString(16).slice(1),i.is(r,"finite")&&(l.opacity=r),l)):{r:-1,g:-1,b:-1,hex:"none",error:1,toString:o}}),i),i.hsb=r((function(t,e,n){return i.hsb2rgb(t,e,n).hex})),i.hsl=r((function(t,e,n){return i.hsl2rgb(t,e,n).hex})),i.rgb=r((function(t,e,i){return"#"+(16777216|i|e<<8|t<<16).toString(16).slice(1)})),i.getColor=function(t){var e=this.getColor.start=this.getColor.start||{h:0,s:1,b:t||.75},i=this.hsb2rgb(e.h,e.s,e.b);return e.h+=.075,e.h>1&&(e.h=0,e.s-=.2,e.s<=0&&(this.getColor.start={h:0,s:1,b:e.b})),i.hex},i.getColor.reset=function(){delete this.start},i.parsePathString=function(t){if(!t)return null;var e=Ct(t);if(e.arr)return Tt(e.arr);var n={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},s=[];return i.is(t,W)&&i.is(t[0],W)&&(s=Tt(t)),s.length||L(t).replace(ot,(function(t,e,i){var r=[],o=e.toLowerCase();if(i.replace(ht,(function(t,e){e&&r.push(+e)})),"m"==o&&r.length>2&&(s.push([e][z](r.splice(0,2))),o="l",e="m"==e?"l":"L"),"r"==o)s.push([e][z](r));else for(;r.length>=n[o]&&(s.push([e][z](r.splice(0,n[o]))),n[o]););})),s.toString=i._path2string,e.arr=Tt(s),s},i.parseTransformString=r((function(t){if(!t)return null;var e=[];return i.is(t,W)&&i.is(t[0],W)&&(e=Tt(t)),e.length||L(t).replace(at,(function(t,i,n){var s=[];O.call(i);n.replace(ht,(function(t,e){e&&s.push(+e)})),e.push([i][z](s))})),e.toString=i._path2string,e}));var Ct=function t(e){var i=t.ps=t.ps||{};return i[e]?i[e].sleep=100:i[e]={sleep:100},setTimeout((function(){for(var t in i)i[C](t)&&t!=e&&(i[t].sleep--,!i[t].sleep&&delete i[t])})),i[e]};i.findDotsAtSegment=function(t,e,i,n,s,r,o,a,h){var l=1-h,c=U(l,3),d=U(l,2),u=h*h,p=u*h,f=c*t+3*d*h*i+3*l*h*h*s+p*o,g=c*e+3*d*h*n+3*l*h*h*r+p*a,m=t+2*h*(i-t)+u*(s-2*i+t),v=e+2*h*(n-e)+u*(r-2*n+e),y=i+2*h*(s-i)+u*(o-2*s+i),b=n+2*h*(r-n)+u*(a-2*r+n),w=l*t+h*i,x=l*e+h*n,_=l*s+h*o,k=l*r+h*a,C=90-180*N.atan2(m-y,v-b)/$;return(m>y||v<b)&&(C+=180),{x:f,y:g,m:{x:m,y:v},n:{x:y,y:b},start:{x:w,y:x},end:{x:_,y:k},alpha:C}},i.bezierBBox=function(t,e,n,s,r,o,a,h){i.is(t,"array")||(t=[t,e,n,s,r,o,a,h]);var l=Lt.apply(null,t);return{x:l.min.x,y:l.min.y,x2:l.max.x,y2:l.max.y,width:l.max.x-l.min.x,height:l.max.y-l.min.y}},i.isPointInsideBBox=function(t,e,i){return e>=t.x&&e<=t.x2&&i>=t.y&&i<=t.y2},i.isBBoxIntersect=function(t,e){var n=i.isPointInsideBBox;return n(e,t.x,t.y)||n(e,t.x2,t.y)||n(e,t.x,t.y2)||n(e,t.x2,t.y2)||n(t,e.x,e.y)||n(t,e.x2,e.y)||n(t,e.x,e.y2)||n(t,e.x2,e.y2)||(t.x<e.x2&&t.x>e.x||e.x<t.x2&&e.x>t.x)&&(t.y<e.y2&&t.y>e.y||e.y<t.y2&&e.y>t.y)},i.pathIntersection=function(t,e){return u(t,e)},i.pathIntersectionNumber=function(t,e){return u(t,e,1)},i.isPointInsidePath=function(t,e,n){var s=i.pathBBox(t);return i.isPointInsideBBox(s,e,n)&&u(t,[["M",e,n],["H",s.x2+10]],1)%2==1},i._removedFactory=function(t){return function(){e("raphael.log",null,"Raphal: you are calling to method "+t+" of removed object",t)}};var St=i.pathBBox=function(t){var e=Ct(t);if(e.bbox)return n(e.bbox);if(!t)return{x:0,y:0,width:0,height:0,x2:0,y2:0};for(var i,s=0,r=0,o=[],a=[],h=0,l=(t=It(t)).length;h<l;h++)if("M"==(i=t[h])[0])s=i[1],r=i[2],o.push(s),a.push(r);else{var c=Lt(s,r,i[1],i[2],i[3],i[4],i[5],i[6]);o=o[z](c.min.x,c.max.x),a=a[z](c.min.y,c.max.y),s=i[5],r=i[6]}var d=F[A](0,o),u=F[A](0,a),p=V[A](0,o),f=V[A](0,a),g=p-d,m=f-u,v={x:d,y:u,x2:p,y2:f,width:g,height:m,cx:d+g/2,cy:u+m/2};return e.bbox=n(v),v},Tt=function(t){var e=n(t);return e.toString=i._path2string,e},Pt=i._pathToRelative=function(t){var e=Ct(t);if(e.rel)return Tt(e.rel);i.is(t,W)&&i.is(t&&t[0],W)||(t=i.parsePathString(t));var n=[],s=0,r=0,o=0,a=0,h=0;"M"==t[0][0]&&(o=s=t[0][1],a=r=t[0][2],h++,n.push(["M",s,r]));for(var l=h,c=t.length;l<c;l++){var d=n[l]=[],u=t[l];if(u[0]!=O.call(u[0]))switch(d[0]=O.call(u[0]),d[0]){case"a":d[1]=u[1],d[2]=u[2],d[3]=u[3],d[4]=u[4],d[5]=u[5],d[6]=+(u[6]-s).toFixed(3),d[7]=+(u[7]-r).toFixed(3);break;case"v":d[1]=+(u[1]-r).toFixed(3);break;case"m":o=u[1],a=u[2];default:for(var p=1,f=u.length;p<f;p++)d[p]=+(u[p]-(p%2?s:r)).toFixed(3)}else{d=n[l]=[],"m"==u[0]&&(o=u[1]+s,a=u[2]+r);for(var g=0,m=u.length;g<m;g++)n[l][g]=u[g]}var v=n[l].length;switch(n[l][0]){case"z":s=o,r=a;break;case"h":s+=+n[l][v-1];break;case"v":r+=+n[l][v-1];break;default:s+=+n[l][v-2],r+=+n[l][v-1]}}return n.toString=i._path2string,e.rel=Tt(n),n},At=i._pathToAbsolute=function(t){var e=Ct(t);if(e.abs)return Tt(e.abs);if(i.is(t,W)&&i.is(t&&t[0],W)||(t=i.parsePathString(t)),!t||!t.length)return[["M",0,0]];var n=[],s=0,r=0,o=0,h=0,l=0;"M"==t[0][0]&&(o=s=+t[0][1],h=r=+t[0][2],l++,n[0]=["M",s,r]);for(var c,d,u=3==t.length&&"M"==t[0][0]&&"R"==t[1][0].toUpperCase()&&"Z"==t[2][0].toUpperCase(),p=l,f=t.length;p<f;p++){if(n.push(c=[]),(d=t[p])[0]!=tt.call(d[0]))switch(c[0]=tt.call(d[0]),c[0]){case"A":c[1]=d[1],c[2]=d[2],c[3]=d[3],c[4]=d[4],c[5]=d[5],c[6]=+(d[6]+s),c[7]=+(d[7]+r);break;case"V":c[1]=+d[1]+r;break;case"H":c[1]=+d[1]+s;break;case"R":for(var g=[s,r][z](d.slice(1)),m=2,v=g.length;m<v;m++)g[m]=+g[m]+s,g[++m]=+g[m]+r;n.pop(),n=n[z](a(g,u));break;case"M":o=+d[1]+s,h=+d[2]+r;default:for(m=1,v=d.length;m<v;m++)c[m]=+d[m]+(m%2?s:r)}else if("R"==d[0])g=[s,r][z](d.slice(1)),n.pop(),n=n[z](a(g,u)),c=["R"][z](d.slice(-2));else for(var y=0,b=d.length;y<b;y++)c[y]=d[y];switch(c[0]){case"Z":s=o,r=h;break;case"H":s=c[1];break;case"V":r=c[1];break;case"M":o=c[c.length-2],h=c[c.length-1];default:s=c[c.length-2],r=c[c.length-1]}}return n.toString=i._path2string,e.abs=Tt(n),n},zt=function(t,e,i,n){return[t,e,i,n,i,n]},Dt=function(t,e,i,n,s,r){var o=1/3,a=2/3;return[o*t+a*i,o*e+a*n,o*s+a*i,o*r+a*n,s,r]},Et=function t(e,i,n,s,o,a,h,l,c,d){var u,p=120*$/180,f=$/180*(+o||0),g=[],m=r((function(t,e,i){return{x:t*N.cos(i)-e*N.sin(i),y:t*N.sin(i)+e*N.cos(i)}}));if(d)S=d[0],T=d[1],k=d[2],C=d[3];else{e=(u=m(e,i,-f)).x,i=u.y,l=(u=m(l,c,-f)).x,c=u.y;N.cos($/180*o),N.sin($/180*o);var v=(e-l)/2,y=(i-c)/2,b=v*v/(n*n)+y*y/(s*s);b>1&&(n*=b=N.sqrt(b),s*=b);var w=n*n,x=s*s,_=(a==h?-1:1)*N.sqrt(H((w*x-w*y*y-x*v*v)/(w*y*y+x*v*v))),k=_*n*y/s+(e+l)/2,C=_*-s*v/n+(i+c)/2,S=N.asin(((i-C)/s).toFixed(9)),T=N.asin(((c-C)/s).toFixed(9));(S=e<k?$-S:S)<0&&(S=2*$+S),(T=l<k?$-T:T)<0&&(T=2*$+T),h&&S>T&&(S-=2*$),!h&&T>S&&(T-=2*$)}var P=T-S;if(H(P)>p){var A=T,D=l,E=c;T=S+p*(h&&T>S?1:-1),g=t(l=k+n*N.cos(T),c=C+s*N.sin(T),n,s,o,0,h,D,E,[T,A,k,C])}P=T-S;var M=N.cos(S),L=N.sin(S),B=N.cos(T),R=N.sin(T),O=N.tan(P/4),V=4/3*n*O,F=4/3*s*O,U=[e,i],j=[e+V*L,i-F*M],G=[l+V*R,c-F*B],W=[l,c];if(j[0]=2*U[0]-j[0],j[1]=2*U[1]-j[1],d)return[j,G,W][z](g);for(var q=[],Y=0,Q=(g=[j,G,W][z](g).join()[I](",")).length;Y<Q;Y++)q[Y]=Y%2?m(g[Y-1],g[Y],f).y:m(g[Y],g[Y+1],f).x;return q},Mt=function(t,e,i,n,s,r,o,a,h){var l=1-h;return{x:U(l,3)*t+3*U(l,2)*h*i+3*l*h*h*s+U(h,3)*o,y:U(l,3)*e+3*U(l,2)*h*n+3*l*h*h*r+U(h,3)*a}},Lt=r((function(t,e,i,n,s,r,o,a){var h,l=s-2*i+t-(o-2*s+i),c=2*(i-t)-2*(s-i),d=t-i,u=(-c+N.sqrt(c*c-4*l*d))/2/l,p=(-c-N.sqrt(c*c-4*l*d))/2/l,f=[e,a],g=[t,o];return H(u)>"1e12"&&(u=.5),H(p)>"1e12"&&(p=.5),u>0&&u<1&&(h=Mt(t,e,i,n,s,r,o,a,u),g.push(h.x),f.push(h.y)),p>0&&p<1&&(h=Mt(t,e,i,n,s,r,o,a,p),g.push(h.x),f.push(h.y)),l=r-2*n+e-(a-2*r+n),d=e-n,u=(-(c=2*(n-e)-2*(r-n))+N.sqrt(c*c-4*l*d))/2/l,p=(-c-N.sqrt(c*c-4*l*d))/2/l,H(u)>"1e12"&&(u=.5),H(p)>"1e12"&&(p=.5),u>0&&u<1&&(h=Mt(t,e,i,n,s,r,o,a,u),g.push(h.x),f.push(h.y)),p>0&&p<1&&(h=Mt(t,e,i,n,s,r,o,a,p),g.push(h.x),f.push(h.y)),{min:{x:F[A](0,g),y:F[A](0,f)},max:{x:V[A](0,g),y:V[A](0,f)}}})),It=i._path2curve=r((function(t,e){var i=!e&&Ct(t);if(!e&&i.curve)return Tt(i.curve);for(var n=At(t),s=e&&At(e),r={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},o={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},a=function(t,e,i){var n,s;if(!t)return["C",e.x,e.y,e.x,e.y,e.x,e.y];switch(!(t[0]in{T:1,Q:1})&&(e.qx=e.qy=null),t[0]){case"M":e.X=t[1],e.Y=t[2];break;case"A":t=["C"][z](Et[A](0,[e.x,e.y][z](t.slice(1))));break;case"S":"C"==i||"S"==i?(n=2*e.x-e.bx,s=2*e.y-e.by):(n=e.x,s=e.y),t=["C",n,s][z](t.slice(1));break;case"T":"Q"==i||"T"==i?(e.qx=2*e.x-e.qx,e.qy=2*e.y-e.qy):(e.qx=e.x,e.qy=e.y),t=["C"][z](Dt(e.x,e.y,e.qx,e.qy,t[1],t[2]));break;case"Q":e.qx=t[1],e.qy=t[2],t=["C"][z](Dt(e.x,e.y,t[1],t[2],t[3],t[4]));break;case"L":t=["C"][z](zt(e.x,e.y,t[1],t[2]));break;case"H":t=["C"][z](zt(e.x,e.y,t[1],e.y));break;case"V":t=["C"][z](zt(e.x,e.y,e.x,t[1]));break;case"Z":t=["C"][z](zt(e.x,e.y,e.X,e.Y))}return t},h=function(t,e){if(t[e].length>7){t[e].shift();for(var i=t[e];i.length;)t.splice(e++,0,["C"][z](i.splice(0,6)));t.splice(e,1),d=V(n.length,s&&s.length||0)}},l=function(t,e,i,r,o){t&&e&&"M"==t[o][0]&&"M"!=e[o][0]&&(e.splice(o,0,["M",r.x,r.y]),i.bx=0,i.by=0,i.x=t[o][1],i.y=t[o][2],d=V(n.length,s&&s.length||0))},c=0,d=V(n.length,s&&s.length||0);c<d;c++){n[c]=a(n[c],r),h(n,c),s&&(s[c]=a(s[c],o)),s&&h(s,c),l(n,s,r,o,c),l(s,n,o,r,c);var u=n[c],p=s&&s[c],f=u.length,g=s&&p.length;r.x=u[f-2],r.y=u[f-1],r.bx=K(u[f-4])||r.x,r.by=K(u[f-3])||r.y,o.bx=s&&(K(p[g-4])||o.x),o.by=s&&(K(p[g-3])||o.y),o.x=s&&p[g-2],o.y=s&&p[g-1]}return s||(i.curve=Tt(n)),s?[n,s]:n}),null,Tt),Bt=(i._parseDots=r((function(t){for(var e=[],n=0,s=t.length;n<s;n++){var r={},o=t[n].match(/^([^:]*):?([\d\.]*)/);if(r.color=i.getRGB(o[1]),r.color.error)return null;r.color=r.color.hex,o[2]&&(r.offset=o[2]+"%"),e.push(r)}for(n=1,s=e.length-1;n<s;n++)if(!e[n].offset){for(var a=K(e[n-1].offset||0),h=0,l=n+1;l<s;l++)if(e[l].offset){h=e[l].offset;break}h||(h=100,l=s);for(var c=((h=K(h))-a)/(l-n+1);n<l;n++)a+=c,e[n].offset=a+"%"}return e})),i._tear=function(t,e){t==e.top&&(e.top=t.prev),t==e.bottom&&(e.bottom=t.next),t.next&&(t.next.prev=t.prev),t.prev&&(t.prev.next=t.next)}),Rt=(i._tofront=function(t,e){e.top!==t&&(Bt(t,e),t.next=null,t.prev=e.top,e.top.next=t,e.top=t)},i._toback=function(t,e){e.bottom!==t&&(Bt(t,e),t.next=e.bottom,t.prev=null,e.bottom.prev=t,e.bottom=t)},i._insertafter=function(t,e,i){Bt(t,i),e==i.top&&(i.top=t),e.next&&(e.next.prev=t),t.next=e.next,t.prev=e,e.next=t},i._insertbefore=function(t,e,i){Bt(t,i),e==i.bottom&&(i.bottom=t),e.prev&&(e.prev.next=t),t.prev=e.prev,e.prev=t,t.next=e},i.toMatrix=function(t,e){var i=St(t),n={_:{transform:E},getBBox:function(){return i}};return Ot(n,e),n.matrix}),Ot=(i.transformPath=function(t,e){return gt(t,Rt(t,e))},i._extractTransform=function(t,e){if(null==e)return t._.transform;e=L(e).replace(/\.{3}|\u2026/g,t._.transform||E);var n,s,r=i.parseTransformString(e),o=0,a=1,h=1,l=t._,c=new p;if(l.transform=r||[],r)for(var d=0,u=r.length;d<u;d++){var f,g,m,v,y,b=r[d],w=b.length,x=L(b[0]).toLowerCase(),_=b[0]!=x,k=_?c.invert():0;"t"==x&&3==w?_?(f=k.x(0,0),g=k.y(0,0),m=k.x(b[1],b[2]),v=k.y(b[1],b[2]),c.translate(m-f,v-g)):c.translate(b[1],b[2]):"r"==x?2==w?(y=y||t.getBBox(1),c.rotate(b[1],y.x+y.width/2,y.y+y.height/2),o+=b[1]):4==w&&(_?(m=k.x(b[2],b[3]),v=k.y(b[2],b[3]),c.rotate(b[1],m,v)):c.rotate(b[1],b[2],b[3]),o+=b[1]):"s"==x?2==w||3==w?(y=y||t.getBBox(1),c.scale(b[1],b[w-1],y.x+y.width/2,y.y+y.height/2),a*=b[1],h*=b[w-1]):5==w&&(_?(m=k.x(b[3],b[4]),v=k.y(b[3],b[4]),c.scale(b[1],b[2],m,v)):c.scale(b[1],b[2],b[3],b[4]),a*=b[1],h*=b[2]):"m"==x&&7==w&&c.add(b[1],b[2],b[3],b[4],b[5],b[6]),l.dirtyT=1,t.matrix=c}t.matrix=c,l.sx=a,l.sy=h,l.deg=o,l.dx=n=c.e,l.dy=s=c.f,1==a&&1==h&&!o&&l.bbox?(l.bbox.x+=+n,l.bbox.y+=+s):l.dirtyT=1}),Nt=function(t){var e=t[0];switch(e.toLowerCase()){case"t":return[e,0,0];case"m":return[e,1,0,0,1,0,0];case"r":return 4==t.length?[e,0,t[2],t[3]]:[e,0];case"s":return 5==t.length?[e,1,1,t[3],t[4]]:3==t.length?[e,1,1]:[e,1]}},Vt=i._equaliseTransform=function(t,e){e=L(e).replace(/\.{3}|\u2026/g,t),t=i.parseTransformString(t)||[],e=i.parseTransformString(e)||[];for(var n,s,r,o,a=V(t.length,e.length),h=[],l=[],c=0;c<a;c++){if(r=t[c]||Nt(e[c]),o=e[c]||Nt(r),r[0]!=o[0]||"r"==r[0].toLowerCase()&&(r[2]!=o[2]||r[3]!=o[3])||"s"==r[0].toLowerCase()&&(r[3]!=o[3]||r[4]!=o[4]))return;for(h[c]=[],l[c]=[],n=0,s=V(r.length,o.length);n<s;n++)n in r&&(h[c][n]=r[n]),n in o&&(l[c][n]=o[n])}return{from:h,to:l}};i._getContainer=function(t,e,n,s){var r;if(null!=(r=null!=s||i.is(t,"object")?t:S.doc.getElementById(t)))return r.tagName?null==e?{container:r,width:r.style.pixelWidth||r.offsetWidth,height:r.style.pixelHeight||r.offsetHeight}:{container:r,width:e,height:n}:{container:1,x:t,y:e,width:n,height:s}},i.pathToRelative=Pt,i._engine={},i.path2curve=It,i.matrix=function(t,e,i,n,s,r){return new p(t,e,i,n,s,r)},function(t){function e(t){return t[0]*t[0]+t[1]*t[1]}function n(t){var i=N.sqrt(e(t));t[0]&&(t[0]/=i),t[1]&&(t[1]/=i)}t.add=function(t,e,i,n,s,r){var o,a,h,l,c=[[],[],[]],d=[[this.a,this.c,this.e],[this.b,this.d,this.f],[0,0,1]],u=[[t,i,s],[e,n,r],[0,0,1]];for(t&&t instanceof p&&(u=[[t.a,t.c,t.e],[t.b,t.d,t.f],[0,0,1]]),o=0;o<3;o++)for(a=0;a<3;a++){for(l=0,h=0;h<3;h++)l+=d[o][h]*u[h][a];c[o][a]=l}this.a=c[0][0],this.b=c[1][0],this.c=c[0][1],this.d=c[1][1],this.e=c[0][2],this.f=c[1][2]},t.invert=function(){var t=this,e=t.a*t.d-t.b*t.c;return new p(t.d/e,-t.b/e,-t.c/e,t.a/e,(t.c*t.f-t.d*t.e)/e,(t.b*t.e-t.a*t.f)/e)},t.clone=function(){return new p(this.a,this.b,this.c,this.d,this.e,this.f)},t.translate=function(t,e){this.add(1,0,0,1,t,e)},t.scale=function(t,e,i,n){null==e&&(e=t),(i||n)&&this.add(1,0,0,1,i,n),this.add(t,0,0,e,0,0),(i||n)&&this.add(1,0,0,1,-i,-n)},t.rotate=function(t,e,n){t=i.rad(t),e=e||0,n=n||0;var s=+N.cos(t).toFixed(9),r=+N.sin(t).toFixed(9);this.add(s,r,-r,s,e,n),this.add(1,0,0,1,-e,-n)},t.x=function(t,e){return t*this.a+e*this.c+this.e},t.y=function(t,e){return t*this.b+e*this.d+this.f},t.get=function(t){return+this[L.fromCharCode(97+t)].toFixed(4)},t.toString=function(){return i.svg?"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")":[this.get(0),this.get(2),this.get(1),this.get(3),0,0].join()},t.toFilter=function(){return"progid:DXImageTransform.Microsoft.Matrix(M11="+this.get(0)+", M12="+this.get(2)+", M21="+this.get(1)+", M22="+this.get(3)+", Dx="+this.get(4)+", Dy="+this.get(5)+", sizingmethod='auto expand')"},t.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)]},t.split=function(){var t={};t.dx=this.e,t.dy=this.f;var s=[[this.a,this.c],[this.b,this.d]];t.scalex=N.sqrt(e(s[0])),n(s[0]),t.shear=s[0][0]*s[1][0]+s[0][1]*s[1][1],s[1]=[s[1][0]-s[0][0]*t.shear,s[1][1]-s[0][1]*t.shear],t.scaley=N.sqrt(e(s[1])),n(s[1]),t.shear/=t.scaley;var r=-s[0][1],o=s[1][1];return o<0?(t.rotate=i.deg(N.acos(o)),r<0&&(t.rotate=360-t.rotate)):t.rotate=i.deg(N.asin(r)),t.isSimple=!(+t.shear.toFixed(9)||t.scalex.toFixed(9)!=t.scaley.toFixed(9)&&t.rotate),t.isSuperSimple=!+t.shear.toFixed(9)&&t.scalex.toFixed(9)==t.scaley.toFixed(9)&&!t.rotate,t.noRotation=!+t.shear.toFixed(9)&&!t.rotate,t},t.toTransformString=function(t){var e=t||this[I]();return e.isSimple?(e.scalex=+e.scalex.toFixed(4),e.scaley=+e.scaley.toFixed(4),e.rotate=+e.rotate.toFixed(4),(e.dx||e.dy?"t"+[e.dx,e.dy]:E)+(1!=e.scalex||1!=e.scaley?"s"+[e.scalex,e.scaley,0,0]:E)+(e.rotate?"r"+[e.rotate,0,0]:E)):"m"+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)]}}(p.prototype);var Ft=navigator.userAgent.match(/Version\/(.*?)\s/)||navigator.userAgent.match(/Chrome\/(\d+)/);"Apple Computer, Inc."==navigator.vendor&&(Ft&&Ft[1]<4||"iP"==navigator.platform.slice(0,2))||"Google Inc."==navigator.vendor&&Ft&&Ft[1]<8?w.safari=function(){var t=this.rect(-99,-99,this.width+99,this.height+99).attr({stroke:"none"});setTimeout((function(){t.remove()}))}:w.safari=function(){};for(var Ht=function(){this.returnValue=!1},Ut=function(){return this.originalEvent.preventDefault()},$t=function(){this.cancelBubble=!0},jt=function(){return this.originalEvent.stopPropagation()},Gt=function(t){var e=S.doc.documentElement.scrollTop||S.doc.body.scrollTop,i=S.doc.documentElement.scrollLeft||S.doc.body.scrollLeft;return{x:t.clientX+i,y:t.clientY+e}},Wt=S.doc.addEventListener?function(t,e,i,n){var s=function(t){var e=Gt(t);return i.call(n,t,e.x,e.y)};return t.addEventListener(e,s,!1),D&&R[e]&&t.addEventListener(R[e],(function(e){for(var s=Gt(e),r=e,o=0,a=e.targetTouches&&e.targetTouches.length;o<a;o++)if(e.targetTouches[o].target==t){(e=e.targetTouches[o]).originalEvent=r,e.preventDefault=Ut,e.stopPropagation=jt;break}return i.call(n,e,s.x,s.y)}),!1),function(){return t.removeEventListener(e,s,!1),D&&R[e]&&t.removeEventListener(R[e],s,!1),!0}}:S.doc.attachEvent?function(t,e,i,n){var s=function(t){t=t||S.win.event;var e=S.doc.documentElement.scrollTop||S.doc.body.scrollTop,s=S.doc.documentElement.scrollLeft||S.doc.body.scrollLeft,r=t.clientX+s,o=t.clientY+e;return t.preventDefault=t.preventDefault||Ht,t.stopPropagation=t.stopPropagation||$t,i.call(n,t,r,o)};return t.attachEvent("on"+e,s),function(){return t.detachEvent("on"+e,s),!0}}:void 0,qt=[],Yt=function(t){for(var i,n=t.clientX,s=t.clientY,r=S.doc.documentElement.scrollTop||S.doc.body.scrollTop,o=S.doc.documentElement.scrollLeft||S.doc.body.scrollLeft,a=qt.length;a--;){if(i=qt[a],D&&t.touches){for(var h,l=t.touches.length;l--;)if((h=t.touches[l]).identifier==i.el._drag.id){n=h.clientX,s=h.clientY,(t.originalEvent?t.originalEvent:t).preventDefault();break}}else t.preventDefault();var c,d=i.el.node,u=d.nextSibling,p=d.parentNode,f=d.style.display;S.win.opera&&p.removeChild(d),d.style.display="none",c=i.el.paper.getElementByPoint(n,s),d.style.display=f,S.win.opera&&(u?p.insertBefore(d,u):p.appendChild(d)),c&&e("raphael.drag.over."+i.el.id,i.el,c),n+=o,s+=r,e("raphael.drag.move."+i.el.id,i.move_scope||i.el,n-i.el._drag.x,s-i.el._drag.y,n,s,t)}},Qt=function t(n){i.unmousemove(Yt).unmouseup(t);for(var s,r=qt.length;r--;)(s=qt[r]).el._drag={},e("raphael.drag.end."+s.el.id,s.end_scope||s.start_scope||s.move_scope||s.el,n);qt=[]},Xt=i.el={},Zt=B.length;Zt--;)!function(t){i[t]=Xt[t]=function(e,n){return i.is(e,"function")&&(this.events=this.events||[],this.events.push({name:t,f:e,unbind:Wt(this.shape||this.node||S.doc,t,e,n||this)})),this},i["un"+t]=Xt["un"+t]=function(e){for(var n=this.events||[],s=n.length;s--;)n[s].name!=t||!i.is(e,"undefined")&&n[s].f!=e||(n[s].unbind(),n.splice(s,1),!n.length&&delete this.events);return this}}(B[Zt]);Xt.data=function(t,n){var s=lt[this.id]=lt[this.id]||{};if(0==arguments.length)return s;if(1==arguments.length){if(i.is(t,"object")){for(var r in t)t[C](r)&&this.data(r,t[r]);return this}return e("raphael.data.get."+this.id,this,s[t],t),s[t]}return s[t]=n,e("raphael.data.set."+this.id,this,n,t),this},Xt.removeData=function(t){return null==t?lt[this.id]={}:lt[this.id]&&delete lt[this.id][t],this},Xt.getData=function(){return n(lt[this.id]||{})},Xt.hover=function(t,e,i,n){return this.mouseover(t,i).mouseout(e,n||i)},Xt.unhover=function(t,e){return this.unmouseover(t).unmouseout(e)};var Kt=[];Xt.drag=function(t,n,s,r,o,a){function h(h){(h.originalEvent||h).preventDefault();var l=h.clientX,c=h.clientY,d=S.doc.documentElement.scrollTop||S.doc.body.scrollTop,u=S.doc.documentElement.scrollLeft||S.doc.body.scrollLeft;if(this._drag.id=h.identifier,D&&h.touches)for(var p,f=h.touches.length;f--;)if(p=h.touches[f],this._drag.id=p.identifier,p.identifier==this._drag.id){l=p.clientX,c=p.clientY;break}this._drag.x=l+u,this._drag.y=c+d,!qt.length&&i.mousemove(Yt).mouseup(Qt),qt.push({el:this,move_scope:r,start_scope:o,end_scope:a}),n&&e.on("raphael.drag.start."+this.id,n),t&&e.on("raphael.drag.move."+this.id,t),s&&e.on("raphael.drag.end."+this.id,s),e("raphael.drag.start."+this.id,o||r||this,h.clientX+u,h.clientY+d,h)}return this._drag={},Kt.push({el:this,start:h}),this.mousedown(h),this},Xt.onDragOver=function(t){t?e.on("raphael.drag.over."+this.id,t):e.unbind("raphael.drag.over."+this.id)},Xt.undrag=function(){for(var t=Kt.length;t--;)Kt[t].el==this&&(this.unmousedown(Kt[t].start),Kt.splice(t,1),e.unbind("raphael.drag.*."+this.id));!Kt.length&&i.unmousemove(Yt).unmouseup(Qt),qt=[]},w.circle=function(t,e,n){var s=i._engine.circle(this,t||0,e||0,n||0);return this.__set__&&this.__set__.push(s),s},w.rect=function(t,e,n,s,r){var o=i._engine.rect(this,t||0,e||0,n||0,s||0,r||0);return this.__set__&&this.__set__.push(o),o},w.ellipse=function(t,e,n,s){var r=i._engine.ellipse(this,t||0,e||0,n||0,s||0);return this.__set__&&this.__set__.push(r),r},w.path=function(t){t&&!i.is(t,G)&&!i.is(t[0],W)&&(t+=E);var e=i._engine.path(i.format[A](i,arguments),this);return this.__set__&&this.__set__.push(e),e},w.image=function(t,e,n,s,r){var o=i._engine.image(this,t||"about:blank",e||0,n||0,s||0,r||0);return this.__set__&&this.__set__.push(o),o},w.text=function(t,e,n){var s=i._engine.text(this,t||0,e||0,L(n));return this.__set__&&this.__set__.push(s),s},w.set=function(t){!i.is(t,"array")&&(t=Array.prototype.splice.call(arguments,0,arguments.length));var e=new le(t);return this.__set__&&this.__set__.push(e),e.paper=this,e.type="set",e},w.setStart=function(t){this.__set__=t||this.set()},w.setFinish=function(t){var e=this.__set__;return delete this.__set__,e},w.setSize=function(t,e){return i._engine.setSize.call(this,t,e)},w.setViewBox=function(t,e,n,s,r){return i._engine.setViewBox.call(this,t,e,n,s,r)},w.top=w.bottom=null,w.raphael=i;w.getElementByPoint=function(t,e){var i=this,n=i.canvas,s=S.doc.elementFromPoint(t,e);if(S.win.opera&&"svg"==s.tagName){var r=function(t){var e=t.getBoundingClientRect(),i=t.ownerDocument,n=i.body,s=i.documentElement,r=s.clientTop||n.clientTop||0,o=s.clientLeft||n.clientLeft||0;return{y:e.top+(S.win.pageYOffset||s.scrollTop||n.scrollTop)-r,x:e.left+(S.win.pageXOffset||s.scrollLeft||n.scrollLeft)-o}}(n),o=n.createSVGRect();o.x=t-r.x,o.y=e-r.y,o.width=o.height=1;var a=n.getIntersectionList(o,null);a.length&&(s=a[a.length-1])}if(!s)return null;for(;s.parentNode&&s!=n.parentNode&&!s.raphael;)s=s.parentNode;return s==i.canvas.parentNode&&(s=n),s=s&&s.raphael?i.getById(s.raphaelid):null},w.getElementsByBBox=function(t){var e=this.set();return this.forEach((function(n){i.isBBoxIntersect(n.getBBox(),t)&&e.push(n)})),e},w.getById=function(t){for(var e=this.bottom;e;){if(e.id==t)return e;e=e.next}return null},w.forEach=function(t,e){for(var i=this.bottom;i;){if(!1===t.call(e,i))return this;i=i.next}return this},w.getElementsByPoint=function(t,e){var i=this.set();return this.forEach((function(n){n.isPointInside(t,e)&&i.push(n)})),i},Xt.isPointInside=function(t,e){var n=this.realPath=ft[this.type](this);return this.attr("transform")&&this.attr("transform").length&&(n=i.transformPath(n,this.attr("transform"))),i.isPointInsidePath(n,t,e)},Xt.getBBox=function(t){if(this.removed)return{};var e=this._;return t?(!e.dirty&&e.bboxwt||(this.realPath=ft[this.type](this),e.bboxwt=St(this.realPath),e.bboxwt.toString=f,e.dirty=0),e.bboxwt):((e.dirty||e.dirtyT||!e.bbox)&&(!e.dirty&&this.realPath||(e.bboxwt=0,this.realPath=ft[this.type](this)),e.bbox=St(gt(this.realPath,this.matrix)),e.bbox.toString=f,e.dirty=e.dirtyT=0),e.bbox)},Xt.clone=function(){if(this.removed)return null;var t=this.paper[this.type]().attr(this.attr());return this.__set__&&this.__set__.push(t),t},Xt.glow=function(t){if("text"==this.type)return null;var e={width:((t=t||{}).width||10)+(+this.attr("stroke-width")||1),fill:t.fill||!1,opacity:t.opacity||.5,offsetx:t.offsetx||0,offsety:t.offsety||0,color:t.color||"#000"},i=e.width/2,n=this.paper,s=n.set(),r=this.realPath||ft[this.type](this);r=this.matrix?gt(r,this.matrix):r;for(var o=1;o<i+1;o++)s.push(n.path(r).attr({stroke:e.color,fill:e.fill?e.color:"none","stroke-linejoin":"round","stroke-linecap":"round","stroke-width":+(e.width/i*o).toFixed(3),opacity:+(e.opacity/i).toFixed(3)}));return s.insertBefore(this).translate(e.offsetx,e.offsety)};var Jt=function(t,e,n,s,r,o,a,h,c){return null==c?l(t,e,n,s,r,o,a,h):i.findDotsAtSegment(t,e,n,s,r,o,a,h,function(t,e,i,n,s,r,o,a,h){if(!(h<0||l(t,e,i,n,s,r,o,a)<h)){var c,d=.5,u=1-d;for(c=l(t,e,i,n,s,r,o,a,u);H(c-h)>.01;)c=l(t,e,i,n,s,r,o,a,u+=(c<h?1:-1)*(d/=2));return u}}(t,e,n,s,r,o,a,h,c))},te=function(t,e){return function(n,s,r){for(var o,a,h,l,c,d="",u={},p=0,f=0,g=(n=It(n)).length;f<g;f++){if("M"==(h=n[f])[0])o=+h[1],a=+h[2];else{if(p+(l=Jt(o,a,h[1],h[2],h[3],h[4],h[5],h[6]))>s){if(e&&!u.start){if(d+=["C"+(c=Jt(o,a,h[1],h[2],h[3],h[4],h[5],h[6],s-p)).start.x,c.start.y,c.m.x,c.m.y,c.x,c.y],r)return d;u.start=d,d=["M"+c.x,c.y+"C"+c.n.x,c.n.y,c.end.x,c.end.y,h[5],h[6]].join(),p+=l,o=+h[5],a=+h[6];continue}if(!t&&!e)return{x:(c=Jt(o,a,h[1],h[2],h[3],h[4],h[5],h[6],s-p)).x,y:c.y,alpha:c.alpha}}p+=l,o=+h[5],a=+h[6]}d+=h.shift()+h}return u.end=d,(c=t?p:e?u:i.findDotsAtSegment(o,a,h[0],h[1],h[2],h[3],h[4],h[5],1)).alpha&&(c={x:c.x,y:c.y,alpha:c.alpha}),c}},ee=te(1),ie=te(),ne=te(0,1);i.getTotalLength=ee,i.getPointAtLength=ie,i.getSubpath=function(t,e,i){if(this.getTotalLength(t)-i<1e-6)return ne(t,e).end;var n=ne(t,i,1);return e?ne(n,e).end:n},Xt.getTotalLength=function(){var t=this.getPath();if(t)return this.node.getTotalLength?this.node.getTotalLength():ee(t)},Xt.getPointAtLength=function(t){var e=this.getPath();if(e)return ie(e,t)},Xt.getPath=function(){var t,e=i._getPath[this.type];if("text"!=this.type&&"set"!=this.type)return e&&(t=e(this)),t},Xt.getSubpath=function(t,e){var n=this.getPath();if(n)return i.getSubpath(n,t,e)};var se=i.easing_formulas={linear:function(t){return t},"<":function(t){return U(t,1.7)},">":function(t){return U(t,.48)},"<>":function(t){var e=.48-t/1.04,i=N.sqrt(.1734+e*e),n=i-e,s=-i-e,r=U(H(n),1/3)*(n<0?-1:1)+U(H(s),1/3)*(s<0?-1:1)+.5;return 3*(1-r)*r*r+r*r*r},backIn:function(t){var e=1.70158;return t*t*((e+1)*t-e)},backOut:function(t){var e=1.70158;return(t-=1)*t*((e+1)*t+e)+1},elastic:function(t){return t==!!t?t:U(2,-10*t)*N.sin(2*(t-.075)*$/.3)+1},bounce:function(t){var e=7.5625,i=2.75;return t<1/i?e*t*t:t<2/i?e*(t-=1.5/i)*t+.75:t<2.5/i?e*(t-=2.25/i)*t+.9375:e*(t-=2.625/i)*t+.984375}};se.easeIn=se["ease-in"]=se["<"],se.easeOut=se["ease-out"]=se[">"],se.easeInOut=se["ease-in-out"]=se["<>"],se["back-in"]=se.backIn,se["back-out"]=se.backOut;var re=[],oe=t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.oRequestAnimationFrame||t.msRequestAnimationFrame||function(t){setTimeout(t,16)},ae=function t(){for(var n=+new Date,s=0;s<re.length;s++){var r=re[s];if(!r.el.removed&&!r.paused){var o,a,h=n-r.start,l=r.ms,c=r.easing,d=r.from,u=r.diff,p=r.to,f=(r.t,r.el),g={},m={};if(r.initstatus?(h=(r.initstatus*r.anim.top-r.prev)/(r.percent-r.prev)*l,r.status=r.initstatus,delete r.initstatus,r.stop&&re.splice(s--,1)):r.status=(r.prev+(r.percent-r.prev)*(h/l))/r.anim.top,!(h<0))if(h<l){var y=c(h/l);for(var b in d)if(d[C](b)){switch(it[b]){case j:o=+d[b]+y*l*u[b];break;case"colour":o="rgb("+[he(Z(d[b].r+y*l*u[b].r)),he(Z(d[b].g+y*l*u[b].g)),he(Z(d[b].b+y*l*u[b].b))].join(",")+")";break;case"path":o=[];for(var w=0,x=d[b].length;w<x;w++){o[w]=[d[b][w][0]];for(var _=1,k=d[b][w].length;_<k;_++)o[w][_]=+d[b][w][_]+y*l*u[b][w][_];o[w]=o[w].join(M)}o=o.join(M);break;case"transform":if(u[b].real)for(o=[],w=0,x=d[b].length;w<x;w++)for(o[w]=[d[b][w][0]],_=1,k=d[b][w].length;_<k;_++)o[w][_]=d[b][w][_]+y*l*u[b][w][_];else{var S=function(t){return+d[b][t]+y*l*u[b][t]};o=[["m",S(0),S(1),S(2),S(3),S(4),S(5)]]}break;case"csv":if("clip-rect"==b)for(o=[],w=4;w--;)o[w]=+d[b][w]+y*l*u[b][w];break;default:var T=[][z](d[b]);for(o=[],w=f.paper.customAttributes[b].length;w--;)o[w]=+T[w]+y*l*u[b][w]}g[b]=o}f.attr(g),function(t,i,n){setTimeout((function(){e("raphael.anim.frame."+t,i,n)}))}(f.id,f,r.anim)}else{if(function(t,n,s){setTimeout((function(){e("raphael.anim.frame."+n.id,n,s),e("raphael.anim.finish."+n.id,n,s),i.is(t,"function")&&t.call(n)}))}(r.callback,f,r.anim),f.attr(p),re.splice(s--,1),r.repeat>1&&!r.next){for(a in p)p[C](a)&&(m[a]=r.totalOrigin[a]);r.el.attr(m),v(r.anim,r.el,r.anim.percents[0],null,r.totalOrigin,r.repeat-1)}r.next&&!r.stop&&v(r.anim,r.el,r.next,null,r.totalOrigin,r.repeat)}}}i.svg&&f&&f.paper&&f.paper.safari(),re.length&&oe(t)},he=function(t){return t>255?255:t<0?0:t};Xt.animateWith=function(t,e,n,s,r,o){var a=this;if(a.removed)return o&&o.call(a),a;var h=n instanceof m?n:i.animation(n,s,r,o);v(h,a,h.percents[0],null,a.attr());for(var l=0,c=re.length;l<c;l++)if(re[l].anim==e&&re[l].el==t){re[c-1].start=re[l].start;break}return a},Xt.onAnimation=function(t){return t?e.on("raphael.anim.frame."+this.id,t):e.unbind("raphael.anim.frame."+this.id),this},m.prototype.delay=function(t){var e=new m(this.anim,this.ms);return e.times=this.times,e.del=+t||0,e},m.prototype.repeat=function(t){var e=new m(this.anim,this.ms);return e.del=this.del,e.times=N.floor(V(t,0))||1,e},i.animation=function(t,e,n,s){if(t instanceof m)return t;!i.is(n,"function")&&n||(s=s||n||null,n=null),t=Object(t),e=+e||0;var r,o,a={};for(o in t)t[C](o)&&K(o)!=o&&K(o)+"%"!=o&&(r=!0,a[o]=t[o]);return r?(n&&(a.easing=n),s&&(a.callback=s),new m({100:a},e)):new m(t,e)},Xt.animate=function(t,e,n,s){var r=this;if(r.removed)return s&&s.call(r),r;var o=t instanceof m?t:i.animation(t,e,n,s);return v(o,r,o.percents[0],null,r.attr()),r},Xt.setTime=function(t,e){return t&&null!=e&&this.status(t,F(e,t.ms)/t.ms),this},Xt.status=function(t,e){var i,n,s=[],r=0;if(null!=e)return v(t,this,-1,F(e,1)),this;for(i=re.length;r<i;r++)if((n=re[r]).el.id==this.id&&(!t||n.anim==t)){if(t)return n.status;s.push({anim:n.anim,status:n.status})}return t?0:s},Xt.pause=function(t){for(var i=0;i<re.length;i++)re[i].el.id!=this.id||t&&re[i].anim!=t||!1!==e("raphael.anim.pause."+this.id,this,re[i].anim)&&(re[i].paused=!0);return this},Xt.resume=function(t){for(var i=0;i<re.length;i++)if(re[i].el.id==this.id&&(!t||re[i].anim==t)){var n=re[i];!1!==e("raphael.anim.resume."+this.id,this,n.anim)&&(delete n.paused,this.status(n.anim,n.status))}return this},Xt.stop=function(t){for(var i=0;i<re.length;i++)re[i].el.id!=this.id||t&&re[i].anim!=t||!1!==e("raphael.anim.stop."+this.id,this,re[i].anim)&&re.splice(i--,1);return this},e.on("raphael.remove",y),e.on("raphael.clear",y),Xt.toString=function(){return"Raphals object"};var le=function t(e){if(this.items=[],this.length=0,this.type="set",e)for(var i=0,n=e.length;i<n;i++)!e[i]||e[i].constructor!=Xt.constructor&&e[i].constructor!=t||(this[this.items.length]=this.items[this.items.length]=e[i],this.length++)},ce=le.prototype;for(var de in ce.push=function(){for(var t,e,i=0,n=arguments.length;i<n;i++)!(t=arguments[i])||t.constructor!=Xt.constructor&&t.constructor!=le||(this[e=this.items.length]=this.items[e]=t,this.length++);return this},ce.pop=function(){return this.length&&delete this[this.length--],this.items.pop()},ce.forEach=function(t,e){for(var i=0,n=this.items.length;i<n;i++)if(!1===t.call(e,this.items[i],i))return this;return this},Xt)Xt[C](de)&&(ce[de]=function(t){return function(){var e=arguments;return this.forEach((function(i){i[t][A](i,e)}))}}(de));ce.attr=function(t,e){if(t&&i.is(t,W)&&i.is(t[0],"object"))for(var n=0,s=t.length;n<s;n++)this.items[n].attr(t[n]);else for(var r=0,o=this.items.length;r<o;r++)this.items[r].attr(t,e);return this},ce.clear=function(){for(;this.length;)this.pop()},ce.splice=function(t,e,i){t=t<0?V(this.length+t,0):t,e=V(0,F(this.length-t,e));var n,s=[],r=[],o=[];for(n=2;n<arguments.length;n++)o.push(arguments[n]);for(n=0;n<e;n++)r.push(this[t+n]);for(;n<this.length-t;n++)s.push(this[t+n]);var a=o.length;for(n=0;n<a+s.length;n++)this.items[t+n]=this[t+n]=n<a?o[n]:s[n-a];for(n=this.items.length=this.length-=e-a;this[n];)delete this[n++];return new le(r)},ce.exclude=function(t){for(var e=0,i=this.length;e<i;e++)if(this[e]==t)return this.splice(e,1),!0},ce.animate=function(t,e,n,s){(i.is(n,"function")||!n)&&(s=n||null);var r,o,a=this.items.length,h=a,l=this;if(!a)return this;s&&(o=function(){!--a&&s.call(l)}),n=i.is(n,G)?n:o;var c=i.animation(t,e,n,o);for(r=this.items[--h].animate(c);h--;)this.items[h]&&!this.items[h].removed&&this.items[h].animateWith(r,c,c),this.items[h]&&!this.items[h].removed||a--;return this},ce.insertAfter=function(t){for(var e=this.items.length;e--;)this.items[e].insertAfter(t);return this},ce.getBBox=function(){for(var t=[],e=[],i=[],n=[],s=this.items.length;s--;)if(!this.items[s].removed){var r=this.items[s].getBBox();t.push(r.x),e.push(r.y),i.push(r.x+r.width),n.push(r.y+r.height)}return{x:t=F[A](0,t),y:e=F[A](0,e),x2:i=V[A](0,i),y2:n=V[A](0,n),width:i-t,height:n-e}},ce.clone=function(t){t=this.paper.set();for(var e=0,i=this.items.length;e<i;e++)t.push(this.items[e].clone());return t},ce.toString=function(){return"Raphals set"},ce.glow=function(t){var e=this.paper.set();return this.forEach((function(i,n){var s=i.glow(t);null!=s&&s.forEach((function(t,i){e.push(t)}))})),e},ce.isPointInside=function(t,e){var i=!1;return this.forEach((function(n){if(n.isPointInside(t,e))return i=!0,!1})),i},i.registerFont=function(t){if(!t.face)return t;this.fonts=this.fonts||{};var e={w:t.w,face:{},glyphs:{}},i=t.face["font-family"];for(var n in t.face)t.face[C](n)&&(e.face[n]=t.face[n]);if(this.fonts[i]?this.fonts[i].push(e):this.fonts[i]=[e],!t.svg)for(var s in e.face["units-per-em"]=J(t.face["units-per-em"],10),t.glyphs)if(t.glyphs[C](s)){var r=t.glyphs[s];if(e.glyphs[s]={w:r.w,k:{},d:r.d&&"M"+r.d.replace(/[mlcxtrv]/g,(function(t){return{l:"L",c:"C",x:"z",t:"m",r:"l",v:"c"}[t]||"M"}))+"z"},r.k)for(var o in r.k)r[C](o)&&(e.glyphs[s].k[o]=r.k[o])}return t},w.getFont=function(t,e,n,s){if(s=s||"normal",n=n||"normal",e=+e||{normal:400,bold:700,lighter:300,bolder:800}[e]||400,i.fonts){var r,o=i.fonts[t];if(!o){var a=new RegExp("(^|\\s)"+t.replace(/[^\w\d\s+!~.:_-]/g,E)+"(\\s|$)","i");for(var h in i.fonts)if(i.fonts[C](h)&&a.test(h)){o=i.fonts[h];break}}if(o)for(var l=0,c=o.length;l<c&&((r=o[l]).face["font-weight"]!=e||r.face["font-style"]!=n&&r.face["font-style"]||r.face["font-stretch"]!=s);l++);return r}},w.print=function(t,e,n,s,r,o,a,h){o=o||"middle",a=V(F(a||0,1),-1),h=V(F(h||1,3),1);var l,c=L(n)[I](E),d=0,u=0,p=E;if(i.is(s,"string")&&(s=this.getFont(s)),s){l=(r||16)/s.face["units-per-em"];for(var f=s.face.bbox[I](x),g=+f[0],m=f[3]-f[1],v=0,y=+f[1]+("baseline"==o?m+ +s.face.descent:m/2),b=0,w=c.length;b<w;b++){if("\n"==c[b])d=0,k=0,u=0,v+=m*h;else{var _=u&&s.glyphs[c[b-1]]||{},k=s.glyphs[c[b]];d+=u?(_.w||s.w)+(_.k&&_.k[c[b]]||0)+s.w*a:0,u=1}k&&k.d&&(p+=i.transformPath(k.d,["t",d*l,v*l,"s",l,l,g,y,"t",(t-g)/l,(e-y)/l]))}}return this.path(p).attr({fill:"#000",stroke:"none"})},w.add=function(t){if(i.is(t,"array"))for(var e,n=this.set(),s=0,r=t.length;s<r;s++)e=t[s]||{},_[C](e.type)&&n.push(this[e.type]().attr(e));return n},i.format=function(t,e){var n=i.is(e,W)?[0][z](e):arguments;return t&&i.is(t,G)&&n.length-1&&(t=t.replace(k,(function(t,e){return null==n[++e]?E:n[e]}))),t||E},i.fullfill=function(){var t=/\{([^\}]+)\}/g,e=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,i=function(t,i,n){var s=n;return i.replace(e,(function(t,e,i,n,r){e=e||n,s&&(e in s&&(s=s[e]),"function"==typeof s&&r&&(s=s()))})),s=(null==s||s==n?t:s)+""};return function(e,n){return String(e).replace(t,(function(t,e){return i(t,e,n)}))}}(),i.ninja=function(){return T.was?S.win.Raphael=T.is:Raphael=void 0,i},i.st=ce,function(t,e,n){null==t.readyState&&t.addEventListener&&(t.addEventListener(e,n=function(){t.removeEventListener(e,n,!1),t.readyState="complete"},!1),t.readyState="loading"),function e(){/in/.test(t.readyState)?setTimeout(e,9):i.eve("raphael.DOMload")}()}(document,"DOMContentLoaded"),e.on("raphael.DOMload",(function(){b=!0})),function(){if(i.svg){var t="hasOwnProperty",e=String,n=parseFloat,s=parseInt,r=Math,o=r.max,a=r.abs,h=r.pow,l=/[, ]+/,c=i.eve,d="",u=" ",p="http://www.w3.org/1999/xlink",f={block:"M5,0 0,2.5 5,5z",classic:"M5,0 0,2.5 5,5 3.5,3 3.5,2z",diamond:"M2.5,0 5,2.5 2.5,5 0,2.5z",open:"M6,1 1,3.5 6,6",oval:"M2.5,0A2.5,2.5,0,0,1,2.5,5 2.5,2.5,0,0,1,2.5,0z"},g={};i.toString=function(){return"Your browser supports SVG.\nYou are running Raphal "+this.version};var m=function n(s,r){if(r)for(var o in"string"==typeof s&&(s=n(s)),r)r[t](o)&&("xlink:"==o.substring(0,6)?s.setAttributeNS(p,o.substring(6),e(r[o])):s.setAttribute(o,e(r[o])));else(s=i._g.doc.createElementNS("http://www.w3.org/2000/svg",s)).style&&(s.style.webkitTapHighlightColor="rgba(0,0,0,0)");return s},v=function(t,s){var l="linear",c=t.id+s,u=.5,p=.5,f=t.node,g=t.paper,v=f.style,y=i._g.doc.getElementById(c);if(!y){if(s=(s=e(s).replace(i._radial_gradient,(function(t,e,i){if(l="radial",e&&i){u=n(e);var s=2*((p=n(i))>.5)-1;h(u-.5,2)+h(p-.5,2)>.25&&(p=r.sqrt(.25-h(u-.5,2))*s+.5)&&.5!=p&&(p=p.toFixed(5)-1e-5*s)}return d}))).split(/\s*\-\s*/),"linear"==l){var b=s.shift();if(b=-n(b),isNaN(b))return null;var w=[0,0,r.cos(i.rad(b)),r.sin(i.rad(b))],x=1/(o(a(w[2]),a(w[3]))||1);w[2]*=x,w[3]*=x,w[2]<0&&(w[0]=-w[2],w[2]=0),w[3]<0&&(w[1]=-w[3],w[3]=0)}var _=i._parseDots(s);if(!_)return null;if(c=c.replace(/[\(\)\s,\xb0#]/g,"_"),t.gradient&&c!=t.gradient.id&&(g.defs.removeChild(t.gradient),delete t.gradient),!t.gradient){y=m(l+"Gradient",{id:c}),t.gradient=y,m(y,"radial"==l?{fx:u,fy:p}:{x1:w[0],y1:w[1],x2:w[2],y2:w[3],gradientTransform:t.matrix.invert()}),g.defs.appendChild(y);for(var k=0,C=_.length;k<C;k++)y.appendChild(m("stop",{offset:_[k].offset?_[k].offset:k?"100%":"0%","stop-color":_[k].color||"#fff"}))}}return m(f,{fill:"url(#"+c+")",opacity:1,"fill-opacity":1}),v.fill=d,v.opacity=1,v.fillOpacity=1,1},y=function(t){var e=t.getBBox(1);m(t.pattern,{patternTransform:t.matrix.invert()+" translate("+e.x+","+e.y+")"})},b=function(n,s,r){if("path"==n.type){for(var o,a,h,l,c,u=e(s).toLowerCase().split("-"),p=n.paper,v=r?"end":"start",y=n.node,b=n.attrs,w=b["stroke-width"],x=u.length,_="classic",k=3,C=3,S=5;x--;)switch(u[x]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":_=u[x];break;case"wide":C=5;break;case"narrow":C=2;break;case"long":k=5;break;case"short":k=2}if("open"==_?(k+=2,C+=2,S+=2,h=1,l=r?4:1,c={fill:"none",stroke:b.stroke}):(l=h=k/2,c={fill:b.stroke,stroke:"none"}),n._.arrows?r?(n._.arrows.endPath&&g[n._.arrows.endPath]--,n._.arrows.endMarker&&g[n._.arrows.endMarker]--):(n._.arrows.startPath&&g[n._.arrows.startPath]--,n._.arrows.startMarker&&g[n._.arrows.startMarker]--):n._.arrows={},"none"!=_){var T="raphael-marker-"+_,P="raphael-marker-"+v+_+k+C;i._g.doc.getElementById(T)?g[T]++:(p.defs.appendChild(m(m("path"),{"stroke-linecap":"round",d:f[_],id:T})),g[T]=1);var A,z=i._g.doc.getElementById(P);z?(g[P]++,A=z.getElementsByTagName("use")[0]):(z=m(m("marker"),{id:P,markerHeight:C,markerWidth:k,orient:"auto",refX:l,refY:C/2}),A=m(m("use"),{"xlink:href":"#"+T,transform:(r?"rotate(180 "+k/2+" "+C/2+") ":d)+"scale("+k/S+","+C/S+")","stroke-width":(1/((k/S+C/S)/2)).toFixed(4)}),z.appendChild(A),p.defs.appendChild(z),g[P]=1),m(A,c);var D=h*("diamond"!=_&&"oval"!=_);r?(o=n._.arrows.startdx*w||0,a=i.getTotalLength(b.path)-D*w):(o=D*w,a=i.getTotalLength(b.path)-(n._.arrows.enddx*w||0)),(c={})["marker-"+v]="url(#"+P+")",(a||o)&&(c.d=i.getSubpath(b.path,o,a)),m(y,c),n._.arrows[v+"Path"]=T,n._.arrows[v+"Marker"]=P,n._.arrows[v+"dx"]=D,n._.arrows[v+"Type"]=_,n._.arrows[v+"String"]=s}else r?(o=n._.arrows.startdx*w||0,a=i.getTotalLength(b.path)-o):(o=0,a=i.getTotalLength(b.path)-(n._.arrows.enddx*w||0)),n._.arrows[v+"Path"]&&m(y,{d:i.getSubpath(b.path,o,a)}),delete n._.arrows[v+"Path"],delete n._.arrows[v+"Marker"],delete n._.arrows[v+"dx"],delete n._.arrows[v+"Type"],delete n._.arrows[v+"String"];for(c in g)if(g[t](c)&&!g[c]){var E=i._g.doc.getElementById(c);E&&E.parentNode.removeChild(E)}}},w={"":[0],none:[0],"-":[3,1],".":[1,1],"-.":[3,1,1,1],"-..":[3,1,1,1,1,1],". ":[1,3],"- ":[4,3],"--":[8,3],"- .":[4,3,1,3],"--.":[8,3,1,3],"--..":[8,3,1,3,1,3]},x=function(t,i,n){if(i=w[e(i).toLowerCase()]){for(var s=t.attrs["stroke-width"]||"1",r={round:s,square:s,butt:0}[t.attrs["stroke-linecap"]||n["stroke-linecap"]]||0,o=[],a=i.length;a--;)o[a]=i[a]*s+(a%2?1:-1)*r;m(t.node,{"stroke-dasharray":o.join(",")})}},_=function(n,r){var h=n.node,c=n.attrs,u=h.style.visibility;for(var f in h.style.visibility="hidden",r)if(r[t](f)){if(!i._availableAttrs[t](f))continue;var g=r[f];switch(c[f]=g,f){case"blur":n.blur(g);break;case"title":var w=h.getElementsByTagName("title");if(w.length&&(w=w[0]))w.firstChild.nodeValue=g;else{w=m("title");var _=i._g.doc.createTextNode(g);w.appendChild(_),h.appendChild(w)}break;case"href":case"target":var C=h.parentNode;if("a"!=C.tagName.toLowerCase()){var S=m("a");C.insertBefore(S,h),S.appendChild(h),C=S}"target"==f?C.setAttributeNS(p,"show","blank"==g?"new":g):C.setAttributeNS(p,f,g);break;case"cursor":h.style.cursor=g;break;case"transform":n.transform(g);break;case"arrow-start":b(n,g);break;case"arrow-end":b(n,g,1);break;case"clip-rect":var T=e(g).split(l);if(4==T.length){n.clip&&n.clip.parentNode.parentNode.removeChild(n.clip.parentNode);var P=m("clipPath"),A=m("rect");P.id=i.createUUID(),m(A,{x:T[0],y:T[1],width:T[2],height:T[3]}),P.appendChild(A),n.paper.defs.appendChild(P),m(h,{"clip-path":"url(#"+P.id+")"}),n.clip=A}if(!g){var z=h.getAttribute("clip-path");if(z){var D=i._g.doc.getElementById(z.replace(/(^url\(#|\)$)/g,d));D&&D.parentNode.removeChild(D),m(h,{"clip-path":d}),delete n.clip}}break;case"path":"path"==n.type&&(m(h,{d:g?c.path=i._pathToAbsolute(g):"M0,0"}),n._.dirty=1,n._.arrows&&("startString"in n._.arrows&&b(n,n._.arrows.startString),"endString"in n._.arrows&&b(n,n._.arrows.endString,1)));break;case"width":if(h.setAttribute(f,g),n._.dirty=1,!c.fx)break;f="x",g=c.x;case"x":c.fx&&(g=-c.x-(c.width||0));case"rx":if("rx"==f&&"rect"==n.type)break;case"cx":h.setAttribute(f,g),n.pattern&&y(n),n._.dirty=1;break;case"height":if(h.setAttribute(f,g),n._.dirty=1,!c.fy)break;f="y",g=c.y;case"y":c.fy&&(g=-c.y-(c.height||0));case"ry":if("ry"==f&&"rect"==n.type)break;case"cy":h.setAttribute(f,g),n.pattern&&y(n),n._.dirty=1;break;case"r":"rect"==n.type?m(h,{rx:g,ry:g}):h.setAttribute(f,g),n._.dirty=1;break;case"src":"image"==n.type&&h.setAttributeNS(p,"href",g);break;case"stroke-width":1==n._.sx&&1==n._.sy||(g/=o(a(n._.sx),a(n._.sy))||1),n.paper._vbSize&&(g*=n.paper._vbSize),h.setAttribute(f,g),c["stroke-dasharray"]&&x(n,c["stroke-dasharray"],r),n._.arrows&&("startString"in n._.arrows&&b(n,n._.arrows.startString),"endString"in n._.arrows&&b(n,n._.arrows.endString,1));break;case"stroke-dasharray":x(n,g,r);break;case"fill":var E=e(g).match(i._ISURL);if(E){P=m("pattern");var M=m("image");P.id=i.createUUID(),m(P,{x:0,y:0,patternUnits:"userSpaceOnUse",height:1,width:1}),m(M,{x:0,y:0,"xlink:href":E[1]}),P.appendChild(M),function(t){i._preload(E[1],(function(){var e=this.offsetWidth,i=this.offsetHeight;m(t,{width:e,height:i}),m(M,{width:e,height:i}),n.paper.safari()}))}(P),n.paper.defs.appendChild(P),m(h,{fill:"url(#"+P.id+")"}),n.pattern=P,n.pattern&&y(n);break}var L=i.getRGB(g);if(L.error){if(("circle"==n.type||"ellipse"==n.type||"r"!=e(g).charAt())&&v(n,g)){if("opacity"in c||"fill-opacity"in c){var I=i._g.doc.getElementById(h.getAttribute("fill").replace(/^url\(#|\)$/g,d));if(I){var B=I.getElementsByTagName("stop");m(B[B.length-1],{"stop-opacity":("opacity"in c?c.opacity:1)*("fill-opacity"in c?c["fill-opacity"]:1)})}}c.gradient=g,c.fill="none";break}}else delete r.gradient,delete c.gradient,!i.is(c.opacity,"undefined")&&i.is(r.opacity,"undefined")&&m(h,{opacity:c.opacity}),!i.is(c["fill-opacity"],"undefined")&&i.is(r["fill-opacity"],"undefined")&&m(h,{"fill-opacity":c["fill-opacity"]});L[t]("opacity")&&m(h,{"fill-opacity":L.opacity>1?L.opacity/100:L.opacity});case"stroke":L=i.getRGB(g),h.setAttribute(f,L.hex),"stroke"==f&&L[t]("opacity")&&m(h,{"stroke-opacity":L.opacity>1?L.opacity/100:L.opacity}),"stroke"==f&&n._.arrows&&("startString"in n._.arrows&&b(n,n._.arrows.startString),"endString"in n._.arrows&&b(n,n._.arrows.endString,1));break;case"gradient":("circle"==n.type||"ellipse"==n.type||"r"!=e(g).charAt())&&v(n,g);break;case"opacity":c.gradient&&!c[t]("stroke-opacity")&&m(h,{"stroke-opacity":g>1?g/100:g});case"fill-opacity":if(c.gradient){(I=i._g.doc.getElementById(h.getAttribute("fill").replace(/^url\(#|\)$/g,d)))&&(B=I.getElementsByTagName("stop"),m(B[B.length-1],{"stop-opacity":g}));break}default:"font-size"==f&&(g=s(g,10)+"px");var R=f.replace(/(\-.)/g,(function(t){return t.substring(1).toUpperCase()}));h.style[R]=g,n._.dirty=1,h.setAttribute(f,g)}}k(n,r),h.style.visibility=u},k=function(n,r){if("text"==n.type&&(r[t]("text")||r[t]("font")||r[t]("font-size")||r[t]("x")||r[t]("y"))){var o=n.attrs,a=n.node,h=a.firstChild?s(i._g.doc.defaultView.getComputedStyle(a.firstChild,d).getPropertyValue("font-size"),10):10;if(r[t]("text")){for(o.text=r.text;a.firstChild;)a.removeChild(a.firstChild);for(var l,c=e(r.text).split("\n"),u=[],p=0,f=c.length;p<f;p++)l=m("tspan"),p&&m(l,{dy:1.2*h,x:o.x}),l.appendChild(i._g.doc.createTextNode(c[p])),a.appendChild(l),u[p]=l}else for(p=0,f=(u=a.getElementsByTagName("tspan")).length;p<f;p++)p?m(u[p],{dy:1.2*h,x:o.x}):m(u[0],{dy:0});m(a,{x:o.x,y:o.y}),n._.dirty=1;var g=n._getBBox(),v=o.y-(g.y+g.height/2);v&&i.is(v,"finite")&&m(u[0],{dy:v})}},C=function(t,e){this[0]=this.node=t,t.raphael=!0,this.id=i._oid++,t.raphaelid=this.id,this.matrix=i.matrix(),this.realPath=null,this.paper=e,this.attrs=this.attrs||{},this._={transform:[],sx:1,sy:1,deg:0,dx:0,dy:0,dirty:1},!e.bottom&&(e.bottom=this),this.prev=e.top,e.top&&(e.top.next=this),e.top=this,this.next=null},S=i.el;C.prototype=S,S.constructor=C,i._engine.path=function(t,e){var i=m("path");e.canvas&&e.canvas.appendChild(i);var n=new C(i,e);return n.type="path",_(n,{fill:"none",stroke:"#000",path:t}),n},S.rotate=function(t,i,s){if(this.removed)return this;if((t=e(t).split(l)).length-1&&(i=n(t[1]),s=n(t[2])),t=n(t[0]),null==s&&(i=s),null==i||null==s){var r=this.getBBox(1);i=r.x+r.width/2,s=r.y+r.height/2}return this.transform(this._.transform.concat([["r",t,i,s]])),this},S.scale=function(t,i,s,r){if(this.removed)return this;if((t=e(t).split(l)).length-1&&(i=n(t[1]),s=n(t[2]),r=n(t[3])),t=n(t[0]),null==i&&(i=t),null==r&&(s=r),null==s||null==r)var o=this.getBBox(1);return s=null==s?o.x+o.width/2:s,r=null==r?o.y+o.height/2:r,this.transform(this._.transform.concat([["s",t,i,s,r]])),this},S.translate=function(t,i){return this.removed?this:((t=e(t).split(l)).length-1&&(i=n(t[1])),t=n(t[0])||0,i=+i||0,this.transform(this._.transform.concat([["t",t,i]])),this)},S.transform=function(e){var n=this._;if(null==e)return n.transform;if(i._extractTransform(this,e),this.clip&&m(this.clip,{transform:this.matrix.invert()}),this.pattern&&y(this),this.node&&m(this.node,{transform:this.matrix}),1!=n.sx||1!=n.sy){var s=this.attrs[t]("stroke-width")?this.attrs["stroke-width"]:1;this.attr({"stroke-width":s})}return this},S.hide=function(){return!this.removed&&this.paper.safari(this.node.style.display="none"),this},S.show=function(){return!this.removed&&this.paper.safari(this.node.style.display=""),this},S.remove=function(){if(!this.removed&&this.node.parentNode){var t=this.paper;for(var e in t.__set__&&t.__set__.exclude(this),c.unbind("raphael.*.*."+this.id),this.gradient&&t.defs.removeChild(this.gradient),i._tear(this,t),"a"==this.node.parentNode.tagName.toLowerCase()?this.node.parentNode.parentNode.removeChild(this.node.parentNode):this.node.parentNode.removeChild(this.node),this)this[e]="function"==typeof this[e]?i._removedFactory(e):null;this.removed=!0}},S._getBBox=function(){if("none"==this.node.style.display){this.show();var t=!0}var e={};try{e=this.node.getBBox()}catch(t){}finally{e=e||{}}return t&&this.hide(),e},S.attr=function(e,n){if(this.removed)return this;if(null==e){var s={};for(var r in this.attrs)this.attrs[t](r)&&(s[r]=this.attrs[r]);return s.gradient&&"none"==s.fill&&(s.fill=s.gradient)&&delete s.gradient,s.transform=this._.transform,s}if(null==n&&i.is(e,"string")){if("fill"==e&&"none"==this.attrs.fill&&this.attrs.gradient)return this.attrs.gradient;if("transform"==e)return this._.transform;for(var o=e.split(l),a={},h=0,d=o.length;h<d;h++)(e=o[h])in this.attrs?a[e]=this.attrs[e]:i.is(this.paper.customAttributes[e],"function")?a[e]=this.paper.customAttributes[e].def:a[e]=i._availableAttrs[e];return d-1?a:a[o[0]]}if(null==n&&i.is(e,"array")){for(a={},h=0,d=e.length;h<d;h++)a[e[h]]=this.attr(e[h]);return a}if(null!=n){var u={};u[e]=n}else null!=e&&i.is(e,"object")&&(u=e);for(var p in u)c("raphael.attr."+p+"."+this.id,this,u[p]);for(p in this.paper.customAttributes)if(this.paper.customAttributes[t](p)&&u[t](p)&&i.is(this.paper.customAttributes[p],"function")){var f=this.paper.customAttributes[p].apply(this,[].concat(u[p]));for(var g in this.attrs[p]=u[p],f)f[t](g)&&(u[g]=f[g])}return _(this,u),this},S.toFront=function(){if(this.removed)return this;"a"==this.node.parentNode.tagName.toLowerCase()?this.node.parentNode.parentNode.appendChild(this.node.parentNode):this.node.parentNode.appendChild(this.node);var t=this.paper;return t.top!=this&&i._tofront(this,t),this},S.toBack=function(){if(this.removed)return this;var t=this.node.parentNode;"a"==t.tagName.toLowerCase()?t.parentNode.insertBefore(this.node.parentNode,this.node.parentNode.parentNode.firstChild):t.firstChild!=this.node&&t.insertBefore(this.node,this.node.parentNode.firstChild),i._toback(this,this.paper);this.paper;return this},S.insertAfter=function(t){if(this.removed)return this;var e=t.node||t[t.length-1].node;return e.nextSibling?e.parentNode.insertBefore(this.node,e.nextSibling):e.parentNode.appendChild(this.node),i._insertafter(this,t,this.paper),this},S.insertBefore=function(t){if(this.removed)return this;var e=t.node||t[0].node;return e.parentNode.insertBefore(this.node,e),i._insertbefore(this,t,this.paper),this},S.blur=function(t){var e=this;if(0!=+t){var n=m("filter"),s=m("feGaussianBlur");e.attrs.blur=t,n.id=i.createUUID(),m(s,{stdDeviation:+t||1.5}),n.appendChild(s),e.paper.defs.appendChild(n),e._blur=n,m(e.node,{filter:"url(#"+n.id+")"})}else e._blur&&(e._blur.parentNode.removeChild(e._blur),delete e._blur,delete e.attrs.blur),e.node.removeAttribute("filter");return e},i._engine.circle=function(t,e,i,n){var s=m("circle");t.canvas&&t.canvas.appendChild(s);var r=new C(s,t);return r.attrs={cx:e,cy:i,r:n,fill:"none",stroke:"#000"},r.type="circle",m(s,r.attrs),r},i._engine.rect=function(t,e,i,n,s,r){var o=m("rect");t.canvas&&t.canvas.appendChild(o);var a=new C(o,t);return a.attrs={x:e,y:i,width:n,height:s,r:r||0,rx:r||0,ry:r||0,fill:"none",stroke:"#000"},a.type="rect",m(o,a.attrs),a},i._engine.ellipse=function(t,e,i,n,s){var r=m("ellipse");t.canvas&&t.canvas.appendChild(r);var o=new C(r,t);return o.attrs={cx:e,cy:i,rx:n,ry:s,fill:"none",stroke:"#000"},o.type="ellipse",m(r,o.attrs),o},i._engine.image=function(t,e,i,n,s,r){var o=m("image");m(o,{x:i,y:n,width:s,height:r,preserveAspectRatio:"none"}),o.setAttributeNS(p,"href",e),t.canvas&&t.canvas.appendChild(o);var a=new C(o,t);return a.attrs={x:i,y:n,width:s,height:r,src:e},a.type="image",a},i._engine.text=function(t,e,n,s){var r=m("text");t.canvas&&t.canvas.appendChild(r);var o=new C(r,t);return o.attrs={x:e,y:n,"text-anchor":"middle",text:s,font:i._availableAttrs.font,stroke:"none",fill:"#000"},o.type="text",_(o,o.attrs),o},i._engine.setSize=function(t,e){return this.width=t||this.width,this.height=e||this.height,this.canvas.setAttribute("width",this.width),this.canvas.setAttribute("height",this.height),this._viewBox&&this.setViewBox.apply(this,this._viewBox),this},i._engine.create=function(){var t=i._getContainer.apply(0,arguments),e=t&&t.container,n=t.x,s=t.y,r=t.width,o=t.height;if(!e)throw new Error("SVG container not found.");var a,h=m("svg"),l="overflow:hidden;";return n=n||0,s=s||0,m(h,{height:o=o||342,version:1.1,width:r=r||512,xmlns:"http://www.w3.org/2000/svg"}),1==e?(h.style.cssText=l+"position:absolute;left:"+n+"px;top:"+s+"px",i._g.doc.body.appendChild(h),a=1):(h.style.cssText=l+"position:relative",e.firstChild?e.insertBefore(h,e.firstChild):e.appendChild(h)),(e=new i._Paper).width=r,e.height=o,e.canvas=h,e.clear(),e._left=e._top=0,a&&(e.renderfix=function(){}),e.renderfix(),e},i._engine.setViewBox=function(t,e,i,n,s){c("raphael.setViewBox",this,this._viewBox,[t,e,i,n,s]);var r,a,h=o(i/this.width,n/this.height),l=this.top,d=s?"xMidYMid meet":"xMinYMin";for(null==t?(this._vbSize&&(h=1),delete this._vbSize,r="0 0 "+this.width+u+this.height):(this._vbSize=h,r=t+u+e+u+i+u+n),m(this.canvas,{viewBox:r,preserveAspectRatio:d});h&&l;)a="stroke-width"in l.attrs?l.attrs["stroke-width"]:1,l.attr({"stroke-width":a}),l._.dirty=1,l._.dirtyT=1,l=l.prev;return this._viewBox=[t,e,i,n,!!s],this},i.prototype.renderfix=function(){var t,e=this.canvas,i=e.style;try{t=e.getScreenCTM()||e.createSVGMatrix()}catch(i){t=e.createSVGMatrix()}var n=-t.e%1,s=-t.f%1;(n||s)&&(n&&(this._left=(this._left+n)%1,i.left=this._left+"px"),s&&(this._top=(this._top+s)%1,i.top=this._top+"px"))},i.prototype.clear=function(){i.eve("raphael.clear",this);for(var t=this.canvas;t.firstChild;)t.removeChild(t.firstChild);this.bottom=this.top=null,(this.desc=m("desc")).appendChild(i._g.doc.createTextNode("Created with Raphal "+i.version)),t.appendChild(this.desc),t.appendChild(this.defs=m("defs"))},i.prototype.remove=function(){for(var t in c("raphael.remove",this),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas),this)this[t]="function"==typeof this[t]?i._removedFactory(t):null};var T=i.st;for(var P in S)S[t](P)&&!T[t](P)&&(T[P]=function(t){return function(){var e=arguments;return this.forEach((function(i){i[t].apply(i,e)}))}}(P))}}(),function(){if(i.vml){var t="hasOwnProperty",e=String,n=parseFloat,s=Math,r=s.round,o=s.max,a=s.min,h=s.abs,l="fill",c=/[, ]+/,d=i.eve,u=" ",p="",f={M:"m",L:"l",C:"c",Z:"x",m:"t",l:"r",c:"v",z:"x"},g=/([clmz]),?([^clmz]*)/gi,m=/ progid:\S+Blur\([^\)]+\)/g,v=/-?[^,\s-]+/g,y="position:absolute;left:0;top:0;width:1px;height:1px",b=21600,w={path:1,rect:1,image:1},x={circle:1,ellipse:1},_=function(t){var n=/[ahqstv]/gi,s=i._pathToAbsolute;if(e(t).match(n)&&(s=i._path2curve),n=/[clmz]/g,s==i._pathToAbsolute&&!e(t).match(n)){var o=e(t).replace(g,(function(t,e,i){var n=[],s="m"==e.toLowerCase(),o=f[e];return i.replace(v,(function(t){s&&2==n.length&&(o+=n+f["m"==e?"l":"L"],n=[]),n.push(r(t*b))})),o+n}));return o}var a,h,l=s(t);o=[];for(var c=0,d=l.length;c<d;c++){a=l[c],"z"==(h=l[c][0].toLowerCase())&&(h="x");for(var m=1,y=a.length;m<y;m++)h+=r(a[m]*b)+(m!=y-1?",":p);o.push(h)}return o.join(u)},k=function(t,e,n){var s=i.matrix();return s.rotate(-t,.5,.5),{dx:s.x(e,n),dy:s.y(e,n)}},C=function(t,e,i,n,s,r){var o=t._,a=t.matrix,c=o.fillpos,d=t.node,p=d.style,f=1,g="",m=b/e,v=b/i;if(p.visibility="hidden",e&&i){if(d.coordsize=h(m)+u+h(v),p.rotation=r*(e*i<0?-1:1),r){var y=k(r,n,s);n=y.dx,s=y.dy}if(e<0&&(g+="x"),i<0&&(g+=" y")&&(f=-1),p.flip=g,d.coordorigin=n*-m+u+s*-v,c||o.fillsize){var w=d.getElementsByTagName(l);w=w&&w[0],d.removeChild(w),c&&(y=k(r,a.x(c[0],c[1]),a.y(c[0],c[1])),w.position=y.dx*f+u+y.dy*f),o.fillsize&&(w.size=o.fillsize[0]*h(e)+u+o.fillsize[1]*h(i)),d.appendChild(w)}p.visibility="visible"}};i.toString=function(){return"Your browser doesnt support SVG. Falling down to VML.\nYou are running Raphal "+this.version};var S,T=function(t,i,n){for(var s=e(i).toLowerCase().split("-"),r=n?"end":"start",o=s.length,a="classic",h="medium",l="medium";o--;)switch(s[o]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":a=s[o];break;case"wide":case"narrow":l=s[o];break;case"long":case"short":h=s[o]}var c=t.node.getElementsByTagName("stroke")[0];c[r+"arrow"]=a,c[r+"arrowlength"]=h,c[r+"arrowwidth"]=l},P=function(s,h){s.attrs=s.attrs||{};var d=s.node,f=s.attrs,g=d.style,m=w[s.type]&&(h.x!=f.x||h.y!=f.y||h.width!=f.width||h.height!=f.height||h.cx!=f.cx||h.cy!=f.cy||h.rx!=f.rx||h.ry!=f.ry||h.r!=f.r),v=x[s.type]&&(f.cx!=h.cx||f.cy!=h.cy||f.r!=h.r||f.rx!=h.rx||f.ry!=h.ry),y=s;for(var k in h)h[t](k)&&(f[k]=h[k]);if(m&&(f.path=i._getPath[s.type](s),s._.dirty=1),h.href&&(d.href=h.href),h.title&&(d.title=h.title),h.target&&(d.target=h.target),h.cursor&&(g.cursor=h.cursor),"blur"in h&&s.blur(h.blur),(h.path&&"path"==s.type||m)&&(d.path=_(~e(f.path).toLowerCase().indexOf("r")?i._pathToAbsolute(f.path):f.path),"image"==s.type&&(s._.fillpos=[f.x,f.y],s._.fillsize=[f.width,f.height],C(s,1,1,0,0,0))),"transform"in h&&s.transform(h.transform),v){var P=+f.cx,z=+f.cy,D=+f.rx||+f.r||0,E=+f.ry||+f.r||0;d.path=i.format("ar{0},{1},{2},{3},{4},{1},{4},{1}x",r((P-D)*b),r((z-E)*b),r((P+D)*b),r((z+E)*b),r(P*b)),s._.dirty=1}if("clip-rect"in h){var M=e(h["clip-rect"]).split(c);if(4==M.length){M[2]=+M[2]+ +M[0],M[3]=+M[3]+ +M[1];var L=d.clipRect||i._g.doc.createElement("div"),I=L.style;I.clip=i.format("rect({1}px {2}px {3}px {0}px)",M),d.clipRect||(I.position="absolute",I.top=0,I.left=0,I.width=s.paper.width+"px",I.height=s.paper.height+"px",d.parentNode.insertBefore(L,d),L.appendChild(d),d.clipRect=L)}h["clip-rect"]||d.clipRect&&(d.clipRect.style.clip="auto")}if(s.textpath){var B=s.textpath.style;h.font&&(B.font=h.font),h["font-family"]&&(B.fontFamily='"'+h["font-family"].split(",")[0].replace(/^['"]+|['"]+$/g,p)+'"'),h["font-size"]&&(B.fontSize=h["font-size"]),h["font-weight"]&&(B.fontWeight=h["font-weight"]),h["font-style"]&&(B.fontStyle=h["font-style"])}if("arrow-start"in h&&T(y,h["arrow-start"]),"arrow-end"in h&&T(y,h["arrow-end"],1),null!=h.opacity||null!=h["stroke-width"]||null!=h.fill||null!=h.src||null!=h.stroke||null!=h["stroke-width"]||null!=h["stroke-opacity"]||null!=h["fill-opacity"]||null!=h["stroke-dasharray"]||null!=h["stroke-miterlimit"]||null!=h["stroke-linejoin"]||null!=h["stroke-linecap"]){var R=d.getElementsByTagName(l);if(!(R=R&&R[0])&&(R=S(l)),"image"==s.type&&h.src&&(R.src=h.src),h.fill&&(R.on=!0),null!=R.on&&"none"!=h.fill&&null!==h.fill||(R.on=!1),R.on&&h.fill){var O=e(h.fill).match(i._ISURL);if(O){R.parentNode==d&&d.removeChild(R),R.rotate=!0,R.src=O[1],R.type="tile";var N=s.getBBox(1);R.position=N.x+u+N.y,s._.fillpos=[N.x,N.y],i._preload(O[1],(function(){s._.fillsize=[this.offsetWidth,this.offsetHeight]}))}else R.color=i.getRGB(h.fill).hex,R.src=p,R.type="solid",i.getRGB(h.fill).error&&(y.type in{circle:1,ellipse:1}||"r"!=e(h.fill).charAt())&&A(y,h.fill,R)&&(f.fill="none",f.gradient=h.fill,R.rotate=!1)}if("fill-opacity"in h||"opacity"in h){var V=((+f["fill-opacity"]+1||2)-1)*((+f.opacity+1||2)-1)*((+i.getRGB(h.fill).o+1||2)-1);V=a(o(V,0),1),R.opacity=V,R.src&&(R.color="none")}d.appendChild(R);var F=d.getElementsByTagName("stroke")&&d.getElementsByTagName("stroke")[0],H=!1;!F&&(H=F=S("stroke")),(h.stroke&&"none"!=h.stroke||h["stroke-width"]||null!=h["stroke-opacity"]||h["stroke-dasharray"]||h["stroke-miterlimit"]||h["stroke-linejoin"]||h["stroke-linecap"])&&(F.on=!0),("none"==h.stroke||null===h.stroke||null==F.on||0==h.stroke||0==h["stroke-width"])&&(F.on=!1);var U=i.getRGB(h.stroke);F.on&&h.stroke&&(F.color=U.hex),V=((+f["stroke-opacity"]+1||2)-1)*((+f.opacity+1||2)-1)*((+U.o+1||2)-1);var $=.75*(n(h["stroke-width"])||1);if(V=a(o(V,0),1),null==h["stroke-width"]&&($=f["stroke-width"]),h["stroke-width"]&&(F.weight=$),$&&$<1&&(V*=$)&&(F.weight=1),F.opacity=V,h["stroke-linejoin"]&&(F.joinstyle=h["stroke-linejoin"]||"miter"),F.miterlimit=h["stroke-miterlimit"]||8,h["stroke-linecap"]&&(F.endcap="butt"==h["stroke-linecap"]?"flat":"square"==h["stroke-linecap"]?"square":"round"),"stroke-dasharray"in h){var j={"-":"shortdash",".":"shortdot","-.":"shortdashdot","-..":"shortdashdotdot",". ":"dot","- ":"dash","--":"longdash","- .":"dashdot","--.":"longdashdot","--..":"longdashdotdot"};F.dashstyle=j[t](h["stroke-dasharray"])?j[h["stroke-dasharray"]]:p}H&&d.appendChild(F)}if("text"==y.type){y.paper.canvas.style.display=p;var G=y.paper.span,W=f.font&&f.font.match(/\d+(?:\.\d*)?(?=px)/);g=G.style,f.font&&(g.font=f.font),f["font-family"]&&(g.fontFamily=f["font-family"]),f["font-weight"]&&(g.fontWeight=f["font-weight"]),f["font-style"]&&(g.fontStyle=f["font-style"]),W=n(f["font-size"]||W&&W[0])||10,g.fontSize=100*W+"px",y.textpath.string&&(G.innerHTML=e(y.textpath.string).replace(/</g,"&#60;").replace(/&/g,"&#38;").replace(/\n/g,"<br>"));var q=G.getBoundingClientRect();y.W=f.w=(q.right-q.left)/100,y.H=f.h=(q.bottom-q.top)/100,y.X=f.x,y.Y=f.y+y.H/2,("x"in h||"y"in h)&&(y.path.v=i.format("m{0},{1}l{2},{1}",r(f.x*b),r(f.y*b),r(f.x*b)+1));for(var Y=["x","y","text","font","font-family","font-weight","font-style","font-size"],Q=0,X=Y.length;Q<X;Q++)if(Y[Q]in h){y._.dirty=1;break}switch(f["text-anchor"]){case"start":y.textpath.style["v-text-align"]="left",y.bbx=y.W/2;break;case"end":y.textpath.style["v-text-align"]="right",y.bbx=-y.W/2;break;default:y.textpath.style["v-text-align"]="center",y.bbx=0}y.textpath.style["v-text-kern"]=!0}},A=function(t,r,o){t.attrs=t.attrs||{};t.attrs;var a=Math.pow,h="linear",l=".5 .5";if(t.attrs.gradient=r,r=(r=e(r).replace(i._radial_gradient,(function(t,e,i){return h="radial",e&&i&&(e=n(e),i=n(i),a(e-.5,2)+a(i-.5,2)>.25&&(i=s.sqrt(.25-a(e-.5,2))*(2*(i>.5)-1)+.5),l=e+u+i),p}))).split(/\s*\-\s*/),"linear"==h){var c=r.shift();if(c=-n(c),isNaN(c))return null}var d=i._parseDots(r);if(!d)return null;if(t=t.shape||t.node,d.length){t.removeChild(o),o.on=!0,o.method="none",o.color=d[0].color,o.color2=d[d.length-1].color;for(var f=[],g=0,m=d.length;g<m;g++)d[g].offset&&f.push(d[g].offset+u+d[g].color);o.colors=f.length?f.join():"0% "+o.color,"radial"==h?(o.type="gradientTitle",o.focus="100%",o.focussize="0 0",o.focusposition=l,o.angle=0):(o.type="gradient",o.angle=(270-c)%360),t.appendChild(o)}return 1},z=function(t,e){this[0]=this.node=t,t.raphael=!0,this.id=i._oid++,t.raphaelid=this.id,this.X=0,this.Y=0,this.attrs={},this.paper=e,this.matrix=i.matrix(),this._={transform:[],sx:1,sy:1,dx:0,dy:0,deg:0,dirty:1,dirtyT:1},!e.bottom&&(e.bottom=this),this.prev=e.top,e.top&&(e.top.next=this),e.top=this,this.next=null},D=i.el;z.prototype=D,D.constructor=z,D.transform=function(t){if(null==t)return this._.transform;var n,s=this.paper._viewBoxShift,r=s?"s"+[s.scale,s.scale]+"-1-1t"+[s.dx,s.dy]:p;s&&(n=t=e(t).replace(/\.{3}|\u2026/g,this._.transform||p)),i._extractTransform(this,r+t);var o,a=this.matrix.clone(),h=this.skew,l=this.node,c=~e(this.attrs.fill).indexOf("-"),d=!e(this.attrs.fill).indexOf("url(");if(a.translate(1,1),d||c||"image"==this.type)if(h.matrix="1 0 0 1",h.offset="0 0",o=a.split(),c&&o.noRotation||!o.isSimple){l.style.filter=a.toFilter();var f=this.getBBox(),g=this.getBBox(1),m=f.x-g.x,v=f.y-g.y;l.coordorigin=m*-b+u+v*-b,C(this,1,1,m,v,0)}else l.style.filter=p,C(this,o.scalex,o.scaley,o.dx,o.dy,o.rotate);else l.style.filter=p,h.matrix=e(a),h.offset=a.offset();return n&&(this._.transform=n),this},D.rotate=function(t,i,s){if(this.removed)return this;if(null!=t){if((t=e(t).split(c)).length-1&&(i=n(t[1]),s=n(t[2])),t=n(t[0]),null==s&&(i=s),null==i||null==s){var r=this.getBBox(1);i=r.x+r.width/2,s=r.y+r.height/2}return this._.dirtyT=1,this.transform(this._.transform.concat([["r",t,i,s]])),this}},D.translate=function(t,i){return this.removed?this:((t=e(t).split(c)).length-1&&(i=n(t[1])),t=n(t[0])||0,i=+i||0,this._.bbox&&(this._.bbox.x+=t,this._.bbox.y+=i),this.transform(this._.transform.concat([["t",t,i]])),this)},D.scale=function(t,i,s,r){if(this.removed)return this;if((t=e(t).split(c)).length-1&&(i=n(t[1]),s=n(t[2]),r=n(t[3]),isNaN(s)&&(s=null),isNaN(r)&&(r=null)),t=n(t[0]),null==i&&(i=t),null==r&&(s=r),null==s||null==r)var o=this.getBBox(1);return s=null==s?o.x+o.width/2:s,r=null==r?o.y+o.height/2:r,this.transform(this._.transform.concat([["s",t,i,s,r]])),this._.dirtyT=1,this},D.hide=function(){return!this.removed&&(this.node.style.display="none"),this},D.show=function(){return!this.removed&&(this.node.style.display=p),this},D._getBBox=function(){return this.removed?{}:{x:this.X+(this.bbx||0)-this.W/2,y:this.Y-this.H,width:this.W,height:this.H}},D.remove=function(){if(!this.removed&&this.node.parentNode){for(var t in this.paper.__set__&&this.paper.__set__.exclude(this),i.eve.unbind("raphael.*.*."+this.id),i._tear(this,this.paper),this.node.parentNode.removeChild(this.node),this.shape&&this.shape.parentNode.removeChild(this.shape),this)this[t]="function"==typeof this[t]?i._removedFactory(t):null;this.removed=!0}},D.attr=function(e,n){if(this.removed)return this;if(null==e){var s={};for(var r in this.attrs)this.attrs[t](r)&&(s[r]=this.attrs[r]);return s.gradient&&"none"==s.fill&&(s.fill=s.gradient)&&delete s.gradient,s.transform=this._.transform,s}if(null==n&&i.is(e,"string")){if(e==l&&"none"==this.attrs.fill&&this.attrs.gradient)return this.attrs.gradient;for(var o=e.split(c),a={},h=0,u=o.length;h<u;h++)(e=o[h])in this.attrs?a[e]=this.attrs[e]:i.is(this.paper.customAttributes[e],"function")?a[e]=this.paper.customAttributes[e].def:a[e]=i._availableAttrs[e];return u-1?a:a[o[0]]}if(this.attrs&&null==n&&i.is(e,"array")){for(a={},h=0,u=e.length;h<u;h++)a[e[h]]=this.attr(e[h]);return a}var p;for(var f in null!=n&&((p={})[e]=n),null==n&&i.is(e,"object")&&(p=e),p)d("raphael.attr."+f+"."+this.id,this,p[f]);if(p){for(f in this.paper.customAttributes)if(this.paper.customAttributes[t](f)&&p[t](f)&&i.is(this.paper.customAttributes[f],"function")){var g=this.paper.customAttributes[f].apply(this,[].concat(p[f]));for(var m in this.attrs[f]=p[f],g)g[t](m)&&(p[m]=g[m])}p.text&&"text"==this.type&&(this.textpath.string=p.text),P(this,p)}return this},D.toFront=function(){return!this.removed&&this.node.parentNode.appendChild(this.node),this.paper&&this.paper.top!=this&&i._tofront(this,this.paper),this},D.toBack=function(){return this.removed?this:(this.node.parentNode.firstChild!=this.node&&(this.node.parentNode.insertBefore(this.node,this.node.parentNode.firstChild),i._toback(this,this.paper)),this)},D.insertAfter=function(t){return this.removed?this:(t.constructor==i.st.constructor&&(t=t[t.length-1]),t.node.nextSibling?t.node.parentNode.insertBefore(this.node,t.node.nextSibling):t.node.parentNode.appendChild(this.node),i._insertafter(this,t,this.paper),this)},D.insertBefore=function(t){return this.removed?this:(t.constructor==i.st.constructor&&(t=t[0]),t.node.parentNode.insertBefore(this.node,t.node),i._insertbefore(this,t,this.paper),this)},D.blur=function(t){var e=this.node.runtimeStyle,n=e.filter;return n=n.replace(m,p),0!=+t?(this.attrs.blur=t,e.filter=n+u+" progid:DXImageTransform.Microsoft.Blur(pixelradius="+(+t||1.5)+")",e.margin=i.format("-{0}px 0 0 -{0}px",r(+t||1.5))):(e.filter=n,e.margin=0,delete this.attrs.blur),this},i._engine.path=function(t,e){var i=S("shape");i.style.cssText=y,i.coordsize=b+u+b,i.coordorigin=e.coordorigin;var n=new z(i,e),s={fill:"none",stroke:"#000"};t&&(s.path=t),n.type="path",n.path=[],n.Path=p,P(n,s),e.canvas.appendChild(i);var r=S("skew");return r.on=!0,i.appendChild(r),n.skew=r,n.transform(p),n},i._engine.rect=function(t,e,n,s,r,o){var a=i._rectPath(e,n,s,r,o),h=t.path(a),l=h.attrs;return h.X=l.x=e,h.Y=l.y=n,h.W=l.width=s,h.H=l.height=r,l.r=o,l.path=a,h.type="rect",h},i._engine.ellipse=function(t,e,i,n,s){var r=t.path();r.attrs;return r.X=e-n,r.Y=i-s,r.W=2*n,r.H=2*s,r.type="ellipse",P(r,{cx:e,cy:i,rx:n,ry:s}),r},i._engine.circle=function(t,e,i,n){var s=t.path();s.attrs;return s.X=e-n,s.Y=i-n,s.W=s.H=2*n,s.type="circle",P(s,{cx:e,cy:i,r:n}),s},i._engine.image=function(t,e,n,s,r,o){var a=i._rectPath(n,s,r,o),h=t.path(a).attr({stroke:"none"}),c=h.attrs,d=h.node,u=d.getElementsByTagName(l)[0];return c.src=e,h.X=c.x=n,h.Y=c.y=s,h.W=c.width=r,h.H=c.height=o,c.path=a,h.type="image",u.parentNode==d&&d.removeChild(u),u.rotate=!0,u.src=e,u.type="tile",h._.fillpos=[n,s],h._.fillsize=[r,o],d.appendChild(u),C(h,1,1,0,0,0),h},i._engine.text=function(t,n,s,o){var a=S("shape"),h=S("path"),l=S("textpath");n=n||0,s=s||0,o=o||"",h.v=i.format("m{0},{1}l{2},{1}",r(n*b),r(s*b),r(n*b)+1),h.textpathok=!0,l.string=e(o),l.on=!0,a.style.cssText=y,a.coordsize=b+u+b,a.coordorigin="0 0";var c=new z(a,t),d={fill:"#000",stroke:"none",font:i._availableAttrs.font,text:o};c.shape=a,c.path=h,c.textpath=l,c.type="text",c.attrs.text=e(o),c.attrs.x=n,c.attrs.y=s,c.attrs.w=1,c.attrs.h=1,P(c,d),a.appendChild(l),a.appendChild(h),t.canvas.appendChild(a);var f=S("skew");return f.on=!0,a.appendChild(f),c.skew=f,c.transform(p),c},i._engine.setSize=function(t,e){var n=this.canvas.style;return this.width=t,this.height=e,t==+t&&(t+="px"),e==+e&&(e+="px"),n.width=t,n.height=e,n.clip="rect(0 "+t+" "+e+" 0)",this._viewBox&&i._engine.setViewBox.apply(this,this._viewBox),this},i._engine.setViewBox=function(t,e,n,s,r){i.eve("raphael.setViewBox",this,this._viewBox,[t,e,n,s,r]);var a,h,l=this.width,c=this.height,d=1/o(n/l,s/c);return r&&(n*(a=c/s)<l&&(t-=(l-n*a)/2/a),s*(h=l/n)<c&&(e-=(c-s*h)/2/h)),this._viewBox=[t,e,n,s,!!r],this._viewBoxShift={dx:-t,dy:-e,scale:d},this.forEach((function(t){t.transform("...")})),this},i._engine.initWin=function(t){var e=t.document;e.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)");try{!e.namespaces.rvml&&e.namespaces.add("rvml","urn:schemas-microsoft-com:vml"),S=function(t){return e.createElement("<rvml:"+t+' class="rvml">')}}catch(t){S=function(t){return e.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}},i._engine.initWin(i._g.win),i._engine.create=function(){var t=i._getContainer.apply(0,arguments),e=t.container,n=t.height,s=t.width,r=t.x,o=t.y;if(!e)throw new Error("VML container not found.");var a=new i._Paper,h=a.canvas=i._g.doc.createElement("div"),l=h.style;return r=r||0,o=o||0,s=s||512,n=n||342,a.width=s,a.height=n,s==+s&&(s+="px"),n==+n&&(n+="px"),a.coordsize=216e5+u+216e5,a.coordorigin="0 0",a.span=i._g.doc.createElement("span"),a.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;",h.appendChild(a.span),l.cssText=i.format("top:0;left:0;width:{0};height:{1};display:inline-block;position:relative;clip:rect(0 {0} {1} 0);overflow:hidden",s,n),1==e?(i._g.doc.body.appendChild(h),l.left=r+"px",l.top=o+"px",l.position="absolute"):e.firstChild?e.insertBefore(h,e.firstChild):e.appendChild(h),a.renderfix=function(){},a},i.prototype.clear=function(){i.eve("raphael.clear",this),this.canvas.innerHTML=p,this.span=i._g.doc.createElement("span"),this.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;",this.canvas.appendChild(this.span),this.bottom=this.top=null},i.prototype.remove=function(){for(var t in i.eve("raphael.remove",this),this.canvas.parentNode.removeChild(this.canvas),this)this[t]="function"==typeof this[t]?i._removedFactory(t):null;return!0};var E=i.st;for(var M in D)D[t](M)&&!E[t](M)&&(E[M]=function(t){return function(){var e=arguments;return this.forEach((function(i){i[t].apply(i,e)}))}}(M))}}(),T.was?S.win.Raphael=i:Raphael=i}(t,t.eve)}(this),
/*! */
function(t){Raphael.fn.nestedSVG=function(e,i,n){var s=this,r=(arguments[0]instanceof Array||arguments[0],arguments[0]instanceof Array?arguments[0]:arguments[1]);function o(r,o){s.set(o);var a,h=new Raphael(e,i,n);return h.canvas.setAttribute("x",0),h.canvas.setAttribute("y",0),s.canvas.appendChild(h.canvas),a={move:function(t,e){h.canvas.setAttribute("x",t),h.canvas.setAttribute("y",e)}},t.extend(h,a),h}return o(0,r)}}(jQuery),jQuery,Raphael.fn.marker=function(){var t=this,e=(arguments[0]instanceof Array||arguments[0],arguments[0]instanceof Array?arguments[0]:arguments[1]);function i(e,i){t.set(i);var n=t.raphael.vml?document.createElement("marker"):document.createElementNS("http://www.w3.org/2000/svg","marker"),s=t.path("M2,2 L2,10 L10,6 L2,2");return s.node.setAttribute("fill","black"),t.defs.appendChild(n),n.appendChild(s.node),{scale:function(t,e){var i=n.getAttribute("transform");return n.attr("transform",updateScale(i,t,e)),this},move:function(t,e){n.setAttribute("x",t),n.setAttribute("y",e)},attr:function(t,e){n.setAttribute(t,e)},attrs:function(t){for(var e in t)n.setAttribute(e,t[e])},type:"marker",node:n}}return i(0,e)},
/*! */
function(t){Raphael.fn.group=function(){var e=this,i=(arguments[0]instanceof Array||arguments[0],arguments[0]instanceof Array?arguments[0]:arguments[1]);function n(i,n){e.set(n);var s,r=e.raphael.vml?document.createElement("group"):document.createElementNS("http://www.w3.org/2000/svg","g");return e.canvas.appendChild(r),r.canvas=r,s={setScale:function(t){return e.raphael.vml?this.forEach((function(e){var i=e.data("rotation")||0;e.transform("S"+t+","+t+", 0, 0, r"+i)})):r.setAttribute("transform","scale("+t+")"),this},getScale:function(){var t=r.getAttribute("transform");return null===t&&(t="scale(1)"),t.replace("scale(","").replace(")","")}},t.extend(s,e),s.scale=s.setScale,s.canvas=r,s[0]=r,s.type="group",s.node=r,s}return n(0,i)}}(jQuery),bizagi.reporting.report.analyticsprocessfrequentspaths.extend("bizagi.reporting.report.analyticstaskcycletime",{},{init:function(t){this._super(t),this.tasks=[],this.cleanReferrerParams()},initializeTemplates:function(){return{main:bizagi.getTemplate("bizagi.reporting.report.analyticstaskcycletime")+"#bz-rp-analytics-task-cycletime-main",header:bizagi.getTemplate("bizagi.reporting.report.analyticstaskcycletime")+"#bz-rp-analytics-task-cycletime-cases",tooltip:bizagi.getTemplate("bizagi.reporting.report.analyticstaskcycletime")+"#bz-rp-analytics-task-cycletime-tooltip"}},getDetailListObject:function(t){return t.tooltip?{detailList:{reportName:"Analytics.Task.Tasks",task:t.guid,columnName:t.type}}:{detailList:{reportName:"Analytics.Process.FrequentPaths",columnIndex:this.frequentsPaths[this.path].pathIndex}}},drawReport:function(t){var e=this;e.setFiltersForCustomRPComp();var i=$("#bizagi-reporting-wrapper");i.startLoading({overlay:!0,delay:150,opacity:.9,maxZIndex:!0}),e.state="loading",e.lastFilter=t,$.when(e.services.getTaskCycleTime(t)).done((function(t){e.state="loaded",i.endLoading(),e.frequentsPaths=void 0,e.tasks=t.tasks,e.renderHeader(),e.drawProcessModel(),e.drawProcessBreadcrumb()}))},drawProcessBreadcrumb:function(){var t=$(".bz-rp-processbreadcrumb-container",this.content);if(t.empty(),this.model.taskPathArray&&this.model.taskPathArray.length>1){var e=this.getTemplate("process-breadcrumb");$.tmpl(e,{taskData:this.model.taskPathArray}).appendTo(t),this.addBreadCrumbHandlers()}},getTooltipContent:function(t){var e=t.id,i=this.getTemplate("tooltip"),n=this.tasks.filter((function(t){return t.guid==e}));return($(t).hasClass("usertask")||$(t).hasClass("abstracttask")||$(t).hasClass("manualtask")||$(t).hasClass("nonetask")||$(t).hasClass("subprocess"))&&(n[0].showAll=!0),$.tmpl(i,n[0])},toggleFrequentPaths:function(t,e){var i=this,n=0==i.frequentsPaths.length?".bz-rp-analytics-task-cycletime-frecuentspaths-cases-message-no-data":".bz-rp-analytics-task-cycletime-frecuentspaths-cases",s=e.siblings(n),r=e.find("input[type=checkbox]");s.slideToggle("fast",(function(){"none"==$(this).css("display")?(r.prop("checked",!1),t.processviewer("clearRoute")):(r.prop("checked",!0),i.drawFrequentsPaths())}))},eventsHandlers:function(){var t=this,e=$(".bz-rp-processviewer-canvas",t.content);t.applyViewerTooltip(e,{}),t.bindDtlEvent(),$(".bz-rp-processviewer",t.content).on("click",".bz-rp-analytics-task-cycletime-frequentspaths-showcontrol",(function(i){var n=$(this);return null==t.frequentsPaths?$.when(t.services.getFrecuentsPaths(t.lastFilter)).done((function(i){t.frequentsPaths=i.paths,t.frequentsPathsControl(),t.toggleFrequentPaths(e,n)})):t.toggleFrequentPaths(e,n),!1})),$(".bz-rp-processviewer",t.content).on("click",".bz-rp-taskcycletime-detaillist",(function(e){t.callDetailList({})})),$(".bz-rp-processviewer",t.content).on("pvComplete",(function(t){$(".abstracttask, .usertask, .nonetask, .manualtask, .subprocess, .scripttask").addClass("bz-rp-process-viewer-activate")}))},addBreadCrumbHandlers:function(){var t=this,e=$(".bz-rp-processbreadcrumb-container",t.content);$("a",e).click((function(e){e.preventDefault();var i=$(e.currentTarget).data("taskid"),n=e.currentTarget.text;0==n.indexOf(" > ")&&(n=n.substring(3,n.length)),t.model.process={id:i,name:n},t.refreshBreadCrumb(),t.components.processversion.publish("filterbyprocessversion",{process:t.model.process})}))},refreshBreadCrumb:function(){var t,e;if(this.model.taskPathArray){for(t=this.model.taskPathArray.length;t-- >0;)parseInt(this.model.process.id)==parseInt(this.model.taskPathArray[t].id)&&(e=t);0==e?this.model.taskPathArray=[].concat(this.model.taskPathArray[0]):this.model.taskPathArray.splice(e+1,this.model.taskPathArray.length)}}}),bizagi.reporting.report.extend("bizagi.reporting.report.bamresourcemonitorworkinprogress",{},{init:function(t){this._super(t),this.taskGuid={},this.cacheProcess=-1,this.users=[],this.setReportNames("ResourceBAM","bamresourcemonitorworkinprogress")},getFiltersObject:function(){return{process:{},dimension:[]}},initializeTemplates:function(){return{main:bizagi.getTemplate("bizagi.reporting.report.bamresourcemonitorworkinprogress")+"#bz-rp-bam-resourcemonitor-workinprogress-main",chart:bizagi.getTemplate("bizagi.reporting.report.bamresourcemonitorworkinprogress")+"#bz-rp-bam-resourcemonitor-workinprogress-chart",exportexcel:bizagi.getTemplate("bizagi.reporting.report")+"#bz-rp-exportexcel"}},loadComponents:function(){var t=this;return t._super(),$.when(t.loadProcessesVersionComponent()).pipe((function(){return t.loadDimensionsComponent({process:t.model.process})}))},postRender:function(){this.eventHandlers(),this.callModalWindow()},getDetailListObject:function(t){return this.setReportParams(t,this.model),{detailList:{reportName:t.sender.options.chartName,columnName:t.series.field.toLowerCase(),task:t.dataItem.guidTask,user:t.dataItem.id}}},drawReport:function(){var t={},e="filters=";this.setFiltersForCustomRPComp(),this.cacheProcess===this.model.process.id&&this.taskGuid.task?t=$.extend({},this.model,this.taskGuid):(t=this.model,this.taskGuid={},this.drawProcessModel()),this.cacheProcess=this.model.process.id,e+=JSON.stringify(t),this.callService(e)},callService:function(t){var e=this,i=$(".bz-rp-bam-resourcemonitor-workinprogress-charts",e.content);$.when(e.services.getProcessVersionList()).pipe((function(n){0==n.processes.length?e.setNoDataAvailableLabel(i):$.when(e.services.getResourceMonitorWorkInProgress(t)).done((function(t){var n=e.getTemplate("exportexcel"),s=e.groupDataChart(t.users);$.isEmptyObject(s)?e.setNoDataAvailableLabel(i):(i.empty(),i.append($.tmpl(n,{},{getReportExcelUrl:e.getReportExcelUrl("bam.resources.task"),showExcelIcon:!e.device||"desktop"==e.device.toLowerCase()})),$.each(s,(function(t,n){e.drawCharts(n,i)})))})).fail((function(t){e.setNoDataAvailableLabel(i)}))}))},drawProcessModel:function(){var t=$(".bz-rp-processviewer-canvas",this.content);this.renderProcessViewer(t)},drawCharts:function(t,e){var i=this.getTemplate("chart");e.append($.tmpl(i,t[0]));var n={dataSource:{data:t},legend:{position:"top"},chartName:"BAM.Resource.Task",seriesDefaults:{tooltip:{visible:!1},type:"bar"},series:[{field:"onTime",name:this.getResource("reports-general-ontime-label"),color:"#8bbc21"},{field:"onRisk",name:this.getResource("reports-general-onrisk-label"),color:"#FFCF40"},{field:"overdue",name:this.getResource("reports-general-overdue-label"),color:"#FF4040"}],categoryAxis:{field:"fullName",reverse:!0}};$.extend(n,this.calculateGraphHeight(t.length));var s=this.graphics.getDataVizObject(n);$(".bz-rp-chart",e).last().kendoChart(s)},groupDataChart:function(t){for(var e,i={},n=t.length;--n>=0;)e="-"+t[n].idTask+"-","object"==_typeof(i[e])?i[e].push(t[n]):i[e]=new Array(t[n]);return i},eventHandlers:function(){var t=this,e=$(".bz-rp-processviewer-canvas",t.content);e.on("click",".usertask, .abstracttask, .manualtask, .nonetask, svg",(function(i){var n="filters=",s={};$(this).is("svg")?(e.processviewer("unSelectAllShapes"),s=t.model,t.taskGuid={}):(t.taskGuid={task:{guid:this.id}},s=$.extend({},t.model,t.taskGuid),e.processviewer("unSelectAllShapes").processviewer("selectShape",this.id)),n+=JSON.stringify(s),t.callService(n)}))},getReportExcelUrl:function(t){var e=$.extend({},this.taskGuid,this.model),i="reportName="+t+"&filters="+JSON.stringify(e)+"&user="+bizagi.currentUser.idUser+"&xsrf="+bizagi.getXSRFToken();return this.services.getExportExcelUrl(i)}}),bizagi.reporting.report.extend("bizagi.reporting.report.bamresourcemonitorworkinprogressuser",{},{init:function(t){this._super(t),this.process={process:{id:0}},this.reportName="BAM.Resource.User",this.setReportNames("ResourceBAM","bamresourcemonitorworkinprogressuser")},initializeTemplates:function(){return{main:bizagi.getTemplate("bizagi.reporting.report.bamresourcemonitorworkinprogressuser")+"#bz-rp-bam-resourcemonitor-workinprogressuser-main",chart:bizagi.getTemplate("bizagi.reporting.report.bamresourcemonitorworkinprogressuser")+"#bz-rp-bam-resourcemonitor-workinprogressuser-chart",message:bizagi.getTemplate("bizagi.reporting.report.bamresourcemonitorworkinprogressuser")+"#bz-rp-bam-resourcemonitor-workinprogressuser-message",exportexcel:bizagi.getTemplate("bizagi.reporting.report")+"#bz-rp-exportexcel"}},renderContent:function(){var t=this,e=t.getTemplate("main");return t.content=$.tmpl(e),$.when(t.loadComponents()).pipe((function(){if($.isEmptyObject(t.model))t.renderMessage(1);else{var e="filters="+JSON.stringify(t.model);t.drawReport(e)}return t.content}))},loadComponents:function(){return this._super(),$.when(this.loadDimensionsComponent(this.process,"getSystemDimensions"))},postRender:function(){this.activateTab("bamresourcemonitorworkinprogressuser"),this.callModalWindow()},getDetailListObject:function(t){this.setReportParams(t,this.model);var e=t.series.field.toLowerCase(),i=t.dataItem.guidTask,n=t.dataItem.id,s={detailList:{reportName:this.reportName,columnName:e,task:i,user:n}};return this.process.process.id=t.dataItem.processId,$.extend({},this.process,s)},drawReport:function(t){var e=this;e.setFiltersForCustomRPComp(),$.when(e.services.getResourceMonitorWorkInProgressPerUser(t)).done((function(t){if(t.users.length){var i=e.getTemplate("exportexcel"),n=e.groupDataChart(t.users),s=$(".bz-rp-bam-resourcemonitor-workinprogressuser-charts",e.content).empty();$.isEmptyObject(n)||(s.append($.tmpl(i,{},{getReportExcelUrl:e.getReportExcelUrl("bam.resources.user"),showExcelIcon:!e.device||"desktop"==e.device.toLowerCase()})),$.each(n,(function(t,i){e.drawCharts(i,s)})))}else{var r=e.components.dimension.dimensions.length?2:1;e.renderMessage(r)}}))},excecuteFilterChange:function(){var t="filters="+JSON.stringify(this.model);this.drawReport(t)},drawCharts:function(t,e){var i=this.getTemplate("chart");e.append($.tmpl(i,t[0]));var n={dataSource:{data:t},legend:{position:"top"},seriesDefaults:{tooltip:{visible:!1},type:"bar"},series:[{field:"onTime",name:this.getResource("reports-general-ontime-label"),color:"#8bbc21"},{field:"onRisk",name:this.getResource("reports-general-onrisk-label"),color:"#FFCF40"},{field:"overdue",name:this.getResource("reports-general-overdue-label"),color:"#FF4040"}],categoryAxis:{field:"fieldName",reverse:!0}};$.extend(n,this.calculateGraphHeight(t.length));var s=this.graphics.getDataVizObject(n);$(".bz-rp-chart",e).last().kendoChart(s)},groupDataChart:function(t){for(var e,i={},n=t.length;--n>=0;)e="-"+t[n].id+"-",t[n].fieldName=t[n].processName+" - "+t[n].taskName,"object"==_typeof(i[e])?i[e].push(t[n]):i[e]=new Array(t[n]);return i},renderMessage:function(t){var e=this.getTemplate("message");$(".bz-rp-bam-resourcemonitor-workinprogressuser-charts",this.content).html($.tmpl(e,{msg:t}))},getReportExcelUrl:function(t){var e=$.extend({},this.taskGuid,this.model),i="reportName="+t+"&filters="+JSON.stringify(e)+"&user="+bizagi.currentUser.idUser+"&xsrf="+bizagi.getXSRFToken();return this.services.getExportExcelUrl(i)}}),bizagi.reporting.report.bamresourcemonitorworkinprogressuser.extend("bizagi.reporting.report.bamresourcemonitorworkinprogressteam",{},{init:function(t){this._super(t);var e=t.myTeam.id,i=t.myTeam.guid,n=t.myTeam.items;$.isEmptyObject(t.filters)&&(this.model={dimension:[{id:e,guid:i,values:n,includeEmptyValues:!1,type:"system"}]}),this.setReportNames("ResourceBAM","bamresourcemonitorworkinprogressteam")},renderContent:function(){var t=this,e=t.getTemplate("main");return t.content=$.tmpl(e),$.when(t.loadComponents()).pipe((function(){var e="filters="+JSON.stringify(t.model);return t.drawReport(e),t.content}))},drawReport:function(t){var e=this;e.setFiltersForCustomRPComp(),$.when(e.services.getResourceMonitorWorkInProgressPerUser(t)).done((function(t){if(t.users.length){var i=e.getTemplate("exportexcel"),n=e.groupDataChart(t.users),s=$(".bz-rp-bam-resourcemonitor-workinprogressuser-charts",e.content).empty();$.isEmptyObject(n)||(s.append($.tmpl(i,{},{getReportExcelUrl:e.getReportExcelUrl("bam.resources.myteam"),showExcelIcon:!e.device||"desktop"==e.device.toLowerCase()})),$.each(n,(function(t,i){e.drawCharts(i,s)})))}else{var r=e.components.dimension.dimensions.length?2:1;e.renderMessage(r)}}))},postRender:function(){this.activateTab("bamresourcemonitorworkinprogressteam"),this.callModalWindow()},getReportExcelUrl:function(t){var e=bizagi.clone(this.model),i=$.extend({},this.taskGuid,e);i.dimension=this._getDimensionIds(i);var n="reportName="+t+"&filters="+JSON.stringify(i)+"&user="+bizagi.currentUser.idUser+"&xsrf="+bizagi.getXSRFToken();return this.services.getExportExcelUrl(n)},_getDimensionIds:function(t){return t.dimension.map((function(t){return t.values=t.values.map((function(t){return{id:t.id}})),t}))}}),bizagi.reporting.report.extend("bizagi.reporting.report.sensors",{},{init:function(t){this._super(t),this.view="process.stopwatch",this.total=0,this.acttab="stopwatch",this.counter={sensor:{type:"counter",caseBased:!0}},this.stopwatch=-1,this.allSensors=[],this.dspSensors=[],this.cleanReferrerParams()},getFiltersObject:function(){return{process:{},dimension:[],time:{}}},initializeTemplates:function(){return{main:bizagi.getTemplate("bizagi.reporting.report.sensors")+"#bz-rp-sensors-main",list:bizagi.getTemplate("bizagi.reporting.report.sensors")+"#bz-rp-sensors-list",summaryAct:bizagi.getTemplate("bizagi.reporting.report.sensors")+"#bz-rp-sensors-counters-actdate",summaryCrt:bizagi.getTemplate("bizagi.reporting.report.sensors")+"#bz-rp-sensors-counters-crtdate",countdiagram:bizagi.getTemplate("bizagi.reporting.report.sensors")+"#bz-rp-sensors-counters-countsgraph",acttrend:bizagi.getTemplate("bizagi.reporting.report.sensors")+"#bz-rp-sensors-counters-acttrend",processview:bizagi.getTemplate("bizagi.reporting.report.sensors")+"#bz-rp-sensors-processview",stopwatches:bizagi.getTemplate("bizagi.reporting.report.sensors")+"#bz-rp-sensors-stopwatches",counters:bizagi.getTemplate("bizagi.reporting.report.sensors")+"#bz-rp-sensors-counters",countersdata:bizagi.getTemplate("bizagi.reporting.report.sensors")+"#bz-rp-sensors-counters-data",summaryCycleTime:bizagi.getTemplate("bizagi.reporting.report.sensors")+"#bz-rp-sensors-stopwatches-cycletimesummary",summayLvService:bizagi.getTemplate("bizagi.reporting.report.sensors")+"#bz-rp-sensors-stopwatches-lvservicesummary",durationHistogram:bizagi.getTemplate("bizagi.reporting.report.sensors")+"#bz-rp-sensors-stopwatches-durationhistogram",durationTrend:bizagi.getTemplate("bizagi.reporting.report.sensors")+"#bz-rp-sensors-stopwatches-durationtrend",actVsClose:bizagi.getTemplate("bizagi.reporting.report.sensors")+"#bz-rp-sensors-stopwatches-actvsclose"}},renderContent:function(){var t=this,e=t.getTemplate("main");return t.content=$.tmpl(e),$.when(t.loadComponents()).pipe((function(){return t.total&&(t.renderProcessList(),t.renderProcessView(),t.drawReport()),t.content}))},postRender:function(){this.eventsHandlers(),this.appendTooltip(),this.setColumnsSize()},getDetailListObject:function(t){var e="dataViz"===t.dtlType?this.getGraphDtlObject(t):this.getSensorDtlObject(t);return e||!1},getGraphDtlObject:function(t){var e=t.sender.options.chartName;return"Sensors.Process.CounterSummary"===e&&{sensor:{id:t.dataItem.id,type:t.sender.options.detailList.type,caseBased:t.sender.options.detailList.caseBased},detailList:{reportName:e}}},getSensorDtlObject:function(t){return{sensor:t.sensor,detailList:t.detailList}},excecuteFilterChange:function(){var t="filters="+JSON.stringify(this.model);this.drawReport(t)},drawReport:function(){this.setFiltersForCustomRPComp(),"counter"===this.view||"process.counter"===this.view?this.renderCounters():"stopwatch"!==this.view&&"process.stopwatch"!==this.view||this.renderStopwatchData()},loadComponents:function(){var t=this,e=t.getTemplate("component"),i=$.tmpl(e,{components:t.jCMP});return t.content.prepend(i),t.loadDetailListComponent(),$.when(t.services.getSensorsList()).pipe((function(e){return t.allSensors=e,t.total=t.allSensors.processes.length,t.total&&(t.loadCustomReportsComponent(),t.model.process.id||t.updateModel(e.processes[0].id)),t.loadDimensionsComponent(t.getProcessObject(),"getSensorsDimensions")})).pipe((function(){return t.loadTimeComponent()}))},renderProcessView:function(){var t=this.getTemplate("processview"),e=this.getTemplateComponent(this.content,"sensors-processview"),i=$.tmpl(t);e.html(i)},renderProcessList:function(){var t=this.getTemplate("list");$("#bz-rp-reports-sensors-list",this.content).html($.tmpl(t,this.allSensors,this.model.process))},renderCounters:function(){var t=this.getTemplate("counters");this.getTemplateComponent(this.content,"sensors-content").html($.tmpl(t,{caseBased:this.counter.sensor.caseBased})),this.renderCountersData()},renderCountersData:function(){var t=this,e=t.getCounterFilter();$.when(t.services.getCounterSummary(e)).done((function(i){var n=t.getTemplate("countersdata");t.getTemplateComponent(t.content,"sensors-counter-data").html($.tmpl(n)),t.renderCounterSummary(e,i),t.updateTables(),"process.counter"===t.view?t.paintCountDiagram(i):"counter"===t.view&&t.paintActivationTrend(e)}))},renderStopwatchData:function(){var t=this,e=t.getTemplate("stopwatches"),i=t.getTemplateComponent(t.content,"sensors-content").empty();$.when(t.renderStopwatchTables()).done((function(){i.html($.tmpl(e)),t.renderStopwatchGraphs()}))},updateTables:function(){var t=this,e=$(".table-wrapper",t.content).length;!e&&$(window).width()<1067?$("table.responsive",t.content).each((function(e,i){t.splitTable($(i))})):e&&$(window).width()>1067&&$("table.responsive",t.content).each((function(e,i){t.unsplitTable($(i))}))},splitTable:function(t){t.wrap("<div class='table-wrapper' />");var e=t.clone();e.find("td:not(:first-child), th:not(:first-child)").css("display","none"),e.removeClass("responsive"),t.closest(".table-wrapper").append(e),e.wrap("<div class='pinned' />"),t.wrap("<div class='scrollable' />")},unsplitTable:function(t){t.closest(".table-wrapper").find(".pinned").remove(),t.unwrap(),t.unwrap()},renderStopwatchGraphs:function(){var t=this;if("stopwatch"===t.view){var e="filters="+JSON.stringify($.extend({},t.model,{sensor:{id:t.stopwatch,type:"stopwatch"}}));$.when(t.services.getSwDurationHistogram(e),t.services.getSwDurationTrend(e)).done((function(e,i){t.paintDurationHistogram(e[0]),t.paintDurationTrend(i[0]),t.paintActivationVsClosing(i[0])}))}},renderStopwatchTables:function(){var t=this,e=$.Deferred(),i={},n={};"process.stopwatch"===t.view?n=i=$.extend({},t.model,{sensor:{}}):(i=$.extend({},t.model,{sensor:{id:t.stopwatch,type:"stopwatch",caseBased:!0}}),n=$.extend({},t.model,{sensor:{id:t.stopwatch,type:"stopwatch"}}));var s="filters="+JSON.stringify(i),r="filters="+JSON.stringify(n);return bizagi.util.startLoading(),$.when(t.services.getCycleTimeSummary(s),t.services.getLvSeviceSummary(r)).done((function(i,n){e.resolve(),t.renderLvServiceSummary(n[0]),t.renderCycleTimeSummary(i[0]),t.updateTables()})).always(bizagi.util.stopLoading.bind(null,void 0)),e},renderCycleTimeSummary:function(t){var e=this.getTemplate("summaryCycleTime"),i=this.getTemplateComponent(this.content,"sensors-stopwatch-cycletimesummary"),n={day:this.getResource("reports-general-day").toUpperCase().slice(0,1),hour:this.getResource("reports-general-hour").toUpperCase().slice(0,1),minute:this.getResource("reports-general-minute").toUpperCase().slice(0,1),getReportExcelUrl:this.getReportExcelUrl("sensor.stopwatch.summary"),showExcelIcon:!this.device||"desktop"==this.device.toLowerCase()};i.append($.tmpl(e,t,n))},renderLvServiceSummary:function(t){var e=this.getTemplate("summayLvService"),i=this.getTemplateComponent(this.content,"sensors-stopwatch-lvservicesummary"),n={getReportExcelUrl:this.getReportExcelUrl("sensor.stopwatch.levelofservice"),showExcelIcon:!this.device||"desktop"==this.device.toLowerCase()};i.html($.tmpl(e,t,n))},renderCounterSummary:function(t,e){var i=this.getTemplateComponent(this.content,"sensors-counters-summary"),n=this.counter.sensor.caseBased?this.getTemplate("summaryCrt"):this.getTemplate("summaryAct"),s={getReportExcelUrl:this.getReportExcelUrl("sensor.counters.summary"),showExcelIcon:!this.device||"desktop"==this.device.toLowerCase()};i.html($.tmpl(n,e,s))},paintDurationTrend:function(t){var e=this.getTemplate("durationTrend"),i=new Date(this.model.time.dateFrom),n=new Date(this.model.time.dateTo),s="",r=[],o=this.getTemplateComponent(this.content,"sensors-stopwatch-durationtrend");switch(o.html($.tmpl(e)),t.range){case"Days":for(s="MM/dd";i<=n;i.setDate(i.getDate()+1))r.push(this.getDateRange(t.durationTrend,i,"durationDays","d"));break;case"Months":for(s="MM/yy";i<=n;i.setMonth(i.getMonth()+1))r.push(this.getDateRange(t.durationTrend,i,"durationDays","m"));break;case"Years":for(s="yyyy";i<=n;i.setFullYear(i.getFullYear()+1))r.push(this.getDateRange(t.durationTrend,i,"durationDays","y"))}var a={dataSource:{data:r},seriesDefaults:{tooltip:{visible:!0,template:"#= kendo.format('{0:"+s+"}', category) #, #=value#"}},series:[{type:"line",field:"value",categoryField:"date",name:this.getResource("bz-rp-sensors-stopwatches-drttrend-name")}],categoryAxis:{baseUnit:t.range?t.range.toLowerCase()+"s":"",field:"date",labels:{format:s,padding:{left:-10}}}};$.extend(!0,a,this.setLabelSteps(r.length));var h=this.graphics.getDataVizObject(a);o.find(".bz-rp-chart").kendoChart(h)},paintActivationVsClosing:function(t){var e=this.getTemplate("actVsClose"),i=new Date(this.model.time.dateFrom),n=new Date(this.model.time.dateTo),s="",r=[],o=this.getTemplateComponent(this.content,"sensors-stopwatch-actvscls");switch(o.html($.tmpl(e)),t.range){case"Days":for(s="MM/dd";i<=n;i.setDate(i.getDate()+1))r.push(this.getActivationVsClosingData(t.activationClosingTrend,i,"d"));break;case"Months":for(s="MM/yy";i<=n;i.setMonth(i.getMonth()+1))r.push(this.getActivationVsClosingData(t.activationClosingTrend,i,"m"));break;case"Years":for(s="yyyy";i<=n;i.setFullYear(i.getFullYear()+1))r.push(this.getActivationVsClosingData(t.activationClosingTrend,i,"y"))}var a={dataSource:{data:r},seriesDefaults:{tooltip:{visible:!0,template:"#= kendo.format('{0:"+s+"}', category) #, #=value#"},labels:{visible:!1,background:"none"}},series:[{type:"line",field:"activations",categoryField:"date",name:this.getResource("bz-rp-sensors-stopwatches-actvsclose-name1")},{type:"line",field:"closings",categoryField:"date",name:this.getResource("bz-rp-sensors-stopwatches-actvsclose-name2")}],categoryAxis:{baseUnit:t.range?t.range.toLowerCase()+"s":"",field:"date",labels:{format:s,padding:{left:-10}}}};$.extend(!0,a,this.setLabelSteps(r.length));var h=this.graphics.getDataVizObject(a);o.find(".bz-rp-chart").kendoChart(h)},getActivationVsClosingData:function(t,e,i){for(var n={activations:0,closings:0,date:e=this.getFormattedDate(e,i,!1)},s=0,r=t.length;s<r;s++)e===this.getFormattedDate(t[s].date,i,!0)&&(n.activations=t[s].activations,n.closings=t[s].closings);return n},paintActivationTrend:function(t){var e=this,i=e.getTemplateComponent(e.content,"sensors-countersgraph"),n=e.model.time.dateTo,s=e.model.time.dateFrom,r=e.getTemplate("acttrend"),o=$.tmpl(r);i.empty().append(o),$.when(e.services.getCounterTrend(t)).pipe((function(t){var i=new Date(s),r=new Date(n),o="",a=[];switch(t.scale){case"DAY":for(o="MM/dd";i<=r;i.setDate(i.getDate()+1))a.push(e.getDateRange(t.rows,i,"activations","d"));break;case"MONTH":for(o="MM/yy";i<=r;i.setMonth(i.getMonth()+1))a.push(e.getDateRange(t.rows,i,"activations","m"));break;case"YEAR":for(o="yyyy";i<=r;i.setFullYear(i.getFullYear()+1))a.push(e.getDateRange(t.rows,i,"activations","y"))}var h={dataSource:{data:a},seriesDefaults:{tooltip:{visible:!0,template:"#= kendo.format('{0:"+o+"}', category) #, #=value#"}},series:[{type:"line",field:"value",categoryField:"date",name:e.getResource("bz-rp-sensors-counters-countertrend-name")}],categoryAxis:{baseUnit:t.scale.toLowerCase()+"s",field:"date",labels:{format:o,padding:{left:-10}}}};return $.extend(!0,h,e.setLabelSteps(a.length)),e.graphics.getDataVizObject(h)})).done((function(t){i.find(".bz-rp-chart").kendoChart(t)})).fail((function(t){e.setNoDataAvailableLabel(i)}))},paintDurationHistogram:function(t){var e=this.getTemplate("durationHistogram"),i=this.getTemplateComponent(this.content,"sensors-stopwatch-durationhistogram");if(i.html($.tmpl(e)),t.items.length){var n=this.getDurationtHistogramData(t),s={dataSource:{data:n.items,sort:{field:"days",dir:"asc"}},seriesDefaults:{type:"area"},series:[{field:"stopwatches",name:this.getResource("bz-rp-sensors-stopwatches-drthistogram-name")}],categoryAxis:{notes:{icon:{visible:!1},label:{visible:!1},line:{dashType:"dashDot",width:4,color:"red",length:400},data:[{value:n.linePosition}]},field:"days"}},r=this.graphics.getDataVizObject(s);i.find(".bz-rp-chart").kendoChart(r)}else this.setNoDataAvailableLabel(i)},getDurationtHistogramData:function(t){for(var e=t.expectedDuration,i=t.items,n=i.length,s=i.splice(15,n-15),r=0,o=0,a=s.length;o<a;o++)i[14].cases+=s[o].stopwatches;for(o=0,a=i.length;o<a;o++){if(i[o].days===e){r=o;break}if(i[o].days>e){var h=(i[(r=o)-1].stopwatches+i[r].stopwatches)/2;i.splice(o,0,{stopwatches:h,days:e});break}}return n>=15&&(i[14].days="Next Days"),{linePosition:r,items:i}},getCounterFilter:function(){var t=$.extend({},this.counter,this.model);return"filters="+JSON.stringify(t)},getProcessObject:function(){return{process:this.model.process}},loadSensorsDimensions:function(t){var e=this,i=e.getTemplateComponent(e.content,"filters-dimension");return $.when(e.services.getSensorsDimensions(t)).pipe((function(t){e.components.initDimensionsComponent(i,t,e.getProcessObject(),e.model.dimension).subscribe("filterbydimension",(function(t,i){e.model.dimension=i;var n="filters="+JSON.stringify(e.model);e.drawReport(n)}))}))},refreshProcessView:function(){var t=$("ul.ui-bizagi-wp-widget-reports-menu",this.content);this.view="process."+this.acttab,this.counter.sensor={type:this.counter.sensor.type,caseBased:this.counter.sensor.caseBased},this.stopwatch=-1,t.removeClass("bz-rp-disabled"),this.drawReport()},refreshSensorsView:function(t,e){$("ul.ui-bizagi-wp-widget-reports-menu",this.content).addClass("bz-rp-disabled"),"counter"===e?(this.counter.sensor.id=t,this.view="counter"):"stopwatch"===e&&(this.stopwatch=t,this.view="stopwatch"),this.drawReport()},getDateRange:function(t,e,i,n){for(var s={value:0,date:e=this.getFormattedDate(e,n,!1)},r=0,o=t.length;r<o;r++)e===this.getFormattedDate(t[r].date,n,!0)&&(s.value=t[r][i]);return s},getFormattedDate:function(t,e,i){if(i)switch(e){case"d":return t.month+"/"+t.day+"/"+t.year;case"m":return t.month+"/"+t.year;case"y":return t.year}else switch(e){case"d":return t.getMonth()+1+"/"+t.getDate()+"/"+t.getFullYear();case"m":return t.getMonth()+1+"/"+t.getFullYear();case"y":return t.getFullYear()}},paintCountDiagram:function(t){var e=t.counters.length,i=this.getTemplateComponent(this.content,"sensors-countersgraph"),n=this.getTemplate("countdiagram");if(i.html($.tmpl(n)),e){for(var s=[],r=0;r<e;r+=1)s.push({serie:"",categoryAxis:"",id:""}),void 0!==t.counters[r].percentage?s[r].categoryAxis=t.counters[r].name+" ("+t.counters[r].percentage+")":s[r].categoryAxis=t.counters[r].name,s[r].serie=t.counters[r].instances,s[r].id=t.counters[r].id;var o={dataSource:{data:s},seriesDefaults:{type:"column"},chartName:"Sensors.Process.CounterSummary",detailList:{type:"counter",caseBased:!0},series:[{field:"serie",name:this.getResource("bz-rp-sensors-counters-countsdiagram-name"),color:"#8bbc21"}],categoryAxis:{field:"categoryAxis"}},a=this.graphics.getDataVizObject(o);i.find(".bz-rp-chart").kendoChart(a)}else this.setNoDataAvailableLabel(i)},highlightItem:function(t){$("#bz-rp-sensors-processlist .bz-rp-sensors-sltitem",this.content).removeClass("bz-rp-sensors-sltitem"),t.addClass("bz-rp-sensors-sltitem")},updateModel:function(t){this.model.dimension=[],this.model.process.id=t},eventsHandlers:function(){var t=this,e=$("#bz-rp-sensors-processlist div.bz-rp-sensors-sltitem",t.content).parent();$("#bz-rp-sensors-processlist",t.content).on("click",".bz-rp-sensors-processlist-row",(function(i){var n=$(this).parent(),s=n.data("id");n.find("ul").slideToggle("fast",(function(){"none"===$(this).css("display")?n.find("i").removeClass("bz-rp-sensors-open"):n.find("i").addClass("bz-rp-sensors-open")})),t.highlightItem($(this)),e.data("id")!==s?(e.find("ul").slideUp("fast"),e.find("i").removeClass("bz-rp-sensors-open"),t.updateModel(s),t.refreshProcessView(),t.refreshDimensions(t.getProcessObject()),e=n):t.refreshProcessView()})),$(".bz-rp-reports-sensors-header button.bz-rp-sensors-button-edit",t.content).on("click",(function(e){t.loadReport("sensorsedt")})),$("#bz-rp-sensors-processlist ul",t.content).on("click","li",(function(e){e.stopPropagation();var i=$(this);t.highlightItem(i),t.refreshSensorsView(i.data("id"),i.data("type"))})),$("#bz-rp-sensors-processview li",t.content).on("click",(function(e){var i=$(this);i.hasClass("active")||(t.acttab=i.data("sensor"),t.view="process."+t.acttab,t.drawReport(),i.siblings("li").removeClass("ui-bizagi-wp-widget-reports-menu-active").end().addClass("ui-bizagi-wp-widget-reports-menu-active"))})),$("#bz-rp-sensors-content",t.content).on("click","#bz-rp-sensors-counters-cbcontainer li",(function(e){e.stopPropagation();var i=$(this),n=($(e.target),i.find("input[type=radio]"));i.closest("ul").find("li input[type=radio]").attr("checked",!1),n.prop("checked",!0),n.attr("checked",!0),t.counter.sensor.caseBased="crtdate"===n.data("timerange"),t.renderCountersData()})),t.bindDtlSummaryEvents(),$("#bz-rp-sensors-content",t.content).on("click",".bz-rp-sensors-summary tr > td",(function(i){if(i.stopPropagation(),"process.stopwatch"===t.view||"process.counter"===t.view){var n=$(this).parent(),s=n.data("id"),r=n.closest("table").data("type");t.refreshSensorsView(s,r);var o=e.find("li[data-type="+r+"][data-id="+s+"]");e.find("ul").slideDown(),t.highlightItem(o)}}))},getReportExcelUrl:function(t){var e="reportName="+(t=t||"")+"&filters=",i=$.extend({},this.model,{sensor:{}});if(-1!==this.view.indexOf("counter")){var n=this.counter.sensor.caseBased;i.sensor={type:"counter",caseBased:n}}return e+=JSON.stringify(i)+"&user="+bizagi.currentUser.idUser+"&xsrf="+bizagi.getXSRFToken(),this.services.getExportExcelUrl(e)},bindDtlSummaryEvents:function(){var t=this;$("#bz-rp-sensors-content",t.content).on("click","#bz-rp-sensors-stopwatches-cycletimesummary .bz-rp-sensors-detaillist",(function(e){e.stopPropagation();var i=$(this),n={detailList:{},sensor:{}},s=i.closest("tr").data("id"),r=i.closest("table").data("type"),o="Sensors.Stopwatch.CycleTimeSummary",a=i.parent().data("column");n.detailList=a?{columnName:a,reportName:o}:{reportName:o},n.sensor={id:s,type:r},n.dtlType="sensors",t.callDetailList(n)})),$("#bz-rp-sensors-content",t.content).on("click","#bz-rp-sensors-counters-summary .bz-rp-sensors-detaillist",(function(e){e.stopPropagation();var i=$(this),n=i.closest("tr").data("id");i.closest("table").data("type");t.callDetailList({dtlType:"sensors",sensor:{id:n,type:"counter",caseBased:!0},detailList:{reportName:"Sensors.Process.CounterSummary"}})})),$("#bz-rp-sensors-content",t.content).on("click","#bz-rp-sensors-stopwatches-levelofservice .bz-rp-sensors-detaillist",(function(e){e.stopPropagation();var i=$(this),n=i.closest("tr").data("id"),s=i.closest("table").data("type"),r=i.parent().data("daycount");t.callDetailList({dtlType:"sensors",sensor:{id:n,type:s},detailList:{reportName:"Sensors.Stopwatch.CycleTimeSummary",dayCount:r}})}))},setColumnsSize:function(){this.setColumnsWidth()},refresh:function(){var t=this;t.refreshTimeout&&clearTimeout(t.refreshTimeout),t.refreshTimeout=setTimeout((function(){delete t.refreshTimeout,t.setColumnsSize(),t.updateTables(),$(".bz-rp-chart").each((function(){var t=$(this).data("kendoChart");t&&t.redraw()}))}),150)},appendTooltip:function(){$("#bz-rp-sensors-processview",this.content).tooltip({items:".bz-rp-summary-title-icon",tooltipClass:"biz-rp-tooltip"})}}),bizagi.reporting.report.extend("bizagi.reporting.report.sensorsedt",{},{init:function(t){this._super(t),this.allSensors=[],this.dspSensors=[],this.cacheId=-999,this.swStart=0,this.swEnd=0,this.cntGuid=0,this.FROM_SECTION="SENSORS",this.cleanReferrerParams()},getFiltersObject:function(){return{process:{}}},initializeTemplates:function(){return{main:bizagi.getTemplate("bizagi.reporting.report.sensorsedt")+"#bz-rp-sensorsedt-main",list:bizagi.getTemplate("bizagi.reporting.report.sensorsedt")+"#bz-rp-sensorsedt-list",newcounter:bizagi.getTemplate("bizagi.reporting.report.sensorsedt")+"#bz-rp-sensorsedt-countertable-create",newstopwatch:bizagi.getTemplate("bizagi.reporting.report.sensorsedt")+"#bz-rp-sensorsedt-stopwatchtable-create",stopwatchtooltip:bizagi.getTemplate("bizagi.reporting.report.sensorsedt")+"#bz-rp-sensorsedt-stopwatchtooltip",errormsg:bizagi.getTemplate("bizagi.reporting.report.sensorsedt")+"#bz-rp-sensorsedt-errormsg"}},renderContent:function(){var t=this,e=t.getTemplate("main");return t.content=$.tmpl(e),t.$processViewer=$(".bz-rp-processviewer-canvas",t.content),$.when(t.loadComponents(),t.services.getSensorsList()).pipe((function(e,i){return t.allSensors=i[0].processes,t.drawReport(),t.content}))},postRender:function(){this.tooltipEvents(),this.eventsHandler(),this.setColumnsSize()},loadComponents:function(){return this.loadProcessesVersionComponent(this.FROM_SECTION)},drawReport:function(){this.enableCreation(),this.drawProcessModel(),this.renderSensorsList()},renderSensorsList:function(t){var e=t||{name:"",type:""},i=this.getTemplate("list"),n=this.model.process,s=this.getSensorsByProcessId(n);this.dspSensors=void 0!==s?s.sensors:[],$("#bz-rp-reports-sensors-create ul",this.content).remove(),$("#bz-rp-reports-sensors-list",this.content).html($.tmpl(i,s,e))},drawProcessModel:function(){this.$processViewer.data("sensor","none"),this.renderProcessViewer(this.$processViewer)},setColumnsSize:function(){this.setColumnsWidth()},getSensorsByProcessId:function(t){return this.allSensors.filter((function(e,i){return e.id===t.id}))[0]},getSensorById:function(t){return this.dspSensors.filter((function(e,i){return e.id===t}))[0]},toggleEdition:function(t){t.find(".bz-rp-sensors-form").toggleClass("bz-rp-form-edition").toggleClass("bz-rp-form-readonly")},applyEditionForCounters:function(t){var e=this,i=t.find(".bz-rp-sensors-form").find("input, textarea"),n=t.data("id"),s=e.cntGuid?e.cntGuid:t.data("guid"),r=i[0].value,o=i[1].value,a=i[2].value;if(e.isValidForm(i)){JSON.stringify({id:n,name:r});var h={id:n,name:r,displayName:o,description:a,guidTask:s},l="sensor="+JSON.stringify(h);$.when(e.services.updateCounter(l)).done((function(t){var n=$(i[0]),s=n.siblings(".bz-rp-errormsg");if(!0!==t.result){var o=e.getResource("bz-rp-sensorsedt-formvalidation-rptcounter");e.showErrorMessage(n,s,o)}else e.removeErrorMessage(n,s),e.cntGuid=0,e.$processViewer.data("sensor","none"),e.enableCreation(),e.resetSensorsList({name:r,type:"counter"})}))}},applyEditionForStopwatches:function(t){var e=this,i=t.find(".bz-rp-sensors-form").find("input, textarea"),n=i[0].value,s=t.data("id"),r=i[1].value,o=e.swStart?e.swStart:t.data("guidfrom"),a=e.swEnd?e.swEnd:t.data("guidto"),h=i[2].value,l=i[3].value,c=i[4].value,d=i[5].value;if(e.isValidForm(i)){JSON.stringify({id:s,name:n});var u={id:s,name:n,displayName:r,description:h,guidTaskFrom:o,guidTaskTo:a,slaDate:{days:l,hours:c,minutes:d}},p="sensor="+JSON.stringify(u);$.when(e.services.updateStopwatch(p)).done((function(t){var s=$(i[0]),r=s.siblings(".bz-rp-errormsg");if(!0!==t.result){var o=e.getResource("bz-rp-sensorsedt-formvalidation-rptstopwatch");e.showErrorMessage(s,r,o)}else e.removeErrorMessage(s,r),e.swStart=0,e.swEnd=0,e.$processViewer.data("sensor","none").processviewer("unSelectAllShapes"),e.enableCreation(),e.resetSensorsList({name:n,type:"stopwatch"})}))}},resetForm:function(t){var e=$(".bz-rp-sensors-form",t);e.find(".bz-rp-errormsg").empty(),e[0].reset()},appendForm:function(t){var e=this.getTemplate(t),i=$("#bz-rp-reports-sensors-create > form",this.content);return i.html($.tmpl(e)),i},resetSensorsList:function(t){var e=this;$.when(e.services.getSensorsList()).done((function(i){e.allSensors=i.processes,e.renderSensorsList(t)}))},createCounter:function(t){var e=this,i=$("#bz-rp-reports-sensors-create form",e.content),n=i.find("input, textarea"),s=n[0].value,r=n[1].value,o=n[2].value;if(e.isValidForm(n)){JSON.stringify({name:s});var a={name:s,displayName:r,description:o,guidTask:t},h="sensor="+JSON.stringify(a);$.when(e.services.addCounter(h)).done((function(t){var r=$(n[0]),o=r.siblings(".bz-rp-errormsg");if(!0!==t.result){var a=e.getResource("bz-rp-sensorsedt-formvalidation-rptcounter");e.showErrorMessage(r,o,a)}else e.removeErrorMessage(r,o),i.empty(),e.$processViewer.data("sensor","none"),e.cacheId=-999,e.resetSensorsList({name:s,type:"counter"})}))}},createStopwatch:function(t,e){var i=this,n=$("#bz-rp-reports-sensors-create form",i.content),s=n.find("input, textarea"),r=s[0].value,o=s[1].value,a=s[2].value,h=s[3].value,l=s[4].value,c=s[5].value;if(i.isValidForm(s)){JSON.stringify({name:r});var d={name:r,displayName:o,description:a,guidTaskFrom:t,guidTaskTo:e,slaDate:{days:h,hours:l,minutes:c}},u="sensor="+JSON.stringify(d);$.when(i.services.addStopwatch(u)).done((function(t){var e=$(s[0]),o=e.siblings(".bz-rp-errormsg");if(!0!==t.result){var a=i.getResource("bz-rp-sensorsedt-formvalidation-rptstopwatch");i.showErrorMessage(e,o,a)}else i.removeErrorMessage(e,o),n.empty(),i.cacheId=-999,i.$processViewer.data("sensor","none").processviewer("unSelectAllShapes"),i.resetSensorsList({name:r,type:"stopwatch"})}))}},cancelCntCreation:function(){this.cntGuid=0,$("#bz-rp-reports-sensors-create ul",this.content).remove(),this.$processViewer.data("sensor","none").processviewer("unSelectAllShapes")},cancelSwCreation:function(){this.swStart=this.swEnd=0,$("#bz-rp-reports-sensors-create ul",this.content).remove(),this.$processViewer.data("sensor","none").processviewer("unSelectAllShapes").processviewer("clearRoute")},deleteCounters:function(t){var e=this,i=e.getResource("bz-rp-sensorsedt-deleteconfirmation"),n=t.data("id");$.when(bizagi.showConfirmationBox(i,"Bizagi","warning")).done((function(){var t="id="+n;$.when(e.services.deleteCounter(t)).done((function(){"none"===e.$processViewer.data("sensor")&&e.$processViewer.processviewer("unSelectAllShapes"),e.resetSensorsList()}))}))},deleteStopwatches:function(t){var e=this,i=e.getResource("bz-rp-sensorsedt-deleteconfirmation"),n=t.data("id");$.when(bizagi.showConfirmationBox(i,"Bizagi","warning")).done((function(){var t="id="+n;$.when(e.services.deleteStopwatch(t)).done((function(){"none"===e.$processViewer.data("sensor")&&e.$processViewer.processviewer("clearRoute"),e.resetSensorsList()}))}))},isValidForm:function(t){for(var e=!0,i=0,n=t.length;i<n;i++){var s=$(t[i]).siblings(".bz-rp-errormsg"),r=!0;$(t[i]).is("input[type=text]")?this.validateRequired($(t[i]),s)&&this.validatePattern($(t[i]),s)||(r=!1):$(t[i]).is("input[type=number]")?this.validateNumber($(t[i]),s)||(r=!1):$(t[i]).is("textarea")&&(this.validateRequired($(t[i]),s)||(r=!1)),r?this.removeErrorMessage(s):e=!1}return e},validateRequired:function(t,e){var i=!0;return""===t.val()&&(i=!1,this.showErrorMessage(t,e,this.getResource("bz-rp-sensorsedt-formvalidation-required"))),i},validatePattern:function(t,e){var i=!0;return-1!==t.val().search(/[$\\@\\\#%\^\&\*\(\)\[\]\+\_\{\}\`\~\=\|]/)&&(i=!1,this.showErrorMessage(t,e,this.getResource("bz-rp-sensorsedt-formvalidation-invalidcharts"))),i},validateNumber:function(t,e){var i=!0,n=parseInt(t.val()),s=parseInt(t.prop("min")),r=parseInt(t.prop("max"));return isNaN(n)?(i=!1,this.showErrorMessage(t,e,this.getResource("bz-rp-sensorsedt-formvalidation-number"))):(n<s||n>r)&&(i=!1,this.showErrorMessage(t,e,this.getResource("bz-rp-sensorsedt-formvalidation-invalidnumber")+" "+s+" - "+r)),i},showErrorMessage:function(t,e,i){if(e.length)e.html(i);else{var n=this.getTemplate("errormsg");t.after($.tmpl(n,{message:i})),t.parent().addClass("ui-bizagi-render-control-required")}},removeErrorMessage:function(t){t.parent().removeClass("ui-bizagi-render-control-required"),t.remove()},getTooltipContent:function(t){if("stopwatch"===this.$processViewer.data("sensor")){var e=t.id,i=$(t).find(".processviewer-hotspot-label").html(),n=this.getTemplate("stopwatchtooltip");return $.tmpl(n,{guid:e,taskName:i})}return""},enableApplyButton:function(){$("#bz-rp-reports-sensors-create .bz-rp-sensors-button-apply",this.content).removeAttr("disabled")},removeCrtMsg:function(){$("#bz-rp-reports-sensors-create span.bz-rp-errormsg:first-of-type",this.content).remove()},showAllPaths:function(t,e){var i=this,n="processId="+i.model.process.id+"&taskFrom="+t+"&taskTo="+e;i.$processViewer.processviewer("clearRoute"),$.when(i.services.getAllPaths(n)).done((function(n){var s=n.paths.length;if(s)for(var r=0;r<s;r++)i.$processViewer.processviewer("drawRoute",n.paths[r].codedPath);else i.$processViewer.processviewer("drawRoute",[t,e])}))},disableCreation:function(){$("#bz-rp-reports-sensors-buttons button").attr("disabled","disabled")},enableCreation:function(){$("#bz-rp-reports-sensors-buttons button").removeAttr("disabled")},collpaseList:function(){var t=$("#bz-rp-reports-sensors-list li.bz-rp-sensors-selected",this.content);return t.removeClass("bz-rp-sensors-selected"),$(".bz-rp-sensors-form-container",t).slideUp("fast")},tooltipEvents:function(){var t=this;t.applyViewerTooltip(t.$processViewer,{}),$(document).off("click.swtooltip").on("click.swtooltip","button.bz-rp-sensors-tooltip-stopwathstarts, button.bz-rp-sensors-tooltip-stopwathends",(function(e){var i=$(this),n=i.closest(".ui-tooltip"),s=i.closest(".bz-rp-sensors-tooltip-container").data("guid");if(s!==t.swStart&&s!==t.swEnd){switch(i.data("type")){case"swstarts":t.swStart&&t.$processViewer.processviewer("unSelectShape",t.swStart),t.$processViewer.processviewer("selectShape",s),t.swStart=s;break;case"swends":t.swEnd&&t.$processViewer.processviewer("unSelectShape",t.swEnd),t.$processViewer.processviewer("selectShape",s),t.swEnd=s}0!==t.swEnd&&0!==t.swStart&&(t.enableApplyButton(),t.showAllPaths(t.swStart,t.swEnd),t.removeCrtMsg())}n.remove()}))},eventsHandler:function(){var t=this;$("#bz-rp-reports-sensors-buttons",t.content).on("click","button",(function(e){var i=$(this);t.cntGuid=0,t.swStart=0,t.swEnd=0,t.$processViewer.processviewer("unSelectAllShapes").processviewer("clearRoute"),t.collpaseList(),i.hasClass("bz-rp-sensors-button-newstopwatch")?(t.$processViewer.data("sensor","stopwatch"),t.appendForm("newstopwatch"),t.requiredHandler(t)):i.hasClass("bz-rp-sensors-button-newcounter")&&(t.$processViewer.data("sensor","counter"),t.appendForm("newcounter"),t.requiredHandler(t))})),$("#bz-rp-reports-sensors-create",t.content).on("click",".bz-rp-sensors-form-createcounter button",(function(e){var i=$(this);e.preventDefault(),i.hasClass("bz-rp-sensors-button-apply")?t.createCounter(t.cntGuid):i.hasClass("bz-rp-sensors-button-cancel")&&t.cancelCntCreation()})),$("#bz-rp-reports-sensors-create",t.content).on("click",".bz-rp-sensors-form-createstopwatch button",(function(e){var i=$(this);e.preventDefault(),i.hasClass("bz-rp-sensors-button-apply")?t.createStopwatch(t.swStart,t.swEnd):i.hasClass("bz-rp-sensors-button-cancel")&&t.cancelSwCreation()})),$("#bz-rp-reports-sensors-list",t.content).on("click",".bz-rp-sensors-list-header",(function(e){if(!$(e.target).is("button")&&"none"===t.$processViewer.data("sensor")){var i=$(this).closest("li"),n=i.data("id");t.cacheId!==n?$.when(t.collpaseList()).done(t.slideFormContainer(i)):t.slideFormContainer(i),t.cacheId=n}})),$("#bz-rp-reports-sensors-list",t.content).on("click","button",(function(e){e.preventDefault();var i=$(this),n=i.closest("li"),s=n.data("type");i.hasClass("bz-rp-sensors-button-edit")?t.editionEvent(n,s):i.hasClass("bz-rp-sensors-button-cancel")?t.cancelEvent(n,s):i.hasClass("bz-rp-sensors-button-apply")?t.applyEvent(n,s):i.hasClass("bz-rp-sensors-button-delete")&&t.deleteEvent(n,s)})),t.$processViewer.on("click",".processviewer-hotspot",(function(e){var i=$(this),n=t.$processViewer.data("sensor"),s=t.cntGuid=i.prop("id");"counter"===n&&(t.$processViewer.processviewer("unSelectAllShapes").processviewer("selectShape",s),t.enableApplyButton(),t.removeCrtMsg())})),t.$processViewer.on("pvComplete",(function(e){t.setProcessViewerHeight()})),$(".bz-rp-reports-sensors-header button.bz-rp-sensors-button-back").on("click",(function(){t.loadReport("sensors")}))},requiredHandler:function(t){$(".bz-rp-sensors-form .ui-required",t.content).on("focusout","input",(function(e){e.preventDefault();var i=$(this),n=i.siblings(".bz-rp-errormsg"),s=!0;i.is("input[type=text]")?t.validateRequired(i,n)&&t.validatePattern(i,n)||(s=!1):i.is("input[type=number]")&&(t.validateNumber(i,n)||(s=!1)),s&&t.removeErrorMessage(n)})),$(".bz-rp-sensors-form .ui-required",t.content).on("focusout","textarea",(function(e){e.preventDefault();var i=$(this),n=i.siblings(".bz-rp-errormsg");value=i.val(),""!=value&&t.removeErrorMessage(n)}))},slideFormContainer:function(t){var e=this;$(".bz-rp-sensors-form-container",t).slideToggle("fast",(function(){"none"===$(this).css("display")?t.removeClass("bz-rp-sensors-selected"):t.addClass("bz-rp-sensors-selected"),e.$processViewer.processviewer("unSelectAllShapes").processviewer("clearRoute"),t.hasClass("bz-rp-sensors-selected")&&("counter"===t.data("type")?e.$processViewer.processviewer("selectShape",t.data("guid")):"stopwatch"===t.data("type")&&e.showAllPaths(t.data("guidfrom"),t.data("guidto")))}))},editionEvent:function(t,e){"none"===this.$processViewer.data("sensor")&&("stopwatch"===e?(this.swStart=t.data("guidfrom"),this.swEnd=t.data("guidto")):this.cntGuid=t.data("guid"),this.disableCreation(),this.$processViewer.data("sensor",e),this.toggleEdition(t))},cancelEvent:function(t,e){this.$processViewer.data("sensor","none").processviewer("unSelectAllShapes"),"stopwatch"===e?(this.swStart=0,this.swEnd=0,this.showAllPaths(t.data("guidfrom"),t.data("guidto"))):(this.cntGuid=0,this.$processViewer.processviewer("selectShape",t.data("guid"))),this.enableCreation(),this.resetForm(t),this.toggleEdition(t)},applyEvent:function(t,e){"counter"===e?this.applyEditionForCounters(t):this.applyEditionForStopwatches(t)},refresh:function(){var t=this;t.refreshTimeout&&clearTimeout(t.refreshTimeout),t.refreshTimeout=setTimeout((function(){delete t.refreshTimeout,t.setColumnsSize(),t.setProcessViewerHeight(t.$processViewer)}),150)},setProcessViewerHeight:function(){var t=$(document).height(),e=this.$processViewer.offset().top;this.$processViewer.processviewer("resize",t-e-50)},deleteEvent:function(t,e){"counter"===e?this.deleteCounters(t):this.deleteStopwatches(t)}}),bizagi.reporting.component.controller("bizagi.reporting.component.customreports",{init:function(t,e,i){i=i||{},this._super(t),this.reportSet=i.info.reportSet,this.reportName=i.info.reportName,this.filters=i.filters,this.services=e,this.modal=[],this.render()},loadTemplates:function(){var t={button:bizagi.getTemplate("bizagi.reporting.component.customreports")+"#bz-rp-components-customreports-button",form:bizagi.getTemplate("bizagi.reporting.component.customreports")+"#bz-rp-components-customreports-form","modal-container":bizagi.getTemplate("bizagi.reporting.component.customreports")+"#bz-rp-components-customreports-container",message:bizagi.getTemplate("bizagi.reporting.component.customreports")+"#bz-rp-components-customreports-message"};return this._super(t)},renderComponent:function(){var t=this.getTemplate("button");return $.tmpl(t)},postRender:function(){this.eventsHandler()},appendModal:function(){if(!this.modal.length){var t=this.getTemplate("modal-container");this.modal=$.tmpl(t),this.modal.appendTo("body")}},showCustomReportsDialog:function(t){var e=this;t.dialog({resizable:!1,dialogClass:"bz-rp-components-custom-reports-dialog",modal:!0,appendTo:e.modal,title:e.getResource("bz-rp-components-customreports-title"),draggable:!1,maximize:!1,close:function(){$(this).remove()},buttons:[{text:e.getResource("confirmation-savebox-save"),click:function(t){var i=$(t.target).closest("button");t.preventDefault(),$.when(e.saveQuery()).done((function(){i.remove()}))}},{text:e.getResource("render-form-dialog-box-close"),click:function(){$(this).dialog("close")}}]})},saveQuery:function(){var t=this,e=$.Deferred(),i=$("#bz-rp-components-customereports-form",t.modal)[0].elements,n=t.getJSON(i);return t.validateFields(i)?($.when(t.services.customReportsSaveQuery(n,$(".bz-rp-components-customreports-message",t.modal))).done((function(n){!1===n.status?"filterTooLong"==n.message?(t.showMessage(t.getResource("bz-rp-components-customreports-filtertoolong"),$(i[0]).siblings(".bz-rp-messagecnt")),e.reject()):(t.showMessage(t.getResource("bz-rp-components-customreports-alreadyexist"),$(i[0]).siblings(".bz-rp-messagecnt")),e.reject()):($("#bz-rp-components-custom-reports-warpper",t.modal).remove(),$("#bz-rp-components-customreports-message",t.modal).show().append(t.getResource("bz-rp-components-customreports-sucessfulsave")),e.resolve())})),e.promise()):e.reject()},validateFields:function(t){for(var e=!0,i=0,n=t.length;i<n;i++){var s=$(t[i]).siblings(".bz-rp-messagecnt");this.validateRequired($(t[i]))?this.validateSpecialCharacters($(t[i]))?this.removeMessage(s):(e=!1,this.showMessage(this.getResource("bz-rp-components-customreports-invalidvalue"),s)):(e=!1,this.showMessage(this.getResource("bz-rp-components-customreports-required"),s))}return e},validateRequired:function(t){var e=!0;return t.attr("required")&&""===t.val()&&(e=!1),e},validateSpecialCharacters:function(t){var e=!0;return new RegExp(/^[a-zA-Z0-9- \n]*$/).test(t.val())||(e=!1),e},showMessage:function(t,e){var i=this.getTemplate("message");e.html($.tmpl(i,{message:t}))},removeMessage:function(t){$(".bz-rp-errormsg",t).remove()},setReportsFilters:function(t){this.filters=t},getJSON:function(t){var e={name:t[0].value,description:t[1].value,reportSet:this.reportSet,filterParameters:this.filters};return"parameters="+JSON.stringify(e)},eventsHandler:function(){var t=this,e=t.getTemplate("form");$("#bz-rp-custom-reports-button",t.content).on("click",(function(){var i=$.tmpl(e,{name:t.reportName});t.appendModal(),t.showCustomReportsDialog(i)}))}}),function(t,e){var i,n=window.kendo=window.kendo||{cultures:{}},s=t.extend,r=t.each,o=t.isArray,a=t.proxy,h=t.noop,l=Math,c=window.JSON||{},d={},u=/%/,p=/\{(\d+)(:[^\}]+)?\}/g,f=/(\d+(?:\.?)\d*)px\s*(\d+(?:\.?)\d*)px\s*(\d+(?:\.?)\d*)px\s*(\d+)?/i,g=/^(\+|-?)\d+(\.?)\d*$/,m="string",v={},y={},b=[].slice,w=window.Globalize;function x(){}n.version="2014.1.416",x.extend=function(t){var e,i,n=function(){},r=this,o=t&&t.init?t.init:function(){r.apply(this,arguments)};for(e in n.prototype=r.prototype,i=o.fn=o.prototype=new n,t)null!=t[e]&&t[e].constructor===Object?i[e]=s(!0,{},n.prototype[e],t[e]):i[e]=t[e];return i.constructor=o,o.extend=r.extend,o},x.prototype._initOptions=function(t){this.options=R({},this.options,t)};var _=n.isFunction=function(t){return"function"==typeof t},k=function(){this._defaultPrevented=!0},C=function(){return!0===this._defaultPrevented},S=x.extend({init:function(){this._events={}},bind:function(t,e,i){var n,s,r,o,a=this,h=_typeof(t)===m?[t]:t,l="function"===_typeof(e);if(void 0===e){for(n in t)a.bind(n,t[n]);return a}for(n=0,s=h.length;n<s;n++)t=h[n],(o=l?e:e[t])&&(i&&(r=o,(o=function(){a.unbind(t,o),r.apply(a,arguments)}).original=r),(a._events[t]=a._events[t]||[]).push(o));return a},one:function(t,e){return this.bind(t,e,!0)},first:function(t,e){var i,n,s,r=_typeof(t)===m?[t]:t,o="function"===_typeof(e);for(i=0,n=r.length;i<n;i++)t=r[i],(s=o?e:e[t])&&(this._events[t]=this._events[t]||[]).unshift(s);return this},trigger:function(t,e){var i,n,s=this._events[t];if(s){for((e=e||{}).sender=this,e._defaultPrevented=!1,e.preventDefault=k,e.isDefaultPrevented=C,i=0,n=(s=s.slice()).length;i<n;i++)s[i].call(this,e);return!0===e._defaultPrevented}return!1},unbind:function(t,e){var i,n=this._events[t];if(void 0===t)this._events={};else if(n)if(e)for(i=n.length-1;i>=0;i--)n[i]!==e&&n[i].original!==e||n.splice(i,1);else this._events[t]=[];return this}});function T(t,e){if(e)return"'"+t.split("'").join("\\'").split('\\"').join('\\\\\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t")+"'";var i=t.charAt(0),n=t.substring(1);return"="===i?"+("+n+")+":":"===i?"+e("+n+")+":";"+t+";o+="}var P=/^\w+/,A=/\$\{([^}]*)\}/g,z=/\\\}/g,D=/__CURLY__/g,E=/\\#/g,M=/__SHARP__/g,L=["","0","00","000","0000"];function I(t,e,i){return(i=(e=e||2)-(t+="").length)?L[e].substring(0,i)+t:t}function B(t){var e=t.css(n.support.transitions.css+"box-shadow")||t.css("box-shadow"),i=e&&e.match(f)||[0,0,0,0,0],s=l.max(+i[3],+(i[4]||0));return{left:-i[1]+s,right:+i[1]+s,bottom:+i[2]+s}}function R(t){var e=1,i=arguments.length;for(e=1;e<i;e++)O(t,arguments[e]);return t}function O(t,e){var i,s,r,o,a=n.data.ObservableArray,h=n.data.DataSource,l=n.data.HierarchicalDataSource;for(i in e)s=e[i],"object"===(r=_typeof(s))&&null!==s&&s.constructor!==Array&&s.constructor!==a&&s.constructor!==h&&s.constructor!==l?s instanceof Date?t[i]=new Date(s.getTime()):_(s.clone)?t[i]=s.clone():(o=t[i],"object"===_typeof(o)?t[i]=o||{}:t[i]={},O(t[i],s)):"undefined"!==r&&(t[i]=s);return t}function N(t,e,i){for(var n in e)if(e.hasOwnProperty(n)&&e[n].test(t))return n;return void 0!==i?i:t}function V(t){return t.replace(/\-(\w)/g,(function(t,e){return e.toUpperCase()}))}i={paramName:"data",useWithBlock:!0,render:function(t,e){var i,n,s="";for(i=0,n=e.length;i<n;i++)s+=t(e[i]);return s},compile:function(e,i){var r,o,a,h=s({},this,i),l=h.paramName,c=l.match(P)[0],d=h.useWithBlock,u="var o,e=kendo.htmlEncode;";if(_(e))return 2===e.length?function(i){return e(t,{data:i}).join("")}:e;for(u+=d?"with("+l+"){":"",u+="o=",o=e.replace(z,"__CURLY__").replace(A,"#=e($1)#").replace(D,"}").replace(E,"__SHARP__").split("#"),a=0;a<o.length;a++)u+=T(o[a],a%2==0);u+=d?";}":";",u=(u+="return o;").replace(M,"#");try{return(r=new Function(c,u))._slotCount=Math.floor(o.length/2),r}catch(t){throw new Error(n.format("Invalid template:'{0}' Generated code:'{1}'",e,u))}}},function(){var t,e,i,n=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,s={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},r={}.toString;function o(t){return n.lastIndex=0,n.test(t)?'"'+t.replace(n,(function(t){var e=s[t];return _typeof(e)===m?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)}))+'"':'"'+t+'"'}"function"!==_typeof(Date.prototype.toJSON)&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?I(this.getUTCFullYear(),4)+"-"+I(this.getUTCMonth()+1)+"-"+I(this.getUTCDate())+"T"+I(this.getUTCHours())+":"+I(this.getUTCMinutes())+":"+I(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()}),"function"!==_typeof(c.stringify)&&(c.stringify=function(n,s,a){var h;if(t="",e="","number"===_typeof(a))for(h=0;h<a;h+=1)e+=" ";else _typeof(a)===m&&(e=a);if(i=s,s&&"function"!==_typeof(s)&&("object"!==_typeof(s)||"number"!==_typeof(s.length)))throw new Error("JSON.stringify");return function n(s,a){var h,l,c,d,u,p,f=t,g=a[s];if(g&&"object"===_typeof(g)&&"function"===_typeof(g.toJSON)&&(g=g.toJSON(s)),"function"===_typeof(i)&&(g=i.call(a,s,g)),(p=_typeof(g))===m)return o(g);if("number"===p)return isFinite(g)?String(g):"null";if("boolean"===p||"null"===p)return String(g);if("object"===p){if(!g)return"null";if(t+=e,u=[],"[object Array]"===r.apply(g)){for(d=g.length,h=0;h<d;h++)u[h]=n(h,g)||"null";return c=0===u.length?"[]":t?"[\n"+t+u.join(",\n"+t)+"\n"+f+"]":"["+u.join(",")+"]",t=f,c}if(i&&"object"===_typeof(i))for(d=i.length,h=0;h<d;h++)_typeof(i[h])===m&&(c=n(l=i[h],g))&&u.push(o(l)+(t?": ":":")+c);else for(l in g)Object.hasOwnProperty.call(g,l)&&(c=n(l,g))&&u.push(o(l)+(t?": ":":")+c);return c=0===u.length?"{}":t?"{\n"+t+u.join(",\n"+t)+"\n"+f+"}":"{"+u.join(",")+"}",t=f,c}}("",{"":n})})}(),function(){var e=/dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|HH|H|hh|h|mm|m|fff|ff|f|tt|ss|s|"[^"]*"|'[^']*'/g,i=/^(n|c|p|e)(\d*)$/i,s=/(\\.)|(['][^']*[']?)|(["][^"]*["]?)/g,r=/\,/g,o="en-US",a={}.toString;function h(t){if(t){if(t.numberFormat)return t;if(_typeof(t)===m){var e=n.cultures;return e[t]||e[t.split("-")[0]]||null}return null}return null}function c(t){return t&&(t=h(t)),t||n.cultures.current}n.cultures["en-US"]={name:o,numberFormat:{pattern:["-n"],decimals:2,",":",",".":".",groupSize:[3],percent:{pattern:["-n %","n %"],decimals:2,",":",",".":".",groupSize:[3],symbol:"%"},currency:{pattern:["($n)","$n"],decimals:2,",":",",".":".",groupSize:[3],symbol:"$"}},calendars:{standard:{days:{names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],namesAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],namesShort:["Su","Mo","Tu","We","Th","Fr","Sa"]},months:{names:["January","February","March","April","May","June","July","August","September","October","November","December"],namesAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},AM:["AM","am","AM"],PM:["PM","pm","PM"],patterns:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",F:"dddd, MMMM dd, yyyy h:mm:ss tt",g:"M/d/yyyy h:mm tt",G:"M/d/yyyy h:mm:ss tt",m:"MMMM dd",M:"MMMM dd",s:"yyyy'-'MM'-'ddTHH':'mm':'ss",t:"h:mm tt",T:"h:mm:ss tt",u:"yyyy'-'MM'-'dd HH':'mm':'ss'Z'",y:"MMMM, yyyy",Y:"MMMM, yyyy"},"/":"/",":":":",firstDay:0,twoDigitYearMax:2029}}},n.culture=function(t){var e,i,s=n.cultures;if(void 0===t)return s.current;(e=h(t)||s[o]).calendar=e.calendars.standard,s.current=e,w&&((i=e.numberFormat).groupSizes=i.groupSize,i.percent.groupSizes=i.percent.groupSize,i.currency.groupSizes=i.currency.groupSize)},n.findCulture=h,n.getCulture=c,n.culture(o);var d=function(t,e){return e=e||0,t=t.toString().split("e"),(t=+((t=(t=Math.round(+(t[0]+"e"+(t[1]?+t[1]+e:e)))).toString().split("e"))[0]+"e"+(t[1]?+t[1]-e:-e))).toFixed(e)},u=function(t,n,o){if(n){if("[object Date]"===a.call(t))return function(t,i,n){var s=(n=c(n)).calendars.standard,r=s.days,o=s.months;return(i=s.patterns[i]||i).replace(e,(function(e){var i;return"d"===e?i=t.getDate():"dd"===e?i=I(t.getDate()):"ddd"===e?i=r.namesAbbr[t.getDay()]:"dddd"===e?i=r.names[t.getDay()]:"M"===e?i=t.getMonth()+1:"MM"===e?i=I(t.getMonth()+1):"MMM"===e?i=o.namesAbbr[t.getMonth()]:"MMMM"===e?i=o.names[t.getMonth()]:"yy"===e?i=I(t.getFullYear()%100):"yyyy"===e?i=I(t.getFullYear(),4):"h"===e?i=t.getHours()%12||12:"hh"===e?i=I(t.getHours()%12||12):"H"===e?i=t.getHours():"HH"===e?i=I(t.getHours()):"m"===e?i=t.getMinutes():"mm"===e?i=I(t.getMinutes()):"s"===e?i=t.getSeconds():"ss"===e?i=I(t.getSeconds()):"f"===e?i=l.floor(t.getMilliseconds()/100):"ff"===e?((i=t.getMilliseconds())>99&&(i=l.floor(i/10)),i=I(i)):"fff"===e?i=I(t.getMilliseconds(),3):"tt"===e&&(i=t.getHours()<12?s.AM[0]:s.PM[0]),void 0!==i?i:e.slice(1,e.length-1)}))}(t,n,o);if("number"===_typeof(t))return function(t,e,n){var o,a,h,l,u,p,f,g,m,v,y,b,w,x,_,k,C,S,T,P,A,z=(n=c(n)).numberFormat,D=z.groupSize[0],E=z[","],M=z["."],L=z.decimals,I=z.pattern[0],B=[],R=t<0,O="",N="",V=-1;if(void 0===t)return"";if(!isFinite(t))return t;if(!e)return n.name.length?t.toLocaleString():t.toString();if(u=i.exec(e)){if(h="p"===(e=u[1].toLowerCase()),((a="c"===e)||h)&&(D=(z=a?z.currency:z.percent).groupSize[0],E=z[","],M=z["."],L=z.decimals,o=z.symbol,I=z.pattern[R?0:1]),(l=u[2])&&(L=+l),"e"===e)return l?t.toExponential(L):t.toExponential();if(h&&(t*=100),R=(t=d(t,L))<0,p=(t=t.split("."))[0],f=t[1],R&&(p=p.substring(1)),N=p,(g=p.length)>=D)for(N="",m=0;m<g;m++)m>0&&(g-m)%D==0&&(N+=E),N+=p.charAt(m);if(f&&(N+=M+f),"n"===e&&!R)return N;for(t="",m=0,v=I.length;m<v;m++)t+="n"===(y=I.charAt(m))?N:"$"===y||"%"===y?o:y;return t}if(R&&(t=-t),(e.indexOf("'")>-1||e.indexOf('"')>-1||e.indexOf("\\")>-1)&&(e=e.replace(s,(function(t){var e=t.charAt(0).replace("\\",""),i=t.slice(1).replace(e,"");return B.push(i),"??"}))),e=e.split(";"),R&&e[1])e=e[1],w=!0;else if(0===t){if(-1==(e=e[2]||e[0]).indexOf("#")&&-1==e.indexOf("0"))return e}else e=e[0];if((h=-1!=e.indexOf("%"))&&(t*=100),(a=-1!=(T=e.indexOf("$")))&&"\\"===e[T-1]&&(e=e.split("\\").join(""),a=!1),(a||h)&&(D=(z=a?z.currency:z.percent).groupSize[0],E=z[","],M=z["."],L=z.decimals,o=z.symbol),(b=e.indexOf(",")>-1)&&(e=e.replace(r,"")),x=e.indexOf("."),v=e.length,-1!=x?(f=(f=(f=t.toString().split("e"))[1]?d(t,Math.abs(f[1])):f[0]).split(".")[1]||"",C=(k=e.lastIndexOf("0")-x)>-1,S=(_=e.lastIndexOf("#")-x)>-1,m=f.length,C||S||(v=(e=e.substring(0,x)+e.substring(x+1)).length,x=-1,m=0),C&&k>_?m=k:_>k&&(S&&m>_?m=_:C&&m<k&&(m=k)),m>-1&&(t=d(t,m))):t=d(t),_=e.indexOf("#"),P=k=e.indexOf("0"),V=-1==_&&-1!=k?k:-1!=_&&-1==k?_:_>k?k:_,_=e.lastIndexOf("#"),k=e.lastIndexOf("0"),A=-1==_&&-1!=k?k:-1!=_&&-1==k?_:_>k?_:k,V==v&&(A=V),-1!=V){if(p=(N=t.toString().split("."))[0],f=N[1]||"",g=p.length,f.length,R&&-1*t>=0&&(R=!1),b)if(g===D&&g<x-P)p=E+p;else if(g>D){for(N="",m=0;m<g;m++)m>0&&(g-m)%D==0&&(N+=E),N+=p.charAt(m);p=N}for(t=e.substring(0,V),R&&!w&&(t+="-"),m=V;m<v;m++){if(y=e.charAt(m),-1==x){if(A-m<g){t+=p;break}}else if(-1!=k&&k<m&&(O=""),x-m<=g&&x-m>-1&&(t+=p,m=x),x===m){t+=(f?M:"")+f,m+=A-x+1;continue}"0"===y?(t+=y,O=y):"#"===y&&(t+=O)}if(A>=V&&(t+=e.substring(A+1)),a||h){for(N="",m=0,v=t.length;m<v;m++)N+="$"===(y=t.charAt(m))||"%"===y?o:y;t=N}if(v=B.length)for(m=0;m<v;m++)t=t.replace("??",B[m])}return t}(t,n,o)}return void 0!==t?t:""};w&&(u=function(e,i,n){return t.isPlainObject(n)&&(n=n.name),w.format(e,i,n)}),n.format=function(t){var e=arguments;return t.replace(p,(function(t,i,n){var s=e[parseInt(i,10)+1];return u(s,n?n.substring(1):"")}))},n._extractFormat=function(t){return"{0:"===t.slice(0,3)&&(t=t.slice(3,t.length-1)),t},n._activeElement=function(){try{return document.activeElement}catch(t){return document.documentElement.activeElement}},n._round=d,n.toString=u}(),function(){var e=/\u00A0/g,i=/[eE][\-+]?[0-9]+/,s=/[+|\-]\d{1,2}/,r=/[+|\-]\d{1,2}:\d{2}/,a=/^\/Date\((.*?)\)\/$/,h=/[+-]/,l=["G","g","d","F","D","y","m","T","t"],c={2:/^\d{1,2}/,3:/^\d{1,3}/,4:/^\d{4}/},d={}.toString;function u(t,e,i){return!(t>=e&&t<=i)}function p(t){return t.charAt(0)}function f(e){return t.map(e,p)}function g(t){for(var e=0,i=t.length,n=[];e<i;e++)n[e]=(t[e]+"").toLowerCase();return n}function m(t){var e,i={};for(e in t)i[e]=g(t[e]);return i}function v(t,e,i){if(!t)return null;var n,o,a,h,l,d,p,g,v,y,b,w,x,_=function(t){for(var i=0;e[I]===t;)i++,I++;return i>0&&(I-=1),i},k=function(e){var i=c[e]||new RegExp("^\\d{1,"+e+"}"),n=t.substr(B,e).match(i);return n?(n=n[0],B+=n.length,parseInt(n,10)):null},C=function(e,i){for(var n,s,r,o=0,a=e.length;o<a;o++)if(s=(n=e[o]).length,r=t.substr(B,s),i&&(r=r.toLowerCase()),r==n)return B+=s,o+1;return null},S=function(){var i=!1;return t.charAt(B)===e[I]&&(B++,i=!0),i},T=i.calendars.standard,P=null,A=null,z=null,D=null,E=null,M=null,L=null,I=0,B=0,R=!1,O=new Date,N=T.twoDigitYearMax||2029,V=O.getFullYear();for(e||(e="d"),(h=T.patterns[e])&&(e=h),a=(e=e.split("")).length;I<a;I++)if(n=e[I],R)"'"===n?R=!1:S();else if("d"===n){if(o=_("d"),T._lowerDays||(T._lowerDays=m(T.days)),null===(z=o<3?k(2):C(T._lowerDays[3==o?"namesAbbr":"names"],!0))||u(z,1,31))return null}else if("M"===n){if(o=_("M"),T._lowerMonths||(T._lowerMonths=m(T.months)),null===(A=o<3?k(2):C(T._lowerMonths[3==o?"namesAbbr":"names"],!0))||u(A,1,12))return null;A-=1}else if("y"===n){if(null===(P=k(o=_("y"))))return null;2==o&&("string"==typeof N&&(N=V+parseInt(N,10)),(P=V-V%100+P)>N&&(P-=100))}else if("h"===n){if(_("h"),12==(D=k(2))&&(D=0),null===D||u(D,0,11))return null}else if("H"===n){if(_("H"),null===(D=k(2))||u(D,0,23))return null}else if("m"===n){if(_("m"),null===(E=k(2))||u(E,0,59))return null}else if("s"===n){if(_("s"),null===(M=k(2))||u(M,0,59))return null}else if("f"===n){if(o=_("f"),x=t.substr(B,o).match(c[3]),null!==(L=k(o))&&((x=x[0].length)<3&&(L*=Math.pow(10,3-x)),o>3&&(L=parseInt(L.toString().substring(0,3),10))),null===L||u(L,0,999))return null}else if("t"===n){if(o=_("t"),v=T.AM,y=T.PM,1===o&&(v=f(v),y=f(y)),!(l=C(y))&&!C(v))return null}else if("z"===n){if(d=!0,o=_("z"),"Z"===t.substr(B,1)){if(!p)return null;S();continue}if(!(g=t.substr(B,6).match(o>2?r:s)))return null;if(g=g[0],B=g.length,g=g.split(":"),u(b=parseInt(g[0],10),-12,13))return null;if(o>2&&(w=parseInt(g[1],10),isNaN(w)||u(w,0,59)))return null}else if("T"===n)p=S();else if("'"===n)R=!0,S();else if(!S())return null;return null===P&&null===A&&null===z&&(null!==D||null!==E||M||null)?(P=V,A=O.getMonth(),z=O.getDate()):(null===P&&(P=V),null===z&&(z=1)),l&&D<12&&(D+=12),d?(b&&(D+=-b),w&&(E+=-w),t=new Date(Date.UTC(P,A,z,D,E,M,L))):function(t,e){e||23!==t.getHours()||t.setHours(t.getHours()+2)}(t=new Date(P,A,z,D,E,M,L),D),P<100&&t.setFullYear(P),t.getDate()!==z&&void 0===d?null:t}n.parseDate=function(t,e,i){if("[object Date]"===d.call(t))return t;var s,r,c,u=0,p=null;if(t&&0===t.indexOf("/D")&&(p=a.exec(t)))return c=p=p[1],p=parseInt(p,10),(c=c.substring(1).split(h)[1])&&(p-=parseInt(c,10)*n.date.MS_PER_MINUTE),new Date(p);if(i=n.getCulture(i),!e){for(e=[],r=i.calendar.patterns,s=l.length;u<s;u++)e[u]=r[l[u]];u=0,e=["yyyy/MM/dd HH:mm:ss","yyyy/MM/dd HH:mm","yyyy/MM/dd","ddd MMM dd yyyy HH:mm:ss","yyyy-MM-ddTHH:mm:ss.fffffffzzz","yyyy-MM-ddTHH:mm:ss.fffzzz","yyyy-MM-ddTHH:mm:sszzz","yyyy-MM-ddTHH:mmzzz","yyyy-MM-ddTHH:mmzz","yyyy-MM-ddTHH:mm:ss","yyyy-MM-ddTHH:mm","yyyy-MM-dd HH:mm:ss","yyyy-MM-dd HH:mm","yyyy-MM-dd","HH:mm:ss","HH:mm"].concat(e)}for(s=(e=o(e)?e:[e]).length;u<s;u++)if(p=v(t,e[u],i))return p;return p},n.parseInt=function(t,e){var i=n.parseFloat(t,e);return i&&(i|=0),i},n.parseFloat=function(t,s,r){if(!t&&0!==t)return null;if("number"===_typeof(t))return t;t=t.toString();var o,a,h=(s=n.getCulture(s)).numberFormat,l=h.percent,c=h.currency,d=c.symbol,u=l.symbol,p=t.indexOf("-");return i.test(t)?(t=parseFloat(t.replace(h["."],".")),isNaN(t)&&(t=null),t):p>0?null:(p=p>-1,t.indexOf(d)>-1||r&&r.toLowerCase().indexOf("c")>-1?(o=(h=c).pattern[0].replace("$",d).split("n"),t.indexOf(o[0])>-1&&t.indexOf(o[1])>-1&&(t=t.replace(o[0],"").replace(o[1],""),p=!0)):t.indexOf(u)>-1&&(a=!0,h=l,d=u),t=t.replace("-","").replace(d,"").replace(e," ").split(h[","].replace(e," ")).join("").replace(h["."],"."),t=parseFloat(t),isNaN(t)?t=null:p&&(t*=-1),t&&a&&(t/=100),t)},w&&(n.parseDate=function(t,e,i){return"[object Date]"===d.call(t)?t:w.parseDate(t,e,i)},n.parseFloat=function(e,i){return"number"===_typeof(e)?e:null==e?null:(t.isPlainObject(i)&&(i=i.name),e=w.parseFloat(e,i),isNaN(e)?null:e)})}(),function(){d.scrollbar=function(){var t,e=document.createElement("div");return e.style.cssText="overflow:scroll;overflow-x:hidden;zoom:1;clear:both",e.innerHTML="&nbsp;",document.body.appendChild(e),t=e.offsetWidth-e.scrollWidth,document.body.removeChild(e),t},d.isRtl=function(e){return t(e).closest(".k-rtl").length>0};var e=document.createElement("table");try{e.innerHTML="<tr><td></td></tr>",d.tbodyInnerHtml=!0}catch(t){d.tbodyInnerHtml=!1}d.touch="ontouchstart"in window,d.msPointers=window.MSPointerEvent,d.pointers=window.PointerEvent;var i=d.transitions=!1,n=d.transforms=!1,s="HTMLElement"in window?HTMLElement.prototype:[];d.hasHW3D="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix||"MozPerspective"in document.documentElement.style||"msPerspective"in document.documentElement.style,r(["Moz","webkit","O","ms"],(function(){var t=this.toString(),s=_typeof(e.style[t+"Transition"])===m;if(s||_typeof(e.style[t+"Transform"])===m){var r=t.toLowerCase();return n={css:"ms"!=r?"-"+r+"-":"",prefix:t,event:"o"===r||"webkit"===r?r:""},s&&((i=n).event=i.event?i.event+"TransitionEnd":"transitionend"),!1}})),e=null,d.transforms=n,d.transitions=i,d.devicePixelRatio=void 0===window.devicePixelRatio?1:window.devicePixelRatio;try{d.screenWidth=window.outerWidth||window.screen?window.screen.availWidth:window.innerWidth,d.screenHeight=window.outerHeight||window.screen?window.screen.availHeight:window.innerHeight}catch(t){d.screenWidth=window.screen.availWidth,d.screenHeight=window.screen.availHeight}d.detectOS=function(t){var e,i=!1,n=[],s=!/mobile safari/i.test(t),r={fire:/(Silk)\/(\d+)\.(\d+(\.\d+)?)/,android:/(Android|Android.*(?:Opera|Firefox).*?\/)\s*(\d+)\.(\d+(\.\d+)?)/,iphone:/(iPhone|iPod).*OS\s+(\d+)[\._]([\d\._]+)/,ipad:/(iPad).*OS\s+(\d+)[\._]([\d_]+)/,meego:/(MeeGo).+NokiaBrowser\/(\d+)\.([\d\._]+)/,webos:/(webOS)\/(\d+)\.(\d+(\.\d+)?)/,blackberry:/(BlackBerry|BB10).*?Version\/(\d+)\.(\d+(\.\d+)?)/,playbook:/(PlayBook).*?Tablet\s*OS\s*(\d+)\.(\d+(\.\d+)?)/,wp:/(Windows Phone(?: OS)?)\s(\d+)\.(\d+(\.\d+)?)/,windows:/(MSIE)\s+(\d+)\.(\d+(\.\d+)?)/,tizen:/(tizen).*?Version\/(\d+)\.(\d+(\.\d+)?)/i,sailfish:/(sailfish).*rv:(\d+)\.(\d+(\.\d+)?).*firefox/i,ffos:/(Mobile).*rv:(\d+)\.(\d+(\.\d+)?).*Firefox/},o={ios:/^i(phone|pad|pod)$/i,android:/^android|fire$/i,blackberry:/^blackberry|playbook/i,windows:/windows/,wp:/wp/,flat:/sailfish|ffos|tizen/i,meego:/meego/},a={tablet:/playbook|ipad|fire/i},h={omini:/Opera\sMini/i,omobile:/Opera\sMobi/i,firefox:/Firefox|Fennec/i,mobilesafari:/version\/.*safari/i,chrome:/chrome|crios/i,webkit:/webkit/i,ie:/MSIE|Windows\sPhone/i};for(var l in r)if(r.hasOwnProperty(l)&&(n=t.match(r[l]))){if("windows"==l&&"plugins"in navigator)return!1;(i={}).device=l,i.tablet=N(l,a,!1),i.browser=N(t,h,"default"),i.name=N(l,o),i[i.name]=!0,i.majorVersion=n[2],i.minorVersion=n[3].replace("_","."),e=i.minorVersion.replace(".","").substr(0,2),i.flatVersion=i.majorVersion+e+new Array(3-(e.length<3?e.length:2)).join("0"),i.cordova="undefined"!==_typeof(window.PhoneGap)||"undefined"!==_typeof(window.cordova),i.appMode=window.navigator.standalone||/file|local|wmapp/.test(window.location.protocol)||i.cordova,i.android&&(d.devicePixelRatio<1.5&&i.flatVersion<400||s)&&(d.screenWidth>800||d.screenHeight>800)&&(i.tablet=l);break}return i};var o,a,h,l,c=d.mobileOS=d.detectOS(navigator.userAgent);d.wpDevicePixelRatio=c.wp?screen.width/320:0,d.kineticScrollNeeded=c&&(d.touch||d.msPointers||d.pointers),d.hasNativeScrolling=!1,(c.ios||c.android&&c.majorVersion>2||c.wp)&&(d.hasNativeScrolling=c),d.mouseAndTouchPresent=d.touch&&!(d.mobileOS.ios||d.mobileOS.android),d.detectBrowser=function(t){var e=!1,i=[],n={webkit:/(chrome)[ \/]([\w.]+)/i,safari:/(webkit)[ \/]([\w.]+)/i,opera:/(opera)(?:.*version|)[ \/]([\w.]+)/i,msie:/(msie\s|trident.*? rv:)([\w.]+)/i,mozilla:/(mozilla)(?:.*? rv:([\w.]+)|)/i};for(var s in n)if(n.hasOwnProperty(s)&&(i=t.match(n[s]))){(e={})[s]=!0,e[i[1].toLowerCase()]=!0,e.version=parseInt(document.documentMode||i[2],10);break}return e},d.browser=d.detectBrowser(navigator.userAgent),d.zoomLevel=function(){try{return d.touch?document.documentElement.clientWidth/window.innerWidth:d.browser.msie&&d.browser.version>=10?(top||window).document.documentElement.offsetWidth/(top||window).innerWidth:1}catch(t){return 1}},d.cssBorderSpacing=void 0!==document.documentElement.style.borderSpacing&&!(d.browser.msie&&d.browser.version<8),o=d.browser,a="",h=t(document.documentElement),l=parseInt(o.version,10),o.msie?a="ie":o.mozilla?a="ff":o.safari?a="safari":o.webkit?a="webkit":o.opera&&(a="opera"),a&&(a="k-"+a+" k-"+a+l),d.mobileOS&&(a+=" k-mobile"),h.addClass(a),d.eventCapture=document.documentElement.addEventListener;var u=document.createElement("input");d.placeholder="placeholder"in u,d.propertyChangeEvent="onpropertychange"in u,d.input=function(){for(var t,e=["number","date","time","month","week","datetime","datetime-local"],i=e.length,n={},s=0;s<i;s++)t=e[s],u.setAttribute("type",t),u.value="test",n[t.replace("-","")]="text"!==u.type&&"test"!==u.value;return n}(),u.style.cssText="float:left;",d.cssFloat=!!u.style.cssFloat,u=null,d.stableSort=function(){for(var t=[{index:0,field:"b"}],e=1;e<513;e++)t.push({index:e,field:"a"});return t.sort((function(t,e){return t.field>e.field?1:t.field<e.field?-1:0})),1===t[0].index}(),d.matchesSelector=s.webkitMatchesSelector||s.mozMatchesSelector||s.msMatchesSelector||s.oMatchesSelector||s.matchesSelector||function(e){for(var i=document.querySelectorAll?(this.parentNode||document).querySelectorAll(e)||[]:t(e),n=i.length;n--;)if(i[n]==this)return!0;return!1},d.pushState=window.history&&window.history.pushState;var p=document.documentMode;d.hashChange="onhashchange"in window&&!(d.browser.msie&&(!p||p<=8))}();var F={};function H(t,e,i,n){return _typeof(t)===m&&(_(e)&&(n=e,e=400,i=!1),_(i)&&(n=i,i=!1),"boolean"===_typeof(e)&&(i=e,e=400),t={effects:t,duration:e,reverse:i,complete:n}),s({effects:{},duration:400,reverse:!1,init:h,teardown:h,hide:!1},t,{completeCallback:t.complete,complete:h})}function U(e,i,n,s,r){for(var o,a=0,h=e.length;a<h;a++)(o=t(e[a])).queue((function(){F.promise(o,H(i,n,s,r))}));return e}t.extend(F,{enabled:!0,Element:function(e){this.element=t(e)},promise:function(t,e){t.is(":visible")||t.css({display:t.data("olddisplay")||"block"}).css("display"),e.hide&&t.data("olddisplay",t.css("display")).hide(),e.init&&e.init(),e.completeCallback&&e.completeCallback(t),t.dequeue()},disable:function(){this.enabled=!1,this.promise=this.promiseShim},enable:function(){this.enabled=!0,this.promise=this.animatedPromise}}),F.promiseShim=F.promise,"kendoAnimate"in t.fn||s(t.fn,{kendoStop:function(t,e){return this.stop(t,e)},kendoAnimate:function(t,e,i,n){return U(this,t,e,i,n)},kendoAddClass:function(t,e){return n.toggleClass(this,t,e,!0)},kendoRemoveClass:function(t,e){return n.toggleClass(this,t,e,!1)},kendoToggleClass:function(t,e,i){return n.toggleClass(this,t,e,i)}});var $=/&/g,j=/</g,G=/"/g,W=/'/g,q=/>/g;var Y=function(t){return t.target};d.touch&&(Y=function(t){var e="originalEvent"in t?t.originalEvent.changedTouches:"changedTouches"in t?t.changedTouches:null;return e?document.elementFromPoint(e[0].clientX,e[0].clientY):t.target},r(["swipe","swipeLeft","swipeRight","swipeUp","swipeDown","doubleTap","tap"],(function(e,i){t.fn[i]=function(t){return this.bind(i,t)}}))),d.touch?d.mobileOS?(d.mousedown="touchstart",d.mouseup="touchend",d.mousemove="touchmove",d.mousecancel="touchcancel",d.click="touchend",d.resize="orientationchange"):(d.mousedown="mousedown touchstart",d.mouseup="mouseup touchend",d.mousemove="mousemove touchmove",d.mousecancel="mouseleave touchcancel",d.click="click",d.resize="resize"):d.pointers?(d.mousemove="pointermove",d.mousedown="pointerdown",d.mouseup="pointerup",d.mousecancel="pointercancel",d.click="pointerup",d.resize="orientationchange resize"):d.msPointers?(d.mousemove="MSPointerMove",d.mousedown="MSPointerDown",d.mouseup="MSPointerUp",d.mousecancel="MSPointerCancel",d.click="MSPointerUp",d.resize="orientationchange resize"):(d.mousemove="mousemove",d.mousedown="mousedown",d.mouseup="mouseup",d.mousecancel="mouseleave",d.click="click",d.resize="resize");var Q=/^([a-z]+:)?\/\//i;s(n,{ui:n.ui||{},fx:n.fx||function(t){return new n.effects.Element(t)},effects:n.effects||F,mobile:n.mobile||{},data:n.data||{},dataviz:n.dataviz||{ui:{roles:{}}},keys:{INSERT:45,DELETE:46,BACKSPACE:8,TAB:9,ENTER:13,ESC:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,END:35,HOME:36,SPACEBAR:32,PAGEUP:33,PAGEDOWN:34,F2:113,F10:121,F12:123,NUMPAD_PLUS:107,NUMPAD_MINUS:109,NUMPAD_DOT:110},support:n.support||d,animate:n.animate||U,ns:"",attr:function(t){return"data-"+n.ns+t},getShadows:B,wrap:function(e,i){var n,s=d.browser,r="rtl"==e.css("direction");if(e.parent().hasClass("k-animation-container")){var o=e.parent(".k-animation-container"),a=o[0].style;o.is(":hidden")&&o.show(),(n=u.test(a.width)||u.test(a.height))||o.css({width:e.outerWidth(),height:e.outerHeight(),boxSizing:"content-box",mozBoxSizing:"content-box",webkitBoxSizing:"content-box"})}else{var h=B(e),c=e[0].style.width,p=e[0].style.height,f=u.test(c),g=u.test(p);s.opera&&(h.left=h.right=h.bottom=5),n=f||g,!f&&(!i||i&&c)&&(c=e.outerWidth()),!g&&(!i||i&&p)&&(p=e.outerHeight()),e.wrap(t("<div/>").addClass("k-animation-container").css({width:c,height:p,marginLeft:h.left*(r?1:-1),paddingLeft:h.left,paddingRight:h.right,paddingBottom:h.bottom})),n&&e.css({width:"100%",height:"100%",boxSizing:"border-box",mozBoxSizing:"border-box",webkitBoxSizing:"border-box"})}return s.msie&&l.floor(s.version)<=7&&(e.css({zoom:1}),e.children(".k-menu").width(e.width())),e.parent()},deepExtend:R,getComputedStyles:function(e,i){var s,r={};return document.defaultView&&document.defaultView.getComputedStyle?(s=document.defaultView.getComputedStyle(e,""),i&&t.each(i,(function(t,e){r[e]=s.getPropertyValue(e)}))):(s=e.currentStyle,i&&t.each(i,(function(t,e){r[e]=s[V(e)]}))),n.size(r)||(r=s),r},size:function(t){var e,i=0;for(e in t)t.hasOwnProperty(e)&&"toJSON"!=e&&i++;return i},toCamelCase:V,toHyphens:function(t){return t.replace(/([a-z][A-Z])/g,(function(t){return t.charAt(0)+"-"+t.charAt(1).toLowerCase()}))},getOffset:n.getOffset||function(t,e,i){e||(e="offset");var n=t[e]();return d.mobileOS,d.browser.msie&&(d.pointers||d.msPointers)&&!i&&(n.top-=window.pageYOffset-document.documentElement.scrollTop,n.left-=window.pageXOffset-document.documentElement.scrollLeft),n},parseEffects:n.parseEffects||function(t){var e={};return r("string"==typeof t?t.split(" "):t,(function(t){e[t]=this})),e},toggleClass:n.toggleClass||function(t,e,i,n){return e&&(e=e.split(" "),r(e,(function(e,i){t.toggleClass(i,n)}))),t},directions:n.directions||{left:{reverse:"right"},right:{reverse:"left"},down:{reverse:"up"},up:{reverse:"down"},top:{reverse:"bottom"},bottom:{reverse:"top"},in:{reverse:"out"},out:{reverse:"in"}},Observable:S,Class:x,Template:i,template:a(i.compile,i),render:a(i.render,i),stringify:a(c.stringify,c),eventTarget:Y,htmlEncode:function(t){return(""+t).replace($,"&amp;").replace(j,"&lt;").replace(q,"&gt;").replace(G,"&quot;").replace(W,"&#39;")},isLocalUrl:function(t){return t&&!Q.test(t)},expr:function(t,e,i){return t=t||"",_typeof(e)==m&&(i=e,e=!1),i=i||"d",t&&"["!==t.charAt(0)&&(t="."+t),t=e?function(t,e){var i,n,s,r,o=e||"d",a=1;for(n=0,s=t.length;n<s;n++)""!==(r=t[n])&&(0!==(i=r.indexOf("["))&&(-1==i?r="."+r:(a++,r="."+r.substring(0,i)+" || {})"+r.substring(i))),a++,o+=r+(n<s-1?" || {})":")"));return new Array(a).join("(")+o}(t.split("."),i):i+t},getter:function(t,e){return v[t]=v[t]||new Function("d","return "+n.expr(t,e))},setter:function(t){return y[t]=y[t]||new Function("d,value",n.expr(t)+"=value")},accessor:function(t){return{get:n.getter(t),set:n.setter(t)}},guid:function(){var t,e,i="";for(t=0;t<32;t++)e=16*l.random()|0,8!=t&&12!=t&&16!=t&&20!=t||(i+="-"),i+=(12==t?4:16==t?3&e|8:e).toString(16);return i},roleSelector:function(t){return t.replace(/(\S+)/g,"["+n.attr("role")+"=$1],").slice(0,-1)},triggeredByInput:function(t){return/^(label|input|textarea|select)$/i.test(t.target.tagName)},logToConsole:function(t){var e=window.console;void 0!==e&&e.log&&e.log(t)}});var X=S.extend({init:function(t,e){this.element=n.jQuery(t).handler(this),S.fn.init.call(this),e=this.options=s(!0,{},this.options,e),this.element.attr(n.attr("role"))||this.element.attr(n.attr("role"),(e.name||"").toLowerCase()),this.element.data("kendo"+e.prefix+e.name,this),this.bind(this.events,e)},events:[],options:{prefix:""},_hasBindingTarget:function(){return!!this.element[0].kendoBindingTarget},_tabindex:function(t){t=t||this.wrapper;var e=this.element,i=t.attr("tabindex")||e.attr("tabindex");e.removeAttr("tabindex"),t.attr("tabindex",isNaN(i)?0:i)},setOptions:function(e){this._setEvents(e),t.extend(this.options,e)},_setEvents:function(t){for(var e,i=0,n=this.events.length;i<n;i++)e=this.events[i],this.options[e]&&t[e]&&this.unbind(e,this.options[e]);this.bind(this.events,t)},resize:function(t){var e=this.getSize(),i=this._size;!t&&i&&e.width===i.width&&e.height===i.height||(this._resize(e),this.trigger("resize",e),this._size=e)},getSize:function(){return n.dimensions(this.element)},size:function(t){if(!t)return this.getSize();this.setSize(t)},setSize:t.noop,_resize:t.noop,destroy:function(){this.element.removeData("kendo"+this.options.prefix+this.options.name),this.element.removeData("handler"),this.unbind()}});n.dimensions=function(t,e){var i=t[0];return e&&t.css(e),{width:i.offsetWidth,height:i.offsetHeight}},n.notify=h;var Z=/template$/i,K=/^\s*(?:\{(?:.|\r\n|\n)*\}|\[(?:.|\r\n|\n)*\])\s*$/,J=/^\{(\d+)(:[^\}]+)?\}|^\[[A-Za-z_]*\]$/,tt=/([A-Z])/g;function et(t,e){var i;return 0===e.indexOf("data")&&(e=(e=e.substring(4)).charAt(0).toLowerCase()+e.substring(1)),e=e.replace(tt,"-$1"),null===(i=t.getAttribute("data-"+n.ns+e))?i=void 0:"null"===i?i=null:"true"===i?i=!0:"false"===i?i=!1:g.test(i)?i=parseFloat(i):K.test(i)&&!J.test(i)&&(i=new Function("return ("+i+")")()),i}function it(e,i){var s,r,o={};for(s in i)void 0!==(r=et(e,s))&&(Z.test(s)&&(r=n.template(t("#"+r).html())),o[s]=r);return o}function nt(e,i){return t.contains(e,i)?-1:1}function st(){var e=t(this);return t.inArray(e.attr("data-role"),["slider","rangeslider"])>0||e.is(":visible")}n.initWidget=function(e,i,s){var r,o,a,h,l,c,d,u;if(s?s.roles&&(s=s.roles):s=n.ui.roles,(c=(e=e.nodeType?e:e[0]).getAttribute("data-"+n.ns+"role"))&&(a=-1===c.indexOf(".")?s[c]:n.getter(c)(window))){for(u=et(e,"dataSource"),i=t.extend({},it(e,a.fn.options),i),u&&(_typeof(u)===m?i.dataSource=n.getter(u)(window):i.dataSource=u),h=0,l=a.fn.events.length;h<l;h++)void 0!==(d=et(e,o=a.fn.events[h]))&&(i[o]=n.getter(d)(window));return(r=t(e).data("kendo"+a.fn.options.prefix+a.fn.options.name))?r.setOptions(i):r=new a(e,i),r}},n.rolesFromNamespaces=function(t){var e,i,r=[];for(t[0]||(t=[n.ui,n.dataviz.ui]),e=0,i=t.length;e<i;e++)r[e]=t[e].roles;return s.apply(null,[{}].concat(r.reverse()))},n.init=function(e){var i=n.rolesFromNamespaces(b.call(arguments,1));t(e).find("[data-"+n.ns+"role]").addBack().each((function(){n.initWidget(this,{},i)}))},n.destroy=function(e){t(e).find("[data-"+n.ns+"role]").addBack().each((function(){var e=n.widgetInstance(t(this));e&&e.destroy()}))},n.resize=function(e){var i=t(e).find("[data-"+n.ns+"role]").addBack().filter(st);if(i.length){var s=t.makeArray(i);s.sort(nt),t.each(s,(function(){var e=n.widgetInstance(t(this));e&&e.resize()}))}},n.parseOptions=it,s(n.ui,{Widget:X,roles:{},progress:function(e,i){var s,r,o,a,h=e.find(".k-loading-mask"),l=n.support,c=l.browser;i?h.length||(r=(s=l.isRtl(e))?"right":"left",a=e.scrollLeft(),o=c.webkit&&s?e[0].scrollWidth-e.width()-2*a:0,h=t("<div class='k-loading-mask'><span class='k-loading-text'>Loading...</span><div class='k-loading-image'/><div class='k-loading-color'/></div>").width("100%").height("100%").css("top",e.scrollTop()).css(r,Math.abs(a)+o).prependTo(e)):h&&h.remove()},plugin:function(e,i,s){var r,o=e.fn.options.name;s=s||"",(i=i||n.ui)[o]=e,i.roles[o.toLowerCase()]=e,r="getKendo"+s+o,o="kendo"+s+o,t.fn[o]=function(i){var s,r=this;return _typeof(i)===m?(s=b.call(arguments,1),this.each((function(){var e,a,h=t.data(this,o);if(!h)throw new Error(n.format("Cannot call method '{0}' of {1} before it is initialized",i,o));if(e=h[i],"function"!==_typeof(e))throw new Error(n.format("Cannot find method '{0}' of {1}",i,o));if(void 0!==(a=e.apply(h,s)))return r=a,!1}))):this.each((function(){new e(this,i)})),r},t.fn[r]=function(){return this.data(o)}}});var rt={bind:function(){return this},nullObject:!0},ot=X.extend({init:function(t,e){X.fn.init.call(this,t,e),this.element.autoApplyNS(),this.wrapper=this.element,this.element.addClass("km-widget")},destroy:function(){X.fn.destroy.call(this),this.element.kendoDestroy()},options:{prefix:"Mobile"},events:[],view:function(){var t=this.element.closest(n.roleSelector("view splitview modalview drawer"));return n.widgetInstance(t,n.mobile.ui)||rt},viewHasNativeScrolling:function(){var t=this.view();return t&&t.options.useNativeScrolling},container:function(){var t=this.element.closest(n.roleSelector("view layout modalview drawer"));return n.widgetInstance(t,n.mobile.ui)||rt}});function at(e,i){var n=e.nodeName.toLowerCase();return(/input|select|textarea|button|object/.test(n)?!e.disabled:"a"===n&&e.href||i)&&function(e){return!t(e).parents().addBack().filter((function(){return"hidden"===t.css(this,"visibility")||t.expr.filters.hidden(this)})).length}(e)}s(n.mobile,{init:function(t){n.init(t,n.mobile.ui,n.ui,n.dataviz.ui)},appLevelNativeScrolling:function(){return n.mobile.application&&n.mobile.application.options&&n.mobile.application.options.useNativeScrolling},ui:{Widget:ot,roles:{},plugin:function(t){n.ui.plugin(t,n.mobile.ui,"Mobile")}}}),n.touchScroller=function(e,i){return t(e).map((function(e,s){return s=t(s),!(!d.kineticScrollNeeded||!n.mobile.ui.Scroller||s.data("kendoMobileScroller"))&&(s.kendoMobileScroller(i),s.data("kendoMobileScroller"))}))[0]},n.preventDefault=function(t){t.preventDefault()},n.widgetInstance=function(t,e){var i,s,r=t.data(n.ns+"role"),o=[];if(r){if("content"===r&&(r="scroller"),e)if(e[0])for(i=0,s=e.length;i<s;i++)o.push(e[i].roles[r]);else o.push(e.roles[r]);else o=[n.ui.roles[r],n.dataviz.ui.roles[r],n.mobile.ui.roles[r]];for(r.indexOf(".")>=0&&(o=[n.getter(r)(window)]),i=0,s=o.length;i<s;i++){var a=o[i];if(a){var h=t.data("kendo"+a.fn.options.prefix+a.fn.options.name);if(h)return h}}}},n.onResize=function(e){var i=e;return d.mobileOS.android&&(i=function(){setTimeout(e,600)}),t(window).on(d.resize,i),i},n.unbindResize=function(e){t(window).off(d.resize,e)},n.attrValue=function(t,e){return t.data(n.ns+e)},n.days={Sunday:0,Monday:1,Tuesday:2,Wednesday:3,Thursday:4,Friday:5,Saturday:6},t.extend(t.expr[":"],{kendoFocusable:function(e){var i=t.attr(e,"tabindex");return at(e,!isNaN(i)&&i>-1)}});var ht=["mousedown","mousemove","mouseenter","mouseleave","mouseover","mouseout","mouseup","click"],lt={setupMouseMute:function(){var e=0,i=ht.length,n=document.documentElement;if(!lt.mouseTrap&&d.eventCapture){lt.mouseTrap=!0,lt.bustClick=!1,lt.captureMouse=!1;for(var s=function(e){lt.captureMouse&&("click"===e.type?lt.bustClick&&!t(e.target).is("label, input, [data-rel=external]")&&(e.preventDefault(),e.stopPropagation()):e.stopPropagation())};e<i;e++)n.addEventListener(ht[e],s,!0)}},muteMouse:function(t){lt.captureMouse=!0,t.data.bustClick&&(lt.bustClick=!0),clearTimeout(lt.mouseTrapTimeoutID)},unMuteMouse:function(){clearTimeout(lt.mouseTrapTimeoutID),lt.mouseTrapTimeoutID=setTimeout((function(){lt.captureMouse=!1,lt.bustClick=!1}),400)}},ct={down:"touchstart mousedown",move:"mousemove touchmove",up:"mouseup touchend touchcancel",cancel:"mouseleave touchcancel"};d.touch&&(d.mobileOS.ios||d.mobileOS.android)?ct={down:"touchstart",move:"touchmove",up:"touchend touchcancel",cancel:"touchcancel"}:d.pointers?ct={down:"pointerdown",move:"pointermove",up:"pointerup",cancel:"pointercancel pointerleave"}:d.msPointers&&(ct={down:"MSPointerDown",move:"MSPointerMove",up:"MSPointerUp",cancel:"MSPointerCancel MSPointerLeave"}),!d.msPointers||"onmspointerenter"in window||t.each({MSPointerEnter:"MSPointerOver",MSPointerLeave:"MSPointerOut"},(function(e,i){t.event.special[e]={delegateType:i,bindType:i,handle:function(e){var n,s=this,r=e.relatedTarget,o=e.handleObj;return r&&(r===s||t.contains(s,r))||(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=i),n}}}));var dt=function(t){return ct[t]||t},ut=/([^ ]+)/g;n.applyEventMap=function(t,e){return t=t.replace(ut,dt),e&&(t=t.replace(ut,"$1."+e)),t};var pt=t.fn.on;function ft(t,e){return new ft.fn.init(t,e)}s(!0,ft,t),ft.fn=ft.prototype=new t,ft.fn.constructor=ft,ft.fn.init=function(e,i){return i&&i instanceof t&&!(i instanceof ft)&&(i=ft(i)),t.fn.init.call(this,e,i,gt)},ft.fn.init.prototype=ft.fn;var gt=ft(document);s(ft.fn,{handler:function(t){return this.data("handler",t),this},autoApplyNS:function(t){return this.data("kendoNS",t||n.guid()),this},on:function(){var t=this,e=t.data("kendoNS");if(1===arguments.length)return pt.call(t,arguments[0]);var i=t,s=b.call(arguments);"undefined"===_typeof(s[s.length-1])&&s.pop();var r=s[s.length-1],o=n.applyEventMap(s[0],e);if(d.mouseAndTouchPresent&&o.search(/mouse|click/)>-1&&this[0]!==document.documentElement){lt.setupMouseMute();var a=2===s.length?null:s[1],h=o.indexOf("click")>-1&&o.indexOf("touchend")>-1;pt.call(this,{touchstart:lt.muteMouse,touchend:lt.unMuteMouse},a,{bustClick:h})}return _typeof(r)===m&&(i=t.data("handler"),r=i[r],s[s.length-1]=function(t){r.call(i,t)}),s[0]=o,pt.apply(t,s),t},kendoDestroy:function(t){return(t=t||this.data("kendoNS"))&&this.off("."+t),this}}),n.jQuery=ft,n.eventMap=ct,n.timezone=function(){var t={Jan:0,Feb:1,Mar:2,Apr:3,May:4,Jun:5,Jul:6,Aug:7,Sep:8,Oct:9,Nov:10,Dec:11},e={Sun:0,Mon:1,Tue:2,Wed:3,Thu:4,Fri:5,Sat:6};function i(i,n){var s,r,o,a=n[3],h=n[4],l=n[5],c=n[8];return c||(n[8]=c={}),c[i]?c[i]:(isNaN(h)?0===h.indexOf("last")?(s=new Date(Date.UTC(i,t[a]+1,1,l[0]-24,l[1],l[2],0)),r=e[h.substr(4,3)],o=s.getUTCDay(),s.setUTCDate(s.getUTCDate()+r-o-(r>o?7:0))):h.indexOf(">=")>=0&&(s=new Date(Date.UTC(i,t[a],h.substr(5),l[0],l[1],l[2],0)),r=e[h.substr(0,3)],o=s.getUTCDay(),s.setUTCDate(s.getUTCDate()+r-o+(r<o?7:0))):s=new Date(Date.UTC(i,t[a],h,l[0],l[1],l[2],0)),c[i]=s)}function n(t,e,n){if(!(e=e[n])){var s=n.split(":"),r=0;return s.length>1&&(r=60*s[0]+Number(s[1])),[-1e6,"max","-","Jan",1,[0,0,0],r,"-"]}var o=new Date(t).getUTCFullYear();(e=jQuery.grep(e,(function(t){var e=t[0],i=t[1];return e<=o&&(i>=o||e==o&&"only"==i||"max"==i)}))).push(t),e.sort((function(t,e){return"number"!=typeof t&&(t=Number(i(o,t))),"number"!=typeof e&&(e=Number(i(o,e))),t-e}));var a=e[jQuery.inArray(t,e)-1]||e[e.length-1];return isNaN(a)?a:null}function s(t,e,i,s){"number"!=_typeof(t)&&(t=Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));var r=function(t,e,i){var n=e[i];if("string"==typeof n&&(n=e[n]),!n)throw new Error('Timezone "'+i+'" is either incorrect, or kendo.timezones.min.js is not included.');for(var s=n.length-1;s>=0;s--){var r=n[s][3];if(r&&t>r)break}var o=n[s+1];if(!o)throw new Error('Timezone "'+i+'" not found on '+t+".");return o}(t,e,s);return{zone:r,rule:n(t,i,r[1])}}return{zones:{},rules:{},offset:function(t,e){if("Etc/UTC"==e||"Etc/GMT"==e)return 0;var i=s(t,this.zones,this.rules,e),n=i.zone,r=i.rule;return r?n[0]-r[6]:n[0]},convert:function(t,e,i){_typeof(e)==m&&(e=this.offset(t,e)),_typeof(i)==m&&(i=this.offset(t,i));var n=t.getTimezoneOffset(),s=(t=new Date(t.getTime()+6e4*(e-i))).getTimezoneOffset();return new Date(t.getTime()+6e4*(s-n))},apply:function(t,e){return this.convert(t,t.getTimezoneOffset(),e)},remove:function(t,e){return this.convert(t,e,t.getTimezoneOffset())},abbr:function(t,e){var i=s(t,this.zones,this.rules,e),n=i.zone,r=i.rule,o=n[2];return o.indexOf("/")>=0?o.split("/")[r&&+r[6]?1:0]:o.indexOf("%s")>=0?o.replace("%s",r&&"-"!=r[7]?r[7]:""):o},toLocalDate:function(t){return this.apply(new Date(t),"Etc/UTC")}}}(),n.date=function(){function t(t,e){return 0===e&&23===t.getHours()&&(t.setHours(t.getHours()+2),!0)}function e(e,i,n){var s=e.getHours();n=n||1,i=(i-e.getDay()+7*n)%7,e.setDate(e.getDate()+i),t(e,s)}function i(t){return new Date(t.getFullYear(),t.getMonth(),1)}function n(e){return t(e=new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0),0),e}function s(t){return t.getTime()-n(t)}function r(e,i){var n=e.getHours();return o(e=new Date(e),864e5*i),t(e,n),e}function o(t,e,i){var n,s=t.getTimezoneOffset();t.setTime(t.getTime()+e),i||(n=t.getTimezoneOffset()-s,t.setTime(t.getTime()+6e4*n))}function a(){return n(new Date)}return{adjustDST:t,dayOfWeek:function(t,i,n){return e(t=new Date(t),i,n),t},setDayOfWeek:e,getDate:n,isInDateRange:function(t,e,i){var n,s=e.getTime(),r=i.getTime();return s>=r&&(r+=864e5),(n=t.getTime())>=s&&n<=r},isInTimeRange:function(t,e,i){var n,r=s(e),o=s(i);return!t||r==o||(e>=i&&(i+=864e5),r>(n=s(t))&&(n+=864e5),o<r&&(o+=864e5),n>=r&&n<=o)},isToday:function(t){return n(t).getTime()==a().getTime()},nextDay:function(t){return r(t,1)},previousDay:function(t){return r(t,-1)},toUtcTime:function(t){return Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds())},MS_PER_DAY:864e5,MS_PER_HOUR:36e5,MS_PER_MINUTE:6e4,setTime:o,addDays:r,today:a,toInvariantTime:function(t){var e=new Date(1980,1,1,0,0,0);return t&&e.setHours(t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()),e},firstDayOfMonth:i,lastDayOfMonth:function(t){var e=new Date(t.getFullYear(),t.getMonth()+1,0),n=i(t),s=Math.abs(e.getTimezoneOffset()-n.getTimezoneOffset());return s&&e.setHours(n.getHours()+s/60),e},getMilliseconds:s}}(),n.stripWhitespace=function(t){if(document.createNodeIterator)for(var e=document.createNodeIterator(t,NodeFilter.SHOW_TEXT,(function(e){return e.parentNode==t?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}),!1);e.nextNode();)e.referenceNode&&!e.referenceNode.textContent.trim()&&e.referenceNode.parentNode.removeChild(e.referenceNode);else for(var i=0;i<t.childNodes.length;i++){var s=t.childNodes[i];3!=s.nodeType||/\S/.test(s.nodeValue)||(t.removeChild(s),i--),1==s.nodeType&&n.stripWhitespace(s)}};var mt=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){setTimeout(t,1e3/60)};n.animationFrame=function(t){mt.call(window,t)};var vt=[];n.queueAnimation=function(t){vt[vt.length]=t,1===vt.length&&n.runNextAnimation()},n.runNextAnimation=function(){n.animationFrame((function(){vt[0]&&(vt.shift()(),vt[0]&&n.runNextAnimation())}))},n.parseQueryStringParams=function(t){for(var e={},i=(t.split("?")[1]||"").split(/&|=/),n=i.length,s=0;s<n;s+=2)""!==i[s]&&(e[decodeURIComponent(i[s])]=decodeURIComponent(i[s+1]));return e},n.elementUnderCursor=function(t){return document.elementFromPoint(t.x.client,t.y.client)},n.wheelDeltaY=function(t){var e,i=t.originalEvent,n=i.wheelDeltaY;return i.wheelDelta?(void 0===n||n)&&(e=i.wheelDelta):i.detail&&i.axis===i.VERTICAL_AXIS&&(e=10*-i.detail),e},n.caret=function(e,i,n){var s,r=void 0!==i;if(void 0===n&&(n=i),e[0]&&(e=e[0]),!r||!e.disabled){try{if(void 0!==e.selectionStart)r?(e.focus(),e.setSelectionRange(i,n)):i=[e.selectionStart,e.selectionEnd];else if(document.selection)if(t(e).is(":visible")&&e.focus(),s=e.createTextRange(),r)s.collapse(!0),s.moveStart("character",i),s.moveEnd("character",n-i),s.select();else{var o,a=s.duplicate();s.moveToBookmark(document.selection.createRange().getBookmark()),a.setEndPoint("EndToStart",s),i=[o=a.text.length,o+s.text.length]}}catch(t){i=[]}return i}}}(jQuery),function(t,e){var i=window.kendo,n=i.effects,s=t.each,r=t.extend,o=t.proxy,a=i.support,h=a.browser,l=a.transforms,c=a.transitions,d={scale:0,scalex:0,scaley:0,scale3d:0},u={translate:0,translatex:0,translatey:0,translate3d:0},p=void 0!==document.documentElement.style.zoom&&!l,f=/matrix3?d?\s*\(.*,\s*([\d\.\-]+)\w*?,\s*([\d\.\-]+)\w*?,\s*([\d\.\-]+)\w*?,\s*([\d\.\-]+)\w*?/i,g=/^(-?[\d\.\-]+)?[\w\s]*,?\s*(-?[\d\.\-]+)?[\w\s]*/i,m=/translatex?$/i,v=/(zoom|fade|expand)(\w+)/,y=/(zoom|fade|expand)/,b=/[xy]$/i,w=["perspective","rotate","rotatex","rotatey","rotatez","rotate3d","scale","scalex","scaley","scalez","scale3d","skew","skewx","skewy","translate","translatex","translatey","translatez","translate3d","matrix","matrix3d"],x=["rotate","scale","scalex","scaley","skew","skewx","skewy","translate","translatex","translatey","matrix"],_={rotate:"deg",scale:"",skew:"px",translate:"px"},k=l.css,C=Math.round,S="px",T=k+"transition",P=k+"transform",A=k+"backface-visibility",z=k+"perspective",D=(a.mobileOS&&a.mobileOS.majorVersion,{left:{reverse:"right",property:"left",transition:"translatex",vertical:!1,modifier:-1},right:{reverse:"left",property:"left",transition:"translatex",vertical:!1,modifier:1},down:{reverse:"up",property:"top",transition:"translatey",vertical:!0,modifier:1},up:{reverse:"down",property:"top",transition:"translatey",vertical:!0,modifier:-1},top:{reverse:"bottom"},bottom:{reverse:"top"},in:{reverse:"out",modifier:-1},out:{reverse:"in",modifier:1},vertical:{reverse:"vertical"},horizontal:{reverse:"horizontal"}});if(i.directions=D,r(t.fn,{kendoStop:function(t,e){return c?n.stopQueue(this,t||!1,e||!1):this.stop(t,e)}}),l&&!c){s(x,(function(e,i){t.fn[i]=function(e){if(void 0===e)return R(this,i);var n=t(this)[0],s=i+"("+e+_[i.replace(b,"")]+")";return-1==n.style.cssText.indexOf(P)?t(this).css(P,s):n.style.cssText=n.style.cssText.replace(new RegExp(i+"\\(.*?\\)","i"),s),this},t.fx.step[i]=function(e){t(e.elem)[i](e.now)}}));var E=t.fx.prototype.cur;t.fx.prototype.cur=function(){return-1!=x.indexOf(this.prop)?parseFloat(t(this.elem)[this.prop]()):E.apply(this,arguments)}}function M(t){return parseInt(t,10)}function L(t,e){return M(t.css(e))}function I(t){for(var e in t)-1!=w.indexOf(e)&&-1==x.indexOf(e)&&delete t[e];return t}function B(t,e){var i,n,s,r,o=[],h={};for(n in e)i=n.toLowerCase(),r=l&&-1!=w.indexOf(i),!a.hasHW3D&&r&&-1==x.indexOf(i)?delete e[n]:(s=e[n],r?o.push(n+"("+s+")"):h[n]=s);return o.length&&(h[P]=o.join(" ")),h}function R(t,e){if(l){var i=t.css(P);if("none"==i)return"scale"==e?1:0;var n=i.match(new RegExp(e+"\\s*\\(([\\d\\w\\.]+)")),s=0;return n?s=M(n[1]):(n=i.match(f)||[0,0,0,0,0],e=e.toLowerCase(),m.test(e)?s=parseFloat(n[3]/n[2]):"translatey"==e?s=parseFloat(n[4]/n[2]):"scale"==e?s=parseFloat(n[2]):"rotate"==e&&(s=parseFloat(Math.atan2(n[2],n[1])))),s}return parseFloat(t.css(e))}i.toggleClass=function(t,e,i,n){return e&&(e=e.split(" "),c&&(i=r({exclusive:"all",duration:400,ease:"ease-out"},i),t.css(T,i.exclusive+" "+i.duration+"ms "+i.ease),setTimeout((function(){t.css(T,"").css("height")}),i.duration)),s(e,(function(e,i){t.toggleClass(i,n)}))),t},i.parseEffects=function(t,e){var i={};return"string"==typeof t?s(t.split(" "),(function(t,n){var s=!y.test(n),r=n.replace(v,(function(t,e,i){return e+":"+i.toLowerCase()})).split(":"),o=r[1],a={};r.length>1&&(a.direction=e&&s?D[o].reverse:o),i[r[0]]=a})):s(t,(function(t){var n=this.direction;n&&e&&!y.test(t)&&(this.direction=D[n].reverse),i[t]=this})),i},c&&r(n,{transition:function(e,i,n){var s,o,a=0,h=e.data("keys")||[];n=r({duration:200,ease:"ease-out",complete:null,exclusive:"all"},n);var l=!1,d=function(){l||(l=!0,o&&(clearTimeout(o),o=null),e.removeData("abortId").dequeue().css(T,"").css(T),n.complete.call(e))};n.duration=t.fx&&t.fx.speeds[n.duration]||n.duration,s=B(0,i),t.merge(h,function(t){var e=[];for(var i in t)e.push(i);return e}(s)),e.data("keys",t.unique(h)).height(),e.css(T,n.exclusive+" "+n.duration+"ms "+n.ease).css(T),e.css(s).css(P),c.event&&(e.one(c.event,d),0!==n.duration&&(a=500)),o=setTimeout(d,n.duration+a),e.data("abortId",o),e.data("completeCallback",d)},stopQueue:function(t,e,n){var s,r=t.data("keys"),o=!n&&r,a=t.data("completeCallback");return o&&(s=i.getComputedStyles(t[0],r)),a&&a(),o&&t.css(s),t.removeData("keys").stop(e)}});var O=i.Class.extend({init:function(t,e){this.element=t,this.effects=[],this.options=e,this.restore=[]},run:function(e){var i,s,o,a,h,d,u=e.length,p=this.element,f=this.options,g=t.Deferred(),m={},v={};for(this.effects=e,g.then(t.proxy(this,"complete")),p.data("animating",!0),s=0;s<u;s++)for((i=e[s]).setReverse(f.reverse),i.setOptions(f),this.addRestoreProperties(i.restore),i.prepare(m,v),o=0,d=(h=i.children()).length;o<d;o++)h[o].duration(f.duration).run();for(var y in f.effects)r(v,f.effects[y].properties);for(p.is(":visible")||r(m,{display:p.data("olddisplay")||"block"}),l&&!f.reset&&(a=p.data("targetTransform"))&&(m=r(a,m)),m=B(0,m),l&&!c&&(m=I(m)),p.css(m).css(P),s=0;s<u;s++)e[s].setup();return f.init&&f.init(),p.data("targetTransform",v),n.animate(p,v,r({},f,{complete:g.resolve})),g.promise()},stop:function(){t(this.element).kendoStop(!0,!0)},addRestoreProperties:function(t){for(var e,i=this.element,n=0,s=t.length;n<s;n++)e=t[n],this.restore.push(e),i.data(e)||i.data(e,i.css(e))},restoreCallback:function(){for(var t=this.element,e=0,i=this.restore.length;e<i;e++){var n=this.restore[e];t.css(n,t.data(n))}},complete:function(){var e=0,i=this.element,n=this.options,s=this.effects,r=s.length;for(i.removeData("animating").dequeue(),n.hide&&i.data("olddisplay",i.css("display")).hide(),this.restoreCallback(),p&&!l&&setTimeout(t.proxy(this,"restoreCallback"),0);e<r;e++)s[e].teardown();n.completeCallback&&n.completeCallback(i)}});n.promise=function(t,e){var s,r,o=[],a=new O(t,e),h=i.parseEffects(e.effects);for(var l in e.effects=h,h)(s=n[V(l)])&&(r=new s(t,h[l].direction),o.push(r));o[0]?a.run(o):(t.is(":visible")||t.css({display:t.data("olddisplay")||"block"}).css("display"),e.init&&e.init(),t.dequeue(),a.complete())},r(n,{animate:function(e,i,o){var a=!1!==o.transition;delete o.transition,c&&"transition"in n&&a?n.transition(e,i,o):l?e.animate(I(i),{queue:!1,show:!1,hide:!1,duration:o.duration,complete:o.complete}):e.each((function(){var e=t(this),n={};s(w,(function(t,s){var o,a=i?i[s]+" ":null;if(a){var h=i;if(s in d&&void 0!==i[s])o=a.match(g),l&&r(h,{scale:+o[0]});else if(s in u&&void 0!==i[s]){var c=e.css("position"),p="absolute"==c||"fixed"==c;e.data("translate")||(p?e.data("translate",{top:L(e,"top")||0,left:L(e,"left")||0,bottom:L(e,"bottom"),right:L(e,"right")}):e.data("translate",{top:L(e,"marginTop")||0,left:L(e,"marginLeft")||0}));var f=e.data("translate");if(o=a.match(g)){var m="translatey"==s?0:+o[1],v="translatey"==s?+o[1]:+o[2];p?(isNaN(f.right)?isNaN(m)||r(h,{left:f.left+m}):isNaN(m)||r(h,{right:f.right-m}),isNaN(f.bottom)?isNaN(v)||r(h,{top:f.top+v}):isNaN(v)||r(h,{bottom:f.bottom-v})):(isNaN(m)||r(h,{marginLeft:f.left+m}),isNaN(v)||r(h,{marginTop:f.top+v}))}}!l&&"scale"!=s&&s in h&&delete h[s],h&&r(n,h)}})),h.msie&&delete n.scale,e.animate(n,{queue:!1,show:!1,hide:!1,duration:o.duration,complete:o.complete})}))}}),n.animatedPromise=n.promise;var N=i.Class.extend({init:function(t,e){this.element=t,this._direction=e,this.options={},this._additionalEffects=[],this.restore||(this.restore=[])},reverse:function(){return this._reverse=!0,this.run()},play:function(){return this._reverse=!1,this.run()},add:function(t){return this._additionalEffects.push(t),this},direction:function(t){return this._direction=t,this},duration:function(t){return this._duration=t,this},compositeRun:function(){var t=new O(this.element,{reverse:this._reverse,duration:this._duration}),e=this._additionalEffects.concat([this]);return t.run(e)},run:function(){if(this._additionalEffects&&this._additionalEffects[0])return this.compositeRun();var e,i,s=this.element,o=0,a=this.restore,h=a.length,d=t.Deferred(),u={},p={},f=this.children(),g=f.length;for(d.then(t.proxy(this,"_complete")),s.data("animating",!0),o=0;o<h;o++)e=a[o],s.data(e)||s.data(e,s.css(e));for(o=0;o<g;o++)f[o].duration(this._duration).run();return this.prepare(u,p),s.is(":visible")||r(u,{display:s.data("olddisplay")||"block"}),l&&(i=s.data("targetTransform"))&&(u=r(i,u)),u=B(0,u),l&&!c&&(u=I(u)),s.css(u).css(P),this.setup(),s.data("targetTransform",p),n.animate(s,p,{duration:this._duration,complete:d.resolve}),d.promise()},stop:function(){var e=0,i=this.children(),n=i.length;for(e=0;e<n;e++)i[e].stop();return t(this.element).kendoStop(!0,!0),this},restoreCallback:function(){for(var t=this.element,e=0,i=this.restore.length;e<i;e++){var n=this.restore[e];t.css(n,t.data(n))}},_complete:function(){var e=this.element;e.removeData("animating").dequeue(),this.restoreCallback(),this.shouldHide()&&e.data("olddisplay",e.css("display")).hide(),p&&!l&&setTimeout(t.proxy(this,"restoreCallback"),0),this.teardown()},setOptions:function(t){r(!0,this.options,t)},children:function(){return[]},shouldHide:t.noop,setup:t.noop,prepare:t.noop,teardown:t.noop,directions:[],setReverse:function(t){return this._reverse=t,this}});function V(t){return t.charAt(0).toUpperCase()+t.substring(1)}function F(t,e){var i=N.extend(e),r=i.prototype.directions;n[V(t)]=i,n.Element.prototype[t]=function(t,e,n,s){return new i(this.element,t,e,n,s)},s(r,(function(e,s){n.Element.prototype[t+V(s)]=function(t,e,n){return new i(this.element,s,t,e,n)}}))}var H=["left","right","up","down"],U=["in","out"];function $(t,e,i,n){F(t,{directions:U,startValue:function(t){return this._startValue=t,this},endValue:function(t){return this._endValue=t,this},shouldHide:function(){return this._shouldHide},prepare:function(t,s){var r,o,a="out"===this._direction,h=this.element.data(e);r=!(isNaN(h)||h==i)?h:void 0!==this._startValue?this._startValue:a?i:n,o=void 0!==this._endValue?this._endValue:a?n:i,this._reverse?(t[e]=o,s[e]=r):(t[e]=r,s[e]=o),this._shouldHide=s[e]===n}})}F("slideIn",{directions:H,divisor:function(t){return this.options.divisor=t,this},prepare:function(t,e){var i,n=this.element,s=D[this._direction],r=-s.modifier*(s.vertical?n.outerHeight():n.outerWidth())/(this.options&&this.options.divisor||1)+S;this._reverse&&(i=t,t=e,e=i),l?(t[s.transition]=r,e[s.transition]="0px"):(t[s.property]=r,e[s.property]="0px")}}),F("tile",{directions:H,init:function(t,e,i){N.prototype.init.call(this,t,e),this.options={previous:i}},previousDivisor:function(t){return this.options.previousDivisor=t,this},children:function(){var t=this._reverse,e=this.options.previous,n=this.options.previousDivisor||1,s=this._direction,r=[i.fx(this.element).slideIn(s).setReverse(t)];return e&&r.push(i.fx(e).slideIn(D[s].reverse).divisor(n).setReverse(!t)),r}}),$("fade","opacity",1,0),$("zoom","scale",1,.01),F("slideMargin",{prepare:function(t,e){var i,n=this.element,s=this.options,r=n.data("origin"),o=s.offset,a=this._reverse;a||null!==r||n.data("origin",parseFloat(n.css("margin-"+s.axis))),i=n.data("origin")||0,e["margin-"+s.axis]=a?i:i+o}}),F("slideTo",{prepare:function(t,e){var i=this.element,n=this.options.offset.split(","),s=this._reverse;l?(e.translatex=s?0:n[0],e.translatey=s?0:n[1]):(e.left=s?0:n[0],e.top=s?0:n[1]),i.css("left")}}),F("expand",{directions:["horizontal","vertical"],restore:["overflow"],prepare:function(t,e){var i=this.element,n=this.options,s=this._reverse,r="vertical"===this._direction?"height":"width",o=i[0].style[r],a=i.data(r),h=parseFloat(a||o),l=C(i.css(r,"auto")[r]());t.overflow="hidden",h=n&&n.reset?l||h:h||l,e[r]=(s?0:h)+S,t[r]=(s?h:0)+S,void 0===a&&i.data(r,o)},shouldHide:function(){return this._reverse},teardown:function(){var t=this.element,e="vertical"===this._direction?"height":"width",i=t.data(e);"auto"!=i&&""!==i||setTimeout((function(){t.css(e,"auto").css(e)}),0)}});var j={position:"absolute",marginLeft:0,marginTop:0,scale:1};F("transfer",{init:function(t,e){this.element=t,this.options={target:e},this.restore=[]},setup:function(){this.element.appendTo(document.body)},prepare:function(t,e){var i,n=this.element,s=this.options,o=this._reverse,a=s.target,h=R(n,"scale"),l=a.offset(),c=a.outerHeight()/n.outerHeight();r(t,j),e.scale=1,n.css(P,"scale(1)").css(P),i=n.offset(),n.css(P,"scale("+h+")");var d=l.left-i.left,u=l.top-i.top,p=0+n.outerWidth(),f=(u-0)/(d-0),g=(u-0)/(d+a.outerWidth()-p),m=(0-0*f+g*p)/(g-f),v=0+f*(m-0);t.top=i.top,t.left=i.left,t.transformOrigin=m+S+" "+v+S,o?t.scale=c:e.scale=c}});var G={top:"rect(auto auto $size auto)",bottom:"rect($size auto auto auto)",left:"rect(auto $size auto auto)",right:"rect(auto auto auto $size)"},W={top:{start:"rotatex(0deg)",end:"rotatex(180deg)"},bottom:{start:"rotatex(-180deg)",end:"rotatex(0deg)"},left:{start:"rotatey(0deg)",end:"rotatey(-180deg)"},right:{start:"rotatey(180deg)",end:"rotatey(0deg)"}};function q(t,e){var n=t[i.directions[e].vertical?"height":"width"]()/2+"px";return G[e].replace("$size",n)}F("turningPage",{directions:H,init:function(t,e,i){N.prototype.init.call(this,t,e),this._container=i},prepare:function(t,e){var n=this._reverse,s=n?D[this._direction].reverse:this._direction,r=W[s];t.zIndex=1,this._clipInHalf&&(t.clip=q(this._container,i.directions[s].reverse)),t[A]="hidden",e[P]="perspective(1500px)"+(n?r.start:r.end),t[P]="perspective(1500px)"+(n?r.end:r.start)},setup:function(){this._container.append(this.element)},face:function(t){return this._face=t,this},shouldHide:function(){var t=this._reverse,e=this._face;return t&&!e||!t&&e},clipInHalf:function(t){return this._clipInHalf=t,this},temporary:function(){return this.element.addClass("temp-page"),this}}),F("staticPage",{directions:H,init:function(t,e,i){N.prototype.init.call(this,t,e),this._container=i},restore:["clip"],prepare:function(t,e){var i=this._reverse?D[this._direction].reverse:this._direction;t.clip=q(this._container,i),t.opacity=.999,e.opacity=1},shouldHide:function(){var t=this._reverse,e=this._face;return t&&!e||!t&&e},face:function(t){return this._face=t,this}}),F("pageturn",{directions:["horizontal","vertical"],init:function(t,e,i,n){N.prototype.init.call(this,t,e),this.options={},this.options.face=i,this.options.back=n},children:function(){var t,e=this.options,n="horizontal"===this._direction?"left":"top",s=i.directions[n].reverse,r=this._reverse,o=e.face.clone(!0).removeAttr("id"),a=e.back.clone(!0).removeAttr("id"),h=this.element;return r&&(t=n,n=s,s=t),[i.fx(e.face).staticPage(n,h).face(!0).setReverse(r),i.fx(e.back).staticPage(s,h).setReverse(r),i.fx(o).turningPage(n,h).face(!0).clipInHalf(!0).temporary().setReverse(r),i.fx(a).turningPage(s,h).clipInHalf(!0).temporary().setReverse(r)]},prepare:function(t,e){t[z]="1500px",t.transformStyle="preserve-3d",t.opacity=.999,e.opacity=1},teardown:function(){this.element.find(".temp-page").remove()}}),F("flip",{directions:["horizontal","vertical"],init:function(t,e,i,n){N.prototype.init.call(this,t,e),this.options={},this.options.face=i,this.options.back=n},children:function(){var t,e=this.options,n="horizontal"===this._direction?"left":"top",s=i.directions[n].reverse,r=this._reverse,o=this.element;return r&&(t=n,n=s,s=t),[i.fx(e.face).turningPage(n,o).face(!0).setReverse(r),i.fx(e.back).turningPage(s,o).setReverse(r)]},prepare:function(t){t[z]="1500px",t.transformStyle="preserve-3d"}});var Y=!a.mobileOS.android;F("replace",{init:function(e,i,n){N.prototype.init.call(this,e),this._previous=t(i),this._transitionClass=n},duration:function(){throw new Error("The replace effect does not support duration setting; the effect duration may be customized through the transition class rule")},_both:function(){return t().add(this._element).add(this._previous)},_containerClass:function(){var t=this._direction,e="k-fx k-fx-start k-fx-"+this._transitionClass;return t&&(e+=" k-fx-"+t),this._reverse&&(e+=" k-fx-reverse"),e},complete:function(){if(this.deferred){var t=this.container;t.removeClass("k-fx-end").removeClass(this._containerClass()),this._previous.hide().removeClass("k-fx-current"),this.element.removeClass("k-fx-next"),Y&&t.css("overflow",""),this.isAbsolute||this._both().css("position",""),this.deferred.resolve(),delete this.deferred}},run:function(){if(this._additionalEffects&&this._additionalEffects[0])return this.compositeRun();var e=this.element,n=this._previous,s=(this._direction,e.parents().filter(n.parents()).first()),r=this._both(),o=t.Deferred(),a=e.css("position");return s.length||(s=e.parent()),this.container=s,this.deferred=o,this.isAbsolute="absolute"==a,this.isAbsolute||r.css("position","absolute"),Y&&(s.css("overflow"),s.css("overflow","hidden")),c?(e.addClass("k-fx-hidden"),s.addClass(this._containerClass()),s.one(c.event,t.proxy(this,"complete")),i.animationFrame((function(){e.removeClass("k-fx-hidden").addClass("k-fx-next"),n.css("display","").addClass("k-fx-current"),i.animationFrame((function(){s.removeClass("k-fx-start").addClass("k-fx-end")}))}))):this.complete(),o.promise()},stop:function(){this.complete()}});var Q=i.Class.extend({init:function(){this._tickProxy=o(this._tick,this),this._started=!1},tick:t.noop,done:t.noop,onEnd:t.noop,onCancel:t.noop,start:function(){this.enabled()&&(this.done()?this.onEnd():(this._started=!0,i.animationFrame(this._tickProxy)))},enabled:function(){return!0},cancel:function(){this._started=!1,this.onCancel()},_tick:function(){this._started&&(this.tick(),this.done()?(this._started=!1,this.onEnd()):i.animationFrame(this._tickProxy))}}),X=Q.extend({init:function(t){r(this,t),Q.fn.init.call(this)},done:function(){return this.timePassed()>=this.duration},timePassed:function(){return Math.min(this.duration,new Date-this.startDate)},moveTo:function(t){var e=this.movable;this.initial=e[this.axis],this.delta=t.location-this.initial,this.duration="number"==typeof t.duration?t.duration:300,this.tick=this._easeProxy(t.ease),this.startDate=new Date,this.start()},_easeProxy:function(t){var e=this;return function(){e.movable.moveAxis(e.axis,t(e.timePassed(),e.initial,e.delta,e.duration))}}});r(X,{easeOutExpo:function(t,e,i,n){return t==n?e+i:i*(1-Math.pow(2,-10*t/n))+e},easeOutBack:function(t,e,i,n,s){return i*((t=t/n-1)*t*(((s=1.70158)+1)*t+s)+1)+e}}),n.Animation=Q,n.Transition=X,n.createEffect=F}(window.kendo.jQuery),function(t,e){var i=window.kendo,n=i.support,s=window.location,r=window.history,o=i.support.browser.msie,a=/^#*/,h=window.document;function l(t,e){return e?(t+"/"===e&&(t=e),new RegExp("^"+e,"i").test(t)||(t=e+"/"+t),s.protocol+"//"+(s.host+"/"+t).replace(/\/\/+/g,"/")):t}function c(t){return t?"#!":"#"}function d(t){var e=s.href;return"#!"===t&&e.indexOf("#")>-1&&e.indexOf("#!")<0?null:e.split(t)[1]||""}function u(t,e){return 0===e.indexOf(t)?e.substr(t.length).replace(/\/\//g,"/"):e}var p=i.Class.extend({back:function(){o?setTimeout((function(){r.back()})):r.back()},forward:function(){o?setTimeout((function(){r.forward()})):r.forward()},length:function(){return r.length},replaceLocation:function(t){s.replace(t)}}),f=p.extend({init:function(t){this.root=t},navigate:function(t){r.pushState({},h.title,l(t,this.root))},replace:function(t){r.replaceState({},h.title,l(t,this.root))},normalize:function(t){return u(this.root,t)},current:function(){var t=s.pathname;return s.search&&(t+=s.search),u(this.root,t)},change:function(e){t(window).bind("popstate.kendo",e)},stop:function(){t(window).unbind("popstate.kendo")},normalizeCurrent:function(t){var e,i=t.root,n=s.pathname,o=d(c(t.hashBang));i===n+"/"&&(e=i),i===n&&o&&(e=l(o.replace(a,""),i)),e&&r.pushState({},h.title,e)}});function g(t){return t.replace(/^(#)?/,"#")}function m(t){return t.replace(/^(#(!)?)?/,"#!")}var v=p.extend({init:function(t){this._id=i.guid(),this.prefix=c(t),this.fix=t?m:g},navigate:function(t){s.hash=this.fix(t)},replace:function(t){this.replaceLocation(this.fix(t))},normalize:function(t){return t.indexOf(this.prefix)<0?t:t.split(this.prefix)[1]},change:function(e){n.hashChange?t(window).on("hashchange."+this._id,e):this._interval=setInterval(e,50)},stop:function(){t(window).off("hashchange."+this._id),clearInterval(this._interval)},current:function(){return d(this.prefix)},normalizeCurrent:function(t){var e=s.pathname,i=t.root;return!(!t.pushState||i===e)&&(this.replaceLocation(i+this.prefix+u(i,e)),!0)}}),y=i.Observable.extend({start:function(e){if(e=e||{},this.bind(["change","back","same"],e),!this._started){this._started=!0,e.root=e.root||"/";var i,n=this.createAdapter(e);n.normalizeCurrent(e)||(i=n.current(),t.extend(this,{adapter:n,root:e.root,historyLength:n.length(),current:i,locations:[i]}),n.change(t.proxy(this,"_checkUrl")))}},createAdapter:function(t){return n.pushState&&t.pushState?new f(t.root):new v(t.hashBang)},stop:function(){this._started&&(this.adapter.stop(),this.unbind("change"),this._started=!1)},change:function(t){this.bind("change",t)},replace:function(t,e){this._navigate(t,e,(function(e){e.replace(t),this.locations[this.locations-1]=this.current}))},navigate:function(t,e){"#:back"!==t?this._navigate(t,e,(function(e){e.navigate(t),this.locations.push(this.current)})):this.adapter.back()},_navigate:function(t,e,i){var n=this.adapter;t=n.normalize(t),this.current!==t&&this.current!==decodeURIComponent(t)?!e&&this.trigger("change",{url:t})||(this.current=t,i.call(this,n),this.historyLength=n.length()):this.trigger("same")},_checkUrl:function(){var t=this.adapter,e=t.current(),i=t.length(),n=this.historyLength===i,s=e===this.locations[this.locations.length-2]&&n,r=this.current;return null===e||this.current===e||this.current===decodeURIComponent(e)||(this.historyLength=i,this.current=e,s&&this.trigger("back",{url:r,to:e})?(t.forward(),void(this.current=r)):this.trigger("change",{url:e})?(s?t.forward():(t.back(),this.historyLength--),void(this.current=r)):void(s?this.locations.pop():this.locations.push(e)))}});i.History=y,i.History.HistoryAdapter=p,i.History.HashAdapter=v,i.History.PushStateAdapter=f,i.absoluteURL=l,i.history=new y}(window.kendo.jQuery),function(){var t=window.kendo,e=t.history,i=t.Observable,n=/\((.*?)\)/g,s=/(\(\?)?:\w+/g,r=/\*\w+/g,o=/[\-{}\[\]+?.,\\\^$|#\s]/g;function a(t,e){return e?t:"([^/]+)"}function h(t){return t.replace(/(\?.*)|(#.*)/g,"")}var l=t.Class.extend({init:function(t,e){t instanceof RegExp||(t=function(t){return new RegExp("^"+t.replace(o,"\\$&").replace(n,"(?:$1)?").replace(s,a).replace(r,"(.*?)")+"$")}(t)),this.route=t,this._callback=e},callback:function(e){var i,n,s=0,r=t.parseQueryStringParams(e);for(e=h(e),n=(i=this.route.exec(e).slice(1)).length;s<n;s++)void 0!==i[s]&&(i[s]=decodeURIComponent(i[s]));i.push(r),this._callback.apply(null,i)},worksWith:function(t){return!!this.route.test(h(t))&&(this.callback(t),!0)}}),c=i.extend({init:function(t){t||(t={}),i.fn.init.call(this),this.routes=[],this.pushState=t.pushState,this.hashBang=t.hashBang,this.root=t.root,this.bind(["init","routeMissing","change","same"],t)},destroy:function(){e.unbind("change",this._urlChangedProxy),e.unbind("same",this._sameProxy),e.unbind("back",this._backProxy),this.unbind()},start:function(){var t=this,i=function(e){t._back(e)},n=function(e){t._urlChanged(e)};e.start({same:function(){t._same()},change:n,back:i,pushState:t.pushState,hashBang:t.hashBang,root:t.root});var s={url:e.current||"/",preventDefault:$.noop};t.trigger("init",s)||t._urlChanged(s),this._urlChangedProxy=n,this._backProxy=i},route:function(t,e){this.routes.push(new l(t,e))},navigate:function(e,i){t.history.navigate(e,i)},replace:function(e,i){t.history.replace(e,i)},_back:function(t){this.trigger("back",{url:t.url,to:t.to})&&t.preventDefault()},_same:function(t){this.trigger("same")},_urlChanged:function(e){var i=e.url;if(i||(i="/"),this.trigger("change",{url:e.url,params:t.parseQueryStringParams(e.url)}))e.preventDefault();else{for(var n=0,s=this.routes,r=s.length;n<r;n++)if(s[n].worksWith(i))return;this.trigger("routeMissing",{url:i,params:t.parseQueryStringParams(i)})&&e.preventDefault()}}});t.Router=c}(),function(t,e){var i=window.kendo,n=t.extend,s={eq:"eq",neq:"ne",gt:"gt",gte:"ge",lt:"lt",lte:"le",contains:"substringof",doesnotcontain:"substringof",endswith:"endswith",startswith:"startswith"},r={pageSize:t.noop,page:t.noop,filter:function(e,n){n&&(e.$filter=function e(n){var r,o,a,h,l,c,d,u,p=[],f=n.logic||"and",g=n.filters;for(r=0,o=g.length;r<o;r++)n=g[r],a=n.field,d=n.value,c=n.operator,n.filters?n=e(n):(u=n.ignoreCase,a=a.replace(/\./g,"/"),(n=s[c])&&void 0!==d&&("string"===(h=t.type(d))?(l="'{1}'",d=d.replace(/'/g,"''"),!0===u&&(a="tolower("+a+")")):l="date"===h?"datetime'{1:yyyy-MM-ddTHH:mm:ss}'":"{1}",n.length>3?"substringof"!==n?l="{0}({2},"+l+")":(l="{0}("+l+",{2})","doesnotcontain"===c&&(l+=" eq false")):l="{2} {0} "+l,n=i.format(l,n,d,a))),p.push(n);n=p.join(" "+f+" "),p.length>1&&(n="("+n+")");return n}(n))},sort:function(e,i){var n=t.map(i,(function(t){var e=t.field.replace(/\./g,"/");return"desc"===t.dir&&(e+=" desc"),e})).join(",");n&&(e.$orderby=n)},skip:function(t,e){e&&(t.$skip=e)},take:function(t,e){e&&(t.$top=e)}},o={read:{dataType:"jsonp"}};n(!0,i.data,{schemas:{odata:{type:"json",data:function(t){return t.d.results||[t.d]},total:"d.__count"}},transports:{odata:{read:{cache:!0,dataType:"jsonp",jsonp:"$callback"},update:{cache:!0,dataType:"json",contentType:"application/json",type:"PUT"},create:{cache:!0,dataType:"json",contentType:"application/json",type:"POST"},destroy:{cache:!0,dataType:"json",type:"DELETE"},parameterMap:function(t,e){var n,s,a,h;if(t=t||{},e=e||"read",h=(h=(this.options||o)[e])?h.dataType:"json","read"===e)for(a in n={$inlinecount:"allpages"},"json"!=h&&(n.$format="json"),t)r[a]?r[a](n,t[a]):n[a]=t[a];else{if("json"!==h)throw new Error("Only json dataType can be used for "+e+" operation.");if("destroy"!==e){for(a in t)"number"==typeof(s=t[a])&&(t[a]=s+"");n=i.stringify(t)}}return n}}}})}(window.kendo.jQuery),function(t,e){var i=window.kendo,n=t.isArray,s=t.isPlainObject,r=t.map,o=t.each,a=t.extend,h=i.getter,l=i.Class.extend({init:function(t){var e=this,h=t.total,l=t.model,c=t.parse,d=t.errors,u=t.serialize,p=t.data;if(l){if(s(l)){var f=t.modelBase||i.data.Model;l.fields&&o(l.fields,(function(t,i){i=s(i)&&i.field?a(i,{field:e.getter(i.field)}):{field:e.getter(i)},l.fields[t]=i}));var g=l.id;if(g){var m={};m[e.xpathToMember(g,!0)]={field:e.getter(g)},l.fields=a(m,l.fields),l.id=e.xpathToMember(g)}l=f.define(l)}e.model=l}if(h&&("string"==typeof h?(h=e.getter(h),e.total=function(t){return parseInt(h(t),10)}):"function"==typeof h&&(e.total=h)),d&&("string"==typeof d?(d=e.getter(d),e.errors=function(t){return d(t)||null}):"function"==typeof d&&(e.errors=d)),p&&("string"==typeof p?(p=e.xpathToMember(p),e.data=function(t){var i,s=e.evaluate(t,p);return s=n(s)?s:[s],e.model&&l.fields?(i=new e.model,r(s,(function(t){if(t){var e,n={};for(e in l.fields)n[e]=i._parse(e,l.fields[e].field(t));return n}}))):s}):"function"==typeof p&&(e.data=p)),"function"==typeof c){var v=e.parse;e.parse=function(t){var i=c.call(e,t);return v.call(e,i)}}"function"==typeof u&&(e.serialize=u)},total:function(t){return this.data(t).length},errors:function(t){return t?t.errors:null},serialize:function(t){return t},parseDOM:function(t){var e,i,s,r,o,a,h,l={},c=t.attributes,d=c.length;for(h=0;h<d;h++)l["@"+(a=c[h]).nodeName]=a.nodeValue;for(i=t.firstChild;i;i=i.nextSibling)3===(s=i.nodeType)||4===s?l["#text"]=i.nodeValue:1===s&&(e=this.parseDOM(i),o=l[r=i.nodeName],n(o)?o.push(e):o=void 0!==o?[o,e]:e,l[r]=o);return l},evaluate:function(t,e){for(var i,s,r,o,a,h=e.split(".");i=h.shift();)if(t=t[i],n(t)){for(s=[],e=h.join("."),a=0,r=t.length;a<r;a++)o=this.evaluate(t[a],e),o=n(o)?o:[o],s.push.apply(s,o);return s}return t},parse:function(e){var i,n,s={};return i=e.documentElement||t.parseXML(e).documentElement,n=this.parseDOM(i),s[i.nodeName]=n,s},xpathToMember:function(t,e){return t?(t=t.replace(/^\//,"").replace(/\//g,".")).indexOf("@")>=0?t.replace(/\.?(@.*)/,e?"$1":'["$1"]'):t.indexOf("text()")>=0?t.replace(/(\.?text\(\))/,e?"#text":'["#text"]'):t:""},getter:function(t){return h(this.xpathToMember(t),!0)}});t.extend(!0,i.data,{XmlDataReader:l,readers:{xml:l}})}(window.kendo.jQuery),function(t,e){var i,n=t.extend,s=t.proxy,r=t.isPlainObject,o=t.isEmptyObject,a=t.isArray,h=t.grep,l=t.ajax,c=t.each,d=t.noop,u=window.kendo,p=u.isFunction,f=u.Observable,g=u.Class,m="string",v="change",y="error",b=["create","read","update","destroy"],w=function(t){return t},x=u.getter,_=u.stringify,k=Math,C=[].push,S=[].join,T=[].pop,P=[].splice,A=[].shift,z=[].slice,D=[].unshift,E={}.toString,M=u.support.stableSort,L=/^\/Date\((.*?)\)\/$/,I=/(\r+|\n+)/g,B=/(?=['\\])/g,R=f.extend({init:function(t,e){this.type=e||N,f.fn.init.call(this),this.length=t.length,this.wrapAll(t,this)},toJSON:function(){var t,e,i=this.length,n=new Array(i);for(t=0;t<i;t++)(e=this[t])instanceof N&&(e=e.toJSON()),n[t]=e;return n},parent:d,wrapAll:function(t,e){var i,n,s=this,r=function(){return s};for(e=e||[],i=0,n=t.length;i<n;i++)e[i]=s.wrap(t[i],r);return e},wrap:function(t,e){var i=this;return null!==t&&"[object Object]"===E.call(t)&&(t instanceof i.type||t instanceof H||(t=t instanceof N?t.toJSON():t,t=new i.type(t)),t.parent=e,t.bind(v,(function(t){i.trigger(v,{field:t.field,node:t.node,index:t.index,items:t.items||[this],action:t.node&&t.action||"itemchange"})}))),t},push:function(){var t,e=this.length,i=this.wrapAll(arguments);return t=C.apply(this,i),this.trigger(v,{action:"add",index:e,items:i}),t},slice:z,join:S,pop:function(){var t=this.length,e=T.apply(this);return t&&this.trigger(v,{action:"remove",index:t-1,items:[e]}),e},splice:function(t,e,i){var n,s,r,o=this.wrapAll(z.call(arguments,2));if((n=P.apply(this,[t,e].concat(o))).length)for(this.trigger(v,{action:"remove",index:t,items:n}),s=0,r=n.length;s<r;s++)n[s].children&&n[s].unbind(v);return i&&this.trigger(v,{action:"add",index:t,items:o}),n},shift:function(){var t=this.length,e=A.apply(this);return t&&this.trigger(v,{action:"remove",index:0,items:[e]}),e},unshift:function(){var t,e=this.wrapAll(arguments);return t=D.apply(this,e),this.trigger(v,{action:"add",index:0,items:e}),t},indexOf:function(t){var e,i;for(e=0,i=this.length;e<i;e++)if(this[e]===t)return e;return-1},forEach:function(t){for(var e=0,i=this.length;e<i;e++)t(this[e],e,this)},map:function(t){for(var e=0,i=[],n=this.length;e<n;e++)i[e]=t(this[e],e,this);return i},filter:function(t){for(var e,i=0,n=[],s=this.length;i<s;i++)t(e=this[i],i,this)&&(n[n.length]=e);return n},find:function(t){for(var e,i=0,n=this.length;i<n;i++)if(t(e=this[i],i,this))return e},every:function(t){for(var e=0,i=this.length;e<i;e++)if(!t(this[e],e,this))return!1;return!0},some:function(t){for(var e=0,i=this.length;e<i;e++)if(t(this[e],e,this))return!0;return!1},remove:function(t){this.splice(this.indexOf(t),1)},empty:function(){this.splice(0,this.length)}});function O(t,e,i,n){return function(s){var r,o={};for(r in s)o[r]=s[r];o.field=n?i+"."+s.field:i,e==v&&t._notifyChange&&t._notifyChange(o),t.trigger(e,o)}}var N=f.extend({init:function(t){var e,i,n=this,s=function(){return n};for(i in f.fn.init.call(this),t)e=t[i],"_"!=i.charAt(0)&&(e=n.wrap(e,i,s)),n[i]=e;n.uid=u.guid()},shouldSerialize:function(t){return this.hasOwnProperty(t)&&"_events"!==t&&"function"!==_typeof(this[t])&&"uid"!==t},forEach:function(t){for(var e in this)this.shouldSerialize(e)&&t(this[e],e)},toJSON:function(){var t,e,i={};for(e in this)this.shouldSerialize(e)&&(((t=this[e])instanceof N||t instanceof R)&&(t=t.toJSON()),i[e]=t);return i},get:function(t){return this.trigger("get",{field:t}),"this"===t?this:u.getter(t,!0)(this)},_set:function(t,e){var i=t.indexOf(".")>=0;if(i)for(var n=t.split("."),s="";n.length>1;){s+=n.shift();var r=u.getter(s,!0)(this);if(r instanceof N)return r.set(n.join("."),e),i;s+="."}return u.setter(t)(this,e),i},set:function(t,e){var i=this,n=t.indexOf(".")>=0;u.getter(t,!0)(i)!==e&&(i.trigger("set",{field:t,value:e})||(n||(e=i.wrap(e,t,(function(){return i}))),(!i._set(t,e)||t.indexOf("(")>=0||t.indexOf("[")>=0)&&i.trigger(v,{field:t})))},parent:d,wrap:function(t,e,i){var n=E.call(t);if(null!=t&&("[object Object]"===n||"[object Array]"===n)){var s=t instanceof R,r=t instanceof mt;"[object Object]"!==n||r||s?("[object Array]"===n||s||r)&&(s||r||(t=new R(t)),t.parent()!=i()&&t.bind(v,O(this,v,e,!1))):(t instanceof N||(t=new N(t)),t.parent()!=i()&&(t.bind("get",O(this,"get",e,!0)),t.bind(v,O(this,v,e,!0)))),t.parent=i}return t}});var V={number:function(t){return u.parseFloat(t)},date:function(t){return u.parseDate(t)},boolean:function(t){return _typeof(t)===m?"true"===t.toLowerCase():null!=t?!!t:t},string:function(t){return null!=t?t+"":t},default:function(t){return t}},F={string:"",number:0,date:new Date,boolean:!1,default:""};var H=N.extend({init:function(e){e&&!t.isEmptyObject(e)||(e=t.extend({},this.defaults,e)),N.fn.init.call(this,e),this.dirty=!1,this.idField&&(this.id=this.get(this.idField),void 0===this.id&&(this.id=this._defaultId))},shouldSerialize:function(t){return N.fn.shouldSerialize.call(this,t)&&"uid"!==t&&!("id"!==this.idField&&"id"===t)&&"dirty"!==t&&"_accessors"!==t},_parse:function(t,e){var i,n=t,s=this.fields||{};return(t=s[t])||(t=function(t,e){var i,n;for(n in t){if(i=t[n],r(i)&&i.field&&i.field===e)return i;if(i===e)return i}return null}(s,n)),t&&!(i=t.parse)&&t.type&&(i=V[t.type.toLowerCase()]),i?i(e):e},_notifyChange:function(t){var e=t.action;"add"!=e&&"remove"!=e||(this.dirty=!0)},editable:function(t){return!(t=(this.fields||{})[t])||!1!==t.editable},set:function(e,i,n){this.editable(e)&&(function e(i,n){if(i===n)return!0;var s,r=t.type(i);if(r!==t.type(n))return!1;if("date"===r)return i.getTime()===n.getTime();if("object"!==r&&"array"!==r)return!1;for(s in i)if(!e(i[s],n[s]))return!1;return!0}(i=this._parse(e,i),this.get(e))||(this.dirty=!0,N.fn.set.call(this,e,i,n)))},accept:function(t){var e,i=this,n=function(){return i};for(e in t){var s=t[e];"_"!=e.charAt(0)&&(s=i.wrap(t[e],e,n)),i._set(e,s)}i.idField&&(i.id=i.get(i.idField)),i.dirty=!1},isNew:function(){return this.id===this._defaultId}});H.define=function(t,e){void 0===e&&(e=t,t=H);var i,s,r,o,a,h,l,c,d=n({defaults:{}},e),u={},p=d.id;if(p&&(d.idField=p),d.id&&delete d.id,p&&(d.defaults[p]=d._defaultId=""),"[object Array]"===E.call(d.fields)){for(h=0,l=d.fields.length;h<l;h++)r=d.fields[h],_typeof(r)===m?u[r]={}:r.field&&(u[r.field]=r);d.fields=u}for(s in d.fields)o=(r=d.fields[s]).type||"default",a=null,c=s,s=_typeof(r.field)===m?r.field:s,r.nullable||(a=d.defaults[c!==s?c:s]=void 0!==r.defaultValue?r.defaultValue:F[o.toLowerCase()]),e.id===s&&(d._defaultId=a),d.defaults[c!==s?c:s]=a,r.parse=r.parse||V[o];return(i=t.extend(d)).define=function(t){return H.define(i,t)},d.fields&&(i.fields=d.fields,i.idField=d.idField),i};var U={selector:function(t){return p(t)?t:x(t)},compare:function(t){var e=this.selector(t);return function(t,i){return t=e(t),i=e(i),null==t&&null==i?0:null==t?-1:null==i?1:t.localeCompare?t.localeCompare(i):t>i?1:t<i?-1:0}},create:function(t){var e=t.compare||this.compare(t.field);return"desc"==t.dir?function(t,i){return e(i,t,!0)}:e},combine:function(t){return function(e,i){var n,s,r=t[0](e,i);for(n=1,s=t.length;n<s;n++)r=r||t[n](e,i);return r}}},$=n({},U,{asc:function(t){var e=this.selector(t);return function(t,i){var n=e(t),s=e(i);return n&&n.getTime&&s&&s.getTime&&(n=n.getTime(),s=s.getTime()),n===s?t.__position-i.__position:null==n?-1:null==s?1:n.localeCompare?n.localeCompare(s):n>s?1:-1}},desc:function(t){var e=this.selector(t);return function(t,i){var n=e(t),s=e(i);return n&&n.getTime&&s&&s.getTime&&(n=n.getTime(),s=s.getTime()),n===s?t.__position-i.__position:null==n?1:null==s?-1:s.localeCompare?s.localeCompare(n):n<s?1:-1}},create:function(t){return this[t.dir](t.field)}});i=function(t,e){var i,n=t.length,s=new Array(n);for(i=0;i<n;i++)s[i]=e(t[i],i,t);return s};var j=function(){function t(t){return t.replace(B,"\\").replace(I,"")}function e(e,i,n,s){var r;return null!=n&&(_typeof(n)===m&&(n=t(n),(r=L.exec(n))?n=new Date(+r[1]):s?(n="'"+n.toLowerCase()+"'",i="("+i+" || '').toLowerCase()"):n="'"+n+"'"),n.getTime&&(i="("+i+"?"+i+".getTime():"+i+")",n=n.getTime())),i+" "+e+" "+n}return{eq:function(t,i,n){return e("==",t,i,n)},neq:function(t,i,n){return e("!=",t,i,n)},gt:function(t,i,n){return e(">",t,i,n)},gte:function(t,i,n){return e(">=",t,i,n)},lt:function(t,i,n){return e("<",t,i,n)},lte:function(t,i,n){return e("<=",t,i,n)},startswith:function(e,i,n){return n&&(e="("+e+" || '').toLowerCase()",i&&(i=i.toLowerCase())),i&&(i=t(i)),e+".lastIndexOf('"+i+"', 0) == 0"},endswith:function(e,i,n){return n&&(e="("+e+" || '').toLowerCase()",i&&(i=i.toLowerCase())),i&&(i=t(i)),e+".indexOf('"+i+"', "+e+".length - "+(i||"").length+") >= 0"},contains:function(e,i,n){return n&&(e="("+e+" || '').toLowerCase()",i&&(i=i.toLowerCase())),i&&(i=t(i)),e+".indexOf('"+i+"') >= 0"},doesnotcontain:function(e,i,n){return n&&(e="("+e+" || '').toLowerCase()",i&&(i=i.toLowerCase())),i&&(i=t(i)),e+".indexOf('"+i+"') == -1"}}}();function G(t){this.data=t||[]}function W(t,e){if(t){var i=_typeof(t)===m?{field:t,dir:e}:t,n=a(i)?i:void 0!==i?[i]:[];return h(n,(function(t){return!!t.dir}))}}G.filterExpr=function(t){var e,i,n,s,r,o,a=[],h=[],l=[],c=t.filters;for(e=0,i=c.length;e<i;e++)r=(n=c[e]).field,o=n.operator,n.filters?(n=(s=G.filterExpr(n)).expression.replace(/__o\[(\d+)\]/g,(function(t,e){return e=+e,"__o["+(l.length+e)+"]"})).replace(/__f\[(\d+)\]/g,(function(t,e){return e=+e,"__f["+(h.length+e)+"]"})),l.push.apply(l,s.operators),h.push.apply(h,s.fields)):("function"===_typeof(r)?(s="__f["+h.length+"](d)",h.push(r)):s=u.expr(r),"function"===_typeof(o)?(n="__o["+l.length+"]("+s+", "+n.value+")",l.push(o)):n=j[(o||"eq").toLowerCase()](s,n.value,void 0===n.ignoreCase||n.ignoreCase)),a.push(n);return{expression:"("+a.join({and:" && ",or:" || "}[t.logic])+")",fields:h,operators:l}};var q={"==":"eq",equals:"eq",isequalto:"eq",equalto:"eq",equal:"eq","!=":"neq",ne:"neq",notequals:"neq",isnotequalto:"neq",notequalto:"neq",notequal:"neq","<":"lt",islessthan:"lt",lessthan:"lt",less:"lt","<=":"lte",le:"lte",islessthanorequalto:"lte",lessthanequal:"lte",">":"gt",isgreaterthan:"gt",greaterthan:"gt",greater:"gt",">=":"gte",isgreaterthanorequalto:"gte",greaterthanequal:"gte",ge:"gte",notsubstringof:"doesnotcontain"};function Y(t){if(t&&!o(t))return!a(t)&&t.filters||(t={logic:"and",filters:a(t)?t:[t]}),function t(e){var i,n,s,r,o=e.filters;if(o)for(i=0,n=o.length;i<n;i++)(r=(s=o[i]).operator)&&_typeof(r)===m&&(s.operator=q[r.toLowerCase()]||r),t(s)}(t),t}function Q(t,e){var n=_typeof(t)===m?{field:t,dir:e}:t,s=a(n)?n:void 0!==n?[n]:[];return i(s,(function(t){return{field:t.field,dir:t.dir||"asc",aggregates:t.aggregates}}))}function X(t,e){return t&&t.getTime&&e&&e.getTime?t.getTime()===e.getTime():t===e}function Z(t,e,i,n,s,r){var o,a,h,l=(e=e||[]).length;for(o=0;o<l;o++){h=(a=e[o]).aggregate;var c=a.field;t[c]=t[c]||{},r[c]=r[c]||{},r[c][h]=r[c][h]||{},t[c][h]=K[h.toLowerCase()](t[c][h],i,u.accessor(c),n,s,r[c][h])}}G.normalizeFilter=Y,G.prototype={toArray:function(){return this.data},range:function(t,e){return new G(this.data.slice(t,t+e))},skip:function(t){return new G(this.data.slice(t))},take:function(t){return new G(this.data.slice(0,t))},select:function(t){return new G(i(this.data,t))},order:function(t,e){var i={dir:e};return t&&(t.compare?i.compare=t.compare:i.field=t),new G(this.data.slice(0).sort(U.create(i)))},orderBy:function(t){return this.order(t,"asc")},orderByDescending:function(t){return this.order(t,"desc")},sort:function(t,e,i){var n,s,r=W(t,e),o=[];if(i=i||U,r.length){for(n=0,s=r.length;n<s;n++)o.push(i.create(r[n]));return this.orderBy({compare:i.combine(o)})}return this},filter:function(t){var e,i,n,s,r,o,a,h,l=this.data,c=[];if(!(t=Y(t))||0===t.filters.length)return this;for(s=G.filterExpr(t),o=s.fields,a=s.operators,r=h=new Function("d, __f, __o","return "+s.expression),(o.length||a.length)&&(h=function(t){return r(t,o,a)}),e=0,n=l.length;e<n;e++)h(i=l[e])&&c.push(i);return new G(c)},group:function(t,e){t=Q(t||[]),e=e||this.data;var i,n=new G(this.data);return t.length>0&&(i=t[0],n=n.groupBy(i).select((function(n){var s=new G(e).filter([{field:n.field,operator:"eq",value:n.value,ignoreCase:!1}]);return{field:n.field,value:n.value,items:t.length>1?new G(n.items).group(t.slice(1),s.toArray()).toArray():n.items,hasSubgroups:t.length>1,aggregates:s.aggregate(i.aggregates)}}))),n},groupBy:function(t){if(o(t)||!this.data.length)return new G([]);var e,i,n,s,r=t.field,a=this._sortForGrouping(r,t.dir||"asc"),h=u.accessor(r),l=h.get(a[0],r),c={field:r,value:l,items:[]},d=[c];for(n=0,s=a.length;n<s;n++)e=a[n],X(l,i=h.get(e,r))||(c={field:r,value:l=i,items:[]},d.push(c)),c.items.push(e);return new G(d)},_sortForGrouping:function(t,e){var i,n,s=this.data;if(!M){for(i=0,n=s.length;i<n;i++)s[i].__position=i;for(i=0,n=(s=new G(s).sort(t,e,$).toArray()).length;i<n;i++)delete s[i].__position;return s}return this.sort(t,e).toArray()},aggregate:function(t){var e,i,n={},s={};if(t&&t.length)for(e=0,i=this.data.length;e<i;e++)Z(n,t,this.data[e],e,i,s);return n}};var K={sum:function(t,e,i){var n=i.get(e);return J(t)?J(n)&&(t+=n):t=n,t},count:function(t){return(t||0)+1},average:function(t,e,i,n,s,r){var o=i.get(e);return void 0===r.count&&(r.count=0),J(t)?J(o)&&(t+=o):t=o,J(o)&&r.count++,n==s-1&&J(t)&&(t/=r.count),t},max:function(t,e,i){var n=i.get(e);return J(t)||(t=n),t<n&&J(n)&&(t=n),t},min:function(t,e,i){var n=i.get(e);return J(t)||(t=n),t>n&&J(n)&&(t=n),t}};function J(t){return"number"==typeof t&&!isNaN(t)}function tt(t,e){e=e||{};var i=new G(t),n=e.aggregate,s=e.filter;return s&&(i=i.filter(s)),i.aggregate(n)}G.process=function(t,e){e=e||{};var i,n=new G(t),s=e.group,r=Q(s||[]).concat(W(e.sort||[])),o=e.filter,a=e.skip,h=e.take;return o&&(i=(n=n.filter(o)).toArray().length),r&&(n=n.sort(r),s&&(t=n.toArray())),void 0!==a&&void 0!==h&&(n=n.range(a,h)),s&&(n=n.group(s,t)),{total:i,data:n.toArray()}};var et=g.extend({init:function(t){this.data=t.data},read:function(t){t.success(this.data)},update:function(t){t.success(t.data)},create:function(t){t.success(t.data)},destroy:function(t){t.success(t.data)}}),it=g.extend({init:function(t){var e;t=this.options=n({},this.options,t),c(b,(function(e,i){_typeof(t[i])===m&&(t[i]={url:t[i]})})),this.cache=t.cache?nt.create(t.cache):{find:d,add:d},e=t.parameterMap,p(t.push)&&(this.push=t.push),this.push||(this.push=w),this.parameterMap=p(e)?e:function(t){var i={};return c(t,(function(t,n){t in e&&(t=e[t],r(t)&&(n=t.value(n),t=t.key)),i[t]=n})),i}},options:{parameterMap:w},create:function(t){return l(this.setup(t,"create"))},read:function(e){var i,n,s=this.cache;e=this.setup(e,"read"),i=e.success||d,e.error,void 0!==(n=s.find(e.data))?i(n):(e.success=function(t){s.add(e.data,t),i(t)},t.ajax(e))},update:function(t){return l(this.setup(t,"update"))},destroy:function(t){return l(this.setup(t,"destroy"))},setup:function(t,e){t=t||{};var i,s=this.options[e],r=p(s.data)?s.data(t.data):s.data;return t=n(!0,{},s,t),i=n(!0,{},r,t.data),t.data=this.parameterMap(i,e),p(t.url)&&(t.url=t.url(i)),t}}),nt=g.extend({init:function(){this._store={}},add:function(t,e){void 0!==t&&(this._store[_(t)]=e)},find:function(t){return this._store[_(t)]},clear:function(){this._store={}},remove:function(t){delete this._store[_(t)]}});function st(t,e,i,n,s){var r,o,a,h,l;for(h=0,l=t.length;h<l;h++)for(o in r=t[h],e)(a=s[o])&&a!==o&&(r[a]=e[o](r),delete r[o])}function rt(t,e,i,n,s){var r,o,a,h,l;for(h=0,l=t.length;h<l;h++)for(o in r=t[h],e)r[o]=i._parse(o,e[o](r)),(a=s[o])&&a!==o&&delete r[a]}function ot(t,e,i,n,s){var r,o,a,h;for(o=0,h=t.length;o<h;o++)(a=n[(r=t[o]).field])&&a!=r.field&&(r.field=a),r.value=i._parse(r.field,r.value),r.hasSubgroups?ot(r.items,e,i,n,s):rt(r.items,e,i,0,s)}function at(t,e,i,n,s,r){return function(a){return(a=t(a))&&!o(n)&&("[object Array]"===E.call(a)||a instanceof R||(a=[a]),i(a,n,new e,s,r)),a||[]}}nt.create=function(t){var e={inmemory:function(){return new nt}};return r(t)&&p(t.find)?t:!0===t?new nt:e[t]()};var ht=g.extend({init:function(t){var e,i,n,o;for(e in t=t||{})i=t[e],this[e]=_typeof(i)===m?x(i):i;if(o=t.modelBase||H,r(this.model)&&(this.model=n=o.define(this.model)),this.model){var a,h=s(this.data,this),l=s(this.groups,this),d=s(this.serialize,this),u={},p={},f={},g={},v=!1;(n=this.model).fields&&(c(n.fields,(function(t,e){var i;a=t,r(e)&&e.field?a=e.field:_typeof(e)===m&&(a=e),r(e)&&e.from&&(i=e.from),v=v||i&&i!==t||a!==t,p[t]=x(i||a),f[t]=x(t),u[i||a]=t,g[t]=i||a})),!t.serialize&&v&&(this.serialize=at(d,n,st,f,u,g))),this._dataAccessFunction=h,this.data=at(h,n,rt,p,u,g),this.groups=at(l,n,ot,p,u,g)}},errors:function(t){return t?t.errors:null},parse:w,data:w,total:function(t){return t.length},groups:w,aggregates:function(){return{}},serialize:function(t){return t}});function lt(t,e){var i,n;for(i=0,n=t.length;i<n;i++)if(t[i].uid==e.uid)return e=t[i],t.splice(i,1),e}function ct(t,e){var i,n,s;for(s=t.length-1,0;s>=0;s--)n=t[s],i={value:e.get(n.field),field:n.field,items:i?[i]:[e],hasSubgroups:!!i,aggregates:{}};return i}function dt(t,e){return e?pt(t,(function(t){return t[e.idField]===e.id})):-1}function ut(t,e){return e?pt(t,(function(t){return t.uid==e.uid})):-1}function pt(t,e){var i,n;for(i=0,n=t.length;i<n;i++)if(e(t[i]))return i;return-1}function ft(t,e){if(t&&!o(t)){var i,n=t[e];return i=r(n)?n.from||n.field||e:t[e]||e,p(i)?e:i}return e}function gt(t,e){var i,n,s,r,o=[];for(i=0,n=t.length;i<n;i++){for(var h in s={},r=t[i])s[h]=r[h];s.field=ft(e.fields,s.field),s.aggregates&&a(s.aggregates)&&(s.aggregates=gt(s.aggregates,e)),o.push(s)}return o}var mt=f.extend({init:function(t){var e;t&&(e=t.data),t=this.options=n({},this.options,t),this._map={},this._prefetch={},this._data=[],this._pristineData=[],this._ranges=[],this._view=[],this._pristineTotal=0,this._destroyed=[],this._pageSize=t.pageSize,this._page=t.page||(t.pageSize?1:void 0),this._sort=W(t.sort),this._filter=Y(t.filter),this._group=Q(t.group),this._aggregate=t.aggregate,this._total=t.total,f.fn.init.call(this),this.transport=vt.create(t,e),p(this.transport.push)&&this.transport.push({pushCreate:s(this._pushCreate,this),pushUpdate:s(this._pushUpdate,this),pushDestroy:s(this._pushDestroy,this)}),this.reader=new u.data.readers[t.schema.type||"json"](t.schema),this.reader.model,this._data=this._observe(this._data),this.bind(["push",y,v,"requestStart","sync","requestEnd","progress"],t)},options:{data:[],schema:{modelBase:H},serverSorting:!1,serverPaging:!1,serverFiltering:!1,serverGrouping:!1,serverAggregates:!1,batch:!1},_isServerGrouped:function(){var t=this.group()||[];return this.options.serverGrouping&&t.length},_pushCreate:function(t){this._push(t,"pushCreate")},_pushUpdate:function(t){this._push(t,"pushUpdate")},_pushDestroy:function(t){this._push(t,"pushDestroy")},_push:function(t,e){var i=this._readData(t);i||(i=t),this[e](i)},_flatData:function(t){return this._isServerGrouped()?function t(e){var i,n,s=[];for(i=0,n=e.length;i<n;i++)s=e[i].hasSubgroups?s.concat(t(e[i].items)):s.concat(e[i].items.slice());return s}(t):t},parent:d,get:function(t){var e,i,n=this._flatData(this._data);for(e=0,i=n.length;e<i;e++)if(n[e].id==t)return n[e]},getByUid:function(t){var e,i,n=this._flatData(this._data);if(n)for(e=0,i=n.length;e<i;e++)if(n[e].uid==t)return n[e]},indexOf:function(t){return ut(this._data,t)},at:function(t){return this._data[t]},data:function(t){if(void 0===t)return this._data;this._data=this._observe(t),this._pristineData=t.slice(0),this._ranges=[],this._addRange(this._data),this._total=this._data.length,this._pristineTotal=this._total,this._process(this._data)},view:function(){return this._view},add:function(t){return this.insert(this._data.length,t)},_createNewModel:function(t){return this.reader.model?new this.reader.model(t):new N(t)},insert:function(t,e){return e||(e=t,t=0),e instanceof H||(e=this._createNewModel(e)),this._isServerGrouped()?this._data.splice(t,0,ct(this.group(),e)):this._data.splice(t,0,e),e},pushCreate:function(t){a(t)||(t=[t]);for(var e=[],i=0;i<t.length;i++){var n=t[i],s=this.add(n);e.push(s);var r=s.toJSON();this._isServerGrouped()&&(r=ct(this.group(),r)),this._pristineData.push(r)}e.length&&this.trigger("push",{type:"create",items:e})},pushUpdate:function(t){a(t)||(t=[t]);for(var e=[],i=0;i<t.length;i++){var n=t[i],s=this._createNewModel(n),r=this.get(s.id);r?(e.push(r),r.accept(n),r.trigger("change"),this._updatePristineForModel(r,n)):this.pushCreate(n)}e.length&&this.trigger("push",{type:"update",items:e})},pushDestroy:function(t){a(t)||(t=[t]);var e=[],i=this.options.autoSync;this.options.autoSync=!1;try{for(var n=0;n<t.length;n++){var s=t[n],r=this._createNewModel(s),o=!1;this._eachItem(this._data,(function(t){for(var i=0;i<t.length;i++)if(t[i].id===r.id){e.push(t[i]),t.splice(i,1),o=!0;break}})),o&&(this._removePristineForModel(r),this._destroyed.pop())}}finally{this.options.autoSync=i}e.length&&this.trigger("push",{type:"destroy",items:e})},remove:function(t){var e,i=this,n=i._isServerGrouped();return this._eachItem(i._data,(function(s){if((e=lt(s,t))&&n)return e.isNew&&e.isNew()||i._destroyed.push(e),!0})),this._removeModelFromRanges(t),this._updateRangesLength(),t},sync:function(){var e,i,n=this,s=[],r=[],o=n._destroyed,a=n._flatData(n._data);if(n.reader.model){for(e=0,i=a.length;e<i;e++)a[e].isNew()?s.push(a[e]):a[e].dirty&&r.push(a[e]);var h=n._send("create",s);h.push.apply(h,n._send("update",r)),h.push.apply(h,n._send("destroy",o)),t.when.apply(null,h).then((function(){var t,e;for(t=0,e=arguments.length;t<e;t++)n._accept(arguments[t]);n._change({action:"sync"}),n.trigger("sync")}))}},cancelChanges:function(t){t instanceof u.data.Model?this._cancelModel(t):(this._destroyed=[],this._data=this._observe(this._pristineData),this.options.serverPaging&&(this._total=this._pristineTotal),this._change())},hasChanges:function(){var t,e,i=this._data;if(this._destroyed.length)return!0;for(t=0,e=i.length;t<e;t++)if(i[t].isNew()||i[t].dirty)return!0;return!1},_accept:function(e){var i,n=e.models,s=e.response,r=0,h=this._isServerGrouped(),l=this._pristineData,c=e.type;if(this.trigger("requestEnd",{response:s,type:c}),s&&!o(s)){if(s=this.reader.parse(s),this._handleCustomErrors(s))return;s=this.reader.data(s),a(s)||(s=[s])}else s=t.map(n,(function(t){return t.toJSON()}));for("destroy"===c&&(this._destroyed=[]),r=0,i=n.length;r<i;r++)"destroy"!==c?(n[r].accept(s[r]),"create"===c?l.push(h?ct(this.group(),n[r]):s[r]):"update"===c&&this._updatePristineForModel(n[r],s[r])):this._removePristineForModel(n[r])},_updatePristineForModel:function(t,e){this._executeOnPristineForModel(t,(function(t,i){u.deepExtend(i[t],e)}))},_executeOnPristineForModel:function(t,e){this._eachPristineItem((function(i){var n=dt(i,t);if(n>-1)return e(n,i),!0}))},_removePristineForModel:function(t){this._executeOnPristineForModel(t,(function(t,e){e.splice(t,1)}))},_readData:function(t){return(this._isServerGrouped()?this.reader.groups:this.reader.data)(t)},_eachPristineItem:function(t){this._eachItem(this._pristineData,t)},_eachItem:function(t,e){t&&t.length&&(this._isServerGrouped()?function t(e,i){var n,s;for(n=0,s=e.length;n<s;n++)if(e[n].hasSubgroups){if(t(e[n].items,i))return!0}else if(i(e[n].items,e[n]))return!0}(t,e):e(t))},_pristineForModel:function(t){var e,i;return this._eachPristineItem((function(n){if((i=dt(n,t))>-1)return e=n[i],!0})),e},_cancelModel:function(t){var e,i=this._pristineForModel(t);this._eachItem(this._data,(function(n){-1!=(e=ut(n,t))&&(!t.isNew()&&i?n[e].accept(i):n.splice(e,1))}))},_promise:function(e,i,s){var r=this,o=r.transport;return t.Deferred((function(t){r.trigger("requestStart",{type:s}),o[s].call(o,n({success:function(e){t.resolve({response:e,models:i,type:s})},error:function(e,i,n){t.reject(e),r.error(e,i,n)}},e))})).promise()},_send:function(t,e){var i,n,s=[],r=this.reader.serialize(function(t){var e,i=t.length,n=new Array(i);for(e=0;e<i;e++)n[e]=t[e].toJSON();return n}(e));if(this.options.batch)e.length&&s.push(this._promise({data:{models:r}},e,t));else for(i=0,n=e.length;i<n;i++)s.push(this._promise({data:r[i]},[e[i]],t));return s},read:function(t){var e=this,i=e._params(t);e._queueRequest(i,(function(){e.trigger("requestStart",{type:"read"})?e._dequeueRequest():(e.trigger("progress"),e._ranges=[],e.transport.read({data:i,success:s(e.success,e),error:s(e.error,e)}))}))},success:function(t){var e=this.options;this.trigger("requestEnd",{response:t,type:"read"}),t=this.reader.parse(t),this._handleCustomErrors(t)?this._dequeueRequest():(this._total=this.reader.total(t),this._pristineTotal=this._total,this._aggregate&&e.serverAggregates&&(this._aggregateResult=this.reader.aggregates(t)),t=this._readData(t),this._pristineData=t.slice(0),this._data=this._observe(t),this._addRange(this._data),this._process(this._data),this._dequeueRequest())},_addRange:function(t){var e=this._skip||0,i=e+this._flatData(t).length;this._ranges.push({start:e,end:i,data:t}),this._ranges.sort((function(t,e){return t.start-e.start}))},error:function(t,e,i){this._dequeueRequest(),this.trigger("requestEnd",{}),this.trigger(y,{xhr:t,status:e,errorThrown:i})},_params:function(t){var e=n({take:this.take(),skip:this.skip(),page:this.page(),pageSize:this.pageSize(),sort:this._sort,filter:this._filter,group:this._group,aggregate:this._aggregate},t);return this.options.serverPaging||(delete e.take,delete e.skip,delete e.page,delete e.pageSize),this.options.serverGrouping?this.reader.model&&e.group&&(e.group=gt(e.group,this.reader.model)):delete e.group,this.options.serverFiltering?this.reader.model&&e.filter&&(e.filter=function t(e,i){var n,s,r={};for(var o in e)"filters"!==o&&(r[o]=e[o]);if(e.filters)for(r.filters=[],n=0,s=e.filters.length;n<s;n++)r.filters[n]=t(e.filters[n],i);else r.field=ft(i.fields,r.field);return r}(e.filter,this.reader.model)):delete e.filter,this.options.serverSorting?this.reader.model&&e.sort&&(e.sort=gt(e.sort,this.reader.model)):delete e.sort,this.options.serverAggregates?this.reader.model&&e.aggregate&&(e.aggregate=gt(e.aggregate,this.reader.model)):delete e.aggregate,e},_queueRequest:function(t,e){this._requestInProgress?this._pending={callback:s(e,this),options:t}:(this._requestInProgress=!0,this._pending=void 0,e())},_dequeueRequest:function(){this._requestInProgress=!1,this._pending&&this._queueRequest(this._pending.options,this._pending.callback)},_handleCustomErrors:function(t){if(this.reader.errors){var e=this.reader.errors(t);if(e)return this.trigger(y,{xhr:null,status:"customerror",errorThrown:"custom error",errors:e}),!0}return!1},_observe:function(t){var e=this,i=e.reader.model,n=!1;return i&&t.length&&(n=!(t[0]instanceof i)),t instanceof R?n&&(t.type=e.reader.model,t.wrapAll(t,t)):(t=new R(t,e.reader.model)).parent=function(){return e.parent()},e._isServerGrouped()&&function t(e,i){var n,s,r,o;if(i)for(n=0,s=e.length;n<s;n++)o=(r=e[n]).items,r.hasSubgroups?t(o,i):!o.length||o[0]instanceof i||(o.type=i,o.wrapAll(o,o))}(t,i),e._changeHandler&&e._data&&e._data instanceof R?e._data.unbind(v,e._changeHandler):e._changeHandler=s(e._change,e),t.bind(v,e._changeHandler)},_change:function(t){var e,i,n=t?t.action:"";if("remove"===n)for(e=0,i=t.items.length;e<i;e++)t.items[e].isNew&&t.items[e].isNew()||this._destroyed.push(t.items[e]);if(!this.options.autoSync||"add"!==n&&"remove"!==n&&"itemchange"!==n){var s=parseInt(this._total||this._pristineTotal,10);"add"===n?s+=t.items.length:"remove"===n?s-=t.items.length:"itemchange"===n||"sync"===n||this.options.serverPaging?"sync"===n&&(s=this._pristineTotal=parseInt(this._total,10)):s=this._pristineTotal,this._total=s,this._process(this._data,t)}else this.sync()},_process:function(t,e){var i,n={};!0!==this.options.serverPaging&&(n.skip=this._skip,n.take=this._take||this._pageSize,void 0===n.skip&&void 0!==this._page&&void 0!==this._pageSize&&(n.skip=(this._page-1)*this._pageSize)),!0!==this.options.serverSorting&&(n.sort=this._sort),!0!==this.options.serverFiltering&&(n.filter=this._filter),!0!==this.options.serverGrouping&&(n.group=this._group),!0!==this.options.serverAggregates&&(n.aggregate=this._aggregate,this._aggregateResult=tt(t,n)),i=G.process(t,n),this._view=i.data,void 0===i.total||this.options.serverFiltering||(this._total=i.total),(e=e||{}).items=e.items||this._view,this.trigger(v,e)},_mergeState:function(t){var e;return void 0!==t&&(this._pageSize=t.pageSize,this._page=t.page,this._sort=t.sort,this._filter=t.filter,this._group=t.group,this._aggregate=t.aggregate,this._skip=t.skip,this._take=t.take,void 0===this._skip&&(this._skip=this.skip(),t.skip=this.skip()),void 0===this._take&&void 0!==this._pageSize&&(this._take=this._pageSize,t.take=this._take),t.sort&&(this._sort=t.sort=W(t.sort)),t.filter&&(this._filter=t.filter=Y(t.filter)),t.group&&(this._group=t.group=Q(t.group)),t.aggregate&&(this._aggregate=t.aggregate=(e=t.aggregate,a(e)?e:[e]))),t},query:function(t){var e;this.options.serverSorting||this.options.serverPaging||this.options.serverFiltering||this.options.serverGrouping||this.options.serverAggregates||(void 0===this._data||0===this._data.length)&&!this._destroyed.length?this.read(this._mergeState(t)):this.trigger("requestStart",{type:"read"})||(this.trigger("progress"),e=G.process(this._data,this._mergeState(t)),this.options.serverFiltering||(void 0!==e.total?this._total=e.total:this._total=this._data.length),this._view=e.data,this._aggregateResult=tt(this._data,t),this.trigger("requestEnd",{}),this.trigger(v,{items:e.data}))},fetch:function(e){var i=this;return t.Deferred((function(t){var n=function(e){t.reject(e)};i.one(v,(function(s){i.unbind(y,n),t.resolve(),e&&e.call(i,s)})),i.one(y,n),i._query()})).promise()},_query:function(t){this.query(n({},{page:this.page(),pageSize:this.pageSize(),sort:this.sort(),filter:this.filter(),group:this.group(),aggregate:this.aggregate()},t))},next:function(t){var e=this.page(),i=this.total();if(t=t||{},e&&!(i&&e+1>this.totalPages()))return this._skip=e*this.take(),e+=1,t.page=e,this._query(t),e},prev:function(t){var e=this.page();if(t=t||{},e&&1!==e)return this._skip=this._skip-this.take(),e-=1,t.page=e,this._query(t),e},page:function(t){var e;return void 0!==t?(t=k.max(k.min(k.max(t,1),this.totalPages()),1),void this._query({page:t})):void 0!==(e=this.skip())?k.round((e||0)/(this.take()||1))+1:void 0},pageSize:function(t){if(void 0===t)return this.take();this._query({pageSize:t,page:1})},sort:function(t){if(void 0===t)return this._sort;this._query({sort:t})},filter:function(t){if(void 0===t)return this._filter;this._query({filter:t,page:1})},group:function(t){if(void 0===t)return this._group;this._query({group:t})},total:function(){return parseInt(this._total||0,10)},aggregate:function(t){if(void 0===t)return this._aggregate;this._query({aggregate:t})},aggregates:function(){return this._aggregateResult},totalPages:function(){var t=this.pageSize()||this.total();return k.ceil((this.total()||0)/t)},inRange:function(t,e){var i=k.min(t+e,this.total());return!this.options.serverPaging&&this._data.length>0||this._findRange(t,i).length>0},lastRange:function(){var t=this._ranges;return t[t.length-1]||{start:0,end:0,data:[]}},firstItemUid:function(){var t=this._ranges;return t.length&&t[0].data.length&&t[0].data[0].uid},range:function(t,e){t=k.min(t||0,this.total());var i,n=this,s=k.max(k.floor(t/e),0)*e,r=k.min(s+e,n.total());if((i=n._findRange(t,k.min(t+e,n.total()))).length){n._skip=t>n.skip()?k.min(r,(n.totalPages()-1)*n.take()):s,n._take=e;var o=n.options.serverPaging,a=n.options.serverSorting,h=n.options.serverFiltering,l=n.options.serverAggregates;try{n.options.serverPaging=!0,n._isServerGrouped()||n.group()&&n.group().length||(n.options.serverSorting=!0),n.options.serverFiltering=!0,n.options.serverPaging=!0,n.options.serverAggregates=!0,o&&(n._data=i=n._observe(i)),n._process(i)}finally{n.options.serverPaging=o,n.options.serverSorting=a,n.options.serverFiltering=h,n.options.serverAggregates=l}}else void 0!==e&&(n._rangeExists(s,r)?s<t&&n.prefetch(r,e,(function(){n.range(t,e)})):n.prefetch(s,e,(function(){t>s&&r<n.total()&&!n._rangeExists(r,k.min(r+e,n.total()))?n.prefetch(r,e,(function(){n.range(t,e)})):n.range(t,e)})))},_findRange:function(t,e){var i,n,s,r,o,a,h,l,c,d,u,p=this._ranges,f=[],g=this.options,m=g.serverSorting||g.serverPaging||g.serverFiltering||g.serverGrouping||g.serverAggregates;for(n=0,u=p.length;n<u;n++)if(t>=(i=p[n]).start&&t<=i.end){for(d=0,s=n;s<u;s++)if(i=p[s],(c=this._flatData(i.data)).length&&t+d>=i.start){if(a=i.data,h=i.end,!m){var v=Q(this.group()||[]).concat(W(this.sort()||[]));c=a=(l=G.process(i.data,{sort:v,filter:this.filter()})).data,void 0!==l.total&&(h=l.total)}if(r=0,t+d>i.start&&(r=t+d-i.start),o=c.length,h>e&&(o-=h-e),d+=o-r,f=this._mergeGroups(f,a,r,o),e<=i.end&&d==e-t)return f}break}return[]},_mergeGroups:function(t,e,i,n){if(this._isServerGrouped()){var s,r=e.toJSON();return t.length&&(s=t[t.length-1]),function t(e,i,n,s){for(var r,o,a=0;i.length&&s;){var h=(o=(r=i[a]).items).length;if(e&&e.field===r.field&&e.value===r.value?(e.hasSubgroups&&e.items.length?t(e.items[e.items.length-1],r.items,n,s):(o=o.slice(n,n+s),e.items=e.items.concat(o)),i.splice(a--,1)):r.hasSubgroups&&o.length?t(r,o,n,s):(o=o.slice(n,n+s),r.items=o,r.items.length||i.splice(a--,1)),0===o.length?n-=h:(n=0,s-=o.length),++a>=i.length)break}a<i.length&&i.splice(a,i.length-a)}(s,r,i,n),t.concat(r)}return t.concat(e.slice(i,n))},skip:function(){return void 0===this._skip?void 0!==this._page?(this._page-1)*(this.take()||1):void 0:this._skip},take:function(){return this._take||this._pageSize},_prefetchSuccessHandler:function(t,e,i){var n=this;return function(s){var r,o,a,h=!1,l={start:t,end:e,data:[]};if(n._dequeueRequest(),n.trigger("requestEnd",{response:s,type:"read"}),s=n.reader.parse(s),(a=n._readData(s)).length){for(r=0,o=n._ranges.length;r<o;r++)if(n._ranges[r].start===t){h=!0,l=n._ranges[r];break}h||n._ranges.push(l)}l.data=n._observe(a),l.end=l.start+n._flatData(l.data).length,n._ranges.sort((function(t,e){return t.start-e.start})),n._total=n.reader.total(s),i&&a.length?i():n.trigger(v,{})}},prefetch:function(t,e,i){var n=this,s=k.min(t+e,n.total()),r={take:e,skip:t,page:t/e+1,pageSize:e,sort:n._sort,filter:n._filter,group:n._group,aggregate:n._aggregate};n._rangeExists(t,s)?i&&i():(clearTimeout(n._timeout),n._timeout=setTimeout((function(){n._queueRequest(r,(function(){n.trigger("requestStart",{type:"read"})?n._dequeueRequest():n.transport.read({data:n._params(r),success:n._prefetchSuccessHandler(t,s,i)})}))}),100))},_rangeExists:function(t,e){var i,n,s=this._ranges;for(i=0,n=s.length;i<n;i++)if(s[i].start<=t&&s[i].end>=e)return!0;return!1},_removeModelFromRanges:function(t){for(var e,i,n=0,s=this._ranges.length;n<s&&(i=this._ranges[n],this._eachItem(i.data,(function(i){lt(i,t)&&(e=!0)})),!e);n++);},_updateRangesLength:function(){for(var t,e,i=0,n=0,s=this._ranges.length;n<s;n++)(t=this._ranges[n]).start=t.start-i,e=this._flatData(t.data).length,i=t.end-e,t.end=t.start+e}}),vt={};vt.create=function(t,e){var i,s=t.transport;return s?(s.read=_typeof(s.read)===m?{url:s.read}:s.read,t.type&&(u.data.transports[t.type]&&!r(u.data.transports[t.type])?i=new u.data.transports[t.type](n(s,{data:e})):s=n(!0,{},u.data.transports[t.type],s),t.schema=n(!0,{},u.data.schemas[t.type],t.schema)),i||(i=p(s.read)?s:new it(s))):i=new et({data:t.data}),i},mt.create=function(e){(a(e)||e instanceof R)&&(e={data:e});var i,s,r,h=e||{},l=h.data,c=h.fields,d=h.table,p=h.select,f={};if(l||!c||h.transport||(d?l=function(e,i){var n,s,r,o,a,h,l,c=t(e)[0].tBodies[0],d=c?c.rows:[],u=i.length,p=[];for(n=0,s=d.length;n<s;n++){for(a={},l=!0,o=d[n].cells,r=0;r<u;r++)"th"!==(h=o[r]).nodeName.toLowerCase()&&(l=!1,a[i[r].field]=h.innerHTML);l||p.push(a)}return p}(d,c):p&&(l=function(e,i){var n,s,r,o,a,h=t(e)[0].children,l=[],c=i[0],d=i[1];for(n=0,s=h.length;n<s;n++)r={},(a=h[n]).disabled||(r[c.field]=a.text,o=(o=a.attributes.value)&&o.specified?a.value:a.text,r[d.field]=o,l.push(r));return l}(p,c))),u.data.Model&&c&&(!h.schema||!h.schema.model)){for(i=0,s=c.length;i<s;i++)(r=c[i]).type&&(f[r.field]=r);o(f)||(h.schema=n(!0,h.schema,{model:{fields:f}}))}return h.data=l,d=null,h.table=null,h instanceof mt?h:new mt(h)};var yt=H.define({init:function(t){var e=this.hasChildren||t&&t.hasChildren,i="items",s={};u.data.Model.fn.init.call(this,t),_typeof(this.children)===m&&(i=this.children),s={schema:{data:i,model:{hasChildren:e,id:this.idField}}},_typeof(this.children)!==m&&n(s,this.children),s.data=t,e||(e=s.schema.data),_typeof(e)===m&&(e=u.getter(e)),p(e)&&(this.hasChildren=!!e.call(this,this)),this._childrenOptions=s,this.hasChildren&&this._initChildren(),this._loaded=!(!t||!t[i]&&!t._loaded)},_initChildren:function(){var t,e,i,n=this;n.children instanceof wt||(e=(t=n.children=new wt(n._childrenOptions)).transport,i=e.parameterMap,e.parameterMap=function(t,e){return t[n.idField||"id"]=n.id,i&&(t=i(t,e)),t},t.parent=function(){return n},t.bind(v,(function(t){t.node=t.node||n,n.trigger(v,t)})),t.bind(y,(function(t){var e=n.parent();e&&(t.node=t.node||n,e.trigger(y,t))})),n._updateChildrenField())},append:function(t){this._initChildren(),this.loaded(!0),this.children.add(t)},hasChildren:!1,level:function(){for(var t=this.parentNode(),e=0;t&&t.parentNode;)e++,t=t.parentNode?t.parentNode():null;return e},_updateChildrenField:function(){this[this._childrenOptions.schema.data||"items"]=this.children.data()},_childrenLoaded:function(){this._loaded=!0,this._updateChildrenField()},load:function(){var t,e={},i="_query";this.hasChildren?(this._initChildren(),t=this.children,e[this.idField||"id"]=this.id,this._loaded||(t._data=void 0,i="read"),t.one(v,s(this._childrenLoaded,this)),t[i](e)):this.loaded(!0)},parentNode:function(){return this.parent().parent()},loaded:function(t){if(void 0===t)return this._loaded;this._loaded=t},shouldSerialize:function(t){return H.fn.shouldSerialize.call(this,t)&&"children"!==t&&"_loaded"!==t&&"hasChildren"!==t&&"_childrenOptions"!==t}});function bt(t){return function(){var e=this._data,i=mt.fn[t].apply(this,z.call(arguments));return this._data!=e&&this._attachBubbleHandlers(),i}}var wt=mt.extend({init:function(t){var e=yt.define({children:t});mt.fn.init.call(this,n(!0,{},{schema:{modelBase:e,model:e}},t)),this._attachBubbleHandlers()},_attachBubbleHandlers:function(){var t=this;t._data.bind(y,(function(e){t.trigger(y,e)}))},remove:function(t){var e,i=t.parentNode(),n=this;return i&&i._initChildren&&(n=i.children),e=mt.fn.remove.call(n,t),i&&!n.data().length&&(i.hasChildren=!1),e},success:bt("success"),data:bt("data"),insert:function(t,e){var i=this.parent();return i&&i._initChildren&&(i.hasChildren=!0,i._initChildren()),mt.fn.insert.call(this,t,e)},_find:function(t,e){var i,n,s,r,o;if(s=mt.fn[t].call(this,e))return s;if(r=this._flatData(this.data()))for(i=0,n=r.length;i<n;i++)if((o=r[i].children)instanceof wt&&(s=o[t](e)))return s},get:function(t){return this._find("get",t)},getByUid:function(t){return this._find("getByUid",t)}});wt.create=function(e){var i=(e=e&&e.push?{data:e}:e)||{},n=i.data,s=i.fields,r=i.list;return n&&n._dataSource?n._dataSource:(n||!s||i.transport||r&&(n=function e(i,n){var s,r,o,a,h,l,c,d,u=t(i).children(),p=[],f=n[0].field,g=n[1]&&n[1].field,m=n[2]&&n[2].field,v=n[3]&&n[3].field;function y(t,e){return t.filter(e).add(t.find(e))}for(s=0,r=u.length;s<r;s++)o={_loaded:!0},l=(a=u.eq(s))[0].firstChild,i=(d=a.children()).filter("ul"),d=d.filter(":not(ul)"),(h=a.attr("data-id"))&&(o.id=h),l&&(o[f]=3==l.nodeType?l.nodeValue:d.text()),g&&(o[g]=y(d,"a").attr("href")),v&&(o[v]=y(d,"img").attr("src")),m&&(c=y(d,".k-sprite").prop("className"),o[m]=c&&t.trim(c.replace("k-sprite",""))),i.length&&(o.items=e(i.eq(0),n)),"true"==a.attr("data-hasChildren")&&(o.hasChildren=!0),p.push(o);return p}(r,s)),i.data=n,i instanceof wt?i:new wt(i))};var xt=u.Observable.extend({init:function(t,e,i){u.Observable.fn.init.call(this),this._prefetching=!1,this.dataSource=t,this.prefetch=!i;var n=this;t.bind("change",(function(){n._change()})),this._syncWithDataSource(),this.setViewSize(e)},setViewSize:function(t){this.viewSize=t,this._recalculate()},at:function(t){var e,i=this.pageSize;if(!(t>=this.total())){if(!this.useRanges)return this.dataSource.view()[t];if(this.useRanges){if(t<this.dataOffset||t>this.skip+i){var n=Math.floor(t/i)*i;this.range(n)}t===this.prefetchThreshold&&this._prefetch(),t===this.midPageThreshold?this.range(this.nextMidRange):t===this.nextPageThreshold?this.range(this.nextFullRange):t===this.pullBackThreshold&&(this.offset===this.skip?this.range(this.previousMidRange):this.range(this.previousFullRange)),e=this.dataSource.at(t-this.dataOffset)}return void 0===e&&this.trigger("endreached",{index:t}),e}this.trigger("endreached",{index:t})},indexOf:function(t){return this.dataSource.data().indexOf(t)+this.dataOffset},total:function(){return parseInt(this.dataSource.total(),10)},next:function(){var t=this,e=t.pageSize,i=t.skip-t.viewSize,n=k.max(k.floor(i/e),0)*e+e;this.offset=i,this.dataSource.prefetch(n,e,(function(){t._goToRange(i,!0)}))},range:function(t){if(this.offset!==t){var e=this,i=this.pageSize,n=k.max(k.floor(t/i),0)*i+i,s=this.dataSource;this.offset=t,this._recalculate(),s.inRange(t,i)?this._goToRange(t):this.prefetch&&s.prefetch(n,i,(function(){e._goToRange(t,!0)}))}},syncDataSource:function(){var t=this.offset;this.offset=null,this.range(t)},destroy:function(){this.unbind()},_prefetch:function(){var t=this,e=this.pageSize,i=this.skip+e,n=this.dataSource;n.inRange(i,e)||this._prefetching||!this.prefetch||(this._prefetching=!0,this.trigger("prefetching",{skip:i,take:e}),n.prefetch(i,e,(function(){t._prefetching=!1,t.trigger("prefetched",{skip:i,take:e})})))},_goToRange:function(t,e){this.offset===t&&(this.dataOffset=t,this._expanding=e,this.dataSource.range(t,this.pageSize))},_change:function(){var t=this.dataSource,e=t.firstItemUid();this.length=this.useRanges?t.lastRange().end:t.view().length,this._firstItemUid===e&&this.useRanges||(this._syncWithDataSource(),this._recalculate(),this.trigger("reset",{offset:this.offset})),this.trigger("resize"),this._expanding&&this.trigger("expand"),delete this._expanding},_syncWithDataSource:function(){var t=this.dataSource;this._firstItemUid=t.firstItemUid(),this.dataOffset=this.offset=t.skip()||0,this.pageSize=t.pageSize(),this.useRanges=t.options.serverPaging},_recalculate:function(){var t=this.pageSize,e=this.offset,i=this.viewSize,n=Math.ceil(e/t)*t;this.skip=n,this.midPageThreshold=n+t-1,this.nextPageThreshold=n+i-1,this.prefetchThreshold=n+Math.floor(t/3*2),this.pullBackThreshold=this.offset-1,this.nextMidRange=n+t-i,this.nextFullRange=n,this.previousMidRange=e-i,this.previousFullRange=n-t}}),_t=u.Observable.extend({init:function(t,e){var i=this;u.Observable.fn.init.call(i),this.dataSource=t,this.batchSize=e,this._total=0,this.buffer=new xt(t,3*e),this.buffer.bind({endreached:function(t){i.trigger("endreached",{index:t.index})},prefetching:function(t){i.trigger("prefetching",{skip:t.skip,take:t.take})},prefetched:function(t){i.trigger("prefetched",{skip:t.skip,take:t.take})},reset:function(){i._total=0,i.trigger("reset")},resize:function(){i._total=Math.ceil(this.length/i.batchSize),i.trigger("resize",{total:i.total(),offset:this.offset})}})},syncDataSource:function(){this.buffer.syncDataSource()},at:function(t){var e,i=this.buffer,n=t*this.batchSize,s=this.batchSize,r=[];i.offset>n&&i.at(i.offset-1);for(var o=0;o<s&&void 0!==(e=i.at(n+o));o++)r.push(e);return r},total:function(){return this._total},destroy:function(){this.buffer.destroy(),this.unbind()}});n(!0,u.data,{readers:{json:ht},Query:G,DataSource:mt,HierarchicalDataSource:wt,Node:yt,ObservableObject:N,ObservableArray:R,LocalTransport:et,RemoteTransport:it,Cache:nt,DataReader:ht,Model:H,Buffer:xt,BatchBuffer:_t})}(window.kendo.jQuery),function(t,e){var i,n=window.kendo,s=(n.support.browser,n.Observable),r=n.data.ObservableObject,o=n.data.ObservableArray,a={}.toString,h={},l=(Array.prototype.slice,n.Class),c=t.proxy,d="value",u=!0,p="change";!function(){var t=document.createElement("a");void 0!==t.innerText?i="innerText":void 0!==t.textContent&&(i="textContent");try{delete t.test}catch(t){u=!1}}();var f=s.extend({init:function(t,e){var i=this;s.fn.init.call(i),i.source=t[0],i.parents=t,i.path=e,i.dependencies={},i.dependencies[e]=!0,i.observable=i.source instanceof s,i._access=function(t){i.dependencies[t.field]=!0},i.observable&&(i._change=function(t){i.change(t)},i.source.bind(p,i._change))},_parents:function(){var e=this.parents,i=this.get();if(i&&"function"==typeof i.parent){var n=i.parent();t.inArray(n,e)<0&&(e=[n].concat(e))}return e},change:function(t){var e,i,n=t.field;if("this"===this.path)this.trigger(p,t);else for(e in this.dependencies)if(0===e.indexOf(n)&&(!(i=e.charAt(n.length))||"."===i||"["===i)){this.trigger(p,t);break}},start:function(t){t.bind("get",this._access)},stop:function(t){t.unbind("get",this._access)},get:function(){var t=this.source,e=0,i=this.path,n=t;if(!this.observable)return n;for(this.start(this.source),n=t.get(i);void 0===n&&t;)(t=this.parents[++e])instanceof r&&(n=t.get(i));if(void 0===n)for(t=this.source;void 0===n&&t;)(t=t.parent())instanceof r&&(n=t.get(i));return"function"==typeof n&&((e=i.lastIndexOf("."))>0&&(t=t.get(i.substring(0,e))),this.start(t),n=t!==this.source?n.call(t,this.source):n.call(t),this.stop(t)),t&&t!==this.source&&(this.currentSource=t,t.unbind(p,this._change).bind(p,this._change)),this.stop(this.source),n},set:function(t){var e=this.currentSource||this.source,i=n.getter(this.path)(e);"function"==typeof i?e!==this.source?i.call(e,this.source,t):i.call(e,t):e.set(this.path,t)},destroy:function(){this.observable&&this.source.unbind(p,this._change)}}),g=f.extend({get:function(){var t,e=this.source,i=this.path,n=0;for(t=e.get(i);!t&&e;)(e=this.parents[++n])instanceof r&&(t=e.get(i));return c(t,e)}}),m=f.extend({init:function(t,e,i){f.fn.init.call(this,t,e),this.template=i},render:function(t){var e;return this.start(this.source),e=n.render(this.template,t),this.stop(this.source),e}}),v=l.extend({init:function(t,e,i){this.element=t,this.bindings=e,this.options=i},bind:function(t,e){var i=this;(t=e?t[e]:t).bind(p,(function(t){i.refresh(e||t)})),i.refresh(e)},destroy:function(){}});h.attr=v.extend({refresh:function(t){this.element.setAttribute(t,this.bindings.attr[t].get())}}),h.style=v.extend({refresh:function(t){this.element.style[t]=this.bindings.style[t].get()||""}}),h.enabled=v.extend({refresh:function(){this.bindings.enabled.get()?this.element.removeAttribute("disabled"):this.element.setAttribute("disabled","disabled")}}),h.readonly=v.extend({refresh:function(){this.bindings.readonly.get()?this.element.setAttribute("readonly","readonly"):this.element.removeAttribute("readonly")}}),h.disabled=v.extend({refresh:function(){this.bindings.disabled.get()?this.element.setAttribute("disabled","disabled"):this.element.removeAttribute("disabled")}}),h.events=v.extend({init:function(t,e,i){v.fn.init.call(this,t,e,i),this.handlers={}},refresh:function(e){var i=t(this.element),n=this.bindings.events[e],s=this.handlers[e];s&&i.off(e,s),s=this.handlers[e]=n.get(),i.on(e,n.source,s)},destroy:function(){var e,i=t(this.element);for(e in this.handlers)i.off(e,this.handlers[e])}}),h.text=v.extend({refresh:function(){var t=this.bindings.text.get();null==t&&(t=""),this.element[i]=t}}),h.visible=v.extend({refresh:function(){this.bindings.visible.get()?this.element.style.display="":this.element.style.display="none"}}),h.invisible=v.extend({refresh:function(){this.bindings.invisible.get()?this.element.style.display="none":this.element.style.display=""}}),h.html=v.extend({refresh:function(){this.element.innerHTML=this.bindings.html.get()}}),h.value=v.extend({init:function(e,i,n){v.fn.init.call(this,e,i,n),this._change=c(this.change,this),this.eventName=n.valueUpdate||p,t(this.element).on(this.eventName,this._change),this._initChange=!1},change:function(){this._initChange=this.eventName!=p;var t=this.element.value,e=this.element.type;"date"==e?t=n.parseDate(t,"yyyy-MM-dd"):"datetime-local"==e?t=n.parseDate(t,["yyyy-MM-ddTHH:mm:ss","yyyy-MM-ddTHH:mm"]):"number"==e&&(t=n.parseFloat(t)),this.bindings.value.set(t),this._initChange=!1},refresh:function(){if(!this._initChange){var t=this.bindings.value.get();null==t&&(t="");var e=this.element.type;"date"==e?t=n.toString(t,"yyyy-MM-dd"):"datetime-local"==e&&(t=n.toString(t,"yyyy-MM-ddTHH:mm:ss")),this.element.value=t}this._initChange=!1},destroy:function(){t(this.element).off(this.eventName,this._change)}}),h.source=v.extend({init:function(t,e,i){v.fn.init.call(this,t,e,i);var s=this.bindings.source.get();s instanceof n.data.DataSource&&!1!==i.autoBind&&s.fetch()},refresh:function(t){var e=this.bindings.source.get();e instanceof o||e instanceof n.data.DataSource?"add"==(t=t||{}).action?this.add(t.index,t.items):"remove"==t.action?this.remove(t.index,t.items):"itemchange"!=t.action&&this.render():this.render()},container:function(){var t=this.element;return"table"==t.nodeName.toLowerCase()&&(t.tBodies[0]||t.appendChild(document.createElement("tbody")),t=t.tBodies[0]),t},template:function(){var t=this.options,e=t.template,i=this.container().nodeName.toLowerCase();return e||(e="select"==i?t.valueField||t.textField?n.format('<option value="#:{0}#">#:{1}#</option>',t.valueField||t.textField,t.textField||t.valueField):"<option>#:data#</option>":"tbody"==i?"<tr><td>#:data#</td></tr>":"ul"==i||"ol"==i?"<li>#:data#</li>":"#:data#",e=n.template(e)),e},add:function(e,i){var s,r,o,a,h=this.container(),l=h.cloneNode(!1),c=h.children[e];if(t(l).html(n.render(this.template(),i)),l.children.length)for(s=this.bindings.source._parents(),r=0,o=i.length;r<o;r++)a=l.children[0],h.insertBefore(a,c||null),C(a,i[r],this.options.roles,[i[r]].concat(s))},remove:function(t,e){var i,n=this.container();for(i=0;i<e.length;i++){var s=n.children[t];P(s),n.removeChild(s)}},render:function(){var e,i,s,r=this.bindings.source.get(),h=this.container(),l=this.template();if(r instanceof n.data.DataSource&&(r=r.view()),r instanceof o||"[object Array]"===a.call(r)||(r=[r]),this.bindings.template){if(A(h),t(h).html(this.bindings.template.render(r)),h.children.length)for(e=this.bindings.source._parents(),i=0,s=r.length;i<s;i++)C(h.children[i],r[i],this.options.roles,[r[i]].concat(e))}else t(h).html(n.render(l,r))}}),h.input={checked:v.extend({init:function(e,i,n){v.fn.init.call(this,e,i,n),this._change=c(this.change,this),t(this.element).change(this._change)},change:function(){var t=this.element,e=this.value();if("radio"==t.type)this.bindings.checked.set(e);else if("checkbox"==t.type){var i,n=this.bindings.checked.get();n instanceof o?"on"!==(e=this.element.value)&&"off"!==e&&((i=n.indexOf(e))>-1?n.splice(i,1):n.push(e)):this.bindings.checked.set(e)}},refresh:function(){var t=this.bindings.checked.get(),e=t,i=this.element;"checkbox"==i.type?(e instanceof o&&(t=this.element.value,e.indexOf(t)>=0&&(t=!0)),i.checked=!0===t):"radio"==i.type&&null!=t&&i.value===t.toString()&&(i.checked=!0)},value:function(){var t=this.element,e=t.value;return"checkbox"==t.type&&(e=t.checked),e},destroy:function(){t(this.element).off(p,this._change)}})},h.select={value:v.extend({init:function(e,i,n){v.fn.init.call(this,e,i,n),this._change=c(this.change,this),t(this.element).change(this._change)},change:function(){var t,e,i,n,s,a,h=[],l=this.element,c=this.options.valueField||this.options.textField,d=this.options.valuePrimitive;for(s=0,a=l.options.length;s<a;s++)(e=l.options[s]).selected&&(n=(n=e.attributes.value)&&n.specified?e.value:e.text,h.push(n));if(c)for(t=this.bindings.source.get(),i=0;i<h.length;i++)for(s=0,a=t.length;s<a;s++)if(t[s].get(c)==h[i]){h[i]=t[s];break}(n=this.bindings.value.get())instanceof o?n.splice.apply(n,[0,n.length].concat(h)):d||!(n instanceof r)&&c?this.bindings.value.set(h[0].get(c)):this.bindings.value.set(h[0])},refresh:function(){var t,e,i=this.element,n=i.options,s=this.bindings.value.get(),a=s,h=this.options.valueField||this.options.textField;a instanceof o||(a=new o([s])),i.selectedIndex=-1;for(var l=0;l<a.length;l++)for(s=a[l],h&&s instanceof r&&(s=s.get(h)),t=0;t<n.length;t++)""===(e=n[t].value)&&""!==s&&(e=n[t].text),e==s&&(n[t].selected=!0,!0)},destroy:function(){t(this.element).off(p,this._change)}})},h.widget={events:v.extend({init:function(t,e,i){v.fn.init.call(this,t.element[0],e,i),this.widget=t,this.handlers={}},refresh:function(t){var e=this.bindings.events[t],i=this.handlers[t];i&&this.widget.unbind(t,i),i=e.get(),this.handlers[t]=function(t){t.data=e.source,i(t),t.data===e.source&&delete t.data},this.widget.bind(t,this.handlers[t])},destroy:function(){var t;for(t in this.handlers)this.widget.unbind(t,this.handlers[t])}}),checked:v.extend({init:function(t,e,i){v.fn.init.call(this,t.element[0],e,i),this.widget=t,this._change=c(this.change,this),this.widget.bind(p,this._change)},change:function(){this.bindings.checked.set(this.value())},refresh:function(){this.widget.check(!0===this.bindings.checked.get())},value:function(){var t=this.element,e=t.value;return"on"!=e&&"off"!=e||(e=t.checked),e},destroy:function(){this.widget.unbind(p,this._change)}}),visible:v.extend({init:function(t,e,i){v.fn.init.call(this,t.element[0],e,i),this.widget=t},refresh:function(){var t=this.bindings.visible.get();this.widget.wrapper[0].style.display=t?"":"none"}}),invisible:v.extend({init:function(t,e,i){v.fn.init.call(this,t.element[0],e,i),this.widget=t},refresh:function(){var t=this.bindings.invisible.get();this.widget.wrapper[0].style.display=t?"none":""}}),enabled:v.extend({init:function(t,e,i){v.fn.init.call(this,t.element[0],e,i),this.widget=t},refresh:function(){this.widget.enable&&this.widget.enable(this.bindings.enabled.get())}}),disabled:v.extend({init:function(t,e,i){v.fn.init.call(this,t.element[0],e,i),this.widget=t},refresh:function(){this.widget.enable&&this.widget.enable(!this.bindings.disabled.get())}}),source:v.extend({init:function(t,e,i){v.fn.init.call(this,t.element[0],e,i),this.widget=t,this._dataBinding=c(this.dataBinding,this),this._dataBound=c(this.dataBound,this),this._itemChange=c(this.itemChange,this)},itemChange:function(t){C(t.item[0],t.data,this._ns(t.ns),[t.data].concat(this.bindings.source._parents()))},dataBinding:function(){var t,e,i=this.widget.items();for(t=0,e=i.length;t<e;t++)P(i[t])},_ns:function(e){e=e||n.ui;var i=[n.ui,n.dataviz.ui,n.mobile.ui];return i.splice(t.inArray(e,i),1),i.unshift(e),n.rolesFromNamespaces(i)},dataBound:function(t){var e,i,n,s=this.widget,r=s.items(),o=s.dataSource,a=o.view(),h=o.group()||[];if(r.length)for(h.length&&(a=function t(e){var i,n,s,r,o=[];for(i=0,n=e.length;i<n;i++)if(e[i].hasSubgroups)o=o.concat(t(e[i].items));else for(s=e[i].items,r=0;r<s.length;r++)o.push(s[r]);return o}(a)),n=this.bindings.source._parents(),e=0,i=a.length;e<i;e++)C(r[e],a[e],this._ns(t.ns),[a[e]].concat(n))},refresh:function(t){var e,i=this.widget;(t=t||{}).action||(this.destroy(),i.bind("dataBinding",this._dataBinding),i.bind("dataBound",this._dataBound),i.bind("itemChange",this._itemChange),e=this.bindings.source.get(),i.dataSource instanceof n.data.DataSource&&i.dataSource!=e&&(e instanceof n.data.DataSource?i.setDataSource(e):e&&e._dataSource?i.setDataSource(e._dataSource):i.dataSource.data(e)))},destroy:function(){var t=this.widget;t.unbind("dataBinding",this._dataBinding),t.unbind("dataBound",this._dataBound),t.unbind("itemChange",this._itemChange)}}),value:v.extend({init:function(e,i,n){v.fn.init.call(this,e.element[0],i,n),this.widget=e,this._change=t.proxy(this.change,this),this.widget.first(p,this._change);var s=this.bindings.value.get();this._valueIsObservableObject=!n.valuePrimitive&&(null==s||s instanceof r),this._valueIsObservableArray=s instanceof o,this._initChange=!1},change:function(){var t,e,i,s,r,o,h,l=this.widget.value(),c=this.options.dataValueField||this.options.dataTextField,d="[object Array]"===a.call(l),u=this._valueIsObservableObject,p=[];if(this._initChange=!0,c)if(this.bindings.source&&(h=this.bindings.source.get()),""===l&&(u||this.options.valuePrimitive))l=null;else{for((!h||h instanceof n.data.DataSource)&&(h=this.widget.dataSource.view()),d&&(e=l.length,p=l.slice(0)),r=0,o=h.length;r<o;r++)if(s=(i=h[r]).get(c),d){for(t=0;t<e;t++)if(s==p[t]){p[t]=i;break}}else if(s==l){l=u?i:s;break}p[0]&&(l=this._valueIsObservableArray?p:u||!c?p[0]:p[0].get(c))}this.bindings.value.set(l),this._initChange=!1},refresh:function(){if(!this._initChange){var t,e=this.options.dataValueField||this.options.dataTextField,i=this.bindings.value.get(),n=0,s=[];if(void 0===i&&(i=null),e)if(i instanceof o){for(t=i.length;n<t;n++)s[n]=i[n].get(e);i=s}else i instanceof r&&(i=i.get(e));this.widget.value(i)}this._initChange=!1},destroy:function(){this.widget.unbind(p,this._change)}}),multiselect:{value:v.extend({init:function(e,i,n){v.fn.init.call(this,e.element[0],i,n),this.widget=e,this._change=t.proxy(this.change,this),this.widget.first(p,this._change),this._initChange=!1},change:function(){var t=this.bindings.value.get(),e=this.options.valuePrimitive,i=e?this.widget.value():this.widget.dataItems(),n=this.options.dataValueField||this.options.dataTextField;if(i=i.slice(0),this._initChange=!0,t instanceof o){for(var s,r,a,h=[],l=i.length,c=0,d=0,u=t[c];u;){for(a=!1,d=0;d<l;d++)if(e?i[d]==u:(r=(r=i[d]).get?r.get(n):r)==(u.get?u.get(n):u)){i.splice(d,1),l-=1,a=!0;break}a?c+=1:(h.push(u),y(t,c,1),s=c),u=t[c]}y(t,t.length,0,i),h.length&&t.trigger("change",{action:"remove",items:h,index:s}),i.length&&t.trigger("change",{action:"add",items:i,index:t.length-1})}else this.bindings.value.set(i);this._initChange=!1},refresh:function(){if(!this._initChange){var t,e,i=this.options.dataValueField||this.options.dataTextField,n=this.bindings.value.get(),s=0,a=[];if(void 0===n&&(n=null),i)if(n instanceof o){for(t=n.length;s<t;s++)e=n[s],a[s]=e.get?e.get(i):e;n=a}else n instanceof r&&(n=n.get(i));this.widget.value(n)}},destroy:function(){this.widget.unbind(p,this._change)}})}};var y=function(t,e,i,n){i=i||0;var s,r=(n=n||[]).length,o=t.length,a=[].slice.call(t,e+i),h=a.length;if(r){for(r=e+r,s=0;e<r;e++)t[e]=n[s],s++;t.length=r}else if(i)for(t.length=e,i+=e;e<i;)delete t[--i];if(h){for(h=e+h,s=0;e<h;e++)t[e]=a[s],s++;t.length=h}for(e=t.length;e<o;)delete t[e],e++},b=l.extend({init:function(t,e){this.target=t,this.options=e,this.toDestroy=[]},bind:function(t){var e,i,n,s,r=this.target.nodeName.toLowerCase(),o=h[r]||{};for(e in t)e==d?i=!0:"source"==e?n=!0:"events"==e?s=!0:this.applyBinding(e,t,o);n&&this.applyBinding("source",t,o),i&&this.applyBinding(d,t,o),s&&this.applyBinding("events",t,o)},applyBinding:function(t,e,i){var n,s=i[t]||h[t],r=this.toDestroy,o=e[t];if(s)if(s=new s(this.target,e,this.options),r.push(s),o instanceof f)s.bind(o),r.push(o);else for(n in o)s.bind(o,n),r.push(o[n]);else if("template"!==t)throw new Error("The "+t+" binding is not supported by the "+this.target.nodeName.toLowerCase()+" element")},destroy:function(){var t,e,i=this.toDestroy;for(t=0,e=i.length;t<e;t++)i[t].destroy()}}),w=b.extend({bind:function(t){var e,i=!1,n=!1,s=h.widget[this.target.options.name.toLowerCase()]||{};for(e in t)e==d?i=!0:"source"==e?n=!0:this.applyBinding(e,t,s);n&&this.applyBinding("source",t,s),i&&this.applyBinding(d,t,s)},applyBinding:function(t,e,i){var n,s=i[t]||h.widget[t],r=this.toDestroy,o=e[t];if(!s)throw new Error("The "+t+" binding is not supported by the "+this.target.options.name+" widget");if(s=new s(this.target,e,this.target.options),r.push(s),o instanceof f)s.bind(o),r.push(o);else for(n in o)s.bind(o,n),r.push(o[n])}});var x=/[A-Za-z0-9_\-]+:(\{([^}]*)\}|[^,}]+)/g,_=/\s/g;function k(t,e,i){var n,s={};for(n in t)s[n]=new i(e,t[n]);return s}function C(t,e,i,s){var r,o,a,h=t.getAttribute("data-"+n.ns+"role"),l=t.getAttribute("data-"+n.ns+"bind"),c=t.children,d=[],u=!0,v={};if(s=s||[e],(h||l)&&T(t),h&&(a=function(t,e){var i=n.initWidget(t,{},e);if(i)return new w(i)}(t,i)),l&&(l=function t(e){var i,n,s,r,o,a,h,l={};for(i=0,n=(h=e.match(x)).length;i<n;i++)r=(s=h[i]).indexOf(":"),o=s.substring(0,r),"{"==(a=s.substring(r+1)).charAt(0)&&(a=t(a)),l[o]=a;return l}(l.replace(_,"")),a||((v=n.parseOptions(t,{textField:"",valueField:"",template:"",valueUpdate:p,valuePrimitive:!1,autoBind:!0})).roles=i,a=new b(t,v)),a.source=e,o=k(l,s,f),v.template&&(o.template=new m(s,"",v.template)),o.click&&(l.events=l.events||{},l.events.click=l.click,delete o.click),o.source&&(u=!1),l.attr&&(o.attr=k(l.attr,s,f)),l.style&&(o.style=k(l.style,s,f)),l.events&&(o.events=k(l.events,s,g)),a.bind(o)),a&&(t.kendoBindingTarget=a),u&&c){for(r=0;r<c.length;r++)d[r]=c[r];for(r=0;r<d.length;r++)C(d[r],e,i,s)}}function S(e,i){var s,r,o,a=n.rolesFromNamespaces([].slice.call(arguments,2));for(i=n.observable(i),s=0,r=(e=t(e)).length;s<r;s++)1===(o=e[s]).nodeType&&C(o,i,a)}function T(t){var e=t.kendoBindingTarget;e&&(e.destroy(),u?delete t.kendoBindingTarget:t.removeAttribute?t.removeAttribute("kendoBindingTarget"):t.kendoBindingTarget=null)}function P(t){T(t),A(t)}function A(t){var e=t.children;if(e)for(var i=0,n=e.length;i<n;i++)P(e[i])}n.unbind=function(e){var i,n;for(i=0,n=(e=t(e)).length;i<n;i++)P(e[i])},n.bind=S,n.data.binders=h,n.data.Binder=v,n.notify=function(t,e){var i=t.element,n=i[0].kendoBindingTarget;n&&S(i,n.source,e)},n.observable=function(t){return t instanceof r||(t=new r(t)),t},n.observableHierarchy=function(t){var e=n.data.HierarchicalDataSource.create(t);return e.fetch(),function t(e){var i,n;for(i=0;i<e.length;i++)e[i]._initChildren(),(n=e[i].children).fetch(),e[i].items=n.data(),t(e[i].items)}(e.data()),e._data._dataSource=e,e._data}}(window.kendo.jQuery),function(t,e){var i=window.kendo,n=i.Observable,s=/unrecognized expression/,r=n.extend({init:function(t,e){e=e||{},n.fn.init.call(this),this.content=t,this.id=i.guid(),this.tagName=e.tagName||"div",this.model=e.model,this._wrap=!1!==e.wrap,this._fragments={},this.bind(["init","show","hide"],e)},render:function(e){var n=!this.element;return n&&(this.element=this._createElement()),e&&t(e).append(this.element),n&&(i.bind(this.element,this.model),this.trigger("init")),e&&(this._eachFragment("attach"),this.trigger("show")),this.element},clone:function(t){return new o(this)},triggerBeforeShow:function(){return!0},showStart:function(){this.element.css("display","")},showEnd:function(){},hideStart:function(){},hideEnd:function(){this.hide()},hide:function(){this._eachFragment("detach"),this.element.detach(),this.trigger("hide")},destroy:function(){var t=this.element;t&&(i.unbind(t),i.destroy(t),t.remove())},fragments:function(e){t.extend(this._fragments,e)},_eachFragment:function(t){for(var e in this._fragments)this._fragments[e][t](this,e)},_createElement:function(){var e,n,r=this._wrap,o="<"+this.tagName+" />";try{"SCRIPT"===(n=t(document.getElementById(this.content)||this.content))[0].tagName&&(n=n.html())}catch(t){s.test(t.message)&&(n=this.content)}return"string"==typeof n?(e=t(o).append(n),i.stripWhitespace(e[0]),r||(e=e.contents())):(e=n,r&&(e=e.wrapAll(o).parent())),e}}),o=i.Class.extend({init:function(e){t.extend(this,{element:e.element.clone(!0),transition:e.transition,id:e.id}),e.element.parent().append(this.element)},hideStart:t.noop,hideEnd:function(){this.element.remove()}}),a=r.extend({init:function(t,e){r.fn.init.call(this,t,e),this.containers={}},container:function(t){var e=this.containers[t];return e||(e=this._createContainer(t),this.containers[t]=e),e},showIn:function(t,e,i){this.container(t).show(e,i)},_createContainer:function(t){var e,i=this.render(),n=i.find(t);if(!n.length&&i.is(t)){if(!i.is(t))throw new Error("can't find a container with the specified "+t+" selector");n=i}return(e=new c(n)).bind("accepted",(function(t){t.view.render(n)})),e}}),h=r.extend({attach:function(t,e){t.element.find(e).replaceWith(this.render())},detach:function(){console.log("detach",arguments)}}),l=/^(\w+)(:(\w+))?( (\w+))?$/;var c=n.extend({init:function(t){n.fn.init.call(this),this.container=t,this.history=[],this.view=null,this.running=!1},after:function(){this.running=!1,this.trigger("complete",{view:this.view}),this.trigger("after")},end:function(){this.view.showEnd(),this.previous.hideEnd(),this.after()},show:function(t,e,n){if(!t.triggerBeforeShow())return this.trigger("after"),!1;n=n||t.id;var s=this,r=t===s.view?t.clone():s.view,o=s.history,a=(o[o.length-2]||{}).id===n,h=e||(a?o[o.length-1].transition:t.transition),c=function(t){if(!t)return{};var e=t.match(l)||[];return{type:e[1],direction:e[3],reverse:"reverse"===e[5]}}(h);return s.running&&s.effect.stop(),"none"===h&&(h=null),s.trigger("accepted",{view:t}),s.view=t,s.previous=r,s.running=!0,a?o.pop():o.push({id:n,transition:h}),r?(r.hideStart(),t.showStart(),h&&i.effects.enabled?(a&&!e&&(c.reverse=!c.reverse),s.effect=i.fx(t.element).replace(r.element,c.type).direction(c.direction).setReverse(c.reverse),s.effect.run().then((function(){s.end()}))):s.end(),!0):(t.showStart(),t.showEnd(),s.after(),!0)}});i.ViewContainer=c,i.Fragment=h,i.Layout=a,i.View=r,i.ViewClone=o}(window.kendo.jQuery),kendo.data.transports.signalr=kendo.data.RemoteTransport.extend({init:function(t){var e=t&&t.signalr?t.signalr:{},i=e.promise;if(!i)throw new Error('The "promise" option must be set.');if("function"!=typeof i.done||"function"!=typeof i.fail)throw new Error('The "promise" option must be a Promise.');this.promise=i;var n=e.hub;if(!n)throw new Error('The "hub" option must be set.');if("function"!=typeof n.on||"function"!=typeof n.invoke)throw new Error('The "hub" option is not a valid SignalR hub proxy.');this.hub=n,kendo.data.RemoteTransport.fn.init.call(this,t)},push:function(t){var e=this.options.signalr.client||{};e.create&&this.hub.on(e.create,t.pushCreate),e.update&&this.hub.on(e.update,t.pushUpdate),e.destroy&&this.hub.on(e.destroy,t.pushDestroy)},_crud:function(t,e){var i=this.hub,n=this.options.signalr.server;if(!n||!n[e])throw new Error(kendo.format('The "server.{0}" option must be set.',e));var s=[n[e]],r=this.parameterMap(t.data,e);$.isEmptyObject(r)||s.push(r),this.promise.done((function(){i.invoke.apply(i,s).done(t.success).fail(t.error)}))},read:function(t){this._crud(t,"read")},create:function(t){this._crud(t,"create")},update:function(t){this._crud(t,"update")},destroy:function(t){this._crud(t,"destroy")}}),function(t,e){var i=window.kendo,n=i.support,s=window.document,r=i.Class,o=i.Observable,a=t.now,h=t.extend,l=n.mobileOS,c=l&&l.android,d=800,u=n.browser.msie?5:0;function p(t,e){var i=t.x.location,n=t.y.location,s=e.x.location,r=e.y.location,o=i-s,a=n-r;return{center:{x:(i+s)/2,y:(n+r)/2},distance:Math.sqrt(o*o+a*a)}}function f(t){var e,i,s,r=[],o=t.originalEvent,a=t.currentTarget,h=0;if(t.api)r.push({id:2,event:t,target:t.target,currentTarget:t.target,location:t});else if(t.type.match(/touch/))for(e=(i=o?o.changedTouches:[]).length;h<e;h++)s=i[h],r.push({location:s,event:t,target:s.target,currentTarget:a,id:s.identifier});else n.pointers||n.msPointers?r.push({location:o,event:t,target:t.target,currentTarget:a,id:o.pointerId}):r.push({id:1,event:t,target:t.target,currentTarget:a,location:t});return r}var g=r.extend({init:function(t,e){this.axis=t,this._updateLocationData(e),this.startLocation=this.location,this.velocity=this.delta=0,this.timeStamp=a()},move:function(t){var e=t["page"+this.axis],i=a(),n=i-this.timeStamp||1;!e&&c||(this.delta=e-this.location,this._updateLocationData(t),this.initialDelta=e-this.startLocation,this.velocity=this.delta/n,this.timeStamp=i)},_updateLocationData:function(t){var e=this.axis;this.location=t["page"+e],this.client=t["client"+e],this.screen=t["screen"+e]}}),m=r.extend({init:function(t,e,i){h(this,{x:new g("X",i.location),y:new g("Y",i.location),userEvents:t,target:e,currentTarget:i.currentTarget,initialTouch:i.target,id:i.id,pressEvent:i,_moved:!1,_finished:!1})},press:function(){this._holdTimeout=setTimeout(t.proxy(this,"_hold"),this.userEvents.minHold),this._trigger("press",this.pressEvent)},_hold:function(){this._trigger("hold",this.pressEvent)},move:function(t){if(!this._finished){if(this.x.move(t.location),this.y.move(t.location),!this._moved){if(this._withinIgnoreThreshold())return;if(y.current&&y.current!==this.userEvents)return this.dispose();this._start(t)}this._finished||this._trigger("move",t)}},end:function(t){this.endTime=a(),this._finished||(this._finished=!0,this._moved?this._trigger("end",t):this._trigger("tap",t),clearTimeout(this._holdTimeout),this._trigger("release",t),this.dispose())},dispose:function(){var e=this.userEvents.touches;this._finished=!0,this.pressEvent=null,clearTimeout(this._holdTimeout),e.splice(t.inArray(this,e),1)},skip:function(){this.dispose()},cancel:function(){this.dispose()},isMoved:function(){return this._moved},_start:function(t){clearTimeout(this._holdTimeout),this.startTime=a(),this._moved=!0,this._trigger("start",t)},_trigger:function(t,e){var i=e.event,n={touch:this,x:this.x,y:this.y,target:this.target,event:i};this.userEvents.notify(t,n)&&i.preventDefault()},_withinIgnoreThreshold:function(){var t=this.x.initialDelta,e=this.y.initialDelta;return Math.sqrt(t*t+e*e)<=this.userEvents.threshold}});function v(t){for(var e=i.eventMap.up.split(" "),n=0,s=e.length;n<s;n++)t(e[n])}var y=o.extend({init:function(e,r){var a,l=i.guid();if(r=r||{},a=this.filter=r.filter,this.threshold=r.threshold||u,this.minHold=r.minHold||d,this.touches=[],this._maxTouches=r.multiTouch?2:1,this.allowSelection=r.allowSelection,this.captureUpIfMoved=r.captureUpIfMoved,this.eventNS=l,e=t(e).handler(this),o.fn.init.call(this),h(this,{element:e,surface:r.global?t(s.documentElement):t(r.surface||e),stopPropagation:r.stopPropagation,pressed:!1}),this.surface.handler(this).on(i.applyEventMap("move",l),"_move").on(i.applyEventMap("up cancel",l),"_end"),e.on(i.applyEventMap("down",l),a,"_start"),(n.pointers||n.msPointers)&&e.css("-ms-touch-action","pinch-zoom double-tap-zoom"),r.preventDragEvent&&e.on(i.applyEventMap("dragstart",l),i.preventDefault),e.on(i.applyEventMap("mousedown selectstart",l),a,{root:e},"_select"),this.captureUpIfMoved&&n.eventCapture){var c=this.surface[0],p=t.proxy(this.preventIfMoving,this);v((function(t){c.addEventListener(t,p,!0)}))}this.bind(["press","hold","tap","start","move","end","release","cancel","gesturestart","gesturechange","gestureend","gesturetap","select"],r)},preventIfMoving:function(t){this._isMoved()&&t.preventDefault()},destroy:function(){var t=this;if(!t._destroyed){if(t._destroyed=!0,t.captureUpIfMoved&&n.eventCapture){var e=t.surface[0];v((function(i){e.removeEventListener(i,t.preventIfMoving)}))}t.element.kendoDestroy(t.eventNS),t.surface.kendoDestroy(t.eventNS),t.element.removeData("handler"),t.surface.removeData("handler"),t._disposeAll(),t.unbind(),delete t.surface,delete t.element,delete t.currentTarget}},capture:function(){y.current=this},cancel:function(){this._disposeAll(),this.trigger("cancel")},notify:function(t,e){var i=this.touches;if(this._isMultiTouch()){switch(t){case"move":t="gesturechange";break;case"end":t="gestureend";break;case"tap":t="gesturetap"}h(e,{touches:i},p(i[0],i[1]))}return this.trigger(t,e)},press:function(t,e,i){this._apiCall("_start",t,e,i)},move:function(t,e){this._apiCall("_move",t,e)},end:function(t,e){this._apiCall("_end",t,e)},_isMultiTouch:function(){return this.touches.length>1},_maxTouchesReached:function(){return this.touches.length>=this._maxTouches},_disposeAll:function(){for(var t=this.touches;t.length>0;)t.pop().dispose()},_isMoved:function(){return t.grep(this.touches,(function(t){return t.isMoved()})).length},_select:function(e){this.allowSelection&&!this.trigger("select",{event:e})||function(e){e.preventDefault();var i=t(e.data.root),n=i.closest(".k-widget").parent();n[0]||(n=i.parent());var s=t.extend(!0,{},e,{target:i[0]});n.trigger(t.Event(e.type,s))}(e)},_start:function(e){var i,n,s=0,r=this.filter,o=f(e),a=o.length,h=e.which;if(!(h&&h>1||this._maxTouchesReached()))for(y.current=null,this.currentTarget=e.currentTarget,this.stopPropagation&&e.stopPropagation();s<a&&!this._maxTouchesReached();s++)n=o[s],(i=r?t(n.currentTarget):this.element).length&&(n=new m(this,i,n),this.touches.push(n),n.press(),this._isMultiTouch()&&this.notify("gesturestart",{}))},_move:function(t){this._eachTouch("move",t)},_end:function(t){this._eachTouch("end",t)},_eachTouch:function(t,e){var i,n,s,r,o={},a=f(e),h=this.touches;for(i=0;i<h.length;i++)o[(n=h[i]).id]=n;for(i=0;i<a.length;i++)(r=o[(s=a[i]).id])&&r[t](s)},_apiCall:function(e,i,n,s){this[e]({api:!0,pageX:i,pageY:n,clientX:i,clientY:n,target:t(s||this.element)[0],stopPropagation:t.noop,preventDefault:t.noop})}});y.minHold=function(t){d=t},i.getTouches=f,i.touchDelta=p,i.UserEvents=y}(window.kendo.jQuery),function(t,e){var i,n=window.kendo,s=n.support,r=window.document,o=n.Class,a=n.ui.Widget,h=n.Observable,l=n.UserEvents,c=t.proxy,d=t.extend,u=n.getOffset,p={},f={},g={},m=n.elementUnderCursor;function v(t,e){return parseInt(t.css(e),10)||0}function y(t,e){return Math.min(Math.max(t,e.min),e.max)}function b(t,e){var i=u(t),n=i.left+v(t,"borderLeftWidth")+v(t,"paddingLeft"),s=i.top+v(t,"borderTopWidth")+v(t,"paddingTop");return{x:{min:n,max:n+t.width()-e.outerWidth(!0)},y:{min:s,max:s+t.height()-e.outerHeight(!0)}}}var w,x=h.extend({init:function(e,i){var s=this,r=e[0];s.capture=!1,r.addEventListener?(t.each(n.eventMap.down.split(" "),(function(){r.addEventListener(this,c(s._press,s),!0)})),t.each(n.eventMap.up.split(" "),(function(){r.addEventListener(this,c(s._release,s),!0)}))):(t.each(n.eventMap.down.split(" "),(function(){r.attachEvent(this,c(s._press,s))})),t.each(n.eventMap.up.split(" "),(function(){r.attachEvent(this,c(s._release,s))}))),h.fn.init.call(s),s.bind(["press","release"],i||{})},captureNext:function(){this.capture=!0},cancelCapture:function(){this.capture=!1},_press:function(t){this.trigger("press"),this.capture&&t.preventDefault()},_release:function(t){this.trigger("release"),this.capture&&(t.preventDefault(),this.cancelCapture())}}),_=h.extend({init:function(e){h.fn.init.call(this),this.forcedEnabled=!1,t.extend(this,e),this.scale=1,this.horizontal?(this.measure="offsetWidth",this.scrollSize="scrollWidth",this.axis="x"):(this.measure="offsetHeight",this.scrollSize="scrollHeight",this.axis="y")},makeVirtual:function(){t.extend(this,{virtual:!0,forcedEnabled:!0,_virtualMin:0,_virtualMax:0})},virtualSize:function(t,e){this._virtualMin===t&&this._virtualMax===e||(this._virtualMin=t,this._virtualMax=e,this.update())},outOfBounds:function(t){return t>this.max||t<this.min},forceEnabled:function(){this.forcedEnabled=!0},getSize:function(){return this.container[0][this.measure]},getTotal:function(){return this.element[0][this.scrollSize]},rescale:function(t){this.scale=t},update:function(t){var e=this.virtual?this._virtualMax:this.getTotal(),i=e*this.scale,n=this.getSize();this.max=this.virtual?-this._virtualMin:0,this.size=n,this.total=i,this.min=Math.min(this.max,n-i),this.minScale=n/e,this.centerOffset=(i-n)/2,this.enabled=this.forcedEnabled||i>n,t||this.trigger("change",this)}}),k=h.extend({init:function(t){h.fn.init.call(this),this.x=new _(d({horizontal:!0},t)),this.y=new _(d({horizontal:!1},t)),this.container=t.container,this.forcedMinScale=t.minScale,this.maxScale=t.maxScale||100,this.bind("change",t)},rescale:function(t){this.x.rescale(t),this.y.rescale(t),this.refresh()},centerCoordinates:function(){return{x:Math.min(0,-this.x.centerOffset),y:Math.min(0,-this.y.centerOffset)}},refresh:function(){this.x.update(),this.y.update(),this.enabled=this.x.enabled||this.y.enabled,this.minScale=this.forcedMinScale||Math.min(this.x.minScale,this.y.minScale),this.fitScale=Math.max(this.x.minScale,this.y.minScale),this.trigger("change")}}),C=h.extend({init:function(t){d(this,t),h.fn.init.call(this)},outOfBounds:function(){return this.dimension.outOfBounds(this.movable[this.axis])},dragMove:function(t){var e=this.dimension,i=this.axis,n=this.movable,s=n[i]+t;e.enabled&&((s<e.min&&t<0||s>e.max&&t>0)&&(t*=this.resistance),n.translateAxis(i,t),this.trigger("change",this))}}),S=o.extend({init:function(t){var e,i,n,s,r=this;d(r,{elastic:!0},t),n=r.elastic?.5:0,s=r.movable,r.x=e=new C({axis:"x",dimension:r.dimensions.x,resistance:n,movable:s}),r.y=i=new C({axis:"y",dimension:r.dimensions.y,resistance:n,movable:s}),r.userEvents.bind(["move","end","gesturestart","gesturechange"],{gesturestart:function(t){r.gesture=t,r.offset=r.dimensions.container.offset()},gesturechange:function(t){var n,o=r.gesture,a=o.center,h=t.center,l=t.distance/o.distance,c=r.dimensions.minScale,d=r.dimensions.maxScale;s.scale<=c&&l<1&&(l+=.8*(1-l)),s.scale*l>=d&&(l=d/s.scale);var u=s.x+r.offset.left,p=s.y+r.offset.top;n={x:(u-a.x)*l+h.x-u,y:(p-a.y)*l+h.y-p},s.scaleWith(l),e.dragMove(n.x),i.dragMove(n.y),r.dimensions.rescale(s.scale),r.gesture=t,t.preventDefault()},move:function(t){t.event.target.tagName.match(/textarea|input/i)||(e.dimension.enabled||i.dimension.enabled?(e.dragMove(t.x.delta),i.dragMove(t.y.delta),t.preventDefault()):t.touch.skip())},end:function(t){t.preventDefault()}})}}),T=s.transitions.prefix+"Transform";w=s.hasHW3D?function(t,e,i){return"translate3d("+t+"px,"+e+"px,0) scale("+i+")"}:function(t,e,i){return"translate("+t+"px,"+e+"px) scale("+i+")"};var P=h.extend({init:function(e){h.fn.init.call(this),this.element=t(e),this.element[0].style.webkitTransformOrigin="left top",this.x=0,this.y=0,this.scale=1,this._saveCoordinates(w(this.x,this.y,this.scale))},translateAxis:function(t,e){this[t]+=e,this.refresh()},scaleTo:function(t){this.scale=t,this.refresh()},scaleWith:function(t){this.scale*=t,this.refresh()},translate:function(t){this.x+=t.x,this.y+=t.y,this.refresh()},moveAxis:function(t,e){this[t]=e,this.refresh()},moveTo:function(t){d(this,t),this.refresh()},refresh:function(){var t,e=this.x,i=this.y;this.round&&(e=Math.round(e),i=Math.round(i)),(t=w(e,i,this.scale))!=this.coordinates&&(n.support.browser.msie&&n.support.browser.version<10?(this.element[0].style.position="absolute",this.element[0].style.left=this.x+"px",this.element[0].style.top=this.y+"px"):this.element[0].style[T]=t,this._saveCoordinates(t),this.trigger("change"))},_saveCoordinates:function(t){this.coordinates=t}}),A=a.extend({init:function(t,e){a.fn.init.call(this,t,e);var i=this.options.group;i in f?f[i].push(this):f[i]=[this]},events:["dragenter","dragleave","drop"],options:{name:"DropTarget",group:"default"},destroy:function(){var t,e=this.options.group,i=f[e]||g[e];if(i.length>1){for(a.fn.destroy.call(this),t=0;t<i.length;t++)if(i[t]==this){i.splice(t,1);break}}else A.destroyGroup(e)},_trigger:function(t,e){var i=p[this.options.group];if(i)return this.trigger(t,d({},e.event,{draggable:i,dropTarget:e.dropTarget}))},_over:function(t){this._trigger("dragenter",t)},_out:function(t){this._trigger("dragleave",t)},_drop:function(t){var e=p[this.options.group];e&&(e.dropped=!this._trigger("drop",t))}});A.destroyGroup=function(t){var e,i=f[t]||g[t];if(i){for(e=0;e<i.length;e++)a.fn.destroy.call(i[e]);i.length=0,delete f[t],delete g[t]}},A._cache=f;var z=A.extend({init:function(t,e){a.fn.init.call(this,t,e);var i=this.options.group;i in g?g[i].push(this):g[i]=[this]},options:{name:"DropTargetArea",group:"default",filter:null}}),D=a.extend({init:function(t,e){var i=this;a.fn.init.call(i,t,e),i._activated=!1,i.userEvents=new l(i.element,{global:!0,allowSelection:!0,stopPropagation:!0,filter:i.options.filter,threshold:i.options.distance,start:c(i._start,i),hold:c(i._hold,i),move:c(i._drag,i),end:c(i._end,i),cancel:c(i._cancel,i),select:c(i._select,i)}),i._afterEndHandler=c(i._afterEnd,i),i.captureEscape=function(t){t.keyCode===n.keys.ESC&&(i._trigger("dragcancel",{event:t}),i.userEvents.cancel())}},events:["hold","dragstart","drag","dragend","dragcancel"],options:{name:"Draggable",distance:5,group:"default",cursorOffset:null,axis:null,container:null,filter:null,ignore:null,holdToDrag:!1,dropped:!1},cancelHold:function(){this._activated=!1},_updateHint:function(e){var i,n=this.options,s=this.boundaries,r=n.axis,o=this.options.cursorOffset;o?i={left:e.x.location+o.left,top:e.y.location+o.top}:(this.hintOffset.left+=e.x.delta,this.hintOffset.top+=e.y.delta,i=t.extend({},this.hintOffset)),s&&(i.top=y(i.top,s.y),i.left=y(i.left,s.x)),"x"===r?delete i.top:"y"===r&&delete i.left,this.hint.css(i)},_shouldIgnoreTarget:function(e){var i=this.options.ignore;return i&&t(e).is(i)},_select:function(t){this._shouldIgnoreTarget(t.event.target)||t.preventDefault()},_start:function(e){var i=this.options,s=i.container,o=i.hint;if(this._shouldIgnoreTarget(e.touch.initialTouch)||i.holdToDrag&&!this._activated)this.userEvents.cancel();else{if(this.currentTarget=e.target,this.currentTargetOffset=u(this.currentTarget),o){this.hint&&this.hint.stop(!0,!0).remove(),this.hint=n.isFunction(o)?t(o.call(this,this.currentTarget)):o;var a=u(this.currentTarget);this.hintOffset=a,this.hint.css({position:"absolute",zIndex:2e4,left:a.left,top:a.top}).appendTo(r.body)}p[i.group]=this,this.dropped=!1,s&&(this.boundaries=b(s,this.hint)),this._trigger("dragstart",e)&&(this.userEvents.cancel(),this._afterEnd()),t(r).on("keyup",this.captureEscape)}},_hold:function(t){this.currentTarget=t.target,this._trigger("hold",t)?this.userEvents.cancel():this._activated=!0},_drag:function(e){e.preventDefault(),this._withDropTarget(e,(function(n,s){if(n){if(i){if(s===i.targetElement)return;i._trigger("dragleave",d(e,{dropTarget:t(i.targetElement)}))}n._trigger("dragenter",d(e,{dropTarget:t(s)})),i=d(n,{targetElement:s})}else i&&(i._trigger("dragleave",d(e,{dropTarget:t(i.targetElement)})),i=null)})),this._trigger("drag",e),this.hint&&this._updateHint(e)},_end:function(e){this._withDropTarget(e,(function(n,s){n&&(n._drop(d({},e,{dropTarget:t(s)})),i=null)})),this._trigger("dragend",e),this._cancel(e.event)},_cancel:function(){var t=this;t._activated=!1,t.hint&&!t.dropped?setTimeout((function(){t.hint.stop(!0,!0).animate(t.currentTargetOffset,"fast",t._afterEndHandler)}),0):t._afterEnd()},_trigger:function(t,e){return this.trigger(t,d({},e.event,{x:e.x,y:e.y,currentTarget:this.currentTarget,dropTarget:e.dropTarget}))},_withDropTarget:function(e,i){var n,r,o=this.options,a=f[o.group],h=g[o.group];(a&&a.length||h&&h.length)&&(n=m(e),this.hint&&function(e,i){try{return t.contains(e,i)||e==i}catch(t){return!1}}(this.hint[0],n)&&(this.hint.hide(),(n=m(e))||(n=m(e)),this.hint.show()),(r=function(t,e,i){for(var n,r,o=0,a=e&&e.length,h=i&&i.length;t&&t.parentNode;){for(o=0;o<a;o++)if((n=e[o]).element[0]===t)return{target:n,targetElement:t};for(o=0;o<h;o++)if(r=i[o],s.matchesSelector.call(t,r.options.filter))return{target:r,targetElement:t};t=t.parentNode}}(n,a,h))?i(r.target,r.targetElement):i())},destroy:function(){a.fn.destroy.call(this),this._afterEnd(),this.userEvents.destroy(),this.currentTarget=null},_afterEnd:function(){this.hint&&this.hint.remove(),delete p[this.options.group],this.trigger("destroy"),t(r).off("keyup",this.captureEscape)}});n.ui.plugin(A),n.ui.plugin(z),n.ui.plugin(D),n.TapCapture=x,n.containerBoundaries=b,d(n.ui,{Pane:S,PaneDimensions:k,Movable:P})}(window.kendo.jQuery),function(t,e){var i=window.kendo,n=i.mobile,s=i.effects,r=n.ui,o=t.proxy,a=t.extend,h=r.Widget,l=i.Class,c=i.ui.Movable,d=i.ui.Pane,u=i.ui.PaneDimensions,p=s.Transition,f=s.Animation,g=Math.abs,m=f.extend({init:function(t){f.fn.init.call(this),a(this,t),this.userEvents.bind("gestureend",o(this.start,this)),this.tapCapture.bind("press",o(this.cancel,this))},enabled:function(){return this.movable.scale<this.dimensions.minScale},done:function(){return this.dimensions.minScale-this.movable.scale<.01},tick:function(){var t=this.movable;t.scaleWith(1.1),this.dimensions.rescale(t.scale)},onEnd:function(){var t=this.movable;t.scaleTo(this.dimensions.minScale),this.dimensions.rescale(t.scale)}}),v=f.extend({init:function(t){var e=this;f.fn.init.call(e),a(e,t,{transition:new p({axis:t.axis,movable:t.movable,onEnd:function(){e._end()}})}),e.tapCapture.bind("press",(function(){e.cancel()})),e.userEvents.bind("end",o(e.start,e)),e.userEvents.bind("gestureend",o(e.start,e)),e.userEvents.bind("tap",o(e.onEnd,e))},onCancel:function(){this.transition.cancel()},freeze:function(t){this.cancel(),this._moveTo(t)},onEnd:function(){this.paneAxis.outOfBounds()?this._snapBack():this._end()},done:function(){return g(this.velocity)<1},start:function(t){var e;this.dimension.enabled&&(this.paneAxis.outOfBounds()?this._snapBack():(e=2===t.touch.id?0:t.touch[this.axis].velocity,this.velocity=Math.max(Math.min(e*this.velocityMultiplier,55),-55),this.tapCapture.captureNext(),f.fn.start.call(this)))},tick:function(){var t=this.dimension,e=this.paneAxis.outOfBounds()?.5:this.friction,i=this.velocity*=e,n=this.movable[this.axis]+i;!this.elastic&&t.outOfBounds(n)&&(n=Math.max(Math.min(n,t.max),t.min),this.velocity=0),this.movable.moveAxis(this.axis,n)},_end:function(){this.tapCapture.cancelCapture(),this.end()},_snapBack:function(){var t=this.dimension,e=this.movable[this.axis]>t.max?t.max:t.min;this._moveTo(e)},_moveTo:function(t){this.transition.moveTo({location:t,duration:500,ease:p.easeOutExpo})}}),y=f.extend({init:function(t){i.effects.Animation.fn.init.call(this),a(this,t,{origin:{},destination:{},offset:{}})},tick:function(){this._updateCoordinates(),this.moveTo(this.origin)},done:function(){return g(this.offset.y)<5&&g(this.offset.x)<5},onEnd:function(){this.moveTo(this.destination)},setCoordinates:function(t,e){this.offset={},this.origin=t,this.destination=e},_updateCoordinates:function(){this.offset={x:(this.destination.x-this.origin.x)/4,y:(this.destination.y-this.origin.y)/4},this.origin={y:this.origin.y+this.offset.y,x:this.origin.x+this.offset.x}}}),b=l.extend({init:function(e){var i="x"===e.axis,n=t('<div class="km-touch-scrollbar km-'+(i?"horizontal":"vertical")+'-scrollbar" />');a(this,e,{element:n,elementSize:0,movable:new c(n),scrollMovable:e.movable,size:i?"width":"height"}),this.scrollMovable.bind("change",o(this._move,this)),this.container.append(n)},_move:function(){var t=this.axis,e=this.dimension,i=e.size,n=this.scrollMovable,s=i/e.total,r=Math.round(-n[t]*s),o=Math.round(i*s);r+o>i?o=i-r:r<0&&(o+=r,r=0),this.elementSize!=o&&(this.element.css(this.size,o+"px"),this.elementSize=o),this.movable.moveAxis(t,r)},show:function(){this.element.css({opacity:.7,visibility:"visible"})},hide:function(){this.element.css({opacity:0})}}),w=h.extend({init:function(e,n){var s=this;if(h.fn.init.call(s,e,n),e=s.element,s._native=s.options.useNative&&i.support.hasNativeScrolling,s._native)return e.addClass("km-native-scroller").prepend('<div class="km-scroll-header"/>'),void a(s,{scrollElement:e,fixedContainer:e.children().first()});e.css("overflow","hidden").addClass("km-scroll-wrapper").wrapInner('<div class="km-scroll-container"/>').prepend('<div class="km-scroll-header"/>');var r=e.children().eq(1),l=new i.TapCapture(e),p=new c(r),f=new u({element:r,container:e,forcedEnabled:s.options.zoom}),v=this.options.avoidScrolling,b=new i.UserEvents(e,{allowSelection:!0,preventDragEvent:!0,captureUpIfMoved:!0,multiTouch:s.options.zoom,start:function(e){f.refresh();var i=g(e.x.velocity),n=g(e.y.velocity),r=2*i>=n,o=2*n>=i;!t.contains(s.fixedContainer[0],e.event.target)&&!v(e)&&s.enabled&&(f.x.enabled&&r||f.y.enabled&&o)?b.capture():b.cancel()}}),w=new d({movable:p,dimensions:f,userEvents:b,elastic:s.options.elastic}),x=new m({movable:p,dimensions:f,userEvents:b,tapCapture:l}),_=new y({moveTo:function(t){s.scrollTo(t.x,t.y)}});p.bind("change",(function(){s.scrollTop=-p.y,s.scrollLeft=-p.x,s.trigger("scroll",{scrollTop:s.scrollTop,scrollLeft:s.scrollLeft})})),s.options.mousewheelScrolling&&e.on("DOMMouseScroll mousewheel",o(this,"_wheelScroll")),a(s,{movable:p,dimensions:f,zoomSnapBack:x,animatedScroller:_,userEvents:b,pane:w,tapCapture:l,pulled:!1,enabled:!0,scrollElement:r,scrollTop:0,scrollLeft:0,fixedContainer:e.children().first()}),s._initAxis("x"),s._initAxis("y"),s._wheelEnd=function(){s._wheel=!1,s.userEvents.end(0,s._wheelY)},f.refresh(),s.options.pullToRefresh&&s._initPullToRefresh()},_wheelScroll:function(t){this._wheel||(this._wheel=!0,this._wheelY=0,this.userEvents.press(0,this._wheelY)),clearTimeout(this._wheelTimeout),this._wheelTimeout=setTimeout(this._wheelEnd,50);var e=i.wheelDeltaY(t);e&&(this._wheelY+=e,this.userEvents.move(0,this._wheelY)),t.preventDefault()},makeVirtual:function(){this.dimensions.y.makeVirtual()},virtualSize:function(t,e){this.dimensions.y.virtualSize(t,e)},height:function(){return this.dimensions.y.size},scrollHeight:function(){return this.scrollElement[0].scrollHeight},scrollWidth:function(){return this.scrollElement[0].scrollWidth},options:{name:"Scroller",zoom:!1,pullOffset:140,elastic:!0,useNative:!1,mousewheelScrolling:!0,avoidScrolling:function(){return!1},pullToRefresh:!1,pullTemplate:"Pull to refresh",releaseTemplate:"Release to refresh",refreshTemplate:"Refreshing"},events:["pull","scroll","resize"],_resize:function(){this._native||this.contentResized()},setOptions:function(t){h.fn.setOptions.call(this,t),t.pullToRefresh&&this._initPullToRefresh()},reset:function(){this._native?this.scrollElement.scrollTop(0):(this.movable.moveTo({x:0,y:0}),this._scale(1))},contentResized:function(){this.dimensions.refresh(),this.pane.x.outOfBounds()&&this.movable.moveAxis("x",this.dimensions.x.min),this.pane.y.outOfBounds()&&this.movable.moveAxis("y",this.dimensions.y.min)},zoomOut:function(){var t=this.dimensions;t.refresh(),this._scale(t.fitScale),this.movable.moveTo(t.centerCoordinates())},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},scrollTo:function(t,e){this._native?(this.scrollElement.scrollLeft(g(t)),this.scrollElement.scrollTop(g(e))):(this.dimensions.refresh(),this.movable.moveTo({x:t,y:e}))},animatedScrollTo:function(t,e){var i,n;this._native?this.scrollTo(t,e):(i={x:this.movable.x,y:this.movable.y},n={x:t,y:e},this.animatedScroller.setCoordinates(i,n),this.animatedScroller.start())},pullHandled:function(){this.refreshHint.removeClass("km-scroller-refresh"),this.hintContainer.html(this.pullTemplate({})),this.yinertia.onEnd(),this.xinertia.onEnd(),this.userEvents.cancel()},destroy:function(){h.fn.destroy.call(this),this.userEvents&&this.userEvents.destroy()},_scale:function(t){this.dimensions.rescale(t),this.movable.scaleTo(t)},_initPullToRefresh:function(){this.dimensions.y.forceEnabled(),this.pullTemplate=i.template(this.options.pullTemplate),this.releaseTemplate=i.template(this.options.releaseTemplate),this.refreshTemplate=i.template(this.options.refreshTemplate),this.scrollElement.prepend('<span class="km-scroller-pull"><span class="km-icon"></span><span class="km-loading-left"></span><span class="km-loading-right"></span><span class="km-template">'+this.pullTemplate({})+"</span></span>"),this.refreshHint=this.scrollElement.children().first(),this.hintContainer=this.refreshHint.children(".km-template"),this.pane.y.bind("change",o(this._paneChange,this)),this.userEvents.bind("end",o(this._dragEnd,this))},_dragEnd:function(){this.pulled&&(this.pulled=!1,this.refreshHint.removeClass("km-scroller-release").addClass("km-scroller-refresh"),this.hintContainer.html(this.refreshTemplate({})),this.yinertia.freeze(this.options.pullOffset/2),this.trigger("pull"))},_paneChange:function(){this.movable.y/.5>this.options.pullOffset?this.pulled||(this.pulled=!0,this.refreshHint.removeClass("km-scroller-refresh").addClass("km-scroller-release"),this.hintContainer.html(this.releaseTemplate({}))):this.pulled&&(this.pulled=!1,this.refreshHint.removeClass("km-scroller-release"),this.hintContainer.html(this.pullTemplate({})))},_initAxis:function(t){var e=this,i=e.movable,n=e.dimensions[t],s=e.tapCapture,r=e.pane[t],o=new b({axis:t,movable:i,dimension:n,container:e.element});r.bind("change",(function(){o.show()})),e[t+"inertia"]=new v({axis:t,paneAxis:r,movable:i,tapCapture:s,userEvents:e.userEvents,dimension:n,elastic:e.options.elastic,friction:e.options.friction||.96,velocityMultiplier:e.options.velocityMultiplier||10,end:function(){o.hide(),e.trigger("scrollEnd",{axis:t,scrollTop:e.scrollTop,scrollLeft:e.scrollLeft})}})}});r.plugin(w)}(window.kendo.jQuery),function(t,e){var i=window.kendo,n=i.ui,s=n.Widget,r=i.support,o=i.getOffset,a=i._activeElement,h=/k-state-border-(\w+)/,l=t(window),c=t(document.documentElement),d=r.transitions.css+"transform",u=t.extend,p=".kendoPopup",f=["font-size","font-family","font-stretch","font-style","font-weight","line-height"];function g(e,i){return e===i||t.contains(e,i)}var m=s.extend({init:function(e,n){var r,o=this;(n=n||{}).isRtl&&(n.origin=n.origin||"bottom right",n.position=n.position||"top right"),s.fn.init.call(o,e,n),e=o.element,n=o.options,o.collisions=n.collision?n.collision.split(" "):[],1===o.collisions.length&&o.collisions.push(o.collisions[0]),r=t(o.options.anchor).closest(".k-popup,.k-group").filter(":not([class^=km-])"),n.appendTo=t(t(n.appendTo)[0]||r[0]||"body"),o.element.hide().addClass("k-popup k-group k-reset").toggleClass("k-rtl",!!n.isRtl).css({position:"absolute"}).appendTo(n.appendTo).on("mouseenter"+p,(function(){o._hovered=!0})).on("mouseleave"+p,(function(){o._hovered=!1})),o.wrapper=t(),!1===n.animation&&(n.animation={open:{effects:{}},close:{hide:!0,effects:{}}}),u(n.animation.open,{complete:function(){o.wrapper.css({overflow:"visible"}),o.trigger("activate")}}),u(n.animation.close,{complete:function(){o.wrapper.hide();var s,r,a=o.wrapper.data("location"),l=t(n.anchor);a&&o.wrapper.css(a),"body"!=n.anchor&&(r="k-state-border-"+(s=(l[0].className.match(h)||["","down"])[1]),l.removeClass(r).children(".k-picker-wrap, .k-dropdown-wrap, .k-link").removeClass("k-state-active").removeClass(r),e.removeClass("k-state-border-"+i.directions[s].reverse)),o._closing=!1,o.trigger("deactivate")}}),o._mousedownProxy=function(t){o._mousedown(t)},o._resizeProxy=function(t){o._resize(t)},n.toggleTarget&&t(n.toggleTarget).on(n.toggleEvent+p,t.proxy(o.toggle,o))},events:["open","activate","close","deactivate"],options:{name:"Popup",toggleEvent:"click",origin:"bottom left",position:"top left",anchor:"body",collision:"flip fit",viewport:window,copyAnchorStyles:!0,autosize:!1,modal:!1,animation:{open:{effects:"slideIn:down",transition:!0,duration:200},close:{duration:100,hide:!0}}},destroy:function(){var e,n=this.options,r=this.element.off(p);s.fn.destroy.call(this),n.toggleTarget&&t(n.toggleTarget).off(p),n.modal||(c.unbind("down",this._mousedownProxy),l.unbind("resize scroll",this._resizeProxy)),i.destroy(this.element.children()),r.removeData(),n.appendTo[0]===document.body&&((e=r.parent(".k-animation-container"))[0]?e.remove():r.remove())},open:function(e,n){var s,o,a={isFixed:!isNaN(parseInt(n,10)),x:e,y:n},h=this.element,p=this.options,g="down",m=t(p.anchor),v=h[0]&&h.hasClass("km-widget");if(!this.visible()){if(p.copyAnchorStyles&&(v&&"font-size"==f[0]&&f.shift(),h.css(i.getComputedStyles(m[0],f))),h.data("animating")||this.trigger("open"))return;if(p.modal||(c.unbind("down",this._mousedownProxy).bind("down",this._mousedownProxy),r.mobileOS.ios||r.mobileOS.android||l.unbind("resize scroll",this._resizeProxy).bind("resize scroll",this._resizeProxy)),this.wrapper=o=i.wrap(h,p.autosize).css({overflow:"hidden",display:"block",position:"absolute"}),r.mobileOS.android&&o.add(m).css(d,"translatez(0)"),o.css("position"),t(p.appendTo)[0]==document.body&&o.css("top","-10000px"),s=u(!0,{},p.animation.open),this.flipped=this._position(a),s.effects=i.parseEffects(s.effects,this.flipped),g=s.effects.slideIn?s.effects.slideIn.direction:g,"body"!=p.anchor){var y="k-state-border-"+g;h.addClass("k-state-border-"+i.directions[g].reverse),m.addClass(y).children(".k-picker-wrap, .k-dropdown-wrap, .k-link").addClass("k-state-active").addClass(y)}h.data("effects",s.effects).kendoStop(!0).kendoAnimate(s)}},toggle:function(){this[this.visible()?"close":"open"]()},visible:function(){return this.element.is(":visible")},close:function(){var e,n,s,r,o=this.options;if(this.visible()){if(e=this.wrapper[0]?this.wrapper:i.wrap(this.element).hide(),this._closing||this.trigger("close"))return;this.element.find(".k-popup").each((function(){var e=t(this).data("kendoPopup");e&&e.close()})),c.unbind("down",this._mousedownProxy),l.unbind("resize scroll",this._resizeProxy),n=u(!0,{},o.animation.close),s=this.element.data("effects"),!(r=n.effects)&&!i.size(r)&&s&&i.size(s)&&(n.effects=s,n.reverse=!0),this._closing=!0,this.element.kendoStop(!0),e.css({overflow:"hidden"}),this.element.kendoAnimate(n)}},_resize:function(t){var e=this;"resize"===t.type?(clearTimeout(e._resizeTimeout),e._resizeTimeout=setTimeout((function(){e._position(),e._resizeTimeout=null}),50)):e._hovered||g(e.element[0],a())||e.close()},_mousedown:function(e){var n=this.element[0],s=this.options,r=t(s.anchor)[0],o=s.toggleTarget,a=i.eventTarget(e),h=t(a).closest(".k-popup"),l=h.parent().parent(".km-shim").length;h=h[0],!l&&h&&h!==this.element[0]||"popover"!==t(e.target).closest("a").data("rel")&&(g(n,a)||g(r,a)||o&&g(t(o)[0],a)||this.close())},_fit:function(t,e,i){var n=0;return t+e>i&&(n=i-(t+e)),t<0&&(n=-t),n},_flip:function(t,e,i,n,s,r,o){var a=0;return o=o||e,r!==s&&"center"!==r&&"center"!==s&&(t+o>n&&(a+=-(i+e)),t+a<0&&(a+=i+e)),a},_position:function(e){var i,n,s,a,h,l,c=this.element.css("position",""),d=this.wrapper,p=this.options,f=t(p.viewport),g=f.offset(),m=t(p.anchor),v=p.origin.toLowerCase().split(" "),y=p.position.toLowerCase().split(" "),b=this.collisions,w=r.zoomLevel(),x=10002,_=!!(f[0]==window&&window.innerWidth&&w<=1.02),k=0;if(h=_?window.innerWidth:f.width(),l=_?window.innerHeight:f.height(),(i=m.parents().filter(d.siblings()))[0])if(s=Number(t(i).css("zIndex")))x=s+1;else for(a=(n=m.parentsUntil(i)).length;k<a;k++)(s=Number(t(n[k]).css("zIndex")))&&x<s&&(x=s+1);d.css("zIndex",x),e&&e.isFixed?d.css({left:e.x,top:e.y}):d.css(this._align(v,y));var C=o(d,"position",m[0]===d.offsetParent()[0]),S=o(d);m.offsetParent().parent(".k-animation-container,.k-popup,.k-group").length&&(C=o(d,"position",!0),S=o(d)),f[0]===window?(S.top-=window.pageYOffset||document.documentElement.scrollTop||0,S.left-=window.pageXOffset||document.documentElement.scrollLeft||0):(S.top-=g.top,S.left-=g.left),this.wrapper.data("location")||d.data("location",u({},C));var T=u({},S),P=u({},C);"fit"===b[0]&&(P.top+=this._fit(T.top,d.outerHeight(),l/w)),"fit"===b[1]&&(P.left+=this._fit(T.left,d.outerWidth(),h/w));var A=u({},P);return"flip"===b[0]&&(P.top+=this._flip(T.top,c.outerHeight(),m.outerHeight(),l/w,v[0],y[0],d.outerHeight())),"flip"===b[1]&&(P.left+=this._flip(T.left,c.outerWidth(),m.outerWidth(),h/w,v[1],y[1],d.outerWidth())),c.css("position","absolute"),d.css(P),P.left!=A.left||P.top!=A.top},_align:function(e,i){var n,s=this.wrapper,r=t(this.options.anchor),a=e[0],h=e[1],l=i[0],c=i[1],d=o(r),u=t(this.options.appendTo),p=s.outerWidth(),f=s.outerHeight(),g=r.outerWidth(),m=r.outerHeight(),v=d.top,y=d.left,b=Math.round;return u[0]!=document.body&&(v-=(n=o(u)).top,y-=n.left),"bottom"===a&&(v+=m),"center"===a&&(v+=b(m/2)),"bottom"===l&&(v-=f),"center"===l&&(v-=b(f/2)),"right"===h&&(y+=g),"center"===h&&(y+=b(g/2)),"right"===c&&(y-=p),"center"===c&&(y-=b(p/2)),{top:v,left:y}}});n.plugin(m)}(window.kendo.jQuery),function(t,e){var i=window.kendo,n=i.ui.Widget,s=i.ui.Popup,r=i.isFunction,o=t.isPlainObject,a=t.extend,h=t.proxy,l=t(document),c=i.isLocalUrl,d=i.template("<iframe frameborder='0' class='k-content-frame' src='#= content.url #'>This page requires frames in order to show content</iframe>"),u=".kendoTooltip",p={bottom:{origin:"bottom center",position:"top center"},top:{origin:"top center",position:"bottom center"},left:{origin:"center left",position:"center right",collision:"fit flip"},right:{origin:"center right",position:"center left",collision:"fit flip"},center:{position:"center center",origin:"center center"}},f={top:"bottom",bottom:"top",left:"right",right:"left",center:"center"},g={bottom:"n",top:"s",left:"e",right:"w",center:"n"},m={horizontal:{offset:"top",size:"outerHeight"},vertical:{offset:"left",size:"outerWidth"}};function v(t){for(;t.length;)y(t),t=t.parent()}function y(t){var e=t.data(i.ns+"title");e&&(t.attr("title",e),t.removeData(i.ns+"title"))}function b(t){var e=t.attr("title");e&&(t.data(i.ns+"title",e),t.attr("title",""))}function w(t){for(;t.length&&!t.is("body");)b(t),t=t.parent()}var x=n.extend({init:function(t,e){var i;n.fn.init.call(this,t,e),i=this.options.position.match(/left|right/)?"horizontal":"vertical",this.dimensions=m[i],this._documentKeyDownHandler=h(this._documentKeyDown,this),this.element.on(this.options.showOn+u,this.options.filter,h(this._showOn,this)).on("mouseenter"+u,this.options.filter,h(this._mouseenter,this)),this.options.autoHide&&this.element.on("mouseleave"+u,this.options.filter,h(this._mouseleave,this))},options:{name:"Tooltip",filter:"",content:function(t){return t.target.data(i.ns+"title")},showAfter:100,callout:!0,position:"bottom",showOn:"mouseenter",autoHide:!0,width:null,height:null,animation:{open:{effects:"fade:in",duration:0},close:{effects:"fade:out",duration:40,hide:!0}}},events:["show","hide","contentLoad","error","requestStart"],_mouseenter:function(e){w(t(e.currentTarget))},_showOn:function(e){var i=this,n=t(e.currentTarget);i.options.showOn&&i.options.showOn.match(/click|focus/)?i._show(n):(clearTimeout(i.timeout),i.timeout=setTimeout((function(){i._show(n)}),i.options.showAfter))},_appendContent:function(t){var e,n=this,s=n.options.content,a=n.content,h=n.options.iframe;o(s)&&s.url?("iframe"in n.options||(h=!c(s.url)),n.trigger("requestStart",{options:s,target:t}),h?(a.hide(),(e=a.find(".k-content-frame")[0])?e.src=s.url||e.src:a.html(d({content:s})),a.find(".k-content-frame").off("load"+u).on("load"+u,(function(){n.trigger("contentLoad"),a.show()}))):(a.empty(),i.ui.progress(a,!0),n._ajaxRequest(s))):s&&r(s)?(s=s({sender:this,target:t}),n.content.html(s||"")):n.content.html(s)},_ajaxRequest:function(t){var e=this;jQuery.ajax(a({type:"GET",dataType:"html",cache:!1,error:function(t,n){i.ui.progress(e.content,!1),e.trigger("error",{status:n,xhr:t})},success:h((function(t){i.ui.progress(e.content,!1),e.content.html(t),e.trigger("contentLoad")}),e)},t))},_documentKeyDown:function(t){t.keyCode===i.keys.ESC&&this.hide()},refresh:function(){var t=this.popup;t&&t.options.anchor&&this._appendContent(t.options.anchor)},hide:function(){this.popup&&this.popup.close()},show:function(t){w(t=t||this.element),this._show(t)},_show:function(t){var e=this,i=e.target();e.popup||e._initPopup(),i&&i[0]!=t[0]&&(e.popup.close(),e.popup.element.kendoStop(!0,!0)),i&&i[0]==t[0]||(e._appendContent(t),e.popup.options.anchor=t),e.popup.one("deactivate",(function(){v(t),t.removeAttr("aria-describedby"),this.element.removeAttr("id").attr("aria-hidden",!0),l.off("keydown"+u,e._documentKeyDownHandler)})),e.popup.open()},_initPopup:function(){var e=this,n=e.options,r=t(i.template('<div role="tooltip" class="k-widget k-tooltip#if (!autoHide) {# k-tooltip-closable#}#">#if (!autoHide) {# <div class="k-tooltip-button"><a href="\\#" class="k-icon k-i-close">close</a></div> #}#<div class="k-tooltip-content"></div>#if (callout){ #<div class="k-callout k-callout-#=dir#"></div>#}#</div>')({callout:n.callout&&"center"!==n.position,dir:g[n.position],autoHide:n.autoHide}));e.popup=new s(r,a({activate:function(){var t=this.options.anchor,i=t[0].id||e.element[0].id;i&&(t.attr("aria-describedby",i+"_tt_active"),this.element.attr("id",i+"_tt_active")),n.callout&&e._positionCallout(),this.element.removeAttr("aria-hidden"),l.on("keydown"+u,e._documentKeyDownHandler),e.trigger("show")},close:function(){e.trigger("hide")},copyAnchorStyles:!1,animation:n.animation},p[n.position])),r.css({width:n.width,height:n.height}),e.content=r.find(".k-tooltip-content"),e.arrow=r.find(".k-callout"),n.autoHide?r.on("mouseleave"+u,h(e._mouseleave,e)):r.on("click"+u,".k-tooltip-button",h(e._closeButtonClick,e))},_closeButtonClick:function(t){t.preventDefault(),this.hide()},_mouseleave:function(e){if(this.popup){var i=t(e.currentTarget),n=i.offset(),s=e.pageX,r=e.pageY;if(n.right=n.left+i.outerWidth(),n.bottom=n.top+i.outerHeight(),s>n.left&&s<n.right&&r>n.top&&r<n.bottom)return;this.popup.close()}else v(t(e.currentTarget));clearTimeout(this.timeout)},_positionCallout:function(){var e=this.options.position,i=this.dimensions,n=i.offset,s=this.popup,r=s.options.anchor,o=t(r).offset(),a=parseInt(this.arrow.css("border-top-width"),10),h=t(s.element).offset(),l=g[s.flipped?f[e]:e],c=o[n]-h[n]+t(r)[i.size]()/2-a;this.arrow.removeClass("k-callout-n k-callout-s k-callout-w k-callout-e").addClass("k-callout-"+l).css(n,c)},target:function(){return this.popup?this.popup.options.anchor:null},destroy:function(){var t=this.popup;t&&(t.element.off(u),t.destroy()),this.element.off(u),l.off("keydown"+u,this._documentKeyDownHandler),n.fn.destroy.call(this)}});i.ui.plugin(x)}(window.kendo.jQuery),function(t,e){var i=document,n=window.kendo,s=n.dataviz={},r=n.Class,o=n.template,a=t.map,h=t.noop,l=t.inArray,c=Math,d=n.deepExtend,u="bottom",p="center",f=c.PI/180,g=/\{\d+:?/,m="left",v=Number.MAX_VALUE,y=-Number.MAX_VALUE,b="right",w="top",x=/([A-Z])/g,_="#fff",k="x",C="y";function S(t,e){var i={top:0,right:0,bottom:0,left:0};return e=e||0,"number"==typeof t?i.top=i.right=i.bottom=i.left=t:(i.top=t.top||e,i.right=t.right||e,i.bottom=t.bottom||e,i.left=t.left||e),i}var T=r.extend({init:function(t,e,i,n,s,r){this.a=t||0,this.b=e||0,this.c=i||0,this.d=n||0,this.e=s||0,this.f=r||0},times:function(t){return new T(this.a*t.a+this.c*t.b,this.b*t.a+this.d*t.b,this.a*t.c+this.c*t.d,this.b*t.c+this.d*t.d,this.a*t.e+this.c*t.f+this.e,this.b*t.e+this.d*t.f+this.f)}});d(T,{translate:function(t,e){var i=new T;return i.a=1,i.b=0,i.c=0,i.d=1,i.e=t,i.f=e,i},unit:function(){return new T(1,0,0,1,0,0)},rotate:function(t,e,i){var n=new T;return n.a=c.cos(t*f),n.b=c.sin(t*f),n.c=-n.b,n.d=n.a,n.e=e-e*n.a+i*n.b||0,n.f=i-i*n.a-e*n.b||0,n},scale:function(t,e){var i=new T;return i.a=t,i.b=0,i.c=0,i.d=e,i.e=0,i.f=0,i}}),n.dataviz.Matrix=T;var P=function t(e,i){if(!(this instanceof t))return new t(e,i);this.x=e||0,this.y=i||0};P.fn=P.prototype={clone:function(){return new P(this.x,this.y)},equals:function(t){return t&&t.x===this.x&&t.y===this.y},rotate:function(t,e){var i=e*f,n=c.cos(i),s=c.sin(i),r=t.x,o=t.y,a=this.x,h=this.y;return this.x=_t(r+(a-r)*n+(h-o)*s,3),this.y=_t(o+(h-o)*n-(a-r)*s,3),this},multiply:function(t){return this.x*=t,this.y*=t,this},distanceTo:function(t){var e=this.x-t.x,i=this.y-t.y;return c.sqrt(e*e+i*i)},transform:function(t){return this.x=t.a*this.x+t.c*this.y+t.e,this.y=t.b*this.x+t.d*this.y+t.f,this}},P.onCircle=function(t,e,i){return e*=f,new P(t.x-i*c.cos(e),t.y-i*c.sin(e))};var A=function t(e,i,n,s){if(!(this instanceof t))return new t(e,i,n,s);this.x1=e||0,this.x2=n||0,this.y1=i||0,this.y2=s||0};A.fn=A.prototype={width:function(){return this.x2-this.x1},height:function(){return this.y2-this.y1},translate:function(t,e){return this.x1+=t,this.x2+=t,this.y1+=e,this.y2+=e,this},move:function(t,e){var i=this.height(),n=this.width();return Tt(t)&&(this.x1=t,this.x2=this.x1+n),Tt(e)&&(this.y1=e,this.y2=this.y1+i),this},wrap:function(t){return this.x1=c.min(this.x1,t.x1),this.y1=c.min(this.y1,t.y1),this.x2=c.max(this.x2,t.x2),this.y2=c.max(this.y2,t.y2),this},wrapPoint:function(t){return this.wrap(new A(t.x,t.y,t.x,t.y)),this},snapTo:function(t,e){return e!=k&&e||(this.x1=t.x1,this.x2=t.x2),e!=C&&e||(this.y1=t.y1,this.y2=t.y2),this},alignTo:function(t,e){var i=this,n=i.height(),s=i.width(),r=e==w||e==u?C:k,o=r==C?n:s;if(e===p){var a=t.center(),h=i.center();i.x1+=a.x-h.x,i.y1+=a.y-h.y}else i[r+1]=e===w||e===m?t[r+1]-o:t[r+2];return i.x2=i.x1+s,i.y2=i.y1+n,i},shrink:function(t,e){return this.x2-=t,this.y2-=e,this},expand:function(t,e){return this.shrink(-t,-e),this},pad:function(t){var e=S(t);return this.x1-=e.left,this.x2+=e.right,this.y1-=e.top,this.y2+=e.bottom,this},unpad:function(t){var e=S(t);return e.left=-e.left,e.top=-e.top,e.right=-e.right,e.bottom=-e.bottom,this.pad(e)},clone:function(){return new A(this.x1,this.y1,this.x2,this.y2)},center:function(){return new P(this.x1+this.width()/2,this.y1+this.height()/2)},containsPoint:function(t){return t.x>=this.x1&&t.x<=this.x2&&t.y>=this.y1&&t.y<=this.y2},points:function(){return[new P(this.x1,this.y1),new P(this.x2,this.y1),new P(this.x2,this.y2),new P(this.x1,this.y2)]},getHash:function(){return[this.x1,this.y1,this.x2,this.y2].join(",")},overlaps:function(t){return!(t.y2<this.y1||this.y2<t.y1||t.x2<this.x1||this.x2<t.x1)}};var z=r.extend({init:function(t,e,i,n,s){this.c=t,this.ir=e,this.r=i,this.startAngle=n,this.angle=s},clone:function(){var t=this;return new z(t.c,t.ir,t.r,t.startAngle,t.angle)},middle:function(){return this.startAngle+this.angle/2},radius:function(t,e){return e?this.ir=t:this.r=t,this},point:function(t,e){var i=t*f,n=c.cos(i),s=c.sin(i),r=e?this.ir:this.r,o=_t(this.c.x-n*r,3),a=_t(this.c.y-s*r,3);return new P(o,a)},adjacentBox:function(t,e,i){var n=this.clone().expand(t),s=n.middle(),r=n.point(s),o=e/2,a=i/2,h=r.x-o,l=r.y-a,d=c.sin(s*f),u=c.cos(s*f);return c.abs(d)<.9&&(h+=o*-u/c.abs(u)),c.abs(u)<.9&&(l+=a*-d/c.abs(d)),new A(h,l,h+e,l+i)},containsPoint:function(t){var e=this.c,i=this.ir,n=this.r,s=this.startAngle,r=this.startAngle+this.angle,o=t.x-e.x,a=t.y-e.y,h=new P(o,a),l=this.point(s),c=new P(l.x-e.x,l.y-e.y),d=this.point(r),u=new P(d.x-e.x,d.y-e.y),p=_t(o*o+a*a,3);return(c.equals(h)||Mt(c,h))&&!Mt(u,h)&&p>=i*i&&p<=n*n},getBBox:function(){var t,e,i,n=new A(v,v,y,y),s=_t(this.startAngle%360),r=_t((s+this.angle)%360),o=this.ir,a=[0,90,180,270,s,r].sort(At),h=l(s,a),c=l(r,a);for(t=s==r?a:h<c?a.slice(h,c+1):[].concat(a.slice(0,c+1),a.slice(h,a.length)),e=0;e<t.length;e++)i=this.point(t[e]),n.wrapPoint(i),n.wrapPoint(i,o);return o||n.wrapPoint(this.c),n},expand:function(t){return this.r+=t,this}}),D=z.extend({init:function(t,e,i,n){z.fn.init.call(this,t,0,e,i,n)},expand:function(t){return z.fn.expand.call(this,t)},clone:function(){return new D(this.c,this.r,this.startAngle,this.angle)},radius:function(t){return z.fn.radius.call(this,t)},point:function(t){return z.fn.point.call(this,t)}}),E=r.extend({init:function(t){d(this,{height:40,rotation:90,radius:10,arcAngle:10},t)}}),M=r.extend({init:function(t){this.children=[],this.options=d({},this.options,t),this.id=this.options.id},reflow:function(t){var e,i,n,s=this.children;for(i=0;i<s.length;i++)(n=s[i]).reflow(t),e=e?e.wrap(n.box):n.box.clone();this.box=e||t},getViewElements:function(t){var e,i,n,s=this.modelId,r=[],o=this.children,a=o.length;for(i=0;i<a;i++)(n=o[i]).discoverable||(n.options=n.options||{},n.modelId=s),r.push.apply(r,n.getViewElements(t));return this.discoverable&&(e=this.getRoot())&&(e.modelMap[s]=this),r},enableDiscovery:function(){this.modelId=rt.current.alloc(),this.discoverable=!0},destroy:function(){var t,e=this.children,i=this.getRoot(),n=this.modelId,s=this.id,r=rt.current;for(s&&r.free(s),n&&(r.free(n),i&&i.modelMap[n]&&(i.modelMap[n]=void 0)),t=0;t<e.length;t++)e[t].destroy()},getRoot:function(){var t=this.parent;return t?t.getRoot():null},translateChildren:function(t,e){var i,n=this.children,s=n.length;for(i=0;i<s;i++)n[i].box.translate(t,e)},append:function(){var t,e=this,i=arguments.length;for(bt(e.children,arguments),t=0;t<i;t++)arguments[t].parent=e}}),L=M.extend({init:function(t){this.modelMap={},M.fn.init.call(this,t)},options:{width:600,height:400,background:_,border:{color:"#000",width:0},margin:S(5),zIndex:-2},reflow:function(){var t=this.options,e=this.children,i=new A(0,0,t.width,t.height);this.box=i.unpad(t.margin);for(var n=0;n<e.length;n++)e[n].reflow(i),i=gt(i,e[n].box)},getViewElements:function(t){var e=this.options,i=e.border||{},n=this.box.clone().pad(e.margin).unpad(i.width);return[t.createRect(n,{stroke:i.width?i.color:"",strokeWidth:i.width,dashType:i.dashType,fill:e.background,fillOpacity:e.opacity,zIndex:e.zIndex})].concat(M.fn.getViewElements.call(this,t))},getRoot:function(){return this}}),I=M.extend({options:{align:m,vAlign:w,margin:{},padding:{},border:{color:"#000",width:0},background:"",shrinkToFit:!1,width:0,height:0,visible:!0},reflow:function(t){var e,i,n,s,r=this,o=r.options,a=S(o.margin),h=S(o.padding),l=o.border.width,c=r.children;function d(){r.align(t,k,o.align),r.align(t,C,o.vAlign),r.paddingBox=e.clone().unpad(a).unpad(l)}for(M.fn.reflow.call(r,t),e=o.width&&o.height?r.box=new A(0,0,o.width,o.height):r.box,o.shrinkToFit?(d(),i=r.contentBox=r.paddingBox.clone().unpad(h)):(i=r.contentBox=e.clone(),e.pad(h).pad(l).pad(a),d()),r.translateChildren(e.x1-i.x1+a.left+l+h.left,e.y1-i.y1+a.top+l+h.top),n=0;n<c.length;n++)(s=c[n]).reflow(s.box)},align:function(t,e,i){var n=this.box,s=e+1,r=e+2,o=e===k?"width":"height",a=n[o]();vt(i,[m,w])?(n[s]=t[s],n[r]=n[s]+a):vt(i,[b,u])?(n[r]=t[r],n[s]=n[r]-a):i==p&&(n[s]=t[s]+(t[o]()-a)/2,n[r]=n[s]+a)},hasBox:function(){var t=this.options;return t.border.width||t.background},getViewElements:function(t,e){var i=[];return this.options.visible?(this.hasBox()&&i.push(t.createRect(this.paddingBox,d(this.elementStyle(),e))),i.concat(M.fn.getViewElements.call(this,t))):[]},elementStyle:function(){var t=this.options,e=t.border||{};return{id:this.id,stroke:e.width?e.color:"",strokeWidth:e.width,dashType:e.dashType,strokeOpacity:Pt(e.opacity,t.opacity),fill:t.background,fillOpacity:t.opacity,animation:t.animation,zIndex:t.zIndex,data:{modelId:this.modelId}}}}),B=M.extend({init:function(t,e){M.fn.init.call(this,e),this.content=t,this.reflow(A())},options:{font:"12px sans-serif",color:"#000",align:m,vAlign:""},reflow:function(t){var e,i,n=this.options;e=n.size=ct(this.content,{font:n.font},n.rotation),this.baseline=e.baseline,n.align==m?this.box=new A(t.x1,t.y1,t.x1+e.width,t.y1+e.height):n.align==b?this.box=new A(t.x2-e.width,t.y1,t.x2,t.y1+e.height):n.align==p&&(i=(t.width()-e.width)/2,this.box=new A(_t(t.x1+i,3),t.y1,_t(t.x2-i,3),t.y1+e.height)),n.vAlign==p?(i=(t.height()-e.height)/2,this.box=new A(this.box.x1,t.y1+i,this.box.x2,t.y2-i)):n.vAlign==u?this.box=new A(this.box.x1,t.y2-e.height,this.box.x2,t.y2):n.vAlign==w&&(this.box=new A(this.box.x1,t.y1,this.box.x2,t.y1+e.height))},getViewElements:function(t){var e=this.options;return M.fn.getViewElements.call(this,t),[t.createText(this.content,d({},e,{id:this.id,x:this.box.x1,y:this.box.y1,baseline:this.baseline,data:{modelId:this.modelId}}))]}}),R=I.extend({init:function(t,e){var i;I.fn.init.call(this,e),e=this.options,i=new B(t,d({},e,{align:m,vAlign:w})),this.append(i),this.content=t,this.hasBox()&&(i.id=pt()),this.reflow(new A)}}),O=M.extend({init:function(t){M.fn.init.call(this,t),t=this.options,this.append(new R(t.text,d({},t,{vAlign:t.position})))},options:{color:"#000",position:w,align:p,margin:S(5),padding:S(5)},reflow:function(t){M.fn.reflow.call(this,t),this.box.snapTo(t,k)}});O.buildTitle=function(t,e,i){var n;return"string"==typeof t&&(t={text:t}),(t=d({visible:!0},i,t))&&t.visible&&t.text&&(n=new O(t),e.append(n)),n};var N=R.extend({init:function(t,e,i,n,s){this.text=e,this.value=t,this.index=i,this.dataItem=n,R.fn.init.call(this,e,d({id:pt()},s)),this.enableDiscovery()},click:function(e,i){e.trigger("axisLabelClick",{element:t(i.target),value:this.value,text:this.text,index:this.index,dataItem:this.dataItem,axis:this.parent.options})}});function V(t,e,i){var n,s,r=e.tickX,o=e.tickY,a=e.position;return e.vertical?(n=P(r,a),s=P(r+i.size,a)):(n=P(a,o),s=P(a,o+i.size)),t.createLine(n.x,n.y,s.x,s.y,{strokeWidth:i.width,stroke:i.color,align:e._alignLines})}function F(t,e,i){var n,s,r=e.lineStart,o=e.lineEnd,a=e.position;return e.vertical?(n=P(r,a),s=P(o,a)):(n=P(a,r),s=P(a,o)),t.createLine(n.x,n.y,s.x,s.y,{data:{modelId:e.modelId},strokeWidth:i.width,stroke:i.color,dashType:i.dashType,zIndex:-1})}var H=M.extend({init:function(t){M.fn.init.call(this,t),this.options.visible||(this.options=d({},this.options,{labels:{visible:!1},line:{visible:!1},margin:0,majorTickSize:0,minorTickSize:0})),this.options.minorTicks=d({},{color:this.options.line.color,width:this.options.line.width,visible:"none"!=this.options.minorTickType},this.options.minorTicks,{size:this.options.minorTickSize,align:this.options.minorTickType}),this.options.majorTicks=d({},{color:this.options.line.color,width:this.options.line.width,visible:"none"!=this.options.majorTickType},this.options.majorTicks,{size:this.options.majorTickSize,align:this.options.majorTickType}),this.createLabels(),this.createTitle(),this.createNotes()},options:{labels:{visible:!0,rotation:0,mirror:!1,step:1,skip:0},line:{width:1,color:"#000",visible:!0},title:{visible:!0,position:p},majorTicks:{align:"outside",size:4,skip:0,step:1},minorTicks:{align:"outside",size:3,skip:0,step:1},axisCrossingValue:0,majorTickType:"outside",minorTickType:"none",majorGridLines:{skip:0,step:1},minorGridLines:{visible:!1,width:1,color:"#000",skip:0,step:1},margin:5,visible:!0,reverse:!1,justified:!0,notes:{label:{text:""}},_alignLines:!0},createLabels:function(){var t=this.options,e=t.vertical?b:p,i=d({},t.labels,{align:e,zIndex:t.zIndex,modelId:this.modelId}),n=i.step;if(this.labels=[],i.visible){var s,r,o=this.labelsCount();for(r=i.skip;r<o;r+=n)(s=this.createAxisLabel(r,i))&&(this.append(s),this.labels.push(s))}},destroy:function(){var t,e=this.labels;for(t=0;t<e.length;t++)e[t].destroy();M.fn.destroy.call(this)},lineBox:function(){var t=this.options,e=this.box,i=t.vertical,n=this.labels,s=i?"height":"width",r=t.justified,o=t.labels.mirror,a=o?e.x1:e.x2,h=o?e.y2:e.y1,l=0,c=t.line.width;return r&&n.length>1&&(l=n[0].box[s]()/2,c=yt(n).box[s]()/2),i?A(a,e.y1+l,a,e.y2-c):A(e.x1+l,h,e.x2-c,h)},createTitle:function(){var t,e=this.options,i=d({rotation:e.vertical?-90:0,text:"",zIndex:1},e.title);i.visible&&i.text&&(t=new R(i.text,i),this.append(t),this.title=t)},createNotes:function(){var t,e,i,n=this.options,s=n.notes,r=s.data||[];for(this.notes=[],t=0;t<r.length;t++)(e=d({},s,r[t])).value=this.parseNoteValue(e.value),(i=new U(e.value,e.label.text,null,null,null,e)).options.visible&&(Tt(i.options.position)?n.vertical&&!vt(i.options.position,[m,b])?i.options.position=n.reverse?m:b:n.vertical||vt(i.options.position,[w,u])||(i.options.position=n.reverse?u:w):n.vertical?i.options.position=n.reverse?m:b:i.options.position=n.reverse?u:w,this.append(i),this.notes.push(i))},parseNoteValue:function(t){return t},renderTicks:function(t){var e=[],i=this.options,n=this.lineBox(),s=i.labels.mirror,r=i.majorTicks.visible?i.majorUnit:0,o={_alignLines:i._alignLines,vertical:i.vertical};function a(i,r){var a,h=i.length;if(r.visible)for(a=r.skip;a<h;a+=r.step)a%r.skipUnit!=0&&(o.tickX=s?n.x2:n.x2-r.size,o.tickY=s?n.y1-r.size:n.y1,o.position=i[a],e.push(V(t,o,r)))}return a(this.getMajorTickPositions(),i.majorTicks),a(this.getMinorTickPositions(),d({},{skipUnit:r/i.minorUnit},i.minorTicks)),e},renderLine:function(t){var e,i=this.options,n=i.line,s=this.lineBox(),r=[];return n.width>0&&n.visible&&(e={strokeWidth:n.width,stroke:n.color,dashType:n.dashType,zIndex:n.zIndex,align:i._alignLines},r.push(t.createLine(s.x1,s.y1,s.x2,s.y2,e)),bt(r,this.renderTicks(t))),r},getViewElements:function(t){var e=M.fn.getViewElements.call(this,t);return bt(e,this.renderLine(t)),bt(e,this.renderPlotBands(t)),bt(e,this.renderBackground(t)),e},getActualTickSize:function(){var t=this.options,e=0;return t.majorTicks.visible&&t.minorTicks.visible?e=c.max(t.majorTicks.size,t.minorTicks.size):t.majorTicks.visible?e=t.majorTicks.size:t.minorTicks.visible&&(e=t.minorTicks.size),e},renderBackground:function(t){var e=this.options.background,i=this.box,n=[];return e&&n.push(t.createRect(i,{fill:e,zIndex:-1})),n},renderPlotBands:function(t){var e,i,n=this,s=n.options,r=s.plotBands||[],o=s.vertical,h=[],l=n.plotArea;return r.length&&(h=a(r,(function(s){return Pt(s.from,y),Pt(s.to,v),o?(e=l.axisX.lineBox(),i=n.getSlot(s.from,s.to,!0)):(e=n.getSlot(s.from,s.to,!0),i=l.axisY.lineBox()),t.createRect(A(e.x1,i.y1,e.x2,i.y2),{fill:s.color,fillOpacity:s.opacity,zIndex:-1})}))),h},renderGridLines:function(t,e){var i,n=[],s=this.options,r=e.options.line.visible,o=s.majorGridLines.visible?s.majorUnit:0,a=s.vertical,h=e.lineBox(),l=h[a?"y1":"x1"],c={lineStart:h[a?"x1":"y1"],lineEnd:h[a?"x2":"y2"],vertical:a,modelId:this.plotArea.modelId},u=[];function p(e,s){var o,a=e.length;if(s.visible)for(o=s.skip;o<a;o+=s.step)vt(i=_t(e[o]),u)||o%s.skipUnit==0||r&&l===i||(c.position=i,n.push(F(t,c,s)),u.push(i))}return p(this.getMajorTickPositions(),s.majorGridLines),p(this.getMinorTickPositions(),d({},{skipUnit:o/s.minorUnit},s.minorGridLines)),n},reflow:function(t){var e,i,n=this.options,s=n.vertical,r=this.labels,o=r.length,a=this.getActualTickSize()+n.margin,h=0,l=0,d=this.title;for(i=0;i<o;i++)e=r[i],h=c.max(h,e.box.height()),l=c.max(l,e.box.width());d&&(s?l+=d.box.width():h+=d.box.height()),this.box=s?A(t.x1,t.y1,t.x1+l+a,t.y2):A(t.x1,t.y1,t.x2,t.y1+h+a),this.arrangeTitle(),this.arrangeLabels(),this.arrangeNotes()},arrangeLabels:function(){var t,e,i,n=this.options,s=this.labels,r=!n.justified,o=n.vertical,a=this.lineBox(),h=n.labels.mirror,l=this.getMajorTickPositions(),c=this.getActualTickSize()+n.margin;for(i=0;i<s.length;i++){var d,u,p,f=s[i],g=f.index,m=o?f.box.height():f.box.width(),v=l[g]-m/2;o?(r&&(v=(d=l[g])+((u=l[g+1])-d)/2-m/2),p=a.x2,h?p+=c:p-=c+f.box.width(),t=f.box.move(p,v)):(r?(d=l[g],u=l[g+1]):(d=v,u=v+m),e=a.y1,h?e-=c+f.box.height():e+=c,t=A(d,e,u,e+f.box.height())),f.reflow(t)}},arrangeTitle:function(){var t=this.options,e=t.labels.mirror,i=t.vertical,n=this.title;n&&(i?(n.options.align=e?b:m,n.options.vAlign=n.options.position):(n.options.align=n.options.position,n.options.vAlign=e?w:u),n.reflow(this.box))},arrangeNotes:function(){var t,e,i,n;for(t=0;t<this.notes.length;t++)Tt(n=(e=this.notes[t]).options.value)?(this.shouldRenderNote(n)?e.show():e.hide(),i=this.getSlot(n)):e.hide(),e.reflow(i||this.lineBox())},alignTo:function(t){var e=t.lineBox(),i=this.options.vertical,n=i?C:k;this.box.snapTo(e,n),i?this.box.shrink(0,this.lineBox().height()-e.height()):this.box.shrink(this.lineBox().width()-e.width(),0),this.box[n+1]-=this.lineBox()[n+1]-e[n+1],this.box[n+2]-=this.lineBox()[n+2]-e[n+2]},axisLabelText:function(t,e,i){var s=t;i.template?s=o(i.template)({value:t,dataItem:e}):i.format&&(s=i.format.match(g)?n.format(i.format,t):n.toString(t,i.format,i.culture));return s}}),U=I.extend({init:function(t,e,i,n,s,r){I.fn.init.call(this,r),this.enableDiscovery(),this.value=t,this.text=e,this.dataItem=i,this.category=n,this.series=s,this.render()},options:{icon:{zIndex:1,visible:!0,type:"circle"},label:{zIndex:2,position:"inside",visible:!0,align:p,vAlign:p},line:{visible:!0,zIndex:2},visible:!0,position:w},hide:function(){this.options.visible=!1},show:function(){this.options.visible=!0},render:function(){var t,e,i,n=this.options,s=n.label,r=this.text,a=n.icon,h=a.size,l={data:{modelId:this.modelId}},u=A();n.visible&&(Tt(s)&&s.visible&&(s.template?r=o(s.template)({dataItem:this.dataItem,category:this.category,value:this.value,text:r,series:this.series}):s.format&&(r=Dt(s.format,r)),this.label=new R(r,d({},s,l)),this.append(this.label),"inside"===s.position&&("circle"===a.type?h=c.max(this.label.box.width(),this.label.box.height()):(e=this.label.box.width(),i=this.label.box.height()),u.wrap(this.label.box))),a.width=e||h,a.height=i||h,t=new $(d({},a,l)),this.marker=t,this.append(t),t.reflow(A()),this.wrapperBox=u.wrap(t.box))},reflow:function(t){var e,i,n,s=this.options,r=t.center(),o=this.wrapperBox,a=s.line.length,h=s.position,l=this.label,d=this.marker;s.visible&&(vt(h,[m,b])?h===m?(n=o.alignTo(t,h).translate(-a,t.center().y-o.center().y),s.line.visible&&(e=P(c.floor(t.x1),r.y),this.linePoints=[e,P(c.floor(n.x2),r.y)],i=n.clone().wrapPoint(e))):(n=o.alignTo(t,h).translate(a,t.center().y-o.center().y),s.line.visible&&(e=P(c.floor(t.x2),r.y),this.linePoints=[e,P(c.floor(n.x1),r.y)],i=n.clone().wrapPoint(e))):h===u?(n=o.alignTo(t,h).translate(t.center().x-o.center().x,a),s.line.visible&&(e=P(c.floor(r.x),c.floor(t.y2)),this.linePoints=[e,P(c.floor(r.x),c.floor(n.y1))],i=n.clone().wrapPoint(e))):(n=o.alignTo(t,h).translate(t.center().x-o.center().x,-a),s.line.visible&&(e=P(c.floor(r.x),c.floor(t.y1)),this.linePoints=[e,P(c.floor(r.x),c.floor(n.y2))],i=n.clone().wrapPoint(e))),d&&d.reflow(n),l&&(l.reflow(n),d&&("outside"===s.label.position&&l.box.alignTo(d.box,h),l.reflow(l.box))),this.contentBox=n,this.box=i||n)},getViewElements:function(t){var e=I.fn.getViewElements.call(this,t),i=t.createGroup({data:{modelId:this.modelId},zIndex:1});return this.options.visible&&bt(e,this.createLine(t)),i.children=e,[i]},createLine:function(t){var e=this.options.line;return[t.createPolyline(this.linePoints,!1,{stroke:e.color,strokeWidth:e.width,dashType:e.dashType,zIndex:e.zIndex})]},click:function(t,e){var i=this.eventArgs(e);t.trigger("noteClick",i)||e.preventDefault()},hover:function(t,e){var i=this.eventArgs(e);t.trigger("noteHover",i)||e.preventDefault()},leave:function(t){t._unsetActivePoint()},eventArgs:function(e){var i=this.options;return{element:t(e.target),text:Tt(i.label)?i.label.text:"",dataItem:this.dataItem,series:this.series,value:this.value,category:this.category}}}),$=I.extend({options:{type:"circle",align:p,vAlign:p},getViewElements:function(t,e){var i,n,s,r,o=this.options,a=o.type,h=o.rotation,l=this.paddingBox,c=l.center(),u=l.width()/2;if(M.fn.getViewElements.call(this,t),!(!0===(e||{}).visible||o.visible&&this.hasBox()))return[];if(n=d(this.elementStyle(),e),"circle"===a?i=t.createCircle(P(_t(l.x1+u,3),_t(l.y1+l.height()/2,3)),u,n):"triangle"===a?s=[P(l.x1+u,l.y1),P(l.x1,l.y2),P(l.x2,l.y2)]:"cross"===a?((i=t.createGroup()).children.push(t.createPolyline([P(l.x1,l.y1),P(l.x2,l.y2)],!0,n)),i.children.push(t.createPolyline([P(l.x1,l.y2),P(l.x2,l.y1)],!0,n))):s=l.points(),s){if(h)for(r=0;r<s.length;r++)s[r].rotate(c,h);i=t.createPolyline(s,!0,n)}return[i]}}),j=I.extend({init:function(t){I.fn.init.call(this,t),this.createTextBox()},options:{arcAngle:300,border:{width:1,color:"red"},label:{zIndex:2,margin:S(2),border:{width:1,color:"green"}}},createTextBox:function(){var t=this.options,e=new R(t.code,t.label);this.append(e),this.textBox=e},reflow:function(t){var e=this.textBox;this.box=A(0,0,e.box.height(),1.5*e.box.height()),I.fn.reflow.call(this,t)},getViewElements:function(t){var e=this.options,i=this.box.center(),n=[t.createPin(new E({origin:new P(i.x,i.y),radius:this.textBox.box.height()/2,height:1.5*this.textBox.box.height(),rotation:0,arcAngle:e.arcAngle}),d({},{fill:"red",zIndex:1,kur:1,id:"111"},e))];return bt(n,I.fn.getViewElements.call(this,t)),n}}),G=H.extend({init:function(t,e,i){var n=this.initDefaults(t,e,i);H.fn.init.call(this,n)},startValue:function(){return 0},options:{type:"numeric",min:0,max:1,vertical:!0,majorGridLines:{visible:!0,width:1,color:"#000"},zIndex:1},initDefaults:function(t,e,i){var n,s=i.narrowRange,r=this.autoAxisMin(t,e,s),o=this.autoAxisMax(t,e,s),a=dt(r,o),h={majorUnit:a};return!1!==i.roundToMajorUnit&&(r<0&&Ct(r,a,1/3)&&(r-=a),o>0&&Ct(o,a,1/3)&&(o+=a)),h.min=xt(r,a),h.max=wt(o,a),i&&((n=Tt(i.min)||Tt(i.max))&&i.min===i.max&&(i.min>0?i.min=0:i.max=1),i.majorUnit?(h.min=xt(h.min,i.majorUnit),h.max=wt(h.max,i.majorUnit)):n&&(i=d(h,i),h.majorUnit=dt(i.min,i.max))),h.minorUnit=(i.majorUnit||h.majorUnit)/5,d(h,i)},range:function(){var t=this.options;return{min:t.min,max:t.max}},autoAxisMax:function(t,e,i){var n,s;if(!t&&!e)return 1;if(t<=0&&e<=0){if(e=t==e?0:e,s=c.abs((e-t)/e),!i&&s>.2)return 0;n=c.min(0,e-(t-e)/2)}else t=t==e?0:t,n=e;return n},autoAxisMin:function(t,e,i){var n;if(!t&&!e)return 0;if(t>=0&&e>=0){if(t=t==e?0:t,!i&&(e-t)/e>.2)return 0;n=c.max(0,t-(e-t)/2)}else e=t==e?0:e,n=t;return n},getDivisions:function(t){var e=this.options,i=e.max-e.min;return c.floor(_t(i/t,3))+1},getTickPositions:function(t,e){var i,n=this.options,s=n.vertical,r=n.reverse,o=this.lineBox(),a=t*((s?o.height():o.width())/(n.max-n.min)),h=0,l=this.getDivisions(t),c=(s?-1:1)*(r?-1:1),d=o[(s?C:k)+(1===c?1:2)],u=[];for(e&&(h=e/t),i=0;i<l;i++)i%h!=0&&u.push(_t(d,3)),d+=a*c;return u},getMajorTickPositions:function(){return this.getTickPositions(this.options.majorUnit)},getMinorTickPositions:function(){return this.getTickPositions(this.options.minorUnit)},getSlot:function(t,e,i){var n,s,r=this.options,o=r.reverse,a=r.vertical,h=a?C:k,l=this.lineBox(),d=l[h+(o?2:1)],u=(o?-1:1)*((a?l.height():l.width())/(r.max-r.min)),p=new A(l.x1,l.y1,l.x1,l.y1);return Tt(t)||(t=e||0),Tt(e)||(e=t||0),i&&(t=c.max(c.min(t,r.max),r.min),e=c.max(c.min(e,r.max),r.min)),a?(n=r.max-c.max(t,e),s=r.max-c.min(t,e)):(n=c.min(t,e)-r.min,s=c.max(t,e)-r.min),p[h+1]=c.max(c.min(d+u*(o?s:n),1e5),-1e5),p[h+2]=c.max(c.min(d+u*(o?n:s),1e5),-1e5),p},getValue:function(t){var e=this.options,i=e.reverse,n=e.vertical,s=1*e.max,r=1*e.min,o=n?C:k,a=this.lineBox(),h=a[o+(i?2:1)],l=n?a.height():a.width(),c=(i?-1:1)*(t[o]-h),d=c*((s-r)/l);return c<0||c>l?null:_t(n?s-d:r+d,6)},translateRange:function(t){var e=this.options,i=this.lineBox(),n=e.vertical,s=e.reverse,r=_t(t/((n?i.height():i.width())/(e.max-e.min)),6);return!n&&!s||n&&s||(r=-r),{min:e.min+r,max:e.max+r}},scaleRange:function(t){var e=this.options,i=-t*e.majorUnit;return{min:e.min-i,max:e.max+i}},labelsCount:function(){return this.getDivisions(this.options.majorUnit)},createAxisLabel:function(t,e){var i=this.options,n=_t(i.min+t*i.majorUnit,6),s=this.axisLabelText(n,null,e);return new N(n,s,t,null,e)},shouldRenderNote:function(t){var e=this.range();return e.min<=t&&t<=e.max}}),W=H.extend({init:function(t,e,i){this.options=this._initOptions(t,e,i),H.fn.init.call(this,i)},startValue:function(){return this.options.min},options:{type:"log",majorUnit:10,minorUnit:1,axisCrossingValue:1,vertical:!0,majorGridLines:{visible:!0,width:1,color:"#000"},zIndex:1},getSlot:function(t,e,i){var n,s,r=this.options,o=r.reverse,a=r.vertical,h=a?C:k,l=this.lineBox(),d=l[h+(o?2:1)],u=a?l.height():l.width(),p=o?-1:1,f=r.majorUnit,g=this.logMin,m=this.logMax,v=p*(u/(m-g)),y=new A(l.x1,l.y1,l.x1,l.y1);if(Tt(t)||(t=e||1),Tt(e)||(e=t||1),!(t<=0||e<=0))return i&&(t=c.max(c.min(t,r.max),r.min),e=c.max(c.min(e,r.max),r.min)),t=kt(t,f),e=kt(e,f),a?(n=m-c.max(t,e),s=m-c.min(t,e)):(n=c.min(t,e)-g,s=c.max(t,e)-g),y[h+1]=d+v*(o?s:n),y[h+2]=d+v*(o?n:s),y},getValue:function(t){var e,i=this.options,n=i.reverse,s=i.vertical,r=this.lineBox(),o=i.majorUnit,a=this.logMin,h=this.logMax,l=s===n?1:-1,d=1===l?1:2,u=s?r.height():r.width(),p=(h-a)/u,f=s?C:k,g=r[f+d],m=l*(t[f]-g);return m<0||m>u?null:(e=a+m*p,_t(c.pow(o,e),6))},range:function(){var t=this.options;return{min:t.min,max:t.max}},scaleRange:function(t){var e=this.options.majorUnit,i=-t;return{min:c.pow(e,this.logMin-i),max:c.pow(e,this.logMax+i)}},translateRange:function(t){var e=this.options,i=e.majorUnit,n=this.lineBox(),s=e.vertical,r=e.reverse,o=s?n.height():n.width(),a=(this.logMin,this.logMax,_t(t/(o/(this.logMax-this.logMin)),6));return!s&&!r||s&&r||(a=-a),{min:c.pow(i,this.logMin+a),max:c.pow(i,this.logMax+a)}},labelsCount:function(){var t=c.floor(this.logMax);return c.floor(t-this.logMin)+1},getMajorTickPositions:function(){var t=[];return this.traverseMajorTicksPositions((function(e){t.push(e)}),{step:1,skip:0}),t},renderTicks:function(t){var e=[],i=this.options,n=this.lineBox(),s=i.labels.mirror,r=i.majorTicks,o=i.minorTicks,a={_alignLines:i._alignLines,vertical:i.vertical};function h(i,r){a.tickX=s?n.x2:n.x2-r.size,a.tickY=s?n.y1-r.size:n.y1,a.position=i,e.push(V(t,a,r))}return r.visible&&this.traverseMajorTicksPositions(h,r),o.visible&&this.traverseMinorTicksPositions(h,o),e},renderGridLines:function(t,e){var i=[],n=this.options,s=(e.options.line.visible,n.majorGridLines),r=n.minorGridLines,o=n.vertical,a=e.lineBox(),h={lineStart:a[o?"x1":"y1"],lineEnd:a[o?"x2":"y2"],vertical:o,modelId:this.plotArea.modelId},l=[];function c(e,n){vt(e,l)||(h.position=e,i.push(F(t,h,n)),l.push(e))}return s.visible&&this.traverseMajorTicksPositions(c,s),r.visible&&this.traverseMinorTicksPositions(c,r),i},traverseMajorTicksPositions:function(t,e){var i,n=this._lineOptions(),s=n.lineStart,r=n.step,o=this.logMin,a=this.logMax;for(i=c.ceil(o)+e.skip;i<=a;i+=e.step)t(_t(s+r*(i-o),6),e)},traverseMinorTicksPositions:function(t,e){var i,n,s,r=this.options,o=this._lineOptions(),a=o.lineStart,h=o.step,l=r.majorUnit,d=this.logMin,u=this.logMax,p=c.floor(d),f=r.max,g=r.min,m=r.minorUnit;for(i=p;i<u;i++){s=this._minorIntervalOptions(i);for(var v=e.skip;v<m&&!((n=s.value+v*s.minorStep)>f);v+=e.step)n>=g&&t(_t(a+h*(kt(n,l)-d),6),e)}},createAxisLabel:function(t,e){var i=this.options,n=c.floor(this.logMin+t),s=Math.pow(i.majorUnit,n),r=this.axisLabelText(s,null,e);return new N(s,r,t,null,e)},shouldRenderNote:function(t){var e=this.range();return e.min<=t&&t<=e.max},_throwNegativeValuesError:function(){throw new Error("Non positive values cannot be used for a logarithmic axis")},_initOptions:function(t,e,i){var n,s=d({},this.options,{min:t,max:e},i),r=s.min,o=s.max,a=s.majorUnit;return s.axisCrossingValue<=0&&this._throwNegativeValuesError(),Tt(i.max)?i.max<=0&&this._throwNegativeValuesError():(n=_t(kt(o,a),6)%1,o=o<=0?a:0!==n&&(n<.3||n>.9)?c.pow(a,kt(o,a)+.2):c.pow(a,c.ceil(kt(o,a)))),Tt(i.min)?i.min<=0&&this._throwNegativeValuesError():r<=0?r=o<=1?c.pow(a,-2):1:i.narrowRange||(r=c.pow(a,c.floor(kt(r,a)))),this.logMin=_t(kt(r,a),6),this.logMax=_t(kt(o,a),6),s.max=o,s.min=r,s.minorUnit=i.minorUnit||_t(a-1,6),s},_minorIntervalOptions:function(t){var e=this.options.majorUnit,i=c.pow(e,t);return{value:i,minorStep:(c.pow(e,t+1)-i)/this.options.minorUnit}},_lineOptions:function(){var t=this.options,e=t.reverse,i=t.vertical,n=i?C:k,s=this.lineBox(),r=i===e?1:-1,o=1===r?1:2;return{step:r*((i?s.height():s.width())/(this.logMax-this.logMin)),lineStart:s[n+o],lineBox:s}}}),q=r.extend({init:function(t){this.children=[],this.options=d({},this.options,t)},render:function(){return this.template(this)},renderContent:function(){var t,e="",i=this.sortChildren(),n=i.length;for(t=0;t<n;t++)e+=i[t].render();return e},sortChildren:function(){var t,e,i=this.children;for(e=0,t=i.length;e<t;e++)i[e]._childIndex=e;return i.slice(0).sort(this.compareChildren)},refresh:t.noop,destroy:function(){var t,e,i=this.options.id,n=this.children;for(i&&rt.current.free(i),e=0,t=n.length;e<t;e++)n[e].destroy()},compareChildren:function(t,e){var i=t.options.zIndex||0,n=e.options.zIndex||0;return i!==n?i-n:t._childIndex-e._childIndex},renderId:function(){var t="";return this.options.id&&(t=this.renderAttr("id",this.options.id)),t},renderAttr:function(t,e){return Tt(e)?" "+t+"='"+e+"' ":""},renderDataAttributes:function(){var t,e,i=this.options.data,n="";for(t in i)e="data-"+t.replace(x,"-$1").toLowerCase(),n+=this.renderAttr(e,i[t]);return n},renderCursor:function(){var t=this.options,e="";return Tt(t.cursor)&&t.cursor.style&&(e+="cursor: "+t.cursor.style+";"),e}}),Y=q.extend({init:function(t){q.fn.init.call(this,t),this.definitions={},this.decorators=[],this.animations=[]},destroy:function(){var t=this.animations,e=this._viewElement;for(q.fn.destroy.call(this);t.length>0;)t.shift().destroy();e&&(this._freeIds(e),this._viewElement=null)},_freeIds:function(e){t("[id]",e).each((function(){rt.current.free(t(this).attr("id"))}))},replace:function(t){var e=Et(t.id);e&&e.parentNode.replaceChild(this.renderElement(t.getViewElements(this)[0]),e)},load:function(t){this.children=t.getViewElements(this)},renderDefinitions:function(){var t,e=this.definitions,i="";for(t in e)e.hasOwnProperty(t)&&(i+=e[t].render());return i},decorate:function(t){var e,i,n=this.decorators,s=n.length;for(e=0;e<s;e++)i=n[e],this._decorateChildren(i,t),t=i.decorate.call(i,t);return t},_decorateChildren:function(t,e){var i,n=e.children,s=n.length;for(i=0;i<s;i++)this._decorateChildren(t,n[i]),n[i]=t.decorate.call(t,n[i])},setupAnimations:function(){for(var t=0;t<this.animations.length;t++)this.animations[t].setup()},playAnimations:function(){for(var t=0;t<this.animations.length;t++)this.animations[t].play()},buildGradient:function(t){var e,i,n,r=this._gradientCache;return r||(r=this._gradientCache=[]),t&&(i=r[e=ut(t)],n=s.Gradients[t.gradient],!i&&n&&(i=d({id:pt()},n,t),r[e]=i)),i},setDefaults:function(t){var e=this.options;return Tt((t=t||{}).inline)||(t.inline=e.inline),Tt(t.align)||(t.align=e.align),t}});s.Gradients={glass:{type:"linear",rotation:0,stops:[{offset:0,color:_,opacity:0},{offset:.25,color:_,opacity:.3},{offset:1,color:_,opacity:0}]},sharpBevel:{type:"radial",stops:[{offset:0,color:_,opacity:.55},{offset:.65,color:_,opacity:0},{offset:.95,color:_,opacity:.25}]},roundedBevel:{type:"radial",stops:[{offset:.33,color:_,opacity:.06},{offset:.83,color:_,opacity:.2},{offset:.95,color:_,opacity:0}]},roundedGlass:{type:"radial",supportVML:!1,stops:[{offset:0,color:_,opacity:0},{offset:.5,color:_,opacity:.3},{offset:.99,color:_,opacity:0}]},sharpGlass:{type:"radial",supportVML:!1,stops:[{offset:0,color:_,opacity:.2},{offset:.15,color:_,opacity:.15},{offset:.17,color:_,opacity:.35},{offset:.85,color:_,opacity:.05},{offset:.87,color:_,opacity:.15},{offset:.99,color:_,opacity:0}]}};var Q=r.extend({init:function(t,e){this.options=d({},this.options,e),this.element=t},options:{duration:600,easing:"swing"},play:function(){var e,n,r,o,a=this,h=a.options,l=a.element,d=l.options.id,u=h.delay||0,p=+new Date+u,f=h.duration,g=p+f,m=t.easing[h.easing];setTimeout((function(){!function t(){a._stopped||(n=+new Date,r=c.min(n-p,f),o=m(r/f,r,0,1,f),a.step(o),e&&!function(t){var e=t.parentNode;for(;e&&e.parentNode;)e=e.parentNode;return e!==i}(e)||(e=Et(d)),l.refresh(e),n<g?s.requestFrame(t):a.destroy())}()}),u)},abort:function(){this._stopped=!0},destroy:function(){this.abort()},setup:h,step:h}),X=Q.extend({options:{duration:200,easing:"linear"},setup:function(){var t=this.element.options;this.targetFillOpacity=t.fillOpacity,this.targetStrokeOpacity=t.strokeOpacity,t.fillOpacity=t.strokeOpacity=0},step:function(t){var e=this.element.options;e.fillOpacity=t*this.targetFillOpacity,e.strokeOpacity=t*this.targetStrokeOpacity}}),Z=Q.extend({options:{size:0,easing:"linear"},setup:function(){var t=this.element.points;t[1].x=t[2].x=t[0].x},step:function(t){var e=St(0,this.options.size,t),i=this.element.points;i[1].x=i[2].x=i[0].x+e},destroy:function(){Q.fn.destroy.call(this),this.element.destroy()}}),K=Q.extend({options:{easing:"linear",duration:900},setup:function(){var t,e,i=this.element.options,n=this.options,s=n.center;i.rotation&&(t=n.startAngle,e=i.rotation[0],n.duration=c.max(c.abs(t-e)/n.speed*1e3,1),this.endState=e,i.rotation=[t,s.x,s.y])},step:function(t){var e=this.element;e.options.rotation&&(e.options.rotation[0]=St(this.options.startAngle,this.endState,t))}}),J=Q.extend({options:{easing:"swing"},setup:function(){var t,e=this.element,i=e.points,n=e.options,s=n.vertical?C:k,r=n.stackBase,o=n.aboveAxis,a=this.endState={top:i[0].y,right:i[1].x,bottom:i[3].y,left:i[0].x};t=Pt(r,s===C?a[o?u:w]:a[o?m:b]),this.startPosition=t,zt(i,s,t)},step:function(t){var e=this.startPosition,i=this.endState,n=this.element,s=n.points;n.options.vertical?(s[0].y=s[1].y=St(e,i.top,t),s[2].y=s[3].y=St(e,i.bottom,t)):(s[0].x=s[3].x=St(e,i.left,t),s[1].x=s[2].x=St(e,i.right,t))}}),tt=Q.extend({options:{easing:"swing",duration:1e3},setup:function(){var t,e,i,n=this.element,s=n.points,r=n.options.animation,o=r.vertical,a=r.reverse,h=this.axis=o?"y":"x",l=this.options.endPosition,d=this.initialState={top:s[0].y,right:s[1].x,bottom:s[3].y,left:s[0].x},p=!Tt(this.options.endPosition);o?(i=a?"y2":"y1",t=d[p&&!a?u:w],e=p?d[a?u:w]:l[i]):(i=a?"x1":"x2",t=d[p&&!a?m:b],e=p?d[a?m:b]:l[i]),this.start=t,this.end=e,p?zt(s,h,this.start):r.speed&&(this.options.duration=c.max(c.abs(this.start-this.end)/r.speed*1e3,1))},step:function(t){var e=this.start,i=this.end,n=this.element,s=n.points,r=this.axis;n.options.animation.vertical?s[0][r]=s[1][r]=St(e,i,t):s[1][r]=s[2][r]=St(e,i,t)}}),et=Q.extend({options:{easing:"swing",duration:1e3},setup:function(){var t,e,i,n=this.element,s=n.points,r=n.options.animation,o=r.vertical,a=r.reverse,h=o?"y":"x",l=h+(a?"1":"2"),u=h+(a?"2":"1"),p=r.startPosition[o?l:u],f=r.size/2,g=s.length,m=!Tt(this.options.endPosition),v=f;for(this.axis=h,this.endPositions=[],this.startPositions=[],m||(p=s[1][h],e=this.options.endPosition[o?u:l],r.speed&&(this.options.duration=c.max(c.abs(p-e)/r.speed*1e3,1))),i=0;i<g;i++)t=d({},s[i]),m?(this.endPositions[i]=t[h],s[i][h]=p-v):this.endPositions[i]=e-v,this.startPositions[i]=s[i][h],v-=f},step:function(t){var e,i=this.startPositions,n=this.endPositions,s=this.element.points,r=this.axis,o=s.length;for(e=0;e<o;e++)s[e][r]=St(i[e],n[e],t)}});function it(t,e){return r.extend({init:function(t){this.view=t},decorate:function(i){var n,s=this.view,r=i.options.animation;return r&&r.type===t&&s.options.transitions&&(n=i._animation=new e(i,r),s.animations.push(n)),i}})}var nt=it("fadeIn",X),st=function t(e){var i,n,s,r,o,a=this,h=t.formats;if(1===arguments.length)for(e=a.resolveColor(e),r=0;r<h.length;r++)i=h[r].re,n=h[r].process,(s=i.exec(e))&&(o=n(s),a.r=o[0],a.g=o[1],a.b=o[2]);else a.r=arguments[0],a.g=arguments[1],a.b=arguments[2];a.r=a.normalizeByte(a.r),a.g=a.normalizeByte(a.g),a.b=a.normalizeByte(a.b)};st.prototype={toHex:function(){var t=this.padDigit,e=this.r.toString(16),i=this.g.toString(16),n=this.b.toString(16);return"#"+t(e)+t(i)+t(n)},resolveColor:function(t){return"#"==(t=t||"#000").charAt(0)&&(t=t.substr(1,6)),t=(t=t.replace(/ /g,"")).toLowerCase(),t=st.namedColors[t]||t},normalizeByte:function(t){return t<0||isNaN(t)?0:t>255?255:t},padDigit:function(t){return 1===t.length?"0"+t:t},brightness:function(t){var e=c.round;return this.r=e(this.normalizeByte(this.r*t)),this.g=e(this.normalizeByte(this.g*t)),this.b=e(this.normalizeByte(this.b*t)),this},percBrightness:function(){return c.sqrt(.241*this.r*this.r+.691*this.g*this.g+.068*this.b*this.b)}},st.formats=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,process:function(t){return[parseInt(t[1],10),parseInt(t[2],10),parseInt(t[3],10)]}},{re:/^(\w{2})(\w{2})(\w{2})$/,process:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,process:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]}}],st.namedColors={aqua:"00ffff",azure:"f0ffff",beige:"f5f5dc",black:"000000",blue:"0000ff",brown:"a52a2a",coral:"ff7f50",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgray:"a9a9a9",darkgreen:"006400",darkorange:"ff8c00",darkred:"8b0000",dimgray:"696969",fuchsia:"ff00ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lightblue:"add8e6",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumblue:"0000cd",navy:"000080",olive:"808000",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",pink:"ffc0cb",plum:"dda0dd",purple:"800080",red:"ff0000",royalblue:"4169e1",salmon:"fa8072",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",steelblue:"4682b4",tan:"d2b48c",teal:"008080",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"};var rt=r.extend({init:function(t,e,i){this._pool=[],this._freed={},this._size=t,this._id=i,this._prefix=e},alloc:function(){var t,e=this._pool;return e.length>0?(t=e.pop(),this._freed[t]=!1):t=this._prefix+this._id++,t},free:function(t){var e=this._pool,i=this._freed;e.length<this._size&&!i[t]&&(e.push(t),i[t]=!0)}});rt.current=new rt(1e3,"k",1e4);var ot=r.extend({init:function(t){this._size=t,this._length=0,this._map={}},put:function(t,e){var i=this,n=i._map,s={key:t,value:e};n[t]=s,i._head?(i._tail.newer=s,s.older=i._tail,i._tail=s):i._head=i._tail=s,i._length>=i._size?(n[i._head.key]=null,i._head=i._head.newer,i._head.older=null):i._length++},get:function(t){var e=this._map[t];if(e)return e===this._head&&e!==this._tail&&(this._head=e.newer,this._head.older=null),e!==this._tail&&(e.older&&(e.older.newer=e.newer,e.newer.older=e.older),e.older=this._tail,e.newer=null,this._tail.newer=e,this._tail=e),e.value}}),at=function(){this._views=[]};at.prototype={register:function(t,e,i){var n=this._views,s=n[0],r={name:t,type:e,order:i};!s||i<s.order?n.unshift(r):n.push(r)},create:function(t,e){var i=this._views,s=i[0];if(e){e=e.toLowerCase();for(var r=0;r<i.length;r++)if(i[r].name===e){s=i[r];break}}if(s)return new s.type(t);n.logToConsole("Warning: KendoUI DataViz cannot render. Possible causes:\n- The browser does not support SVG, VML and Canvas. User agent: "+navigator.userAgent+"\n- The kendo.dataviz.(svg|vml|canvas).js scripts are not loaded")}},at.current=new at;var ht={svg:function(){if(s.SVGView){var t=this._getModel(),e=new s.SVGView(d({encodeText:!0},t.options));return e.load(t),e.render()}throw new Error("Unable to create SVGView. Check that kendo.dataviz.svg.js is loaded.")},imageDataURL:function(){if(s.CanvasView){if(s.supportsCanvas()){var t=this._getModel(),e=document.createElement("div"),i=new s.CanvasView(t.options);return i.load(t),i.renderTo(e).toDataURL()}return n.logToConsole("Warning: Unable to generate image. The browser does not support Canvas.\nUser agent: "+navigator.userAgent),null}throw new Error("Unable to create CanvasView. Check that kendo.dataviz.canvas.js is loaded.")}},lt=r.extend({init:function(){this._cache=new ot(1e3)},measure:function(t,e,n){var s=t+ut(e)+n,r=this._cache.get(s);if(r)return r;var o={width:0,height:0,baseline:0},a=this._measureBox,h=this._baselineMarker.cloneNode(!1);for(var l in e)a.style[l]=e[l];if(a.innerHTML=t,a.appendChild(h),i.body.appendChild(a),(t+"").length&&(o={width:a.offsetWidth-1,height:a.offsetHeight,baseline:h.offsetTop+1}),n){var d=o.width,u=o.height,p=d/2,f=u/2,g=ft(0,0,p,f,n),m=ft(d,0,p,f,n),v=ft(d,u,p,f,n),y=ft(0,u,p,f,n);o.normalWidth=d,o.normalHeight=u,o.width=c.max(g.x,m.x,v.x,y.x)-c.min(g.x,m.x,v.x,y.x),o.height=c.max(g.y,m.y,v.y,y.y)-c.min(g.y,m.y,v.y,y.y)}return this._cache.put(s,o),a.parentNode.removeChild(a),o}});function ct(t,e,i){return lt.current.measure(t,e,i)}function dt(t,e){var i=_t(e-t,5);if(0===i){if(0===e)return.1;i=c.abs(e)}var n=c.pow(10,c.floor(c.log(i)/c.log(10))),s=_t(i/n,6);return _t(n*(s<1.904762?.2:s<4.761904?.5:s<9.523809?1:2),6)}function ut(t){var e=[];for(var i in t)e.push(i+t[i]);return e.sort().join(" ")}function pt(){return rt.current.alloc()}function ft(t,e,i,n,s){var r=s*f;return new P(i+(t-i)*c.cos(r)+(e-n)*c.sin(r),n-(t-i)*c.sin(r)+(e-n)*c.cos(r))}function gt(e,i){if(e.x1==i.x1&&e.y1==i.y1&&e.x2==i.x2&&e.y2==i.y2)return i;var n=c.min(e.x1,i.x1),s=c.max(e.x1,i.x1),r=c.min(e.x2,i.x2),o=c.max(e.x2,i.x2),a=c.min(e.y1,i.y1),h=c.max(e.y1,i.y1),l=c.min(e.y2,i.y2),d=c.max(e.y2,i.y2),u=[];return u[0]=A(s,a,r,h),u[1]=A(n,h,s,l),u[2]=A(r,h,o,l),u[3]=A(s,l,r,d),e.x1==n&&e.y1==a||i.x1==n&&i.y1==a?(u[4]=A(n,a,s,h),u[5]=A(r,l,o,d)):(u[4]=A(r,a,o,h),u[5]=A(n,l,s,d)),t.grep(u,(function(t){return t.height()>0&&t.width()>0}))[0]}lt.fn._baselineMarker=t("<div class='k-baseline-marker' style='display: inline-block; vertical-align: baseline;width: 1px; height: 1px;overflow: hidden;' />")[0],lt.fn._measureBox=t("<div style='position: absolute; top: -4000px;line-height: normal; visibility: hidden;' />")[0],lt.current=new lt;var mt=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){setTimeout(t,10)};function vt(t,e){return-1!=l(t,e)}function yt(t){return t[t.length-1]}function bt(t,e){t.push.apply(t,e)}function wt(t,e){return _t(c.ceil(t/e)*e,6)}function xt(t,e){return _t(c.floor(t/e)*e,6)}function _t(t,e){var i=c.pow(10,e||0);return c.round(t*i)/i}function kt(t,e){return c.log(t)/c.log(e)}function Ct(t,e,i){var n=_t(c.abs(t%e),6);return 0===n||n>e*(1-i)}function St(t,e,i){return _t(t+(e-t)*i,3)}function Tt(t){return"undefined"!==_typeof(t)}function Pt(t,e){return Tt(t)?t:e}function At(t,e){return t-e}function zt(t,e,i){var n,s=t.length;for(n=0;n<s;n++)t[n][e]=i}function Dt(t,e){return t.match(g)?n.format.apply(this,arguments):n.toString(e,t)}function Et(t){return i.getElementById(t)}function Mt(t,e){return-t.x*e.y+t.y*e.x<0}s.requestFrame=function(t,e){return mt(t,e)};var Lt=function(t){this.closed=t};function It(t){if(!t||!t.indexOf||t.indexOf("&")<0)return t;var e=It._element;return e.innerHTML=t,e.textContent||e.innerText}Lt.prototype=Lt.fn={WEIGHT:.333,EXTREMUM_ALLOWED_DEVIATION:.01,process:function(t){var e,i,n,s,r,o,a,h=this.closed,l=t.slice(0),c=l.length,d=[];if(c>2&&(this.removeDuplicates(0,l),c=l.length),c<2||2==c&&l[0].equals(l[1]))return d;for(e=l[0],i=l[1],n=l[2],d.push(e);e.equals(l[c-1]);)h=!0,l.pop(),c--;if(2==c)return a=this.tangent(e,i,k,C),d.push(this.firstControlPoint(a,e,i,k,C),this.secondControlPoint(a,e,i,k,C),i),d;h?(e=l[c-1],i=l[0],n=l[1],r=(s=this.controlPoints(e,i,n))[1],o=s[0]):(a=this.tangent(e,i,k,C),r=this.firstControlPoint(a,e,i,k,C)),d.push(r);for(var u=0;u<=c-3;u++)this.removeDuplicates(u,l),u+3<=(c=l.length)&&(e=l[u],i=l[u+1],n=l[u+2],s=this.controlPoints(e,i,n),d.push(s[0],i,s[1]));return h?(e=l[c-2],i=l[c-1],n=l[0],s=this.controlPoints(e,i,n),d.push(s[0],i,s[1],o,n)):(a=this.tangent(i,n,k,C),d.push(this.secondControlPoint(a,i,n,k,C),n)),d},removeDuplicates:function(t,e){for(;e[t].equals(e[t+1])||e[t+1].equals(e[t+2]);)e.splice(t+1,1)},invertAxis:function(t,e,i){var n,s,r=!1;return t.x===e.x?r=!0:e.x===i.x?(e.y<i.y&&t.y<=e.y||i.y<e.y&&e.y<=t.y)&&(r=!0):(n=this.lineFunction(t,e),s=this.calculateFunction(n,i.x),t.y<=e.y&&i.y<=s||e.y<=t.y&&i.y>=s||(r=!0)),r},isLine:function(t,e,i){var n=this.lineFunction(t,e),s=this.calculateFunction(n,i.x);return t.x==e.x&&e.x==i.x||_t(s,1)===_t(i.y,1)},lineFunction:function(t,e){var i=(e.y-t.y)/(e.x-t.x);return[t.y-i*t.x,i]},controlPoints:function(t,e,i){var n,s,r,o,a=k,h=C,l=!1,c=!1,d=this.EXTREMUM_ALLOWED_DEVIATION;this.isLine(t,e,i)?n=this.tangent(t,e,k,C):(s={x:this.isMonotonicByField(t,e,i,k),y:this.isMonotonicByField(t,e,i,C)}).x&&s.y?(n=this.tangent(t,i,k,C),l=!0):(this.invertAxis(t,e,i)&&(a=C,h=k),s[a]?n=0:(n=d*(i[h]<t[h]&&t[h]<=e[h]||t[h]<i[h]&&e[h]<=t[h]?this.sign((i[h]-t[h])*(e[a]-t[a])):-this.sign((i[a]-t[a])*(e[h]-t[h]))),c=!0));if(o=this.secondControlPoint(n,t,e,a,h),c){var u=a;a=h,h=u}return r=this.firstControlPoint(n,e,i,a,h),l&&(this.restrictControlPoint(t,e,o,n),this.restrictControlPoint(e,i,r,n)),[o,r]},sign:function(t){return t<=0?-1:1},restrictControlPoint:function(t,e,i,n){t.y<e.y?e.y<i.y?(i.x=t.x+(e.y-t.y)/n,i.y=e.y):i.y<t.y&&(i.x=e.x-(e.y-t.y)/n,i.y=t.y):i.y<e.y?(i.x=t.x-(t.y-e.y)/n,i.y=e.y):t.y<i.y&&(i.x=e.x+(t.y-e.y)/n,i.y=t.y)},tangent:function(t,e,i,n){var s,r=e[i]-t[i],o=e[n]-t[n];return s=0===r?0:o/r,s},isMonotonicByField:function(t,e,i,n){return i[n]>e[n]&&e[n]>t[n]||i[n]<e[n]&&e[n]<t[n]},firstControlPoint:function(t,e,i,n,s){var r=e[n],o=(i[n]-r)*this.WEIGHT;return this.point(r+o,e[s]+o*t,n,s)},secondControlPoint:function(t,e,i,n,s){var r=e[n],o=i[n],a=(o-r)*this.WEIGHT;return this.point(o-a,i[s]-a*t,n,s)},point:function(t,e,i,n){var s=P();return s[i]=t,s[n]=e,s},calculateFunction:function(t,e){for(var i=0,n=t.length,s=0;s<n;s++)i+=Math.pow(e,s)*t[s];return i}},It._element=document.createElement("span"),d(n.dataviz,{init:function(t){n.init(t,n.dataviz.ui)},ui:{roles:{},themes:{},views:[],plugin:function(t){n.ui.plugin(t,s.ui)}},AXIS_LABEL_CLICK:"axisLabelClick",COORD_PRECISION:3,DEFAULT_PRECISION:6,DEFAULT_WIDTH:600,DEFAULT_HEIGHT:400,DEFAULT_FONT:"12px sans-serif",INITIAL_ANIMATION_DURATION:600,NOTE_CLICK:"noteClick",NOTE_HOVER:"noteHover",CLIP:"clip",DASH_ARRAYS:{dot:[1.5,3.5],dash:[4,3.5],longdash:[8,3.5],dashdot:[3.5,3.5,1.5,3.5],longdashdot:[8,3.5,1.5,3.5],longdashdotdot:[8,3.5,1.5,3.5,1.5,3.5]},Axis:H,AxisLabel:N,Box2D:A,BoxElement:I,ChartElement:M,Color:st,CurveProcessor:Lt,ElementAnimation:Q,ExpandAnimation:Z,ExportMixin:ht,ArrowAnimation:et,BarAnimation:J,BarIndicatorAnimatin:tt,FadeAnimation:X,FadeAnimationDecorator:nt,IDPool:rt,LogarithmicAxis:W,LRUCache:ot,Matrix:T,Note:U,NumericAxis:G,Point2D:P,PinElement:j,Ring:z,Pin:E,RootElement:L,RotationAnimation:K,Sector:D,ShapeElement:$,Text:B,TextMetrics:lt,TextBox:R,Title:O,ViewBase:Y,ViewElement:q,ViewFactory:at,animationDecorator:it,append:bt,autoFormat:Dt,autoMajorUnit:dt,boxDiff:gt,defined:Tt,dateComparer:function(t,e){return t&&e?t.getTime()-e.getTime():0},decodeEntities:It,getElement:Et,getSpacing:S,inArray:vt,interpolateValue:St,last:yt,limitValue:function(t,e,i){return c.max(c.min(t,i),e)},measureText:ct,mwDelta:function(t){var e=t.originalEvent,i=0;return e.wheelDelta&&(i=(i=-e.wheelDelta/120)>0?c.ceil(i):c.floor(i)),e.detail&&(i=_t(e.detail/3)),i},rotatePoint:ft,round:_t,ceil:wt,floor:xt,supportsCanvas:function(){return!!i.createElement("canvas").getContext},supportsSVG:function(){return i.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")},renderTemplate:function(t){return o(t,{useWithBlock:!1,paramName:"d"})},uniqueId:pt,valueOrDefault:Pt})}(window.kendo.jQuery),function(){var t=window.kendo,e=t.dataviz.ui,i=t.deepExtend,n="Arial,Helvetica,sans-serif",s="12px "+n,r="16px "+n,o="#fff",a={title:{font:r},legend:{labels:{font:s}},seriesDefaults:{visible:!0,labels:{font:"11px Arial,Helvetica,sans-serif"},donut:{margin:1},line:{width:2},vericalLine:{width:2},scatterLine:{width:1},area:{opacity:.4,markers:{visible:!1,size:6},highlight:{markers:{border:{color:"#fff",opacity:1,width:1}}},line:{opacity:1,width:0}},verticalArea:{opacity:.4,markers:{visible:!1,size:6},line:{opacity:1,width:0}},radarLine:{width:2,markers:{visible:!1}},radarArea:{opacity:.5,markers:{visible:!1,size:6},line:{opacity:1,width:0}},candlestick:{line:{width:1,color:"#000"},border:{width:1,_brightness:.8},gap:1,spacing:.3,downColor:o,highlight:{line:{width:2},border:{width:2,opacity:1}}},ohlc:{line:{width:1},gap:1,spacing:.3,highlight:{line:{width:3,opacity:1}}},bubble:{opacity:.6,border:{width:0},labels:{background:"transparent"}},bar:{gap:1.5,spacing:.4},column:{gap:1.5,spacing:.4},bullet:{gap:1.5,spacing:.4,target:{color:"#ff0000"}},verticalBullet:{gap:1.5,spacing:.4,target:{color:"#ff0000"}},boxPlot:{outliersField:"",meanField:"",whiskers:{width:1,color:"#000"},mean:{width:1,color:"#000"},median:{width:1,color:"#000"},border:{width:1,_brightness:.8},gap:1,spacing:.3,downColor:o,highlight:{whiskers:{width:2},mean:{width:2},median:{width:2},border:{width:2,opacity:1}}},funnel:{labels:{color:"",background:""}},notes:{icon:{size:7,border:{width:1}},label:{padding:3,font:s},line:{length:10,width:1},visible:!0}},categoryAxis:{majorGridLines:{visible:!0}},axisDefaults:{labels:{font:s},title:{font:r,margin:5},crosshair:{tooltip:{font:s}},notes:{icon:{size:7,border:{width:1}},label:{padding:3,font:s},line:{length:10,width:1},visible:!0}},tooltip:{font:s},navigator:{pane:{height:90,margin:{top:10}}}},h={scale:{labels:{font:s}}},l={shapeDefaults:{hover:{opacity:.2},stroke:{width:0}},editable:{resize:{handles:{width:7,height:7}},rotate:{thumb:{width:14}},handles:{type:"rectangle"},select:{stroke:{width:1,dashType:"dot"}}},connectionDefaults:{stroke:{width:2},select:{handles:{width:8,height:8}}}},c=e.themes,d=e.registerTheme=function(t,e){var n={};n.chart=i({},a,e.chart),n.gauge=i({},h,e.gauge),n.diagram=i({},l,e.diagram);var s=n.chart.seriesDefaults;s.verticalLine=i({},s.line),s.verticalArea=i({},s.area),s.polarArea=i({},s.radarArea),s.polarLine=i({},s.radarLine),c[t]=n};d("black",{chart:{title:{color:o},legend:{labels:{color:o},inactiveItems:{labels:{color:"#919191"},markers:{color:"#919191"}}},seriesDefaults:{labels:{color:o},errorBars:{color:o},notes:{icon:{background:"#3b3b3b",border:{color:"#8e8e8e"}},label:{color:o},line:{color:"#8e8e8e"}},pie:{overlay:{gradient:"sharpBevel"}},donut:{overlay:{gradient:"sharpGlass"}},line:{markers:{background:"#3d3d3d"}},scatter:{markers:{background:"#3d3d3d"}},scatterLine:{markers:{background:"#3d3d3d"}},candlestick:{downColor:"#555",line:{color:o},border:{_brightness:1.5,opacity:1},highlight:{border:{color:o,opacity:.2}}},ohlc:{line:{color:o}}},chartArea:{background:"#3d3d3d"},seriesColors:["#0081da","#3aafff","#99c900","#ffeb3d","#b20753","#ff4195"],axisDefaults:{line:{color:"#8e8e8e"},labels:{color:o},majorGridLines:{color:"#545454"},minorGridLines:{color:"#454545"},title:{color:o},crosshair:{color:"#8e8e8e"},notes:{icon:{background:"#3b3b3b",border:{color:"#8e8e8e"}},label:{color:o},line:{color:"#8e8e8e"}}}},gauge:{pointer:{color:"#0070e4"},scale:{rangePlaceholderColor:"#1d1d1d",labels:{color:o},minorTicks:{color:o},majorTicks:{color:o},line:{color:o}}},diagram:{shapeDefaults:{background:"#0066cc",connectorDefaults:{background:o,stroke:{color:"#384049"},hover:{background:"#3d3d3d",stroke:{color:"#efefef"}}},content:{color:o}},editable:{resize:{handles:{background:"#3d3d3d",stroke:{color:o},hover:{background:o,stroke:{color:o}}}},rotate:{thumb:{stroke:{color:o},background:o}},select:{stroke:{color:o}}},connectionDefaults:{stroke:{color:o},content:{color:o},select:{handles:{background:"#3d3d3d",stroke:{color:"#efefef"}}}}}}),d("blueopal",{chart:{title:{color:"#293135"},legend:{labels:{color:"#293135"},inactiveItems:{labels:{color:"#27A5BA"},markers:{color:"#27A5BA"}}},seriesDefaults:{labels:{color:"#000",background:o,opacity:.5},errorBars:{color:"#293135"},candlestick:{downColor:"#c4d0d5",line:{color:"#9aabb2"}},notes:{icon:{background:"transparent",border:{color:"#9aabb2"}},label:{color:"#293135"},line:{color:"#9aabb2"}}},seriesColors:["#0069a5","#0098ee","#7bd2f6","#ffb800","#ff8517","#e34a00"],axisDefaults:{line:{color:"#9aabb2"},labels:{color:"#293135"},majorGridLines:{color:"#c4d0d5"},minorGridLines:{color:"#edf1f2"},title:{color:"#293135"},crosshair:{color:"#9aabb2"},notes:{icon:{background:"transparent",border:{color:"#9aabb2"}},label:{color:"#293135"},line:{color:"#9aabb2"}}}},gauge:{pointer:{color:"#005c83"},scale:{rangePlaceholderColor:"#daecf4",labels:{color:"#293135"},minorTicks:{color:"#293135"},majorTicks:{color:"#293135"},line:{color:"#293135"}}},diagram:{shapeDefaults:{background:"#7ec6e3",connectorDefaults:{background:"#003f59",stroke:{color:o},hover:{background:o,stroke:{color:"#003f59"}}},content:{color:"#293135"}},editable:{resize:{handles:{background:o,stroke:{color:"#003f59"},hover:{background:"#003f59",stroke:{color:"#003f59"}}}},rotate:{thumb:{stroke:{color:"#003f59"},background:"#003f59"}},select:{stroke:{color:"#003f59"}}},connectionDefaults:{stroke:{color:"#003f59"},content:{color:"#293135"},select:{handles:{background:"#3d3d3d",stroke:{color:"#efefef"}}}}}}),d("highcontrast",{chart:{title:{color:"#ffffff"},legend:{labels:{color:"#ffffff"},inactiveItems:{labels:{color:"#66465B"},markers:{color:"#66465B"}}},seriesDefaults:{labels:{color:"#ffffff"},errorBars:{color:"#ffffff"},notes:{icon:{background:"transparent",border:{color:"#ffffff"}},label:{color:"#ffffff"},line:{color:"#ffffff"}},pie:{overlay:{gradient:"sharpGlass"}},donut:{overlay:{gradient:"sharpGlass"}},line:{markers:{background:"#2c232b"}},scatter:{markers:{background:"#2c232b"}},scatterLine:{markers:{background:"#2c232b"}},area:{opacity:.5},candlestick:{downColor:"#664e62",line:{color:"#ffffff"},border:{_brightness:1.5,opacity:1},highlight:{border:{color:"#ffffff",opacity:1}}},ohlc:{line:{color:"#ffffff"}}},chartArea:{background:"#2c232b"},seriesColors:["#a7008f","#ffb800","#3aafff","#99c900","#b20753","#ff4195"],axisDefaults:{line:{color:"#ffffff"},labels:{color:"#ffffff"},majorGridLines:{color:"#664e62"},minorGridLines:{color:"#4f394b"},title:{color:"#ffffff"},crosshair:{color:"#ffffff"},notes:{icon:{background:"transparent",border:{color:"#ffffff"}},label:{color:"#ffffff"},line:{color:"#ffffff"}}}},gauge:{pointer:{color:"#a7008f"},scale:{rangePlaceholderColor:"#2c232b",labels:{color:"#ffffff"},minorTicks:{color:"#2c232b"},majorTicks:{color:"#664e62"},line:{color:"#ffffff"}}},diagram:{shapeDefaults:{background:"#a7018f",connectorDefaults:{background:o,stroke:{color:"#2c232b"},hover:{background:"#2c232b",stroke:{color:o}}},content:{color:o}},editable:{resize:{handles:{background:"#2c232b",stroke:{color:o},hover:{background:o,stroke:{color:o}}}},rotate:{thumb:{stroke:{color:o},background:o}},select:{stroke:{color:o}}},connectionDefaults:{stroke:{color:o},content:{color:o},select:{handles:{background:"#2c232b",stroke:{color:o}}}}}}),d("default",{chart:{title:{color:"#8e8e8e"},legend:{labels:{color:"#232323"},inactiveItems:{labels:{color:"#919191"},markers:{color:"#919191"}}},seriesDefaults:{labels:{color:"#000",background:o,opacity:.5},errorBars:{color:"#232323"},candlestick:{downColor:"#dedede",line:{color:"#8d8d8d"}},notes:{icon:{background:"transparent",border:{color:"#8e8e8e"}},label:{color:"#232323"},line:{color:"#8e8e8e"}}},seriesColors:["#ff6800","#a0a700","#ff8d00","#678900","#ffb53c","#396000"],axisDefaults:{line:{color:"#8e8e8e"},labels:{color:"#232323"},minorGridLines:{color:"#f0f0f0"},majorGridLines:{color:"#dfdfdf"},title:{color:"#232323"},crosshair:{color:"#8e8e8e"},notes:{icon:{background:"transparent",border:{color:"#8e8e8e"}},label:{color:"#232323"},line:{color:"#8e8e8e"}}}},gauge:{pointer:{color:"#ea7001"},scale:{rangePlaceholderColor:"#dedede",labels:{color:"#2e2e2e"},minorTicks:{color:"#2e2e2e"},majorTicks:{color:"#2e2e2e"},line:{color:"#2e2e2e"}}},diagram:{shapeDefaults:{background:"#e15613",connectorDefaults:{background:"#282828",stroke:{color:o},hover:{background:o,stroke:{color:"#282828"}}},content:{color:"#2e2e2e"}},editable:{resize:{handles:{background:o,stroke:{color:"#282828"},hover:{background:"#282828",stroke:{color:"#282828"}}}},rotate:{thumb:{stroke:{color:"#282828"},background:"#282828"}},select:{stroke:{color:"#a7018f"}}},connectionDefaults:{stroke:{color:"#282828"},content:{color:"#2e2e2e"},select:{handles:{background:o,stroke:{color:"#282828"}}}}}}),d("silver",{chart:{title:{color:"#4e5968"},legend:{labels:{color:"#4e5968"},inactiveItems:{labels:{color:"#B1BCC8"},markers:{color:"#B1BCC8"}}},seriesDefaults:{labels:{color:"#293135",background:"#eaeaec",opacity:.5},errorBars:{color:"#4e5968"},notes:{icon:{background:"transparent",border:{color:"#4e5968"}},label:{color:"#4e5968"},line:{color:"#4e5968"}},line:{markers:{background:"#eaeaec"}},scatter:{markers:{background:"#eaeaec"}},scatterLine:{markers:{background:"#eaeaec"}},pie:{connectors:{color:"#A6B1C0"}},donut:{connectors:{color:"#A6B1C0"}},candlestick:{downColor:"#a6afbe"}},chartArea:{background:"#eaeaec"},seriesColors:["#007bc3","#76b800","#ffae00","#ef4c00","#a419b7","#430B62"],axisDefaults:{line:{color:"#a6b1c0"},labels:{color:"#4e5968"},majorGridLines:{color:"#dcdcdf"},minorGridLines:{color:"#eeeeef"},title:{color:"#4e5968"},crosshair:{color:"#a6b1c0"},notes:{icon:{background:"transparent",border:{color:"#4e5968"}},label:{color:"#4e5968"},line:{color:"#4e5968"}}}},gauge:{pointer:{color:"#0879c0"},scale:{rangePlaceholderColor:"#f3f3f4",labels:{color:"#515967"},minorTicks:{color:"#515967"},majorTicks:{color:"#515967"},line:{color:"#515967"}}},diagram:{shapeDefaults:{background:"#1c82c2",connectorDefaults:{background:"#515967",stroke:{color:o},hover:{background:o,stroke:{color:"#282828"}}},content:{color:"#515967"}},editable:{resize:{handles:{background:o,stroke:{color:"#515967"},hover:{background:"#515967",stroke:{color:"#515967"}}}},rotate:{thumb:{stroke:{color:"#515967"},background:"#515967"}},select:{stroke:{color:"#515967"}}},connectionDefaults:{stroke:{color:"#515967"},content:{color:"#515967"},select:{handles:{background:o,stroke:{color:"#515967"}}}}}}),d("metro",{chart:{title:{color:"#777777"},legend:{labels:{color:"#777777"},inactiveItems:{labels:{color:"#CBCBCB"},markers:{color:"#CBCBCB"}}},seriesDefaults:{labels:{color:"#000"},errorBars:{color:"#777777"},notes:{icon:{background:"transparent",border:{color:"#777777"}},label:{color:"#777777"},line:{color:"#777777"}},candlestick:{downColor:"#c7c7c7",line:{color:"#787878"}},overlay:{gradient:"none"},border:{_brightness:1}},seriesColors:["#8ebc00","#309b46","#25a0da","#ff6900","#e61e26","#d8e404","#16aba9","#7e51a1","#313131","#ed1691"],axisDefaults:{line:{color:"#c7c7c7"},labels:{color:"#777777"},minorGridLines:{color:"#c7c7c7"},majorGridLines:{color:"#c7c7c7"},title:{color:"#777777"},crosshair:{color:"#c7c7c7"},notes:{icon:{background:"transparent",border:{color:"#777777"}},label:{color:"#777777"},line:{color:"#777777"}}}},gauge:{pointer:{color:"#8ebc00"},scale:{rangePlaceholderColor:"#e6e6e6",labels:{color:"#777"},minorTicks:{color:"#777"},majorTicks:{color:"#777"},line:{color:"#777"}}},diagram:{shapeDefaults:{background:"#8ebc00",connectorDefaults:{background:"#000",stroke:{color:o},hover:{background:o,stroke:{color:"#000"}}},content:{color:"#777"}},editable:{resize:{handles:{background:o,stroke:{color:"#787878"},hover:{background:"#787878",stroke:{color:"#787878"}}}},rotate:{thumb:{stroke:{color:"#787878"},background:"#787878"}},select:{stroke:{color:"#515967"}}},connectionDefaults:{stroke:{color:"#787878"},content:{color:"#777"},select:{handles:{background:o,stroke:{color:"#787878"}}}}}}),d("metroblack",{chart:{title:{color:"#ffffff"},legend:{labels:{color:"#ffffff"},inactiveItems:{labels:{color:"#797979"},markers:{color:"#797979"}}},seriesDefaults:{border:{_brightness:1},labels:{color:"#ffffff"},errorBars:{color:"#ffffff"},notes:{icon:{background:"transparent",border:{color:"#cecece"}},label:{color:"#ffffff"},line:{color:"#cecece"}},line:{markers:{background:"#0e0e0e"}},bubble:{opacity:.6},scatter:{markers:{background:"#0e0e0e"}},scatterLine:{markers:{background:"#0e0e0e"}},candlestick:{downColor:"#828282",line:{color:"#ffffff"}},overlay:{gradient:"none"}},chartArea:{background:"#0e0e0e"},seriesColors:["#00aba9","#309b46","#8ebc00","#ff6900","#e61e26","#d8e404","#25a0da","#7e51a1","#313131","#ed1691"],axisDefaults:{line:{color:"#cecece"},labels:{color:"#ffffff"},minorGridLines:{color:"#2d2d2d"},majorGridLines:{color:"#333333"},title:{color:"#ffffff"},crosshair:{color:"#cecece"},notes:{icon:{background:"transparent",border:{color:"#cecece"}},label:{color:"#ffffff"},line:{color:"#cecece"}}}},gauge:{pointer:{color:"#00aba9"},scale:{rangePlaceholderColor:"#2d2d2d",labels:{color:"#ffffff"},minorTicks:{color:"#333333"},majorTicks:{color:"#cecece"},line:{color:"#cecece"}}},diagram:{shapeDefaults:{background:"#00aba9",connectorDefaults:{background:o,stroke:{color:"#0e0e0e"},hover:{background:"#0e0e0e",stroke:{color:o}}},content:{color:o}},editable:{resize:{handles:{background:"#0e0e0e",stroke:{color:"#787878"},hover:{background:"#787878",stroke:{color:"#787878"}}}},rotate:{thumb:{stroke:{color:o},background:o}},select:{stroke:{color:"#787878"}}},connectionDefaults:{stroke:{color:o},content:{color:o},select:{handles:{background:"#0e0e0e",stroke:{color:o}}}}}}),d("moonlight",{chart:{title:{color:"#ffffff"},legend:{labels:{color:"#ffffff"},inactiveItems:{labels:{color:"#A1A7AB"},markers:{color:"#A1A7AB"}}},seriesDefaults:{labels:{color:"#ffffff"},errorBars:{color:"#ffffff"},notes:{icon:{background:"transparent",border:{color:"#8c909e"}},label:{color:"#ffffff"},line:{color:"#8c909e"}},pie:{overlay:{gradient:"sharpBevel"}},donut:{overlay:{gradient:"sharpGlass"}},line:{markers:{background:"#212a33"}},bubble:{opacity:.6},scatter:{markers:{background:"#212a33"}},scatterLine:{markers:{background:"#212a33"}},area:{opacity:.3},candlestick:{downColor:"#757d87",line:{color:"#ea9d06"},border:{_brightness:1.5,opacity:1},highlight:{border:{color:o,opacity:.2}}},ohlc:{line:{color:"#ea9d06"}}},chartArea:{background:"#212a33"},seriesColors:["#ffca08","#ff710f","#ed2e24","#ff9f03","#e13c02","#a00201"],axisDefaults:{line:{color:"#8c909e"},minorTicks:{color:"#8c909e"},majorTicks:{color:"#8c909e"},labels:{color:"#ffffff"},majorGridLines:{color:"#3e424d"},minorGridLines:{color:"#2f3640"},title:{color:"#ffffff"},crosshair:{color:"#8c909e"},notes:{icon:{background:"transparent",border:{color:"#8c909e"}},label:{color:"#ffffff"},line:{color:"#8c909e"}}}},gauge:{pointer:{color:"#f4af03"},scale:{rangePlaceholderColor:"#2f3640",labels:{color:o},minorTicks:{color:"#8c909e"},majorTicks:{color:"#8c909e"},line:{color:"#8c909e"}}},diagram:{shapeDefaults:{background:"#f3ae03",connectorDefaults:{background:o,stroke:{color:"#414550"},hover:{background:"#414550",stroke:{color:o}}},content:{color:o}},editable:{resize:{handles:{background:"#414550",stroke:{color:o},hover:{background:o,stroke:{color:o}}}},rotate:{thumb:{stroke:{color:o},background:o}},select:{stroke:{color:o}}},connectionDefaults:{stroke:{color:o},content:{color:o},select:{handles:{background:"#414550",stroke:{color:o}}}}}}),d("uniform",{chart:{title:{color:"#686868"},legend:{labels:{color:"#686868"},inactiveItems:{labels:{color:"#B6B6B6"},markers:{color:"#B6B6B6"}}},seriesDefaults:{labels:{color:"#686868"},errorBars:{color:"#686868"},notes:{icon:{background:"transparent",border:{color:"#9e9e9e"}},label:{color:"#686868"},line:{color:"#9e9e9e"}},pie:{overlay:{gradient:"sharpBevel"}},donut:{overlay:{gradient:"sharpGlass"}},line:{markers:{background:"#ffffff"}},bubble:{opacity:.6},scatter:{markers:{background:"#ffffff"}},scatterLine:{markers:{background:"#ffffff"}},area:{opacity:.3},candlestick:{downColor:"#cccccc",line:{color:"#cccccc"},border:{_brightness:1.5,opacity:1},highlight:{border:{color:"#cccccc",opacity:.2}}},ohlc:{line:{color:"#cccccc"}}},chartArea:{background:"#ffffff"},seriesColors:["#527aa3","#6f91b3","#8ca7c2","#a8bdd1","#c5d3e0","#e2e9f0"],axisDefaults:{line:{color:"#9e9e9e"},minorTicks:{color:"#aaaaaa"},majorTicks:{color:"#888888"},labels:{color:"#686868"},majorGridLines:{color:"#dadada"},minorGridLines:{color:"#e7e7e7"},title:{color:"#686868"},crosshair:{color:"#9e9e9e"},notes:{icon:{background:"transparent",border:{color:"#9e9e9e"}},label:{color:"#686868"},line:{color:"#9e9e9e"}}}},gauge:{pointer:{color:"#527aa3"},scale:{rangePlaceholderColor:"#e7e7e7",labels:{color:"#686868"},minorTicks:{color:"#aaaaaa"},majorTicks:{color:"#888888"},line:{color:"#9e9e9e"}}},diagram:{shapeDefaults:{background:"#d1d1d1",connectorDefaults:{background:"#686868",stroke:{color:o},hover:{background:o,stroke:{color:"#686868"}}},content:{color:"#686868"}},editable:{resize:{handles:{background:o,stroke:{color:"#686868"},hover:{background:"#686868",stroke:{color:"#686868"}}}},rotate:{thumb:{stroke:{color:"#686868"},background:"#686868"}},select:{stroke:{color:"#686868"}}},connectionDefaults:{stroke:{color:"#686868"},content:{color:"#686868"},select:{handles:{background:o,stroke:{color:"#686868"}}}}}}),d("bootstrap",{chart:{title:{color:"#333333"},legend:{labels:{color:"#333333"},inactiveItems:{labels:{color:"#999999"},markers:{color:"#9A9A9A"}}},seriesDefaults:{labels:{color:"#333333"},overlay:{gradient:"none"},errorBars:{color:"#343434"},notes:{icon:{background:"#000000",border:{color:"#000000"}},label:{color:"#ffffff"},line:{color:"#000000"}},pie:{overlay:{gradient:"none"}},donut:{overlay:{gradient:"none"}},line:{markers:{background:"#ffffff"}},bubble:{opacity:.6},scatter:{markers:{background:"#ffffff"}},scatterLine:{markers:{background:"#ffffff"}},area:{opacity:.8},candlestick:{downColor:"#d0d0d0",line:{color:"#333333"},border:{_brightness:1.5,opacity:1},highlight:{border:{color:"#b8b8b8",opacity:.2}}},ohlc:{line:{color:"#333333"}}},chartArea:{background:"#ffffff"},seriesColors:["#428bca","#5bc0de","#5cb85c","#f2b661","#e67d4a","#da3b36"],axisDefaults:{line:{color:"#cccccc"},minorTicks:{color:"#ebebeb"},majorTicks:{color:"#cccccc"},labels:{color:"#333333"},majorGridLines:{color:"#cccccc"},minorGridLines:{color:"#ebebeb"},title:{color:"#333333"},crosshair:{color:"#000000"},notes:{icon:{background:"#000000",border:{color:"#000000"}},label:{color:"#ffffff"},line:{color:"#000000"}}}},gauge:{pointer:{color:"#428bca"},scale:{rangePlaceholderColor:"#cccccc",labels:{color:"#333333"},minorTicks:{color:"#ebebeb"},majorTicks:{color:"#cccccc"},line:{color:"#cccccc"}}},diagram:{shapeDefaults:{background:"#428bca",connectorDefaults:{background:"#333333",stroke:{color:o},hover:{background:o,stroke:{color:"#333333"}}},content:{color:"#333333"}},editable:{resize:{handles:{background:o,stroke:{color:"#333333"},hover:{background:"#333333",stroke:{color:"#333333"}}}},rotate:{thumb:{stroke:{color:"#333333"},background:"#333333"}},select:{stroke:{color:"#333333"}}},connectionDefaults:{stroke:{color:"#c4c4c4"},content:{color:"#333333"},select:{handles:{background:o,stroke:{color:"#333333"}},stroke:{color:"#333333"}}}}}),d("flat",{chart:{title:{color:"#4c5356"},legend:{labels:{color:"#4c5356"},inactiveItems:{labels:{color:"#CBCBCB"},markers:{color:"#CBCBCB"}}},seriesDefaults:{labels:{color:"#4c5356"},errorBars:{color:"#4c5356"},notes:{icon:{background:"transparent",border:{color:"#cdcdcd"}},label:{color:"#4c5356"},line:{color:"#cdcdcd"}},candlestick:{downColor:"#c7c7c7",line:{color:"#787878"}},area:{opacity:.9},overlay:{gradient:"none"},border:{_brightness:1}},seriesColors:["#10c4b2","#ff7663","#ffb74f","#a2df53","#1c9ec4","#ff63a5","#1cc47b"],axisDefaults:{line:{color:"#cdcdcd"},labels:{color:"#4c5356"},minorGridLines:{color:"#cdcdcd"},majorGridLines:{color:"#cdcdcd"},title:{color:"#4c5356"},crosshair:{color:"#cdcdcd"},notes:{icon:{background:"transparent",border:{color:"#cdcdcd"}},label:{color:"#4c5356"},line:{color:"#cdcdcd"}}}},gauge:{pointer:{color:"#10c4b2"},scale:{rangePlaceholderColor:"#cdcdcd",labels:{color:"#4c5356"},minorTicks:{color:"#4c5356"},majorTicks:{color:"#4c5356"},line:{color:"#4c5356"}}},diagram:{shapeDefaults:{background:"#10c4b2",connectorDefaults:{background:"#363940",stroke:{color:o},hover:{background:o,stroke:{color:"#363940"}}},content:{color:"#4c5356"}},editable:{resize:{handles:{background:o,stroke:{color:"#363940"},hover:{background:"#363940",stroke:{color:"#363940"}}}},rotate:{thumb:{stroke:{color:"#363940"},background:"#363940"}},select:{stroke:{color:"#363940"}}},connectionDefaults:{stroke:{color:"#cdcdcd"},content:{color:"#4c5356"},select:{handles:{background:o,stroke:{color:"#363940"}},stroke:{color:"#363940"}}}}})}(window.kendo.jQuery),function(){var t=jQuery,e=document,i=Math,n=window.kendo,s=n.Class,r=n.dataviz,o=r.Box2D,a=r.ExpandAnimation,h=r.Point2D,l=r.ViewBase,c=r.ViewElement,d=n.deepExtend,u=r.defined,p=r.round,f=r.renderTemplate,g=r.rotatePoint,m=r.uniqueId,v=r.CLIP,y=r.COORD_PRECISION,b=r.DASH_ARRAYS,w=r.DEFAULT_WIDTH,x=r.DEFAULT_HEIGHT,_=r.DEFAULT_FONT,k="http://www.w3.org/2000/svg",C=l.extend({init:function(t){l.fn.init.call(this,t),this.decorators.push(new H(this),new U(this)),r.ui.Chart&&this.decorators.push(new r.BarAnimationDecorator(this),new r.PieAnimationDecorator(this),new r.BubbleAnimationDecorator(this)),this.decorators.push(new $(this),new r.FadeAnimationDecorator(this)),r.Gauge&&this.decorators.push(new r.RadialPointerAnimationDecorator(this),new r.ArrowPointerAnimationDecorator(this),new r.BarIndicatorAnimationDecorator(this)),this.defsId=m(),this.template=C.template,this.display=this.options.inline?"inline":"block",this.template||(this.template=C.template=f("<?xml version='1.0' ?><svg xmlns='"+k+"' version='1.1' width='#= d.options.width #px' height='#= d.options.height #px' style='position: relative; display: #= d.display #;'>#= d.renderDefinitions() ##= d.renderContent() #</svg>"))},options:{width:w,height:x,encodeText:!1},renderTo:function(t){var e;return this.setupAnimations(),r.renderSVG(t,this.render()),e=t.firstElementChild,this.alignToScreen(e),this.playAnimations(),this._viewElement=e,e},renderDefinitions:function(){return"<defs id='"+this.defsId+"'>"+l.fn.renderDefinitions.call(this)+"</defs>"},renderElement:function(t){var i,n,s=e.createElement("div"),o=e.getElementById(this.defsId);return r.renderSVG(s,"<?xml version='1.0' ?><svg xmlns='"+k+"' version='1.1'>"+this.renderDefinitions()+t.render()+"</svg>"),i=s.firstElementChild.firstChild,n=s.firstElementChild.lastChild,o&&o.textContent!==i.textContent&&o.parentNode.replaceChild(i,o),n},createGroup:function(t){return this.decorate(new B(t))},createClipPath:function(t,e){var i=this.definitions[t],n=[this.createRect(e,{})];return i?(i.children=n,i.refresh()):((i=new R({id:t})).children=n,this.definitions[t]=i),i},createText:function(t,e){return this.decorate(new T(t,d({encode:this.options.encodeText},e)))},createRect:function(t,e){return this.decorate(new z(t.points(),!0,this.setDefaults(e)))},createCubicCurve:function(t,e,i){return this.decorate(new A(t,e,i))},createLine:function(t,e,i,n,s){return this.decorate(new z([new h(t,e),new h(i,n)],!1,this.setDefaults(s)))},createMultiLine:function(t,e){return this.decorate(new D(t,!1,this.setDefaults(e)))},createPolyline:function(t,e,i){return this.decorate(new z(t,e,this.setDefaults(i)))},createCircle:function(t,e,i){return this.decorate(new I(t,e,i))},createSector:function(t,e){return this.decorate(new L(t,e))},createRing:function(t,e){return this.decorate(new E(t,e))},createPin:function(t,e){return this.decorate(new M(t,e))},createGradient:function(t){return"radial"===t.type?u(t.ir)?new F(t):new V(t):new N(t)},alignToScreen:function(t){var e;try{e=t.getScreenCTM?t.getScreenCTM():null}catch(t){}if(e){var i=-e.e%1,n=-e.f%1,s=t.style;0===i&&0===n||(s.left=i+"px",s.top=n+"px")}}}),S=c.extend({renderClipPath:function(){var t=this.options.clipPathId,e="";return t&&(e=this.renderAttr("clip-path","url("+Y()+"#"+t+")")),e}}),T=S.extend({init:function(t,e){S.fn.init.call(this,e),this.content=t,this.template=T.template,this.template||(this.template=T.template=f("<text #= d.renderId() # #= d.renderDataAttributes() # x='#= Math.round(d.options.x) #' y='#= Math.round(d.options.y + d.options.baseline) #' fill-opacity='#= d.options.fillOpacity #' #= d.options.rotation ? d.renderRotation() : '' # style='font: #= d.options.font #; #= d.renderCursor() #' fill='#= d.options.color #'>#= d.renderContent() #</text>"))},options:{x:0,y:0,baseline:0,font:_,size:{width:0,height:0},fillOpacity:1,cursor:{}},refresh:function(e){var i=this.options;t(e).attr({"fill-opacity":i.fillOpacity})},clone:function(){return new T(this.content,d({},this.options))},renderRotation:function(){var t=this.options,e=t.size,i=p(t.x+e.normalWidth/2,y),n=p(t.y+e.normalHeight/2,y),s=p(t.x+e.width/2,y),r=p(t.y+e.height/2,y);return"transform='translate("+p(s-i,y)+","+p(r-n,y)+") rotate("+t.rotation+","+i+","+n+")'"},renderContent:function(){var t=this.content;return this.options.encode&&(t=r.decodeEntities(t),t=n.htmlEncode(t)),t}}),P=S.extend({init:function(t){S.fn.init.call(this,t),this.template=P.template,this.template||(this.template=P.template=f("<path #= d.renderId() ##= d.renderClipPath() #style='display: #= d.renderDisplay() #; #= d.renderCursor() #' #= d.renderDataAttributes() # d='#= d.renderPoints() #' #= d.renderAttr(\"stroke\", d.options.stroke) # #= d.renderAttr(\"stroke-width\", d.options.strokeWidth) ##= d.renderDashType() # stroke-linecap='#= d.renderLinecap() #' stroke-linejoin='round' fill-opacity='#= d.options.fillOpacity #' stroke-opacity='#= d.options.strokeOpacity #' fill='#= d.renderFill() #'></path>"))},options:{fill:"",fillOpacity:1,strokeOpacity:1,rotation:[0,0,0],strokeLineCap:"square",visible:!0,cursor:{}},refresh:function(e){var i=this.options;t(e).attr({d:this.renderPoints(),"fill-opacity":i.fillOpacity,"stroke-opacity":i.strokeOpacity}).css("display",this.renderDisplay())},clone:function(){return new P(d({},this.options))},renderPoints:function(){},renderDashType:function(){var t=this.options;return function(t,e){var i,n,s=[];if((t=t?t.toLowerCase():null)&&"solid"!=t){for(i=b[t],n=0;n<i.length;n++)s.push(i[n]*(e||1));return"stroke-dasharray='"+s.join(" ")+"' "}return""}(t.dashType,t.strokeWidth)},renderLinecap:function(){var t=this.options,e=t.dashType,i=t.strokeLineCap;return e&&"solid"!=e?"butt":i},renderFill:function(){var t=this.options.fill;return t&&"transparent"!==t?t:"none"},renderDisplay:function(){return this.options.visible?"block":"none"},destroy:function(){}}),A=P.extend({init:function(t,e,i){P.fn.init.call(this,e),this.areaPoints=i,this.points=t},renderPoints:function(){for(var t=this.points,e=[],i=this.areaPoints,n=0;n<t.length;n++)n%3==1&&e.push("C"),e.push(p(t[n].x,y)+" "+p(t[n].y,y));if(i&&i.length){for(n=0;n<i.length;n++)e.push("L "+i[n].x+" "+i[n].y);e.push("z")}return"M "+e.join(" ")}}),z=P.extend({init:function(t,e,i){P.fn.init.call(this,i),this.points=t,this.closed=e},renderPoints:function(){var t=this.points;return this._renderPoints(t)},_renderPoints:function(t){var e,i=this.options.rotation,n=new h(i[1],i[2]),s=-i[0],r=[];for(e=0;e<t.length;e++)r.push(this._print(t[e].clone().rotate(n,s)));return this.closed&&r.push("z"),"M"+r.join(" ")},clone:function(){return new z(d([],this.points),this.closed,d({},this.options))},_print:function(t){var e=this.options,i=e.strokeWidth,n=!1!==e.align&&i&&i%2!=0?j:p;return n(t.x,y)+" "+n(t.y,y)}}),D=z.extend({renderPoints:function(){var t,e=this.points,i=[];for(t=0;t<e.length;t++)i.push(this._renderPoints(e[t]));return i.join(" ")}}),E=P.extend({init:function(t,e){P.fn.init.call(this,e),this.pathTemplate=E.pathTemplate,this.pathTemplate||(this.pathTemplate=E.pathTemplate=f("M #= d.firstOuterPoint.x # #= d.firstOuterPoint.y # A#= d.r # #= d.r # 0 #= d.isReflexAngle ? '1' : '0' #,1 #= d.secondOuterPoint.x # #= d.secondOuterPoint.y # L #= d.secondInnerPoint.x # #= d.secondInnerPoint.y # A#= d.ir # #= d.ir # 0 #= d.isReflexAngle ? '1' : '0' #,0 #= d.firstInnerPoint.x # #= d.firstInnerPoint.y # z")),this.config=t||{}},renderPoints:function(){var t,e,n=this.config,s=n.startAngle,r=n.angle+s,o=r-s>180,a=i.max(n.r,0),h=i.max(n.ir,0),l=n.c,c=n.point(s),d=n.point(s,!0);return p(s)%360==p(r)%360&&(r-=.05),t=n.point(r),e=n.point(r,!0),this.pathTemplate({firstOuterPoint:c,secondOuterPoint:t,isReflexAngle:o,r:a,ir:h,cx:l.x,cy:l.y,firstInnerPoint:d,secondInnerPoint:e})},clone:function(){return new E(d({},this.config),d({},this.options))}}),M=P.extend({init:function(t,e){P.fn.init.call(this,e),this.pathTemplate=M.pathTemplate,this.pathTemplate||(this.pathTemplate=M.pathTemplate=f("M #= d.origin.x # #= d.origin.y # #= d.as.x # #= d.as.y # A#= d.r # #= d.r # 0 #= d.isReflexAngle ? '1' : '0' #,0 #= d.ae.x # #= d.ae.y # z")),this.config=t||new r.Pin},renderPoints:function(){var t=this,e=t.config,n=e.radius,s=i.PI/180,r=e.arcAngle,o=n*i.sin(r*s/2),a=e.height-n*(1-i.cos(r*s/2)),h=e.origin,l={x:h.x+o,y:h.y-a},c={x:h.x-o,y:h.y-a},d=function(i,n){var s=t.options.rotation,r=e.rotation;return i=g(i.x,i.y,s[1],s[2],-s[0]),n&&(i=g(i.x,i.y,h.x,h.y,r)),i};return h=d(h),t.pathTemplate({origin:h,as:d(l,!0),ae:d(c,!0),r:n,isReflexAngle:r>180})}}),L=E.extend({init:function(t,e){E.fn.init.call(this,t,e),this.pathTemplate=L.pathTemplate,this.pathTemplate||(this.pathTemplate=L.pathTemplate=f("M #= d.firstOuterPoint.x # #= d.firstOuterPoint.y # A#= d.r # #= d.r # 0 #= d.isReflexAngle ? '1' : '0' #,1 #= d.secondOuterPoint.x # #= d.secondOuterPoint.y # L #= d.cx # #= d.cy # z"))},options:{fill:"",fillOpacity:1,strokeOpacity:1,strokeLineCap:"square"},clone:function(){return new L(d({},this.config),d({},this.options))}}),I=c.extend({init:function(t,e,i){c.fn.init.call(this,i),this.c=t,this.r=e,this.template=I.template,this.template||(this.template=I.template=f("<circle #= d.renderId() # #= d.renderDataAttributes() #cx='#= d.c.x #' cy='#= d.c.y #' r='#= d.r #' #= d.renderAttr(\"stroke\", d.options.stroke) # #= d.renderAttr(\"stroke-width\", d.options.strokeWidth) #fill-opacity='#= d.options.fillOpacity #' stroke-opacity='#= d.options.strokeOpacity #'  fill='#= d.options.fill || \"none\" #'></circle>"))},options:{fill:"",fillOpacity:1,strokeOpacity:1},refresh:function(e){t(e).attr({r:i.max(0,this.r),"fill-opacity":this.options.fillOpacity})},clone:function(){return new I(d({},this.c),this.r,d({},this.options))}}),B=S.extend({init:function(t){c.fn.init.call(this,t),this.template=B.template,this.template||(this.template=B.template=f("<g#= d.renderId() ##= d.renderDataAttributes() ##= d.renderClipPath() #>#= d.renderContent() #</g>"))}}),R=c.extend({init:function(t){c.fn.init.call(this,t),this.template=R.template,this.template||(this.template=R.template=f('<clipPath#= d.renderAttr("id", d.options.id) #>#= d.renderContent() #</clipPath>'))},refresh:function(){var t=e.getElementById(this.options.id);t&&(t.innerHTML=this.renderContent())}}),O=c.extend({init:function(t){c.fn.init.call(this,t)},options:{id:""},renderStops:function(){var t,e=this.options.stops,i=this.stopTemplate,n=e.length,s="";for(t=0;t<n;t++)s+=i(e[t]);return s}}),N=O.extend({init:function(t){O.fn.init.call(this,t),this.template=N.template,this.stopTemplate=N.stopTemplate,this.template||(this.template=N.template=f("<linearGradient id='#= d.options.id #' gradientTransform='rotate(#= d.options.rotation #)'> #= d.renderStops() #</linearGradient>"),this.stopTemplate=N.stopTemplate=f("<stop offset='#= Math.round(d.offset * 100) #%' style='stop-color:#= d.color #;stop-opacity:#= d.opacity #' />"))},options:{rotation:0}}),V=O.extend({init:function(t){O.fn.init.call(this,t),this.template=V.template,this.stopTemplate=V.stopTemplate,this.template||(this.template=V.template=f("<radialGradient id='#= d.options.id #' cx='#= d.options.cx #' cy='#= d.options.cy #' fx='#= d.options.cx #' fy='#= d.options.cy #' r='#= d.options.r #' gradientUnits='userSpaceOnUse'>#= d.renderStops() #</radialGradient>"),this.stopTemplate=V.stopTemplate=f("<stop offset='#= Math.round(d.offset * 100) #%' style='stop-color:#= d.color #;stop-opacity:#= d.opacity #' />"))}}),F=c.extend({init:function(t){c.fn.init.call(this,t),this.template=F.template,this.stopTemplate=F.stopTemplate,this.template||(this.template=F.template=f("<radialGradient id='#= d.options.id #' cx='#= d.options.cx #' cy='#= d.options.cy #' fx='#= d.options.cx #' fy='#= d.options.cy #' r='#= d.options.r #' gradientUnits='userSpaceOnUse'>#= d.renderStops() #</radialGradient>"),this.stopTemplate=F.stopTemplate=f("<stop offset='#= d.offset #%' style='stop-color:#= d.color #;stop-opacity:#= d.opacity #' />"))},options:{id:""},renderStops:function(){var t,e,i=this.options,n=i.stops,s=this.stopTemplate,r=i.ir/i.r*100,o=n.length,a="";for((e=d({},n[0])).offset=r,a+=s(e),t=1;t<o;t++)(e=d({},n[t])).offset=e.offset*(100-r)+r,a+=s(e);return a}});function H(t){this.view=t}function U(t){this.view=t}H.prototype={decorate:function(t){var e,i,n=this.view,s=t.options,r=s.id;return s.overlay?(t.options.id=m(),e=n.createGroup(),i=t.clone(),e.children.push(t,i),i.options.id=r,i.options.fill=s.overlay,e):t}},U.prototype={decorate:function(t){var e=t.options;return e.fill=this.getPaint(e.fill),t},getPaint:function(t){var e,i,n,s=this.view,r=s.definitions;return t&&u(t.gradient)?(e=s.buildGradient(t))?((n=r[i=e.id])||(n=s.createGradient(e),r[i]=n),"url("+Y()+"#"+n.options.id+")"):"none":t}};var $=s.extend({init:function(t){this.view=t},decorate:function(t){var e,i,n=this.view,s=this.clipId,r=n.options,h=t.options.animation,l=n.definitions;return h&&h.type===v&&r.transitions&&(s||(this.clipId=s=m()),(e=l[s])||(e=new R({id:s}),i=n.createRect(new o(0,0,r.width,r.height),{id:m()}),e.children.push(i),l[s]=e,n.animations.push(new a(i,{size:r.width}))),t.options.clipPathId=s),t}});function j(t){return i.round(t)+.5}var G,W,q=function(t,e){t.innerHTML=e};function Y(){var t=e.getElementsByTagName("base")[0],i="",s=e.location.href,r=s.indexOf("#");return t&&!n.support.browser.msie&&(-1!==r&&(s=s.substring(0,r)),i=s),i}G=e.createElement("div"),W="undefined"!=("undefined"==typeof DOMParser?"undefined":_typeof(DOMParser)),G.innerHTML="<svg xmlns='http://www.w3.org/2000/svg'></svg>",W&&G.firstChild.namespaceURI!=k&&(q=function(t,i){var n=(new DOMParser).parseFromString(i,"text/xml"),s=e.adoptNode(n.documentElement);t.innerHTML="",t.appendChild(s)}),r.supportsSVG()&&r.ViewFactory.current.register("svg",C,10),d(r,{renderSVG:q,SVGCircle:I,SVGClipAnimationDecorator:$,SVGClipPath:R,SVGGradientDecorator:U,SVGGroup:B,SVGLine:z,SVGMultiLine:D,SVGLinearGradient:N,SVGOverlayDecorator:H,SVGPath:P,SVGRadialGradient:V,SVGDonutGradient:F,SVGRing:E,SVGSector:L,SVGText:T,SVGView:C})}(window.kendo.jQuery),function(t,e){var i=t.each,n=t.isArray,s=t.map,r=Math,o=t.extend,a=t.proxy,h=window.kendo,l=h.Class,c=h.Observable,d=h.data.DataSource,u=h.ui.Widget,p=h.deepExtend,f=h.getter,g=h.isFunction,m=h.template,v=h.dataviz,y=v.Axis,b=v.AxisLabel,w=v.BarAnimation,x=v.Box2D,_=v.BoxElement,k=v.ChartElement,C=v.Color,S=v.CurveProcessor,T=v.ElementAnimation,P=v.Note,A=v.LogarithmicAxis,z=v.NumericAxis,D=v.Point2D,E=v.RootElement,M=v.Ring,L=v.ShapeElement,I=v.Text,B=v.TextBox,R=v.Title,O=v.animationDecorator,N=v.append,V=v.autoFormat,F=v.defined,H=v.dateComparer,U=v.getElement,$=v.getSpacing,j=v.inArray,G=v.interpolateValue,W=v.last,q=v.limitValue,Y=v.mwDelta,Q=v.round,X=v.renderTemplate,Z=v.uniqueId,K=v.valueOrDefault,J=".kendoChart",tt=v.AXIS_LABEL_CLICK,et="bar",it="bottom",nt="center",st=v.CLIP,rt=v.COORD_PRECISION,ot="date",at="days",ht=v.DEFAULT_FONT,lt=v.DEFAULT_HEIGHT,ct=v.DEFAULT_PRECISION,dt=v.DEFAULT_WIDTH,ut=v.INITIAL_ANIMATION_DURATION,pt="left",ft=Number.MAX_VALUE,gt=-Number.MAX_VALUE,mt="DOMMouseScroll"+J+" mousewheel"+J,vt=v.NOTE_CLICK,yt=v.NOTE_HOVER,bt="pie",wt="right",xt={years:31536e6,months:26784e5,weeks:6048e5,days:864e5,hours:36e5,minutes:6e4,seconds:1e3},_t="top",kt="value",Ct="x",St="y",Tt=["seconds","minutes","hours",at,"weeks","months","years"],Pt=[et,"column","ohlc","candlestick","boxPlot","bullet"],At={seconds:"HH:mm:ss",minutes:"HH:mm",hours:"HH:mm",days:"M/d",weeks:"M/d",months:"MMM 'yy",years:"yyyy"},zt=u.extend({init:function(t,e){var i;h.destroy(t),u.fn.init.call(this,t),i=p({},this.options,e),this.element.addClass("k-"+i.name.toLowerCase()).css("position","relative"),this._originalOptions=p({},i),this._initTheme(i),this.bind(this.events,this.options),this.wrapper=this.element,this._initDataSource(e),h.notify(this,v.ui)},_initTheme:function(e){var n,s=v.ui.themes||{},r=e.theme,o=s[r]||s[r.toLowerCase()],a=r&&o?o.chart:{},h=[],l=e.series||[];for(n=0;n<l.length;n++)h.push(t.extend({},l[n]));e.series=h,function(t){var e;i(["category",kt,Ct,St],(function(){t[e=this+"Axes"]&&(t[this+"Axis"]=t[e],delete t[e])}))}(e),this._applyDefaults(e,a),null===e.seriesColors&&(e.seriesColors=void 0),this.options=p({},a,e),Xe(this.options)},_initDataSource:function(t){var e=(t||{}).dataSource;this._dataChangeHandler=a(this._onDataChanged,this),this.dataSource=d.create(e).bind("change",this._dataChangeHandler),this._bindCategories(),this._redraw(),this._attachEvents(),e&&this.options.autoBind&&this.dataSource.fetch()},setDataSource:function(t){this.dataSource.unbind("change",this._dataChangeHandler),this.dataSource=this._originalOptions.dataSource=t,t.bind("change",this._dataChangeHandler),this.options.autoBind&&t.fetch()},events:["dataBound","seriesClick","seriesHover",tt,"legendItemClick","legendItemHover","plotAreaClick","dragStart","drag","dragEnd","zoomStart","zoom","zoomEnd","selectStart","select","selectEnd",vt,yt],items:function(){return t()},options:{name:"Chart",renderAs:"",theme:"default",chartArea:{},legend:{visible:!0,labels:{}},categoryAxis:{},autoBind:!0,seriesDefaults:{type:"column",data:[],highlight:{visible:!0},labels:{},negativeValues:{visible:!1}},series:[],seriesColors:null,tooltip:{visible:!1},transitions:!0,valueAxis:{},plotArea:{},title:{},xAxis:{},yAxis:{},panes:[{}]},refresh:function(){this._applyDefaults(this.options),Xe(this.options),this._bindSeries(),this._bindCategories(),this.trigger("dataBound"),this._redraw()},getSize:function(){return h.dimensions(this.element)},_resize:function(){var t=this.options.transitions;this.options.transitions=!1,this._redraw(),this.options.transitions=t},redraw:function(t){var e,i;this._applyDefaults(this.options),Xe(this.options),t?(e=(i=this._model._plotArea).findPane(t),i.redraw(e)):this._redraw()},_redraw:function(){var t,e=this._getModel();this._destroyView(),this._model=e,this._plotArea=e._plotArea,(t=this._view=v.ViewFactory.current.create(e.options,this.options.renderAs))&&(t.load(e),this._viewElement=this._renderView(t),this._tooltip=this._createTooltip(),this._highlight=new Re(t),this._setupSelection())},_sharedTooltip:function(){var t=this.options;return this._plotArea instanceof Te&&t.tooltip.shared},_createTooltip:function(){var t=this.options,e=this.element;return this._sharedTooltip()?new Ve(e,this._plotArea,t.tooltip):new Ne(e,t.tooltip)},_renderView:function(){return this._view.renderTo(this.element[0])},_applyDefaults:function(e,n){!function(e,n){var s=(n||{}).axisDefaults||{};i(["category",kt,Ct,St],(function(){var i=this+"Axis",n=[].concat(e[i]),r=e.axisDefaults||{};n=t.map(n,(function(t){var e=(t||{}).color,n=p({},s,s[i],r,r[i],{line:{color:e},labels:{color:e},title:{color:e}},t);return delete n[i],n})),e[i]=n.length>1?n:n[0]}))}(e,n),function(t,e){var i,n,s=t.series,r=s.length,o=t.seriesDefaults,a=p({},t.seriesDefaults),h=e?p({},e.seriesDefaults):{},l=p({},h);for(Qe(a),Qe(l),i=0;i<r;i++){n=s[i].type||t.seriesDefaults.type;var c=p({data:[]},l,h[n],{tooltip:t.tooltip},a,o[n]);s[i]._defaults=c,s[i]=p({},c,s[i])}}(e,n)},_getModel:function(){var t,e=this.options,i=new E(this._modelOptions());return i.parent=this,R.buildTitle(e.title,i),t=i._plotArea=this._createPlotArea(),e.legend.visible&&i.append(new It(t.options.legend)),i.append(t),i.reflow(),i},_modelOptions:function(){var t=this.options,e=this.element,i=r.floor(e.height()),n=r.floor(e.width());return p({width:n||dt,height:i||lt,transitions:t.transitions},t.chartArea)},_createPlotArea:function(){var t=this.options;return Dt.current.create(t.series,t)},_setupSelection:function(){var t,e,i,n,s,r,o=this._plotArea.axes,h=this._selections=[];for(this._selectStartHandler||(this._selectStartHandler=a(this._selectStart,this),this._selectHandler=a(this._select,this),this._selectEndHandler=a(this._selectEnd,this)),e=0;e<o.length;e++)r=(i=o[e]).options,i instanceof Bt&&r.select&&!r.vertical&&(n=0,s=r.categories.length-1,i instanceof Rt&&(n=r.categories[n],s=r.categories[s]),r.justified||(i instanceof Rt?s=ni(s,1,r.baseUnit,r.weekStartDay):s++),(t=new je(this,i,p({min:n,max:s},r.select))).bind("selectStart",this._selectStartHandler),t.bind("select",this._selectHandler),t.bind("selectEnd",this._selectEndHandler),h.push(t))},_selectStart:function(t){return this.trigger("selectStart",t)},_select:function(t){return this.trigger("select",t)},_selectEnd:function(t){return this.trigger("selectEnd",t)},_attachEvents:function(){var t=this.element;t.on("mouseover.kendoChart",a(this._mouseover,this)),t.on("mouseout.kendoChart",a(this._mouseout,this)),t.on(mt,a(this._mousewheel,this)),t.on("mouseleave.kendoChart",a(this._mouseleave,this)),this._shouldAttachMouseMove()&&t.on("mousemove.kendoChart",a(this._mousemove,this)),h.UserEvents&&(this._userEvents=new h.UserEvents(t,{global:!0,filter:":not(.k-selector)",multiTouch:!1,tap:a(this._tap,this),start:a(this._start,this),move:a(this._move,this),end:a(this._end,this)}))},_mouseout:function(t){var e=this._model.modelMap[t.target.getAttribute("data-model-id")];e&&e.leave&&e.leave(this,t)},_start:function(t){var e=this._events;F(e.dragStart||e.drag||e.dragEnd)&&this._startNavigation(t,"dragStart")},_move:function(t){var e,i,n,s,r,o=this._navState,a={};if(o){for(t.preventDefault(),e=o.axes,i=0;i<e.length;i++)(n=e[i]).options.name&&0!==(r=(s=n.options.vertical?t.y:t.x).startLocation-s.location)&&(a[n.options.name]=n.translateRange(r));o.axisRanges=a,this.trigger("drag",{axisRanges:a,originalEvent:t})}},_end:function(t){this._endNavigation(t,"dragEnd")},_mousewheel:function(t){var e,i,n,s,r,o=this,a=t.originalEvent,h=Y(t),l=o._navState,c={};if(l||o._startNavigation(a,"zoomStart")||(l=o._navState),l){for(e=l.totalDelta||h,l.totalDelta=e+h,i=o._navState.axes,n=0;n<i.length;n++)(r=(s=i[n]).options.name)&&(c[r]=s.scaleRange(-e));o.trigger("zoom",{delta:h,axisRanges:c,originalEvent:t}),o._mwTimeout&&clearTimeout(o._mwTimeout),o._mwTimeout=setTimeout((function(){o._endNavigation(t,"zoomEnd")}),150)}},_startNavigation:function(t,e){var i,n=this._eventCoordinates(t),s=this._model._plotArea,r=s.findPointPane(n),o=s.axes.slice(0),a=!1;if(r){for(i=0;i<o.length;i++)if(o[i].box.containsPoint(n)){a=!0;break}!a&&s.backgroundBox().containsPoint(n)&&(this.trigger(e,{axisRanges:bi(o),originalEvent:t})?this._userEvents.cancel():(this._suppressHover=!0,this._unsetActivePoint(),this._navState={pane:r,axes:o}))}},_endNavigation:function(t,e){this._navState&&(this.trigger(e,{axisRanges:this._navState.axisRanges,originalEvent:t}),this._suppressHover=!1,this._navState=null)},_getChartElement:function(e){var i,n=t(e.target).data("modelId"),s=this._model;return n&&(i=s.modelMap[n]),i&&i.aliasFor&&(i=i.aliasFor(e,this._eventCoordinates(e))),i},_eventCoordinates:function(t){var e=F((t.x||{}).client),i=e?t.x.client:t.clientX,n=e?t.y.client:t.clientY;return this._toModelCoordinates(i,n)},_toModelCoordinates:function(e,i){var n=this.element,s=n.offset(),r=parseInt(n.css("paddingLeft"),10),o=parseInt(n.css("paddingTop"),10),a=t(window);return new D(e-s.left-r+a.scrollLeft(),i-s.top-o+a.scrollTop())},_tap:function(t){var e=this._getChartElement(t);this._activePoint===e?this._click(t):(this._startHover(t)||this._unsetActivePoint(),this._click(t))},_click:function(t){for(var e=this._getChartElement(t);e;)e.click&&e.click(this,t),e=e.parent},_startHover:function(t){var e,i=this._tooltip,n=this._highlight,s=this.options.tooltip;if(!this._suppressHover&&n&&!j(t.target,n._overlays)&&!this._sharedTooltip())return(e=this._getChartElement(t))&&e.hover&&(e.hover(this,t),!t.isDefaultPrevented())?(this._activePoint=e,(s=p({},s,e.options.tooltip)).visible&&i.show(e),n.show(e),!0):void 0},_mouseover:function(e){this._startHover(e)&&t(document).on("mousemove.tracking",a(this._mouseMoveTracking,this))},_mouseMoveTracking:function(e){var i,n=this.options,s=this._tooltip,r=this._highlight,o=this._eventCoordinates(e),a=this._activePoint;this._plotArea.box.containsPoint(o)?a&&a.series&&j(a.series.type,["line","area"])&&(i=a.parent.getNearestPoint(o.x,o.y,a.seriesIx))&&i!=a&&(i.hover(this,e),this._activePoint=i,p({},n.tooltip,a.options.tooltip).visible&&s.show(i),r.show(i)):(t(document).off("mousemove.tracking"),this._unsetActivePoint())},_mousemove:function(t){var e=new Date,i=this._mousemove.timestamp;if(!i||e-i>20){var n=this._eventCoordinates(t);this._trackCrosshairs(n),this._sharedTooltip()&&this._trackSharedTooltip(n),this._mousemove.timestamp=e}},_trackCrosshairs:function(t){var e,i,n=this._plotArea.crosshairs;for(e=0;e<n.length;e++)(i=n[e]).box.containsPoint(t)?i.showAt(t):i.hide()},_trackSharedTooltip:function(t){var e,i,n=this.options,s=this._plotArea,r=s.categoryAxis,o=this._tooltip,a=n.tooltip,h=this._highlight;s.box.containsPoint(t)&&(e=r.pointCategoryIndex(t))!==this._tooltipCategoryIx&&((i=s.pointsByCategoryIndex(e)).length>0?(a.visible&&o.showAt(i,t),h.show(i)):o.hide(),this._tooltipCategoryIx=e)},_mouseleave:function(t){var e,i=this._plotArea.crosshairs,n=this._tooltip,s=this._highlight;if(t.relatedTarget){for(e=0;e<i.length;e++)i[e].hide();setTimeout(a(n.hide,n),100),s.hide(),this._tooltipCategoryIx=null}},_unsetActivePoint:function(){var t=this._tooltip,e=this._highlight;this._activePoint=null,t&&t.hide(),e&&e.hide()},_onDataChanged:function(){var t,e,i=this.options,n=this._sourceSeries||i.series,s=n.length,r=this.dataSource.view(),o=(this.dataSource.group()||[]).length>0,a=[];for(t=0;t<s;t++)e=n[t],this._isBindable(e)&&o?N(a,xi(e,r)):a.push(e||[]);this._sourceSeries=n,i.series=a,Xe(this.options),this._bindSeries(),this._bindCategories(),this.trigger("dataBound"),this._redraw()},_bindSeries:function(){var t,e,i,n,s=this.dataSource.view(),r=this.options.series,o=r.length;for(t=0;t<o;t++)e=r[t],this._isBindable(e)&&(i=e._groupIx,n=F(i)?(s[i]||{}).items:s,!1!==e.autoBind&&(e.data=n))},_bindCategories:function(){var t,e,i=this.dataSource.view()||[],n=(this.dataSource.group()||[]).length>0,s=i,r=this.options,o=[].concat(r.categoryAxis);for(n&&i.length&&(s=i[0].items),t=0;t<o.length;t++)!1!==(e=o[t]).autoBind&&this._bindCategoryAxis(e,s,t)},_bindCategoryAxis:function(t,e,i){var n,s,r,o=(e||[]).length;if(t.field)for(t.categories=[],n=0;n<o;n++)r=e[n],s=Je(t.field,r),0===n?(t.categories=[s],t.dataItems=[r]):(t.categories.push(s),t.dataItems.push(r));else this._bindCategoryAxisFromSeries(t,i)},_bindCategoryAxisFromSeries:function(t,e){var i,n,s,r,o,a,h,l,c,d,u,p=[],f=this.options.series,g=f.length,m={};for(n=0;n<g;n++)if(r=(s=f[n]).categoryAxis===t.name||!s.categoryAxis&&0===e,h=(o=s.data).length,s.categoryField&&r&&h>0)for(d=(u=Ti(t,Je(s.categoryField,o[0])))?ti:Je,a=0;a<h;a++)l=o[a],c=d(s.categoryField,l),!u&&m[c]||(p.push([c,l]),u||(m[c]=!0));p.length>0&&(u&&(p=Si(p,(function(t,e){return H(t[0],e[0])}))),i=Pi(p),t.categories=i[0],t.dataItems=i[1])},_isBindable:function(t){var e,i,n=Et.current.valueFields(t),s=!0;for(i=0;i<n.length;i++)if((e=n[i])===kt?e="field":e+="Field",!F(t[e])){s=!1;break}return s},_legendItemClick:function(t,e){var i,n,s,r=this._plotArea,o=(r.srcSeries||r.series)[t],a=(this._sourceSeries||[])[t]||o;j(o.type,[bt,"donut","funnel"])?(s=a.data[e],n=!!F(s.visible)&&!s.visible,s.visible=n):(n=!a.visible,a.visible=n,o.visible=n),this.options.transitions&&(this.options.transitions=!1,i=!0),this.redraw(),i&&(this.options.transitions=!0)},_legendItemHover:function(t,e){var i,n,s=this._plotArea,r=this._highlight,o=(s.srcSeries||s.series)[t];i=j(o.type,[bt,"donut","funnel"])?e:t,n=s.pointsBySeriesIndex(i),r.show(n)},_shouldAttachMouseMove:function(){return this._plotArea.crosshairs.length||this._tooltip&&this._sharedTooltip()},setOptions:function(e){this._originalOptions=p(this._originalOptions,e),this.options=p({},this._originalOptions),this._sourceSeries=null,t(document).off("mousemove.kendoChart"),u.fn._setEvents.call(this,e),this._initTheme(this.options),e.dataSource&&this.setDataSource(d.create(e.dataSource)),this._shouldAttachMouseMove()&&this.element.on("mousemove.kendoChart",a(this._mousemove,this)),this.options.dataSource?this.refresh():this.redraw()},destroy:function(){var e=this.dataSource;this.element.off(J),e.unbind("change",this._dataChangeHandler),t(document).off("mousemove.tracking"),this._userEvents&&this._userEvents.destroy(),this._destroyView(),u.fn.destroy.call(this)},_destroyView:function(){var t=this._model,e=this._view,i=this._selections;if(t&&(t.destroy(),this._model=null),e&&(e.destroy(),this._view=null),i)for(;i.length>0;)i.shift().destroy()}});p(zt.fn,v.ExportMixin);var Dt=l.extend({init:function(){this._registry=[]},register:function(t,e){this._registry.push({type:t,seriesTypes:e})},create:function(t,e){var i,n,s,r=this._registry,o=r[0];for(i=0;i<r.length;i++)if((s=_i(t,(n=r[i]).seriesTypes)).length>0){o=n;break}return new o.type(s,e)}});Dt.current=new Dt;var Et=l.extend({init:function(){this._valueFields={},this._otherFields={},this._nullValue={},this._undefinedValue={}},register:function(t,e,i){var n,s;for(e=e||[kt],n=0;n<t.length;n++)s=t[n],this._valueFields[s]=e,this._otherFields[s]=i,this._nullValue[s]=this._makeValue(e,null),this._undefinedValue[s]=this._makeValue(e,void 0)},canonicalFields:function(t){return this.valueFields(t).concat(this.otherFields(t))},valueFields:function(t){return this._valueFields[t.type]||[kt]},otherFields:function(t){return this._otherFields[t.type]||[kt]},bindPoint:function(t,e){var i,s,r,o,a,h=t.data[e],l={valueFields:{value:h}},c=this.valueFields(t),d=this._otherFields[t.type];return null===h?a=this._nullValue[t.type]:F(h)?n(h)?(s=h.slice(c.length),a=this._bindFromArray(h,c),i=this._bindFromArray(s,d)):"object"===_typeof(h)&&(r=this.sourceFields(t,c),o=this.sourceFields(t,d),a=this._bindFromObject(h,c,r),i=this._bindFromObject(h,d,o)):a=this._undefinedValue[t.type],F(a)&&(1===c.length?l.valueFields.value=a[c[0]]:l.valueFields=a),l.fields=i||{},l},_makeValue:function(t,e){var i,n={},s=t.length;for(i=0;i<s;i++)n[t[i]]=e;return n},_bindFromArray:function(t,e){var i,n,s={};if(e)for(n=r.min(e.length,t.length),i=0;i<n;i++)s[e[i]]=t[i];return s},_bindFromObject:function(t,e,i){var n,s,r,o,a={};if(e)for(s=e.length,i=i||e,n=0;n<s;n++)r=e[n],o=i[n],a[r]=Je(o,t);return a},sourceFields:function(t,e){var i,n,s,r,o;if(e)for(n=e.length,r=[],i=0;i<n;i++)o=(s=e[i])===kt?"field":s+"Field",r.push(t[o]||s);return r}});Et.current=new Et;var Mt=k.extend({init:function(t,e){k.fn.init.call(this,e),this.append(new B(t,this.options))},options:{position:"outsideEnd",margin:$(3),padding:$(4),color:"#000",background:"",border:{width:1,color:""},aboveAxis:!0,vertical:!1,animation:{type:"fadeIn",delay:ut},zIndex:1},reflow:function(t){var e=this.options,i=e.vertical,n=e.aboveAxis,s=this.children[0],r=s.box,o=s.options.padding;s.options.align=i?nt:pt,s.options.vAlign=i?_t:nt,"insideEnd"==e.position?i?(s.options.vAlign=_t,!n&&r.height()<t.height()&&(s.options.vAlign=it)):s.options.align=n?wt:pt:e.position==nt?(s.options.vAlign=nt,s.options.align=nt):"insideBase"==e.position?i?s.options.vAlign=n?it:_t:s.options.align=n?pt:wt:"outsideEnd"==e.position&&(i?t=n?new x(t.x1,t.y1-r.height(),t.x2,t.y1):new x(t.x1,t.y2,t.x2,t.y2+r.height()):(s.options.align=nt,t=n?new x(t.x2+r.width(),t.y1,t.x2,t.y2):new x(t.x1-r.width(),t.y1,t.x1,t.y2))),i?o.left=o.right=(t.width()-s.contentBox.width())/2:o.top=o.bottom=(t.height()-s.contentBox.height())/2,s.reflow(t)},alignToClipBox:function(t){var e,i=this.options.vertical?St:Ct,n=i+"1",s=i+"2",r=this.children[0],o=r.paddingBox;o[s]<t[n]?e=t[n]-o[s]:t[s]<o[n]&&(e=t[s]-o[n]),F(e)&&(o[n]+=e,o[s]+=e,r.reflow(o))},getViewElements:function(t){var e=[];return!1!==this.options.visible&&(e=k.fn.getViewElements.call(this,t)),e}}),Lt=I.extend({init:function(t,e){this.item=t,I.fn.init.call(this,t.text,p({id:Z(),cursor:{style:"pointer"}},e)),this.enableDiscovery()},click:function(t,e){var i=this.eventArgs(e);t.trigger("legendItemClick",i)||(e.preventDefault(),t._legendItemClick(i.seriesIndex,i.pointIndex))},hover:function(t,e){var i=this.eventArgs(e);t.trigger("legendItemHover",i)||(e.preventDefault(),t._legendItemHover(i.seriesIndex,i.pointIndex))},leave:function(t){t._unsetActivePoint()},eventArgs:function(e){var i=this.item;return{element:t(e.target),text:i.text,series:i.series,seriesIndex:i.series.index,pointIndex:i.pointIndex}}}),It=k.extend({init:function(t){k.fn.init.call(this,t),this.createLabels()},options:{position:wt,items:[],labels:{},offsetX:0,offsetY:0,margin:$(10),padding:$(5),border:{color:"#000",width:0},background:"",zIndex:1,markers:{border:{width:1}}},createLabels:function(){var t,e,i=this.options.items,n=i.length;for(t=0;t<n;t++)e=i[t],this.append(new Lt(e,p({},this.options.labels,{color:e.labelColor})))},reflow:function(t){var e=this.options;0!==this.children.length?"custom"!=e.position?e.position==_t||e.position==it?this.horizontalLayout(t):this.verticalLayout(t):this.customLayout(t):this.box=t.clone()},getViewElements:function(t){var e,i,n,s,r,o,a,h=this.children,l=this.options,c=l.items,d=c.length,u=this.markerSize(),p=t.createGroup({zIndex:l.zIndex}),f=l.border||{};for(N(p.children,k.fn.getViewElements.call(this,t)),a=0;a<d;a++)s=c[a].markerColor,r=h[a],i=x(),o=r.box,n=n?n.wrap(o):o.clone(),i.x1=o.x1-2*u,i.x2=i.x1+u,l.position==_t||l.position==it?i.y1=o.y1+u/2:i.y1=o.y1+(o.height()-u)/2,i.y2=i.y1+u,p.children.push(t.createRect(i,{fill:s,stroke:s,strokeWidth:l.markers.border.width,data:{modelId:r.modelId},cursor:{style:"pointer"}}));return h.length>0&&((e=$(l.padding)).left+=2*u,n.pad(e),p.children.unshift(t.createRect(n,{stroke:f.width?f.color:"",strokeWidth:f.width,dashType:f.dashType,fill:l.background}))),[p]},verticalLayout:function(t){var e,i,n,s,o=this.options,a=this.children,h=a.length,l=a[0].box.clone(),c=$(o.margin),d=2*this.markerSize();for(s=1;s<h;s++)(n=this.children[s]).box.alignTo(this.children[s-1].box,it),l.wrap(n.box);o.position==pt?(e=t.x1+d+c.left,i=(t.y2-l.height())/2,l.x2+=d+c.left+c.right):(e=t.x2-l.width()-c.right,i=(t.y2-l.height())/2,l.translate(e,i),l.x1-=d+c.left),this.translateChildren(e+o.offsetX,i+o.offsetY);var u=l.width();l.x1=r.max(t.x1,l.x1),l.x2=l.x1+u,l.y1=t.y1,l.y2=t.y2,this.box=l},horizontalLayout:function(t){var e,i,n,s,r=this.options,o=this.children,a=o.length,h=o[0].box.clone(),l=3*this.markerSize(),c=$(r.margin),d=o[0].box.width()+l,u=t.width(),p=0;for(s=1;s<a;s++)(d+=(n=o[s]).box.width()+l)>u-l?(n.box=x(h.x1,h.y2,h.x1+n.box.width(),h.y2+n.box.height()),d=n.box.width()+l,p=n.box.y1):(n.box.alignTo(o[s-1].box,wt),n.box.y2=p+n.box.height(),n.box.y1=p,n.box.translate(l,0)),h.wrap(n.box);e=(t.width()-h.width()+l)/2,r.position===_t?(i=t.y1+c.top,h.y2=t.y1+h.height()+c.top+c.bottom,h.y1=t.y1):(i=t.y2-h.height()-c.bottom,h.y1=t.y2-h.height()-c.top-c.bottom,h.y2=t.y2),this.translateChildren(e+r.offsetX,i+r.offsetY),h.x1=t.x1,h.x2=t.x2,this.box=h},customLayout:function(t){var e,i=this.options,n=this.children,s=n.length,r=n[0].box.clone(),o=2*this.markerSize();for(e=1;e<s;e++)(r=this.children[e].box).alignTo(this.children[e-1].box,it),r.wrap(r);this.translateChildren(i.offsetX+o,i.offsetY),this.box=t},markerSize:function(){var t=this.children;return t.length>0?t[0].box.height()/2:0}}),Bt=y.extend({init:function(t){y.fn.init.call(this,t),(t=this.options).categories=t.categories.slice(0),this._ticks={}},options:{type:"category",categories:[],vertical:!1,majorGridLines:{visible:!1,width:1,color:"#000"},zIndex:1,justified:!1},range:function(){return{min:0,max:this.options.categories.length}},getTickPositions:function(t){var e,i=this.options,n=i.vertical,s=i.justified,r=this.lineBox(),o=(n?r.height():r.width())/(t-(s?1:0)),a=n?St:Ct,h=r[a+1],l=[];for(e=0;e<t;e++)l.push(Q(h,rt)),h+=o;return s||l.push(r[a+2]),i.reverse?l.reverse():l},getMajorTickPositions:function(){return this.getTicks().majorTicks},getMinorTickPositions:function(){return this.getTicks().minorTicks},getTicks:function(){var t,e=this._ticks,i=this.options,n=i.categories.length,s=i.reverse,r=i.justified;return t=this.lineBox().getHash()+n+s+r,e._hash!==t&&(e._hash=t,e.majorTicks=this.getTickPositions(n),e.minorTicks=this.getTickPositions(2*n)),e},getSlot:function(t,e){var i,n,s=this.options,o=this.getTicks().majorTicks,a=s.reverse,h=s.justified,l=s.vertical?St:Ct,c=this.lineBox(),d=c[l+(a?2:1)],u=c[l+(a?1:2)],p=c.clone(),f=r.max(1,o.length-(h?0:1)),g=!F(e);return t=K(t,0),e=K(e,t),t=q(t,0,f),e=q(e-1,t,f),e=r.max(t,e),i=0===t?d:o[t]||u,n=h?i:o[e],(e-t>0||t===e)&&(n=o[e+1]||u),g&&h&&(t===f?i=n:n=i),p[l+1]=a?n:i,p[l+2]=a?i:n,p},pointCategoryIndex:function(t){var e,i,n,s,o=this.options,a=o.reverse,h=o.vertical,l=h?St:Ct,c=this.lineBox(),d=c[l+1],u=c[l+2],p=t[l],f=this.getMajorTickPositions(),g=ft;if(p<d||p>u)return null;for(n=0;n<f.length;n++)if(e=f[n],i=f[n+1],F(i)||(i=a?d:u),a&&(e=i,i=f[n]),o.justified){if(p===i){s=r.max(0,h?f.length-n-1:n+1);break}r.abs(p-e)<g&&(g=p-e,s=n)}else if(p>=e&&p<=i){s=n;break}return s},getCategory:function(t){var e=this.pointCategoryIndex(t);return null===e?null:this.options.categories[e]},categoryIndex:function(t){return ki(t,this.options.categories)},translateRange:function(t){var e=this.options,i=this.lineBox(),n=e.vertical?i.height():i.width(),s=e.categories.length,r=Q(t/(n/s),ct);return{min:r,max:s+r}},scaleRange:function(t){var e=this.options.categories.length,i=t*e;return{min:-i,max:e+i}},labelsCount:function(){return this.options.categories.length},createAxisLabel:function(t,e){var i=this.options,n=i.dataItems?i.dataItems[t]:null,s=K(i.categories[t],""),r=this.axisLabelText(s,n,e);return new b(s,r,t,n,e)},shouldRenderNote:function(t){var e=this.options.categories;return e.length&&e.length>t&&t>=0}}),Rt=Bt.extend({init:function(t){var e;(t=p({roundToBaseUnit:!0},t=t||{},{categories:ei(t.categories),min:ei(t.min),max:ei(t.max)})).categories&&t.categories.length>0?("fit"!==(e=(t.baseUnit||"").toLowerCase())&&!j(e,Tt)&&(t.baseUnit=this.defaultBaseUnit(t)),"fit"!==e&&"auto"!==t.baseUnitStep||this.autoBaseUnit(t),this.groupCategories(t)):t.baseUnit=t.baseUnit||at,Bt.fn.init.call(this,t)},options:{type:ot,labels:{dateFormats:At},autoBaseUnitSteps:{seconds:[1,2,5,15,30],minutes:[1,2,5,15,30],hours:[1,2,3],days:[1,2,3],weeks:[1,2],months:[1,2,3,6],years:[1,2,3,5,10,25,50]},maxDateGroups:10},shouldRenderNote:function(t){var e=this.range(),i=this.options.categories||[];return H(t,e.min)>=0&&H(t,e.max)<=0&&i.length},parseNoteValue:function(t){return ei(t)},translateRange:function(t){var e,i,n=this.options,s=n.baseUnit,r=n.weekStartDay,o=this.lineBox(),a=n.vertical?o.height():o.width(),h=this.range(),l=a/(h.max-h.min),c=Q(t/l,ct);return h.min&&h.max&&(e=hi(n.min||h.min,c),i=hi(n.max||h.max,c),h={min:ni(e,0,s,r),max:ni(i,0,s,r)}),h},scaleRange:function(t){var e,i=r.abs(t),n=this.range(),s=n.min,o=n.max;if(n.min&&n.max){for(;i--;)n=ai(s,o),e=r.round(.1*n),t<0?(s=hi(s,e),o=hi(o,-e)):(s=hi(s,-e),o=hi(o,e));n={min:s,max:o}}return n},defaultBaseUnit:function(t){var e,i,n,s,o,a=t.categories,h=F(a)?a.length:0,l=ft;for(e=0;e<h;e++)(i=a[e])&&s&&(n=ai(i,s))>0&&(o=(l=r.min(l,n))>=31536e6?"years":l>=24192e5?"months":l>=6048e5?"weeks":l>=864e5?at:l>=36e5?"hours":l>=6e4?"minutes":"seconds"),s=i;return o||at},_categoryRange:function(t){var e=t._range;return e||(e=t._range=qe(t)),e},range:function(t){var e=(t=t||this.options).categories,i="fit"===t.baseUnit?Tt[0]:t.baseUnit,n=t.baseUnitStep||1,s=ii(t.min),r=ii(t.max),o=this._categoryRange(e),a=ii(o.min),h=ii(o.max);return t.roundToBaseUnit?{min:ni(s||a,0,i,t.weekStartDay),max:ni(r||h,n,i,t.weekStartDay)}:{min:ei(s||a),max:ei(r||this._srcMaxDate||h)}},autoBaseUnit:function(t){for(var e,i,n,s=this.range(p({},t,{baseUnitStep:1})),o="fit"===t.baseUnit,a=0,h=o?Tt[a++]:t.baseUnit,l=s.max-s.min,c=l/xt[h],d=c,u=t.maxDateGroups||this.options.maxDateGroups,f=p({},this.options.autoBaseUnitSteps,t.autoBaseUnitSteps);!i||c>u;)if(n=(e=e||f[h].slice(0)).shift())c=d/(i=n);else{if(h===W(Tt)){i=r.ceil(d/u);break}if(!o){c>u&&(i=r.ceil(d/u));break}h=Tt[a++]||W(Tt),d=l/xt[h],e=null}t.baseUnitStep=i,t.baseUnit=h},_timeScale:function(){var t,e=this.range(),i=this.options,n=this.lineBox(),s=i.vertical?n.height():n.width();i.justified&&!1!==i._collapse?t=ei(ii(this._categoryRange(i.categories).max))-e.min:t=e.max-e.min;return s/t},getTickPositions:function(t){var e=this.options,i=e.categories,n=[];if(e.roundToBaseUnit||0===i.length)n=Bt.fn.getTickPositions.call(this,t);else{var s,r=e.vertical,o=e.reverse,a=this.lineBox(),h=i[0].getTime(),l=K(e._collapse,e.justified),c=i.length-(l?1:0),d=this._timeScale(),u=(r?-1:1)*(o?-1:1),p=1===u?2:1,f=a[(r?St:Ct)+(1===u?1:2)],g=a[(r?St:Ct)+p],m=f;for(s=0;s<c;s++)m=f+(i[s]-h)*d*u,n.push(Q(m,rt));W(n)!==g&&n.push(g)}return n},groupCategories:function(t){var e,i,n=t.categories,s=ei(We(n)),r=t.baseUnit,o=t.baseUnitStep||1,a=this.range(t),h=a.max,l=[];for(e=a.min;e<h&&(l.push(e),!((i=ni(e,o,r,t.weekStartDay))>s)||t.max);e=i);t.roundToBaseUnit||pi(W(l),h)||(h<i&&!1!==t._collapse?this._srcMaxDate=h:l.push(h)),t.srcCategories=n,t.categories=l},createAxisLabel:function(t,e){var i=this.options,n=i.dataItems?i.dataItems[t]:null,s=i.categories[t],r=i.baseUnit,o=!0,a=e.dateFormats[r];i.justified?o=pi(ri(s,r,i.weekStartDay),s):i.roundToBaseUnit||(o=!pi(this.range().max,s));if(o){e.format=e.format||a;var h=this.axisLabelText(s,n,e);if(h)return new b(s,h,t,n,e)}},categoryIndex:function(t,e){var i,n=this.options,s=n.categories;return t=ei(t),e=e||this.range(),i=n.roundToBaseUnit&&pi(e.max,t),!t||t>e.max||t<e.min||i?-1:gi(t,s)},getSlot:function(t,e){return"object"===_typeof(t)&&(t=this.categoryIndex(t)),"object"===_typeof(e)&&(e=this.categoryIndex(e)),Bt.fn.getSlot.call(this,t,e)}}),Ot=y.extend({init:function(t,e,i){p(i=i||{},{min:ei(i.min),max:ei(i.max),axisCrossingValue:ei(i.axisCrossingValues||i.axisCrossingValue)}),i=this.applyDefaults(ei(t),ei(e),i),y.fn.init.call(this,i)},options:{type:ot,labels:{dateFormats:At}},applyDefaults:function(t,e,i){var n=i.min||t,s=i.max||e,o=i.baseUnit||this.timeUnits(s-n),a=xt[o],h=ri(ii(n)-1,o)||ei(s),l=oi(ii(s)+1,o),c=(i.majorUnit?i.majorUnit:void 0)||v.ceil(v.autoMajorUnit(h.getTime(),l.getTime()),a)/a,d=li(h,l,o),u=v.ceil(d,c)-d,f=r.floor(u/2),g=u-f;return i.baseUnit||delete i.baseUnit,p({baseUnit:o,min:ni(h,-f,o),max:ni(l,g,o),minorUnit:c/5},i,{majorUnit:c})},range:function(){var t=this.options;return{min:t.min,max:t.max}},getDivisions:function(t){var e=this.options;return r.floor(li(e.min,e.max,e.baseUnit)/t+1)},getTickPositions:function(t){var e,i=this.options,n=i.vertical,s=i.reverse,r=this.lineBox(),o=t*((n?r.height():r.width())/li(i.min,i.max,i.baseUnit)),a=this.getDivisions(t),h=(n?-1:1)*(s?-1:1),l=r[(n?St:Ct)+(1===h?1:2)],c=[];for(e=0;e<a;e++)c.push(Q(l,rt)),l+=o*h;return c},getMajorTickPositions:function(){return this.getTickPositions(this.options.majorUnit)},getMinorTickPositions:function(){return this.getTickPositions(this.options.minorUnit)},getSlot:function(t,e,i){return z.fn.getSlot.call(this,ei(t),ei(e),i)},getValue:function(t){var e=z.fn.getValue.call(this,t);return null!==e?ei(e):null},labelsCount:function(){return this.getDivisions(this.options.majorUnit)},createAxisLabel:function(t,e){var i=this.options,n=t*i.majorUnit,s=ni(i.min,n,i.baseUnit),r=e.dateFormats[i.baseUnit];e.format=e.format||r;var o=this.axisLabelText(s,null,e);return new b(s,o,t,null,e)},timeUnits:function(t){var e="hours";return t>=31536e6?e="years":t>=26784e5?e="months":t>=6048e5?e="weeks":t>=864e5&&(e=at),e},translateRange:function(t){var e=this.options,i=e.baseUnit,n=e.weekStartDay,s=this.lineBox(),r=e.vertical?s.height():s.width(),o=this.range(),a=r/(o.max-o.min),h=Q(t/a,ct),l=hi(e.min,h),c=hi(e.max,h);return{min:ni(l,0,i,n),max:ni(c,0,i,n)}},scaleRange:function(t){for(var e,i,n=this.options,s=r.abs(t),o=n.min,a=n.max;s--;)e=ai(o,a),i=r.round(.1*e),t<0?(o=hi(o,i),a=hi(a,-i)):(o=hi(o,-i),a=hi(a,i));return{min:o,max:a}},shouldRenderNote:function(t){var e=this.range();return H(t,e.min)>=0&&H(t,e.max)<=0}}),Nt=k.extend({options:{vertical:!1,gap:0,spacing:0},reflow:function(t){var e,i,n=this.options,s=n.vertical,r=s?St:Ct,o=this.children,a=n.gap,h=n.spacing,l=o.length,c=l+a+h*(l-1),d=(s?t.height():t.width())/c,u=t[r+1]+d*(a/2);for(i=0;i<l;i++)(e=(o[i].box||t).clone())[r+1]=u,e[r+2]=u+d,o[i].reflow(e),i<l-1&&(u+=d*h),u+=d}}),Vt=k.extend({options:{vertical:!0},reflow:function(t){var e,i=this.options.vertical,n=i?Ct:St,s=t[(i?St:Ct)+2],r=this.children,o=this.box=new x,a=r.length;for(e=0;e<a;e++){var h,l=r[e];!1!==l.visible&&((h=l.box.clone()).snapTo(t,n),l.options&&(l.options.stackBase=s),0===e&&(o=this.box=h.clone()),l.reflow(h),o.wrap(h))}}}),Ft={click:function(e,i){e.trigger("seriesClick",{value:this.value,percentage:this.percentage,category:this.category,series:this.series,dataItem:this.dataItem,element:t(i.target)})},hover:function(e,i){e.trigger("seriesHover",{value:this.value,percentage:this.percentage,category:this.category,series:this.series,dataItem:this.dataItem,element:t(i.target)})}},Ht={createNote:function(){var t=this.options.notes,e=this.noteText||t.label.text;!1!==t.visible&&F(e)&&null!==e&&(this.note=new P(this.value,e,this.dataItem,this.category,this.series,this.options.notes),this.append(this.note))}},Ut=k.extend({init:function(t,e){k.fn.init.call(this),this.options=e,this.color=e.color||"#fff",this.aboveAxis=K(this.options.aboveAxis,!0),this.value=t,this.id=Z(),this.enableDiscovery()},defaults:{border:{width:1},vertical:!0,overlay:{gradient:"glass"},labels:{visible:!1},animation:{type:et},opacity:1,notes:{label:{}}},render:function(){var t=this,e=t.value,i=t.options,n=i.labels,s=null!==e?e:"";t._rendered||(t._rendered=!0,n.visible&&(n.template?s=m(n.template)({dataItem:t.dataItem,category:t.category,value:t.value,percentage:t.percentage,series:t.series}):n.format&&(s=V(n.format,s)),t.label=new Mt(s,p({vertical:i.vertical,id:Z()},i.labels)),t.append(t.label)),t.createNote(),t.errorBar&&t.append(t.errorBar))},reflow:function(t){this.render();this.options;var e=this.label;if(this.box=t,e&&(e.options.aboveAxis=this.aboveAxis,e.reflow(t)),this.note&&this.note.reflow(t),this.errorBars)for(var i=0;i<this.errorBars.length;i++)this.errorBars[i].reflow(t)},getViewElements:function(t){var e=this.options,i=e.vertical,n=e.border.width>0?{stroke:this.getBorderColor(),strokeWidth:e.border.width,strokeOpacity:e.border.opacity,dashType:e.border.dashType}:{},s=this.box,r=p({id:this.id,fill:this.color,fillOpacity:e.opacity,strokeOpacity:e.opacity,vertical:e.vertical,aboveAxis:this.aboveAxis,stackBase:e.stackBase,animation:e.animation,data:{modelId:this.modelId}},n),o=[];return!1!==this.visible&&(s.width()>0&&s.height()>0&&(e.overlay&&(r.overlay=p({rotation:i?0:90},e.overlay)),o.push(t.createRect(s,r))),N(o,k.fn.getViewElements.call(this,t))),o},highlightOverlay:function(t,e){var i=this.box;return e=p({data:{modelId:this.modelId}},e),t.createRect(i,e)},getBorderColor:function(){var t=this.options,e=this.color,i=t.border,n=i.color,s=i._brightness||.8;return F(n)||(n=new C(e).brightness(s).toHex()),n},tooltipAnchor:function(t,e){var i,n,s=this.options,o=this.box,a=s.vertical,h=this.aboveAxis,l=this.owner.pane.clipBox()||o;if(a)i=o.x2+5,n=h?r.max(o.y1,l.y1):r.min(o.y2,l.y2)-e;else{var c=r.max(o.x1,l.x1),d=r.min(o.x2,l.x2);s.isStacked?(i=h?d-t:c,n=o.y1-e-5):(i=h?d+5:c-t-5,n=o.y1)}return new D(i,n)},formatValue:function(t){return this.owner.formatPointValue(this,t)}});p(Ut.fn,Ft),p(Ut.fn,Ht);var $t=function(t,e,i){this.errorValue=t,this.initGlobalRanges(t,e,i)};$t.prototype=$t.fn={percentRegex:/percent(?:\w*)\((\d+)\)/,standardDeviationRegex:new RegExp("^stddev(?:\\((\\d+(?:\\.\\d+)?)\\))?$"),initGlobalRanges:function(t,e,i){var n=e.data,s=this.standardDeviationRegex.exec(t);if(s){this.valueGetter=this.createValueGetter(e,i);var r=this.getAverage(n),o=this.getStandardDeviation(n,r,!1),a=s[1]?parseFloat(s[1]):1,h={low:r-o*a,high:r+o*a};this.globalRange=function(){return h}}else if(t.indexOf&&t.indexOf("stderr")>=0){this.valueGetter=this.createValueGetter(e,i);var l=this.getStandardError(n);this.globalRange=function(t){return{low:t-l,high:t+l}}}},createValueGetter:function(t,e){var i,s,r,o=t.data,a=Et.current,h=a.valueFields(t),l=F(o[0])?o[0]:{};return n(l)?(i=e?ki(e,h):0,r=f("["+i+"]")):mi(l)?r=f():"object"===_typeof(l)&&(s=a.sourceFields(t,h),r=f(s[ki(e,h)])),r},getErrorRange:function(t){var e,i,s,o=this.errorValue;if(F(o)){if(this.globalRange)return this.globalRange(t);if(n(o))e=t-o[0],i=t+o[1];else if(mi(s=parseFloat(o)))e=t-s,i=t+s;else{if(!(s=this.percentRegex.exec(o)))throw new Error("Invalid ErrorBar value: "+o);var a=t*(parseFloat(s[1])/100);e=t-r.abs(a),i=t+r.abs(a)}return{low:e,high:i}}},getStandardError:function(t){return this.getStandardDeviation(t,this.getAverage(t),!0)/r.sqrt(t.length)},getStandardDeviation:function(t,e,i){for(var n=0,s=t.length,o=i?s-1:s,a=0;a<s;a++)n+=r.pow(this.valueGetter(t[a])-e,2);return r.sqrt(n/o)},getAverage:function(t){for(var e=0,i=t.length,n=0;n<i;n++)e+=this.valueGetter(t[n]);return e/i}};var jt=k.extend({init:function(t,e){k.fn.init.call(this,e),this.plotArea=t,this.categoryAxis=t.seriesCategoryAxis(e.series[0]),this.valueAxisRanges={},this.points=[],this.categoryPoints=[],this.seriesPoints=[],this.seriesOptions=[],this._evalSeries=[],this.render()},options:{series:[],invertAxes:!1,isStacked:!1,clip:!0},render:function(){this.traverseDataPoints(a(this.addValue,this))},pointOptions:function(t,e){var i=this.seriesOptions[e];if(!i){var n=this.pointType().fn.defaults;this.seriesOptions[e]=i=p({},n,{vertical:!this.options.invertAxes},t)}return i},plotValue:function(t){if(this.options.isStacked100&&mi(t.value)){for(var e=t.categoryIx,i=this.categoryPoints[e],n=0,s=0;s<i.length;s++){var o=i[s],a=t.series.stack,h=o.series.stack;a&&h&&a.group!==h.group||mi(o.value)&&(n+=r.abs(o.value))}return t.value/n}return t.value},plotRange:function(t,e){var i=t.categoryIx,n=this.categoryPoints[i];if(this.options.isStacked){e=e||0;for(var s=this.plotValue(t),r=s>0,o=e,a=!1,h=0;h<n.length;h++){var l=n[h];if(t===l)break;var c=t.series.stack,d=l.series.stack;if(c&&d){if("string"===_typeof(c)&&c!==d)continue;if(c.group&&c.group!==d.group)continue}var u=this.plotValue(l);(u>0&&r||u<0&&!r)&&(o+=u,s+=u,a=!0)}return a&&(o-=e),[o,s]}var p=t.series,f=this.seriesValueAxis(p),g=this.categoryAxisCrossingValue(f);return[g,t.value||g]},plotLimits:function(){for(var t=ft,e=gt,i=0;i<this.categoryPoints.length;i++)for(var n=this.categoryPoints[i],s=0;s<n.length;s++){var o=n[s];if(o){var a=this.plotRange(o,0)[1];F(a)&&(e=r.max(e,a),t=r.min(t,a))}}return{min:t,max:e}},computeAxisRanges:function(){var t,e;this.options.isStacked&&(t=this.options.series[0].axis,e=this.plotLimits(),this.errorTotals&&(e.min=r.min(e.min,qe(this.errorTotals.negative).min),e.max=r.max(e.max,We(this.errorTotals.positive))),this.valueAxisRanges[t]=e)},addErrorBar:function(t,e,i){var n,s=t.value,r=t.series,o=t.seriesIx,a=t.options.errorBars,h=e.fields.errorLow,l=e.fields.errorHigh;mi(h)&&mi(l)?n={low:h,high:l}:a&&F(a.value)&&(this.seriesErrorRanges=this.seriesErrorRanges||[],this.seriesErrorRanges[o]=this.seriesErrorRanges[o]||new $t(a.value,r,kt),n=this.seriesErrorRanges[o].getErrorRange(s)),n&&(t.low=n.low,t.high=n.high,this.addPointErrorBar(t,i))},addPointErrorBar:function(t,e){var i,n,s=t.series,r=t.low,o=t.high,a=!this.options.invertAxes,h=t.options.errorBars;this.options.isStacked?(r=(n=this.stackedErrorRange(t,e)).low,o=n.high):(this.updateRange({value:r},e,s),this.updateRange({value:o},e,s)),i=new Xt(r,o,a,this,s,h),t.errorBars=[i],t.append(i)},stackedErrorRange:function(t,e){t.value;var i=this.plotRange(t,0)[1]-t.value,n=t.low+i,s=t.high+i;return this.errorTotals=this.errorTotals||{positive:[],negative:[]},n<0&&(this.errorTotals.negative[e]=r.min(this.errorTotals.negative[e]||0,n)),s>0&&(this.errorTotals.positive[e]=r.max(this.errorTotals.positive[e]||0,s)),{low:n,high:s}},addValue:function(t,e,i,n,s){var r,o=this.categoryPoints[i],a=this.seriesPoints[s];o||(this.categoryPoints[i]=o=[]),a||(this.seriesPoints[s]=a=[]),this.updateRange(t.valueFields,i,n),(r=this.createPoint(t,e,i,n,s))&&(r.category=e,r.categoryIx=i,r.series=n,r.seriesIx=s,r.owner=this,r.dataItem=n.data[i],r.noteText=t.fields.noteText,this.addErrorBar(r,t,i)),this.points.push(r),a.push(r),o.push(r)},evalPointOptions:function(t,e,i,n,s,r){var o={defaults:s._defaults,excluded:["data","aggregate","_events","tooltip"]},a=this._evalSeries[r];return F(a)||(this._evalSeries[r]=a=wi(t,{},o,!0)),a&&wi(t=p({},t),{value:e,category:i,index:n,series:s,dataItem:s.data[n]},o),t},updateRange:function(t,e,i){var n=i.axis,s=t.value,o=this.valueAxisRanges[n];isFinite(s)&&null!==s&&((o=this.valueAxisRanges[n]=o||{min:ft,max:gt}).min=r.min(o.min,s),o.max=r.max(o.max,s))},seriesValueAxis:function(t){var e=this.plotArea,i=t.axis,n=i?e.namedValueAxes[i]:e.valueAxis;if(!n)throw new Error("Unable to locate value axis with name "+i);return n},reflow:function(t){var e,i,n,s,r=this,o=0,a=r.categorySlots=[],h=r.points,l=r.categoryAxis;r.traverseDataPoints((function(t,c,d,u){e=r.pointValue(t),i=r.seriesValueAxis(u),n=r.categoryAxisCrossingValue(i),s=h[o++];var p=a[d];if(p||(a[d]=p=r.categorySlot(l,d,i)),s){var f=r.plotRange(s,i.startValue()),g=i.getSlot(f[0],f[1],!r.options.clip);if(g){var m=r.pointSlot(p,g),v=i.options.reverse?e<n:e>=n;s.aboveAxis=v,r.options.isStacked100&&(s.percentage=r.plotValue(s)),r.reflowPoint(s,m)}else s.visible=!1}})),r.reflowCategories(a),r.box=t},categoryAxisCrossingValue:function(t){var e=this.categoryAxis,i=t.options;return[].concat(i.axisCrossingValues||i.axisCrossingValue)[e.axisIndex||0]||0},reflowPoint:function(t,e){t.reflow(e)},reflowCategories:function(){},pointSlot:function(t,e){var i=this.options.invertAxes,n=i?e:t,s=i?t:e;return new x(n.x1,s.y1,n.x2,s.y2)},categorySlot:function(t,e){return t.getSlot(e)},traverseDataPoints:function(t){var e,i,n,s,r=this.options.series,o=this.categoryAxis.options.categories||[],a=Ze(r),h=r.length;for(e=0;e<a;e++)for(i=0;i<h;i++)s=r[i],n=o[e],t(Et.current.bindPoint(s,e),n,e,s,i)},formatPointValue:function(t,e){return V(e,t.value)},pointValue:function(t){return t.valueFields.value}}),Gt=jt.extend({init:function(t,e){jt.fn.init.call(this,t,e)},render:function(){jt.fn.render.apply(this),this.computeAxisRanges()},pointType:function(){return Ut},clusterType:function(){return Nt},stackType:function(){return Vt},plotLimits:function(){var t=jt.fn.plotLimits.call(this);return t.min=r.min(0,t.min),t.max=r.max(0,t.max),t},createPoint:function(t,e,i,n,s){var r,o,a,l=t.valueFields.value,c=this.options,d=this.children,u=this.options.isStacked,p=this.pointType(),f=this.clusterType(),g=(o=this.pointOptions(n,s)).labels;u&&"outsideEnd"==g.position&&(g.position="insideEnd"),o.isStacked=u;var m=t.fields.color||n.color;(l<0&&o.negativeColor&&(m=o.negativeColor),o=this.evalPointOptions(o,l,e,i,n,s),h.isFunction(n.color)&&(m=o.color),(r=new p(l,o)).color=m,(a=d[i])||(a=new f({vertical:c.invertAxes,gap:c.gap,spacing:c.spacing}),this.append(a)),u)?this.getStackWrap(n,a).append(r):a.append(r);return r},getStackWrap:function(t,e){var i,n=t.stack,s=n&&n.group||n,r=e.children;if("string"===_typeof(s)){for(var o=0;o<r.length;o++)if(r[o]._stackGroup===s){i=r[o];break}}else i=r[0];i||((i=new(this.stackType())({vertical:!this.options.invertAxes}))._stackGroup=s,e.append(i));return i},categorySlot:function(t,e,i){var n,s,r=this.options,o=t.getSlot(e),a=i.startValue();return r.isStacked&&(s=i.getSlot(a,a,!0),o[(n=r.invertAxes?Ct:St)+1]=o[n+2]=s[n+1]),o},reflowCategories:function(t){var e,i=this.children,n=i.length;for(e=0;e<n;e++)i[e].reflow(t[e])}}),Wt=jt.extend({init:function(t,e){this.wrapData(e),jt.fn.init.call(this,t,e)},wrapData:function(t){var e,i,s,r=t.series;for(e=0;e<r.length;e++)(i=(s=r[e]).data)&&!n(i[0])&&"object"!=_typeof(i[0])&&(s.data=[i])},reflowCategories:function(t){var e,i=this.children,n=i.length;for(e=0;e<n;e++)i[e].reflow(t[e])},plotRange:function(t){var e=t.series,i=this.seriesValueAxis(e),n=this.categoryAxisCrossingValue(i);return[n,t.value.current||n]},createPoint:function(t,e,i,n,s){var r,o,a,h=t.valueFields,l=this.options,c=this.children;return o=p({vertical:!l.invertAxes,overlay:n.overlay,categoryIx:i,invertAxes:l.invertAxes},n),o=this.evalPointOptions(o,h,e,i,n,s),r=new qt(h,o),(a=c[i])||(a=new Nt({vertical:l.invertAxes,gap:l.gap,spacing:l.spacing}),this.append(a)),a.append(r),r},updateRange:function(t,e,i){var n=i.axis,s=t.current,o=t.target,a=this.valueAxisRanges[n];F(s)&&!isNaN(s)&&F(o&&!isNaN(o))&&((a=this.valueAxisRanges[n]=a||{min:ft,max:gt}).min=r.min.apply(r,[a.min,s,o]),a.max=r.max.apply(r,[a.max,s,o]))},formatPointValue:function(t,e){return V(e,t.value.current,t.value.target)},pointValue:function(t){return t.valueFields.current}}),qt=k.extend({init:function(t,e){k.fn.init.call(this,e),this.value=t,this.aboveAxis=this.options.aboveAxis,this.id=Z(),this.enableDiscovery()},options:{color:"#fff",border:{width:1},vertical:!1,animation:{type:et},opacity:1,target:{shape:"",border:{width:0,color:"green"},line:{width:2}},tooltip:{format:"Current: {0}</br>Target: {1}"}},render:function(){var t=this.options;this._rendered||(this._rendered=!0,F(this.value.target)&&(this.target=new Yt({type:t.target.shape,background:t.target.color||t.color,opacity:t.opacity,zIndex:t.zIndex,border:t.target.border,vAlign:_t,align:wt}),this.target.id=this.id,this.append(this.target)),this.createNote())},reflow:function(t){this.render();var e,i=this.options,n=this.owner,s=this.target,r=i.invertAxes,o=n.seriesValueAxis(this.options),a=n.categorySlot(n.categoryAxis,i.categoryIx,o),h=o.getSlot(this.value.target),l=r?h:a,c=r?a:h;s&&(e=new x(l.x1,c.y1,l.x2,c.y2),s.options.height=r?e.height():i.target.line.width,s.options.width=r?i.target.line.width:e.width(),s.reflow(e)),this.note&&this.note.reflow(t),this.box=t},getViewElements:function(t){var e=this.options,i=e.vertical,n=e.border.width>0?{stroke:e.border.color||e.color,strokeWidth:e.border.width,dashType:e.border.dashType}:{},s=this.box,r=p({id:this.id,fill:e.color,fillOpacity:e.opacity,strokeOpacity:e.opacity,vertical:e.vertical,aboveAxis:this.aboveAxis,animation:e.animation,data:{modelId:this.modelId}},n),o=[];return s.width()>0&&s.height()>0&&(e.overlay&&(r.overlay=p({rotation:i?0:90},e.overlay)),o.push(t.createRect(s,r))),N(o,k.fn.getViewElements.call(this,t)),o},tooltipAnchor:function(t,e){var i,n,s=this.options,r=this.box,o=s.vertical,a=this.aboveAxis;return o?(i=r.x2+5,n=a?r.y1:r.y2-e):s.isStacked?(i=a?r.x2-t:r.x1,n=r.y1-e-5):(i=a?r.x2+5:r.x1-t-5,n=r.y1),new D(i,n)},highlightOverlay:function(t,e){var i=this.box;return e=p({data:{modelId:this.modelId}},e),t.createRect(i,e)},formatValue:function(t){return this.owner.formatPointValue(this,t)}});p(qt.fn,Ft),p(qt.fn,Ht);var Yt=L.extend();p(Yt.fn,Ft);var Qt=k.extend({init:function(t,e,i,n,s,r){this.low=t,this.high=e,this.isVertical=i,this.chart=n,this.series=s,k.fn.init.call(this,r)},getAxis:function(){},reflow:function(t){var e,i=this.options.endCaps,n=this.isVertical,s=this.getAxis().getSlot(this.low,this.high),r=t.center(),o=this.getCapsWidth(t,n),a=n?r.x:r.y,h=a-o,l=a+o;n?(e=[D(r.x,s.y1),D(r.x,s.y2)],i&&e.push(D(h,s.y1),D(l,s.y1),D(h,s.y2),D(l,s.y2))):(e=[D(s.x1,r.y),D(s.x2,r.y)],i&&e.push(D(s.x1,h),D(s.x1,l),D(s.x2,h),D(s.x2,l))),this.linePoints=e},getCapsWidth:function(t,e){var i=e?t.width():t.height();return r.min(r.floor(i/2),4)||4},getViewElements:function(t){var e,i=this.options,n=(this.parent,i.line),s={stroke:i.color,strokeWidth:n.width,zIndex:n.zIndex,align:!1,dashType:n.dashType},r=this.linePoints,o=[];for(e=0;e<r.length;e+=2)o.push(t.createLine(r[e].x,r[e].y,r[e+1].x,r[e+1].y,s));return o},options:{animation:{type:"fadeIn",delay:ut},endCaps:!0,line:{width:1,zIndex:1}}}),Xt=Qt.extend({getAxis:function(){var t=this.chart,e=this.series;return t.seriesValueAxis(e)}}),Zt=Qt.extend({getAxis:function(){var t=this.chart,e=this.series,i=t.seriesAxes(e);return this.isVertical?i.y:i.x}}),Kt=k.extend({init:function(t,e){k.fn.init.call(this),this.value=t,this.options=e,this.color=e.color,this.aboveAxis=K(this.options.aboveAxis,!0),this.id=Z(),this.enableDiscovery()},defaults:{vertical:!0,markers:{visible:!0,background:"#fff",size:8,type:"circle",border:{width:2},opacity:1},labels:{visible:!1,position:"above",margin:$(3),padding:$(4),animation:{type:"fadeIn",delay:ut}},notes:{label:{}},highlight:{markers:{border:{}}}},render:function(){var t=this.options,e=t.markers,i=t.labels,n=this.value;if(!this._rendered){if(this._rendered=!0,e.visible&&e.size&&(this.marker=this.createMarker(),this.marker.id=this.id,this.append(this.marker)),i.visible){if(i.template)n=m(i.template)({dataItem:this.dataItem,category:this.category,value:this.value,percentage:this.percentage,series:this.series});else i.format&&(n=this.formatValue(i.format));this.label=new B(n,p({id:Z(),align:nt,vAlign:nt,margin:{left:5,right:5}},i)),this.append(this.label)}this.createNote(),this.errorBar&&this.append(this.errorBar)}},markerBorder:function(){var t=this.options.markers,e=t.background,i=p({color:this.color},t.border);return F(i.color)||(i.color=new C(e).brightness(.8).toHex()),i},createMarker:function(){var t=this.options.markers;return new L({type:t.type,width:t.size,height:t.size,rotation:t.rotation,background:t.background,border:this.markerBorder(),opacity:t.opacity,zIndex:t.zIndex,animation:t.animation})},markerBox:function(){return this.marker||(this.marker=this.createMarker(),this.marker.reflow(this._childBox)),this.marker.box},reflow:function(t){var e,i,n=this.options.vertical,s=this.aboveAxis;if(this.render(),this.box=t,e=t.clone(),n?s?e.y1-=e.height():e.y2+=e.height():s?e.x1+=e.width():e.x2-=e.width(),this._childBox=e,this.marker&&this.marker.reflow(e),this.reflowLabel(e),this.errorBars)for(var r=0;r<this.errorBars.length;r++)this.errorBars[r].reflow(e);if(this.note){var o=this.markerBox();this.marker||(i=o.center(),o=x(i.x,i.y,i.x,i.y)),this.note.reflow(o)}},reflowLabel:function(t){var e=this.options,i=this.label,n=e.labels.position;i&&(n="below"===(n="above"===n?_t:n)?it:n,i.reflow(t),i.box.alignTo(this.markerBox(),n),i.reflow(i.box))},highlightOverlay:function(t,e){var i=this.options.highlight.markers,n=this.markerBorder().color;return e=p({data:{modelId:this.modelId}},e,{fill:i.color||n,stroke:i.border.color,strokeWidth:i.border.width,strokeOpacity:i.border.opacity||0,fillOpacity:i.opacity||1,visible:i.visible}),(this.marker||this.createMarker()).getViewElements(t,e)[0]},tooltipAnchor:function(t,e){var i=this.markerBox(),n=(this.options,this.aboveAxis),s=i.x2+5,r=n?i.y1-e:i.y2,o=this.owner.pane.clipBox();if(!o||o.overlaps(i))return D(s,r)},formatValue:function(t){return this.owner.formatPointValue(this,t)}});p(Kt.fn,Ft),p(Kt.fn,Ht);var Jt=Kt.extend({init:function(t,e){Kt.fn.init.call(this,t,p({},this.defaults,e)),this.category=t.category},defaults:{labels:{position:nt},highlight:{opacity:1,border:{width:1,opacity:1}}},highlightOverlay:function(t){var e=this.options,i=e.highlight,n=i.border.width,s=e.markers,r=this.box.center(),o=s.size/2-n/2,a=i.border.color||new C(s.background).brightness(.8).toHex();return t.createCircle(r,o,{id:null,data:{modelId:this.modelId},stroke:a,strokeWidth:n,strokeOpacity:i.border.opacity})},toggleHighlight:function(t){var e=this.options.highlight.opacity;this.highlighted=!this.highlighted,this.marker.getViewElements(t,{fillOpacity:this.highlighted?e:void 0})[0].refresh(U(this.id))}}),te=k.extend({init:function(t,e,i){k.fn.init.call(this),this.linePoints=t,this.series=e,this.seriesIx=i,this.id=Z(),this.enableDiscovery()},options:{closed:!1},points:function(t){var e,i,n=this.linePoints.concat(t||[]),s=[],r=n.length;for(e=0;e<r;e++)!1!==n[e].visible&&(i=n[e].markerBox().center(),s.push(D(i.x,i.y)));return s},getViewElements:function(t){var e=this.options,i=this.series,n=i._defaults,s=i.color;return k.fn.getViewElements.call(this,t),g(s)&&n&&(s=n.color),[t.createPolyline(this.points(),e.closed,{id:this.id,stroke:s,strokeWidth:i.width,strokeOpacity:i.opacity,fill:"",dashType:i.dashType,data:{modelId:this.modelId},zIndex:-1,align:!1})]},aliasFor:function(t,e){var i=this.seriesIx;return this.parent.getNearestPoint(e.x,e.y,i)}}),ee={renderSegments:function(){var t,e,i,n,s,r,o,a=this.options.series,h=this.seriesPoints,l=h.length,c=[];for(e=0;e<l;e++){for(t=a[e],o=(i=this.sortPoints(h[e])).length,n=[],r=0;r<o;r++)(s=i[r])?n.push(s):"interpolate"!==this.seriesMissingValues(t)&&(n.length>1&&c.push(this.createSegment(n,t,e,W(c))),n=[]);n.length>1&&c.push(this.createSegment(n,t,e,W(c)))}this._segments=c,this.append.apply(this,c)},sortPoints:function(t){return t},seriesMissingValues:function(t){var e=t.missingValues;return!e&&this.options.isStacked?"zero":e||"interpolate"},getNearestPoint:function(t,e,i){var n,s,o,a,h,l=this.options.invertAxes,c=l?St:Ct,d=l?e:t,u=this.seriesPoints[i],p=ft,f=u.length;for(h=0;h<f;h++)(n=u[h])&&F(n.value)&&null!==n.value&&!1!==n.visible&&(s=n.box,(o=r.abs(s.center()[c]-d))<p&&(a=n,p=o));return a}},ie=jt.extend({init:function(t,e){this.enableDiscovery(),jt.fn.init.call(this,t,e)},render:function(){jt.fn.render.apply(this),this.computeAxisRanges(),this.renderSegments()},pointType:function(){return Kt},createPoint:function(t,e,i,n,s){var r,o,a=t.valueFields.value,l=(this.options.isStacked,this.categoryPoints[i],this.seriesMissingValues(n));t.fields;if(!F(a)||null===a){if("zero"!==l)return null;a=0}o=this.pointOptions(n,s),o=this.evalPointOptions(o,a,e,i,n,s);var c=t.fields.color||n.color;return h.isFunction(n.color)&&(c=o.color),(r=new Kt(a,o)).color=c,this.append(r),r},plotRange:function(t){var e=t.categoryIx,i=this.categoryPoints[e];if(this.options.isStacked){for(var n=this.plotValue(t),s=0;s<i.length;s++){var r=i[s];if(t===r)break;n+=this.plotValue(r)}return[n,n]}var o=jt.fn.plotRange.call(this,t);return[o[1],o[1]]},createSegment:function(t,e,i){var n=e.style;return new("step"===n?ne:"smooth"===n?se:te)(t,e,i)},getViewElements:function(t){var e=jt.fn.getViewElements.call(this,t),i=t.createGroup({animation:{type:st}});return i.children=e,[i]}});p(ie.fn,ee);var ne=te.extend({points:function(t){var e;return e=this.calculateStepPoints(this.linePoints),t&&t.length&&(e=e.concat(this.calculateStepPoints(t).reverse())),e},calculateStepPoints:function(t){var e,i,n,s,r,o=this.parent,a=o.plotArea.seriesCategoryAxis(this.series),h="interpolate"===o.seriesMissingValues(this.series),l=t.length,c=a.options.reverse,d=a.options.vertical,u=c?2:1,p=c?1:2,f=[];for(n=1;n<l;n++)e=t[n-1],i=t[n],s=e.markerBox().center(),r=i.markerBox().center(),a.options.justified?(f.push(D(s.x,s.y)),d?f.push(D(s.x,r.y)):f.push(D(r.x,s.y)),f.push(D(r.x,r.y))):d?(f.push(D(s.x,e.box[St+u])),f.push(D(s.x,e.box[St+p])),h&&f.push(D(s.x,i.box[St+u])),f.push(D(r.x,i.box[St+u])),f.push(D(r.x,i.box[St+p]))):(f.push(D(e.box[Ct+u],s.y)),f.push(D(e.box[Ct+p],s.y)),h&&f.push(D(i.box[Ct+u],s.y)),f.push(D(i.box[Ct+u],r.y)),f.push(D(i.box[Ct+p],r.y)));return f||[]}}),se=te.extend({points:function(){var t=new S(this.options.closed),e=te.fn.points.call(this);return t.process(e)},getViewElements:function(t){var e=this.series,i=e._defaults,n=e.color;return k.fn.getViewElements.call(this,t),g(n)&&i&&(n=i.color),[t.createCubicCurve(this.points(),{id:this.id,stroke:n,strokeWidth:e.width,strokeOpacity:e.opacity,fill:"",dashType:e.dashType,data:{modelId:this.modelId},zIndex:-1})]}}),re={points:function(){var t,e,i=this.parent,n=i.plotArea,s=i.options.invertAxes,r=i.seriesValueAxis(this.series).lineBox(),o=n.seriesCategoryAxis(this.series).lineBox(),a=s?o.x1:o.y1,h=this.stackPoints,l=this._linePoints(h),c=s?Ct:St;return a=q(a,r[c+1],r[c+2]),!this.stackPoints&&l.length>1&&(t=l[0],e=W(l),s?(l.unshift(D(a,t.y)),l.push(D(a,e.y))):(l.unshift(D(t.x,a)),l.push(D(e.x,a)))),l},getViewElements:function(t){var e,i=this.series,n=i._defaults,s=i.color,r=[];return k.fn.getViewElements.call(this,t),g(s)&&n&&(s=n.color),r.push(this.createArea(t,s)),(e=this.createLine(t,s))&&r.push(e),r},createLine:function(t,e){var i,n=this.series,s=p({color:e,opacity:n.opacity},n.line);return!1!==s.visible&&s.width>0&&(i=t.createPolyline(this._linePoints(),!1,{stroke:s.color,strokeWidth:s.width,strokeOpacity:s.opacity,dashType:s.dashType,data:{modelId:this.modelId},strokeLineCap:"butt",zIndex:-1,align:!1})),i},createArea:function(t,e){var i=this.series;return t.createPolyline(this.points(),!1,{id:this.id,fillOpacity:i.opacity,fill:e,stack:i.stack,data:{modelId:this.modelId},zIndex:-1})}},oe=te.extend({init:function(t,e,i,n){this.stackPoints=e,te.fn.init.call(this,t,i,n)},_linePoints:te.fn.points});p(oe.fn,re);var ae=ie.extend({createSegment:function(t,e,i,n){var s,r=this.options.isStacked,o=(e.line||{}).style;return r&&i>0&&n&&(s=n.linePoints,"step"!==o&&(s=s.slice(0).reverse())),"smooth"===o?new he(t,n,r,e,i):new("step"===o?le:oe)(t,s,e,i)},seriesMissingValues:function(t){return t.missingValues||"zero"}}),he=oe.extend({init:function(t,e,i,n,s){this.prevSegment=e,this.isStacked=i,te.fn.init.call(this,t,n,s)},points:function(){var t,e,i=this.prevSegment,n=new S(this.options.closed),s=te.fn.points.call(this),r=n.process(s);return this.curvePoints=r,this.isStacked&&i?(e=r.slice(0),e.push(W(r)),(t=i.curvePoints.slice(0).reverse()).unshift(t[0]),e=e.concat(t),e.push(W(t),e[0],e[0])):e=this.curvePoints,e},areaPoints:function(t){var e=this.parent,i=this.prevSegment,n=e.plotArea,s=e.options.invertAxes,r=e.seriesValueAxis(this.series).lineBox(),o=n.seriesCategoryAxis(this.series).lineBox(),a=s?o.x1:o.y1,h=s?Ct:St,l=t[0],c=W(t),d=[];return a=q(a,r[h+1],r[h+2]),e.options.isStacked&&i||!(t.length>1)||(s?(d.push(D(a,l.y)),d.unshift(D(a,c.y))):(d.push(D(l.x,a)),d.unshift(D(c.x,a)))),d},getViewElements:function(t){var e,i=this.series,n=i._defaults,s=i.color,r=this.points(),o=this.areaPoints(r),a=[];return k.fn.getViewElements.call(this,t),g(s)&&n&&(s=n.color),e=p({color:s,opacity:i.opacity},i.line),a.push(t.createCubicCurve(r,{id:this.id,fillOpacity:i.opacity,fill:s,stack:i.stack,data:{modelId:this.modelId},zIndex:-1},o)),e.width>0&&a.push(t.createCubicCurve(this.curvePoints,{stroke:e.color,strokeWidth:e.width,strokeOpacity:e.opacity,dashType:e.dashType,data:{modelId:this.modelId},strokeLineCap:"butt",zIndex:-1})),a}}),le=ne.extend({init:function(t,e,i,n){this.stackPoints=e,ne.fn.init.call(this,t,i,n)},_linePoints:ne.fn.points});p(le.fn,re);var ce=k.extend({init:function(t,e){k.fn.init.call(this,e),this.plotArea=t,this.xAxisRanges={},this.yAxisRanges={},this.points=[],this.seriesPoints=[],this.render()},options:{series:[],tooltip:{format:"{0}, {1}"},labels:{format:"{0}, {1}"},clip:!0},render:function(){this.traverseDataPoints(a(this.addValue,this))},addErrorBar:function(t,e,i){var n,s=t.value[e],r=e+"Value",o=e+"ErrorLow",a=e+"ErrorHigh",h=i.seriesIx,l=i.series,c=t.options.errorBars,d=i[o],u=i[a];mi(s)&&(mi(d)&&mi(u)&&(n={low:d,high:u}),c&&F(c[r])&&(this.seriesErrorRanges=this.seriesErrorRanges||{x:[],y:[]},this.seriesErrorRanges[e][h]=this.seriesErrorRanges[e][h]||new $t(c[r],l,e),n=this.seriesErrorRanges[e][h].getErrorRange(s)),n&&this.addPointErrorBar(n,t,e))},addPointErrorBar:function(t,e,i){var n,s=t.low,r=t.high,o=e.series,a=i===St,h=e.options.errorBars,l={};e[i+"Low"]=s,e[i+"High"]=r,e.errorBars=e.errorBars||[],n=new Zt(s,r,a,this,o,h),e.errorBars.push(n),e.append(n),l[i]=s,this.updateRange(l,o),l[i]=r,this.updateRange(l,o)},addValue:function(t,e){var i,n=t.x,s=t.y,r=e.seriesIx,a=this.seriesPoints[r];this.updateRange(t,e.series),F(n)&&null!==n&&F(s)&&null!==s&&(i=this.createPoint(t,e))&&(o(i,e),this.addErrorBar(i,Ct,e),this.addErrorBar(i,St,e)),this.points.push(i),a.push(i)},updateRange:function(t,e){var i=t.x,n=t.y,s=e.xAxis,o=e.yAxis,a=this.xAxisRanges[s],h=this.yAxisRanges[o];F(i)&&null!==i&&(a=this.xAxisRanges[s]=a||{min:ft,max:gt},"string"===_typeof(i)&&(i=ei(i)),a.min=r.min(a.min,i),a.max=r.max(a.max,i)),F(n)&&null!==n&&(h=this.yAxisRanges[o]=h||{min:ft,max:gt},"string"===_typeof(n)&&(n=ei(n)),h.min=r.min(h.min,n),h.max=r.max(h.max,n))},evalPointOptions:function(t,e,i){var n=i.series;wi(t,{value:e,series:n,dataItem:i.dataItem},{defaults:n._defaults,excluded:["data","tooltip"]})},createPoint:function(t,e){var i,n,s=e.series;return n=p({},Kt.fn.defaults,{markers:{opacity:s.opacity},tooltip:{format:this.options.tooltip.format},labels:{format:this.options.labels.format}},s,{color:e.color}),this.evalPointOptions(n,t,e),i=new Kt(t,n),this.append(i),i},seriesAxes:function(t){var e=this.plotArea,i=t.xAxis,n=i?e.namedXAxes[i]:e.axisX,s=t.yAxis,r=s?e.namedYAxes[s]:e.axisY;if(!n)throw new Error("Unable to locate X axis with name "+i);if(!r)throw new Error("Unable to locate Y axis with name "+s);return{x:n,y:r}},reflow:function(t){var e,i,n=this,s=n.points,r=0,o=(n.options.clip,!n.options.clip);n.traverseDataPoints((function(t,a){e=s[r++];var h,l=(i=n.seriesAxes(a.series)).x.getSlot(t.x,t.x,o),c=i.y.getSlot(t.y,t.y,o);e&&(l&&c?(h=n.pointSlot(l,c),e.reflow(h)):e.visible=!1)})),n.box=t},pointSlot:function(t,e){return new x(t.x1,e.y1,t.x2,e.y2)},getViewElements:function(t){var e=k.fn.getViewElements.call(this,t),i=t.createGroup({animation:{type:st}});return i.children=e,[i]},traverseDataPoints:function(t){var e,i,n,s,r,o,a=this.options.series,h=this.seriesPoints;for(i=0;i<a.length;i++)for(n=a[i],h[i]||(h[i]=[]),e=0;e<n.data.length;e++)r=(s=Et.current.bindPoint(n,e)).valueFields,o=s.fields,t(r,p({pointIx:e,series:n,seriesIx:i,dataItem:n.data[e],owner:this},o))},formatPointValue:function(t,e){var i=t.value;return V(e,i.x,i.y)}}),de=ce.extend({render:function(){ce.fn.render.call(this),this.renderSegments()},createSegment:function(t,e,i){return new("smooth"===e.style?se:te)(t,e,i)}});p(de.fn,ee);var ue=ce.extend({options:{tooltip:{format:"{3}"},labels:{format:"{3}"}},addValue:function(t,e){var i,n=e.series,s=n.negativeValues,r=this.plotArea.options.seriesColors||[],o=!0;i=e.color||n.color||r[e.pointIx%r.length],t.size<0&&(i=s.color||i,o=s.visible),e.color=i,o&&ce.fn.addValue.call(this,t,e)},reflow:function(t){this.updateBubblesSize(t),ce.fn.reflow.call(this,t)},createPoint:function(t,e){var i,n,s=e.series,r=s.data.length,o=e.pointIx*(ut/r),a={delay:o,duration:ut-o,type:"bubble"};return n=p({tooltip:{format:this.options.tooltip.format},labels:{format:this.options.labels.format,animation:a}},s,{color:e.color,markers:{type:"circle",background:e.color,border:s.border,opacity:s.opacity,animation:a}}),this.evalPointOptions(n,t,e),i=new Jt(t,n),this.append(i),i},updateBubblesSize:function(t){var e,i,n=this.options.series,s=r.min(t.width(),t.height());for(e=0;e<n.length;e++){var o=n[e],a=this.seriesPoints[e],h=this.maxSize(a),l=(o.minSize||r.max(.02*s,10))/2,c=(o.maxSize||.2*s)/2,d=r.PI*l*l,u=(r.PI*c*c-d)/h;for(i=0;i<a.length;i++){var f=a[i],g=r.abs(f.value.size)*u,m=r.sqrt((d+g)/r.PI);p(f.options,{markers:{size:2*m,zIndex:c-m},labels:{zIndex:c-m+1}})}}},maxSize:function(t){var e,i,n=t.length,s=0;for(e=0;e<n;e++)i=t[e].value.size,s=r.max(s,r.abs(i));return s},getViewElements:function(t){var e=k.fn.getViewElements.call(this,t),i=t.createGroup();return i.children=e,[i]},formatPointValue:function(t,e){var i=t.value;return V(e,i.x,i.y,i.size,t.category)}}),pe=k.extend({init:function(t,e){k.fn.init.call(this,e),this.value=t,this.id=Z(),this.enableDiscovery()},options:{border:{_brightness:.8},line:{width:2},overlay:{gradient:"glass"},tooltip:{format:"<table style='text-align: left;'><th colspan='2'>{4:d}</th><tr><td>Open:</td><td>{0:C}</td></tr><tr><td>High:</td><td>{1:C}</td></tr><tr><td>Low:</td><td>{2:C}</td></tr><tr><td>Close:</td><td>{3:C}</td></tr></table>"},highlight:{opacity:1,border:{width:1,opacity:1},line:{width:1,opacity:1}},notes:{visible:!0,label:{}}},reflow:function(t){var e,i,n,s=this.options,r=this.owner,o=this.value,a=r.seriesValueAxis(s),h=[];i=a.getSlot(o.open,o.close),n=a.getSlot(o.low,o.high),i.x1=n.x1=t.x1,i.x2=n.x2=t.x2,this.realBody=i,e=n.center().x,h.push([D(e,n.y1),D(e,i.y1)]),h.push([D(e,i.y2),D(e,n.y2)]),this.lowHighLinePoints=h,this.box=n.clone().wrap(i),this._rendered||(this._rendered=!0,this.createNote()),this.reflowNote()},reflowNote:function(){this.note&&this.note.reflow(this.box)},getViewElements:function(t){var e=this.options,i=[],n=e.border.width>0?{stroke:this.getBorderColor(),strokeWidth:e.border.width,dashType:e.border.dashType,strokeOpacity:K(e.border.opacity,e.opacity)}:{},s=p({fill:e.color,fillOpacity:e.opacity},n),r={strokeOpacity:K(e.line.opacity,e.opacity),strokeWidth:e.line.width,stroke:e.line.color||e.color,dashType:e.line.dashType,strokeLineCap:"butt"};return e.overlay&&(s.overlay=p({rotation:0},e.overlay)),i.push(t.createRect(this.realBody,s)),i.push(t.createPolyline(this.lowHighLinePoints[0],!1,r)),i.push(t.createPolyline(this.lowHighLinePoints[1],!1,r)),i.push(this.createOverlayRect(t,e)),N(i,k.fn.getViewElements.call(this,t)),i},getBorderColor:function(){var t=this.options,e=t.border,i=e.color;return F(i)||(i=new C(t.color).brightness(e._brightness).toHex()),i},createOverlayRect:function(t){return t.createRect(this.box,{data:{modelId:this.modelId},fill:"#fff",id:this.id,fillOpacity:0})},highlightOverlay:function(t,e){var i=this.options,n=i.highlight,s=n.border,r=this.getBorderColor(),o=n.line,a={data:{modelId:i.modelId}},h=p({},a,e,{stroke:r,strokeOpacity:s.opacity,strokeWidth:s.width}),l=p({},a,{stroke:o.color||r,strokeWidth:o.width,strokeOpacity:o.opacity,strokeLineCap:"butt"}),c=t.createGroup();return c.children.push(t.createRect(this.realBody,h)),c.children.push(t.createPolyline(this.lowHighLinePoints[0],!1,l)),c.children.push(t.createPolyline(this.lowHighLinePoints[1],!1,l)),c},tooltipAnchor:function(){var t=this.box,e=this.owner.pane.clipBox()||t;return new D(t.x2+5,r.max(t.y1,e.y1)+5)},formatValue:function(t){return this.owner.formatPointValue(this,t)}});p(pe.fn,Ft),p(pe.fn,Ht);var fe=jt.extend({options:{},reflowCategories:function(t){var e,i=this.children,n=i.length;for(e=0;e<n;e++)i[e].reflow(t[e])},addValue:function(t,e,i,n,s){var r,o,a=this.options,h=t.valueFields,l=this.children,c=t.fields.color||n.color,d=yi(this.splitValue(h)),u=this.categoryPoints[i],f=n.data[i];u||(this.categoryPoints[i]=u=[]),d&&("candlestick"==n.type&&h.open>h.close&&(c=t.fields.downColor||n.downColor||n.color),r=this.createPoint(t,e,i,p({},n,{color:c}))),(o=l[i])||(o=new Nt({vertical:a.invertAxes,gap:a.gap,spacing:a.spacing}),this.append(o)),r&&(this.updateRange(h,i,n),o.append(r),r.categoryIx=i,r.category=e,r.series=n,r.seriesIx=s,r.owner=this,r.dataItem=f,r.noteText=t.fields.noteText),this.points.push(r),u.push(r)},pointType:function(){return pe},createPoint:function(t,e,i,n,s){var r=t.valueFields,o=p({},n);return new(this.pointType())(r,o=this.evalPointOptions(o,r,e,i,n,s))},splitValue:function(t){return[t.low,t.open,t.close,t.high]},updateRange:function(t,e,i){var n=i.axis,s=this.valueAxisRanges[n],o=this.splitValue(t);s=this.valueAxisRanges[n]=s||{min:ft,max:gt},s=this.valueAxisRanges[n]={min:r.min.apply(r,o.concat([s.min])),max:r.max.apply(r,o.concat([s.max]))}},formatPointValue:function(t,e){var i=t.value;return V(e,i.open,i.high,i.low,i.close,t.category)},getViewElements:function(t){var e=k.fn.getViewElements.call(this,t),i=t.createGroup({animation:{type:st}});return i.children=e,[i]}}),ge=pe.extend({reflow:function(t){var e,i,n,s,r=this.options,o=this.owner,a=this.value,h=o.seriesValueAxis(r),l=[],c=[],d=[];s=h.getSlot(a.low,a.high),i=h.getSlot(a.open,a.open),n=h.getSlot(a.close,a.close),i.x1=n.x1=s.x1=t.x1,i.x2=n.x2=s.x2=t.x2,e=s.center().x,l.push(D(i.x1,i.y1)),l.push(D(e,i.y1)),c.push(D(e,n.y1)),c.push(D(n.x2,n.y1)),d.push(D(e,s.y1)),d.push(D(e,s.y2)),this.oPoints=l,this.cPoints=c,this.lhPoints=d,this.box=s.clone().wrap(i.clone().wrap(n)),this.reflowNote()},getViewElements:function(t){var e=this.options,i=[],n=e.line,s={strokeOpacity:n.opacity||e.opacity,zIndex:-1,strokeWidth:n.width,stroke:e.color||n.color,dashType:n.dashType};return i.push(this.createOverlayRect(t,e)),i.push(t.createPolyline(this.oPoints,!0,s)),i.push(t.createPolyline(this.cPoints,!0,s)),i.push(t.createPolyline(this.lhPoints,!0,s)),N(i,k.fn.getViewElements.call(this,t)),i},highlightOverlay:function(t){var e=this.options,i=e.highlight,n={data:{modelId:e.modelId}},s=p(n,{strokeWidth:i.line.width,strokeOpacity:i.line.opacity,stroke:i.line.color||this.color}),r=t.createGroup();return r.children.push(t.createPolyline(this.oPoints,!0,s)),r.children.push(t.createPolyline(this.cPoints,!0,s)),r.children.push(t.createPolyline(this.lhPoints,!0,s)),r}}),me=fe.extend({pointType:function(){return ge}}),ve=fe.extend({addValue:function(t,e,i,n,s){var r,o,a=this.options,h=this.children,l=t.fields.color||n.color,c=t.valueFields,d=yi(this.splitValue(c)),u=this.categoryPoints[i],f=n.data[i];u||(this.categoryPoints[i]=u=[]),d&&(r=this.createPoint(t,e,i,p({},n,{color:l}))),(o=h[i])||(o=new Nt({vertical:a.invertAxes,gap:a.gap,spacing:a.spacing}),this.append(o)),r&&(this.updateRange(c,i,n),o.append(r),r.categoryIx=i,r.category=e,r.series=n,r.seriesIx=s,r.owner=this,r.dataItem=f),this.points.push(r),u.push(r)},pointType:function(){return ye},splitValue:function(t){return[t.lower,t.q1,t.median,t.q3,t.upper]},updateRange:function(t,e,i){var n=i.axis,s=this.valueAxisRanges[n],o=this.splitValue(t).concat(this.filterOutliers(t.outliers));F(t.mean)&&(o=o.concat(t.mean)),s=this.valueAxisRanges[n]=s||{min:ft,max:gt},s=this.valueAxisRanges[n]={min:r.min.apply(r,o.concat([s.min])),max:r.max.apply(r,o.concat([s.max]))}},formatPointValue:function(t,e){var i=t.value;return V(e,i.lower,i.q1,i.median,i.q3,i.upper,i.mean,t.category)},filterOutliers:function(t){var e,i,n=(t||[]).length,s=[];for(e=0;e<n;e++)i=t[e],F(i)&&fi(s,i);return s}}),ye=pe.extend({init:function(t,e){k.fn.init.call(this,e),this.value=t,this.id=Z(),this.enableDiscovery(),this.createNote()},options:{border:{_brightness:.8},line:{width:2},mean:{width:2,dashType:"dash"},overlay:{gradient:"glass"},tooltip:{format:"<table style='text-align: left;'><th colspan='2'>{6:d}</th><tr><td>Lower:</td><td>{0:C}</td></tr><tr><td>Q1:</td><td>{1:C}</td></tr><tr><td>Median:</td><td>{2:C}</td></tr><tr><td>Mean:</td><td>{5:C}</td></tr><tr><td>Q3:</td><td>{3:C}</td></tr><tr><td>Upper:</td><td>{4:C}</td></tr></table>"},highlight:{opacity:1,border:{width:1,opacity:1},line:{width:1,opacity:1}},notes:{visible:!0,label:{}},outliers:{visible:!0,size:8,type:"cross",background:"#fff",border:{width:2,opacity:1},opacity:0},extremes:{visible:!0,size:8,type:"circle",background:"#fff",border:{width:2,opacity:1},opacity:0}},reflow:function(t){var e,i,n,s,r,o=this.options,a=this.owner,h=this.value,l=a.seriesValueAxis(o),c=[];n=l.getSlot(h.q1,h.q3),this.boxSlot=n,i=l.getSlot(h.lower,h.upper),s=l.getSlot(h.median),n.x1=i.x1=t.x1,n.x2=i.x2=t.x2,h.mean&&(r=l.getSlot(h.mean),this.meanPoints=[D(t.x1,r.y1),D(t.x2,r.y1)]),e=i.center().x,c.push([[D(e-5,i.y1),D(e+5,i.y1)],[D(e,i.y1),D(e,n.y1)]]),c.push([[D(e-5,i.y2),D(e+5,i.y2)],[D(e,n.y2),D(e,i.y2)]]),this.whiskerPoints=c,this.medianPoints=[D(t.x1,s.y1),D(t.x2,s.y1)],this.box=i.clone().wrap(n),this.createOutliers(),this.reflowNote()},createOutliers:function(){var t,e,i,n,s,o=this.options,a=o.markers||{},h=this.value,l=h.outliers||[],c=this.owner.seriesValueAxis(o),d=3*r.abs(h.q3-h.q1);for(this.outliers=[],s=0;s<l.length;s++)a=(n=l[s])<h.q3+d&&n>h.q1-d?o.outliers:o.extremes,t=p({},a.border),F(t.color)||(F(this.options.color)?t.color=this.options.color:t.color=new C(a.background).brightness(.8).toHex()),i=new L({id:this.id,type:a.type,width:a.size,height:a.size,rotation:a.rotation,background:a.background,border:t,opacity:a.opacity}),e=c.getSlot(n).move(this.box.center().x),this.box=this.box.wrap(e),i.reflow(e),this.outliers.push(i)},getViewElements:function(t){var e=t.createGroup({animation:{type:st}}),i=this.render(t,this.options);return N(i,k.fn.getViewElements.call(this,t)),e.children=i,[e]},render:function(t,e){var i,n,s=[];if(s.push(this.createBody(t,e)),s.push(this.createWhisker(t,this.whiskerPoints[0],e)),s.push(this.createWhisker(t,this.whiskerPoints[1],e)),s.push(this.createMedian(t,e)),this.meanPoints&&s.push(this.createMean(t,e)),s.push(this.createOverlayRect(t,e)),this.outliers.length)for(i=0;i<this.outliers.length;i++)n=this.outliers[i],s.push(n.getViewElements(t)[0]);return s},createWhisker:function(t,e,i){return t.createMultiLine(e,{strokeOpacity:K(i.line.opacity,i.opacity),strokeWidth:i.line.width,stroke:i.line.color||i.color,dashType:i.line.dashType,strokeLineCap:"butt",data:{data:{modelId:this.modelId}}})},createMedian:function(t){var e=this.options;return t.createPolyline(this.medianPoints,!1,{strokeOpacity:K(e.median.opacity,e.opacity),strokeWidth:e.median.width,stroke:e.median.color||e.color,dashType:e.median.dashType,strokeLineCap:"butt",data:{data:{modelId:this.modelId}}})},createBody:function(t,e){var i=e.border.width>0?{stroke:e.color||this.getBorderColor(),strokeWidth:e.border.width,dashType:e.border.dashType,strokeOpacity:K(e.border.opacity,e.opacity)}:{},n=p({fill:e.color,fillOpacity:e.opacity,data:{data:{modelId:this.modelId}}},i);return e.overlay&&(n.overlay=p({rotation:0},e.overlay)),t.createRect(this.boxSlot,n)},createMean:function(t){var e=this.options;return t.createPolyline(this.meanPoints,!1,{strokeOpacity:K(e.mean.opacity,e.opacity),strokeWidth:e.mean.width,stroke:e.mean.color||e.color,dashType:e.mean.dashType,strokeLineCap:"butt",data:{data:{modelId:this.modelId}}})},highlightOverlay:function(t){var e=t.createGroup();return e.children=this.render(t,p({},this.options.highlight,{border:{color:this.getBorderColor()}})),e}});p(ye.fn,Ft);var be=k.extend({init:function(t,e,i){this.value=t,this.sector=e,k.fn.init.call(this,i),this.id=Z(),this.enableDiscovery()},options:{color:"#fff",overlay:{gradient:"roundedBevel"},border:{width:.5},labels:{visible:!1,distance:35,font:ht,margin:$(.5),align:"circle",zIndex:1,position:"outsideEnd"},animation:{type:bt},highlight:{visible:!0,border:{width:1}},visible:!0},render:function(){var t=this.options.labels,e=this.value;this._rendered||!1===this.visible||(this._rendered=!0,t.template?e=m(t.template)({dataItem:this.dataItem,category:this.category,value:this.value,series:this.series,percentage:this.percentage}):t.format&&(e=V(t.format,e)),t.visible&&e&&(this.label=new B(e,p({},t,{id:Z(),align:nt,vAlign:"",animation:{type:"fadeIn",delay:this.animationDelay}})),this.append(this.label)))},reflow:function(t){this.render(),this.box=t,this.reflowLabel()},reflowLabel:function(){var t,e,i,n,s=this.sector.clone(),o=this.options,a=this.label,h=o.labels,l=h.distance,c=s.middle();a&&(n=a.box.height(),i=a.box.width(),h.position==nt?(s.r=r.abs((s.r-n)/2)+n,t=s.point(c),a.reflow(x(t.x,t.y-n/2,t.x,t.y))):"insideEnd"==h.position?(s.r=s.r-n/2,t=s.point(c),a.reflow(x(t.x,t.y-n/2,t.x,t.y))):((t=s.clone().expand(l).point(c)).x>=s.c.x?(e=t.x+i,a.orientation=wt):(e=t.x-i,a.orientation=pt),a.reflow(x(e,t.y-n,t.x,t.y))))},getViewElements:function(t){var e=this.sector,i=this.options,n=i.border||{},s=n.width>0?{stroke:n.color,strokeWidth:n.width,strokeOpacity:n.opacity,dashType:n.dashType}:{},r=[],o=i.overlay;return o&&(o=p({},i.overlay,{r:e.r,ir:e.ir,cx:e.c.x,cy:e.c.y,bbox:e.getBBox()})),this.value&&r.push(this.createSegment(t,e,p({id:this.id,fill:i.color,overlay:o,fillOpacity:i.opacity,strokeOpacity:i.opacity,animation:p(i.animation,{delay:this.animationDelay}),data:{modelId:this.modelId},zIndex:i.zIndex,singleSegment:1===(this.options.data||[]).length},s))),N(r,k.fn.getViewElements.call(this,t)),r},createSegment:function(t,e,i){return i.singleSegment?t.createCircle(e.c,e.r,i):t.createSector(e,i)},highlightOverlay:function(t,e){var i,n=this.options.highlight||{},s=n.border||{},r=this.id+"_outline";return e=p({},e,{id:r}),0!==this.value&&(i=this.createSegment(t,this.sector,p({},e,{fill:n.color,fillOpacity:n.opacity,strokeOpacity:s.opacity,strokeWidth:s.width,stroke:s.color,id:null,data:{modelId:this.modelId}}))),i},tooltipAnchor:function(t,e){var i=this.sector.adjacentBox(5,t,e);return new D(i.x1,i.y1)},formatValue:function(t){return this.owner.formatPointValue(this,t)}});p(be.fn,Ft);var we=k.extend({init:function(t,e){k.fn.init.call(this,e),this.plotArea=t,this.points=[],this.legendItems=[],this.render()},options:{startAngle:90,connectors:{width:1,color:"#939393",padding:4},inactiveItems:{markers:{},labels:{}}},render:function(){this.traverseDataPoints(a(this.addValue,this))},traverseDataPoints:function(t){var e,i,n,s,r,o,a,h,l,c,d,u,p=this.options,f=this.plotArea.options.seriesColors||[],m=f.length,v=p.series,y=v.length,b=Z(),w=0;for(s=0;s<y;s++){for(o=(e=v[s]).data,a=360/(c=this.pointsTotal(e)),d=F(e.startAngle)?e.startAngle:p.startAngle,s!=y-1&&"outsideEnd"==e.labels.position&&(e.labels.position=nt),u=0;u<o.length;u++)h=(i=Et.current.bindPoint(e,u)).valueFields.value,n=i.fields,r=Q(h*a,ct),l=1!=o.length&&!!n.explode,g(e.color)||(e.color=n.color||f[u%m]),t(h,new M(null,0,0,d,r),{owner:this,category:n.category||"",index:w,series:e,seriesIx:s,dataItem:o[u],percentage:isNaN(h/c)?0:h/c,explode:l,visibleInLegend:n.visibleInLegend,visible:n.visible,overlay:{id:b+s},zIndex:y-s,animationDelay:this.animationDelay(u,s,y)}),!1!==i.fields.visible&&(d+=r),w++;w=0}},evalSegmentOptions:function(t,e,i){var n=i.series;wi(t,{value:e,series:n,dataItem:i.dataItem,category:i.category,percentage:i.percentage},{defaults:n._defaults,excluded:["data"]})},addValue:function(t,e,i){var n;if(this.createLegendItem(t,i),!1!==i.visible){var s=p({},i.series,{index:i.index});this.evalSegmentOptions(s,t,i),n=new be(t,e,s),o(n,i),this.append(n),this.points.push(n)}},createLegendItem:function(t,e){var i,n,s,r=(this.options.legend||{}).labels||{},o=(this.options.legend||{}).inactiveItems||{};e&&!1!==e.visibleInLegend&&(i=e.category||"",(r||{}).template&&(i=m(r.template)({text:i,series:e.series,dataItem:e.dataItem,percentage:e.percentage,value:t})),!1===e.visible?(n=(o.markers||{}).color,s=(o.labels||{}).color):(n=(e.series||{}).color,s=r.color),i&&this.legendItems.push({pointIndex:e.index,text:i,series:e.series,markerColor:n,labelColor:s}))},pointsTotal:function(t){var e,i,n,s=t.data.length,r=0;for(i=0;i<s;i++)"string"==typeof(e=(n=Et.current.bindPoint(t,i)).valueFields.value)&&(e=parseFloat(e)),e&&!1!==n.fields.visible&&(r+=e);return r},reflow:function(t){var e,i,n,s,o,a,h,l,c=this.options,d=t.clone(),u=r.min(d.width(),d.height()),p=u/2,f=u-.85*u,g=K(c.padding,f),m=x(d.x1,d.y1,d.x1+u,d.y1+u),v=m.center(),y=this.seriesConfigs||[],b=d.center(),w=this.points,_=w.length,k=c.series.length,C=[],S=[];for(g=g>p-5?p-5:g,m.translate(b.x-v.x,b.y-v.y),l=D((a=p-g)+m.x1+g,a+m.y1+g),h=0;h<_;h++)(o=(s=w[h]).sector).r=a,o.c=l,i=s.seriesIx,y.length&&(e=y[i],o.ir=e.ir,o.r=e.r),i==k-1&&s.explode&&(o.c=o.clone().radius(.15*o.r).point(o.middle())),s.reflow(m),(n=s.label)&&"outsideEnd"===n.options.position&&i==k-1&&(n.orientation===wt?S.push(n):C.push(n));C.length>0&&(C.sort(this.labelComparator(!0)),this.leftLabelsReflow(C)),S.length>0&&(S.sort(this.labelComparator(!1)),this.rightLabelsReflow(S)),this.box=m},leftLabelsReflow:function(t){var e=this.distanceBetweenLabels(t);this.distributeLabels(e,t)},rightLabelsReflow:function(t){var e=this.distanceBetweenLabels(t);this.distributeLabels(e,t)},distanceBetweenLabels:function(t){var e,i,n,s=this.points,r=s[s.length-1],o=r.sector,a=t[0].box,h=t.length-1,l=o.r+r.options.labels.distance,c=[];for(i=Q(a.y1-(o.c.y-l-a.height()-a.height()/2)),c.push(i),n=0;n<h;n++)a=t[n].box,e=t[n+1].box,i=Q(e.y1-a.y2),c.push(i);return i=Q(o.c.y+l-t[h].box.y2-t[h].box.height()/2),c.push(i),c},distributeLabels:function(t,e){var i,n,s,r,o=t.length;for(r=0;r<o;r++)for(n=s=r,i=-t[r];i>0&&(n>=0||s<o);)i=this._takeDistance(t,r,--n,i),i=this._takeDistance(t,r,++s,i);this.reflowLabels(t,e)},_takeDistance:function(t,e,i,n){if(t[i]>0){var s=r.min(t[i],n);n-=s,t[i]-=s,t[e]+=s}return n},reflowLabels:function(t,e){var i,n,s,r,o=this.points,a=o[o.length-1],h=a.sector,l=e.length,c=a.options.labels,d=c.distance,u=h.c.y-(h.r+d)-e[0].box.height();for(t[0]+=2,r=0;r<l;r++)i=e[r],u+=t[r],s=i.box,n=this.hAlignLabel(s.x2,h.clone().expand(d),u,u+s.height(),i.orientation==wt),i.orientation==wt?("circle"!==c.align&&(n=h.r+h.c.x+d),i.reflow(x(n+s.width(),u,n,u))):("circle"!==c.align&&(n=h.c.x-h.r-d),i.reflow(x(n-s.width(),u,n,u))),u+=s.height()},getViewElements:function(t){var e,i,n,s,o,a,h,l=this.options.connectors,c=this.points,d=[],u=c.length;for(h=0;h<u;h++)if(n=(i=(o=c[h]).sector).middle(),a=o.label,{seriesId:o.seriesIx},a&&(s=[],"outsideEnd"===a.options.position&&0!==o.value)){var p,f,g,m=a.box,v=i.c,y=i.point(n),b=D(m.x1,m.center().y);y=i.clone().expand(l.padding).point(n),s.push(y),a.orientation==wt?(g=Ye(v,y,b,f=D(m.x1-l.padding,m.center().y)),b=D(f.x-4,f.y),(g=g||b).x=r.min(g.x,b.x),this.pointInCircle(g,i.c,i.r+4)||g.x<i.c.x?(p=i.c.x+i.r+4,"column"!==o.options.labels.align?p<b.x?s.push(D(p,y.y)):s.push(D(y.x+8,y.y)):s.push(D(p,y.y)),s.push(D(b.x,f.y))):(g.y=f.y,s.push(g))):(g=Ye(v,y,b,f=D(m.x2+l.padding,m.center().y)),b=D(f.x+4,f.y),(g=g||b).x=r.max(g.x,b.x),this.pointInCircle(g,i.c,i.r+4)||g.x>i.c.x?(p=i.c.x-i.r-4,"column"!==o.options.labels.align?p>b.x?s.push(D(p,y.y)):s.push(D(y.x-8,y.y)):s.push(D(p,y.y)),s.push(D(b.x,f.y))):(g.y=f.y,s.push(g))),s.push(f),e=t.createPolyline(s,!1,{id:Z(),stroke:l.color,strokeWidth:l.width,animation:{type:"fadeIn",delay:o.animationDelay},data:{modelId:o.modelId}}),d.push(e)}return N(d,k.fn.getViewElements.call(this,t)),d},labelComparator:function(t){return t=t?-1:1,function(e,i){return((e=(e.parent.sector.middle()+270)%360)-(i=(i.parent.sector.middle()+270)%360))*t}},hAlignLabel:function(t,e,i,n,s){var o=e.c.x,a=e.c.y,h=e.r,l=r.min(r.abs(a-i),r.abs(a-n));return l>h?t:o+r.sqrt(h*h-l*l)*(s?1:-1)},pointInCircle:function(t,e,i){return Ke(e.x-t.x)+Ke(e.y-t.y)<Ke(i)},formatPointValue:function(t,e){return V(e,t.value)},animationDelay:function(t){return 70*t}}),xe=be.extend({options:{overlay:{gradient:"roundedGlass"},labels:{position:nt},animation:{type:bt}},reflowLabel:function(){var t,e,i=this.sector.clone(),n=this.options,s=this.label,r=n.labels,o=i.middle();s&&(e=s.box.height(),r.position==nt?(i.r-=(i.r-i.ir)/2,t=i.point(o),s.reflow(new x(t.x,t.y-e/2,t.x,t.y))):be.fn.reflowLabel.call(this))},createSegment:function(t,e,i){return t.createRing(e,i)}});p(xe.fn,Ft);var _e=we.extend({options:{startAngle:90,connectors:{width:1,color:"#939393",padding:4}},addValue:function(t,e,i){var n;if(this.createLegendItem(t,i),t&&!1!==i.visible){var s=p({},i.series);this.evalSegmentOptions(s,t,i),n=new xe(t,e,s),o(n,i),this.append(n),this.points.push(n)}},reflow:function(t){var e,i,n,s,o,a=this.options,h=t.clone(),l=r.min(h.width(),h.height()),c=l/2,d=l-.85*l,u=K(a.padding,d),p=a.series,f=p.length,g=0,m=0,v=0;for(this.seriesConfigs=[],n=c-(u=u>c-5?c-5:u),s=0;s<f;s++)e=p[s],0===s&&F(e.holeSize)&&(i=e.holeSize,n-=e.holeSize),F(e.size)?n-=e.size:g++,F(e.margin)&&s!=f-1&&(n-=e.margin);for(F(i)||(n-=i=.75*((c-u)/(f+.75))),v=i,s=0;s<f;s++)e=p[s],o=(v+=m)+K(e.size,n/g),this.seriesConfigs.push({ir:v,r:o}),m=e.margin||0,v=o;we.fn.reflow.call(this,t)},animationDelay:function(t,e,i){return 50*t+ut*(e+1)/(i+1)}}),ke=_.extend({init:function(t){_.fn.init.call(this,t),t=this.options,this.id=Z(),this.title=R.buildTitle(t.title,this,ke.fn.options.title),this.content=new k,this.chartContainer=new Ce({},this),this.append(this.content),this.axes=[],this.charts=[]},options:{zIndex:-1,shrinkToFit:!0,title:{align:pt},visible:!0},appendAxis:function(t){this.content.append(t),this.axes.push(t),t.pane=this},appendChart:function(t){this.chartContainer.parent!==this.content&&this.content.append(this.chartContainer),this.charts.push(t),this.chartContainer.append(t),t.pane=this},empty:function(){var t,e=this.parent;if(e){for(t=0;t<this.axes.length;t++)e.removeAxis(this.axes[t]);for(t=0;t<this.charts.length;t++)e.removeChart(this.charts[t])}this.axes=[],this.charts=[],this.content.destroy(),this.content.children=[],this.chartContainer.children=[]},reflow:function(t){W(this.children)===this.content&&this.children.pop(),_.fn.reflow.call(this,t),this.title&&(this.contentBox.y1+=this.title.box.height())},getViewElements:function(t){var e=_.fn.getViewElements.call(this,t),i=t.createGroup({id:this.id}),n=[];return i.children=e.concat(this.renderGridLines(t),this.content.getViewElements(t)),this.view=t,this.options.visible&&(n=[i]),n},renderGridLines:function(t){var e,i,n,s,r,o,a=this.axes,h=a.concat(this.parent.axes),l=[],c=[];for(i=0;i<a.length;i++)for(e=(r=(s=a[i]).options.vertical)?l:c,n=0;n<h.length;n++)0===e.length&&r!==(o=h[n]).options.vertical&&N(e,s.renderGridLines(t,o,s));return l.concat(c)},refresh:function(){var t=this.view;t&&t.replace(this)},clipBox:function(){return this.chartContainer.clipBox}}),Ce=k.extend({init:function(t,e){k.fn.init.call(this,t),this.pane=e},shouldClip:function(){var t,e=this.children,i=e.length;for(t=0;t<i;t++)if(!0===e[t].options.clip)return!0;return!1},_clipBox:function(){var t,e,i,n,s=this.pane,r=s.axes,o=r.length,a=s.box.clone();for(e=0;e<o;e++)t=(n=r[e]).options.vertical?St:Ct,i=n.lineBox(),a[t+1]=i[t+1],a[t+2]=i[t+2];return a},getViewElements:function(t){var e,i,n=[];return this.shouldClip()&&(this.clipBox=this._clipBox(),this.clipPathId=this.clipPathId||Z(),e=this.clipPathId,t.createClipPath(this.clipPathId,this.clipBox),n=this.labelViewElements(t)),this.id=Z(),(i=t.createGroup({id:this.id,clipPathId:e})).children=i.children.concat(k.fn.getViewElements.call(this,t)),[i].concat(n)},labelViewElements:function(t){var e,i,n,s,r,o=this.children,a=[],h=this.clipBox;for(n=0;n<o.length;n++)for(r=(e=o[n].points||{}).length,s=0;s<r;s++)(i=e[s])&&i.label&&i.label.options.visible&&(i.box.overlaps(h)&&(i.label.alignToClipBox&&i.label.alignToClipBox(h),i.label.modelId=i.modelId,N(a,i.label.getViewElements(t))),i.label.options.visible=!1);return a},destroy:function(){k.fn.destroy.call(this),delete this.parent}}),Se=k.extend({init:function(t,e){k.fn.init.call(this,e),this.series=t,this.setSeriesIndexes(),this.charts=[],this.options.legend.items=[],this.axes=[],this.crosshairs=[],this.id=Z(),this.enableDiscovery(),this.createPanes(),this.render(),this.createCrosshairs()},options:{series:[],plotArea:{margin:{}},background:"",border:{color:"#000",width:0},legend:{inactiveItems:{labels:{color:"#919191"},markers:{color:"#919191"}}}},setSeriesIndexes:function(){var t,e=this.series;for(t=0;t<e.length;t++)e[t].index=t},createPanes:function(){var t,e,i=[],n=this.options.panes||[],s=r.max(n.length,1);for(t=0;t<s;t++)(e=new ke(n[t])).paneIndex=t,i.push(e),this.append(e);this.panes=i},destroy:function(){var t,e=this.charts,i=this.axes;for(t=0;t<e.length;t++)e[t].destroy();for(t=0;t<i.length;t++)i[t].destroy();k.fn.destroy.call(this)},createCrosshairs:function(t){var e,i,n,s,r;for(t=t||this.panes,e=0;e<t.length;e++)for(n=t[e],i=0;i<n.axes.length;i++)(s=n.axes[i]).options.crosshair&&s.options.crosshair.visible&&(r=new Fe(s,s.options.crosshair),this.crosshairs.push(r),n.content.append(r))},removeCrosshairs:function(t){var e,i,n=this.crosshairs,s=t.axes;for(e=n.length-1;e>=0;e--)for(i=0;i<s.length;i++)if(n[e].axis===s[i]){n.splice(e,1);break}},findPane:function(t){var e,i,n=this.panes;for(e=0;e<n.length;e++)if(n[e].options.name===t){i=n[e];break}return i||n[0]},findPointPane:function(t){var e,i,n=this.panes;for(e=0;e<n.length;e++)if(n[e].box.containsPoint(t)){i=n[e];break}return i},appendAxis:function(t){this.findPane(t.options.pane).appendAxis(t),this.axes.push(t),t.plotArea=this},removeAxis:function(t){var e,i,n=[];for(e=0;e<this.axes.length;e++)t!==(i=this.axes[e])?n.push(i):i.destroy();this.axes=n},appendChart:function(t,e){this.charts.push(t),e?e.appendChart(t):this.append(t)},removeChart:function(t){var e,i,n=[];for(e=0;e<this.charts.length;e++)(i=this.charts[e])!==t?n.push(i):i.destroy();this.charts=n},addToLegend:function(t){var e,i,n,s,r,o,a,h=t.length,l=[],c=this.options.legend,d=c.labels||{},u=c.inactiveItems||{};for(e=0;e<h;e++)!1!==(i=t[e]).visibleInLegend&&(n=i.name||"",d.template&&(n=m(d.template)({text:n,series:i})),s=i.color,a=i._defaults,g(s)&&a&&(s=a.color),!1===i.visible?(r=u.labels.color,o=u.markers.color):(r=d.color,o=s),n&&l.push({text:n,labelColor:r,markerColor:o,series:i,active:i.visible}));N(c.items,l)},groupAxes:function(t){var e,i,n,s,r=[],o=[];for(n=0;n<t.length;n++)for(e=t[n].axes,s=0;s<e.length;s++)(i=e[s]).options.vertical?o.push(i):r.push(i);return{x:r,y:o,any:r.concat(o)}},groupSeriesByPane:function(){var t,e,i,n=this.series,s={};for(t=0;t<n.length;t++)i=n[t],s[e=this.seriesPaneName(i)]?s[e].push(i):s[e]=[i];return s},filterVisibleSeries:function(t){var e,i,n=[];for(e=0;e<t.length;e++)!1!==(i=t[e]).visible&&n.push(i);return n},reflow:function(t){var e=this.options.plotArea,i=this.panes,n=$(e.margin);this.box=t.clone().unpad(n),this.reflowPanes(),this.reflowAxes(i),this.reflowCharts(i)},redraw:function(t){var e;for(t=[].concat(t),e=0;e<t.length;e++)this.removeCrosshairs(t[e]),t[e].empty();for(this.render(t),this.reflowAxes(this.panes),this.reflowCharts(t),this.createCrosshairs(t),e=0;e<t.length;e++)t[e].refresh()},axisCrossingValues:function(t,e){var i,n=t.options,s=[].concat(n.axisCrossingValues||n.axisCrossingValue),r=e.length-s.length,o=s[0]||0;for(i=0;i<r;i++)s.push(o);return s},alignAxisTo:function(t,e,i,n){var s=t.getSlot(i,i,!0),r=t.options.reverse?2:1,o=e.getSlot(n,n,!0),a=e.options.reverse?2:1,h=t.box.translate(o[Ct+a]-s[Ct+r],o[St+a]-s[St+r]);t.pane!==e.pane&&h.translate(0,t.pane.box.y1-e.pane.box.y1),t.reflow(h)},alignAxes:function(t,e){var i,n,s,r=t[0],o=e[0],a=this.axisCrossingValues(r,e),h=this.axisCrossingValues(o,t),l={},c={},d={},u={};for(s=0;s<e.length;s++)i=(n=e[s]).pane.id,this.alignAxisTo(n,r,h[s],a[s]),n.options._overlap||(Q(n.lineBox().x1)===Q(r.lineBox().x1)&&(l[i]&&n.reflow(n.box.alignTo(l[i].box,pt).translate(-n.options.margin,0)),l[i]=n),Q(n.lineBox().x2)===Q(r.lineBox().x2)&&(n._mirrored||(n.options.labels.mirror=!n.options.labels.mirror,n._mirrored=!0),this.alignAxisTo(n,r,h[s],a[s]),c[i]&&n.reflow(n.box.alignTo(c[i].box,wt).translate(n.options.margin,0)),c[i]=n),0!==s&&o.pane===n.pane&&n.alignTo(o));for(s=0;s<t.length;s++)i=(n=t[s]).pane.id,this.alignAxisTo(n,o,a[s],h[s]),n.options._overlap||(Q(n.lineBox().y1)===Q(o.lineBox().y1)&&(n._mirrored||(n.options.labels.mirror=!n.options.labels.mirror,n._mirrored=!0),this.alignAxisTo(n,o,a[s],h[s]),d[i]&&n.reflow(n.box.alignTo(d[i].box,_t).translate(0,-n.options.margin)),d[i]=n),Q(n.lineBox().y2,rt)===Q(o.lineBox().y2,rt)&&(u[i]&&n.reflow(n.box.alignTo(u[i].box,it).translate(0,n.options.margin)),u[i]=n),0!==s&&n.alignTo(r))},shrinkAxisWidth:function(t){var e,i,n,s=this.groupAxes(t).any,o=di(s),a=0;for(e=0;e<t.length;e++)(i=t[e]).axes.length>0&&(a=r.max(a,o.width()-i.contentBox.width()));for(e=0;e<s.length;e++)(n=s[e]).options.vertical||n.reflow(n.box.shrink(a,0))},shrinkAxisHeight:function(t){var e,i,n,s,o,a;for(e=0;e<t.length;e++)for(n=(i=t[e]).axes,s=r.max(0,di(n).height()-i.contentBox.height()),o=0;o<n.length;o++)(a=n[o]).options.vertical&&a.reflow(a.box.shrink(0,s))},fitAxes:function(t){var e,i,n,s,o,a,h,l,c=this.groupAxes(t).any,d=0;for(h=0;h<t.length;h++)if(e=(o=t[h]).axes,i=o.contentBox,e.length>0)for(n=di(e),d=r.max(d,i.x1-n.x1),s=r.max(i.y1-n.y1,i.y2-n.y2),l=0;l<e.length;l++)(a=e[l]).reflow(a.box.translate(0,s));for(h=0;h<c.length;h++)(a=c[h]).reflow(a.box.translate(d,0))},reflowAxes:function(t){var e,i=this.groupAxes(t);for(e=0;e<t.length;e++)this.reflowPaneAxes(t[e]);i.x.length>0&&i.y.length>0&&(this.alignAxes(i.x,i.y),this.shrinkAxisWidth(t),this.alignAxes(i.x,i.y),this.shrinkAxisHeight(t),this.alignAxes(i.x,i.y),this.fitAxes(t))},reflowPaneAxes:function(t){var e,i=t.axes,n=i.length;if(n>0)for(e=0;e<n;e++)i[e].reflow(t.contentBox)},reflowCharts:function(t){var e,i,n=this.charts,s=n.length,r=this.box;for(i=0;i<s;i++)(e=n[i].pane)&&!j(e,t)||n[i].reflow(r)},reflowPanes:function(){var t,e,i,n,s,r=this.box,o=this.panes,a=o.length,h=r.height(),l=0,c=r.y1;for(t=0;t<a;t++)n=(e=o[t]).options.height,e.options.width=r.width(),e.options.height?(n.indexOf&&n.indexOf("%")&&(s=parseInt(n,10)/100,e.options.height=s*r.height()),e.reflow(r.clone()),h-=e.options.height):l++;for(t=0;t<a;t++)(e=o[t]).options.height||(e.options.height=h/l);for(t=0;t<a;t++)e=o[t],i=r.clone().move(r.x1,c),e.reflow(i),c+=e.options.height},backgroundBox:function(){var t,e,i,n,s,r,o=this.axes,a=o.length;for(i=0;i<a;i++)for(s=o[i],n=0;n<a;n++)r=o[n],s.options.vertical!==r.options.vertical&&(t=s.lineBox().clone().wrap(r.lineBox()),e=e?e.wrap(t):t);return e||this.box},getViewElements:function(t){var e=this.backgroundBox(),i=this.options.plotArea,n=i.border||{},s=k.fn.getViewElements.call(this,t);return N(s,[t.createRect(e,{fill:i.background,fillOpacity:i.opacity,zIndex:-2,strokeWidth:.1}),t.createRect(e,{id:this.id,data:{modelId:this.modelId},stroke:n.width?n.color:"",strokeWidth:n.width,fill:"#fff",fillOpacity:0,zIndex:-1,dashType:n.dashType})]),s},pointsByCategoryIndex:function(t){var e,i,n,s,r=this.charts,o=[];if(null!==t)for(e=0;e<r.length;e++)if("_navigator"!==r[e].pane.options.name&&(n=r[e].categoryPoints[t])&&n.length)for(i=0;i<n.length;i++)(s=n[i])&&F(s.value)&&null!==s.value&&o.push(s);return o},pointsBySeriesIndex:function(t){var e,i,n,s,r=this.charts,o=[];for(n=0;n<r.length;n++)for(e=r[n].points,s=0;s<e.length;s++)(i=e[s])&&i.options.index===t&&o.push(i);return o},paneByPoint:function(t){var e,i,n=this.panes;for(i=0;i<n.length;i++)if((e=n[i]).box.containsPoint(t))return e}}),Te=Se.extend({init:function(t,e){if(this.namedCategoryAxes={},this.namedValueAxes={},this.valueAxisRangeTracker=new Pe,t.length>0){this.invertAxes=j(t[0].type,[et,"bullet","verticalLine","verticalArea"]);for(var i=0;i<t.length;i++){var n=t[i].stack;if(n&&"100%"===n.type){this.stack100=!0;break}}}Se.fn.init.call(this,t,e)},options:{categoryAxis:{categories:[]},valueAxis:{}},render:function(t){t=t||this.panes,this.createCategoryAxes(t),this.aggregateCategories(t),this.createCharts(t),this.createValueAxes(t)},removeAxis:function(t){var e=t.options.name;Se.fn.removeAxis.call(this,t),t instanceof Bt?delete this.namedCategoryAxes[e]:(this.valueAxisRangeTracker.reset(e),delete this.namedValueAxes[e]),t===this.categoryAxis&&delete this.categoryAxis,t===this.valueAxis&&delete this.valueAxis},createCharts:function(t){var e,i,n,s,r=this.groupSeriesByPane();for(e=0;e<t.length;e++)n=r[(i=t[e]).options.name||"default"]||[],this.addToLegend(n),(s=this.filterVisibleSeries(n))&&(this.createAreaChart(_i(s,["area","verticalArea"]),i),this.createBarChart(_i(s,["column",et]),i),this.createBulletChart(_i(s,["bullet","verticalBullet"]),i),this.createLineChart(_i(s,["line","verticalLine"]),i),this.createCandlestickChart(_i(s,"candlestick"),i),this.createBoxPlotChart(_i(s,"boxPlot"),i),this.createOHLCChart(_i(s,"ohlc"),i))},aggregateCategories:function(t){var e,i,n,s,r=this.srcSeries||this.series,o=[];for(e=0;e<r.length;e++)i=r[e],n=this.seriesCategoryAxis(i),s=this.findPane(n.options.pane),(ui(n.options.type,ot)||i.categoryField)&&j(s,t)&&(i=this.aggregateSeries(i,n)),o.push(i);this.srcSeries=r,this.series=o},aggregateSeries:function(t,e){var i,n,s,r,o,a=e.options,h=ui(e.options.type,ot),l=a.categories,c=a.srcCategories||l,d=t.data,u=[],f=e.range(),g=p({},t),m=p({},t),v=Je;for(g.data=r=[],h&&(v=ti),i=0;i<d.length;i++)n=t.categoryField?v(t.categoryField,d[i]):c[i],(s=e.categoryIndex(n,f))>-1&&(u[s]=u[s]||[],u[s].push(i));for(o=new Ge(m,Et.current,$e.current),i=0;i<l.length;i++)r[i]=o.aggregatePoints(u[i],l[i]);return g},appendChart:function(t,e){for(var i=t.options.series,n=this.seriesCategoryAxis(i[0]).options.categories,s=r.max(0,Ze(i)-n.length);s--;)n.push("");this.valueAxisRangeTracker.update(t.valueAxisRanges),Se.fn.appendChart.call(this,t,e)},seriesPaneName:function(e){var i=this.options,n=e.axis,s=[].concat(i.valueAxis),r=t.grep(s,(function(t){return t.name===n}))[0],o=((i.panes||[{}])[0]||{}).name||"default";return(r||{}).pane||o},seriesCategoryAxis:function(t){var e=t.categoryAxis,i=e?this.namedCategoryAxes[e]:this.categoryAxis;if(!i)throw new Error("Unable to locate category axis with name "+e);return i},stackableChartOptions:function(t,e){var i,n=t.stack,s=n&&"100%"===n.type;return F(e.options.clip)?i=e.options.clip:s&&(i=!1),{isStacked:n,isStacked100:s,clip:i}},createBarChart:function(t,e){if(0!==t.length){var i=t[0],n=new Gt(this,o({series:t,invertAxes:this.invertAxes,gap:i.gap,spacing:i.spacing},this.stackableChartOptions(i,e)));this.appendChart(n,e)}},createBulletChart:function(t,e){if(0!==t.length){var i=t[0],n=new Wt(this,{series:t,invertAxes:this.invertAxes,gap:i.gap,spacing:i.spacing,clip:e.options.clip});this.appendChart(n,e)}},createLineChart:function(t,e){if(0!==t.length){var i=t[0],n=new ie(this,o({invertAxes:this.invertAxes,series:t},this.stackableChartOptions(i,e)));this.appendChart(n,e)}},createAreaChart:function(t,e){if(0!==t.length){var i=t[0],n=new ae(this,o({invertAxes:this.invertAxes,series:t},this.stackableChartOptions(i,e)));this.appendChart(n,e)}},createOHLCChart:function(t,e){if(0!==t.length){var i=t[0],n=new me(this,{invertAxes:this.invertAxes,gap:i.gap,series:t,spacing:i.spacing,clip:e.options.clip});this.appendChart(n,e)}},createCandlestickChart:function(t,e){if(0!==t.length){var i=t[0],n=new fe(this,{invertAxes:this.invertAxes,gap:i.gap,series:t,spacing:i.spacing,clip:e.options.clip});this.appendChart(n,e)}},createBoxPlotChart:function(t,e){if(0!==t.length){var i=t[0],n=new ve(this,{invertAxes:this.invertAxes,gap:i.gap,series:t,spacing:i.spacing,clip:e.options.clip});this.appendChart(n,e)}},axisRequiresRounding:function(t,e){var i,n,s=_i(this.series,Pt);for(i=0;i<s.length;i++)if((n=s[i].categoryAxis||"")===t||!n&&0===e)return!0},createCategoryAxes:function(t){var e,i,n,s,r,o,a,h=this.invertAxes,l=[].concat(this.options.categoryAxis),c=[];for(e=0;e<l.length;e++)if(i=l[e],n=this.findPane(i.pane),j(n,t)){if(r=i.name,s=i.categories||[],i.type||"",i=p({vertical:h,axisCrossingValue:h?ft:0},i),F(i.justified)||(i.justified=this.isJustified()),this.axisRequiresRounding(r,e)&&(i.justified=!1,i.roundToBaseUnit=!0),o=Ti(i,s[0])?new Rt(i):new Bt(i),r){if(this.namedCategoryAxes[r])throw new Error("Category axis with name "+r+" is already defined");this.namedCategoryAxes[r]=o}o.axisIndex=e,c.push(o),this.appendAxis(o)}a=this.categoryAxis||c[0],this.categoryAxis=a,h?this.axisY=a:this.axisX=a},isJustified:function(){var t,e,i=this.series;for(t=0;t<i.length;t++)if(e=i[t],!j(e.type,["area","verticalArea"]))return!1;return!0},createValueAxes:function(t){var e,i,n,s,o,a,h,l,c=this.valueAxisRangeTracker,d=c.query(),u=[].concat(this.options.valueAxis),f=this.invertAxes,g={vertical:!f},m=[];for(this.stack100&&(g.roundToMajorUnit=!1,g.labels={format:"P0"}),l=0;l<u.length;l++)if(e=u[l],i=this.findPane(e.pane),j(i,t)){if(h=e.name,a=ui(e.type,"log")?{min:.1,max:1}:{min:0,max:1},o=c.query(h)||d||a,0===l&&o&&d&&(o.min=r.min(o.min,d.min),o.max=r.max(o.max,d.max)),n=new(ui(e.type,"log")?A:z)(o.min,o.max,p({},g,e)),h){if(this.namedValueAxes[h])throw new Error("Value axis with name "+h+" is already defined");this.namedValueAxes[h]=n}n.axisIndex=l,m.push(n),this.appendAxis(n)}s=this.valueAxis||m[0],this.valueAxis=s,f?this.axisX=s:this.axisY=s},click:function(e,i){var n,s,r,o=e._eventCoordinates(i),a=new D(o.x,o.y),h=this.pointPane(a),l=[],c=[];if(h){for(n=h.axes,s=0;s<n.length;s++)(r=n[s]).getValue?fi(c,r.getValue(a)):fi(l,r.getCategory(a));0===l.length&&fi(l,this.categoryAxis.getCategory(a)),l.length>0&&c.length>0&&e.trigger("plotAreaClick",{element:t(i.target),category:ci(l),value:ci(c)})}},pointPane:function(t){var e,i,n=this.panes;for(i=0;i<n.length;i++)if((e=n[i]).contentBox.containsPoint(t))return e}}),Pe=l.extend({init:function(){this.axisRanges={}},update:function(t){var e,i,n,s=this.axisRanges;for(n in t)e=s[n],i=t[n],s[n]=e=e||{min:ft,max:gt},e.min=r.min(e.min,i.min),e.max=r.max(e.max,i.max)},reset:function(t){this.axisRanges[t]=void 0},query:function(t){return this.axisRanges[t]}}),Ae=Se.extend({init:function(t,e){this.namedXAxes={},this.namedYAxes={},this.xAxisRangeTracker=new Pe,this.yAxisRangeTracker=new Pe,Se.fn.init.call(this,t,e)},options:{xAxis:{},yAxis:{}},render:function(t){var e,i,n,s,r=this.groupSeriesByPane();for(t=t||this.panes,e=0;e<t.length;e++)n=r[(i=t[e]).options.name||"default"]||[],this.addToLegend(n),(s=this.filterVisibleSeries(n))&&(this.createScatterChart(_i(s,"scatter"),i),this.createScatterLineChart(_i(s,"scatterLine"),i),this.createBubbleChart(_i(s,"bubble"),i));this.createAxes(t)},appendChart:function(t,e){this.xAxisRangeTracker.update(t.xAxisRanges),this.yAxisRangeTracker.update(t.yAxisRanges),Se.fn.appendChart.call(this,t,e)},removeAxis:function(t){var e=t.options.name;Se.fn.removeAxis.call(this,t),t.options.vertical?(this.yAxisRangeTracker.reset(e),delete this.namedYAxes[e]):(this.xAxisRangeTracker.reset(e),delete this.namedXAxes[e]),t===this.axisX&&delete this.axisX,t===this.axisY&&delete this.axisY},seriesPaneName:function(e){var i=this.options,n=e.xAxis,s=[].concat(i.xAxis),r=t.grep(s,(function(t){return t.name===n}))[0],o=e.yAxis,a=[].concat(i.yAxis),h=t.grep(a,(function(t){return t.name===o}))[0],l=(i.panes||[{}])[0].name||"default";return(r||{}).pane||(h||{}).pane||l},createScatterChart:function(t,e){t.length>0&&this.appendChart(new ce(this,{series:t,clip:e.options.clip}),e)},createScatterLineChart:function(t,e){t.length>0&&this.appendChart(new de(this,{series:t,clip:e.options.clip}),e)},createBubbleChart:function(t,e){t.length>0&&this.appendChart(new ue(this,{series:t,clip:e.options.clip}),e)},createXYAxis:function(t,e,i){var n,s,o,a,h,l,c,d=t.name,u=e?this.namedYAxes:this.namedXAxes,f=e?this.yAxisRangeTracker:this.xAxisRangeTracker,g=p({},t,{vertical:e}),m=ui(g.type,"log"),v=f.query(),y=m?{min:.1,max:1}:{min:0,max:1},b=f.query(d)||v||y,w=this.series,x=[g.min,g.max];for(s=0;s<w.length;s++)if((a=(o=w[s])[e?"yAxis":"xAxis"])==g.name||0===i&&!a){h=Et.current.bindPoint(o,0).valueFields,x.push(h[e?"y":"x"]);break}for(0===i&&v&&(b.min=r.min(b.min,v.min),b.max=r.max(b.max,v.max)),c=0;c<x.length;c++)if(x[c]instanceof Date){l=!0;break}if(n=new(ui(g.type,ot)||!g.type&&l?Ot:m?A:z)(b.min,b.max,g),d){if(u[d])throw new Error((e?"Y":"X")+" axis with name "+d+" is already defined");u[d]=n}return this.appendAxis(n),n},createAxes:function(t){var e,n=this,s=n.options,r=[].concat(s.xAxis),o=[],a=[].concat(s.yAxis),h=[];i(r,(function(i){e=n.findPane(this.pane),j(e,t)&&o.push(n.createXYAxis(this,!1,i))})),i(a,(function(i){e=n.findPane(this.pane),j(e,t)&&h.push(n.createXYAxis(this,!0,i))})),n.axisX=n.axisX||o[0],n.axisY=n.axisY||h[0]},click:function(e,i){var n,s,r,o,a=e._eventCoordinates(i),h=new D(a.x,a.y),l=this.axes,c=l.length,d=[],u=[];for(n=0;n<c;n++)o=(s=l[n]).options.vertical?u:d,null!==(r=s.getValue(h))&&o.push(r);d.length>0&&u.length>0&&e.trigger("plotAreaClick",{element:t(i.target),x:ci(d),y:ci(u)})}}),ze=Se.extend({render:function(){var t=this.series;this.createPieChart(t)},createPieChart:function(t){var e=t[0],i=new we(this,{series:t,padding:e.padding,startAngle:e.startAngle,connectors:e.connectors,legend:this.options.legend});this.appendChart(i)},appendChart:function(t,e){Se.fn.appendChart.call(this,t,e),N(this.options.legend.items,t.legendItems)}}),De=ze.extend({render:function(){var t=this.series;this.createDonutChart(t)},createDonutChart:function(t){var e=t[0],i=new _e(this,{series:t,padding:e.padding,connectors:e.connectors,legend:this.options.legend});this.appendChart(i)}}),Ee=T.extend({options:{easing:"easeOutElastic",duration:ut},setup:function(){var t,e=this.element,i=e.config;e.options.singleSegment&&(i=e),this.endRadius=i.r,t=this.startRadius=i.ir||0,i.r=t},step:function(t){var e=this.element,i=this.endRadius,n=e.config,s=this.startRadius;e.options.singleSegment&&(n=e),n.r=G(s,i,t)}}),Me=T.extend({options:{easing:"easeOutElastic",duration:ut},setup:function(){var t=this.element;t.endRadius=t.radius,t.radius=0},step:function(t){var e=this.element,i=e.endRadius;e.radius=G(0,i,t)}}),Le=O(et,w),Ie=O(bt,Ee),Be=O("bubble",Me),Re=l.extend({init:function(t){this.view=t,this._overlays=[]},options:{fill:"#fff",fillOpacity:.2,stroke:"#fff",strokeWidth:1,strokeOpacity:.2},show:function(t){var e,i,n,s,r,o=this.view,a=this._overlays;for(this.hide(),this._points=t=[].concat(t),n=0;n<t.length;n++)(s=t[n])&&((r=s.options)&&!(r.highlight||{}).visible||(s.highlightOverlay&&!1!==s.visible&&(e=s.highlightOverlay(o,this.options))&&(i=o.renderElement(e),a.push(i),s.owner&&s.owner.pane&&U(s.owner.pane.chartContainer.id).appendChild(i)),s.toggleHighlight&&s.toggleHighlight(o)))},hide:function(){for(var t,e,i,n,s=this._points,r=this._overlays;r.length;)(t=this._overlays.pop()).parentNode.removeChild(t);if(s)for(e=0;e<s.length;e++)(i=s[e])&&((n=i.options)&&!(n.highlight||{}).visible||i.toggleHighlight&&i.toggleHighlight(this.view));this._points=[]}}),Oe=l.extend({init:function(e,i){this.options=p({},this.options,i),this.chartElement=e,this.template=Oe.template,this.template||(this.template=Oe.template=X("<div class='k-tooltip' style='display:none; position: absolute; font: #= d.font #;border: #= d.border.width #px solid;opacity: #= d.opacity #; filter: alpha(opacity=#= d.opacity * 100 #);'></div>")),this.element=t(this.template(this.options)).appendTo(e),this._moveProxy=a(this.move,this)},options:{border:{width:1},opacity:1,animation:{duration:150}},move:function(){var t,e=this.options,i=this.element;this.anchor&&(t=this._offset(),this.visible||i.css({top:t.top,left:t.left}),i.stop(!0,!0).show().animate({left:t.left,top:t.top},e.animation.duration),this.visible=!0)},_padding:function(){if(!this._chartPadding){var t=this.chartElement;this._chartPadding={top:parseInt(t.css("paddingTop"),10),left:parseInt(t.css("paddingLeft"),10)}}return this._chartPadding},_offset:function(){var e=this.element,i=this.anchor,n=this._padding(),s=Q(i.y+n.top),r=Q(i.x+n.left),o=h.support.zoomLevel(),a=t(window),l=window.pageYOffset||document.documentElement.scrollTop||0,c=window.pageXOffset||document.documentElement.scrollLeft||0;return l=this.chartElement.offset().top-l,c=this.chartElement.offset().left-c,{top:s+=this._currentPosition(s+l,e.outerHeight(),a.outerHeight()/o),left:r+=this._currentPosition(r+c,e.outerWidth(),a.outerWidth()/o)}},setStyle:function(t){this.element.css({backgroundColor:t.background,borderColor:t.border.color||t.background,font:t.font,color:t.color,opacity:t.opacity,borderWidth:t.border.width})},show:function(){this.showTimeout=setTimeout(this._moveProxy,100)},hide:function(){clearTimeout(this.showTimeout),this.visible&&(this._hideElement(),this.point=null,this.visible=!1,this.index=null)},_hideElement:function(){this.element.fadeOut()},_pointContent:function(t){var e,i=p({},this.options,t.options.tooltip);return F(t.value)&&(e=t.value.toString()),i.template?e=m(i.template)({value:t.value,category:t.category,series:t.series,dataItem:t.dataItem,percentage:t.percentage,low:t.low,high:t.high,xLow:t.xLow,xHigh:t.xHigh,yLow:t.yLow,yHigh:t.yHigh}):i.format&&(e=t.formatValue(i.format)),e},_pointAnchor:function(t){var e=this.element;return t.tooltipAnchor(e.outerWidth(),e.outerHeight())},_currentPosition:function(t,e,i){var n=0;return t+e>i&&(n=i-(t+e)),t<0&&(n=-t),n},_updateStyle:function(t,e){if(F(t.background)||(t.background=e.color||e.options.color),!F(t.color)){var i=this.element;new C(t.background).percBrightness()>180?i.addClass("k-tooltip-inverse"):i.removeClass("k-tooltip-inverse")}}}),Ne=Oe.extend({show:function(t){var e=p({},this.options,t.options.tooltip);t&&(this.element.html(this._pointContent(t)),this.anchor=this._pointAnchor(t),this.anchor?(this._updateStyle(e,t),this.setStyle(e),Oe.fn.show.call(this,t)):this.hide())}}),Ve=Oe.extend({init:function(t,e,i){Oe.fn.init.call(this,t,i),this.plotArea=e},options:{sharedTemplate:"<table><th colspan='2'>#= categoryText #</th># for(var i = 0; i < points.length; i++) { ## var point = points[i]; #<tr># if(point.series.name) { # <td> #= point.series.name #:</td># } #<td>#= content(point) #</td></tr># } #</table>",categoryFormat:"{0:d}"},showAt:function(e,i){var n,s=this.options,r=this.plotArea.categoryAxis,o=r.pointCategoryIndex(i),a=r.getCategory(i),h=r.getSlot(o);(e=t.grep(e,(function(t){var e=t.series.tooltip;return!(e&&!1===e.visible)}))).length>0&&(n=this._content(e,a),this.element.html(n),this.anchor=this._slotAnchor(i,h),this._updateStyle(s,e[0]),this.setStyle(s),Oe.fn.show.call(this))},_slotAnchor:function(t,e){var i=this.plotArea.categoryAxis,n=t.y-this.element.height()/2;return i.options.vertical?D(t.x,n):D(e.center().x,n)},_content:function(t,e){return h.template(this.options.sharedTemplate)({points:t,category:e,categoryText:V(this.options.categoryFormat,e),content:this._pointContent})}}),Fe=k.extend({init:function(t,e){k.fn.init.call(this,e),this.axis=t,this.id||(this.id=Z()),this._visible=!1,this.stickyMode=t instanceof Bt,this.enableDiscovery()},options:{color:"#000",width:1,zIndex:-1,tooltip:{visible:!1}},repaint:function(){this.element;this.getViewElements(this._view),this.element.refresh(U(this.id))},showAt:function(t){this._visible=!0,this.point=t,this.repaint(),this.options.tooltip.visible&&(this.tooltip||(this.tooltip=new He(this,p({},this.options.tooltip,{stickyMode:this.stickyMode}))),this.tooltip.showAt(t))},hide:function(){this._visible&&(this._visible=!1,this.repaint(),this.tooltip&&this.tooltip.hide())},linePoints:function(){var t,e,i,n=this.axis,s=n.options.vertical,r=this.getBox(),o=this.point,a=s?St:Ct;return e=D(r.x1,r.y1),i=s?D(r.x2,r.y1):D(r.x1,r.y2),o&&(this.stickyMode?(t=n.getSlot(n.pointCategoryIndex(o)),e[a]=i[a]=t.center()[a]):e[a]=i[a]=o[a]),this.box=r,[e,i]},getBox:function(){var t,e,i,n=this.axis,s=n.pane.axes,r=s.length,o=n.options.vertical,a=n.lineBox().clone(),h=o?Ct:St;for(i=0;i<r;i++)(e=s[i]).options.vertical!=o&&(t?t.wrap(e.lineBox()):t=e.lineBox().clone());return a[h+1]=t[h+1],a[h+2]=t[h+2],a},getViewElements:function(t){var e=this.options,i=[];return this.points=this.linePoints(),this.element=t.createPolyline(this.points,!1,{data:{modelId:this.modelId},id:this.id,stroke:e.color,strokeWidth:e.width,strokeOpacity:e.opacity,dashType:e.dashType,zIndex:e.zIndex,visible:this._visible}),i.push(this.element),this._view=t,N(i,k.fn.getViewElements.call(this,t)),i},destroy:function(){this.tooltip&&this.tooltip.destroy(),k.fn.destroy.call(this)}}),He=Oe.extend({init:function(t,e){var i=t.axis.getRoot().parent.element;this.crosshair=t,Oe.fn.init.call(this,i,p({},this.options,{background:t.axis.plotArea.options.seriesColors[0]},e)),this._updateStyle(this.options,{}),this.setStyle(this.options)},options:{padding:10},showAt:function(t){var e=this.element;this.point=t,this.element.html(this.content(t)),this.anchor=this.getAnchor(e.outerWidth(),e.outerHeight()),this.move()},move:function(){var t=this.element,e=this._offset();t.css({top:e.top,left:e.left}).show()},content:function(t){var e,i,n=this.options,s=this.crosshair.axis,r=s.options;return i=e=s[n.stickyMode?"getCategory":"getValue"](t),n.template?e=m(n.template)({value:i}):n.format?e=V(n.format,i):r.type===ot&&(e=V(r.labels.dateFormats[r.baseUnit],i)),e},getAnchor:function(t,e){var i,n,s=this.options,r=s.position,o=this.crosshair.axis.options.vertical,a=this.crosshair.points,h=a[0],l=a[1],c=t/2,d=e/2,u=s.padding;return o?r===pt?(i=h.x-t-u,n=h.y-d):(i=l.x+u,n=l.y-d):r===it?(i=l.x-c,n=l.y+u):(i=h.x-c,n=h.y-e-u),D(i,n)},hide:function(){this.element.hide(),this.point=null},destroy:function(){this.element.remove(),this.element=null,this.point=null}}),Ue={min:function(t){var e,i,n=ft,s=t.length;for(e=0;e<s;e++)mi(i=t[e])&&(n=r.min(n,i));return n===ft?t[0]:n},max:function(t){var e,i,n=gt,s=t.length;for(e=0;e<s;e++)mi(i=t[e])&&(n=r.max(n,i));return n===gt?t[0]:n},sum:function(t){var e,i,n=t.length,s=0;for(e=0;e<n;e++)mi(i=t[e])&&(s+=i);return s},count:function(t){var e,i,n=t.length,s=0;for(e=0;e<n;e++)null!==(i=t[e])&&F(i)&&s++;return s},avg:function(t){var e=t[0],i=vi(t);return i>0&&(e=Ue.sum(t)/i),e},first:function(t){var e,i,n=t.length;for(e=0;e<n;e++)if(null!==(i=t[e])&&F(i))return i;return t[0]}};function $e(){this._defaults={}}$e.prototype={register:function(t,e){for(var i=0;i<t.length;i++)this._defaults[t[i]]=e},query:function(t){return this._defaults[t]}},$e.current=new $e;var je=c.extend({init:function(e,i,n){var s,r,o=e.element,l=i.lineBox(),d=this.getValueAxis(i),u=d.lineBox();c.fn.init.call(this),this.options=p({},this.options,n),n=this.options,this.chart=e,this.chartElement=o,this.categoryAxis=i,this._dateAxis=this.categoryAxis instanceof Rt,this.valueAxis=d,this._dateAxis&&p(n,{min:ei(n.min),max:ei(n.max),from:ei(n.from),to:ei(n.to)}),this.template=je.template,this.template||(this.template=je.template=X("<div class='k-selector' style='width: #= d.width #px; height: #= d.height #px; top: #= d.offset.top #px; left: #= d.offset.left #px;'><div class='k-mask'></div><div class='k-mask'></div><div class='k-selection'><div class='k-selection-bg'></div><div class='k-handle k-leftHandle'><div></div></div><div class='k-handle k-rightHandle'><div></div></div></div></div>")),r={left:parseInt(o.css("paddingLeft"),10),right:parseInt(o.css("paddingTop"),10)},this.options=p({},{width:l.width(),height:u.height(),padding:r,offset:{left:u.x2+r.left,top:u.y1+r.right},from:n.min,to:n.max},n),this.options.visible&&(this.wrapper=s=t(this.template(this.options)).appendTo(o),this.selection=s.find(".k-selection"),this.leftMask=s.find(".k-mask").first(),this.rightMask=s.find(".k-mask").last(),this.leftHandle=s.find(".k-leftHandle"),this.rightHandle=s.find(".k-rightHandle"),this.options.selection={border:{left:parseFloat(this.selection.css("border-left-width"),10),right:parseFloat(this.selection.css("border-right-width"),10)}},this.leftHandle.css("top",(this.selection.height()-this.leftHandle.height())/2),this.rightHandle.css("top",(this.selection.height()-this.rightHandle.height())/2),this.set(this._index(n.from),this._index(n.to)),this.bind(this.events,this.options),this.wrapper[0].style.cssText=this.wrapper[0].style.cssText,this.wrapper.on(mt,a(this._mousewheel,this)),h.UserEvents?this.userEvents=new h.UserEvents(this.wrapper,{global:!0,stopPropagation:!0,multiTouch:!0,start:a(this._start,this),move:a(this._move,this),end:a(this._end,this),tap:a(this._tap,this),gesturestart:a(this._gesturechange,this),gesturechange:a(this._gesturechange,this)}):this.leftHandle.add(this.rightHandle).removeClass("k-handle"))},events:["selectStart","select","selectEnd"],options:{visible:!0,mousewheel:{zoom:"both"},min:gt,max:ft},destroy:function(){var t=this.userEvents;t&&t.destroy()},_rangeEventArgs:function(t){return{axis:this.categoryAxis.options,from:this._value(t.from),to:this._value(t.to)}},_start:function(e){var i,n=this.options,s=t(e.event.target);!this._state&&s&&(this.chart._unsetActivePoint(),this._state={moveTarget:s.parents(".k-handle").add(s).first(),startLocation:e.x?e.x.location:0,range:{from:this._index(n.from),to:this._index(n.to)}},i=this._rangeEventArgs({from:this._index(n.from),to:this._index(n.to)}),this.trigger("selectStart",i)&&(this.userEvents.cancel(),this._state=null))},_move:function(t){if(this._state){var e=this._state,i=this.options,n=this.categoryAxis.options.categories,s=this._index(i.from),o=this._index(i.to),a=this._index(i.min),h=this._index(i.max),l=e.startLocation-t.x.location,c=e.range,d=c.from,u=c.to,p=c.to-c.from,f=e.moveTarget,g=this.wrapper.width()/(n.length-1),m=r.round(l/g);f&&(t.preventDefault(),f.is(".k-selection, .k-selection-bg")?(c.from=r.min(r.max(a,s-m),h-p),c.to=r.min(c.from+p,h)):f.is(".k-leftHandle")?(c.from=r.min(r.max(a,s-m),h-1),c.to=r.max(c.from+1,c.to)):f.is(".k-rightHandle")&&(c.to=r.min(r.max(a+1,o-m),h),c.from=r.min(c.to-1,c.from)),c.from===d&&c.to===u||(this.move(c.from,c.to),this.trigger("select",this._rangeEventArgs(c))))}},_end:function(){var t=this._state.range;delete this._state,this.set(t.from,t.to),this.trigger("selectEnd",this._rangeEventArgs(t))},_gesturechange:function(t){if(this._state){var e=this.chart,i=this._state,n=this.options,s=this.categoryAxis,o=i.range,a=e._toModelCoordinates(t.touches[0].x.location).x,h=e._toModelCoordinates(t.touches[1].x.location).x,l=r.min(a,h),c=r.max(a,h);t.preventDefault(),i.moveTarget=null,o.from=s.pointCategoryIndex(new v.Point2D(l))||n.min,o.to=s.pointCategoryIndex(new v.Point2D(c))||n.max,this.move(o.from,o.to)}},_tap:function(t){var e=this.options,i=this.chart._eventCoordinates(t),n=this.categoryAxis,s=n.pointCategoryIndex(new v.Point2D(i.x,n.box.y1)),o=this._index(e.from),a=this._index(e.to),h=this._index(e.min),l=this._index(e.max),c=a-o,d=o+c/2,u=r.round(d-s),p={},f=3===t.event.which;this._state||f||(t.preventDefault(),this.chart._unsetActivePoint(),n.options.justified||u--,p.from=r.min(r.max(h,o-u),l-c),p.to=r.min(p.from+c,l),this._start(t),this._state&&(this._state.range=p,this.trigger("select",this._rangeEventArgs(p)),this._end()))},_mousewheel:function(t){var e=this,i=e.options,n=Y(t);if(e._start({event:{target:e.selection}}),e._state){var s=e._state.range;t.preventDefault(),t.stopPropagation(),r.abs(n)>1&&(n*=3),i.mousewheel.reverse&&(n*=-1),e.expand(n)&&e.trigger("select",{axis:e.categoryAxis.options,delta:n,originalEvent:t,from:e._value(s.from),to:e._value(s.to)}),e._mwTimeout&&clearTimeout(e._mwTimeout),e._mwTimeout=setTimeout((function(){e._end()}),150)}},_index:function(t){var e=this.categoryAxis,i=e.options.categories,n=t;return t instanceof Date&&(n=gi(t,i),!e.options.justified&&t>W(i)&&(n+=1)),n},_value:function(t){var e=this.categoryAxis.options.categories,i=t;return this._dateAxis&&(i=t>e.length-1?this.options.max:e[t]),i},_slot:function(t){return this.categoryAxis.getSlot(this._index(t))},move:function(t,e){var i,n,s,o,a=this.options,h=a.offset,l=a.padding,c=a.selection.border;s=this._slot(t),i=Q(s.x1-h.left+l.left),this.leftMask.width(i),this.selection.css("left",i),s=this._slot(e),n=Q(a.width-(s.x1-h.left+l.left)),this.rightMask.width(n),(o=a.width-n)!=a.width&&(o+=c.right),this.rightMask.css("left",o),this.selection.width(r.max(a.width-(i+n)-c.right,0))},set:function(t,e){var i=this.options,n=this._index(i.min),s=this._index(i.max);t=q(this._index(t),n,s),e=q(this._index(e),t+1,s),i.visible&&this.move(t,e),i.from=this._value(t),i.to=this._value(e)},expand:function(t){var e=this.options,i=this._index(e.min),n=this._index(e.max),s=e.mousewheel.zoom,r=this._index(e.from),o=this._index(e.to),a={from:r,to:o},h=p({},a);if(this._state&&(a=this._state.range),s!==wt&&(a.from=q(q(r-t,0,o-1),i,n)),s!==pt&&(a.to=q(q(o+t,a.from+1,n),i,n)),a.from!==h.from||a.to!==h.to)return this.set(a.from,a.to),!0},getValueAxis:function(t){var e,i,n=t.pane.axes,s=n.length;for(e=0;e<s;e++)if((i=n[e]).options.vertical!==t.options.vertical)return i}}),Ge=function(t,e,i){var n,s=e.canonicalFields(t),r=e.valueFields(t),o=e.sourceFields(t,s),a=this._seriesFields=[],h=i.query(t.type),l=t.aggregate||h;for(this._series=t,this._binder=e,n=0;n<s.length;n++){var c,d=s[n];if("object"===_typeof(l))c=l[d];else{if(0!==n&&!j(d,r))break;c=l}c&&a.push({canonicalName:d,name:o[n],transform:g(c)?c:Ue[c]})}};function We(t){return qe(t).max}function qe(t){var e,i,n=ft,s=gt,o=t.length;for(e=0;e<o;e++)null!==(i=t[e])&&isFinite(i)&&(n=r.min(n,i),s=r.max(s,i));return{min:n===ft?void 0:n,max:s===gt?void 0:s}}function Ye(t,e,i,n){var s,r,o=(n.x-i.x)*(t.y-i.y)-(n.y-i.y)*(t.x-i.x),a=(n.y-i.y)*(e.x-t.x)-(n.x-i.x)*(e.y-t.y);return 0!==a&&(r=o/a,s=new D(t.x+r*(e.x-t.x),t.y+r*(e.y-t.y))),s}function Qe(t){delete t.bar,delete t.column,delete t.line,delete t.verticalLine,delete t.pie,delete t.donut,delete t.area,delete t.verticalArea,delete t.scatter,delete t.scatterLine,delete t.bubble,delete t.candlestick,delete t.ohlc,delete t.boxPlot,delete t.bullet,delete t.verticalBullet,delete t.polarArea,delete t.polarLine,delete t.radarArea,delete t.radarLine}function Xe(t){var e,i,n,s,r=t.series,o=t.seriesColors||[];for(e=0;e<r.length;e++)i=r[e],n=o[e%o.length],i.color=i.color||n,(s=i._defaults)&&(s.color=s.color||n)}function Ze(t){var e,i=t.length,n=0;for(e=0;e<i;e++)n=r.max(n,t[e].data.length);return n}function Ke(t){return t*t}function Je(t,e){return null===e?e:f(t,!0)(e)}function ti(t,e){if(null===e)return e;var i="_date_"+t,n=e[i];return n||(n=ei(f(t,!0)(e)),e[i]=n),n}function ei(t){var e,i;if(t instanceof Date)e=t;else if("string"===_typeof(t))e=h.parseDate(t)||new Date(t);else if(t)if(n(t))for(e=[],i=0;i<t.length;i++)e.push(ei(t[i]));else e=new Date(t);return e}function ii(t){return n(t)?s(t,ii):t?ei(t).getTime():void 0}function ni(t,e,i,n){var s,r=t;return t&&(s=(t=ei(t)).getHours(),"years"===i?r=new Date(t.getFullYear()+e,0,1):"months"===i?r=new Date(t.getFullYear(),t.getMonth()+e,1):"weeks"===i?(r=ni(si(t,n),7*e,at),h.date.adjustDST(r,s)):i===at?(r=new Date(t.getFullYear(),t.getMonth(),t.getDate()+e),h.date.adjustDST(r,s)):"hours"===i?(r=new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours()+e),e>0&&pi(t,r)&&(r=ni(t,e+1,i,n))):"minutes"===i?(r=new Date(t.getTime()+6e4*e)).setSeconds(0):"seconds"===i&&(r=new Date(t.getTime()+1e3*e)),r.getMilliseconds()>0&&r.setMilliseconds(0)),r}function si(t,e){var i=t.getDay(),n=0;if(!isNaN(i))for(e=e||0;i!==e;)0===i?i=6:i--,n++;return hi(t,864e5*-n)}function ri(t,e,i){return ni(t=ei(t),0,e,i)}function oi(t,e,i){return(t=ei(t))&&ri(t,e,i).getTime()===t.getTime()?t:ni(t,1,e,i)}function ai(t,e){return t.getTime()-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset())}function hi(t,e){var i=t.getTimezoneOffset(),n=new Date(t.getTime()+e),s=n.getTimezoneOffset()-i;return new Date(n.getTime()+6e4*s)}function li(t,e,i){return"years"===i?e.getFullYear()-t.getFullYear():"months"===i?12*li(t,e,"years")+e.getMonth()-t.getMonth():i===at?r.floor(ai(e,t)/864e5):r.floor((e-t)/xt[i])}function ci(t){return 1===t.length?t[0]:t}function di(t){var e,i,n,s=t.length;if(s>0)for(i=0;i<s;i++)n=t[i].box,e?e.wrap(n):e=n.clone();return e||x()}function ui(t,e){return t&&e?t.toLowerCase()===e.toLowerCase():t===e}function pi(t,e){return t&&e?ii(t)===ii(e):t===e}function fi(t,e){null!==e&&t.push(e)}function gi(t,e){for(var i,n,s=0,o=e.length-1;s<=o;)if((n=e[i=r.floor((s+o)/2)])<t)s=i+1;else{if(!(n>t)){for(;pi(e[i-1],t);)i--;return i}o=i-1}return e[i]<=t?i:i-1}function mi(t){return"number"==typeof t&&!isNaN(t)}function vi(t){var e,i=t.length,n=0;for(e=0;e<i;e++)mi(t[e])&&n++;return n}function yi(t){return vi(t)===t.length}function bi(t){var e,i,n,s={};for(e=0;e<t.length;e++)(n=(i=t[e]).options.name)&&(s[n]=i.range());return s}function wi(t,e,i,n){var s,r,o,a=!1;if((i=i||{}).excluded=i.excluded||[],o=i.defaults=i.defaults||{},!((i.depth=i.depth||0)>5)){for(s in t)!j(s,i.excluded)&&t.hasOwnProperty(s)&&(r=t[s],g(r)?(a=!0,n||(t[s]=K(r(e),o[s]))):"object"===_typeof(r)&&(i.defaults=o[s],i.depth++,a=wi(r,e,i,n)||a,i.depth--));return a}}function xi(t,e){var i,n,s,r=[],o=t.groupNameTemplate,a=e.length;for(F(o)?(h.logToConsole("'groupNameTemplate' is obsolete and will be removed in future versions. Specify the group name template as 'series.name'"),o&&(i=m(o))):0===(i=m(t.name||""))._slotCount&&(i=m(F(t.name)?"#= group.value #: #= series.name #":"#= group.value #")),n=0;n<a;n++)(s=p({},t)).color=void 0,s._groupIx=n,r.push(s),i&&(s.name=i({series:s,group:e[n]}));return r}function _i(t,e){var i,n,s=[];for(e=[].concat(e),i=0;i<t.length;i++)n=t[i],j(n.type,e)&&s.push(n);return s}function ki(e,i){if(e instanceof Date){for(var n=0,s=i.length;n<s;n++)if(pi(i[n],e))return n;return-1}return t.inArray(e,i)}function Ci(t,e){e=e||H;for(var i=1,n=t.length;i<n;i++)if(e(t[i],t[i-1])<0){t.sort(e);break}return t}function Si(t,e){var i,n=Ci(t,e),s=n.length,r=s>0?[n[0]]:[];for(e=e||H,i=1;i<s;i++)0!==e(n[i],W(r))&&r.push(n[i]);return r}function Ti(t,e){var i=t.type,n=e instanceof Date;return!i&&n||ui(i,ot)}function Pi(t){var e,i,n,s,r=[],o=t.length;for(e=0;e<o;e++)for(s=(i=t[e]).length,n=0;n<s;n++)r[n]=r[n]||[],r[n].push(i[n]);return r}function Ai(t,e){if(t.indexOf(".")>-1)for(var i,n=t.split("."),s="";n.length>1;)s+=n.shift(),i=h.getter(s)(e)||{},h.setter(s)(e,i),s+="."}Ge.prototype={aggregatePoints:function(t,e){var i,s,r,o,a=this._bindPoints(t||[]),l=this._series,c=this._seriesFields,d=a.dataItems[0],u={};if(d&&!mi(d)&&!n(d)){var p=function(){};p.prototype=d,u=new p}for(i=0;i<c.length;i++){if(s=c[i],r=this._bindField(a.values,s.canonicalName),null!==(o=s.transform(r,l,a.dataItems,e))&&"object"===_typeof(o)&&!F(o.length)){u=o;break}F(o)&&(Ai(s.name,u),h.setter(s.name)(u,o))}return u},_bindPoints:function(t){var e,i,n=this._binder,s=this._series,r=[],o=[];for(e=0;e<t.length;e++)i=t[e],r.push(n.bindPoint(s,i)),o.push(s.data[i]);return{values:r,dataItems:o}},_bindField:function(t,e){var i,n,s,r,o=[],a=t.length;for(i=0;i<a;i++)r=(n=t[i]).valueFields,s=F(r[e])?r[e]:n.fields[e],o.push(s);return o}},o(t.easing,{easeOutElastic:function(t,e,i,n){var s=1.70158,o=0,a=n;return 0===t?i:1===t?i+n:(o||(o=.5),a<r.abs(n)?(a=n,s=o/4):s=o/(2*r.PI)*r.asin(n/a),a*r.pow(2,-10*t)*r.sin((1*t-s)*(1.1*r.PI)/o)+n+i)}}),v.ui.plugin(zt),Dt.current.register(Te,[et,"column","line","verticalLine","area","verticalArea","candlestick","ohlc","bullet","verticalBullet","boxPlot"]),Dt.current.register(Ae,["scatter","scatterLine","bubble"]),Dt.current.register(ze,[bt]),Dt.current.register(De,["donut"]),Et.current.register([et,"column","line","verticalLine","area","verticalArea"],[kt],["category","color","noteText","errorLow","errorHigh"]),$e.current.register([et,"column","line","verticalLine","area","verticalArea"],{value:"max",color:"first",noteText:"first",errorLow:"min",errorHigh:"max"}),Et.current.register(["scatter","scatterLine","bubble"],[Ct,St],["color","noteText","xErrorLow","xErrorHigh","yErrorLow","yErrorHigh"]),Et.current.register(["bubble"],[Ct,St,"size"],["color","category","noteText"]),Et.current.register(["candlestick","ohlc"],["open","high","low","close"],["category","color","downColor","noteText"]),$e.current.register(["candlestick","ohlc"],{open:"max",high:"max",low:"min",close:"max",color:"first",downColor:"first",noteText:"first"}),Et.current.register(["boxPlot"],["lower","q1","median","q3","upper","mean","outliers"],["category","color","noteText"]),$e.current.register(["boxPlot"],{lower:"max",q1:"max",median:"max",q3:"max",upper:"max",mean:"max",outliers:"first",color:"first",noteText:"first"}),Et.current.register(["bullet","verticalBullet"],["current","target"],["category","color","visibleInLegend","noteText"]),$e.current.register(["bullet","verticalBullet"],{current:"max",target:"max",color:"first",noteText:"first"}),Et.current.register([bt,"donut"],[kt],["category","color","explode","visibleInLegend","visible"]),p(v,{EQUALLY_SPACED_SERIES:Pt,Aggregates:Ue,AreaChart:ae,AreaSegment:oe,AxisGroupRangeTracker:Pe,Bar:Ut,BarAnimationDecorator:Le,BarChart:Gt,BarLabel:Mt,BubbleAnimationDecorator:Be,BubbleChart:ue,BulletChart:Wt,CandlestickChart:fe,Candlestick:pe,CategoricalChart:jt,CategoricalErrorBar:Xt,CategoricalPlotArea:Te,CategoryAxis:Bt,ChartContainer:Ce,ClusterLayout:Nt,Crosshair:Fe,CrosshairTooltip:He,DateCategoryAxis:Rt,DateValueAxis:Ot,DefaultAggregates:$e,DonutChart:_e,DonutPlotArea:De,DonutSegment:xe,ErrorBarBase:Qt,ErrorRangeCalculator:$t,Highlight:Re,SharedTooltip:Ve,Legend:It,LineChart:ie,LinePoint:Kt,LineSegment:te,Pane:ke,PieAnimation:Ee,PieAnimationDecorator:Ie,PieChart:we,PiePlotArea:ze,PieSegment:be,PlotAreaBase:Se,PlotAreaFactory:Dt,PointEventsMixin:Ft,ScatterChart:ce,ScatterErrorBar:Zt,ScatterLineChart:de,Selection:je,SeriesAggregator:Ge,SeriesBinder:Et,ShapeElement:L,SplineSegment:se,SplineAreaSegment:he,StackWrap:Vt,Tooltip:Ne,OHLCChart:me,OHLCPoint:ge,XYPlotArea:Ae,addDuration:ni,areNumbers:yi,axisGroupBox:di,categoriesCount:Ze,ceilDate:oi,countNumbers:vi,duration:li,ensureTree:Ai,indexOf:ki,isNumber:mi,floorDate:ri,filterSeriesByType:_i,lteDateIndex:gi,evalOptions:wi,singleItemOrArray:ci,sortDates:Ci,sparseArrayLimits:qe,startOfWeek:si,transpose:Pi,toDate:ei,toTime:ii,uniqueDates:Si})}(window.kendo.jQuery),function(t,e){var i=Math,n=window.kendo,s=n.deepExtend,r=n.dataviz,o=r.AreaSegment,a=r.Axis,h=r.AxisGroupRangeTracker,l=r.BarChart,c=r.Box2D,d=r.CategoryAxis,u=r.CategoricalChart,p=r.CategoricalPlotArea,f=r.ChartElement,g=r.CurveProcessor,m=r.DonutSegment,v=r.LineChart,y=r.LineSegment,b=r.LogarithmicAxis,w=r.NumericAxis,x=r.PlotAreaBase,_=r.PlotAreaFactory,k=r.Point2D,C=r.Ring,S=r.ScatterChart,T=r.ScatterLineChart,P=r.SeriesBinder,A=r.SplineSegment,z=r.SplineAreaSegment,D=r.append,E=r.getSpacing,M=r.filterSeriesByType,L=r.limitValue,I=r.round,B="arc",R=r.COORD_PRECISION,O=i.PI/180,N=["polarArea","polarLine","polarScatter"],V=["radarArea","radarColumn","radarLine"],F={renderGridLines:function(t,e){var n,s,r=this.options,o=i.abs(this.box.center().y-e.lineBox().y1),a=!1,h=[];return r.majorGridLines.visible&&(n=this.majorGridLineAngles(e),a=!0,h=this.gridLineElements(t,n,o,r.majorGridLines)),r.minorGridLines.visible&&(s=this.minorGridLineAngles(e,a),D(h,this.gridLineElements(t,s,o,r.minorGridLines))),h},gridLineElements:function(t,e,i,n){var s,r,o,a=this.box.center(),h=[];for(o={data:{modelId:this.plotArea.modelId},zIndex:-1,strokeWidth:n.width,stroke:n.color,dashType:n.dashType},s=0;s<e.length;s++)r=k.onCircle(a,e[s],i),h.push(t.createLine(a.x,a.y,r.x,r.y,o));return h},gridLineAngles:function(e,i,n){var s=this,r=s.intervals(i,n);return t.map(r,(function(t){var i=s.intervalAngle(t);if(!e.options.visible||90!==i)return i}))}},H=d.extend({options:{startAngle:90,labels:{margin:E(10)},majorGridLines:{visible:!0},justified:!0},range:function(){return{min:0,max:this.options.categories.length}},reflow:function(t){this.box=t,this.reflowLabels()},lineBox:function(){return this.box},reflowLabels:function(){var t,e,i=new c,n=this.labels;for(e=0;e<n.length;e++)n[e].reflow(i),t=n[e].box,n[e].reflow(this.getSlot(e).adjacentBox(0,t.width(),t.height()))},intervals:function(t,e){var i,n=this.options,s=n.categories.length,r=0,o=0,a=s/t||1,h=360/a,l=[];for(e&&(o=360/(s/e)),i=0;i<a;i++)(r=I(r,R))%o!=0&&l.push(r%360),n.reverse?r=360+r-h:r+=h;return l},majorIntervals:function(){return this.intervals(1)},minorIntervals:function(){return this.intervals(.5)},intervalAngle:function(t){return(360+t+this.options.startAngle)%360},majorAngles:function(){return t.map(this.majorIntervals(),t.proxy(this.intervalAngle,this))},renderLine:function(){return[]},majorGridLineAngles:function(t){return this.gridLineAngles(t,1)},minorGridLineAngles:function(t,e){return this.gridLineAngles(t,.5,e?1:0)},renderPlotBands:function(t){var e,n,s,r,o,a,h=this.options.plotBands||[],l=[];for(e=0;e<h.length;e++)n=h[e],s=this.plotBandSlot(n),r=this.getSlot(n.from),o=n.from-i.floor(n.from),s.startAngle+=o*r.angle,a=i.ceil(n.to)-n.to,s.angle-=(a+o)*r.angle,l.push(t.createSector(s,{fill:n.color,fillOpacity:n.opacity,strokeOpacity:n.opacity,zIndex:-1}));return l},plotBandSlot:function(t){return this.getSlot(t.from,t.to-1)},getSlot:function(t,e){var n,s,r=this.options,o=r.justified,a=this.box,h=this.majorAngles(),l=h.length,c=360/l;return r.reverse&&!o&&(t=(t+1)%l),n=h[t=L(i.floor(t),0,l-1)],o&&(n-=c/2)<0&&(n+=360),s=c*((e=L(i.ceil(e||t),t,l-1))-t+1),new C(a.center(),0,a.height()/2,n,s)},pointCategoryIndex:function(t){var e,i=null,n=this.options.categories.length;for(e=0;e<n;e++)if(this.getSlot(e).containsPoint(t)){i=e;break}return i}});s(H.fn,F);var U={options:{majorGridLines:{visible:!0}},renderPlotBands:function(t){var e,i,n,s,r,o=this.options,a=o.plotBands||[],h=[],l=o.majorGridLines.type,c=this.plotArea.polarAxis,d=c.majorAngles(),u=c.box.center();for(e=0;e<a.length;e++)n={fill:(i=a[e]).color,fillOpacity:i.opacity,strokeOpacity:i.opacity,zIndex:-1},s=this.getSlot(i.from,i.to,!0),r=new C(u,u.y-s.y2,u.y-s.y1,0,360),h.push(l===B?t.createRing(r,n):t.createPolyline(this.plotBandPoints(r,d),!0,n));return h},plotBandPoints:function(t,e){var i,n=[],s=[];for(i=0;i<e.length;i++)n.push(k.onCircle(t.c,e[i],t.ir)),s.push(k.onCircle(t.c,e[i],t.r));return n.reverse(),n.push(n[0]),s.push(s[0]),s.concat(n)},renderGridLines:function(t,e){var i,n=this.options,s=this.radarMajorGridLinePositions(),r=e.majorAngles(),o=e.box.center(),a=[];return n.majorGridLines.visible&&(a=this.gridLineElements(t,o,s,r,n.majorGridLines)),n.minorGridLines.visible&&(i=this.radarMinorGridLinePositions(),D(a,this.gridLineElements(t,o,i,r,n.minorGridLines))),a},gridLineElements:function(t,e,i,n,s){var r,o,a,h,l,c=[];for(r={data:{modelId:this.plotArea.modelId},zIndex:-1,strokeWidth:s.width,stroke:s.color,dashType:s.dashType},h=0;h<i.length;h++)if((a=e.y-i[h])>0)if(s.type===B)c.push(t.createCircle(e,a,r));else{for(o=[],l=0;l<n.length;l++)o.push(k.onCircle(e,n[l],a));c.push(t.createPolyline(o,!0,r))}return c},getValue:function(t){var e=this.options,n=this.lineBox(),s=this.plotArea.polarAxis,r=s.majorAngles(),o=s.box.center(),a=t.distanceTo(o),h=a;if(e.majorGridLines.type!==B&&r.length>1){var l=t.x-o.x,c=t.y-o.y,d=(i.atan2(c,l)/O+540)%360;r.sort((function(t,e){return lt(t,d)-lt(e,d)}));var u=90-lt(r[0],r[1])/2,p=180-lt(d,r[0])-u;h=a*(i.sin(p*O)/i.sin(u*O))}return this.axisType().fn.getValue.call(this,new k(n.x1,n.y2-h))}},$=w.extend({radarMajorGridLinePositions:function(){return this.getTickPositions(this.options.majorUnit)},radarMinorGridLinePositions:function(){var t=this.options,e=0;return t.majorGridLines.visible&&(e=t.majorUnit),this.getTickPositions(t.minorUnit,e)},axisType:function(){return w}});s($.fn,U);var j=b.extend({radarMajorGridLinePositions:function(){var t=[];return this.traverseMajorTicksPositions((function(e){t.push(e)}),this.options.majorGridLines),t},radarMinorGridLinePositions:function(){var t=[];return this.traverseMinorTicksPositions((function(e){t.push(e)}),this.options.minorGridLines),t},axisType:function(){return b}});s(j.fn,U);var G=a.extend({init:function(t){a.fn.init.call(this,t),(t=this.options).minorUnit=t.minorUnit||this.options.majorUnit/2},options:{type:"polar",startAngle:0,reverse:!1,majorUnit:60,min:0,max:360,labels:{margin:E(10)},majorGridLines:{color:"#000",visible:!0},minorGridLines:{color:"#aaa"}},getDivisions:function(t){return w.fn.getDivisions.call(this,t)-1},reflow:function(t){this.box=t,this.reflowLabels()},reflowLabels:function(){var t,e,i=new c,n=this.majorIntervals(),s=this.labels;for(e=0;e<s.length;e++)s[e].reflow(i),t=s[e].box,s[e].reflow(this.getSlot(n[e]).adjacentBox(0,t.width(),t.height()))},lineBox:function(){return this.box},intervals:function(t,e){var i,n=this.options,s=this.getDivisions(t),r=n.min,o=[];for(e&&(e/=t),i=0;i<s;i++)i%e!=0&&o.push((360+r)%360),r+=t;return o},majorIntervals:function(){return this.intervals(this.options.majorUnit)},minorIntervals:function(){return this.intervals(this.options.minorUnit)},intervalAngle:function(t){return(360+t-this.options.startAngle)%360},majorAngles:H.fn.majorAngles,renderLine:function(){return[]},majorGridLineAngles:function(t){return this.gridLineAngles(t,this.options.majorUnit)},minorGridLineAngles:function(t,e){return this.gridLineAngles(t,this.options.minorUnit,e?this.options.majorUnit:0)},renderPlotBands:H.fn.renderPlotBands,plotBandSlot:function(t){return this.getSlot(t.from,t.to)},getSlot:function(t,e){var i,n=this.options,s=n.startAngle,r=this.box;return t=L(t,n.min,n.max),e=L(e||t,t,n.max),n.reverse&&(t*=-1,e*=-1),(e=(540-e-s)%360)<(t=(540-t-s)%360)&&(i=t,t=e,e=i),new C(r.center(),0,r.height()/2,t,e-t)},getValue:function(t){var e=this.options,n=this.box.center(),s=t.x-n.x,r=t.y-n.y,o=i.round(i.atan2(r,s)/O),a=e.startAngle;return e.reverse||(o*=-1,a*=-1),(o+a+360)%360},labelsCount:w.fn.labelsCount,createAxisLabel:w.fn.createAxisLabel});s(G.fn,F);var W=f.extend({options:{gap:1,spacing:0},reflow:function(t){var e,i,n=this.options,s=this.children,r=n.gap,o=n.spacing,a=s.length,h=a+r+o*(a-1),l=t.angle/h,c=t.startAngle+l*(r/2);for(i=0;i<a;i++)(e=t.clone()).startAngle=c,e.angle=l,s[i].sector&&(e.r=s[i].sector.r),s[i].reflow(e),s[i].sector=e,c+=l+l*o}}),q=f.extend({reflow:function(t){var e,i,n=this.options.isReversed,s=this.children,r=s.length,o=n?r-1:0,a=n?-1:1;for(this.box=new c,i=o;i>=0&&i<r;i+=a)(e=s[i].sector).startAngle=t.startAngle,e.angle=t.angle}}),Y=m.extend({init:function(t,e){m.fn.init.call(this,t,null,e)},options:{overlay:{gradient:null},labels:{distance:10}}}),Q=l.extend({pointType:function(){return Y},clusterType:function(){return W},stackType:function(){return q},categorySlot:function(t,e){return t.getSlot(e)},pointSlot:function(t,e){var i=t.clone(),n=t.c.y;return i.r=n-e.y1,i.ir=n-e.y2,i},reflow:u.fn.reflow,reflowPoint:function(t,e){t.sector=e,t.reflow()},options:{clip:!1}}),X=v.extend({pointSlot:function(t,e){var i=t.c.y-e.y1,n=k.onCircle(t.c,t.middle(),i);return new c(n.x,n.y,n.x,n.y)},createSegment:function(t,e,i){var n;return n=new("smooth"==e.style?A:y)(t,e,i),t.length===e.data.length&&(n.options.closed=!0),n},options:{clip:!1}}),Z=o.extend({points:function(){return y.fn.points.call(this,this.stackPoints)}}),K=z.extend({areaPoints:function(){return[]}}),J=X.extend({createSegment:function(t,e,i,n){var s,r,o=this.options.isStacked;return"smooth"===(e.line||{}).style?(r=new K(t,n,o,e,i)).options.closed=!0:(o&&i>0&&n&&(s=n.linePoints.slice(0).reverse()),t.push(t[0]),r=new Z(t,s,e,i)),r},seriesMissingValues:function(t){return t.missingValues||"zero"}}),tt=S.extend({pointSlot:function(t,e){var i=t.c.y-e.y1,n=k.onCircle(t.c,t.startAngle,i);return new c(n.x,n.y,n.x,n.y)},options:{clip:!1}}),et=T.extend({pointSlot:tt.fn.pointSlot,options:{clip:!1}}),it=o.extend({points:function(){var t=this.parent.plotArea.polarAxis.box.center(),e=this.stackPoints,i=y.fn.points.call(this,e);return i.unshift(t),i.push(t),i}}),nt=z.extend({areaPoints:function(){return[this.parent.plotArea.polarAxis.box.center()]},points:function(){var t,e=this.parent.plotArea.polarAxis.box.center(),i=new g(!1),n=y.fn.points.call(this);return n.push(e),(t=i.process(n)).splice(t.length-3,t.length-1),this.curvePoints=t,t}}),st=et.extend({createSegment:function(t,e,i){return"smooth"==(e.line||{}).style?new nt(t,null,!1,e,i):new it(t,[],e,i)},seriesMissingValues:function(t){return t.missingValues||"zero"},sortPoints:function(t){return t.sort(ht)}}),rt=x.extend({init:function(t,e){this.valueAxisRangeTracker=new h,x.fn.init.call(this,t,e)},render:function(){this.addToLegend(this.series),this.createPolarAxis(),this.createCharts(),this.createValueAxis()},createValueAxis:function(){var t,e,n,s,r=this.valueAxisRangeTracker,o=r.query(),a=this.valueAxisOptions({roundToMajorUnit:!1});"log"===a.type?(n=j,s={min:.1,max:1}):(n=$,s={min:0,max:1}),(t=r.query(name)||o||s)&&o&&(t.min=i.min(t.min,o.min),t.max=i.max(t.max,o.max)),e=new n(t.min,t.max,a),this.valueAxis=e,this.appendAxis(e)},reflowAxes:function(){var t=this.options.plotArea,e=this.valueAxis,n=this.polarAxis,s=this.box,r=.15*i.min(s.width(),s.height()),o=E(t.padding||{},r),a=s.clone().unpad(o),h=a.clone().shrink(0,a.height()/2);n.reflow(a),e.reflow(h);var l=e.lineBox().height()-e.box.height();e.reflow(e.box.unpad({top:l})),this.axisBox=a,this.alignAxes(a)},alignAxes:function(){var t=this.valueAxis,e=t.getSlot(t.options.min),i=t.options.reverse?2:1,n=this.polarAxis.getSlot(0).c,s=t.box.translate(n.x-e["x"+i],n.y-e["y"+i]);t.reflow(s)},backgroundBox:function(){return this.box}}),ot=rt.extend({options:{categoryAxis:{categories:[]},valueAxis:{}},createPolarAxis:function(){var t;t=new H(this.options.categoryAxis),this.polarAxis=t,this.categoryAxis=t,this.appendAxis(t)},valueAxisOptions:function(t){return this._hasBarCharts&&s(t,{majorGridLines:{type:B},minorGridLines:{type:B}}),this._isStacked100&&s(t,{roundToMajorUnit:!1,labels:{format:"P0"}}),s(t,this.options.valueAxis)},appendChart:p.fn.appendChart,createCharts:function(){var t=this.filterVisibleSeries(this.series),e=this.panes[0];this.createAreaChart(M(t,["radarArea"]),e),this.createLineChart(M(t,["radarLine"]),e),this.createBarChart(M(t,["radarColumn"]),e)},chartOptions:function(t){var e={series:t},i=t[0];if(i){var n=this.filterVisibleSeries(t),s=i.stack;e.isStacked=s&&n.length>1,e.isStacked100=s&&"100%"===s.type&&n.length>1,e.isStacked100&&(this._isStacked100=!0)}return e},createAreaChart:function(t,e){if(0!==t.length){var i=new J(this,this.chartOptions(t));this.appendChart(i,e)}},createLineChart:function(t,e){if(0!==t.length){var i=new X(this,this.chartOptions(t));this.appendChart(i,e)}},createBarChart:function(t,e){if(0!==t.length){var i=t[0],n=this.chartOptions(t);n.gap=i.gap,n.spacing=i.spacing;var s=new Q(this,n);this.appendChart(s,e),this._hasBarCharts=!0}},seriesCategoryAxis:function(){return this.categoryAxis},click:function(e,i){var n,s,r=e._eventCoordinates(i),o=new k(r.x,r.y);n=this.categoryAxis.getCategory(o),s=this.valueAxis.getValue(o),null!==n&&null!==s&&e.trigger("plotAreaClick",{element:t(i.target),category:n,value:s})}}),at=rt.extend({options:{xAxis:{},yAxis:{}},createPolarAxis:function(){var t;t=new G(this.options.xAxis),this.polarAxis=t,this.axisX=t,this.appendAxis(t)},valueAxisOptions:function(t){return s(t,{majorGridLines:{type:B},minorGridLines:{type:B}},this.options.yAxis)},createValueAxis:function(){rt.fn.createValueAxis.call(this),this.axisY=this.valueAxis},appendChart:function(t,e){this.valueAxisRangeTracker.update(t.yAxisRanges),x.fn.appendChart.call(this,t,e)},createCharts:function(){var t=this.filterVisibleSeries(this.series),e=this.panes[0];this.createLineChart(M(t,["polarLine"]),e),this.createScatterChart(M(t,["polarScatter"]),e),this.createAreaChart(M(t,["polarArea"]),e)},createLineChart:function(t,e){if(0!==t.length){var i=new et(this,{series:t});this.appendChart(i,e)}},createScatterChart:function(t,e){if(0!==t.length){var i=new tt(this,{series:t});this.appendChart(i,e)}},createAreaChart:function(t,e){if(0!==t.length){var i=new st(this,{series:t});this.appendChart(i,e)}},click:function(e,i){var n,s,r=e._eventCoordinates(i),o=new k(r.x,r.y);n=this.axisX.getValue(o),s=this.axisY.getValue(o),null!==n&&null!==s&&e.trigger("plotAreaClick",{element:t(i.target),x:n,y:s})}});function ht(t,e){return t.value.x-e.value.x}function lt(t,e){return 180-i.abs(i.abs(t-e)-180)}_.current.register(at,N),_.current.register(ot,V),P.current.register(N,["x","y"],["color"]),P.current.register(V,["value"],["color"]),r.DefaultAggregates.current.register(V,{value:"max",color:"first"}),s(r,{PolarAreaChart:st,PolarAxis:G,PolarLineChart:et,PolarPlotArea:at,RadarAreaChart:J,RadarBarChart:Q,RadarCategoryAxis:H,RadarClusterLayout:W,RadarLineChart:X,RadarNumericAxis:$,RadarPlotArea:ot,SplinePolarAreaSegment:nt,SplineRadarAreaSegment:K,RadarStackLayout:q})}(window.kendo.jQuery),function(t,e){var i=window.kendo,n=i.deepExtend,s=t.extend,r=i.isFunction,o=i.template,a=i.dataviz,h=a.Color,l=a.ChartElement,c=a.PlotAreaBase,d=a.PlotAreaFactory,u=a.Point2D,p=a.Box2D,f=a.SeriesBinder,g=a.TextBox,m=a.append,v=a.autoFormat,y=a.evalOptions,b=a.limitValue,w=a.uniqueId,x=c.extend({render:function(){var t=this.series;this.createFunnelChart(t)},createFunnelChart:function(t){var e=t[0],i=new _(this,{series:t,legend:this.options.legend,neckRatio:e.neckRatio,dynamicHeight:e.dynamicHeight,dynamicSlope:e.dynamicSlope,segmentSpacing:e.segmentSpacing,highlight:e.highlight});this.appendChart(i)},appendChart:function(t,e){c.fn.appendChart.call(this,t,e),m(this.options.legend.items,t.legendItems)}}),_=l.extend({init:function(t,e){l.fn.init.call(this,e),this.plotArea=t,this.points=[],this.labels=[],this.legendItems=[],this.render()},options:{neckRatio:.3,width:300,dynamicSlope:!1,dynamicHeight:!0,segmentSpacing:0,labels:{visible:!1,align:"center",position:"center"}},formatPointValue:function(t,e){return v(e,t.value)},render:function(){var t,e,i=this.options,s=this.plotArea.options.seriesColors||[],o=s.length,a=i.series[0],h=a.data;if(h){var l,c,d=this.pointsTotal(a);for(c=0;c<h.length;c++){l=(t=f.current.bindPoint(a,c)).valueFields.value,e=t.fields,r(a.color)||(a.color=e.color||s[c%o]),e=n({index:c,owner:this,series:a,category:e.category,dataItem:h[c],percentage:l/d,visibleInLegend:e.visibleInLegend,visible:e.visible},e);var u=this.createSegment(l,e),p=this.createLabel(l,e);u&&p&&u.append(p)}}},evalSegmentOptions:function(t,e,i){var n=i.series;y(t,{value:e,series:n,dataItem:i.dataItem,index:i.index},{defaults:n._defaults,excluded:["data"]})},createSegment:function(t,e){var i;if(this.createLegendItem(t,e),!1!==e.visible){var r=n({},e.series);return this.evalSegmentOptions(r,t,e),i=new k(t,r,e),s(i,e),this.append(i),this.points.push(i),i}},createLabel:function(t,e){var i,s=e.series,r=e.dataItem,a=n({},this.options.labels,s.labels),l=t;if(a.visible&&t){if(a.template)l=o(a.template)({dataItem:r,value:t,percentage:e.percentage,category:e.category,series:s});else a.format&&(l=v(a.format,l));if(!a.color&&"center"===a.align){var c=new h(s.color).percBrightness();a.color=c>180?"black":"white"}return this.evalSegmentOptions(a,t,e),i=new g(l,n({vAlign:a.position,id:w()},a)),this.labels.push(i),i}},createLegendItem:function(t,e){var i,n,s,r=(this.options.legend||{}).labels||{},a=(this.options.legend||{}).inactiveItems||{};e&&!1!==e.visibleInLegend&&(i=e.category||"",(r||{}).template&&(i=o(r.template)({text:i,series:e.series,dataItem:e.dataItem,percentage:e.percentage,value:t})),!1===e.visible?(n=(a.markers||{}).color,s=(a.labels||{}).color):(n=(e.series||{}).color,s=r.color),i&&this.legendItems.push({pointIndex:e.index,text:i,series:e.series,markerColor:n,labelColor:s}))},pointsTotal:function(t){var e,i,n,s=t.data.length,r=0;for(i=0;i<s;i++)"string"==typeof(e=(n=f.current.bindPoint(t,i)).valueFields.value)&&(e=parseFloat(e)),e&&!1!==n.fields.visible&&(r+=e);return r},labelPadding:function(){var t,e,i,n=this.labels,s={left:0,right:0};for(i=0;i<n.length;i++)"center"!==(t=n[i].options.align)&&(e=n[i].box.width(),"left"===t?s.left=Math.max(s.left,e):s.right=Math.max(s.right,e));return s},reflow:function(e){var i,n,s,r,o,a,h=this.options,l=this.points,c=l.length,d=h.neckRatio<=1,p=e.clone().unpad(this.labelPadding()),f=p.width(),g=0,m=d?0:(f-f/h.neckRatio)/2,v=h.segmentSpacing,y=h.dynamicSlope,w=p.height()-v*(c-1),x=d?h.neckRatio*f:f;if(c){if(y){var _=l[0],k=_;for(t.each(l,(function(t,e){e.percentage>k.percentage&&(k=e)})),m=(f-(s=_.percentage/k.percentage*f))/2,i=0;i<c;i++){o=l[i].percentage;var C=l[i+1],S=C?C.percentage:o;r=l[i].points=[],n=h.dynamicHeight?w*o:w/c,a=b(a=(f-s*(S/o))/2,0,f),r.push(u(p.x1+m,p.y1+g)),r.push(u(p.x1+f-m,p.y1+g)),r.push(u(p.x1+f-a,p.y1+n+g)),r.push(u(p.x1+a,p.y1+n+g)),m=a,g+=n+v,s=b(s*=S/o,0,f)}}else{var T=((d?f:f-2*m)-x)/2;for(i=0;i<c;i++)r=l[i].points=[],o=l[i].percentage,a=h.dynamicHeight?T*o:T/c,n=h.dynamicHeight?w*o:w/c,r.push(u(p.x1+m,p.y1+g)),r.push(u(p.x1+f-m,p.y1+g)),r.push(u(p.x1+f-m-a,p.y1+n+g)),r.push(u(p.x1+m+a,p.y1+n+g)),m+=a,g+=n+v}for(i=0;i<c;i++)l[i].reflow(e)}}}),k=l.extend({init:function(t,e,i){l.fn.init.call(this,e),this.value=t,this.id=w(),this.options.index=i.index,this.enableDiscovery()},options:{color:"white",border:{width:1}},reflow:function(t){var e=this.points,i=this.children[0];this.box=new p(e[0].x,e[0].y,e[1].x,e[2].y),i&&i.reflow(new p(t.x1,e[0].y,t.x2,e[2].y))},getViewElements:function(t){var e=this.options,i=e.border,n=[];return n.push(t.createPolyline(this.points,!0,{id:this.id,fill:e.color,fillOpacity:e.opacity,stroke:i.color,strokeOpacity:i.opacity,strokeWidth:i.width,data:{modelId:this.modelId}})),m(n,l.fn.getViewElements.call(this,t)),n},highlightOverlay:function(t,e){var i=this.options.highlight||{};if(!1!==i.visible){var n=i.border||{},r=s({},e,{fill:i.color,stroke:n.color,strokeOpacity:n.opacity,strokeWidth:n.width,fillOpacity:i.opacity,data:{modelId:this.modelId}});return t.createPolyline(this.points,!0,r)}},tooltipAnchor:function(t){var e=this.box;return new u(e.center().x-t/2,e.y1)},formatValue:function(t){return this.owner.formatPointValue(this,t)}});n(k.fn,a.PointEventsMixin),d.current.register(x,["funnel"]),f.current.register(["funnel"],["value"],["category","color","visibleInLegend","visible"]),n(a,{FunnelChart:_})}(window.kendo.jQuery),function(t,e){var i=Math,n=window.kendo,s=n.ui.Widget,r=n.deepExtend,o=n.dataviz,a=o.Axis,h=o.Box2D,l=o.ChartElement,c=o.NumericAxis,d=o.Pin,u=o.Ring,p=o.RootElement,f=o.RotationAnimation,g=o.BarIndicatorAnimatin,m=o.ArrowAnimation,v=o.append,y=o.animationDecorator,b=o.autoMajorUnit,w=o.getElement,x=o.getSpacing,_=o.defined,k=o.rotatePoint,C=o.Point2D,S=o.round,T=o.uniqueId,P=o.COORD_PRECISION,A=Number.MAX_VALUE,z=-Number.MAX_VALUE,D=i.PI/180,E="inside",M=l.extend({init:function(t,e){var n=t.options;l.fn.init.call(this,e),(e=this.options).id||(e.id=T()),e.fill=e.color,this.scale=t,_(e.value)?e.value=i.min(i.max(e.value,n.min),n.max):e.value=n.min},options:{color:"#000"},value:function(t){var e=this,n=e.options,s=n.value,r=e.scale.options;if(0===arguments.length)return s;n._oldValue=n.value,n.value=i.min(i.max(t,r.min),r.max),e.repaint()}}),L=M.extend({options:{shape:"needle",cap:{size:.05},arrow:{width:16,height:14},animation:{type:"radialPointer",speed:150}},reflow:function(){var t=this.options,e=this.scale.ring,i=e.c,n=e.r*t.cap.size;this.box=new h(i.x-n,i.y-n,i.x+n,i.y+n)},repaint:function(){var t=this.scale,e=this.options,i=this.elements[0],n=e.animation,s=t.slotAngle(t.options.min),o=t.slotAngle(e._oldValue)-s,a=i._animation;i.options.rotation[0]=t.slotAngle(e.value)-s,a&&a.abort(),!1===n.transitions?i.refresh(w(e.id)):((a=i._animation=new f(i,r(n,{startAngle:o,reverse:t.options.reverse}))).setup(),a.play())},_renderNeedle:function(t,e,i,n){var s=this.options,r=this.scale,o=r.ring.r*s.cap.size;return[t.createPolyline([k((e.x1+e.x2)/2,e.y1+r.options.minorTicks.size,i.x,i.y,n),k(i.x-o/2,i.y,i.x,i.y,n),k(i.x+o/2,i.y,i.x,i.y,n)],!0,s),t.createCircle(i,o,{fill:s.cap.color||s.color})]},_renderArrow:function(t,e,i,n){var s=this.options,r=this.scale.ring.clone(),o=s.arrow,a=o.height;return r.ir=r.r-5,[t.createPin(new d({origin:k((e.x1+e.x2)/2,e.y1+a,i.x,i.y,n),height:o.height,radius:5,rotation:n,arcAngle:180}),s),t.createRing(r,{fill:s.color})]},renderPointer:function(t){var e=this.scale,i=e.ring,n=i.c,s=i.r,o=this.options,a=new h(n.x-s,n.y-s,n.x+s,n.y+s),l=a.center(),c=e.slotAngle(e.options.min),d=90-c;return!1!==o.animation&&r(o.animation,{startAngle:0,center:l,reverse:e.options.reverse}),r(o,{rotation:[e.slotAngle(o.value)-c,l.x,l.y]}),"arrow"==o.shape?this._renderArrow(t,a,l,d):this._renderNeedle(t,a,l,d)},getViewElements:function(t){var e=this.renderPointer(t);return this.elements=e,e}}),I=c.extend({init:function(t){this.options=r({},this.options,t),this.options.majorUnit=this.options.majorUnit||b(this.options.min,this.options.max),a.fn.init.call(this,this.options),this.options.minorUnit=this.options.minorUnit||this.options.majorUnit/10},options:{min:0,max:100,majorTicks:{size:15,align:E,color:"#000",width:.5,visible:!0},minorTicks:{size:10,align:E,color:"#000",width:.5,visible:!0},startAngle:-30,endAngle:210,labels:{position:E,padding:2}},reflow:function(t){var e=this.options,n=t.center(),s=i.min(t.height(),t.width())/2,r=this.ring||new o.Ring(n,s-e.majorTicks.size,s,e.startAngle,e.endAngle-e.startAngle);this.ring=r,this.box=r.getBBox(),this.arrangeLabels()},slotAngle:function(t){var e=this.options,i=e.startAngle,n=e.reverse,s=e.endAngle-i,r=e.min,o=e.max;return n?e.endAngle-(t-r)/(o-r)*s:(t-r)/(o-r)*s+i},renderTicks:function(t){var e=this,i=[],n=e.ring,s=n.clone(),r=e.options,o=r.minorTicks.size;function a(n,s,r,o,a){var h,l,c,d=e.tickAngles(n,s),u=a/s,p=d.length;if(o)for(h=0;h<p;h++)h%u!=0&&(c=n.point(d[h]),l=n.point(d[h],!0),i.push(t.createLine(l.x,l.y,c.x,c.y,{align:!1,stroke:r.color,strokeWidth:r.width})))}return a(n,r.majorUnit,r.majorTicks,r.majorTicks.visible),r.labels.position==E?s.radius(s.r-o,!0):s.radius(s.ir+o),a(s,r.minorUnit,r.minorTicks,r.minorTicks.visible,r.majorUnit),i},arrangeLabels:function(){var t,e,n,s,r,o,a,l,c,d,u=this.options,p=this.ring.clone(),f=this.tickAngles(p,u.majorUnit),g=this.labels,m=g.length,v=u.labels,y=v.padding,b=.05*p.r,w=u.rangeSize=u.rangeSize||.1*p.r,x=u.ranges||[];for(void 0!==this.options.rangeDistance?b=this.options.rangeDistance:this.options.rangeDistance=b,v.position===E&&x.length&&(p.r-=w+b,p.ir-=w+b),a=0;a<m;a++)t=(r=g[a]).box.width()/2,e=r.box.height()/2,n=(s=f[a])*D,d=v.position===E,l=(o=p.point(s,d)).x+i.cos(n)*(t+y)*(d?1:-1),c=o.y+i.sin(n)*(e+y)*(d?1:-1),r.reflow(new h(l-t,c-e,l+t,c+e)),this.box.wrap(r.box)},tickAngles:function(t,e){var i,n=this.options,s=n.reverse,r=n.max-n.min,o=t.angle,a=t.startAngle,h=r/e,l=o/h,c=[];for(s&&(a+=o,l=-l),i=0;i<h;i++)c.push(S(a,P)),a+=l;return S(a)<=n.endAngle&&c.push(a),c},renderRanges:function(t){var e,i,n,s,r,o=[],a=this.rangeSegments(),h=a.length,l=this.options.reverse;if(h)for(s=this.getRadius(),r=0;r<h;r++)n=a[r],e=this.slotAngle(n[l?"to":"from"]),(i=this.slotAngle(n[l?"from":"to"]))-e!=0&&o.push(t.createRing(new u(this.ring.c,s.inner,s.outer,e,i-e),{fill:n.color,fillOpacity:n.opacity,zIndex:-1}));return o},rangeSegments:function(){var t,e,i,n,s,r=this.options,o=r.ranges||[],a=o.length,h=r.rangePlaceholderColor,l=[],c=r.min,d=r.max;function u(t,e,i,n){return{from:t,to:e,color:i,opacity:n}}if(a)for(l.push(u(c,d,h)),n=0;n<a;n++)for(t=U(o[n],c,d),e=l.length,s=0;s<e;s++)if((i=l[s]).from<=t.from&&t.from<=i.to){l.push(u(t.from,t.to,t.color,t.opacity)),i.from<=t.to&&t.to<=i.to&&l.push(u(t.to,i.to,h,t.opacity)),i.to=t.from;break}return l},getRadius:function(){var t,e,i=this.options,n=i.rangeSize,s=i.rangeDistance,r=this.ring;return"outside"===i.labels.position?t=(e=r.ir-s)-n:(t=(e=r.r)-n,r.r-=n+s,r.ir-=n+s),{inner:t,outer:e}},getViewElements:function(t){var e=l.fn.getViewElements.call(this,t);return v(e,this.renderRanges(t)),v(e,this.renderTicks(t)),e}}),B=l.extend({init:function(t){l.fn.init.call(this,t),this.render()},options:{margin:{},background:"",border:{color:"#000",width:0},minorTicks:{align:E}},reflow:function(t){var e,i=this.scale,n=this.pointer;i.reflow(t),e=i.box.clone(),n.scale=i,n.reflow(),e.wrap(n.box),this.box=e,this.fitScale(t),this.alignScale(t)},alignScale:function(t){var e=this.box.center(),i=t.center(),n=e.x-i.x,s=e.y-i.y,r=this.scale,o=this.pointer;r.ring.c.x-=n,r.ring.c.y-=s,r.reflow(t),o.reflow(),this.box=r.box.clone().wrap(o.box)},fitScale:function(t){for(var e,n,s,r,o=this.scale.ring,a=this.box,h=i.abs(this.getDiff(a,t)),l=S(h,P),c=S(-h,P),d=0;!(!(d<100)||(d++,l!=r&&0<=(e=this.getPlotBox(l,t,o))&&e<=2)||c!=r&&0<=(s=this.getPlotBox(c,t,o))&&s<=2||(r=e>0&&s>0?2*l:e<0&&s<0?2*c:S((l+c)/2||1,P),0<=(n=this.getPlotBox(r,t,o))&&n<=2));)n>0?(c=r,s=n):(l=r,e=n)},getPlotBox:function(t,e,i){var n=this.scale,s=this.pointer;return(i=i.clone()).r+=t,i.ir+=t,n.ring=i,n.reflow(e),s.scale=n,s.reflow(),this.box=n.box.clone().wrap(s.box),this.getDiff(this.box,e)},getDiff:function(t,e){return i.min(e.width()-t.width(),e.height()-t.height())},render:function(){var t,e=this.options;t=this.scale=new I(e.scale),this.append(this.scale),this.pointer=new L(t,r({},e.pointer,{animation:{transitions:e.transitions}})),this.append(this.pointer)}}),R=c.extend({init:function(t){this.options=r({},this.options,t),this.options=r({},this.options,{labels:{mirror:this.options.mirror}}),this.options.majorUnit=this.options.majorUnit||b(this.options.min,this.options.max),a.fn.init.call(this,this.options),this.options.minorUnit=this.options.minorUnit||this.options.majorUnit/10},options:{min:0,max:50,majorTicks:{size:15,align:E,color:"#000",width:.5,visible:!0},minorTicks:{size:10,align:E,color:"#000",width:.5,visible:!0},line:{width:.5},labels:{position:E,padding:2},mirror:!1,_alignLines:!1},renderRanges:function(t){var e,i,n,s,r,o=this.options,a=o.min,l=o.max,c=o.ranges||[],d=o.vertical,u=o.labels.mirror,p=[],f=c.length,g=o.rangeSize||o.minorTicks.size/2;if(f)for(s=0;s<f;s++)e=U(c[s],a,l),r=this.getSlot(e.from,e.to),i=d?this.lineBox():r,n=d?r:this.lineBox(),d?i.x1-=g*(u?-1:1):n.y2+=g*(u?-1:1),p.push(t.createRect(new h(i.x1,n.y1,i.x2,n.y2),{fill:e.color,fillOpacity:e.opacity}));return p},getViewElements:function(t){var e=c.fn.getViewElements.call(this,t);return v(e,this.renderRanges(t)),e}}),O=M.extend({init:function(t,e){M.fn.init.call(this,t,e),this.options=r({size:this.pointerSize(),track:{visible:_(e.track)}},this.options)},options:{shape:"barIndicator",track:{border:{width:1}},color:"#000",border:{width:1},opacity:1,margin:x(3),animation:{type:"barIndicator"},visible:!0},repaint:function(){var t=this.scale,e=this.options,i=this.element,n=i._animation;n&&n.abort(),!1===e.animation.transitions?(this.getViewElements(this._view),i.points=this.element.points,i.refresh(w(e.id))):(e.animation=r({},e.animation,{endPosition:t.getSlot(t.options.min,e.value),reverse:t.options.reverse}),(n="arrow"===e.shape?i._animation=new m(i,e.animation):i._animation=new g(i,e.animation)).setup(),n.play())},reflow:function(){var t,e,i,n=this.options,s=this.scale,r=s.lineBox(),o=n.track.size||n.size,a=n.size/2,l=s.options.mirror,c=x(n.margin),d=s.options.vertical,u=d?c[l?"left":"right"]:c[l?"bottom":"top"];u=l?-u:u,d?(i=new h(r.x1+u,r.y1,r.x1+u,r.y2),l?i.x1-=o:i.x2+=o,"barIndicator"!==n.shape&&(t=e=new h(r.x2+u,r.y1-a,r.x2+u,r.y2+a))):(i=new h(r.x1,r.y1-u,r.x2,r.y1-u),l?i.y2+=o:i.y1-=o,"barIndicator"!==n.shape&&(t=e=new h(r.x1-a,r.y1-u,r.x2+a,r.y1-u))),this.trackBox=i,this.pointerRangeBox=e,this.box=t||i.clone().pad(n.border.width)},renderPointer:function(t){var e,i=this.scale,n=this.options,s=_(n.border)?{stroke:n.border.width?n.border.color||n.color:"",strokeWidth:n.border.width,dashType:n.border.dashType}:{},o=r({fill:n.color,fillOpacity:n.opacity,animation:r(n.animation,{startPosition:i.getSlot(i.options.min,n.value),size:n.size,vertical:i.options.vertical,reverse:i.options.reverse}),id:n.id,zIndex:2,align:!1},s),a=this.pointerShape(n.value);return"arrow"===n.shape?(o.animation.type="arrowPointer",e=t.createPolyline(a,!0,o)):e=t.createRect(a,o),e},pointerShape:function(t){var e,i,n,s=this.options,r=this.scale,o=r.getSlot(t,r.options.min),a=s.size,l=this.pointerRangeBox,c=r.options.vertical,d=a/2,u=r.options.mirror?-1:1,p=r.options.reverse;return"arrow"==s.shape?c?(i=p?"y2":"y1",e=[new C(l.x1,o[i]-d),new C(l.x1-u*a,o[i]),new C(l.x1,o[i]+d)]):e=[new C(o[i=p?"x1":"x2"]-d,l.y2),new C(o[i],l.y2+u*a),new C(o[i]+d,l.y2)]:(n=this.trackBox,e=c?new h(n.x1,o.y1,n.x1+a,o.y2):new h(o.x1,n.y1,o.x2,n.y1+a)),e},pointerSize:function(){var t,e=this.options,i=this.scale.options.majorTicks.size;return t="arrow"===e.shape?.6*i:.3*i,S(t)},renderTrack:function(t){var e=this.options.track,i=e.border||{},n=this.trackBox.clone().pad(i.width||0);return t.createRect(n,{fill:e.color,fillOpacity:e.opacity,stroke:i.width?i.color||e.color:"",strokeWidth:i.width,dashType:i.dashType,align:!1})},getViewElements:function(t){var e=this.options,i=[];return this.element=this.renderPointer(t),i.push(this.element),!e.track.visible||"barIndicator"!==e.shape&&""!==e.shape||i.push(this.renderTrack(t)),this._view=t,v(i,M.fn.getViewElements.call(this,t)),i}}),N=l.extend({init:function(t){l.fn.init.call(this,t),this.render()},options:{plotArea:{margin:{},background:"",border:{color:"#000",width:0}},pointer:{},scale:{}},reflow:function(t){var e=this.scale,i=this.pointer;e.reflow(t),i.reflow(t),this.box=this.getBox(t),this.alignElements(),this.shrinkElements()},shrinkElements:function(){var t=this.scale,e=this.pointer,n=t.box.clone(),s=e.box,r=t.options.vertical?"y":"x";n[r+1]+=i.max(n[r+1]-s[r+1],0),n[r+2]-=i.max(s[r+2]-n[r+2],0),t.reflow(n),e.reflow(this.box)},getBox:function(t){var e,i=this.scale,n=this.pointer,s=t.center(),r=n.box.clone().wrap(i.box);return i.options.vertical?(e=r.width()/2,r=new h(s.x-e,t.y1,s.x+e,t.y2)):(e=r.height()/2,r=new h(t.x1,s.y-e,t.x2,s.y+e)),r},alignElements:function(){var t,e=this.scale,i=this.pointer,n=e.box,s=i.box.clone().wrap(e.box),r=this.box;e.options.vertical?(t=r.center().x-s.center().x,e.reflow(new h(n.x1+t,r.y1,n.x2+t,r.y2))):(t=r.center().y-s.center().y,e.reflow(new h(r.x1,n.y1+t,r.x2,n.y2+t))),i.reflow(this.box)},render:function(){var t,e=this.options;t=this.scale=new R(e.scale),this.append(this.scale),this.pointer=new O(t,r({},e.pointer,{animation:{transitions:e.transitions}})),this.append(this.pointer)},getViewElements:function(t){var e=this.options.plotArea,i=l.fn.getViewElements.call(this,t),n=e.border||{},s=[t.createRect(this.box,{fill:e.background,stroke:n.width?n.color:"",strokeWidth:n.width,dashType:n.dashType})];return v(s,i),s}}),V=s.extend({init:function(t,e){var i,n,a,h,l=o.ui.themes||{};s.fn.init.call(this,t),this.wrapper=this.element,this._originalOptions=r({},e),h=l[a=(i=r({},this.options,e)).theme]||l[a.toLowerCase()],n=a&&h?h.gauge:{},this.options=r({},n,i),this.element.addClass("k-gauge"),this.redraw()},options:{plotArea:{},theme:"default",renderAs:"",pointer:{},scale:{},gaugeArea:{}},value:function(t){var e=this,i=e._pointers[0];if(0===arguments.length)return i.value();e.options.pointer.value=t,e._view.renderElement?i.value(t):e.redraw()},redraw:function(){var t,e=this.element,i=this._model=this._getModel();this._plotArea=i._plotArea,(t=this._view=o.ViewFactory.current.create(i.options,this.options.renderAs))&&(t.load(i),this._viewElement=t.renderTo(e[0]))},getSize:function(){return this._getSize()},_resize:function(){var t=this.options.transitions;this.options.transitions=!1,this.redraw(),this.options.transitions=t},_createModel:function(){var t=this.options,e=this._getSize();return new p(r({width:e.width,height:e.height,transitions:t.transitions},t.gaugeArea))},_getSize:function(){var t=this.element,e=t.width(),i=t.height();return e||(e=200),i||(i=200),{width:e,height:i}}});r(V.fn,o.ExportMixin);var F=V.extend({init:function(t,e){V.fn.init.call(this,t,e),n.notify(this,o.ui)},options:{name:"RadialGauge",transitions:!0,gaugeArea:{background:""}},_getModel:function(){var t,e=this.options,i=this._createModel();return t=i._plotArea=new B(e),this._pointers=[t.pointer],i.append(t),i.reflow(),i}}),H=V.extend({init:function(t,e){V.fn.init.call(this,t,e),n.notify(this,o.ui)},options:{name:"LinearGauge",transitions:!0,gaugeArea:{background:""},scale:{vertical:!0}},_getModel:function(){var t,e=this.options,i=this._createModel();return t=i._plotArea=new N(e),this._pointers=[t.pointer],i.append(t),i.reflow(),i},_getSize:function(){var t=this.element,e=t.width(),i=t.height(),n=this.options.scale.vertical;return e||(e=n?60:200),i||(i=n?200:60),{width:e,height:i}}});function U(t,e,n){var s=_(t.from)?t.from:z,r=_(t.to)?t.to:A;return t.from=i.max(i.min(r,s),e),t.to=i.min(i.max(r,s),n),t}var $=y("radialPointer",f),j=y("arrowPointer",m),G=y("barIndicator",g);o.ui.plugin(F),o.ui.plugin(H),r(o,{Gauge:V,RadialGaugePlotArea:B,LinearGaugePlotArea:N,RadialPointer:L,LinearPointer:O,LinearScale:R,RadialScale:I,RadialPointerAnimationDecorator:$,ArrowPointerAnimationDecorator:j,BarIndicatorAnimationDecorator:G})}(window.kendo.jQuery),function(){var t=jQuery,e=Math,i=window.kendo,n=i.dataviz,s=n.Box2D,r=n.Color,o=n.Point2D,a=n.Ring,h=n.ViewBase,l=n.ViewElement,c=i.deepExtend,d=n.round,u=n.renderTemplate,p=n.COORD_PRECISION,f=n.DASH_ARRAYS,g=n.DEFAULT_WIDTH,m=n.DEFAULT_HEIGHT,v=n.DEFAULT_FONT,y=e.PI/180,b=2*e.PI,w=u("<canvas width='#= d.options.width #px' height='#= d.options.height #px' style='position: relative; display: #= d.display #;'></canvas>"),x=h.extend({init:function(t){h.fn.init.call(this,t),this.display=this.options.inline?"inline":"block"},options:{width:g,height:m},renderTo:function(e){var i,n=this.options;return(i=e.firstElementChild)&&"canvas"===i.tagName.toLowerCase()?(t(i).siblings().remove(),i.width=n.width,i.height=n.height):(e.innerHTML=w(this),i=e.firstElementChild),this._viewElement=i,this.renderContent(i.getContext("2d")),i},replace:function(t){var e,i=this._viewElement,n=t.box;i&&n&&((e=i.getContext("2d")).clearRect(n.x1,n.y1,n.width(),n.height()),t.getViewElements(this)[0].render(e))},renderContent:function(t){var e,i=this.sortChildren(),n=i.length,s=this.clipPath;for(s&&(t.save(),s.render(t)),e=0;e<n;e++)i[e].render(t);s&&t.restore()},applyDefinitions:function(t){return t.options.clipPathId&&(t.clipPath=this.definitions[t.options.clipPathId]),t},createGroup:function(t){return this.applyDefinitions(new k(t))},createClipPath:function(t,e){var i=this.definitions[t];return i||(i=new _({id:t}),this.definitions[t]=i),i.children=[this.createRect(e,{fill:"none"})],i},createText:function(t,e){return new E(t,e)},createRect:function(t,e){return new T(t.points(),!0,this.setDefaults(e))},createCubicCurve:function(t,e,i){return new S(t,e,i)},createLine:function(t,e,i,n,s){return new T([new o(t,e),new o(i,n)],!1,this.setDefaults(s))},createMultiLine:function(t,e){return this.decorate(new P(t,!1,this.setDefaults(e)))},createPolyline:function(t,e,i){return new T(t,e,this.setDefaults(i))},createCircle:function(t,e,i){return new z(t,e,i)},createSector:function(t,e){return new A(t,e)},createRing:function(t,e){return new A(t,e)},createPin:function(t,e){return new D(t,e)}}),_=l.extend({render:function(t){var e=this.children,i=0,n=e.length;for(t.beginPath();i<n;i++)e[i].renderPoints(t);t.clip()}}),k=l.extend({render:function(t){this.renderContent(t)},renderContent:x.fn.renderContent}),C=l.extend({options:{fillOpacity:1,strokeOpacity:1,strokeLineCap:"square"},render:function(t){var e=this.options;t.save(),t.beginPath(),this.renderPoints(t),this.setLineDash(t),this.setLineCap(t),e.fill&&"transparent"!==e.fill&&(this.setFill(t),t.globalAlpha=e.fillOpacity,t.fill()),e.stroke&&e.strokeWidth&&(t.strokeStyle=e.stroke,t.lineWidth=e.strokeWidth,t.lineJoin="round",t.globalAlpha=e.strokeOpacity,t.stroke()),this.renderOverlay(t),t.restore()},setLineDash:function(t){var e,i=this.options.dashType;(i=i?i.toLowerCase():null)&&"solid"!=i&&(e=f[i],t.setLineDash?t.setLineDash(e):(t.mozDash=e,t.webkitLineDash=e))},setLineCap:function(t){var e=this.options,i=e.dashType;t.lineCap=i&&"solid"!==i?"butt":e.strokeLineCap},setFill:function(t){var e=this.options.fill;t.fillStyle=e},renderOverlay:function(t){var e,i,s=this.options.overlay;s&&s.gradient&&(i=n.Gradients[s.gradient],(e=this.buildGradient(t,i))&&(t.fillStyle=e,t.fill()))},renderPoints:t.noop,buildGradient:t.noop}),S=C.extend({init:function(t,e,i){C.fn.init.call(this,e),this.points=t,this.areaPoints=i},renderPoints:function(t){var e,i=this.areaPoints,n=this.points;for(t.moveTo(n[0].x,n[0].y),e=1;e<n.length;e+=3)t.bezierCurveTo(d(n[e].x,p),d(n[e].y,p),d(n[e+1].x,p),d(n[e+1].y,p),d(n[e+2].x,p),d(n[e+2].y,p));if(i&&i.length){for(e=0;e<i.length;e++)t.lineTo(d(i[e].x,p),d(i[e].y,p));t.closePath()}}}),T=C.extend({init:function(t,e,i){C.fn.init.call(this,i),this.points=t,this.closed=e},options:{rotation:[0,0,0]},renderPoints:function(t){var e=this.points;this._renderPoints(t,e)},_renderPoints:function(t,e){var i,n,s=this.options,r=s.strokeWidth,o=!1!==s.align&&r&&r%2!=0?L:d;if(0!==e.length&&(s.fill||s.stroke)){for(0!==s.rotation[0]&&this.setRotation(t),n=e[0],t.moveTo(o(n.x,p),o(n.y,p)),i=1;i<e.length;i++)n=e[i],t.lineTo(o(n.x,p),o(n.y,p));this.closed&&t.closePath()}},buildGradient:function(t,e){var i,n=this.bbox(),s=this.options.overlay.rotation,r=n.x2,o=n.y1;return 90===s&&(r=n.x1,o=n.y2),e&&"linear"===e.type&&I(i=t.createLinearGradient(n.x1,n.y1,r,o),e.stops),i},bbox:function(){var t,e=this.points,i=new s;if(e.length>0)for(i.move(e[0].x,e[0].y),t=1;t<e.length;t++)i.wrapPoint(e[t]);return i},setRotation:function(t){var e=this.options.rotation,i=e[1],n=e[2];t.translate(i,n),t.rotate(e[0]*y),t.translate(-i,-n)}}),P=T.extend({renderPoints:function(t){var e,i=this.points;for(e=0;e<i.length;e++)this._renderPoints(t,i[e])}}),A=C.extend({init:function(t,e){C.fn.init.call(this,e),this.config=t||{}},options:{strokeLineCap:"square"},renderPoints:function(t){var i=this.config,n=i.startAngle,s=i.angle+n,r=e.max(i.r,0),o=e.max(i.ir,0),a=i.c,h=M(n),l=M(s);h===l&&(n=0,s=360,h=0,l=2*Math.PI);var c=i.point(n),d=i.point(s,!0);t.moveTo(c.x,c.y),t.arc(a.x,a.y,r,h,l),o>0?(t.lineTo(d.x,d.y),t.arc(a.x,a.y,o,l,h,!0)):t.lineTo(a.x,a.y)},buildGradient:function(t,e){var i,n=this.config,s=n.c;return e&&"radial"===e.type&&I(i=t.createRadialGradient(s.x,s.y,n.ir,s.x,s.y,n.r),e.stops),i}}),z=C.extend({init:function(t,e,i){C.fn.init.call(this,i),this.config=new a(t,0,e)},renderPoints:function(t){var e=this.config,i=e.c;t.arc(i.x,i.y,e.r,0,b,!1)},buildGradient:A.fn.buildGradient}),D=C.extend({init:function(t,e){C.fn.init.call(this,e),this.config=t},renderPoints:function(t){var i=this.config,n=i.radius,s=e.PI/180,r=i.arcAngle,o=i.height-n*(1-e.cos(r*s/2)),a=i.origin,h=this.options.rotation;t.translate(h[1],h[2]),t.rotate(M(h[0])),t.translate(h[1]-a.x,h[2]-a.y),t.rotate(M(-this.config.rotation)),t.moveTo(0,0),t.arc(0,-o,n,M(90-r/2),M(90+r/2)),t.lineTo(0,0),t.closePath()}}),E=l.extend({init:function(t,e){l.fn.init.call(this,e),this.content=n.decodeEntities(t)},options:{x:0,y:0,baseline:0,font:v,size:{width:0,height:0},fillOpacity:1},render:function(t){var e=this.options,i=this.content,n=e.x,s=e.y+e.baseline;t.save(),0!==e.rotation&&this.setRotation(t),t.font=e.font,t.fillStyle=e.color,t.globalAlpha=e.fillOpacity,t.fillText(i,n,s),t.restore()},setRotation:function(t){var e=this.options,i=e.size,n=e.x+i.normalWidth/2,s=e.y+i.normalHeight/2,r=e.x+i.width/2-n,o=e.y+i.height/2-s;t.translate(r,o),t.translate(n,s),t.rotate(e.rotation*y),t.translate(-n,-s)}});function M(t){return(t+540)%360*y}function L(t){return e.round(t)+.5}function I(t,e){var i,n,s,o=e.length;for(i=0;i<o;i++)n=e[i],s=new r(n.color),t.addColorStop(n.offset,"rgba("+s.r+","+s.g+","+s.b+","+n.opacity+")")}n.supportsCanvas()&&n.ViewFactory.current.register("canvas",x,30),c(n,{CanvasCircle:z,CanvasClipPath:_,CanvasGroup:k,CanvasLine:T,CanvasMultiLine:P,CanvasPath:C,CanvasRing:A,CanvasText:E,CanvasView:x})}(window.kendo.jQuery),function(t,e){var i=window.kendo,n=t.extend,s=i.deepExtend,r=t.inArray,o=t.isPlainObject,a=i.dataviz,h=i.ui.Widget,l=a.Box2D,c=a.Text,d=/^\d+$/,u=/^[a-z0-9]+$/i;function p(t,e,i){return t.substring(e,e+i)}var f=i.Class.extend({init:function(t){this.setOptions(t)},setOptions:function(t){this.options=n({},this.options,t),this.quietZoneLength=this.options.addQuietZone?2*this.options.quietZoneLength:0},encode:function(t,e,i){return void 0!==t&&(t+=""),this.initValue(t,e,i),this.options.addQuietZone&&this.addQuietZone(),this.addData(),this.options.addQuietZone&&this.addQuietZone(),{baseUnit:this.baseUnit,pattern:this.pattern}},options:{quietZoneLength:10,addQuietZone:!0,addCheckSum:!0},initValue:function(){},addQuietZone:function(){this.pattern.push(this.options.quietZoneLength||10)},addData:function(){},invalidCharacterError:function(t){throw new Error(i.format("Character '{0}'  is not valid for symbology {1}",t,this.name))}}),g={},m=f.extend({minBaseUnitLength:.7,addData:function(){var t=this.value;this.addStart();for(var e=0;e<t.length;e++)this.addCharacter(t.charAt(e));this.options.addCheckSum&&this.pushCheckSum(),this.addStop(),this.prepareValues()},addCharacter:function(t){var e=this.characterMap[t];e||this.invalidCharacterError(t),this.addBase(e)},addBase:function(){}}),v={addCharacter:function(t){this.characterMap[t]?this.addBase(this.characterMap[t]):t.charCodeAt(0)>127?this.invalidCharacterError(t):this.addExtended(t.charCodeAt(0))},addExtended:function(t){for(var e,i=0;i<this.extendedMappings.length;i++)if(e=this.extendedMappings[i].call(this,t)){for(var n=0;n<e.length;n++)this.addBase(e[n]);return void(this.dataLength+=e.length-1)}},extendedMappings:[function(t){if(97<=t&&t<=122){return[this.characterMap[this.shiftCharacters[0]],this.characterMap[String.fromCharCode(t-32)]]}},function(t){if(33<=t&&t<=58){return[this.characterMap[this.shiftCharacters[1]],this.characterMap[String.fromCharCode(t+32)]]}},function(t){if(1<=t&&t<=26){return[this.characterMap[this.shiftCharacters[2]],this.characterMap[String.fromCharCode(t+64)]]}},function(t){var e,i;if(this.specialAsciiCodes[t]){e=[];for(var n=0;n<this.specialAsciiCodes[t].length;n++)e.push(this.characterMap[this.shiftCharacters[3]]),e.push(this.characterMap[this.specialAsciiCodes[t][n]])}else i=6*Math.floor(t/32)+(t-27)%32+64,e=[this.characterMap[this.shiftCharacters[3]],this.characterMap[String.fromCharCode(i)]];return e}],specialAsciiCodes:{0:["U"],64:["V"],96:["W"],127:["T","X","Y","Z"]},shiftValuesAsciiCodes:{39:36,40:47,41:43,42:37},characterMap:{"+":!1,"/":!1,$:!1,"%":!1},shiftCharacters:["SHIFT0","SHIFT1","SHIFT2","SHIFT3"]};g.code39=m.extend({name:"Code 39",checkSumMod:43,minRatio:2.5,maxRatio:3,gapWidth:1,splitCharacter:"|",initValue:function(t,e,i){this.width=e,this.height=i,this.value=t,this.dataLength=t.length,this.pattern=[],this.patternString=""},prepareValues:function(){var t,e=this.minBaseUnitLength,i=this.maxRatio,n=this.minRatio,s=Math.max(.15*this.width,24);if(this.height<s)throw new Error("Insufficient Height. The minimum height for value: "+this.value+" is: "+s);for(;(t=this.getBaseUnit(i))<e&&i>n;)i=parseFloat((i-.1).toFixed(1));if(t<e){var r=Math.ceil(this.getBaseWidth(n)*e);throw new Error("Insufficient width. The minimum width for value: "+this.value+" is: "+r)}this.ratio=i,this.baseUnit=t,this.patternString=this.patternString.substring(0,this.patternString.length-1),this.pattern=this.pattern.concat(this.patternString.replace(/ratio/g,i).split(this.splitCharacter))},getBaseUnit:function(t){return this.width/this.getBaseWidth(t)},getBaseWidth:function(t){var e=3*(t+2);return this.quietZoneLength+e*(this.dataLength+2)+this.gapWidth*(this.dataLength+1)},addStart:function(){this.addPattern(this.characterMap.START.pattern),this.addCharacterGap()},addBase:function(t){this.addPattern(t.pattern),this.addCharacterGap()},addStop:function(){this.addPattern(this.characterMap.START.pattern)},addPattern:function(t){for(var e=0;e<t.length;e++)this.patternString+=this.patternMappings[t.charAt(e)]},addCharacterGap:function(){this.patternString+=this.gapWidth+this.splitCharacter},patternMappings:{b:"1|",w:"1|",B:"ratio|",W:"ratio|"},characterMap:{0:{pattern:"bwbWBwBwb",value:0},1:{pattern:"BwbWbwbwB",value:1},2:{pattern:"bwBWbwbwB",value:2},3:{pattern:"BwBWbwbwb",value:3},4:{pattern:"bwbWBwbwB",value:4},5:{pattern:"BwbWBwbwb",value:5},6:{pattern:"bwBWBwbwb",value:6},7:{pattern:"bwbWbwBwB",value:7},8:{pattern:"BwbWbwBwb",value:8},9:{pattern:"bwBWbwBwb",value:9},A:{pattern:"BwbwbWbwB",value:10},B:{pattern:"bwBwbWbwB",value:11},C:{pattern:"BwBwbWbwb",value:12},D:{pattern:"bwbwBWbwB",value:13},E:{pattern:"BwbwBWbwb",value:14},F:{pattern:"bwBwBWbwb",value:15},G:{pattern:"bwbwbWBwB",value:16},H:{pattern:"BwbwbWBwb",value:17},I:{pattern:"bwBwbWBwb",value:18},J:{pattern:"bwbwBWBwb",value:19},K:{pattern:"BwbwbwbWB",value:20},L:{pattern:"bwBwbwbWB",value:21},M:{pattern:"BwBwbwbWb",value:22},N:{pattern:"bwbwBwbWB",value:23},O:{pattern:"BwbwBwbWb",value:24},P:{pattern:"bwBwBwbWb",value:25},Q:{pattern:"bwbwbwBWB",value:26},R:{pattern:"BwbwbwBWb",value:27},S:{pattern:"bwBwbwBWb",value:28},T:{pattern:"bwbwBwBWb",value:29},U:{pattern:"BWbwbwbwB",value:30},V:{pattern:"bWBwbwbwB",value:31},W:{pattern:"BWBwbwbwb",value:32},X:{pattern:"bWbwBwbwB",value:33},Y:{pattern:"BWbwBwbwb",value:34},Z:{pattern:"bWBwBwbwb",value:35},"-":{pattern:"bWbwbwBwB",value:36},".":{pattern:"BWbwbwBwb",value:37}," ":{pattern:"bWBwbwBwb",value:38},$:{pattern:"bWbWbWbwb",value:39},"/":{pattern:"bWbWbwbWb",value:40},"+":{pattern:"bWbwbWbWb",value:41},"%":{pattern:"bwbWbWbWb",value:42},START:{pattern:"bWbwBwBwb"}},options:{addCheckSum:!1}}),g.code39extended=g.code39.extend(s({},v,{name:"Code 39 extended",characterMap:{SHIFT0:{pattern:"bWbwbWbWb",value:41},SHIFT1:{pattern:"bWbWbwbWb",value:40},SHIFT2:{pattern:"bWbWbWbwb",value:39},SHIFT3:{pattern:"bwbWbWbWb",value:42}}})),g.code93=m.extend({name:"Code 93",cCheckSumTotal:20,kCheckSumTotal:15,checkSumMod:47,initValue:function(t,e,i){this.value=t,this.width=e,this.height=i,this.pattern=[],this.values=[],this.dataLength=t.length},prepareValues:function(){var t=Math.max(.15*this.width,24);if(this.height<t)throw new Error("Insufficient Height");if(this.setBaseUnit(),this.baseUnit<this.minBaseUnitLength)throw new Error("Insufficient Width")},setBaseUnit:function(){this.baseUnit=this.width/(9*(this.dataLength+2+2)+this.quietZoneLength+1)},addStart:function(){var t=this.characterMap.START.pattern;this.addPattern(t)},addStop:function(){this.addStart(),this.pattern.push(this.characterMap.TERMINATION_BAR)},addBase:function(t){this.addPattern(t.pattern),this.values.push(t.value)},pushCheckSum:function(){var t,e=this._getCheckValues();this.checksum=e.join("");for(var i=0;i<e.length;i++)t=this.characterMap[this._findCharacterByValue(e[i])],this.addPattern(t.pattern)},_getCheckValues:function(){var t,e,i=this.values,n=i.length,s=0;for(e=n-1;e>=0;e--)s+=this.weightedValue(i[e],n-e,this.cCheckSumTotal);for(t=s%this.checkSumMod,s=this.weightedValue(t,1,this.kCheckSumTotal),e=n-1;e>=0;e--)s+=this.weightedValue(i[e],n-e+1,this.kCheckSumTotal);return[t,s%this.checkSumMod]},_findCharacterByValue:function(t){for(var e in this.characterMap)if(this.characterMap[e].value===t)return e},weightedValue:function(t,e,i){return(e%i||i)*t},addPattern:function(t){for(var e,i=0;i<t.length;i++)e=parseInt(t.charAt(i),10),this.pattern.push(e)},characterMap:{0:{pattern:"131112",value:0},1:{pattern:"111213",value:1},2:{pattern:"111312",value:2},3:{pattern:"111411",value:3},4:{pattern:"121113",value:4},5:{pattern:"121212",value:5},6:{pattern:"121311",value:6},7:{pattern:"111114",value:7},8:{pattern:"131211",value:8},9:{pattern:"141111",value:9},A:{pattern:"211113",value:10},B:{pattern:"211212",value:11},C:{pattern:"211311",value:12},D:{pattern:"221112",value:13},E:{pattern:"221211",value:14},F:{pattern:"231111",value:15},G:{pattern:"112113",value:16},H:{pattern:"112212",value:17},I:{pattern:"112311",value:18},J:{pattern:"122112",value:19},K:{pattern:"132111",value:20},L:{pattern:"111123",value:21},M:{pattern:"111222",value:22},N:{pattern:"111321",value:23},O:{pattern:"121122",value:24},P:{pattern:"131121",value:25},Q:{pattern:"212112",value:26},R:{pattern:"212211",value:27},S:{pattern:"211122",value:28},T:{pattern:"211221",value:29},U:{pattern:"221121",value:30},V:{pattern:"222111",value:31},W:{pattern:"112122",value:32},X:{pattern:"112221",value:33},Y:{pattern:"122121",value:34},Z:{pattern:"123111",value:35},"-":{pattern:"121131",value:36},".":{pattern:"311112",value:37}," ":{pattern:"311211",value:38},$:{pattern:"321111",value:39},"/":{pattern:"112131",value:40},"+":{pattern:"113121",value:41},"%":{pattern:"211131",value:42},SHIFT0:{pattern:"122211",value:46},SHIFT1:{pattern:"311121",value:45},SHIFT2:{pattern:"121221",value:43},SHIFT3:{pattern:"312111",value:44},START:{pattern:"111141"},TERMINATION_BAR:"1"}}),g.code93extended=g.code93.extend(s({},v,{name:"Code 93 extended",pushCheckSum:function(){var t,e=this._getCheckValues();this.checksum=e.join("");for(var i=0;i<e.length;i++)t=e[i],this.shiftValuesAsciiCodes[t]?this.addExtended(this.shiftValuesAsciiCodes[t]):this.addPattern(this.characterMap[this._findCharacterByValue(t)].pattern)}}));var y=i.Class.extend({init:function(t){this.encoding=t},addStart:function(){},is:function(){},move:function(){},pushState:function(){}}),b=y.extend({FNC4:"FNC4",init:function(t,e){this.encoding=t,this.states=e,this._initMoves(e)},addStart:function(){this.encoding.addPattern(this.START)},is:function(t,e){var i=t.charCodeAt(e);return this.isCode(i)},move:function(t){for(var e=0;!this._moves[e].call(this,t)&&e<this._moves.length;)e++},pushState:function(t){var e,i=this.states,n=t.value,s=n.length;if(r("C",i)>=0){var o=n.substr(t.index).match(/\d{4,}/g);o&&(s=n.indexOf(o[0],t.index))}for(;(e=t.value.charCodeAt(t.index))>=0&&this.isCode(e)&&t.index<s;)this.encoding.addPattern(this.getValue(e)),t.index++},_initMoves:function(t){this._moves=[],r(this.FNC4,t)>=0&&this._moves.push(this._moveFNC),r(this.shiftKey,t)>=0&&this._moves.push(this._shiftState),this._moves.push(this._moveState)},_moveFNC:function(t){if(t.fnc)return t.fnc=!1,t.previousState==this.key},_shiftState:function(t){if(t.previousState==this.shiftKey&&(t.index+1>=t.value.length||this.encoding[this.shiftKey].is(t.value,t.index+1)))return this.encoding.addPattern(this.SHIFT),t.shifted=!0,!0},_moveState:function(){return this.encoding.addPattern(this.MOVE),!0},SHIFT:98}),w={};w.A=b.extend({key:"A",shiftKey:"B",isCode:function(t){return 0<=t&&t<96},getValue:function(t){return t<32?t+64:t-32},MOVE:101,START:103}),w.B=b.extend({key:"B",shiftKey:"A",isCode:function(t){return 32<=t&&t<128},getValue:function(t){return t-32},MOVE:100,START:104}),w.C=y.extend({key:"C",addStart:function(){this.encoding.addPattern(this.START)},is:function(t,e){var i=p(t,e,4);return(e+4<=t.length||2==t.length)&&d.test(i)},move:function(){this.encoding.addPattern(this.MOVE)},pushState:function(t){for(var e;(e=p(t.value,t.index,2))&&d.test(e)&&2==e.length;)this.encoding.addPattern(parseInt(e,10)),t.index+=2},getValue:function(t){return t},MOVE:99,START:105}),w.FNC4=y.extend({key:"FNC4",dependentStates:["A","B"],init:function(t,e){this.encoding=t,this._initSubStates(e)},addStart:function(t){var e=t.value.charCodeAt(0)-128,i=this._getSubState(e);this.encoding[i].addStart()},is:function(t,e){var i=t.charCodeAt(e);return this.isCode(i)},isCode:function(t){return 128<=t&&t<256},pushState:function(t){var e=this._initSubState(t),i=this.encoding,n=e.value.length;if(t.index+=n,n<3)for(var s;e.index<n;e.index++)s=e.value.charCodeAt(e.index),e.state=this._getSubState(s),e.previousState!=e.state&&(e.previousState=e.state,i[e.state].move(e)),i.addPattern(i[e.state].MOVE),i.addPattern(i[e.state].getValue(s));else e.state!=e.previousState&&i[e.state].move(e),this._pushStart(e),i.pushData(e,this.subStates),t.index<t.value.length&&this._pushStart(e);t.fnc=!0,t.state=e.state},_pushStart:function(t){this.encoding.addPattern(this.encoding[t.state].MOVE),this.encoding.addPattern(this.encoding[t.state].MOVE)},_initSubState:function(t){var e={value:this._getAll(t.value,t.index),index:0};return e.state=this._getSubState(e.value.charCodeAt(0)),e.previousState=t.previousState==this.key?e.state:t.previousState,e},_initSubStates:function(t){this.subStates=[];for(var e=0;e<t.length;e++)r(t[e],this.dependentStates)>=0&&this.subStates.push(t[e])},_getSubState:function(t){for(var e=0;e<this.subStates.length;e++)if(this.encoding[this.subStates[e]].isCode(t))return this.subStates[e]},_getAll:function(t,e){for(var i,n="";(i=t.charCodeAt(e++))&&this.isCode(i);)n+=String.fromCharCode(i-128);return n}}),w.FNC1=y.extend({key:"FNC1",startState:"C",dependentStates:["C","B"],startAI:"(",endAI:")",init:function(t,e){this.encoding=t,this.states=e},addStart:function(){this.encoding[this.startState].addStart()},is:function(){return r(this.key,this.states)>=0},pushState:function(t){var e,i,n,s=this.encoding,r=t.value.replace(/\s/g,""),o=new RegExp("["+this.startAI+this.endAI+"]","g"),a=t.index,h={state:this.startState};for(s.addPattern(this.START);;){if(h.index=0,(e=(n=r.charAt(a)===this.startAI?2:0)>0?this.getBySeparator(r,a):this.getByLength(r,a)).ai.length)i=a+n+e.id.length+e.ai.length;else if((i=r.indexOf(this.startAI,a+1))<0){if(a+e.ai.max+e.id.length+n<r.length)throw new Error("Separators are required after variable length identifiers");i=r.length}if(h.value=r.substring(a,i).replace(o,""),this.validate(e,h.value),s.pushData(h,this.dependentStates),i>=r.length)break;a=i,h.state!=this.startState&&(s[this.startState].move(h),h.state=this.startState),e.ai.length||s.addPattern(this.START)}t.index=t.value.length},validate:function(t,e){var i=e.substr(t.id.length),n=t.ai;if(!n.type&&!d.test(i))throw new Error("Application identifier "+t.id+" is numeric only but contains non numeric character(s).");if("alphanumeric"==n.type&&!u.test(i))throw new Error("Application identifier "+t.id+" is alphanumeric only but contains non alphanumeric character(s).");if(n.length&&n.length!==i.length)throw new Error("Application identifier "+t.id+" must be "+n.length+" characters long.");if(n.min&&n.min>i.length)throw new Error("Application identifier "+t.id+" must be at least "+n.min+" characters long.");if(n.max&&n.max<i.length)throw new Error("Application identifier "+t.id+" must be at most "+n.max+" characters long.")},getByLength:function(t,e){for(var i,n,s=2;s<=4;s++)if(i=p(t,e,s),n=this.getAI(i)||this.getAI(i.substring(0,i.length-1)))return{id:i,ai:n};this.unsupportedAIError(i)},unsupportedAIError:function(t){throw new Error(i.format("'{0}' is not a supported Application Identifier"),t)},getBySeparator:function(t,e){var i=t.indexOf(this.startAI,e),n=t.indexOf(this.endAI,i),s=t.substring(i+1,n),r=this.getAI(s)||this.getAI(s.substr(s.length-1));return r||this.unsupportedAIError(s),{ai:r,id:s}},getAI:function(t){var e=this.applicationIdentifiers,i=e.multiKey;if(e[t])return e[t];for(var n=0;n<i.length;n++){if(i[n].ids&&r(t,i[n].ids)>=0)return i[n].type;if(i[n].ranges)for(var s=i[n].ranges,o=0;o<s.length;o++)if(s[o][0]<=t&&t<=s[o][1])return i[n].type}},applicationIdentifiers:{22:{max:29,type:"alphanumeric"},402:{length:17},7004:{max:4,type:"alphanumeric"},242:{max:6,type:"alphanumeric"},8020:{max:25,type:"alphanumeric"},703:{min:3,max:30,type:"alphanumeric"},8008:{min:8,max:12,type:"alphanumeric"},253:{min:13,max:17,type:"alphanumeric"},8003:{min:14,max:30,type:"alphanumeric"},multiKey:[{ids:["15","17","8005","8100"],ranges:[[11,13],[310,316],[320,336],[340,369]],type:{length:6}},{ids:["240","241","250","251","400","401","403","7002","8004","8007","8110"],ranges:[[-9]],type:{max:30,type:"alphanumeric"}},{ids:["7001"],ranges:[[410,414]],type:{length:13}},{ids:["10","21","254","420","8002"],type:{max:20,type:"alphanumeric"}},{ids:["00","8006","8017","8018"],type:{length:18}},{ids:["01","02","8001"],type:{length:14}},{ids:["422"],ranges:[[424,426]],type:{length:3}},{ids:["20","8102"],type:{length:2}},{ids:["30","37"],type:{max:8,type:"alphanumeric"}},{ids:["390","392"],type:{max:15,type:"alphanumeric"}},{ids:["421","423"],type:{min:3,max:15,type:"alphanumeric"}},{ids:["391","393"],type:{min:3,max:18,type:"alphanumeric"}},{ids:["7003","8101"],type:{length:10}}]},START:102});var x=f.extend({init:function(t){f.fn.init.call(this,t),this._initStates()},_initStates:function(){for(var t=0;t<this.states.length;t++)this[this.states[t]]=new w[this.states[t]](this,this.states)},initValue:function(t,e,i){this.pattern=[],this.value=t,this.width=e,this.height=i,this.checkSum=0,this.totalUnits=0,this.index=0,this.position=1},addData:function(){var t={value:this.value,index:0,state:""};0!==this.value.length&&(t.state=t.previousState=this.getNextState(t,this.states),this.addStart(t),this.pushData(t,this.states),this.addCheckSum(),this.addStop(),this.setBaseUnit())},pushData:function(t,e){for(;this[t.state].pushState(t),!(t.index>=t.value.length);)if(t.shifted){var i=t.state;t.state=t.previousState,t.previousState=i,t.shifted=!1}else t.previousState=t.state,t.state=this.getNextState(t,e),this[t.state].move(t)},addStart:function(t){this[t.state].addStart(t),this.position=1},addCheckSum:function(){this.checksum=this.checkSum%103,this.addPattern(this.checksum)},addStop:function(){this.addPattern(this.STOP)},setBaseUnit:function(){this.baseUnit=this.width/(this.totalUnits+this.quietZoneLength)},addPattern:function(t){for(var e,i=this.characterMap[t].toString(),n=0;n<i.length;n++)e=parseInt(i.charAt(n),10),this.pattern.push(e),this.totalUnits+=e;this.checkSum+=t*this.position++},getNextState:function(t,e){for(var i=0;i<e.length;i++)if(this[e[i]].is(t.value,t.index))return e[i];this.invalidCharacterError(t.value.charAt(t.index))},characterMap:[212222,222122,222221,121223,121322,131222,122213,122312,132212,221213,221312,231212,112232,122132,122231,113222,123122,123221,223211,221132,221231,213212,223112,312131,311222,321122,321221,312212,322112,322211,212123,212321,232121,111323,131123,131321,112313,132113,132311,211313,231113,231311,112133,112331,132131,113123,113321,133121,313121,211331,231131,213113,213311,213131,311123,311321,331121,312113,312311,332111,314111,221411,431111,111224,111422,121124,121421,141122,141221,112214,112412,122114,122411,142112,142211,241211,221114,413111,241112,134111,111242,121142,121241,114212,124112,124211,411212,421112,421211,212141,214121,412121,111143,111341,131141,114113,114311,411113,411311,113141,114131,311141,411131,211412,211214,211232,2331112],STOP:106});g.code128a=x.extend({name:"Code 128 A",states:["A"]}),g.code128b=x.extend({name:"Code 128 B",states:["B"]}),g.code128c=x.extend({name:"Code 128 C",states:["C"]}),g.code128=x.extend({name:"Code 128",states:["C","B","A","FNC4"]}),g["gs1-128"]=x.extend({name:"Code GS1-128",states:["FNC1","C","B"]});var _=f.extend({initValue:function(t,e){this.pattern=[],this.value=t,this.checkSumLength=0,this.width=e},setBaseUnit:function(){this.baseUnit=this.width/(12*(this.value.length+this.checkSumLength)+this.quietZoneLength+7)},addData:function(){var t=this.value;this.addPattern(this.START);for(var e=0;e<t.length;e++)this.addCharacter(t.charAt(e));this.options.addCheckSum&&this.addCheckSum(),this.addPattern(this.STOP),this.setBaseUnit()},addCharacter:function(t){var e=this.characterMap[t];e||this.invalidCharacterError(t),this.addPattern(e)},addPattern:function(t){for(var e=0;e<t.length;e++)this.pattern.push(parseInt(t.charAt(e),10))},addCheckSum:function(){var t;t=this.checkSums[this.checkSumType].call(this.checkSums,this.value),this.checksum=t.join("");for(var e=0;e<t.length;e++)this.checkSumLength++,this.addPattern(this.characterMap[t[e]])},checkSums:{Modulo10:function(t){var e,i,n,s=[0,""],r=t.length%2;for(e=0;e<t.length;e++)s[(e+r)%2]+=parseInt(t.charAt(e),10);for(n=s[0],i=(2*s[1]).toString(),e=0;e<i.length;e++)n+=parseInt(i.charAt(e),10);return[(10-n%10)%10]},Modulo11:function(t){for(var e,i=0,n=t.length,s=0;s<n;s++)i+=(((n-s)%6||6)+1)*t.charAt(s);return 10!=(e=(11-i%11)%11)?[e]:[1,0]},Modulo11Modulo10:function(t){var e,i=this.Modulo11(t);return e=t+i[0],i.concat(this.Modulo10(e))},Modulo10Modulo10:function(t){var e,i=this.Modulo10(t);return e=t+i[0],i.concat(this.Modulo10(e))}},characterMap:["12121212","12121221","12122112","12122121","12211212","12211221","12212112","12212121","21121212","21121221"],START:"21",STOP:"121",checkSumType:""});g.msimod10=_.extend({name:"MSI Modulo10",checkSumType:"Modulo10"}),g.msimod11=_.extend({name:"MSI Modulo11",checkSumType:"Modulo11"}),g.msimod1110=_.extend({name:"MSI Modulo11 Modulo10",checkSumType:"Modulo11Modulo10"}),g.msimod1010=_.extend({name:"MSI Modulo10 Modulo10",checkSumType:"Modulo10Modulo10"}),g.code11=f.extend({name:"Code 11",cCheckSumTotal:10,kCheckSumTotal:9,kCheckSumMinLength:10,checkSumMod:11,DASH_VALUE:10,DASH:"-",START:"112211",STOP:"11221",initValue:function(t,e){this.pattern=[],this.value=t,this.width=e,this.totalUnits=0},addData:function(){var t=this.value;this.addPattern(this.START);for(var e=0;e<t.length;e++)this.addCharacter(t.charAt(e));this.options.addCheckSum&&this.addCheckSum(),this.addPattern(this.STOP),this.setBaseUnit()},setBaseUnit:function(){this.baseUnit=this.width/(this.totalUnits+this.quietZoneLength)},addCheckSum:function(){var t,e=this.value,i=e.length;if(t=this.getWeightedSum(e,i,this.cCheckSumTotal)%this.checkSumMod,this.checksum=t+"",this.addPattern(this.characterMap[t]),++i>=this.kCheckSumMinLength){var n=(t+this.getWeightedSum(e,i,this.kCheckSumTotal))%this.checkSumMod;this.checksum+=n,this.addPattern(this.characterMap[n])}},getWeightedSum:function(t,e,i){for(var n=0,s=0;s<t.length;s++)n+=this.weightedValue(this.getValue(t.charAt(s)),e,s,i);return n},weightedValue:function(t,e,i,n){return((e-i)%n||n)*t},getValue:function(t){return isNaN(t)?(t!==this.DASH&&this.invalidCharacterError(t),this.DASH_VALUE):parseInt(t,10)},addCharacter:function(t){var e=this.getValue(t),i=this.characterMap[e];this.addPattern(i)},addPattern:function(t){for(var e,i=0;i<t.length;i++)e=parseInt(t.charAt(i),10),this.pattern.push(e),this.totalUnits+=e},characterMap:["111121","211121","121121","221111","112121","212111","122111","111221","211211","211111","112111"],options:{addCheckSum:!0}}),g.postnet=f.extend({name:"Postnet",START:"2",VALID_CODE_LENGTHS:[5,9,11],DIGIT_SEPARATOR:"-",initValue:function(t,e,i){this.height=i,this.width=e,this.baseHeight=i/2,this.value=t.replace(new RegExp(this.DIGIT_SEPARATOR,"g"),""),this.pattern=[],this.validate(this.value),this.checkSum=0,this.setBaseUnit()},addData:function(){var t=this.value;this.addPattern(this.START);for(var e=0;e<t.length;e++)this.addCharacter(t.charAt(e));this.options.addCheckSum&&this.addCheckSum(),this.addPattern(this.START),this.pattern.pop()},addCharacter:function(t){var e=this.characterMap[t];this.checkSum+=parseInt(t,10),this.addPattern(e)},addCheckSum:function(){this.checksum=(10-this.checkSum%10)%10,this.addCharacter(this.checksum)},setBaseUnit:function(){this.baseUnit=this.width/(10*(this.value.length+1)+3+this.quietZoneLength)},validate:function(t){if(d.test(t)||this.invalidCharacterError(t.match(/[^0-9]/)[0]),r(t.length,this.VALID_CODE_LENGTHS)<0)throw new Error("Invalid value length. Valid lengths for the Postnet symbology are "+this.VALID_CODE_LENGTHS.join(","))},addPattern:function(t){for(var e,i=0;i<t.length;i++)e=this.height-this.baseHeight*t.charAt(i),this.pattern.push({width:1,y1:e,y2:this.height}),this.pattern.push(1)},characterMap:["22111","11122","11212","11221","12112","12121","12211","21112","21121","21211"]}),g.ean13=f.extend({initValue:function(t,e,i){if(12!=(t+="").length||/\D/.test(t))throw new Error('The value of the "EAN13" encoding should be 12 symbols');this.pattern=[],this.options.height=i,this.baseUnit=e/(95+this.quietZoneLength),this.value=t,this.checksum=this.calculateChecksum(),this.leftKey=t[0],this.leftPart=t.substr(1,6),this.rightPart=t.substr(7)+this.checksum},addData:function(){this.addPieces(this.characterMap.start),this.addSide(this.leftPart,this.leftKey),this.addPieces(this.characterMap.middle),this.addSide(this.rightPart),this.addPieces(this.characterMap.start)},addSide:function(t,e){for(var i=0;i<t.length;i++)e&&parseInt(this.keyTable[e].charAt(i),10)?this.addPieces(Array.prototype.slice.call(this.characterMap.digits[t.charAt(i)]).reverse(),!0):this.addPieces(this.characterMap.digits[t.charAt(i)],!0)},addPieces:function(t,e){for(var i=0;i<t.length;i++)e?this.pattern.push({y1:0,y2:.95*this.options.height,width:t[i]}):this.pattern.push(t[i])},calculateChecksum:function(){for(var t=0,e=0,i=this.value.split("").reverse().join(""),n=0;n<i.length;n++)n%2?e+=parseInt(i.charAt(n),10):t+=parseInt(i.charAt(n),10);return(10-(3*t+e)%10)%10},keyTable:["000000","001011","001101","001110","010011","011001","011100","010101","010110","011010"],characterMap:{digits:[[3,2,1,1],[2,2,2,1],[2,1,2,2],[1,4,1,1],[1,1,3,2],[1,2,3,1],[1,1,1,4],[1,3,1,2],[1,2,1,3],[3,1,1,2]],start:[1,1,1],middle:[1,1,1,1,1]}}),g.ean8=g.ean13.extend({initValue:function(t,e,i){if(7!=t.length||/\D/.test(t))throw new Error("Invalid value provided");this.value=t,this.options.height=i,this.checksum=this.calculateChecksum(this.value),this.leftPart=this.value.substr(0,4),this.rightPart=this.value.substr(4)+this.checksum,this.pattern=[],this.baseUnit=e/(67+this.quietZoneLength)}});var k=h.extend({init:function(e,i){h.fn.init.call(this,e,i),this.element=t(e),this.wrapper=this.element,this.element.addClass("k-barcode"),this.view=a.ViewFactory.current.create({},this.options.renderAs),this.setOptions(i)},setOptions:function(e){if(this.type=(e.type||this.options.type).toLowerCase(),"upca"==this.type&&(this.type="ean13",e.value="0"+e.value),"upce"==this.type&&(this.type="ean8",e.value="0"+e.value),!g[this.type])throw new Error("Encoding "+this.type+"is not supported.");this.encoding=new g[this.type],this.options=t.extend(!0,this.options,e),void 0!==e.value&&this.redraw()},redraw:function(){var t=this.view;this._redraw(t),t.renderTo(this.element[0])},svg:function(){if(a.SVGView){var t=new a.SVGView;return this._redraw(t),t.render()}throw new Error("Unable to create SVGView. Check that kendo.dataviz.svg.js is loaded.")},imageDataURL:function(){if(a.CanvasView){if(a.supportsCanvas()){var t=document.createElement("div"),e=new a.CanvasView;return this._redraw(e),e.renderTo(t).toDataURL()}return i.logToConsole("Warning: Unable to generate image. The browser does not support Canvas.\nUser agent: "+navigator.userAgent),null}throw new Error("Unable to create CanvasView. Check that kendo.dataviz.canvas.js is loaded.")},getSize:function(){return i.dimensions(this.element)},_resize:function(){this.redraw()},_redraw:function(t){var e,i,n=this.options,s=n.text,r=this._getSize(),o=n.border||{},h=this.encoding,c=l(0,0,r.width,r.height).unpad(o.width).unpad(n.padding),d=c.height();this.contentBox=c,t.children=[],this._renderBackground(t,r);var u=a.measureText(c,{font:n.text.font}).height;s.visible&&(d-=u),e=h.encode(n.value,r.width-(n.padding.left+n.padding.right),d),s.visible&&(i=n.value,n.checksum&&void 0!==h.checksum&&(i+=" "+h.checksum),this._renderTextElement(t,i)),this.barHeight=d,t.options.width=r.width,t.options.height=r.height,this._renderElements(t,e.pattern,e.baseUnit)},_getSize:function(){var t=this.element,e={width:300,height:100};return t.width()>0&&(e.width=t.width()),t.height()>0&&(e.height=t.height()),this.options.width&&(e.width=this.options.width),this.options.height&&(e.height=this.options.height),e},value:function(t){if(void 0===t)return this.options.value;this.options.value=t+"",this.redraw()},_renderElements:function(t,e,i){for(var n,s,r=0+this.options.padding.left,a=0;a<e.length;a++)n=(s=o(e[a])?e[a]:{width:e[a],y1:0,y2:this.barHeight}).width*i,a%2&&t.children.push(t.createRect(new l(r,s.y1+this.contentBox.y1,r+n,s.y2+this.contentBox.y1),{fill:this.options.color})),r+=n},_renderBackground:function(t,e){var i=this.options,n=i.border||{},s=l(0,0,e.width,e.height).unpad(n.width/2),r=t.createRect(s,{fill:i.background,stroke:n.width?n.color:"",strokeWidth:n.width,dashType:n.dashType});t.children.push(r)},_renderTextElement:function(t,e){var i=this.options.text,n=new c(e,{font:i.font,color:i.color,align:"center",vAlign:"bottom"});this.text=n,n.reflow(this.contentBox),n.box.unpad(i.margin),t.children.push(t.createText(e,{baseline:n.baseline,x:n.box.x1,y:n.box.y1,color:i.color,font:i.font}))},options:{name:"Barcode",renderAs:"canvas",value:"",type:"code39",checksum:!1,width:0,height:0,color:"black",background:"white",text:{visible:!0,font:"16px Consolas, Monaco, Sans Mono, monospace, sans-serif",color:"black",margin:{top:0,bottom:0,left:0,right:0}},border:{width:0,dashType:"solid",color:"black"},padding:{top:0,bottom:0,left:0,right:0}}});a.ui.plugin(k),i.deepExtend(a,{encodings:g,Encoding:f})}(window.kendo.jQuery),function(t,e){var i=window.kendo,n=t.extend,s=i.dataviz,r=i.ui.Widget,o=s.Box2D,a={1:0},h={0:1},l=[[1,0],[1,25,0]],c={15:20,16:20,18:24,19:24,22:20,24:22,26:24,28:20,30:20,31:24,32:28,33:24,36:18,37:22,39:20,40:24},d=[{L:{groups:[[1,19]],totalDataCodewords:19,errorCodewordsPerBlock:7},M:{groups:[[1,16]],totalDataCodewords:16,errorCodewordsPerBlock:10},Q:{groups:[[1,13]],totalDataCodewords:13,errorCodewordsPerBlock:13},H:{groups:[[1,9]],totalDataCodewords:9,errorCodewordsPerBlock:17}},{L:{groups:[[1,34]],totalDataCodewords:34,errorCodewordsPerBlock:10},M:{groups:[[1,28]],totalDataCodewords:28,errorCodewordsPerBlock:16},Q:{groups:[[1,22]],totalDataCodewords:22,errorCodewordsPerBlock:22},H:{groups:[[1,16]],totalDataCodewords:16,errorCodewordsPerBlock:28}},{L:{groups:[[1,55]],totalDataCodewords:55,errorCodewordsPerBlock:15},M:{groups:[[1,44]],totalDataCodewords:44,errorCodewordsPerBlock:26},Q:{groups:[[2,17]],totalDataCodewords:34,errorCodewordsPerBlock:18},H:{groups:[[2,13]],totalDataCodewords:26,errorCodewordsPerBlock:22}},{L:{groups:[[1,80]],totalDataCodewords:80,errorCodewordsPerBlock:20},M:{groups:[[2,32]],totalDataCodewords:64,errorCodewordsPerBlock:18},Q:{groups:[[2,24]],totalDataCodewords:48,errorCodewordsPerBlock:26},H:{groups:[[4,9]],totalDataCodewords:36,errorCodewordsPerBlock:16}},{L:{groups:[[1,108]],totalDataCodewords:108,errorCodewordsPerBlock:26},M:{groups:[[2,43]],totalDataCodewords:86,errorCodewordsPerBlock:24},Q:{groups:[[2,15],[2,16]],totalDataCodewords:62,errorCodewordsPerBlock:18},H:{groups:[[2,11],[2,12]],totalDataCodewords:46,errorCodewordsPerBlock:22}},{L:{groups:[[2,68]],totalDataCodewords:136,errorCodewordsPerBlock:18},M:{groups:[[4,27]],totalDataCodewords:108,errorCodewordsPerBlock:16},Q:{groups:[[4,19]],totalDataCodewords:76,errorCodewordsPerBlock:24},H:{groups:[[4,15]],totalDataCodewords:60,errorCodewordsPerBlock:28}},{L:{groups:[[2,78]],totalDataCodewords:156,errorCodewordsPerBlock:20},M:{groups:[[4,31]],totalDataCodewords:124,errorCodewordsPerBlock:18},Q:{groups:[[2,14],[4,15]],totalDataCodewords:88,errorCodewordsPerBlock:18},H:{groups:[[4,13],[1,14]],totalDataCodewords:66,errorCodewordsPerBlock:26}},{L:{groups:[[2,97]],totalDataCodewords:194,errorCodewordsPerBlock:24},M:{groups:[[2,38],[2,39]],totalDataCodewords:154,errorCodewordsPerBlock:22},Q:{groups:[[4,18],[2,19]],totalDataCodewords:110,errorCodewordsPerBlock:22},H:{groups:[[4,14],[2,15]],totalDataCodewords:86,errorCodewordsPerBlock:26}},{L:{groups:[[2,116]],totalDataCodewords:232,errorCodewordsPerBlock:30},M:{groups:[[3,36],[2,37]],totalDataCodewords:182,errorCodewordsPerBlock:22},Q:{groups:[[4,16],[4,17]],totalDataCodewords:132,errorCodewordsPerBlock:20},H:{groups:[[4,12],[4,13]],totalDataCodewords:100,errorCodewordsPerBlock:24}},{L:{groups:[[2,68],[2,69]],totalDataCodewords:274,errorCodewordsPerBlock:18},M:{groups:[[4,43],[1,44]],totalDataCodewords:216,errorCodewordsPerBlock:26},Q:{groups:[[6,19],[2,20]],totalDataCodewords:154,errorCodewordsPerBlock:24},H:{groups:[[6,15],[2,16]],totalDataCodewords:122,errorCodewordsPerBlock:28}},{L:{groups:[[4,81]],totalDataCodewords:324,errorCodewordsPerBlock:20},M:{groups:[[1,50],[4,51]],totalDataCodewords:254,errorCodewordsPerBlock:30},Q:{groups:[[4,22],[4,23]],totalDataCodewords:180,errorCodewordsPerBlock:28},H:{groups:[[3,12],[8,13]],totalDataCodewords:140,errorCodewordsPerBlock:24}},{L:{groups:[[2,92],[2,93]],totalDataCodewords:370,errorCodewordsPerBlock:24},M:{groups:[[6,36],[2,37]],totalDataCodewords:290,errorCodewordsPerBlock:22},Q:{groups:[[4,20],[6,21]],totalDataCodewords:206,errorCodewordsPerBlock:26},H:{groups:[[7,14],[4,15]],totalDataCodewords:158,errorCodewordsPerBlock:28}},{L:{groups:[[4,107]],totalDataCodewords:428,errorCodewordsPerBlock:26},M:{groups:[[8,37],[1,38]],totalDataCodewords:334,errorCodewordsPerBlock:22},Q:{groups:[[8,20],[4,21]],totalDataCodewords:244,errorCodewordsPerBlock:24},H:{groups:[[12,11],[4,12]],totalDataCodewords:180,errorCodewordsPerBlock:22}},{L:{groups:[[3,115],[1,116]],totalDataCodewords:461,errorCodewordsPerBlock:30},M:{groups:[[4,40],[5,41]],totalDataCodewords:365,errorCodewordsPerBlock:24},Q:{groups:[[11,16],[5,17]],totalDataCodewords:261,errorCodewordsPerBlock:20},H:{groups:[[11,12],[5,13]],totalDataCodewords:197,errorCodewordsPerBlock:24}},{L:{groups:[[5,87],[1,88]],totalDataCodewords:523,errorCodewordsPerBlock:22},M:{groups:[[5,41],[5,42]],totalDataCodewords:415,errorCodewordsPerBlock:24},Q:{groups:[[5,24],[7,25]],totalDataCodewords:295,errorCodewordsPerBlock:30},H:{groups:[[11,12],[7,13]],totalDataCodewords:223,errorCodewordsPerBlock:24}},{L:{groups:[[5,98],[1,99]],totalDataCodewords:589,errorCodewordsPerBlock:24},M:{groups:[[7,45],[3,46]],totalDataCodewords:453,errorCodewordsPerBlock:28},Q:{groups:[[15,19],[2,20]],totalDataCodewords:325,errorCodewordsPerBlock:24},H:{groups:[[3,15],[13,16]],totalDataCodewords:253,errorCodewordsPerBlock:30}},{L:{groups:[[1,107],[5,108]],totalDataCodewords:647,errorCodewordsPerBlock:28},M:{groups:[[10,46],[1,47]],totalDataCodewords:507,errorCodewordsPerBlock:28},Q:{groups:[[1,22],[15,23]],totalDataCodewords:367,errorCodewordsPerBlock:28},H:{groups:[[2,14],[17,15]],totalDataCodewords:283,errorCodewordsPerBlock:28}},{L:{groups:[[5,120],[1,121]],totalDataCodewords:721,errorCodewordsPerBlock:30},M:{groups:[[9,43],[4,44]],totalDataCodewords:563,errorCodewordsPerBlock:26},Q:{groups:[[17,22],[1,23]],totalDataCodewords:397,errorCodewordsPerBlock:28},H:{groups:[[2,14],[19,15]],totalDataCodewords:313,errorCodewordsPerBlock:28}},{L:{groups:[[3,113],[4,114]],totalDataCodewords:795,errorCodewordsPerBlock:28},M:{groups:[[3,44],[11,45]],totalDataCodewords:627,errorCodewordsPerBlock:26},Q:{groups:[[17,21],[4,22]],totalDataCodewords:445,errorCodewordsPerBlock:26},H:{groups:[[9,13],[16,14]],totalDataCodewords:341,errorCodewordsPerBlock:26}},{L:{groups:[[3,107],[5,108]],totalDataCodewords:861,errorCodewordsPerBlock:28},M:{groups:[[3,41],[13,42]],totalDataCodewords:669,errorCodewordsPerBlock:26},Q:{groups:[[15,24],[5,25]],totalDataCodewords:485,errorCodewordsPerBlock:30},H:{groups:[[15,15],[10,16]],totalDataCodewords:385,errorCodewordsPerBlock:28}},{L:{groups:[[4,116],[4,117]],totalDataCodewords:932,errorCodewordsPerBlock:28},M:{groups:[[17,42]],totalDataCodewords:714,errorCodewordsPerBlock:26},Q:{groups:[[17,22],[6,23]],totalDataCodewords:512,errorCodewordsPerBlock:28},H:{groups:[[19,16],[6,17]],totalDataCodewords:406,errorCodewordsPerBlock:30}},{L:{groups:[[2,111],[7,112]],totalDataCodewords:1006,errorCodewordsPerBlock:28},M:{groups:[[17,46]],totalDataCodewords:782,errorCodewordsPerBlock:28},Q:{groups:[[7,24],[16,25]],totalDataCodewords:568,errorCodewordsPerBlock:30},H:{groups:[[34,13]],totalDataCodewords:442,errorCodewordsPerBlock:24}},{L:{groups:[[4,121],[5,122]],totalDataCodewords:1094,errorCodewordsPerBlock:30},M:{groups:[[4,47],[14,48]],totalDataCodewords:860,errorCodewordsPerBlock:28},Q:{groups:[[11,24],[14,25]],totalDataCodewords:614,errorCodewordsPerBlock:30},H:{groups:[[16,15],[14,16]],totalDataCodewords:464,errorCodewordsPerBlock:30}},{L:{groups:[[6,117],[4,118]],totalDataCodewords:1174,errorCodewordsPerBlock:30},M:{groups:[[6,45],[14,46]],totalDataCodewords:914,errorCodewordsPerBlock:28},Q:{groups:[[11,24],[16,25]],totalDataCodewords:664,errorCodewordsPerBlock:30},H:{groups:[[30,16],[2,17]],totalDataCodewords:514,errorCodewordsPerBlock:30}},{L:{groups:[[8,106],[4,107]],totalDataCodewords:1276,errorCodewordsPerBlock:26},M:{groups:[[8,47],[13,48]],totalDataCodewords:1e3,errorCodewordsPerBlock:28},Q:{groups:[[7,24],[22,25]],totalDataCodewords:718,errorCodewordsPerBlock:30},H:{groups:[[22,15],[13,16]],totalDataCodewords:538,errorCodewordsPerBlock:30}},{L:{groups:[[10,114],[2,115]],totalDataCodewords:1370,errorCodewordsPerBlock:28},M:{groups:[[19,46],[4,47]],totalDataCodewords:1062,errorCodewordsPerBlock:28},Q:{groups:[[28,22],[6,23]],totalDataCodewords:754,errorCodewordsPerBlock:28},H:{groups:[[33,16],[4,17]],totalDataCodewords:596,errorCodewordsPerBlock:30}},{L:{groups:[[8,122],[4,123]],totalDataCodewords:1468,errorCodewordsPerBlock:30},M:{groups:[[22,45],[3,46]],totalDataCodewords:1128,errorCodewordsPerBlock:28},Q:{groups:[[8,23],[26,24]],totalDataCodewords:808,errorCodewordsPerBlock:30},H:{groups:[[12,15],[28,16]],totalDataCodewords:628,errorCodewordsPerBlock:30}},{L:{groups:[[3,117],[10,118]],totalDataCodewords:1531,errorCodewordsPerBlock:30},M:{groups:[[3,45],[23,46]],totalDataCodewords:1193,errorCodewordsPerBlock:28},Q:{groups:[[4,24],[31,25]],totalDataCodewords:871,errorCodewordsPerBlock:30},H:{groups:[[11,15],[31,16]],totalDataCodewords:661,errorCodewordsPerBlock:30}},{L:{groups:[[7,116],[7,117]],totalDataCodewords:1631,errorCodewordsPerBlock:30},M:{groups:[[21,45],[7,46]],totalDataCodewords:1267,errorCodewordsPerBlock:28},Q:{groups:[[1,23],[37,24]],totalDataCodewords:911,errorCodewordsPerBlock:30},H:{groups:[[19,15],[26,16]],totalDataCodewords:701,errorCodewordsPerBlock:30}},{L:{groups:[[5,115],[10,116]],totalDataCodewords:1735,errorCodewordsPerBlock:30},M:{groups:[[19,47],[10,48]],totalDataCodewords:1373,errorCodewordsPerBlock:28},Q:{groups:[[15,24],[25,25]],totalDataCodewords:985,errorCodewordsPerBlock:30},H:{groups:[[23,15],[25,16]],totalDataCodewords:745,errorCodewordsPerBlock:30}},{L:{groups:[[13,115],[3,116]],totalDataCodewords:1843,errorCodewordsPerBlock:30},M:{groups:[[2,46],[29,47]],totalDataCodewords:1455,errorCodewordsPerBlock:28},Q:{groups:[[42,24],[1,25]],totalDataCodewords:1033,errorCodewordsPerBlock:30},H:{groups:[[23,15],[28,16]],totalDataCodewords:793,errorCodewordsPerBlock:30}},{L:{groups:[[17,115]],totalDataCodewords:1955,errorCodewordsPerBlock:30},M:{groups:[[10,46],[23,47]],totalDataCodewords:1541,errorCodewordsPerBlock:28},Q:{groups:[[10,24],[35,25]],totalDataCodewords:1115,errorCodewordsPerBlock:30},H:{groups:[[19,15],[35,16]],totalDataCodewords:845,errorCodewordsPerBlock:30}},{L:{groups:[[17,115],[1,116]],totalDataCodewords:2071,errorCodewordsPerBlock:30},M:{groups:[[14,46],[21,47]],totalDataCodewords:1631,errorCodewordsPerBlock:28},Q:{groups:[[29,24],[19,25]],totalDataCodewords:1171,errorCodewordsPerBlock:30},H:{groups:[[11,15],[46,16]],totalDataCodewords:901,errorCodewordsPerBlock:30}},{L:{groups:[[13,115],[6,116]],totalDataCodewords:2191,errorCodewordsPerBlock:30},M:{groups:[[14,46],[23,47]],totalDataCodewords:1725,errorCodewordsPerBlock:28},Q:{groups:[[44,24],[7,25]],totalDataCodewords:1231,errorCodewordsPerBlock:30},H:{groups:[[59,16],[1,17]],totalDataCodewords:961,errorCodewordsPerBlock:30}},{L:{groups:[[12,121],[7,122]],totalDataCodewords:2306,errorCodewordsPerBlock:30},M:{groups:[[12,47],[26,48]],totalDataCodewords:1812,errorCodewordsPerBlock:28},Q:{groups:[[39,24],[14,25]],totalDataCodewords:1286,errorCodewordsPerBlock:30},H:{groups:[[22,15],[41,16]],totalDataCodewords:986,errorCodewordsPerBlock:30}},{L:{groups:[[6,121],[14,122]],totalDataCodewords:2434,errorCodewordsPerBlock:30},M:{groups:[[6,47],[34,48]],totalDataCodewords:1914,errorCodewordsPerBlock:28},Q:{groups:[[46,24],[10,25]],totalDataCodewords:1354,errorCodewordsPerBlock:30},H:{groups:[[2,15],[64,16]],totalDataCodewords:1054,errorCodewordsPerBlock:30}},{L:{groups:[[17,122],[4,123]],totalDataCodewords:2566,errorCodewordsPerBlock:30},M:{groups:[[29,46],[14,47]],totalDataCodewords:1992,errorCodewordsPerBlock:28},Q:{groups:[[49,24],[10,25]],totalDataCodewords:1426,errorCodewordsPerBlock:30},H:{groups:[[24,15],[46,16]],totalDataCodewords:1096,errorCodewordsPerBlock:30}},{L:{groups:[[4,122],[18,123]],totalDataCodewords:2702,errorCodewordsPerBlock:30},M:{groups:[[13,46],[32,47]],totalDataCodewords:2102,errorCodewordsPerBlock:28},Q:{groups:[[48,24],[14,25]],totalDataCodewords:1502,errorCodewordsPerBlock:30},H:{groups:[[42,15],[32,16]],totalDataCodewords:1142,errorCodewordsPerBlock:30}},{L:{groups:[[20,117],[4,118]],totalDataCodewords:2812,errorCodewordsPerBlock:30},M:{groups:[[40,47],[7,48]],totalDataCodewords:2216,errorCodewordsPerBlock:28},Q:{groups:[[43,24],[22,25]],totalDataCodewords:1582,errorCodewordsPerBlock:30},H:{groups:[[10,15],[67,16]],totalDataCodewords:1222,errorCodewordsPerBlock:30}},{L:{groups:[[19,118],[6,119]],totalDataCodewords:2956,errorCodewordsPerBlock:30},M:{groups:[[18,47],[31,48]],totalDataCodewords:2334,errorCodewordsPerBlock:28},Q:{groups:[[34,24],[34,25]],totalDataCodewords:1666,errorCodewordsPerBlock:30},H:{groups:[[20,15],[61,16]],totalDataCodewords:1276,errorCodewordsPerBlock:30}}],u=[1,0,1,1,1],p=[1,0,1],f={L:"01",M:"00",Q:"11",H:"10"},g=["11101100","00010001"],m=[function(t,e){return(t+e)%2==0},function(t){return t%2==0},function(t,e){return e%3==0},function(t,e){return(t+e)%3==0},function(t,e){return(Math.floor(t/2)+Math.floor(e/3))%2==0},function(t,e){return t*e%2+t*e%3==0},function(t,e){return(t*e%2+t*e%3)%2==0},function(t,e){return((t+e)%2+t*e%3)%2==0}],v=/^\d+/,y=new RegExp("^[A-Z $%*+./:-]+"),b=new RegExp("^[A-Z0-9 $%*+./:-]+"),w=new RegExp("^[^A-Z0-9 $%*+./:-]+"),x=Math.round;function _(t){return parseInt(t,2)}function k(t,e){var i=Number(t).toString(2);return i.length<e&&(i=new Array(e-i.length+1).join(0)+i),i}function C(t,e){for(var i=[],n=0;n<t.length;)i.push(t.substring(n,n+e)),n+=e;return i}var S=i.Class.extend({getVersionIndex:function(t){return t<10?0:t>26?2:1},getBitsCharacterCount:function(t){return this.bitsInCharacterCount[this.getVersionIndex(t||40)]},getModeCountString:function(t,e){return this.modeIndicator+k(t,this.getBitsCharacterCount(e))},encode:function(){},getStringBitsLength:function(){},getValue:function(){},modeIndicator:"",bitsInCharacterCount:[]}),T={};T.numeric=S.extend({bitsInCharacterCount:[10,12,14],modeIndicator:"0001",getValue:function(t){return parseInt(t,10)},encode:function(t,e){for(var i=C(t,3),n=this.getModeCountString(t.length,e),s=0;s<i.length-1;s++)n+=k(i[s],10);return n+k(i[s],1+3*i[s].length)},getStringBitsLength:function(t,e){var i=t%3;return 4+this.getBitsCharacterCount(e)+10*Math.floor(t/3)+3*i+(0===i?0:1)}}),T.alphanumeric=S.extend({characters:{0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,G:16,H:17,I:18,J:19,K:20,L:21,M:22,N:23,O:24,P:25,Q:26,R:27,S:28,T:29,U:30,V:31,W:32,X:33,Y:34,Z:35," ":36,$:37,"%":38,"*":39,"+":40,"-":41,".":42,"/":43,":":44},bitsInCharacterCount:[9,11,13],modeIndicator:"0010",getValue:function(t){return this.characters[t]},encode:function(t,e){for(var i=C(t,2),n=this.getModeCountString(t.length,e),s=0;s<i.length-1;s++)n+=k(45*this.getValue(i[s].charAt(0))+this.getValue(i[s].charAt(1)),11);return n+k(2==i[s].length?45*this.getValue(i[s].charAt(0))+this.getValue(i[s].charAt(1)):this.getValue(i[s].charAt(0)),1+5*i[s].length)},getStringBitsLength:function(t,e){return 4+this.getBitsCharacterCount(e)+11*Math.floor(t/2)+t%2*6}}),T.byte=S.extend({bitsInCharacterCount:[8,16,16],modeIndicator:"0100",getValue:function(t){var e=t.charCodeAt(0);if(e<=127||160<=e&&e<=255)return e;throw new Error("Unsupported character: "+t)},encode:function(t,e){for(var i=this.getModeCountString(t.length,e),n=0;n<t.length;n++)i+=k(this.getValue(t.charAt(n)),8);return i},getStringBitsLength:function(t,e){return 4+this.getBitsCharacterCount(e)+8*t}});var P={};for(var A in T)P[A]=new T[A];var z=function(t){var e=this,i=t.length-1,n=t.length-1,s=n,r=-1,o=0;e.move=function(){i+=r*o,n=s-(o^=1)},e.getNextCell=function(){for(;void 0!==t[i][n];)e.move(),(i<0||i>=t.length)&&(n=s-=8!=s?2:3,i=(r=-r)<0?t.length-1:0);return{row:i,column:n}},e.getNextRemainderCell=function(){if(e.move(),void 0===t[i][n])return{row:i,column:n}}};function D(t,e,i,n){for(var s=0;s<t.length;s++)t[s][i][n]=e}function E(t,e,i,n){for(var s=0;s<m.length;s++)t[s][i][n]=m[s](i,n)?1^e:parseInt(e,10)}var M=function(t,e){for(var i,n,s,r=new z(t[0]),o=0;o<e.length;o++)for(i=e[o],n=0;i.length>0;){for(var a=0;a<i.length;a++)for(var h=0;h<8;h++)s=r.getNextCell(),E(t,i[a][n].charAt(h),s.row,s.column);for(n++;i[0]&&n==i[0].length;)i.splice(0,1)}for(;s=r.getNextRemainderCell();)E(t,0,s.row,s.column)},L=function(t,e){for(var i=8*e,n=0,s=0;t.length<i&&n<"0000".length;)t+="0000".charAt(n++);for(t.length%8!=0&&(t+=new Array(9-t.length%8).join("0"));t.length<i;)t+=g[s],s^=1;return t};var I=function(t,e){for(var i=[],n=t.length-2;n>=0;n--)i[n]=t[n]^e[n];return i},B=function(t,e){for(var i=[],n=0;n<t.length;n++)for(var s=0;s<e.length;s++)void 0===i[n+s]?i[n+s]=(t[n]+(e[s]>=0?e[s]:0))%255:i[n+s]=a[h[i[n+s]]^h[(t[n]+e[s])%255]];return i};function R(t,e){var i=[],n=t.length-1;do{i[n]=h[(t[n]+e)%255],n--}while(void 0!==t[n]);return i}!function(){for(var t,e=1;e<255;e++)(t=2*h[e-1])>255&&(t^=285),h[e]=t,a[t]=e;t=2*h[e-1]^285,h[e]=t,h[-1]=0}(),function(){for(var t=2;t<=68;t++){var e=l[t-1],i=[t,0];l[t]=B(e,i)}}();var O=function(t,e){var i,n,s=l[e-1],r=new Array(e).concat(t),o=new Array(r.length-s.length).concat(s),h=t.length,c=[];for(n=0;n<h;n++)i=R(o,a[r[r.length-1]]),o.splice(0,1),r=I(i,r);for(n=r.length-1;n>=0;n--)c[e-1-n]=k(r[n],8);return c},N=function(t,e){for(var i,n,s,r,o,a=0,h=[],l=[],c=e.groups,d=0;d<c.length;d++){s=c[d][0];for(var u=0;u<s;u++){n=c[d][1],i=[],r=[];for(var p=1;p<=n;p++)o=t.substring(a,a+8),i.push(o),r[n-p]=_(o),a+=8;h.push(i),l.push(O(r,e.errorCodewordsPerBlock))}}return[h,l]},V=function(t,e,i,n,s){var r,o,a=v.exec(t),h=a?a[0]:"",l=y.exec(t),c=l?l[0]:"",d=b.exec(t),u=d?d[0]:"";return h&&(h.length>=e||t.length==h.length||h.length>=i&&!b.test(t.charAt(h.length)))?(r="numeric",o=h):u&&(t.length==u.length||u.length>=n||"alphanumeric"==s)?(r="alphanumeric",o=h||c):(r="byte",o=u?u+w.exec(t.substring(u.length))[0]:w.exec(t)[0]),{mode:r,modeString:o}},F=function(t){var e,i=[],n=0;for(i.push(V(t,8,5,8,e)),e=i[0].mode,t=t.substr(i[0].modeString.length);t.length>0;){var s=V(t,17,9,16,e);s.mode!=e?(e=s.mode,i.push(s),n++):i[n].modeString+=s.modeString,t=t.substr(s.modeString.length)}return i},H=function(t){for(var e=0,i=0;i<t.length;i++)e+=P[t[i].mode].getStringBitsLength(t[i].modeString.length);return Math.ceil(e/8)},U=function(t,e){var i=0,n=d.length-1,s=Math.floor(d.length/2);do{t<d[s][e].totalDataCodewords?n=s:i=s,s=i+Math.floor((n-i)/2)}while(n-i>1);return t<=d[i][e].totalDataCodewords?s+1:n+1},$=function(t,e){for(var i="",n=0;n<t.length;n++)i+=P[t[n].mode].encode(t[n].modeString,e);return i},j=function(t){var e,i="";if(0===_(t))return"101010000010010";e=G(_(t),"10100110111",15);for(var n=0;n<e.length;n++)i+=e.charAt(n)^"101010000010010".charAt(n);return i},G=function(t,e,i){var n=_(e),s=e.length-1,r=t<<s,o=k(t,i-s),a=W(r,n);return a=o+k(a,s)},W=function(t,e){var i=e.toString(2).length,n=t.toString(2).length;do{n=(t^=e<<n-i).toString(2).length}while(n>=i);return t};function q(t,e){return parseInt(t.charAt(e),10)}var Y=function(t){for(var e=[],i=17+4*t,n=0;n<m.length;n++){e[n]=new Array(i);for(var s=0;s<i;s++)e[n][s]=new Array(i)}return e},Q=function(t,e){var i,n,s=t[0],r=0,o=e.length;for(i=0,n=8;i<=8;i++)6!==i&&D(t,q(e,o-1-r++),i,n);for(i=8,n=7;n>=0;n--)6!==n&&D(t,q(e,o-1-r++),i,n);for(r=0,n=s.length-1,i=8;n>=s.length-8;n--)D(t,q(e,o-1-r++),i,n);for(D(t,1,s.length-8,8),i=s.length-7,n=8;i<s.length;i++)D(t,q(e,o-1-r++),i,n)},X=function(t){return G(t,"1111100100101",18)},Z=function(t,e){for(var i,n,s,r=t[0].length,o=r-11,a=r-11,h=0;h<e.length;h++)i=Math.floor(h/3),n=h%3,D(t,s=q(e,e.length-h-1),0+i,o+n),D(t,s,a+n,0+i)},K=function(t,e,i,n){for(var s,r=e.length+2,o=e.length+1,a=0;a<e.length;a++)for(var h=a;h<r-a;h++)D(t,s=e[a],i+h,n+a),D(t,s,i+a,n+h),D(t,s,i+o-h,n+o-a),D(t,s,i+o-a,n+o-h)},J=function(t,e,i,n){var s=i,r=n,o=t[0];do{D(t,0,s,n),D(t,0,i,r),s+=e[0],r+=e[1]}while(s>=0&&s<o.length)},tt=function(t){var e=t[0].length;K(t,u,0,0),J(t,[-1,-1],7,7),K(t,u,e-7,0),J(t,[1,-1],e-8,7),K(t,u,0,e-7),J(t,[-1,1],7,e-8)},et=function(t,e){if(!(e<2)){var i,n,s=t[0],r=s.length,o=Math.floor(e/7),a=[6],h=0;for((i=c[e])?n=(r-13-i)/o:i=n=(r-13)/(o+1),a.push(a[h++]+i);a[h]+n<r;)a.push(a[h++]+n);for(var l=0;l<a.length;l++)for(var d=0;d<a.length;d++)void 0===s[a[l]][a[d]]&&K(t,p,a[l]-2,a[d]-2)}},it=function(t){for(var e=1,i=t[0].length,n=8;n<i-8;n++)D(t,e,6,n),D(t,e,n,6),e^=1},nt=function(t){var e,i,n=[],s=[],r=[],o=[],a=[],h=t[0].length;for(i=0;i<t.length;i++)n[i]=0,r[i]=0,a[i]=[0,0],o[i]=[0,0],s[i]=[];for(i=0;i<h;i++)for(var l=0;l<h;l++)for(var c=0;c<t.length;c++)e=t[c],r[c]+=parseInt(e[i][l],10),s[c][0]===e[i][l]&&i+1<h&&l-1>=0&&e[i+1][l]==s[c][0]&&e[i+1][l-1]==s[c][0]&&(n[c]+=3),st(c,o,n,0,e[i][l]),st(c,o,n,1,e[l][i]),rt(c,n,s,e[i][l],a,0),rt(c,n,s,e[l][i],a,1);var d,u=h*h,p=Number.MAX_VALUE;for(i=0;i<n.length;i++)n[i]+=ot(r[i],u),n[i]<p&&(p=n[i],d=i);return d};function st(t,e,i,n,s){e[t][n]=(e[t][n]<<1^s)%128,93==e[t][n]&&(i[t]+=40)}function rt(t,e,i,n,s,r){i[t][r]==n?s[t][r]++:(i[t][r]=n,s[t][r]>=5&&(e[t]+=3+s[t][r]-5),s[t][r]=1)}function ot(t,e){var i=Math.floor(t/e*100),n=i%5,s=Math.abs(i-n-50),r=Math.abs(i+5-n-50);return 10*Math.min(s/5,r/5)}var at=function(t,e){this.dataString=t,this.version=e},ht=function(){this.getEncodingResult=function(t,e){var i=F(t),n=H(i),s=U(n,e),r=$(i,s);return new at(r,s)}},lt=function(){this.mode=P[this.encodingMode]};lt.fn=lt.prototype={encodingMode:"byte",utfBOM:"111011111011101110111111",initialModeCountStringLength:20,getEncodingResult:function(t,e){var i=this.encode(t),n=this.getDataCodewordsCount(i),s=U(n,e),r=this.mode.getModeCountString(i.length/8,s)+i;return new at(r,s)},getDataCodewordsCount:function(t){var e=t.length;return Math.ceil((this.initialModeCountStringLength+e)/8)},encode:function(t){for(var e=this.utfBOM,i=0;i<t.length;i++)e+=this.encodeCharacter(t.charCodeAt(i));return e},encodeCharacter:function(t){var e=this.getBytesCount(t),i=e-1,n="";if(1==e)n=k(t,8);else{for(var s=8-e,r=0;r<i;r++)n=k(t>>6*r&63|128,8)+n;n=(t>>6*i|255>>s<<s).toString(2)+n}return n},getBytesCount:function(t){for(var e=this.ranges,i=0;i<e.length;i++)if(t<e[i])return i+1},ranges:[128,2048,65536,2097152,67108864]};var ct=function(t){return t&&t.toLowerCase().indexOf("utf_8")>=0?new lt:new ht},dt=function(t,e,i){var n=new ct(i).getEncodingResult(t,e),s=n.version,r=d[s-1][e],o=L(n.dataString,r.totalDataCodewords),a=N(o,r),h=Y(s);tt(h),et(h,s),it(h),s>=7&&Z(h,k(0,18)),Q(h,k(0,15)),M(h,a);var l=nt(h),c=h[l];s>=7&&Z([c],X(s));var u=f[e]+k(l,3);return Q([c],j(u)),c},ut={DEFAULT_SIZE:200,QUIET_ZONE_LENGTH:4,DEFAULT_ERROR_CORRECTION_LEVEL:"L",DEFAULT_BACKGROUND:"#fff",DEFAULT_DARK_MODULE_COLOR:"#000",MIN_BASE_UNIT_SIZE:1},pt=r.extend({init:function(e,i){r.fn.init.call(this,e,i),this.element=t(e),this.wrapper=this.element,this.element.addClass("k-qrcode"),this._view=s.ViewFactory.current.create({},this.options.renderAs),this.setOptions(i)},redraw:function(){var t=this._view;this._redraw(t),t.renderTo(this.element[0])},svg:function(){if(s.SVGView){var t=new s.SVGView;return this._redraw(t),t.render()}throw new Error("Unable to create SVGView. Check that kendo.dataviz.svg.js is loaded.")},imageDataURL:function(){if(s.CanvasView){if(s.supportsCanvas()){var t=document.createElement("div"),e=new s.CanvasView;return this._redraw(e),e.renderTo(t).toDataURL()}return i.logToConsole("Warning: Unable to generate image. The browser does not support Canvas.\nUser agent: "+navigator.userAgent),null}throw new Error("Unable to create CanvasView. Check that kendo.dataviz.canvas.js is loaded.")},getSize:function(){return i.dimensions(this.element)},_resize:function(){this.redraw()},_redraw:function(t){var e,i,n,s,r,o,a=this._value,h=this.options.border||{},l=this.options.padding||0,c=h.width||0;h.width=c,a&&(n=dt(a,this.options.errorCorrection,this.options.encoding),o=(s=this._getSize())-2*(c+l),e=this._calculateBaseUnit(o,n.length),r=n.length*e,i=this._calculateQuietZone(r,o,c,l),t.children=[],t.options.width=s,t.options.height=s,this._renderBackground(t,s,h),this._renderMatrix(t,n,e,i))},_getSize:function(){var t;if(this.options.size)t=parseInt(this.options.size,10);else{var e=this.element,i=Math.min(e.width(),e.height());t=i>0?i:ut.DEFAULT_SIZE}return t},_calculateBaseUnit:function(t,e){var i=Math.floor(t/e);if(i<ut.MIN_BASE_UNIT_SIZE)throw new Error("Insufficient size.");return i*e>=t&&i-1>=ut.MIN_BASE_UNIT_SIZE&&i--,i},_calculateQuietZone:function(t,e,i,n){return i+n+(e-t)/2},_renderMatrix:function(t,e,i,n){for(var s,r,a,h,l=[],c=0;c<e.length;c++)for(s=n+c*i,h=0;h<e.length;){for(;0===e[c][h]&&h<e.length;)h++;if(h<e.length){for(r=h;1==e[c][h];)h++;a=new o(x(n+r*i),x(s),x(n+h*i),x(s+i)),l.push(a.points())}}t.children.push(t.createMultiLine(l,{fill:this.options.color,stroke:this.options.color,strokeWidth:0,align:!1}))},_renderBackground:function(t,e,i){t.children.push(t.createRect(o(0,0,e,e).unpad(i.width/2),{fill:this.options.background,stroke:i.color,strokeWidth:i.width,align:!1}))},setOptions:function(t){t=t||{},this.options=n(this.options,t),void 0!==t.value&&(this._value=this.options.value+""),this.redraw()},value:function(t){if(void 0===t)return this._value;this._value=t+"",this.redraw()},options:{name:"QRCode",renderAs:"canvas",encoding:"ISO_8859_1",value:"",errorCorrection:ut.DEFAULT_ERROR_CORRECTION_LEVEL,background:ut.DEFAULT_BACKGROUND,color:ut.DEFAULT_DARK_MODULE_COLOR,size:"",padding:0,border:{color:"",width:0}}});s.ui.plugin(pt),i.deepExtend(s,{QRCode:pt,QRCodeDefaults:ut,QRCodeFunctions:{FreeCellVisitor:z,fillData:M,padDataString:L,generateErrorCodewords:O,xorPolynomials:I,getBlocks:N,multiplyPolynomials:B,chooseMode:V,getModes:F,getDataCodewordsCount:H,getVersion:U,getDataString:$,encodeFormatInformation:j,encodeBCH:G,dividePolynomials:W,initMatrices:Y,addFormatInformation:Q,encodeVersionInformation:X,addVersionInformation:Z,addCentricPattern:K,addFinderSeparator:J,addFinderPatterns:tt,addAlignmentPatterns:et,addTimingFunctions:it,scoreMaskMatrixes:nt,encodeData:dt,UTF8Encoder:lt},QRCodeFields:{modes:P,powersOfTwo:a,powersOfTwoResult:h,generatorPolynomials:l}})}(window.kendo.jQuery),function(t,e){var i=window.kendo,n=i.Class,s=i.Observable,r=i.deepExtend,o=Math,a=t.proxy,h=i.dataviz,l=h.defined,c=h.filterSeriesByType,d=i.template,u=h.ui.Chart,p=h.Selection,f=h.addDuration,g=h.last,m=h.limitValue,v=h.lteDateIndex,y=h.renderTemplate,b=h.toDate,w=h.toTime,x=h.EQUALLY_SPACED_SERIES,_=u.extend({init:function(e,i){t(e).addClass("k-chart"),u.fn.init.call(this,e,i)},_applyDefaults:function(t,e){var i=this.element.width()||h.DEFAULT_WIDTH,n={seriesDefaults:{categoryField:t.dateField},axisDefaults:{categoryAxis:{name:"default",majorGridLines:{visible:!1},labels:{step:2},majorTicks:{visible:!1},maxDateGroups:o.floor(i/28)}}};e&&(e=r({},e,n)),this._navigator||k.setup(t,e),u.fn._applyDefaults.call(this,t,e)},_initDataSource:function(t){var e,i,n=t||{},s=n.dataSource,o=s&&s.serverFiltering,a=[].concat(n.categoryAxis)[0],l=(n.navigator||{}).select,c=l&&l.from&&l.to;o&&c&&(e=[].concat(s.filter||[]),i=new h.DateCategoryAxis(r({baseUnit:"fit"},a,{categories:[l.from,l.to]})),s.filter=k.buildFilter(i.range().min,l.to).concat(e)),u.fn._initDataSource.call(this,t)},options:{name:"StockChart",dateField:"date",axisDefaults:{categoryAxis:{type:"date",baseUnit:"fit",justified:!0},valueAxis:{narrowRange:!0,labels:{format:"C"}}},navigator:{select:{},seriesDefaults:{markers:{visible:!1},tooltip:{visible:!0,template:"#= kendo.toString(category, 'd') #"},line:{width:2}},hint:{},visible:!0},tooltip:{visible:!0},legend:{visible:!1}},_resize:function(){var t=this.options.transitions;this.options.transitions=!1,this._fullRedraw(),this.options.transitions=t},_redraw:function(){var t=this._navigator;t&&t.dataSource?t.redrawSlaves():this._fullRedraw()},_fullRedraw:function(){var t=this._navigator;t||(t=this._navigator=new k(this)),t.filterAxes(),u.fn._redraw.call(this),t.redraw()},_onDataChanged:function(){u.fn._onDataChanged.call(this),this._dataBound=!0},_bindCategoryAxis:function(t,e,i){var n,s=this,r=s.options.categoryAxis,o=r.length;if(u.fn._bindCategoryAxis.apply(this,arguments),"_navigator"===t.name)for(;i<o;)"_navigator"==(n=r[i++]).pane&&(n.categories=t.categories)},_trackSharedTooltip:function(t){var e=this._plotArea.paneByPoint(t);e&&"_navigator"===e.options.name?this._unsetActivePoint():u.fn._trackSharedTooltip.call(this,t)},destroy:function(){this._navigator.destroy(),u.fn.destroy.call(this)}}),k=s.extend({init:function(t){this.chart=t,this.options=r({},this.options,t.options.navigator),this._initDataSource(),l(this.options.hint.visible)||(this.options.hint.visible=this.options.visible),t.bind("drag",a(this._drag,this)),t.bind("dragEnd",a(this._dragEnd,this)),t.bind("zoom",a(this._zoom,this)),t.bind("zoomEnd",a(this._zoomEnd,this))},options:{},_initDataSource:function(){var t=this.options,e=t.autoBind,n=t.dataSource;l(e)||(e=this.chart.options.autoBind),this._dataChangedHandler=a(this._onDataChanged,this),n&&(this.dataSource=i.data.DataSource.create(n).bind("change",this._dataChangedHandler),e&&this.dataSource.fetch())},_onDataChanged:function(){var t,e,i,n,s,r=this.chart,o=r.options.series,a=o.length,h=r.options.categoryAxis,l=h.length,c=this.dataSource.view();for(t=0;t<a;t++)"_navigator"==(i=o[t]).axis&&r._isBindable(i)&&(i.data=c);for(e=0;e<l;e++)"_navigator"==(n=h[e]).pane&&("_navigator"==n.name?(r._bindCategoryAxis(n,c,e),s=n.categories):n.categories=s);r._model&&(this.redraw(),this.filterAxes(),(!r.options.dataSource||r.options.dataSource&&r._dataBound)&&this.redrawSlaves())},destroy:function(){var t=this.dataSource;t&&t.unbind("change",this._dataChangeHandler),this.selection&&this.selection.destroy()},redraw:function(){this._redrawSelf();var e,i=this.chart,n=this.options,s=this.mainAxis(),r=(e=s,S.prototype=e,new S),o=s.options.categories,a=this.options.select||{},h=this.selection,l=s.range(),c=l.min,d=l.max,u=a.from||c,f=a.to||d;o.length>0&&(h&&(h.destroy(),h.wrapper.remove()),r.box=s.box,h=this.selection=new p(i,r,{min:c,max:d,from:u,to:f,selectStart:t.proxy(this._selectStart,this),select:t.proxy(this._select,this),selectEnd:t.proxy(this._selectEnd,this),mousewheel:{zoom:"left"}}),n.hint.visible&&(this.hint=new C(i.element,{min:c,max:d,template:n.hint.template,format:n.hint.format})))},_redrawSelf:function(t){var e=this.chart._plotArea;e&&e.redraw(g(e.panes),t)},redrawSlaves:function(){var t=this.chart,e=t._plotArea,i=e.panes.slice(0,-1);e.srcSeries=t.options.series,e.redraw(i)},_drag:function(t){var e,i,n,s=this.chart,r=s._eventCoordinates(t.originalEvent),o=this.mainAxis(),a=o.range(),h=o.pane.box.containsPoint(r),l=s._plotArea.categoryAxis,c=t.axisRanges[l.options.name],d=this.options.select,u=this.selection;c&&!h&&u&&(e=d.from&&d.to?w(d.to)-w(d.from):w(u.options.to)-w(u.options.from),i=b(m(w(c.min),a.min,w(a.max)-e)),n=b(m(w(i)+e,w(a.min)+e,a.max)),this.options.select={from:i,to:n},this._liveDrag()&&(this.filterAxes(),this.redrawSlaves()),u.set(i,n),this.showHint(i,n))},_dragEnd:function(){this.filterAxes(),this.filterDataSource(),this.redrawSlaves(),this.hint&&this.hint.hide()},_liveDrag:function(){var t=i.support,e=t.touch,n=t.browser,s=n.mozilla,r=n.msie&&n.version<9;return!e&&!s&&!r},readSelection:function(){var t=this.selection.options,e=this.options.select;e.from=t.from,e.to=t.to},filterAxes:function(){var t,e,i=this.options.select||{},n=this.chart.options.categoryAxis,s=i.from,r=i.to;for(t=0;t<n.length;t++)"_navigator"!==(e=n[t]).pane&&(e.min=b(s),e.max=b(r))},filterDataSource:function(){var t,e=this.options.select||{},i=this.chart,n=i.dataSource,s=n&&n.options.serverFiltering;this.dataSource&&s&&(t=new h.DateCategoryAxis(r({baseUnit:"fit"},i.options.categoryAxis[0],{categories:[e.from,e.to]})).options,n.filter(k.buildFilter(f(t.min,-t.baseUnitStep,t.baseUnit),f(t.max,t.baseUnitStep,t.baseUnit))))},_zoom:function(t){var e,n,s=this.chart,r=t.delta,a=s._plotArea.categoryAxis,h=this.options.select,l=this.selection,c=this.mainAxis().options.categories;l&&(e=v(l.options.from,c),n=v(l.options.to,c),t.originalEvent.preventDefault(),o.abs(r)>1&&(r*=3),n-e>1?(l.expand(r),this.readSelection()):(a.options.min=h.from,h.from=a.scaleRange(-t.delta).min),i.support.touch||(this.filterAxes(),this.redrawSlaves()),l.set(h.from,h.to),this.showHint(this.options.select.from,this.options.select.to))},_zoomEnd:function(t){this._dragEnd(t)},showHint:function(t,e){var i=this.chart._plotArea;this.hint&&this.hint.show(t,e,i.backgroundBox())},_selectStart:function(t){var e=this.chart;e._selectStart.call(e,t)},_select:function(t){var e=this.chart;this.showHint(t.from,t.to),e._select.call(e,t)},_selectEnd:function(t){var e=this.chart;this.hint&&this.hint.hide(),this.readSelection(),this.filterAxes(),this.filterDataSource(),this.redrawSlaves(),e._selectEnd.call(e,t)},mainAxis:function(){var t=this.chart._plotArea;if(t)return t.namedCategoryAxes._navigator}});k.setup=function(t,e){t=t||{};var i=r({},(e=e||{}).navigator,t.navigator),n=t.panes=[].concat(t.panes),s=r({},i.pane,{name:"_navigator"});i.visible||(s.visible=!1,s.height=.1),n.push(s),k.attachAxes(t,i),k.attachSeries(t,i,e)},k.attachAxes=function(t,e){var i,n,s=e.series||[];i=t.categoryAxis=[].concat(t.categoryAxis),n=t.valueAxis=[].concat(t.valueAxis);var o=0===c(s,x).length,a=r({type:"date",pane:"_navigator",roundToBaseUnit:!o,justified:o,_collapse:!1,tooltip:{visible:!1},labels:{step:1},autoBind:!e.dataSource,autoBaseUnitSteps:{minutes:[1],hours:[1],days:[1,2],weeks:[],months:[1],years:[1]},_overlap:!1}),h=e.categoryAxis;i.push(r({},a,{maxDateGroups:200},h,{name:"_navigator",baseUnit:"fit",baseUnitStep:"auto",labels:{visible:!1},majorTicks:{visible:!1}}),r({},a,h,{name:"_navigator_labels",maxDateGroups:20,baseUnitStep:"auto",autoBaseUnitSteps:{minutes:[]},majorTicks:{visible:!0}}),r({},a,h,{name:"_navigator_ticks",maxDateGroups:200,majorTicks:{visible:!0,width:.5},labels:{visible:!1,mirror:!0}})),n.push(r({name:"_navigator",pane:"_navigator",majorGridLines:{visible:!1},visible:!1},e.valueAxis))},k.attachSeries=function(t,e,i){var n,s=t.series=t.series||[],o=[].concat(e.series||[]),a=i.seriesColors,h=e.seriesDefaults;for(n=0;n<o.length;n++)s.push(r({color:a[n%a.length],categoryField:e.dateField,visibleInLegend:!1,tooltip:{visible:!1}},h,o[n],{axis:"_navigator",categoryAxis:"_navigator",autoBind:!e.dataSource}))},k.buildFilter=function(t,e){return[{field:"Date",operator:"gte",value:b(t)},{field:"Date",operator:"lt",value:b(e)}]};var C=n.extend({init:function(e,i){this.options=r({},this.options,i),this.container=e,this.chartPadding={top:parseInt(e.css("paddingTop"),10),left:parseInt(e.css("paddingLeft"),10)},this.template=this.template,this.template||(this.template=this.template=y("<div class='k-navigator-hint' style='display: none; position: absolute; top: 1px; left: 1px;'><div class='k-tooltip'>&nbsp;</div><div class='k-scroll' /></div>")),this.element=t(this.template()).appendTo(e)},options:{format:"{0:d} - {1:d}",hideDelay:500},show:function(t,e,n){var s=b(w(t)+w(e-t)/2),r=this.options,o=i.format(this.options.format,t,e),a=this.element.find(".k-tooltip"),h=this.element.find(".k-scroll"),l=.4*n.width(),c=n.center().x-l,u=(n.center().x-c)/(r.max-r.min),p=s-r.min;this._hideTimeout&&clearTimeout(this._hideTimeout),this._visible||(this.element.stop(!1,!0).css("visibility","hidden").show(),this._visible=!0),r.template&&(o=d(r.template)({from:t,to:e})),a.html(o).css({left:n.center().x-a.outerWidth()/2,top:n.y1}),h.css({width:l,left:c+p*u,top:n.y1+parseInt(a.css("margin-top"),10)+parseInt(a.css("border-top-width"),10)+a.height()/2}),this.element.css("visibility","visible")},hide:function(){var t=this;t._hideTimeout&&clearTimeout(t._hideTimeout),t._hideTimeout=setTimeout((function(){t._visible=!1,t.element.fadeOut("slow")}),t.options.hideDelay)}});function S(){}h.ui.plugin(_),r(h,{Navigator:k})}(window.kendo.jQuery),function(t,e){var i=window.kendo,n=i.dataviz,s=n.ui.Chart,r=i.data.ObservableArray,o=n.SharedTooltip,a=i.deepExtend,h=t.isArray,l=n.inArray,c=Math,d=["bar","bullet"],u=s.extend({init:function(e,i){var n=this.stage=t("<span />"),o=i||{};e=t(e).addClass("k-sparkline").empty().append(n),this._initialWidth=c.floor(e.width()),o=f(o),(h(o)||o instanceof r)&&(o={seriesDefaults:{data:o}}),o.series||(o.series=[{data:f(o.data)}]),a(o,{seriesDefaults:{type:o.type}}),(l(o.series[0].type,d)||l(o.seriesDefaults.type,d))&&(o=a({},{categoryAxis:{crosshair:{visible:!1}}},o)),s.fn.init.call(this,e,o)},options:{name:"Sparkline",chartArea:{margin:2},axisDefaults:{visible:!1,majorGridLines:{visible:!1},valueAxis:{narrowRange:!0}},seriesDefaults:{type:"line",area:{line:{width:.5}},bar:{stack:!0},padding:2,width:.5,overlay:{gradient:null},highlight:{visible:!1},border:{width:0},markers:{size:2,visible:!1}},tooltip:{visible:!0,shared:!0},categoryAxis:{crosshair:{visible:!0,tooltip:{visible:!1}}},legend:{visible:!1},transitions:!1,pointWidth:5,panes:[{clip:!1}]},_applyDefaults:function(t){var e=this,i=n.ViewFactory.current.create({},t.renderAs);n.CanvasView&&i instanceof n.CanvasView&&a(t,{categoryAxis:{crosshair:{visible:!1}}}),s.fn._applyDefaults.apply(e,arguments)},_modelOptions:function(){var t,e=this.options,i=this._initialWidth,n=this.stage;return this.stage[0].innerHTML="&nbsp;",t=a({width:i||this._autoWidth(),height:n.height(),transitions:e.transitions},e.chartArea,{inline:!0,align:!1}),n.css({width:t.width,height:t.height}),t},_createTooltip:function(){var t=this.options,e=this.element;return this._sharedTooltip()?new p(e,this._plotArea,t.tooltip):s.fn._createTooltip.call(this)},_renderView:function(){return this.element.empty().append(this.stage),this._view.renderTo(this.stage[0])},_autoWidth:function(){var t,e,i,s=this.options,r=n.getSpacing(s.chartArea.margin),o=s.series,a=this.dataSource.total(),h=0;for(e=0;e<o.length;e++){if("bar"===(i=o[e]).type)return 150;if("bullet"===i.type)return 150;if("pie"===i.type)return this.stage.height();i.data&&(h=c.max(h,i.data.length))}return(t=c.max(a,h)*s.pointWidth)>0&&(t+=r.left+r.right),t}}),p=o.extend({options:{animation:{duration:0}},_anchor:function(t,e){var i=o.fn._anchor.call(this,t,e);return i.y=-this.element.height()-this.options.offset,i},_hideElement:function(){this.element.hide()}});function f(t){return"number"==typeof t?[t]:t}n.ui.plugin(u),a(n,{})}(window.kendo.jQuery),function(){var t=jQuery,e=document,i=Math,n=window.kendo,s=n.Class,r=n.deepExtend,o=n.dataviz,a=o.Color,h=o.Box2D,l=o.Point2D,c=o.ExpandAnimation,d=o.ViewBase,u=o.ViewElement,p=o.defined,f=o.renderTemplate,g=o.uniqueId,m=o.rotatePoint,v=o.round,y=o.supportsSVG,b=o.CLIP,w=o.COORD_PRECISION,x=o.DEFAULT_WIDTH,_=o.DEFAULT_HEIGHT,k=o.DEFAULT_FONT,C=d.extend({init:function(t){d.fn.init.call(this,t),this.decorators.push(new H(this),new U(this),new $(this)),o.ui.Chart&&this.decorators.push(new o.BarAnimationDecorator(this),new o.PieAnimationDecorator(this),new o.BubbleAnimationDecorator(this)),this.decorators.push(new j(this)),n.support.browser.msie&&!y()&&void 0!==window.performance||this.decorators.push(new o.FadeAnimationDecorator(this)),o.Gauge&&this.decorators.push(new o.RadialPointerAnimationDecorator(this),new o.ArrowPointerAnimationDecorator(this),new o.BarIndicatorAnimationDecorator(this)),this.template=C.template,this.tagName=this.options.inline?"span":"div",this.template||(this.template=C.template=f("<#= d.tagName # style='width:#= d.options.width #px; height:#= d.options.height #px; position: relative;'>#= d.renderContent() #</#= d.tagName #>"))},options:{width:x,height:_},renderTo:function(t){var i;return e.namespaces&&e.namespaces.add("kvml","urn:schemas-microsoft-com:vml","#default#VML"),this.setupAnimations(),t.innerHTML=this.render(),this.playAnimations(),i=t.firstChild,this._viewElement=i,i},renderElement:function(t){var i,n=e.createElement("div");return n.style.display="none",e.body.appendChild(n),n.innerHTML=t.render(),i=n.firstChild,e.body.removeChild(n),i},createText:function(t,e){return this.decorate(e&&e.rotation?new T(t,e):new S(t,e))},createRect:function(t,e){return this.decorate(new E(t.points(),!0,this.setDefaults(e)))},createCubicCurve:function(t,e,i){return new D(t,e,i)},createLine:function(t,e,i,n,s){return this.decorate(new E([new l(t,e),new l(i,n)],!1,this.setDefaults(s)))},createMultiLine:function(t,e){return this.decorate(new M(t,!1,this.setDefaults(e)))},createPolyline:function(t,e,i){return this.decorate(new E(t,e,this.setDefaults(i)))},createCircle:function(t,e,i){return this.decorate(new B(t,e,i))},createSector:function(t,e){return this.decorate(new I(t,e))},createRing:function(t,e){return this.decorate(new L(t,this.setDefaults(e)))},createGroup:function(t){return this.decorate(new R(this.setDefaults(t)))},createClipPath:function(t,e){var i;return i=new O(e,{id:t}),this.definitions[t]=i,i},createGradient:function(t){var e=p(t.cx)&&p(t.cy)&&p(t.bbox);return"radial"===t.type&&e?new F(t):"linear"===t.type?new V(t):"#000"}}),S=u.extend({init:function(t,e){u.fn.init.call(this,e),this.content=t,this.template=S.template,this.template||(this.template=S.template=f("<kvml:textbox #= d.renderId() # #= d.renderDataAttributes() #style='position: absolute; left: #= d.options.x #px; top: #= d.options.y #px; font: #= d.options.font #; color: #= d.options.color #; visibility: #= d.renderVisibility() #; white-space: nowrap; #= d.renderCursor() #'>#= d.content #</kvml:textbox>"))},options:{x:0,y:0,font:k,color:"#000",fillOpacity:1,cursor:{}},refresh:function(e){t(e).css("visibility",this.renderVisibility())},clone:function(){return new S(this.content,r({},this.options))},renderVisibility:function(){return this.options.fillOpacity>0?"visible":"hidden"},renderCursor:function(){var t=this.options,e="";return p(t.cursor.style)&&(e+="cursor: "+t.cursor.style+";"),e}}),T=u.extend({init:function(t,e){u.fn.init.call(this,e),this.content=t,this.template=T.template,this.template||(this.template=T.template=f("<kvml:shape #= d.renderId() # #= d.renderDataAttributes() #style='position: absolute; top: 0px; left: 0px; width: 1px; height: 1px;' stroked='false' coordsize='1,1'>#= d.renderPath() #<kvml:fill color='#= d.options.color #' /><kvml:textpath on='true' style='font: #= d.options.font #;' fitpath='false' string='#= d.content #' /></kvml:shape>"))},options:{x:0,y:0,font:k,color:"#000",size:{width:0,height:0}},renderPath:function(){var t=this.options,e=t.size.width,i=t.size.height,n=t.x+e/2,s=t.y+i/2,r=-t.rotation,o=m(t.x,s,n,s,r),a=m(t.x+e,s,n,s,r);return"<kvml:path textpathok='true' v='m "+v(o.x)+","+v(o.y)+" l "+v(a.x)+","+v(a.y)+"' />"}}),P=u.extend({init:function(t){u.fn.init.call(this,t),this.template=P.template,this.template||(this.template=P.template=f('<kvml:stroke on=\'#= !!d.options.stroke && !!d.options.strokeWidth #\' #= d.renderAttr("color", d.options.stroke) #weight=\'#= d.options.strokeWidth || 0 #px\' #= d.renderAttr("dashstyle", d.options.dashType) ##= d.renderAttr("opacity", d.options.strokeOpacity) # />'))},refresh:function(t){try{t.opacity=this.options.strokeOpacity}catch(t){}}}),A=u.extend({init:function(t){u.fn.init.call(this,t),this.template=A.template,this.template||(this.template=A.template=f('<kvml:fill on=\'#= d.isEnabled() #\' #= d.renderAttr("color", d.options.fill) ##= d.renderAttr("weight", d.options.fillWidth) ##= d.renderAttr("opacity", d.options.fillOpacity) # />'))},isEnabled:function(){var t=this.options.fill;return!!t&&"transparent"!==t.toLowerCase()},refresh:function(t){try{t.opacity=this.options.fillOpacity}catch(t){}}}),z=u.extend({init:function(t){u.fn.init.call(this,t),this.template=z.template,this.template||(this.template=z.template=f("<kvml:shape #= d.renderId() # #= d.renderDataAttributes() #style='position:absolute; #= d.renderSize() # display:#= d.renderDisplay() #; #= d.renderCursor() #' coordorigin='0 0' #= d.renderCoordsize() #><kvml:path v='#= d.renderPoints() # e' />#= d.fill.render() + d.stroke.render() #</kvml:shape>")),this.stroke=new P(this.options),this.fill=new A(this.options)},options:{fill:"",fillOpacity:1,strokeOpacity:1,rotation:[0,0,0],visible:!0,cursor:{}},renderCoordsize:function(){var t=!1===this.options.align?1e4:1;return"coordsize='"+t+" "+t+"'"},renderSize:function(){var t=!1===this.options.align?100:1;return"width:"+t+"px; height:"+t+"px;"},render:function(){return this.fill.options.fillOpacity=this.options.fillOpacity,this.stroke.options.strokeOpacity=this.options.strokeOpacity,u.fn.render.call(this)},renderDisplay:function(){return this.options.visible?"block":"none"},renderPoints:function(){},refresh:function(e){if(e){var i=t(e),n=i[0].parentNode,s=this.fill,r=this.stroke;n&&(i.find("path")[0].v=this.renderPoints(),s.options=r.options=this.options,s.refresh(i.find("fill")[0]),r.refresh(i.find("stroke")[0]),i.css("display",this.renderDisplay()),n.style.cssText=n.style.cssText)}},renderCursor:function(){var t=this.options,e="";return p(t.cursor.style)&&(e+="cursor: "+t.cursor.style+";"),e}}),D=z.extend({init:function(t,e,i){z.fn.init.call(this,e),this.points=t,this.areaPoints=i},renderPoints:function(){var t,e,n,s=this.areaPoints,r=this.points,o=[];for(t=1;t<r.length;t+=3){n=[];for(var a=0;a<3;a++)e=r[t+a],n.push(v(e.x)+","+v(e.y));o.push("C "+n.join(" "))}if(s&&s.length){for(t=0;t<s.length;t++)o.push("L "+v(s[t].x)+","+v(s[t].y));o.push("X")}return"M "+i.round(r[0].x)+","+i.round(r[0].y)+" "+o.join(" ")+" E"}}),E=z.extend({init:function(t,e,i){z.fn.init.call(this,i),this.points=t,this.closed=e},renderPoints:function(){var t=this.points;return this._renderPoints(t)},_renderPoints:function(t){var e,i=this,n=t.length,s=function(t){var e=i.options.rotation;return m(t.x,t.y,e[1],e[2],-e[0])},r="m "+i._print(s(t[0]));if(n>1)for(r+=" l ",e=1;e<n;e++)r+=i._print(s(t[e])),e<n-1&&(r+=", ");return i.closed&&(r+=" x"),r},clone:function(){return new E(r([],this.points),this.closed,r({},this.options))},_print:function(t){var e=!1===this.options.align?100:1;return i.round(t.x*e)+","+i.round(t.y*e)}}),M=E.extend({renderPoints:function(){var t,e=this.points,i=[];for(t=0;t<e.length;t++)i.push(this._renderPoints(e[t]));return i.join(" ")}}),L=z.extend({init:function(t,e){z.fn.init.call(this,e),this.pathTemplate=L.pathTemplate,this.pathTemplate||(this.pathTemplate=L.pathTemplate=f("M #= d.osp.x #,#= d.osp.y # WA #= d.obb.l #,#= d.obb.t # #= d.obb.r #,#= d.obb.b # #= d.osp.x #,#= d.osp.y # #= d.oep.x #,#= d.oep.y # L #= d.iep.x #,#= d.iep.y # AT #= d.ibb.l #,#= d.ibb.t # #= d.ibb.r #,#= d.ibb.b # #= d.iep.x #,#= d.iep.y # #= d.isp.x #,#= d.isp.y # X E")),this.config=t},renderPoints:function(){var t,e,n,s,r=this.config,o=i.max(v(r.r),0),a=i.max(v(r.ir),0),h=v(r.c.x),c=v(r.c.y),d=r.startAngle,u=r.angle+d,p=u-d,f={l:h-o,t:c-o,r:h+o,b:c+o},g={l:h-a,t:c-a,r:h+a,b:c+a};function m(t){return new l(v(t.x),v(t.y))}return p<=1?u+=1-p:p>359&&(u-=1-p),t=m(r.point(d)),e=m(r.point(d,!0)),s=m(r.point(u)),n=m(r.point(u,!0)),this.pathTemplate({obb:f,ibb:g,osp:t,isp:e,oep:s,iep:n,cx:h,cy:c})},clone:function(){return new L(r({},this.config),r({},this.options))}}),I=L.extend({init:function(t,e){L.fn.init.call(this,t,e),this.pathTemplate=I.pathTemplate,this.pathTemplate||(this.pathTemplate=I.pathTemplate=f("M #= d.osp.x #,#= d.osp.y # WA #= d.obb.l #,#= d.obb.t # #= d.obb.r #,#= d.obb.b # #= d.osp.x #,#= d.osp.y # #= d.oep.x #,#= d.oep.y # L #= d.cx #,#= d.cy # X E"))},clone:function(){return new I(r({},this.config),r({},this.options))}}),B=u.extend({init:function(t,e,i){u.fn.init.call(this,i),this.c=t,this.r=e,this.template=B.template,this.template||(this.template=B.template=f("<kvml:oval #= d.renderId() # #= d.renderDataAttributes() #style='position:absolute; width:#= d.r * 2 #px; height:#= d.r * 2 #px; top:#= d.c.y - d.r #px; left:#= d.c.x - d.r #px;'>#= d.fill.render() + d.stroke.render() #</kvml:oval>")),this.stroke=new P(this.options),this.fill=new A(this.options)},options:{fill:"",fillOpacity:1},refresh:function(e){var n=this.c,s=i.max(0,this.r),r=2*s,o=t(e);o.css({width:r,height:r,top:n.y-s,left:n.x-s}),this.fill.options=this.options,this.fill.refresh(o.find("fill")[0])},clone:function(){return new B(r({},this.c),this.r,r({},this.options))}}),R=u.extend({init:function(t){u.fn.init.call(this,t),this.tagName=this.options.inline?"span":"div",this.template=R.template,this.template||(this.template=R.template=f("<#= d.tagName # #= d.renderId() ##= d.renderDataAttributes() #style='position: absolute; white-space: nowrap;'>#= d.renderContent() #</#= d.tagName #>"))}}),O=u.extend({init:function(t,e){u.fn.init.call(this,e),this.tagName=this.options.inline?"span":"div",this.template=O.template,this.clipTemplate=O.clipTemplate,this.template||(this.template=O.template=f("<#= d.tagName # #= d.renderId() #style='position:absolute;width:#= d.box.width() #px; height:#= d.box.height() + d.box.y1#px; top:0px; left:0px; clip:#= d._renderClip() #;' >#= d.renderContent() #</#= d.tagName #>"),this.clipTemplate=O.clipTemplate=f("rect(#= d.points[0].y #px #= d.points[1].x #px #= d.points[2].y #px #= d.points[0].x #px)")),this.box=t,this.points=t.points()},clone:function(){return new O(this.box,r({},this.options))},refresh:function(t){t&&(t.style.clip=this._renderClip())},_renderClip:function(){return this.clipTemplate(this)},destroy:function(){t("#"+this.options.id+">*").unwrap()}}),N=u.extend({init:function(t){u.fn.init.call(this,t)},options:{opacity:1},renderColors:function(){var t,e,n=this.options.stops,s=n.length,r=[],o=i.round;for(e=0;e<s;e++)t=n[e],r.push(o(100*t.offset)+"% "+t.color);return r.join(",")}}),V=N.extend({init:function(t){N.fn.init.call(this,t),this.template=V.template,this.template||(this.template=V.template=f("<kvml:fill type='gradient' angle='#= 270 - d.options.rotation #' colors='#= d.renderColors() #' opacity='#= d.options.opacity #' />"))},options:{rotation:0}}),F=N.extend({init:function(t){N.fn.init.call(this,t),this.template=F.template,this.template||(this.template=F.template=f("<kvml:fill type='gradienttitle' focus='100%' focusposition='#= d.focusPosition() #'colors='#= d.renderColors() #' color='#= d.firstColor() #' color2='#= d.lastColor() #' opacity='#= d.options.opacity #' />"))},focusPosition:function(){var t=this.options,e=t.bbox,i=t.cx,n=t.cy,s=Math.max(0,Math.min(1,(i-e.x1)/e.width())),r=Math.max(0,Math.min(1,(n-e.y1)/e.height()));return v(s,w)+" "+v(r,w)},firstColor:function(){return this.options.stops[0].color},lastColor:function(){var t=this.options.stops;return t[t.length-1].color}});function H(t){this.view=t}function U(t){this.view=t}function $(t){this.view=t}H.prototype={decorate:function(t){var e,i,n=t.options,s=this.view;return n.overlay&&(i=n.overlay.bbox,e=s.buildGradient(r({},n.overlay,{_overlayFill:n.fill,_bboxHash:p(i)?i.getHash():""}))),e?(delete n.overlay,n.fill=r(q(n.fill,e),{opacity:n.fillOpacity}),t):t}},U.prototype={decorate:function(t){var e=this.view,i=t.options.fill;return i&&!1!==i.supportVML&&(i.gradient&&(i=e.buildGradient(i)),"object"===_typeof(i)&&(t.fill=e.createGradient(i))),t}},$.prototype={decorate:function(t){var e=this.view.definitions[t.options.clipPathId];return e?((e=e.clone()).options.id=g(),e.children.push(t),e):t}};var j=s.extend({init:function(t){this.view=t},decorate:function(t){var e,i=this.view,n=i.options,s=t.options.animation;return s&&s.type===b&&n.transitions?(e=new O(new h(0,0,n.width,n.height),{id:g(),inline:n.inline}),i.animations.push(new c(e,{size:n.width})),e.children.push(t),e):t}});function G(t,e,i){var n=new a(t),s=new a(e),r=W(n.r,s.r,i),o=W(n.g,s.g,i),h=W(n.b,s.b,i);return new a(r,o,h).toHex()}function W(t,e,n){return i.round(n*e+(1-n)*t)}function q(t,e){var i,n,s,o=e.stops,a=o.length,h=r({},e);for(h.stops=[],i=0;i<a;i++)n=o[i],(s=h.stops[i]=r({},o[i])).color=G(t,n.color,n.opacity),s.opacity=0;return h}n.support.browser.msie&&o.ViewFactory.current.register("vml",C,20),r(o,{VMLCircle:B,VMLClipAnimationDecorator:j,VMLClipDecorator:$,VMLClipRect:O,VMLFill:A,VMLGroup:R,VMLLine:E,VMLMultiLine:M,VMLLinearGradient:V,VMLOverlayDecorator:H,VMLPath:z,VMLRadialGradient:F,VMLRing:L,VMLRotatedText:T,VMLSector:I,VMLStroke:P,VMLText:S,VMLView:C,blendColors:G,blendGradient:q})}(window.kendo.jQuery),function(){var t=Math,e=window.kendo,i=e.deepExtend,n=e.dataviz,s=t.PI/180;function r(t){return"undefined"!==_typeof(t)}function o(t,e){return r(e)?" "+t+"='"+e+"' ":""}i(n,{util:{mixins:{geometryChange:function(){this.observer&&this.observer.geometryChange()}},alignToPixel:function(e){return t.round(e)+.5},defined:r,deg:function(t){return t/s},isNumber:function(t){return"number"==typeof t&&!isNaN(t)},limitValue:function(e,i,n){return t.max(t.min(e,n),i)},round:function(e,i){var n=t.pow(10,i||0);return t.round(e*n)/n},rad:function(t){return t*s},renderAttr:o,renderAllAttr:function(t){for(var e="",i=0;i<t.length;i++)e+=o(t[i][0],t[i][1]);return e},renderPos:function(t){var i=[];if(t)for(var n=e.toHyphens(t).split("-"),s=0;s<n.length;s++)i.push("k-pos-"+n[s]);return i.join(" ")},renderSize:function(t){return"string"!=typeof t&&(t+="px"),t},sqr:function(t){return t*t},valueOrDefault:function(t,e){return r(t)?t:e}}})}(window.kendo.jQuery),function(){var t=Math,e=window.kendo,i=e.Class,n=e.deepExtend,s=e.dataviz,r=s.util,o=r.defined,a=r.rad,h=r.round,l=i.extend({init:function(t,e){this.x=t||0,this.y=e||0,this.observer=null},geometryChange:r.mixins.geometryChange,set:function(t,e){return"x"===t?this.x!==e&&(this.x=e,this.geometryChange()):"y"===t&&this.y!==e&&(this.y=e,this.geometryChange()),this},get:function(t){return"x"===t?this.x:"y"===t?this.y:void 0},equals:function(t){return t&&t.x===this.x&&t.y===this.y},clone:function(){return new l(this.x,this.y)},rotate:function(e,i){var n=a(i),s=t.cos(n),r=t.sin(n),o=e.x,h=e.y,l=this.x,c=this.y;return this.x=o+(l-o)*s+(c-h)*r,this.y=h+(c-h)*s-(l-o)*r,this.geometryChange(),this},multiply:function(t){return this.x*=t,this.y*=t,this.geometryChange(),this},transform:function(t){return this.x=t.a*this.x+t.c*this.y+t.e,this.y=t.b*this.x+t.d*this.y+t.f,this.geometryChange(),this},add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.x-=t.x,this.y-=t.y,this},distanceTo:function(e){var i=this.x-e.x,n=this.y-e.y;return t.sqrt(i*i+n*n)},round:function(t){return this.x=h(this.x,t),this.y=h(this.y,t),this}});l.fn.toString=function(t,e){var i=this.x,n=this.y;return o(t)&&(i=h(i,t),n=h(n,t)),i+(e=e||" ")+n},l.create=function(t,e){if(o(t))return t instanceof l?t.clone():1===arguments.length&&2===t.length?new l(t[0],t[1]):new l(t,e)};var c=i.extend({init:function(t,e){this.p0=t||new l,this.p1=e||new l,this.observer=null,this.p0.observer=this,this.p1.observer=this},geometryChange:r.mixins.geometryChange,width:function(){return this.p1.x-this.p0.x},height:function(){return this.p1.y-this.p0.y}}),d=i.extend({init:function(t,e){this.center=t||new l,this.radius=e||0,this.observer=null,this.center.observer=this},geometryChange:r.mixins.geometryChange,equals:function(t){return t&&t.center.equals(this.center)&&t.radius===this.radius},clone:function(){return new d(this.center.clone(),this.radius)},set:function(t,e){"radius"===t&&this.radius!==e&&(this.radius=e,this.geometryChange())},get:function(){return this.radius},pointAt:function(e){var i=this.center,n=this.radius,s=a(e);return new l(i.x-n*t.cos(s),i.y-n*t.sin(s))}}),u=i.extend({init:function(t,e,i,n,s,r){this.a=t||0,this.b=e||0,this.c=i||0,this.d=n||0,this.e=s||0,this.f=r||0},times:function(t){return new u(this.a*t.a+this.c*t.b,this.b*t.a+this.d*t.b,this.a*t.c+this.c*t.d,this.b*t.c+this.d*t.d,this.a*t.e+this.c*t.f+this.e,this.b*t.e+this.d*t.f+this.f)}});n(u,{translate:function(t,e){var i=new u;return i.a=1,i.b=0,i.c=0,i.d=1,i.e=t,i.f=e,i},unit:function(){return new u(1,0,0,1,0,0)},rotate:function(e,i,n){var s=new u;return s.a=t.cos(a(e)),s.b=t.sin(a(e)),s.c=-s.b,s.d=s.a,s.e=i-i*s.a+n*s.b||0,s.f=n-n*s.a-i*s.b||0,s},scale:function(t,e){var i=new u;return i.a=t,i.b=0,i.c=0,i.d=e,i.e=0,i.f=0,i}}),n(s,{geometry:{Circle:d,Matrix:u,Point:l,Rect:c}})}(window.kendo.jQuery),function(t){var e=document,i=t.noop,n=Object.prototype.toString,s=window.kendo,r=s.Class,o=s.deepExtend,a=s.dataviz,h=s.Observable.extend({clear:i,destroy:function(){this.clear(),t(this.element).kendoDestroy()},resize:function(t){var e=this.getSize(),i=this._size;!t&&i&&e.width===i.width&&e.height===i.height||(this._size=e,this._resize(e))},getSize:function(){return{width:t(this.element).width(),height:t(this.element).height()}},setSize:function(e){t(this.element).css({width:e.width,height:e.height}),this.resize()},_resize:i,_handler:function(t){var e=this;return function(i){var n=i.target._kendoNode;n&&e.trigger(t,{shape:n.srcElement,originalEvent:i})}}});h.create=function(t,e,i){return d.current.create(t,e,i)};var l=r.extend({init:function(t){this.childNodes=[],this.parent=null,t&&(this.srcElement=t,t.observer=this)},load:i,append:function(t){this.childNodes.push(t),t.parent=this},remove:function(t,e){for(var i=t;i<e;i++)this.childNodes[i].clear();this.childNodes.splice(t,e),this.parent=null},clear:function(){this.remove(0,this.childNodes.length)},invalidate:function(){this.parent&&this.parent.invalidate()},geometryChange:function(){this.invalidate()},optionsChange:function(){this.invalidate()},childrenChange:function(t){"add"===t.action?this.load(t.items):"remove"===t.action&&this.remove(t.index,t.items.length),this.invalidate()}}),c=r.extend({init:function(t,e){var i,n;for(i in this.observer=null,this.prefix=e||"",t)n=t[i],n=this.wrap(n,i),this[i]=n},optionsChange:function(t){this.observer&&this.observer.optionsChange(t)},get:function(t){return s.getter(t,!0)(this)},set:function(t,e){if(s.getter(t,!0)(this)!==e){var i=this._set(t,this.wrap(e,t));this.observer&&!i&&this.observer.optionsChange({field:this.prefix+t,value:e})}},_set:function(t,e){var i=t.indexOf(".")>=0;if(i)for(var n,r=t.split("."),o="";r.length>1;){if(o+=r.shift(),(n=s.getter(o,!0)(this))||((n=new c({},o+".")).observer=this,this[o]=n),n instanceof c)return n.set(r.join("."),e),i;o+="."}return s.setter(t)(this,e),i},wrap:function(t,e){var i=n.call(t);return null!==t&&"[object Object]"===i&&(t instanceof c||(t=new c(t,this.prefix+e+".")),t.observer=this),t}}),d=function(){this._views=[]};d.prototype={register:function(t,e,i){var n=this._views,s=n[0],r={name:t,type:e,order:i};!s||i<s.order?n.unshift(r):n.push(r)},create:function(t,e,i){var n=this._views,r=n[0];if(i){i=i.toLowerCase();for(var o=0;o<n.length;o++)if(n[o].name===i){r=n[o];break}}if(r)return new r.type(t,e);s.logToConsole("Warning: KendoUI DataViz cannot render. Possible causes:\n- The browser does not support SVG, VML and Canvas. User agent: "+navigator.userAgent+"\n- The kendo.dataviz.(svg|vml|canvas).js scripts are not loaded")}},d.current=new d,s.support.svg=e.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1"),s.support.canvas=!!e.createElement("canvas").getContext,o(a,{drawing:{BaseNode:l,OptionsStore:c,Surface:h,SurfaceFactory:d}})}(window.kendo.jQuery),function(){var t=window.kendo,e=t.Class,i=t.deepExtend,n=t.dataviz,s=n.append,r=n.geometry,o=r.Point,a=n.drawing,h=a.OptionsStore,l=n.util,c=l.defined,d=e.extend({init:function(t){this.observer=null,this.options=new h(t||{}),this.options.observer=this},optionsChange:function(t){this.observer&&this.observer.optionsChange(t)},visible:function(t){return this.options.set("visible",t),this}}),u=d.extend({init:function(t){this.children=[],d.fn.init.call(this,t)},childrenChange:function(t,e,i){this.observer&&this.observer.childrenChange({action:t,items:e,index:i})},traverse:function(t){for(var e=this.children,i=0;i<e.length;i++){var n=e[i];t(n),n.traverse&&n.traverse(t)}},append:function(){s(this.children,arguments),this.childrenChange("add",arguments)},clear:function(){var t=this.children;this.children=[],this.childrenChange("remove",t,0)}}),p=d.extend({geometryChange:l.mixins.geometryChange,fill:function(t,e){return this.options.set("fill.color",t),c(e)&&this.options.set("fill.opacity",e),this},stroke:function(t,e,i){return this.options.set("stroke.color",t),c(e)&&this.options.set("stroke.width",e),c(i)&&this.options.set("stroke.opacity",i),this}}),f=p.extend({init:function(t,e){this.content=t,p.fn.init.call(this,e)}}),g=p.extend({init:function(t,e){p.fn.init.call(this,e),this.geometry=t||new r.Circle,this.geometry.observer=this}}),m=e.extend({init:function(t,e,i){this.anchor=t||new o,this.anchor.observer=this,this.observer=null,e&&(this.controlIn=e,this.controlIn.observer=this),i&&(this.controlOut=i,this.controlOut.observer=this)},geometryChange:l.mixins.geometryChange}),v=p.extend({init:function(t){this.segments=[],this.observer=null,p.fn.init.call(this,t)},moveTo:function(t,e){return this.segments=[],this.lineTo(t,e),this},lineTo:function(t,e){var i=c(e)?new o(t,e):t,n=new m(i);return n.observer=this,this.segments.push(n),this.geometryChange(),this},close:function(){return this.options.closed=!0,this.geometryChange(),this}}),y=p.extend({init:function(t){this.paths=[],p.fn.init.call(this,t)},moveTo:function(t,e){var i=new v;return i.observer=this,this.paths.push(i),i.moveTo(t,e),this},lineTo:function(t,e){return this.paths.length>0&&n.last(this.paths).lineTo(t,e),this},close:function(){return this.paths.length>0&&n.last(this.paths).close(),this}});i(a,{Group:u,Shape:p,Circle:g,Path:v,MultiPath:y,Segment:m,Text:f})}(window.kendo.jQuery),function(t){var e,i,n=document,s=window.kendo,r=s.deepExtend,o=s.dataviz,a=o.defined,h=o.renderTemplate,l=o.drawing,c=l.BaseNode,d=o.util,u=d.renderAttr,p=d.renderAllAttr,f=d.renderSize,g=o.DASH_ARRAYS,m="http://www.w3.org/2000/svg",v=l.Surface.extend({init:function(t,e){l.Surface.fn.init.call(this),this.options=r({},this.options,e),this.bind(this.events,this.options),this._root=new b,this._click=this._handler("click"),this._mouseenter=this._handler("mouseenter"),this._mouseleave=this._handler("mouseleave"),this._appendTo(t)},options:{width:"100%",height:"100%"},events:["click","mouseenter","mouseleave"],translate:function(t){var e=s.format("{0} {1} {2} {3}",t.x,t.y,this._size.width,this._size.height);this._offset=t,this.element.setAttribute("viewBox",e)},draw:function(t){this._root.load([t])},clear:function(){this._root.clear()},svg:function(){return this._template(this)},setSize:function(t){this.element.setAttribute("width",f(t.width)),this.element.setAttribute("height",f(t.height)),this.resize()},_resize:function(){this._offset&&this.translate(this._offset)},_template:h("<?xml version='1.0' ?><svg xmlns='"+m+"' version='1.1' width='#= kendo.dataviz.util.renderSize(d.options.width) #' height='#= kendo.dataviz.util.renderSize(d.options.height) #' style='position: absolute;'>#= d._root.render() #</svg>"),_appendTo:function(e){C(e,this._template(this)),this.element=e.firstElementChild,function(t){var e;try{e=t.getScreenCTM?t.getScreenCTM():null}catch(t){}if(e){var i=-e.e%1,n=-e.f%1,s=t.style;0===i&&0===n||(s.left=i+"px",s.top=n+"px")}}(this.element),this._root.attachTo(this.element);var i=t(this.element);i.on("click",this._click),i.on("mouseover",this._mouseenter),i.on("mouseout",this._mouseleave),this.resize()}}),y=c.extend({load:function(t){var e,i,n,s,r=this.element;for(s=0;s<t.length;s++)n=(i=t[s]).children,i instanceof l.Group?e=new w(i):i instanceof l.Path?e=new x(i):i instanceof l.MultiPath?e=new _(i):i instanceof l.Circle&&(e=new k(i)),n&&n.length>0&&e.load(n),this.append(e),r&&e.attachTo(r)},attachTo:function(t){var e=n.createElement("div");C(e,"<svg xmlns='"+m+"' version='1.1'>"+this.render()+"</svg>");var i=e.firstChild.firstChild;i&&(t.appendChild(i),this.setElement(i))},setElement:function(t){var e,i,n=this.childNodes;for(this.element&&(this.element._kendoNode=null),this.element=t,t._kendoNode=this,i=0;i<n.length;i++)e=t.childNodes[i],n[i].setElement(e)},template:h("#= d.renderChildren() #"),render:function(){return this.template(this)},renderChildren:function(){var t,e=this.childNodes,i="";for(t=0;t<e.length;t++)i+=e[t].render();return i},clear:function(){var t=this.element;t&&(t.parentNode.removeChild(t),this.element=null),c.fn.clear.call(this)}}),b=y.extend({attachTo:function(t){this.element=t},clear:c.fn.clear}),w=y.extend({template:h("<g>#= d.renderChildren() #</g>")}),x=y.extend({geometryChange:function(){this.attr("d",this.renderData()),this.invalidate()},optionsChange:function(t){switch(t.field){case"fill":this.allAttr(this.mapFill(t.value));break;case"fill.color":this.allAttr(this.mapFill({color:t.value}));break;case"stroke":this.allAttr(this.mapStroke(t.value));break;case"visible":this.attr("visibility",t.value?"visible":"hidden");break;default:var e=this.attributeMap[t.field];e&&this.attr(e,t.value)}this.invalidate()},attributeMap:{"fill.opacity":"fill-opacity","stroke.color":"stroke","stroke.width":"stroke-width","stroke.opacity":"stroke-opacity"},attr:function(t,e){this.element&&this.element.setAttribute(t,e)},allAttr:function(t){for(var e=0;e<t.length;e++)this.attr(t[e][0],t[e][1])},renderData:function(){return this.printPath(this.srcElement)},printPath:function(t){var e=t.segments;if(e.length>0){var i,n,s=[];for(n=0;n<e.length;n++)s.push(e[n].anchor.toString(1));return i="M"+s.join(" "),t.options.closed&&(i+="Z"),i}},mapStroke:function(t){var e=[];return t&&(e.push(["stroke",t.color]),e.push(["stroke-width",t.width]),e.push(["stroke-linecap",this.renderLinecap(t)]),a(t.opacity)&&e.push(["stroke-opacity",t.opacity]),a(t.dashType)&&e.push(["stroke-dasharray",this.renderDashType(t)])),e},renderStroke:function(){return p(this.mapStroke(this.srcElement.options.stroke))},renderDashType:function(t){var e=t.width||1,i=t.dashType;if(i&&"solid"!=i){var n,s=g[i.toLowerCase()],r=[];for(n=0;n<s.length;n++)r.push(s[n]*e);return r.join(" ")}},renderLinecap:function(t){var e=t.dashType,i=t.lineCap||"square";return e&&"solid"!=e?"butt":i},mapFill:function(t){var e=[];return t&&"transparent"!==t.color?(e.push(["fill",t.color]),a(t.opacity)&&e.push(["fill-opacity",t.opacity])):e.push(["fill","none"]),e},renderFill:function(){return p(this.mapFill(this.srcElement.options.fill))},renderCursor:function(){var t=this.srcElement.options.cursor;if(t)return"cursor:"+t+";"},renderVisibility:function(){return!1===this.srcElement.options.visible?u("visibility","hidden"):""},template:h("<path #= kendo.dataviz.util.renderAttr('style', d.renderCursor()) # #= d.renderVisibility() # #= kendo.dataviz.util.renderAttr('d', d.renderData()) # #= d.renderStroke() # #= d.renderFill() # stroke-linejoin='round'></path>")}),_=x.extend({renderData:function(){var t=this.srcElement.paths;if(t.length>0){var e,i=[];for(e=0;e<t.length;e++)i.push(this.printPath(t[e]));return i.join(" ")}}}),k=x.extend({geometryChange:function(){var t=this.srcElement.geometry;this.attr("cx",t.center.x),this.attr("cy",t.center.y),this.attr("r",t.radius),this.invalidate()},template:h("<circle #= kendo.dataviz.util.renderAttr('style', d.renderCursor()) # cx='#= this.srcElement.geometry.center.x #' cy='#= this.srcElement.geometry.center.y #' r='#= this.srcElement.geometry.radius #' #= d.renderVisibility() # #= d.renderStroke() # #= d.renderFill() #></circle>")}),C=function(t,e){t.innerHTML=e};e=n.createElement("div"),i="undefined"!=("undefined"==typeof DOMParser?"undefined":_typeof(DOMParser)),e.innerHTML="<svg xmlns='http://www.w3.org/2000/svg'></svg>",i&&e.firstChild.namespaceURI!=m&&(C=function(t,e){var i=(new DOMParser).parseFromString(e,"text/xml"),s=n.adoptNode(i.documentElement);t.innerHTML="",t.appendChild(s)}),s.support.svg&&l.SurfaceFactory.current.register("svg",v,10),r(l,{svg:{CircleNode:k,GroupNode:w,MultiPathNode:_,Node:y,PathNode:x,RootNode:b,Surface:v}})}(window.kendo.jQuery),function(t){var e=document,i=window.kendo,n=i.deepExtend,s=i.dataviz,r=s.defined,o=s.renderTemplate,a=s.drawing,h=a.BaseNode,l=s.util.renderAllAttr,c=a.Surface.extend({init:function(t,e){a.Surface.fn.init.call(this),this.options=n({},this.options,e),this.bind(this.events,this.options),this._root=new u,this._click=this._handler("click"),this._mouseenter=this._handler("mouseenter"),this._mouseleave=this._handler("mouseleave"),this._appendTo(t)},events:["click","mouseenter","mouseleave"],draw:function(t){var e=this;e._root.load([t]),i.support.browser.version<8&&setTimeout((function(){e.element.style.display="block"}),0)},clear:function(){this._root.clear(),i.support.browser.version<8&&(this.element.style.display="none")},_template:o("<div style='width:#= kendo.dataviz.util.renderSize(d.options.width) #; height:#= kendo.dataviz.util.renderSize(d.options.height) #; position: absolute;'><#= d._root.render() #/div>"),_appendTo:function(i){e.namespaces&&e.namespaces.add("kvml","urn:schemas-microsoft-com:vml","#default#VML"),i.innerHTML=this._template(this),this.element=i.firstChild,this._root.attachTo(this.element);var n=t(this.element);n.on("click",this._click),n.on("mouseover",this._mouseenter),n.on("mouseout",this._mouseleave)}}),d=h.extend({load:function(t){var e,i,n,s,r=this.element;for(s=0;s<t.length;s++)n=(i=t[s]).children,i instanceof a.Group?e=new p(i):i instanceof a.Path?e=new m(i):i instanceof a.MultiPath?e=new v(i):i instanceof a.Circle&&(e=new y(i)),n&&n.length>0&&e.load(n),this.append(e),r&&e.attachTo(r)},attachTo:function(t){var i=e.createElement("div");i.style.display="none",e.body.appendChild(i),i.innerHTML=this.render();var n=i.firstChild;n&&(t.appendChild(n),this.setElement(n)),e.body.removeChild(i)},setElement:function(t){var e,i,n=this.childNodes;for(this.element&&(this.element._kendoNode=null),this.element=t,t._kendoNode=this,i=0;i<n.length;i++)e=t.childNodes[i],n[i].setElement(e)},template:o("#= d.renderChildren() #"),render:function(){return this.template(this)},renderChildren:function(){var t,e=this.childNodes,i="";for(t=0;t<e.length;t++)i+=e[t].render();return i},clear:function(){var t=this.element;t&&(t.parentNode.removeChild(t),this.element=null),h.fn.clear.call(this)},attr:function(t,e){this.element&&(this.element[t]=e)},allAttr:function(t){for(var e=0;e<t.length;e++)this.attr(t[e][0],t[e][1])},css:function(t,e){this.element&&(this.element.style[t]=e)}}),u=d.extend({attachTo:function(t){this.element=t},clear:h.fn.clear}),p=d.extend({template:o("<div>#= d.renderChildren() #</div>")}),f=d.extend({optionsChange:function(t){if("stroke"===t.field)this.allAttr(this.mapStroke(t.value));else{var e=this.attributeMap[t.field];e&&this.attr(e,t.value)}this.invalidate()},attributeMap:{"stroke.color":"color","stroke.width":"weight","stroke.opacity":"opacity","stroke.dashType":"dashstyle"},mapStroke:function(t){var e=[];return t?(e.push(["on","true"]),e.push(["color",t.color]),e.push(["weight",t.width+"px"]),r(t.opacity)&&e.push(["opacity",t.opacity]),r(t.dashType)&&e.push(["dashstyle",t.dashType])):e.push(["on","false"]),e},renderStroke:function(){return l(this.mapStroke(this.srcElement.options.stroke))},template:o("<kvml:stroke #= d.renderStroke() #></kvml:stroke>")}),g=d.extend({optionsChange:function(t){switch(t.field){case"fill":this.allAttr(this.mapFill(t.value));break;case"fill.color":this.allAttr(this.mapFill({color:t.value}));break;default:var e=this.attributeMap[t.field];e&&this.attr(e,t.value)}this.invalidate()},attributeMap:{"fill.opacity":"opacity"},mapFill:function(t){var e=[];return t&&"transparent"!==t.color?(e.push(["on","true"]),e.push(["color",t.color]),r(t.opacity)&&e.push(["opacity",t.opacity])):e.push(["on","false"]),e},renderFill:function(){return l(this.mapFill(this.srcElement.options.fill))},template:o("<kvml:fill #= d.renderFill() #></kvml:fill>")}),m=d.extend({init:function(t){this.fill=new g(t),this.stroke=new f(t),d.fn.init.call(this,t),this.append(this.fill),this.append(this.stroke)},geometryChange:function(){this.attr("v",this.renderData()),this.invalidate()},optionsChange:function(t){"visible"===t.field?this.css("display",t.value?"block":"none"):0===t.field.indexOf("fill")?this.fill.optionsChange(t):0===t.field.indexOf("stroke")&&this.stroke.optionsChange(t),this.invalidate()},renderData:function(){return this.printPath(this.srcElement)},printPath:function(t,e){var i=t.segments;if(i.length>0){var n,s,r=[];for(s=0;s<i.length;s++)r.push(i[s].anchor.toString(0,","));return n="m "+r.shift()+" l "+r.join(" "),t.options.closed&&(n+=" x"),!0!==e&&(n+=" e"),n}},mapFill:function(t){var e=[];return t&&"transparent"!==t.color?(e.push(["fill",t.color]),r(t.opacity)&&e.push(["fill-opacity",t.opacity])):e.push(["fill","none"]),e},renderCursor:function(){var t=this.srcElement.options.cursor;return t?"cursor:"+t+";":""},renderVisibility:function(){return!1===this.srcElement.options.visible?"display:none;":""},renderCoordsize:function(){var t=!1===this.srcElement.options.align?1e4:1;return"coordsize='"+t+" "+t+"'"},renderSize:function(){var t=!1===this.srcElement.options.align?100:1;return"width:"+t+"px;height:"+t+"px;"},template:o("<kvml:shape style='position:absolute;#= d.renderSize() # #= d.renderVisibility() # #= d.renderCursor() #' coordorigin='0 0' #= d.renderCoordsize() #>#= d.renderChildren() #<kvml:path #= kendo.dataviz.util.renderAttr('v', d.renderData()) # /></kvml:shape>")}),v=m.extend({renderData:function(){var t=this.srcElement.paths;if(t.length>0){var e,i,n=[];for(e=0;e<t.length;e++)i=e<t.length-1,n.push(this.printPath(t[e],i));return n.join(" ")}}}),y=m.extend({geometryChange:function(){var t=this.radius(),e=this.center(),i=2*t;this.css("left",e.x-t+"px"),this.css("top",e.y-t+"px"),this.css("width",i+"px"),this.css("height",i+"px"),this.invalidate()},center:function(){return this.srcElement.geometry.center},radius:function(){return this.srcElement.geometry.radius},template:o("<kvml:oval style='position:absolute;#= d.renderVisibility() ##= d.renderCursor() #width:#= d.radius() * 2 #px;height:#= d.radius() * 2 #px;top:#= d.center().y - d.radius() #px;left:#= d.center().x - d.radius() #px;'>#= d.renderChildren() #</kvml:oval>")});i.support.browser.msie&&a.SurfaceFactory.current.register("vml",c,20),n(a,{vml:{CircleNode:y,FillNode:g,GroupNode:p,MultiPathNode:v,Node:d,PathNode:m,RootNode:u,StrokeNode:f,Surface:c}})}(window.kendo.jQuery),function(t,e){var i=Math,n=i.abs,s=i.atan,r=i.atan2,o=i.cos,a=i.max,h=i.min,l=i.sin,c=i.tan,d=window.kendo,u=d.Class,p=d.dataviz,f=d.deepExtend,g=p.util,m=g.defined,v=g.rad,y=g.round,b=g.sqr,w=g.valueOrDefault,x=u.extend({init:function(t,e){1===arguments.length?(this.lat=t[0],this.lng=t[1]):(this.lat=t,this.lng=e)},DISTANCE_ITERATIONS:100,DISTANCE_CONVERGENCE:1e-12,DISTANCE_PRECISION:2,FORMAT:"{0:N6},{1:N6}",toArray:function(){return[this.lat,this.lng]},equals:function(t){return t&&t.lat===this.lat&&t.lng===this.lng},clone:function(){return new x(this.lat,this.lng)},round:function(t){return this.lng=y(this.lng,t),this.lat=y(this.lat,t),this},wrap:function(){return this.lng=this.lng%180,this.lat=this.lat%90,this},distanceTo:function(t,e){return this.greatCircleTo(t,e).distance},greatCircleTo:function(t,e){if(t=x.create(t),e=e||p.map.datums.WGS84,!t||this.clone().round(8).equals(t.clone().round(8)))return{distance:0,azimuthFrom:0,azimuthTo:0};for(var a,h,d,u,f,m,w,_,k=e.a,C=e.b,S=e.f,T=v(t.lng-this.lng),P=s((1-S)*c(v(this.lat))),A=l(P),z=o(P),D=s((1-S)*c(v(t.lat))),E=l(D),M=o(D),L=T,I=this.DISTANCE_ITERATIONS,B=!1;!B&&I-- >0;){h=l(L),d=o(L),u=i.sqrt(b(M*h)+b(z*E-A*M*d)),_=r(u,m=A*E+z*M*d);var R=z*M*h/u;w=0,0!==(f=1-b(R))&&(w=m-2*A*E/f),a=L;var O=S/16*f*(4+S*(4-3*f));L=T+(1-O)*S*R*(_+O*u*(w+O*m*(2*b(w)-1))),B=n(L-a)<=this.DISTANCE_CONVERGENCE}var N=f*(b(k)-b(C))/b(C),V=1+N/16384*(4096+N*(N*(320-175*N)-768)),F=N/1024*(256+N*(N*(74-47*N)-128)),H=F*u*(w+F/4*(m*(2*b(w)-1)-F/6*w*(4*b(u)-3)*(4*b(w)-3))),U=r(M*h,z*E-A*M*d),$=r(z*h,-A*M+z*E*d);return{distance:y(C*V*(_-H),this.DISTANCE_PRECISION),azimuthFrom:g.deg(U),azimuthTo:g.deg($)}}});x.fn.toString=function(){return d.format(this.FORMAT,this.lng,this.lat)},x.fromLngLat=function(t){return new x(t[1],t[0])},x.fromLatLng=function(t){return new x(t[0],t[1])},x.create=function(t,e){if(m(t))return t instanceof x?t.clone():1===arguments.length&&2===t.length?x.fromLatLng(t):new x(t,e)};var _=u.extend({init:function(t,e){t=x.create(t),e=x.create(e),t.lng+180>e.lng+180&&t.lat+90<e.lat+90?(this.se=t,this.nw=e):(this.se=e,this.nw=t)},contains:function(t){var e=this.nw,i=this.se,n=w(t.lng,t[1]),s=w(t.lat,t[0]);return t&&n+180>=e.lng+180&&n+180<=i.lng+180&&s+90>=i.lat+90&&s+90<=e.lat+90},center:function(){var t=this.nw,e=this.se,i=t.lng+(e.lng-t.lng)/2,n=t.lat+(e.lat-t.lat)/2;return new x(n,i)},containsAny:function(t){for(var e=!1,i=0;i<t.length;i++)e=e||this.contains(t[i]);return e},include:function(t){var e=this.nw,i=this.se,n=w(t.lng,t[1]),s=w(t.lat,t[0]);e.lng=h(e.lng,n),e.lat=a(e.lat,s),i.lng=a(i.lng,n),i.lat=h(i.lat,s)},includeAll:function(t){for(var e=0;e<t.length;e++)this.include(t[e])},edges:function(){var t=this.nw,e=this.se;return{nw:this.nw,ne:new x(t.lat,e.lng),se:this.se,sw:new x(t.lng,e.lat)}},toArray:function(){var t=this.nw,e=this.se;return[t,new x(t.lat,e.lng),e,new x(t.lng,e.lat)]},overlaps:function(t){return this.containsAny(t.toArray())||t.containsAny(this.toArray())}});_.World=new _([90,-180],[-90,180]),_.create=function(t,e){return t instanceof _?t:t&&e?new _(t,e):t&&4===t.length&&!e?new _([t[0],t[1]],[t[2],t[3]]):void 0},f(p,{map:{Extent:_,Location:x}})}(window.kendo.jQuery),function(){var t=window.kendo,e=t.ui.Widget,i=t.template,n=t.dataviz.util.valueOrDefault,s=e.extend({init:function(t,i){e.fn.init.call(this,t,i),this._initOptions(i),this.items=[],this.element.addClass("k-widget k-attribution")},options:{name:"Attribution",separator:"&nbsp;|&nbsp;",itemTemplate:"#= text #"},filter:function(t,e){this._extent=t,this._zoom=e,this._render()},add:function(t){t&&("string"==typeof t&&(t={text:t}),this.items.push(t),this._render())},remove:function(t){for(var e=[],i=0;i<this.items.length;i++){var n=this.items[i];n.text!==t&&e.push(n)}this.items=e,this._render()},clear:function(){this.items=[],this.element.empty()},_render:function(){var t=[];this.element.empty();for(var e=i(this.options.itemTemplate),n=0;n<this.items.length;n++){var s=this.items[n],r=this._itemText(s);""!==r&&t.push(e({text:r}))}this.element.append(t.join(this.options.separator))},_itemText:function(t){var e="",i=this._inZoomLevel(t.minZoom,t.maxZoom),n=this._inArea(t.extent);return i&&n&&(e+=t.text),e},_inZoomLevel:function(t,e){return t=n(t,-Number.MAX_VALUE),e=n(e,Number.MAX_VALUE),this._zoom>t&&this._zoom<e},_inArea:function(t){var e=!0;return t&&(e=t.contains(this._extent)),e}});t.dataviz.ui.plugin(s)}(jQuery),function(t){var e=window.kendo,i=e.ui.Widget,n=e.keys,s=t.proxy,r=a("n")+a("e")+a("s")+a("w"),o=i.extend({init:function(t,n){i.fn.init.call(this,t,n),this._initOptions(n),this.element.addClass("k-widget k-header k-shadow k-navigator").append(r).on("click.kendoNavigator",".k-button",s(this,"_click"));var o=this.element.parent().closest("["+e.attr("role")+"]");this._keyroot=o.length>0?o:this.element,this._tabindex(this._keyroot),this._keydown=s(this._keydown,this),this._keyroot.on("keydown",this._keydown)},options:{name:"Navigator",panStep:1},events:["pan"],dispose:function(){this._keyroot.off("keydown",this._keydown)},_pan:function(t,e){var i=this.options.panStep;this.trigger("pan",{x:t*i,y:e*i})},_click:function(e){var i=0,n=0,s=t(e.currentTarget);s.is(".k-navigator-n")?n=1:s.is(".k-navigator-s")?n=-1:s.is(".k-navigator-e")?i=1:s.is(".k-navigator-w")&&(i=-1),this._pan(i,n)},_keydown:function(t){switch(t.which){case n.UP:this._pan(0,1),t.preventDefault();break;case n.DOWN:this._pan(0,-1),t.preventDefault();break;case n.RIGHT:this._pan(1,0),t.preventDefault();break;case n.LEFT:this._pan(-1,0),t.preventDefault()}}});function a(t){return e.format('<button class="k-button k-navigator-{0}"><span class="k-icon k-i-arrow-{0}"/></button>',t)}e.dataviz.ui.plugin(o)}(jQuery),function(t){var e=window.kendo,i=e.ui.Widget,n=e.keys,s=t.proxy,r=a("in","+")+a("out","-"),o=i.extend({init:function(t,n){i.fn.init.call(this,t,n),this._initOptions(n),this.element.addClass("k-widget k-zoom-control k-button-wrap k-buttons-horizontal").append(r).on("click.kendoZoomControl",".k-button",s(this,"_click"));var o=this.element.parent().closest("["+e.attr("role")+"]");this._keyroot=o.length>0?o:this.element,this._tabindex(this._keyroot),this._keydown=s(this._keydown,this),this._keyroot.on("keydown",this._keydown)},options:{name:"ZoomControl",zoomStep:1},events:["change"],_change:function(t){var e=this.options.zoomStep;this.trigger("change",{delta:t*e})},_click:function(e){var i=1;t(e.currentTarget).is(".k-zoom-out")&&(i=-1),this._change(i)},_keydown:function(t){switch(t.which){case n.NUMPAD_PLUS:case 187:case 61:this._change(1);break;case n.NUMPAD_MINUS:case 189:case 173:this._change(-1)}}});function a(t,i){return e.format('<button class="k-button k-zoom-{0}" title="zoom-{0}">{1}</button>',t,i)}e.dataviz.ui.plugin(o)}(jQuery),function(t,e){var i=Math,n=i.atan,s=i.exp,r=i.pow,o=i.sin,a=i.log,h=i.tan,l=window.kendo,c=l.Class,d=l.dataviz,u=d.Matrix,p=l.deepExtend,f=d.geometry.Point,g=d.map.Location,m=d.util,v=m.rad,y=m.deg,b=m.limitValue,w=i.PI,x=w/2,_=w/4,k=w/180,C={a:6378137,b:6356752.314245179,f:.0033528106647474805,e:.08181919084262149},S=c.extend({init:function(t){this._initOptions(t)},MAX_LNG:180,MAX_LAT:85.0840590501,INVERSE_ITERATIONS:15,INVERSE_CONVERGENCE:1e-12,options:{centralMeridian:0,datum:C},forward:function(t,e){var i=this.options,n=i.datum.a,s=i.centralMeridian,r=b(t.lat,-this.MAX_LAT,this.MAX_LAT),o=e?b(t.lng,-this.MAX_LNG,this.MAX_LNG):t.lng,a=v(o-s)*n,h=this._projectLat(r);return new f(a,h)},_projectLat:function(t){var e=this.options.datum,i=e.e,n=e.a,s=v(t),l=h(_+s/2),c=i*o(s),d=r((1-c)/(1+c),i/2);return n*a(l*d)},inverse:function(t,e){var i=this.options,n=i.datum.a,s=i.centralMeridian,r=t.x/(k*n)+s,o=b(this._inverseY(t.y),-this.MAX_LAT,this.MAX_LAT);return e&&(r=b(r,-this.MAX_LNG,this.MAX_LNG)),new g(o,r)},_inverseY:function(t){var e,a=this.options.datum,h=a.a,l=a.e,c=l/2,d=s(-t/h),u=x-2*n(d);for(e=0;e<=this.INVERSE_ITERATIONS;e++){var p=l*o(u),f=r((1-p)/(1+p),c),g=x-2*n(d*f)-u;if(u+=g,i.abs(g)<=this.INVERSE_CONVERGENCE)break}return y(u)}}),T=S.extend({MAX_LAT:85.0511287798,_projectLat:function(t){var e=this.options.datum.a,i=v(t),n=h(_+i/2);return e*a(n)},_inverseY:function(t){var e=this.options.datum.a,i=s(-t/e);return y(x-2*n(i))}}),P=c.extend({forward:function(t){return new f(t.lng,t.lat)},inverse:function(t){return new g(t.y,t.x)}}),A=c.extend({init:function(){var t=this._proj=new T,e=this.c=2*w*t.options.datum.a;this._tm=u.translate(.5,.5).times(u.scale(1/e,-1/e)),this._itm=u.scale(e,-e).times(u.translate(-.5,-.5))},toPoint:function(t,e,i){return this._proj.forward(t,i).transform(this._tm).multiply(e||1)},toLocation:function(t,e,i){return t=t.clone().multiply(1/(e||1)).transform(this._itm),this._proj.inverse(t,i)}});p(d,{map:{crs:{EPSG3395:c.extend({init:function(){this._proj=new S},toPoint:function(t){return this._proj.forward(t)},toLocation:function(t){return this._proj.inverse(t)}}),EPSG3857:A,EPSG4326:c.extend({init:function(){this._proj=new P},toPoint:function(t){return this._proj.forward(t)},toLocation:function(t){return this._proj.inverse(t)}})},datums:{WGS84:C},projections:{Equirectangular:P,Mercator:S,SphericalMercator:T}}})}(window.kendo.jQuery),function(t,e){var i=t.proxy,n=(t.noop,window.kendo),s=n.Class,r=n.dataviz,o=n.deepExtend,a=r.defined,h=r.map.Extent;r.util.valueOrDefault;o(r,{map:{layers:{Layer:s.extend({init:function(e,n){this._initOptions(n),this.map=e,this.element=t("<div class='k-layer'></div>").css({zIndex:this.options.zIndex,opacity:this.options.opacity}).appendTo(e.scrollElement),this._beforeReset=i(this._beforeReset,this),this._reset=i(this.reset,this),this._resize=i(this._resize,this),this._panEnd=i(this._panEnd,this),this._activate(),this._updateAttribution()},destroy:function(){this._deactivate()},show:function(){this.reset(),this._activate(),this._applyExtent(!0)},hide:function(){this._deactivate(),this._setVisibility(!1)},reset:function(){this._applyExtent()},_beforeReset:t.noop,_resize:t.noop,_panEnd:function(){this._applyExtent()},_applyExtent:function(){var t=this.options,e=this.map.zoom(),i=!a(t.minZoom)||e>=t.minZoom,n=!a(t.maxZoom)||e<=t.maxZoom,s=h.create(t.extent),r=!s||s.overlaps(this.map.extent());this._setVisibility(i&&n&&r)},_setVisibility:function(t){this.element.css("display",t?"":"none")},_activate:function(){var t=this.map;t.bind("beforeReset",this._beforeReset),t.bind("reset",this._reset),t.bind("resize",this._resize),t.bind("panEnd",this._panEnd)},_deactivate:function(){var t=this.map;t.unbind("beforeReset",this._beforeReset),t.unbind("reset",this._reset),t.unbind("resize",this._resize),t.unbind("panEnd",this._panEnd)},_updateAttribution:function(){var t=this.map.attribution;t&&t.add(this.options.attribution)}})}}})}(window.kendo.jQuery),function(t,e){var i=window.kendo.jQuery.proxy,n=window.kendo,s=n.Class,r=n.data.DataSource,o=n.dataviz,a=n.deepExtend,h=o.last,l=o.util.defined,c=o.geometry,d=o.drawing,u=d.Group,p=o.map,f=p.Location,g=p.layers.Layer,m=g.extend({init:function(t,e){g.fn.init.call(this,t,e),this.surface=d.Surface.create(this.element[0],{width:t.scrollElement.width(),height:t.scrollElement.height()}),this.movable=new n.ui.Movable(this.surface.element),this._markers=[],this._click=this._handler("shapeClick"),this.surface.bind("click",this._click),this._mouseenter=this._handler("shapeMouseEnter"),this.surface.bind("mouseenter",this._mouseenter),this._mouseleave=this._handler("shapeMouseLeave"),this.surface.bind("mouseleave",this._mouseleave),this._loader=new v(this.map,this.options.style,this),this._initDataSource()},options:{autoBind:!0},destroy:function(){g.fn.destroy.call(this),this.surface.destroy(),this.dataSource.unbind("change",this._dataChange)},reset:function(){g.fn.reset.call(this),this._translateSurface(),this._data&&this._load(this._data)},_beforeReset:function(){this.surface.clear()},_resize:function(){this.surface.setSize(this.map.getSize())},_initDataSource:function(){var t=this.options.dataSource;this._dataChange=i(this._dataChange,this),this.dataSource=r.create(t).bind("change",this._dataChange),t&&this.options.autoBind&&this.dataSource.fetch()},_dataChange:function(t){this._load(t.items)},_load:function(t){this._data=t,this._clearMarkers();for(var e=0;e<t.length;e++){var i=this._loader.parse(t[e]);i&&this.surface.draw(i)}},shapeCreated:function(t){var e=!1;if(t instanceof d.Circle&&(e=l(this._createMarker(t))),!e){var i={layer:this,shape:t};e=this.map.trigger("shapeCreated",i)}return e},_createMarker:function(t){var e=this.map.markers.bind({location:t.location},t.dataItem);return e&&this._markers.push(e),e},_clearMarkers:function(){for(var t=0;t<this._markers.length;t++)this.map.markers.remove(this._markers[t]);this._markers=[]},_panEnd:function(t){g.fn._panEnd.call(this,t),this._translateSurface()},_translateSurface:function(){var t=this.map,e=t.locationToView(t.extent().nw);this.surface.translate&&(this.surface.translate(e),this.movable.moveTo(e))},_handler:function(t){var e=this;return function(i){if(i.shape){var n={layer:e,shape:i.shape,originalEvent:i.originalEvent};e.map.trigger(t,n)}}}}),v=s.extend({init:function(t,e,i){this.observer=i,this.locator=t,this.style=e},parse:function(t){var e=new u;return"Feature"===t.type?this._loadGeometryTo(e,t.geometry,t):this._loadGeometryTo(e,t,t),e.children.length<2&&(e=e.children[0]),e},_shapeCreated:function(t){var e=!1;return this.observer&&this.observer.shapeCreated&&(e=this.observer.shapeCreated(t)),e},_loadGeometryTo:function(t,e,i){var n,s,r=e.coordinates;switch(e.type){case"LineString":s=this._loadPolygon(t,[r],i),this._setLineFill(s);break;case"MultiLineString":for(n=0;n<r.length;n++)s=this._loadPolygon(t,[r[n]],i),this._setLineFill(s);break;case"Polygon":this._loadPolygon(t,r,i);break;case"MultiPolygon":for(n=0;n<r.length;n++)this._loadPolygon(t,r[n],i);break;case"Point":this._loadPoint(t,r,i);break;case"MultiPoint":for(n=0;n<r.length;n++)this._loadPoint(t,r[n],i)}},_setLineFill:function(t){var e=t.segments;(e.length<4||!e[0].anchor.equals(h(e).anchor))&&(t.options.fill=null)},_loadShape:function(t,e){return this._shapeCreated(e)||t.append(e),e},_loadPolygon:function(t,e,i){var n=this._buildPolygon(e);return n.dataItem=i,this._loadShape(t,n)},_buildPolygon:function(t){for(var e=new(t.length>1?d.MultiPath:d.Path)(this.style),i=0;i<t.length;i++)for(var n=0;n<t[i].length;n++){var s=this.locator.locationToView(f.fromLngLat(t[i][n]));0===n?e.moveTo(s.x,s.y):e.lineTo(s.x,s.y)}return e},_loadPoint:function(t,e,i){var n=f.fromLngLat(e),s=this.locator.locationToView(n),r=new c.Circle(s,10),o=new d.Circle(r,this.style);return o.dataItem=i,o.location=n,this._loadShape(t,o)}});a(n.data,{schemas:{geojson:{type:"json",data:function(t){return"FeatureCollection"===t.type?t.features:"GeometryCollection"===t.type?t.geometries:t}}},transports:{geojson:{read:{dataType:"json"}}}}),a(o,{map:{layers:{shape:m,ShapeLayer:m},GeoJSONLoader:v}})}(),function(t,e){var i=Math,n=t.proxy,s=window.kendo,r=s.Class,o=s.template,a=s.dataviz,h=a.round,l=s.deepExtend,c=a.geometry.Point,d=a.map.layers.Layer,u=a.util,p=u.renderSize,f=u.limitValue,g=d.extend({init:function(t,e){d.fn.init.call(this,t,e),"string"==typeof this.options.subdomains&&(this.options.subdomains=this.options.subdomains.split(""));var i=this._viewType();this._view=new i(this.element,this.options)},destroy:function(){d.fn.destroy.call(this),this._view.destroy(),this._view=null},reset:function(){d.fn.reset.call(this),this._updateView(),this._view.clear(),this._view.reset()},_viewType:function(){return m},_activate:function(){d.fn._activate.call(this),s.support.mobileOS||(this._pan||(this._pan=n(this._throttleRender,this)),this.map.bind("pan",this._pan))},_deactivate:function(){d.fn._deactivate.call(this),this._pan&&this.map.unbind("pan",this._pan)},_updateView:function(){var t=this._view,e=this.map,i=e.extent(),n={nw:e.locationToLayer(i.nw).round(),se:e.locationToLayer(i.se).round()};t.center(e.locationToLayer(e.center())),t.extent(n),t.zoom(e.zoom())},_resize:function(){this._render()},_throttleRender:function(){var t=new Date,e=this._renderTimestamp;(!e||t-e>100)&&(this._render(),this._renderTimestamp=t)},_panEnd:function(t){d.fn._panEnd.call(this,t),this._render()},_render:function(){this._updateView(),this._view.render()}}),m=r.extend({init:function(t,e){this.element=t,this._initOptions(e),this.pool=new y},options:{tileSize:256,subdomains:["a","b","c"],urlTemplate:""},center:function(t){this._center=t},extent:function(t){this._extent=t},zoom:function(t){this._zoom=t},pointToTileIndex:function(t){return new c(i.floor(t.x/this.options.tileSize),i.floor(t.y/this.options.tileSize))},clear:function(){this.pool.empty()},tileCount:function(){var t=this.size(),e=this.pointToTileIndex(this._extent.nw),n=this.indexToPoint(e).subtract(this._extent.nw);return{x:i.ceil((i.abs(n.x)+t.width)/this.options.tileSize),y:i.ceil((i.abs(n.y)+t.height)/this.options.tileSize)}},size:function(){var t=this._extent.nw,e=this._extent.se.clone().subtract(t);return{width:e.x,height:e.y}},indexToPoint:function(t){var e=t.x,i=t.y;return new c(e*this.options.tileSize,i*this.options.tileSize)},subdomainText:function(){var t=this.options.subdomains;return t[this.subdomainIndex++%t.length]},destroy:function(){this.element.empty(),this.pool.empty()},reset:function(){this.subdomainIndex=0,this.basePoint=this._extent.nw,this.render()},render:function(){var t,e,i,n=this.tileCount(),s=this.pointToTileIndex(this._extent.nw);for(e=0;e<n.x;e++)for(i=0;i<n.y;i++)(t=this.createTile({x:s.x+e,y:s.y+i})).options.visible||(this.element.append(t.element),t.options.visible=!0)},createTile:function(t){var e=this.tileOptions(t);return this.pool.get(this._center,e)},tileOptions:function(t){var e=this.wrapIndex(t),i=this.indexToPoint(t),n=i.clone().subtract(this.basePoint);return{index:e,currentIndex:t,point:i,offset:b(n),zoom:this._zoom,subdomain:this.subdomainText(),urlTemplate:this.options.urlTemplate,errorUrlTemplate:this.options.errorUrlTemplate}},wrapIndex:function(t){var e=i.pow(2,this._zoom);return{x:this.wrapValue(t.x,e),y:f(t.y,0,e-1)}},wrapValue:function(t,e){var n=i.abs(t)%e;return t=t>=0?n:e-(0===n?e:n)}}),v=r.extend({init:function(t){this._initOptions(t),this.createElement(),this.load(),this.options.visible=!1},options:{urlTemplate:"",errorUrlTemplate:"",visible:!1},createElement:function(){this.element=t("<img style='position: absolute; display: block; visibility: visible;' />").error(n((function(t){t.target.setAttribute("src",this.errorUrl())}),this))},load:function(t){this.options=l({},this.options,t);var e=this.element[0];e.style.visibility="visible",e.style.display="block",e.style.top=p(this.options.offset.y),e.style.left=p(this.options.offset.x),e.setAttribute("src",this.url()),this.options.id=w(this.options.currentIndex,this.options.zoom),this.options.visible=!0},url:function(){return o(this.options.urlTemplate)(this.urlOptions())},errorUrl:function(){return o(this.options.errorUrlTemplate)(this.urlOptions())},urlOptions:function(){var t=this.options;return{zoom:t.zoom,subdomain:t.subdomain,z:t.zoom,x:t.index.x,y:t.index.y,s:t.subdomain,quadkey:t.quadkey,q:t.quadkey,culture:t.culture,c:t.culture}},destroy:function(){this.element&&(this.element.remove(),this.element=null)}}),y=r.extend({init:function(){this._items=[]},options:{maxSize:100},get:function(t,e){return this._items.length>=this.options.maxSize?this._update(t,e):this._create(e)},empty:function(){var t,e=this._items;for(t=0;t<e.length;t++)e[t].destroy();this._items=[]},_create:function(t){var e,i,n,s,r=this._items,o=w(t.currentIndex,t.zoom);for(i=0;i<r.length;i++)(n=r[i]).options.id===o&&(s=e=n);return e?e.load(t):(s=new v(t),this._items.push(s)),s},_update:function(t,e){var i,n,s,r,o=this._items,a=-Number.MAX_VALUE,h=w(e.currentIndex,e.zoom);for(s=0;s<o.length;s++){if(i=(r=o[s]).options.point.clone().distanceTo(t),r.options.id===h)return o[s];a<i&&(n=s,a=i)}return o[n].load(e),o[n]}});function b(t){return new c(h(t.x),h(t.y))}function w(t,e){return"x:"+t.x+"y:"+t.y+"zoom:"+e}l(a,{map:{layers:{tile:g,TileLayer:g,ImageTile:v,TilePool:y,TileView:m}}})}(window.kendo.jQuery),function(t,e){Math;var i=t.proxy,n=window.kendo,s=(n.Class,n.template),r=n.dataviz,o=n.deepExtend,a=r.map.Extent,h=r.map.Location,l=(r.map.layers.Layer,r.map.layers.TileLayer),c=r.map.layers.TileView,d=l.extend({init:function(e,n){this._initOptions(n);var r=s(this.options.settingsUrl)({key:this.options.key,imagerySet:this.options.imagerySet});this.map=e,t.ajax({url:r,type:"get",dataType:"jsonp",jsonpCallback:"bingTileParams",success:i(this._success,this)})},options:{settingsUrl:"http://dev.virtualearth.net/REST/v1/Imagery/Metadata/#= imagerySet #?output=json&jsonp=bingTileParams&include=ImageryProviders&key=#= key #",imagerySet:"road"},_success:function(t){if(t&&t.resourceSets.length){var e=this.resource=t.resourceSets[0].resources[0];l.fn.init.call(this,this.map,{urlTemplate:e.imageUrl.replace("{subdomain}","#= subdomain #").replace("{quadkey}","#= quadkey #").replace("{culture}","#= culture #"),subdomains:e.imageUrlSubdomains,maxZoom:e.zoomMax,minZoom:e.zoomMin}),this._addAttribution(),this.reset()}},_viewType:function(){return u},_addAttribution:function(){var t=this.map.attribution;if(t){var e=this.resource.imageryProviders;if(e)for(var i=0;i<e.length;i++)for(var n=e[i],s=0;s<n.coverageAreas.length;s++){var r=n.coverageAreas[s];t.add({text:n.attribution,minZoom:r.zoomMin,maxZoom:r.zoomMax,extent:new a(new h(r.bbox[2],r.bbox[1]),new h(r.bbox[0],r.bbox[3]))})}}}}),u=c.extend({options:{culture:"en-Us"},tileOptions:function(t){var e=c.fn.tileOptions.call(this,t);return e.culture=this.options.culture,e.quadkey=this.tileQuadKey(this.wrapIndex(t)),e},tileQuadKey:function(t){var e,i,n,s="";for(n=this._zoom;n>0;n--)e=0,i=1<<n-1,0!=(t.x&i)&&e++,0!=(t.y&i)&&(e+=2),s+=e;return s}});o(r,{map:{layers:{bing:d,BingLayer:d,BingView:u}}})}(window.kendo.jQuery),function(t,e){var i=document,n=Math,s=t.inArray,r=t.proxy,o=window.kendo,a=o.Class,h=o.data.DataSource,l=o.ui.Tooltip,c=o.dataviz,d=o.deepExtend,u=c.map,p=u.Location,f=u.layers.Layer,g=f.extend({init:function(t,e){f.fn.init.call(this,t,e),this.items=[],this._initDataSource()},destroy:function(){f.fn.destroy.call(this),this.dataSource.unbind("change",this._dataChange),this.clear()},options:{zIndex:1e3,autoBind:!0,dataSource:{},locationField:"location",titleField:"title"},add:function(e){if(!t.isArray(e))return this._addOne(e);for(var i=0;i<e.length;i++)this._addOne(e[i])},remove:function(t){t.destroy();var e=s(t,this.items);e>-1&&this.items.splice(e,1)},clear:function(){for(var t=0;t<this.items.length;t++)this.items[t].destroy();this.items=[]},update:function(t){var e=t.location();e&&t.showAt(this.map.locationToView(e))},reset:function(){f.fn.reset.call(this);for(var t=this.items,e=0;e<t.length;e++)this.update(t[e])},bind:function(t,e){var i=u.Marker.create(t,this.options);i.dataItem=e;var n={marker:i};if(!this.map.trigger("markerCreated",n))return this.add(i),i},_addOne:function(t){var e=m.create(t,this.options);return e.addTo(this),e},_initDataSource:function(){var t=this.options.dataSource;this._dataChange=r(this._dataChange,this),this.dataSource=h.create(t).bind("change",this._dataChange),t&&this.options.autoBind&&this.dataSource.fetch()},_dataChange:function(t){this._load(t.items)},_load:function(t){this._data=t,this.clear();for(var e=o.getter(this.options.locationField),i=o.getter(this.options.titleField),n=0;n<t.length;n++){var s=t[n];this.bind({location:e(s),title:i(s)},s)}}}),m=a.extend({init:function(t){this.options=t||{}},addTo:function(t){this.layer=t.markers||t,this.layer.items.push(this),this.layer.update(this)},location:function(t){return t?(this.options.location=p.create(t).toArray(),this.layer&&this.layer.update(this),this):p.create(this.options.location)},showAt:function(t){this.render(),this.element.css({left:n.round(t.x),top:n.round(t.y)}),this.tooltip&&this.tooltip.popup&&this.tooltip.popup._position()},hide:function(){this.element&&(this.element.remove(),this.element=null),this.tooltip&&(this.tooltip.destroy(),this.tooltip=null)},destroy:function(){this.layer=null,this.hide()},render:function(){if(!this.element){var e=this.options,n=this.layer;this.element=t(i.createElement("span")).addClass("k-marker k-marker-"+o.toHyphens(e.shape||"pin")).attr("title",e.title).css("zIndex",e.zIndex),n&&n.element.append(this.element),this.renderTooltip()}},renderTooltip:function(){var t=this,e=t.options.title,i=t.options.tooltip||{};if(i&&l){var n=i.template;if(n){var s=o.template(n);i.content=function(e){return e.location=t.location(),e.marker=t,s(e)}}(e||i.content||i.contentUrl)&&(this.tooltip=new l(this.element,i),this.tooltip.marker=this)}}});m.create=function(t,e){return t instanceof m?t:new m(d({},e,t))},d(c,{map:{layers:{marker:g,MarkerLayer:g},Marker:m}})}(window.kendo.jQuery),function(t,e){var i=document,n=Math,s=n.min,r=n.pow,o=t.proxy,a=window.kendo,h=a.ui.Widget,l=a.deepExtend,c=a.dataviz,d=c.ui,u=c.defined,p=c.geometry,f=p.Point,g=c.map,m=g.Extent,v=g.Location,y=g.crs.EPSG3857,b=c.util,w=b.limitValue,x=b.renderPos,_=b.valueOrDefault,k=h.extend({init:function(t,e){a.destroy(t),h.fn.init.call(this,t),this._initOptions(e),this.bind(this.events,e),this.crs=new y,this.element.addClass("k-"+this.options.name.toLowerCase()).css("position","relative").empty().append(i.createElement("div")),this._viewOrigin=this._getOrigin(),this._initScroller(),this._initMarkers(),this._initControls(),this._initLayers(),this._reset(),this._mousewheel=o(this._mousewheel,this),this.element.bind("click",o(this._click,this)),this.element.bind("DOMMouseScroll mousewheel",this._mousewheel)},options:{name:"Map",controls:{attribution:!0,navigator:{panStep:100},zoom:!0},layers:[],layerDefaults:{shape:{style:{fill:{color:"#fff"},stroke:{color:"#aaa",width:.5}}},marker:{shape:"pinTarget",tooltip:{position:"top"}}},center:[0,0],zoom:3,minSize:256,minZoom:1,maxZoom:19,markers:[],markerDefaults:{shape:"pinTarget",tooltip:{position:"top"}},wraparound:!0},events:["beforeReset","click","reset","pan","panEnd","markerCreated","shapeClick","shapeCreated","shapeMouseEnter","shapeMouseLeave","zoomStart","zoomEnd"],destroy:function(){this.scroller.destroy(),this.navigator&&this.navigator.destroy(),this.attribution&&this.attribution.destroy(),this.zoomControl&&this.zoomControl.destroy(),this.markers.destroy();for(var t=0;t<this.layers.length;t++)this.layers[t].destroy();h.fn.destroy.call(this)},zoom:function(t){var e=this.options;return u(t)?(t=w(t,e.minZoom,e.maxZoom),e.zoom!==t&&(e.zoom=t,this._reset()),this):e.zoom},center:function(t){return t?(this.options.center=v.create(t).toArray(),this._reset(),this):v.create(this.options.center)},extent:function(t){return t?(this._setExtent(t),this):this._getExtent()},setOptions:function(t){h.fn.setOptions.call(this,t),this._reset()},locationToLayer:function(t,e){var i=!this.options.wraparound;return t=v.create(t),this.crs.toPoint(t,this._layerSize(e),i)},layerToLocation:function(t,e){var i=!this.options.wraparound;return t=f.create(t),this.crs.toLocation(t,this._layerSize(e),i)},locationToView:function(t){t=v.create(t);var e=this.locationToLayer(this._viewOrigin);return this.locationToLayer(t).subtract(e)},viewToLocation:function(t,e){var i=this.locationToLayer(this._getOrigin(),e);return t=(t=f.create(t)).clone().add(i),this.layerToLocation(t,e)},eventOffset:function(t){var e=this.element.offset(),i=t.originalEvent||t,n=_(i.pageX,i.clientX)-e.left,s=_(i.pageY,i.clientY)-e.top;return new p.Point(n,s)},eventToView:function(t){var e=this.eventOffset(t);return this.locationToView(this.viewToLocation(e))},eventToLayer:function(t){return this.locationToLayer(this.eventToLocation(t))},eventToLocation:function(t){var e=this.eventOffset(t);return this.viewToLocation(e)},viewSize:function(){var t=this.element,e=this._layerSize(),i=t.width();return this.options.wraparound||(i=s(e,i)),{width:i,height:s(e,t.height())}},_setOrigin:function(t,e){var i,n=this.viewSize();return t=this._origin=v.create(t),(i=this.locationToLayer(t,e)).x+=n.width/2,i.y+=n.height/2,this.options.center=this.layerToLocation(i,e).toArray(),this},_getOrigin:function(t){var e,i=this.viewSize();return!t&&this._origin||((e=this.locationToLayer(this.center())).x-=i.width/2,e.y-=i.height/2,this._origin=this.layerToLocation(e)),this._origin},_setExtent:function(t){t=m.create(t),this.center(t.center());for(var e=this.element.width(),i=this.element.height(),s=this.options.maxZoom;s>=this.options.minZoom;s--){var r=this.locationToLayer(t.nw,s),o=this.locationToLayer(t.se,s),a=n.abs(o.x-r.x),h=n.abs(o.y-r.y);if(a<=e&&h<=i)break}this.zoom(s)},_getExtent:function(){var t=this._getOrigin(),e=this.locationToLayer(t),i=this.viewSize();e.x+=i.width,e.y+=i.height;var n=this.layerToLocation(e);return new m(t,n)},_zoomAround:function(t,e){this._setOrigin(this.layerToLocation(t,e),e),this.zoom(e)},_initControls:function(){var t=this.options.controls;d.Attribution&&t.attribution&&this._createAttribution(t.attribution),a.support.mobileOS||(d.Navigator&&t.navigator&&this._createNavigator(t.navigator),d.ZoomControl&&t.zoom&&this._createZoomControl(t.zoom))},_createControlElement:function(e,i){var n=e.position||i,s="."+x(n).replace(" ","."),r=t(".k-map-controls"+s,this.element);return 0===r.length&&(r=t("<div>").addClass("k-map-controls "+x(n)).appendTo(this.element)),t("<div>").appendTo(r)},_createAttribution:function(t){var e=this._createControlElement(t,"bottomRight");this.attribution=new d.Attribution(e,t)},_createNavigator:function(t){var e=this._createControlElement(t,"topLeft"),i=this.navigator=new d.Navigator(e,t);this._navigatorPan=o(this._navigatorPan,this),i.bind("pan",this._navigatorPan),this._navigatorCenter=o(this._navigatorCenter,this),i.bind("center",this._navigatorCenter)},_navigatorPan:function(t){var e=this,i=e.scroller,n=i.scrollLeft+t.x,s=i.scrollTop-t.y,r=this._virtualSize,o=this.element.height(),a=this.element.width();n=w(n,r.x.min,r.x.max-a),s=w(s,r.y.min,r.y.max-o),e.scroller.one("scroll",(function(t){e._scrollEnd(t)})),e.scroller.scrollTo(-n,-s)},_navigatorCenter:function(){this.center(this.options.center)},_createZoomControl:function(t){var e=this._createControlElement(t,"topLeft"),i=this.zoomControl=new d.ZoomControl(e,t);this._zoomControlChange=o(this._zoomControlChange,this),i.bind("change",this._zoomControlChange)},_zoomControlChange:function(t){this.trigger("zoomStart",{originalEvent:t})||(this.zoom(this.zoom()+t.delta),this.trigger("zoomEnd",{originalEvent:t}))},_initScroller:function(){var t=a.support.mobileOS?.93:.9,e=!1!==this.options.zoomable,i=this.scroller=new a.mobile.ui.Scroller(this.element.children(0),{friction:t,velocityMultiplier:5,zoom:e,mousewheelScrolling:!1});i.bind("scroll",o(this._scroll,this)),i.bind("scrollEnd",o(this._scrollEnd,this)),i.userEvents.bind("gesturestart",o(this._scaleStart,this)),i.userEvents.bind("gestureend",o(this._scale,this)),this.scrollElement=i.scrollElement},_initLayers:function(){for(var t=this.options.layers,e=this.layers=[],i=0;i<t.length;i++){var n=t[i],s=n.type||"shape",r=this.options.layerDefaults[s],o=c.map.layers[s];e.push(new o(this,l({},r,n)))}},_initMarkers:function(){this.markers=new g.layers.MarkerLayer(this,this.options.markerDefaults),this.markers.add(this.options.markers)},_scroll:function(t){var e=this.locationToLayer(this._viewOrigin).round(),i=t.sender.movable,n=new p.Point(i.x,i.y).multiply(-1).multiply(1/i.scale);e.x+=n.x,e.y+=n.y,this._setOrigin(this.layerToLocation(e)),this.trigger("pan",{originalEvent:t,origin:this._getOrigin(),center:this.center()})},_scrollEnd:function(t){this.trigger("panEnd",{originalEvent:t,origin:this._getOrigin(),center:this.center()})},_scaleStart:function(t){if(this.trigger("zoomStart",{originalEvent:t})){var e=t.touches[1];e&&e.cancel()}},_scale:function(t){var e=this.scroller.movable.scale,i=this._scaleToZoom(e),n=new p.Point(t.center.x,t.center.y),s=this.viewToLocation(n,i),r=this.locationToLayer(s,i).subtract(n);this._zoomAround(r,i),this.trigger("zoomEnd",{originalEvent:t})},_scaleToZoom:function(t){var e=this._layerSize()*t/this.options.minSize,i=n.log(e)/n.log(2);return n.round(i)},_reset:function(){this.attribution&&this.attribution.filter(this.center(),this.zoom()),this._viewOrigin=this._getOrigin(!0),this._resetScroller(),this.trigger("beforeReset"),this.trigger("reset")},_resetScroller:function(){var t=this.scroller,e=t.dimensions.x,i=t.dimensions.y,n=this._layerSize(),s=20*n,o=this.extent().nw,a=this.locationToLayer(o).round();t.reset(),t.userEvents.cancel();var h=this.options.maxZoom-this.zoom();t.dimensions.maxScale=r(2,h),t.movable.round=!0;var l={min:-a.x,max:n-a.x},c={min:-a.y,max:n-a.y};if(this.options.wraparound&&(l.min=-s,l.max=s),!1===this.options.pannable){var d=this.viewSize();l.min=c.min=0,l.max=d.width,c.max=d.height}e.makeVirtual(),i.makeVirtual(),e.virtualSize(l.min,l.max),i.virtualSize(c.min,c.max),this._virtualSize={x:l,y:c}},_renderLayers:function(){var t=this.options.layers,e=this.layers=[];this.scrollWrap.empty();for(var i=0;i<t.length;i++){var n=t[i],s=n.type||"shape",r=this.options.layerDefaults[s],o=c.map.layers[s];e.push(new o(this,l({},r,n)))}},_layerSize:function(t){return t=_(t,this.options.zoom),this.options.minSize*r(2,t)},_click:function(t){var e=this.eventOffset(t);this.trigger("click",{originalEvent:t,location:this.viewToLocation(e)})},_mousewheel:function(t){t.preventDefault();var e=c.mwDelta(t)>0?-1:1,i=this.options,n=this.zoom(),s=w(n+e,i.minZoom,i.maxZoom);if(!1!==i.zoomable&&s!==n&&!this.trigger("zoomStart",{originalEvent:t})){var r=this.eventOffset(t),o=this.viewToLocation(r),a=this.locationToLayer(o,s).subtract(r);this._zoomAround(a,s),this.trigger("zoomEnd",{originalEvent:t})}}});c.ui.plugin(k)}(window.kendo.jQuery),function(t,e){var i=t.extend,n=Math;function s(t){var e=t.originalEvent,i=0;return e.wheelDelta?i=(i=-e.wheelDelta/40)>0?n.ceil(i):n.floor(i):e.detail&&(i=e.detail),i}i(t.fn,{mousewheel:function(t,e){var n=i({ns:""},e||{}),r="DOMMouseScroll"+n.ns+" mousewheel"+n.ns;return this.on(r,(function(e){e.data={delta:s(e)},t(e)})),this}})}(window.kendo.jQuery),function(t,e){var i=window.kendo,n=i.dataviz.diagram={},s=(i.Class,i.deepExtend),r=t.isArray,o={};s(o,{isNearZero:function(t){return Math.abs(t)<1e-6},isDefined:function(t){return void 0!==t},isUndefined:function(t){return null==t},isObject:function(t){return t===Object(t)},has:function(t,e){return Object.hasOwnProperty.call(t,e)},isString:function(t){return"[object String]"==Object.prototype.toString.call(t)},isBoolean:function(t){return"[object Boolean]"==Object.prototype.toString.call(t)},isType:function(t,e){return Object.prototype.toString.call(t)=="[object "+e+"]"},isNumber:function(t){return!isNaN(parseFloat(t))&&isFinite(t)},isEmpty:function(t){if(null===t)return!0;if(r(t)||o.isString(t))return 0===t.length;for(var e in t)if(o.has(t,e))return!1;return!0},simpleExtend:function(t,e){if(o.isObject(e))for(var i in e)t[i]=e[i]},initArray:function(t,e){for(var i=[],n=0;n<t;++n)i[n]=e;return i},serializePoints:function(t){for(var e=[],i=0;i<t.length;i++){var n=t[i];e.push(n.x+";"+n.y)}return e.join(";")},deserializePoints:function(t){var e=t.split(";"),i=[];if(e.length%2!=0)throw"Not an array of points.";for(var s=0;s<e.length;s+=2)i.push(new n.Point(parseInt(e[s],10),parseInt(e[s+1],10)));return i},randomInteger:function(t,e){return parseInt(Math.floor(Math.random()*e)+t,10)},DFT:function(t,e){if(e(t),t.childNodes)for(var i=0;i<t.childNodes.length;i++){var n=t.childNodes[i];this.DFT(n,e)}},getMatrixAngle:function(t){return null===t||0===t.d?0:180*Math.atan2(t.b,t.d)/Math.PI},getMatrixScaling:function(t){return[Math.sqrt(t.a*t.a+t.c*t.c),Math.sqrt(t.b*t.b+t.d*t.d)]}}),o.sign=function(t){return t?t<0?-1:1:0},o.findAngle=function(t,e){return 180*function(t,e){if(t==e)return 0;var i=e.x-t.x,n=t.y-e.y,s=Math.atan(i/n);return n>=0?i<0?s+2*Math.PI:s:s+Math.PI}(t,e)/Math.PI},o.forEach=function(t,e,i){for(var n=0;n<t.length;n++)e.call(i,t[n],n,t)},o.any=function(t,e){for(var i=0;i<t.length;++i)if(e(t[i]))return t[i];return null},o.remove=function(t,e){for(var i;-1!==(i=o.indexOf(t,e));)t.splice(i,1);return t},o.contains=function(t,e){return-1!==o.indexOf(t,e)},o.indexOf=function(e,i){return t.inArray(i,e)},o.fold=function(t,e,i,n){for(var s=arguments.length>2,r=0;r<t.length;r++){var o=t[r];s?i=e.call(n,i,o,r,t):(i=o,s=!0)}if(!s)throw"Reduce of empty array with no initial value";return i},o.find=function(t,e,i){var n;return o.any(t,(function(t,s,r){return!!e.call(i,t,s,r)&&(n=t,!0)})),n},o.first=function(t,e,i){return 0===t.length?null:o.isUndefined(e)?t[0]:o.find(t,e,i)},o.insert=function(t,e,i){return t.splice(i,0,e),t},o.all=function(t,e,i){for(var n,s=!0,r=0;r<t.length&&(n=t[r],s=s&&e.call(i,n,r,t));r++);return s},o.clear=function(t){t.splice(0,t.length)},o.bisort=function(t,e,i){if(o.isUndefined(t))throw"First array is not specified.";if(o.isUndefined(e))throw"Second array is not specified.";if(t.length!=e.length)throw"The two arrays should have equal length";var n,s=[];for(n=0;n<t.length;n++)s.push({x:t[n],y:e[n]});for(o.isUndefined(i)?s.sort((function(t,e){return t.x-e.x})):s.sort((function(t,e){return i(t.x,e.x)})),o.clear(t),o.clear(e),n=0;n<s.length;n++)t.push(s[n].x),e.push(s[n].y)},o.addRange=function(t,e){t.push.apply(t,e)};var a=function(t){return-Math.cos(t*Math.PI)/2+.5},h=i.Class.extend({init:function(){this.adapters=[],this.target=0,this.tick=0,this.interval=20,this.duration=800,this.lastTime=null,this.handlers=[];var t=this;this.transition=a,this.timerDelegate=function(){t.onTimerEvent()}},addAdapter:function(t){this.adapters.push(t)},onComplete:function(t){this.handlers.push(t)},removeHandler:function(e){this.handlers=t.grep(this.handlers,(function(t){return t!==e}))},trigger:function(){var t=this;this.handlers&&o.forEach(this.handlers,(function(e){return e.call(null!==t.caller?t.caller:t)}))},onStep:function(){},seekTo:function(t){this.seekFromTo(this.tick,t)},seekFromTo:function(t,e){this.target=Math.max(0,Math.min(1,e)),this.tick=Math.max(0,Math.min(1,t)),this.lastTime=(new Date).getTime(),this.intervalId||(this.intervalId=window.setInterval(this.timerDelegate,this.interval))},stop:function(){this.intervalId&&(window.clearInterval(this.intervalId),this.intervalId=null,this.trigger())},play:function(t){0!==this.adapters.length&&(null!==t&&(this.caller=t),this.initState(),this.seekFromTo(0,1))},reverse:function(){this.seekFromTo(1,0)},initState:function(){if(0!==this.adapters.length)for(var t=0;t<this.adapters.length;t++)this.adapters[t].initState()},propagate:function(){for(var t=this.transition(this.tick),e=0;e<this.adapters.length;e++)this.adapters[e].update(t)},onTimerEvent:function(){var t=(new Date).getTime(),e=t-this.lastTime;this.lastTime=t;var i=e/this.duration*(this.tick<this.target?1:-1);Math.abs(i)>=Math.abs(this.tick-this.target)?this.tick=this.target:this.tick+=i;try{this.propagate()}finally{this.onStep.call(this),this.target==this.tick&&this.stop()}}});i.deepExtend(n,{init:function(t){i.init(t,n.ui)},Utils:o,Range:function(t,e,i){if(void 0===t||void 0===e)return[];if(i&&o.sign(e-t)!=o.sign(i))throw"The sign of the increment should allow to reach the stop-value.";if(t=t||0,((e=e||t)-t)/(i=i||1)==1/0)throw"Infinite range defined.";var n,s=[],r=-1,a=function(t){for(var e=1;t*e%1;)e*=10;return e}(Math.abs(i));if(i*=a,(t*=a)>(e*=a)&&i>0&&(i=-i),i<0)for(;(n=t+i*++r)>=e;)s.push(n/a);else for(;(n=t+i*++r)<=e;)s.push(n/a);return s},Ticker:h})}(window.kendo.jQuery),function(t,e){var i=window.kendo,n=i.dataviz.diagram,s=i.Class,r=i.deepExtend,o=i.dataviz,a=n.Utils,h=o.Point2D,l=i.isFunction,c=a.contains,d=t.map;r(h.fn,{plus:function(t){return new h(this.x+t.x,this.y+t.y)},minus:function(t){return new h(this.x-t.x,this.y-t.y)},offset:function(t){return new h(this.x-t,this.y-t)},times:function(t){return new h(this.x*t,this.y*t)},normalize:function(){return 0===this.length()?new h:this.times(1/this.length())},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},toString:function(){return"("+this.x+","+this.y+")"},lengthSquared:function(){return this.x*this.x+this.y*this.y},middleOf:function(t,e){return new h(e.x-t.x,e.y-t.y).times(.5).plus(t)},toPolar:function(t){var e=1;t&&(e=180/Math.PI);var i=Math.atan2(Math.abs(this.y),Math.abs(this.x)),n=Math.PI/2,s=this.length();if(0===this.x){if(0===this.y)return new y(0,0);if(this.y>0)return new y(s,e*n);if(this.y<0)return new y(s,3*e*n)}else if(this.x>0){if(0===this.y)return new y(s,0);if(this.y>0)return new y(s,e*i);if(this.y<0)return new y(s,e*(4*n-i))}else{if(0===this.y)return new y(s,2*n);if(this.y>0)return new y(s,e*(2*n-i));if(this.y<0)return new y(s,e*(2*n+i))}},isOnLine:function(t,e){if(t.x>e.x){var i=e;e=t,t=i}var n,s,r=new p(t.x,t.y).inflate(3,3),o=new p(e.x,e.y).inflate(3,3);return!!r.union(o).contains(this)&&(t.x===e.x||t.y===e.y||(t.y<e.y?(n=r.x+(o.x-r.x)*(this.y-(r.y+r.height))/(o.y+o.height-(r.y+r.height)),s=r.x+r.width+(o.x+o.width-(r.x+r.width))*(this.y-r.y)/(o.y-r.y)):(n=r.x+(o.x-r.x)*(this.y-r.y)/(o.y-r.y),s=r.x+r.width+(o.x+o.width-(r.x+r.width))*(this.y-(r.y+r.height))/(o.y+o.height-(r.y+r.height))),this.x>n&&this.x<s))}}),r(h,{parse:function(t){var e=t.slice(1,t.length-1).split(","),i=parseInt(e[0],10),n=parseInt(e[1],10);if(!isNaN(i)&&!isNaN(n))return new h(i,n)}});var u=s.extend({init:function(t,e,i){this.point=t,this.left=e,this.right=i}}),p=s.extend({init:function(t,e,i,n){this.x=t||0,this.y=e||0,this.width=i||0,this.height=n||0},contains:function(t){return t.x>=this.x&&t.x<=this.x+this.width&&t.y>=this.y&&t.y<=this.y+this.height},inflate:function(t,e){return void 0===e&&(e=t),this.x-=t,this.y-=e,this.width+=2*t+1,this.height+=2*e+1,this},offset:function(t,e){var i=t,n=e;return t instanceof h&&(i=t.x,n=t.y),this.x+=i,this.y+=n,this},union:function(t){var e=Math.min(this.x,t.x),i=Math.min(this.y,t.y),n=Math.max(this.x+this.width,t.x+t.width),s=Math.max(this.y+this.height,t.y+t.height);return new p(e,i,n-e,s-i)},center:function(){return new h(this.x+this.width/2,this.y+this.height/2)},top:function(){return new h(this.x+this.width/2,this.y)},right:function(){return new h(this.x+this.width,this.y+this.height/2)},bottom:function(){return new h(this.x+this.width/2,this.y+this.height)},left:function(){return new h(this.x,this.y+this.height/2)},topLeft:function(){return new h(this.x,this.y)},topRight:function(){return new h(this.x+this.width,this.y)},bottomLeft:function(){return new h(this.x,this.y+this.height)},bottomRight:function(){return new h(this.x+this.width,this.y+this.height)},clone:function(){return new p(this.x,this.y,this.width,this.height)},isEmpty:function(){return!this.width&&!this.height},equals:function(t){return this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height},rotatedBounds:function(t){var e=this.clone(),i=this.rotatedPoints(t),n=i[0],s=i[1],r=i[2],o=i[3];return e.x=Math.min(r.x,n.x,s.x,o.x),e.y=Math.min(r.y,n.y,s.y,o.y),e.width=Math.max(r.x,n.x,s.x,o.x)-e.x,e.height=Math.max(r.y,n.y,s.y,o.y)-e.y,e},rotatedPoints:function(t){var e=this.center(),i=this.bottomRight().rotate(e,360-t);return[this.topLeft().rotate(e,360-t),this.topRight().rotate(e,360-t),i,this.bottomLeft().rotate(e,360-t)]},toString:function(t){return t=t||" ",this.x+t+this.y+t+this.width+t+this.height},scale:function(t,e,i,n,s){var r=this.topLeft(),o=this.center();r.rotate(o,360-s).rotate(n,s);var a=i.minus(r),l=new h(a.x*t,a.y*e),c=a.minus(l);(r=r.plus(c)).rotate(n,360-s).rotate(o,s),this.x=r.x,this.y=r.y,this.width*=t,this.height*=e}}),f=s.extend({init:function(t,e){this.width=t,this.height=e}});function g(t,e,i,n,s){var r=(e.x-t.x)*(n.y-i.y)-(e.y-t.y)*(n.x-i.x);if(o=r,!(Math.abs(o)<1e-6)){var o,a=((t.y-i.y)*(n.x-i.x)-(t.x-i.x)*(n.y-i.y))/r,l=((t.y-i.y)*(e.x-t.x)-(t.x-i.x)*(e.y-t.y))/r;if(!s||!(a<0||a>1||l<0||l>1))return new h(t.x+a*(e.x-t.x),t.y+a*(e.y-t.y))}}f.prototype.Empty=new f(0,0),p.toRect=function(t){return t instanceof p||(t=new p(t.x,t.y,t.width,t.height)),t},p.empty=function(){return new p(0,0,0,0)},p.fromPoints=function(t,e){if(isNaN(t.x)||isNaN(t.y)||isNaN(e.x)||isNaN(e.y))throw"Some values are NaN.";return new p(Math.min(t.x,e.x),Math.min(t.y,e.y),Math.abs(t.x-e.x),Math.abs(t.y-e.y))};var m={lines:function(t,e,i,n){return g(t,e,i,n)},segments:function(t,e,i,n){return g(t,e,i,n,!0)},rectWithLine:function(t,e,i){return m.segments(e,i,t.topLeft(),t.topRight())||m.segments(e,i,t.topRight(),t.bottomRight())||m.segments(e,i,t.bottomLeft(),t.bottomRight())||m.segments(e,i,t.topLeft(),t.bottomLeft())},rects:function(t,e,i){var n=e.topLeft(),s=e.topRight(),r=e.bottomLeft(),o=e.bottomRight(),a=e.center();i&&(n=n.rotate(a,i),s=s.rotate(a,i),r=r.rotate(a,i),o=o.rotate(a,i));var h=t.contains(n)||t.contains(s)||t.contains(r)||t.contains(o)||m.rectWithLine(t,n,s)||m.rectWithLine(t,n,r)||m.rectWithLine(t,s,o)||m.rectWithLine(t,r,o);if(!h){if(n=t.topLeft(),s=t.topRight(),r=t.bottomLeft(),o=t.bottomRight(),i){var l=360-i;n=n.rotate(a,l),s=s.rotate(a,l),r=r.rotate(a,l),o=o.rotate(a,l)}h=e.contains(n)||e.contains(s)||e.contains(r)||e.contains(o)}return h}},v=s.extend({init:function(t){this.container=p.toRect(t)},align:function(t,e){for(var i=e.toLowerCase().split(" "),n=0;n<i.length;n++)t=this._singleAlign(t,i[n]);return t},_singleAlign:function(t,e){return l(this[e])?this[e](t):t},left:function(t){return this._align(t,this._left)},center:function(t){return this._align(t,this._center)},right:function(t){return this._align(t,this._right)},stretch:function(t){return this._align(t,this._stretch)},top:function(t){return this._align(t,this._top)},middle:function(t){return this._align(t,this._middle)},bottom:function(t){return this._align(t,this._bottom)},_left:function(t,e){e.x=t.x},_center:function(t,e){e.x=(t.width-e.width)/2||0},_right:function(t,e){e.x=t.width-e.width},_top:function(t,e){e.y=t.y},_middle:function(t,e){e.y=(t.height-e.height)/2||0},_bottom:function(t,e){e.y=t.height-e.height},_stretch:function(t,e){e.x=0,e.y=0,e.height=t.height,e.width=t.width},_align:function(t,e){return t=p.toRect(t),e(this.container,t),t}}),y=s.extend({init:function(t,e){this.r=t,this.angle=e}}),b=s.extend({init:function(t,e,i,n,s,r){this.a=t||0,this.b=e||0,this.c=i||0,this.d=n||0,this.e=s||0,this.f=r||0},plus:function(t){this.a+=t.a,this.b+=t.b,this.c+=t.c,this.d+=t.d,this.e+=t.e,this.f+=t.f},minus:function(t){this.a-=t.a,this.b-=t.b,this.c-=t.c,this.d-=t.d,this.e-=t.e,this.f-=t.f},times:function(t){return new b(this.a*t.a+this.c*t.b,this.b*t.a+this.d*t.b,this.a*t.c+this.c*t.d,this.b*t.c+this.d*t.d,this.a*t.e+this.c*t.f+this.e,this.b*t.e+this.d*t.f+this.f)},apply:function(t){return new h(this.a*t.x+this.c*t.y+this.e,this.b*t.x+this.d*t.y+this.f)},applyRect:function(t){return p.fromPoints(this.apply(t.topLeft()),this.apply(t.bottomRight()))},toString:function(){return"matrix("+this.a+" "+this.b+" "+this.c+" "+this.d+" "+this.e+" "+this.f+")"}});r(b,{fromSVGMatrix:function(t){var e=new b;return e.a=t.a,e.b=t.b,e.c=t.c,e.d=t.d,e.e=t.e,e.f=t.f,e},fromMatrixVector:function(t){var e=new b;return e.a=t.a,e.b=t.b,e.c=t.c,e.d=t.d,e.e=t.e,e.f=t.f,e},fromList:function(t){if(6!==t.length)throw"The given list should consist of six elements.";var e=new b;return e.a=t[0],e.b=t[1],e.c=t[2],e.d=t[3],e.e=t[4],e.f=t[5],e},translation:function(t,e){var i=new b;return i.a=1,i.b=0,i.c=0,i.d=1,i.e=t,i.f=e,i},unit:function(){return new b(1,0,0,1,0,0)},rotation:function(t,e,i){var n=new b;return n.a=Math.cos(t*Math.PI/180),n.b=Math.sin(t*Math.PI/180),n.c=-n.b,n.d=n.a,n.e=e-e*n.a+i*n.b||0,n.f=i-i*n.a-e*n.b||0,n},scaling:function(t,e){var i=new b;return i.a=t,i.b=0,i.c=0,i.d=e,i.e=0,i.f=0,i},parse:function(t){var e,i;if(t){if("matrix"===(t=t.trim()).slice(0,6).toLowerCase()){if(6===(e=(i=t.slice(7,t.length-1).trim()).split(",")).length)return b.fromList(d(e,(function(t){return parseFloat(t)})));if(6===(e=i.split(" ")).length)return b.fromList(d(e,(function(t){return parseFloat(t)})))}if("("===t.slice(0,1)&&")"===t.slice(t.length-1)&&(t=t.substr(1,t.length-1)),t.indexOf(",")>0&&6===(e=t.split(",")).length)return b.fromList(d(e,(function(t){return parseFloat(t)})));if(t.indexOf(" ")>0&&6===(e=t.split(" ")).length)return b.fromList(d(e,(function(t){return parseFloat(t)})))}return e}});var w=s.extend({init:function(t,e,i,n,s,r){this.a=t||0,this.b=e||0,this.c=i||0,this.d=n||0,this.e=s||0,this.f=r||0},fromMatrix:function(t){var e=new w;return e.a=t.a,e.b=t.b,e.c=t.c,e.d=t.d,e.e=t.e,e.f=t.f,e}});function x(t){a.isUndefined(t)&&(t=10);for(var e="",i="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=t;n>0;--n)e+=i[Math.round(Math.random()*(i.length-1))];return e}var _={_distanceToLineSquared:function(t,e,i){function n(t,e){return(t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y)}if(e===i)return n(t,e);var s=i.x-e.x,r=i.y-e.y,o=(t.x-e.x)*s+(t.y-e.y)*r;return o<0?n(e,t):(o=(i.x-t.x)*s+(i.y-t.y)*r)<0?n(i,t):(o=(i.x-t.x)*r-(i.y-t.y)*s)*o/(s*s+r*r)},distanceToLine:function(t,e,i){return Math.sqrt(this._distanceToLineSquared(t,e,i))},distanceToPolyline:function(t,e){var i=Number.MAX_VALUE;if(a.isUndefined(e)||0===e.length)return Number.MAX_VALUE;for(var n=0;n<e.length-1;n++){var s=e[n],r=e[n+1],o=this._distanceToLineSquared(t,s,r);o<i&&(i=o)}return Math.sqrt(i)}},k=i.Class.extend({init:function(){this._buckets=[],this.length=0},add:function(t,e){var i=this._createGetBucket(t);return a.isDefined(e)&&(i.value=e),i},get:function(t){return this._bucketExists(t)?this._createGetBucket(t):null},set:function(t,e){this.add(t,e)},containsKey:function(t){return this._bucketExists(t)},remove:function(t){if(this._bucketExists(t)){var e=this._hash(t);return delete this._buckets[e],this.length--,t}},forEach:function(t){for(var e=this._hashes(),i=0,n=e.length;i<n;i++){var s=e[i],r=this._buckets[s];a.isUndefined(r)||t(r)}},clone:function(){for(var t=new k,e=this._hashes(),i=0,n=e.length;i<n;i++){var s=e[i],r=this._buckets[s];a.isUndefined(r)||t.add(r.key,r.value)}return t},_hashes:function(){var t=[];for(var e in this._buckets)this._buckets.hasOwnProperty(e)&&t.push(e);return t},_bucketExists:function(t){var e=this._hash(t);return a.isDefined(this._buckets[e])},_createGetBucket:function(t){var e=this._hash(t),i=this._buckets[e];return a.isUndefined(i)&&(i={key:t},this._buckets[e]=i,this.length++),i},_hash:function(t){if(a.isNumber(t))return t;if(a.isString(t))return this._hashString(t);if(a.isObject(t))return this._objectHashId(t);throw"Unsupported key type."},_hashString:function(t){var e=0;if(0===t.length)return e;for(var i=0;i<t.length;i++){e=32*e-e+t.charCodeAt(i)}return e},_objectHashId:function(t){var e=t._hashId;return a.isUndefined(e)&&(e=x(),t._hashId=e),e}}),C=i.Observable.extend({init:function(e){if(i.Observable.fn.init.call(this),this._hashTable=new k,this.length=0,a.isDefined(e))if(t.isArray(e))for(var n=0;n<e.length;n++)this.add(e[n]);else e.forEach((function(t,e){this.add(t,e)}),this)},add:function(t,e){var i=this._hashTable.get(t);i||(i=this._hashTable.add(t),this.length++,this.trigger("changed")),i.value=e},set:function(t,e){this.add(t,e)},get:function(t){var e=this._hashTable.get(t);if(e)return e.value;throw new Error("Cannot find key "+t)},containsKey:function(t){return this._hashTable.containsKey(t)},remove:function(t){if(this.containsKey(t))return this.trigger("changed"),this.length--,this._hashTable.remove(t)},forEach:function(t,e){this._hashTable.forEach((function(i){t.call(e,i.key,i.value)}))},forEachValue:function(t,e){this._hashTable.forEach((function(i){t.call(e,i.value)}))},forEachKey:function(t,e){this._hashTable.forEach((function(i){t.call(e,i.key)}))},keys:function(){var t=[];return this.forEachKey((function(e){t.push(e)})),t}}),S=i.Class.extend({init:function(){this._tail=null,this._head=null,this.length=0},enqueue:function(t){var e={value:t,next:null};this._head?(this._tail.next=e,this._tail=this._tail.next):(this._head=e,this._tail=this._head),this.length++},dequeue:function(){if(this.length<1)throw new Error("The queue is empty.");var t=this._head.value;return this._head=this._head.next,this.length--,t},contains:function(t){for(var e=this._head;e;){if(e.value===t)return!0;e=e.next}return!1}}),T=i.Observable.extend({init:function(t){i.Observable.fn.init.call(this),this._hashTable=new k,this.length=0,a.isDefined(t)&&(t instanceof k?t.forEach((function(t){this.add(t)})):t instanceof C&&t.forEach((function(t,e){this.add({key:t,value:e})}),this))},contains:function(t){return this._hashTable.containsKey(t)},add:function(t){this._hashTable.get(t)||(this._hashTable.add(t,t),this.length++,this.trigger("changed"))},get:function(t){return this.contains(t)?this._hashTable.get(t).value:null},hash:function(t){return this._hashTable._hash(t)},remove:function(t){this.contains(t)&&(this._hashTable.remove(t),this.length--,this.trigger("changed"))},forEach:function(t,e){this._hashTable.forEach((function(e){t(e.value)}),e)},toArray:function(){var t=[];return this.forEach((function(e){t.push(e)})),t}}),P=i.Class.extend({init:function(t,e){if(this.links=[],this.outgoing=[],this.incoming=[],this.weight=1,a.isDefined(t)?this.id=t:this.id=x(),a.isDefined(e)){this.associatedShape=e;var i=e.bounds();this.width=i.width,this.height=i.height,this.x=i.x,this.y=i.y}else this.associatedShape=null;this.data=null,this.type="Node",this.shortForm="Node '"+this.id+"'",this.isVirtual=!1},isIsolated:function(){return a.isEmpty(this.links)},bounds:function(t){if(!a.isDefined(t))return new n.Rect(this.x,this.y,this.width,this.height);this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height},isLinkedTo:function(t){var e=this;return a.any(e.links,(function(i){return i.getComplement(e)===t}))},getChildren:function(){if(0===this.outgoing.length)return[];for(var t=[],e=0,i=this.outgoing.length;e<i;e++){var n=this.outgoing[e];t.push(n.getComplement(this))}return t},getParents:function(){if(0===this.incoming.length)return[];for(var t=[],e=0,i=this.incoming.length;e<i;e++){var n=this.incoming[e];t.push(n.getComplement(this))}return t},clone:function(){var t=new P;return a.isDefined(this.weight)&&(t.weight=this.weight),a.isDefined(this.balance)&&(t.balance=this.balance),a.isDefined(this.owner)&&(t.owner=this.owner),t.associatedShape=this.associatedShape,t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},adjacentTo:function(t){return null!==this.isLinkedTo(t)},removeLink:function(t){t.source===this&&(a.remove(this.links,t),a.remove(this.outgoing,t),t.source=null),t.target===this&&(a.remove(this.links,t),a.remove(this.incoming,t),t.target=null)},hasLinkTo:function(t){return a.any(this.outgoing,(function(e){return e.target===t}))},degree:function(){return this.links.length},incidentWith:function(t){return c(this.links,t)},getLinksWith:function(t){return a.all(this.links,(function(e){return e.getComplement(this)===t}),this)},getNeighbors:function(){var t=[];return a.forEach(this.incoming,(function(e){t.push(e.getComplement(this))}),this),a.forEach(this.outgoing,(function(e){t.push(e.getComplement(this))}),this),t}}),A=i.Class.extend({init:function(t,e,i,n){if(a.isUndefined(t))throw"The source of the new link is not set.";if(a.isUndefined(e))throw"The target of the new link is not set.";var s,r;s=a.isString(t)?new P(t):t,r=a.isString(e)?new P(e):e,this.source=s,this.target=r,this.source.links.push(this),this.target.links.push(this),this.source.outgoing.push(this),this.target.incoming.push(this),a.isDefined(i)?this.id=i:this.id=x(),a.isDefined(n)?this.associatedConnection=n:this.associatedConnection=null,this.type="Link",this.shortForm="Link '"+this.source.id+"->"+this.target.id+"'"},getComplement:function(t){if(this.source!==t&&this.target!==t)throw"The given node is not incident with this link.";return this.source===t?this.target:this.source},getCommonNode:function(t){return this.source===t.source||this.source===t.target?this.source:this.target===t.source||this.target===t.target?this.target:null},isBridging:function(t,e){return this.source===t&&this.target===e||this.source===e&&this.target===t},getNodes:function(){return[this.source,this.target]},incidentWith:function(t){return this.source===t||this.target===t},adjacentTo:function(t){return c(this.source.links,t)||c(this.target.links,t)},changeSource:function(t){a.remove(this.source.links,this),a.remove(this.source.outgoing,this),t.links.push(this),t.outgoing.push(this),this.source=t},changeTarget:function(t){a.remove(this.target.links,this),a.remove(this.target.incoming,this),t.links.push(this),t.incoming.push(this),this.target=t},changesNodes:function(t,e){this.source===t?this.changeSource(e):this.target===t&&this.changeTarget(e)},reverse:function(){var t=this.source,e=this.target;return this.source=e,a.remove(t.outgoing,this),this.source.outgoing.push(this),this.target=t,a.remove(e.incoming,this),this.target.incoming.push(this),this},directTo:function(t){if(this.source!==t&&this.target!==t)throw"The given node is not incident with this link.";this.target!==t&&this.reverse()},createReverseEdge:function(){var t=this.clone();return t.reverse(),t.reversed=!0,t},clone:function(){var t=new A(this.source,this.target);return t}}),z=i.Class.extend({init:function(t){this.links=[],this.nodes=[],this.diagram=null,this._root=null,a.isDefined(t)?a.isString(t)?this.id=t:(this.diagram=t,this.id=t.id):this.id=x(),this.bounds=new p,this._hasCachedRelationships=!1,this.type="Graph"},cacheRelationships:function(t){if(a.isUndefined(t)&&(t=!1),!this._hasCachedRelationships||t){for(var e=0,i=this.nodes.length;e<i;e++){var n=this.nodes[e];n.children=this.getChildren(n),n.parents=this.getParents(n)}this._hasCachedRelationships=!0}},assignLevels:function(t,e,i){if(!t)throw"Start node not specified.";a.isUndefined(e)&&(e=0),this.cacheRelationships(),a.isUndefined(i)&&(i=new C,a.forEach(this.nodes,(function(t){i.add(t,!1)}))),i.set(t,!0),t.level=e;for(var n=t.children,s=0,r=n.length;s<r;s++){var o=n[s];o&&!i.get(o)&&this.assignLevels(o,e+1,i)}},root:function(t){if(a.isUndefined(t)){if(this._root)return this._root;var e=a.first(this.nodes,(function(t){return 0===t.incoming.length}));return e||a.first(this.nodes)}this._root=t},getConnectedComponents:function(){this.componentIndex=0,this.setItemIndices();for(var t=a.initArray(this.nodes.length,-1),e=0;e<this.nodes.length;e++)-1===t[e]&&(this._collectConnectedNodes(t,e),this.componentIndex++);var i,n=[];for(i=0;i<this.componentIndex;++i)n[i]=new z;for(i=0;i<t.length;++i){n[t[i]].addNodeAndOutgoings(this.nodes[i])}return n.sort((function(t,e){return e.nodes.length-t.nodes.length})),n},_collectConnectedNodes:function(t,e){t[e]=this.componentIndex;var i=this.nodes[e];a.forEach(i.links,(function(e){var n=e.getComplement(i).index;-1===t[n]&&this._collectConnectedNodes(t,n)}),this)},calcBounds:function(){if(this.isEmpty())return this.bounds=new p,this.bounds;for(var t=null,e=0,i=this.nodes.length;e<i;e++){var n=this.nodes[e];t=t?t.union(n.bounds()):n.bounds()}return this.bounds=t,this.bounds},getSpanningTree:function(t){var e,i,n=new z,s=new C;n.root=t.clone(),n.root.level=0,n.root.id=t.id,s.add(t,n.root),t.level=0;var r=[],o=[];n.nodes.push(n.root),r.push(t),o.push(t);for(var h=1;o.length>0;)for(var l=o.pop(),d=0;d<l.links.length;d++){var u=l.links[d].getComplement(l);if(!c(r,u)){u.level=l.level+1,h<u.level+1&&(h=u.level+1),c(o,u)||o.push(u),c(r,u)||r.push(u),s.containsKey(l)?e=s.get(l):((e=l.clone()).level=l.level,e.id=l.id,s.add(l,e)),s.containsKey(u)?i=s.get(u):((i=u.clone()).level=u.level,i.id=u.id,s.add(u,i));var p=new A(e,i);n.addLink(p)}}for(var f=[],g=0;g<h;g++)f.push([]);return a.forEach(n.nodes,(function(t){f[t.level].push(t)})),n.treeLevels=f,n.cacheRelationships(),n},takeRandomNode:function(e,i){if(a.isUndefined(e)&&(e=[]),a.isUndefined(i)&&(i=4),0===this.nodes.length)return null;if(1===this.nodes.length)return c(e,this.nodes[0])?null:this.nodes[0];var n=t.grep(this.nodes,(function(t){return!c(e,t)&&t.degree()<=i}));return a.isEmpty(n)?null:n[a.randomInteger(0,n.length)]},isEmpty:function(){return a.isEmpty(this.nodes)},isHealthy:function(){return a.all(this.links,(function(t){return c(this.nodes,t.source)&&c(this.nodes,t.target)}),this)},getParents:function(t){if(!this.hasNode(t))throw"The given node is not part of this graph.";return t.getParents()},getChildren:function(t){if(!this.hasNode(t))throw"The given node is not part of this graph.";return t.getChildren()},addLink:function(t,e,i){if(a.isUndefined(t))throw"The source of the link is not defined.";if(a.isUndefined(e)){if(a.isDefined(t.type)&&"Link"===t.type)return void this.addExistingLink(t);throw"The target of the link is not defined."}var n=this.getNode(t);a.isUndefined(n)&&(n=this.addNode(t));var s=this.getNode(e);a.isUndefined(s)&&(s=this.addNode(e));var r=new A(n,s);return a.isDefined(i)&&(r.owner=i),this.links.push(r),r},removeAllLinks:function(){for(;this.links.length>0;){var t=this.links[0];this.removeLink(t)}},addExistingLink:function(t){if(!this.hasLink(t)){if(this.links.push(t),this.hasNode(t.source.id)){var e=this.getNode(t.source.id);t.changeSource(e)}else this.addNode(t.source);if(this.hasNode(t.target.id)){var i=this.getNode(t.target.id);t.changeTarget(i)}else this.addNode(t.target)}},hasLink:function(t){if(a.isString(t))return a.any(this.links,(function(e){return e.id===t}));if("Link"===t.type)return c(this.links,t);throw"The given object is neither an identifier nor a Link."},getNode:function(t){if(a.isUndefined(t))throw"No identifier or Node specified.";return a.isString(t)?a.find(this.nodes,(function(e){return e.id==t})):this.hasNode(t)?t:null},hasNode:function(t){if(a.isString(t))return a.any(this.nodes,(function(e){return e.id===t}));if(a.isObject(t))return a.any(this.nodes,(function(e){return e===t}));throw"The identifier should be a Node or the Id (string) of a node."},removeNode:function(t){var e=t;if(a.isString(t)&&(e=this.getNode(t)),!a.isDefined(e))throw"The identifier should be a Node or the Id (string) of a node.";var i=e.links;e.links=[];for(var n=0,s=i.length;n<s;n++){var r=i[n];this.removeLink(r)}a.remove(this.nodes,e)},areConnected:function(t,e){return a.any(this.links,(function(i){return i.source==t&&i.target==e||i.source==e&&i.target==t}))},removeLink:function(t){a.remove(this.links,t),a.remove(t.source.outgoing,t),a.remove(t.source.links,t),a.remove(t.target.incoming,t),a.remove(t.target.links,t)},addNode:function(t,e,i){var n=null;if(!a.isDefined(t))throw"No Node or identifier for a new Node is given.";if(a.isString(t)){if(this.hasNode(t))return this.getNode(t);n=new P(t)}else{if(this.hasNode(t))return this.getNode(t);n=t}return a.isDefined(e)&&n.bounds(e),a.isDefined(i)&&(n.owner=i),this.nodes.push(n),n},addNodeAndOutgoings:function(t){c(this.nodes,t)||this.nodes.push(t);var e=t.outgoing;t.outgoing=[],a.forEach(e,(function(t){this.addExistingLink(t)}),this)},setItemIndices:function(){var t;for(t=0;t<this.nodes.length;++t)this.nodes[t].index=t;for(t=0;t<this.links.length;++t)this.links[t].index=t},clone:function(t){var e=new z,i=a.isDefined(t)&&!0===t;i&&(e.nodeMap=new C,e.linkMap=new C);var n=new C;return a.forEach(this.nodes,(function(t){var s=t.clone();n.set(t,s),e.nodes.push(s),i&&e.nodeMap.set(s,t)})),a.forEach(this.links,(function(t){if(n.containsKey(t.source)&&n.containsKey(t.target)){var s=e.addLink(n.get(t.source),n.get(t.target));i&&e.linkMap.set(s,t)}})),e},linearize:function(t){return z.Utils.linearize(this,t)},depthFirstTraversal:function(t,e){if(a.isUndefined(t))throw"You need to supply a starting node.";if(a.isUndefined(e))throw"You need to supply an action.";if(!this.hasNode(t))throw"The given start-node is not part of this graph";var i=this.getNode(t);this._dftIterator(i,e,[])},_dftIterator:function(t,e,i){e(t),i.push(t);for(var n=t.getChildren(),s=0,r=n.length;s<r;s++){var o=n[s];c(i,o)||this._dftIterator(o,e,i)}},breadthFirstTraversal:function(t,e){if(a.isUndefined(t))throw"You need to supply a starting node.";if(a.isUndefined(e))throw"You need to supply an action.";if(!this.hasNode(t))throw"The given start-node is not part of this graph";var i=this.getNode(t),n=new S,s=[];for(n.enqueue(i);n.length>0;){var r=n.dequeue();e(r),s.push(r);for(var o=r.getChildren(),h=0,l=o.length;h<l;h++){var d=o[h];c(s,d)||c(n,d)||n.enqueue(d)}}},_stronglyConnectedComponents:function(t,e,i,n,s,r,o){i.add(e,o),n.add(e,o),o++,r.push(e);for(var a,h=e.getChildren(),l=0,d=h.length;l<d;l++)a=h[l],i.containsKey(a)?c(r,a)&&n.add(e,Math.min(n.get(e),i.get(a))):(this._stronglyConnectedComponents(t,a,i,n,s,r,o),n.add(e,Math.min(n.get(e),n.get(a))));if(n.get(e)===i.get(e)){var u=[];do{a=r.pop(),u.push(a)}while(a!==e);(!t||u.length>1)&&s.push(u)}},findCycles:function(t){a.isUndefined(t)&&(t=!0);for(var e=new C,i=new C,n=[],s=[],r=0,o=this.nodes.length;r<o;r++){var h=this.nodes[r];e.containsKey(h)||this._stronglyConnectedComponents(t,h,e,i,n,s,0)}return n},isAcyclic:function(){return a.isEmpty(this.findCycles())},isSubGraph:function(t){var e=t.linearize(),i=this.linearize();return a.all(e,(function(t){return c(i,t)}))},makeAcyclic:function(){if(this.isEmpty()||this.nodes.length<=1||this.links.length<=1)return[];if(2==this.nodes.length){var t=[];if(this.links.length>1)for(var e=this.links[0].source,i=0,n=this.links.length;i<n;i++){var s=this.links[i];if(s.source!=e){var r=s.reverse();t.push(r)}}return t}var o=this.clone(!0),h=this.nodes.length,l=new C,c=function(t){return 0===t.outgoing.length?2-h:0===t.incoming.length?h-2:t.outgoing.length-t.incoming.length},d=function(t,e){var i=c(t);e.containsKey(i)||e.set(i,[]),e.get(i).push(t)};a.forEach(o.nodes,(function(t){d(t,l)}));for(var u=[],p=[];o.nodes.length>0;){var f,g,m;if(l.containsKey(2-h))for(var v=l.get(2-h);v.length>0;){g=v.pop();for(var y=0;y<g.links.length;y++){var b=g.links[y];f=b.getComplement(g),m=c(f),a.remove(l.get(m),f),f.removeLink(b),d(f,l)}a.remove(o.nodes,g),p.unshift(g)}if(l.containsKey(h-2))for(var w=l.get(h-2);w.length>0;){f=w.pop();for(var x=0;x<f.links.length;x++){var _=f.links[x];g=_.getComplement(f),m=c(g),a.remove(l.get(m),g),g.removeLink(_),d(g,l)}u.push(f),a.remove(o.nodes,f)}if(o.nodes.length>0)for(var k=h-3;k>2-h;k--)if(l.containsKey(k)&&l.get(k).length>0){for(var S=l.get(k).pop(),T=0;T<S.links.length;T++){var P=S.links[T],A=P.getComplement(S);m=c(A),a.remove(l.get(m),A),A.removeLink(P),d(A,l)}u.push(S),a.remove(o.nodes,S);break}}u=u.concat(p);for(var z=new C,D=0;D<this.nodes.length;D++)z.set(o.nodeMap.get(u[D]),D);var E=[];return a.forEach(this.links,(function(t){z.get(t.source)>z.get(t.target)&&(t.reverse(),E.push(t))})),E}});z.Predefined={EightGraph:function(){return z.Utils.parse(["1->2","2->3","3->4","4->1","3->5","5->6","6->7","7->3"])},Mindmap:function(){return z.Utils.parse(["0->1","0->2","0->3","0->4","0->5","1->6","1->7","7->8","2->9","9->10","9->11","3->12","12->13","13->14","4->15","4->16","15->17","15->18","18->19","18->20","14->21","14->22","5->23","23->24","23->25","6->26"])},ThreeGraph:function(){return z.Utils.parse(["1->2","2->3","3->1"])},BinaryTree:function(t){return a.isUndefined(t)&&(t=5),z.Utils.createBalancedTree(t,2)},Linear:function(t){return a.isUndefined(t)&&(t=10),z.Utils.createBalancedTree(t,1)},Tree:function(t,e){return z.Utils.createBalancedTree(t,e)},Forest:function(t,e,i){return z.Utils.createBalancedForest(t,e,i)},Workflow:function(){return z.Utils.parse(["0->1","1->2","2->3","1->4","4->3","3->5","5->6","6->3","6->7","5->4"])},Grid:function(t,e){var i=new n.Graph;if(t<=0&&e<=0)return i;for(var s=0;s<t+1;s++)for(var r=null,o=0;o<e+1;o++){var a=new P(s.toString()+"."+o.toString());if(i.addNode(a),r&&i.addLink(r,a),s>0){var h=i.getNode((s-1).toString()+"."+o.toString());i.addLink(h,a)}r=a}return i}},z.Utils={parse:function(t){for(var e,s=new n.Graph,r=t.slice(),o=0,h=r.length;o<h;o++){var l=r[o];if(a.isString(l)){if(l.indexOf("->")<0)throw"The link should be specified as 'a->b'.";var c=l.split("->");if(2!=c.length)throw"The link should be specified as 'a->b'.";e=new A(c[0],c[1]),s.addLink(e)}if(a.isObject(l)){if(!e)throw"Specification found before Link definition.";i.deepExtend(e,l)}}return s},linearize:function(t,e){if(a.isUndefined(t))throw"Expected an instance of a Graph object in slot one.";a.isUndefined(e)&&(e=!1);for(var i=[],n=0,s=t.links.length;n<s;n++){var r=t.links[n];i.push(r.source.id+"->"+r.target.id),e&&i.push({id:r.id})}return i},_addShape:function(t,e,s,r){return a.isUndefined(e)&&(e=new n.Point(0,0)),a.isUndefined(s)&&(s=x()),r=i.deepExtend({width:20,height:20,id:s,radius:10,background:"#778899",data:"circle",undoable:!1,x:e.x,y:e.y},r),t.addShape(r)},_addConnection:function(t,e,i,n){return t.connect(e,i,n)},createDiagramFromGraph:function(t,e,n,s){if(a.isUndefined(t))throw"The diagram surface is undefined.";if(a.isUndefined(e))throw"No graph specification defined.";a.isUndefined(n)&&(n=!0),a.isUndefined(s)&&(s=!1);for(var r,o,l=t.element.clientWidth||200,c=t.element.clientHeight||200,d=[],u=0,f=e.nodes.length;u<f;u++){var g=(r=e.nodes[u]).position;a.isUndefined(g)&&(g=a.isDefined(r.x)&&a.isDefined(r.y)?new h(r.x,r.y):new h(a.randomInteger(10,l-20),a.randomInteger(10,c-20)));var m={};"0"===r.id||s&&i.deepExtend(m,{width:150*Math.random()+20,height:80*Math.random()+50,data:"rectangle",background:"#778899"});var v=(o=this._addShape(t,g,r.id,m)).bounds();a.isDefined(v)&&(r.x=v.x,r.y=v.y,r.width=v.width,r.height=v.height),d[r.id]=o}for(var y=0;y<e.links.length;y++){var b=e.links[y],w=d[b.source.id];if(!a.isUndefined(w)){var x=d[b.target.id];a.isUndefined(x)||this._addConnection(t,w,x,{id:b.id})}}if(n){new t.SpringLayout(t).layoutGraph(e,{limitToView:!1});for(var _=0;_<e.nodes.length;_++)(o=d[(r=e.nodes[_]).id]).bounds(new p(r.x,r.y,r.width,r.height))}},createBalancedTree:function(t,e){a.isUndefined(t)&&(t=3),a.isUndefined(e)&&(e=3);var i,s=new n.Graph,r=-1,o=[];if(t<=0||e<=0)return s;var h=new P((++r).toString());s.addNode(h),s.root=h,o.push(h);for(var l=0;l<t;l++){i=[];for(var c=0;c<o.length;c++)for(var d=o[c],u=0;u<e;u++){var p=new P((++r).toString());s.addLink(d,p),i.push(p)}o=i}return s},createBalancedForest:function(t,e,i){a.isUndefined(t)&&(t=3),a.isUndefined(e)&&(e=3),a.isUndefined(i)&&(i=5);var s,r=new n.Graph,o=-1,h=[];if(t<=0||e<=0||i<=0)return r;for(var l=0;l<i;l++){var c=new P((++o).toString());r.addNode(c),h=[c];for(var d=0;d<t;d++){s=[];for(var u=0;u<h.length;u++)for(var p=h[u],f=0;f<e;f++){var g=new P((++o).toString());r.addLink(p,g),s.push(g)}h=s}}return r},createRandomConnectedGraph:function(t,e,i){a.isUndefined(t)&&(t=40),a.isUndefined(e)&&(e=4),a.isUndefined(i)&&(i=!1);var s=new n.Graph,r=-1;if(t<=0)return s;var o=new P((++r).toString());if(s.addNode(o),1===t)return s;if(t>1){for(var h=1;h<t;h++){var l=s.takeRandomNode([],e);if(!l)break;var c=s.addNode(h.toString());s.addLink(l,c)}if(!i&&t>1)for(var d=a.randomInteger(1,t),u=0;u<d;u++){var p=s.takeRandomNode([],e),f=s.takeRandomNode([],e);p&&f&&!s.areConnected(p,f)&&s.addLink(p,f)}return s}},randomDiagram:function(t,e,i,n,s){var r=t.Graph.Utils.createRandomConnectedGraph(e,i,n);z.Utils.createDiagramFromGraph(t,r,!1,s)}},i.deepExtend(n,{init:function(t){i.init(t,n.ui)},Point:h,Intersect:m,Geometry:_,Rect:p,Size:f,RectAlign:v,Matrix:b,MatrixVector:w,normalVariable:function(t,e){var i,n,s;do{s=(i=2*Math.random()-1)*i+(n=2*Math.random()-1)*n}while(!s||s>1);return t+e*i*Math.sqrt(-2*Math.log(s)/s)},randomId:x,Dictionary:C,HashTable:k,Queue:S,Set:T,Node:P,Link:A,Graph:z,PathDefiner:u})}(window.kendo.jQuery),function(t,e){var i=window.kendo,n=i.Observable,s=i.dataviz.diagram,r=i.Class,o=i.deepExtend,a=i.dataviz,h=s.Point,l=s.Rect,c=s.RectAlign,d=s.Matrix,u=s.Utils,p=u.isUndefined,f=s.MatrixVector,g="http://www.w3.org/2000/svg",m="http://www.w3.org/1999/xlink",v={none:"none",arrowStart:"ArrowStart",filledCircle:"FilledCircle",arrowEnd:"ArrowEnd"};s.Markers=v;var y=r.extend({init:function(t,e){this.x=t,this.y=e},toMatrix:function(){return d.scaling(this.x,this.y)},toString:function(){return i.format("scale({0},{1})",this.x,this.y)},invert:function(){return new y(1/this.x,1/this.y)}}),b=r.extend({init:function(t,e){this.x=t,this.y=e},toMatrixVector:function(){return new f(0,0,0,0,this.x,this.y)},toMatrix:function(){return d.translation(this.x,this.y)},toString:function(){return i.format("translate({0},{1})",this.x,this.y)},plus:function(t){this.x+=t.x,this.y+=t.y},times:function(t){this.x*=t,this.y*=t},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},normalize:function(){0!==this.Length&&this.times(1/this.length())},invert:function(){return new b(-this.x,-this.y)}}),w=r.extend({init:function(t,e,i){this.x=e||0,this.y=i||0,this.angle=t},toString:function(){return this.x&&this.y?i.format("rotate({0},{1},{2})",this.angle,this.x,this.y):i.format("rotate({0})",this.angle)},toMatrix:function(){return d.rotation(this.angle,this.x,this.y)},center:function(){return new h(this.x,this.y)},invert:function(){return new w(360-this.angle,this.x,this.y)}});w.create=function(t){return new w(t.angle,t.x,t.y)},w.parse=function(t){var e=t.slice(1,t.length-1).split(","),i=e[0],n=e[1],s=e[2];return new w(i,n,s)};var x=r.extend({init:function(t,e,i,n,s,r){this.translate=new b(t,e),void 0!==i&&void 0!==n&&(this.scale=new y(i,n)),void 0!==s&&(this.rotate=r?new w(s,r.x,r.y):new w(s))},toString:function(){var t=function(t){return t?t.toString():""};return t(this.translate)+t(this.rotate)+t(this.scale)},render:function(t){t.setAttribute("transform",this.toString())},toMatrix:function(){var t=d.unit();return this.translate&&(t=t.times(this.translate.toMatrix())),this.rotate&&(t=t.times(this.rotate.toMatrix())),this.scale&&(t=t.times(this.scale.toMatrix())),t},invert:function(){var t=this.rotate?this.rotate.invert():void 0,e=t?t.toMatrix():d.unit(),i=this.scale?this.scale.invert():void 0,n=i?i.toMatrix():d.unit(),s=new h(-this.translate.x,-this.translate.y);s=e.times(n).apply(s);var r=new b(s.x,s.y),o=new x;return o.translate=r,o.rotate=t,o.scale=i,o}});function _(t){var e=t._originWidth?t.options.width/t._originWidth:1,i=t._originHeight?t.options.height/t._originHeight:1,n=t.options.x||0,s=t.options.y||0;t._transform.translate=new b(n,s),t._transform.scale=new y(e,i),t._renderTransform()}var k=r.extend({init:function(t,e){this._originSize=l.empty(),this._visible=!0,this._transform=new x,this.domElement=t,this.options=o({},this.options,e),this.redraw()},visible:function(t){if(p(t))return this._visible;this._visible=t,this.domElement.setAttribute("visibility",t?"visible":"hidden")},setAtr:function(t,e){p(e)||p(this.options[e])||void 0!==this.options[e]&&this.domElement.setAttribute(t,this.options[e])},redraw:function(t){t&&o(this.options,t),this.setAtr("id","id")},position:function(t,e){return void 0!==e?(this.options.x=t,this.options.y=e,this._pos=new h(t,e)):t instanceof h&&(this._pos=t,this.options.x=this._pos.x,this.options.y=this._pos.y),this._transform.translate=new b(this.options.x,this.options.y),this._renderTransform(),this._pos},rotate:function(t,e){return void 0!==t&&(this._transform.rotate=new w(t,e.x,e.y),this._renderTransform()),this._transform.rotate||new w(0)},_renderTransform:function(){this._transform.render(this.domElement)},_hover:function(){},_measure:function(t){var e,i=this.domElement;if(!this._measured||t)try{if((e=i.getBBox()).width&&e.height)return this._originSize=new l(e.left,e.right,e.width,e.height),this._originWidth=e.width,this._originHeight=e.height,this._measured=!0,this._originSize}catch(t){}}}),C=k.extend({init:function(t,e){k.fn.init.call(this,t,e),t._kendoElement=this},options:{stroke:{color:"gray",width:1,dashType:"none"}},background:function(t){void 0!==t&&(this.options.background=t),this._background(this.options.background)},redraw:function(t){k.fn.redraw.call(this,t),this._setStroke(),this.setAtr("fill-opacity","fillOpacity"),this.background()},_setStroke:function(){var t=this.options.stroke||{};this.domElement.setAttribute("stroke",t.color),this.domElement.setAttribute("stroke-dasharray",this._renderDashType()),this.domElement.setAttribute("stroke-width",t.width)},_renderDashType:function(){var t=this.options.stroke||{},e=t.width||1,i=t.dashType;if(i&&"solid"!=i){var n,s=a.DASH_ARRAYS[i.toLowerCase()]||[],r=[];for(n=0;n<s.length;n++)r.push(s[n]*e);return r.join(" ")}},_hover:function(t){var e=this.options.background;t&&u.isDefined(this.options.hover.background)&&(e=this.options.hover.background),this._background(e)},_background:function(t){this.domElement.setAttribute("fill",this._getColor(t))},_getColor:function(t){var e;"none"!=t?e=new a.Color(t).toHex():e=t;return e}}),S=C.extend({init:function(t,e){C.fn.init.call(this,t,e)},redraw:function(t){C.fn.redraw.call(this,t),void 0!==this.options.x&&void 0!==this.options.y&&this.position(this.options.x,this.options.y),this.size()},size:function(t){return void 0!==t&&(this.options.width=t.width,this.options.height=t.height),this._sz={width:this.options.width,height:this.options.height},this.setAtr("width","width"),this.setAtr("height","height"),this.setAtr("background","background"),this._sz}}),T=C.extend({init:function(t){S.fn.init.call(this,document.createElementNS(g,"text"),t),this.domElement.setAttribute("dominant-baseline","hanging")},options:{stroke:{color:"none",width:0,dashType:"none"},fontSize:15,fontVariant:"normal",fontWeight:"normal",anchor:"middle",background:"black",align:""},content:function(t){return void 0!==t&&(this.domElement.textContent=this.options.text=t,this._align()),this.options.text},redraw:function(t){S.fn.redraw.call(this,t),this.setAtr("font-family","fontFamily"),this.setAtr("font-variant","fontVariant"),this.setAtr("font-size","fontSize"),this.setAtr("font-weight","fontWeight"),this.setAtr("font-style","fontStyle"),this.setAtr("text-decoration","textDecoration"),this.setAtr("fill","color"),this.content(this.options.text)},size:function(){_(this)},bounds:function(){var t=this.options;return new l(0,0,t.width,t.height)},align:function(t){this.options.align=t,this._align(t)},_align:function(){if(this.options.align){this._measure(!0);var t=this.options,e=this.bounds(),i=new c(e).align(this._originSize,t.align);this.position(i.topLeft()),t.width=i.width,t.height=i.height,this.size()}}}),P=n.extend({init:function(t,e){n.fn.init.call(this);this.domElement=t||this._createEditor(),this.options=o({},this.options,e),this.redraw()},visible:function(t){return void 0!==t&&(this._isVisible=t,this.domElement.style.visibility=t?"visible":"hidden"),this._isVisible},position:function(e,i){return void 0!==i?(this.options.x=e,this.options.y=i,this._pos=new h(e,i)):e instanceof h&&(this._pos=e,this.options.x=this._pos.x,this.options.y=this._pos.y),t(this.domElement).css({left:this._pos.x+"px",top:this._pos.y+"px"}),this._pos},size:function(e,i){var n=!1;return void 0!==i?(this._size={width:e,height:i},n=!0):e===Object(e)&&(this._size={width:e.width,height:e.height},n=!0),n&&(o(this.options,this._size),t(this.domElement).css({width:this._size.width+"px",height:this._size.height+"px"})),this._size},focus:function(){t(this.domElement).focus()},content:function(t){return p(t)||(this.domElement.value=this.options.text=t),this.domElement.value},redraw:function(t){this.options=o(this.options,t),this.content(this.options.text)},_createEditor:function(){var e=this;return t("<input type='text' class='textEditable' />").css({position:"absolute",zIndex:100,fontSize:"16px"}).on("mousedown mouseup click dblclick",(function(t){t.stopPropagation()})).on("keydown",(function(t){t.stopPropagation()})).on("keypress",(function(t){t.keyCode==i.keys.ENTER&&e.trigger("finishEdit",t),t.stopPropagation()})).on("focusout",(function(t){e.trigger("finishEdit",t),t.stopPropagation()}))[0]}}),A=S.extend({init:function(t){S.fn.init.call(this,document.createElementNS(g,"rect"),t)},options:{stroke:{},background:"none"},redraw:function(t){S.fn.redraw.call(this,t),this.setAtr("rx","cornerRadius"),this.setAtr("ry","cornerRadius"),this._setStroke()}}),z=C.extend({init:function(t){C.fn.init.call(this,document.createElementNS(g,"path"),t)},options:{autoSize:!0},data:function(t){if(!t)return this.options.data;this.options.data=t},size:function(){_(this)},redraw:function(t){C.fn.redraw.call(this,t),this.size(),this.setAtr("d","data"),this.options.startCap&&this.options.startCap!==v.none?this.domElement.setAttribute("marker-start","url(#"+this.options.startCap+")"):this.domElement.removeAttribute("marker-start"),this.options.endCap&&this.options.endCap!==v.none?this.domElement.setAttribute("marker-end","url(#"+this.options.endCap+")"):this.domElement.removeAttribute("marker-end"),this.domElement.parentNode&&-1!=navigator.appVersion.indexOf("MSIE 10")&&this.domElement.parentNode.insertBefore(this.domElement,this.domElement)}}),D=k.extend({init:function(t){var e;k.fn.init.call(this,document.createElementNS(g,"marker"),t);var i=this.options;i.path?e=new z(i.path):i.circle&&(e=new R(i.circle)),e&&this.domElement.appendChild(e.domElement)},redraw:function(t){k.fn.redraw.call(this,t);var e=this.options;e.ref&&(this.domElement.refX.baseVal.value=e.ref.x,this.domElement.refY.baseVal.value=e.ref.y),e.width&&(this.domElement.markerWidth.baseVal.value=e.width),e.height&&(this.domElement.markerHeight.baseVal.value=e.height),this.setAtr("orient","orientation"),this.setAtr("viewBox","viewBox")}}),E=k.extend({init:function(t){var e;k.fn.init.call(this,document.createElementNS(g,"mask"),t);var i=this.options;i.path?e=new z(i.path):i.circle?e=new R(i.circle):i.rectangle&&(e=new A(i.rectangle)),e&&this.domElement.appendChild(e.domElement),this.setAtr("id","id")},redraw:function(t){k.fn.redraw.call(this,t);var e=this.options;e.width&&(this.domElement.width.baseVal.value=e.width),e.height&&(this.domElement.height.baseVal.value=e.height)}}),M=C.extend({init:function(t){C.fn.init.call(this,document.createElementNS(g,"line"),t),this.options.from=this.options.from||new h,this.options.to=this.options.to||new h},redraw:function(t){C.fn.redraw.call(this,t),this.options.from&&(this.domElement.setAttribute("x1",this.options.from.x.toString()),this.domElement.setAttribute("y1",this.options.from.y.toString())),this.options.to&&(this.domElement.setAttribute("x2",this.options.to.x.toString()),this.domElement.setAttribute("y2",this.options.to.y.toString())),this.options.startCap&&this.options.startCap!==v.none?this.domElement.setAttribute("marker-start","url(#"+this.options.startCap+")"):this.domElement.removeAttribute("marker-start"),this.options.endCap&&this.options.endCap!==v.none?this.domElement.setAttribute("marker-end","url(#"+this.options.endCap+")"):this.domElement.removeAttribute("marker-end"),this.domElement.parentNode&&-1!=navigator.appVersion.indexOf("MSIE 10")&&this.domElement.parentNode.insertBefore(this.domElement,this.domElement)}}),L=C.extend({init:function(t){C.fn.init.call(this,document.createElementNS(g,"polyline"),t),u.isDefined(t)&&null!==t.points&&this.points(this.options.points),this.background("none")},refresh:function(){if(null!==this._points&&0!==this._points.length){var t,e="";for(t=0;t<this._points.length;t++)e+=" "+this._points[t].x+","+this._points[t].y;this.domElement.setAttribute("points",e.trim()),this.domElement.setAttribute("stroke","Orange"),this.domElement.setAttribute("stroke-width","5")}},points:function(t){if(p(t))return this._points;this._points=t,this.refresh()},redraw:function(){this.refresh()},options:{stroke:{color:"gray",width:1},backgrounds:"none",points:[]}}),I=k.extend({init:function(t){k.fn.init.call(this,document.createElementNS(g,"image"),t)},options:{autoSize:!0},redraw:function(t){k.fn.redraw.call(this,t),this.domElement.setAttributeNS(m,"href",this.options.source),this.setAtr("width","width"),this.setAtr("height","height"),this.setAtr("x","x"),this.setAtr("y","x")}}),B=k.extend({init:function(t){k.fn.init.call(this,document.createElementNS(g,"g"),t),this.width=this.options.width,this.height=this.options.height},options:{autoSize:!0},append:function(t){this.domElement.appendChild(t.domElement),t.canvas=this.canvas},remove:function(t){t.domElement?this.domElement.removeChild(t.domElement):this.domElement.removeChild(t)},clear:function(){for(;this.domElement.lastChild;)this.domElement.removeChild(this.domElement.lastChild)},toFront:function(t){var e,i,n=this.domElement;for(i=0;i<t.length;i++)e=t[i],n.appendChild(e.domElement)},toBack:function(t){var e,i;for(i=0;i<t.length;i++)e=t[i],this.domElement.insertBefore(e.domElement,this.domElement.firstChild)},toIndex:function(t,e){var i,n,s;for(n=0;n<t.length;n++)i=t[n],s=e[n],this.domElement.insertBefore(i.domElement,this.domElement.children[s])},size:function(){_(this)},redraw:function(t){k.fn.redraw.call(this,t),this.size()}}),R=C.extend({init:function(t){t&&t.radius&&(t.width=2*t.radius,t.height=2*t.radius),C.fn.init.call(this,document.createElementNS(g,"ellipse"),t)},redraw:function(t){t&&u.isNumber(t.width)&&u.isNumber(t.height)&&(t.center=new h(t.width/2,t.height/2)),C.fn.redraw.call(this,t);var e=this.domElement,i=this.options,n=i.width/2||i.rx,s=i.height/2||i.rx;n&&s&&(e.rx.baseVal.value=n,e.ry.baseVal.value=s),i.center?(e.cx.baseVal.value=i.center.x,e.cy.baseVal.value=i.center.y):u.isDefined(i.x)&&u.isDefined(i.y)?(e.cx.baseVal.value=i.x+n,e.cy.baseVal.value=i.y+s):(e.cx.baseVal.value=n,e.cy.baseVal.value=s)}}),O=S.extend({init:function(e,i){S.fn.init.call(this,document.createElementNS(g,"svg"),i),this.markers=[],this.gradients=[],this.visuals=[],this.defsNode=document.createElementNS(g,"defs"),this.domElement.appendChild(this.defsNode),e.context?this.element=e.context:this.element=e,t(this.domElement).css({width:this.options.width,height:this.options.height}),this.element.appendChild(this.domElement),this.domElement.style.background=this.options.background,this.domElement.setAttribute("xmlns",g),this.domElement.setAttribute("xmlns:xlink",m),this.element.setAttribute("tabindex","0"),this._markers(),this.masks=[]},options:{width:"100%",height:"100%",background:"none",id:"SVGRoot"},bounds:function(){var t=this.domElement.getBBox();return new l(0,0,t.width,t.height)},focus:function(){this.element.focus()},size:function(){var t=this,e=S.fn.size.apply(t,arguments),i=this.viewBox();return this._styledSize(t.domElement),i.width=e.width,i.height=e.height,this.viewBox(i),e},_styledSize:function(e){var i=this._sz;t(e).css(i)},viewBox:function(t){if(p(t))return this.domElement.viewBox.baseVal?l.toRect(this.domElement.viewBox.baseVal):l.empty();t=l.toRect(t),isNaN(t.width)||isNaN(t.height)||this.domElement.setAttribute("viewBox",t.toString(","))},append:function(t){return this.domElement.appendChild(t.domElement),t.canvas=this,this.visuals.push(t),this},remove:function(t){if(u.indexOf(this.visuals,t)>=0)return this.domElement.removeChild(t.domElement),t.canvas=void 0,u.remove(this.visuals,t),this},insertBefore:function(t,e){return this.domElement.insertBefore(t.domElement,e.domElement),t.canvas=this,this.visuals.push(t),this},addMarker:function(t){this.defsNode.appendChild(t.domElement),this.markers.push(t)},removeMarker:function(t){t&&u.contains.contains(this.markers,t)&&(this.defsNode.removeChild(t.domElement),u.remove(this.markers,t))},addMask:function(t){this.defsNode.appendChild(t.domElement),this.masks.push(t)},removeMask:function(t){t&&u.contains(this.masks,t)&&(this.defsNode.removeChild(t.domElement),u.remove(this.masks,t))},removeGradient:function(t){t&&u.contains(this.gradients,t)&&(this.defsNode.removeChild(t.domElement),u.remove(this.gradients,t))},addGradient:function(t){this.defsNode.appendChild(t.domElement),this.gradients.push(t)},clearMarkers:function(){var t;if(0!==this.markers.length){for(t=0;t<this.markers.length;t++)this.defsNode.removeChild(this.markers[t].domElement);this.markers=[]}},clear:function(){for(;this.visuals.length;)this.remove(this.visuals[0])},mask:function(t){null===t?this.domElement.removeAttribute("mask"):this.domElement.setAttribute("mask","url(#"+t.domElement.id+")")},_markers:function(){this.addMarker(new D({path:{data:"M 0 0 L 10 5 L 0 10 L 3 5 z",background:"Black"},id:v.arrowEnd,orientation:"auto",width:10,height:10,ref:new h(10,5)})),this.addMarker(new D({path:{data:"M 0 5 L 10 0 L 7 5 L 10 10 z",background:"Black"},id:v.arrowStart,orientation:"auto",width:10,height:10,ref:new h(0,5)})),this.addMarker(new D({circle:{width:6,height:6,center:new h(5,5),stroke:{width:1},background:"black"},width:10,height:10,id:v.filledCircle,ref:new h(5,5),orientation:"auto"}))},destroy:function(e){e&&t(this.element).remove()}});i.deepExtend(s,{init:function(t){i.init(t,s.ui)},Scale:y,Translation:b,Rotation:w,Circle:R,Group:B,Rectangle:A,Canvas:O,Path:z,Line:M,Marker:D,Polyline:L,CompositeTransform:x,TextBlock:T,TextBlockEditor:P,Image:I,Mask:E,Visual:S,VisualBase:C})}(window.kendo.jQuery),function(t,e){var i=window.kendo,n=i.dataviz.diagram,s=i.Class,r=n.Group,o=n.TextBlock,a=n.Rect,h=n.Rectangle,l=n.Utils,c=l.isUndefined,d=n.Point,u=n.Circle,p=n.Path,f=n.Ticker,g=i.deepExtend,m=i.ui.Movable,v={arrow:"default",grip:"pointer",cross:"pointer",add:"pointer",move:"move",select:"pointer",south:"s-resize",east:"e-resize",west:"w-resize",north:"n-resize",rowresize:"row-resize",colresize:"col-resize"},y=["Top","Right","Bottom","Left","Auto"];function b(t,e){t.isSelected?e.ctrlKey&&t.select(!1):t.diagram.select(t,{addToSelection:e.ctrlKey})}n.Cursors=v;var w=i.Class.extend({init:function(t){this.layoutState=t,this.diagram=t.diagram},initState:function(){this.froms=[],this.tos=[],this.subjects=[],this.layoutState.nodeMap.forEach((function(t,e){var i=this.diagram.getShapeById(t);i&&(this.subjects.push(i),this.froms.push(i.bounds().topLeft()),this.tos.push(e.topLeft()))}),this)},update:function(t){if(!(this.subjects.length<=0))for(var e=0;e<this.subjects.length;e++)this.subjects[e].position(new d(this.froms[e].x+(this.tos[e].x-this.froms[e].x)*t,this.froms[e].y+(this.tos[e].y-this.froms[e].y)*t))}}),x=s.extend({init:function(t,e,i){c(i)?this.animate=!1:this.animate=i,this._initialState=t,this._finalState=e,this.title="Diagram layout"},undo:function(){this.setState(this._initialState)},redo:function(){this.setState(this._finalState)},setState:function(t){var e=t.diagram;if(this.animate){t.linkMap.forEach((function(t,i){var n=e.getShapeById(t);n.visible(!1),n&&n.points(i)}));var i=new f;i.addAdapter(new w(t)),i.onComplete((function(){t.linkMap.forEach((function(t){e.getShapeById(t).visible(!0)}))})),i.play()}else t.nodeMap.forEach((function(t,i){var n=e.getShapeById(t);n&&n.position(i.topLeft())})),t.linkMap.forEach((function(t,i){var n=e.getShapeById(t);n&&n.points(i)}))}}),_=s.extend({init:function(t){this.units=[],this.title="Composite unit",void 0!==t&&this.units.push(t)},add:function(t){this.units.push(t)},undo:function(){for(var t=0;t<this.units.length;t++)this.units[t].undo()},redo:function(){for(var t=0;t<this.units.length;t++)this.units[t].redo()}}),k=s.extend({init:function(t,e,i){this.item=t,this._undoContent=e,this._redoContent=i,this.title="Content Editing",this.rebuild=this.item.options.hasOwnProperty("rebuild")?this.item.options.rebuild:null},undo:function(){this.item.content(this._undoContent),this.rebuild&&this.rebuild.call(this.item,this.item)},redo:function(){this.item.content(this._redoContent),this.rebuild&&this.rebuild.call(this.item,this.item)}}),C=s.extend({init:function(t,e,i){this.item=t,this._redoSource=e,this._redoTarget=i,this._undoSource=t.source(),this._undoTarget=t.target(),this.title="Connection Editing"},undo:function(){void 0!==this._undoSource&&this.item.source(this._undoSource,!1),void 0!==this._undoTarget&&this.item.target(this._undoTarget,!1)},redo:function(){void 0!==this._redoSource&&this.item.source(this._redoSource,!1),void 0!==this._redoTarget&&this.item.target(this._redoTarget,!1)}}),S=s.extend({init:function(t,e,i){this.item=t,this._undoSource=e,this._undoTarget=i,this._redoSource=t.source(),this._redoTarget=t.target(),this.title="Connection Editing"},undo:function(){this.item.source(this._undoSource,!1),this.item.target(this._undoTarget,!1)},redo:function(){this.item.source(this._redoSource,!1),this.item.target(this._redoTarget,!1)}}),T=s.extend({init:function(t){this.connection=t,this.diagram=t.diagram,this.targetConnector=t.targetConnector,this.title="Delete connection"},undo:function(){this.diagram.addConnection(this.connection,!1)},redo:function(){this.diagram.remove(this.connection,!1)}}),P=s.extend({init:function(t){this.shape=t,this.diagram=t.diagram,this.title="Deletion"},undo:function(){this.diagram.addShape(this.shape,{undoable:!1}),this.shape.select(!1)},redo:function(){this.shape.select(!1),this.diagram.remove(this.shape,!1)}}),A=s.extend({init:function(t,e,i){this.shapes=t,this.undoStates=e,this.title="Transformation",this.redoStates=[],this.adorner=i;for(var n=0;n<this.shapes.length;n++){var s=this.shapes[n];this.redoStates.push(s.bounds())}},undo:function(){for(var t=0;t<this.shapes.length;t++){var e=this.shapes[t];e.bounds(this.undoStates[t]),e.hasOwnProperty("layout")&&e.layout(e,this.redoStates[t],this.undoStates[t])}this.adorner&&(this.adorner.refreshBounds(),this.adorner.refresh())},redo:function(){for(var t=0;t<this.shapes.length;t++){var e=this.shapes[t];e.bounds(this.redoStates[t]),e.hasOwnProperty("layout")&&e.layout(e,this.undoStates[t],this.redoStates[t])}this.adorner&&(this.adorner.refreshBounds(),this.adorner.refresh())}}),z=s.extend({init:function(t,e){this.connection=t,this.diagram=e,this.title="New connection"},undo:function(){this.diagram.remove(this.connection,!1)},redo:function(){this.diagram.addConnection(this.connection,!1)}}),D=s.extend({init:function(t,e){this.shape=t,this.diagram=e,this.title="New shape"},undo:function(){this.diagram.remove(this.shape,!1)},redo:function(){this.diagram.addShape(this.shape,{undoable:!1})}}),E=s.extend({init:function(t,e,i){this.initial=t,this.finalPos=e,this.diagram=i,this.title="Pan Unit"},undo:function(){this.diagram.pan(this.initial)},redo:function(){this.diagram.pan(this.finalPos)}}),M=s.extend({init:function(t,e,i){this.shapes=e,this.undoRotates=i,this.title="Rotation",this.redoRotates=[],this.redoAngle=t._angle,this.adorner=t,this.center=t._innerBounds.center();for(var n=0;n<this.shapes.length;n++){var s=this.shapes[n];this.redoRotates.push(s.rotate().angle)}},undo:function(){var t,e;for(t=0;t<this.shapes.length;t++)(e=this.shapes[t]).rotate(this.undoRotates[t],this.center),e.hasOwnProperty("layout")&&e.layout(e);this.adorner&&(this.adorner._initialize(),this.adorner.refresh())},redo:function(){var t,e;for(t=0;t<this.shapes.length;t++)(e=this.shapes[t]).rotate(this.redoRotates[t],this.center),e.hasOwnProperty("layout")&&e.layout(e);this.adorner&&(this.adorner._initialize(),this.adorner.refresh())}}),L=s.extend({init:function(t,e,i){this.diagram=t,this.indices=i,this.items=e,this.title="Rotate Unit"},undo:function(){this.diagram._toIndex(this.items,this.indices)},redo:function(){this.diagram.toFront(this.items,!1)}}),I=s.extend({init:function(t,e,i){this.diagram=t,this.indices=i,this.items=e,this.title="Rotate Unit"},undo:function(){this.diagram._toIndex(this.items,this.indices)},redo:function(){this.diagram.toBack(this.items,!1)}}),B=s.extend({init:function(){this.stack=[],this.index=0,this.capacity=100},begin:function(){this.composite=new _},cancel:function(){this.composite=void 0},commit:function(){this.composite.units.length>0&&this._restart(this.composite),this.composite=void 0},addCompositeItem:function(t){this.composite?this.composite.add(t):this.add(t)},add:function(t,e){this._restart(t,e)},count:function(){return this.stack.length},undo:function(){this.index>0&&(this.index--,this.stack[this.index].undo())},redo:function(){this.stack.length>0&&this.index<this.stack.length&&(this.stack[this.index].redo(),this.index++)},_restart:function(t,e){this.stack.splice(this.index,this.stack.length-this.index),this.stack.push(t),c(e)||e&&!0===e?this.redo():this.index++,this.stack.length>this.capacity&&(this.stack.splice(0,this.stack.length-this.capacity),this.index=this.capacity)},clear:function(){this.stack=[],this.index=0}}),R=s.extend({init:function(t){this.toolService=t},start:function(){},move:function(){},end:function(){},doubleClick:function(){},tryActivate:function(t,e){return!1},getCursor:function(){return v.arrow}}),O=R.extend({init:function(t){R.fn.init.call(this,t)},tryActivate:function(t,e){return void 0===this.toolService.hoveredItem&&e.ctrlKey},start:function(t){this.toolService.isPanning=!0,this.panStart=this.toolService.diagram._pan,this.panOffset=t,this.panDelta=new d},move:function(t){var e=this.toolService.diagram;this.panDelta=t.plus(this.panDelta).minus(this.panOffset),e.pan(this.panStart.plus(this.panDelta),{delta:t.minus(this.panOffset).times(1/this.toolService.diagram.zoom())})},end:function(){var t=this.toolService.diagram;t.undoRedoService.begin(),t.undoRedoService.add(new E(this.panStart,t._pan,t)),t.undoRedoService.commit(),this.toolService.isPanning=!1},getCursor:function(){return v.move}}),N=R.extend({init:function(e){R.fn.init.call(this,e);var i=this.toolService.diagram,n=i.canvas,s=i.scroller=this.scroller=t(i.scrollable).kendoMobileScroller({scroll:t.proxy(this._move,this)}).data("kendoMobileScroller");this.movableCanvas=new m(n.element);var r=function(t,e,i){t.makeVirtual(),t.virtualSize(e||-2e4,i||2e4)};r(s.dimensions.x),r(s.dimensions.y),s.disable()},tryActivate:function(t,e){return void 0===this.toolService.hoveredItem&&e.ctrlKey},start:function(){var t=this.toolService.diagram.canvas.size();this.scroller.enable(),this.currentCanvasSize=t},move:function(){},_move:function(t){var e=this.toolService.diagram,i=e.canvas,n=this.currentCanvasSize||i.size(),s=new d(t.scrollLeft,t.scrollTop),r=new a(s.x,s.y,parseInt(n.width,10),parseInt(n.height,10));e._storePan(s.times(-1)),this.movableCanvas.moveTo(s),i.viewBox(r)},end:function(){this.currentCanvasSize=void 0,this.scroller.disable()},getCursor:function(){return v.move}}),V=s.extend({init:function(t){this.toolService=t},tryActivate:function(t,e){return!0},start:function(t,e){var i=this.toolService.diagram,n=this.toolService.hoveredItem;n&&(b(n,e),n.adorner&&(this.adorner=n.adorner,this.handle=this.adorner._hitTest(t))),this.handle||(this.handle=i._resizingAdorner._hitTest(t),this.handle&&(this.adorner=i._resizingAdorner)),this.adorner&&this.adorner.start(t)},move:function(t){this.adorner&&this.adorner.move(this.handle,t)},end:function(t,e){var i,n=this.toolService.diagram,s=this.toolService;this.adorner&&(i=this.adorner.stop())&&n.undoRedoService.add(i,!1),s.hoveredItem&&this.toolService.triggerClick({item:s.hoveredItem,point:t,meta:e}),this.adorner=void 0,this.handle=void 0},getCursor:function(t){return this.toolService.hoveredItem?this.toolService.hoveredItem._getCursor(t):v.arrow}}),F=s.extend({init:function(t){this.toolService=t},tryActivate:function(t,e){return this.toolService.diagram._canRectSelect()&&void 0===this.toolService.hoveredItem&&void 0===this.toolService.hoveredAdorner},start:function(t){var e=this.toolService.diagram;e.select(!1),e.selector.start(t)},move:function(t){this.toolService.diagram.selector.move(t)},end:function(t,e){var i=this.toolService.diagram,n=this.toolService.hoveredItem,s=i.selector.bounds();n&&n.isSelected||e.ctrlKey||i.select(!1),s.isEmpty()||i.select(s),i.selector.end()},getCursor:function(){return v.arrow}}),H=s.extend({init:function(t){this.toolService=t,this.type="ConnectionTool"},tryActivate:function(t,e){return this.toolService._hoveredConnector&&!e.ctrlKey},start:function(t,e){var i=this.toolService.diagram,n=this.toolService._hoveredConnector,s=i.connect(n._c,t);this.toolService._connectionManipulation(s,n._c.shape,!0),this.toolService._removeHover(),b(this.toolService.activeConnection,e)},move:function(t){return this.toolService.activeConnection.target(t),!0},end:function(){var t=this.toolService.activeConnection,e=this.toolService.hoveredItem,i=this.toolService._hoveredConnector;i&&i._c!=t.sourceConnector?t.target(i._c):e&&t.target(e),this.toolService._connectionManipulation()},getCursor:function(){return v.arrow}}),U=s.extend({init:function(t){this.toolService=t,this.type="ConnectionTool"},tryActivate:function(t,e){var i=this.toolService.hoveredItem,n=i&&i.path;return n&&(this._c=i),n},start:function(t,e){b(this._c,e),this.handle=this._c.adorner._hitTest(t),this._c.adorner.start(t)},move:function(t){return this._c.adorner.move(this.handle,t),!0},end:function(t,e){this.toolService.triggerClick({item:this._c,point:t,meta:e});var i=this._c.adorner.stop(t);this.toolService.diagram.undoRedoService.add(i,!1)},getCursor:function(){return v.move}}),$=R.extend({init:function(t){R.fn.init.call(this,t)},doubleClick:function(){this.toolService.diagram.editor(this.toolService.hoveredItem)},tryActivate:function(t,e){return e.doubleClick&&this.toolService.hoveredItem}});function j(t,e){return e.charCodeAt(0)==t||e.toUpperCase().charCodeAt(0)==t}var G=s.extend({init:function(t){this.diagram=t,this.tools=[new $(this),t.options.useScroller?new N(this):new O(this),new U(this),new H(this),new F(this),new V(this)],this.activeTool=void 0},start:function(t,e){return e=g({},e),this._updateHoveredItem(t),this._activateTool(t,e),this.activeTool.start(t,e),this._updateCursor(t),this.diagram.focus(),this.startPoint=t,!0},move:function(t,e){e=g({},e);var i=!0;return this.activeTool&&(i=this.activeTool.move(t,e)),i&&this._updateHoveredItem(t),this._updateCursor(t),!0},end:function(t,e){return e=g({},e),this.activeTool&&this.activeTool.end(t,e),this.activeTool=void 0,this._updateCursor(t),!0},doubleClick:function(t,e){this._activateTool(t,g(e,{doubleClick:!0})),this.activeTool.doubleClick&&this.activeTool.doubleClick(t,e),this._updateCursor(t)},keyDown:function(t,e){var i=this.diagram;if(!(e=g({ctrlKey:!1,metaKey:!1,altKey:!1},e)).ctrlKey&&!e.metaKey||e.altKey){if(46===t||8===t)return i.remove(i.select(),!0),!0;if(27===t)return this._discardNewConnection(),i.select(!1),!0}else{if(j(t,"a"))return i.select("All"),!0;if(j(t,"z"))return i.undo(),!0;if(j(t,"y"))return i.redo(),!0;j(t,"c")?i.copy():j(t,"x")?i.cut():j(t,"v")?i.paste():j(t,"l")?i.layout():j(t,"d")&&(i.copy(),i.paste())}},wheel:function(t,e){var i=this.diagram,n=e.delta,s=i.zoom(),r=i.options.zoomRate,o={location:t,meta:e,zoom:s};return i.trigger("zoomStart",o),n<0?s*=r:s/=r,s=Math.round(10*Math.max(.7,Math.min(2,s)))/10,o.zoom=s,i.zoom(s,o),i.trigger("zoomEnd",o),!0},setTool:function(t,e){t.toolService=this,this.tools[e]=t},triggerClick:function(t){this.startPoint.equals(t.point)&&this.diagram.trigger("click",t)},_discardNewConnection:function(){this.newConnection&&(this.diagram.remove(this.newConnection),this.newConnection=void 0)},_activateTool:function(t,e){for(var i=0;i<this.tools.length;i++){var n=this.tools[i];if(n.tryActivate(t,e)){this.activeTool=n;break}}},_updateCursor:function(e){var i=this.activeTool?this.activeTool.getCursor(e):this.hoveredAdorner?this.hoveredAdorner._getCursor(e):this.hoveredItem?this.hoveredItem._getCursor(e):v.arrow;t(this.diagram.canvas.domElement).css({cursor:i})},_connectionManipulation:function(t,e,i){this.activeConnection=t,this.disabledShape=e,this.newConnection=i?this.activeConnection:void 0},_updateHoveredItem:function(t){var e=this._hitTest(t);e==this.hoveredItem||this.disabledShape&&e==this.disabledShape||(this.hoveredItem&&this.hoveredItem._hover(!1),e&&e.options.enable?(this.hoveredItem=e,this.hoveredItem._hover(!0)):this.hoveredItem=void 0)},_removeHover:function(){this.hoveredItem&&(this.hoveredItem._hover(!1),this.hoveredItem=void 0)},_hitTest:function(t){var e,i,s,r=this.diagram;if(this._hoveredConnector&&(this._hoveredConnector._hover(!1),this._hoveredConnector=void 0),r._connectorsAdorner._visible&&(e=r._connectorsAdorner._hitTest(t)))return e;if(e=this.diagram._resizingAdorner._hitTest(t)){if(this.hoveredAdorner=r._resizingAdorner,0!==e.x&&0!==e.y)return;e=void 0}else this.hoveredAdorner=void 0;if(!this.activeTool||"ConnectionTool"!==this.activeTool.type){var o=[];for(s=0;s<r._selectedItems.length;s++)(i=r._selectedItems[s])instanceof n.Connection&&o.push(i);e=this._hitTestItems(o,t)}return e||this._hitTestItems(r.shapes,t)||this._hitTestItems(r.connections,t)},_hitTestItems:function(t,e){var i,n;for(i=t.length-1;i>=0;i--)if(n=t[i]._hitTest(e))return n}}),W=i.Class.extend({init:function(){}}),q=W.extend({init:function(t){W.fn.init.call(this),this.connection=t},hitTest:function(t){return!!this.getBounds().inflate(10).contains(t)&&n.Geometry.distanceToPolyline(t,this.connection.allPoints())<10},getBounds:function(){for(var t=this.connection.allPoints(),e=t[0],i=t[t.length-1],n=Math.max(e.x,i.x),s=Math.min(e.x,i.x),r=Math.min(e.y,i.y),o=Math.max(e.y,i.y),h=1;h<t.length-1;++h)n=Math.max(n,t[h].x),s=Math.min(s,t[h].x),r=Math.min(r,t[h].y),o=Math.max(o,t[h].y);return new a(s,r,n-s,o-r)}}),Y=q.extend({init:function(t){q.fn.init.call(this),this.connection=t},route:function(){}}),Q=q.extend({init:function(t){q.fn.init.call(this),this.connection=t},route:function(){var t,e,i=this.connection,n=this.connection.sourcePoint(),s=this.connection.targetPoint(),r=[n,n,s,s],o=s.x-n.x,a=s.y-n.y,h=r.length,c=null,u=null;if(l.isDefined(i._resolvedSourceConnector)&&(c=i._resolvedSourceConnector.options.name),l.isDefined(i._resolvedTargetConnector)&&(u=i._resolvedTargetConnector.options.name),null!==c&&null!==u&&l.contains(y,c)&&l.contains(y,u))"Top"===c||"Bottom"==c?"Top"==u||"Bottom"==u?this.connection.points([new d(n.x,n.y+a/2),new d(s.x,n.y+a/2)]):this.connection.points([new d(n.x,n.y+a)]):"Left"==u||"Right"==u?this.connection.points([new d(n.x+o/2,n.y),new d(n.x+o/2,n.y+a)]):this.connection.points([new d(s.x,n.y)]);else{this.connection.cascadeStartHorizontal=function(){if(null!==c){if("Right"===c||"Left"===c)return!0;if("Top"===c||"Bottom"===c)return!1}return Math.abs(n.x-s.x)>Math.abs(n.y-s.y)}(this.connection);for(var p=1;p<h-1;++p)i.cascadeStartHorizontal?p%2!=0?(t=o/(h/2),e=0):(t=0,e=a/((h-1)/2)):p%2!=0?(t=0,e=a/(h/2)):(t=o/((h-1)/2),e=0),r[p]=new d(r[p-1].x+t,r[p-1].y+e);p--,i.cascadeStartHorizontal&&p%2!=0||!i.cascadeStartHorizontal&&p%2==0?r[h-2]=new d(r[h-1].x,r[h-2].y):r[h-2]=new d(r[h-2].x,r[h-1].y),this.connection.points([r[1],r[2]])}}}),X=s.extend({init:function(t,e){this.diagram=t,this.options=g({},this.options,e),this.visual=new r,this.diagram._adorners.push(this)},refresh:function(){}}),Z=X.extend({init:function(t,e){var i;this.connection=t,i=this.connection.diagram,this._ts=i.toolService,X.fn.init.call(this,i,e);var n=this.connection.sourcePoint(),s=this.connection.targetPoint();this.spVisual=new u(g(this.options.handles,{center:n})),this.epVisual=new u(g(this.options.handles,{center:s})),this.visual.append(this.spVisual),this.visual.append(this.epVisual)},options:{handles:{}},_getCursor:function(){return v.move},start:function(t){switch(this.handle=this._hitTest(t),this.startPoint=t,this._initialSource=this.connection.source(),this._initialTarget=this.connection.target(),this.handle){case-1:this.connection.targetConnector&&this._ts._connectionManipulation(this.connection,this.connection.targetConnector.shape);break;case 1:this.connection.sourceConnector&&this._ts._connectionManipulation(this.connection,this.connection.sourceConnector.shape)}},move:function(t,e){switch(t){case-1:this.connection.source(e);break;case 1:this.connection.target(e);break;default:var i=e.minus(this.startPoint);this.startPoint=e,this.connection.sourceConnector||this.connection.source(this.connection.sourcePoint().plus(i)),this.connection.targetConnector||this.connection.target(this.connection.targetPoint().plus(i))}return this.refresh(),!0},stop:function(t){var e,i=this.diagram.toolService,n=i.hoveredItem;if(e=i._hoveredConnector?i._hoveredConnector._c:n&&!n.line?n:t,void 0!==this.handle)switch(this.handle){case-1:this.connection.source(e);break;case 1:this.connection.target(e)}return this.handle=void 0,this._ts._connectionManipulation(),new S(this.connection,this._initialSource,this._initialTarget)},_hitTest:function(t){var e=this.connection.sourcePoint(),i=this.connection.targetPoint(),n=this.options.handles.width/2,s=this.options.handles.height/2,r=new a(e.x,e.y).inflate(n,s),o=new a(i.x,i.y).inflate(n,s);return r.contains(t)?-1:o.contains(t)?1:0},refresh:function(){this.spVisual.redraw({center:this.diagram.modelToLayer(this.connection.sourcePoint())}),this.epVisual.redraw({center:this.diagram.modelToLayer(this.connection.targetPoint())})}}),K=X.extend({init:function(t,e){var i=this;X.fn.init.call(i,t,e),i._refreshHandler=function(t){t.item==i.shape&&i.refresh()}},show:function(t){var e,i,n;for(this._visible=!0,this.shape=t,this.diagram.bind("itemBoundsChange",this._refreshHandler),e=t.connectors.length,this.connectors=[],this.visual.clear(),i=0;i<e;i++)n=new et(t.connectors[i]),this.connectors.push(n),this.visual.append(n.visual);this.visual.visible(!0),this.refresh()},destroy:function(){this.diagram.unbind("itemBoundsChange",this._refreshHandler),this.shape=void 0,this._visible=void 0,this.visual.visible(!1)},_hitTest:function(t){var e,i;for(i=0;i<this.connectors.length;i++)if((e=this.connectors[i])._hitTest(t)){e._hover(!0),this.diagram.toolService._hoveredConnector=e;break}},refresh:function(){if(this.shape){var e=this.shape.bounds();e=this.diagram.modelToLayer(e),this.visual.position(e.topLeft()),t.each(this.connectors,(function(){this.refresh()}))}}});var J=X.extend({init:function(t,e){var i=this;X.fn.init.call(i,t,e),i._manipulating=!1,i.map=[],i.shapes=[],i.rect=new h(e.editable.select),i.visual.append(i.rect),i._createHandles(),i.text=new o,i.visual.append(i.text),i._createThumb(),i.redraw(),i.diagram.bind("select",(function(t){i._initialize(t.selected)})),i._refreshHandler=function(){i._internalChange||(i.refreshBounds(),i.refresh())},i._rotatedHandler=function(){1==i.shapes.length&&(i._angle=i.shapes[0].rotate().angle),i._refreshHandler()},i.diagram.bind("itemBoundsChange",i._refreshHandler).bind("itemRotate",i._rotatedHandler),i.refreshBounds(),i.refresh()},options:{editable:{rotate:{thumb:{data:"M7.115,16C3.186,16,0,12.814,0,8.885C0,5.3,2.65,2.336,6.099,1.843V0l4.85,2.801l-4.85,2.8V3.758 c-2.399,0.473-4.21,2.588-4.21,5.126c0,2.886,2.34,5.226,5.226,5.226s5.226-2.34,5.226-5.226c0-1.351-0.513-2.582-1.354-3.51 l1.664-0.961c0.988,1.222,1.581,2.777,1.581,4.472C14.23,12.814,11.045,16,7.115,16L7.115,16z",y:-30}}},offset:10},_createThumb:function(){var t=this.options.editable,e=t.rotate;t&&e&&(this.rotationThumb=new p(e.thumb),this.visual.append(this.rotationThumb))},_createHandles:function(){var e,i,n,s,r=this.options.editable;if(r&&r.resize)for(e=r.resize.handles,s=-1;s<=1;s++)for(n=-1;n<=1;n++)0===s&&0===n||((i=new h(e)).domElement._hover=t.proxy(this._hover,this),this.map.push({x:s,y:n,visual:i}),this.visual.append(i))},bounds:function(t){if(!t)return this._bounds;this._innerBounds=t.clone(),this._bounds=this.diagram.modelToLayer(t).inflate(this.options.offset,this.options.offset)},_hitTest:function(t){var e,i,n,s,r=this.diagram.modelToLayer(t),o=this.options.editable,a=this.map.length;if(this._angle&&(r=r.clone().rotate(this._bounds.center(),this._angle)),o&&o.rotate&&this._rotationThumbBounds&&this._rotationThumbBounds.contains(r))return new d(-1,-2);if(o&&o.resize)for(e=0;e<a;e++)if(s=this.map[e],i=new d(s.x,s.y),(n=this._getHandleBounds(i)).offset(this._bounds.x,this._bounds.y),n.contains(r))return i;return this._bounds.contains(r)?new d(0,0):void 0},_getHandleBounds:function(t){var e=this.options.editable;if(e&&e.resize){var i=e.resize.handles||{},n=i.width,s=i.height,r=new a(0,0,n,s);return t.x<0?r.x=-n/2:0===t.x?r.x=Math.floor(this._bounds.width/2)-n/2:t.x>0&&(r.x=this._bounds.width+1-n/2),t.y<0?r.y=-s/2:0===t.y?r.y=Math.floor(this._bounds.height/2)-s/2:t.y>0&&(r.y=this._bounds.height+1-s/2),r}},_getCursor:function(t){var e=this._hitTest(t);if(e&&e.x>=-1&&e.x<=1&&e.y>=-1&&e.y<=1&&this.options.editable&&this.options.editable.resize){var i=this._angle;if(i&&(i=360-i,e.rotate(new d(0,0),i),e=new d(Math.round(e.x),Math.round(e.y))),-1==e.x&&-1==e.y)return"nw-resize";if(1==e.x&&1==e.y)return"se-resize";if(-1==e.x&&1==e.y)return"sw-resize";if(1==e.x&&-1==e.y)return"ne-resize";if(0===e.x&&-1==e.y)return"n-resize";if(0===e.x&&1==e.y)return"s-resize";if(1==e.x&&0===e.y)return"e-resize";if(-1==e.x&&0===e.y)return"w-resize"}return this._manipulating?v.move:v.select},_initialize:function(){var t,e,i=this.diagram.select();for(this.shapes=[],t=0;t<i.length;t++)(e=i[t])instanceof n.Shape&&(this.shapes.push(e),e._rotationOffset=new d);this._angle=1==this.shapes.length?this.shapes[0].rotate().angle:0,this._startAngle=this._angle,this._rotates(),this._positions(),this.refreshBounds(),this.refresh(),this.redraw()},_rotates:function(){var t,e;for(this.initialRotates=[],t=0;t<this.shapes.length;t++)e=this.shapes[t],this.initialRotates.push(e.rotate().angle)},_positions:function(){var t,e;for(this.initialStates=[],t=0;t<this.shapes.length;t++)e=this.shapes[t],this.initialStates.push(e.bounds())},_hover:function(t,e){var i=this.options.editable;if(i&&i.resize){var n=i.resize.handles,s=n.hover,r=n.stroke,o=n.background;t&&l.isDefined(s.stroke)&&(r=g({},r,s.stroke)),t&&l.isDefined(s.background)&&(o=s.background),e.redraw({stroke:r,background:o})}},start:function(t){this._sp=t,this._cp=t,this._lp=t,this._manipulating=!0,this._internalChange=!0,this.shapeStates=[];for(var e=0;e<this.shapes.length;e++){var i=this.shapes[e];this.shapeStates.push(i.bounds())}},redraw:function(){var e,i,n=this.options.editable,s=n.resize,r=n.rotate,o=n&&s?"inline":"none",a=n&&r?"inline":"none";for(e=0;e<this.map.length;e++)i=this.map[e],t(i.visual.domElement).css("display",o);this.rotationThumb&&t(this.rotationThumb.domElement).css("display",a)},move:function(t,e){var i,n,s,r,o,h,c,u,p,f,g,m=new d,v=new d,y=0;if(-2===t.y&&-1===t.x){for(r=this._innerBounds.center(),this._angle=this._truncateAngle(l.findAngle(r,e)),h=0;h<this.shapes.length;h++)o=this.shapes[h],c=(this._angle+this.initialRotates[h]-this._startAngle)%360,o.rotate(c,r),o.hasOwnProperty("layout")&&o.layout(o),this._rotating=!0;this.refresh()}else{if(!0===this.diagram.options.snap.enabled){var b=this._truncateDistance(e.minus(this._lp));if(0===b.x&&0===b.y)return void(this._cp=e);i=b,this._lp=new d(this._lp.x+b.x,this._lp.y+b.y)}else i=e.minus(this._cp);for(0===t.x&&0===t.y?(v=m=i,n=!0):(this._angle&&i.rotate(new d(0,0),this._angle),-1==t.x?m.x=i.x:1==t.x&&(v.x=i.x),-1==t.y?m.y=i.y:1==t.y&&(v.y=i.y)),n||(p=function(t,e){var i;return-1==t.x&&-1==t.y?i=e.bottomRight():1==t.x&&1==t.y?i=e.topLeft():-1==t.x&&1==t.y?i=e.topRight():1==t.x&&-1==t.y?i=e.bottomLeft():0===t.x&&-1==t.y?i=e.bottom():0===t.x&&1==t.y?i=e.top():1==t.x&&0===t.y?i=e.left():-1==t.x&&0===t.y&&(i=e.right()),i}(t,this._innerBounds),f=(this._innerBounds.width+i.x*t.x)/this._innerBounds.width,g=(this._innerBounds.height+i.y*t.y)/this._innerBounds.height),h=0;h<this.shapes.length;h++){if(s=(o=this.shapes[h]).bounds(),n)u=this._displaceBounds(s,m,v,n);else{(u=s.clone()).scale(f,g,p,this._innerBounds.center(),o.rotate().angle);var w=u.center();w.rotate(s.center(),-this._angle),u=new a(w.x-u.width/2,w.y-u.height/2,u.width,u.height)}if(u.width>=o.options.minWidth&&u.height>=o.options.minHeight){var x=s;o.bounds(u),o.hasOwnProperty("layout")&&o.layout(o,x,u),o.rotate(o.rotate().angle),y+=1}}y==h&&(u=this._displaceBounds(this._innerBounds,m,v,n),this.bounds(u),this.refresh()),this._positions()}this._cp=e},_truncatePositionToGuides:function(t){return this.diagram.ruler?this.diagram.ruler.truncatePositionToGuides(t):t},_truncateSizeToGuides:function(t){return this.diagram.ruler?this.diagram.ruler.truncateSizeToGuides(t):t},_truncateAngle:function(t){var e=Math.max(this.diagram.options.snap.angle,5);return!0===this.diagram.options.snap.enabled?Math.floor(t%360/e)*e:t%360},_truncateDistance:function(t){if(t instanceof n.Point)return new n.Point(this._truncateDistance(t.x),this._truncateDistance(t.y));var e=Math.max(this.diagram.options.snap.size,5);return!0===this.diagram.options.snap.enabled?Math.floor(t/e)*e:t},_displaceBounds:function(t,e,i,n){var s,r=t.topLeft().plus(e),o=t.bottomRight().plus(i),h=a.fromPoints(r,o);return n||((s=h.center()).rotate(t.center(),-this._angle),h=new a(s.x-h.width/2,s.y-h.height/2,h.width,h.height)),h},stop:function(){var t;if(this._cp!=this._sp)if(this._rotating)t=new M(this,this.shapes,this.initialRotates),this._rotating=!1;else{if(this.diagram.ruler)for(var e=0;e<this.shapes.length;e++){var i=this.shapes[e],n=i.bounds();n=this._truncateSizeToGuides(this._truncatePositionToGuides(n)),i.bounds(n),this.refreshBounds(),this.refresh()}t=new A(this.shapes,this.shapeStates,this)}return this._manipulating=void 0,this._internalChange=void 0,this._rotating=void 0,t},refreshBounds:function(){var t=1==this.shapes.length?this.shapes[0].bounds().clone():this.diagram.boundingBox(this.shapes,!0);this.bounds(t)},refresh:function(){var e,i,n=this;if(this.shapes.length>0){i=this.bounds(),this.visual.visible(!0),this.visual.position(i.topLeft()),t.each(this.map,(function(){e=n._getHandleBounds(new d(this.x,this.y)),this.visual.position(e.topLeft())})),this.visual.position(i.topLeft());var s=new d(i.width/2,i.height/2);if(this.visual.rotate(this._angle,s),this.rect.redraw({width:i.width,height:i.height}),this.rotationThumb){var r=this.options.editable.rotate.thumb;this._rotationThumbBounds=new a(i.center().x,i.y+r.y,0,0).inflate(r.width),this.rotationThumb.redraw({x:i.width/2-r.width/2})}}else this.visual.visible(!1)}}),tt=s.extend({init:function(t){this.visual=new h(this.options),this.diagram=t},options:{stroke:{color:"#778899",width:1,dashType:"dash"},background:"none"},start:function(t){this._sp=this._ep=t,this.refresh(),this.diagram._adorn(this,!0)},end:function(){this._sp=this._ep=void 0,this.diagram._adorn(this,!1)},bounds:function(t){return t&&(this._bounds=t),this._bounds},move:function(t){this._ep=t,this.refresh()},refresh:function(){if(this._sp){var t=a.fromPoints(this.diagram.modelToLayer(this._sp),this.diagram.modelToLayer(this._ep));this.bounds(a.fromPoints(this._sp,this._ep)),this.visual.position(t.topLeft()),this.visual.redraw({height:t.height+1,width:t.width+1})}}}),et=s.extend({init:function(t){this.options=g({},t.options),this._c=t,this.visual=new u(this.options),this.refresh()},_hover:function(t){var e=this.options,i=e.hover,n=e.stroke,s=e.background;t&&l.isDefined(i.stroke)&&(n=g({},n,i.stroke)),t&&l.isDefined(i.background)&&(s=i.background),this.visual.redraw({stroke:n,background:s})},refresh:function(){var t=this._c.shape.diagram.modelToView(this._c.position()),e=t.minus(this._c.shape.bounds("transformed").topLeft()),i=new a(t.x,t.y,0,0);i.inflate(this.options.width/2,this.options.height/2),this._visualBounds=i,this.visual.redraw({center:new d(e.x,e.y)})},_hitTest:function(t){var e=this._c.shape.diagram.modelToView(t);return this._visualBounds.contains(e)}});g(n,{CompositeUnit:_,TransformUnit:A,PanUndoUnit:E,AddShapeUnit:D,AddConnectionUnit:z,DeleteShapeUnit:P,DeleteConnectionUnit:T,ContentChangedUndoUnit:k,ConnectionEditAdorner:Z,UndoRedoService:B,ResizingAdorner:J,Selector:tt,ToolService:G,ConnectorsAdorner:K,LayoutUndoUnit:x,ConnectionEditUnit:C,ToFrontUnit:L,ToBackUnit:I,ConnectionRouterBase:W,PolylineRouter:Y,CascadingRouter:Q,SelectionTool:F})}(window.kendo.jQuery),function(t,e){var i=window.kendo,n=i.dataviz.diagram,s=n.Graph,r=n.Node,o=n.Link,a=i.deepExtend,h=n.Size,l=n.Rect,c=n.Dictionary,d=n.Set,u=n.Graph,p=n.Utils,f=n.Point,g=Math.PI/180,m=p.contains,v=t.grep,y=i.Class.extend({defaultOptions:{type:"Tree",subtype:"Down",roots:null,animate:!1,limitToView:!1,friction:.9,nodeDistance:50,iterations:300,horizontalSeparation:90,verticalSeparation:50,underneathVerticalTopOffset:15,underneathHorizontalOffset:15,underneathVerticalSeparation:15,grid:{width:1500,offsetX:50,offsetY:50,componentSpacingX:20,componentSpacingY:20},layerSeparation:50,layeredIterations:2,startRadialAngle:0,endRadialAngle:360,radialSeparation:150,radialFirstLevelSeparation:200,keepComponentsInOneRadialLayout:!1,ignoreContainers:!0,layoutContainerChildren:!1,ignoreInvisible:!0,animateTransitions:!1},init:function(){},gridLayoutComponents:function(t){if(!t)throw"No components supplied.";p.forEach(t,(function(t){t.calcBounds()})),t.sort((function(t,e){return e.bounds.width-t.bounds.width}));for(var e,i=this.options.grid.width,n=this.options.grid.componentSpacingX,s=this.options.grid.componentSpacingY,r=0,o=this.options.grid.offsetX,a=o,h=this.options.grid.offsetY,l=[],c=[];t.length>0;){a>=i&&(a=o,h+=r+s,r=0);var d=t.pop();for(this.moveToOffset(d,new f(a,h)),e=0;e<d.nodes.length;e++)c.push(d.nodes[e]);for(e=0;e<d.links.length;e++)l.push(d.links[e]);var u=d.bounds,g=u.height;(g<=0||isNaN(g))&&(g=0);var m=u.width;(m<=0||isNaN(m))&&(m=0),g>=r&&(r=g),a+=m+n}return{nodes:c,links:l}},moveToOffset:function(t,e){var i,n,s=t.bounds,r=e.x-s.x,o=e.y-s.y;for(i=0;i<t.nodes.length;i++){var a=t.nodes[i],h=a.bounds();0===h.width&&0===h.height&&0===h.x&&0===h.y&&(h=new l(0,0,0,0)),h.x+=r,h.y+=o,a.bounds(h)}for(i=0;i<t.links.length;i++){var c=t.links[i];if(c.points){var d=[],u=c.points;for(n=0;n<u.length;n++){var p=u[n];p.x+=r,p.y+=o,d.push(p)}c.points=d}}return this.currentHorizontalOffset+=s.width+this.options.grid.offsetX,new f(r,o)},transferOptions:function(t){this.options=i.deepExtend({},this.defaultOptions),p.isUndefined(t)||(this.options=i.deepExtend(this.options,t||{}))}}),b=i.Class.extend({init:function(t){this.nodeMap=new c,this.shapeMap=new c,this.nodes=[],this.edges=[],this.edgeMap=new c,this.finalNodes=[],this.finalLinks=[],this.ignoredConnections=[],this.ignoredShapes=[],this.hyperMap=new c,this.hyperTree=new s,this.finalGraph=null,this.diagram=t},convert:function(t){if(p.isUndefined(this.diagram))throw"No diagram to convert.";return this.options=i.deepExtend({ignoreInvisible:!0,ignoreContainers:!0,layoutContainerChildren:!1},t||{}),this.clear(),this._renormalizeShapes(),this._renormalizeConnections(),this.finalNodes=new c(this.nodes),this.finalLinks=new c(this.edges),this.finalGraph=new s,this.finalNodes.forEach((function(t){this.finalGraph.addNode(t)}),this),this.finalLinks.forEach((function(t){this.finalGraph.addExistingLink(t)}),this),this.finalGraph},mapConnection:function(t){return this.edgeMap.first((function(e){return m(this.edgeMap.get(e),t)}))},mapShape:function(t){for(var e=this.nodeMap.keys(),i=0,n=e.length;i<n;i++){var s=e[i];if(m(this.nodeMap.get(s),t))return s}},getEdge:function(t,e){return p.first(t.links,(function(i){return i.getComplement(t)===e}))},clear:function(){this.finalGraph=null,this.hyperTree=!this.options.ignoreContainers&&this.options.layoutContainerChildren?new u:null,this.hyperMap=!this.options.ignoreContainers&&this.options.layoutContainerChildren?new c:null,this.nodeMap=new c,this.shapeMap=new c,this.nodes=[],this.edges=[],this.edgeMap=new c,this.ignoredConnections=[],this.ignoredShapes=[],this.finalNodes=[],this.finalLinks=[]},listToRoot:function(t){var e=[],i=t.container;if(!i)return e;for(e.push(i);i.parentContainer;)i=i.parentContainer,e.push(i);return e.reverse(),e},firstNonIgnorableContainer:function(t){return t.isContainer&&!this._isIgnorableItem(t)?t:t.parentContainer?this.firstNonIgnorableContainer(t.parentContainer):null},isContainerConnection:function(t,e){return!(!t.isContainer||!this.isDescendantOf(t,e))||e.isContainer&&this.isDescendantOf(e,t)},isDescendantOf:function(t,e){if(!t.isContainer)throw"Expecting a container.";if(t===e)return!1;if(m(t.children,e))return!0;for(var i=[],n=0,s=t.children.length;n<s;n++){var r=t.children[n];r.isContainer&&this.isDescendantOf(r,e)&&i.push(r)}return i.length>0},isIgnorableItem:function(t){return this.options.ignoreInvisible?(!t.isCollapsed||!this._isVisible(t))&&!(!t.isCollapsed&&this._isVisible(t)):t.isCollapsed&&!this._isTop(t)},isShapeMapped:function(t){return t.isCollapsed&&!this._isVisible(t)&&!this._isTop(t)},leastCommonAncestor:function(t,e){if(!t)throw"Parameter should not be null.";if(!e)throw"Parameter should not be null.";if(!this.hyperTree)throw"No hypertree available.";var i=this.listToRoot(t),n=this.listToRoot(e),s=null;if(p.isEmpty(i)||p.isEmpty(n))return this.hyperTree.root.data;for(var r=i[0],o=n[0],a=0;r===o&&(s=i[a],!(++a>=i.length||a>=n.length));)r=i[a],o=n[a];return s?v(this.hyperTree.nodes,(function(t){return t.data.container===s})):this.hyperTree.root.data},_isTop:function(t){return!t.parentContainer},_isVisible:function(t){return!!t.visible()&&(t.parentContainer?this._isVisible(t.parentContainer):t.visible())},_isCollapsed:function(t){return!(!t.isContainer||!t.isCollapsed)||t.parentContainer&&this._isCollapsed(t.parentContainer)},_renormalizeShapes:function(){if(!this.options.ignoreContainers)throw"Containers are not supported yet, but stay tuned.";for(var t=0,e=this.diagram.shapes.length;t<e;t++){var i=this.diagram.shapes[t];if(this.options.ignoreInvisible&&!this._isVisible(i)||i.isContainer)this.ignoredShapes.push(i);else{var n=new r(i.id,i);n.isVirtual=!1,this.nodeMap.add(n,[i]),this.nodes.push(n)}}},_renormalizeConnections:function(){if(0!==this.diagram.connections.length)for(var t=0,e=this.diagram.connections.length;t<e;t++){var i=this.diagram.connections[t];if(this.isIgnorableItem(i))this.ignoredConnections.push(i);else{var n=i.sourceConnector?i.sourceConnector.shape:null,s=i.targetConnector?i.targetConnector.shape:null;if(n&&s)if(!m(this.ignoredShapes,n)||this.shapeMap.containsKey(n))if(!m(this.ignoredShapes,s)||this.shapeMap.containsKey(s)){this.shapeMap.containsKey(n)&&(n=this.shapeMap[n]),this.shapeMap.containsKey(s)&&(s=this.shapeMap[s]);var r=this.mapShape(n),a=this.mapShape(s);if(r===a||this.areConnectedAlready(r,a))this.ignoredConnections.push(i);else{if(null===r||null===a)throw"A shape was not mapped to a node.";if(!this.options.ignoreContainers)throw"Containers are not supported yet, but stay tuned.";if(r.isVirtual||a.isVirtual)this.ignoredConnections.push(i);else{var h=new o(r,a,i.id,i);this.edgeMap.add(h,[i]),this.edges.push(h)}}}else this.ignoredConnections.push(i);else this.ignoredConnections.push(i);else this.ignoredConnections.push(i)}}},areConnectedAlready:function(t,e){return p.any(this.edges,(function(i){return i.source===t&&i.target===e||i.source===e&&i.target===t}))}}),w=y.extend({init:function(t){if(y.fn.init.call(this),p.isUndefined(t))throw"Diagram is not specified.";this.diagram=t},layout:function(t){this.transferOptions(t);var e=new b(this.diagram).convert(t);if(!e.isEmpty()){var i=e.getConnectedComponents();if(!p.isEmpty(i)){for(var s=0;s<i.length;s++){var r=i[s];this.layoutGraph(r,t)}var o=this.gridLayoutComponents(i);return new n.LayoutState(this.diagram,o)}}},layoutGraph:function(t,e){p.isDefined(e)&&this.transferOptions(e),this.graph=t;var i=9*this.options.nodeDistance;this.temperature=i;var n=this._expectedBounds();this.width=n.width,this.height=n.height;for(var s=0;s<this.options.iterations;s++)this.refineStage=s>=5*this.options.iterations/6,this.tick(),this.temperature=this.refineStage?i/30:i*(1-s/(2*this.options.iterations))},tick:function(){var t;for(t=0;t<this.graph.nodes.length;t++)this._repulsion(this.graph.nodes[t]);for(t=0;t<this.graph.links.length;t++)this._attraction(this.graph.links[t]);for(t=0;t<this.graph.nodes.length;t++){var e=this.graph.nodes[t],i=Math.sqrt(e.dx*e.dx+e.dy*e.dy);if(0===i)return;e.x+=Math.min(i,this.temperature)*e.dx/i,e.y+=Math.min(i,this.temperature)*e.dy/i,this.options.limitToView&&(e.x=Math.min(this.width,Math.max(e.width/2,e.x)),e.y=Math.min(this.height,Math.max(e.height/2,e.y)))}},_shake:function(t){var e=Math.random()*this.options.nodeDistance/4,i=2*Math.random()*Math.PI;t.x+=e*Math.cos(i),t.y-=e*Math.sin(i)},_InverseSquareForce:function(t,e,i){var n;if(this.refineStage){var s=e.x-i.x,r=e.y-i.y,o=e.width/2,a=e.height/2,h=i.width/2,l=i.height/2;n=Math.pow(s,2)/Math.pow(o+h+this.options.nodeDistance,2)+Math.pow(r,2)/Math.pow(a+l+this.options.nodeDistance,2)}else n=Math.pow(t,2)/Math.pow(this.options.nodeDistance,2);return 4*n/3},_SquareForce:function(t,e,i){return 1/this._InverseSquareForce(t,e,i)},_repulsion:function(t){t.dx=0,t.dy=0,p.forEach(this.graph.nodes,(function(e){if(e!==t){for(;t.x===e.x&&t.y===e.y;)this._shake(e);var i=t.x-e.x,n=t.y-e.y,s=Math.sqrt(i*i+n*n),r=2*this._SquareForce(s,t,e);t.dx+=i/s*r,t.dy+=n/s*r}}),this)},_attraction:function(t){var e=t.target,i=t.source;if(i!==e){for(;i.x===e.x&&i.y===e.y;)this._shake(e);var n=i.x-e.x,s=i.y-e.y,r=Math.sqrt(n*n+s*s),o=5*this._InverseSquareForce(r,i,e),a=n/r*o,h=s/r*o;e.dx+=a,e.dy+=h,i.dx-=a,i.dy-=h}},_expectedBounds:function(){var t,e=this.graph.nodes.length;if(0===e)return t;var i=(t=p.fold(this.graph.nodes,(function(t,e){var i=e.width*e.height;return i>0?t+=Math.sqrt(i):0}),0,this))/e*Math.ceil(Math.sqrt(e));return{width:4*(i*Math.sqrt(1.5)),height:4*(i/Math.sqrt(1.5))}}}),x=i.Class.extend({init:function(t){this.center=null,this.options=t},layout:function(t,e){if(this.graph=t,this.graph.nodes&&0!==this.graph.nodes.length){if(!m(this.graph.nodes,e))throw"The given root is not in the graph.";this.center=e,this.graph.cacheRelationships(),this.layoutSwitch()}},layoutLeft:function(t){this.setChildrenDirection(this.center,"Left",!1),this.setChildrenLayout(this.center,"Default",!1);var e,i,n,s=0,r=0;for(i=0;i<t.length;i++){(n=t[i]).TreeDirection="Left";var o=this.measure(n,h.Empty);r=Math.max(r,o.Width),s+=o.height+this.options.verticalSeparation}s-=this.options.verticalSeparation;var a=this.center.x-this.options.horizontalSeparation;for(e=this.center.y+(this.center.height-s)/2,i=0;i<t.length;i++){n=t[i];var l=new f(a-n.Size.width,e);this.arrange(n,l),e+=n.Size.height+this.options.verticalSeparation}},layoutRight:function(t){this.setChildrenDirection(this.center,"Right",!1),this.setChildrenLayout(this.center,"Default",!1);var e,i,n,s=0,r=0;for(i=0;i<t.length;i++){(n=t[i]).TreeDirection="Right";var o=this.measure(n,h.Empty);r=Math.max(r,o.Width),s+=o.height+this.options.verticalSeparation}s-=this.options.verticalSeparation;var a=this.center.x+this.options.horizontalSeparation+this.center.width;for(e=this.center.y+(this.center.height-s)/2,i=0;i<t.length;i++){n=t[i];var l=new f(a,e);this.arrange(n,l),e+=n.Size.height+this.options.verticalSeparation}},layoutUp:function(t){this.setChildrenDirection(this.center,"Up",!1),this.setChildrenLayout(this.center,"Default",!1);var e,i,n,s=0;for(n=0;n<t.length;n++){(i=t[n]).TreeDirection="Up",s+=this.measure(i,h.Empty).width+this.options.horizontalSeparation}s-=this.options.horizontalSeparation;var r=this.center.x+this.center.width/2-s/2;for(n=0;n<t.length;n++){i=t[n],e=this.center.y-this.options.verticalSeparation-i.Size.height;var o=new f(r,e);this.arrange(i,o),r+=i.Size.width+this.options.horizontalSeparation}},layoutDown:function(t){var e,i;this.setChildrenDirection(this.center,"Down",!1),this.setChildrenLayout(this.center,"Default",!1);var n,s=0;for(i=0;i<t.length;i++){(e=t[i]).treeDirection="Down",s+=this.measure(e,h.Empty).width+this.options.horizontalSeparation}s-=this.options.horizontalSeparation;var r=this.center.x+this.center.width/2-s/2;for(n=this.center.y+this.options.verticalSeparation+this.center.height,i=0;i<t.length;i++){e=t[i];var o=new f(r,n);this.arrange(e,o),r+=e.Size.width+this.options.horizontalSeparation}},layoutRadialTree:function(){this.setChildrenDirection(this.center,"Radial",!1),this.setChildrenLayout(this.center,"Default",!1),this.previousRoot=null;var t=this.options.startRadialAngle*g,e=this.options.endRadialAngle*g;if(e<=t)throw"Final angle should not be less than the start angle.";this.maxDepth=0,this.origin=new f(this.center.x,this.center.y),this.calculateAngularWidth(this.center,0),this.maxDepth>0&&this.radialLayout(this.center,this.options.radialFirstLevelSeparation,t,e),this.center.Angle=e-t},tipOverTree:function(t,e){p.isUndefined(e)&&(e=0),this.setChildrenDirection(this.center,"Down",!1),this.setChildrenLayout(this.center,"Default",!1),this.setChildrenLayout(this.center,"Underneath",!1,e);var i,n,s,r=0;for(s=0;s<t.length;s++){(n=t[s]).TreeDirection="Down",r+=this.measure(n,h.Empty).width+this.options.horizontalSeparation}r-=this.options.horizontalSeparation,r-=t[t.length-1].width,r+=t[t.length-1].associatedShape.bounds().width;var o=this.center.x+this.center.width/2-r/2;for(i=this.center.y+this.options.verticalSeparation+this.center.height,s=0;s<t.length;s++){n=t[s];var a=new f(o,i);this.arrange(n,a),o+=n.Size.width+this.options.horizontalSeparation}},calculateAngularWidth:function(t,e){e>this.maxDepth&&(this.maxDepth=e);var i=0,n=0===e?0:Math.sqrt(2e6)/e;if(t.children.length>0){for(var s=0,r=t.children.length;s<r;s++){var o=t.children[s];i+=this.calculateAngularWidth(o,e+1)}i=Math.max(n,i)}else i=n;return t.sectorAngle=i,i},sortChildren:function(t){var e,i=0;if(t.parents.length>1)throw"Node is not part of a tree.";var n=t.parents[0];if(n){var s=new f(n.x,n.y),r=new f(t.x,t.y);i=this.normalizeAngle(Math.atan2(s.y-r.y,s.x-r.x))}var o=t.children.length;if(0===o)return null;var a=[],h=[];for(e=0;e<o;++e){var l=t.children[e],c=new f(l.x,l.y);h[e]=e,a[e]=this.normalizeAngle(-i+Math.atan2(c.y-c.y,c.x-c.x))}p.bisort(a,h);var d=[],u=t.children;for(e=0;e<o;++e)d.push(u[h[e]]);return d},normalizeAngle:function(t){for(;t>2*Math.PI;)t-=2*Math.PI;for(;t<0;)t+=2*Math.PI;return t},radialLayout:function(t,e,i,n){for(var s=n-i,r=s/2,o=t.sectorAngle,a=0,h=this.sortChildren(t),l=0,c=h.length;l<c;l++){var d=h[l],u=d,p=u.sectorAngle/o;d.children.length>0&&this.radialLayout(d,e+this.options.radialSeparation,i+a*s,i+(a+p)*s),this.setPolarLocation(d,e,i+a*s+p*r),u.angle=p*s,a+=p}},setPolarLocation:function(t,e,i){t.x=this.origin.x+e*Math.cos(i),t.y=this.origin.y+e*Math.sin(i),t.BoundingRectangle=new l(t.x,t.y,t.width,t.height)},setChildrenDirection:function(t,e,i){var n=t.treeDirection;this.graph.depthFirstTraversal(t,(function(t){t.treeDirection=e})),i||(t.treeDirection=n)},setChildrenLayout:function(t,e,i,n){p.isUndefined(n)&&(n=0);var s=t.childrenLayout;n>0?(this.graph.assignLevels(t),this.graph.depthFirstTraversal(t,(function(t){t.level>=n+1&&(t.childrenLayout=e)}))):(this.graph.depthFirstTraversal(t,(function(t){t.childrenLayout=e})),i||(t.childrenLayout=s))},measure:function(t,e){var i,n=0,s=0,r=new h(0,0);if(!t)throw"";var o=t.associatedShape.bounds(),a=o.width,l=o.height;if(1!==t.parents.length)throw"Node not in a spanning tree.";var c=t.parents[0];if("Undefined"===t.treeDirection&&(t.treeDirection=c.treeDirection),p.isEmpty(t.children))r=new h(Math.abs(a)<1e-6?50:a,Math.abs(l)<1e-6?25:l);else if(1===t.children.length){switch(t.treeDirection){case"Radial":i=this.measure(t.children[0],e),n=a+this.options.radialSeparation*Math.cos(t.AngleToParent)+i.width,s=l+Math.abs(this.options.radialSeparation*Math.sin(t.AngleToParent))+i.height;break;case"Left":case"Right":switch(t.childrenLayout){case"TopAlignedWithParent":case"BottomAlignedWithParent":break;case"Underneath":n=a+(i=this.measure(t.children[0],e)).width+this.options.underneathHorizontalOffset,s=l+this.options.underneathVerticalTopOffset+i.height;break;case"Default":i=this.measure(t.children[0],e),n=a+this.options.horizontalSeparation+i.width,s=Math.max(l,i.height);break;default:throw"Unhandled TreeDirection in the Radial layout measuring."}break;case"Up":case"Down":switch(t.childrenLayout){case"TopAlignedWithParent":case"BottomAlignedWithParent":break;case"Underneath":i=this.measure(t.children[0],e),n=Math.max(a,i.width+this.options.underneathHorizontalOffset),s=l+this.options.underneathVerticalTopOffset+i.height;break;case"Default":i=this.measure(t.children[0],e),s=l+this.options.verticalSeparation+i.height,n=Math.max(a,i.width);break;default:throw"Unhandled TreeDirection in the Down layout measuring."}break;default:throw"Unhandled TreeDirection in the layout measuring."}r=new h(n,s)}else{var d,u;switch(t.treeDirection){case"Left":case"Right":switch(t.childrenLayout){case"TopAlignedWithParent":case"BottomAlignedWithParent":break;case"Underneath":for(n=a,s=l+this.options.underneathVerticalTopOffset,d=0;d<t.children.length;d++)u=t.children[d],i=this.measure(u,e),n=Math.max(n,i.width+this.options.underneathHorizontalOffset),s+=i.height+this.options.underneathVerticalSeparation;s-=this.options.underneathVerticalSeparation;break;case"Default":for(n=a,s=0,d=0;d<t.children.length;d++)u=t.children[d],i=this.measure(u,e),n=Math.max(n,a+this.options.horizontalSeparation+i.width),s+=i.height+this.options.verticalSeparation;s-=this.options.verticalSeparation;break;default:throw"Unhandled TreeDirection in the Right layout measuring."}break;case"Up":case"Down":switch(t.childrenLayout){case"TopAlignedWithParent":case"BottomAlignedWithParent":break;case"Underneath":for(n=a,s=l+this.options.underneathVerticalTopOffset,d=0;d<t.children.length;d++)u=t.children[d],i=this.measure(u,e),n=Math.max(n,i.width+this.options.underneathHorizontalOffset),s+=i.height+this.options.underneathVerticalSeparation;s-=this.options.underneathVerticalSeparation;break;case"Default":for(n=0,s=0,d=0;d<t.children.length;d++)u=t.children[d],n+=(i=this.measure(u,e)).width+this.options.horizontalSeparation,s=Math.max(s,i.height+this.options.verticalSeparation+l);n-=this.options.horizontalSeparation;break;default:throw"Unhandled TreeDirection in the Down layout measuring."}break;default:throw"Unhandled TreeDirection in the layout measuring."}r=new h(n,s)}return t.SectorAngle=Math.sqrt(n*n/4+s*s/4),t.Size=r,r},arrange:function(t,e){var i,n,s,r,o,a,h,c=t.associatedShape.bounds(),d=c.width,u=c.height;if(p.isEmpty(t.children))t.x=e.x,t.y=e.y,t.BoundingRectangle=new l(e.x,e.y,d,u);else switch(t.treeDirection){case"Left":switch(t.childrenLayout){case"TopAlignedWithParent":case"BottomAlignedWithParent":break;case"Underneath":for(h=e,t.x=h.x,t.y=h.y,t.BoundingRectangle=new l(t.x,t.y,t.width,t.height),a=e.y+u+this.options.underneathVerticalTopOffset,i=0;i<s.children.length;i++)s=s.children[i],o=h.x-s.associatedShape.width-this.options.underneathHorizontalOffset,n=new f(o,a),this.arrange(s,n),a+=s.Size.height+this.options.underneathVerticalSeparation;break;case"Default":for(h=new f(e.x+t.Size.width-d,e.y+(t.Size.height-u)/2),t.x=h.x,t.y=h.y,t.BoundingRectangle=new l(t.x,t.y,t.width,t.height),o=h.x-this.options.horizontalSeparation,a=e.y,i=0;i<t.children.length;i++)s=t.children[i],n=new f(o-s.Size.width,a),this.arrange(s,n),a+=s.Size.height+this.options.verticalSeparation;break;default:throw"Unsupported TreeDirection"}break;case"Right":switch(t.childrenLayout){case"TopAlignedWithParent":case"BottomAlignedWithParent":break;case"Underneath":for(h=e,t.x=h.x,t.y=h.y,t.BoundingRectangle=new l(t.x,t.y,t.width,t.height),o=e.x+d+this.options.underneathHorizontalOffset,a=e.y+u+this.options.underneathVerticalTopOffset,i=0;i<t.children.length;i++)s=t.children[i],n=new f(o,a),this.arrange(s,n),a+=s.Size.height+this.options.underneathVerticalSeparation;break;case"Default":for(h=new f(e.x,e.y+(t.Size.height-u)/2),t.x=h.x,t.y=h.y,t.BoundingRectangle=new l(t.x,t.y,t.width,t.height),o=e.x+d+this.options.horizontalSeparation,a=e.y,i=0;i<t.children.length;i++)s=t.children[i],n=new f(o,a),this.arrange(s,n),a+=s.Size.height+this.options.verticalSeparation;break;default:throw"Unsupported TreeDirection"}break;case"Up":if(h=new f(e.x+(t.Size.width-d)/2,e.y+t.Size.height-u),t.x=h.x,t.y=h.y,t.BoundingRectangle=new l(t.x,t.y,t.width,t.height),Math.abs(h.x-e.x)<1e-6){for(r=0,i=0;i<t.children.length;i++)r+=t.children[i].Size.width+this.options.horizontalSeparation;r-=this.options.horizontalSeparation,o=e.x+(d-r)/2}else o=e.x;for(i=0;i<t.children.length;i++)s=t.children[i],a=h.y-this.options.verticalSeparation-s.Size.height,n=new f(o,a),this.arrange(s,n),o+=s.Size.width+this.options.horizontalSeparation;break;case"Down":switch(t.childrenLayout){case"TopAlignedWithParent":case"BottomAlignedWithParent":break;case"Underneath":for(h=e,t.x=h.x,t.y=h.y,t.BoundingRectangle=new l(t.x,t.y,t.width,t.height),o=e.x+this.options.underneathHorizontalOffset,a=e.y+u+this.options.underneathVerticalTopOffset,i=0;i<t.children.length;i++)s=t.children[i],n=new f(o,a),this.arrange(s,n),a+=s.Size.height+this.options.underneathVerticalSeparation;break;case"Default":if(h=new f(e.x+(t.Size.width-d)/2,e.y),t.x=h.x,t.y=h.y,t.BoundingRectangle=new l(t.x,t.y,t.width,t.height),Math.abs(h.x-e.x)<1e-6){for(r=0,i=0;i<t.children.length;i++)r+=t.children[i].Size.width+this.options.horizontalSeparation;r-=this.options.horizontalSeparation,o=e.x+(d-r)/2}else o=e.x;for(i=0;i<t.children.length;i++)s=t.children[i],a=h.y+this.options.verticalSeparation+u,n=new f(o,a),this.arrange(s,n),o+=s.Size.width+this.options.horizontalSeparation;break;default:throw"Unsupported TreeDirection"}break;case"None":break;default:throw"Unsupported TreeDirection"}},layoutSwitch:function(){if(this.center&&!p.isEmpty(this.center.children)){var t,e,i,n,s=this.options.subtype;p.isUndefined(s)&&(s="Down");var r=this.center.children;switch(s.toLowerCase()){case"radial":case"radialtree":this.layoutRadialTree();break;case"mindmaphorizontal":case"mindmap":t=this.center.children,1===this.center.children.length?this.layoutRight(t):(n=r.length/2,e=v(this.center.children,(function(t){return p.indexOf(r,t)<n})),i=v(this.center.children,(function(t){return p.indexOf(r,t)>=n})),this.layoutLeft(e),this.layoutRight(i));break;case"mindmapvertical":t=this.center.children,1===this.center.children.length?this.layoutDown(t):(n=r.length/2,e=v(this.center.children,(function(t){return p.indexOf(r,t)<n})),i=v(this.center.children,(function(t){return p.indexOf(r,t)>=n})),this.layoutUp(e),this.layoutDown(i));break;case"right":this.layoutRight(this.center.children);break;case"left":this.layoutLeft(this.center.children);break;case"up":case"bottom":this.layoutUp(this.center.children);break;case"down":case"top":this.layoutDown(this.center.children);break;case"tipover":case"tipovertree":if(this.options.tipOverTreeStartLevel<0)throw"The tip-over level should be a positive integer.";this.tipOverTree(this.center.children,this.options.tipOverTreeStartLevel)}}}}),_=y.extend({init:function(t){if(y.fn.init.call(this),p.isUndefined(t))throw"No diagram specified.";this.diagram=t},layout:function(t){this.transferOptions(t);var e=new b(this.diagram);this.graph=e.convert();var i=this.layoutComponents();return new n.LayoutState(this.diagram,i)},layoutComponents:function(){if(!this.graph.isEmpty()){var t=this.graph.getConnectedComponents();if(!p.isEmpty(t)){for(var e=new x(this.options),i=[],n=0;n<t.length;n++){var s=t[n],r=this.getTree(s);if(!r)throw"Failed to find a spanning tree for the component.";var o=r.root,a=r.tree;e.layout(a,o),i.push(a)}return this.gridLayoutComponents(i)}}},getTree:function(t){var e=null;if(this.options.roots&&this.options.roots.length>0)for(var i=0,n=t.nodes.length;i<n;i++)for(var s=t.nodes[i],r=0;r<this.options.roots.length;r++){if(this.options.roots[r]===s.associatedShape){e=s;break}}if(!e&&!(e=t.root()))throw"Unable to find a root for the tree.";return this.getTreeForRoot(t,e)},getTreeForRoot:function(t,e){var i=t.getSpanningTree(e);return p.isUndefined(i)||i.isEmpty()?null:{tree:i,root:i.root}}}),k=y.extend({init:function(t){if(y.fn.init.call(this),p.isUndefined(t))throw"Diagram is not specified.";this.diagram=t},layout:function(t){this.transferOptions(t);var e=new b(this.diagram).convert(t);if(!e.isEmpty()){var i=e.getConnectedComponents();if(!p.isEmpty(i)){for(var s=0;s<i.length;s++){var r=i[s];this.layoutGraph(r,t)}var o=this.gridLayoutComponents(i);return new n.LayoutState(this.diagram,o)}}},_initRuntimeProperties:function(){for(var t=0;t<this.graph.nodes.length;t++){var e=this.graph.nodes[t];e.layer=-1,e.downstreamLinkCount=0,e.upstreamLinkCount=0,e.isVirtual=!1,e.uBaryCenter=0,e.dBaryCenter=0,e.upstreamPriority=0,e.downstreamPriority=0,e.gridPosition=0}},_prepare:function(t){var e,i,n,s=[];for(i=0;i<t.links.length;i++)t.links[i].depthOfDumminess=0;var r=new c;for(p.forEach(t.nodes,(function(t){0===t.incoming.length&&(r.set(t,0),s.push(t))}));s.length>0;){var o=s.shift();for(e=0;e<o.outgoing.length;e++){var a=(n=o.outgoing[e]).target;r.containsKey(a)?r.set(a,Math.max(r.get(o)+1,r.get(a))):r.set(a,r.get(o)+1),m(s,a)||s.push(a)}}var h=0;r.forEachValue((function(t){h=Math.max(h,t)}));var l=[];p.addRange(l,r.keys()),l.sort((function(t,e){var i=r.get(t),n=r.get(e);return p.sign(n-i)}));for(var d=0;d<l.length;++d){var u=l[d],f=Number.MAX_VALUE;if(0!==u.outgoing.length){for(i=0;i<u.outgoing.length;++i)n=u.outgoing[i],f=Math.min(f,r.get(n.target));f>1&&r.set(u,f-1)}}for(this.layers=[],e=0;e<h+1;e++)this.layers.push([]);for(r.forEach((function(t,e){t.layer=e,this.layers[e].push(t)}),this),i=0;i<this.layers.length;i++){var g=this.layers[i];for(e=0;e<g.length;e++)g[e].gridPosition=e}},layoutGraph:function(t,e){if(p.isUndefined(t))throw"No graph given or graph analysis of the diagram failed.";p.isDefined(e)&&this.transferOptions(e),this.graph=t,t.setItemIndices();var i=t.makeAcyclic();this._initRuntimeProperties(),this._prepare(t,e),this._dummify(),this._optimizeCrossings(),this._swapPairs(),this.arrangeNodes(),this._moveThingsAround(),this._dedummify(),p.forEach(i,(function(t){t.points&&t.points.reverse()}))},setMinDist:function(t,e,i){var n=t.layer,s=t.layerIndex;this.minDistances[n][s]=i},getMinDist:function(t,e){for(var i=0,n=t.layerIndex,s=e.layerIndex,r=t.layer,o=Math.min(n,s),a=Math.max(n,s),h=o;h<a;++h)i+=this.minDistances[r][h];return i},placeLeftToRight:function(t){for(var e,i,n=new c,s=0;s<this.layers.length;++s){var r=t[s];if(r){for(e=0;e<r.length;e++)i=r[e],n.containsKey(i)||this.placeLeft(i,n,s);var o=Number.POSITIVE_INFINITY;for(e=0;e<r.length;e++){i=r[e];var a=this.rightSibling(i);a&&this.nodeLeftClass.get(a)!==s&&(o=Math.min(o,n.get(a)-n.get(i)-this.getMinDist(i,a)))}if(o===Number.POSITIVE_INFINITY){var h=[];for(e=0;e<r.length;e++){i=r[e];var l=[];p.addRange(l,this.upNodes.get(i)),p.addRange(l,this.downNodes.get(i));for(var d=0;d<l.length;d++){var u=l[d];this.nodeLeftClass.get(u)<s&&h.push(n.get(u)-n.get(i))}}h.sort(),o=0===h.length?0:h.length%2==1?h[this.intDiv(h.length,2)]:(h[this.intDiv(h.length,2)-1]+h[this.intDiv(h.length,2)])/2}for(e=0;e<r.length;e++)i=r[e],n.set(i,n.get(i)+o)}}return n},placeRightToLeft:function(t){for(var e,i,n=new c,s=0;s<this.layers.length;++s){var r=t[s];if(r){for(e=0;e<r.length;e++)i=r[e],n.containsKey(i)||this.placeRight(i,n,s);var o=Number.NEGATIVE_INFINITY;for(e=0;e<r.length;e++){i=r[e];var a=this.leftSibling(i);a&&this.nodeRightClass.get(a)!==s&&(o=Math.max(o,n.get(a)-n.get(i)+this.getMinDist(a,i)))}if(o===Number.NEGATIVE_INFINITY){var h=[];for(e=0;e<r.length;e++){i=r[e];var l=[];p.addRange(l,this.upNodes.get(i)),p.addRange(l,this.downNodes.get(i));for(var d=0;d<l.length;d++){var u=l[d];this.nodeRightClass.get(u)<s&&h.push(n.get(i)-n.get(u))}}h.sort(),o=0===h.length?0:h.length%2==1?h[this.intDiv(h.length,2)]:(h[this.intDiv(h.length,2)-1]+h[this.intDiv(h.length,2)])/2}for(e=0;e<r.length;e++)i=r[e],n.set(i,n.get(i)+o)}}return n},_getLeftWing:function(){var t={value:null},e=this.computeClasses(t,1);return this.nodeLeftClass=t.value,e},_getRightWing:function(){var t={value:null},e=this.computeClasses(t,-1);return this.nodeRightClass=t.value,e},computeClasses:function(t,e){for(var i=0,n=t.value=new c,s=0;s<this.layers.length;++s){i=s;for(var r=this.layers[s],o=1===e?0:r.length-1;0<=o&&o<r.length;o+=e){var a=r[o];if(n.containsKey(a))i=n.get(a);else if(n.set(a,i),a.isVirtual)for(var h=this._nodesInLink(a),l=0;l<h.length;l++){var d=h[l];n.set(d,i)}}}for(var u=[],p=0;p<this.layers.length;p++)u.push(null);return n.forEach((function(t,e){null===u[e]&&(u[e]=[]),u[e].push(t)})),u},_isVerticalLayout:function(){return"up"===this.options.subtype.toLowerCase()||"down"===this.options.subtype.toLowerCase()||"vertical"===this.options.subtype.toLowerCase()},_isHorizontalLayout:function(){return"right"===this.options.subtype.toLowerCase()||"left"===this.options.subtype.toLowerCase()||"horizontal"===this.options.subtype.toLowerCase()},_isIncreasingLayout:function(){return"right"===this.options.subtype.toLowerCase()||"down"===this.options.subtype.toLowerCase()},_moveThingsAround:function(){var t,e,i,n,s,r;for(e=0;e<this.layers.length;++e)(n=this.layers[e]).sort(this._gridPositionComparer);for(this.minDistances=[],e=0;e<this.layers.length;++e)for(n=this.layers[e],this.minDistances[e]=[],s=0;s<n.length;++s)(i=n[s]).layerIndex=s,this.minDistances[e][s]=this.options.nodeDistance,s<n.length-1&&(this._isVerticalLayout()?this.minDistances[e][s]+=(i.width+n[s+1].width)/2:this.minDistances[e][s]+=(i.height+n[s+1].height)/2);for(this.downNodes=new c,this.upNodes=new c,p.forEach(this.graph.nodes,(function(t){this.downNodes.set(t,[]),this.upNodes.set(t,[])}),this),p.forEach(this.graph.links,(function(t){var e=t.source,i=t.target,n=null,s=null;e.layer>i.layer?(n=t.source,s=t.target):(s=t.source,n=t.target),this.downNodes.get(s).push(n),this.upNodes.get(n).push(s)}),this),this.downNodes.forEachValue((function(t){t.sort(this._gridPositionComparer)})),this.upNodes.forEachValue((function(t){t.sort(this._gridPositionComparer)})),e=0;e<this.layers.length-1;++e)for(n=this.layers[e],r=0;r<n.length-1;r++){var o=n[r];if(o.isVirtual){var a=this.downNodes.get(o)[0];if(a.isVirtual)for(s=r+1;s<n.length;++s)if((i=n[s]).isVirtual){var h=this.downNodes.get(i)[0];if(h.isVirtual&&a.gridPosition>h.gridPosition){var l=a.gridPosition;a.gridPosition=h.gridPosition,h.gridPosition=l;var d=a.layerIndex,u=h.layerIndex;this.layers[e+1][d]=h,this.layers[e+1][u]=a,a.layerIndex=u,h.layerIndex=d}}}}var f=this._getLeftWing(),g=this._getRightWing(),m=this.placeLeftToRight(f),v=this.placeRightToLeft(g),y=new c;p.forEach(this.graph.nodes,(function(t){y.set(t,(m.get(t)+v.get(t))/2)}));var b=new c,w=new c;for(e=0;e<this.layers.length;++e){n=this.layers[e];var x=-1;for(s=0;s<n.length;++s)i=n[s],b.set(i,0),w.set(i,!1),i.isVirtual&&(-1===x?x=s:x===s-1?x=s:(s,b.set(n[x],0),y.get(i)-y.get(n[x])===this.getMinDist(n[x],i)?w.set(n[x],!0):w.set(n[x],!1),x=s))}p.forEach([1,-1],(function(e){for(var i=1===e?0:this.layers.length-1;0<=i&&i<this.layers.length;i+=e){var n=this.layers[i],s=this._firstVirtualNode(n),r=null,o=null;if(-1!==s)for(r=n[s],o=[],t=0;t<s;t++)o.push(n[t]);else r=null,o=n;if(o.length>0){for(this._sequencer(y,null,r,e,o),t=0;t<o.length-1;++t)this.setMinDist(o[t],o[t+1],y.get(o[t+1])-y.get(o[t]));r&&this.setMinDist(o[o.length-1],r,y.get(r)-y.get(o[o.length-1]))}for(;r;){var a=this.nextVirtualNode(n,r);if(a){if(b.get(r)===e){s=r.layerIndex;var h=a.layerIndex;for(o=[],t=s+1;t<h;t++)o.push(n[t]);o.length>0&&this._sequencer(y,r,a,e,o),w.set(r,!0)}}else{for(s=r.layerIndex,o=[],t=s+1;t<n.length;t++)o.push(n[t]);if(o.length>0){for(this._sequencer(y,r,null,e,o),t=0;t<o.length-1;++t)this.setMinDist(o[t],o[t+1],y.get(o[t+1])-y.get(o[t]));this.setMinDist(r,o[0],y.get(o[0])-y.get(r))}}r=a}this.adjustDirections(i,e,b,w)}}),this);var _,k,C=this._isIncreasingLayout()?0:this.layers.length-1,S=this._isIncreasingLayout()?1:-1,T=0;function P(t,e){for(var i=Number.MIN_VALUE,n=0;n<t.length;++n){var s=t[n];i=e._isVerticalLayout()?Math.max(i,s.height):Math.max(i,s.width)}return i}for(t=C;_=t,(k=this)._isIncreasingLayout()?_<k.layers.length:_>=0;t+=S){var A=P(n=this.layers[t],this);for(s=0;s<n.length;++s)i=n[s],this._isVerticalLayout()?(i.x=y.get(i),i.y=T+A/2):(i.x=T+A/2,i.y=y.get(i));T+=this.options.layerSeparation+A}},adjustDirections:function(t,e,i,n){if(!(t+e<0||t+e>=this.layers.length))for(var s=null,r=null,o=this.layers[t+e],a=0;a<o.length;++a){var h=o[a];if(h.isVirtual){var l=this.getNeighborOnLayer(h,t);if(l.isVirtual){if(s){for(var c=n.get(r),d=this.layers[t],u=r.layerIndex,p=l.layerIndex,f=u+1;f<p;++f)d[f].isVirtual&&(c=c&&n.get(d[f]));if(c){i.set(s,e);for(var g=s.layerIndex,m=h.layerIndex,v=g+1;v<m;++v)o[v].isVirtual&&i.set(o[v],e)}}s=h,r=l}}}},getNeighborOnLayer:function(t,e){var i=this.upNodes.get(t)[0];return i.layer===e?i:(i=this.downNodes.get(t)[0]).layer===e?i:null},_sequencer:function(t,e,i,n,s){if(1===s.length&&this._sequenceSingle(t,e,i,n,s[0]),s.length>1){var r=s.length,o=this.intDiv(r,2);this._sequencer(t,e,i,n,s.slice(0,o)),this._sequencer(t,e,i,n,s.slice(o)),this.combineSequences(t,e,i,n,s)}},_sequenceSingle:function(t,e,i,n,s){var r=-1===n?this.downNodes.get(s):this.upNodes.get(s),o=r.length;0!==o&&(o%2==1?t.set(s,t.get(r[this.intDiv(o,2)])):t.set(s,(t.get(r[this.intDiv(o,2)-1])+t.get(r[this.intDiv(o,2)]))/2),e&&t.set(s,Math.max(t.get(s),t.get(e)+this.getMinDist(e,s))),i&&t.set(s,Math.min(t.get(s),t.get(i)-this.getMinDist(s,i))))},combineSequences:function(t,e,i,n,s){var r,o,a,h,l,c,d=s.length,u=this.intDiv(d,2),p=[];for(r=0;r<u;++r){for(o=0,h=-1===n?this.downNodes.get(s[r]):this.upNodes.get(s[r]),a=0;a<h.length;++a)l=h[a],t.get(l)>=t.get(s[r])?o++:(o--,p.push({k:t.get(l)+this.getMinDist(s[r],s[u-1]),v:2}));p.push({k:t.get(s[r])+this.getMinDist(s[r],s[u-1]),v:o})}e&&p.push({k:t.get(e)+this.getMinDist(e,s[u-1]),v:Number.MAX_VALUE}),p.sort(this._positionDescendingComparer);var f=[];for(r=u;r<d;++r){for(o=0,h=-1===n?this.downNodes.get(s[r]):this.upNodes.get(s[r]),a=0;a<h.length;++a)l=h[a],t.get(l)<=t.get(s[r])?o++:(o--,f.push({k:t.get(l)-this.getMinDist(s[r],s[u]),v:2}));f.push({k:t.get(s[r])-this.getMinDist(s[r],s[u]),v:o})}i&&f.push({k:t.get(i)-this.getMinDist(i,s[u]),v:Number.MAX_VALUE}),f.sort(this._positionAscendingComparer);for(var g=0,m=0,v=this.getMinDist(s[u-1],s[u]);t.get(s[u])-t.get(s[u-1])<v;)if(g<m){if(0===p.length){t.set(s[u-1],t.get(s[u])-v);break}g+=(c=p.shift()).v,t.set(s[u-1],c.k),t.set(s[u-1],Math.max(t.get(s[u-1]),t.get(s[u])-v))}else{if(0===f.length){t.set(s[u],t.get(s[u-1])+v);break}m+=(c=f.shift()).v,t.set(s[u],c.k),t.set(s[u],Math.min(t.get(s[u]),t.get(s[u-1])+v))}for(r=u-2;r>=0;r--)t.set(s[r],Math.min(t.get(s[r]),t.get(s[u-1])-this.getMinDist(s[r],s[u-1])));for(r=u+1;r<d;r++)t.set(s[r],Math.max(t.get(s[r]),t.get(s[u])+this.getMinDist(s[r],s[u])))},placeLeft:function(t,e,i){var n=Number.NEGATIVE_INFINITY;p.forEach(this._getComposite(t),(function(t){var s=this.leftSibling(t);s&&this.nodeLeftClass.get(s)===this.nodeLeftClass.get(t)&&(e.containsKey(s)||this.placeLeft(s,e,i),n=Math.max(n,e.get(s)+this.getMinDist(s,t)))}),this),n===Number.NEGATIVE_INFINITY&&(n=0),p.forEach(this._getComposite(t),(function(t){e.set(t,n)}))},placeRight:function(t,e,i){var n=Number.POSITIVE_INFINITY;p.forEach(this._getComposite(t),(function(t){var s=this.rightSibling(t);s&&this.nodeRightClass.get(s)===this.nodeRightClass.get(t)&&(e.containsKey(s)||this.placeRight(s,e,i),n=Math.min(n,e.get(s)-this.getMinDist(t,s)))}),this),n===Number.POSITIVE_INFINITY&&(n=0),p.forEach(this._getComposite(t),(function(t){e.set(t,n)}))},leftSibling:function(t){var e=this.layers[t.layer],i=t.layerIndex;return 0===i?null:e[i-1]},rightSibling:function(t){var e=this.layers[t.layer],i=t.layerIndex;return i===e.length-1?null:e[i+1]},_getComposite:function(t){return t.isVirtual?this._nodesInLink(t):[t]},arrangeNodes:function(){var t,e,i,n,s;for(e=0;e<this.layers.length;e++)for(n=this.layers[e],i=0;i<n.length;i++)(s=n[i]).upstreamPriority=s.upstreamLinkCount,s.downstreamPriority=s.downstreamLinkCount;for(var r=0;r<2;r++){for(t=this.layers.length-1;t>=1;t--)this.layoutLayer(!1,t);for(t=0;t<this.layers.length-1;t++)this.layoutLayer(!0,t)}var o=Number.MAX_VALUE;for(e=0;e<this.layers.length;e++)for(n=this.layers[e],i=0;i<n.length;i++)s=n[i],o=Math.min(o,s.gridPosition);if(o<0)for(e=0;e<this.layers.length;e++)for(n=this.layers[e],i=0;i<n.length;i++)(s=n[i]).gridPosition=s.gridPosition-o},layoutLayer:function(t,e){var i,n;n=t?this.layers[i=e+1]:this.layers[i=e-1];for(var s=[],r=0;r<n.length;r++)s.push(n[r]);s.sort((function(t,e){var i=(t.upstreamPriority+t.downstreamPriority)/2,n=(e.upstreamPriority+e.downstreamPriority)/2;return Math.abs(i-n)<1e-4?0:i<n?1:-1})),p.forEach(s,(function(t){var e=t.gridPosition,i=this.calcBaryCenter(t),s=(t.upstreamPriority+t.downstreamPriority)/2;if(!(Math.abs(e-i)<1e-4||Math.abs(e-i)<.2501))if(e<i)for(;e<i&&this.moveRight(t,n,s);)e=t.gridPosition;else for(;e>i&&this.moveLeft(t,n,s);)e=t.gridPosition}),this),i>0&&this.calcDownData(i-1),i<this.layers.length-1&&this.calcUpData(i+1)},moveRight:function(t,e,i){var n=p.indexOf(e,t);if(n===e.length-1)return t.gridPosition=t.gridPosition+.5,!0;var s=e[n+1],r=(s.upstreamPriority+s.downstreamPriority)/2;return s.gridPosition>t.gridPosition+1?(t.gridPosition=t.gridPosition+.5,!0):!(r>i||Math.abs(r-i)<1e-4)&&(!!this.moveRight(s,e,i)&&(t.gridPosition=t.gridPosition+.5,!0))},moveLeft:function(t,e,i){var n=p.indexOf(e,t);if(0===n)return t.gridPosition=t.gridPosition-.5,!0;var s=e[n-1],r=(s.upstreamPriority+s.downstreamPriority)/2;return s.gridPosition<t.gridPosition-1?(t.gridPosition=t.gridPosition-.5,!0):!(r>i||Math.abs(r-i)<1e-4)&&(!!this.moveLeft(s,e,i)&&(t.gridPosition=t.gridPosition-.5,!0))},mapVirtualNode:function(t,e){this.nodeToLinkMap.set(t,e),this.linkToNodeMap.containsKey(e)||this.linkToNodeMap.set(e,[]),this.linkToNodeMap.get(e).push(t)},_nodesInLink:function(t){return this.linkToNodeMap.get(this.nodeToLinkMap.get(t))},_dummify:function(){this.linkToNodeMap=new c,this.nodeToLinkMap=new c;var t,e,i,n,s,a,h,l,d=this.graph.links.slice(0);for(l=0;l<d.length;l++){var u=d[l],f=u.source,g=u.target,m=f.layer,v=g.layer,y=f.gridPosition,b=g.gridPosition,w=(b-y)/Math.abs(v-m),x=f;if(m-v>1){for(h=m-1;h>v;h--){for((i=new r).x=f.x,i.y=f.y,i.width=f.width/100,i.height=f.height/100,(e=(h-v)*w+y)>(t=this.layers[h]).length&&(e=t.length),y>=this.layers[m].length-1&&b>=this.layers[v].length-1?e=t.length:0===y&&0===b&&(e=0),i.layer=h,i.uBaryCenter=0,i.dBaryCenter=0,i.upstreamLinkCount=0,i.downstreamLinkCount=0,i.gridPosition=e,i.isVirtual=!0,p.insert(t,i,e),s=e+1;s<t.length;s++)(n=t[s]).gridPosition=n.gridPosition+1;(a=new o(x,i)).depthOfDumminess=0,x=i,this.graph.nodes.push(i),this.graph.addLink(a),i.index=this.graph.nodes.length-1,this.mapVirtualNode(i,u)}u.changeSource(x),u.depthOfDumminess=m-v-1}if(m-v<-1){for(h=m+1;h<v;h++){for((i=new r).x=f.x,i.y=f.y,i.width=f.width/100,i.height=f.height/100,(e=(h-m)*w+y)>(t=this.layers[h]).length&&(e=t.length),y>=this.layers[m].length-1&&b>=this.layers[v].length-1?e=t.length:0===y&&0===b&&(e=0),i.layer=h,i.uBaryCenter=0,i.dBaryCenter=0,i.upstreamLinkCount=0,i.downstreamLinkCount=0,i.gridPosition=e,i.isVirtual=!0,e&=e,p.insert(t,i,e),s=e+1;s<t.length;s++)(n=t[s]).gridPosition=n.gridPosition+1;(a=new o(x,i)).depthOfDumminess=0,x=i,this.graph.nodes.push(i),this.graph.addLink(a),i.index=this.graph.nodes.length-1,this.mapVirtualNode(i,u)}u.changeSource(x),u.depthOfDumminess=v-m-1}}},_dedummify:function(){for(var t=!0;t;){t=!1;for(var e=0;e<this.graph.links.length;e++){var i=this.graph.links[e];if(0!==i.depthOfDumminess){var n=[];n.unshift({x:i.target.x,y:i.target.y}),n.unshift({x:i.source.x,y:i.source.y});for(var s=i,r=i.depthOfDumminess,o=0;o<r;o++){var a=s.source.incoming[0];n.unshift({x:a.source.x,y:a.source.y}),s=a}i.changeSource(s.source),i.depthOfDumminess=0,n.length>2?(n.splice(0,1),n.splice(n.length-1),i.points=n):i.points=[],t=!0;break}}}},_optimizeCrossings:function(){for(var t,e=-1,i=0;0!==e&&!(i++>3);){for(e=0,t=this.layers.length-1;t>=1;t--)e+=this.optimizeLayerCrossings(!1,t);for(t=0;t<this.layers.length-1;t++)e+=this.optimizeLayerCrossings(!0,t)}},calcUpData:function(t){if(0!==t){var e,i,n,s=this.layers[t],r=new d,o=this.layers[t-1];for(e=0;e<o.length;e++)r.add(o[e]);for(e=0;e<s.length;e++){var a=s[e],h=0,l=0;for(i=0;i<a.incoming.length;i++)n=a.incoming[i],r.contains(n.source)&&(l++,h+=n.source.gridPosition);for(i=0;i<a.outgoing.length;i++)n=a.outgoing[i],r.contains(n.target)&&(l++,h+=n.target.gridPosition);l>0?(a.uBaryCenter=h/l,a.upstreamLinkCount=l):(a.uBaryCenter=e,a.upstreamLinkCount=0)}}},calcDownData:function(t){if(t!==this.layers.length-1){var e,i,n,s=this.layers[t],r=new d,o=this.layers[t+1];for(e=0;e<o.length;e++)r.add(o[e]);for(e=0;e<s.length;e++){var a=s[e],h=0,l=0;for(i=0;i<a.incoming.length;i++)n=a.incoming[i],r.contains(n.source)&&(l++,h+=n.source.gridPosition);for(i=0;i<a.outgoing.length;i++)n=a.outgoing[i],r.contains(n.target)&&(l++,h+=n.target.gridPosition);l>0?(a.dBaryCenter=h/l,a.downstreamLinkCount=l):(a.dBaryCenter=e,a.downstreamLinkCount=0)}}},optimizeLayerCrossings:function(t,e){var i,n,s=(n=t?this.layers[i=e+1]:this.layers[i=e-1]).slice(0);t?this.calcUpData(i):this.calcDownData(i);var r=this;n.sort((function(t,e){var i=r.calcBaryCenter(t),n=r.calcBaryCenter(e);if(Math.abs(i-n)<1e-4)return t.degree()===e.degree()?r.compareByIndex(t,e):t.degree()<e.degree()?1:-1;var s=1e3*(n-i);return s>0?-1:s<0?1:r.compareByIndex(t,e)}));var o,a=0;for(o=0;o<n.length;o++)n[o]!==s[o]&&a++;if(a>0){var h=0;for(o=0;o<n.length;o++){n[o].gridPosition=h++}}return a},_swapPairs:function(){for(var t=this.options.layeredIterations,e=0;!(e++>t);)for(var i=e%4<=1,n=e%4==1,s=i?0:this.layers.length-1;i?s<=this.layers.length-1:s>=0;s+=i?1:-1){for(var r=this.layers[s],o=!1,a=!0,h=0,l=0;l<r.length-1;l++){var c=0,d=0,u=0;if(a?(0!==s&&(c=this.countLinksCrossingBetweenTwoLayers(s-1,s)),s!==this.layers.length-1&&(d=this.countLinksCrossingBetweenTwoLayers(s,s+1)),i?c*=2:d*=2,u=c+d):u=h,0!==u){var p=r[l],f=r[l+1],g=p.gridPosition,m=f.gridPosition;r[l]=f,r[l+1]=p,p.gridPosition=m,f.gridPosition=g,c=0,0!==s&&(c=this.countLinksCrossingBetweenTwoLayers(s-1,s)),d=0,s!==this.layers.length-1&&(d=this.countLinksCrossingBetweenTwoLayers(s,s+1)),i?c*=2:d*=2;var v=c+d;(n?v>=u:v>u)?(p=r[l],f=r[l+1],g=p.gridPosition,m=f.gridPosition,r[l]=f,r[l+1]=p,p.gridPosition=m,f.gridPosition=g,h=u,a=!1):(o=!0,a=!0)}}o&&(s!==this.layers.length-1&&this.calcUpData(s+1),0!==s&&this.calcDownData(s-1))}},countLinksCrossingBetweenTwoLayers:function(t,e){var i,n=0,s=new d,r=this.layers[t];for(i=0;i<r.length;i++)s.add(r[i]);var o=new d,a=this.layers[e];for(i=0;i<a.length;i++)o.add(a[i]);var h=new d,l=[],c=[];s.forEach((function(t){p.addRange(c,t.incoming),p.addRange(c,t.outgoing)}));for(var u=0;u<c.length;u++){var f=c[u];s.contains(f.source)&&o.contains(f.target)?(h.add(f),l.push(f)):o.contains(f.source)&&s.contains(f.target)&&l.push(f)}for(var g=0;g<l.length;g++)for(var m=l[g],v=0;v<l.length;v++)if(g!==v){var y,b,w,x,_=l[v];h.contains(m)?(y=m.source,b=m.target):(y=m.target,b=m.source),h.contains(_)?(w=_.source,x=_.target):(w=_.target,x=_.source);var k=y.gridPosition,C=b.gridPosition;(k-w.gridPosition)*(C-x.gridPosition)<0&&n++}return n/2},calcBaryCenter:function(t){var e=t.upstreamLinkCount,i=t.downstreamLinkCount,n=t.uBaryCenter,s=t.dBaryCenter;return e>0&&i>0?(n+s)/2:e>0?n:i>0?s:0},_gridPositionComparer:function(t,e){return t.gridPosition<e.gridPosition?-1:t.gridPosition>e.gridPosition?1:0},_positionAscendingComparer:function(t,e){return t.k<e.k?-1:t.k>e.k?1:0},_positionDescendingComparer:function(t,e){return t.k<e.k?1:t.k>e.k?-1:0},_firstVirtualNode:function(t){for(var e=0;e<t.length;e++)if(t[e].isVirtual)return e;return-1},compareByIndex:function(t,e){var i=t.index,n=e.index;return i<n?1:i>n?-1:0},intDiv:function(t,e){return(t-t%e)/e},nextVirtualNode:function(t,e){for(var i=e.layerIndex+1;i<t.length;++i)if(t[i].isVirtual)return t[i];return null}}),C=i.Class.extend({init:function(t,e){if(p.isUndefined(t))throw"No diagram given";this.diagram=t,this.nodeMap=new c,this.linkMap=new c,this.capture(e||t)},capture:function(t){var e,i,s,r,o,a,h;if(t instanceof n.Graph){for(r=0;r<t.nodes.length;r++)s=(e=t.nodes[r]).associatedShape,this.nodeMap.set(s.visual.domElement.id,new l(e.x,e.y,e.width,e.height));for(r=0;r<t.links.length;r++)o=(a=t.links[r]).associatedConnection,this.linkMap.set(o.visual.domElement.id,a.points())}else if(t instanceof Array)for(i=t,r=0;r<i.length;r++)(s=(e=i[r]).associatedShape)&&this.nodeMap.set(s.visual.domElement.id,new l(e.x,e.y,e.width,e.height));else if(t.hasOwnProperty("links")&&t.hasOwnProperty("nodes")){for(i=t.nodes,h=t.links,r=0;r<i.length;r++)(s=(e=i[r]).associatedShape)&&this.nodeMap.set(s.visual.domElement.id,new l(e.x,e.y,e.width,e.height));for(r=0;r<h.length;r++)(o=(a=h[r]).associatedConnection)&&this.linkMap.set(o.visual.domElement.id,a.points)}else{var c=this.diagram.shapes,d=this.diagram.connections;for(r=0;r<c.length;r++)s=c[r],this.nodeMap.set(s.visual.domElement.id,s.bounds());for(r=0;r<d.length;r++)o=d[r],this.linkMap.set(o.visual.domElement.id,o.points())}}});a(n,{init:function(t){i.init(t,n.ui)},SpringLayout:w,TreeLayout:_,GraphAdapter:b,LayeredLayout:k,LayoutBase:y,LayoutState:C})}(window.kendo.jQuery),function(t,e){var i=kendo.dataviz,n=i.diagram,s=kendo.ui.Widget,r=kendo.Class,o=t.proxy,a=kendo.deepExtend,h=kendo.data.HierarchicalDataSource,l=n.Canvas,c=n.Group,d=n.Visual,u=n.Rectangle,p=n.Circle,f=n.CompositeTransform,g=n.Rect,m=n.Path,v=n.DeleteShapeUnit,y=n.DeleteConnectionUnit,b=n.TextBlock,w=n.Image,x=n.Point,_=n.Intersect,k=n.ConnectionEditAdorner,C=n.UndoRedoService,S=n.ToolService,T=n.Selector,P=n.ResizingAdorner,A=n.ConnectorsAdorner,z=n.Cursors,D=n.Utils,E=kendo.Observable,M=n.Ticker,L=n.ToBackUnit,I=n.ToFrontUnit,B=n.Dictionary,R=n.PolylineRouter,O=n.CascadingRouter,N=D.isUndefined,V=D.isDefined,F=t.isArray,H=kendo.isFunction,U=D.isString,$=".kendoDiagram",j=Number.MAX_VALUE,G=-Number.MAX_VALUE;n.DefaultConnectors=[{name:"Top",description:"Top Connector"},{name:"Right",description:"Right Connector"},{name:"Bottom",description:"Bottom Connector"},{name:"Left",Description:"Left Connector"},{name:"Auto",Description:"Auto Connector",position:function(t){return t.getPosition("center")}}],n.shapeDefaults=function(t){var e={type:"rectangle",path:"",visual:null,x:0,y:0,minWidth:20,minHeight:20,width:100,height:100,hover:{},connectors:n.DefaultConnectors,rotation:{angle:0}};return D.simpleExtend(e,t),e};var W=kendo.Class.extend({init:function(t){this.pan=t.pan,this.diagram=t.diagram},initState:function(){this.from=this.diagram.pan(),this.to=this.pan},update:function(t){var e=this.diagram;e._storePan(new x(this.from.x+(this.to.x-this.from.x)*t,this.from.y+(this.to.y-this.from.y)*t)),e._transformMainLayer()}});function q(t){return t.options.name.toLowerCase()==="Auto".toLowerCase()}function Y(t,e){for(var i,n=9007199254740992,s=e.connectors,r=0;r<s.length;r++){var o=s[r];if(!q(o)){var a=t.distanceTo(o.position());a<n&&(n=a,i=o)}}return i}function Q(t,e){var i,n,s=[];for(i=0;i<e.length;i++){n=e[i];for(var r=0;r<t.children.length;r++){if(t.children[r]==n.domElement){s.push(r);break}}}return s}var X=E.extend({init:function(t,e){E.fn.init.call(this),this.options=a({id:n.randomId()},this.options,t),this.isSelected=!1,this.model=e,this.visual=new c({id:this.options.id}),this._template()},options:{background:"Green",hover:{},cursor:z.grip,content:{align:"center middle",text:""},selectable:!0,serializable:!0,enable:!0},_getCursor:function(t){return this.adorner?this.adorner._getCursor(t):this.options.cursor},visible:function(t){if(N(t))return this.visual.visible();this.visual.visible(t)},bounds:function(){},refresh:function(){this.visual.redraw()},position:function(t){this.options.x=t.x,this.options.y=t.y,this.visual.position(t)},toString:function(){return this.options.id},serialize:function(){var t=a({},{options:this.options});return this.model&&(t.model=this.model.toString()),t},content:function(t){if(void 0!==t){var e=this.bounds(),i=a({text:"",width:e.width,height:e.height},this.options.content);n.Utils.isString(t)?(this.options.content.text=t,i.text=t):this.options.content=i,this.shapeVisual instanceof b&&(this._contentVisual=this.shapeVisual),!this._contentVisual&&this.options.content.text&&(this._contentVisual=new b,this.visual.append(this._contentVisual)),this._contentVisual&&this._contentVisual.redraw(i)}return this.options.content.text},_hitTest:function(t){var e=this.bounds();return this.visible()&&e.contains(t)&&this.options.enable},_template:function(){if(this.options.content.template){var t=this.model||{},e=kendo.template(this.options.content.template,{paramName:"item"});this.options.content.text=e(t)}},_canSelect:function(){return this.options.selectable&&"none"!==this.diagram.options.selectable.type}}),Z=r.extend({init:function(t,e){this.options=a({},this.options,e),this.connections=[],this.shape=t},options:{width:7,height:7,background:"Yellow",hover:{}},position:function(){return this.options.position?this.options.position(this.shape):this.shape.getPosition(this.options.name)},toString:function(){return{shapeId:this.shape.toString(),connector:this.options.name}}});Z.parse=function(t,e){for(var i=e.split(":"),n=i[0],s=i[1]||"Auto",r=0;r<t.shapes.length;r++){var o=t.shapes[r];if(o.options.id==n)return o.getConnector(s.trim())}};var K=X.extend({init:function(t,e){var i=t.diagram;delete t.diagram,X.fn.init.call(this,t,e),this.options.diagram=i,t=this.options,this.connectors=[],this.type=t.type,this.shapeVisual=K.createShapeVisual(this.options),this.visual.append(this.shapeVisual),this.bounds(new g(t.x,t.y,Math.floor(t.width),Math.floor(t.height))),this._createConnectors(),this.parentContainer=null,this.isContainer=!1,this.isCollapsed=!1,this.id=this.visual.domElement.id,this.content(this.content()),this._rotate(),t.hasOwnProperty("layout")&&void 0!==t.layout&&(this.layout=t.layout.bind(t))},options:n.shapeDefaults(),_createConnectors:function(){var t,e,i=this.options,n=i.connectors.length,s=i.connectorDefaults;for(e=0;e<n;e++)t=new Z(this,a({},s,i.connectors[e])),this.connectors.push(t)},bounds:function(t){var e,i,n,s;if(s=this.options,t)if(U(t))switch(t){case"transformed":n=this._transformedBounds();break;case"absolute":n=this._transformedBounds();var r=this.diagram._pan;n.x+=r.x,n.y+=r.y;break;case"rotated":n=this._rotatedBounds();break;default:n=this._bounds}else e=t.topLeft(),s.x=e.x,s.y=e.y,s.width=Math.max(t.width,s.minWidth),s.height=Math.max(t.height,s.minHeight),this._bounds=new g(s.x,s.y,s.width,s.height),this.visual.position(e),this.redraw({width:s.width,height:s.height}),this.refreshConnections(),this._triggerBoundsChange();else n=this._bounds;return this.shapeVisual._measured||(i=this.shapeVisual._measure())&&(this.shapeVisual.options.autoSize?this.bounds(new g(s.x,s.y,i.width,i.height)):this.shapeVisual.redraw()),n},position:function(t){if(!t)return this._bounds.topLeft();this.bounds(new g(t.x,t.y,this._bounds.width,this._bounds.height))},clone:function(){var t=this.serialize();t.options.id=n.randomId();var e=new K(t.options);return e.diagram=this.diagram,e},select:function(t){var e,i,n,s=this.diagram;if(N(t)&&(t=!0),this._canSelect()&&this.isSelected!=t)return n=this.diagram.options.selectable.type,e=[],i=[],this.isSelected=t,this.isSelected?("single"===n&&this.diagram.select(!1),s._selectedItems.push(this),e.push(this)):(D.remove(s._selectedItems,this),i.push(this)),s._internalSelection||s._selectionChanged(e,i),!0},rotate:function(t,e){var i=this.visual.rotate();if(void 0!==t){var n,s,r=this.bounds(),o=new x(r.width/2,r.height/2);e&&(n=t-i.angle,s=r.center().rotate(e,360-n).minus(o),this._rotationOffset=this._rotationOffset.plus(s.minus(r.topLeft())),this.position(s)),this.visual.rotate(t,o),this.options.rotation.angle=t,this.diagram&&this.diagram._connectorsAdorner&&this.diagram._connectorsAdorner.refresh(),this.refreshConnections(),this.diagram&&this.diagram.trigger("itemRotate",{item:this})}return i},connections:function(t){var e,i,n,s,r=[];for(e=0;e<this.connectors.length;e++)for(s=this.connectors[e].connections,i=0;i<s.length;i++)if(n=s[i],"out"==t){var o=n.source();o.shape&&o.shape==this&&r.push(n)}else if("in"==t){var a=n.target();a.shape&&a.shape==this&&r.push(n)}else r.push(n);return r},refreshConnections:function(){t.each(this.connections(),(function(){this.refresh()}))},getConnector:function(t){var e,i;if(!U(t))return t instanceof x?Y(t,this):this.connectors.length?this.connectors[0]:null;for(t=t.toLocaleLowerCase(),e=0;e<this.connectors.length;e++)if((i=this.connectors[e]).options.name.toLocaleLowerCase()==t)return i},getPosition:function(t){var e=this.bounds(),i=t[0].toLowerCase()+t.slice(1);return H(e[i])?this._transformPoint(e[i]()):e.center()},redraw:function(t){t&&(this.options=a({},this.options,t)),this._contentVisual&&this._contentVisual.redraw({width:this.options.width,height:this.options.height}),this.shapeVisual.redraw(t),t&&t.content&&this.content(t.content)},_triggerBoundsChange:function(){this.diagram&&this.diagram.trigger("itemBoundsChange",{item:this,bounds:this._bounds.clone()})},_transformPoint:function(t){var e=this.rotate(),i=this.bounds().topLeft();return e.angle&&t.rotate(e.center().plus(i),360-e.angle),t},_transformedBounds:function(){var t=this.bounds(),e=t.topLeft(),i=t.bottomRight();return g.fromPoints(this.diagram.modelToView(e),this.diagram.modelToView(i))},_rotatedBounds:function(){var t=this.bounds().rotatedBounds(this.rotate().angle),e=t.topLeft(),i=t.bottomRight();return g.fromPoints(e,i)},_rotate:function(){var t=this.options.rotation;t&&t.angle&&this.rotate(t.angle),this._rotationOffset=new x},_hover:function(t){var e=this.options,i=e.hover,n=e.stroke,s=e.background;t&&V(i.stroke)&&(n=a({},n,i.stroke)),t&&V(i.background)&&(s=i.background),this.shapeVisual.redraw({stroke:n,background:s}),this.diagram._showConnectors(this,t)},_hitTest:function(t){if(this.visible()){var e,i=this.bounds(),n=this.rotate().angle;if(t.isEmpty&&!t.isEmpty())return _.rects(t,i,n||0);if(e=t.clone().rotate(i.center(),n),i.contains(e))return this}}});K.createShapeVisual=function(t){var e=t.diagram;delete t.diagram;var i,n=a({},t,{x:0,y:0}),s=n.visual,r=n.type;if(void 0!==window.DOMParser)i=function(t){return(new window.DOMParser).parseFromString(t,"image/svg+xml")};else{if(void 0===window.ActiveXObject||!new window.ActiveXObject("Microsoft.XMLDOM"))throw new Error("No XML parser found");i=function(t){var e=new window.ActiveXObject("Microsoft.XMLDOM");return e.async="false",e.loadXML(t),e}}return kendo.isFunction(s)||"external"!==n.serializationSource?n.path?function(t,e){return e.data=t,new m(e)}(n.path,n):H(s)?function(t,e,i){return t.call(e,i)}(s,this,n):U(r)?function(t,e){switch(t.toLocaleLowerCase()){case"rectangle":return new u(e);case"circle":return new p(e);case"text":return new b(e);case"image":return new w(e);case"svg":return n=e.definition,s=i('<svg xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg">'+n+"</svg>"),r=document.importNode(s.childNodes[0].childNodes[0],!0),(o=new c).append(new d(r)),o;default:return new m(e)}var n,s,r,o}(n.type.toLocaleLowerCase(),n):new u(n):function(t,i,n){if(e.libraries&&e.libraries.length>0)for(var s=0;s<e.libraries.length;s++)for(var r=e.libraries[s],o=0;o<r.length;o++){var a=r[o];if(a.options.name===t&&"external"===a.options.serializationSource)return i.layout=a.options.layout,i.visual=a.options.visual,i.rebuild=a.options.rebuild,a.options.visual(n)}}(n.name,t,n)};var J=X.extend({init:function(t,e,i,n){X.fn.init.call(this,i,n),this._router=new R(this),this.path=new m(this.options),this.path.background("none"),this.visual.append(this.path),this._sourcePoint=this._targetPoint=new x,this.source(t),this.target(e),this.content(this.options.content.text),this.definers=[],V(i)&&i.points&&this.points(i.points),this.refresh()},options:{hover:{stroke:{}},startCap:"none",endCap:"none",points:[],selectable:!0},sourcePoint:function(){return this._resolvedSourceConnector?this._resolvedSourceConnector.position():this._sourcePoint},source:function(t,e){return V(t)&&(e&&this.diagram?this.diagram.undoRedoService.addCompositeItem(new n.ConnectionEditUnit(this,t)):(void 0!==t&&(this.from=t),null===t?this.sourceConnector&&(this._sourcePoint=this._resolvedSourceConnector.position(),this._clearSourceConnector()):t instanceof Z?(this.sourceConnector=t,this.sourceConnector.connections.push(this),this.refresh()):t instanceof x?(this._sourcePoint=t,this.sourceConnector&&this._clearSourceConnector(),this.refresh()):t instanceof K&&(this.sourceConnector=t.getConnector("Auto"),this.sourceConnector.connections.push(this),this.refresh()))),this.sourceConnector?this.sourceConnector:this._sourcePoint},sourceDefiner:function(t){if(!t)return this._sourceDefiner||(this._sourceDefiner=new n.PathDefiner(this.sourcePoint(),null,null)),this._sourceDefiner;if(!(t instanceof n.PathDefiner))throw"The sourceDefiner needs to be a PathDefiner.";t.left=null,this._sourceDefiner=t,this.source(t.point)},targetPoint:function(){return this._resolvedTargetConnector?this._resolvedTargetConnector.position():this._targetPoint},target:function(t,e){return V(t)&&(e&&this.diagram?this.diagram.undoRedoService.addCompositeItem(new n.ConnectionEditUnit(this,t)):(void 0!==t&&(this.to=t),null===t?this.targetConnector&&(this._targetPoint=this._resolvedTargetConnector.position(),this._clearTargetConnector()):t instanceof Z?(this.targetConnector=t,this.targetConnector.connections.push(this),this.refresh()):t instanceof x?(this._targetPoint=t,this.targetConnector&&this._clearTargetConnector(),this.refresh()):t instanceof K&&(this.targetConnector=t.getConnector("Auto"),this.targetConnector&&(this.targetConnector.connections.push(this),this.refresh())))),this.targetConnector?this.targetConnector:this._targetPoint},targetDefiner:function(t){if(!t)return this._targetDefiner||(this._targetDefiner=new n.PathDefiner(this.targetPoint(),null,null)),this._targetDefiner;if(!(t instanceof n.PathDefiner))throw"The sourceDefiner needs to be a PathDefiner.";t.right=null,this._targetDefiner=t,this.target(t.point)},content:function(t){var e=X.fn.content.call(this,t);return this.refresh(),e},select:function(t){var e,i,n,s=this.diagram;if(this._canSelect()&&this.isSelected!==t)return this.isSelected=t,e=[],i=[],n=this.diagram.options.selectable.type,this.isSelected?("single"===n&&this.diagram.select(!1),this.adorner=new k(this,this.options.select),s._adorn(this.adorner,!0),s._selectedItems.push(this),e.push(this)):this.adorner&&(s._adorn(this.adorner,!1),D.remove(s._selectedItems,this),this.adorner=void 0,i.push(this)),this.refresh(),s._internalSelection||s._selectionChanged(e,i),!0},bounds:function(t){if(!t||U(t))return this._bounds;this._bounds=t},type:function(t){if(!t)return this._type;if(t!==this._type){switch(this._type=t,t.toLowerCase()){case"Cascading".toLowerCase():this._router=new O(this);break;case"Polyline".toLowerCase():this._router=new R(this);break;default:throw"Unsupported connection type."}this.refresh()}},points:function(t){if(!t){var e=[];if(V(this.definers))for(var i=0;i<this.definers.length;i++)e.push(this.definers[i].point);return e}this.definers=[];for(var s=0;s<t.length;s++){var r=t[s];if(r instanceof n.Point)this.definers.push(new n.PathDefiner(r));else{if(!r.hasOwnProperty("x")||!r.hasOwnProperty("y"))throw"A Connection point needs to be a Point or an object with x and y properties.";this.definers.push(new n.PathDefiner(new x(r.x,r.y)))}}},allPoints:function(){var t=[this.sourcePoint()];if(this.definers)for(var e=0;e<this.definers.length;e++)t.push(this.definers[e].point);return t.push(this.targetPoint()),t},refresh:function(){!function(t){var e,i,n,s,r,o,a=9007199254740992,h=t.source(),l=t.target(),c=[0,2,3,1,4];if(h instanceof x?e=h:h instanceof Z&&(q(h)?n=h.shape:(t._resolvedSourceConnector=h,e=h.position())),l instanceof x?i=l:l instanceof Z&&(q(l)?s=l.shape:(t._resolvedTargetConnector=l,i=l.position())),e)s&&(t._resolvedTargetConnector=Y(e,s));else if(n)if(i)t._resolvedSourceConnector=Y(i,n);else if(s)for(var d=0;d<n.connectors.length;d++)if(o=5==n.connectors.length?c[d]:d,!q(r=n.connectors[o])){var u=r.position(),p=Y(u,s),f=Math.round(p.position().distanceTo(u));f<a&&(a=f,t._resolvedSourceConnector=r,t._resolvedTargetConnector=p)}}(this);var t,e,i,n,s=this.sourcePoint(),r=this.targetPoint();this._refreshPath(),t=this._bounds.topLeft(),e=s.minus(t),i=r.minus(t),this._contentVisual&&(n=x.fn.middleOf(e,i),this._contentVisual.position(new x(n.x+t.x,n.y+t.y))),this.adorner&&this.adorner.refresh()},redraw:function(t){this.options=a({},this.options,t),this.content(this.options.content.text),V(this.options.points)&&this.options.points.length>0&&(this.points(this.options.points),this._refreshPath()),this.path.redraw(t)},clone:function(){var t=this.serialize(),e=new J(this.from,this.to,t.options);return e.diagram=this.diagram,e},serialize:function(){var t=a({},{options:this.options,from:this.from.toString(),to:this.to.toString()});return this.model&&(t.model=this.model.toString()),t.options.points=this.points(),t},_hitTest:function(t){if(this.visible()){var e=new x(t.x,t.y),i=this.sourcePoint(),n=this.targetPoint();if(t.isEmpty&&!t.isEmpty()&&t.contains(i)&&t.contains(n))return this;if(this._router.hitTest(e))return this}},_hover:function(t){var e=(this.options.stroke||{}).color;t&&V(this.options.hover.stroke.color)&&(e=this.options.hover.stroke.color),this.path.redraw({stroke:{color:e}})},_calcPathData:function(){function t(t){return t.x+" "+t.y}this._router&&this._router.route();for(var e=this.sourcePoint(),i=this.targetPoint(),n="M"+t(e),s=this.points(),r=0;r<s.length;r++){n+=" L"+t(s[r])}return n+" L"+t(i)},_refreshPath:function(){N(this.path)||(this._drawPath(this._calcPathData()),this.bounds(this._router.getBounds()))},_drawPath:function(t){this.path.redraw({data:t})},_clearSourceConnector:function(){D.remove(this.sourceConnector.connections,this),this.sourceConnector=void 0,this._resolvedSourceConnector=void 0},_clearTargetConnector:function(){D.remove(this.targetConnector.connections,this),this.targetConnector=void 0,this._resolvedTargetConnector=void 0}}),tt=s.extend({init:function(e,i){kendo.destroy(e),s.fn.init.call(this,e,i),(e=this.element).empty(),this._initTheme(),this._extendLayoutOptions(this.options),this.element.addClass("k-widget k-diagram").attr("role","diagram");var n=t("<div class='k-canvas-container'></div>").appendTo(e)[0];this.canvas=new l(n),this.options.useScroller&&(this.scrollable=t("<div />").appendTo(this.element).append(this.canvas.element)),this.mainLayer=new c({id:"main-layer"}),this.canvas.append(this.mainLayer),this.adornerLayer=new c({id:"adorner-layer"}),this.canvas.append(this.adornerLayer),this.libraries=[],this.toolService=new S(this),this._attachEvents(),this._initialize(),this._fetchFreshData(),this._resizingAdorner=new P(this,{editable:this.options.editable}),this._connectorsAdorner=new A(this),this._adorn(this._resizingAdorner,!0),this._adorn(this._connectorsAdorner,!0),this.element.on("mousemove"+$,o(this._mouseMove,this)).on("mouseup"+$,o(this._mouseUp,this)).on("dblclick"+$,o(this._doubleClick,this)).on("mousedown"+$,o(this._mouseDown,this)).mousewheel(o(this._wheel,this),{ns:$}).on("keydown"+$,o(this._keydown,this)).on("mouseover"+$,o(this._mouseover,this)).on("mouseout"+$,o(this._mouseout,this)),this.selector=new T(this),this._clipboard=[],this._drop(),this._initEditor(),this._autosizeCanvas(),this.options.layout&&this.layout(this.options.layout),this.pauseMouseHandlers=!1,this._createShapes(),this._createConnections()},options:{name:"Diagram",zoomRate:1.1,dataSource:{},draggable:!0,template:"",autoBind:!0,editable:{rotate:{},resize:{},text:!0},useScroller:!0,tooltip:{enabled:!0,format:"{0}"},copy:{enabled:!0,offsetX:20,offsetY:20},editor:{height:20,margin:10,fontSize:15},selectable:{type:"multiple",inclusive:!0},snap:{enabled:!0,size:10,angle:10},shapeDefaults:n.shapeDefaults({undoable:!0}),connectionDefaults:{},shapes:[],connections:[]},events:["zoomEnd","zoomStart","pan","select","itemRotate","itemBoundsChange","change","click"],_mouseover:function(t){t.target._hover&&t.target._hover(!0,t.target._kendoElement)},_mouseout:function(t){t.target._hover&&t.target._hover(!1,t.target._kendoElement)},_initTheme:function(){var t=((i.ui.themes||{})[((this.options||{}).theme||"").toLowerCase()]||{}).diagram;this.options=a({},t,this.options)},_createShapes:function(){var t,e,i=this.options.shapes;for(e=0;e<i.length;e++)t=i[e],this.addShape(t)},_createConnections:function(){var t,e,i,n,s=this.options,r=s.connectionDefaults,o=s.connections;for(n=0;n<o.length;n++)t=o[n],e=this._findConnectionShape(t.from),i=this._findConnectionShape(t.to),this.connect(e,i,a({},r,t))},_findConnectionShape:function(t){return this.getShapeById(t.shapeId).getConnector(t.connector||"Auto")},destroy:function(){s.fn.destroy.call(this),this.clear(),this.element.off($),this.canvas.destroy(!0),this.canvas=void 0,this.destroyScroller(),this.options.draggable&&kendo.ui.DropTarget&&this.element.kendoDropTarget("destroy")},destroyScroller:function(){var t=this.scroller;t&&(t.destroy(),t.element.remove(),this.scroller=null)},save:function(){var t,e={};for(e.shapes=[],e.connections=[],t=0;t<this.shapes.length;t++){var i=this.shapes[t];i.options.serializable&&e.shapes.push(i.options)}for(t=0;t<this.connections.length;t++){var n=this.connections[t],s=a({},{from:n.from.toString(),to:n.to.toString()},n.options);e.connections.push(s)}return e},focus:function(){var t=window.scrollX,e=window.scrollY;this.canvas.focus(),window.scrollTo(t,e)},load:function(t){this.clear(),this.setOptions(t),this._createShapes(),this._createConnections()},clear:function(){this.dataSource&&this._unbindDataSource(),this.select(!1),this.mainLayer.clear(),this._initialize()},connect:function(t,e,i){var n=a({},this.options.connectionDefaults,i),s=new J(t,e,n);return this.addConnection(s)},connected:function(t,e){for(var i=0;i<this.connections.length;i++){var n=this.connections[i];if(n.from==t&&n.to==e)return!0}return!1},addConnection:function(t,e){if(void 0===e&&(e=!0),e){var i=new n.AddConnectionUnit(t,this);this.undoRedoService.add(i)}else t.diagram=this,this.mainLayer.append(t.visual),this.connections.push(t);return t},addShape:function(t,e){var i,s=this.options.shapeDefaults;return t instanceof K?(s=a({},s,e),t.redraw(e),i=t):(s=a({},s,t),i=new K(s)),s.undoable?this.undoRedoService.add(new n.AddShapeUnit(i,this)):(this.shapes.push(i),i.diagram=this,this.mainLayer.append(i.visual)),this.trigger("change",{added:[i],removed:[]}),i.redraw(),i.hasOwnProperty("layout")&&i.layout(i),i},remove:function(t,e){var i=F(t);if(N(e)&&(e=!0),e&&this.undoRedoService.begin(),i){t=t.slice(0);for(var n=0;n<t.length;n++)this._removeItem(t[n],e)}else(t instanceof K||t instanceof J)&&this._removeItem(t,e);e&&this.undoRedoService.commit(),this.trigger("change",{added:[],removed:i?t:[t]})},undo:function(){this.undoRedoService.undo()},redo:function(){this.undoRedoService.redo()},select:function(t,e){var i,n,s,r,o,h,l,c=(e=a({addToSelection:!1},e)).addToSelection;if(void 0===t)return this._selectedItems;if(this._internalSelection=!0,h=[],o=[],!c)for(;this._selectedItems.length>0;)(n=this._selectedItems[0]).select(!1)&&h.push(n);if(D.isBoolean(t))!1!==t&&this.select("all");else if(t instanceof g)for(r=t,s=this.shapes.concat(this.connections),i=0;i<s.length;i++)n=s[i],r&&!n._hitTest(r)||!n.options.enable||n.select(!0)&&o.push(n);else if(t instanceof Array)for(i=0;i<t.length;i++)(n=t[i])instanceof X&&n.select(!0)&&o.push(n);else if(t instanceof X)t.select(!0)&&o.push(t);else if("none"===(l=t.toString().toLowerCase()))this.select(!1);else if("all"===l)for(s=this.shapes.concat(this.connections),i=0;i<s.length;i++)(n=s[i]).select(!0)&&o.push(n);(o.length>0||h.length>0)&&this._selectionChanged(o,h),this._internalSelection=!1},toFront:function(t,e){t||(t=this._selectedItems.slice());var i,n=this._getDiagramItems(t);if(N(e)||e){i=Q(this.mainLayer.domElement,n.visuals);var s=new I(this,t,i);this.undoRedoService.add(s)}else this.mainLayer.toFront(n.visuals),this._fixOrdering(n,!0)},toBack:function(t,e){t||(t=this._selectedItems.slice());var i,n=this._getDiagramItems(t);if(N(e)||e){i=Q(this.mainLayer.domElement,n.visuals);var s=new L(this,t,i);this.undoRedoService.add(s)}else this.mainLayer.toBack(n.visuals),this._fixOrdering(n,!1)},bringIntoView:function(t,e){var i,s=this.viewport();if(e=a({animate:!1,align:"center middle"},e),t instanceof X?i=t.bounds("transformed"):F(t)?i=this.boundingBox(t):t instanceof g&&(i=t.clone()),"none"!==e.align||!s.contains(i.center())){"none"===e.align&&(e.align="center middle");var r=i.clone();new n.RectAlign(s).align(i,e.align);var o=i.topLeft().minus(r.topLeft());this.options.useScroller||(o=this.pan().plus(o)),this.pan(o,e.animate)}},alignShapes:function(t){N(t)&&(t="Left");var e,i,s,r=this.select();if(0!==r.length){switch(t.toLowerCase()){case"left":case"top":e=j;break;case"right":case"bottom":e=G}for(s=0;s<r.length;s++)if((i=r[s])instanceof K)switch(t.toLowerCase()){case"left":e=Math.min(e,i.options.x);break;case"top":e=Math.min(e,i.options.y);break;case"right":e=Math.max(e,i.options.x);break;case"bottom":e=Math.max(e,i.options.y)}var o=[],a=[];for(s=0;s<r.length;s++)if((i=r[s])instanceof K)switch(a.push(i),o.push(i.bounds()),t.toLowerCase()){case"left":case"right":i.position(new x(e,i.options.y));break;case"top":case"bottom":i.position(new x(i.options.x,e))}var h=new n.TransformUnit(a,o);this.undoRedoService.add(h,!1)}},zoom:function(t,e){if(t){var i=e?e.location:new n.Point(0,0);if(t=this._zoom=this._getValidZoom(t),!N(i)){var s=(i=new n.Point(Math.round(i.x),Math.round(i.y))).times(t),r=this.modelToView(i).minus(s);this._storePan(new n.Point(Math.round(r.x),Math.round(r.y)))}e&&(e.zoom=t),this._panTransform(),this._autosizeCanvas(),this._updateAdorners()}return this._zoom},pan:function(t,e){var i=(e=e||{animated:!1}).animated;return t instanceof x&&!t.equals(this._pan)&&(this._animatePan(t,!i),this._storePan(t),this.trigger("pan",{total:t,delta:e.delta}),this._autosizeCanvas(),this._updateAdorners()),this._pan},viewport:function(){var t=this.element;return new g(0,0,t.width(),t.height())},copy:function(){if(this.options.copy.enabled){this._clipboard=[],this._copyOffset=1;for(var t=0;t<this._selectedItems.length;t++){var e=this._selectedItems[t];this._clipboard.push(e)}}},cut:function(){if(this.options.copy.enabled){this._clipboard=[],this._copyOffset=0;for(var t=0;t<this._selectedItems.length;t++){var e=this._selectedItems[t];this._clipboard.push(e)}this.remove(this._clipboard)}},paste:function(){var t,e,i,n,s,r,o;if(this._clipboard.length>0){var a=new B;for(t=this._copyOffset*this.options.copy.offsetX,e=this._copyOffset*this.options.copy.offsetY,this.select(!1),o=0;o<this._clipboard.length;o++)(i=this._clipboard[o])instanceof J||(n=i.clone(),a.set(i.id,n.id),this._addItem(n),n.position(new x(i.options.x+t,i.options.y+e)),n.select(!0));for(o=0;o<this._clipboard.length;o++)(i=this._clipboard[o])instanceof K||(n=i.clone(),i.source()instanceof Z&&(s=i.source(),a.containsKey(s.shape.id)?(r=this.getShapeById(a.get(s.shape.id)),n.source(r.getConnector(s.options.name))):n.source(new x(i.sourcePoint().x+t,i.sourcePoint().y+e))),i.target()instanceof Z&&(s=i.target(),a.containsKey(s.shape.id)?(r=this.getShapeById(a.get(s.shape.id)),n.target(r.getConnector(s.options.name))):n.target(new x(i.targetPoint().x+t,i.targetPoint().y+e))),this._addItem(n),n.position(new x(i.options.x+t,i.options.y+e)),n.select(!0));this._copyOffset+=1}},boundingBox:function(t,e){var i,n=g.empty(),s=V(t)?this._getDiagramItems(t):{shapes:this.shapes};if(s.shapes.length>0){var r=s.shapes[0];!0===e&&(n.x-=r._rotationOffset.x,n.y-=r._rotationOffset.y),n=r.bounds("rotated");for(var o=1;o<s.shapes.length;o++)i=(r=s.shapes[o]).bounds("rotated"),!0===e&&(i.x-=r._rotationOffset.x,i.y-=r._rotationOffset.y),n=n.union(i)}return n},documentToView:function(e){var i=t(this.canvas.element).offset();return new x(e.x-i.left,e.y-i.top)},viewToDocument:function(e){var i=t(this.canvas.element).offset();return new x(e.x+i.left,e.y+i.top)},viewToModel:function(t){return this._transformWithMatrix(t,this._matrixInvert)},modelToView:function(t){return this._transformWithMatrix(t,this._matrix)},modelToLayer:function(t){return this._transformWithMatrix(t,this._layerMatrix)},layerToModel:function(t){return this._transformWithMatrix(t,this._layerMatrixInvert)},documentToModel:function(t){return this.viewToModel(this.documentToView(t))},modelToDocument:function(t){return this.viewToDocument(this.modelToView(t))},_transformWithMatrix:function(t,e){var i=t;if(t instanceof x)e&&(i=e.apply(t));else{var n=this._transformWithMatrix(t.topLeft(),e),s=this._transformWithMatrix(t.bottomRight(),e);i=g.fromPoints(n,s)}return i},setDataSource:function(t){this.options.dataSource=t,this._dataSource(),this.options.autoBind&&this.dataSource.fetch()},layout:function(t){var e,i;switch(this.isLayouting=!0,N(t)&&(t=this.options.layout),(e=N(t)||N(t.type)?"Tree":t.type).toLowerCase()){case"tree":i=new n.TreeLayout(this);break;case"layered":i=new n.LayeredLayout(this);break;case"forcedirected":case"force":case"spring":case"springembedder":i=new n.SpringLayout(this);break;default:throw"Layout algorithm '"+e+"' is not supported."}var s=new n.LayoutState(this),r=i.layout(t);if(r){var o=new n.LayoutUndoUnit(s,r,t?t.animate:null);this.undoRedoService.add(o)}this.isLayouting=!1},getShapeById:function(t){var e;return(e=D.first(this.shapes,(function(e){return e.visual.domElement.id===t})))?e:e=D.first(this.connections,(function(e){return e.visual.domElement.id===t}))},editor:function(t,e){var i=this._editor;if(N(t.options.editable)||t.options.editable.text){i.options=a(this.options.editor,e),this._editItem=t,this._showEditor();var n=t.content();i._originalContent=n,i.content(n),i.focus()}return i},_initEditor:function(){this._editor=new n.TextBlockEditor,this._editor.bind("finishEdit",t.proxy(this._finishEditShape,this))},_showEditor:function(){var t=this._editor;t.visible(!0),this.element.context.appendChild(t.domElement),this._positionEditor()},_positionEditor:function(){var e=this._editor,i=e.options,n=t(e.domElement),s=this.modelToView(this._editItem.bounds()),r=function(t){return parseInt(n.css(t),10)},o=new x(r("borderLeftWidth")+r("paddingLeft"),r("borderTopWidth")+r("paddingTop")),a=new x(i.margin,s.height/2-i.height/2).minus(o);e.size(s.width-2*i.margin,i.height),e.position(s.topLeft().plus(a)),n.css({fontSize:i.fontSize})},_extendLayoutOptions:function(t){t.layout&&(t.layout=a(n.LayoutBase.fn.defaultOptions||{},t.layout))},_finishEditShape:function(){var t=this._editor,e=this._editItem;if(e){var i=new n.ContentChangedUndoUnit(e,t._originalContent,t.content());this.undoRedoService.add(i),t.visible(!1)}},_selectionChanged:function(t,e){this.trigger("select",{selected:t,deselected:e})},_getValidZoom:function(t){return Math.min(Math.max(t,.55),2)},_panTransform:function(t){var e=t||this._pan;this.scroller?(this.scroller.scrollTo(e.x,e.y),this._zoomMainLayer()):(this._pan=e,this._transformMainLayer())},_animatePan:function(t,e){var i=this;if(e)this._panTransform(t);else if(i.scroller)i.scroller.animatedScrollTo(t.x,t.y),i._zoomMainLayer();else{var n=new M;n.addAdapter(new W({pan:t,diagram:this})),n.onStep=function(){i._finishPan()},n.play()}},_finishPan:function(){this.trigger("pan",{total:this._pan,delta:Number.NaN})},_storePan:function(t){this._pan=t,this._storeViewMatrix()},_zoomMainLayer:function(){var t=this._zoom,e=new f(0,0,t,t);e.render(this.mainLayer.domElement),this._storeLayerMatrix(e),this._storeViewMatrix()},_transformMainLayer:function(){var t=this._pan,e=this._zoom,i=new f(t.x,t.y,e,e);i.render(this.mainLayer.domElement),this._storeLayerMatrix(i),this._storeViewMatrix()},_storeLayerMatrix:function(t){this._layerMatrix=t.toMatrix(),this._layerMatrixInvert=t.invert().toMatrix()},_storeViewMatrix:function(){var t=this._pan,e=this._zoom,i=new f(t.x,t.y,e,e);this._matrix=i.toMatrix(),this._matrixInvert=i.invert().toMatrix()},_toIndex:function(t,e){var i=this._getDiagramItems(t);this.mainLayer.toIndex(i.visuals,e),this._fixOrdering(i,!1)},_drop:function(){var t=this;t.options.draggable&&kendo.ui.DropTarget&&this.element.kendoDropTarget({drop:function(e){var i,n;if(e.draggable&&e.draggable.hint){i=e.draggable.hint.data("data"),n=e.draggable.hintOffset,n=new x(n.left,n.top);var s=t.documentToModel(n);i.x=s.x,i.y=s.y,t.addShape(i)}}})},_fixOrdering:function(t,e){var i,n,s=e?this.shapes.length-1:0,r=e?this.connections.length-1:0;for(i=0;i<t.shapes.length;i++)n=t.shapes[i],D.remove(this.shapes,n),D.insert(this.shapes,n,s);for(i=0;i<t.cons.length;i++)n=t.cons[i],D.remove(this.connections,n),D.insert(this.connections,n,r)},_getDiagramItems:function(t){var e,i={},n=t;for(i.visuals=[],i.shapes=[],i.cons=[],t?F(t)||(n=[t]):n=this._selectedItems.slice(),e=0;e<n.length;e++){var s=n[e];s instanceof K?(i.shapes.push(s),i.visuals.push(s.visual)):s instanceof J&&(i.cons.push(s),i.visuals.push(s.visual))}return i},_removeItem:function(t,e){t.select(!1),t instanceof K?this._removeShape(t,e):t instanceof J&&this._removeConnection(t,e),e||this.mainLayer.remove(t.visual)},_removeShape:function(t,e){var i,n,s,r=[],o=[];for(this.toolService._removeHover(),e?this.undoRedoService.addCompositeItem(new v(t)):D.remove(this.shapes,t),i=0;i<t.connectors.length;i++){s=t.connectors[i];for(var a=0;a<s.connections.length;a++)(n=s.connections[a]).sourceConnector==s?r.push(n):n.targetConnector==s&&o.push(n)}for(i=0;i<r.length;i++)r[i].source(null,e);for(i=0;i<o.length;i++)o[i].target(null,e)},_removeConnection:function(t,e){t.sourceConnector&&D.remove(t.sourceConnector.connections,t),t.targetConnector&&D.remove(t.targetConnector.connections,t),e?this.undoRedoService.addCompositeItem(new y(t)):D.remove(this.connections,t)},_canRectSelect:function(){return"multiple"===this.options.selectable.type},_refreshSource:function(t){var e,i=this,n=t.node,s=t.action,r=t.items;i.options;function o(t){if(!N(t)){var e=D.first(i._dataMap,(function(e){return e.uid===t.uid}));if(e)return e.shape;var n=a({},i.options.shapeDefaults,{dataItem:t});return e=new K(n,t),i.addShape(e),i._dataMap.push({uid:t.uid,shape:e}),e}}function h(t,e){for(var n=0;n<e.length;n++){var s=o(e[n]),r=o(t);if(r&&!i.connected(r,s))i.connect(r,s).type("Cascading")}}if(!t.field){if(s&&"add"!==s){if("remove"===s);else if("itemchange"===s)if(n)r.length&&h(n,r);else for(e=0;e<r.length;e++)o(r[e])}else h(n,r);for(e=0;e<r.length;e++)r[e].load()}i.options.layout&&i.layout(i.options.layout)},_mouseDown:function(t){if(!this.pauseMouseHandlers){var e=this._calculatePosition(t);0===t.button&&this.toolService.start(e,this._meta(t))&&t.preventDefault()}},_addItem:function(t){t instanceof K?this.addShape(t):t instanceof J&&this.addConnection(t)},_mouseUp:function(t){if(!this.pauseMouseHandlers){var e=this._calculatePosition(t);0===t.button&&this.toolService.end(e,this._meta(t))&&t.preventDefault()}},_mouseMove:function(t){if(!this.pauseMouseHandlers){var e=this._calculatePosition(t);0===t.button&&this.toolService.move(e,this._meta(t))&&t.preventDefault()}},_doubleClick:function(t){var e=this._calculatePosition(t);0===t.button&&this.toolService.doubleClick(e,this._meta(t))&&t.preventDefault()},_keydown:function(t){this.toolService.keyDown(t.keyCode,this._meta(t))&&t.preventDefault()},_wheel:function(t){var e=this._calculatePosition(t),i=a(this._meta(t),{delta:t.data.delta});this.toolService.wheel(e,i)&&t.preventDefault()},_meta:function(t){return{ctrlKey:t.ctrlKey,metaKey:t.metaKey,altKey:t.altKey}},_calculatePosition:function(t){var e=void 0===t.pageX?t.originalEvent:t,i=new x(e.pageX,e.pageY);return this.documentToModel(i)},_normalizePointZoom:function(t){return t.times(1/this.zoom())},_initialize:function(){this._zoom=1,this._pan=new x,this.shapes=[],this._selectedItems=[],this.connections=[],this._adorners=[],this._dataMap=[],this.undoRedoService=new C,this.id=n.randomId()},_attachEvents:function(){this.scroller&&(this.bind("itemBoundsChange",t.proxy(this._autosizeCanvas,this)),this.bind("change",t.proxy(this._autosizeCanvas,this)),this.bind("zoomEnd",t.proxy(this._autosizeCanvas,this)))},_fetchFreshData:function(){this._dataSource(),this.options.autoBind&&this.dataSource.fetch()},_dataSource:function(){var t=this.options.dataSource;(t=F(t)?{data:t}:t).fields||(t.fields=[{field:"text"},{field:"url"},{field:"spriteCssClass"},{field:"imageUrl"}]),this.dataSource&&this._refreshHandler&&this._unbindDataSource(),this._refreshHandler=o(this._refreshSource,this),this._errorHandler=o(this._error,this),this.dataSource=h.create(t).bind("change",this._refreshHandler).bind("error",this._errorHandler)},_unbindDataSource:function(){this.dataSource.unbind("change",this._refreshHandler).unbind("error",this._errorHandler)},_error:function(){},_adorn:function(t,e){void 0!==e&&t&&(e?(this._adorners.push(t),this.adornerLayer.append(t.visual)):(D.remove(this._adorners,t),this.adornerLayer.remove(t.visual)))},_showConnectors:function(t,e){e?this._connectorsAdorner.show(t):this._connectorsAdorner.destroy()},_autosizeCanvas:function(t){if(this.scroller){var e=(t||{}).sender||this,i=this._editor,n=e.zoom(),s=e.element,r=new g(0,0,s.width(),s.height()),o=e.boundingBox(e.shapes);o.width=(o.width+o.x)*n,o.height=(o.height+o.y)*n,o=o.union(r),e.canvas.size(o),i&&i.visible()&&this._positionEditor()}},_updateAdorners:function(){for(var t=this._adorners,e=0;e<t.length;e++){var i=t[e];i.refreshBounds&&i.refreshBounds(),i.refresh()}},_refresh:function(){var t;for(t=0;t<this.connections.length;t++)this.connections[t].refresh()}});i.ui.plugin(tt),kendo.deepExtend(n,{Shape:K,Connection:J,Connector:Z})}(window.kendo.jQuery);
//# sourceMappingURL=../../../../Maps/desktop/reporting.desktop.production.js.map
