bizagi.workportal.widgets.widget.extend("bizagi.workportal.widgets.reports",{},{getWidgetName:function(){return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_REPORTS},init:function(e,t,i){this._super(e,t,i)},renderContent:function(){var e=this.getTemplate("reports");return this.content=$.tmpl(e)}}),bizagi.workportal.widgets.widget.extend("bizagi.workportal.widgets.reportsMenu",{},{init:function(e,t,i){this._super(e,t,i),this.endPoint=["Reports","BAMProcess","BAMTask","AnalyticsProcess","AnalyticsTask","AnalyticsSensor","ResourceBAM"],this.reportsMenu=this.getRawReportsJSON()},getWidgetName:function(){return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_REPORTS_MENU},renderContent:function(){var e=this.getTemplate("reportsMenu-container");return this.content=$.tmpl(e)},getRawReportsJSON:function(){return{Reports:[{displayName:this.resources.getResource("workportal-menu-submenu-BAMMenu"),icon:"bz-icon-folder-outline",show:function(){return!!(bizagi.menuSecurity.BAMProcess||bizagi.menuSecurity.BAMTask||bizagi.menuSecurity.BAMResourceMonitor)},endPoint:"",subItems:"BAM"},{displayName:this.resources.getResource("workportal-menu-submenu-AnalyticsMenu"),icon:"bz-icon-folder-outline",show:function(){return!(!bizagi.menuSecurity.AnalyticsProcess&&!bizagi.menuSecurity.AnalyticsTask)},endPoint:"",subItems:"Analytics"},{displayName:this.resources.getResource("workportal-menu-submenu-AnalyticsSensor"),show:bizagi.menuSecurity.AnalyticsSensor,icon:"AnalyticsSensor bz-icon-rules",endPoint:"AnalyticsSensor",subItems:[]}],BAM:[{displayName:this.resources.getResource("workportal-menu-submenu-AnalyticsProcess"),show:bizagi.menuSecurity.BAMProcess,icon:"BAMProcess bz-icon-cogs",endPoint:"BAMProcess",subItems:[]},{displayName:this.resources.getResource("workportal-menu-submenu-AnalyticsTask"),show:bizagi.menuSecurity.BAMTask,icon:"BAMTask bz-icon-sheet-pencil",endPoint:"BAMTask",subItems:[]},{displayName:this.resources.getResource("workportal-menu-submenu-BAMResourceMonitor"),show:bizagi.menuSecurity.BAMResourceMonitor,icon:"BAMResourceMonitor bz-icon-user-manage",endPoint:"ResourceBAM",subItems:[]}],Analytics:[{displayName:this.resources.getResource("workportal-menu-submenu-AnalyticsProcess"),show:bizagi.menuSecurity.AnalyticsProcess,icon:"AnalyticsProcess bz-icon-cogs",endPoint:"AnalyticsProcess",subItems:[]},{displayName:this.resources.getResource("workportal-menu-submenu-AnalyticsTask"),show:bizagi.menuSecurity.AnalyticsTask,icon:"AnalyticsTask bz-icon-sheet-pencil",endPoint:"AnalyticsTask",subItems:[]}],AnalysisQuery:[]}}}),bizagi.workportal.widgets.widget.extend("bizagi.workportal.widgets.reportsChart",{},{init:function(e,t,i){this._super(e,t,i),this.endPoint=bizagi.reporting[i.endPoint],this.endPoint.defaultReport=i.defaultReport||this.endPoint.defaultReport,this.filters=i.filters||{},this.myTeam=[]},getWidgetName:function(){return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_REPORTS_CHART},renderContent:function(){var e=this.getTemplate("reportsChart"),t=this.content=$.tmpl(e,this.endPoint);return void 0!==this.endPoint.callBack&&this[this.endPoint.callBack](),t},loadReportingModule:function(){var e=this,t=bizagi.loader,i=new $.Deferred;return t.init((function(){t.start("reporting").then((function(){e.reportingModule=new bizagi.reporting.facade({proxyPrefix:void 0!==bizagi.proxyPrefix?bizagi.proxyPrefix:""}),i.resolve()}))})),i},myTeamCallBack:function(){var e=this;return $.when(e.dataService.getDataForMyTeam()).done((function(t){var i=$("li[data-report='bamresourcemonitorworkinprogressteam']",e.content);t.items.length?e.myTeam=t:i.css("display","none")}))}}),bizagi.workportal.widgets.reports.extend("bizagi.workportal.widgets.reports",{},{init:function(e,t,i){this._super(e,t,i),this.loadTemplates({reports:bizagi.getTemplate("bizagi.workportal.desktop.widget.reports").concat("#ui-bizagi-workportal-widget-reports"),"reports-elements":bizagi.getTemplate("bizagi.workportal.desktop.widget.reports").concat("#ui-bizagi-workportal-widget-reports-elements"),"reports-empty-elements":bizagi.getTemplate("bizagi.workportal.desktop.widget.reports").concat("#ui-bizagi-workportal-widget-reports-empty-elements"),"reports-query-tree":bizagi.getTemplate("bizagi.workportal.desktop.widget.reports").concat("#ui-bizagi-workportal-widget-reports-query-tree"),"reports-query-confirm":bizagi.getTemplate("bizagi.workportal.desktop.widget.reports").concat("#ui-bizagi-workportal-widget-reports-confirm"),"reports-query-edit":bizagi.getTemplate("bizagi.workportal.desktop.widget.reports").concat("#ui-bizagi-workportal-widget-reports-edit"),useNewEngine:!1})},postRender:function(){this.configureTreeNavigation(),this.configureBackButton(),this.renderReports(),this.scrollVertical({autohide:!1})},getReports:function(e){var t=this,i=new $.Deferred,r=e.idElement||0;return $.when(t.getAnalisysQueries()).done((function(e){var s=[],o=[],n=[];bizagi.menuSecurity.BAMProcess&&o.push({idElement:2,displayName:t.resources.getResource("workportal-menu-submenu-BAMProcess"),icon:"BAMProcess",endPoint:"BAMProcess",childs:[]}),bizagi.menuSecurity.BAMTask&&o.push({idElement:3,displayName:t.resources.getResource("workportal-menu-submenu-BAMTask"),icon:"BAMTask",endPoint:"BAMTask",childs:[]}),bizagi.menuSecurity.BAMResourceMonitor&&o.push({idElement:4,displayName:t.resources.getResource("workportal-menu-submenu-BAMResourceMonitor"),icon:"BAMResourceMonitor",endPoint:"ResourceBAM",childs:[]}),o.length>0&&s.push({idElement:1,displayName:t.resources.getResource("workportal-menu-submenu-BAMMenu"),icon:"",endPoint:"",childs:o}),bizagi.menuSecurity.AnalyticsProcess&&n.push({idElement:11,displayName:t.resources.getResource("workportal-menu-submenu-AnalyticsProcess"),icon:"AnalyticsProcess",endPoint:"AnalyticsProcess",childs:[]}),bizagi.menuSecurity.AnalyticsTask&&n.push({idElement:12,displayName:t.resources.getResource("workportal-menu-submenu-AnalyticsTask"),icon:"AnalyticsTask",endPoint:"AnalyticsTask",childs:[]}),n.length>0&&s.push({idElement:10,displayName:t.resources.getResource("workportal-menu-submenu-AnalyticsMenu"),icon:"",endPoint:"",childs:n}),bizagi.menuSecurity.AnalyticsSensor&&s.push({idElement:13,displayName:t.resources.getResource("workportal-menu-submenu-AnalyticsSensor"),icon:"AnalyticsSensor",endPoint:"AnalyticsSensor",childs:[]}),bizagi.menuSecurity.AnalysisQueries&&e.length>0&&s.push({idElement:20,displayName:t.resources.getResource("workportal-menu-submenu-AnalysisQueries"),icon:"",endPoint:"",childs:e});i.resolve(function e(t,i){var r;return t?$.each(i,(function(i,s){if(void 0===r){if(s.idElement!=t)return e(t,s.childs);r=s.childs}})):r=i,r||{}}(r,s))})),i.promise()},getAnalisysQueries:function(){var e=[],t=100,i=new $.Deferred;return $.when(this.dataService.getAnalisysQueries()).done((function(r){$.each(r.queries,(function(i,r){e.push({idElement:t++,displayName:r.name||"",icon:"",endPoint:r.reportSet,extraArgs:"?idUserQuery="+r.idQuery,activeEdit:!0,description:r.description,idQuery:r.idQuery,childs:[]})})),i.resolve(e)})),i.promise()},renderReports:function(e,t){var i,r,s=this,o=s.getContent(),n=s.getTemplate("reports-elements"),a=s.getTemplate("reports-empty-elements"),c=$("#reports",o);$.when(s.getReports({idElement:e})).done((function(o){c.empty(),(o=o||{}).length>=1?(r=null!=t?$.merge(t,o):o,i=$.tmpl(n,{nodes:r,idParentQuery:e},{checkChildNode:s.checkChildNode})):i=$.tmpl(a,{nodes:r,idParentQuery:e}),i.appendTo(c),s.configureNavTree(c)}))},jsInjection:function(e,t){var i={title:t};return{callback:function(e){this.openModalWindow=function(t,i,r,s,o){var n=this.ownerDocument;e.controller.publish("showDialogWidget",{widgetName:e.genericIframe,widgetURL:"App/Cockpit/"+t,injectCss:[".ui-bizagi-old-render*","@font-face"],modalParameters:{title:"Bizagi"},afterLoad:function(e){this.openBACase=function(t,i){e.bizagi.workportal.desktop.popup.closePopupInstance(),e.controller.publish("closeCurrentDialog");var r=null;i.indexOf("idWorkitem=")>-1&&(r=(r=i.substring(i.indexOf("idWorkitem=")+11)).substring(0,r.indexOf("&"))),e.controller.publish("executeAction",{action:e.routingAction,idCase:t,idWorkItem:r}),e.controller.publish("closeCurrentDialog")},this.buttonCancel_onclick=function(){e.controller.publish("closeCurrentDialog")},this.CloseParentDialog=function(){e.controller.publish("closeCurrentDialog")}},afterLoadParams:{routingAction:e.bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,genericIframe:e.bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_GENERICIFRAME,bizagi:e.bizagi,doc:n}})}},params:i=$.extend(i,{routingAction:bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,genericIframe:bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_GENERICIFRAME,bizagi:bizagi})}},configureNavTree:function(e){var t=this,i=t.getTemplate("reports-query-confirm"),r=t.getTemplate("reports-query-tree");$(".reportsListDisplay",e).click((function(){var e=$(this).data("endpoint"),i=$(this).data("id-element"),s=$(this).data("displayname"),o=$(this).data("maximized")||!1,n=$(this).data("extra-args"),a=$("#categoryTree"),c=t.dataService.serviceLocator.getUrl(e)+n;if(""==e)t.renderReports(i),$.tmpl(r,{idElement:i,queryDisplayName:s}).appendTo(a),t.configureTreeNavigation();else{if("reports"==t.currentPopup)return void bizagi.workportal.desktop.popup.closePopupInstance();var p=t.jsInjection(t.dataService.serviceLocator.getUrl(e),s);if(t.currentPopup="reports",t.publish("showDialogWidget",{widgetName:bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_GENERICIFRAME,widgetURL:c,maximized:o,modalParameters:{title:s,id:e},afterLoad:p.callback,afterLoadParams:p.params}),"reports"==t.params.widgetName)return void bizagi.workportal.desktop.popup.closePopupInstance()}})),$(".editButton").click((function(e){e.stopPropagation(),t.editFolder($(this).parents("ul")),bizagi.workportal.desktop.popup.closePopupInstance()})),$(".deleteButton").click((function(e){e.stopPropagation();var r=$(this).parents("ul").data("idquery"),s=$.tmpl(i);$(s).dialog({resizable:!0,modal:!0,title:t.getResource("workportal-widget-reports-confirm-title"),buttons:[{text:t.getResource("workportal-widget-reports-confirm-delete"),click:function(){t.dataService.deleteQueries(r),$(this).dialog("close"),bizagi.workportal.desktop.popup.closePopupInstance()}},{text:t.getResource("workportal-widget-reports-confirm-cancel"),click:function(){$(this).dialog("close")}}]})}))},configureBackButton:function(){var e=this,t=e.getContent(),i=$("#bt-back",t),r=$("#categoryTree",t);i.click((function(){if($("li",r).length>1){$("li:last-child",r).remove();var t=$("li:last-child").children("#idParent").val();e.renderReports(t)}}))},configureTreeNavigation:function(){var e=this,t=e.getContent(),i=$("#categoryTree",t);$("li:last-child",i).click((function(){$(this).nextAll().remove();var t=$(this).data("id-element");e.renderReports(t)}))},scrollVertical:function(){var e=this.getContent();$("#reports",e).bizagiScrollbar({autohide:!1})},editFolder:function(e){var t=this,i=bizagi.util.trim($(e).find("h3").html()),r=bizagi.util.trim($(".newCaseDescription",e).html()),s=$(e).data("idquery"),o=t.getTemplate("reports-query-edit");$.tmpl(o,{name:i,description:r,idQuery:s}).dialog({resizable:!0,modal:!0,title:t.getResource("workportal-widget-reports-confirm-edit-title"),buttons:[{text:t.getResource("workportal-widget-reports-confirm-save"),click:function(){var e=$("#namequery",this).val(),i=$("#querydescripcion",this).val(),r=$(this).data("idquery");t.dataService.updateQueries({queryName:e,queryDescription:i,idQuery:r}),$(this).dialog("close"),bizagi.workportal.desktop.popup.closePopupInstance()}},{text:t.getResource("workportal-widget-reports-confirm-cancel"),click:function(){$(this).dialog("close")}}]})}}),bizagi.workportal.widgets.reportsMenu.extend("bizagi.workportal.widgets.reportsMenu",{},{init:function(e,t,i){this._super(e,t,i),this.loadTemplates({"reportsMenu-container":bizagi.getTemplate("bizagi.workportal.desktop.widget.reportsMenu").concat("#ui-bizagi-workportal-widget-reportsmenu-container"),"reportsMenu-items":bizagi.getTemplate("bizagi.workportal.desktop.widget.reportsMenu").concat("#ui-bizagi-workportal-widget-reportsmenu-items"),"reportsMenu-itemsdata":bizagi.getTemplate("bizagi.workportal.desktop.widget.reportsMenu").concat("#ui-bizagi-workportal-widget-reportsmenu-itemsdata"),"reportsMenu-tree":bizagi.getTemplate("bizagi.workportal.desktop.widget.reportsMenu").concat("#ui-bizagi-workportal-widget-reportsmenu-tree"),"reportsMenu-noitems":bizagi.getTemplate("bizagi.workportal.desktop.widget.reportsMenu").concat("#ui-bizagi-workportal-widget-reportsmenu-noitems"),"reportsMenu-edition":bizagi.getTemplate("bizagi.workportal.desktop.widget.reportsMenu").concat("#ui-bizagi-workportal-widget-reportsmenu-edition"),"reportsMenu-vldmessage":bizagi.getTemplate("bizagi.workportal.desktop.widget.reportsMenu").concat("#ui-bizagi-workportal-widget-reportsmenu-vldnmessage"),"reportsMenu-delete":bizagi.getTemplate("bizagi.workportal.desktop.widget.reportsMenu").concat("#ui-bizagi-workportal-widget-reportsmenu-delete"),useNewEngine:!1})},postRender:function(){var e=this;$.when(e.buildAnalysisJSON()).done((function(){e.renderReportsMenu("Reports")})),e.eventsHandler()},getAnalysisQueries:function(){var e=this,t=[],i=new $.Deferred;return $.when(e.dataService.getReporstAnalysisQuery()).done((function(r){$.each(r.queries,(function(i,r){t.push({displayName:r.name||"",description:r.description||"",icon:"processIco",show:!0,filters:r.filterParameters,endPoint:e.endPoint[r.reportSet],reportSet:r.reportSet,activeEdit:!0,id:r.id,subItems:[]})})),i.resolve(t)})),i.promise()},renderReportsMenu:function(e){var t=this.getContent(),i=this.getTemplate("reportsMenu-items"),r=this.getTemplate("reportsMenu-noitems"),s=$("#bz-wp-widget-reportsmenu-list",t),o=this.reportsMenu[e];o.length?s.html($.tmpl(i,{elements:o})):s.html($.tmpl(r,{elements:o}))},buildAnalysisJSON:function(){var e=this,t=$.Deferred();return $.when(e.getAnalysisQueries()).pipe((function(i){bizagi.menuSecurity.AnalysisQueries&&i.length>0&&(e.reportsMenu.AnalysisQuery=i,e.reportsMenu.Reports.push({displayName:e.resources.getResource("workportal-menu-submenu-AnalysisQueries"),show:!0,icon:"",endPoint:"",subItems:"AnalysisQuery"})),t.resolve()})),t.promise()},eventsHandler:function(){var e=this,t=e.getContent(),i=$("#bz-wp-widget-reportsmenu-list",t);i.on("click","li.bz-wp-widget-reportsmenu-readmode",(function(t){t.stopPropagation();var i=$(this),r=i.data("subitems"),s=i.data("displayname"),o=i.data("endpoint"),n=i.find(".bz-wp-widget-reportsmenu-itemactions").data("id");e.execSelectedItem(n,r,o),e.buildNavTree(s,r)})),i.on("click",".bz-wp-widget-reportsmenu-action",(function(t){t.stopPropagation(),t.preventDefault();var i=$(this).closest("li.bz-wp-widget-reportsmenu-item"),r=$(this).closest(".bz-wp-widget-reportsmenu-itemactions").data("id");$(this).hasClass("bz-wp-widget-reportsmenu-edit")?e.showReportEdition(r,i):$(this).hasClass("bz-wp-widget-reportsmenu-delete")?e.showDeleteForm(r,i):$(this).hasClass("bz-wp-widget-reportsmenu-cancel")?e.cancelReportAction(r,i):$(this).hasClass("bz-wp-widget-reportsmenu-applyedition")?e.applyReportEdition(r,i):$(this).hasClass("bz-wp-widget-reportsmenu-applydelete")&&e.deleteReport(r,i)})),$("#bz-wp-widget-reportsmenu-navtree",t).on("click","li",(function(t){$(this).nextAll().remove();var i=$(this).data("path");e.renderReportsMenu(i)}))},execSelectedItem:function(e,t,i){if(""===i)this.renderReportsMenu(t);else{var r=e?this.getFiltersById(e):{};this.publish("changeWidget",{widgetName:bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_REPORTS_CHART,endPoint:i,filters:r})}},showDeleteForm:function(e,t){var i=this.getTemplate("reportsMenu-delete"),r=$.tmpl(i,{id:e});t.slideUp("fast",(function(){$(this).removeClass("bz-wp-widget-reportsmenu-readmode").addClass("bz-wp-widget-reportsmenu-edition").html(r)})),t.slideDown("fast")},deleteReport:function(e,t){var i=this,r=i.getContent(),s="id="+e;$.when(i.dataService.deleteReportData(s)).done((function(s){if(!0===s.status){var o=t.nextAll();o.size()>0?(o.slideUp("fast",(function(){t.remove()})),o.slideDown("fast")):t.fadeOut("fast",(function(){$(this).remove()})),i.reportsMenu.AnalysisQuery=jQuery.grep(i.reportsMenu.AnalysisQuery,(function(t){return t.id!==e})),i.reportsMenu.AnalysisQuery.length||(i.reportsMenu.Reports.pop(),$("#bz-wp-widget-reportsmenu-navtree li:nth-of-type(1)",r).trigger("click"))}}))},buildNavTree:function(e,t){var i=this.getContent(),r=this.getTemplate("reportsMenu-tree"),s=$.tmpl(r,{displayName:e,path:t});$("#bz-wp-widget-reportsmenu-navtree",i).append(s)},showReportEdition:function(e,t){var i=this.getTemplate("reportsMenu-edition"),r=this.getReportsData(e),s=$.tmpl(i,{displayName:r[0].displayName,description:r[0].description,id:e});t.slideUp("fast",(function(){$(this).removeClass("bz-wp-widget-reportsmenu-readmode").addClass("bz-wp-widget-reportsmenu-edition").html(s)})),t.slideDown("fast")},applyReportEdition:function(e,t){var i=this,r=t.find("input, textarea");if(i.validateFormElements(r)){var s=i.getReportsData(e),o=r[0].value,n=r[1].value,a="parameters="+JSON.stringify({id:e,name:o,description:n,reportSet:s[0].reportSet,filterParameters:s[0].filters});$.when(i.dataService.updateReportData(a)).done((function(a){if(!0!==a.status){var c=$(r[0]).siblings(".bz-wp-widget-reportmenu-messagecnt"),p=a.message;i.showValidationMessage(p,c)}else s[0].displayName=o,s[0].description=n,i.cancelReportAction(e,t)}))}},validateFormElements:function(e){for(var t=!0,i=0,r=e.length;i<r;i++){var s=$(e[i]).siblings(".bz-wp-widget-reportmenu-messagecnt");this.validateRequired($(e[i]))?this.validateSpecialCharacters($(e[i]))?this.removeValidationMessage(s):(t=!1,this.showValidationMessage(this.getResource("bz-rp-components-customreports-invalidvalue"),s)):(t=!1,this.showValidationMessage(this.getResource("bz-rp-components-customreports-required"),s))}return t},showValidationMessage:function(e,t){var i=this.getTemplate("reportsMenu-vldmessage");t.html($.tmpl(i,{message:e}))},removeValidationMessage:function(e){$(".bz-wp-widget-reportmenu-errormsg",e).remove()},validateRequired:function(e){var t=!0;return e.attr("required")&&""===e.val()&&(t=!1),t},validateSpecialCharacters:function(e){var t=!0;return new RegExp(/^[a-zA-Z0-9- ]*$/).test(e.val())||(t=!1),t},cancelReportAction:function(e,t){var i=this.getTemplate("reportsMenu-itemsdata"),r=this.getReportsData(e),s=$.tmpl(i,{element:r[0]});t.slideUp("fast",(function(){$(this).addClass("bz-wp-widget-reportsmenu-readmode").removeClass("bz-wp-widget-reportsmenu-edition").html(s)})),t.slideDown("fast")},getReportsData:function(e){return this.reportsMenu.AnalysisQuery.filter((function(t){return t.id===e}))},getFiltersById:function(e){return this.getReportsData(e)[0].filters}}),bizagi.workportal.widgets.reportsChart.extend("bizagi.workportal.widgets.reportsChart",{},{init:function(e,t,i){this._super(e,t,i),this.loadTemplates({reportsChart:bizagi.getTemplate("bizagi.workportal.desktop.widget.reportsChart").concat("#ui-bizagi-workportal-widget-reports-chart"),"admin.case.search.quicksearch":bizagi.getTemplate("bizagi.workportal.desktop.widgets.admin.caseSearch").concat("#ui-bizagi-workportal-widget-admin-case-search-quicksearch"),useNewEngine:!1})},postRender:function(){var e=this;e.caseSearch={},$.when(e.loadReportingModule()).done((function(){var t=e.endPoint.defaultReport;bizagi.referrerParams&&bizagi.referrerParams.reports&&bizagi.referrerParams.reports.fromBackButton&&(t=bizagi.referrerParams.reports.tab),e.loadReport(t,e.endPoint.info),e.eventsHandler()}))},eventsHandler:function(){var e=this;$("#reports-menu, li",e.content).on("click",(function(){var t=$(this),i=t.data("report");t.siblings().removeClass("ui-bizagi-wp-widget-reports-menu-active"),t.addClass("ui-bizagi-wp-widget-reports-menu-active"),e.loadReport(i,e.endPoint.info)}))},loadReport:function(e,t){var i=this,r=i.endPoint.reports[e].components;$("#reports-canvas",i.content).empty(),bizagi.referrerParams&&bizagi.referrerParams.reports&&bizagi.referrerParams.reports.params&&bizagi.referrerParams.reports.fromBackButton&&(i.filters=bizagi.referrerParams.reports.model),$.when(i.reportingModule.render({canvas:$("#reports-canvas",i.content),report:e,components:r,info:t,filters:i.filters,myTeam:i.myTeam,widgetInstance:i})).done((function(e){i.attachReportEvents.apply(i,[e])}))},attachReportEvents:function(e){var t=this;e.bindWindowResize(),e.subscribe("filterChange",(function(e,i){t.filters=i})),e.subscribe("graphicquery",(function(e,i){t.showGraphicQuery(i)})),e.subscribe("caseadministration",(function(e,i){t.initCaseAdministration(i),t.showCaseAdministration(i)})),e.subscribe("opencase",(function(e,i){t.publish("executeAction",{action:bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,idCase:i.caseData.idCase,idWorkItem:i.caseData.idWorkItem,idTask:i.caseData.idTask})}))},initCaseAdministration:function(e){this.getCaseSearchContent();this.caseSearch=new bizagi.workportal.widgets.admin.caseSearch(this.workportalFacade,this.dataService,$.extend(this.params,{container:e.canvas})),this.caseSearch.loadtemplates(),this.caseSearch.setupActivitiesLink=function(){}},showCaseAdministration:function(e){var t=this.getCaseSearchContent();this.caseSearch.content=t,e.canvas.html(t),this.caseSearch.findResults(e.canvas,{I_radNumber:e.radNumber})},getCaseSearchContent:function(){var e=this.getTemplate("admin.case.search.quicksearch");return $.tmpl(e)}}),bizagi.reporting||(bizagi.reporting={}),bizagi.reporting={BAMProcess:{defaultReport:"bamprocessloadanalysis",info:{reportSet:1},reports:{bamprocessloadanalysis:{components:["filters-processversion","filters-dimension"],resource:"bz-rp-loadanalysis-tab"},bamprocessworkinprogress:{components:["filters-processversion","filters-dimension"],resource:"bz-rp-workinprogress-tab"}}},BAMTask:{defaultReport:"bamtasksworkinprogress",info:{reportSet:2},reports:{bamtasksworkinprogress:{components:["filters-processversion","filters-dimension"],resource:"bz-rp-workinprogress-tab"},bamtaskloadanalysis:{components:["filters-processversion","filters-dimension"],resource:"bz-rp-loadanalysis-tab"}}},AnalyticsProcess:{defaultReport:"analyticsprocesscycletime",info:{reportSet:3},reports:{analyticsprocesscycletime:{components:["filters-processversion","filters-dimension","filters-time"],resource:"bz-rp-cycletime-tab"},analyticsprocessdurationhistogram:{components:["filters-processversion","filters-dimension","filters-time"],resource:"bz-rp-durationhistogram-tab"},analyticsprocessactivity:{components:["filters-processversion","filters-dimension","filters-time"],resource:"bz-rp-processactivity-tab"},analyticsprocessactivationranking:{components:["filters-dimension","filters-time"],resource:"bz-rp-activationranking-tab"},analyticsprocessfrequentspaths:{components:["filters-processversion","filters-dimension","filters-time"],resource:"bz-rp-frequentspaths-tab"}}},AnalyticsTask:{defaultReport:"analyticstaskcycletime",info:{reportSet:4},reports:{analyticstaskcycletime:{components:["filters-processversion","filters-dimension","filters-time"],resource:"bz-rp-cycletime-tab"}}},ResourceBAM:{callBack:"myTeamCallBack",defaultReport:"bamresourcemonitorworkinprogress",info:{reportSet:6},reports:{bamresourcemonitorworkinprogress:{components:["filters-processversion","filters-dimension","filters-time"],resource:"bz-rp-workinprogress-tab"},bamresourcemonitorworkinprogressuser:{components:["filters-processversion","filters-dimension","filters-time"],resource:"bz-rp-workinprogressuser-tab"},bamresourcemonitorworkinprogressteam:{components:["filters-processversion","filters-dimension","filters-time"],resource:"bz-rp-workinprogressteam-tab"}}},AnalyticsSensor:{defaultReport:"sensors",reports:{sensors:{components:["filters-dimension","filters-time"]}},info:{reportSet:5}}};
//# sourceMappingURL=../../../../Maps/desktop/reports.desktop.production.js.map
