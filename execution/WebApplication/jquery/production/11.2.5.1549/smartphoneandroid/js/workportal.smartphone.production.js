var _$$Class$extend,_bizagi$workportal$co;function _defineProperty(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperty(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperty(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}bizagi.workportal=void 0!==bizagi.workportal?bizagi.workportal:{},bizagi.workportal.services=void 0!==bizagi.workportal.services?bizagi.workportal.services:{},bizagi.workportal.services.endPoints=[],bizagi.workportal.services.getEndPoints=function(e){return"workportal"==e.context?(bizagi="undefined"!=typeof bizagi?bizagi:{},bizagi.localization=void 0!==bizagi.localization?bizagi.localization:{},bizagi.localization.language=void 0!==bizagi.localization.language?bizagi.localization.language:bizagi.language,{"user-handler":e.proxyPrefix+"RestServices/UserHandler.ashx","process-handler":e.proxyPrefix+"RestServices/ProcessHandler.ashx","query-handler":e.proxyPrefix+"Rest/Handlers/Query","case-handler":e.proxyPrefix+"RestServices/CaseHandler.ashx","query-form":e.proxyPrefix+"App/ListaDetalle/QueryForm.aspx","query-form-edit":e.proxyPrefix+"App/ListaDetalle/SaveQuery.aspx","query-form-delete":e.proxyPrefix+"App/ListaDetalle/QueryForm.aspx","query-form-delete-cube":e.proxyPrefix+"Rest/Queries/Cubes/{idCube}","favorites-handler":e.proxyPrefix+"RestServices/FavoritesHandler.ashx","file-handler":e.proxyPrefix+"RestServices/EntityHandler.ashx","login-handler":e.proxyPrefix+"Rest/Users/UserAuthentication","login-handlerv10":e.proxyPrefix+"RestServices/UserHandler.ashx?action=authenticateUser&userName={0}&password={1}&domain={2}","logoff-handler":e.proxyPrefix+"RestServices/UserHandler.ashx?action=logOff","logoff-handlerv1":e.proxyPrefix+"Rest/Users/LogOff",overrides:e.proxyPrefix+"Rest/Util/Overrides","authorization-handler-getMenuAuthorization":e.proxyPrefix+"Rest/Authorization/MenuAuthorization","authorization-handler-isCaseCreationAuthorized":e.proxyPrefix+"Rest/Authorization/Processes/{0}/IsCaseCreationAuthorized","case-handler-getCaseSummary":e.proxyPrefix+"Rest/Cases/{idCase}/SummaryGuid","case-handler-getCaseSummaryByGuid":e.proxyPrefix+"Rest/Cases/{guid}/SummaryByGuid","show-upcoming-maintenance-window":e.proxyPrefix+"Rest/MaintenanceWindow/ShowUpcoming","case-handler-releaseActivity":e.proxyPrefix+"Rest/Cases/{idCase}/ReleaseActivity","case-handler-takeOwnershipActivity":e.proxyPrefix+"Rest/Cases/TakeOwnership","case-handler-taskOptions":e.proxyPrefix+"Rest/Cases/{idCase}/WorkItems/{idWorkitem}/TaskOptions","case-handler-getCasesList":e.proxyPrefix+"Rest/Processes/GetCases","offline-getProcessTree":e.proxyPrefix+"Rest/Processes/OfflineProcessTree","offline-getForms":e.proxyPrefix+"Rest/RenderForm/offlineForms","offline-sendForm":e.proxyPrefix+"Rest/Cases/SaveAsynchWorkItemOffLine","case-handler-getCaseTasks":e.proxyPrefix+"Rest/Cases/{idCase}/Tasks","case-handler-getCaseEvents":e.proxyPrefix+"Rest/Cases/{idCase}/Events","case-handler-getCaseSubprocesses":e.proxyPrefix+"Rest/Cases/{idCase}/Subprocesses","case-handler-getTaskAssignees":e.proxyPrefix+"Rest/Cases/{idCase}/Tasks/{idTask}/AssigneesGuid","case-handler-getCaseAssignees":e.proxyPrefix+"Rest/Cases/{idCase}/AssigneesGuid","case-handler-getCaseAssigneesPreview":e.proxyPrefix+"Rest/Cases/{idCase}/AssigneesPreview","case-handler-getWorkItems":e.proxyPrefix+"Rest/Cases/{idCase}/WorkItems","case-handler-getWorkItemsByGuid":e.proxyPrefix+"Rest/Cases/{guid}/WorkItemsByGuid","case-handler-getAsynchExecutionState":e.proxyPrefix+"Rest/Cases/{idCase}/AsynchExecutionState","case-handler-addNewCase":e.proxyPrefix+"Rest/Cases","case-handler-startProcess":e.proxyPrefix+"Rest/Processes/StartProcess/{idProcess}","case-handler-supportedLogTypes":e.proxyPrefix+"Rest/Cases/SupportedLogsTypes","case-handler-getActivityLog":e.proxyPrefix+"Rest/Cases/{idCase}/ActivityLog","case-handler-getActivityDetailLog":e.proxyPrefix+"Rest/Cases/{idCase}/Workitem/{idWorkItemFrom}/ActivityDetailLog","case-handler-getEntityLog":e.proxyPrefix+"Rest/Cases/{idCase}/EntityLog","case-handler-getEntityDetailLog":e.proxyPrefix+"Rest/Cases/{idCase}/EntityDetailLog","case-handler-getUserLog":e.proxyPrefix+"Rest/Cases/{idCase}/UserLog","case-handler-getUserDetailLog":e.proxyPrefix+"Rest/Cases/{idCase}/{idUser}/UserDetailLog","case-handler-getAdminLog":e.proxyPrefix+"Rest/Cases/{idCase}/AdminLog","case-handler-getCaseFormsRenderVersion":e.proxyPrefix+"Rest/Cases/{idCase}/FormsRenderVersion","case-handler-getCaseFormsRenderVersionByGuid":e.proxyPrefix+"Rest/Cases/{guid}/FormsRenderVersionByGuid","case-handler-cancelCase":e.proxyPrefix+"Rest/Cases/AbortFromActivity","favorites-handler-saveFavorite":e.proxyPrefix+"Rest/Favorites","favorites-handler-deleteFavorite":e.proxyPrefix+"Rest/Favorites/{guidFavorite}","bamAnalytics-handler-getAnalisysQueries":e.proxyPrefix+"Rest/BAMAnalytics/AnalisysQueries","bamAnalytics-handler-updateQuery":e.proxyPrefix+"Rest/BAMAnalytics/Reports/Ids/{idQuery}","inbox-handler-getInboxSummary":e.proxyPrefix+"Rest/Inbox/Summary","inbox-handler-getFullInboxSummary":e.proxyPrefix+"Rest/Inbox/FullSummary","MessageHandler-NewComment":e.proxyPrefix+"Rest/Cases/Comments","MessageHandler-GetComments":e.proxyPrefix+"Rest/Cases/Comments","MessageHandler-SetCategoryToComment":e.proxyPrefix+"Rest/Cases/Comments/{idComment}","MessageHandler-RemoveComment":e.proxyPrefix+"Rest/Cases/Comments/{idComment}","MessageHandler-ReplyComment":e.proxyPrefix+"Rest/Cases/Comments/{idComment}/Replies","MessageHandler-RemoveReply":e.proxyPrefix+"Rest/Cases/Comments/{idComment}/Replies/{idReply}","MessageHandler-GetCategoryColors":e.proxyPrefix+"Rest/Cases/Comments/CategoryColors","MessageHandler-RenameCategoryColor":e.proxyPrefix+"Rest/Cases/Comments/CategoryColors/{idColorCategory}","MessageHandler-CountNewComments":e.proxyPrefix+"Rest/Cases/Comments/{idComment}/NewComments/Count","process-handler-getAllProcesses":e.proxyPrefix+"Rest/Processes","process-handler-getFavourites":e.proxyPrefix+"Rest/Home/MyFavorites/Count","process-handler-getMyStuff":e.proxyPrefix+"Rest/Home/MyStuff","process-handler-getFavouriteCases":e.proxyPrefix+"Rest/Home/MyFavorites","process-handler-getActions":e.proxyPrefix+"Rest/Home/Actions","process-handler-getCustomizedColumnsData":e.proxyPrefix+"Rest/Processes/CustomizedColumnsData","process-handler-getCategory":e.proxyPrefix+"Rest/Processes/Categories","process-handler-getRecentProcesses":e.proxyPrefix+"Rest/Processes/RecentProcesses","process-handler-getCustomizedColumnsDataInfo":e.proxyPrefix+"Rest/Processes/CustomizedColumnsDataInfo","process-handler-getOrganizations":e.proxyPrefix+"Rest/Profile/Organizations","process-handler-getOrganizations-ForAdminUsers":e.proxyPrefix+"Rest/Profile/OrganizationsForAdminUsers","process-handler-getOrganizationsForReassignCases":e.proxyPrefix+"Rest/Profile/OrganizationsForReassignCases","process-handler-getOrganizationsByUser":e.proxyPrefix+"Rest/Profile/OrganizationsByUser","process-handler-getActivitiesData":e.proxyPrefix+"Api/Processes/CasesData/MyActivities","process-handler-getPendingsData":e.proxyPrefix+"Api/Processes/CasesData/MyPendings","process-handler-getUsersCases":e.proxyPrefix+"Api/Cases/{caseId}/UsersGuid","process-handler-getActionsEvents":e.proxyPrefix+"Api/Cases/{caseId}/CurrentEvents","query-handler-getqueries":e.proxyPrefix+"Rest/Queries","query-handler-getqueries-definitions":e.proxyPrefix+"Rest/Queries/Definitions","query-handler-getQueryFormResponse":e.proxyPrefix+"Rest/Queries/Search","query-handler-getQueryFormExportExcel":e.proxyPrefix+"Rest/Queries/ExportToExcel","query-handler-getQueryForm":e.proxyPrefix+"Rest/Handlers/Render","query-handler-storedQueryForm":e.proxyPrefix+"Rest/StoredQueryForms","query-handler-storedQueryForm-id":e.proxyPrefix+"Rest/StoredQueryForms/{idStoredQueryForm}",ping:e.proxyPrefix+"Api/Ping","preferences-handler-getPreferencesForm":e.proxyPrefix+"Rest/Handlers/Render","user-handler-getCurrentUser":e.proxyPrefix+"Rest/Users/CurrentUserGuid","old-render":e.proxyPrefix+"App/ListaDetalle/Detalle.aspx",Reports:e.proxyPrefix+"RestServices/BAMAnalyticsHandler.ashx","reports-handler-deleteQueries":e.proxyPrefix+"Rest/BAMAnalytics/Reports/{QueryId}","folders-handler-getUserQueries":e.proxyPrefix+"Rest/SmartFolders","folders-associate-deleteSmartFolder":e.proxyPrefix+"Rest/SmartFolders/{idSmartFolder}","folders-handler":e.proxyPrefix+"RestServices/SmartFoldersHandler.ashx","folders-associate":e.proxyPrefix+"App/Ajax/AJAXGateway.aspx","smartfolders-integration":e.proxyPrefix+"App/WorkPortal/ConfigureFilteredFolder.aspx",AlarmAdmin:e.proxyPrefix+"App/Admin/AlarmsAdmin.aspx",AnalyticsProcess:e.proxyPrefix+"App/Cockpit/AnalyticsProcess.aspx",AnalyticsSensor:e.proxyPrefix+"App/Cockpit/AnalyticsSensor.aspx",AnalyticsTask:e.proxyPrefix+"App/Cockpit/AnalyticsTask.aspx",AsynchronousWorkitemRetries:e.proxyPrefix+"App/Admin/AsynchDisabledWorkitems.aspx",AuthenticationLogQuery:e.proxyPrefix+"App/Admin/AuthLogQuery.aspx",BAMProcess:e.proxyPrefix+"App/Cockpit/BAMProcess.aspx",BAMTask:e.proxyPrefix+"App/Cockpit/BAMTask.aspx",BusinessPolicies:e.proxyPrefix+"App/Admin/BusinessPolicies/BusinessPoliciesSelector.aspx",CaseAdmin:e.proxyPrefix+"App/Admin/CaseSearch.aspx",adminReassignCases:"CaseAdmin",asyncECMUpload:"asyncECMUpload",CasesMonitor:e.proxyPrefix+"App/Admin/CasesMonitor.aspx",Closed:e.proxyPrefix+"App/ListaDetalle/listaitems.aspx?h_Location=Cerrados&I_ProcessState=Completed",CurrentUser:e.proxyPrefix+"App/Admin/CurrentUser.aspx",EncryptionAdmin:e.proxyPrefix+"App/Admin/Encrypt.aspx",MobileUpdatesAdmin:e.proxyPrefix+"App/MobileUpdates/default.aspx",EntityAdmin:e.proxyPrefix+"App/Admin/Entity.aspx",LocationResources:e.proxyPrefix+"App/Admin/AdminLocResources.aspx",NewCase:e.proxyPrefix+"App/Radicar/application.aspx",Pending:e.proxyPrefix+"App/ListaDetalle/listaitems.aspx?h_Location=Pendientes&I_processState=Running",Profiles:e.proxyPrefix+"App/Admin/ProfilesAdminSearch.aspx",Search:e.proxyPrefix+"App/ListaDetalle/Search.aspx",UserAdmin:e.proxyPrefix+"App/Admin/ListUsers.aspx",UserDefaultAssignation:e.proxyPrefix+"App/Admin/DefaultAssignationUser.aspx?h_AdminDefaultAssign=1",UserPendingRequests:e.proxyPrefix+"App/Admin/UserPendingRequests.aspx",ListPreferences:""!=bizagi.UserPreferencesUrl?e.proxyPrefix+bizagi.UserPreferencesUrl:e.proxyPrefix+"App/Admin/CurrentUser.aspx",GRDimensionAdmin:e.proxyPrefix+"App/Cockpit/DimensionEdit.aspx",Licenses:e.proxyPrefix+"App/Admin/Licenses.aspx",AnalysisQueries:e.proxyPrefix+"App/Inicio/WPAnalysisQuery.aspx",DocumentTemplates:e.proxyPrefix+"App/Admin/AdminDocumentTemplates.aspx",ProcessAdmin:e.proxyPrefix+"App/Admin/AdminProcess.aspx",ResourceBAM:e.proxyPrefix+"App/Cockpit/BAMResourceMonitor.aspx",WorkPortalVersion:e.proxyPrefix+"Rest/Util/Version",PreferencesWorkportalCurrentUser:e.proxyPrefix+"Api/Users/Data/WindowPreferences",PreferenceFormOld:e.proxyPrefix+"App/Admin/CurrentUserByForm.aspx","entities-administration":"RestServices/EntityHandler.ashx",logout:e.proxyPrefix+"Rest/Authentication/logout",logoutDotNet:e.proxyPrefix+"App/Inicio/LogOff.aspx",authenticationConfig:e.proxyPrefix+"Api/Authentication/BizagiConfig","logout-oauth2":e.proxyPrefix+"Api/Authentication/OAuth2/IdentityProvider/Server/Logout",FederateLogoffUrl:e.proxyPrefix+"Api/Authentication/FederateLogoffUrl",oauth2AuthenticationConfig:e.proxyPrefix+"Api/Authentication/OAuth2/OAuth2AuthenticationConfig",multipleAuthenticatorConfig:e.proxyPrefix+"Api/Authentication/User/MultipleAuthenticator/Config","massive-activity-assignments-getOrganizationInfo":e.proxyPrefix+"Rest/Users/OrganizationInfo","massive-activity-assignments-getCasesByOrganization":e.proxyPrefix+"Rest/Queries/GetCasesByOrganization","massive-activity-assignments-reassignCases":e.proxyPrefix+"Rest/Cases/ReassignCases","massive-activity-assignments-searchUsers":e.proxyPrefix+"Rest/Users","massive-activity-assignments-searchUsers-sharedquery":e.proxyPrefix+"Rest/Users/searchsharequery","massive-activity-assignments-searchUsersForSharingQuery":e.proxyPrefix+"Rest/Users/SearchUsersForQueryFormsById/{queryFormId}","massive-activity-assignments-searchUsersById":e.proxyPrefix+"Rest/Users/ByIds","async-ecm-upload-baseService":e.proxyPrefix+"Rest/Handlers/Metadata",domains:e.proxyPrefix+"Rest/Authentication/Domains",ThemeBuilder:e.proxyPrefix+"ThemeBuilder/index.html?language="+bizagi.localization.language,getCurrentTheme:e.proxyPrefix+"Api/Theme/Current","admin-getAuthenticationLog":e.proxyPrefix+"Rest/Users/AuthLog","admin-getAuthenticationDomains":e.proxyPrefix+"Rest/Users/Domains","admin-getAuthenticationEventsTypes":e.proxyPrefix+"Rest/Users/EventTypes","admin-getAuthenticationEventSubTypes":e.proxyPrefix+"Rest/Users/EventSubTypes","admin-EncryptString":e.proxyPrefix+"Rest/Util/EncryptString","admin-UserPendingRequests":e.proxyPrefix+"Rest/Users/UserPendingRequests","admin-UserAuthenticationInfo":e.proxyPrefix+"Rest/Users/UserAuthenticationInfo","admin-updateUserAuthenticationInfo":e.proxyPrefix+"Rest/Users/UpdateUserAuthenticationInfo","admin-generateRandomPassword":e.proxyPrefix+"Rest/Util/GenerateRandomPassword","admin-GenerateDataToSendByEmail":e.proxyPrefix+"Rest/Users/GenerateDataToSendByEmail","admin-sendEmail":e.proxyPrefix+"Rest/Util/SendEmail/","admin-sendUserEmail":e.proxyPrefix+"Rest/Users/SendUserEmail","admin-getApplicationList":e.proxyPrefix+"Rest/Application","admin-getCaseSecurityApplicationList":e.proxyPrefix+"Api/CaseSecurity/Applications?idUser={userId}","admin-getApplicationProcesses":e.proxyPrefix+"Rest/Application/{idApp}/Process","admin-getProcessVersion":e.proxyPrefix+"Rest/Processes/Version","admin-getProcessTasks":e.proxyPrefix+"Rest/Processes/Version/{version}/Tasks","admin-userGetPositions":e.proxyPrefix+"Rest/Users/GetPositions","admin-getUserOauth":e.proxyPrefix+"Rest/Users/searchUsersForOauth","admin-usersform":e.proxyPrefix+"Rest/Handlers/Render","admin-getTaskAlarms":e.proxyPrefix+"Rest/Alarm/TaskAlarms","admin-getLapseMode":e.proxyPrefix+"Rest/Alarm/LapseMode","admin-getRecurrMode":e.proxyPrefix+"Rest/Alarm/RecurrMode","admin-getScheduleType":e.proxyPrefix+"Rest/Alarm/ScheduleType","admin-getBossList":e.proxyPrefix+"Rest/Alarm/Boss","admin-addAlarm":e.proxyPrefix+"Rest/Alarm","admin-editAlarm":e.proxyPrefix+"Rest/Alarm/{idAlarm}","admin-deleteAlarm":e.proxyPrefix+"Rest/Alarm","admin-alarmRecipients":e.proxyPrefix+"Rest/Alarm/{idAlarm}/Recipient","admin-deleteAlarmRecipients":e.proxyPrefix+"Rest/Alarm/Recipient","admin-recipientToAlarm":e.proxyPrefix+"Rest/Alarm/{idAlarm}/Recipient/{idRecipient}","admin-enableAlarm":e.proxyPrefix+"Rest/Alarm/Task/{idTask}/ToggleAlarm","admin-getUsersForAssignation":e.proxyPrefix+"Rest/Users/UsersForAssignation","admin-searchUsersForPermissionsManager":e.proxyPrefix+"Rest/Users/SearchUsersForPermissionsManager","admin-getUsersForReassignCases":e.proxyPrefix+"Rest/Users/UsersForReassignCases","admin-getUsersList":e.proxyPrefix+"Rest/Users/SearchUsers","admin-getUsersForDefaultAssignation":e.proxyPrefix+"Rest/Users/SearchUsersForDefaultAssignation","admin-getUsersListForPlans":e.proxyPrefix+"Rest/Users/SearchUsersForPlansGuid","admin-getUsersForUsersAdministration":e.proxyPrefix+"Rest/Users/SearchUsersForAdmin","admin-getUsersForQueriesPermissionManager":e.proxyPrefix+"Rest/Users/SearchUsersForQueriesPermissionManager","admin-getCategoriesList":e.proxyPrefix+"Rest/Application/Category","admin-getCaseSecurityCategoriesList":e.proxyPrefix+"Api/CaseSecurity/Applications/{idApp}/Categories?idUser={userId}","admin-getCasesList":e.proxyPrefix+"Rest/Queries/SearchCases","admin-invalidateCases":e.proxyPrefix+"Rest/Cases/Invalidate","admin-getProcessRunningInvalidateCases":e.proxyPrefix+"Rest/Util/operationStatus?opType=InvalidateCases","admin-abortItems":e.proxyPrefix+"Rest/Cases/Abort","admin-reassignItems":e.proxyPrefix+"Rest/Cases/Reassign","admin-reassignCurrent":e.proxyPrefix+"Rest/Cases/ReassignCurrent","admin-getDefaultAssignationUserToAllProcess":e.proxyPrefix+"Rest/Users/{serviceAction}/","admin-getDefaultAssignationUserToProcess":e.proxyPrefix+"Rest/Users/Process/{process}/AssignationUser","admin-setDefaultAssignationUserToProcess":e.proxyPrefix+"Rest/Users/Process/{process}/AssignationUser","admin-transferAllCaseSecuritypermissions":e.proxyPrefix+"Api/CaseSecurity/Processes/Permissions/Transfer","admin-transferCaseSecuritypermissions":e.proxyPrefix+"Api/CaseSecurity/Processes/{idProcess}/Permissions/Transfer","admin-revokeAllCaseSecuritypermissions":e.proxyPrefix+"Api/CaseSecurity/Processes/Permissions/Revoke","admin-revokeCaseSecuritypermissions":e.proxyPrefix+"Api/CaseSecurity/Processes/{idProcess}/Permissions/Revoke","admin-statusTransferCaseSecuritypermissions":e.proxyPrefix+"Rest/Cases/StatusTransferCaseSecuritypermissions","admin-getProfilesTypes":e.proxyPrefix+"Rest/Profile/Types","admin-searchProfiles":e.proxyPrefix+"Rest/Profile","admin-getUsersByProfile":e.proxyPrefix+"Rest/Users/Profile/{type}/{id}","admin-getUsersByProfile-report":e.proxyPrefix+"Rest/Users/Profile/{filterType}/{guidValueFilter}/Report","admin-removeUserFromProfile":e.proxyPrefix+"Rest/Profile/{type}/{id}/User/{idUser}/","admin-addUserToProfile":e.proxyPrefix+"Rest/Profile/{type}/{id}/User/{idUser}/","admin-async-activities-get-activities":e.proxyPrefix+"Rest/Cases/Asynchronous/Activities","admin-async-activities-get-retry-now":e.proxyPrefix+"Rest/Cases/{idCase}/Workitem/{idworkItem}/{idAsynchWorkitem}/RetryNow","admin-async-activities-get-activities-by-task":e.proxyPrefix+"Rest/Cases/Asynchronous/Activities/Task","admin-async-activities-enable-execution":e.proxyPrefix+"Rest/Cases/Asynchronous/Enable","admin-async-activities-enable-multiple":e.proxyPrefix+"Rest/Cases/Asynchronous/EnableMultiple","admin-async-activities-async-execution":e.proxyPrefix+"Rest/Cases/{idCase}/Workitem/{idWorkitem}/AsynchExecution","admin-async-activities-async-execution-log":e.proxyPrefix+"Rest/Cases/{idCase}/Workitem/{idworkItem}/{idAsynchWorkitem}/AsynchExecutionLog","admin-async-activities-get-rpajobs":e.proxyPrefix+"Rest/Cases/Asynchronous/Rpa/Jobs","admin-async-activities-rpajob-execution-log":e.proxyPrefix+"Rest/Cases/Asynchronous/Rpa/Job/{idJob}/Logs","admin-async-activities-rpajob-enable-execution":e.proxyPrefix+"Rest/Cases/Asynchronous/Rpa/Job/Enable","admin-async-activities-rpajob-enable-multiple":e.proxyPrefix+"Rest/Cases/Asynchronous/Rpa/Job/EnableMultiple","admin-async-activities-rpajob-activities-by-task":e.proxyPrefix+"Rest/Cases/Asynchronous/Rpa/Job/Task","admin-async-activities-rpajob-retry-now":e.proxyPrefix+"Rest/Cases/Asynchronous/Rpa/Job/{idJob}/RetryRPAJob","admin-Licenses":e.proxyPrefix+"Rest/Licenses","admin-audit-license":e.proxyPrefix+"Rest/Licenses/auditLicense","admin-GetDimensions":e.proxyPrefix+"Rest/Dimensions","admin-EditDimension":e.proxyPrefix+"Rest/Dimensions/{id}","admin-CreateAdministrableDimension":e.proxyPrefix+"Rest/Dimensions/Administrable","admin-DeleteDimension":e.proxyPrefix+"Rest/Dimensions/{id}?isAdministrable={administrable}","admin-EntityPathChildNodesAction":e.proxyPrefix+"Rest/Dimensions/EntityChildNodes","admin-GetActiveWFClasses":e.proxyPrefix+"Rest/Dimensions/ActiveProcess","admin-document-templates-storeDocumentTemplates":e.proxyPrefix+"Rest/DocumentTemplates/StoreDocumentTemplates","admin-document-templates-restoreDocumentTemplates":e.proxyPrefix+"Rest/DocumentTemplates/RestoreDocumentTemplate","admin-document-templates-uploadDocumentTemplate":e.proxyPrefix+"Rest/DocumentTemplates/UploadDocumentTemplate","admin-processes-workflowClasses":e.proxyPrefix+"Rest/Processes/WorkflowClasses","admin-processes-tasksByWorkflow":e.proxyPrefix+"Rest/Processes/TasksByWorkflow","admin-processes-modifyProcessDuration":e.proxyPrefix+"Rest/Processes/{idWorkflow}/Duration/","admin-processes-modifyTaskDuration":e.proxyPrefix+"Rest/Processes/Task/{idTask}/Duration/","admin-entities-list":e.proxyPrefix+"Api/Entities/Parametrics","admin-stakeholders-list":e.proxyPrefix+"Api/Entities/Stakeholders","admin-entities-row-data":e.proxyPrefix+"Api/Entities/{guidEntity}/Data","admin-user-stakeholders":e.proxyPrefix+"Api/Users/{idUser}/Stakeholders","admin-entities-migrated-entity":e.proxyPrefix+"Rest/Entities/migratedEntity","admin-entities-get-form":e.proxyPrefix+"Rest/Handlers/Render","admin-entities-get-excel":e.proxyPrefix+"Api/Entities/Excel/{EntityGuid}/","admin-entities-upload-excel":e.proxyPrefix+"Api/Entities/Excel/{EntityGuid}","admin-user-permissions-excel-enabled":e.proxyPrefix+"Api/Users/Excel/Active","admin-user-permissions-excel-disabled":e.proxyPrefix+"Api/Users/Excel/Inactive","render-multiaction":e.proxyPrefix+"Rest/Handlers/MultiAction","admin-entity-simpleData":e.proxyPrefix+"Rest/Entities/{idEntity}/Instances/{idAttribute}/Brief?displayAttribFilter={displayAttribFilter}","admin-language-bizagi-objects":e.proxyPrefix+"Rest/Multilanguage/BizagiObjects","admin-entities-exists-last-report":e.proxyPrefix+"Api/Entities/Excel/{EntityGuid}/LogExists","admin-entities-upload-file-state":e.proxyPrefix+"Api/Entities/Excel/{EntityGuid}/State","admin-entities-download-last-report":e.proxyPrefix+"Api/Entities/Excel/{EntityGuid}/Log","admin-language-entities":e.proxyPrefix+"Rest/Multilanguage/Entities?xsrf="+bizagi.getXSRFToken(),"admin-language-resource":e.proxyPrefix+"Rest/Multilanguage/Resource?xsrf="+bizagi.getXSRFToken(),"admin-language-resource-download":e.proxyPrefix+"Rest/Multilanguage/LanguageExcel","admin-language-entities-download":e.proxyPrefix+"Rest/Multilanguage/EntitiesExcel","admin-language-languages":e.proxyPrefix+"Rest/Multilanguage/Languages","admin-language-reset":e.proxyPrefix+"Rest/Multilanguage/ResetPersonalization","admin-holidays-schemas":e.proxyPrefix+"Api/WorkingTimeSchema/Holidays","admin-holidays-schema":e.proxyPrefix+"Api/WorkingTimeSchema/Holidays/{schema}","admin-projectname":e.proxyPrefix+"Api/Project/Name","bam-resourcemonitor-myteam":e.proxyPrefix+"Rest/Reports/BAM/Resources/MyTeam","reports-analysisquery":e.proxyPrefix+"Rest/Reports/AnalysisQueries","reports-analysisquery-update":e.proxyPrefix+"Rest/Reports/AnalysisQueries","reports-analysisquery-delete":e.proxyPrefix+"Rest/Reports/AnalysisQueries","processviewer-processdefinition":e.proxyPrefix+"Rest/Reports/Components/ProcessDefinition","processviewer-processgraphicinfo":e.proxyPrefix+"Rest/Reports/Components/ProcessGraphicInfo","processviewer-paths":e.proxyPrefix+"Rest/Reports/Analytics/Process/FrequentPaths","mobile-getLastUpdate":e.proxyPrefix+"Rest/Util/mobileUpdates","admin-userslog":e.proxyPrefix+"Rest/Users/UserAdminLog","admin-userslicenses":e.proxyPrefix+"Rest/Licenses/CanAddNewUser","admin-createuserform":e.proxyPrefix+"Rest/Users/CreateUserAdminForm","graphicquery-trailusers":e.proxyPrefix+"Rest/Cases/TrailUsersGuid","admin-userpreferenceform-isnew":e.proxyPrefix+"Rest/Authorization/UserPreferenceForm","time-schemas-effectiveduration":e.proxyPrefix+"Api/WorkingTimeSchema/EffectiveDurationGuid?idUser={idUser}&fromDate={fromDate}&toDate={toDate}","time-schemas-effectiveduration-ForAdminUsers":e.proxyPrefix+"Api/WorkingTimeSchema/EffectiveDurationGuidForAdminUsers?idUser={idUser}&fromDate={fromDate}&toDate={toDate}","time-schemas-end-hour-working-by-date":e.proxyPrefix+"Api/WorkingTimeSchema/EndHourWorkingByDateGuid?idUser={idUser}&date={date}","project-resource-action":e.proxyPrefix+"Api/CaseResource/{typeResource}","project-resource-get":e.proxyPrefix+"Api/CaseResource/{typeResource}?globalParent={globalParent}","project-resource-delete":e.proxyPrefix+"Api/CaseResource/{typeResource}/{idResource}","project-users-get":e.proxyPrefix+"Rest/Users/UserPicturesGuid","project-comments-get":e.proxyPrefix+"Api/CaseResource/{idParent}/CommentGuid?dateTime={dateTime}&count={count}","project-comments-count-by-parent":e.proxyPrefix+"Api/CaseResource/{idParent}/Comment/Count","project-util-current-time":e.proxyPrefix+"Api/CaseResource/Util/CurrentTime","project-comments-uploadfiles":e.proxyPrefix+"Api/CaseResource/Attachment","project-attachment-download":e.proxyPrefix+"Api/CaseResource/Attachment/{Attachment}?xsrf="+bizagi.getXSRFToken(),"project-files-upload":e.proxyPrefix+"Api/CaseResource/FileGuid","project-files-list":e.proxyPrefix+"Api/CaseResource/FileGuid?globalParent={globalParent}","project-files-thumbnails":e.proxyPrefix+"Api/CaseResource/File/Thumbnails","project-plan-createactivity":e.proxyPrefix+"Api/Plans/{idPlan}/ActivitiesGuid","project-plan-get":e.proxyPrefix+"Api/Plans/Guid/{idPlan}","project-plan-get-case":e.proxyPrefix+"Api/Plans/{idPlan}/IdCase","project-plan-get-by-parent":e.proxyPrefix+"Api/Plans/Guid?parentWorkItem={parentWorkItem}","project-plan-execute":e.proxyPrefix+"Api/Plans/Execute","project-plan-close":e.proxyPrefix+"Api/Plans/Close","project-plan-delete":e.proxyPrefix+"Api/Plans/{idPlan}","project-plan-activities":e.proxyPrefix+"Api/Plans/{idPlan}/ActivitiesGuid","project-plan-workitems":e.proxyPrefix+"Api/Plans/{idPlan}/WorkItemsGuid","project-plan-parent":e.proxyPrefix+"Api/Plans/{idPlan}/ParentCase","project-plan-first-parent-plan":e.proxyPrefix+"Api/Plans/{idPlan}/FirstParentPlanGuid","project-plan-first-parent":e.proxyPrefix+"Api/Plans/{idPlan}/FirstParentCase","project-activity-update-progress":e.proxyPrefix+"Api/Plans/Activity/{idActivity}/Progress","project-plan-update":e.proxyPrefix+"Api/Plans/Guid/{idPlan}","project-plan-activity-tasks-get":e.proxyPrefix+"Api/Plans/{idPlan}/Activities/{idActivity}/Items","project-plan-activity-get":e.proxyPrefix+"Api/Plans/{idPlan}/ActivitiesGuid/{idActivity}","project-plan-activity-delete":e.proxyPrefix+"Api/Plans/{idPlan}/Activities/{id}","project-plan-activity-edit":e.proxyPrefix+"Api/Plans/{idPlan}/ActivitiesGuid/{id}","project-plan-transitions-get":e.proxyPrefix+"Api/Plans/{idPlan}/Activities/Transitions","project-plan-transitions-put":e.proxyPrefix+"Api/Plans/{idPlan}/Activities/Transitions","project-plan-template-create-by-plan":e.proxyPrefix+"Api/Plans/Templates","project-plan-template-get":e.proxyPrefix+"Api/Templates","project-timeline-events-get":e.proxyPrefix+"Api/CaseResource/TimeLineGuid?{idCaseParamValue}","project-workitem-assignees":e.proxyPrefix+"Api/CaseResource/{idWorkitem}/Assignees","project-workitem-assignees-items":e.proxyPrefix+"Api/CaseResource/{idWorkitem}/ItemAssigneeWorkItem","project-activity-share":e.proxyPrefix+"Rest/Cases/Workitems/ShareActivity","project-plan-create":e.proxyPrefix+"Api/Plans/Guid","project-plan-create-by-template":e.proxyPrefix+"Api/Templates/{idTemplate}/PlansGuid","project-plan-get-all":e.proxyPrefix+"Api/Plans/Templates/get",plans:e.proxyPrefix+"Api/Plans/Guid","stuff-handler-getUserStuff":e.proxyPrefix+"Api/CurrentUser/Collections","get-current-theme":e.proxyPrefix+"Api/CurrentUser/GetCurrentTheme","process-handler-getIdCasesOfProcessEntities":e.proxyPrefix+"Api/Entities/Cases","handler-get-myShortcuts":e.proxyPrefix+"Api/CurrentUser/Shortcuts","handler-execute-action-start":e.proxyPrefix+"Api/Cases/{processId}/Start","handler-validate-action-has-start-form":e.proxyPrefix+"Api/Processes/{processId}/StartContext","process-getIcon":e.proxyPrefix+"Api/Processes/{processId}/Icon","collections-getIcon":e.proxyPrefix+"Api/CurrentUser/Collections/{collectionId}/Icon","data-navigation-handler-collection":e.proxyPrefix+"Api/CurrentUser/Collections/{reference}/Data/{surrogateKey}","data-navigation-handler-entity":e.proxyPrefix+"Api/CurrentUser/Entities/{reference}/Data/{surrogateKey}/{xpath}","data-navigation-handler-entity-filters":e.proxyPrefix+"Api/CurrentUser/Entities/{reference}/Filters/{surrogateKey}/{xpath}","action-handler-getProcessAddAction":e.proxyPrefix+"Api/CurrentUser/Collections/{reference}/{surrogateKey}/Actions","entities-handler-getMapping":e.proxyPrefix+"Rest/Entities/Mapping","entities-handler-getActions":e.proxyPrefix+"Api/Entities/{guidEntity}/{surrogateKey}/actions","actions-handler-getDataForm":e.proxyPrefix+"Rest/Handlers/Render","actions-handler-hasStartForm":e.proxyPrefix+"Rest/Processes/HasStartForm","actions-handler-executeRule-simple":e.proxyPrefix+"Api/Rules/{ruleId}/Execute","actions-handler-executeRule-multiple":e.proxyPrefix+"Api/Rules/{ruleId}/ExecuteMultiple","sort-bar-getMultipleInstancesActions":e.proxyPrefix+"Rest/Entities/multipleInstancesActions","sort-bar-getMapping":e.proxyPrefix+"Rest/Entities/Mapping","sort-bar-execute":e.proxyPrefix+"Api/Action/Execute","activity-map":e.proxyPrefix+"Rest/Processes/ActivityMap/","activity-map-getActivitySummary":e.proxyPrefix+"Rest/Processes/ActivitySummary","subprocess-map":e.proxyPrefix+"Rest/Processes/SubProcessMap","shorcuts-getStakeHolderShorcuts":e.proxyPrefix+"/Api/Stakeholder/Shortcuts","my-search-getSearchLists":e.proxyPrefix+"Api/CurrentUser/Searches","my-search-getFilters":e.proxyPrefix+"Api/CurrentUser/Searches/{guidSearch}/Filters","my-search-getFiltersData":e.proxyPrefix+"Api/CurrentUser/Searches/{guidSearch}/FilterData","my-search-getData":e.proxyPrefix+"Api/CurrentUser/Searches/{guidSearch}/Data","admin-getAdhocProcessesList":e.proxyPrefix+"Api/AdhocProcesses/Search","admin-createAdhocProcess":e.proxyPrefix+"Api/AdhocProcesses/Create","admin-updateAdhocProcess":e.proxyPrefix+"Api/AdhocProcesses/Update","admin-updateAdhocTask":e.proxyPrefix+"Api/AdhocProcesses/{processId}/Activity","admin-deleteAdhocTask":e.proxyPrefix+"Api/AdhocProcesses/{processId}/Activity/{taskId}","admin-deleteAdhocProcess":e.proxyPrefix+"Api/AdhocProcesses/{processId}","admin-publishAdhocProcess":e.proxyPrefix+"Api/AdhocProcesses/Publish","admin-cloneAdhocProcess":e.proxyPrefix+"Api/AdhocProcesses/Clone","admin-getAdhocTask":e.proxyPrefix+"Api/AdhocProcesses/{processId}/Task/{taskId}","admin-getAllEntities":e.proxyPrefix+"Api/AdhocProcesses/Entities","admin-getAllCategories":e.proxyPrefix+"Api/AdhocProcesses/Categories","admin-createNewAdhocProcess":e.proxyPrefix+"Api/LiveProcesses","admin-getAdhocDataSchema":e.proxyPrefix+"Api/LiveProcesses/{processId}/DataSchema","admin-getAdhocProcessDiagram":e.proxyPrefix+"Api/LiveProcesses/{processId}/Diagram","admin-saveAdhocProcessDiagram":e.proxyPrefix+"Api/LiveProcesses/{processId}/Diagram","admin-adhoc-entities-list":e.proxyPrefix+"Api/AdhocProcesses/AdhocEntity/All","admin-saveAdhocEntity":e.proxyPrefix+"Api/AdhocProcesses/AdhocEntity/Save","admin-saveAdhocEntityInstance":e.proxyPrefix+"Api/AdhocProcesses/AdhocEntity/{entityId}/Instance/{isNew}","admin-adhoc-entity-instances":e.proxyPrefix+"Api/AdhocProcesses/AdhocEntity/{entityId}/Instances","admin-entity-values":e.proxyPrefix+"Api/AdhocProcesses/{context}/{entityId}/Values","admin-adhoc-user-group-list":e.proxyPrefix+"Api/LiveProcesses/UserGroups","admin-adhoc-user-group-save":e.proxyPrefix+"Api/LiveProcesses/UserGroups","admin-adhoc-user-group-delete":e.proxyPrefix+"Api/LiveProcesses/UserGroups/{groupId}","admin-adhoc-user-group-data-get":e.proxyPrefix+"Api/LiveProcesses/UserGroups/{groupId}/Users","admin-adhoc-user-group-data-add":e.proxyPrefix+"Api/LiveProcesses/UserGroups/{groupId}/Users/{userId}","admin-adhoc-user-group-data-remove":e.proxyPrefix+"Api/LiveProcesses/UserGroups/{groupId}/Users/{userId}","admin-adhoc-authorization-data-get":e.proxyPrefix+"Api/AdhocProcesses/Authorization","admin-adhoc-authorization-data-save":e.proxyPrefix+"Api/AdhocProcesses/{processId}/{isAdhocTask}/Authorization/Save","oauth2-getApplications":e.proxyPrefix+"oauth2/server/application","oauth2-getApplication":e.proxyPrefix+"oauth2/server/application/id/{applicationId}","oauth2-createApplication":e.proxyPrefix+"oauth2/server/application","oauth2-deleteApplication":e.proxyPrefix+"oauth2/server/application/{applicationId}","oauth2-updateApplication":e.proxyPrefix+"oauth2/server/application/{applicationId}","oauth2-updateClientSecretKeysApplication":e.proxyPrefix+"oauth2/server/application/{applicationId}/updateClientSecretKeys","admin-error-logs-getErrorLogs":e.proxyPrefix+"api/ErrorLogs/Items","admin-error-logs-getErrorLogsContents":e.proxyPrefix+"api/ErrorLogs/Content","admin-error-logs-getErrorLogsArchive":e.proxyPrefix+"api/ErrorLogs/Export","login-qr-image64":e.proxyPrefix+"Api/Authentication/AccessQRCode","user-gdpr-downloadReportUser":e.proxyPrefix+"rest/users/{idUser}/Report?xsrf="+bizagi.getXSRFToken(),"user-gdpr-anonymizeUser":e.proxyPrefix+"rest/users/{idUser}/Report",userDelegation:e.proxyPrefix+"rest/UserDelegate",userFilterOptions:e.proxyPrefix+"rest/UserFilters",catalogQL:e.proxyPrefix+"rest/CatalogQL/Query",currentUser:e.proxyPrefix+"rest/Users/CurrentUserGuid",getUsersForDelegation:e.proxyPrefix+"rest/UserFilters",downloadBPUsReport:e.proxyPrefix+"rest/Reports/BPU","queries-manager-queriesByUser":e.proxyPrefix+"Rest/StoredQueryForms/QueriesByUser","queries-manager-TransferQueries":e.proxyPrefix+"Rest/StoredQueryForms/TransferQueries","execute-quickaction":e.proxyPrefix+"Rest/Handlers/QuickAction","smartinbox-getAllInbox":e.proxyPrefix+"api/SmartInbox/All","smartinbox-specific-inbox":e.proxyPrefix+"api/SmartInbox/{smartInboxId}","smartinbox-specific-inbox-data":e.proxyPrefix+"Rest/Processes/CustomizedColumnsData","smartinbox-createinbox":e.proxyPrefix+"/api/SmartInbox","smartinbox-createinbox-by-owner":e.proxyPrefix+"/api/SmartInbox/{settingName}/{owner}","smartinbox-processes":e.proxyPrefix+"api/SmartInbox/Detail/Processes","smartinbox-customized-columns":e.proxyPrefix+"api/SmartInbox/Detail/CustomizedColumns","smartinbox-share":e.proxyPrefix+"api/SmartInbox/Share/{smartInboxId}","smartinbox-entity-values":e.proxyPrefix+"api/SmartInbox/Detail/EntityValues/{entityGuid}","smartinbox-admin":e.proxyPrefix+"api/SmartInbox/Admin","smartinbox-profiles":e.proxyPrefix+"api/SmartInbox/Detail/Profiles","smartinbox-user-tasks":e.proxyPrefix+"api/SmartInbox/Detail/UserTasks","smartinbox-user-tasks-smartinboxid":e.proxyPrefix+"api/SmartInbox/Detail/UserTasks/{smartInboxId}","smartinbox-user-tasks-process":e.proxyPrefix+"api/SmartInbox/Detail/UserTasks/ByProcess/{workflowId}"}):"sharepoint"==e.context||"portal"==e.context?(void 0===e.sharepointProxyPrefix&&alert("sharepointProxyPrefix param is requiered to build endpoints when context is 'sharepoint'"),{"user-handler":e.sharepointProxyPrefix+"RestServices/UserHandler.ashx","process-handler":e.sharepointProxyPrefix+"RestServices/ProcessHandler.ashx","query-handler":e.sharepointProxyPrefix+"Rest/Handlers/Query","case-handler":e.sharepointProxyPrefix+"RestServices/CaseHandler.ashx","query-form":e.sharepointProxyPrefix+"App/ListaDetalle/QueryForm.aspx","query-form-edit":e.sharepointProxyPrefix+"App/ListaDetalle/SaveQuery.aspx","query-form-delete":e.sharepointProxyPrefix+"App/ListaDetalle/QueryForm.aspx","query-form-delete-cube":e.sharepointProxyPrefix+"Rest/Queries/Cubes/{idCube}","favorites-handler":e.sharepointProxyPrefix+"RestServices/FavoritesHandler.ashx","file-handler":e.sharepointProxyPrefix+"RestServices/EntityHandler.ashx","login-handler":e.sharepointProxyPrefix+"RestServices/UserHandler.ashx?action=authenticateUser&userName={0}&password={1}&domain={2}","logoff-handler":e.sharepointProxyPrefix+"RestServices/UserHandler.ashx?action=logOff",overrides:e.sharepointProxyPrefix+"Rest/Util/Overrides","authorization-handler-getMenuAuthorization":e.sharepointProxyPrefix+"Rest/Authorization/MenuAuthorization","authorization-handler-isCaseCreationAuthorized":e.sharepointProxyPrefix+"Rest/Authorization/Processes/{0}/IsCaseCreationAuthorized","case-handler-getCaseSummary":e.sharepointProxyPrefix+"Rest/Cases/{idCase}/Summary","case-handler-getCaseSummaryByGuid":e.sharepointProxyPrefix+"Rest/Cases/{guid}/SummaryByGuid","case-handler-releaseActivity":e.proxyPrefix+"Rest/Cases/{idCase}/ReleaseActivity","case-handler-getCaseTasks":e.sharepointProxyPrefix+"Rest/Cases/{idCase}/Tasks","case-handler-getCaseEvents":e.sharepointProxyPrefix+"Rest/Cases/{idCase}/Events","case-handler-getCaseSubprocesses":e.sharepointProxyPrefix+"Rest/Cases/{idCase}/Subprocesses","case-handler-getTaskAssignees":e.sharepointProxyPrefix+"Rest/Cases/{idCase}/Tasks/{idTask}/AssigneesGuid","case-handler-getCaseAssignees":e.sharepointProxyPrefix+"Rest/Cases/{idCase}/Assignees","case-handler-getWorkItems":e.sharepointProxyPrefix+"Rest/Cases/{idCase}/WorkItems","case-handler-getWorkItemsByGuid":e.sharepointProxyPrefix+"Rest/Cases/{guid}/WorkItemsByGuid","case-handler-getAsynchExecutionState":e.sharepointProxyPrefix+"Rest/Cases/{idCase}/AsynchExecutionState","case-handler-addNewCase":e.sharepointProxyPrefix+"Rest/Cases","case-handler-startProcess":e.sharepointProxyPrefix+"Rest/Processes/StartProcess/{idProcess}","case-handler-getActivityLog":e.sharepointProxyPrefix+"Rest/Cases/{idCase}/ActivityLog","case-handler-getActivityDetailLog":e.sharepointProxyPrefix+"Rest/Cases/{idWorkItemFrom}/ActivityDetailLog","case-handler-getEntityLog":e.sharepointProxyPrefix+"Rest/Cases/{idCase}/EntityLog","case-handler-getEntityDetailLog":e.sharepointProxyPrefix+"Rest/Cases/{idCase}/EntityDetailLog","case-handler-getUserLog":e.sharepointProxyPrefix+"Rest/Cases/{idCase}/UserLog","case-handler-getUserDetailLog":e.sharepointProxyPrefix+"Rest/Cases/{idCase}/UserDetailLog","case-handler-getCaseFormsRenderVersion":e.sharepointProxyPrefix+"Rest/Cases/{idCase}/FormsRenderVersion","case-handler-getCaseFormsRenderVersionByGuid":e.sharepointProxyPrefix+"Rest/Cases/{guid}/FormsRenderVersionByGuid","offline-getProcessTree":e.proxyPrefix+"Rest/Processes/OfflineProcessTree","offline-getForms":e.proxyPrefix+"Rest/RenderForm/offlineForms","offline-sendForm":e.proxyPrefix+"Rest/Cases/SaveAsynchWorkItemOffLine","case-handler-getCasesList":e.proxyPrefix+"Rest/Processes/GetCases","favorites-handler-saveFavorite":e.sharepointProxyPrefix+"Rest/Favorites","favorites-handler-deleteFavorite":e.sharepointProxyPrefix+"Rest/Favorites/{guidFavorite}","bamAnalytics-handler-getAnalisysQueries":e.sharepointProxyPrefix+"Rest/BAMAnalytics/AnalisysQueries","bamAnalytics-handler-updateQuery":e.sharepointProxyPrefix+"Rest/BAMAnalytics/Reports/Ids/{idQuery}","inbox-handler-getInboxSummary":e.sharepointProxyPrefix+"Rest/Inbox/Summary","inbox-handler-getFullInboxSummary":e.sharepointProxyPrefix+"Rest/Inbox/FullSummary","MessageHandler-NewComment":e.sharepointProxyPrefix+"Rest/Cases/{idCase}/Comments","MessageHandler-GetComments":e.sharepointProxyPrefix+"Rest/Cases/{idCase}/Comments","MessageHandler-SetCategoryToComment":e.sharepointProxyPrefix+"Rest/Cases/{idCase}/Comments/{idComment}","MessageHandler-RemoveComment":e.sharepointProxyPrefix+"Rest/Cases/{idCase}/Comments/{idComment}","MessageHandler-ReplyComment":e.sharepointProxyPrefix+"Rest/Cases/{idCase}/Comments/{idComment}/Replies","MessageHandler-RemoveReply":e.sharepointProxyPrefix+"Rest/Cases/{idCase}/Comments/{idComment}/Replies/{idReply}","MessageHandler-GetCategoryColors":e.sharepointProxyPrefix+"Rest/Cases/Comments/CategoryColors","MessageHandler-RenameCategoryColor":e.sharepointProxyPrefix+"Rest/Cases/Comments/CategoryColors/{idColorCategory}","MessageHandler-CountNewComments":e.sharepointProxyPrefix+"Rest/Cases/{idCase}/Comments/{idLastComment}","process-handler-getAllProcesses":e.sharepointProxyPrefix+"Rest/Processes","process-handler-getCustomizedColumnsData":e.sharepointProxyPrefix+"Rest/Processes/CustomizedColumnsData","process-handler-getCategory":e.sharepointProxyPrefix+"Rest/Processes/Categories","process-handler-getRecentProcesses":e.sharepointProxyPrefix+"Rest/Processes/RecentProcesses","process-handler-getCustomizedColumnsDataInfo":e.sharepointProxyPrefix+"Rest/Processes/CustomizedColumnsDataInfo","process-handler-getActivitiesData":e.sharepointProxyPrefix+"Rest/Processes/CasesData/MyActivities","process-handler-getPendingsData":e.proxyPrefix+"Rest/Processes/CasesData/MyPendings","query-handler-getqueries":e.sharepointProxyPrefix+"Rest/Queries","user-handler-getCurrentUser":e.sharepointProxyPrefix+"Rest/Users/CurrentUser","old-render":e.sharepointProxyPrefix+"App/ListaDetalle/Detalle.aspx",Reports:e.sharepointProxyPrefix+"RestServices/BAMAnalyticsHandler.ashx","reports-handler-deleteQueries":e.sharepointProxyPrefix+"Rest/BAMAnalytics/Reports/{QueryId}","folders-handler-getUserQueries":e.sharepointProxyPrefix+"Rest/SmartFolders","folders-associate-deleteSmartFolder":e.sharepointProxyPrefix+"Rest/SmartFolders/{idSmartFolder}","folders-handler":e.sharepointProxyPrefix+"RestServices/SmartFoldersHandler.ashx","folders-associate":e.sharepointProxyPrefix+"App/Ajax/AJAXGateway.aspx","smartfolders-integration":e.sharepointProxyPrefix+"App/WorkPortal/ConfigureFilteredFolder.aspx",AlarmAdmin:e.sharepointProxyPrefix+"App/Admin/AlarmsAdmin.aspx",AnalyticsProcess:e.sharepointProxyPrefix+"App/Cockpit/AnalyticsProcess.aspx",AnalyticsSensor:e.sharepointProxyPrefix+"App/Cockpit/AnalyticsSensor.aspx",AnalyticsTask:e.sharepointProxyPrefix+"App/Cockpit/AnalyticsTask.aspx",AsynchronousWorkitemRetries:e.sharepointProxyPrefix+"App/Admin/AsynchDisabledWorkitems.aspx",AuthenticationLogQuery:e.sharepointProxyPrefix+"App/Admin/AuthLogQuery.aspx",BAMProcess:e.sharepointProxyPrefix+"App/Cockpit/BAMProcess.aspx",BAMTask:e.sharepointProxyPrefix+"App/Cockpit/BAMTask.aspx",BusinessPolicies:e.sharepointProxyPrefix+"App/Admin/BusinessPolicies/BusinessPoliciesSelector.aspx",CaseAdmin:e.sharepointProxyPrefix+"App/Admin/CaseSearch.aspx",CasesMonitor:e.sharepointProxyPrefix+"App/Admin/CasesMonitor.aspx",Closed:e.sharepointProxyPrefix+"App/ListaDetalle/listaitems.aspx?h_Location=Cerrados&I_ProcessState=Completed",CurrentUser:e.sharepointProxyPrefix+"App/Admin/CurrentUser.aspx",EncryptionAdmin:e.sharepointProxyPrefix+"App/Admin/Encrypt.aspx",MobileUpdatesAdmin:e.sharepointProxyPrefix+"App/MobileUpdates/default.aspx",EntityAdmin:e.sharepointProxyPrefix+"App/Admin/Entity.aspx",LocationResources:e.sharepointProxyPrefix+"App/Admin/AdminLocResources.aspx",NewCase:e.sharepointProxyPrefix+"App/Radicar/application.aspx",Pending:e.sharepointProxyPrefix+"App/ListaDetalle/listaitems.aspx?h_Location=Pendientes&I_processState=Running",Profiles:e.sharepointProxyPrefix+"App/Admin/ProfilesAdminSearch.aspx",Search:e.sharepointProxyPrefix+"App/ListaDetalle/Search.aspx",UserAdmin:e.sharepointProxyPrefix+"App/Admin/ListUsers.aspx",UserDefaultAssignation:e.sharepointProxyPrefix+"App/Admin/DefaultAssignationUser.aspx?h_AdminDefaultAssign=1",UserPendingRequests:e.sharepointProxyPrefix+"App/Admin/UserPendingRequests.aspx",ListPreferences:e.sharepointProxyPrefix+"App/Admin/CurrentUser.aspx",GRDimensionAdmin:e.sharepointProxyPrefix+"App/Cockpit/DimensionEdit.aspx",Licenses:e.sharepointProxyPrefix+"App/Admin/Licenses.aspx",AnalysisQueries:e.sharepointProxyPrefix+"App/Inicio/WPAnalysisQuery.aspx",ProcessAdmin:e.sharepointProxyPrefix+"App/Admin/AdminProcess.aspx",ResourceBAM:e.sharepointProxyPrefix+"App/Cockpit/BAMResourceMonitor.aspx",WorkPortalVersion:e.sharepointProxyPrefix+"Rest/Util/Version","entities-administration":"RestServices/EntityHandler.ashx",getCurrentTheme:e.sharepointProxyPrefix+"Api/Theme/Current","process-handler-getFavourites":e.proxyPrefix+"Rest/Home/MyFavorites/Count","process-handler-getFavouriteCases":e.proxyPrefix+"Rest/Home/MyFavorites","stuff-handler-getUserStuff":e.sharepointProxyPrefix+"Rest/Stakeholder/Collections","stuff-handler-getUserStuff-v2":e.sharepointProxyPrefix+"Rest/Stakeholder/Collections/v2","templates-handler-getCollectionData":e.proxyPrefix+"Api/Collection/{idFact}/Data","templates-handler-getVirtualCollectionData":e.proxyPrefix+"Api/Collection/{guidVirtualCollection}/VirtualData","entities-handler-getMapping":e.sharepointProxyPrefix+"Rest/Entities/Mapping","entities-handler-getActions":e.sharepointProxyPrefix+"Rest/Entities/Actions","actions-handler-getDataForm":e.sharepointProxyPrefix+"Rest/Handlers/Render","actions-handler-hasStartForm":e.sharepointProxyPrefix+"Rest/Processes/HasStartForm","actions-handler-executeRule":e.sharepointProxyPrefix+"Rest/Action/Rule","process-handler-getUsersAndEvents":e.sharepointProxyPrefix+"Rest/Processes/CasesData/UsersAndEvents"}):{}},$.Class.extend("bizagi.workportal.services.context",{},{init:function(e){this.context=e.context,this.endPoints=bizagi.workportal.services.getEndPoints(e),this.proxyPrefix=bizagi.util.isEmpty(e.proxyPrefix)?"":e.proxyPrefix},getUrl:function(e){return null==this.endPoints[e]&&bizagi.log("Url not found","No endpoint defined for: "+e),this.endPoints[e]}}),$.Class.extend("bizagi.workportal.services.service",{BA_CONTEXT_PARAMETER_PREFIX:"h_",ENTITIES_QUERY_PAGE_SIZE:10},(_$$Class$extend={init:function(e){(e="object"==_typeof(e)?e:{}).context=bizagi.util.isEmpty(e.context)?"workportal":e.context,e.proxyPrefix=bizagi.util.isEmpty(e.proxyPrefix)?"":e.proxyPrefix,e.proxyPrefix=this.normalizeUrl(e.proxyPrefix),bizagi.RPproxyPrefix=e.proxyPrefix,e.sharepointProxyPrefix=bizagi.util.isEmpty(e.sharepointProxyPrefix)?"":e.sharepointProxyPrefix,e.sharepointProxyPrefix=this.normalizeUrl(e.sharepointProxyPrefix),this.serviceLocator=new bizagi.workportal.services.context(e),this.multiactionService=new bizagi.workportal.services.multiactionservice(this),this.pageSize=10,"undefined"!=typeof BIZAGI_INBOX_ROWS_PER_PAGE&&(this.pageSize=$.isNumeric(BIZAGI_INBOX_ROWS_PER_PAGE)?BIZAGI_INBOX_ROWS_PER_PAGE:this.pageSize),bizagi.injector.registerInstance("dataService",this),this.deviceType=e.deviceType||(bizagi.util.isSmartphoneDevice()?bizagi.deviceEnum.smartphone:bizagi.util.isTabletDevice()?bizagi.deviceEnum.tablet:bizagi.deviceEnum.desktop),this.deviceCode=bizagi.util.getDeviceCode()},getUsersData:function(e){var t=new $.Deferred;e.userIds=e.usersGuids?e.usersGuids:e.userIds;var i=e.userIds.toString().split(","),r=i.filter((function(e){return e!=bizagi.util.anonymizedUserInformation.id})),a=i.length!=r.length;return 0===r.length&&a?t.resolve([bizagi.util.anonymizedUserInformation]):(e.userIds=r.join(","),e.usersGuids=e.userIds,$.post(this.serviceLocator.getUrl("project-users-get"),e||{}).done((function(e){a&&e.push(bizagi.util.anonymizedUserInformation),t.resolve(e)})).fail((function(e){t.reject(e)}))),t},multiaction:function(){return this.multiactionService},getUrl:function(e){return this.serviceLocator.getUrl(e.endPoint)},normalizeUrl:function(e){return""!=e&&("/"!=e[e.length-1]&&(e=e.concat("/")),-1==e.indexOf("http://")&&-1==e.indexOf("https://")&&(e="http://"+e)),e},getCurrentTheme:function(){var e=this.serviceLocator.getUrl("getCurrentTheme");return $.read(e)},getOverrides:function(){return $.ajax({url:this.serviceLocator.getUrl("overrides")}).pipe((function(e){return e=e||{},$.each(e,(function(t,i){var r=i.toUpperCase();"TRUE"!=r&&"FALSE"!=r||(e[t]=bizagi.util.parseBoolean(i))})),e}))},authenticatedUser:function(e){var t=this,i=t.serviceLocator.getUrl("login-handler");return $.read({url:i,data:{userName:BIZAGI_USER,password:BIZAGI_PASSWORD,domain:BIZAGI_DOMAIN}}).pipe((function(e){return e}),(function(e){return i=(i=(i=(i=t.serviceLocator.getUrl("login-handlerv10")).replace("{0}",BIZAGI_USER||"")).replace("{1}",BIZAGI_PASSWORD||"")).replace("{2}",BIZAGI_DOMAIN||""),$.ajax({url:i,type:"GET",dataType:"json"})}))},logoutUser:function(e){var t=this.serviceLocator.getUrl("logoff-handlerv1");return $.read({url:t})},logOffUser:function(e){var t=this.serviceLocator.getUrl("logoff-handler");return $.read({url:t})},ping:function(){var e={url:this.serviceLocator.getUrl("ping"),beforeSend:function(e,t){e.sessionTimeoutService=!0}};return $.read(e)},getCurrentUser:function(e){return $.read(this.serviceLocator.getUrl("user-handler-getCurrentUser"))},getInboxSummary:function(e){return $.read(this.serviceLocator.getUrl("inbox-handler-getInboxSummary")).pipe((function(e){return e.inboxSummary}))},getFullInboxSummary:function(e){var t=this,i=t.buildProcessesRequestData(e);return $.read(t.serviceLocator.getUrl("inbox-handler-getFullInboxSummary"),i).then((function(i){return i.processes=t.transformProcessesResponse(e,i.processes),i}))},getAllProcesses:function(e){var t=this,i=t.serviceLocator.getUrl("process-handler-getAllProcesses"),r=t.buildProcessesRequestData(e);return $.read(i,r).then((function(i){return t.transformProcessesResponse(e,i)}))},buildProcessesRequestData:function(e){var t={};return null!=(e=e||{}).taskState&&(t.taskState=e.taskState),null!=e.onlyFavorites&&""!=e.onlyFavorites&&(t.onlyFavorites=e.onlyFavorites),null!=e.myActivities&&""!=e.myActivities&&(t.myActivities=e.myActivities),null!=e.myPendings&&""!=e.myPendings&&(t.myPendings=e.myPendings),e.smartfoldersParameters&&(url=url+"?"+e.smartfoldersParameters),bizagi.isMobile()&&(t.mobileDevice=!0),t},transformProcessesResponse:function(e,t){if(e.skipAggrupate)return t;var i={},r={},a=bizagi.localization.getResource("workportal-widget-inbox-all-processes"),o={name:bizagi.localization.getResource("workportal-widget-inbox-all-cases"),path:"",category:a,isFavorite:e.onlyFavorites||!1,guidFavorite:"",idworkflow:"",guidWFClass:"",count:0};return e.followingOrMyPending&&(r[a]=[],r[a].workflows=[],r[a].workflows.push(o)),t.workflows&&$.each(t.workflows.workflow,(function(e,t){r[t.category]||(r[t.category]=[],r[t.category].name=t.category,r[t.category].guidCategory=t.guidCategory,r[t.category].workflows=[]),r[t.category].workflows.push(t),o.count+=Number(t.count)})),i.categories=bizagi.util.objectValues(r),i.allCases=o,i.workflows=t.workflows.workflow,i},getAllSmartInbox:function(){return $.read({url:this.serviceLocator.getUrl("smartinbox-getAllInbox"),data:{}}).then((function(e){return e}))},getSpecificSmartInbox:function(e){var t={},i=this.serviceLocator.getUrl("smartinbox-specific-inbox").replace("{smartInboxId}",e.smartInboxId);return e.owner&&(t.owner=e.owner),$.read({url:i,data:t})},getAllProcessesSmartInbox:function(e){return $.read({url:this.serviceLocator.getUrl("smartinbox-processes"),data:{}})},getAllCustomizedColumnsSmartInbox:function(e){var t=JSON.stringify(e);return $.ajax({url:this.serviceLocator.getUrl("smartinbox-customized-columns"),data:t,type:"POST",dataType:"json",contentType:"application/json"})},getEntityValuesForInboxFilter:function(e){var t=this.serviceLocator.getUrl("smartinbox-entity-values");t=t.replace("{entityGuid}",e.entityGuid);var i=e.wildcard&&e.wildcard.length>0?"wildcard="+e.wildcard:"";return $.read({url:t,data:i})},getUserTasksForInboxFilter:function(e){var t="",i=e.id?e.id:-1;return t=e.isSmartInbox?(t=this.serviceLocator.getUrl("smartinbox-user-tasks-smartinboxid")).replace("{smartInboxId}",i):(t=this.serviceLocator.getUrl("smartinbox-user-tasks-process")).replace("{workflowId}",i),$.read({url:t,data:{}})},getUserTasksByWFClass:function(e){var t=JSON.stringify(e);return $.ajax({url:this.serviceLocator.getUrl("smartinbox-user-tasks"),data:t,type:"POST",dataType:"json",contentType:"application/json"})},createSmartInbox:function(e){var t=JSON.stringify(e);return $.ajax({url:this.serviceLocator.getUrl("smartinbox-createinbox"),data:t,type:"POST",dataType:"json",contentType:"application/json"})},updateSmartInbox:function(e,t){var i=JSON.stringify(t),r=this.serviceLocator.getUrl("smartinbox-specific-inbox").replace("{settingName}",e.settingName);return r=(r=r.replace("{owner}",e.owner)).replace("{smartInboxId}",e.smartInboxId),$.ajax({url:r,data:i,type:"PUT",dataType:"json",contentType:"application/json"})},deleteSmartInbox:function(e){var t=this.serviceLocator.getUrl("smartinbox-specific-inbox").replace("{settingName}",e.settingName);return t=(t=t.replace("{owner}",e.owner)).replace("{smartInboxId}",e.smartInboxId),$.ajax({url:t,type:"DELETE",dataType:"json",contentType:"application/json"})},getAdminSmartInbox:function(){var e=this.serviceLocator.getUrl("smartinbox-admin");return $.read({url:e})},getProfilesSmartInbox:function(e){var t=this.serviceLocator.getUrl("smartinbox-profiles"),i="wildcard="+e;return $.read({url:t,data:i})},createAdminSmartInbox:function(e){var t=this.serviceLocator.getUrl("smartinbox-admin"),i=JSON.stringify(e);return $.create({url:t,data:i,dataType:"json",contentType:"application/json"})},shareSmartInbox:function(e,t){var i=JSON.stringify(t),r=this.serviceLocator.getUrl("smartinbox-share").replace("{smartInboxId}",e.smartInboxId);return $.ajax({url:r,data:i,type:"POST",dataType:"json",contentType:"application/json"})},getProcessIcon:function(e){var t={processId:e.processId};return $.read({url:this.serviceLocator.getUrl("process-getIcon"),data:t,batchRequest:!0})},getCollectionIcon:function(e){var t={collectionId:e.collectionId};return $.read({url:this.serviceLocator.getUrl("collections-getIcon"),data:t,batchRequest:!0})},getFavourites:function(){var e=this.serviceLocator.getUrl("process-handler-getFavourites");return $.read(e,{}).pipe((function(e){return e}))},getMyStuff:function(){var e=this.serviceLocator.getUrl("process-handler-getMyStuff");return $.read(e,{}).pipe((function(e){return e}))},getFavouriteCases:function(e){var t={},i=this.serviceLocator.getUrl("process-handler-getFavouriteCases");return e=e||{},t.pageSize=e.pageSize||this.pageSize,t.page=e.page||1,bizagi.isMobile()&&(t.mobileDevice=!0),$.read(i,t).pipe((function(e){return e}))},getActions:function(e){e=e||{};var t={},i=this.serviceLocator.getUrl("process-handler-getActions");return bizagi.isMobile()&&(t.mobileDevice=!0),$.read(i,t).pipe((function(e){return e}))},getCasesList:function(e){e=e||{};var t={},i=this.serviceLocator.getUrl("case-handler-getCasesList");return t.pageSize=e.pageSize||10,t.page=e.page||1,t.numberOfFields=e.numberOfFields||"-1",t.idWfClass=e.idWfClass||"-1",$.read(i,t).pipe((function(e){for(var t={overdue:[],today:[],tomorrow:[],upcoming:[],page:e.page,totalPages:e.totalPages},i=new Date,r=i.getMonth(),a=i.getDate(),o=i.getYear(),s=0;e.elements.length>s;s++){var n=e.elements[s],c=new Date(n[3]),d=c.getDate(),l=c.getMonth(),u=c.getYear();a>d||r>l&&o>=u?(n[3]=bizagi.util.dateFormatter.formatDate(new Date(n[3]),"dd MMM"),t.overdue.push(n)):a==d?(n[3]=bizagi.util.dateFormatter.formatDate(new Date(n[3]),"hh:mm"),t.today.push(n)):a+1==d?(n[3]=bizagi.util.dateFormatter.formatDate(new Date(n[3]),"hh:mm"),t.tomorrow.push(n)):(n[3]=bizagi.util.dateFormatter.formatDate(new Date(n[3]),"dd MMM"),t.upcoming.push(n))}return t}))},getAllAdministrableEntities:function(e){e=e||{};var t={action:"entitiesList",kind:"administrable"};return $.ajax({url:this.serviceLocator.getUrl("entities-administration"),data:t,type:"POST",dataType:"json"}).pipe((function(e){var t={entities:[]};return $.each(e,(function(e,i){t.entities.push(i)})),t}))},getEntitiesList:function(e){return(e=e||{}).action="entitiesList",e.kind="entitiesData",$.ajax({url:this.serviceLocator.getUrl("entities-administration"),data:e,type:"POST",dataType:"json"})},getCasesByWorkflow:function(e){e=e||{};var t={},i=this.serviceLocator.getUrl("process-handler-getCustomizedColumnsDataInfo");if(""!=e.liveFilters&&(t.smartInboxFilter=e.liveFilters),"smartinbox"==e.type&&(t.smartInboxGuid=e.smartInboxGuid,t.orderFieldName=e.orderFieldName||"",t.orderType=e.orderType||"0",t.order=e.order||""),bizagi.util.isEmpty(e.taskState)||(t.taskState=e.taskState),bizagi.util.isEmpty(e.idWorkflow)||(t.idWorkflow=e.idWorkflow),1==e.onlyFavorites&&(t.onlyFavorites=!0,t.taskState="all"),t.pageSize=e.pageSize||this.pageSize,t.page=e.page||1,bizagi.isMobile()&&(t.mobileDevice=!0),e.smartfoldersParameters){var r=e.smartfoldersParameters.split("&");$.each(r,(function(e,i){var r=i.split("=");t[r[0]]=r[1]}))}return $.read(i,t).pipe((function(e){return $.each(e.cases.rows,(function(t,i){var r=[];e.cases.rows[t].radnumber=i.id,$.each(i.fields,(function(i,a){if(null!=a)try{null!=a.isRadNumber&&"true"==a.isRadNumber?e.cases.rows[t].radnumber=a.Value:null!=a.workitems?e.cases.rows[t].workitems=a.workitems:r.push(a)}catch(e){}})),e.cases.rows[t].fields=r})),e.cases}))},_makeRequestOrganizations:function(e){var t=this.serviceLocator.getUrl(e),i={type:12,name:""};return $.read(t,i)},getOrganizationsList:function(e){var t=e?"process-handler-getOrganizations-ForAdminUsers":"process-handler-getOrganizations";return this._makeRequestOrganizations(t)},getOrganizationsByUserList:function(){return this._makeRequestOrganizations("process-handler-getOrganizationsByUser")},getOrganizationsForReassignCases:function(){return this._makeRequestOrganizations("process-handler-getOrganizationsForReassignCases")},getCustomizedColumnsData:function(e){e=e||{};var t={},i=this.serviceLocator.getUrl("process-handler-getCustomizedColumnsData");""!=e.liveFilters&&(t.smartInboxFilter=e.liveFilters),e.taskState=e.taskState||"all";var r=e.taskState.toString().toLowerCase();if(""==r&&(e.taskState="all"),"red"==r&&(e.taskState="Red"),"yellow"==r&&(e.taskState="Yellow"),"green"==r&&(e.taskState="Green"),"smartinbox"==e.type)t.smartInboxGuid=e.smartInboxGuid,t.pageSize=e.pageSize,t.page=e.page||1,t.orderFieldName=e.orderFieldName||"",t.orderType=e.orderType||"0",t.order=e.order||"",t.taskState=e.taskState;else{if(t.pageSize=e.pageSize||this.pageSize,t.pageSize=t.pageSize<1?10:t.pageSize,t.page=e.page||1,t.orderFieldName=e.orderFieldName||"",t.orderType=e.orderType||"0",t.order=e.order||"",bizagi.isMobile()&&(t.mobileDevice=!0),t.taskState=e.taskState,bizagi.util.isEmpty(e.idWorkflow)||(t.idWorkflow=e.idWorkflow),bizagi.util.isEmpty(e.idTask)||(t.idTask=e.idTask),bizagi.util.isEmpty(e.radNumber)||(t.radNumber=e.radNumber),1==e.onlyFavorites&&(t.onlyFavorites=!0,t.taskState="all"),e.smartfoldersParameters){var a=e.smartfoldersParameters.split("&");$.each(a,(function(e,i){var r=i.split("=");t[r[0]]=r[1]}))}e.group&&(t.group=e.group)}return $.read(i,t)},getCategories:function(e){var t={};return(e=e||{}).idCategory&&(t.idCategory=e.idCategory),e.idApp&&(t.idApp=e.idApp),bizagi.isMobile()&&(t.mobileDevice=!0),t.groupByApp=e.groupByApp||!1,$.read(this.serviceLocator.getUrl("process-handler-getCategory"),t)},getRecentProcesses:function(e){return e=e||{},$.read(this.serviceLocator.getUrl("process-handler-getRecentProcesses"),e)},getCaseSummary:function(e){return void 0!==(e=e||{}).idCase?$.read({url:this.serviceLocator.getUrl("case-handler-getCaseSummary"),data:{idCase:e.idCase,eventAsTasks:e.eventAsTasks||"false",onlyUserWorkItems:e.onlyUserWorkItems||"true",mobileDevice:bizagi.isMobile()||"false"},serviceType:"GETSUMMARY"}).pipe((function(e){return e.isAborted&&(e.isAborted=bizagi.util.parseBoolean(e.isAborted)),e})):void 0!==e.guid?$.read({url:this.serviceLocator.getUrl("case-handler-getCaseSummaryByGuid"),data:{guid:e.guid,eventAsTasks:e.eventAsTasks||"false",onlyUserWorkItems:e.onlyUserWorkItems||"true",mobileDevice:bizagi.isMobile()||"false"},serviceType:"GETSUMMARY"}).pipe((function(e){return e})):void 0},getCaseAssignees:function(e){return e=e||{},$.read(this.serviceLocator.getUrl("case-handler-getCaseAssignees"),{idCase:e.idCase}).pipe((function(e){return e}))},getCaseTasks:function(e){return e=e||{},$.read(this.serviceLocator.getUrl("case-handler-getCaseTasks"),{idCase:e.idCase})},getCaseEvents:function(e){return e=e||{},$.read({url:this.serviceLocator.getUrl("case-handler-getCaseEvents"),data:{idCase:e.idCase},serviceType:"GETEVENTS"}).pipe((function(e){return e}))},getCaseSubprocesses:function(e){return e=e||{},$.read({url:this.serviceLocator.getUrl("case-handler-getCaseSubprocesses"),data:{idCase:e.idCase},serviceType:"GETSUBPROCESSES"}).pipe((function(e){return e}))},getCaseFormsRenderVersion:function(e){return void 0!==(e=e||{}).guid?$.read(this.serviceLocator.getUrl("case-handler-getCaseFormsRenderVersionByGuid"),{guid:e.guid}):$.read(this.serviceLocator.getUrl("case-handler-getCaseFormsRenderVersion"),{idCase:e.idCase})},getCaseFormsRenderVersionDataContent:function(e){var t=new $.Deferred;return $.when(this.getCaseFormsRenderVersion(e)).done((function(e){t.resolve(e)})),t.promise()},getTaskAssignees:function(e){return e=e||{},$.read(this.serviceLocator.getUrl("case-handler-getTaskAssignees"),{idCase:e.idCase,idTask:e.idTask})},getWorkitems:function(e){var t={};void 0!==(e=e||{}).guid&&(t.guid=e.guid),t.idCase=e.idCase,"0"!=e.fromTask&&(t.fromTask=e.fromTask),""!=e.fromWorkItemId&&(t.fromWorkItemId=e.fromWorkItemId),t.mobileDevice=bizagi.isMobile(),e.eventAsTasks&&(t.eventAsTasks=e.eventAsTasks),void 0!==e.onlyUserWorkItems&&(t.onlyUserWorkItems=e.onlyUserWorkItems);var i=this.serviceLocator.getUrl("case-handler-getWorkItems");return void 0!==e.guid&&void 0===e.idCase&&(i=this.serviceLocator.getUrl("case-handler-getWorkItemsByGuid").replace("{guid}",e.guid)),void 0===t.guid||""!==t.fromTask&&void 0!==t.fromTask||(t.fromTask=-1),$.read({url:i,data:t,serviceType:"GETWORKITEMS"})},getQueriesDefinitions:function(e){var t=this;if(t.hashQueriesDef&&e.idNode){if(bizagi.override.enableQueriesClassicMenu)return t.hashQueriesDef[e.idNode];if(-1==e.idNode||1!=t.hashQueriesDef[e.idNode].length||"00000000-0000-0000-0000-000000000000"!=t.hashQueriesDef[e.idNode][0].guidForm||t.hashQueriesDef[e.idNode][0].notMigratedUrl){if(-1!=e.idNode&&t.hashQueriesDef[e.idNode].length>1){var i=[];return $.each(t.hashQueriesDef[e.idNode],(function(e,r){if(r.nodes.length>0){var a=t.getQueriesDefinitions({idNode:r.idNode});$.merge(i,a)}else i.push(r)})),i}return t.hashQueriesDef[e.idNode]}return t.getQueriesDefinitions({idNode:t.hashQueriesDef[e.idNode][0].idNode})}var r=new $.Deferred;return $.read(t.serviceLocator.getUrl("query-handler-getqueries-definitions")).done((function(e){t.hashQueriesDef={},t.hashQueriesDef[0]={},t.processQueriesDefinitions("-1",e.query),r.resolve(t.hashQueriesDef[-1])})),r.promise()},processQueriesDefinitions:function(e,t){var i=this;$.each(t,(function(t,r){i.hashQueriesDef[e]||(i.hashQueriesDef[e]=[]),i.hashQueriesDef[e].push(r),r.nodes?i.processQueriesDefinitions(r.idNode,r.nodes):r.nodes={}}))},getQueries:function(e){var t=this;if(t.hashQueries&&e.idElement)return t.hashQueries[e.idElement];var i=new $.Deferred;return $.read(t.serviceLocator.getUrl("query-handler-getqueries")).done((function(e){t.hashQueries={},t.hashQueries[0]={},t.processQueries(e.query),i.resolve(t.hashQueries[-1])})),i.promise()},processQueries:function(e){var t=this;$.each(e,(function(e,i){t.hashQueries[i.idParent]||(t.hashQueries[i.idParent]=[]),t.hashQueries[i.idParent].push(i),i.nodes?t.processQueries(i.nodes):i.nodes={}}))},getManagementQueries:function(e){return $.create(this.serviceLocator.getUrl("queries-manager-queriesByUser"),{guidUser:e.guidUser})},transferQueries:function(e){return $.create(this.serviceLocator.getUrl("queries-manager-TransferQueries"),{guidUserSource:e.guidUserSource,guidUserTarget:e.guidUserTarget})},createNewCase:function(e){var t={};return(e=e||{}).caseData&&(t.caseData=JSON.stringify(e.caseData)),e.idWfClass&&(t.idWfClass=e.idWfClass),e.idOrganization&&(t.idOrganization=e.idOrganization),$.create({url:this.serviceLocator.getUrl("case-handler-addNewCase"),data:t,serviceType:"NEWCASE"})},startProcess:function(e){var t;e=e||{},t=this.serviceLocator.getUrl("case-handler-startProcess");var i={};return e.idProcess&&(i.idProcess=e.idProcess),e.entityMapping&&(i.entityMapping=e.entityMapping),e.isAdhocProcess&&(i.isAdhocProcess=e.isAdhocProcess),e.idOrganization&&(i.idOrganization=e.idOrganization),$.create({url:t,data:i,serviceType:"STARTPROCESS"})},searchCases:function(e){e=e||{};var t={h_action:"SEARCHCASES",onlyUserCases:!1,active:!1};return t.page=e.page||1,e.radNumber&&(t.radNumber=$.trim(e.radNumber)),t.pageSize=e.pageSize||this.pageSize,$.ajax({url:this.serviceLocator.getUrl("query-handler"),data:t,type:"POST",dataType:"json"})},queryCases:function(e){e=e||{};var t={h_action:"QUERYCASES"};return t.onlyUserCases=e.onlyUserCases||!1,t.active=e.active&&!0,t.page=e.page||1,e.radNumber&&(t.radNumber=$.trim(e.radNumber)),t.pageSize=e.pageSize||this.pageSize,t.filter=e.filter,t.outputxpath=e.outputxpath,t.orderFieldName=e.orderFieldName||"",t.orderType="asc"==e.orderType||1==e.orderType?1:0,t.order=e.order||"",$.ajax({url:this.serviceLocator.getUrl("query-handler"),data:t,type:"POST",dataType:"json"})},queryEntities:function(e){e=e||{};var t={h_action:"QUERYENTITIES"};return t.page=e.page||1,t.pageSize=this.Class.ENTITIES_QUERY_PAGE_SIZE,t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+"idEnt"]=e.idEntity,t.filter=e.filter,t.outputxpath=e.outputxpath,t.orderFieldName=e.orderFieldName||"",t.orderType=e.orderType||"",t.order=e.order||"",$.ajax({url:this.serviceLocator.getUrl("query-handler"),data:t,type:"POST",dataType:"json"})},getMenuAuthorization:function(){return $.read(this.serviceLocator.getUrl("authorization-handler-getMenuAuthorization"))},getMaintenanceWindowShowUpcoming:function(){return $.read({url:this.serviceLocator.getUrl("show-upcoming-maintenance-window")})},isCaseCreationAuthorized:function(e){var t=this.serviceLocator.getUrl("authorization-handler-isCaseCreationAuthorized");return t=t.replace("{0}",e.idWfClass||""),$.read({url:t})},getAsynchExecutionState:function(e){return(e=e||{}).idCase,$.read({url:this.serviceLocator.getUrl("case-handler-getAsynchExecutionState"),data:{idCase:e.idCase,idAsynchWorkitem:e.idAsynchWorkitem},serviceType:"ASYNCHEXECUTION"})},supportedLogTypes:function(){return $.read(this.serviceLocator.getUrl("case-handler-supportedLogTypes"))},getActivityLog:function(e){return e=e||{},$.read(this.serviceLocator.getUrl("case-handler-getActivityLog"),{idCase:e.idCase,orden:e.sort||0,idActualPage:e.idActualPage||1,pageSize:e.pageSize||10}).pipe((function(e){var t=0;e.rows&&e.rows.length&&(t=e.rows.length);for(var i,r=0;r<t;r++)i=new Date(e.rows[r][4]),e.rows[r][4]="Invalid Date"==i?e.rows[r][4]:bizagi.util.dateFormatter.formatDate(i,bizagi.localization.getResource("dateFormat")+" "+bizagi.localization.getResource("timeFormat"));return e}))},getActivityDetailLog:function(e){return e=e||{},$.read(this.serviceLocator.getUrl("case-handler-getActivityDetailLog"),{idCase:e.idCase,idWorkItemFrom:e.idWorkItemFrom,idActualPage:e.idActualPage||1,pageSize:e.pageSize||10}).pipe((function(e){return e}))},getEntityLog:function(e){return e=e||{},$.read(this.serviceLocator.getUrl("case-handler-getEntityLog"),{idCase:e.idCase,orden:e.sort||0,idActualPage:e.idActualPage||1,pageSize:e.pageSize||10}).pipe((function(e){return e}))},getEntityDetailLog:function(e){return e=e||{},$.read(this.serviceLocator.getUrl("case-handler-getEntityDetailLog"),{idCase:e.idCase,idEntity:e.idEntity||-1,userFullName:e.userFullName||"",attribDisplayName:e.attribDisplayName||"",idActualPage:e.idActualPage||1,pageSize:e.pageSize||10}).pipe((function(e){return e}))},getUserLog:function(e){return e=e||{},$.read(this.serviceLocator.getUrl("case-handler-getUserLog"),{idCase:e.idCase,orden:e.sort||0,idActualPage:e.idActualPage||1,pageSize:e.pageSize||10}).pipe((function(e){return e}))},getUserDetailLog:function(e){return e=e||{},$.read(this.serviceLocator.getUrl("case-handler-getUserDetailLog"),{idCase:e.idCase,idUser:e.idUser,entDisplayName:e.entDisplayName||"",attribDisplayName:e.attribDisplayName||"",idActualPage:e.idActualPage||1,pageSize:e.pageSize||10}).pipe((function(e){return e}))},getAdminLog:function(e){return e=e||{},$.read(this.serviceLocator.getUrl("case-handler-getAdminLog"),{idCase:e.idCase,orden:e.sort||0,idActualPage:e.idActualPage||1,pageSize:e.pageSize||10}).pipe((function(e){var t=0;e.rows&&e.rows.length&&(t=e.rows.length);for(var i,r=0;r<t;r++)i=new Date(e.rows[r][4]),e.rows[r][4]="Invalid Date"==i?e.rows[r][4]:bizagi.util.dateFormatter.formatDate(i,bizagi.localization.getResource("dateFormat")+" "+bizagi.localization.getResource("timeFormat"));return e}))},addFavorite:function(e){return e=e||{},$.create(this.serviceLocator.getUrl("favorites-handler-saveFavorite"),{idObject:e.idObject,favoriteType:e.favoriteType}).pipe((function(e){return e}))},delFavorite:function(e){return e=e||{},$.destroy(this.serviceLocator.getUrl("favorites-handler-deleteFavorite"),{guidFavorite:e.idObject}).pipe((function(e){return e}))},summaryAssigness:function(e){var t=new $.Deferred,i={idCase:e.idCase||""},r=e.preview?this.getCaseAssigneesPreview(i):this.getCaseAssignees(i);return $.when(r).done((function(e){for(var i=e.assignees||[],r=i.length,a={showAssignees:!!(bizagi.override.showAssignees&&i.length>0),assignees:{},events:"",activities:""},o="",s="",n=[],c=[],d=0;d<r;d++)bizagi.util.parseBoolean(i[d].isEvent)?-1==n.indexOf(i[d].idUser)&&(n.push(i[d].idUser),o+=i[d].Name+", "):-1==c.indexOf(i[d].idUser)&&(c.push(i[d].idUser),s+=i[d].Name+", ");a.events=o.substring(0,o.length-2),a.activities=s.substring(0,s.length-2),t.resolve(a)})),t.promise()},summarySubProcess:function(e){var t=$.Deferred(),i=e.idCase||"";return $.when(this.getCaseSubprocesses({idCase:i})).done((function(e){if(e.showSubProcess=e.subProcesses.length>=1,e.showSubProcesColumns=void 0!==e.CustFields[0]&&e.CustFields[0][0].length>=1,e.showSubProcesColumns){var i;e.subProcPersonalized={};for(var r=0;r<e.CustFields.length;r++){i=0;for(var a=0;a<e.subProcesses.length;a++)e.subProcesses[a].idCustData==r&&(e.subProcPersonalized[r]=e.subProcPersonalized[r]||{},e.subProcPersonalized[r].subProcesses=e.subProcPersonalized[r].subProcesses||{},e.subProcPersonalized[r].subProcesses[i++]=e.subProcesses[a]);-1!=e.subProcesses[r].idCustData&&null!=e.subProcPersonalized[r]&&(e.subProcPersonalized[r].CustFields={0:e.CustFields[r][r]},e.subProcPersonalized[r].idCase=e.idCase)}}t.resolve(e)})),t.promise()},summaryCaseEvents:function(e){var t=$.Deferred(),i=e.idCase||"";return $.when(this.getCaseEvents({idCase:i})).done((function(e){e.showEvents=e.events.length>=1,t.resolve(e)})),t.promise()},summaryCaseDetails:function(e){var t=new $.Deferred,r=e.idWorkitem||0;return $.when(this.getCaseSummaryDataContent(e)).done((function(e){e.currentState=e.currentState||[];var a=e.currentState.length;for(e.showEvents=e.countEvents>=1,e.showParentProcess=e.idParentCase>=1,e.parentProcess={displayName:e.parentDisplayName,idCase:e.idParentCase},e.isClosedForAllUsers=bizagi.util.parseBoolean(e.isClosed),e.isClosed=!bizagi.util.parseBoolean(e.isOpen),e.showAssignees=!!(bizagi.override.showAssignees&&e.countAssigness>0),e.showSubProcess=e.countSubProcesses>0,e.showForm=!!bizagi.util.parseBoolean(e.hasGlobalForm),e.allowsReassign="false",i=0;i<a;i++)e.currentState[i].idWorkItem==r&&(e.allowsReassign=e.currentState[i].allowsReassign);var o=[],s=0;for(i=0;i<a;i++)!bizagi.util.parseBoolean(e.currentState[i].isEvent)&&bizagi.util.parseBoolean(e.currentState[i].assignToCurrentUser)&&e.currentState[i].idWorkItem!=r&&(o[s++]=e.currentState[i]);e.currentStateTypes=o,e.showActivities=o.length>0,t.resolve(e)})).fail((function(e){t.reject(e)})),t.promise()},releaseActivity:function(e){var t=this.serviceLocator.getUrl("case-handler-releaseActivity");t=t.replace("{idCase}",e.idCase);var i={};return e&&(i.idCase=e.idCase,i.idWorkItem=e.idWorkItem),$.ajax({url:t,data:i,type:"POST",dataType:"json"})},takeOwnershipActivity:function(e){var t=this.serviceLocator.getUrl("case-handler-takeOwnershipActivity"),i={};return e&&(i.idCase=e.idCase,i.idWorkItem=e.idWorkItem),$.ajax({url:t,data:i,type:"POST",dataType:"json"})},getTaskOptions:function(e){return $.read(this.serviceLocator.getUrl("case-handler-taskOptions"),e)},summaryActivities:function(e){var t={},i=e.data||{},r=r||e.idWorkitem||0;try{t.showActivities=i.currentStateTypes.length>=1,t.currentState=i.currentStateTypes,t.globalIdWorkitem=r,t.creationDate=i.creationDate}catch(e){}return t},getCaseSummaryDataContent:function(e){var t=this,i=new $.Deferred;return $.when(t.getCaseSummary(e)).done((function(e){e.taskState=t.icoTaskState,e.createdBy&&(e.createdByName=e.createdBy.Name,e.createdByUserName=e.createdBy.userName,e.caseDescription=""==e.caseDescription?"":e.caseDescription,e.processPath=e.processPath.replace(/\//g," > ")+e.process,e.showWorkOnIt=!0),i.resolve(e)})).fail((function(e){i.reject(e)})),i.promise()},getSmartFolders:function(e){var t=this,i={};return i.idFolder=e||"",$.read(t.serviceLocator.getUrl("folders-handler-getUserQueries"),i).pipe((function(i){return-1==e||""==e?i:t.searchFolders(e,i)||[]}))},deleteSmartFolder:function(e){var t={action:"6"};return e=e||{},t.idSmartFolder=e.idSmartFolder||"",t.idUser=e.idUser||"",$.destroy(this.serviceLocator.getUrl("folders-associate-deleteSmartFolder"),t)},getFolders:function(e){var t=this,i={action:"getUserFolder"};return i.idFolder=e||"",$.ajax({url:t.serviceLocator.getUrl("folders-handler"),type:"POST",data:i,dataType:"json"}).pipe((function(i){return""==e?{folders:[{name:bizagi.localization.getResource("workportal-widget-folders"),id:"-1",idParent:0,childs:i}]}:-1==e?i:t.searchFolders(e,i)||[]}))},searchFolders:function(e,t){for(var i=0;i<t.folders.length;i++){if(t.folders[i].id==e)return t.folders[i].childs}},getCasesByFolder:function(e){return e=e||"",$.ajax({cache:!0,url:"RestServices/"+e,type:"GET",dataType:"json"})},makeFolder:function(e){var t={action:"CreateUpdateFolder"};return t.folderName=e.folderName||"No Name",null!=e.idParentFolder&&e.idParentFolder>1&&(t.idParentFolder=e.idParentFolder),$.ajax({url:this.serviceLocator.getUrl("folders-handler"),data:t,type:"POST",dataType:"json"})},updateFolder:function(e){var t={};return e=e||{},t.action="CreateUpdateFolder",t.idFolder=e.idFolder||"",e.folderName&&(t.folderName=e.folderName),e.idParentFolder&&(t.idParentFolder=e.idParentFolder),$.ajax({url:this.serviceLocator.getUrl("folders-handler"),data:t,type:"POST",dataType:"json"})},associateCaseToFolder:function(e){var t={action:"4"};return e=e||{},t.idCase=e.idCase||"",t.idCustomFolder=e.idCustomFolder,$.ajax({url:this.serviceLocator.getUrl("folders-associate"),data:t,type:"POST",dataType:"json"})},dissasociateCaseFromFolder:function(e){var t={action:"DeleteCaseFromFolder"};return e=e||{},t.idFolder=e.idFolder,t.idCase=e.idCase,$.ajax({url:this.serviceLocator.getUrl("folders-handler"),data:t,type:"POST",dataType:"json"})},deleteFolder:function(e){var t={action:"5"};return e=e||{},t.idCustomFolder=e.idCustomFolder||"",$.ajax({url:this.serviceLocator.getUrl("folders-associate"),data:t,type:"POST",dataType:"json"})},getFile:function(e){var t={},i=this.serviceLocator.getUrl("file-handler");return e=e||{},t.action="getFileContent",t.uploadId=e.uploadId||"",t.entityId=e.entityId||"",t.entityKey=e.entityKey||"",bizagi.services.ajax.pathToBase+i+"?"+jQuery.param(t)},getComments:function(e){var t=this;return e=e||{},$.read(encodeURI(t.serviceLocator.getUrl("MessageHandler-GetComments")),{idCase:e.idCase||"",idColorCategory:"number"==typeof e.idColorCategory?e.idColorCategory:"",pag:e.pag||1,pagSize:e.pagSize||10}).pipe((function(e){var i=new $.Deferred,r="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";return e.comments?$.each(e.comments,(function(t,i){e.comments[t].hasOwnProperty("CategoryColor")||(e.comments[t].CategoryColor="")})):e.comments=[],e.users?$.each(e.users,(function(t,i){e.users[t].Picture=""===e.users[t].Picture?r:e.users[t].Picture})):$.when(t.getCurrentUser()).done((function(t){e.users=[],e.users.push({Id:t.idUser,Name:t.user,DisplayName:t.userName,Picture:r})})),i.resolve(e),i.promise()}))},makeNewComment:function(e){return $.create(this.serviceLocator.getUrl("MessageHandler-NewComment"),{idCase:e.idCase||"",comment:e.comment.replace(/\n/g,"<br>")||""}).pipe((function(e){if(e.comments){var t=[e.comments];$.each(t,(function(e,i){t[e].CategoryColor=""})),e.comments=t}if(e.users){var i=[e.users];$.each(i,(function(e,t){i[e].Picture=""==i[e].Picture?"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":i[e].Picture})),e.users=i}return e}))},makeNewReply:function(e){return e=e||{},$.create(this.serviceLocator.getUrl("MessageHandler-ReplyComment"),{idCase:e.idCase||"",idComment:e.idComment||"",comment:e.comment.replace(/\n/g,"<br>")||""}).pipe((function(e){if(e.comments&&(e.Replies=[e.comments]),e.users){var t=[e.users];$.each(t,(function(e,i){t[e].Picture=""==t[e].Picture?"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":t[e].Picture})),e.users=t}return e}))},removeComment:function(e){return e=e||{},$.destroy(this.serviceLocator.getUrl("MessageHandler-RemoveComment"),{idCase:e.idCase||"",idComment:e.idComment||""})},removeReply:function(e){return e=e||{},$.destroy(this.serviceLocator.getUrl("MessageHandler-RemoveReply"),{idCase:e.idCase||"",idComment:e.idComment||"",idReply:e.idReply||""})},renameCommentCategory:function(e){return e=e||{},$.update(this.serviceLocator.getUrl("MessageHandler-RenameCategoryColor"),{idColorCategory:e.idColorCategory>=0?e.idColorCategory:"",colorName:e.colorName||""})},setCommentCategory:function(e){return e=e||{},$.update(this.serviceLocator.getUrl("MessageHandler-SetCategoryToComment"),{idCase:e.idCase||"",idComment:e.idComment||"",idColorCategory:"number"==typeof e.idColorCategory?e.idColorCategory:""})},getCommentsCategories:function(){return $.read(this.serviceLocator.getUrl("MessageHandler-GetCategoryColors")).pipe((function(e){return e.length>1&&e[0].categories?e[0]:e}))},getNewComments:function(e){var t={idCase:(e=e||{}).idCase||0,idComment:e.idComment||0};return $.read(this.serviceLocator.getUrl("MessageHandler-CountNewComments"),t)},getAnalisysQueries:function(){return $.read(this.serviceLocator.getUrl("bamAnalytics-handler-getAnalisysQueries"))},updateQueries:function(e){return $.update(this.serviceLocator.getUrl("bamAnalytics-handler-updateQuery"),{idQuery:e.idQuery>=0?e.idQuery:"",queryName:e.queryName||"",queryDescription:e.queryDescription||""})},deleteQueries:function(e){var t={action:"1612"};return t.QueryId=e||"",$.destroy(this.serviceLocator.getUrl("reports-handler-deleteQueries"),t)},getConfiguration:function(e){var t=this.serviceLocator.getUrl("authenticationConfig")+(e?"?domain="+e:"");return $.read(t)},logout:function(e){var t=this,i={sourceLogout:"user"};sessionStorage.removeItem("bizagiAuthentication");try{$.when($.read(bizagi.proxyPrefix+"Rest/Users/CurrentUserGuid")).done((function(r){var a={domain:r.domain};$.when(t.getConfiguration(a.domain)).done((function(r){if(r.redirectErrorPage)window.location.href=r.redirectErrorPage;else{var o=r.authenticationType,s=r.authenticationSubType;switch(o){case"Federate":t.federateAuthenticatorLogOff(r,s,i,e);break;case"SAML":loader.nativeAjax(loader.getPathUrl(t.serviceLocator.getUrl("logout"),i),(function(e){var t=JSON.parse(e.responseText);if(!0===t.logout)if(void 0!==t.samlUrlRedirect){var i=decodeURI(t.samlUrlRedirect),r=document.createElement("iframe");document.getElementsByTagName("body")[0].appendChild(r),$(r).on("load",(function(){(bizagi.util.isIE8()?$(this.contentWindow.document.body):$(this.contentWindow.eval("document.body"))).text();location.reload()})),r.src=i}else location.reload();else bizagi.log("Error logging out")}));break;case"OAuth2":t.oauth2AuthenticatorLogOff(i,e);break;case"Multiple":$.when($.read(t.serviceLocator.getUrl("multipleAuthenticatorConfig"),a)).done((function(r){switch(r.multipleAuthenticationType.toLowerCase()){case"federated":t.federateAuthenticatorLogOff(r,r.multipleAuthenticationSubType,i,e);break;case"oauth2":t.oauth2AuthenticatorLogOff(i,e,a);break;default:t.authenticatorLogOff(i,e)}})).fail((function(r){console.log(r),t.authenticatorLogOff(i,e)}));break;default:t.authenticatorLogOff(i,e)}}})).fail((function(e){console.log(e)}))})).fail((function(e){console.log(e)}))}catch(e){console.log(e)}},federateAuthenticatorLogOff:function(e,t,i,r){var a=this,o=e.logOffURL,s=e.federationLogoutBindingProtocol;if(t&&(t=t.toLowerCase()),"wsfederated"===t)$.when($.create(a.serviceLocator.getUrl("logout"),i)).done((function(){r&&""!=r&&(o=o.replace(/wreply=[^&]*/,"wreply="+r)),location.href=o})).fail((function(){bizagi.log("Error logging out")})).always((function(){location.href=e.logOffURL}));else if("saml"===t){var n={};sessionStorage.getItem("userIdentity")&&(n={userIdentity:sessionStorage.getItem("userIdentity")}),$.when($.read(a.serviceLocator.getUrl("FederateLogoffUrl"),n)).done((function(e){e.federateLogoffUrl&&(o=e.federateLogoffUrl),$.when($.create(a.serviceLocator.getUrl("logout"),i)).done((function(){"POST"===s?(window.document.open("text/html"),window.document.write(o),window.document.close()):window.location.href=o})).fail((function(){bizagi.log("Error logging out")})).always((function(){}))})).fail((function(){bizagi.log("Error logging out")})).always((function(){}))}},oauth2AuthenticatorLogOff:function(e,t,i){var r=this;$.when($.create(r.serviceLocator.getUrl("logout"),e)).done((function(e){$.when($.read(r.serviceLocator.getUrl("oauth2AuthenticationConfig"),i)).done((function(i){if(i.logoutUrl&&""!=i.logoutUrl){var r=i.logoutUrl;t&&(t.endsWith("/")||(t+="/"),r=r.replace(/post_logout_redirect_uri=[^&]*/,"post_logout_redirect_uri="+t)),e.invalidateAccessToken&&(r=r.replace(/invalidateAccessToken=[^&]*/,"invalidateAccessToken="+e.invalidateAccessToken)),e.idTokenHint&&r.indexOf("id_token_hint")>=0&&(r+=e.idTokenHint),location.href=r}else location.reload()})).fail((function(){bizagi.log("Error logging out")}))})).fail((function(){bizagi.log("Error logging out")}))},authenticatorLogOff:function(e,t){$.when($.create(this.serviceLocator.getUrl("logout"),e)).done((function(){t?location.href=t:window.location=bizagi.services.ajax.loginPage})).fail((function(){bizagi.log("Error logging out")}))},logoutMobile:function(){sessionStorage.removeItem("bizagiAuthentication");var e=this.serviceLocator.getUrl("logout");return $.read(e)},logoutBeforeUnload:function(){sessionStorage.removeItem("bizagiAuthentication"),$.ajax({type:"POST",async:!1,data:{sourceLogout:"browser"},url:this.serviceLocator.getUrl("logout")})},getOrganizationInfo:function(e){var t={};return t.objectType=e,$.ajax({url:this.serviceLocator.getUrl("massive-activity-assignments-getOrganizationInfo"),data:t,type:"GET",dataType:"json"})},getCasesByOrganization:function(e){var t={};return t.roles=e.roles?"["+e.roles.toString()+"]":"[]",t.skills=e.skills?"["+e.skills.toString()+"]":"[]",t.locations=e.locations?"["+e.locations.toString()+"]":"[]",$.ajax({url:this.serviceLocator.getUrl("massive-activity-assignments-getCasesByOrganization"),data:t,type:"GET",dataType:"json"})},reassignCases:function(e){var t={};return t.users=e.user?"["+e.user.toString()+"]":"[]",t.roles=e.roles?"["+e.roles.toString()+"]":"[]",t.skills=e.skills?"["+e.skills.toString()+"]":"[]",t.locations=e.locations?"["+e.locations.toString()+"]":"[]",$.ajax({url:this.serviceLocator.getUrl("massive-activity-assignments-reassignCases"),data:t,type:"POST",dataType:"json"})},searchUsers:function(e){return this.searchUsersWithSpecificEndpoint(e,"massive-activity-assignments-searchUsers")},searchUsersSharedQuery:function(e){return this.searchUsersWithSpecificEndpoint(e,"massive-activity-assignments-searchUsersForSharingQuery")},searchUsersOauth:function(e){return this.searchUsersWithSpecificEndpoint(e,"admin-getUserOauth")},searchUsersWithSpecificEndpoint:function(e,t){var i={};return i.userName=e.userName||"",i.fullName=e.fullName||"",i.domain=e.domain||"",i.queryFormId=e.queryFormId||"",$.read(this.serviceLocator.getUrl(t),i)},searchUsersByID:function(e){var t={ids:"["+e.toString()+"]"};return $.ajax({url:this.serviceLocator.getUrl("massive-activity-assignments-searchUsersById"),data:t,type:"POST",dataType:"json"})},getUsersList:function(e){return $.read(this.serviceLocator.getUrl("admin-getUsersList"),e)},getUsersForDefaultAssignation:function(e){return $.read(this.serviceLocator.getUrl("admin-getUsersForDefaultAssignation"),e)},getUsersForAssignation:function(e){return $.read(this.serviceLocator.getUrl("admin-getUsersForAssignation"),e)},searchUsersForPermissionsManager:function(e){return $.read(this.serviceLocator.getUrl("admin-searchUsersForPermissionsManager"),e)},getUsersForReassignCases:function(e){return $.read(this.serviceLocator.getUrl("admin-getUsersForReassignCases"),e)},getUsersForUsersAdministration:function(e){return $.read(this.serviceLocator.getUrl("admin-getUsersForUsersAdministration"),e)},getUsersForQueriesPermissionManager:function(e){return $.read(this.serviceLocator.getUrl("admin-getUsersForQueriesPermissionManager"),e)},getOAuth2Applications:function(e){return $.read(this.serviceLocator.getUrl("admin-getUsersForAssignation"),e)},getAdhocProcessesList:function(e){return $.ajax({url:this.serviceLocator.getUrl("admin-getAdhocProcessesList"),data:e,type:"POST",dataType:"json"})},createAdhocProcess:function(e){return $.ajax({url:this.serviceLocator.getUrl("admin-createAdhocProcess"),data:e,type:"POST",dataType:"json"})},createNewAdhocProcess:function(e){return $.create({url:this.serviceLocator.getUrl("admin-createNewAdhocProcess"),data:JSON.stringify(e),dataType:"json",contentType:"application/json"})},updateAdhocProcess:function(e){return $.ajax({url:this.serviceLocator.getUrl("admin-updateAdhocProcess"),data:e,type:"POST",dataType:"json"})},publishAdhocProcess:function(e){return $.ajax({url:this.serviceLocator.getUrl("admin-publishAdhocProcess"),data:e,type:"POST",dataType:"json"})},deleteAdhocProcess:function(e){var t=this.serviceLocator.getUrl("admin-deleteAdhocProcess");return $.ajax({url:t.replace("{processId}",e),type:"DELETE",dataType:"json"})},cloneAdhocProcess:function(e){return $.ajax({url:this.serviceLocator.getUrl("admin-cloneAdhocProcess"),data:e,type:"POST",dataType:"json"})},deleteAdhocTask:function(e){var t=this.serviceLocator.getUrl("admin-deleteAdhocTask");return $.ajax({url:t.replace("{processId}",e.idProcess).replace("{taskId}",e.idTask),type:"DELETE",dataType:"json"})},updateAdhocTask:function(e){var t=this.serviceLocator.getUrl("admin-updateAdhocTask");return $.ajax({url:t.replace("{processId}",e.idProcess),data:e.task,type:"POST",dataType:"json"})},getAdhocDataSchema:function(e){var t=this.serviceLocator.getUrl("admin-getAdhocDataSchema");return $.ajax({url:t.replace("{processId}",e),type:"GET",dataType:"json"})},getAdhocProcessDiagram:function(e){var t=this.serviceLocator.getUrl("admin-getAdhocProcessDiagram");return $.ajax({url:t.replace("{processId}",e),type:"GET",dataType:"json"})},getAdhocTask:function(e,t){var i=this.serviceLocator.getUrl("admin-getAdhocTask");return $.ajax({url:i.replace("{processId}",e).replace("{taskId}",t),type:"GET",dataType:"json"})},saveAdhocProcessDiagram:function(e,t){var i=this.serviceLocator.getUrl("admin-saveAdhocProcessDiagram");return $.ajax({url:i.replace("{processId}",e),data:t,type:"POST",dataType:"json"})},getAdhocEntitiesList:function(){var e=this.serviceLocator.getUrl("admin-adhoc-entities-list");return $.read(e,{})},getAdhocUserGroupList:function(){var e=this.serviceLocator.getUrl("admin-adhoc-user-group-list");return $.read(e,{})},loadUsersByGroup:function(e){var t=this.serviceLocator.getUrl("admin-adhoc-user-group-data-get");return $.ajax({url:t.replace("{groupId}",e),type:"GET",dataType:"json"})},loadAuthItemInfoByInstance:function(e){return $.ajax({url:this.serviceLocator.getUrl("admin-adhoc-authorization-data-get"),data:e,type:"POST",dataType:"json"})},saveAdhocAuthorizationInfo:function(e){return $.ajax({url:this.serviceLocator.getUrl("admin-adhoc-authorization-data-save").replace("{processId}",e.processId).replace("{isAdhocTask}",e.isAdhocTask),data:e.auth,type:"POST",dataType:"json"})},deleteAdhocGroup:function(e){var t=this.serviceLocator.getUrl("admin-adhoc-user-group-delete");return $.ajax({url:t.replace("{groupId}",e),type:"DELETE",dataType:"json"})},saveAdhocGroup:function(e){return $.ajax({url:this.serviceLocator.getUrl("admin-adhoc-user-group-save"),data:e,type:"POST",dataType:"json"})},addUserToGroup:function(e){var t=this.serviceLocator.getUrl("admin-adhoc-user-group-data-add");return $.ajax({url:t.replace("{groupId}",e.groupId).replace("{userId}",e.userId),type:"POST",dataType:"json"})},removeUserFromGroup:function(e,t){var i=this.serviceLocator.getUrl("admin-adhoc-user-group-data-remove");return $.ajax({url:i.replace("{groupId}",e).replace("{userId}",t),type:"DELETE",dataType:"json"})},getAdhocEntityInstances:function(e){var t=this.serviceLocator.getUrl("admin-adhoc-entity-instances");return $.ajax({url:t.replace("{entityId}",e),type:"GET",dataType:"json"})},getEntityValues:function(e,t){var i=this.serviceLocator.getUrl("admin-entity-values");return $.ajax({url:i.replace("{context}",e).replace("{entityId}",t),type:"GET",dataType:"json"})},saveAdhocEntity:function(e){return $.ajax({url:this.serviceLocator.getUrl("admin-saveAdhocEntity"),data:e,type:"POST",dataType:"json"})},saveAdhocEntityInstance:function(e){return $.ajax({url:this.serviceLocator.getUrl("admin-saveAdhocEntityInstance").replace("{entityId}",e.entityId).replace("{isNew}",e.isNew),data:e.instance,type:"POST",dataType:"json"})},getAllEntities:function(){return $.ajax({url:this.serviceLocator.getUrl("admin-getAllEntities"),type:"GET",dataType:"json"})},getAllCategories:function(){return $.ajax({url:this.serviceLocator.getUrl("admin-getAllCategories"),type:"GET",dataType:"json"})},getDomainList:function(){var e=this.serviceLocator.getUrl("domains");return $.read(e)},getEcmAllScheduledJobs:function(){var e={action:"getEcmAllScheduledJobs"};return $.read(this.serviceLocator.getUrl("async-ecm-upload-baseService"),e)},retryECMPendingScheduledJob:function(e){var t={action:"retryECMPendingScheduledJob"};return t.idJob=e,$.read(this.serviceLocator.getUrl("async-ecm-upload-baseService"),t)},getWorkPortalVersion:function(){return $.ajax({url:this.serviceLocator.getUrl("WorkPortalVersion"),type:"GET",dataType:"json"}).always((function(e){return""==(e=e||{}).version&&(e.version=bizagi.loader.productBuild||""),e}))},getAuthenticationLogData:function(e){var t="";return t="domains"==e.dataType?"admin-getAuthenticationDomains":"events"==e.dataType?"admin-getAuthenticationEventsTypes":"admin-getAuthenticationEventSubTypes",$.ajax({url:this.serviceLocator.getUrl(t),data:{},type:"GET",dataType:"json"})},getAuthenticationLogResult:function(e){var t={};return t.action=e.action,t.domain=e.domain,t.userName=e.userName,t.dtFrom=e.dtFrom,t.dtTo=e.dtTo,t.eventSubType=e.eventSubType,t.eventType=e.eventType,t.pag=e.pag,t.pagSize=e.pagSize,$.ajax({url:this.serviceLocator.getUrl("admin-getAuthenticationLog"),data:t,type:"GET",dataType:"json"}).pipe((function(e){for(var t=e.rows.length,i=0;i<t;i++){var r=e.rows[i][0],a=new Date(r),o=bizagi.util.dateFormatter.formatDate(a,bizagi.localization.getResource("dateFormat")+" "+bizagi.localization.getResource("timeFormat"));e.rows[i][0]="Invalid Date"==a?r:o}return e}))},encryptString:function(e){var t={};return e=e||{},t.entry=e.entry,$.ajax({url:this.serviceLocator.getUrl("admin-EncryptString"),data:t,type:"POST",dataType:"json"})},userPendingRequests:function(e){var t={pag:e.pag,pagSize:e.pagSize};return $.read(this.serviceLocator.getUrl("admin-UserPendingRequests"),t)},userAuthenticationInfo:function(e){return $.read(this.serviceLocator.getUrl("admin-UserAuthenticationInfo"),{idUser:e.idUser})},updateUserAuthenticationInfo:function(e){return $.create(this.serviceLocator.getUrl("admin-updateUserAuthenticationInfo"),{idUser:e.idUser,password:e.password,enabled:e.enabled,expired:e.expired,locked:e.locked})},generateRandomPassword:function(e){return(e=e||{}).action="generateRandomPassword",$.ajax({url:this.serviceLocator.getUrl("admin-generateRandomPassword"),data:e,type:"POST",dataType:"json"})},generateDataToSendByEmail:function(e){e=e||{};var t={action:"GenerateDataToSendByEmail"};return t.idUser=e.idUser,t.password=e.password,$.ajax({url:this.serviceLocator.getUrl("admin-GenerateDataToSendByEmail"),data:e,type:"POST",dataType:"json"})},sendEmail:function(e){e=e||{};var t={action:"sendEmail"};return t.emailTo=e.emailTo,t.subject=e.subject,t.body=e.body,$.ajax({url:this.serviceLocator.getUrl("admin-sendEmail"),data:e,type:"POST",dataType:"json"})},sendUserEmail:function(e){e=e||{};var t={action:"SendUserEmail"};return t.emailTo=e.emailTo,t.subject=e.subject,t.body=e.body,$.ajax({url:this.serviceLocator.getUrl("admin-sendUserEmail"),data:e,type:"POST",dataType:"json"})},getApplicationCategoriesList:function(e){var t={},i="";if(e.userId&&(t.userId=e.userId),"Applications"==e.action&&e.userId){i=this.serviceLocator.getUrl("admin-getCaseSecurityApplicationList");return $.read(i,t)}if("Applications"==e.action&&!e.userId)return i="admin-getApplicationList",$.ajax({url:this.serviceLocator.getUrl(i),data:t,type:"GET",dataType:"json"});if("getCategories"==e.action&&e.userId){i=this.serviceLocator.getUrl("admin-getCaseSecurityCategoriesList");return t.idApp=e.idApp,t.idCategory=e.idCategory,e.authorizationContext&&(t.authorizationContext=e.authorizationContext),""==t.idCategory&&(t.idCategory=-1),void 0!==e.filterStartEvent&&(t.filterStartEvent=e.filterStartEvent),$.read(i,t)}return"getCategories"!=e.action||e.userId?void 0:(i="admin-getCategoriesList",t.idApp=e.idApp,t.idCategory=e.idCategory,e.authorizationContext&&(t.authorizationContext=e.authorizationContext),""==t.idCategory&&(t.idCategory=-1),void 0!==e.filterStartEvent&&(t.filterStartEvent=e.filterStartEvent),$.ajax({url:this.serviceLocator.getUrl(i),data:t,type:"GET",dataType:"json"}))},getAdminCasesList:function(e){var t=e||{};return $.ajax({cache:!0,url:this.serviceLocator.getUrl("admin-getCasesList"),data:t,type:"GET",dataType:"json"})},cancelCase:function(e){var t=e||{};return $.ajax({cache:!0,url:this.serviceLocator.getUrl("case-handler-cancelCase"),data:t,type:"POST",dataType:"json"})},postAdminInvalidateCase:function(e){var t=e||{};return $.ajax({cache:!0,url:this.serviceLocator.getUrl("admin-invalidateCases"),data:t,type:"POST",dataType:"json"})},getResponseProcessRunningInvalidateCases:function(e){var t=e||{};return $.ajax({cache:!0,url:this.serviceLocator.getUrl("admin-getProcessRunningInvalidateCases"),data:t,type:"GET",dataType:"json"})},getApplicationProcesses:function(e){var t=this.serviceLocator.getUrl("admin-getApplicationProcesses"),i={};return i.idApp=e.idApp?e.idApp:-1,$.read(t,i)},getProcessVersion:function(e){var t=this.serviceLocator.getUrl("admin-getProcessVersion"),i={};return i.idWfClass=e.idWFClass,$.read(t,i)},getProcessTasks:function(e){var t=this.serviceLocator.getUrl("admin-getProcessTasks"),i={};return i.idWfClass=e.idWFClass,i.version=e.version?e.version:void 0,$.read(t,i)},getTaskAlarms:function(e){var t=this.serviceLocator.getUrl("admin-getTaskAlarms"),i={};return i.idTask=e.idTask,$.read(t,i)},getLapseMode:function(){var e=this.serviceLocator.getUrl("admin-getLapseMode");return $.read(e)},getRecurrMode:function(){var e=this.serviceLocator.getUrl("admin-getRecurrMode");return $.read(e)},getScheduleType:function(){var e=this.serviceLocator.getUrl("admin-getScheduleType");return $.read(e)},getBossList:function(e){var t=this.serviceLocator.getUrl("admin-getBossList");return $.read(t)},addAlarm:function(e){var t=this.serviceLocator.getUrl("admin-addAlarm"),i={};return i.idTask=e.idTask,i.idRecurrMode=e.idRecurrMode,i.idLapseMode=e.idLapseMode,i.scheduleType=e.scheduleType,i.alarmTime=e.alarmTime,i.alarmRecurrTime=e.alarmRecurrTime,i.sendToCurrentAssignee=e.sendToCurrentAssignee,$.update(t,i)},editAlarm:function(e){var t=this.serviceLocator.getUrl("admin-editAlarm"),i={};return i.idTask=e.idTask,i.idAlarm=e.idAlarm,i.idRecurrMode=e.idRecurrMode,i.idLapseMode=e.idLapseMode,i.scheduleType=e.scheduleType,i.alarmTime=e.alarmTime,i.alarmRecurrTime=e.alarmRecurrTime,i.sendToCurrentAssignee=e.sendToCurrentAssignee,$.update(t,i)},deleteAlarm:function(e){var t=this.serviceLocator.getUrl("admin-deleteAlarm");return e.idAlarm,$.destroy(t,e)},getAlarmRecipients:function(e){var t=this.serviceLocator.getUrl("admin-alarmRecipients"),i={};return i.idAlarm=e.idAlarm,$.read(t,i)},addRecipientToAlarm:function(e){var t=this.serviceLocator.getUrl("admin-recipientToAlarm"),i={};return i.idAlarm=e.idAlarm,i.idRecipient=e.idRecipient,$.update(t,i)},deleteRecipientsFromAlarm:function(e){var t=this.serviceLocator.getUrl("admin-deleteAlarmRecipients"),i={};return i.idRecipients=e.idRecipients,$.destroy(t,i)},enableAlarm:function(e){var t=this.serviceLocator.getUrl("admin-enableAlarm"),i={};return i.idTask=e.idTask,$.create(t,i)},abortReassignItems:function(e){var t=e||{},i="abort"==e.action?"admin-abortItems":"admin-reassignItems";return $.ajax({url:this.serviceLocator.getUrl(i),data:t,type:"POST",dataType:"json"})},reassignCurrent:function(e){var t=e||{};return $.ajax({url:this.serviceLocator.getUrl("admin-reassignCurrent"),data:t,type:"POST",dataType:"json"})},asyncActivitiesServices:function(e){var t=e,i="",r="GET";return"getActivities"==e.action?i=this.serviceLocator.getUrl("admin-async-activities-get-activities"):"retryNow"==e.action?(r="POST",i=(i=(i=(i=this.serviceLocator.getUrl("admin-async-activities-get-retry-now")).replace("{idCase}",e.idCase)).replace("{idworkItem}",e.idWorkitem)).replace("{idAsynchWorkitem}",e.idAsynchWorkitem)):"getActivitiesByTask"==e.action?i=this.serviceLocator.getUrl("admin-async-activities-get-activities-by-task"):"enableExecution"==e.action?(r="POST",i=this.serviceLocator.getUrl("admin-async-activities-enable-execution")):"enableMultiple"==e.action?(i=this.serviceLocator.getUrl("admin-async-activities-enable-multiple"),r="POST"):"asyncExecution"==e.action?i=this.serviceLocator.getUrl("admin-async-activities-async-execution"):"asyncExecutionLog"==e.action?i=(i=(i=(i=this.serviceLocator.getUrl("admin-async-activities-async-execution-log")).replace("{idCase}",e.idCase)).replace("{idworkItem}",e.idWorkItem)).replace("{idAsynchWorkitem}",e.idAsynchWorkitem):"getAsyncExecution"==e.action&&(i=this.serviceLocator.getUrl("admin-async-activities-async-get-current-execution-log")),$.ajax({url:i,data:t,type:r,dataType:"json"})},getAsynchronousRpaJobs:function(e){var t,i=e;return t=this.serviceLocator.getUrl("admin-async-activities-get-rpajobs"),$.ajax({url:t,data:i,type:"GET",dataType:"json"})},getRPAActivityLog:function(e){var t=e,i="";return i=(i=this.serviceLocator.getUrl("admin-async-activities-rpajob-execution-log")).replace("{idJob}",e.idJob),$.ajax({url:i,data:t,type:"GET",dataType:"json"})},enableMultipleRPAJobs:function(e){var t,i=e;return t=this.serviceLocator.getUrl("admin-async-activities-rpajob-enable-multiple"),$.ajax({url:t,data:i,type:"POST",dataType:"json"})},getAsynchronousRpaJobsByTask:function(e){var t,i=e;return t=this.serviceLocator.getUrl("admin-async-activities-rpajob-activities-by-task"),$.ajax({url:t,data:i,type:"GET",dataType:"json"})},enableRPAJobsByTaskAndProcess:function(e){var t,i=e;return t=this.serviceLocator.getUrl("admin-async-activities-rpajob-enable-execution"),$.ajax({url:t,data:i,type:"POST",dataType:"json"})},retryRPAJob:function(e){var t=e,i="";return i=(i=this.serviceLocator.getUrl("admin-async-activities-rpajob-retry-now")).replace("{idJob}",e.idJob),$.ajax({url:i,data:t,type:"POST",dataType:"json"})},getDefaultAssignationUserToAllProcess:function(e){return $.read(this.serviceLocator.getUrl("admin-getDefaultAssignationUserToAllProcess"),{serviceAction:"getDefaultAssignationUserToAllProcess"})},getDefaultAssignationUserToProcess:function(e){var t;return t=""==e.idWFClass?-1:e.idWfClass,$.read(this.serviceLocator.getUrl("admin-getDefaultAssignationUserToProcess"),{serviceAction:"getDefaultAssignationUserToProcess",process:t})},setDefaultAssignationUserToProcess:function(e){return""==e.idWFClass?process=-1:process=e.idWfClass,$.create(this.serviceLocator.getUrl("admin-setDefaultAssignationUserToProcess"),{serviceAction:"setDefaultAssignationUserToProcess",process:process,idUser:e.idUser})},transferCaseSecuritypermissions:function(e){return e.allProcess?$.create(this.serviceLocator.getUrl("admin-transferAllCaseSecuritypermissions"),{serviceAction:"transferAllCaseSecuritypermissions",idUserSource:e.idUserSource,idUserTarget:e.idUserTarget}):$.create(this.serviceLocator.getUrl("admin-transferCaseSecuritypermissions"),{serviceAction:"transferCaseSecuritypermissions",idUserSource:e.idUserSource,idUserTarget:e.idUserTarget,idProcess:e.idProcess})},revokeCaseSecuritypermissions:function(e){return e.allProcess?$.create(this.serviceLocator.getUrl("admin-revokeAllCaseSecuritypermissions"),{serviceAction:"revokeAllCaseSecuritypermissions",idUserSource:e.idUserSource}):$.create(this.serviceLocator.getUrl("admin-revokeCaseSecuritypermissions"),{serviceAction:"revokeCaseSecuritypermissions",idUserSource:e.idUserSource,idProcess:e.idProcess})},statusTransferCaseSecuritypermissions:function(e){return $.create(this.serviceLocator.getUrl("admin-statusTransferCaseSecuritypermissions"),{serviceAction:"statusTransferCaseSecuritypermissions"})},getProfilesTypes:function(e){return $.read(this.serviceLocator.getUrl("admin-getProfilesTypes"))},searchProfiles:function(e){var t=this.serviceLocator.getUrl("admin-searchProfiles"),i={};return i.type=e.profileType,i.name=e.profileName,i.orgId=e.orgId?e.orgId:null,$.read(t,i)},getUsersByProfile:function(e){var t=this.serviceLocator.getUrl("admin-getUsersByProfile"),i={};return i.type=e.profileType,i.id=e.idProfile,$.read(t,i)},removeUserFromProfile:function(e){var t=this.serviceLocator.getUrl("admin-removeUserFromProfile"),i={};return i.type=e.profileType,i.id=e.idProfile,i.idUser=e.idUser,$.destroy(t,i)},addUserToProfile:function(e){var t=this.serviceLocator.getUrl("admin-addUserToProfile"),i={};return i.type=e.profileType,i.id=e.idProfile,i.idUser=e.idUser,$.update(t,i)},licenses:function(){var e=this.serviceLocator.getUrl("admin-Licenses");return $.read(e)},getDimensions:function(){var e=this.serviceLocator.getUrl("admin-GetDimensions");return $.read(e)},editDimension:function(e){e=e||{};var t={};t.id=e.id,t.displayName=e.displayName,t.name=e.name,t.idWfClass=e.idWfClass,t.entityPath=e.entityPath,t.description=e.description;var i=this.serviceLocator.getUrl("admin-EditDimension");return $.create(i,t)},createAdministrableDimension:function(e){e=e||{};var t={};return t.displayName=e.displayName,t.name=e.name,t.idWfClass=e.idWfClass,t.entityPath=e.entityPath,t.Description=e.description,$.ajax({url:this.serviceLocator.getUrl("admin-CreateAdministrableDimension"),data:e,type:"PUT",dataType:"json"})},deleteDimension:function(e){var t=this.serviceLocator.getUrl("admin-DeleteDimension");e=e||{};var i={};return i.id=e.id,i.idDimension=e.id,i.administrable=e.administrable,$.destroy(t,i)},entityPathChildNodesAction:function(e){e=e||{};var t={};return t.pathNodeType=e.nodeType,t.idNode=e.idNode,t.nodeDisplayPath=e.nodeDisplayPath,t.nodePath=e.nodePath,t.idWfClass=e.idWfClass,$.ajax({url:this.serviceLocator.getUrl("admin-EntityPathChildNodesAction"),data:e,type:"GET",dataType:"json"})},getActiveWFClasses:function(e){var t=e||{};return $.ajax({cache:!0,url:this.serviceLocator.getUrl("admin-GetActiveWFClasses"),data:t,type:"GET",dataType:"json"})},storeDocumentTemplates:function(){var e=this.serviceLocator.getUrl("admin-document-templates-storeDocumentTemplates");return $.read(e)},restoreDocumentTemplates:function(e){var t=this.serviceLocator.getUrl("admin-document-templates-restoreDocumentTemplates");return t+="?Guid="+e.Guid,$.read(t)},getWorkFlowClasses:function(){var e=this.serviceLocator.getUrl("admin-processes-workflowClasses");return $.read(e)},getTaskByWorkFlow:function(e){var t=this.serviceLocator.getUrl("admin-processes-tasksByWorkflow"),i={};return i.idWorkflow=e.idWorkflow,$.read(t,i)},modifyProcessDuration:function(e){var t=this.serviceLocator.getUrl("admin-processes-modifyProcessDuration"),i={};return i.idWorkflow=e.idWorkflow,i.duration=e.duration,$.create(t,i)},modifyTaskDuration:function(e){var t=this.serviceLocator.getUrl("admin-processes-modifyTaskDuration"),i={};return i.idTask=e.idTask,i.duration=e.duration,$.create(t,i)},processesHierarchy:function(){var e={removeOnlineItems:"true"};return $.ajax({url:this.serviceLocator.getUrl("offline-getProcessTree"),data:e,dataType:"json",type:"GET"})},syncOfflineCases:function(e){return $.ajax({url:this.serviceLocator.getUrl("offline-sendForm"),data:{idCase:e.idCase,idWFClass:e.idWfClass,awCaseCreationContext:JSON.stringify(e.objToSend),idWorkflow:e.idWfClass},type:"POST",dataType:"json",serviceType:"LOAD"})},processesHierarchyTofetchForms:function(e){var t={};return t.idChangeSet=e.changeSet,$.ajax({url:this.serviceLocator.getUrl("offline-getForms"),data:t,dataType:"json"})},getDataForMyTeam:function(){return $.ajax({url:this.serviceLocator.getUrl("bam-resourcemonitor-myteam"),type:"GET",dataType:"json"})},getReporstAnalysisQuery:function(){return $.read(this.serviceLocator.getUrl("reports-analysisquery"))},updateReportData:function(e){return $.update(this.serviceLocator.getUrl("reports-analysisquery-update"),e)},deleteReportData:function(e){return $.destroy(this.serviceLocator.getUrl("reports-analysisquery-delete")+"?"+e)},getAdminEntitiesList:function(){var e=this.serviceLocator.getUrl("admin-entities-list");return $.read(e,{})},getAdminStakeholdersList:function(){var e=this.serviceLocator.getUrl("admin-stakeholders-list");return $.read(e,{})},getAdminEntitiesRowData:function(e){var t=this.serviceLocator.getUrl("admin-entities-row-data"),i={guidEntity:e.guidEntity,pag:e.pag||1,pagSize:e.pagSize||10};return void 0!==e.orderField&&(i.orderField=e.orderField),void 0!==e.orderType&&(i.orderType=e.orderType),void 0!==e.filters&&$.isArray(e.filters)&&e.filters.length>0&&(i.filters=JSON.stringify(e.filters)),$.read(t,i)},getUserStakeholders:function(e){var t=this.serviceLocator.getUrl("admin-user-stakeholders"),i={idUser:e.idUser};return $.read(t,i)},getAdminEntityData:function(e){var t=e.displayAttribFilter?e.displayAttribFilter:"",i=this.serviceLocator.getUrl("admin-entity-simpleData"),r={};return r.displayAttribFilter=t,r.idEntity=e.idEntity,r.idAttribute=e.idAttribute,$.read(i,r)},getAdminEntityMigrated:function(e){var t=this.serviceLocator.getUrl("admin-entities-migrated-entity"),i={};return i.guidEntity=e,$.read(t,i)},getAdminEntitiesForm:function(e){var t=this.serviceLocator.getUrl("admin-entities-get-form"),i={h_action:"LOADENTITYFORM",h_contexttype:"entity"};return i[this.Class.BA_CONTEXT_PARAMETER_PREFIX+"devicetype"]=this.deviceType,i[this.Class.BA_CONTEXT_PARAMETER_PREFIX+"devicecode"]=this.deviceCode,void 0!==e.guid&&(i.h_guidEntity=e.guid),void 0!==e.guidForm&&(i.h_guidForm=e.guidForm),void 0!==e.idRow&&(i.h_surrogateKey=e.idRow),void 0!==e.idPageCache&&(i.h_pageCacheId=e.idPageCache,i.h_isRefresh=!0),void 0!==e.isStakeholder&&e.isStakeholder&&(i.h_showAssociateUser=!0),e.prepare?i:$.ajax({url:t,data:i,type:"POST",dataType:"json"})},getEntityExcel:function(e){var t=this.serviceLocator.getUrl("admin-entities-get-excel").replace("{EntityGuid}",e).concat("?xsrf="+bizagi.getXSRFToken());bizagi.util.downloadFile(t)},getBizagiObjects:function(){var e=this.serviceLocator.getUrl("admin-language-bizagi-objects");return $.read(e,{})},getAdminEntitiesExistsLastReport:function(e){var t=this.serviceLocator.getUrl("admin-entities-exists-last-report").replace("{EntityGuid}",e);return $.read(t,{})},getAdminEntitiesDownloadLastReport:function(e){var t=this.serviceLocator.getUrl("admin-entities-download-last-report").replace("{EntityGuid}",e).concat("?xsrf="+bizagi.getXSRFToken());bizagi.util.downloadFile(t)}},_defineProperty(_$$Class$extend,"getEntitiesList",(function(){var e=this.serviceLocator.getUrl("admin-language-entities");return $.read(e,{})})),_defineProperty(_$$Class$extend,"getAdminEntityState",(function(e){var t=this.serviceLocator.getUrl("admin-entities-upload-file-state").replace("{EntityGuid}",e);return $.read(t,{})})),_defineProperty(_$$Class$extend,"getStoreLanguageTemplates",(function(){var e=this.serviceLocator.getUrl("admin-language-languages");return $.read(e,{})})),_defineProperty(_$$Class$extend,"setLanguages",(function(e){var t=this.serviceLocator.getUrl("admin-language-languages"),i=e;return $.ajax({url:t,data:{languages:i},type:"POST",dataType:"json"})})),_defineProperty(_$$Class$extend,"resetPersonalization",(function(){return $.ajax({url:this.serviceLocator.getUrl("admin-language-reset"),data:{},type:"DELETE",dataType:"json"})})),_defineProperty(_$$Class$extend,"getLanguageTemplate",(function(e){var t,i="";e.elements?(t="admin-language-resource-download",i="&elements="+e.elements):e.entities?(t="admin-language-entities-download",i="&entities="+e.entities):t="admin-language-resource-download";var r="tablet_android"===this.device?"_system":"_self",a=encodeURI(this.serviceLocator.getUrl(t)+"?cultureName="+e.cultureName+i+"&xsrf="+bizagi.getXSRFToken());window.open(a,r,"location=yes")})),_defineProperty(_$$Class$extend,"getHolidaysSchemas",(function(e){return $.read(this.serviceLocator.getUrl("admin-holidays-schemas"),e)})),_defineProperty(_$$Class$extend,"getHolidaysBySchema",(function(e){return $.read(this.serviceLocator.getUrl("admin-holidays-schema"),e).pipe((function(e){e=e||{};return $.each(e,(function(t,i){e[t].date=(i.date||"").split("T")[0]+"T00:00:00"})),e}))})),_defineProperty(_$$Class$extend,"saveHolidaysBySchema",(function(e){var t=this.serviceLocator.getUrl("admin-holidays-schema").replace("{schema}",e.schema);$.ajax({method:"POST",url:t,data:e.data,contentType:"application/json"})})),_defineProperty(_$$Class$extend,"getProjectName",(function(){var e=this.serviceLocator.getUrl("admin-projectname");return $.read(e)})),_defineProperty(_$$Class$extend,"setProjectName",(function(e){var t=this.serviceLocator.getUrl("admin-projectname"),i={projectName:e};return $.create(t,i)})),_defineProperty(_$$Class$extend,"downloadReportUser",(function(e){var t=this,i=t.serviceLocator.getUrl("user-gdpr-downloadReportUser");bizagi.showErrorAlertDialog=!1,$.when(t.getDownloadReport(e,i)).done((function(t){0===$("#iframe-download").length?$("<iframe/>").attr({src:i.replace("{idUser}",e),style:"visibility:hidden;display:none",id:"iframe-download"}).appendTo("body"):$("#iframe-download").attr("src",i.replace("{idUser}",e))})).fail((function(e,i,r){var a=JSON.parse(e.responseText);t.notifier=bizagi.injector.get("notifier"),t.notifier.showErrorMessage(a.message)}))})),_defineProperty(_$$Class$extend,"getDownloadReport",(function(e,t){var i={idUser:e};return $.read(t,i)})),_defineProperty(_$$Class$extend,"anonymizeUser",(function(e){var t=this.serviceLocator.getUrl("user-gdpr-anonymizeUser"),i={idUser:e};return $.destroy(t,i)})),_defineProperty(_$$Class$extend,"getAuditLicense",(function(e){var t=$.Deferred(),i=this.serviceLocator.getUrl("admin-audit-license")+"?xsrf="+bizagi.getXSRFToken();return t.resolve("OK"),document.location=i,t.promise()})),_defineProperty(_$$Class$extend,"processDefinition",(function(e){return $.read(this.serviceLocator.getUrl("processviewer-processdefinition"),e)})),_defineProperty(_$$Class$extend,"graphicInfo",(function(e){return $.read(this.serviceLocator.getUrl("processviewer-processgraphicinfo"),e)})),_defineProperty(_$$Class$extend,"getQueryFormResponse",(function(e){return $.create(this.serviceLocator.getUrl("query-handler-getQueryFormResponse"),e)})),_defineProperty(_$$Class$extend,"exportToExcelProfiles",(function(e){var t=encodeURI(this.serviceLocator.getUrl("admin-getUsersByProfile-report").replace("{filterType}",e.filterType).replace("{guidValueFilter}",e.guidValueFilter)+"?orgId="+e.orgId+"&xsrf="+bizagi.getXSRFToken());window.location.assign(t)})),_defineProperty(_$$Class$extend,"getQueryFormExportExcel",(function(e){var t=$.Deferred(),i="",r="_self";bizagi.util.isIE()&&(r="iframeExcel");var a=$("<form>",{action:this.serviceLocator.getUrl("query-handler-getQueryFormExportExcel")+"?xsrf="+bizagi.getXSRFToken(),target:r,id:"formExportExcel",method:"POST",style:"display:none"});$(a).attr("enctype","application/x-www-form-urlencoded"),$(a).attr("accept-charset","UTF-8");var o=$("<iframe>",{name:"iframeExcel",id:"iframeExcel",style:"display:none"});return $.each(e,(function(e,t){i=$("<input>",{name:e,value:t,type:"hidden"}),$(a).append(i)})),$("body").append(a),$("body").append(o),a.submit().remove(),o.submit().remove(),t.resolve("OK"),t.promise()})),_defineProperty(_$$Class$extend,"getUserPermissionsExcel",(function(e){var t=!0===e?"admin-user-permissions-excel-enabled":"admin-user-permissions-excel-disabled",i=this.serviceLocator.getUrl(t).concat("?xsrf="+bizagi.getXSRFToken());bizagi.util.downloadFile(i)})),_defineProperty(_$$Class$extend,"getQueryForm",(function(e){return e=e||{},$.ajax({url:this.serviceLocator.getUrl("query-handler-getQueryForm"),data:e,type:"POST",dataType:e.dataType||"json"})})),_defineProperty(_$$Class$extend,"getPreferencesForm",(function(e){return e[this.Class.BA_CONTEXT_PARAMETER_PREFIX+"devicetype"]=this.deviceType,e[this.Class.BA_CONTEXT_PARAMETER_PREFIX+"devicecode"]=this.deviceCode,$.ajax({url:this.serviceLocator.getUrl("preferences-handler-getPreferencesForm"),data:e,type:"POST",dataType:"json"})})),_defineProperty(_$$Class$extend,"saveStoredQueryForm",(function(e){return $.ajax({url:this.serviceLocator.getUrl("query-handler-storedQueryForm"),data:e,type:"POST",dataType:"json"})})),_defineProperty(_$$Class$extend,"updateStoredQueryForm",(function(e){return $.ajax({url:this.serviceLocator.getUrl("query-handler-storedQueryForm"),data:e,type:"PUT",dataType:"json"})})),_defineProperty(_$$Class$extend,"deleteStoredQueryForm",(function(e){var t=this.serviceLocator.getUrl("query-handler-storedQueryForm-id");return $.destroy(t,e)})),_defineProperty(_$$Class$extend,"getStoredQueryFormList",(function(e){return $.ajax({url:this.serviceLocator.getUrl("query-handler-storedQueryForm"),data:e,type:"GET",dataType:"json"})})),_defineProperty(_$$Class$extend,"getStoredQueryFormResponse",(function(e){var t=this.serviceLocator.getUrl("query-handler-storedQueryForm-id"),i={};return i.idStoredQueryForm=e,$.read(t,i)})),_defineProperty(_$$Class$extend,"getGraphicQueryInfo",(function(e){return $.read("Rest/Cases/WorkitemsGuid",e)})),_defineProperty(_$$Class$extend,"getCasePath",(function(e){return $.read("Rest/Cases/TransitionLog",e)})),_defineProperty(_$$Class$extend,"getUsersForm",(function(e){return $.create(this.serviceLocator.getUrl("admin-usersform"),e)})),_defineProperty(_$$Class$extend,"getLastUpdateByMobile",(function(){return $.read({url:this.serviceLocator.getUrl("mobile-getLastUpdate")})})),_defineProperty(_$$Class$extend,"getUsersAdministrationLog",(function(e){return $.read({url:this.serviceLocator.getUrl("admin-userslog"),data:e})})),_defineProperty(_$$Class$extend,"queryUsersLicenses",(function(){return $.read({url:this.serviceLocator.getUrl("admin-userslicenses")})})),_defineProperty(_$$Class$extend,"createUserAdministrationForm",(function(){return $.get(this.serviceLocator.getUrl("admin-createuserform"))})),_defineProperty(_$$Class$extend,"getPreferenceFormParams",(function(){return $.read(this.serviceLocator.getUrl("admin-userpreferenceform-isnew"))})),_defineProperty(_$$Class$extend,"getUserPositions",(function(){return $.read(this.serviceLocator.getUrl("admin-userGetPositions"))})),_defineProperty(_$$Class$extend,"getAssignationQueues",(function(){return $.read(this.serviceLocator.getUrl("admin-assignation-queues"))})),_defineProperty(_$$Class$extend,"getSegmentationQueues",(function(){return $.read(this.serviceLocator.getUrl("admin-assignation-queues-segmentation"))})),_defineProperty(_$$Class$extend,"getQueueSuscribers",(function(e){return $.read(this.serviceLocator.getUrl("admin-assignation-queues-suscribers"))})),_defineProperty(_$$Class$extend,"unsuscribeQueueUser",(function(e){return $.destroy(this.serviceLocator.getUrl("admin-assignation-queues-unsuscribe"),{userId:e,segmentation:"x"})})),_defineProperty(_$$Class$extend,"getUserInfoByTask",(function(e,t){var i={idCase:e,guidTask:t};return $.read(this.serviceLocator.getUrl("graphicquery-trailusers"),i)})),_defineProperty(_$$Class$extend,"getSearchLists",(function(){return $.read(this.serviceLocator.getUrl("my-search-getSearchLists"),{})})),_defineProperty(_$$Class$extend,"defineFilterObject",(function(e,t,i){var r=this,a=e.properties,o=a.xpath.split("@")[0],s=t.find((function(e){return e.xpath==o}));if(s){if("from"==a.rangeQuery)s.value=s.value||{},s.searchType="range",s.value.min=e.value;else if("to"==a.rangeQuery)s.value=s.value||{},s.searchType="range",s.value.max=e.value;else{e.properties.typeSearch=s.searchType;var n=d(e);$.extend(s,n)}a.orderType&&(s.orderType=a.orderType),i&&i(bizagi.clone(s))}else{var c=a.defaultFilter||!1;s=d(e),a.orderType&&(s.orderType=a.orderType),"range"===s.searchType&&void 0===s.value&&(s.searchType="none"),(void 0!==s.value&&null!=s.value||s.orderType||c)&&(t.push(s),i&&i(bizagi.clone(s)))}function d(e){var t=e.properties,i=t.typeSearch,a=e.value;if("boolean"==t.type&&(void 0===a||"null"==typeof a?(a=null,i="Nullable"):(a=bizagi.util.parseBoolean(a),i="exact")),"number"!=t.type&&"money"!=t.type&&"date"!=t.type||(i="exact"),"object"==_typeof(e.value)&&null!=e.value){if(a=[],Array.isArray(e.value))for(var s=0,n=e.value.length;s<n;s++){var c=e.value[s].id;a.push(c)}else{c=e.value.id;a.push(c)}i="exact",a=a.length>0?a:void 0}a=r.setValueIfRangeQuery(t,e)||a,i=r.setSearchTypeIfRangeQuery(t)||i;var d={xpath:o,searchType:i=i||"approx"};return"hidden"===t.type&&(d.isHidden=!0),r._hasCorrectValue(a)&&(d.value=a),d}})),_defineProperty(_$$Class$extend,"_hasCorrectValue",(function(e){var t=function(e){return-1!==[null,""].indexOf(e)};return bizagi.util.tryCatch((function(){return void 0!==e&&!(t(e.max)&&t(e.min))}),!0)})),_defineProperty(_$$Class$extend,"setValueIfRangeQuery",(function(e,t){var i;return this.isRangeQuery(e)&&("from"===e.rangeQuery?i={min:t.value,max:""}:"to"===e.rangeQuery&&(i={min:"",max:t.value})),i})),_defineProperty(_$$Class$extend,"setSearchTypeIfRangeQuery",(function(e){if(this.isRangeQuery(e))return"range"})),_defineProperty(_$$Class$extend,"isRangeQuery",(function(e){if(e.rangeQuery&&"none"!==e.rangeQuery)return!0})),_defineProperty(_$$Class$extend,"serializeEntityData",(function(e){var t=e;function i(e,t){var i={data:{},guid:t.guidEntity,timestamp:e.timestamp},r=e.columns,a=t.row;for(name in t)t.hasOwnProperty(name)&&"row"!==name.toString()&&"id"!==name.toString()&&(i[name]=t[name]);for(var o=0,s=r.length;o<s;o+=1)i.data[r[o]]=a[o];return i}t.entities=[];for(var r,a=-1;r=e.rows[++a];)for(var o,s=-1;o=e.cells[++s];)if(o.id===r.id){var n=i(o,r);t.entities.push(n);break}return t})),_defineProperty(_$$Class$extend,"getOAuth2Applications",(function(){return $.ajax({url:this.serviceLocator.getUrl("oauth2-getApplications"),type:"GET",dataType:"json"})})),_defineProperty(_$$Class$extend,"getOAuth2Application",(function(e){var t=this.serviceLocator.getUrl("oauth2-getApplication");return $.ajax({url:t.replace("{applicationId}",e),type:"GET",dataType:"json"})})),_defineProperty(_$$Class$extend,"createOAuth2Application",(function(e){return $.ajax({url:this.serviceLocator.getUrl("oauth2-createApplication"),type:"POST",dataType:"json",data:e})})),_defineProperty(_$$Class$extend,"deleteOAuth2Application",(function(e){var t=this.serviceLocator.getUrl("oauth2-deleteApplication");return $.ajax({url:t.replace("{applicationId}",e),type:"DELETE",dataType:"json"})})),_defineProperty(_$$Class$extend,"updateOAuth2Application",(function(e,t){var i=this.serviceLocator.getUrl("oauth2-updateApplication");return $.ajax({url:i.replace("{applicationId}",t),data:e,type:"PUT",dataType:"json"})})),_defineProperty(_$$Class$extend,"updateClientSecretKeysOAuth2Application",(function(e,t){var i=this.serviceLocator.getUrl("oauth2-updateClientSecretKeysApplication");return $.ajax({url:i.replace("{applicationId}",t),data:e,type:"PUT",dataType:"json"})})),_defineProperty(_$$Class$extend,"queryDelegations",(function(e){var t=this.serviceLocator.getUrl("userDelegation")+"/"+e.idUser+"/delegates";return $.ajax({url:t,data:e,type:"GET",dataType:"json"})})),_defineProperty(_$$Class$extend,"saveDelegation",(function(e){var t=this.serviceLocator.getUrl("userDelegation")+"/MultipleProcess";return $.ajax({url:t,data:e,type:"POST",dataType:"json",global:!1})})),_defineProperty(_$$Class$extend,"updateDelegation",(function(e){var t=this.serviceLocator.getUrl("userDelegation")+"/"+e.idDelegation;return $.ajax({url:t,data:e,type:"PUT",dataType:"json",global:!1})})),_defineProperty(_$$Class$extend,"deleteDelegation",(function(e){var t=this.serviceLocator.getUrl("userDelegation")+"/"+e.idDelegation;return $.ajax({url:t,data:e,type:"DELETE",dataType:"json"})})),_defineProperty(_$$Class$extend,"getUserFilterOptions",(function(e){var t=this.serviceLocator.getUrl("userFilterOptions");return $.ajax({url:t,data:e,type:"GET",dataType:"json"})})),_defineProperty(_$$Class$extend,"getValuesFromCQL",(function(e){var t=this.serviceLocator.getUrl("catalogQL");return $.ajax({url:t,data:JSON.stringify(e),processData:!1,type:"POST",contentType:"application/json"})})),_defineProperty(_$$Class$extend,"getPreferencesCurrentUser",(function(){var e=this.serviceLocator.getUrl("currentUser");return $.ajax({url:e,type:"GET"})})),_defineProperty(_$$Class$extend,"getPreferencesWorkportalCurrentUser",(function(){return $.read(this.serviceLocator.getUrl("PreferencesWorkportalCurrentUser"))})),_defineProperty(_$$Class$extend,"setPreferencesWorkportalCurrentUser",(function(e){return $.ajax({url:this.serviceLocator.getUrl("PreferencesWorkportalCurrentUser"),type:"PUT",data:JSON.stringify(e),dataType:"json",contentType:"application/json"})})),_defineProperty(_$$Class$extend,"getUsersForDelegation",(function(e){var t=this.serviceLocator.getUrl("userFilterOptions")+"/SearchUser";return $.ajax({url:t,data:e,type:"GET",dataType:"json"})})),_defineProperty(_$$Class$extend,"getProcessToDelegate",(function(e){var t=this.serviceLocator.getUrl("userFilterOptions")+"/"+e.idUser+"/process";return $.ajax({url:t,data:e,type:"GET",dataType:"json"})})),_defineProperty(_$$Class$extend,"executeQuickAction",(function(e){var t=new $.Deferred,i={h_action:"LOADFORM",h_devicetype:0,h_devicecod:"1366x768",h_idCase:e.caseId,h_idWorkitem:e.workItemId,h_idTask:e.taskId,h_secondaction:"multiaction",h_secondactions:JSON.stringify(e.actions)};return $.ajax({url:this.serviceLocator.getUrl("execute-quickaction"),data:i,type:"POST",dataType:"json",serviceType:"MULTIACTION"}).done((function(e){"{}"===JSON.stringify(e)?t.resolve([]):t.resolve(e)})).fail((function(e){var i,r=e.responseText||e;try{i=JSON.parse(r)}catch(e){}t.reject(e,"servererror",i)})),t.promise()})),_defineProperty(_$$Class$extend,"getErrorLogs",(function(e){var t=this.serviceLocator.getUrl("admin-error-logs-getErrorLogs");return $.read(t,e)})),_defineProperty(_$$Class$extend,"getErrorLogsContents",(function(e){var t=this.serviceLocator.getUrl("admin-error-logs-getErrorLogsContents"),i=new $.Deferred;return $.ajax({contentType:"application/json",data:JSON.stringify(e),type:"POST",url:t}).done((function(e){i.resolve(e)})),i.promise()})),_defineProperty(_$$Class$extend,"getErrorLogsArchive",(function(e){var t=this.serviceLocator.getUrl("admin-error-logs-getErrorLogsArchive"),i=new $.Deferred;return $.ajax({contentType:"application/json",data:JSON.stringify(e),type:"POST",url:t}).done((function(e){i.resolve(e)})),i.promise()})),_$$Class$extend)),$.Class.extend("bizagi.workportal.services.multiactionservice",{BA_CONTEXT_PARAMETER_PREFIX:"h_"},{init:function(e){this.service=e,this.batch={},this.batchTimer=50,this.replicateServiceMethods()},getService:function(){return this.service},replicateServiceMethods:function replicateServiceMethods(){var self=this;self.getAdminEntitiesForm=eval("var tmp = function(){ return this.proxyMethod(this.getService().getAdminEntitiesForm, arguments);};tmp")},proxyMethod:function(e,t){var i=this.service;if(!t||1!=t.length)return e.apply(i,t);if("object"!=_typeof(t[0]))return e.apply(i,t);var r=t[0];if(1==r.prepare)return e.apply(i,t);r.prepare=!0;var a=e.apply(i,t);return this.add(a)},add:function(e){var t=this,i=new $.Deferred;e.h_action;clearTimeout(t.batchTimeout);var r=e.tag=Math.guid(),a={action:e,deferred:i};return t.batch[r]=a,t.batchTimeout=setTimeout((function(){t.fire()}),t.batchTimer),i.promise()},fire:function(){var e={},t=[];$.each(this.batch,(function(i,r){t.push(r.action),e[i]=r})),this.batch={},$.when(this.execute({actions:t,rejectDeferreds:!1})).done((function(t){$.each(t,(function(t,i){var r=i.tag;i.error?e[r].deferred.reject(i.error,i,i.error.message):e[r].deferred.resolve(i.result),delete e[r]})),$.each(e,(function(e,t){t.deferred.reject({type:"not-processed",message:"Operation didn't executed"},"","Operation didn't executed")}))})).fail((function(t,i,r){var a=void 0!==r?r.message:r||"Operation didn't executed";$.each(e,(function(e,t){t.deferred.reject({type:"not-processed",message:a},"","Operation didn't executed")}))}))},execute:function(e){var t=this,r={},a=void 0===e.rejectDeferreds||e.rejectDeferreds;r[t.Class.BA_CONTEXT_PARAMETER_PREFIX+"action"]="multiaction",$.each(e.actions,(function(e,i){i[t.Class.BA_CONTEXT_PARAMETER_PREFIX+"tag"]=i.tag||e,delete i.tag})),(e=e||{}).actions&&(r[t.Class.BA_CONTEXT_PARAMETER_PREFIX+"actions"]=JSON.encode(e.actions));var o=new $.Deferred;return $.ajax({url:t.getService().serviceLocator.getUrl("render-multiaction"),data:r,type:"POST",dataType:"json",serviceType:"MULTIACTION"}).done((function(e){for(i in e)if("function"!=typeof e[i]){var t=e[i];if(t.error&&a)return void o.reject(this,"servererror",t)}o.resolve(e)})).fail((function(e){var t,i=e.responseText||e;try{t=JSON.parse(i)}catch(e){}o.reject(e,"servererror",t)})),o.promise()}}),$.Class.extend("bizagi.workportal.services.routing",{},{init:function(e){e=e||{},this.params=e.params||{},this.dataService=e.dataService||{},this.modules={projectDashboard:bizagi.util.isMobileDevice()?"activityform":"projectDashboard",oldRender:"oldrenderintegration",async:"async",activitySelector:"routing"},this.renderVersion=2,this.resetRouteInformation()},resetRouteInformation:function(){this.route={module:"",moduleParams:{}}},setRenderParams:function(e){this.params=this.getRenderParams(e)},getRenderParams:function(e){var t,i=(t={idCase:parseInt(e.idCase||0),guid:e.guid,idWorkflow:parseInt(e.idWorkflow||0),idWorkitem:1==e.isOfflineForm?0:parseInt(e.idWorkItem||0),idTask:parseInt(e.idTask||0),eventAsTasks:e.eventAsTasks||!1,onlyUserWorkItems:e.onlyUserWorkItems||"true",formsRenderVersion:e.formsRenderVersion||0,referrer:e.referrer||"",isComplex:void 0!==e.isComplex},_defineProperty(t,"formsRenderVersion",2),_defineProperty(t,"onClose",e.onClose||""),_defineProperty(t,"isOfflineForm",e.isOfflineForm||!1),_defineProperty(t,"caseLink",e.caseLink),t);void 0!==i.guid&&0==i.idCase&&delete i.idCase;var r=!0;try{r=BIZAGI_SETTINGS.skipSubprocessGlobalForm||!0}catch(e){}return this.skipSubprocessGlobalForm="true"==r,i},getRoute:function(e){var t=this,i=new $.Deferred;if(t.params=e||t.params,e.data&&e.data.hasStartForm)i.resolve({module:bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_START_FORM,moduleParams:{widgetName:bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_START_FORM,data:e.data}});else{var r=e.fromTask||e.idTask||"",a=e.fromWorkItemId||e.idWorkItem||"";$.when(t.getRenderVersion(t.params)).done((function(e){t.renderVersion=e,t.route.moduleParams=t.getRenderParams(t.params);var o={};o=void 0!==t.params.guid?{guid:t.params.guid,onlyUserWorkItems:t.params.onlyUserWorkItems,isOfflineForm:t.params.isOfflineForm,fromTask:r,fromWorkItemId:a}:{idCase:t.params.idCase,onlyUserWorkItems:t.params.onlyUserWorkItems,isOfflineForm:t.params.isOfflineForm,fromTask:r,fromWorkItemId:a},$.when(t.dataService.getWorkitems(o)).done((function(r){if(t.route.moduleParams.workItemsRestResponse=r.workItems,t.route.moduleParams.hasWorkItems=!!r.workItems.length,t.route.moduleParams.hasGlobalForm=bizagi.util.parseBoolean(r.hasGlobalForm),t.route.moduleParams.idWorkitem>0)t.setRenderModuleName(t.getRenderModuleName(e)),0==t.route.moduleParams.idTask&&(t.route.moduleParams.idTask=t.searchIdTask(t.route.moduleParams.idWorkitem)),t.route.moduleParams.radNumber=r.radNumber||"",t.route.moduleParams.idWorkflow=r.idWorkFlow||"",i.resolve(t.route),t.resetRouteInformation();else{var a=t.checkAsyncWorkItems(r);if(0==r.workItems.length)t.route.moduleParams.idWorkflow=r.idWorkFlow||"",t.route.moduleParams.radNumber=r.radNumber||"",""!==$.trim(r.msgTask)?i.resolve(t.routeToMessageForm(r.msgTask)):bizagi.util.parseBoolean(r.hasGlobalForm)?i.resolve(t.routeToGlobalForm(r)):i.resolve(t.routeToGlobalFormWithoutData());else if(1==r.workItems.length||a.length>0){var o=0;if(a.length>0)for(var s=0;s<r.workItems.length;s++)if("true"==r.workItems[s].isAsynch){o=s;break}_typeof("undefined"!=t.route.moduleParams.guid)&&void 0!==r.workItems[o].guid?t.route.moduleParams.guid=r.workItems[o].guid:_typeof("undefined"!=t.route.moduleParams.idCase)&&(t.route.moduleParams.idCase=r.workItems[o].idCase),t.route.moduleParams.idTask=r.workItems[o].idTask,t.route.moduleParams.fromTask=r.workItems[o].idTask,t.route.moduleParams.idWorkitem=r.workItems[o].idWorkItem,t.route.moduleParams.idWorkflow=r.workItems[o].idWorkFlow,t.route.moduleParams.displayName=r.workItems[o].displayName?r.workItems[o].displayName:"",t.route.moduleParams.radNumber=r.radNumber||"",a.length>0?t.setRenderModuleName(t.modules.async):t.setRenderModuleName(t.getRenderModuleName(e)),i.resolve(t.route),t.resetRouteInformation()}else r.checkProcess=!!(r.subProcesses.length>0&&t.skipSubprocessGlobalForm),r.checkWorkItems=r.workItems.length>1,r.fromSearchWidget="search"==t.params.referrer,t.setRenderModuleName(t.modules.activitySelector),t.route.moduleParams.data=r,i.resolve(t.route),t.resetRouteInformation()}})).fail(t._onFailGetWorkItems.bind(t,i))}))}return i.promise()},goToInbox:function(){(new bizagi.workportal.controllers.menu).goToInbox()},goBack:function(){bizagi.injector.get("bizagi.workportal.widgets.navigator",{}).goToBack()},_onFailGetWorkItems:function(e,t){var i,r,a,o=this,s=403===t.status;s&&(i=bizagi.localization.getResource("workportal-general-error-page-title"),r=bizagi.localization.getResource("workportal-general-case-permission-denied"),bizagi.showMessageBox(r,i,"",!1).always((function(){void 0!==bizagi.referrerParams?o.goBack():o.goToInbox()}))),s?e.reject(t):e.resolve((a=bizagi.localization.getResource("workportal-menu-search-found-no-cases"),o.routeToMessageForm(a)))},setRenderModuleName:function(e){this.route.module=e,this.route.moduleParams.widgetName=e},getRenderModuleName:function(e){return 1==e?this.modules.oldRender:this.modules.projectDashboard},searchIdTask:function(e,t){var i=0;e=e||[];for(var r=0;r<e.length;r++)if(parseInt(e[r].idWorkItem)==parseInt(t)){i=parseInt(e[r].idTask);break}return i},checkAsyncWorkItems:function(e){var t=[];return $.each(e.workItems,(function(i){"true"==e.workItems[i].isAsynch&&t.push({idCase:e.idCase,idWorkitem:e.workItems[i].idWorkItem,idTask:e.workItems[i].idTask})})),t},routeToGlobalForm:function(e){if(this.route.moduleParams.idCaseForGraphicQuery=this.route.moduleParams.idCase,this.route.moduleParams.idCase=$.isNumeric(e.idCaseForGlobalForm)&&e.idCaseForGlobalForm>0?e.idCaseForGlobalForm:this.route.moduleParams.idCase,this.route.moduleParams.idWorkflow=parseInt(e.idWorkFlow||0),1==this.renderVersion){var t=this.dataService.serviceLocator.getUrl("old-render")+"?PostBack=1&idCase=%s&idWorkitem=%s&idTask=%s",i=this.route.moduleParams.idCase||"",r=this.route.moduleParams.idWorkitem||"",a=this.route.moduleParams.idTask||"",o=printf(t,i,r,a);this.route.moduleParams.onlyUserWorkItems=this.route.moduleParams.idCase||"",this.setRenderModuleName(this.modules.oldRender),this.route.moduleParams.url=o}else this.setRenderModuleName(this.modules.projectDashboard);return this.route},routeToGlobalFormWithoutData:function(){return this.setRenderModuleName(this.modules.projectDashboard),this.route.moduleParams.withOutGlobalForm=!0,this.route},routeToMessageForm:function(e){return e=e||"",this.setRenderModuleName(this.modules.projectDashboard),this.route.moduleParams.withOutGlobalForm=!0,this.route.moduleParams.messageForm=e,this.route},getRenderVersion:function(e){var t=new $.Deferred,i=e.formsRenderVersion||0;return 0!=i?t.resolve(i):$.when(this.dataService.getCaseFormsRenderVersion({idCase:e.idCase,guid:e.guid})).done((function(e){i=parseInt(e.formsRenderVersion),t.resolve(i)})),t.promise()}}),$.Class("bizagi.workportal.command.security",{},{init:function(e){this.dataService=e,this.rawData={}},getSecurity:function(){var e=this,t=new $.Deferred;return e.security={},e.jsonSecurityList={},bizagi.menuSecurity?t.resolve(bizagi.menuSecurity):$.when(e.dataService.getMenuAuthorization()).done((function(i){bizagi.currentUser.associatedStakeholders&&bizagi.currentUser.associatedStakeholders.length>0&&i.permissions.push({associatedStakeholders:[]}),e.rawData=i,bizagi.menuSecurity=e.convertSecurityData(i),e.jsonSecurityList=i,$.each(e.security,(function(e,t){authMenu[e]=t})),t.resolve(bizagi.menuSecurity)})).fail((function(){t.reject()})),t.promise()},convertSecurityData:function(e){var t={};return function e(i){$.each(i,(function(i,r){"object"==_typeof(r)?("number"!=typeof i&&(t[i]=!0),e(r)):t[r]=!0}))}(e.permissions),t},checkSecurityPerm:function(e){e=e||"";var t=$.Deferred();return bizagi.menuSecurity?t.resolve(!!bizagi.menuSecurity[e]):this.getSecurity().done((function(i){t.resolve(!!i[e])})).fail((function(){t.resolve(!1)})),t.promise()},getRawData:function(){return this.rawData}}),$.Class.extend("bizagi.workportal.controllers.controller",{},{init:function(e,t){this.workportalFacade=e,this.dataService=t,this.resources=bizagi.localization,this.componentContainers={},this.subscribers=[],this.disposed=!1,this.tmpl={},this.templatesDeferred=null},getWorkportal:function(){return this.workportalFacade.workportal},publish:function(e,t){return this.disposed?null:$(document).triggerHandler(e,t)},subscribe:function(e,t){if(this.disposed)return null;$(document).bind(e,t),this.subscribers.push({event:e})},subscribeOneTime:function(e,t){if(this.disposed)return null;$(document).one(e,t),this.subscribers.push({event:e})},unsubscribe:function(e,t){if(this.disposed)return null;t?$(document).unbind(e,t):$(document).unbind(e)},render:function(){var e=this,t=new $.Deferred;return e.renderingDeferred=new $.Deferred,$.when(e.areTemplatedLoaded()).pipe((function(){return e.renderContent()})).done((function(){e.postRender(),t.resolve(e.getContent()),e.renderingDeferred.resolve()})),t.promise()},getContent:function(){return this.content},getResource:function(e,t){return this.resources.getResource(e,t)},renderContent:function(){return""},postRender:function(){},getComponentSelector:function(e){return"[data-bizagi-component="+e+"]"},getComponentContainer:function(e){var t=this.getContent();return t&&0!=t.length?$(this.getComponentSelector(e),t):null},resizeLayout:function(){this.publish("resizeLayout")},performResizeLayout:function(){},dispose:function(){var e=this;null!=e.subscribers&&$.each(e.subscribers,(function(t,i){e.unsubscribe(i.event)})),setTimeout((function(){bizagi.util.dispose(e),e.disposed=!0}),bizagi.override.disposeTime||50)},loadTemplates:function(e){var t=this.templatesDeferred=new $.Deferred,i=[],r=null==e.useNewEngine||e.useNewEngine;for(var a in e)"useNewEngine"!=a&&i.push(this.loadTemplate({name:a,path:e[a],useNewEngine:r}));return $.when.apply($,i).done((function(){t.resolve()})),t.promise()},loadTemplate:function(e){var t=this;return t.tmpl[e.name]?t.tmpl[e.name]:e.useNewEngine?bizagi.templateService.getTemplateWidget(e.path).done((function(i){t.tmpl[e.name]=i})):bizagi.templateService.getTemplate(e.path).done((function(i){t.tmpl[e.name]=i}))},getTemplate:function(e){return this.tmpl.hasOwnProperty(e)?this.tmpl[e]:null},isRendered:function(){return!!this.renderingDeferred&&this.renderingDeferred.promise()},areTemplatedLoaded:function(){return this.templatesDeferred}}),bizagi.workportal.controllers.controller.extend("bizagi.workportal.controllers.controller",{},{getComponentContainer:function(e){var t=this.getContent();if(!t||0==t.length)return null;var i=this.componentContainers[e];return null==i&&(0==(i=$(this.getComponentSelector(e),t)).length&&t.is(this.getComponentSelector(e))&&(i=t),this.componentContainers[e]=i),this.componentContainers[e]},getTemplate:function(e){return this.workportalFacade.getTemplate(e)}}),bizagi.workportal.controllers.controller.extend("bizagi.workportal.controllers.main",{},{init:function(e,t){var i=this;i.componentRegex=/{{component (\w+)}}/g,this._super(e,t),this.subscribe("changeWidget",(function(e,t){bizagi.currentWidget=t.widgetName;var r=new $.Deferred;return i.subscribeOneTime("onWidgetIncludedInDOM",(function(e,t){r.resolve()})),$.when(bizagi.util.liveSave(t.widgetName),bizagi.util.autoSave()).done((function(){$(document).data("auto-save",""),bizagi.util.liveProcessesEvents.saveEvent.saveLivePromise=null,t.widgetName!=bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID&&t.widgetName!=bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX||bizagi.util.defaultWidget(t.widgetName),bizagi.util.setContext({widget:t.widgetName}),i.publish("cleanAllWidgets"),i.setWidget(t)})),r.promise()})),this.subscribe("addDialogToDialogStack",(function(e,t){i.addDialogToDialogStack(t)})),this.subscribe("showDialogWidget",(function(e,t){return i.showDialogWidget(t)})),this.subscribe("closeCurrentDialog",(function(e,t){return i.closeCurrentDialog(t)})),this.subscribe("closeAllDialogs",(function(e,t){i.closeAllDialogs()})),this.subscribe("popupWidget",(function(e,t){i.popupWidget(t)})),this.subscribe("popWidget",(function(e,t){i.popWidget(t)})),this.subscribe("pushWidget",(function(e,t){i.pushWidget(t)})),this.subscribe("executeAction",(function(e,t){i.executeAction(t)})),this.subscribe("resizeLayout",(function(){i.performResizeLayout()})),this.subscribe("disposeWidget",(function(){i.disposeWidget()})),this.subscribe("appendWidgetTo",(function(e,t){return i.appendWidgetTo(t)})),this.subscribe("notification",(function(e,t){NotificationDispatcher.dispatch(t.notification,t.type)})),this.subscribe("refreshQueryFormShortCut",(function(e,t){return i.refreshQueryFormShortCut(t)}))},renderContent:function(){var e=this,t=e.workportalFacade.getTemplate("workportal"),i=e.content=$.tmpl(t,{});e.workarea=e.workportalFacade.getWorkareaController();var r=e.menu=e.workportalFacade.getMenuController();return $.when(r.render()).done((function(){r.getContent().appendTo(e.getComponentContainer("menu"))})),$(window).resize((function(){e.resizeLayout()})),i},setWidget:function(e){this.currentWidget=e.widgetName,this.currentWidgetParams=$.extend({},e,{menu:this.getMenu()}),bizagi.assert(!bizagi.util.isEmpty(e.widgetName),"No widget name defined for changeWidget call"),this.renderWorkarea()},executeAction:function(e){var t=this;e.action==bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING?bizagi.loader.start("activity").then((function(){t.workportalFacade.getAction(e.action).execute(e)})):e.action==bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_SEARCH&&bizagi.loader.start("inbox").then((function(){t.workportalFacade.getAction(e.action).execute(e)}))},renderWorkarea:function(){var e=this,t=e.workarea;if(t){var i=e.getComponentContainer("workarea");e.cleanWidgets(),i.empty(),bizagi.util.isEmpty(e.currentWidget)||"none"==e.currentWidget||(e.currentWidgetParams=$.extend({},e.currentWidgetParams,{menu:e.getMenu()}),e.currentWidget===bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID||e.currentWidget===bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX?bizagi.loader.start("inbox").then((function(){e.loadWidgetFromFacade(t,i)})):e.loadWidgetFromFacade(t,i))}},loadWidgetFromFacade:function(e,t){var i=this;$.when(i.workportalFacade.getWidget(i.currentWidget,i.currentWidgetParams)).pipe((function(t){return e.setWidget(t),e.render()})).done((function(){var r=e.getContent();r&&(r.appendTo(t),i.resizeLayout(),i.publish("onWidgetIncludedInDOM"))}))},showDialogWidget:function(e){},closeCurrentDialog:function(e){},popupWidget:function(e){},addDialogToDialogStack:function(e){},closeAllDialogs:function(){},pushWidget:function(e){this.currentWidget=e.widgetName,this.currentWidgetParams=$.extend({},e,{menu:this.getMenu()}),bizagi.assert(!bizagi.util.isEmpty(e.widgetName),"No widget name defined for pushWidget call")},popWidget:function(e){this.currentWidget=e.widgetName,this.currentWidgetParams=$.extend({},e,{menu:this.getMenu()}),bizagi.assert(!bizagi.util.isEmpty(e.widgetName),"No widget name defined for popupWidget call")},disposeWidget:function(e){this.currentWidget=e.widgetName,this.currentWidgetParams=$.extend({},e,{menu:this.getMenu()}),bizagi.assert(!bizagi.util.isEmpty(e.widgetName),"No widget name defined for disposeWidget call")},appendWidgetTo:function(e){},performResizeLayout:function(){var e=this.getContent();this.resizeContainer(e,$(window).height()),this.menu&&this.menu.performResizeLayout(),this.workarea&&this.workarea.performResizeLayout()},resizeContainer:function(e,t){var i=this,r=e.children(".ui-bizagi-component-adjustable"),a=t;if(r.length>0){var o=0;$.each(e.children(),(function(e,t){$(t).hasClass("ui-bizagi-component-adjustable")||"none"===$(t).css("display")||(o+=$(t).height())})),a=t-o;var s="";$.each(r,(function(e,t){"visible"==(s=""!=$(t).css("overflow-y")?$(t).css("overflow-y"):"hidden")&&(s="hidden"),$(t).addClass("ui-bizagi-adjustable");var i="auto"===$(t).css("margin-top")?0:Number($(t).css("margin-top").replace("px","")),r=a-i;$(t).css({height:r,"overflow-y":s})}))}$.each(e.children(),(function(e,t){$(t).find(".ui-bizagi-component-adjustable").length>0&&($(t).addClass("ui-bizagi-component-adjustable"),i.resizeContainer($(t),a))}))},getMenu:function(){return this.menu},refreshQueryFormShortCut:function(e){}}),bizagi.workportal.controllers.controller.extend("bizagi.workportal.controllers.menu",{},{init:function(e,t){var i=this;i._super(e,t),this.subscribe("showMainMenu",(function(e,t){var r=new $.Deferred;return $(i.getContent()).closest("#ui-bizagi-wp-menu").show(),r.promise()}))},renderContent:function(){var e=this,t=e.workportalFacade.getTemplate("menu"),i=new $.Deferred;e.customPreferencesObj=new bizagi.services.preferences,e.customFormats=new bizagi.services.preferences.customFormats;var r=e.customPreferencesObj.getPreferences();new bizagi.workportal.services.windowMaintenance(e.dataService);$.datepicker.setDefaults(bizagi.localization.getResource("datePickerRegional"));var a=bizagi.localization.getResource("numericFormat");return a&&(a.decimalSymbol=r.decimalSeparator||bizagi.currentUser.decimalSeparator||a.decimalSymbol,a.symbol=r.symbol||bizagi.currentUser.symbol||a.symbol,a.digitGroupSymbol=r.thousandSeparator||bizagi.currentUser.groupSeparator||a.digitGroupSymbol,bizagi.localization.setResource("numericFormat",a),BIZAGI_DEFAULT_CURRENCY_INFO&&(BIZAGI_DEFAULT_CURRENCY_INFO.decimalDigits=bizagi.currentUser.decimalDigits,BIZAGI_DEFAULT_CURRENCY_INFO.decimalSeparator=a.decimalSymbol,BIZAGI_DEFAULT_CURRENCY_INFO.symbol=a.symbol,BIZAGI_DEFAULT_CURRENCY_INFO.groupSeparator=a.digitGroupSymbol)),bizagi.currentUser.uploadMaxFileSize&&(BIZAGI_SETTINGS.UploadMaxFileSize=bizagi.currentUser.uploadMaxFileSize,bizagi.util.changeData({uploadMaxFileSize:BIZAGI_SETTINGS.UploadMaxFileSize})),e.overrideUserPreferences(),e.security=new bizagi.workportal.command.security(e.dataService),$.when(e.security.getSecurity()).done((function(r){!1===bizagi.override.enableFeatureDisplayOptions&&(r.DisplayOptions=!1);var a=e.content=$.tmpl(t,$.extend(bizagi.currentUser,{environment:bizagi.loader.environment||"",build:bizagi.loader.build,base64image:bizagi.themeLogo||"img/img/barra/logo-bizagi.svg",photo:"data:image/png;base64,"+(bizagi.currentUser.userPicture?bizagi.currentUser.userPicture:"iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAMAAAD04JH5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAZQTFRF////////VXz1bAAAAAJ0Uk5T/wDltzBKAAAA+0lEQVR42uzaSxLCMAwE0c79L82SFMXHJpKHhJ59at4utmS2cBAgQMCBT3dZDuBJ1gF4mSUA3qYfALUCauvnCZT3Twqo758T0NA/JaCjf0ZwIgC0COjpHxecBgBNAgF09Y8KBAgQIECAAAFnAXgiEiDAq5mA8wEuOCERIMBBpYAfAMTH9QLygPjOSEB+b5gHxFe3I4Lt4oD0+v4HAPEXFAIECBDw70+58oDw7zh7JMteTrPTcr5MDYBDOQqgIAcAFOU7AKWZBlCeKQAtGQXQmAEAzfkAYEHeAWC5gOX1DwQS/XsBkf6dgEz/XSBAgAABAgQIECBAQBxwE2AAjnkjnL/SDJsAAAAASUVORK5CYII="),hasPicture:!!bizagi.currentUser.userPicture,initials:bizagi.currentUser.userFullName?bizagi.currentUser.userFullName.getInitials():"",security:r,showQrMobileMenu:!1!==bizagi.override.showQrMobileMenu}));i.resolve(a)})),i.promise()},overrideUserPreferences:function(){this.customFormats.overrideLocalization()},changeWidget:function(e){this.publish("changeWidget",e)},showDialogWidget:function(e){return this.publish("showDialogWidget",e)},performResizeLayout:function(){this.adjustMenuWP()},adjustMenuWP:function(){var e=$("#ui-bizagi-wp-app-menu-bt-container"),t=function(e){var t=function(t){e.css("width",t+"=10")};return{start:t.bind(null,"-"),end:t.bind(null,"+")}};if(1===e.length){var i=$("#ui-bizagi-wp-widget-searchContainer").outerWidth()+10;t(e).start();var r=i+$("#user").outerWidth()+$("#ui-bizagi-wp-app-menu-logo-container").outerWidth()+70,a=$("#ui-bizagi-wp-app-menu-container").width()-r;e.width(a),$("span.text",o).show();for(var o=$("#ui-bizagi-wp-app-menu-bt-container li"),s=indexLastButton=o.length-1,n=!0;n&&!(s<0);)e.position().top>0||o.eq(indexLastButton).position().top>0?($("span.text",o).eq(s).hide(),s-=1):(t(e).end(),n=!1)}}}),bizagi.workportal.controllers.controller.extend("bizagi.workportal.controllers.workarea",{},{setWidget:function(e){this.widget=e},disposeWidget:function(){this.widget&&(this.widget.dispose(),delete this.widget)},cleanWidgets:function(){this.widget&&this.widget.clean()},renderContent:function(){var e=this,t=new $.Deferred;return e.widget?$.when(e.widget.render()).done((function(){e.content=e.widget.getContent(),t.resolve(e.content)})):(e.content=$("<div/>"),t.resolve(e.content)),t.promise()},performResizeLayout:function(){this.widget&&this.widget.performResizeLayout()}}),bizagi.workportal.controllers.controller.extend("bizagi.workportal.actions.action",{BIZAGI_WORKPORTAL_ACTION_ROUTING:"routing",BIZAGI_WORKPORTAL_ACTION_SEARCH:"search"},{render:function(){bizagi.assert(!1,"An action can't be rendered because it has no view")},postRender:function(){bizagi.assert(!1,"An action can't be rendered because it has no view")},execute:function(){}}),bizagi.workportal.actions.action.extend("bizagi.workportal.actions.routing",{},{execute:function(e){var t=this;t.params=e||{},$.when(t.dataService.routing.getRoute(e)).done((function(i){var r=$.Deferred();switch(i=i||{},"undefined"!=t.params.isOfflineForm&&1==t.params.isOfflineForm?i.moduleParams=$.extend(i.moduleParams,{formsRenderVersion:t.params.formsRenderVersion,isOfflineForm:t.params.isOfflineForm,idCase:t.params.idCase,idWorkitem:t.params.idWorkitem,guid:t.params.guid})||{}:i.moduleParams=i.moduleParams||{},i.module){case bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_RENDER:case bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_OLDRENDERINTEGRATION:case bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ASYNC:t.publish("changeWidget",i.moduleParams),t.publish("closeAllDialogs");break;case bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_PROJECT_DASHBOARD:bizagi.util.enableWorkPortalMenu(),t.publish("closeAllDialogs"),t._executeWidgetProjectDashboard(e,i.moduleParams);break;case bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_START_FORM:var a={title:t.getResource("workportal-widget-newcase-title"),width:850,height:750,refreshInbox:!1,onClose:i.moduleParams.onClose,dialogOpened:r};t.publish("showDialogWidget",{widgetName:i.module,data:i.moduleParams.data,modalParameters:a,closeVisible:!1,dialogClass:"ui-bizagi-start-form-dialog"}),r.promise().done((function(e){t.publish("onWidgetIncludedInDOM"),e.widgetReference.postRender()}));break;case bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ROUTING:a={title:t.getResource("workportal-widget-routing-window-selector"),width:670,height:450,refreshInbox:!1,onClose:i.moduleParams.onClose};t.isThereAsync(i.moduleParams.data)?t.asyncWidget(i.moduleParams):t.publish("showDialogWidget",{widgetName:i.module,data:i.moduleParams.data,modalParameters:a,onClose:a.onClose})}}))},_executeWidgetProjectDashboard:function(e,t){if(this.validateGoToLastSection(bizagi.services.preferences().getPreference("goToInboxOnActivityExit"),t.referrer,t.hasWorkItems))this.goToInbox(t);else{var i=$.extend(e,t);bizagi.util.setContext(i),this.publish("changeWidget",t)}},goToInbox:function(e){this.publish("changeWidget",{widgetName:this.workportalFacade.workportal.getWidgetByCookie(!0)}),this.notifier=bizagi.injector.get("notifier");var t=e.messageForm?e.messageForm:bizagi.localization.getResource("render-without-globalform");this.notifier.showSucessMessage(t,"","")},validateGoToLastSection:function(e,t,i){return e&&"bizagi.workportal.widgets.project.activity"===t&&!1===i},isThereAsync:function(e){var t,i=e.workItems,r=0,a=i.length,o=!1;if(a>0)for(;r<a;)"true"===(t=i[r++]).isAsynch&&(o=o||[]).push(t);return o},asyncWidget:function(e){e.widgetName="async",this.publish("changeWidget",e)}}),bizagi.workportal.actions.action.extend("bizagi.workportal.actions.search",{},{execute:function(e){var t=this;t.params=e;var i={radNumber:$.trim(e.radNumber),idWorkflow:"",taskState:"all",onlyFavorites:!1,order:e.order||"",orderFieldName:e.orderFieldName||"",orderType:e.orderType||"0",page:e.page||1,group:bizagiConfig.groupByCaseNumber?"T_RADNUMBER":null};$.when(t.dataService.getCustomizedColumnsData(i)).done((function(r){bizagi.lstIdCases=r.cases.lstIdCases;var a=0;$(r.cases.columnTitle).each((function(i,o){o.radNumber=$.trim(e.radNumber),"T_idTask"==o.order&&$(r.cases.rows).each((function(e,i){t.isArray(i.fields[a])||(r.cases.rows[e].fields[a]={workitems:[{TaskName:i.fields[a],State:r.cases.rows[e].taskState}]})})),a++})),bizagi.referrerParams=bizagi.referrerParams||{},bizagi.referrerParams.radNumber=e.radNumber,bizagi.referrerParams.page=e.page||1,r.IsFavorite=!1,r.IsOpen=!1,bizagi.referrerParams.referrer=bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_SEARCH,0==r.cases.lstIdCases.length?t.showNoResults(i):1==r.cases.rows.length?t.showSearch(r,e):r.cases.rows.length>=1&&t.showSearch(r,i)}))},showSearch:function(e,t){bizagi.referrerParams.requestGlobalForm=!0,bizagi.referrerParams.referrerBackButton=bizagi.referrerParams.referrerBackButton||bizagi.context.widget||bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID,this.publish("changeWidget",{widgetName:bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_SEARCH,data:e,referrerParams:t}).done((function(){bizagi.util.isEmpty($("#footer #casesPagination").html().trim())&&$("#footer #casesPagination").hide()})),bizagi.util.isTabletDevice()&&$("#menu-items #search").trigger("closePopUp")},showNoResults:function(e){var t=$("#menuQuery").css("color");$("#menuQuery").css("color","#f88f88"),setTimeout((function(){$("#menuQuery").css("color",t)}),5e3),"smartphone_ios"!=bizagi.detectDevice()&&"smartphone_android"!=bizagi.detectDevice()||this.showSearch({noresults:e.radNumber},e)},redirectToProcess:function(e){this.publish("executeAction",{action:bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,idCase:e,onlyUserWorkItems:"false"})},formatRequest:function(e){return e},formatCategories:function(e){return e},isArray:function(e){return"object"==_typeof(e)},isDate:function(e){var t=!1,i="string"==typeof(e=e||"")?e.split("/"):"";try{if(3==i.length)new Date(e).getYear()>0&&(t=!0)}catch(e){t=!1}return t}}),bizagi.workportal.controllers.controller.extend("bizagi.workportal.widgets.widget",{BIZAGI_WORKPORTAL_WIDGET_INTEGRATION:"widgetIntegration",BIZAGI_WORKPORTAL_WIDGET_WEBPART:"webpart",BIZAGI_WORKPORTAL_WIDGET_INBOX:"inbox",BIZAGI_WORKPORTAL_WIDGET_ADVANCE_SEARCH:"advanceSearch",BIZAGI_WORKPORTAL_WIDGET_HOMEPORTAL:"homeportal",BIZAGI_WORKPORTAL_WIDGET_ACTIVITY:"project.activity",BIZAGI_WORKPORTAL_WIDGET_PROJECT_DASHBOARD:"projectDashboard",BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID:"inboxGrid",BIZAGI_WORKPORTAL_WIDGET_ROUTING:"routing",BIZAGI_WORKPORTAL_WIDGET_SEARCH:"search",BIZAGI_WORKPORTAL_WIDGET_RENDER:"activityform",BIZAGI_WORKPORTAL_WIDGET_START_FORM:"startForm",BIZAGI_WORKPORTAL_WIDGET_RENDERFORM:"renderform",BIZAGI_WORKPORTAL_WIDGET_NEWCASE:"newCase",BIZAGI_WORKPORTAL_WIDGET_QUERIES:"queries",BIZAGI_WORKPORTAL_WIDGET_QUERIES_DEFINITION:"queriesDefinition",BIZAGI_WORKPORTAL_WIDGET_QUERIES_SHORTCUT:"queriesShortcut",BIZAGI_WORKPORTAL_WIDGET_QUERYFORM:"queryform",BIZAGI_WORKPORTAL_WIDGET_LISTCASES:"listCases",BIZAGI_WORKPORTAL_WIDGET_ASYNC:"async",BIZAGI_WORKPORTAL_WIDGET_GENERICIFRAME:"genericiframe",BIZAGI_WORKPORTAL_WIDGET_SUBMENU:"subMenu",BIZAGI_WORKPORTAL_WIDGET_PRINT:"print",BIZAGI_WORKPORTAL_WIDGET_FONTSIZE:"fontsize",BIZAGI_WORKPORTAL_WIDGET_OLDRENDERINTEGRATION:"oldrenderintegration",BIZAGI_WORKPORTAL_WIDGET_PAGE:"page",BIZAGI_WORKPORTAL_WIDGET_ENTITIES:"entities",BIZAGI_WORKPORTAL_WIDGET_REPORTS:"reports",BIZAGI_WORKPORTAL_WIDGET_REPORTS_MENU:"reportsMenu",BIZAGI_WORKPORTAL_WIDGET_REPORTS_CHART:"reportsChart",BIZAGI_WORKPORTAL_WIDGET_SMARTFOLDERS:"smartfolders",BIZAGI_WORKPORTAL_WIDGET_ADMIN_CASES:"adminReassignCases",BIZAGI_WORKPORTAL_WIDGET_REASSIGN_CASE:"reassignCase",BIZAGI_WORKPORTAL_WIDGET_ASYNCECM_UPLOAD:"asyncECMUpload",BIZAGI_WORKPORTAL_WIDGET_PROCESS_TREE:"processTree",BIZAGI_WORKPORTAL_WIDGET_ENTITIES_TREE:"entitiesTree",BIZAGI_WORKPORTAL_WIDGET_USERS_TABLE:"usersTable",BIZAGI_WORKPORTAL_WIDGET_ACTIVITY_LOG:"activityLog",BIZAGI_WORKPORTAL_WIDGET_AUTHENTICATION_LOG:"authenticationLog",BIZAGI_WORKPORTAL_WIDGET_ADMIN_ENTITIES:"entityAdmin",BIZAGI_WORKPORTAL_WIDGET_ADMIN_ENCRYPT_PASSWORDS:"encryptPasswords",BIZAGI_WORKPORTAL_WIDGET_ADMIN_USERS_REQUESTS:"userPendingRequests",BIZAGI_WORKPORTAL_WIDGET_ADMIN_CASE_SEARCH:"adminCaseSearch",BIZAGI_WORKPORTAL_WIDGET_ADMIN_ASYNC_ACTIVITIES:"asyncActivities",BIZAGI_WORKPORTAL_WIDGET_ADMIN_DEFAULTS_ASSIGNATION_USER:"defaultsAssignUser",BIZAGI_WORKPORTAL_WIDGET_ADMIN_TRANSFER_CASE_SECURITY_PERMISSIONS:"transferCaseSecurityPermissions",BIZAGI_WORKPORTAL_WIDGET_ADMIN_USER_PROFILES:"userProfiles",BIZAGI_WORKPORTAL_WIDGET_ADMIN_ALARMS:"adminAlarms",BIZAGI_WORKPORTAL_WIDGET_ADMIN_USER_LICENSES:"userlicenses",BIZAGI_WORKPORTAL_WIDGET_ADMIN_DIMENSIONS:"dimensions",BIZAGI_WORKPORTAL_WIDGET_ADMIN_DOCUMENT_TEMPLATES:"documentTemplates",BIZAGI_WORKPORTAL_WIDGET_ADMIN_PROCESSES:"processes",BIZAGI_WORKPORTAL_WIDGET_START_PROCESS:"startProcess",BIZAGI_WORKPORTAL_WIDGET_ADMIN_BUSINESS_POLICIES:"businessPolicies",BIZAGI_WORKPORTAL_WIDGET_ADMIN_LANGUAGE:"languageAdmin",BIZAGI_WORKPORTAL_WIDGET_ADMIN_BUSINESS_POLICIES_DECISION_TABLE:"businessPoliciesDecisionTable",BIZAGI_WORKPORTAL_WIDGET_ADMIN_BUSINESS_POLICIES_POLITICS:"businessPoliciesPolitics",BIZAGI_WORKPORTAL_WIDGET_ADMIN_BUSINESS_POLICIES_RULES:"businessPoliciesRules",BIZAGI_WORKPORTAL_WIDGET_ADMIN_BUSINESS_POLICIES_TABS:"businessPoliciesTabs",BIZAGI_WORKPORTAL_WIDGET_ADMIN_BUSINESS_POLICIES_VOCABULARIES:"businessPoliciesVocabularies",BIZAGI_WORKPORTAL_WIDGET_ADMIN_PREFERENCES:"adminPreferences",BIZAGI_WORKPORTAL_WIDGET_ADMIN_DISPLAY_OPTIONS:"adminDisplayOptions",BIZAGI_WORKPORTAL_WIDGET_TREE:"tree",BIZAGI_WORKPORTAL_WIDGET_GRAPHIC_QUERY:"graphicquery",BIZAGI_WORKPORTAL_WIDGET_PROCESS_MODELER_VIEW:"processModeler",BIZAGI_WORKPORTAL_WIDGET_ADMIN_USERS_ADMINISTRATION:"adminUsers",BIZAGI_WORKPORTAL_WIDGET_ADMIN_USERS_DELEGATION:"usersDelegation",BIZAGI_WORKPORTAL_WIDGET_ADMIN_USERS_DELEGATION_SEARCH_USER:"usersDelegationSearchUser",BIZAGI_WORKPORTAL_WIDGET_ADMIN_STAKEHOLDERS:"adminStakeholders",BIZAGI_WORKPORTAL_WIDGET_BIZAGI_EVENTS:"events",BIZAGI_WORKPORTAL_WIDGET_BIZAGI_RELEASE:"release",BIZAGI_WORKPORTAL_WIDGET_PROJECT_PROCESS_DIAGRAM_HELPER:"processDiagramHelper",BIZAGI_WORKPORTAL_WIDGET_PROJECT_ACTIVITY_MAP_TOOLTIP:"activityMapTooltip",BIZAGI_WORKPORTAL_WIDGET_PROJECT_USERSUMMARY:"usersummary",BIZAGI_WORKPORTAL_WIDGET_MYSEARCHLIST:"mySearchList",BIZAGI_WORKPORTAL_WIDGET_LOADFORM:"loadForm",BIZAGI_WORKPORTAL_WIDGET_TEMPLATE_ENGINE:"templates",BIZAGI_WORKPORTAL_WIDGET_DIALOGNAV:"dialognav",BIZAGI_WORKPORTAL_WIDGET_ADMIN_HOLIDAYS:"holidays",BIZAGI_WORKPORTAL_WIDGET_ADMIN_PROJECTNAME:"projectName",BIZAGI_WORKPORTAL_WIDGET_ADMIN_OAUTH2APPLICATIONS:"oauth2Applications",BIZAGI_WORKPORTAL_WIDGET_ADMIN_ADHOC_PROCESSES:"adhocProcesses",BIZAGI_WORKPORTAL_WIDGET_TIMELINE:"timeline",BIZAGI_WORKPORTAL_WIDGET_ADHOC_PROCESS_MODELER:"adhocProcessModeler",BIZAGI_WORKPORTAL_WIDGET_ADMIN_ADHOC_ENTITIES:"adhocEntities",BIZAGI_WORKPORTAL_WIDGET_ADMIN_ADHOC_USER_GROUPS:"adhocUserGroups",BIZAGI_WORKPORTAL_WIDGET_ADMIN_ADHOC_CREATE_PROCESS:"adhocCreateProcess",BIZAGI_WORKPORTAL_WIDGET_ADMIN_ADHOC_BOOLEAN_EXP:"adhocBooleanExp",BIZAGI_WORKPORTAL_WIDGET_ADHOC_CREATE_PROCESS:"adhocCreateProcess",BIZAGI_WORKPORTAL_WIDGET_PROFLY:"adhocprofly",BIZAGI_WORKPORTAL_WIDGET_SESSION_TIMEOUT:"sessionTimeOut",BIZAGI_WORKPORTAL_WIDGET_SESSION_TIMEOUT_EXPIRED:"sessionTimeOutExpired",BIZAGI_WORKPORTAL_WIDGET_USER_PRIVACY:"userPrivacy",BIZAGI_WORKPORTAL_WIDGET_ACCESS_DENIED:"accessDenied",BIZAGI_WORKPORTAL_WIDGET_ADMIN_BUSINESS_POLICES:"adminBusinessPolices",BIZAGI_WORKPORTAL_WIDGET_USERS_MODAL:"usersModal",BIZAGI_WORKPORTAL_WIDGET_QUERIES_MANAGEMENT:"queriesManagement",BIZAGI_WORKPORTAL_WIDGET_ADMIN_USER_PERMISSION_REPORT:"userPermissionReport",BIZAGI_WORKPORTAL_WIDGET_ACTIVITY_DESCRIPTION_CONTENT:"activityDescriptionContent",BIZAGI_WORKPORTAL_WIDGET_QUICKACTIONS_EXECUTE:"quickActionsExecute",BIZAGI_WORKPORTAL_WIDGET_ADMIN_ERROR_LOGS:"errorLogs",BIZAGI_WORKPORTAL_WIDGET_SMARTINBOX:"smartinbox",BIZAGI_WORKPORTAL_WIDGET_ADMIN_SMARTINBOX:"smartinboxAdmin",BIZAGI_WORKPORTAL_WIDGET_CANCEL_CASE:"cancelCase"},(_bizagi$workportal$co={init:function(e,t,i){this._super(e,t),this.params=i,i&&i.menu&&(this.menu=i.menu),this.observableElement=$({}),this.widgetReadyDeferred=new $.Deferred,this.isBlocked=!1},publish:function(e,t){if(this.disposed)return null;$(document).triggerHandler(e,$.extend(t,{referrer:this.getWidgetName()}))},changeWidget:function(e,t){t=t||{};var i=$.extend(t,{widgetName:e});this.publish("changeWidget",i)},executeAction:function(e,t){t=t||{};var i=$.extend(t,{action:e});this.publish("executeAction",i)},showGraphicQuery:function(e){var t=this;!0===e.isAdhoc?bizagi.loader.start("processmodelerview").then((function(){t.publish("showDialogWidget",{widgetName:bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_PROCESS_MODELER_VIEW,data:e,modalParameters:{title:"Process viewer",refreshInbox:!1},maximizeOnly:!0,onClose:function(){bizagi.workportal.desktop.dialogStack.pop()}})})):bizagi.loader.start("processviewer").then((function(){t.publish("showDialogWidget",{widgetName:bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_GRAPHIC_QUERY,data:e,modalParameters:{title:t.getResource("render-graphic-query"),refreshInbox:!1},maximizeOnly:!0,onClose:function(){bizagi.workportal.desktop.dialogStack.pop()}})}))},isProcessOnTheFlyCase:function(){return!0},showTimeLine:function(e){var t=this;bizagi.loader.startAndThen("timeline").then((function(){t.publish("showDialogWidget",{widgetName:bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_TIMELINE,data:e,modalParameters:{title:t.getResource("workportal-project-casedashboard-timeline"),refreshInbox:!1},maximizeOnly:!0,onClose:function(){bizagi.workportal.desktop.dialogStack.pop()}})}))},showSelectUser:function(e){var t=this;bizagi.loader.startAndThen("admin").then((function(){t.publish("showDialogWidget",{widgetName:bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_USERS_TABLE,data:{},closeVisible:!1,maximize:!0,modalParameters:{title:bizagi.localization.getResource("workportal-widget-usertable-search-user"),width:"930px",id:"SelectUser"},userLinkLabel:[bizagi.localization.getResource("workportal-widget-admin-defaults-assignation-select-link")],parentDef:e,showBackButton:!1,onClose:function(){e.reject()}}),$.when(e).done((function(e,i,r){t.publish("closeCurrentDialog")}))}))}},_defineProperty(_bizagi$workportal$co,"showSelectUser",(function(e){var t=this;bizagi.loader.startAndThen("admin").then((function(){t.publish("showDialogWidget",{widgetName:bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_USERS_TABLE,data:{},closeVisible:!1,maximize:!0,modalParameters:{title:bizagi.localization.getResource("workportal-widget-usertable-search-user"),width:"930px",id:"SelectUser"},userLinkLabel:[bizagi.localization.getResource("workportal-widget-admin-defaults-assignation-select-link")],parentDef:e,showBackButton:!1,onClose:function(){e.reject()}}),$.when(e).done((function(e,i,r){t.publish("closeCurrentDialog")}))}))})),_defineProperty(_bizagi$workportal$co,"routingExecute",(function(e){if(null==e)return!1;var t=e.find("#idCase").val()||this.params.idCase,i=e.find("#idWorkflow").val()||this.params.idWorkflow,r=e.find("#idWorkItem").val()||e.parent().find("#idWorkItem").val(),a=e.find("#idTask").val(),o=e.find("#eventAsTasks").val()||!1;return this.publish("executeAction",{action:bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,idCase:t,idWorkflow:i,idWorkItem:r,idTask:a,eventAsTasks:o}),!0})),_defineProperty(_bizagi$workportal$co,"getWidgetName",(function(){return this.Class.fullName})),_defineProperty(_bizagi$workportal$co,"sub",(function(e){this.observableElement.off.apply(this.observableElement,arguments),this.observableElement.on.apply(this.observableElement,arguments)})),_defineProperty(_bizagi$workportal$co,"unsub",(function(){this.observableElement.off.apply(this.observableElement,arguments)})),_defineProperty(_bizagi$workportal$co,"pub",(function(){return this.observableElement.triggerHandler.apply(this.observableElement,arguments)})),_defineProperty(_bizagi$workportal$co,"pubDeadLockDetection",(function(){var e=new $.Deferred;if(self.isBlocked)e.reject();else{self.isBlocked=!0;var t=this.pub.apply(this,arguments),i=Array.isArray(t)?t:[t];$.when.apply($,i).done((function(t){self.isBlocked=!1,e.resolve()}))}return e.promise()})),_defineProperty(_bizagi$workportal$co,"clean",(function(){if(this.observableElement){var e=$._data(this.observableElement[0],"events");if(e)for(var t in e)"notify"!=t&&"showDialogWidget"!=t&&"showNotification"!=t&&this.unsub(t)}})),_defineProperty(_bizagi$workportal$co,"isReady",(function(){return this.widgetReadyDeferred.promise()})),_defineProperty(_bizagi$workportal$co,"setWidgetReady",(function(){this.widgetReadyDeferred.resolve()})),_defineProperty(_bizagi$workportal$co,"getDateWithTimezone",(function(e,t,i){var r=window.bizagi.moment;return i?new Date(r.tz(i,e,t).format()):new Date(r().tz(t).format())})),_bizagi$workportal$co)),bizagi.workportal.widgets.widget.extend("bizagi.workportal.widgets.oldrenderintegration",{},{getWidgetName:function(){return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_OLDRENDERINTEGRATION},renderContent:function(){var e=this.getTemplate("integration-old-render"),t={};t.url=this.params.url||"App/ListaDetalle/Detalle.aspx?PostBack=1&idCase="+this.params.idCase+"&idWorkitem="+this.params.idWorkitem+"&idTask="+this.params.idTask;var i=this.content=$.tmpl(e,t);return bizagi.workportal.currentInboxView=this.getWidgetName(),i}}),bizagi.workportal.widgets.widget.extend("bizagi.workportal.widgets.inbox",{},{getWidgetName:function(){return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX},renderContent:function(){var e=this.getTemplate("inbox"),t={};t.enableFolders=!(null==bizagi.override||!bizagi.override.enableFolder),t.enableSmartFolders=!(null==bizagi.override||!bizagi.override.enableSmartFolders);var i=this.content=$.tmpl(e,t);return bizagi.workportal.currentInboxView=this.getWidgetName(),i},renderSummaryForm:function(e){var t=this,i=new $.Deferred,r=void 0!==t.dataService.serviceLocator.proxyPrefix?t.dataService.serviceLocator.proxyPrefix:"";return bizagi.loader.start("rendering").then((function(){var a=new bizagi.rendering.facade({proxyPrefix:r});a.execute({canvas:e,summaryForm:!0,idCase:t.idCase}),t.renderingFacade=a,setTimeout((function(){t.resizeLayout()}),1e3),$.when(a.ready()).done((function(){i.resolve()}))})),i.promise()},routingExecute:function(e){if(null==e)return!1;var t=e.find("#idCase").val(),i=e.find("#idWorkflow").val(),r=e.find("#idWorkItem").val(),a=e.find("#idTask").val(),o=e.find("#eventAsTasks").val()||!1;this.publish("executeAction",{action:bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,idCase:t,idWorkflow:i,idWorkItem:r,idTask:a,eventAsTasks:o})}}),bizagi.workportal.widgets.listCases.extend("bizagi.workportal.widgets.inboxGrid",{},{getWidgetName:function(){return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID},renderContent:function(){var e=this.getTemplate("inbox-grid"),t={};t.enableFolders=!(null==bizagi.override||!bizagi.override.enableFolder),t.enableSmartFolders=!(null==bizagi.override||!bizagi.override.enableSmartFolders),t.liveFiltersEnable=bizagi.util.isEnableFeature("enableLiveFilters");var i=this.content=$.tmpl(e,$.extend(t,{security:bizagi.menuSecurity}));return bizagi.workportal.currentInboxView=this.getWidgetName(),i}}),bizagi.workportal.widgets.widget.extend("bizagi.workportal.widgets.routing",{},{init:function(e,t,i){this._super(e,t,i)},getWidgetName:function(){return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ROUTING},renderContent:function(){var e=this,t=e.getTemplate("routing"),i=new $.Deferred;return(e.params.data.checkProcess||e.params.data.checkWorkItems)&&$.when(e.dataService.getCaseSubprocesses({idCase:e.params.data.idCase})).done((function(r){e.params.data.subProcessPersonalized=r.subProcesses,e.params.data.workItems.forEach((function(e){e.idTask||(e.idTask="")}));var a=e.content=$.tmpl(t,e.params.data,{formatDate:e.formatDate});i.resolve(a)})),i.promise()},formatDate:function(e){return bizagi.util.formatDateFromInvariantStringDate(e.estimatedSolutionDate)}}),bizagi.workportal.widgets.widget.extend("bizagi.workportal.widgets.events",{},{getWidgetName:function(){return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_BIZAGI_EVENTS},renderContent:function(){var e=this.workportalFacade.getTemplate("case-summary-events-area");return this.content=$.tmpl(e,this.params.data)}}),bizagi.workportal.widgets.widget.extend("bizagi.workportal.widgets.release",{},{getWidgetName:function(){return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_BIZAGI_RELEASE},renderContent:function(){var e=this.workportalFacade.getTemplate("case-summary-release-area");return this.content=$.tmpl(e,this.params.data)}}),bizagi.workportal.widgets.widget.extend("bizagi.workportal.widgets.render",{},{getWidgetName:function(){return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_RENDER},init:function(e,t,i){if(bizagi.util.isEmpty(i.idCase))if(bizagi.util.isEmpty(window.location.hash)){if(!bizagi.util.isEmpty(window.location.search)){var r=bizagi.util.getQueryString();r.idCase?(i.idCase=r.idCase,this.isConfiguredFromHash=!0):r.guid&&(i.guid=r.guid,this.isConfiguredFromHash=!0),r.idWorkitem&&(i.idWorkitem=r.idWorkitem)}}else{var a=bizagi.util.getHashParams();a.length>1&&(i.idCase=a[1],this.isConfiguredFromHash=!0),a.length>2&&(i.idWorkitem=a[2])}this._super(e,t,i)},renderContent:function(){var e,t=this,i=t.getTemplate("render"),r=new $.Deferred;return bizagi.util.isEmpty(t.params.idCase)&&bizagi.util.isEmpty(t.params.guid)?(t.changeWidget(bizagi.workportal.currentInboxView),null):(e=t.params.idCase?{idCase:t.params.idCase,eventAsTasks:t.params.eventAsTasks,onlyUserWorkItems:t.params.onlyUserWorkItems,idWorkitem:t.params.idWorkitem,isOfflineForm:t.params.isOfflineForm||!1}:{guid:t.params.guid,eventAsTasks:t.params.eventAsTasks,onlyUserWorkItems:t.params.onlyUserWorkItems,idWorkitem:t.params.idWorkitem,isOfflineForm:t.params.isOfflineForm||!1},bizagi.util.isEmpty(t.params.idWorkitem)&&t.isConfiguredFromHash?(bizagi.util.isEmpty(t.params.idCase)?bizagi.util.isEmpty(t.params.guid)||t.executeAction(bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,{guid:t.params.guid}):t.executeAction(bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,{idCase:t.params.idCase}),null):(t.content=$.tmpl(i),$.when(t.dataService.summaryCaseDetails(e)).done((function(e){if(bizagi.util.setContext({idCase:e.idCase||null,caseNumber:e.caseNumber||null,widget:t.getWidgetName(),idWorkitem:t.params.idWorkitem||null,idTask:t.params.idTask||null,isOfflineForm:t.params.isOfflineForm||!1}),e.params=t.params,e.countEvents>=1)for(var i=0;i<e.currentState.length;i++)"true"==e.currentState[i].isEvent&&e.currentState[i].idWorkItem==e.params.idWorkitem&&(e.countEvents=e.countEvents-1);e.showEvents=e.countEvents>=1;var a=$.grep(e.currentState,(function(t){return t.idWorkItem===e.params.idWorkitem&&t.allowReleaseActivity}));e.allowReleaseActivity=1===a.length&&a[0].allowReleaseActivity,r.resolve(t.renderSummary(e))})),t.content.parents("body").length>0?t.renderForm():t.subscribeOneTime("onWidgetIncludedInDOM",(function(){t.renderForm({idCase:t.params.idCase,idWorkitem:t.params.idWorkitem,idTask:t.params.idTask,radNumber:t.params.radNumber,withOutGlobalForm:t.params.withOutGlobalForm||!1,isOfflineForm:t.params.isOfflineForm||!1,messageForm:t.params.messageForm||""})})),r.promise()))},renderSummary:function(e){var t=this,i=t.getContent(),r={},a="",o=new bizagi.workportal.command.security(t.dataService);e.showComments=!0,$.when(o.checkSecurityPerm("PrintableVersion"),o.checkSecurityPerm("StateLog"),o.checkSecurityPerm("GraphicQuery")).done((function(o,s,n){if(e.printableVersion=o,e.stateLog=s,e.graphicQuery=n,0!=e.idCase){var c=$.tmpl(t.caseSummaryTemplate,$.extend(e,{security:bizagi.menuSecurity})).appendTo(t.getComponentContainer("summary"));bizagi.util.formatInvariantDate(i,t.getResource("dateFormat")+" "+t.getResource("timeFormat")),$("#details",c).delegate(".summaryLink","click",(function(){t.routingExecute($(this))})),$("#ui-bizagi-details-tabs",i).tabs({active:-1,create:function(e,t){$(this).tabs("option","active",0)},activate:function(i,o){switch(bizagi.util.setContext({commentsFocus:!1}),o.newPanel.prop("id")){case"comments":null==r.comments&&($.extend(t,{},bizagi.workportal.comments),e.canvas=$("#comments",t.getComponentContainer("summary")),e.readOnly=!!$(o.tab).data("isclosed"),$.when(t.renderComments(e)).done((function(e){r.comments=e}))),bizagi.util.setContext({commentsFocus:!0});break;case"subprocess":null==r.subprocess&&$.when(t.dataService.summarySubProcess({idCase:t.params.idCase})).done((function(e){$.each(e.subProcesses,(function(t,i){for(var r=e.subProcesses[t].custData,a=0;a<r.length;a++)null==r[a]&&(r[a]="")})),(a=$.tmpl(t.caseSummaryTemplateSubprocess,e)).appendTo($("#subprocess",t.getComponentContainer("summary"))),r.subprocess=a,a.delegate(".summaryLink","click",(function(){t.routingExecute($(this))}))}));break;case"assignees":null==r.assignees&&$.when(t.dataService.summaryAssigness({idCase:t.params.idCase})).done((function(e){var i=[];$.each(e.events.split(", "),(function(e,t){-1===$.inArray(t,i)&&i.push(t)})),e.events=i.join(", ");var o=[];$.each(e.activities.split(", "),(function(e,t){-1===$.inArray(t,o)&&o.push(t)})),e.activities=o.join(", "),(a=$.tmpl(t.caseSummaryTemplateAssigness,e)).appendTo($("#assignees",t.getComponentContainer("summary"))),r.assignees=a}));break;case"events":null==r.events&&$.when(t.dataService.summaryCaseEvents({idCase:t.params.idCase})).done((function(e){(a=$.tmpl(t.caseSummaryTemplateEvents,e)).appendTo($("#events",t.getComponentContainer("summary"))),r.events=a,a.delegate(".summaryLink","click",(function(){t.routingExecute($(this))}))}));break;case"activities":null==r.activities&&$.when(t.dataService.summaryActivities({data:e,idWorkitem:t.params.idWorkitem})).done((function(e){e.idCase=t.params.idCase,e.idWorkflow=t.params.idWorkflow;var i=bizagi.localization.getResource("dateFormat")+" "+bizagi.localization.getResource("timeFormat");a=$.tmpl(t.caseSummaryTemplateActivities,e),bizagi.util.formatInvariantDate(a,i),a.appendTo($("#activities",t.getComponentContainer("summary"))),r.activities=a,a.delegate(".summaryLink","click",(function(){t.routingExecute($(this))}))}))}}})}else setTimeout((function(){$("div.ui-bizagi-wp-app-inbox-description-container                     div.ui-bizagi-loading-message                     div.ui-bizagi-loading-message-center                     div.ui-bizagi-loading-icon").hide()}),1e3)}))},renderForm:function(e){var t,i=this,r=i.getComponentContainer("render");if(e.withOutGlobalForm){var a=i.workportalFacade.getTemplate("info-message"),o=""!==e.messageForm?e.messageForm:i.resources.getResource("render-without-globalform");void 0!==i.params&&void 0!==i.params.isOfflineForm&&1==i.params.isOfflineForm&&(o=bizagi.util.getMessageFromNetworkState(i.dataService.online)),$.tmpl(a,{message:o}).appendTo(r),(t=$.Deferred()).fail()}else{var s=null!=_typeof(i.dataService.serviceLocator.proxyPrefix)?i.dataService.serviceLocator.proxyPrefix:"",n=null!=_typeof(i.dataService.database)?i.dataService.database:"",c=i.rendering=new bizagi.rendering.facade({proxyPrefix:s,database:n});t=c.execute($.extend(e,{canvas:r,menu:i.menu})),r.bind("routing",(function(e,t){var r={action:bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,idCase:i.params.idCase,fromTask:i.params.fromTask||i.params.idTask,fromWorkItemId:i.params.fromWorkItemId||i.params.idWorkitem,isOfflineForm:i.params.isOfflineForm,formsRenderVersion:i.params.formsRenderVersion,onClose:function(){i.publish("changeWidget",{widgetName:bizagi.workportal.currentInboxView})}};r=$.extend(r,t),i.publish("executeAction",r)})),r.bind("oldrenderintegration",(function(){if(null==bizagi.oldrenderevent){bizagi.oldrenderevent=!0;var e=window.addEventListener?"addEventListener":"attachEvent";(0,window[e])("attachEvent"==e?"onmessage":"message",(function(e){e.stopPropagation(),i.publish("executeAction",{action:bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,idCase:e.data})}),!1)}i.publish("changeWidget",{widgetName:bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_OLDRENDERINTEGRATION,idCase:i.params.idCase,idWorkitem:i.params.idWorkitem,idTask:i.params.idTask,onlyUserWorkItems:i.params.onlyUserWorkItems,referrer:i.params.referrer,eventAsTasks:i.params.eventAsTasks})}))}return i.renderingFacade=c,i.resizeLayout(),t},routingExecute:function(e){if(null==e)return!1;var t=e.find("#idCase").val()||this.params.idCase,i=e.find("#idWorkflow").val()||this.params.idWorkflow,r=e.find("#idWorkItem").val()||e.parent().find("#idWorkItem").val(),a=e.find("#idTask").val(),o=e.find("#eventAsTasks").val()||!1;return this.publish("executeAction",{action:bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,idCase:t,idWorkflow:i,idWorkItem:r,idTask:a,eventAsTasks:o}),!0},dispose:function(){var e=this;setTimeout((function(){e.rendering&&(e.rendering.canvas.off(),e.rendering.dispose())}),bizagi.override.disposeTime||50),e._super()}}),bizagi.workportal.widgets.widget.extend("bizagi.workportal.widgets.newCase",{},{getWidgetName:function(){return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_NEWCASE},renderContent:function(){var e=this.getTemplate("newCase");return this.content=$.tmpl(e)},createNewCase:function(e,t){var i=this,r=new $.Deferred;return bizagi.loader.start("rendering").then((function(){bizagi.loader.start("plans-view").then((function(){$.when(i.dataService.startProcess({idProcess:e,isAdhocProcess:t})).then((function(e){i.onStartProcessDone(e),r.resolve(e)})).fail(r.reject)}))})),r.promise()},createNewCaseWithIdOrganization:function(e,t){var i=this,r=new $.Deferred;return bizagi.loader.start("rendering").then((function(){bizagi.loader.start("plans-view").then((function(){$.when(i.dataService.startProcess({idProcess:e,idOrganization:t})).then((function(e){$.extend(e,{idOrganization:t}),i.onStartProcessDone(e),r.resolve(e)}))}))})),r.promise()},onStartProcessDone:function(e){this.publish("executeAction",{action:bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,idCase:e.caseInfo.idCase,radNumber:e.radNumber,formsRenderVersion:void 0!==e.caseInfo.isOfflineForm?e.caseInfo.formsRenderVersion:0,isOfflineForm:void 0!==e.caseInfo.isOfflineForm&&e.caseInfo.isOfflineForm,data:e})}}),bizagi.workportal.widgets.widget.extend("bizagi.workportal.widgets.subMenu",{},{getWidgetName:function(){return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_SUBMENU},renderContent:function(){var e=this.workportalFacade.getTemplate("menu.submenu");return this.content=$.tmpl(e)}}),bizagi.workportal.widgets.widget.extend("bizagi.workportal.widgets.listCases",{},{getWidgetName:function(){return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_LISTCASES},setTableHeadFixed:function(e){e.TableElement.floatThead(e.floatOptions),e.groupByCaseNumber&&bizagi.util.isIE()&&e.TableElement.find("tbody > tr.ui-bizagi-wp-app-inbox-grouped-trtag-hide").hide()},_startQuickActions:function(){var e=void 0!==this.quickActionsInstance,t={getContainerSelector:this.getQuickActionContainerSelector.bind(this),checkAllSelector:this.getQuickActionCheckAllContainerSelector(),refreshShowedResults:this.updateResults.bind(this)};e||(this.quickActionsInstance=new bizagi.workportal.widgets.quickActions(this.workportalFacade,this.dataService,t))},updateResults:function(){var e=bizagi.util.tryCatch((function(){return bizagi.referrerParams.changeProcessOptions}),{});this.changeProcess(e)},_QuickActionsRenderIn:function(e,t,i){var r=e.find("#contentQuickActions");this.quickActionsInstance.setDataToExecute(t,i),this.quickActionsInstance.renderIn(r),this.quickActionsInstance.renderCheckboxGroup(e)},_getWorkItemsInfo:function(e,t){for(var i={},r=this._getIndexFromTableColumn(e,"order","T_IDTASK"),a=this._getIndexFromTableColumn(e,"order","T_RADNUMBER"),o=0;o<t.length&&-1!==r;o++)for(var s=t[o].fields,n=s[r].workitems,c=0;c<n.length&&-1!==a;c++){var d=n[c];d.idCase=t[o].id,d.caseNumber=s[a],i[d.idWorkItem]=d}return i},_getIndexFromTableColumn:function(e,t,i){return e.findIndex((function(e){return e[t].toUpperCase()===i}))},getQuickActionCheckAllContainerSelector:function(){return"#ui-quickActions-all-processes"},getQuickActionContainerSelector:function(e){return"#ui-quickActions-checkbox-"+e},showCase:function(e,t){var r=this,a=r.getContent(),o=$("#contentDesc",a),s={},n="";r.idCase=e,o.empty(),0!=r.idCase&&$.when(r.dataService.summaryCaseDetails({idCase:r.idCase})).done((function(c){var d=null,l=!1;c.isAdhocProcess&&void 0!==c.isAdhocProcess||(c.isAdhocProcess=!1),c.isAdhocProcess&&(d=c.idAdhocProcess,l=!0),c.hasComments="true"==c.hasComments;var u=new bizagi.workportal.command.security(r.dataService);c.graphicQuery=u.checkSecurityPerm("GraphicQuery"),c.enableFeatureShowTimelineButton=bizagi.override.enableFeatureShowTimelineButton,c.enableTimelineByProcessType=r.isAvailableTimelineByProcessType(c.isAdhocProcess),c.currentState&&c.currentState.length>0&&c.currentState.forEach((function(e){e.idTask||(e.idTask=0),e.state||(e.state=e.displayName||" ")})),"undefined"!==c.process&&""!==c.process&&void 0!==c.process||(c.process=!1),"undefined"!==c.processPath&&""!==c.processPath&&void 0!==c.processPath||(c.processPath=!1);var p=$.tmpl(r.caseSummaryTemplate,$.extend(c,{security:bizagi.menuSecurity})).appendTo(o);r.callTaskDescription(c,p),bizagi.util.formatInvariantDate(a,r.getResource("dateFormat")+" "+r.getResource("timeFormat")),$("#details",p).delegate(".summaryLink","click",(function(){r.routingExecute($(this)),g.dialog("close")}));var g=p;$("#ui-bizagi-details-tabs",a).tabs({active:-1,create:function(e,t){$(this).tabs("option","active",0)},activate:function(e,t){switch(null==t?"formSummary":t.newPanel.attr("id")){case"comments":null==s.comments&&($.extend(r,{},bizagi.workportal.comments),c.canvas=$("#comments"),c.readOnly=!0,$.when(r.renderComments(c)).done((function(e){s.comments=e}))),bizagi.util.setContext({commentsFocus:!0});break;case"formSummary":if(null==s.formSummary){var a=$("#formSummary",o);a.bind("oldrenderintegration",(function(e){if(!e.isPropagationStopped()){e.stopPropagation();var t=r.getTemplate("inbox-common-case-summary-oldrender"),o={};bizagi.oldrenderevent=!0;var s=window.addEventListener?"addEventListener":"attachEvent";(0,window[s])("attachEvent"==s?"onmessage":"message",(function(e){e.stopPropagation(),r.publish("executeAction",{action:bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,idCase:e.data})}),!1),$.when(r.dataService.getWorkitems({idCase:r.idCase,onlyUserWorkItems:!0,eventAsTasks:!0})).done((function(e){if("object"==_typeof(e.workItems)&&e.workItems.length>=1){var s=e.workItems[0].idWorkItem,n=e.workItems[0].idTask;for(i=0;i<e.workItems.length;i++)if(e.workItems[i].idCase==r.idCase){s=e.workItems[i].idWorkItem,n=e.workItems[i].idTask;break}o.url=r.dataService.serviceLocator.getUrl("old-render")+"?PostBack=1&idCase="+r.idCase+"&idWorkitem="+s+"&idTask="+n+"&isSummary=1"}else o.url=r.dataService.serviceLocator.getUrl("old-render")+"?PostBack=1&idCase="+r.idCase+"&isSummary=1";a.empty(),$.tmpl(t,o).appendTo(a),r.iframeOldRender($("iframe",a))}))}}));var d={idCase:r.idCase};$.when(r.dataService.getCaseFormsRenderVersion(d)).done((function(e){1==e.formsRenderVersion?a.trigger("oldrenderintegration"):$.when(r.renderSummaryForm($("#formSummary",p))).done((function(){n=$("#formSummary",p).html(),s.formSummary=n}))}))}break;case"subprocess":null==s.subprocess&&$.when(r.dataService.summarySubProcess({idCase:r.idCase})).done((function(e){(n=$.tmpl(r.caseSummaryTemplateSubprocess,e)).appendTo($("#subprocess",p)),s.subprocess=n,n.delegate(".summaryLink","click",(function(){r.routingExecute($(this)),g.dialog("close")}))}));break;case"assignees":null==s.assignees&&$.when(r.dataService.summaryAssigness({idCase:r.idCase,preview:!0})).done((function(e){var t=[];$.each(e.events.split(", "),(function(e,i){-1===$.inArray(i,t)&&t.push(i)})),e.events=t.join(", "),(n=$.tmpl(r.caseSummaryTemplateAssigness,e)).appendTo($("#assignees",p)),s.assignees=n}));break;case"events":null==s.events&&$.when(r.dataService.summaryCaseEvents({idCase:r.idCase})).done((function(e){(n=$.tmpl(r.caseSummaryTemplateEvents,e)).appendTo($("#events",p)),s.events=n,n.delegate(".summaryLink","click",(function(){r.routingExecute($(this)),g.dialog("close")}))}))}}}),$(".workonitRow",p).button(),$(".js-show-timeline",p).click((function(t){var i=$.trim($(this).closest("div.ui-bizagi-wp-app-inbox-processes-title").find("span.js-case-number").text());r.showTimeLine({radNumber:i,idCase:e})})),$("#ui-bizagi-wp-app-inbox-description-container .ui-bizagi-wp-app-inbox-cases-ico-view",a).click((function(){l?r.showGraphicQuery({idCase:e,idWorkflow:t,isAdhoc:!0,idProcess:d}):r.showGraphicQuery({idCase:e,idWorkflow:t})})),$(".workonitRow",p).click((function(){g.dialog("close");var e=$(this).parent().find("#idWorkItem").val();r.publish("executeAction",{action:bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,idCase:r._getIdCase(c,e),idWorkflow:t,idTask:$(this).parent().find("#idTask").val(),idWorkItem:e})}));var m={};m[bizagi.localization.getResource("workportal-case-dialog-box-close")]=function(){o.empty(),p.remove(),$("#ui-bizagi-wp-app-inbox-description-container").remove()},g.dialog({modal:!0,title:c.process,width:1e3,height:600,draggable:!0,resizable:!0,buttons:m,close:function(){o.empty(),p.remove(),$("#ui-bizagi-wp-app-inbox-description-container").remove()}})}))},_getIdCase:function(e,t){var i=$.grep(e.currentState,(function(e){return e.idWorkItem==t}))[0];return i&&void 0!==i.idCase?i.idCase:e.idCase},callTaskDescription:function(e,t){var i={classNeedsModal:"task_description_needs_modal",width:720};new bizagi.workportal.widgets.task.description(this.workportalFacade,this.dataService,i).renderManyTasksDescription(e.currentState,t)},renderSummaryForm:function(e){var t=this,i=void 0!==t.dataService.serviceLocator.proxyPrefix?t.dataService.serviceLocator.proxyPrefix:"";bizagi.loader.start("rendering").then((function(){var r=new bizagi.rendering.facade({proxyPrefix:i});r.execute({canvas:e,summaryForm:!0,idCase:t.idCase}),t.renderingFacade=r,setTimeout((function(){t.resizeLayout()}),1e3)}))},isAvailableTimelineByProcessType:function(e){return!e||e&&bizagi.util.isEnableFeature("enableTimelineOnLiveProcesses")}}),bizagi.workportal.widgets.listCases.extend("bizagi.workportal.widgets.search",{},{getWidgetName:function(){return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_SEARCH},renderContent:function(){var e=this.workportalFacade.getTemplate("search");return this.content=$.tmpl(e)},routingExecute:function(e){if(null==e)return!1;var t=e.find("#idCase").val(),i=e.find("#idWorkItem").val(),r=e.find("#idTask").val(),a=e.find("#eventAsTasks").val()||!1;this.publish("executeAction",{action:bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,idCase:t,idWorkItem:i,idTask:r,eventAsTasks:a})}}),bizagi.workportal.widgets.widget.extend("bizagi.workportal.widgets.queries",{},{getWidgetName:function(){return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_QUERIES},renderContent:function(){var e=this.getTemplate("queries"),t=this.content=$.tmpl(e);return this.loadtemplates(),t},loadtemplates:function(){}}),bizagi.workportal.widgets.listCases.extend("bizagi.workportal.widgets.queryform",{},{getWidgetName:function(){return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_QUERYFORM},renderContent:function(){bizagi.util.parseBoolean(bizagi.override.disableFrankensteinQueryForms)&&!this.params.notMigratedUrl?this.modifiedRender():this.frankensteinRenderContent()},modifiedRender:function(){var e,t=this.getTemplate("queryform-wrapper");return e=this.content=$.tmpl(t,{}),this.loadtemplates(),e},loadtemplates:function(){},frankensteinRenderContent:function(){var e=this.getTemplate("queryform"),t="",i=this.params.idQueryForm||"",r=this.params.idStoredQuery||"",a=this.params.idCube||"";switch(this.params.queryFormAction){case"edit":t=this.dataService.getUrl({endPoint:"query-form-edit"})+"?idStoredQuery="+r+"&idQueryForm="+i;break;case"loadPrevious":t="App/ListaDetalle/listaitems.aspx?"+this.dataService.lastQueryFullKey;break;default:t=this.dataService.getUrl({endPoint:"query-form"})+"?idQueryForm="+i,t=""!=r?t+"&idStoredQuery="+r:t,t=""!=a?t+"&idCube="+a:t}return this.params.notMigratedUrl&&(t="App/"+this.params.notMigratedUrl),this.content=$.tmpl(e,{queryFormURL:t})}}),bizagi.workportal.widgets.widget.extend("bizagi.workportal.widgets.genericiframe",{},{getWidgetName:function(){return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_GENERICIFRAME},init:function(e,t,i){this._super(e,t,i),this.loadTemplates({genericiframe:bizagi.getTemplate("bizagi.workportal.desktop.widget.genericiframe"),useNewEngine:!1})},renderContent:function(){var e=this.getTemplate("genericiframe"),t={widgetURL:this.params.widgetURL};return this.content=$.tmpl(e,t)}}),bizagi.workportal.widgets.widget.extend("bizagi.workportal.widgets.async",{ASYNC_CHECK_TIMER:3e3},{init:function(e,t,i){this._super(e,t,i)},getWidgetName:function(){return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ASYNC},renderContent:function(){var e=new $.Deferred;return this.checkAsycnExecutionState(e),e.promise()},checkAsycnExecutionState:function(e){var t=this;$.when(t.dataService.getAsynchExecutionState({idCase:t.params.idCase})).done((function(i){var r=t.getTemplate("async");"Error"==i.state&&null!=i.errorMessage&&(i.errorMessage=bizagi.localization.getResource("render-async-error")),t.content=$.tmpl(r,i),"Processing"==i.state?0==i.errorMessage.length&&setTimeout((function(){t.publish("changeWidget",t.params)}),t.Class.ASYNC_CHECK_TIMER):"Finished"==i.state&&t.publish("executeAction",{action:bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,idCase:t.params.idCase}),e.resolve(t.content)}))}}),bizagi.workportal.controllers.main.extend("bizagi.workportal.controllers.main",{},{init:function(e,t){this._super(e,t),this.staker=[]},postRender:function(){},cleanWidgets:function(){bizagi.workportal.smartphone.widgets.dialog&&bizagi.workportal.smartphone.widgets.dialog.instance&&(bizagi.workportal.smartphone.widgets.dialog.instance.dontClose=!1,bizagi.workportal.smartphone.widgets.dialog.instance.close())},setWidget:function(e){var t=this.getMenu(),i=this.getComponentContainer("workarea");this.staker=[],this.cleanWidgets(),i&&i.empty(),t&&t.emptySuscribers&&t.emptySuscribers(),this.pushWidget(e)},pushWidget:function(e){this._super(e),this.pushWorkArea(e)},popWidget:function(e){this._super(e),this.popWorkarea(e)},pushWorkArea:function(e){var t=this,i=t.workarea;if(i)var r,a=setInterval((function(){(r=t.getComponentContainer("workarea"))&&(clearInterval(a),bizagi.util.isEmpty(t.currentWidget)||"none"==t.currentWidget||(t.currentWidgetParams=$.extend({},t.currentWidgetParams,{menu:t.getMenu()}),$.when(t.workportalFacade.getWidget(t.currentWidget,t.currentWidgetParams)).pipe((function(e){return i.setWidget(e),i.render()})).done((function(){var e=i.getContent();e&&(e.appendTo(r),t.pushStaker(e.data("bizagi-component"),e),t.publish("onWidgetIncludedInDOM"))}))))}),500)},pushStaker:function(e,t){var i=this.staker;(i.push({dataElement:e,renderContent:t}),i.length>=2)&&i[i.length-2].renderContent.hide()},popWorkarea:function(e){var t=this.staker;if(e.componentPop&&e.componentPush){for(index in t)t[index].dataElement==e.componentPush&&($(t[index].renderContent).triggerHandler("activateWidget"),t[index].renderContent.show());this.staker=jQuery.grep(this.staker,(function(t){return t.dataElement==e.componentPop&&(t.renderContent.hide(),t.renderContent[0].parentNode&&t.renderContent[0].parentNode.removeChild(t.renderContent[0])),t.dataElement!=e.componentPop}))}else if(e.componentPop){if(!(t.length>1))return this.popWorkarea(e.componentPop,"workportal");t[t.length-2].renderContent.show(),$(t[t.length-2].renderContent).triggerHandler("activateWidget"),this.staker=jQuery.grep(this.staker,(function(t){return t.dataElement==e.componentPop&&(t.renderContent.hide(),t.renderContent[0].parentNode.removeChild(t.renderContent[0])),t.dataElement!=e.componentPop}))}},lengthStaker:function(){return this.staker.length},showDialogWidget:function(e){var t=new bizagi.workportal.smartphone.widgets.dialog(this.dataService,this.workportalFacade);return t.renderWidget(e),bizagi.workportal.smartphone.dialogStack=bizagi.workportal.smartphone.dialogStack||[],bizagi.workportal.smartphone.dialogStack.push(t),t},closeCurrentDialog:function(e){(bizagi.workportal.smartphone.dialogStack=bizagi.workportal.smartphone.dialogStack||[],bizagi.workportal.smartphone.dialogStack.length>0)&&bizagi.workportal.smartphone.dialogStack.pop().close();bizagi.closeQuirksModePopup()},appendWidgetTo:function(e){var t;$.when(this.workportalFacade.getWidget(e.widgetName,e)).pipe((function(i){return(t=i).render(e)})).done((function(){var i=t.getContent();$(e.options.appendToElement).append(i)}))},executeAction:function(e){this.workportalFacade.getAction(e.action).execute(e)},renderWorkarea:function(){var e=this.workarea;if(e){var t=this.getComponentContainer("workarea");this.cleanWidgets(),t.empty(),bizagi.util.isEmpty(this.currentWidget)||"none"==this.currentWidget||(this.currentWidgetParams=$.extend({},this.currentWidgetParams,{menu:this.getMenu()})),this.loadWidgetFromFacade(e,t)}}}),function(e){var t,i,r={},a=document,o=window,s=a.documentElement,n=e.expando,c=[];function d(){var n,c,d,l,u=e(),p=0;if(e.each(r,(function(e,t){var i=t.data.selector,r=t.$element;u=u.add(i?r.find(i):r)})),n=u.length)for(t=t||((l={height:o.innerHeight,width:o.innerWidth}).height||!(c=a.compatMode)&&e.support.boxModel||(l={height:(d="CSS1Compat"===c?s:a.body).clientHeight,width:d.clientWidth}),l),i=i||{top:o.pageYOffset||s.scrollTop||a.body.scrollTop,left:o.pageXOffset||s.scrollLeft||a.body.scrollLeft};p<n;p++)if(e.contains(s,u[p])){var g,m,f,h=e(u[p]),y={height:h.height(),width:h.width()},v=h.offset(),b=h.data("inview");if(!i||!t)return;v.top+y.height>i.top&&v.top<i.top+t.height&&v.left+y.width>i.left&&v.left<i.left+t.width?(f=(g=i.left>v.left?"right":i.left+t.width<v.left+y.width?"left":"both")+"-"+(m=i.top>v.top?"bottom":i.top+t.height<v.top+y.height?"top":"both"),b&&b===f||h.data("inview",f).trigger("inview",[!0,g,m])):b&&h.data("inview",!1).trigger("inview",[!1])}}e.event.special.inview={add:function(t){r[t.guid+"-"+this[n]]={data:t,$element:e(this)}},remove:function(e){try{delete r[e.guid+"-"+this[n]]}catch(e){}},startObserver:function(){c.push(setInterval(d,500))},stopObserverandDestroy:function(){e.when(e.each(c,(function(e,t){window.clearInterval(t)}))).done((function(){c=[],r={}}))},resetObserver:function(){e.event.special.inview.stopObserverandDestroy(),e.event.special.inview.startObserver()}},e(o).bind("scroll resize",(function(){t=i=null}))}(jQuery),function(e,t,i,r){e.fn.starNotification=function(t){return t=e.extend({},e.fn.starNotification.options,t),this.each((function(){var i=e("<div></div>").addClass("star-notification"),r=e('<span class="bz-cm-icon"></span>').addClass(t.typeIcon),a=e("<label></label>");a.text(t.starLabel),i.append(r).append(a),e("body").append(i),setTimeout((function(){e(".star-notification").remove()}),t.fadeOutTime)}))},e.fn.starNotification.options={fadeOutTime:700,typeIcon:"default",starLabel:"Starred"}}(jQuery,window,document),bizagi.workportal.controllers.menu.extend("bizagi.workportal.controllers.menu",{},{init:function(e,t){this._super(e,t),this.observerList=[],this.notifyObserverAll=!1},postRender:function(){var e=this;e.getContent();e.initMenu(),$.when(e.initContextualButtons()).done((function(){e.renderMenuItems(),e.activeNavigation()}))},toogleMenu:function(e){var t=this,i=t.getContent();if($(".bz-wp-components-container:visible",i).hide(),$(".bz-wp-mu-btn",i).hasClass("show")||e&&"hide"==e)return $(".bz-wp-menu-background",i).hide(),$(".bz-wp-menu-expand",i).hide(),$(".bz-menu-visible-bar",i).removeClass("bz-menu-active"),$(".bz-wp-mu-btn",i).removeClass("show"),$(".ui-bizagi-workportal-workarea").removeClass("bz-wp-wa-hiddenWorkportal"),void $(".bz-wp-menu-expand",i).hide();$(".bz-wp-menu-background",i).show(),$(".bz-wp-menu-expand",i).show(),$(".bz-menu-visible-bar",i).addClass("bz-menu-active"),$(".bz-wp-mu-btn",i).addClass("show"),$(".bz-wp-menu-expand",i).show(),$(".bz-wp-menu-background").unbind("click.menu").one("click.menu",(function(){t.toogleMenu()}))},toogleContainerButtons:function(e){var t=this.getContent();$(".bz-wp-menu-background",t).toggle(),$(".bz-wp-components-container",t).toggle(),$(".bz-wp-menu-background").unbind("click.menubtns").one("click.menubtns",(function(){$(".bz-wp-menu-background",t).hide(),$(".bz-wp-components-container",t).hide()}))},initMenu:function(){var e=this,t=e.getContent();$(".bz-wp-mu-btn",t).bind("click",(function(){e.toogleMenu()}))},renderMenuItems:function(){var e=this,t=e.getContent(),i=e.workportalFacade.getTemplate("menu.items");$.when(e.getSecurityMenu()).done((function(r){r.authCurrentUserAdministration=!1,r.authAnalysisReports=!1,r.authAdmin=!1,r.enableLogOut=!bizagi.util.isCordovaSupported(),$.tmpl(i,r).appendTo("div.menu-items",t),$(t).delegate(".bz-wp-mu-back-container","click",(function(t){t.preventDefault(),e.notifyObservers("back"),e.toogleMenu("hide")})),$(t).delegate(".bz-wp-mu-search-conatiner","click",(function(t){t.preventDefault(),e.componentsMenuF.searchComponent.show(),e.componentsMenuF.dynamiComponent.hide(),e.toogleContainerButtons(),e.notifyObservers("search")})),$(t).delegate(".bz-wp-mu-btn-custom","click",(function(t){t.preventDefault(),e.notifyObservers("buttom")})),$(t).delegate(".bz-wp-mu-btn-dynamic","click",(function(t){t.preventDefault(),e.componentsMenuF.searchComponent.hide(),e.componentsMenuF.dynamiComponent.show(),e.toogleContainerButtons()})),$(t).delegate(".new-case","click",(function(t){t.stopPropagation(),e.emptySuscribers(),$.event.special.inview.stopObserverandDestroy(),e.changeContextualButtons("search"),e.publish("changeWidget",{widgetName:bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_NEWCASE})})),$(t).delegate(".inbox-shortcut","click",(function(t){t.stopPropagation(),e.emptySuscribers(),e.changeContextualButtons("search"),$.event.special.inview.stopObserverandDestroy(),e.publish("changeWidget",{widgetName:bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX})})),$(t).delegate("#preferences","click",(function(t){t.preventDefault(),e.emptySuscribers()})),$(t).delegate(".bz-wp-mu-nc-conatiner","click",(function(t){t.preventDefault(),e.emptySuscribers(),e.publish("changeWidget",{widgetName:bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_NEWCASE})})),$(t).delegate(".bz-wp-mu-input-search-menu","keypress",(function(i){13==i.keyCode&&(i.preventDefault(),e.emptySuscribers(),$.when(e.publish("executeAction",{action:bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_SEARCH,radNumber:$(".bz-wp-component-search >.bz-wp-mu-input-search-menu",t).val(),onlyUserWorkItems:!1})).done((function(){$(".bz-wp-component-search >.bz-wp-mu-input-search-menu",t).val(""),$(".bz-wp-mu-search-conatiner").click()})))}))})),$(t).delegate(".bz-wp-component-dynamic-btn > .bz-wp-mu-buttons","click",(function(t){e.toogleContainerButtons(),e.notifyObservers("dynamic",{ordinal:$(this).data("bz-ordinal")})})),$(t).delegate(".logout","click",(function(){$.when(e.dataService.logoutUser()).always((function(t){e.defaultLogout()}))})),$(t).delegate(".settings-shortcut","click",(function(e){e.stopPropagation(),"smartphone_android"==bizagi.detectDevice()&&bizagi.util.isCordovaSupported()&&(console.log("Show Android preferences"),window.Bizagi.showSettingsActivity())}))},defaultLogout:function(){bizagi.util.isCordovaSupported()?window.location=bizagi.services.ajax.logoutPage:window.location.replace(""),localStorage.removeItem("inbox")},dynamicButtons:function(e){var t=this.getContent(),i=this.workportalFacade.getTemplate("menu.dynamic");return $("div.bz-wp-component-dynamic-btn",t).empty(),$.tmpl(i,{buttons:e}).appendTo("div.bz-wp-component-dynamic-btn")},getSecurityMenu:function(){var e=this,t={},i=new $.Deferred;e.security={},e.jsonSecurityList={};var r="smartphone_android"===bizagi.detectDevice()&&bizagi.util.isCordovaSupported();return $.when(e.dataService.getMenuAuthorization()).done((function(a){e.convertSecurityData(a),e.jsonSecurityList=a,t.authNewCase=e.security.NewCase||!1,t.enableSettings=r||!1,t.enableNativeAppLauncher=bizagi.util.isNativeAppLauncherSupported()&&bizagi.util.isCordovaSupported(),t.authAnalysisReports=e.checkRootCategory(a,"AnalysisReports"),t.authAdmin=e.checkRootCategory(a,"Admin"),t.authCurrentUserAdministration=e.security.CurrentUser,$.each(e.security,(function(e,i){t[e]=i})),i.resolve(t)})),i.promise()},convertSecurityData:function(e){for(var t in e=e||{})e.hasOwnProperty(t)&&("object"==_typeof(e[t])?this.convertSecurityData(e[t]):null!=e[t]&&(this.security[e[t]]=!0))},checkRootCategory:function(e,t){if(null!=e.permissions)for(var i=0;i<e.permissions.length;i++)if(null!=e.permissions[i][t])return!0;return!1},activeNavigation:function(){var e=this,t=e.getContent();e.navigateElement=t.find(".bz-wp-header-title >span:first-child"),e.subscribe("notifiesNavigation",(function(t,i){e.notifyNavigation(t,i)}))},initContextualButtons:function(){var e=this.getContent();this.componentsMenuF={searchComponent:$(".bz-wp-component-search",e),dynamiComponent:$(".bz-wp-component-dynamic-btn",e)},this.buttonsContextual={},this.buttonsContextual.search=$(".bz-wp-mu-search-conatiner",e),this.buttonsContextual.button=$(".bz-wp-mu-btn-custom",e),this.buttonsContextual.back=$(".bz-wp-mu-back-container",e),this.buttonsContextual.dynamic=$(".bz-wp-mu-btn-dynamic",e),this.buttonsContextual.back.css("visibility","hidden")},changeContextualButtons:function(e,t){if(void 0!==this.buttonsContextual)switch(e){case"search":this.buttonsContextual.search.show(),this.buttonsContextual.button.hide(),this.buttonsContextual.dynamic.hide();break;case"button":this.buttonsContextual.search.hide(),this.buttonsContextual.button.show(),this.buttonsContextual.dynamic.hide(),t&&0==t.visible&&this.buttonsContextual.button.hide();break;case"dynamic":this.buttonsContextual.search.hide(),this.buttonsContextual.button.hide(),this.buttonsContextual.dynamic.show();break;case"back":if(t&&1==t.visible){if("visible"==this.buttonsContextual.back.css("visibility"))return;this.buttonsContextual.back.css("visibility","visible")}else t&&0==t.visible?this.buttonsContextual.back.css("visibility","hidden"):this.buttonsContextual.back.css("visibility","visible");break;case"refresh":t.search&&this.changeContextualButtons("search"),t.button&&this.changeContextualButtons("button"),t.back&&this.changeContextualButtons("back"),t.dynamic&&this.changeContextualButtons("dynamic");break;case"disable":this.buttonsContextual.search.hide(),this.buttonsContextual.button.hide(),this.buttonsContextual.dynamic.hide(),this.buttonsContextual.back.css("visibility","hidden")}},getActualStateContextualButtons:function(){return void 0!==this.buttonsContextual&&{search:this.buttonsContextual.search.is(":visible"),button:this.buttonsContextual.button.is(":visible"),back:"visible"==this.buttonsContextual.back.css("visibility"),dynamic:this.buttonsContextual.dynamic.is(":visible")}},notifyNavigation:function(e,t){var i=this.getContent();void 0!==t&&(this.navigateElement.html(t.message),"smartphone_android"==bizagi.detectDevice()&&$(".bz-cm-icon.bz-wp-header-arrow",i).css("left",$(".bz-wp-titleCase",i).width()+"px"))},setTypeObserver:function(e){this.notifyObserverAll=e},nextSuscribe:function(e,t){return this.changeContextualButtons("back",{visible:!0}),this.observerList.push({key:e,callback:t,beforeButtons:this.getActualStateContextualButtons()})},emptySuscribers:function(){this.observerList=[],this.changeContextualButtons("back",{visible:!1})},undoRemoveLastSuscriber:function(){null!=this.lastElementRemoveHistory&&(this.changeContextualButtons("back",{visible:!0}),this.observerList.push(this.lastElementRemoveHistory),this.lastElementRemoveHistory=null)},removeSuscriber:function(e,t){var i,r=this;void 0!==e&&(this.observerList=jQuery.grep(r.observerList,(function(t){return t.key==e&&(i=t.beforeButtons,r.lastElementRemoveHistory=t),t.key!=e})),(void 0===t||t)&&r.changeContextualButtons("refresh",i))},removeLastSuscriber:function(e){if("object"==_typeof(this.observerList[this.observerList.length-1])){var t=this.observerList[this.observerList.length-1].key;this.removeSuscriber(t,e)}},getLastSuscriber:function(){return"object"!=_typeof(this.observerList[this.observerList.length-1])?null:this.observerList[this.observerList.length-1]},notifyObservers:function(e,t){if(this.notifyObserverAll)for(var i in this.observerList){var r=this.observerList,a=r[i],o={index:i,action:e,key:a.key,lastKey:r[r.length-1].key};t&&(o=jQuery.extend(o,t)),self.notifiy(a.callback,o)}else this.notifyLastObserver(e,t)},notifyLastObserver:function(e,t){if("object"==_typeof(this.observerList[this.observerList.length-1])){var i=this.observerList[this.observerList.length-1],r={index:this.observerList.length-1,action:e,key:i.key,beforeButtons:i.beforeButtons};t&&(r=jQuery.extend(r,t)),this.notifiy(i.callback,r)}},notifiy:function(e,t){if(jQuery.isArray(e))for(var i in e)e[i](t);else e(t)}}),bizagi.workportal.controllers.main.extend("bizagi.workportal.controllers.main",{},{}),bizagi.workportal.widgets.inbox.extend("bizagi.workportal.widgets.inbox",{},{renderSummaryForm:function(e){var t=this,i=new $.Deferred,r=void 0!==t.dataService.serviceLocator.proxyPrefix?t.dataService.serviceLocator.proxyPrefix:"",a=new bizagi.rendering.facade({proxyPrefix:r});return a.execute({canvas:e,summaryForm:!0,idCase:t.idCase}),t.renderingFacade=a,setTimeout((function(){t.resizeLayout()}),1e3),$.when(a.ready()).done((function(){i.resolve()})),i.promise()},postRender:function(){var e=this;e.getContent();e.params.taskState=e.params.taskState||"all",$.when(e.dataService.getInboxSummary()).done((function(t){$.when(e.renderProcesses(e.params.taskState,!1)).done((function(){e.applyActionFromLocalStorage(e.getActionFromLocalStorage("inbox"))})),e.enableFilters(t)})),e.notifiesNavigation(bizagi.localization.getResource("workportal-widget-navigation-inbox"))},scrollTop:function(){setTimeout((function(){window.scrollTo(0,0)}),10)},notifiesNavigation:function(e){this.publish("notifiesNavigation",{message:e})},enablePanel:function(e){var t=this,i=t.getContent();switch(t.enablePanel.beforePanel=t.enablePanel.actualPanel,t.enablePanel.actualPanel=e,e){case"lworkflow":$("#ui-bz-wp-cases-list",i).removeClass("slide in reverse").addClass("slide out").hide(),$("#ui-bz-wp-case-summary",i).removeClass("slide in reverse").addClass("slide out").hide(),$("#bz-wp-container-workflow",i).show().removeClass("slide out reverse").addClass((t.enablePanel.beforePanel&&t.enablePanel.beforePanel,"reverse")),$(" #bz-wp-container-categories",i).removeClass("slide in reverse").addClass("slide out").hide(),$(".bz-wp-container-fts").show().removeClass("slide out reverse").addClass("slide in"),$(".bz-wp-summary-menu-bar-bottom.bz-wp-foother-static").hide(),$("#ui-bz-wp-no-results",i).hide();break;case"lcases":$("#ui-bz-wp-cases-list",i).show().removeClass("slide out reverse").addClass("slide in"),$("#ui-bz-wp-case-summary",i).removeClass("slide in reverse").addClass("slide out").hide(),$("#bz-wp-container-workflow",i).removeClass("slide in reverse").addClass("slide out").hide(),$(" #bz-wp-container-categories",i).removeClass("slide in reverse").addClass("slide out").hide(),$(".bz-wp-container-fts").show().removeClass("slide out reverse").addClass("slide in"),$(".bz-wp-summary-menu-bar-bottom.bz-wp-foother-static").hide(),$("#ui-bz-wp-no-results",i).hide(),t.enableHomeBtn($("#ui-bz-wp-cases-list .container-left",i)),t.enableFavorites(),t.getMenu().nextSuscribe(t.idWorkflow+"lcases",[function(e){"back"==e.action&&(t.getMenu().removeSuscriber(e.key,!1),$.event.special.inview.stopObserverandDestroy(),t.enablePanel("lworkflow"))},function(e){"back"==e.action&&t.getMenu().changeContextualButtons("back",{visible:!1})}]);break;case"lsummary":$("#ui-bz-wp-cases-list",i).removeClass("slide in reverse").addClass("slide out").hide(),$("#ui-bz-wp-case-summary",i).show().removeClass("slide out reverse").addClass("slide in"),$("#ui-bz-wp-case-summary",i).bind("webkitAnimationEnd",(function(){$("#ui-bz-wp-cases-list",i).removeClass("slide out").hide(),$(".bz-wp-summary-menu-bar-bottom.bz-wp-foother-static").show(),$("#ui-bz-wp-case-summary",i).unbind("webkitAnimationEnd")})),$("#bz-wp-container-workflow",i).hide(),$("#bz-wp-container-categories",i).hide(),$("#bz-wp-container-categories",i).hide(),$("#ui-bz-wp-no-results",i).hide(),t.getMenu().nextSuscribe(t.idWorkflow+"lsummary",(function(e){"back"==e.action&&(t.getMenu().removeSuscriber(e.key,!1),$.event.special.inview.stopObserverandDestroy(),t.applyActionFromLocalStorage(t.getActionFromLocalStorage("inbox")))}));break;case"hide":$("#ui-bz-wp-cases-list",i).hide(),$("#ui-bz-wp-case-summary",i).hide(),$("#bz-wp-container-workflow",i).hide(),$(" #bz-wp-container-categories",i).hide(),$("#ui-bz-wp-no-results",i).hide();break;case"noresults":$("#ui-bz-wp-cases-list",i).hide(),$("#ui-bz-wp-case-summary",i).hide(),$("#bz-wp-container-workflow",i).hide(),$(" #bz-wp-container-categories",i).hide(),$("#ui-bz-wp-no-results",i).show()}t.scrollTop()},renderProcesses:function(e,t){var i=this,r=i.getContent(),a=$.Deferred();i.taskState=e,i.onlyFavorites=t;var o=i.workportalFacade.getTemplate("inbox.container.category.elements");return $.when(i.dataService.getAllProcesses({taskState:i.taskState,onlyFavorites:i.onlyFavorites})).done((function(e){$("#bz-wp-container-categories-process",r).empty(),$.tmpl(o,e).appendTo("#bz-wp-container-categories-process"),i.subscribeWorkflowSelection(),i.enablePanel("lworkflow"),a.resolve()})),a.promise()},subscribeWorkflowSelection:function(){var e=this,t=e.getContent();$("ul[data-category] li[data-id-workflow]",t).bind("click",(function(t){t.preventDefault(),t.stopPropagation();var i=$(this).find(".workflow-name").html(),r=$(this).data("id-workflow");e.processCasesLists(r,"1",i),$.event.special.inview.startObserver()}))},processCasesLists:function(e,t,i){var r=this,a=r.getContent();$("li.moreload",a).remove();var o=r.workportalFacade.getTemplate("inbox.container.category.cases-list"),s=$("#ui-bz-wp-cases-list ul.bz-wp-list-cases",a);r.page=t,r.idWorkflow=e;var n={taskState:r.params.taskState||"all",idWorkflow:e,page:t,onlyFavorites:r.onlyFavorites||!1};$.when(r.dataService.getCasesByWorkflow(n)).done((function(e){e.lstIdCases&&0==e.lstIdCases.length||(1==e.page&&s.empty(),$.tmpl(o,e).appendTo(s),"lcases"!=r.enablePanel.actualPanel&&r.enablePanel("lcases"),r.totalPages=e.totalPages,r.suscribeCasesDelegatesMethods())})),i&&$(".bz-wp-cases-header >.container-right >span").html(i),r.setActionToLocalStorage("inbox",JSON.stringify({action:"processCasesLists",params:{idWorkflow:e,page:t>=2?--t:1,title:i},callbackOthers:"$.event.special.inview.startObserver"}))},suscribeCasesDelegatesMethods:function(){var e=this,t=e.getContent();$("li.moreload >div",t).bind("inview",(function(t,i){i&&(e.totalPages>e.page&&e.processCasesLists(e.idWorkflow,parseInt(e.page)+1),$(this).unbind("inview"),$(this).parent().hide())})),$.when($("#ui-bz-wp-cases-list ul> li[data-id-case]",t).unbind("click")).done((function(){$("#ui-bz-wp-cases-list ul> li[data-id-case]",t).bind("click",(function(t){t.preventDefault(),t.stopPropagation(),$.event.special.inview.stopObserverandDestroy();var i=$(this).closest("li").data("id-case");e.processCasesSummary(i)}))}))},processCasesSummary:function(e){var t=this,i=t.getContent();t.enablePanel("lsummary");var r=t.workportalFacade.getTemplate("inbox.container.category.cases-summary"),a=$("#ui-bz-wp-case-summary",i);$.when(t.dataService.getCaseSummary({idCase:e})).done((function(o){a.empty(),$.tmpl(r,o).appendTo(a),t.suscribreEventMoreInformationSummary(e),t.enableHomeBtn($("#ui-bz-wp-case-summary .container-left",i))}))},suscribreEventMoreInformationSummary:function(e){var t=this;t.idCaseActual=e;var i=t.getContent();$.event.special.inview.startObserver(),$(".bz-wp-summary-activity-box[data-workitem-id][data-task-id]",i).bind("click",(function(){var i=$(this).data("workitem-id"),r=$(this).data("task-id"),a=$(this).find(".activity-name").html();t.renderCase(r,i,e,a)})),$(".bz-wp-summary-activity-box[data-workitem-id][data-task-id]",i).bind("inview",(function(e,t,r){if(t){var a=$(this).data("workitem-id"),o=$(this).data("task-id");$(".bz-work_case",i).removeData("workitem-id").removeData("task-id"),$(".bz-work_case",i).data("workitem-id",a).data("task-id",o).data("activity-name",$(this).find(".activity-name").html())}})),$(".bz-work_case",i).unbind("click").bind("click",(function(){var i=$(this).data("workitem-id"),r=$(this).data("task-id"),a=$(this).data("activity-name");t.renderCase(r,i,e,a)}))},getCaseFormsRenderVersion:function(e){var t=new $.Deferred,i=0;return $.when(this.dataService.getCaseFormsRenderVersion({idCase:e})).done((function(e){i=parseInt(e.formsRenderVersion),t.resolve(i)})),t.promise()},renderCase:function(e,t,i,r){var a=this,o=a.getContent();$(o).unbind(),$(".bz-wp-summary-activity-box[data-workitem-id][data-task-id]",o).unbind("inview"),$(".bz-wp-summary-activity-box[data-workitem-id][data-task-id]",o).unbind("click"),o.bind("activateWidget",(function(){a.activeWidget(),o.unbind("activateWidget")})),$.when(a.getCaseFormsRenderVersion(i)).done((function(o){bizagi.util.smartphone.startLoading();var s=bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_RENDER;1==o&&(s=bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_OLDRENDERINTEGRATION),a.publish("pushWidget",{widgetName:s,idCase:i,idWorkitem:t,idTask:e,message:r,fromTask:e})})),$.event.special.inview.stopObserverandDestroy(),a.scrollTop(),a.notifiesNavigation(r)},enableHomeBtn:function(e){var t=this,i=t.getContent();$(".bz-cm-icon.bz-cm-ib ",i).unbind("click"),$(e).click((function(){t.getMenu().notifyObservers("back"),$(this).unbind("click")}))},enableFilters:function(e){var t=this;t.params.summary=e;var i=$(".bz-wp-container-fts",t.getContent()).find(">ul");$(i).find(">li").bind("click",(function(e){var r=$(this).data("taskstate"),a=$(this).data("value");$(i).starNotification({starLabel:a,typeIcon:r});var o=t.params.summary[r[0].toUpperCase()+r.slice(1)];$(i).find(">li").removeClass("active"),$(this).addClass("active"),"nc"==r?(t.getMenu().emptySuscribers(),t.publish("changeWidget",{widgetName:bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_NEWCASE})):"Favorites"==r?(t.params.taskState="all",t.params.onlyFavorites=!0):(t.params.taskState=r,t.params.onlyFavorites=!1),void 0!==o&&0!=o||"Favorites"==r?t.renderProcesses(t.params.taskState,t.params.onlyFavorites):($(i).unbind("starNotification"),t.enablePanel("noresults"),bizagi.log("No results for filter"))}))},activeWidget:function(e){this.suscribreEventMoreInformationSummary(this.idCaseActual),this.getMenu().changeContextualButtons("search"),this.notifiesNavigation(bizagi.localization.getResource("workportal-widget-navigation-inbox"))},getMenu:function(){return this.menu},setActionToLocalStorage:function(e,t){bizagi.util.removeItemLocalStorage(e),bizagi.util.setItemLocalStorage(e,t)},getActionFromLocalStorage:function(e){return bizagi.util.getItemLocalStorage(e)},applyActionFromLocalStorage:function applyActionFromLocalStorage(object){var self=this;if(object){object=JSON.parse(object);var arrayVariables=[];for(var key in object.params)arrayVariables.push(object.params[key]);$.when(self[object.action].apply(self,arrayVariables)).done((function(){object.callbackOthers&&eval(object.callbackOthers)()}))}},enableFavorites:function(){var e=this,t=(e.properties,e.getContent());$("#ui-bz-wp-cases-list .bz-wp-cases-container-header span.bz-cm-icon.bz-cm-ib",t).bind("click",(function(t){t.preventDefault(),t.stopPropagation();var i=$(this);if(i.hasClass("favorite-false")){var r={idObject:i.closest("li").data("id-case"),favoriteType:"CASES"};$.when(e.dataService.addFavorite(r)).done((function(e){i.closest("li").data("idfavorites",e.idFavorites)})),i.removeClass("favorite-false").addClass("favorite-true")}else r={idObject:i.closest("li").data("idfavorites"),favoriteType:"CASES"},$.when(e.dataService.delFavorite(r)).done((function(e){i.closest("li").data("idfavorites","")})),i.removeClass("favorite-true").addClass("favorite-false")}))}}),bizagi.workportal.widgets.newCase.extend("bizagi.workportal.widgets.newCase",{SEARCH_MIN_LENGTH:3,SEARCH_DELAY:700,ACTIVATE_AUTO_CLICK_APP_WHEN_1:!0,ELEMENTS_TO_SHOW:100},{postRender:function(){var e=this;e.getContent();e.subscribe("onBackButtonClick",(function(t,i){e.publish("changeWidget",{widgetName:bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX})})),e.notifiesNavigation(bizagi.localization.getResource("workportal-widget-navigation-newcase")),e.activateAutoClickApplication=e.Class.ACTIVATE_AUTO_CLICK_APP_WHEN_1,e.renderCategories(),e.configureTreeNavigation()},notifiesNavigation:function(e){this.publish("notifiesNavigation",{message:e})},getContainer:function(){return"undefined"!=jQuery.type(this.bzwpnccontent)?this.bzwpnccontent:this.bzwpnccontent=this.getContent().find(".bz-wp-nc-content >div")},getContainerTree:function(){return this.getContent().find(".bz-wp-nc-content >ul")},getRenderedElements:function(e){var t=this.workportalFacade.getTemplate("newCase-categories");return $.tmpl(t,e).appendTo(this.getContainer())},renderCategories:function(e,t){var i=this,r=i.getContent(),a=i.getContainer(),o=i.getContainerTree(),s=i.workportalFacade.getTemplate("newCase-categories"),n=i.Class.ELEMENTS_TO_SHOW;$.when(i.dataService.getCategories({idCategory:e})).done((function(e){if(o.show(),"smartphone_ios"==bizagi.detectDevice()){var c=$(".bz-wp-categoryTree").height();$(".bz-wp-categoryTree >li:first-child").height(c+"px")}if(t){var d={category:[]};$.each(e.category,(function(e,i){i.appId==t&&(d.category=i.subCategories)})),e=d}else if(e.totalApps>1){var l={category:[]};$.each(e.category,(function(e,t){l.category.push({appId:t.appId,idCategory:"",categoryName:t.appName,isProcess:"false",description:" "})})),e=l}if(e.category.length>n){for(filterData.category={},p=0;p<=n;p++)filterData.category[p]=e.category[p];filterData.truncate=!0,categoryContent=$.tmpl(s,filterData),categoryContent.appendTo(a),i.loadAllElementEvent(e)}else filterData=e,categoryContent=$.tmpl(s,filterData),categoryContent.appendTo(a);var u={category:[]},p=0;$.each(e.category,(function(t,i){e.category[t].label=i.categoryName,e.category[t].value=i.idCategory})),$(r).delegate("#searchNewCase","keyup",(function(t){t.stopPropagation(),0==$("#searchNewCase",r).val().length&&filtered&&(categoryContent=$.tmpl(s,filterData),categoryContent.appendTo(a),i.assignEvent(),i.loadAllElementEvent(e),filtered=!1,(u={}).category=[])})),$("#searchNewCase",r).autocomplete({messages:{noResults:null,results:function(){}},minLength:3,source:e.category,autoFocus:!0,position:{my:"left top",at:"left top",of:"body",offset:"-10 -10",collision:"none",delay:800},open:function(e,t){p=0,u.category=[]},select:function(e,t){return 1==$("#categories ul").length&&$("#categories ul").trigger("click"),!1}}).data("ui-autocomplete")._renderItem=function(t,r){return u.category[p++]=r,categoryContent=$.tmpl(s,u),categoryContent.appendTo(a),filtered=!0,i.assignEvent(categoryContent),i.loadAllElementEvent(e),!0},i.assignEvent()}))},loadAllElementEvent:function(e){var t=this,i=(t.getContent(),t.workportalFacade.getTemplate("newCase-categories")),r=t.getContainer();$(".loadMoreElements",r).click((function(a){a.stopPropagation(),$(this).find("#loadMoreElementsIcon").removeClass("plus_load_icon").addClass("loading_icon"),r.empty(),$.tmpl(i,e).appendTo(r),t.assignEvent()}))},assignEvent:function(e,t){var i=this,r=i.getContent(),a=i.getContainer(),o=e||$("li",a);$(o).click((function(e){e.stopPropagation();var t=bizagi.idCategory=$(this).data("category"),a=$(this).data("appid"),o=$(this).hasClass("bz-nc-process"),s=$(this).data("category-name")||$(this).find("h3").html();$("#searchNewCase",r).val(""),1==bizagi.util.parseBoolean(o)?($(this).prevAll("ul").fadeTo(650,0,"easeInOutCirc").slideUp({duration:300,easing:"easeInOutCirc"}),$(this).nextAll("ul").fadeTo(650,0,"easeInOutCirc").slideUp({duration:300,easing:"easeInOutCirc"}),bizagi.util.smartphone.startLoading(),i.getContainer().hide(10,(function(){})),i.getContainerTree().hide(10),$.when(i.createNewCase(t)).done((function(e){bizagi.util.smartphone.stopLoading(),e.idCase&&i.notifiesNavigation(e.workItems.length>0?e.workItems[0].displayName:"")})).fail((function(e){if(bizagi.util.smartphone.stopLoading(),e.responseText){var t=$.parseJSON(e.responseText);bizagi.showMessageBox(t.message,"Bizagi"),i.publish("changeWidget",{widgetName:bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX})}}))):i.drawProcess(t,s,a)}))},drawProcess:function(e,t,i){var r=this,a=r.getContainerTree();$.when(r.renderCategories(e,i)).done((function(o){if(""!=o){var s=r.workportalFacade.getTemplate("newCase-categories-tree");$.tmpl(s,{idParentCategory:e,categoryName:t||i,appId:i}).appendTo(a),r.configureTreeNavigation()}}))},configureTreeNavigation:function(){var e=this,t=e.getContainerTree();$("li:last-child",t).click((function(){$(this).nextAll().remove(),e.renderCategories($(this).find("> span").data("p-cat"),$(this).find("> span").data("appid"))}))},createNewCase:function(e,t,i){var r=this,a=new $.Deferred;r.workportalFacade.getTemplate("error-message"),r.getContent();return $.when(r.dataService.createNewCase({idWfClass:e,idOrganization:t,isOfflineForm:i})).done((function(e){a.resolve(e),r.publish("executeAction",{action:bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,idCase:e.idCase,formsRenderVersion:void 0!==e.isOfflineForm?e.formsRenderVersion:0,isOfflineForm:void 0!==e.isOfflineForm&&e.isOfflineForm})})).fail((function(e){a.reject(e)})),a.promise()}}),bizagi.workportal.widgets.search.extend("bizagi.workportal.widgets.search",{},{postRender:function(){var e=this,t=e.getContent();e.notifyNavigation(bizagi.localization.getResource("workportal-widget-navigation-search-results")),e.params.data.noresults?$.tmpl(e.workportalFacade.getTemplate("search-details"),e.params.data).appendTo(t):($.tmpl(e.workportalFacade.getTemplate("search-details"),e.params.data.cases,{isArray:e.isArray,isDate:e.isDate}).appendTo(t),$(".bz-wd-search-rows",t).bind("click",(function(t){t.preventDefault(),t.stopPropagation();var i=$(this).data("bizagiIdcase")||"";e.notifyNavigation(i),e.publish("executeAction",{action:bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,idCase:i,eventAsTasks:!0,onlyUserWorkItems:"false"})})),$(".bz-common-webkit-reset-ul",t).bind("click",(function(e){return e.preventDefault(),e.stopPropagation(),!1})),$("li[data-bizagi-idCase]",t).bind("click",(function(t){t.preventDefault(),t.stopPropagation();var i=$(this).data("bizagiIdcase")||"",r=$(this).data("bizagiIdworkitem")||"",a=$(this).data("bizagiIdtask")||"",o=$(this).data("bizagiTaskname")||"";e.notifyNavigation(o),e.publish("executeAction",{action:bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,idCase:i,idWorkItem:r,idTask:a,eventAsTasks:!0,onlyUserWorkItems:"false"})})))},isArray:function(e){return"object"==_typeof(e)},isDate:function(e){var t=!1;try{new Date(e).getYear()>0&&(t=!0)}catch(e){t=!1}return t},notifyNavigation:function(e){this.publish("notifiesNavigation",{message:e})}}),bizagi.workportal.widgets.routing.extend("bizagi.workportal.widgets.routing",{},{init:function(e,t,i){this._super(e,t,i)},postRender:function(){var e=this,t=e.getContent();$(".ui-bizagi-container-complexgateway:visible").hide();var i=$("#ui-bizagi-wp-app-routing-activity-wf tbody tr",t),r=$("#ui-bizagi-wp-app-routing-process-wf tbody tr",t),a=e.params.data.fromSearchWidget?"false":"true",o=e.params.data.fromSearchWidget?"true":"false";$("tr:nth-child(even)",t).addClass("event"),$(".workonitRow",t).button(),$(i).click((function(){e.showWorkitem({idCase:$(this).children(":first").children("#idCase").val(),idWorkitem:$(this).children(":first").children("#idWorkItem").val(),idTask:$(this).children(":first").children("#idTask").val(),onlyUserWorkItems:a,eventAsTasks:o,taskName:$(this).children(":first").text()}),$("#ui-bizagi-wp-app-inbox-activities-routing-wrapper").closest("div").remove(),e.publish("closeCurrentDialog")})),$(r).click((function(){e.publish("executeAction",{action:bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,idCase:$(this).children(":first").children("#idCase").val(),onlyUserWorkItems:a,eventAsTasks:o}),$("#ui-bizagi-wp-app-inbox-activities-routing-wrapper").closest("div").remove(),e.publish("closeCurrentDialog")})),$(".wp-routing-container-fother button",t).click((function(){$("#ui-bizagi-wp-app-inbox-activities-routing-wrapper").closest("div").remove(),e.publish("closeCurrentDialog"),e.publish("changeWidget",{widgetName:bizagi.workportal.currentInboxView})}))},showWorkitem:function(e){e.taskName&&this.notifiesNavigation(e.taskName),this.publish("changeWidget",{widgetName:bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_RENDER,idCase:e.idCase,idWorkitem:e.idWorkitem,idTask:e.idTask,referrer:this.params.referrer})},showAsyncWidget:function(e){this.publish("showDialogWidget",{widgetName:bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ASYNC,data:data,modalParameters:parameters})},notifiesNavigation:function(e){this.publish("notifiesNavigation",{message:e})}}),bizagi.workportal.widgets.events.extend("bizagi.workportal.widgets.events",{},{init:function(e,t,i){this._super(e,t,i)},postRender:function(){this.content=this.getContent(),this.params.options.appendToElement&&(this.content=$(this.params.options.appendToElement).append(this.content)),this.eventLinkHandler(this.params.options.events,this.params.options.attachEventsTo,this.params.options.currentIdWorkitem)},eventLinkHandler:function(e,t,i){var r=this;$(".ui-bizagi-container-events").on("click",(function(t){r.showEventsDialog(e,i)})),"form"==t?(r.showEventsLink(i),$(document).unbind("attachEventElementToForm").bind("attachEventElementToForm",(function(e,t){r.showEventsLink(t)}))):$(".ui-bizagi-container-events").css("display","block")},showEventsLink:function(e){var t=!1;$.when(this.dataService.summaryCaseEvents({idCase:this.params.options.idCase})).done((function(i){if(null!=i.events&i.events.length>0){$(".ui-bizagi-form").find(".ui-bizagi-container-events").remove();for(var r=0;r<i.events.length;r++)$.each(i.events[r],(function(i,r){e==r.idWorkitem&&(t=!0)}));if(1==i.events.length&&t);else{var a=$(".ui-bizagi-container-events").clone(!0);$(".ui-bizagi-workportal-workarea .ui-bizagi-container-children-form:first > div:last-child").length>0?$(".ui-bizagi-workportal-workarea .ui-bizagi-container-children-form:first > div:last-child").after(a):$(".ui-bizagi-workportal-workarea .ui-bizagi-container-children-form:first").after(a),$(a).css("display","block")}}}))},showEventsDialog:function(e,t){var i=this;i.dialogWidget=i.workportalFacade.getTemplate("dialog"),i.eventsWidget=i.workportalFacade.getTemplate("case-summary-events");for(var r=0;r<e.events.length;r++)$.each(e.events[r],(function(e,i){i.idWorkitem==t&&(i.hideItem=!0)}));var a=$.tmpl(i.dialogWidget),o=$.tmpl(i.eventsWidget,e);$(a).find("#ui-bizagi-wp-dialog-container").append(o),a.appendTo("body");var s=$(a).css("height"),n=$("body").css("height");(s=Number(s.substring(0,s.length-2)))<(n=Number(n.substring(0,n.length-2)))&&$(a).height($("body").css("height")),a.delegate(".eventLink","click",(function(){i.routingExecute($(this)),$("#ui-bizagi-wp-app-dialog-wrapper").closest("div").remove()})),$(".wp-dialog-container-footer button",a).click((function(){$("#ui-bizagi-wp-app-dialog-wrapper").closest("div").remove()}))}}),$.Class.extend("bizagi.workportal.smartphone.widgets.dialog",{DIALOG_WIDTH:300,DIALOG_HEIGHT:400},{init:function(e,t){this.dataService=e,this.workportalFacade=t},renderWidget:function(e){var t,i=this,r=window.document,a=new $.Deferred;return $.when(i.workportalFacade.getWidget(e.widgetName,e)).pipe((function(e){return t=e,i.register(t),t.render()})).done((function(){var o=t.getContent();void 0!==i.getResponseValues&&void 0!==i.getResponseValuesParams?i.dialogBox=$("<div />").append(o):i.dialogBox=$("<div />").append(o).appendTo("body",r),i.showDialogBox(i.dialogBox,e).done((function(e){a.resolve()}))})),a.promise()},register:function(e){e.registerCallback&&e.registerCallback(this)},showDialogBox:function(e,t){var i=new $.Deferred;if(i.resolve(),bizagi.workportal.smartphone.widgets.dialog.instance=this,void 0!==t.data&&void 0!==t.data.transitions){var r=$(".ui-bizagi-form",$("body"));1==r.length&&(r.find(".complex-frame").length>0||r.append(e))}return i.promise()},close:function(){this.dontClose||(this.dialogBox.remove(),bizagi.workportal.smartphone.widgets.dialog.instance=null)}}),bizagi.workportal.widgets.release.extend("bizagi.workportal.widgets.release",{},{init:function(e,t,i){this._super(e,t,i)},postRender:function(){var e=this;e.content=e.getContent(),$(document).unbind("attachEventElementToForm").bind("attachEventElementToForm",(function(t,i){$(".ui-bizagi-workportal-workarea .ui-bizagi-container-children-form:first > div:last-child").length>0?$(".ui-bizagi-workportal-workarea .ui-bizagi-container-children-form:first > div:last-child").after(e.content):$(".ui-bizagi-workportal-workarea .ui-bizagi-container-children-form:first").after(e.content),e.actionRelease()}))},actionRelease:function(){var e=this;$(e.content).click((function(t){var i=[{label:e.getResource("workportal-widget-dialog-box-release-ok"),action:"resolve"},{label:e.getResource("workportal-widget-dialog-box-release-cancel")}];$.when(bizagi.showConfirmationBox(e.getResource("workportal-widget-dialog-box-release"),e.getResource("render-actions-release"),"",i)).done((function(){bizagi.util.smartphone.startLoading(),$.when(e.dataService.releaseActivity({idCase:e.params.options.idCase,idWorkItem:e.params.options.idWorkitem})).done((function(t){switch(t&&t.status?t.status:"Error"){case"Success":e.publish("changeWidget",{widgetName:bizagi.workportal.currentInboxView});break;case"ConfigurationError":bizagi.showMessageBox(e.getResource("workportal-widget-dialog-box-release-configuration-error-message").replace("{0}",e.params.options.idWorkitem),e.getResource("workportal-widget-dialog-box-release-error"),"error",!1);break;case"Error":default:bizagi.showMessageBox(e.getResource("workportal-widget-dialog-box-release-error-message").replace("{0}",e.params.options.idWorkitem),e.getResource("workportal-widget-dialog-box-release-error"),"error",!1)}bizagi.util.smartphone.stopLoading()})).fail((function(){var t=e.getResource("workportal-widget-dialog-box-release-error-message").replace("{0}",e.params.options.idWorkitem);bizagi.showMessageBox(t,e.getResource("workportal-widget-dialog-box-release-error"),"error",!1),bizagi.util.smartphone.stopLoading()}))}))}))}}),bizagi.workportal.widgets.render.extend("bizagi.workportal.widgets.render",{},{init:function(e,t,i){this.menu=i.menu,this._super(e,t,i)},getMenu:function(){return this.menu},postRender:function(){},renderSummary:function(e){e.currentState&&e.currentState[0]&&e.currentState[0].allowReleaseActivity&&this.publish("appendWidgetTo",{widgetName:bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_BIZAGI_RELEASE,options:{idCase:this.params.idCase,idWorkitem:this.params.idWorkitem}});for(var t=0;t<e.currentState.length;t++)e.currentState[t].idTask==e.params.idTask&&(e.currentState[t].state?this.notifiesNavigation(e.currentState[t].state):this.notifiesNavigation(e.caseNumber));!e.params||"undefined"===e.params.referrer||e.params.referrer},showMenuComplexGateway:function(e){void 0===bizagi.cache&&(bizagi.cache={}),bizagi.cache[this.params.idCase]={idTask:this.params.idTask,idWorkitem:this.params.idWorkitem,isComplex:!0},void 0===bizagi.cache.idCaseObject&&(bizagi.cache.idCaseObject={}),void 0===bizagi.cache.idCaseObject.idCase?(bizagi.cache.idCaseObject.idCase=this.params.idCase,bizagi.cache.idCaseObject.isComplex=!0):bizagi.cache.idCaseObject.isComplex=!0,this.currentPopup="complexgateway",this.publish("showDialogWidget",{widgetName:bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_COMPLEXGATEWAY,data:{transitions:e},modalParameters:{title:"titulo",width:200,height:200},onClose:function(){}})},renderForm:function(e){var t,i=this,r=this.params,a=null!=_typeof(i.dataService.serviceLocator.proxyPrefix)?i.dataService.serviceLocator.proxyPrefix:"",o=new bizagi.rendering.facade({proxyPrefix:a}),s=i.getComponentContainer("render");if(null==this.menu)return this._super(e),!0;if(e.withOutGlobalForm){var n=i.workportalFacade.getTemplate("info-message"),c=""!==e.messageForm?e.messageForm:i.resources.getResource("render-without-globalform");return $.tmpl(n,{message:c}).appendTo(s),i.getMenu().emptySuscribers(),i.getMenu().changeContextualButtons("disable"),(t=$.Deferred()).fail(),i.attachEventsLink("noForm"),t}return $(s).bind("errorform",(function(e,t){t&&"renderItemError"==t&&(i.getMenu().removeLastSuscriber(),bizagi.util.smartphone.stopLoading()),i.getMenu().nextSuscribe(i.params.idCase,(function(e){"back"==e.action&&(i.getMenu().publish("popWidget",{widgetName:bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_RENDER,componentPop:"render",componentPush:""}),i.getMenu().changeContextualButtons("search"),i.getMenu().removeSuscriber(e.key,!1))}),(function(e){"back"==e.action&&i.getMenu().changeContextualButtons("search")}))})),$.when(t=o.execute($.extend(e,{canvas:s,menu:i.menu,processButtons:i.processButtons,getButtons:i.getButtons,postRenderEdit:i.postRenderEdit,originalParams:r}))).done((function(){bizagi.util.smartphone.stopLoading(),i.attachEventsLink("form")})),s.bind("routing",(function(e,t){var r={action:bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,idCase:i.params.idCase,idTask:i.params.idTask,idWorkitem:i.params.idWorkitem,radNumber:i.params.radNumber,fromTask:i.params.fromTask,isOfflineForm:i.params.isOfflineForm,formsRenderVersion:i.params.formsRenderVersion,onClose:function(){i.publish("changeWidget",{widgetName:bizagi.workportal.currentInboxView})}};r=$.extend(r,t),i.publish("executeAction",r)})),i.renderingFacade=o,i.resizeLayout(),t},getButtons:function(e){var t=e,i=t.properties;i.buttons=e.buttons;t.container;return i.buttons.length<=2&&null!=t.nextButton&&null!=t.saveButton?t.getMenu().getContent().find(".bz-common-webkit-reset-ul [ordinal]"):t.getMenu().dynamicButtons(i.buttons)},getEndFormButtons:function(e){return $(".ui-bizagi-button-container button",(e||this).container)},processButtons:function(e){var t,i=e,r=i.getParams(),a=i.properties;a.buttons=e.buttons,i.saveButton=null,i.nextButton=null;var o=a.buttons.length;for(t=0;t<o;t++)"save"==a.buttons[t].action&&(i.saveButton=a.buttons[t]),"next"==a.buttons[t].action&&(i.nextButton=a.buttons[t]);var s=i.getButtons();if(a.buttons=e.buttons,!s||0==s.length||0==a.buttons.length)return i.getMenu().changeContextualButtons("button",{visible:!1}),void i.getMenu().changeContextualButtons("back",{visible:!1});r.isRefresh&&i.getMenu().removeSuscriber(i.properties.id,!1),a.buttons.length<=2&&null!=i.nextButton&&null!=i.saveButton?i.getMenu().changeContextualButtons("button",{value:i.nextButton.caption}):i.getMenu().changeContextualButtons("dynamic");var n="inbox"==i.params.originalParams.referrer?"workportal":i.params.originalParams.referrer;$.when(i.getMenu().nextSuscribe(i.properties.id,(function(e){if("back"==e.action&&(null!=i.saveButton?(i.saveButton.refresh=!1,$.when(i.processButton(i.saveButton)).done((function(){$.when(i.getMenu().publish("popWidget",{widgetName:bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_RENDER,componentPop:"render",componentPush:n}),i.getMenu().changeContextualButtons("search"),i.getMenu().removeSuscriber(e.key,!1)).done((function(){"search"!=i.params.originalParams.referrer&&"newCase"!=i.params.originalParams.referrer&&"activityform"!=i.params.originalParams.referrer||i.getMenu().publish("changeWidget",{widgetName:bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX})}))})).fail((function(){bizagi.log("Fail save Action")}))):$.when(i.getMenu().publish("popWidget",{widgetName:bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_RENDER,componentPop:"render",componentPush:n}),i.getMenu().changeContextualButtons("search"),i.getMenu().removeSuscriber(e.key,!1)).done((function(){"search"!=i.params.originalParams.referrer&&"newCase"!=i.params.originalParams.referrer&&"activityform"!=i.params.originalParams.referrer||i.getMenu().publish("changeWidget",{widgetName:bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX})}))),"buttom"==e.action){var t=!bizagi.util.parseBoolean(i.nextButton.validate)||i.validationController.performValidations();i.processButton(i.nextButton),void 0===i.params.originalParams.dataComplexGateway&&t&&i.getMenu().removeSuscriber(e.key)}"dynamic"==e.action&&i.processButton(i.properties.buttons[e.ordinal])}),(function(e){e.action}))).done((function(){}))},postRenderEdit:function(e){var t=e,i=t.getFormContainer().container,r=t.properties,a=$("body").scrollTop();t.getMenu().getActualStateContextualButtons();$("#container-items-edit",i).find(".ui-bizagi-container-inputs").remove();$("#container-items-edit",i).empty(),$(".ui-bizagi-button-container",i).hide(),$(".ui-bizagi-container-complexgateway",i).hide(),setTimeout((function(){window.scrollTo(0,0)}),5),$(".ui-bizagi-container-children-form",i).removeClass("slide in reverse").addClass("slide out"),$("#container-items-edit",i).show(),$("#container-items-edit",i).removeClass("slide out reverse").addClass("slide in");var o=function(){$(".ui-bizagi-container-children-form",i).show(),$(".ui-bizagi-container-children-form",i).removeClass("slide out").addClass(" slide in reverse"),$("#container-items-edit",i).removeClass("slide in").addClass(" slide out reverse"),$(".ui-bizagi-button-container",i).show(),$(".ui-bizagi-container-complexgateway",i).show(),setTimeout((function(){window.scrollTo(0,a)}),10)};$("#container-items-edit",i).append($.tmpl(t.renderFactory.getTemplate("editRender"),{label:r.displayName})),$("#container-items-edit",i).find(".ui-bizagi-container-inputs").html(t.inputEdition);var s=t.contextEdit=$(i).find("#container-items-edit");$(".ui-bizagi-container-button-edit",s).hide(),$.when(t.getMenu().nextSuscribe(t.properties.id||t.properties.idRender,(function(e){"back"==e.action&&(t.getMenu().removeSuscriber(e.key),o()),"buttom"==e.action&&$.when(t.actionSave()).then((function(i){t.getMenu().removeSuscriber(e.key),t.properties.submitOnChange&&t.submitOnChange(),o()}),(function(i){i&&i.noAction||(t.getMenu().removeSuscriber(e.key),o())}))}))).done((function(){t.getMenu().changeContextualButtons("button",{value:bizagi.localization.getResource("confirmation-box-ok")})}))},notifiesNavigation:function(e){this.publish("notifiesNavigation",{message:e})},attachEventsLink:function(e){var t=this;$.when(t.dataService.summaryCaseEvents({idCase:t.params.idCase})).done((function(i){$(".ui-bizagi-container-events").remove(),null!=i.events&i.events.length>0?t.publish("appendWidgetTo",{widgetName:bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_BIZAGI_EVENTS,options:{appendToElement:"body",events:i,attachEventsTo:e,idCase:t.params.idCase,routingExecuteCallBack:t.routingExecuteCall,currentIdWorkitem:t.params.idWorkitem}}):$(document).unbind("attachEventElementToForm")}))}}),bizagi.workportal.widgets.async.extend("bizagi.workportal.widgets.async",{},{init:function(e,t,i){this._super(e,t,i)},postRender:function(){var e=this,t=e.getContent();$(".ui-bizagi-wp-async-goToInbox a",t).click((function(){e.publish("changeWidget",{widgetName:bizagi.workportal.currentInboxView})}))}}),bizagi.workportal.widgets.oldrenderintegration.extend("bizagi.workportal.widgets.oldrenderintegration",{},{init:function(e,t,i){this._super(e,t,i),this.taskState="all",this.icoTaskState="",this.idWorkflow=0,this.idCase=0},postRender:function(){}}),$.Class.extend("bizagi.workportal.smartphone.facade",{getWidgetImplementation:function(e){return e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX?"bizagi.workportal.widgets.inbox":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_RENDER?"bizagi.workportal.widgets.render":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_NEWCASE?"bizagi.workportal.widgets.newCase":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_SEARCH?"bizagi.workportal.widgets.search":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ROUTING?"bizagi.workportal.widgets.routing":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_BIZAGI_EVENTS?"bizagi.workportal.widgets.events":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_BIZAGI_RELEASE?"bizagi.workportal.widgets.release":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_COMPLEXGATEWAY?"bizagi.workportal.widgets.complexgateway":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_OLDRENDERINTEGRATION?"bizagi.workportal.widgets.oldrenderintegration":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ASYNC?"bizagi.workportal.widgets.async":null}},{init:function(e){this.templates={},this.dataService=e,this.setIPhoneMetaTags(),bizagi.override.enableAutoSave=!0,this.getWorkPortalVersion()},setIPhoneMetaTags:function(){$("<meta>",{name:"apple-mobile-web-app-capable",content:"yes"}).appendTo("head"),$("<meta>",{name:"viewport",content:"width=device-width, initial-scale=1.0, minimum-scale=1, maximum-scale=1, user-scalable=no"}).appendTo("head"),$("<link>",{rel:"apple-touch-icon-precomposed",href:"jquery/common/base/css/smartphone/images/BizAgi_logo.png"}).appendTo("head"),$("<link>",{rel:"apple-touch-startup-image",href:"jquery/common/base/css/smartphone/images/splash.png"}).appendTo("head")},initAsyncStuff:function(){var e=this;return bizagi.enableCustomizations=!1,bizagi.enableCustomizations?$.when(bizagi.templateService.loadCustomTemplates().pipe((function(){return e.loadTemplates()})),bizagi.util.loadFile({src:bizagi.getStyleSheet("bizagi.overrides."+bizagi.detectDevice()+".custom.styles"),type:"css"}),bizagi.util.loadFile({src:bizagi.getJavaScript("bizagi.workportal."+bizagi.detectDevice()+".overrides"),type:"js"})):$.when(e.loadTemplates())},loadTemplates:function(){var e=new $.Deferred,t="smartphone_android"==bizagi.detectDevice()?"bizagi.workportal.smartphone.android.menu":"bizagi.workportal.smartphone.menu";return $.when(this.loadTemplate("workportal",bizagi.getTemplate("bizagi.workportal.smartphone")),this.loadTemplate("menu",bizagi.getTemplate(t)+"#ui-bizagi-workportal-menu-content"),this.loadTemplate("menu.items",bizagi.getTemplate(t)+"#ui-bizagi-workportal-widget-menu-items2"),this.loadTemplate("menu.dynamic",bizagi.getTemplate(t)+"#ui-bizagi-workportal-widget-menu-custom-buttons"),this.loadTemplate("inbox",bizagi.getTemplate("bizagi.workportal.smartphone.widget.inbox")),this.loadTemplate("inbox.container.category.elements",bizagi.getTemplate("bizagi.workportal.smartphone.widget.inbox.elements")+"#bz-wp-widget-inbox-categories-process"),this.loadTemplate("inbox.container.category.cases-list",bizagi.getTemplate("bizagi.workportal.smartphone.widget.inbox.elements")+"#ui-bz-wp-widget-inbox-process-cases-list"),this.loadTemplate("inbox.container.category.cases-summary",bizagi.getTemplate("bizagi.workportal.smartphone.widget.inbox.elements")+"#ui-bz-wp-widget-inbox-process-case-summary"),this.loadTemplate("inbox.container.category.filters",bizagi.getTemplate("bizagi.workportal.smartphone.widget.inbox.elements")+"#ui-bizagi-workportal-widget-inbox-common-header"),this.loadTemplate("render",bizagi.getTemplate("bizagi.workportal.smartphone.widget.render")+"#bz-wp-widget-render"),this.loadTemplate("search",bizagi.getTemplate("bizagi.workportal.smartphone.widget.search")+"#ui-bizagi-workportal-widget-search"),this.loadTemplate("search-details",bizagi.getTemplate("bizagi.workportal.smartphone.widget.search")+"#ui-bizagi-workportal-widget-search-details"),this.loadTemplate("newCase",bizagi.getTemplate("bizagi.workportal.smartphone.widget.newCase")+"#ui-bizagi-workportal-widget-newcase"),this.loadTemplate("newCase-categories",bizagi.getTemplate("bizagi.workportal.smartphone.widget.newCase")+"#ui-bizagi-workportal-widget-newcase-categories"),this.loadTemplate("newCase-categories-tree",bizagi.getTemplate("bizagi.workportal.smartphone.widget.newCase")+"#ui-bizagi-workportal-widget-newcase-categories-tree"),this.loadTemplate("routing",bizagi.getTemplate("bizagi.workportal.smartphone.widget.routing")),this.loadTemplate("dialog",bizagi.getTemplate("bizagi.workportal.smartphone.widget.dialog")),this.loadTemplate("case-summary-events-area",bizagi.getTemplate("bizagi.workportal.smartphone.widget.events")+"#ui-bizagi-workportal-widget-case-events-container"),this.loadTemplate("case-summary-events",bizagi.getTemplate("bizagi.workportal.smartphone.widget.events")+"#ui-bizagi-workportal-widget-case-events"),this.loadTemplate("case-summary-release-area",bizagi.getTemplate("bizagi.workportal.smartphone.widget.release")+"#ui-bizagi-workportal-widget-release-container"),this.loadTemplate("complex-gateway-frame",bizagi.getTemplate("bizagi.workportal.smartphone.widget.complexgateway")+"#ui-bizagi-wp-app-complexgateway-frame"),this.loadTemplate("complex-gateway-header",bizagi.getTemplate("bizagi.workportal.smartphone.widget.complexgateway")+"#ui-bizagi-wp-app-complexgateway-header"),this.loadTemplate("complex-gateway-row",bizagi.getTemplate("bizagi.workportal.smartphone.widget.complexgateway")+"#ui-bizagi-wp-app-complexgateway-row"),this.loadTemplate("info-message",bizagi.getTemplate("common.bizagi.smartphone.info-message")),this.loadTemplate("integration-old-render",bizagi.getTemplate("bizagi.workportal.smartphone.widget.oldrenderintegration")+"#ui-bizagi-workportal-widget-oldrender"),this.loadTemplate("async",bizagi.getTemplate("bizagi.workportal.smartphone.widget.async"))).done((function(){e.resolve()})),e.promise()},loadTemplate:function(e,t){var i=this;return bizagi.templateService.getTemplate(t).done((function(t){i.templates[e]=t}))},getTemplate:function(e){return this.templates[e]},getMainController:function(){return new bizagi.workportal.controllers.main(this,this.dataService)},getMenuController:function(){return new bizagi.workportal.controllers.menu(this,this.dataService)},getWorkareaController:function(){return new bizagi.workportal.controllers.workarea(this,this.dataService)},getWidget:function getWidget(widget,params){var widgetImplementation=this.Class.getWidgetImplementation(widget);if(widgetImplementation)try{var dynamicFunction="var baDynamicFn = function(facade, dataService, params){ \r\n";return dynamicFunction+="return new "+widgetImplementation+"(facade, dataService, params);\r\n",dynamicFunction+="}\r\n",dynamicFunction+="baDynamicFn",dynamicFunction=eval(dynamicFunction),dynamicFunction(this,this.dataService,params)}catch(e){}return bizagi.log(widget+" widget not supported",params,"error"),null},getAction:function(e,t){return e==bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING?new bizagi.workportal.actions.routing(this,this.dataService,t):e==bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_SEARCH?new bizagi.workportal.actions.search(this,this.dataService,t):(bizagi.log(e+" action not supported",t,"error"),null)},getWorkPortalVersion:function(){$.when(this.dataService.getWorkPortalVersion()).done((function(e){bizagi.setWorkPortalVersion(e.version)}))}}),bizagi="undefined"!=typeof bizagi?bizagi:{},bizagi.override=void 0!==bizagi.override?bizagi.override:{},bizagi.override.customWorkportalHandlers={},bizagi.override.customizeWorkportalHandler=function(e,t){bizagi.override.customWorkportalHandlers[e]=t},bizagi.workportal.services.context&&(bizagi.workportal.services.context.original=$.extend(!0,{},bizagi.workportal.services.context.prototype),$.extend(bizagi.workportal.services.context.prototype,{getUrl:function(e){return"workportal"==this.context&&bizagi.override.customWorkportalHandlers[e]?bizagi.override.customWorkportalHandlers[e]:bizagi.workportal.services.context.original.getUrl.apply(this,arguments)}})),bizagi.override.customizeWorkportalWidget=function(widget,extensionMethod){var widgetImplementation=bizagi.workportal.desktop.facade.getWidgetImplementation(widget);widgetImplementation&&eval(widgetImplementation).extend(widgetImplementation,{},{postRender:function(){this._super();var e=this.getContent();extensionMethod&&extensionMethod(this,e)}})},bizagi.override.customButtons=[],bizagi.override.addCustomMenuButton=function(e){bizagi.override.customButtons.push(e)},bizagi.workportal.controllers.menu&&(bizagi.workportal.controllers.menu.original=$.extend(!0,{},bizagi.workportal.controllers.menu.prototype),$.extend(bizagi.workportal.controllers.menu.prototype,{postRender:function(){var e=this,t=e.workportalFacade.getTemplate("menu.custom-button");return $.when(bizagi.workportal.controllers.menu.original.postRender.apply(this,arguments)).pipe((function(i){var r=$("[data-bizagi-component=menuItems]",i);return $.each(bizagi.override.customButtons,(function(i,a){if("function"!=typeof a.isAvailable||a.isAvailable()){var o=$.tmpl(t,a);null==a.submenu?o.click((function(){a.click&&a.click(e)})):o.click((function(){e.renderSubMenu(o,a.submenu,a.click)})),r.append(o)}})),i}))}})),bizagi.override.addDataService=function(e,t){if(bizagi.workportal.services.service){bizagi.workportal.services.service.original=$.extend(!0,{},bizagi.workportal.services.service.prototype);var i={};i[e]=t,$.extend(bizagi.workportal.services.service.prototype,i)}},$.Class.extend("bizagi.workportal.device.factory",{},{init:function(e){this.device=bizagi.util.detectDevice(),this.workportal=e,this.cachedFacade=null},getWorkportalFacade:function(e,t){var i=this,r=new $.Deferred;return t=void 0===t||t,null!=i.cachedFacade?r.resolve(i.cachedFacade):"desktop"==this.device?$.when(i.getDesktopWorkportalFacade(e,t)).done((function(e){i.cachedFacade=e,r.resolve(e)})):bizagi.util.isTabletDevice(this.device)?$.when(i.getTabletWorkportalFacade(e,t)).done((function(e){i.cachedFacade=e,r.resolve(e)})):bizagi.util.isMobileDevice(this.device)?$.when(i.getSmartphoneWorkportalFacade(e,t)).done((function(e){i.cachedFacade=e,r.resolve(e)})):(alert("Not supported device: "+this.device),r.resolve("")),r.promise()},getDesktopWorkportalFacade:function(e,t){var i=$.Deferred(),r=new bizagi.workportal.desktop.facade(this.workportal,e);return $.when(r.initAsyncStuff(t)).done((function(){i.resolve(r)})),i.promise()},getTabletWorkportalFacade:function(e){var t=new $.Deferred,i=new bizagi.workportal.tablet.facade(this.workportal,e);return i.initAsyncStuff().done((function(){t.resolve(i)})),t.promise()},getSmartphoneWorkportalFacade:function(e){var t=new $.Deferred,i=new bizagi.workportal.smartphone.facade(e);return i.initAsyncStuff().done((function(){t.resolve(i)})),t.promise()},getDataService:function(){return this.dataService}}),bizagi.workportal=bizagi.workportal||{},bizagi.workportal.currentInboxView||(bizagi.workportal.currentInboxView="inbox"),bizagi.workportal.state=bizagi.workportal.state||{},$.Class.extend("bizagi.workportal.facade",{},{init:function(e){this.deviceFactory=new bizagi.workportal.device.factory(this),this.dataService=new bizagi.workportal.services.service(e),this.dataService.routing=new bizagi.workportal.services.routing({dataService:this.dataService}),this.defaultParams=e||{},this.timeoutID},loadDefaultWidget:function(){var e=bizagi.cookie("bizagiDefaultWidget");if(!this.defaultWidget&&!bizagi.util.isEmpty(window.location.hash)){var t=bizagi.util.getHashParams();"/"!=t[0]&&(this.defaultWidget=t[0])}if(!this.defaultWidget&&!bizagi.util.isEmpty(window.location.search)){var i=bizagi.util.getQueryString();"activityform"!==i.widget&&"activityform"!==this.defaultParams.widget||bizagi.util.isMobileDevice()?"smartinbox"===i.widget?this.defaultWidget="smartinbox"===e?bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID:e:this.defaultWidget=i.widget:(this.defaultWidget="projectDashboard",this.defaultParams.caseLink=!0)}this.defaultWidget||bizagi.util.isEmpty(this.defaultParams.widget)||(this.defaultWidget=this.defaultParams.widget),this.defaultWidget||"undefined"==typeof BIZAGI_DEFAULT_WIDGET||bizagi.util.isEmpty(BIZAGI_DEFAULT_WIDGET)||(this.defaultWidget=BIZAGI_DEFAULT_WIDGET),!this.defaultWidget&&e&&(this.defaultWidget="smartinbox"===e?bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID:e),this.defaultWidget||(this.defaultWidget="smartphone_ios"==bizagi.util.detectDevice()||"smartphone_android"==bizagi.util.detectDevice()?bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX:bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID),"projectDashboard"!==this.defaultWidget&&"homeportal"!==this.defaultWidget&&bizagi.util.defaultWidget(this.defaultWidget),"homeportal"===this.defaultWidget&&bizagi.util.defaultWidget(bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID),this.dataService&&!this.dataService.online&&bizagi.util.isTabletDevice()&&bizagi.util.defaultWidget(bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX)},execute:function(e){var t=this,i=this.ownerDocument,r=$("body",i),a=new $.Deferred;return e=e||$("<div/>").appendTo(r),t.executionDeferred=new $.Deferred,$.when(t.dataService.getCurrentUser(),t.loadPreferences()).done((function(i,o){bizagi.currentUser=i[0],bizagi.services.preferences(o),bizagi.util.changeData(i[0]),bizagi.localization.overrideSpecificResource("dateFormat",i[0].shortDateFormat),bizagi.localization.overrideSpecificResource("timeFormat",i[0].timeFormat),t.loadDefaultWidget(),t.process().done((function(i){a.resolve(i),bizagi.util.replaceSelector(r,e,i),t.executionDeferred.resolve()}))})).fail((function(){t.dataService.logout()})),a},loadPreferences:function(){var e=new $.Deferred;return $.when(this.dataService.getPreferencesWorkportalCurrentUser()).done((function(t){e.resolve(t)})).fail((function(){e.resolve()})),e.promise()},createWebpart:function(e){return this.executeWebpart($.extend(e,{creating:!0}))},testWebpartConfiguration:function(e){var t=e.webpartConfiguration,i=this.ownerDocument,r=$("body",i);e.canvas||$("<div/>").appendTo(r);return!(!t.url||""==t.url)||(bizagi.webparts.addConfigurationMessage(e,"bizagi-sharepoint-configuration-error"),!1)},executeWebpart:function(e){var t=this.ownerDocument,i=$("body",t),r=e.canvas||$("<div/>").appendTo(i),a=!0;if(e.webpartConfiguration&&(a=this.testWebpartConfiguration(e)),a)return this.processWebpart(e).done((function(e){r.append(e.content)}))},ready:function(){return this.executionDeferred.promise()},process:function(){var e=this,t=new $.Deferred,i=this.deviceFactory.getWorkportalFacade(e.dataService);return e.processOfflineData(),$.when(i).pipe((function(t){return e.processWorkportal(t)})).done((function(e){t.resolve(e)})),t.promise()},processOfflineData:function(){var e=this;void 0!==e.dataService.fetchOfflineData&&1==e.dataService.online&&$.when(e.dataService.pushOfflineData()).always((function(){e.dataService.fetchOfflineData()}))},processWebpart:function(e){var t,i,r=new $.Deferred;bizagi.detectRealDevice();return t=this.deviceFactory.getWorkportalFacade(this.dataService,!1),$.extend(e,this.defaultParams),$.when(t).pipe((function(t){var i=new $.Deferred;return $.when(t.loadWebpart(e)).done((function(){i.resolve(t)})),i.promise()})).pipe((function(t){return(i=t.getWebpart(e.webpart,e)).render(e)})).done((function(e){r.resolve({webpart:i,content:e})})),r.promise()},processWorkportal:function(e){var t=this,i=this.mainController=e.getMainController();new $.Deferred;return i.render().then((function(e){return $.when(i.menu.isRendered()).then((function(){var e=t.getWidgetByDataUser(t.defaultParams);if("projectDashboard"===e&&t.defaultParams.caseLink){var r={action:bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,idCase:bizagi.util.getQueryString().idCase,guid:bizagi.util.getQueryString().guid,caseLink:!0};void 0!==bizagi.util.getQueryString().idWorkitem&&(r.idWorkItem=bizagi.util.getQueryString().idWorkitem),i.publish("executeAction",r)}else e===bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_SMARTINBOX&&void 0!==bizagi.util.getQueryString().action?i.setWidget($.extend(t.defaultParams,{widgetName:bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID},bizagi.util.getQueryString())):i.setWidget($.extend(t.defaultParams,{widgetName:e},bizagi.util.getQueryString()));i.menu&&(i.menu.performResizeLayout(),e!==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX&&e!==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID||t.mainController.publish("showMainMenu"))})),e}))},getWidgetByDataUser:function(){var e=bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID,t="projectDashboard"!==this.defaultWidget?bizagi.util.defaultWidget():"projectDashboard",i="",r=JSON.parse(bizagi.cookie("bizagiUserDisplayOptions"));if(r&&r.startPage)i={key:"userstartpage",value:r.startPage};else if(bizagi.currentUser.sUserProperties)for(var a=0,o=bizagi.currentUser.sUserProperties.length;a<o;a++)if("userstartpage"===bizagi.currentUser.sUserProperties[a].key){i=bizagi.currentUser.sUserProperties[a];break}return t!=bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX&&t!=bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID&&t!=bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_HOMEPORTAL?e=t:void 0===i||""===i||""===i.value||"1"===i.value?e=this.getWidgetByCookieAndStakeholders():"2"===i.value&&this.currentUserHaveStakeholderAssociated()?e=bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_HOMEPORTAL:"2"!==i.value||this.currentUserHaveStakeholderAssociated()?"3"===i.value&&(e=this.getWidgetByCookie(!0)):e=this.getWidgetByCookie(!0),e},getWidgetByCookieAndStakeholders:function(){return this.getWidgetByCookie(!1)},currentUserHaveStakeholderAssociated:function(){return bizagi.currentUser.associatedStakeholders&&bizagi.currentUser.associatedStakeholders.length>0},getWidgetByCookie:function(e){var t=bizagi.util.defaultWidget();return e?t===bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX||t===bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID?t:bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID:this.currentUserHaveStakeholderAssociated()?bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_HOMEPORTAL:t&&t===bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX||t===bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID?t:bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID},getMainController:function(){return this.mainController}}),$.Class.extend("bizagi.workportal.observable",{},{init:function(){this.observableElement=$({})},sub:function(e){var t=$._data(this.observableElement[0],"events");t&&t[e]||this.observableElement.on.apply(this.observableElement,arguments)},unsub:function(){this.observableElement.off.unbind?this.observableElement.off.unbind.apply(this.observableElement,arguments):this.observableElement.off.apply(this.observableElement,arguments)},pub:function(){return this.observableElement.triggerHandler.apply(this.observableElement,arguments)}});
//# sourceMappingURL=../../../../Maps/smartphone_android/workportal.smartphone.production.js.map
